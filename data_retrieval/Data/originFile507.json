{"items":[{"tags":["java","spring","events"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1681278781,"post_id":74123103,"comment_id":134028716,"body_markdown":"There is no [tag:functional-programming} here. Don&#39;t tag indiscriminately.","body":"There is no [tag:functional-programming} here. Don&#39;t tag indiscriminately."}],"answers":[{"tags":[],"owner":{"account_id":470836,"reputation":330,"user_id":878241,"display_name":"Evgeny Cheryomushkin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666244005,"creation_date":1666243691,"answer_id":74134824,"question_id":74123103,"body_markdown":"Please try to create a bean for network.\r\n```\r\n@Configuration\r\npublic class FabricConfig {\r\n    @Value(&quot;${fabric.channel.name}&quot;)\r\n    private String channelName;\r\n\r\n    @Bean\r\n    public Gateway getGateway() {\r\n        return ...;\r\n    }\r\n\r\n    @Bean\r\n    public Network getNetwork(Gateway gateway) {\r\n        return gateway.getNetwork(channelName);\r\n    }\r\n}\r\n```\r\nThis bean can be used in EventConsumer class. \r\n```\r\n@Component\r\n@AllArgsConstructor\r\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\r\n    private Network network;\r\n\r\n```\r\nNote that `@Autowired` annotation is not required, if you have\r\nconstructor. Spring will try to inject beans via constructor even if it is not annotated as `@Autowired`.\r\n\r\nUnfortunatelly I was unable to verify that it works. Not having experience with Hyperledger Fabric Blockchain.","title":"How to pass a network instance to a consumer in a spring java application","body":"<p>Please try to create a bean for network.</p>\n<pre><code>@Configuration\npublic class FabricConfig {\n    @Value(&quot;${fabric.channel.name}&quot;)\n    private String channelName;\n\n    @Bean\n    public Gateway getGateway() {\n        return ...;\n    }\n\n    @Bean\n    public Network getNetwork(Gateway gateway) {\n        return gateway.getNetwork(channelName);\n    }\n}\n</code></pre>\n<p>This bean can be used in EventConsumer class.</p>\n<pre><code>@Component\n@AllArgsConstructor\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\n    private Network network;\n\n</code></pre>\n<p>Note that <code>@Autowired</code> annotation is not required, if you have\nconstructor. Spring will try to inject beans via constructor even if it is not annotated as <code>@Autowired</code>.</p>\n<p>Unfortunatelly I was unable to verify that it works. Not having experience with Hyperledger Fabric Blockchain.</p>\n"}],"owner":{"account_id":19003227,"reputation":57,"user_id":13911459,"display_name":"gilvictor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681278761,"creation_date":1666172199,"question_id":74123103,"body_markdown":"I have a spring java applicaction with a service that initializes a network.\r\n\r\n```\r\npackage com.victor.simple.events.services;\r\nimport org.hyperledger.fabric.gateway.*;\r\n\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.stereotype.Service;\r\n\r\nimport java.io.FileInputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStreamReader;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.security.InvalidKeyException;\r\nimport java.security.PrivateKey;\r\nimport java.security.cert.CertificateException;\r\nimport java.security.cert.CertificateFactory;\r\nimport java.security.cert.X509Certificate;\r\n\r\n@Service\r\npublic class HyperledgerNetworkService {\r\n\r\n    @Value(&quot;${fabric.wallet.path}&quot;)\r\n    private String walletPath;\r\n\r\n    @Value(&quot;${fabric.wallet.privateKey}&quot;)\r\n    private String privateKeyPath;\r\n\r\n    @Value(&quot;${fabric.wallet.x509Cert}&quot;)\r\n    private String x509CertPath;\r\n\r\n    @Value(&quot;${fabric.wallet.certificate.type}&quot;)\r\n    private String certType;\r\n\r\n    @Value(&quot;${fabric.org.msp}&quot;)\r\n    private String mspId;\r\n\r\n    @Value(&quot;${fabric.org.networkProfile}&quot;)\r\n    private String networkProfilePath;\r\n\r\n    private static final String ADMIN_LABEL = &quot;admin&quot;;\r\n\r\n    @Bean\r\n    public Gateway initialize() throws IOException,CertificateException, InvalidKeyException {\r\n        System.out.println(&quot;Initializing Gateway&quot;);\r\n\r\n        //Load an existing wallet holding identities used to access the network.\r\n        Path walletDirectory = Paths.get(walletPath);\r\n\r\n        try (FileInputStream certificate = new FileInputStream(walletDirectory.toAbsolutePath()+x509CertPath);\r\n             FileInputStream privateKey = new FileInputStream(walletDirectory.toAbsolutePath()+privateKeyPath)) {\r\n\r\n            CertificateFactory fac = CertificateFactory.getInstance(certType);\r\n            X509Certificate cert = (X509Certificate) fac.generateCertificate(certificate);\r\n\r\n            PrivateKey pk = Identities.readPrivateKey(new InputStreamReader(privateKey));\r\n            Identity identity = Identities.newX509Identity(mspId,cert,pk);\r\n            Wallet wallet = Wallets.newInMemoryWallet();\r\n\r\n            if(wallet.get(ADMIN_LABEL) == null)\r\n                wallet.put(ADMIN_LABEL, identity);\r\n\r\n            //Path to a common connection profile describing the network.\r\n            Path networkConfigFile = Paths.get(networkProfilePath);\r\n            System.out.println(networkConfigFile);\r\n\r\n            //Configure the gateway connection used to access the network.\r\n\r\n            Gateway.Builder builder = Gateway.createBuilder()\r\n                    .identity(wallet,&quot;admin&quot;)\r\n                    //.discovery(true)\r\n                    .networkConfig(networkConfigFile);\r\n\r\n            return builder.connect();\r\n        }\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\nThen i have a controller that handles the contract events on that network:\r\n\r\n```\r\n@RequiredArgsConstructor\r\n@RestController\r\npublic class EventController {\r\n\r\n    @Autowired\r\n    private Consumer&lt;ContractEvent&gt; eventConsumer;\r\n\r\n    private final Gateway networkService;\r\n\r\n    @Value(&quot;${fabric.channel.contract}&quot;)\r\n    private String contractName;\r\n\r\n    @Value(&quot;${fabric.channel.name}&quot;)\r\n    private String channelName;\r\n\r\n    @PostConstruct\r\n    private void registerEvent() throws ContractException{\r\n        System.out.println(&quot;PostConstruct registerEvent() in EventController execution start&quot;);\r\n\r\n        //Instantiating networks and chaincodes\r\n        Network network = networkService.getNetwork(channelName);\r\n        Contract contract = network.getContract(contractName);\r\n\r\n        //Capture contract events\r\n        contract.addContractListener(eventConsumer);\r\n\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\nYou can see that when an event occurs this is managed by the event consumer:\r\n\r\n```\r\n\r\n@Component\r\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\r\n\r\n\r\n    @Override\r\n    public void accept(ContractEvent contractEvent) {\r\n        System.out.println(&quot;New event received in the EventConsumer&quot;);\r\n\r\n        \r\n    }\r\n\r\n   }\r\n\r\n```\r\n\r\nWhat i want to do is to be able to pass to the EventConsumer the instance of the network so from there i can operate against that network after an event is identified.\r\n\r\nSomething like\r\n\r\nThanks\r\n\r\n\r\n","title":"How to pass a network instance to a consumer in a spring java application","body":"<p>I have a spring java applicaction with a service that initializes a network.</p>\n<pre><code>package com.victor.simple.events.services;\nimport org.hyperledger.fabric.gateway.*;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.stereotype.Service;\n\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.security.InvalidKeyException;\nimport java.security.PrivateKey;\nimport java.security.cert.CertificateException;\nimport java.security.cert.CertificateFactory;\nimport java.security.cert.X509Certificate;\n\n@Service\npublic class HyperledgerNetworkService {\n\n    @Value(&quot;${fabric.wallet.path}&quot;)\n    private String walletPath;\n\n    @Value(&quot;${fabric.wallet.privateKey}&quot;)\n    private String privateKeyPath;\n\n    @Value(&quot;${fabric.wallet.x509Cert}&quot;)\n    private String x509CertPath;\n\n    @Value(&quot;${fabric.wallet.certificate.type}&quot;)\n    private String certType;\n\n    @Value(&quot;${fabric.org.msp}&quot;)\n    private String mspId;\n\n    @Value(&quot;${fabric.org.networkProfile}&quot;)\n    private String networkProfilePath;\n\n    private static final String ADMIN_LABEL = &quot;admin&quot;;\n\n    @Bean\n    public Gateway initialize() throws IOException,CertificateException, InvalidKeyException {\n        System.out.println(&quot;Initializing Gateway&quot;);\n\n        //Load an existing wallet holding identities used to access the network.\n        Path walletDirectory = Paths.get(walletPath);\n\n        try (FileInputStream certificate = new FileInputStream(walletDirectory.toAbsolutePath()+x509CertPath);\n             FileInputStream privateKey = new FileInputStream(walletDirectory.toAbsolutePath()+privateKeyPath)) {\n\n            CertificateFactory fac = CertificateFactory.getInstance(certType);\n            X509Certificate cert = (X509Certificate) fac.generateCertificate(certificate);\n\n            PrivateKey pk = Identities.readPrivateKey(new InputStreamReader(privateKey));\n            Identity identity = Identities.newX509Identity(mspId,cert,pk);\n            Wallet wallet = Wallets.newInMemoryWallet();\n\n            if(wallet.get(ADMIN_LABEL) == null)\n                wallet.put(ADMIN_LABEL, identity);\n\n            //Path to a common connection profile describing the network.\n            Path networkConfigFile = Paths.get(networkProfilePath);\n            System.out.println(networkConfigFile);\n\n            //Configure the gateway connection used to access the network.\n\n            Gateway.Builder builder = Gateway.createBuilder()\n                    .identity(wallet,&quot;admin&quot;)\n                    //.discovery(true)\n                    .networkConfig(networkConfigFile);\n\n            return builder.connect();\n        }\n    }\n\n}\n\n</code></pre>\n<p>Then i have a controller that handles the contract events on that network:</p>\n<pre><code>@RequiredArgsConstructor\n@RestController\npublic class EventController {\n\n    @Autowired\n    private Consumer&lt;ContractEvent&gt; eventConsumer;\n\n    private final Gateway networkService;\n\n    @Value(&quot;${fabric.channel.contract}&quot;)\n    private String contractName;\n\n    @Value(&quot;${fabric.channel.name}&quot;)\n    private String channelName;\n\n    @PostConstruct\n    private void registerEvent() throws ContractException{\n        System.out.println(&quot;PostConstruct registerEvent() in EventController execution start&quot;);\n\n        //Instantiating networks and chaincodes\n        Network network = networkService.getNetwork(channelName);\n        Contract contract = network.getContract(contractName);\n\n        //Capture contract events\n        contract.addContractListener(eventConsumer);\n\n    }\n\n\n}\n</code></pre>\n<p>You can see that when an event occurs this is managed by the event consumer:</p>\n<pre><code>\n@Component\npublic class EventConsumer implements Consumer&lt;ContractEvent&gt; {\n\n\n    @Override\n    public void accept(ContractEvent contractEvent) {\n        System.out.println(&quot;New event received in the EventConsumer&quot;);\n\n        \n    }\n\n   }\n\n</code></pre>\n<p>What i want to do is to be able to pass to the EventConsumer the instance of the network so from there i can operate against that network after an event is identified.</p>\n<p>Something like</p>\n<p>Thanks</p>\n"},{"tags":["java","android","date","daterangepicker"],"answers":[{"tags":[],"owner":{"account_id":5680624,"reputation":1330,"user_id":4491971,"display_name":"Mohit Ajwani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1620018966,"creation_date":1620018966,"answer_id":67363787,"question_id":67363582,"body_markdown":"You can check this tutorial. It uses material date picker.\r\n\r\nhttps://www.geeksforgeeks.org/material-design-date-picker-in-android/\r\n\r\n    final MaterialDatePicker materialDatePicker = materialDateBuilder.build();\r\n  \r\n        // handle select date button which opens the\r\n        // material design date picker\r\n        mPickDateButton.setOnClickListener(\r\n                new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {\r\n                        // getSupportFragmentManager() to\r\n                        // interact with the fragments\r\n                        // associated with the material design\r\n                        // date picker tag is to get any error\r\n                        // in logcat\r\n                        materialDatePicker.show(getSupportFragmentManager(), &quot;MATERIAL_DATE_PICKER&quot;);\r\n                    }\r\n                });\r\n  \r\n        // now handle the positive button click from the\r\n        // material design date picker\r\n        materialDatePicker.addOnPositiveButtonClickListener(\r\n                new MaterialPickerOnPositiveButtonClickListener() {\r\n                    @SuppressLint(&quot;SetTextI18n&quot;)\r\n                    @Override\r\n                    public void onPositiveButtonClick(Object selection) {\r\n  \r\n                        // if the user clicks on the positive\r\n                        // button that is ok button update the\r\n                        // selected date\r\n                        mShowSelectedDateText.setText(&quot;Selected Date is : &quot; + materialDatePicker.getHeaderText());\r\n                        // in the above statement, getHeaderText\r\n                        // is the selected date preview from the\r\n                        // dialog\r\n                    }\r\n                });","title":"Android Studio - Show selected dates from dateRangePicker on TextView","body":"<p>You can check this tutorial. It uses material date picker.</p>\n<p><a href=\"https://www.geeksforgeeks.org/material-design-date-picker-in-android/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/material-design-date-picker-in-android/</a></p>\n<pre><code>final MaterialDatePicker materialDatePicker = materialDateBuilder.build();\n\n    // handle select date button which opens the\n    // material design date picker\n    mPickDateButton.setOnClickListener(\n            new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    // getSupportFragmentManager() to\n                    // interact with the fragments\n                    // associated with the material design\n                    // date picker tag is to get any error\n                    // in logcat\n                    materialDatePicker.show(getSupportFragmentManager(), &quot;MATERIAL_DATE_PICKER&quot;);\n                }\n            });\n\n    // now handle the positive button click from the\n    // material design date picker\n    materialDatePicker.addOnPositiveButtonClickListener(\n            new MaterialPickerOnPositiveButtonClickListener() {\n                @SuppressLint(&quot;SetTextI18n&quot;)\n                @Override\n                public void onPositiveButtonClick(Object selection) {\n\n                    // if the user clicks on the positive\n                    // button that is ok button update the\n                    // selected date\n                    mShowSelectedDateText.setText(&quot;Selected Date is : &quot; + materialDatePicker.getHeaderText());\n                    // in the above statement, getHeaderText\n                    // is the selected date preview from the\n                    // dialog\n                }\n            });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12179868,"reputation":97,"user_id":8891635,"display_name":"hamza mon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681278737,"creation_date":1681278452,"answer_id":75992266,"question_id":67363582,"body_markdown":"I was facing the same problem and i fixed it this way:\r\n```\r\npublic class AmountFilter extends Fragment {\r\n\r\n    RangeSlider rangeSlider;\r\n    private Button mPickDateButton;\r\n    private TextView mShowSelectedDateText;\r\n\r\n    public AmountFilter() {\r\n     }\r\n\r\n\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\r\n                             Bundle savedInstanceState) {\r\n        // Inflate the layout for this fragment\r\n        View v =  inflater.inflate(R.layout.view_frag, container, false);\r\n\r\n       \r\n\r\n\r\n        mPickDateButton = v.findViewById(R.id.pick_date_button);\r\n        mShowSelectedDateText = v.findViewById(R.id.show_selected_date);\r\n \r\n        MaterialDatePicker.Builder&lt;Pair&lt;Long, Long&gt;&gt; materialDateBuilder = MaterialDatePicker.Builder.dateRangePicker();\r\n\r\n        materialDateBuilder.setTitleText(&quot;SELECT A DATE&quot;);\r\n        final MaterialDatePicker materialDatePicker = materialDateBuilder.build();\r\n\r\n        // handle select date button which opens the\r\n        // material design date picker\r\n        mPickDateButton.setOnClickListener(\r\n                new View.OnClickListener() {\r\n                    @Override\r\n                    public void onClick(View v) {                        materialDatePicker.show(getActivity().getSupportFragmentManager(), &quot;MATERIAL_DATE_PICKER&quot;);\r\n                    }\r\n                });\r\n\r\n        // now handle the positive button click from the\r\n        // material design date picker\r\n        materialDatePicker.addOnPositiveButtonClickListener(\r\n                new MaterialPickerOnPositiveButtonClickListener() {\r\n                    @SuppressLint(&quot;SetTextI18n&quot;)\r\n                    @Override\r\n                    public void onPositiveButtonClick(Object selection) {\r\n\r\n                        // if the user clicks on the positive\r\n                        // button that is ok button update the\r\n                        // selected date\r\n                        mShowSelectedDateText.setText(&quot;Selected Date is : &quot; + materialDatePicker.getHeaderText());\r\n                        // in the above statement, getHeaderText\r\n                        // will return selected date preview from the\r\n                        // dialog\r\n                    }\r\n                });\r\n\r\n        return v;\r\n    }\r\n}\r\n```","title":"Android Studio - Show selected dates from dateRangePicker on TextView","body":"<p>I was facing the same problem and i fixed it this way:</p>\n<pre><code>public class AmountFilter extends Fragment {\n\n    RangeSlider rangeSlider;\n    private Button mPickDateButton;\n    private TextView mShowSelectedDateText;\n\n    public AmountFilter() {\n     }\n\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, ViewGroup container,\n                             Bundle savedInstanceState) {\n        // Inflate the layout for this fragment\n        View v =  inflater.inflate(R.layout.view_frag, container, false);\n\n       \n\n\n        mPickDateButton = v.findViewById(R.id.pick_date_button);\n        mShowSelectedDateText = v.findViewById(R.id.show_selected_date);\n \n        MaterialDatePicker.Builder&lt;Pair&lt;Long, Long&gt;&gt; materialDateBuilder = MaterialDatePicker.Builder.dateRangePicker();\n\n        materialDateBuilder.setTitleText(&quot;SELECT A DATE&quot;);\n        final MaterialDatePicker materialDatePicker = materialDateBuilder.build();\n\n        // handle select date button which opens the\n        // material design date picker\n        mPickDateButton.setOnClickListener(\n                new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v) {                        materialDatePicker.show(getActivity().getSupportFragmentManager(), &quot;MATERIAL_DATE_PICKER&quot;);\n                    }\n                });\n\n        // now handle the positive button click from the\n        // material design date picker\n        materialDatePicker.addOnPositiveButtonClickListener(\n                new MaterialPickerOnPositiveButtonClickListener() {\n                    @SuppressLint(&quot;SetTextI18n&quot;)\n                    @Override\n                    public void onPositiveButtonClick(Object selection) {\n\n                        // if the user clicks on the positive\n                        // button that is ok button update the\n                        // selected date\n                        mShowSelectedDateText.setText(&quot;Selected Date is : &quot; + materialDatePicker.getHeaderText());\n                        // in the above statement, getHeaderText\n                        // will return selected date preview from the\n                        // dialog\n                    }\n                });\n\n        return v;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21392918,"reputation":25,"user_id":15756631,"display_name":"Nur Nayli Nasuha Shamsul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67363787,"answer_count":2,"score":1,"last_activity_date":1681278737,"creation_date":1620017106,"question_id":67363582,"body_markdown":"Does anyone know how to show selected dates from dateRangePicker on TextView? This function is supposed to show the selected date range once user has picked the date from the dialog. \r\n\r\nHere is my code \r\n\r\n        @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main_cuti);\r\n\r\n        btnDate = findViewById(R.id.btnDate);\r\n        pilihDate = findViewById(R.id.mvPilihTarikh);\r\n        \r\n        Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n        calendar.clear();\r\n\r\n        Pair&lt;Long, Long&gt; selectionDates=null;\r\n\r\n        Long today = MaterialDatePicker.todayInUtcMilliseconds();\r\n\r\n        calendar.setTimeInMillis(today);\r\n\r\n        calendar.roll(Calendar.MONTH, Calendar.JANUARY);\r\n        Long january = calendar.getTimeInMillis();\r\n\r\n        calendar.roll(Calendar.MONTH, Calendar.DECEMBER);\r\n        Long december = calendar.getTimeInMillis();\r\n\r\n        CalendarConstraints.Builder constraintBuilder = new CalendarConstraints.Builder();\r\n        constraintBuilder.setValidator(DateValidatorPointForward.now());\r\n\r\n        MaterialDatePicker.Builder&lt;Pair&lt;Long, Long&gt;&gt; builder = MaterialDatePicker.Builder.dateRangePicker();\r\n        CalendarConstraints.Builder constraintsBuilder = new CalendarConstraints.Builder();\r\n        builder.setCalendarConstraints(constraintsBuilder.build());\r\n        MaterialDatePicker&lt;?&gt; picker = builder.build();\r\n        picker.show(getSupportFragmentManager(), builder.toString());\r\n        builder.setTitleText(&quot;PILIH TARIKH&quot;);\r\n        builder.setSelection(selectionDates);\r\n        builder.setCalendarConstraints(constraintBuilder.build());\r\n        MaterialDatePicker materialDatePicker = builder.build();\r\n\r\n        btnDate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                materialDatePicker.show(getSupportFragmentManager(), materialDatePicker.toString());\r\n\r\n            }\r\n        });\r\n\r\n    }","title":"Android Studio - Show selected dates from dateRangePicker on TextView","body":"<p>Does anyone know how to show selected dates from dateRangePicker on TextView? This function is supposed to show the selected date range once user has picked the date from the dialog.</p>\n<p>Here is my code</p>\n<pre><code>    @Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main_cuti);\n\n    btnDate = findViewById(R.id.btnDate);\n    pilihDate = findViewById(R.id.mvPilihTarikh);\n    \n    Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone(&quot;UTC&quot;));\n    calendar.clear();\n\n    Pair&lt;Long, Long&gt; selectionDates=null;\n\n    Long today = MaterialDatePicker.todayInUtcMilliseconds();\n\n    calendar.setTimeInMillis(today);\n\n    calendar.roll(Calendar.MONTH, Calendar.JANUARY);\n    Long january = calendar.getTimeInMillis();\n\n    calendar.roll(Calendar.MONTH, Calendar.DECEMBER);\n    Long december = calendar.getTimeInMillis();\n\n    CalendarConstraints.Builder constraintBuilder = new CalendarConstraints.Builder();\n    constraintBuilder.setValidator(DateValidatorPointForward.now());\n\n    MaterialDatePicker.Builder&lt;Pair&lt;Long, Long&gt;&gt; builder = MaterialDatePicker.Builder.dateRangePicker();\n    CalendarConstraints.Builder constraintsBuilder = new CalendarConstraints.Builder();\n    builder.setCalendarConstraints(constraintsBuilder.build());\n    MaterialDatePicker&lt;?&gt; picker = builder.build();\n    picker.show(getSupportFragmentManager(), builder.toString());\n    builder.setTitleText(&quot;PILIH TARIKH&quot;);\n    builder.setSelection(selectionDates);\n    builder.setCalendarConstraints(constraintBuilder.build());\n    MaterialDatePicker materialDatePicker = builder.build();\n\n    btnDate.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            materialDatePicker.show(getSupportFragmentManager(), materialDatePicker.toString());\n\n        }\n    });\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","swagger-ui","swagger-2.0"],"comments":[{"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"score":0,"creation_date":1637413575,"post_id":70043841,"comment_id":123822588,"body_markdown":"Probably the problem explained here: https://stackoverflow.com/a/70037507/15496965","body":"Probably the problem explained here: <a href=\"https://stackoverflow.com/a/70037507/15496965\">stackoverflow.com/a/70037507/15496965</a>"}],"answers":[{"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1637410737,"creation_date":1637410737,"answer_id":70045838,"question_id":70043841,"body_markdown":"I know this does not solve your problem directly, but consider moving to [springdoc][1]. Springfox is so buggy at this point that is a pain to use. I&#39;ve moved to `springdoc` 2 years ago because of its Spring WebFlux support and I am very happy about it. Additionally, it also supports Kotlin Coroutines, which I am not sure Springfox does.\r\n\r\nIf you decide to migrate, `springdoc` even has a [migration guide][2].\r\n\r\n\r\n  [1]: https://springdoc.org/\r\n  [2]: https://springdoc.org/#migrating-from-springfox","title":"Swagger 2 Issue spring Boot","body":"<p>I know this does not solve your problem directly, but consider moving to <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">springdoc</a>. Springfox is so buggy at this point that is a pain to use. I've moved to <code>springdoc</code> 2 years ago because of its Spring WebFlux support and I am very happy about it. Additionally, it also supports Kotlin Coroutines, which I am not sure Springfox does.</p>\n<p>If you decide to migrate, <code>springdoc</code> even has a <a href=\"https://springdoc.org/#migrating-from-springfox\" rel=\"nofollow noreferrer\">migration guide</a>.</p>\n"},{"tags":[],"owner":{"account_id":16144577,"reputation":1,"user_id":11654699,"display_name":"Sondos Mohmmad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637524159,"creation_date":1637524159,"answer_id":70058039,"question_id":70043841,"body_markdown":"For the integration between spring-boot and swagger-ui, add the library to the list of your project dependencies (No additional configuration is needed):\r\n\r\n```\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n          &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.12&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n```\r\n\r\n - The Swagger UI page will then be available at\r\n   **http://server:port/context-path/swagger-ui.html** and the OpenAPI\r\n   description will be available at the following url for json format:\r\n   **http://server:port/context-path/v3/api-docs**\r\n\r\n - server: The server name or IP\r\n - port: The server port\r\n - context-path: The context path of the application\r\n\r\n","title":"Swagger 2 Issue spring Boot","body":"<p>For the integration between spring-boot and swagger-ui, add the library to the list of your project dependencies (No additional configuration is needed):</p>\n<pre><code>     &lt;dependency&gt;\n          &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n          &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n          &lt;version&gt;1.5.12&lt;/version&gt;\n     &lt;/dependency&gt;\n</code></pre>\n<ul>\n<li><p>The Swagger UI page will then be available at\n<strong>http://server:port/context-path/swagger-ui.html</strong> and the OpenAPI\ndescription will be available at the following url for json format:\n<strong>http://server:port/context-path/v3/api-docs</strong></p>\n</li>\n<li><p>server: The server name or IP</p>\n</li>\n<li><p>port: The server port</p>\n</li>\n<li><p>context-path: The context path of the application</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":23695812,"reputation":211,"user_id":17719543,"display_name":"Leandro Lima"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1639961473,"creation_date":1639961473,"answer_id":70416441,"question_id":70043841,"body_markdown":"I solved it by adding &quot;spring.mvc.pathmatch.matching-strategy=ant-path-matcher&quot; in application.properties. ","title":"Swagger 2 Issue spring Boot","body":"<p>I solved it by adding &quot;spring.mvc.pathmatch.matching-strategy=ant-path-matcher&quot; in application.properties.</p>\n"},{"tags":[],"owner":{"account_id":3558487,"reputation":1004,"user_id":2971549,"display_name":"Saman Salehi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1639981307,"creation_date":1639981307,"answer_id":70418049,"question_id":70043841,"body_markdown":"My suggestion is when you are using spring-boot then it is better to use spring boot dependency for swagger. So, spring-boot will take care of your default settings.\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n        &lt;version&gt;...&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"Swagger 2 Issue spring Boot","body":"<p>My suggestion is when you are using spring-boot then it is better to use spring boot dependency for swagger. So, spring-boot will take care of your default settings.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n    &lt;version&gt;...&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8195918,"reputation":119,"user_id":6168777,"display_name":"Tony Banks"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646841471,"creation_date":1646841471,"answer_id":71412262,"question_id":70043841,"body_markdown":"Adding this &quot;spring.mvc.pathmatch.matching-strategy=ant-path-matcher&quot; to your application.properties file solves the problem.\r\nIt&#39;s what i used and i saved me alot of trouble.","title":"Swagger 2 Issue spring Boot","body":"<p>Adding this &quot;spring.mvc.pathmatch.matching-strategy=ant-path-matcher&quot; to your application.properties file solves the problem.\nIt's what i used and i saved me alot of trouble.</p>\n"},{"tags":[],"owner":{"account_id":24525340,"reputation":101,"user_id":18437856,"display_name":"Arif Suleymanov"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1647028934,"creation_date":1647028934,"answer_id":71444070,"question_id":70043841,"body_markdown":"For a long time I have tried to solve this problem and solution for this is:\r\n\r\n*a) adding this to application.properties:*\r\n\r\n    spring.mvc.pathmatch.matching-strategy=ant-path-matcher \r\n\r\n*b) adding this to application.yaml(or application.yml):* \r\n\r\n    spring:\r\n      mvc:\r\n        pathmatch:\r\n          matching-strategy: ant_path_matcher\r\n\r\n","title":"Swagger 2 Issue spring Boot","body":"<p>For a long time I have tried to solve this problem and solution for this is:</p>\n<p><em>a) adding this to application.properties:</em></p>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant-path-matcher \n</code></pre>\n<p><em>b) adding this to application.yaml(or application.yml):</em></p>\n<pre><code>spring:\n  mvc:\n    pathmatch:\n      matching-strategy: ant_path_matcher\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28063180,"reputation":1,"user_id":21436969,"display_name":"Anonymus S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679704985,"creation_date":1679298616,"answer_id":75787676,"question_id":70043841,"body_markdown":"Replace these in Pom.xml.\r\n    \r\nChange the parent version to 2.5.0\r\n    \r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt;\r\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\nand add these:\r\n    \r\n    &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox- swagger2 --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt; io.springfox &lt;/groupId&gt;\r\n        &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n        &lt;version&gt;2.5.0&lt;/version&gt; \r\n    &lt;/dependency&gt;","title":"Swagger 2 Issue spring Boot","body":"<p>Replace these in Pom.xml.</p>\n<p>Change the parent version to 2.5.0</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.5.0&lt;/version&gt;\n    &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>and add these:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox- swagger2 --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n    &lt;version&gt;2.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt; io.springfox &lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;2.5.0&lt;/version&gt; \n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":23399064,"reputation":81,"user_id":17462519,"display_name":"Shubham Rai"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20166,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"answer_count":7,"score":7,"last_activity_date":1681278472,"creation_date":1637391042,"question_id":70043841,"body_markdown":"I&#39;m facing issue with Swagger Integration in Spring Boot. Have a look at the code and error snippet.\r\n    \r\n------------------POM--------------------\r\n```xml\r\n&lt;properties&gt;\r\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;swagger.version&gt;2.9.2&lt;/swagger.version&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    &lt;artifactId&gt;springfox-bean-validators&lt;/artifactId&gt;\r\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n    \r\n-----------------App class--------------\r\n```java\r\n@SpringBootApplication\r\n@EnableSwagger2\r\npublic class ProducerApplication {\r\n\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(ServletPocProducerApplication.class, args);\r\n  }\r\n  \r\n  @Bean \r\n  public Docket api() { \r\n    return new Docket(DocumentationType.SWAGGER_2)\r\n      .select() \r\n      .apis(RequestHandlerSelectors.any())\r\n      .paths(PathSelectors.any())\r\n      .build();\r\n  }\r\n}\r\n```\r\n\r\nStack Trace\r\n```\r\norg.springframework.context.ApplicationContextException: Failed to start bean \r\n&#39;documentationPluginsBootstrapper&#39;; nested exception is \r\n java.lang.NullPointerException: Cannot invoke \r\n&quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.toString()&quot; \r\nbecause the return value of \r\n&quot;springfox.documentation.spi.service.contexts.Orderings.patternsCondition(springfox.docume \r\nntation.RequestHandler)&quot; is null\r\n   at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.13.jar:5.3.13]\r\n```\r\n\r\nHow do I fix this??","title":"Swagger 2 Issue spring Boot","body":"<p>I'm facing issue with Swagger Integration in Spring Boot. Have a look at the code and error snippet.</p>\n<p>------------------POM--------------------</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;swagger.version&gt;2.9.2&lt;/swagger.version&gt;\n&lt;/properties&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n    &lt;artifactId&gt;springfox-bean-validators&lt;/artifactId&gt;\n    &lt;version&gt;${swagger.version}&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>-----------------App class--------------</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableSwagger2\npublic class ProducerApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(ServletPocProducerApplication.class, args);\n  }\n  \n  @Bean \n  public Docket api() { \n    return new Docket(DocumentationType.SWAGGER_2)\n      .select() \n      .apis(RequestHandlerSelectors.any())\n      .paths(PathSelectors.any())\n      .build();\n  }\n}\n</code></pre>\n<p>Stack Trace</p>\n<pre><code>org.springframework.context.ApplicationContextException: Failed to start bean \n'documentationPluginsBootstrapper'; nested exception is \n java.lang.NullPointerException: Cannot invoke \n&quot;org.springframework.web.servlet.mvc.condition.PatternsRequestCondition.toString()&quot; \nbecause the return value of \n&quot;springfox.documentation.spi.service.contexts.Orderings.patternsCondition(springfox.docume \nntation.RequestHandler)&quot; is null\n   at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.13.jar:5.3.13]\n</code></pre>\n<p>How do I fix this??</p>\n"},{"tags":["java","protocol-buffers"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1681283989,"post_id":75992260,"comment_id":134029736,"body_markdown":"Are you just looking for newBuilder()?","body":"Are you just looking for newBuilder()?"}],"owner":{"account_id":18944908,"reputation":190,"user_id":13824045,"display_name":"fahadhub"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681278393,"creation_date":1681278393,"question_id":75992260,"body_markdown":"I have multiple protobuf generated java classes for different protobuf schemas. In my actual project I import all those classes and based on the json, **I need to select one of those class objects whose builder method I will use**.\r\nMy approach is to create a map &lt;string, Message.message&gt; and based on the key, I select the corresponding builder class.\r\n\r\nIssue is, newBuilderForType() is non static and everything else is static. Is there any way to get a static builder from the proto created java file? \r\n\r\nCode:\r\n\r\n    import java.util.Map;\r\n    import java.util.HashMap;\r\n    import java.util.Collections;\r\n    import com.google.protobuf.Message;\r\n    import com.netapp.asup.proto.ProtoOne.protoOne;\r\n    import com.netapp.asup.proto.ProtoTwo.protoTwo;\r\n    import com.netapp.asup.proto.ProtoThree.protoThree;\r\n    import com.netapp.asup.proto.ProtoFour.protoFour;\r\n    \r\n    public class SchemaEntityMap {\r\n        private static Map&lt;String, Message.Builder&gt; SchemaMap = new HashMap&lt;String, Message.Builder&gt;();\r\n    \r\n        static {\r\n            Map&lt;String, Message.Builder&gt; map = new HashMap&lt;String, Message.Builder&gt;();\r\n            map.put(&quot;proto one&quot;, protoOne.newBuilderForType());\r\n    \t\tmap.put(&quot;proto one&quot;, protoTwo.newBuilderForType());\r\n    \t\tmap.put(&quot;proto one&quot;, protoThree.newBuilderForType());\r\n    \t\tmap.put(&quot;proto one&quot;, protoFour.newBuilderForType());\r\n            SchemaMap = Collections.unmodifiableMap(map);\r\n        }\r\n    \r\n        public static Message.Builder getEntityBuilder(String entityName) {\r\n            return SchemaMap.get(entityName);\r\n        }\r\n        \r\n    }\r\n\r\n","title":"How to get a static builder method from protobuf built java class?","body":"<p>I have multiple protobuf generated java classes for different protobuf schemas. In my actual project I import all those classes and based on the json, <strong>I need to select one of those class objects whose builder method I will use</strong>.\nMy approach is to create a map &lt;string, Message.message&gt; and based on the key, I select the corresponding builder class.</p>\n<p>Issue is, newBuilderForType() is non static and everything else is static. Is there any way to get a static builder from the proto created java file?</p>\n<p>Code:</p>\n<pre><code>import java.util.Map;\nimport java.util.HashMap;\nimport java.util.Collections;\nimport com.google.protobuf.Message;\nimport com.netapp.asup.proto.ProtoOne.protoOne;\nimport com.netapp.asup.proto.ProtoTwo.protoTwo;\nimport com.netapp.asup.proto.ProtoThree.protoThree;\nimport com.netapp.asup.proto.ProtoFour.protoFour;\n\npublic class SchemaEntityMap {\n    private static Map&lt;String, Message.Builder&gt; SchemaMap = new HashMap&lt;String, Message.Builder&gt;();\n\n    static {\n        Map&lt;String, Message.Builder&gt; map = new HashMap&lt;String, Message.Builder&gt;();\n        map.put(&quot;proto one&quot;, protoOne.newBuilderForType());\n        map.put(&quot;proto one&quot;, protoTwo.newBuilderForType());\n        map.put(&quot;proto one&quot;, protoThree.newBuilderForType());\n        map.put(&quot;proto one&quot;, protoFour.newBuilderForType());\n        SchemaMap = Collections.unmodifiableMap(map);\n    }\n\n    public static Message.Builder getEntityBuilder(String entityName) {\n        return SchemaMap.get(entityName);\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","swing","menu","label","jmenuitem"],"comments":[{"owner":{"account_id":1367329,"reputation":2140,"user_id":1303506,"accept_rate":84,"display_name":"Sanyam Goel"},"score":0,"creation_date":1375940457,"post_id":18118536,"comment_id":26528699,"body_markdown":"What key does &quot;Ctrl++&quot; represent. Like we know &quot;Ctrl +&quot; &quot;+&quot; asks user to press ctrl and + but what does &quot;Ctrl++&quot; mean ?? What is the intention behind doing so","body":"What key does &quot;Ctrl++&quot; represent. Like we know &quot;Ctrl +&quot; &quot;+&quot; asks user to press ctrl and + but what does &quot;Ctrl++&quot; mean ?? What is the intention behind doing so"},{"owner":{"account_id":183279,"reputation":168313,"user_id":418556,"accept_rate":98,"display_name":"Andrew Thompson"},"score":0,"creation_date":1375940602,"post_id":18118536,"comment_id":26528747,"body_markdown":"`KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS,..`  Umm..  and you expected to see a `+` sign?  Why?","body":"<code>KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS,..</code>  Umm..  and you expected to see a <code>+</code> sign?  Why?"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1375940708,"post_id":18118536,"comment_id":26528787,"body_markdown":"+1 for nice idea, AFAIK this is done in the few custom Look and Feels, I saw this label placed on left, right, and bottom,","body":"+1 for nice idea, AFAIK this is done in the few custom Look and Feels, I saw this label placed on left, right, and bottom,"},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":0,"creation_date":1375940980,"post_id":18118536,"comment_id":26528875,"body_markdown":"Popup window is container, you can to relayout standard popup and add JButtons layed by GridLayout(CENTER), and put the same GridLayout with JLabel to the EAST, WEST..., this JLabel can contians anything, note, (funny issue, maybe bug, maybe feature with using popup for another reasons) popup must be pack() before visible, everytime","body":"Popup window is container, you can to relayout standard popup and add JButtons layed by GridLayout(CENTER), and put the same GridLayout with JLabel to the EAST, WEST..., this JLabel can contians anything, note, (funny issue, maybe bug, maybe feature with using popup for another reasons) popup must be pack() before visible, everytime"},{"owner":{"account_id":1876057,"reputation":1944,"user_id":1697249,"accept_rate":84,"display_name":"joshreesjones"},"score":0,"creation_date":1375941860,"post_id":18118536,"comment_id":26529173,"body_markdown":"&quot;Ctrl+ +&quot; means pressing Control and the Plus key.","body":"&quot;Ctrl+ +&quot; means pressing Control and the Plus key."},{"owner":{"account_id":1876057,"reputation":1944,"user_id":1697249,"accept_rate":84,"display_name":"joshreesjones"},"score":0,"creation_date":1375941919,"post_id":18118536,"comment_id":26529196,"body_markdown":"@AndrewThompson, I expected to see &quot;Ctrl-Equals&quot;, but I want it to display as &quot;Ctrl +&quot;. Sorry for the ambiguity.","body":"@AndrewThompson, I expected to see &quot;Ctrl-Equals&quot;, but I want it to display as &quot;Ctrl +&quot;. Sorry for the ambiguity."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1375951404,"post_id":18118536,"comment_id":26533618,"body_markdown":"why do you want to confuse your users? They are accustomed to see the _+_ between keys they are supposed to press simultaneously .. (at least in win)","body":"why do you want to confuse your users? They are accustomed to see the <i>+</i> between keys they are supposed to press simultaneously .. (at least in win)"}],"answers":[{"tags":[],"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1375941776,"creation_date":1375941776,"answer_id":18118939,"question_id":18118536,"body_markdown":"not an answer, you need to search for \r\n\r\n- paint() to heavy, paintComponent() for lightweight JPopup, JMenu (for custom painting can be switch to isHeavyWeight...)\r\n\r\n- overlay JLabel into container (few question about JTable by @Guillaume Polet and @Robin)\r\n\r\n- create own JMenu/JPopup (see my comment to your question)\r\n\r\n\r\n![enter image description here][1]\r\n\r\n![enter image description here][2]\r\n\r\n    import java.awt.Color;\r\n    import java.awt.Component;\r\n    import java.awt.Dimension;\r\n    import java.awt.FlowLayout;\r\n    import java.awt.Graphics;\r\n    import java.awt.Insets;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.event.WindowAdapter;\r\n    import java.awt.event.WindowEvent;\r\n    import javax.swing.Icon;\r\n    import javax.swing.JButton;\r\n    import javax.swing.JComboBox;\r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JMenu;\r\n    import javax.swing.JMenuBar;\r\n    import javax.swing.JMenuItem;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.SwingConstants;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.border.EtchedBorder;\r\n    import javax.swing.border.TitledBorder;\r\n    import javax.swing.plaf.basic.BasicArrowButton;\r\n    \r\n    public class ComboBoxMenuExample extends JFrame {\r\n    \r\n        public ComboBoxMenuExample() {\r\n            super(&quot;ComboBoxMenu Example&quot;);\r\n            String[] itemStr = {&quot;name&quot;, &quot;Red&quot;, &quot;Blue&quot;, &quot;number&quot;, &quot;255,0,0&quot;, &quot;0,0,255&quot;,\r\n                /*separator*/ &quot;system&quot;, &quot;control&quot;, &quot;controlHighlight&quot;, &quot;controlShadow&quot;, &quot;text&quot;};\r\n            JMenuItem[] menuItems = new JMenuItem[7];\r\n            menuItems[0] = new JMenuItem(itemStr[1]);\r\n            menuItems[1] = new JMenuItem(itemStr[2]);\r\n            menuItems[2] = new JMenuItem(itemStr[4]);\r\n            menuItems[3] = new JMenuItem(itemStr[5]);\r\n            menuItems[4] = new JMenuItem(itemStr[8]);\r\n            menuItems[5] = new JMenuItem(itemStr[9]);\r\n            menuItems[6] = new JMenuItem(itemStr[10]);\r\n            JMenu[] menus = new JMenu[4];\r\n            menus[0] = new JMenu(itemStr[0]);\r\n            menus[1] = new JMenu(itemStr[3]);\r\n            menus[2] = new JMenu(itemStr[6]);\r\n            menus[3] = new JMenu(itemStr[7]);\r\n            menus[0].add(menuItems[0]);\r\n            menus[0].add(menuItems[1]);\r\n            menus[1].add(menuItems[2]);\r\n            menus[1].add(menuItems[3]);\r\n            menus[3].add(menuItems[4]);\r\n            menus[3].add(menuItems[5]);\r\n            menus[2].add(menus[3]);\r\n            menus[2].add(menuItems[6]);\r\n            JMenu menu = ComboMenuBar.createMenu(menuItems[0].getText());\r\n            menu.add(menus[0]);\r\n            menu.add(menus[1]);\r\n            menu.addSeparator();\r\n            menu.add(menus[2]);\r\n            ComboMenuBar comboMenu = new ComboMenuBar(menu);\r\n            JComboBox combo = new JComboBox();\r\n            combo.addItem(itemStr[1]);\r\n            combo.addItem(itemStr[2]);\r\n            combo.addItem(itemStr[4]);\r\n            combo.addItem(itemStr[5]);\r\n            combo.addItem(itemStr[8]);\r\n            combo.addItem(itemStr[9]);\r\n            combo.addItem(itemStr[10]);\r\n            getContentPane().setLayout(new FlowLayout());\r\n            getContentPane().add(new ComboPanel(&quot;Fake ComboBox&quot;, comboMenu));\r\n            getContentPane().add(new ComboPanel(&quot;ComboBox&quot;, combo));\r\n        }\r\n    \r\n        class ComboPanel extends JPanel {\r\n    \r\n            ComboPanel(String title, JComponent c) {\r\n                setLayout(new FlowLayout());\r\n                setBorder(new TitledBorder(title));\r\n                add(c);\r\n            }\r\n        }\r\n    \r\n        public static void main(String args[]) {\r\n            try {\r\n                UIManager.setLookAndFeel(&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;);\r\n            } catch (Exception evt) {\r\n            }\r\n            ComboBoxMenuExample frame = new ComboBoxMenuExample();\r\n            frame.addWindowListener(new WindowAdapter() {\r\n                @Override\r\n                public void windowClosing(WindowEvent e) {\r\n                    System.exit(0);\r\n                }\r\n            });\r\n            frame.setSize(370, 100);\r\n            frame.setVisible(true);\r\n        }\r\n    }\r\n    \r\n    class ComboMenuBar extends JMenuBar {\r\n    \r\n        JMenu menu;\r\n        Dimension preferredSize;\r\n    \r\n        public ComboMenuBar(JMenu menu) {\r\n            this.menu = menu;\r\n            Color color = UIManager.getColor(&quot;Menu.selectionBackground&quot;);\r\n            UIManager.put(&quot;Menu.selectionBackground&quot;, UIManager.getColor(&quot;Menu.background&quot;));\r\n            UIManager.put(&quot;Menu.selectionBackground&quot;, color);\r\n            menu.updateUI();\r\n            MenuItemListener listener = new MenuItemListener();\r\n            setListener(menu, listener);\r\n            add(menu);\r\n        }\r\n    \r\n        class MenuItemListener implements ActionListener {\r\n    \r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                JMenuItem item = (JMenuItem) e.getSource();\r\n                menu.setText(item.getText());\r\n                menu.requestFocus();\r\n            }\r\n        }\r\n    \r\n        private void setListener(JMenuItem item, ActionListener listener) {\r\n            if (item instanceof JMenu) {\r\n                JMenu menu1 = (JMenu) item;\r\n                int n = menu1.getItemCount();\r\n                for (int i = 0; i &lt; n; i++) {\r\n                    setListener(menu1.getItem(i), listener);\r\n                }\r\n            } else if (item != null) { // null means separator\r\n                item.addActionListener(listener);\r\n            }\r\n        }\r\n    \r\n        public String getSelectedItem() {\r\n            return menu.getText();\r\n        }\r\n    \r\n        @Override\r\n        public void setPreferredSize(Dimension size) {\r\n            preferredSize = size;\r\n        }\r\n    \r\n        @Override\r\n        public Dimension getPreferredSize() {\r\n            if (preferredSize == null) {\r\n                Dimension sd = super.getPreferredSize();\r\n                Dimension menuD = getItemSize(menu);\r\n                Insets margin = menu.getMargin();\r\n                Dimension retD = new Dimension(menuD.width, margin.top\r\n                        + margin.bottom + menuD.height);\r\n                menu.setPreferredSize(retD);\r\n                preferredSize = retD;\r\n            }\r\n            return preferredSize;\r\n        }\r\n    \r\n        private Dimension getItemSize(JMenu menu) {\r\n            Dimension d = new Dimension(0, 0);\r\n            int n = menu.getItemCount();\r\n            for (int i = 0; i &lt; n; i++) {\r\n                Dimension itemD;\r\n                JMenuItem item = menu.getItem(i);\r\n                if (item instanceof JMenu) {\r\n                    itemD = getItemSize((JMenu) item);\r\n                } else if (item != null) {\r\n                    itemD = item.getPreferredSize();\r\n                } else {\r\n                    itemD = new Dimension(0, 0); // separator\r\n                }\r\n                d.width = Math.max(d.width, itemD.width);\r\n                d.height = Math.max(d.height, itemD.height);\r\n            }\r\n            return d;\r\n        }\r\n    \r\n        public static class ComboMenu extends JMenu {\r\n    \r\n            ArrowIcon iconRenderer;\r\n    \r\n            public ComboMenu(String label) {\r\n                super(label);\r\n                iconRenderer = new ArrowIcon(SwingConstants.SOUTH, true);\r\n                setBorder(new EtchedBorder());\r\n                setIcon(new BlankIcon(null, 11));\r\n                setHorizontalTextPosition(JButton.LEFT);\r\n                setFocusPainted(true);\r\n            }\r\n    \r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                super.paintComponent(g);\r\n                Dimension d = this.getPreferredSize();\r\n                int x = Math.max(0, d.width - iconRenderer.getIconWidth() - 3);\r\n                int y = Math.max(0,\r\n                        (d.height - iconRenderer.getIconHeight()) / 2 - 2);\r\n                iconRenderer.paintIcon(this, g, x, y);\r\n            }\r\n        }\r\n    \r\n        public static JMenu createMenu(String label) {\r\n            return new ComboMenu(label);\r\n        }\r\n    }\r\n    \r\n    class ArrowIcon implements Icon, SwingConstants {\r\n    \r\n        private static final int DEFAULT_SIZE = 11;\r\n        //private static final int DEFAULT_SIZE = 5;\r\n        private int size;\r\n        private int iconSize;\r\n        private int direction;\r\n        private boolean isEnabled;\r\n        private BasicArrowButton iconRenderer;\r\n    \r\n        public ArrowIcon(int direction, boolean isPressedView) {\r\n            this(DEFAULT_SIZE, direction, isPressedView);\r\n        }\r\n    \r\n        public ArrowIcon(int iconSize, int direction, boolean isEnabled) {\r\n            this.size = iconSize / 2;\r\n            this.iconSize = iconSize;\r\n            this.direction = direction;\r\n            this.isEnabled = isEnabled;\r\n            iconRenderer = new BasicArrowButton(direction);\r\n        }\r\n    \r\n        @Override\r\n        public void paintIcon(Component c, Graphics g, int x, int y) {\r\n            iconRenderer.paintTriangle(g, x, y, size, direction, isEnabled);\r\n        }\r\n    \r\n        @Override\r\n        public int getIconWidth() {\r\n            //int retCode;\r\n            switch (direction) {\r\n                case NORTH:\r\n                case SOUTH:\r\n                    return iconSize;\r\n                case EAST:\r\n                case WEST:\r\n                    return size;\r\n            }\r\n            return iconSize;\r\n        }\r\n    \r\n        @Override\r\n        public int getIconHeight() {\r\n            switch (direction) {\r\n                case NORTH:\r\n                case SOUTH:\r\n                    return size;\r\n                case EAST:\r\n                case WEST:\r\n                    return iconSize;\r\n            }\r\n            return size;\r\n        }\r\n    }\r\n    \r\n    class BlankIcon implements Icon {\r\n    \r\n        private Color fillColor;\r\n        private int size;\r\n    \r\n        public BlankIcon() {\r\n            this(null, 11);\r\n        }\r\n    \r\n        public BlankIcon(Color color, int size) {\r\n            //UIManager.getColor(&quot;control&quot;)\r\n            //UIManager.getColor(&quot;controlShadow&quot;)\r\n            fillColor = color;\r\n            this.size = size;\r\n        }\r\n    \r\n        @Override\r\n        public void paintIcon(Component c, Graphics g, int x, int y) {\r\n            if (fillColor != null) {\r\n                g.setColor(fillColor);\r\n                g.drawRect(x, y, size - 1, size - 1);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public int getIconWidth() {\r\n            return size;\r\n        }\r\n    \r\n        @Override\r\n        public int getIconHeight() {\r\n            return size;\r\n        }\r\n    }\r\n\r\n  [1]: http://i.stack.imgur.com/vte2i.jpg\r\n  [2]: http://i.stack.imgur.com/UVxDy.jpg\r\n","title":"How can I add to or change a label on a JMenuItem?","body":"<p>not an answer, you need to search for </p>\n\n<ul>\n<li><p>paint() to heavy, paintComponent() for lightweight JPopup, JMenu (for custom painting can be switch to isHeavyWeight...)</p></li>\n<li><p>overlay JLabel into container (few question about JTable by @Guillaume Polet and @Robin)</p></li>\n<li><p>create own JMenu/JPopup (see my comment to your question)</p></li>\n</ul>\n\n<p><img src=\"https://i.stack.imgur.com/vte2i.jpg\" alt=\"enter image description here\"></p>\n\n<p><img src=\"https://i.stack.imgur.com/UVxDy.jpg\" alt=\"enter image description here\"></p>\n\n<pre><code>import java.awt.Color;\nimport java.awt.Component;\nimport java.awt.Dimension;\nimport java.awt.FlowLayout;\nimport java.awt.Graphics;\nimport java.awt.Insets;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\nimport javax.swing.Icon;\nimport javax.swing.JButton;\nimport javax.swing.JComboBox;\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JMenu;\nimport javax.swing.JMenuBar;\nimport javax.swing.JMenuItem;\nimport javax.swing.JPanel;\nimport javax.swing.SwingConstants;\nimport javax.swing.UIManager;\nimport javax.swing.border.EtchedBorder;\nimport javax.swing.border.TitledBorder;\nimport javax.swing.plaf.basic.BasicArrowButton;\n\npublic class ComboBoxMenuExample extends JFrame {\n\n    public ComboBoxMenuExample() {\n        super(\"ComboBoxMenu Example\");\n        String[] itemStr = {\"name\", \"Red\", \"Blue\", \"number\", \"255,0,0\", \"0,0,255\",\n            /*separator*/ \"system\", \"control\", \"controlHighlight\", \"controlShadow\", \"text\"};\n        JMenuItem[] menuItems = new JMenuItem[7];\n        menuItems[0] = new JMenuItem(itemStr[1]);\n        menuItems[1] = new JMenuItem(itemStr[2]);\n        menuItems[2] = new JMenuItem(itemStr[4]);\n        menuItems[3] = new JMenuItem(itemStr[5]);\n        menuItems[4] = new JMenuItem(itemStr[8]);\n        menuItems[5] = new JMenuItem(itemStr[9]);\n        menuItems[6] = new JMenuItem(itemStr[10]);\n        JMenu[] menus = new JMenu[4];\n        menus[0] = new JMenu(itemStr[0]);\n        menus[1] = new JMenu(itemStr[3]);\n        menus[2] = new JMenu(itemStr[6]);\n        menus[3] = new JMenu(itemStr[7]);\n        menus[0].add(menuItems[0]);\n        menus[0].add(menuItems[1]);\n        menus[1].add(menuItems[2]);\n        menus[1].add(menuItems[3]);\n        menus[3].add(menuItems[4]);\n        menus[3].add(menuItems[5]);\n        menus[2].add(menus[3]);\n        menus[2].add(menuItems[6]);\n        JMenu menu = ComboMenuBar.createMenu(menuItems[0].getText());\n        menu.add(menus[0]);\n        menu.add(menus[1]);\n        menu.addSeparator();\n        menu.add(menus[2]);\n        ComboMenuBar comboMenu = new ComboMenuBar(menu);\n        JComboBox combo = new JComboBox();\n        combo.addItem(itemStr[1]);\n        combo.addItem(itemStr[2]);\n        combo.addItem(itemStr[4]);\n        combo.addItem(itemStr[5]);\n        combo.addItem(itemStr[8]);\n        combo.addItem(itemStr[9]);\n        combo.addItem(itemStr[10]);\n        getContentPane().setLayout(new FlowLayout());\n        getContentPane().add(new ComboPanel(\"Fake ComboBox\", comboMenu));\n        getContentPane().add(new ComboPanel(\"ComboBox\", combo));\n    }\n\n    class ComboPanel extends JPanel {\n\n        ComboPanel(String title, JComponent c) {\n            setLayout(new FlowLayout());\n            setBorder(new TitledBorder(title));\n            add(c);\n        }\n    }\n\n    public static void main(String args[]) {\n        try {\n            UIManager.setLookAndFeel(\"com.sun.java.swing.plaf.windows.WindowsLookAndFeel\");\n        } catch (Exception evt) {\n        }\n        ComboBoxMenuExample frame = new ComboBoxMenuExample();\n        frame.addWindowListener(new WindowAdapter() {\n            @Override\n            public void windowClosing(WindowEvent e) {\n                System.exit(0);\n            }\n        });\n        frame.setSize(370, 100);\n        frame.setVisible(true);\n    }\n}\n\nclass ComboMenuBar extends JMenuBar {\n\n    JMenu menu;\n    Dimension preferredSize;\n\n    public ComboMenuBar(JMenu menu) {\n        this.menu = menu;\n        Color color = UIManager.getColor(\"Menu.selectionBackground\");\n        UIManager.put(\"Menu.selectionBackground\", UIManager.getColor(\"Menu.background\"));\n        UIManager.put(\"Menu.selectionBackground\", color);\n        menu.updateUI();\n        MenuItemListener listener = new MenuItemListener();\n        setListener(menu, listener);\n        add(menu);\n    }\n\n    class MenuItemListener implements ActionListener {\n\n        @Override\n        public void actionPerformed(ActionEvent e) {\n            JMenuItem item = (JMenuItem) e.getSource();\n            menu.setText(item.getText());\n            menu.requestFocus();\n        }\n    }\n\n    private void setListener(JMenuItem item, ActionListener listener) {\n        if (item instanceof JMenu) {\n            JMenu menu1 = (JMenu) item;\n            int n = menu1.getItemCount();\n            for (int i = 0; i &lt; n; i++) {\n                setListener(menu1.getItem(i), listener);\n            }\n        } else if (item != null) { // null means separator\n            item.addActionListener(listener);\n        }\n    }\n\n    public String getSelectedItem() {\n        return menu.getText();\n    }\n\n    @Override\n    public void setPreferredSize(Dimension size) {\n        preferredSize = size;\n    }\n\n    @Override\n    public Dimension getPreferredSize() {\n        if (preferredSize == null) {\n            Dimension sd = super.getPreferredSize();\n            Dimension menuD = getItemSize(menu);\n            Insets margin = menu.getMargin();\n            Dimension retD = new Dimension(menuD.width, margin.top\n                    + margin.bottom + menuD.height);\n            menu.setPreferredSize(retD);\n            preferredSize = retD;\n        }\n        return preferredSize;\n    }\n\n    private Dimension getItemSize(JMenu menu) {\n        Dimension d = new Dimension(0, 0);\n        int n = menu.getItemCount();\n        for (int i = 0; i &lt; n; i++) {\n            Dimension itemD;\n            JMenuItem item = menu.getItem(i);\n            if (item instanceof JMenu) {\n                itemD = getItemSize((JMenu) item);\n            } else if (item != null) {\n                itemD = item.getPreferredSize();\n            } else {\n                itemD = new Dimension(0, 0); // separator\n            }\n            d.width = Math.max(d.width, itemD.width);\n            d.height = Math.max(d.height, itemD.height);\n        }\n        return d;\n    }\n\n    public static class ComboMenu extends JMenu {\n\n        ArrowIcon iconRenderer;\n\n        public ComboMenu(String label) {\n            super(label);\n            iconRenderer = new ArrowIcon(SwingConstants.SOUTH, true);\n            setBorder(new EtchedBorder());\n            setIcon(new BlankIcon(null, 11));\n            setHorizontalTextPosition(JButton.LEFT);\n            setFocusPainted(true);\n        }\n\n        @Override\n        public void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            Dimension d = this.getPreferredSize();\n            int x = Math.max(0, d.width - iconRenderer.getIconWidth() - 3);\n            int y = Math.max(0,\n                    (d.height - iconRenderer.getIconHeight()) / 2 - 2);\n            iconRenderer.paintIcon(this, g, x, y);\n        }\n    }\n\n    public static JMenu createMenu(String label) {\n        return new ComboMenu(label);\n    }\n}\n\nclass ArrowIcon implements Icon, SwingConstants {\n\n    private static final int DEFAULT_SIZE = 11;\n    //private static final int DEFAULT_SIZE = 5;\n    private int size;\n    private int iconSize;\n    private int direction;\n    private boolean isEnabled;\n    private BasicArrowButton iconRenderer;\n\n    public ArrowIcon(int direction, boolean isPressedView) {\n        this(DEFAULT_SIZE, direction, isPressedView);\n    }\n\n    public ArrowIcon(int iconSize, int direction, boolean isEnabled) {\n        this.size = iconSize / 2;\n        this.iconSize = iconSize;\n        this.direction = direction;\n        this.isEnabled = isEnabled;\n        iconRenderer = new BasicArrowButton(direction);\n    }\n\n    @Override\n    public void paintIcon(Component c, Graphics g, int x, int y) {\n        iconRenderer.paintTriangle(g, x, y, size, direction, isEnabled);\n    }\n\n    @Override\n    public int getIconWidth() {\n        //int retCode;\n        switch (direction) {\n            case NORTH:\n            case SOUTH:\n                return iconSize;\n            case EAST:\n            case WEST:\n                return size;\n        }\n        return iconSize;\n    }\n\n    @Override\n    public int getIconHeight() {\n        switch (direction) {\n            case NORTH:\n            case SOUTH:\n                return size;\n            case EAST:\n            case WEST:\n                return iconSize;\n        }\n        return size;\n    }\n}\n\nclass BlankIcon implements Icon {\n\n    private Color fillColor;\n    private int size;\n\n    public BlankIcon() {\n        this(null, 11);\n    }\n\n    public BlankIcon(Color color, int size) {\n        //UIManager.getColor(\"control\")\n        //UIManager.getColor(\"controlShadow\")\n        fillColor = color;\n        this.size = size;\n    }\n\n    @Override\n    public void paintIcon(Component c, Graphics g, int x, int y) {\n        if (fillColor != null) {\n            g.setColor(fillColor);\n            g.drawRect(x, y, size - 1, size - 1);\n        }\n    }\n\n    @Override\n    public int getIconWidth() {\n        return size;\n    }\n\n    @Override\n    public int getIconHeight() {\n        return size;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8656958,"reputation":27,"user_id":6480895,"display_name":"hemant "},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681278087,"creation_date":1681278087,"answer_id":75992232,"question_id":18118536,"body_markdown":"insted of \r\n        `menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_MINUS, ActionEvent.CTRL_MASK));`\r\n\r\nuse\r\n    `menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(new Character(&#39;-&#39;), ActionEvent.CTRL_MASK));`","title":"How can I add to or change a label on a JMenuItem?","body":"<p>insted of\n<code>menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_MINUS, ActionEvent.CTRL_MASK));</code></p>\n<p>use\n<code>menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(new Character('-'), ActionEvent.CTRL_MASK));</code></p>\n"}],"owner":{"account_id":1876057,"reputation":1944,"user_id":1697249,"accept_rate":84,"display_name":"joshreesjones"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2280,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":18118939,"answer_count":2,"score":5,"last_activity_date":1681278087,"creation_date":1375939803,"question_id":18118536,"body_markdown":"I need to add a label on the right hand side of a `JMenuItem`, like the labels shown below:\r\n\r\n![menu items with labels on the right side][1]\r\n\r\nI have an application that uses &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;+&lt;/kbd&gt; and &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;-&lt;/kbd&gt; to zoom into an image. However, the &lt;kbd&gt;+&lt;/kbd&gt; key by default (without &lt;kbd&gt;Shift&lt;/kbd&gt;) is the &lt;kbd&gt;=&lt;/kbd&gt; key. When I try adding accelerators for these menu items, the &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;-&lt;/kbd&gt; shortcut label displays as &quot;Ctrl+Minus&quot; (I would prefer &quot;Ctrl -&quot;) and the &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;+&lt;/kbd&gt; shortcut label displays as &quot;Ctrl+Equals&quot; (even worse - in the interest of user experience, I would prefer &quot;Ctrl +&quot;):\r\n\r\n    menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, ActionEvent.CTRL_MASK));\r\n\r\n![enter image description here][2]\r\n\r\nI want &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;+&lt;/kbd&gt; to display as &quot;Ctrl +&quot; and &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;-&lt;/kbd&gt; to display as &quot;Ctrl -&quot;. How can this be done?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/NC8lh.jpg\r\n  [2]: http://i.stack.imgur.com/ASVqp.jpg","title":"How can I add to or change a label on a JMenuItem?","body":"<p>I need to add a label on the right hand side of a <code>JMenuItem</code>, like the labels shown below:</p>\n\n<p><img src=\"https://i.stack.imgur.com/NC8lh.jpg\" alt=\"menu items with labels on the right side\"></p>\n\n<p>I have an application that uses <kbd>Ctrl</kbd>+<kbd>+</kbd> and <kbd>Ctrl</kbd>+<kbd>-</kbd> to zoom into an image. However, the <kbd>+</kbd> key by default (without <kbd>Shift</kbd>) is the <kbd>=</kbd> key. When I try adding accelerators for these menu items, the <kbd>Ctrl</kbd>+<kbd>-</kbd> shortcut label displays as \"Ctrl+Minus\" (I would prefer \"Ctrl -\") and the <kbd>Ctrl</kbd>+<kbd>+</kbd> shortcut label displays as \"Ctrl+Equals\" (even worse - in the interest of user experience, I would prefer \"Ctrl +\"):</p>\n\n<pre><code>menuBar_view_zoomIn.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_EQUALS, ActionEvent.CTRL_MASK));\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/ASVqp.jpg\" alt=\"enter image description here\"></p>\n\n<p>I want <kbd>Ctrl</kbd>+<kbd>+</kbd> to display as \"Ctrl +\" and <kbd>Ctrl</kbd>+<kbd>-</kbd> to display as \"Ctrl -\". How can this be done?</p>\n"},{"tags":["java","renovate"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1680197449,"post_id":75883753,"comment_id":133861485,"body_markdown":"Does this answer your question? [Exclude a specific version pattern in renovate](https://stackoverflow.com/questions/61211875/exclude-a-specific-version-pattern-in-renovate)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/61211875/exclude-a-specific-version-pattern-in-renovate\">Exclude a specific version pattern in renovate</a>"},{"owner":{"account_id":26026638,"reputation":23,"user_id":21523238,"display_name":"Atul Kaushik"},"score":0,"creation_date":1680521785,"post_id":75883753,"comment_id":133907143,"body_markdown":"mssql-jdbc has 3 minor versions upgrade for 11.x. \n11.2.3.jre18\t\n11.2.3.jre17\t\n11.2.3.jre11\nRenovatebot skips jre11 and jre17 and attempting PR for jre18 version.\nIf I add condition for jre11 in packagerule, renovatebot ignores it. If adding condition to exclude jre18 version, Renovatebot match condition and does not create PR for mssql-jdbc.\nHow can we create PR for specific version.","body":"mssql-jdbc has 3 minor versions upgrade for 11.x.  11.2.3.jre18\t 11.2.3.jre17\t 11.2.3.jre11 Renovatebot skips jre11 and jre17 and attempting PR for jre18 version. If I add condition for jre11 in packagerule, renovatebot ignores it. If adding condition to exclude jre18 version, Renovatebot match condition and does not create PR for mssql-jdbc. How can we create PR for specific version."}],"answers":[{"tags":[],"owner":{"account_id":26026638,"reputation":23,"user_id":21523238,"display_name":"Atul Kaushik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681276993,"creation_date":1681269336,"answer_id":75991618,"question_id":75883753,"body_markdown":"I tried below packagerule and it worked for me in config.js.. \r\n```\r\n{\r\n  &quot;matchPackageNames&quot;: [&quot;com.microsoft.sqlserver:mssql-jdbc&quot;],\r\n  &quot;allowedVersions&quot;: &quot;/\\.jre11$/&quot;\r\n}\r\n```","title":"How to add Renovate Bot packagerule for Maven minor update only for jre11 version","body":"<p>I tried below packagerule and it worked for me in config.js..</p>\n<pre><code>{\n  &quot;matchPackageNames&quot;: [&quot;com.microsoft.sqlserver:mssql-jdbc&quot;],\n  &quot;allowedVersions&quot;: &quot;/\\.jre11$/&quot;\n}\n</code></pre>\n"}],"owner":{"account_id":26026638,"reputation":23,"user_id":21523238,"display_name":"Atul Kaushik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681276993,"creation_date":1680145077,"question_id":75883753,"body_markdown":"I want to do minor update for Java Maven with Renovate Bot for\r\n `&lt;mssql.jdbc.version&gt;11.2.1.jre11\\&lt;/mssql.jdbc.version&gt;`.\r\nRenovate Bot updating to 11.x.x version, but changes the version from jre11 to jre18.\r\n\r\nInitial version:  `&lt;mssql.jdbc.version&gt;11.2.1.jre11&lt;/mssql.jdbc.version&gt;`\\\r\nUpgraded version: `&lt;mssql.jdbc.version&gt;11.2.3.jre18&lt;/mssql.jdbc.version&gt;`\r\n\r\nHow can we check for jre11 version and create rule for PR creation to version update which consist jre11 and not jre18 or other version?\r\n\r\nI tried below regex and conditions, but I&#39;m unable to filter out jre18 from version upgrade.\r\n\r\n```yaml\r\npackageRules: [{\r\n    &quot;managers&quot;: \\[&quot;maven&quot;\\],\r\n    &quot;depName&quot;: &quot;com.microsoft.sqlserver:mssql-jdbc&quot;,\r\n    &quot;matchPackagePatterns&quot;: \\[ &quot;^@mssql-jdbc&quot; \\],\r\n    &quot;matchCurrentVersion&quot;: &quot;/\\[\\\\.-\\]jre11\\\\d+$/&quot;,\r\n    &quot;newValue&quot;: &quot;/jre11$/&quot;\r\n}]\r\n```\r\n\r\n```yaml\r\n{  \r\n    &quot;matchCurrentVersion&quot;: &quot;/\\[\\\\.-\\]redhat-\\\\d+$/&quot;,\r\n    &quot;allowedVersions&quot;: &quot;/\\[\\\\.-\\]redhat-\\\\d+$/&quot;\r\n}\r\n```\r\n```yaml\r\n{\r\n    &quot;managers&quot;: \\[&quot;maven&quot;\\],\r\n    &quot;matchPackagePatterns&quot;: \\[ &quot;^@mssql-jdbc&quot; \\],\r\n    &quot;allowedVersions&quot;: &quot;/.jre11$/&quot;\r\n}\r\n```\r\n \r\n```yaml\r\n{\r\n    &quot;allowedVersions&quot;: &quot;/^(?jre11)(?:\\\\.|-|$)/&quot;  \r\n}\r\n```\r\n \r\n```yaml\r\n{\r\n    &quot;allowedVersions&quot;: &quot;/.\\*jre11/&quot;    \r\n}\r\n```\r\n\r\nI followed some below links: \r\n- [https://github.com/renovatebot/renovate/discussions/9346](https://github.com/renovatebot/renovate/discussions/9346)\r\n- [https://github.com/renovatebot/renovate/issues/5303](https://github.com/renovatebot/renovate/issues/5303)\r\n\r\n","title":"How to add Renovate Bot packagerule for Maven minor update only for jre11 version","body":"<p>I want to do minor update for Java Maven with Renovate Bot for\n<code>&lt;mssql.jdbc.version&gt;11.2.1.jre11\\&lt;/mssql.jdbc.version&gt;</code>.\nRenovate Bot updating to 11.x.x version, but changes the version from jre11 to jre18.</p>\n<p>Initial version:  <code>&lt;mssql.jdbc.version&gt;11.2.1.jre11&lt;/mssql.jdbc.version&gt;</code><br />\nUpgraded version: <code>&lt;mssql.jdbc.version&gt;11.2.3.jre18&lt;/mssql.jdbc.version&gt;</code></p>\n<p>How can we check for jre11 version and create rule for PR creation to version update which consist jre11 and not jre18 or other version?</p>\n<p>I tried below regex and conditions, but I'm unable to filter out jre18 from version upgrade.</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>packageRules: [{\n    &quot;managers&quot;: \\[&quot;maven&quot;\\],\n    &quot;depName&quot;: &quot;com.microsoft.sqlserver:mssql-jdbc&quot;,\n    &quot;matchPackagePatterns&quot;: \\[ &quot;^@mssql-jdbc&quot; \\],\n    &quot;matchCurrentVersion&quot;: &quot;/\\[\\\\.-\\]jre11\\\\d+$/&quot;,\n    &quot;newValue&quot;: &quot;/jre11$/&quot;\n}]\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>{  \n    &quot;matchCurrentVersion&quot;: &quot;/\\[\\\\.-\\]redhat-\\\\d+$/&quot;,\n    &quot;allowedVersions&quot;: &quot;/\\[\\\\.-\\]redhat-\\\\d+$/&quot;\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>{\n    &quot;managers&quot;: \\[&quot;maven&quot;\\],\n    &quot;matchPackagePatterns&quot;: \\[ &quot;^@mssql-jdbc&quot; \\],\n    &quot;allowedVersions&quot;: &quot;/.jre11$/&quot;\n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>{\n    &quot;allowedVersions&quot;: &quot;/^(?jre11)(?:\\\\.|-|$)/&quot;  \n}\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>{\n    &quot;allowedVersions&quot;: &quot;/.\\*jre11/&quot;    \n}\n</code></pre>\n<p>I followed some below links:</p>\n<ul>\n<li><a href=\"https://github.com/renovatebot/renovate/discussions/9346\" rel=\"nofollow noreferrer\">https://github.com/renovatebot/renovate/discussions/9346</a></li>\n<li><a href=\"https://github.com/renovatebot/renovate/issues/5303\" rel=\"nofollow noreferrer\">https://github.com/renovatebot/renovate/issues/5303</a></li>\n</ul>\n"},{"tags":["java","java-stream","groupingby"],"comments":[{"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"score":1,"creation_date":1679155099,"post_id":75775541,"comment_id":133672518,"body_markdown":"There are many ways to do it, but the root cause here is bad modeling.  Your Book class does not describe a book type, but a &quot;copies of book&quot; type.  If you modeled it correctly, with a separate Book class which just identified the book, and a BookSale type which combined Book+copies, the obvious answer would also be right.  Cramming two things into one type is what sent you off the rails.","body":"There are many ways to do it, but the root cause here is bad modeling.  Your Book class does not describe a book type, but a &quot;copies of book&quot; type.  If you modeled it correctly, with a separate Book class which just identified the book, and a BookSale type which combined Book+copies, the obvious answer would also be right.  Cramming two things into one type is what sent you off the rails."}],"answers":[{"tags":[],"owner":{"account_id":6412021,"reputation":1101,"user_id":4971476,"display_name":"Dave Ankin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1679144795,"creation_date":1679139474,"answer_id":75775615,"question_id":75775541,"body_markdown":"Maybe you could just use a second stream after your first? something like this where you just extract the books out of the intermediate Pair representation.\r\n\r\nEdit: finally, you would just increment everytime you have to combine one, starting with an initial value of 1.\r\n\r\nbuilding off your idea, i think something like this would achieve the goal:\r\n\r\n```java\r\nList&lt;Book&gt; posts = Arrays.asList(\r\n        Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\r\n        Book.builder().title(&quot;Book_2&quot;).author(&quot;PQR&quot;).build(),\r\n        Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\r\n        Book.builder().title(&quot;Book_3&quot;).author(&quot;XYZ&quot;).build()\r\n);\r\n\r\n\r\nList&lt;Book&gt; books = posts.stream()\r\n        .collect(Collectors.groupingBy(\r\n                socialMediaPost -&gt; {\r\n                    // initial value of 1\r\n                    socialMediaPost.setCount(1);\r\n                    return Pair.of(socialMediaPost.getTitle(),\r\n                            socialMediaPost.getAuthor());\r\n                },\r\n                // gets the first of each repeat, incrementing count\r\n                Collectors.reducing((a, b) -&gt; a.setCount(a.getCount() + 1))))\r\n        .values()\r\n        .stream()\r\n        .filter(Optional::isPresent)\r\n        .map(Optional::get)\r\n        .collect(Collectors.toList());\r\n\r\nbooks.stream().map(Book::toString).forEach(System.out::println);\r\n\r\n/*\r\nSO_75775541.Book(title=Book_3, author=XYZ, count=1)\r\nSO_75775541.Book(title=Book_1, author=ABC, count=2)\r\nSO_75775541.Book(title=Book_2, author=PQR, count=1)\r\n */\r\n```","title":"Java Streams grouping by on two fields","body":"<p>Maybe you could just use a second stream after your first? something like this where you just extract the books out of the intermediate Pair representation.</p>\n<p>Edit: finally, you would just increment everytime you have to combine one, starting with an initial value of 1.</p>\n<p>building off your idea, i think something like this would achieve the goal:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Book&gt; posts = Arrays.asList(\n        Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\n        Book.builder().title(&quot;Book_2&quot;).author(&quot;PQR&quot;).build(),\n        Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\n        Book.builder().title(&quot;Book_3&quot;).author(&quot;XYZ&quot;).build()\n);\n\n\nList&lt;Book&gt; books = posts.stream()\n        .collect(Collectors.groupingBy(\n                socialMediaPost -&gt; {\n                    // initial value of 1\n                    socialMediaPost.setCount(1);\n                    return Pair.of(socialMediaPost.getTitle(),\n                            socialMediaPost.getAuthor());\n                },\n                // gets the first of each repeat, incrementing count\n                Collectors.reducing((a, b) -&gt; a.setCount(a.getCount() + 1))))\n        .values()\n        .stream()\n        .filter(Optional::isPresent)\n        .map(Optional::get)\n        .collect(Collectors.toList());\n\nbooks.stream().map(Book::toString).forEach(System.out::println);\n\n/*\nSO_75775541.Book(title=Book_3, author=XYZ, count=1)\nSO_75775541.Book(title=Book_1, author=ABC, count=2)\nSO_75775541.Book(title=Book_2, author=PQR, count=1)\n */\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4395013,"reputation":1126,"user_id":3582362,"accept_rate":100,"display_name":"Calvin P."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679141752,"creation_date":1679140081,"answer_id":75775680,"question_id":75775541,"body_markdown":"Probably not the most elegant solution, but this should achieve the desired result.\r\n\r\nThe idea here is to identify the distinct elements and then reiterate through the stream to count how many times each appears in the original list and set that as the count for each distinct entry.\r\n\r\n    List&lt;Book&gt; filteredWithCounts = posts.stream().distinct().forEach(post -&gt; \r\n        post.setCount(posts.stream().filter(p -&gt; p.equals(post)).count()))\r\n        .collect(Collectors.toList());\r\n\r\nAnother option would be to map with Book object as the key and then remap to a list of Book like so:\r\n\r\n    List&lt;Book&gt; result = posts.stream().collect(\r\n        Collectors.groupingBy(Function.identity(), Collectors.counting()))\r\n        .entrySet().stream().map(e -&gt; {\r\n            Book b = e.getKey();\r\n            b.setCount(e.getValue());\r\n            return b;\r\n        }).collect(Collectors.toList());\r\n\r\nBoth methods assume that Book overrides the default equals method.","title":"Java Streams grouping by on two fields","body":"<p>Probably not the most elegant solution, but this should achieve the desired result.</p>\n<p>The idea here is to identify the distinct elements and then reiterate through the stream to count how many times each appears in the original list and set that as the count for each distinct entry.</p>\n<pre><code>List&lt;Book&gt; filteredWithCounts = posts.stream().distinct().forEach(post -&gt; \n    post.setCount(posts.stream().filter(p -&gt; p.equals(post)).count()))\n    .collect(Collectors.toList());\n</code></pre>\n<p>Another option would be to map with Book object as the key and then remap to a list of Book like so:</p>\n<pre><code>List&lt;Book&gt; result = posts.stream().collect(\n    Collectors.groupingBy(Function.identity(), Collectors.counting()))\n    .entrySet().stream().map(e -&gt; {\n        Book b = e.getKey();\n        b.setCount(e.getValue());\n        return b;\n    }).collect(Collectors.toList());\n</code></pre>\n<p>Both methods assume that Book overrides the default equals method.</p>\n"},{"tags":[],"owner":{"account_id":918256,"reputation":1641,"user_id":950558,"display_name":"Bastien Aracil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679154691,"creation_date":1679145234,"answer_id":75776120,"question_id":75775541,"body_markdown":"You can collect to a Map and use the merge option to increase the count. I assumed that count is initialized to 1 when a Book is instantiated (otherwise you will need to use something like `Math.max(1,book,getCount())` instead of `book.getCount()` in the code below):\r\n\r\n      final static Collector&lt;Book, ?, Collection&lt;Book&gt;&gt; COLLECTOR =\r\n          Collectors.collectingAndThen(\r\n              Collectors.toMap(\r\n                  book -&gt; Pair.of(book.getTitle(), book.getAuthor()),\r\n                  Function.identity(),\r\n                  (book1, book2) -&gt; {\r\n                    book1.setCount(book1.getCount() + book2.getCount());\r\n                    return book1;\r\n                  }\r\n              ), Map::values);\r\n    \r\n    \r\n      public static void main(String[] args) {\r\n        List&lt;Book&gt; posts = Arrays.asList(\r\n            new Book(&quot;Book_1&quot;, &quot;ABC&quot;),\r\n            new Book(&quot;Book_2&quot;, &quot;PQR&quot;),\r\n            new Book(&quot;Book_1&quot;, &quot;ABC&quot;),\r\n            new Book(&quot;Book_3&quot;, &quot;XYZ&quot;)\r\n        );\r\n    \r\n        final var counted = posts.stream().collect(COLLECTOR);\r\n        System.out.println(counted);\r\n    \r\n      }\r\n\r\nIt returns a Collection not a List but the modification is trivial and Collection might be what you need at the end.","title":"Java Streams grouping by on two fields","body":"<p>You can collect to a Map and use the merge option to increase the count. I assumed that count is initialized to 1 when a Book is instantiated (otherwise you will need to use something like <code>Math.max(1,book,getCount())</code> instead of <code>book.getCount()</code> in the code below):</p>\n<pre><code>  final static Collector&lt;Book, ?, Collection&lt;Book&gt;&gt; COLLECTOR =\n      Collectors.collectingAndThen(\n          Collectors.toMap(\n              book -&gt; Pair.of(book.getTitle(), book.getAuthor()),\n              Function.identity(),\n              (book1, book2) -&gt; {\n                book1.setCount(book1.getCount() + book2.getCount());\n                return book1;\n              }\n          ), Map::values);\n\n\n  public static void main(String[] args) {\n    List&lt;Book&gt; posts = Arrays.asList(\n        new Book(&quot;Book_1&quot;, &quot;ABC&quot;),\n        new Book(&quot;Book_2&quot;, &quot;PQR&quot;),\n        new Book(&quot;Book_1&quot;, &quot;ABC&quot;),\n        new Book(&quot;Book_3&quot;, &quot;XYZ&quot;)\n    );\n\n    final var counted = posts.stream().collect(COLLECTOR);\n    System.out.println(counted);\n\n  }\n</code></pre>\n<p>It returns a Collection not a List but the modification is trivial and Collection might be what you need at the end.</p>\n"},{"tags":[],"owner":{"account_id":4891475,"reputation":1,"user_id":3942500,"display_name":"Bhushan Nikhar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681276720,"creation_date":1681276720,"answer_id":75992127,"question_id":75775541,"body_markdown":"I agree with Brian Goetz explanation of bad modeling during design phase. But if you are stuck with this design, here is my approach to do this. \r\n\r\nYou will have to do 2 tasks before you get count field populated for each book\r\n1. Count same books in List&lt;Books&gt; bookList.\r\n2. Populate book count for each book.\r\n\r\nAlthough both tasks can be done in single stream, it complicates things too much and so hard to make changes. \r\nHere is how your code will look in 2 phase iteration for this problem.\r\n\r\n&lt;pre&gt; &lt;code&gt;\r\n    \r\n\r\n    Map&lt;String, Integer&gt; bookCountMap = new HashMap&lt;&gt;(); \r\n\t//First iteration to identify counts for each book\r\n\tbookList.forEach((book)-&gt;{\r\n\t\tString key = book.getTitle()+&quot;-&quot;+book.getAuthor();\r\n\t\tint count = (bookCountMap.get(key) != null)?bookCountMap.get(key):0;\r\n\t\tbookCountMap.put(key, count+1);\r\n\t});\r\n\t//Second iteration to set count for each book\r\n\tSystem.out.println(&quot;Updating book model with counts:&quot;);\r\n\tbookList.forEach((book)-&gt;{\r\n\t\tString key = book.getTitle()+&quot;-&quot;+book.getAuthor();\r\n\t\tint count = (bookCountMap.get(key) != null)?bookCountMap.get(key):0;\r\n\t\tbook.setCount(count);\r\n\t\tSystem.out.println(book);\r\n\t});\r\n\r\n&lt;/pre&gt; &lt;/code&gt;\r\n\r\n","title":"Java Streams grouping by on two fields","body":"<p>I agree with Brian Goetz explanation of bad modeling during design phase. But if you are stuck with this design, here is my approach to do this.</p>\n<p>You will have to do 2 tasks before you get count field populated for each book</p>\n<ol>\n<li>Count same books in List bookList.</li>\n<li>Populate book count for each book.</li>\n</ol>\n<p>Although both tasks can be done in single stream, it complicates things too much and so hard to make changes.\nHere is how your code will look in 2 phase iteration for this problem.</p>\n<pre> <code>\n    \n\n    Map bookCountMap = new HashMap(); \n    //First iteration to identify counts for each book\n    bookList.forEach((book)->{\n        String key = book.getTitle()+\"-\"+book.getAuthor();\n        int count = (bookCountMap.get(key) != null)?bookCountMap.get(key):0;\n        bookCountMap.put(key, count+1);\n    });\n    //Second iteration to set count for each book\n    System.out.println(\"Updating book model with counts:\");\n    bookList.forEach((book)->{\n        String key = book.getTitle()+\"-\"+book.getAuthor();\n        int count = (bookCountMap.get(key) != null)?bookCountMap.get(key):0;\n        book.setCount(count);\n        System.out.println(book);\n    });\n\n</pre> </code>\n"}],"owner":{"account_id":11354885,"reputation":35,"user_id":8324785,"display_name":"Akshay Sumbe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75775615,"answer_count":4,"score":0,"last_activity_date":1681276720,"creation_date":1679138628,"question_id":75775541,"body_markdown":"I&#39;m trying to group a data in a list and trying to add a count back to one of the fields of each object of list. Let me put some dummy example here as follows - \r\n```\r\npublic class Book{\r\n    String title;\r\n    String author;\r\n    int count;\r\n}\r\n```\r\nand there&#39;s a list as follows\r\n```\r\nList&lt;Book&gt; posts = Arrays.asList(\r\n                Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\r\n                Book.builder().title(&quot;Book_2&quot;).author(&quot;PQR&quot;).build(),\r\n                Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\r\n                Book.builder().title(&quot;Book_3&quot;).author(&quot;XYZ&quot;).build()\r\n        );\r\n```\r\nNow, my objective is to group data in a list by grouping title and author and update the count in count field of Book in list. i.e. in above list as title and author have same values, the count=2 for title=&quot;Book_1&quot; and author=&quot;ABC&quot;, and for other entries count = 1.\r\n\r\nI used Apache commons Pair.of() in grouping by as follows - \r\n```\r\nMap&lt;Pair&lt;String, String&gt;, Long&gt; map = posts.stream()\r\n                .collect(Collectors.groupingBy(socialMediaPost -&gt; Pair.of(socialMediaPost.getTitle(), socialMediaPost.getAuthor()), Collectors.counting()));\r\n```\r\nThis actually produces the result but the return type is not what I want. I want ```List&lt;Book&gt;``` back with single entry for duplicate data(title, author) with increased count and other non-duplicate data with count = 1\r\n\r\n","title":"Java Streams grouping by on two fields","body":"<p>I'm trying to group a data in a list and trying to add a count back to one of the fields of each object of list. Let me put some dummy example here as follows -</p>\n<pre><code>public class Book{\n    String title;\n    String author;\n    int count;\n}\n</code></pre>\n<p>and there's a list as follows</p>\n<pre><code>List&lt;Book&gt; posts = Arrays.asList(\n                Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\n                Book.builder().title(&quot;Book_2&quot;).author(&quot;PQR&quot;).build(),\n                Book.builder().title(&quot;Book_1&quot;).author(&quot;ABC&quot;).build(),\n                Book.builder().title(&quot;Book_3&quot;).author(&quot;XYZ&quot;).build()\n        );\n</code></pre>\n<p>Now, my objective is to group data in a list by grouping title and author and update the count in count field of Book in list. i.e. in above list as title and author have same values, the count=2 for title=&quot;Book_1&quot; and author=&quot;ABC&quot;, and for other entries count = 1.</p>\n<p>I used Apache commons Pair.of() in grouping by as follows -</p>\n<pre><code>Map&lt;Pair&lt;String, String&gt;, Long&gt; map = posts.stream()\n                .collect(Collectors.groupingBy(socialMediaPost -&gt; Pair.of(socialMediaPost.getTitle(), socialMediaPost.getAuthor()), Collectors.counting()));\n</code></pre>\n<p>This actually produces the result but the return type is not what I want. I want <code>List&lt;Book&gt;</code> back with single entry for duplicate data(title, author) with increased count and other non-duplicate data with count = 1</p>\n"},{"tags":["java","gradle","testing","groovy"],"owner":{"account_id":5232757,"reputation":103,"user_id":8051581,"display_name":"rooot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681275649,"creation_date":1681275649,"question_id":75992039,"body_markdown":"I have a Spring Boot project configured with Gradle. There are several JUnit5 tests, some of which are &#39;rest-docs&#39; tests and the others are &#39;non-rest-docs&#39; tests. Here I made this distinction to group those tests that output Spring REST docs snippets. Since Spring REST docs requires document snippets to be generated before the final REST document generation, I found it reasonable that the `asciidoctor` Gradle task depends on a task that runs all &#39;rest-docs&#39; tests.\r\n\r\nSo, I have three test-type tasks: `restDocsTest`, `nonRestDocsTest`, and `test`. I annotated all &#39;rest-docs&#39; tests with `@Tag(&quot;rest-docs&quot;)` so that it can be filtered by JUnit runner as:\r\n\r\n```groovy\r\ntasks.register(&#39;restDocsTest&#39;, Test) {\r\n    outputs.dir snippetsDir\r\n    useJUnitPlatform {\r\n        includeTags &quot;rest-docs&quot;\r\n    }\r\n}\r\n```\r\n\r\nI configured `nonRestDocsTest` in the same way except for using `excludeTags` instead of `includeTags`.\r\n\r\nFor `test` task, I just made it depend on the other two tasks:\r\n\r\n```groovy\r\ntasks.named(&#39;test&#39;) {\r\n    dependsOn restDocsTest, nonRestDocsTest\r\n}\r\n```\r\n\r\nEverything looked fine until I ran `test` task with a filter, something like `--tests com.example.foo.*`. This happens when I want to run different types of tests in a package together with one shot. When I pass `--tests` argument to the `test` task, it seems that it does not affect the execution of `restDocsTest` and `nonRestDocsTest` and just all tests are executed by those two tasks regardless of the filter.\r\n\r\nThen I tried to make `test` task run tests by itself like:\r\n\r\n```groovy\r\ntasks.named(&#39;test&#39;) {\r\n    outputs.dir snippetsDir\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nIt seemes that it solves the problem, but it didn&#39;t. When I run a task that depends on both `test` and `asciidoctor` tasks, both `test` and `restDocsTest` tasks are executed. And I found that JUnit platform is not smart enough to avoid duplicate test execution. That is, the same tasks are executed twice by `test` and `restDocsTest` tasks.\r\n\r\n**Here is my question**: is there a way that I can pass on `--tests` filter to other tests that `test` task depends on when `test` task is executed? If it&#39;s not possible, then can I make `test` task recognize already executed tests by other test tasks and avoid re-running them?","title":"How to configure multiple Gradle test tasks without duplicate execution?","body":"<p>I have a Spring Boot project configured with Gradle. There are several JUnit5 tests, some of which are 'rest-docs' tests and the others are 'non-rest-docs' tests. Here I made this distinction to group those tests that output Spring REST docs snippets. Since Spring REST docs requires document snippets to be generated before the final REST document generation, I found it reasonable that the <code>asciidoctor</code> Gradle task depends on a task that runs all 'rest-docs' tests.</p>\n<p>So, I have three test-type tasks: <code>restDocsTest</code>, <code>nonRestDocsTest</code>, and <code>test</code>. I annotated all 'rest-docs' tests with <code>@Tag(&quot;rest-docs&quot;)</code> so that it can be filtered by JUnit runner as:</p>\n<pre><code>tasks.register('restDocsTest', Test) {\n    outputs.dir snippetsDir\n    useJUnitPlatform {\n        includeTags &quot;rest-docs&quot;\n    }\n}\n</code></pre>\n<p>I configured <code>nonRestDocsTest</code> in the same way except for using <code>excludeTags</code> instead of <code>includeTags</code>.</p>\n<p>For <code>test</code> task, I just made it depend on the other two tasks:</p>\n<pre><code>tasks.named('test') {\n    dependsOn restDocsTest, nonRestDocsTest\n}\n</code></pre>\n<p>Everything looked fine until I ran <code>test</code> task with a filter, something like <code>--tests com.example.foo.*</code>. This happens when I want to run different types of tests in a package together with one shot. When I pass <code>--tests</code> argument to the <code>test</code> task, it seems that it does not affect the execution of <code>restDocsTest</code> and <code>nonRestDocsTest</code> and just all tests are executed by those two tasks regardless of the filter.</p>\n<p>Then I tried to make <code>test</code> task run tests by itself like:</p>\n<pre><code>tasks.named('test') {\n    outputs.dir snippetsDir\n    useJUnitPlatform()\n}\n</code></pre>\n<p>It seemes that it solves the problem, but it didn't. When I run a task that depends on both <code>test</code> and <code>asciidoctor</code> tasks, both <code>test</code> and <code>restDocsTest</code> tasks are executed. And I found that JUnit platform is not smart enough to avoid duplicate test execution. That is, the same tasks are executed twice by <code>test</code> and <code>restDocsTest</code> tasks.</p>\n<p><strong>Here is my question</strong>: is there a way that I can pass on <code>--tests</code> filter to other tests that <code>test</code> task depends on when <code>test</code> task is executed? If it's not possible, then can I make <code>test</code> task recognize already executed tests by other test tasks and avoid re-running them?</p>\n"},{"tags":["java","serialization","arraylist","rmi"],"comments":[{"owner":{"account_id":1794557,"reputation":904,"user_id":1634249,"display_name":"Afforess"},"score":4,"creation_date":1414278952,"post_id":26568205,"comment_id":41755415,"body_markdown":"You can copy a list very easily. The ArrayList constructor will accept an existing collection (including your sublist) as an argument, and perform a copy.","body":"You can copy a list very easily. The ArrayList constructor will accept an existing collection (including your sublist) as an argument, and perform a copy."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1414280819,"post_id":26568205,"comment_id":41755833,"body_markdown":"@Afforess stole my answer.  Just copy it to a list you know is serializable.","body":"@Afforess stole my answer.  Just copy it to a list you know is serializable."},{"owner":{"account_id":4799885,"reputation":1114,"user_id":3876796,"accept_rate":61,"display_name":"Othmane"},"score":0,"creation_date":1414281390,"post_id":26568205,"comment_id":41755949,"body_markdown":"Ok, thnaks this is what I&#39;ve done using an ArrayList!!","body":"Ok, thnaks this is what I&#39;ve done using an ArrayList!!"},{"owner":{"account_id":5152889,"reputation":3269,"user_id":4126968,"display_name":"eee"},"score":0,"creation_date":1414319474,"post_id":26568205,"comment_id":41762174,"body_markdown":"@Afforess Why don&#39;t you post your comment as an answer? Then the OP can accept your answer.","body":"@Afforess Why don&#39;t you post your comment as an answer? Then the OP can accept your answer."}],"answers":[{"tags":[],"owner":{"account_id":4799885,"reputation":1114,"user_id":3876796,"accept_rate":61,"display_name":"Othmane"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1414340240,"creation_date":1414340240,"answer_id":26575088,"question_id":26568205,"body_markdown":"The solution was simply this code:\r\n\r\n    ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n\tlist.addAll(originalList.subList(0, 10));","title":"resolve a java.util.ArrayList$SubList notSerializable Exception","body":"<p>The solution was simply this code:</p>\n\n<pre><code>ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\nlist.addAll(originalList.subList(0, 10));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1104491,"reputation":1018,"user_id":1096193,"accept_rate":0,"display_name":"aravindaM"},"down_vote_count":0,"up_vote_count":67,"is_accepted":true,"score":67,"last_activity_date":1681273957,"creation_date":1414341350,"answer_id":26575282,"question_id":26568205,"body_markdown":"It&#39;s because, List returned by subList() method is an instance of &#39;RandomAccessSubList&#39; which is not serializable. Therefore you need to create a new ArrayList object from the list returned by the subList().\r\n\r\n    List&lt;String&gt; list = new ArrayList&lt;String&gt;(originalList.subList(0, 10));","title":"resolve a java.util.ArrayList$SubList notSerializable Exception","body":"<p>It's because, List returned by subList() method is an instance of 'RandomAccessSubList' which is not serializable. Therefore you need to create a new ArrayList object from the list returned by the subList().</p>\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;(originalList.subList(0, 10));\n</code></pre>\n"}],"owner":{"account_id":4799885,"reputation":1114,"user_id":3876796,"accept_rate":61,"display_name":"Othmane"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16986,"favorite_count":0,"down_vote_count":0,"up_vote_count":31,"accepted_answer_id":26575282,"answer_count":2,"score":31,"last_activity_date":1681273957,"creation_date":1414278666,"question_id":26568205,"body_markdown":"I am using SubList function on an object of type List&lt;T&gt;. The problem is that I am using RMI and because the java.util.ArrayList$SubList is implemented by a non-serializable class I got the Exception described above when I try to pass the resulting object to a remote function taking as an argument a List&lt;T&gt; as well.\r\n I&#39;ve seen that I should copy the resulting List to a new LinkedList or ArrayList and pass that.\r\n\r\nDoes anyone know a function that helps as to easily do that for this for example ?\r\n\r\n    List&lt;String&gt; list = originalList.subList(0, 10);\r\n\r\n","title":"resolve a java.util.ArrayList$SubList notSerializable Exception","body":"<p>I am using SubList function on an object of type List. The problem is that I am using RMI and because the java.util.ArrayList$SubList is implemented by a non-serializable class I got the Exception described above when I try to pass the resulting object to a remote function taking as an argument a List as well.\n I've seen that I should copy the resulting List to a new LinkedList or ArrayList and pass that.</p>\n\n<p>Does anyone know a function that helps as to easily do that for this for example ?</p>\n\n<pre><code>List&lt;String&gt; list = originalList.subList(0, 10);\n</code></pre>\n"},{"tags":["java","sql","spring-boot","h2"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681196129,"post_id":75983043,"comment_id":134013042,"body_markdown":"JDBC uses ? for placeholders that is how JDBC works (so you are focussing on the wrong problem here). Please add the **full stacktrace** instead of a small snippet.","body":"JDBC uses ? for placeholders that is how JDBC works (so you are focussing on the wrong problem here). Please add the <b>full stacktrace</b> instead of a small snippet."},{"owner":{"account_id":28272014,"reputation":31,"user_id":21615046,"display_name":"DevCooper"},"score":0,"creation_date":1681196725,"post_id":75983043,"comment_id":134013161,"body_markdown":"Thanks @M.Deinum , I will post more information. I still have a question in the insert sentence, (null,?,?,...?) why the first parameter is null, I think it should be the id?","body":"Thanks @M.Deinum , I will post more information. I still have a question in the insert sentence, (null,?,?,...?) why the first parameter is null, I think it should be the id?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681196811,"post_id":75983043,"comment_id":134013182,"body_markdown":"The id is autogenerated in the DB server","body":"The id is autogenerated in the DB server"},{"owner":{"account_id":28272014,"reputation":31,"user_id":21615046,"display_name":"DevCooper"},"score":0,"creation_date":1681198051,"post_id":75983043,"comment_id":134013403,"body_markdown":"I see, Thank @tgdavies. So the problem should be somewhere else. I&#39;m still trying to get more information.","body":"I see, Thank @tgdavies. So the problem should be somewhere else. I&#39;m still trying to get more information."},{"owner":{"account_id":8362430,"reputation":856,"user_id":6280255,"display_name":"Just another Java programmer"},"score":0,"creation_date":1681203060,"post_id":75983043,"comment_id":134014449,"body_markdown":"If id is autogenerated, it should not be part of the insert statement.","body":"If id is autogenerated, it should not be part of the insert statement."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681205804,"post_id":75983043,"comment_id":134015089,"body_markdown":"I suspect the culprit is all the backtics you have in the columns name. Not sure why you have all of those as those aren&#39;t really needed here. At least in your UPDATE query you aren&#39;t using those quotes (which are added to the other queries as you can see), which probably results in a mismatch in column names.","body":"I suspect the culprit is all the backtics you have in the columns name. Not sure why you have all of those as those aren&#39;t really needed here. At least in your UPDATE query you aren&#39;t using those quotes (which are added to the other queries as you can see), which probably results in a mismatch in column names."},{"owner":{"account_id":28272014,"reputation":31,"user_id":21615046,"display_name":"DevCooper"},"score":0,"creation_date":1681206990,"post_id":75983043,"comment_id":134015411,"body_markdown":"Thank you very much @M.Deinum! It works, I delete those backtics, and the the sql operation works fine! I&#39;m not really into database, this sentence works fine for mysql but not for h2. Thanks again!","body":"Thank you very much @M.Deinum! It works, I delete those backtics, and the the sql operation works fine! I&#39;m not really into database, this sentence works fine for mysql but not for h2. Thanks again!"}],"answers":[{"tags":[],"owner":{"account_id":28272014,"reputation":31,"user_id":21615046,"display_name":"DevCooper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681207089,"creation_date":1681207089,"answer_id":75984607,"question_id":75983043,"body_markdown":"Thanks for @M.Deinum , The backtics caused the problem. `col` is really different from col. ","title":"Query annotation does not work with H2 database","body":"<p>Thanks for @M.Deinum , The backtics caused the problem. <code>col</code> is really different from col.</p>\n"}],"owner":{"account_id":28272014,"reputation":31,"user_id":21615046,"display_name":"DevCooper"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":479,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681273592,"creation_date":1681195183,"question_id":75983043,"body_markdown":"I am writing a java program using Spring framework. And for the unit test, I use H2 database since it&#39;s an in-memory database. But it didn&#39;t work properly. For the code below, using the JPA method works fine, but the Query annotation raise exceptions.\r\n\r\nDAO\r\n\r\n    public interface TargetDiskRepository extends JpaRepository&lt;TargetDiskEntity, Long&gt;,\r\n            JpaSpecificationExecutor&lt;TargetDiskEntity&gt; {\r\n    \r\n        List&lt;TargetDiskEntity&gt; findByNodeId(String nodeId);\r\n    \r\n        List&lt;TargetDiskEntity&gt; findByNodeIdAndDiskStateAndTrtype(String nodeId, DiskState diskState, String trtype);\r\n    \r\n        Optional&lt;TargetDiskEntity&gt; findByDiskId(String diskId);\r\n    \r\n        @Transactional\r\n        @Modifying\r\n        @Query(value = &quot;UPDATE m_target_disk SET disk_state = :tar_state WHERE &quot;  +\r\n            &quot;disk_state = :ori_state AND disk_id = :disk_id&quot;, nativeQuery = true)\r\n        int updateDiskStateByDiskId(@Param(&quot;disk_id&quot;) String diskId, @Param(&quot;ori_state&quot;) String originState, @Param(&quot;tar_state&quot;) String targetState);\r\n    \r\n        @Transactional\r\n        void deleteByNodeId(String nodeId);          \r\n    }\r\n\r\n\r\nEntity\r\n\r\n```\r\n@Setter\r\n@Getter\r\n@NoArgsConstructor\r\n@EqualsAndHashCode\r\n@Entity\r\n@Table(name = &quot;m_target_disk&quot;, indexes = {\r\n            @Index(name = &quot;idx_unique_node_disk&quot;, columnList = &quot;`node_id`, `serial_number`&quot;, unique = true)})\r\n@EntityListeners({AuditingEntityListener.class})\r\npublic class TargetDiskEntity implements Auditable&lt;String, Long, LocalDateTime&gt; {\r\n\r\n    @EqualsAndHashCode.Exclude\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`disk_id`&quot;)\r\n    private String diskId;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`node_id`&quot;)\r\n    private String nodeId;\r\n\r\n    @Column(name = &quot;`total_capacity_gib`&quot;)\r\n    private int totalCapacityGib;\r\n\r\n    @Column(name = &quot;`used_capacity_gib`&quot;)\r\n    private int usedCapacityGib;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`model_number`&quot;)\r\n    private String modelNumber;;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`serial_number`&quot;)\r\n    private String serialNumber;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`firmware_revision`&quot;)\r\n    private String firmwareRevision;;\r\n\r\n    private String nqn;\r\n\r\n    private String trtype;\r\n\r\n    private String adrfam;\r\n    \r\n    private String traddr;\r\n\r\n    private String trsvcid;\r\n\r\n    @Column(name = &quot;`disk_state`&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private DiskState diskState;\r\n\r\n    @Column(name = &quot;`blacklisted_reason`&quot;)\r\n    private String blacklistedReason;\r\n\r\n    @NotNull\r\n    @Column(name = &quot;`bdev_name`&quot;)\r\n    private String bdevName;\r\n\r\n    @EqualsAndHashCode.Exclude\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name= &quot;`created_date`&quot;)\r\n    private Date createdDate;\r\n\r\n    @EqualsAndHashCode.Exclude\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name= &quot;`last_modified_date`&quot;)\r\n    private Date lastModifiedDate;\r\n\r\n    @Override\r\n    public Optional&lt;LocalDateTime&gt; getCreatedDate() {\r\n        return null == createdDate ? Optional.empty()\r\n                : Optional.of(LocalDateTime.ofInstant(createdDate.toInstant(), ZoneId.systemDefault()));\r\n    }\r\n\r\n    @Override\r\n    public void setCreatedDate(LocalDateTime createdDate) {\r\n        this.createdDate = Date.from(createdDate.atZone(ZoneId.systemDefault()).toInstant());\r\n    }\r\n\r\n    @Override\r\n    public Optional&lt;String&gt; getCreatedBy() {\r\n        return Optional.empty();\r\n    }\r\n\r\n    @Override\r\n    public void setCreatedBy(String createdBy) {\r\n    }\r\n\r\n    @Override\r\n    public Optional&lt;LocalDateTime&gt; getLastModifiedDate() {\r\n        return null == lastModifiedDate ? Optional.empty()\r\n                : Optional.of(LocalDateTime.ofInstant(lastModifiedDate.toInstant(), ZoneId.systemDefault()));\r\n    }\r\n\r\n    @Override\r\n    public void setLastModifiedDate(LocalDateTime lastModifiedDate) {\r\n        this.lastModifiedDate = Date.from(lastModifiedDate.atZone(ZoneId.systemDefault()).toInstant());\r\n    }\r\n\r\n    @Override\r\n    public Optional&lt;String&gt; getLastModifiedBy() {\r\n        return Optional.empty();\r\n    }\r\n\r\n    @Override\r\n    public void setLastModifiedBy(String lastModifiedBy) {\r\n    }\r\n\r\n    @Override\r\n    public boolean isNew() {\r\n        return this.id == null;\r\n    }\r\n```\r\n\r\nTest code\r\n\r\n```\r\n@TestPropertySource(locations = &quot;classpath:application-dao-test.properties&quot;)\r\n@RunWith(PowerMockRunner.class)\r\n@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class)\r\n@PowerMockIgnore({&quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;javax.management.*&quot;})\r\n@DataJpaTest\r\n@EntityScan(&quot;com.mycom.sat.testdisk.entity&quot;)\r\npublic class TargetDiskRepositoryTest {\r\n\r\n    @Autowired\r\n    private TestEntityManager entityManager;\r\n\r\n    @Autowired\r\n    private TargetDiskRepository repository;\r\n\r\n    @Test\r\n    public void testSaveAndFind() {\r\n\r\n        TargetDiskEntity diskEntity = new TargetDiskEntity();\r\n        \r\n        diskEntity.setDiskId(&quot;d-test-diskId&quot;);\r\n        diskEntity.setNodeId(&quot;d-test-nodeId&quot;);\r\n        diskEntity.setTotalCapacityGib(100);\r\n        diskEntity.setUsedCapacityGib(50);\r\n        diskEntity.setModelNumber(&quot;d-test-modelNumber&quot;);\r\n        diskEntity.setSerialNumber(&quot;d-test-serialNumber&quot;);\r\n        diskEntity.setFirmwareRevision(&quot;d-test-firmwareRevision&quot;);\r\n        diskEntity.setNqn(&quot;Nqn&quot;);\r\n        diskEntity.setTrtype(&quot;test-type&quot;);\r\n        diskEntity.setAdrfam(&quot;addrtest&quot;);\r\n        diskEntity.setTraddr(&quot;targetaddr&quot;);\r\n        diskEntity.setTrsvcid(&quot;test-svcid&quot;);\r\n        diskEntity.setDiskState(DiskState.AVAILABLE);\r\n        diskEntity.setBlacklistedReason(&quot;NULL&quot;);\r\n        diskEntity.setBdevName(&quot;d-test-bdev&quot;);\r\n        diskEntity.setCreatedDate(LocalDateTime.of(2014, 1, 14, 19, 30));\r\n        diskEntity.setLastModifiedDate(LocalDateTime.of(2014, 1, 14, 19, 31));\r\n        diskEntity.setCreatedBy(&quot;test-user&quot;);\r\n        diskEntity.setLastModifiedBy(&quot;test-user&quot;);\r\n\r\n        entityManager.persist(diskEntity);\r\n\r\n        TargetDiskEntity result = repository.findByDiskId(diskEntity.getDiskId()).get();\r\n        \r\n        repository.updateDiskStateByDiskId(result.getDiskId(), &quot;AVAILABLE&quot;, &quot;USING&quot;);\r\n    }\r\n}\r\n```\r\nproperty file\r\n\r\n```\r\nlogging.console_enabled=true\r\nlogging.file.name=logs/nvmf-storagepool-unittest.log\r\nlogging.log_level=DEBUG\r\nlogging.level.org.hibernate=DEBUG\r\n\r\nspring.datasource.url=jdbc:h2:mem:data;DB_CLOSE_DELAY=-1;Mode=MySQL;DATABASE_TO_LOWER=TRUE\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\n\r\nspring.jpa.database=h2\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.show-sql=true\r\n\r\nspring.h2.console.path=/h2-console\r\nspring.h2.console.enabled=true\r\n```\r\n\r\n\r\nThe output \r\n\r\n```\r\nHibernate: insert into m_target_disk (id, adrfam, &quot;bdev_name&quot;, &quot;blacklisted_reason&quot;, &quot;created_date&quot;, &quot;disk_id&quot;, &quot;disk_state&quot;, &quot;firmware_revision&quot;, &quot;last_modified_date&quot;, &quot;model_number&quot;, &quot;node_id&quot;, nqn, &quot;serial_number&quot;, &quot;total_capacity_gib&quot;, traddr, trsvcid, trtype, &quot;used_capacity_gib&quot;) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\nHibernate: select targetdisk0_.id as id1_0_, targetdisk0_.adrfam as adrfam2_0_, targetdisk0_.&quot;bdev_name&quot; as bdev_nam3_0_, targetdisk0_.&quot;blacklisted_reason&quot; as blacklis4_0_, targetdisk0_.&quot;created_date&quot; as created_5_0_, targetdisk0_.&quot;disk_id&quot; as disk_id6_0_, targetdisk0_.&quot;disk_state&quot; as disk_sta7_0_, targetdisk0_.&quot;firmware_revision&quot; as firmware8_0_, targetdisk0_.&quot;last_modified_date&quot; as last_mod9_0_, targetdisk0_.&quot;model_number&quot; as model_n10_0_, targetdisk0_.&quot;node_id&quot; as node_id11_0_, targetdisk0_.nqn as nqn12_0_, targetdisk0_.&quot;serial_number&quot; as serial_13_0_, targetdisk0_.&quot;total_capacity_gib&quot; as total_c14_0_, targetdisk0_.traddr as traddr15_0_, targetdisk0_.trsvcid as trsvcid16_0_, targetdisk0_.trtype as trtype17_0_, targetdisk0_.&quot;used_capacity_gib&quot; as used_ca18_0_ from m_target_disk targetdisk0_ where targetdisk0_.&quot;disk_id&quot;=?\r\nHibernate: UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?\r\n\r\nError:\r\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement; SQL [UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\r\n```\r\n\r\nThe sql sentence in the Query annotation does not work.\r\nAt the same time, I notice that when I call `entityManager.persist(diskEntity);` the output is insert into m_target_disk with values(null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?),  also the placeholder in the UPDATE sentence is &#39;?&#39;. \r\n\r\nin `repository.findByDiskId` it works fine while the disk_id in the SELECT sentence is &#39;?&#39;, why would this happen? \r\n\r\nHow can I fix this problem? Thanks.\r\n\r\n\r\n\r\n\r\nI tried to see the hibernate log in DEBUG level so I add `logging.level.org.hibernate=DEBUG` in the property file ,but it does not work. And I checked the answer https://stackoverflow.com/questions/71252127/my-spring-jpa-queries-do-not-work-with-h2 but it does not work for me.\r\n\r\nfor full stacktrace\r\n\r\n\r\n&gt; org.springframework.dao.InvalidDataAccessResourceUsageException: could\r\n&gt; not prepare statement; SQL [UPDATE m_target_disk SET disk_state = ?\r\n&gt; WHERE disk_state = ? AND disk_id = ?]; nested exception is\r\n&gt; org.hibernate.exception.SQLGrammarException: could not prepare\r\n&gt; statement \tat\r\n&gt; org.h2.message.DbException.getJdbcSQLException(DbException.java:453)\r\n&gt; \tat\r\n&gt; org.h2.message.DbException.getJdbcSQLException(DbException.java:429)\r\n&gt; \tat org.h2.message.DbException.get(DbException.java:205) \tat\r\n&gt; org.h2.message.DbException.get(DbException.java:181) \tat\r\n&gt; org.h2.table.Table.getColumn(Table.java:703) \tat\r\n&gt; org.h2.command.Parser.readTableColumn(Parser.java:1274) \tat\r\n&gt; org.h2.command.Parser.parseUpdateSetClause(Parser.java:1325) \tat\r\n&gt; org.h2.command.Parser.parseUpdate(Parser.java:1290) \tat\r\n&gt; org.h2.command.Parser.parsePrepared(Parser.java:1005) \tat\r\n&gt; org.h2.command.Parser.parse(Parser.java:843) \tat\r\n&gt; org.h2.command.Parser.parse(Parser.java:815) \tat\r\n&gt; org.h2.command.Parser.prepareCommand(Parser.java:738) \tat\r\n&gt; org.h2.engine.Session.prepareLocal(Session.java:657) \tat\r\n&gt; org.h2.engine.Session.prepareCommand(Session.java:595) \tat\r\n&gt; org.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\r\n&gt; \tat\r\n&gt; org.h2.jdbc.JdbcPreparedStatement.&lt;init&gt;(JdbcPreparedStatement.java:76)\r\n&gt; \tat\r\n&gt; org.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:352)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:90)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:81)\r\n&gt; \tat\r\n&gt; org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:97)\r\n&gt; \tat\r\n&gt; org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509)\r\n&gt; \tat\r\n&gt; org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298)\r\n&gt; \tat\r\n&gt; org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1683)\r\n&gt; \tat\r\n&gt; org.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:239)\r\n&gt; \tat\r\n&gt; org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\r\n&gt; \tat\r\n&gt; org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\r\n&gt; \tat\r\n&gt; org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\r\n&gt; \tat\r\n&gt; org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n&gt; \tat\r\n&gt; org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n&gt; \tat\r\n&gt; org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\r\n&gt; \tat\r\n&gt; org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n&gt; \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n&gt; \tat\r\n&gt; org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n&gt; \tat\r\n&gt; org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n&gt; \tat com.sun.proxy.$Proxy113.updateDiskStateByDiskId(Unknown Source)\r\n&gt; \tat\r\n&gt; com.mycom.sat.testdisk.dao.TargetDiskRepositoryTest.testSaveAndFind(TargetDiskRepositoryTest.java:91)\r\n\r\n","title":"Query annotation does not work with H2 database","body":"<p>I am writing a java program using Spring framework. And for the unit test, I use H2 database since it's an in-memory database. But it didn't work properly. For the code below, using the JPA method works fine, but the Query annotation raise exceptions.</p>\n<p>DAO</p>\n<pre><code>public interface TargetDiskRepository extends JpaRepository&lt;TargetDiskEntity, Long&gt;,\n        JpaSpecificationExecutor&lt;TargetDiskEntity&gt; {\n\n    List&lt;TargetDiskEntity&gt; findByNodeId(String nodeId);\n\n    List&lt;TargetDiskEntity&gt; findByNodeIdAndDiskStateAndTrtype(String nodeId, DiskState diskState, String trtype);\n\n    Optional&lt;TargetDiskEntity&gt; findByDiskId(String diskId);\n\n    @Transactional\n    @Modifying\n    @Query(value = &quot;UPDATE m_target_disk SET disk_state = :tar_state WHERE &quot;  +\n        &quot;disk_state = :ori_state AND disk_id = :disk_id&quot;, nativeQuery = true)\n    int updateDiskStateByDiskId(@Param(&quot;disk_id&quot;) String diskId, @Param(&quot;ori_state&quot;) String originState, @Param(&quot;tar_state&quot;) String targetState);\n\n    @Transactional\n    void deleteByNodeId(String nodeId);          \n}\n</code></pre>\n<p>Entity</p>\n<pre><code>@Setter\n@Getter\n@NoArgsConstructor\n@EqualsAndHashCode\n@Entity\n@Table(name = &quot;m_target_disk&quot;, indexes = {\n            @Index(name = &quot;idx_unique_node_disk&quot;, columnList = &quot;`node_id`, `serial_number`&quot;, unique = true)})\n@EntityListeners({AuditingEntityListener.class})\npublic class TargetDiskEntity implements Auditable&lt;String, Long, LocalDateTime&gt; {\n\n    @EqualsAndHashCode.Exclude\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    @Column(name = &quot;`disk_id`&quot;)\n    private String diskId;\n\n    @NotNull\n    @Column(name = &quot;`node_id`&quot;)\n    private String nodeId;\n\n    @Column(name = &quot;`total_capacity_gib`&quot;)\n    private int totalCapacityGib;\n\n    @Column(name = &quot;`used_capacity_gib`&quot;)\n    private int usedCapacityGib;\n\n    @NotNull\n    @Column(name = &quot;`model_number`&quot;)\n    private String modelNumber;;\n\n    @NotNull\n    @Column(name = &quot;`serial_number`&quot;)\n    private String serialNumber;\n\n    @NotNull\n    @Column(name = &quot;`firmware_revision`&quot;)\n    private String firmwareRevision;;\n\n    private String nqn;\n\n    private String trtype;\n\n    private String adrfam;\n    \n    private String traddr;\n\n    private String trsvcid;\n\n    @Column(name = &quot;`disk_state`&quot;)\n    @Enumerated(EnumType.STRING)\n    private DiskState diskState;\n\n    @Column(name = &quot;`blacklisted_reason`&quot;)\n    private String blacklistedReason;\n\n    @NotNull\n    @Column(name = &quot;`bdev_name`&quot;)\n    private String bdevName;\n\n    @EqualsAndHashCode.Exclude\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name= &quot;`created_date`&quot;)\n    private Date createdDate;\n\n    @EqualsAndHashCode.Exclude\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name= &quot;`last_modified_date`&quot;)\n    private Date lastModifiedDate;\n\n    @Override\n    public Optional&lt;LocalDateTime&gt; getCreatedDate() {\n        return null == createdDate ? Optional.empty()\n                : Optional.of(LocalDateTime.ofInstant(createdDate.toInstant(), ZoneId.systemDefault()));\n    }\n\n    @Override\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = Date.from(createdDate.atZone(ZoneId.systemDefault()).toInstant());\n    }\n\n    @Override\n    public Optional&lt;String&gt; getCreatedBy() {\n        return Optional.empty();\n    }\n\n    @Override\n    public void setCreatedBy(String createdBy) {\n    }\n\n    @Override\n    public Optional&lt;LocalDateTime&gt; getLastModifiedDate() {\n        return null == lastModifiedDate ? Optional.empty()\n                : Optional.of(LocalDateTime.ofInstant(lastModifiedDate.toInstant(), ZoneId.systemDefault()));\n    }\n\n    @Override\n    public void setLastModifiedDate(LocalDateTime lastModifiedDate) {\n        this.lastModifiedDate = Date.from(lastModifiedDate.atZone(ZoneId.systemDefault()).toInstant());\n    }\n\n    @Override\n    public Optional&lt;String&gt; getLastModifiedBy() {\n        return Optional.empty();\n    }\n\n    @Override\n    public void setLastModifiedBy(String lastModifiedBy) {\n    }\n\n    @Override\n    public boolean isNew() {\n        return this.id == null;\n    }\n</code></pre>\n<p>Test code</p>\n<pre><code>@TestPropertySource(locations = &quot;classpath:application-dao-test.properties&quot;)\n@RunWith(PowerMockRunner.class)\n@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class)\n@PowerMockIgnore({&quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;javax.management.*&quot;})\n@DataJpaTest\n@EntityScan(&quot;com.mycom.sat.testdisk.entity&quot;)\npublic class TargetDiskRepositoryTest {\n\n    @Autowired\n    private TestEntityManager entityManager;\n\n    @Autowired\n    private TargetDiskRepository repository;\n\n    @Test\n    public void testSaveAndFind() {\n\n        TargetDiskEntity diskEntity = new TargetDiskEntity();\n        \n        diskEntity.setDiskId(&quot;d-test-diskId&quot;);\n        diskEntity.setNodeId(&quot;d-test-nodeId&quot;);\n        diskEntity.setTotalCapacityGib(100);\n        diskEntity.setUsedCapacityGib(50);\n        diskEntity.setModelNumber(&quot;d-test-modelNumber&quot;);\n        diskEntity.setSerialNumber(&quot;d-test-serialNumber&quot;);\n        diskEntity.setFirmwareRevision(&quot;d-test-firmwareRevision&quot;);\n        diskEntity.setNqn(&quot;Nqn&quot;);\n        diskEntity.setTrtype(&quot;test-type&quot;);\n        diskEntity.setAdrfam(&quot;addrtest&quot;);\n        diskEntity.setTraddr(&quot;targetaddr&quot;);\n        diskEntity.setTrsvcid(&quot;test-svcid&quot;);\n        diskEntity.setDiskState(DiskState.AVAILABLE);\n        diskEntity.setBlacklistedReason(&quot;NULL&quot;);\n        diskEntity.setBdevName(&quot;d-test-bdev&quot;);\n        diskEntity.setCreatedDate(LocalDateTime.of(2014, 1, 14, 19, 30));\n        diskEntity.setLastModifiedDate(LocalDateTime.of(2014, 1, 14, 19, 31));\n        diskEntity.setCreatedBy(&quot;test-user&quot;);\n        diskEntity.setLastModifiedBy(&quot;test-user&quot;);\n\n        entityManager.persist(diskEntity);\n\n        TargetDiskEntity result = repository.findByDiskId(diskEntity.getDiskId()).get();\n        \n        repository.updateDiskStateByDiskId(result.getDiskId(), &quot;AVAILABLE&quot;, &quot;USING&quot;);\n    }\n}\n</code></pre>\n<p>property file</p>\n<pre><code>logging.console_enabled=true\nlogging.file.name=logs/nvmf-storagepool-unittest.log\nlogging.log_level=DEBUG\nlogging.level.org.hibernate=DEBUG\n\nspring.datasource.url=jdbc:h2:mem:data;DB_CLOSE_DELAY=-1;Mode=MySQL;DATABASE_TO_LOWER=TRUE\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.jpa.database=h2\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.show-sql=true\n\nspring.h2.console.path=/h2-console\nspring.h2.console.enabled=true\n</code></pre>\n<p>The output</p>\n<pre><code>Hibernate: insert into m_target_disk (id, adrfam, &quot;bdev_name&quot;, &quot;blacklisted_reason&quot;, &quot;created_date&quot;, &quot;disk_id&quot;, &quot;disk_state&quot;, &quot;firmware_revision&quot;, &quot;last_modified_date&quot;, &quot;model_number&quot;, &quot;node_id&quot;, nqn, &quot;serial_number&quot;, &quot;total_capacity_gib&quot;, traddr, trsvcid, trtype, &quot;used_capacity_gib&quot;) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\nHibernate: select targetdisk0_.id as id1_0_, targetdisk0_.adrfam as adrfam2_0_, targetdisk0_.&quot;bdev_name&quot; as bdev_nam3_0_, targetdisk0_.&quot;blacklisted_reason&quot; as blacklis4_0_, targetdisk0_.&quot;created_date&quot; as created_5_0_, targetdisk0_.&quot;disk_id&quot; as disk_id6_0_, targetdisk0_.&quot;disk_state&quot; as disk_sta7_0_, targetdisk0_.&quot;firmware_revision&quot; as firmware8_0_, targetdisk0_.&quot;last_modified_date&quot; as last_mod9_0_, targetdisk0_.&quot;model_number&quot; as model_n10_0_, targetdisk0_.&quot;node_id&quot; as node_id11_0_, targetdisk0_.nqn as nqn12_0_, targetdisk0_.&quot;serial_number&quot; as serial_13_0_, targetdisk0_.&quot;total_capacity_gib&quot; as total_c14_0_, targetdisk0_.traddr as traddr15_0_, targetdisk0_.trsvcid as trsvcid16_0_, targetdisk0_.trtype as trtype17_0_, targetdisk0_.&quot;used_capacity_gib&quot; as used_ca18_0_ from m_target_disk targetdisk0_ where targetdisk0_.&quot;disk_id&quot;=?\nHibernate: UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?\n\nError:\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement; SQL [UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\n</code></pre>\n<p>The sql sentence in the Query annotation does not work.\nAt the same time, I notice that when I call <code>entityManager.persist(diskEntity);</code> the output is insert into m_target_disk with values(null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?),  also the placeholder in the UPDATE sentence is '?'.</p>\n<p>in <code>repository.findByDiskId</code> it works fine while the disk_id in the SELECT sentence is '?', why would this happen?</p>\n<p>How can I fix this problem? Thanks.</p>\n<p>I tried to see the hibernate log in DEBUG level so I add <code>logging.level.org.hibernate=DEBUG</code> in the property file ,but it does not work. And I checked the answer <a href=\"https://stackoverflow.com/questions/71252127/my-spring-jpa-queries-do-not-work-with-h2\">My Spring JPA queries do not work with H2</a> but it does not work for me.</p>\n<p>for full stacktrace</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException: could\nnot prepare statement; SQL [UPDATE m_target_disk SET disk_state = ?\nWHERE disk_state = ? AND disk_id = ?]; nested exception is\norg.hibernate.exception.SQLGrammarException: could not prepare\nstatement     at\norg.h2.message.DbException.getJdbcSQLException(DbException.java:453)\nat\norg.h2.message.DbException.getJdbcSQLException(DbException.java:429)\nat org.h2.message.DbException.get(DbException.java:205)     at\norg.h2.message.DbException.get(DbException.java:181)  at\norg.h2.table.Table.getColumn(Table.java:703)  at\norg.h2.command.Parser.readTableColumn(Parser.java:1274)   at\norg.h2.command.Parser.parseUpdateSetClause(Parser.java:1325)  at\norg.h2.command.Parser.parseUpdate(Parser.java:1290)   at\norg.h2.command.Parser.parsePrepared(Parser.java:1005)     at\norg.h2.command.Parser.parse(Parser.java:843)  at\norg.h2.command.Parser.parse(Parser.java:815)  at\norg.h2.command.Parser.prepareCommand(Parser.java:738)     at\norg.h2.engine.Session.prepareLocal(Session.java:657)  at\norg.h2.engine.Session.prepareCommand(Session.java:595)    at\norg.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\nat\norg.h2.jdbc.JdbcPreparedStatement.(JdbcPreparedStatement.java:76)\nat\norg.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:352)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:90)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:81)\nat\norg.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:97)\nat\norg.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509)\nat\norg.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298)\nat\norg.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1683)\nat\norg.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:239)\nat\norg.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\nat\norg.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\nat\norg.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\nat\norg.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\nat\norg.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\nat\norg.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\nat\norg.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\nat\norg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\nat\norg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\nat com.sun.proxy.$Proxy113.updateDiskStateByDiskId(Unknown Source)\nat\ncom.mycom.sat.testdisk.dao.TargetDiskRepositoryTest.testSaveAndFind(TargetDiskRepositoryTest.java:91)</p>\n</blockquote>\n"},{"tags":["java","xml","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681273054,"post_id":75991843,"comment_id":134028014,"body_markdown":"Add `System.out.println(&quot;Working Directory = &quot; + System.getProperty(&quot;user.dir&quot;))` to somewhere in your code, this will tell you the &quot;working directory&quot;, this the location that your program is looking for the (relative) file, try placing it there.  IF you need the file to be always be available at runtime (ie, it&#39;s not likely to change) you could add it as an embedded resource instead, and avoid this kind of mess (but it does make the file read only)","body":"Add <code>System.out.println(&quot;Working Directory = &quot; + System.getProperty(&quot;user.dir&quot;))</code> to somewhere in your code, this will tell you the &quot;working directory&quot;, this the location that your program is looking for the (relative) file, try placing it there.  IF you need the file to be always be available at runtime (ie, it&#39;s not likely to change) you could add it as an embedded resource instead, and avoid this kind of mess (but it does make the file read only)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681273119,"post_id":75991843,"comment_id":134028025,"body_markdown":"I also would avoid loading the file twice, building a DOM is expensive, so I keep the initial reference (to the DOM) and re-use it instead","body":"I also would avoid loading the file twice, building a DOM is expensive, so I keep the initial reference (to the DOM) and re-use it instead"},{"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"score":0,"creation_date":1681274255,"post_id":75991843,"comment_id":134028167,"body_markdown":"@MadProgrammer that helped a lot thanks ! but now there is no result and no error","body":"@MadProgrammer that helped a lot thanks ! but now there is no result and no error"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681274953,"post_id":75991843,"comment_id":134028256,"body_markdown":"So now you need to start debugging your code - start with some `System.out` statements","body":"So now you need to start debugging your code - start with some <code>System.out</code> statements"},{"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"score":0,"creation_date":1681275118,"post_id":75991843,"comment_id":134028284,"body_markdown":"@MadProgrammer when i tried to validate xml file it shows `cvc-elt.1.a: Cannot find the declaration of element &#39;catalogue&#39;. [2] `\nand i&#39;m sure the file is well formed","body":"@MadProgrammer when i tried to validate xml file it shows <code>cvc-elt.1.a: Cannot find the declaration of element &#39;catalogue&#39;. [2] </code> and i&#39;m sure the file is well formed"},{"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"score":0,"creation_date":1681275148,"post_id":75991843,"comment_id":134028289,"body_markdown":"xml\n```&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;catalogue&gt;\n &lt;personne identificateur=&quot;p1&quot; nom=&quot;Abdellah Ghayth&quot; age=&quot;45&quot;/&gt;\n &lt;personne identificateur=&quot;p2&quot; nom=&quot;Mouna Wacef&quot; age=&quot;30&quot;/&gt;\n &lt;personne identificateur=&quot;p3&quot; nom=&quot;ELaakad&quot; age=&quot;60&quot;/&gt;\n  &lt;film langue=&quot;Ar&quot; titre=&quot;errisala&quot; film-affiche=&quot;errisala.jpg&quot;&gt;\n   &lt;realisateur ref=&quot;p3&quot; /&gt;\n    &lt;acteur ref=&quot;p1&quot; nomActeur=&quot;Hamza&quot;/&gt;\n    &lt;acteur ref=&quot;p5&quot; nomActeur=&quot;Hind&quot;/&gt;\n    &lt;scenario&gt;\n      .... Le Message qui raconte L&#39;histoire de l&#39;islam ,\n      l&#39;acteur &lt;refPerson ref=&quot;p1&quot; /&gt; a un r&#244;le important..\n   &lt;/scenario&gt;\n &lt;/film&gt;\n&lt;/catalogue&gt;```","body":"xml <code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;catalogue&gt;  &lt;personne identificateur=&quot;p1&quot; nom=&quot;Abdellah Ghayth&quot; age=&quot;45&quot;&#47;&gt;  &lt;personne identificateur=&quot;p2&quot; nom=&quot;Mouna Wacef&quot; age=&quot;30&quot;&#47;&gt;  &lt;personne identificateur=&quot;p3&quot; nom=&quot;ELaakad&quot; age=&quot;60&quot;&#47;&gt;   &lt;film langue=&quot;Ar&quot; titre=&quot;errisala&quot; film-affiche=&quot;errisala.jpg&quot;&gt;    &lt;realisateur ref=&quot;p3&quot; &#47;&gt;     &lt;acteur ref=&quot;p1&quot; nomActeur=&quot;Hamza&quot;&#47;&gt;     &lt;acteur ref=&quot;p5&quot; nomActeur=&quot;Hind&quot;&#47;&gt;     &lt;scenario&gt;       .... Le Message qui raconte L&#39;histoire de l&#39;islam ,       l&#39;acteur &lt;refPerson ref=&quot;p1&quot; &#47;&gt; a un r&#244;le important..    &lt;&#47;scenario&gt;  &lt;&#47;film&gt; &lt;&#47;catalogue&gt;</code>"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681275294,"post_id":75991843,"comment_id":134028303,"body_markdown":"I pasted the XML into a XML validator and it didn&#39;t seem to have any issues","body":"I pasted the XML into a XML validator and it didn&#39;t seem to have any issues"},{"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"score":0,"creation_date":1681275370,"post_id":75991843,"comment_id":134028311,"body_markdown":"@MadProgrammer yeah i&#39;m sure there is no issue in the xml file but there is an error when i validate","body":"@MadProgrammer yeah i&#39;m sure there is no issue in the xml file but there is an error when i validate"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681275570,"post_id":75991843,"comment_id":134028343,"body_markdown":"I did a small amount of sanity testing and it works fine for me (I can traverse the `NodeList` and see the `realisateur` attribute value","body":"I did a small amount of sanity testing and it works fine for me (I can traverse the <code>NodeList</code> and see the <code>realisateur</code> attribute value"},{"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"score":0,"creation_date":1681275693,"post_id":75991843,"comment_id":134028353,"body_markdown":"@MadProgrammer what you think the problem could be ?","body":"@MadProgrammer what you think the problem could be ?"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1681275815,"post_id":75991843,"comment_id":134028366,"body_markdown":"At a guess, a file encoding issue or &quot;hidden&quot; character (see encoding issue)","body":"At a guess, a file encoding issue or &quot;hidden&quot; character (see encoding issue)"}],"owner":{"account_id":24036130,"reputation":53,"user_id":18016391,"display_name":"Houssam Eddine"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681272773,"creation_date":1681272773,"question_id":75991843,"body_markdown":"i tried to make this code and link it with an xml file(UI to read data from xml file):\r\n\r\n```\r\n\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.io.File;\r\nimport javax.swing.*;\r\n\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.NodeList;\r\nimport org.w3c.dom.Element;\r\n\r\npublic class NewJFrame extends javax.swing.JFrame {\r\n    private JComboBox&lt;String&gt; directorDropdown;\r\n    private JButton searchButton;\r\n    private JTextArea resultTextArea;\r\n\r\n    public NewJFrame() {\r\n        init();\r\n    }\r\n\r\n    @SuppressWarnings(&quot;unchecked&quot;)\r\n                                      \r\nprivate void init() {\r\n\r\n        directorDropdown = new JComboBox&lt;String&gt;();\r\n        directorDropdown.setModel(new DefaultComboBoxModel&lt;String&gt;(new String[] {&quot;Abdellah Ghayth&quot;, &quot;Mouna Wacef&quot;, &quot;ELaakad&quot;}));\r\n        getContentPane().add(directorDropdown);\r\n\r\n        searchButton = new JButton(&quot;Search&quot;);\r\n        searchButton.addActionListener(new ActionListener() {\r\n            public void actionPerformed(ActionEvent e) {\r\n                try {\r\n                    // Get the selected director from the dropdown\r\n                    String nomRealisateur = directorDropdown.getSelectedItem().toString();\r\n\r\n                    // Create a parser for the XML document\r\n                    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n                    DocumentBuilder builder = factory.newDocumentBuilder();\r\n\r\n                    // Load the XML document into a Document object\r\n                    Document document = builder.parse(new File(&quot;Catalogue.xml&quot;));\r\n\r\n                    // Find the films directed by the selected director and display their titles\r\n                    StringBuilder result = new StringBuilder();\r\n                    NodeList films = document.getElementsByTagName(&quot;film&quot;);\r\n                    for (int i = 0; i &lt; films.getLength(); i++) {\r\n                        Element film = (Element) films.item(i);\r\n                        Element realisateur = (Element) film.getElementsByTagName(&quot;realisateur&quot;).item(0);\r\n                        if (realisateur.getAttribute(&quot;ref&quot;).equals(nomRealisateur)) {\r\n                            String titre = film.getAttribute(&quot;titre&quot;);\r\n                            result.append(titre + &quot;\\n&quot;);\r\n                        }\r\n                    }\r\n                    resultTextArea.setText(result.toString());\r\n                } catch (Exception ex) {\r\n                    ex.printStackTrace();\r\n                }\r\n            }\r\n        });\r\n        getContentPane().add(searchButton);\r\n\r\n        resultTextArea = new JTextArea();\r\n        resultTextArea.setEditable(false);\r\n        getContentPane().add(new JScrollPane(resultTextArea));\r\n\r\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\r\n        setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));\r\n        pack();\r\n    }\r\n\r\n    public static void main(String args[]) {\r\n\r\n    try {\r\n        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\r\n            if (&quot;Nimbus&quot;.equals(info.getName())) {\r\n                javax.swing.UIManager.setLookAndFeel(info.getClassName());\r\n                break;\r\n            }\r\n        }\r\n    } catch (ClassNotFoundException ex) {\r\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    } catch (InstantiationException ex) {\r\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    } catch (IllegalAccessException ex) {\r\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    } catch (javax.swing.UnsupportedLookAndFeelException ex) {\r\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\r\n    }\r\n        java.awt.EventQueue.invokeLater(new Runnable() {\r\n            public void run() {\r\n                new NewJFrame().setVisible(true);\r\n                 try {\r\n                // Sp&#233;cifier le nom du r&#233;alisateur recherch&#233;\r\n                String nomRealisateur = &quot;ELaakad&quot;;\r\n\r\n                // Cr&#233;er un parseur de document XML\r\n                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\r\n                DocumentBuilder builder = factory.newDocumentBuilder();\r\n\r\n                // Charger le document XML dans un objet Document\r\n                Document document = builder.parse(new File(&quot;Catalogue.xml&quot;));\r\n\r\n                // Obtenir une liste des &#233;l&#233;ments &quot;film&quot; dans le document\r\n                NodeList films = document.getElementsByTagName(&quot;film&quot;);\r\n\r\n                // Cr&#233;er un mod&#232;le de liste pour les titres de films\r\n                DefaultListModel&lt;String&gt; listModel = new DefaultListModel&lt;String&gt;();\r\n\r\n                // Parcourir chaque &#233;l&#233;ment &quot;film&quot; pour trouver ceux r&#233;alis&#233;s par le r&#233;alisateur sp&#233;cifi&#233;\r\n                for (int i = 0; i &lt; films.getLength(); i++) {\r\n                    Element film = (Element) films.item(i);\r\n                    Element realisateur = (Element) film.getElementsByTagName(&quot;realisateur&quot;).item(0);\r\n\r\n                    // V&#233;rifier si le r&#233;alisateur correspond &#224; celui recherch&#233;\r\n                    if (realisateur.getAttribute(&quot;ref&quot;).equals(nomRealisateur)) {\r\n                        String titre = film.getAttribute(&quot;titre&quot;);\r\n                        listModel.addElement(titre);\r\n                    }\r\n                }\r\n\r\n                // Cr&#233;er une liste pour afficher les titres de films\r\n                JList&lt;String&gt; list = new JList&lt;String&gt;(listModel);\r\n\r\n \r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n```\r\nbut it shows those errors:\r\n```\r\n\r\njava.io.FileNotFoundException: &quot;path&quot; (The system cannot find the file specified)\r\n\tat java.base/java.io.FileInputStream.open0(Native Method)\r\n\tat java.base/java.io.FileInputStream.open(FileInputStream.java:216)\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\r\n\tat java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111)\r\n\tat java.base/sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:86)\r\n\tat java.base/sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:189)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:653)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:150)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:861)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:247)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:342)\r\n\tat java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:206)\r\n\tat NewJFrame$3.run(NewJFrame.java:132)\r\n\tat java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n\tat java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n\tat java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n\tat java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n\tat java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\ni wrote the full path but it didn&#39;t work, i also copied the xml file to the build folder but it didn&#39;t work \r\nthe code above is about a user interface using swing to read data from an xml file using DOM API .\r\n","title":"link XML with java","body":"<p>i tried to make this code and link it with an xml file(UI to read data from xml file):</p>\n<pre><code>\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.io.File;\nimport javax.swing.*;\n\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.DocumentBuilder;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.NodeList;\nimport org.w3c.dom.Element;\n\npublic class NewJFrame extends javax.swing.JFrame {\n    private JComboBox&lt;String&gt; directorDropdown;\n    private JButton searchButton;\n    private JTextArea resultTextArea;\n\n    public NewJFrame() {\n        init();\n    }\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n                                      \nprivate void init() {\n\n        directorDropdown = new JComboBox&lt;String&gt;();\n        directorDropdown.setModel(new DefaultComboBoxModel&lt;String&gt;(new String[] {&quot;Abdellah Ghayth&quot;, &quot;Mouna Wacef&quot;, &quot;ELaakad&quot;}));\n        getContentPane().add(directorDropdown);\n\n        searchButton = new JButton(&quot;Search&quot;);\n        searchButton.addActionListener(new ActionListener() {\n            public void actionPerformed(ActionEvent e) {\n                try {\n                    // Get the selected director from the dropdown\n                    String nomRealisateur = directorDropdown.getSelectedItem().toString();\n\n                    // Create a parser for the XML document\n                    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n                    DocumentBuilder builder = factory.newDocumentBuilder();\n\n                    // Load the XML document into a Document object\n                    Document document = builder.parse(new File(&quot;Catalogue.xml&quot;));\n\n                    // Find the films directed by the selected director and display their titles\n                    StringBuilder result = new StringBuilder();\n                    NodeList films = document.getElementsByTagName(&quot;film&quot;);\n                    for (int i = 0; i &lt; films.getLength(); i++) {\n                        Element film = (Element) films.item(i);\n                        Element realisateur = (Element) film.getElementsByTagName(&quot;realisateur&quot;).item(0);\n                        if (realisateur.getAttribute(&quot;ref&quot;).equals(nomRealisateur)) {\n                            String titre = film.getAttribute(&quot;titre&quot;);\n                            result.append(titre + &quot;\\n&quot;);\n                        }\n                    }\n                    resultTextArea.setText(result.toString());\n                } catch (Exception ex) {\n                    ex.printStackTrace();\n                }\n            }\n        });\n        getContentPane().add(searchButton);\n\n        resultTextArea = new JTextArea();\n        resultTextArea.setEditable(false);\n        getContentPane().add(new JScrollPane(resultTextArea));\n\n        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);\n        setLayout(new BoxLayout(getContentPane(), BoxLayout.Y_AXIS));\n        pack();\n    }\n\n    public static void main(String args[]) {\n\n    try {\n        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {\n            if (&quot;Nimbus&quot;.equals(info.getName())) {\n                javax.swing.UIManager.setLookAndFeel(info.getClassName());\n                break;\n            }\n        }\n    } catch (ClassNotFoundException ex) {\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    } catch (InstantiationException ex) {\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    } catch (IllegalAccessException ex) {\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    } catch (javax.swing.UnsupportedLookAndFeelException ex) {\n        java.util.logging.Logger.getLogger(NewJFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);\n    }\n        java.awt.EventQueue.invokeLater(new Runnable() {\n            public void run() {\n                new NewJFrame().setVisible(true);\n                 try {\n                // Spécifier le nom du réalisateur recherché\n                String nomRealisateur = &quot;ELaakad&quot;;\n\n                // Créer un parseur de document XML\n                DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();\n                DocumentBuilder builder = factory.newDocumentBuilder();\n\n                // Charger le document XML dans un objet Document\n                Document document = builder.parse(new File(&quot;Catalogue.xml&quot;));\n\n                // Obtenir une liste des éléments &quot;film&quot; dans le document\n                NodeList films = document.getElementsByTagName(&quot;film&quot;);\n\n                // Créer un modèle de liste pour les titres de films\n                DefaultListModel&lt;String&gt; listModel = new DefaultListModel&lt;String&gt;();\n\n                // Parcourir chaque élément &quot;film&quot; pour trouver ceux réalisés par le réalisateur spécifié\n                for (int i = 0; i &lt; films.getLength(); i++) {\n                    Element film = (Element) films.item(i);\n                    Element realisateur = (Element) film.getElementsByTagName(&quot;realisateur&quot;).item(0);\n\n                    // Vérifier si le réalisateur correspond à celui recherché\n                    if (realisateur.getAttribute(&quot;ref&quot;).equals(nomRealisateur)) {\n                        String titre = film.getAttribute(&quot;titre&quot;);\n                        listModel.addElement(titre);\n                    }\n                }\n\n                // Créer une liste pour afficher les titres de films\n                JList&lt;String&gt; list = new JList&lt;String&gt;(listModel);\n\n \n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n            }\n        });\n    }\n\n}\n\n</code></pre>\n<p>but it shows those errors:</p>\n<pre><code>\njava.io.FileNotFoundException: &quot;path&quot; (The system cannot find the file specified)\n    at java.base/java.io.FileInputStream.open0(Native Method)\n    at java.base/java.io.FileInputStream.open(FileInputStream.java:216)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:157)\n    at java.base/java.io.FileInputStream.&lt;init&gt;(FileInputStream.java:111)\n    at java.base/sun.net.www.protocol.file.FileURLConnection.connect(FileURLConnection.java:86)\n    at java.base/sun.net.www.protocol.file.FileURLConnection.getInputStream(FileURLConnection.java:189)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLEntityManager.setupCurrentEntity(XMLEntityManager.java:653)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLVersionDetector.determineDocVersion(XMLVersionDetector.java:150)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:861)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:247)\n    at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:342)\n    at java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:206)\n    at NewJFrame$3.run(NewJFrame.java:132)\n    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318)\n    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:771)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:741)\n    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>i wrote the full path but it didn't work, i also copied the xml file to the build folder but it didn't work\nthe code above is about a user interface using swing to read data from an xml file using DOM API .</p>\n"},{"tags":["java","swing","look-and-feel","jmenu","jmenubar"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1364345029,"post_id":15648030,"comment_id":22208311,"body_markdown":"Problem may be LAF related. Using the default LAF you only need to set the background of the menubar and the menu will inherit this color since it is non-opaque. Post your SSCCE that demonstrates the problem. If you don&#39;t know what a SSCCE is you can always search the web.","body":"Problem may be LAF related. Using the default LAF you only need to set the background of the menubar and the menu will inherit this color since it is non-opaque. Post your SSCCE that demonstrates the problem. If you don&#39;t know what a SSCCE is you can always search the web."},{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":1,"creation_date":1364369711,"post_id":15648030,"comment_id":22214406,"body_markdown":"right, agreed for Nimbus L&amp;A","body":"right, agreed for Nimbus L&amp;A"}],"answers":[{"tags":[],"owner":{"account_id":2000267,"reputation":732,"user_id":1791487,"display_name":"D180"},"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1453129932,"creation_date":1364338827,"answer_id":15649006,"question_id":15648030,"body_markdown":"Create a new class that extends `JMenuBar`:\r\n\r\n    public class BackgroundMenuBar extends JMenuBar {\r\n        Color bgColor=Color.WHITE;\r\n\r\n        public void setColor(Color color) {\r\n            bgColor=color;\r\n        }\r\n        \r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            Graphics2D g2d = (Graphics2D) g;\r\n            g2d.setColor(bgColor);\r\n            g2d.fillRect(0, 0, getWidth() - 1, getHeight() - 1);\r\n\r\n        }\r\n    }\r\n\r\nNow you use this class instead of `JMenuBar` and set the background color with `setColor()`.\r\n","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>Create a new class that extends <code>JMenuBar</code>:</p>\n\n<pre><code>public class BackgroundMenuBar extends JMenuBar {\n    Color bgColor=Color.WHITE;\n\n    public void setColor(Color color) {\n        bgColor=color;\n    }\n\n    @Override\n    protected void paintComponent(Graphics g) {\n        super.paintComponent(g);\n        Graphics2D g2d = (Graphics2D) g;\n        g2d.setColor(bgColor);\n        g2d.fillRect(0, 0, getWidth() - 1, getHeight() - 1);\n\n    }\n}\n</code></pre>\n\n<p>Now you use this class instead of <code>JMenuBar</code> and set the background color with <code>setColor()</code>.</p>\n"},{"tags":[],"owner":{"account_id":1042637,"reputation":21143,"user_id":1048330,"display_name":"tenorsax"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1364338838,"creation_date":1364338838,"answer_id":15649010,"question_id":15648030,"body_markdown":"You would probably need to change opacity of menu items, ie: \r\n\r\n    JMenuItem item= new JMenuItem(&quot;Test&quot;);\r\n    item.setOpaque(true);\r\n    item.setBackground(Color.CYAN);\r\n\r\nYou can also achieve that globally using `UIManager`, for example: \r\n\r\n\tUIManager.put(&quot;MenuItem.background&quot;, Color.CYAN);\r\n\tUIManager.put(&quot;MenuItem.opaque&quot;, true);\r\n","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>You would probably need to change opacity of menu items, ie: </p>\n\n<pre><code>JMenuItem item= new JMenuItem(\"Test\");\nitem.setOpaque(true);\nitem.setBackground(Color.CYAN);\n</code></pre>\n\n<p>You can also achieve that globally using <code>UIManager</code>, for example: </p>\n\n<pre><code>UIManager.put(\"MenuItem.background\", Color.CYAN);\nUIManager.put(\"MenuItem.opaque\", true);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1364345386,"creation_date":1364345386,"answer_id":15650134,"question_id":15648030,"body_markdown":"The simplest way (I can think of) is to change the default values used by the `UIManager`.  This will effect all the menu bars and menu items in the application though...\r\n\r\n![enter image description here][1]\r\n\r\n    import java.awt.BorderLayout;\r\n    import java.awt.Color;\r\n    import java.awt.EventQueue;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JMenu;\r\n    import javax.swing.JMenuBar;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.UIManager;\r\n    import javax.swing.UnsupportedLookAndFeelException;\r\n\r\n    public class TestMenuBar {\r\n\r\n        public static void main(String[] args) {\r\n            new TestMenuBar();\r\n        }\r\n\r\n        public TestMenuBar() {\r\n            EventQueue.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n                    } catch (ClassNotFoundException ex) {\r\n                    } catch (InstantiationException ex) {\r\n                    } catch (IllegalAccessException ex) {\r\n                    } catch (UnsupportedLookAndFeelException ex) {\r\n                    }\r\n                \r\n                    UIManager.put(&quot;MenuBar.background&quot;, Color.RED);\r\n                    UIManager.put(&quot;Menu.background&quot;, Color.GREEN);\r\n                    UIManager.put(&quot;MenuItem.background&quot;, Color.MAGENTA);\r\n                \r\n                    JMenu mnu = new JMenu(&quot;Testing&quot;);\r\n                    mnu.add(&quot;Menu Item 1&quot;);\r\n                    mnu.add(&quot;Menu Item 2&quot;);\r\n                \r\n                    JMenuBar mb = new JMenuBar();\r\n                    mb.add(mnu);\r\n                    mb.add(new JMenu(&quot;Other&quot;));\r\n                \r\n                    JFrame frame = new JFrame(&quot;Test&quot;);\r\n                    frame.setJMenuBar(mb);\r\n                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n                    frame.setLayout(new BorderLayout());\r\n                    frame.add(new JPanel());\r\n                    frame.pack();\r\n                    frame.setLocationRelativeTo(null);\r\n                    frame.setVisible(true);\r\n                }\r\n\r\n            });\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/JvTcA.png","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>The simplest way (I can think of) is to change the default values used by the <code>UIManager</code>.  This will effect all the menu bars and menu items in the application though...</p>\n\n<p><img src=\"https://i.stack.imgur.com/JvTcA.png\" alt=\"enter image description here\"></p>\n\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.EventQueue;\nimport javax.swing.JFrame;\nimport javax.swing.JMenu;\nimport javax.swing.JMenuBar;\nimport javax.swing.JPanel;\nimport javax.swing.UIManager;\nimport javax.swing.UnsupportedLookAndFeelException;\n\npublic class TestMenuBar {\n\n    public static void main(String[] args) {\n        new TestMenuBar();\n    }\n\n    public TestMenuBar() {\n        EventQueue.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                try {\n                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n                } catch (ClassNotFoundException ex) {\n                } catch (InstantiationException ex) {\n                } catch (IllegalAccessException ex) {\n                } catch (UnsupportedLookAndFeelException ex) {\n                }\n\n                UIManager.put(\"MenuBar.background\", Color.RED);\n                UIManager.put(\"Menu.background\", Color.GREEN);\n                UIManager.put(\"MenuItem.background\", Color.MAGENTA);\n\n                JMenu mnu = new JMenu(\"Testing\");\n                mnu.add(\"Menu Item 1\");\n                mnu.add(\"Menu Item 2\");\n\n                JMenuBar mb = new JMenuBar();\n                mb.add(mnu);\n                mb.add(new JMenu(\"Other\"));\n\n                JFrame frame = new JFrame(\"Test\");\n                frame.setJMenuBar(mb);\n                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n                frame.setLayout(new BorderLayout());\n                frame.add(new JPanel());\n                frame.pack();\n                frame.setLocationRelativeTo(null);\n                frame.setVisible(true);\n            }\n\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2628848,"reputation":11,"user_id":2275303,"display_name":"Moonbeam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1365785230,"creation_date":1365785230,"answer_id":15976776,"question_id":15648030,"body_markdown":"Mine only worked when I changed:\r\n\r\n        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\r\n\r\nto:\r\n\r\n        UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\r\n\r\n\r\nOtherwise, the colors remained the same.","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>Mine only worked when I changed:</p>\n\n<pre><code>    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>    UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());\n</code></pre>\n\n<p>Otherwise, the colors remained the same.</p>\n"},{"tags":[],"owner":{"account_id":11363114,"reputation":270,"user_id":8330772,"display_name":"bhavna garg"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1500532308,"creation_date":1500532308,"answer_id":45206881,"question_id":15648030,"body_markdown":"Simple way to do is by `.setBackground(Color.RED)` and `setOpaque(true)`\r\n\r\n   `menubar.setBackground(Color.RED);\r\n\tmenu.setBackground(Color.yellow);\r\n    menubar.setOpaque(true);\r\n\tmenu.setOpaque(true);`\r\n\r\nThis will give the color of your choices to both the menubar and menu.\r\n","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>Simple way to do is by <code>.setBackground(Color.RED)</code> and <code>setOpaque(true)</code></p>\n\n<p><code>menubar.setBackground(Color.RED);\n    menu.setBackground(Color.yellow);\n    menubar.setOpaque(true);\n    menu.setOpaque(true);</code></p>\n\n<p>This will give the color of your choices to both the menubar and menu.</p>\n"},{"tags":[],"owner":{"display_name":"user1831387"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567490410,"creation_date":1565424021,"answer_id":57440423,"question_id":15648030,"body_markdown":"It&#39;s very simple.\r\n\r\n**Here&#39;s the code:**  \r\n\r\n    menu.setBackground(Color.DARK_GRAY);\r\nSimilarly you can add your own color like `GREEN, BLUE, DARK_GRAY, LIGHT_GRAY, BLACK, RED, etc..`\r\n\r\nThis is the only simple way to change any color of any component in java.\r\n\r\n**Note:** This is applicable for all components in Java Swing only. it is useless in JavaFX, JFace, SWT but not AWT and Swing\r\n\r\nThank you,\r\n\r\nDereck Smith","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>It's very simple.</p>\n\n<p><strong>Here's the code:</strong>  </p>\n\n<pre><code>menu.setBackground(Color.DARK_GRAY);\n</code></pre>\n\n<p>Similarly you can add your own color like <code>GREEN, BLUE, DARK_GRAY, LIGHT_GRAY, BLACK, RED, etc..</code></p>\n\n<p>This is the only simple way to change any color of any component in java.</p>\n\n<p><strong>Note:</strong> This is applicable for all components in Java Swing only. it is useless in JavaFX, JFace, SWT but not AWT and Swing</p>\n\n<p>Thank you,</p>\n\n<p>Dereck Smith</p>\n"},{"tags":[],"owner":{"account_id":18071349,"reputation":11,"user_id":13135936,"display_name":"Joaquin Gutierrez"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585332978,"creation_date":1585320410,"answer_id":60888341,"question_id":15648030,"body_markdown":"    public void run() {\r\n\r\n         UIManager.put(&quot;MenuBar.background&quot;, new java.awt.Color(255, 245, 157));\r\n         UIManager.put(&quot;MenuBar.opaque&quot;, true);                \r\n         UIManager.put(&quot;Menu.background&quot;, new java.awt.Color(255, 245, 157));\r\n         UIManager.put(&quot;Menu.opaque&quot;, true);\r\n         UIManager.put(&quot;MenuItem.background&quot;,new java.awt.Color(255, 245, 157));\r\n         UIManager.put(&quot;MenuItem.opaque&quot;, true);\r\n         new MenuPrincipal().setVisible(true);\r\n\r\n    }\r\n\r\nThe menubar does not change color, but the rest do (menu and menuitem)\r\n","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<pre><code>public void run() {\n\n     UIManager.put(\"MenuBar.background\", new java.awt.Color(255, 245, 157));\n     UIManager.put(\"MenuBar.opaque\", true);                \n     UIManager.put(\"Menu.background\", new java.awt.Color(255, 245, 157));\n     UIManager.put(\"Menu.opaque\", true);\n     UIManager.put(\"MenuItem.background\",new java.awt.Color(255, 245, 157));\n     UIManager.put(\"MenuItem.opaque\", true);\n     new MenuPrincipal().setVisible(true);\n\n}\n</code></pre>\n\n<p>The menubar does not change color, but the rest do (menu and menuitem)</p>\n"}],"owner":{"account_id":1906124,"reputation":2368,"user_id":1720972,"accept_rate":98,"display_name":"KernelPanic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49395,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":15649006,"answer_count":7,"score":4,"last_activity_date":1681272353,"creation_date":1364334524,"question_id":15648030,"body_markdown":"How can I set custom background color for `JMenuBar` and `JMenu` objects inside it? I tried `.setBackgroundColor` and it does not work!","title":"Change background and text color of JMenuBar and JMenu objects inside it","body":"<p>How can I set custom background color for <code>JMenuBar</code> and <code>JMenu</code> objects inside it? I tried <code>.setBackgroundColor</code> and it does not work!</p>\n"},{"tags":["java","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1627597536,"post_id":68582251,"comment_id":121205984,"body_markdown":"Have you tried to `seekToBeginning`?","body":"Have you tried to <code>seekToBeginning</code>?"},{"owner":{"account_id":19843435,"reputation":11,"user_id":14535747,"display_name":"drugzverya"},"score":0,"creation_date":1627624730,"post_id":68582251,"comment_id":121210380,"body_markdown":"@OneCricketeer, No, I don&#39;t know kafka so deeply, how do I do this?","body":"@OneCricketeer, No, I don&#39;t know kafka so deeply, how do I do this?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1627654635,"post_id":68582251,"comment_id":121221530,"body_markdown":"That is a method on a Consumer instance. See example here https://stackoverflow.com/questions/40352008/spring-kafka-how-to-read-one-topic-from-the-beginning-while-reading-another-o","body":"That is a method on a Consumer instance. See example here <a href=\"https://stackoverflow.com/questions/40352008/spring-kafka-how-to-read-one-topic-from-the-beginning-while-reading-another-o\" title=\"spring kafka how to read one topic from the beginning while reading another o\">stackoverflow.com/questions/40352008/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15772011,"reputation":171,"user_id":11380784,"display_name":"Abinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627597362,"creation_date":1627591618,"answer_id":68582605,"question_id":68582251,"body_markdown":"I think as per your requirement you can set the offset value as **Earliest** , so that it can consumed from beginning.\r\n\r\nFor more details for offset you can visit this article which explains what value you can set offset value to[ \\[https://dzone.com/articles/apache-kafka-consumer-group-offset-retention\\]][1]\r\n\r\n\r\n  [1]: https://dzone.com/articles/apache-kafka-consumer-group-offset-retention","title":"How to reset the offset value to re-read the kafka topic","body":"<p>I think as per your requirement you can set the offset value as <strong>Earliest</strong> , so that it can consumed from beginning.</p>\n<p>For more details for offset you can visit this article which explains what value you can set offset value to<a href=\"https://dzone.com/articles/apache-kafka-consumer-group-offset-retention\" rel=\"nofollow noreferrer\"> [https://dzone.com/articles/apache-kafka-consumer-group-offset-retention]</a></p>\n"},{"tags":[],"owner":{"account_id":192641,"reputation":319,"user_id":433900,"display_name":"Nico de Wet"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681271317,"creation_date":1681271317,"answer_id":75991757,"question_id":68582251,"body_markdown":"Shut down all consumers in your consumer group then do this:\r\n\r\n    $ kafka-consumer-groups --bootstrap-server kafka:9092 --group my-special-consumer --topic car-positions --reset-offsets --to-earliest","title":"How to reset the offset value to re-read the kafka topic","body":"<p>Shut down all consumers in your consumer group then do this:</p>\n<pre><code>$ kafka-consumer-groups --bootstrap-server kafka:9092 --group my-special-consumer --topic car-positions --reset-offsets --to-earliest\n</code></pre>\n"}],"owner":{"account_id":19843435,"reputation":11,"user_id":14535747,"display_name":"drugzverya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1461,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681271317,"creation_date":1627589185,"question_id":68582251,"body_markdown":"There is a situation when **Consumer1** reads messages from a kafka topic. When connecting the second **Consumer2** with the same **groupId**, there is a rebalance of partitions.  Is it possible to somehow reset the **offset**, so that after the rebalance process, both **Consumers** read the topic from the beginning?","title":"How to reset the offset value to re-read the kafka topic","body":"<p>There is a situation when <strong>Consumer1</strong> reads messages from a kafka topic. When connecting the second <strong>Consumer2</strong> with the same <strong>groupId</strong>, there is a rebalance of partitions.  Is it possible to somehow reset the <strong>offset</strong>, so that after the rebalance process, both <strong>Consumers</strong> read the topic from the beginning?</p>\n"},{"tags":["java","box2d","jbox2d"],"owner":{"account_id":16822158,"reputation":101,"user_id":12842744,"display_name":"MED_M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681271293,"creation_date":1681271293,"question_id":75991755,"body_markdown":"I&#39;m trying to create a body with a fixture in jbox2d TestBed, the fixture has 9 vertices.\r\nWhen I try to run the test I get the following error: \r\n```\r\nException in thread &quot;Testbed&quot; java.lang.ArrayIndexOutOfBoundsException: 8\r\n\tat org.jbox2d.collision.Distance$DistanceProxy.set(Distance.java:510)\r\n\tat org.jbox2d.dynamics.World.solveTOI(World.java:1326)\r\n\tat org.jbox2d.dynamics.World.step(World.java:642)\r\n\tat org.jbox2d.testbed.framework.TestbedTest.step(TestbedTest.java:447)\r\n\tat org.jbox2d.testbed.tests.FixtureTest.step(FixtureTest.java:34)\r\n\tat org.jbox2d.testbed.framework.AbstractTestbedController.updateTest(AbstractTestbedController.java:274)\r\n\tat org.jbox2d.testbed.framework.AbstractTestbedController.render(AbstractTestbedController.java:406)\r\n\tat org.jbox2d.testbed.framework.AbstractTestbedController.stepAndRender(AbstractTestbedController.java:392)\r\n\tat org.jbox2d.testbed.framework.TestbedController.stepAndRender(TestbedController.java:68)\r\n\tat org.jbox2d.testbed.framework.TestbedController.run(TestbedController.java:62)\r\n\tat java.lang.Thread.run(Thread.java:745)\r\n```\r\nThis error only occurs when I change the limit of vertices. If I don&#39;t change it, when I run the test, I get a fixture with only 8 vertices, the last vertex of the array is ignored.\r\n[![enter image description here](https://i.stack.imgur.com/4SKwz.png)](https://i.stack.imgur.com/4SKwz.png)\r\n\r\n\r\n\r\nHere is what I am doing for creating the fixture, I can&#39;t figure out what I&#39;m doing wrong:\r\n```\r\n        Settings.maxPolygonVertices = 20;\r\n\r\n        BodyDef myBodyDef = new BodyDef();\r\n        myBodyDef2.type = BodyType.DYNAMIC;\r\n        myBodyDef2.position.set(new Vec2(2,0.925F));\r\n        \r\n        Body egg = m_world.createBody(myBodyDef);        \r\n        \r\n        vertices = new Vec2[9];\r\n        vertices[0] = new Vec2(-0.1f,0.4f);\r\n        vertices[1] = new Vec2(-0.2f,0.3f);\r\n        vertices[2] = new Vec2(-0.3f,0.1f);\r\n        vertices[3] = new Vec2(-0.3f,-0.1f);\r\n        vertices[4] = new Vec2(-0.2f,-0.3f);\r\n        vertices[5] = new Vec2(0.1f,-0.3f);\r\n        vertices[6] = new Vec2(0.2f,-0.1f);\r\n        vertices[7] = new Vec2(0.2f,0.1f);\r\n        vertices[8] = new Vec2(0.1f,0.3f);\r\n\r\n        PolygonShape myPolygonShape = new PolygonShape();\r\n        myPolygonShape.set(vertices, 9);\r\n\r\n        FixtureDef myFixtureDef = new FixtureDef();\r\n        myFixtureDef.shape = myPolygonShape;\r\n        myFixtureDef.restitution = 0.4f;\r\n        myFixtureDef.density = 1;\r\n        myFixtureDef.friction = 1f;\r\n        egg.createFixture(myFixtureDef);\r\n```","title":"OutOfBounds Exception when creating a PolygonShape using jbox2d","body":"<p>I'm trying to create a body with a fixture in jbox2d TestBed, the fixture has 9 vertices.\nWhen I try to run the test I get the following error:</p>\n<pre><code>Exception in thread &quot;Testbed&quot; java.lang.ArrayIndexOutOfBoundsException: 8\n    at org.jbox2d.collision.Distance$DistanceProxy.set(Distance.java:510)\n    at org.jbox2d.dynamics.World.solveTOI(World.java:1326)\n    at org.jbox2d.dynamics.World.step(World.java:642)\n    at org.jbox2d.testbed.framework.TestbedTest.step(TestbedTest.java:447)\n    at org.jbox2d.testbed.tests.FixtureTest.step(FixtureTest.java:34)\n    at org.jbox2d.testbed.framework.AbstractTestbedController.updateTest(AbstractTestbedController.java:274)\n    at org.jbox2d.testbed.framework.AbstractTestbedController.render(AbstractTestbedController.java:406)\n    at org.jbox2d.testbed.framework.AbstractTestbedController.stepAndRender(AbstractTestbedController.java:392)\n    at org.jbox2d.testbed.framework.TestbedController.stepAndRender(TestbedController.java:68)\n    at org.jbox2d.testbed.framework.TestbedController.run(TestbedController.java:62)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n<p>This error only occurs when I change the limit of vertices. If I don't change it, when I run the test, I get a fixture with only 8 vertices, the last vertex of the array is ignored.\n<a href=\"https://i.stack.imgur.com/4SKwz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4SKwz.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is what I am doing for creating the fixture, I can't figure out what I'm doing wrong:</p>\n<pre><code>        Settings.maxPolygonVertices = 20;\n\n        BodyDef myBodyDef = new BodyDef();\n        myBodyDef2.type = BodyType.DYNAMIC;\n        myBodyDef2.position.set(new Vec2(2,0.925F));\n        \n        Body egg = m_world.createBody(myBodyDef);        \n        \n        vertices = new Vec2[9];\n        vertices[0] = new Vec2(-0.1f,0.4f);\n        vertices[1] = new Vec2(-0.2f,0.3f);\n        vertices[2] = new Vec2(-0.3f,0.1f);\n        vertices[3] = new Vec2(-0.3f,-0.1f);\n        vertices[4] = new Vec2(-0.2f,-0.3f);\n        vertices[5] = new Vec2(0.1f,-0.3f);\n        vertices[6] = new Vec2(0.2f,-0.1f);\n        vertices[7] = new Vec2(0.2f,0.1f);\n        vertices[8] = new Vec2(0.1f,0.3f);\n\n        PolygonShape myPolygonShape = new PolygonShape();\n        myPolygonShape.set(vertices, 9);\n\n        FixtureDef myFixtureDef = new FixtureDef();\n        myFixtureDef.shape = myPolygonShape;\n        myFixtureDef.restitution = 0.4f;\n        myFixtureDef.density = 1;\n        myFixtureDef.friction = 1f;\n        egg.createFixture(myFixtureDef);\n</code></pre>\n"},{"tags":["java","spring-boot","flyway"],"comments":[{"owner":{"account_id":4508521,"reputation":193,"user_id":3665297,"display_name":"Folger Fonseca"},"score":0,"creation_date":1613636646,"post_id":58498265,"comment_id":117137390,"body_markdown":"did you have any luck with this issue? or did you find any workaround, I have exactly the same issue.","body":"did you have any luck with this issue? or did you find any workaround, I have exactly the same issue."},{"owner":{"account_id":1360000,"reputation":1952,"user_id":1297546,"accept_rate":52,"display_name":"Elderry"},"score":0,"creation_date":1613703549,"post_id":58498265,"comment_id":117164133,"body_markdown":"@FolgerFonseca I solved this by finding a way to modify `SomeDAO`, which breaks the limitation set by the question...","body":"@FolgerFonseca I solved this by finding a way to modify <code>SomeDAO</code>, which breaks the limitation set by the question..."}],"answers":[{"tags":[],"owner":{"account_id":8661823,"reputation":61,"user_id":6483882,"display_name":"NoamK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571748870,"creation_date":1571748870,"answer_id":58504807,"question_id":58498265,"body_markdown":"Did not look down the stack, but I guess Flyway as a migration tool does not want you to have the data structured while changing it...\r\n\r\nOther (non data access) services are injected and can be used.\r\n\r\nYou get the database connection from the context to change it using jdbc template.","title":"Using JdbcTemplate in Flyway&#39;s Java migration files causes dependency cycle","body":"<p>Did not look down the stack, but I guess Flyway as a migration tool does not want you to have the data structured while changing it...</p>\n\n<p>Other (non data access) services are injected and can be used.</p>\n\n<p>You get the database connection from the context to change it using jdbc template.</p>\n"},{"tags":[],"owner":{"account_id":5080299,"reputation":3548,"user_id":4076606,"display_name":"Mateusz Stefek"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571794905,"creation_date":1571794905,"answer_id":58514312,"question_id":58498265,"body_markdown":"This is how Spring Boot decided to integrate Flyway.\r\nIn the default autoconfiguration, you cannot do anything with the database before the Flyway migration is done. This is a sensible, but opinionated choice.\r\n\r\nTake a look at the source code of [FlywayAutoConfiguration][1]. There&#39;s a rather nasty trick to ensure that noone can use JdbcTemplate before Flyway is ready:\r\n```\r\n\t\t/**\r\n\t\t * Additional configuration to ensure that {@link JdbcOperations} beans depend on\r\n\t\t * the {@code flywayInitializer} bean.\r\n\t\t */\r\n\t\t@Configuration\r\n\t\t@ConditionalOnClass(JdbcOperations.class)\r\n\t\t@ConditionalOnBean(JdbcOperations.class)\r\n\t\tprotected static class FlywayInitializerJdbcOperationsDependencyConfiguration\r\n\t\t\t\textends JdbcOperationsDependsOnPostProcessor {\r\n\r\n\t\t\tpublic FlywayInitializerJdbcOperationsDependencyConfiguration() {\r\n\t\t\t\tsuper(&quot;flywayInitializer&quot;);\r\n\t\t\t}\r\n\r\n\t\t}\r\n```\r\n\r\nTo achieve your goals, you will have to disable this autoconfiguration (`spring.autoconfigure.exclude`) and write the Flyway configuration yourself. You can start with the source code of `FlywayAutoConfiguration`, but with the tricky methods removed.\r\n\r\nHowever, you will have to add a similar dependency trick, to ensure that your services/jobs are started only after your custom Flyway is ready.\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/blob/2.0.x/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration.java#L211","title":"Using JdbcTemplate in Flyway&#39;s Java migration files causes dependency cycle","body":"<p>This is how Spring Boot decided to integrate Flyway.\nIn the default autoconfiguration, you cannot do anything with the database before the Flyway migration is done. This is a sensible, but opinionated choice.</p>\n\n<p>Take a look at the source code of <a href=\"https://github.com/spring-projects/spring-boot/blob/2.0.x/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration.java#L211\" rel=\"nofollow noreferrer\">FlywayAutoConfiguration</a>. There's a rather nasty trick to ensure that noone can use JdbcTemplate before Flyway is ready:</p>\n\n<pre><code>        /**\n         * Additional configuration to ensure that {@link JdbcOperations} beans depend on\n         * the {@code flywayInitializer} bean.\n         */\n        @Configuration\n        @ConditionalOnClass(JdbcOperations.class)\n        @ConditionalOnBean(JdbcOperations.class)\n        protected static class FlywayInitializerJdbcOperationsDependencyConfiguration\n                extends JdbcOperationsDependsOnPostProcessor {\n\n            public FlywayInitializerJdbcOperationsDependencyConfiguration() {\n                super(\"flywayInitializer\");\n            }\n\n        }\n</code></pre>\n\n<p>To achieve your goals, you will have to disable this autoconfiguration (<code>spring.autoconfigure.exclude</code>) and write the Flyway configuration yourself. You can start with the source code of <code>FlywayAutoConfiguration</code>, but with the tricky methods removed.</p>\n\n<p>However, you will have to add a similar dependency trick, to ensure that your services/jobs are started only after your custom Flyway is ready.</p>\n"},{"tags":[],"owner":{"account_id":16342236,"reputation":111,"user_id":11802878,"display_name":"runtime_expection"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1573119099,"creation_date":1573119099,"answer_id":58745700,"question_id":58498265,"body_markdown":"I was excited about this feature as well, and was very disappointed to find out that it is not possible to autowire classes which in some way are dependent on persistence layer.\r\nBut the solution described in https://stackoverflow.com/questions/48214783/flyway-spring-boot-autowired-beans-with-jpa-dependency still works:\r\n\r\nFirst extend `FlywayConfiguration`:\r\n\r\n    @Configuration\r\n    @ComponentScan\r\n    @ConditionalOnProperty(prefix = &quot;spring.flyway&quot;, name = &quot;enabled&quot;, matchIfMissing = true)\r\n    class DatabaseMigrationConfiguration extends FlywayConfiguration {\r\n    \r\n    \t@Override\r\n    \tpublic Flyway flyway(FlywayProperties properties, DataSourceProperties dataSourceProperties,\r\n    \t\tResourceLoader resourceLoader, ObjectProvider&lt;DataSource&gt; dataSource,\r\n    \t\tObjectProvider&lt;DataSource&gt; flywayDataSource,\r\n    \t\tObjectProvider&lt;FlywayConfigurationCustomizer&gt; fluentConfigurationCustomizers,\r\n    \t\tObjectProvider&lt;JavaMigration&gt; javaMigrations,\r\n    \t\tObjectProvider&lt;Callback&gt; callbacks) {\r\n    \t\treturn super.flyway(properties, dataSourceProperties, resourceLoader, dataSource, flywayDataSource, fluentConfigurationCustomizers,\r\n    \t\t\tjavaMigrations, callbacks);\r\n    \t}\r\n    \r\n    \t@Primary\r\n    \t@Bean(name = &quot;flywayInitializer&quot;)\r\n    \t@DependsOn({ &quot;springUtility&quot; })\r\n    \t@ConditionalOnProperty(prefix = &quot;spring.flyway&quot;, name = &quot;enabled&quot;, matchIfMissing = true)\r\n    \tpublic FlywayMigrationInitializer flywayInitializer(Flyway flyway,\r\n    \t\tObjectProvider&lt;FlywayMigrationStrategy&gt; migrationStrategy) {\r\n    \t\treturn super.flywayInitializer(flyway, migrationStrategy);\r\n    \t}\r\n\r\nSecond, create this Class to get a Bean from application context:\r\n\r\n    @Component\r\n    public class SpringUtility implements ApplicationContextAware {\r\n    \r\n        @Autowired\r\n        private static ApplicationContext applicationContext;\r\n    \r\n        public void setApplicationContext(final ApplicationContext applicationContext) {\r\n            this.applicationContext = applicationContext;\r\n        }\r\n    \r\n        /*\r\n    \t\tGet a class bean from the application context\r\n    \t */\r\n        static &lt;T&gt; T getBean(final Class&lt;T&gt; clazz) {\r\n            return applicationContext.getBean(clazz);\r\n        }\r\n\r\nNow you can use this class in your java migration class (`extends BaseJavaMigration`) to get any Bean you want.","title":"Using JdbcTemplate in Flyway&#39;s Java migration files causes dependency cycle","body":"<p>I was excited about this feature as well, and was very disappointed to find out that it is not possible to autowire classes which in some way are dependent on persistence layer.\nBut the solution described in <a href=\"https://stackoverflow.com/questions/48214783/flyway-spring-boot-autowired-beans-with-jpa-dependency\">Flyway Spring Boot Autowired Beans with JPA Dependency</a> still works:</p>\n\n<p>First extend <code>FlywayConfiguration</code>:</p>\n\n<pre><code>@Configuration\n@ComponentScan\n@ConditionalOnProperty(prefix = \"spring.flyway\", name = \"enabled\", matchIfMissing = true)\nclass DatabaseMigrationConfiguration extends FlywayConfiguration {\n\n    @Override\n    public Flyway flyway(FlywayProperties properties, DataSourceProperties dataSourceProperties,\n        ResourceLoader resourceLoader, ObjectProvider&lt;DataSource&gt; dataSource,\n        ObjectProvider&lt;DataSource&gt; flywayDataSource,\n        ObjectProvider&lt;FlywayConfigurationCustomizer&gt; fluentConfigurationCustomizers,\n        ObjectProvider&lt;JavaMigration&gt; javaMigrations,\n        ObjectProvider&lt;Callback&gt; callbacks) {\n        return super.flyway(properties, dataSourceProperties, resourceLoader, dataSource, flywayDataSource, fluentConfigurationCustomizers,\n            javaMigrations, callbacks);\n    }\n\n    @Primary\n    @Bean(name = \"flywayInitializer\")\n    @DependsOn({ \"springUtility\" })\n    @ConditionalOnProperty(prefix = \"spring.flyway\", name = \"enabled\", matchIfMissing = true)\n    public FlywayMigrationInitializer flywayInitializer(Flyway flyway,\n        ObjectProvider&lt;FlywayMigrationStrategy&gt; migrationStrategy) {\n        return super.flywayInitializer(flyway, migrationStrategy);\n    }\n</code></pre>\n\n<p>Second, create this Class to get a Bean from application context:</p>\n\n<pre><code>@Component\npublic class SpringUtility implements ApplicationContextAware {\n\n    @Autowired\n    private static ApplicationContext applicationContext;\n\n    public void setApplicationContext(final ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n    /*\n        Get a class bean from the application context\n     */\n    static &lt;T&gt; T getBean(final Class&lt;T&gt; clazz) {\n        return applicationContext.getBean(clazz);\n    }\n</code></pre>\n\n<p>Now you can use this class in your java migration class (<code>extends BaseJavaMigration</code>) to get any Bean you want.</p>\n"},{"tags":[],"owner":{"account_id":28280946,"reputation":1,"user_id":21622604,"display_name":"ronkou"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681271239,"creation_date":1681271239,"answer_id":75991750,"question_id":58498265,"body_markdown":"In my case, \r\n1. I used @Lazy annotation to make related beans lazily initialized,\r\n2. add spring config :`allow-circular-references: true` to applition yml\r\nthen flyway can start and process successfully.\r\n\r\nAnd this is what I found why and how flyway cause cycle references:\r\n\r\nLike the above answers said, Flyway migrate supports changing table structure DDLs so does not want you to inject jpa beans when doing migrate.\r\n\r\nSpring (my version 2.7.9) has FlywayAutoConfiguration annotated with `@Import(DatabaseInitializationDependencyConfigurer.class)`, the generated datasource config will depends on flyway and flywayInitlizer, and make datasource initialization must happens after flyway completed.\r\n\r\n But sometimes we need this to be able to do things like insert or update data(my case) in java code. with the help of flyway, we can benefit of both auto sql migrate and customized java code.","title":"Using JdbcTemplate in Flyway&#39;s Java migration files causes dependency cycle","body":"<p>In my case,</p>\n<ol>\n<li>I used @Lazy annotation to make related beans lazily initialized,</li>\n<li>add spring config :<code>allow-circular-references: true</code> to applition yml\nthen flyway can start and process successfully.</li>\n</ol>\n<p>And this is what I found why and how flyway cause cycle references:</p>\n<p>Like the above answers said, Flyway migrate supports changing table structure DDLs so does not want you to inject jpa beans when doing migrate.</p>\n<p>Spring (my version 2.7.9) has FlywayAutoConfiguration annotated with <code>@Import(DatabaseInitializationDependencyConfigurer.class)</code>, the generated datasource config will depends on flyway and flywayInitlizer, and make datasource initialization must happens after flyway completed.</p>\n<p>But sometimes we need this to be able to do things like insert or update data(my case) in java code. with the help of flyway, we can benefit of both auto sql migrate and customized java code.</p>\n"}],"owner":{"account_id":1360000,"reputation":1952,"user_id":1297546,"accept_rate":52,"display_name":"Elderry"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1772,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":4,"score":6,"last_activity_date":1681271239,"creation_date":1571725823,"question_id":58498265,"body_markdown":"Since version 6.*, Flyway supports Spring bean injection into java migration files with `JavaMigration` interface implemented. Here is my example:\r\n```\r\n@Component\r\npublic class V1_201809261821__some_migration extends BaseJavaMigration {\r\n\r\n    @Autowired\r\n    private SomeDAO someDAO;\r\n\r\n    @Override\r\n    public void migrate(Context context) throws Exception {\r\n        someDAO.doSomething();\r\n    }\r\n}\r\n```\r\nWhen startup, it complains that:\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nThe dependencies of some of the beans in the application context form a cycle:\r\n\r\n   v1_201809261821__some_migration (field private SomeDAO V1_201809261821__some_migration.someDAO)\r\n┌─────┐\r\n|  someDAO (field private org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate someDAO.namedParameterJdbcTemplate)\r\n↑     ↓\r\n|  flywayInitializer defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]\r\n↑     ↓\r\n|  flyway defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]\r\n↑     ↓\r\n|  v1_201809261821__some_migration (field private SomeDAO V1_201809261821__some_migration.someDAO)\r\n└─────┘\r\n```\r\nIt seems that I can&#39;t use `JdbcTemplate` in Java migration files, [Flyway&#39;s document](https://flywaydb.org/documentation/migrations#spring) shows that I can construct my own `JdbcTemplate` using `Context` like:\r\n```\r\npublic void migrate(Context context) {\r\n        new JdbcTemplate(new SingleConnectionDataSource(context.getConnection(), true))\r\n                .execute(&quot;INSERT INTO test_user (name) VALUES (&#39;Obelix&#39;)&quot;);\r\n}\r\n```\r\nBut unfortunately I have no control of `SomeDAO`, it&#39;s from another module I can&#39;t touch.\r\n\r\nRelated versions:\r\n\r\n- Flyway: 6.0.6\r\n\r\n- Spring Boot: 2.2.0","title":"Using JdbcTemplate in Flyway&#39;s Java migration files causes dependency cycle","body":"<p>Since version 6.*, Flyway supports Spring bean injection into java migration files with <code>JavaMigration</code> interface implemented. Here is my example:</p>\n\n<pre><code>@Component\npublic class V1_201809261821__some_migration extends BaseJavaMigration {\n\n    @Autowired\n    private SomeDAO someDAO;\n\n    @Override\n    public void migrate(Context context) throws Exception {\n        someDAO.doSomething();\n    }\n}\n</code></pre>\n\n<p>When startup, it complains that:</p>\n\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nThe dependencies of some of the beans in the application context form a cycle:\n\n   v1_201809261821__some_migration (field private SomeDAO V1_201809261821__some_migration.someDAO)\n┌─────┐\n|  someDAO (field private org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate someDAO.namedParameterJdbcTemplate)\n↑     ↓\n|  flywayInitializer defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]\n↑     ↓\n|  flyway defined in class path resource [org/springframework/boot/autoconfigure/flyway/FlywayAutoConfiguration$FlywayConfiguration.class]\n↑     ↓\n|  v1_201809261821__some_migration (field private SomeDAO V1_201809261821__some_migration.someDAO)\n└─────┘\n</code></pre>\n\n<p>It seems that I can't use <code>JdbcTemplate</code> in Java migration files, <a href=\"https://flywaydb.org/documentation/migrations#spring\" rel=\"noreferrer\">Flyway's document</a> shows that I can construct my own <code>JdbcTemplate</code> using <code>Context</code> like:</p>\n\n<pre><code>public void migrate(Context context) {\n        new JdbcTemplate(new SingleConnectionDataSource(context.getConnection(), true))\n                .execute(\"INSERT INTO test_user (name) VALUES ('Obelix')\");\n}\n</code></pre>\n\n<p>But unfortunately I have no control of <code>SomeDAO</code>, it's from another module I can't touch.</p>\n\n<p>Related versions:</p>\n\n<ul>\n<li><p>Flyway: 6.0.6</p></li>\n<li><p>Spring Boot: 2.2.0</p></li>\n</ul>\n"},{"tags":["java","json","spring","spring-boot"],"owner":{"account_id":28280883,"reputation":3,"user_id":21622549,"display_name":"Army Kidung NK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681270949,"creation_date":1681269923,"question_id":75991660,"body_markdown":"I need to send get request from spring application to another spring application using resttamplate.exchange, and if I send a request like:\r\n\r\n```\r\npublic Page&lt;DenominationLogActivityResponseDto&gt; getLogActivities(String token, Integer page,\r\n      Integer limit, String sortBy, String order) {\r\n\r\n    HttpHeaders headers = addTokenHeader(token);\r\n    HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(null, headers);\r\n\r\n    UriComponents uriComponents = UriComponentsBuilder.fromHttpUrl(\r\n            masterUrl + &quot;/denomination/log?page={page}&amp;limit={limit}&amp;order={order}&amp;sortBy{sortBy}&quot;)\r\n        .queryParam(&quot;page&quot;, page)\r\n        .queryParam(&quot;limit&quot;, limit)\r\n        .queryParam(&quot;order&quot;, order)\r\n        .queryParam(&quot;sortBy&quot;, sortBy)\r\n        .build();\r\n    ResponseEntity&lt;BaseResponse&lt;Page&lt;DenominationLogActivityResponseDto&gt;&gt;&gt; logActivityResponse =\r\n        restTemplate.exchange(\r\n            uriComponents.toUriString(),\r\n            HttpMethod.GET,\r\n            httpEntity,\r\n            new ParameterizedTypeReference&lt;&gt;() {\r\n            }, page, limit, order, sortBy);\r\n    if (!logActivityResponse.getStatusCode().is2xxSuccessful()) {\r\n      throw new TransactionException(\r\n          logActivityResponse.getBody().getStatus(),\r\n          logActivityResponse.getBody().getMessage(),\r\n          logActivityResponse.getBody().getErrorMessage());\r\n    }\r\n    return logActivityResponse.getBody().getData();\r\n  }\r\n```\r\n\r\nto another spring apps:\r\n\r\n\r\n```\r\n\t@GetMapping(&quot;/log&quot;)\r\n\tpublic ResponseEntity&lt;?&gt; getViewTableDenomination(@RequestParam(required = false) Integer page,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@RequestParam(required = false) Integer limit,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@RequestParam(required = false) String sortBy,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t@RequestParam(required = false) String order) {\r\n\t\t\r\n\t\tPage&lt;ViewTableResponseDto&gt; data = service.getDenominationViewTable(page, limit, sortBy, order);\r\n\t\t\r\n\t\tBaseResponse&lt;Page&lt;ViewTableResponseDto&gt;&gt; response = new BaseResponse&lt;&gt;(\r\n\t\t\t\tString.valueOf(HttpStatus.OK.value()),\r\n\t\t\t\t&quot;Success&quot;,\r\n\t\t\t\tnull,\r\n\t\t\t\tdata\r\n\t\t);\r\n\t\t\r\n\t\treturn ResponseEntity.ok(response);\r\n\t}\r\n```\r\n\r\nI got an error saying:\r\n\r\n\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Page` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\r\n```","title":"Passing Spring Page in get request","body":"<p>I need to send get request from spring application to another spring application using resttamplate.exchange, and if I send a request like:</p>\n<pre><code>public Page&lt;DenominationLogActivityResponseDto&gt; getLogActivities(String token, Integer page,\n      Integer limit, String sortBy, String order) {\n\n    HttpHeaders headers = addTokenHeader(token);\n    HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(null, headers);\n\n    UriComponents uriComponents = UriComponentsBuilder.fromHttpUrl(\n            masterUrl + &quot;/denomination/log?page={page}&amp;limit={limit}&amp;order={order}&amp;sortBy{sortBy}&quot;)\n        .queryParam(&quot;page&quot;, page)\n        .queryParam(&quot;limit&quot;, limit)\n        .queryParam(&quot;order&quot;, order)\n        .queryParam(&quot;sortBy&quot;, sortBy)\n        .build();\n    ResponseEntity&lt;BaseResponse&lt;Page&lt;DenominationLogActivityResponseDto&gt;&gt;&gt; logActivityResponse =\n        restTemplate.exchange(\n            uriComponents.toUriString(),\n            HttpMethod.GET,\n            httpEntity,\n            new ParameterizedTypeReference&lt;&gt;() {\n            }, page, limit, order, sortBy);\n    if (!logActivityResponse.getStatusCode().is2xxSuccessful()) {\n      throw new TransactionException(\n          logActivityResponse.getBody().getStatus(),\n          logActivityResponse.getBody().getMessage(),\n          logActivityResponse.getBody().getErrorMessage());\n    }\n    return logActivityResponse.getBody().getData();\n  }\n</code></pre>\n<p>to another spring apps:</p>\n<pre><code>    @GetMapping(&quot;/log&quot;)\n    public ResponseEntity&lt;?&gt; getViewTableDenomination(@RequestParam(required = false) Integer page,\n                                                        @RequestParam(required = false) Integer limit,\n                                                        @RequestParam(required = false) String sortBy,\n                                                        @RequestParam(required = false) String order) {\n        \n        Page&lt;ViewTableResponseDto&gt; data = service.getDenominationViewTable(page, limit, sortBy, order);\n        \n        BaseResponse&lt;Page&lt;ViewTableResponseDto&gt;&gt; response = new BaseResponse&lt;&gt;(\n                String.valueOf(HttpStatus.OK.value()),\n                &quot;Success&quot;,\n                null,\n                data\n        );\n        \n        return ResponseEntity.ok(response);\n    }\n</code></pre>\n<p>I got an error saying:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `org.springframework.data.domain.Page` (no Creators, like default constructor, exist): abstract types either need to be mapped to concrete types, have custom deserializer, or contain additional type information\n</code></pre>\n"},{"tags":["java","swing","jtextpane"],"answers":[{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681270844,"creation_date":1451564478,"answer_id":34546474,"question_id":34545889,"body_markdown":"`KeyListener` is never a suitable soution for text components.  Instead you should be using a `DocumentFilter` to filter out things you don&#39;t want to be added to the underlying `Document`.\r\n\r\nSee [Implementing a Document Filter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter) for more details\r\n\r\nYou could also alter the `insert-break` key binding, changing the behaviour or taking additional action.\r\n\r\nSee [this example](https://stackoverflow.com/questions/32343355/java-linux-terminal-in-jpanel/32343778#32343778) for more details","title":"Stopping a JTextPane from receiving new line feeds","body":"<p><code>KeyListener</code> is never a suitable soution for text components.  Instead you should be using a <code>DocumentFilter</code> to filter out things you don't want to be added to the underlying <code>Document</code>.</p>\n<p>See <a href=\"http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter\" rel=\"nofollow noreferrer\">Implementing a Document Filter</a> for more details</p>\n<p>You could also alter the <code>insert-break</code> key binding, changing the behaviour or taking additional action.</p>\n<p>See <a href=\"https://stackoverflow.com/questions/32343355/java-linux-terminal-in-jpanel/32343778#32343778\">this example</a> for more details</p>\n"},{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1451598269,"creation_date":1451578221,"answer_id":34548861,"question_id":34545889,"body_markdown":"&gt; the textpane is supposed to contain a certain filepath, so I want the user to be able to scroll only horizontaly and not add new lines verticaly. Is the JTextPane component suitable for this use?\r\n\r\nI would suggest there are better options.\r\n\r\nIf you only have a single line of text then just use a `JTextField`. To handle the Enter key you can add an `ActionListener` to the text field.\r\n\r\nIf you do need multiple line then I would suggest you could use a `JList`.","title":"Stopping a JTextPane from receiving new line feeds","body":"<blockquote>\n  <p>the textpane is supposed to contain a certain filepath, so I want the user to be able to scroll only horizontaly and not add new lines verticaly. Is the JTextPane component suitable for this use?</p>\n</blockquote>\n\n<p>I would suggest there are better options.</p>\n\n<p>If you only have a single line of text then just use a <code>JTextField</code>. To handle the Enter key you can add an <code>ActionListener</code> to the text field.</p>\n\n<p>If you do need multiple line then I would suggest you could use a <code>JList</code>.</p>\n"}],"owner":{"account_id":7506889,"reputation":15,"user_id":5703138,"display_name":"goto_user"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":34548861,"answer_count":2,"score":0,"last_activity_date":1681270844,"creation_date":1451561648,"question_id":34545889,"body_markdown":"I want my `JTextPane` to have some functionality when the user presses **Enter** and not just change the line. Now I understand how to implement the functionality I want, but I still can&#39;t negate the line feed from pressing **Enter**. I have tried the following but it doesn&#39;t seem to work, the new line will be created anyway.\r\n\r\nTo give a better idea of what I&#39;m trying to achieve here, the textpane is supposed to contain a certain filepath, so I want the user to be able to scroll only horizontaly and not add new lines verticaly. Is the JTextPane component suitable for this use?\r\n\r\n    locationPane = new JTextPane();\r\n\t    locationPane.addKeyListener(new KeyAdapter() {\r\n\t    \t@Override\r\n\t    \tpublic void keyPressed(KeyEvent arg0) {\r\n\t    \t\tif(arg0.getExtendedKeyCode() == KeyEvent.VK_ENTER){\r\n\t    \t\t\tlocationPane.setText(locationPane.getText().substring(0, locationPane.getText().length()));\r\n\t    \t\t}\r\n\t    \t}\r\n\t    });","title":"Stopping a JTextPane from receiving new line feeds","body":"<p>I want my <code>JTextPane</code> to have some functionality when the user presses <strong>Enter</strong> and not just change the line. Now I understand how to implement the functionality I want, but I still can't negate the line feed from pressing <strong>Enter</strong>. I have tried the following but it doesn't seem to work, the new line will be created anyway.</p>\n\n<p>To give a better idea of what I'm trying to achieve here, the textpane is supposed to contain a certain filepath, so I want the user to be able to scroll only horizontaly and not add new lines verticaly. Is the JTextPane component suitable for this use?</p>\n\n<pre><code>locationPane = new JTextPane();\n    locationPane.addKeyListener(new KeyAdapter() {\n        @Override\n        public void keyPressed(KeyEvent arg0) {\n            if(arg0.getExtendedKeyCode() == KeyEvent.VK_ENTER){\n                locationPane.setText(locationPane.getText().substring(0, locationPane.getText().length()));\n            }\n        }\n    });\n</code></pre>\n"},{"tags":["java","loops"],"comments":[{"owner":{"account_id":26568556,"reputation":43,"user_id":20195143,"display_name":"Maybe"},"score":0,"creation_date":1681263858,"post_id":75991262,"comment_id":134027221,"body_markdown":"Sorry I&#39;m still relatively new to stackoverflow and don&#39;t use it often","body":"Sorry I&#39;m still relatively new to stackoverflow and don&#39;t use it often"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1681264006,"post_id":75991262,"comment_id":134027239,"body_markdown":"I suppose you dont want `&quot;CompSci&quot;\\n&quot;icSpmoC&quot;` but only &quot;icSpmoC&quot; at the end of the string?","body":"I suppose you dont want <code>&quot;CompSci&quot;\\n&quot;icSpmoC&quot;</code> but only &quot;icSpmoC&quot; at the end of the string?"},{"owner":{"account_id":26568556,"reputation":43,"user_id":20195143,"display_name":"Maybe"},"score":0,"creation_date":1681264127,"post_id":75991262,"comment_id":134027245,"body_markdown":"Yes that is right","body":"Yes that is right"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1681264138,"post_id":75991262,"comment_id":134027246,"body_markdown":"If so, this is actually because of the if statement you used. Specifically `(i + 1) % str.length() == 0`. When this condition is true, you append the original string again. Thats why there is another copy of the original string. You should instead have another if condition and use the continue keyword to skip that iteration","body":"If so, this is actually because of the if statement you used. Specifically <code>(i + 1) % str.length() == 0</code>. When this condition is true, you append the original string again. Thats why there is another copy of the original string. You should instead have another if condition and use the continue keyword to skip that iteration"},{"owner":{"account_id":21724606,"reputation":722,"user_id":16034206,"display_name":"experiment unit 1998X"},"score":0,"creation_date":1681264372,"post_id":75991262,"comment_id":134027262,"body_markdown":"you could even consider: `if ((i + 1) % str.length() == 0) { result += reverse(str); } ` and change the return to only `return result;`","body":"you could even consider: <code>if ((i + 1) % str.length() == 0) { result += reverse(str); } </code> and change the return to only <code>return result;</code>"}],"answers":[{"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681270674,"creation_date":1681270674,"answer_id":75991717,"question_id":75991262,"body_markdown":"Take advantage of the **[StringBuilder](https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)** class. That way you can get rid of your `reverse()` method, for example:\r\n\r\n    public static String pattern(String str) {\r\n        // Java 8+\r\n        String space = String.join(&quot;&quot;, java.util.Collections.nCopies(str.length() - 2, &quot; &quot;));\r\n        // Java 11+\r\n        // String space = &quot; &quot;.repeat(str.length() - 2);\r\n        \r\n        StringBuilder result = new StringBuilder(str);\r\n        result.append(&quot;\\n&quot;);\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            result.append(str.charAt(i)).append(space)\r\n                  .append(str.charAt(str.length() - 1 - i)).append(&quot;\\n&quot;);\r\n        }\r\n        return result.append(new StringBuilder(str).reverse().toString()).toString();\r\n    }","title":"How do I reverse the bottom word of a Hollow Square Pattern?","body":"<p>Take advantage of the <strong><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\">StringBuilder</a></strong> class. That way you can get rid of your <code>reverse()</code> method, for example:</p>\n<pre><code>public static String pattern(String str) {\n    // Java 8+\n    String space = String.join(&quot;&quot;, java.util.Collections.nCopies(str.length() - 2, &quot; &quot;));\n    // Java 11+\n    // String space = &quot; &quot;.repeat(str.length() - 2);\n    \n    StringBuilder result = new StringBuilder(str);\n    result.append(&quot;\\n&quot;);\n    for (int i = 0; i &lt; str.length(); i++) {\n        result.append(str.charAt(i)).append(space)\n              .append(str.charAt(str.length() - 1 - i)).append(&quot;\\n&quot;);\n    }\n    return result.append(new StringBuilder(str).reverse().toString()).toString();\n}\n</code></pre>\n"}],"owner":{"account_id":26568556,"reputation":43,"user_id":20195143,"display_name":"Maybe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75991717,"answer_count":1,"score":0,"last_activity_date":1681270674,"creation_date":1681263361,"question_id":75991262,"body_markdown":"I&#39;m trying to create a hollow square pattern with the last line of the word being reversed from the original word. \r\n\r\nShown below.\r\n\r\n[![CompSci\r\nC     i\r\no     p\r\nm     m\r\np     o\r\ni     c\r\nc     S\r\nicSpmoC][1]][1]\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nHowever, the output I have received showcases the reversed string being under the original word. \r\n\r\nShown below\r\n\r\nCompSci\r\no     c\r\nm     S\r\np     p\r\nS     m\r\nc     o\r\nCompSci\r\nicSpmoC\r\n\r\nHere is my code:\r\n\r\n    public static String pattern(String str) {\r\n    \r\n    \r\n             String result = &quot;&quot;;\r\n             for (int i = 0; i &lt; str.length(); i++) {\r\n                 if (i % str.length() == 0 || (i + 1) % str.length() == 0) {\r\n                     result += str + &quot;\\n&quot;;\r\n                 } else {\r\n                     result += str.charAt(i) + &quot;     &quot; + str.charAt(str.length() - 1 - i) + &quot;\\n&quot;;\r\n                 }\r\n             }\r\n    \r\n             return result + reverse(str);\r\n         }\r\n\r\n\r\n     public static String reverse(String str) {\r\n        String result = &quot;&quot;;\r\n        for (int i = str.length() - 1; i &gt;= 0; i--) {\r\n            result += str.substring(i, i + 1);\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QepD4.png","title":"How do I reverse the bottom word of a Hollow Square Pattern?","body":"<p>I'm trying to create a hollow square pattern with the last line of the word being reversed from the original word.</p>\n<p>Shown below.</p>\n<p><a href=\"https://i.stack.imgur.com/QepD4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QepD4.png\" alt=\"CompSci\nC     i\no     p\nm     m\np     o\ni     c\nc     S\nicSpmoC\" /></a></p>\n<p>However, the output I have received showcases the reversed string being under the original word.</p>\n<p>Shown below</p>\n<p>CompSci\no     c\nm     S\np     p\nS     m\nc     o\nCompSci\nicSpmoC</p>\n<p>Here is my code:</p>\n<pre><code>public static String pattern(String str) {\n\n\n         String result = &quot;&quot;;\n         for (int i = 0; i &lt; str.length(); i++) {\n             if (i % str.length() == 0 || (i + 1) % str.length() == 0) {\n                 result += str + &quot;\\n&quot;;\n             } else {\n                 result += str.charAt(i) + &quot;     &quot; + str.charAt(str.length() - 1 - i) + &quot;\\n&quot;;\n             }\n         }\n\n         return result + reverse(str);\n     }\n\n\n public static String reverse(String str) {\n    String result = &quot;&quot;;\n    for (int i = str.length() - 1; i &gt;= 0; i--) {\n        result += str.substring(i, i + 1);\n    }\n    return result;\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":16445373,"reputation":613,"user_id":11880323,"display_name":"cmak"},"score":0,"creation_date":1681285005,"post_id":75991690,"comment_id":134029965,"body_markdown":"It depends on what the context is being used for, but you could just edit the source code","body":"It depends on what the context is being used for, but you could just edit the source code"}],"owner":{"account_id":13317101,"reputation":85,"user_id":9613109,"display_name":"Joe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681270250,"creation_date":1681270250,"question_id":75991690,"body_markdown":"I have an Android JAR file. In short, this file handles some logic that I need. However, my use-case is not an Android app. I am building a web API that requires functionality provided by this Android JAR. The functionality specifically involves a **fingerprinting** method. \r\n\r\nI am currently building the API in Java so that I can use the JAR functionality directly. However, the biggest issue I am stumbling on is when this JAR file uses built in Android calls. In this case: `android.content.Context.getApplicationContext()`.\r\n\r\nAlthough I am not an Android expert, it is my understanding that this method returns a lot of information surrounding the global android environment.\r\n\r\nSince I am not executing my API on an Android, rather web, I am looking into how I could potentially fake this so that my API still works. Is it possible to generate a fake application context so that I can generate fingerprints on my API?\r\n\r\n","title":"How can I create an artificial Android Context in a Java web app?","body":"<p>I have an Android JAR file. In short, this file handles some logic that I need. However, my use-case is not an Android app. I am building a web API that requires functionality provided by this Android JAR. The functionality specifically involves a <strong>fingerprinting</strong> method.</p>\n<p>I am currently building the API in Java so that I can use the JAR functionality directly. However, the biggest issue I am stumbling on is when this JAR file uses built in Android calls. In this case: <code>android.content.Context.getApplicationContext()</code>.</p>\n<p>Although I am not an Android expert, it is my understanding that this method returns a lot of information surrounding the global android environment.</p>\n<p>Since I am not executing my API on an Android, rather web, I am looking into how I could potentially fake this so that my API still works. Is it possible to generate a fake application context so that I can generate fingerprints on my API?</p>\n"},{"tags":["java","spring-boot","jpa"],"answers":[{"tags":[],"owner":{"account_id":7032763,"reputation":2130,"user_id":5387880,"display_name":"Tanuj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681270138,"creation_date":1681270138,"answer_id":75991675,"question_id":75991575,"body_markdown":"An ideal structure would look like this\r\n\r\n 1. Create the desired library for example package is `com.example`\r\n 2. You can then add this library as dependency in any targeted project.\r\n 3. Make sure Spring pickups the configuration, entities and classes etc.     \r\n 4. If your library and targeted application main have same package or its sub-package for example `com.example` in this case we could use `@EnableAutoConfiguration` to enable Spring to auto-configure the application context.\r\n 5. In another scenario where the root package name is completely different, we would provide our application with the information where these packages could be found. For this purpose, we would use `@EntityScan`.\r\n \r\n 6. `@EntityScan` annotation is used when entity classes are not placed in the main application package or its sub-packages. In this situation, we would declare the package or list of packages in the main configuration class within `@EntityScan` annotation. This will tell Spring where to find entities used in the application for exam\r\n\r\n```\r\npackage com.app;\r\n\r\n@SpringBootApplication\r\n@ComponentScan(basePackages = &quot;com.app&quot;) // This will scan all spring beans under com.app package\r\n@EntityScan(basePackages = &quot;com.entity&quot;) // This will only scan entities under com.entity package\r\npublic class SomeApiApplication {\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(SomeApiApplication.class, args);\r\n    }\r\n}\r\n```\r\n\r\n","title":"How to make a library of JPA repositories in a jar file?","body":"<p>An ideal structure would look like this</p>\n<ol>\n<li><p>Create the desired library for example package is <code>com.example</code></p>\n</li>\n<li><p>You can then add this library as dependency in any targeted project.</p>\n</li>\n<li><p>Make sure Spring pickups the configuration, entities and classes etc.</p>\n</li>\n<li><p>If your library and targeted application main have same package or its sub-package for example <code>com.example</code> in this case we could use <code>@EnableAutoConfiguration</code> to enable Spring to auto-configure the application context.</p>\n</li>\n<li><p>In another scenario where the root package name is completely different, we would provide our application with the information where these packages could be found. For this purpose, we would use <code>@EntityScan</code>.</p>\n</li>\n<li><p><code>@EntityScan</code> annotation is used when entity classes are not placed in the main application package or its sub-packages. In this situation, we would declare the package or list of packages in the main configuration class within <code>@EntityScan</code> annotation. This will tell Spring where to find entities used in the application for exam</p>\n</li>\n</ol>\n<pre><code>package com.app;\n\n@SpringBootApplication\n@ComponentScan(basePackages = &quot;com.app&quot;) // This will scan all spring beans under com.app package\n@EntityScan(basePackages = &quot;com.entity&quot;) // This will only scan entities under com.entity package\npublic class SomeApiApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(SomeApiApplication.class, args);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681270138,"creation_date":1681268719,"question_id":75991575,"body_markdown":"I have several Spring boot projects which use same database. I have made a library of Hibernate entities to share among them. But I faced issues when I tried to include JPA repositories in them since that library doesn&#39;t have Spring boot included. Is it possible to do this? How can I add Spring libraries so that it will work?\r\nWhat entries should I add to build.gradle file?","title":"How to make a library of JPA repositories in a jar file?","body":"<p>I have several Spring boot projects which use same database. I have made a library of Hibernate entities to share among them. But I faced issues when I tried to include JPA repositories in them since that library doesn't have Spring boot included. Is it possible to do this? How can I add Spring libraries so that it will work?\nWhat entries should I add to build.gradle file?</p>\n"},{"tags":["java","lambda","java-8"],"answers":[{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":214,"is_accepted":true,"score":214,"last_activity_date":1440746204,"creation_date":1440744131,"answer_id":32264826,"question_id":32264773,"body_markdown":"Read [the javadoc][1]: `Map&lt;K, V&gt;.forEach()` expects a `BiConsumer&lt;? super K,? super V&gt;` as argument, and the signature of the `BiConsumer&lt;T, U&gt;` abstract method is `accept(T t, U u)`.\r\n\r\nSo you should pass it a lambda expression that takes two inputs as argument: the key and the value:\r\n\r\n    map.forEach((key, value) -&gt; {\r\n        System.out.println(&quot;Key : &quot; + key + &quot; Value : &quot; + value);\r\n    });\r\n\r\nYour code would work if you called forEach() on the entry set of the map, not on the map itself:\r\n\r\n    map.entrySet().forEach(entry -&gt; {\r\n        System.out.println(&quot;Key : &quot; + entry.getKey() + &quot; Value : &quot; + entry.getValue());\r\n    }); \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-","title":"forEach loop Java 8 for Map entry set","body":"<p>Read <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\">the javadoc</a>: <code>Map&lt;K, V&gt;.forEach()</code> expects a <code>BiConsumer&lt;? super K,? super V&gt;</code> as argument, and the signature of the <code>BiConsumer&lt;T, U&gt;</code> abstract method is <code>accept(T t, U u)</code>.</p>\n\n<p>So you should pass it a lambda expression that takes two inputs as argument: the key and the value:</p>\n\n<pre><code>map.forEach((key, value) -&gt; {\n    System.out.println(\"Key : \" + key + \" Value : \" + value);\n});\n</code></pre>\n\n<p>Your code would work if you called forEach() on the entry set of the map, not on the map itself:</p>\n\n<pre><code>map.entrySet().forEach(entry -&gt; {\n    System.out.println(\"Key : \" + entry.getKey() + \" Value : \" + entry.getValue());\n}); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":209411,"reputation":271,"user_id":460404,"display_name":"Evgeny Tugarev"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1480682955,"creation_date":1473948780,"answer_id":39513372,"question_id":32264773,"body_markdown":"Maybe the best way to answer the questions like &quot;which version is faster and which one shall I use?&quot; is to look to the source code:\r\n\r\n*map.forEach()* - from Map.java \r\n\r\n    default void forEach(BiConsumer&lt;? super K, ? super V&gt; action) {\r\n        Objects.requireNonNull(action);\r\n        for (Map.Entry&lt;K, V&gt; entry : entrySet()) {\r\n            K k;\r\n            V v;\r\n            try {\r\n                k = entry.getKey();\r\n                v = entry.getValue();\r\n            } catch(IllegalStateException ise) {\r\n                // this usually means the entry is no longer in the map.\r\n                throw new ConcurrentModificationException(ise);\r\n            }\r\n            action.accept(k, v);\r\n        }\r\n    }\r\n[javadoc][1]\r\n\r\n*map.entrySet().forEach()* - from Iterable.java\r\n\r\n    default void forEach(Consumer&lt;? super T&gt; action) {\r\n        Objects.requireNonNull(action);\r\n        for (T t : this) {\r\n            action.accept(t);\r\n        }\r\n    }\r\n[javadoc][2]\r\n\r\nThis immediately reveals that *map.forEach()* is also using *Map.Entry* internally. So I would not expect any performance benefit in using *map.forEach()* over the *map.entrySet().forEach()*. So in your case the answer really depends on your personal taste :) \r\n\r\nFor the complete list of differences please refer to the provided javadoc links. Happy coding! \r\n \r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-","title":"forEach loop Java 8 for Map entry set","body":"<p>Maybe the best way to answer the questions like \"which version is faster and which one shall I use?\" is to look to the source code:</p>\n\n<p><em>map.forEach()</em> - from Map.java </p>\n\n<pre><code>default void forEach(BiConsumer&lt;? super K, ? super V&gt; action) {\n    Objects.requireNonNull(action);\n    for (Map.Entry&lt;K, V&gt; entry : entrySet()) {\n        K k;\n        V v;\n        try {\n            k = entry.getKey();\n            v = entry.getValue();\n        } catch(IllegalStateException ise) {\n            // this usually means the entry is no longer in the map.\n            throw new ConcurrentModificationException(ise);\n        }\n        action.accept(k, v);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#forEach-java.util.function.BiConsumer-\" rel=\"noreferrer\">javadoc</a></p>\n\n<p><em>map.entrySet().forEach()</em> - from Iterable.java</p>\n\n<pre><code>default void forEach(Consumer&lt;? super T&gt; action) {\n    Objects.requireNonNull(action);\n    for (T t : this) {\n        action.accept(t);\n    }\n}\n</code></pre>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Iterable.html#forEach-java.util.function.Consumer-\" rel=\"noreferrer\">javadoc</a></p>\n\n<p>This immediately reveals that <em>map.forEach()</em> is also using <em>Map.Entry</em> internally. So I would not expect any performance benefit in using <em>map.forEach()</em> over the <em>map.entrySet().forEach()</em>. So in your case the answer really depends on your personal taste :) </p>\n\n<p>For the complete list of differences please refer to the provided javadoc links. Happy coding! </p>\n"},{"tags":[],"owner":{"account_id":9898761,"reputation":87,"user_id":7329405,"display_name":"Shridhar Sangamkar"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1490185580,"creation_date":1490185580,"answer_id":42951631,"question_id":32264773,"body_markdown":"You can use the following code for your requirement\r\n\r\n    map.forEach((k,v)-&gt;System.out.println(&quot;Item : &quot; + k + &quot; Count : &quot; + v));","title":"forEach loop Java 8 for Map entry set","body":"<p>You can use the following code for your requirement</p>\n\n<pre><code>map.forEach((k,v)-&gt;System.out.println(\"Item : \" + k + \" Count : \" + v));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14338973,"reputation":1,"user_id":10357647,"display_name":"vaibhav1111"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551617788,"creation_date":1551617788,"answer_id":54969041,"question_id":32264773,"body_markdown":"\tHashMap&lt;String,Integer&gt; hm = new HashMap();\r\n\t\r\n     hm.put(&quot;A&quot;,1);\r\n     hm.put(&quot;B&quot;,2);\r\n     hm.put(&quot;C&quot;,3);\r\n     hm.put(&quot;D&quot;,4);\r\n     \r\n     hm.forEach((key,value)-&gt;{\r\n    \t System.out.println(&quot;Key: &quot;+key + &quot; value: &quot;+value);\r\n     });","title":"forEach loop Java 8 for Map entry set","body":"<pre><code>HashMap&lt;String,Integer&gt; hm = new HashMap();\n\n hm.put(\"A\",1);\n hm.put(\"B\",2);\n hm.put(\"C\",3);\n hm.put(\"D\",4);\n\n hm.forEach((key,value)-&gt;{\n     System.out.println(\"Key: \"+key + \" value: \"+value);\n });\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5079094,"reputation":1,"user_id":4075745,"display_name":"vivek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1567082776,"creation_date":1567082468,"answer_id":57710464,"question_id":32264773,"body_markdown":"\r\n### Stream API\r\n\r\n    public void iterateStreamAPI(Map&lt;String, Integer&gt; map) {\r\n        map.entrySet().stream().forEach(e -&gt; System.out.println(e.getKey() + &quot;:&quot;e.getValue()));\r\n    }","title":"forEach loop Java 8 for Map entry set","body":"<h3>Stream API</h3>\n\n<pre><code>public void iterateStreamAPI(Map&lt;String, Integer&gt; map) {\n    map.entrySet().stream().forEach(e -&gt; System.out.println(e.getKey() + \":\"e.getValue()));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19132725,"reputation":21,"user_id":13974273,"display_name":"Pawan Patidar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1599926417,"creation_date":1599926417,"answer_id":63862223,"question_id":32264773,"body_markdown":"\tString ss = &quot;Pawan kavita kiyansh Patidar Patidar&quot;;\r\n\t\tStringBuilder ress = new StringBuilder();\r\n\t\t\r\n\t\tMap&lt;Character, Integer&gt; fre = ss.chars().boxed()\r\n\t\t\t\t.collect(Collectors.toMap(k-&gt;Character.valueOf((char) k.intValue()),k-&gt;1,Integer::sum));\r\n\t\t\r\n\t\t  //fre.forEach((k, v) -&gt; System.out.println((k + &quot;:&quot; + v)));\r\n\t\t\r\n\t\tfre.entrySet().forEach(e -&gt;{\r\n\t    \t    //System.out.println(e.getKey() + &quot;:&quot; + e.getValue());\r\n\t\t\t\t//ress.append(String.valueOf(e.getKey())+e.getValue());\r\n\t\t\t}); \r\n\r\n\t\tfre.forEach((k,v)-&gt;{\r\n\t\t\t//System.out.println(&quot;Item : &quot; + k + &quot; Count : &quot; + v);\r\n\t\t\tress.append(String.valueOf(k)+String.valueOf(v));\r\n\t\t});\r\n\t\t\r\n\t\tSystem.out.println(ress.toString());","title":"forEach loop Java 8 for Map entry set","body":"<pre><code>String ss = &quot;Pawan kavita kiyansh Patidar Patidar&quot;;\n    StringBuilder ress = new StringBuilder();\n    \n    Map&lt;Character, Integer&gt; fre = ss.chars().boxed()\n            .collect(Collectors.toMap(k-&gt;Character.valueOf((char) k.intValue()),k-&gt;1,Integer::sum));\n    \n      //fre.forEach((k, v) -&gt; System.out.println((k + &quot;:&quot; + v)));\n    \n    fre.entrySet().forEach(e -&gt;{\n            //System.out.println(e.getKey() + &quot;:&quot; + e.getValue());\n            //ress.append(String.valueOf(e.getKey())+e.getValue());\n        }); \n\n    fre.forEach((k,v)-&gt;{\n        //System.out.println(&quot;Item : &quot; + k + &quot; Count : &quot; + v);\n        ress.append(String.valueOf(k)+String.valueOf(v));\n    });\n    \n    System.out.println(ress.toString());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20854728,"reputation":87,"user_id":15318369,"display_name":"simerbhatti"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1614883903,"creation_date":1614883903,"answer_id":66481270,"question_id":32264773,"body_markdown":"Below are the tree best ways to do it \r\n1.Iterate with entry set\r\n\r\n    for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\r\n        System.out.println(entry.getKey() + &quot;:&quot; + entry.getValue());\r\n    }\r\n\r\n2. Lambdas\r\nmap.forEach((k, v) -&gt; System.out.println((k + &quot;:&quot; + v)));\r\n\r\n3 stream \r\nmap.entrySet().stream()\r\n      .forEach(e -&gt; System.out.println(e.getKey() + &quot;:&quot; + e.getValue()));","title":"forEach loop Java 8 for Map entry set","body":"<p>Below are the tree best ways to do it\n1.Iterate with entry set</p>\n<pre><code>for (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) {\n    System.out.println(entry.getKey() + &quot;:&quot; + entry.getValue());\n}\n</code></pre>\n<ol start=\"2\">\n<li>Lambdas\nmap.forEach((k, v) -&gt; System.out.println((k + &quot;:&quot; + v)));</li>\n</ol>\n<p>3 stream\nmap.entrySet().stream()\n.forEach(e -&gt; System.out.println(e.getKey() + &quot;:&quot; + e.getValue()));</p>\n"},{"tags":[],"owner":{"account_id":15588669,"reputation":11,"user_id":11246397,"display_name":"samant sahani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681269814,"creation_date":1681269814,"answer_id":75991652,"question_id":32264773,"body_markdown":"    Map&lt;Integer,String&gt; result=new  HashMap&lt;Integer, String&gt;();\r\n\r\n    result.put(1, &quot;Motorbike&quot;);\r\n    result.put(2, &quot;Car&quot;);\r\n    result.put(3, &quot;Jeep&quot;);\r\n\r\n    result.forEach((key,value)-&gt;System.out.println(key+ &quot;  &quot;+value));\r\n\r\n  \r\n  [1]: https://i.stack.imgur.com/5MmEc.png","title":"forEach loop Java 8 for Map entry set","body":"<pre><code>Map&lt;Integer,String&gt; result=new  HashMap&lt;Integer, String&gt;();\n\nresult.put(1, &quot;Motorbike&quot;);\nresult.put(2, &quot;Car&quot;);\nresult.put(3, &quot;Jeep&quot;);\n\nresult.forEach((key,value)-&gt;System.out.println(key+ &quot;  &quot;+value));\n</code></pre>\n"}],"owner":{"account_id":3730361,"reputation":1846,"user_id":3102965,"accept_rate":74,"display_name":"Siddharth Sachdeva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261126,"favorite_count":0,"down_vote_count":0,"up_vote_count":97,"accepted_answer_id":32264826,"answer_count":8,"score":97,"last_activity_date":1681269814,"creation_date":1440743924,"question_id":32264773,"body_markdown":"I&#39;m trying to convert old conventional for each loop till java7 to java8&#39;s for each loop for a map entry set but I&#39;m getting an error.\r\nHere&#39;s the code I&#39;m trying to convert:\r\n\r\n    for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\r\n\t\t\tSystem.out.println(&quot;Key : &quot; + entry.getKey() + &quot; Value : &quot; + entry.getValue());\r\n\t\t}\r\n\r\nHere&#39;s the changes I have done:\r\n\r\n    map.forEach( Map.Entry&lt;String, String&gt; entry -&gt; {\r\n\t\t   System.out.println(&quot;Key : &quot; + entry.getKey() + &quot; Value : &quot; + entry.getValue());\r\n\t\t   \r\n\t   }); \r\n\r\nI tried doing this as well :\r\n\r\n    Map.Entry&lt;String, String&gt; entry;\r\n\t   map.forEach(entry -&gt; {\r\n\t\t   System.out.println(&quot;Key : &quot; + entry.getKey() + &quot; Value : &quot; + entry.getValue());\r\n\t\t   \r\n\t   });\r\n\r\nBut still facing error. The error I&#39;m getting for this is :\r\nLambda expression&#39;s signature does not match the signature of the functional interface method `accept(String, String)`","title":"forEach loop Java 8 for Map entry set","body":"<p>I'm trying to convert old conventional for each loop till java7 to java8's for each loop for a map entry set but I'm getting an error.\nHere's the code I'm trying to convert:</p>\n\n<pre><code>for (Map.Entry&lt;String, String&gt; entry : map.entrySet()) {\n        System.out.println(\"Key : \" + entry.getKey() + \" Value : \" + entry.getValue());\n    }\n</code></pre>\n\n<p>Here's the changes I have done:</p>\n\n<pre><code>map.forEach( Map.Entry&lt;String, String&gt; entry -&gt; {\n       System.out.println(\"Key : \" + entry.getKey() + \" Value : \" + entry.getValue());\n\n   }); \n</code></pre>\n\n<p>I tried doing this as well :</p>\n\n<pre><code>Map.Entry&lt;String, String&gt; entry;\n   map.forEach(entry -&gt; {\n       System.out.println(\"Key : \" + entry.getKey() + \" Value : \" + entry.getValue());\n\n   });\n</code></pre>\n\n<p>But still facing error. The error I'm getting for this is :\nLambda expression's signature does not match the signature of the functional interface method <code>accept(String, String)</code></p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681268962,"creation_date":1681268962,"answer_id":75991591,"question_id":75988380,"body_markdown":"I&#39;m assuming you want to invoke `onApplicationEvent()` upon startup of the application, if so the correct annotation is `@EventListener(ApplicationReadyEvent.class)\r\n`\r\nAlthough it is not very clear to me where this method is located, another option is to use `@PostConstruct` if your class is a service or component that can start listening to Kafka after the constructor of your class.\r\n\r\nAgain, it depends on your implementation. I hope this helps.","title":"Async method doesnt get invoked on app startup - Spring","body":"<p>I'm assuming you want to invoke <code>onApplicationEvent()</code> upon startup of the application, if so the correct annotation is <code>@EventListener(ApplicationReadyEvent.class) </code>\nAlthough it is not very clear to me where this method is located, another option is to use <code>@PostConstruct</code> if your class is a service or component that can start listening to Kafka after the constructor of your class.</p>\n<p>Again, it depends on your implementation. I hope this helps.</p>\n"}],"owner":{"account_id":24817909,"reputation":21,"user_id":18698545,"display_name":"Akhila K"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681268962,"creation_date":1681232071,"question_id":75988380,"body_markdown":"I&#39;m on Spring 3 and using a basic Kafka subscribe and poll mechanism to consume and process messages like the code snippet given below\r\nFrom our consumer dashboards I can see the app isnt subscribing to the topic, looks like the method is not at all invoked, no errors too. How do I resolve this issue??\r\n\r\n  ```\r\n   @Async\r\n   @Override\r\n   public void onApplicationEvent(ContextRefreshedEvent applicationContextEvent) {\r\n         log.info(&quot;Subscribing to topic={}&quot;, topic);\r\n         consumer.subscribe(Collections.singletonList(topic));\r\n         while (true) {\r\n            try {\r\n               ConsumerRecords&lt;String, Order&gt; records = consumer.poll(Duration.ofMillis(1000));\r\n               messageProcessor.processMessages(records);\r\n               consumer.commitAsync();\r\n            } catch (Exception e) {\r\n               log.error(&quot;Exception when consuming the  messages from kafka &quot;, e);\r\n            }\r\n         }\r\n      }\r\n","title":"Async method doesnt get invoked on app startup - Spring","body":"<p>I'm on Spring 3 and using a basic Kafka subscribe and poll mechanism to consume and process messages like the code snippet given below\nFrom our consumer dashboards I can see the app isnt subscribing to the topic, looks like the method is not at all invoked, no errors too. How do I resolve this issue??</p>\n<pre><code> @Async\n @Override\n public void onApplicationEvent(ContextRefreshedEvent applicationContextEvent) {\n       log.info(&quot;Subscribing to topic={}&quot;, topic);\n       consumer.subscribe(Collections.singletonList(topic));\n       while (true) {\n          try {\n             ConsumerRecords&lt;String, Order&gt; records = consumer.poll(Duration.ofMillis(1000));\n             messageProcessor.processMessages(records);\n             consumer.commitAsync();\n          } catch (Exception e) {\n             log.error(&quot;Exception when consuming the  messages from kafka &quot;, e);\n          }\n       }\n    }\n</code></pre>\n"},{"tags":["java","c#","cassandra","azure-cosmosdb","azure-cosmosdb-cassandra-api"],"answers":[{"tags":[],"owner":{"account_id":14606635,"reputation":15885,"user_id":10549281,"display_name":"Leon Yue"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1548916467,"creation_date":1548903624,"answer_id":54452683,"question_id":54444199,"body_markdown":"Apache Cassandra API in Azure Cosmos DB – offering you Cassandra as-a-service powered by Azure Cosmos DB. You can now experience the power of Azure Cosmos DB platform as a managed service with the familiarity of your favorite Cassandra SDKs and tools—without any app code changes.\r\n\r\n**Bring your Cassandra apps to Azure Cosmos DB in 3 simple steps**:\r\n\r\n1. Create a new Azure Cosmos DB account in the Azure Portal and choose the new Cassandra API while creating an Azure Cosmos DB account.\r\n2. Connect your Cassandra application to Azure Cosmos DB copying a simple connection code snippet provided to you upon creation of your new account.\r\n3. Use your favorite Cassandra tools and drivers to manage and query your Cassandra data in Azure Cosmos DB\r\n\r\nAzure Cosmos DB provides wire protocol level compatibility with the Cassandra API. **This ensures you can continue using your existing application and OSS tools with no code changes** and gives you the flexibility to run your Cassandra apps fully managed with no vendor lock-in. While Azure Cosmos DB exposes APIs for the popular open source databases, it does not rely on the implementations of those  databases for realizing the semantics of the corresponding APIs.\r\n\r\nReference: https://azure.microsoft.com/en-us/blog/dear-cassandra-developers-welcome-to-azure-cosmosdb/\r\n\r\nThe official [documentation][1] also mentioned :\r\nAzure Cosmos DB Cassandra API can be used as the data store for apps written for Apache Cassandra. This means that by using existing Apache drivers compliant with CQLv4, your existing Cassandra application can now communicate with the Azure Cosmos DB Cassandra API. In many cases, you can switch from using Apache Cassandra to using Azure Cosmos DB &#39;s Cassandra API, by just changing a connection string. \r\n\r\nAzure Cosmos DB provides wire protocol level compatibility with existing Cassandra SDKs and tools. This compatibility ensures you can use your existing codebase with Azure Cosmos DB Cassandra API with trivial changes.\r\n\r\nIt&#39;s not absolutely &quot;no code changes&quot;. After you migrate your app from Cassandra to Cosmos, you need to test if the app works well or the query statements execute successfully. You need to consider about the code compatibility.\r\nTo see: [Apache Cassandra features supported by Azure Cosmos DB Cassandra API][2].\r\n\r\nIf there is error or exception happens, you certainly need to modify the code.\r\n\r\n Hope this can helps you.\r\n\r\n\r\n  [1]: https://learn.microsoft.com/en-us/azure/cosmos-db/cassandra-introduction\r\n  [2]: https://learn.microsoft.com/en-us/azure/cosmos-db/cassandra-support","title":"Existing app migrate from Cassandra DB to Cosmos DB","body":"<p>Apache Cassandra API in Azure Cosmos DB – offering you Cassandra as-a-service powered by Azure Cosmos DB. You can now experience the power of Azure Cosmos DB platform as a managed service with the familiarity of your favorite Cassandra SDKs and tools—without any app code changes.</p>\n\n<p><strong>Bring your Cassandra apps to Azure Cosmos DB in 3 simple steps</strong>:</p>\n\n<ol>\n<li>Create a new Azure Cosmos DB account in the Azure Portal and choose the new Cassandra API while creating an Azure Cosmos DB account.</li>\n<li>Connect your Cassandra application to Azure Cosmos DB copying a simple connection code snippet provided to you upon creation of your new account.</li>\n<li>Use your favorite Cassandra tools and drivers to manage and query your Cassandra data in Azure Cosmos DB</li>\n</ol>\n\n<p>Azure Cosmos DB provides wire protocol level compatibility with the Cassandra API. <strong>This ensures you can continue using your existing application and OSS tools with no code changes</strong> and gives you the flexibility to run your Cassandra apps fully managed with no vendor lock-in. While Azure Cosmos DB exposes APIs for the popular open source databases, it does not rely on the implementations of those  databases for realizing the semantics of the corresponding APIs.</p>\n\n<p>Reference: <a href=\"https://azure.microsoft.com/en-us/blog/dear-cassandra-developers-welcome-to-azure-cosmosdb/\" rel=\"nofollow noreferrer\">https://azure.microsoft.com/en-us/blog/dear-cassandra-developers-welcome-to-azure-cosmosdb/</a></p>\n\n<p>The official <a href=\"https://learn.microsoft.com/en-us/azure/cosmos-db/cassandra-introduction\" rel=\"nofollow noreferrer\">documentation</a> also mentioned :\nAzure Cosmos DB Cassandra API can be used as the data store for apps written for Apache Cassandra. This means that by using existing Apache drivers compliant with CQLv4, your existing Cassandra application can now communicate with the Azure Cosmos DB Cassandra API. In many cases, you can switch from using Apache Cassandra to using Azure Cosmos DB 's Cassandra API, by just changing a connection string. </p>\n\n<p>Azure Cosmos DB provides wire protocol level compatibility with existing Cassandra SDKs and tools. This compatibility ensures you can use your existing codebase with Azure Cosmos DB Cassandra API with trivial changes.</p>\n\n<p>It's not absolutely \"no code changes\". After you migrate your app from Cassandra to Cosmos, you need to test if the app works well or the query statements execute successfully. You need to consider about the code compatibility.\nTo see: <a href=\"https://learn.microsoft.com/en-us/azure/cosmos-db/cassandra-support\" rel=\"nofollow noreferrer\">Apache Cassandra features supported by Azure Cosmos DB Cassandra API</a>.</p>\n\n<p>If there is error or exception happens, you certainly need to modify the code.</p>\n\n<p>Hope this can helps you.</p>\n"}],"owner":{"account_id":14476817,"reputation":601,"user_id":10457254,"display_name":"Artanis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1011,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681268835,"creation_date":1548862600,"question_id":54444199,"body_markdown":"What types of code changes may need to be made? The documentation seems to be conflicting in this regard, and doesn&#39;t provide specifics that I can find. The documentation states:\r\n\r\n1. No code changes are necessary\r\n2. Trivial code changes may be necessary\r\n3. Many cases won&#39;t require code changes\r\n\r\nIf I have apps that update and read from Cassandra already working, what situation would cause the need for code changes once Cosmos is implemented? Will the queries in my apps work as is?\r\n\r\nI&#39;ve seen that you can add code to auto adjust the throughput if need be, but I&#39;m not seeing any specifics in documentation describing queries or code changes to existing apps after migrating from Cassandra to Cosmos.","title":"Existing app migrate from Cassandra DB to Cosmos DB","body":"<p>What types of code changes may need to be made? The documentation seems to be conflicting in this regard, and doesn't provide specifics that I can find. The documentation states:</p>\n\n<ol>\n<li>No code changes are necessary</li>\n<li>Trivial code changes may be necessary</li>\n<li>Many cases won't require code changes</li>\n</ol>\n\n<p>If I have apps that update and read from Cassandra already working, what situation would cause the need for code changes once Cosmos is implemented? Will the queries in my apps work as is?</p>\n\n<p>I've seen that you can add code to auto adjust the throughput if need be, but I'm not seeing any specifics in documentation describing queries or code changes to existing apps after migrating from Cassandra to Cosmos.</p>\n"},{"tags":["java","mysql","spring-boot","method-names"],"comments":[{"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1681258413,"post_id":75990935,"comment_id":134026732,"body_markdown":"Just a guess: Try changing `int` to `Integer` for all uses of `id`.","body":"Just a guess: Try changing <code>int</code> to <code>Integer</code> for all uses of <code>id</code>."},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":4,"creation_date":1681258853,"post_id":75990935,"comment_id":134026787,"body_markdown":"_&quot;No property &#39;id&#39; found for type &#39;Room&#39;&quot;_ -- I don&#39;t see an `id` property anywhere.","body":"<i>&quot;No property &#39;id&#39; found for type &#39;Room&#39;&quot;</i> -- I don&#39;t see an <code>id</code> property anywhere."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1681262210,"post_id":75990935,"comment_id":134027088,"body_markdown":"When you get an error message you need to read the entire message.","body":"When you get an error message you need to read the entire message."}],"answers":[{"tags":[],"owner":{"account_id":24109083,"reputation":150,"user_id":18079889,"display_name":"Mohammed Fataka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681267100,"creation_date":1681267100,"answer_id":75991465,"question_id":75990935,"body_markdown":"the issue is here \r\n```\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int soba_id;\r\n```\r\nSpring JPA querying is accomplished in two steps: first, use &quot;@Query,&quot; followed by your custom query. second is [Derived Query Methods][1] which is your case, and it works by name, so when your method \r\n```\r\n  Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\r\n```\r\nhas ```findByIdAndStatus``` Spring will look at the model of the repository, which in your case is Room.java and check for fields called `id` and `status`, so if you rename your `soba_id` to \r\n```\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private int id;\r\n```\r\nit should be fine, additionally if you want to keep the name soba_id on db level you can apply `@Column(name = &quot;soba_id&quot;)` and everything is ok  \r\n\r\n  [1]: https://www.baeldung.com/spring-data-derived-queries","title":"Issue with method name, Spring Boot","body":"<p>the issue is here</p>\n<pre><code>    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int soba_id;\n</code></pre>\n<p>Spring JPA querying is accomplished in two steps: first, use &quot;@Query,&quot; followed by your custom query. second is <a href=\"https://www.baeldung.com/spring-data-derived-queries\" rel=\"nofollow noreferrer\">Derived Query Methods</a> which is your case, and it works by name, so when your method</p>\n<pre><code>  Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\n</code></pre>\n<p>has <code>findByIdAndStatus</code> Spring will look at the model of the repository, which in your case is Room.java and check for fields called <code>id</code> and <code>status</code>, so if you rename your <code>soba_id</code> to</p>\n<pre><code>    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int id;\n</code></pre>\n<p>it should be fine, additionally if you want to keep the name soba_id on db level you can apply <code>@Column(name = &quot;soba_id&quot;)</code> and everything is ok</p>\n"}],"owner":{"account_id":28079933,"reputation":13,"user_id":21451183,"display_name":"Djina Obradović"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681267100,"creation_date":1681258206,"question_id":75990935,"body_markdown":"I am working on a booking application for learning purposes,  a problem with a method name in the repository interface\r\n\r\n```\r\n  Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\r\n```\r\n\r\n and I am always getting this error:\r\n\r\n```\r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-04-12T01:52:06.873+02:00 ERROR 11064 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;roomController&#39;: Unsatisfied dependency expressed through field &#39;roomService&#39;: Error creating bean with name &#39;roomService&#39;: Unsatisfied dependency expressed through field &#39;roomRepository&#39;: Error creating bean with name &#39;roomRepository&#39; defined in com.beClean.soba1.soba1.Repository.RoomRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.beClean.soba1.soba1.Repository.RoomRepository.findByIdAndStatus(int,com.beClean.soba1.soba1.Entities.Room$status); Reason: Failed to create query for method public abstract java.util.Optional com.beClean.soba1.soba1.Repository.RoomRepository.findByIdAndStatus(int,com.beClean.soba1.soba1.Entities.Room$status); No property &#39;id&#39; found for type &#39;Room&#39; Did you mean &#39;&#39;tip&#39;&#39;\r\n```\r\n\r\nThis is my entity file:\r\n\r\n```\r\npackage com.beClean.soba1.soba1.Entities;\r\n\r\nimport java.util.List;\r\nimport jakarta.persistence.Entity;\r\nimport jakarta.persistence.EnumType;\r\nimport jakarta.persistence.Enumerated;\r\nimport jakarta.persistence.GeneratedValue;\r\nimport jakarta.persistence.GenerationType;\r\nimport jakarta.persistence.Id;\r\nimport jakarta.persistence.JoinColumn;\r\nimport jakarta.persistence.ManyToOne;\r\nimport jakarta.persistence.OneToMany;\r\nimport jakarta.persistence.Version;\r\n\r\n@Entity(name=&quot;soba&quot;)\r\npublic class Room {\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate int soba_id;\r\n\t\r\n\t@ManyToOne\r\n\t@JoinColumn(name=&quot;hotel_id&quot;)\r\n\tHotel hotel;\r\n\tprivate String tip;\r\n\tprivate double cena;\r\n\tprivate String opis;\r\n\tpublic enum status {SLOBODNO, ZAUZETO};\t\r\n\t@Enumerated(EnumType.STRING)\r\n\tprivate status status;\r\n\t\r\n\t@OneToMany(mappedBy = &quot;room&quot;)\r\n\tprivate List&lt;Booking&gt;listaRezervacija;\r\n\t\r\n\t//@Version\r\n\t//int versionNumber = 0;\r\n\r\n\tpublic Room(int soba_id, Hotel hotel, String tip, double cena, String opis,status status) {\r\n\t\tthis.soba_id = soba_id;\r\n\t\tthis.hotel = hotel;\r\n\t\tthis.tip = tip;\r\n\t\tthis.cena = cena;\r\n\t\tthis.opis = opis;\r\n\t\tthis.status = status;\r\n\t}\r\n\r\n\tpublic Room() {\r\n\t}\r\n\r\n\tpublic int getSoba_id() {\r\n\t\treturn soba_id;\r\n\t}\r\n\r\n\tpublic void setSoba_id(int soba_id) {\r\n\t\tthis.soba_id = soba_id;\r\n\t}\r\n\r\n\tpublic Hotel getHotel() {\r\n\t\treturn hotel;\r\n\t}\r\n\r\n\tpublic void setHotel(Hotel hotel) {\r\n\t\tthis.hotel = hotel;\r\n\t}\r\n\r\n\tpublic String getTip() {\r\n\t\treturn tip;\r\n\t}\r\n\r\n\tpublic void setTip(String tip) {\r\n\t\tthis.tip = tip;\r\n\t}\r\n\r\n\tpublic double getCena() {\r\n\t\treturn cena;\r\n\t}\r\n\r\n\tpublic void setCena(double cena) {\r\n\t\tthis.cena = cena;\r\n\t}\r\n\r\n\tpublic String getOpis() {\r\n\t\treturn opis;\r\n\t}\r\n\r\n\tpublic void setOpis(String opis) {\r\n\t\tthis.opis = opis;\r\n\t}\r\n\r\n\tpublic status getStatus() {\r\n\t\treturn status;\r\n\t}\r\n\r\n\tpublic void setStatus(status status) {\r\n\t\tthis.status = status;\r\n\t}\r\n\t\r\n}\r\n```\r\n\r\nThis is my repository file:\r\n\r\n```\r\npackage com.beClean.soba1.soba1.Repository;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.data.repository.CrudRepository;\r\n\r\nimport com.beClean.soba1.soba1.Entities.Room;\r\nimport com.beClean.soba1.soba1.Entities.Room.status;\r\n\r\nimport ch.qos.logback.core.status.Status;\r\n\r\n\r\npublic interface RoomRepository extends CrudRepository&lt;Room, Integer&gt;{\r\n\t\r\n\t@Query(&quot;select s from soba s where s.tip = &#39;trokrevetna&#39;&quot;)\r\n\tList&lt;Room&gt;findAllTrokrevetna();\r\n\t\r\n\t@Query(&quot;select s from soba s where s.tip = &#39;dvokrevetna&#39;&quot;)\r\n\tList&lt;Room&gt;findAllDvokrevetna();\r\n\t\r\n\t//nadji sobe koje su jeftinije od date cene\r\n\tList&lt;Room&gt;findByCenaLessThan(double cena);\r\n\t\r\n\t//sortiraj od najjeftinije do najskuplje\r\n\tList&lt;Room&gt; findByOrderByCenaAsc();\r\n\t\r\n\t//sortiraj od najskuplje do najjeftinije\r\n\tList&lt;Room&gt;findByOrderByCenaDesc();\r\n\t\r\n\t\r\n\t  Optional&lt;Room&gt; findById(int id);\r\n\t\r\n\r\n     List&lt;Room&gt; findByStatus(Status status);\r\n\r\n    Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\r\n}\r\n```\r\n\r\nthis is my service file:\r\n\r\n```\r\npackage com.beClean.soba1.soba1.Service;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Service;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\n\r\nimport com.beClean.soba1.soba1.Entities.Room;\r\nimport com.beClean.soba1.soba1.Entities.Room.status;\r\nimport com.beClean.soba1.soba1.Repository.RoomRepository;\r\n\r\nimport ch.qos.logback.core.status.Status;\r\n\r\n@Service\r\npublic class RoomService {\r\n\t@Autowired\r\n\tRoomRepository roomRepository;\r\n\t\r\n\tpublic List&lt;Room&gt;getAllRooms(){\r\n\t\treturn (List&lt;Room&gt;) roomRepository.findAll();\r\n\t\r\n\t}\r\n\tpublic Room getRoomById(int id) {\r\n\t\treturn getIfPresentOrThrow(roomRepository.findById(id));\r\n\t}\r\n    public List&lt;Room&gt; getAllTrokrevetna(){\r\n\treturn roomRepository.findAllTrokrevetna();\r\n}\r\n\r\n     public List&lt;Room&gt;getAllDvokrevetna(){\r\n\treturn roomRepository.findAllDvokrevetna();\r\n}\r\n     public List&lt;Room&gt; getRoomByCenaLessThan(@PathVariable double cena){\r\n    \t return roomRepository.findByCenaLessThan(cena);\r\n     }\r\n     \r\n     public List&lt;Room&gt;getByOrderByCenaAsc(){\r\n    \t return roomRepository.findByOrderByCenaAsc();\r\n     }\r\n     \r\n     public List&lt;Room&gt; getByOrderByCenaDesc() {\r\n    \t return roomRepository.findByOrderByCenaDesc();\r\n\t\t\r\n\t}\r\n     public List&lt;Room&gt;getRoomByStatus(Status status){\r\n\t return roomRepository.findByStatus(status);\r\n }\r\n     private Room getIfPresentOrThrow(Optional&lt;Room&gt; optionalRoom) {\r\n    \t    if (!optionalRoom.isPresent()) {\r\n    \t      throw new IllegalArgumentException();\r\n    \t    }\r\n    \t    return optionalRoom.get();\r\n    \t  }\r\n   public Room getRoomByIdAndStatus(int id, status status) {\r\n    \t    return getIfPresentOrThrow(roomRepository.findByIdAndStatus(id, status));\r\n    \t  }\r\n}\r\n```\r\n\r\nand the controller file:\r\n\r\n```\r\npackage com.beClean.soba1.soba1.Controller;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\n\r\nimport org.hibernate.engine.query.spi.ReturnMetadata;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.PathVariable;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport com.beClean.soba1.soba1.Entities.Room;\r\nimport com.beClean.soba1.soba1.Entities.Room.status;\r\nimport com.beClean.soba1.soba1.Service.RoomService;\r\n\r\nimport ch.qos.logback.core.status.Status;\r\n\r\n@RestController\r\npublic class RoomController {\r\n\t@Autowired\r\n\tRoomService roomService;\r\n\t\r\n\t@GetMapping(&quot;/room&quot;)\r\n\tpublic List&lt;Room&gt;getAllRooms(){\r\n\t\treturn(List&lt;Room&gt;) roomService.getAllRooms();\r\n\t}\r\n\r\n\t@GetMapping(&quot;/room/{id}&quot;)\r\n\tpublic Room getRoomById(@PathVariable int id) {\r\n\t\treturn roomService.getRoomById(id);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/trokrevetna&quot;)\r\n\tpublic List&lt;Room&gt;getAllTrokrevetna(){\r\n\t\treturn roomService.getAllTrokrevetna();\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/dvokrevetna&quot;)\r\n\tpublic List&lt;Room&gt;findAlldvokrevetna(){\r\n\t\treturn roomService.getAllDvokrevetna();\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/jeftinije/{cena}&quot;)\r\n\tpublic List&lt;Room&gt;getRoomByCenaLessThan(@PathVariable double cena){\r\n\t\treturn roomService.getRoomByCenaLessThan(cena);\r\n\t}\r\n\t@GetMapping(&quot;/najjeftinije&quot;)\r\n\tpublic List&lt;Room&gt;getByOrderByCenaAsc(){\r\n\t\treturn roomService.getByOrderByCenaAsc();\r\n\t}\r\n\t@GetMapping(&quot;/najskuplje&quot;)\r\n\tpublic List&lt;Room&gt;GetByOrderByCenaDesc(){\r\n\t\treturn roomService.getByOrderByCenaDesc();\r\n\t}\r\n\t@GetMapping(&quot;/{status}&quot;)\r\n\tpublic List&lt;Room&gt;getRoomByStatus(Status status){\r\n\t\treturn roomService.getRoomByStatus(status);\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m a newbie, I&#39;ve tried almost everything I could think of with naming, without success.. :( Thanks for the help!","title":"Issue with method name, Spring Boot","body":"<p>I am working on a booking application for learning purposes,  a problem with a method name in the repository interface</p>\n<pre><code>  Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\n</code></pre>\n<p>and I am always getting this error:</p>\n<pre><code>\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-04-12T01:52:06.873+02:00 ERROR 11064 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'roomController': Unsatisfied dependency expressed through field 'roomService': Error creating bean with name 'roomService': Unsatisfied dependency expressed through field 'roomRepository': Error creating bean with name 'roomRepository' defined in com.beClean.soba1.soba1.Repository.RoomRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract java.util.Optional com.beClean.soba1.soba1.Repository.RoomRepository.findByIdAndStatus(int,com.beClean.soba1.soba1.Entities.Room$status); Reason: Failed to create query for method public abstract java.util.Optional com.beClean.soba1.soba1.Repository.RoomRepository.findByIdAndStatus(int,com.beClean.soba1.soba1.Entities.Room$status); No property 'id' found for type 'Room' Did you mean ''tip''\n</code></pre>\n<p>This is my entity file:</p>\n<pre><code>package com.beClean.soba1.soba1.Entities;\n\nimport java.util.List;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.EnumType;\nimport jakarta.persistence.Enumerated;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.JoinColumn;\nimport jakarta.persistence.ManyToOne;\nimport jakarta.persistence.OneToMany;\nimport jakarta.persistence.Version;\n\n@Entity(name=&quot;soba&quot;)\npublic class Room {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int soba_id;\n    \n    @ManyToOne\n    @JoinColumn(name=&quot;hotel_id&quot;)\n    Hotel hotel;\n    private String tip;\n    private double cena;\n    private String opis;\n    public enum status {SLOBODNO, ZAUZETO}; \n    @Enumerated(EnumType.STRING)\n    private status status;\n    \n    @OneToMany(mappedBy = &quot;room&quot;)\n    private List&lt;Booking&gt;listaRezervacija;\n    \n    //@Version\n    //int versionNumber = 0;\n\n    public Room(int soba_id, Hotel hotel, String tip, double cena, String opis,status status) {\n        this.soba_id = soba_id;\n        this.hotel = hotel;\n        this.tip = tip;\n        this.cena = cena;\n        this.opis = opis;\n        this.status = status;\n    }\n\n    public Room() {\n    }\n\n    public int getSoba_id() {\n        return soba_id;\n    }\n\n    public void setSoba_id(int soba_id) {\n        this.soba_id = soba_id;\n    }\n\n    public Hotel getHotel() {\n        return hotel;\n    }\n\n    public void setHotel(Hotel hotel) {\n        this.hotel = hotel;\n    }\n\n    public String getTip() {\n        return tip;\n    }\n\n    public void setTip(String tip) {\n        this.tip = tip;\n    }\n\n    public double getCena() {\n        return cena;\n    }\n\n    public void setCena(double cena) {\n        this.cena = cena;\n    }\n\n    public String getOpis() {\n        return opis;\n    }\n\n    public void setOpis(String opis) {\n        this.opis = opis;\n    }\n\n    public status getStatus() {\n        return status;\n    }\n\n    public void setStatus(status status) {\n        this.status = status;\n    }\n    \n}\n</code></pre>\n<p>This is my repository file:</p>\n<pre><code>package com.beClean.soba1.soba1.Repository;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.CrudRepository;\n\nimport com.beClean.soba1.soba1.Entities.Room;\nimport com.beClean.soba1.soba1.Entities.Room.status;\n\nimport ch.qos.logback.core.status.Status;\n\n\npublic interface RoomRepository extends CrudRepository&lt;Room, Integer&gt;{\n    \n    @Query(&quot;select s from soba s where s.tip = 'trokrevetna'&quot;)\n    List&lt;Room&gt;findAllTrokrevetna();\n    \n    @Query(&quot;select s from soba s where s.tip = 'dvokrevetna'&quot;)\n    List&lt;Room&gt;findAllDvokrevetna();\n    \n    //nadji sobe koje su jeftinije od date cene\n    List&lt;Room&gt;findByCenaLessThan(double cena);\n    \n    //sortiraj od najjeftinije do najskuplje\n    List&lt;Room&gt; findByOrderByCenaAsc();\n    \n    //sortiraj od najskuplje do najjeftinije\n    List&lt;Room&gt;findByOrderByCenaDesc();\n    \n    \n      Optional&lt;Room&gt; findById(int id);\n    \n\n     List&lt;Room&gt; findByStatus(Status status);\n\n    Optional&lt;Room&gt; findByIdAndStatus(int id, status status);\n}\n</code></pre>\n<p>this is my service file:</p>\n<pre><code>package com.beClean.soba1.soba1.Service;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.bind.annotation.PathVariable;\n\nimport com.beClean.soba1.soba1.Entities.Room;\nimport com.beClean.soba1.soba1.Entities.Room.status;\nimport com.beClean.soba1.soba1.Repository.RoomRepository;\n\nimport ch.qos.logback.core.status.Status;\n\n@Service\npublic class RoomService {\n    @Autowired\n    RoomRepository roomRepository;\n    \n    public List&lt;Room&gt;getAllRooms(){\n        return (List&lt;Room&gt;) roomRepository.findAll();\n    \n    }\n    public Room getRoomById(int id) {\n        return getIfPresentOrThrow(roomRepository.findById(id));\n    }\n    public List&lt;Room&gt; getAllTrokrevetna(){\n    return roomRepository.findAllTrokrevetna();\n}\n\n     public List&lt;Room&gt;getAllDvokrevetna(){\n    return roomRepository.findAllDvokrevetna();\n}\n     public List&lt;Room&gt; getRoomByCenaLessThan(@PathVariable double cena){\n         return roomRepository.findByCenaLessThan(cena);\n     }\n     \n     public List&lt;Room&gt;getByOrderByCenaAsc(){\n         return roomRepository.findByOrderByCenaAsc();\n     }\n     \n     public List&lt;Room&gt; getByOrderByCenaDesc() {\n         return roomRepository.findByOrderByCenaDesc();\n        \n    }\n     public List&lt;Room&gt;getRoomByStatus(Status status){\n     return roomRepository.findByStatus(status);\n }\n     private Room getIfPresentOrThrow(Optional&lt;Room&gt; optionalRoom) {\n            if (!optionalRoom.isPresent()) {\n              throw new IllegalArgumentException();\n            }\n            return optionalRoom.get();\n          }\n   public Room getRoomByIdAndStatus(int id, status status) {\n            return getIfPresentOrThrow(roomRepository.findByIdAndStatus(id, status));\n          }\n}\n</code></pre>\n<p>and the controller file:</p>\n<pre><code>package com.beClean.soba1.soba1.Controller;\n\nimport java.util.List;\nimport java.util.Optional;\n\nimport org.hibernate.engine.query.spi.ReturnMetadata;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.beClean.soba1.soba1.Entities.Room;\nimport com.beClean.soba1.soba1.Entities.Room.status;\nimport com.beClean.soba1.soba1.Service.RoomService;\n\nimport ch.qos.logback.core.status.Status;\n\n@RestController\npublic class RoomController {\n    @Autowired\n    RoomService roomService;\n    \n    @GetMapping(&quot;/room&quot;)\n    public List&lt;Room&gt;getAllRooms(){\n        return(List&lt;Room&gt;) roomService.getAllRooms();\n    }\n\n    @GetMapping(&quot;/room/{id}&quot;)\n    public Room getRoomById(@PathVariable int id) {\n        return roomService.getRoomById(id);\n    }\n    \n    @GetMapping(&quot;/trokrevetna&quot;)\n    public List&lt;Room&gt;getAllTrokrevetna(){\n        return roomService.getAllTrokrevetna();\n    }\n    \n    @GetMapping(&quot;/dvokrevetna&quot;)\n    public List&lt;Room&gt;findAlldvokrevetna(){\n        return roomService.getAllDvokrevetna();\n    }\n    \n    @GetMapping(&quot;/jeftinije/{cena}&quot;)\n    public List&lt;Room&gt;getRoomByCenaLessThan(@PathVariable double cena){\n        return roomService.getRoomByCenaLessThan(cena);\n    }\n    @GetMapping(&quot;/najjeftinije&quot;)\n    public List&lt;Room&gt;getByOrderByCenaAsc(){\n        return roomService.getByOrderByCenaAsc();\n    }\n    @GetMapping(&quot;/najskuplje&quot;)\n    public List&lt;Room&gt;GetByOrderByCenaDesc(){\n        return roomService.getByOrderByCenaDesc();\n    }\n    @GetMapping(&quot;/{status}&quot;)\n    public List&lt;Room&gt;getRoomByStatus(Status status){\n        return roomService.getRoomByStatus(status);\n    }\n}\n</code></pre>\n<p>I'm a newbie, I've tried almost everything I could think of with naming, without success.. :( Thanks for the help!</p>\n"},{"tags":["java","android","firebase","firebase-app-check"],"owner":{"display_name":"user19697344"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681265910,"creation_date":1681108075,"question_id":75974759,"body_markdown":"Hi im struggling to get verified requests from app check, this is my code called on OnStart\r\n\r\n        FirebaseApp.initializeApp(this);\r\n        FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\r\n        firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\r\n\r\n\r\n        startActivity(new Intent(SplashActivity.this, NextActivity.class));\r\n        finish();\r\n\r\n\r\n    }\r\n\r\nit works fine with debug AppcheckProviderFactory but when I publish it on Google Play it won&#39;t work. I double checked firebase project linked to play console, i correctly put app signing sha 256 key from play console then downloaded google service . json . \r\n\r\nthese are the logs,\r\n\r\n2023-04-10 11:53:29.019   943-1283  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : requestIntegrityToken(IntegrityTokenRequest{nonce=ARDLlMSdMYm4hDPBl_y6XXUF9imQvxxPchUzVyKYETnOg92RcM0c7IU_0Oyto2Up-FDH-qNcIwsSZPNQIdqtER1lLRdwpYZfFyQMum-ZA5SKycO4oKu4eo3ZrGM2g_VoNF5Ir4hqJOSjzYBzWo_Iyi3fQNGKxZSsUpwF4i_MBohM, cloudProjectNumber=638805104947})\r\n\r\n2023-04-10 11:53:29.022   943-1284  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : Initiate binding to the service.\r\n\r\n2023-04-10 11:53:29.036   943-943   PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : ServiceConnectionImpl.onServiceConnected(ComponentInfo{com.android.vending/com.google.android.finsky.integrityservice.IntegrityService})\r\n\r\n2023-04-10 11:53:29.038   943-1284  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : linkToDeath\r\n\r\n\r\ni also double checked the current google cloud console project selected is the same as firebase in google play console/ AppIntigrity. What&#39;s wrong with my code or with firebase , how to fix it?","title":"Firebase App Check Unverified Requests Java Android Studio","body":"<p>Hi im struggling to get verified requests from app check, this is my code called on OnStart</p>\n<pre><code>    FirebaseApp.initializeApp(this);\n    FirebaseAppCheck firebaseAppCheck = FirebaseAppCheck.getInstance();\n    firebaseAppCheck.installAppCheckProviderFactory(PlayIntegrityAppCheckProviderFactory.getInstance());\n\n\n    startActivity(new Intent(SplashActivity.this, NextActivity.class));\n    finish();\n\n\n}\n</code></pre>\n<p>it works fine with debug AppcheckProviderFactory but when I publish it on Google Play it won't work. I double checked firebase project linked to play console, i correctly put app signing sha 256 key from play console then downloaded google service . json .</p>\n<p>these are the logs,</p>\n<p>2023-04-10 11:53:29.019   943-1283  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : requestIntegrityToken(IntegrityTokenRequest{nonce=ARDLlMSdMYm4hDPBl_y6XXUF9imQvxxPchUzVyKYETnOg92RcM0c7IU_0Oyto2Up-FDH-qNcIwsSZPNQIdqtER1lLRdwpYZfFyQMum-ZA5SKycO4oKu4eo3ZrGM2g_VoNF5Ir4hqJOSjzYBzWo_Iyi3fQNGKxZSsUpwF4i_MBohM, cloudProjectNumber=638805104947})</p>\n<p>2023-04-10 11:53:29.022   943-1284  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : Initiate binding to the service.</p>\n<p>2023-04-10 11:53:29.036   943-943   PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : ServiceConnectionImpl.onServiceConnected(ComponentInfo{com.android.vending/com.google.android.finsky.integrityservice.IntegrityService})</p>\n<p>2023-04-10 11:53:29.038   943-1284  PlayCore                com.sidd29.hellodost                 I  UID: [10964]  PID: [943] IntegrityService : linkToDeath</p>\n<p>i also double checked the current google cloud console project selected is the same as firebase in google play console/ AppIntigrity. What's wrong with my code or with firebase , how to fix it?</p>\n"},{"tags":["java","spring","gmail"],"comments":[{"owner":{"account_id":196134,"reputation":28676,"user_id":439427,"accept_rate":82,"display_name":"Rubens Mariuzzo"},"score":2,"creation_date":1346866765,"post_id":2016190,"comment_id":16480632,"body_markdown":"There&#39;s a working example at: http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/","body":"There&#39;s a working example at: <a href=\"http://www.mkyong.com/spring/spring-sending-e-mail-via-gmail-smtp-server-with-mailsender/\" rel=\"nofollow noreferrer\">mkyong.com/spring/&hellip;</a>"},{"owner":{"account_id":2160660,"reputation":469,"user_id":1914878,"accept_rate":38,"display_name":"karl li"},"score":0,"creation_date":1374492145,"post_id":2016190,"comment_id":25944441,"body_markdown":"I have resoloved your question.\r\n\r\nhttp://stackoverflow.com/questions/17786132/how-to-implements-an-async-email-service-in-spring","body":"I have resoloved your question.    <a href=\"http://stackoverflow.com/questions/17786132/how-to-implements-an-async-email-service-in-spring\" title=\"how to implements an async email service in spring\">stackoverflow.com/questions/17786132/&hellip;</a>"},{"owner":{"account_id":6177253,"reputation":3097,"user_id":4813777,"display_name":"Taras Melnyk"},"score":0,"creation_date":1545149585,"post_id":2016190,"comment_id":94522046,"body_markdown":"Its very good article: https://www.baeldung.com/spring-email","body":"Its very good article: <a href=\"https://www.baeldung.com/spring-email\" rel=\"nofollow noreferrer\">baeldung.com/spring-email</a>"}],"answers":[{"tags":[],"owner":{"account_id":1079,"reputation":27949,"user_id":1432,"accept_rate":66,"display_name":"jsight"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1262819067,"creation_date":1262819067,"answer_id":2017025,"question_id":2016190,"body_markdown":"This doesn&#39;t seem significantly different, but perhaps try:\r\n\r\n    &lt;bean id=&quot;mailSender&quot; class =&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot; &gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;XXX@gmail.com&quot; /&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;XXX&quot; /&gt;\r\n        &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n        &lt;props&gt;\r\n            &lt;prop key=&quot;mail.smtp.user&quot; value=&quot;XXX@gmail.com&quot; /&gt;\r\n            &lt;prop key=&quot;mail.smtp.password&quot; value=&quot;XXX&quot; /&gt;\r\n            &lt;prop key=&quot;mail.smtp.host&quot;&gt;smtp.gmail.com&lt;/prop&gt;\r\n            &lt;prop key=&quot;mail.smtp.port&quot;&gt;587&lt;/prop&gt;\r\n            &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n            &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n        &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>This doesn't seem significantly different, but perhaps try:</p>\n\n<pre><code>&lt;bean id=\"mailSender\" class =\"org.springframework.mail.javamail.JavaMailSenderImpl\" &gt;\n    &lt;property name=\"username\" value=\"XXX@gmail.com\" /&gt;\n    &lt;property name=\"password\" value=\"XXX\" /&gt;\n    &lt;property name=\"javaMailProperties\"&gt;\n    &lt;props&gt;\n        &lt;prop key=\"mail.smtp.user\" value=\"XXX@gmail.com\" /&gt;\n        &lt;prop key=\"mail.smtp.password\" value=\"XXX\" /&gt;\n        &lt;prop key=\"mail.smtp.host\"&gt;smtp.gmail.com&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.port\"&gt;587&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n    &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1262823278,"creation_date":1262823278,"answer_id":2017321,"question_id":2016190,"body_markdown":"You should specify your &quot;from&quot; address, either as `&lt;prop key=&quot;mail.smtp.from&quot;&gt;XXX@gmail.com&lt;/prop&gt;`, or when creating a message.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>You should specify your \"from\" address, either as <code>&lt;prop key=\"mail.smtp.from\"&gt;XXX@gmail.com&lt;/prop&gt;</code>, or when creating a message.</p>\n"},{"tags":[],"owner":{"account_id":154124,"reputation":456,"user_id":369843,"display_name":"Ken Burcham"},"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1276814495,"creation_date":1276814495,"answer_id":3066176,"question_id":2016190,"body_markdown":"This worked for me:\r\n\r\n            &lt;property name=&quot;host&quot;&gt;&lt;value&gt;smtp.gmail.com&lt;/value&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;port&quot;&gt;&lt;value&gt;587&lt;/value&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;protocol&quot;&gt;&lt;value&gt;smtp&lt;/value&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;username&quot;&gt;&lt;value&gt;${mail.username}&lt;/value&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;password&quot;&gt;&lt;value&gt;${mail.password}&lt;/value&gt;&lt;/property&gt;\r\n    \t\t&lt;property name=&quot;javaMailProperties&quot;&gt;\r\n    \t\t    &lt;props&gt;\r\n    \t\t        &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n    \t\t        &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n    \t\t        &lt;prop key=&quot;mail.smtp.quitwait&quot;&gt;false&lt;/prop&gt;\r\n    \t\t    &lt;/props&gt;\r\n    \t\t&lt;/property&gt;\r\n\r\nThe real trick for me turned out to be that the &quot;protocol&quot; value has to be &quot;smtp&quot; (not &quot;smtps&quot;).  ","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>This worked for me:</p>\n\n<pre><code>        &lt;property name=\"host\"&gt;&lt;value&gt;smtp.gmail.com&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"port\"&gt;&lt;value&gt;587&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"protocol\"&gt;&lt;value&gt;smtp&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"username\"&gt;&lt;value&gt;${mail.username}&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"password\"&gt;&lt;value&gt;${mail.password}&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"javaMailProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.quitwait\"&gt;false&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n</code></pre>\n\n<p>The real trick for me turned out to be that the \"protocol\" value has to be \"smtp\" (not \"smtps\").  </p>\n"},{"tags":[],"owner":{"account_id":106263,"reputation":3151,"user_id":283136,"accept_rate":38,"display_name":"timomeinen"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1506450571,"creation_date":1278599500,"answer_id":3204667,"question_id":2016190,"body_markdown":"The only property needed for GMail is\r\n\r\n    &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>The only property needed for GMail is</p>\n\n<pre><code>&lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":544830,"reputation":2561,"user_id":914404,"accept_rate":100,"display_name":"Marc de Verdelhan"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1371911899,"creation_date":1334309496,"answer_id":10138421,"question_id":2016190,"body_markdown":"This worked **for me**:\r\n\r\n    &lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n    \t&lt;property name=&quot;host&quot; value=&quot;smtp.gmail.com&quot; /&gt;\r\n    \t&lt;property name=&quot;port&quot; value=&quot;465&quot; /&gt;\r\n    \t&lt;property name=&quot;protocol&quot; value=&quot;smtps&quot; /&gt;\r\n    \t&lt;property name=&quot;username&quot; value=&quot;my_email@domain.tld&quot; /&gt;\r\n    \t&lt;property name=&quot;password&quot; value=&quot;my_password&quot; /&gt;\r\n    \t&lt;property name=&quot;javaMailProperties&quot;&gt;\r\n    \t&lt;props&gt;\r\n    \t\t&lt;prop key=&quot;mail.smtps.auth&quot;&gt;true&lt;/prop&gt;\r\n    \t&lt;/props&gt;\r\n    \t&lt;/property&gt;\r\n    &lt;/bean&gt;\r\nSee Google support for further information: http://support.google.com/mail/bin/answer.py?hl=en&amp;answer=78799","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>This worked <strong>for me</strong>:</p>\n\n<pre><code>&lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n    &lt;property name=\"host\" value=\"smtp.gmail.com\" /&gt;\n    &lt;property name=\"port\" value=\"465\" /&gt;\n    &lt;property name=\"protocol\" value=\"smtps\" /&gt;\n    &lt;property name=\"username\" value=\"my_email@domain.tld\" /&gt;\n    &lt;property name=\"password\" value=\"my_password\" /&gt;\n    &lt;property name=\"javaMailProperties\"&gt;\n    &lt;props&gt;\n        &lt;prop key=\"mail.smtps.auth\"&gt;true&lt;/prop&gt;\n    &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>See Google support for further information: <a href=\"http://support.google.com/mail/bin/answer.py?hl=en&amp;answer=78799\" rel=\"nofollow\">http://support.google.com/mail/bin/answer.py?hl=en&amp;answer=78799</a></p>\n"},{"tags":[],"owner":{"account_id":2165882,"reputation":10395,"user_id":1919006,"accept_rate":57,"display_name":"Rakesh Soni"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1370951304,"creation_date":1370951304,"answer_id":17043342,"question_id":2016190,"body_markdown":"Sometime/first time google prevent the sign in to your account by any third party application or using your code. when you will sign in to your account in browser, you will get a message \r\n&quot;**Google prevents a Suspicious attempt to sign in to your account**&quot;  see the screenshot below.\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/m7xWx.png\r\n\r\nclick on the &quot;Was it you&quot; and allow the sign in.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>Sometime/first time google prevent the sign in to your account by any third party application or using your code. when you will sign in to your account in browser, you will get a message \n\"<strong>Google prevents a Suspicious attempt to sign in to your account</strong>\"  see the screenshot below.\n<img src=\"https://i.stack.imgur.com/m7xWx.png\" alt=\"enter image description here\"></p>\n\n<p>click on the \"Was it you\" and allow the sign in.</p>\n"},{"tags":[],"owner":{"account_id":3032414,"reputation":51,"user_id":2571154,"display_name":"Vinod Java JEE"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1373519972,"creation_date":1373519159,"answer_id":17585433,"question_id":2016190,"body_markdown":"For Gmail to work with TLS or SSL:\r\n\r\n&gt; Port for TLS/STARTTLS: 587  \r\n&gt; Port for SSL: 465\r\n\r\nBoth are manditory paramater are `javax.net.ssl.SSLSocketFactory`, `mail.smtp.socketFactory.fallback` and make `mail.smtp.starttls.enable` to false.\r\n\r\n    &lt;beans&gt;\r\n    \t&lt;bean id=&quot;mailSender&quot; class=&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot;&gt;\r\n            &lt;property name=&quot;host&quot;&gt;&lt;value&gt;smtp.gmail.com&lt;/value&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;port&quot;&gt;&lt;value&gt;465&lt;/value&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;protocol&quot;&gt;&lt;value&gt;smtp&lt;/value&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;username&quot;&gt;&lt;value&gt;XXXXX@gmail.com&lt;/value&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;password&quot;&gt;&lt;value&gt;XXXX&lt;/value&gt;&lt;/property&gt;\r\n            &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n                &lt;props&gt;\r\n                    &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;false&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.smtp.quitwait&quot;&gt;false&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.smtp.socketFactory.class&quot;&gt;javax.net.ssl.SSLSocketFactory&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.smtp.socketFactory.fallback&quot;&gt;false&lt;/prop&gt;\r\n                    &lt;prop key=&quot;mail.debug&quot;&gt;true&lt;/prop&gt;\r\n                &lt;/props&gt;\r\n            &lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;mailMail&quot; class=&quot;com.embitel.service.email.EmailService&quot;&gt;\r\n    \t\t&lt;property name=&quot;mailSender&quot; ref=&quot;mailSender&quot; /&gt;\r\n    \t\t&lt;property name=&quot;simpleMailMessage&quot; ref=&quot;customeMailMessage&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t&lt;bean id=&quot;customeMailMessage&quot; class=&quot;org.springframework.mail.SimpleMailMessage&quot;&gt;\r\n    \t\t&lt;property name=&quot;from&quot; value=&quot;XXXX@gmail.com&quot; /&gt;\r\n    \t\t&lt;property name=&quot;to&quot; value=&quot;yyyyy@gmail.com&quot; /&gt;\r\n    \t\t&lt;property name=&quot;subject&quot; value=&quot;Testing Subject Line for email senind..&quot; /&gt;\r\n    \t\t&lt;property name=&quot;text&quot;&gt;\r\n    \t\t\t&lt;value&gt;\r\n    \t\t&lt;![CDATA[\r\n    \t\t\tDear %s,\r\n    \t\t\tMail Content : %s\r\n    \t\t]]&gt;\r\n    \t\t\t&lt;/value&gt;\r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    &lt;/beans&gt;\r\n\r\nworked like a charm!!!\r\n\r\n ","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>For Gmail to work with TLS or SSL:</p>\n\n<blockquote>\n  <p>Port for TLS/STARTTLS: 587<br>\n  Port for SSL: 465</p>\n</blockquote>\n\n<p>Both are manditory paramater are <code>javax.net.ssl.SSLSocketFactory</code>, <code>mail.smtp.socketFactory.fallback</code> and make <code>mail.smtp.starttls.enable</code> to false.</p>\n\n<pre><code>&lt;beans&gt;\n    &lt;bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\"&gt;\n        &lt;property name=\"host\"&gt;&lt;value&gt;smtp.gmail.com&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"port\"&gt;&lt;value&gt;465&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"protocol\"&gt;&lt;value&gt;smtp&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"username\"&gt;&lt;value&gt;XXXXX@gmail.com&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"password\"&gt;&lt;value&gt;XXXX&lt;/value&gt;&lt;/property&gt;\n        &lt;property name=\"javaMailProperties\"&gt;\n            &lt;props&gt;\n                &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.starttls.enable\"&gt;false&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.quitwait\"&gt;false&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.socketFactory.class\"&gt;javax.net.ssl.SSLSocketFactory&lt;/prop&gt;\n                &lt;prop key=\"mail.smtp.socketFactory.fallback\"&gt;false&lt;/prop&gt;\n                &lt;prop key=\"mail.debug\"&gt;true&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"mailMail\" class=\"com.embitel.service.email.EmailService\"&gt;\n        &lt;property name=\"mailSender\" ref=\"mailSender\" /&gt;\n        &lt;property name=\"simpleMailMessage\" ref=\"customeMailMessage\" /&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"customeMailMessage\" class=\"org.springframework.mail.SimpleMailMessage\"&gt;\n        &lt;property name=\"from\" value=\"XXXX@gmail.com\" /&gt;\n        &lt;property name=\"to\" value=\"yyyyy@gmail.com\" /&gt;\n        &lt;property name=\"subject\" value=\"Testing Subject Line for email senind..\" /&gt;\n        &lt;property name=\"text\"&gt;\n            &lt;value&gt;\n        &lt;![CDATA[\n            Dear %s,\n            Mail Content : %s\n        ]]&gt;\n            &lt;/value&gt;\n        &lt;/property&gt;\n    &lt;/bean&gt;\n&lt;/beans&gt;\n</code></pre>\n\n<p>worked like a charm!!!</p>\n"},{"tags":[],"owner":{"account_id":2160660,"reputation":469,"user_id":1914878,"accept_rate":38,"display_name":"karl li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1374492225,"creation_date":1374492225,"answer_id":17786325,"question_id":2016190,"body_markdown":"I have resoloved your question.\r\n\r\nhttps://stackoverflow.com/questions/17786132/how-to-implements-an-async-email-service-in-spring\r\n\r\nNote, this works on spring 3 , so I am not sure with spring 2.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>I have resoloved your question.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/17786132/how-to-implements-an-async-email-service-in-spring\">how to implements an async email service in spring</a></p>\n\n<p>Note, this works on spring 3 , so I am not sure with spring 2.</p>\n"},{"tags":[],"owner":{"account_id":268400,"reputation":624,"user_id":557143,"display_name":"Hemant Nagpal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1420303076,"creation_date":1420301838,"answer_id":27756817,"question_id":2016190,"body_markdown":"I was also facing this authentication exception and this is because of the gmail security. Open the following url \r\n\r\nhttps://www.google.com/settings/security/lesssecureapps \r\n \r\nand enable the less security feature.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>I was also facing this authentication exception and this is because of the gmail security. Open the following url </p>\n\n<p><a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"nofollow\">https://www.google.com/settings/security/lesssecureapps</a> </p>\n\n<p>and enable the less security feature.</p>\n"},{"tags":[],"owner":{"account_id":383976,"reputation":17281,"user_id":3166303,"accept_rate":88,"display_name":"leeor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1440093417,"creation_date":1440093417,"answer_id":32125156,"question_id":2016190,"body_markdown":"Here&#39;s the javaConfig that worked for me:\r\n\r\n        public JavaMailSender getJavaMailSender()\r\n    \t{\r\n    \t\tJavaMailSenderImpl sender = new JavaMailSenderImpl();\r\n    \t\tsender.setProtocol(&quot;smtp&quot;);\r\n    \t\tsender.setHost(&quot;smtp.gmail.com&quot;);\r\n    \t\tsender.setPort(587);\r\n    \t\tsender.setUsername(&quot;username&quot;);\r\n    \t\tsender.setPassword(&quot;password&quot;);\r\n    \r\n    \t\tProperties mailProps = new Properties();\r\n    \t\tmailProps.put(&quot;mail.smtps.auth&quot;, &quot;true&quot;);\r\n    \t\tmailProps.put(&quot;mail.smtp.starttls.enable&quot;, &quot;true&quot;);\r\n    \t\tmailProps.put(&quot;mail.smtp.debug&quot;, &quot;true&quot;);\r\n    \r\n    \t\tsender.setJavaMailProperties(mailProps);\r\n    \r\n    \t\treturn sender;\r\n    \t}\r\n\r\nI think you need to use port 587 for the TLS to work.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>Here's the javaConfig that worked for me:</p>\n\n<pre><code>    public JavaMailSender getJavaMailSender()\n    {\n        JavaMailSenderImpl sender = new JavaMailSenderImpl();\n        sender.setProtocol(\"smtp\");\n        sender.setHost(\"smtp.gmail.com\");\n        sender.setPort(587);\n        sender.setUsername(\"username\");\n        sender.setPassword(\"password\");\n\n        Properties mailProps = new Properties();\n        mailProps.put(\"mail.smtps.auth\", \"true\");\n        mailProps.put(\"mail.smtp.starttls.enable\", \"true\");\n        mailProps.put(\"mail.smtp.debug\", \"true\");\n\n        sender.setJavaMailProperties(mailProps);\n\n        return sender;\n    }\n</code></pre>\n\n<p>I think you need to use port 587 for the TLS to work.</p>\n"},{"tags":[],"owner":{"account_id":3834174,"reputation":19718,"user_id":3178944,"accept_rate":61,"display_name":"Simon"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1453231001,"creation_date":1453231001,"answer_id":34885171,"question_id":2016190,"body_markdown":"I struggled for an hour to find the right settings to send an email from Gmail using javamailsender and finally did it. I&#39;m posting this as I cannot find a comprehensive example to send through gmail with javamailsender so hopefully this will help someone who want to do the same thing:\r\n\r\nSTEP 1:\r\n\r\nAdd the following settings to mail.properties:\r\n\r\n    mail.protocol=smtp\r\n    mail.host=smtp.gmail.com\r\n    mail.port=465\r\n    mail.smtp.socketFactory.port=465\r\n    mail.smtp.auth=true\r\n    mail.smtp.starttls.enable=true\r\n    mail.smtp.debug=true\r\n    mail.smtp.starttls.required=true\r\n    mail.smtp.socketFactory.fallback=false\r\n    mail.from=XXX@gmail.com\r\n    mail.username=XXX@gmail.com\r\n    mail.password=my_password\r\n\r\nAnd then in your mailConfiguration class, @Value them in:\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:mail.properties&quot;)\r\n    public class MailConfiguration {\r\n    \r\n        @Value(&quot;${mail.protocol}&quot;)\r\n        private String protocol;\r\n        @Value(&quot;${mail.host}&quot;)\r\n        private String host;\r\n        @Value(&quot;${mail.port}&quot;)\r\n        private int port;\r\n        @Value(&quot;${mail.smtp.socketFactory.port}&quot;)\r\n        private int socketPort;\r\n        @Value(&quot;${mail.smtp.auth}&quot;)\r\n        private boolean auth;\r\n        @Value(&quot;${mail.smtp.starttls.enable}&quot;)\r\n        private boolean starttls;\r\n        @Value(&quot;${mail.smtp.starttls.required}&quot;)\r\n        private boolean startlls_required;\r\n        @Value(&quot;${mail.smtp.debug}&quot;)\r\n        private boolean debug;\r\n        @Value(&quot;${mail.smtp.socketFactory.fallback}&quot;)\r\n        private boolean fallback;\r\n        @Value(&quot;${mail.from}&quot;)\r\n        private String from;\r\n        @Value(&quot;${mail.username}&quot;)\r\n        private String username;\r\n        @Value(&quot;${mail.password}&quot;)\r\n        private String password;\r\n    \r\n        @Bean\r\n        public JavaMailSender javaMailSender() {\r\n            JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\r\n    \r\n            Properties mailProperties = new Properties();\r\n            mailProperties.put(&quot;mail.smtp.auth&quot;, auth);\r\n            mailProperties.put(&quot;mail.smtp.starttls.enable&quot;, starttls);\r\n            mailProperties.put(&quot;mail.smtp.starttls.required&quot;, startlls_required);\r\n            mailProperties.put(&quot;mail.smtp.socketFactory.port&quot;, socketPort);\r\n            mailProperties.put(&quot;mail.smtp.debug&quot;, debug);\r\n            mailProperties.put(&quot;mail.smtp.socketFactory.class&quot;, &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n            mailProperties.put(&quot;mail.smtp.socketFactory.fallback&quot;, fallback);\r\n    \r\n            mailSender.setJavaMailProperties(mailProperties);\r\n            mailSender.setHost(host);\r\n            mailSender.setPort(port);\r\n            mailSender.setProtocol(protocol);\r\n            mailSender.setUsername(username);\r\n            mailSender.setPassword(password);\r\n            return mailSender;\r\n        }\r\n    }\r\n\r\nPlease note that my Spring server is SSL enabled so that is why I&#39;m using port 465. For SSL use port 465. If you are using 487, you must be using TLS.\r\n\r\nSTEP 2:\r\n\r\nFollowing this link and choose to **turn on** access to less secure apps.\r\n\r\nhttps://www.google.com/settings/security/lesssecureapps\r\n\r\nSTEP 3:\r\n\r\nTurn off AVAST if you have it on your PC. The AVAST Mail Shield conflicts with sending out emails. If you do not turn it off, you will get the following error:\r\n\r\n&gt; Servlet.service() for servlet [dispatcherServlet] in context with path\r\n&gt; [] threw exception [Request processing failed; nested exception is\r\n&gt; org.springframework.mail.MailSendException: Mail server connection\r\n&gt; failed; nested exception is javax.mail.MessagingException: Exception\r\n&gt; reading response;   nested exception is:\r\n&gt; \tjavax.net.ssl.SSLHandshakeException:\r\n&gt; sun.security.validator.ValidatorException: PKIX path building failed:\r\n&gt; sun.security.provider.certpath.SunCertPathBuilderException: unable to\r\n&gt; find valid certification path to requested target.","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>I struggled for an hour to find the right settings to send an email from Gmail using javamailsender and finally did it. I'm posting this as I cannot find a comprehensive example to send through gmail with javamailsender so hopefully this will help someone who want to do the same thing:</p>\n\n<p>STEP 1:</p>\n\n<p>Add the following settings to mail.properties:</p>\n\n<pre><code>mail.protocol=smtp\nmail.host=smtp.gmail.com\nmail.port=465\nmail.smtp.socketFactory.port=465\nmail.smtp.auth=true\nmail.smtp.starttls.enable=true\nmail.smtp.debug=true\nmail.smtp.starttls.required=true\nmail.smtp.socketFactory.fallback=false\nmail.from=XXX@gmail.com\nmail.username=XXX@gmail.com\nmail.password=my_password\n</code></pre>\n\n<p>And then in your mailConfiguration class, @Value them in:</p>\n\n<pre><code>@Configuration\n@PropertySource(\"classpath:mail.properties\")\npublic class MailConfiguration {\n\n    @Value(\"${mail.protocol}\")\n    private String protocol;\n    @Value(\"${mail.host}\")\n    private String host;\n    @Value(\"${mail.port}\")\n    private int port;\n    @Value(\"${mail.smtp.socketFactory.port}\")\n    private int socketPort;\n    @Value(\"${mail.smtp.auth}\")\n    private boolean auth;\n    @Value(\"${mail.smtp.starttls.enable}\")\n    private boolean starttls;\n    @Value(\"${mail.smtp.starttls.required}\")\n    private boolean startlls_required;\n    @Value(\"${mail.smtp.debug}\")\n    private boolean debug;\n    @Value(\"${mail.smtp.socketFactory.fallback}\")\n    private boolean fallback;\n    @Value(\"${mail.from}\")\n    private String from;\n    @Value(\"${mail.username}\")\n    private String username;\n    @Value(\"${mail.password}\")\n    private String password;\n\n    @Bean\n    public JavaMailSender javaMailSender() {\n        JavaMailSenderImpl mailSender = new JavaMailSenderImpl();\n\n        Properties mailProperties = new Properties();\n        mailProperties.put(\"mail.smtp.auth\", auth);\n        mailProperties.put(\"mail.smtp.starttls.enable\", starttls);\n        mailProperties.put(\"mail.smtp.starttls.required\", startlls_required);\n        mailProperties.put(\"mail.smtp.socketFactory.port\", socketPort);\n        mailProperties.put(\"mail.smtp.debug\", debug);\n        mailProperties.put(\"mail.smtp.socketFactory.class\", \"javax.net.ssl.SSLSocketFactory\");\n        mailProperties.put(\"mail.smtp.socketFactory.fallback\", fallback);\n\n        mailSender.setJavaMailProperties(mailProperties);\n        mailSender.setHost(host);\n        mailSender.setPort(port);\n        mailSender.setProtocol(protocol);\n        mailSender.setUsername(username);\n        mailSender.setPassword(password);\n        return mailSender;\n    }\n}\n</code></pre>\n\n<p>Please note that my Spring server is SSL enabled so that is why I'm using port 465. For SSL use port 465. If you are using 487, you must be using TLS.</p>\n\n<p>STEP 2:</p>\n\n<p>Following this link and choose to <strong>turn on</strong> access to less secure apps.</p>\n\n<p><a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"noreferrer\">https://www.google.com/settings/security/lesssecureapps</a></p>\n\n<p>STEP 3:</p>\n\n<p>Turn off AVAST if you have it on your PC. The AVAST Mail Shield conflicts with sending out emails. If you do not turn it off, you will get the following error:</p>\n\n<blockquote>\n  <p>Servlet.service() for servlet [dispatcherServlet] in context with path\n  [] threw exception [Request processing failed; nested exception is\n  org.springframework.mail.MailSendException: Mail server connection\n  failed; nested exception is javax.mail.MessagingException: Exception\n  reading response;   nested exception is:\n    javax.net.ssl.SSLHandshakeException:\n  sun.security.validator.ValidatorException: PKIX path building failed:\n  sun.security.provider.certpath.SunCertPathBuilderException: unable to\n  find valid certification path to requested target.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":214895,"reputation":1163,"user_id":469154,"accept_rate":50,"display_name":"Emanuel George Hategan"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1488561935,"creation_date":1488561935,"answer_id":42585017,"question_id":2016190,"body_markdown":"The config below (yaml format) worked for me after \r\n\r\n - I disabled 2 factor authentication https://support.google.com/accounts/answer/1064203?hl=en&amp;ref_topic=7189195\r\n - I enabled less secure apps https://www.google.com/settings/security/lesssecureapps \r\n\r\n----------\r\n\r\n    spring.mail:\r\n      host: smtp.gmail.com\r\n      port: 465\r\n      protocol: smtp\r\n      username: xyz@gmail.com\r\n      password: abc\r\n      test-connection: true\r\n      properties:\r\n        &quot;mail.smtp.auth&quot;: true\r\n        &quot;mail.smtp.starttls.enable&quot;: true\r\n        &quot;mail.smtp.starttls.required&quot;: true\r\n        &quot;mail.smtp.socketFactory.class&quot;: javax.net.ssl.SSLSocketFactory\r\n        &quot;mail.debug&quot;: true","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>The config below (yaml format) worked for me after </p>\n\n<ul>\n<li>I disabled 2 factor authentication <a href=\"https://support.google.com/accounts/answer/1064203?hl=en&amp;ref_topic=7189195\" rel=\"noreferrer\">https://support.google.com/accounts/answer/1064203?hl=en&amp;ref_topic=7189195</a></li>\n<li>I enabled less secure apps <a href=\"https://www.google.com/settings/security/lesssecureapps\" rel=\"noreferrer\">https://www.google.com/settings/security/lesssecureapps</a> </li>\n</ul>\n\n<hr>\n\n<pre><code>spring.mail:\n  host: smtp.gmail.com\n  port: 465\n  protocol: smtp\n  username: xyz@gmail.com\n  password: abc\n  test-connection: true\n  properties:\n    \"mail.smtp.auth\": true\n    \"mail.smtp.starttls.enable\": true\n    \"mail.smtp.starttls.required\": true\n    \"mail.smtp.socketFactory.class\": javax.net.ssl.SSLSocketFactory\n    \"mail.debug\": true\n</code></pre>\n"}],"owner":{"account_id":880991,"reputation":581,"user_id":245040,"display_name":"Andrew"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97493,"favorite_count":0,"down_vote_count":0,"up_vote_count":40,"answer_count":12,"score":40,"last_activity_date":1681265598,"creation_date":1262811603,"question_id":2016190,"body_markdown":"I am trying to find the correct properties to use to connect to the Gmail SMTP sever using the JavaMailSenderImpl class.\r\n\r\nLet me first say that I have tried the approach found [here][1].  This worked fine.  But when I tried the configuration below that post with the exact same authentication information I received a javax.mail.AuthenticationFailedException.  \r\n\r\nMy currently configuration looks like this.\r\n\r\n    &lt;bean id=&quot;mailSender&quot; class =&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot; &gt;\r\n    \t&lt;property name=&quot;username&quot; value=&quot;XXX@gmail.com&quot; /&gt;\r\n    \t&lt;property name=&quot;password&quot; value=&quot;XXX&quot; /&gt;\r\n    \t&lt;property name=&quot;javaMailProperties&quot;&gt;\r\n\t    &lt;props&gt;\r\n\t    \t&lt;prop key=&quot;mail.smtp.host&quot;&gt;smtp.gmail.com&lt;/prop&gt;\r\n\t    \t&lt;prop key=&quot;mail.smtp.port&quot;&gt;587&lt;/prop&gt;\r\n\t    \t&lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n\t    &lt;/props&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n\r\nWhy am I still getting this javax.mail.AuthenticationFailedException if I know that my credentials are correct.\r\n\r\nUpdate\r\n======\r\n\r\nHere is my updated code based on the answers below.  I am still receiving the same exception.\r\n\r\n    &lt;bean id=&quot;mailSender&quot; class =&quot;org.springframework.mail.javamail.JavaMailSenderImpl&quot; &gt;\r\n\t    &lt;property name=&quot;username&quot; value=&quot;XXX@gmail.com&quot; /&gt;\r\n\t    &lt;property name=&quot;password&quot; value=&quot;XXX&quot; /&gt;\r\n\t    &lt;property name=&quot;javaMailProperties&quot;&gt;\r\n\t    &lt;props&gt;\r\n\t    \t&lt;prop key=&quot;mail.smtp.from&quot;&gt;XXX@gmail.com&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.user&quot;&gt;XXX@gmail.com&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.password&quot;&gt;XXX&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.host&quot;&gt;smtp.gmail.com&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.port&quot;&gt;587&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.auth&quot;&gt;true&lt;/prop&gt;\r\n\t        &lt;prop key=&quot;mail.smtp.starttls.enable&quot;&gt;true&lt;/prop&gt;\r\n\t    &lt;/props&gt;\r\n\t    &lt;/property&gt;\r\n\t&lt;/bean&gt;\r\n\r\n  [1]: https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail/47452#47452\r\n  [2]: https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail/1013676#1013676\r\n  [3]: https://stackoverflow.com/questions/854493/problem-configuring-springs-mailsender-for-our-smtp-server-but-gmail-works","title":"How to configure Spring JavaMailSenderImpl for Gmail","body":"<p>I am trying to find the correct properties to use to connect to the Gmail SMTP sever using the JavaMailSenderImpl class.</p>\n\n<p>Let me first say that I have tried the approach found <a href=\"https://stackoverflow.com/questions/46663/how-do-you-send-email-from-a-java-app-using-gmail/47452#47452\">here</a>.  This worked fine.  But when I tried the configuration below that post with the exact same authentication information I received a javax.mail.AuthenticationFailedException.  </p>\n\n<p>My currently configuration looks like this.</p>\n\n<pre><code>&lt;bean id=\"mailSender\" class =\"org.springframework.mail.javamail.JavaMailSenderImpl\" &gt;\n    &lt;property name=\"username\" value=\"XXX@gmail.com\" /&gt;\n    &lt;property name=\"password\" value=\"XXX\" /&gt;\n    &lt;property name=\"javaMailProperties\"&gt;\n    &lt;props&gt;\n        &lt;prop key=\"mail.smtp.host\"&gt;smtp.gmail.com&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.port\"&gt;587&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n    &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>Why am I still getting this javax.mail.AuthenticationFailedException if I know that my credentials are correct.</p>\n\n<h1>Update</h1>\n\n<p>Here is my updated code based on the answers below.  I am still receiving the same exception.</p>\n\n<pre><code>&lt;bean id=\"mailSender\" class =\"org.springframework.mail.javamail.JavaMailSenderImpl\" &gt;\n    &lt;property name=\"username\" value=\"XXX@gmail.com\" /&gt;\n    &lt;property name=\"password\" value=\"XXX\" /&gt;\n    &lt;property name=\"javaMailProperties\"&gt;\n    &lt;props&gt;\n        &lt;prop key=\"mail.smtp.from\"&gt;XXX@gmail.com&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.user\"&gt;XXX@gmail.com&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.password\"&gt;XXX&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.host\"&gt;smtp.gmail.com&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.port\"&gt;587&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.auth\"&gt;true&lt;/prop&gt;\n        &lt;prop key=\"mail.smtp.starttls.enable\"&gt;true&lt;/prop&gt;\n    &lt;/props&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":["java","ffmpeg"],"answers":[{"tags":[],"owner":{"account_id":11176081,"reputation":517,"user_id":8201635,"display_name":"B. Stackhouse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681265426,"creation_date":1681265426,"answer_id":75991366,"question_id":75922665,"body_markdown":"With MacOS there is a program for converting audio file to a new format, so if the song is a MP3, I convert it on the fly and play it as a MP4. This work just fine and is a quick conversion.\r\n\r\n    /usr/bin/afconvert -d aac -b 256000 input.mp3 output.mp4 -f mp4f","title":"JAAD exception &quot;movie box at end of file&quot;","body":"<p>With MacOS there is a program for converting audio file to a new format, so if the song is a MP3, I convert it on the fly and play it as a MP4. This work just fine and is a quick conversion.</p>\n<pre><code>/usr/bin/afconvert -d aac -b 256000 input.mp3 output.mp4 -f mp4f\n</code></pre>\n"}],"owner":{"account_id":11176081,"reputation":517,"user_id":8201635,"display_name":"B. Stackhouse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75991366,"answer_count":1,"score":0,"last_activity_date":1681265426,"creation_date":1680546598,"question_id":75922665,"body_markdown":"I&#39;m using JAAD (Java Advanced Audio Decoder) version 0.8.4, and m4a songs imported by the iTunes player from a CD play correctly. Any mp3 songs converted by ffmpeg to m4a results in an JAAD error during the following statement. I have seen this question before, but never any solution. What do I need to do?\r\n\r\nfor example:\r\n\r\n    ffmpeg -i input.mp3 -vn -c:a aac -b:a 192k output.m4a  \r\n    \r\n    final AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(songFile.toURI().toURL());\r\n    \r\n    net.sourceforge.jaad.mp4.MP4Exception: movie box at end of file, need random access\r\n\r\n","title":"JAAD exception &quot;movie box at end of file&quot;","body":"<p>I'm using JAAD (Java Advanced Audio Decoder) version 0.8.4, and m4a songs imported by the iTunes player from a CD play correctly. Any mp3 songs converted by ffmpeg to m4a results in an JAAD error during the following statement. I have seen this question before, but never any solution. What do I need to do?</p>\n<p>for example:</p>\n<pre><code>ffmpeg -i input.mp3 -vn -c:a aac -b:a 192k output.m4a  \n\nfinal AudioInputStream audioInputStream = AudioSystem.getAudioInputStream(songFile.toURI().toURL());\n\nnet.sourceforge.jaad.mp4.MP4Exception: movie box at end of file, need random access\n</code></pre>\n"},{"tags":["java","flutter","dart","mobile-application","webex"],"owner":{"account_id":18695221,"reputation":15,"user_id":13628687,"display_name":"Danish Ghazi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":110,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681265242,"creation_date":1681265242,"question_id":75991353,"body_markdown":"Im quite new in Flutter and trying to build a flutter mobile application that can integrate Webex SDK in it. But so far I can&#39;t really find any documentations about integrating Webex SDK into a Flutter application. My question is, is it possible as of today? and if so is there any relevant documentations I can refer? Appreciate all the help I can get.","title":"Webex SDK for Flutter Mobile Application","body":"<p>Im quite new in Flutter and trying to build a flutter mobile application that can integrate Webex SDK in it. But so far I can't really find any documentations about integrating Webex SDK into a Flutter application. My question is, is it possible as of today? and if so is there any relevant documentations I can refer? Appreciate all the help I can get.</p>\n"},{"tags":["java","arrays","object"],"comments":[{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1680754384,"post_id":75945740,"comment_id":133952658,"body_markdown":"&quot;can&#39;t use any map functions&quot; — So this is schoolwork? If so, say so. That affects the Answers.","body":"&quot;can&#39;t use any map functions&quot; — So this is schoolwork? If so, say so. That affects the Answers."}],"answers":[{"tags":[],"owner":{"account_id":28228538,"reputation":11,"user_id":21578116,"display_name":"Stack Clone"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681263027,"creation_date":1680755037,"answer_id":75945803,"question_id":75945740,"body_markdown":"You are using an array and for every alphabetic, you need to shift the element. Therefore, use a linked list as an efficient approach.\r\n \r\nHere is the example how you can use it:\r\n\r\n    public class ItemMorettiList {\r\n        private Node head;\r\n        private int size;\r\n    \r\n        public ItemMorettiList() {\r\n            head = null;\r\n            size = 0;\r\n        }\r\n    \r\n        public boolean add(ItemMoretti product) {\r\n            Node newNode = new Node(product);\r\n            Node current = head;\r\n            Node prev = null;\r\n    \r\n            while (current != null &amp;&amp; product.getName().compareToIgnoreCase(current.data.getName()) &gt; 0) {\r\n                prev = current;\r\n                current = current.next;\r\n            }\r\n    \r\n            if (prev == null) {\r\n                head = newNode;\r\n            } else {\r\n                prev.next = newNode;\r\n            }\r\n    \r\n            newNode.next = current;\r\n            size++;\r\n    \r\n            return true;\r\n        }\r\n    \r\n        private class Node {\r\n            public ItemMoretti data;\r\n            public Node next;\r\n    \r\n            public Node(ItemMoretti data) {\r\n                this.data = data;\r\n                this.next = null;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nThe `ItemMorettiList` class utilizes the `Node` object to keep its linked list in sustained order. Each `Node` holds an `ItemMoretti` object and a connection to the ensuing Node. \r\n\r\nThe `add()` method is responsible for traversing the list to detect the appropriate position alphabetically, where to append the new `Node` by putting it between the most recent and the imminent `Node`. In such way, this implementation manages to preserve the linked list at a fixed and sorted sequence.\r\n","title":"sorting list full of objects in alphabetical order","body":"<p>You are using an array and for every alphabetic, you need to shift the element. Therefore, use a linked list as an efficient approach.</p>\n<p>Here is the example how you can use it:</p>\n<pre><code>public class ItemMorettiList {\n    private Node head;\n    private int size;\n\n    public ItemMorettiList() {\n        head = null;\n        size = 0;\n    }\n\n    public boolean add(ItemMoretti product) {\n        Node newNode = new Node(product);\n        Node current = head;\n        Node prev = null;\n\n        while (current != null &amp;&amp; product.getName().compareToIgnoreCase(current.data.getName()) &gt; 0) {\n            prev = current;\n            current = current.next;\n        }\n\n        if (prev == null) {\n            head = newNode;\n        } else {\n            prev.next = newNode;\n        }\n\n        newNode.next = current;\n        size++;\n\n        return true;\n    }\n\n    private class Node {\n        public ItemMoretti data;\n        public Node next;\n\n        public Node(ItemMoretti data) {\n            this.data = data;\n            this.next = null;\n        }\n    }\n}\n</code></pre>\n<p>The <code>ItemMorettiList</code> class utilizes the <code>Node</code> object to keep its linked list in sustained order. Each <code>Node</code> holds an <code>ItemMoretti</code> object and a connection to the ensuing Node.</p>\n<p>The <code>add()</code> method is responsible for traversing the list to detect the appropriate position alphabetically, where to append the new <code>Node</code> by putting it between the most recent and the imminent <code>Node</code>. In such way, this implementation manages to preserve the linked list at a fixed and sorted sequence.</p>\n"},{"tags":[],"owner":{"account_id":9704231,"reputation":48,"user_id":7198134,"display_name":"Lahiru Pathirana"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680757735,"creation_date":1680757735,"answer_id":75946003,"question_id":75945740,"body_markdown":"  Used bubbleSort algorithm.\r\n\r\n    private static ItemMoretti[] getSortedByName(ItemMoretti[] itemMorettis)\r\n      {\r\n        for (int i = 0; i &lt; itemMorettis.length; i++)\r\n        {\r\n          boolean changed = false;\r\n          for (int j = 0; j &lt; itemMorettis.length - 1; j++)\r\n          {\r\n            ItemMoretti o1 = itemMorettis[j];\r\n            ItemMoretti o2 = itemMorettis[j + 1];\r\n            if (o1.getName().compareTo(o2.getName()) &gt; 0)\r\n            {\r\n              itemMorettis[j] = o2;\r\n              itemMorettis[j + 1] = o1;\r\n              changed = true;\r\n            }\r\n          }\r\n          if (!changed)\r\n          {\r\n            break;\r\n          }\r\n        }\r\n        return itemMorettis;\r\n      }","title":"sorting list full of objects in alphabetical order","body":"<p>Used bubbleSort algorithm.</p>\n<pre><code>private static ItemMoretti[] getSortedByName(ItemMoretti[] itemMorettis)\n  {\n    for (int i = 0; i &lt; itemMorettis.length; i++)\n    {\n      boolean changed = false;\n      for (int j = 0; j &lt; itemMorettis.length - 1; j++)\n      {\n        ItemMoretti o1 = itemMorettis[j];\n        ItemMoretti o2 = itemMorettis[j + 1];\n        if (o1.getName().compareTo(o2.getName()) &gt; 0)\n        {\n          itemMorettis[j] = o2;\n          itemMorettis[j + 1] = o1;\n          changed = true;\n        }\n      }\n      if (!changed)\n      {\n        break;\n      }\n    }\n    return itemMorettis;\n  }\n</code></pre>\n"}],"owner":{"account_id":23035625,"reputation":13,"user_id":17154427,"display_name":"jeremslol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75946003,"answer_count":2,"score":0,"last_activity_date":1681263027,"creation_date":1680754263,"question_id":75945740,"body_markdown":"Have an array that can hold up to 10 objects, and want to make it so that the objects, when stored, are put into alphabetical order given the name in the object. Thing is, they keep overwriting each other. I am trying to make a key-value array, but can&#39;t use any map functions or anything like that.\r\n\r\n```\t\r\npublic boolean add(ItemMoretti product) {\r\n\t\tint i = findIndex(product.getName());\r\n\t\tint j = 0;\r\n\t\tboolean success = false;\r\n\t\t\r\n\t\tif(mySize &lt; myItems.length) {\r\n\r\n\t\t\tfor(j = (mySize - 1); j &gt; i; j--) {\r\n\t\t\t\tmyItems[j + 1] = myItems[j];\r\n\t\t\t}//for\r\n\t\t\t\r\n\t\t\tmyItems[i] = product;\r\n\t\t\tmySize++;\r\n\t\t\tsuccess = true;\r\n\t\t}//if\r\n\t\treturn success;\r\n\t}//add\r\n```\r\nHere is the findIndex method as well.\r\n```\r\n\tprivate int findIndex(String keyValue) {\r\n\t\tint x = 0;\r\n\t\tint index = -1;\r\n\t\tboolean found = false;\r\n\t\t\r\n\t\twhile((x &lt;= mySize) &amp;&amp; (!found)) \r\n\t\t\tif((mySize == 0) || (myItems[x].getName().compareToIgnoreCase(keyValue) == 0)) {\r\n\t\t\t\tindex = x;\r\n\t\t\t\tfound = true;\r\n\t\t\t}//if\r\n\t\t\telse x++;\r\n\t\t\r\n\t\treturn index;\t\r\n\r\n\t}//findIndex\r\n```","title":"sorting list full of objects in alphabetical order","body":"<p>Have an array that can hold up to 10 objects, and want to make it so that the objects, when stored, are put into alphabetical order given the name in the object. Thing is, they keep overwriting each other. I am trying to make a key-value array, but can't use any map functions or anything like that.</p>\n<pre><code>public boolean add(ItemMoretti product) {\n        int i = findIndex(product.getName());\n        int j = 0;\n        boolean success = false;\n        \n        if(mySize &lt; myItems.length) {\n\n            for(j = (mySize - 1); j &gt; i; j--) {\n                myItems[j + 1] = myItems[j];\n            }//for\n            \n            myItems[i] = product;\n            mySize++;\n            success = true;\n        }//if\n        return success;\n    }//add\n</code></pre>\n<p>Here is the findIndex method as well.</p>\n<pre><code>    private int findIndex(String keyValue) {\n        int x = 0;\n        int index = -1;\n        boolean found = false;\n        \n        while((x &lt;= mySize) &amp;&amp; (!found)) \n            if((mySize == 0) || (myItems[x].getName().compareToIgnoreCase(keyValue) == 0)) {\n                index = x;\n                found = true;\n            }//if\n            else x++;\n        \n        return index;   \n\n    }//findIndex\n</code></pre>\n"},{"tags":["java","eclipse","hibernate","jpa","teradata"],"answers":[{"tags":[],"owner":{"account_id":1992582,"reputation":332,"user_id":1786276,"display_name":"John Harris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1452630921,"creation_date":1452630921,"answer_id":34753283,"question_id":34750918,"body_markdown":"Does the table you&#39;re trying to expand have a primary key? I&#39;ve had issues with generating entities when there is no primary key defined on the table. The workaround was to add one then remove it after generation if it&#39;s unwanted.","title":"Columns not loading in Data Source Explorer or JPA Generate Custom Entities Wizard in Eclipse","body":"<p>Does the table you're trying to expand have a primary key? I've had issues with generating entities when there is no primary key defined on the table. The workaround was to add one then remove it after generation if it's unwanted.</p>\n"},{"tags":[],"owner":{"account_id":6817695,"reputation":11,"user_id":5245771,"display_name":"whbennett"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1454420991,"creation_date":1454420991,"answer_id":35155281,"question_id":34750918,"body_markdown":"To anyone else who comes this way looking for an answer, I did figure it out.\r\n\r\nThe User that you use for your database connection in Eclipse needs to have SELECT  privileges on DBC.","title":"Columns not loading in Data Source Explorer or JPA Generate Custom Entities Wizard in Eclipse","body":"<p>To anyone else who comes this way looking for an answer, I did figure it out.</p>\n\n<p>The User that you use for your database connection in Eclipse needs to have SELECT  privileges on DBC.</p>\n"},{"tags":[],"owner":{"account_id":2845087,"reputation":1698,"user_id":2443720,"accept_rate":85,"display_name":"Raj"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1506195179,"creation_date":1506195179,"answer_id":46383519,"question_id":34750918,"body_markdown":"I was facing the same using with MY Sql driver &quot;mysql-connector-java-6.0.6-bin.jar&quot; . I just changed the driver version to &quot;mysql-connector-java-5.1.44-bin.jar&quot; and it started working . ","title":"Columns not loading in Data Source Explorer or JPA Generate Custom Entities Wizard in Eclipse","body":"<p>I was facing the same using with MY Sql driver \"mysql-connector-java-6.0.6-bin.jar\" . I just changed the driver version to \"mysql-connector-java-5.1.44-bin.jar\" and it started working . </p>\n"},{"tags":[],"owner":{"account_id":21119299,"reputation":16,"user_id":15525709,"display_name":"Riyadhul Taher"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681261985,"creation_date":1681261985,"answer_id":75991181,"question_id":34750918,"body_markdown":"I had this issue and it turned out that my Database Connection was set to User access only. I changed it to All and I was then able to generate the columns.\r\n\r\nYou can do this by going to Data Source Explorer -&gt; Database Connections -&gt; Right click and select Properties under your connection -&gt; Change Catalog drop down to &quot;All&quot;.","title":"Columns not loading in Data Source Explorer or JPA Generate Custom Entities Wizard in Eclipse","body":"<p>I had this issue and it turned out that my Database Connection was set to User access only. I changed it to All and I was then able to generate the columns.</p>\n<p>You can do this by going to Data Source Explorer -&gt; Database Connections -&gt; Right click and select Properties under your connection -&gt; Change Catalog drop down to &quot;All&quot;.</p>\n"}],"owner":{"account_id":6817695,"reputation":11,"user_id":5245771,"display_name":"whbennett"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1490,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":35155281,"answer_count":4,"score":1,"last_activity_date":1681261985,"creation_date":1452622227,"question_id":34750918,"body_markdown":"I am trying to generate a JPA Entity class based on a table in a Teradata database using the JPA Tools in Eclipse. My Eclipse version is Luna 4.4.1. I&#39;ve established a connection to the database via JDBC and I&#39;m able to load my schema in the Data Source Explorer. I&#39;ve also successfully executed queries from the SQL Scrapbook.\r\n\r\nThe Data Source Explorer sees my schema, and all of the tables in the schema, however when I click the drop down for the Columns, nothing appears.\r\n\r\nThe closest question I&#39;ve seen so far is this: https://stackoverflow.com/questions/23246846/eclipselink-and-jpa-columns-of-table-not-showing-up/23334207#23334207\r\n\r\nHowever, my issue is that no columns appear when I expand the nodes of the tree.\r\n\r\nWhen I attempt to create my Entity class using the Generate Custom Entity Wizard, I can select the schema and select tables from the schema, but none of the columns load.\r\n\r\nHas anyone seen this before?","title":"Columns not loading in Data Source Explorer or JPA Generate Custom Entities Wizard in Eclipse","body":"<p>I am trying to generate a JPA Entity class based on a table in a Teradata database using the JPA Tools in Eclipse. My Eclipse version is Luna 4.4.1. I've established a connection to the database via JDBC and I'm able to load my schema in the Data Source Explorer. I've also successfully executed queries from the SQL Scrapbook.</p>\n\n<p>The Data Source Explorer sees my schema, and all of the tables in the schema, however when I click the drop down for the Columns, nothing appears.</p>\n\n<p>The closest question I've seen so far is this: <a href=\"https://stackoverflow.com/questions/23246846/eclipselink-and-jpa-columns-of-table-not-showing-up/23334207#23334207\">EclipseLink and JPA columns of table not showing up</a></p>\n\n<p>However, my issue is that no columns appear when I expand the nodes of the tree.</p>\n\n<p>When I attempt to create my Entity class using the Generate Custom Entity Wizard, I can select the schema and select tables from the schema, but none of the columns load.</p>\n\n<p>Has anyone seen this before?</p>\n"},{"tags":["java","caching","spring-data-jpa"],"comments":[{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":1,"creation_date":1523358405,"post_id":49751925,"comment_id":86518483,"body_markdown":"Spring Data JPA is just a wrapper around JPA. If you want to use an L2 cache, it totally depends on the used JPA implementation (which by default in Spring Boot would be Hibernate).","body":"Spring Data JPA is just a wrapper around JPA. If you want to use an L2 cache, it totally depends on the used JPA implementation (which by default in Spring Boot would be Hibernate)."},{"owner":{"account_id":357660,"reputation":1314,"user_id":697961,"accept_rate":62,"display_name":"Maxi Wu"},"score":0,"creation_date":1523417921,"post_id":49751925,"comment_id":86547636,"body_markdown":"@dunni does Java 8 has a bundle JPA implementation?","body":"@dunni does Java 8 has a bundle JPA implementation?"},{"owner":{"account_id":212417,"reputation":43624,"user_id":465223,"accept_rate":75,"display_name":"dunni"},"score":1,"creation_date":1523423240,"post_id":49751925,"comment_id":86549099,"body_markdown":"No. JPA is not part of the JDK","body":"No. JPA is not part of the JDK"}],"answers":[{"tags":[],"owner":{"account_id":357660,"reputation":1314,"user_id":697961,"accept_rate":62,"display_name":"Maxi Wu"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1643291237,"creation_date":1523844695,"answer_id":49848746,"question_id":49751925,"body_markdown":"After some testing and the help from @dunni, I will answer my own question.\r\nSpring uses Hibernate as an implementation of JPA. Spring data provides some wrapper over Hibernate. Also need to choose a caching implementation.\r\n\r\nTo enable L2 cache, add these properties to your project.\r\n\r\n 1. spring.jpa.properties.hibernate.cache.use_second_level_cache=true\r\n 2. spring.jpa.properties.hibernate.cache.use_query_cache=true\r\n 3. spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory\r\n\r\nalso add these dependencies:\r\nhibernate-ehcache\r\n\r\nThen, add @Cacheable(true) to your entity model class.\r\nExtends a repository interface, Spring will generate the implementation using naming convention. For example\r\n\r\n    @QueryHints({@QueryHint(name=&quot;org.hibernate.cacheable&quot;, value=&quot;true&quot;)})\r\n    Entity findByName(String name)\r\n\r\nYou can also implement the interface. But that will require adding a hint to your query object to activate L2 cache.\r\n\r\n    query.setHint(&quot;org.hibernate.cacheable&quot;, true);\r\n\r\nTo verify the cache is working, you can use the following properties to see if the SQL has been executed.\r\n\r\n 1. spring.jpa.show-sql=true\r\n 2. spring.jpa.properties.hibernate.format_sql=true","title":"Does spring-data-jpa has a L2 cache implementation?","body":"<p>After some testing and the help from @dunni, I will answer my own question.\nSpring uses Hibernate as an implementation of JPA. Spring data provides some wrapper over Hibernate. Also need to choose a caching implementation.</p>\n<p>To enable L2 cache, add these properties to your project.</p>\n<ol>\n<li>spring.jpa.properties.hibernate.cache.use_second_level_cache=true</li>\n<li>spring.jpa.properties.hibernate.cache.use_query_cache=true</li>\n<li>spring.jpa.properties.hibernate.cache.region.factory_class=org.hibernate.cache.ehcache.EhCacheRegionFactory</li>\n</ol>\n<p>also add these dependencies:\nhibernate-ehcache</p>\n<p>Then, add @Cacheable(true) to your entity model class.\nExtends a repository interface, Spring will generate the implementation using naming convention. For example</p>\n<pre><code>@QueryHints({@QueryHint(name=&quot;org.hibernate.cacheable&quot;, value=&quot;true&quot;)})\nEntity findByName(String name)\n</code></pre>\n<p>You can also implement the interface. But that will require adding a hint to your query object to activate L2 cache.</p>\n<pre><code>query.setHint(&quot;org.hibernate.cacheable&quot;, true);\n</code></pre>\n<p>To verify the cache is working, you can use the following properties to see if the SQL has been executed.</p>\n<ol>\n<li>spring.jpa.show-sql=true</li>\n<li>spring.jpa.properties.hibernate.format_sql=true</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1007051,"reputation":477,"user_id":1020512,"display_name":"Kambaa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681261714,"creation_date":1681261714,"answer_id":75991165,"question_id":49751925,"body_markdown":"after reading your comment and checking my code, my code started working. Also, with adding `spring.jpa.properties.hibernate.generate_statistics=true`\r\ni can see my db calls more detailed. [demo project link][1]\r\n\r\n\r\n[![Log of calling same endpoint twice][2]][2]\r\n\r\nThank you\r\n\r\n  [1]: https://github.com/Kambaa/spring-boot-3-examples/tree/hibernate-2nd-level-cache\r\n  [2]: https://i.stack.imgur.com/51oN4.png","title":"Does spring-data-jpa has a L2 cache implementation?","body":"<p>after reading your comment and checking my code, my code started working. Also, with adding <code>spring.jpa.properties.hibernate.generate_statistics=true</code>\ni can see my db calls more detailed. <a href=\"https://github.com/Kambaa/spring-boot-3-examples/tree/hibernate-2nd-level-cache\" rel=\"nofollow noreferrer\">demo project link</a></p>\n<p><a href=\"https://i.stack.imgur.com/51oN4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/51oN4.png\" alt=\"Log of calling same endpoint twice\" /></a></p>\n<p>Thank you</p>\n"}],"owner":{"account_id":357660,"reputation":1314,"user_id":697961,"accept_rate":62,"display_name":"Maxi Wu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4377,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":49848746,"answer_count":2,"score":5,"last_activity_date":1681261714,"creation_date":1523357977,"question_id":49751925,"body_markdown":"I am trying to create Repository with L2 cache with minimal setting. My database is postgresql.\r\n\r\nI start with spring-boot-sample-data-jpa-archetype project using maven.\r\nI have removed the HSQL and create a DataSource bean to connect to postgresql.\r\nAlso use ddl to create schema and imported the initial script data.\r\n\r\nI have also added the @Cacheable to my entities.\r\nThen I use unit test to query an entity 10 times using repository. It took 1~49ms. So that leaves me two questions.\r\n\r\n1. Does repository benefits from L1 cache? how do I know if I am hitting the cache or data source?\r\n2. How to enable L2 cache? does Spring data has its own implementation?\r\n","title":"Does spring-data-jpa has a L2 cache implementation?","body":"<p>I am trying to create Repository with L2 cache with minimal setting. My database is postgresql.</p>\n\n<p>I start with spring-boot-sample-data-jpa-archetype project using maven.\nI have removed the HSQL and create a DataSource bean to connect to postgresql.\nAlso use ddl to create schema and imported the initial script data.</p>\n\n<p>I have also added the @Cacheable to my entities.\nThen I use unit test to query an entity 10 times using repository. It took 1~49ms. So that leaves me two questions.</p>\n\n<ol>\n<li>Does repository benefits from L1 cache? how do I know if I am hitting the cache or data source?</li>\n<li>How to enable L2 cache? does Spring data has its own implementation?</li>\n</ol>\n"},{"tags":["c#","java","php",".net","wcf"],"comments":[{"owner":{"account_id":1485247,"reputation":872,"user_id":1393662,"accept_rate":83,"display_name":"MSUH"},"score":0,"creation_date":1338555392,"post_id":10849920,"comment_id":14131648,"body_markdown":"I have added another question to get more clarification, Thing is I have to make a service API through which different client can communicate with my application for data input, data processing, Please relate the question with this scenario and provide response.","body":"I have added another question to get more clarification, Thing is I have to make a service API through which different client can communicate with my application for data input, data processing, Please relate the question with this scenario and provide response."}],"answers":[{"tags":[],"owner":{"account_id":121415,"reputation":175544,"user_id":314488,"accept_rate":100,"display_name":"Pranay Rana"},"down_vote_count":0,"up_vote_count":69,"is_accepted":true,"score":69,"last_activity_date":1338552543,"creation_date":1338552543,"answer_id":10849991,"question_id":10849920,"body_markdown":"[Choosing the right WCF binding][1] \r\n\r\n![enter image description here][2]\r\n\r\n 1. **BasicHttpBinding**: Basic web service communication. Exposes WCF services as legacy ASMX web services. Used for interoperability. No security by default. \r\n 2. **WSHttpBinding**: Web services with WS-* support. Supports transactions and reliable messaging. \r\n 3. **WSDualHttpBinding**: Web services with duplex contract and transaction support. \r\n 4. **WSFederationHttpBinding**: Web services with federated security. Supports transactions. \r\n 5. **MsmqIntegrationBinding**: Communication directly with MSMQ applications. Supports transactions. \r\n 6. **NetMsmqBinding**: Communication between WCF applications by using queuing. Supports transactions. \r\n 7. **NetNamedPipeBinding**: Communication between WCF applications on same computer. Supports duplex contracts and transactions. \r\n 8. **NetPeerTcpBinding**: Communication between computers across peer-to-peer services. Supports duplex contracts. \r\n 9. **NetTcpBinding**: Communication between WCF applications across computers. Supports duplex contracts and transactions.\r\n\r\n\r\n  [1]: http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx\r\n  [2]: http://i.stack.imgur.com/SFHSD.jpg","title":"Different WCF Bindings, their differences and compatibility with other platforms","body":"<p><a href=\"http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx\" rel=\"noreferrer\">Choosing the right WCF binding</a> </p>\n\n<p><img src=\"https://i.stack.imgur.com/SFHSD.jpg\" alt=\"enter image description here\"></p>\n\n<ol>\n<li><strong>BasicHttpBinding</strong>: Basic web service communication. Exposes WCF services as legacy ASMX web services. Used for interoperability. No security by default. </li>\n<li><strong>WSHttpBinding</strong>: Web services with WS-* support. Supports transactions and reliable messaging. </li>\n<li><strong>WSDualHttpBinding</strong>: Web services with duplex contract and transaction support. </li>\n<li><strong>WSFederationHttpBinding</strong>: Web services with federated security. Supports transactions. </li>\n<li><strong>MsmqIntegrationBinding</strong>: Communication directly with MSMQ applications. Supports transactions. </li>\n<li><strong>NetMsmqBinding</strong>: Communication between WCF applications by using queuing. Supports transactions. </li>\n<li><strong>NetNamedPipeBinding</strong>: Communication between WCF applications on same computer. Supports duplex contracts and transactions. </li>\n<li><strong>NetPeerTcpBinding</strong>: Communication between computers across peer-to-peer services. Supports duplex contracts. </li>\n<li><strong>NetTcpBinding</strong>: Communication between WCF applications across computers. Supports duplex contracts and transactions.</li>\n</ol>\n"},{"tags":[],"owner":{"display_name":"user1968951"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1363062654,"creation_date":1359355845,"answer_id":14556863,"question_id":10849920,"body_markdown":" - If you are required to create a binding that is globally\r\n   inter-operable, use `http` binding.\r\n   \r\n - For internal use, but consumers are in separate servers use `tcp`\r\n   binding. It less inter-operable, but using binary encoding which is\r\n   faster.\r\n   \r\n - Use `named pipe` binding for intra-server communication, that is for\r\n   consumers hosted in same servers. Named pipe binding is the fastest\r\n   one in wcf allowed bindings.\r\n\r\nUse bindings appropriately, make your project best.","title":"Different WCF Bindings, their differences and compatibility with other platforms","body":"<ul>\n<li><p>If you are required to create a binding that is globally\ninter-operable, use <code>http</code> binding.</p></li>\n<li><p>For internal use, but consumers are in separate servers use <code>tcp</code>\nbinding. It less inter-operable, but using binary encoding which is\nfaster.</p></li>\n<li><p>Use <code>named pipe</code> binding for intra-server communication, that is for\nconsumers hosted in same servers. Named pipe binding is the fastest\none in wcf allowed bindings.</p></li>\n</ul>\n\n<p>Use bindings appropriately, make your project best.</p>\n"},{"tags":[],"owner":{"account_id":1621020,"reputation":4899,"user_id":1497565,"accept_rate":83,"display_name":"Mukus"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1681260685,"creation_date":1401158079,"answer_id":23880259,"question_id":10849920,"body_markdown":"To add to the accepted answer, if you want to bind your **JSON** request to an object in WCF, use **webHttpBinding**","title":"Different WCF Bindings, their differences and compatibility with other platforms","body":"<p>To add to the accepted answer, if you want to bind your <strong>JSON</strong> request to an object in WCF, use <strong>webHttpBinding</strong></p>\n"}],"owner":{"account_id":1485247,"reputation":872,"user_id":1393662,"accept_rate":83,"display_name":"MSUH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28268,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"accepted_answer_id":10849991,"answer_count":3,"score":20,"last_activity_date":1681260685,"creation_date":1338552229,"question_id":10849920,"body_markdown":"I am looking for some good technical details on Topic of WCF bindings, I am interested to know following things.\r\n\r\n 1. List of Different WCF Bindings with its special purpose and limitation.\r\n 2. Compatibility/Interoperability with other platform like consuming WCF service in Java, PHP client. Which binding is supported and which is not.\r\n 3. If I want to get/post secure data through service API which binding should I use if client application is in Java or Php ?\r\n\r\nI have browsed through different material over internet but it is not in detail and somewhat scattered. Waiting for some good responses.","title":"Different WCF Bindings, their differences and compatibility with other platforms","body":"<p>I am looking for some good technical details on Topic of WCF bindings, I am interested to know following things.</p>\n\n<ol>\n<li>List of Different WCF Bindings with its special purpose and limitation.</li>\n<li>Compatibility/Interoperability with other platform like consuming WCF service in Java, PHP client. Which binding is supported and which is not.</li>\n<li>If I want to get/post secure data through service API which binding should I use if client application is in Java or Php ?</li>\n</ol>\n\n<p>I have browsed through different material over internet but it is not in detail and somewhat scattered. Waiting for some good responses.</p>\n"},{"tags":["java","datetime","java-8","timezone","java.util.date"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":3,"creation_date":1680261899,"post_id":75897903,"comment_id":133872322,"body_markdown":"`Date` does not contain a timezone. It represents a point in time, like `Instant`. This looks like an [XY Problem](http://xyproblem.info/). `date` and `dateFinal` will always be the same. How about using `zdt` as your final result?","body":"<code>Date</code> does not contain a timezone. It represents a point in time, like <code>Instant</code>. This looks like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. <code>date</code> and <code>dateFinal</code> will always be the same. How about using <code>zdt</code> as your final result?"},{"owner":{"account_id":317896,"reputation":233676,"user_id":634824,"accept_rate":87,"display_name":"Matt Johnson-Pint"},"score":2,"creation_date":1680280027,"post_id":75897903,"comment_id":133877082,"body_markdown":"Also, don&#39;t use mix the old and new APIs.  `Date` is old, and you don&#39;t need it in most cases anymore.  Use only the `java.time.*` types.","body":"Also, don&#39;t use mix the old and new APIs.  <code>Date</code> is old, and you don&#39;t need it in most cases anymore.  Use only the <code>java.time.*</code> types."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680333165,"post_id":75897903,"comment_id":133883822,"body_markdown":"Since a `Date` with a specified time zone is impossible, don’t you simply want `ZonedDateTime.now(zoneId)`?","body":"Since a <code>Date</code> with a specified time zone is impossible, don’t you simply want <code>ZonedDateTime.now(zoneId)</code>?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680333536,"post_id":75897903,"comment_id":133883853,"body_markdown":"*But my result is: `2023-03-31T16:10:13.854+0530`.* I didn’t get that exactly. An old-fashioned `Date` did not print in that format. So how exactly did you get that?","body":"<i>But my result is: <code>2023-03-31T16:10:13.854+0530</code>.</i> I didn’t get that exactly. An old-fashioned <code>Date</code> did not print in that format. So how exactly did you get that?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1680422618,"post_id":75897903,"comment_id":133893351,"body_markdown":"Does this answer your question? [Convert date string (EST) to Java Date (UTC)](https://stackoverflow.com/questions/12919067/convert-date-string-est-to-java-date-utc)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12919067/convert-date-string-est-to-java-date-utc\">Convert date string (EST) to Java Date (UTC)</a>"}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681260063,"creation_date":1680329191,"answer_id":75904537,"question_id":75897903,"body_markdown":"# tl;dr\r\n\r\nCore Concept: *`java.util.Date` does **not** have a time zone*. The `Date#toString` method lies to you.\r\n\r\nIf handed a legacy `java.util.Date` object, immediately convert to `java.time.Instant`.\r\n\r\n    Instant instant = myJavaUtilDate.toInstant() ;\r\n\r\nThen apply your desired time zone.\r\n\r\n    ZonedDateTime zdt = instant.atZone( ZoneId.of( &quot;Asia/Dubai&quot; ) ) ;\r\n\r\n# Use only *java.time*\r\n\r\nYour date-time handling should involve **only the *java.time* classes**. \r\n\r\nThe date-time classes outside that package are now legacy, terribly flawed in poor design. The legacy classes were supplanted by *java.time* in JSR 310, implemented in Java 8+.\r\n\r\nYou said:\r\n\r\n```java\r\n// initailize date object\r\nDate date = new Date();\r\n```\r\n\r\nDid you mean `java.util.Date` or `java.sql.Date`? Both are legacy. \r\n\r\n - The first was replaced by `java.time.Instant`. Both the legacy and modern classes represent a moment as seen with an offset from UTC of zero hours-minutes-seconds.\r\n - The second was replaced by `java.time.LocalDate`. The legacy class *pretends* to represent a date-only, but because of faulty design it actually contains a time-of-day and an assumption of an offset of zero. In contrast, the modern class truly represents a date-only, without time-of-day, and without time zone or offset.\r\n\r\nInstead use this code:\r\n\r\n    Instant instant = Instant.now() ;  // Capture the current moment as seen in UTC (zero offset).\r\n\r\nYou said:\r\n\r\n```java\r\n// get time zone\r\nZoneId zoneId = ZoneId.of(&quot;Asia/Dubai&quot;);\r\n```\r\n\r\nGood. A `ZoneId` is the modern way to represent a time zone. And `Asia/Dubai`, in `Continent/Region` is the correct naming for [real time zones][1].\r\n\r\nYou said:\r\n\r\n```java\r\n// create zonedDateTime object\r\nZonedDateTime zdt = ZonedDateTime.ofInstant(date.toInstant(), zoneId);\r\n```\r\n\r\nUsing our `Instant` object seen above, use this code:\r\n\r\n    ZonedDateTime zdt = instant.atZone( zoneId ) ;\r\n\r\nBoth `instant` &amp; `zdt` here represent the same simultaneous moment, the same point on the timeline. But the latter is viewed through the wall-clock time used by people in a particular region.\r\n\r\nYou said:\r\n\r\n```java\r\n// instant of zonedDateTime\r\nInstant instant = zdt.toInstant();\r\n```\r\n\r\nYes, you can extract an `Instant` from a `ZonedDateTime`. But this code in unnecessary here as we already instantiate a `Instant` object to capture the current moment.\r\n\r\nYou said:\r\n\r\n```java\r\n// convert instant to specified zone\r\ninstant.atZone(zoneId);\r\n```\r\n\r\nThe problem here is that an `Instant` object, like all the *java.time* objects, is [immutable][2]. You can alter (“mutate”) the content of an `Instant` object after its creation. That moment is frozen forever.\r\n\r\nFurthermore, calling `Instant#atZone` returns a fresh new `ZonedDateTime` object. We saw just that in our code earlier above. Your code shown above ignores the new `ZonedDateTime` object returned by `atZone`.\r\n\r\nYou said:\r\n\r\n```java\r\n// Get Local Date Time Object\r\nLocalDateTime ldt = LocalDateTime.ofInstant(instant,zoneId);\r\n```\r\n\r\nTwo problem here: \r\n\r\n- You can more easily obtain a `LocalDateTime` from the `ZonedDateTime` instantiated above. `LocalDateTime ldt = zdt.toLocalDateTime() ;`\r\n- You may not be aware that in creating the `LocalDateTime`, you are **discarding valuable information**: the time zone. So you are left with merely a date and a time-of-day. But such a value is inherently ambiguous. For example, if noon on January 23 this year, we do not know if you meant in noon in Tokyo Japan, noon in Toulouse France, or noon in Toledo Ohio US — three very different moments several hours apart. \r\n\r\nTip: If you do not yet fully grok date-time handling, avoid using `LocalDateTime`. In most business situations, we generally care about a moment, a specific point on the timeline. `LocalDateTime` does not fit that case. \r\n\r\n\r\nYou said:\r\n\r\n```java\r\n//Convert it back to Date Object\r\nDate dateFinal = java.util.Date.from(Instant.from(ldt.atZone(zoneId)));\r\n```\r\n\r\nTwo problems here:\r\n\r\n - You can more easily write `java.util.Date.from( instant )` as we already have an `Instant` in hand. Or, if we had just the `ZonedDateTime` seen above, `java.util.Date.from( zdt.toInstant() )`.\r\n - You would usually never write this in new code. Convert to the legacy code only where necessary to interoperate with old code not yet updated to *java.time*. Otherwise, avoid both `Date` classes like the plague. Ditto for `Calendar`, `SimpleDateFormat`, etc.\r\n\r\nYour title asks:\r\n\r\n&gt;[Convert a Date object to a specified timeZone Date Object]\r\n\r\nI do not understand what you mean. The `java.util.Date` class represents a moment in UTC. It has no time zone. \r\n\r\n(Actually there *is* a time zone buried with its code, but this code is practically irrelevant, and represents another of those terrible design decisions found in the legacy date-time classes.)\r\n\r\nYou said:\r\n\r\n&gt; timeZone Date object in JAVA 8 Date date = Fri Mar 31 16:10:13 IST\r\n\r\nDo not be fooled by the `java.util.Date#toString` method. That method unfortunately injects the JVM’s current default time zone while generating text. While well-intentioned, this creates the false illusion that `Date` includes a time zone in its meaning when in fact it is &quot;in UTC&quot; (has an offset from UTC of zero). \r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n  [2]: https://en.wikipedia.org/wiki/Immutable_object","title":"TimeZone Date Conversion [Convert a Date object to a specified timeZone Date Object]","body":"<h1>tl;dr</h1>\n<p>Core Concept: <em><code>java.util.Date</code> does <strong>not</strong> have a time zone</em>. The <code>Date#toString</code> method lies to you.</p>\n<p>If handed a legacy <code>java.util.Date</code> object, immediately convert to <code>java.time.Instant</code>.</p>\n<pre><code>Instant instant = myJavaUtilDate.toInstant() ;\n</code></pre>\n<p>Then apply your desired time zone.</p>\n<pre><code>ZonedDateTime zdt = instant.atZone( ZoneId.of( &quot;Asia/Dubai&quot; ) ) ;\n</code></pre>\n<h1>Use only <em>java.time</em></h1>\n<p>Your date-time handling should involve <strong>only the <em>java.time</em> classes</strong>.</p>\n<p>The date-time classes outside that package are now legacy, terribly flawed in poor design. The legacy classes were supplanted by <em>java.time</em> in JSR 310, implemented in Java 8+.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// initailize date object\nDate date = new Date();\n</code></pre>\n<p>Did you mean <code>java.util.Date</code> or <code>java.sql.Date</code>? Both are legacy.</p>\n<ul>\n<li>The first was replaced by <code>java.time.Instant</code>. Both the legacy and modern classes represent a moment as seen with an offset from UTC of zero hours-minutes-seconds.</li>\n<li>The second was replaced by <code>java.time.LocalDate</code>. The legacy class <em>pretends</em> to represent a date-only, but because of faulty design it actually contains a time-of-day and an assumption of an offset of zero. In contrast, the modern class truly represents a date-only, without time-of-day, and without time zone or offset.</li>\n</ul>\n<p>Instead use this code:</p>\n<pre><code>Instant instant = Instant.now() ;  // Capture the current moment as seen in UTC (zero offset).\n</code></pre>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// get time zone\nZoneId zoneId = ZoneId.of(&quot;Asia/Dubai&quot;);\n</code></pre>\n<p>Good. A <code>ZoneId</code> is the modern way to represent a time zone. And <code>Asia/Dubai</code>, in <code>Continent/Region</code> is the correct naming for <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"nofollow noreferrer\">real time zones</a>.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// create zonedDateTime object\nZonedDateTime zdt = ZonedDateTime.ofInstant(date.toInstant(), zoneId);\n</code></pre>\n<p>Using our <code>Instant</code> object seen above, use this code:</p>\n<pre><code>ZonedDateTime zdt = instant.atZone( zoneId ) ;\n</code></pre>\n<p>Both <code>instant</code> &amp; <code>zdt</code> here represent the same simultaneous moment, the same point on the timeline. But the latter is viewed through the wall-clock time used by people in a particular region.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// instant of zonedDateTime\nInstant instant = zdt.toInstant();\n</code></pre>\n<p>Yes, you can extract an <code>Instant</code> from a <code>ZonedDateTime</code>. But this code in unnecessary here as we already instantiate a <code>Instant</code> object to capture the current moment.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// convert instant to specified zone\ninstant.atZone(zoneId);\n</code></pre>\n<p>The problem here is that an <code>Instant</code> object, like all the <em>java.time</em> objects, is <a href=\"https://en.wikipedia.org/wiki/Immutable_object\" rel=\"nofollow noreferrer\">immutable</a>. You can alter (“mutate”) the content of an <code>Instant</code> object after its creation. That moment is frozen forever.</p>\n<p>Furthermore, calling <code>Instant#atZone</code> returns a fresh new <code>ZonedDateTime</code> object. We saw just that in our code earlier above. Your code shown above ignores the new <code>ZonedDateTime</code> object returned by <code>atZone</code>.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Get Local Date Time Object\nLocalDateTime ldt = LocalDateTime.ofInstant(instant,zoneId);\n</code></pre>\n<p>Two problem here:</p>\n<ul>\n<li>You can more easily obtain a <code>LocalDateTime</code> from the <code>ZonedDateTime</code> instantiated above. <code>LocalDateTime ldt = zdt.toLocalDateTime() ;</code></li>\n<li>You may not be aware that in creating the <code>LocalDateTime</code>, you are <strong>discarding valuable information</strong>: the time zone. So you are left with merely a date and a time-of-day. But such a value is inherently ambiguous. For example, if noon on January 23 this year, we do not know if you meant in noon in Tokyo Japan, noon in Toulouse France, or noon in Toledo Ohio US — three very different moments several hours apart.</li>\n</ul>\n<p>Tip: If you do not yet fully grok date-time handling, avoid using <code>LocalDateTime</code>. In most business situations, we generally care about a moment, a specific point on the timeline. <code>LocalDateTime</code> does not fit that case.</p>\n<p>You said:</p>\n<pre class=\"lang-java prettyprint-override\"><code>//Convert it back to Date Object\nDate dateFinal = java.util.Date.from(Instant.from(ldt.atZone(zoneId)));\n</code></pre>\n<p>Two problems here:</p>\n<ul>\n<li>You can more easily write <code>java.util.Date.from( instant )</code> as we already have an <code>Instant</code> in hand. Or, if we had just the <code>ZonedDateTime</code> seen above, <code>java.util.Date.from( zdt.toInstant() )</code>.</li>\n<li>You would usually never write this in new code. Convert to the legacy code only where necessary to interoperate with old code not yet updated to <em>java.time</em>. Otherwise, avoid both <code>Date</code> classes like the plague. Ditto for <code>Calendar</code>, <code>SimpleDateFormat</code>, etc.</li>\n</ul>\n<p>Your title asks:</p>\n<blockquote>\n<p>[Convert a Date object to a specified timeZone Date Object]</p>\n</blockquote>\n<p>I do not understand what you mean. The <code>java.util.Date</code> class represents a moment in UTC. It has no time zone.</p>\n<p>(Actually there <em>is</em> a time zone buried with its code, but this code is practically irrelevant, and represents another of those terrible design decisions found in the legacy date-time classes.)</p>\n<p>You said:</p>\n<blockquote>\n<p>timeZone Date object in JAVA 8 Date date = Fri Mar 31 16:10:13 IST</p>\n</blockquote>\n<p>Do not be fooled by the <code>java.util.Date#toString</code> method. That method unfortunately injects the JVM’s current default time zone while generating text. While well-intentioned, this creates the false illusion that <code>Date</code> includes a time zone in its meaning when in fact it is &quot;in UTC&quot; (has an offset from UTC of zero).</p>\n"}],"owner":{"account_id":28177714,"reputation":11,"user_id":21535261,"display_name":"P Roopasree"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1681260063,"creation_date":1680261313,"question_id":75897903,"body_markdown":"```\r\nMy approach :\r\n// initailize date object\r\nDate date = new Date();\r\n// get time zone\r\nZoneId zoneId = ZoneId.of(&quot;Asia/Dubai&quot;);\r\n\r\n// create zonedDateTime object\r\nZonedDateTime zdt = ZonedDateTime.ofInstant(date.toInstant(), zoneId);\r\n\r\n// instant of zonedDateTime\r\nInstant instant = zdt.toInstant();\r\n\r\n// convert instant to specified zone\r\ninstant.atZone(zoneId);\r\n\r\n// Get Local Date Time Object\r\nLocalDateTime ldt = LocalDateTime.ofInstant(instant,zoneId);\r\n\r\n//Convert it back to Date Object\r\nDate dateFinal = java.util.Date.from(Instant.from(ldt.atZone(zoneId)));\r\n```\r\n\r\nCan anyone help me with conversion of timeZone Date object in Java 8\r\n`Date date = Fri Mar 31 16:10:13 IST`.\r\nNow I need to convert this Date to any given timeZone Date object\r\n\r\nDesired result:\r\n\r\n&gt; `Date resultDate = Fri Mar 31 14:40:13 GST`\r\n\r\nBasically here I used (Asia/Dubai) Time Zone\r\n\r\nBut my result is: `2023-03-31T16:10:13.854+0530`. I am getting the result in IST only. It’s not getting converted to (Asia/Dubai).\r\n\r\nI have mentioned all the ways I have tried.\r\n","title":"TimeZone Date Conversion [Convert a Date object to a specified timeZone Date Object]","body":"<pre><code>My approach :\n// initailize date object\nDate date = new Date();\n// get time zone\nZoneId zoneId = ZoneId.of(&quot;Asia/Dubai&quot;);\n\n// create zonedDateTime object\nZonedDateTime zdt = ZonedDateTime.ofInstant(date.toInstant(), zoneId);\n\n// instant of zonedDateTime\nInstant instant = zdt.toInstant();\n\n// convert instant to specified zone\ninstant.atZone(zoneId);\n\n// Get Local Date Time Object\nLocalDateTime ldt = LocalDateTime.ofInstant(instant,zoneId);\n\n//Convert it back to Date Object\nDate dateFinal = java.util.Date.from(Instant.from(ldt.atZone(zoneId)));\n</code></pre>\n<p>Can anyone help me with conversion of timeZone Date object in Java 8\n<code>Date date = Fri Mar 31 16:10:13 IST</code>.\nNow I need to convert this Date to any given timeZone Date object</p>\n<p>Desired result:</p>\n<blockquote>\n<p><code>Date resultDate = Fri Mar 31 14:40:13 GST</code></p>\n</blockquote>\n<p>Basically here I used (Asia/Dubai) Time Zone</p>\n<p>But my result is: <code>2023-03-31T16:10:13.854+0530</code>. I am getting the result in IST only. It’s not getting converted to (Asia/Dubai).</p>\n<p>I have mentioned all the ways I have tried.</p>\n"},{"tags":["java","https","vert.x"],"answers":[{"tags":[],"owner":{"account_id":5191510,"reputation":1415,"user_id":4154302,"display_name":"Asad Awadia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681259155,"creation_date":1681259155,"answer_id":75991016,"question_id":75983442,"body_markdown":"No, it won&#39;t. \r\n\r\nYou should use a real load balancer like nginx or haproxy for this","title":"if I send a http request to one of the vertx instance and if it is busy, will it redirect to another vertx instance in a cluster?","body":"<p>No, it won't.</p>\n<p>You should use a real load balancer like nginx or haproxy for this</p>\n"}],"owner":{"account_id":7091295,"reputation":167,"user_id":5426380,"display_name":"Prabhu Kvn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681259155,"creation_date":1681198295,"question_id":75983442,"body_markdown":"if I send a http request to one of the vertx instance and if it is busy, will it redirect to another vertx instance in a cluster? is there any automatic load balancing inside a vertx instance?\r\n","title":"if I send a http request to one of the vertx instance and if it is busy, will it redirect to another vertx instance in a cluster?","body":"<p>if I send a http request to one of the vertx instance and if it is busy, will it redirect to another vertx instance in a cluster? is there any automatic load balancing inside a vertx instance?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":304234,"reputation":32207,"user_id":613628,"accept_rate":100,"display_name":"Stephane Nicoll"},"score":0,"creation_date":1701276531,"post_id":75990928,"comment_id":136756589,"body_markdown":"FTR, the OP has cross-posted in the Spring Boot issue tracker, see https://github.com/spring-projects/spring-framework/issues/30319","body":"FTR, the OP has cross-posted in the Spring Boot issue tracker, see <a href=\"https://github.com/spring-projects/spring-framework/issues/30319\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/30319</a>"}],"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":90,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681257996,"creation_date":1681257996,"question_id":75990928,"body_markdown":"In Spring Framework - in the current reference documentation exists the [Default Profile](https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-definition-profiles-default) section. It has the following content \r\n\r\nStarting with a code:\r\n\r\n```\r\n@Configuration\r\n@Profile(&quot;default&quot;)\r\npublic class DefaultDataConfig {\r\n\r\n    @Bean\r\n    public DataSource dataSource() {\r\n        return new EmbeddedDatabaseBuilder()\r\n            .setType(EmbeddedDatabaseType.HSQL)\r\n            .addScript(&quot;classpath:com/bank/config/sql/schema.sql&quot;)\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\nand the following content/explanation:\r\n\r\n&gt; If no profile is active, the `dataSource` is created.  You can see this as a way to provide a default definition for one or more beans. \r\n&gt; **If any profile is enabled, the default profile does not apply**.\r\n&gt; \r\n&gt; You can change the name of the default profile by using `setDefaultProfiles()` on the `Environment` or, \r\n&gt; declaratively, by using the `spring.profiles.default` property.\r\n\r\n**Therefore**: Why from the beginning was not used directly `spring.profiles.active`? - it especially taking in consideration that is known that `spring.profiles.active` has more precedence and overrides by complete `spring.profiles.default` as indicated in bold above. \r\n\r\nAs summary:\r\n\r\n* Why does `spring.profiles.default` exist if the same approach can be accomplished through `spring.profiles.active`?\r\n\r\nIs not clear when is mandatory use the former over the latter - and taking the special consideration about the behavior of overriding if the latter is declared.\r\n\r\nJust in case, the [@Profile](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html) javadoc does not contain some indication about this ","title":"Why &quot;spring.profiles.default&quot; exists if &quot;spring.profiles.active&quot; can do the same?","body":"<p>In Spring Framework - in the current reference documentation exists the <a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-definition-profiles-default\" rel=\"nofollow noreferrer\">Default Profile</a> section. It has the following content</p>\n<p>Starting with a code:</p>\n<pre><code>@Configuration\n@Profile(&quot;default&quot;)\npublic class DefaultDataConfig {\n\n    @Bean\n    public DataSource dataSource() {\n        return new EmbeddedDatabaseBuilder()\n            .setType(EmbeddedDatabaseType.HSQL)\n            .addScript(&quot;classpath:com/bank/config/sql/schema.sql&quot;)\n            .build();\n    }\n}\n</code></pre>\n<p>and the following content/explanation:</p>\n<blockquote>\n<p>If no profile is active, the <code>dataSource</code> is created.  You can see this as a way to provide a default definition for one or more beans.\n<strong>If any profile is enabled, the default profile does not apply</strong>.</p>\n<p>You can change the name of the default profile by using <code>setDefaultProfiles()</code> on the <code>Environment</code> or,\ndeclaratively, by using the <code>spring.profiles.default</code> property.</p>\n</blockquote>\n<p><strong>Therefore</strong>: Why from the beginning was not used directly <code>spring.profiles.active</code>? - it especially taking in consideration that is known that <code>spring.profiles.active</code> has more precedence and overrides by complete <code>spring.profiles.default</code> as indicated in bold above.</p>\n<p>As summary:</p>\n<ul>\n<li>Why does <code>spring.profiles.default</code> exist if the same approach can be accomplished through <code>spring.profiles.active</code>?</li>\n</ul>\n<p>Is not clear when is mandatory use the former over the latter - and taking the special consideration about the behavior of overriding if the latter is declared.</p>\n<p>Just in case, the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/context/annotation/Profile.html\" rel=\"nofollow noreferrer\">@Profile</a> javadoc does not contain some indication about this</p>\n"},{"tags":["java","gradle","logback"],"answers":[{"tags":[],"owner":{"account_id":1059510,"reputation":15581,"user_id":1061426,"accept_rate":69,"display_name":"bharal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681256835,"creation_date":1681256835,"answer_id":75990873,"question_id":75990872,"body_markdown":"Stick this in your gradle file. I put it in the space immediately above &quot;dependencies&quot;\r\n\r\n    configurations {\r\n       all*.exclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-logging&#39;\r\n       all*.exclude group: &#39;ch.qos.logback&#39;, module: &#39;logback-classic&#39;\r\n       all*.exclude group: &#39;ch.qos.logback&#39;, module: &#39;logback-core&#39;\r\n    }\r\n\r\n\r\nSo it looks like:\r\n\r\n    configurations {\r\n    ...\r\n    }\r\n    dependencies {\r\n    ...\r\n    }\r\n","title":"Excluding logback from spring boot GRADLE ONLY","body":"<p>Stick this in your gradle file. I put it in the space immediately above &quot;dependencies&quot;</p>\n<pre><code>configurations {\n   all*.exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'\n   all*.exclude group: 'ch.qos.logback', module: 'logback-classic'\n   all*.exclude group: 'ch.qos.logback', module: 'logback-core'\n}\n</code></pre>\n<p>So it looks like:</p>\n<pre><code>configurations {\n...\n}\ndependencies {\n...\n}\n</code></pre>\n"}],"owner":{"account_id":1059510,"reputation":15581,"user_id":1061426,"accept_rate":69,"display_name":"bharal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":239,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681256835,"creation_date":1681256835,"question_id":75990872,"body_markdown":"This is a common question, i&#39;m making this question up as there is no proper answer on SO. \r\n\r\nSo you&#39;re working with spring boot and you have in your gradle file something like:\r\n\r\n    compile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter&#39;, version:&#39;2.0.4.RELEASE&#39;\r\n    // Logging\r\n    implementation &#39;org.slf4j:slf4j-log4j12:1.7.28&#39;\r\n\r\nNow when you run your program you get some sort of silly error like \r\n\r\n &gt; Caused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.turbo.TurboFilter\r\n\r\nOR equall confusingly \r\n\r\n &gt; LoggerFactory is not a Logback LoggerContext but Logback is on the classpath\r\n\r\nI have the answer down below.\r\n\r\nIf you in the future come across this problem but now it needs an extra step, please edit my answer as well to capture it. Goodness knows how many, plausibly millions of hours have been lost to this terrible problem. \r\n\r\nPlease don&#39;t mention maven, this is a gradle-only problem. ","title":"Excluding logback from spring boot GRADLE ONLY","body":"<p>This is a common question, i'm making this question up as there is no proper answer on SO.</p>\n<p>So you're working with spring boot and you have in your gradle file something like:</p>\n<pre><code>compile group: 'org.springframework.boot', name: 'spring-boot-starter', version:'2.0.4.RELEASE'\n// Logging\nimplementation 'org.slf4j:slf4j-log4j12:1.7.28'\n</code></pre>\n<p>Now when you run your program you get some sort of silly error like</p>\n<blockquote>\n<p>Caused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.turbo.TurboFilter</p>\n</blockquote>\n<p>OR equall confusingly</p>\n<blockquote>\n<p>LoggerFactory is not a Logback LoggerContext but Logback is on the classpath</p>\n</blockquote>\n<p>I have the answer down below.</p>\n<p>If you in the future come across this problem but now it needs an extra step, please edit my answer as well to capture it. Goodness knows how many, plausibly millions of hours have been lost to this terrible problem.</p>\n<p>Please don't mention maven, this is a gradle-only problem.</p>\n"},{"tags":["java","regex","xml","xsd","xerces"],"answers":[{"tags":[],"owner":{"account_id":3377022,"reputation":11135,"user_id":2834978,"display_name":"LMC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681256253,"creation_date":1681252785,"answer_id":75990588,"question_id":75990087,"body_markdown":"Regexp matching looks like a [limited implementation](https://www.w3.org/TR/xmlschema-2/#nt-regExp) for xsd.  \r\nRemoving some unneeded grouping and refactoring regex parts to avoid repeating `(jpg|png)` pattern.\r\n\r\n    (@\\{.*|[A-Z]:/.*)\\.(png|jpg)\\}?\r\n\r\nMatch\r\n\r\n    @{../test-image.png}\r\n    Z:/test/image.jpg\r\n\r\nA more verbose but simplified pattern closer to [w3.org regexp definition][1].\r\n\r\n    @\\{.*\\.(png|jpg)\\}|[A-Z]:/.*\\.(png|jpg)\r\n\r\nTesting on command line ([libxml2][2] implementation)\r\n\r\n    xmllint --schema tmp.xsd --noout tmp.xml \r\n    tmp.xml validates\r\n\r\nNote: got error as described with original regex\r\n\r\n    tmp.xml:8: element frameui: Schemas validity error : Element &#39;{http://www.squidxtv.me/schema/frameui/v1/frameui.xsd}frameui&#39;, attribute &#39;background-image&#39;: [facet &#39;pattern&#39;] The value &#39;@{../test-image.png}&#39; is not accepted by the pattern &#39;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&#39;.\r\n\r\n\r\n  [1]: https://www.w3.org/TR/xmlschema-2/#nt-regExp\r\n  [2]: https://github.com/GNOME/libxml2","title":"RegEx in XML Schema .xsd","body":"<p>Regexp matching looks like a <a href=\"https://www.w3.org/TR/xmlschema-2/#nt-regExp\" rel=\"nofollow noreferrer\">limited implementation</a> for xsd.<br />\nRemoving some unneeded grouping and refactoring regex parts to avoid repeating <code>(jpg|png)</code> pattern.</p>\n<pre><code>(@\\{.*|[A-Z]:/.*)\\.(png|jpg)\\}?\n</code></pre>\n<p>Match</p>\n<pre><code>@{../test-image.png}\nZ:/test/image.jpg\n</code></pre>\n<p>A more verbose but simplified pattern closer to <a href=\"https://www.w3.org/TR/xmlschema-2/#nt-regExp\" rel=\"nofollow noreferrer\">w3.org regexp definition</a>.</p>\n<pre><code>@\\{.*\\.(png|jpg)\\}|[A-Z]:/.*\\.(png|jpg)\n</code></pre>\n<p>Testing on command line (<a href=\"https://github.com/GNOME/libxml2\" rel=\"nofollow noreferrer\">libxml2</a> implementation)</p>\n<pre><code>xmllint --schema tmp.xsd --noout tmp.xml \ntmp.xml validates\n</code></pre>\n<p>Note: got error as described with original regex</p>\n<pre><code>tmp.xml:8: element frameui: Schemas validity error : Element '{http://www.squidxtv.me/schema/frameui/v1/frameui.xsd}frameui', attribute 'background-image': [facet 'pattern'] The value '@{../test-image.png}' is not accepted by the pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$'.\n</code></pre>\n"}],"owner":{"account_id":22112469,"reputation":74,"user_id":16367144,"display_name":"SquidXTV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75990588,"answer_count":1,"score":2,"last_activity_date":1681256253,"creation_date":1681246675,"question_id":75990087,"body_markdown":"I have an xsd schema file which uses a pattern which is basically RegEx but I have problems creating the correct RegEx.\r\nMy RegEx should accept these:\r\n\r\n- `@{...}` with `...` being anything which ends in `.png/.jpg`\r\n- `C:/...` with `...` being anything which ends in `.png/.jpg` and `C` being any **drive** character so I think all upper case characters\r\n- `/...` with `...` being anything which ends in `.png/.jpg`\r\n\r\nI got to this RegEx: `^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$` which works using the Java ReGex matcher and on [regex101](https://regex101.com/) but the xml parser throws an exception and says that it doesn&#39;t match.\r\n\r\nI also found out that the [xml regex matching engine](https://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/impl/xpath/regex/RegularExpression.html) is using Non-deterministic finite automaton but I dont know what that means for my RegEx:\r\n\r\n&gt; A regular expression matching engine using Non-deterministic Finite Automaton (NFA). This engine does not conform to the POSIX regular expression.\r\n\r\nvalid.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;frameui xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://www.squidxtv.me/schema/frameui/v1 /frameui.xsd&quot;\r\n         id=&quot;valid-frame&quot;\r\n         width=&quot;5&quot;\r\n         height=&quot;3&quot;\r\n         background-image=&quot;@{../test-image.png}&quot;&gt;\r\n    &lt;div id=&quot;first-div&quot; width=&quot;500&quot; height=&quot;500&quot; x=&quot;100&quot; y=&quot;100&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;\r\n        &lt;text id=&quot;first-test&quot; x=&quot;100&quot; y=&quot;100&quot; underline=&quot;true&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;Test Text&lt;/text&gt;\r\n    &lt;/div&gt;\r\n&lt;/frameui&gt;\r\n```\r\nframeui.xsd\r\n\r\n```\r\n&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\r\n           elementFormDefault=&quot;qualified&quot;\r\n           targetNamespace=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\r\n           xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\r\n           version=&quot;1.0&quot;&gt;\r\n    &lt;xs:element name=&quot;frameui&quot;&gt;\r\n        &lt;xs:complexType&gt;\r\n            &lt;xs:all&gt;\r\n                &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\r\n                &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\r\n                &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\r\n            &lt;/xs:all&gt;\r\n            &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;background-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;background-image&quot; type=&quot;pathType&quot;/&gt;\r\n            &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;click-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\r\n            &lt;xs:attribute name=&quot;scroll-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\r\n        &lt;/xs:complexType&gt;\r\n    &lt;/xs:element&gt;\r\n\r\n    &lt;xs:complexType name=&quot;TextType&quot;&gt;\r\n        &lt;xs:simpleContent&gt;\r\n            &lt;xs:extension base=&quot;xs:string&quot;&gt;\r\n                &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\r\n                &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\r\n                &lt;xs:attributeGroup ref=&quot;font&quot;/&gt;\r\n                &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\r\n            &lt;/xs:extension&gt;\r\n        &lt;/xs:simpleContent&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\n    &lt;xs:complexType name=&quot;ImgType&quot;&gt;\r\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\r\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;path&quot; type=&quot;pathType&quot; use=&quot;required&quot;/&gt;\r\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\n    &lt;xs:complexType name=&quot;DivType&quot;&gt;\r\n        &lt;xs:all&gt;\r\n            &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\r\n            &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\r\n            &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\r\n        &lt;/xs:all&gt;\r\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\r\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\r\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\n    &lt;xs:attributeGroup name=&quot;font&quot;&gt;\r\n        &lt;xs:attribute name=&quot;font&quot; type=&quot;xs:string&quot; default=&quot;Sans Serif&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;font-size&quot; type=&quot;xs:positiveInteger&quot; default=&quot;12&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;font-color&quot; type=&quot;hexType&quot; default=&quot;#FFFFFF&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;bold&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;italic&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;underline&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\r\n    &lt;/xs:attributeGroup&gt;\r\n\r\n    &lt;xs:attributeGroup name=&quot;border&quot;&gt;\r\n        &lt;xs:attribute name=&quot;border-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;border-width&quot; type=&quot;xs:nonNegativeInteger&quot; default=&quot;0&quot;/&gt;\r\n    &lt;/xs:attributeGroup&gt;\r\n\r\n    &lt;xs:attributeGroup name=&quot;position&quot;&gt;\r\n        &lt;xs:attribute name=&quot;x&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\r\n        &lt;xs:attribute name=&quot;y&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\r\n    &lt;/xs:attributeGroup&gt;\r\n\r\n    &lt;xs:simpleType name=&quot;hexType&quot;&gt;\r\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n            &lt;xs:pattern value=&quot;#[0-9a-fA-F]{6}&quot;/&gt;\r\n        &lt;/xs:restriction&gt;\r\n    &lt;/xs:simpleType&gt;\r\n\r\n    &lt;xs:simpleType name=&quot;pathType&quot;&gt;\r\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\r\n            &lt;xs:pattern value=&quot;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&quot;/&gt;\r\n            &lt;xs:whiteSpace value=&quot;collapse&quot;/&gt;\r\n        &lt;/xs:restriction&gt;\r\n    &lt;/xs:simpleType&gt;\r\n\r\n&lt;/xs:schema&gt;\r\n\r\n```\r\ntest\r\n\r\n```\r\n@Test\r\npublic void testValidXml() {\r\n        ScreenType model = assertDoesNotThrow(() -&gt; parser.parse(Path.of(getClass().getResource(&quot;/guis/valid.xml&quot;).toURI())));\r\n}\r\n```\r\nparser configuration:\r\n```\r\npackage me.squidxtv.frameui.core.parser;\r\n\r\nimport me.squidxtv.frameui.core.content.*;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\nimport org.jetbrains.annotations.NotNull;\r\nimport org.w3c.dom.Document;\r\nimport org.w3c.dom.Element;\r\nimport org.w3c.dom.Node;\r\nimport org.w3c.dom.NodeList;\r\nimport org.xml.sax.SAXException;\r\n\r\nimport javax.xml.XMLConstants;\r\nimport javax.xml.parsers.DocumentBuilder;\r\nimport javax.xml.parsers.DocumentBuilderFactory;\r\nimport javax.xml.parsers.ParserConfigurationException;\r\nimport javax.xml.validation.Schema;\r\nimport javax.xml.validation.SchemaFactory;\r\nimport java.io.IOException;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Paths;\r\nimport java.util.Arrays;\r\nimport java.util.Objects;\r\nimport java.util.function.Predicate;\r\nimport java.util.regex.Pattern;\r\n\r\n/**\r\n * The ScreenParser class provides methods for parsing an XML file into a ScreenType object\r\n * and retrieving information about the child nodes of a given Node.\r\n */\r\npublic class ScreenParser {\r\n\r\n    /**\r\n     * The regular expression pattern for matching Windows-style paths.\r\n     */\r\n    private static final @NotNull Predicate&lt;String&gt; WINDOWS_PATH = Pattern.compile(&quot;^[A-Z]:\\\\\\\\.+$&quot;).asMatchPredicate();\r\n    /**\r\n     * The regular expression pattern for matching Unix-style paths.\r\n     */\r\n    private static final @NotNull Predicate&lt;String&gt; UNIX_PATH = Pattern.compile(&quot;^/.+$&quot;).asMatchPredicate();\r\n    /**\r\n     * The regular expression pattern for matching relative paths.\r\n     */\r\n    private static final @NotNull Predicate&lt;String&gt; RELATIVE_PATH = Pattern.compile(&quot;^@\\\\{.+}$&quot;).asMatchPredicate();\r\n\r\n    /**\r\n     * The {@link DocumentBuilder} used for parsing XML files.\r\n     */\r\n    private final @NotNull DocumentBuilder documentBuilder;\r\n\r\n    /**\r\n     * Constructs a new instance of {@link ScreenParser} class.\r\n     * @param plugin\r\n     * @throws SAXException if there is an error in the XML schema.\r\n     * @throws ParserConfigurationException if there is a configuration error in the {@link DocumentBuilder}.\r\n     */\r\n    public ScreenParser(JavaPlugin plugin) throws SAXException, ParserConfigurationException {\r\n        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\r\n        Schema schema = schemaFactory.newSchema(getClass().getResource(&quot;/frameui.xsd&quot;));\r\n\r\n        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\r\n        documentBuilderFactory.setSchema(schema);\r\n        documentBuilderFactory.setNamespaceAware(true);\r\n        documentBuilder = documentBuilderFactory.newDocumentBuilder();\r\n\r\n        ParserErrorHandler errorHandler = new ParserErrorHandler(plugin);\r\n        documentBuilder.setErrorHandler(errorHandler);\r\n    }\r\n\r\n    /**\r\n     * Parses an XML file and returns a ScreenType object representing the root element of the document.\r\n     * @param xmlFile the Path to the XML file to be parsed\r\n     * @return a ScreenType object representing the root element of the parsed document\r\n     * @throws IOException if an I/O error occurs while reading the file\r\n     * @throws SAXException if an error occurs during parsing\r\n     */\r\n    public ScreenType parse(Path xmlFile) throws IOException, SAXException {\r\n        Document xml = documentBuilder.parse(xmlFile.toFile());\r\n        Element root = xml.getDocumentElement();\r\n        return ScreenType.of(root, xmlFile);\r\n    }\r\n\r\n    /**\r\n     * Returns the {@link DocumentBuilder} used by this {@link ScreenParser} instance.\r\n     * @return the {@link DocumentBuilder} used by this {@link ScreenParser} instance\r\n     */\r\n    public DocumentBuilder getDocumentBuilder() {\r\n        return documentBuilder;\r\n    }\r\n\r\n    /**\r\n     * Returns an array of ComplexType objects representing the child nodes of the specified root Node.\r\n     *\r\n     * @param root the root Node whose children to retrieve\r\n     * @param path the path to the XML file containing the root Node\r\n     * @return an array of ComplexType objects representing the child nodes of the root Node\r\n     */\r\n    public static ComplexType[] getChildren(Node root, Path path) {\r\n        NodeList nodes = root.getChildNodes();\r\n        if (nodes.getLength() == 0) {\r\n            return new ComplexType[0];\r\n        }\r\n\r\n        ComplexType[] sub = new ComplexType[nodes.getLength()];\r\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\r\n            Node current = nodes.item(i);\r\n            String name = current.getNodeName();\r\n            if (name.equals(&quot;#text&quot;)) {\r\n                continue;\r\n            }\r\n\r\n            switch (name) {\r\n                case &quot;text&quot; -&gt; sub[i] = TextType.of((Element) current);\r\n                case &quot;image&quot; -&gt; sub[i] = ImageType.of((Element) current, path);\r\n                case &quot;div&quot; -&gt; sub[i] = DivType.of((Element) current, path);\r\n            }\r\n        }\r\n        return Arrays.stream(sub).filter(Objects::nonNull).toArray(ComplexType[]::new);\r\n    }\r\n\r\n    /**\r\n     * Converts the given path string to a {@link Path} object.\r\n     *\r\n     * @param original the path string to convert\r\n     * @param xml the path to the XML file used as the base for relative paths\r\n     * @return the {@link Path} object corresponding to the input path string\r\n     * @throws IllegalArgumentException if the input path string is not in a recognized format\r\n     */\r\n    public static Path convert(String original, Path xml) {\r\n        if (RELATIVE_PATH.test(original)) {\r\n            return xml.resolve(original.substring(2, original.length() - 1));\r\n        }\r\n\r\n        if (WINDOWS_PATH.test(original) || UNIX_PATH.test(original)) {\r\n            return Paths.get(original);\r\n        }\r\n\r\n        throw new IllegalArgumentException(&quot;Invalid path format: &quot; + original);\r\n    }\r\n\r\n}\r\n\r\n```\r\nexception:\r\n```\r\nOpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\r\n\r\norg.opentest4j.AssertionFailedError: Unexpected exception thrown: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value &#39;@{../test-image.png}&#39; is not facet-valid with respect to pattern &#39;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&#39; for type &#39;pathType&#39;.\r\n\r\n\tat org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:152)\r\n\tat org.junit.jupiter.api.AssertDoesNotThrow.createAssertionFailedError(AssertDoesNotThrow.java:84)\r\n\tat org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:75)\r\n\tat org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:58)\r\n\tat org.junit.jupiter.api.Assertions.assertDoesNotThrow(Assertions.java:3196)\r\n\tat me.squidxtv.frameui.core.parser.ScreenParserTest.testValidXml(ScreenParserTest.java:53)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\r\nCaused by: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value &#39;@{../test-image.png}&#39; is not facet-valid with respect to pattern &#39;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&#39; for type &#39;pathType&#39;.\r\norg.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value &#39;@{../test-image.png}&#39; is not facet-valid with respect to pattern &#39;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&#39; for type &#39;pathType&#39;.\r\n\tat me.squidxtv.frameui.core.parser.ParserErrorHandler.error(ParserErrorHandler.java:40)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:138)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:512)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3600)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processOneAttribute(XMLSchemaValidator.java:3108)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(XMLSchemaValidator.java:3052)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2287)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:830)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:374)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:613)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3079)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:836)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:542)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:889)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:247)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:342)\r\n\tat java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:206)\r\n\tat me.squidxtv.frameui.core.parser.ScreenParser.parse(ScreenParser.java:77)\r\n\tat me.squidxtv.frameui.core.parser.ScreenParserTest.lambda$testValidXml$1(ScreenParserTest.java:53)\r\n\tat org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:71)\r\n\t... 73 more\r\nCaused by: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value &#39;@{../test-image.png}&#39; is not facet-valid with respect to pattern &#39;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&#39; for type &#39;pathType&#39;.\r\n\tat java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\r\n\tat java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)\r\n\t... 98 more\r\n\r\n\r\nProcess finished with exit code -1\r\n\r\n```\r\n","title":"RegEx in XML Schema .xsd","body":"<p>I have an xsd schema file which uses a pattern which is basically RegEx but I have problems creating the correct RegEx.\nMy RegEx should accept these:</p>\n<ul>\n<li><code>@{...}</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code></li>\n<li><code>C:/...</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code> and <code>C</code> being any <strong>drive</strong> character so I think all upper case characters</li>\n<li><code>/...</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code></li>\n</ul>\n<p>I got to this RegEx: <code>^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$</code> which works using the Java ReGex matcher and on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> but the xml parser throws an exception and says that it doesn't match.</p>\n<p>I also found out that the <a href=\"https://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/impl/xpath/regex/RegularExpression.html\" rel=\"nofollow noreferrer\">xml regex matching engine</a> is using Non-deterministic finite automaton but I dont know what that means for my RegEx:</p>\n<blockquote>\n<p>A regular expression matching engine using Non-deterministic Finite Automaton (NFA). This engine does not conform to the POSIX regular expression.</p>\n</blockquote>\n<p>valid.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;frameui xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://www.squidxtv.me/schema/frameui/v1 /frameui.xsd&quot;\n         id=&quot;valid-frame&quot;\n         width=&quot;5&quot;\n         height=&quot;3&quot;\n         background-image=&quot;@{../test-image.png}&quot;&gt;\n    &lt;div id=&quot;first-div&quot; width=&quot;500&quot; height=&quot;500&quot; x=&quot;100&quot; y=&quot;100&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;\n        &lt;text id=&quot;first-test&quot; x=&quot;100&quot; y=&quot;100&quot; underline=&quot;true&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;Test Text&lt;/text&gt;\n    &lt;/div&gt;\n&lt;/frameui&gt;\n</code></pre>\n<p>frameui.xsd</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           targetNamespace=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n           xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n           version=&quot;1.0&quot;&gt;\n    &lt;xs:element name=&quot;frameui&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:all&gt;\n                &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\n                &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\n                &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;/xs:all&gt;\n            &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;background-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\n            &lt;xs:attribute name=&quot;background-image&quot; type=&quot;pathType&quot;/&gt;\n            &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n            &lt;xs:attribute name=&quot;click-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\n            &lt;xs:attribute name=&quot;scroll-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n\n    &lt;xs:complexType name=&quot;TextType&quot;&gt;\n        &lt;xs:simpleContent&gt;\n            &lt;xs:extension base=&quot;xs:string&quot;&gt;\n                &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;font&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n            &lt;/xs:extension&gt;\n        &lt;/xs:simpleContent&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=&quot;ImgType&quot;&gt;\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n        &lt;xs:attribute name=&quot;path&quot; type=&quot;pathType&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=&quot;DivType&quot;&gt;\n        &lt;xs:all&gt;\n            &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\n        &lt;/xs:all&gt;\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n        &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:attributeGroup name=&quot;font&quot;&gt;\n        &lt;xs:attribute name=&quot;font&quot; type=&quot;xs:string&quot; default=&quot;Sans Serif&quot;/&gt;\n        &lt;xs:attribute name=&quot;font-size&quot; type=&quot;xs:positiveInteger&quot; default=&quot;12&quot;/&gt;\n        &lt;xs:attribute name=&quot;font-color&quot; type=&quot;hexType&quot; default=&quot;#FFFFFF&quot;/&gt;\n        &lt;xs:attribute name=&quot;bold&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n        &lt;xs:attribute name=&quot;italic&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n        &lt;xs:attribute name=&quot;underline&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:attributeGroup name=&quot;border&quot;&gt;\n        &lt;xs:attribute name=&quot;border-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\n        &lt;xs:attribute name=&quot;border-width&quot; type=&quot;xs:nonNegativeInteger&quot; default=&quot;0&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:attributeGroup name=&quot;position&quot;&gt;\n        &lt;xs:attribute name=&quot;x&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\n        &lt;xs:attribute name=&quot;y&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:simpleType name=&quot;hexType&quot;&gt;\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n            &lt;xs:pattern value=&quot;#[0-9a-fA-F]{6}&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n    &lt;xs:simpleType name=&quot;pathType&quot;&gt;\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n            &lt;xs:pattern value=&quot;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&quot;/&gt;\n            &lt;xs:whiteSpace value=&quot;collapse&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n&lt;/xs:schema&gt;\n\n</code></pre>\n<p>test</p>\n<pre><code>@Test\npublic void testValidXml() {\n        ScreenType model = assertDoesNotThrow(() -&gt; parser.parse(Path.of(getClass().getResource(&quot;/guis/valid.xml&quot;).toURI())));\n}\n</code></pre>\n<p>parser configuration:</p>\n<pre><code>package me.squidxtv.frameui.core.parser;\n\nimport me.squidxtv.frameui.core.content.*;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.jetbrains.annotations.NotNull;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.XMLConstants;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.validation.Schema;\nimport javax.xml.validation.SchemaFactory;\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.Arrays;\nimport java.util.Objects;\nimport java.util.function.Predicate;\nimport java.util.regex.Pattern;\n\n/**\n * The ScreenParser class provides methods for parsing an XML file into a ScreenType object\n * and retrieving information about the child nodes of a given Node.\n */\npublic class ScreenParser {\n\n    /**\n     * The regular expression pattern for matching Windows-style paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; WINDOWS_PATH = Pattern.compile(&quot;^[A-Z]:\\\\\\\\.+$&quot;).asMatchPredicate();\n    /**\n     * The regular expression pattern for matching Unix-style paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; UNIX_PATH = Pattern.compile(&quot;^/.+$&quot;).asMatchPredicate();\n    /**\n     * The regular expression pattern for matching relative paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; RELATIVE_PATH = Pattern.compile(&quot;^@\\\\{.+}$&quot;).asMatchPredicate();\n\n    /**\n     * The {@link DocumentBuilder} used for parsing XML files.\n     */\n    private final @NotNull DocumentBuilder documentBuilder;\n\n    /**\n     * Constructs a new instance of {@link ScreenParser} class.\n     * @param plugin\n     * @throws SAXException if there is an error in the XML schema.\n     * @throws ParserConfigurationException if there is a configuration error in the {@link DocumentBuilder}.\n     */\n    public ScreenParser(JavaPlugin plugin) throws SAXException, ParserConfigurationException {\n        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n        Schema schema = schemaFactory.newSchema(getClass().getResource(&quot;/frameui.xsd&quot;));\n\n        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\n        documentBuilderFactory.setSchema(schema);\n        documentBuilderFactory.setNamespaceAware(true);\n        documentBuilder = documentBuilderFactory.newDocumentBuilder();\n\n        ParserErrorHandler errorHandler = new ParserErrorHandler(plugin);\n        documentBuilder.setErrorHandler(errorHandler);\n    }\n\n    /**\n     * Parses an XML file and returns a ScreenType object representing the root element of the document.\n     * @param xmlFile the Path to the XML file to be parsed\n     * @return a ScreenType object representing the root element of the parsed document\n     * @throws IOException if an I/O error occurs while reading the file\n     * @throws SAXException if an error occurs during parsing\n     */\n    public ScreenType parse(Path xmlFile) throws IOException, SAXException {\n        Document xml = documentBuilder.parse(xmlFile.toFile());\n        Element root = xml.getDocumentElement();\n        return ScreenType.of(root, xmlFile);\n    }\n\n    /**\n     * Returns the {@link DocumentBuilder} used by this {@link ScreenParser} instance.\n     * @return the {@link DocumentBuilder} used by this {@link ScreenParser} instance\n     */\n    public DocumentBuilder getDocumentBuilder() {\n        return documentBuilder;\n    }\n\n    /**\n     * Returns an array of ComplexType objects representing the child nodes of the specified root Node.\n     *\n     * @param root the root Node whose children to retrieve\n     * @param path the path to the XML file containing the root Node\n     * @return an array of ComplexType objects representing the child nodes of the root Node\n     */\n    public static ComplexType[] getChildren(Node root, Path path) {\n        NodeList nodes = root.getChildNodes();\n        if (nodes.getLength() == 0) {\n            return new ComplexType[0];\n        }\n\n        ComplexType[] sub = new ComplexType[nodes.getLength()];\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\n            Node current = nodes.item(i);\n            String name = current.getNodeName();\n            if (name.equals(&quot;#text&quot;)) {\n                continue;\n            }\n\n            switch (name) {\n                case &quot;text&quot; -&gt; sub[i] = TextType.of((Element) current);\n                case &quot;image&quot; -&gt; sub[i] = ImageType.of((Element) current, path);\n                case &quot;div&quot; -&gt; sub[i] = DivType.of((Element) current, path);\n            }\n        }\n        return Arrays.stream(sub).filter(Objects::nonNull).toArray(ComplexType[]::new);\n    }\n\n    /**\n     * Converts the given path string to a {@link Path} object.\n     *\n     * @param original the path string to convert\n     * @param xml the path to the XML file used as the base for relative paths\n     * @return the {@link Path} object corresponding to the input path string\n     * @throws IllegalArgumentException if the input path string is not in a recognized format\n     */\n    public static Path convert(String original, Path xml) {\n        if (RELATIVE_PATH.test(original)) {\n            return xml.resolve(original.substring(2, original.length() - 1));\n        }\n\n        if (WINDOWS_PATH.test(original) || UNIX_PATH.test(original)) {\n            return Paths.get(original);\n        }\n\n        throw new IllegalArgumentException(&quot;Invalid path format: &quot; + original);\n    }\n\n}\n\n</code></pre>\n<p>exception:</p>\n<pre><code>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n\norg.opentest4j.AssertionFailedError: Unexpected exception thrown: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n\n    at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:152)\n    at org.junit.jupiter.api.AssertDoesNotThrow.createAssertionFailedError(AssertDoesNotThrow.java:84)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:75)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:58)\n    at org.junit.jupiter.api.Assertions.assertDoesNotThrow(Assertions.java:3196)\n    at me.squidxtv.frameui.core.parser.ScreenParserTest.testValidXml(ScreenParserTest.java:53)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\norg.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n    at me.squidxtv.frameui.core.parser.ParserErrorHandler.error(ParserErrorHandler.java:40)\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:138)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:512)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3600)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processOneAttribute(XMLSchemaValidator.java:3108)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(XMLSchemaValidator.java:3052)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2287)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:830)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:374)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:613)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3079)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:836)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:542)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:889)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:247)\n    at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:342)\n    at java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:206)\n    at me.squidxtv.frameui.core.parser.ScreenParser.parse(ScreenParser.java:77)\n    at me.squidxtv.frameui.core.parser.ScreenParserTest.lambda$testValidXml$1(ScreenParserTest.java:53)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:71)\n    ... 73 more\nCaused by: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)\n    ... 98 more\n\n\nProcess finished with exit code -1\n\n</code></pre>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":8329951,"reputation":70,"user_id":6258725,"display_name":"Question_Everything"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1591382823,"creation_date":1591382823,"answer_id":62222231,"question_id":62220899,"body_markdown":"I had a similar experience with adjusting the default messages to something more meaningful.\r\n\r\nYou have to implement a javax.validation.MessageInterpolation interface. From there you&#39;ll be able to interpolate your default message.\r\n\r\nI used this site as a reference to solve my issue. https://www.baeldung.com/spring-validation-message-interpolation\r\n","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<p>I had a similar experience with adjusting the default messages to something more meaningful.</p>\n\n<p>You have to implement a javax.validation.MessageInterpolation interface. From there you'll be able to interpolate your default message.</p>\n\n<p>I used this site as a reference to solve my issue. <a href=\"https://www.baeldung.com/spring-validation-message-interpolation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-validation-message-interpolation</a></p>\n"},{"tags":[],"owner":{"account_id":7117976,"reputation":107,"user_id":5443527,"display_name":"Rupesh Patil"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650279265,"creation_date":1650279265,"answer_id":71910867,"question_id":62220899,"body_markdown":"    @Override\r\n    protected ResponseEntity&lt;Object&gt; \r\n    handleMethodArgumentNotValid(MethodArgumentNotValidException ex,\r\n\t\t\tHttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\t\tlogError(ex, HttpStatus.BAD_REQUEST);\r\n\t\tMap&lt;String, String&gt; errorMap = new HashMap&lt;&gt;();\r\n\t\tex.getBindingResult().getFieldErrors().forEach(error -&gt; {\r\n\t\t\terrorMap.put(error.getField(),error.getDefaultMessage());\r\n\t\t});\r\n\t\treturn new ResponseEntity&lt;&gt;(errorMap, HttpStatus.BAD_REQUEST);\r\n\t}","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<pre><code>@Override\nprotected ResponseEntity&lt;Object&gt; \nhandleMethodArgumentNotValid(MethodArgumentNotValidException ex,\n        HttpHeaders headers, HttpStatus status, WebRequest request) {\n    logError(ex, HttpStatus.BAD_REQUEST);\n    Map&lt;String, String&gt; errorMap = new HashMap&lt;&gt;();\n    ex.getBindingResult().getFieldErrors().forEach(error -&gt; {\n        errorMap.put(error.getField(),error.getDefaultMessage());\n    });\n    return new ResponseEntity&lt;&gt;(errorMap, HttpStatus.BAD_REQUEST);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4384330,"reputation":1124,"user_id":3575011,"accept_rate":48,"display_name":"Renjith"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661001228,"creation_date":1661001228,"answer_id":73426996,"question_id":62220899,"body_markdown":"\t@Override\r\n\tprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(\r\n\t\t\tMethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\r\n\t\treturn new ResponseEntity&lt;Object&gt;(ex.getFieldError().getDefaultMessage(), HttpStatus.BAD_REQUEST);\r\n\t}","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<pre><code>@Override\nprotected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(\n        MethodArgumentNotValidException ex, HttpHeaders headers, HttpStatus status, WebRequest request) {\n    return new ResponseEntity&lt;Object&gt;(ex.getFieldError().getDefaultMessage(), HttpStatus.BAD_REQUEST);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5089458,"reputation":364,"user_id":4082981,"display_name":"salerokada"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681200832,"creation_date":1681200832,"answer_id":75983764,"question_id":62220899,"body_markdown":"    import org.springframework.context.support.DefaultMessageSourceResolvable;\r\n\r\n    public ResponseEntity handleValidationException(MethodArgumentNotValidException ex)\r\n    {\r\n        List&lt;String&gt; errorMessages = ((MethodArgumentNotValidException)ex)\r\n                .getBindingResult()\r\n                .getFieldErrors().stream()\r\n                .map(DefaultMessageSourceResolvable::getDefaultMessage)\r\n                .collect(Collectors.toList());\r\n        return new ResponseEntity(errorMessages.toString(), HttpStatus.BAD_REQUEST);\r\n    }\r\n    ","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<pre><code>import org.springframework.context.support.DefaultMessageSourceResolvable;\n\npublic ResponseEntity handleValidationException(MethodArgumentNotValidException ex)\n{\n    List&lt;String&gt; errorMessages = ((MethodArgumentNotValidException)ex)\n            .getBindingResult()\n            .getFieldErrors().stream()\n            .map(DefaultMessageSourceResolvable::getDefaultMessage)\n            .collect(Collectors.toList());\n    return new ResponseEntity(errorMessages.toString(), HttpStatus.BAD_REQUEST);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9812199,"reputation":61,"user_id":7269957,"display_name":"Mts"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681255603,"creation_date":1681255603,"answer_id":75990802,"question_id":62220899,"body_markdown":"Simple solution using **stream()**:\r\n\r\n```\r\n...\r\ncatch (MethodArgumentNotValidException ex) {\r\n    message = ex.getFieldErrors()\r\n        .stream()\r\n        .map(fieldError -&gt; fieldError.getField() + &quot;: &quot; + fieldError.getDefaultMessage())\r\n        .collect(Collectors.joining(&quot;; &quot;));\r\n}\r\n...\r\n```","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<p>Simple solution using <strong>stream()</strong>:</p>\n<pre><code>...\ncatch (MethodArgumentNotValidException ex) {\n    message = ex.getFieldErrors()\n        .stream()\n        .map(fieldError -&gt; fieldError.getField() + &quot;: &quot; + fieldError.getDefaultMessage())\n        .collect(Collectors.joining(&quot;; &quot;));\n}\n...\n</code></pre>\n"}],"owner":{"account_id":18591034,"reputation":1258,"user_id":13548254,"display_name":"user1354825"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8356,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":62222231,"answer_count":5,"score":6,"last_activity_date":1681255603,"creation_date":1591377709,"question_id":62220899,"body_markdown":"How can i strip down the excessive information from MethodArgumentNotValidException and keep only the required ***&quot;default message&quot;*** ??\r\n\r\nI am experimenting with Validation annotations- @NotNull, @NotBlank, and @NotEmpty \r\n\r\nI have configured a custom error message as below:- \r\n```\r\n@NotNull(message = &quot;Aaaah !!!! firstname cannot be empty !!!&quot;)\r\nprivate String firtName;\r\n```\r\nMy Exception handler is :-\r\n\r\n```\r\n@RestControllerAdvice\r\npublic class ControllerAdviceClass {\r\n    @ExceptionHandler(value = MethodArgumentNotValidException.class)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public ResponseEntity handleValidationException(MethodArgumentNotValidException ex)\r\n    {\r\n        return new ResponseEntity(ex.getMessage() , HttpStatus.BAD_REQUEST);\r\n    }\r\n}\r\n```\r\nBut the exception message i see on swagger is :-\r\n```\r\nValidation failed for argument [0] in public cosmosdb.User cosmosdb.CosmosController.postResult(cosmosdb.User): \r\n[Field error in object &#39;user&#39; on field &#39;firstName&#39;: rejected value [null]; codes [NotNull.user.firstName,NotNull.firstName,NotNull.java.lang.String,NotNull];\r\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.firstName,firstName]; arguments []; default message [firstName]]; \r\ndefault message [Aaaah !!!! firstname cannot be empty !!!]] \r\n```\r\n\r\nI want to see only the default message *** [Aaaah !!!! firstname cannot be empty !!!]] *** and remove the extra bunkum.","title":"Display only default message of Spring boot validation - MethodArgumentNotValidException","body":"<p>How can i strip down the excessive information from MethodArgumentNotValidException and keep only the required <strong><em>\"default message\"</em></strong> ??</p>\n\n<p>I am experimenting with Validation annotations- @NotNull, @NotBlank, and @NotEmpty </p>\n\n<p>I have configured a custom error message as below:- </p>\n\n<pre><code>@NotNull(message = \"Aaaah !!!! firstname cannot be empty !!!\")\nprivate String firtName;\n</code></pre>\n\n<p>My Exception handler is :-</p>\n\n<pre><code>@RestControllerAdvice\npublic class ControllerAdviceClass {\n    @ExceptionHandler(value = MethodArgumentNotValidException.class)\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public ResponseEntity handleValidationException(MethodArgumentNotValidException ex)\n    {\n        return new ResponseEntity(ex.getMessage() , HttpStatus.BAD_REQUEST);\n    }\n}\n</code></pre>\n\n<p>But the exception message i see on swagger is :-</p>\n\n<pre><code>Validation failed for argument [0] in public cosmosdb.User cosmosdb.CosmosController.postResult(cosmosdb.User): \n[Field error in object 'user' on field 'firstName': rejected value [null]; codes [NotNull.user.firstName,NotNull.firstName,NotNull.java.lang.String,NotNull];\n arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [user.firstName,firstName]; arguments []; default message [firstName]]; \ndefault message [Aaaah !!!! firstname cannot be empty !!!]] \n</code></pre>\n\n<p>I want to see only the default message <strong>* [Aaaah !!!! firstname cannot be empty !!!]] *</strong> and remove the extra bunkum.</p>\n"},{"tags":["java","spring","model-view-controller","thymeleaf","java-ee-8"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1681280223,"post_id":75990760,"comment_id":134028939,"body_markdown":"And why not Spring Boot? Version 2.7 is perfectly JEE8 capable and does what you want automatically without you having to reinvent the wheel. That being said, your model is empty and thus `null`. You configured the `/` to render the `index.html` page. This is done without invoking the controller so nothing is added to the model.","body":"And why not Spring Boot? Version 2.7 is perfectly JEE8 capable and does what you want automatically without you having to reinvent the wheel. That being said, your model is empty and thus <code>null</code>. You configured the <code>&#47;</code> to render the <code>index.html</code> page. This is done without invoking the controller so nothing is added to the model."},{"owner":{"account_id":24739253,"reputation":25,"user_id":18626207,"display_name":"kyleryan1291"},"score":0,"creation_date":1681311000,"post_id":75990760,"comment_id":134036440,"body_markdown":"Because I&#39;m already working with an existing project that doesn&#39;t utilize Spring Boot","body":"Because I&#39;m already working with an existing project that doesn&#39;t utilize Spring Boot"}],"owner":{"account_id":24739253,"reputation":25,"user_id":18626207,"display_name":"kyleryan1291"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":144,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681255001,"creation_date":1681255001,"question_id":75990760,"body_markdown":"I&#39;m trying to learn how to integrate Spring MVC and Thymeleaf with Java EE 8. I&#39;m able to get the server running, and the template does show when I visit the server (localhost:8080/[name of my war exploded] (which I also want to figure out how to change and just have my index appear at localhost:8080). \r\n\r\nHowever, when I visit the page in the browser the value where my object should be (currentDate in the controller) always appears as null no matter the data type of the object, whether String or Integer, Date, anything. \r\n\r\n\r\nI don&#39;t want to use Spring Boot. I need to use Spring MVC and Thymeleaf within the Java EE 8 project structure. I know from seeing the other text on the html page that the server is able to locate my template. Just not sure why the data keeps appearing as null.\r\n\r\nAny help would be appreciated.\r\n\r\npom.xml\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.github.kyleryxn&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-mvc-thymeleaf-jakarta-demo&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;spring-mvc-thymeleaf-jakarta-demo&lt;/name&gt;\r\n    &lt;packaging&gt;war&lt;/packaging&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n        &lt;thymeleaf.version&gt;3.1.1.RELEASE&lt;/thymeleaf.version&gt;\r\n        &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- ****** Java Compile/Runtime Dependencies ****** --&gt;\r\n        &lt;!-- ******************* Logging ******************* --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.30&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\r\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.9&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ******************* Others ******************* --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n            &lt;version&gt;2.11.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\r\n            &lt;version&gt;1.15.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ********* Servlet &amp; MVC Dependencies ********* --&gt;\r\n        &lt;!-- **************** Java Servlet **************** --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.1&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ***************** Spring MVC ***************** --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ***************** Thymeleaf ****************** --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\r\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\r\n            &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\r\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- ************* Testing Dependencies *********** --&gt;\r\n        &lt;!-- ******************** JUnit ******************* --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;version&gt;${junit.version}&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.3.2&lt;/version&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n\r\nTemplate:\r\n```html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n  &lt;title&gt;My Spring MVC Thymeleaf App&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n  &lt;p th:text=&quot;&#39;Current Date: &#39; + ${currentDate}&quot;&gt;&lt;/p&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nController class:\r\n```java\r\npackage com.github.kyleryxn.springmvcthymeleafjakartademo.controller;\r\n\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\n\r\n\r\n@Controller\r\npublic class HomeController {\r\n\r\n    @GetMapping(&quot;/index/test&quot;)\r\n    public String hello(Model model) {\r\n        model.addAttribute(&quot;currentDate&quot;, String.valueOf(90));\r\n\r\n        // Return name of Thymeleaf template\r\n        return &quot;index&quot;;\r\n    }\r\n}\r\n```\r\n\r\nThymeleaf config class\r\n```java\r\npackage com.github.kyleryxn.springmvcthymeleafjakartademo.config;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.ApplicationContext;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.thymeleaf.spring5.SpringTemplateEngine;\r\nimport org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\r\nimport org.thymeleaf.spring5.view.ThymeleafViewResolver;\r\nimport org.thymeleaf.templatemode.TemplateMode;\r\n\r\n@Configuration\r\npublic class ThymeleafConfig {\r\n\r\n    @Autowired\r\n    private ApplicationContext applicationContext;\r\n\r\n    @Bean\r\n    public SpringResourceTemplateResolver templateResolver() {\r\n        SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\r\n        templateResolver.setApplicationContext(applicationContext);\r\n        templateResolver.setPrefix(&quot;/WEB-INF/views/&quot;);\r\n        templateResolver.setSuffix(&quot;.html&quot;);\r\n        templateResolver.setTemplateMode(TemplateMode.HTML);\r\n\r\n        return templateResolver;\r\n    }\r\n\r\n    @Bean\r\n    public SpringTemplateEngine templateEngine() {\r\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\r\n        templateEngine.setTemplateResolver(templateResolver());\r\n\r\n        return templateEngine;\r\n    }\r\n\r\n    @Bean\r\n    public ThymeleafViewResolver viewResolver() {\r\n        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();\r\n        viewResolver.setTemplateEngine(templateEngine());\r\n\r\n        return viewResolver;\r\n    }\r\n}\r\n```\r\n\r\nSpring config class\r\n```java\r\npackage com.github.kyleryxn.springmvcthymeleafjakartademo.config;\r\n\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\r\nimport org.springframework.web.servlet.config.annotation.ViewControllerRegistry;\r\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\r\n\r\n@Configuration\r\n@EnableWebMvc\r\npublic class SpringConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addViewControllers(ViewControllerRegistry registry) {\r\n        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);\r\n    }\r\n}\r\n```\r\n\r\nmvc-servlet.xml file\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd\r\n               http://www.springframework.org/schema/mvc\r\n        http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n\r\n\r\n    &lt;context:component-scan base-package=&quot;com.github.kyleryxn.springmvcthymeleafjakartademo&quot;/&gt;\r\n\r\n&lt;/beans&gt;\r\n```\r\n\r\nweb.xml file\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\r\n         version=&quot;3.1&quot;\r\n&gt;\r\n    &lt;display-name&gt;Spring MVC XML Application&lt;/display-name&gt;\r\n\r\n    &lt;!-- Spring root --&gt;\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;contextClass&lt;/param-name&gt;\r\n        &lt;param-value&gt;\r\n            org.springframework.web.context.support.AnnotationConfigWebApplicationContext\r\n        &lt;/param-value&gt;\r\n    &lt;/context-param&gt;\r\n    &lt;context-param&gt;\r\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\r\n        &lt;param-value&gt;com.github.kyleryxn.springmvcthymeleafjakartademo&lt;/param-value&gt;\r\n    &lt;/context-param&gt;\r\n\r\n    &lt;listener&gt;\r\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\r\n    &lt;/listener&gt;\r\n\r\n    &lt;!-- Spring child --&gt;\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n    &lt;servlet-mapping&gt;\r\n        &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;\r\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\r\n    &lt;/servlet-mapping&gt;\r\n\r\n    &lt;!-- additional config --&gt;\r\n    &lt;session-config&gt;\r\n        &lt;session-timeout&gt;10&lt;/session-timeout&gt;\r\n    &lt;/session-config&gt;\r\n    &lt;welcome-file-list&gt;\r\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\r\n    &lt;/welcome-file-list&gt;\r\n\r\n&lt;/web-app&gt;\r\n```","title":"My objects keep showing up as null in Thymeleaf template","body":"<p>I'm trying to learn how to integrate Spring MVC and Thymeleaf with Java EE 8. I'm able to get the server running, and the template does show when I visit the server (localhost:8080/[name of my war exploded] (which I also want to figure out how to change and just have my index appear at localhost:8080).</p>\n<p>However, when I visit the page in the browser the value where my object should be (currentDate in the controller) always appears as null no matter the data type of the object, whether String or Integer, Date, anything.</p>\n<p>I don't want to use Spring Boot. I need to use Spring MVC and Thymeleaf within the Java EE 8 project structure. I know from seeing the other text on the html page that the server is able to locate my template. Just not sure why the data keeps appearing as null.</p>\n<p>Any help would be appreciated.</p>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.github.kyleryxn&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-mvc-thymeleaf-jakarta-demo&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;spring-mvc-thymeleaf-jakarta-demo&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;thymeleaf.version&gt;3.1.1.RELEASE&lt;/thymeleaf.version&gt;\n        &lt;junit.version&gt;5.9.1&lt;/junit.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- ****** Java Compile/Runtime Dependencies ****** --&gt;\n        &lt;!-- ******************* Logging ******************* --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.30&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.2.9&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ******************* Others ******************* --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.11.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jsoup&lt;/groupId&gt;\n            &lt;artifactId&gt;jsoup&lt;/artifactId&gt;\n            &lt;version&gt;1.15.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ********* Servlet &amp; MVC Dependencies ********* --&gt;\n        &lt;!-- **************** Java Servlet **************** --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;4.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ***************** Spring MVC ***************** --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ***************** Thymeleaf ****************** --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt;\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-spring5&lt;/artifactId&gt;\n            &lt;version&gt;${thymeleaf.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- ************* Testing Dependencies *********** --&gt;\n        &lt;!-- ******************** JUnit ******************* --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;version&gt;${junit.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Template:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n  &lt;title&gt;My Spring MVC Thymeleaf App&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;p th:text=&quot;'Current Date: ' + ${currentDate}&quot;&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Controller class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.github.kyleryxn.springmvcthymeleafjakartademo.controller;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\n\n\n@Controller\npublic class HomeController {\n\n    @GetMapping(&quot;/index/test&quot;)\n    public String hello(Model model) {\n        model.addAttribute(&quot;currentDate&quot;, String.valueOf(90));\n\n        // Return name of Thymeleaf template\n        return &quot;index&quot;;\n    }\n}\n</code></pre>\n<p>Thymeleaf config class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.github.kyleryxn.springmvcthymeleafjakartademo.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.thymeleaf.spring5.SpringTemplateEngine;\nimport org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver;\nimport org.thymeleaf.spring5.view.ThymeleafViewResolver;\nimport org.thymeleaf.templatemode.TemplateMode;\n\n@Configuration\npublic class ThymeleafConfig {\n\n    @Autowired\n    private ApplicationContext applicationContext;\n\n    @Bean\n    public SpringResourceTemplateResolver templateResolver() {\n        SpringResourceTemplateResolver templateResolver = new SpringResourceTemplateResolver();\n        templateResolver.setApplicationContext(applicationContext);\n        templateResolver.setPrefix(&quot;/WEB-INF/views/&quot;);\n        templateResolver.setSuffix(&quot;.html&quot;);\n        templateResolver.setTemplateMode(TemplateMode.HTML);\n\n        return templateResolver;\n    }\n\n    @Bean\n    public SpringTemplateEngine templateEngine() {\n        SpringTemplateEngine templateEngine = new SpringTemplateEngine();\n        templateEngine.setTemplateResolver(templateResolver());\n\n        return templateEngine;\n    }\n\n    @Bean\n    public ThymeleafViewResolver viewResolver() {\n        ThymeleafViewResolver viewResolver = new ThymeleafViewResolver();\n        viewResolver.setTemplateEngine(templateEngine());\n\n        return viewResolver;\n    }\n}\n</code></pre>\n<p>Spring config class</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.github.kyleryxn.springmvcthymeleafjakartademo.config;\n\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.web.servlet.config.annotation.EnableWebMvc;\nimport org.springframework.web.servlet.config.annotation.ViewControllerRegistry;\nimport org.springframework.web.servlet.config.annotation.WebMvcConfigurer;\n\n@Configuration\n@EnableWebMvc\npublic class SpringConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addViewControllers(ViewControllerRegistry registry) {\n        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);\n    }\n}\n</code></pre>\n<p>mvc-servlet.xml file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\n       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd\n               http://www.springframework.org/schema/mvc\n        http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n\n\n    &lt;context:component-scan base-package=&quot;com.github.kyleryxn.springmvcthymeleafjakartademo&quot;/&gt;\n\n&lt;/beans&gt;\n</code></pre>\n<p>web.xml file</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd&quot;\n         version=&quot;3.1&quot;\n&gt;\n    &lt;display-name&gt;Spring MVC XML Application&lt;/display-name&gt;\n\n    &lt;!-- Spring root --&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextClass&lt;/param-name&gt;\n        &lt;param-value&gt;\n            org.springframework.web.context.support.AnnotationConfigWebApplicationContext\n        &lt;/param-value&gt;\n    &lt;/context-param&gt;\n    &lt;context-param&gt;\n        &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;\n        &lt;param-value&gt;com.github.kyleryxn.springmvcthymeleafjakartademo&lt;/param-value&gt;\n    &lt;/context-param&gt;\n\n    &lt;listener&gt;\n        &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;\n    &lt;/listener&gt;\n\n    &lt;!-- Spring child --&gt;\n    &lt;servlet&gt;\n        &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;mvc&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n\n    &lt;!-- additional config --&gt;\n    &lt;session-config&gt;\n        &lt;session-timeout&gt;10&lt;/session-timeout&gt;\n    &lt;/session-config&gt;\n    &lt;welcome-file-list&gt;\n        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;\n    &lt;/welcome-file-list&gt;\n\n&lt;/web-app&gt;\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1681252635,"post_id":75990570,"comment_id":134026080,"body_markdown":"`NoSuchMethodException` means that in your ***RUNTIME*** environment the class exists but does not have that method.  You may have recompiled your code but not deployed the `Player` class into your runtime location.  We&#39;d need to know how you&#39;re building and deploying your code to help further.","body":"<code>NoSuchMethodException</code> means that in your <b><i>RUNTIME</i></b> environment the class exists but does not have that method.  You may have recompiled your code but not deployed the <code>Player</code> class into your runtime location.  We&#39;d need to know how you&#39;re building and deploying your code to help further."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1681253221,"post_id":75990570,"comment_id":134026153,"body_markdown":"By the way [== is the wrong way to compare Strings](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java/513839#513839).","body":"By the way <a href=\"https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java/513839#513839\">== is the wrong way to compare Strings</a>."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1681253302,"post_id":75990570,"comment_id":134026163,"body_markdown":"When you call `Class.getMethod` you also need to give the types of the parameters the method takes.","body":"When you call <code>Class.getMethod</code> you also need to give the types of the parameters the method takes."},{"owner":{"account_id":15913659,"reputation":739,"user_id":11482935,"display_name":"monsterpiece"},"score":0,"creation_date":1681253486,"post_id":75990570,"comment_id":134026186,"body_markdown":"thanks @JimGarrison I have all the classes in the same package and I&#39;m using maven as the build env by default, I&#39;m just debugging this locally at the moment\n\nmaybe I need to delete some folder specific to maven related to a prior build?","body":"thanks @JimGarrison I have all the classes in the same package and I&#39;m using maven as the build env by default, I&#39;m just debugging this locally at the moment  maybe I need to delete some folder specific to maven related to a prior build?"},{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681265394,"post_id":75990570,"comment_id":134027351,"body_markdown":"@JimGarrison What you describe is a `NoSuchMethodError`. The `NoSuchMethodException` that OP is getting occurs when using reflection and asking for non-existant methods. Here, the correct answer is that OP needs an explanation about how the parameter types are an intrinsic part of a method&#39;s identity in java.","body":"@JimGarrison What you describe is a <code>NoSuchMethodError</code>. The <code>NoSuchMethodException</code> that OP is getting occurs when using reflection and asking for non-existant methods. Here, the correct answer is that OP needs an explanation about how the parameter types are an intrinsic part of a method&#39;s identity in java."}],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681254452,"creation_date":1681253856,"answer_id":75990675,"question_id":75990570,"body_markdown":"Here&#39;s a simple example of calling a method, showing what happens when the parameters to `getMethod` aren&#39;t specified.\r\n\r\n```\r\nimport java.lang.reflect.InvocationTargetException;\r\nimport java.lang.reflect.Method;\r\n\r\npublic class Test {\r\n\r\n    public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\r\n        Class clazz = Player.class;\r\n        Method defend = clazz.getMethod(&quot;defend&quot;);\r\n        Method attack = clazz.getMethod(&quot;attack&quot;, String.class);\r\n        Player player = new Player();\r\n        defend.invoke(player);\r\n        attack.invoke(player, &quot;Ghost&quot;);\r\n        attack = clazz.getMethod(&quot;attack&quot;); // throws\r\n    }\r\n\r\n}\r\n\r\nclass Player {\r\n    public void attack(String thing) {\r\n        System.out.println(&quot;Attacking &quot; + thing);\r\n    }\r\n    public void defend() {\r\n        System.out.println(&quot;Defending&quot;);\r\n    }\r\n}\r\n```\r\n\r\n`defend` has no parameters, so a simple `getMethod(&quot;defend&quot;)` works, but to get `attack` you need to specify the &quot;signature&quot; of the method, which includes the name *and* the parameter types.\r\n\r\nThe return type of the method is *not* part of the signature, which is why a class can&#39;t have two methods with the same name and parameter types *even when* the return type is different, so you don&#39;t need to give the return type when you call `getMethod`.","title":"can&#39;t call a public method in a class inside of a main class after creating an instance of the class","body":"<p>Here's a simple example of calling a method, showing what happens when the parameters to <code>getMethod</code> aren't specified.</p>\n<pre><code>import java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\n\npublic class Test {\n\n    public static void main(String[] args) throws NoSuchMethodException, InvocationTargetException, IllegalAccessException {\n        Class clazz = Player.class;\n        Method defend = clazz.getMethod(&quot;defend&quot;);\n        Method attack = clazz.getMethod(&quot;attack&quot;, String.class);\n        Player player = new Player();\n        defend.invoke(player);\n        attack.invoke(player, &quot;Ghost&quot;);\n        attack = clazz.getMethod(&quot;attack&quot;); // throws\n    }\n\n}\n\nclass Player {\n    public void attack(String thing) {\n        System.out.println(&quot;Attacking &quot; + thing);\n    }\n    public void defend() {\n        System.out.println(&quot;Defending&quot;);\n    }\n}\n</code></pre>\n<p><code>defend</code> has no parameters, so a simple <code>getMethod(&quot;defend&quot;)</code> works, but to get <code>attack</code> you need to specify the &quot;signature&quot; of the method, which includes the name <em>and</em> the parameter types.</p>\n<p>The return type of the method is <em>not</em> part of the signature, which is why a class can't have two methods with the same name and parameter types <em>even when</em> the return type is different, so you don't need to give the return type when you call <code>getMethod</code>.</p>\n"}],"owner":{"account_id":15913659,"reputation":739,"user_id":11482935,"display_name":"monsterpiece"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75990675,"answer_count":1,"score":0,"last_activity_date":1681254452,"creation_date":1681252479,"question_id":75990570,"body_markdown":"I feel like this is a noobish question but I&#39;m getting back into java so I&#39;m a little stumped\r\n\r\nI have a Player class that contains a public attack method() but for some reason when I try to call the method in the main class where I have created an instance of the Player class java says it can&#39;t find the method? I&#39;m hoping someone can tell me what&#39;s wrong\r\n\r\nI have tried rebuilding the class to make sure it was up to date... I don&#39;t see any other errors with other methods in the class.. so I&#39;m not sure what the issue is??\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodException: org.example.Player.attack()\r\n\tat java.base/java.lang.Class.getMethod(Class.java:2227)\r\n\tat org.example.Main.main(Main.java:31)\r\n```\r\nhere is my player class\r\n```\r\npackage org.example;\r\nimport java.util.Random;\r\n\r\n\r\npublic class Player {\r\n    public String name;\r\n    public static int health;\r\n    public int def;\r\n    public int atk;\r\n    private String[] domains = {&quot;hauntings&quot;,&quot;findings&quot;,&quot;solutions&quot;,&quot;busters&quot;,&quot;slayers&quot;,&quot;defense&quot;,&quot;protection&quot;,&quot;powers&quot;,&quot;scary&quot;};\r\n\r\n    public Player(String name, int health, int atk, int def) {\r\n        this.name = name;\r\n        this.health = health;\r\n        this.atk = atk;\r\n        this.def = def;\r\n    }\r\n\r\n    // player will make an http request for a random site trying to find anything related to ghosts\r\n    // if the response is 200 we assume the player has learned something new about ghosts and increased their knowledge\r\n    // this in turn increases player atk power\r\n\r\n    public void loseHealth(int amount){\r\n        this.health = this.health-amount;\r\n        System.out.println(this.name+&quot; now has &quot;+this.health+&quot; health&quot;);\r\n    }\r\n   public void searchWebForAnswers () {\r\n       Random random = new Random();\r\n        int randomIndex = random.nextInt(this.domains.length);\r\n        String randomUrl = domains[randomIndex];\r\n\r\n        // if this website exists we will increase atk by 1\r\n        if( randomUrl == &quot;defense&quot;){\r\n            this.atk +=1;\r\n        }\r\n    }\r\n\r\n    public void attack(Ghost ghost){\r\n        Random rand = new Random();\r\n        double attackPlusRoll = Math.floor(Math.random() *(4-1 +this.atk) + 1);\r\n        if(this.atk &gt; ghost.def &amp;&amp; ghost.getIsTransparent() == false){\r\n            ghost.setGhostHealth(this.atk-ghost.def);\r\n        }else{\r\n            System.out.println(&quot;the attack does no damage: player_atk:&quot;+this.atk+&quot;ghost_defense:&quot;+ghost.def);\r\n        }\r\n    }\r\n\r\n    public int getHealth(){\r\n        return this.health;\r\n    }\r\n    public void setPlayerHealth(int val){\r\n        this.health = val;\r\n    }\r\n}\r\n```\r\n\r\nhere is my main class \r\n```\r\npackage org.example;\r\n\r\nimport java.lang.reflect.InvocationTargetException;\r\nimport java.lang.reflect.Method;\r\nimport java.util.Random;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\r\n        String[] playerMethods = {&quot;attack&quot;, &quot;searchWebForAnswers&quot;};\r\n        String[] ghostMethods = {&quot;learnToSpeak&quot;, &quot;sayBoo&quot;, &quot;haunt&quot;,&quot;becomeTransparent&quot;,&quot;attack&quot;};\r\n        System.out.println(&quot;BEGIN THE HAUNT!&quot;);\r\n\r\n        /*\r\n         player will go first, then ghost\r\n         a random action will be taken by whoever goes\r\n         the turns continue until either the ghost is exorcised or the player dies\r\n         */\r\n\r\n        Player player = new Player(&quot;Luther&quot;, 10, 1, 3);\r\n        Ghost ghost = new Ghost(20, 0, 3);\r\n\r\n            while (player.health &gt; 0 &amp;&amp; ghost.health &gt; 0) {\r\n                Random random = new Random();\r\n\r\n                // a random method is chosen each turn\r\n                // this does not include methods like getHealth or methods used by the game to determine state\r\n\r\n                    System.out.println(&quot;player is taking their turn&quot;);\r\n                    int randomMethodIndex = random.nextInt(playerMethods.length);\r\n                    String randomMethodName = playerMethods[randomMethodIndex];\r\n                    Method method = Player.class.getMethod(randomMethodName);\r\n                    if( randomMethodName == &quot;attack&quot;){\r\n                        player.attack(ghost);\r\n                    }else {\r\n                        method.invoke(player);\r\n                    }\r\n\r\n\r\n                    System.out.println(&quot;ghost is taking their turn&quot;);\r\n                    int randomMethodIndex2 = random.nextInt(playerMethods.length);\r\n                    String randomMethodName2 = ghostMethods[randomMethodIndex];\r\n                    Method method2 = Ghost.class.getMethod(randomMethodName2);\r\n                    if( randomMethodName2 == &quot;ghostAttack&quot;){\r\n                        ghost.ghostAttack(player);\r\n                    }else {\r\n                        method2.invoke(ghost);\r\n                    }\r\n\r\n            }\r\n        if(player.getHealth() == 0){\r\n            System.out.println(&quot;player has died&quot;);\r\n            System.out.println(player.health);\r\n        }else{\r\n            System.out.println(&quot;congratulations you&#39;ve exorcised the ghost&quot;);\r\n            System.out.println(&quot;player &quot;+player.health);\r\n            System.out.println(&quot;ghost &quot;+ghost.health);\r\n        }\r\n    }\r\n};\r\n```\r\n\r\nhere is a quick dump using a python script of all the files present in the local project\r\n```\r\n\\simple-api\\ghostgame\\.idea\\.gitignore\r\n\\simple-api\\ghostgame\\.idea\\compiler.xml\r\n\\simple-api\\ghostgame\\.idea\\dbnavigator.xml\r\n\\simple-api\\ghostgame\\.idea\\encodings.xml\r\n\\simple-api\\ghostgame\\.idea\\jarRepositories.xml\r\n\\simple-api\\ghostgame\\.idea\\misc.xml\r\n\\simple-api\\ghostgame\\.idea\\workspace.xml\r\n\\simple-api\\ghostgame\\.idea\r\n\\simple-api\\ghostgame\\pom.xml\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\GameActions.java\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Ghost.java\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Main.java\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Player.java\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\r\n\\simple-api\\ghostgame\\src\\main\\java\\org\r\n\\simple-api\\ghostgame\\src\\main\\java\r\n\\simple-api\\ghostgame\\src\\main\\resources\r\n\\simple-api\\ghostgame\\src\\main\r\n\\simple-api\\ghostgame\\src\\test\\java\r\n\\simple-api\\ghostgame\\src\\test\r\n\\simple-api\\ghostgame\\src\r\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\GameActions.class\r\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Ghost.class\r\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Main.class\r\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Player.class\r\n\\simple-api\\ghostgame\\target\\classes\\org\\example\r\n\\simple-api\\ghostgame\\target\\classes\\org\r\n\\simple-api\\ghostgame\\target\\classes\r\n\\simple-api\\ghostgame\\target\\generated-sources\\annotations\r\n\\simple-api\\ghostgame\\target\\generated-sources\r\n\\simple-api\\ghostgame\\target\r\n```\r\n","title":"can&#39;t call a public method in a class inside of a main class after creating an instance of the class","body":"<p>I feel like this is a noobish question but I'm getting back into java so I'm a little stumped</p>\n<p>I have a Player class that contains a public attack method() but for some reason when I try to call the method in the main class where I have created an instance of the Player class java says it can't find the method? I'm hoping someone can tell me what's wrong</p>\n<p>I have tried rebuilding the class to make sure it was up to date... I don't see any other errors with other methods in the class.. so I'm not sure what the issue is??</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodException: org.example.Player.attack()\n    at java.base/java.lang.Class.getMethod(Class.java:2227)\n    at org.example.Main.main(Main.java:31)\n</code></pre>\n<p>here is my player class</p>\n<pre><code>package org.example;\nimport java.util.Random;\n\n\npublic class Player {\n    public String name;\n    public static int health;\n    public int def;\n    public int atk;\n    private String[] domains = {&quot;hauntings&quot;,&quot;findings&quot;,&quot;solutions&quot;,&quot;busters&quot;,&quot;slayers&quot;,&quot;defense&quot;,&quot;protection&quot;,&quot;powers&quot;,&quot;scary&quot;};\n\n    public Player(String name, int health, int atk, int def) {\n        this.name = name;\n        this.health = health;\n        this.atk = atk;\n        this.def = def;\n    }\n\n    // player will make an http request for a random site trying to find anything related to ghosts\n    // if the response is 200 we assume the player has learned something new about ghosts and increased their knowledge\n    // this in turn increases player atk power\n\n    public void loseHealth(int amount){\n        this.health = this.health-amount;\n        System.out.println(this.name+&quot; now has &quot;+this.health+&quot; health&quot;);\n    }\n   public void searchWebForAnswers () {\n       Random random = new Random();\n        int randomIndex = random.nextInt(this.domains.length);\n        String randomUrl = domains[randomIndex];\n\n        // if this website exists we will increase atk by 1\n        if( randomUrl == &quot;defense&quot;){\n            this.atk +=1;\n        }\n    }\n\n    public void attack(Ghost ghost){\n        Random rand = new Random();\n        double attackPlusRoll = Math.floor(Math.random() *(4-1 +this.atk) + 1);\n        if(this.atk &gt; ghost.def &amp;&amp; ghost.getIsTransparent() == false){\n            ghost.setGhostHealth(this.atk-ghost.def);\n        }else{\n            System.out.println(&quot;the attack does no damage: player_atk:&quot;+this.atk+&quot;ghost_defense:&quot;+ghost.def);\n        }\n    }\n\n    public int getHealth(){\n        return this.health;\n    }\n    public void setPlayerHealth(int val){\n        this.health = val;\n    }\n}\n</code></pre>\n<p>here is my main class</p>\n<pre><code>package org.example;\n\nimport java.lang.reflect.InvocationTargetException;\nimport java.lang.reflect.Method;\nimport java.util.Random;\n\npublic class Main {\n    public static void main(String[] args) throws InvocationTargetException, IllegalAccessException, NoSuchMethodException {\n        String[] playerMethods = {&quot;attack&quot;, &quot;searchWebForAnswers&quot;};\n        String[] ghostMethods = {&quot;learnToSpeak&quot;, &quot;sayBoo&quot;, &quot;haunt&quot;,&quot;becomeTransparent&quot;,&quot;attack&quot;};\n        System.out.println(&quot;BEGIN THE HAUNT!&quot;);\n\n        /*\n         player will go first, then ghost\n         a random action will be taken by whoever goes\n         the turns continue until either the ghost is exorcised or the player dies\n         */\n\n        Player player = new Player(&quot;Luther&quot;, 10, 1, 3);\n        Ghost ghost = new Ghost(20, 0, 3);\n\n            while (player.health &gt; 0 &amp;&amp; ghost.health &gt; 0) {\n                Random random = new Random();\n\n                // a random method is chosen each turn\n                // this does not include methods like getHealth or methods used by the game to determine state\n\n                    System.out.println(&quot;player is taking their turn&quot;);\n                    int randomMethodIndex = random.nextInt(playerMethods.length);\n                    String randomMethodName = playerMethods[randomMethodIndex];\n                    Method method = Player.class.getMethod(randomMethodName);\n                    if( randomMethodName == &quot;attack&quot;){\n                        player.attack(ghost);\n                    }else {\n                        method.invoke(player);\n                    }\n\n\n                    System.out.println(&quot;ghost is taking their turn&quot;);\n                    int randomMethodIndex2 = random.nextInt(playerMethods.length);\n                    String randomMethodName2 = ghostMethods[randomMethodIndex];\n                    Method method2 = Ghost.class.getMethod(randomMethodName2);\n                    if( randomMethodName2 == &quot;ghostAttack&quot;){\n                        ghost.ghostAttack(player);\n                    }else {\n                        method2.invoke(ghost);\n                    }\n\n            }\n        if(player.getHealth() == 0){\n            System.out.println(&quot;player has died&quot;);\n            System.out.println(player.health);\n        }else{\n            System.out.println(&quot;congratulations you've exorcised the ghost&quot;);\n            System.out.println(&quot;player &quot;+player.health);\n            System.out.println(&quot;ghost &quot;+ghost.health);\n        }\n    }\n};\n</code></pre>\n<p>here is a quick dump using a python script of all the files present in the local project</p>\n<pre><code>\\simple-api\\ghostgame\\.idea\\.gitignore\n\\simple-api\\ghostgame\\.idea\\compiler.xml\n\\simple-api\\ghostgame\\.idea\\dbnavigator.xml\n\\simple-api\\ghostgame\\.idea\\encodings.xml\n\\simple-api\\ghostgame\\.idea\\jarRepositories.xml\n\\simple-api\\ghostgame\\.idea\\misc.xml\n\\simple-api\\ghostgame\\.idea\\workspace.xml\n\\simple-api\\ghostgame\\.idea\n\\simple-api\\ghostgame\\pom.xml\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\GameActions.java\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Ghost.java\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Main.java\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\\Player.java\n\\simple-api\\ghostgame\\src\\main\\java\\org\\example\n\\simple-api\\ghostgame\\src\\main\\java\\org\n\\simple-api\\ghostgame\\src\\main\\java\n\\simple-api\\ghostgame\\src\\main\\resources\n\\simple-api\\ghostgame\\src\\main\n\\simple-api\\ghostgame\\src\\test\\java\n\\simple-api\\ghostgame\\src\\test\n\\simple-api\\ghostgame\\src\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\GameActions.class\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Ghost.class\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Main.class\n\\simple-api\\ghostgame\\target\\classes\\org\\example\\Player.class\n\\simple-api\\ghostgame\\target\\classes\\org\\example\n\\simple-api\\ghostgame\\target\\classes\\org\n\\simple-api\\ghostgame\\target\\classes\n\\simple-api\\ghostgame\\target\\generated-sources\\annotations\n\\simple-api\\ghostgame\\target\\generated-sources\n\\simple-api\\ghostgame\\target\n</code></pre>\n"},{"tags":["java","android","api","android-volley","octoprint"],"comments":[{"owner":{"account_id":111736,"reputation":11811,"user_id":295004,"display_name":"Morrison Chang"},"score":0,"creation_date":1681250145,"post_id":75990339,"comment_id":134025752,"body_markdown":"Outputting what the actual `VolleyError` is rather than your message would be useful.","body":"Outputting what the actual <code>VolleyError</code> is rather than your message would be useful."}],"owner":{"account_id":26574366,"reputation":1,"user_id":20200066,"display_name":"Diana"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681251718,"creation_date":1681249283,"question_id":75990339,"body_markdown":"I&#39;ve created an Android app (written in java) to control the functions of a Kinetic Sand Table, which is based with its functionality on OctoPrint with exclusion of the z axis.\r\n\r\nTo make sure everything would work prior to hooking up the the SandTable, I decided to start off with attaching the 3D printer. That didn&#39;t work because the printer I have is already hooked.\r\n\r\nSo change of plans, now I tried using the Virtual Printer option. and i&#39;m running OctoPI\r\n\r\n### What is the problem?\r\n\r\nmy app is not making API calls!\r\nI&#39;m figuring, something wrong with how I&#39;m trying to access the endpoints!\r\n\r\ni&#39;m recieving a &quot;Timeout or no connection error occurred&quot; at the app&#39;s launch.\r\n\r\nI tried to hash map the headers\r\n\r\n```\r\npublic class MainActivity extends AppCompatActivity {\r\n//String url = &quot;http://octopiaddress/api/job/start?apikey=mynoneglobalapikey&quot;;\r\n\r\n    private static final String OctoPrint_IP = &quot;octopiaddress&quot;;\r\n    private static final String baseUrl = OctoPrint_IP + &quot;/api&quot;;\r\n    private static final String jobUrl = baseUrl + &quot;/job&quot;;\r\n    private static final String API_KEY = &quot;mynoneglobalapikey&quot;;\r\n    private final String TAG = &quot;tag123&quot;;\r\n    private Map&lt;String, String&gt; headers;\r\n    Button playButton;\r\nSpinner patternSpinner;\r\nprivate static final String files = baseUrl + &quot;/files/local&quot; + API_KEY;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        // set the theme to no title bar\r\n        setTheme(android.R.style.Theme_NoTitleBar);\r\n        // set the content view for your activity\r\n        setContentView(R.layout.activity_main);\r\n\r\n        playButton = findViewById(R.id.play_button);\r\n\r\npatternSpinner = findViewById(R.id.spinner);\r\n\r\nheaders = new HashMap&lt;&gt;();\r\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n        headers.put(&quot;X-Api-Key&quot;, API_KEY);\r\n\r\n        playButton.setOnClickListener(v -&gt; startPrintJob());\r\n\r\n        // The URL to retrieve the patterns from the OctoPrint API\r\n        //String filesUrl = &quot;http://octopiaddress/api/files/local?apikey=mynoneglobalapikey&quot;;\r\n        // Make the HTTP request to retrieve the patterns from the OctoPrint API\r\n        JsonArrayRequest request = new JsonArrayRequest(\r\n                Request.Method.GET,\r\n                files,\r\n                null,\r\n                response -&gt; {\r\n                    // Log the response received\r\n                    Log.d(TAG, &quot;Response received: &quot; + response.toString());\r\n                    // Parse the JSON response and add the patterns to the spinner\r\n                    List&lt;String&gt; patternNames = new ArrayList&lt;&gt;();\r\n                    for (int i = 0; i &lt; response.length(); i++) {\r\n                        try {\r\n                            JSONObject pattern = response.getJSONObject(i);\r\n                            String name = pattern.getString(&quot;pattern&quot;);\r\n                            patternNames.add(name);\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n                    }\r\n                    // Creating adapter for spinner\r\n                    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(getApplicationContext(), android.R.layout.simple_spinner_item, patternNames);\r\n                    // Drop down layout style - list view with radio button\r\n                    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\r\n                    // attaching data adapter to spinner\r\n                    patternSpinner.setAdapter(adapter);\r\n                    Log.d(TAG, &quot;HTTP request successful&quot;);\r\n\r\n                },\r\n                this::handleVolleyError\r\n\r\n        );\r\n\r\n        // Add the request to the Volley request queue\r\n        RequestQueue queue = Volley.newRequestQueue(getApplicationContext());\r\n        queue.add(request);\r\n\r\n        // Set a listener for when a pattern is selected in the spinner\r\n        patternSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\r\n            @Override\r\n            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\r\n                String selectedPatternName = (String) parent.getItemAtPosition(position);\r\n\r\n                // Construct the JSON object to start the pattern\r\n                JSONObject jsonBody = new JSONObject();\r\n                try {\r\n                    jsonBody.put(&quot;name&quot;, selectedPatternName);\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n                // Log the JSON body being sent in the request\r\n                Log.d(TAG, &quot;Sending JSON body in the request: &quot; + jsonBody);\r\n            }\r\n\r\n            @Override\r\n            public void onNothingSelected(AdapterView&lt;?&gt; parent) {\r\n                // Not used in this example\r\n            }\r\n        });\r\n}\r\n\r\n    private void startPrintJob() {\r\n        JSONObject jsonObject = new JSONObject();\r\n        try {\r\n            jsonObject.put(&quot;command&quot;, &quot;start&quot;);\r\n        } catch (JSONException e) {\r\n            e.printStackTrace();\r\n            return;\r\n        }\r\n\r\n        JsonObjectRequest request = new JsonObjectRequest(Request.Method.POST, jobUrl, jsonObject,\r\n                response -&gt; Toast.makeText(MainActivity.this, &quot;Print started&quot;, Toast.LENGTH_SHORT).show(), error -&gt; Toast.makeText(MainActivity.this, &quot;Failed to start print&quot;, Toast.LENGTH_SHORT).show()) {\r\n            @Override\r\n            public Map&lt;String, String&gt; getHeaders() {\r\n                return headers;\r\n            }\r\n        };\r\n\r\n        Volley.newRequestQueue(this).add(request);\r\n    }\r\n\r\n    private void handleVolleyError(VolleyError error) {\r\n        String message;\r\n        if (error instanceof TimeoutError || error instanceof NoConnectionError) {\r\n            message = &quot;Timeout or no connection error occurred&quot;;\r\n        } else if (error instanceof AuthFailureError) {\r\n            message = &quot;Authentication error occurred&quot;;\r\n        } else if (error instanceof ServerError) {\r\n            message = &quot;Server error occurred&quot;;\r\n        } else if (error instanceof NetworkError) {\r\n            message = &quot;Network error occurred&quot;;\r\n        } else if (error instanceof ParseError) {\r\n            message = &quot;JSON parse error occurred&quot;;\r\n        } else {\r\n            message = &quot;Unknown error occurred&quot;;\r\n        }\r\n        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG).show();\r\n    }\r\n}\r\n```","title":"How to make OctoPrint API calls from an android app to controll devices with similar functionality to 3D printers?","body":"<p>I've created an Android app (written in java) to control the functions of a Kinetic Sand Table, which is based with its functionality on OctoPrint with exclusion of the z axis.</p>\n<p>To make sure everything would work prior to hooking up the the SandTable, I decided to start off with attaching the 3D printer. That didn't work because the printer I have is already hooked.</p>\n<p>So change of plans, now I tried using the Virtual Printer option. and i'm running OctoPI</p>\n<h3>What is the problem?</h3>\n<p>my app is not making API calls!\nI'm figuring, something wrong with how I'm trying to access the endpoints!</p>\n<p>i'm recieving a &quot;Timeout or no connection error occurred&quot; at the app's launch.</p>\n<p>I tried to hash map the headers</p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n//String url = &quot;http://octopiaddress/api/job/start?apikey=mynoneglobalapikey&quot;;\n\n    private static final String OctoPrint_IP = &quot;octopiaddress&quot;;\n    private static final String baseUrl = OctoPrint_IP + &quot;/api&quot;;\n    private static final String jobUrl = baseUrl + &quot;/job&quot;;\n    private static final String API_KEY = &quot;mynoneglobalapikey&quot;;\n    private final String TAG = &quot;tag123&quot;;\n    private Map&lt;String, String&gt; headers;\n    Button playButton;\nSpinner patternSpinner;\nprivate static final String files = baseUrl + &quot;/files/local&quot; + API_KEY;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // set the theme to no title bar\n        setTheme(android.R.style.Theme_NoTitleBar);\n        // set the content view for your activity\n        setContentView(R.layout.activity_main);\n\n        playButton = findViewById(R.id.play_button);\n\npatternSpinner = findViewById(R.id.spinner);\n\nheaders = new HashMap&lt;&gt;();\n        headers.put(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        headers.put(&quot;X-Api-Key&quot;, API_KEY);\n\n        playButton.setOnClickListener(v -&gt; startPrintJob());\n\n        // The URL to retrieve the patterns from the OctoPrint API\n        //String filesUrl = &quot;http://octopiaddress/api/files/local?apikey=mynoneglobalapikey&quot;;\n        // Make the HTTP request to retrieve the patterns from the OctoPrint API\n        JsonArrayRequest request = new JsonArrayRequest(\n                Request.Method.GET,\n                files,\n                null,\n                response -&gt; {\n                    // Log the response received\n                    Log.d(TAG, &quot;Response received: &quot; + response.toString());\n                    // Parse the JSON response and add the patterns to the spinner\n                    List&lt;String&gt; patternNames = new ArrayList&lt;&gt;();\n                    for (int i = 0; i &lt; response.length(); i++) {\n                        try {\n                            JSONObject pattern = response.getJSONObject(i);\n                            String name = pattern.getString(&quot;pattern&quot;);\n                            patternNames.add(name);\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    // Creating adapter for spinner\n                    ArrayAdapter&lt;String&gt; adapter = new ArrayAdapter&lt;&gt;(getApplicationContext(), android.R.layout.simple_spinner_item, patternNames);\n                    // Drop down layout style - list view with radio button\n                    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);\n                    // attaching data adapter to spinner\n                    patternSpinner.setAdapter(adapter);\n                    Log.d(TAG, &quot;HTTP request successful&quot;);\n\n                },\n                this::handleVolleyError\n\n        );\n\n        // Add the request to the Volley request queue\n        RequestQueue queue = Volley.newRequestQueue(getApplicationContext());\n        queue.add(request);\n\n        // Set a listener for when a pattern is selected in the spinner\n        patternSpinner.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {\n            @Override\n            public void onItemSelected(AdapterView&lt;?&gt; parent, View view, int position, long id) {\n                String selectedPatternName = (String) parent.getItemAtPosition(position);\n\n                // Construct the JSON object to start the pattern\n                JSONObject jsonBody = new JSONObject();\n                try {\n                    jsonBody.put(&quot;name&quot;, selectedPatternName);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n                // Log the JSON body being sent in the request\n                Log.d(TAG, &quot;Sending JSON body in the request: &quot; + jsonBody);\n            }\n\n            @Override\n            public void onNothingSelected(AdapterView&lt;?&gt; parent) {\n                // Not used in this example\n            }\n        });\n}\n\n    private void startPrintJob() {\n        JSONObject jsonObject = new JSONObject();\n        try {\n            jsonObject.put(&quot;command&quot;, &quot;start&quot;);\n        } catch (JSONException e) {\n            e.printStackTrace();\n            return;\n        }\n\n        JsonObjectRequest request = new JsonObjectRequest(Request.Method.POST, jobUrl, jsonObject,\n                response -&gt; Toast.makeText(MainActivity.this, &quot;Print started&quot;, Toast.LENGTH_SHORT).show(), error -&gt; Toast.makeText(MainActivity.this, &quot;Failed to start print&quot;, Toast.LENGTH_SHORT).show()) {\n            @Override\n            public Map&lt;String, String&gt; getHeaders() {\n                return headers;\n            }\n        };\n\n        Volley.newRequestQueue(this).add(request);\n    }\n\n    private void handleVolleyError(VolleyError error) {\n        String message;\n        if (error instanceof TimeoutError || error instanceof NoConnectionError) {\n            message = &quot;Timeout or no connection error occurred&quot;;\n        } else if (error instanceof AuthFailureError) {\n            message = &quot;Authentication error occurred&quot;;\n        } else if (error instanceof ServerError) {\n            message = &quot;Server error occurred&quot;;\n        } else if (error instanceof NetworkError) {\n            message = &quot;Network error occurred&quot;;\n        } else if (error instanceof ParseError) {\n            message = &quot;JSON parse error occurred&quot;;\n        } else {\n            message = &quot;Unknown error occurred&quot;;\n        }\n        Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG).show();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","redis"],"comments":[{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1654366179,"post_id":72502009,"comment_id":128075776,"body_markdown":"Did you specify @EnableCaching?","body":"Did you specify @EnableCaching?"},{"owner":{"account_id":431710,"reputation":3063,"user_id":815961,"accept_rate":51,"display_name":"Pavan Dittakavi"},"score":0,"creation_date":1654366244,"post_id":72502009,"comment_id":128075791,"body_markdown":"@voidvoid Yes, I did. I updated the question with that relevant snippet.","body":"@voidvoid Yes, I did. I updated the question with that relevant snippet."},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1654366458,"post_id":72502009,"comment_id":128075833,"body_markdown":"Can you add your build.gradle or maven file?","body":"Can you add your build.gradle or maven file?"},{"owner":{"account_id":431710,"reputation":3063,"user_id":815961,"accept_rate":51,"display_name":"Pavan Dittakavi"},"score":0,"creation_date":1654366520,"post_id":72502009,"comment_id":128075850,"body_markdown":"@voidvoid I have added it now. Please check.","body":"@voidvoid I have added it now. Please check."},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":0,"creation_date":1654366626,"post_id":72502009,"comment_id":128075872,"body_markdown":"I think you need to add spring-boot-starter-cache to take advatange of auto configuration","body":"I think you need to add spring-boot-starter-cache to take advatange of auto configuration"},{"owner":{"account_id":431710,"reputation":3063,"user_id":815961,"accept_rate":51,"display_name":"Pavan Dittakavi"},"score":0,"creation_date":1654366885,"post_id":72502009,"comment_id":128075922,"body_markdown":"Added this dependency and see no change. Im reading through the documentation to cross check if I have ticked all the checks.","body":"Added this dependency and see no change. Im reading through the documentation to cross check if I have ticked all the checks."},{"owner":{"account_id":25121309,"reputation":1105,"user_id":18969611,"display_name":"void void"},"score":1,"creation_date":1654367647,"post_id":72502009,"comment_id":128076047,"body_markdown":"One more pointer would be to connect to redis with redis-cli and check if you have any key-values added using: &quot;keys *&quot;, to diagnose if it&#39;s added to redis at all.","body":"One more pointer would be to connect to redis with redis-cli and check if you have any key-values added using: &quot;keys *&quot;, to diagnose if it&#39;s added to redis at all."}],"answers":[{"tags":[],"owner":{"account_id":529477,"reputation":1533,"user_id":1234412,"display_name":"BSB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654738444,"creation_date":1654738444,"answer_id":72553813,"question_id":72502009,"body_markdown":"Just created a simple working example at https://github.com/bsbodden/basic-caching-spring-data-redis\r\n\r\nWhat you need:\r\n\r\n 1. POM dependencies:\r\n    ```xml\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-boot-starter-data-redis-reactive&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    ```\r\n2. In the app class or configurer `@EnableCaching`:\r\n    ```java\r\n    @SpringBootApplication\r\n    @EnableCaching\r\n    public class DemoApplication {\r\n    ```\r\n3. In the app class `RedisCacheManager` bean:\r\n      ```java\r\n      @Bean\r\n      public RedisCacheManager cacheManager(RedisConnectionFactory connectionFactory) {\r\n        RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig() //\r\n            .prefixCacheNameWith(this.getClass().getPackageName() + &quot;.&quot;) //\r\n            .entryTtl(Duration.ofHours(1)) //\r\n            .disableCachingNullValues();\r\n    \r\n        return RedisCacheManager.builder(connectionFactory) //\r\n            .cacheDefaults(config) //\r\n            .build();\r\n      }\r\n      ```\r\n4. `@Cacheable` in your controller:\r\n      ```java \r\n      @GetMapping(&quot;/{id}&quot;)\r\n      @Cacheable(&quot;some-cache&quot;)\r\n      public SomeModel get(@PathVariable(&quot;id&quot;) String id) {\r\n        return repo.findById(id).orElse(SomeModel.of(&quot;nope&quot;));\r\n      }\r\n      ```","title":"SpringBoot connection to Redis : Does not appear to be caching data","body":"<p>Just created a simple working example at <a href=\"https://github.com/bsbodden/basic-caching-spring-data-redis\" rel=\"nofollow noreferrer\">https://github.com/bsbodden/basic-caching-spring-data-redis</a></p>\n<p>What you need:</p>\n<ol>\n<li>POM dependencies:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-redis-reactive&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li>In the app class or configurer <code>@EnableCaching</code>:\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\n@EnableCaching\npublic class DemoApplication {\n</code></pre>\n</li>\n<li>In the app class <code>RedisCacheManager</code> bean:\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RedisCacheManager cacheManager(RedisConnectionFactory connectionFactory) {\n  RedisCacheConfiguration config = RedisCacheConfiguration.defaultCacheConfig() //\n      .prefixCacheNameWith(this.getClass().getPackageName() + &quot;.&quot;) //\n      .entryTtl(Duration.ofHours(1)) //\n      .disableCachingNullValues();\n\n  return RedisCacheManager.builder(connectionFactory) //\n      .cacheDefaults(config) //\n      .build();\n}\n</code></pre>\n</li>\n<li><code>@Cacheable</code> in your controller:\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/{id}&quot;)\n@Cacheable(&quot;some-cache&quot;)\npublic SomeModel get(@PathVariable(&quot;id&quot;) String id) {\n  return repo.findById(id).orElse(SomeModel.of(&quot;nope&quot;));\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"account_id":431710,"reputation":3063,"user_id":815961,"accept_rate":51,"display_name":"Pavan Dittakavi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4713,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1681251665,"creation_date":1654365888,"question_id":72502009,"body_markdown":"I am using SpringBoot to connect to Redis. I have Web dependency on SpringBoot and  my intention is to write Product information to a runtime datastructure i.e., a Map. I want to test the Cache annotations that Spring provides to understand the usage.\r\n\r\nHere is the POM.xml file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;io.fireacademy&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;redisconnectivity&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;redisconnectivity&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot &amp;amp; Redis connectivity&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;redis.clients&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jedis&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nHere is the Spring Application class\r\n\r\n```\r\npackage io.fireacademy.redisconnectivity;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.cache.annotation.EnableCaching;\r\n\r\n@SpringBootApplication\r\n@EnableCaching\r\npublic class RedisconnectivityApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(RedisconnectivityApplication.class, args);\r\n\t}\r\n}\r\n\r\n```\r\n\r\nHere is my main controller class\r\n\r\n```\r\npackage io.fireacademy.redisconnectivity.controllers;\r\n\r\nimport io.fireacademy.redisconnectivity.model.Product;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.cache.annotation.CacheEvict;\r\nimport org.springframework.cache.annotation.Cacheable;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\nimport java.util.Collection;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.stream.Collectors;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/products&quot;)\r\npublic class WebAppController {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(WebAppController.class);\r\n\r\n    // This will serve as the database\r\n    private Map&lt;String, Product&gt; m_productDatabase = new HashMap&lt;String, Product&gt;();\r\n\r\n    @Cacheable(value=&quot;my-product-cache&quot;, key=&quot;#productId&quot;)\r\n    private Product getProductFromCacheOrDB(String productId)\r\n    {\r\n        logger.info(&quot;Loading the Product &quot; + productId + &quot; from the cache!.&quot;);\r\n        return m_productDatabase.get(productId);\r\n    }\r\n\r\n    @CacheEvict(value=&quot;my-product-cache&quot;, key=&quot;#productId&quot;)\r\n    private Product deleteFromCache(String productId)\r\n    {\r\n        logger.info(&quot;Remove the Product &quot; + productId + &quot; from the cache!.&quot;);\r\n        return m_productDatabase.get(productId);\r\n    }\r\n\r\n    @GetMapping(path=&quot;/&quot;)\r\n    public ResponseEntity&lt;List&lt;Product&gt;&gt; getProducts()\r\n    {\r\n        Collection&lt;Product&gt; allProducts = m_productDatabase.values();\r\n\r\n        List&lt;Product&gt; allProductsAsList = allProducts.stream().collect(Collectors.toList());\r\n\r\n        return new ResponseEntity&lt;List&lt;Product&gt;&gt;(allProductsAsList, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(path=&quot;/{productId}&quot;)\r\n    public ResponseEntity&lt;Product&gt; getProducts(@PathVariable String productId)\r\n    {\r\n        // Either from the Cache or from the DB.\r\n        Product product = getProductFromCacheOrDB(productId);\r\n\r\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.OK);\r\n    }\r\n\r\n    @PostMapping(consumes = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE},\r\n            produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE})\r\n    public ResponseEntity&lt;Product&gt; createProduct(@RequestBody Product product)\r\n    {\r\n        m_productDatabase.put(product.getId(), product);\r\n\r\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.CREATED);\r\n    }\r\n\r\n    @PutMapping(path=&quot;/{productId}&quot;,\r\n                consumes = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE},\r\n                produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE})\r\n    public ResponseEntity&lt;Product&gt; updateProduct(@PathVariable String productId, @RequestBody Product product)\r\n    {\r\n        m_productDatabase.put(productId, product);\r\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.OK);\r\n    }\r\n\r\n    @DeleteMapping(path=&quot;/{productId}&quot;)\r\n    public ResponseEntity&lt;Product&gt; deleteProduct(@PathVariable String productId)\r\n    {\r\n        Product deletedProduct = getProductFromCacheOrDB(productId);\r\n        deleteFromCache(productId);\r\n\r\n        return new ResponseEntity&lt;Product&gt;(deletedProduct, HttpStatus.OK);\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere is my RedisConfig class\r\n\r\n```\r\npackage io.fireacademy.redisconnectivity.configurations;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.connection.RedisStandaloneConfiguration;\r\nimport org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.data.redis.repository.configuration.EnableRedisRepositories;\r\nimport org.springframework.data.redis.serializer.JdkSerializationRedisSerializer;\r\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\r\n\r\n@Configuration\r\n@EnableRedisRepositories\r\npublic class RedisConfig {\r\n\r\n    @Bean\r\n    public JedisConnectionFactory connectionFactory() {\r\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\r\n        configuration.setHostName(&quot;localhost&quot;);\r\n        configuration.setPort(6379);\r\n        return new JedisConnectionFactory(configuration);\r\n    }\r\n\r\n    @Bean\r\n    public RedisTemplate&lt;String, Object&gt; template() {\r\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(connectionFactory());\r\n        template.setKeySerializer(new StringRedisSerializer());\r\n        template.setHashKeySerializer(new StringRedisSerializer());\r\n        template.setHashKeySerializer(new JdkSerializationRedisSerializer());\r\n        template.setValueSerializer(new JdkSerializationRedisSerializer());\r\n        template.setEnableTransactionSupport(true);\r\n        template.afterPropertiesSet();\r\n        return template;\r\n    }\r\n}\r\n```\r\n\r\nMy application.properties looks as below:\r\n```\r\n# Redis Config\r\nspring.cache.type=redis\r\nspring.redis.host=localhost\r\nspring.redis.port=6379\r\n```\r\n\r\nAnd I am running Redis as a docker container using this:\r\n\r\n```\r\ndocker run -d -p 6379:6379 --name my-redis redis\r\n```\r\n\r\nWhen I inspect the docker container&#39;s logs, I see nothing happening. \r\n```\r\nD:\\Development\\springboot\\learn_redis&gt;docker logs -f c376f1be9be35281b900c2943fbf8ea37e1563157efb57d46ca1c74fc880bc5c\r\n1:C 04 Jun 2022 17:49:51.854 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n1:C 04 Jun 2022 17:49:51.854 # Redis version=7.0.0, bits=64, commit=00000000, modified=0, pid=1, just started\r\n1:C 04 Jun 2022 17:49:51.854 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\r\n1:M 04 Jun 2022 17:49:51.854 * monotonic clock: POSIX clock_gettime\r\n1:M 04 Jun 2022 17:49:51.858 * Running mode=standalone, port=6379.\r\n1:M 04 Jun 2022 17:49:51.858 # Server initialized\r\n1:M 04 Jun 2022 17:49:51.858 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add &#39;vm.overcommit_memory = 1&#39; to /etc/sysctl.conf and then reboot or run the command &#39;sysctl vm.overcommit_memory=1&#39; for this to take effect.\r\n1:M 04 Jun 2022 17:49:51.858 * The AOF directory appendonlydir doesn&#39;t exist\r\n1:M 04 Jun 2022 17:49:51.858 * Ready to accept connections\r\n```\r\n\r\nMy understanding was that the Cache annotations would make the data be stored onto the Redis cache. For instance, the getProductFromCacheOrDB, should store the Product object onto the cache with the input productId as the key because of the @Cacheable annotation and a subsequent call to get this specific Product using the GET productId should not invoke the method again. But this is not happening.\r\n\r\nPlease show some pointers on what I could have missed...\r\n\r\nThanks,\r\nPavan.\r\n\r\nEdits:\r\n1. I do not see anything on Redis getting created. I enabled monitoring on Redis via the redis-cli, but see nothing.\r\n2. I tried removing the RedisConfig class and see no change.\r\n\r\n","title":"SpringBoot connection to Redis : Does not appear to be caching data","body":"<p>I am using SpringBoot to connect to Redis. I have Web dependency on SpringBoot and  my intention is to write Product information to a runtime datastructure i.e., a Map. I want to test the Cache annotations that Spring provides to understand the usage.</p>\n<p>Here is the POM.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;io.fireacademy&lt;/groupId&gt;\n    &lt;artifactId&gt;redisconnectivity&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;redisconnectivity&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot &amp;amp; Redis connectivity&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;redis.clients&lt;/groupId&gt;\n            &lt;artifactId&gt;jedis&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Here is the Spring Application class</p>\n<pre><code>package io.fireacademy.redisconnectivity;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cache.annotation.EnableCaching;\n\n@SpringBootApplication\n@EnableCaching\npublic class RedisconnectivityApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(RedisconnectivityApplication.class, args);\n    }\n}\n\n</code></pre>\n<p>Here is my main controller class</p>\n<pre><code>package io.fireacademy.redisconnectivity.controllers;\n\nimport io.fireacademy.redisconnectivity.model.Product;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.cache.annotation.CacheEvict;\nimport org.springframework.cache.annotation.Cacheable;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.*;\n\nimport java.util.Collection;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\n@RestController\n@RequestMapping(&quot;/products&quot;)\npublic class WebAppController {\n\n    private static final Logger logger = LoggerFactory.getLogger(WebAppController.class);\n\n    // This will serve as the database\n    private Map&lt;String, Product&gt; m_productDatabase = new HashMap&lt;String, Product&gt;();\n\n    @Cacheable(value=&quot;my-product-cache&quot;, key=&quot;#productId&quot;)\n    private Product getProductFromCacheOrDB(String productId)\n    {\n        logger.info(&quot;Loading the Product &quot; + productId + &quot; from the cache!.&quot;);\n        return m_productDatabase.get(productId);\n    }\n\n    @CacheEvict(value=&quot;my-product-cache&quot;, key=&quot;#productId&quot;)\n    private Product deleteFromCache(String productId)\n    {\n        logger.info(&quot;Remove the Product &quot; + productId + &quot; from the cache!.&quot;);\n        return m_productDatabase.get(productId);\n    }\n\n    @GetMapping(path=&quot;/&quot;)\n    public ResponseEntity&lt;List&lt;Product&gt;&gt; getProducts()\n    {\n        Collection&lt;Product&gt; allProducts = m_productDatabase.values();\n\n        List&lt;Product&gt; allProductsAsList = allProducts.stream().collect(Collectors.toList());\n\n        return new ResponseEntity&lt;List&lt;Product&gt;&gt;(allProductsAsList, HttpStatus.OK);\n    }\n\n    @GetMapping(path=&quot;/{productId}&quot;)\n    public ResponseEntity&lt;Product&gt; getProducts(@PathVariable String productId)\n    {\n        // Either from the Cache or from the DB.\n        Product product = getProductFromCacheOrDB(productId);\n\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.OK);\n    }\n\n    @PostMapping(consumes = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE},\n            produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE})\n    public ResponseEntity&lt;Product&gt; createProduct(@RequestBody Product product)\n    {\n        m_productDatabase.put(product.getId(), product);\n\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.CREATED);\n    }\n\n    @PutMapping(path=&quot;/{productId}&quot;,\n                consumes = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE},\n                produces = {MediaType.APPLICATION_XML_VALUE,MediaType.APPLICATION_JSON_VALUE})\n    public ResponseEntity&lt;Product&gt; updateProduct(@PathVariable String productId, @RequestBody Product product)\n    {\n        m_productDatabase.put(productId, product);\n        return new ResponseEntity&lt;Product&gt;(product, HttpStatus.OK);\n    }\n\n    @DeleteMapping(path=&quot;/{productId}&quot;)\n    public ResponseEntity&lt;Product&gt; deleteProduct(@PathVariable String productId)\n    {\n        Product deletedProduct = getProductFromCacheOrDB(productId);\n        deleteFromCache(productId);\n\n        return new ResponseEntity&lt;Product&gt;(deletedProduct, HttpStatus.OK);\n    }\n}\n\n</code></pre>\n<p>Here is my RedisConfig class</p>\n<pre><code>package io.fireacademy.redisconnectivity.configurations;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisStandaloneConfiguration;\nimport org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.repository.configuration.EnableRedisRepositories;\nimport org.springframework.data.redis.serializer.JdkSerializationRedisSerializer;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Configuration\n@EnableRedisRepositories\npublic class RedisConfig {\n\n    @Bean\n    public JedisConnectionFactory connectionFactory() {\n        RedisStandaloneConfiguration configuration = new RedisStandaloneConfiguration();\n        configuration.setHostName(&quot;localhost&quot;);\n        configuration.setPort(6379);\n        return new JedisConnectionFactory(configuration);\n    }\n\n    @Bean\n    public RedisTemplate&lt;String, Object&gt; template() {\n        RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(connectionFactory());\n        template.setKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(new StringRedisSerializer());\n        template.setHashKeySerializer(new JdkSerializationRedisSerializer());\n        template.setValueSerializer(new JdkSerializationRedisSerializer());\n        template.setEnableTransactionSupport(true);\n        template.afterPropertiesSet();\n        return template;\n    }\n}\n</code></pre>\n<p>My application.properties looks as below:</p>\n<pre><code># Redis Config\nspring.cache.type=redis\nspring.redis.host=localhost\nspring.redis.port=6379\n</code></pre>\n<p>And I am running Redis as a docker container using this:</p>\n<pre><code>docker run -d -p 6379:6379 --name my-redis redis\n</code></pre>\n<p>When I inspect the docker container's logs, I see nothing happening.</p>\n<pre><code>D:\\Development\\springboot\\learn_redis&gt;docker logs -f c376f1be9be35281b900c2943fbf8ea37e1563157efb57d46ca1c74fc880bc5c\n1:C 04 Jun 2022 17:49:51.854 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\n1:C 04 Jun 2022 17:49:51.854 # Redis version=7.0.0, bits=64, commit=00000000, modified=0, pid=1, just started\n1:C 04 Jun 2022 17:49:51.854 # Warning: no config file specified, using the default config. In order to specify a config file use redis-server /path/to/redis.conf\n1:M 04 Jun 2022 17:49:51.854 * monotonic clock: POSIX clock_gettime\n1:M 04 Jun 2022 17:49:51.858 * Running mode=standalone, port=6379.\n1:M 04 Jun 2022 17:49:51.858 # Server initialized\n1:M 04 Jun 2022 17:49:51.858 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.\n1:M 04 Jun 2022 17:49:51.858 * The AOF directory appendonlydir doesn't exist\n1:M 04 Jun 2022 17:49:51.858 * Ready to accept connections\n</code></pre>\n<p>My understanding was that the Cache annotations would make the data be stored onto the Redis cache. For instance, the getProductFromCacheOrDB, should store the Product object onto the cache with the input productId as the key because of the @Cacheable annotation and a subsequent call to get this specific Product using the GET productId should not invoke the method again. But this is not happening.</p>\n<p>Please show some pointers on what I could have missed...</p>\n<p>Thanks,\nPavan.</p>\n<p>Edits:</p>\n<ol>\n<li>I do not see anything on Redis getting created. I enabled monitoring on Redis via the redis-cli, but see nothing.</li>\n<li>I tried removing the RedisConfig class and see no change.</li>\n</ol>\n"},{"tags":["java","swing","java-2d"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1681239093,"post_id":75988537,"comment_id":134023620,"body_markdown":"When drawing with Java Swing, you have to render the entire drawing `JPanel` each and every frame.  Without seeing any code, I&#39;d suggest creating a background image with stars one time.  You can then move the image along the X-axis and redraw it.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [Performing Custom Painting](https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html) section.","body":"When drawing with Java Swing, you have to render the entire drawing <code>JPanel</code> each and every frame.  Without seeing any code, I&#39;d suggest creating a background image with stars one time.  You can then move the image along the X-axis and redraw it.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/painting/index.html\" rel=\"nofollow noreferrer\">Performing Custom Painting</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1681240966,"post_id":75988537,"comment_id":134024041,"body_markdown":"Post your [mre] demonstrating the problem. We can&#39;t make suggestion is we can&#39;t see the code. Note, we don&#39;t have access to your images, so the MRE should be the example using the drawOval(...) method.","body":"Post your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. We can&#39;t make suggestion is we can&#39;t see the code. Note, we don&#39;t have access to your images, so the MRE should be the example using the drawOval(...) method."},{"owner":{"account_id":20286035,"reputation":3,"user_id":21618530,"display_name":"working_man"},"score":0,"creation_date":1681243712,"post_id":75988537,"comment_id":134024610,"body_markdown":"I added some code that exhibits the behavior I&#39;m experiencing, in a rough fashion.  Drawing with a volatile image is slower than `fillOval`.","body":"I added some code that exhibits the behavior I&#39;m experiencing, in a rough fashion.  Drawing with a volatile image is slower than <code>fillOval</code>."},{"owner":{"account_id":20286035,"reputation":3,"user_id":21618530,"display_name":"working_man"},"score":0,"creation_date":1681244599,"post_id":75988537,"comment_id":134024783,"body_markdown":"@GilbertLeBlanc The broader issue is drawing many dynamic objects at once, such as ships or bullets.  I&#39;m looking for strategies to achieve that quickly.","body":"@GilbertLeBlanc The broader issue is drawing many dynamic objects at once, such as ships or bullets.  I&#39;m looking for strategies to achieve that quickly."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1681247091,"post_id":75988537,"comment_id":134025255,"body_markdown":"I&#39;ve always created a `List` of `Bullet` objects.  The game loop using a Sewing `Timer` updates the positions of the `Bullet` objects and checks for collisions, while the drawing `JPanel` draws their positions as a filled circle.","body":"I&#39;ve always created a <code>List</code> of <code>Bullet</code> objects.  The game loop using a Sewing <code>Timer</code> updates the positions of the <code>Bullet</code> objects and checks for collisions, while the drawing <code>JPanel</code> draws their positions as a filled circle."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681251159,"creation_date":1681250580,"answer_id":75990442,"question_id":75988537,"body_markdown":"I used a `BufferedImage` instead of a VolatileImage and the timing dropped from 40 to 4:\r\n\r\n    import java.awt.*;\r\n    import java.awt.BufferCapabilities;\r\n    import java.awt.Color;\r\n    import java.awt.Dimension;\r\n    import java.awt.Graphics;\r\n    import java.awt.Graphics2D;\r\n    import java.awt.GraphicsConfiguration;\r\n    import java.awt.ImageCapabilities;\r\n    import java.awt.Rectangle;\r\n    import java.awt.RenderingHints;\r\n    import java.awt.Transparency;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.awt.image.*;\r\n    import java.util.Random;\r\n    \r\n    import javax.swing.JComponent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JPanel;\r\n    import javax.swing.RepaintManager;\r\n    import javax.swing.SwingUtilities;\r\n    import javax.swing.Timer;\r\n    \r\n    public class MRE1 {\r\n    \r\n        private static final int OVAL_SIZE = 4;\r\n        private static final int NUM_STARS = 150;\r\n        private static final boolean useImages = true;\r\n    \r\n        private static VolatileImage volatileImage;\r\n        private static BufferedImage bufferedImage;\r\n    \r\n        public static void main(String[] args) {\r\n            System.setProperty(&quot;sun.java2d.opengl&quot;, &quot;true&quot;);\r\n            System.setProperty(&quot;sun.java2d.accthreshold&quot;, &quot;0&quot;);\r\n            JFrame frame = new JFrame();\r\n            frame.setSize(new Dimension(1000, 800));\r\n            frame.setIgnoreRepaint(true);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n            createVolatileImage(frame);\r\n    \r\n            Timer st = new Timer(250, new ActionListener() {\r\n    \r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    long startTime;\r\n                    startTime = System.nanoTime();\r\n                    JComponent contentPanel = ((JComponent) frame.getContentPane());\r\n                    contentPanel.paintImmediately(contentPanel.getBounds());\r\n                    long elapsed = System.nanoTime() - startTime;\r\n                    System.out.println(&quot;Rendering time: &quot; + elapsed / 1000000.0 + &quot;ms.&quot;);\r\n                }\r\n    \r\n            });\r\n    \r\n            frame.setContentPane(createContentPane());\r\n    \r\n            setWindowVisible(frame, true);\r\n            st.start();\r\n        }\r\n    \r\n        private static void createVolatileImage(JFrame frame) {\r\n            GraphicsConfiguration gc = frame.getGraphicsConfiguration();\r\n            volatileImage = gc.createCompatibleVolatileImage(4, 4, Transparency.BITMASK);\r\n            Graphics2D g2 = volatileImage.createGraphics();\r\n            g2.setColor(Color.WHITE);\r\n            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\r\n            g2.dispose();\r\n    \r\n            bufferedImage = new BufferedImage(OVAL_SIZE, OVAL_SIZE, BufferedImage.TYPE_INT_ARGB);\r\n            Graphics2D g2d = bufferedImage.createGraphics();\r\n            g2d.setColor( Color.WHITE );\r\n            g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n            g2d.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\r\n            g2d.dispose();\r\n        }\r\n    \r\n        private static JPanel createContentPane() {\r\n            JPanel contentPane = new JPanel() {\r\n                private static final long serialVersionUID = 2500224655024127049L;\r\n    \r\n                @Override\r\n                public void paintComponent(Graphics g) {\r\n                    Graphics2D g2 = (Graphics2D)g;\r\n                    g2.setColor(Color.BLACK);\r\n                    g2.fillRect(0, 0, getWidth(), getHeight());\r\n    \r\n                    Random rand = new Random();\r\n    \r\n                    for(int i = 0; i &lt; NUM_STARS; i++) {\r\n                        double x = rand.nextDouble() * getWidth();\r\n                        double y = rand.nextDouble() * getHeight();\r\n                        g2.translate(x, y);\r\n                        if(useImages) {\r\n    //                        g2.drawImage(volatileImage, 0, 0, null);\r\n                            g2.drawImage(bufferedImage, 0, 0, null);\r\n                        } else {\r\n                            g2.setColor(Color.WHITE);\r\n                            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                            g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\r\n                        }\r\n                        g2.translate(-x, -y);\r\n                    }\r\n                }\r\n            };\r\n            contentPane.setBackground( Color.BLACK );\r\n            return contentPane;\r\n        }\r\n    \r\n        private static void setWindowVisible(JFrame frame, final boolean visible) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                frame.setVisible(visible);\r\n                try {\r\n                    final BufferCapabilities caps = new BufferCapabilities(new ImageCapabilities(true),\r\n                        new ImageCapabilities(true), BufferCapabilities.FlipContents.UNDEFINED);\r\n                    frame.createBufferStrategy(2, caps);\r\n                } catch (final AWTException e) {\r\n                    frame.createBufferStrategy(2);\r\n                    System.err.println(&quot;Could not set double buffered FLIP strategy, using default double buffer: &quot;\r\n                        + e.getLocalizedMessage());\r\n                }\r\n            });\r\n        }\r\n    \r\n    }\r\n\r\nAlso got rid of the RepaintManager since I see no need for it. \r\n\r\n&gt; I&#39;ve used is to use device compatible VolatileImages, using 1 of 3 variants to avoid scaling with BITMASK transparency\r\n\r\nIf that means you don&#39;t want the image to scale from 4 to 6 pixels when a scaling factor of 150 is used then maybe you can use the `NoScalingIcon`. Check out: https://stackoverflow.com/a/65742492/131872\r\n\r\nYou should be able to create the Icon using your image and then paint the Icon to the BufferedImage and the image will still be 4 pixels.","title":"Java Swing 2D - Draw many small stars quickly","body":"<p>I used a <code>BufferedImage</code> instead of a VolatileImage and the timing dropped from 40 to 4:</p>\n<pre><code>import java.awt.*;\nimport java.awt.BufferCapabilities;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GraphicsConfiguration;\nimport java.awt.ImageCapabilities;\nimport java.awt.Rectangle;\nimport java.awt.RenderingHints;\nimport java.awt.Transparency;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.image.*;\nimport java.util.Random;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.RepaintManager;\nimport javax.swing.SwingUtilities;\nimport javax.swing.Timer;\n\npublic class MRE1 {\n\n    private static final int OVAL_SIZE = 4;\n    private static final int NUM_STARS = 150;\n    private static final boolean useImages = true;\n\n    private static VolatileImage volatileImage;\n    private static BufferedImage bufferedImage;\n\n    public static void main(String[] args) {\n        System.setProperty(&quot;sun.java2d.opengl&quot;, &quot;true&quot;);\n        System.setProperty(&quot;sun.java2d.accthreshold&quot;, &quot;0&quot;);\n        JFrame frame = new JFrame();\n        frame.setSize(new Dimension(1000, 800));\n        frame.setIgnoreRepaint(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        createVolatileImage(frame);\n\n        Timer st = new Timer(250, new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                long startTime;\n                startTime = System.nanoTime();\n                JComponent contentPanel = ((JComponent) frame.getContentPane());\n                contentPanel.paintImmediately(contentPanel.getBounds());\n                long elapsed = System.nanoTime() - startTime;\n                System.out.println(&quot;Rendering time: &quot; + elapsed / 1000000.0 + &quot;ms.&quot;);\n            }\n\n        });\n\n        frame.setContentPane(createContentPane());\n\n        setWindowVisible(frame, true);\n        st.start();\n    }\n\n    private static void createVolatileImage(JFrame frame) {\n        GraphicsConfiguration gc = frame.getGraphicsConfiguration();\n        volatileImage = gc.createCompatibleVolatileImage(4, 4, Transparency.BITMASK);\n        Graphics2D g2 = volatileImage.createGraphics();\n        g2.setColor(Color.WHITE);\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\n        g2.dispose();\n\n        bufferedImage = new BufferedImage(OVAL_SIZE, OVAL_SIZE, BufferedImage.TYPE_INT_ARGB);\n        Graphics2D g2d = bufferedImage.createGraphics();\n        g2d.setColor( Color.WHITE );\n        g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2d.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\n        g2d.dispose();\n    }\n\n    private static JPanel createContentPane() {\n        JPanel contentPane = new JPanel() {\n            private static final long serialVersionUID = 2500224655024127049L;\n\n            @Override\n            public void paintComponent(Graphics g) {\n                Graphics2D g2 = (Graphics2D)g;\n                g2.setColor(Color.BLACK);\n                g2.fillRect(0, 0, getWidth(), getHeight());\n\n                Random rand = new Random();\n\n                for(int i = 0; i &lt; NUM_STARS; i++) {\n                    double x = rand.nextDouble() * getWidth();\n                    double y = rand.nextDouble() * getHeight();\n                    g2.translate(x, y);\n                    if(useImages) {\n//                        g2.drawImage(volatileImage, 0, 0, null);\n                        g2.drawImage(bufferedImage, 0, 0, null);\n                    } else {\n                        g2.setColor(Color.WHITE);\n                        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n                        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\n                    }\n                    g2.translate(-x, -y);\n                }\n            }\n        };\n        contentPane.setBackground( Color.BLACK );\n        return contentPane;\n    }\n\n    private static void setWindowVisible(JFrame frame, final boolean visible) {\n        SwingUtilities.invokeLater(() -&gt; {\n            frame.setVisible(visible);\n            try {\n                final BufferCapabilities caps = new BufferCapabilities(new ImageCapabilities(true),\n                    new ImageCapabilities(true), BufferCapabilities.FlipContents.UNDEFINED);\n                frame.createBufferStrategy(2, caps);\n            } catch (final AWTException e) {\n                frame.createBufferStrategy(2);\n                System.err.println(&quot;Could not set double buffered FLIP strategy, using default double buffer: &quot;\n                    + e.getLocalizedMessage());\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>Also got rid of the RepaintManager since I see no need for it.</p>\n<blockquote>\n<p>I've used is to use device compatible VolatileImages, using 1 of 3 variants to avoid scaling with BITMASK transparency</p>\n</blockquote>\n<p>If that means you don't want the image to scale from 4 to 6 pixels when a scaling factor of 150 is used then maybe you can use the <code>NoScalingIcon</code>. Check out: <a href=\"https://stackoverflow.com/a/65742492/131872\">https://stackoverflow.com/a/65742492/131872</a></p>\n<p>You should be able to create the Icon using your image and then paint the Icon to the BufferedImage and the image will still be 4 pixels.</p>\n"}],"owner":{"account_id":20286035,"reputation":3,"user_id":21618530,"display_name":"working_man"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75990442,"answer_count":1,"score":0,"last_activity_date":1681251159,"creation_date":1681233469,"question_id":75988537,"body_markdown":"I&#39;m trying to make a game, and in the game is a background that has many small stars that slowly travel from right to left.  With a full screen I may have 170 stars being drawn each frame.  The majority of the CPU time rendering each frame is in the drawing of the stars.  Is there&#39;s a way to use resources more effectively?\r\n\r\nI have taken into consideration the points in this answer:  https://stackoverflow.com/a/200493/21618530\r\n\r\nAn approach I&#39;ve used is to use device compatible VolatileImages, using 1 of 3 variants to avoid scaling with BITMASK transparency.  It takes on average 22ms to render each frame this way.\r\n\r\n[jvisualvm profiler output for drawImage](https://i.stack.imgur.com/3bxFa.png)\r\n\r\nUsing `fillOval()` for stars instead of drawing images reduces runtime to about 20ms each frame, with this profiler output:\r\n\r\n[jvisualvm profiler output for fillOval](https://i.stack.imgur.com/hxpJl.png)\r\n\r\nThis is on a laptop with an Intel UHD 620 with a 3840x2160 monitor.  I intend for this game to be simple and playable on a wide range of graphics, so it would be good if it could run well on a device like this.\r\n\r\n---\r\nI&#39;m open to other strategies to have the same outcome, but my goal here is to better understand swing 2d performance so I might improve the game overall.\r\n\r\nMRE showing about how I&#39;ve done this, on my machine the volatile image usage is slower on average that drawing the oval each time.\r\n```\r\npackage space;\r\n\r\nimport java.awt.AWTException;\r\nimport java.awt.BufferCapabilities;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport java.awt.Graphics2D;\r\nimport java.awt.GraphicsConfiguration;\r\nimport java.awt.ImageCapabilities;\r\nimport java.awt.Rectangle;\r\nimport java.awt.RenderingHints;\r\nimport java.awt.Transparency;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.awt.image.VolatileImage;\r\nimport java.util.Random;\r\n\r\nimport javax.swing.JComponent;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.RepaintManager;\r\nimport javax.swing.SwingUtilities;\r\nimport javax.swing.Timer;\r\n\r\npublic class MRE {\r\n\r\n    private static final int OVAL_SIZE = 4;\r\n    private static final int NUM_STARS = 150;\r\n    private static final boolean useImages = false;\r\n\r\n    private static VolatileImage volatileImage;\r\n\r\n    public static void main(String[] args) {\r\n        System.setProperty(&quot;sun.java2d.opengl&quot;, &quot;true&quot;);\r\n        System.setProperty(&quot;sun.java2d.accthreshold&quot;, &quot;0&quot;);\r\n        JFrame frame = new JFrame();\r\n        frame.setSize(new Dimension(1000, 800));\r\n        frame.setIgnoreRepaint(true);\r\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        RepaintManager manager = new RepaintManager() {\r\n            @Override\r\n            public synchronized void addDirtyRegion(JComponent c, int x, int y, int w, int h) {\r\n                // Ignored\r\n            }\r\n\r\n            @Override\r\n            public Rectangle getDirtyRegion(JComponent aComponent) {\r\n                return aComponent.getBounds();\r\n            }\r\n\r\n            @Override\r\n            public void markCompletelyDirty(JComponent aComponent) {\r\n                // Ignored\r\n            }\r\n\r\n            @Override\r\n            public void markCompletelyClean(JComponent aComponent) {\r\n                // Ignored\r\n            }\r\n        };\r\n        createVolatileImage(frame);\r\n        RepaintManager.setCurrentManager(manager);\r\n        Timer st = new Timer(250, new ActionListener() {\r\n\r\n            @Override\r\n            public void actionPerformed(ActionEvent e) {\r\n                long startTime;\r\n                startTime = System.nanoTime();\r\n                JComponent contentPanel = ((JComponent) frame.getContentPane());\r\n                contentPanel.paintImmediately(contentPanel.getBounds());\r\n                long elapsed = System.nanoTime() - startTime;\r\n                System.out.println(&quot;Rendering time: &quot; + elapsed / 1000000.0 + &quot;ms.&quot;);\r\n            }\r\n\r\n        });\r\n\r\n        frame.setContentPane(createContentPane());\r\n\r\n        setWindowVisible(frame, true);\r\n        st.start();\r\n    }\r\n\r\n    private static void createVolatileImage(JFrame frame) {\r\n        GraphicsConfiguration gc = frame.getGraphicsConfiguration();\r\n        volatileImage = gc.createCompatibleVolatileImage(4, 4, Transparency.BITMASK);\r\n        Graphics2D g2 = volatileImage.createGraphics();\r\n        g2.setColor(Color.WHITE);\r\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\r\n        g2.dispose();\r\n    }\r\n\r\n    private static JPanel createContentPane() {\r\n        JPanel contentPane = new JPanel() {\r\n            private static final long serialVersionUID = 2500224655024127049L;\r\n\r\n            @Override\r\n            public void paintComponent(Graphics g) {\r\n                Graphics2D g2 = (Graphics2D)g;\r\n                Random rand = new Random();\r\n                g2.setColor(Color.BLACK);\r\n                g2.fillRect(0, 0, getWidth(), getHeight());\r\n                for(int i = 0; i &lt; NUM_STARS; i++) {\r\n                    double x = rand.nextDouble() * getWidth();\r\n                    double y = rand.nextDouble() * getHeight();\r\n                    g2.translate(x, y);\r\n                    if(useImages) {\r\n                        g2.drawImage(volatileImage, 0, 0, null);\r\n                    } else {\r\n                        g2.setColor(Color.WHITE);\r\n                        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\r\n                        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\r\n                    }\r\n                    g2.translate(-x, -y);\r\n                }\r\n            }\r\n        };\r\n        return contentPane;\r\n    }\r\n\r\n    private static void setWindowVisible(JFrame frame, final boolean visible) {\r\n        SwingUtilities.invokeLater(() -&gt; {\r\n            frame.setVisible(visible);\r\n            try {\r\n                final BufferCapabilities caps = new BufferCapabilities(new ImageCapabilities(true),\r\n                    new ImageCapabilities(true), BufferCapabilities.FlipContents.UNDEFINED);\r\n                frame.createBufferStrategy(2, caps);\r\n            } catch (final AWTException e) {\r\n                frame.createBufferStrategy(2);\r\n                System.err.println(&quot;Could not set double buffered FLIP strategy, using default double buffer: &quot;\r\n                    + e.getLocalizedMessage());\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n```","title":"Java Swing 2D - Draw many small stars quickly","body":"<p>I'm trying to make a game, and in the game is a background that has many small stars that slowly travel from right to left.  With a full screen I may have 170 stars being drawn each frame.  The majority of the CPU time rendering each frame is in the drawing of the stars.  Is there's a way to use resources more effectively?</p>\n<p>I have taken into consideration the points in this answer:  <a href=\"https://stackoverflow.com/a/200493/21618530\">https://stackoverflow.com/a/200493/21618530</a></p>\n<p>An approach I've used is to use device compatible VolatileImages, using 1 of 3 variants to avoid scaling with BITMASK transparency.  It takes on average 22ms to render each frame this way.</p>\n<p><a href=\"https://i.stack.imgur.com/3bxFa.png\" rel=\"nofollow noreferrer\">jvisualvm profiler output for drawImage</a></p>\n<p>Using <code>fillOval()</code> for stars instead of drawing images reduces runtime to about 20ms each frame, with this profiler output:</p>\n<p><a href=\"https://i.stack.imgur.com/hxpJl.png\" rel=\"nofollow noreferrer\">jvisualvm profiler output for fillOval</a></p>\n<p>This is on a laptop with an Intel UHD 620 with a 3840x2160 monitor.  I intend for this game to be simple and playable on a wide range of graphics, so it would be good if it could run well on a device like this.</p>\n<hr />\n<p>I'm open to other strategies to have the same outcome, but my goal here is to better understand swing 2d performance so I might improve the game overall.</p>\n<p>MRE showing about how I've done this, on my machine the volatile image usage is slower on average that drawing the oval each time.</p>\n<pre><code>package space;\n\nimport java.awt.AWTException;\nimport java.awt.BufferCapabilities;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport java.awt.Graphics2D;\nimport java.awt.GraphicsConfiguration;\nimport java.awt.ImageCapabilities;\nimport java.awt.Rectangle;\nimport java.awt.RenderingHints;\nimport java.awt.Transparency;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.awt.image.VolatileImage;\nimport java.util.Random;\n\nimport javax.swing.JComponent;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\nimport javax.swing.RepaintManager;\nimport javax.swing.SwingUtilities;\nimport javax.swing.Timer;\n\npublic class MRE {\n\n    private static final int OVAL_SIZE = 4;\n    private static final int NUM_STARS = 150;\n    private static final boolean useImages = false;\n\n    private static VolatileImage volatileImage;\n\n    public static void main(String[] args) {\n        System.setProperty(&quot;sun.java2d.opengl&quot;, &quot;true&quot;);\n        System.setProperty(&quot;sun.java2d.accthreshold&quot;, &quot;0&quot;);\n        JFrame frame = new JFrame();\n        frame.setSize(new Dimension(1000, 800));\n        frame.setIgnoreRepaint(true);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        RepaintManager manager = new RepaintManager() {\n            @Override\n            public synchronized void addDirtyRegion(JComponent c, int x, int y, int w, int h) {\n                // Ignored\n            }\n\n            @Override\n            public Rectangle getDirtyRegion(JComponent aComponent) {\n                return aComponent.getBounds();\n            }\n\n            @Override\n            public void markCompletelyDirty(JComponent aComponent) {\n                // Ignored\n            }\n\n            @Override\n            public void markCompletelyClean(JComponent aComponent) {\n                // Ignored\n            }\n        };\n        createVolatileImage(frame);\n        RepaintManager.setCurrentManager(manager);\n        Timer st = new Timer(250, new ActionListener() {\n\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                long startTime;\n                startTime = System.nanoTime();\n                JComponent contentPanel = ((JComponent) frame.getContentPane());\n                contentPanel.paintImmediately(contentPanel.getBounds());\n                long elapsed = System.nanoTime() - startTime;\n                System.out.println(&quot;Rendering time: &quot; + elapsed / 1000000.0 + &quot;ms.&quot;);\n            }\n\n        });\n\n        frame.setContentPane(createContentPane());\n\n        setWindowVisible(frame, true);\n        st.start();\n    }\n\n    private static void createVolatileImage(JFrame frame) {\n        GraphicsConfiguration gc = frame.getGraphicsConfiguration();\n        volatileImage = gc.createCompatibleVolatileImage(4, 4, Transparency.BITMASK);\n        Graphics2D g2 = volatileImage.createGraphics();\n        g2.setColor(Color.WHITE);\n        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\n        g2.dispose();\n    }\n\n    private static JPanel createContentPane() {\n        JPanel contentPane = new JPanel() {\n            private static final long serialVersionUID = 2500224655024127049L;\n\n            @Override\n            public void paintComponent(Graphics g) {\n                Graphics2D g2 = (Graphics2D)g;\n                Random rand = new Random();\n                g2.setColor(Color.BLACK);\n                g2.fillRect(0, 0, getWidth(), getHeight());\n                for(int i = 0; i &lt; NUM_STARS; i++) {\n                    double x = rand.nextDouble() * getWidth();\n                    double y = rand.nextDouble() * getHeight();\n                    g2.translate(x, y);\n                    if(useImages) {\n                        g2.drawImage(volatileImage, 0, 0, null);\n                    } else {\n                        g2.setColor(Color.WHITE);\n                        g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);\n                        g2.fillOval(0, 0, OVAL_SIZE, OVAL_SIZE);\n                    }\n                    g2.translate(-x, -y);\n                }\n            }\n        };\n        return contentPane;\n    }\n\n    private static void setWindowVisible(JFrame frame, final boolean visible) {\n        SwingUtilities.invokeLater(() -&gt; {\n            frame.setVisible(visible);\n            try {\n                final BufferCapabilities caps = new BufferCapabilities(new ImageCapabilities(true),\n                    new ImageCapabilities(true), BufferCapabilities.FlipContents.UNDEFINED);\n                frame.createBufferStrategy(2, caps);\n            } catch (final AWTException e) {\n                frame.createBufferStrategy(2);\n                System.err.println(&quot;Could not set double buffered FLIP strategy, using default double buffer: &quot;\n                    + e.getLocalizedMessage());\n            }\n        });\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","yaml","spring-vault"],"owner":{"account_id":24176743,"reputation":21,"user_id":19723505,"display_name":"Shuyang Ji"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1681251081,"creation_date":1681243677,"question_id":75989771,"body_markdown":"Spring cloud vault keeps trying to renew token but I want to forbid it from doing so. When I was using spring 2.3.x I could just set `spring.cloud.vault.config.lifecycle.enabled=false` but it does not seem to work in 2.4.x, how can I solve this problem?\r\n\r\nI have tried to custom `VaultConfig` and set token-supplier to `path.to.vaultconfig`.","title":"spring.cloud.vault.config.lifecycle.enabled not working","body":"<p>Spring cloud vault keeps trying to renew token but I want to forbid it from doing so. When I was using spring 2.3.x I could just set <code>spring.cloud.vault.config.lifecycle.enabled=false</code> but it does not seem to work in 2.4.x, how can I solve this problem?</p>\n<p>I have tried to custom <code>VaultConfig</code> and set token-supplier to <code>path.to.vaultconfig</code>.</p>\n"},{"tags":["java","hashmap","key"],"comments":[{"owner":{"account_id":55654,"reputation":90563,"user_id":166712,"accept_rate":100,"display_name":"Anthony Forloney"},"score":2,"creation_date":1477589877,"post_id":40290968,"comment_id":67840184,"body_markdown":"Why would the HashMap contain multiple entries for the same key?","body":"Why would the HashMap contain multiple entries for the same key?"},{"owner":{"account_id":15988,"reputation":872868,"user_id":34397,"accept_rate":87,"display_name":"SLaks"},"score":3,"creation_date":1477589919,"post_id":40290968,"comment_id":67840210,"body_markdown":"You can&#39;t have different elements with the same keys, period.","body":"You can&#39;t have different elements with the same keys, period."},{"owner":{"account_id":7777024,"reputation":2482,"user_id":5884788,"display_name":"bradimus"},"score":2,"creation_date":1477589977,"post_id":40290968,"comment_id":67840238,"body_markdown":"Are you certain you understood the task correctly? Maybe you were to count the number of keys with the same values?","body":"Are you certain you understood the task correctly? Maybe you were to count the number of keys with the same values?"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":1,"creation_date":1477590074,"post_id":40290968,"comment_id":67840277,"body_markdown":"[`HashMap`](https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html) implements [`Map`](https://docs.oracle.com/javase/8/docs/api/java/util/Map.html). Javadoc of `Map` says: ***A map cannot contain duplicate keys.*** What you&#39;re asking for is meaningless!","body":"<a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> implements <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a>. Javadoc of <code>Map</code> says: <b><i>A map cannot contain duplicate keys.</i></b> What you&#39;re asking for is meaningless!"},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1477590076,"post_id":40290968,"comment_id":67840279,"body_markdown":"Maps always should have unique keys. If you add two elements with the same key in Java, the old element would be overwritten by the new one.","body":"Maps always should have unique keys. If you add two elements with the same key in Java, the old element would be overwritten by the new one."},{"owner":{"account_id":4301027,"reputation":3755,"user_id":3514736,"accept_rate":42,"display_name":"Rahman"},"score":1,"creation_date":1477590208,"post_id":40290968,"comment_id":67840333,"body_markdown":"Please post your code","body":"Please post your code"}],"answers":[{"tags":[],"owner":{"account_id":8742839,"reputation":158,"user_id":6539332,"display_name":"Francois Mottard"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1477590107,"creation_date":1477590107,"answer_id":40291032,"question_id":40290968,"body_markdown":"This sounds like a tricky question.  The key in HashMap must be unique.  If you want to store multiple elements on the same key, you can save a collection like: \r\n\r\n    Map&lt;Integer, List&lt;Object&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\nThen, the following method would return a List.\r\n\r\n    map.get(0) \r\n\r\n","title":"Can I get all the values of HashMap elements, having the same keys? (Java)","body":"<p>This sounds like a tricky question.  The key in HashMap must be unique.  If you want to store multiple elements on the same key, you can save a collection like: </p>\n\n<pre><code>Map&lt;Integer, List&lt;Object&gt;&gt; map = new HashMap&lt;&gt;();\n</code></pre>\n\n<p>Then, the following method would return a List.</p>\n\n<pre><code>map.get(0) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4384241,"reputation":375,"user_id":3574952,"display_name":"Justin L"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1477590189,"creation_date":1477590189,"answer_id":40291057,"question_id":40290968,"body_markdown":"This sounds like a trick question.  Each key in a HashMap can only have one value associated with it.  Each key in a [HashMap][1] must be unique.\r\n\r\nWhen adding a duplicate key the old value is replaced (see [HashMap.put][2])\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html#put-K-V-","title":"Can I get all the values of HashMap elements, having the same keys? (Java)","body":"<p>This sounds like a trick question.  Each key in a HashMap can only have one value associated with it.  Each key in a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html\" rel=\"nofollow\">HashMap</a> must be unique.</p>\n\n<p>When adding a duplicate key the old value is replaced (see <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/HashMap.html#put-K-V-\" rel=\"nofollow\">HashMap.put</a>)</p>\n"},{"tags":[],"owner":{"account_id":14593612,"reputation":33,"user_id":10540038,"display_name":"Hafeez Ul Haq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681251066,"creation_date":1681251066,"answer_id":75990471,"question_id":40290968,"body_markdown":"I know I am late, but If someone still have this problem who want to save values to a HashMap using duplicate key you can use \r\n\r\n    MultiMap&lt;&gt;;\r\n\r\nhere are the steps:\r\nadd\r\n\r\n    implementation &#39;com.google.guava:guava:30.1-jre&#39;\r\n\r\nthen replace your `HashMap&lt;&gt;` with `MultiMap&lt;&gt;`\r\n\r\nyou will be able to save duplicate keys!","title":"Can I get all the values of HashMap elements, having the same keys? (Java)","body":"<p>I know I am late, but If someone still have this problem who want to save values to a HashMap using duplicate key you can use</p>\n<pre><code>MultiMap&lt;&gt;;\n</code></pre>\n<p>here are the steps:\nadd</p>\n<pre><code>implementation 'com.google.guava:guava:30.1-jre'\n</code></pre>\n<p>then replace your <code>HashMap&lt;&gt;</code> with <code>MultiMap&lt;&gt;</code></p>\n<p>you will be able to save duplicate keys!</p>\n"}],"owner":{"account_id":9488614,"reputation":11,"user_id":7054236,"display_name":"Romanoff"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2765,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":3,"score":-2,"last_activity_date":1681251066,"creation_date":1477589834,"question_id":40290968,"body_markdown":"I have a task given me on the Java programming course. According to this task I have to create a method that returns a number of the HashMap elements with identical keys. But the problem is that the iterator goes through elements with different keys only, so anyway, the method returns 1. What`s the way out?\r\n\r\n\r\n    package com.javarush.test.level08.lesson08.task03;\r\n\r\n    import java.util.*;\r\n\r\n    /* Одинаковые имя и фамилия\r\n    Создать словарь (Map&lt;String, String&gt;) занести в него десять записей по   принципу &#171;Фамилия&#187; - &#171;Имя&#187;.\r\n    Проверить сколько людей имеют совпадающие с заданным имя или фамилию.\r\n    */\r\n\r\n    public class Solution\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            HashMap&lt;String, String&gt; friends = createMap();\r\n            getCountTheSameLastName(friends, &quot;гладких&quot;);\r\n            getCountTheSameFirstName(friends, &quot;Виталий&quot;);\r\n        }\r\n\r\n        public static HashMap&lt;String, String&gt; createMap()\r\n        {\r\n            HashMap&lt;String, String&gt; name = new HashMap&lt;String, String&gt;();\r\n\r\n            name.put(&quot;гладких&quot;, &quot;Иван&quot;);\r\n            name.put(&quot;пересыпкин&quot;, &quot;Артем&quot;);\r\n            name.put(&quot;пересыпкин&quot;, &quot;Владислав&quot;);\r\n            name.put(&quot;халитов&quot;, &quot;Виталий&quot;);\r\n            name.put(&quot;чернышев&quot;, &quot;Виталий&quot;);\r\n            name.put(&quot;ивинских&quot;, &quot;Виталий&quot;);\r\n            name.put(&quot;ивинских&quot;, &quot;Альфред&quot;);\r\n            name.put(&quot;осипова&quot;, &quot;Мария&quot;);\r\n            name.put(&quot;ивинских&quot;, &quot;Павел&quot;);\r\n            name.put(&quot;гейтс&quot;, &quot;Билл&quot;);\r\n\r\n            return name;\r\n        }\r\n\r\n        public static int getCountTheSameFirstName(HashMap&lt;String, String&gt;         map, String name)\r\n        {\r\n            int MatchesFirstnameCount = 0;\r\n\r\n            for (HashMap.Entry&lt;String, String&gt; pair : map.entrySet()) {\r\n                String s = pair.getValue();\r\n                if (s.equals(name) ) {\r\n                    MatchesFirstnameCount++;\r\n                }\r\n            }\r\n        \r\n            return MatchesFirstnameCount;\r\n        }\r\n    \r\n        public static int getCountTheSameLastName(HashMap&lt;String, String&gt;     map, String lastName)\r\n        {\r\n            int MatchesSecondnameCount = 0;\r\n\r\n            for (HashMap.Entry&lt;String, String&gt; pair : map.entrySet()) {\r\n                if (pair.getKey().equals(lastName))\r\n                    MatchesSecondnameCount++;\r\n            }\r\n            return MatchesSecondnameCount;\r\n        }\r\n    }","title":"Can I get all the values of HashMap elements, having the same keys? (Java)","body":"<p>I have a task given me on the Java programming course. According to this task I have to create a method that returns a number of the HashMap elements with identical keys. But the problem is that the iterator goes through elements with different keys only, so anyway, the method returns 1. What`s the way out?</p>\n\n<pre><code>package com.javarush.test.level08.lesson08.task03;\n\nimport java.util.*;\n\n/* Одинаковые имя и фамилия\nСоздать словарь (Map&lt;String, String&gt;) занести в него десять записей по   принципу «Фамилия» - «Имя».\nПроверить сколько людей имеют совпадающие с заданным имя или фамилию.\n*/\n\npublic class Solution\n{\n    public static void main(String[] args)\n    {\n        HashMap&lt;String, String&gt; friends = createMap();\n        getCountTheSameLastName(friends, \"гладких\");\n        getCountTheSameFirstName(friends, \"Виталий\");\n    }\n\n    public static HashMap&lt;String, String&gt; createMap()\n    {\n        HashMap&lt;String, String&gt; name = new HashMap&lt;String, String&gt;();\n\n        name.put(\"гладких\", \"Иван\");\n        name.put(\"пересыпкин\", \"Артем\");\n        name.put(\"пересыпкин\", \"Владислав\");\n        name.put(\"халитов\", \"Виталий\");\n        name.put(\"чернышев\", \"Виталий\");\n        name.put(\"ивинских\", \"Виталий\");\n        name.put(\"ивинских\", \"Альфред\");\n        name.put(\"осипова\", \"Мария\");\n        name.put(\"ивинских\", \"Павел\");\n        name.put(\"гейтс\", \"Билл\");\n\n        return name;\n    }\n\n    public static int getCountTheSameFirstName(HashMap&lt;String, String&gt;         map, String name)\n    {\n        int MatchesFirstnameCount = 0;\n\n        for (HashMap.Entry&lt;String, String&gt; pair : map.entrySet()) {\n            String s = pair.getValue();\n            if (s.equals(name) ) {\n                MatchesFirstnameCount++;\n            }\n        }\n\n        return MatchesFirstnameCount;\n    }\n\n    public static int getCountTheSameLastName(HashMap&lt;String, String&gt;     map, String lastName)\n    {\n        int MatchesSecondnameCount = 0;\n\n        for (HashMap.Entry&lt;String, String&gt; pair : map.entrySet()) {\n            if (pair.getKey().equals(lastName))\n                MatchesSecondnameCount++;\n        }\n        return MatchesSecondnameCount;\n    }\n}\n</code></pre>\n"},{"tags":["java","graphics","libgdx"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1681250219,"post_id":75990369,"comment_id":134025765,"body_markdown":"At a quick guess, it you might need to `translate` the anchor point of the `Polygon` to be it&#39;s center, the problem is, this would also effect the position values - I don&#39;t have any experience with libgdx, so I was just looking through the source code","body":"At a quick guess, it you might need to <code>translate</code> the anchor point of the <code>Polygon</code> to be it&#39;s center, the problem is, this would also effect the position values - I don&#39;t have any experience with libgdx, so I was just looking through the source code"}],"answers":[{"tags":[],"owner":{"account_id":1307115,"reputation":22745,"user_id":1255873,"accept_rate":86,"display_name":"Abion47"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681250140,"creation_date":1681250140,"answer_id":75990410,"question_id":75990369,"body_markdown":"I&#39;ve never used LibGDX before, but the [documentation](https://javadoc.io/static/com.badlogicgames.gdx/gdx/1.11.0/com/badlogic/gdx/math/Polygon.html) seems to suggest that the origin of the polygon might be intended to be used as the origin of the vertices, not the origin of transformations. If so, you should specify the vertices of the polygons as though they were all offset by the center point of the polygon:\r\n\r\n\r\n```java\r\nfloat wd2 = width / 2.0f;\r\nfloat hd2 = height / 2.0f;\r\npolygon = new Polygon(game, Color.WHITE_COLOR, new float[] {\r\n    -wd2, -hd2,\r\n    wd2, -hd2,\r\n    wd2, hd2,\r\n    -wd2, hd2\r\n}, 0);\r\npolygon.setOrigin(0.0f, 0.0f); // I doubt this is necessary, but just in case\r\n```","title":"polygon should be centered on mouse x,y","body":"<p>I've never used LibGDX before, but the <a href=\"https://javadoc.io/static/com.badlogicgames.gdx/gdx/1.11.0/com/badlogic/gdx/math/Polygon.html\" rel=\"nofollow noreferrer\">documentation</a> seems to suggest that the origin of the polygon might be intended to be used as the origin of the vertices, not the origin of transformations. If so, you should specify the vertices of the polygons as though they were all offset by the center point of the polygon:</p>\n<pre class=\"lang-java prettyprint-override\"><code>float wd2 = width / 2.0f;\nfloat hd2 = height / 2.0f;\npolygon = new Polygon(game, Color.WHITE_COLOR, new float[] {\n    -wd2, -hd2,\n    wd2, -hd2,\n    wd2, hd2,\n    -wd2, hd2\n}, 0);\npolygon.setOrigin(0.0f, 0.0f); // I doubt this is necessary, but just in case\n</code></pre>\n"}],"owner":{"account_id":3227370,"reputation":988,"user_id":2723401,"accept_rate":95,"display_name":"Kapparino"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75990410,"answer_count":1,"score":0,"last_activity_date":1681250140,"creation_date":1681249613,"question_id":75990369,"body_markdown":"I wrote polygon and circle test in which via cursor, I rotate around polygon 360, against center point x=0, y=0.\r\n\r\nHowever, I have an issue, to center polygon at mouse x,y instead of at edge. Like it is now in screenshot, red circle represents current mouse position and green is my goal.\r\n\r\nI tried to use setOrigin but that did not work well for me or I am not setting it right. \r\np.s. ignore white circle.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    public class PolygonIntersectsCircle3Test extends AbstractTest {\r\n    \r\n        private Polygon polygon;\r\n        private Circle circle;\r\n        private boolean collides;\r\n    \r\n        public PolygonIntersectsCircle3Test(Game game) {\r\n            super(game);\r\n        }\r\n    \r\n        @Override\r\n        public void create() {\r\n            float width = 300f;\r\n            float height = 50f;\r\n            polygon = new Polygon(game, Color.WHITE_COLOR, new float[] {\r\n                0, 0,\r\n                width, 0,\r\n                width, height,\r\n                0, height\r\n            }, 0);\r\n            //polygon.setOrigin(width / 2, height / 2);\r\n            circle = new Circle(game, Color.WHITE_COLOR, 100, 100, height / 2);\r\n        }\r\n    \r\n        @Override\r\n        public void update(float deltaTime) {\r\n            Vector2 mouseRelativeToScreen = game.getInputController().getMouseRelativeToWorld();\r\n            polygon.setPosition(mouseRelativeToScreen.x, mouseRelativeToScreen.y);\r\n            float degrees = degrees(mouseRelativeToScreen.x, mouseRelativeToScreen.y, 0, 0);\r\n            polygon.setRotation(degrees);\r\n            collides = polygon.contains(circle.x, circle.y);\r\n        }\r\n    \r\n        @Override\r\n        public void draw() {\r\n            game.getShapeRenderer().begin(ShapeRenderer.ShapeType.Line);\r\n            if (collides) {\r\n                game.getShapeRenderer().setColor(Color.RED);\r\n            } else {\r\n                game.getShapeRenderer().setColor(Color.WHITE_COLOR);\r\n            }\r\n            game.getShapeRenderer().polygon(polygon.getTransformedVertices());\r\n            game.getShapeRenderer().circle(circle.x, circle.y, circle.radius);\r\n            game.getShapeRenderer().end();\r\n        }\r\n    }\r\n\r\n      public static strictfp float degrees(float x, float y) {\r\n            float degrees = (float) StrictMath.toDegrees(StrictMath.atan2(y, x));\r\n            if (degrees &lt; -360.0f || degrees &gt; 360.0f) {\r\n                degrees %= 360.0f;\r\n            }\r\n            if (degrees &lt; 0.0f) {\r\n                degrees += 360.0f;\r\n            }\r\n            return degrees;\r\n        }\r\n\r\n    public static strictfp float degrees(float x, float y, float circleCenterX, float circleCenterY) {\r\n        return angleInDegrees(x - circleCenterX, y - circleCenterY);\r\n    }\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SvUAc.png","title":"polygon should be centered on mouse x,y","body":"<p>I wrote polygon and circle test in which via cursor, I rotate around polygon 360, against center point x=0, y=0.</p>\n<p>However, I have an issue, to center polygon at mouse x,y instead of at edge. Like it is now in screenshot, red circle represents current mouse position and green is my goal.</p>\n<p>I tried to use setOrigin but that did not work well for me or I am not setting it right.\np.s. ignore white circle.</p>\n<p><a href=\"https://i.stack.imgur.com/SvUAc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SvUAc.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public class PolygonIntersectsCircle3Test extends AbstractTest {\n\n    private Polygon polygon;\n    private Circle circle;\n    private boolean collides;\n\n    public PolygonIntersectsCircle3Test(Game game) {\n        super(game);\n    }\n\n    @Override\n    public void create() {\n        float width = 300f;\n        float height = 50f;\n        polygon = new Polygon(game, Color.WHITE_COLOR, new float[] {\n            0, 0,\n            width, 0,\n            width, height,\n            0, height\n        }, 0);\n        //polygon.setOrigin(width / 2, height / 2);\n        circle = new Circle(game, Color.WHITE_COLOR, 100, 100, height / 2);\n    }\n\n    @Override\n    public void update(float deltaTime) {\n        Vector2 mouseRelativeToScreen = game.getInputController().getMouseRelativeToWorld();\n        polygon.setPosition(mouseRelativeToScreen.x, mouseRelativeToScreen.y);\n        float degrees = degrees(mouseRelativeToScreen.x, mouseRelativeToScreen.y, 0, 0);\n        polygon.setRotation(degrees);\n        collides = polygon.contains(circle.x, circle.y);\n    }\n\n    @Override\n    public void draw() {\n        game.getShapeRenderer().begin(ShapeRenderer.ShapeType.Line);\n        if (collides) {\n            game.getShapeRenderer().setColor(Color.RED);\n        } else {\n            game.getShapeRenderer().setColor(Color.WHITE_COLOR);\n        }\n        game.getShapeRenderer().polygon(polygon.getTransformedVertices());\n        game.getShapeRenderer().circle(circle.x, circle.y, circle.radius);\n        game.getShapeRenderer().end();\n    }\n}\n\n  public static strictfp float degrees(float x, float y) {\n        float degrees = (float) StrictMath.toDegrees(StrictMath.atan2(y, x));\n        if (degrees &lt; -360.0f || degrees &gt; 360.0f) {\n            degrees %= 360.0f;\n        }\n        if (degrees &lt; 0.0f) {\n            degrees += 360.0f;\n        }\n        return degrees;\n    }\n\npublic static strictfp float degrees(float x, float y, float circleCenterX, float circleCenterY) {\n    return angleInDegrees(x - circleCenterX, y - circleCenterY);\n}\n</code></pre>\n"},{"tags":["java","gstreamer","java-gstreamer"],"answers":[{"tags":[],"owner":{"account_id":27604979,"reputation":54,"user_id":21069312,"display_name":"Reza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681248736,"creation_date":1681248736,"answer_id":75990290,"question_id":75989995,"body_markdown":"I am not an expert on this but i think The `Gst.init()`, `Gst.main()`, and `Gst.quit()` methods in your code are static because they are part of the GStreamer Java bindings library, which is a Java wrapper around the GStreamer multimedia framework. These methods initialize and run the GStreamer pipeline, and are designed to be used in a static context, meaning they are independent of any specific instance of a pipeline.\r\n\r\nI believe, when you run the code, each customer will have their own instance of a pipeline running, but they will all share the same GStreamer runtime environment. The Gst.init() method initializes the GStreamer runtime environment, and the Gst.quit() method shuts it down. The Gst.main() method starts the GStreamer main loop, which processes events such as EOS (end-of-stream) messages.\r\n\r\nTo avoid conflicts between the EOS callbacks of multiple pipelines running concurrently, you can use the source parameter of the connect() method to distinguish between the EOS messages of different pipelines. For example, you can assign a unique identifier to each pipeline, and use that identifier in the EOS callback to determine which pipeline has reached the end of the stream.\r\n\r\nSomething similar to this:\r\n\r\n    String pipelineName = &quot;myPipeline-&quot; + UUID.randomUUID().toString();\r\n    Gst.init(Version.BASELINE, pipelineName);\r\n    \r\n    Pipeline pipeline = (Pipeline) Gst.parseLaunch(&quot;videotestsrc ! autovideosink&quot;);\r\n    pipeline.play();\r\n    \r\n    // Use a lambda expression to handle the EOS message for this pipeline\r\n    pipeline.getBus().connect((Bus.EOS) (source) -&gt; {\r\n        String pipelineName = source.getName();\r\n        System.out.println(&quot;Pipeline &quot; + pipelineName + &quot; reached end of stream&quot;);\r\n    });\r\n    \r\n    Gst.main();\r\n\r\n    Gst.quit();\r\n\r\nI hope this helps! ","title":"Whats the best practice for running concurrent GStreamer pipeline within a Java Service?","body":"<p>I am not an expert on this but i think The <code>Gst.init()</code>, <code>Gst.main()</code>, and <code>Gst.quit()</code> methods in your code are static because they are part of the GStreamer Java bindings library, which is a Java wrapper around the GStreamer multimedia framework. These methods initialize and run the GStreamer pipeline, and are designed to be used in a static context, meaning they are independent of any specific instance of a pipeline.</p>\n<p>I believe, when you run the code, each customer will have their own instance of a pipeline running, but they will all share the same GStreamer runtime environment. The Gst.init() method initializes the GStreamer runtime environment, and the Gst.quit() method shuts it down. The Gst.main() method starts the GStreamer main loop, which processes events such as EOS (end-of-stream) messages.</p>\n<p>To avoid conflicts between the EOS callbacks of multiple pipelines running concurrently, you can use the source parameter of the connect() method to distinguish between the EOS messages of different pipelines. For example, you can assign a unique identifier to each pipeline, and use that identifier in the EOS callback to determine which pipeline has reached the end of the stream.</p>\n<p>Something similar to this:</p>\n<pre><code>String pipelineName = &quot;myPipeline-&quot; + UUID.randomUUID().toString();\nGst.init(Version.BASELINE, pipelineName);\n\nPipeline pipeline = (Pipeline) Gst.parseLaunch(&quot;videotestsrc ! autovideosink&quot;);\npipeline.play();\n\n// Use a lambda expression to handle the EOS message for this pipeline\npipeline.getBus().connect((Bus.EOS) (source) -&gt; {\n    String pipelineName = source.getName();\n    System.out.println(&quot;Pipeline &quot; + pipelineName + &quot; reached end of stream&quot;);\n});\n\nGst.main();\n\nGst.quit();\n</code></pre>\n<p>I hope this helps!</p>\n"}],"owner":{"account_id":26016628,"reputation":33,"user_id":19724863,"display_name":"Xiangyang Shi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681248736,"creation_date":1681245827,"question_id":75989995,"body_markdown":"I&#39;m writting a Java service leverage [Gstreamer Java Bindings](https://javadoc.io/static/org.freedesktop.gstreamer/gst1-java-core/1.0.0/org/freedesktop/gstreamer/elements/package-summary.html) to dynamically transform input media file.\r\n\r\nSample Code like this:\r\n```\r\nGst.init(Version.BASELINE, &quot;myPipeline&quot;);\r\npipeline = (Pipeline) Gst.parseLaunch(&quot;videotestsrc ! autovideosink&quot;);\r\npipeline.play();\r\npipeline.getBus().connect((Bus.EOS) (source) -&gt; Gst.quit());\r\nGst.main();\r\n```\r\n\r\nBut I don&#39;t understand why `Gst::init`, `Gst::main` and `Gst::quite` are **static** methods here. Being **static** makes their scope to be global.\r\n\r\nSuppose I have 5 customer concurrently calling my service:\r\n\r\n 1. Will 5 Gstreamer pipeline running concurrently?\r\n 2. How can I avoid them\r\n    terminate each other by the EOS call back?\r\n\r\nDo I miss something. Appreciate for any help!\r\n","title":"Whats the best practice for running concurrent GStreamer pipeline within a Java Service?","body":"<p>I'm writting a Java service leverage <a href=\"https://javadoc.io/static/org.freedesktop.gstreamer/gst1-java-core/1.0.0/org/freedesktop/gstreamer/elements/package-summary.html\" rel=\"nofollow noreferrer\">Gstreamer Java Bindings</a> to dynamically transform input media file.</p>\n<p>Sample Code like this:</p>\n<pre><code>Gst.init(Version.BASELINE, &quot;myPipeline&quot;);\npipeline = (Pipeline) Gst.parseLaunch(&quot;videotestsrc ! autovideosink&quot;);\npipeline.play();\npipeline.getBus().connect((Bus.EOS) (source) -&gt; Gst.quit());\nGst.main();\n</code></pre>\n<p>But I don't understand why <code>Gst::init</code>, <code>Gst::main</code> and <code>Gst::quite</code> are <strong>static</strong> methods here. Being <strong>static</strong> makes their scope to be global.</p>\n<p>Suppose I have 5 customer concurrently calling my service:</p>\n<ol>\n<li>Will 5 Gstreamer pipeline running concurrently?</li>\n<li>How can I avoid them\nterminate each other by the EOS call back?</li>\n</ol>\n<p>Do I miss something. Appreciate for any help!</p>\n"},{"tags":["java","spring","null","nullpointerexception","autowired"],"comments":[{"owner":{"account_id":132233,"reputation":3702,"user_id":332788,"accept_rate":71,"display_name":"aliopi"},"score":6,"creation_date":1447245368,"post_id":19896870,"comment_id":55074706,"body_markdown":"Another scenario can be when bean `F` is called inside the constructor of another bean `S`. In this case pass the required bean `F` as a parameter to the other beans `S` constructor and annotate the constructor of `S` with `@Autowire`. Remember to annotate the class of the first bean `F` with `@Component`.","body":"Another scenario can be when bean <code>F</code> is called inside the constructor of another bean <code>S</code>. In this case pass the required bean <code>F</code> as a parameter to the other beans <code>S</code> constructor and annotate the constructor of <code>S</code> with <code>@Autowire</code>. Remember to annotate the class of the first bean <code>F</code> with <code>@Component</code>."},{"owner":{"account_id":307716,"reputation":1020,"user_id":619175,"display_name":"Ross117"},"score":2,"creation_date":1542162834,"post_id":19896870,"comment_id":93466170,"body_markdown":"I coded up a few examples very similar to this one using Gradle here: https://github.com/swimorsink/spring-aspectj-examples. Hopefully someone will find it useful.","body":"I coded up a few examples very similar to this one using Gradle here: <a href=\"https://github.com/swimorsink/spring-aspectj-examples\" rel=\"nofollow noreferrer\">github.com/swimorsink/spring-aspectj-examples</a>. Hopefully someone will find it useful."}],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":3,"up_vote_count":785,"is_accepted":true,"score":782,"last_activity_date":1456688442,"creation_date":1384128303,"answer_id":19896871,"question_id":19896870,"body_markdown":"The field annotated `@Autowired` is `null` because Spring doesn&#39;t know about the copy of `MileageFeeCalculator` that you created with `new` and didn&#39;t know to autowire it.\r\n\r\n[The Spring Inversion of Control (IoC) container](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html) has three main logical components: a registry (called the `ApplicationContext`) of components (beans) that are available to be used by the application, a configurer system that injects objects&#39; dependencies into them by matching up the dependencies with beans in the context, and a dependency solver that can look at a configuration of many different beans and determine how to instantiate and configure them in the necessary order.\r\n\r\nThe IoC container isn&#39;t magic, and it has no way of knowing about Java objects unless you somehow inform it of them. When you call `new`, the JVM instantiates a copy of the new object and hands it straight to you--it never goes through the configuration process. There are three ways that you can get your beans configured.\r\n\r\nI have posted all of this code, using Spring Boot to launch, at [this GitHub project](https://github.com/chrylis/spring_autowired_npe_example); you can look at a full running project for each approach to see everything you need to make it work. **Tag with the `NullPointerException`: [`nonworking`](https://github.com/chrylis/spring_autowired_npe_example/tree/nonworking)**\r\n\r\n## Inject your beans ##\r\n\r\nThe most preferable option is to let Spring autowire all of your beans; this requires the least amount of code and is the most maintainable. To make the autowiring work like you wanted, also autowire the `MileageFeeCalculator` like this:\r\n\r\n    @Controller\r\n    public class MileageFeeController {\r\n    \r\n\t    @Autowired\r\n\t    private MileageFeeCalculator calc;\r\n\t\r\n\t    @RequestMapping(&quot;/mileage/{miles}&quot;)\r\n\t    @ResponseBody\r\n\t    public float mileageFee(@PathVariable int miles) {\r\n\t\t    return calc.mileageCharge(miles);\r\n\t    }\r\n    }\r\n\r\nIf you need to create a new instance of your service object for different requests, you can still use injection by using [the Spring bean scopes](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes).\r\n\r\n**Tag that works by injecting the `@MileageFeeCalculator` service object: [`working-inject-bean`](https://github.com/chrylis/spring_autowired_npe_example/tree/working-inject-bean)**\r\n\r\n## Use @Configurable ##\r\n\r\nIf you really need objects created with `new` to be autowired, you can [use the Spring `@Configurable` annotation along with AspectJ compile-time weaving](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable) to inject your objects. This approach inserts code into your object&#39;s constructor that alerts Spring that it&#39;s being created so that Spring can configure the new instance. This requires a bit of configuration in your build (such as compiling with `ajc`) and turning on Spring&#39;s runtime configuration handlers (`@EnableSpringConfigured` with the JavaConfig syntax). This approach is used by the Roo Active Record system to allow `new` instances of your entities to get the necessary persistence information injected.\r\n\r\n    @Service\r\n    @Configurable\r\n    public class MileageFeeCalculator {\r\n    \r\n\t    @Autowired\r\n\t    private MileageRateService rateService;\r\n\r\n\t    public float mileageCharge(final int miles) {\r\n\t\t    return (miles * rateService.ratePerMile());\r\n\t    }\r\n    }\r\n    \r\n**Tag that works by using `@Configurable` on the service object: [`working-configurable`](https://github.com/chrylis/spring_autowired_npe_example/tree/working-configurable)**\r\n    \r\n## Manual bean lookup: not recommended ##\r\n\r\nThis approach is suitable only for interfacing with legacy code in special situations. It is nearly always preferable to create a singleton adapter class that Spring can autowire and the legacy code can call, but it is possible to directly ask the Spring application context for a bean.\r\n\r\nTo do this, you need a class to which Spring can give a reference to the `ApplicationContext` object:\r\n\r\n    @Component\r\n    public class ApplicationContextHolder implements ApplicationContextAware {\r\n        private static ApplicationContext context;\r\n\t\r\n\t    @Override\r\n\t    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\r\n\t\t    context = applicationContext;\t\r\n\t    }\r\n\t\r\n\t    public static ApplicationContext getContext() {\r\n\t\t    return context;\r\n\t    }\r\n    }\r\n    \r\nThen your legacy code can call `getContext()` and retrieve the beans it needs:\r\n\r\n    @Controller\r\n    public class MileageFeeController {    \r\n\t    @RequestMapping(&quot;/mileage/{miles}&quot;)\r\n\t    @ResponseBody\r\n\t    public float mileageFee(@PathVariable int miles) {\r\n\t\t    MileageFeeCalculator calc = ApplicationContextHolder.getContext().getBean(MileageFeeCalculator.class);\r\n\t\t    return calc.mileageCharge(miles);\r\n\t    }\r\n    }\r\n\r\n**Tag that works by manually looking up the service object in the Spring context: [`working-manual-lookup`](https://github.com/chrylis/spring_autowired_npe_example/tree/working-manual-lookup)**","title":"Why is my Spring @Autowired field null?","body":"<p>The field annotated <code>@Autowired</code> is <code>null</code> because Spring doesn't know about the copy of <code>MileageFeeCalculator</code> that you created with <code>new</code> and didn't know to autowire it.</p>\n\n<p><a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html\">The Spring Inversion of Control (IoC) container</a> has three main logical components: a registry (called the <code>ApplicationContext</code>) of components (beans) that are available to be used by the application, a configurer system that injects objects' dependencies into them by matching up the dependencies with beans in the context, and a dependency solver that can look at a configuration of many different beans and determine how to instantiate and configure them in the necessary order.</p>\n\n<p>The IoC container isn't magic, and it has no way of knowing about Java objects unless you somehow inform it of them. When you call <code>new</code>, the JVM instantiates a copy of the new object and hands it straight to you--it never goes through the configuration process. There are three ways that you can get your beans configured.</p>\n\n<p>I have posted all of this code, using Spring Boot to launch, at <a href=\"https://github.com/chrylis/spring_autowired_npe_example\">this GitHub project</a>; you can look at a full running project for each approach to see everything you need to make it work. <strong>Tag with the <code>NullPointerException</code>: <a href=\"https://github.com/chrylis/spring_autowired_npe_example/tree/nonworking\"><code>nonworking</code></a></strong></p>\n\n<h2>Inject your beans</h2>\n\n<p>The most preferable option is to let Spring autowire all of your beans; this requires the least amount of code and is the most maintainable. To make the autowiring work like you wanted, also autowire the <code>MileageFeeCalculator</code> like this:</p>\n\n<pre><code>@Controller\npublic class MileageFeeController {\n\n    @Autowired\n    private MileageFeeCalculator calc;\n\n    @RequestMapping(\"/mileage/{miles}\")\n    @ResponseBody\n    public float mileageFee(@PathVariable int miles) {\n        return calc.mileageCharge(miles);\n    }\n}\n</code></pre>\n\n<p>If you need to create a new instance of your service object for different requests, you can still use injection by using <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes\">the Spring bean scopes</a>.</p>\n\n<p><strong>Tag that works by injecting the <code>@MileageFeeCalculator</code> service object: <a href=\"https://github.com/chrylis/spring_autowired_npe_example/tree/working-inject-bean\"><code>working-inject-bean</code></a></strong></p>\n\n<h2>Use @Configurable</h2>\n\n<p>If you really need objects created with <code>new</code> to be autowired, you can <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html#aop-atconfigurable\">use the Spring <code>@Configurable</code> annotation along with AspectJ compile-time weaving</a> to inject your objects. This approach inserts code into your object's constructor that alerts Spring that it's being created so that Spring can configure the new instance. This requires a bit of configuration in your build (such as compiling with <code>ajc</code>) and turning on Spring's runtime configuration handlers (<code>@EnableSpringConfigured</code> with the JavaConfig syntax). This approach is used by the Roo Active Record system to allow <code>new</code> instances of your entities to get the necessary persistence information injected.</p>\n\n<pre><code>@Service\n@Configurable\npublic class MileageFeeCalculator {\n\n    @Autowired\n    private MileageRateService rateService;\n\n    public float mileageCharge(final int miles) {\n        return (miles * rateService.ratePerMile());\n    }\n}\n</code></pre>\n\n<p><strong>Tag that works by using <code>@Configurable</code> on the service object: <a href=\"https://github.com/chrylis/spring_autowired_npe_example/tree/working-configurable\"><code>working-configurable</code></a></strong></p>\n\n<h2>Manual bean lookup: not recommended</h2>\n\n<p>This approach is suitable only for interfacing with legacy code in special situations. It is nearly always preferable to create a singleton adapter class that Spring can autowire and the legacy code can call, but it is possible to directly ask the Spring application context for a bean.</p>\n\n<p>To do this, you need a class to which Spring can give a reference to the <code>ApplicationContext</code> object:</p>\n\n<pre><code>@Component\npublic class ApplicationContextHolder implements ApplicationContextAware {\n    private static ApplicationContext context;\n\n    @Override\n    public void setApplicationContext(ApplicationContext applicationContext) throws BeansException {\n        context = applicationContext;   \n    }\n\n    public static ApplicationContext getContext() {\n        return context;\n    }\n}\n</code></pre>\n\n<p>Then your legacy code can call <code>getContext()</code> and retrieve the beans it needs:</p>\n\n<pre><code>@Controller\npublic class MileageFeeController {    \n    @RequestMapping(\"/mileage/{miles}\")\n    @ResponseBody\n    public float mileageFee(@PathVariable int miles) {\n        MileageFeeCalculator calc = ApplicationContextHolder.getContext().getBean(MileageFeeCalculator.class);\n        return calc.mileageCharge(miles);\n    }\n}\n</code></pre>\n\n<p><strong>Tag that works by manually looking up the service object in the Spring context: <a href=\"https://github.com/chrylis/spring_autowired_npe_example/tree/working-manual-lookup\"><code>working-manual-lookup</code></a></strong></p>\n"},{"tags":[],"owner":{"account_id":1721196,"reputation":947,"user_id":1577000,"display_name":"Shirish Coolkarni"},"down_vote_count":2,"up_vote_count":74,"is_accepted":false,"score":72,"last_activity_date":1451746865,"creation_date":1398149246,"answer_id":23212378,"question_id":19896870,"body_markdown":"If you are not coding a web application, make sure your class in which @Autowiring is done is a spring bean. Typically, spring container won&#39;t be aware of the class which we might think of as a spring bean. We have to tell the Spring container about our spring classes.\r\n\r\nThis can be achieved by configuring in appln-contxt or **the better way** is to annotate class as **@Component** and please do not create the annotated class using new operator.\r\nMake sure you get it from Appln-context as below.\r\n\r\n\t@Component\r\n\tpublic class MyDemo {\r\n\t\r\n\t\t\r\n\t\t@Autowired\r\n\t\tprivate MyService  myService; \r\n\t\t\r\n\t\t/**\r\n\t\t * @param args\r\n\t\t */\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\tSystem.out.println(&quot;test&quot;);\r\n\t\t\t\tApplicationContext ctx=new ClassPathXmlApplicationContext(&quot;spring.xml&quot;);\r\n\t\t\t\tSystem.out.println(&quot;ctx&gt;&gt;&quot;+ctx);\r\n\t\t\t\t\r\n\t\t\t\tCustomer c1=null;\r\n\t\t\t\tMyDemo myDemo=ctx.getBean(MyDemo.class);\r\n\t\t\t\tSystem.out.println(myDemo);\r\n\t\t\t\tmyDemo.callService(ctx);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t}\r\n\t\r\n\t\tpublic void callService(ApplicationContext ctx) {\r\n\t\t\t// TODO Auto-generated method stub\r\n\t\t\tSystem.out.println(&quot;---callService---&quot;);\r\n\t\t\tSystem.out.println(myService);\r\n\t\t\tmyService.callMydao();\r\n\t\t\t\r\n\t\t}\r\n\t\r\n\t}","title":"Why is my Spring @Autowired field null?","body":"<p>If you are not coding a web application, make sure your class in which @Autowiring is done is a spring bean. Typically, spring container won't be aware of the class which we might think of as a spring bean. We have to tell the Spring container about our spring classes.</p>\n\n<p>This can be achieved by configuring in appln-contxt or <strong>the better way</strong> is to annotate class as <strong>@Component</strong> and please do not create the annotated class using new operator.\nMake sure you get it from Appln-context as below.</p>\n\n<pre><code>@Component\npublic class MyDemo {\n\n\n    @Autowired\n    private MyService  myService; \n\n    /**\n     * @param args\n     */\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n            System.out.println(\"test\");\n            ApplicationContext ctx=new ClassPathXmlApplicationContext(\"spring.xml\");\n            System.out.println(\"ctx&gt;&gt;\"+ctx);\n\n            Customer c1=null;\n            MyDemo myDemo=ctx.getBean(MyDemo.class);\n            System.out.println(myDemo);\n            myDemo.callService(ctx);\n\n\n    }\n\n    public void callService(ApplicationContext ctx) {\n        // TODO Auto-generated method stub\n        System.out.println(\"---callService---\");\n        System.out.println(myService);\n        myService.callMydao();\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":339128,"reputation":11053,"user_id":668417,"accept_rate":55,"display_name":"Ondrej Bozek"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1664726306,"creation_date":1429616159,"answer_id":29771111,"question_id":19896870,"body_markdown":"Another solution would be to put a call of\r\n`SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this)`  \r\nto `MileageFeeCalculator` constructor like this:\r\n\r\n    @Service\r\n    public class MileageFeeCalculator {\r\n    \r\n        @Autowired\r\n        private MileageRateService rateService; // &lt;--- will be autowired when constructor is called\r\n    \r\n        public MileageFeeCalculator() {\r\n            SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this)\r\n        }\r\n\r\n        public float mileageCharge(final int miles) {\r\n            return (miles * rateService.ratePerMile()); \r\n        }\r\n    }\r\n","title":"Why is my Spring @Autowired field null?","body":"<p>Another solution would be to put a call of\n<code>SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this)</code><br />\nto <code>MileageFeeCalculator</code> constructor like this:</p>\n<pre><code>@Service\npublic class MileageFeeCalculator {\n\n    @Autowired\n    private MileageRateService rateService; // &lt;--- will be autowired when constructor is called\n\n    public MileageFeeCalculator() {\n        SpringBeanAutowiringSupport.processInjectionBasedOnCurrentContext(this)\n    }\n\n    public float mileageCharge(final int miles) {\n        return (miles * rateService.ratePerMile()); \n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":237591,"reputation":26585,"user_id":505893,"accept_rate":83,"display_name":"bluish"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1431607457,"creation_date":1431607457,"answer_id":30237725,"question_id":19896870,"body_markdown":"*I&#39;m new to Spring, but I discovered this working solution. Please tell me if it&#39;s a deprecable way.*\r\n\r\nI make Spring inject `applicationContext` in this bean:\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.ApplicationContext;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    @Component\r\n    public class SpringUtils {\r\n    \r\n    \tpublic static ApplicationContext ctx;\r\n    \t\r\n    \t/**\r\n    \t * Make Spring inject the application context\r\n    \t * and save it on a static variable,\r\n    \t * so that it can be accessed from any point in the application. \r\n    \t */\r\n    \t@Autowired\r\n    \tprivate void setApplicationContext(ApplicationContext applicationContext) {\r\n    \t\tctx = applicationContext;\t\t\r\n    \t}\r\n    }\r\n\r\nYou can put this code also in the main application class if you want.\r\n\r\nOther classes can use it like this:\r\n\r\n    MyBean myBean = (MyBean)SpringUtils.ctx.getBean(MyBean.class);\r\n\r\nIn this way **any bean can be obtained by any object in the application** (also intantiated with `new`) and **in a static way**.","title":"Why is my Spring @Autowired field null?","body":"<p><em>I'm new to Spring, but I discovered this working solution. Please tell me if it's a deprecable way.</em></p>\n\n<p>I make Spring inject <code>applicationContext</code> in this bean:</p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class SpringUtils {\n\n    public static ApplicationContext ctx;\n\n    /**\n     * Make Spring inject the application context\n     * and save it on a static variable,\n     * so that it can be accessed from any point in the application. \n     */\n    @Autowired\n    private void setApplicationContext(ApplicationContext applicationContext) {\n        ctx = applicationContext;       \n    }\n}\n</code></pre>\n\n<p>You can put this code also in the main application class if you want.</p>\n\n<p>Other classes can use it like this:</p>\n\n<pre><code>MyBean myBean = (MyBean)SpringUtils.ctx.getBean(MyBean.class);\n</code></pre>\n\n<p>In this way <strong>any bean can be obtained by any object in the application</strong> (also intantiated with <code>new</code>) and <strong>in a static way</strong>.</p>\n"},{"tags":[],"owner":{"account_id":3030319,"reputation":1688,"user_id":2569475,"display_name":"Deepak"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1681248064,"creation_date":1444295838,"answer_id":33011511,"question_id":19896870,"body_markdown":"Your problem is new (object creation in java style)\r\n\r\n    MileageFeeCalculator calc = new MileageFeeCalculator();\r\n\r\n With annotation `@Service`, `@Component`, `@Configuration` beans are created in the                \r\n    application context of Spring when server is started. But when we create objects \r\n    using new operator the object is not registered in  application context which  is already created. For Example Employee.java class i have used.\r\n    \r\nCheck this out:\r\n```java\r\npublic class ConfiguredTenantScopedBeanProcessor implements BeanFactoryPostProcessor {\r\n\t@Override\r\n\tpublic void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n        String name = &quot;tenant&quot;;\r\n        System.out.println(&quot;Bean factory post processor is initialized&quot;); \r\n        beanFactory.registerScope(&quot;employee&quot;, new Employee());\r\n\r\n        Assert.state(beanFactory instanceof BeanDefinitionRegistry,\r\n                &quot;BeanFactory was not a BeanDefinitionRegistry, so CustomScope cannot be used.&quot;);\r\n        BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\r\n\r\n        for (String beanName : beanFactory.getBeanDefinitionNames()) {\r\n            BeanDefinition definition = beanFactory.getBeanDefinition(beanName);\r\n            if (name.equals(definition.getScope())) {\r\n                BeanDefinitionHolder proxyHolder = ScopedProxyUtils.createScopedProxy(new BeanDefinitionHolder(definition, beanName), registry, true);\r\n                registry.registerBeanDefinition(beanName, proxyHolder.getBeanDefinition());\r\n            }\r\n        }\r\n\t}\r\n}\r\n```","title":"Why is my Spring @Autowired field null?","body":"<p>Your problem is new (object creation in java style)</p>\n<pre><code>MileageFeeCalculator calc = new MileageFeeCalculator();\n</code></pre>\n<p>With annotation <code>@Service</code>, <code>@Component</code>, <code>@Configuration</code> beans are created in the<br />\napplication context of Spring when server is started. But when we create objects\nusing new operator the object is not registered in  application context which  is already created. For Example Employee.java class i have used.</p>\n<p>Check this out:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ConfiguredTenantScopedBeanProcessor implements BeanFactoryPostProcessor {\n    @Override\n    public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n        String name = &quot;tenant&quot;;\n        System.out.println(&quot;Bean factory post processor is initialized&quot;); \n        beanFactory.registerScope(&quot;employee&quot;, new Employee());\n\n        Assert.state(beanFactory instanceof BeanDefinitionRegistry,\n                &quot;BeanFactory was not a BeanDefinitionRegistry, so CustomScope cannot be used.&quot;);\n        BeanDefinitionRegistry registry = (BeanDefinitionRegistry) beanFactory;\n\n        for (String beanName : beanFactory.getBeanDefinitionNames()) {\n            BeanDefinition definition = beanFactory.getBeanDefinition(beanName);\n            if (name.equals(definition.getScope())) {\n                BeanDefinitionHolder proxyHolder = ScopedProxyUtils.createScopedProxy(new BeanDefinitionHolder(definition, beanName), registry, true);\n                registry.registerBeanDefinition(beanName, proxyHolder.getBeanDefinition());\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":97325,"reputation":62285,"user_id":264052,"accept_rate":66,"display_name":"smwikipedia"},"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1598453683,"creation_date":1447335690,"answer_id":33672798,"question_id":19896870,"body_markdown":"I once encountered the same issue when I was *not quite used to the life in the IoC world*. The `@Autowired` field of one of my beans is null at runtime.\r\n\r\nThe root cause is, instead of using the auto-created bean maintained by the Spring IoC container (whose `@Autowired` field is indeed properly injected), I am `new`ing my own instance of that bean type and using it. Of course this one&#39;s `@Autowired` field is null because Spring has no chance to inject it.","title":"Why is my Spring @Autowired field null?","body":"<p>I once encountered the same issue when I was <em>not quite used to the life in the IoC world</em>. The <code>@Autowired</code> field of one of my beans is null at runtime.</p>\n<p>The root cause is, instead of using the auto-created bean maintained by the Spring IoC container (whose <code>@Autowired</code> field is indeed properly injected), I am <code>new</code>ing my own instance of that bean type and using it. Of course this one's <code>@Autowired</code> field is null because Spring has no chance to inject it.</p>\n"},{"tags":[],"owner":{"account_id":3130088,"reputation":43207,"user_id":2648077,"accept_rate":80,"display_name":"Alireza Fattahi"},"down_vote_count":2,"up_vote_count":17,"is_accepted":false,"score":15,"last_activity_date":1524229640,"creation_date":1465658125,"answer_id":37765291,"question_id":19896870,"body_markdown":"It seems to be rare case but here is what happened to me:\r\n\r\nWe used `@Inject` instead of `@Autowired` which is javaee standard supported by Spring. Every places it worked fine and the beans injected correctly, instead of one place. The bean injection seems the same\r\n\r\n    @Inject\r\n    Calculator myCalculator\r\n\r\nAt last we found that the error was that we (actually, the Eclipse auto complete feature) imported `com.opensymphony.xwork2.Inject` instead of `javax.inject.Inject` !\r\n\r\nSo to summarize, make sure that your annotations (`@Autowired`, `@Inject`, `@Service` ,... ) have correct packages!","title":"Why is my Spring @Autowired field null?","body":"<p>It seems to be rare case but here is what happened to me:</p>\n\n<p>We used <code>@Inject</code> instead of <code>@Autowired</code> which is javaee standard supported by Spring. Every places it worked fine and the beans injected correctly, instead of one place. The bean injection seems the same</p>\n\n<pre><code>@Inject\nCalculator myCalculator\n</code></pre>\n\n<p>At last we found that the error was that we (actually, the Eclipse auto complete feature) imported <code>com.opensymphony.xwork2.Inject</code> instead of <code>javax.inject.Inject</code> !</p>\n\n<p>So to summarize, make sure that your annotations (<code>@Autowired</code>, <code>@Inject</code>, <code>@Service</code> ,... ) have correct packages!</p>\n"},{"tags":[],"owner":{"account_id":4905259,"reputation":821,"user_id":3952164,"display_name":"Ravi Durairaj"},"down_vote_count":0,"up_vote_count":54,"is_accepted":false,"score":54,"last_activity_date":1532632867,"creation_date":1469525146,"answer_id":38585975,"question_id":19896870,"body_markdown":"Actually, you should use either JVM managed Objects or Spring-managed Object to invoke methods.\r\nfrom your above code in your controller class, you are creating a new object to call your service class which has an auto-wired object.\r\n\r\n    MileageFeeCalculator calc = new MileageFeeCalculator();\r\n\r\nso it won&#39;t work that way. \r\n\r\n\r\nThe solution makes this MileageFeeCalculator as an auto-wired object in the Controller itself.\r\n\r\nChange your Controller class like below.\r\n\r\n    @Controller\r\n    public class MileageFeeController {\r\n\r\n        @Autowired\r\n        MileageFeeCalculator calc;  \r\n\r\n        @RequestMapping(&quot;/mileage/{miles}&quot;)\r\n        @ResponseBody\r\n        public float mileageFee(@PathVariable int miles) {\r\n            return calc.mileageCharge(miles);\r\n        }\r\n    }\r\n\r\n","title":"Why is my Spring @Autowired field null?","body":"<p>Actually, you should use either JVM managed Objects or Spring-managed Object to invoke methods.\nfrom your above code in your controller class, you are creating a new object to call your service class which has an auto-wired object.</p>\n\n<pre><code>MileageFeeCalculator calc = new MileageFeeCalculator();\n</code></pre>\n\n<p>so it won't work that way. </p>\n\n<p>The solution makes this MileageFeeCalculator as an auto-wired object in the Controller itself.</p>\n\n<p>Change your Controller class like below.</p>\n\n<pre><code>@Controller\npublic class MileageFeeController {\n\n    @Autowired\n    MileageFeeCalculator calc;  \n\n    @RequestMapping(\"/mileage/{miles}\")\n    @ResponseBody\n    public float mileageFee(@PathVariable int miles) {\n        return calc.mileageCharge(miles);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1540148,"reputation":1578,"user_id":1435014,"display_name":"Abhishek"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1476384998,"creation_date":1476384073,"answer_id":40028588,"question_id":19896870,"body_markdown":"You can also fix this issue using @Service annotation on service class and passing the required bean classA as a parameter to the other beans classB constructor and annotate the constructor of classB with @Autowired. Sample snippet here :\r\n\r\n    @Service\r\n    public class ClassB {\r\n\t\r\n\t    private ClassA classA;\r\n\t\r\n        @Autowired\r\n        public ClassB(ClassA classA) {\r\n    \t    this.classA = classA;\r\n        }\r\n\r\n        public void useClassAObjectHere(){\r\n            classA.callMethodOnObjectA();\r\n        }\r\n    }","title":"Why is my Spring @Autowired field null?","body":"<p>You can also fix this issue using @Service annotation on service class and passing the required bean classA as a parameter to the other beans classB constructor and annotate the constructor of classB with @Autowired. Sample snippet here :</p>\n\n<pre><code>@Service\npublic class ClassB {\n\n    private ClassA classA;\n\n    @Autowired\n    public ClassB(ClassA classA) {\n        this.classA = classA;\n    }\n\n    public void useClassAObjectHere(){\n        classA.callMethodOnObjectA();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4443559,"reputation":816,"user_id":3617511,"display_name":"msucil"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1484076847,"creation_date":1484071226,"answer_id":41575363,"question_id":19896870,"body_markdown":"I think you have missed to instruct spring to scan classes with annotation. \r\n\r\nYou can use `@ComponentScan(&quot;packageToScan&quot;)` on the configuration class of your spring application to instruct spring to scan.\r\n\r\n`@Service, @Component` etc annotations add meta description.\r\n&lt;br&gt; \r\n\r\nSpring only injects instances of those classes which are either created as bean or marked with annotation.\r\n\r\nClasses marked with annotation need to be identified by spring before injecting, `@ComponentScan` instruct spring look for the classes marked with annotation. When Spring finds `@Autowired` it searches for the related bean, and injects the required instance.\r\n\r\nAdding annotation only, does not fix or facilitate the dependency injection, Spring needs to know where to look for.","title":"Why is my Spring @Autowired field null?","body":"<p>I think you have missed to instruct spring to scan classes with annotation. </p>\n\n<p>You can use <code>@ComponentScan(\"packageToScan\")</code> on the configuration class of your spring application to instruct spring to scan.</p>\n\n<p><code>@Service, @Component</code> etc annotations add meta description.\n<br> </p>\n\n<p>Spring only injects instances of those classes which are either created as bean or marked with annotation.</p>\n\n<p>Classes marked with annotation need to be identified by spring before injecting, <code>@ComponentScan</code> instruct spring look for the classes marked with annotation. When Spring finds <code>@Autowired</code> it searches for the related bean, and injects the required instance.</p>\n\n<p>Adding annotation only, does not fix or facilitate the dependency injection, Spring needs to know where to look for.</p>\n"},{"tags":[],"owner":{"account_id":3047853,"reputation":1464,"user_id":2583044,"accept_rate":62,"display_name":"62mkv"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1523529747,"creation_date":1507783428,"answer_id":46701560,"question_id":19896870,"body_markdown":"**UPDATE:** Really smart people were quick to point on [this][1] answer, which explains the weirdness, described below\r\n\r\n**ORIGINAL ANSWER:**\r\n\r\nI don&#39;t know if it helps anyone, but I was stuck with the same problem even while doing things seemingly right. In my Main method, I have a code like this:\r\n\r\n\r\n    ApplicationContext context =\r\n        new ClassPathXmlApplicationContext(new String[] {\r\n            &quot;common.xml&quot;,\r\n            &quot;token.xml&quot;,\r\n            &quot;pep-config.xml&quot; });\r\n        TokenInitializer ti = context.getBean(TokenInitializer.class);\r\n\r\nand in a `token.xml` file I&#39;ve had a line\r\n\r\n    &lt;context:component-scan base-package=&quot;package.path&quot;/&gt;\r\n\r\nI noticed that the package.path does no longer exist, so I&#39;ve just dropped the line for good. \r\n\r\nAnd after that, NPE started coming in. In a `pep-config.xml` I had just 2 beans: \r\n\r\n    &lt;bean id=&quot;someAbac&quot; class=&quot;com.pep.SomeAbac&quot; init-method=&quot;init&quot;/&gt;\r\n    &lt;bean id=&quot;settings&quot; class=&quot;com.pep.Settings&quot;/&gt;\r\n\r\nand SomeAbac class has a property declared as\r\n\r\n    @Autowired private Settings settings;\r\n\r\nfor some unknown reason, settings is *null* in init(), when `&lt;context:component-scan/&gt;` element is not present at all, but when it&#39;s present and has some bs as a basePackage, everything works well. This line now looks like this: \r\n\r\n    &lt;context:component-scan base-package=&quot;some.shit&quot;/&gt;\r\n\r\nand it works. May be someone can provide an explanation, but for me it&#39;s enough right now )\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/13177782/2583044","title":"Why is my Spring @Autowired field null?","body":"<p><strong>UPDATE:</strong> Really smart people were quick to point on <a href=\"https://stackoverflow.com/a/13177782/2583044\">this</a> answer, which explains the weirdness, described below</p>\n\n<p><strong>ORIGINAL ANSWER:</strong></p>\n\n<p>I don't know if it helps anyone, but I was stuck with the same problem even while doing things seemingly right. In my Main method, I have a code like this:</p>\n\n<pre><code>ApplicationContext context =\n    new ClassPathXmlApplicationContext(new String[] {\n        \"common.xml\",\n        \"token.xml\",\n        \"pep-config.xml\" });\n    TokenInitializer ti = context.getBean(TokenInitializer.class);\n</code></pre>\n\n<p>and in a <code>token.xml</code> file I've had a line</p>\n\n<pre><code>&lt;context:component-scan base-package=\"package.path\"/&gt;\n</code></pre>\n\n<p>I noticed that the package.path does no longer exist, so I've just dropped the line for good. </p>\n\n<p>And after that, NPE started coming in. In a <code>pep-config.xml</code> I had just 2 beans: </p>\n\n<pre><code>&lt;bean id=\"someAbac\" class=\"com.pep.SomeAbac\" init-method=\"init\"/&gt;\n&lt;bean id=\"settings\" class=\"com.pep.Settings\"/&gt;\n</code></pre>\n\n<p>and SomeAbac class has a property declared as</p>\n\n<pre><code>@Autowired private Settings settings;\n</code></pre>\n\n<p>for some unknown reason, settings is <em>null</em> in init(), when <code>&lt;context:component-scan/&gt;</code> element is not present at all, but when it's present and has some bs as a basePackage, everything works well. This line now looks like this: </p>\n\n<pre><code>&lt;context:component-scan base-package=\"some.shit\"/&gt;\n</code></pre>\n\n<p>and it works. May be someone can provide an explanation, but for me it's enough right now )</p>\n"},{"tags":[],"owner":{"account_id":31617,"reputation":52341,"user_id":86967,"accept_rate":56,"display_name":"Brent Bradburn"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1585887097,"creation_date":1523557512,"answer_id":49803576,"question_id":19896870,"body_markdown":"If this is happening in a test class, make sure you haven&#39;t forgotten to annotate the class.\r\n\r\nFor example, in **Spring Boot**:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest\r\n    public class MyTests {\r\n        ....\r\n\r\n----------\r\n\r\nSome time elapses...\r\n--------------------\r\n\r\nSpring Boot [continues to evolve](https://spring.io/blog/2016/04/15/testing-improvements-in-spring-boot-1-4).  It is no longer required to use `@RunWith` *if you use the correct version of JUnit*.\r\n\r\nFor `@SpringBootTest` to work stand alone, you need to use `@Test` from [JUnit5 instead of JUnit4](https://stackoverflow.com/q/48853312).\r\n\r\n\r\n    //import org.junit.Test; // JUnit4\r\n    import org.junit.jupiter.api.Test; // JUnit5\r\n    \r\n    @SpringBootTest\r\n    public class MyTests {\r\n        ....\r\n\r\n----------\r\n\r\nIf you get this configuration wrong your tests will compile, but `@Autowired` and `@Value` fields (for example) will be `null`.  Since Spring Boot operates by magic, you may have few avenues for directly debugging this failure.","title":"Why is my Spring @Autowired field null?","body":"<p>If this is happening in a test class, make sure you haven't forgotten to annotate the class.</p>\n\n<p>For example, in <strong>Spring Boot</strong>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(SpringRunner.class)\n@SpringBootTest\npublic class MyTests {\n    ....\n</code></pre>\n\n<hr>\n\n<h2>Some time elapses...</h2>\n\n<p>Spring Boot <a href=\"https://spring.io/blog/2016/04/15/testing-improvements-in-spring-boot-1-4\" rel=\"nofollow noreferrer\">continues to evolve</a>.  It is no longer required to use <code>@RunWith</code> <em>if you use the correct version of JUnit</em>.</p>\n\n<p>For <code>@SpringBootTest</code> to work stand alone, you need to use <code>@Test</code> from <a href=\"https://stackoverflow.com/q/48853312\">JUnit5 instead of JUnit4</a>.</p>\n\n<pre><code>//import org.junit.Test; // JUnit4\nimport org.junit.jupiter.api.Test; // JUnit5\n\n@SpringBootTest\npublic class MyTests {\n    ....\n</code></pre>\n\n<hr>\n\n<p>If you get this configuration wrong your tests will compile, but <code>@Autowired</code> and <code>@Value</code> fields (for example) will be <code>null</code>.  Since Spring Boot operates by magic, you may have few avenues for directly debugging this failure.</p>\n"},{"tags":[],"owner":{"account_id":101108,"reputation":13957,"user_id":272180,"accept_rate":62,"display_name":"yglodt"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1547222110,"creation_date":1547222110,"answer_id":54149911,"question_id":19896870,"body_markdown":"Also note that if, for whatever reason, you make a method in a `@Service` as `final`, the autowired beans you will access from it will always be `null`.","title":"Why is my Spring @Autowired field null?","body":"<p>Also note that if, for whatever reason, you make a method in a <code>@Service</code> as <code>final</code>, the autowired beans you will access from it will always be <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":2904621,"reputation":1045,"user_id":2490336,"accept_rate":0,"display_name":"Atul Jain"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1561546947,"creation_date":1557126162,"answer_id":56000238,"question_id":19896870,"body_markdown":"This is the culprit of giving NullPointerException `MileageFeeCalculator calc = new MileageFeeCalculator();` We are using Spring - don&#39;t need to create object manually. Object creation will be taken care of by IoC container.","title":"Why is my Spring @Autowired field null?","body":"<p>This is the culprit of giving NullPointerException <code>MileageFeeCalculator calc = new MileageFeeCalculator();</code> We are using Spring - don't need to create object manually. Object creation will be taken care of by IoC container.</p>\n"},{"tags":[],"owner":{"account_id":4239567,"reputation":734,"user_id":3469861,"display_name":"JackLeEmmerdeur"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1562338306,"creation_date":1562338306,"answer_id":56905326,"question_id":19896870,"body_markdown":"What hasn&#39;t been mentioned here is described in [this](https://technology.amis.nl/2018/02/22/java-how-to-fix-spring-autowired-annotation-not-working-issues/) article in the paragraph &quot;Order of execution&quot;.\r\n\r\nAfter &quot;learning&quot; that I had to annotate a class with @Component or the derivatives @Service or @Repository (I guess there are more), to autowire other components inside them, it struck me that these other components still were null inside the constructor of the parent component.\r\n\r\nUsing @PostConstruct solves that:\r\n\r\n    @SpringBootApplication\r\n    public class Application {\r\n        @Autowired MyComponent comp;\r\n    }\r\n\r\nand:\r\n\r\n    @Component\r\n    public class MyComponent {\r\n        @Autowired ComponentDAO dao;\r\n\r\n        public MyComponent() {\r\n            // dao is null here\r\n        }\r\n        \r\n        @PostConstruct\r\n        public void init() {\r\n            // dao is initialized here\r\n        }\r\n    }\r\n\r\n","title":"Why is my Spring @Autowired field null?","body":"<p>What hasn't been mentioned here is described in <a href=\"https://technology.amis.nl/2018/02/22/java-how-to-fix-spring-autowired-annotation-not-working-issues/\" rel=\"noreferrer\">this</a> article in the paragraph \"Order of execution\".</p>\n\n<p>After \"learning\" that I had to annotate a class with @Component or the derivatives @Service or @Repository (I guess there are more), to autowire other components inside them, it struck me that these other components still were null inside the constructor of the parent component.</p>\n\n<p>Using @PostConstruct solves that:</p>\n\n<pre><code>@SpringBootApplication\npublic class Application {\n    @Autowired MyComponent comp;\n}\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>@Component\npublic class MyComponent {\n    @Autowired ComponentDAO dao;\n\n    public MyComponent() {\n        // dao is null here\n    }\n\n    @PostConstruct\n    public void init() {\n        // dao is initialized here\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1910624,"reputation":8254,"user_id":2761513,"display_name":"SAMUEL"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1664197588,"creation_date":1574829877,"answer_id":59063139,"question_id":19896870,"body_markdown":"In simple words there are mainly two reasons for an `@Autowired` field to be `null`\r\n\r\n- **YOUR CLASS IS NOT A  SPRING BEAN.**\r\n\r\nThe class in which you define the `@Autowire` anotation is not a spring bean. Thus spring will not auto wire the members.\r\n\r\n\r\n- **THE FIELD IS NOT A BEAN.**\r\n\r\nThere is no bean with the type or type in hierarchy you specified in the `@Autowired` field is  not yet present in the spring application context or registry ","title":"Why is my Spring @Autowired field null?","body":"<p>In simple words there are mainly two reasons for an <code>@Autowired</code> field to be <code>null</code></p>\n<ul>\n<li><strong>YOUR CLASS IS NOT A  SPRING BEAN.</strong></li>\n</ul>\n<p>The class in which you define the <code>@Autowire</code> anotation is not a spring bean. Thus spring will not auto wire the members.</p>\n<ul>\n<li><strong>THE FIELD IS NOT A BEAN.</strong></li>\n</ul>\n<p>There is no bean with the type or type in hierarchy you specified in the <code>@Autowired</code> field is  not yet present in the spring application context or registry</p>\n"},{"tags":[],"owner":{"account_id":4802848,"reputation":2464,"user_id":3878948,"accept_rate":86,"display_name":"Rishabh Agarwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576859637,"creation_date":1576859637,"answer_id":59428578,"question_id":19896870,"body_markdown":"This is only valid in case of Unit test.\r\n\r\nMy Service class had an annotation of service and it was `@autowired` another component class. When I tested the component class was coming null. Because for service class I was creating the object using `new`\r\n\r\nIf you are writing unit test make sure you are not creating object using `new object()`. Use instead injectMock.\r\n\r\nThis fixed my issue. Here is a useful [link][1]\r\n\r\n\r\n  [1]: https://www.moreofless.co.uk/spring-mvc-java-autowired-component-null-repository-service/","title":"Why is my Spring @Autowired field null?","body":"<p>This is only valid in case of Unit test.</p>\n\n<p>My Service class had an annotation of service and it was <code>@autowired</code> another component class. When I tested the component class was coming null. Because for service class I was creating the object using <code>new</code></p>\n\n<p>If you are writing unit test make sure you are not creating object using <code>new object()</code>. Use instead injectMock.</p>\n\n<p>This fixed my issue. Here is a useful <a href=\"https://www.moreofless.co.uk/spring-mvc-java-autowired-component-null-repository-service/\" rel=\"nofollow noreferrer\">link</a></p>\n"},{"tags":[],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589203897,"creation_date":1589203897,"answer_id":61730942,"question_id":19896870,"body_markdown":"Not entirely related to the question, but if the field injection is null, the constructor based injection will still work fine. \r\n\r\n\r\n        private OrderingClient orderingClient;\r\n        private Sales2Client sales2Client;\r\n        private Settings2Client settings2Client;\r\n        \r\n        @Autowired\r\n        public BrinkWebTool(OrderingClient orderingClient, Sales2Client sales2Client, Settings2Client settings2Client) {\r\n            this.orderingClient = orderingClient;\r\n            this.sales2Client = sales2Client;\r\n            this.settings2Client = settings2Client;\r\n        }","title":"Why is my Spring @Autowired field null?","body":"<p>Not entirely related to the question, but if the field injection is null, the constructor based injection will still work fine. </p>\n\n<pre><code>    private OrderingClient orderingClient;\n    private Sales2Client sales2Client;\n    private Settings2Client settings2Client;\n\n    @Autowired\n    public BrinkWebTool(OrderingClient orderingClient, Sales2Client sales2Client, Settings2Client settings2Client) {\n        this.orderingClient = orderingClient;\n        this.sales2Client = sales2Client;\n        this.settings2Client = settings2Client;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16773846,"reputation":1526,"user_id":12125692,"display_name":"Ashutosh Tiwari"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1603625993,"creation_date":1603625993,"answer_id":64523265,"question_id":19896870,"body_markdown":"**One of the below will work :** \r\n\r\n1. The class where you are using @Autowired is not a Bean (You may have used new() somewhere I am sure).\r\n\r\n2. Inside the SpringConfig class you have not mentioned the packages the Spring should look for @Component ( I am talking about @ComponentScan(basePackages&quot;here&quot;) )\r\n\r\nIf above two don&#39;t work .... start putting System.out.println() and figure out where it is going wrong.","title":"Why is my Spring @Autowired field null?","body":"<p><strong>One of the below will work :</strong></p>\n<ol>\n<li><p>The class where you are using @Autowired is not a Bean (You may have used new() somewhere I am sure).</p>\n</li>\n<li><p>Inside the SpringConfig class you have not mentioned the packages the Spring should look for @Component ( I am talking about @ComponentScan(basePackages&quot;here&quot;) )</p>\n</li>\n</ol>\n<p>If above two don't work .... start putting System.out.println() and figure out where it is going wrong.</p>\n"},{"tags":[],"owner":{"account_id":11601876,"reputation":43,"user_id":8498735,"display_name":"Qin Kai"},"down_vote_count":8,"up_vote_count":2,"is_accepted":false,"score":-6,"last_activity_date":1603717543,"creation_date":1603707195,"answer_id":64535116,"question_id":19896870,"body_markdown":"if you are using a `private` method, it will be `null`, try to change `private` to `public` in controller.","title":"Why is my Spring @Autowired field null?","body":"<p>if you are using a <code>private</code> method, it will be <code>null</code>, try to change <code>private</code> to <code>public</code> in controller.</p>\n"},{"tags":[],"owner":{"account_id":14973742,"reputation":1105,"user_id":10809764,"display_name":"Sean"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1608695778,"creation_date":1608695778,"answer_id":65418818,"question_id":19896870,"body_markdown":"In addition, don&#39;t inject to a `static` member, it will be `null`.","title":"Why is my Spring @Autowired field null?","body":"<p>In addition, don't inject to a <code>static</code> member, it will be <code>null</code>.</p>\n"}],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":731001,"favorite_count":0,"down_vote_count":3,"up_vote_count":773,"accepted_answer_id":19896871,"answer_count":21,"score":770,"last_activity_date":1681248064,"creation_date":1384128303,"question_id":19896870,"body_markdown":"*Note: This is intended to be a canonical answer for a common problem.*\r\n\r\nI have a Spring `@Service` class (`MileageFeeCalculator`) that has an `@Autowired` field (`rateService`), but the field is `null` when I try to use it. The logs show that both the `MileageFeeCalculator` bean and the `MileageRateService` bean are being created, but I get a `NullPointerException` whenever I try to call the `mileageCharge` method on my service bean. Why isn&#39;t Spring autowiring the field?\r\n\r\nController class:\r\n\r\n    @Controller\r\n    public class MileageFeeController {    \r\n\t    @RequestMapping(&quot;/mileage/{miles}&quot;)\r\n\t    @ResponseBody\r\n\t    public float mileageFee(@PathVariable int miles) {\r\n    \t\tMileageFeeCalculator calc = new MileageFeeCalculator();\r\n\t    \treturn calc.mileageCharge(miles);\r\n\t    }\r\n    }\r\n    \r\nService class:\r\n\r\n    @Service\r\n    public class MileageFeeCalculator {\r\n    \r\n\t    @Autowired\r\n\t    private MileageRateService rateService; // &lt;--- should be autowired, is null\r\n\r\n\t    public float mileageCharge(final int miles) {\r\n\t\t    return (miles * rateService.ratePerMile()); // &lt;--- throws NPE\r\n\t    }\r\n    }\r\n    \r\nService bean that should be autowired in `MileageFeeCalculator` but it isn&#39;t:\r\n\r\n    @Service\r\n    public class MileageRateService {\r\n        public float ratePerMile() {\r\n\t\t    return 0.565f;\r\n\t    }\r\n    }\r\n    \r\nWhen I try to `GET /mileage/3`, I get this exception:\r\n\r\n    java.lang.NullPointerException: null\r\n        at com.chrylis.example.spring_autowired_npe.MileageFeeCalculator.mileageCharge(MileageFeeCalculator.java:13)\r\n\t    at com.chrylis.example.spring_autowired_npe.MileageFeeController.mileageFee(MileageFeeController.java:14)\r\n        ...","title":"Why is my Spring @Autowired field null?","body":"<p><em>Note: This is intended to be a canonical answer for a common problem.</em></p>\n\n<p>I have a Spring <code>@Service</code> class (<code>MileageFeeCalculator</code>) that has an <code>@Autowired</code> field (<code>rateService</code>), but the field is <code>null</code> when I try to use it. The logs show that both the <code>MileageFeeCalculator</code> bean and the <code>MileageRateService</code> bean are being created, but I get a <code>NullPointerException</code> whenever I try to call the <code>mileageCharge</code> method on my service bean. Why isn't Spring autowiring the field?</p>\n\n<p>Controller class:</p>\n\n<pre><code>@Controller\npublic class MileageFeeController {    \n    @RequestMapping(\"/mileage/{miles}\")\n    @ResponseBody\n    public float mileageFee(@PathVariable int miles) {\n        MileageFeeCalculator calc = new MileageFeeCalculator();\n        return calc.mileageCharge(miles);\n    }\n}\n</code></pre>\n\n<p>Service class:</p>\n\n<pre><code>@Service\npublic class MileageFeeCalculator {\n\n    @Autowired\n    private MileageRateService rateService; // &lt;--- should be autowired, is null\n\n    public float mileageCharge(final int miles) {\n        return (miles * rateService.ratePerMile()); // &lt;--- throws NPE\n    }\n}\n</code></pre>\n\n<p>Service bean that should be autowired in <code>MileageFeeCalculator</code> but it isn't:</p>\n\n<pre><code>@Service\npublic class MileageRateService {\n    public float ratePerMile() {\n        return 0.565f;\n    }\n}\n</code></pre>\n\n<p>When I try to <code>GET /mileage/3</code>, I get this exception:</p>\n\n<pre><code>java.lang.NullPointerException: null\n    at com.chrylis.example.spring_autowired_npe.MileageFeeCalculator.mileageCharge(MileageFeeCalculator.java:13)\n    at com.chrylis.example.spring_autowired_npe.MileageFeeController.mileageFee(MileageFeeController.java:14)\n    ...\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","jaxb"],"owner":{"account_id":16609602,"reputation":115,"user_id":12003033,"display_name":"wizdemonizer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681247941,"creation_date":1681247941,"question_id":75990212,"body_markdown":"I have a class that contains various nested objects that needs to be parsed to xml using JAX-B , this is the sample class object being passed as XML payload :\r\n\r\n``` \r\n&lt;creditTransactionMessage&gt;\r\n    &lt;finToFinCreditTransaction&gt;\r\n        &lt;transactionHeader&gt;\r\n            &lt;totalInterBankSettlementAmount&gt;\r\n                &lt;settlementAmount&gt;2780.00&lt;/settlementAmount&gt;\r\n                &lt;ccy&gt;NGN&lt;/ccy&gt;\r\n            &lt;/totalInterBankSettlementAmount&gt;\r\n        &lt;/transactionHeader&gt;\r\n        &lt;creditTransaction&gt;\r\n            &lt;creditTransaction&gt;\r\n                &lt;beneficiaryBank&gt;\r\n                    &lt;beneficiaryBankIdentificiation&gt; \r\n```\r\n\r\nWhat I want is to reduce the number of nested objects in the payload to just something like this :\r\n\r\n```\r\n&lt;settlementAmount&gt;2780.00&lt;/settlementAmount&gt;\r\n &lt;ccy&gt;NGN&lt;/ccy&gt;\r\n```\r\n\r\nWithout having to declared the top nested object levels . Such that the new payload goes into the existing object class with sample payload as posted above .\r\n\r\n","title":"How do I reduce the Nested tags in an XML payload to fit into an existing object?","body":"<p>I have a class that contains various nested objects that needs to be parsed to xml using JAX-B , this is the sample class object being passed as XML payload :</p>\n<pre><code>&lt;creditTransactionMessage&gt;\n    &lt;finToFinCreditTransaction&gt;\n        &lt;transactionHeader&gt;\n            &lt;totalInterBankSettlementAmount&gt;\n                &lt;settlementAmount&gt;2780.00&lt;/settlementAmount&gt;\n                &lt;ccy&gt;NGN&lt;/ccy&gt;\n            &lt;/totalInterBankSettlementAmount&gt;\n        &lt;/transactionHeader&gt;\n        &lt;creditTransaction&gt;\n            &lt;creditTransaction&gt;\n                &lt;beneficiaryBank&gt;\n                    &lt;beneficiaryBankIdentificiation&gt; \n</code></pre>\n<p>What I want is to reduce the number of nested objects in the payload to just something like this :</p>\n<pre><code>&lt;settlementAmount&gt;2780.00&lt;/settlementAmount&gt;\n &lt;ccy&gt;NGN&lt;/ccy&gt;\n</code></pre>\n<p>Without having to declared the top nested object levels . Such that the new payload goes into the existing object class with sample payload as posted above .</p>\n"},{"tags":["java","azure","elasticsearch"],"comments":[{"owner":{"account_id":5028364,"reputation":31224,"user_id":4039431,"accept_rate":94,"display_name":"Amit"},"score":0,"creation_date":1656585398,"post_id":72814300,"comment_id":128611466,"body_markdown":"one imp thing, is that your java client and Elasticsearch server version needs to be same , so in your case you should use the `8.3` java client","body":"one imp thing, is that your java client and Elasticsearch server version needs to be same , so in your case you should use the <code>8.3</code> java client"},{"owner":{"account_id":17214508,"reputation":151,"user_id":12462885,"display_name":"Udit Jindal"},"score":0,"creation_date":1656585859,"post_id":72814300,"comment_id":128611602,"body_markdown":"@Amit Thank you for response. I checked this with 8.3 as well. Issue is still the same.","body":"@Amit Thank you for response. I checked this with 8.3 as well. Issue is still the same."}],"answers":[{"tags":[],"owner":{"account_id":17214508,"reputation":151,"user_id":12462885,"display_name":"Udit Jindal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1656674860,"creation_date":1656674860,"answer_id":72828575,"question_id":72814300,"body_markdown":"Solved the issue. The endpoint and port were incorrect. \r\n\r\nCorrect endpoint : {cluster_name}.es.{region_name}.azure.elastic-cloud.com \r\nex : `test_cluster.es.eastus.azure.elastic-cloud.com`\r\nCorrect port : 9243\r\n\r\n\r\nAlso, in RestClient builder constructor had to specify the protocol as `https`. \r\n\r\n``` RestClient.builder(new HttpHost(host, port, &quot;https&quot;)); ```\r\n\r\n\r\nFor anyone doing the same thing, wrote the exact steps here : https://medium.com/@udit.jindal/connecting-local-java-client-with-elastic-cloud-elasticsearch-on-cloud-on-azure-aws-c4b48b61a4cc\r\n\r\n","title":"Getting 400 while connnecting to Azure managed Elastic search cloud","body":"<p>Solved the issue. The endpoint and port were incorrect.</p>\n<p>Correct endpoint : {cluster_name}.es.{region_name}.azure.elastic-cloud.com\nex : <code>test_cluster.es.eastus.azure.elastic-cloud.com</code>\nCorrect port : 9243</p>\n<p>Also, in RestClient builder constructor had to specify the protocol as <code>https</code>.</p>\n<p><code>RestClient.builder(new HttpHost(host, port, &quot;https&quot;));</code></p>\n<p>For anyone doing the same thing, wrote the exact steps here : <a href=\"https://medium.com/@udit.jindal/connecting-local-java-client-with-elastic-cloud-elasticsearch-on-cloud-on-azure-aws-c4b48b61a4cc\" rel=\"nofollow noreferrer\">https://medium.com/@udit.jindal/connecting-local-java-client-with-elastic-cloud-elasticsearch-on-cloud-on-azure-aws-c4b48b61a4cc</a></p>\n"},{"tags":[],"owner":{"account_id":3575393,"reputation":11,"user_id":2984776,"display_name":"leandropintos91"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681247268,"creation_date":1681247268,"answer_id":75990148,"question_id":72814300,"body_markdown":"Just to clarify a little bit more your answer, the host should be just the hostname without &quot;http&quot; or &quot;https&quot; at the beginning. That worked for me.","title":"Getting 400 while connnecting to Azure managed Elastic search cloud","body":"<p>Just to clarify a little bit more your answer, the host should be just the hostname without &quot;http&quot; or &quot;https&quot; at the beginning. That worked for me.</p>\n"}],"owner":{"account_id":17214508,"reputation":151,"user_id":12462885,"display_name":"Udit Jindal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72828575,"answer_count":2,"score":0,"last_activity_date":1681247268,"creation_date":1656585233,"question_id":72814300,"body_markdown":"I deployed [Azure&#39;s Elastic Search managed solution][1]. Now I am trying to connect to it from my local machine, using Java client version 8.2.3 (tried with 8.3 as well). Below mentioned is the endpoint and ports. However, I am getting 400 response code all the times.\r\n\r\nEndpoint : https://2029sn39n2424brUem8868ae.es.eastus2.azure.elastic-cloud.com (Sample only)\r\nPort : 9200, 9300, 9243\r\n\r\n- I tried adding/removing [IP filter][2]. Didn&#39;t work.\r\n- I created API key and added it in request header. Didn&#39;t work.\r\n\r\nError response : `host= https://2029sn39n2424brUem8868ae.es.eastus2.azure.elastic-cloud.com response=HTTP/1.0 400 Bad Request`\r\n\r\n- [Authentication mechanism][3]\r\n- [Doc insert mechanism][4]\r\n- Elastic search version is 8.3 (Azure managed).\r\n\r\nCan anyone please help?\r\n\r\n\r\n  [1]: https://azuremarketplace.microsoft.com/en-in/marketplace/apps/elastic.ec-azure-pp\r\n  [2]: https://www.elastic.co/guide/en/cloud/current/ec-traffic-filtering-ip.html\r\n  [3]: https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/8.3/_basic_authentication.html\r\n  [4]: https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/indexing.html","title":"Getting 400 while connnecting to Azure managed Elastic search cloud","body":"<p>I deployed <a href=\"https://azuremarketplace.microsoft.com/en-in/marketplace/apps/elastic.ec-azure-pp\" rel=\"nofollow noreferrer\">Azure's Elastic Search managed solution</a>. Now I am trying to connect to it from my local machine, using Java client version 8.2.3 (tried with 8.3 as well). Below mentioned is the endpoint and ports. However, I am getting 400 response code all the times.</p>\n<p>Endpoint : <a href=\"https://2029sn39n2424brUem8868ae.es.eastus2.azure.elastic-cloud.com\" rel=\"nofollow noreferrer\">https://2029sn39n2424brUem8868ae.es.eastus2.azure.elastic-cloud.com</a> (Sample only)\nPort : 9200, 9300, 9243</p>\n<ul>\n<li>I tried adding/removing <a href=\"https://www.elastic.co/guide/en/cloud/current/ec-traffic-filtering-ip.html\" rel=\"nofollow noreferrer\">IP filter</a>. Didn't work.</li>\n<li>I created API key and added it in request header. Didn't work.</li>\n</ul>\n<p>Error response : <code>host= https://2029sn39n2424brUem8868ae.es.eastus2.azure.elastic-cloud.com response=HTTP/1.0 400 Bad Request</code></p>\n<ul>\n<li><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/8.3/_basic_authentication.html\" rel=\"nofollow noreferrer\">Authentication mechanism</a></li>\n<li><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/indexing.html\" rel=\"nofollow noreferrer\">Doc insert mechanism</a></li>\n<li>Elastic search version is 8.3 (Azure managed).</li>\n</ul>\n<p>Can anyone please help?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1352610,"reputation":1933,"user_id":1291778,"accept_rate":50,"display_name":"aeskreis"},"score":0,"creation_date":1681240203,"post_id":75988195,"comment_id":134023867,"body_markdown":"I&#39;m not sure what you want will in fact be possible. It&#39;s important to understand that generic types in Java are a compile-time only feature. When your code actually runs, all generic types are erased. If you come from C++ and expected them to work like templates this may surprise you. Spring can&#39;t differentiate one Processor bean from another if their only difference is a template argument. You should make separate Processor beans for each object type like you did for BaseRepository.","body":"I&#39;m not sure what you want will in fact be possible. It&#39;s important to understand that generic types in Java are a compile-time only feature. When your code actually runs, all generic types are erased. If you come from C++ and expected them to work like templates this may surprise you. Spring can&#39;t differentiate one Processor bean from another if their only difference is a template argument. You should make separate Processor beans for each object type like you did for BaseRepository."}],"answers":[{"tags":[],"owner":{"account_id":9235242,"reputation":1488,"user_id":6860078,"display_name":"tbatch"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681246365,"creation_date":1681231154,"answer_id":75988265,"question_id":75988195,"body_markdown":"You need to use the [`@Qualifier` annotation][1].  \r\n\r\n```java\r\n@Service\r\npublic class MyService {\r\n    private final Processor&lt;Order&gt; orderProcessor;\r\n    private final Processor&lt;Fault&gt; faultProcessor;\r\n\r\n    public MyService(@Qualifier(&quot;order&quot;) Processor&lt;Order&gt; orderProcessor, @Qualifier(&quot;fault&quot;) Processor&lt;Fault&gt; faultProcessor) {\r\n        this.orderProcessor = orderProcessor;\r\n        this.faultProcessor = faultProcessor;\r\n    }\r\n    \r\n    public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\r\n        \r\n        orderProcessor.process(input.get(&quot;ORDERS&quot;));\r\n        faultProcessor.process(input.get(&quot;FAULTS&quot;));\r\n    }\r\n}\r\n```\r\n\r\nThe annotation tells Spring to use the `Repository` with the named supplied in the `@Qualifer` annotation.  Since you annotated your `orderRepository` with `@Repository(&quot;order&quot;)`, then `@Qualifier(&quot;order&quot;)` will tell Spring to use that repository.\r\n\r\n---\r\n\r\n# EDIT\r\n\r\nSpring, like anything else in Java, can&#39;t assign an interface to an interface.  For example, the following code won&#39;t compile \r\n```java\r\nprivate List&lt;String&gt; stringList = new List&lt;String&gt;();\r\n```\r\n\r\nThis is because the instantiated value must be a valid implementation. \r\n You can fix this using further abstraction, and/or design patterns.  Take a look at the [Factory Pattern][2] and/or the [Strategy Pattern][3] to get an idea of how to implement them more effectively.  Alternatively, you could try something like this using a provider to handle the process request internally. \r\n\r\n#### New Supports Interface\r\n```java\r\npublic interface Processes&lt;T&gt;\r\n{\r\n  boolean processes(T object);\r\n}\r\n```\r\n\r\n#### Processor\r\n```java\r\n@Service\r\npublic abstract class Processor&lt;U extends BaseEntity&gt; implements Processes&lt;Object&gt;\r\n{\r\n  public abstract void process(U entity);\r\n}\r\n```\r\n#### Implementation\r\n```java\r\n@Service\r\npublic class OrderProcessor extends Processor&lt;Order&gt;\r\n{\r\n  @Qualifier(&quot;order&quot;)\r\n  BaseRepository&lt;Order&gt; repository;\r\n\r\n  public OrderProcessor(BaseRepository&lt;Order&gt; repository)\r\n  {\r\n    this.repository = repository;\r\n  }\r\n\r\n  @Override\r\n  public boolean supports(Object object)\r\n  {\r\n    return object instanceof Order;\r\n  }\r\n\r\n  @Override\r\n  public void process(Order order)\r\n  {\r\n    /// ... do process stuff\r\n  }\r\n}\r\n```\r\n\r\n### Spring Autowired List with Provider\r\n```java\r\n@Service\r\npublic static class ProcessorProvider\r\n{\r\n  @Autowired\r\n  List&lt;Processor&lt;? extends BaseEntity&gt;&gt; processors;\r\n\r\n  public &lt;T extends BaseEntity&gt; void process(T type)\r\n  {\r\n    var processor = processors.stream().filter(proc -&gt; proc.processes(type)).findFirst();\r\n\r\n    processor.ifPresent(proc -&gt; process(proc, type));\r\n  }\r\n\r\n  private &lt;T extends BaseEntity&gt; void process(Processor&lt;? extends BaseEntity&gt; processor, T type)\r\n  {\r\n    if (processor instanceof OrderProcessor) {\r\n      ((OrderProcessor) processor).process((Order) type);\r\n    }\r\n    else if (processor instanceof FaultProcessor) {\r\n      ((FaultProcessor) processor).process((Fault) type);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nNow you can call the ProcessorProvider from your implementing code\r\n```java\r\n@Service\r\npublic class MyService {\r\n  \r\n  SpringscratchApplication.ProcessorProvider provider;\r\n\r\n  public MyService(SpringscratchApplication.ProcessorProvider provider) {\r\n    this.provider = provider;\r\n  }\r\n\r\n  public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\r\n\r\n    input.get(&quot;ORDERS&quot;).forEach(order -&gt; provider.process(order));\r\n    input.get(&quot;FAULTS&quot;).forEach(order -&gt; provider.process(order));\r\n  }\r\n}\r\n```\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html\r\n  [2]: https://en.wikipedia.org/wiki/Factory_method_pattern\r\n  [3]: https://en.wikipedia.org/wiki/Strategy_pattern","title":"How do I autowire based on the generic type?","body":"<p>You need to use the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/annotation/Qualifier.html\" rel=\"nofollow noreferrer\"><code>@Qualifier</code> annotation</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n    private final Processor&lt;Order&gt; orderProcessor;\n    private final Processor&lt;Fault&gt; faultProcessor;\n\n    public MyService(@Qualifier(&quot;order&quot;) Processor&lt;Order&gt; orderProcessor, @Qualifier(&quot;fault&quot;) Processor&lt;Fault&gt; faultProcessor) {\n        this.orderProcessor = orderProcessor;\n        this.faultProcessor = faultProcessor;\n    }\n    \n    public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\n        \n        orderProcessor.process(input.get(&quot;ORDERS&quot;));\n        faultProcessor.process(input.get(&quot;FAULTS&quot;));\n    }\n}\n</code></pre>\n<p>The annotation tells Spring to use the <code>Repository</code> with the named supplied in the <code>@Qualifer</code> annotation.  Since you annotated your <code>orderRepository</code> with <code>@Repository(&quot;order&quot;)</code>, then <code>@Qualifier(&quot;order&quot;)</code> will tell Spring to use that repository.</p>\n<hr />\n<h1>EDIT</h1>\n<p>Spring, like anything else in Java, can't assign an interface to an interface.  For example, the following code won't compile</p>\n<pre class=\"lang-java prettyprint-override\"><code>private List&lt;String&gt; stringList = new List&lt;String&gt;();\n</code></pre>\n<p>This is because the instantiated value must be a valid implementation.\nYou can fix this using further abstraction, and/or design patterns.  Take a look at the <a href=\"https://en.wikipedia.org/wiki/Factory_method_pattern\" rel=\"nofollow noreferrer\">Factory Pattern</a> and/or the <a href=\"https://en.wikipedia.org/wiki/Strategy_pattern\" rel=\"nofollow noreferrer\">Strategy Pattern</a> to get an idea of how to implement them more effectively.  Alternatively, you could try something like this using a provider to handle the process request internally.</p>\n<h4>New Supports Interface</h4>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Processes&lt;T&gt;\n{\n  boolean processes(T object);\n}\n</code></pre>\n<h4>Processor</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic abstract class Processor&lt;U extends BaseEntity&gt; implements Processes&lt;Object&gt;\n{\n  public abstract void process(U entity);\n}\n</code></pre>\n<h4>Implementation</h4>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class OrderProcessor extends Processor&lt;Order&gt;\n{\n  @Qualifier(&quot;order&quot;)\n  BaseRepository&lt;Order&gt; repository;\n\n  public OrderProcessor(BaseRepository&lt;Order&gt; repository)\n  {\n    this.repository = repository;\n  }\n\n  @Override\n  public boolean supports(Object object)\n  {\n    return object instanceof Order;\n  }\n\n  @Override\n  public void process(Order order)\n  {\n    /// ... do process stuff\n  }\n}\n</code></pre>\n<h3>Spring Autowired List with Provider</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic static class ProcessorProvider\n{\n  @Autowired\n  List&lt;Processor&lt;? extends BaseEntity&gt;&gt; processors;\n\n  public &lt;T extends BaseEntity&gt; void process(T type)\n  {\n    var processor = processors.stream().filter(proc -&gt; proc.processes(type)).findFirst();\n\n    processor.ifPresent(proc -&gt; process(proc, type));\n  }\n\n  private &lt;T extends BaseEntity&gt; void process(Processor&lt;? extends BaseEntity&gt; processor, T type)\n  {\n    if (processor instanceof OrderProcessor) {\n      ((OrderProcessor) processor).process((Order) type);\n    }\n    else if (processor instanceof FaultProcessor) {\n      ((FaultProcessor) processor).process((Fault) type);\n    }\n  }\n}\n</code></pre>\n<p>Now you can call the ProcessorProvider from your implementing code</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n  \n  SpringscratchApplication.ProcessorProvider provider;\n\n  public MyService(SpringscratchApplication.ProcessorProvider provider) {\n    this.provider = provider;\n  }\n\n  public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\n\n    input.get(&quot;ORDERS&quot;).forEach(order -&gt; provider.process(order));\n    input.get(&quot;FAULTS&quot;).forEach(order -&gt; provider.process(order));\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":15886,"reputation":457,"user_id":34026,"accept_rate":22,"display_name":"cdoe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681246365,"creation_date":1681230777,"question_id":75988195,"body_markdown":"I&#39;ve a spring application that deals with two types of objects - orders and faults. Most of the processing is same for both type of objects, but they are queried from different tables. So, I&#39;ve done something like this\r\n\r\n    @Service\r\n    public class MyService {\r\n        private final Processor&lt;Order&gt; orderProcessor;\r\n        private final Processor&lt;Fault&gt; faultProcessor;\r\n\r\n        public MyService(Processor&lt;Order&gt; orderProcessor, Processor&lt;Fault&gt; faultProcessor) {\r\n\t\t\tthis.orderProcessor = orderProcessor;\r\n\t    \tthis.faultProcessor = faultProcessor;\r\n        }\r\n\t\t\r\n\t    public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\r\n\t\t\t\r\n\t\t  \torderProcessor.process(input.get(&quot;ORDERS&quot;));\r\n\t\t    faultProcessor.process(input.get(&quot;FAULTS&quot;));\r\n        }\r\n    }\r\n\r\nAnd my Processor implementation looks like\r\n\r\n    @Service\r\n    public class Processor&lt;U extends BaseEntity&gt; {\r\n\r\n        private final BaseRespository&lt;U&gt; repository;\r\n\t\r\n    \tpublic Processor(BaseRespository&lt;U&gt; repository) {\r\n\t    \tthis.repository = repository;\r\n    \t}\r\n\t\r\n\t    public void process() {\r\n\t\t    //query the repository and do something\r\n\t    }\r\n    }\r\n\r\nAnd my repositories are\r\n\r\n    @NoRepositoryBean\r\n    public interface BaseRepository&lt;T extends BaseEntity&gt; extends CrudRepository&lt;T, Key&gt; {\r\n        @Transactional\r\n        List&lt;T&gt; findAll(String id);\r\n    }\r\n\r\n    @Repository(&quot;order&quot;)\r\n    public interface OrderRepository extends BaseRepository&lt;Order&gt; {}\r\n\r\n    @Repository(&quot;fault&quot;)\r\n    public interface FaultRepository extends BaseRepository&lt;Fault&gt; {}\r\n\r\nHowever, when I start the application, it fails saying &quot;Constructor of Processor required a single bean but two were found&quot;. What could be the issue here?\r\nI&#39;m using Spring Boot 2.7.0 / Spring 5.3.2","title":"How do I autowire based on the generic type?","body":"<p>I've a spring application that deals with two types of objects - orders and faults. Most of the processing is same for both type of objects, but they are queried from different tables. So, I've done something like this</p>\n<pre><code>@Service\npublic class MyService {\n    private final Processor&lt;Order&gt; orderProcessor;\n    private final Processor&lt;Fault&gt; faultProcessor;\n\n    public MyService(Processor&lt;Order&gt; orderProcessor, Processor&lt;Fault&gt; faultProcessor) {\n        this.orderProcessor = orderProcessor;\n        this.faultProcessor = faultProcessor;\n    }\n    \n    public void process(Map&lt;String, List&lt;BaseEntity&gt;&gt; input) {\n        \n        orderProcessor.process(input.get(&quot;ORDERS&quot;));\n        faultProcessor.process(input.get(&quot;FAULTS&quot;));\n    }\n}\n</code></pre>\n<p>And my Processor implementation looks like</p>\n<pre><code>@Service\npublic class Processor&lt;U extends BaseEntity&gt; {\n\n    private final BaseRespository&lt;U&gt; repository;\n\n    public Processor(BaseRespository&lt;U&gt; repository) {\n        this.repository = repository;\n    }\n\n    public void process() {\n        //query the repository and do something\n    }\n}\n</code></pre>\n<p>And my repositories are</p>\n<pre><code>@NoRepositoryBean\npublic interface BaseRepository&lt;T extends BaseEntity&gt; extends CrudRepository&lt;T, Key&gt; {\n    @Transactional\n    List&lt;T&gt; findAll(String id);\n}\n\n@Repository(&quot;order&quot;)\npublic interface OrderRepository extends BaseRepository&lt;Order&gt; {}\n\n@Repository(&quot;fault&quot;)\npublic interface FaultRepository extends BaseRepository&lt;Fault&gt; {}\n</code></pre>\n<p>However, when I start the application, it fails saying &quot;Constructor of Processor required a single bean but two were found&quot;. What could be the issue here?\nI'm using Spring Boot 2.7.0 / Spring 5.3.2</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":20115761,"reputation":15,"user_id":14751264,"display_name":"Sude"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1680857553,"creation_date":1680857553,"answer_id":75956909,"question_id":75956864,"body_markdown":"So I found a solution :\r\n\r\n    import enigma.console.TextAttributes;\r\n\r\nso this &quot;TextAttributes&quot; adds text colors like this:\r\n\r\n    public TextAttributes Pcolor=new TextAttributes(Color.RED);\r\n\r\nthis code adds red color when implement a console char or string, I mean:\r\n\r\n    cn.getTextWindow().output(px,py,&#39;P&#39;,Pcolor);\r\n\r\nlike this and ta da, our char is ready and it&#39;s red!!","title":"How can I change text color in java with using Enigma library?","body":"<p>So I found a solution :</p>\n<pre><code>import enigma.console.TextAttributes;\n</code></pre>\n<p>so this &quot;TextAttributes&quot; adds text colors like this:</p>\n<pre><code>public TextAttributes Pcolor=new TextAttributes(Color.RED);\n</code></pre>\n<p>this code adds red color when implement a console char or string, I mean:</p>\n<pre><code>cn.getTextWindow().output(px,py,'P',Pcolor);\n</code></pre>\n<p>like this and ta da, our char is ready and it's red!!</p>\n"},{"tags":[],"owner":{"account_id":24288619,"reputation":11,"user_id":18234010,"display_name":"southstarangel"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1681246345,"creation_date":1681246303,"answer_id":75990049,"question_id":75956864,"body_markdown":"You can also do this with simple `system.out.println()`. But if you must use Enigma, the above solution you also provided works well.\r\n\r\nUsing these:  \r\n`public static final String ANSI_RESET = &quot;\\u001B[0m&quot;;`\r\n\r\n`public static final String ANSI_BLACK = &quot;\\u001B[30m&quot;;` // the color codes are the strings.\r\n\r\nWhich you can then use like this: `System.out.println(ANSI_BLACK + &quot;your string&quot; + ANSI_RESET);`\r\n\r\nYou MUST use ANSI_RESET at the end or it will apply the color to all print outputs.\r\n\r\nHere are all the color codes:  \r\n`public static final String ANSI_RESET = &quot;\\u001B[0m&quot;;`  \r\n`public static final String ANSI_BLACK = &quot;\\u001B[30m&quot;;`  \r\n`public static final String ANSI_RED = &quot;\\u001B[31m&quot;;`  \r\n`public static final String ANSI_GREEN = &quot;\\u001B[32m&quot;;`  \r\n`public static final String ANSI_YELLOW = &quot;\\u001B[33m&quot;;`  \r\n`public static final String ANSI_BLUE = &quot;\\u001B[34m&quot;;`  \r\n`public static final String ANSI_PURPLE = &quot;\\u001B[35m&quot;;`  \r\n`public static final String ANSI_CYAN = &quot;\\u001B[36m&quot;;`  \r\n`public static final String ANSI_WHITE = &quot;\\u001B[37m&quot;;`\r\n\r\nNote: By the way, we are doing the same &quot;Gravity&quot; game project from the same university.\r\nBest of luck to both of us :)  ","title":"How can I change text color in java with using Enigma library?","body":"<p>You can also do this with simple <code>system.out.println()</code>. But if you must use Enigma, the above solution you also provided works well.</p>\n<p>Using these:<br />\n<code>public static final String ANSI_RESET = &quot;\\u001B[0m&quot;;</code></p>\n<p><code>public static final String ANSI_BLACK = &quot;\\u001B[30m&quot;;</code> // the color codes are the strings.</p>\n<p>Which you can then use like this: <code>System.out.println(ANSI_BLACK + &quot;your string&quot; + ANSI_RESET);</code></p>\n<p>You MUST use ANSI_RESET at the end or it will apply the color to all print outputs.</p>\n<p>Here are all the color codes:<br />\n<code>public static final String ANSI_RESET = &quot;\\u001B[0m&quot;;</code><br />\n<code>public static final String ANSI_BLACK = &quot;\\u001B[30m&quot;;</code><br />\n<code>public static final String ANSI_RED = &quot;\\u001B[31m&quot;;</code><br />\n<code>public static final String ANSI_GREEN = &quot;\\u001B[32m&quot;;</code><br />\n<code>public static final String ANSI_YELLOW = &quot;\\u001B[33m&quot;;</code><br />\n<code>public static final String ANSI_BLUE = &quot;\\u001B[34m&quot;;</code><br />\n<code>public static final String ANSI_PURPLE = &quot;\\u001B[35m&quot;;</code><br />\n<code>public static final String ANSI_CYAN = &quot;\\u001B[36m&quot;;</code><br />\n<code>public static final String ANSI_WHITE = &quot;\\u001B[37m&quot;;</code></p>\n<p>Note: By the way, we are doing the same &quot;Gravity&quot; game project from the same university.\nBest of luck to both of us :)</p>\n"}],"owner":{"account_id":20115761,"reputation":15,"user_id":14751264,"display_name":"Sude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75956909,"answer_count":2,"score":0,"last_activity_date":1681246345,"creation_date":1680857180,"question_id":75956864,"body_markdown":"So I have to use Enigma console in my project and interface is so complicatied so I have to use colors but I don&#39;t now how to use those for Enigma interface. There is the sample code:\r\n\r\n    import enigma.core.Enigma;\r\n    import enigma.event.TextMouseListener;\r\n    \r\n    public enigma.console.Console cn = Enigma.getConsole(&quot;Mouse and Keyboard&quot;);\r\n    cn.getTextWindow().output(px,py,&#39;P&#39;);\r\n\r\nI couldn&#39;t do anything because I don&#39;t know. I searched the same problem in stackoverflow but this is one of a kind problem.","title":"How can I change text color in java with using Enigma library?","body":"<p>So I have to use Enigma console in my project and interface is so complicatied so I have to use colors but I don't now how to use those for Enigma interface. There is the sample code:</p>\n<pre><code>import enigma.core.Enigma;\nimport enigma.event.TextMouseListener;\n\npublic enigma.console.Console cn = Enigma.getConsole(&quot;Mouse and Keyboard&quot;);\ncn.getTextWindow().output(px,py,'P');\n</code></pre>\n<p>I couldn't do anything because I don't know. I searched the same problem in stackoverflow but this is one of a kind problem.</p>\n"},{"tags":["java","spring","spring-boot","kotlin","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1680995667,"post_id":75961771,"comment_id":133988621,"body_markdown":"Where is your main function? I dont see it in your tree","body":"Where is your main function? I dont see it in your tree"},{"owner":{"account_id":131138,"reputation":55,"user_id":330922,"display_name":"Richard N."},"score":0,"creation_date":1681063907,"post_id":75961771,"comment_id":133995180,"body_markdown":"@Toerktumlare It&#39;s located in the HappyEventsApplication.kt file. Will add the content for that file as well.","body":"@Toerktumlare It&#39;s located in the HappyEventsApplication.kt file. Will add the content for that file as well."}],"answers":[{"tags":[],"owner":{"account_id":131138,"reputation":55,"user_id":330922,"display_name":"Richard N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681246139,"creation_date":1681246139,"answer_id":75990029,"question_id":75961771,"body_markdown":"I needed to add ```@Import(SecurityConfig::class)``` to my EventControllerTest class.","title":"Custom Security filter chain is not used","body":"<p>I needed to add <code>@Import(SecurityConfig::class)</code> to my EventControllerTest class.</p>\n"}],"owner":{"account_id":131138,"reputation":55,"user_id":330922,"display_name":"Richard N."},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75990029,"answer_count":1,"score":0,"last_activity_date":1681246139,"creation_date":1680899861,"question_id":75961771,"body_markdown":"Fixed it by adding @Import(SecurityConfig::class) to my EventControllerTest.\r\n\r\nI have the following controller in a Spring Boot 3 application using Kotlin:\r\n\r\n```\r\ndata class EventRequest(\r\n    val name: String\r\n)\r\n\r\ndata class EventResponse(\r\n    val name: String\r\n)\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api/v1/events&quot;)\r\nclass EventController {\r\n\r\n    @PostMapping\r\n    @ResponseStatus(HttpStatus.CREATED)\r\n    fun addEvent(@RequestBody event: EventRequest): EventResponse {\r\n        return EventResponse(name = event.name)\r\n    }\r\n}\r\n```\r\n\r\nAnd the following security config:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\nclass SecurityConfig {\r\n\r\n    @Bean\r\n    @Throws(Exception::class)\r\n    fun customSecurityFilterChain(http: HttpSecurity): SecurityFilterChain {\r\n        http\r\n            .csrf().disable()\r\n            .formLogin().disable()\r\n            .authorizeHttpRequests().requestMatchers(&quot;/api/**&quot;).permitAll()\r\n        return http.build()\r\n    }\r\n}\r\n```\r\n\r\nAnd the following test:\r\n\r\n```\r\n@WebMvcTest\r\nclass EventControllerTest {\r\n\r\n    @Autowired\r\n    private lateinit var mockMvc: MockMvc\r\n\r\n    @Autowired\r\n    private lateinit var objectMapper: ObjectMapper\r\n\r\n    @Test\r\n    fun `add event successfully`() {\r\n        val event = EventRequest(name = &quot;My event&quot;)\r\n        val body = objectMapper.writeValueAsString(event)\r\n\r\n        this.mockMvc\r\n            .perform(\r\n                post(&quot;/api/v1/events&quot;)\r\n\r\n                    .content(body)\r\n                    .contentType(MediaType.APPLICATION_JSON))\r\n            .andExpect(status().isCreated)\r\n    }\r\n}\r\n```\r\n\r\nThe test fails with this message: ```Status expected:&lt;201&gt; but was:&lt;403&gt;```\r\n\r\nAnd with this in the log: \r\n\r\n```\r\n2023-04-07T22:27:23.343+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : Starting EventControllerTest using Java 17.0.6 with PID 94918 (started by ricn in /Users/ricn/src/spring/happy-events)\r\n2023-04-07T22:27:23.344+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-04-07T22:27:23.779+02:00 TRACE 94918 --- [    Test worker] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@5af64ce0}\r\n2023-04-07T22:27:23.782+02:00  WARN 94918 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : \r\n\r\nUsing generated security password: cad9d91c-b1b9-451a-a8e6-967f744395a9\r\n\r\nThis generated password is for development use only. Your security configuration must be updated before running your application in production.\r\n\r\n2023-04-07T22:27:23.840+02:00  INFO 94918 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@245253d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12417468, org.springframework.security.web.context.SecurityContextHolderFilter@2bb41f5c, org.springframework.security.web.header.HeaderWriterFilter@4f281aaf, org.springframework.security.web.csrf.CsrfFilter@7f73ce28, org.springframework.security.web.authentication.logout.LogoutFilter@61191222, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@27dc627a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5921b93c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@459003a0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@359066bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da635c0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79a13920, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d325518, org.springframework.security.web.access.ExceptionTranslationFilter@4d93f75b, org.springframework.security.web.access.intercept.AuthorizationFilter@77724cbe]\r\n2023-04-07T22:27:23.869+02:00  INFO 94918 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet &#39;&#39;\r\n2023-04-07T22:27:23.869+02:00  INFO 94918 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet &#39;&#39;\r\n2023-04-07T22:27:23.870+02:00  INFO 94918 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms\r\n2023-04-07T22:27:23.883+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : Started EventControllerTest in 0.673 seconds (process running for 1.152)\r\n2023-04-07T22:27:24.091+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@245253d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12417468, org.springframework.security.web.context.SecurityContextHolderFilter@2bb41f5c, org.springframework.security.web.header.HeaderWriterFilter@4f281aaf, org.springframework.security.web.csrf.CsrfFilter@7f73ce28, org.springframework.security.web.authentication.logout.LogoutFilter@61191222, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@27dc627a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5921b93c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@459003a0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@359066bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da635c0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79a13920, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d325518, org.springframework.security.web.access.ExceptionTranslationFilter@4d93f75b, org.springframework.security.web.access.intercept.AuthorizationFilter@77724cbe]] (1/1)\r\n2023-04-07T22:27:24.091+02:00 DEBUG 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/events\r\n2023-04-07T22:27:24.092+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\r\n2023-04-07T22:27:24.092+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\r\n2023-04-07T22:27:24.093+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\r\n2023-04-07T22:27:24.093+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\r\n2023-04-07T22:27:24.094+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\r\n2023-04-07T22:27:24.095+02:00 DEBUG 94918 --- [    Test worker] o.s.security.web.csrf.CsrfFilter         : Invalid CSRF token found for http://localhost/api/v1/events\r\n2023-04-07T22:27:24.096+02:00 DEBUG 94918 --- [    Test worker] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\r\n2023-04-07T22:27:24.096+02:00 TRACE 94918 --- [    Test worker] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\r\n\r\nMockHttpServletRequest:\r\n      HTTP Method = POST\r\n      Request URI = /api/v1/events\r\n       Parameters = {}\r\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;19&quot;]\r\n             Body = {&quot;name&quot;:&quot;My event&quot;}\r\n    Session Attrs = {org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN=org.springframework.security.web.csrf.DefaultCsrfToken@49c83262}\r\n\r\nHandler:\r\n             Type = null\r\n\r\nAsync:\r\n    Async started = false\r\n     Async result = null\r\n\r\nResolved Exception:\r\n             Type = null\r\n\r\nModelAndView:\r\n        View name = null\r\n             View = null\r\n            Model = null\r\n\r\nFlashMap:\r\n       Attributes = null\r\n\r\nMockHttpServletResponse:\r\n           Status = 403\r\n    Error message = Forbidden\r\n          Headers = [X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\r\n     Content type = null\r\n             Body = \r\n    Forwarded URL = null\r\n   Redirected URL = null\r\n          Cookies = []\r\n\r\n```\r\n\r\nTo me it looks like my custom security filter chain is not loaded because ```Invalid CSRF token found for http://localhost/api/v1/events```is logged but I&#39;ve disabled it.\r\n\r\nI have also tried to debug the application and set a breakpoint in the customSecurityFilterChain method but application never stops there.\r\n\r\nThe same thing happens if I run the application and perform a POST request manually.\r\n\r\nAny ideas?\r\n\r\nUpdate with folder structure:\r\n\r\n```\r\ntree\r\n.\r\n├── main\r\n│&#160;&#160; ├── kotlin\r\n│&#160;&#160; │&#160;&#160; └── dev\r\n│&#160;&#160; │&#160;&#160;     └── nystrom\r\n│&#160;&#160; │&#160;&#160;         └── happyevents\r\n│&#160;&#160; │&#160;&#160;             ├── HappyEventsApplication.kt\r\n│&#160;&#160; │&#160;&#160;             ├── config\r\n│&#160;&#160; │&#160;&#160;             │&#160;&#160; └── SecurityConfig.kt\r\n│&#160;&#160; │&#160;&#160;             └── controllers\r\n│&#160;&#160; │&#160;&#160;                 └── EventController.kt\r\n│&#160;&#160; └── resources\r\n│&#160;&#160;     ├── application.properties\r\n│&#160;&#160;     ├── db\r\n│&#160;&#160;     │&#160;&#160; └── changelog\r\n│&#160;&#160;     │&#160;&#160;     └── db.changelog-master.yaml\r\n│&#160;&#160;     ├── static\r\n│&#160;&#160;     └── templates\r\n└── test\r\n    └── kotlin\r\n        └── dev\r\n            └── nystrom\r\n                └── happyevents\r\n                    ├── HappyEventsApplicationTests.kt\r\n                    └── controllers\r\n                        └── EventControllerTest.kt\r\n```\r\n\r\nbuild.gradle.kts:\r\n\r\n```\r\nimport org.jetbrains.kotlin.gradle.tasks.KotlinCompile\r\n\r\nplugins {\r\n    id(&quot;org.springframework.boot&quot;) version &quot;3.0.5&quot;\r\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\r\n    kotlin(&quot;jvm&quot;) version &quot;1.8.10&quot;\r\n    kotlin(&quot;plugin.spring&quot;) version &quot;1.8.10&quot;\r\n}\r\n\r\ngroup = &quot;dev.nystrom&quot;\r\nversion = &quot;0.0.1-SNAPSHOT&quot;\r\njava.sourceCompatibility = JavaVersion.VERSION_17\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jdbc&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-security&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\r\n    implementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\r\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\r\n    implementation(&quot;org.liquibase:liquibase-core&quot;)\r\n    implementation(&quot;org.springframework.session:spring-session-core&quot;)\r\n    implementation(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&quot;)\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\r\n    developmentOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\r\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\r\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\r\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\r\n}\r\n\r\ntasks.withType&lt;KotlinCompile&gt; {\r\n    kotlinOptions {\r\n        freeCompilerArgs = listOf(&quot;-Xjsr305=strict&quot;)\r\n        jvmTarget = &quot;17&quot;\r\n    }\r\n}\r\n\r\ntasks.withType&lt;Test&gt; {\r\n    useJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nHappyEventsApplication.kt:\r\n\r\n```\r\npackage dev.nystrom.happyevents\r\n\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication\r\nimport org.springframework.boot.runApplication\r\n\r\n@SpringBootApplication\r\nclass HappyEventsApplication\r\n\r\nfun main(args: Array&lt;String&gt;) {\r\n    runApplication&lt;HappyEventsApplication&gt;(*args)\r\n}\r\n```","title":"Custom Security filter chain is not used","body":"<p>Fixed it by adding @Import(SecurityConfig::class) to my EventControllerTest.</p>\n<p>I have the following controller in a Spring Boot 3 application using Kotlin:</p>\n<pre><code>data class EventRequest(\n    val name: String\n)\n\ndata class EventResponse(\n    val name: String\n)\n\n@RestController\n@RequestMapping(&quot;/api/v1/events&quot;)\nclass EventController {\n\n    @PostMapping\n    @ResponseStatus(HttpStatus.CREATED)\n    fun addEvent(@RequestBody event: EventRequest): EventResponse {\n        return EventResponse(name = event.name)\n    }\n}\n</code></pre>\n<p>And the following security config:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\nclass SecurityConfig {\n\n    @Bean\n    @Throws(Exception::class)\n    fun customSecurityFilterChain(http: HttpSecurity): SecurityFilterChain {\n        http\n            .csrf().disable()\n            .formLogin().disable()\n            .authorizeHttpRequests().requestMatchers(&quot;/api/**&quot;).permitAll()\n        return http.build()\n    }\n}\n</code></pre>\n<p>And the following test:</p>\n<pre><code>@WebMvcTest\nclass EventControllerTest {\n\n    @Autowired\n    private lateinit var mockMvc: MockMvc\n\n    @Autowired\n    private lateinit var objectMapper: ObjectMapper\n\n    @Test\n    fun `add event successfully`() {\n        val event = EventRequest(name = &quot;My event&quot;)\n        val body = objectMapper.writeValueAsString(event)\n\n        this.mockMvc\n            .perform(\n                post(&quot;/api/v1/events&quot;)\n\n                    .content(body)\n                    .contentType(MediaType.APPLICATION_JSON))\n            .andExpect(status().isCreated)\n    }\n}\n</code></pre>\n<p>The test fails with this message: <code>Status expected:&lt;201&gt; but was:&lt;403&gt;</code></p>\n<p>And with this in the log:</p>\n<pre><code>2023-04-07T22:27:23.343+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : Starting EventControllerTest using Java 17.0.6 with PID 94918 (started by ricn in /Users/ricn/src/spring/happy-events)\n2023-04-07T22:27:23.344+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-04-07T22:27:23.779+02:00 TRACE 94918 --- [    Test worker] eGlobalAuthenticationAutowiredConfigurer : Eagerly initializing {org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration=org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration$WebSecurityEnablerConfiguration@5af64ce0}\n2023-04-07T22:27:23.782+02:00  WARN 94918 --- [    Test worker] .s.s.UserDetailsServiceAutoConfiguration : \n\nUsing generated security password: cad9d91c-b1b9-451a-a8e6-967f744395a9\n\nThis generated password is for development use only. Your security configuration must be updated before running your application in production.\n\n2023-04-07T22:27:23.840+02:00  INFO 94918 --- [    Test worker] o.s.s.web.DefaultSecurityFilterChain     : Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@245253d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12417468, org.springframework.security.web.context.SecurityContextHolderFilter@2bb41f5c, org.springframework.security.web.header.HeaderWriterFilter@4f281aaf, org.springframework.security.web.csrf.CsrfFilter@7f73ce28, org.springframework.security.web.authentication.logout.LogoutFilter@61191222, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@27dc627a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5921b93c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@459003a0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@359066bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da635c0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79a13920, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d325518, org.springframework.security.web.access.ExceptionTranslationFilter@4d93f75b, org.springframework.security.web.access.intercept.AuthorizationFilter@77724cbe]\n2023-04-07T22:27:23.869+02:00  INFO 94918 --- [    Test worker] o.s.b.t.m.w.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''\n2023-04-07T22:27:23.869+02:00  INFO 94918 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Initializing Servlet ''\n2023-04-07T22:27:23.870+02:00  INFO 94918 --- [    Test worker] o.s.t.web.servlet.TestDispatcherServlet  : Completed initialization in 1 ms\n2023-04-07T22:27:23.883+02:00  INFO 94918 --- [    Test worker] d.n.h.controller.EventControllerTest     : Started EventControllerTest in 0.673 seconds (process running for 1.152)\n2023-04-07T22:27:24.091+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@245253d8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@12417468, org.springframework.security.web.context.SecurityContextHolderFilter@2bb41f5c, org.springframework.security.web.header.HeaderWriterFilter@4f281aaf, org.springframework.security.web.csrf.CsrfFilter@7f73ce28, org.springframework.security.web.authentication.logout.LogoutFilter@61191222, org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter@27dc627a, org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter@5921b93c, org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter@459003a0, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@359066bc, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7da635c0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@79a13920, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d325518, org.springframework.security.web.access.ExceptionTranslationFilter@4d93f75b, org.springframework.security.web.access.intercept.AuthorizationFilter@77724cbe]] (1/1)\n2023-04-07T22:27:24.091+02:00 DEBUG 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Securing POST /api/v1/events\n2023-04-07T22:27:24.092+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/15)\n2023-04-07T22:27:24.092+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/15)\n2023-04-07T22:27:24.093+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/15)\n2023-04-07T22:27:24.093+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/15)\n2023-04-07T22:27:24.094+02:00 TRACE 94918 --- [    Test worker] o.s.security.web.FilterChainProxy        : Invoking CsrfFilter (5/15)\n2023-04-07T22:27:24.095+02:00 DEBUG 94918 --- [    Test worker] o.s.security.web.csrf.CsrfFilter         : Invalid CSRF token found for http://localhost/api/v1/events\n2023-04-07T22:27:24.096+02:00 DEBUG 94918 --- [    Test worker] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\n2023-04-07T22:27:24.096+02:00 TRACE 94918 --- [    Test worker] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]\n\nMockHttpServletRequest:\n      HTTP Method = POST\n      Request URI = /api/v1/events\n       Parameters = {}\n          Headers = [Content-Type:&quot;application/json;charset=UTF-8&quot;, Content-Length:&quot;19&quot;]\n             Body = {&quot;name&quot;:&quot;My event&quot;}\n    Session Attrs = {org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN=org.springframework.security.web.csrf.DefaultCsrfToken@49c83262}\n\nHandler:\n             Type = null\n\nAsync:\n    Async started = false\n     Async result = null\n\nResolved Exception:\n             Type = null\n\nModelAndView:\n        View name = null\n             View = null\n            Model = null\n\nFlashMap:\n       Attributes = null\n\nMockHttpServletResponse:\n           Status = 403\n    Error message = Forbidden\n          Headers = [X-Content-Type-Options:&quot;nosniff&quot;, X-XSS-Protection:&quot;0&quot;, Cache-Control:&quot;no-cache, no-store, max-age=0, must-revalidate&quot;, Pragma:&quot;no-cache&quot;, Expires:&quot;0&quot;, X-Frame-Options:&quot;DENY&quot;]\n     Content type = null\n             Body = \n    Forwarded URL = null\n   Redirected URL = null\n          Cookies = []\n\n</code></pre>\n<p>To me it looks like my custom security filter chain is not loaded because <code>Invalid CSRF token found for http://localhost/api/v1/events</code>is logged but I've disabled it.</p>\n<p>I have also tried to debug the application and set a breakpoint in the customSecurityFilterChain method but application never stops there.</p>\n<p>The same thing happens if I run the application and perform a POST request manually.</p>\n<p>Any ideas?</p>\n<p>Update with folder structure:</p>\n<pre><code>tree\n.\n├── main\n│   ├── kotlin\n│   │   └── dev\n│   │       └── nystrom\n│   │           └── happyevents\n│   │               ├── HappyEventsApplication.kt\n│   │               ├── config\n│   │               │   └── SecurityConfig.kt\n│   │               └── controllers\n│   │                   └── EventController.kt\n│   └── resources\n│       ├── application.properties\n│       ├── db\n│       │   └── changelog\n│       │       └── db.changelog-master.yaml\n│       ├── static\n│       └── templates\n└── test\n    └── kotlin\n        └── dev\n            └── nystrom\n                └── happyevents\n                    ├── HappyEventsApplicationTests.kt\n                    └── controllers\n                        └── EventControllerTest.kt\n</code></pre>\n<p>build.gradle.kts:</p>\n<pre><code>import org.jetbrains.kotlin.gradle.tasks.KotlinCompile\n\nplugins {\n    id(&quot;org.springframework.boot&quot;) version &quot;3.0.5&quot;\n    id(&quot;io.spring.dependency-management&quot;) version &quot;1.1.0&quot;\n    kotlin(&quot;jvm&quot;) version &quot;1.8.10&quot;\n    kotlin(&quot;plugin.spring&quot;) version &quot;1.8.10&quot;\n}\n\ngroup = &quot;dev.nystrom&quot;\nversion = &quot;0.0.1-SNAPSHOT&quot;\njava.sourceCompatibility = JavaVersion.VERSION_17\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(&quot;org.springframework.boot:spring-boot-starter-data-jdbc&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-oauth2-client&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-security&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-web&quot;)\n    implementation(&quot;com.fasterxml.jackson.module:jackson-module-kotlin&quot;)\n    implementation(&quot;org.jetbrains.kotlin:kotlin-reflect&quot;)\n    implementation(&quot;org.liquibase:liquibase-core&quot;)\n    implementation(&quot;org.springframework.session:spring-session-core&quot;)\n    implementation(&quot;org.thymeleaf.extras:thymeleaf-extras-springsecurity6&quot;)\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\n    developmentOnly(&quot;org.springframework.boot:spring-boot-devtools&quot;)\n    runtimeOnly(&quot;org.postgresql:postgresql&quot;)\n    testImplementation(&quot;org.springframework.boot:spring-boot-starter-test&quot;)\n    testImplementation(&quot;org.springframework.security:spring-security-test&quot;)\n}\n\ntasks.withType&lt;KotlinCompile&gt; {\n    kotlinOptions {\n        freeCompilerArgs = listOf(&quot;-Xjsr305=strict&quot;)\n        jvmTarget = &quot;17&quot;\n    }\n}\n\ntasks.withType&lt;Test&gt; {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>HappyEventsApplication.kt:</p>\n<pre><code>package dev.nystrom.happyevents\n\nimport org.springframework.boot.autoconfigure.SpringBootApplication\nimport org.springframework.boot.runApplication\n\n@SpringBootApplication\nclass HappyEventsApplication\n\nfun main(args: Array&lt;String&gt;) {\n    runApplication&lt;HappyEventsApplication&gt;(*args)\n}\n</code></pre>\n"},{"tags":["java","code-duplication","redundancy","anti-patterns"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1681239121,"post_id":75989144,"comment_id":134023625,"body_markdown":"Without much context it&#39;s difficult to help. At the very least it seems like there&#39;s a missing list abstraction that can accept a `foo` interface to operate on.","body":"Without much context it&#39;s difficult to help. At the very least it seems like there&#39;s a missing list abstraction that can accept a <code>foo</code> interface to operate on."}],"answers":[{"tags":[],"owner":{"account_id":15899656,"reputation":86,"user_id":11472422,"display_name":"Chase C"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681239777,"creation_date":1681239467,"answer_id":75989267,"question_id":75989144,"body_markdown":"The way I handle functions that do the same thing, but slightly different, is like this:\r\n\r\n```java\r\nreduceByFoo1(arg1,arg2,arg3){\r\n   // do common operation\r\n   foo1(arg1, arg2, arg3);\r\n   // do stuff\r\n}\r\n\r\n\r\nreduceByFoo2(arg1,arg2,arg3){\r\n   // do common operation\r\n   foo2(arg1, arg2, arg3);\r\n   // do stuff\r\n}\r\n```\r\nIn other programming languages, we can pass functions as arguments, but Java is slightly different. [Check out this post](https://stackoverflow.com/questions/2186931/java-pass-method-as-parameter) for passing methods as parameters. \r\n\r\nBut what I would do is this:\r\n```java\r\npublic void reduce(arg1, arg2, arg3, someFunc) {\r\n   // do common operation\r\n   someFunc(arg1, arg2, arg3);\r\n   // do common operation\r\n}\r\n```\r\nbased on the info from the mentioned SO post.\r\n\r\nThe, you can just call reduce with the specified function like:\r\n```java\r\nreduceByFoo1(arg1,arg2,arg3){\r\n   // do common operation\r\n   reduce(arg1, arg2, arg3, foo1);\r\n   // do stuff\r\n}\r\n\r\n\r\nreduceByFoo2(arg1,arg2,arg3){\r\n   // do common operation\r\n   reduce(arg1, arg2, arg3, foo2);\r\n   // do stuff\r\n}\r\n```\r\n\r\nEdited to add:\r\n[This other post](https://stackoverflow.com/questions/4685563/how-to-pass-a-function-as-a-parameter-in-java) for other ideas that may fit a little better into your request.","title":"Reducing Java code-duplication when iteratively applying an operation on a list until stable","body":"<p>The way I handle functions that do the same thing, but slightly different, is like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>reduceByFoo1(arg1,arg2,arg3){\n   // do common operation\n   foo1(arg1, arg2, arg3);\n   // do stuff\n}\n\n\nreduceByFoo2(arg1,arg2,arg3){\n   // do common operation\n   foo2(arg1, arg2, arg3);\n   // do stuff\n}\n</code></pre>\n<p>In other programming languages, we can pass functions as arguments, but Java is slightly different. <a href=\"https://stackoverflow.com/questions/2186931/java-pass-method-as-parameter\">Check out this post</a> for passing methods as parameters.</p>\n<p>But what I would do is this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void reduce(arg1, arg2, arg3, someFunc) {\n   // do common operation\n   someFunc(arg1, arg2, arg3);\n   // do common operation\n}\n</code></pre>\n<p>based on the info from the mentioned SO post.</p>\n<p>The, you can just call reduce with the specified function like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>reduceByFoo1(arg1,arg2,arg3){\n   // do common operation\n   reduce(arg1, arg2, arg3, foo1);\n   // do stuff\n}\n\n\nreduceByFoo2(arg1,arg2,arg3){\n   // do common operation\n   reduce(arg1, arg2, arg3, foo2);\n   // do stuff\n}\n</code></pre>\n<p>Edited to add:\n<a href=\"https://stackoverflow.com/questions/4685563/how-to-pass-a-function-as-a-parameter-in-java\">This other post</a> for other ideas that may fit a little better into your request.</p>\n"}],"owner":{"account_id":6878045,"reputation":148,"user_id":7560203,"display_name":"Caleb"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75989267,"answer_count":1,"score":0,"last_activity_date":1681245937,"creation_date":1681238528,"question_id":75989144,"body_markdown":"I am attempting to reduce code duplication in my java code. I am not a java expert, so I might be missing something basic. The goal is to operate on a list via several operators, `foo1, foo2, ..., fooN`.\r\n\r\nEach operation is iterated until the list stabilizes (no longer changes by the operation). Each operation consists of a forward pass, and then a backwards pass. The passes are the same, just the list is reversed. Each pass is also iterated until the list stabilizes. It&#39;s important that the operators are applied sequentially, resulting in frustrating code duplication.\r\n\r\nBelow is some pseudo-java showing how it is currently done. Note: the `foo` operations here attempt to modify list `arg1`; they return true if (and only if) a modification to `arg1` occurred.\r\n\r\n```\r\nreduceByFoo1(arg1,arg2,arg3){\r\n        doUpdate = true;\r\n        while(doUpdate) {\r\n            doUpdate = false;\r\n\r\n            doPass = true;\r\n            while(doPass) {\r\n                doPass = foo1(arg1,arg2,arg3);\r\n                doUpdate |= doPass;\r\n            }\r\n            Collections.reverse(arg1);\r\n\r\n            doPass = true;\r\n            while(doPass) {\r\n                doPass = foo1(arg1,arg2,arg3);\r\n                doUpdate |= doPass;\r\n            }\r\n            Collections.reverse(arg1);\r\n        }\r\n    }\r\n\r\nreduceByFoo2(arg1,arg2,arg3){\r\n...same code as above, but with foo2..\r\n}\r\n\r\nreduceByFoo2(arg1,arg2,arg3){\r\n...same code as above, but with foo3..\r\n}\r\n\r\n...and so on...\r\n```\r\n\r\nWhat might be a good way to reduce duplication or improve the design pattern?\r\n\r\nEDIT:\r\nUsing the accepted answer, this is roughly the code I ended up with. Much better now:\r\n\r\n```\r\ninterface Foo {boolean bar(arg1, arg2, arg3);}\r\n\r\nfooUntilStable(foo, arg1, arg2, arg3) = {\r\n    iterate = true;\r\n    updated = false;\r\n    while(iterate) {\r\n        iterate = foo.bar(arg1, arg2, arg3);\r\n        updated |= iterate;\r\n    }\r\n    return updated;\r\n}\r\n\r\nbiFooUntilStable(foo, arg1, arg2, arg3){\r\n    Foo biFoo = (a1, a2, a3) -&gt; {\r\n             updated = fooUntilStable(foo, a1, a2, a3);\r\n             Collections.reverse(a1);\r\n             updated |= fooUntilStable(foo, a1, a2, a3);\r\n             Collections.reverse(a1);\r\n             return updated;\r\n    }\r\n    fooUntilStable(biFoo,arg1,arg2,arg3);\r\n}\r\n\r\nFoo foo1 = (arg1,arg2,arg3) -&gt; {...}\r\nFoo foo2 = (arg1,arg2,arg3) -&gt; {...}\r\n...\r\nFoo fooN = (arg1,arg2,arg3) -&gt; {...}\r\n\r\nbiFooUntilStable(foo1,arg1,arg2,arg3);\r\nbiFooUntilStable(foo2,arg1,arg2,arg3);\r\n...\r\nbiFooUntilStable(fooN,arg1,arg2,arg3);\r\n\r\n```","title":"Reducing Java code-duplication when iteratively applying an operation on a list until stable","body":"<p>I am attempting to reduce code duplication in my java code. I am not a java expert, so I might be missing something basic. The goal is to operate on a list via several operators, <code>foo1, foo2, ..., fooN</code>.</p>\n<p>Each operation is iterated until the list stabilizes (no longer changes by the operation). Each operation consists of a forward pass, and then a backwards pass. The passes are the same, just the list is reversed. Each pass is also iterated until the list stabilizes. It's important that the operators are applied sequentially, resulting in frustrating code duplication.</p>\n<p>Below is some pseudo-java showing how it is currently done. Note: the <code>foo</code> operations here attempt to modify list <code>arg1</code>; they return true if (and only if) a modification to <code>arg1</code> occurred.</p>\n<pre><code>reduceByFoo1(arg1,arg2,arg3){\n        doUpdate = true;\n        while(doUpdate) {\n            doUpdate = false;\n\n            doPass = true;\n            while(doPass) {\n                doPass = foo1(arg1,arg2,arg3);\n                doUpdate |= doPass;\n            }\n            Collections.reverse(arg1);\n\n            doPass = true;\n            while(doPass) {\n                doPass = foo1(arg1,arg2,arg3);\n                doUpdate |= doPass;\n            }\n            Collections.reverse(arg1);\n        }\n    }\n\nreduceByFoo2(arg1,arg2,arg3){\n...same code as above, but with foo2..\n}\n\nreduceByFoo2(arg1,arg2,arg3){\n...same code as above, but with foo3..\n}\n\n...and so on...\n</code></pre>\n<p>What might be a good way to reduce duplication or improve the design pattern?</p>\n<p>EDIT:\nUsing the accepted answer, this is roughly the code I ended up with. Much better now:</p>\n<pre><code>interface Foo {boolean bar(arg1, arg2, arg3);}\n\nfooUntilStable(foo, arg1, arg2, arg3) = {\n    iterate = true;\n    updated = false;\n    while(iterate) {\n        iterate = foo.bar(arg1, arg2, arg3);\n        updated |= iterate;\n    }\n    return updated;\n}\n\nbiFooUntilStable(foo, arg1, arg2, arg3){\n    Foo biFoo = (a1, a2, a3) -&gt; {\n             updated = fooUntilStable(foo, a1, a2, a3);\n             Collections.reverse(a1);\n             updated |= fooUntilStable(foo, a1, a2, a3);\n             Collections.reverse(a1);\n             return updated;\n    }\n    fooUntilStable(biFoo,arg1,arg2,arg3);\n}\n\nFoo foo1 = (arg1,arg2,arg3) -&gt; {...}\nFoo foo2 = (arg1,arg2,arg3) -&gt; {...}\n...\nFoo fooN = (arg1,arg2,arg3) -&gt; {...}\n\nbiFooUntilStable(foo1,arg1,arg2,arg3);\nbiFooUntilStable(foo2,arg1,arg2,arg3);\n...\nbiFooUntilStable(fooN,arg1,arg2,arg3);\n\n</code></pre>\n"},{"tags":["java","java-stream"],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1538123270,"creation_date":1538121746,"answer_id":52550948,"question_id":52550889,"body_markdown":"    List&lt;Integer&gt; intList = Arrays.asList(A).stream()\r\n                                  .flatMap(A -&gt; Stream.of(A.a, A.b))\r\n                                  .collect(Collectors.toList());\r\n    \r\n    List&lt;Integer&gt; reverseIntList = Arrays.asList(A).stream()\r\n                                         .flatMap(A -&gt; Stream.of(A.a, A.b))\r\n                                         .collect(LinkedList::new, LinkedList::addFirst, (res, tmp) -&gt; tmp.forEach(res::addFirst));","title":"Java stream: map object data members to int list","body":"<pre><code>List&lt;Integer&gt; intList = Arrays.asList(A).stream()\n                              .flatMap(A -&gt; Stream.of(A.a, A.b))\n                              .collect(Collectors.toList());\n\nList&lt;Integer&gt; reverseIntList = Arrays.asList(A).stream()\n                                     .flatMap(A -&gt; Stream.of(A.a, A.b))\n                                     .collect(LinkedList::new, LinkedList::addFirst, (res, tmp) -&gt; tmp.forEach(res::addFirst));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3381296,"reputation":5075,"user_id":2838289,"display_name":"LuCio"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1538125104,"creation_date":1538121782,"answer_id":52550958,"question_id":52550889,"body_markdown":"Just create a `Stream` of the integers of `A` and `flatMap` this `Stream` so the integers of `A anA` become part of the outer `Stream`.\r\n\r\n      List&lt;Integer&gt; intList = list.stream()\r\n        .flatMap(anA -&gt; Stream.of(anA.a, anA.b))\r\n        .collect(Collectors.toList());\r\n\r\nEDIT  \r\nYou [asked][1] also for the other way round:\r\n\r\n      IntStream.range(0, intList.size() / 2)\r\n       .mapToObj(i -&gt; new A(intList.get(2*i), intList.get(2*i+1)))\r\n       .collect(Collectors.toList());\r\n\r\nThis implies a constructor in class `A`:\r\n\r\n    A(int a, int b) {\r\n        this.a = a;\r\n        this.b = b;\r\n    }\r\n\r\nA quick test:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        List&lt;A&gt; list = Arrays.asList(new A(1, 2), new A(3, 4), new A(11, 22));\r\n        List&lt;Integer&gt; intList = list.stream().flatMap(anA -&gt; Stream.of(anA.a, anA.b)).collect(Collectors.toList());\r\n        System.out.println(intList);\r\n        List&lt;A&gt; aList = IntStream.range(0, intList.size() / 2).mapToObj(i -&gt; new A(intList.get(2 * i), intList.get(2 * i + 1))).collect(Collectors.toList());\r\n        System.out.println(aList);\r\n    }\r\n\r\nThe output is:\r\n\r\n    [1, 2, 3, 4, 11, 22]\r\n    [[1|2], [3|4], [11|22]]\r\n\r\n  [1]: https://stackoverflow.com/questions/52550889/java-stream-map-object-data-member-to-int-list/52550958#comment92040820_52550958\r\n\r\n\r\n","title":"Java stream: map object data members to int list","body":"<p>Just create a <code>Stream</code> of the integers of <code>A</code> and <code>flatMap</code> this <code>Stream</code> so the integers of <code>A anA</code> become part of the outer <code>Stream</code>.</p>\n\n<pre><code>  List&lt;Integer&gt; intList = list.stream()\n    .flatMap(anA -&gt; Stream.of(anA.a, anA.b))\n    .collect(Collectors.toList());\n</code></pre>\n\n<p>EDIT<br>\nYou <a href=\"https://stackoverflow.com/questions/52550889/java-stream-map-object-data-member-to-int-list/52550958#comment92040820_52550958\">asked</a> also for the other way round:</p>\n\n<pre><code>  IntStream.range(0, intList.size() / 2)\n   .mapToObj(i -&gt; new A(intList.get(2*i), intList.get(2*i+1)))\n   .collect(Collectors.toList());\n</code></pre>\n\n<p>This implies a constructor in class <code>A</code>:</p>\n\n<pre><code>A(int a, int b) {\n    this.a = a;\n    this.b = b;\n}\n</code></pre>\n\n<p>A quick test:</p>\n\n<pre><code>public static void main(String[] args) throws Exception {\n    List&lt;A&gt; list = Arrays.asList(new A(1, 2), new A(3, 4), new A(11, 22));\n    List&lt;Integer&gt; intList = list.stream().flatMap(anA -&gt; Stream.of(anA.a, anA.b)).collect(Collectors.toList());\n    System.out.println(intList);\n    List&lt;A&gt; aList = IntStream.range(0, intList.size() / 2).mapToObj(i -&gt; new A(intList.get(2 * i), intList.get(2 * i + 1))).collect(Collectors.toList());\n    System.out.println(aList);\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>[1, 2, 3, 4, 11, 22]\n[[1|2], [3|4], [11|22]]\n</code></pre>\n"}],"owner":{"account_id":453918,"reputation":2857,"user_id":851185,"accept_rate":79,"display_name":"jean"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3039,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":52550958,"answer_count":2,"score":0,"last_activity_date":1681245890,"creation_date":1538121538,"question_id":52550889,"body_markdown":"I need put the `A.a` and `A.b` to a `int` list in sequence:\r\n\r\n    class A {\r\n        int a;\r\n        int b;\r\n    }\r\n\r\n    A a = new A();\r\n    a.a = 1;\r\n    a.b = 2;\r\n\r\n    List&lt;A&gt; list = Arrays.asList(a);\r\n    List&lt;Integer&gt; intList = list.stream().map(?).collect(Collectors.toList());\r\n    assert intList.equals(Arrays.asList(1,2));\r\n\r\nHow to do this using a Java stream?  \r\nAnd how to do this in reverse?\r\n\r\n### NOTE \r\nBy &quot;*in reverse*&quot; I mean to create a `List&lt;A&gt;` according to `List&lt;Integer&gt;`, because the example code is create `List&lt;Integer&gt;` according to `List&lt;A&gt;`.","title":"Java stream: map object data members to int list","body":"<p>I need put the <code>A.a</code> and <code>A.b</code> to a <code>int</code> list in sequence:</p>\n<pre><code>class A {\n    int a;\n    int b;\n}\n\nA a = new A();\na.a = 1;\na.b = 2;\n\nList&lt;A&gt; list = Arrays.asList(a);\nList&lt;Integer&gt; intList = list.stream().map(?).collect(Collectors.toList());\nassert intList.equals(Arrays.asList(1,2));\n</code></pre>\n<p>How to do this using a Java stream?<br />\nAnd how to do this in reverse?</p>\n<h3>NOTE</h3>\n<p>By &quot;<em>in reverse</em>&quot; I mean to create a <code>List&lt;A&gt;</code> according to <code>List&lt;Integer&gt;</code>, because the example code is create <code>List&lt;Integer&gt;</code> according to <code>List&lt;A&gt;</code>.</p>\n"},{"tags":["java","java-stream","attachment","email-attachments"],"comments":[{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681249579,"post_id":75989977,"comment_id":134025671,"body_markdown":"The web is a better place for a question like this than SO. Also, emailing gigabytes worth of files is not a good idea; the vast majority of email servers will reject such emails.","body":"The web is a better place for a question like this than SO. Also, emailing gigabytes worth of files is not a good idea; the vast majority of email servers will reject such emails."},{"owner":{"account_id":15757876,"reputation":119,"user_id":11370492,"display_name":"underachiever"},"score":0,"creation_date":1681252768,"post_id":75989977,"comment_id":134026092,"body_markdown":"I did search for a long time and haven&#39;t found relevant answers - if not all, most of them point to the use case of streaming the input that loads everything in memory and then writes to a `Datasource` which is different than what I want to achieve. Also, I will be attaching a file that&#39;s about 15 MB in size but the memory issue comes into picture when multiple users trigger the endpoint at the same time to generate the attachment email.","body":"I did search for a long time and haven&#39;t found relevant answers - if not all, most of them point to the use case of streaming the input that loads everything in memory and then writes to a <code>Datasource</code> which is different than what I want to achieve. Also, I will be attaching a file that&#39;s about 15 MB in size but the memory issue comes into picture when multiple users trigger the endpoint at the same time to generate the attachment email."},{"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1681255072,"post_id":75989977,"comment_id":134026355,"body_markdown":"Spamming the mail server will probably just get you banned; it may be smarter to just use a lock to gate the sending so that only a few mails are sent simultaneously.","body":"Spamming the mail server will probably just get you banned; it may be smarter to just use a lock to gate the sending so that only a few mails are sent simultaneously."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1681257681,"post_id":75989977,"comment_id":134026648,"body_markdown":"15MB is just too big for an email really. You&#39;d be better of using something else","body":"15MB is just too big for an email really. You&#39;d be better of using something else"},{"owner":{"account_id":15757876,"reputation":119,"user_id":11370492,"display_name":"underachiever"},"score":0,"creation_date":1681267851,"post_id":75989977,"comment_id":134027561,"body_markdown":"The application/mail-server is currently able to handle the generation of several emails with attachments of size 15 MB. However, there is a notable spike in the memory usage which I&#39;m concerned about. Thus came the thought of streaming the File to a Datasource instead of loading everything in memory.","body":"The application/mail-server is currently able to handle the generation of several emails with attachments of size 15 MB. However, there is a notable spike in the memory usage which I&#39;m concerned about. Thus came the thought of streaming the File to a Datasource instead of loading everything in memory."}],"owner":{"account_id":15757876,"reputation":119,"user_id":11370492,"display_name":"underachiever"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1681245639,"creation_date":1681245639,"question_id":75989977,"body_markdown":"I&#39;m using `simplejavamail` to send emails with attachments. \r\nAs an enhancement, I would like to load the file from the file path in a streaming fashion  and add it as an attachment (just the stream). This way, I want to avoid loading entire file in memory. \r\n\r\nIs there an API that does this already?","title":"Java Stream a file into attachment without holding in memory","body":"<p>I'm using <code>simplejavamail</code> to send emails with attachments.\nAs an enhancement, I would like to load the file from the file path in a streaming fashion  and add it as an attachment (just the stream). This way, I want to avoid loading entire file in memory.</p>\n<p>Is there an API that does this already?</p>\n"},{"tags":["java","plugins","minecraft"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1680289228,"post_id":75898880,"comment_id":133879041,"body_markdown":"Are you sure the plugin.yml file is on the jar file? Do you hvae maven or something?","body":"Are you sure the plugin.yml file is on the jar file? Do you hvae maven or something?"},{"owner":{"account_id":27681716,"reputation":3,"user_id":21130316,"display_name":"知識日常 Know Scratcher"},"score":0,"creation_date":1680390413,"post_id":75898880,"comment_id":133891094,"body_markdown":"No, \n\nplugin.yml\ncom\n-knowscratcher\n--realcraft\n---Realcraft.java","body":"No,   plugin.yml com -knowscratcher --realcraft ---Realcraft.java"}],"answers":[{"tags":[],"owner":{"account_id":19544845,"reputation":100,"user_id":14301911,"display_name":"HappilyCoding"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681245391,"creation_date":1680626556,"answer_id":75931850,"question_id":75898880,"body_markdown":"**If the plugin.yml file isn&#39;t on the jar, bukkit, spigot and paper cannot load the plugin**. You need to make sure to include it in the final jar. You can do it manually, but I don&#39;t recommend it. \r\n\r\n**You should use a project manager to make the plugin.yml automatically included.**\r\n\r\n**Here you can see an example of an extremely simple plugin that uses Maven**: https://github.com/OnyxianSoul/SendConsoleMessage . \r\n\r\nIf you set up your folder structure and pom.xml in the same way, and use maven to build your jar, your plugin jar will include the necessairy files, and will be loaded correctly.\r\n\r\nGood luck\r\n\r\n","title":"Minecraft plugin load failed: java.lang.IllegalArgumentException","body":"<p><strong>If the plugin.yml file isn't on the jar, bukkit, spigot and paper cannot load the plugin</strong>. You need to make sure to include it in the final jar. You can do it manually, but I don't recommend it.</p>\n<p><strong>You should use a project manager to make the plugin.yml automatically included.</strong></p>\n<p><strong>Here you can see an example of an extremely simple plugin that uses Maven</strong>: <a href=\"https://github.com/OnyxianSoul/SendConsoleMessage\" rel=\"nofollow noreferrer\">https://github.com/OnyxianSoul/SendConsoleMessage</a> .</p>\n<p>If you set up your folder structure and pom.xml in the same way, and use maven to build your jar, your plugin jar will include the necessairy files, and will be loaded correctly.</p>\n<p>Good luck</p>\n"}],"owner":{"account_id":27681716,"reputation":3,"user_id":21130316,"display_name":"知識日常 Know Scratcher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":730,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75931850,"answer_count":1,"score":-1,"last_activity_date":1681245391,"creation_date":1680267820,"question_id":75898880,"body_markdown":"I made a basic 1.19 plugin using spigot, and load it with paper. But it says load fail. This is the exception:\r\n\r\n```\r\n[20:50:56 ERROR]: [DirectoryProviderSource] Error loading plugin: File &#39;plugins\\Real_Craft.jar&#39; failed to load!\r\njava.lang.RuntimeException: File &#39;plugins\\Real_Craft.jar&#39; failed to load!\r\n        at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:59) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.lambda$registerProviders$2(DirectoryProviderSource.java:32) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]\r\n        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]\r\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]\r\n        at java.util.Iterator.forEachRemaining(Iterator.java:133) ~[?:?]\r\n        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]\r\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]\r\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]\r\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]\r\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[?:?]\r\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:30) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:14) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at io.papermc.paper.plugin.util.EntrypointUtil.registerProvidersFromSource(EntrypointUtil.java:14) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at io.papermc.paper.plugin.PluginInitializerManager.load(PluginInitializerManager.java:100) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at net.minecraft.server.Main.main(Main.java:126) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at org.bukkit.craftbukkit.Main.main(Main.java:309) ~[paper-1.19.4.jar:git-Paper-483]\r\n        at io.papermc.paperclip.Paperclip.lambda$main$0(Paperclip.java:42) ~[app:?]\r\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\nCaused by: java.lang.IllegalArgumentException: File &#39;plugins\\Real_Craft.jar&#39; is not a valid plugin file, cannot load a plugin from it!\r\n        at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:54) ~[paper-1.19.4.jar:git-Paper-483]\r\n        ... 20 more\r\n```\r\n\r\nI tried to fix it from some ways to fix it, the tutorial I followed is https://www.youtube.com/watch?v=WcFb0GO14zY, and I can&#39;t find errors in my code. here&#39;s my plugin.yml and main script \r\n\r\n```\r\nname: RealCraft\r\nversion: 1.0.0\r\nauthor: knowscratcher\r\nmain: com.knowscratcher.realcraft.RealCraft\r\napi-version: 1.19\r\n```\r\n\r\nand my main script is\r\n\r\n```\r\npackage com.knowscratcher.realcraft;\r\n\r\nimport org.bukkit.ChatColor;\r\nimport org.bukkit.plugin.java.JavaPlugin;\r\n\r\npublic class RealCraft extends JavaPlugin {\r\n\r\n    @Override\r\n    public void onEnable() {\r\n        getServer().getConsoleSender().sendMessage(ChatColor.LIGHT_PURPLE+&quot;[RealCraft]:Plugin is enabled&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void onDisable() {\r\n        getServer().getConsoleSender().sendMessage(ChatColor.RED+&quot;[RealCraft]:Plugin is disabled&quot;);\r\n    }\r\n\r\n}\r\n\r\n```","title":"Minecraft plugin load failed: java.lang.IllegalArgumentException","body":"<p>I made a basic 1.19 plugin using spigot, and load it with paper. But it says load fail. This is the exception:</p>\n<pre><code>[20:50:56 ERROR]: [DirectoryProviderSource] Error loading plugin: File 'plugins\\Real_Craft.jar' failed to load!\njava.lang.RuntimeException: File 'plugins\\Real_Craft.jar' failed to load!\n        at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:59) ~[paper-1.19.4.jar:git-Paper-483]\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.lambda$registerProviders$2(DirectoryProviderSource.java:32) ~[paper-1.19.4.jar:git-Paper-483]\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]\n        at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]\n        at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]\n        at java.util.Iterator.forEachRemaining(Iterator.java:133) ~[?:?]\n        at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845) ~[?:?]\n        at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]\n        at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]\n        at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]\n        at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]\n        at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]\n        at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[?:?]\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:30) ~[paper-1.19.4.jar:git-Paper-483]\n        at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:14) ~[paper-1.19.4.jar:git-Paper-483]\n        at io.papermc.paper.plugin.util.EntrypointUtil.registerProvidersFromSource(EntrypointUtil.java:14) ~[paper-1.19.4.jar:git-Paper-483]\n        at io.papermc.paper.plugin.PluginInitializerManager.load(PluginInitializerManager.java:100) ~[paper-1.19.4.jar:git-Paper-483]\n        at net.minecraft.server.Main.main(Main.java:126) ~[paper-1.19.4.jar:git-Paper-483]\n        at org.bukkit.craftbukkit.Main.main(Main.java:309) ~[paper-1.19.4.jar:git-Paper-483]\n        at io.papermc.paperclip.Paperclip.lambda$main$0(Paperclip.java:42) ~[app:?]\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\nCaused by: java.lang.IllegalArgumentException: File 'plugins\\Real_Craft.jar' is not a valid plugin file, cannot load a plugin from it!\n        at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:54) ~[paper-1.19.4.jar:git-Paper-483]\n        ... 20 more\n</code></pre>\n<p>I tried to fix it from some ways to fix it, the tutorial I followed is <a href=\"https://www.youtube.com/watch?v=WcFb0GO14zY\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=WcFb0GO14zY</a>, and I can't find errors in my code. here's my plugin.yml and main script</p>\n<pre><code>name: RealCraft\nversion: 1.0.0\nauthor: knowscratcher\nmain: com.knowscratcher.realcraft.RealCraft\napi-version: 1.19\n</code></pre>\n<p>and my main script is</p>\n<pre><code>package com.knowscratcher.realcraft;\n\nimport org.bukkit.ChatColor;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic class RealCraft extends JavaPlugin {\n\n    @Override\n    public void onEnable() {\n        getServer().getConsoleSender().sendMessage(ChatColor.LIGHT_PURPLE+&quot;[RealCraft]:Plugin is enabled&quot;);\n    }\n\n    @Override\n    public void onDisable() {\n        getServer().getConsoleSender().sendMessage(ChatColor.RED+&quot;[RealCraft]:Plugin is disabled&quot;);\n    }\n\n}\n\n</code></pre>\n"},{"tags":["java","mysql","jsp","glassfish","jstl"],"owner":{"account_id":11359798,"reputation":1,"user_id":20440311,"display_name":"Callium1456"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1681245739,"answer_count":0,"score":0,"last_activity_date":1681245373,"creation_date":1681244204,"question_id":75989821,"body_markdown":"I have spent about 14 hour trying to retrive data from my, mySQL data base.  No matter what I try I cant make JSTL present data on a simple jsp (yes ive tried adding it to the pom.xml). I&#39;ve tried using glassfish and tomcat both present diffrent errors. Im really lost im going and to present my JSP code and the errors. \r\n\r\n\r\nHere is the code for the jsp using glassfish 7:\r\n```\r\n    &lt;%@ page import=&quot;java.util.List&quot; %&gt;\r\n    &lt;%@ page import =&quot;java.sql.*&quot; %&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n         pageEncoding=&quot;ISO-8859-1&quot; %&gt; \r\n    &lt;%@ taglib uri = &quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;    \r\n    &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; prefix=&quot;sql&quot; %&gt;\r\n    &lt;%\r\n    String id = request.getParameter(&quot;beerio@127.0.0.1&quot;);\r\n    String driver = &quot;com.mysql.jdbc.Driver&quot;;\r\n    String connectionUrl = &quot;jdbc:mysql://127.0.0.1:3306/&quot;;\r\n    String database = &quot;beerio&quot;;\r\n    String userid = &quot;root&quot;;\r\n    String password = &quot;password&quot;;\r\n    try {\r\n        Class.forName(driver);\r\n    } catch (ClassNotFoundException e) {\r\n        e.printStackTrace();\r\n    }\r\n    Connection connection = null;\r\n    Statement statement = null;\r\n    ResultSet resultSet = null; %&gt;\r\n\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n\r\n    &lt;head&gt;\r\n    &lt;title&gt;Beerio&lt;/title&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;\r\n\r\n    &lt;div class=&quot;bg-image&quot;&gt;\r\n        &lt;img src=&quot;https://cdn.discordapp.com/attachments/897055640168587306/1093173959316488203                   /BeerioLogo.png&quot; alt=&quot;Background Image style=margin-top: 100px;&quot;&gt;\r\n    &lt;/div&gt;\r\n    &lt;h1&gt; Beer E-Commerce&lt;/h1&gt;\r\n\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n\r\n    &lt;h1&gt;Retrieve data from database in jsp&lt;/h1&gt;\r\n    &lt;table border=&quot;1&quot;&gt;\r\n    &lt;tr&gt;`your text`\r\n        &lt;td&gt;Beer Name&lt;/td&gt;\r\n        &lt;td&gt;Brewer Name&lt;/td&gt;\r\n        &lt;td&gt;Style&lt;/td&gt;\r\n        &lt;td&gt;Country&lt;/td&gt;\r\n        &lt;td&gt;ABV&lt;/td&gt;\r\n        &lt;td&gt;Price&lt;/td&gt;\r\n\r\n\r\n    &lt;/tr&gt;\r\n    &lt;%\r\n        try{\r\n            connection = DriverManager.getConnection(connectionUrl+database, userid, password);\r\n            statement=connection.createStatement();\r\n            String sql =&quot;select * from beer&quot;;\r\n            resultSet = statement.executeQuery(sql);\r\n            while(resultSet.next()){\r\n    %&gt;\r\n    &lt;tr&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;BEER_NAME_ID&quot;) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;BREWERY_ID&quot;) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;STYLE&quot;) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;COUNTRY&quot;) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getDouble(&quot;ABV&quot;) %&gt;&lt;/td&gt;\r\n        &lt;td&gt;&lt;%=resultSet.getDouble(&quot;PRICE&quot;) %&gt;&lt;/td&gt;\r\n    &lt;/tr&gt;\r\n    &lt;%\r\n            }\r\n            connection.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    %&gt;\r\n    &lt;/table&gt;\r\n\r\n\r\n    &lt;/body&gt;\r\n    \r\n\r\n\r\n```\r\n&lt;/html&gt;\r\n\r\nHere are is the error that i have been trying to decipher:\r\n  Startup of context /beerio7-1.0-SNAPSHOT failed due to previous errors]]\r\n\r\n[2023-04-11T21:04:14.450128+01:00] [GF 7.0.3] [SEVERE] [] [jakarta.enterprise.web.vs.server] [tid: _ThreadID=65 _ThreadName=admin-listener(3)] [levelValue: 1000] [[\r\n  WebModule[/beerio7-1.0-SNAPSHOT]Exception sending context destroyed event to listener instance of class org.jboss.weld.module.web.servlet.WeldListener\r\njava.lang.NullPointerException: Cannot invoke &quot;org.jboss.weld.module.web.servlet.HttpContextLifecycle.contextDestroyed(jakarta.servlet.ServletContext)&quot; because &quot;this.lifecycle&quot; is null\r\n\tat org.jboss.weld.module.web.servlet.WeldInitialListener.contextDestroyed(WeldInitialListener.java:113)\r\n\tat org.apache.catalina.core.StandardContext.contextListenerStop(StandardContext.java:3980)\r\n\tat org.apache.catalina.core.StandardContext.stop(StandardContext.java:4670)\r\n\tat com.sun.enterprise.web.WebModule.stop(WebModule.java:581)\r\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4469)\r\n\tat com.sun.enterprise.web.WebModule.start(WebModule.java:551)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:935)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\r\n\tat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\r\n\tat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\r\norg.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)\r\n\tat com.sun.enterprise.web.WebModule.start(WebModule.java:551)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:935)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\r\n\tat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\r\n\tat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\r\nCaused by: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\n\tat org.apache.catalina.core.StandardContext.callServletContainerInitializers(StandardContext.java:4544)\r\n\tat com.sun.enterprise.web.WebModule.callServletContainerInitializers(WebModule.java:637)\r\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4447)\r\n\t... 47 more\r\nCaused by: java.lang.NoClassDefFoundError: javax/servlet/jsp/tagext/TryCatchFinally\r\n\tat java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n\tat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1013)\r\n\tat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\r\n\tat org.glassfish.web.loader.WebappClassLoader.findClass(WebappClassLoader.java:588)\r\n\tat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:922)\r\n\tat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:840)\r\n\tat org.glassfish.wasp.runtime.TldScanner.addListenerAndCreateTags(TldScanner.java:656)\r\n\tat org.glassfish.wasp.runtime.TldScanner.scanJar(TldScanner.java:580)\r\n\tat org.glassfish.wasp.runtime.TldScanner.scanJars(TldScanner.java:458)\r\n\tat org.glassfish.wasp.runtime.TldScanner.scanTlds(TldScanner.java:269)\r\n\tat org.glassfish.wasp.runtime.TldScanner.onStartup(TldScanner.java:193)\r\n\tat org.apache.catalina.core.StandardContext.callServletContainerInitializers(StandardContext.java:4539)\r\n\t... 49 more\r\nCaused by: java.lang.ClassNotFoundException: javax.servlet.jsp.tagext.TryCatchFinally\r\n\tat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:942)\r\n\tat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:840)\r\n\t... 61 more\r\n]]\r\n\r\n  java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\njava.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:939)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\r\n\tat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\r\n\tat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\r\n\tat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\r\njava.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\n\tat com.sun.enterprise.web.WebApplication.start(WebApplication.java:116)\r\n\tat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\r\njava.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\r\n\tat com.sun.enterprise.web.WebApplication.start(WebApplication.java:116)\r\n\tat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\r\n  Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner]]`","title":"JSTL is giving me errors that i dontt know how to fix","body":"<p>I have spent about 14 hour trying to retrive data from my, mySQL data base.  No matter what I try I cant make JSTL present data on a simple jsp (yes ive tried adding it to the pom.xml). I've tried using glassfish and tomcat both present diffrent errors. Im really lost im going and to present my JSP code and the errors.</p>\n<p>Here is the code for the jsp using glassfish 7:</p>\n<pre><code>    &lt;%@ page import=&quot;java.util.List&quot; %&gt;\n    &lt;%@ page import =&quot;java.sql.*&quot; %&gt;\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n         pageEncoding=&quot;ISO-8859-1&quot; %&gt; \n    &lt;%@ taglib uri = &quot;http://java.sun.com/jsp/jstl/core&quot; prefix=&quot;c&quot; %&gt;    \n    &lt;%@ taglib uri=&quot;http://java.sun.com/jsp/jstl/sql&quot; prefix=&quot;sql&quot; %&gt;\n    &lt;%\n    String id = request.getParameter(&quot;beerio@127.0.0.1&quot;);\n    String driver = &quot;com.mysql.jdbc.Driver&quot;;\n    String connectionUrl = &quot;jdbc:mysql://127.0.0.1:3306/&quot;;\n    String database = &quot;beerio&quot;;\n    String userid = &quot;root&quot;;\n    String password = &quot;password&quot;;\n    try {\n        Class.forName(driver);\n    } catch (ClassNotFoundException e) {\n        e.printStackTrace();\n    }\n    Connection connection = null;\n    Statement statement = null;\n    ResultSet resultSet = null; %&gt;\n\n\n    &lt;!DOCTYPE html&gt;\n    &lt;html&gt;\n\n    &lt;head&gt;\n    &lt;title&gt;Beerio&lt;/title&gt;\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;style.css&quot;&gt;\n\n    &lt;div class=&quot;bg-image&quot;&gt;\n        &lt;img src=&quot;https://cdn.discordapp.com/attachments/897055640168587306/1093173959316488203                   /BeerioLogo.png&quot; alt=&quot;Background Image style=margin-top: 100px;&quot;&gt;\n    &lt;/div&gt;\n    &lt;h1&gt; Beer E-Commerce&lt;/h1&gt;\n\n    &lt;/head&gt;\n    &lt;body&gt;\n\n    &lt;h1&gt;Retrieve data from database in jsp&lt;/h1&gt;\n    &lt;table border=&quot;1&quot;&gt;\n    &lt;tr&gt;`your text`\n        &lt;td&gt;Beer Name&lt;/td&gt;\n        &lt;td&gt;Brewer Name&lt;/td&gt;\n        &lt;td&gt;Style&lt;/td&gt;\n        &lt;td&gt;Country&lt;/td&gt;\n        &lt;td&gt;ABV&lt;/td&gt;\n        &lt;td&gt;Price&lt;/td&gt;\n\n\n    &lt;/tr&gt;\n    &lt;%\n        try{\n            connection = DriverManager.getConnection(connectionUrl+database, userid, password);\n            statement=connection.createStatement();\n            String sql =&quot;select * from beer&quot;;\n            resultSet = statement.executeQuery(sql);\n            while(resultSet.next()){\n    %&gt;\n    &lt;tr&gt;\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;BEER_NAME_ID&quot;) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;BREWERY_ID&quot;) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;STYLE&quot;) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%=resultSet.getString(&quot;COUNTRY&quot;) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%=resultSet.getDouble(&quot;ABV&quot;) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%=resultSet.getDouble(&quot;PRICE&quot;) %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;%\n            }\n            connection.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    %&gt;\n    &lt;/table&gt;\n\n\n    &lt;/body&gt;\n    \n\n\n</code></pre>\n\n<p>Here are is the error that i have been trying to decipher:\nStartup of context /beerio7-1.0-SNAPSHOT failed due to previous errors]]</p>\n<p>[2023-04-11T21:04:14.450128+01:00] [GF 7.0.3] [SEVERE] [] [jakarta.enterprise.web.vs.server] [tid: _ThreadID=65 _ThreadName=admin-listener(3)] [levelValue: 1000] [[\nWebModule[/beerio7-1.0-SNAPSHOT]Exception sending context destroyed event to listener instance of class org.jboss.weld.module.web.servlet.WeldListener\njava.lang.NullPointerException: Cannot invoke &quot;org.jboss.weld.module.web.servlet.HttpContextLifecycle.contextDestroyed(jakarta.servlet.ServletContext)&quot; because &quot;this.lifecycle&quot; is null\nat org.jboss.weld.module.web.servlet.WeldInitialListener.contextDestroyed(WeldInitialListener.java:113)\nat org.apache.catalina.core.StandardContext.contextListenerStop(StandardContext.java:3980)\nat org.apache.catalina.core.StandardContext.stop(StandardContext.java:4670)\nat com.sun.enterprise.web.WebModule.stop(WebModule.java:581)\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:4469)\nat com.sun.enterprise.web.WebModule.start(WebModule.java:551)\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:935)\nat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\nat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\nat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\nat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\norg.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:4467)\nat com.sun.enterprise.web.WebModule.start(WebModule.java:551)\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:935)\nat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\nat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\nat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\nat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\nCaused by: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\nat org.apache.catalina.core.StandardContext.callServletContainerInitializers(StandardContext.java:4544)\nat com.sun.enterprise.web.WebModule.callServletContainerInitializers(WebModule.java:637)\nat org.apache.catalina.core.StandardContext.start(StandardContext.java:4447)\n... 47 more\nCaused by: java.lang.NoClassDefFoundError: javax/servlet/jsp/tagext/TryCatchFinally\nat java.base/java.lang.ClassLoader.defineClass1(Native Method)\nat java.base/java.lang.ClassLoader.defineClass(ClassLoader.java:1013)\nat java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:150)\nat org.glassfish.web.loader.WebappClassLoader.findClass(WebappClassLoader.java:588)\nat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:922)\nat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:840)\nat org.glassfish.wasp.runtime.TldScanner.addListenerAndCreateTags(TldScanner.java:656)\nat org.glassfish.wasp.runtime.TldScanner.scanJar(TldScanner.java:580)\nat org.glassfish.wasp.runtime.TldScanner.scanJars(TldScanner.java:458)\nat org.glassfish.wasp.runtime.TldScanner.scanTlds(TldScanner.java:269)\nat org.glassfish.wasp.runtime.TldScanner.onStartup(TldScanner.java:193)\nat org.apache.catalina.core.StandardContext.callServletContainerInitializers(StandardContext.java:4539)\n... 49 more\nCaused by: java.lang.ClassNotFoundException: javax.servlet.jsp.tagext.TryCatchFinally\nat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:942)\nat org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:840)\n... 61 more\n]]</p>\n<p>java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\njava.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\nat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:939)\nat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:917)\nat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:644)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1795)\nat com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1483)\nat com.sun.enterprise.web.WebApplication.start(WebApplication.java:88)\nat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\njava.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\nat com.sun.enterprise.web.WebApplication.start(WebApplication.java:116)\nat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\njava.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner\nat com.sun.enterprise.web.WebApplication.start(WebApplication.java:116)\nat org.glassfish.internal.data.EngineRef.start(EngineRef.java:97)\nException while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: org.apache.catalina.LifecycleException: Error invoking ServletContainerInitializer org.glassfish.wasp.runtime.TldScanner]]`</p>\n"},{"tags":["java","spring-boot","http","servlets","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":146411,"reputation":9094,"user_id":356857,"accept_rate":80,"display_name":"WeMakeSoftware"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681245166,"creation_date":1681245166,"answer_id":75989930,"question_id":75989815,"body_markdown":"It&#39;s possible to return a byte array containing several images.\r\n\r\n1. You need to pack all images in a single byte array, and add a unique sequence of bytes (separator) between the images so that you can split the byte array into several images on the client side.\r\n1. On the client side you read byte by byte and search for a separator. If found, you form an image from the already read bytes.\r\n\r\nSome thoughts on the solution:\r\n\r\nEven if that&#39;s technically not complex to implement, you should reconsider the architecture of your application. This approach is viable in rear cases then you have to precisely control the transferring of every single byte.","title":"Getting multiple images in Spring Boot","body":"<p>It's possible to return a byte array containing several images.</p>\n<ol>\n<li>You need to pack all images in a single byte array, and add a unique sequence of bytes (separator) between the images so that you can split the byte array into several images on the client side.</li>\n<li>On the client side you read byte by byte and search for a separator. If found, you form an image from the already read bytes.</li>\n</ol>\n<p>Some thoughts on the solution:</p>\n<p>Even if that's technically not complex to implement, you should reconsider the architecture of your application. This approach is viable in rear cases then you have to precisely control the transferring of every single byte.</p>\n"}],"owner":{"account_id":27199037,"reputation":1,"user_id":20731549,"display_name":"HammaDing"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681245166,"creation_date":1681244160,"question_id":75989815,"body_markdown":"I want a method to get multiple images with just one request, which I can later display on html using javascript.\r\n\r\nI have already implemented this method in my Controller class which returns me a single image.\r\n\r\n```\r\n@GetMapping(value = &quot;/images/{imageName}&quot;, produces = MediaType.IMAGE_JPEG_VALUE)\r\n    public void serveFile(@PathVariable(&quot;imageName&quot;) String imageName, HttpServletResponse response) throws IOException {\r\n\r\n        InputStream resource =  this.pageService.getResource(path, imageName);\r\n        response.setContentType(MediaType.IMAGE_JPEG_VALUE);\r\n        StreamUtils.copy(resource, response.getOutputStream());\r\n    }\r\n```\r\n\r\nNow I have a database with the tables &quot;Book&quot; and &quot;Page&quot;. In the table &quot;page&quot; the file names of the images are stored as varchar and the IDs of the books are stored as foreign keys. For example, I want to output all pages, i.e. the image files, with the book ID 50\r\n\r\nI tried to implement the following methods in my Controller and Service class but I get this Exception:\r\n&gt; java.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.io.InputStream\r\n\r\n```\r\n//controller\r\n@GetMapping(&quot;images/bookid/{bookid}&quot;)\r\n    public void getPages(@PathVariable(&quot;bookid&quot;) Long bookid, HttpServletResponse response) throws IOException {\r\n\r\n        List&lt;InputStream&gt; resources = pageService.getAllResources(bookid);\r\n        response.setContentType(MediaType.IMAGE_JPEG_VALUE);\r\n        StreamUtils.copy((InputStream) resources, response.getOutputStream());\r\n\r\n    }\r\n```\r\n\r\n```\r\n//service\r\npublic List&lt;InputStream&gt; getAllResources(Long id) throws FileNotFoundException {\r\n\r\n        List&lt;String&gt; imagepaths = pageRepo.findImagePathByBookID(id);\r\n        List&lt;InputStream&gt; inputStreamList = new ArrayList&lt;&gt;();\r\n\r\n        for (String imagePath : imagepaths){\r\n            inputStreamList.add(new FileInputStream(this.path + File.separator + imagePath));\r\n        }\r\n\r\n        return inputStreamList;\r\n    }\r\n```\r\n\r\nIs it even possible to return a list of images?","title":"Getting multiple images in Spring Boot","body":"<p>I want a method to get multiple images with just one request, which I can later display on html using javascript.</p>\n<p>I have already implemented this method in my Controller class which returns me a single image.</p>\n<pre><code>@GetMapping(value = &quot;/images/{imageName}&quot;, produces = MediaType.IMAGE_JPEG_VALUE)\n    public void serveFile(@PathVariable(&quot;imageName&quot;) String imageName, HttpServletResponse response) throws IOException {\n\n        InputStream resource =  this.pageService.getResource(path, imageName);\n        response.setContentType(MediaType.IMAGE_JPEG_VALUE);\n        StreamUtils.copy(resource, response.getOutputStream());\n    }\n</code></pre>\n<p>Now I have a database with the tables &quot;Book&quot; and &quot;Page&quot;. In the table &quot;page&quot; the file names of the images are stored as varchar and the IDs of the books are stored as foreign keys. For example, I want to output all pages, i.e. the image files, with the book ID 50</p>\n<p>I tried to implement the following methods in my Controller and Service class but I get this Exception:</p>\n<blockquote>\n<p>java.lang.ClassCastException: class java.util.ArrayList cannot be cast to class java.io.InputStream</p>\n</blockquote>\n<pre><code>//controller\n@GetMapping(&quot;images/bookid/{bookid}&quot;)\n    public void getPages(@PathVariable(&quot;bookid&quot;) Long bookid, HttpServletResponse response) throws IOException {\n\n        List&lt;InputStream&gt; resources = pageService.getAllResources(bookid);\n        response.setContentType(MediaType.IMAGE_JPEG_VALUE);\n        StreamUtils.copy((InputStream) resources, response.getOutputStream());\n\n    }\n</code></pre>\n<pre><code>//service\npublic List&lt;InputStream&gt; getAllResources(Long id) throws FileNotFoundException {\n\n        List&lt;String&gt; imagepaths = pageRepo.findImagePathByBookID(id);\n        List&lt;InputStream&gt; inputStreamList = new ArrayList&lt;&gt;();\n\n        for (String imagePath : imagepaths){\n            inputStreamList.add(new FileInputStream(this.path + File.separator + imagePath));\n        }\n\n        return inputStreamList;\n    }\n</code></pre>\n<p>Is it even possible to return a list of images?</p>\n"},{"tags":["java","junit","hamcrest"],"answers":[{"tags":[],"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681243637,"creation_date":1681243637,"answer_id":75989763,"question_id":75986701,"body_markdown":"My (handwavy) understanding is that the root cause is [Naming of method Matchers#contains is ambiguous #140](https://github.com/hamcrest/JavaHamcrest/issues/140)\r\n\r\n&gt; In code reviews here, people often misread this:\r\n&gt;```lang-java\r\n&gt;assertThat(collection, contains(&quot;x&quot;));\r\n&gt;```\r\n&gt;As meaning this: &quot;Assert that the collection contains &#39;x&#39;&quot;.\r\n&gt;\r\n&gt;But what it actually means is this: &quot;Assert that the collection contains only &#39;x&#39;&quot;.\r\n&gt;\r\n&gt;This causes a lot of unnecessary questions to be raised on our code reviews where code was updated to use Hamcrest, just because it reads differently to what it&#39;s actually doing.\r\n&gt;\r\n&gt;At the same time, people looking to write new code with Hamcrest are using autocompletion to find appropriate-looking methods, and will often try to use contains before discovering that they really wanted hasItem.\r\n&gt;\r\n&gt;I would suggest containsOnly as a new name, but containsInAnyOrder sort of has the same issue and I am finding it hard to jam the additional word in there.\r\n\r\nThus given:\r\n```lang-java\r\nclass BaseFoo {}\r\nclass Foo1 extends BaseFoo {}\r\nclass Foo2 extends BaseFoo {}\r\n\r\nFoo1 foo1 = new Foo1();\r\nFoo2 foo2 = new Foo2();\r\n\r\nMatcher&lt;Iterable&lt;? extends BaseFoo&gt;&gt; containsMatcher = Matchers.contains(foo1, foo2);\r\nMatcher&lt;Iterable&lt;? super Foo1&gt;&gt; hasItemsMatcher = Matchers.hasItem(foo1);\r\n```\r\n\r\n- containsMatcher will never match on an Iterable containing superclasses of BaseFoo\r\n- hasItemsMatcher can possibly match on an Iterable containing superclasses of BaseFoo\r\n\r\nAlso note that `Matcher` interface does not use its generic argument in its member methods (particularly in matches which accepts Object) - generic argument only matters when combining the Matchers.","title":"Why does Matchers.hasItem return a Matcher&lt;Iterable&lt;? super T&gt;&gt;, but Matchers.contains return Matcher&lt;Iterable&lt;? extends T&gt;&gt;?","body":"<p>My (handwavy) understanding is that the root cause is <a href=\"https://github.com/hamcrest/JavaHamcrest/issues/140\" rel=\"nofollow noreferrer\">Naming of method Matchers#contains is ambiguous #140</a></p>\n<blockquote>\n<p>In code reviews here, people often misread this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>assertThat(collection, contains(&quot;x&quot;));\n</code></pre>\n<p>As meaning this: &quot;Assert that the collection contains 'x'&quot;.</p>\n<p>But what it actually means is this: &quot;Assert that the collection contains only 'x'&quot;.</p>\n<p>This causes a lot of unnecessary questions to be raised on our code reviews where code was updated to use Hamcrest, just because it reads differently to what it's actually doing.</p>\n<p>At the same time, people looking to write new code with Hamcrest are using autocompletion to find appropriate-looking methods, and will often try to use contains before discovering that they really wanted hasItem.</p>\n<p>I would suggest containsOnly as a new name, but containsInAnyOrder sort of has the same issue and I am finding it hard to jam the additional word in there.</p>\n</blockquote>\n<p>Thus given:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class BaseFoo {}\nclass Foo1 extends BaseFoo {}\nclass Foo2 extends BaseFoo {}\n\nFoo1 foo1 = new Foo1();\nFoo2 foo2 = new Foo2();\n\nMatcher&lt;Iterable&lt;? extends BaseFoo&gt;&gt; containsMatcher = Matchers.contains(foo1, foo2);\nMatcher&lt;Iterable&lt;? super Foo1&gt;&gt; hasItemsMatcher = Matchers.hasItem(foo1);\n</code></pre>\n<ul>\n<li>containsMatcher will never match on an Iterable containing superclasses of BaseFoo</li>\n<li>hasItemsMatcher can possibly match on an Iterable containing superclasses of BaseFoo</li>\n</ul>\n<p>Also note that <code>Matcher</code> interface does not use its generic argument in its member methods (particularly in matches which accepts Object) - generic argument only matters when combining the Matchers.</p>\n"}],"owner":{"account_id":29404,"reputation":45520,"user_id":79439,"accept_rate":62,"display_name":"thecoop"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681243637,"creation_date":1681221169,"question_id":75986701,"body_markdown":"In hamcrest, [`Matchers.hasItem`][1] and friends returns a `Matcher&lt;Iterable&lt;? super T&gt;&gt;`, but [`contains`][2] and friends returns a `Matcher&lt;Iterable&lt;? extends T&gt;&gt;`. Why the difference?\r\n\r\n\r\n  [1]: https://hamcrest.org/JavaHamcrest/javadoc/2.2/org/hamcrest/Matchers.html#hasItem-T-\r\n  [2]: https://hamcrest.org/JavaHamcrest/javadoc/2.2/org/hamcrest/Matchers.html#contains-E...-","title":"Why does Matchers.hasItem return a Matcher&lt;Iterable&lt;? super T&gt;&gt;, but Matchers.contains return Matcher&lt;Iterable&lt;? extends T&gt;&gt;?","body":"<p>In hamcrest, <a href=\"https://hamcrest.org/JavaHamcrest/javadoc/2.2/org/hamcrest/Matchers.html#hasItem-T-\" rel=\"nofollow noreferrer\"><code>Matchers.hasItem</code></a> and friends returns a <code>Matcher&lt;Iterable&lt;? super T&gt;&gt;</code>, but <a href=\"https://hamcrest.org/JavaHamcrest/javadoc/2.2/org/hamcrest/Matchers.html#contains-E...-\" rel=\"nofollow noreferrer\"><code>contains</code></a> and friends returns a <code>Matcher&lt;Iterable&lt;? extends T&gt;&gt;</code>. Why the difference?</p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1681245643,"post_id":75989745,"comment_id":134024957,"body_markdown":"Can you explain this `/app/target/classes` is this really starting with root directory or is this based on removing things which should not being posted here?? ... Can you show the pom file ..and the rest of the logging output....","body":"Can you explain this <code>&#47;app&#47;target&#47;classes</code> is this really starting with root directory or is this based on removing things which should not being posted here?? ... Can you show the pom file ..and the rest of the logging output...."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681319860,"post_id":75989745,"comment_id":134038670,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":28268358,"reputation":1,"user_id":21611950,"display_name":"Gyan Prakash"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681243465,"creation_date":1681243465,"question_id":75989745,"body_markdown":"\\*\\*org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project: Cannot create resource output directory: /app/target/classes\r\n\\*\\*\r\n\r\n\r\n\\*\\*This is the Trace\r\n\\*\\*\r\n`at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:306)`\r\n`at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)`\r\n`at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)`\r\n`at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)`\r\n`at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:121)`\r\n`at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)`\r\n`at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)`\r\n`at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)`\r\n`at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)`\r\n`at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)`\r\n`at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)`\r\n`at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)`\r\n`at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)`\r\n`at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)`\r\n`at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)`\r\n`at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)`\r\n`at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)`\r\n`at java.lang.reflect.Method.invoke (Method.java:568)`\r\n`at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)`\r\n`at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)`\r\n`at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)`\r\n\r\nI tried changing java and spring versions, but it didn&#39;t resolve the issue","title":"Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources, Cannot create resource output directory: /app/target/classes","body":"<p>**org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-resources-plugin:3.2.0:resources (default-resources) on project: Cannot create resource output directory: /app/target/classes\n**</p>\n<p>**This is the Trace\n**\n<code>at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:306)</code>\n<code>at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:211)</code>\n<code>at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:165)</code>\n<code>at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:157)</code>\n<code>at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:121)</code>\n<code>at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)</code>\n<code>at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)</code>\n<code>at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:127)</code>\n<code>at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:294)</code>\n<code>at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)</code>\n<code>at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)</code>\n<code>at org.apache.maven.cli.MavenCli.execute (MavenCli.java:960)</code>\n<code>at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:293)</code>\n<code>at org.apache.maven.cli.MavenCli.main (MavenCli.java:196)</code>\n<code>at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)</code>\n<code>at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)</code>\n<code>at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)</code>\n<code>at java.lang.reflect.Method.invoke (Method.java:568)</code>\n<code>at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)</code>\n<code>at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)</code>\n<code>at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)</code></p>\n<p>I tried changing java and spring versions, but it didn't resolve the issue</p>\n"},{"tags":["java","project-reactor"],"comments":[{"owner":{"account_id":1620332,"reputation":1376,"user_id":1497060,"display_name":"Oleg Kurbatov"},"score":0,"creation_date":1540547916,"post_id":52998809,"comment_id":92916075,"body_markdown":"Could you please describe a real-world scenario when you suppose to use this kind of lock? I mean that it&#39;s more or less clear what you try to achieve but why?","body":"Could you please describe a real-world scenario when you suppose to use this kind of lock? I mean that it&#39;s more or less clear what you try to achieve but why?"},{"owner":{"account_id":14166112,"reputation":45,"user_id":10234033,"display_name":"Roman M."},"score":0,"creation_date":1540563645,"post_id":52998809,"comment_id":92924926,"body_markdown":"I have web application with in-memory storage, and I need to provide consistency in its data. So it is necessary that only one client could apply changes to data within a &quot;transaction&quot;.\nAnother use case - is to make pool of resources. So if there is no available resource at the moment - just wait until there is one frees","body":"I have web application with in-memory storage, and I need to provide consistency in its data. So it is necessary that only one client could apply changes to data within a &quot;transaction&quot;. Another use case - is to make pool of resources. So if there is no available resource at the moment - just wait until there is one frees"},{"owner":{"account_id":14166112,"reputation":45,"user_id":10234033,"display_name":"Roman M."},"score":0,"creation_date":1540572104,"post_id":52998809,"comment_id":92929379,"body_markdown":"It also can be used for nonblocking cache. As Mono.cache() has particularity to preserve Error or Complete without value signals, that is not desirable behavior if I want to cache only successful result with data. And Mono.cache() is not so flexible as blocking cache (like guava cache). So with such Lock I can use blocking cache for data store and fill it after successful nonblocking recalculation of expensive operation. I think there are few more use cases, but I was surprised that it is not implemented yet. So I have filling that I am doing something wrong.","body":"It also can be used for nonblocking cache. As Mono.cache() has particularity to preserve Error or Complete without value signals, that is not desirable behavior if I want to cache only successful result with data. And Mono.cache() is not so flexible as blocking cache (like guava cache). So with such Lock I can use blocking cache for data store and fill it after successful nonblocking recalculation of expensive operation. I think there are few more use cases, but I was surprised that it is not implemented yet. So I have filling that I am doing something wrong."},{"owner":{"account_id":14166112,"reputation":45,"user_id":10234033,"display_name":"Roman M."},"score":0,"creation_date":1540579943,"post_id":52998809,"comment_id":92933017,"body_markdown":"I saw the answers from [Cache the result of a Mono from a WebClient call...](https://stackoverflow.com/questions/52787925/cache-the-result-of-a-mono-from-a-webclient-call-in-a-spring-webflux-web-applica) from @brian-clozel and alexander-pankin but in case of 10 simultanious requests their solution would make 10 recalculations (invocations of remote service) and it is waste of server and client resources if they get eventially the same result. But with such Lock it is posiible make just 1 expensive invocation while other subsribers would wait for result","body":"I saw the answers from <a href=\"https://stackoverflow.com/questions/52787925/cache-the-result-of-a-mono-from-a-webclient-call-in-a-spring-webflux-web-applica\">Cache the result of a Mono from a WebClient call...</a> from @brian-clozel and alexander-pankin but in case of 10 simultanious requests their solution would make 10 recalculations (invocations of remote service) and it is waste of server and client resources if they get eventially the same result. But with such Lock it is posiible make just 1 expensive invocation while other subsribers would wait for result"},{"owner":{"account_id":14208533,"reputation":3827,"user_id":10264430,"display_name":"Alexander Pankin"},"score":0,"creation_date":1540583662,"post_id":52998809,"comment_id":92934569,"body_markdown":"I did lock for exclusive calls of remote service with same parameters using CacheMono in one of my projects. Don&#39;t think that it would be the good answer to your more generous question, but I could share it in couple days.","body":"I did lock for exclusive calls of remote service with same parameters using CacheMono in one of my projects. Don&#39;t think that it would be the good answer to your more generous question, but I could share it in couple days."},{"owner":{"account_id":14166112,"reputation":45,"user_id":10234033,"display_name":"Roman M."},"score":0,"creation_date":1540626379,"post_id":52998809,"comment_id":92942083,"body_markdown":"@alexander-pankin, yes, it would be nice and helpful, please share your solution","body":"@alexander-pankin, yes, it would be nice and helpful, please share your solution"}],"answers":[{"tags":[],"owner":{"account_id":14208533,"reputation":3827,"user_id":10264430,"display_name":"Alexander Pankin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1541265522,"creation_date":1540721136,"answer_id":53030330,"question_id":52998809,"body_markdown":"I have a solution for exclusive calls of remote service with same parameters. Maybe it could be helpful in your case.\r\n\r\nIt is based on immediate `tryLock` with error if resource is busy and `Mono.retryWhen` to &quot;wait&quot; releasing.\r\n\r\nSo I have `LockData` class for lock&#39;s metadata\r\n\r\n    public final class LockData {\r\n        // Lock key to identify same operation (same cache key, for example).\r\n        private final String key;\r\n        // Unique identifier for equals and hashCode.\r\n        private final String uuid;\r\n        // Date and time of the acquiring for lock duration limiting.\r\n        private final OffsetDateTime acquiredDateTime;\r\n        ...\r\n    }\r\n\r\n`LockCommand` interface is an abstraction of blocking operations on the LockData\r\n\r\n    public interface LockCommand {\r\n    \r\n        Tuple2&lt;Boolean, LockData&gt; tryLock(LockData lockData);\r\n    \r\n        void unlock(LockData lockData);\r\n        ...\r\n    }\r\n\r\n`UnlockEventsRegistry` interface is abstraction for unlock events listeners collector.\r\n\r\n\r\n    public interface UnlockEventsRegistry {\r\n        // initialize event listeners collection when acquire lock\r\n        Mono&lt;Void&gt; add(LockData lockData);\r\n    \r\n        // notify event listeners and remove collection when release lock\r\n        Mono&lt;Void&gt; remove(LockData lockData);\r\n    \r\n        // register event listener for given lockData\r\n        Mono&lt;Boolean&gt; register(LockData lockData, Consumer&lt;Integer&gt; unlockEventListener);\r\n    }\r\n\r\nAnd `Lock` class can wrap source Mono with lock, unlock and wrap CacheMono writer with unlock.\r\n\r\n    public final class Lock {\r\n        private final LockCommand lockCommand;\r\n        private final LockData lockData;\r\n        private final UnlockEventsRegistry unlockEventsRegistry;\r\n        private final EmitterProcessor&lt;Integer&gt; unlockEvents;\r\n        private final FluxSink&lt;Integer&gt; unlockEventSink;\r\n    \r\n        public Lock(LockCommand lockCommand, String key, UnlockEventsRegistry unlockEventsRegistry) {\r\n            this.lockCommand = lockCommand;\r\n            this.lockData = LockData.builder()\r\n                    .key(key)\r\n                    .uuid(UUID.randomUUID().toString())\r\n                    .build();\r\n            this.unlockEventsRegistry = unlockEventsRegistry;\r\n            this.unlockEvents = EmitterProcessor.create(false);\r\n            this.unlockEventSink = unlockEvents.sink();\r\n        }\r\n\r\n        ...\r\n\r\n        public final &lt;T&gt; Mono&lt;T&gt; tryLock(Mono&lt;T&gt; source, Scheduler scheduler) {\r\n            return Mono.fromCallable(() -&gt; lockCommand.tryLock(lockData))\r\n                    .subscribeOn(scheduler)\r\n                    .flatMap(isLocked -&gt; {\r\n                        if (isLocked.getT1()) {\r\n                            return unlockEventsRegistry.add(lockData)\r\n                                    .then(source\r\n                                            .switchIfEmpty(unlock().then(Mono.empty()))\r\n                                            .onErrorResume(throwable -&gt; unlock().then(Mono.error(throwable))));\r\n                        } else {\r\n                            return Mono.error(new LockIsNotAvailableException(isLocked.getT2()));\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        public Mono&lt;Void&gt; unlock(Scheduler scheduler) {\r\n            return Mono.&lt;Void&gt;fromRunnable(() -&gt; lockCommand.unlock(lockData))\r\n                    .then(unlockEventsRegistry.remove(lockData))\r\n                    .subscribeOn(scheduler);\r\n        }\r\n    \r\n        public &lt;KEY, VALUE&gt; BiFunction&lt;KEY, Signal&lt;? extends VALUE&gt;, Mono&lt;Void&gt;&gt; unlockAfterCacheWriter(\r\n                BiFunction&lt;KEY, Signal&lt;? extends VALUE&gt;, Mono&lt;Void&gt;&gt; cacheWriter) {\r\n            Objects.requireNonNull(cacheWriter);\r\n            return cacheWriter.andThen(voidMono -&gt; voidMono.then(unlock())\r\n                    .onErrorResume(throwable -&gt; unlock()));\r\n        }\r\n\r\n        public final &lt;T&gt; UnaryOperator&lt;Mono&lt;T&gt;&gt; retryTransformer() {\r\n            return mono -&gt; mono\r\n                    .doOnError(LockIsNotAvailableException.class,\r\n                            error -&gt; unlockEventsRegistry.register(error.getLockData(), unlockEventSink::next)\r\n                                    .doOnNext(registered -&gt; {\r\n                                        if (!registered) unlockEventSink.next(0);\r\n                                    })\r\n                                    .then(Mono.just(2).map(unlockEventSink::next)\r\n                                            .delaySubscription(lockCommand.getMaxLockDuration()))\r\n                                    .subscribe())\r\n                    .doOnError(throwable -&gt; !(throwable instanceof LockIsNotAvailableException),\r\n                            ignored -&gt; unlockEventSink.next(0))\r\n                    .retryWhen(errorFlux -&gt; errorFlux.zipWith(unlockEvents, (error, integer) -&gt; {\r\n                        if (error instanceof LockIsNotAvailableException) return integer;\r\n                        else throw Exceptions.propagate(error);\r\n                    }));\r\n        }\r\n    }\r\n\r\nNow if I have to wrap my Mono with CacheMono and lock, I can do it like this:\r\n\r\n    private Mono&lt;String&gt; getCachedLockedMono(String cacheKey, Mono&lt;String&gt; source, LockCommand lockCommand, UnlockEventsRegistry unlockEventsRegistry) {\r\n        Lock lock = new Lock(lockCommand, cacheKey, unlockEventsRegistry);\r\n\r\n        return CacheMono.lookup(CACHE_READER, cacheKey)\r\n                // Lock and double check\r\n                .onCacheMissResume(() -&gt; lock.tryLock(Mono.fromCallable(CACHE::get).switchIfEmpty(source)))\r\n                .andWriteWith(lock.unlockAfterCacheWriter(CACHE_WRITER))\r\n                // Retry if lock is not available\r\n                .transform(lock.retryTransformer());\r\n    }\r\n    \r\nYou could find code and tests with examples on [GitHub][1] \r\n\r\n  [1]: https://github.com/alex-pumpkin/reactor-lock","title":"Nonblocking ReentrantLock with Reactor","body":"<p>I have a solution for exclusive calls of remote service with same parameters. Maybe it could be helpful in your case.</p>\n\n<p>It is based on immediate <code>tryLock</code> with error if resource is busy and <code>Mono.retryWhen</code> to \"wait\" releasing.</p>\n\n<p>So I have <code>LockData</code> class for lock's metadata</p>\n\n<pre><code>public final class LockData {\n    // Lock key to identify same operation (same cache key, for example).\n    private final String key;\n    // Unique identifier for equals and hashCode.\n    private final String uuid;\n    // Date and time of the acquiring for lock duration limiting.\n    private final OffsetDateTime acquiredDateTime;\n    ...\n}\n</code></pre>\n\n<p><code>LockCommand</code> interface is an abstraction of blocking operations on the LockData</p>\n\n<pre><code>public interface LockCommand {\n\n    Tuple2&lt;Boolean, LockData&gt; tryLock(LockData lockData);\n\n    void unlock(LockData lockData);\n    ...\n}\n</code></pre>\n\n<p><code>UnlockEventsRegistry</code> interface is abstraction for unlock events listeners collector.</p>\n\n<pre><code>public interface UnlockEventsRegistry {\n    // initialize event listeners collection when acquire lock\n    Mono&lt;Void&gt; add(LockData lockData);\n\n    // notify event listeners and remove collection when release lock\n    Mono&lt;Void&gt; remove(LockData lockData);\n\n    // register event listener for given lockData\n    Mono&lt;Boolean&gt; register(LockData lockData, Consumer&lt;Integer&gt; unlockEventListener);\n}\n</code></pre>\n\n<p>And <code>Lock</code> class can wrap source Mono with lock, unlock and wrap CacheMono writer with unlock.</p>\n\n<pre><code>public final class Lock {\n    private final LockCommand lockCommand;\n    private final LockData lockData;\n    private final UnlockEventsRegistry unlockEventsRegistry;\n    private final EmitterProcessor&lt;Integer&gt; unlockEvents;\n    private final FluxSink&lt;Integer&gt; unlockEventSink;\n\n    public Lock(LockCommand lockCommand, String key, UnlockEventsRegistry unlockEventsRegistry) {\n        this.lockCommand = lockCommand;\n        this.lockData = LockData.builder()\n                .key(key)\n                .uuid(UUID.randomUUID().toString())\n                .build();\n        this.unlockEventsRegistry = unlockEventsRegistry;\n        this.unlockEvents = EmitterProcessor.create(false);\n        this.unlockEventSink = unlockEvents.sink();\n    }\n\n    ...\n\n    public final &lt;T&gt; Mono&lt;T&gt; tryLock(Mono&lt;T&gt; source, Scheduler scheduler) {\n        return Mono.fromCallable(() -&gt; lockCommand.tryLock(lockData))\n                .subscribeOn(scheduler)\n                .flatMap(isLocked -&gt; {\n                    if (isLocked.getT1()) {\n                        return unlockEventsRegistry.add(lockData)\n                                .then(source\n                                        .switchIfEmpty(unlock().then(Mono.empty()))\n                                        .onErrorResume(throwable -&gt; unlock().then(Mono.error(throwable))));\n                    } else {\n                        return Mono.error(new LockIsNotAvailableException(isLocked.getT2()));\n                    }\n                });\n    }\n\n    public Mono&lt;Void&gt; unlock(Scheduler scheduler) {\n        return Mono.&lt;Void&gt;fromRunnable(() -&gt; lockCommand.unlock(lockData))\n                .then(unlockEventsRegistry.remove(lockData))\n                .subscribeOn(scheduler);\n    }\n\n    public &lt;KEY, VALUE&gt; BiFunction&lt;KEY, Signal&lt;? extends VALUE&gt;, Mono&lt;Void&gt;&gt; unlockAfterCacheWriter(\n            BiFunction&lt;KEY, Signal&lt;? extends VALUE&gt;, Mono&lt;Void&gt;&gt; cacheWriter) {\n        Objects.requireNonNull(cacheWriter);\n        return cacheWriter.andThen(voidMono -&gt; voidMono.then(unlock())\n                .onErrorResume(throwable -&gt; unlock()));\n    }\n\n    public final &lt;T&gt; UnaryOperator&lt;Mono&lt;T&gt;&gt; retryTransformer() {\n        return mono -&gt; mono\n                .doOnError(LockIsNotAvailableException.class,\n                        error -&gt; unlockEventsRegistry.register(error.getLockData(), unlockEventSink::next)\n                                .doOnNext(registered -&gt; {\n                                    if (!registered) unlockEventSink.next(0);\n                                })\n                                .then(Mono.just(2).map(unlockEventSink::next)\n                                        .delaySubscription(lockCommand.getMaxLockDuration()))\n                                .subscribe())\n                .doOnError(throwable -&gt; !(throwable instanceof LockIsNotAvailableException),\n                        ignored -&gt; unlockEventSink.next(0))\n                .retryWhen(errorFlux -&gt; errorFlux.zipWith(unlockEvents, (error, integer) -&gt; {\n                    if (error instanceof LockIsNotAvailableException) return integer;\n                    else throw Exceptions.propagate(error);\n                }));\n    }\n}\n</code></pre>\n\n<p>Now if I have to wrap my Mono with CacheMono and lock, I can do it like this:</p>\n\n<pre><code>private Mono&lt;String&gt; getCachedLockedMono(String cacheKey, Mono&lt;String&gt; source, LockCommand lockCommand, UnlockEventsRegistry unlockEventsRegistry) {\n    Lock lock = new Lock(lockCommand, cacheKey, unlockEventsRegistry);\n\n    return CacheMono.lookup(CACHE_READER, cacheKey)\n            // Lock and double check\n            .onCacheMissResume(() -&gt; lock.tryLock(Mono.fromCallable(CACHE::get).switchIfEmpty(source)))\n            .andWriteWith(lock.unlockAfterCacheWriter(CACHE_WRITER))\n            // Retry if lock is not available\n            .transform(lock.retryTransformer());\n}\n</code></pre>\n\n<p>You could find code and tests with examples on <a href=\"https://github.com/alex-pumpkin/reactor-lock\" rel=\"nofollow noreferrer\">GitHub</a> </p>\n"},{"tags":[],"owner":{"account_id":17410896,"reputation":316,"user_id":17780636,"display_name":"Kana"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1660967607,"creation_date":1652967929,"answer_id":72305717,"question_id":52998809,"body_markdown":"Now that Reactor has introduced `Sinks`, it is easier to implement such locks. I have written [a library](https://github.com/gudzpoz/reactor-locks/), with which you may code like this:\r\n\r\n```java\r\nimport party.iroiro.lock.Lock;\r\nimport party.iroiro.lock.ReactiveLock;\r\n\r\nFlux&lt;String&gt; getWork(String client, Duration delay, Lock lock) {\r\n    return Mono.delay(delay)\r\n              .flatMapMany(l -&gt; lock.withLock(() -&gt;\r\n                  Flux.interval(Duration.ofMillis(300))\r\n                      .take(3)\r\n                      .map(i -&gt; client)\r\n                      .log(client)));\r\n}\r\n```\r\n\r\nIt internally uses a queue of `Sinks.Empty` to keep track of lock requests. On each unlock it just polls from the queue and emits to the `Mono` an `ON_COMPLETE` signal, which might work slightly better than broadcasting to all requesters with `Sinks.many().multicast()`. It makes use of the feature that a `Sinks.Empty` cannot be emitted to more than once, and therefore cancelling the lock (for those who want to set a timeout or handle complex cases) will block the emission of `ON_COMPLETE`, and vise versa.\r\n\r\nAnd by wrapping `Flux.using` around the lock, one can make sure that the lock is unlocked correctly in all cases like `try-finally`.\r\n\r\nHere is a portion of the implementation if you are interested. The original answer is `synchronized` and maybe blocking on race conditions, and the following is rewritten with CAS operations so that locks are non-blocking. (In the library, all the locks are implemented with CAS operations now.)\r\n\r\n```java\r\n    private volatile int count = 0;  // 0 if unlocked\r\n\r\n    public LockHandle tryLock() {\r\n        if (COUNT.compareAndSet(this, 0, 1)) {\r\n            // Optimistic acquiring\r\n            return LockHandle.empty();\r\n        } else {\r\n            LockHandle handle = SinkUtils.queueSink(queue);\r\n            fairDecrement(false);\r\n            return handle;\r\n        }\r\n    }\r\n    public void unlock() {\r\n        if (fairness) {\r\n            fairDecrement(true);\r\n        } else {\r\n            COUNT.set(this, 0);\r\n            fairDecrement(false);\r\n        }\r\n    }\r\n```\r\n\r\n```java\r\n    /*\r\n     * If not &quot;unlocking&quot;, fairDecrement first increments COUNT so that it does not end up unlocking a lock.\r\n     * If &quot;unlocking&quot;, we jump directly to the decrementing.\r\n     */\r\n    private void fairDecrement(boolean unlocking) {\r\n        /*\r\n         * COUNT states:\r\n         * - COUNT == 0: The lock is unlocked, with no ongoing decrement operations.\r\n         * - COUNT &gt;= 1: Either the lock is being held, or there is an ongoing decrement operation.\r\n         *               Note that the two are mutual exclusive, since they both require COUNT++ == 0.\r\n         *\r\n         * If &quot;unlocking&quot;, then we are responsible for decrements.\r\n         *\r\n         * Otherwise,\r\n         * 1. If COUNT++ &gt;= 1, either someone is holding the lock, or there is an ongoing\r\n         *    decrement operation. Either way, some thread will eventually emit to pending requests.\r\n         *    We increment COUNT to signal to the emitter that the queue could have potentially been\r\n         *    appended to after its last emission.\r\n         * 2. If COUNT++ == 0, then we are responsible for decrementing.\r\n         */\r\n        if (unlocking || COUNT.incrementAndGet(this) == 1) {\r\n            do {\r\n                if (SinkUtils.emitAnySink(queue)) {\r\n                    /*\r\n                     * Leaves the decrementing job to the next lock holder, who will unlock somehow.\r\n                     */\r\n                    return;\r\n                }\r\n                /*\r\n                 * It is now safe to decrement COUNT, since there is no concurrent decrements.\r\n                 */\r\n            } while (COUNT.decrementAndGet(this) != 0);\r\n        }\r\n    }\r\n```\r\n\r\nAlso, if you want to limit the number of clients to N instead of one, the library provides `ReactiveSemaphore`, which corresponds to `java.util.concurrent.Semaphore`.","title":"Nonblocking ReentrantLock with Reactor","body":"<p>Now that Reactor has introduced <code>Sinks</code>, it is easier to implement such locks. I have written <a href=\"https://github.com/gudzpoz/reactor-locks/\" rel=\"nofollow noreferrer\">a library</a>, with which you may code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import party.iroiro.lock.Lock;\nimport party.iroiro.lock.ReactiveLock;\n\nFlux&lt;String&gt; getWork(String client, Duration delay, Lock lock) {\n    return Mono.delay(delay)\n              .flatMapMany(l -&gt; lock.withLock(() -&gt;\n                  Flux.interval(Duration.ofMillis(300))\n                      .take(3)\n                      .map(i -&gt; client)\n                      .log(client)));\n}\n</code></pre>\n<p>It internally uses a queue of <code>Sinks.Empty</code> to keep track of lock requests. On each unlock it just polls from the queue and emits to the <code>Mono</code> an <code>ON_COMPLETE</code> signal, which might work slightly better than broadcasting to all requesters with <code>Sinks.many().multicast()</code>. It makes use of the feature that a <code>Sinks.Empty</code> cannot be emitted to more than once, and therefore cancelling the lock (for those who want to set a timeout or handle complex cases) will block the emission of <code>ON_COMPLETE</code>, and vise versa.</p>\n<p>And by wrapping <code>Flux.using</code> around the lock, one can make sure that the lock is unlocked correctly in all cases like <code>try-finally</code>.</p>\n<p>Here is a portion of the implementation if you are interested. The original answer is <code>synchronized</code> and maybe blocking on race conditions, and the following is rewritten with CAS operations so that locks are non-blocking. (In the library, all the locks are implemented with CAS operations now.)</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private volatile int count = 0;  // 0 if unlocked\n\n    public LockHandle tryLock() {\n        if (COUNT.compareAndSet(this, 0, 1)) {\n            // Optimistic acquiring\n            return LockHandle.empty();\n        } else {\n            LockHandle handle = SinkUtils.queueSink(queue);\n            fairDecrement(false);\n            return handle;\n        }\n    }\n    public void unlock() {\n        if (fairness) {\n            fairDecrement(true);\n        } else {\n            COUNT.set(this, 0);\n            fairDecrement(false);\n        }\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>    /*\n     * If not &quot;unlocking&quot;, fairDecrement first increments COUNT so that it does not end up unlocking a lock.\n     * If &quot;unlocking&quot;, we jump directly to the decrementing.\n     */\n    private void fairDecrement(boolean unlocking) {\n        /*\n         * COUNT states:\n         * - COUNT == 0: The lock is unlocked, with no ongoing decrement operations.\n         * - COUNT &gt;= 1: Either the lock is being held, or there is an ongoing decrement operation.\n         *               Note that the two are mutual exclusive, since they both require COUNT++ == 0.\n         *\n         * If &quot;unlocking&quot;, then we are responsible for decrements.\n         *\n         * Otherwise,\n         * 1. If COUNT++ &gt;= 1, either someone is holding the lock, or there is an ongoing\n         *    decrement operation. Either way, some thread will eventually emit to pending requests.\n         *    We increment COUNT to signal to the emitter that the queue could have potentially been\n         *    appended to after its last emission.\n         * 2. If COUNT++ == 0, then we are responsible for decrementing.\n         */\n        if (unlocking || COUNT.incrementAndGet(this) == 1) {\n            do {\n                if (SinkUtils.emitAnySink(queue)) {\n                    /*\n                     * Leaves the decrementing job to the next lock holder, who will unlock somehow.\n                     */\n                    return;\n                }\n                /*\n                 * It is now safe to decrement COUNT, since there is no concurrent decrements.\n                 */\n            } while (COUNT.decrementAndGet(this) != 0);\n        }\n    }\n</code></pre>\n<p>Also, if you want to limit the number of clients to N instead of one, the library provides <code>ReactiveSemaphore</code>, which corresponds to <code>java.util.concurrent.Semaphore</code>.</p>\n"},{"tags":[],"owner":{"account_id":1018723,"reputation":765,"user_id":1029688,"display_name":"Wet Noodles"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681243196,"creation_date":1673546319,"answer_id":75100504,"question_id":52998809,"body_markdown":"I know this already has a couple reasonable answers, but I thought there was a (subjectively) simpler solution that leverages `flatMap` (in a semaphore-like use-case) or `concatMap` (in a `lock`/`synchronized` use-case) to control parallelization.\r\n\r\nThis solution only uses Sinks and Reactor operators to support locking. Publishers that aren&#39;t subscribed to also will not consume a lock.\r\n\r\n    public class ReactiveSemaphore {\r\n\r\n\t\t/**\r\n\t\t * This can be thought of as a queue of lock handles. The first argument of the tuple is a signaler that accepts a value\r\n\t\t * value when a lock is available. The second argument is a Mono that completes when the lock is released.\r\n\t\t */\r\n\t\tprivate final Sinks.Many&lt;Tuple2&lt;Sinks.One&lt;Boolean&gt;, Mono&lt;Boolean&gt;&gt;&gt; taskQueue;\r\n\t\tprivate final Sinks.One&lt;Boolean&gt; close = Sinks.one();\r\n\r\n\t\t/**\r\n\t\t * Creates a ReactiveSemaphore that only allows one Publisher to be subscribed at a time. Executed by order\r\n\t\t * of subscription.\r\n\t\t */\r\n\t\tpublic ReactiveSemaphore() {\r\n\t\t\tthis(1);\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Creates a ReactiveSemaphore that allows up to poolSize Publishers to be subscribed in parallel.\r\n\t\t * @param poolSize The number of allowed subscriptions to run in parallel.\r\n\t\t */\r\n\t\tpublic ReactiveSemaphore(int poolSize) {\r\n\t\t\ttaskQueue = Sinks.many().unicast().onBackpressureBuffer();\r\n\r\n\t\t\tFlux&lt;Boolean&gt; tasks;\r\n\t\t\tif (poolSize &lt;= 1)\r\n\t\t\t\t// We could use flatMap with parallelism of 1, but that seems weird\r\n\t\t\t\ttasks = taskQueue\r\n\t\t\t\t\t\t.asFlux()\r\n\t\t\t\t\t\t.concatMap(ReactiveSemaphore::dispatchTask);\r\n\t\t\telse {\r\n\t\t\t\ttasks = taskQueue\r\n\t\t\t\t\t\t.asFlux()\r\n\t\t\t\t\t\t.flatMap(ReactiveSemaphore::dispatchTask, poolSize);\r\n\t\t\t}\r\n\r\n\t\t\ttasks\r\n\t\t\t\t\t.takeUntilOther(close.asMono())\r\n\t\t\t\t\t.subscribe();\r\n\t\t}\r\n\r\n\t\tprivate static Mono&lt;Boolean&gt; dispatchTask(Tuple2&lt;Sinks.One&lt;Boolean&gt;, Mono&lt;Boolean&gt;&gt; task) {\r\n\t\t\ttask.getT1().tryEmitValue(true); // signal that lock is available and consume lock\r\n\t\t\treturn task.getT2(); // return Mono that completes when lock is released\r\n\t\t}\r\n\r\n\t\t@PreDestroy\r\n\t\tprivate void cleanup() {\r\n\t\t\tclose.tryEmitValue(true);\r\n\t\t}\r\n\r\n\t\tpublic &lt;T&gt; Publisher&lt;T&gt; lock(Publisher&lt;T&gt; publisher) {\r\n\t\t\treturn Flux.defer(() -&gt; this.waitForNext(publisher));\r\n\t\t}\r\n\r\n\t\tpublic &lt;T&gt; Mono&lt;T&gt; lock(Mono&lt;T&gt; publisher) {\r\n\t\t\treturn Mono.defer(() -&gt; this.waitForNext(publisher).next());\r\n\t\t}\r\n\r\n\t\tpublic &lt;T&gt; Flux&lt;T&gt; lock(Flux&lt;T&gt; publisher) {\r\n\t\t\treturn Flux.defer(() -&gt; this.waitForNext(publisher));\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Waits for an available lock in the taskQueue. When ReactiveSemaphore is ready, a lock will be allocated for the task\r\n\t\t * and will not be released until the provided task errors or completes. For this reason this operation should\r\n\t\t * only be performed on a hot publisher (a publisher that has been subscribed to). Therefore, this method should\r\n\t\t * always be wrapped inside a call to {@link Flux#defer(Supplier)} or {@link Mono#defer(Supplier)}.\r\n\t\t * @param task The task to execute once the ReactiveSemaphore has an available lock.\r\n\t\t * @return The task wrapped in a Flux\r\n\t\t * @param &lt;T&gt; The type of value returned by the task\r\n\t\t */\r\n\t\tprivate &lt;T&gt; Flux&lt;T&gt; waitForNext(Publisher&lt;T&gt; task) {\r\n\t\t\tvar ready = Sinks.&lt;Boolean&gt;one();\r\n\t\t\tvar release = Sinks.&lt;Boolean&gt;one();\r\n\t\t\ttaskQueue.tryEmitNext(Tuples.of(ready, release.asMono()));\r\n\t\t\treturn ready.asMono()\r\n\t\t\t\t\t.flatMapMany(ignored -&gt; Flux.from(task))\r\n\t\t\t\t\t.doOnComplete(() -&gt; release.tryEmitValue(true))\r\n\t\t\t\t\t.doOnError(err -&gt; release.tryEmitValue(true));\r\n\t\t}\r\n\t}\r\n\r\nUsage:\r\n\r\n\tReactiveSemaphore semaphore = new ReactiveSemaphore();\r\n\tsemaphore.lock(someFluxMonoOrPublisher);\r\n\r\nExample Test - in this test, we create 10 Monos that emit a value after 1 second and try running all of them in parallel, but we wrap them in a ReactiveSemaphore with a pool size of 2 so that no more than 2 ever run in parallel:\r\n\r\n\t@Test\r\n    public void testParallelExecution() {\r\n        var semaphore = new ReactiveSemaphore(2);\r\n        var monos = IntStream.range(0, 10)\r\n                .mapToObj(i -&gt; Mono.fromSupplier(() -&gt; {\r\n                            log.info(&quot;Executing Mono {}&quot;, i);\r\n                            return i;\r\n                        })\r\n                        .delayElement(Duration.ofMillis(1000)))\r\n                .map(mono -&gt; semaphore.lock(mono));\r\n\r\n        var allMonos = Flux.fromStream(monos).flatMap(m -&gt; m).doOnNext(v -&gt; log.info(&quot;Got value {}&quot;, v));\r\n\r\n        StepVerifier.create(allMonos)\r\n                .expectNextCount(10)\r\n                .verifyComplete();\r\n    }\r\n\t\r\n\t/* OUTPUT:\r\n\t12:52:40.752 [main] INFO my.package.ReactiveSemaphoreTest - Executing Mono 0\r\n\t12:52:40.755 [main] INFO my.package.ReactiveSemaphoreTest - Executing Mono 1\r\n\t12:52:41.762 [parallel-1] INFO my.package.ReactiveSemaphoreTest - Got value 0\r\n\t12:52:41.765 [parallel-1] INFO my.package.ReactiveSemaphoreTest - Executing Mono 2\r\n\t12:52:41.767 [parallel-2] INFO my.package.ReactiveSemaphoreTest - Got value 1\r\n\t12:52:41.767 [parallel-2] INFO my.package.ReactiveSemaphoreTest - Executing Mono 3\r\n\t12:52:42.780 [parallel-3] INFO my.package.ReactiveSemaphoreTest - Got value 2\r\n\t12:52:42.780 [parallel-4] INFO my.package.ReactiveSemaphoreTest - Executing Mono 4\r\n\t12:52:42.780 [parallel-3] INFO my.package.ReactiveSemaphoreTest - Got value 3\r\n\t12:52:42.780 [parallel-4] INFO my.package.ReactiveSemaphoreTest - Executing Mono 5\r\n\t12:52:43.790 [parallel-6] INFO my.package.ReactiveSemaphoreTest - Executing Mono 6\r\n\t12:52:43.790 [parallel-5] INFO my.package.ReactiveSemaphoreTest - Got value 4\r\n\t12:52:43.790 [parallel-5] INFO my.package.ReactiveSemaphoreTest - Got value 5\r\n\t12:52:43.791 [parallel-6] INFO my.package.ReactiveSemaphoreTest - Executing Mono 7\r\n\t12:52:44.802 [parallel-7] INFO my.package.ReactiveSemaphoreTest - Got value 6\r\n\t12:52:44.802 [parallel-7] INFO my.package.ReactiveSemaphoreTest - Got value 7\r\n\t12:52:44.802 [parallel-8] INFO my.package.ReactiveSemaphoreTest - Executing Mono 8\r\n\t12:52:44.802 [parallel-8] INFO my.package.ReactiveSemaphoreTest - Executing Mono 9\r\n\t12:52:45.814 [parallel-10] INFO my.package.ReactiveSemaphoreTest - Got value 9\r\n\t12:52:45.814 [parallel-10] INFO my.package.ReactiveSemaphoreTest - Got value 8 \r\n\r\n","title":"Nonblocking ReentrantLock with Reactor","body":"<p>I know this already has a couple reasonable answers, but I thought there was a (subjectively) simpler solution that leverages <code>flatMap</code> (in a semaphore-like use-case) or <code>concatMap</code> (in a <code>lock</code>/<code>synchronized</code> use-case) to control parallelization.</p>\n<p>This solution only uses Sinks and Reactor operators to support locking. Publishers that aren't subscribed to also will not consume a lock.</p>\n<pre><code>public class ReactiveSemaphore {\n\n    /**\n     * This can be thought of as a queue of lock handles. The first argument of the tuple is a signaler that accepts a value\n     * value when a lock is available. The second argument is a Mono that completes when the lock is released.\n     */\n    private final Sinks.Many&lt;Tuple2&lt;Sinks.One&lt;Boolean&gt;, Mono&lt;Boolean&gt;&gt;&gt; taskQueue;\n    private final Sinks.One&lt;Boolean&gt; close = Sinks.one();\n\n    /**\n     * Creates a ReactiveSemaphore that only allows one Publisher to be subscribed at a time. Executed by order\n     * of subscription.\n     */\n    public ReactiveSemaphore() {\n        this(1);\n    }\n\n    /**\n     * Creates a ReactiveSemaphore that allows up to poolSize Publishers to be subscribed in parallel.\n     * @param poolSize The number of allowed subscriptions to run in parallel.\n     */\n    public ReactiveSemaphore(int poolSize) {\n        taskQueue = Sinks.many().unicast().onBackpressureBuffer();\n\n        Flux&lt;Boolean&gt; tasks;\n        if (poolSize &lt;= 1)\n            // We could use flatMap with parallelism of 1, but that seems weird\n            tasks = taskQueue\n                    .asFlux()\n                    .concatMap(ReactiveSemaphore::dispatchTask);\n        else {\n            tasks = taskQueue\n                    .asFlux()\n                    .flatMap(ReactiveSemaphore::dispatchTask, poolSize);\n        }\n\n        tasks\n                .takeUntilOther(close.asMono())\n                .subscribe();\n    }\n\n    private static Mono&lt;Boolean&gt; dispatchTask(Tuple2&lt;Sinks.One&lt;Boolean&gt;, Mono&lt;Boolean&gt;&gt; task) {\n        task.getT1().tryEmitValue(true); // signal that lock is available and consume lock\n        return task.getT2(); // return Mono that completes when lock is released\n    }\n\n    @PreDestroy\n    private void cleanup() {\n        close.tryEmitValue(true);\n    }\n\n    public &lt;T&gt; Publisher&lt;T&gt; lock(Publisher&lt;T&gt; publisher) {\n        return Flux.defer(() -&gt; this.waitForNext(publisher));\n    }\n\n    public &lt;T&gt; Mono&lt;T&gt; lock(Mono&lt;T&gt; publisher) {\n        return Mono.defer(() -&gt; this.waitForNext(publisher).next());\n    }\n\n    public &lt;T&gt; Flux&lt;T&gt; lock(Flux&lt;T&gt; publisher) {\n        return Flux.defer(() -&gt; this.waitForNext(publisher));\n    }\n\n    /**\n     * Waits for an available lock in the taskQueue. When ReactiveSemaphore is ready, a lock will be allocated for the task\n     * and will not be released until the provided task errors or completes. For this reason this operation should\n     * only be performed on a hot publisher (a publisher that has been subscribed to). Therefore, this method should\n     * always be wrapped inside a call to {@link Flux#defer(Supplier)} or {@link Mono#defer(Supplier)}.\n     * @param task The task to execute once the ReactiveSemaphore has an available lock.\n     * @return The task wrapped in a Flux\n     * @param &lt;T&gt; The type of value returned by the task\n     */\n    private &lt;T&gt; Flux&lt;T&gt; waitForNext(Publisher&lt;T&gt; task) {\n        var ready = Sinks.&lt;Boolean&gt;one();\n        var release = Sinks.&lt;Boolean&gt;one();\n        taskQueue.tryEmitNext(Tuples.of(ready, release.asMono()));\n        return ready.asMono()\n                .flatMapMany(ignored -&gt; Flux.from(task))\n                .doOnComplete(() -&gt; release.tryEmitValue(true))\n                .doOnError(err -&gt; release.tryEmitValue(true));\n    }\n}\n</code></pre>\n<p>Usage:</p>\n<pre><code>ReactiveSemaphore semaphore = new ReactiveSemaphore();\nsemaphore.lock(someFluxMonoOrPublisher);\n</code></pre>\n<p>Example Test - in this test, we create 10 Monos that emit a value after 1 second and try running all of them in parallel, but we wrap them in a ReactiveSemaphore with a pool size of 2 so that no more than 2 ever run in parallel:</p>\n<pre><code>@Test\npublic void testParallelExecution() {\n    var semaphore = new ReactiveSemaphore(2);\n    var monos = IntStream.range(0, 10)\n            .mapToObj(i -&gt; Mono.fromSupplier(() -&gt; {\n                        log.info(&quot;Executing Mono {}&quot;, i);\n                        return i;\n                    })\n                    .delayElement(Duration.ofMillis(1000)))\n            .map(mono -&gt; semaphore.lock(mono));\n\n    var allMonos = Flux.fromStream(monos).flatMap(m -&gt; m).doOnNext(v -&gt; log.info(&quot;Got value {}&quot;, v));\n\n    StepVerifier.create(allMonos)\n            .expectNextCount(10)\n            .verifyComplete();\n}\n\n/* OUTPUT:\n12:52:40.752 [main] INFO my.package.ReactiveSemaphoreTest - Executing Mono 0\n12:52:40.755 [main] INFO my.package.ReactiveSemaphoreTest - Executing Mono 1\n12:52:41.762 [parallel-1] INFO my.package.ReactiveSemaphoreTest - Got value 0\n12:52:41.765 [parallel-1] INFO my.package.ReactiveSemaphoreTest - Executing Mono 2\n12:52:41.767 [parallel-2] INFO my.package.ReactiveSemaphoreTest - Got value 1\n12:52:41.767 [parallel-2] INFO my.package.ReactiveSemaphoreTest - Executing Mono 3\n12:52:42.780 [parallel-3] INFO my.package.ReactiveSemaphoreTest - Got value 2\n12:52:42.780 [parallel-4] INFO my.package.ReactiveSemaphoreTest - Executing Mono 4\n12:52:42.780 [parallel-3] INFO my.package.ReactiveSemaphoreTest - Got value 3\n12:52:42.780 [parallel-4] INFO my.package.ReactiveSemaphoreTest - Executing Mono 5\n12:52:43.790 [parallel-6] INFO my.package.ReactiveSemaphoreTest - Executing Mono 6\n12:52:43.790 [parallel-5] INFO my.package.ReactiveSemaphoreTest - Got value 4\n12:52:43.790 [parallel-5] INFO my.package.ReactiveSemaphoreTest - Got value 5\n12:52:43.791 [parallel-6] INFO my.package.ReactiveSemaphoreTest - Executing Mono 7\n12:52:44.802 [parallel-7] INFO my.package.ReactiveSemaphoreTest - Got value 6\n12:52:44.802 [parallel-7] INFO my.package.ReactiveSemaphoreTest - Got value 7\n12:52:44.802 [parallel-8] INFO my.package.ReactiveSemaphoreTest - Executing Mono 8\n12:52:44.802 [parallel-8] INFO my.package.ReactiveSemaphoreTest - Executing Mono 9\n12:52:45.814 [parallel-10] INFO my.package.ReactiveSemaphoreTest - Got value 9\n12:52:45.814 [parallel-10] INFO my.package.ReactiveSemaphoreTest - Got value 8 \n</code></pre>\n"}],"owner":{"account_id":14166112,"reputation":45,"user_id":10234033,"display_name":"Roman M."},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3722,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1681243196,"creation_date":1540505399,"question_id":52998809,"body_markdown":"I need to limit number of clients processing the same resource at the same time&lt;br&gt;\r\nso I&#39;ve tried to implement analog to \r\n\r\n    lock.lock();\r\n    try {\r\n         do work\r\n    } finally {\r\n        lock.unlock();\r\n    }\r\nbut in nonblocking manner with Reactor library.\r\nAnd I&#39;ve got something like this.\r\n\r\nBut I have a question:&lt;br&gt;\r\nIs there a better way to do this &lt;br&gt;\r\nor maybe someone know about implemented solution&lt;br&gt; \r\nor maybe this is not how it should be done in the reactive world and there is another approach for such problems?\r\n\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import reactor.core.publisher.EmitterProcessor;\r\n    import reactor.core.publisher.Flux;\r\n    import reactor.core.publisher.FluxSink;\r\n    \r\n    import javax.annotation.Nullable;\r\n    import java.time.Duration;\r\n    import java.util.Objects;\r\n    import java.util.concurrent.atomic.AtomicInteger;\r\n    \r\n    public class NonblockingLock {\r\n        private static final Logger LOG = LoggerFactory.getLogger(NonblockingLock.class);\r\n        \r\n        private String currentOwner;\r\n        private final AtomicInteger lockCounter = new AtomicInteger();\r\n        private final FluxSink&lt;Boolean&gt; notifierSink;\r\n        private final Flux&lt;Boolean&gt; notifier;\r\n        private final String resourceId;\r\n    \r\n        public NonblockingLock(String resourceId) {\r\n            this.resourceId = resourceId;\r\n            EmitterProcessor&lt;Boolean&gt; processor = EmitterProcessor.create(1, false);\r\n            notifierSink = processor.sink(FluxSink.OverflowStrategy.LATEST);\r\n            notifier = processor.startWith(true);\r\n        }\r\n    \r\n        /**\r\n         * Nonblocking version of\r\n         * &lt;pre&gt;&lt;code&gt;\r\n         *     lock.lock();\r\n         *     try {\r\n         *         do work\r\n         *     } finally {\r\n         *         lock.unlock();\r\n         *     }\r\n         * &lt;/code&gt;&lt;/pre&gt;\r\n         * */\r\n        public &lt;T&gt; Flux&lt;T&gt; processWithLock(String owner, @Nullable Duration tryLockTimeout, Flux&lt;T&gt; work) {\r\n            Objects.requireNonNull(owner, &quot;owner&quot;);\r\n            return notifier.filter(it -&gt; tryAcquire(owner))\r\n                    .next()\r\n                    .transform(locked -&gt; tryLockTimeout == null ? locked : locked.timeout(tryLockTimeout))\r\n                    .doOnSubscribe(s -&gt; LOG.debug(&quot;trying to obtain lock for resourceId: {}, by owner: {}&quot;, resourceId, owner))\r\n                    .doOnError(err -&gt; LOG.error(&quot;can&#39;t obtain lock for resourceId: {}, by owner: {}, error: {}&quot;, resourceId, owner, err.getMessage()))\r\n                    .flatMapMany(it -&gt; work)\r\n                    .doFinally(s -&gt; {\r\n                        if (tryRelease(owner)) {\r\n                            LOG.debug(&quot;release lock resourceId: {}, owner: {}&quot;, resourceId, owner);\r\n                            notifierSink.next(true);\r\n                        }\r\n                    });\r\n        }\r\n    \r\n        private boolean tryAcquire(String owner) {\r\n            boolean acquired;\r\n            synchronized (this) {\r\n                if (currentOwner == null) {\r\n                    currentOwner = owner;\r\n                }\r\n                acquired = currentOwner.equals(owner);\r\n                if (acquired) {\r\n                    lockCounter.incrementAndGet();\r\n                }\r\n            }\r\n            return acquired;\r\n        }\r\n    \r\n        private boolean tryRelease(String owner) {\r\n            boolean released = false;\r\n            synchronized (this) {\r\n                if (currentOwner.equals(owner)) {\r\n                    int count = lockCounter.decrementAndGet();\r\n                    if (count == 0) {\r\n                        currentOwner = null;\r\n                        released = true;\r\n                    }\r\n                }\r\n            }\r\n            return released;\r\n        }\r\n    }\r\n\r\nand this is how I suppose it should work\r\n\r\n    @Test\r\n    public void processWithLock() throws Exception {\r\n        NonblockingLock lock = new NonblockingLock(&quot;work&quot;);\r\n        String client1 = &quot;client1&quot;;\r\n        String client2 = &quot;client2&quot;;\r\n        Flux&lt;String&gt; requests = getWork(client1, lock)\r\n                //emulate async request for resource by another client\r\n                .mergeWith(Mono.delay(Duration.ofMillis(300)).flatMapMany(it -&gt; getWork(client2, lock)))\r\n                //emulate async request for resource by the same client\r\n                .mergeWith(Mono.delay(Duration.ofMillis(400)).flatMapMany(it -&gt; getWork(client1, lock)));\r\n        StepVerifier.create(requests)\r\n                .expectSubscription()\r\n                .expectNext(client1)\r\n                .expectNext(client1)\r\n                .expectNext(client1)\r\n                .expectNext(client1)\r\n                .expectNext(client1)\r\n                .expectNext(client1)\r\n                .expectNext(client2)\r\n                .expectNext(client2)\r\n                .expectNext(client2)\r\n                .expectComplete()\r\n                .verify(Duration.ofMillis(5000));\r\n    }\r\n    private static Flux&lt;String&gt; getWork(String client, NonblockingLock lock) {\r\n        return lock.processWithLock(client, null,\r\n                Flux.interval(Duration.ofMillis(300))\r\n                        .take(3)\r\n                        .map(i -&gt; client)\r\n                        .log(client)\r\n        );\r\n    }\r\n","title":"Nonblocking ReentrantLock with Reactor","body":"<p>I need to limit number of clients processing the same resource at the same time<br>\nso I've tried to implement analog to </p>\n\n<pre><code>lock.lock();\ntry {\n     do work\n} finally {\n    lock.unlock();\n}\n</code></pre>\n\n<p>but in nonblocking manner with Reactor library.\nAnd I've got something like this.</p>\n\n<p>But I have a question:<br>\nIs there a better way to do this <br>\nor maybe someone know about implemented solution<br> \nor maybe this is not how it should be done in the reactive world and there is another approach for such problems?</p>\n\n<pre><code>import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport reactor.core.publisher.EmitterProcessor;\nimport reactor.core.publisher.Flux;\nimport reactor.core.publisher.FluxSink;\n\nimport javax.annotation.Nullable;\nimport java.time.Duration;\nimport java.util.Objects;\nimport java.util.concurrent.atomic.AtomicInteger;\n\npublic class NonblockingLock {\n    private static final Logger LOG = LoggerFactory.getLogger(NonblockingLock.class);\n\n    private String currentOwner;\n    private final AtomicInteger lockCounter = new AtomicInteger();\n    private final FluxSink&lt;Boolean&gt; notifierSink;\n    private final Flux&lt;Boolean&gt; notifier;\n    private final String resourceId;\n\n    public NonblockingLock(String resourceId) {\n        this.resourceId = resourceId;\n        EmitterProcessor&lt;Boolean&gt; processor = EmitterProcessor.create(1, false);\n        notifierSink = processor.sink(FluxSink.OverflowStrategy.LATEST);\n        notifier = processor.startWith(true);\n    }\n\n    /**\n     * Nonblocking version of\n     * &lt;pre&gt;&lt;code&gt;\n     *     lock.lock();\n     *     try {\n     *         do work\n     *     } finally {\n     *         lock.unlock();\n     *     }\n     * &lt;/code&gt;&lt;/pre&gt;\n     * */\n    public &lt;T&gt; Flux&lt;T&gt; processWithLock(String owner, @Nullable Duration tryLockTimeout, Flux&lt;T&gt; work) {\n        Objects.requireNonNull(owner, \"owner\");\n        return notifier.filter(it -&gt; tryAcquire(owner))\n                .next()\n                .transform(locked -&gt; tryLockTimeout == null ? locked : locked.timeout(tryLockTimeout))\n                .doOnSubscribe(s -&gt; LOG.debug(\"trying to obtain lock for resourceId: {}, by owner: {}\", resourceId, owner))\n                .doOnError(err -&gt; LOG.error(\"can't obtain lock for resourceId: {}, by owner: {}, error: {}\", resourceId, owner, err.getMessage()))\n                .flatMapMany(it -&gt; work)\n                .doFinally(s -&gt; {\n                    if (tryRelease(owner)) {\n                        LOG.debug(\"release lock resourceId: {}, owner: {}\", resourceId, owner);\n                        notifierSink.next(true);\n                    }\n                });\n    }\n\n    private boolean tryAcquire(String owner) {\n        boolean acquired;\n        synchronized (this) {\n            if (currentOwner == null) {\n                currentOwner = owner;\n            }\n            acquired = currentOwner.equals(owner);\n            if (acquired) {\n                lockCounter.incrementAndGet();\n            }\n        }\n        return acquired;\n    }\n\n    private boolean tryRelease(String owner) {\n        boolean released = false;\n        synchronized (this) {\n            if (currentOwner.equals(owner)) {\n                int count = lockCounter.decrementAndGet();\n                if (count == 0) {\n                    currentOwner = null;\n                    released = true;\n                }\n            }\n        }\n        return released;\n    }\n}\n</code></pre>\n\n<p>and this is how I suppose it should work</p>\n\n<pre><code>@Test\npublic void processWithLock() throws Exception {\n    NonblockingLock lock = new NonblockingLock(\"work\");\n    String client1 = \"client1\";\n    String client2 = \"client2\";\n    Flux&lt;String&gt; requests = getWork(client1, lock)\n            //emulate async request for resource by another client\n            .mergeWith(Mono.delay(Duration.ofMillis(300)).flatMapMany(it -&gt; getWork(client2, lock)))\n            //emulate async request for resource by the same client\n            .mergeWith(Mono.delay(Duration.ofMillis(400)).flatMapMany(it -&gt; getWork(client1, lock)));\n    StepVerifier.create(requests)\n            .expectSubscription()\n            .expectNext(client1)\n            .expectNext(client1)\n            .expectNext(client1)\n            .expectNext(client1)\n            .expectNext(client1)\n            .expectNext(client1)\n            .expectNext(client2)\n            .expectNext(client2)\n            .expectNext(client2)\n            .expectComplete()\n            .verify(Duration.ofMillis(5000));\n}\nprivate static Flux&lt;String&gt; getWork(String client, NonblockingLock lock) {\n    return lock.processWithLock(client, null,\n            Flux.interval(Duration.ofMillis(300))\n                    .take(3)\n                    .map(i -&gt; client)\n                    .log(client)\n    );\n}\n</code></pre>\n"},{"tags":["java","android","flutter","firebase","firebase-admin"],"answers":[{"tags":[],"owner":{"account_id":17389775,"reputation":396,"user_id":12600501,"display_name":"Dhaval Italiya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670748936,"creation_date":1670748936,"answer_id":74759471,"question_id":74095080,"body_markdown":"I don&#39;t know how but, your id token string is not passed fully, make sure you are passing whole string of Id token.","title":"Firebase IdToken not getting validated with Admin SDK","body":"<p>I don't know how but, your id token string is not passed fully, make sure you are passing whole string of Id token.</p>\n"},{"tags":[],"owner":{"account_id":22006971,"reputation":47,"user_id":16277776,"display_name":"anonymous"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681242919,"creation_date":1670926172,"answer_id":74783116,"question_id":74095080,"body_markdown":"It&#39;s absolutely my mistake. I was not knowing the difference between access token and idToken and also diff between Oauth2 and OIDC. later after reading about these concepts, I am able to resolve it.\r\n\r\nBasically, what I was trying to do is create accessToken using firebase and pass it to verifyIdToken which was wrong.\r\n\r\nLater when I have written a web application and received a idToken by google login using firebase and passed it to this method at backend it worked.","title":"Firebase IdToken not getting validated with Admin SDK","body":"<p>It's absolutely my mistake. I was not knowing the difference between access token and idToken and also diff between Oauth2 and OIDC. later after reading about these concepts, I am able to resolve it.</p>\n<p>Basically, what I was trying to do is create accessToken using firebase and pass it to verifyIdToken which was wrong.</p>\n<p>Later when I have written a web application and received a idToken by google login using firebase and passed it to this method at backend it worked.</p>\n"}],"owner":{"account_id":22006971,"reputation":47,"user_id":16277776,"display_name":"anonymous"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":347,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681242919,"creation_date":1665998501,"question_id":74095080,"body_markdown":"I need to do google signin in flutter app using firebase. Generate idToken at client, and send it to backend Admin SDK for verification of idToken.\r\n\r\nIssue: I am getting below error when calling method of Firebase Admin SDK.\r\n**FirebaseAuth.getInstance(firebaseApp).verifyIdToken(clientIdToken);** \r\n\r\nerror: \r\n```\r\n\r\ncom.google.firebase.auth.FirebaseAuthException: Failed to parse Firebase ID token. Make sure you passed a string that represents a complete and valid JWT. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.\r\n\r\n\tat com.google.firebase.auth.FirebaseTokenVerifierImpl.newException(FirebaseTokenVerifierImpl.java:237)\r\n\tat com.google.firebase.auth.FirebaseTokenVerifierImpl.parse(FirebaseTokenVerifierImpl.java:153)\r\n\tat com.google.firebase.auth.FirebaseTokenVerifierImpl.verifyToken(FirebaseTokenVerifierImpl.java:99)\r\n\tat com.google.firebase.auth.AbstractFirebaseAuth$3.execute(AbstractFirebaseAuth.java:307)\r\n\tat com.google.firebase.auth.AbstractFirebaseAuth$3.execute(AbstractFirebaseAuth.java:304)\r\n\tat com.google.firebase.internal.CallableOperation.call(CallableOperation.java:36)\r\n\tat com.google.firebase.auth.AbstractFirebaseAuth.verifyIdToken(AbstractFirebaseAuth.java:269)\r\n\tat com.google.firebase.auth.AbstractFirebaseAuth.verifyIdToken(AbstractFirebaseAuth.java:241)\r\n\tat com.dummy.poc.firebase.FirebaseApplicationTests.contextLoads(FirebaseApplicationTests.java:45)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: java.lang.IllegalArgumentException: com.google.common.io.BaseEncoding$DecodingException: Invalid input length 153\r\n\tat com.google.common.io.BaseEncoding.decode(BaseEncoding.java:218)\r\n\tat com.google.api.client.util.Base64.decodeBase64(Base64.java:106)\r\n\tat com.google.api.client.json.webtoken.JsonWebSignature$Parser.parse(JsonWebSignature.java:551)\r\n\tat com.google.api.client.auth.openidconnect.IdToken.parse(IdToken.java:155)\r\n\tat com.google.firebase.auth.FirebaseTokenVerifierImpl.parse(FirebaseTokenVerifierImpl.java:143)\r\n\t... 76 more\r\nCaused by: com.google.common.io.BaseEncoding$DecodingException: Invalid input length 153\r\n\tat com.google.common.io.BaseEncoding$Base64Encoding.decodeTo(BaseEncoding.java:968)\r\n\tat com.google.common.io.BaseEncoding.decodeChecked(BaseEncoding.java:233)\r\n\tat com.google.common.io.BaseEncoding.decode(BaseEncoding.java:216)\r\n\t... 80 more\r\n```\r\n\r\nClient code:\r\n**pubsec.yml**\r\n```\r\ndependencies:\r\n  flutter:\r\n    sdk: flutter\r\n\r\n  cupertino_icons: ^1.0.2\r\n  provider: ^6.0.0\r\n  google_sign_in: ^5.0.7\r\n  firebase_core: ^1.6.0\r\n  firebase_auth: ^3.1.1\r\n```\r\n\r\n**ControllerLogin.dart**\r\n```\r\nallowUserLoginWithGoogle() async{\r\n    UserCredential credential  = await signInWithGoogle();\r\n\r\n    print(&#39;in allowUserLoginWithGoogle after google sign in&#39;);\r\n\r\n    User? user = credential.user;\r\n\r\n    String? idToken = await user?.getIdToken();  // I have tried for this idToken verification also. getting same error but instead of 153 getting 157\r\n\r\n    User? mUser = await FirebaseAuth.instance.currentUser;\r\n    var mUserIdToken = await mUser?.getIdToken(); // I am sending this IdToken to backend for verification and getting error on verifying the same.\r\n\r\n    notifyListeners();\r\n  }\r\n\r\nFuture&lt;UserCredential&gt; signInWithGoogle() async {\r\n    final GoogleSignInAccount? googleUser = await GoogleSignIn().signIn();\r\n\r\n    final GoogleSignInAuthentication? googleAuth = await googleUser?.authentication;\r\n\r\n    final credential = GoogleAuthProvider.credential(\r\n      accessToken: googleAuth?.accessToken,\r\n      idToken: googleAuth?.idToken,\r\n    );\r\n\r\n    await Firebase.initializeApp();\r\n\r\n    return await FirebaseAuth.instance.signInWithCredential(credential);\r\n  }\r\n```\r\n\r\n**Backend verify id token code**\r\n```\r\npublic FirebaseApp firebaseApp() throws Exception {\r\n\t\tFileInputStream serviceAccount =\r\n\t\t\t\tnew FileInputStream(&quot;/Users/anonymous/Documents/app/poc/firebase/src/main/java/com/dummy/poc/firebase/auth-test-project-b0c91-firebase-adminsdk-vrz4u-ab7b3962b0.json&quot;);\r\n\r\n\t\tFirebaseOptions options = new FirebaseOptions.Builder()\r\n\t\t\t\t.setCredentials(GoogleCredentials.fromStream(serviceAccount))\r\n\t\t\t\t.build();\r\n\r\n\t\treturn FirebaseApp.initializeApp(options);\r\n}\r\n\r\n@Test\r\nvoid contextLoads() throws Exception {\r\n    String mUserIdToken = &lt;id token from client&gt;;\r\n    FirebaseToken firebaseToken\r\n    FirebaseAuth.getInstance(firebaseApp()).verifyIdToken(mUserIdToken); // this line is giving me above error\r\n}\r\n```\r\n\r\nI have tried verifying the idToken on jwt.io. There I am able to decode the jwt token although it shows invalid signature but the token is getting decoded on jwt.io\r\nPlease help.","title":"Firebase IdToken not getting validated with Admin SDK","body":"<p>I need to do google signin in flutter app using firebase. Generate idToken at client, and send it to backend Admin SDK for verification of idToken.</p>\n<p>Issue: I am getting below error when calling method of Firebase Admin SDK.\n<strong>FirebaseAuth.getInstance(firebaseApp).verifyIdToken(clientIdToken);</strong></p>\n<p>error:</p>\n<pre><code>\ncom.google.firebase.auth.FirebaseAuthException: Failed to parse Firebase ID token. Make sure you passed a string that represents a complete and valid JWT. See https://firebase.google.com/docs/auth/admin/verify-id-tokens for details on how to retrieve an ID token.\n\n    at com.google.firebase.auth.FirebaseTokenVerifierImpl.newException(FirebaseTokenVerifierImpl.java:237)\n    at com.google.firebase.auth.FirebaseTokenVerifierImpl.parse(FirebaseTokenVerifierImpl.java:153)\n    at com.google.firebase.auth.FirebaseTokenVerifierImpl.verifyToken(FirebaseTokenVerifierImpl.java:99)\n    at com.google.firebase.auth.AbstractFirebaseAuth$3.execute(AbstractFirebaseAuth.java:307)\n    at com.google.firebase.auth.AbstractFirebaseAuth$3.execute(AbstractFirebaseAuth.java:304)\n    at com.google.firebase.internal.CallableOperation.call(CallableOperation.java:36)\n    at com.google.firebase.auth.AbstractFirebaseAuth.verifyIdToken(AbstractFirebaseAuth.java:269)\n    at com.google.firebase.auth.AbstractFirebaseAuth.verifyIdToken(AbstractFirebaseAuth.java:241)\n    at com.dummy.poc.firebase.FirebaseApplicationTests.contextLoads(FirebaseApplicationTests.java:45)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.lang.IllegalArgumentException: com.google.common.io.BaseEncoding$DecodingException: Invalid input length 153\n    at com.google.common.io.BaseEncoding.decode(BaseEncoding.java:218)\n    at com.google.api.client.util.Base64.decodeBase64(Base64.java:106)\n    at com.google.api.client.json.webtoken.JsonWebSignature$Parser.parse(JsonWebSignature.java:551)\n    at com.google.api.client.auth.openidconnect.IdToken.parse(IdToken.java:155)\n    at com.google.firebase.auth.FirebaseTokenVerifierImpl.parse(FirebaseTokenVerifierImpl.java:143)\n    ... 76 more\nCaused by: com.google.common.io.BaseEncoding$DecodingException: Invalid input length 153\n    at com.google.common.io.BaseEncoding$Base64Encoding.decodeTo(BaseEncoding.java:968)\n    at com.google.common.io.BaseEncoding.decodeChecked(BaseEncoding.java:233)\n    at com.google.common.io.BaseEncoding.decode(BaseEncoding.java:216)\n    ... 80 more\n</code></pre>\n<p>Client code:\n<strong>pubsec.yml</strong></p>\n<pre><code>dependencies:\n  flutter:\n    sdk: flutter\n\n  cupertino_icons: ^1.0.2\n  provider: ^6.0.0\n  google_sign_in: ^5.0.7\n  firebase_core: ^1.6.0\n  firebase_auth: ^3.1.1\n</code></pre>\n<p><strong>ControllerLogin.dart</strong></p>\n<pre><code>allowUserLoginWithGoogle() async{\n    UserCredential credential  = await signInWithGoogle();\n\n    print('in allowUserLoginWithGoogle after google sign in');\n\n    User? user = credential.user;\n\n    String? idToken = await user?.getIdToken();  // I have tried for this idToken verification also. getting same error but instead of 153 getting 157\n\n    User? mUser = await FirebaseAuth.instance.currentUser;\n    var mUserIdToken = await mUser?.getIdToken(); // I am sending this IdToken to backend for verification and getting error on verifying the same.\n\n    notifyListeners();\n  }\n\nFuture&lt;UserCredential&gt; signInWithGoogle() async {\n    final GoogleSignInAccount? googleUser = await GoogleSignIn().signIn();\n\n    final GoogleSignInAuthentication? googleAuth = await googleUser?.authentication;\n\n    final credential = GoogleAuthProvider.credential(\n      accessToken: googleAuth?.accessToken,\n      idToken: googleAuth?.idToken,\n    );\n\n    await Firebase.initializeApp();\n\n    return await FirebaseAuth.instance.signInWithCredential(credential);\n  }\n</code></pre>\n<p><strong>Backend verify id token code</strong></p>\n<pre><code>public FirebaseApp firebaseApp() throws Exception {\n        FileInputStream serviceAccount =\n                new FileInputStream(&quot;/Users/anonymous/Documents/app/poc/firebase/src/main/java/com/dummy/poc/firebase/auth-test-project-b0c91-firebase-adminsdk-vrz4u-ab7b3962b0.json&quot;);\n\n        FirebaseOptions options = new FirebaseOptions.Builder()\n                .setCredentials(GoogleCredentials.fromStream(serviceAccount))\n                .build();\n\n        return FirebaseApp.initializeApp(options);\n}\n\n@Test\nvoid contextLoads() throws Exception {\n    String mUserIdToken = &lt;id token from client&gt;;\n    FirebaseToken firebaseToken\n    FirebaseAuth.getInstance(firebaseApp()).verifyIdToken(mUserIdToken); // this line is giving me above error\n}\n</code></pre>\n<p>I have tried verifying the idToken on jwt.io. There I am able to decode the jwt token although it shows invalid signature but the token is getting decoded on jwt.io\nPlease help.</p>\n"},{"tags":["java","spring-boot","pom.xml","spring-websocket","spring-boot-maven-plugin"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1593495264,"post_id":62650732,"comment_id":110793358,"body_markdown":"Did you add the `spring-boot-maven-plugin` to your `pom.xml` to create the correct jar?","body":"Did you add the <code>spring-boot-maven-plugin</code> to your <code>pom.xml</code> to create the correct jar?"},{"owner":{"account_id":18449759,"reputation":91,"user_id":13440171,"display_name":"Senthil Star"},"score":0,"creation_date":1593497684,"post_id":62650732,"comment_id":110794068,"body_markdown":"Yes. Updated the post","body":"Yes. Updated the post"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1593497852,"post_id":62650732,"comment_id":110794129,"body_markdown":"if `mvn package` doesn&#39;t generate the jar, but starts the app, you probably have a test that blocks the proces.","body":"if <code>mvn package</code> doesn&#39;t generate the jar, but starts the app, you probably have a test that blocks the proces."},{"owner":{"account_id":18449759,"reputation":91,"user_id":13440171,"display_name":"Senthil Star"},"score":0,"creation_date":1593515520,"post_id":62650732,"comment_id":110802643,"body_markdown":"@M.Deinum Please find the code updated above","body":"@M.Deinum Please find the code updated above"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1593516615,"post_id":62650732,"comment_id":110803156,"body_markdown":"Your service is blocking, hence preventing the test from finishing and thus maven cannot produce a jar.","body":"Your service is blocking, hence preventing the test from finishing and thus maven cannot produce a jar."},{"owner":{"account_id":12546089,"reputation":327,"user_id":9129342,"display_name":"paul035"},"score":0,"creation_date":1686500170,"post_id":62650732,"comment_id":134803774,"body_markdown":"https://paulsofts.com/how-to-package-spring-boot-application-to-jar/","body":"<a href=\"https://paulsofts.com/how-to-package-spring-boot-application-to-jar/\" rel=\"nofollow noreferrer\">paulsofts.com/how-to-package-spring-boot-application-to-jar</a>"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40480,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1593497003,"creation_date":1593497003,"answer_id":62651193,"question_id":62650732,"body_markdown":"In order to run the jar with `java -jar` you should use `spring-boot-maven-plugin`:\r\n\r\n~~~\r\n&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n~~~\r\n\r\nThis plugin will &quot;bake&quot; all the dependencies of the project into the JAR and add some &quot;technical&quot; code that will allow to run this JAR with `java -jar` (the exact details are kind of out of scope for this question)\r\n\r\nIf you add it into the build, and run `mvn package / mvn install` it will create in the `target` folder a big JAR next to the original jar (that will be renamed with suffix `.original`). \r\n\r\nYou can open it with WinRAR/WinZIP and make sure that all your classes are there and all the dependencies are in `BOOT-INF/lib` folder. \r\n\r\nThen you can run the project with `java -jar`\r\n\r\n\r\n","title":"Build jar and run spring boot from cmd","body":"<p>In order to run the jar with <code>java -jar</code> you should use <code>spring-boot-maven-plugin</code>:</p>\n<pre><code>&lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;2.3.0.RELEASE&lt;/version&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>This plugin will &quot;bake&quot; all the dependencies of the project into the JAR and add some &quot;technical&quot; code that will allow to run this JAR with <code>java -jar</code> (the exact details are kind of out of scope for this question)</p>\n<p>If you add it into the build, and run <code>mvn package / mvn install</code> it will create in the <code>target</code> folder a big JAR next to the original jar (that will be renamed with suffix <code>.original</code>).</p>\n<p>You can open it with WinRAR/WinZIP and make sure that all your classes are there and all the dependencies are in <code>BOOT-INF/lib</code> folder.</p>\n<p>Then you can run the project with <code>java -jar</code></p>\n"},{"tags":[],"owner":{"account_id":8964761,"reputation":2289,"user_id":6685903,"display_name":"Ritu Gupta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619607841,"creation_date":1619607841,"answer_id":67299008,"question_id":62650732,"body_markdown":" 1. In `pom.xml` add tag `&lt;packaging&gt;jar&lt;/packaging&gt;`.\r\n 2. you can `build` the `maven project` using command `mvn package` or `maven install`. It will create the `.jar` file inside `target` folder.\r\n3. run command from location where `.jar` is present - `java -jar jarName.jar`\r\n\r\nNow you can access your `system`","title":"Build jar and run spring boot from cmd","body":"<ol>\n<li>In <code>pom.xml</code> add tag <code>&lt;packaging&gt;jar&lt;/packaging&gt;</code>.</li>\n<li>you can <code>build</code> the <code>maven project</code> using command <code>mvn package</code> or <code>maven install</code>. It will create the <code>.jar</code> file inside <code>target</code> folder.</li>\n<li>run command from location where <code>.jar</code> is present - <code>java -jar jarName.jar</code></li>\n</ol>\n<p>Now you can access your <code>system</code></p>\n"},{"tags":[],"owner":{"account_id":12650199,"reputation":327,"user_id":9218991,"display_name":"AKASH GUDADHE"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1648201177,"creation_date":1648201177,"answer_id":71614834,"question_id":62650732,"body_markdown":"# Follow these steps \r\n&gt; **for eclipse/spring tool suite**\r\n\r\n- right click on project name to get these options --&gt; Click on run as `maven build`\r\n[![right click on project name to get these options][1]][1]\r\n\r\n- Add Goal as package and click on Run button at bottom right corner\r\n[![goal for package][2]][2]\r\n\r\n- jar file will be generated inside **target** folder of your project. You can locate this and then run `java -jar` command\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/O3Etm.png\r\n  [2]: https://i.stack.imgur.com/FT37l.png\r\n  [3]: https://i.stack.imgur.com/0NJyH.png","title":"Build jar and run spring boot from cmd","body":"<h1>Follow these steps</h1>\n<blockquote>\n<p><strong>for eclipse/spring tool suite</strong></p>\n</blockquote>\n<ul>\n<li><p>right click on project name to get these options --&gt; Click on run as <code>maven build</code>\n<a href=\"https://i.stack.imgur.com/O3Etm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/O3Etm.png\" alt=\"right click on project name to get these options\" /></a></p>\n</li>\n<li><p>Add Goal as package and click on Run button at bottom right corner\n<a href=\"https://i.stack.imgur.com/FT37l.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FT37l.png\" alt=\"goal for package\" /></a></p>\n</li>\n<li><p>jar file will be generated inside <strong>target</strong> folder of your project. You can locate this and then run <code>java -jar</code> command\n<a href=\"https://i.stack.imgur.com/0NJyH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0NJyH.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":22614408,"reputation":1,"user_id":16794109,"display_name":"ibrahim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681242177,"creation_date":1681241214,"answer_id":75989493,"question_id":62650732,"body_markdown":"if you don&#39;t use tests . you can use this solution . \r\nbefore\r\n you must delete test folder after you must run mvn clean install command in your project folder . after you can add this code in pom.xml anywhere\r\n`\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n`and run mvn package command . the jar file will create . \r\n","title":"Build jar and run spring boot from cmd","body":"<p>if you don't use tests . you can use this solution .\nbefore\nyou must delete test folder after you must run mvn clean install command in your project folder . after you can add this code in pom.xml anywhere\n<code>  &lt;packaging&gt;jar&lt;/packaging&gt;</code>and run mvn package command . the jar file will create .</p>\n"}],"owner":{"account_id":18449759,"reputation":91,"user_id":13440171,"display_name":"Senthil Star"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55982,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":4,"score":9,"last_activity_date":1681242177,"creation_date":1593494315,"question_id":62650732,"body_markdown":"I&#39;m new to springboot and using springboot 2 version.\r\n\r\nI would like to run my spring boot application using : **java -jar my-app-0.0.1-SNAPSHOT.jar** from the command prompt.\r\n\r\nHowever, when i build the application using eclipse it calls myService.getMyMethod() directly and does not build the jar.\r\n\r\nI want to build the jar file first and then run **java -jar my-app-0.0.1-SNAPSHOT.jar** from the command prompt which will invoke myService.getMyMethod()\r\n\r\nI already have spring-boot-maven-plugin in pom.xml, running **mvn package** / **mvn install** starts the application but not generating the jar file in the target folder. mvn clean package also not working, MyApplication  is using implements CommandLineRunner and starts invoking the method on build, hence not generating the build jar file\r\n\r\nMy main class:\r\n ```\r\n@SpringBootApplication\r\npublic class MyApplication implements CommandLineRunner {\r\n\r\nprivate static String URL = &quot;ws://localhost:8080/spring-mvc-java/chat&quot;;\r\n\r\n\t@Autowired\r\n\tprivate MyService myService;\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MyApplication.class, args);\r\n\t}\r\n\t@Override\r\n\tpublic void run(String... args) throws Exception {\r\n\t\tmyService.getMyMethod(URL);\r\n\t}\r\n}\r\n\r\n ```\r\nMy service class:\r\n\r\n ```\r\n@Service\r\npublic class MyServiceImpl implements MyService {\r\n\r\n      public void getMyMethod(String URL){\r\n\t\t\tWebSocketClient client = new StandardWebSocketClient();\r\n\t\t\tWebSocketStompClient stompClient = new WebSocketStompClient(client);\r\n\t\t\tstompClient.setMessageConverter(new MappingJackson2MessageConverter());\r\n\t\t\tStompSessionHandler sessionHandler = new MyStompSessionHandler();\r\n\t\t\tstompClient.connect(URL, sessionHandler);\r\n\t\t\tnew Scanner(System.in).nextLine(); // Don&#39;t close immediately.\r\n\t\t\t}\r\n}\r\n ```","title":"Build jar and run spring boot from cmd","body":"<p>I'm new to springboot and using springboot 2 version.</p>\n<p>I would like to run my spring boot application using : <strong>java -jar my-app-0.0.1-SNAPSHOT.jar</strong> from the command prompt.</p>\n<p>However, when i build the application using eclipse it calls myService.getMyMethod() directly and does not build the jar.</p>\n<p>I want to build the jar file first and then run <strong>java -jar my-app-0.0.1-SNAPSHOT.jar</strong> from the command prompt which will invoke myService.getMyMethod()</p>\n<p>I already have spring-boot-maven-plugin in pom.xml, running <strong>mvn package</strong> / <strong>mvn install</strong> starts the application but not generating the jar file in the target folder. mvn clean package also not working, MyApplication  is using implements CommandLineRunner and starts invoking the method on build, hence not generating the build jar file</p>\n<p>My main class:</p>\n<pre><code>@SpringBootApplication\npublic class MyApplication implements CommandLineRunner {\n\nprivate static String URL = &quot;ws://localhost:8080/spring-mvc-java/chat&quot;;\n\n   @Autowired\n   private MyService myService;\n\n   public static void main(String[] args) {\n       SpringApplication.run(MyApplication.class, args);\n   }\n   @Override\n   public void run(String... args) throws Exception {\n       myService.getMyMethod(URL);\n   }\n}\n\n</code></pre>\n<p>My service class:</p>\n<pre><code>@Service\npublic class MyServiceImpl implements MyService {\n\n     public void getMyMethod(String URL){\n           WebSocketClient client = new StandardWebSocketClient();\n           WebSocketStompClient stompClient = new WebSocketStompClient(client);\n           stompClient.setMessageConverter(new MappingJackson2MessageConverter());\n           StompSessionHandler sessionHandler = new MyStompSessionHandler();\n           stompClient.connect(URL, sessionHandler);\n           new Scanner(System.in).nextLine(); // Don't close immediately.\n           }\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2310386,"reputation":2253,"user_id":2028640,"accept_rate":71,"display_name":"Pat"},"score":1,"creation_date":1405529906,"post_id":24786399,"comment_id":38467534,"body_markdown":"Rather than the question `What is system.in`, I believe, you should first understand, what are constructor parameters. In ur sample, `new Scanner(System.in)`, it is calling the Scanner constructor and passing system.in as a parameter. And System.in is the standard input stream - typically keyboard.","body":"Rather than the question <code>What is system.in</code>, I believe, you should first understand, what are constructor parameters. In ur sample, <code>new Scanner(System.in)</code>, it is calling the Scanner constructor and passing system.in as a parameter. And System.in is the standard input stream - typically keyboard."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1510902561,"post_id":24786399,"comment_id":81641952,"body_markdown":"`System.in` is an object. That object is passed as argument to the `Scanner` constructor (more precisely, a reference to it is).","body":"<code>System.in</code> is an object. That object is passed as argument to the <code>Scanner</code> constructor (more precisely, a reference to it is)."},{"owner":{"account_id":1412214,"reputation":1440,"user_id":1338585,"accept_rate":54,"display_name":"SK."},"score":3,"creation_date":1517925736,"post_id":24786399,"comment_id":84286378,"body_markdown":"Who are you give a negative vote??? Please encourage others to ask questions. if you don&#39;t like, just ignore...","body":"Who are you give a negative vote??? Please encourage others to ask questions. if you don&#39;t like, just ignore..."}],"answers":[{"tags":[],"owner":{"account_id":3502893,"reputation":4596,"user_id":2929205,"accept_rate":100,"display_name":"ltalhouarne"},"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1405529511,"creation_date":1405529511,"answer_id":24786425,"question_id":24786399,"body_markdown":"`System.in` is the &quot;standard&quot; input stream.\r\n\r\nTake a look at the following documentation: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html","title":"What is system.in","body":"<p><code>System.in</code> is the \"standard\" input stream.</p>\n\n<p>Take a look at the following documentation: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/System.html</a></p>\n"},{"tags":[],"owner":{"account_id":2177522,"reputation":120796,"user_id":1927832,"accept_rate":49,"display_name":"Suresh Atta"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1405529541,"creation_date":1405529541,"answer_id":24786431,"question_id":24786399,"body_markdown":"Scanner class accepts input stream as a parameter and System class have a static variable `in` which is of type `InputStream`. `System.in` gives you a instance of of type `InputStream`.\r\n\r\nCheck this [`doc of public static final InputStream in`][1] \r\n\r\n&gt;The &quot;standard&quot; input stream. This stream is already open and ready to supply input data. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in","title":"What is system.in","body":"<p>Scanner class accepts input stream as a parameter and System class have a static variable <code>in</code> which is of type <code>InputStream</code>. <code>System.in</code> gives you a instance of of type <code>InputStream</code>.</p>\n\n<p>Check this <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#in\" rel=\"noreferrer\"><code>doc of public static final InputStream in</code></a> </p>\n\n<blockquote>\n  <p>The \"standard\" input stream. This stream is already open and ready to supply input data. </p>\n</blockquote>\n"},{"tags":[],"owner":{"display_name":"user3846015"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1405529548,"creation_date":1405529548,"answer_id":24786434,"question_id":24786399,"body_markdown":"From  the [source][1]:\r\n\r\n&gt; System.in is an InputStream which is typically connected to keyboard\r\n&gt; input of console programs. System.in is not used as often since data\r\n&gt; is commonly passed to a command line Java application via command line\r\n&gt; arguments, or configuration files. In applications with GUI the input\r\n&gt; to the application is given via the GUI. This is a separate input\r\n&gt; mechanism from Java IO.\r\n\r\n\r\n  [1]: http://tutorials.jenkov.com/java-io/system-in-out-error.html#system-in","title":"What is system.in","body":"<p>From  the <a href=\"http://tutorials.jenkov.com/java-io/system-in-out-error.html#system-in\" rel=\"noreferrer\">source</a>:</p>\n\n<blockquote>\n  <p>System.in is an InputStream which is typically connected to keyboard\n  input of console programs. System.in is not used as often since data\n  is commonly passed to a command line Java application via command line\n  arguments, or configuration files. In applications with GUI the input\n  to the application is given via the GUI. This is a separate input\n  mechanism from Java IO.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":12270579,"reputation":21,"user_id":8955834,"display_name":"Praveen Chaurasiya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1510898069,"creation_date":1510898069,"answer_id":47344125,"question_id":24786399,"body_markdown":"Scanner class has a constructor Scanner(InputStream) in its profile i.e when we call Scanner() constructor during the object creation time it will let you to pass the object of InputStream class.\r\n\r\n&quot;in&quot; is an object of &quot;InputStream&quot; class defined in System class(like &quot;out&quot; is an object of PrintStream class defined in System class).\r\n\r\nThus System.in is nothing but calling the &quot;in&quot; object of InputStream class defined in System class when Scanner constructor is called during object creation time.\r\n\r\nScanner(InputStream) is pre-defined constructor in Scanner class which when calls requires the object of InputStream class as the parameter and that object is System.in. ","title":"What is system.in","body":"<p>Scanner class has a constructor Scanner(InputStream) in its profile i.e when we call Scanner() constructor during the object creation time it will let you to pass the object of InputStream class.</p>\n\n<p>\"in\" is an object of \"InputStream\" class defined in System class(like \"out\" is an object of PrintStream class defined in System class).</p>\n\n<p>Thus System.in is nothing but calling the \"in\" object of InputStream class defined in System class when Scanner constructor is called during object creation time.</p>\n\n<p>Scanner(InputStream) is pre-defined constructor in Scanner class which when calls requires the object of InputStream class as the parameter and that object is System.in. </p>\n"},{"tags":[],"owner":{"account_id":14623010,"reputation":7,"user_id":10561094,"display_name":"Vinita Tyagi"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1541075281,"creation_date":1541073721,"answer_id":53100901,"question_id":24786399,"body_markdown":"`System.in` in java means to take input from the keyboard or user.\r\n`System.out` in java means to print the output to console.","title":"What is system.in","body":"<p><code>System.in</code> in java means to take input from the keyboard or user.\n<code>System.out</code> in java means to print the output to console.</p>\n"},{"tags":[],"owner":{"account_id":3382612,"reputation":495,"user_id":2839343,"display_name":"Eric H."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1586398952,"creation_date":1586398952,"answer_id":61112979,"question_id":24786399,"body_markdown":"The Scanner constructor&#39;s parameter *System.in* references the static InputStream field *in* defined in the final System class. As a static field *in* requires its class identifier. \r\n\r\nOracle states that *in* is the &quot;standard&quot; input stream[1], not that System.in is. The quotes around standard likely refer to the irony that inputting from a keyboard using a command line interface is no longer *the* standard, what with them newfangled GUIs and all.    \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/System.html","title":"What is system.in","body":"<p>The Scanner constructor's parameter <em>System.in</em> references the static InputStream field <em>in</em> defined in the final System class. As a static field <em>in</em> requires its class identifier. </p>\n\n<p>Oracle states that <em>in</em> is the \"standard\" input stream<a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/System.html\" rel=\"nofollow noreferrer\">1</a>, not that System.in is. The quotes around standard likely refer to the irony that inputting from a keyboard using a command line interface is no longer <em>the</em> standard, what with them newfangled GUIs and all.    </p>\n"},{"tags":[],"owner":{"account_id":15378925,"reputation":137,"user_id":11094870,"display_name":"Ash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594460637,"creation_date":1594460637,"answer_id":62847558,"question_id":24786399,"body_markdown":"*&quot;System.in&quot;* is a parameter that is taken by Scanner Class where *&quot;System&quot;* is a class and *&quot;in&quot;* is a static variable of type InputStream which tells the Java Compiler that *System input* will be provided through console(keyboard).","title":"What is system.in","body":"<p><em>&quot;System.in&quot;</em> is a parameter that is taken by Scanner Class where <em>&quot;System&quot;</em> is a class and <em>&quot;in&quot;</em> is a static variable of type InputStream which tells the Java Compiler that <em>System input</em> will be provided through console(keyboard).</p>\n"},{"tags":[],"owner":{"account_id":19249050,"reputation":51,"user_id":14067499,"display_name":"Ansh Gupta"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1597663590,"creation_date":1597660222,"answer_id":63449047,"question_id":24786399,"body_markdown":"`System.in` - &quot;in&quot; is object of class InputStream which is defined as static variables in class &quot;System&quot; which is used to read data from the console. In short &quot;System.in&quot; gives you a instance of of type InputStream.\r\n\r\nWhen we create a Scanner class object we need to pass &quot;System.in&quot; as parameter in Scanner class Constructor. So basically using &quot;System.in&quot; Scanner class becomes able to read the data from console and then using different methods which are provided by Scanner class (like nextInt(), nextLong(), next() etc.), we can get data in the form of our desired datatypes (like int, double, String etc.).\r\n","title":"What is system.in","body":"<p><code>System.in</code> - &quot;in&quot; is object of class InputStream which is defined as static variables in class &quot;System&quot; which is used to read data from the console. In short &quot;System.in&quot; gives you a instance of of type InputStream.</p>\n<p>When we create a Scanner class object we need to pass &quot;System.in&quot; as parameter in Scanner class Constructor. So basically using &quot;System.in&quot; Scanner class becomes able to read the data from console and then using different methods which are provided by Scanner class (like nextInt(), nextLong(), next() etc.), we can get data in the form of our desired datatypes (like int, double, String etc.).</p>\n"},{"tags":[],"owner":{"account_id":13402055,"reputation":2947,"user_id":9671280,"display_name":"Traycho Ivanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1597660622,"creation_date":1597660622,"answer_id":63449158,"question_id":24786399,"body_markdown":"`System.in` is actually an InputStream typically connected to keyboard input of console programs. \r\n\r\nAlong with it you have direct access also to two other streams `System.out` and `System.err`. \r\n\r\n`System.in`, `System.out` and `System.err` are initialized by the Java runtime when a Java VM starts.\r\n\r\n\r\n\r\n","title":"What is system.in","body":"<p><code>System.in</code> is actually an InputStream typically connected to keyboard input of console programs.</p>\n<p>Along with it you have direct access also to two other streams <code>System.out</code> and <code>System.err</code>.</p>\n<p><code>System.in</code>, <code>System.out</code> and <code>System.err</code> are initialized by the Java runtime when a Java VM starts.</p>\n"},{"tags":[],"owner":{"account_id":10219445,"reputation":61,"user_id":7544042,"display_name":"rakesh patel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636815654,"creation_date":1636775250,"answer_id":69951299,"question_id":24786399,"body_markdown":"`in` is a static reference variable defined inside `System` class.\r\nIt is referring to `InputStream` object which is already connected with the command prompt. \r\n\r\nIt is roughly defined like this:\r\n\r\n```\r\nclass System {\r\n    static InputStream in=new InputStream();\r\n}\r\n```","title":"What is system.in","body":"<p><code>in</code> is a static reference variable defined inside <code>System</code> class.\nIt is referring to <code>InputStream</code> object which is already connected with the command prompt.</p>\n<p>It is roughly defined like this:</p>\n<pre><code>class System {\n    static InputStream in=new InputStream();\n}\n</code></pre>\n"}],"owner":{"account_id":4643718,"reputation":197,"user_id":3762764,"display_name":"user3762764"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54978,"favorite_count":0,"down_vote_count":6,"up_vote_count":18,"answer_count":10,"score":12,"last_activity_date":1681241835,"creation_date":1405529413,"question_id":24786399,"body_markdown":"Consider this `Scanner` input example. \r\n\r\n    Scanner user_input = new Scanner( System.in );\r\n\r\nHere `Scanner` is the CLASS.\r\n`user_input` is the OBJECT under Scanner class. \r\nWhat is (`System.in`)? Is it a parameter passed or a object under `Scanner` class?. \r\n\r\n\r\nConsider another example. \r\n\r\n    dog dog1 = new dog(25)\r\n\r\nHere I have set dog class to accept size as a parameter. \r\n\r\nWhat exactly is `System.in`?","title":"What is system.in","body":"<p>Consider this <code>Scanner</code> input example. </p>\n\n<pre><code>Scanner user_input = new Scanner( System.in );\n</code></pre>\n\n<p>Here <code>Scanner</code> is the CLASS.\n<code>user_input</code> is the OBJECT under Scanner class. \nWhat is (<code>System.in</code>)? Is it a parameter passed or a object under <code>Scanner</code> class?. </p>\n\n<p>Consider another example. </p>\n\n<pre><code>dog dog1 = new dog(25)\n</code></pre>\n\n<p>Here I have set dog class to accept size as a parameter. </p>\n\n<p>What exactly is <code>System.in</code>?</p>\n"},{"tags":["java","spring","rabbitmq","spring-amqp"],"answers":[{"tags":[],"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681241751,"creation_date":1681241751,"answer_id":75989541,"question_id":75989114,"body_markdown":"See Publisher Confirms and Returns:\r\n\r\nhttps://docs.spring.io/spring-amqp/reference/html/#cf-pub-conf-ret\r\n\r\nhttps://blog.rabbitmq.com/posts/2011/02/introducing-publisher-confirms\r\n\r\nSee also a `RabbitTemplate.setReturnsCallback(ReturnsCallback returnCallback)`:\r\n\r\nhttps://docs.spring.io/spring-amqp/reference/html/#publisher-returns","title":"How do I detect that a RabbitMQ producer failed to send a message to an appropriate Queue in Java using Spring AMQP?","body":"<p>See Publisher Confirms and Returns:</p>\n<p><a href=\"https://docs.spring.io/spring-amqp/reference/html/#cf-pub-conf-ret\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#cf-pub-conf-ret</a></p>\n<p><a href=\"https://blog.rabbitmq.com/posts/2011/02/introducing-publisher-confirms\" rel=\"nofollow noreferrer\">https://blog.rabbitmq.com/posts/2011/02/introducing-publisher-confirms</a></p>\n<p>See also a <code>RabbitTemplate.setReturnsCallback(ReturnsCallback returnCallback)</code>:</p>\n<p><a href=\"https://docs.spring.io/spring-amqp/reference/html/#publisher-returns\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-amqp/reference/html/#publisher-returns</a></p>\n"}],"owner":{"account_id":25995153,"reputation":43,"user_id":19706675,"display_name":"Jeff"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75989541,"answer_count":1,"score":0,"last_activity_date":1681241751,"creation_date":1681238260,"question_id":75989114,"body_markdown":"I&#39;m trying to validate whether a sent message was successfully placed in a queue using the Spring AMQP library.  I see that the methods don&#39;t seem to error when I send a message to a queue which has an incorrectly configured binding in it, is there any built in way, or otherwise reasonable way to check this?\r\n\r\nE.g. I create a queue and accidentally create a binding w/ incorrect routing key,\r\n     I create a publisher and publish using the correct (intended) routing key,\r\n     &gt; How do I see here at this stage that the messages are failing to publish\r\n\r\n\r\nI&#39;ve tried looking for any sort of errors the [send method](https://stackoverflow.com) errors on in Spring AMQP to identify this in a try-catch, but it doesn&#39;t seem to error when the keys are mismatched and there is no existing queue with a matching key.  I&#39;ve had a look through the other methods, but I&#39;m not seeing an obvious alternative that would accomplish what I am looking for.\r\n\r\nMy only other thoughts were to publish a message, and then consume it at startup to validate the keys are correct on startup, but I&#39;m not a very big fan of that solution and wanted to know if there was an elegant way or standardish pattern to accomplish this.","title":"How do I detect that a RabbitMQ producer failed to send a message to an appropriate Queue in Java using Spring AMQP?","body":"<p>I'm trying to validate whether a sent message was successfully placed in a queue using the Spring AMQP library.  I see that the methods don't seem to error when I send a message to a queue which has an incorrectly configured binding in it, is there any built in way, or otherwise reasonable way to check this?</p>\n<p>E.g. I create a queue and accidentally create a binding w/ incorrect routing key,\nI create a publisher and publish using the correct (intended) routing key,\n&gt; How do I see here at this stage that the messages are failing to publish</p>\n<p>I've tried looking for any sort of errors the <a href=\"https://stackoverflow.com\">send method</a> errors on in Spring AMQP to identify this in a try-catch, but it doesn't seem to error when the keys are mismatched and there is no existing queue with a matching key.  I've had a look through the other methods, but I'm not seeing an obvious alternative that would accomplish what I am looking for.</p>\n<p>My only other thoughts were to publish a message, and then consume it at startup to validate the keys are correct on startup, but I'm not a very big fan of that solution and wanted to know if there was an elegant way or standardish pattern to accomplish this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1903805,"reputation":41397,"user_id":1719067,"accept_rate":73,"display_name":"Narendra Pathai"},"score":6,"creation_date":1354462073,"post_id":13670152,"comment_id":18763914,"body_markdown":"Actually this was a design flaw as said by Joshua Bloch","body":"Actually this was a design flaw as said by Joshua Bloch"},{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1354469020,"post_id":13670152,"comment_id":18765593,"body_markdown":"This is one of the many reasons cloning is considered broken.","body":"This is one of the many reasons cloning is considered broken."}],"answers":[{"tags":[],"owner":{"account_id":2009857,"reputation":25959,"user_id":1798593,"display_name":"Patricia Shanahan"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1354458673,"creation_date":1354458673,"answer_id":13670229,"question_id":13670152,"body_markdown":"To deal with creating the clone and basic field copying, clone needs to inherit a method implementation.  A Cloneable class can appear anywhere in the hierarchy, and may need to extend a specific superclass to do its primary job. The only superclass from which all possible Cloneable classes can inherit implementation is Object.\r\n\r\nCloning was defined long before generics.","title":"Why is #clone() not in the Cloneable interface?","body":"<p>To deal with creating the clone and basic field copying, clone needs to inherit a method implementation.  A Cloneable class can appear anywhere in the hierarchy, and may need to extend a specific superclass to do its primary job. The only superclass from which all possible Cloneable classes can inherit implementation is Object.</p>\n\n<p>Cloning was defined long before generics.</p>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":31,"is_accepted":true,"score":31,"last_activity_date":1681241419,"creation_date":1354461822,"answer_id":13670653,"question_id":13670152,"body_markdown":"The cloning contract in Java dictates that each `clone` implementation must first obtain the cloned instance from `super.clone()`. This creates a chain that always ends with the call to `Object.clone`, and that method contains &quot;magical&quot; native-level code that makes a binary copy of the underlying raw `struct` which represents the Java object. If this mechanism didn&#39;t exist, `clone` would fail to be polymorphic: the `Object.clone` method produces an instance of whatever class it is called on; this cannot be reproduced without native code.\r\n\r\nThis is why the `Object.clone` method could not have been avoided. `Cloneable` *could* have contained a `clone` method, but it would create issues regarding the `throws` clause. The way it stands, you are free to declare `clone` with no declared exceptions, or to declare arbitrary exceptions. This flexibility would not be possible if the method was already declared in the interface.\r\n\r\nBear in mind that Generics would be of little use for cloning: imagine `protected T clone()` in `Object`: where would `T` come from? Would we need `Object&lt;T&gt;` and force every class to be parameterized on itself, all just to make this semi-deprecated mechanism work a tiny bit better? Keep also in mind that this code is perfectly legal:\r\n\r\n    public class TheMightyOne implements Cloneable {\r\n       @Override public TheMightyOne clone() {\r\n         return (TheMightyOne) super.clone();\r\n       }\r\n    }\r\n\r\nYou can call it:\r\n\r\n    TheMightyOne one = new TheMightyOne();\r\n    TheMightyOne two = one.clone(); // do downcasts needed","title":"Why is #clone() not in the Cloneable interface?","body":"<p>The cloning contract in Java dictates that each <code>clone</code> implementation must first obtain the cloned instance from <code>super.clone()</code>. This creates a chain that always ends with the call to <code>Object.clone</code>, and that method contains &quot;magical&quot; native-level code that makes a binary copy of the underlying raw <code>struct</code> which represents the Java object. If this mechanism didn't exist, <code>clone</code> would fail to be polymorphic: the <code>Object.clone</code> method produces an instance of whatever class it is called on; this cannot be reproduced without native code.</p>\n<p>This is why the <code>Object.clone</code> method could not have been avoided. <code>Cloneable</code> <em>could</em> have contained a <code>clone</code> method, but it would create issues regarding the <code>throws</code> clause. The way it stands, you are free to declare <code>clone</code> with no declared exceptions, or to declare arbitrary exceptions. This flexibility would not be possible if the method was already declared in the interface.</p>\n<p>Bear in mind that Generics would be of little use for cloning: imagine <code>protected T clone()</code> in <code>Object</code>: where would <code>T</code> come from? Would we need <code>Object&lt;T&gt;</code> and force every class to be parameterized on itself, all just to make this semi-deprecated mechanism work a tiny bit better? Keep also in mind that this code is perfectly legal:</p>\n<pre><code>public class TheMightyOne implements Cloneable {\n   @Override public TheMightyOne clone() {\n     return (TheMightyOne) super.clone();\n   }\n}\n</code></pre>\n<p>You can call it:</p>\n<pre><code>TheMightyOne one = new TheMightyOne();\nTheMightyOne two = one.clone(); // do downcasts needed\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2491366,"reputation":321,"user_id":2168746,"display_name":"user2168746"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372324252,"creation_date":1372324252,"answer_id":17339124,"question_id":13670152,"body_markdown":"`clone()` method is unnecessary, every object could invoke `Object.clone` method by reflect, so an object can be cloned depends on whether to implement `Cloneable` interface. This is for a security reason. You can simply clone an object which implements `Cloneable` by this util:\r\n\r\n\t@SuppressWarnings(&quot;unchecked&quot;)\r\n\tpublic static &lt;T extends Cloneable&gt; T clone(Cloneable obj) {\r\n\t\tT rtn = null;\r\n\t\ttry {\r\n\t\t\tMethod method = Object.class.getDeclaredMethod(&quot;clone&quot;);\r\n\t\t\tmethod.setAccessible(true);\r\n\t\t\trtn = (T) method.invoke(obj);\r\n\t\t} catch (Throwable t) {\r\n\t\t\tt.printStackTrace();\r\n\t\t}\r\n\t\treturn rtn;\r\n\t}","title":"Why is #clone() not in the Cloneable interface?","body":"<p><code>clone()</code> method is unnecessary, every object could invoke <code>Object.clone</code> method by reflect, so an object can be cloned depends on whether to implement <code>Cloneable</code> interface. This is for a security reason. You can simply clone an object which implements <code>Cloneable</code> by this util:</p>\n\n<pre><code>@SuppressWarnings(\"unchecked\")\npublic static &lt;T extends Cloneable&gt; T clone(Cloneable obj) {\n    T rtn = null;\n    try {\n        Method method = Object.class.getDeclaredMethod(\"clone\");\n        method.setAccessible(true);\n        rtn = (T) method.invoke(obj);\n    } catch (Throwable t) {\n        t.printStackTrace();\n    }\n    return rtn;\n}\n</code></pre>\n"}],"owner":{"account_id":2073264,"reputation":5019,"user_id":1847261,"accept_rate":92,"display_name":"Phil K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5592,"favorite_count":0,"down_vote_count":1,"up_vote_count":22,"accepted_answer_id":13670653,"answer_count":3,"score":21,"last_activity_date":1681241419,"creation_date":1354458136,"question_id":13670152,"body_markdown":"I was reading up on performing a deep-copy of an array correctly, however I was confused about how the `#clone()` is implemented. It is a member of the `java.lang.Object` class, and yet if you read the javadocs:\r\n\r\n&gt; First, if the class of this object does not implement the interface Cloneable, then a CloneNotSupportedException is thrown.\r\n\r\nSo why define the `clone` method there in the first place? Surely if a method can only be used when an interface is present, you&#39;d put the method in the interface. The `Cloneable` interface itself is empty; it is just a marker interface used by Java to ensure that using the `clone` method is legal.\r\n\r\nDoing it this way also removes the ability to make use of generics to ensure type safety:\r\n\r\n\tclass Foo implements Cloneable { // Valid.\r\n\t\t@Override\r\n\t\tpublic Object clone() throws CloneNotSupportedException {\r\n\t\t\t// ...\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass TypeSafeFoo implements Cloneable&lt;TypeSafeFoo&gt; { // Not valid.\r\n\t\t@Override\r\n\t\tpublic TypeSafeFoo clone() throws CloneNotSupportedException {\r\n\t\t\t// ...\r\n\t\t}\r\n\t}\r\n\r\nWhy has Java done it this way? I&#39;m sure they have legitimate reasons, but I can&#39;t seem to figure it out.","title":"Why is #clone() not in the Cloneable interface?","body":"<p>I was reading up on performing a deep-copy of an array correctly, however I was confused about how the <code>#clone()</code> is implemented. It is a member of the <code>java.lang.Object</code> class, and yet if you read the javadocs:</p>\n\n<blockquote>\n  <p>First, if the class of this object does not implement the interface Cloneable, then a CloneNotSupportedException is thrown.</p>\n</blockquote>\n\n<p>So why define the <code>clone</code> method there in the first place? Surely if a method can only be used when an interface is present, you'd put the method in the interface. The <code>Cloneable</code> interface itself is empty; it is just a marker interface used by Java to ensure that using the <code>clone</code> method is legal.</p>\n\n<p>Doing it this way also removes the ability to make use of generics to ensure type safety:</p>\n\n<pre><code>class Foo implements Cloneable { // Valid.\n    @Override\n    public Object clone() throws CloneNotSupportedException {\n        // ...\n    }\n}\n\nclass TypeSafeFoo implements Cloneable&lt;TypeSafeFoo&gt; { // Not valid.\n    @Override\n    public TypeSafeFoo clone() throws CloneNotSupportedException {\n        // ...\n    }\n}\n</code></pre>\n\n<p>Why has Java done it this way? I'm sure they have legitimate reasons, but I can't seem to figure it out.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"score":0,"creation_date":1681241172,"post_id":75988991,"comment_id":134024083,"body_markdown":"You aren&#39;t getting the `Compound class names not permitted` message when using &quot;xpath, linktext, partiallinktext&quot;. Clarity in your question would help. Also, the code you&#39;ve posted doesn&#39;t really clarify the problem... you&#39;ve posted too much code. All you needed to post was the code related to the element you were having a problem with.","body":"You aren&#39;t getting the <code>Compound class names not permitted</code> message when using &quot;xpath, linktext, partiallinktext&quot;. Clarity in your question would help. Also, the code you&#39;ve posted doesn&#39;t really clarify the problem... you&#39;ve posted too much code. All you needed to post was the code related to the element you were having a problem with."}],"answers":[{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681241399,"creation_date":1681241079,"answer_id":75989476,"question_id":75988991,"body_markdown":"&gt; org.openqa.selenium.InvalidSelectorException: Compound class names not permitted\r\n\r\nThis is a very specific error message for a very specific issue. You are passing more than one class name to the `@FindBy(className = &quot;action submit primary&quot;)` locator.\r\n\r\nWith the sample HTML\r\n\r\n    &lt;div class=&quot;action submit primary&quot;&gt;test&lt;/div&gt;\r\n\r\nin your code you are using\r\n\r\n    @FindBy(className = &quot;action submit primary&quot;)\r\n    private WebElement createAccountButton;\r\n\r\nand that&#39;s why you are getting that error message. &quot;action&quot;, &quot;submit&quot;, and &quot;primary&quot; are three separate classes. You might be able to use just one class name but if you need all three classes to uniquely identify the element, you&#39;ll need to switch to a CSS selector,\r\n\r\n    @FindBy(css = &quot;.action.submit.primary&quot;)","title":"Fluent approach and org.openqa.selenium.InvalidSelectorException: Compound class names not permitted","body":"<blockquote>\n<p>org.openqa.selenium.InvalidSelectorException: Compound class names not permitted</p>\n</blockquote>\n<p>This is a very specific error message for a very specific issue. You are passing more than one class name to the <code>@FindBy(className = &quot;action submit primary&quot;)</code> locator.</p>\n<p>With the sample HTML</p>\n<pre><code>&lt;div class=&quot;action submit primary&quot;&gt;test&lt;/div&gt;\n</code></pre>\n<p>in your code you are using</p>\n<pre><code>@FindBy(className = &quot;action submit primary&quot;)\nprivate WebElement createAccountButton;\n</code></pre>\n<p>and that's why you are getting that error message. &quot;action&quot;, &quot;submit&quot;, and &quot;primary&quot; are three separate classes. You might be able to use just one class name but if you need all three classes to uniquely identify the element, you'll need to switch to a CSS selector,</p>\n<pre><code>@FindBy(css = &quot;.action.submit.primary&quot;)\n</code></pre>\n"}],"owner":{"account_id":15325016,"reputation":669,"user_id":11056400,"display_name":"beginner992"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681241399,"creation_date":1681237416,"question_id":75988991,"body_markdown":"I am trying to use the fluent approach, but can&#39;t resolve my problem with this error:\r\n\r\n&gt; org.openqa.selenium.InvalidSelectorException: Compound class names not\r\n&gt; permitted\r\n\r\nWhen I use the normal way there is no any error. I also tried xpath, linktext, partiallinktext and I still getting the same problem. \r\n\r\n    public class HomePage {\r\n\r\n    @FindBy(xpath = &quot;//a[text()=&#39;Create an Account&#39;]&quot;)\r\n    private WebElement createAccountLink;\r\n\r\n    private WebDriver driver;\r\n\r\n    public HomePage(WebDriver driver) {\r\n        PageFactory.initElements(driver, this);\r\n        this.driver = driver;\r\n    }\r\n\r\n    public CreateAccountPage openCreateAccountPage() {\r\n        createAccountLink.click();\r\n        return new CreateAccountPage(driver);\r\n    }\r\n    }\r\n\r\n    public class CreateAccountPage {\r\n\r\n    @FindBy(id = &quot;firstname&quot;)\r\n    private WebElement regFirstNameInput;\r\n\r\n    @FindBy(id = &quot;lastname&quot;)\r\n    private WebElement regLastNameInput;\r\n\r\n    @FindBy(id = &quot;email_address&quot;)\r\n    private WebElement regEmailInput;\r\n\r\n    @FindBy(id = &quot;password&quot;)\r\n    private WebElement regPasswordInput;\r\n\r\n    @FindBy(id = &quot;password_confirmation&quot;)\r\n    private WebElement regPasswordConfirmationInput;\r\n\r\n    @FindBy(className = &quot;action submit primary&quot;)\r\n    private WebElement createAccountButton;\r\n\r\n    private WebDriver driver;\r\n\r\n    public CreateAccountPage(WebDriver driver) {\r\n        PageFactory.initElements(driver, this);\r\n        this.driver = driver;\r\n    }\r\n\r\n    public LoggedUserPage registerUserValidData(String firstName, String lastName, String email, String password) {\r\n        registerUser(firstName, lastName, email, password);\r\n        return new LoggedUserPage(driver);\r\n    }\r\n\r\n    private void registerUser(String firstName, String lastName, String email, String password) {\r\n        regFirstNameInput.sendKeys(firstName);\r\n        regLastNameInput.sendKeys(lastName);\r\n        regEmailInput.sendKeys(email);\r\n        regPasswordInput.sendKeys(password);\r\n        regPasswordConfirmationInput.sendKeys(password);\r\n        createAccountButton.click();\r\n    }\r\n    }\r\n\r\n    public class RegisterTest extends BaseTest {\r\n\r\n    @Test\r\n    public void registerUserTest() {\r\n        int random = (int) (Math.random() * 1000);\r\n\r\n        WebElement dashboardLink = new HomePage(driver)\r\n                .openMyAccountPage()\r\n                .registerUserValidData(&quot;test&quot; + random + &quot;30@test.pl&quot;, &quot;test@test.pl&quot;)\r\n                .getDashboardLink();\r\n\r\n        Assert.assertEquals(dashboardLink.getText(), &quot;Dashboard&quot;);\r\n    }","title":"Fluent approach and org.openqa.selenium.InvalidSelectorException: Compound class names not permitted","body":"<p>I am trying to use the fluent approach, but can't resolve my problem with this error:</p>\n<blockquote>\n<p>org.openqa.selenium.InvalidSelectorException: Compound class names not\npermitted</p>\n</blockquote>\n<p>When I use the normal way there is no any error. I also tried xpath, linktext, partiallinktext and I still getting the same problem.</p>\n<pre><code>public class HomePage {\n\n@FindBy(xpath = &quot;//a[text()='Create an Account']&quot;)\nprivate WebElement createAccountLink;\n\nprivate WebDriver driver;\n\npublic HomePage(WebDriver driver) {\n    PageFactory.initElements(driver, this);\n    this.driver = driver;\n}\n\npublic CreateAccountPage openCreateAccountPage() {\n    createAccountLink.click();\n    return new CreateAccountPage(driver);\n}\n}\n\npublic class CreateAccountPage {\n\n@FindBy(id = &quot;firstname&quot;)\nprivate WebElement regFirstNameInput;\n\n@FindBy(id = &quot;lastname&quot;)\nprivate WebElement regLastNameInput;\n\n@FindBy(id = &quot;email_address&quot;)\nprivate WebElement regEmailInput;\n\n@FindBy(id = &quot;password&quot;)\nprivate WebElement regPasswordInput;\n\n@FindBy(id = &quot;password_confirmation&quot;)\nprivate WebElement regPasswordConfirmationInput;\n\n@FindBy(className = &quot;action submit primary&quot;)\nprivate WebElement createAccountButton;\n\nprivate WebDriver driver;\n\npublic CreateAccountPage(WebDriver driver) {\n    PageFactory.initElements(driver, this);\n    this.driver = driver;\n}\n\npublic LoggedUserPage registerUserValidData(String firstName, String lastName, String email, String password) {\n    registerUser(firstName, lastName, email, password);\n    return new LoggedUserPage(driver);\n}\n\nprivate void registerUser(String firstName, String lastName, String email, String password) {\n    regFirstNameInput.sendKeys(firstName);\n    regLastNameInput.sendKeys(lastName);\n    regEmailInput.sendKeys(email);\n    regPasswordInput.sendKeys(password);\n    regPasswordConfirmationInput.sendKeys(password);\n    createAccountButton.click();\n}\n}\n\npublic class RegisterTest extends BaseTest {\n\n@Test\npublic void registerUserTest() {\n    int random = (int) (Math.random() * 1000);\n\n    WebElement dashboardLink = new HomePage(driver)\n            .openMyAccountPage()\n            .registerUserValidData(&quot;test&quot; + random + &quot;30@test.pl&quot;, &quot;test@test.pl&quot;)\n            .getDashboardLink();\n\n    Assert.assertEquals(dashboardLink.getText(), &quot;Dashboard&quot;);\n}\n</code></pre>\n"},{"tags":["java","sonarqube","java-11","bitbucket-pipelines","sonarcloud"],"answers":[{"tags":[],"owner":{"account_id":6372974,"reputation":8828,"user_id":4944847,"accept_rate":89,"display_name":"agabrys"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1642007604,"creation_date":1613937420,"answer_id":66306507,"question_id":66267806,"body_markdown":"I&#39;m not sure what is the problem. The announcements informs that you have to use Java 11+ to execute scans, but you can still compile your code with Java &lt;11. You didn&#39;t provide any information about your project, so let&#39;s take a Maven project as an example.\r\n\r\nIt generally means that you have to do something like this:\r\n```\r\n// set Java to 8\r\nexport JAVA_HOME=/path/to/jdk8/\r\n\r\n// compile, test and build\r\nmvn package\r\n\r\n// set Java to 11\r\nexport JAVA_HOME=/path/to/jdk11/\r\n\r\n// execute scanner\r\nmvn sonar:sonar\r\n```\r\n","title":"Run SonarScanner analysis with Java 11, run target code with Java 8","body":"<p>I'm not sure what is the problem. The announcements informs that you have to use Java 11+ to execute scans, but you can still compile your code with Java &lt;11. You didn't provide any information about your project, so let's take a Maven project as an example.</p>\n<p>It generally means that you have to do something like this:</p>\n<pre><code>// set Java to 8\nexport JAVA_HOME=/path/to/jdk8/\n\n// compile, test and build\nmvn package\n\n// set Java to 11\nexport JAVA_HOME=/path/to/jdk11/\n\n// execute scanner\nmvn sonar:sonar\n</code></pre>\n"},{"tags":[],"owner":{"account_id":294314,"reputation":4599,"user_id":598141,"accept_rate":44,"display_name":"Ian W"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633172739,"creation_date":1633172739,"answer_id":69416319,"question_id":66267806,"body_markdown":"While @agabrys offers the most straightforward solution and the one we use, albeit via Jenkins freestyle job, invoke maven top-level target package, then end-inject JAVA_HOME variable and invoke maven sonar step, an alternative approach is ...\r\n\r\nUse Java 11 throughout, but in your [maven pom](https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html), specify:\r\n\r\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\r\nThis is a minor risk of runtime incompatibility as noted at the bottom of that page.\r\n\r\nAnother alternative is to use profiles in conjunction with [maven toolchains](https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html), tied to different profiles, one for the compilation and one for the analysis steps.","title":"Run SonarScanner analysis with Java 11, run target code with Java 8","body":"<p>While @agabrys offers the most straightforward solution and the one we use, albeit via Jenkins freestyle job, invoke maven top-level target package, then end-inject JAVA_HOME variable and invoke maven sonar step, an alternative approach is ...</p>\n<p>Use Java 11 throughout, but in your <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/set-compiler-source-and-target.html\" rel=\"nofollow noreferrer\">maven pom</a>, specify:</p>\n<pre><code>&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n</code></pre>\n<p>This is a minor risk of runtime incompatibility as noted at the bottom of that page.</p>\n<p>Another alternative is to use profiles in conjunction with <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/examples/compile-using-different-jdk.html\" rel=\"nofollow noreferrer\">maven toolchains</a>, tied to different profiles, one for the compilation and one for the analysis steps.</p>\n"},{"tags":[],"owner":{"account_id":2711155,"reputation":171,"user_id":2339586,"display_name":"ankur512512"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649665840,"creation_date":1649665840,"answer_id":71824797,"question_id":66267806,"body_markdown":"I faced the same issue in my project as well, where my project needed jdk8 to compile but SonarScan needed jdk11 and I was bound to use the `sonar:sonar` plugin for maven and NOT the direct `sonarscanner` binary.\r\n\r\nTo get around that, I used `docker` container, only to run the sonarscan part. Compilation part was still done with the host&#39;s maven itself.\r\n\r\nTo run the SonarScan using docker, use the command like below:\r\n\r\n```bash\r\ndocker run -u $(id -u ${USER}):$(id -g ${USER}) --rm -v &quot;$PWD&quot;:/usr/src/mymaven -v &quot;$HOME/.m2&quot;:/tmp/.m2 -w /usr/src/mymaven maven:3-openjdk-11 \\\r\n         mvn -gs=/tmp/.m2/settings.xml -Dmaven.repo.local=/tmp/.m2/repository sonar:sonar \\\r\n        -Dsonar.dependencyCheck.jsonReportPath=target/dependency-check-report.json \\\r\n        -Dsonar.dependencyCheck.htmlReportPath=target/dependency-check-report.html \\\r\n        -Dsonar.dependencyCheck.summarize=true \\\r\n        -Dsonar.host.url=https://my-sonar-url \\\r\n        -Dsonar.login=****\r\n```","title":"Run SonarScanner analysis with Java 11, run target code with Java 8","body":"<p>I faced the same issue in my project as well, where my project needed jdk8 to compile but SonarScan needed jdk11 and I was bound to use the <code>sonar:sonar</code> plugin for maven and NOT the direct <code>sonarscanner</code> binary.</p>\n<p>To get around that, I used <code>docker</code> container, only to run the sonarscan part. Compilation part was still done with the host's maven itself.</p>\n<p>To run the SonarScan using docker, use the command like below:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>docker run -u $(id -u ${USER}):$(id -g ${USER}) --rm -v &quot;$PWD&quot;:/usr/src/mymaven -v &quot;$HOME/.m2&quot;:/tmp/.m2 -w /usr/src/mymaven maven:3-openjdk-11 \\\n         mvn -gs=/tmp/.m2/settings.xml -Dmaven.repo.local=/tmp/.m2/repository sonar:sonar \\\n        -Dsonar.dependencyCheck.jsonReportPath=target/dependency-check-report.json \\\n        -Dsonar.dependencyCheck.htmlReportPath=target/dependency-check-report.html \\\n        -Dsonar.dependencyCheck.summarize=true \\\n        -Dsonar.host.url=https://my-sonar-url \\\n        -Dsonar.login=****\n</code></pre>\n"}],"owner":{"account_id":3246859,"reputation":1352,"user_id":2738155,"accept_rate":88,"display_name":"chomp"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8598,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":66306507,"answer_count":3,"score":4,"last_activity_date":1681241201,"creation_date":1613680701,"question_id":66267806,"body_markdown":"As the following announcement points out, SonarSource ended support to run code Analyzers with pre-11 Java versions:\r\n\r\n&gt; January 2021 - Move analysis to Java 11\r\n&gt;\r\n&gt;The version of Java installed in the scanner environment must be upgraded to at least Java 11 before 1 February 2021. Pre-11 versions of Java are already deprecated and scanners using them will stop functioning on that date.\r\n&gt;\r\n&gt;Additionally, there will be a brownout from 11 January 2021 to 15 January 2021 during which the first analysis run with a scanner using Java versions less than 11 will fail. To avoid this inconvenience you should upgrade by 11 January 2021.\r\n&gt;\r\n&gt;The installation of Java discussed here refers specifically to the JDK or JRE installed and used in the context where your SonarCloud scanner analysis tool is running. This may be your local build environment or your Cl service.\r\n&gt;\r\n&gt;**This does not have any impact on the Java version targeted by your project code. You can still analyze Java projects that target versions less than 11.**\r\n\r\nI have tried to search for a **full example** about how to run a bitbucket pipeline to execute SonarScanner analysis using a java 11 Analyzer but having target code using pre-java 11 versions (e.g. java 8), but I wasn&#39;t able to found one. According to that image, it should be possible.\r\n\r\n  [1]: https://i.stack.imgur.com/4RRdl.png","title":"Run SonarScanner analysis with Java 11, run target code with Java 8","body":"<p>As the following announcement points out, SonarSource ended support to run code Analyzers with pre-11 Java versions:</p>\n<blockquote>\n<p>January 2021 - Move analysis to Java 11</p>\n<p>The version of Java installed in the scanner environment must be upgraded to at least Java 11 before 1 February 2021. Pre-11 versions of Java are already deprecated and scanners using them will stop functioning on that date.</p>\n<p>Additionally, there will be a brownout from 11 January 2021 to 15 January 2021 during which the first analysis run with a scanner using Java versions less than 11 will fail. To avoid this inconvenience you should upgrade by 11 January 2021.</p>\n<p>The installation of Java discussed here refers specifically to the JDK or JRE installed and used in the context where your SonarCloud scanner analysis tool is running. This may be your local build environment or your Cl service.</p>\n<p><strong>This does not have any impact on the Java version targeted by your project code. You can still analyze Java projects that target versions less than 11.</strong></p>\n</blockquote>\n<p>I have tried to search for a <strong>full example</strong> about how to run a bitbucket pipeline to execute SonarScanner analysis using a java 11 Analyzer but having target code using pre-java 11 versions (e.g. java 8), but I wasn't able to found one. According to that image, it should be possible.</p>\n"},{"tags":["java","maven","jenkins","sonarqube","sonarqube5.1"],"comments":[{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":2,"creation_date":1437560260,"post_id":31559979,"comment_id":51076528,"body_markdown":"you will need to use a JDK 1.7 to avoid this. See: http://stackoverflow.com/questions/10382929/how-to-fix-unsupported-major-minor-version-51-0-error","body":"you will need to use a JDK 1.7 to avoid this. See: <a href=\"http://stackoverflow.com/questions/10382929/how-to-fix-unsupported-major-minor-version-51-0-error\" title=\"how to fix unsupported major minor version 51 0 error\">stackoverflow.com/questions/10382929/&hellip;</a>"},{"owner":{"account_id":6477087,"reputation":555,"user_id":5015386,"accept_rate":30,"display_name":"Akshay jain"},"score":0,"creation_date":1437562642,"post_id":31559979,"comment_id":51078110,"body_markdown":"i dont want to change the jdk so upto which sonar version jdk1.6 will work and have scm clearcase plugin.","body":"i dont want to change the jdk so upto which sonar version jdk1.6 will work and have scm clearcase plugin."},{"owner":{"account_id":1042328,"reputation":7972,"user_id":1048093,"accept_rate":75,"display_name":"wemu"},"score":2,"creation_date":1437567330,"post_id":31559979,"comment_id":51081296,"body_markdown":"the sonar docs http://docs.sonarqube.org/display/SONAR/Requirements are not available for older versions. I would give the 4.5 LTS version a try. Notice these JDK are no longer supported.\nIt&#39;s one thing how you compile the project - it&#39;s another thing how the sonar-server or the sonar-plugin runs.","body":"the sonar docs <a href=\"http://docs.sonarqube.org/display/SONAR/Requirements\" rel=\"nofollow noreferrer\">docs.sonarqube.org/display/SONAR/Requirements</a> are not available for older versions. I would give the 4.5 LTS version a try. Notice these JDK are no longer supported. It&#39;s one thing how you compile the project - it&#39;s another thing how the sonar-server or the sonar-plugin runs."},{"owner":{"account_id":6477087,"reputation":555,"user_id":5015386,"accept_rate":30,"display_name":"Akshay jain"},"score":0,"creation_date":1437648283,"post_id":31559979,"comment_id":51122299,"body_markdown":"sonarqube 4.3.3 and scm activity plugin 1.8 is working in java 1.6. i am getting the blame information but not getting the coverage on new code in the dashboard","body":"sonarqube 4.3.3 and scm activity plugin 1.8 is working in java 1.6. i am getting the blame information but not getting the coverage on new code in the dashboard"},{"owner":{"account_id":4191656,"reputation":1190,"user_id":6565832,"display_name":"abhinav1602"},"score":0,"creation_date":1681246293,"post_id":31559979,"comment_id":134025092,"body_markdown":"Here is the detailed answer I wrote for a similar question. Following the same steps might be helpful.\n\nhttps://stackoverflow.com/a/75989454/6565832","body":"Here is the detailed answer I wrote for a similar question. Following the same steps might be helpful.  <a href=\"https://stackoverflow.com/a/75989454/6565832\">stackoverflow.com/a/75989454/6565832</a>"}],"owner":{"account_id":6477087,"reputation":555,"user_id":5015386,"accept_rate":30,"display_name":"Akshay jain"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5213,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1681241136,"creation_date":1437559415,"question_id":31559979,"body_markdown":"changed the sonar version from *3.7* to *sonarqube 5.1.1*. and ran the build from jenkins getting Error\r\n&gt;Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar (default-cli) on project integration-client: Execution default-cli of goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar failed: An API incompatibility was encountered while executing org.codehaus.mojo:sonar-maven-plugin:2.6:sonar: java.lang.UnsupportedClassVersionError: org/sonar/api/utils/SonarException : Unsupported major.minor version 51.0\r\n\r\ni am using the **java version 1.6** and **maven version 3.2.3** \r\n\r\npreviously with sonar 3.7 version it was working fine.","title":"An API incompatibility was encountered while executing org.codehaus.mojo:sonar-maven-plugin:2.6:sonar","body":"<p>changed the sonar version from <em>3.7</em> to <em>sonarqube 5.1.1</em>. and ran the build from jenkins getting Error</p>\n\n<blockquote>\n  <p>Failed to execute goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar (default-cli) on project integration-client: Execution default-cli of goal org.codehaus.mojo:sonar-maven-plugin:2.6:sonar failed: An API incompatibility was encountered while executing org.codehaus.mojo:sonar-maven-plugin:2.6:sonar: java.lang.UnsupportedClassVersionError: org/sonar/api/utils/SonarException : Unsupported major.minor version 51.0</p>\n</blockquote>\n\n<p>i am using the <strong>java version 1.6</strong> and <strong>maven version 3.2.3</strong> </p>\n\n<p>previously with sonar 3.7 version it was working fine.</p>\n"},{"tags":["java","maven","jenkins","sonarqube","sonarqube-scan"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1630049590,"post_id":68948294,"comment_id":121854226,"body_markdown":"Looks like you are trying to run on JDK8 instead of JDK11. SonarQube server has to run on JDK11 as far as I know...","body":"Looks like you are trying to run on JDK8 instead of JDK11. SonarQube server has to run on JDK11 as far as I know..."},{"owner":{"account_id":10744447,"reputation":11,"user_id":7906293,"display_name":"Bharat Malge"},"score":0,"creation_date":1630050908,"post_id":68948294,"comment_id":121854690,"body_markdown":"yes its up and running on jdk11, but the project uses jdk 8 and while scanning it give above exception, now the issue is - https://community.sonarsource.com/t/an-api-incompatibility-was-encountered-encountered-error-upon-execute-of-mvn-sonar-sonar-on-project/46876/4","body":"yes its up and running on jdk11, but the project uses jdk 8 and while scanning it give above exception, now the issue is - <a href=\"https://community.sonarsource.com/t/an-api-incompatibility-was-encountered-encountered-error-upon-execute-of-mvn-sonar-sonar-on-project/46876/4\" rel=\"nofollow noreferrer\">community.sonarsource.com/t/&hellip;</a>"},{"owner":{"account_id":294314,"reputation":4599,"user_id":598141,"accept_rate":44,"display_name":"Ian W"},"score":0,"creation_date":1630054098,"post_id":68948294,"comment_id":121855946,"body_markdown":"We had similar problem when SQ went from min JDK 6 -&gt; 8. Changed our jobs to build using  job default JDK 6, then add [envinject ENV step](https://plugins.jenkins.io/envinject/) JAVA_HOME=/path/to/jdk8, then called sonar scanner step. See if that works for you, but 8 -&gt; 11. Also, Jenkins mastee and agents ran 8,  SQ rruns 11. Your jobs can use anything configured in Global Tools Java.","body":"We had similar problem when SQ went from min JDK 6 -&gt; 8. Changed our jobs to build using  job default JDK 6, then add <a href=\"https://plugins.jenkins.io/envinject/\" rel=\"nofollow noreferrer\">envinject ENV step</a> JAVA_HOME=/path/to/jdk8, then called sonar scanner step. See if that works for you, but 8 -&gt; 11. Also, Jenkins mastee and agents ran 8,  SQ rruns 11. Your jobs can use anything configured in Global Tools Java."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630063303,"post_id":68948294,"comment_id":121859558,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":3059285,"reputation":4045,"user_id":2592309,"display_name":"raspy"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1631047537,"creation_date":1631047537,"answer_id":69094382,"question_id":68948294,"body_markdown":"Since SonarQube 9.0 analysis must be done using JDK11. This is one of the breaking changes in 9.0, see official [documentation](https://docs.sonarqube.org/latest/analysis/analysis-with-java-11/).","title":"An API incompatibility was encountered while executing org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar","body":"<p>Since SonarQube 9.0 analysis must be done using JDK11. This is one of the breaking changes in 9.0, see official <a href=\"https://docs.sonarqube.org/latest/analysis/analysis-with-java-11/\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":4191656,"reputation":1190,"user_id":6565832,"display_name":"abhinav1602"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681240936,"creation_date":1681240936,"answer_id":75989454,"question_id":68948294,"body_markdown":"I was facing the same problem and after a lot of attempts doing multiple things, I saw this line somewhere in the documentation:\r\n\r\n&gt; The requirements above refer only to the versions of Java and Node.js\r\n&gt; used by the scanner itself to run. It does not restrict the versions\r\n&gt; of Java, JavaScript, TypeScript or CSS that can be analyzed by the\r\n&gt; scanner.\r\n\r\nSo, I ran my projects normally using the existing java version and **right before running the sonar I changed the JAVA_HOME so that sonar scanner can run using the java version required by the scanner.**\r\n\r\nFirstly I checked what all java versions are present on my system using the below command:\r\n\r\n    mdfind -name &#39;java&#39; | grep &#39;/bin/java$&#39; \r\n\r\nGot something like this in the result:\r\n\r\n    /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/bin/java\r\n    /Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/bin/java\r\n    /usr/local/Cellar/openjdk@17/17.0.6/libexec/openjdk.jdk/Contents/Home/bin/java\r\n    /usr/local/Cellar/openjdk/20/libexec/openjdk.jdk/Contents/Home/bin/java\r\n    /usr/local/Cellar/openjdk@11/11.0.18/libexec/openjdk.jdk/Contents/Home/bin/java\r\n    /usr/local/Cellar/openjdk@8/1.8.0+362/libexec/openjdk.jdk/Contents/Home/jre/bin/java\r\n\r\nin my case I had jdk17 installed on my system already. \r\nIn case it is missing, please install jdk11 or jdk17 because it is required by the scanner.\r\n\r\nAfter that, using the path of jdk17 from the above results, I changed my JAVA_HOME to point to jdk11 location using the below command:\r\n\r\n    export JAVA_HOME=&#39;/usr/local/Cellar/openjdk@17/17.0.6/libexec/openjdk.jdk/Contents/Home&#39;\r\n\r\nonce JAVA_HOME is changed, sonarqube can be run normally to give the desired result using the below command:\r\n\r\n    mvn sonar:sonar   -Dsonar.projectKey={{PROJECT_KEY}}  -Dsonar.projectName={{PROJECT_NAME}}   -Dsonar.host.url=http://localhost:9000   -Dsonar.token={{SONAR_TOKEN}}\r\n\r\n**Reference Docs:**\r\n\r\nSonalqube Environment Setup: https://docs.sonarqube.org/latest/analyzing-source-code/scanner-environment/\r\n \r\nHow to install and setup sonarqube on local: https://techblost.com/how-to-setup-sonarqube-locally-on-mac/\r\n","title":"An API incompatibility was encountered while executing org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar","body":"<p>I was facing the same problem and after a lot of attempts doing multiple things, I saw this line somewhere in the documentation:</p>\n<blockquote>\n<p>The requirements above refer only to the versions of Java and Node.js\nused by the scanner itself to run. It does not restrict the versions\nof Java, JavaScript, TypeScript or CSS that can be analyzed by the\nscanner.</p>\n</blockquote>\n<p>So, I ran my projects normally using the existing java version and <strong>right before running the sonar I changed the JAVA_HOME so that sonar scanner can run using the java version required by the scanner.</strong></p>\n<p>Firstly I checked what all java versions are present on my system using the below command:</p>\n<pre><code>mdfind -name 'java' | grep '/bin/java$' \n</code></pre>\n<p>Got something like this in the result:</p>\n<pre><code>/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/bin/java\n/Library/Java/JavaVirtualMachines/zulu-8.jdk/Contents/Home/jre/bin/java\n/usr/local/Cellar/openjdk@17/17.0.6/libexec/openjdk.jdk/Contents/Home/bin/java\n/usr/local/Cellar/openjdk/20/libexec/openjdk.jdk/Contents/Home/bin/java\n/usr/local/Cellar/openjdk@11/11.0.18/libexec/openjdk.jdk/Contents/Home/bin/java\n/usr/local/Cellar/openjdk@8/1.8.0+362/libexec/openjdk.jdk/Contents/Home/jre/bin/java\n</code></pre>\n<p>in my case I had jdk17 installed on my system already.\nIn case it is missing, please install jdk11 or jdk17 because it is required by the scanner.</p>\n<p>After that, using the path of jdk17 from the above results, I changed my JAVA_HOME to point to jdk11 location using the below command:</p>\n<pre><code>export JAVA_HOME='/usr/local/Cellar/openjdk@17/17.0.6/libexec/openjdk.jdk/Contents/Home'\n</code></pre>\n<p>once JAVA_HOME is changed, sonarqube can be run normally to give the desired result using the below command:</p>\n<pre><code>mvn sonar:sonar   -Dsonar.projectKey={{PROJECT_KEY}}  -Dsonar.projectName={{PROJECT_NAME}}   -Dsonar.host.url=http://localhost:9000   -Dsonar.token={{SONAR_TOKEN}}\n</code></pre>\n<p><strong>Reference Docs:</strong></p>\n<p>Sonalqube Environment Setup: <a href=\"https://docs.sonarqube.org/latest/analyzing-source-code/scanner-environment/\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/latest/analyzing-source-code/scanner-environment/</a></p>\n<p>How to install and setup sonarqube on local: <a href=\"https://techblost.com/how-to-setup-sonarqube-locally-on-mac/\" rel=\"nofollow noreferrer\">https://techblost.com/how-to-setup-sonarqube-locally-on-mac/</a></p>\n"}],"owner":{"account_id":10744447,"reputation":11,"user_id":7906293,"display_name":"Bharat Malge"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9485,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1681240936,"creation_date":1630040997,"question_id":68948294,"body_markdown":"We have upgraded from 7.6&gt;7.9&gt;8.9&gt;9.0.\r\n\r\nAnd now we are facing the same issue,\r\n\r\nplugin:3.9.0.2155:sonar failed: An API incompatibility was encountered while executing org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar: java.lang.UnsupportedClassVersionError: org/sonar/batch/bootstrapper/EnvironmentInformation has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n\r\nI have gone through the documentation https://docs.sonarqube.org/latest/analysis/languages/java/#header-3, but how can we user sonar.java.jdkHome and where? And this jdk should be on jenkins slave or sonarqube server?\r\nWe dont use the sonarqube properties file, we have jenkins build where we have maven config and only sonar:sonar for scans. How can we manage this scenario.\r\n\r\nThanks in advance.","title":"An API incompatibility was encountered while executing org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar","body":"<p>We have upgraded from 7.6&gt;7.9&gt;8.9&gt;9.0.</p>\n<p>And now we are facing the same issue,</p>\n<p>plugin:3.9.0.2155:sonar failed: An API incompatibility was encountered while executing org.sonarsource.scanner.maven:sonar-maven-plugin:3.9.0.2155:sonar: java.lang.UnsupportedClassVersionError: org/sonar/batch/bootstrapper/EnvironmentInformation has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0</p>\n<p>I have gone through the documentation <a href=\"https://docs.sonarqube.org/latest/analysis/languages/java/#header-3\" rel=\"nofollow noreferrer\">https://docs.sonarqube.org/latest/analysis/languages/java/#header-3</a>, but how can we user sonar.java.jdkHome and where? And this jdk should be on jenkins slave or sonarqube server?\nWe dont use the sonarqube properties file, we have jenkins build where we have maven config and only sonar:sonar for scans. How can we manage this scenario.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","spring","docker","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1530832010,"post_id":51200107,"comment_id":89383468,"body_markdown":"try this format keystore-location: ./tmp/kafka.client.keystore.jks this should work","body":"try this format keystore-location: ./tmp/kafka.client.keystore.jks this should work"},{"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1530833598,"post_id":51200107,"comment_id":89383773,"body_markdown":"let me know still if you have issue @user","body":"let me know still if you have issue @user"},{"owner":{"account_id":3493289,"reputation":509,"user_id":2922325,"display_name":"jazz"},"score":0,"creation_date":1530852436,"post_id":51200107,"comment_id":89387424,"body_markdown":"@Deadpool for your suggested format user need to mount keystore and files to execution directory with parent folder as tmp.","body":"@Deadpool for your suggested format user need to mount keystore and files to execution directory with parent folder as tmp."}],"answers":[{"tags":[],"owner":{"account_id":13798611,"reputation":37875,"user_id":9959152,"display_name":"Ryuzaki L"},"down_vote_count":0,"up_vote_count":20,"is_accepted":true,"score":20,"last_activity_date":1530866610,"creation_date":1530832430,"answer_id":51201034,"question_id":51200107,"body_markdown":"According to discussion and to enable kafka ssl configuration, first need to enable and set ssl properties in consumerFactory\r\n\r\n    @Bean\r\n    public ConsumerFactory&lt;String, ReportingTask&gt; consumerFactory() {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n        props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n        props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonSerializable.class);\r\n        props.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId);\r\n        props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, enableAutoCommit);\r\n        props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, autoCommitInterval);\r\n        props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, sessionTimeout);\r\n        props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, maxRecords);\r\n        props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, offSet);\r\n        if (sslEnabled) {\r\n            props.put(&quot;security.protocol&quot;, &quot;SSL&quot;);\r\n            props.put(&quot;ssl.truststore.location&quot;, trustStoreLocation);\r\n            props.put(&quot;ssl.truststore.password&quot;, trustStorePassword);\r\n\r\n            props.put(&quot;ssl.key.password&quot;, keyStorePassword);\r\n            props.put(&quot;ssl.keystore.password&quot;, keyStorePassword);\r\n            props.put(&quot;ssl.keystore.location&quot;, keyStoreLocation);\r\n        }\r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(Task.class));\r\n    }\r\nAnd copy the certificates into docker container \r\n\r\n    COPY ssl/stage/* /var/lib/kafka/stage/","title":"Spring Kafka SSL setup in Spring boot application.yml","body":"<p>According to discussion and to enable kafka ssl configuration, first need to enable and set ssl properties in consumerFactory</p>\n\n<pre><code>@Bean\npublic ConsumerFactory&lt;String, ReportingTask&gt; consumerFactory() {\n    Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n    props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, bootstrapServers);\n    props.put(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n    props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n    props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, JsonSerializable.class);\n    props.put(ConsumerConfig.CLIENT_ID_CONFIG, clientId);\n    props.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, enableAutoCommit);\n    props.put(ConsumerConfig.AUTO_COMMIT_INTERVAL_MS_CONFIG, autoCommitInterval);\n    props.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, sessionTimeout);\n    props.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, maxRecords);\n    props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, offSet);\n    if (sslEnabled) {\n        props.put(\"security.protocol\", \"SSL\");\n        props.put(\"ssl.truststore.location\", trustStoreLocation);\n        props.put(\"ssl.truststore.password\", trustStorePassword);\n\n        props.put(\"ssl.key.password\", keyStorePassword);\n        props.put(\"ssl.keystore.password\", keyStorePassword);\n        props.put(\"ssl.keystore.location\", keyStoreLocation);\n    }\n    return new DefaultKafkaConsumerFactory&lt;&gt;(props, new StringDeserializer(), new JsonDeserializer&lt;&gt;(Task.class));\n}\n</code></pre>\n\n<p>And copy the certificates into docker container </p>\n\n<pre><code>COPY ssl/stage/* /var/lib/kafka/stage/\n</code></pre>\n"},{"tags":[],"owner":{"account_id":982051,"reputation":460,"user_id":5828186,"display_name":"Cameron Sours"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1572363131,"creation_date":1551739228,"answer_id":54992711,"question_id":51200107,"body_markdown":"If anyone is still looking at this, try prepending file:// to the file path:\r\n\r\n    truststorelocation: &quot;file:///tmp/kafka.client.keystore.jks&quot;\r\n\r\nThe error is complaining about the lack of a URL - adding a protocol (file://) makes the path a URL (speaking very basically)","title":"Spring Kafka SSL setup in Spring boot application.yml","body":"<p>If anyone is still looking at this, try prepending file:// to the file path:</p>\n\n<pre><code>truststorelocation: \"file:///tmp/kafka.client.keystore.jks\"\n</code></pre>\n\n<p>The error is complaining about the lack of a URL - adding a protocol (file://) makes the path a URL (speaking very basically)</p>\n"},{"tags":[],"owner":{"account_id":6244632,"reputation":4283,"user_id":4857050,"display_name":"Raphael Amoedo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681240134,"creation_date":1681240134,"answer_id":75989356,"question_id":51200107,"body_markdown":"I was looking for loading keystore/truststore through classpath and here is one of the first links I got. I was able to find a solution and since I was using Spring Boot and Spring Kafka - configuration only with properties - I was looking for a solution like this, so this answer might help other people as well. So, there&#39;s a [BeanPostProcessor][1] class that you can implement. It provides two methods:\r\n\r\n`postProcessAfterInitialization` and `postProcessBeforeInitialization`\r\n\r\n&gt; Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\r\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).\r\n\r\nI was using Spring Boot with Spring Kafka and I only wanted a change for local profile.\r\n\r\nIn my code example, I was using it to override Kafka Location properties, because for SSL it doesn&#39;t read from classpath.\r\n\r\nSo this was the code:\r\n\r\n    import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.SneakyThrows;\r\n    import org.apache.kafka.common.config.SslConfigs;\r\n    import org.springframework.beans.BeansException;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.beans.factory.config.BeanPostProcessor;\r\n    import org.springframework.boot.autoconfigure.kafka.KafkaProperties;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.FileSystemResource;\r\n    import org.springframework.core.io.Resource;\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class KafkaConfiguration implements BeanPostProcessor {\r\n\r\n      @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\r\n      private Resource keyStoreResource;\r\n      @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\r\n      private Resource trustStoreResource;\r\n      private final Environment environment;\r\n\r\n      @SneakyThrows\r\n      @Override\r\n      public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        if (bean instanceof KafkaProperties) {\r\n          KafkaProperties kafkaProperties = (KafkaProperties) bean;\r\n          if(isLocalProfileActive()) {\r\n            configureStoreLocation(kafkaProperties);\r\n          }\r\n        }\r\n        return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\r\n      }\r\n\r\n      private boolean isLocalProfileActive() {\r\n        return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\r\n      }\r\n\r\n      private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\r\n        kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\r\n        kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\r\n      }\r\n\r\n    }\r\n\r\nThis way I could have on my properties file:\r\n\r\n`spring.kafka.ssl.key-store-location=classpath:mykeystore.jks`\r\n\r\nAnd the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.\r\n\r\nIt&#39;s important to mention that BeanPostProcessor runs for **EVERY** bean, so make sure you filter what you want.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html","title":"Spring Kafka SSL setup in Spring boot application.yml","body":"<p>I was looking for loading keystore/truststore through classpath and here is one of the first links I got. I was able to find a solution and since I was using Spring Boot and Spring Kafka - configuration only with properties - I was looking for a solution like this, so this answer might help other people as well. So, there's a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html\" rel=\"nofollow noreferrer\">BeanPostProcessor</a> class that you can implement. It provides two methods:</p>\n<p><code>postProcessAfterInitialization</code> and <code>postProcessBeforeInitialization</code></p>\n<blockquote>\n<p>Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).</p>\n</blockquote>\n<p>I was using Spring Boot with Spring Kafka and I only wanted a change for local profile.</p>\n<p>In my code example, I was using it to override Kafka Location properties, because for SSL it doesn't read from classpath.</p>\n<p>So this was the code:</p>\n<pre><code>import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport lombok.RequiredArgsConstructor;\nimport lombok.SneakyThrows;\nimport org.apache.kafka.common.config.SslConfigs;\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.boot.autoconfigure.kafka.KafkaProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.FileSystemResource;\nimport org.springframework.core.io.Resource;\n\n@Configuration\n@RequiredArgsConstructor\npublic class KafkaConfiguration implements BeanPostProcessor {\n\n  @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\n  private Resource keyStoreResource;\n  @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\n  private Resource trustStoreResource;\n  private final Environment environment;\n\n  @SneakyThrows\n  @Override\n  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n    if (bean instanceof KafkaProperties) {\n      KafkaProperties kafkaProperties = (KafkaProperties) bean;\n      if(isLocalProfileActive()) {\n        configureStoreLocation(kafkaProperties);\n      }\n    }\n    return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\n  }\n\n  private boolean isLocalProfileActive() {\n    return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\n  }\n\n  private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\n    kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\n    kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\n  }\n\n}\n</code></pre>\n<p>This way I could have on my properties file:</p>\n<p><code>spring.kafka.ssl.key-store-location=classpath:mykeystore.jks</code></p>\n<p>And the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.</p>\n<p>It's important to mention that BeanPostProcessor runs for <strong>EVERY</strong> bean, so make sure you filter what you want.</p>\n"}],"owner":{"account_id":4236792,"reputation":1189,"user_id":3467733,"accept_rate":100,"display_name":"Justin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59851,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":51201034,"answer_count":3,"score":12,"last_activity_date":1681240134,"creation_date":1530825786,"question_id":51200107,"body_markdown":"I am trying to setup a Spring Boot Application with a Kafka Client to use SSL. \r\nI have my keystore.jks and truststore.jks stored on a filesystem(on a docker container) because of this: https://github.com/spring-projects/spring-kafka/issues/710\r\n\r\nHere is my application.yml:\r\n\r\n    spring:\r\n      kafka:\r\n          ssl:\r\n            key-password: pass\r\n            keystore-location: /tmp/kafka.client.keystore.jks\r\n            keystore-password: pass\r\n            truststore-location: /tmp/kafka.client.truststore.jks\r\n            truststore-password: pass\r\n\r\nBut when I start the application ( in a docker container) it says:\r\n\r\n    Caused by: java.lang.IllegalStateException: Resource &#39;class path resource [tmp/kafka.client.keystore.jks]&#39; must be on a file system\r\n    [..]\r\n    Caused by: java.io.FileNotFoundException: class path resource [tmp/kafka.client.keystore.jks] cannot be resolved to URL because it does not exist\r\n\r\nI checked on the container and the .jks are there in /tmp .\r\n\r\nI cannot understand how to pass .jks to spring boot. \r\n\r\nUPDATE **06/07/2018**\r\n\r\nThis is my dockerfile\r\n\r\n    FROM openjdk:8-jdk-alpine\r\n    VOLUME /tmp\r\n    COPY ssl/kafka.client.keystore.jks /tmp\r\n    COPY ssl/kafka.client.truststore.jks /tmp\r\n    ARG JAR_FILE\r\n    ADD ${JAR_FILE} app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-Djava.security.egd=file:/dev/./urandom&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n\r\n","title":"Spring Kafka SSL setup in Spring boot application.yml","body":"<p>I am trying to setup a Spring Boot Application with a Kafka Client to use SSL. \nI have my keystore.jks and truststore.jks stored on a filesystem(on a docker container) because of this: <a href=\"https://github.com/spring-projects/spring-kafka/issues/710\" rel=\"noreferrer\">https://github.com/spring-projects/spring-kafka/issues/710</a></p>\n\n<p>Here is my application.yml:</p>\n\n<pre><code>spring:\n  kafka:\n      ssl:\n        key-password: pass\n        keystore-location: /tmp/kafka.client.keystore.jks\n        keystore-password: pass\n        truststore-location: /tmp/kafka.client.truststore.jks\n        truststore-password: pass\n</code></pre>\n\n<p>But when I start the application ( in a docker container) it says:</p>\n\n<pre><code>Caused by: java.lang.IllegalStateException: Resource 'class path resource [tmp/kafka.client.keystore.jks]' must be on a file system\n[..]\nCaused by: java.io.FileNotFoundException: class path resource [tmp/kafka.client.keystore.jks] cannot be resolved to URL because it does not exist\n</code></pre>\n\n<p>I checked on the container and the .jks are there in /tmp .</p>\n\n<p>I cannot understand how to pass .jks to spring boot. </p>\n\n<p>UPDATE <strong>06/07/2018</strong></p>\n\n<p>This is my dockerfile</p>\n\n<pre><code>FROM openjdk:8-jdk-alpine\nVOLUME /tmp\nCOPY ssl/kafka.client.keystore.jks /tmp\nCOPY ssl/kafka.client.truststore.jks /tmp\nARG JAR_FILE\nADD ${JAR_FILE} app.jar\nENTRYPOINT [\"java\",\"-Djava.security.egd=file:/dev/./urandom\",\"-jar\",\"/app.jar\"]\n</code></pre>\n"},{"tags":["java","linux","docker","docker-compose","dockerfile"],"answers":[{"tags":[],"owner":{"account_id":26394216,"reputation":21,"user_id":20045622,"display_name":"thenoobinventor"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1663699676,"creation_date":1663699676,"answer_id":73791357,"question_id":72196172,"body_markdown":"This is coming months late and I assume that you have figured it out already but for the sake of someone else that has the same issue, I&#39;ll share what worked for me. \r\n\r\nFirst thing I did was to check the name of the container for the `buildkit:build-stable-1` image, as this was automatically generated for me:\r\n\r\n    docker ps\r\n\r\nNext, stop the container:\r\n\r\n\r\n    docker stop buildx_buildkit_trusting_moore0\r\n\r\nFinally, remove the container: \r\n\r\n    docker rm buildx_buildkit_trusting_moore0\r\n\r\nAfterwards, I started the build process. I did encounter this issue a few times but stopping and removing the container always worked. I am relatively new to docker so I am not sure why this happens, but I hope this helps someone.","title":"error: failed to solve: openjdk:13: failed to do request: Head &quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;: x509","body":"<p>This is coming months late and I assume that you have figured it out already but for the sake of someone else that has the same issue, I'll share what worked for me.</p>\n<p>First thing I did was to check the name of the container for the <code>buildkit:build-stable-1</code> image, as this was automatically generated for me:</p>\n<pre><code>docker ps\n</code></pre>\n<p>Next, stop the container:</p>\n<pre><code>docker stop buildx_buildkit_trusting_moore0\n</code></pre>\n<p>Finally, remove the container:</p>\n<pre><code>docker rm buildx_buildkit_trusting_moore0\n</code></pre>\n<p>Afterwards, I started the build process. I did encounter this issue a few times but stopping and removing the container always worked. I am relatively new to docker so I am not sure why this happens, but I hope this helps someone.</p>\n"},{"tags":[],"owner":{"account_id":7808016,"reputation":111,"user_id":5905229,"display_name":"klaust"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681240124,"creation_date":1681240124,"answer_id":75989353,"question_id":72196172,"body_markdown":"Just adding to the [answer provided by thenoobinventor][1]. That answer was a huge help for my issue, but an additional step was needed.\r\n\r\nIt wasn&#39;t until I finally ran across this question and the referenced answer that I noticed a key part of my build log. The first line included &quot;booting buildkit&quot;.\r\n\r\nI had forgotten that, in an earlier effort, I had created a new builder instance that used the moby/buildkit for doing ARM builds. Stopping the buildkit container as stated in the referenced answer solved part of the problem, but Docker would spin it back up on the next build because it was set as my default builder.\r\n\r\nList your current builders:\r\n\r\n    docker builder ls\r\n\r\nIf the builder with a driver/endpoint of &quot;docker&quot; is not the current builder (as indicated with an asterisk after the name), you can use the same &quot;builder&quot; command to switch to the desired builder, which in my case was named &quot;default&quot;:\r\n\r\n    docker builder use default\r\n\r\nOnce I did this, Docker would FINALLY build my image.\r\n\r\n  [1]: https://stackoverflow.com/a/73791357/5905229","title":"error: failed to solve: openjdk:13: failed to do request: Head &quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;: x509","body":"<p>Just adding to the <a href=\"https://stackoverflow.com/a/73791357/5905229\">answer provided by thenoobinventor</a>. That answer was a huge help for my issue, but an additional step was needed.</p>\n<p>It wasn't until I finally ran across this question and the referenced answer that I noticed a key part of my build log. The first line included &quot;booting buildkit&quot;.</p>\n<p>I had forgotten that, in an earlier effort, I had created a new builder instance that used the moby/buildkit for doing ARM builds. Stopping the buildkit container as stated in the referenced answer solved part of the problem, but Docker would spin it back up on the next build because it was set as my default builder.</p>\n<p>List your current builders:</p>\n<pre><code>docker builder ls\n</code></pre>\n<p>If the builder with a driver/endpoint of &quot;docker&quot; is not the current builder (as indicated with an asterisk after the name), you can use the same &quot;builder&quot; command to switch to the desired builder, which in my case was named &quot;default&quot;:</p>\n<pre><code>docker builder use default\n</code></pre>\n<p>Once I did this, Docker would FINALLY build my image.</p>\n"}],"owner":{"account_id":14498670,"reputation":394,"user_id":10472512,"display_name":"megh_sat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3068,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":2,"score":5,"last_activity_date":1681240124,"creation_date":1652249537,"question_id":72196172,"body_markdown":"I&#39;m trying to build a docker image for my java file on my M1 max MacBook, my dockerfile:\r\n\r\n```\r\nFROM openjdk:13\r\nCOPY . /src/java\r\nWORKDIR /src/java\r\nRUN [&quot;javac&quot;,&quot;greenchallenge.java&quot;]\r\nENTRYPOINT [&quot;java&quot;,&quot;greenchallenge&quot;]\r\n```\r\n\r\nSteps followed to build the image:\r\n1. Created a new builder using: ```docker buildx create --name pibuilder```\r\n (*I wanted to use the multi architecture feature*)\r\n2. Initialed the builder using: ```docker buildx use pibuilder ```.\r\n3. Built the image and pushed it using: \r\n```\r\ndocker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t my_java:latest -t my_java:1.0.0 --push .\r\n\r\n```\r\n\r\nAfter running **step-3**, I got the below log:\r\n```\r\n[+] Building 19.7s (6/6) FINISHED                                               \r\n =&gt; [internal] booting buildkit                                           18.6s\r\n =&gt; =&gt; pulling image moby/buildkit:buildx-stable-1                        18.1s\r\n =&gt; =&gt; creating container buildx_buildkit_pibuilder0                       0.6s\r\n =&gt; [internal] load .dockerignore                                          0.0s\r\n =&gt; =&gt; transferring context: 2B                                            0.0s\r\n =&gt; [internal] load build definition from dockerfile                       0.0s\r\n =&gt; =&gt; transferring dockerfile: 493B                                       0.0s\r\n =&gt; ERROR [linux/arm64 internal] load metadata for docker.io/library/open  1.0s\r\n =&gt; CANCELED [linux/arm/v7 internal] load metadata for docker.io/library/  1.0s\r\n =&gt; ERROR [linux/amd64 internal] load metadata for docker.io/library/open  1.0s\r\n------\r\n &gt; [linux/arm64 internal] load metadata for docker.io/library/openjdk:13:\r\n------\r\n------\r\n &gt; [linux/amd64 internal] load metadata for docker.io/library/openjdk:13:\r\n------\r\ndockerfile:1\r\n--------------------\r\n   1 | &gt;&gt;&gt; FROM openjdk:13\r\n   2 |     COPY . /src/java\r\n   3 |     WORKDIR /src/java\r\n--------------------\r\nerror: failed to solve: openjdk:13: failed to do request: Head &quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;: x509: certificate signed by unknown authority\r\n```\r\nRedirecting to the above provided url ```&quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;``` gives the following message:\r\n```\r\n{&quot;errors&quot;:[{&quot;code&quot;:&quot;UNAUTHORIZED&quot;,&quot;message&quot;:&quot;authentication required&quot;,&quot;detail&quot;:[{&quot;Type&quot;:&quot;repository&quot;,&quot;Class&quot;:&quot;&quot;,&quot;Name&quot;:&quot;library/openjdk&quot;,&quot;Action&quot;:&quot;pull&quot;}]}]}\r\n```\r\n**Note:** I&#39;m using work Environment.\r\n\r\nHope you help me to solve the error, thanks in advance.","title":"error: failed to solve: openjdk:13: failed to do request: Head &quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;: x509","body":"<p>I'm trying to build a docker image for my java file on my M1 max MacBook, my dockerfile:</p>\n<pre><code>FROM openjdk:13\nCOPY . /src/java\nWORKDIR /src/java\nRUN [&quot;javac&quot;,&quot;greenchallenge.java&quot;]\nENTRYPOINT [&quot;java&quot;,&quot;greenchallenge&quot;]\n</code></pre>\n<p>Steps followed to build the image:</p>\n<ol>\n<li>Created a new builder using: <code>docker buildx create --name pibuilder</code>\n(<em>I wanted to use the multi architecture feature</em>)</li>\n<li>Initialed the builder using: <code>docker buildx use pibuilder </code>.</li>\n<li>Built the image and pushed it using:</li>\n</ol>\n<pre><code>docker buildx build --platform linux/amd64,linux/arm64,linux/arm/v7 -t my_java:latest -t my_java:1.0.0 --push .\n\n</code></pre>\n<p>After running <strong>step-3</strong>, I got the below log:</p>\n<pre><code>[+] Building 19.7s (6/6) FINISHED                                               \n =&gt; [internal] booting buildkit                                           18.6s\n =&gt; =&gt; pulling image moby/buildkit:buildx-stable-1                        18.1s\n =&gt; =&gt; creating container buildx_buildkit_pibuilder0                       0.6s\n =&gt; [internal] load .dockerignore                                          0.0s\n =&gt; =&gt; transferring context: 2B                                            0.0s\n =&gt; [internal] load build definition from dockerfile                       0.0s\n =&gt; =&gt; transferring dockerfile: 493B                                       0.0s\n =&gt; ERROR [linux/arm64 internal] load metadata for docker.io/library/open  1.0s\n =&gt; CANCELED [linux/arm/v7 internal] load metadata for docker.io/library/  1.0s\n =&gt; ERROR [linux/amd64 internal] load metadata for docker.io/library/open  1.0s\n------\n &gt; [linux/arm64 internal] load metadata for docker.io/library/openjdk:13:\n------\n------\n &gt; [linux/amd64 internal] load metadata for docker.io/library/openjdk:13:\n------\ndockerfile:1\n--------------------\n   1 | &gt;&gt;&gt; FROM openjdk:13\n   2 |     COPY . /src/java\n   3 |     WORKDIR /src/java\n--------------------\nerror: failed to solve: openjdk:13: failed to do request: Head &quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;: x509: certificate signed by unknown authority\n</code></pre>\n<p>Redirecting to the above provided url <code>&quot;https://registry-1.docker.io/v2/library/openjdk/manifests/13&quot;</code> gives the following message:</p>\n<pre><code>{&quot;errors&quot;:[{&quot;code&quot;:&quot;UNAUTHORIZED&quot;,&quot;message&quot;:&quot;authentication required&quot;,&quot;detail&quot;:[{&quot;Type&quot;:&quot;repository&quot;,&quot;Class&quot;:&quot;&quot;,&quot;Name&quot;:&quot;library/openjdk&quot;,&quot;Action&quot;:&quot;pull&quot;}]}]}\n</code></pre>\n<p><strong>Note:</strong> I'm using work Environment.</p>\n<p>Hope you help me to solve the error, thanks in advance.</p>\n"},{"tags":["java","spring-boot","ssl","apache-kafka","classpath"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1568378378,"post_id":57915057,"comment_id":102265185,"body_markdown":"You might want to look at the link again. The object type is Resource, not String","body":"You might want to look at the link again. The object type is Resource, not String"},{"owner":{"account_id":1762949,"reputation":1019,"user_id":1609525,"accept_rate":57,"display_name":"Skywarp"},"score":0,"creation_date":1568387954,"post_id":57915057,"comment_id":102270170,"body_markdown":"Not sure why using a String to inject the classpath like that works in other areas of the code","body":"Not sure why using a String to inject the classpath like that works in other areas of the code"}],"answers":[{"tags":[],"owner":{"account_id":9566891,"reputation":965,"user_id":7105883,"display_name":"camtastic"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1568335968,"creation_date":1568335968,"answer_id":57916080,"question_id":57915057,"body_markdown":"Your injecting into a String which is going to keep the &quot;classpath:&quot; within the String value and provide it as a property to DefaultKafkaConsumerFactory, try injecting into a spring Resource like:\r\n\r\n    import org.springframework.core.io.Resource;\r\n\r\n    @Value(&quot;classpath:path/to/file/in/classpath&quot;)\r\n    Resource resourceFile;\r\n\r\nThen you can access the file and you could get the absolute path like:\r\n\r\n`resourceFile.getFile().getAbsolutePath()`\r\n\r\nThe idea being you could provide the absolute path to DefaultKafkaConsumerFactory\r\n\r\nBut you could also try removing the &quot;classpath:&quot; and inject as String like your current code which might work depending on how DefaultKafkaConsumerFactory treats that property.  But I can&#39;t see why absolute path above wouldn&#39;t work.","title":"Kafka Configuration class in Spring Boot not finding keystore or truststore","body":"<p>Your injecting into a String which is going to keep the \"classpath:\" within the String value and provide it as a property to DefaultKafkaConsumerFactory, try injecting into a spring Resource like:</p>\n\n<pre><code>import org.springframework.core.io.Resource;\n\n@Value(\"classpath:path/to/file/in/classpath\")\nResource resourceFile;\n</code></pre>\n\n<p>Then you can access the file and you could get the absolute path like:</p>\n\n<p><code>resourceFile.getFile().getAbsolutePath()</code></p>\n\n<p>The idea being you could provide the absolute path to DefaultKafkaConsumerFactory</p>\n\n<p>But you could also try removing the \"classpath:\" and inject as String like your current code which might work depending on how DefaultKafkaConsumerFactory treats that property.  But I can't see why absolute path above wouldn't work.</p>\n"},{"tags":[],"owner":{"account_id":6244632,"reputation":4283,"user_id":4857050,"display_name":"Raphael Amoedo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681239889,"creation_date":1681239889,"answer_id":75989325,"question_id":57915057,"body_markdown":"For those like me that were using Spring Boot and Spring Kafka and don&#39;t override a DefaultKafkaConsumerFactory - only use properties for configuration -, there&#39;s a [BeanPostProcessor][1] class that you can implement. It provides two methods:\r\n\r\n`postProcessAfterInitialization` and `postProcessBeforeInitialization`\r\n\r\n&gt; Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\r\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).\r\n\r\nI was using Spring Boot with Spring Kafka and I only wanted a change for local profile.\r\n\r\nIn my code example, I was using it to override Kafka Location properties, because for SSL it doesn&#39;t read from classpath.\r\n\r\nSo this was the code:\r\n\r\n    import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.SneakyThrows;\r\n    import org.apache.kafka.common.config.SslConfigs;\r\n    import org.springframework.beans.BeansException;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.beans.factory.config.BeanPostProcessor;\r\n    import org.springframework.boot.autoconfigure.kafka.KafkaProperties;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.FileSystemResource;\r\n    import org.springframework.core.io.Resource;\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class KafkaConfiguration implements BeanPostProcessor {\r\n\r\n      @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\r\n      private Resource keyStoreResource;\r\n      @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\r\n      private Resource trustStoreResource;\r\n      private final Environment environment;\r\n\r\n      @SneakyThrows\r\n      @Override\r\n      public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        if (bean instanceof KafkaProperties) {\r\n          KafkaProperties kafkaProperties = (KafkaProperties) bean;\r\n          if(isLocalProfileActive()) {\r\n            configureStoreLocation(kafkaProperties);\r\n          }\r\n        }\r\n        return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\r\n      }\r\n\r\n      private boolean isLocalProfileActive() {\r\n        return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\r\n      }\r\n\r\n      private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\r\n        kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\r\n        kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\r\n      }\r\n\r\n    }\r\n\r\nThis way I could have on my properties file:\r\n\r\n`spring.kafka.ssl.key-store-location=classpath:mykeystore.jks`\r\n\r\nAnd the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.\r\n\r\nIt&#39;s important to mention that BeanPostProcessor runs for **EVERY** bean, so make sure you filter what you want.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html","title":"Kafka Configuration class in Spring Boot not finding keystore or truststore","body":"<p>For those like me that were using Spring Boot and Spring Kafka and don't override a DefaultKafkaConsumerFactory - only use properties for configuration -, there's a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html\" rel=\"nofollow noreferrer\">BeanPostProcessor</a> class that you can implement. It provides two methods:</p>\n<p><code>postProcessAfterInitialization</code> and <code>postProcessBeforeInitialization</code></p>\n<blockquote>\n<p>Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).</p>\n</blockquote>\n<p>I was using Spring Boot with Spring Kafka and I only wanted a change for local profile.</p>\n<p>In my code example, I was using it to override Kafka Location properties, because for SSL it doesn't read from classpath.</p>\n<p>So this was the code:</p>\n<pre><code>import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport lombok.RequiredArgsConstructor;\nimport lombok.SneakyThrows;\nimport org.apache.kafka.common.config.SslConfigs;\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.boot.autoconfigure.kafka.KafkaProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.FileSystemResource;\nimport org.springframework.core.io.Resource;\n\n@Configuration\n@RequiredArgsConstructor\npublic class KafkaConfiguration implements BeanPostProcessor {\n\n  @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\n  private Resource keyStoreResource;\n  @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\n  private Resource trustStoreResource;\n  private final Environment environment;\n\n  @SneakyThrows\n  @Override\n  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n    if (bean instanceof KafkaProperties) {\n      KafkaProperties kafkaProperties = (KafkaProperties) bean;\n      if(isLocalProfileActive()) {\n        configureStoreLocation(kafkaProperties);\n      }\n    }\n    return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\n  }\n\n  private boolean isLocalProfileActive() {\n    return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\n  }\n\n  private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\n    kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\n    kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\n  }\n\n}\n</code></pre>\n<p>This way I could have on my properties file:</p>\n<p><code>spring.kafka.ssl.key-store-location=classpath:mykeystore.jks</code></p>\n<p>And the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.</p>\n<p>It's important to mention that BeanPostProcessor runs for <strong>EVERY</strong> bean, so make sure you filter what you want.</p>\n"}],"owner":{"account_id":1762949,"reputation":1019,"user_id":1609525,"accept_rate":57,"display_name":"Skywarp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9850,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":57916080,"answer_count":2,"score":6,"last_activity_date":1681239889,"creation_date":1568325994,"question_id":57915057,"body_markdown":"I&#39;m setting up a Kafka consumer configuration and the configuration cannot find the keystore or truststore on the classpath:\r\n\r\n    @EnableKafka\r\n    @Configuration\r\n    public class KafkaConfig {\r\n    \r\n        @Value(&quot;${kafka.ssl.keystore}&quot;)\r\n        private String keyStorePath;\r\n        @Value(&quot;${kafka.ssl.truststore}&quot;)\r\n        private String trustStorePath;\r\n    \r\n        @Bean\r\n        public ConsumerFactory&lt;String, String&gt; getConsumerFactory() {\r\n    \r\n            Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\r\n            properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,&quot;my-bootstrap.mydomain.com:443&quot;);\r\n            properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            properties.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;group1&quot;);\r\n            properties.put(ConsumerConfig.CLIENT_ID_CONFIG, &quot;client1&quot;);\r\n            properties.put(&quot;enable.auto.commit&quot;, &quot;true&quot;);\r\n            properties.put(&quot;auto.commit.interval.ms&quot;, &quot;500&quot;);\r\n            properties.put(&quot;session.timeout.ms&quot;, &quot;30000&quot;);\r\n            properties.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, &quot;SSL&quot;);\r\n            properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStorePath);\r\n            properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n            properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStorePath);\r\n            properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, &quot;password&quot;);\r\n            properties.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, &quot;password&quot;);\r\n    \r\n            return new DefaultKafkaConsumerFactory&lt;&gt;(properties);\r\n        }\r\n    \r\n        @Bean\r\n        public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\r\n            ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory\r\n                    = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n            factory.setConsumerFactory(getConsumerFactory());\r\n            return factory;\r\n        }\r\n    }\r\n\r\nThe keystore and truststore are both located in the directory `src/main/resources/ssl` in the same maven module as the configuration class.\r\n\r\nI set up the placeholders in the application.yml as follows:\r\n\r\n    kafka:\r\n      ssl:\r\n        keystore: classpath:ssl/kafka-keystore.jks\r\n        truststore: classpath:ssl/kafka-truststore.jks\r\n\r\nHowever, the application fails to start with the following exception:\r\n\r\n    &quot;org.apache.kafka.common.KafkaException: java.io.FileNotFoundException: classpath:ssl/kafka-keystore.jks (No such file or directory)&quot;\r\n\r\nMy understanding is that using `@Value` enables the use of the `classpath:` prefix to resolve the classpath (see this link)\r\nhttps://www.baeldung.com/spring-classpath-file-access\r\n\r\nMoreover, the `@Value` technique works just fine to resolve the keystores and truststores for the reactive WebClient configuration in the same application.\r\n\r\nWhat do I need to do to resolve the classpath for the Kafka configuration? Am I missing something here?","title":"Kafka Configuration class in Spring Boot not finding keystore or truststore","body":"<p>I'm setting up a Kafka consumer configuration and the configuration cannot find the keystore or truststore on the classpath:</p>\n\n<pre><code>@EnableKafka\n@Configuration\npublic class KafkaConfig {\n\n    @Value(\"${kafka.ssl.keystore}\")\n    private String keyStorePath;\n    @Value(\"${kafka.ssl.truststore}\")\n    private String trustStorePath;\n\n    @Bean\n    public ConsumerFactory&lt;String, String&gt; getConsumerFactory() {\n\n        Map&lt;String, Object&gt; properties = new HashMap&lt;&gt;();\n        properties.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG,\"my-bootstrap.mydomain.com:443\");\n        properties.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        properties.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, \"group1\");\n        properties.put(ConsumerConfig.CLIENT_ID_CONFIG, \"client1\");\n        properties.put(\"enable.auto.commit\", \"true\");\n        properties.put(\"auto.commit.interval.ms\", \"500\");\n        properties.put(\"session.timeout.ms\", \"30000\");\n        properties.put(CommonClientConfigs.SECURITY_PROTOCOL_CONFIG, \"SSL\");\n        properties.put(SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStorePath);\n        properties.put(SslConfigs.SSL_KEYSTORE_PASSWORD_CONFIG, \"password\");\n        properties.put(SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStorePath);\n        properties.put(SslConfigs.SSL_TRUSTSTORE_PASSWORD_CONFIG, \"password\");\n        properties.put(SslConfigs.SSL_KEY_PASSWORD_CONFIG, \"password\");\n\n        return new DefaultKafkaConsumerFactory&lt;&gt;(properties);\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; kafkaListenerContainerFactory() {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory\n                = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(getConsumerFactory());\n        return factory;\n    }\n}\n</code></pre>\n\n<p>The keystore and truststore are both located in the directory <code>src/main/resources/ssl</code> in the same maven module as the configuration class.</p>\n\n<p>I set up the placeholders in the application.yml as follows:</p>\n\n<pre><code>kafka:\n  ssl:\n    keystore: classpath:ssl/kafka-keystore.jks\n    truststore: classpath:ssl/kafka-truststore.jks\n</code></pre>\n\n<p>However, the application fails to start with the following exception:</p>\n\n<pre><code>\"org.apache.kafka.common.KafkaException: java.io.FileNotFoundException: classpath:ssl/kafka-keystore.jks (No such file or directory)\"\n</code></pre>\n\n<p>My understanding is that using <code>@Value</code> enables the use of the <code>classpath:</code> prefix to resolve the classpath (see this link)\n<a href=\"https://www.baeldung.com/spring-classpath-file-access\" rel=\"noreferrer\">https://www.baeldung.com/spring-classpath-file-access</a></p>\n\n<p>Moreover, the <code>@Value</code> technique works just fine to resolve the keystores and truststores for the reactive WebClient configuration in the same application.</p>\n\n<p>What do I need to do to resolve the classpath for the Kafka configuration? Am I missing something here?</p>\n"},{"tags":["java","spring","spring-boot","properties"],"answers":[{"tags":[],"owner":{"display_name":"user10871691"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1571467638,"creation_date":1571467638,"answer_id":58461230,"question_id":58461061,"body_markdown":"You need to define and register an ApplicationListener&lt;ApplicationEnvironmentPreparedEvent&gt; like this:\r\n\r\n    public class DynamicPropertiesListener implements ApplicationListener&lt;ApplicationEnvironmentPreparedEvent&gt; {\r\n      public void onApplicationEvent(ApplicationEnvironmentPreparedEvent event) {\r\n        ConfigurableEnvironment environment = event.getEnvironment();\r\n        // modify the properties here, see the ConfigurableEnvironment javadoc\r\n      }\r\n    }\r\n\r\nNow register the listener. If you run the application with the `main` method:\r\n\r\n    SpringApplication app = new SpringApplication(primarySources);\r\n    app.addListeners(new DynamicPropertiesListener());\r\n    app.run(args);\r\n\r\nor, even better, create `src\\main\\resources\\META-INF\\spring.factories` file with this content:\r\n\r\n    org.springframework.context.ApplicationListener=x.y.DynamicPropertiesListener\r\n\r\nWhere `x.y` is the package of your listener.","title":"spring boot : How to set spring properties dynamically","body":"<p>You need to define and register an ApplicationListener like this:</p>\n\n<pre><code>public class DynamicPropertiesListener implements ApplicationListener&lt;ApplicationEnvironmentPreparedEvent&gt; {\n  public void onApplicationEvent(ApplicationEnvironmentPreparedEvent event) {\n    ConfigurableEnvironment environment = event.getEnvironment();\n    // modify the properties here, see the ConfigurableEnvironment javadoc\n  }\n}\n</code></pre>\n\n<p>Now register the listener. If you run the application with the <code>main</code> method:</p>\n\n<pre><code>SpringApplication app = new SpringApplication(primarySources);\napp.addListeners(new DynamicPropertiesListener());\napp.run(args);\n</code></pre>\n\n<p>or, even better, create <code>src\\main\\resources\\META-INF\\spring.factories</code> file with this content:</p>\n\n<pre><code>org.springframework.context.ApplicationListener=x.y.DynamicPropertiesListener\n</code></pre>\n\n<p>Where <code>x.y</code> is the package of your listener.</p>\n"},{"tags":[],"owner":{"account_id":6932710,"reputation":3956,"user_id":5321729,"accept_rate":67,"display_name":"Ajit Soman"},"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1571475965,"creation_date":1571475965,"answer_id":58462100,"question_id":58461061,"body_markdown":"Since you know the properties to enable SSL in the spring boot app. You can pass these properties programmatically in your spring boot application like this:\r\n\r\n    @SpringBootApplication\r\n    public class SpringBootTestApplication {\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    //\t\tSpringApplication.run(SpringBootTestApplication.class, args);\r\n    \t\t\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.put(&quot;server.ssl.key-store&quot;, &quot;/home/ajit-soman/Desktop/test/keystore.p12&quot;);\r\n    \t\tprops.put(&quot;server.ssl.key-store-password&quot;, &quot;123456&quot;);\r\n    \t\tprops.put(&quot;server.ssl.key-store-type&quot;, &quot;PKCS12&quot;);\r\n    \t\tprops.put(&quot;server.ssl.key-alias&quot;, &quot;tomcat&quot;);\r\n    \t\t\r\n    \t\tnew SpringApplicationBuilder(SpringBootTestApplication.class)\r\n    \t\t\t.properties(props).run(args);\r\n    \t}\r\n    }\r\n\r\nAs you can see I have commented out this:\r\n`SpringApplication.run(SpringBootTestApplication.class, args);`\r\nand used `SpringApplicationBuilder` class to add properties to the app. \r\n\r\nNow, these properties are defined in the program, You can apply condition and change property values based on your requirements.","title":"spring boot : How to set spring properties dynamically","body":"<p>Since you know the properties to enable SSL in the spring boot app. You can pass these properties programmatically in your spring boot application like this:</p>\n\n<pre><code>@SpringBootApplication\npublic class SpringBootTestApplication {\n    public static void main(String[] args) {\n\n//      SpringApplication.run(SpringBootTestApplication.class, args);\n\n        Properties props = new Properties();\n        props.put(\"server.ssl.key-store\", \"/home/ajit-soman/Desktop/test/keystore.p12\");\n        props.put(\"server.ssl.key-store-password\", \"123456\");\n        props.put(\"server.ssl.key-store-type\", \"PKCS12\");\n        props.put(\"server.ssl.key-alias\", \"tomcat\");\n\n        new SpringApplicationBuilder(SpringBootTestApplication.class)\n            .properties(props).run(args);\n    }\n}\n</code></pre>\n\n<p>As you can see I have commented out this:\n<code>SpringApplication.run(SpringBootTestApplication.class, args);</code>\nand used <code>SpringApplicationBuilder</code> class to add properties to the app. </p>\n\n<p>Now, these properties are defined in the program, You can apply condition and change property values based on your requirements.</p>\n"},{"tags":[],"owner":{"account_id":15424243,"reputation":3910,"user_id":11127438,"display_name":"Tien Do Nam"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1571494439,"creation_date":1571493294,"answer_id":58464409,"question_id":58461061,"body_markdown":"In Spring Boot, you can read and edit propeties using `System.getProperty(String key)` and `System.setProperty(String key, String value)`\r\n\r\n    public static void main(String[] args) {\r\n\r\n        // set properties\r\n        System.setProperty(&quot;server.ssl.enabled&quot;, &quot;true&quot;);\r\n        System.setProperty(&quot;server.ssl.key-store-type&quot;, &quot;PKCS12&quot;);\r\n        System.setProperty(&quot;server.ssl.key-store&quot;, &quot;keys/keystore.jks&quot;);\r\n        System.setProperty(&quot;server.ssl.key-store-password&quot;, &quot;changeit&quot;);\r\n        System.setProperty(&quot;server.ssl.key-alias&quot;, &quot;tomcat&quot;);\r\n\r\n        // run\r\n        SpringApplication.run(DemoApplication.class, args);\r\n    }\r\n\r\n**Note**:\r\n\r\nThis will overwrite the static properties (not all but the overwritten ones).","title":"spring boot : How to set spring properties dynamically","body":"<p>In Spring Boot, you can read and edit propeties using <code>System.getProperty(String key)</code> and <code>System.setProperty(String key, String value)</code></p>\n\n<pre><code>public static void main(String[] args) {\n\n    // set properties\n    System.setProperty(\"server.ssl.enabled\", \"true\");\n    System.setProperty(\"server.ssl.key-store-type\", \"PKCS12\");\n    System.setProperty(\"server.ssl.key-store\", \"keys/keystore.jks\");\n    System.setProperty(\"server.ssl.key-store-password\", \"changeit\");\n    System.setProperty(\"server.ssl.key-alias\", \"tomcat\");\n\n    // run\n    SpringApplication.run(DemoApplication.class, args);\n}\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<p>This will overwrite the static properties (not all but the overwritten ones).</p>\n"},{"tags":[],"owner":{"account_id":6244632,"reputation":4283,"user_id":4857050,"display_name":"Raphael Amoedo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681239652,"creation_date":1681239652,"answer_id":75989289,"question_id":58461061,"body_markdown":"To add another option, there&#39;s a [BeanPostProcessor][1] class that you can implement. It provides two methods:\r\n\r\n`postProcessAfterInitialization` and `postProcessBeforeInitialization`\r\n\r\n&gt; Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\r\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).\r\n\r\nI was using Spring Boot with Spring Kafka and I only wanted a change for local profile.\r\n\r\nIn my code example, I was using it to override Kafka Location properties, because for SSL it doesn&#39;t read from classpath.\r\n\r\nSo this was the code:\r\n\r\n    import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\r\n    import java.io.IOException;\r\n    import java.util.Arrays;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.SneakyThrows;\r\n    import org.apache.kafka.common.config.SslConfigs;\r\n    import org.springframework.beans.BeansException;\r\n    import org.springframework.beans.factory.annotation.Value;\r\n    import org.springframework.beans.factory.config.BeanPostProcessor;\r\n    import org.springframework.boot.autoconfigure.kafka.KafkaProperties;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.core.env.Environment;\r\n    import org.springframework.core.io.FileSystemResource;\r\n    import org.springframework.core.io.Resource;\r\n\r\n    @Configuration\r\n    @RequiredArgsConstructor\r\n    public class KafkaConfiguration implements BeanPostProcessor {\r\n\r\n      @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\r\n      private Resource keyStoreResource;\r\n      @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\r\n      private Resource trustStoreResource;\r\n      private final Environment environment;\r\n\r\n      @SneakyThrows\r\n      @Override\r\n      public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        if (bean instanceof KafkaProperties) {\r\n          KafkaProperties kafkaProperties = (KafkaProperties) bean;\r\n          if(isLocalProfileActive()) {\r\n            configureStoreLocation(kafkaProperties);\r\n          }\r\n        }\r\n        return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\r\n      }\r\n\r\n      private boolean isLocalProfileActive() {\r\n        return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\r\n      }\r\n\r\n      private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\r\n        kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\r\n        kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\r\n        kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\r\n      }\r\n\r\n    }\r\n\r\nThis way I could have on my properties file:\r\n\r\n`spring.kafka.ssl.key-store-location=classpath:mykeystore.jks`\r\n\r\nAnd the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.\r\n\r\nIt&#39;s important to mention that BeanPostProcessor runs for **EVERY** bean, so make sure you filter what you want.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html","title":"spring boot : How to set spring properties dynamically","body":"<p>To add another option, there's a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/beans/factory/config/BeanPostProcessor.html\" rel=\"nofollow noreferrer\">BeanPostProcessor</a> class that you can implement. It provides two methods:</p>\n<p><code>postProcessAfterInitialization</code> and <code>postProcessBeforeInitialization</code></p>\n<blockquote>\n<p>Factory hook that allows for custom modification of new bean instances — for example, checking for marker interfaces or wrapping beans with proxies.\nTypically, post-processors that populate beans via marker interfaces or the like will implement postProcessBeforeInitialization(java.lang.Object, java.lang.String), while post-processors that wrap beans with proxies will normally implement postProcessAfterInitialization(java.lang.Object, java.lang.String).</p>\n</blockquote>\n<p>I was using Spring Boot with Spring Kafka and I only wanted a change for local profile.</p>\n<p>In my code example, I was using it to override Kafka Location properties, because for SSL it doesn't read from classpath.</p>\n<p>So this was the code:</p>\n<pre><code>import io.confluent.kafka.schemaregistry.client.SchemaRegistryClientConfig;\nimport java.io.IOException;\nimport java.util.Arrays;\nimport lombok.RequiredArgsConstructor;\nimport lombok.SneakyThrows;\nimport org.apache.kafka.common.config.SslConfigs;\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\nimport org.springframework.boot.autoconfigure.kafka.KafkaProperties;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.env.Environment;\nimport org.springframework.core.io.FileSystemResource;\nimport org.springframework.core.io.Resource;\n\n@Configuration\n@RequiredArgsConstructor\npublic class KafkaConfiguration implements BeanPostProcessor {\n\n  @Value(&quot;${spring.kafka.ssl.key-store-location:}&quot;)\n  private Resource keyStoreResource;\n  @Value(&quot;${spring.kafka.properties.schema.registry.ssl.truststore.location:}&quot;)\n  private Resource trustStoreResource;\n  private final Environment environment;\n\n  @SneakyThrows\n  @Override\n  public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n    if (bean instanceof KafkaProperties) {\n      KafkaProperties kafkaProperties = (KafkaProperties) bean;\n      if(isLocalProfileActive()) {\n        configureStoreLocation(kafkaProperties);\n      }\n    }\n    return BeanPostProcessor.super.postProcessAfterInitialization(bean, beanName);\n  }\n\n  private boolean isLocalProfileActive() {\n    return Arrays.stream(environment.getActiveProfiles()).anyMatch(profile -&gt; &quot;local&quot;.equals(profile));\n  }\n\n  private void configureStoreLocation(KafkaProperties kafkaProperties) throws IOException {\n    kafkaProperties.getSsl().setKeyStoreLocation(new FileSystemResource(keyStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_KEYSTORE_LOCATION_CONFIG, keyStoreResource.getFile().getAbsolutePath());\n    kafkaProperties.getSsl().setTrustStoreLocation(new FileSystemResource(trustStoreResource.getFile().getAbsolutePath()));\n    kafkaProperties.getProperties().put(SchemaRegistryClientConfig.CLIENT_NAMESPACE + SslConfigs.SSL_TRUSTSTORE_LOCATION_CONFIG, trustStoreResource.getFile().getAbsolutePath());\n  }\n\n}\n</code></pre>\n<p>This way I could have on my properties file:</p>\n<p><code>spring.kafka.ssl.key-store-location=classpath:mykeystore.jks</code></p>\n<p>And the code would get the absolute path from that and set it. It makes also possible to filter based on profiles.</p>\n<p>It's important to mention that BeanPostProcessor runs for <strong>EVERY</strong> bean, so make sure you filter what you want.</p>\n"}],"owner":{"account_id":4434750,"reputation":1949,"user_id":3610891,"accept_rate":62,"display_name":"Onki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27922,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":58462100,"answer_count":4,"score":8,"last_activity_date":1681239652,"creation_date":1571466005,"question_id":58461061,"body_markdown":"There are so many properties which can be defined in application.properties of spring boot application.\r\n\r\nBut I want to pass properties to configure ssl to spring from inside the code. \r\n\r\n    server.ssl.enabled=true\r\n    # The format used for the keystore \r\n    server.ssl.key-store-type=PKCS12\r\n    # The path to the keystore containing the certificate\r\n    server.ssl.key-store=keys/keystore.jks\r\n    # The password used to generate the certificate\r\n    server.ssl.key-store-password=changeit\r\n    # The alias mapped to the certificate\r\n    server.ssl.key-alias=tomcat\r\n\r\nSo as these will be spring defined properties to be used from application.properties. I just want to set them from the code based on some logic.\r\n\r\nFor non spring application, I still have some idea that they can be passed as application, session or context properties but I am not aware on how this works in spring.\r\n\r\nAny help would be appreciated.","title":"spring boot : How to set spring properties dynamically","body":"<p>There are so many properties which can be defined in application.properties of spring boot application.</p>\n\n<p>But I want to pass properties to configure ssl to spring from inside the code. </p>\n\n<pre><code>server.ssl.enabled=true\n# The format used for the keystore \nserver.ssl.key-store-type=PKCS12\n# The path to the keystore containing the certificate\nserver.ssl.key-store=keys/keystore.jks\n# The password used to generate the certificate\nserver.ssl.key-store-password=changeit\n# The alias mapped to the certificate\nserver.ssl.key-alias=tomcat\n</code></pre>\n\n<p>So as these will be spring defined properties to be used from application.properties. I just want to set them from the code based on some logic.</p>\n\n<p>For non spring application, I still have some idea that they can be passed as application, session or context properties but I am not aware on how this works in spring.</p>\n\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":10992239,"reputation":472,"user_id":8075762,"display_name":"Amanpreet Kaur"},"score":0,"creation_date":1681237763,"post_id":75988169,"comment_id":134023333,"body_markdown":"Can you please post your imports of MainActivity class","body":"Can you please post your imports of MainActivity class"},{"owner":{"account_id":21761998,"reputation":87,"user_id":16066452,"display_name":"Allen J Mathew"},"score":0,"creation_date":1681239674,"post_id":75988169,"comment_id":134023746,"body_markdown":"I have added my imports","body":"I have added my imports"},{"owner":{"account_id":10992239,"reputation":472,"user_id":8075762,"display_name":"Amanpreet Kaur"},"score":1,"creation_date":1681240151,"post_id":75988169,"comment_id":134023855,"body_markdown":"This is missing in your imports import android.Manifest or complete the statement where you have left, you will definitely get hint to add import","body":"This is missing in your imports import android.Manifest or complete the statement where you have left, you will definitely get hint to add import"}],"owner":{"account_id":21761998,"reputation":87,"user_id":16066452,"display_name":"Allen J Mathew"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681239650,"creation_date":1681230596,"question_id":75988169,"body_markdown":"I am trying to get permission from the user to access their location. I have asked for permission in the Android Manifest:\r\n\r\n        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n            android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:supportsRtl=&quot;true&quot;\r\n            android:theme=&quot;@style/Theme.MyApplication2&quot;\r\n            tools:targetApi=&quot;31&quot;&gt;\r\n            &lt;activity\r\n                android:name=&quot;.MainActivity&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n        &lt;/application&gt;\r\n    \r\n        &lt;/manifest&gt;\r\n\r\nWhen using ContextCompat.checkSelfPermission(this, Manifest.permission.) I can&#39;t seem to access ACCESS_FINE_LOCATION using Manifest.permission. Any help would be appreciated.\r\n\r\n\r\n  \r\n\r\n      import androidx.annotation.NonNull;\r\n      import androidx.appcompat.app.AppCompatActivity;\r\n      import androidx.core.content.ContextCompat;\r\n      import androidx.core.location.LocationListenerCompat;\r\n\r\n      import android.content.Context;\r\n      import android.location.Location;\r\n      import android.location.LocationListener;\r\n      import android.location.LocationManager;\r\n      import android.os.Bundle;\r\n      import android.util.Log;\r\n      public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n            LocationManager locationManager = (LocationManager) \r\n            this.getSystemService(Context.LOCATION_SERVICE);\r\n            LocationListener locationListener = new LocationListener() {\r\n                @Override\r\n                public void onLocationChanged(@NonNull Location location) {\r\n                    Log.i(&quot;Location&quot;, location.toString());\r\n                }\r\n            };\r\n    \r\n    //error is here\r\n            if (ContextCompat.checkSelfPermission(this, Manifest.permission.) {\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n","title":"Permissions not appearing when using ContextCompat.checkSelfPermission()","body":"<p>I am trying to get permission from the user to access their location. I have asked for permission in the Android Manifest:</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot;/&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.MyApplication2&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n    &lt;/manifest&gt;\n</code></pre>\n<p>When using ContextCompat.checkSelfPermission(this, Manifest.permission.) I can't seem to access ACCESS_FINE_LOCATION using Manifest.permission. Any help would be appreciated.</p>\n<pre><code>  import androidx.annotation.NonNull;\n  import androidx.appcompat.app.AppCompatActivity;\n  import androidx.core.content.ContextCompat;\n  import androidx.core.location.LocationListenerCompat;\n\n  import android.content.Context;\n  import android.location.Location;\n  import android.location.LocationListener;\n  import android.location.LocationManager;\n  import android.os.Bundle;\n  import android.util.Log;\n  public class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        LocationManager locationManager = (LocationManager) \n        this.getSystemService(Context.LOCATION_SERVICE);\n        LocationListener locationListener = new LocationListener() {\n            @Override\n            public void onLocationChanged(@NonNull Location location) {\n                Log.i(&quot;Location&quot;, location.toString());\n            }\n        };\n\n//error is here\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.) {\n\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-studio","google-maps"],"comments":[{"owner":{"account_id":6552102,"reputation":2093,"user_id":5750389,"display_name":"Elias Fazel"},"score":0,"creation_date":1681239351,"post_id":75989211,"comment_id":134023671,"body_markdown":"add your getlastLocation() function in callback after permission granted. btw did you add permission in manifest too? https://stackoverflow.com/questions/32714787/android-m-permissions-onrequestpermissionsresult-not-being-called","body":"add your getlastLocation() function in callback after permission granted. btw did you add permission in manifest too? <a href=\"https://stackoverflow.com/questions/32714787/android-m-permissions-onrequestpermissionsresult-not-being-called\" title=\"android m permissions onrequestpermissionsresult not being called\">stackoverflow.com/questions/32714787/&hellip;</a>"},{"owner":{"account_id":26060948,"reputation":1,"user_id":19762299,"display_name":"k1rit0"},"score":0,"creation_date":1681242952,"post_id":75989211,"comment_id":134024471,"body_markdown":"yes i added it on my manifest","body":"yes i added it on my manifest"},{"owner":{"account_id":6552102,"reputation":2093,"user_id":5750389,"display_name":"Elias Fazel"},"score":0,"creation_date":1681302474,"post_id":75989211,"comment_id":134034018,"body_markdown":"ok. then use callback to get data after permission granted","body":"ok. then use callback to get data after permission granted"}],"owner":{"account_id":26060948,"reputation":1,"user_id":19762299,"display_name":"k1rit0"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681239444,"creation_date":1681238996,"question_id":75989211,"body_markdown":"I am trying to get the longitude and latitude but set it on a text view but idk why its not working i tried everything but i am not getting any results i am getting the permisiion dialog box but unable to show it \r\n\r\nthis is my main activity  \r\n\r\n\r\n```\r\npackage com.example.morror;\r\n\r\n\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\nimport com.google.android.gms.location.FusedLocationProviderClient;\r\nimport com.google.android.gms.tasks.OnSuccessListener;\r\n\r\n\r\nimport android.Manifest;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\n\r\nimport android.location.Location;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.widget.TextView;\r\n\r\n\r\npublic class SplashActivity extends AppCompatActivity {\r\n    private final static int REQUEST_CODE = 100;\r\n    private TextView introTextView;\r\n    FusedLocationProviderClient hello;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_splash);\r\n\r\n        hello= new FusedLocationProviderClient(SplashActivity.this);\r\n\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\r\n            ActivityCompat.requestPermissions(SplashActivity.this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},REQUEST_CODE);\r\n        }\r\n\r\n        introTextView = findViewById(R.id.intro);\r\n\r\n        getlastLocation();\r\n    }\r\n\r\n    private void letsgo() {\r\n        new Handler().postDelayed(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                Intent home=new Intent(SplashActivity.this,MainActivity.class);\r\n                startActivity(home);\r\n            }\r\n        }, 4000);\r\n    }\r\n\r\n    private void getlastLocation() {\r\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\r\n            hello.getLastLocation().addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\r\n                @Override\r\n                public void onSuccess(Location location) {\r\n                    if (location != null){\r\n                        double latitude = location.getLatitude();\r\n                        double longitude = location.getLongitude();\r\n                        introTextView.setText(&quot;Latitude: &quot; + latitude + &quot;\\nLongitude: &quot; + longitude);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\nI was trying to get the longitude and latitude using google play services","title":"I am unable to get longitude and latitude using FusedLocationProviderClient | Google Play services","body":"<p>I am trying to get the longitude and latitude but set it on a text view but idk why its not working i tried everything but i am not getting any results i am getting the permisiion dialog box but unable to show it</p>\n<p>this is my main activity</p>\n<pre><code>package com.example.morror;\n\n\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\nimport com.google.android.gms.location.FusedLocationProviderClient;\nimport com.google.android.gms.tasks.OnSuccessListener;\n\n\nimport android.Manifest;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\n\nimport android.location.Location;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.widget.TextView;\n\n\npublic class SplashActivity extends AppCompatActivity {\n    private final static int REQUEST_CODE = 100;\n    private TextView introTextView;\n    FusedLocationProviderClient hello;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_splash);\n\n        hello= new FusedLocationProviderClient(SplashActivity.this);\n\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED){\n            ActivityCompat.requestPermissions(SplashActivity.this,new String[]{Manifest.permission.ACCESS_FINE_LOCATION},REQUEST_CODE);\n        }\n\n        introTextView = findViewById(R.id.intro);\n\n        getlastLocation();\n    }\n\n    private void letsgo() {\n        new Handler().postDelayed(new Runnable() {\n            @Override\n            public void run() {\n                Intent home=new Intent(SplashActivity.this,MainActivity.class);\n                startActivity(home);\n            }\n        }, 4000);\n    }\n\n    private void getlastLocation() {\n        if (ContextCompat.checkSelfPermission(this, Manifest.permission.ACCESS_FINE_LOCATION) == PackageManager.PERMISSION_GRANTED) {\n            hello.getLastLocation().addOnSuccessListener(new OnSuccessListener&lt;Location&gt;() {\n                @Override\n                public void onSuccess(Location location) {\n                    if (location != null){\n                        double latitude = location.getLatitude();\n                        double longitude = location.getLongitude();\n                        introTextView.setText(&quot;Latitude: &quot; + latitude + &quot;\\nLongitude: &quot; + longitude);\n                    }\n                }\n            });\n        }\n    }\n    \n\n\n}\n\n\n\n\n\n</code></pre>\n<p>I was trying to get the longitude and latitude using google play services</p>\n"},{"tags":["java","spring","spring-mvc"],"answers":[{"tags":[],"owner":{"account_id":10339493,"reputation":308,"user_id":7626384,"accept_rate":100,"display_name":"Supun Kavinda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681239266,"creation_date":1681239266,"answer_id":75989251,"question_id":75988652,"body_markdown":"Try to use `input` tag instead of `from`\r\n\r\n    &lt;div class=&quot;form-group&quot;&gt;\r\n      &lt;label for=&quot;isInfinite&quot;&gt;Неограниченное количество товара&lt;/label&gt;\r\n      &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n        &lt;input type=&quot;checkbox&quot; id=&quot;isInfinite&quot; name=&quot;isInfinite&quot; checked required&gt;\r\n      &lt;/div&gt;\r\n    &lt;/div&gt;\r\n\r\n","title":"Spring mvc data blinding while mapping checkbox","body":"<p>Try to use <code>input</code> tag instead of <code>from</code></p>\n<pre><code>&lt;div class=&quot;form-group&quot;&gt;\n  &lt;label for=&quot;isInfinite&quot;&gt;Неограниченное количество товара&lt;/label&gt;\n  &lt;div class=&quot;input-group mb-3&quot;&gt;\n    &lt;input type=&quot;checkbox&quot; id=&quot;isInfinite&quot; name=&quot;isInfinite&quot; checked required&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}],"owner":{"account_id":28277671,"reputation":1,"user_id":21619872,"display_name":"Рамазан Шаймуратов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681239266,"creation_date":1681234558,"question_id":75988652,"body_markdown":"Im trying to make an product object in a view. Everything is working except the isInfinite checkbox. it always false. \r\nIm new to mvc things i know that the names shuild be equal and i dont know whats wrong.\r\n\r\nI added my product class that im trying to map and form. In for everything is the same, even checkbox, but its doesnt work     \r\n\r\nIf enyone can help please\r\n\r\n\r\n\r\n\r\n```\r\npublic class Product {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name = &quot;id&quot;)\r\n    private Long id;\r\n    @Column(name = &quot;title&quot;)\r\n    private String title;\r\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\r\n    private String description;\r\n    @Column(name = &quot;price&quot;)\r\n    private int price;\r\n    @Column(name = &quot;productStatus&quot;)\r\n    private ProductStatus productStatus;\r\n    @Column(name = &quot;amount&quot;)\r\n    private int amount;\r\n    @Column(name = &quot;isInfinite&quot;)\r\n    private boolean isInfinite;\r\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY,\r\n            mappedBy = &quot;product&quot;)\r\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\r\n    private Long previewImageId;\r\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\r\n    @JoinColumn\r\n    private User user;\r\n    private LocalDateTime dateOfCreated;\r\n\r\n    @PrePersist\r\n    private void onCreate() { dateOfCreated = LocalDateTime.now(); }\r\n\r\n```\r\nmy ftlh file\r\n\r\n```\r\n&lt;form action=&quot;/product/create&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;label for=&quot;productName&quot;&gt;Название товара&lt;/label&gt;\r\n                &lt;input type=&quot;text&quot; required class=&quot;form-control&quot;\r\n                       id=&quot;productName&quot; name=&quot;title&quot;&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;label for=&quot;price&quot;&gt;Цена товара&lt;/label&gt;\r\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n                    &lt;input type=&quot;number&quot; required class=&quot;form-control&quot; id=&quot;price&quot; name=&quot;price&quot;&gt;\r\n                    &lt;div class=&quot;input-group-append&quot;&gt;\r\n                        &lt;span class=&quot;input-group-text&quot;&gt;₽&lt;/span&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;label for=&quot;amount&quot;&gt;Колличество товара&lt;/label&gt;\r\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n                    &lt;input type=&quot;number&quot; required class=&quot;form-control&quot; id=&quot;amount&quot; name=&quot;amount&quot;&gt;\r\n                    &lt;div class=&quot;input-group-append&quot;&gt;\r\n                        &lt;span class=&quot;input-group-text&quot;&gt;шт.&lt;/span&gt;\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;label for=&quot;isInfinite&quot;&gt;Неограниченное колличество товара&lt;/label&gt;\r\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\r\n                    &lt;form type=&quot;checkbox&quot; name=&quot;isInfinite&quot; required=&quot;required&quot;&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;label for=&quot;description&quot;&gt;Описание товара&lt;/label&gt;\r\n                &lt;textarea required class=&quot;form-control&quot; id=&quot;description&quot; name=&quot;description&quot;&gt;&lt;/textarea&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;div class=&quot;custom-file&quot;&gt;\r\n                    &lt;input required type=&quot;file&quot; name=&quot;file1&quot; id=&quot;file1&quot;&gt;\r\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file1&quot;&gt;Первая фотография к товару&lt;/label&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;div class=&quot;custom-file&quot;&gt;\r\n                    &lt;input type=&quot;file&quot; name=&quot;file2&quot; id=&quot;file2&quot;&gt;\r\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file2&quot;&gt;Вторая фотография к товару&lt;/label&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;div class=&quot;form-group&quot;&gt;\r\n                &lt;div class=&quot;custom-file&quot;&gt;\r\n                    &lt;input type=&quot;file&quot; name=&quot;file3&quot; id=&quot;file3&quot;&gt;\r\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file3&quot;&gt;Третья фотография к товару&lt;/label&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n            &lt;input type=&quot;hidden&quot; name=&quot;_csrf&quot; value=&quot;${_csrf.token}&quot;/&gt;\r\n\r\n            &lt;button type=&quot;submit&quot; style=&quot;width: 100%&quot; class=&quot;btn btn-dark&quot;&gt;Добавить&lt;/button&gt;\r\n        &lt;/form&gt;\r\n```\r\n\r\n","title":"Spring mvc data blinding while mapping checkbox","body":"<p>Im trying to make an product object in a view. Everything is working except the isInfinite checkbox. it always false.\nIm new to mvc things i know that the names shuild be equal and i dont know whats wrong.</p>\n<p>I added my product class that im trying to map and form. In for everything is the same, even checkbox, but its doesnt work</p>\n<p>If enyone can help please</p>\n<pre><code>public class Product {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n    @Column(name = &quot;title&quot;)\n    private String title;\n    @Column(name = &quot;description&quot;, columnDefinition = &quot;text&quot;)\n    private String description;\n    @Column(name = &quot;price&quot;)\n    private int price;\n    @Column(name = &quot;productStatus&quot;)\n    private ProductStatus productStatus;\n    @Column(name = &quot;amount&quot;)\n    private int amount;\n    @Column(name = &quot;isInfinite&quot;)\n    private boolean isInfinite;\n    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY,\n            mappedBy = &quot;product&quot;)\n    private List&lt;Image&gt; images = new ArrayList&lt;&gt;();\n    private Long previewImageId;\n    @ManyToOne(cascade = CascadeType.REFRESH, fetch = FetchType.EAGER)\n    @JoinColumn\n    private User user;\n    private LocalDateTime dateOfCreated;\n\n    @PrePersist\n    private void onCreate() { dateOfCreated = LocalDateTime.now(); }\n\n</code></pre>\n<p>my ftlh file</p>\n<pre><code>&lt;form action=&quot;/product/create&quot; method=&quot;post&quot; enctype=&quot;multipart/form-data&quot;&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label for=&quot;productName&quot;&gt;Название товара&lt;/label&gt;\n                &lt;input type=&quot;text&quot; required class=&quot;form-control&quot;\n                       id=&quot;productName&quot; name=&quot;title&quot;&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label for=&quot;price&quot;&gt;Цена товара&lt;/label&gt;\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\n                    &lt;input type=&quot;number&quot; required class=&quot;form-control&quot; id=&quot;price&quot; name=&quot;price&quot;&gt;\n                    &lt;div class=&quot;input-group-append&quot;&gt;\n                        &lt;span class=&quot;input-group-text&quot;&gt;₽&lt;/span&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label for=&quot;amount&quot;&gt;Колличество товара&lt;/label&gt;\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\n                    &lt;input type=&quot;number&quot; required class=&quot;form-control&quot; id=&quot;amount&quot; name=&quot;amount&quot;&gt;\n                    &lt;div class=&quot;input-group-append&quot;&gt;\n                        &lt;span class=&quot;input-group-text&quot;&gt;шт.&lt;/span&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label for=&quot;isInfinite&quot;&gt;Неограниченное колличество товара&lt;/label&gt;\n                &lt;div class=&quot;input-group mb-3&quot;&gt;\n                    &lt;form type=&quot;checkbox&quot; name=&quot;isInfinite&quot; required=&quot;required&quot;&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;label for=&quot;description&quot;&gt;Описание товара&lt;/label&gt;\n                &lt;textarea required class=&quot;form-control&quot; id=&quot;description&quot; name=&quot;description&quot;&gt;&lt;/textarea&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;div class=&quot;custom-file&quot;&gt;\n                    &lt;input required type=&quot;file&quot; name=&quot;file1&quot; id=&quot;file1&quot;&gt;\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file1&quot;&gt;Первая фотография к товару&lt;/label&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;div class=&quot;custom-file&quot;&gt;\n                    &lt;input type=&quot;file&quot; name=&quot;file2&quot; id=&quot;file2&quot;&gt;\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file2&quot;&gt;Вторая фотография к товару&lt;/label&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;div class=&quot;form-group&quot;&gt;\n                &lt;div class=&quot;custom-file&quot;&gt;\n                    &lt;input type=&quot;file&quot; name=&quot;file3&quot; id=&quot;file3&quot;&gt;\n                    &lt;label class=&quot;custom-file-label&quot; for=&quot;file3&quot;&gt;Третья фотография к товару&lt;/label&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n            &lt;input type=&quot;hidden&quot; name=&quot;_csrf&quot; value=&quot;${_csrf.token}&quot;/&gt;\n\n            &lt;button type=&quot;submit&quot; style=&quot;width: 100%&quot; class=&quot;btn btn-dark&quot;&gt;Добавить&lt;/button&gt;\n        &lt;/form&gt;\n</code></pre>\n"},{"tags":["java","android","java-http-client"],"comments":[{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1681228435,"post_id":75987742,"comment_id":134021188,"body_markdown":"Despite sharing a huge chunk of the APIs, Android *is not* Java. So while &quot;the basics&quot; are very similar, newer stuff usually takes a while to arrive at Android and/or won&#39;t be supported ever.","body":"Despite sharing a huge chunk of the APIs, Android <i>is not</i> Java. So while &quot;the basics&quot; are very similar, newer stuff usually takes a while to arrive at Android and/or won&#39;t be supported ever."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681238946,"creation_date":1681227668,"answer_id":75987763,"question_id":75987742,"body_markdown":"Android has a long history of not having traditional Java packages outside of the core collections and objects, let alone any Java features beyond Java 7 (java.time as one example). \r\n\r\nAndroid has its own HTTP client library, as documented in the [Connectivity guide](https://developer.android.com/guide/topics/connectivity), or you can opt for other libraries like Retrofit, for example. ","title":"Can&#39;t use the java.net.http module/package in an android studio project","body":"<p>Android has a long history of not having traditional Java packages outside of the core collections and objects, let alone any Java features beyond Java 7 (java.time as one example).</p>\n<p>Android has its own HTTP client library, as documented in the <a href=\"https://developer.android.com/guide/topics/connectivity\" rel=\"nofollow noreferrer\">Connectivity guide</a>, or you can opt for other libraries like Retrofit, for example.</p>\n"}],"owner":{"account_id":25547110,"reputation":13,"user_id":19332247,"display_name":"eladGN"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75987763,"answer_count":1,"score":0,"last_activity_date":1681238946,"creation_date":1681227537,"question_id":75987742,"body_markdown":"I&#39;m using Android Studio Electric Eel | 2022.1.1 for a school project and I need to use an API.\r\nIn order to use the API I need to send an HTTP request to a certain URL.\r\nI read about java 11&#39;s `HttpClient` and `HttpRequest` from the package `java.net.http` and tried to use it but the android studio can&#39;t seem to find this package and puts the error:\r\n\r\n`error: package java.net.http does not exist  import java.net.http.HttpClient;`\r\n\r\nI tried checking why it may show this error and I checked the gradle jdk version but it shows that it is version 11.\r\n\r\n[![android studio gradle version](https://i.stack.imgur.com/zcTLo.png)](https://i.stack.imgur.com/zcTLo.png)\r\n","title":"Can&#39;t use the java.net.http module/package in an android studio project","body":"<p>I'm using Android Studio Electric Eel | 2022.1.1 for a school project and I need to use an API.\nIn order to use the API I need to send an HTTP request to a certain URL.\nI read about java 11's <code>HttpClient</code> and <code>HttpRequest</code> from the package <code>java.net.http</code> and tried to use it but the android studio can't seem to find this package and puts the error:</p>\n<p><code>error: package java.net.http does not exist  import java.net.http.HttpClient;</code></p>\n<p>I tried checking why it may show this error and I checked the gradle jdk version but it shows that it is version 11.</p>\n<p><a href=\"https://i.stack.imgur.com/zcTLo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zcTLo.png\" alt=\"android studio gradle version\" /></a></p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10308728,"reputation":26,"user_id":7605209,"display_name":"jenda0"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681069956,"creation_date":1681069956,"answer_id":75972567,"question_id":75972444,"body_markdown":"You should remove the `.formLogin()` configuration in your `SecurityConfiguration` class","title":"How to disable Spring Security login page?","body":"<p>You should remove the <code>.formLogin()</code> configuration in your <code>SecurityConfiguration</code> class</p>\n"},{"tags":[],"owner":{"account_id":20672923,"reputation":9,"user_id":15178253,"display_name":"staticmethod"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681238911,"creation_date":1681073464,"answer_id":75972812,"question_id":75972444,"body_markdown":"As you are using springboot 3.0.0 you can use this code to disable the default login page\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class WebSecurity extends WebSecurityConfigurerAdapter {\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable()\r\n                .authorizeRequests().antMatchers(HttpMethod.OPTIONS,&quot;*/&quot;).permitAll()\r\n                .antMatchers(HttpMethod.GET,&quot;/login&quot;).permitAll();\r\n    }\r\n    }","title":"How to disable Spring Security login page?","body":"<p>As you are using springboot 3.0.0 you can use this code to disable the default login page</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurity extends WebSecurityConfigurerAdapter {\n\n@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http.csrf().disable()\n            .authorizeRequests().antMatchers(HttpMethod.OPTIONS,&quot;*/&quot;).permitAll()\n            .antMatchers(HttpMethod.GET,&quot;/login&quot;).permitAll();\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28219875,"reputation":101,"user_id":21570778,"display_name":"Mayuri"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681103112,"creation_date":1681103112,"answer_id":75974393,"question_id":75972444,"body_markdown":"Here you have not made /login url as public. You have to make /login url as public same like /registration.\r\n\r\nAlso /login url is used to display your login form then you have to create one more url which is used to process your login form. No need to mention that url in controller. You just have to mention that url in your form action.\r\n\r\nMention below code in security configuration\r\n\r\n                    .formLogin()\r\n                    .loginPage(&quot;/login&quot;)\r\n                    .usernameParameter(&quot;email&quot;)\r\n                    .loginProcessingUrl(&quot;/performlogin&quot;)\r\n\r\nHere, email is name of form field from where you are giving login access and /performlogin url is form action.\r\n\r\nIf you are using thymeleaf your form looks like this\r\n\r\n     &lt;form th:action=&quot;@{/performlogin}&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\r\n                &lt;label&gt;Username:&lt;/label&gt;\r\n                &lt;input type=&quot;email&quot; th:field=&quot;*{email}&quot;&gt;\r\n\r\n                &lt;label &gt;Password:&lt;/label&gt;\r\n                &lt;input type=&quot;password&quot; th:field=&quot;*{password}&quot;&gt;\r\n\r\n                &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;\r\n          \r\n    &lt;/form&gt;\r\n\r\nAnd mention user object in login controller to bind the data of form \r\n\r\n    @PostMapping(&quot;/login&quot;)\r\n        public String login(@ModelAttribute User user) {\r\n            return &quot;login&quot;;\r\n        }\r\n\r\nDo changes in form according to your User class.","title":"How to disable Spring Security login page?","body":"<p>Here you have not made /login url as public. You have to make /login url as public same like /registration.</p>\n<p>Also /login url is used to display your login form then you have to create one more url which is used to process your login form. No need to mention that url in controller. You just have to mention that url in your form action.</p>\n<p>Mention below code in security configuration</p>\n<pre><code>                .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .usernameParameter(&quot;email&quot;)\n                .loginProcessingUrl(&quot;/performlogin&quot;)\n</code></pre>\n<p>Here, email is name of form field from where you are giving login access and /performlogin url is form action.</p>\n<p>If you are using thymeleaf your form looks like this</p>\n<pre><code> &lt;form th:action=&quot;@{/performlogin}&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\n            &lt;label&gt;Username:&lt;/label&gt;\n            &lt;input type=&quot;email&quot; th:field=&quot;*{email}&quot;&gt;\n\n            &lt;label &gt;Password:&lt;/label&gt;\n            &lt;input type=&quot;password&quot; th:field=&quot;*{password}&quot;&gt;\n\n            &lt;input type=&quot;submit&quot; value=&quot;Login&quot;&gt;\n      \n&lt;/form&gt;\n</code></pre>\n<p>And mention user object in login controller to bind the data of form</p>\n<pre><code>@PostMapping(&quot;/login&quot;)\n    public String login(@ModelAttribute User user) {\n        return &quot;login&quot;;\n    }\n</code></pre>\n<p>Do changes in form according to your User class.</p>\n"}],"owner":{"account_id":24811373,"reputation":3,"user_id":18692776,"display_name":"CrisV2"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1573,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1681238911,"creation_date":1681068335,"question_id":75972444,"body_markdown":"I created an application in Spring Boot similar with pastebin.com. It was working good and I added the Spring Security to register and login the users. When I start the project, a login screen is shown when I access http://localhost:8080/ but it&#39;s not my login page who supposed to be and I don&#39;t know why it appears. Do you know what I should do to fix this issue?\r\n\r\nThis is the pom.xml\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; \r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.springboot.tutorial&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;springboot-helloworld-tutorial&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;PastebinClone&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;!--\r\n     \t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t--&gt;\r\n\t\t&lt;!--\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t--&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t\t&lt;exclusions&gt;\r\n\t\t\t\t&lt;exclusion&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n\t\t\t\t&lt;/exclusion&gt;\r\n\t\t\t&lt;/exclusions&gt;\r\n\t\t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nThis is the SecurityConfiguration.java class\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic abstract class SecurityConfiguration implements SpringSecurityConfig {\r\n\r\n    private final UserService userService;\r\n\r\n    @Autowired\r\n    public SecurityConfiguration(UserService userService) {\r\n        this.userService = userService;\r\n    }\r\n\r\n   @Bean\r\n   public PasswordEncoder passwordEncoder() {\r\n       return new BCryptPasswordEncoder();\r\n   }\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider auth = new DaoAuthenticationProvider();\r\n        auth.setPasswordEncoder(passwordEncoder());\r\n        return auth;\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder auth) {\r\n        auth.authenticationProvider(authenticationProvider());\r\n    }\r\n\r\n    @Override\r\n    public void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .dispatcherTypeMatchers(HttpMethod.valueOf(&quot;/registration&quot;))\r\n                .permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .formLogin()\r\n                .loginPage(&quot;/login&quot;)\r\n                .permitAll()\r\n                .and()\r\n                .logout()\r\n                .invalidateHttpSession(true)\r\n                .clearAuthentication(true)\r\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\r\n                .logoutSuccessUrl(&quot;/login?logout&quot;)\r\n                .permitAll();\r\n    }\r\n}\r\n```\r\n\r\nThis is RegistrationController.class\r\n```\r\n\r\n@Controller\r\nclass RegistrationController {\r\n\r\n    private final UserRepository userRepo;\r\n\r\n    @Autowired\r\n    private PasswordEncoder passwordEncoder;\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    public RegistrationController(UserRepository userRepo) {\r\n        this.userRepo = userRepo;\r\n    }\r\n\r\n    @GetMapping(&quot;/index&quot;)\r\n    public String home() {\r\n        return &quot;index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/login&quot;)\r\n    public String login() {\r\n        return &quot;login&quot;;\r\n    }\r\n\r\n    @ModelAttribute(&quot;user&quot;)\r\n    public UserRegistrationDTO userRegistrationDTO() {\r\n        return new UserRegistrationDTO();\r\n    }\r\n\r\n    @GetMapping\r\n    public String showRegistrationForm() {\r\n        return &quot;registration&quot;;\r\n    }\r\n\r\n    @PostMapping\r\n    public String registerUserAccount(@ModelAttribute(&quot;user&quot;)\r\n                                          User registrationDTO) {\r\n\r\n        userRepo.save(registrationDTO);\r\n        return &quot;redirect:/registration?success&quot;;\r\n    }\r\n}\r\n```\r\n\r\nHere is the image who appears every time I&#39;m running the code\r\n[login page][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vry3M.png","title":"How to disable Spring Security login page?","body":"<p>I created an application in Spring Boot similar with pastebin.com. It was working good and I added the Spring Security to register and login the users. When I start the project, a login screen is shown when I access http://localhost:8080/ but it's not my login page who supposed to be and I don't know why it appears. Do you know what I should do to fix this issue?</p>\n<p>This is the pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;relativePath/&gt; \n    &lt;/parent&gt;\n    &lt;groupId&gt;com.springboot.tutorial&lt;/groupId&gt;\n    &lt;artifactId&gt;springboot-helloworld-tutorial&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;PastebinClone&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!--\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.thymeleaf.extras&lt;/groupId&gt;\n            &lt;artifactId&gt;thymeleaf-extras-springsecurity5&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        --&gt;\n        &lt;!--\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n                    &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is the SecurityConfiguration.java class</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic abstract class SecurityConfiguration implements SpringSecurityConfig {\n\n    private final UserService userService;\n\n    @Autowired\n    public SecurityConfiguration(UserService userService) {\n        this.userService = userService;\n    }\n\n   @Bean\n   public PasswordEncoder passwordEncoder() {\n       return new BCryptPasswordEncoder();\n   }\n\n    @Bean\n    public DaoAuthenticationProvider authenticationProvider() {\n        DaoAuthenticationProvider auth = new DaoAuthenticationProvider();\n        auth.setPasswordEncoder(passwordEncoder());\n        return auth;\n    }\n\n    @Override\n    public void configure(AuthenticationManagerBuilder auth) {\n        auth.authenticationProvider(authenticationProvider());\n    }\n\n    @Override\n    public void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests()\n                .dispatcherTypeMatchers(HttpMethod.valueOf(&quot;/registration&quot;))\n                .permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .formLogin()\n                .loginPage(&quot;/login&quot;)\n                .permitAll()\n                .and()\n                .logout()\n                .invalidateHttpSession(true)\n                .clearAuthentication(true)\n                .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;))\n                .logoutSuccessUrl(&quot;/login?logout&quot;)\n                .permitAll();\n    }\n}\n</code></pre>\n<p>This is RegistrationController.class</p>\n<pre><code>\n@Controller\nclass RegistrationController {\n\n    private final UserRepository userRepo;\n\n    @Autowired\n    private PasswordEncoder passwordEncoder;\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    public RegistrationController(UserRepository userRepo) {\n        this.userRepo = userRepo;\n    }\n\n    @GetMapping(&quot;/index&quot;)\n    public String home() {\n        return &quot;index&quot;;\n    }\n\n    @GetMapping(&quot;/login&quot;)\n    public String login() {\n        return &quot;login&quot;;\n    }\n\n    @ModelAttribute(&quot;user&quot;)\n    public UserRegistrationDTO userRegistrationDTO() {\n        return new UserRegistrationDTO();\n    }\n\n    @GetMapping\n    public String showRegistrationForm() {\n        return &quot;registration&quot;;\n    }\n\n    @PostMapping\n    public String registerUserAccount(@ModelAttribute(&quot;user&quot;)\n                                          User registrationDTO) {\n\n        userRepo.save(registrationDTO);\n        return &quot;redirect:/registration?success&quot;;\n    }\n}\n</code></pre>\n<p>Here is the image who appears every time I'm running the code\n<a href=\"https://i.stack.imgur.com/vry3M.png\" rel=\"nofollow noreferrer\">login page</a></p>\n"},{"tags":["java","jenkins","access-violation","oserror"],"owner":{"account_id":28278099,"reputation":1,"user_id":21620233,"display_name":"Archana Srinivasan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681238737,"creation_date":1681238737,"question_id":75989180,"body_markdown":"14:27:52 [ ERROR ] Error in file &#39;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\Public_Resource.robot&#39; on line 2: Importing library &#39;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\PLCSimRBT_lib.py&#39; failed: OSError: exception: access violation reading 0x0000000000000000\r\n14:27:52 Traceback (most recent call last):\r\n14:27:52   File &quot;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\PLCSimRBT_lib.py&quot;, line 12, in &lt;module&gt;\r\n14:27:52     PlcManager = PlcSimManager()\r\n14:27:52   File &quot;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\plcsim\\api\\manager.py&quot;, line 46, in __init__\r\n14:27:52     ret = self.cdll.CInitializeApi(byref(self.mgr_c_p))\r\n14:27:52 [ ERROR ] [PLCSIM] Error initialising library: ErrorLoadingDll\r\n\r\nWorks fine in command prompt,but when triggered from jenkins says access violation reading error","title":"jenkins question - Importing library failed: OSError: exception: access violation reading 0x0000000000000000 - execution runs perfectly in cmd line","body":"<p>14:27:52 [ ERROR ] Error in file 'C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\Public_Resource.robot' on line 2: Importing library 'C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\PLCSimRBT_lib.py' failed: OSError: exception: access violation reading 0x0000000000000000\n14:27:52 Traceback (most recent call last):\n14:27:52   File &quot;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\PLCSimRBT_lib.py&quot;, line 12, in \n14:27:52     PlcManager = PlcSimManager()\n14:27:52   File &quot;C:\\jenkins\\workspace\\1_UnitRegressionTestSuites\\libraries\\plcsim\\api\\manager.py&quot;, line 46, in <strong>init</strong>\n14:27:52     ret = self.cdll.CInitializeApi(byref(self.mgr_c_p))\n14:27:52 [ ERROR ] [PLCSIM] Error initialising library: ErrorLoadingDll</p>\n<p>Works fine in command prompt,but when triggered from jenkins says access violation reading error</p>\n"},{"tags":["java","android","database","sqlite","android-ndk"],"owner":{"account_id":28111620,"reputation":1,"user_id":21494809,"display_name":"Даниил Белковский"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681238734,"creation_date":1681238172,"question_id":75989100,"body_markdown":"I&#39;m trying to work with the database through Android studio in C ++, it seems to me that the code works, but the database is not created in the files and I can&#39;t figure out if everything works or not...\r\n\r\nc++ file\r\n\r\n```\r\n#include &lt;jni.h&gt;\r\n#include &lt;string&gt;\r\n#include &lt;iostream&gt;\r\n#include &quot;sqlite-amalgamation-3410200/sqlite3.h&quot;\r\n\r\nextern &quot;C&quot; JNIEXPORT jchar JNICALL\r\nJava_com_example_smthing_MainActivity_getInt(JNIEnv *env, jobject thiz) {\r\n    char * err;\r\n    sqlite3* db;\r\n    sqlite3_stmt* stmt;\r\n    sqlite3_open(&quot;myDb.db&quot;, &amp;db);\r\n\r\n    int rc = sqlite3_exec(db, &quot;CREATE TABLE IF NOT EXISTS algolancer(x1 INT, x2 INT, name varchar(100));&quot;, NULL, NULL, &amp;err);\r\n\r\n    if (rc != SQLITE_OK) {\r\n        std::cout &lt;&lt; &quot;error&quot; &lt;&lt; err;\r\n    }\r\n\r\n    std::string query;\r\n\r\n    for (int i = 0; i &lt; 10; i++) {\r\n        query = &quot;insert into algolancer VALUES (&quot;+std::to_string(i)+&quot;, &quot;+std::to_string(i + 5)+&quot;, &#39;Arsenyi have sex with Polymetal&#39;);&quot;;\r\n        /*std::string query = &quot;insert into algolancer VALUES (12, 13, &#39;nadjib&#39;);&quot;;*/\r\n        std::cout &lt;&lt; query &lt;&lt; &quot;\\n&quot;;\r\n        rc = sqlite3_exec(db, query.c_str(), NULL, NULL, &amp;err);\r\n\r\n        if (rc != SQLITE_OK) {\r\n            std::cout &lt;&lt; &quot;error&quot; &lt;&lt; err;\r\n        }\r\n\r\n    }\r\n\r\n    /*std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;*/\r\n    return query[0];\r\n}\r\n\r\n\r\nextern &quot;C&quot; JNIEXPORT jboolean JNICALL\r\nJava_com_example_smthing_MainActivity_getBool(JNIEnv *env, jobject thiz) {\r\n\r\n    /* Open database */\r\n    sqlite3 *db;\r\n    char *zErrMsg = 0;\r\n    int rc;\r\n    rc = sqlite3_open(&quot;BASE&quot;, &amp;db);\r\n    /*if (rc != SQLITE_OK) {\r\n        //Can&#39;t open database/\r\n        sqlite3_open_v2(DB_FILE, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL);\r\n    }*/\r\n\r\n    /* Create SQL statement */\r\n    const char *createQuery =\r\n            &quot;CREATE TABLE IF NOT EXISTS cities (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT);&quot;;\r\n\r\n    /* Execute SQL statement */\r\n    rc = sqlite3_exec(db, createQuery, NULL, 0, &amp;zErrMsg);\r\n\r\n    if (rc != SQLITE_OK) {\r\n        sqlite3_free(zErrMsg);\r\n        return false;\r\n    }\r\n    sqlite3_close(db);\r\n    return true;\r\n}\r\n\r\nextern &quot;C&quot; JNIEXPORT jboolean JNICALL\r\nJava_com_example_smthing_MainActivity_insertBool(JNIEnv *env, jobject thiz) {\r\n    sqlite3 *db;\r\n    char *zErrMsg = 0;\r\n    int rc;\r\n\r\n    /* Open database */\r\n    rc = sqlite3_open(&quot;BASE&quot;, &amp;db);\r\n    /*if (rc) {\r\n        sqlite3_open_v2(DB_FILE, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL);\r\n    }*/\r\n\r\n    /*const char *pCityName = pCityWeather-&gt;getName().c_str();*/\r\n    char insertQuery[50];\r\n    strcpy (insertQuery,&quot;INSERT INTO cities (name) VALUES (&#39;&quot;);\r\n    strcat (insertQuery, &quot;HUI&quot;);\r\n    strcat (insertQuery, &quot;&#39;);&quot;);\r\n    puts (insertQuery);\r\n\r\n    /*delete pCityWeather;*/\r\n\r\n    /* Execute SQL statement */\r\n    rc = sqlite3_exec(db, insertQuery, NULL, 0, &amp;zErrMsg);\r\n    if (rc != SQLITE_OK) {\r\n        sqlite3_free(zErrMsg);\r\n    }\r\n    sqlite3_close(db);\r\n    return true;\r\n}\r\n```\r\n\r\nActivityMain.java\r\n\r\n```\r\npackage com.example.smthing;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.os.Bundle;\r\nimport android.widget.TextView;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        System.loadLibrary(&quot;native-lib&quot;);\r\n\r\n        TextView txt = findViewById(R.id.txt);\r\n        boolean a = getBool();\r\n        boolean b = insertBool();\r\n        char c = getinfo();\r\n        txt.setText(&quot;POLYMETAL &quot; + c);\r\n    }\r\n\r\n    private native char getInt();\r\n    private native boolean getBool();\r\n    private native boolean insertBool();\r\n}\r\n```\r\n\r\nCMake\r\n\r\n```\r\ncmake_minimum_required(VERSION 3.22.1)\r\n\r\nadd_library(\r\n        native-lib\r\n        SHARED\r\n        main.cpp\r\n        sqlite-amalgamation-3410200/sqlite3.c\r\n        sqlite-amalgamation-3410200/sqlite3.h\r\n        sqlite-amalgamation-3410200/sqlite3ext.h\r\n)\r\n\r\nfind_library(\r\n        native-lib\r\n        log\r\n)\r\n\r\ntarget_link_libraries(\r\n        native-lib\r\n        ${log_lib}\r\n)\r\n```\r\n\r\n\r\n\r\nI run the program, no error is thrown, but the database is not created either","title":"How database works in NDK android studio in C++","body":"<p>I'm trying to work with the database through Android studio in C ++, it seems to me that the code works, but the database is not created in the files and I can't figure out if everything works or not...</p>\n<p>c++ file</p>\n<pre><code>#include &lt;jni.h&gt;\n#include &lt;string&gt;\n#include &lt;iostream&gt;\n#include &quot;sqlite-amalgamation-3410200/sqlite3.h&quot;\n\nextern &quot;C&quot; JNIEXPORT jchar JNICALL\nJava_com_example_smthing_MainActivity_getInt(JNIEnv *env, jobject thiz) {\n    char * err;\n    sqlite3* db;\n    sqlite3_stmt* stmt;\n    sqlite3_open(&quot;myDb.db&quot;, &amp;db);\n\n    int rc = sqlite3_exec(db, &quot;CREATE TABLE IF NOT EXISTS algolancer(x1 INT, x2 INT, name varchar(100));&quot;, NULL, NULL, &amp;err);\n\n    if (rc != SQLITE_OK) {\n        std::cout &lt;&lt; &quot;error&quot; &lt;&lt; err;\n    }\n\n    std::string query;\n\n    for (int i = 0; i &lt; 10; i++) {\n        query = &quot;insert into algolancer VALUES (&quot;+std::to_string(i)+&quot;, &quot;+std::to_string(i + 5)+&quot;, 'Arsenyi have sex with Polymetal');&quot;;\n        /*std::string query = &quot;insert into algolancer VALUES (12, 13, 'nadjib');&quot;;*/\n        std::cout &lt;&lt; query &lt;&lt; &quot;\\n&quot;;\n        rc = sqlite3_exec(db, query.c_str(), NULL, NULL, &amp;err);\n\n        if (rc != SQLITE_OK) {\n            std::cout &lt;&lt; &quot;error&quot; &lt;&lt; err;\n        }\n\n    }\n\n    /*std::cout &lt;&lt; &quot;Hello, World!&quot; &lt;&lt; std::endl;*/\n    return query[0];\n}\n\n\nextern &quot;C&quot; JNIEXPORT jboolean JNICALL\nJava_com_example_smthing_MainActivity_getBool(JNIEnv *env, jobject thiz) {\n\n    /* Open database */\n    sqlite3 *db;\n    char *zErrMsg = 0;\n    int rc;\n    rc = sqlite3_open(&quot;BASE&quot;, &amp;db);\n    /*if (rc != SQLITE_OK) {\n        //Can't open database/\n        sqlite3_open_v2(DB_FILE, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL);\n    }*/\n\n    /* Create SQL statement */\n    const char *createQuery =\n            &quot;CREATE TABLE IF NOT EXISTS cities (id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT);&quot;;\n\n    /* Execute SQL statement */\n    rc = sqlite3_exec(db, createQuery, NULL, 0, &amp;zErrMsg);\n\n    if (rc != SQLITE_OK) {\n        sqlite3_free(zErrMsg);\n        return false;\n    }\n    sqlite3_close(db);\n    return true;\n}\n\nextern &quot;C&quot; JNIEXPORT jboolean JNICALL\nJava_com_example_smthing_MainActivity_insertBool(JNIEnv *env, jobject thiz) {\n    sqlite3 *db;\n    char *zErrMsg = 0;\n    int rc;\n\n    /* Open database */\n    rc = sqlite3_open(&quot;BASE&quot;, &amp;db);\n    /*if (rc) {\n        sqlite3_open_v2(DB_FILE, &amp;db, SQLITE_OPEN_CREATE | SQLITE_OPEN_READWRITE, NULL);\n    }*/\n\n    /*const char *pCityName = pCityWeather-&gt;getName().c_str();*/\n    char insertQuery[50];\n    strcpy (insertQuery,&quot;INSERT INTO cities (name) VALUES ('&quot;);\n    strcat (insertQuery, &quot;HUI&quot;);\n    strcat (insertQuery, &quot;');&quot;);\n    puts (insertQuery);\n\n    /*delete pCityWeather;*/\n\n    /* Execute SQL statement */\n    rc = sqlite3_exec(db, insertQuery, NULL, 0, &amp;zErrMsg);\n    if (rc != SQLITE_OK) {\n        sqlite3_free(zErrMsg);\n    }\n    sqlite3_close(db);\n    return true;\n}\n</code></pre>\n<p>ActivityMain.java</p>\n<pre><code>package com.example.smthing;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.widget.TextView;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        System.loadLibrary(&quot;native-lib&quot;);\n\n        TextView txt = findViewById(R.id.txt);\n        boolean a = getBool();\n        boolean b = insertBool();\n        char c = getinfo();\n        txt.setText(&quot;POLYMETAL &quot; + c);\n    }\n\n    private native char getInt();\n    private native boolean getBool();\n    private native boolean insertBool();\n}\n</code></pre>\n<p>CMake</p>\n<pre><code>cmake_minimum_required(VERSION 3.22.1)\n\nadd_library(\n        native-lib\n        SHARED\n        main.cpp\n        sqlite-amalgamation-3410200/sqlite3.c\n        sqlite-amalgamation-3410200/sqlite3.h\n        sqlite-amalgamation-3410200/sqlite3ext.h\n)\n\nfind_library(\n        native-lib\n        log\n)\n\ntarget_link_libraries(\n        native-lib\n        ${log_lib}\n)\n</code></pre>\n<p>I run the program, no error is thrown, but the database is not created either</p>\n"},{"tags":["java","postgresql","liquibase"],"answers":[{"tags":[],"owner":{"account_id":27960048,"reputation":151,"user_id":21352044,"display_name":"PJatLiquibase"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681238683,"creation_date":1681238683,"answer_id":75989171,"question_id":75986248,"body_markdown":"You could add an update statement to the the changeset after the loadData to convert &#39;\\n&#39; into newlines. ","title":"How can I insert String into PostgreSQL table with linebreaks, using liquibase?","body":"<p>You could add an update statement to the the changeset after the loadData to convert '\\n' into newlines.</p>\n"}],"owner":{"account_id":16194217,"reputation":622,"user_id":11692264,"display_name":"petrov.aleksandr"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1681238683,"creation_date":1681218308,"question_id":75986248,"body_markdown":"I have csv file\r\n\r\n\r\n| scenario_id | text |\r\n|:-------- |:-------------------------------------------|\r\n| 123      | &#39;\\nStarts 25.01.2021   \\n\\nin&#39;             |\r\n| 456      |&#39;\\\\\\nStarts 25.01.2021   \\\\\\n\\\\\\nin&#39;        |\r\n\r\n\r\nAnd liquibase changeset:\r\n\r\n    &lt;changeSet id=&quot;insert_consents&quot; author=&quot;Alex&quot; &gt;\r\n        &lt;loadData tableName=&quot;consents&quot;\r\n                  relativeToChangelogFile=&quot;false&quot;\r\n                  separator=&quot;;&quot;\r\n                  file=&quot;db/changelog/dictionaries/consents.csv&quot;\r\n                  quotchar=&quot;&#39;&quot;&gt;\r\n        &lt;/loadData&gt;\r\n    &lt;/changeSet&gt;\r\n\r\nFirst line inserts in PostgreSQL without \\ : &#39;nStarts 25.01.2021   n nin&#39;. And it is same in java String.\r\n\r\nSecond line inserts in PostgreSQL properly: &#39;\\nStarts 25.01.2021   \\n\\nin&#39;, but in java String it is: &#39;\\\\\\nStarts 25.01.2021   \\\\\\n\\\\\\nin&#39;.\r\n\r\nHow can I insert String into PostgreSQL table &#39;\\nStarts 25.01.2021   \\n\\nin&#39;, using liquibase?","title":"How can I insert String into PostgreSQL table with linebreaks, using liquibase?","body":"<p>I have csv file</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">scenario_id</th>\n<th style=\"text-align: left;\">text</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">123</td>\n<td style=\"text-align: left;\">'\\nStarts 25.01.2021   \\n\\nin'</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">456</td>\n<td style=\"text-align: left;\">'\\\\nStarts 25.01.2021   \\\\n\\\\nin'</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>And liquibase changeset:</p>\n<pre><code>&lt;changeSet id=&quot;insert_consents&quot; author=&quot;Alex&quot; &gt;\n    &lt;loadData tableName=&quot;consents&quot;\n              relativeToChangelogFile=&quot;false&quot;\n              separator=&quot;;&quot;\n              file=&quot;db/changelog/dictionaries/consents.csv&quot;\n              quotchar=&quot;'&quot;&gt;\n    &lt;/loadData&gt;\n&lt;/changeSet&gt;\n</code></pre>\n<p>First line inserts in PostgreSQL without \\ : 'nStarts 25.01.2021   n nin'. And it is same in java String.</p>\n<p>Second line inserts in PostgreSQL properly: '\\nStarts 25.01.2021   \\n\\nin', but in java String it is: '\\\\nStarts 25.01.2021   \\\\n\\\\nin'.</p>\n<p>How can I insert String into PostgreSQL table '\\nStarts 25.01.2021   \\n\\nin', using liquibase?</p>\n"},{"tags":["java","web-services","soap","jax-ws","java-metro-framework"],"owner":{"account_id":16506411,"reputation":1143,"user_id":11926338,"display_name":"Pavel Petrashov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681238555,"creation_date":1681238555,"question_id":75989146,"body_markdown":"I have this SOAP web service\r\n\r\nrequest/response\r\n\r\n        import javax.xml.bind.annotation.XmlElement;\r\n        public class EmployeeRequest {\r\n            private String firstName;\r\n            //getters and setters with annotation @XmlElement on getters\r\n        }\r\n    \r\n        import javax.xml.bind.annotation.XmlElement;\r\n        public class Employee {\r\n            private int id;\r\n            private String firstName;\r\n       //getters and setters with annotation @XmlElement on getters\r\n        }\r\n\r\nInterface/Implementation\r\n\r\n    import javax.jws.WebMethod;\r\n    import javax.jws.WebService;\r\n    \r\n    @WebService\r\n    public interface EmployeeService {\r\n    \r\n        @WebMethod\r\n        Employee getEmployee(EmployeeRequest request);\r\n    }\r\n    \r\n    import javax.jws.WebMethod;\r\n    import javax.jws.WebService;\r\n    \r\n    @WebService(endpointInterface = &quot;org.example.EmployeeService&quot;)\r\n    public class EmployeeServiceImpl implements EmployeeService {\r\n    \r\n        @WebMethod\r\n        public Employee getEmployee(EmployeeRequest request) {\r\n            Employee employee = new Employee();\r\n            employee.setId(1);\r\n            employee.setFirstName(request.getFirstName() + &quot;, hello&quot;);\r\n            return employee;\r\n        }\r\n    }\r\n\r\nand main class\r\n\r\n    import javax.xml.ws.Endpoint;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            Endpoint.publish(&quot;http://localhost:8080/employeeservice&quot;, new EmployeeServiceImpl());\r\n        }\r\n    }\r\n\r\nIt works fine and uses standard JDK-based jax-ws implementation (JAX-WS RI Runtime Bundle) because I don&#39;t have any dependencies in my pom.xml. Correct me if I am wrong.\r\n\r\nNow I want to try the Glassfish Metro implementation (https://stackoverflow.com/a/12670288/11926338):\r\n\r\n&gt; JAX-WS is an API while Metro is the reference implementation for the\r\n&gt; JAX-WS API; both are from Sun/Oracle, thus are standard. You can see\r\n&gt; them as an interface (JAX-WS) and a class implementing the interface\r\n&gt; (Metro), only at a higher level. Glassfish also uses Metro as\r\n&gt; implementation for JAX-WS.\r\n\r\nHow can I switch my project to the Metro? I tried to add a couple of dependencies:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.metro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webservices-rt&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.glassfish.metro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webservices-api&lt;/artifactId&gt;\r\n            &lt;version&gt;4.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\nand it continues to work but I don&#39;t understand what implementation is using. ","title":"How to swith a SOAP web service from JDK-based jax-ws implementation to the Metro?","body":"<p>I have this SOAP web service</p>\n<p>request/response</p>\n<pre><code>    import javax.xml.bind.annotation.XmlElement;\n    public class EmployeeRequest {\n        private String firstName;\n        //getters and setters with annotation @XmlElement on getters\n    }\n\n    import javax.xml.bind.annotation.XmlElement;\n    public class Employee {\n        private int id;\n        private String firstName;\n   //getters and setters with annotation @XmlElement on getters\n    }\n</code></pre>\n<p>Interface/Implementation</p>\n<pre><code>import javax.jws.WebMethod;\nimport javax.jws.WebService;\n\n@WebService\npublic interface EmployeeService {\n\n    @WebMethod\n    Employee getEmployee(EmployeeRequest request);\n}\n\nimport javax.jws.WebMethod;\nimport javax.jws.WebService;\n\n@WebService(endpointInterface = &quot;org.example.EmployeeService&quot;)\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @WebMethod\n    public Employee getEmployee(EmployeeRequest request) {\n        Employee employee = new Employee();\n        employee.setId(1);\n        employee.setFirstName(request.getFirstName() + &quot;, hello&quot;);\n        return employee;\n    }\n}\n</code></pre>\n<p>and main class</p>\n<pre><code>import javax.xml.ws.Endpoint;\n\npublic class Main {\n    public static void main(String[] args) {\n        Endpoint.publish(&quot;http://localhost:8080/employeeservice&quot;, new EmployeeServiceImpl());\n    }\n}\n</code></pre>\n<p>It works fine and uses standard JDK-based jax-ws implementation (JAX-WS RI Runtime Bundle) because I don't have any dependencies in my pom.xml. Correct me if I am wrong.</p>\n<p>Now I want to try the Glassfish Metro implementation (<a href=\"https://stackoverflow.com/a/12670288/11926338\">https://stackoverflow.com/a/12670288/11926338</a>):</p>\n<blockquote>\n<p>JAX-WS is an API while Metro is the reference implementation for the\nJAX-WS API; both are from Sun/Oracle, thus are standard. You can see\nthem as an interface (JAX-WS) and a class implementing the interface\n(Metro), only at a higher level. Glassfish also uses Metro as\nimplementation for JAX-WS.</p>\n</blockquote>\n<p>How can I switch my project to the Metro? I tried to add a couple of dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.metro&lt;/groupId&gt;\n        &lt;artifactId&gt;webservices-rt&lt;/artifactId&gt;\n        &lt;version&gt;4.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.metro&lt;/groupId&gt;\n        &lt;artifactId&gt;webservices-api&lt;/artifactId&gt;\n        &lt;version&gt;4.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>and it continues to work but I don't understand what implementation is using.</p>\n"},{"tags":["java","android","multiautocompletetextview"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681226688,"post_id":75985303,"comment_id":134020745,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":25287899,"reputation":1,"user_id":19114505,"display_name":"SHAKTISINH VAGHELA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681238554,"creation_date":1681212205,"question_id":75985303,"body_markdown":"Frist In AutoComplete ArrayAdapter Show item like `Action , Car, Bike, Ships, helicopter etc`\r\n\r\nWhen user Write `Action.` then show Action[] Array in AutoComplte in ArrayAdapter like `Start, terminate,etc`\r\n\r\nWhen user write `Car.` then show Car[] String Array in AutoComplete ArrayAdapter Like `Modified, import , etc`\r\n\r\nMore like this In **MultiAutoCompleteTextView Android Java**\r\n\r\n\r\n\r\n**I write Code For More detail**\r\n`\r\n\t\r\n\tpublic SmEditor editor;\r\n\tString[] Class = new String[] { &quot;Action&quot;, &quot;Car&quot;, &quot;Bike&quot;, &quot;Helicopter&quot;};\r\n\r\n\tString[] Action = new String[] {&quot;Start()&quot;,&quot;Terminate()&quot;,&quot;isVailid()&quot;};\r\n\tString[] Car = new String[] {&quot;OpenDoor()&quot;,&quot;Modified()&quot;,&quot;TurnOn()&quot;};\r\n\tString[] Helicopter = new String[] {&quot;StartFan()&quot;,&quot;Fly()&quot;,&quot;Pailot()&quot;};\r\n\r\n\t@Override\r\n\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\tsuper.onCreate(savedInstanceState);\r\n\t\tsetContentView(R.layout.activity_main);\r\n   \r\n\t\teditor = findViewById(R.id.editor);\r\n\t\t  editor.setAdapter(this,android.R.layout.simple_list_item_1 ,Class);\r\n\t}\r\n  }`\r\n\r\n**What To Do For That**\r\n\r\nI need To Update ArrayList When User Write `Word` before &quot;.&quot;\r\n\r\n`Class.ClassString()`\r\n\r\nI hope you understand what i say ","title":"Multiautocompletetextview Update ArrayAdapter List By Previous Word","body":"<p>Frist In AutoComplete ArrayAdapter Show item like <code>Action , Car, Bike, Ships, helicopter etc</code></p>\n<p>When user Write <code>Action.</code> then show Action[] Array in AutoComplte in ArrayAdapter like <code>Start, terminate,etc</code></p>\n<p>When user write <code>Car.</code> then show Car[] String Array in AutoComplete ArrayAdapter Like <code>Modified, import , etc</code></p>\n<p>More like this In <strong>MultiAutoCompleteTextView Android Java</strong></p>\n<p><strong>I write Code For More detail</strong>\n`</p>\n<pre><code>public SmEditor editor;\nString[] Class = new String[] { &quot;Action&quot;, &quot;Car&quot;, &quot;Bike&quot;, &quot;Helicopter&quot;};\n\nString[] Action = new String[] {&quot;Start()&quot;,&quot;Terminate()&quot;,&quot;isVailid()&quot;};\nString[] Car = new String[] {&quot;OpenDoor()&quot;,&quot;Modified()&quot;,&quot;TurnOn()&quot;};\nString[] Helicopter = new String[] {&quot;StartFan()&quot;,&quot;Fly()&quot;,&quot;Pailot()&quot;};\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    editor = findViewById(R.id.editor);\n      editor.setAdapter(this,android.R.layout.simple_list_item_1 ,Class);\n}\n</code></pre>\n<p>}`</p>\n<p><strong>What To Do For That</strong></p>\n<p>I need To Update ArrayList When User Write <code>Word</code> before &quot;.&quot;</p>\n<p><code>Class.ClassString()</code></p>\n<p>I hope you understand what i say</p>\n"},{"tags":["java","swing"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1679440806,"post_id":75807131,"comment_id":133722441,"body_markdown":"I would start by getting rid of `g.clearRect(0, 0, getWidth(), getHeight());`.  You also don&#39;t need `panel.setBackground(null);`, this is going to set the background color back to the component&#39;s default color (based on the look and feel)","body":"I would start by getting rid of <code>g.clearRect(0, 0, getWidth(), getHeight());</code>.  You also don&#39;t need <code>panel.setBackground(null);</code>, this is going to set the background color back to the component&#39;s default color (based on the look and feel)"},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1679441449,"post_id":75807131,"comment_id":133722537,"body_markdown":"I know it&#39;s not the same thing, but on MacOS, after I modified your code as suggested above, I was able to randomly place the window on any of my three monitors without issue","body":"I know it&#39;s not the same thing, but on MacOS, after I modified your code as suggested above, I was able to randomly place the window on any of my three monitors without issue"},{"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"score":0,"creation_date":1679441712,"post_id":75807131,"comment_id":133722575,"body_markdown":"@MadProgrammer Thanks. setBackground(null) removed. The clearRect() was from original application where this occurred, the graphics where animated, without this new graphics were pained on top of old.","body":"@MadProgrammer Thanks. setBackground(null) removed. The clearRect() was from original application where this occurred, the graphics where animated, without this new graphics were pained on top of old."},{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1679442032,"post_id":75807131,"comment_id":133722606,"body_markdown":"If you&#39;re having issues with the graphics not been updated on repeated cycles, I would argue that&#39;s a bug.  When I run your code, it paints the background color of the panel, which I don&#39;t think is what you really want.  The paint system &quot;should&quot; be doing this for you, but again, it could be an issue with Linux, but I don&#39;t run Swing on Linux","body":"If you&#39;re having issues with the graphics not been updated on repeated cycles, I would argue that&#39;s a bug.  When I run your code, it paints the background color of the panel, which I don&#39;t think is what you really want.  The paint system &quot;should&quot; be doing this for you, but again, it could be an issue with Linux, but I don&#39;t run Swing on Linux"}],"answers":[{"tags":[],"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1681238296,"creation_date":1679441967,"answer_id":75807264,"question_id":75807131,"body_markdown":"This appears to be a bug in the X11 specific part of AWT, I have since raised this as [JDK-8304900][1] \r\n\r\nThe following call `frame.setBackground(new Color(0, 0, 0, 0));` results in `java.awt.Window.setBackground(Color)` finding a GraphicsConfiguration which supports transparency, i.e. 32 bit depth.\r\n\r\nThis can be verified with `xwininfo -all`\r\n\r\nHowever if the frame is moved to another screen then code in `sun.awt.X11.XWindowPeer.checkIfOnNewScreen(Rectangle)` switches the GraphicsConfiguration of the frame to java.awt.GraphicsDevice.getDefaultConfiguration(). This uses the default visual from X11 which happens to be 24 bits. This can be seen with `xdpyinfo`. This effectively undoes the work that Window.setBackground() did and transparency is lost.\r\n\r\n```\r\ndefault visual id:  0x21\r\nvisual:\r\n  visual id:    0x21\r\n  class:    TrueColor\r\n  depth:    24 planes\r\n```\r\n\r\n## Possible solutions\r\n\r\n### Patch the default graphics context in X11GraphicsDevice\r\nA monkey patch which ensures the default graphics configuration is transparency capable, so transparency is preserved on all screens. There is no public API for this I can find, so disgustingly reflection is required. \r\n\r\n\r\n```\r\nfor (GraphicsDevice device : GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()) {\r\n    if (!device.getDefaultConfiguration().isTranslucencyCapable()) {\r\n        try {\r\n            Field field = Class.forName(&quot;sun.awt.X11GraphicsDevice&quot;).getDeclaredField(&quot;defaultConfig&quot;);\r\n            field.setAccessible(true);\r\n            for (GraphicsConfiguration gc : device.getConfigurations()) {\r\n                if (gc.isTranslucencyCapable()) {\r\n                    // just use the first transparency supporting GC we can find\r\n                    field.set(device, gc);\r\n                    break;\r\n                }\r\n            }\r\n        } catch (ReflectiveOperationException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n### Detect the graphics config switch and use setBackground() to trigger a new config\r\n\r\nThis has the advantage of being based on public API, but could be brittle as based on implementation detail that setBackground() when going from background with alpha 255 to any alpha &lt; 255 causes a selection of a transparency capable graphics config.\r\n\r\n```\r\nAtomicBoolean updating = new AtomicBoolean();\r\nframe.addPropertyChangeListener(&quot;graphicsConfiguration&quot;, new PropertyChangeListener() {\r\n    @Override\r\n    public void propertyChange(PropertyChangeEvent evt) {\r\n        if (updating.compareAndSet(false, true)) {\r\n            /*\r\n             * trigger frame to pick a graphics context with transparency support again\r\n             */\r\n            try {\r\n                frame.setBackground(new Color(0, 0, 0, 255));\r\n                frame.setBackground(new Color(0, 0, 0, 0));\r\n            } finally {\r\n                updating.set(false);\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\n### Reconfigure the Xorg server\r\n\r\nThe only other alternative I can see is to change the default visual ID in the Xorg configuration, however this is supplied by a 3rd party so not readily changeable in my case.\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8304900","title":"Java Swing window looses transparency on secondary monitors in Linux","body":"<p>This appears to be a bug in the X11 specific part of AWT, I have since raised this as <a href=\"https://bugs.openjdk.org/browse/JDK-8304900\" rel=\"nofollow noreferrer\">JDK-8304900</a></p>\n<p>The following call <code>frame.setBackground(new Color(0, 0, 0, 0));</code> results in <code>java.awt.Window.setBackground(Color)</code> finding a GraphicsConfiguration which supports transparency, i.e. 32 bit depth.</p>\n<p>This can be verified with <code>xwininfo -all</code></p>\n<p>However if the frame is moved to another screen then code in <code>sun.awt.X11.XWindowPeer.checkIfOnNewScreen(Rectangle)</code> switches the GraphicsConfiguration of the frame to java.awt.GraphicsDevice.getDefaultConfiguration(). This uses the default visual from X11 which happens to be 24 bits. This can be seen with <code>xdpyinfo</code>. This effectively undoes the work that Window.setBackground() did and transparency is lost.</p>\n<pre><code>default visual id:  0x21\nvisual:\n  visual id:    0x21\n  class:    TrueColor\n  depth:    24 planes\n</code></pre>\n<h2>Possible solutions</h2>\n<h3>Patch the default graphics context in X11GraphicsDevice</h3>\n<p>A monkey patch which ensures the default graphics configuration is transparency capable, so transparency is preserved on all screens. There is no public API for this I can find, so disgustingly reflection is required.</p>\n<pre><code>for (GraphicsDevice device : GraphicsEnvironment.getLocalGraphicsEnvironment().getScreenDevices()) {\n    if (!device.getDefaultConfiguration().isTranslucencyCapable()) {\n        try {\n            Field field = Class.forName(&quot;sun.awt.X11GraphicsDevice&quot;).getDeclaredField(&quot;defaultConfig&quot;);\n            field.setAccessible(true);\n            for (GraphicsConfiguration gc : device.getConfigurations()) {\n                if (gc.isTranslucencyCapable()) {\n                    // just use the first transparency supporting GC we can find\n                    field.set(device, gc);\n                    break;\n                }\n            }\n        } catch (ReflectiveOperationException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<h3>Detect the graphics config switch and use setBackground() to trigger a new config</h3>\n<p>This has the advantage of being based on public API, but could be brittle as based on implementation detail that setBackground() when going from background with alpha 255 to any alpha &lt; 255 causes a selection of a transparency capable graphics config.</p>\n<pre><code>AtomicBoolean updating = new AtomicBoolean();\nframe.addPropertyChangeListener(&quot;graphicsConfiguration&quot;, new PropertyChangeListener() {\n    @Override\n    public void propertyChange(PropertyChangeEvent evt) {\n        if (updating.compareAndSet(false, true)) {\n            /*\n             * trigger frame to pick a graphics context with transparency support again\n             */\n            try {\n                frame.setBackground(new Color(0, 0, 0, 255));\n                frame.setBackground(new Color(0, 0, 0, 0));\n            } finally {\n                updating.set(false);\n            }\n        }\n    }\n});\n</code></pre>\n<h3>Reconfigure the Xorg server</h3>\n<p>The only other alternative I can see is to change the default visual ID in the Xorg configuration, however this is supplied by a 3rd party so not readily changeable in my case.</p>\n"}],"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75807264,"answer_count":1,"score":1,"last_activity_date":1681238296,"creation_date":1679440097,"question_id":75807131,"body_markdown":"The following code renders a transparent window correctly, but only on the primary monitor. \r\n\r\n[![transparency correct][1]][1]\r\n\r\nIf the window is moved to the secondary monitor either manually or programmatically then transparency is lost and a black background is shown. \r\n\r\n[![transparency incorrect][2]][2]\r\n\r\nI&#39;ve been able to recreate this under OpenJDK 1.8, 11 and 17 on Redhat 8.2 and 8.4. \r\n\r\nI&#39;ve reported this as a bug to OpenJDK which may result in a long term fix. I&#39;m posting this question in search of a short-term solution, monkey-patch or whatever.\r\n\r\n```\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Graphics;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JPanel;\r\n\r\npublic class TransparencyTest {\r\n    public static void main(String[] args) {\r\n        JPanel panel = new Custom();\r\n        panel.setOpaque(false);\r\n        JFrame frame = new JFrame();\r\n        frame.setUndecorated(true);\r\n        frame.setBackground(new Color(0, 0, 0, 0));\r\n        frame.setTitle(&quot;Test&quot;);\r\n        frame.getContentPane().add(panel);\r\n        frame.setSize(320, 240);\r\n        frame.setResizable(false);\r\n        frame.setMinimumSize(new Dimension(1, 1));\r\n        frame.setLocation(1920, 0);\r\n        frame.setVisible(true);\r\n    }\r\n    private static class Custom extends JPanel {\r\n        @Override\r\n        protected void paintComponent(Graphics g) {\r\n            super.paintComponent(g);\r\n            g.clearRect(0, 0, getWidth(), getHeight());\r\n            g.setColor(new Color(255, 0, 0, 127));\r\n            g.fillOval(0, 0, getWidth(), getHeight());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n  [1]: https://i.stack.imgur.com/0RoxZ.png\r\n  [2]: https://i.stack.imgur.com/1SPy9.png","title":"Java Swing window looses transparency on secondary monitors in Linux","body":"<p>The following code renders a transparent window correctly, but only on the primary monitor.</p>\n<p><a href=\"https://i.stack.imgur.com/0RoxZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0RoxZ.png\" alt=\"transparency correct\" /></a></p>\n<p>If the window is moved to the secondary monitor either manually or programmatically then transparency is lost and a black background is shown.</p>\n<p><a href=\"https://i.stack.imgur.com/1SPy9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1SPy9.png\" alt=\"transparency incorrect\" /></a></p>\n<p>I've been able to recreate this under OpenJDK 1.8, 11 and 17 on Redhat 8.2 and 8.4.</p>\n<p>I've reported this as a bug to OpenJDK which may result in a long term fix. I'm posting this question in search of a short-term solution, monkey-patch or whatever.</p>\n<pre><code>import java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Graphics;\nimport javax.swing.JFrame;\nimport javax.swing.JPanel;\n\npublic class TransparencyTest {\n    public static void main(String[] args) {\n        JPanel panel = new Custom();\n        panel.setOpaque(false);\n        JFrame frame = new JFrame();\n        frame.setUndecorated(true);\n        frame.setBackground(new Color(0, 0, 0, 0));\n        frame.setTitle(&quot;Test&quot;);\n        frame.getContentPane().add(panel);\n        frame.setSize(320, 240);\n        frame.setResizable(false);\n        frame.setMinimumSize(new Dimension(1, 1));\n        frame.setLocation(1920, 0);\n        frame.setVisible(true);\n    }\n    private static class Custom extends JPanel {\n        @Override\n        protected void paintComponent(Graphics g) {\n            super.paintComponent(g);\n            g.clearRect(0, 0, getWidth(), getHeight());\n            g.setColor(new Color(255, 0, 0, 127));\n            g.fillOval(0, 0, getWidth(), getHeight());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","html","jquery","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681238108,"creation_date":1681176281,"answer_id":75981796,"question_id":75979875,"body_markdown":"1. It should be an array of objects (even though it&#39;s a `Collection`, not an array) so\r\n\r\n`new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;)` → `new StringJoiner(&quot;, &quot;, &quot;[&quot;, &quot;]&quot;)`\r\n\r\n2. It should target the form&#39;s children so\r\n\r\n`username: $(&#39;input[name=username]&#39;).val()` → `username: $(this).find(&#39;input[name=username]&#39;).val()` or better still `username: $(this).find(&#39;[name=username]&#39;).val()` and so on\r\n\r\n3. `department` is represented by a `&lt;select&gt;` element so\r\n\r\n`&#39;input[name=department]&#39;` → `&#39;select[name=department]&#39;` or `&#39;[name=department]&#39;`","title":"How do I correctly pass a Collection from my form to a JS event handler and then to a REST controller?","body":"<ol>\n<li>It should be an array of objects (even though it's a <code>Collection</code>, not an array) so</li>\n</ol>\n<p><code>new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;)</code> → <code>new StringJoiner(&quot;, &quot;, &quot;[&quot;, &quot;]&quot;)</code></p>\n<ol start=\"2\">\n<li>It should target the form's children so</li>\n</ol>\n<p><code>username: $('input[name=username]').val()</code> → <code>username: $(this).find('input[name=username]').val()</code> or better still <code>username: $(this).find('[name=username]').val()</code> and so on</p>\n<ol start=\"3\">\n<li><code>department</code> is represented by a <code>&lt;select&gt;</code> element so</li>\n</ol>\n<p><code>'input[name=department]'</code> → <code>'select[name=department]'</code> or <code>'[name=department]'</code></p>\n"}],"owner":{"account_id":10187542,"reputation":409,"user_id":20692967,"display_name":"Sergey Zolotarev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75981796,"answer_count":1,"score":0,"last_activity_date":1681238108,"creation_date":1681153026,"question_id":75979875,"body_markdown":"I am trying to rewrite my forms in a way that doesn&#39;t involve any page refreshing. In other words, I don&#39;t want the browser to make any GET/POST requests on submit. jQuery should help me with that.\r\nHere&#39;s my form (I have a few of them):\r\n```html\r\n    &lt;!-- I guess this action doesn&#39;t make much sense anymore --&gt;\r\n    &lt;form action=&quot;/save-user&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\r\n         &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;${user.id}&quot;&gt;\r\n    \r\n         &lt;input type=&quot;hidden&quot; name=&quot;username&quot;\r\n              th:value=&quot;${user.username}&quot;&gt;\r\n    \r\n         &lt;input type=&quot;hidden&quot; name=&quot;password&quot;\r\n              th:value=&quot;${user.password}&quot;&gt;\r\n    \r\n         &lt;input type=&quot;hidden&quot; name=&quot;name&quot; th:value=&quot;${user.name}&quot;&gt;\r\n    \r\n         &lt;input type=&quot;hidden&quot; name=&quot;lastName&quot;\r\n              th:value=&quot;${user.lastName}&quot;&gt;\r\n    \r\n         &lt;div class=&quot;form-group&quot;&gt;\r\n              &lt;label for=&quot;departments&quot;&gt;Department: &lt;/label&gt;\r\n              &lt;select id=&quot;departments&quot; class=&quot;form-control&quot;\r\n                       name=&quot;department&quot;&gt;\r\n                  &lt;option th:selected=&quot;${user.department == &#39;accounting&#39;}&quot;\r\n                          th:value=&quot;accounting&quot;&gt;Accounting\r\n                  &lt;/option&gt;\r\n                  &lt;option th:selected=&quot;${user.department == &#39;sales&#39;}&quot;\r\n                          th:value=&quot;sales&quot;&gt;Sales\r\n                  &lt;/option&gt;\r\n                  &lt;option th:selected=&quot;${user.department == &#39;information technology&#39;}&quot;\r\n                          th:value=&quot;&#39;information technology&#39;&quot;&gt;IT\r\n                  &lt;/option&gt;\r\n                  &lt;option th:selected=&quot;${user.department == &#39;human resources&#39;}&quot;\r\n                          th:value=&quot;&#39;human resources&#39;&quot;&gt;HR\r\n                  &lt;/option&gt;\r\n                  &lt;option th:selected=&quot;${user.department == &#39;board of directors&#39;}&quot;\r\n                          th:value=&quot;&#39;board of directors&#39;&quot;&gt;Board\r\n                  &lt;/option&gt;\r\n              &lt;/select&gt;\r\n          &lt;/div&gt;\r\n    \r\n          &lt;div class=&quot;form-group&quot;&gt;\r\n              &lt;label for=&quot;salary&quot;&gt;Salary: &lt;/label&gt;\r\n              &lt;input id=&quot;salary&quot; class=&quot;form-control&quot; name=&quot;salary&quot;\r\n                     th:value=&quot;${user.salary}&quot;\r\n                     min=&quot;100000&quot; aria-describedby=&quot;au-salary-help-block&quot;\r\n                     required/&gt;\r\n              &lt;small id=&quot;au-salary-help-block&quot;\r\n                     class=&quot;form-text text-muted&quot;&gt;100,000+\r\n              &lt;/small&gt;\r\n          &lt;/div&gt;\r\n    \r\n          &lt;input type=&quot;hidden&quot; name=&quot;age&quot; th:value=&quot;${user.age}&quot;&gt;\r\n    \r\n          &lt;input type=&quot;hidden&quot; name=&quot;email&quot; th:value=&quot;${user.email}&quot;&gt;\r\n    \r\n          &lt;input type=&quot;hidden&quot; name=&quot;enabledByte&quot;\r\n                 th:value=&quot;${user.enabledByte}&quot;&gt;\r\n          \r\n          &lt;!-- I guess I should JSON it somehow instead of turning into regular strings --&gt;\r\n          &lt;input type=&quot;hidden&quot; th:name=&quot;authorities&quot;\r\n                 th:value=&quot;${#strings.toString(user.authorities)}&quot;/&gt;\r\n    \r\n          &lt;input class=&quot;btn btn-primary d-flex ml-auto&quot; type=&quot;submit&quot;\r\n                 value=&quot;Submit&quot;&gt;\r\n      &lt;/form&gt;\r\n\r\n```\r\nHere&#39;s my JS:\r\n```javascript\r\n$(document).ready(function () {\r\n    $(&#39;form&#39;).on(&#39;submit&#39;, async function (event) {\r\n        event.preventDefault();\r\n\r\n        let user = {\r\n            id: $(&#39;input[name=id]&#39;).val(),\r\n            username: $(&#39;input[name=username]&#39;).val(),\r\n            password: $(&#39;input[name=password]&#39;).val(),\r\n            name: $(&#39;input[name=name]&#39;).val(),\r\n            lastName: $(&#39;input[name=lastName]&#39;).val(),\r\n            department: $(&#39;input[name=department]&#39;).val(),\r\n            salary: $(&#39;input[name=salary]&#39;).val(),\r\n            age: $(&#39;input[name=age]&#39;).val(),\r\n            email: $(&#39;input[name=email]&#39;).val(),\r\n            enabledByte: $(&#39;input[name=enabledByte]&#39;).val(),\r\n            authorities: $(&#39;input[name=authorities]&#39;).val()\r\n\r\n            /*\r\n            ↑ i tried replacing it with authorities: JSON.stringify($(&#39;input[name=authorities]&#39;).val()), same result\r\n            */\r\n        };\r\n\r\n        await fetch(`/users`, {\r\n            method: &#39;PUT&#39;,\r\n            headers: {\r\n                ...getCsrfHeaders(),\r\n                &#39;Content-Type&#39;: &#39;application/json&#39;,\r\n            },\r\n            body: JSON.stringify(user) // tried body : user too\r\n        });\r\n\r\n    });\r\n});\r\n\r\nfunction getCsrfHeaders() {\r\n    let csrfToken = $(&#39;meta[name=&quot;_csrf&quot;]&#39;).attr(&#39;content&#39;);\r\n    let csrfHeaderName = $(&#39;meta[name=&quot;_csrf_header&quot;]&#39;).attr(&#39;content&#39;);\r\n\r\n    let headers = {};\r\n    headers[csrfHeaderName] = csrfToken;\r\n    return headers;\r\n}\r\n```\r\nHere&#39;s my REST controller handler:\r\n```java\r\n    // maybe I&#39;ll make it void. i&#39;m not sure i actually want it to return anything\r\n    @PutMapping(&quot;/users&quot;)\r\n    public User updateEmployee(@RequestBody User user) {\r\n        service.save(user); // it&#39;s JPARepository&#39;s regular save()\r\n        return user;\r\n    }\r\n```\r\nThe `User` entity:\r\n```java\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\n@Data\r\n@EqualsAndHashCode\r\npublic class User implements UserDetails {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column\r\n    private long id;\r\n    @Column(nullable = false, unique = true)\r\n    private String username;\r\n    @Column(nullable = false)\r\n    private String password;\r\n    @Column\r\n    private String name;\r\n    @Column(name = &quot;last_name&quot;)\r\n    private String lastName;\r\n    @Column\r\n    private String department;\r\n    @Column\r\n    private int salary;\r\n    @Column\r\n    private byte age;\r\n    @Column\r\n    private String email;\r\n    @Column(name = &quot;enabled&quot;)\r\n    private byte enabledByte;\r\n    @ManyToMany\r\n    @JoinTable(name = &quot;user_role&quot;,\r\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\r\n                    @JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)},\r\n            inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;),\r\n                    @JoinColumn(name = &quot;role&quot;, referencedColumnName = &quot;role&quot;)})\r\n    @EqualsAndHashCode.Exclude\r\n    private Set&lt;Role&gt; authorities;\r\n```\r\nThe `Role` entity:\r\n```java\r\n@Entity\r\n@Table(name = &quot;roles&quot;)\r\n@Data\r\n@EqualsAndHashCode\r\npublic class Role implements GrantedAuthority {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column\r\n    private long id;\r\n    @Column(name = &quot;role&quot;, nullable = false, unique = true)\r\n    private String authority;\r\n    @ManyToMany(mappedBy = &quot;authorities&quot;)\r\n    @EqualsAndHashCode.Exclude\r\n    private Set&lt;User&gt; userList;\r\n```\r\nWhen I press the submit button, I get this in my console\r\n```\r\nWARN 18252 --- [io-8080-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.util.HashSet&lt;pp.spring_bootstrap.models.Role&gt;` from String value (token `JsonToken.VALUE_STRING`)]\r\n```\r\nIt seems I should somehow pass a JSON representation of that `Collection`, not just a `String`. In my previous project, without the use of jQuery, the `String` was successfully deserialized with my custom `Formatter`\r\n```java\r\n@Override\r\n    public void addFormatters(FormatterRegistry registry) {\r\n        registry.addFormatter(new Formatter&lt;Set&lt;Role&gt;&gt;() {\r\n            @Override\r\n            public Set&lt;Role&gt; parse(String text, Locale locale) {\r\n                Set&lt;Role&gt; roleSet = new HashSet&lt;&gt;();\r\n                String[] roles = text.split(&quot;^\\\\[|]$|(?&lt;=]),\\\\s?&quot;);\r\n                for (String roleString : roles) {\r\n                    if (roleString.length() == 0) continue;\r\n                    String authority =\r\n                            roleString.substring(roleString.lastIndexOf(&quot;=&quot;) + 2,\r\n                                    roleString.indexOf(&quot;]&quot;) - 1);\r\n                    roleSet.add(service.getRoleByName(authority));\r\n                }\r\n                return roleSet;\r\n            }\r\n\r\n            @Override\r\n            public String print(Set&lt;Role&gt; object, Locale locale) {\r\n                return null;\r\n            }\r\n        });\r\n    }\r\n```\r\nI googled, and it appears Thymeleaf doesn&#39;t have any `toJson()` method. I mean I can write my own methods, but I don&#39;t know how to use them in Thymeleaf templates anyway. Besides, [it may not be the most optimal solution][1]\r\n\r\nIt&#39;s a Boot project so I have that Jackson databind library\r\n\r\n**How do I correctly pass a Collection from my form to a JS event handler and then to a REST controller?**\r\n\r\nI examined multiple similar questions suggested by StackOverflow. They don&#39;t appear relevant (for example, they involve different programming languages, such as C# or PHP)\r\n\r\n**UPD:** I tried this just now. It&#39;s a pitty it didn&#39;t work too! (the error message is the same)\r\n```java\r\n// inside my config\r\n    @Bean\r\n    public Function&lt;Set&lt;Role&gt;, String&gt; jsonify() {\r\n        return s -&gt; {\r\n            StringJoiner sj = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\r\n            for (Role role : s) {\r\n                sj.add(String.format(&quot;{ \\&quot;id\\&quot; : %d, \\&quot;authority\\&quot; : \\&quot;%s\\&quot; }&quot;, role.getId(), role.getAuthority()));\r\n            }\r\n            return sj.toString();\r\n        };\r\n    }\r\n```\r\n```html\r\n    &lt;input type=&quot;hidden&quot; th:name=&quot;authorities&quot; \r\n           th:value=&quot;${@jsonify.apply(user.authorities)}&quot;/&gt;\r\n```\r\nThe method works as expected, though\r\n```javascript\r\n$(document).ready(function () {\r\n    $(&#39;form&#39;).on(&#39;submit&#39;, async function (event) {\r\n        /*\r\n        ↓ logs:\r\n          authorities input: {{ &quot;id&quot; : 1, &quot;authority&quot; : &quot;USER&quot; }}\r\n        */\r\n        console.log(&#39;authorities input: &#39; + \r\n                   $(&#39;input[name=authorities]&#39;).val());\r\n```\r\n**UPD2:** GPT4 suggested this\r\n```javascript\r\nauthorities: JSON.parse($(&#39;input[name=authorities]&#39;).val())\r\n```\r\nand now it&#39;s really weird. The database is still unchanged, BUT! the IDE console now has no errors and no mentioning of a PUT request at all (it was there on previous attempts)! Additionally, the browser log has this message\r\n```\r\nUncaught (in promise) SyntaxError: Expected property name or &#39;}&#39; in JSON at position 1\r\n    at JSON.parse (&lt;anonymous&gt;)\r\n    at HTMLFormElement.&lt;anonymous&gt; (script.js:28:31)\r\n    at HTMLFormElement.dispatch (jquery.slim.min.js:2:43114)\r\n    at v.handle (jquery.slim.min.js:2:41098)\r\n```\r\nI don&#39;t know what it means!\r\n\r\n**UPD3:** GPT4 is smart. Smarter than me, anyways. It was absolutely right. The reason it didn&#39;t work in UPD2 was the fact that I ignored another thing it said:\r\n\r\n&gt; The authorities field should be sent as an **array** of objects rather than a string.\r\n\r\nIt means I was supposed to use square brackets, not curly brackets, as my `StringJoiner` prefix and suffix:\r\n```java\r\n    // I also added some line breaks, but I doubt it was necessary\r\n    @Bean\r\n    public Function&lt;Set&lt;Role&gt;, String&gt; jsonify() {\r\n        return s -&gt; {\r\n            StringJoiner sj = new StringJoiner(&quot;,\\n&quot;, &quot;[\\n&quot;, &quot;\\n]&quot;);\r\n            for (Role role : s) {\r\n                sj.add(String.format(&quot;{\\n\\&quot;id\\&quot; : %d,\\n\\&quot;authority\\&quot; : \\&quot;%s\\&quot;\\n}&quot;, role.getId(), role.getAuthority()));\r\n            }\r\n            return sj.toString();\r\n        };\r\n    }\r\n```\r\nI also changed, for example, this\r\n```javascript\r\nusername: $(&#39;input[name=username]&#39;).val()\r\n```\r\nto this (it was silly of me not to do it right away)\r\n```javascript\r\nusername: $(this).find(&#39;input[name=username]&#39;).val()\r\n```\r\nand – viola – it works now!\r\n\r\nAnd GPT4 also noticed I used\r\n```javascript\r\n&#39;input[name=department]&#39;\r\n```\r\ninstead of\r\n```javascript\r\n&#39;select[name=department]&#39;\r\n```\r\nI fixed that too\r\n\r\n  [1]: https://xyproblem.info/","title":"How do I correctly pass a Collection from my form to a JS event handler and then to a REST controller?","body":"<p>I am trying to rewrite my forms in a way that doesn't involve any page refreshing. In other words, I don't want the browser to make any GET/POST requests on submit. jQuery should help me with that.\nHere's my form (I have a few of them):</p>\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;!-- I guess this action doesn't make much sense anymore --&gt;\n    &lt;form action=&quot;/save-user&quot; th:object=&quot;${user}&quot; method=&quot;post&quot;&gt;\n         &lt;input type=&quot;hidden&quot; name=&quot;id&quot; th:value=&quot;${user.id}&quot;&gt;\n    \n         &lt;input type=&quot;hidden&quot; name=&quot;username&quot;\n              th:value=&quot;${user.username}&quot;&gt;\n    \n         &lt;input type=&quot;hidden&quot; name=&quot;password&quot;\n              th:value=&quot;${user.password}&quot;&gt;\n    \n         &lt;input type=&quot;hidden&quot; name=&quot;name&quot; th:value=&quot;${user.name}&quot;&gt;\n    \n         &lt;input type=&quot;hidden&quot; name=&quot;lastName&quot;\n              th:value=&quot;${user.lastName}&quot;&gt;\n    \n         &lt;div class=&quot;form-group&quot;&gt;\n              &lt;label for=&quot;departments&quot;&gt;Department: &lt;/label&gt;\n              &lt;select id=&quot;departments&quot; class=&quot;form-control&quot;\n                       name=&quot;department&quot;&gt;\n                  &lt;option th:selected=&quot;${user.department == 'accounting'}&quot;\n                          th:value=&quot;accounting&quot;&gt;Accounting\n                  &lt;/option&gt;\n                  &lt;option th:selected=&quot;${user.department == 'sales'}&quot;\n                          th:value=&quot;sales&quot;&gt;Sales\n                  &lt;/option&gt;\n                  &lt;option th:selected=&quot;${user.department == 'information technology'}&quot;\n                          th:value=&quot;'information technology'&quot;&gt;IT\n                  &lt;/option&gt;\n                  &lt;option th:selected=&quot;${user.department == 'human resources'}&quot;\n                          th:value=&quot;'human resources'&quot;&gt;HR\n                  &lt;/option&gt;\n                  &lt;option th:selected=&quot;${user.department == 'board of directors'}&quot;\n                          th:value=&quot;'board of directors'&quot;&gt;Board\n                  &lt;/option&gt;\n              &lt;/select&gt;\n          &lt;/div&gt;\n    \n          &lt;div class=&quot;form-group&quot;&gt;\n              &lt;label for=&quot;salary&quot;&gt;Salary: &lt;/label&gt;\n              &lt;input id=&quot;salary&quot; class=&quot;form-control&quot; name=&quot;salary&quot;\n                     th:value=&quot;${user.salary}&quot;\n                     min=&quot;100000&quot; aria-describedby=&quot;au-salary-help-block&quot;\n                     required/&gt;\n              &lt;small id=&quot;au-salary-help-block&quot;\n                     class=&quot;form-text text-muted&quot;&gt;100,000+\n              &lt;/small&gt;\n          &lt;/div&gt;\n    \n          &lt;input type=&quot;hidden&quot; name=&quot;age&quot; th:value=&quot;${user.age}&quot;&gt;\n    \n          &lt;input type=&quot;hidden&quot; name=&quot;email&quot; th:value=&quot;${user.email}&quot;&gt;\n    \n          &lt;input type=&quot;hidden&quot; name=&quot;enabledByte&quot;\n                 th:value=&quot;${user.enabledByte}&quot;&gt;\n          \n          &lt;!-- I guess I should JSON it somehow instead of turning into regular strings --&gt;\n          &lt;input type=&quot;hidden&quot; th:name=&quot;authorities&quot;\n                 th:value=&quot;${#strings.toString(user.authorities)}&quot;/&gt;\n    \n          &lt;input class=&quot;btn btn-primary d-flex ml-auto&quot; type=&quot;submit&quot;\n                 value=&quot;Submit&quot;&gt;\n      &lt;/form&gt;\n\n</code></pre>\n<p>Here's my JS:</p>\n<pre class=\"lang-js prettyprint-override\"><code>$(document).ready(function () {\n    $('form').on('submit', async function (event) {\n        event.preventDefault();\n\n        let user = {\n            id: $('input[name=id]').val(),\n            username: $('input[name=username]').val(),\n            password: $('input[name=password]').val(),\n            name: $('input[name=name]').val(),\n            lastName: $('input[name=lastName]').val(),\n            department: $('input[name=department]').val(),\n            salary: $('input[name=salary]').val(),\n            age: $('input[name=age]').val(),\n            email: $('input[name=email]').val(),\n            enabledByte: $('input[name=enabledByte]').val(),\n            authorities: $('input[name=authorities]').val()\n\n            /*\n            ↑ i tried replacing it with authorities: JSON.stringify($('input[name=authorities]').val()), same result\n            */\n        };\n\n        await fetch(`/users`, {\n            method: 'PUT',\n            headers: {\n                ...getCsrfHeaders(),\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify(user) // tried body : user too\n        });\n\n    });\n});\n\nfunction getCsrfHeaders() {\n    let csrfToken = $('meta[name=&quot;_csrf&quot;]').attr('content');\n    let csrfHeaderName = $('meta[name=&quot;_csrf_header&quot;]').attr('content');\n\n    let headers = {};\n    headers[csrfHeaderName] = csrfToken;\n    return headers;\n}\n</code></pre>\n<p>Here's my REST controller handler:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // maybe I'll make it void. i'm not sure i actually want it to return anything\n    @PutMapping(&quot;/users&quot;)\n    public User updateEmployee(@RequestBody User user) {\n        service.save(user); // it's JPARepository's regular save()\n        return user;\n    }\n</code></pre>\n<p>The <code>User</code> entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;users&quot;)\n@Data\n@EqualsAndHashCode\npublic class User implements UserDetails {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column\n    private long id;\n    @Column(nullable = false, unique = true)\n    private String username;\n    @Column(nullable = false)\n    private String password;\n    @Column\n    private String name;\n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n    @Column\n    private String department;\n    @Column\n    private int salary;\n    @Column\n    private byte age;\n    @Column\n    private String email;\n    @Column(name = &quot;enabled&quot;)\n    private byte enabledByte;\n    @ManyToMany\n    @JoinTable(name = &quot;user_role&quot;,\n            joinColumns = {@JoinColumn(name = &quot;user_id&quot;, referencedColumnName = &quot;id&quot;),\n                    @JoinColumn(name = &quot;username&quot;, referencedColumnName = &quot;username&quot;)},\n            inverseJoinColumns = {@JoinColumn(name = &quot;role_id&quot;, referencedColumnName = &quot;id&quot;),\n                    @JoinColumn(name = &quot;role&quot;, referencedColumnName = &quot;role&quot;)})\n    @EqualsAndHashCode.Exclude\n    private Set&lt;Role&gt; authorities;\n</code></pre>\n<p>The <code>Role</code> entity:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;roles&quot;)\n@Data\n@EqualsAndHashCode\npublic class Role implements GrantedAuthority {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column\n    private long id;\n    @Column(name = &quot;role&quot;, nullable = false, unique = true)\n    private String authority;\n    @ManyToMany(mappedBy = &quot;authorities&quot;)\n    @EqualsAndHashCode.Exclude\n    private Set&lt;User&gt; userList;\n</code></pre>\n<p>When I press the submit button, I get this in my console</p>\n<pre><code>WARN 18252 --- [io-8080-exec-10] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.util.HashSet&lt;pp.spring_bootstrap.models.Role&gt;` from String value (token `JsonToken.VALUE_STRING`)]\n</code></pre>\n<p>It seems I should somehow pass a JSON representation of that <code>Collection</code>, not just a <code>String</code>. In my previous project, without the use of jQuery, the <code>String</code> was successfully deserialized with my custom <code>Formatter</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public void addFormatters(FormatterRegistry registry) {\n        registry.addFormatter(new Formatter&lt;Set&lt;Role&gt;&gt;() {\n            @Override\n            public Set&lt;Role&gt; parse(String text, Locale locale) {\n                Set&lt;Role&gt; roleSet = new HashSet&lt;&gt;();\n                String[] roles = text.split(&quot;^\\\\[|]$|(?&lt;=]),\\\\s?&quot;);\n                for (String roleString : roles) {\n                    if (roleString.length() == 0) continue;\n                    String authority =\n                            roleString.substring(roleString.lastIndexOf(&quot;=&quot;) + 2,\n                                    roleString.indexOf(&quot;]&quot;) - 1);\n                    roleSet.add(service.getRoleByName(authority));\n                }\n                return roleSet;\n            }\n\n            @Override\n            public String print(Set&lt;Role&gt; object, Locale locale) {\n                return null;\n            }\n        });\n    }\n</code></pre>\n<p>I googled, and it appears Thymeleaf doesn't have any <code>toJson()</code> method. I mean I can write my own methods, but I don't know how to use them in Thymeleaf templates anyway. Besides, <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">it may not be the most optimal solution</a></p>\n<p>It's a Boot project so I have that Jackson databind library</p>\n<p><strong>How do I correctly pass a Collection from my form to a JS event handler and then to a REST controller?</strong></p>\n<p>I examined multiple similar questions suggested by StackOverflow. They don't appear relevant (for example, they involve different programming languages, such as C# or PHP)</p>\n<p><strong>UPD:</strong> I tried this just now. It's a pitty it didn't work too! (the error message is the same)</p>\n<pre class=\"lang-java prettyprint-override\"><code>// inside my config\n    @Bean\n    public Function&lt;Set&lt;Role&gt;, String&gt; jsonify() {\n        return s -&gt; {\n            StringJoiner sj = new StringJoiner(&quot;, &quot;, &quot;{&quot;, &quot;}&quot;);\n            for (Role role : s) {\n                sj.add(String.format(&quot;{ \\&quot;id\\&quot; : %d, \\&quot;authority\\&quot; : \\&quot;%s\\&quot; }&quot;, role.getId(), role.getAuthority()));\n            }\n            return sj.toString();\n        };\n    }\n</code></pre>\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;input type=&quot;hidden&quot; th:name=&quot;authorities&quot; \n           th:value=&quot;${@jsonify.apply(user.authorities)}&quot;/&gt;\n</code></pre>\n<p>The method works as expected, though</p>\n<pre class=\"lang-js prettyprint-override\"><code>$(document).ready(function () {\n    $('form').on('submit', async function (event) {\n        /*\n        ↓ logs:\n          authorities input: {{ &quot;id&quot; : 1, &quot;authority&quot; : &quot;USER&quot; }}\n        */\n        console.log('authorities input: ' + \n                   $('input[name=authorities]').val());\n</code></pre>\n<p><strong>UPD2:</strong> GPT4 suggested this</p>\n<pre class=\"lang-js prettyprint-override\"><code>authorities: JSON.parse($('input[name=authorities]').val())\n</code></pre>\n<p>and now it's really weird. The database is still unchanged, BUT! the IDE console now has no errors and no mentioning of a PUT request at all (it was there on previous attempts)! Additionally, the browser log has this message</p>\n<pre><code>Uncaught (in promise) SyntaxError: Expected property name or '}' in JSON at position 1\n    at JSON.parse (&lt;anonymous&gt;)\n    at HTMLFormElement.&lt;anonymous&gt; (script.js:28:31)\n    at HTMLFormElement.dispatch (jquery.slim.min.js:2:43114)\n    at v.handle (jquery.slim.min.js:2:41098)\n</code></pre>\n<p>I don't know what it means!</p>\n<p><strong>UPD3:</strong> GPT4 is smart. Smarter than me, anyways. It was absolutely right. The reason it didn't work in UPD2 was the fact that I ignored another thing it said:</p>\n<blockquote>\n<p>The authorities field should be sent as an <strong>array</strong> of objects rather than a string.</p>\n</blockquote>\n<p>It means I was supposed to use square brackets, not curly brackets, as my <code>StringJoiner</code> prefix and suffix:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // I also added some line breaks, but I doubt it was necessary\n    @Bean\n    public Function&lt;Set&lt;Role&gt;, String&gt; jsonify() {\n        return s -&gt; {\n            StringJoiner sj = new StringJoiner(&quot;,\\n&quot;, &quot;[\\n&quot;, &quot;\\n]&quot;);\n            for (Role role : s) {\n                sj.add(String.format(&quot;{\\n\\&quot;id\\&quot; : %d,\\n\\&quot;authority\\&quot; : \\&quot;%s\\&quot;\\n}&quot;, role.getId(), role.getAuthority()));\n            }\n            return sj.toString();\n        };\n    }\n</code></pre>\n<p>I also changed, for example, this</p>\n<pre class=\"lang-js prettyprint-override\"><code>username: $('input[name=username]').val()\n</code></pre>\n<p>to this (it was silly of me not to do it right away)</p>\n<pre class=\"lang-js prettyprint-override\"><code>username: $(this).find('input[name=username]').val()\n</code></pre>\n<p>and – viola – it works now!</p>\n<p>And GPT4 also noticed I used</p>\n<pre class=\"lang-js prettyprint-override\"><code>'input[name=department]'\n</code></pre>\n<p>instead of</p>\n<pre class=\"lang-js prettyprint-override\"><code>'select[name=department]'\n</code></pre>\n<p>I fixed that too</p>\n"},{"tags":["java","concurrency","executorservice","completable-future"],"comments":[{"owner":{"account_id":75804,"reputation":94815,"user_id":217324,"accept_rate":96,"display_name":"Nathan Hughes"},"score":0,"creation_date":1681238946,"post_id":75989091,"comment_id":134023593,"body_markdown":"This seems similar to  https://stackoverflow.com/q/26243422/217324","body":"This seems similar to  <a href=\"https://stackoverflow.com/q/26243422/217324\">stackoverflow.com/q/26243422/217324</a>"},{"owner":{"account_id":27082384,"reputation":55,"user_id":21620157,"display_name":"Maicol"},"score":0,"creation_date":1681239724,"post_id":75989091,"comment_id":134023758,"body_markdown":"Thanks! I was afraid that the use of multiple `Executors` might affect performance.","body":"Thanks! I was afraid that the use of multiple <code>Executors</code> might affect performance."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1681242851,"post_id":75989091,"comment_id":134024441,"body_markdown":"It doesn&#39;t matter at all that you have two different classes. What _might_ matter is what kind of tasks you intend to submit to the executor or executors. E.g., one reason for having two executors is if you expect one of them to work its way through a backlog of big tasks, and you want the other one to be available to perform short, high-priority tasks.","body":"It doesn&#39;t matter at all that you have two different classes. What <i>might</i> matter is what kind of tasks you intend to submit to the executor or executors. E.g., one reason for having two executors is if you expect one of them to work its way through a backlog of big tasks, and you want the other one to be available to perform short, high-priority tasks."},{"owner":{"account_id":27082384,"reputation":55,"user_id":21620157,"display_name":"Maicol"},"score":0,"creation_date":1681285599,"post_id":75989091,"comment_id":134030122,"body_markdown":"Thank you, I really appreciate your example.","body":"Thank you, I really appreciate your example."}],"owner":{"account_id":27082384,"reputation":55,"user_id":21620157,"display_name":"Maicol"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1681243278,"answer_count":0,"score":1,"last_activity_date":1681238066,"creation_date":1681238066,"question_id":75989091,"body_markdown":"I have to create some fully async classes with the `CompletableFuture`. For example:\r\n\r\n```java\r\npublic class A {\r\n    public CompletableFuture&lt;String&gt; methodA() {\r\n        return CompletableFuture.supplyAsync(() -&gt;  {\r\n            // ...\r\n            return &quot;123&quot;;\r\n        }, // Executors );\r\n    }\r\n}\r\n\r\npublic class B {\r\n    public CompletableFuture&lt;String&gt; methodB() {\r\n        return CompletableFuture.supplyAsync(() -&gt;  {\r\n            // ...\r\n            return &quot;ABC&quot;;\r\n        }, // Executors);\r\n    }\r\n}\r\n```\r\n\r\nAccording with the [doc](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#supplyAsync-java.util.function.Supplier-) the `supplyAsync` runs the supplier in a `ForkJoinPool.commonPool()` but is not what i really want. I need to manage the `Executors`\r\n\r\nIs it better to use two separate `Executors` (one for class `A` and one for class `B`) or create one externally and pass the same in the two classes?","title":"Is it better to use different Executors (one for each class) or share one between different classes?","body":"<p>I have to create some fully async classes with the <code>CompletableFuture</code>. For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class A {\n    public CompletableFuture&lt;String&gt; methodA() {\n        return CompletableFuture.supplyAsync(() -&gt;  {\n            // ...\n            return &quot;123&quot;;\n        }, // Executors );\n    }\n}\n\npublic class B {\n    public CompletableFuture&lt;String&gt; methodB() {\n        return CompletableFuture.supplyAsync(() -&gt;  {\n            // ...\n            return &quot;ABC&quot;;\n        }, // Executors);\n    }\n}\n</code></pre>\n<p>According with the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletableFuture.html#supplyAsync-java.util.function.Supplier-\" rel=\"nofollow noreferrer\">doc</a> the <code>supplyAsync</code> runs the supplier in a <code>ForkJoinPool.commonPool()</code> but is not what i really want. I need to manage the <code>Executors</code></p>\n<p>Is it better to use two separate <code>Executors</code> (one for class <code>A</code> and one for class <code>B</code>) or create one externally and pass the same in the two classes?</p>\n"},{"tags":["java"],"comments":[{"owner":{"display_name":"user5547025"},"score":0,"creation_date":1460099071,"post_id":36493506,"comment_id":60594887,"body_markdown":"Have you tried anything? Show us your code.","body":"Have you tried anything? Show us your code."},{"owner":{"account_id":6851943,"reputation":1557,"user_id":5268867,"accept_rate":21,"display_name":"Musaddique S"},"score":0,"creation_date":1460099401,"post_id":36493506,"comment_id":60595050,"body_markdown":"added code but out is different    &quot;[&quot;{&quot;LastName=abc&quot;,&quot; FirstName=xyz&quot;,&quot; EmailAddress=s@s.com&quot;,&quot; IncludeInEmails=false&quot;},{&quot;LastName=mno&quot;,&quot; FirstName=pqr&quot;,&quot; EmailAddress=m@m.com&quot;,&quot; IncludeInEmails=true&quot;}&quot;]&quot;","body":"added code but out is different    &quot;[&quot;{&quot;LastName=abc&quot;,&quot; FirstName=xyz&quot;,&quot; EmailAddress=s@s.com&quot;,&quot; IncludeInEmails=false&quot;},{&quot;LastName=mno&quot;,&quot; FirstName=pqr&quot;,&quot; EmailAddress=m@m.com&quot;,&quot; IncludeInEmails=true&quot;}&quot;]&quot;"},{"owner":{"account_id":3298842,"reputation":14301,"user_id":2775450,"accept_rate":71,"display_name":"Codebender"},"score":1,"creation_date":1460099449,"post_id":36493506,"comment_id":60595074,"body_markdown":"I guess you should not be quoting boolean or numbers in your JSON... So just a simple regex would not be enough...","body":"I guess you should not be quoting boolean or numbers in your JSON... So just a simple regex would not be enough..."},{"owner":{"account_id":6851943,"reputation":1557,"user_id":5268867,"accept_rate":21,"display_name":"Musaddique S"},"score":0,"creation_date":1460099530,"post_id":36493506,"comment_id":60595117,"body_markdown":"so what should i need to do. i want to convert it into json","body":"so what should i need to do. i want to convert it into json"},{"owner":{"account_id":4099938,"reputation":4282,"user_id":3365750,"accept_rate":56,"display_name":"dambros"},"score":0,"creation_date":1460099578,"post_id":36493506,"comment_id":60595136,"body_markdown":"How are you obtaing your String? `toString()` call ?","body":"How are you obtaing your String? <code>toString()</code> call ?"}],"answers":[{"tags":[],"owner":{"account_id":4680241,"reputation":445,"user_id":3789125,"display_name":"vssk"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460102203,"creation_date":1460102203,"answer_id":36494412,"question_id":36493506,"body_markdown":"Just use this library [http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1][1]\r\n\r\nHere is code for your example:\r\n\r\n        JSONArray json =  new JSONArray();\r\n        JSONObject key1 = new JSONObject();\r\n        key1.put(&quot;LastName&quot;, &quot;abc&quot;);\r\n        key1.put(&quot;FirstName&quot;, &quot;xyz&quot;);\r\n        key1.put(&quot;EmailAddress&quot;, &quot;s@s.com&quot;);\r\n        key1.put(&quot;IncludeInEmails&quot;, false);        \r\n        JSONObject key2 = new JSONObject();\r\n        key2.put(&quot;LastName&quot;, &quot;mno&quot;);\r\n        key2.put(&quot;FirstName&quot;, &quot;pqr&quot;);\r\n        key2.put(&quot;EmailAddress&quot;, &quot;m@m.com&quot;);\r\n        key2.put(&quot;IncludeInEmails&quot;, true);  \r\n        json.add(key1);\r\n        json.add(key2);\r\n        System.out.println(json.toString());    \r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1","title":"How can i add double quotes to look like json","body":"<p>Just use this library <a href=\"http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1\" rel=\"nofollow\">http://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1</a></p>\n\n<p>Here is code for your example:</p>\n\n<pre><code>    JSONArray json =  new JSONArray();\n    JSONObject key1 = new JSONObject();\n    key1.put(\"LastName\", \"abc\");\n    key1.put(\"FirstName\", \"xyz\");\n    key1.put(\"EmailAddress\", \"s@s.com\");\n    key1.put(\"IncludeInEmails\", false);        \n    JSONObject key2 = new JSONObject();\n    key2.put(\"LastName\", \"mno\");\n    key2.put(\"FirstName\", \"pqr\");\n    key2.put(\"EmailAddress\", \"m@m.com\");\n    key2.put(\"IncludeInEmails\", true);  \n    json.add(key1);\n    json.add(key2);\n    System.out.println(json.toString());    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7852006,"reputation":2536,"user_id":5935221,"display_name":"nyname00"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460102707,"creation_date":1460102707,"answer_id":36494539,"question_id":36493506,"body_markdown":"Since there are a lot of corner cases, like character escaping, booleans, numbers, ... a simple regex won&#39;t do. \r\n\r\nYou could split the input string by newline and then handle each key-value-pair separately\r\n\r\n    for (String line : input.split(&quot;\\\\R&quot;)) {\r\n        // split by &quot;=&quot; and handle key and value\r\n    }\r\n\r\nBut again, you will have to handle char. escaping, booleans, ... (and btw, `=` is not a valid JSON key-value separator, only `:` is).\r\n\r\nI&#39;d suggest using [GSON][1] since it provides `lenient` parsing. Using `Maven` you can add it to your project with this dependency:\r\n\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;gson&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\nYou can then parse your `input` string using\r\n\r\n    String output = new JsonParser()\r\n\t\t.parse(input)\r\n\t\t.toString();\r\n\r\n  [1]: https://github.com/google/gson","title":"How can i add double quotes to look like json","body":"<p>Since there are a lot of corner cases, like character escaping, booleans, numbers, ... a simple regex won't do. </p>\n\n<p>You could split the input string by newline and then handle each key-value-pair separately</p>\n\n<pre><code>for (String line : input.split(\"\\\\R\")) {\n    // split by \"=\" and handle key and value\n}\n</code></pre>\n\n<p>But again, you will have to handle char. escaping, booleans, ... (and btw, <code>=</code> is not a valid JSON key-value separator, only <code>:</code> is).</p>\n\n<p>I'd suggest using <a href=\"https://github.com/google/gson\" rel=\"nofollow\">GSON</a> since it provides <code>lenient</code> parsing. Using <code>Maven</code> you can add it to your project with this dependency:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n    &lt;artifactId&gt;gson&lt;/artifactId&gt;\n    &lt;version&gt;2.6.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>You can then parse your <code>input</code> string using</p>\n\n<pre><code>String output = new JsonParser()\n    .parse(input)\n    .toString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3584907,"reputation":1436,"user_id":2992314,"display_name":"Mahendra"},"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1460105357,"creation_date":1460105357,"answer_id":36495345,"question_id":36493506,"body_markdown":"The regex way, similar to you have tried:\r\n\r\n\t\tString jsonString = &quot;[ \\n&quot; + &quot;{ \\n&quot; + &quot;   LastName=abc,  \\n&quot; + &quot;   FirstName=xyz,  \\n&quot;\r\n\t\t\t\t+ &quot;   EmailAddress=s@s.com,  \\n&quot; + &quot;   IncludeInEmails=false \\n&quot; + &quot;}, \\n&quot; + &quot;{  \\n&quot;\r\n\t\t\t\t+ &quot;  LastName=mno,  \\n&quot; + &quot;  FirstName=pqr,  \\n&quot; + &quot;  EmailAddress=m@m.com,  \\n&quot; + &quot;  Number=123,  \\n&quot;\r\n\t\t\t\t+ &quot;  IncludeInEmails=true \\n&quot; + &quot;} \\n&quot; + &quot;] \\n&quot;;\r\n\r\n\t\tSystem.out.println(&quot;Before:\\n&quot; + jsonString);\r\n\t\tjsonString = jsonString.replaceAll(&quot;([\\\\w]+)[ ]*=&quot;, &quot;\\&quot;$1\\&quot; =&quot;); // to quote before = value\r\n\t\tjsonString = jsonString.replaceAll(&quot;=[ ]*([\\\\w@\\\\.]+)&quot;, &quot;= \\&quot;$1\\&quot;&quot;); // to quote after = value, add special character as needed to the exclusion list in regex\r\n\t\tjsonString = jsonString.replaceAll(&quot;=[ ]*\\&quot;([\\\\d]+)\\&quot;&quot;, &quot;= $1&quot;); // to un-quote decimal value\r\n\t\tjsonString = jsonString.replaceAll(&quot;\\&quot;true\\&quot;&quot;, &quot;true&quot;); // to un-quote boolean\r\n\t\tjsonString = jsonString.replaceAll(&quot;\\&quot;false\\&quot;&quot;, &quot;false&quot;); // to un-quote boolean\r\n\r\n\t\tSystem.out.println(&quot;===============================&quot;);\r\n\t\tSystem.out.println(&quot;After:\\n&quot; + jsonString);","title":"How can i add double quotes to look like json","body":"<p>The regex way, similar to you have tried:</p>\n\n<pre><code>    String jsonString = \"[ \\n\" + \"{ \\n\" + \"   LastName=abc,  \\n\" + \"   FirstName=xyz,  \\n\"\n            + \"   EmailAddress=s@s.com,  \\n\" + \"   IncludeInEmails=false \\n\" + \"}, \\n\" + \"{  \\n\"\n            + \"  LastName=mno,  \\n\" + \"  FirstName=pqr,  \\n\" + \"  EmailAddress=m@m.com,  \\n\" + \"  Number=123,  \\n\"\n            + \"  IncludeInEmails=true \\n\" + \"} \\n\" + \"] \\n\";\n\n    System.out.println(\"Before:\\n\" + jsonString);\n    jsonString = jsonString.replaceAll(\"([\\\\w]+)[ ]*=\", \"\\\"$1\\\" =\"); // to quote before = value\n    jsonString = jsonString.replaceAll(\"=[ ]*([\\\\w@\\\\.]+)\", \"= \\\"$1\\\"\"); // to quote after = value, add special character as needed to the exclusion list in regex\n    jsonString = jsonString.replaceAll(\"=[ ]*\\\"([\\\\d]+)\\\"\", \"= $1\"); // to un-quote decimal value\n    jsonString = jsonString.replaceAll(\"\\\"true\\\"\", \"true\"); // to un-quote boolean\n    jsonString = jsonString.replaceAll(\"\\\"false\\\"\", \"false\"); // to un-quote boolean\n\n    System.out.println(\"===============================\");\n    System.out.println(\"After:\\n\" + jsonString);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5927760,"reputation":601,"user_id":4663187,"accept_rate":71,"display_name":"Karthikeyan Velmurugan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1460107623,"creation_date":1460107623,"answer_id":36496092,"question_id":36493506,"body_markdown":"Use the below code to get the output for your expection,\r\n\r\n&lt;!-- begin snippet: js hide: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    public class jsonTest {\r\n    \t\r\n    \tpublic static void main(String[] args){\r\n\r\n    \t\tString test=&quot;[{ LastName=abc, FirstName=xyz, EmailAddress=s@s.com,IncludeInEmails=false},{ LastName=mno, FirstName=pqr, EmailAddress=m@m.com, IncludeInEmails=true}]&quot;;\r\n    \t\r\n    \t\tString reg= test.replaceAll(&quot;[^\\\\{\\\\},]+&quot;, &quot;\\&quot;$0\\&quot;&quot;);\r\n    \t\t\r\n    \t\tString value=reg.replace(&quot;\\&quot;[\\&quot;{&quot;, &quot;[{&quot;).replace(&quot;=&quot;,&quot;\\&quot;=\\&quot;&quot;).replace(&quot; &quot;,&quot;&quot;).replace(&quot;}\\&quot;]\\&quot;&quot;,&quot;}]&quot;).replace(&quot;\\&quot;true\\&quot;&quot;, &quot;true&quot;).replace(&quot;\\&quot;false\\&quot;&quot;, &quot;false&quot;);\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;value :: &quot;+value);\t\r\n    \t}\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How can i add double quotes to look like json","body":"<p>Use the below code to get the output for your expection,</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>public class jsonTest {\r\n\t\r\n\tpublic static void main(String[] args){\r\n\r\n\t\tString test=\"[{ LastName=abc, FirstName=xyz, EmailAddress=s@s.com,IncludeInEmails=false},{ LastName=mno, FirstName=pqr, EmailAddress=m@m.com, IncludeInEmails=true}]\";\r\n\t\r\n\t\tString reg= test.replaceAll(\"[^\\\\{\\\\},]+\", \"\\\"$0\\\"\");\r\n\t\t\r\n\t\tString value=reg.replace(\"\\\"[\\\"{\", \"[{\").replace(\"=\",\"\\\"=\\\"\").replace(\" \",\"\").replace(\"}\\\"]\\\"\",\"}]\").replace(\"\\\"true\\\"\", \"true\").replace(\"\\\"false\\\"\", \"false\");\r\n\t\t\r\n\t\tSystem.out.println(\"value :: \"+value);\t\r\n\t}\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":19299519,"reputation":11,"user_id":14107781,"display_name":"Gaurav Panchal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681237553,"creation_date":1681237553,"answer_id":75989013,"question_id":36493506,"body_markdown":"        String json = new String(&quot;__json-without-whitespace-and-nextlines__&quot;);\r\n        int n = json.length();\r\n        StringBuilder result = new StringBuilder();\r\n        for(int i=0; i&lt;n; i++){\r\n            char c = json.charAt(i);\r\n            if(c == &#39;=&#39;){\r\n                // add closing quote for key; replace = with :\r\n                result.append(&quot;\\&quot;:&quot;);\r\n                if(json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)// add opening quote for value \r\n                    result.append(&quot;\\&quot;&quot;);\r\n                if(json.charAt(i+1) == &#39;}&#39; || json.charAt(i+1) == &#39;]&#39; || json.charAt(i+1) == &#39;,&#39;)// value empty\r\n                    result.append(&quot;\\&quot;&quot;);\r\n                continue;\r\n            }\r\n            \r\n            if(c == &#39;{&#39; || c == &#39;[&#39; &amp;&amp; (json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)){\r\n                // add opening bracket and then opening quote for key\r\n                result.append(c); \r\n                result.append(&quot;\\&quot;&quot;);\r\n            }\r\n            else if(i &lt; n-1 &amp;&amp; (json.charAt(i+1) == &#39;,&#39; || json.charAt(i+1) == &#39;]&#39; || json.charAt(i+1) == &#39;}&#39;) &amp;&amp; c != &#39;]&#39; &amp;&amp; c != &#39;}&#39;){\r\n                // add closing quote for value\r\n                result.append(c); \r\n                result.append(&quot;\\&quot;&quot;);\r\n            }\r\n            else if(c == &#39;,&#39; &amp;&amp; json.charAt(i+1) != &#39;{&#39; &amp;&amp; json.charAt(i+1) != &#39;[&#39;)\r\n                result.append(&quot;,\\&quot;&quot;);\r\n            else result.append(c); \r\n            \r\n            \r\n        }\r\n        System.out.println(result);\r\n    ","title":"How can i add double quotes to look like json","body":"<pre><code>    String json = new String(&quot;__json-without-whitespace-and-nextlines__&quot;);\n    int n = json.length();\n    StringBuilder result = new StringBuilder();\n    for(int i=0; i&lt;n; i++){\n        char c = json.charAt(i);\n        if(c == '='){\n            // add closing quote for key; replace = with :\n            result.append(&quot;\\&quot;:&quot;);\n            if(json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')// add opening quote for value \n                result.append(&quot;\\&quot;&quot;);\n            if(json.charAt(i+1) == '}' || json.charAt(i+1) == ']' || json.charAt(i+1) == ',')// value empty\n                result.append(&quot;\\&quot;&quot;);\n            continue;\n        }\n        \n        if(c == '{' || c == '[' &amp;&amp; (json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')){\n            // add opening bracket and then opening quote for key\n            result.append(c); \n            result.append(&quot;\\&quot;&quot;);\n        }\n        else if(i &lt; n-1 &amp;&amp; (json.charAt(i+1) == ',' || json.charAt(i+1) == ']' || json.charAt(i+1) == '}') &amp;&amp; c != ']' &amp;&amp; c != '}'){\n            // add closing quote for value\n            result.append(c); \n            result.append(&quot;\\&quot;&quot;);\n        }\n        else if(c == ',' &amp;&amp; json.charAt(i+1) != '{' &amp;&amp; json.charAt(i+1) != '[')\n            result.append(&quot;,\\&quot;&quot;);\n        else result.append(c); \n        \n        \n    }\n    System.out.println(result);\n</code></pre>\n"}],"owner":{"account_id":6851943,"reputation":1557,"user_id":5268867,"accept_rate":21,"display_name":"Musaddique S"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12913,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":36495345,"answer_count":5,"score":7,"last_activity_date":1681237553,"creation_date":1460098983,"question_id":36493506,"body_markdown":"i am having below string but i want to add double quotes in it to look like json\r\n\r\n    [\r\n    {\r\n       LastName=abc, \r\n       FirstName=xyz, \r\n       EmailAddress=s@s.com, \r\n       IncludeInEmails=false\r\n    },\r\n    { \r\n      LastName=mno, \r\n      FirstName=pqr, \r\n      EmailAddress=m@m.com, \r\n      IncludeInEmails=true\r\n    }\r\n    ]\r\n\r\ni want below output. \r\n\r\n    [\r\n        {\r\n           &quot;LastName&quot;=&quot;abc&quot;, \r\n           &quot;FirstName&quot;=&quot;xyz&quot;, \r\n           &quot;EmailAddress&quot;=&quot;s@s.com&quot;, \r\n           &quot;IncludeInEmails&quot;=false\r\n        },\r\n        { \r\n          &quot;LastName&quot;=&quot;mno&quot;, \r\n          &quot;FirstName&quot;=&quot;pqr&quot;, \r\n          &quot;EmailAddress&quot;=&quot;m@m.com&quot;, \r\n          &quot;IncludeInEmails&quot;=true\r\n        }\r\n        ]\r\n\r\ni have tried some string regex. but didn&#39;t got. could any one please help.\r\n\r\n    String text= jsonString.replaceAll(&quot;[^\\\\{\\\\},]+&quot;, &quot;\\&quot;$0\\&quot;&quot;);\r\n    System.out.println(text);\r\n\r\nthanks","title":"How can i add double quotes to look like json","body":"<p>i am having below string but i want to add double quotes in it to look like json</p>\n\n<pre><code>[\n{\n   LastName=abc, \n   FirstName=xyz, \n   EmailAddress=s@s.com, \n   IncludeInEmails=false\n},\n{ \n  LastName=mno, \n  FirstName=pqr, \n  EmailAddress=m@m.com, \n  IncludeInEmails=true\n}\n]\n</code></pre>\n\n<p>i want below output. </p>\n\n<pre><code>[\n    {\n       \"LastName\"=\"abc\", \n       \"FirstName\"=\"xyz\", \n       \"EmailAddress\"=\"s@s.com\", \n       \"IncludeInEmails\"=false\n    },\n    { \n      \"LastName\"=\"mno\", \n      \"FirstName\"=\"pqr\", \n      \"EmailAddress\"=\"m@m.com\", \n      \"IncludeInEmails\"=true\n    }\n    ]\n</code></pre>\n\n<p>i have tried some string regex. but didn't got. could any one please help.</p>\n\n<pre><code>String text= jsonString.replaceAll(\"[^\\\\{\\\\},]+\", \"\\\"$0\\\"\");\nSystem.out.println(text);\n</code></pre>\n\n<p>thanks</p>\n"},{"tags":["java","spring-boot","rest","asynchronous","spring-async"],"owner":{"account_id":1096964,"reputation":3884,"user_id":1090360,"accept_rate":84,"display_name":"JackTheKnife"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681237495,"creation_date":1681237495,"question_id":75989000,"body_markdown":"I&#39;m unsure which approach I should take for an async REST API which will call another API and wait for results and respond to the original requester:\r\n\r\na) annotate service with `@Async` and use with `CompletableFuture`?\r\n\r\nor\r\n\r\nb) use `WebAsyncTaks` with async executor?\r\n\r\nFor now, I have a &quot;dirty&quot; way which simply implements `Runnable` on a service and then run the service in a separate thread as\r\n\r\n```\r\nMyService service = new MyService(someObject, url);\r\n\r\nThread t = new Thread(service);\r\nt.start();\r\n```","title":"Spring Boot @Async annotation w/ CompletableFuture on service or WebAsyncTask for async REST API to call another API","body":"<p>I'm unsure which approach I should take for an async REST API which will call another API and wait for results and respond to the original requester:</p>\n<p>a) annotate service with <code>@Async</code> and use with <code>CompletableFuture</code>?</p>\n<p>or</p>\n<p>b) use <code>WebAsyncTaks</code> with async executor?</p>\n<p>For now, I have a &quot;dirty&quot; way which simply implements <code>Runnable</code> on a service and then run the service in a separate thread as</p>\n<pre><code>MyService service = new MyService(someObject, url);\n\nThread t = new Thread(service);\nt.start();\n</code></pre>\n"},{"tags":["java","spring-boot","junit"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681108492,"post_id":75971449,"comment_id":133999454,"body_markdown":"Your error isn&#39;t related to Kafka. The stacktrace says `IDataRepository` implementation cannot be autowired","body":"Your error isn&#39;t related to Kafka. The stacktrace says <code>IDataRepository</code> implementation cannot be autowired"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681150498,"post_id":75971449,"comment_id":134006959,"body_markdown":"You define the bean with the name in the exception","body":"You define the bean with the name in the exception"},{"owner":{"account_id":27826790,"reputation":19,"user_id":21246050,"display_name":"ncisco3200"},"score":0,"creation_date":1681237047,"post_id":75971449,"comment_id":134023206,"body_markdown":"&quot;newAdapter&quot; is not a bean, it is a listener adapter class to consume from a kafka topic which is why I do not understand this error","body":"&quot;newAdapter&quot; is not a bean, it is a listener adapter class to consume from a kafka topic which is why I do not understand this error"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1681240082,"post_id":75971449,"comment_id":134023838,"body_markdown":"The error is saying it&#39;s looking for an instance of IDataRepository interface, injected into your ListenerAdapter class... But it cannot find one. Since you&#39;ve not shared your code as a [mcve], it&#39;s not clear how much we can help you further","body":"The error is saying it&#39;s looking for an instance of IDataRepository interface, injected into your ListenerAdapter class... But it cannot find one. Since you&#39;ve not shared your code as a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, it&#39;s not clear how much we can help you further"}],"owner":{"account_id":27826790,"reputation":19,"user_id":21246050,"display_name":"ncisco3200"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1681237351,"creation_date":1681054997,"question_id":75971449,"body_markdown":"I&#39;ve edited an active kafka application to consume from a new topic. I&#39;m able to run the application without any errors after adding new configs such as methods, classes, new adapter file for new topic, etc. But when running the Adapter Test class I get these error with these two most notable error is the app is interpreting all the listener adapter classes as @beans:\r\n\r\n\r\n\r\n&gt; Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ListenerAdapter&#39; defined in file [C:\\Users\\Me\\Application\\target\\classes\\com\\stage\\schema\\streaming\\processor\\adapter\\messaging\\ListenerAdapter.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.fmrco.cde.streaming.processor.adapter.database.IDataRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\n&gt; Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.stage.schema.streaming.processor.adapter.database.IDataRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext\r\n\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\r\n\tat org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;ListenerAdapter&#39; defined in file [C:\\Users\\Me\\Application\\target\\classes\\com\\stage\\cde\\streaming\\processor\\adapter\\messaging\\ListenerAdapter.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.stage.cde.streaming.processor.adapter.database.IDataRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\n\tat org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\r\n\t... 27 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.stage.cde.streaming.processor.adapter.database.IDataRepository&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\r\n\tat org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 45 more\r\n```\r\n","title":"NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.fmrco.cde.streaming.processor.adapter.database.IDataRepository","body":"<p>I've edited an active kafka application to consume from a new topic. I'm able to run the application without any errors after adding new configs such as methods, classes, new adapter file for new topic, etc. But when running the Adapter Test class I get these error with these two most notable error is the app is interpreting all the listener adapter classes as @beans:</p>\n<blockquote>\n<p>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ListenerAdapter' defined in file [C:\\Users\\Me\\Application\\target\\classes\\com\\stage\\schema\\streaming\\processor\\adapter\\messaging\\ListenerAdapter.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.fmrco.cde.streaming.processor.adapter.database.IDataRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}</p>\n</blockquote>\n<blockquote>\n<p>Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.stage.schema.streaming.processor.adapter.database.IDataRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}</p>\n</blockquote>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext\n\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:132)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:124)\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:190)\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:132)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:227)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:289)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:291)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:246)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)\n    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:69)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'ListenerAdapter' defined in file [C:\\Users\\Me\\Application\\target\\classes\\com\\stage\\cde\\streaming\\processor\\adapter\\messaging\\ListenerAdapter.class]: Unsatisfied dependency expressed through constructor parameter 0; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.stage.cde.streaming.processor.adapter.database.IDataRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:229)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1372)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1222)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:953)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:132)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:99)\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:124)\n    ... 27 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.stage.cde.streaming.processor.adapter.database.IDataRepository' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1799)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1355)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1309)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:887)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 45 more\n</code></pre>\n"},{"tags":["java","unit-testing","assertj"],"comments":[{"owner":{"account_id":1069912,"reputation":5754,"user_id":1069454,"display_name":"Sebastien"},"score":0,"creation_date":1579603040,"post_id":59839076,"comment_id":105812645,"body_markdown":"I&#39;m not sure which JSONObject class you are using. It would be better to provide the full class name including package so that we can help you more precisely. \nIn any case you should consider using JsonUnit to do assertj assertions on json content:\nhttps://github.com/lukas-krecan/JsonUnit","body":"I&#39;m not sure which JSONObject class you are using. It would be better to provide the full class name including package so that we can help you more precisely.  In any case you should consider using JsonUnit to do assertj assertions on json content: <a href=\"https://github.com/lukas-krecan/JsonUnit\" rel=\"nofollow noreferrer\">github.com/lukas-krecan/JsonUnit</a>"},{"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"score":0,"creation_date":1579603376,"post_id":59839076,"comment_id":105812848,"body_markdown":"Apart from what @Sebastien has mentioned, can you also mention which library this ```assertThat()``` method is in? Can&#39;t see this in JUnit 3.8.1.","body":"Apart from what @Sebastien has mentioned, can you also mention which library this <code>assertThat()</code> method is in? Can&#39;t see this in JUnit 3.8.1."},{"owner":{"account_id":16527785,"reputation":432,"user_id":11941970,"display_name":"parrotjack"},"score":0,"creation_date":1579603569,"post_id":59839076,"comment_id":105812957,"body_markdown":"My JSONObject class from ```org.json.JSONObject```","body":"My JSONObject class from <code>org.json.JSONObject</code>"},{"owner":{"account_id":16527785,"reputation":432,"user_id":11941970,"display_name":"parrotjack"},"score":0,"creation_date":1579603670,"post_id":59839076,"comment_id":105813001,"body_markdown":"@SreeKumar i use ```org.assertj.core.api.Assertions``` API","body":"@SreeKumar i use <code>org.assertj.core.api.Assertions</code> API"}],"answers":[{"tags":[],"owner":{"account_id":3262328,"reputation":2135,"user_id":2747642,"display_name":"Sree Kumar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1579603964,"creation_date":1579603964,"answer_id":59839496,"question_id":59839076,"body_markdown":"I think it has to do with the fact the ```JSONObject``` is like a map which has key-value pairs, while AssertJ expects Java bean-style objects to check if a property exists. I understood this from the document at [https://joel-costigliola.github.io/assertj/core/api/org/assertj/core/api/AbstractObjectAssert.html#hasFieldOrProperty(java.lang.String)](https://joel-costigliola.github.io/assertj/core/api/org/assertj/core/api/AbstractObjectAssert.html#hasFieldOrProperty(java.lang.String)). Hope I am looking at the right place.\r\n\r\nI mean to say that a map or ```JSONObject``` doesn&#39;t have fields declared in it for AssertJ to look for.\r\n\r\nYou may use ```JSONObject.has( String key )``` instead, I think.","title":"AssertJ JSON property check","body":"<p>I think it has to do with the fact the <code>JSONObject</code> is like a map which has key-value pairs, while AssertJ expects Java bean-style objects to check if a property exists. I understood this from the document at <a href=\"https://joel-costigliola.github.io/assertj/core/api/org/assertj/core/api/AbstractObjectAssert.html#hasFieldOrProperty(java.lang.String)\" rel=\"nofollow noreferrer\">https://joel-costigliola.github.io/assertj/core/api/org/assertj/core/api/AbstractObjectAssert.html#hasFieldOrProperty(java.lang.String)</a>. Hope I am looking at the right place.</p>\n\n<p>I mean to say that a map or <code>JSONObject</code> doesn't have fields declared in it for AssertJ to look for.</p>\n\n<p>You may use <code>JSONObject.has( String key )</code> instead, I think.</p>\n"},{"tags":[],"owner":{"account_id":1407336,"reputation":6523,"user_id":1348834,"display_name":"Joel Costigliola"},"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1593989726,"creation_date":1579646101,"answer_id":59850207,"question_id":59839076,"body_markdown":"If you want to do any serious assertions on JSON object, I would recommend JsonUnit https://github.com/lukas-krecan/JsonUnit","title":"AssertJ JSON property check","body":"<p>If you want to do any serious assertions on JSON object, I would recommend JsonUnit <a href=\"https://github.com/lukas-krecan/JsonUnit\" rel=\"noreferrer\">https://github.com/lukas-krecan/JsonUnit</a></p>\n"},{"tags":[],"owner":{"account_id":7615640,"reputation":622,"user_id":5775158,"accept_rate":37,"display_name":"Testilla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595646796,"creation_date":1595646796,"answer_id":63083932,"question_id":59839076,"body_markdown":"Fist, you need to traverse the keysets (nodes) using the `map` class, then verify if the keyset contains the particular node you are looking for.\r\n\r\n    Map&lt;String, Object&gt; read = JsonPath.read(JSONObject, &quot;$&quot;);\r\n    assertThat(read.keySet()).contains(&quot;name&quot;);","title":"AssertJ JSON property check","body":"<p>Fist, you need to traverse the keysets (nodes) using the <code>map</code> class, then verify if the keyset contains the particular node you are looking for.</p>\n<pre><code>Map&lt;String, Object&gt; read = JsonPath.read(JSONObject, &quot;$&quot;);\nassertThat(read.keySet()).contains(&quot;name&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7232746,"reputation":143,"user_id":5518990,"display_name":"Marious"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1681237134,"creation_date":1663639719,"answer_id":73780936,"question_id":59839076,"body_markdown":"If you use SpringBoot you can use [the custom impl. for Assertj][1]\r\n\r\n```Java\r\n    private final BasicJsonTester json = new BasicJsonTester(getClass());\r\n\r\n    @Test\r\n    void testIfHasPropertyName() {\r\n        final JSONObject jsonObject = new JSONObject(&quot;{\\n&quot; +\r\n                &quot;\\&quot;name\\&quot;:\\&quot;testName\\&quot;,\\n&quot; +\r\n                &quot;\\&quot;age\\&quot;:\\&quot;23\\&quot;\\n&quot; +\r\n                &quot;}&quot;);\r\n        \r\n        assertThat(json.from(jsonObject.toString())).hasJsonPath(&quot;$.name&quot;);\r\n    }\r\n\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/json/BasicJsonTester.html","title":"AssertJ JSON property check","body":"<p>If you use SpringBoot you can use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/test/json/BasicJsonTester.html\" rel=\"nofollow noreferrer\">the custom impl. for Assertj</a></p>\n<pre><code>    private final BasicJsonTester json = new BasicJsonTester(getClass());\n\n    @Test\n    void testIfHasPropertyName() {\n        final JSONObject jsonObject = new JSONObject(&quot;{\\n&quot; +\n                &quot;\\&quot;name\\&quot;:\\&quot;testName\\&quot;,\\n&quot; +\n                &quot;\\&quot;age\\&quot;:\\&quot;23\\&quot;\\n&quot; +\n                &quot;}&quot;);\n        \n        assertThat(json.from(jsonObject.toString())).hasJsonPath(&quot;$.name&quot;);\n    }\n\n</code></pre>\n"}],"owner":{"account_id":16527785,"reputation":432,"user_id":11941970,"display_name":"parrotjack"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14173,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":59839496,"answer_count":4,"score":6,"last_activity_date":1681237134,"creation_date":1579602545,"question_id":59839076,"body_markdown":"I have JSONObject instance which contains some property,\r\n\r\n```\r\n{\r\n&quot;name&quot;:&quot;testName&quot;,\r\n&quot;age&quot;:&quot;23&quot;\r\n}\r\n```\r\n\r\ni use the following assert, but it fails. Is this correct approach to test JSON in assertj.\r\n\r\n```\r\nassertThat(jsonObject).hasFieldOrProperty(&quot;name&quot;);\r\n```\r\n","title":"AssertJ JSON property check","body":"<p>I have JSONObject instance which contains some property,</p>\n\n<pre><code>{\n\"name\":\"testName\",\n\"age\":\"23\"\n}\n</code></pre>\n\n<p>i use the following assert, but it fails. Is this correct approach to test JSON in assertj.</p>\n\n<pre><code>assertThat(jsonObject).hasFieldOrProperty(\"name\");\n</code></pre>\n"},{"tags":["java","arrays","generics"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1681232753,"post_id":75988421,"comment_id":134022207,"body_markdown":"If you&#39;re doing what I think you&#39;re doing, it&#39;s impossible.  As you say, passing a sub-type of `E` in the `add()` method is going to produce intermittent type errors.  Using `new Object[]` is the correct solution (c.f. Joshua Block *Effective Java*).  Your son&#39;s instructor doesn&#39;t know what they are doing.","body":"If you&#39;re doing what I think you&#39;re doing, it&#39;s impossible.  As you say, passing a sub-type of <code>E</code> in the <code>add()</code> method is going to produce intermittent type errors.  Using <code>new Object[]</code> is the correct solution (c.f. Joshua Block <i>Effective Java</i>).  Your son&#39;s instructor doesn&#39;t know what they are doing."},{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":0,"creation_date":1681233144,"post_id":75988421,"comment_id":134022301,"body_markdown":"You can only add E or children of E, so it is okay. You could use `Arrays.copyOf`.","body":"You can only add E or children of E, so it is okay. You could use <code>Arrays.copyOf</code>."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1681233677,"post_id":75988421,"comment_id":134022415,"body_markdown":"`e.getClass()` yep, that&#39;s a bad idea. `Object[]` it is.","body":"<code>e.getClass()</code> yep, that&#39;s a bad idea. <code>Object[]</code> it is."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":1,"creation_date":1681233838,"post_id":75988421,"comment_id":134022445,"body_markdown":"(not to mention that `e.getClass()` will throw an NPE once in a while :) )","body":"(not to mention that <code>e.getClass()</code> will throw an NPE once in a while :) )"}],"answers":[{"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1681234925,"creation_date":1681233166,"answer_id":75988514,"question_id":75988421,"body_markdown":"A correct solution would be to use `new Object[]` and cast.  If that isn&#39;t what your son&#39;s instructor had in mind then it isn&#39;t possible to solve.  A first pass at a solution:\r\n\r\n    public class ArraySet&lt;E&gt; {\r\n        private E[] array;\r\n        private int size;\r\n        \r\n        public ArraySet(int orig_capacity) {\r\n            array = (E[]) new Object[orig_capacity];\r\n        }\r\n        \r\n        public boolean add(E e) {\r\n          if (array.length == size) {\r\n            array = Arrays.copyOf( array, array.length *2 );\r\n          }\r\n          array[size++] = e;\r\n        }\r\n\r\nNot syntax checked.\r\n","title":"Creating a Java generic array with lazy allocation?","body":"<p>A correct solution would be to use <code>new Object[]</code> and cast.  If that isn't what your son's instructor had in mind then it isn't possible to solve.  A first pass at a solution:</p>\n<pre><code>public class ArraySet&lt;E&gt; {\n    private E[] array;\n    private int size;\n    \n    public ArraySet(int orig_capacity) {\n        array = (E[]) new Object[orig_capacity];\n    }\n    \n    public boolean add(E e) {\n      if (array.length == size) {\n        array = Arrays.copyOf( array, array.length *2 );\n      }\n      array[size++] = e;\n    }\n</code></pre>\n<p>Not syntax checked.</p>\n"},{"tags":[],"owner":{"account_id":3004336,"reputation":454,"user_id":2549134,"display_name":"LSDeva"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1681233624,"creation_date":1681233624,"answer_id":75988557,"question_id":75988421,"body_markdown":"    import java.lang.reflect.Array;\r\n    \r\n    public class ArraySet&lt;E&gt; {\r\n        private E[] array;\r\n        private int size;\r\n        private int capacity;\r\n        private int start_capacity;\r\n        private Class&lt;E&gt; baseclass;\r\n    \r\n        public ArraySet(int orig_capacity) {\r\n            start_capacity = orig_capacity;\r\n        }\r\n    \r\n        public boolean add(E e) {\r\n            if (e == null) {\r\n                throw new IllegalArgumentException(&quot;Null values are not allowed.&quot;);\r\n            }\r\n            if (baseclass == null) {\r\n                baseclass = (Class&lt;E&gt;) e.getClass();\r\n            } else if (!baseclass.isInstance(e)) {\r\n                throw new IllegalArgumentException(&quot;Element type does not match the expected type.&quot;);\r\n            }\r\n    \r\n            if (capacity == size) {\r\n                if (capacity == 0) {\r\n                    capacity = start_capacity;\r\n                    array = (E[]) Array.newInstance(baseclass, capacity);\r\n                } else {\r\n                    capacity *= 2;\r\n                    E[] newarray = (E[]) Array.newInstance(baseclass, capacity);\r\n                    System.arraycopy(array, 0, newarray, 0, size);\r\n                    array = newarray;\r\n                }\r\n            }\r\n            // Add the element to the array...\r\n            array[size++] = e;\r\n            return true;\r\n        }\r\n    }\r\n\r\n","title":"Creating a Java generic array with lazy allocation?","body":"<pre><code>import java.lang.reflect.Array;\n\npublic class ArraySet&lt;E&gt; {\n    private E[] array;\n    private int size;\n    private int capacity;\n    private int start_capacity;\n    private Class&lt;E&gt; baseclass;\n\n    public ArraySet(int orig_capacity) {\n        start_capacity = orig_capacity;\n    }\n\n    public boolean add(E e) {\n        if (e == null) {\n            throw new IllegalArgumentException(&quot;Null values are not allowed.&quot;);\n        }\n        if (baseclass == null) {\n            baseclass = (Class&lt;E&gt;) e.getClass();\n        } else if (!baseclass.isInstance(e)) {\n            throw new IllegalArgumentException(&quot;Element type does not match the expected type.&quot;);\n        }\n\n        if (capacity == size) {\n            if (capacity == 0) {\n                capacity = start_capacity;\n                array = (E[]) Array.newInstance(baseclass, capacity);\n            } else {\n                capacity *= 2;\n                E[] newarray = (E[]) Array.newInstance(baseclass, capacity);\n                System.arraycopy(array, 0, newarray, 0, size);\n                array = newarray;\n            }\n        }\n        // Add the element to the array...\n        array[size++] = e;\n        return true;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89778,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681236904,"creation_date":1681236904,"answer_id":75988928,"question_id":75988421,"body_markdown":"Your solution doesn&#39;t work. Here, trivial test case to make it fail:\r\n\r\n```\r\nvar set = new ArraySet&lt;Number&gt;();\r\nset.add(5); // adds an integer\r\nset.add(10.0); // adds a double\r\n```\r\n\r\nThis code should be completely fine. Both integers and doubles are, after all, subtypes of number. But that will fail, with an `ArrayStoreException`, because you end up making a `Integer[]` under the hood which will throw that exception when you try to shove a Double in there.\r\n\r\n&gt; This is ridiculously hard.\r\n\r\nThat&#39;s a really funny way of saying &quot;this is impossible&quot;. Because it is __impossible__, not &#39;hard&#39;. Unless you classify impossible as a particularly egregious case of &#39;hard&#39;, which, I guess, why not :)\r\n\r\nThe reason it is impossible is that java erases this stuff. If what you wanted _was_ possible, then someone would have written a reifiable version of ArrayList 15 years ago (Reifiable is, amongst other things: You can ask the ArrayList at runtime what its component type is).\r\n\r\n## Conclusion\r\n\r\nYou / your boy misunderstood the assignment. That, or, the teacher is clueless. It&#39;s possible.\r\n\r\n## So what should you do?\r\n\r\nThe java community at large knows exactly how to do this, and it is __with an Object array__. Here is [the source code of `java.util.ArrayList`](https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/share/classes/java/util/ArrayList.java) which is:\r\n\r\n* Exactly the functionality you seem to have been asked to implement.\r\n* Is, outside of `java.lang`, __the most used java class on the planet__.\r\n* As a general rule, the openjdk team knows what they are doing.\r\n\r\n__They use `Object[]`__. Because it&#39;s the right way to do this. `E[]`? Fundamentally wrong - it&#39;s not possible to make those, at best you can ugly-cast an Object[] to it, but it&#39;s _still an Object[] - just cast to a type it really is not, with the compiler warnings that go along with doing stuff that doesn&#39;t really make sense_.\r\n\r\n## What does the assignment want you to do?\r\n\r\nWho knows - as I said, you misunderstood, or the teacher is clueless / this is one of those socratesian projects whose aim is for you to learn that this doesn&#39;t work, maybe.\r\n\r\nOne option, but this is strictly worse, it has no benefits and quite a few downsides, is to __require__ the code that constructs one of these `ArraySet` objects to pass in the type. It looks like this:\r\n\r\n```\r\nclass ArraySet&lt;E&gt; {\r\n  E[] data;\r\n\r\n  public ArraySet(Class&lt;E&gt; type, int capacity) {\r\n    this.data = Array.newInstance(type, capacity);\r\n  }\r\n\r\n  // ....\r\n}\r\n```\r\n\r\nBut this has quite a few downsides:\r\n\r\n* The caller now needs to explicitly pass in stuff. They HAVE to write:\r\n\r\n```\r\nArraySet&lt;String&gt; myStrings = new ArraySet&lt;&gt;(String.class, 20);\r\n```\r\n\r\n... for absolutely no good reason whatsoever. This code isn&#39;t any faster and it&#39;s not any &#39;safer&#39; unless the user of your library is in the habit of intentionally ignoring compiler warnings. Which gets us to a simple adage: Ooooh, trust me, programming is hard and morons are incredibly inventive. You cannot stop an idiot from creating bugs in this way. This is a _very_ counterproductive lesson if that is the stated reason for trying to do it this way.\r\n\r\n* `Class&lt;E&gt;` cannot, itself, convey generics. If you want to create an `ArraySet&lt;String&gt;` that doesn&#39;t matter much. But imagine you are trying to make an `ArraySet&lt;FileSystem&lt;Path&gt;&gt;` for example. That simply doesn&#39;t work. `FileSystem&lt;Path&gt;.class` isn&#39;t a thing (class objects cannot convey generics).\r\n\r\nSo, you&#39;ve made it harder to use your arrayset, and completely eliminated a sizable batch of use cases (all cases where the element type itself also contains generics), for absolutely no relevant gain of any sort.\r\n\r\nYou now have a strong appeal to authority (openjdk team itself uses an Object[]), as well as 2 strong objective reasons (needlessly complicated to call the constructor, eliminates significant use cases for no gain).\r\n\r\nIf this teacher explains their bizarre thoughts (or, the assignment was misunderstood), if you could report back to sate my curiosity I would appreciate it :)","title":"Creating a Java generic array with lazy allocation?","body":"<p>Your solution doesn't work. Here, trivial test case to make it fail:</p>\n<pre><code>var set = new ArraySet&lt;Number&gt;();\nset.add(5); // adds an integer\nset.add(10.0); // adds a double\n</code></pre>\n<p>This code should be completely fine. Both integers and doubles are, after all, subtypes of number. But that will fail, with an <code>ArrayStoreException</code>, because you end up making a <code>Integer[]</code> under the hood which will throw that exception when you try to shove a Double in there.</p>\n<blockquote>\n<p>This is ridiculously hard.</p>\n</blockquote>\n<p>That's a really funny way of saying &quot;this is impossible&quot;. Because it is <strong>impossible</strong>, not 'hard'. Unless you classify impossible as a particularly egregious case of 'hard', which, I guess, why not :)</p>\n<p>The reason it is impossible is that java erases this stuff. If what you wanted <em>was</em> possible, then someone would have written a reifiable version of ArrayList 15 years ago (Reifiable is, amongst other things: You can ask the ArrayList at runtime what its component type is).</p>\n<h2>Conclusion</h2>\n<p>You / your boy misunderstood the assignment. That, or, the teacher is clueless. It's possible.</p>\n<h2>So what should you do?</h2>\n<p>The java community at large knows exactly how to do this, and it is <strong>with an Object array</strong>. Here is <a href=\"https://github.com/AdoptOpenJDK/openjdk-jdk11/blob/master/src/java.base/share/classes/java/util/ArrayList.java\" rel=\"nofollow noreferrer\">the source code of <code>java.util.ArrayList</code></a> which is:</p>\n<ul>\n<li>Exactly the functionality you seem to have been asked to implement.</li>\n<li>Is, outside of <code>java.lang</code>, <strong>the most used java class on the planet</strong>.</li>\n<li>As a general rule, the openjdk team knows what they are doing.</li>\n</ul>\n<p><strong>They use <code>Object[]</code></strong>. Because it's the right way to do this. <code>E[]</code>? Fundamentally wrong - it's not possible to make those, at best you can ugly-cast an Object[] to it, but it's <em>still an Object[] - just cast to a type it really is not, with the compiler warnings that go along with doing stuff that doesn't really make sense</em>.</p>\n<h2>What does the assignment want you to do?</h2>\n<p>Who knows - as I said, you misunderstood, or the teacher is clueless / this is one of those socratesian projects whose aim is for you to learn that this doesn't work, maybe.</p>\n<p>One option, but this is strictly worse, it has no benefits and quite a few downsides, is to <strong>require</strong> the code that constructs one of these <code>ArraySet</code> objects to pass in the type. It looks like this:</p>\n<pre><code>class ArraySet&lt;E&gt; {\n  E[] data;\n\n  public ArraySet(Class&lt;E&gt; type, int capacity) {\n    this.data = Array.newInstance(type, capacity);\n  }\n\n  // ....\n}\n</code></pre>\n<p>But this has quite a few downsides:</p>\n<ul>\n<li>The caller now needs to explicitly pass in stuff. They HAVE to write:</li>\n</ul>\n<pre><code>ArraySet&lt;String&gt; myStrings = new ArraySet&lt;&gt;(String.class, 20);\n</code></pre>\n<p>... for absolutely no good reason whatsoever. This code isn't any faster and it's not any 'safer' unless the user of your library is in the habit of intentionally ignoring compiler warnings. Which gets us to a simple adage: Ooooh, trust me, programming is hard and morons are incredibly inventive. You cannot stop an idiot from creating bugs in this way. This is a <em>very</em> counterproductive lesson if that is the stated reason for trying to do it this way.</p>\n<ul>\n<li><code>Class&lt;E&gt;</code> cannot, itself, convey generics. If you want to create an <code>ArraySet&lt;String&gt;</code> that doesn't matter much. But imagine you are trying to make an <code>ArraySet&lt;FileSystem&lt;Path&gt;&gt;</code> for example. That simply doesn't work. <code>FileSystem&lt;Path&gt;.class</code> isn't a thing (class objects cannot convey generics).</li>\n</ul>\n<p>So, you've made it harder to use your arrayset, and completely eliminated a sizable batch of use cases (all cases where the element type itself also contains generics), for absolutely no relevant gain of any sort.</p>\n<p>You now have a strong appeal to authority (openjdk team itself uses an Object[]), as well as 2 strong objective reasons (needlessly complicated to call the constructor, eliminates significant use cases for no gain).</p>\n<p>If this teacher explains their bizarre thoughts (or, the assignment was misunderstood), if you could report back to sate my curiosity I would appreciate it :)</p>\n"}],"owner":{"account_id":28277235,"reputation":1,"user_id":21619515,"display_name":"smallmeter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1681236904,"creation_date":1681232367,"question_id":75988421,"body_markdown":"My son got a programming problem to create a generic array of things in Java.  You can only pass the initial capacity in as a parameter to the constructor.  You can&#39;t use an Object array.  This is ridiculously hard.  The question at https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java#530289 has some answers, but none of them work and I have a new account and can&#39;t comment on that thread.\r\n\r\nThe solution we came up with was to do lazy allocation of the array.  So you have:\r\n\r\n```\r\npublic class ArraySet&lt;E&gt; {\r\n    private E[] array;\r\n    private int size;\r\n    private int capacity;\r\n    private int start_capacity;\r\n    private Class&lt;E&gt; baseclass;\r\n\t\r\n    public ArraySet(int orig_capacity) {\r\n\t    start_capacity = orig_capacity;\r\n    }\r\n\t\r\n    public boolean add(E e) {\r\n\tif (capacity == size) {\r\n\t    if (capacity == 0) {\r\n\t\t    capacity = start_capacity;\r\n\t\t    array = (E[]) Array.newInstance(e.getClass(), capacity);\r\n\t    } else {\r\n\t\t    capacity *= 2;\r\n\t\t    E[] newarray = (E[]) Array.newInstance(e.getClass(),\r\n\t\t\t\t\t\t       capacity);\r\n\t\t    System.arraycopy(array, 0, newarray, 0, size);\r\n\t\t    array = newarray;\r\n\t    }\r\n\t}\r\n\t// Add the element ot the array...\r\n```\r\nThe only trouble I can see with this is if you pass in different types to add() you will get bad results.  But other than this, I can&#39;t see a way to do it.\r\n\r\nI suppose I could save off the class of &quot;e&quot; and make sure anything added is that class.\r\n\r\nIs there anything else I am missing?  This seems too simple that everyone in the other thread missed it, but it seems to work.","title":"Creating a Java generic array with lazy allocation?","body":"<p>My son got a programming problem to create a generic array of things in Java.  You can only pass the initial capacity in as a parameter to the constructor.  You can't use an Object array.  This is ridiculously hard.  The question at <a href=\"https://stackoverflow.com/questions/529085/how-to-create-a-generic-array-in-java#530289\">How to create a generic array in Java?</a> has some answers, but none of them work and I have a new account and can't comment on that thread.</p>\n<p>The solution we came up with was to do lazy allocation of the array.  So you have:</p>\n<pre><code>public class ArraySet&lt;E&gt; {\n    private E[] array;\n    private int size;\n    private int capacity;\n    private int start_capacity;\n    private Class&lt;E&gt; baseclass;\n    \n    public ArraySet(int orig_capacity) {\n        start_capacity = orig_capacity;\n    }\n    \n    public boolean add(E e) {\n    if (capacity == size) {\n        if (capacity == 0) {\n            capacity = start_capacity;\n            array = (E[]) Array.newInstance(e.getClass(), capacity);\n        } else {\n            capacity *= 2;\n            E[] newarray = (E[]) Array.newInstance(e.getClass(),\n                               capacity);\n            System.arraycopy(array, 0, newarray, 0, size);\n            array = newarray;\n        }\n    }\n    // Add the element ot the array...\n</code></pre>\n<p>The only trouble I can see with this is if you pass in different types to add() you will get bad results.  But other than this, I can't see a way to do it.</p>\n<p>I suppose I could save off the class of &quot;e&quot; and make sure anything added is that class.</p>\n<p>Is there anything else I am missing?  This seems too simple that everyone in the other thread missed it, but it seems to work.</p>\n"},{"tags":["java","sql","sql-injection"],"comments":[{"owner":{"account_id":7034556,"reputation":12325,"user_id":5389127,"display_name":"Ga&#235;l J"},"score":0,"creation_date":1676407444,"post_id":75453049,"comment_id":133130204,"body_markdown":"How can a fixed SQL query (first one you show) be vulnerable to SQL injection? Or maybe I didn&#39;t understandwhar you&#39;re saying.","body":"How can a fixed SQL query (first one you show) be vulnerable to SQL injection? Or maybe I didn&#39;t understandwhar you&#39;re saying."},{"owner":{"account_id":26763665,"reputation":3,"user_id":20361188,"display_name":"sandy"},"score":0,"creation_date":1676407666,"post_id":75453049,"comment_id":133130269,"body_markdown":"yes, first one is vulnerable to SQL injection. I tried by using NamedParameterJdbcTemplate to solve SQL injection but its not giving correct results.","body":"yes, first one is vulnerable to SQL injection. I tried by using NamedParameterJdbcTemplate to solve SQL injection but its not giving correct results."},{"owner":{"account_id":252892,"reputation":2581,"user_id":531232,"accept_rate":67,"display_name":"chris"},"score":2,"creation_date":1676407724,"post_id":75453049,"comment_id":133130283,"body_markdown":"Parameterized statements fix SQL injection only if the query is actually generated dynamically, which your original query is not. So your code analysis tool appears to be wrong.","body":"Parameterized statements fix SQL injection only if the query is actually generated dynamically, which your original query is not. So your code analysis tool appears to be wrong."},{"owner":{"account_id":252892,"reputation":2581,"user_id":531232,"accept_rate":67,"display_name":"chris"},"score":0,"creation_date":1676408819,"post_id":75453049,"comment_id":133130571,"body_markdown":"What SQL dialect are you using? In some SQL dialects, user and / or ID might be keywords. This could be related to the - presumably misleading - warning you are getting. You can escape identifiers that might be confused with keywords, but the exact syntax depends on the DBMS you are using. SQL Server: Square brackets (e.g.   `[user]`, `[ID]`); MySQL: Backticks (e.g. \\`user\\`,  \\`ID\\`), PostgreSQL: Double quotes (e.g. `&quot;user&quot;`, `&quot;ID&quot;`), ...","body":"What SQL dialect are you using? In some SQL dialects, user and / or ID might be keywords. This could be related to the - presumably misleading - warning you are getting. You can escape identifiers that might be confused with keywords, but the exact syntax depends on the DBMS you are using. SQL Server: Square brackets (e.g.   <code>[user]</code>, <code>[ID]</code>); MySQL: Backticks (e.g. `user`,  `ID`), PostgreSQL: Double quotes (e.g. <code>&quot;user&quot;</code>, <code>&quot;ID&quot;</code>), ..."},{"owner":{"account_id":26763665,"reputation":3,"user_id":20361188,"display_name":"sandy"},"score":0,"creation_date":1676410201,"post_id":75453049,"comment_id":133130909,"body_markdown":"I updated the query with different table name and column  name here. I am using different table and column in my project","body":"I updated the query with different table name and column  name here. I am using different table and column in my project"}],"answers":[{"tags":[],"owner":{"account_id":9630238,"reputation":739,"user_id":7184001,"display_name":"Egret"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676664157,"creation_date":1676664157,"answer_id":75488781,"question_id":75453049,"body_markdown":"Seems to be using the Spring [NamedParameterJdbcTemplate][1] - as folks have pointed out, this seems to be using parameterized queries, which should be safe.  \r\n\r\nIt&#39;s possible that Tenacity is getting confused because the named parameter is the same as the column - and it believes that you are using a named parameter in the order by clause (which would be a potential SQL injection).  Try changing the name of the parameter to something that&#39;s not a column name.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html","title":"SQL Injection jdbcTemplate","body":"<p>Seems to be using the Spring <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/namedparam/NamedParameterJdbcTemplate.html\" rel=\"nofollow noreferrer\">NamedParameterJdbcTemplate</a> - as folks have pointed out, this seems to be using parameterized queries, which should be safe.</p>\n<p>It's possible that Tenacity is getting confused because the named parameter is the same as the column - and it believes that you are using a named parameter in the order by clause (which would be a potential SQL injection).  Try changing the name of the parameter to something that's not a column name.</p>\n"}],"owner":{"account_id":26763665,"reputation":3,"user_id":20361188,"display_name":"sandy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":728,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1681236768,"creation_date":1676407099,"question_id":75453049,"body_markdown":"`select ID from USER where ID is not null order by ID`\r\n\r\nTenacity is throwing SQl injection as high vulnerability.\r\n\r\n\r\n\r\nI tried to resolve as follows :\r\n\r\n```java\r\nString sql = &quot;select ID from user where :id is not null order by ID&quot;;\r\nNamedParameterJdbcTemplate jdbcNamesTpl = new NamedParameterJdbcTemplate(this.jdbcTemplate);\r\nMapSqlParameterSource parameters = new MapSqlParameterSource();\r\nparameters.addValue(&quot;id&quot;, &quot;ID&quot;);\r\njdbcNamesTpl.query(sql,parameters,mapper);\r\n```\r\n\r\nBut I am getting all records along with null values. Anyone share thoughts or any suggestion to solve ? ","title":"SQL Injection jdbcTemplate","body":"<p><code>select ID from USER where ID is not null order by ID</code></p>\n<p>Tenacity is throwing SQl injection as high vulnerability.</p>\n<p>I tried to resolve as follows :</p>\n<pre class=\"lang-java prettyprint-override\"><code>String sql = &quot;select ID from user where :id is not null order by ID&quot;;\nNamedParameterJdbcTemplate jdbcNamesTpl = new NamedParameterJdbcTemplate(this.jdbcTemplate);\nMapSqlParameterSource parameters = new MapSqlParameterSource();\nparameters.addValue(&quot;id&quot;, &quot;ID&quot;);\njdbcNamesTpl.query(sql,parameters,mapper);\n</code></pre>\n<p>But I am getting all records along with null values. Anyone share thoughts or any suggestion to solve ?</p>\n"},{"tags":["java","binary-search"],"answers":[{"tags":[],"owner":{"account_id":15138451,"reputation":460,"user_id":12083015,"display_name":"Erwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680929374,"creation_date":1680929374,"answer_id":75963362,"question_id":75962597,"body_markdown":"try this,\r\n\r\n    public static int findLastOccurrenceDescending(double[] arr, double x, int left, int right) {\r\n        if (left &gt; right) {\r\n            return -1;\r\n        }\r\n\r\n        int mid = (left + right) / 2;\r\n\r\n        if ((mid == 0 || arr[mid - 1] &gt; x) &amp;&amp; arr[mid] == x) {\r\n            return mid;\r\n        } else if (arr[mid] &gt; x) {\r\n            return findLastOccurrenceDescending(arr, x, mid + 1, right);\r\n        } else {\r\n            return findLastOccurrenceDescending(arr, x, left, mid - 1);\r\n        }\r\n    }","title":"Why do I get a negative value when I try to read an array in descending order in java?","body":"<p>try this,</p>\n<pre><code>public static int findLastOccurrenceDescending(double[] arr, double x, int left, int right) {\n    if (left &gt; right) {\n        return -1;\n    }\n\n    int mid = (left + right) / 2;\n\n    if ((mid == 0 || arr[mid - 1] &gt; x) &amp;&amp; arr[mid] == x) {\n        return mid;\n    } else if (arr[mid] &gt; x) {\n        return findLastOccurrenceDescending(arr, x, mid + 1, right);\n    } else {\n        return findLastOccurrenceDescending(arr, x, left, mid - 1);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28242835,"reputation":1,"user_id":21590363,"display_name":"Yusuf Yigit"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1681236618,"creation_date":1680910329,"question_id":75962597,"body_markdown":"I am trying to calculate the targeted gpa in both descending and ascending arrays, via a binary search of the file path written from command line, in the Java programming language.\r\n\r\nMy main Java files are the codes I wrote below. \r\nThe Student Java version is a separate file. The Student class and readcsv version are defined there. \r\n\r\nWhen I calculate ascending sorted arrays, it calculates correctly, \r\nbut in descending sorted arrays it returns a negative value.\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String args[]){\r\n            String path = args[0];\r\n            Student[] Stdnt= Student.readCSV(path).clone();\r\n            double[] GpaArray= new double[Stdnt.length];\r\n    \r\n            for(int i=0 ; i&lt;Ogrenciler.length;i++){\r\n                GpaArray[i] = Stdnt[i].getGPA();\r\n            }\r\n            int sayi = countOccurrences(GpaArray, 3.02);\r\n            System.out.println(sayi);\r\n        }\r\n    \r\n        public static int countOccurrences(double[] arr, double x) {\r\n            int firstIndex;\r\n            int lastIndex;\r\n    \r\n            if (arr[0] &lt;= arr[arr.length - 1]) {\r\n                // Increasing order\r\n                firstIndex = findFirstOccurrence(arr, x, 0, arr.length - 1);\r\n                lastIndex = findLastOccurrence(arr, x, 0, arr.length - 1);\r\n            } else {\r\n                // Decreasing order\r\n                firstIndex = findFirstOccurrenceDescending(arr, x, 0, arr.length - 1);\r\n                lastIndex = findLastOccurrenceDescending(arr, x, 0, arr.length - 1);\r\n            }\r\n    \r\n            if (firstIndex == -1) {\r\n                return 0;\r\n            }\r\n    \r\n            return lastIndex - firstIndex + 1;\r\n        }\r\n    \r\n        public static int findFirstOccurrence(double[] arr, double x, int left, int right) {\r\n            if (left &gt; right) {\r\n                return -1;\r\n            }\r\n    \r\n            int mid = (left + right) / 2;\r\n    \r\n            if ((mid == 0 || arr[mid - 1] &lt; x) &amp;&amp; arr[mid] == x) {\r\n                return mid;\r\n            } else if (arr[mid] &lt; x) {\r\n                return findFirstOccurrence(arr, x, mid + 1, right);\r\n            } else {\r\n                return findFirstOccurrence(arr, x, left, mid - 1);\r\n            }\r\n        }\r\n    \r\n        public static int findLastOccurrence(double[] arr, double x, int left, int right) {\r\n            if (left &gt; right) {\r\n                return -1;\r\n            }\r\n    \r\n            int mid = (left + right) / 2;\r\n    \r\n            if ((mid == arr.length - 1 || arr[mid + 1] &gt; x) &amp;&amp; arr[mid] == x) {\r\n                return mid;\r\n            } else if (arr[mid] &gt; x) {\r\n                return findLastOccurrence(arr, x, left, mid - 1);\r\n            } else {\r\n                return findLastOccurrence(arr, x, mid + 1, right);\r\n            }\r\n        }\r\n    \r\n        public static int findFirstOccurrenceDescending(double[] arr, double x, int left, int right) {\r\n            if (left &gt; right) {\r\n                return -1;\r\n            }\r\n    \r\n            int mid = (left + right) / 2;\r\n    \r\n            if ((mid == arr.length - 1 || arr[mid + 1] &lt; x) &amp;&amp; arr[mid] == x) {\r\n                return mid;\r\n            } else if (arr[mid] &lt; x) {\r\n                return findFirstOccurrenceDescending(arr, x, left, mid - 1);\r\n            } else {\r\n                return findFirstOccurrenceDescending(arr, x, mid + 1, right);\r\n            }\r\n        }\r\n    \r\n        public static int findLastOccurrenceDescending(double[] arr, double x, int left, int right) {\r\n            if (left &gt; right) {\r\n                return -1;\r\n            }\r\n    \r\n            int mid = (left + right) / 2;\r\n    \r\n            if ((mid == 0 || arr[mid - 1] &lt; x) &amp;&amp; arr[mid] == x) {\r\n                return mid;\r\n            } else if (arr[mid] &gt; x) {\r\n                return findLastOccurrenceDescending(arr, x, mid + 1, right);\r\n            } else {\r\n                return findLastOccurrenceDescending(arr, x, left, mid - 1);\r\n            }\r\n        }\r\n    }  \r\n\r\n  \r\n\r\n","title":"Why do I get a negative value when I try to read an array in descending order in java?","body":"<p>I am trying to calculate the targeted gpa in both descending and ascending arrays, via a binary search of the file path written from command line, in the Java programming language.</p>\n<p>My main Java files are the codes I wrote below.\nThe Student Java version is a separate file. The Student class and readcsv version are defined there.</p>\n<p>When I calculate ascending sorted arrays, it calculates correctly,\nbut in descending sorted arrays it returns a negative value.</p>\n<pre><code>public class Main {\n\n    public static void main(String args[]){\n        String path = args[0];\n        Student[] Stdnt= Student.readCSV(path).clone();\n        double[] GpaArray= new double[Stdnt.length];\n\n        for(int i=0 ; i&lt;Ogrenciler.length;i++){\n            GpaArray[i] = Stdnt[i].getGPA();\n        }\n        int sayi = countOccurrences(GpaArray, 3.02);\n        System.out.println(sayi);\n    }\n\n    public static int countOccurrences(double[] arr, double x) {\n        int firstIndex;\n        int lastIndex;\n\n        if (arr[0] &lt;= arr[arr.length - 1]) {\n            // Increasing order\n            firstIndex = findFirstOccurrence(arr, x, 0, arr.length - 1);\n            lastIndex = findLastOccurrence(arr, x, 0, arr.length - 1);\n        } else {\n            // Decreasing order\n            firstIndex = findFirstOccurrenceDescending(arr, x, 0, arr.length - 1);\n            lastIndex = findLastOccurrenceDescending(arr, x, 0, arr.length - 1);\n        }\n\n        if (firstIndex == -1) {\n            return 0;\n        }\n\n        return lastIndex - firstIndex + 1;\n    }\n\n    public static int findFirstOccurrence(double[] arr, double x, int left, int right) {\n        if (left &gt; right) {\n            return -1;\n        }\n\n        int mid = (left + right) / 2;\n\n        if ((mid == 0 || arr[mid - 1] &lt; x) &amp;&amp; arr[mid] == x) {\n            return mid;\n        } else if (arr[mid] &lt; x) {\n            return findFirstOccurrence(arr, x, mid + 1, right);\n        } else {\n            return findFirstOccurrence(arr, x, left, mid - 1);\n        }\n    }\n\n    public static int findLastOccurrence(double[] arr, double x, int left, int right) {\n        if (left &gt; right) {\n            return -1;\n        }\n\n        int mid = (left + right) / 2;\n\n        if ((mid == arr.length - 1 || arr[mid + 1] &gt; x) &amp;&amp; arr[mid] == x) {\n            return mid;\n        } else if (arr[mid] &gt; x) {\n            return findLastOccurrence(arr, x, left, mid - 1);\n        } else {\n            return findLastOccurrence(arr, x, mid + 1, right);\n        }\n    }\n\n    public static int findFirstOccurrenceDescending(double[] arr, double x, int left, int right) {\n        if (left &gt; right) {\n            return -1;\n        }\n\n        int mid = (left + right) / 2;\n\n        if ((mid == arr.length - 1 || arr[mid + 1] &lt; x) &amp;&amp; arr[mid] == x) {\n            return mid;\n        } else if (arr[mid] &lt; x) {\n            return findFirstOccurrenceDescending(arr, x, left, mid - 1);\n        } else {\n            return findFirstOccurrenceDescending(arr, x, mid + 1, right);\n        }\n    }\n\n    public static int findLastOccurrenceDescending(double[] arr, double x, int left, int right) {\n        if (left &gt; right) {\n            return -1;\n        }\n\n        int mid = (left + right) / 2;\n\n        if ((mid == 0 || arr[mid - 1] &lt; x) &amp;&amp; arr[mid] == x) {\n            return mid;\n        } else if (arr[mid] &gt; x) {\n            return findLastOccurrenceDescending(arr, x, mid + 1, right);\n        } else {\n            return findLastOccurrenceDescending(arr, x, left, mid - 1);\n        }\n    }\n}  \n</code></pre>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":15119538,"reputation":6878,"user_id":10910692,"display_name":"FanoFN"},"score":1,"creation_date":1681205023,"post_id":75982105,"comment_id":134014920,"body_markdown":"Not quite sure what you&#39;re asking but `select * from tableName` doesn&#39;t use any index. https://dbfiddle.uk/7x3ofb-n","body":"Not quite sure what you&#39;re asking but <code>select * from tableName</code> doesn&#39;t use any index. <a href=\"https://dbfiddle.uk/7x3ofb-n\" rel=\"nofollow noreferrer\">dbfiddle.uk/7x3ofb-n</a>"},{"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"score":1,"creation_date":1681235378,"post_id":75982105,"comment_id":134022799,"body_markdown":"`select *` _can_ use an index if that index includes all the columns. That would do an index-scan, reading every entry in the index.","body":"<code>select *</code> <i>can</i> use an index if that index includes all the columns. That would do an index-scan, reading every entry in the index."}],"answers":[{"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681217316,"creation_date":1681217316,"answer_id":75986096,"question_id":75982105,"body_markdown":"Yes, an index will only be used when there is some criteria in your query.\r\nE.g. `WHERE type = &#39;admin&#39;` is there in your query,\r\nAnd there is an index on `type` column in your table, and it has limited distinct values, then it will use index.\r\n\r\nRefer: https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html\r\n\r\nIf your query is `SELECT * FROM tableName`, then it has to go through the whole table anyway. There is no point in using any index, even if those are there.\r\n\r\nOnly when it has to search for some subset of records, using where criteria, it will decide which index might help in going through the least amount of records to find what you are looking for.\r\n","title":"Does mysql slow down because there are too many columns to query?","body":"<p>Yes, an index will only be used when there is some criteria in your query.\nE.g. <code>WHERE type = 'admin'</code> is there in your query,\nAnd there is an index on <code>type</code> column in your table, and it has limited distinct values, then it will use index.</p>\n<p>Refer: <a href=\"https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/8.0/en/mysql-indexes.html</a></p>\n<p>If your query is <code>SELECT * FROM tableName</code>, then it has to go through the whole table anyway. There is no point in using any index, even if those are there.</p>\n<p>Only when it has to search for some subset of records, using where criteria, it will decide which index might help in going through the least amount of records to find what you are looking for.</p>\n"},{"tags":[],"owner":{"account_id":10929,"reputation":545317,"user_id":20860,"accept_rate":92,"display_name":"Bill Karwin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1681235817,"creation_date":1681235817,"answer_id":75988797,"question_id":75982105,"body_markdown":"Assuming you are using InnoDB as the storage engine. This is the default in MySQL.\r\n\r\n- Yes, all the columns are stored together in the clustered index. The whole row is stored in the same InnoDB page. Except for BLOB/TEXT/JSON, which may overflow to additional pages.\r\n\r\n- Since InnoDB reads data in units of pages, once you read one column from the row, the rest of the row is also included in that read. The extra cost of reading all the columns is negligible compared to initially reading the page. \r\n\r\n  By analogy, if you are reading a book and you find a page that has the one sentence you are looking for, it&#39;s very little effort to read the rest of that page while you&#39;re there.\r\n\r\n- Since BLOB/TEXT/JSON columns may be large enough to overflow to additional pages, doing `SELECT *` when you don&#39;t need those columns does cost more, because InnoDB needs to read the additional pages. This can be a good reason to avoid using `SELECT *`, and be more specific to name only the columns you need per query.","title":"Does mysql slow down because there are too many columns to query?","body":"<p>Assuming you are using InnoDB as the storage engine. This is the default in MySQL.</p>\n<ul>\n<li><p>Yes, all the columns are stored together in the clustered index. The whole row is stored in the same InnoDB page. Except for BLOB/TEXT/JSON, which may overflow to additional pages.</p>\n</li>\n<li><p>Since InnoDB reads data in units of pages, once you read one column from the row, the rest of the row is also included in that read. The extra cost of reading all the columns is negligible compared to initially reading the page.</p>\n<p>By analogy, if you are reading a book and you find a page that has the one sentence you are looking for, it's very little effort to read the rest of that page while you're there.</p>\n</li>\n<li><p>Since BLOB/TEXT/JSON columns may be large enough to overflow to additional pages, doing <code>SELECT *</code> when you don't need those columns does cost more, because InnoDB needs to read the additional pages. This can be a good reason to avoid using <code>SELECT *</code>, and be more specific to name only the columns you need per query.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":20501187,"reputation":45,"user_id":15045091,"display_name":"johnson"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":75988797,"answer_count":2,"score":0,"last_activity_date":1681235817,"creation_date":1681182123,"question_id":75982105,"body_markdown":"I have a question, does the database cluster index store the whole row of data? So if you have a lot of columns, the index is still looking at the whole row of data. So does having more columns in a query cause mysql queries to slow down?\r\n\r\nselect * from tableName","title":"Does mysql slow down because there are too many columns to query?","body":"<p>I have a question, does the database cluster index store the whole row of data? So if you have a lot of columns, the index is still looking at the whole row of data. So does having more columns in a query cause mysql queries to slow down?</p>\n<p>select * from tableName</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"score":0,"creation_date":1681230324,"post_id":75988001,"comment_id":134021645,"body_markdown":"Can you show what you have tried?","body":"Can you show what you have tried?"}],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5719,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681232612,"creation_date":1681232612,"answer_id":75988446,"question_id":75988001,"body_markdown":"The below XPATH expression locates the `&lt;button&gt;` node which is following-sibling to the `&lt;div&gt;` node containing text &quot;Result2&quot;\r\n\r\n````\r\n//div[contains(text(),&#39;Result2&#39;)]//following-sibling::button\r\n````","title":"How do I perform action on selenium which is depends on display results?","body":"<p>The below XPATH expression locates the <code>&lt;button&gt;</code> node which is following-sibling to the <code>&lt;div&gt;</code> node containing text &quot;Result2&quot;</p>\n<pre><code>//div[contains(text(),'Result2')]//following-sibling::button\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2772450,"reputation":22416,"user_id":2386774,"display_name":"JeffC"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681235781,"creation_date":1681235781,"answer_id":75988794,"question_id":75988001,"body_markdown":"I&#39;m assuming you are going to use this, or something like this, more than once. In that case let&#39;s put this code into a reusable method that makes it simple to use.\r\n\r\n    public static void clickResult(String result) {\r\n        new WebDriverWait(driver, Duration.ofSeconds(10))\r\n            .until(ExpectedConditions.elementToBeClickable(By.xpath(MessageFormat.format(&quot;//div[./div[text()=&#39;&#39; {0} &#39;&#39;]]/button&quot;, result))))\r\n            .click();\r\n    }\r\n\r\nand then call it like\r\n\r\n    clickResult(&quot;Result2&quot;);\r\n\r\nIn the method,\r\n\r\n1. I&#39;ve added a wait to make sure that the element is available to be clicked.\r\n1. I&#39;m dynamically building an XPath to find the DIV that contains the passed in string, e.g. &quot;Result2&quot;, and then finds the neighboring BUTTON. Be careful of using `contains()` here because depending on how complex the &quot;Result2&quot; string is and what you are searching for, you might end up grabbing the wrong element. If you know that using `contains()` will work fine, you can use the XPath, `&quot;//div[./div[contains(text(),&#39;&#39;{0}&#39;&#39;)]]/button&quot;`","title":"How do I perform action on selenium which is depends on display results?","body":"<p>I'm assuming you are going to use this, or something like this, more than once. In that case let's put this code into a reusable method that makes it simple to use.</p>\n<pre><code>public static void clickResult(String result) {\n    new WebDriverWait(driver, Duration.ofSeconds(10))\n        .until(ExpectedConditions.elementToBeClickable(By.xpath(MessageFormat.format(&quot;//div[./div[text()='' {0} '']]/button&quot;, result))))\n        .click();\n}\n</code></pre>\n<p>and then call it like</p>\n<pre><code>clickResult(&quot;Result2&quot;);\n</code></pre>\n<p>In the method,</p>\n<ol>\n<li>I've added a wait to make sure that the element is available to be clicked.</li>\n<li>I'm dynamically building an XPath to find the DIV that contains the passed in string, e.g. &quot;Result2&quot;, and then finds the neighboring BUTTON. Be careful of using <code>contains()</code> here because depending on how complex the &quot;Result2&quot; string is and what you are searching for, you might end up grabbing the wrong element. If you know that using <code>contains()</code> will work fine, you can use the XPath, <code>&quot;//div[./div[contains(text(),''{0}'')]]/button&quot;</code></li>\n</ol>\n"}],"owner":{"account_id":28276883,"reputation":1,"user_id":21619214,"display_name":"locateanup"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1681235781,"creation_date":1681229317,"question_id":75988001,"body_markdown":"There is a list of search result blocks that I need to perform an action on depending on search results. To simplify this I&#39;ll add some sample HTML.\r\n\r\n    &lt;li&gt;\r\n        &lt;div&gt;\r\n            &lt;div&gt; Result1 &lt;/div&gt;\r\n            &lt;button&gt; click &lt;/button&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;div&gt; Result2 &lt;/div&gt;\r\n            &lt;button&gt; click &lt;/button&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;div&gt; Result3 &lt;/div&gt;\r\n            &lt;button&gt; click &lt;/button&gt;\r\n        &lt;/div&gt;\r\n        &lt;div&gt;\r\n            &lt;div&gt; Result4 &lt;/div&gt;\r\n            &lt;button&gt; click &lt;/button&gt;\r\n        &lt;/div&gt;\r\n    &lt;/li&gt;\r\n\r\nThe results change every time. Suppose I need to perform action on &quot;Result2&quot; then according to my requirement I need to click on the neighboring BUTTON, how can I do this using Java + Selenium?","title":"How do I perform action on selenium which is depends on display results?","body":"<p>There is a list of search result blocks that I need to perform an action on depending on search results. To simplify this I'll add some sample HTML.</p>\n<pre><code>&lt;li&gt;\n    &lt;div&gt;\n        &lt;div&gt; Result1 &lt;/div&gt;\n        &lt;button&gt; click &lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;div&gt; Result2 &lt;/div&gt;\n        &lt;button&gt; click &lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;div&gt; Result3 &lt;/div&gt;\n        &lt;button&gt; click &lt;/button&gt;\n    &lt;/div&gt;\n    &lt;div&gt;\n        &lt;div&gt; Result4 &lt;/div&gt;\n        &lt;button&gt; click &lt;/button&gt;\n    &lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n<p>The results change every time. Suppose I need to perform action on &quot;Result2&quot; then according to my requirement I need to click on the neighboring BUTTON, how can I do this using Java + Selenium?</p>\n"},{"tags":["java","integer","char","ascii","multiplication"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":1,"creation_date":1681217576,"post_id":75986065,"comment_id":134017874,"body_markdown":"There&#39;s a method [`Character.getNumericValue(char)`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#getNumericValue(char)) that should do the trick.","body":"There&#39;s a method <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#getNumericValue(char)\" rel=\"nofollow noreferrer\"><code>Character.getNumericValue(char)</code></a> that should do the trick."},{"owner":{"account_id":12743722,"reputation":19956,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1681219262,"post_id":75986065,"comment_id":134018399,"body_markdown":"Bear in mind that `getNumericValue(char)` may [surprise you](https://stackoverflow.com/q/31888001/12567365) - depending on the inputs.","body":"Bear in mind that <code>getNumericValue(char)</code> may <a href=\"https://stackoverflow.com/q/31888001/12567365\">surprise you</a> - depending on the inputs."},{"owner":{"account_id":14982591,"reputation":374,"user_id":10816178,"display_name":"N Sarj"},"score":1,"creation_date":1681220250,"post_id":75986065,"comment_id":134018724,"body_markdown":"Also consider Integer.parseInt in case you want to convert the result of combining multiple characters into a number.","body":"Also consider Integer.parseInt in case you want to convert the result of combining multiple characters into a number."},{"owner":{"account_id":18294701,"reputation":73,"user_id":13330292,"display_name":"fer.trecool"},"score":0,"creation_date":1681222787,"post_id":75986065,"comment_id":134019528,"body_markdown":"You could cast the char variable: int var = (int) NUMBER; and then do the multiplication.","body":"You could cast the char variable: int var = (int) NUMBER; and then do the multiplication."},{"owner":{"account_id":18294701,"reputation":73,"user_id":13330292,"display_name":"fer.trecool"},"score":1,"creation_date":1681223099,"post_id":75986065,"comment_id":134019628,"body_markdown":"But remember that the char variable will take the ASCII value, for example, if the char value is 1 and you multiply it by 5, the result will be 245, because 1 in ASCII is 49(decimal) .","body":"But remember that the char variable will take the ASCII value, for example, if the char value is 1 and you multiply it by 5, the result will be 245, because 1 in ASCII is 49(decimal) ."},{"owner":{"account_id":936797,"reputation":2054,"user_id":965593,"accept_rate":67,"display_name":"pamphlet"},"score":0,"creation_date":1681235815,"post_id":75986065,"comment_id":134022889,"body_markdown":"I believe the generic term for what you&#39;re looking to do is &quot;parse&quot;. E.g. try searching for &quot;parse number java&quot;.","body":"I believe the generic term for what you&#39;re looking to do is &quot;parse&quot;. E.g. try searching for &quot;parse number java&quot;."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681235455,"creation_date":1681232101,"answer_id":75988384,"question_id":75986065,"body_markdown":"# Code points\r\n\r\nWhile `char` can be made to work for you, that is a legacy data type. As a 16-bit value, `char` is physically incapable of representing most characters. \r\n\r\nSo I suggest you make a habit of using [code point][1] integer numbers when working with individual characters. \r\n\r\n    int[] codePoints = &quot;1234&quot;.codePoints().toArray() ;\r\n\r\nLoop each code point. Test if that code point represents a character that is a digit. Change each code point back to text. Parse that text as an integer. Multiply using `Math.multiplyExact` to alert us to [integer overflow][2]. Finally, report result.\r\n\r\n    int multiplicand = 2 ;\r\n    for( int codePoint : codePoints ) \r\n    {\r\n        if( Character.isDigit( codePoint ) )\r\n        {\r\n            String digitAsText = Character.toString( codePoint ) ;\r\n            int x = Integer.parseInt( digitAsText ) ;\r\n            int y = Math.multiplyExact( x , multiplicand ) ;\r\n            System.out.println( x + &quot; * &quot; + multiplicand + &quot; = &quot; + y) ;\r\n        }\r\n    }\r\n\r\nSee this code [run at Ideone.com][3].\r\n\r\n```none\r\n1 * 2 = 2\r\n2 * 2 = 4\r\n3 * 2 = 6\r\n4 * 2 = 8\r\n```\r\n\r\n## Shorter code\r\n\r\n&gt; I am a beginner and I will try to write my problem as short as possible;\r\n\r\nShort code is rarely a wise goal. \r\n\r\nLonger code, written with short simple statements, is easier to read, easier to debug, and easier for the compiler to optimize.\r\n\r\nBut if you insist, here is a single statement that leverages advanced features of Java including streams, lambdas, and method references.\r\n\r\n```java\r\n&quot;1234&quot;\r\n        .codePoints()\r\n        .filter( Character :: isDigit )\r\n        .mapToObj( Character :: toString )\r\n        .map( Integer :: valueOf )\r\n        .map( ( Integer integer ) -&gt; Math.multiplyExact( integer , 2 ) )\r\n        .forEach( System.out :: println );\r\n```\r\n\r\nThis single-statement code involves [auto-boxing][4]. So this code may run a tiny bit slower than the longer code above.\r\n\r\nWhen run:\r\n\r\n```none\r\n2\r\n4\r\n6\r\n8\r\n```\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Code_point\r\n  [2]: https://en.wikipedia.org/wiki/Integer_overflow\r\n  [3]: https://ideone.com/ALw7LG\r\n  [4]: https://en.wikipedia.org/wiki/Boxing_(computer_science)","title":"How can I multiply char with a number?","body":"<h1>Code points</h1>\n<p>While <code>char</code> can be made to work for you, that is a legacy data type. As a 16-bit value, <code>char</code> is physically incapable of representing most characters.</p>\n<p>So I suggest you make a habit of using <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers when working with individual characters.</p>\n<pre><code>int[] codePoints = &quot;1234&quot;.codePoints().toArray() ;\n</code></pre>\n<p>Loop each code point. Test if that code point represents a character that is a digit. Change each code point back to text. Parse that text as an integer. Multiply using <code>Math.multiplyExact</code> to alert us to <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">integer overflow</a>. Finally, report result.</p>\n<pre><code>int multiplicand = 2 ;\nfor( int codePoint : codePoints ) \n{\n    if( Character.isDigit( codePoint ) )\n    {\n        String digitAsText = Character.toString( codePoint ) ;\n        int x = Integer.parseInt( digitAsText ) ;\n        int y = Math.multiplyExact( x , multiplicand ) ;\n        System.out.println( x + &quot; * &quot; + multiplicand + &quot; = &quot; + y) ;\n    }\n}\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/ALw7LG\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>1 * 2 = 2\n2 * 2 = 4\n3 * 2 = 6\n4 * 2 = 8\n</code></pre>\n<h2>Shorter code</h2>\n<blockquote>\n<p>I am a beginner and I will try to write my problem as short as possible;</p>\n</blockquote>\n<p>Short code is rarely a wise goal.</p>\n<p>Longer code, written with short simple statements, is easier to read, easier to debug, and easier for the compiler to optimize.</p>\n<p>But if you insist, here is a single statement that leverages advanced features of Java including streams, lambdas, and method references.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;1234&quot;\n        .codePoints()\n        .filter( Character :: isDigit )\n        .mapToObj( Character :: toString )\n        .map( Integer :: valueOf )\n        .map( ( Integer integer ) -&gt; Math.multiplyExact( integer , 2 ) )\n        .forEach( System.out :: println );\n</code></pre>\n<p>This single-statement code involves <a href=\"https://en.wikipedia.org/wiki/Boxing_(computer_science)\" rel=\"nofollow noreferrer\">auto-boxing</a>. So this code may run a tiny bit slower than the longer code above.</p>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2\n4\n6\n8\n</code></pre>\n"}],"owner":{"account_id":28275283,"reputation":31,"user_id":21617859,"display_name":"Krister Karlson"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1681235455,"creation_date":1681217175,"question_id":75986065,"body_markdown":"It is my first time using stackoverflow! \r\nI am a beginner and I will try to write my problem as short as possible;\r\n\r\nUser puts a number e.g `1234`\r\n\r\n    char NUMBER = In.read();\r\n    while (NUMBER != &#39;\\n&#39;) {\r\n        Out.println(NUMBER);\t\r\n        NUMBER = In.read();\r\n    }\r\n\r\nThe Program will put out the numbers as &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;, so far so good.\r\n\r\nNow I&#39;d like to multiply these numbers with a number I choose.\r\n\r\nWhen trying this, the program says that it&#39;s impossible, because you cannot multiply &quot;char&quot; with &quot;int&quot;.\r\n\r\nHow can I solve this problem? How do I multiply these numbers?\r\n\r\nThank you in advance!\r\n\r\n\r\n\r\nI tried using the ASCII, but that also does not work when trying to multiply.","title":"How can I multiply char with a number?","body":"<p>It is my first time using stackoverflow!\nI am a beginner and I will try to write my problem as short as possible;</p>\n<p>User puts a number e.g <code>1234</code></p>\n<pre><code>char NUMBER = In.read();\nwhile (NUMBER != '\\n') {\n    Out.println(NUMBER);    \n    NUMBER = In.read();\n}\n</code></pre>\n<p>The Program will put out the numbers as &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;, so far so good.</p>\n<p>Now I'd like to multiply these numbers with a number I choose.</p>\n<p>When trying this, the program says that it's impossible, because you cannot multiply &quot;char&quot; with &quot;int&quot;.</p>\n<p>How can I solve this problem? How do I multiply these numbers?</p>\n<p>Thank you in advance!</p>\n<p>I tried using the ASCII, but that also does not work when trying to multiply.</p>\n"},{"tags":["java","swing","clipboard","jtextpane","htmleditorkit"],"answers":[{"tags":[],"owner":{"account_id":59184,"reputation":9708,"user_id":177145,"display_name":"aterai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1681120311,"creation_date":1681117739,"answer_id":75975738,"question_id":75971841,"body_markdown":"It seems difficult to disable line breaks and indents only for `span` tags, so how about outputting html using [MinimalHTMLWriter](https://docs.oracle.com/javase/8/docs//api/javax/swing/text/html/MinimalHTMLWriter.html) with all line breaks and indents disabled?\r\n\r\n    public void copyHtmlTextToClipboard() {\r\n        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n        // HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\r\n        int startIndex = textPane.getSelectionStart();\r\n        int endIndex = textPane.getSelectionEnd();\r\n        int length = endIndex - startIndex;\r\n        StyledDocument styledDocument = textPane.getStyledDocument();\r\n        try (OutputStream outputStream = new ByteArrayOutputStream();\r\n             OutputStreamWriter osw = new OutputStreamWriter(outputStream)) {\r\n            // htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\r\n            MinimalHTMLWriter w = new MinimalHTMLWriter(\r\n              osw, styledDocument, startIndex, length) {\r\n                @Override\r\n                public String getLineSeparator() {\r\n                    return &quot;&quot;;\r\n                }\r\n    \r\n                @Override\r\n                protected int getIndentSpace() {\r\n                    return 0;\r\n                }\r\n            };\r\n            w.write();\r\n            osw.flush();\r\n            String contents = outputStream.toString();\r\n            System.out.println(contents);\r\n            HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\r\n            clipboard.setContents(htmlTransferable, null);\r\n        } catch (IOException | BadLocationException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n\r\n\r\n**Gui2.java**\r\n\r\n    import java.awt.*;\r\n    import java.awt.datatransfer.Clipboard;\r\n    import java.awt.datatransfer.DataFlavor;\r\n    import java.awt.datatransfer.Transferable;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.OutputStream;\r\n    import java.io.OutputStreamWriter;\r\n    import javax.swing.*;\r\n    import javax.swing.text.AttributeSet;\r\n    import javax.swing.text.BadLocationException;\r\n    import javax.swing.text.SimpleAttributeSet;\r\n    import javax.swing.text.StyleConstants;\r\n    import javax.swing.text.StyleContext;\r\n    import javax.swing.text.StyledDocument;\r\n    import javax.swing.text.html.HTMLEditorKit;\r\n    import javax.swing.text.html.MinimalHTMLWriter;\r\n    \r\n    public class Gui2 {\r\n        private JFrame window;\r\n        private JTextPane textPane;\r\n        private JButton copyButton;\r\n    \r\n        public Gui2() {\r\n            window = new JFrame();\r\n            window.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\r\n            textPane = new JTextPane();\r\n            textPane.setText(&quot;A:b&quot;);\r\n    \r\n            StyleContext styleContext = StyleContext.getDefaultStyleContext();\r\n            AttributeSet attributeSet = styleContext.addAttribute(\r\n              SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.RED);\r\n    \r\n            StyledDocument styledDocument = textPane.getStyledDocument();\r\n            styledDocument.setCharacterAttributes(1, 1, attributeSet, false);\r\n    \r\n            copyButton = new JButton(&quot;Copy&quot;);\r\n            copyButton.addActionListener(event -&gt; copyHtmlTextToClipboard());\r\n    \r\n            Container contentPane = window.getContentPane();\r\n            contentPane.add(textPane, BorderLayout.CENTER);\r\n            contentPane.add(copyButton, BorderLayout.SOUTH);\r\n        }\r\n    \r\n        public void copyHtmlTextToClipboard() {\r\n            Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n            // HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\r\n            int startIndex = textPane.getSelectionStart();\r\n            int endIndex = textPane.getSelectionEnd();\r\n            int length = endIndex - startIndex;\r\n            StyledDocument styledDocument = textPane.getStyledDocument();\r\n            try (OutputStream outputStream = new ByteArrayOutputStream();\r\n                 OutputStreamWriter osw = new OutputStreamWriter(outputStream)) {\r\n                // htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\r\n                MinimalHTMLWriter w = new MinimalHTMLWriter(\r\n                  osw, styledDocument, startIndex, length) {\r\n                    @Override\r\n                    public String getLineSeparator() {\r\n                        return &quot;&quot;;\r\n                    }\r\n    \r\n                    @Override\r\n                    protected int getIndentSpace() {\r\n                        return 0;\r\n                    }\r\n                };\r\n                w.write();\r\n                osw.flush();\r\n                String contents = outputStream.toString();\r\n                System.out.println(contents);\r\n                HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\r\n                clipboard.setContents(htmlTransferable, null);\r\n            } catch (IOException | BadLocationException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    \r\n        public void start() {\r\n            window.pack();\r\n            window.setLocationRelativeTo(null);\r\n            window.setVisible(true);\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            Gui2 gui = new Gui2();\r\n            gui.start();\r\n        }\r\n    }\r\n    \r\n    class HTMLTransferable implements Transferable {\r\n        private String hmtlFormattedText;\r\n        private DataFlavor[] dataFlavors;\r\n    \r\n        public HTMLTransferable(String hmtlFormattedText) {\r\n            this.hmtlFormattedText = hmtlFormattedText;\r\n            this.dataFlavors = new DataFlavor[] {\r\n                DataFlavor.allHtmlFlavor\r\n            };\r\n        }\r\n    \r\n        @Override\r\n        public DataFlavor[] getTransferDataFlavors() {\r\n            return dataFlavors;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isDataFlavorSupported(DataFlavor flavor) {\r\n            for (DataFlavor supportedFlavor : dataFlavors) {\r\n                if (supportedFlavor.equals(flavor)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    \r\n        @Override\r\n        public Object getTransferData(DataFlavor flavor) {\r\n            if (flavor == DataFlavor.allHtmlFlavor) {\r\n                return hmtlFormattedText;\r\n            }\r\n            return null;\r\n        }\r\n    }\r\n\r\n","title":"Write contents of JTextPane to clipboard using HTMLEditorKit without extra spaces between different colored elements","body":"<p>It seems difficult to disable line breaks and indents only for <code>span</code> tags, so how about outputting html using <a href=\"https://docs.oracle.com/javase/8/docs//api/javax/swing/text/html/MinimalHTMLWriter.html\" rel=\"nofollow noreferrer\">MinimalHTMLWriter</a> with all line breaks and indents disabled?</p>\n<pre><code>public void copyHtmlTextToClipboard() {\n    Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n    // HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\n    int startIndex = textPane.getSelectionStart();\n    int endIndex = textPane.getSelectionEnd();\n    int length = endIndex - startIndex;\n    StyledDocument styledDocument = textPane.getStyledDocument();\n    try (OutputStream outputStream = new ByteArrayOutputStream();\n         OutputStreamWriter osw = new OutputStreamWriter(outputStream)) {\n        // htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\n        MinimalHTMLWriter w = new MinimalHTMLWriter(\n          osw, styledDocument, startIndex, length) {\n            @Override\n            public String getLineSeparator() {\n                return &quot;&quot;;\n            }\n\n            @Override\n            protected int getIndentSpace() {\n                return 0;\n            }\n        };\n        w.write();\n        osw.flush();\n        String contents = outputStream.toString();\n        System.out.println(contents);\n        HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\n        clipboard.setContents(htmlTransferable, null);\n    } catch (IOException | BadLocationException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p><strong>Gui2.java</strong></p>\n<pre><code>import java.awt.*;\nimport java.awt.datatransfer.Clipboard;\nimport java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.Transferable;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\nimport java.io.OutputStream;\nimport java.io.OutputStreamWriter;\nimport javax.swing.*;\nimport javax.swing.text.AttributeSet;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.SimpleAttributeSet;\nimport javax.swing.text.StyleConstants;\nimport javax.swing.text.StyleContext;\nimport javax.swing.text.StyledDocument;\nimport javax.swing.text.html.HTMLEditorKit;\nimport javax.swing.text.html.MinimalHTMLWriter;\n\npublic class Gui2 {\n    private JFrame window;\n    private JTextPane textPane;\n    private JButton copyButton;\n\n    public Gui2() {\n        window = new JFrame();\n        window.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n        textPane = new JTextPane();\n        textPane.setText(&quot;A:b&quot;);\n\n        StyleContext styleContext = StyleContext.getDefaultStyleContext();\n        AttributeSet attributeSet = styleContext.addAttribute(\n          SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.RED);\n\n        StyledDocument styledDocument = textPane.getStyledDocument();\n        styledDocument.setCharacterAttributes(1, 1, attributeSet, false);\n\n        copyButton = new JButton(&quot;Copy&quot;);\n        copyButton.addActionListener(event -&gt; copyHtmlTextToClipboard());\n\n        Container contentPane = window.getContentPane();\n        contentPane.add(textPane, BorderLayout.CENTER);\n        contentPane.add(copyButton, BorderLayout.SOUTH);\n    }\n\n    public void copyHtmlTextToClipboard() {\n        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n        // HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\n        int startIndex = textPane.getSelectionStart();\n        int endIndex = textPane.getSelectionEnd();\n        int length = endIndex - startIndex;\n        StyledDocument styledDocument = textPane.getStyledDocument();\n        try (OutputStream outputStream = new ByteArrayOutputStream();\n             OutputStreamWriter osw = new OutputStreamWriter(outputStream)) {\n            // htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\n            MinimalHTMLWriter w = new MinimalHTMLWriter(\n              osw, styledDocument, startIndex, length) {\n                @Override\n                public String getLineSeparator() {\n                    return &quot;&quot;;\n                }\n\n                @Override\n                protected int getIndentSpace() {\n                    return 0;\n                }\n            };\n            w.write();\n            osw.flush();\n            String contents = outputStream.toString();\n            System.out.println(contents);\n            HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\n            clipboard.setContents(htmlTransferable, null);\n        } catch (IOException | BadLocationException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public void start() {\n        window.pack();\n        window.setLocationRelativeTo(null);\n        window.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        Gui2 gui = new Gui2();\n        gui.start();\n    }\n}\n\nclass HTMLTransferable implements Transferable {\n    private String hmtlFormattedText;\n    private DataFlavor[] dataFlavors;\n\n    public HTMLTransferable(String hmtlFormattedText) {\n        this.hmtlFormattedText = hmtlFormattedText;\n        this.dataFlavors = new DataFlavor[] {\n            DataFlavor.allHtmlFlavor\n        };\n    }\n\n    @Override\n    public DataFlavor[] getTransferDataFlavors() {\n        return dataFlavors;\n    }\n\n    @Override\n    public boolean isDataFlavorSupported(DataFlavor flavor) {\n        for (DataFlavor supportedFlavor : dataFlavors) {\n            if (supportedFlavor.equals(flavor)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    @Override\n    public Object getTransferData(DataFlavor flavor) {\n        if (flavor == DataFlavor.allHtmlFlavor) {\n            return hmtlFormattedText;\n        }\n        return null;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3489231,"reputation":1064,"user_id":2919326,"display_name":"aaroncarsonart"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75975738,"answer_count":1,"score":1,"last_activity_date":1681235365,"creation_date":1681059848,"question_id":75971841,"body_markdown":"I have built a custom syntax highlighter gui for my own programming language in Swing. I am writing a feature to copy a selection of text to the clipboard so I can easily paste my custom syntax highlighted formatted text into a web browser or a word document. However doing so adds a space between each element with a different color.\r\n\r\nThe following simplified code succinctly demonstrates this issue. First, we have the Gui class, using a JTextPane containing the text `&quot;A:b&quot;` with the color red set upon the character `&#39;:&#39;`. The JButton calls a method which uses HTMLEditorKit to write the text pane&#39;s StyledDocument contents to a String. This is then put in a custom HTMLTransferable object and passed to the Clipboard. \r\n\r\n```java\r\nimport javax.swing.JButton;\r\nimport javax.swing.JFrame;\r\nimport javax.swing.JTextPane;\r\nimport javax.swing.text.AttributeSet;\r\nimport javax.swing.text.BadLocationException;\r\nimport javax.swing.text.SimpleAttributeSet;\r\nimport javax.swing.text.StyleConstants;\r\nimport javax.swing.text.StyleContext;\r\nimport javax.swing.text.StyledDocument;\r\nimport javax.swing.text.html.HTMLEditorKit;\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Container;\r\nimport java.awt.Toolkit;\r\nimport java.awt.datatransfer.Clipboard;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\n\r\npublic class Gui {\r\n    private JFrame window;\r\n    private JTextPane textPane;\r\n    private JButton copyButton;\r\n\r\n    public Gui() {\r\n        window = new JFrame();\r\n        textPane = new JTextPane();\r\n        textPane.setText(&quot;A:b&quot;);\r\n\r\n        StyleContext styleContext = StyleContext.getDefaultStyleContext();\r\n        AttributeSet attributeSet = styleContext.addAttribute(SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.RED);\r\n\r\n        StyledDocument styledDocument = textPane.getStyledDocument();\r\n        styledDocument.setCharacterAttributes(1, 1, attributeSet, false);\r\n\r\n        copyButton = new JButton(&quot;Copy&quot;);\r\n        copyButton.addActionListener(event -&gt; copyHtmlTextToClipboard());\r\n\r\n        Container contentPane = window.getContentPane();\r\n        contentPane.add(textPane, BorderLayout.CENTER);\r\n        contentPane.add(copyButton, BorderLayout.SOUTH);\r\n    }\r\n\r\n    public void copyHtmlTextToClipboard() {\r\n        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\r\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n        HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\r\n\r\n        int startIndex = textPane.getSelectionStart();\r\n        int endIndex = textPane.getSelectionEnd();\r\n        int length = endIndex - startIndex;\r\n\r\n        StyledDocument styledDocument = textPane.getStyledDocument();\r\n        try {\r\n            htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\r\n            outputStream.flush();\r\n\r\n            String contents = new String(outputStream.toByteArray());\r\n            HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\r\n            clipboard.setContents(htmlTransferable, null);\r\n        }\r\n        catch (IOException | BadLocationException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    public void start() {\r\n        window.pack();\r\n        window.setLocationRelativeTo(null);\r\n        window.setVisible(true);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Gui gui = new Gui();\r\n        gui.start();\r\n    }\r\n}\r\n```\r\n\r\nThis produces the following UI:\r\n\r\n[![Example code UI][1]][1]\r\n\r\nThe HTMLTransferable class is barebones. It does work on my system (macOS 12.6) to pass this data to the Pages app using paste.\r\n\r\n```java\r\nimport java.awt.datatransfer.DataFlavor;\r\nimport java.awt.datatransfer.Transferable;\r\n\r\npublic class HTMLTransferable implements Transferable {\r\n    private String hmtlFormattedText;\r\n    private DataFlavor[] dataFlavors;\r\n\r\n    public HTMLTransferable(String hmtlFormattedText) {\r\n        this.hmtlFormattedText = hmtlFormattedText;\r\n        this.dataFlavors = new DataFlavor[] {\r\n                DataFlavor.allHtmlFlavor\r\n        };\r\n    }\r\n\r\n    @Override\r\n    public DataFlavor[] getTransferDataFlavors() {\r\n        return dataFlavors;\r\n    }\r\n\r\n    @Override\r\n    public boolean isDataFlavorSupported(DataFlavor flavor) {\r\n        for (DataFlavor supportedFlavor : dataFlavors) {\r\n            if (supportedFlavor.equals(flavor)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public Object getTransferData(DataFlavor flavor) {\r\n        if (flavor == DataFlavor.allHtmlFlavor) {\r\n            return hmtlFormattedText;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\nAnd finally, the raw output of the HTMLEditorKit writing the contents of the JTextPane&#39;s StyledDocument. Formatting is applied to text using span elements. However, the contents of each span are listed on their own separate line.\r\n\r\n```html\r\n&lt;html&gt;\r\n  &lt;head&gt;\r\n    &lt;style&gt;\r\n      &lt;!--\r\n        p.default {\r\n          family:Lucida Grande;\r\n          size:4;\r\n          bold:normal;\r\n          italic:;\r\n        }\r\n      --&gt;\r\n    &lt;/style&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;p class=default&gt;\r\n      &lt;span style=&quot;font-size: 13pt; font-family: Lucida Grande&quot;&gt;\r\n        A\r\n      &lt;/span&gt;\r\n      &lt;span style=&quot;color: #ff0000; font-size: 13pt; font-family: Lucida Grande&quot;&gt;\r\n        :\r\n      &lt;/span&gt;\r\n      &lt;span style=&quot;font-size: 13pt; font-family: Lucida Grande&quot;&gt;\r\n        b\r\n      &lt;/span&gt;\r\n    &lt;/p&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\nThis adds a space between each element contained in a unique span when pasted in Pages, or when viewed in a web browser such as Chrome:\r\n\r\n[![Rendered text in Pages app][2]][2]\r\n\r\nFor my syntax-highlighted code, this adds a lot of unnecessary spaces. So I&#39;m looking for the best way to remove these spaces. I really don&#39;t want to have to parse the output HTML myself. Ideally there is some setting on HTMLEditorKit or something similar I am simply overlooking. Plus it gets trickier when the formatted text contains spaces that need to be preserved in the final result.\r\n\r\n  [1]: https://i.stack.imgur.com/4I8Nf.png\r\n  [2]: https://i.stack.imgur.com/xhLJj.png\r\n\r\n## Formatted Code in HTML Addendum:\r\n\r\nAfter verifying the solution provided by aterai solves the added spaces between spans issue, I found 2 other issues with copying code from a JTextPane to the clipboard in an HTML format:\r\n\r\n1) My code&#39;s leading indentation was lost when displayed.\r\n2) Each `&lt;p&gt;` tag added additional line spacing.\r\n\r\nThis was fixed by using string replacement to edit the output HTML:\r\n\r\n1) Wrap the body in a `&lt;pre&gt;` tag.\r\n2) Remove `&lt;p&gt;` tags, and replace `&lt;p/&gt;` tags with `&lt;br/&gt;`.\r\n\r\n```java\r\nString contents = outputStream.toString();\r\n\r\n// fix preservation of whitespace\r\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;body&gt;&quot;), &quot;&lt;body&gt;&lt;pre&gt;&quot;);\r\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;/body&gt;&quot;), &quot;&lt;/pre&gt;&lt;/body&gt;&quot;);\r\n\r\n// fix line spacing\r\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;p class=default&gt;&quot;), &quot;&quot;);\r\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;/p&gt;&quot;), &quot;&lt;br/&gt;&quot;);\r\n\r\nHTMLTransferable htmlTransferable = new HTMLTransferable(contents);\r\n```","title":"Write contents of JTextPane to clipboard using HTMLEditorKit without extra spaces between different colored elements","body":"<p>I have built a custom syntax highlighter gui for my own programming language in Swing. I am writing a feature to copy a selection of text to the clipboard so I can easily paste my custom syntax highlighted formatted text into a web browser or a word document. However doing so adds a space between each element with a different color.</p>\n<p>The following simplified code succinctly demonstrates this issue. First, we have the Gui class, using a JTextPane containing the text <code>&quot;A:b&quot;</code> with the color red set upon the character <code>':'</code>. The JButton calls a method which uses HTMLEditorKit to write the text pane's StyledDocument contents to a String. This is then put in a custom HTMLTransferable object and passed to the Clipboard.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.swing.JButton;\nimport javax.swing.JFrame;\nimport javax.swing.JTextPane;\nimport javax.swing.text.AttributeSet;\nimport javax.swing.text.BadLocationException;\nimport javax.swing.text.SimpleAttributeSet;\nimport javax.swing.text.StyleConstants;\nimport javax.swing.text.StyleContext;\nimport javax.swing.text.StyledDocument;\nimport javax.swing.text.html.HTMLEditorKit;\nimport java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Container;\nimport java.awt.Toolkit;\nimport java.awt.datatransfer.Clipboard;\nimport java.io.ByteArrayOutputStream;\nimport java.io.IOException;\n\npublic class Gui {\n    private JFrame window;\n    private JTextPane textPane;\n    private JButton copyButton;\n\n    public Gui() {\n        window = new JFrame();\n        textPane = new JTextPane();\n        textPane.setText(&quot;A:b&quot;);\n\n        StyleContext styleContext = StyleContext.getDefaultStyleContext();\n        AttributeSet attributeSet = styleContext.addAttribute(SimpleAttributeSet.EMPTY, StyleConstants.Foreground, Color.RED);\n\n        StyledDocument styledDocument = textPane.getStyledDocument();\n        styledDocument.setCharacterAttributes(1, 1, attributeSet, false);\n\n        copyButton = new JButton(&quot;Copy&quot;);\n        copyButton.addActionListener(event -&gt; copyHtmlTextToClipboard());\n\n        Container contentPane = window.getContentPane();\n        contentPane.add(textPane, BorderLayout.CENTER);\n        contentPane.add(copyButton, BorderLayout.SOUTH);\n    }\n\n    public void copyHtmlTextToClipboard() {\n        Clipboard clipboard = Toolkit.getDefaultToolkit().getSystemClipboard();\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        HTMLEditorKit htmlEditorKit = new HTMLEditorKit();\n\n        int startIndex = textPane.getSelectionStart();\n        int endIndex = textPane.getSelectionEnd();\n        int length = endIndex - startIndex;\n\n        StyledDocument styledDocument = textPane.getStyledDocument();\n        try {\n            htmlEditorKit.write(outputStream, styledDocument, startIndex, length);\n            outputStream.flush();\n\n            String contents = new String(outputStream.toByteArray());\n            HTMLTransferable htmlTransferable = new HTMLTransferable(contents);\n            clipboard.setContents(htmlTransferable, null);\n        }\n        catch (IOException | BadLocationException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    public void start() {\n        window.pack();\n        window.setLocationRelativeTo(null);\n        window.setVisible(true);\n    }\n\n    public static void main(String[] args) {\n        Gui gui = new Gui();\n        gui.start();\n    }\n}\n</code></pre>\n<p>This produces the following UI:</p>\n<p><a href=\"https://i.stack.imgur.com/4I8Nf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4I8Nf.png\" alt=\"Example code UI\" /></a></p>\n<p>The HTMLTransferable class is barebones. It does work on my system (macOS 12.6) to pass this data to the Pages app using paste.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.awt.datatransfer.DataFlavor;\nimport java.awt.datatransfer.Transferable;\n\npublic class HTMLTransferable implements Transferable {\n    private String hmtlFormattedText;\n    private DataFlavor[] dataFlavors;\n\n    public HTMLTransferable(String hmtlFormattedText) {\n        this.hmtlFormattedText = hmtlFormattedText;\n        this.dataFlavors = new DataFlavor[] {\n                DataFlavor.allHtmlFlavor\n        };\n    }\n\n    @Override\n    public DataFlavor[] getTransferDataFlavors() {\n        return dataFlavors;\n    }\n\n    @Override\n    public boolean isDataFlavorSupported(DataFlavor flavor) {\n        for (DataFlavor supportedFlavor : dataFlavors) {\n            if (supportedFlavor.equals(flavor)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    @Override\n    public Object getTransferData(DataFlavor flavor) {\n        if (flavor == DataFlavor.allHtmlFlavor) {\n            return hmtlFormattedText;\n        }\n        return null;\n    }\n}\n</code></pre>\n<p>And finally, the raw output of the HTMLEditorKit writing the contents of the JTextPane's StyledDocument. Formatting is applied to text using span elements. However, the contents of each span are listed on their own separate line.</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;style&gt;\n      &lt;!--\n        p.default {\n          family:Lucida Grande;\n          size:4;\n          bold:normal;\n          italic:;\n        }\n      --&gt;\n    &lt;/style&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p class=default&gt;\n      &lt;span style=&quot;font-size: 13pt; font-family: Lucida Grande&quot;&gt;\n        A\n      &lt;/span&gt;\n      &lt;span style=&quot;color: #ff0000; font-size: 13pt; font-family: Lucida Grande&quot;&gt;\n        :\n      &lt;/span&gt;\n      &lt;span style=&quot;font-size: 13pt; font-family: Lucida Grande&quot;&gt;\n        b\n      &lt;/span&gt;\n    &lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>This adds a space between each element contained in a unique span when pasted in Pages, or when viewed in a web browser such as Chrome:</p>\n<p><a href=\"https://i.stack.imgur.com/xhLJj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xhLJj.png\" alt=\"Rendered text in Pages app\" /></a></p>\n<p>For my syntax-highlighted code, this adds a lot of unnecessary spaces. So I'm looking for the best way to remove these spaces. I really don't want to have to parse the output HTML myself. Ideally there is some setting on HTMLEditorKit or something similar I am simply overlooking. Plus it gets trickier when the formatted text contains spaces that need to be preserved in the final result.</p>\n<h2>Formatted Code in HTML Addendum:</h2>\n<p>After verifying the solution provided by aterai solves the added spaces between spans issue, I found 2 other issues with copying code from a JTextPane to the clipboard in an HTML format:</p>\n<ol>\n<li>My code's leading indentation was lost when displayed.</li>\n<li>Each <code>&lt;p&gt;</code> tag added additional line spacing.</li>\n</ol>\n<p>This was fixed by using string replacement to edit the output HTML:</p>\n<ol>\n<li>Wrap the body in a <code>&lt;pre&gt;</code> tag.</li>\n<li>Remove <code>&lt;p&gt;</code> tags, and replace <code>&lt;p/&gt;</code> tags with <code>&lt;br/&gt;</code>.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>String contents = outputStream.toString();\n\n// fix preservation of whitespace\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;body&gt;&quot;), &quot;&lt;body&gt;&lt;pre&gt;&quot;);\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;/body&gt;&quot;), &quot;&lt;/pre&gt;&lt;/body&gt;&quot;);\n\n// fix line spacing\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;p class=default&gt;&quot;), &quot;&quot;);\ncontents = contents.replaceAll(Pattern.quote(&quot;&lt;/p&gt;&quot;), &quot;&lt;br/&gt;&quot;);\n\nHTMLTransferable htmlTransferable = new HTMLTransferable(contents);\n</code></pre>\n"},{"tags":["java","docker","gitlab","arm","gitlab-ci"],"answers":[{"tags":[],"owner":{"account_id":7575391,"reputation":32359,"user_id":5747944,"display_name":"sytech"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1636636179,"creation_date":1636635304,"answer_id":69928664,"question_id":69927882,"body_markdown":"&gt; no manifest for linux/amd64 in the manifest list entries\r\n\r\nWhen you pull docker images, docker checks the manifest in dockerhub to see if there is an image that matches the architecture of your system.\r\n\r\nGitLab CI runners run on linux/amd64 architecture, not ARM. You can&#39;t pull/run images for other platforms. The repository `arm32v7/adoptopenjdk` is only available for the ARM CPU architecture. So, you are unable to pull that image on gitlab runners.\r\n\r\n\r\nSome things you can do:\r\n\r\n1. Use the multi-architecture repository in your dockerfile&#39;s `FROM` line like `adoptopenjdk` (or its replacement [`eclipse-temurin`](https://hub.docker.com/_/eclipse-temurin/)) instead of the single architecture `arm32v7/adoptopenjdk` repository.  \r\nThis is the usual way of doing things. Docker will pull the correct architecture image automatically\r\n2. Self-host your own gitlab-runner on an ARM-based system\r\n3. Use `docker buildx` for [multi platform builds](https://docs.docker.com/buildx/working-with-buildx/) (requires qemu virtual machines supporting your desired architectures) [guide for gitlab runners here](https://www.auroria.io/docker-multi-architecture-builds-with-gitlab-runner/)\r\n\r\nHowever, you need to make sure that, when selecting a tag, it exists for your desired architectures. For example, you can see this image is available for both `linux/arm/v7` and `linux/amd64`. So pulling `eclipse-temurin:11-jdk-focal` will work both on your ARM system and on GitLab CI runners. \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pSRI8.png\r\n\r\nHowever, if you are making derivative images and you intend to push them to your registry and pull them on your raspberry pi, you will still need to build both architectures and push them to your registry (e.g. using `docker buildx` for multi-arch builds) as mentioned above in (3).","title":"Build Docker Image OpenJDK16+ for ARM on Gitlab Runners","body":"<blockquote>\n<p>no manifest for linux/amd64 in the manifest list entries</p>\n</blockquote>\n<p>When you pull docker images, docker checks the manifest in dockerhub to see if there is an image that matches the architecture of your system.</p>\n<p>GitLab CI runners run on linux/amd64 architecture, not ARM. You can't pull/run images for other platforms. The repository <code>arm32v7/adoptopenjdk</code> is only available for the ARM CPU architecture. So, you are unable to pull that image on gitlab runners.</p>\n<p>Some things you can do:</p>\n<ol>\n<li>Use the multi-architecture repository in your dockerfile's <code>FROM</code> line like <code>adoptopenjdk</code> (or its replacement <a href=\"https://hub.docker.com/_/eclipse-temurin/\" rel=\"nofollow noreferrer\"><code>eclipse-temurin</code></a>) instead of the single architecture <code>arm32v7/adoptopenjdk</code> repository.<br />\nThis is the usual way of doing things. Docker will pull the correct architecture image automatically</li>\n<li>Self-host your own gitlab-runner on an ARM-based system</li>\n<li>Use <code>docker buildx</code> for <a href=\"https://docs.docker.com/buildx/working-with-buildx/\" rel=\"nofollow noreferrer\">multi platform builds</a> (requires qemu virtual machines supporting your desired architectures) <a href=\"https://www.auroria.io/docker-multi-architecture-builds-with-gitlab-runner/\" rel=\"nofollow noreferrer\">guide for gitlab runners here</a></li>\n</ol>\n<p>However, you need to make sure that, when selecting a tag, it exists for your desired architectures. For example, you can see this image is available for both <code>linux/arm/v7</code> and <code>linux/amd64</code>. So pulling <code>eclipse-temurin:11-jdk-focal</code> will work both on your ARM system and on GitLab CI runners.</p>\n<p><a href=\"https://i.stack.imgur.com/pSRI8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pSRI8.png\" alt=\"enter image description here\" /></a></p>\n<p>However, if you are making derivative images and you intend to push them to your registry and pull them on your raspberry pi, you will still need to build both architectures and push them to your registry (e.g. using <code>docker buildx</code> for multi-arch builds) as mentioned above in (3).</p>\n"}],"owner":{"account_id":4202976,"reputation":278,"user_id":3442635,"accept_rate":75,"display_name":"PurplePanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":993,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":69928664,"answer_count":1,"score":2,"last_activity_date":1681235286,"creation_date":1636631741,"question_id":69927882,"body_markdown":"I&#39;m currently working on a Java application that I run on my Raspberry 3B+ (arm32v7). I&#39;m building my JAR on Java 14 and building a Docker Image using this Dockerfile.\r\n\r\n```lang-docker\r\nFROM arm32v7/adoptopenjdk:14.0.2_8-jdk-hotspot-bionic\r\nCOPY /build/libs/project-1.0-SNAPSHOT.jar my-jar.jar\r\nCMD java -jar my-jar.jar\r\n```\r\nThis is working pretty fine. I&#39;m using Gitlab CI to build my jar and my Docker Image, using the following :\r\n\r\n```lang-yml\r\nimage: openjdk:14-jdk-slim\r\n    \r\nbefore_script:\r\n  - export GRADLE_USER_HOME=`pwd`/.gradle\r\n\r\nstages:\r\n  - build\r\n  - package\r\n\r\ngradle-build:\r\n  stage: build\r\n  script: &quot;./gradlew build&quot;\r\n  artifacts:\r\n    paths:\r\n      - build/libs/*.jar\r\n\r\ndocker-build:\r\n  image: docker:stable\r\n  services:\r\n    - docker:dind\r\n  stage: package\r\n  before_script:\r\n    - docker login -u gitlab-ci-token -p $CI_JOB_TOKEN $CI_REGISTRY\r\n  script:\r\n    - export DOCKER_HOST=tcp://docker:2375/\r\n    - docker build -t registry.gitlab.com/mygitlab/project .\r\n    - docker push registry.gitlab.com/mygitlab/project\r\n  tags:\r\n    - docker\r\n```\r\n\r\nThe problem is that every time I tried to upgrade my version of Java in my Docker image, I get the following error : \r\n\r\n&gt; Step 1/4 : FROM arm32v7/adoptopenjdk:16-jre 16-jre: Pulling from arm32v7/adoptopenjdk no manifest for linux/amd64 in the manifest list entries\r\n\r\nI&#39;m having this issue with a lot of arm32v7 compatible images. In fact, the one that I&#39;m using right now seems to be the only one working.\r\n\r\nI&#39;m still a beginner on Docker and I&#39;m not sure to understand clearly my problem. For my understanding, the Gitlab Runner that I&#39;m using can&#39;t figure out the image I&#39;m trying to use, but how can I change that? \r\n\r\nThank you for your help.\r\n","title":"Build Docker Image OpenJDK16+ for ARM on Gitlab Runners","body":"<p>I'm currently working on a Java application that I run on my Raspberry 3B+ (arm32v7). I'm building my JAR on Java 14 and building a Docker Image using this Dockerfile.</p>\n<pre class=\"lang-docker prettyprint-override\"><code>FROM arm32v7/adoptopenjdk:14.0.2_8-jdk-hotspot-bionic\nCOPY /build/libs/project-1.0-SNAPSHOT.jar my-jar.jar\nCMD java -jar my-jar.jar\n</code></pre>\n<p>This is working pretty fine. I'm using Gitlab CI to build my jar and my Docker Image, using the following :</p>\n<pre class=\"lang-yml prettyprint-override\"><code>image: openjdk:14-jdk-slim\n    \nbefore_script:\n  - export GRADLE_USER_HOME=`pwd`/.gradle\n\nstages:\n  - build\n  - package\n\ngradle-build:\n  stage: build\n  script: &quot;./gradlew build&quot;\n  artifacts:\n    paths:\n      - build/libs/*.jar\n\ndocker-build:\n  image: docker:stable\n  services:\n    - docker:dind\n  stage: package\n  before_script:\n    - docker login -u gitlab-ci-token -p $CI_JOB_TOKEN $CI_REGISTRY\n  script:\n    - export DOCKER_HOST=tcp://docker:2375/\n    - docker build -t registry.gitlab.com/mygitlab/project .\n    - docker push registry.gitlab.com/mygitlab/project\n  tags:\n    - docker\n</code></pre>\n<p>The problem is that every time I tried to upgrade my version of Java in my Docker image, I get the following error :</p>\n<blockquote>\n<p>Step 1/4 : FROM arm32v7/adoptopenjdk:16-jre 16-jre: Pulling from arm32v7/adoptopenjdk no manifest for linux/amd64 in the manifest list entries</p>\n</blockquote>\n<p>I'm having this issue with a lot of arm32v7 compatible images. In fact, the one that I'm using right now seems to be the only one working.</p>\n<p>I'm still a beginner on Docker and I'm not sure to understand clearly my problem. For my understanding, the Gitlab Runner that I'm using can't figure out the image I'm trying to use, but how can I change that?</p>\n<p>Thank you for your help.</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9485,"page":507,"page_size":100}
