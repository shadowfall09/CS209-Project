{"items":[{"tags":["java","css","jsp"],"comments":[{"owner":{"account_id":1637743,"reputation":549,"user_id":1510770,"display_name":"Jegg"},"score":0,"creation_date":1435256603,"post_id":31057812,"comment_id":50136952,"body_markdown":"Right click on that component in the page and click &quot;inspect element&quot; . check its style , It maybe override.","body":"Right click on that component in the page and click &quot;inspect element&quot; . check its style , It maybe override."},{"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"score":0,"creation_date":1435262128,"post_id":31057812,"comment_id":50139944,"body_markdown":"Changed the class name to class=&quot;TableHeadertd&quot; Still doesnt work on chrome and firefox.","body":"Changed the class name to class=&quot;TableHeadertd&quot; Still doesnt work on chrome and firefox."},{"owner":{"account_id":229478,"reputation":4806,"user_id":1874113,"accept_rate":67,"display_name":"walkeros"},"score":0,"creation_date":1512840568,"post_id":31057812,"comment_id":82422995,"body_markdown":"you are missing HEAD tag. Try adding it and put stylehseet link inside.","body":"you are missing HEAD tag. Try adding it and put stylehseet link inside."}],"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690019959,"creation_date":1435256184,"question_id":31057812,"body_markdown":"I have an issue where my CSS is not getting picked up in chrome and firefox but works well in IE8. I didn&#39;t check in higher versions of IE though.\r\n\r\nBelow is the code where you can see Soo.css is included in the top and I&#39;m trying to access the CSS for ```class=&quot;TableHeader&quot;``` in the 2nd td in the table.\r\n\r\nI can see the hyperlink for &#39;Home&#39; in IE8 but not in chrome and firefox. But if I remove the ```clas=&quot;tableheader&quot;```, I can see the hyperlink for &quot;Home&quot; in both the browser.\r\n\r\nI don&#39;t see why it shouldn&#39;t work across browsers. What is the right way to include? I have so many pages where it just works fine. Below is the code snippet:\r\n\r\n    &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\r\n    \r\n    &lt;%@ taglib uri=&quot;/WEB-INF/struts-html.tld&quot; prefix=&quot;html&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;/WEB-INF/abc.tld&quot; prefix=&quot;abc&quot; %&gt;\r\n    \r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; pageEncoding=&quot;ISO-8859-1&quot; %&gt;\r\n    \r\n    &lt;%@ page import=&quot;java.util.*&quot; %&gt;\r\n    &lt;%@ page import=&quot;java.text.*&quot; %&gt;\r\n    \r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;\r\n    &lt;meta name=&quot;GENERATOR&quot; content=&quot;IBM WebSphere Studio&quot;&gt;\r\n    \r\n    &lt;meta http-equiv=&quot;Content-Style-Type&quot; content=&quot;text/css&quot;&gt;\r\n    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;%=request.getContextPath()%&gt;/theme/Soo.css&quot;/&gt;\r\n    \r\n    &lt;%\r\n    Locale locales = Locale.US;\r\n    SimpleDateFormat SFormatDate;\r\n    DateFormat CurrentYear;\r\n    CurrentYear = DateFormat.getDateInstance(DateFormat.LONG, locales);\r\n    Date today = new Date();\r\n    SFormatDate = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;, locales);\r\n    CurrentYear = new SimpleDateFormat(&quot;yyyy &quot;, locales);\r\n    String flag = &quot;N&quot;;\r\n    %&gt;\r\n    \r\n    &lt;center&gt;\r\n    &lt;table width=&quot;100%&quot; border=&quot;1&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; summary=&quot;Table used for formatting.&quot;&gt;\r\n    \t&lt;tbody&gt;\r\n    \t&lt;tr&gt;\r\n    \t\t&lt;td colspan=&quot;3&quot;&gt;\r\n    \t\t\t&lt;a href=&quot;http://www.abc&quot; target=&quot;_blank&quot; title=&quot;www.abc&quot;&gt;\r\n    \t\t\t\t&lt;img src=&quot;&lt;%=request.getContextPath()%&gt;/images/p1_abc_logo.gif&quot; width=&quot;157&quot; height=&quot;25&quot; border=&quot;0&quot; alt=&quot;Click here to go to www.abc.&quot;&gt;\r\n    \t\t\t&lt;/a&gt;\r\n    \t\t&lt;/td&gt;\r\n    \t\t&lt;td align=&quot;right&quot; colspan=&quot;1&quot;&gt;\r\n    \t\t\t&lt;img alt=&quot;Skip Repetitive Navigation Links&quot; border=&quot;0&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/images/test_blank.gif&quot;&gt; \r\n    \t\t\t&lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; \r\n    \t\t\t&lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/i2_chgrequest.cfm&quot;\r\n    \t\t\t   style=&quot;color: black&quot; \r\n    \t\t\t   target=&quot;system_feedback&quot; \r\n    \t\t\t   title=&quot;Feedback&quot;&gt;Feedback&lt;/a&gt;\r\n    \t\t\t&lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; \r\n    \t\t\t&lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/profile/index.cfm?fa=profile&quot;\r\n    \t\t\t   title=&quot;Click for Personal Profile&quot; \r\n    \t\t\t   style=&quot;color: black&quot;&gt;Personal Profile&lt;/a&gt;\r\n    \t\t\t&lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt;\r\n    \t\t\t&lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/logout.cfm&quot; \r\n    \t\t\t   style=&quot;color: black&quot; \r\n    \t\t\t   title=&quot;Logout&quot;&gt;Logout&lt;/a&gt;\r\n    \t \t\t&lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; &lt;a name=&quot;skipnav1&quot;&gt;&lt;/a&gt;\r\n    \t \t&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    \t&lt;!-- Side Bar --&gt;\r\n    \t&lt;tr valign=&quot;top&quot;&gt;\r\n    \t&lt;td nowrap width=&quot;12%&quot; class=&quot;TableHeader&quot; colspan=&quot;1&quot;&gt;\r\n    \t&lt;img alt=&quot;Skip Repetitive Navigation Links&quot; border=&quot;0&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/images/test_blank.gif&quot;&gt; &lt;br&gt;\r\n    \t\t&lt;br&gt;\r\n    \t\t&lt;p style=&quot;margin-left: 1em; margin-right: 1em&quot;&gt;\r\n    \t\t\t&lt;!-- remove href before code freeze --&gt;\r\n    \t\t\t&lt;!--a href=&quot;&lt;%=request.getContextPath()%&gt;/test.jsp&quot; style=&quot;text-decoration: none; color: white&quot;&gt; Back to Main Menu &lt;/a--&gt;\r\n    \t\t\t&lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/viewer001/i3_menu.cfm?fa=account_menu&amp;group=BMEU&amp;toplevelpage=true&quot; \r\n    \t\t\t   title=&quot;Message Center&quot; \r\n    \t\t\t   style=&quot;text-decoration: none; color: white&quot;&gt;Home&lt;/a&gt;\r\n    \t\t&lt;/p&gt;\r\n    \t&lt;/td&gt;\r\n    \t&lt;/tr&gt;\r\n    &lt;/tbody&gt;\t\r\n    &lt;/table&gt;\r\n","title":"css included in JSP is not working across browser","body":"<p>I have an issue where my CSS is not getting picked up in chrome and firefox but works well in IE8. I didn't check in higher versions of IE though.</p>\n<p>Below is the code where you can see Soo.css is included in the top and I'm trying to access the CSS for <code>class=&quot;TableHeader&quot;</code> in the 2nd td in the table.</p>\n<p>I can see the hyperlink for 'Home' in IE8 but not in chrome and firefox. But if I remove the <code>clas=&quot;tableheader&quot;</code>, I can see the hyperlink for &quot;Home&quot; in both the browser.</p>\n<p>I don't see why it shouldn't work across browsers. What is the right way to include? I have so many pages where it just works fine. Below is the code snippet:</p>\n<pre><code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;\n\n&lt;%@ taglib uri=&quot;/WEB-INF/struts-html.tld&quot; prefix=&quot;html&quot; %&gt;\n&lt;%@ taglib uri=&quot;/WEB-INF/abc.tld&quot; prefix=&quot;abc&quot; %&gt;\n\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot; pageEncoding=&quot;ISO-8859-1&quot; %&gt;\n\n&lt;%@ page import=&quot;java.util.*&quot; %&gt;\n&lt;%@ page import=&quot;java.text.*&quot; %&gt;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=ISO-8859-1&quot;&gt;\n&lt;meta name=&quot;GENERATOR&quot; content=&quot;IBM WebSphere Studio&quot;&gt;\n\n&lt;meta http-equiv=&quot;Content-Style-Type&quot; content=&quot;text/css&quot;&gt;\n&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;&lt;%=request.getContextPath()%&gt;/theme/Soo.css&quot;/&gt;\n\n&lt;%\nLocale locales = Locale.US;\nSimpleDateFormat SFormatDate;\nDateFormat CurrentYear;\nCurrentYear = DateFormat.getDateInstance(DateFormat.LONG, locales);\nDate today = new Date();\nSFormatDate = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;, locales);\nCurrentYear = new SimpleDateFormat(&quot;yyyy &quot;, locales);\nString flag = &quot;N&quot;;\n%&gt;\n\n&lt;center&gt;\n&lt;table width=&quot;100%&quot; border=&quot;1&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; summary=&quot;Table used for formatting.&quot;&gt;\n    &lt;tbody&gt;\n    &lt;tr&gt;\n        &lt;td colspan=&quot;3&quot;&gt;\n            &lt;a href=&quot;http://www.abc&quot; target=&quot;_blank&quot; title=&quot;www.abc&quot;&gt;\n                &lt;img src=&quot;&lt;%=request.getContextPath()%&gt;/images/p1_abc_logo.gif&quot; width=&quot;157&quot; height=&quot;25&quot; border=&quot;0&quot; alt=&quot;Click here to go to www.abc.&quot;&gt;\n            &lt;/a&gt;\n        &lt;/td&gt;\n        &lt;td align=&quot;right&quot; colspan=&quot;1&quot;&gt;\n            &lt;img alt=&quot;Skip Repetitive Navigation Links&quot; border=&quot;0&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/images/test_blank.gif&quot;&gt; \n            &lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; \n            &lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/i2_chgrequest.cfm&quot;\n               style=&quot;color: black&quot; \n               target=&quot;system_feedback&quot; \n               title=&quot;Feedback&quot;&gt;Feedback&lt;/a&gt;\n            &lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; \n            &lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/profile/index.cfm?fa=profile&quot;\n               title=&quot;Click for Personal Profile&quot; \n               style=&quot;color: black&quot;&gt;Personal Profile&lt;/a&gt;\n            &lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt;\n            &lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/logout.cfm&quot; \n               style=&quot;color: black&quot; \n               title=&quot;Logout&quot;&gt;Logout&lt;/a&gt;\n            &lt;span style=&quot;color: gray&quot;&gt;|&lt;/span&gt; &lt;a name=&quot;skipnav1&quot;&gt;&lt;/a&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;!-- Side Bar --&gt;\n    &lt;tr valign=&quot;top&quot;&gt;\n    &lt;td nowrap width=&quot;12%&quot; class=&quot;TableHeader&quot; colspan=&quot;1&quot;&gt;\n    &lt;img alt=&quot;Skip Repetitive Navigation Links&quot; border=&quot;0&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/images/test_blank.gif&quot;&gt; &lt;br&gt;\n        &lt;br&gt;\n        &lt;p style=&quot;margin-left: 1em; margin-right: 1em&quot;&gt;\n            &lt;!-- remove href before code freeze --&gt;\n            &lt;!--a href=&quot;&lt;%=request.getContextPath()%&gt;/test.jsp&quot; style=&quot;text-decoration: none; color: white&quot;&gt; Back to Main Menu &lt;/a--&gt;\n            &lt;a href=&quot;&lt;%=request.getContextPath()%&gt;/../../../pol1/viewer001/i3_menu.cfm?fa=account_menu&amp;group=BMEU&amp;toplevelpage=true&quot; \n               title=&quot;Message Center&quot; \n               style=&quot;text-decoration: none; color: white&quot;&gt;Home&lt;/a&gt;\n        &lt;/p&gt;\n    &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/tbody&gt;    \n&lt;/table&gt;\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":6,"creation_date":1689962277,"post_id":76740209,"comment_id":135291946,"body_markdown":"`fullString.contains(testStr)`?","body":"<code>fullString.contains(testStr)</code>?"},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1689964792,"post_id":76740209,"comment_id":135292313,"body_markdown":"@Turing85, I asked this question because in my real use case scenario `testStr` is a constant, which, obviously, is never `null`, and `fullString` may be null and I was trying to avoid NPE. Maybe it would be easier to check for nullity.","body":"@Turing85, I asked this question because in my real use case scenario <code>testStr</code> is a constant, which, obviously, is never <code>null</code>, and <code>fullString</code> may be null and I was trying to avoid NPE. Maybe it would be easier to check for nullity."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1689965015,"post_id":76740209,"comment_id":135292349,"body_markdown":"Well... `Optional.ofNullable(fullString).orElse(&quot;&quot;).contains(testStr);`","body":"Well... <code>Optional.ofNullable(fullString).orElse(&quot;&quot;).contains(testStr)&zwnj;&#8203;;</code>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689965137,"post_id":76740209,"comment_id":135292373,"body_markdown":"Shouldn&#39;t that, and any other key information, be in the question itself?","body":"Shouldn&#39;t that, and any other key information, be in the question itself?"},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":0,"creation_date":1689965357,"post_id":76740209,"comment_id":135292410,"body_markdown":"@HovercraftFullOfEels, I updated the question.","body":"@HovercraftFullOfEels, I updated the question."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1689965590,"post_id":76740209,"comment_id":135292443,"body_markdown":"Thank you, and I updated it some more. Best to only have problem specific information in the question without meta information.","body":"Thank you, and I updated it some more. Best to only have problem specific information in the question without meta information."}],"answers":[{"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1689962890,"post_id":76740268,"comment_id":135292041,"body_markdown":"This should be a comment, not an answer.","body":"This should be a comment, not an answer."},{"owner":{"account_id":14091770,"reputation":45,"user_id":10179865,"display_name":"Harley Sun"},"score":1,"creation_date":1689962955,"post_id":76740268,"comment_id":135292060,"body_markdown":"I don&#39;t have enough points to comment","body":"I don&#39;t have enough points to comment"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1689962993,"post_id":76740268,"comment_id":135292066,"body_markdown":"This is no excuse.","body":"This is no excuse."},{"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"score":1,"creation_date":1689964013,"post_id":76740268,"comment_id":135292193,"body_markdown":"To avoid NullPointerException.","body":"To avoid NullPointerException."},{"owner":{"account_id":9685245,"reputation":9531,"user_id":7185318,"accept_rate":88,"display_name":"Luatic"},"score":2,"creation_date":1689966628,"post_id":76740268,"comment_id":135292586,"body_markdown":"@Turing85 well it does answer the question, doesn&#39;t it?","body":"@Turing85 well it does answer the question, doesn&#39;t it?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":3,"creation_date":1689966711,"post_id":76740268,"comment_id":135292599,"body_markdown":"@Luatic [not in itfs first revision](https://stackoverflow.com/revisions/76740268/1) (which my comment was aimed at).","body":"@Luatic <a href=\"https://stackoverflow.com/revisions/76740268/1\">not in itfs first revision</a> (which my comment was aimed at)."}],"tags":[],"owner":{"account_id":14091770,"reputation":45,"user_id":10179865,"display_name":"Harley Sun"},"comment_count":6,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690019627,"creation_date":1689962687,"answer_id":76740268,"question_id":76740209,"body_markdown":"    fullstring.contains(testStr)\r\n\r\nTo avoid `NullPointerException`s, use an `if` statement and `&amp;&amp;` operator:\r\n\r\n    if (fullstring != null &amp;&amp; fullstring.contains(testStr)) {\r\n        // your logic\r\n    }\r\n\r\nIf `fullstring` is null, the second part won&#39;t execute.\r\n\r\nEdit: I thought null was falsy.\r\n\r\n","title":"How to check if a String is contained in another String in Java?","body":"<pre><code>fullstring.contains(testStr)\n</code></pre>\n<p>To avoid <code>NullPointerException</code>s, use an <code>if</code> statement and <code>&amp;&amp;</code> operator:</p>\n<pre><code>if (fullstring != null &amp;&amp; fullstring.contains(testStr)) {\n    // your logic\n}\n</code></pre>\n<p>If <code>fullstring</code> is null, the second part won't execute.</p>\n<p>Edit: I thought null was falsy.</p>\n"},{"tags":[],"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689963253,"creation_date":1689963253,"answer_id":76740325,"question_id":76740209,"body_markdown":"&gt; Is it possible to check if a `String` is contained in another `String` in Java?\r\n\r\nOf course.\r\n\r\n&gt; It would be the opposite of the contains method accomplishes.\r\n\r\nNot really. For `a` and `b` both non-null references to `String`s, your hypothetical `a.isContainedBy(b)` is equivalent to `b.contains(a)`.  Which is what you should use.","title":"How to check if a String is contained in another String in Java?","body":"<blockquote>\n<p>Is it possible to check if a <code>String</code> is contained in another <code>String</code> in Java?</p>\n</blockquote>\n<p>Of course.</p>\n<blockquote>\n<p>It would be the opposite of the contains method accomplishes.</p>\n</blockquote>\n<p>Not really. For <code>a</code> and <code>b</code> both non-null references to <code>String</code>s, your hypothetical <code>a.isContainedBy(b)</code> is equivalent to <code>b.contains(a)</code>.  Which is what you should use.</p>\n"},{"comments":[{"owner":{"account_id":11390996,"reputation":300,"user_id":10334839,"display_name":"HomeworkHopper"},"score":0,"creation_date":1689966387,"post_id":76740587,"comment_id":135292547,"body_markdown":"Or, for the price of just one more character, we have the following functionally-equivalent version: `Optional.ofNullable(fullString).filter(s -&gt; s.contains(testStr)).isPresent();`... Optionals are certainly a versatile tool","body":"Or, for the price of just one more character, we have the following functionally-equivalent version: <code>Optional.ofNullable(fullString).filter(s -&gt; s.contains(testStr)).isPresent();</code>... Optionals are certainly a versatile tool"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1689966614,"post_id":76740587,"comment_id":135292581,"body_markdown":"@HomeworkHopper you are right. In this case I feel that a `.orElse(&quot;&quot;).contains(...)` or `.map( ...contains(...)).orElse(...)` conveys more of the semantics. But that is of course only my opinion.","body":"@HomeworkHopper you are right. In this case I feel that a <code>.orElse(&quot;&quot;).contains(...)</code> or <code>.map( ...contains(...)).orElse(...)</code> conveys more of the semantics. But that is of course only my opinion."},{"owner":{"account_id":11390996,"reputation":300,"user_id":10334839,"display_name":"HomeworkHopper"},"score":0,"creation_date":1689967470,"post_id":76740587,"comment_id":135292692,"body_markdown":"I agree, but sometimes it&#39;s nice to show that there are many ways to approach the same problem. Perhaps some would prefer an entirely different method, such as: `Objects.requireNonNullElse(fullString, &quot;&quot;).contains(testString);`. It all comes down to preference","body":"I agree, but sometimes it&#39;s nice to show that there are many ways to approach the same problem. Perhaps some would prefer an entirely different method, such as: <code>Objects.requireNonNullElse(fullString, &quot;&quot;).contains(testString);</code>. It all comes down to preference"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690190589,"post_id":76740587,"comment_id":135313688,"body_markdown":"@HomeworkHopper or just `fullstring != null &amp;&amp; fullstring.contains(testStr)` which is simpler than all other variants.","body":"@HomeworkHopper or just <code>fullstring != null &amp;&amp; fullstring.contains(testStr)</code> which is simpler than all other variants."}],"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689967115,"creation_date":1689965998,"answer_id":76740587,"question_id":76740209,"body_markdown":"I propose the following, `null`-safe alternative:\r\n\r\n    Optional.ofNullable(fullString)\r\n      .orElse(&quot;&quot;)\r\n      .contains(testStr);\r\n\r\n[&lt;kbd&gt;`Ideone.com` demo&lt;/kbd&gt;][ideone]\r\n\r\nWhen `fullStr` is in fact `null` then `&quot;&quot;` will be used, and `.contains(...)` will almost always&lt;sup&gt;1&lt;/sup&gt; evaluate to `false`.\r\n\r\nIf we want to always return `false` when `fullStr` is null, we can use:\r\n\r\n    Optional.ofNullable(fullString)\r\n      .map(s -&gt; s.contains(testStr))\r\n      .orElse(false);\r\n\r\n[&lt;kbd&gt;`Ideone.com` demo&lt;/kbd&gt;][idetwo]\r\n\r\nNote that this solution will return `false` when both `fullString` and `testStr` are `null`. I know that `testStr` is guaranteed to be `!= null`, but thought it might be worth mentioning.\r\n\r\n---\r\n\r\n&lt;sub&gt;&lt;sup&gt;1&lt;/sup&gt;It will evaluate to `true` when `testStr` is `&quot;&quot;` as well&lt;/sub&gt;\r\n\r\n[comment]: https://stackoverflow.com/questions/76740209/how-to-check-if-a-string-is-contained-in-another-string-in-java?noredirect=1#comment135292313_76740209\r\n\r\n[ideone]: https://ideone.com/Ifd0e0\r\n\r\n[idetwo]: https://ideone.com/cUL8nB","title":"How to check if a String is contained in another String in Java?","body":"<p>I propose the following, <code>null</code>-safe alternative:</p>\n<pre><code>Optional.ofNullable(fullString)\n  .orElse(&quot;&quot;)\n  .contains(testStr);\n</code></pre>\n<p><a href=\"https://ideone.com/Ifd0e0\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n<p>When <code>fullStr</code> is in fact <code>null</code> then <code>&quot;&quot;</code> will be used, and <code>.contains(...)</code> will almost always<sup>1</sup> evaluate to <code>false</code>.</p>\n<p>If we want to always return <code>false</code> when <code>fullStr</code> is null, we can use:</p>\n<pre><code>Optional.ofNullable(fullString)\n  .map(s -&gt; s.contains(testStr))\n  .orElse(false);\n</code></pre>\n<p><a href=\"https://ideone.com/cUL8nB\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n<p>Note that this solution will return <code>false</code> when both <code>fullString</code> and <code>testStr</code> are <code>null</code>. I know that <code>testStr</code> is guaranteed to be <code>!= null</code>, but thought it might be worth mentioning.</p>\n<hr />\n<p><sub><sup>1</sup>It will evaluate to <code>true</code> when <code>testStr</code> is <code>&quot;&quot;</code> as well</sub></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690013457,"creation_date":1689968059,"answer_id":76740776,"question_id":76740209,"body_markdown":"&gt; _&quot;Is it possible to check if a `String` is contained in another `String` in Java?_\r\n&gt;\r\n&gt; _It would be the opposite of the [contains method](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#contains-java.lang.CharSequence-) accomplishes.\r\n ...&quot;_\r\n\r\nFor logic; a completely valid question.\r\n\r\nBy the way, technically you mean the &quot;inverse&quot;, rather.  \r\nThe &quot;opposite&quot; would be if the value does not contain the other value.\r\n\r\nSo, if _testStr_ is within _fullString_, and not if _fullString_ contains _testStr_.\r\n\r\nJust write a _isContained_ method, to qualify the condition.\r\n\r\n```java\r\nboolean isContained(String substring, String string) {\r\n    return string.contains(substring);\r\n}\r\n```\r\n\r\nAnd, if you want to ignore the case, you can use the following.\r\n\r\n```java\r\nboolean isContained(String substring, String string) {\r\n    return string.toLowerCase().contains(substring.toLowerCase());\r\n}\r\n```\r\n\r\nSo, here is a usage.\r\n\r\n```java\r\nfinal String testStr = &quot;Some String.&quot;;\r\nfinal String fullString = &quot;This text contains Some String.&quot;;\r\nif (isContained(testStr, fullString)) {\r\n    // Your logic.\r\n}\r\n```\r\n\r\nFurthermore, you&#39;re saying that _testStr_ may be _null_.\r\n\r\nIn this case, just provide a check before-hand, to avoid the _NullPointerException_.\r\n\r\n```java\r\nboolean isContained(String substring, String string) {\r\n    if (string == null || substring == null) return false;\r\n    return string.contains(substring);\r\n}\r\n```","title":"How to check if a String is contained in another String in Java?","body":"<blockquote>\n<p><em>&quot;Is it possible to check if a <code>String</code> is contained in another <code>String</code> in Java?</em></p>\n<p><em>It would be the opposite of the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#contains-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">contains method</a> accomplishes.\n...&quot;</em></p>\n</blockquote>\n<p>For logic; a completely valid question.</p>\n<p>By the way, technically you mean the &quot;inverse&quot;, rather.<br />\nThe &quot;opposite&quot; would be if the value does not contain the other value.</p>\n<p>So, if <em>testStr</em> is within <em>fullString</em>, and not if <em>fullString</em> contains <em>testStr</em>.</p>\n<p>Just write a <em>isContained</em> method, to qualify the condition.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isContained(String substring, String string) {\n    return string.contains(substring);\n}\n</code></pre>\n<p>And, if you want to ignore the case, you can use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isContained(String substring, String string) {\n    return string.toLowerCase().contains(substring.toLowerCase());\n}\n</code></pre>\n<p>So, here is a usage.</p>\n<pre class=\"lang-java prettyprint-override\"><code>final String testStr = &quot;Some String.&quot;;\nfinal String fullString = &quot;This text contains Some String.&quot;;\nif (isContained(testStr, fullString)) {\n    // Your logic.\n}\n</code></pre>\n<p>Furthermore, you're saying that <em>testStr</em> may be <em>null</em>.</p>\n<p>In this case, just provide a check before-hand, to avoid the <em>NullPointerException</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean isContained(String substring, String string) {\n    if (string == null || substring == null) return false;\n    return string.contains(substring);\n}\n</code></pre>\n"}],"owner":{"account_id":1789975,"reputation":1548,"user_id":1630619,"accept_rate":77,"display_name":"Philippe Gioseffi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":7,"up_vote_count":2,"accepted_answer_id":76740776,"answer_count":4,"score":-5,"last_activity_date":1690019627,"creation_date":1689962181,"question_id":76740209,"body_markdown":"Is it possible to check if a `String` is contained in another `String` in Java?\r\n\r\nIt would be the inverse of what the [contains method](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#contains-java.lang.CharSequence-) accomplishes.\r\n\r\nExample:\r\n\r\n    final String testStr = &quot;Some String.&quot;;\r\n    final String fullString = &quot;This text contains Some String.&quot;;\r\n    if (testStr.isContained(fullString)) {\r\n        // Your logic.\r\n    }\r\n\r\nIn my real use case, I have the following code:\r\n\r\n    final String testStr = anyMethod(); // null is a possibility here.\r\n    if (testStr.contains(AnyClass.STRING_CONSTANT) {\r\n        // Your logic here.\r\n    }\r\n\r\nSince `testStr` can be `null` and I&#39;m always comparing it to a [tag:constant], I tried to reverse the comparison in order to avoid [NullPointerException](https://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html) or to be forced to compare `testStr` against `null` first.","title":"How to check if a String is contained in another String in Java?","body":"<p>Is it possible to check if a <code>String</code> is contained in another <code>String</code> in Java?</p>\n<p>It would be the inverse of what the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#contains-java.lang.CharSequence-\" rel=\"nofollow noreferrer\">contains method</a> accomplishes.</p>\n<p>Example:</p>\n<pre><code>final String testStr = &quot;Some String.&quot;;\nfinal String fullString = &quot;This text contains Some String.&quot;;\nif (testStr.isContained(fullString)) {\n    // Your logic.\n}\n</code></pre>\n<p>In my real use case, I have the following code:</p>\n<pre><code>final String testStr = anyMethod(); // null is a possibility here.\nif (testStr.contains(AnyClass.STRING_CONSTANT) {\n    // Your logic here.\n}\n</code></pre>\n<p>Since <code>testStr</code> can be <code>null</code> and I'm always comparing it to a <a href=\"/questions/tagged/constant\" class=\"post-tag\" title=\"show questions tagged &#39;constant&#39;\" aria-label=\"show questions tagged &#39;constant&#39;\" rel=\"tag\" aria-labelledby=\"tag-constant-tooltip-container\">constant</a>, I tried to reverse the comparison in order to avoid <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/NullPointerException.html\" rel=\"nofollow noreferrer\">NullPointerException</a> or to be forced to compare <code>testStr</code> against <code>null</code> first.</p>\n"},{"tags":["java","string","hashmap"],"comments":[{"owner":{"account_id":1799577,"reputation":5303,"user_id":1638237,"accept_rate":59,"display_name":"nafas"},"score":0,"creation_date":1415112056,"post_id":26737802,"comment_id":42061683,"body_markdown":"hmmm can&#39;t u use String.contains(&quot;student&quot;) for each entry?","body":"hmmm can&#39;t u use String.contains(&quot;student&quot;) for each entry?"},{"owner":{"account_id":1619120,"reputation":1419,"user_id":1496080,"accept_rate":74,"display_name":"damian"},"score":0,"creation_date":1415112073,"post_id":26737802,"comment_id":42061693,"body_markdown":"A HashMap uses the hash of a string, and not the string itself. So there&#39;s no way you can do what you&#39;re looking for. You can either transform the `vo.getSubClassDesc()` to match your key or get the `keySet()` and iterate through that keyset and use `vo.getSubClassDesc().contains(key)`","body":"A HashMap uses the hash of a string, and not the string itself. So there&#39;s no way you can do what you&#39;re looking for. You can either transform the <code>vo.getSubClassDesc()</code> to match your key or get the <code>keySet()</code> and iterate through that keyset and use <code>vo.getSubClassDesc().contains(key)</code>"},{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":0,"creation_date":1415112166,"post_id":26737802,"comment_id":42061763,"body_markdown":"*Is there an easy way where I can compare the key value with the subClassDesc that works similar to String contains()?* With the current methods provided by Java built-in classes, no. You should traverse the keys in your map and do the `String#contains` as expected, and the easiness of this approach depends on the programmer (in this case, you). Probably you want to use a different structure to accomplish what you want/need.","body":"<i>Is there an easy way where I can compare the key value with the subClassDesc that works similar to String contains()?</i> With the current methods provided by Java built-in classes, no. You should traverse the keys in your map and do the <code>String#contains</code> as expected, and the easiness of this approach depends on the programmer (in this case, you). Probably you want to use a different structure to accomplish what you want/need."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1415114099,"post_id":26737802,"comment_id":42063042,"body_markdown":"From your example it seems you believe that &quot;Student Lists&quot; should match &quot;Student List as of last month&quot;. How would you define your criterion exactly? A common prefix? Or did you make a mistake and the key should have been &quot;Student Lists&quot; and then the criterion is &quot;key is a prefix of given string&quot;?","body":"From your example it seems you believe that &quot;Student Lists&quot; should match &quot;Student List as of last month&quot;. How would you define your criterion exactly? A common prefix? Or did you make a mistake and the key should have been &quot;Student Lists&quot; and then the criterion is &quot;key is a prefix of given string&quot;?"},{"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"score":0,"creation_date":1415114655,"post_id":26737802,"comment_id":42063410,"body_markdown":"@RealSkeptic...You are right...Key is a prefix of a given String in the above case &quot;Student Lists&quot; of the String &quot;Student List as of last month&quot;","body":"@RealSkeptic...You are right...Key is a prefix of a given String in the above case &quot;Student Lists&quot; of the String &quot;Student List as of last month&quot;"},{"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"score":1,"creation_date":1415115379,"post_id":26737802,"comment_id":42063927,"body_markdown":"If you can afford to use Guava, you can use an `Equivalence`","body":"If you can afford to use Guava, you can use an <code>Equivalence</code>"},{"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"score":0,"creation_date":1415115772,"post_id":26737802,"comment_id":42064204,"body_markdown":"@fge..Yes i can use Guava. So can I use the same Hashmap and iterate or should I follow a different way. I have not used Guava though.","body":"@fge..Yes i can use Guava. So can I use the same Hashmap and iterate or should I follow a different way. I have not used Guava though."}],"answers":[{"tags":[],"owner":{"account_id":248570,"reputation":2517,"user_id":524010,"display_name":"Sezin Karli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415113518,"creation_date":1415113518,"answer_id":26738438,"question_id":26737802,"body_markdown":"There&#39;s no direct way to do it in built-in java classes. You must do\r\n\r\n    vo.getSubClassDesc().contains(key)\r\n\r\nby looping on `feeListsMap` object&#39;s `key`s.","title":"HashMap ContainsKey vs contains","body":"<p>There's no direct way to do it in built-in java classes. You must do</p>\n\n<pre><code>vo.getSubClassDesc().contains(key)\n</code></pre>\n\n<p>by looping on <code>feeListsMap</code> object's <code>key</code>s.</p>\n"}],"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1317,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690019238,"creation_date":1415111746,"question_id":26737802,"body_markdown":"I have a scenario like below.\r\n\r\nI have a utility class with the foll. method.\r\n\r\n    public static Map&lt;String, String&gt; getFeeList() {\r\n    \t\tMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n    \t\tmap.put(&quot;Student Lists&quot;, &quot;Student List&quot;);\r\n    \t\tmap.put(&quot;Student grade&quot;, &quot;Student Grade&quot;);\r\n    \t\treturn map;\r\n    }\r\n\t\r\n\t\r\nI am calling this method in the JSP and comparing it with another value like below,\r\n\r\nfeeListsMap below is nothing but ```class.getFeeList()``` set to request and retrieving in JSP.\r\n\r\n    &lt;% if(feeListsMap.containsKey(vo.getSubClassDesc())){%&gt;\r\n    &lt;td align=&quot;center&quot;&gt;0&lt;/td&gt;\t\t\r\n    &lt;%}else{%&gt;\r\n    &lt;td align=&quot;center&quot;&gt;TEST&lt;/td&gt;\t\t\r\n    &lt;%}%&gt;\r\n\r\nFrom above ```vo.getSubClassDesc()``` may contain some suffixes like &#39;Student List as of today&#39;, &#39;Student List as of last month&#39;...\r\n\r\nBut the above check in JSP will retrieve only exact key value and won&#39;t work for &#39;Student List as of today&#39;, &#39;Student List as of last month&#39;.\r\n\r\nI do not want to use substring here because the map may contain more key value pair and I do not want to use substring all the time.\r\nIs there an easy way where I can compare the key value with the subClassDesc that works similar to String ```contains()```?","title":"HashMap ContainsKey vs contains","body":"<p>I have a scenario like below.</p>\n<p>I have a utility class with the foll. method.</p>\n<pre><code>public static Map&lt;String, String&gt; getFeeList() {\n        Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n        map.put(&quot;Student Lists&quot;, &quot;Student List&quot;);\n        map.put(&quot;Student grade&quot;, &quot;Student Grade&quot;);\n        return map;\n}\n</code></pre>\n<p>I am calling this method in the JSP and comparing it with another value like below,</p>\n<p>feeListsMap below is nothing but <code>class.getFeeList()</code> set to request and retrieving in JSP.</p>\n<pre><code>&lt;% if(feeListsMap.containsKey(vo.getSubClassDesc())){%&gt;\n&lt;td align=&quot;center&quot;&gt;0&lt;/td&gt;       \n&lt;%}else{%&gt;\n&lt;td align=&quot;center&quot;&gt;TEST&lt;/td&gt;        \n&lt;%}%&gt;\n</code></pre>\n<p>From above <code>vo.getSubClassDesc()</code> may contain some suffixes like 'Student List as of today', 'Student List as of last month'...</p>\n<p>But the above check in JSP will retrieve only exact key value and won't work for 'Student List as of today', 'Student List as of last month'.</p>\n<p>I do not want to use substring here because the map may contain more key value pair and I do not want to use substring all the time.\nIs there an easy way where I can compare the key value with the subClassDesc that works similar to String <code>contains()</code>?</p>\n"},{"tags":["java","recursion","linked-list","insert"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689989377,"post_id":76741886,"comment_id":135294749,"body_markdown":"You need to write another private helper method which takes two parameters. The public method calls it, then it calls itself.","body":"You need to write another private helper method which takes two parameters. The public method calls it, then it calls itself."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690019212,"creation_date":1690019212,"answer_id":76743211,"question_id":76741886,"body_markdown":"&gt; given that the main method, which we are not supposed to change, only takes the one parameter, I&#39;m not sure what to do.\r\n\r\nThe way out of this paradox is to create a second method. This method can take the extra node argument, and can be private as only the existing method will use it. It can *return* the node that would be the head if this was the first call, but it is up to the caller to do with it what is needed: either assign it to `head` or assign it to the preceding node&#39;s `next` attribute.\r\n\r\nSo:\r\n\r\n```\r\n    private Node&lt;E&gt; insert(Node&lt;E&gt; first, E data) {\r\n        if (first == null || data.compareTo(first.data) &lt; 0) {\r\n            Node&lt;E&gt; temp = new Node&lt;E&gt;(data);\r\n            temp.next = first;\r\n            return temp;\r\n        }\r\n        first.next = insert(first.next, data);\r\n        return first;\r\n    }\r\n    \r\n    public void insert(E data) {\r\n        head = insert(head, data);\r\n    }\r\n```\r\n","title":"How do I build a recursive insert method into a sorted list in Java?","body":"<blockquote>\n<p>given that the main method, which we are not supposed to change, only takes the one parameter, I'm not sure what to do.</p>\n</blockquote>\n<p>The way out of this paradox is to create a second method. This method can take the extra node argument, and can be private as only the existing method will use it. It can <em>return</em> the node that would be the head if this was the first call, but it is up to the caller to do with it what is needed: either assign it to <code>head</code> or assign it to the preceding node's <code>next</code> attribute.</p>\n<p>So:</p>\n<pre><code>    private Node&lt;E&gt; insert(Node&lt;E&gt; first, E data) {\n        if (first == null || data.compareTo(first.data) &lt; 0) {\n            Node&lt;E&gt; temp = new Node&lt;E&gt;(data);\n            temp.next = first;\n            return temp;\n        }\n        first.next = insert(first.next, data);\n        return first;\n    }\n    \n    public void insert(E data) {\n        head = insert(head, data);\n    }\n</code></pre>\n"}],"owner":{"account_id":14735654,"reputation":11,"user_id":10641776,"display_name":"Ian Brown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690019212,"creation_date":1689985964,"question_id":76741886,"body_markdown":"The code given for the iterative version is\r\n\r\n```\r\npublic void insert(E data) {\r\n        Node&lt;E&gt; temp = new Node&lt;E&gt;(data);\r\n\r\n        if (head == null || data.compareTo(head.data) &lt; 0) {\r\n            temp.next = head;\r\n            head = temp;\r\n        } else{\r\n            Node&lt;E&gt; curr = head;\r\n            while (curr.next != null &amp;&amp; data.compareTo(curr.next.data) &gt;=\r\n                    0) {\r\n                curr = curr.next;\r\n            }\r\n            temp.next = curr.next;\r\n            curr.next = temp;\r\n        }\r\n```\r\nWhich makes enough sense to me, but I&#39;m for some reason struggling to wrap my head around how to correctly implement it recursively. \r\n\r\nMy basic, not even psuedocode idea is have the base cases be &quot;If the list is empty, the element is inserted at the head. If the element is less than the next node&#39;s value, insert it as the current node&#39;s next value.&quot; and then the recursion call is just to run it again at the next node. However, given that the main method, which we are not supposed to change, only takes the one parameter, I&#39;m not sure what to do. I had hoped that since the slides we were taught about linked list seemed to imply the `curr` reference variable was always around, that this could be used. Something along the lines of iterating that in the case neither base case was fulfilled. However, A) that has not been working when I&#39;ve tried it, and B) that would make it so that the method would not work correctly beyond its first call, since returning `curr` to the head within the method would happen each time its called recursively. I am at a loss right now and could really use help. I&#39;ve even attempted googling this problem to no avail, with solutions that either use multiple parameters and ones that ignore the fact the list is supposed to stay sorted. Thanks in advance for any help you&#39;d be able to provide!","title":"How do I build a recursive insert method into a sorted list in Java?","body":"<p>The code given for the iterative version is</p>\n<pre><code>public void insert(E data) {\n        Node&lt;E&gt; temp = new Node&lt;E&gt;(data);\n\n        if (head == null || data.compareTo(head.data) &lt; 0) {\n            temp.next = head;\n            head = temp;\n        } else{\n            Node&lt;E&gt; curr = head;\n            while (curr.next != null &amp;&amp; data.compareTo(curr.next.data) &gt;=\n                    0) {\n                curr = curr.next;\n            }\n            temp.next = curr.next;\n            curr.next = temp;\n        }\n</code></pre>\n<p>Which makes enough sense to me, but I'm for some reason struggling to wrap my head around how to correctly implement it recursively.</p>\n<p>My basic, not even psuedocode idea is have the base cases be &quot;If the list is empty, the element is inserted at the head. If the element is less than the next node's value, insert it as the current node's next value.&quot; and then the recursion call is just to run it again at the next node. However, given that the main method, which we are not supposed to change, only takes the one parameter, I'm not sure what to do. I had hoped that since the slides we were taught about linked list seemed to imply the <code>curr</code> reference variable was always around, that this could be used. Something along the lines of iterating that in the case neither base case was fulfilled. However, A) that has not been working when I've tried it, and B) that would make it so that the method would not work correctly beyond its first call, since returning <code>curr</code> to the head within the method would happen each time its called recursively. I am at a loss right now and could really use help. I've even attempted googling this problem to no avail, with solutions that either use multiple parameters and ones that ignore the fact the list is supposed to stay sorted. Thanks in advance for any help you'd be able to provide!</p>\n"},{"tags":["java","client","opentripplanner"],"owner":{"account_id":11813430,"reputation":81,"user_id":14662172,"display_name":"Chuck Nuris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690019155,"creation_date":1690019155,"question_id":76743210,"body_markdown":"Hello fellow developers,\r\n\r\nI have set up an [OpenTripPlanner][1] (OTP) [planner service][2] on my server at xx.xx.xx.xx:xxxx/router/default/plan. The service allows me to send a GET request, including the RouteRequest, which I want to process. In return, the server provides the RouteResponse in JSON format. I am now looking for a client solution that can handle sending the RouteRequest to the API and conveniently give me the [RouteResponse][3] back as an answer from the API.\r\n\r\nI understand that OpenTripPlanner is a vast open-source project, so there might be existing solutions for this, but I haven&#39;t been able to find one that suits my needs. I want to avoid manually converting the RouteRequest into a String that contains the GET request URL.\r\n\r\nMy tech stack involves Java for my project. Therefore, I am seeking assistance from experienced developers who might have dealt with a similar challenge in their Java projects and have knowledge of a suitable client library or method to achieve this seamlessly.\r\n\r\nTo summarize the question: How can I efficiently utilize a client to send a RouteRequest to the OpenTripPlanner API, obtain the RouteResponse, and process it internally in my Java project without resorting to manual URL conversion?\r\n\r\nAny insights, suggestions, or code examples would be highly appreciated. Thank you in advance for your expertise!\r\n\r\n\r\n  [1]: http://dev.opentripplanner.org/apidoc/0.15.0/rest.html\r\n  [2]: http://dev.opentripplanner.org/apidoc/0.15.0/resource_PlannerResource.html\r\n  [3]: http://dev.opentripplanner.org/apidoc/0.15.0/el_ns0_response.html","title":"How to use a client for OpenTripPlanner router service to process RouteRequest and obtain RouteResponse?","body":"<p>Hello fellow developers,</p>\n<p>I have set up an <a href=\"http://dev.opentripplanner.org/apidoc/0.15.0/rest.html\" rel=\"nofollow noreferrer\">OpenTripPlanner</a> (OTP) <a href=\"http://dev.opentripplanner.org/apidoc/0.15.0/resource_PlannerResource.html\" rel=\"nofollow noreferrer\">planner service</a> on my server at xx.xx.xx.xx:xxxx/router/default/plan. The service allows me to send a GET request, including the RouteRequest, which I want to process. In return, the server provides the RouteResponse in JSON format. I am now looking for a client solution that can handle sending the RouteRequest to the API and conveniently give me the <a href=\"http://dev.opentripplanner.org/apidoc/0.15.0/el_ns0_response.html\" rel=\"nofollow noreferrer\">RouteResponse</a> back as an answer from the API.</p>\n<p>I understand that OpenTripPlanner is a vast open-source project, so there might be existing solutions for this, but I haven't been able to find one that suits my needs. I want to avoid manually converting the RouteRequest into a String that contains the GET request URL.</p>\n<p>My tech stack involves Java for my project. Therefore, I am seeking assistance from experienced developers who might have dealt with a similar challenge in their Java projects and have knowledge of a suitable client library or method to achieve this seamlessly.</p>\n<p>To summarize the question: How can I efficiently utilize a client to send a RouteRequest to the OpenTripPlanner API, obtain the RouteResponse, and process it internally in my Java project without resorting to manual URL conversion?</p>\n<p>Any insights, suggestions, or code examples would be highly appreciated. Thank you in advance for your expertise!</p>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":1726292,"reputation":2791,"user_id":1580864,"accept_rate":74,"display_name":"Mark W"},"score":4,"creation_date":1399923325,"post_id":23617372,"comment_id":36258997,"body_markdown":"Calling .next on the iterator moves to the next element. You called it twice in your while loop.","body":"Calling .next on the iterator moves to the next element. You called it twice in your while loop."},{"owner":{"account_id":1441481,"reputation":10825,"user_id":1361506,"display_name":"azurefrog"},"score":1,"creation_date":1399923330,"post_id":23617372,"comment_id":36259003,"body_markdown":"each time you call `next()` you are getting a new object.","body":"each time you call <code>next()</code> you are getting a new object."}],"answers":[{"tags":[],"owner":{"account_id":1764995,"reputation":36209,"user_id":1611055,"accept_rate":91,"display_name":"Andreas Fester"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1399923655,"creation_date":1399923336,"answer_id":23617406,"question_id":23617372,"body_markdown":"When your `if` condition is `true`, you are calling `next()` twice:\r\n\r\n    if (itr.next().length() &gt; longest.length()) {\r\n        longest = itr.next();\r\n    ...\r\n\r\nThus, inside the `if` body, you are assigning the length of the **next** value, not the current one, to `longest`.\r\n\r\n`Iterator.next()` returns the current value from the collection, but at the same time, advances the iterator to the next element.\r\n\r\nNote that your second call to `itr.next()` might throw a `NoSuchElementException` if there is no next element. Always call `Iterator.next()` only **once** after you have checked with `Iterator.hasNext()` whether there is a next element available.\r\n\r\nEven better, use the [foreach loop][1] which handles all the boilerplate:\r\n\r\n    for (String current : list) {\r\n        ....\r\n        // &quot;current&quot; now points to the current element\r\n    }\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html","title":"Calling next on an Iterator once vs multiple times","body":"<p>When your <code>if</code> condition is <code>true</code>, you are calling <code>next()</code> twice:</p>\n\n<pre><code>if (itr.next().length() &gt; longest.length()) {\n    longest = itr.next();\n...\n</code></pre>\n\n<p>Thus, inside the <code>if</code> body, you are assigning the length of the <strong>next</strong> value, not the current one, to <code>longest</code>.</p>\n\n<p><code>Iterator.next()</code> returns the current value from the collection, but at the same time, advances the iterator to the next element.</p>\n\n<p>Note that your second call to <code>itr.next()</code> might throw a <code>NoSuchElementException</code> if there is no next element. Always call <code>Iterator.next()</code> only <strong>once</strong> after you have checked with <code>Iterator.hasNext()</code> whether there is a next element available.</p>\n\n<p>Even better, use the <a href=\"http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html\">foreach loop</a> which handles all the boilerplate:</p>\n\n<pre><code>for (String current : list) {\n    ....\n    // \"current\" now points to the current element\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4443644,"reputation":1307,"user_id":3617573,"accept_rate":62,"display_name":"Alexandre FILLATRE"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1399923354,"creation_date":1399923354,"answer_id":23617411,"question_id":23617372,"body_markdown":"Because on the first code, you&#39;ll never write the first element down, because you&#39;re calling `next()` without using it. Then you call `next()` 2 times in each loop, so you&#39;ll get only 1 over 2 result","title":"Calling next on an Iterator once vs multiple times","body":"<p>Because on the first code, you'll never write the first element down, because you're calling <code>next()</code> without using it. Then you call <code>next()</code> 2 times in each loop, so you'll get only 1 over 2 result</p>\n"},{"tags":[],"owner":{"account_id":4392279,"reputation":11804,"user_id":3580294,"accept_rate":80,"display_name":"awksp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1399923446,"creation_date":1399923446,"answer_id":23617439,"question_id":23617372,"body_markdown":"Count the number of times `next()` is called in the first snipped compared to the second:\r\n\r\n    while (itr.hasNext()) {\r\n        if (itr.next().length() &gt; longest.length()) {\r\n            ^^^^^^^^^^\r\n            longest = itr.next();\r\n                      ^^^^^^^^^^\r\n        }\r\n    }\r\n\r\ncompared to \r\n\r\n    while (itr.hasNext()) {\r\n        String current = itr.next();\r\n                         ^^^^^^^^^^\r\n        if (current.length() &gt; longest.length()) {\r\n            longest = current;\r\n        }\r\n    }\r\n\r\nEvery time you call `itr.next()`, you advance the iterator another token. So in the first snippet, you only store/compare *every other* token, while in the second snippet you store/compare the *same* token.","title":"Calling next on an Iterator once vs multiple times","body":"<p>Count the number of times <code>next()</code> is called in the first snipped compared to the second:</p>\n\n<pre><code>while (itr.hasNext()) {\n    if (itr.next().length() &gt; longest.length()) {\n        ^^^^^^^^^^\n        longest = itr.next();\n                  ^^^^^^^^^^\n    }\n}\n</code></pre>\n\n<p>compared to </p>\n\n<pre><code>while (itr.hasNext()) {\n    String current = itr.next();\n                     ^^^^^^^^^^\n    if (current.length() &gt; longest.length()) {\n        longest = current;\n    }\n}\n</code></pre>\n\n<p>Every time you call <code>itr.next()</code>, you advance the iterator another token. So in the first snippet, you only store/compare <em>every other</em> token, while in the second snippet you store/compare the <em>same</em> token.</p>\n"},{"tags":[],"owner":{"account_id":28589583,"reputation":1,"user_id":21889125,"display_name":"Ali Esmaeili"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690018725,"creation_date":1690018725,"answer_id":76743177,"question_id":23617372,"body_markdown":"in the correct version you call the next method once and it&#39;s working well.\r\nbut in the first one, you move the cursor twice and the result is different from what you expect.\r\nevery time we call next or previous, the cursor moves.","title":"Calling next on an Iterator once vs multiple times","body":"<p>in the correct version you call the next method once and it's working well.\nbut in the first one, you move the cursor twice and the result is different from what you expect.\nevery time we call next or previous, the cursor moves.</p>\n"}],"owner":{"display_name":"user2904961"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4803,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":23617406,"answer_count":4,"score":2,"last_activity_date":1690018725,"creation_date":1399923193,"question_id":23617372,"body_markdown":"Why this first version of the code does not work \r\n\r\n              // returns the longest string in the list (does not work!)\r\n\r\n             public static String longest(LinkedList&lt;String&gt; list) {\r\n                  Iterator&lt;String&gt; itr = list.iterator();\r\n                  String longest = itr.next(); // initialize to first element\r\n    \r\n                  while (itr.hasNext()) {\r\n                      if (itr.next().length() &gt; longest.length()) {\r\n                         longest = itr.next();\r\n                      } \r\n                  }\r\n                  return longest;\r\n             }\r\n\r\nbut the second version of the code will ?\r\n\r\n           // this version of the code is correct\r\n\r\n           while (itr.hasNext()) {\r\n               String current = itr.next();\r\n               if (current.length() &gt; longest.length()) {\r\n                   longest = current;\r\n               }\r\n           }","title":"Calling next on an Iterator once vs multiple times","body":"<p>Why this first version of the code does not work </p>\n\n<pre><code>          // returns the longest string in the list (does not work!)\n\n         public static String longest(LinkedList&lt;String&gt; list) {\n              Iterator&lt;String&gt; itr = list.iterator();\n              String longest = itr.next(); // initialize to first element\n\n              while (itr.hasNext()) {\n                  if (itr.next().length() &gt; longest.length()) {\n                     longest = itr.next();\n                  } \n              }\n              return longest;\n         }\n</code></pre>\n\n<p>but the second version of the code will ?</p>\n\n<pre><code>       // this version of the code is correct\n\n       while (itr.hasNext()) {\n           String current = itr.next();\n           if (current.length() &gt; longest.length()) {\n               longest = current;\n           }\n       }\n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","resourcebundle"],"owner":{"account_id":25844895,"reputation":1,"user_id":19579893,"display_name":"geeks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690017738,"creation_date":1690005614,"question_id":76742506,"body_markdown":"For first time, I&#39;m using Intellij IDEA for setting up my first Gradle project. I&#39;m seeing the following error while reading data from resource bundle.\r\n\r\n```\r\njava.util.MissingResourceException: Can&#39;t find bundle for base name org.example.module.MessagesBundle, locale en\r\n\tat java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1581)\r\n\tat java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1396)\r\n\tat java.util.ResourceBundle.getBundle(ResourceBundle.java:854)\r\n\tat org.example.Main.getMessageFromBundle(Main.java:19)\r\n\tat org.example.Main.main(Main.java:12)\r\n```\r\n\r\nI&#39;m adding sample code from project.\r\n\r\n[Project structure](https://i.stack.imgur.com/anJUm.png)\r\n\r\nMain class\r\n\r\n```\r\n/*\r\n * This Java source file was generated by the Gradle &#39;init&#39; task.\r\n */\r\npackage org.example;\r\n\r\nimport java.util.Locale;\r\nimport java.util.MissingResourceException;\r\nimport java.util.ResourceBundle;\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n\r\n        System.out.println(&quot;Hello world!&quot;);\r\n        System.out.println(getMessageFromBundle(&quot;MYCODE01&quot;, &quot;org.example.module&quot;));\r\n    }\r\n\r\n    private static String getMessageFromBundle(String code, String resourceBundle) {\r\n\r\n        try {\r\n\r\n            ResourceBundle bundle = ResourceBundle.getBundle(resourceBundle + &quot;.MessagesBundle&quot;, Locale.ENGLISH);\r\n            return bundle.getString(code);\r\n\r\n        } catch (MissingResourceException e) {\r\n\r\n            e.printStackTrace();\r\n            return  &quot;&quot;;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nResource bundle\r\n```\r\nMYCODE01=My test message\r\n```\r\n\r\nbuild.gradle\r\n\r\n```\r\nplugins {\r\n    id &#39;java-library&#39;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    testImplementation platform(&#39;org.junit:junit-bom:5.9.1&#39;)\r\n    testImplementation &#39;org.junit.jupiter:junit-jupiter&#39;\r\n}\r\n\r\ntest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\n\r\nI tried the following things to resolve missing resource bundle issue. But issue remains same.\r\n1. Added source root in build.gradle\r\n```\r\nsourceSets {\r\n    main {\r\n        java {\r\n            srcDirs = [&#39;src/main/java&#39;]\r\n        }\r\n        resources {\r\n            srcDirs = [&#39;src/main/resources&#39;]\r\n        }\r\n    }\r\n    test {\r\n        java {\r\n            srcDirs = [&#39;src/test/java&#39;]\r\n        }\r\n        resources {\r\n            srcDirs = [&#39;src/test/resources&#39;]\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n2. Added source root in build.gradle\r\n```\r\ncompileJava {\r\n    sourceSets.main.java.srcDirs = [&#39;src/main/java&#39;]\r\n    sourceSets.main.resources.srcDirs = [&#39;src/main/resources&#39;]\r\n    sourceSets.test.java.srcDirs = [&#39;src/test/java&#39;]\r\n    sourceSets.test.resources.srcDirs = [&#39;src/test/resources&#39;]\r\n}\r\n```\r\n\r\n3. Restructured project  \r\n[Restructured project](https://i.stack.imgur.com/S6pQU.png)\r\n","title":"Can&#39;t find bundle for base name org.example.module.MessagesBundle, locale en","body":"<p>For first time, I'm using Intellij IDEA for setting up my first Gradle project. I'm seeing the following error while reading data from resource bundle.</p>\n<pre><code>java.util.MissingResourceException: Can't find bundle for base name org.example.module.MessagesBundle, locale en\n    at java.util.ResourceBundle.throwMissingResourceException(ResourceBundle.java:1581)\n    at java.util.ResourceBundle.getBundleImpl(ResourceBundle.java:1396)\n    at java.util.ResourceBundle.getBundle(ResourceBundle.java:854)\n    at org.example.Main.getMessageFromBundle(Main.java:19)\n    at org.example.Main.main(Main.java:12)\n</code></pre>\n<p>I'm adding sample code from project.</p>\n<p><a href=\"https://i.stack.imgur.com/anJUm.png\" rel=\"nofollow noreferrer\">Project structure</a></p>\n<p>Main class</p>\n<pre><code>/*\n * This Java source file was generated by the Gradle 'init' task.\n */\npackage org.example;\n\nimport java.util.Locale;\nimport java.util.MissingResourceException;\nimport java.util.ResourceBundle;\n\npublic class Main {\n\n    public static void main(String[] args) {\n\n        System.out.println(&quot;Hello world!&quot;);\n        System.out.println(getMessageFromBundle(&quot;MYCODE01&quot;, &quot;org.example.module&quot;));\n    }\n\n    private static String getMessageFromBundle(String code, String resourceBundle) {\n\n        try {\n\n            ResourceBundle bundle = ResourceBundle.getBundle(resourceBundle + &quot;.MessagesBundle&quot;, Locale.ENGLISH);\n            return bundle.getString(code);\n\n        } catch (MissingResourceException e) {\n\n            e.printStackTrace();\n            return  &quot;&quot;;\n        }\n    }\n}\n</code></pre>\n<p>Resource bundle</p>\n<pre><code>MYCODE01=My test message\n</code></pre>\n<p>build.gradle</p>\n<pre><code>plugins {\n    id 'java-library'\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    testImplementation platform('org.junit:junit-bom:5.9.1')\n    testImplementation 'org.junit.jupiter:junit-jupiter'\n}\n\ntest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>I tried the following things to resolve missing resource bundle issue. But issue remains same.</p>\n<ol>\n<li>Added source root in build.gradle</li>\n</ol>\n<pre><code>sourceSets {\n    main {\n        java {\n            srcDirs = ['src/main/java']\n        }\n        resources {\n            srcDirs = ['src/main/resources']\n        }\n    }\n    test {\n        java {\n            srcDirs = ['src/test/java']\n        }\n        resources {\n            srcDirs = ['src/test/resources']\n        }\n    }\n}\n</code></pre>\n<ol start=\"2\">\n<li>Added source root in build.gradle</li>\n</ol>\n<pre><code>compileJava {\n    sourceSets.main.java.srcDirs = ['src/main/java']\n    sourceSets.main.resources.srcDirs = ['src/main/resources']\n    sourceSets.test.java.srcDirs = ['src/test/java']\n    sourceSets.test.resources.srcDirs = ['src/test/resources']\n}\n</code></pre>\n<ol start=\"3\">\n<li>Restructured project<br />\n<a href=\"https://i.stack.imgur.com/S6pQU.png\" rel=\"nofollow noreferrer\">Restructured project</a></li>\n</ol>\n"},{"tags":["java","spring","annotations","intellij-idea","aop"],"answers":[{"comments":[{"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"score":0,"creation_date":1299967812,"post_id":5284002,"comment_id":5957772,"body_markdown":"Thanks for the answer. Ideally I would want my custom annotation to be able to handle this automagically so I don&#39;t have to add @SuppressWarnings(&quot;unused&quot;) on each method. Or are you suggesting I should annotate my annotation (rather than method) itself?","body":"Thanks for the answer. Ideally I would want my custom annotation to be able to handle this automagically so I don&#39;t have to add @SuppressWarnings(&quot;unused&quot;) on each method. Or are you suggesting I should annotate my annotation (rather than method) itself?"},{"owner":{"account_id":307607,"reputation":812,"user_id":618996,"display_name":"Vance Maverick"},"score":0,"creation_date":1299987856,"post_id":5284002,"comment_id":5959630,"body_markdown":"No, I wasn&#39;t suggesting this. I don&#39;t know how to &quot;tell IDEA which methods not to identify as unused&quot; except by using the standard annotation. Peter&#39;s suggestion is nice, but requires just as many annotaions.","body":"No, I wasn&#39;t suggesting this. I don&#39;t know how to &quot;tell IDEA which methods not to identify as unused&quot; except by using the standard annotation. Peter&#39;s suggestion is nice, but requires just as many annotaions."},{"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"score":0,"creation_date":1300018498,"post_id":5284002,"comment_id":5962249,"body_markdown":"I think Peter&#39;s @UsedViaReflection is just a pseudo code, it can be any annotation really. It isn&#39;t ideal (as I was mentioning in my question), but I guess there are no other alternatives.","body":"I think Peter&#39;s @UsedViaReflection is just a pseudo code, it can be any annotation really. It isn&#39;t ideal (as I was mentioning in my question), but I guess there are no other alternatives."}],"tags":[],"owner":{"account_id":307607,"reputation":812,"user_id":618996,"display_name":"Vance Maverick"},"comment_count":3,"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1299949434,"creation_date":1299949434,"answer_id":5284002,"question_id":5283972,"body_markdown":"`@SuppressWarnings(&quot;unused&quot;)` should work.","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p><code>@SuppressWarnings(\"unused\")</code> should work.</p>\n"},{"comments":[{"owner":{"account_id":1298254,"reputation":2903,"user_id":1248724,"accept_rate":67,"display_name":"Zarathustra"},"score":2,"creation_date":1428911171,"post_id":5284371,"comment_id":47346679,"body_markdown":"unfortunately I do not have this option, my annotation is `@WebMethod` and I am using Intellij 14.1.1 . Any idea why I do not have this option available?","body":"unfortunately I do not have this option, my annotation is <code>@WebMethod</code> and I am using Intellij 14.1.1 . Any idea why I do not have this option available?"},{"owner":{"account_id":2180789,"reputation":2466,"user_id":1930339,"display_name":"Salim"},"score":2,"creation_date":1463731264,"post_id":5284371,"comment_id":62199121,"body_markdown":"This works with recent versions like a charm. IntelliJ really comes with some magic.","body":"This works with recent versions like a charm. IntelliJ really comes with some magic."},{"owner":{"account_id":1033857,"reputation":17546,"user_id":1041641,"accept_rate":67,"display_name":"TmTron"},"score":4,"creation_date":1474358419,"post_id":5284371,"comment_id":66486560,"body_markdown":"I&#39;ve accidentally suppressed this for &quot;fields annotated with xx&quot;. To undo this operation find `&lt;component name=&quot;EntryPointsManager&quot;&gt;` in the `.idea/misc.xml` file and adapt it (don&#39;t forget to update the `list` attribute, when you change the count of items)","body":"I&#39;ve accidentally suppressed this for &quot;fields annotated with xx&quot;. To undo this operation find <code>&lt;component name=&quot;EntryPointsManager&quot;&gt;</code> in the <code>.idea&#47;misc.xml</code> file and adapt it (don&#39;t forget to update the <code>list</code> attribute, when you change the count of items)"},{"owner":{"account_id":2356843,"reputation":515,"user_id":2064459,"display_name":"Nashev"},"score":0,"creation_date":1619814412,"post_id":5284371,"comment_id":119027573,"body_markdown":"Maybe this action is hidden at the &quot;More actions...&quot; link at the bottom right corner in a warning&#39;s hint window","body":"Maybe this action is hidden at the &quot;More actions...&quot; link at the bottom right corner in a warning&#39;s hint window"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":4,"down_vote_count":0,"up_vote_count":95,"is_accepted":true,"score":95,"last_activity_date":1299959466,"creation_date":1299953029,"answer_id":5284371,"question_id":5283972,"body_markdown":"You can tell IntelliJ to not to warn about used for any method/field annotated with the annotation the &quot;unused&quot; method has. \r\n\r\nIt should be a quick fix all you have to do is hit &amp;lt;Alt&gt;+&amp;lt;Enter&gt; and select `Suppress for methods annotated by ...`\r\n\r\nYou don&#39;t need to add anything to you code and you only have to do this once per annotation.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1O95H.png","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p>You can tell IntelliJ to not to warn about used for any method/field annotated with the annotation the \"unused\" method has. </p>\n\n<p>It should be a quick fix all you have to do is hit &lt;Alt>+&lt;Enter> and select <code>Suppress for methods annotated by ...</code></p>\n\n<p>You don't need to add anything to you code and you only have to do this once per annotation.</p>\n\n<p><img src=\"https://i.stack.imgur.com/1O95H.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":2376705,"reputation":37064,"user_id":2079831,"accept_rate":100,"display_name":"Andrew"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1405697114,"creation_date":1405697114,"answer_id":24828608,"question_id":5283972,"body_markdown":"In the &quot;Settings&quot; you can &quot;uncheck&quot; Settings - Inspections - Declaration redundancy - Unused Declaration code inspection.","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p>In the \"Settings\" you can \"uncheck\" Settings - Inspections - Declaration redundancy - Unused Declaration code inspection.</p>\n"},{"tags":[],"owner":{"account_id":1298254,"reputation":2903,"user_id":1248724,"accept_rate":67,"display_name":"Zarathustra"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1428911583,"creation_date":1428911583,"answer_id":29600386,"question_id":5283972,"body_markdown":"@Peter Lawrey s solution did not help in my version of Intellij (14.1.1).\r\n\r\nI used the hard way around:Settings-Editor-&gt;Inspections-&gt;Unused declarion\r\nNow there is an Options point, scroll down to `Configure annotations...` and you can add your annotation there.\r\n","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p>@Peter Lawrey s solution did not help in my version of Intellij (14.1.1).</p>\n\n<p>I used the hard way around:Settings-Editor->Inspections->Unused declarion\nNow there is an Options point, scroll down to <code>Configure annotations...</code> and you can add your annotation there.</p>\n"},{"tags":[],"owner":{"account_id":25856287,"reputation":1,"user_id":19589478,"display_name":"Daniel Su&#225;rez Bobes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690016878,"creation_date":1690016878,"answer_id":76743048,"question_id":5283972,"body_markdown":"In case anyone is finding trouble with this at the moment, here is how you can configure it in IntelliJ IDEA&#39;s current version:\r\n[Route viewn][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TBzLs.png\r\n\r\nFile &gt; Settings &gt; Editor &gt; Inspections &gt; Unused declaration &gt; Entry Points &gt; Annotations... &gt; Mark as entry point if annotated by\r\n\r\nReally useful for @Beans!","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p>In case anyone is finding trouble with this at the moment, here is how you can configure it in IntelliJ IDEA's current version:\n<a href=\"https://i.stack.imgur.com/TBzLs.png\" rel=\"nofollow noreferrer\">Route viewn</a></p>\n<p>File &gt; Settings &gt; Editor &gt; Inspections &gt; Unused declaration &gt; Entry Points &gt; Annotations... &gt; Mark as entry point if annotated by</p>\n<p>Really useful for @Beans!</p>\n"}],"owner":{"account_id":4774,"reputation":26513,"user_id":7345,"accept_rate":81,"display_name":"mindas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20564,"favorite_count":0,"down_vote_count":0,"up_vote_count":67,"accepted_answer_id":5284371,"answer_count":5,"score":67,"last_activity_date":1690016878,"creation_date":1299949180,"question_id":5283972,"body_markdown":"IntelliJ IDEA has a handy feature to detect unused methods and show them in grey, hinting a potential warning for dead code.\r\n\r\nSome methods, however, are not executed directly but via reflection. A good example would be `@RequestMapping`-annotated methods which are executed by Spring. IntelliJ has decent Spring integration hence it detects this annotation and does not mark such a method as unused.\r\n\r\nI have a tiny AJAX framework where I use my own annotation to point which method to execute based on certain HTTP request properties (very similar to what `@RequestMapping` is doing). Understandably, IntelliJ has no idea what does my annotation stand for and and marks such a method as unused, adding unnecessary noise.\r\n\r\nI was thinking of:\r\n\r\n  - annotating my annotation with another annotation, but are there any standard ones that would do the job without any extra effort?\r\n  - finding a particular setting in IntelliJ to identify custom annotation for marking methods as used, but this would require other team members to do the same, basically a pain.\r\n\r\nCan anyone suggest any ideas how to solve this problem?","title":"Telling IntelliJ IDEA which methods not to identify as unused","body":"<p>IntelliJ IDEA has a handy feature to detect unused methods and show them in grey, hinting a potential warning for dead code.</p>\n\n<p>Some methods, however, are not executed directly but via reflection. A good example would be <code>@RequestMapping</code>-annotated methods which are executed by Spring. IntelliJ has decent Spring integration hence it detects this annotation and does not mark such a method as unused.</p>\n\n<p>I have a tiny AJAX framework where I use my own annotation to point which method to execute based on certain HTTP request properties (very similar to what <code>@RequestMapping</code> is doing). Understandably, IntelliJ has no idea what does my annotation stand for and and marks such a method as unused, adding unnecessary noise.</p>\n\n<p>I was thinking of:</p>\n\n<ul>\n<li>annotating my annotation with another annotation, but are there any standard ones that would do the job without any extra effort?</li>\n<li>finding a particular setting in IntelliJ to identify custom annotation for marking methods as used, but this would require other team members to do the same, basically a pain.</li>\n</ul>\n\n<p>Can anyone suggest any ideas how to solve this problem?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1690014901,"post_id":76742924,"comment_id":135296238,"body_markdown":"Getting 2 has little to do with multi-threading. Try doing everything in the same thread. `ThreadExample.instances.add(new ThreadExample());` and then `System.out.println(ThreadExample.instances.size());`. You&#39;d get 2.","body":"Getting 2 has little to do with multi-threading. Try doing everything in the same thread. <code>ThreadExample.instances.add(new ThreadExample());</code> and then <code>System.out.println(ThreadExample.instances.size());</code>. You&#39;d get 2."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1690014923,"post_id":76742924,"comment_id":135296239,"body_markdown":"There&#39;s no thread safety here. The output is undefined (though it will be 0, 1, or 2).","body":"There&#39;s no thread safety here. The output is undefined (though it will be 0, 1, or 2)."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1690015132,"post_id":76742924,"comment_id":135296259,"body_markdown":"What is `ThreadWrite`?","body":"What is <code>ThreadWrite</code>?"}],"answers":[{"comments":[{"owner":{"account_id":28431404,"reputation":23,"user_id":21752030,"display_name":"MUSA BEYTEKİN"},"score":0,"creation_date":1690015372,"post_id":76742945,"comment_id":135296273,"body_markdown":"Yes, I missed it. It has nothing to do with the thread.","body":"Yes, I missed it. It has nothing to do with the thread."}],"tags":[],"owner":{"account_id":24792239,"reputation":413,"user_id":18675173,"display_name":"lant"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":true,"score":3,"last_activity_date":1690015012,"creation_date":1690015012,"answer_id":76742945,"question_id":76742924,"body_markdown":"Because you added twice.\r\nYou add a object.\r\n\r\n    ThreadExample.instances.add(new ThreadExample());\r\n\r\nAnd you add again\r\n\r\n    instances.add(this);","title":"Why is Thread detecting two objects even though one was created?","body":"<p>Because you added twice.\nYou add a object.</p>\n<pre><code>ThreadExample.instances.add(new ThreadExample());\n</code></pre>\n<p>And you add again</p>\n<pre><code>instances.add(this);\n</code></pre>\n"}],"owner":{"account_id":28431404,"reputation":23,"user_id":21752030,"display_name":"MUSA BEYTEKİN"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1690025683,"accepted_answer_id":76742945,"answer_count":1,"score":0,"last_activity_date":1690015424,"creation_date":1690014592,"question_id":76742924,"body_markdown":"```java\r\npublic class ThreadExample {\r\n\r\n    public static ArrayList&lt;ThreadExample&gt; instances = new ArrayList&lt;ThreadExample&gt;();\r\n\r\n    public ThreadExample() {\r\n        instances.add(this);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        ThreadRead threadRead = new ThreadRead();\r\n        ThreadCreate threadCreate = new ThreadCreate();\r\n        threadCreate.start();\r\n        threadRead.start();\r\n\r\n    }\r\n\r\n}\r\n\r\nclass ThreadRead extends Thread {\r\n    public void run() {\r\n        System.out.println(ThreadExample.instances.size());\r\n    }\r\n}\r\n\r\nclass ThreadCreate extends Thread {\r\n    public void run() {\r\n        ThreadExample.instances.add(new ThreadExample());\r\n    }\r\n}\r\n```\r\n\r\nThe output of the code is &quot;2&quot;\r\n\r\nThe output I expected from the code was 1 or 0. Because if ThreadCreate reads ThreadRead at the same time while creating an object, I could expect &quot;0&quot; to come up because it will read before the construction of the object is completed. Or everything would go well and I would get the result &quot;1&quot;. What is going on here that I don&#39;t know?\r\n\r\nThanks.","title":"Why is Thread detecting two objects even though one was created?","body":"<pre class=\"lang-java prettyprint-override\"><code>public class ThreadExample {\n\n    public static ArrayList&lt;ThreadExample&gt; instances = new ArrayList&lt;ThreadExample&gt;();\n\n    public ThreadExample() {\n        instances.add(this);\n    }\n\n    public static void main(String[] args) {\n        ThreadRead threadRead = new ThreadRead();\n        ThreadCreate threadCreate = new ThreadCreate();\n        threadCreate.start();\n        threadRead.start();\n\n    }\n\n}\n\nclass ThreadRead extends Thread {\n    public void run() {\n        System.out.println(ThreadExample.instances.size());\n    }\n}\n\nclass ThreadCreate extends Thread {\n    public void run() {\n        ThreadExample.instances.add(new ThreadExample());\n    }\n}\n</code></pre>\n<p>The output of the code is &quot;2&quot;</p>\n<p>The output I expected from the code was 1 or 0. Because if ThreadCreate reads ThreadRead at the same time while creating an object, I could expect &quot;0&quot; to come up because it will read before the construction of the object is completed. Or everything would go well and I would get the result &quot;1&quot;. What is going on here that I don't know?</p>\n<p>Thanks.</p>\n"},{"tags":["java","multithreading","prometheus","grafana","jmx"],"owner":{"account_id":29068180,"reputation":1,"user_id":22267213,"display_name":"Moe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690012984,"creation_date":1690012984,"question_id":76742846,"body_markdown":"I need to create a Java application which collects JMX metrics from a running java process. For this, I am using the [JMXCollector](https://github.com/prometheus/jmx_exporter/blob/main/collector/src/main/java/io/prometheus/jmx/JmxCollector.java) class. I couldn&#39;t find the option in this to configure it for multiple iterations.\r\n\r\nI have a Java wrapper around this to schedule collection after a specified time and for a specified number of iterations. I would like to understand if there is an already existing class that I can use.","title":"How to use Prometheus&#39; JMXCollector to collect metrics over multiple iterations","body":"<p>I need to create a Java application which collects JMX metrics from a running java process. For this, I am using the <a href=\"https://github.com/prometheus/jmx_exporter/blob/main/collector/src/main/java/io/prometheus/jmx/JmxCollector.java\" rel=\"nofollow noreferrer\">JMXCollector</a> class. I couldn't find the option in this to configure it for multiple iterations.</p>\n<p>I have a Java wrapper around this to schedule collection after a specified time and for a specified number of iterations. I would like to understand if there is an already existing class that I can use.</p>\n"},{"tags":["java","angular","spring-boot","backend"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1690011559,"post_id":76742758,"comment_id":135295962,"body_markdown":"The question isn&#39;t what should go in the DTO based on the entity - The question is what fields you need in the DTO for your application.","body":"The question isn&#39;t what should go in the DTO based on the entity - The question is what fields you need in the DTO for your application."}],"answers":[{"comments":[{"owner":{"account_id":27396943,"reputation":87,"user_id":20898993,"display_name":"Thug Life"},"score":0,"creation_date":1690012376,"post_id":76742810,"comment_id":135296027,"body_markdown":"Should I not add password and id field in DTO. What if my email and username are not unique. Then how will I edit db according to the DTO recieved from frontend","body":"Should I not add password and id field in DTO. What if my email and username are not unique. Then how will I edit db according to the DTO recieved from frontend"},{"owner":{"account_id":23780861,"reputation":40,"user_id":17793566,"display_name":"Jude"},"score":0,"creation_date":1690012639,"post_id":76742810,"comment_id":135296055,"body_markdown":"1. DTO is just a container for data. If you think adding a password and id is more efficient, then add fields for them.\n2. As I said before because DTO is just a container, db doesn&#39;t necessary to be changed according to DTO","body":"1. DTO is just a container for data. If you think adding a password and id is more efficient, then add fields for them. 2. As I said before because DTO is just a container, db doesn&#39;t necessary to be changed according to DTO"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690012649,"post_id":76742810,"comment_id":135296056,"body_markdown":"@ThugLife - if those fields need to be stored in the database, then yes.  Otherwise no.  The DTO is the container for passing data from the front end to the database.","body":"@ThugLife - if those fields need to be stored in the database, then yes.  Otherwise no.  The DTO is the container for passing data from the front end to the database."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690012768,"post_id":76742810,"comment_id":135296067,"body_markdown":"If fields are required to be unique, then the database should have uniqueness constraints.  And the business logic (in the front end) may also need to be aware of this in some way.","body":"If fields are required to be unique, then the database should have uniqueness constraints.  And the business logic (in the front end) may also need to be aware of this in some way."}],"tags":[],"owner":{"account_id":23780861,"reputation":40,"user_id":17793566,"display_name":"Jude"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690012203,"creation_date":1690012203,"answer_id":76742810,"question_id":76742758,"body_markdown":"DTO, which stands for Data Transfer Object, is a container for data. It has no logics and only has getter and setter functions. For example, let&#39;s say getUser() returns information about the user. Then getUser() return DTO containing information of username, name, and email and you can access them with getter and setter.","title":"What should I put in UserDTO and why?","body":"<p>DTO, which stands for Data Transfer Object, is a container for data. It has no logics and only has getter and setter functions. For example, let's say getUser() returns information about the user. Then getUser() return DTO containing information of username, name, and email and you can access them with getter and setter.</p>\n"}],"owner":{"account_id":27396943,"reputation":87,"user_id":20898993,"display_name":"Thug Life"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76742810,"answer_count":1,"score":-3,"last_activity_date":1690012203,"creation_date":1690011325,"question_id":76742758,"body_markdown":"I have a `User` entity as following:\r\n\r\n```java\r\npackage com.yogesh.juvenilebackend.Model;\r\n\r\nimport jakarta.annotation.Generated;\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\n\r\n@Entity\r\n@Getter\r\n@Setter\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@RequiredArgsConstructor\r\npublic class User {\r\n\r\n    @Id\r\n    @GeneratedValue\r\n    @Column(updatable = false, nullable = false)\r\n    private String id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String email;\r\n\r\n    @Column(nullable = false)\r\n    private String password;\r\n\r\n    @Column(nullable = false, unique = true)\r\n    private String userName;\r\n\r\n}\r\n```\r\n\r\nWhat fields should I create inside the `userDTO` and why? What unique constraints I should add into the DTO?\r\n\r\nI have currently made this DTO:\r\n\r\n```java\r\npackage com.yogesh.juvenilebackend.DTO;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Getter;\r\nimport lombok.NonNull;\r\nimport lombok.Setter;\r\n\r\n\r\n@AllArgsConstructor\r\n@Setter\r\n@Getter\r\npublic class UserDTO {\r\n    @NonNull\r\n    private String userName;\r\n    @NonNull\r\n    private String name;\r\n    @NonNull\r\n    private String email;\r\n}\r\n```\r\n\r\nWhat should I change in it? Also, what annotations I should add in `UserDTO` and `User` member fields and what constructors I should add?","title":"What should I put in UserDTO and why?","body":"<p>I have a <code>User</code> entity as following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.yogesh.juvenilebackend.Model;\n\nimport jakarta.annotation.Generated;\nimport jakarta.persistence.*;\nimport lombok.*;\n\n@Entity\n@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n@RequiredArgsConstructor\npublic class User {\n\n    @Id\n    @GeneratedValue\n    @Column(updatable = false, nullable = false)\n    private String id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false, unique = true)\n    private String email;\n\n    @Column(nullable = false)\n    private String password;\n\n    @Column(nullable = false, unique = true)\n    private String userName;\n\n}\n</code></pre>\n<p>What fields should I create inside the <code>userDTO</code> and why? What unique constraints I should add into the DTO?</p>\n<p>I have currently made this DTO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.yogesh.juvenilebackend.DTO;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NonNull;\nimport lombok.Setter;\n\n\n@AllArgsConstructor\n@Setter\n@Getter\npublic class UserDTO {\n    @NonNull\n    private String userName;\n    @NonNull\n    private String name;\n    @NonNull\n    private String email;\n}\n</code></pre>\n<p>What should I change in it? Also, what annotations I should add in <code>UserDTO</code> and <code>User</code> member fields and what constructors I should add?</p>\n"},{"tags":["java","docker","maven","docker-compose"],"comments":[{"owner":{"account_id":18682696,"reputation":62,"user_id":13618893,"display_name":"leopanic13"},"score":0,"creation_date":1690009400,"post_id":76742648,"comment_id":135295818,"body_markdown":"Have you tried `COPY *.war /DMClient.war`? Instead of `ADD /*.war /DMClient.war`.","body":"Have you tried <code>COPY *.war &#47;DMClient.war</code>? Instead of <code>ADD &#47;*.war &#47;DMClient.war</code>."},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690009854,"post_id":76742648,"comment_id":135295845,"body_markdown":"Can you show the complete output of the `mvn package` command?","body":"Can you show the complete output of the <code>mvn package</code> command?"},{"owner":{"account_id":13863020,"reputation":137043,"user_id":10008173,"display_name":"David Maze"},"score":0,"creation_date":1690024002,"post_id":76742648,"comment_id":135297069,"body_markdown":"You asked this a couple of days ago.  Please edit your previous question to include the complete error message, not just &quot;exit code: 1&quot;; there&#39;s not enough information in either question to understand what might be going wrong.","body":"You asked this a couple of days ago.  Please edit your previous question to include the complete error message, not just &quot;exit code: 1&quot;; there&#39;s not enough information in either question to understand what might be going wrong."},{"owner":{"account_id":10579852,"reputation":1,"user_id":7794107,"display_name":"Abhi Chawla"},"score":0,"creation_date":1690030392,"post_id":76742648,"comment_id":135297695,"body_markdown":"I tried COPY *.war /DMClient.war but still getting same error.","body":"I tried COPY *.war /DMClient.war but still getting same error."},{"owner":{"account_id":10579852,"reputation":1,"user_id":7794107,"display_name":"Abhi Chawla"},"score":0,"creation_date":1690030487,"post_id":76742648,"comment_id":135297702,"body_markdown":"Below is the output where i am getting error:\nProgress (3): 2.2/2.5 MB | 1.5 MB | 92 kB    MB | 92 kB\n#0 1044.5 [output clipped, log limit 1MiB reached]\n------\nfailed to solve: executor failed running [/bin/sh -c mvn package]: exit code: 1","body":"Below is the output where i am getting error: Progress (3): 2.2/2.5 MB | 1.5 MB | 92 kB    MB | 92 kB #0 1044.5 [output clipped, log limit 1MiB reached] ------ failed to solve: executor failed running [/bin/sh -c mvn package]: exit code: 1"}],"owner":{"account_id":10579852,"reputation":1,"user_id":7794107,"display_name":"Abhi Chawla"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690023938,"answer_count":0,"score":0,"last_activity_date":1690011985,"creation_date":1690008751,"question_id":76742648,"body_markdown":"i wrote the below code for java code compilation:\r\n\r\n    FROM maven:3.6.3-jdk-11-slim AS build\r\n\r\n    WORKDIR usr/src/app\r\n\r\n    COPY . ./\r\n\r\n    RUN apt-get update &amp;&amp; apt -y upgrade\r\n\r\n    RUN mvn package\r\n\r\n    FROM tomcat:8.5-jdk8\r\n\r\n    ARG JAR_NAME=&quot;Builder&quot;\r\n\r\n    COPY DMClient.properties /usr/local/tomcat/bin\r\n    COPY DMLogin.war /usr/local/tomcat/webapps\r\n    COPY mssql-jdbc-6.4.0.jre8.jar /usr/local/tomcat/lib\r\n    COPY DMClient.xml /usr/local/tomcat/conf/Catalina/localhost/\r\n    COPY DMLogin.xml /usr/local/tomcat/conf/Catalina/localhost/\r\n    COPY DMLogin.properties /usr/local/tomcat/bin\r\n    COPY sqljdbc_auth.dll /opt/java/openjdk/lib\r\n    WORKDIR /usr/src/app\r\n\r\n    ADD /*.war /DMClient.war\r\n\r\n    COPY --from=build /usr/src/app/target/*.war /usr/local/tomcat/webapps\r\n\r\n    CMD [&quot;catalina.sh&quot;, &quot;run&quot;]\r\n\r\n\r\nAnd on building getting the below error:\r\n\r\n    #0 992.9 [output clipped, log limit 1MiB reached]\r\n    failed to solve: executor failed running [/bin/sh -c mvn package]: exit code: 1\r\n\r\n\r\n[I tried adding the below code in DockerDesktop Engine:][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6RYop.png\r\n\r\nCan someone please help me on this?","title":"Getting error &quot;failed to solve: executor failed running [/bin/sh -c mvn package]: exit code: 1&quot; on compilation of docker file","body":"<p>i wrote the below code for java code compilation:</p>\n<pre><code>FROM maven:3.6.3-jdk-11-slim AS build\n\nWORKDIR usr/src/app\n\nCOPY . ./\n\nRUN apt-get update &amp;&amp; apt -y upgrade\n\nRUN mvn package\n\nFROM tomcat:8.5-jdk8\n\nARG JAR_NAME=&quot;Builder&quot;\n\nCOPY DMClient.properties /usr/local/tomcat/bin\nCOPY DMLogin.war /usr/local/tomcat/webapps\nCOPY mssql-jdbc-6.4.0.jre8.jar /usr/local/tomcat/lib\nCOPY DMClient.xml /usr/local/tomcat/conf/Catalina/localhost/\nCOPY DMLogin.xml /usr/local/tomcat/conf/Catalina/localhost/\nCOPY DMLogin.properties /usr/local/tomcat/bin\nCOPY sqljdbc_auth.dll /opt/java/openjdk/lib\nWORKDIR /usr/src/app\n\nADD /*.war /DMClient.war\n\nCOPY --from=build /usr/src/app/target/*.war /usr/local/tomcat/webapps\n\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n<p>And on building getting the below error:</p>\n<pre><code>#0 992.9 [output clipped, log limit 1MiB reached]\nfailed to solve: executor failed running [/bin/sh -c mvn package]: exit code: 1\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/6RYop.png\" rel=\"nofollow noreferrer\">I tried adding the below code in DockerDesktop Engine:</a></p>\n<p>Can someone please help me on this?</p>\n"},{"tags":["java","android","yuv"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1690011353,"post_id":76742604,"comment_id":135295943,"body_markdown":"Note: Be careful with calling `array()` on a direct buffer without checking `hasArray()` first, as whether or not a direct buffer has a backing array [is unspecified](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/ByteBuffer.html#allocateDirect(int)).","body":"Note: Be careful with calling <code>array()</code> on a direct buffer without checking <code>hasArray()</code> first, as whether or not a direct buffer has a backing array <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/ByteBuffer.html#allocateDirect(int)\" rel=\"nofollow noreferrer\">is unspecified</a>."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1690011629,"post_id":76742604,"comment_id":135295966,"body_markdown":"&quot;_I use `ByteBuffer.array()` to get the data and put it into the file_&quot; -- What happens if you write the buffer directly (i.e., via a `WritableByteChannel`)? If you&#39;re stuck with an `OutputStream`, then note you [can adapt it to a channel](https://developer.android.com/reference/java/nio/channels/Channels#newChannel(java.io.OutputStream)).","body":"&quot;<i>I use <code>ByteBuffer.array()</code> to get the data and put it into the file</i>&quot; -- What happens if you write the buffer directly (i.e., via a <code>WritableByteChannel</code>)? If you&#39;re stuck with an <code>OutputStream</code>, then note you <a href=\"https://developer.android.com/reference/java/nio/channels/Channels#newChannel(java.io.OutputStream)\" rel=\"nofollow noreferrer\">can adapt it to a channel</a>."}],"owner":{"account_id":29067885,"reputation":1,"user_id":22266996,"display_name":"Gabriel Liu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690011021,"creation_date":1690007864,"question_id":76742604,"body_markdown":"I am trying to fill a ByteBuffer with some data to simulating the process of stitching to YUV_420_888 image&#39;s ByteBuffer. When I allocate it with `allocate()` and put data into it like this:\r\n\r\n```\r\nint width = 16;\r\nint height = 16;\r\nint combinedSize = width * height * 3 / 2;\r\nByteBuffer combinedBuffer = ByteBuffer.allocate(combinedSize);\r\nfor(int i = 0; i &lt; height * 3 / 2; i++) {\r\n    int curLine =  i * width;\r\n    for(int j = 0; j &lt; width / 2; j++) {\r\n        combinedBuffer.put(curLine + j, (byte) 125);\r\n    }\r\n}\r\n```\r\nwhich means I want to fill the left part of the Bytebuffer with fixed value 125 and do nothing to the right part, I get correct Bytebuffer, but, when I just replace `allocate` with `allocateDirect`, my data is wrong, as is shown in the picture. The left on the picture shows the data I got using `allocateDirect` and the right shows the data I got using `allocate`.\r\nThe format of it is YUV420.\r\n[allocate() VS allocateDirect()](https://i.stack.imgur.com/Hewo8.jpg)\r\nMoreover, when I use array().length to get the size of the Bytebuffer,`alloacte` method got 384 which equals 16 * 16 * 3 / 2 but `alloacteDirect` got 391 which has 7 Bytes more.\r\n\r\nI use ByteBuffer.array() to get the data and put it into a file.\r\nI want to know, do they have difference which can influence the data I put?","title":"Allocating ByteBuffer with allocate() or allocateDirect()","body":"<p>I am trying to fill a ByteBuffer with some data to simulating the process of stitching to YUV_420_888 image's ByteBuffer. When I allocate it with <code>allocate()</code> and put data into it like this:</p>\n<pre><code>int width = 16;\nint height = 16;\nint combinedSize = width * height * 3 / 2;\nByteBuffer combinedBuffer = ByteBuffer.allocate(combinedSize);\nfor(int i = 0; i &lt; height * 3 / 2; i++) {\n    int curLine =  i * width;\n    for(int j = 0; j &lt; width / 2; j++) {\n        combinedBuffer.put(curLine + j, (byte) 125);\n    }\n}\n</code></pre>\n<p>which means I want to fill the left part of the Bytebuffer with fixed value 125 and do nothing to the right part, I get correct Bytebuffer, but, when I just replace <code>allocate</code> with <code>allocateDirect</code>, my data is wrong, as is shown in the picture. The left on the picture shows the data I got using <code>allocateDirect</code> and the right shows the data I got using <code>allocate</code>.\nThe format of it is YUV420.\n<a href=\"https://i.stack.imgur.com/Hewo8.jpg\" rel=\"nofollow noreferrer\">allocate() VS allocateDirect()</a>\nMoreover, when I use array().length to get the size of the Bytebuffer,<code>alloacte</code> method got 384 which equals 16 * 16 * 3 / 2 but <code>alloacteDirect</code> got 391 which has 7 Bytes more.</p>\n<p>I use ByteBuffer.array() to get the data and put it into a file.\nI want to know, do they have difference which can influence the data I put?</p>\n"},{"tags":["java","android","lucene"],"comments":[{"owner":{"account_id":4774522,"reputation":642,"user_id":3858121,"display_name":"Japu_D_Cret"},"score":0,"creation_date":1490698493,"post_id":43067246,"comment_id":73218636,"body_markdown":"this is the relevant information `Could not find method java.io.File.toPath` - similar issue http://stackoverflow.com/questions/9570728/nosuchmethoderror-for-class-file-method-topath - android does not include all functionalities like the OpenJDK or Oracle JDK","body":"this is the relevant information <code>Could not find method java.io.File.toPath</code> - similar issue <a href=\"http://stackoverflow.com/questions/9570728/nosuchmethoderror-for-class-file-method-topath\" title=\"nosuchmethoderror for class file method topath\">stackoverflow.com/questions/9570728/&hellip;</a> - android does not include all functionalities like the OpenJDK or Oracle JDK"},{"owner":{"account_id":6299516,"reputation":141,"user_id":4894564,"accept_rate":25,"display_name":"vikrant"},"score":0,"creation_date":1490701923,"post_id":43067246,"comment_id":73220896,"body_markdown":"i tried same thing in java and its working, same package with relevant dependencies not working in android","body":"i tried same thing in java and its working, same package with relevant dependencies not working in android"},{"owner":{"account_id":4774522,"reputation":642,"user_id":3858121,"display_name":"Japu_D_Cret"},"score":1,"creation_date":1490702331,"post_id":43067246,"comment_id":73221149,"body_markdown":"as I said, the Java runtime environment on Android is not the same as on your main computer, method like `java.io.File.toPath` are pretty recent and may not have been added to even the most recent Android version - check it out here https://developer.android.com/reference/java/io/File.html - and as long as the dependencies won&#39;t get fixed for Android or Android gets those functions they won&#39;t work - you could try to patch those dependencies yourself, but that&#39;s probably not worth the work - you may wanna check out MobileLucene https://github.com/lukhnos/mobilelucene","body":"as I said, the Java runtime environment on Android is not the same as on your main computer, method like <code>java.io.File.toPath</code> are pretty recent and may not have been added to even the most recent Android version - check it out here <a href=\"https://developer.android.com/reference/java/io/File.html\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/io/File.html</a> - and as long as the dependencies won&#39;t get fixed for Android or Android gets those functions they won&#39;t work - you could try to patch those dependencies yourself, but that&#39;s probably not worth the work - you may wanna check out MobileLucene <a href=\"https://github.com/lukhnos/mobilelucene\" rel=\"nofollow noreferrer\">github.com/lukhnos/mobilelucene</a>"},{"owner":{"account_id":6299516,"reputation":141,"user_id":4894564,"accept_rate":25,"display_name":"vikrant"},"score":0,"creation_date":1490710409,"post_id":43067246,"comment_id":73227362,"body_markdown":"is there any other way to index document offline in android using NLP or Machine Learning?","body":"is there any other way to index document offline in android using NLP or Machine Learning?"}],"answers":[{"tags":[],"owner":{"account_id":29047512,"reputation":1,"user_id":22251021,"display_name":"texopher"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690010579,"creation_date":1689756396,"answer_id":76719477,"question_id":43067246,"body_markdown":"In order to use Lucene in Android, you can:\r\n\r\n+ Use modification of Lucene 7.3.0 (see this answer: https://stackoverflow.com/a/76719236/22251021 )\r\n\r\n+ Extends org.apache.lucene.store.BaseDirectory:\r\n```\r\npackage com.texopher.gophoxes;\r\n\r\nimport java.io.IOException;\r\nimport java.nio.file.Path;\r\nimport java.util.Collection;\r\nimport java.util.List;\r\nimport java.util.UUID;\r\n\r\nimport org.apache.lucene.store.BaseDirectory;\r\nimport org.apache.lucene.store.IOContext;\r\nimport org.apache.lucene.store.IndexInput;\r\nimport org.apache.lucene.store.IndexOutput;\r\nimport org.apache.lucene.store.LockFactory;\r\n\r\npublic class BucketDirectory extends BaseDirectory {\r\n\r\n\tprotected Bucket bucket;\r\n\t\r\n\tpublic BucketDirectory(Bucket bucket, LockFactory lockFactory) {\r\n\t\tsuper(lockFactory);\r\n\t\tthis.bucket = bucket;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void close() throws IOException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic IndexOutput createOutput(String name, IOContext context) throws IOException {\r\n\t\treturn new BucketIndexOutput(bucket, name);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic IndexOutput createTempOutput(String prefix, String suffix, IOContext context) throws IOException {\r\n\t\treturn new BucketIndexOutput(bucket, prefix + UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;) + suffix);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void deleteFile(String name) throws IOException {\r\n\t\ttry {\r\n\t\t\tbucket.deleteFile(name);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic long fileLength(String name) throws IOException {\r\n\t\ttry {\r\n\t\t\treturn bucket.fileLength(name);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn 0;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String[] listAll() throws IOException {\r\n\t\tString[] tag = new String[0];\r\n\t\ttry {\r\n\t\t\tList&lt;String&gt; tmp = bucket.listFiles();\r\n\t\t\ttag = new String[tmp.size()];\r\n\t\t\tfor (int i = 0; i &lt; tmp.size(); i++) {\r\n\t\t\t\ttag[i] = tmp.get(i);\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn tag;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic IndexInput openInput(String name, IOContext context) throws IOException {\r\n\t\ttry {\r\n\t\t\treturn new BucketIndexInput(bucket, name);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void rename(String source, String dest) throws IOException {\r\n\t\ttry {\r\n\t\t\tbucket.rename(source, dest);;\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void sync(Collection&lt;String&gt; arg0) throws IOException {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void syncMetaData() throws IOException {\r\n\t}\r\n\r\n}\r\n```\r\n\r\n+ Use following code for searching:\r\n```\r\nQuery qr = new TermQuery(new Term(&quot;code&quot;, this.md5(link)));\r\nBucket bk = new Bucket(this.gopherServer, this.hole, this.magic);\r\nDirectory indexDirectory = new BucketDirectory(bk, new SingleInstanceLockFactory());\r\nIndexReader reader = DirectoryReader.open(indexDirectory);\r\nIndexSearcher searcher = new IndexSearcher(reader);\r\nTopDocs docs = searcher.search(qr, 1);\r\nScoreDoc[] hits = docs.scoreDocs;\r\n```","title":"Integrating Lucene with Android getting error","body":"<p>In order to use Lucene in Android, you can:</p>\n<ul>\n<li><p>Use modification of Lucene 7.3.0 (see this answer: <a href=\"https://stackoverflow.com/a/76719236/22251021\">https://stackoverflow.com/a/76719236/22251021</a> )</p>\n</li>\n<li><p>Extends org.apache.lucene.store.BaseDirectory:</p>\n</li>\n</ul>\n<pre><code>package com.texopher.gophoxes;\n\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.util.Collection;\nimport java.util.List;\nimport java.util.UUID;\n\nimport org.apache.lucene.store.BaseDirectory;\nimport org.apache.lucene.store.IOContext;\nimport org.apache.lucene.store.IndexInput;\nimport org.apache.lucene.store.IndexOutput;\nimport org.apache.lucene.store.LockFactory;\n\npublic class BucketDirectory extends BaseDirectory {\n\n    protected Bucket bucket;\n    \n    public BucketDirectory(Bucket bucket, LockFactory lockFactory) {\n        super(lockFactory);\n        this.bucket = bucket;\n    }\n\n    @Override\n    public void close() throws IOException {\n    }\n\n    @Override\n    public IndexOutput createOutput(String name, IOContext context) throws IOException {\n        return new BucketIndexOutput(bucket, name);\n    }\n\n    @Override\n    public IndexOutput createTempOutput(String prefix, String suffix, IOContext context) throws IOException {\n        return new BucketIndexOutput(bucket, prefix + UUID.randomUUID().toString().replaceAll(&quot;-&quot;, &quot;&quot;) + suffix);\n    }\n\n    @Override\n    public void deleteFile(String name) throws IOException {\n        try {\n            bucket.deleteFile(name);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public long fileLength(String name) throws IOException {\n        try {\n            return bucket.fileLength(name);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return 0;\n    }\n\n    @Override\n    public String[] listAll() throws IOException {\n        String[] tag = new String[0];\n        try {\n            List&lt;String&gt; tmp = bucket.listFiles();\n            tag = new String[tmp.size()];\n            for (int i = 0; i &lt; tmp.size(); i++) {\n                tag[i] = tmp.get(i);\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return tag;\n    }\n\n    @Override\n    public IndexInput openInput(String name, IOContext context) throws IOException {\n        try {\n            return new BucketIndexInput(bucket, name);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    @Override\n    public void rename(String source, String dest) throws IOException {\n        try {\n            bucket.rename(source, dest);;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void sync(Collection&lt;String&gt; arg0) throws IOException {\n    }\n\n    @Override\n    public void syncMetaData() throws IOException {\n    }\n\n}\n</code></pre>\n<ul>\n<li>Use following code for searching:</li>\n</ul>\n<pre><code>Query qr = new TermQuery(new Term(&quot;code&quot;, this.md5(link)));\nBucket bk = new Bucket(this.gopherServer, this.hole, this.magic);\nDirectory indexDirectory = new BucketDirectory(bk, new SingleInstanceLockFactory());\nIndexReader reader = DirectoryReader.open(indexDirectory);\nIndexSearcher searcher = new IndexSearcher(reader);\nTopDocs docs = searcher.search(qr, 1);\nScoreDoc[] hits = docs.scoreDocs;\n</code></pre>\n"}],"owner":{"account_id":6299516,"reputation":141,"user_id":4894564,"accept_rate":25,"display_name":"vikrant"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":301,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690010579,"creation_date":1490697267,"question_id":43067246,"body_markdown":"\t03-28 15:52:36.586 25855-25855/? D/dalvikvm: Late-enabling CheckJNI\r\n\t03-28 15:52:37.021 25855-25855/com.example.myapplication2.app E/TAG: START/data/data/com.example.myapplication2.app/lib-----INDEX 2 :/storage/emulated/0/Notes/sFileName\r\n\t03-28 15:52:37.421 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.store.NIOFSDirectory.createSlicer\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x000c\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.store.NIOFSDirectory.openInput\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x000c\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x14 in Lorg/apache/lucene/store/NIOFSDirectory;.createSlicer\r\n\t03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x14 in Lorg/apache/lucene/store/NIOFSDirectory;.openInput\r\n\t03-28 15:52:37.424 25855-25855/com.example.myapplication2.app I/System.out: in --------- indexd path NIOFSDirectory@/storage/emulated/0/Notes/sFileName lockFactory=NativeFSLockFactory@/storage/emulated/0/Notes/sFileName\r\n\t03-28 15:52:37.587 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.util.IOUtils.fsync\r\n\t03-28 15:52:37.587 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\r\n\t03-28 15:52:37.587 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x0001\r\n\t03-28 15:52:37.588 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x0b in Lorg/apache/lucene/util/IOUtils;.fsync\r\n\t03-28 15:52:37.588 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d86 at 0x24 in Lorg/apache/lucene/util/IOUtils;.fsync\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve exception class 1120 (Ljava/nio/file/NoSuchFileException;)\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to find exception handler at addr 0xe\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejected Lorg/apache/lucene/index/IndexWriter;.slowFileExists (Lorg/apache/lucene/store/Directory;Ljava/lang/String;)Z\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejecting opcode 0x0d at 0x000e\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejected Lorg/apache/lucene/index/IndexWriter;.slowFileExists (Lorg/apache/lucene/store/Directory;Ljava/lang/String;)Z\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: Verifier rejected class Lorg/apache/lucene/index/IndexWriter;\r\n\t03-28 15:52:37.631 25855-25855/com.example.myapplication2.app D/AndroidRuntime: Shutting down VM\r\n\t03-28 15:52:37.632 25855-25855/com.example.myapplication2.app W/dalvikvm: threadid=1: thread exiting with uncaught exception (group=0x4162fd40)\r\n\t03-28 15:52:37.633 25855-25855/com.example.myapplication2.app E/AndroidRuntime: FATAL EXCEPTION: main\r\n\t    Process: com.example.myapplication2.app, PID: 25855\r\n\t    java.lang.VerifyError: org/apache/lucene/index/IndexWriter\r\n\t\tat com.example.myapplication2.app.Lucene2.openIndex(Lucene2.java:124)\r\n\t\tat com.example.myapplication2.app.Lucene2.createIndex(Lucene2.java:87)\r\n\t\tat com.example.myapplication2.app.MainActivity.onCreate(MainActivity.java:42)\r\n\t\tat android.app.Activity.performCreate(Activity.java:5248)\r\n\t\tat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1110)\r\n\t\tat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2162)\r\n\t\tat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2257)\r\n\t\tat android.app.ActivityThread.access$800(ActivityThread.java:139)\r\n\t\tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)\r\n\t\tat android.os.Handler.dispatchMessage(Handler.java:102)\r\n\t\tat android.os.Looper.loop(Looper.java:136)\r\n\t\tat android.app.ActivityThread.main(ActivityThread.java:5086)\r\n\t\tat java.lang.reflect.Method.invokeNative(Native Method)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:515)\r\n\t\tat com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)\r\n\t\tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)\r\n\t\tat dalvik.system.NativeStart.main(Native Method)\r\n\t03-28 15:57:37.984 25855-25855/com.example.myapplication2.app I/Process: Sending signal. PID: 25855 SIG: 9\r\n\r\nCode is working with java implementation but not working with android. is there any way where using gradle dependencies can avoid such error.","title":"Integrating Lucene with Android getting error","body":"<pre><code>03-28 15:52:36.586 25855-25855/? D/dalvikvm: Late-enabling CheckJNI\n03-28 15:52:37.021 25855-25855/com.example.myapplication2.app E/TAG: START/data/data/com.example.myapplication2.app/lib-----INDEX 2 :/storage/emulated/0/Notes/sFileName\n03-28 15:52:37.421 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.store.NIOFSDirectory.createSlicer\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x000c\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.store.NIOFSDirectory.openInput\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x000c\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x14 in Lorg/apache/lucene/store/NIOFSDirectory;.createSlicer\n03-28 15:52:37.422 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x14 in Lorg/apache/lucene/store/NIOFSDirectory;.openInput\n03-28 15:52:37.424 25855-25855/com.example.myapplication2.app I/System.out: in --------- indexd path NIOFSDirectory@/storage/emulated/0/Notes/sFileName lockFactory=NativeFSLockFactory@/storage/emulated/0/Notes/sFileName\n03-28 15:52:37.587 25855-25855/com.example.myapplication2.app I/dalvikvm: Could not find method java.io.File.toPath, referenced from method org.apache.lucene.util.IOUtils.fsync\n03-28 15:52:37.587 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve virtual method 8318: Ljava/io/File;.toPath ()Ljava/nio/file/Path;\n03-28 15:52:37.587 25855-25855/com.example.myapplication2.app D/dalvikvm: VFY: replacing opcode 0x6e at 0x0001\n03-28 15:52:37.588 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d85 at 0x0b in Lorg/apache/lucene/util/IOUtils;.fsync\n03-28 15:52:37.588 25855-25855/com.example.myapplication2.app I/dalvikvm: DexOpt: unable to optimize static field ref 0x0d86 at 0x24 in Lorg/apache/lucene/util/IOUtils;.fsync\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to resolve exception class 1120 (Ljava/nio/file/NoSuchFileException;)\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY: unable to find exception handler at addr 0xe\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejected Lorg/apache/lucene/index/IndexWriter;.slowFileExists (Lorg/apache/lucene/store/Directory;Ljava/lang/String;)Z\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejecting opcode 0x0d at 0x000e\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: VFY:  rejected Lorg/apache/lucene/index/IndexWriter;.slowFileExists (Lorg/apache/lucene/store/Directory;Ljava/lang/String;)Z\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app W/dalvikvm: Verifier rejected class Lorg/apache/lucene/index/IndexWriter;\n03-28 15:52:37.631 25855-25855/com.example.myapplication2.app D/AndroidRuntime: Shutting down VM\n03-28 15:52:37.632 25855-25855/com.example.myapplication2.app W/dalvikvm: threadid=1: thread exiting with uncaught exception (group=0x4162fd40)\n03-28 15:52:37.633 25855-25855/com.example.myapplication2.app E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: com.example.myapplication2.app, PID: 25855\n    java.lang.VerifyError: org/apache/lucene/index/IndexWriter\n    at com.example.myapplication2.app.Lucene2.openIndex(Lucene2.java:124)\n    at com.example.myapplication2.app.Lucene2.createIndex(Lucene2.java:87)\n    at com.example.myapplication2.app.MainActivity.onCreate(MainActivity.java:42)\n    at android.app.Activity.performCreate(Activity.java:5248)\n    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1110)\n    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2162)\n    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2257)\n    at android.app.ActivityThread.access$800(ActivityThread.java:139)\n    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1210)\n    at android.os.Handler.dispatchMessage(Handler.java:102)\n    at android.os.Looper.loop(Looper.java:136)\n    at android.app.ActivityThread.main(ActivityThread.java:5086)\n    at java.lang.reflect.Method.invokeNative(Native Method)\n    at java.lang.reflect.Method.invoke(Method.java:515)\n    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:785)\n    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:601)\n    at dalvik.system.NativeStart.main(Native Method)\n03-28 15:57:37.984 25855-25855/com.example.myapplication2.app I/Process: Sending signal. PID: 25855 SIG: 9\n</code></pre>\n\n<p>Code is working with java implementation but not working with android. is there any way where using gradle dependencies can avoid such error.</p>\n"},{"tags":["java","quarkus","flyway","graalvm"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1663675213,"post_id":73785073,"comment_id":130291139,"body_markdown":"Does the same problem occur with Quarkus `2.12.2.Final` and / or `2.13.0.CR1`?","body":"Does the same problem occur with Quarkus <code>2.12.2.Final</code> and / or <code>2.13.0.CR1</code>?"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1663754585,"post_id":73785073,"comment_id":130312133,"body_markdown":"Could you see if this is similar https://github.com/quarkusio/quarkus/issues/10716","body":"Could you see if this is similar <a href=\"https://github.com/quarkusio/quarkus/issues/10716\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues/10716</a>"},{"owner":{"account_id":26389399,"reputation":21,"user_id":20041466,"display_name":"Eusebio"},"score":0,"creation_date":1663833339,"post_id":73785073,"comment_id":130333222,"body_markdown":"No, is different issue.","body":"No, is different issue."},{"owner":{"account_id":26389399,"reputation":21,"user_id":20041466,"display_name":"Eusebio"},"score":0,"creation_date":1663922717,"post_id":73785073,"comment_id":130357939,"body_markdown":"With 2.12.2.Final of Quarkus I have the same error.","body":"With 2.12.2.Final of Quarkus I have the same error."},{"owner":{"account_id":12531823,"reputation":97,"user_id":9119836,"display_name":"Golam Wasy Arnob"},"score":0,"creation_date":1679834987,"post_id":73785073,"comment_id":133788198,"body_markdown":"@Eusebio have you fixed that error? I am also facing the same error.","body":"@Eusebio have you fixed that error? I am also facing the same error."}],"answers":[{"tags":[],"owner":{"account_id":23625304,"reputation":11,"user_id":17657934,"display_name":"ScorpioBroker"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690010351,"creation_date":1689685018,"answer_id":76713013,"question_id":73785073,"body_markdown":"I had a similar or maybe the same issue and found a solution here [https://github.com/quarkusio/quarkus/issues/10716#issuecomment-1069943206][1]. So in my issue I was creating a Flyway instance programmatically `(Flyway.flyway())` and calling `migrate()`. This instantiation was the issue for me. Retrieving it via `arc` solved the issue. Since this is the number 1 thread to find when searching for this issue I&#39;ll leave this here.\r\n\r\n    QuarkusPathLocationScanner.setApplicationMigrationFiles(files);\r\n    DataSource ds = Flyway.configure().dataSource(&quot;jdbc:&quot; + datasourceUrl, datasourceUsername, datasourcePassword).getDataSource();\r\n    FlywayContainerProducer flywayProducer = Arc.container().instance(FlywayContainerProducer.class).get();\r\n     FlywayContainer flywayContainer = flywayProducer.createFlyway(ds, &quot;&lt;default&gt;&quot;, true, true);\r\n     Flyway flyway = flywayContainer.getFlyway();\r\n     flyway.migrate();\r\n        \r\n\r\n\r\n  [1]: https://github.com/quarkusio/quarkus/issues/10716#issuecomment-1069943206","title":"Quarkus compilation native fails with flyway","body":"<p>I had a similar or maybe the same issue and found a solution here <a href=\"https://github.com/quarkusio/quarkus/issues/10716#issuecomment-1069943206\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/issues/10716#issuecomment-1069943206</a>. So in my issue I was creating a Flyway instance programmatically <code>(Flyway.flyway())</code> and calling <code>migrate()</code>. This instantiation was the issue for me. Retrieving it via <code>arc</code> solved the issue. Since this is the number 1 thread to find when searching for this issue I'll leave this here.</p>\n<pre><code>QuarkusPathLocationScanner.setApplicationMigrationFiles(files);\nDataSource ds = Flyway.configure().dataSource(&quot;jdbc:&quot; + datasourceUrl, datasourceUsername, datasourcePassword).getDataSource();\nFlywayContainerProducer flywayProducer = Arc.container().instance(FlywayContainerProducer.class).get();\n FlywayContainer flywayContainer = flywayProducer.createFlyway(ds, &quot;&lt;default&gt;&quot;, true, true);\n Flyway flyway = flywayContainer.getFlyway();\n flyway.migrate();\n    \n</code></pre>\n"}],"owner":{"account_id":26389399,"reputation":21,"user_id":20041466,"display_name":"Eusebio"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":450,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690010351,"creation_date":1663668782,"question_id":73785073,"body_markdown":"I have this error but I cannot found any information about this: \r\n\r\n```\r\n2022-09-20 09:48:36,035 ERROR [io.qua.run.Application] (main) Failed to start application (with profile prod): java.lang.IllegalStateException: &#39;org.flywaydb.core.internal.scanner.Scanner&#39; is never used in Quarkus\r\n        at org.flywaydb.core.internal.scanner.Scanner.&lt;init&gt;(Scanner.java:27)\r\n        at org.flywaydb.core.FlywayExecutor.createResourceAndClassProviders(FlywayExecutor.java:252)\r\n        at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:135)\r\n        at org.flywaydb.core.Flyway.migrate(Flyway.java:124)\r\n```  \r\n\r\nI&#39;m pretty sure that the sql migration files are included with the compilation with the parameter &quot;quarkus.native.resources.includes=db/migration/**&quot;.\r\n\r\nSomebody have an idea that what is happening?\r\n\r\n**Versions:**  \r\nVersion info: &#39;GraalVM 22.1.0 Java 11 CE&#39;  \r\nQuarkus 2.10.1\r\n\r\n**Compilation with maven:**\r\n```\r\nmvn clean package -Dnative\r\n```\r\n\r\nI had testing also with versions of Quarkus 2.12.2.Final and 2.13.0.CR1 with the same results.\r\n\r\n","title":"Quarkus compilation native fails with flyway","body":"<p>I have this error but I cannot found any information about this:</p>\n<pre><code>2022-09-20 09:48:36,035 ERROR [io.qua.run.Application] (main) Failed to start application (with profile prod): java.lang.IllegalStateException: 'org.flywaydb.core.internal.scanner.Scanner' is never used in Quarkus\n        at org.flywaydb.core.internal.scanner.Scanner.&lt;init&gt;(Scanner.java:27)\n        at org.flywaydb.core.FlywayExecutor.createResourceAndClassProviders(FlywayExecutor.java:252)\n        at org.flywaydb.core.FlywayExecutor.execute(FlywayExecutor.java:135)\n        at org.flywaydb.core.Flyway.migrate(Flyway.java:124)\n</code></pre>\n<p>I'm pretty sure that the sql migration files are included with the compilation with the parameter &quot;quarkus.native.resources.includes=db/migration/**&quot;.</p>\n<p>Somebody have an idea that what is happening?</p>\n<p><strong>Versions:</strong><br />\nVersion info: 'GraalVM 22.1.0 Java 11 CE'<br />\nQuarkus 2.10.1</p>\n<p><strong>Compilation with maven:</strong></p>\n<pre><code>mvn clean package -Dnative\n</code></pre>\n<p>I had testing also with versions of Quarkus 2.12.2.Final and 2.13.0.CR1 with the same results.</p>\n"},{"tags":["java","input","bufferedreader","readline"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":4,"creation_date":1690005700,"post_id":76742474,"comment_id":135295582,"body_markdown":"`read` reads a single character, but you have typed two, the character and the return character. So the `readLine` reads the return character, which is terminating an empty line.","body":"<code>read</code> reads a single character, but you have typed two, the character and the return character. So the <code>readLine</code> reads the return character, which is terminating an empty line."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690012966,"post_id":76742474,"comment_id":135296077,"body_markdown":"In any case there is no duplicate carriage return anywhere in your question.","body":"In any case there is no duplicate carriage return anywhere in your question."}],"owner":{"account_id":29067702,"reputation":1,"user_id":22266857,"display_name":"Subhrasmit Kar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690009542,"answer_count":0,"score":0,"last_activity_date":1690010242,"creation_date":1690004853,"question_id":76742474,"body_markdown":"When using read() from BufferedReader, when I press enter after typing input, the first input is taken but the next input statement is also executed, before I can type input for the next statement.\r\n\r\n```java\r\nchar c = (char)br.read();\r\nString S = br.readLine();\r\n```\r\n\r\nIf I type a character and press enter, then `c` stores that character but `S` stores &quot;&quot; and it does not ask me to input `S`. It&#39;s as if Java automatically presses enter for the string input.\r\n\r\nCan someone explain this behaviour?\r\n\r\n","title":"Duplicate carriage return when using read() of BufferedReader","body":"<p>When using read() from BufferedReader, when I press enter after typing input, the first input is taken but the next input statement is also executed, before I can type input for the next statement.</p>\n<pre class=\"lang-java prettyprint-override\"><code>char c = (char)br.read();\nString S = br.readLine();\n</code></pre>\n<p>If I type a character and press enter, then <code>c</code> stores that character but <code>S</code> stores &quot;&quot; and it does not ask me to input <code>S</code>. It's as if Java automatically presses enter for the string input.</p>\n<p>Can someone explain this behaviour?</p>\n"},{"tags":["java","react-native","android-studio"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690103531,"post_id":76742263,"comment_id":135304045,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"comments":[{"owner":{"account_id":19731609,"reputation":1,"user_id":14446948,"display_name":"Eric"},"score":0,"creation_date":1690012084,"post_id":76742663,"comment_id":135296002,"body_markdown":"Hey thanks for your answer.. my android studio is Arctic Fox | 2020.3.1 version. I have followed yours and still not able to find that part..","body":"Hey thanks for your answer.. my android studio is Arctic Fox | 2020.3.1 version. I have followed yours and still not able to find that part.."},{"owner":{"account_id":6289968,"reputation":1005,"user_id":4887993,"display_name":"fengelhardt"},"score":0,"creation_date":1690015908,"post_id":76742663,"comment_id":135296322,"body_markdown":"Click File, then Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle you should see a jdk there. Set it to the one you want to use that is compatible with your project.","body":"Click File, then Settings &gt; Build, Execution, Deployment &gt; Build Tools &gt; Gradle you should see a jdk there. Set it to the one you want to use that is compatible with your project."},{"owner":{"account_id":19731609,"reputation":1,"user_id":14446948,"display_name":"Eric"},"score":0,"creation_date":1690017842,"post_id":76742663,"comment_id":135296486,"body_markdown":"@fengelhardt Thanks for the answer, I also followed that step but still got nothing about JDK location..","body":"@fengelhardt Thanks for the answer, I also followed that step but still got nothing about JDK location.."},{"owner":{"account_id":9549455,"reputation":52,"user_id":7094089,"display_name":"King Maf"},"score":0,"creation_date":1690022648,"post_id":76742663,"comment_id":135296938,"body_markdown":"Have you tried updating Android Studio?","body":"Have you tried updating Android Studio?"}],"tags":[],"owner":{"account_id":9549455,"reputation":52,"user_id":7094089,"display_name":"King Maf"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690009619,"creation_date":1690008978,"answer_id":76742663,"question_id":76742263,"body_markdown":"What is the version of Android Studio you are using?\r\n\r\nI&#39;m using Android Studio Flamengo | 2021.2.1 Pacth 2.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/s0oC7.png\r\n\r\nIn Android Studio, click on File and select Project Structure or simply use shortcut `CTRL+Alt+Shift+S`. A new window will pop-up. Choose SDK Location, then select Gradle Setting at the bottom. Click on the Gradle Jdk box and click Add. Now you can choose the location of the JDK that you have downloaded. I provide picture to facilitate understanding.\r\n\r\nHope that help.","title":"No JDK Location settings/section in my android studio","body":"<p>What is the version of Android Studio you are using?</p>\n<p>I'm using Android Studio Flamengo | 2021.2.1 Pacth 2.</p>\n<p><a href=\"https://i.stack.imgur.com/s0oC7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/s0oC7.png\" alt=\"enter image description here\" /></a></p>\n<p>In Android Studio, click on File and select Project Structure or simply use shortcut <code>CTRL+Alt+Shift+S</code>. A new window will pop-up. Choose SDK Location, then select Gradle Setting at the bottom. Click on the Gradle Jdk box and click Add. Now you can choose the location of the JDK that you have downloaded. I provide picture to facilitate understanding.</p>\n<p>Hope that help.</p>\n"}],"owner":{"account_id":19731609,"reputation":1,"user_id":14446948,"display_name":"Eric"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690009619,"creation_date":1689999303,"question_id":76742263,"body_markdown":"I have an issue when I want to build my react native app, it happens when I try to update my Jdk to latest version.. and I have download and install the latest version of Jdk, and I have set the JAVA_HOME as well and restart my computer to make it work.. but when I try to build my react native app, I have an error and it said &quot;**The supplied javaHome seems to be invalid. I cannot find the java executable. Tried location: C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe**&quot;, \r\n\r\nafter I do my own research, it needs to change my JDK location path in my android studio, but unfortunately, my android studio does not have JDK location section to change the path.. \r\n\r\ncan anyone please help how to solve this issue...\r\n\r\nThankyou :)\r\n\r\n(https://i.stack.imgur.com/Ti4d7.png)","title":"No JDK Location settings/section in my android studio","body":"<p>I have an issue when I want to build my react native app, it happens when I try to update my Jdk to latest version.. and I have download and install the latest version of Jdk, and I have set the JAVA_HOME as well and restart my computer to make it work.. but when I try to build my react native app, I have an error and it said &quot;<strong>The supplied javaHome seems to be invalid. I cannot find the java executable. Tried location: C:\\Program Files\\Java\\jdk1.8.0_291\\bin\\java.exe</strong>&quot;,</p>\n<p>after I do my own research, it needs to change my JDK location path in my android studio, but unfortunately, my android studio does not have JDK location section to change the path..</p>\n<p>can anyone please help how to solve this issue...</p>\n<p>Thankyou :)</p>\n<p>(<a href=\"https://i.stack.imgur.com/Ti4d7.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/Ti4d7.png</a>)</p>\n"},{"tags":["java","email","amazon-web-services","jakarta-mail"],"answers":[{"tags":[],"owner":{"account_id":1032936,"reputation":29649,"user_id":1040885,"display_name":"Bill Shannon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486169790,"creation_date":1486169790,"answer_id":42035328,"question_id":42033590,"body_markdown":"If you&#39;re getting nulls, then the message isn&#39;t really a MIME format message.  Make sure it is, and that there&#39;s no blank lines at the beginning of the message.","title":"Parsing Raw Emails from Amazon SES in Java","body":"<p>If you're getting nulls, then the message isn't really a MIME format message.  Make sure it is, and that there's no blank lines at the beginning of the message.</p>\n"},{"tags":[],"owner":{"account_id":9281002,"reputation":227,"user_id":6892193,"display_name":"Cccompany"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690009020,"creation_date":1519306803,"answer_id":48928884,"question_id":42033590,"body_markdown":"You could try using the `MimeMessageParser` from the `org.apache.commons.mail.util` package.\r\n\r\nYour code should then look like this:\r\n\r\n    MimeMessage mimeMessageObj = new MimeMessage(newSession, inputStreamObj);\r\n    MimeMessageParser mimeParser = new MimeMessageParser(mimeMessageObj);\r\n\r\n    try {\r\n        mimeParser.parse();\r\n        List&lt;javax.mail.Address&gt; to = mimeParser.getTo();\r\n        String from = mimeParser.getFrom();\r\n        String subject = mimeParser.getSubject();\r\n        String bodyPlain = mimeParser.getPlainContent();\r\n        String bodyHtml = mimeParser.getHtmlContent();\r\n        long timestamp = mime.getSentDate().getTime();\r\n    } catch (Exception e) {\r\n        System.out.println(&quot;Something went wrong&quot;);\r\n        e.printStackTrace();\r\n    }\r\n\r\nHere is the maven dependency you will need:\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-email --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n        &lt;artifactId&gt;commons-email&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n","title":"Parsing Raw Emails from Amazon SES in Java","body":"<p>You could try using the <code>MimeMessageParser</code> from the <code>org.apache.commons.mail.util</code> package.</p>\n<p>Your code should then look like this:</p>\n<pre><code>MimeMessage mimeMessageObj = new MimeMessage(newSession, inputStreamObj);\nMimeMessageParser mimeParser = new MimeMessageParser(mimeMessageObj);\n\ntry {\n    mimeParser.parse();\n    List&lt;javax.mail.Address&gt; to = mimeParser.getTo();\n    String from = mimeParser.getFrom();\n    String subject = mimeParser.getSubject();\n    String bodyPlain = mimeParser.getPlainContent();\n    String bodyHtml = mimeParser.getHtmlContent();\n    long timestamp = mime.getSentDate().getTime();\n} catch (Exception e) {\n    System.out.println(&quot;Something went wrong&quot;);\n    e.printStackTrace();\n}\n</code></pre>\n<p>Here is the maven dependency you will need:</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-email --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-email&lt;/artifactId&gt;\n    &lt;version&gt;1.5&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":10172492,"reputation":21,"user_id":7512343,"display_name":"Peter Trzeciak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1652,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1690009020,"creation_date":1486158742,"question_id":42033590,"body_markdown":"**Here is the problem I&#39;m facing:**\r\n\r\n1. I&#39;m receiving a raw email from Amazon SES into an S3 bucket, triggering a Lambda function.\r\n2. The function reads the data (raw email) from the bucket using:\r\n\r\n    S3Object s3Object = s3Client.getObject(new GetObjectRequest(srcBucket, srcKey));\r\n\r\n3. The raw email is then converted to an InputStream and the Java Mail (javax.mail) MimeMessage object is created:\r\n\r\n    MimeMessage mimeMessageObj = new MimeMessage(newSession, inputStreamObj);\r\n\r\n\r\n\r\n**The question is:**\r\nHow do you parse out all the information from the message (inlcuding attachments).\r\n\r\nMimeMessage seems to have specialized methods for that (getSubject, etc), but they return nulls. Is there a special parsing necessary before those fields are populated? I found a lot of examples of creating email messages using those special methods directly, but reversing the process to read raw email feed does not seem to work properly. Is manual parsing the only option? That would be very tedious and error prone I assume.\r\n","title":"Parsing Raw Emails from Amazon SES in Java","body":"<p><strong>Here is the problem I'm facing:</strong></p>\n\n<ol>\n<li>I'm receiving a raw email from Amazon SES into an S3 bucket, triggering a Lambda function.</li>\n<li><p>The function reads the data (raw email) from the bucket using:</p>\n\n<p>S3Object s3Object = s3Client.getObject(new GetObjectRequest(srcBucket, srcKey));</p></li>\n<li><p>The raw email is then converted to an InputStream and the Java Mail (javax.mail) MimeMessage object is created:</p>\n\n<p>MimeMessage mimeMessageObj = new MimeMessage(newSession, inputStreamObj);</p></li>\n</ol>\n\n<p><strong>The question is:</strong>\nHow do you parse out all the information from the message (inlcuding attachments).</p>\n\n<p>MimeMessage seems to have specialized methods for that (getSubject, etc), but they return nulls. Is there a special parsing necessary before those fields are populated? I found a lot of examples of creating email messages using those special methods directly, but reversing the process to read raw email feed does not seem to work properly. Is manual parsing the only option? That would be very tedious and error prone I assume.</p>\n"},{"tags":["java","android","json","network-programming","gson"],"comments":[{"owner":{"account_id":331220,"reputation":3717,"user_id":984724,"accept_rate":92,"display_name":"Dave Thomas"},"score":0,"creation_date":1516316284,"post_id":48322357,"comment_id":83649108,"body_markdown":"Are you checking the object inside your ```onSuccess``` method ```DeserializedContainer container```?  ```deserializedContainerObject``` is declared outside of your ```onSuccess``` method so it makes sense that it&#39;s list has a size of 0.","body":"Are you checking the object inside your <code>onSuccess</code> method <code>DeserializedContainer container</code>?  <code>deserializedContainerObject</code> is declared outside of your <code>onSuccess</code> method so it makes sense that it&#39;s list has a size of 0."},{"owner":{"account_id":5819549,"reputation":3579,"user_id":16651185,"display_name":"Vikas singh"},"score":0,"creation_date":1516343834,"post_id":48322357,"comment_id":83655839,"body_markdown":"@Joakim Sj&#246;stedt check my answer..","body":"@Joakim Sj&#246;stedt check my answer.."}],"answers":[{"comments":[{"owner":{"account_id":11738256,"reputation":836,"user_id":8591381,"accept_rate":56,"display_name":"Joakim Sj&#246;stedt"},"score":0,"creation_date":1516314091,"post_id":48322777,"comment_id":83648344,"body_markdown":"Holy cow! It doesn&#39;t crash anymore :) It worked! Thanks a bunch Laurent! However, a new problem seems to have emerged - see the end off main thread.","body":"Holy cow! It doesn&#39;t crash anymore :) It worked! Thanks a bunch Laurent! However, a new problem seems to have emerged - see the end off main thread."}],"tags":[],"owner":{"account_id":3193004,"reputation":2220,"user_id":2696865,"accept_rate":86,"display_name":"Laurent B"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516282919,"creation_date":1516282919,"answer_id":48322777,"question_id":48322357,"body_markdown":"Your completeJSONdata is incorrect as you are always putting &quot;null&quot; towards the end.\r\n\r\nInstead your while clause should be for example : \r\n\r\n\r\n\t        while ((myJSON = bufferedReaderObject.readLine()) != null) {\r\n\t            completeJSONdata += myJSON;\r\n\t        }\r\n\r\n\r\nBy the way, don&#39;t forget to close your streams for instance by using a try with :\r\n\r\n    try (InputStream inputStreamObject = httpURLConnection.getInputStream()) {\r\n    // ...\r\n    }","title":"Why is JSON document not fully consumed?","body":"<p>Your completeJSONdata is incorrect as you are always putting \"null\" towards the end.</p>\n\n<p>Instead your while clause should be for example : </p>\n\n<pre><code>        while ((myJSON = bufferedReaderObject.readLine()) != null) {\n            completeJSONdata += myJSON;\n        }\n</code></pre>\n\n<p>By the way, don't forget to close your streams for instance by using a try with :</p>\n\n<pre><code>try (InputStream inputStreamObject = httpURLConnection.getInputStream()) {\n// ...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11738256,"reputation":836,"user_id":8591381,"accept_rate":56,"display_name":"Joakim Sj&#246;stedt"},"score":0,"creation_date":1516354018,"post_id":48335386,"comment_id":83660673,"body_markdown":"AWESOME! It finally worked! Thank you so much for helping me, both visas singh and Laurent B! :) Now I can move on with my project YAY! :D :D :D","body":"AWESOME! It finally worked! Thank you so much for helping me, both visas singh and Laurent B! :) Now I can move on with my project YAY! :D :D :D"}],"tags":[],"owner":{"account_id":5819549,"reputation":3579,"user_id":16651185,"display_name":"Vikas singh"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1516343635,"creation_date":1516343635,"answer_id":48335386,"question_id":48322357,"body_markdown":"The value is being pass, but however null is also getting passed with it so use an if statement rather than using while\r\nlike this..\r\n\r\n    if (myJSON != null) {\r\n                    myJSON = bufferedReaderObject.readLine();\r\n                    completeJSONdata += myJSON;\r\n                }\r\n\r\nthen convert in Gson like this..\r\n\r\n \r\n\r\n        Gson gson = new Gson();\r\n        deserializedContainerObject = gson.fromJson(completeJSONdata, DeserializedContainer.class);\r\n\r\nwrite the getters and setters in `DeserializedVariables` class\r\n\r\n\r\n    public String getMovieName() {\r\n             return movieName;\r\n         }\r\n    \r\n         public void setMovieName(String movieName) {\r\n             this.movieName = movieName;\r\n         }\r\n    \r\n         public Integer getMovieYear() {\r\n             return movieYear;\r\n         }\r\n    \r\n         public void setMovieYear(Integer movieYear) {\r\n             this.movieYear = movieYear;\r\n         }\r\n    \r\n         public Double getMovieRating() {\r\n             return movieRating;\r\n         }\r\n    \r\n         public void setMovieRating(Double movieRating) {\r\n             this.movieRating = movieRating;\r\n         }\r\n\r\nAnd now you can retrieve it in your `onPostExecute()` like this..\r\n\r\n \r\n\r\n    @Override\r\n        protected void onPostExecute( DeserializedContainer result) {\r\n    \r\n            mListener.onSuccess( result );\r\n    \r\n            for (int i = 0; i &lt;result.deserializedContainerList.size(); i++) {\r\n                DeserializedVariables deserializedVariables = result.deserializedContainerList.get(i);\r\n                Log.d( TAG, &quot;onPostExecuss: &quot; + deserializedVariables.getMovieName() );\r\n            }\r\n    \r\n        }\r\n\r\n","title":"Why is JSON document not fully consumed?","body":"<p>The value is being pass, but however null is also getting passed with it so use an if statement rather than using while\nlike this..</p>\n\n<pre><code>if (myJSON != null) {\n                myJSON = bufferedReaderObject.readLine();\n                completeJSONdata += myJSON;\n            }\n</code></pre>\n\n<p>then convert in Gson like this..</p>\n\n<pre><code>    Gson gson = new Gson();\n    deserializedContainerObject = gson.fromJson(completeJSONdata, DeserializedContainer.class);\n</code></pre>\n\n<p>write the getters and setters in <code>DeserializedVariables</code> class</p>\n\n<pre><code>public String getMovieName() {\n         return movieName;\n     }\n\n     public void setMovieName(String movieName) {\n         this.movieName = movieName;\n     }\n\n     public Integer getMovieYear() {\n         return movieYear;\n     }\n\n     public void setMovieYear(Integer movieYear) {\n         this.movieYear = movieYear;\n     }\n\n     public Double getMovieRating() {\n         return movieRating;\n     }\n\n     public void setMovieRating(Double movieRating) {\n         this.movieRating = movieRating;\n     }\n</code></pre>\n\n<p>And now you can retrieve it in your <code>onPostExecute()</code> like this..</p>\n\n<pre><code>@Override\n    protected void onPostExecute( DeserializedContainer result) {\n\n        mListener.onSuccess( result );\n\n        for (int i = 0; i &lt;result.deserializedContainerList.size(); i++) {\n            DeserializedVariables deserializedVariables = result.deserializedContainerList.get(i);\n            Log.d( TAG, \"onPostExecuss: \" + deserializedVariables.getMovieName() );\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20327316,"reputation":998,"user_id":14910363,"display_name":"FearNot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690007651,"creation_date":1690007651,"answer_id":76742595,"question_id":48322357,"body_markdown":"For people who are still struggling with this exception: The only solution that worked for me is to pretty-print the JSON before I give it to Gson (I had a hunch that maybe there is something wrong with the format itself although it wasn&#39;t throwing a JsonMalformattedError). Here&#39;s the code that worked for me :\r\n\r\n```kotlin \r\nval jsonPretty = JSONObject(jsonString).toString(2)\r\n```\r\n\r\nYou can go ahead and pass `jsonPretty` as a string to Gson. This made GSON consume the JSON document fully. I believe the library struggles with extremely incoherent JSONs (for example, when there are too many white spaces or something). Im not sure why, but this worked for me at least.","title":"Why is JSON document not fully consumed?","body":"<p>For people who are still struggling with this exception: The only solution that worked for me is to pretty-print the JSON before I give it to Gson (I had a hunch that maybe there is something wrong with the format itself although it wasn't throwing a JsonMalformattedError). Here's the code that worked for me :</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val jsonPretty = JSONObject(jsonString).toString(2)\n</code></pre>\n<p>You can go ahead and pass <code>jsonPretty</code> as a string to Gson. This made GSON consume the JSON document fully. I believe the library struggles with extremely incoherent JSONs (for example, when there are too many white spaces or something). Im not sure why, but this worked for me at least.</p>\n"}],"owner":{"account_id":11738256,"reputation":836,"user_id":8591381,"accept_rate":56,"display_name":"Joakim Sj&#246;stedt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26004,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":48335386,"answer_count":3,"score":9,"last_activity_date":1690007651,"creation_date":1516281564,"question_id":48322357,"body_markdown":"I&#39;m trying to retrieve JSON data from an external source for practice. I have gotten all the code in place but for some reason I get an error saying that the document is not fully consumed. I have watched and read multiple tutorials and guides, but still can&#39;t seem to get it right. I have also searched stack for answers, but since I don&#39;t know what&#39;s wrong, I don&#39;t really know what to look for.\r\n\r\nAll the code is in place and there is no obvious fault in it. The JSON data has been validated and it works to retrieve as raw JSON data, as seen in a log. The problem occur at the Gson conversion when the data should be transferred to a java data class. Any ideas what could be wrong?\r\n\r\n    public class JSONimport extends AsyncTask&lt;Void, Void, DeserializedContainer&gt; {\r\n\r\n    private static final String TAG = &quot;TAG&quot;;\r\n\r\n    //VARIABLES TO HOLD JSON DATA\r\n    private OnLoadListener mListener;\r\n\r\n\r\n    //CONSTRUCTOR\r\n    public JSONimport(OnLoadListener listener) {\r\n        this.mListener = listener;\r\n    }\r\n\r\n    //ASYNK, DO IN BACKGROUND THREAD\r\n    @Override\r\n    protected DeserializedContainer doInBackground(Void... voids) {\r\n        String myJSON = &quot;&quot;; //TEMP VARIABLE TO HOLD JSON DATA\r\n        String completeJSONdata = &quot;&quot;; //VARIABLE TO HOLD COMPLETE JSON DATA\r\n\r\n        try {\r\n            URL urlObject = new URL( &quot;https://api.myjson.com/bins/161kkd&quot; );\r\n            HttpURLConnection httpURLConnection = (HttpURLConnection) urlObject.openConnection();\r\n            InputStream inputStreamObject = httpURLConnection.getInputStream();\r\n            BufferedReader bufferedReaderObject = new BufferedReader( new InputStreamReader( inputStreamObject ) );\r\n\r\n            while (myJSON != null) {\r\n                myJSON = bufferedReaderObject.readLine();\r\n                completeJSONdata += myJSON;\r\n            }\r\n\r\n        } catch (MalformedURLException e) {\r\n            e.printStackTrace();\r\n            Log.d( TAG, &quot;doInBackground: ERROR RETRIEVING URL&quot; );\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            Log.d( TAG, &quot;doInBackground: ERROR HTTP CONNECTION&quot; );\r\n        }\r\n\r\n\r\n        //DESERIALIZATION, converting JSON to java variables, making the data easy to handle\r\n        Gson gsonObject = new GsonBuilder()\r\n                .setLenient()\r\n                .create();\r\n        DeserializedContainer deserializedContainerObject;\r\n\r\n        deserializedContainerObject = gsonObject.fromJson( completeJSONdata, DeserializedContainer.class );\r\n        //Log.d( TAG, &quot;doInBackground: &quot; + deserializedContainerObject.getDeserializedContainerList() );\r\n\r\n\r\n        return deserializedContainerObject;\r\n    }\r\n\r\n    @Override\r\n    protected void onPostExecute(final DeserializedContainer result) {\r\n\r\n        mListener.onSuccess( result );\r\n        //FUNKAR ATT H&#196;MTA JSON DATA. KOLLA LOGCAT\r\n        Log.d( TAG, &quot;onPostExecuteLOL: &quot; + result );\r\n    }\r\n\r\n    public static interface OnLoadListener {\r\n        void onSuccess(DeserializedContainer container);\r\n    }}\r\n\r\nThe error is at         deserializedContainerObject = gsonObject.fromJson( completeJSONdata, DeserializedContainer.class );\r\n\r\n\r\nThe data objects to hold the JSON data:\r\n\r\n    public class DeserializedContainer {\r\n    @SerializedName(&quot;deserializedContainerList&quot;)\r\n    public List&lt;DeserializedVariables&gt; deserializedContainerList = new ArrayList&lt;&gt;();\r\n\r\n    public List&lt;DeserializedVariables&gt; getDeserializedContainerList() {\r\n        return deserializedContainerList;\r\n    }}\r\n\r\n    public class DeserializedVariables {\r\n    @SerializedName( &quot;movieName&quot; )\r\n    private String movieName;\r\n    @SerializedName( &quot;movieYear&quot; )\r\n    private int movieYear;\r\n    @SerializedName( &quot;movieRating&quot; )\r\n    private double movieRating;}\r\n\r\nRelevant data from the main thread:\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n    private static final String TAG = &quot;MainActivity&quot;;\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate( savedInstanceState );\r\n        setContentView( R.layout.activity_main );\r\n\r\n        //BACKGROUND THREAD\r\n        JSONimport jsonImportObject = new JSONimport( new JSONimport.OnLoadListener() {\r\n            @Override\r\n            public void onSuccess(DeserializedContainer container) {\r\n                container.getDeserializedContainerList();\r\n            }\r\n        } );\r\n        jsonImportObject.execute();\r\n\r\n        //Log.d( TAG, &quot;onCreateGETTING DATA : &quot; + jsonImportObject.getCompletedData());\r\n\r\n        DeserializedContainer deserializedContainerObject = new DeserializedContainer();\r\n        Log.d( TAG, &quot;onCreate: &quot; + deserializedContainerObject);\r\n\r\nJSON: \r\n    \r\n{&quot;deserializedContainerList&quot;:[{&quot;movieName&quot;:&quot;filmA&quot;,&quot;movieYear&quot;:2017,&quot;movieRating&quot;:4.7},{&quot;movieName&quot;:&quot;filmB&quot;,&quot;movieYear&quot;:2018,&quot;movieRating&quot;:4.8},{&quot;movieName&quot;:&quot;filmC&quot;,&quot;movieYear&quot;:2019,&quot;movieRating&quot;:4.9}]}\r\n\r\n\r\nSorry for such a long post, hope you have the energy to go through it. I&#39;m really stuck. I know of Retrofit and similar libraries, but I have spent so many hours on getting this right that I don&#39;t want to abandon it just yet :P\r\n\r\nThanks!\r\n\r\n///////\r\nUPDATE\r\n///////\r\nI updated the code according to Laurent B&#39;s suggestion, and it worked! Or, at least it didn&#39;t crash. I tried printing the list on the main thread with the following code: \r\n\r\n    for(int i = 0; i &lt; deserializedContainerObject.deserializedContainerList.size(); i++) {\r\n            Log.d( TAG, &quot;onCreate: &quot; + deserializedContainerObject.deserializedContainerList.get( i ));\r\n            \r\n        }\r\n\r\nBut nothing showed. When checking deserializedContainerObject.deserializedContainerList.size() it showed 0. That is, no data has been added to the list... Hmmm. At least it doesn&#39;t crash, thanks to Laurent B so one step closer. ","title":"Why is JSON document not fully consumed?","body":"<p>I'm trying to retrieve JSON data from an external source for practice. I have gotten all the code in place but for some reason I get an error saying that the document is not fully consumed. I have watched and read multiple tutorials and guides, but still can't seem to get it right. I have also searched stack for answers, but since I don't know what's wrong, I don't really know what to look for.</p>\n\n<p>All the code is in place and there is no obvious fault in it. The JSON data has been validated and it works to retrieve as raw JSON data, as seen in a log. The problem occur at the Gson conversion when the data should be transferred to a java data class. Any ideas what could be wrong?</p>\n\n<pre><code>public class JSONimport extends AsyncTask&lt;Void, Void, DeserializedContainer&gt; {\n\nprivate static final String TAG = \"TAG\";\n\n//VARIABLES TO HOLD JSON DATA\nprivate OnLoadListener mListener;\n\n\n//CONSTRUCTOR\npublic JSONimport(OnLoadListener listener) {\n    this.mListener = listener;\n}\n\n//ASYNK, DO IN BACKGROUND THREAD\n@Override\nprotected DeserializedContainer doInBackground(Void... voids) {\n    String myJSON = \"\"; //TEMP VARIABLE TO HOLD JSON DATA\n    String completeJSONdata = \"\"; //VARIABLE TO HOLD COMPLETE JSON DATA\n\n    try {\n        URL urlObject = new URL( \"https://api.myjson.com/bins/161kkd\" );\n        HttpURLConnection httpURLConnection = (HttpURLConnection) urlObject.openConnection();\n        InputStream inputStreamObject = httpURLConnection.getInputStream();\n        BufferedReader bufferedReaderObject = new BufferedReader( new InputStreamReader( inputStreamObject ) );\n\n        while (myJSON != null) {\n            myJSON = bufferedReaderObject.readLine();\n            completeJSONdata += myJSON;\n        }\n\n    } catch (MalformedURLException e) {\n        e.printStackTrace();\n        Log.d( TAG, \"doInBackground: ERROR RETRIEVING URL\" );\n    } catch (IOException e) {\n        e.printStackTrace();\n        Log.d( TAG, \"doInBackground: ERROR HTTP CONNECTION\" );\n    }\n\n\n    //DESERIALIZATION, converting JSON to java variables, making the data easy to handle\n    Gson gsonObject = new GsonBuilder()\n            .setLenient()\n            .create();\n    DeserializedContainer deserializedContainerObject;\n\n    deserializedContainerObject = gsonObject.fromJson( completeJSONdata, DeserializedContainer.class );\n    //Log.d( TAG, \"doInBackground: \" + deserializedContainerObject.getDeserializedContainerList() );\n\n\n    return deserializedContainerObject;\n}\n\n@Override\nprotected void onPostExecute(final DeserializedContainer result) {\n\n    mListener.onSuccess( result );\n    //FUNKAR ATT HÄMTA JSON DATA. KOLLA LOGCAT\n    Log.d( TAG, \"onPostExecuteLOL: \" + result );\n}\n\npublic static interface OnLoadListener {\n    void onSuccess(DeserializedContainer container);\n}}\n</code></pre>\n\n<p>The error is at         deserializedContainerObject = gsonObject.fromJson( completeJSONdata, DeserializedContainer.class );</p>\n\n<p>The data objects to hold the JSON data:</p>\n\n<pre><code>public class DeserializedContainer {\n@SerializedName(\"deserializedContainerList\")\npublic List&lt;DeserializedVariables&gt; deserializedContainerList = new ArrayList&lt;&gt;();\n\npublic List&lt;DeserializedVariables&gt; getDeserializedContainerList() {\n    return deserializedContainerList;\n}}\n\npublic class DeserializedVariables {\n@SerializedName( \"movieName\" )\nprivate String movieName;\n@SerializedName( \"movieYear\" )\nprivate int movieYear;\n@SerializedName( \"movieRating\" )\nprivate double movieRating;}\n</code></pre>\n\n<p>Relevant data from the main thread:</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\nprivate static final String TAG = \"MainActivity\";\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate( savedInstanceState );\n    setContentView( R.layout.activity_main );\n\n    //BACKGROUND THREAD\n    JSONimport jsonImportObject = new JSONimport( new JSONimport.OnLoadListener() {\n        @Override\n        public void onSuccess(DeserializedContainer container) {\n            container.getDeserializedContainerList();\n        }\n    } );\n    jsonImportObject.execute();\n\n    //Log.d( TAG, \"onCreateGETTING DATA : \" + jsonImportObject.getCompletedData());\n\n    DeserializedContainer deserializedContainerObject = new DeserializedContainer();\n    Log.d( TAG, \"onCreate: \" + deserializedContainerObject);\n</code></pre>\n\n<p>JSON: </p>\n\n<p>{\"deserializedContainerList\":[{\"movieName\":\"filmA\",\"movieYear\":2017,\"movieRating\":4.7},{\"movieName\":\"filmB\",\"movieYear\":2018,\"movieRating\":4.8},{\"movieName\":\"filmC\",\"movieYear\":2019,\"movieRating\":4.9}]}</p>\n\n<p>Sorry for such a long post, hope you have the energy to go through it. I'm really stuck. I know of Retrofit and similar libraries, but I have spent so many hours on getting this right that I don't want to abandon it just yet :P</p>\n\n<p>Thanks!</p>\n\n<p>///////\nUPDATE\n///////\nI updated the code according to Laurent B's suggestion, and it worked! Or, at least it didn't crash. I tried printing the list on the main thread with the following code: </p>\n\n<pre><code>for(int i = 0; i &lt; deserializedContainerObject.deserializedContainerList.size(); i++) {\n        Log.d( TAG, \"onCreate: \" + deserializedContainerObject.deserializedContainerList.get( i ));\n\n    }\n</code></pre>\n\n<p>But nothing showed. When checking deserializedContainerObject.deserializedContainerList.size() it showed 0. That is, no data has been added to the list... Hmmm. At least it doesn't crash, thanks to Laurent B so one step closer. </p>\n"},{"tags":["java","spring-boot","transactions"],"answers":[{"comments":[{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1690008375,"post_id":76742590,"comment_id":135295750,"body_markdown":"thanks for your answer, i am not specifying any isolation level or propagation, it is default annotation at the moment, the last part when you say &quot;it will either get the state before the transaction or after the transaction but nothing in between&quot;, that is good for my use case cause if versioning is read with the old value, it will be pointing to an existing configuration always. And then after this transaction, if it is read with the new value, I believe that then also configurations is ready with its new values (inserts or updates from this transaction) is this right?","body":"thanks for your answer, i am not specifying any isolation level or propagation, it is default annotation at the moment, the last part when you say &quot;it will either get the state before the transaction or after the transaction but nothing in between&quot;, that is good for my use case cause if versioning is read with the old value, it will be pointing to an existing configuration always. And then after this transaction, if it is read with the new value, I believe that then also configurations is ready with its new values (inserts or updates from this transaction) is this right?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690008851,"post_id":76742590,"comment_id":135295786,"body_markdown":"The [default isolation level depends on the underlying data store](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Isolation.html#DEFAULT) i.e.  your JDBC connection/DB. Whether other connections can read intermediate results depends on the isolation level.","body":"The <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/transaction/annotation/Isolation.html#DEFAULT\" rel=\"nofollow noreferrer\">default isolation level depends on the underlying data store</a> i.e.  your JDBC connection/DB. Whether other connections can read intermediate results depends on the isolation level."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1690009164,"post_id":76742590,"comment_id":135295803,"body_markdown":"Thanks mate, I am using mysql at the moment, with hikari connection and the driver is com.mysql.cj.jdbc.Driver","body":"Thanks mate, I am using mysql at the moment, with hikari connection and the driver is com.mysql.cj.jdbc.Driver"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1690009520,"post_id":76742590,"comment_id":135295823,"body_markdown":"According to https://stackoverflow.com/a/58472480/10871900, it seems the default isolation level is `TRANSACTION_READ_COMMITTED` but it may be version dependent.","body":"According to <a href=\"https://stackoverflow.com/a/58472480/10871900\">stackoverflow.com/a/58472480/10871900</a>, it seems the default isolation level is <code>TRANSACTION_READ_COMMITTED</code> but it may be version dependent."},{"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"score":0,"creation_date":1690010045,"post_id":76742590,"comment_id":135295860,"body_markdown":"Okay ty, I believe im good for now but going to run some stress tests trying to get this worst scenario I was saying, hopefully it doesnt happen lol, but if it does I might change the isolation to serialization, ty","body":"Okay ty, I believe im good for now but going to run some stress tests trying to get this worst scenario I was saying, hopefully it doesnt happen lol, but if it does I might change the isolation to serialization, ty"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":1,"creation_date":1690010944,"post_id":76742590,"comment_id":135295915,"body_markdown":"You could also use use `Thread.sleep` or similar when testing (at different places) and see what happens.","body":"You could also use use <code>Thread.sleep</code> or similar when testing (at different places) and see what happens."}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":6,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690007529,"creation_date":1690007529,"answer_id":76742590,"question_id":76742529,"body_markdown":"`@Transactional` means it will run in a transaction.\r\nThe purpose of transactions is that they are _atomic_ meaning they either run completely or not at all.\r\n\r\nThe application first tells the database to start a transaction, sends all the changes to the DB and &quot;commit&quot; (apply the changes) when finished. If anything failed, the transaction will be &quot;rolled back&quot; (reverted).\r\n\r\nAs explained in [this question](https://stackoverflow.com/a/8490932/10871900), you can set isolation levels for configuring what other DB connections see. If you want to run the operations in a sequence, you can use `ISOLATION_SERIALIZABLE`. If you&#39;re using `ISOLATION_READ_COMMITTED`, it will either get the state before the transaction or after the transaction but nothing in between.","title":"Question about Spring Transactional commit when saving/updating","body":"<p><code>@Transactional</code> means it will run in a transaction.\nThe purpose of transactions is that they are <em>atomic</em> meaning they either run completely or not at all.</p>\n<p>The application first tells the database to start a transaction, sends all the changes to the DB and &quot;commit&quot; (apply the changes) when finished. If anything failed, the transaction will be &quot;rolled back&quot; (reverted).</p>\n<p>As explained in <a href=\"https://stackoverflow.com/a/8490932/10871900\">this question</a>, you can set isolation levels for configuring what other DB connections see. If you want to run the operations in a sequence, you can use <code>ISOLATION_SERIALIZABLE</code>. If you're using <code>ISOLATION_READ_COMMITTED</code>, it will either get the state before the transaction or after the transaction but nothing in between.</p>\n"}],"owner":{"account_id":16720659,"reputation":408,"user_id":12085680,"display_name":"BugsOverflow"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":228,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690007529,"creation_date":1690006043,"question_id":76742529,"body_markdown":"I have enabled the sql logs in a SpringBoot application and I see that even I gave an order to the way I would like the updates to be executed, the logs shows that updates are being done in other order, I have 2 tables and the method that is updating those 2 tables\r\nis annotated with @Transactional. \r\n\r\nI am wondering about this because when I update one of those tables the other one should also be consistent with this update, so I wanted to first update the one that needs to be consistent, but I think in my case there is no problem because at the end when the method returns succesfully the &quot;commit&quot; will be executed and the order wont matter because it is like an snapshot being saved in the database right?\r\n\r\n**for example:**\r\n\r\nSuppose we have 2 tables, &quot;configuration&quot; and &quot;versioning&quot;.\r\n\r\nInside @Transactional method I do as follows:\r\n\r\n    @Transactional\r\n    public void update(){\r\n      configurationsRepository.saveAll(configurations);\r\n      versioningRepository.saveAll(versioning);\r\n    }\r\n\r\nI need the configurations to be saved first because versioning is the one who knows which configurations are &quot;productive&quot;, but when I see the sql logs I see that the versionings are being save/updated first which is &quot;bad&quot; because maybe it could point to non existant configurations.\r\n\r\nSo what would be a bad scenario is that versioning gets called and in those milliseconds of difference configurations is not updated... So far this has not happened, but I wonder if it can happen or my assumption about the commit at the end of the transaction is right, both will be updated at the same instant? And I believe that is the purpose of this Transactional hehe that everything gets saved or nothing gets saved at some instant","title":"Question about Spring Transactional commit when saving/updating","body":"<p>I have enabled the sql logs in a SpringBoot application and I see that even I gave an order to the way I would like the updates to be executed, the logs shows that updates are being done in other order, I have 2 tables and the method that is updating those 2 tables\nis annotated with @Transactional.</p>\n<p>I am wondering about this because when I update one of those tables the other one should also be consistent with this update, so I wanted to first update the one that needs to be consistent, but I think in my case there is no problem because at the end when the method returns succesfully the &quot;commit&quot; will be executed and the order wont matter because it is like an snapshot being saved in the database right?</p>\n<p><strong>for example:</strong></p>\n<p>Suppose we have 2 tables, &quot;configuration&quot; and &quot;versioning&quot;.</p>\n<p>Inside @Transactional method I do as follows:</p>\n<pre><code>@Transactional\npublic void update(){\n  configurationsRepository.saveAll(configurations);\n  versioningRepository.saveAll(versioning);\n}\n</code></pre>\n<p>I need the configurations to be saved first because versioning is the one who knows which configurations are &quot;productive&quot;, but when I see the sql logs I see that the versionings are being save/updated first which is &quot;bad&quot; because maybe it could point to non existant configurations.</p>\n<p>So what would be a bad scenario is that versioning gets called and in those milliseconds of difference configurations is not updated... So far this has not happened, but I wonder if it can happen or my assumption about the commit at the end of the transaction is right, both will be updated at the same instant? And I believe that is the purpose of this Transactional hehe that everything gets saved or nothing gets saved at some instant</p>\n"},{"tags":["java","android","android-studio","web-scraping","htmlunit"],"answers":[{"comments":[{"owner":{"account_id":11343846,"reputation":433,"user_id":8316956,"display_name":"Humayun MHA"},"score":0,"creation_date":1690071775,"post_id":76742578,"comment_id":135302085,"body_markdown":"Thanks for sharing this, yeah it helps alot and it works on android app.","body":"Thanks for sharing this, yeah it helps alot and it works on android app."},{"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"score":0,"creation_date":1690095374,"post_id":76742578,"comment_id":135303303,"body_markdown":"Great - github stars are also welcome :-)","body":"Great - github stars are also welcome :-)"}],"tags":[],"owner":{"account_id":6163228,"reputation":2754,"user_id":4804091,"display_name":"RBRi"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690007172,"creation_date":1690007172,"answer_id":76742578,"question_id":76740786,"body_markdown":"There is a special version of HtmlUnit for Android because there are some problems with the android jdk.\r\n\r\nSee https://github.com/HtmlUnit/htmlunit-android\r\n\r\n    implementation group: &#39;org.htmlunit&#39;, name: &#39;htmlunit3-android&#39;, version: &#39;3.3.0&#39;\r\n\r\nAnd please make sure you are using the latest version of htmlunit3-android; this implies you have to use\r\n\r\n    page.asNormalizedText();\r\n\r\ninstead of page.asText().\r\n\r\n(running a sample similar to your one is part of the release testing - so i&#39;m really sure the latest version works for this on android).\r\n\r\nIf you still facing errors please open an issue and provide the url you like to scape to give me a chance to reproduce.\r\n\r\n","title":"Using HTMLUnit in Android Studio to scrap website in android app, but WebClint is not recognizing as import in ActivityClass","body":"<p>There is a special version of HtmlUnit for Android because there are some problems with the android jdk.</p>\n<p>See <a href=\"https://github.com/HtmlUnit/htmlunit-android\" rel=\"nofollow noreferrer\">https://github.com/HtmlUnit/htmlunit-android</a></p>\n<pre><code>implementation group: 'org.htmlunit', name: 'htmlunit3-android', version: '3.3.0'\n</code></pre>\n<p>And please make sure you are using the latest version of htmlunit3-android; this implies you have to use</p>\n<pre><code>page.asNormalizedText();\n</code></pre>\n<p>instead of page.asText().</p>\n<p>(running a sample similar to your one is part of the release testing - so i'm really sure the latest version works for this on android).</p>\n<p>If you still facing errors please open an issue and provide the url you like to scape to give me a chance to reproduce.</p>\n"}],"owner":{"account_id":11343846,"reputation":433,"user_id":8316956,"display_name":"Humayun MHA"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76742578,"answer_count":1,"score":0,"last_activity_date":1690007172,"creation_date":1689968180,"question_id":76740786,"body_markdown":"I want to scrap a website, but I can&#39;t use jsoup because jsoup don&#39;t have JavaScript execution. I am trying to run HTMLUnit in my Android app with version: 3.3.0, but in activity class, its not recognizing WebClint, can someone please tell how to solve this?\r\n\r\nHere&#39;s the simple code which i am trying to run:\r\n```\r\nprivate void scrapeWebsite() {\r\n        String targetUrl = &quot;https://example.com&quot;; // Replace with the URL of the website you want to scrape\r\n\r\n        try (WebClient webClient = new WebClient()) {\r\n            // Step 1: Enable JavaScript for the WebClient (Important for handling JavaScript challenges)\r\n            webClient.getOptions().setJavaScriptEnabled(true);\r\n\r\n            // Step 2: Use HTMLUnit to bypass JavaScript challenges and get the webpage content\r\n            HtmlPage page = webClient.getPage(targetUrl);\r\n\r\n            // Step 3: Get the page content as text\r\n            String pageContent = page.asText();\r\n\r\n            // Display the scraped data in the TextView\r\n            scrapedDataTextView.setText(pageContent);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n            scrapedDataTextView.setText(&quot;Error occurred while scraping&quot;);\r\n        }\r\n    }\r\n```\r\n\r\nalso want to know that does HTMLUnit is good approach to scrap website in android app and does even it work or not?","title":"Using HTMLUnit in Android Studio to scrap website in android app, but WebClint is not recognizing as import in ActivityClass","body":"<p>I want to scrap a website, but I can't use jsoup because jsoup don't have JavaScript execution. I am trying to run HTMLUnit in my Android app with version: 3.3.0, but in activity class, its not recognizing WebClint, can someone please tell how to solve this?</p>\n<p>Here's the simple code which i am trying to run:</p>\n<pre><code>private void scrapeWebsite() {\n        String targetUrl = &quot;https://example.com&quot;; // Replace with the URL of the website you want to scrape\n\n        try (WebClient webClient = new WebClient()) {\n            // Step 1: Enable JavaScript for the WebClient (Important for handling JavaScript challenges)\n            webClient.getOptions().setJavaScriptEnabled(true);\n\n            // Step 2: Use HTMLUnit to bypass JavaScript challenges and get the webpage content\n            HtmlPage page = webClient.getPage(targetUrl);\n\n            // Step 3: Get the page content as text\n            String pageContent = page.asText();\n\n            // Display the scraped data in the TextView\n            scrapedDataTextView.setText(pageContent);\n        } catch (IOException e) {\n            e.printStackTrace();\n            scrapedDataTextView.setText(&quot;Error occurred while scraping&quot;);\n        }\n    }\n</code></pre>\n<p>also want to know that does HTMLUnit is good approach to scrap website in android app and does even it work or not?</p>\n"},{"tags":["java","spring","maven","spring-mvc","maven-archetype"],"answers":[{"tags":[],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690006956,"creation_date":1690006956,"answer_id":76742569,"question_id":76740364,"body_markdown":"you just need to wait and try again later, the problem may have been in the Internet connection or the server was not responding","title":"Why a project from maven-archetype-webapp in intelij idea is not created?","body":"<p>you just need to wait and try again later, the problem may have been in the Internet connection or the server was not responding</p>\n"}],"owner":{"account_id":27733991,"reputation":79,"user_id":21171938,"display_name":"Артем Лебідь"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76742569,"answer_count":1,"score":-1,"last_activity_date":1690006956,"creation_date":1689963758,"question_id":76740364,"body_markdown":"I&#39;m trying to create a new project in intelij idea using maven-archetype-webapp, but the following error occurs during compilation\r\n\r\n[![Creating the project...][1]][1]\r\n\r\n\r\n[![All settings of project][2]][2]\r\n\r\n\r\n[![Error][3]][3]\r\n\r\n\r\n[![Error2][4]][4]\r\n\r\n\r\n[![Error3][5]][5]\r\n\r\n\r\n[![Error4][6]][6]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/BUnue.jpg\r\n  [2]: https://i.stack.imgur.com/4QXqe.jpg\r\n  [3]: https://i.stack.imgur.com/3MYrb.jpg\r\n  [4]: https://i.stack.imgur.com/SHObq.jpg\r\n  [5]: https://i.stack.imgur.com/q4RoZ.jpg\r\n  [6]: https://i.stack.imgur.com/GatL0.jpg\r\n\r\nFull text version of the error\r\n\r\n    C:\\Users\\Artem\\.jdks\\liberica-1.8.0_345\\bin\\java.exe -Dmaven.multiModuleProjectDirectory=C:\\Users\\Artem\\AppData\\Local\\Temp\\archetypetmp -Djansi.passthrough=true -Dmaven.home=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3 -Dclassworlds.conf=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\bin\\m2.conf -Dmaven.ext.class.path=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven-event-listener.jar -javaagent:C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\lib\\idea_rt.jar=58796:C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\bin -Dfile.encoding=UTF-8 -classpath C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license org.codehaus.classworlds.Launcher -Didea.version=2023.1.4 -DinteractiveMode=false -DgroupId=com.artem.spring.mvc -DartifactId=springMVCCourse -Dversion=1.0-SNAPSHOT -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.0 org.apache.maven.plugins:maven-archetype-plugin:RELEASE:generate\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------\r\n    [INFO] Building Maven Stub Project (No POM) 1\r\n    [INFO] --------------------------------[ pom ]---------------------------------\r\n    [INFO] \r\n    [INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.1:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;\r\n    [INFO] \r\n    [INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.1:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;\r\n    [INFO] \r\n    [INFO] \r\n    [INFO] --- maven-archetype-plugin:3.2.1:generate (default-cli) @ standalone-pom ---\r\n    [INFO] Generating project in Batch mode\r\n    [WARNING] No archetype found in remote catalog. Defaulting to internal catalog\r\n    [INFO] Archetype repository not defined. Using the one from [org.apache.maven.archetypes:maven-archetype-webapp:1.0] found in catalog internal\r\n    Downloading from central: https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  1.126 s\r\n    [INFO] Finished at: 2023-07-21T21:09:43+03:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-webapp:1.0) -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n    \r\n    Process finished with exit code 1\r\n\r\nWhat can be the error, is there any other way to create a project with maven-archetype-webapp?","title":"Why a project from maven-archetype-webapp in intelij idea is not created?","body":"<p>I'm trying to create a new project in intelij idea using maven-archetype-webapp, but the following error occurs during compilation</p>\n<p><a href=\"https://i.stack.imgur.com/BUnue.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BUnue.jpg\" alt=\"Creating the project...\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/4QXqe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4QXqe.jpg\" alt=\"All settings of project\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/3MYrb.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3MYrb.jpg\" alt=\"Error\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/SHObq.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SHObq.jpg\" alt=\"Error2\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/q4RoZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/q4RoZ.jpg\" alt=\"Error3\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/GatL0.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GatL0.jpg\" alt=\"Error4\" /></a></p>\n<p>Full text version of the error</p>\n<pre><code>C:\\Users\\Artem\\.jdks\\liberica-1.8.0_345\\bin\\java.exe -Dmaven.multiModuleProjectDirectory=C:\\Users\\Artem\\AppData\\Local\\Temp\\archetypetmp -Djansi.passthrough=true -Dmaven.home=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3 -Dclassworlds.conf=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\bin\\m2.conf -Dmaven.ext.class.path=C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven-event-listener.jar -javaagent:C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\lib\\idea_rt.jar=58796:C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\bin -Dfile.encoding=UTF-8 -classpath C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds-2.6.0.jar;C:\\Users\\Artem\\AppData\\Local\\JetBrains\\Toolbox\\apps\\IDEA-U\\ch-0\\231.9225.16\\plugins\\maven\\lib\\maven3\\boot\\plexus-classworlds.license org.codehaus.classworlds.Launcher -Didea.version=2023.1.4 -DinteractiveMode=false -DgroupId=com.artem.spring.mvc -DartifactId=springMVCCourse -Dversion=1.0-SNAPSHOT -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.0 org.apache.maven.plugins:maven-archetype-plugin:RELEASE:generate\n[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] --------------------------------[ pom ]---------------------------------\n[INFO] \n[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.1:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;\n[INFO] \n[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.1:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- maven-archetype-plugin:3.2.1:generate (default-cli) @ standalone-pom ---\n[INFO] Generating project in Batch mode\n[WARNING] No archetype found in remote catalog. Defaulting to internal catalog\n[INFO] Archetype repository not defined. Using the one from [org.apache.maven.archetypes:maven-archetype-webapp:1.0] found in catalog internal\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/maven/archetypes/maven-archetype-webapp/1.0/maven-archetype-webapp-1.0.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.126 s\n[INFO] Finished at: 2023-07-21T21:09:43+03:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-archetype-plugin:3.2.1:generate (default-cli) on project standalone-pom: The desired archetype does not exist (org.apache.maven.archetypes:maven-archetype-webapp:1.0) -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\nProcess finished with exit code 1\n</code></pre>\n<p>What can be the error, is there any other way to create a project with maven-archetype-webapp?</p>\n"},{"tags":["java","locking","synchronized"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1689975780,"post_id":76741368,"comment_id":135293807,"body_markdown":"What `runSubJobs` should do if given `JobModel` is already in process by `runSubJobs` running in another thread? wait and run again? Or, for example, return immediately?","body":"What <code>runSubJobs</code> should do if given <code>JobModel</code> is already in process by <code>runSubJobs</code> running in another thread? wait and run again? Or, for example, return immediately?"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1689975956,"post_id":76741368,"comment_id":135293829,"body_markdown":"Looks about right. Just beware that it&#39;s locking on the actual object. If you have two equal objects, they&#39;re still separate for purposes of synchronization. Conversely, if objects are cached and reused for different purposes, you could end up sharing a lock unwittingly. (For that reason, locking on `jobModel.getId()` would be a really bad idea.) Also, If there&#39;s any code in `JobModel` that synchronizes on `this`, you&#39;re going to be contending for the same lock.","body":"Looks about right. Just beware that it&#39;s locking on the actual object. If you have two equal objects, they&#39;re still separate for purposes of synchronization. Conversely, if objects are cached and reused for different purposes, you could end up sharing a lock unwittingly. (For that reason, locking on <code>jobModel.getId()</code> would be a really bad idea.) Also, If there&#39;s any code in <code>JobModel</code> that synchronizes on <code>this</code>, you&#39;re going to be contending for the same lock."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689976182,"creation_date":1689976182,"answer_id":76741426,"question_id":76741368,"body_markdown":"`synchronized (x) {}` works like this:\r\n\r\n* dereference `x`. It&#39;s not about the variable, it&#39;s the object it is pointing at. Given `Object y = new Object(); Object x = y;`, `synchronized (y) {}` and `synchronized (x) {}` would function identically, as x and y are pointing at the same object. Given that it dereferences, if `x` is null, that would result in a `NullPointerException`.\r\n\r\n* All objects have a hidden extra field; it looks like: `private Thread owner = null;`.\r\n\r\n* `synchronized (x) {` _tries_ to run `if (x.owner == null) { x.owner = Thread.currentThread(); } else { just keep trying but without wasting all that much CPU cycles checking }` - and, of course, atomically. Also, threads are &#39;re-entrant&#39;. `synchronized (x) {` when the object x is pointing at is _already_ marked as &#39;this thread owns it&#39; works fine.\r\n\r\n* Exiting that sync block in any way (run to the `}`, `return;` or `break;` out of it, or even throw an exception that leads out of it), will run `x.owner = null;` thus letting any other thread that is &#39;blocked&#39; waiting to become the owner of this object get on with it.\r\n\r\n* Resolution of conflict is __indeterminate__ and __comes with no guarantee of fairness__. In other words, if 5 threads are all blocking because they are trying to become the owner of the same object and that object currently is owned by another thread, and that thread exits the sync block - then the JVM makes no promises about who &#39;wins&#39;. In particular, the thread that has been waiting the longest has absolutely no advantage. The JVM does not guarantee that it rolls a fair die either. It just doesn&#39;t tell you how it decides, and in practice it depends on the system, OS, phase of the moon, and which song you&#39;re playing at the time as far as you know. If your software doesn&#39;t work correctly unless &#39;who wins the fight&#39; goes a certain way, your software is buggy in an untestable way. Which is bad.\r\n\r\n---\r\n\r\nHence: Yeah sure that should work fine. Generally you want locks to be well documented: You should document in the javadoc of `JobModel` that locking on it would also stop any sub job processing and is therefore _strongly_ advised against. If this code is in the same package as `JobModel`, I recommend you instead make a dedicated lock object and make it package private:\r\n\r\n```\r\npublic class JobModel {\r\n  final Object subJobRunnerLock = new Object[0];\r\n}\r\n\r\npublic class SubJobRunner {\r\n  public void runSubJobs(JobModel m) {\r\n    synchronized (m.subJobRunnerLock) {\r\n      .. process em here ..\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThis avoids having other code outside of your direct control acquire locks and thus completely asplode your code by accident. __You very very rarely want to lock on `public` anything__.\r\n\r\nNB: `new Object[0]` in case you want JobModel to be serializable; it&#39;s just a simple to create tiny object that, unlike `new Object();`, is serializable. If serializability doesn&#39;t matter, `new Object()` is just as easy.\r\n\r\n----\r\n\r\nNote that this is fairly low-level stuff. The `java.util.concurrent` package has all sorts of useful utilities that tend to work a lot better. For example, there&#39;s a `ReadWriteLock` which works a lot like these but has the additional ability to have a &#39;one writer many readers&#39; setup: Any amount of readers can acquire the lock and run simultaneously, but only one writer ever can (and readers block the writer, and the writer blocks the readers). A common job that is quite difficult to manually write and manage with `synchronized`, `wait()`, and `notifyAll()` (which are the concurrency management primitives baked into the JVM).\r\n\r\nOne serious issue with managing multi-core stuff is that __it is by and large utterly untestable__ - the JVM has all sorts of room to act as it wants, but, on many systems it reliably acts in one way. Meaning, it is very simple to write code that works perfectly all day today. But it never works on the computer of your friend, and next week every few hours it randomly doesn&#39;t work. Hence, &#39;experimentation&#39;, ordinarily a great way to learn to program, works out horribly here. All the more reason to use stuff from `java.util.concurrent`!\r\n","title":"How do I conditionally lock a method based on its parameter in Java?","body":"<p><code>synchronized (x) {}</code> works like this:</p>\n<ul>\n<li><p>dereference <code>x</code>. It's not about the variable, it's the object it is pointing at. Given <code>Object y = new Object(); Object x = y;</code>, <code>synchronized (y) {}</code> and <code>synchronized (x) {}</code> would function identically, as x and y are pointing at the same object. Given that it dereferences, if <code>x</code> is null, that would result in a <code>NullPointerException</code>.</p>\n</li>\n<li><p>All objects have a hidden extra field; it looks like: <code>private Thread owner = null;</code>.</p>\n</li>\n<li><p><code>synchronized (x) {</code> <em>tries</em> to run <code>if (x.owner == null) { x.owner = Thread.currentThread(); } else { just keep trying but without wasting all that much CPU cycles checking }</code> - and, of course, atomically. Also, threads are 're-entrant'. <code>synchronized (x) {</code> when the object x is pointing at is <em>already</em> marked as 'this thread owns it' works fine.</p>\n</li>\n<li><p>Exiting that sync block in any way (run to the <code>}</code>, <code>return;</code> or <code>break;</code> out of it, or even throw an exception that leads out of it), will run <code>x.owner = null;</code> thus letting any other thread that is 'blocked' waiting to become the owner of this object get on with it.</p>\n</li>\n<li><p>Resolution of conflict is <strong>indeterminate</strong> and <strong>comes with no guarantee of fairness</strong>. In other words, if 5 threads are all blocking because they are trying to become the owner of the same object and that object currently is owned by another thread, and that thread exits the sync block - then the JVM makes no promises about who 'wins'. In particular, the thread that has been waiting the longest has absolutely no advantage. The JVM does not guarantee that it rolls a fair die either. It just doesn't tell you how it decides, and in practice it depends on the system, OS, phase of the moon, and which song you're playing at the time as far as you know. If your software doesn't work correctly unless 'who wins the fight' goes a certain way, your software is buggy in an untestable way. Which is bad.</p>\n</li>\n</ul>\n<hr />\n<p>Hence: Yeah sure that should work fine. Generally you want locks to be well documented: You should document in the javadoc of <code>JobModel</code> that locking on it would also stop any sub job processing and is therefore <em>strongly</em> advised against. If this code is in the same package as <code>JobModel</code>, I recommend you instead make a dedicated lock object and make it package private:</p>\n<pre><code>public class JobModel {\n  final Object subJobRunnerLock = new Object[0];\n}\n\npublic class SubJobRunner {\n  public void runSubJobs(JobModel m) {\n    synchronized (m.subJobRunnerLock) {\n      .. process em here ..\n    }\n  }\n}\n</code></pre>\n<p>This avoids having other code outside of your direct control acquire locks and thus completely asplode your code by accident. <strong>You very very rarely want to lock on <code>public</code> anything</strong>.</p>\n<p>NB: <code>new Object[0]</code> in case you want JobModel to be serializable; it's just a simple to create tiny object that, unlike <code>new Object();</code>, is serializable. If serializability doesn't matter, <code>new Object()</code> is just as easy.</p>\n<hr />\n<p>Note that this is fairly low-level stuff. The <code>java.util.concurrent</code> package has all sorts of useful utilities that tend to work a lot better. For example, there's a <code>ReadWriteLock</code> which works a lot like these but has the additional ability to have a 'one writer many readers' setup: Any amount of readers can acquire the lock and run simultaneously, but only one writer ever can (and readers block the writer, and the writer blocks the readers). A common job that is quite difficult to manually write and manage with <code>synchronized</code>, <code>wait()</code>, and <code>notifyAll()</code> (which are the concurrency management primitives baked into the JVM).</p>\n<p>One serious issue with managing multi-core stuff is that <strong>it is by and large utterly untestable</strong> - the JVM has all sorts of room to act as it wants, but, on many systems it reliably acts in one way. Meaning, it is very simple to write code that works perfectly all day today. But it never works on the computer of your friend, and next week every few hours it randomly doesn't work. Hence, 'experimentation', ordinarily a great way to learn to program, works out horribly here. All the more reason to use stuff from <code>java.util.concurrent</code>!</p>\n"},{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690006131,"creation_date":1690006131,"answer_id":76742531,"question_id":76741368,"body_markdown":"The question seems very similar to question https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843\r\n\r\nSingle thread execution for one requestId (in your case job/jobId).However it does not block and move to next requestId.\r\nThe solution mentioned ignores the jobId,if its already being processed.","title":"How do I conditionally lock a method based on its parameter in Java?","body":"<p>The question seems very similar to question <a href=\"https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843\">Allowing a single thread to use a Long value</a></p>\n<p>Single thread execution for one requestId (in your case job/jobId).However it does not block and move to next requestId.\nThe solution mentioned ignores the jobId,if its already being processed.</p>\n"}],"owner":{"account_id":16450692,"reputation":574,"user_id":11884183,"display_name":"Felix Schildmann"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76741426,"answer_count":2,"score":0,"last_activity_date":1690006131,"creation_date":1689975324,"question_id":76741368,"body_markdown":"I have the following method which runs &#39;SubJobs&#39; for a given `JobModel` parameter:\r\n\r\n    public void runSubJobs(JobModel jobModel) {\r\n         LOGGER.log(&quot;Start executing SubJobs for &quot; + jobModel.getId());\r\n         for (SubJobModel subJobModel : jobModel.getSubJobs()) {\r\n               run(subJobModel);\r\n         }\r\n         LOGGER.log(&quot;Finished executing SubJobs for &quot; + jobModel.getId());\r\n    }\r\n\r\nIn the current state the method can run parallel on different threads but I want to restrict it to the following condition:\r\n\r\n*`runSubJobs()` should only run in parallel for different JobModel objects, no parallel execution for the same JobModel parameter*\r\n\r\n\r\nWhat&#39;s the best practice to solve this? Can I just surround the content of the method with `synchronized (jobModel) {}` like this?:\r\n\r\n    public void runSubJobs(JobModel jobModel) {\r\n      synchronized (jobModel) {\r\n         LOGGER.log(&quot;Start executing SubJobs for &quot; + jobModel.getId());\r\n         for (SubJobModel subJobModel : jobModel.getSubJobs()) {\r\n               run(subJobModel);\r\n         }\r\n         LOGGER.log(&quot;Finished executing SubJobs for &quot; + jobModel.getId());\r\n      }\r\n    }","title":"How do I conditionally lock a method based on its parameter in Java?","body":"<p>I have the following method which runs 'SubJobs' for a given <code>JobModel</code> parameter:</p>\n<pre><code>public void runSubJobs(JobModel jobModel) {\n     LOGGER.log(&quot;Start executing SubJobs for &quot; + jobModel.getId());\n     for (SubJobModel subJobModel : jobModel.getSubJobs()) {\n           run(subJobModel);\n     }\n     LOGGER.log(&quot;Finished executing SubJobs for &quot; + jobModel.getId());\n}\n</code></pre>\n<p>In the current state the method can run parallel on different threads but I want to restrict it to the following condition:</p>\n<p><em><code>runSubJobs()</code> should only run in parallel for different JobModel objects, no parallel execution for the same JobModel parameter</em></p>\n<p>What's the best practice to solve this? Can I just surround the content of the method with <code>synchronized (jobModel) {}</code> like this?:</p>\n<pre><code>public void runSubJobs(JobModel jobModel) {\n  synchronized (jobModel) {\n     LOGGER.log(&quot;Start executing SubJobs for &quot; + jobModel.getId());\n     for (SubJobModel subJobModel : jobModel.getSubJobs()) {\n           run(subJobModel);\n     }\n     LOGGER.log(&quot;Finished executing SubJobs for &quot; + jobModel.getId());\n  }\n}\n</code></pre>\n"},{"tags":["java","scheduledexecutorservice"],"answers":[{"comments":[{"owner":{"account_id":16007952,"reputation":57,"user_id":11552994,"display_name":"Sanyam"},"score":1,"creation_date":1564842780,"post_id":57336338,"comment_id":101166975,"body_markdown":"This way though it gets stuck at future1.get(). If the second thread encounters an exception this method won&#39;t work. It will wait for first thread to get  complete.","body":"This way though it gets stuck at future1.get(). If the second thread encounters an exception this method won&#39;t work. It will wait for first thread to get  complete."},{"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"score":0,"creation_date":1564845711,"post_id":57336338,"comment_id":101167693,"body_markdown":"It is right. The two should be in their own execution thread to make `.get()` no blocking. I updated.  Tell me whether it is better.","body":"It is right. The two should be in their own execution thread to make <code>.get()</code> no blocking. I updated.  Tell me whether it is better."},{"owner":{"account_id":16007952,"reputation":57,"user_id":11552994,"display_name":"Sanyam"},"score":0,"creation_date":1564853857,"post_id":57336338,"comment_id":101169725,"body_markdown":"Did the same thing while I was fixing it but Thanks. Great Help.","body":"Did the same thing while I was fixing it but Thanks. Great Help."}],"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1564845615,"creation_date":1564817232,"answer_id":57336338,"question_id":57336040,"body_markdown":"&gt; I was encountering some exceptions by which the further execution\r\n&gt; stops.\r\n\r\nThat is the expected behavior of `ScheduledExecutorService.scheduleAtFixRate()` according to the specification : \r\n\r\n&gt; If any execution of the task encounters an exception, subsequent\r\n&gt; executions are suppressed.  \r\n\r\nAbout your need : \r\n\r\n&gt; I want to catch the exception for a systematic shutdown of my\r\n&gt; application.  \r\n&gt; Should I handle the exception using a third thread that monitors both\r\n&gt; futures and handles the Exception or is there any other better way?\r\n\r\nHandling the future return with `ScheduledFuture.get()` looks the right. \r\nAccording to `ScheduledFuture.scheduleAtFixedRate()` specification :\r\n\r\n&gt; Otherwise, the task will only terminate via cancellation or\r\n&gt; termination of the executor.\r\n\r\nSo you don&#39;t even need to create a new scheduled future.   \r\nJust run two parallel tasks (with `ExecutorService` or two threads is also possible) that wait on `get()` of each `Future` and that stops the application in case of exception thrown in the task  :\r\n\r\n    Future&lt;?&gt; futureA = ses1.scheduleAtFixRate(..) // for thread 1  \r\n    Future&lt;?&gt; futureB = ses2.scheduleAtFixRate(..) // for thread 2\r\n    submitAndStopTheApplicationIfFail(futureA);\r\n    submitAndStopTheApplicationIfFail(futureB);\r\n\r\n    public void submitAndStopTheApplicationIfFail(Future&lt;?&gt; future){\r\n          executor.submit(() -&gt; {\r\n          try {\r\n            future.get();\r\n          } catch (InterruptedException e) {\r\n            // stop the application\r\n          } catch (ExecutionException e) {\r\n            // stop the application\r\n          }\r\n        });\r\n    }\r\n\r\n","title":"Exception Handling ScheduledExecutorService","body":"<blockquote>\n  <p>I was encountering some exceptions by which the further execution\n  stops.</p>\n</blockquote>\n\n<p>That is the expected behavior of <code>ScheduledExecutorService.scheduleAtFixRate()</code> according to the specification : </p>\n\n<blockquote>\n  <p>If any execution of the task encounters an exception, subsequent\n  executions are suppressed.  </p>\n</blockquote>\n\n<p>About your need : </p>\n\n<blockquote>\n  <p>I want to catch the exception for a systematic shutdown of my\n  application.<br>\n  Should I handle the exception using a third thread that monitors both\n  futures and handles the Exception or is there any other better way?</p>\n</blockquote>\n\n<p>Handling the future return with <code>ScheduledFuture.get()</code> looks the right. \nAccording to <code>ScheduledFuture.scheduleAtFixedRate()</code> specification :</p>\n\n<blockquote>\n  <p>Otherwise, the task will only terminate via cancellation or\n  termination of the executor.</p>\n</blockquote>\n\n<p>So you don't even need to create a new scheduled future.<br>\nJust run two parallel tasks (with <code>ExecutorService</code> or two threads is also possible) that wait on <code>get()</code> of each <code>Future</code> and that stops the application in case of exception thrown in the task  :</p>\n\n<pre><code>Future&lt;?&gt; futureA = ses1.scheduleAtFixRate(..) // for thread 1  \nFuture&lt;?&gt; futureB = ses2.scheduleAtFixRate(..) // for thread 2\nsubmitAndStopTheApplicationIfFail(futureA);\nsubmitAndStopTheApplicationIfFail(futureB);\n\npublic void submitAndStopTheApplicationIfFail(Future&lt;?&gt; future){\n      executor.submit(() -&gt; {\n      try {\n        future.get();\n      } catch (InterruptedException e) {\n        // stop the application\n      } catch (ExecutionException e) {\n        // stop the application\n      }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2582927,"reputation":960,"user_id":2239213,"display_name":"RoK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690005638,"creation_date":1690005638,"answer_id":76742508,"question_id":57336040,"body_markdown":"First, you probably don&#39;t need two separate executors ses1 and ses2 for each task, just create one ses1 with corePoolSize = 2.\r\nAnd here is how I deal with handling exceptions and completion of all scheduled tasks:\r\n1. Create the wrapper method for ScheduledExecutor&#39;s futures\r\n    \r\n```\r\nprivate static @NotNull CompletableFuture&lt;Void&gt; wrapFuture(Future&lt;?&gt; future){\r\n    return CompletableFuture.runAsync(() -&gt; {\r\n        try {\r\n            future.get();\r\n        } catch (Throwable t) {\r\n            if (t instanceof ExecutionException ee){\r\n                throw new CompletionException(ee.getCause());\r\n            }\r\n            throw new CompletionException(t);\r\n        }\r\n    });\r\n}\r\n```\r\n\r\n2. Then schedule tasks and wrap them into the CompletableFutures\r\n```\r\nvar ses = new ScheduledThreadPoolExecutor(2);\r\n\r\nvar f1 = ses.scheduleAtFixedRate(this::processQueue, 100, 25, TimeUnit.MILLISECONDS);\r\nvar f2 = ses.scheduleWithFixedDelay(this::prefetch, 0, 5, TimeUnit.SECONDS);\r\n\r\nvar cf1 = wrapFuture(f1);\r\nvar cf2 = wrapFuture(f2);\r\n```\r\n3. Handle exceptions along with termination\r\n```\r\nCompletableFuture.anyOf(cf1, cf2).whenCompleteAsync((o, t) -&gt; {\r\n    if (t != null &amp;&amp; !(t.getCause() instanceof CancellationException)){\r\n        System.err.println(&quot;Exception in ScheduledExecutor task: &quot; + t);\r\n        ses.shutdownNow();\r\n        try {\r\n            ses.awaitTermination(1000, TimeUnit.DAYS);\r\n        } catch (InterruptedException ignored) {\r\n        }\r\n    }\r\n    System.out.println(&quot;All tasks completed&quot;);\r\n});\r\n````\r\n\r\nOne drawback: if you need to cancel resulting completable future it may stuck on awaitTermination(), make sure the tasks itself can properly respond to cancellation via executor shutdown.\r\n","title":"Exception Handling ScheduledExecutorService","body":"<p>First, you probably don't need two separate executors ses1 and ses2 for each task, just create one ses1 with corePoolSize = 2.\nAnd here is how I deal with handling exceptions and completion of all scheduled tasks:</p>\n<ol>\n<li>Create the wrapper method for ScheduledExecutor's futures</li>\n</ol>\n<pre><code>private static @NotNull CompletableFuture&lt;Void&gt; wrapFuture(Future&lt;?&gt; future){\n    return CompletableFuture.runAsync(() -&gt; {\n        try {\n            future.get();\n        } catch (Throwable t) {\n            if (t instanceof ExecutionException ee){\n                throw new CompletionException(ee.getCause());\n            }\n            throw new CompletionException(t);\n        }\n    });\n}\n</code></pre>\n<ol start=\"2\">\n<li>Then schedule tasks and wrap them into the CompletableFutures</li>\n</ol>\n<pre><code>var ses = new ScheduledThreadPoolExecutor(2);\n\nvar f1 = ses.scheduleAtFixedRate(this::processQueue, 100, 25, TimeUnit.MILLISECONDS);\nvar f2 = ses.scheduleWithFixedDelay(this::prefetch, 0, 5, TimeUnit.SECONDS);\n\nvar cf1 = wrapFuture(f1);\nvar cf2 = wrapFuture(f2);\n</code></pre>\n<ol start=\"3\">\n<li>Handle exceptions along with termination</li>\n</ol>\n<pre><code>CompletableFuture.anyOf(cf1, cf2).whenCompleteAsync((o, t) -&gt; {\n    if (t != null &amp;&amp; !(t.getCause() instanceof CancellationException)){\n        System.err.println(&quot;Exception in ScheduledExecutor task: &quot; + t);\n        ses.shutdownNow();\n        try {\n            ses.awaitTermination(1000, TimeUnit.DAYS);\n        } catch (InterruptedException ignored) {\n        }\n    }\n    System.out.println(&quot;All tasks completed&quot;);\n});\n</code></pre>\n<p>One drawback: if you need to cancel resulting completable future it may stuck on awaitTermination(), make sure the tasks itself can properly respond to cancellation via executor shutdown.</p>\n"}],"owner":{"account_id":16007952,"reputation":57,"user_id":11552994,"display_name":"Sanyam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":57336338,"answer_count":2,"score":1,"last_activity_date":1690005638,"creation_date":1564814069,"question_id":57336040,"body_markdown":"I am using `ScheduledExecutorService` to run threads at a fixed interval of `1 min`. \r\n\r\nOne instance of `ScheduledExecutorService` runs one thread and another instance runs another thread.\r\n\r\n**Example:**\r\n```java\r\nses1.scheduleAtFixRate(..) // for thread 1  \r\nses2.scheduleAtFixRate(..) // for thread 2\r\n```\r\nI was encountering some exceptions by which the further execution stops. I want to catch the exception for a systematic shutdown of my application.\r\n\r\n**Should I handle the exception using a third thread** that monitors both futures and handles the Exception or is there any other better way? Will it affect the other threads.\r\n\r\nAny and all help is appreciated!","title":"Exception Handling ScheduledExecutorService","body":"<p>I am using <code>ScheduledExecutorService</code> to run threads at a fixed interval of <code>1 min</code>. </p>\n\n<p>One instance of <code>ScheduledExecutorService</code> runs one thread and another instance runs another thread.</p>\n\n<p><strong>Example:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>ses1.scheduleAtFixRate(..) // for thread 1  \nses2.scheduleAtFixRate(..) // for thread 2\n</code></pre>\n\n<p>I was encountering some exceptions by which the further execution stops. I want to catch the exception for a systematic shutdown of my application.</p>\n\n<p><strong>Should I handle the exception using a third thread</strong> that monitors both futures and handles the Exception or is there any other better way? Will it affect the other threads.</p>\n\n<p>Any and all help is appreciated!</p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":17998773,"reputation":1068,"user_id":13081151,"display_name":"SharadxDutta"},"score":0,"creation_date":1689673929,"post_id":76710592,"comment_id":135243764,"body_markdown":"How have you initialised your logger variable in the class?","body":"How have you initialised your logger variable in the class?"}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690005090,"creation_date":1690005090,"answer_id":76742487,"question_id":76710592,"body_markdown":"The `~[bin/:?]` is packaging information added by the **`xEx`** pattern converter (cf. [documentation](https://logging.apache.org/log4j/2.x/manual/layouts.html#pattern-layout)). It includes information about the JAR that contains the class:\r\n\r\n&gt; At the end of each stack element of the exception, a string containing the name of the jar file that contains the class or the directory the class is located in and the &quot;Implementation-Version&quot; as found in that jar&#39;s manifest will be added. If the information is uncertain, then the class packaging data will be preceded by a tilde, i.e. the `~` character.\r\n\r\nYour code isn&#39;t packaged yet, so you get `~[bin/:?]`.\r\n\r\nIf you want a &quot;standard&quot; stacktrace, add `%n%ex` at the end of your pattern.","title":"Migrating from log4j 1.x to log4j 2 : Stack trace format","body":"<p>The <code>~[bin/:?]</code> is packaging information added by the <strong><code>xEx</code></strong> pattern converter (cf. <a href=\"https://logging.apache.org/log4j/2.x/manual/layouts.html#pattern-layout\" rel=\"nofollow noreferrer\">documentation</a>). It includes information about the JAR that contains the class:</p>\n<blockquote>\n<p>At the end of each stack element of the exception, a string containing the name of the jar file that contains the class or the directory the class is located in and the &quot;Implementation-Version&quot; as found in that jar's manifest will be added. If the information is uncertain, then the class packaging data will be preceded by a tilde, i.e. the <code>~</code> character.</p>\n</blockquote>\n<p>Your code isn't packaged yet, so you get <code>~[bin/:?]</code>.</p>\n<p>If you want a &quot;standard&quot; stacktrace, add <code>%n%ex</code> at the end of your pattern.</p>\n"}],"owner":{"account_id":29039668,"reputation":11,"user_id":22244758,"display_name":"SSD"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1690005090,"creation_date":1689666820,"question_id":76710592,"body_markdown":"I have upgraded loggers from log4j1.x to log4j2, but getting when it logs stack trace (~[bin/:?]) this is getting appended at the end.\r\n\r\nStack trace :-\r\n\r\n    18-07-2023 01:01:54 [ERROR] demo.Test.java (Method : testLogger:53) &gt;&gt;&gt; arithmatic exc :- java.lang.ArithmeticException: / by zero\r\n    java.lang.ArithmeticException: / by zero\r\n    \tat com.zycus.crawler.driver.NewCommonDriver.testLogger(NewCommonDriver.java:13748) ~[bin/:?]\r\n    \tat com.zycus.crawler.driver.NewCommonDriver.getPages(NewCommonDriver.java:626) ~[bin/:?]\r\n    \tat com.zycus.crawler.driver.NewCommonDriver.main(NewCommonDriver.java:14029) ~[bin/:?]\r\n\r\nI search on google but didn&#39;t found how to remove (~[bin/:?]) this part.\r\nWhat need to do to remove it?\r\nThanks\r\n\r\nI tried by passing Class name in logger object initialization but it didn&#39;t worked.\r\n\r\n","title":"Migrating from log4j 1.x to log4j 2 : Stack trace format","body":"<p>I have upgraded loggers from log4j1.x to log4j2, but getting when it logs stack trace (~[bin/:?]) this is getting appended at the end.</p>\n<p>Stack trace :-</p>\n<pre><code>18-07-2023 01:01:54 [ERROR] demo.Test.java (Method : testLogger:53) &gt;&gt;&gt; arithmatic exc :- java.lang.ArithmeticException: / by zero\njava.lang.ArithmeticException: / by zero\n    at com.zycus.crawler.driver.NewCommonDriver.testLogger(NewCommonDriver.java:13748) ~[bin/:?]\n    at com.zycus.crawler.driver.NewCommonDriver.getPages(NewCommonDriver.java:626) ~[bin/:?]\n    at com.zycus.crawler.driver.NewCommonDriver.main(NewCommonDriver.java:14029) ~[bin/:?]\n</code></pre>\n<p>I search on google but didn't found how to remove (~[bin/:?]) this part.\nWhat need to do to remove it?\nThanks</p>\n<p>I tried by passing Class name in logger object initialization but it didn't worked.</p>\n"},{"tags":["java","netty"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689748817,"post_id":76709285,"comment_id":135255359,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690013360,"post_id":76709285,"comment_id":135296117,"body_markdown":"What is this a picture of?  Some IDE?  How are you managing your dependencies?  By hand (via the IDE)?  Using a build tool such as Gradle or Maven that understands dependencies?","body":"What is this a picture of?  Some IDE?  How are you managing your dependencies?  By hand (via the IDE)?  Using a build tool such as Gradle or Maven that understands dependencies?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1690013420,"post_id":76709285,"comment_id":135296125,"body_markdown":"Also, you seem to be confusing `4.1.94` and `4.1.49`.  That may just be a typo ... or not.  Because it is hard to understand what you are actually asking here.","body":"Also, you seem to be confusing <code>4.1.94</code> and <code>4.1.49</code>.  That may just be a typo ... or not.  Because it is hard to understand what you are actually asking here."}],"owner":{"account_id":22156008,"reputation":1,"user_id":16403754,"display_name":"qiyu Lee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690003588,"creation_date":1689649612,"question_id":76709285,"body_markdown":"As shown in the figure, I introduced `netty-all` of version `4.1.49.final` in the project, but other components are version `4.1.92.final`. I tried many methods and directly introduced 4.1.49 locally in this module. .Final version of netty-all does not work, how do I solve it?\r\n\r\n![enter image description here](https://i.stack.imgur.com/pWKLN.png)\r\n\r\n\r\nI want all netty&#39;s components to be version 4.1.94.Final","title":"Netty version not consistent","body":"<p>As shown in the figure, I introduced <code>netty-all</code> of version <code>4.1.49.final</code> in the project, but other components are version <code>4.1.92.final</code>. I tried many methods and directly introduced 4.1.49 locally in this module. .Final version of netty-all does not work, how do I solve it?</p>\n<p><img src=\"https://i.stack.imgur.com/pWKLN.png\" alt=\"enter image description here\" /></p>\n<p>I want all netty's components to be version 4.1.94.Final</p>\n"},{"tags":["java","json","generics","rest-assured"],"comments":[{"owner":{"account_id":2142828,"reputation":3770,"user_id":1901094,"display_name":"Purushotham"},"score":0,"creation_date":1392271373,"post_id":21725093,"comment_id":32891675,"body_markdown":"Answered your question below..","body":"Answered your question below.."}],"answers":[{"comments":[{"owner":{"account_id":1065732,"reputation":2514,"user_id":1066357,"accept_rate":96,"display_name":"Wojtek"},"score":0,"creation_date":1392282143,"post_id":21728110,"comment_id":32896780,"body_markdown":"Thank you for the answer. Though, it&#39;s exactly what I wanted to avoid: &quot;The map has a proper structure, i.e. could be mapped by Jackson to Artwork object, but I&#39;d like to avoid mapping it manually.&quot;\nI was thinking if there&#39;s any chance to do it more or less like this: `List&lt;Artwork&gt; returnedArtworks = response.getBody().asListOf(Artwork.class)`","body":"Thank you for the answer. Though, it&#39;s exactly what I wanted to avoid: &quot;The map has a proper structure, i.e. could be mapped by Jackson to Artwork object, but I&#39;d like to avoid mapping it manually.&quot; I was thinking if there&#39;s any chance to do it more or less like this: <code>List&lt;Artwork&gt; returnedArtworks = response.getBody().asListOf(Artwork.class)</code>"},{"owner":{"account_id":2142828,"reputation":3770,"user_id":1901094,"display_name":"Purushotham"},"score":0,"creation_date":1392283818,"post_id":21728110,"comment_id":32897927,"body_markdown":"If your Artwork class is exactly matching with the map you are receiving from response, you can use Gson instead of Jackson. You can reuse the same Artwork class.","body":"If your Artwork class is exactly matching with the map you are receiving from response, you can use Gson instead of Jackson. You can reuse the same Artwork class."},{"owner":{"account_id":1065732,"reputation":2514,"user_id":1066357,"accept_rate":96,"display_name":"Wojtek"},"score":0,"creation_date":1392284805,"post_id":21728110,"comment_id":32898661,"body_markdown":"It doesn&#39;t really matter that much whether I use Gson or Jackson. In either case I&#39;d have to write an additional line of code for parsing the map received in response. I hoped that Rest Assured had it implemented somehow, as it is quite often that we receive a `List` of objects in response.","body":"It doesn&#39;t really matter that much whether I use Gson or Jackson. In either case I&#39;d have to write an additional line of code for parsing the map received in response. I hoped that Rest Assured had it implemented somehow, as it is quite often that we receive a <code>List</code> of objects in response."},{"owner":{"account_id":32864,"reputation":9277,"user_id":91497,"accept_rate":67,"display_name":"Jmini"},"score":0,"creation_date":1565087279,"post_id":21728110,"comment_id":101232613,"body_markdown":"`TypeToken#getType()` can be used directly as parameter in the rest-assured `.as()`. See my answer: https://stackoverflow.com/a/57373937/91497","body":"<code>TypeToken#getType()</code> can be used directly as parameter in the rest-assured <code>.as()</code>. See my answer: <a href=\"https://stackoverflow.com/a/57373937/91497\">stackoverflow.com/a/57373937/91497</a>"},{"owner":{"account_id":14893976,"reputation":442,"user_id":10754853,"display_name":"Maksat Rahmanov"},"score":0,"creation_date":1689957035,"post_id":21728110,"comment_id":135291043,"body_markdown":"that&#39;s working solution!!","body":"that&#39;s working solution!!"}],"tags":[],"owner":{"account_id":2142828,"reputation":3770,"user_id":1901094,"display_name":"Purushotham"},"comment_count":5,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1392210209,"creation_date":1392208460,"answer_id":21728110,"question_id":21725093,"body_markdown":"By using Google&#39;s Gson library you can easily parse it to `List&lt;Artwork&gt;`. Try below code \r\n    \r\n    Gson gson = new Gson();\r\n    List&lt;Artwork&gt; returnedArtworks = gson.fromJson(jsonStr, new TypeToken&lt;List&lt;Artwork&gt;&gt;(){}.getType());\r\n\r\n    //* where jsonStr is the response string(Json) receiving from your Restful webservice","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>By using Google's Gson library you can easily parse it to <code>List&lt;Artwork&gt;</code>. Try below code </p>\n\n<pre><code>Gson gson = new Gson();\nList&lt;Artwork&gt; returnedArtworks = gson.fromJson(jsonStr, new TypeToken&lt;List&lt;Artwork&gt;&gt;(){}.getType());\n\n//* where jsonStr is the response string(Json) receiving from your Restful webservice\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2211597,"reputation":27342,"user_id":1953283,"display_name":"Ian Stapleton Cordasco"},"score":0,"creation_date":1407073746,"post_id":25105155,"comment_id":39068000,"body_markdown":"You should add an explanation to the solution for others who find this.","body":"You should add an explanation to the solution for others who find this."},{"owner":{"account_id":2462446,"reputation":1646,"user_id":2146313,"display_name":"volatilevar"},"score":0,"creation_date":1407074258,"post_id":25105155,"comment_id":39068150,"body_markdown":"Thanks, I added a brief explanation (and corrected an error).","body":"Thanks, I added a brief explanation (and corrected an error)."},{"owner":{"account_id":1065732,"reputation":2514,"user_id":1066357,"accept_rate":96,"display_name":"Wojtek"},"score":0,"creation_date":1491578249,"post_id":25105155,"comment_id":73631460,"body_markdown":"Can&#39;t check it right now, but assuming all the upvotes coming from users who found this solution useful, I&#39;m marking this as accepted answer","body":"Can&#39;t check it right now, but assuming all the upvotes coming from users who found this solution useful, I&#39;m marking this as accepted answer"},{"owner":{"account_id":7434621,"reputation":144,"user_id":5654508,"display_name":"Jose4Linux"},"score":0,"creation_date":1591226314,"post_id":25105155,"comment_id":109979385,"body_markdown":"I upvoted this answer, since it&#39;s concise. But it&#39;s not working for me. I&#39;ve spent two hours trying to fix it, although I get this error:       `com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of ................. `","body":"I upvoted this answer, since it&#39;s concise. But it&#39;s not working for me. I&#39;ve spent two hours trying to fix it, although I get this error:       <code>com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of ................. </code>"}],"tags":[],"owner":{"account_id":2462446,"reputation":1646,"user_id":2146313,"display_name":"volatilevar"},"comment_count":4,"down_vote_count":1,"up_vote_count":47,"is_accepted":true,"score":46,"last_activity_date":1407074196,"creation_date":1407072755,"answer_id":25105155,"question_id":21725093,"body_markdown":"You can do this:\r\n\r\n    List&lt;Artwork&gt; returnedArtworks = Arrays.asList(response.getBody().as(Artwork[].class));\r\n\r\nThe trick is to deserialize JSON to an array of objects (because there is no difference between the JSON string of an array or a list), then convert the array to a list.","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>You can do this:</p>\n\n<pre><code>List&lt;Artwork&gt; returnedArtworks = Arrays.asList(response.getBody().as(Artwork[].class));\n</code></pre>\n\n<p>The trick is to deserialize JSON to an array of objects (because there is no difference between the JSON string of an array or a list), then convert the array to a list.</p>\n"},{"comments":[{"owner":{"account_id":2890572,"reputation":57,"user_id":2479456,"display_name":"Perkone"},"score":0,"creation_date":1642433514,"post_id":43089350,"comment_id":125063597,"body_markdown":"I get: `java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class java.util.List (java.util.LinkedHashMap and java.util.List are in module java.base of loader &#39;bootstrap&#39;)`","body":"I get: <code>java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class java.util.List (java.util.LinkedHashMap and java.util.List are in module java.base of loader &#39;bootstrap&#39;)</code>"}],"tags":[],"owner":{"account_id":6275368,"reputation":141,"user_id":4878188,"display_name":"Seren"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1490779135,"creation_date":1490779135,"answer_id":43089350,"question_id":21725093,"body_markdown":"this solution works for version 3.0.2 (io.restassured):\r\n\r\n      JsonPath jsonPath = RestAssured.given()\r\n         .when()\r\n         .get(&quot;/order&quot;)\r\n         .then()\r\n         .assertThat()\r\n         .statusCode(Response.Status.OK.getStatusCode())\r\n         .assertThat()\r\n         .extract().body().jsonPath();\r\n\r\n      List&lt;Order&gt; orders = jsonPath.getList(&quot;&quot;, Order.class);\r\n\r\nThis will extract the objects for a structure like this:\r\n\r\n    public class Order {\r\n    \r\n    private String id;\r\n    \r\n    public String getId(){\r\n    return id; }\r\n    \r\n    public void setId(String id){\r\n    this.id = id;\r\n    }\r\n    \r\n    \r\n    }\r\n\r\nwith the given json:\r\n\r\n    [ \r\n    { &quot;id&quot; : &quot;5&quot; }, \r\n    { &quot;id&quot; : &quot;6&quot; }\r\n    ]","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>this solution works for version 3.0.2 (io.restassured):</p>\n\n<pre><code>  JsonPath jsonPath = RestAssured.given()\n     .when()\n     .get(\"/order\")\n     .then()\n     .assertThat()\n     .statusCode(Response.Status.OK.getStatusCode())\n     .assertThat()\n     .extract().body().jsonPath();\n\n  List&lt;Order&gt; orders = jsonPath.getList(\"\", Order.class);\n</code></pre>\n\n<p>This will extract the objects for a structure like this:</p>\n\n<pre><code>public class Order {\n\nprivate String id;\n\npublic String getId(){\nreturn id; }\n\npublic void setId(String id){\nthis.id = id;\n}\n\n\n}\n</code></pre>\n\n<p>with the given json:</p>\n\n<pre><code>[ \n{ \"id\" : \"5\" }, \n{ \"id\" : \"6\" }\n]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7441196,"reputation":77,"user_id":5658941,"display_name":"Vytautas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1516177711,"creation_date":1493979233,"answer_id":43802297,"question_id":21725093,"body_markdown":"With REST assured 3.0.2 you can simply check if content exists in the array\r\n\r\n    when().get(&quot;/artwork&quot;).then().body(&quot;artworks&quot;, hasItem(&quot;some art&quot;);\r\n    //or check multiple values in array\r\n    when().get(&quot;/artwork&quot;).then().body(&quot;artworks&quot;, hasItems(&quot;some art&quot;, &quot;other art&quot;);\r\n\r\nThis way you will avoid complexity in your code by converting JSON to list more examples how to check response content can be found [link][1]\r\n\r\n\r\n  [1]: https://github.com/rest-assured/rest-assured/wiki/Usage","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>With REST assured 3.0.2 you can simply check if content exists in the array</p>\n\n<pre><code>when().get(\"/artwork\").then().body(\"artworks\", hasItem(\"some art\");\n//or check multiple values in array\nwhen().get(\"/artwork\").then().body(\"artworks\", hasItems(\"some art\", \"other art\");\n</code></pre>\n\n<p>This way you will avoid complexity in your code by converting JSON to list more examples how to check response content can be found <a href=\"https://github.com/rest-assured/rest-assured/wiki/Usage\" rel=\"nofollow noreferrer\">link</a></p>\n"},{"tags":[],"owner":{"account_id":32864,"reputation":9277,"user_id":91497,"accept_rate":67,"display_name":"Jmini"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1565087134,"creation_date":1565087134,"answer_id":57373937,"question_id":21725093,"body_markdown":"Rest-assured provide an [`as(java.lang.reflect.Type)`][1] next to the version expecting a `Class` used in the question.\r\n\r\n    java.lang.reflect.Type type; //TODO defines the type.\r\n    Response response = get(&quot;/artwork&quot;);\r\n    List&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\r\n\r\nIn my opinion the way the `type` variable depends from the serialization lib that is used.\r\n\r\n---\r\n\r\nIf using Gson, as pointed out by [Purushotham&#39;s answer][2], `TypeToken` can be used. I prefer using it directly in rest-assured:\r\n\r\n\r\n    Type type = new TypeToken&lt;List&lt;Artwork&gt;&gt;(){}.getType();\r\n    Response response = get(&quot;/artwork&quot;);\r\n    List&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\r\n\r\n---\r\nWhen using Jackson, the solution is to use the `TypeFactory` ([javadoc][3], [source][4]) to tell to which type it should be de-serialized:\r\n\r\n    Type type = TypeFactory.defaultInstance().constructCollectionLikeType(ArrayList.class, Artwork.class);\r\n    Response response = get(&quot;/artwork&quot;);\r\n    List&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\r\n\r\n  [1]: https://static.javadoc.io/io.rest-assured/rest-assured/4.0.0/io/restassured/response/ResponseBodyExtractionOptions.html#as-java.lang.reflect.Type-\r\n  [2]: https://stackoverflow.com/a/21728110/91497\r\n  [3]: https://fasterxml.github.io/jackson-databind/javadoc/2.9/com/fasterxml/jackson/databind/type/TypeFactory.html\r\n  [4]: https://github.com/FasterXML/jackson-databind/blob/master/src/main/java/com/fasterxml/jackson/databind/type/TypeFactory.java","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>Rest-assured provide an <a href=\"https://static.javadoc.io/io.rest-assured/rest-assured/4.0.0/io/restassured/response/ResponseBodyExtractionOptions.html#as-java.lang.reflect.Type-\" rel=\"nofollow noreferrer\"><code>as(java.lang.reflect.Type)</code></a> next to the version expecting a <code>Class</code> used in the question.</p>\n\n<pre><code>java.lang.reflect.Type type; //TODO defines the type.\nResponse response = get(\"/artwork\");\nList&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\n</code></pre>\n\n<p>In my opinion the way the <code>type</code> variable depends from the serialization lib that is used.</p>\n\n<hr>\n\n<p>If using Gson, as pointed out by <a href=\"https://stackoverflow.com/a/21728110/91497\">Purushotham's answer</a>, <code>TypeToken</code> can be used. I prefer using it directly in rest-assured:</p>\n\n<pre><code>Type type = new TypeToken&lt;List&lt;Artwork&gt;&gt;(){}.getType();\nResponse response = get(\"/artwork\");\nList&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\n</code></pre>\n\n<hr>\n\n<p>When using Jackson, the solution is to use the <code>TypeFactory</code> (<a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.9/com/fasterxml/jackson/databind/type/TypeFactory.html\" rel=\"nofollow noreferrer\">javadoc</a>, <a href=\"https://github.com/FasterXML/jackson-databind/blob/master/src/main/java/com/fasterxml/jackson/databind/type/TypeFactory.java\" rel=\"nofollow noreferrer\">source</a>) to tell to which type it should be de-serialized:</p>\n\n<pre><code>Type type = TypeFactory.defaultInstance().constructCollectionLikeType(ArrayList.class, Artwork.class);\nResponse response = get(\"/artwork\");\nList&lt;Artwork&gt; returnedArtworks = response.getBody().as(type)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9243671,"reputation":1,"user_id":6866242,"display_name":"Ravi Prakash Jakkamputi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690001591,"creation_date":1690001538,"answer_id":76742352,"question_id":21725093,"body_markdown":"Currently we have a better solution using Typeref which will help to extract generic objects\r\n\r\n    List&lt;Artwork&gt; returnedArtworks = response.getBody().as(new TypeRef&lt;List&lt;Artwork&gt;&gt;() {});\r\nor\r\n\r\n    response.as(new TypeRef&lt;List&lt;Artwork&gt;&gt;() {});\r\n\r\n\r\n\r\n","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>Currently we have a better solution using Typeref which will help to extract generic objects</p>\n<pre><code>List&lt;Artwork&gt; returnedArtworks = response.getBody().as(new TypeRef&lt;List&lt;Artwork&gt;&gt;() {});\n</code></pre>\n<p>or</p>\n<pre><code>response.as(new TypeRef&lt;List&lt;Artwork&gt;&gt;() {});\n</code></pre>\n"}],"owner":{"account_id":1065732,"reputation":2514,"user_id":1066357,"accept_rate":96,"display_name":"Wojtek"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60312,"favorite_count":0,"down_vote_count":0,"up_vote_count":37,"accepted_answer_id":25105155,"answer_count":6,"score":37,"last_activity_date":1690001591,"creation_date":1392200664,"question_id":21725093,"body_markdown":"I have a POJO `Artwork`. I&#39;m retrieving a `List` of those objects from a RESTful webservice in the HTTP response body in JSON format. I&#39;m trying to write a Rest Assured-based test that would analyze the returned list. The code looks like this:\r\n\r\n\tResponse response = get(&quot;/artwork&quot;);\r\n\tList returnedArtworks = response.getBody().as(List.class)\r\n\r\nThe problem is, I can&#39;t get Rest Assured to parse the returned JSON as `List&lt;Artwork&gt;`. Instead, I get a `List&lt;LinkedHashMap&gt;`. The map has a proper structure, i.e. could be mapped by Jackson to `Artwork` object, but I&#39;d like to avoid mapping it manually. \r\n\r\nJSON mappings in my model are OK, because when I map single object like this:\r\n\r\n\tArtwork returnedArtwork = response.getBody().as(Artwork.class);\r\n\r\nit works fine.\r\n\r\n\r\nIs it possible to get `returnedArtworks` as `List&lt;Artwork&gt;`? ","title":"Rest Assured - deserialize Response JSON as List&lt;POJO&gt;","body":"<p>I have a POJO <code>Artwork</code>. I'm retrieving a <code>List</code> of those objects from a RESTful webservice in the HTTP response body in JSON format. I'm trying to write a Rest Assured-based test that would analyze the returned list. The code looks like this:</p>\n\n<pre><code>Response response = get(\"/artwork\");\nList returnedArtworks = response.getBody().as(List.class)\n</code></pre>\n\n<p>The problem is, I can't get Rest Assured to parse the returned JSON as <code>List&lt;Artwork&gt;</code>. Instead, I get a <code>List&lt;LinkedHashMap&gt;</code>. The map has a proper structure, i.e. could be mapped by Jackson to <code>Artwork</code> object, but I'd like to avoid mapping it manually. </p>\n\n<p>JSON mappings in my model are OK, because when I map single object like this:</p>\n\n<pre><code>Artwork returnedArtwork = response.getBody().as(Artwork.class);\n</code></pre>\n\n<p>it works fine.</p>\n\n<p>Is it possible to get <code>returnedArtworks</code> as <code>List&lt;Artwork&gt;</code>? </p>\n"},{"tags":["java","spring-boot","spring-integration","jakarta-mail"],"comments":[{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1690209258,"post_id":76742347,"comment_id":135317760,"body_markdown":"Sorry, not clear what is your problem. The signature of that service activator is OK. What else you&#39;d like to hear from us, please?","body":"Sorry, not clear what is your problem. The signature of that service activator is OK. What else you&#39;d like to hear from us, please?"},{"owner":{"account_id":22198122,"reputation":31,"user_id":16439217,"display_name":"Shrey Soni"},"score":0,"creation_date":1690983377,"post_id":76742347,"comment_id":135428889,"body_markdown":"I want to convert the graph API response (which is MIME version) to spring.messaging Message object and was trying to find out a helper class which converts the text version of MIME to message object. but now its not required.\n\nthanks for replying to the question","body":"I want to convert the graph API response (which is MIME version) to spring.messaging Message object and was trying to find out a helper class which converts the text version of MIME to message object. but now its not required.  thanks for replying to the question"},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1690984599,"post_id":76742347,"comment_id":135429232,"body_markdown":"In general you don&#39;t need to create Spring Message, just have a transformer and produce an expected object which would become a payload of the output message.","body":"In general you don&#39;t need to create Spring Message, just have a transformer and produce an expected object which would become a payload of the output message."}],"owner":{"account_id":22198122,"reputation":31,"user_id":16439217,"display_name":"Shrey Soni"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690001453,"creation_date":1690001453,"question_id":76742347,"body_markdown":"I trying to find out a helper/builder method which can construct the spring.messaging.message object from the text/plain content I receive from microsoft graph API which returns MIME version of an email.\r\n\r\nMicrosoft API = &quot;https://graph.microsoft.com/v1.0/users/{username}/messages/{messageId}/$value&quot;\r\n\r\nOnce I get the response (which is in MIME version) I want to call my method\r\n```\r\n@ServiceActivator(inputChannel = &quot;emailMessageChannel&quot;)\r\n  public void processMessage(Message&lt;?&gt; message) throws Exception {\r\n    MessageHeaders headers = message.getHeaders();\r\n    String logMessage = this.getLogMessage(headers);\r\n    try {\r\n      this.initializeConcern(concernCode);\r\n      LOGGER.warn(&quot;Email &quot; + logMessage);\r\n      emailProcessService.processEmailMessage(message, headers);\r\n      LOGGER.warn(&quot;Processed email &quot; + logMessage);\r\n    }\r\n    catch (Exception e) {\r\n      communicationChannelMetricUtil.conversationFailed(concernCode, communicationChannelId);\r\n      LOGGER.error(&quot;Exception occurred while processing email &quot; + logMessage, e);\r\n    }\r\n    finally {\r\n      this.cleanUpConcern();\r\n    }\r\n  }\r\n\r\n  public void processEmailMessage(Message&lt;?&gt; message, MessageHeaders headers) throws Exception {\r\n    // extract details from header\r\n    if (payload instanceof MimeMultipart) {\r\n      this.processMimeMultipartEmail(conversation, (Message&lt;MimeMultipart&gt;) message, communicationChannel);\r\n    }\r\n    else if (payload instanceof String) {\r\n      this.procesStringEmail(conversation, (Message&lt;String&gt;) message, communicationChannel);\r\n    }\r\n    else {\r\n      // throw exception\r\n    }\r\n  }\r\n```","title":"How to construct spring.messaging.message object from MIME content","body":"<p>I trying to find out a helper/builder method which can construct the spring.messaging.message object from the text/plain content I receive from microsoft graph API which returns MIME version of an email.</p>\n<p>Microsoft API = &quot;https://graph.microsoft.com/v1.0/users/{username}/messages/{messageId}/$value&quot;</p>\n<p>Once I get the response (which is in MIME version) I want to call my method</p>\n<pre><code>@ServiceActivator(inputChannel = &quot;emailMessageChannel&quot;)\n  public void processMessage(Message&lt;?&gt; message) throws Exception {\n    MessageHeaders headers = message.getHeaders();\n    String logMessage = this.getLogMessage(headers);\n    try {\n      this.initializeConcern(concernCode);\n      LOGGER.warn(&quot;Email &quot; + logMessage);\n      emailProcessService.processEmailMessage(message, headers);\n      LOGGER.warn(&quot;Processed email &quot; + logMessage);\n    }\n    catch (Exception e) {\n      communicationChannelMetricUtil.conversationFailed(concernCode, communicationChannelId);\n      LOGGER.error(&quot;Exception occurred while processing email &quot; + logMessage, e);\n    }\n    finally {\n      this.cleanUpConcern();\n    }\n  }\n\n  public void processEmailMessage(Message&lt;?&gt; message, MessageHeaders headers) throws Exception {\n    // extract details from header\n    if (payload instanceof MimeMultipart) {\n      this.processMimeMultipartEmail(conversation, (Message&lt;MimeMultipart&gt;) message, communicationChannel);\n    }\n    else if (payload instanceof String) {\n      this.procesStringEmail(conversation, (Message&lt;String&gt;) message, communicationChannel);\n    }\n    else {\n      // throw exception\n    }\n  }\n</code></pre>\n"},{"tags":["java","android","performance","profiling","systrace"],"answers":[{"comments":[{"owner":{"account_id":4343491,"reputation":314,"user_id":3546156,"display_name":"papandreus"},"score":0,"creation_date":1689870591,"post_id":76725184,"comment_id":135277934,"body_markdown":"Can the issue be mitigated by decreasing number of threads in application? I don&#39;t mean refactoring to move suspected concurrent threads into one, but dropping some auxiliary threads.","body":"Can the issue be mitigated by decreasing number of threads in application? I don&#39;t mean refactoring to move suspected concurrent threads into one, but dropping some auxiliary threads."}],"tags":[],"owner":{"account_id":3091789,"reputation":1255,"user_id":2617745,"display_name":"lalitm"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689800560,"creation_date":1689800560,"answer_id":76725184,"question_id":76705195,"body_markdown":"Unfortunately such context (down to the class/line number) is not available as the system does not provide it. Currently this requires inspecting the trace manually and making guesses on which lock might be the problem.\r\n\r\nThis may be improved in future versions of Android but that doesn&#39;t necessarily help you today.","title":"Lock contention on thread list lock","body":"<p>Unfortunately such context (down to the class/line number) is not available as the system does not provide it. Currently this requires inspecting the trace manually and making guesses on which lock might be the problem.</p>\n<p>This may be improved in future versions of Android but that doesn't necessarily help you today.</p>\n"},{"tags":[],"owner":{"account_id":6174436,"reputation":6729,"user_id":4811803,"display_name":"Snild Dolkow"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690001261,"creation_date":1690001261,"answer_id":76742342,"question_id":76705195,"body_markdown":"&gt; What is the cause of the lock? Which code calls can trigger such locks?\r\n\r\nThe lock is used to [manage exclusive access to ART&#39;s (the Android JVM&#39;s) internal thread list](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/base/locks.h;l=265;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956).\r\n\r\nART uses it in *lots* of places internally. Some of them (like [creating](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/thread.cc;l=662;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956)/[destroying](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/thread_list.cc;l=1312;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956) threads or [collecting stack traces](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/openjdkjvmti/ti_stack.cc;l=259;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956)) can be directly caused by your code. Some (like [garbage collection](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/gc/collector/mark_compact.cc;l=1251;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956)) happen automatically. Some are even [caused by the fact that you&#39;re collecting a trace](https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/monitor.cc;l=469;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956). And these examples are far from exhaustive.\r\n\r\nShould you worry about it? It&#39;s hard to say from this very zoomed-in screenshot without the larger context. 42&#181;s is a very short time (about 1/23800th of a second), so it&#39;d need to happen very frequently to become an actual problem.\r\n\r\nIf it turns out to be an actual problem... Generally, trying to limit your code&#39;s &quot;global effects&quot; (garbage creation, thread creation/exiting/interrupts, monitor usage, etc) would probably help, but the most precise way would be to [add your own tracing](https://developer.android.com/reference/android/os/Trace) to try to pinpoint what exactly you&#39;re doing to trigger it. Remember to check both the blocker and the blockee.","title":"Lock contention on thread list lock","body":"<blockquote>\n<p>What is the cause of the lock? Which code calls can trigger such locks?</p>\n</blockquote>\n<p>The lock is used to <a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/base/locks.h;l=265;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">manage exclusive access to ART's (the Android JVM's) internal thread list</a>.</p>\n<p>ART uses it in <em>lots</em> of places internally. Some of them (like <a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/thread.cc;l=662;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">creating</a>/<a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/thread_list.cc;l=1312;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">destroying</a> threads or <a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/openjdkjvmti/ti_stack.cc;l=259;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">collecting stack traces</a>) can be directly caused by your code. Some (like <a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/gc/collector/mark_compact.cc;l=1251;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">garbage collection</a>) happen automatically. Some are even <a href=\"https://cs.android.com/android/platform/superproject/main/+/refs/heads/main:art/runtime/monitor.cc;l=469;drc=ee5f2cb7e77baf63f79fb7c1fb8caecf1b5e7956\" rel=\"nofollow noreferrer\">caused by the fact that you're collecting a trace</a>. And these examples are far from exhaustive.</p>\n<p>Should you worry about it? It's hard to say from this very zoomed-in screenshot without the larger context. 42µs is a very short time (about 1/23800th of a second), so it'd need to happen very frequently to become an actual problem.</p>\n<p>If it turns out to be an actual problem... Generally, trying to limit your code's &quot;global effects&quot; (garbage creation, thread creation/exiting/interrupts, monitor usage, etc) would probably help, but the most precise way would be to <a href=\"https://developer.android.com/reference/android/os/Trace\" rel=\"nofollow noreferrer\">add your own tracing</a> to try to pinpoint what exactly you're doing to trigger it. Remember to check both the blocker and the blockee.</p>\n"}],"owner":{"account_id":4343491,"reputation":314,"user_id":3546156,"display_name":"papandreus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":272,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76742342,"answer_count":2,"score":0,"last_activity_date":1690001261,"creation_date":1689602296,"question_id":76705195,"body_markdown":"During profiling my Android application using [Perfetto tool](https://ui.perfetto.dev/)  I&#39;ve found many cases with thread locking with message &quot;Lock contention on thread list lock (owner tid: ...)&quot;\r\n \r\nTypical Perfetto screenshot:\r\n\r\n[![enter image description here](https://i.stack.imgur.com/EQhMJ.png)](https://i.stack.imgur.com/EQhMJ.png)\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r3sSG.png\r\n\r\n\r\n What is the cause of the lock? Which code calls can trigger such locks?","title":"Lock contention on thread list lock","body":"<p>During profiling my Android application using <a href=\"https://ui.perfetto.dev/\" rel=\"nofollow noreferrer\">Perfetto tool</a>  I've found many cases with thread locking with message &quot;Lock contention on thread list lock (owner tid: ...)&quot;</p>\n<p>Typical Perfetto screenshot:</p>\n<p><a href=\"https://i.stack.imgur.com/EQhMJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EQhMJ.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/r3sSG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r3sSG.png\" alt=\"enter image description here\" /></a></p>\n<p>What is the cause of the lock? Which code calls can trigger such locks?</p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1689966124,"post_id":76736854,"comment_id":135292510,"body_markdown":"Does this answer your question? [Log4j2 configuration (Filters)](https://stackoverflow.com/questions/76132925/log4j2-configuration-filters)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/76132925/log4j2-configuration-filters\">Log4j2 configuration (Filters)</a>"}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690001187,"creation_date":1690001187,"answer_id":76742336,"question_id":76736854,"body_markdown":"There are a couple of problems with your configuration:\r\n * First of all, your configuration does not register custom levels correctly: the `&lt;CustomLevels&gt;` element must be a direct child of `&lt;Configuration&gt;` and there is no `&lt;Level&gt;` element:\r\n   ```lang-xml\r\n   &lt;Configuration&gt;\r\n     ...\r\n     &lt;CustomLevels&gt;\r\n       &lt;CustomLevel name=&quot;A&quot; intLevel=&quot;450&quot;/&gt;\r\n       &lt;CustomLevel name=&quot;B&quot; intLevel=&quot;460&quot;/&gt;\r\n     &lt;/CustomLevels&gt;\r\n     &lt;Loggers&gt;\r\n     ...\r\n     &lt;/Loggers&gt;\r\n   ```\r\n   With your current config, if the configuration happens before any `Level.forName` call, a warning will be issued and your levels will be treated as `null`.\r\n * Setting a `level` attribute on a logger config or appender reference works as a threshold filter: e.g. with `level=&quot;INFO&quot;` no messages with a numerical level higher than 400 will be logged. If you want to filter out all messages with a level different from `A`, you must use a `&lt;LevelMatchFilter&gt;`:\r\n   ```lang-xml\r\n   &lt;Loggers&gt;\r\n     &lt;Root level=&quot;DEBUG&quot;&gt;\r\n       &lt;AppenderRef ref=&quot;ConsoleAppender&quot;/&gt;\r\n       &lt;!-- Appender for Custom Level A --&gt;\r\n       &lt;AppenderRef ref=&quot;AppenderForA&quot;&gt;\r\n         &lt;LevelMatchFilter level=&quot;A&quot;/&gt;\r\n       &lt;/AppenderRef&gt;\r\n       &lt;!-- Appender for Custom Level B --&gt;\r\n       &lt;AppenderRef ref=&quot;AppenderForB&quot;/&gt;\r\n         &lt;LevelMatchFilter level=&quot;B&quot;/&gt;\r\n       &lt;/AppenderRef&gt;\r\n     &lt;/Root&gt;\r\n   &lt;/Loggers&gt;\r\n   ```\r\n\r\n**Remark:** I have the impression that you are using levels to distinguish different aspects of your application. That is what [markers](https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Marker.html) are for:\r\n&gt; Markers are objects that are used to add easily filterable information to log messages. Markers can be hierarchical - each Marker may have a parent. This allows for broad categories being subdivided into more specific categories. An example might be a Marker named &quot;Error&quot; with children named &quot;SystemError&quot; and &quot;ApplicationError&quot;.\r\n\r\nWith markers you use a `&lt;MarkerFilter&gt;`:\r\n```lang-xml\r\n&lt;AppenderRef ref=&quot;AppenderForA&quot;&gt;\r\n  &lt;MarkerFilter marker=&quot;A&quot;/&gt;\r\n&lt;/AppenderRef&gt;\r\n```","title":"Duplicate logging in log4J2 with custom levels","body":"<p>There are a couple of problems with your configuration:</p>\n<ul>\n<li>First of all, your configuration does not register custom levels correctly: the <code>&lt;CustomLevels&gt;</code> element must be a direct child of <code>&lt;Configuration&gt;</code> and there is no <code>&lt;Level&gt;</code> element:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Configuration&gt;\n  ...\n  &lt;CustomLevels&gt;\n    &lt;CustomLevel name=&quot;A&quot; intLevel=&quot;450&quot;/&gt;\n    &lt;CustomLevel name=&quot;B&quot; intLevel=&quot;460&quot;/&gt;\n  &lt;/CustomLevels&gt;\n  &lt;Loggers&gt;\n  ...\n  &lt;/Loggers&gt;\n</code></pre>\nWith your current config, if the configuration happens before any <code>Level.forName</code> call, a warning will be issued and your levels will be treated as <code>null</code>.</li>\n<li>Setting a <code>level</code> attribute on a logger config or appender reference works as a threshold filter: e.g. with <code>level=&quot;INFO&quot;</code> no messages with a numerical level higher than 400 will be logged. If you want to filter out all messages with a level different from <code>A</code>, you must use a <code>&lt;LevelMatchFilter&gt;</code>:\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;Loggers&gt;\n  &lt;Root level=&quot;DEBUG&quot;&gt;\n    &lt;AppenderRef ref=&quot;ConsoleAppender&quot;/&gt;\n    &lt;!-- Appender for Custom Level A --&gt;\n    &lt;AppenderRef ref=&quot;AppenderForA&quot;&gt;\n      &lt;LevelMatchFilter level=&quot;A&quot;/&gt;\n    &lt;/AppenderRef&gt;\n    &lt;!-- Appender for Custom Level B --&gt;\n    &lt;AppenderRef ref=&quot;AppenderForB&quot;/&gt;\n      &lt;LevelMatchFilter level=&quot;B&quot;/&gt;\n    &lt;/AppenderRef&gt;\n  &lt;/Root&gt;\n&lt;/Loggers&gt;\n</code></pre>\n</li>\n</ul>\n<p><strong>Remark:</strong> I have the impression that you are using levels to distinguish different aspects of your application. That is what <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/Marker.html\" rel=\"nofollow noreferrer\">markers</a> are for:</p>\n<blockquote>\n<p>Markers are objects that are used to add easily filterable information to log messages. Markers can be hierarchical - each Marker may have a parent. This allows for broad categories being subdivided into more specific categories. An example might be a Marker named &quot;Error&quot; with children named &quot;SystemError&quot; and &quot;ApplicationError&quot;.</p>\n</blockquote>\n<p>With markers you use a <code>&lt;MarkerFilter&gt;</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;AppenderRef ref=&quot;AppenderForA&quot;&gt;\n  &lt;MarkerFilter marker=&quot;A&quot;/&gt;\n&lt;/AppenderRef&gt;\n</code></pre>\n"}],"owner":{"account_id":147805,"reputation":3135,"user_id":359179,"accept_rate":95,"display_name":"Tarun"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76742336,"answer_count":1,"score":1,"last_activity_date":1690001187,"creation_date":1689932731,"question_id":76736854,"body_markdown":"I am facing problem of log message being added to multiple appenders even after providing correct level.  \r\nPlease find following Log4 configuraiton and java sample code.\r\nLog4J configuration:\r\n\r\n    &lt;Loggers&gt;\r\n        &lt;!-- Custom Log Levels --&gt;\r\n        &lt;CustomLevels&gt;\r\n            &lt;Level name=&quot;A&quot; intLevel=&quot;450&quot; /&gt;\r\n            &lt;Level name=&quot;B&quot; intLevel=&quot;460&quot; /&gt;\r\n        &lt;/CustomLevels&gt;\r\n    \r\n        &lt;!-- Root Logger --&gt;\r\n        &lt;Root level=&quot;INFO&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;ConsoleAppender&quot; /&gt;\r\n            &lt;!-- Appender for Custom Level A --&gt;\r\n            &lt;AppenderRef ref=&quot;AppenderForA&quot; level=&quot;A&quot; /&gt;\r\n            &lt;!-- Appender for Custom Level B --&gt;\r\n            &lt;AppenderRef ref=&quot;AppenderForB&quot; level=&quot;B&quot; /&gt;\r\n        &lt;/Root&gt;\r\n    &lt;/Loggers&gt;\r\n\r\nPlease assume: AppenderForA logging to A.log and AppenderForB logging to B.log. \r\n\r\nI am creating Log instance as following:\r\n\r\n        public class UserService1 {\r\n            private static final Logger LOGGER = LogManager.getLogger(UserService1.class);\r\n        \r\n            public void doSomething() {\r\n                LOGGER.log(Level.forName(&quot;A&quot;, 450), &quot;This is a log message with Custom Level A.&quot;);\r\n          \r\n      }\r\n    }\r\n\r\nSince there are no specifically defined loggers for &quot;UserService1&quot;, it will fallback to the RootLogger.\r\nBut I don&#39;t understand why the message &quot;This is a log message with Custom Level&quot; is being logged at the ConsoleAppender as well as B&#39;s Appender (i.e. B.log), even though I am providing the correct log level while logging the message.\r\n\r\nI see the same problem while logging messages with B&#39;s level. They are being logged at the ConsoleAppender as well as at A&#39;s appender (i.e. A.log).\r\n\r\n**One Observation:** \r\nWhen I remove the B AppenderReference from the Root, messages logged with A&#39;s level only appear in A.log. I would greatly appreciate any assistance with this issue\r\n\r\nCould you please help?\r\n\r\n","title":"Duplicate logging in log4J2 with custom levels","body":"<p>I am facing problem of log message being added to multiple appenders even after providing correct level.<br />\nPlease find following Log4 configuraiton and java sample code.\nLog4J configuration:</p>\n<pre><code>&lt;Loggers&gt;\n    &lt;!-- Custom Log Levels --&gt;\n    &lt;CustomLevels&gt;\n        &lt;Level name=&quot;A&quot; intLevel=&quot;450&quot; /&gt;\n        &lt;Level name=&quot;B&quot; intLevel=&quot;460&quot; /&gt;\n    &lt;/CustomLevels&gt;\n\n    &lt;!-- Root Logger --&gt;\n    &lt;Root level=&quot;INFO&quot;&gt;\n        &lt;AppenderRef ref=&quot;ConsoleAppender&quot; /&gt;\n        &lt;!-- Appender for Custom Level A --&gt;\n        &lt;AppenderRef ref=&quot;AppenderForA&quot; level=&quot;A&quot; /&gt;\n        &lt;!-- Appender for Custom Level B --&gt;\n        &lt;AppenderRef ref=&quot;AppenderForB&quot; level=&quot;B&quot; /&gt;\n    &lt;/Root&gt;\n&lt;/Loggers&gt;\n</code></pre>\n<p>Please assume: AppenderForA logging to A.log and AppenderForB logging to B.log.</p>\n<p>I am creating Log instance as following:</p>\n<pre><code>    public class UserService1 {\n        private static final Logger LOGGER = LogManager.getLogger(UserService1.class);\n    \n        public void doSomething() {\n            LOGGER.log(Level.forName(&quot;A&quot;, 450), &quot;This is a log message with Custom Level A.&quot;);\n      \n  }\n}\n</code></pre>\n<p>Since there are no specifically defined loggers for &quot;UserService1&quot;, it will fallback to the RootLogger.\nBut I don't understand why the message &quot;This is a log message with Custom Level&quot; is being logged at the ConsoleAppender as well as B's Appender (i.e. B.log), even though I am providing the correct log level while logging the message.</p>\n<p>I see the same problem while logging messages with B's level. They are being logged at the ConsoleAppender as well as at A's appender (i.e. A.log).</p>\n<p><strong>One Observation:</strong>\nWhen I remove the B AppenderReference from the Root, messages logged with A's level only appear in A.log. I would greatly appreciate any assistance with this issue</p>\n<p>Could you please help?</p>\n"},{"tags":["java","data-structures","time-complexity","subset","space-complexity"],"answers":[{"tags":[],"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689998611,"creation_date":1689998611,"answer_id":76742239,"question_id":76498889,"body_markdown":"In my opinion, the time complexity of the `subsets()` function is `O(N * 2^N)` (where N is the length of the input array `nums`). When we ignore `List&lt;Integer&gt; copy = new ArrayList(subsets.get(i));`, the time complexity reduces to `O(2^N)`. However, considering the `List&lt;Integer&gt; copy = new ArrayList(subsets.get(i));` line, the worst-case time complexity becomes `O(N)` for each iteration of the inner loop, and the overall estimate of `O(N * 2^N)` seems appropriate.\r\n\r\nRegarding the space complexity, the `subsets()` function requires `O(N * 2^(N-1))` space (where N is the length of the input array `nums`). \r\n\r\nTo calculate the total number of elements in all the subsets of an array of length N, you can use the formula for the sum of powers of 2.\r\n\r\nFor a set with N elements, the number of subsets (including the empty set) is 2^N. Each subset may have a different number of elements ranging from 0 to N. To calculate the total number of elements in all the subsets, you can sum the number of elements across all possible subset sizes.\r\n\r\nThe formula to calculate the total number of elements in all subsets is:\r\n\r\nTotal Elements = `0 * C(0, N) + 1 * C(1, N) + 2 * C(2, N) + ... + N * C(N, N)`\r\n\r\nThe simplified formula for the total number of elements in all subsets is:\r\n\r\nTotal Elements = `N * (2^(N-1))`","title":"What is the time and space complexity for iteratively generating all subsets of a given array?","body":"<p>In my opinion, the time complexity of the <code>subsets()</code> function is <code>O(N * 2^N)</code> (where N is the length of the input array <code>nums</code>). When we ignore <code>List&lt;Integer&gt; copy = new ArrayList(subsets.get(i));</code>, the time complexity reduces to <code>O(2^N)</code>. However, considering the <code>List&lt;Integer&gt; copy = new ArrayList(subsets.get(i));</code> line, the worst-case time complexity becomes <code>O(N)</code> for each iteration of the inner loop, and the overall estimate of <code>O(N * 2^N)</code> seems appropriate.</p>\n<p>Regarding the space complexity, the <code>subsets()</code> function requires <code>O(N * 2^(N-1))</code> space (where N is the length of the input array <code>nums</code>).</p>\n<p>To calculate the total number of elements in all the subsets of an array of length N, you can use the formula for the sum of powers of 2.</p>\n<p>For a set with N elements, the number of subsets (including the empty set) is 2^N. Each subset may have a different number of elements ranging from 0 to N. To calculate the total number of elements in all the subsets, you can sum the number of elements across all possible subset sizes.</p>\n<p>The formula to calculate the total number of elements in all subsets is:</p>\n<p>Total Elements = <code>0 * C(0, N) + 1 * C(1, N) + 2 * C(2, N) + ... + N * C(N, N)</code></p>\n<p>The simplified formula for the total number of elements in all subsets is:</p>\n<p>Total Elements = <code>N * (2^(N-1))</code></p>\n"}],"owner":{"account_id":24518404,"reputation":1,"user_id":18431829,"display_name":"Rather Odd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689998611,"creation_date":1687057514,"question_id":76498889,"body_markdown":"I have this code for generating the number of subsets of a given array. In each iteration of the ```for``` loop, I make copies of all the arrays and add a new element to them.]\r\n```\r\npublic List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {\r\n        List&lt;List&lt;Integer&gt;&gt;subsets=new ArrayList();\r\n        subsets.add(new ArrayList());\r\n        int pos=0;\r\n        while(pos&lt;nums.length){\r\nint currentSize=subsets.size();\r\n        for(int i=0;i&lt;currentSize;i++){\r\n            List&lt;Integer&gt;copy=new ArrayList(subsets.get(i));\r\n            copy.add(nums[pos]);\r\n            subsets.add(copy);\r\n        }\r\n       pos++;\r\n        }\r\n        return subsets;\r\n    }\r\n```\r\n\r\nWhat is the time and space complexity? I understand that the number of subsets is 2^N but shouldn&#39;t the time taken be more than that?","title":"What is the time and space complexity for iteratively generating all subsets of a given array?","body":"<p>I have this code for generating the number of subsets of a given array. In each iteration of the <code>for</code> loop, I make copies of all the arrays and add a new element to them.]</p>\n<pre><code>public List&lt;List&lt;Integer&gt;&gt; subsets(int[] nums) {\n        List&lt;List&lt;Integer&gt;&gt;subsets=new ArrayList();\n        subsets.add(new ArrayList());\n        int pos=0;\n        while(pos&lt;nums.length){\nint currentSize=subsets.size();\n        for(int i=0;i&lt;currentSize;i++){\n            List&lt;Integer&gt;copy=new ArrayList(subsets.get(i));\n            copy.add(nums[pos]);\n            subsets.add(copy);\n        }\n       pos++;\n        }\n        return subsets;\n    }\n</code></pre>\n<p>What is the time and space complexity? I understand that the number of subsets is 2^N but shouldn't the time taken be more than that?</p>\n"},{"tags":["java","json","spring","jackson"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1689598993,"post_id":76704539,"comment_id":135231899,"body_markdown":"Looks like the preconfigured bean is being picked up. Is `org.something.config` being scanned? If it is, you can try with `@Primary` on your ObjectMapper to ensure it is the one selected.","body":"Looks like the preconfigured bean is being picked up. Is <code>org.something.config</code> being scanned? If it is, you can try with <code>@Primary</code> on your ObjectMapper to ensure it is the one selected."},{"owner":{"account_id":13625558,"reputation":25,"user_id":12613525,"display_name":"Suvid Sahay"},"score":0,"creation_date":1689618404,"post_id":76704539,"comment_id":135236180,"body_markdown":"@Chaosfire yup it&#39;s being scanned and it is also present in the application context. I tried adding `@Primary` but still it is not being picked up.","body":"@Chaosfire yup it&#39;s being scanned and it is also present in the application context. I tried adding <code>@Primary</code> but still it is not being picked up."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1689621555,"post_id":76704539,"comment_id":135236877,"body_markdown":"Hmm, then you can try to configure already existing bean as explained here - [Spring Java Config: configure already existing bean](https://stackoverflow.com/questions/57920642/spring-java-config-configure-already-existing-bean).","body":"Hmm, then you can try to configure already existing bean as explained here - <a href=\"https://stackoverflow.com/questions/57920642/spring-java-config-configure-already-existing-bean\">Spring Java Config: configure already existing bean</a>."}],"answers":[{"tags":[],"owner":{"account_id":13625558,"reputation":25,"user_id":12613525,"display_name":"Suvid Sahay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689998571,"creation_date":1689998571,"answer_id":76742236,"question_id":76704539,"body_markdown":"I changed to model class to add the annotation `@JsonSerialize(using = DurationSerializer.class)` to the Duration field which resolved this issue.","title":"Not able to add module com.fasterxml.jackson.datatype:jackson-datatype-jsr310","body":"<p>I changed to model class to add the annotation <code>@JsonSerialize(using = DurationSerializer.class)</code> to the Duration field which resolved this issue.</p>\n"}],"owner":{"account_id":13625558,"reputation":25,"user_id":12613525,"display_name":"Suvid Sahay"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689998571,"creation_date":1689597527,"question_id":76704539,"body_markdown":"I am currently using Spring `v3.0.5` along with `jackson-databind:2.12.3` and `jackson-datatype-jsr310:2.15.2`.\r\n\r\nI have tried adding the module by following the usage from the [official repository][1] by creating a Bean in my Configuration class like this:\r\n\r\n```\r\npackage org.something.config;\r\n\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.json.JsonMapper;\r\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class JacksonConfig {\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper mapper = JsonMapper.builder()\r\n                .addModule(new JavaTimeModule())\r\n                .build();\r\n\r\n        return mapper;\r\n    }\r\n\r\n}\r\n```\r\n\r\nI am still getting the same error when trying to send a request:\r\n`Java 8 date/time type &#39;java.time.Duration&#39; not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling` \r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-modules-java8/tree/master/datetime#usage","title":"Not able to add module com.fasterxml.jackson.datatype:jackson-datatype-jsr310","body":"<p>I am currently using Spring <code>v3.0.5</code> along with <code>jackson-databind:2.12.3</code> and <code>jackson-datatype-jsr310:2.15.2</code>.</p>\n<p>I have tried adding the module by following the usage from the <a href=\"https://github.com/FasterXML/jackson-modules-java8/tree/master/datetime#usage\" rel=\"nofollow noreferrer\">official repository</a> by creating a Bean in my Configuration class like this:</p>\n<pre><code>package org.something.config;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class JacksonConfig {\n\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper mapper = JsonMapper.builder()\n                .addModule(new JavaTimeModule())\n                .build();\n\n        return mapper;\n    }\n\n}\n</code></pre>\n<p>I am still getting the same error when trying to send a request:\n<code>Java 8 date/time type 'java.time.Duration' not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling</code></p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":1,"creation_date":1551171612,"post_id":54649422,"comment_id":96532561,"body_markdown":"Your JAVA_HOME is at JRE. You are not suppose to use JDK for JAVA_HOME?","body":"Your JAVA_HOME is at JRE. You are not suppose to use JDK for JAVA_HOME?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551172481,"post_id":54649422,"comment_id":96533034,"body_markdown":"@KunLun sorry for misunderstanding I have added incorrect image. Fixed. Actually it is jdk, take a loot now.","body":"@KunLun sorry for misunderstanding I have added incorrect image. Fixed. Actually it is jdk, take a loot now."},{"owner":{"account_id":11269651,"reputation":3686,"user_id":8265484,"display_name":"Mayur Dabhi"},"score":0,"creation_date":1551172720,"post_id":54649422,"comment_id":96533185,"body_markdown":"in CDM try this two commands 1) JAVA and 2) JAVAC . this both command run successfully?","body":"in CDM try this two commands 1) JAVA and 2) JAVAC . this both command run successfully?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551173126,"post_id":54649422,"comment_id":96533446,"body_markdown":"@MayurDabhi java - is ok, but javac give me such output &#39;javac&#39; is not recognized as an internal or external command,\noperable program or batch file.","body":"@MayurDabhi java - is ok, but javac give me such output &#39;javac&#39; is not recognized as an internal or external command, operable program or batch file."},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1551173221,"post_id":54649422,"comment_id":96533499,"body_markdown":"@AlekseyTimoshchenko did you have `JAVA_HOME\\bin` into PATH variable?","body":"@AlekseyTimoshchenko did you have <code>JAVA_HOME\\bin</code> into PATH variable?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551173477,"post_id":54649422,"comment_id":96533661,"body_markdown":"@KunLun I have ONLY `JAVA_HOME` , not `JAVA_HOME\\bin`","body":"@KunLun I have ONLY <code>JAVA_HOME</code> , not <code>JAVA_HOME\\bin</code>"},{"owner":{"account_id":11269651,"reputation":3686,"user_id":8265484,"display_name":"Mayur Dabhi"},"score":0,"creation_date":1551173488,"post_id":54649422,"comment_id":96533668,"body_markdown":"then problem in  your PATH veriable path fixed it","body":"then problem in  your PATH veriable path fixed it"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551173545,"post_id":54649422,"comment_id":96533705,"body_markdown":"@shizhen I downloaded studio from https://developer.android.com/studio , it 64-bit","body":"@shizhen I downloaded studio from <a href=\"https://developer.android.com/studio\" rel=\"nofollow noreferrer\">developer.android.com/studio</a> , it 64-bit"},{"owner":{"account_id":11827645,"reputation":3065,"user_id":9011164,"accept_rate":50,"display_name":"KunLun"},"score":0,"creation_date":1551173675,"post_id":54649422,"comment_id":96533801,"body_markdown":"@AlekseyTimoshchenko put `%JAVA_HOME%\\bin`","body":"@AlekseyTimoshchenko put <code>%JAVA_HOME%\\bin</code>"},{"owner":{"account_id":2658083,"reputation":2050,"user_id":2298357,"display_name":"Pankaj Kant Patel"},"score":0,"creation_date":1551174501,"post_id":54649422,"comment_id":96534332,"body_markdown":"Hi @AlekseyTimoshchenko please try this https://stackoverflow.com/a/37813192/2298357","body":"Hi @AlekseyTimoshchenko please try this <a href=\"https://stackoverflow.com/a/37813192/2298357\">stackoverflow.com/a/37813192/2298357</a>"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551174586,"post_id":54649422,"comment_id":96534389,"body_markdown":"@KunLun edited my question, take a look please. Added that you asked, but it does not helped","body":"@KunLun edited my question, take a look please. Added that you asked, but it does not helped"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551174881,"post_id":54649422,"comment_id":96534589,"body_markdown":"@shizhen we are talking about PATH variable not about JAVA_HOME... yeah? because according to this guys @Mayur Dabhi and @KunLun I have to put `%JAVA_HOME%\\bin` , you don&#39;t think so?","body":"@shizhen we are talking about PATH variable not about JAVA_HOME... yeah? because according to this guys @Mayur Dabhi and @KunLun I have to put <code>%JAVA_HOME%\\bin</code> , you don&#39;t think so?"},{"owner":{"account_id":8238102,"reputation":20388,"user_id":6196568,"display_name":"shingo"},"score":0,"creation_date":1551175691,"post_id":54649422,"comment_id":96535097,"body_markdown":"Have you defined JAVA_HOME in user variables?","body":"Have you defined JAVA_HOME in user variables?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551175830,"post_id":54649422,"comment_id":96535181,"body_markdown":"@shingo No, just in System variables","body":"@shingo No, just in System variables"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551175887,"post_id":54649422,"comment_id":96535212,"body_markdown":"@shingo just now I added it at user variables, no it does not help","body":"@shingo just now I added it at user variables, no it does not help"}],"answers":[{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551176206,"post_id":54882201,"comment_id":96535395,"body_markdown":"I can&#39;t find way how to do it on Windows... Any idea?","body":"I can&#39;t find way how to do it on Windows... Any idea?"},{"owner":{"account_id":8090685,"reputation":794,"user_id":6096715,"accept_rate":60,"display_name":"JibinNajeeb"},"score":0,"creation_date":1551181564,"post_id":54882201,"comment_id":96538541,"body_markdown":"Check in the path where andoid-studio.exe is present, there might be some files like settings.ini or config.ini or something similar. I have only used android studio in ubuntu.","body":"Check in the path where andoid-studio.exe is present, there might be some files like settings.ini or config.ini or something similar. I have only used android studio in ubuntu."}],"tags":[],"owner":{"account_id":8090685,"reputation":794,"user_id":6096715,"accept_rate":60,"display_name":"JibinNajeeb"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551173186,"creation_date":1551173186,"answer_id":54882201,"question_id":54649422,"body_markdown":"1. In android studio, there is an embedded jre. By default android studio will be using this.  You have to change this settings some how. In ubuntu, we can change this by editing AndroidStudioPath/bin/studio.sh. \r\n\r\n2. Also if you need reset android studio settings, Instead of reinstalling you can try this. Remove the .AndroidStudio3.3 folder in home location for ubuntu. In windows this will be the same but location will be  different which is C:\\Users\\&lt;user&gt;\\.AndroidStudio3.3","title":"Failed to create JVM Android studio","body":"<ol>\n<li><p>In android studio, there is an embedded jre. By default android studio will be using this.  You have to change this settings some how. In ubuntu, we can change this by editing AndroidStudioPath/bin/studio.sh. </p></li>\n<li><p>Also if you need reset android studio settings, Instead of reinstalling you can try this. Remove the .AndroidStudio3.3 folder in home location for ubuntu. In windows this will be the same but location will be  different which is C:\\Users\\.AndroidStudio3.3</p></li>\n</ol>\n"},{"comments":[{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551174602,"post_id":54882352,"comment_id":96534402,"body_markdown":"edited my question, take a look please. Added that you asked, but it does not helped","body":"edited my question, take a look please. Added that you asked, but it does not helped"},{"owner":{"account_id":11269651,"reputation":3686,"user_id":8265484,"display_name":"Mayur Dabhi"},"score":0,"creation_date":1551175580,"post_id":54882352,"comment_id":96535027,"body_markdown":"i think you should reinstalled JDK and reset path because if your JAVA command is working and JAVAC not, then problem defiantly in path set","body":"i think you should reinstalled JDK and reset path because if your JAVA command is working and JAVAC not, then problem defiantly in path set"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551176177,"post_id":54882352,"comment_id":96535382,"body_markdown":"Ok, and also, how you can explain that Android Studio 3.2 is working and Android Studio 3.3 not?","body":"Ok, and also, how you can explain that Android Studio 3.2 is working and Android Studio 3.3 not?"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551176812,"post_id":54882352,"comment_id":96535728,"body_markdown":"yeap... because of this I am confused","body":"yeap... because of this I am confused"},{"owner":{"account_id":11269651,"reputation":3686,"user_id":8265484,"display_name":"Mayur Dabhi"},"score":0,"creation_date":1551176921,"post_id":54882352,"comment_id":96535794,"body_markdown":"then you can verify jdk path from studio 3.2 and 3.3","body":"then you can verify jdk path from studio 3.2 and 3.3"},{"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"score":0,"creation_date":1551177293,"post_id":54882352,"comment_id":96536044,"body_markdown":"It is exactly that @JibinNajeeb told... Take a look at his answer. And he suggest to change in in settings, but nobody know where is settings file located...","body":"It is exactly that @JibinNajeeb told... Take a look at his answer. And he suggest to change in in settings, but nobody know where is settings file located..."}],"tags":[],"owner":{"account_id":11269651,"reputation":3686,"user_id":8265484,"display_name":"Mayur Dabhi"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551177995,"creation_date":1551173637,"answer_id":54882352,"question_id":54649422,"body_markdown":"try this solution, may be work for you,\r\n\r\n Go to C:\\Program Files\\Android\\Android Studio\\bin\\studio.exe.vmoptions\r\n\r\nOpen it with notepad with administrative permission and change the following attributes:\r\n\r\n  -Xmx512m to -Xmx256m\r\n\r\n  -XX:MaxPermSize=250m to -XX:MaxPermSize=128m\r\n\r\nOr change:\r\n\r\n-Xmx750m to -Xmx512m\r\n\r\n-XX:MaxPermSize=350m to -XX:MaxPermSize=250m","title":"Failed to create JVM Android studio","body":"<p>try this solution, may be work for you,</p>\n\n<p>Go to C:\\Program Files\\Android\\Android Studio\\bin\\studio.exe.vmoptions</p>\n\n<p>Open it with notepad with administrative permission and change the following attributes:</p>\n\n<p>-Xmx512m to -Xmx256m</p>\n\n<p>-XX:MaxPermSize=250m to -XX:MaxPermSize=128m</p>\n\n<p>Or change:</p>\n\n<p>-Xmx750m to -Xmx512m</p>\n\n<p>-XX:MaxPermSize=350m to -XX:MaxPermSize=250m</p>\n"},{"tags":[],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1551180869,"creation_date":1551180869,"answer_id":54884614,"question_id":54649422,"body_markdown":"I found the solution here https://ru.stackoverflow.com/a/949611/195957 \r\n\r\nTranslate :\r\n\r\nIt is hard to say why this issue is came... For Android Studio don&#39;t need `JAVA_HOME` variable at all.\r\n\r\nIt mostly looks like that during the installation something goes wrong with AS settings.\r\n\r\nCopying of dir `config` from previous working AS version `Users/username/.AndroidStudio3.2` in `.AndroidStudio3.3` can solve the problem.\r\n\r\nMaybe problem exactly in `options/jdk.table.xml` file. Try to start with it firstly.  ","title":"Failed to create JVM Android studio","body":"<p>I found the solution here <a href=\"https://ru.stackoverflow.com/a/949611/195957\">https://ru.stackoverflow.com/a/949611/195957</a> </p>\n\n<p>Translate :</p>\n\n<p>It is hard to say why this issue is came... For Android Studio don't need <code>JAVA_HOME</code> variable at all.</p>\n\n<p>It mostly looks like that during the installation something goes wrong with AS settings.</p>\n\n<p>Copying of dir <code>config</code> from previous working AS version <code>Users/username/.AndroidStudio3.2</code> in <code>.AndroidStudio3.3</code> can solve the problem.</p>\n\n<p>Maybe problem exactly in <code>options/jdk.table.xml</code> file. Try to start with it firstly.  </p>\n"},{"tags":[],"owner":{"account_id":85216,"reputation":3513,"user_id":237740,"display_name":"Fred Grott"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551642510,"creation_date":1551642510,"answer_id":54973002,"question_id":54649422,"body_markdown":"simple android studio requires pointing to the jdk jre installed whereas you are pointing to the jre...look in your jdk folder and you will see the jre folder location you need to use in your java_home setting.\r\n\r\n","title":"Failed to create JVM Android studio","body":"<p>simple android studio requires pointing to the jdk jre installed whereas you are pointing to the jre...look in your jdk folder and you will see the jre folder location you need to use in your java_home setting.</p>\n"},{"tags":[],"owner":{"account_id":14438309,"reputation":1,"user_id":10429727,"display_name":"Sophimp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689997938,"creation_date":1689997938,"answer_id":76742217,"question_id":54649422,"body_markdown":"windows: check your system environment variant, if has STUDIO_VMOPTIONS variant, delete it, just use defaut vmoptions","title":"Failed to create JVM Android studio","body":"<p>windows: check your system environment variant, if has STUDIO_VMOPTIONS variant, delete it, just use defaut vmoptions</p>\n"}],"owner":{"account_id":7378264,"reputation":4782,"user_id":5709159,"accept_rate":58,"display_name":"Sirop4ik"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1674,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":54884614,"answer_count":5,"score":3,"last_activity_date":1689997938,"creation_date":1549971876,"question_id":54649422,"body_markdown":"In my project I clicked `Invalidate and restart` then studio was closed and such error pop up appeared\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI rebooted my computer. Then I updated my Java as well as updated the path to the Java dir \r\n\r\n[![введите сюда описание изображения][2]][2]\r\n\r\nOne more time rebooted my computer, but anyway the same error pop up\r\n\r\nAlso for me not clear why at last lines of error wrote that \r\n\r\n&gt;Failed to create JVM. JVM Path: C:\\Program Files\\Android\\AndroidStudio3.3\\jre\\jre\r\n\r\nWhy does studio tries to get java by this path if in `system variables` path is - `C:\\Program Files\\Java\\jdk1.8.0_161`\r\n\r\n**Also I have studio 3.2.1 and it is works, but studio 3.3.1 does not... So, as for me it is means that problem not in the java path**\r\n\r\nWhat I am doing wrong?\r\n\r\n*EDIT*\r\n\r\nJust now I have reinstalled studio 3.3.1, but nothing changed... The same error\r\n\r\n**EDIT**\r\nAdded this variable `C:\\Program Files\\Java\\jdk1.8.0_161\\bin` to PATH in System variables(image below), clicked `OK`, but it does not helped\r\n\r\n[![enter image description here][3]][3]\r\n\r\n**EDIT**\r\nMy variables\r\n\r\n    C:\\Users\\alexey.t&gt;set\r\n    ALLUSERSPROFILE=C:\\ProgramData\r\n    APPDATA=C:\\Users\\alexey.t\\AppData\\Roaming\r\n    CommonProgramFiles=C:\\Program Files\\Common Files\r\n    CommonProgramFiles(x86)=C:\\Program Files (x86)\\Common Files\r\n    CommonProgramW6432=C:\\Program Files\\Common Files\r\n    COMPUTERNAME=C035\r\n    ComSpec=C:\\WINDOWS\\system32\\cmd.exe\r\n    DriverData=C:\\Windows\\System32\\Drivers\\DriverData\r\n    HOMEDRIVE=C:\r\n    HOMEPATH=\\Users\\alexey.t\r\n    JAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_161\r\n    LOCALAPPDATA=C:\\Users\\alexey.t\\AppData\\Local\r\n    LOGONSERVER=\\\\PITON\r\n    NUMBER_OF_PROCESSORS=8\r\n    OneDrive=C:\\Users\\alexey.t\\OneDrive\r\n    OS=Windows_NT\r\n    PATH=C:\\Program Files (x86)\\Common \r\n    Files\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\r\n    \\javapath;C:\\Users\\alexey. t\\AppData\\Local\\Android\\sdk\\platform- \r\n    tools;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\r\n    \\System32\\Wbem;C:\\WINDOWS\\System3 2\\WindowsPowerShell\\v1.0\\;C:\\Program \r\n    Files\\Microsoft SQL Server\\Client \r\n    SDK\\ODBC\\110\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL \r\n   \r\n   \r\n    Files\\Java\\jdk1.8.0_161;C:\\Users\\alexey.t\\AppData\r\n    \\Local\\Microsoft\\WindowsApps;\r\n    PATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\r\n    PROCESSOR_ARCHITECTURE=AMD64\r\n    PROCESSOR_IDENTIFIER=Intel64 Family 6 Model 58 Stepping 9, GenuineIntel\r\n    PROCESSOR_LEVEL=6\r\n    PROCESSOR_REVISION=3a09\r\n    ProgramData=C:\\ProgramData\r\n    ProgramFiles=C:\\Program Files\r\n    ProgramFiles(x86)=C:\\Program Files (x86)\r\n    ProgramW6432=C:\\Program Files\r\n    PROMPT=$P$G\r\n    PSModulePath=C:\\Program \r\n    Files\\WindowsPowerShell\\Modules;C:\\WINDOWS\r\n    \\system32\\WindowsPowerShell\\v1.0\\Modul es;C:\\Program Files (x86)\\Microsoft \r\n    SQL Server\\120\\Tools\\PowerShell\\Modules\\\r\n    PUBLIC=C:\\Users\\Public\r\n    SESSIONNAME=Console\r\n    SystemDrive=C:\r\n    SystemRoot=C:\\WINDOWS\r\n    TEMP=C:\\Users\\alexey.t\\AppData\\Local\\Temp\r\n    TMP=C:\\Users\\alexey.t\\AppData\\Local\\Temp\r\n    USERDNSDOMAIN=EWAVE.CO.IL\r\n    USERDOMAIN=EWAVE\r\n    USERDOMAIN_ROAMINGPROFILE=EWAVE\r\n    USERNAME=Alexey.T\r\n    USERPROFILE=C:\\Users\\alexey.t\r\n    windir=C:\\WINDOWS\r\n\r\n**EDIT**\r\n\r\nMy vm options\r\n\r\n    -Xms256m\r\n    -Xmx1280m\r\n    -XX:ReservedCodeCacheSize=240m\r\n    -XX:+UseConcMarkSweepGC\r\n    -XX:SoftRefLRUPolicyMSPerMB=50\r\n    -Dsun.io.useCanonCaches=false\r\n    -Djava.net.preferIPv4Stack=true\r\n    -Djdk.http.auth.tunneling.disabledSchemes=&quot;&quot;\r\n    -Djna.nosys=true\r\n    -Djna.boot.library.path=\r\n\r\n    -da\r\n\r\n**Feel free to ask, also let me know any of assumption**\r\n\r\n  [1]: https://i.stack.imgur.com/Hnlja.png\r\n  [2]: https://i.stack.imgur.com/n98B4.png\r\n  [3]: https://i.stack.imgur.com/viCp0.png","title":"Failed to create JVM Android studio","body":"<p>In my project I clicked <code>Invalidate and restart</code> then studio was closed and such error pop up appeared</p>\n\n<p><a href=\"https://i.stack.imgur.com/Hnlja.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Hnlja.png\" alt=\"enter image description here\"></a></p>\n\n<p>I rebooted my computer. Then I updated my Java as well as updated the path to the Java dir </p>\n\n<p><a href=\"https://i.stack.imgur.com/n98B4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n98B4.png\" alt=\"введите сюда описание изображения\"></a></p>\n\n<p>One more time rebooted my computer, but anyway the same error pop up</p>\n\n<p>Also for me not clear why at last lines of error wrote that </p>\n\n<blockquote>\n  <p>Failed to create JVM. JVM Path: C:\\Program Files\\Android\\AndroidStudio3.3\\jre\\jre</p>\n</blockquote>\n\n<p>Why does studio tries to get java by this path if in <code>system variables</code> path is - <code>C:\\Program Files\\Java\\jdk1.8.0_161</code></p>\n\n<p><strong>Also I have studio 3.2.1 and it is works, but studio 3.3.1 does not... So, as for me it is means that problem not in the java path</strong></p>\n\n<p>What I am doing wrong?</p>\n\n<p><em>EDIT</em></p>\n\n<p>Just now I have reinstalled studio 3.3.1, but nothing changed... The same error</p>\n\n<p><strong>EDIT</strong>\nAdded this variable <code>C:\\Program Files\\Java\\jdk1.8.0_161\\bin</code> to PATH in System variables(image below), clicked <code>OK</code>, but it does not helped</p>\n\n<p><a href=\"https://i.stack.imgur.com/viCp0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/viCp0.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>EDIT</strong>\nMy variables</p>\n\n<pre><code>C:\\Users\\alexey.t&gt;set\nALLUSERSPROFILE=C:\\ProgramData\nAPPDATA=C:\\Users\\alexey.t\\AppData\\Roaming\nCommonProgramFiles=C:\\Program Files\\Common Files\nCommonProgramFiles(x86)=C:\\Program Files (x86)\\Common Files\nCommonProgramW6432=C:\\Program Files\\Common Files\nCOMPUTERNAME=C035\nComSpec=C:\\WINDOWS\\system32\\cmd.exe\nDriverData=C:\\Windows\\System32\\Drivers\\DriverData\nHOMEDRIVE=C:\nHOMEPATH=\\Users\\alexey.t\nJAVA_HOME=C:\\Program Files\\Java\\jdk1.8.0_161\nLOCALAPPDATA=C:\\Users\\alexey.t\\AppData\\Local\nLOGONSERVER=\\\\PITON\nNUMBER_OF_PROCESSORS=8\nOneDrive=C:\\Users\\alexey.t\\OneDrive\nOS=Windows_NT\nPATH=C:\\Program Files (x86)\\Common \nFiles\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\n\\javapath;C:\\Users\\alexey. t\\AppData\\Local\\Android\\sdk\\platform- \ntools;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\n\\System32\\Wbem;C:\\WINDOWS\\System3 2\\WindowsPowerShell\\v1.0\\;C:\\Program \nFiles\\Microsoft SQL Server\\Client \nSDK\\ODBC\\110\\Tools\\Binn\\;C:\\Program Files (x86)\\Microsoft SQL \n\n\nFiles\\Java\\jdk1.8.0_161;C:\\Users\\alexey.t\\AppData\n\\Local\\Microsoft\\WindowsApps;\nPATHEXT=.COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC\nPROCESSOR_ARCHITECTURE=AMD64\nPROCESSOR_IDENTIFIER=Intel64 Family 6 Model 58 Stepping 9, GenuineIntel\nPROCESSOR_LEVEL=6\nPROCESSOR_REVISION=3a09\nProgramData=C:\\ProgramData\nProgramFiles=C:\\Program Files\nProgramFiles(x86)=C:\\Program Files (x86)\nProgramW6432=C:\\Program Files\nPROMPT=$P$G\nPSModulePath=C:\\Program \nFiles\\WindowsPowerShell\\Modules;C:\\WINDOWS\n\\system32\\WindowsPowerShell\\v1.0\\Modul es;C:\\Program Files (x86)\\Microsoft \nSQL Server\\120\\Tools\\PowerShell\\Modules\\\nPUBLIC=C:\\Users\\Public\nSESSIONNAME=Console\nSystemDrive=C:\nSystemRoot=C:\\WINDOWS\nTEMP=C:\\Users\\alexey.t\\AppData\\Local\\Temp\nTMP=C:\\Users\\alexey.t\\AppData\\Local\\Temp\nUSERDNSDOMAIN=EWAVE.CO.IL\nUSERDOMAIN=EWAVE\nUSERDOMAIN_ROAMINGPROFILE=EWAVE\nUSERNAME=Alexey.T\nUSERPROFILE=C:\\Users\\alexey.t\nwindir=C:\\WINDOWS\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>My vm options</p>\n\n<pre><code>-Xms256m\n-Xmx1280m\n-XX:ReservedCodeCacheSize=240m\n-XX:+UseConcMarkSweepGC\n-XX:SoftRefLRUPolicyMSPerMB=50\n-Dsun.io.useCanonCaches=false\n-Djava.net.preferIPv4Stack=true\n-Djdk.http.auth.tunneling.disabledSchemes=\"\"\n-Djna.nosys=true\n-Djna.boot.library.path=\n\n-da\n</code></pre>\n\n<p><strong>Feel free to ask, also let me know any of assumption</strong></p>\n"},{"tags":["java","spring","security","tomcat","hsts"],"comments":[{"owner":{"account_id":4876827,"reputation":153,"user_id":3931650,"display_name":"epiziv"},"score":2,"creation_date":1458531673,"post_id":27541755,"comment_id":59885433,"body_markdown":"recommend to upgrade tomcat for ease solution. Please refer @mystygage answer for tomcat 7 and 8.","body":"recommend to upgrade tomcat for ease solution. Please refer @mystygage answer for tomcat 7 and 8."}],"answers":[{"tags":[],"owner":{"account_id":593875,"reputation":20381,"user_id":276232,"accept_rate":50,"display_name":"Christopher Schultz"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1418935507,"creation_date":1418935507,"answer_id":27555364,"question_id":27541755,"body_markdown":"Use [url-rewrite](http://tuckey.org/urlrewrite/).\r\n\r\n1. Create a url-rewrite config file and put it into your web application&#39;s `WEB-INF/classes` directory\r\n2. Add a rule that adds that header to all requests\r\n\r\nNote that this is not HSTS-specific: you can do anything you want with url-rewrite.","title":"Add HSTS feature to Tomcat","body":"<p>Use <a href=\"http://tuckey.org/urlrewrite/\" rel=\"nofollow\">url-rewrite</a>.</p>\n\n<ol>\n<li>Create a url-rewrite config file and put it into your web application's <code>WEB-INF/classes</code> directory</li>\n<li>Add a rule that adds that header to all requests</li>\n</ol>\n\n<p>Note that this is not HSTS-specific: you can do anything you want with url-rewrite.</p>\n"},{"comments":[{"owner":{"account_id":4876827,"reputation":153,"user_id":3931650,"display_name":"epiziv"},"score":0,"creation_date":1458531314,"post_id":30455120,"comment_id":59885349,"body_markdown":"I just started understand this way. its working on tomcat 6.","body":"I just started understand this way. its working on tomcat 6."},{"owner":{"account_id":49935,"reputation":1239,"user_id":148857,"accept_rate":54,"display_name":"Ali Mezgani"},"score":0,"creation_date":1482745291,"post_id":30455120,"comment_id":69861492,"body_markdown":"Does the activation of the new filter, requires to modifiy also the webapp ?","body":"Does the activation of the new filter, requires to modifiy also the webapp ?"},{"owner":{"account_id":2430257,"reputation":416,"user_id":4113623,"accept_rate":50,"display_name":"Foxy"},"score":0,"creation_date":1515439743,"post_id":30455120,"comment_id":83292791,"body_markdown":"I believe that you need to use ! operator in front of if condition, as per requirement.","body":"I believe that you need to use ! operator in front of if condition, as per requirement."}],"tags":[],"owner":{"account_id":6365818,"reputation":206,"user_id":4939846,"display_name":"Severe"},"comment_count":3,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1432633825,"creation_date":1432633825,"answer_id":30455120,"question_id":27541755,"body_markdown":"You can add it using a filter. Add the following snippet to web.xml:\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;HSTSFilter&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;security.HSTSFilter&lt;/filter-class&gt;\r\n    &lt;/filter&gt;\r\n\r\nAnd then create a filter in your webapp:\r\n\r\n    package security;\r\n\r\n    import java.io.IOException;\r\n\r\n    import javax.servlet.Filter;\r\n    import javax.servlet.FilterChain;\r\n    import javax.servlet.FilterConfig;\r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.ServletRequest;\r\n    import javax.servlet.ServletResponse;\r\n    import javax.servlet.http.HttpServletResponse;\r\n\r\n    public class HSTSFilter implements Filter {\r\n \r\n        public void doFilter(ServletRequest req, ServletResponse res,\r\n            FilterChain chain) throws IOException, ServletException {\r\n    \t    HttpServletResponse resp = (HttpServletResponse) res;\r\n \r\n    \t    if (req.isSecure())\r\n    \t\t    resp.setHeader(&quot;Strict-Transport-Security&quot;, &quot;max-age=31622400; includeSubDomains&quot;);\r\n    \t\r\n            chain.doFilter(req, resp);\r\n        }\r\n    }\r\n\r\nIts also possible to add the filter using the global web.xml (conf/web.xml).","title":"Add HSTS feature to Tomcat","body":"<p>You can add it using a filter. Add the following snippet to web.xml:</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;HSTSFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;security.HSTSFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n</code></pre>\n\n<p>And then create a filter in your webapp:</p>\n\n<pre><code>package security;\n\nimport java.io.IOException;\n\nimport javax.servlet.Filter;\nimport javax.servlet.FilterChain;\nimport javax.servlet.FilterConfig;\nimport javax.servlet.ServletException;\nimport javax.servlet.ServletRequest;\nimport javax.servlet.ServletResponse;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class HSTSFilter implements Filter {\n\n    public void doFilter(ServletRequest req, ServletResponse res,\n        FilterChain chain) throws IOException, ServletException {\n        HttpServletResponse resp = (HttpServletResponse) res;\n\n        if (req.isSecure())\n            resp.setHeader(\"Strict-Transport-Security\", \"max-age=31622400; includeSubDomains\");\n\n        chain.doFilter(req, resp);\n    }\n}\n</code></pre>\n\n<p>Its also possible to add the filter using the global web.xml (conf/web.xml).</p>\n"},{"comments":[{"owner":{"account_id":49935,"reputation":1239,"user_id":148857,"accept_rate":54,"display_name":"Ali Mezgani"},"score":0,"creation_date":1482745235,"post_id":36107139,"comment_id":69861468,"body_markdown":"Does the activation of HSTS, require un restart of tomcat&#39;s service ?","body":"Does the activation of HSTS, require un restart of tomcat&#39;s service ?"},{"owner":{"account_id":1633932,"reputation":2930,"user_id":1507941,"accept_rate":83,"display_name":"Pluto"},"score":1,"creation_date":1495645368,"post_id":36107139,"comment_id":75345568,"body_markdown":"The HSTS filter is built in [starting on Tomcat version 7.0.63](https://stackoverflow.com/a/35795122/1507941). See [this answer](https://stackoverflow.com/a/21773359/1507941) for finding out your version of Tomcat.","body":"The HSTS filter is built in <a href=\"https://stackoverflow.com/a/35795122/1507941\">starting on Tomcat version 7.0.63</a>. See <a href=\"https://stackoverflow.com/a/21773359/1507941\">this answer</a> for finding out your version of Tomcat."}],"tags":[],"owner":{"account_id":1979649,"reputation":371,"user_id":1776566,"display_name":"mystygage"},"comment_count":2,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1458421580,"creation_date":1458421500,"answer_id":36107139,"question_id":27541755,"body_markdown":"If you are able to use Tomcat 7 or 8, you can activate the [built in HSTS filter][1]. Uncomment `httpHeaderSecurity` filter definition in `tomcat/conf/web.xml`\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;org.apache.catalina.filters.HttpHeaderSecurityFilter&lt;/filter-class&gt;\r\n        &lt;async-supported&gt;true&lt;/async-supported&gt;\r\n    &lt;/filter&gt;\r\n\r\nand add a useful max age param:\r\n\r\n    &lt;init-param&gt;\r\n        &lt;param-name&gt;hstsMaxAgeSeconds&lt;/param-name&gt;\r\n        &lt;param-value&gt;31536000&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n\r\nDon&#39;t forget to uncomment filter mapping:\r\n\r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n        &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n    &lt;/filter-mapping&gt;\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#HTTP_Header_Security_Filter","title":"Add HSTS feature to Tomcat","body":"<p>If you are able to use Tomcat 7 or 8, you can activate the <a href=\"https://tomcat.apache.org/tomcat-8.0-doc/config/filter.html#HTTP_Header_Security_Filter\" rel=\"noreferrer\">built in HSTS filter</a>. Uncomment <code>httpHeaderSecurity</code> filter definition in <code>tomcat/conf/web.xml</code></p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.apache.catalina.filters.HttpHeaderSecurityFilter&lt;/filter-class&gt;\n    &lt;async-supported&gt;true&lt;/async-supported&gt;\n&lt;/filter&gt;\n</code></pre>\n\n<p>and add a useful max age param:</p>\n\n<pre><code>&lt;init-param&gt;\n    &lt;param-name&gt;hstsMaxAgeSeconds&lt;/param-name&gt;\n    &lt;param-value&gt;31536000&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n\n<p>Don't forget to uncomment filter mapping:</p>\n\n<pre><code>&lt;filter-mapping&gt;\n    &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10835294,"reputation":21,"user_id":7968464,"display_name":"faizan9689"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493984338,"creation_date":1493982702,"answer_id":43803486,"question_id":27541755,"body_markdown":"1. just add this code in jsp under jsp scriptlet tags\r\n        \r\n        &lt;%\r\n        \tresponse.setHeader(&quot;Strict-Transport-Security&quot; ,&quot;max-age=7776000&quot; );\r\n        %&gt;\r\n\r\nOR\r\n      \r\n2. Also can be add to server if JBoss then add below tags in web.xml of application\r\n\r\n        &lt;system.webServer&gt;\r\n            &lt;httpProtocol&gt;\r\n                &lt;customHeaders&gt;\r\n                    &lt;add name=&quot;Strict-Transport-Security&quot; value=&quot;max-age=31536000&quot;/&gt;\r\n                &lt;/customHeaders&gt;\r\n            &lt;/httpProtocol&gt;\r\n        &lt;/system.webServer&gt;\r\n        \r\n    for `&lt;system.webServer&gt;` You have to add xmlnsi other wise it will throw Parsing exception\r\n        \r\nOR \r\n\r\n3. You can do one thing: create a filter in your application and configure that application in web.xml","title":"Add HSTS feature to Tomcat","body":"<ol>\n<li><p>just add this code in jsp under jsp scriptlet tags</p>\n\n<pre><code>&lt;%\n    response.setHeader(\"Strict-Transport-Security\" ,\"max-age=7776000\" );\n%&gt;\n</code></pre></li>\n</ol>\n\n<p>OR</p>\n\n<ol start=\"2\">\n<li><p>Also can be add to server if JBoss then add below tags in web.xml of application</p>\n\n<pre><code>&lt;system.webServer&gt;\n    &lt;httpProtocol&gt;\n        &lt;customHeaders&gt;\n            &lt;add name=\"Strict-Transport-Security\" value=\"max-age=31536000\"/&gt;\n        &lt;/customHeaders&gt;\n    &lt;/httpProtocol&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n\n<p>for <code>&lt;system.webServer&gt;</code> You have to add xmlnsi other wise it will throw Parsing exception</p></li>\n</ol>\n\n<p>OR </p>\n\n<ol start=\"3\">\n<li>You can do one thing: create a filter in your application and configure that application in web.xml</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":18465347,"reputation":41,"user_id":13451711,"display_name":"Shabrish Nayak"},"score":0,"creation_date":1622113905,"post_id":67701690,"comment_id":119700115,"body_markdown":"observe the difference, my solution has a piece of change, with above change &quot;includeSubDomains&quot; some checkmarks will get resolved","body":"observe the difference, my solution has a piece of change, with above change &quot;includeSubDomains&quot; some checkmarks will get resolved"}],"tags":[],"owner":{"account_id":18465347,"reputation":41,"user_id":13451711,"display_name":"Shabrish Nayak"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1622116348,"creation_date":1622019452,"answer_id":67701690,"question_id":27541755,"body_markdown":"if **faizan9689** solution for missing HSTS header checkmarks occurred in JSP file is not resolved, then add the following setHeader with `includeSubDomains` this will resolve the checkmark.  \r\n\r\n       &lt;%\r\n        response.setHeader(&quot;Strict-Transport-Security&quot;, &quot;max-age=31536000; includeSubDomains&quot;);\r\n       %&gt;","title":"Add HSTS feature to Tomcat","body":"<p>if <strong>faizan9689</strong> solution for missing HSTS header checkmarks occurred in JSP file is not resolved, then add the following setHeader with <code>includeSubDomains</code> this will resolve the checkmark.</p>\n<pre><code>   &lt;%\n    response.setHeader(&quot;Strict-Transport-Security&quot;, &quot;max-age=31536000; includeSubDomains&quot;);\n   %&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6212671,"reputation":1582,"user_id":4838509,"accept_rate":75,"display_name":"Bhaskara Arani"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689996053,"creation_date":1623851326,"answer_id":68003993,"question_id":27541755,"body_markdown":"in web.xml from %TOMCAT_HOME%\\conf folder\r\n\r\n    &lt;!-- ================== Built In Filter Definitions ===================== --&gt;\r\n     \r\n    &lt;!-- A filter that sets various security related HTTP Response headers.   --&gt;\r\n    &lt;!-- This filter supports the following initialization parameters         --&gt;\r\n    &lt;!-- (default values are in square brackets):                             --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   hstsEnabled         Should the HTTP Strict Transport Security      --&gt;\r\n    &lt;!--                       (HSTS) header be added to the response? See    --&gt;\r\n    &lt;!--                       RFC 6797 for more information on HSTS. [true]  --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   hstsMaxAgeSeconds   The max age value that should be used in the   --&gt;\r\n    &lt;!--                       HSTS header. Negative values will be treated   --&gt;\r\n    &lt;!--                       as zero. [0]                                   --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   hstsIncludeSubDomains                                              --&gt;\r\n    &lt;!--                       Should the includeSubDomains parameter be      --&gt;\r\n    &lt;!--                       included in the HSTS header.                   --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   antiClickJackingEnabled                                            --&gt;\r\n    &lt;!--                       Should the anti click-jacking header           --&gt;\r\n    &lt;!--                       X-Frame-Options be added to every response?    --&gt;\r\n    &lt;!--                       [true]                                         --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   antiClickJackingOption                                             --&gt;\r\n    &lt;!--                       What value should be used for the header. Must --&gt;\r\n    &lt;!--                       be one of DENY, SAMEORIGIN, ALLOW-FROM         --&gt;\r\n    &lt;!--                       (case-insensitive). [DENY]                     --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   antiClickJackingUri IF ALLOW-FROM is used, what URI should be      --&gt;\r\n    &lt;!--                       allowed? []                                    --&gt;\r\n    &lt;!--                                                                      --&gt;\r\n    &lt;!--   blockContentTypeSniffingEnabled                                    --&gt;\r\n    &lt;!--                       Should the header that blocks content type     --&gt;\r\n    &lt;!--                       sniffing be added to every response? [true]    --&gt;\r\n    &lt;filter&gt;\r\n      &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\r\n      &lt;filter-class&gt;org.apache.catalina.filters.HttpHeaderSecurityFilter&lt;/filter-class&gt;\r\n      &lt;async-supported&gt;true&lt;/async-supported&gt;\r\n      &lt;init-param&gt;\r\n        &lt;param-name&gt;hstsEnabled&lt;/param-name&gt;\r\n        &lt;param-value&gt;true&lt;/param-value&gt;\r\n      &lt;/init-param&gt;\r\n      &lt;init-param&gt;\r\n        &lt;param-name&gt;hstsMaxAgeSeconds&lt;/param-name&gt;\r\n        &lt;param-value&gt;31536000&lt;/param-value&gt;\r\n      &lt;/init-param&gt;\r\n      &lt;init-param&gt;\r\n        &lt;param-name&gt;hstsIncludeSubDomains&lt;/param-name&gt;\r\n        &lt;param-value&gt;true&lt;/param-value&gt;\r\n      &lt;/init-param&gt;\r\n      &lt;init-param&gt;\r\n        &lt;param-name&gt;antiClickJackingOption&lt;/param-name&gt;\r\n        &lt;param-value&gt;SAMEORIGIN&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n    &lt;/filter&gt;\r\n     \r\n    &lt;!-- The mapping for the HTTP header security Filter --&gt;\r\n    &lt;filter-mapping&gt;\r\n      &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\r\n      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n      &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n    &lt;/filter-mapping&gt;","title":"Add HSTS feature to Tomcat","body":"<p>in web.xml from %TOMCAT_HOME%\\conf folder</p>\n<pre><code>&lt;!-- ================== Built In Filter Definitions ===================== --&gt;\n \n&lt;!-- A filter that sets various security related HTTP Response headers.   --&gt;\n&lt;!-- This filter supports the following initialization parameters         --&gt;\n&lt;!-- (default values are in square brackets):                             --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   hstsEnabled         Should the HTTP Strict Transport Security      --&gt;\n&lt;!--                       (HSTS) header be added to the response? See    --&gt;\n&lt;!--                       RFC 6797 for more information on HSTS. [true]  --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   hstsMaxAgeSeconds   The max age value that should be used in the   --&gt;\n&lt;!--                       HSTS header. Negative values will be treated   --&gt;\n&lt;!--                       as zero. [0]                                   --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   hstsIncludeSubDomains                                              --&gt;\n&lt;!--                       Should the includeSubDomains parameter be      --&gt;\n&lt;!--                       included in the HSTS header.                   --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   antiClickJackingEnabled                                            --&gt;\n&lt;!--                       Should the anti click-jacking header           --&gt;\n&lt;!--                       X-Frame-Options be added to every response?    --&gt;\n&lt;!--                       [true]                                         --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   antiClickJackingOption                                             --&gt;\n&lt;!--                       What value should be used for the header. Must --&gt;\n&lt;!--                       be one of DENY, SAMEORIGIN, ALLOW-FROM         --&gt;\n&lt;!--                       (case-insensitive). [DENY]                     --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   antiClickJackingUri IF ALLOW-FROM is used, what URI should be      --&gt;\n&lt;!--                       allowed? []                                    --&gt;\n&lt;!--                                                                      --&gt;\n&lt;!--   blockContentTypeSniffingEnabled                                    --&gt;\n&lt;!--                       Should the header that blocks content type     --&gt;\n&lt;!--                       sniffing be added to every response? [true]    --&gt;\n&lt;filter&gt;\n  &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\n  &lt;filter-class&gt;org.apache.catalina.filters.HttpHeaderSecurityFilter&lt;/filter-class&gt;\n  &lt;async-supported&gt;true&lt;/async-supported&gt;\n  &lt;init-param&gt;\n    &lt;param-name&gt;hstsEnabled&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n  &lt;/init-param&gt;\n  &lt;init-param&gt;\n    &lt;param-name&gt;hstsMaxAgeSeconds&lt;/param-name&gt;\n    &lt;param-value&gt;31536000&lt;/param-value&gt;\n  &lt;/init-param&gt;\n  &lt;init-param&gt;\n    &lt;param-name&gt;hstsIncludeSubDomains&lt;/param-name&gt;\n    &lt;param-value&gt;true&lt;/param-value&gt;\n  &lt;/init-param&gt;\n  &lt;init-param&gt;\n    &lt;param-name&gt;antiClickJackingOption&lt;/param-name&gt;\n    &lt;param-value&gt;SAMEORIGIN&lt;/param-value&gt;\n&lt;/init-param&gt;\n&lt;/filter&gt;\n \n&lt;!-- The mapping for the HTTP header security Filter --&gt;\n&lt;filter-mapping&gt;\n  &lt;filter-name&gt;httpHeaderSecurity&lt;/filter-name&gt;\n  &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28997306,"reputation":3,"user_id":22211671,"display_name":"Aditi Patil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689103134,"creation_date":1689103134,"answer_id":76665145,"question_id":27541755,"body_markdown":"If you are using/calling any third part urls set below param as well in web.xml of tomcat\r\n```\r\n&lt;init-param&gt;\r\n&lt;param-name&gt;antiClickJackingOption&lt;/param-name&gt;\r\n&lt;param-value&gt;SAMEORIGIN&lt;/param-value&gt;\r\n&lt;/init-param&gt;\r\n```\r\n","title":"Add HSTS feature to Tomcat","body":"<p>If you are using/calling any third part urls set below param as well in web.xml of tomcat</p>\n<pre><code>&lt;init-param&gt;\n&lt;param-name&gt;antiClickJackingOption&lt;/param-name&gt;\n&lt;param-value&gt;SAMEORIGIN&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n"}],"owner":{"account_id":4876827,"reputation":153,"user_id":3931650,"display_name":"epiziv"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44554,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":30455120,"answer_count":7,"score":12,"last_activity_date":1689996053,"creation_date":1418889781,"question_id":27541755,"body_markdown":"Trust you all well.\r\n\r\nMy web application run on tomcat 6.0.43 and do not use apache or nginx at front. \r\n\r\nI&#39;m already enforce my web from http redirect to https using:\r\n\r\n 1. URL Redirect at ../webapps/ROOT/index.jsp\r\n\r\n`&lt;% response.sendRedirect(&quot;https://www.epi.com.my/portal/&quot;); %&gt;`\r\n\r\n\r\n 2. ../webapps/myapp/WEB-INF/web.xml\r\n\r\n&gt;     &lt;security-constraint&gt;\r\n&gt;     &lt;web-resource-collection&gt;\r\n&gt;       &lt;web-resource-name&gt;Protected Context&lt;/web-resource-name&gt;\r\n&gt;          &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n&gt;      &lt;/web-resource-collection&gt;\r\n&gt;      &lt;user-data-constraint&gt;\r\n&gt;         &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\r\n&gt;     &lt;/user-data-constraint&gt;&lt;/security-constraint&gt;\r\n\r\n\r\nWhere to add such code below \r\n\r\n&gt; Header add Strict-Transport-Security &quot;max-age=15768000&quot;\r\n\r\n\r\nOR \r\nIs tomcat did not have this feature?\r\nOr I need to modify in every my java web app controller.\r\n\r\n    \r\n ","title":"Add HSTS feature to Tomcat","body":"<p>Trust you all well.</p>\n\n<p>My web application run on tomcat 6.0.43 and do not use apache or nginx at front. </p>\n\n<p>I'm already enforce my web from http redirect to https using:</p>\n\n<ol>\n<li>URL Redirect at ../webapps/ROOT/index.jsp</li>\n</ol>\n\n<p><code>&lt;% response.sendRedirect(\"https://www.epi.com.my/portal/\"); %&gt;</code></p>\n\n<ol start=\"2\">\n<li>../webapps/myapp/WEB-INF/web.xml</li>\n</ol>\n\n<blockquote>\n<pre><code>&lt;security-constraint&gt;\n&lt;web-resource-collection&gt;\n  &lt;web-resource-name&gt;Protected Context&lt;/web-resource-name&gt;\n     &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n &lt;/web-resource-collection&gt;\n &lt;user-data-constraint&gt;\n    &lt;transport-guarantee&gt;CONFIDENTIAL&lt;/transport-guarantee&gt;\n&lt;/user-data-constraint&gt;&lt;/security-constraint&gt;\n</code></pre>\n</blockquote>\n\n<p>Where to add such code below </p>\n\n<blockquote>\n  <p>Header add Strict-Transport-Security \"max-age=15768000\"</p>\n</blockquote>\n\n<p>OR \nIs tomcat did not have this feature?\nOr I need to modify in every my java web app controller.</p>\n"},{"tags":["java","spring","spring-webflux","fortify"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689982390,"post_id":76741501,"comment_id":135294407,"body_markdown":"Do not use images for text (code, errors, logs, etc)","body":"Do not use images for text (code, errors, logs, etc)"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689982456,"post_id":76741501,"comment_id":135294412,"body_markdown":"Add the actual message from the report to the question.","body":"Add the actual message from the report to the question."}],"answers":[{"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689992648,"creation_date":1689992648,"answer_id":76742072,"question_id":76741501,"body_markdown":"Without the exact details on the finding of Fortify its hard to judge, but since you stated:\r\n\r\n&gt; I get the url as a parameter but it gives me this error\r\n\r\nIf the parameter `resourceUri` is user-defined and provided by a request, then this is a valid finding and your application is vulnerable to Server Side Request Forgery.\r\n\r\nIt would be something different if the URL is read from a configuration that cannot be influenced by users.","title":"How to fix &quot;Server-Side Request Forgery&quot; Fortify Java","body":"<p>Without the exact details on the finding of Fortify its hard to judge, but since you stated:</p>\n<blockquote>\n<p>I get the url as a parameter but it gives me this error</p>\n</blockquote>\n<p>If the parameter <code>resourceUri</code> is user-defined and provided by a request, then this is a valid finding and your application is vulnerable to Server Side Request Forgery.</p>\n<p>It would be something different if the URL is read from a configuration that cannot be influenced by users.</p>\n"}],"owner":{"account_id":17157218,"reputation":179,"user_id":12448215,"display_name":"Jaime"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689992648,"creation_date":1689977313,"question_id":76741501,"body_markdown":"Getting &quot;server side request forgery&quot; issue in Fortify report when using spring restTemplate.\r\n\r\nI am making a call using restTemplate to some other REST service and I get the url as a parameter but it gives me this error\r\n\r\n[![enter image description here](https://i.stack.imgur.com/gClOr.png)](https://i.stack.imgur.com/gClOr.png)\r\n\r\nI hope I don&#39;t have this vulnerability in fortify","title":"How to fix &quot;Server-Side Request Forgery&quot; Fortify Java","body":"<p>Getting &quot;server side request forgery&quot; issue in Fortify report when using spring restTemplate.</p>\n<p>I am making a call using restTemplate to some other REST service and I get the url as a parameter but it gives me this error</p>\n<p><a href=\"https://i.stack.imgur.com/gClOr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gClOr.png\" alt=\"enter image description here\" /></a></p>\n<p>I hope I don't have this vulnerability in fortify</p>\n"},{"tags":["java","swing","awt","jcheckbox","treecellrenderer"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1689992390,"post_id":76742021,"comment_id":135294887,"body_markdown":"`returnValue = ((treeNode.isLeaf()) &amp;&amp; (userObject instanceof CustomCheckBoxNode));` what do you think this is going to do when it&#39;s not a leaf node?","body":"<code>returnValue = ((treeNode.isLeaf()) &amp;&amp; (userObject instanceof CustomCheckBoxNode));</code> what do you think this is going to do when it&#39;s not a leaf node?"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1689992437,"post_id":76742021,"comment_id":135294891,"body_markdown":"Maybe [this](https://stackoverflow.com/questions/31375773/how-do-you-make-components-of-jpanel-as-a-node-in-jtree-usable/31376208#31376208) will be a better starting point","body":"Maybe <a href=\"https://stackoverflow.com/questions/31375773/how-do-you-make-components-of-jpanel-as-a-node-in-jtree-usable/31376208#31376208\">this</a> will be a better starting point"}],"owner":{"account_id":1810821,"reputation":475,"user_id":1646928,"accept_rate":71,"display_name":"JamesB"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689990742,"creation_date":1689990742,"question_id":76742021,"body_markdown":"I&#39;m currently facing a challenge with my `JTree` implementation, and I&#39;m seeking to find a solution. The `JTree` displays a hierarchical structure with `nodes` and `checkboxes`, and I want to make the root node selectable as a `Checkbox`. Checkboxes in the nodes are selectable.\r\n\r\nTried this implementation, and it shows the `root` as a `checkbox` but it remains unclickable. I&#39;ve tried adjusting the renderer and editor classes, but so far, without success. Tried to write a `Minimum Reproducible Version`, but it is still quite lengthy due to the `TreeCellRenderer` implementation:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n*MainFrame.java:*\r\n\r\n\r\n    package test;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.util.*;\r\n    import java.util.List;\r\n    import javax.swing.tree.*;\r\n    \r\n    public class MinimalReproducibleExample{\r\n    \r\n        private JFrame frame;\r\n        private JTree tree;\r\n    \r\n        public MainFrame() {\r\n            initialize();\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            EventQueue.invokeLater(() -&gt; {\r\n                try {\r\n                    MainFrame window = new MainFrame();\r\n                    window.frame.setVisible(true);\r\n                } catch (Exception e) {\r\n                    e.printStackTrace();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void initialize() {\r\n            frame = new JFrame();\r\n            frame.setBounds(100, 100, 400, 400);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n            frame.getContentPane().setLayout(new BorderLayout());\r\n    \r\n            DefaultMutableTreeNode root = new DefaultMutableTreeNode(&quot;Root&quot;);\r\n    \r\n            DefaultMutableTreeNode folder1 = new DefaultMutableTreeNode(&quot;Folder 1&quot;);\r\n            DefaultMutableTreeNode folder2 = new DefaultMutableTreeNode(&quot;Folder 2&quot;);\r\n    \r\n            DefaultMutableTreeNode file1 = new DefaultMutableTreeNode(&quot;File 1&quot;);\r\n            DefaultMutableTreeNode file2 = new DefaultMutableTreeNode(&quot;File 2&quot;);\r\n            DefaultMutableTreeNode file3 = new DefaultMutableTreeNode(&quot;File 3&quot;);\r\n    \r\n            root.add(folder1);\r\n            root.add(folder2);\r\n    \r\n            folder1.add(file1);\r\n            folder2.add(file2);\r\n            folder2.add(file3);\r\n    \r\n            Map&lt;String, List&lt;String&gt;&gt; packagesAndFiles = new HashMap&lt;&gt;();\r\n            List&lt;String&gt; nodes = new ArrayList&lt;&gt;();\r\n            Enumeration&lt;?&gt; enumeration = root.breadthFirstEnumeration();\r\n            while (enumeration.hasMoreElements()) {\r\n                DefaultMutableTreeNode node = (DefaultMutableTreeNode) enumeration.nextElement();\r\n                if (node.isLeaf()) {\r\n                    nodes.add(node.toString());\r\n                }\r\n            }\r\n            packagesAndFiles.put(&quot;Root&quot;, nodes);\r\n    \r\n            tree = new CustomCheckBoxTreeSample().createCustomCheckBoxTree(packagesAndFiles);\r\n            JScrollPane scrollPane = new JScrollPane(tree);\r\n            frame.getContentPane().add(scrollPane, BorderLayout.CENTER);\r\n        }\r\n    }\r\n\r\n*CustomCheckBoxNodeEditor.java:*\r\n\r\n    package test;\r\n    \r\n    import javax.swing.*;\r\n    import javax.swing.tree.DefaultMutableTreeNode;\r\n    import javax.swing.tree.DefaultTreeCellRenderer;\r\n    import javax.swing.tree.TreeCellEditor;\r\n    import javax.swing.tree.TreeCellRenderer;\r\n    import javax.swing.tree.TreePath;\r\n    import java.awt.*;\r\n    import java.awt.event.MouseEvent;\r\n    import java.util.EventObject;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.Vector;\r\n    \r\n    public class CustomCheckBoxTreeSample {\r\n    \r\n        public CustomCheckBoxTreeSample() {\r\n    \r\n        }\r\n    \r\n        public JTree createCustomCheckBoxTree(Map&lt;String, List&lt;String&gt;&gt; packagesAndFiles) {\r\n    \r\n            List&lt;Vector&lt;Object&gt;&gt; vectors = new Vector&lt;&gt;();\r\n    \r\n            for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : packagesAndFiles.entrySet()) {\r\n                String packageName = entry.getKey();\r\n                packageName = packageName.substring(1);\r\n    \r\n                System.out.println(&quot;Package: &quot; + packageName);\r\n                List&lt;String&gt; fileNames = entry.getValue();\r\n    \r\n                CustomCheckBoxNode checkBoxNodes[] = new CustomCheckBoxNode[fileNames.size()];\r\n    \r\n                for (int i = 0; i &lt; fileNames.size(); i++) {\r\n                    checkBoxNodes[i] = new CustomCheckBoxNode(fileNames.get(i), true);\r\n                }\r\n    \r\n                Vector&lt;Object&gt; packageVector = new NamedVector(packageName, checkBoxNodes);\r\n    \r\n                vectors.add(packageVector);\r\n            }\r\n    \r\n            CustomCheckBoxNodeRenderer renderer = new CustomCheckBoxNodeRenderer();\r\n    \r\n            Object rootNodes[] = new Object[packagesAndFiles.size()];\r\n    \r\n            for (int i = 0; i &lt; vectors.size(); i++) {\r\n                rootNodes[i] = vectors.get(i);\r\n            }\r\n    \r\n            Vector&lt;Object&gt; rootVector = new NamedVector(&quot;Root&quot;, rootNodes);\r\n    \r\n            JTree tree = new JTree(rootVector);\r\n    \r\n            tree.setVisibleRowCount(50);\r\n            tree.setRootVisible(false);\r\n            tree.setShowsRootHandles(true);\r\n    \r\n            tree.setCellRenderer(renderer);\r\n            tree.setCellEditor(new CustomCheckBoxNodeEditor(tree));\r\n            tree.setEditable(true);\r\n    \r\n            return tree;\r\n        }\r\n    }\r\n    \r\n    class CustomCheckBoxNodeRenderer implements TreeCellRenderer {\r\n    \r\n        private JCheckBox leafRenderer = new JCheckBox();\r\n        private Color selectionForeground, selectionBackground, textForeground, textBackground;\r\n    \r\n        protected JCheckBox getLeafRenderer() {\r\n            return leafRenderer;\r\n        }\r\n    \r\n        public CustomCheckBoxNodeRenderer() {\r\n            Font fontValue = UIManager.getFont(&quot;Tree.font&quot;);\r\n            if (fontValue != null) {\r\n                leafRenderer.setFont(fontValue);\r\n            }\r\n            Boolean booleanValue = (Boolean) UIManager.get(&quot;Tree.drawsFocusBorderAroundIcon&quot;);\r\n            leafRenderer.setFocusPainted((booleanValue != null) &amp;&amp; (booleanValue.booleanValue()));\r\n            UIManager.getColor(&quot;Tree.selectionBorderColor&quot;);\r\n            selectionForeground = UIManager.getColor(&quot;Tree.selectionForeground&quot;);\r\n            selectionBackground = UIManager.getColor(&quot;Tree.selectionBackground&quot;);\r\n            textForeground = UIManager.getColor(&quot;Tree.textForeground&quot;);\r\n            textBackground = UIManager.getColor(&quot;Tree.textBackground&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded,\r\n                                                      boolean leaf, int row, boolean hasFocus) {\r\n    \r\n            Component returnValue;\r\n            String stringValue = tree.convertValueToText(value, selected, expanded, leaf, row, false);\r\n            leafRenderer.setText(stringValue);\r\n            leafRenderer.setSelected(false);\r\n            leafRenderer.setEnabled(tree.isEnabled());\r\n            if (selected) {\r\n                leafRenderer.setForeground(selectionForeground);\r\n                leafRenderer.setBackground(selectionBackground);\r\n            } else {\r\n                leafRenderer.setForeground(textForeground);\r\n                leafRenderer.setBackground(textBackground);\r\n            }\r\n            if ((value != null) &amp;&amp; (value instanceof DefaultMutableTreeNode)) {\r\n                Object userObject = ((DefaultMutableTreeNode) value).getUserObject();\r\n                if (userObject instanceof CustomCheckBoxNode) {\r\n                    CustomCheckBoxNode node = (CustomCheckBoxNode) userObject;\r\n                    leafRenderer.setText(node.getText());\r\n                    leafRenderer.setSelected(node.isSelected());\r\n                }\r\n            }\r\n            returnValue = leafRenderer;\r\n    \r\n            return returnValue;\r\n        }\r\n    }\r\n    \r\n    class CustomCheckBoxNodeEditor extends AbstractCellEditor implements TreeCellEditor {\r\n    \r\n        private static final long serialVersionUID = 1L;\r\n        private CustomCheckBoxNodeRenderer renderer = new CustomCheckBoxNodeRenderer();\r\n        private JTree tree;\r\n    \r\n        public CustomCheckBoxNodeEditor(JTree tree) {\r\n            this.tree = tree;\r\n        }\r\n    \r\n        @Override\r\n        public Object getCellEditorValue() {\r\n            JCheckBox checkbox = renderer.getLeafRenderer();\r\n            CustomCheckBoxNode customCheckBoxNode = new CustomCheckBoxNode(checkbox.getText(), checkbox.isSelected());\r\n            return customCheckBoxNode;\r\n        }\r\n    \r\n        @Override\r\n        public boolean isCellEditable(EventObject event) {\r\n            boolean returnValue = false;\r\n            if (event instanceof MouseEvent) {\r\n                MouseEvent mouseEvent = (MouseEvent) event;\r\n                TreePath path = tree.getPathForLocation(mouseEvent.getX(), mouseEvent.getY());\r\n                if (path != null) {\r\n                    Object node = path.getLastPathComponent();\r\n                    if ((node != null) &amp;&amp; (node instanceof DefaultMutableTreeNode)) {\r\n                        DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\r\n                        Object userObject = treeNode.getUserObject();\r\n                        returnValue = ((treeNode.isLeaf()) &amp;&amp; (userObject instanceof CustomCheckBoxNode));\r\n                    }\r\n                }\r\n            }\r\n            return returnValue;\r\n        }\r\n    \r\n        @Override\r\n        public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {\r\n            return renderer.getTreeCellRendererComponent(tree, value, true, expanded, leaf, row, true);\r\n        }\r\n    }\r\n    \r\n    class CustomCheckBoxNode {\r\n    \r\n        private String text;\r\n        private boolean selected;\r\n    \r\n        public CustomCheckBoxNode(String text, boolean selected) {\r\n            this.text = text;\r\n            this.selected = selected;\r\n        }\r\n    \r\n        public boolean isSelected() {\r\n            return selected;\r\n        }\r\n    \r\n        public void setSelected(boolean newValue) {\r\n            selected = newValue;\r\n        }\r\n    \r\n        public String getText() {\r\n            return text;\r\n        }\r\n    \r\n        public void setText(String newValue) {\r\n            text = newValue;\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return getClass().getName() + &quot;[&quot; + text + &quot;/&quot; + selected + &quot;]&quot;;\r\n        }\r\n    }\r\n    \r\n    class NamedVector extends Vector&lt;Object&gt; {\r\n    \r\n        private String name;\r\n    \r\n        public NamedVector(String name) {\r\n            this.name = name;\r\n        }\r\n    \r\n        public NamedVector(String name, Object elements[]) {\r\n            this.name = name;\r\n            for (int i = 0, n = elements.length; i &lt; n; i++) {\r\n                add(elements[i]);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return &quot;[&quot; + name + &quot;]&quot;;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1Uxzg.png","title":"JTree Node as Checkbox is unclickable","body":"<p>I'm currently facing a challenge with my <code>JTree</code> implementation, and I'm seeking to find a solution. The <code>JTree</code> displays a hierarchical structure with <code>nodes</code> and <code>checkboxes</code>, and I want to make the root node selectable as a <code>Checkbox</code>. Checkboxes in the nodes are selectable.</p>\n<p>Tried this implementation, and it shows the <code>root</code> as a <code>checkbox</code> but it remains unclickable. I've tried adjusting the renderer and editor classes, but so far, without success. Tried to write a <code>Minimum Reproducible Version</code>, but it is still quite lengthy due to the <code>TreeCellRenderer</code> implementation:</p>\n<p><a href=\"https://i.stack.imgur.com/1Uxzg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Uxzg.png\" alt=\"enter image description here\" /></a></p>\n<p><em>MainFrame.java:</em></p>\n<pre><code>package test;\n\nimport javax.swing.*;\nimport java.awt.*;\nimport java.util.*;\nimport java.util.List;\nimport javax.swing.tree.*;\n\npublic class MinimalReproducibleExample{\n\n    private JFrame frame;\n    private JTree tree;\n\n    public MainFrame() {\n        initialize();\n    }\n\n    public static void main(String[] args) {\n        EventQueue.invokeLater(() -&gt; {\n            try {\n                MainFrame window = new MainFrame();\n                window.frame.setVisible(true);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n    }\n\n    private void initialize() {\n        frame = new JFrame();\n        frame.setBounds(100, 100, 400, 400);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        frame.getContentPane().setLayout(new BorderLayout());\n\n        DefaultMutableTreeNode root = new DefaultMutableTreeNode(&quot;Root&quot;);\n\n        DefaultMutableTreeNode folder1 = new DefaultMutableTreeNode(&quot;Folder 1&quot;);\n        DefaultMutableTreeNode folder2 = new DefaultMutableTreeNode(&quot;Folder 2&quot;);\n\n        DefaultMutableTreeNode file1 = new DefaultMutableTreeNode(&quot;File 1&quot;);\n        DefaultMutableTreeNode file2 = new DefaultMutableTreeNode(&quot;File 2&quot;);\n        DefaultMutableTreeNode file3 = new DefaultMutableTreeNode(&quot;File 3&quot;);\n\n        root.add(folder1);\n        root.add(folder2);\n\n        folder1.add(file1);\n        folder2.add(file2);\n        folder2.add(file3);\n\n        Map&lt;String, List&lt;String&gt;&gt; packagesAndFiles = new HashMap&lt;&gt;();\n        List&lt;String&gt; nodes = new ArrayList&lt;&gt;();\n        Enumeration&lt;?&gt; enumeration = root.breadthFirstEnumeration();\n        while (enumeration.hasMoreElements()) {\n            DefaultMutableTreeNode node = (DefaultMutableTreeNode) enumeration.nextElement();\n            if (node.isLeaf()) {\n                nodes.add(node.toString());\n            }\n        }\n        packagesAndFiles.put(&quot;Root&quot;, nodes);\n\n        tree = new CustomCheckBoxTreeSample().createCustomCheckBoxTree(packagesAndFiles);\n        JScrollPane scrollPane = new JScrollPane(tree);\n        frame.getContentPane().add(scrollPane, BorderLayout.CENTER);\n    }\n}\n</code></pre>\n<p><em>CustomCheckBoxNodeEditor.java:</em></p>\n<pre><code>package test;\n\nimport javax.swing.*;\nimport javax.swing.tree.DefaultMutableTreeNode;\nimport javax.swing.tree.DefaultTreeCellRenderer;\nimport javax.swing.tree.TreeCellEditor;\nimport javax.swing.tree.TreeCellRenderer;\nimport javax.swing.tree.TreePath;\nimport java.awt.*;\nimport java.awt.event.MouseEvent;\nimport java.util.EventObject;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Vector;\n\npublic class CustomCheckBoxTreeSample {\n\n    public CustomCheckBoxTreeSample() {\n\n    }\n\n    public JTree createCustomCheckBoxTree(Map&lt;String, List&lt;String&gt;&gt; packagesAndFiles) {\n\n        List&lt;Vector&lt;Object&gt;&gt; vectors = new Vector&lt;&gt;();\n\n        for (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : packagesAndFiles.entrySet()) {\n            String packageName = entry.getKey();\n            packageName = packageName.substring(1);\n\n            System.out.println(&quot;Package: &quot; + packageName);\n            List&lt;String&gt; fileNames = entry.getValue();\n\n            CustomCheckBoxNode checkBoxNodes[] = new CustomCheckBoxNode[fileNames.size()];\n\n            for (int i = 0; i &lt; fileNames.size(); i++) {\n                checkBoxNodes[i] = new CustomCheckBoxNode(fileNames.get(i), true);\n            }\n\n            Vector&lt;Object&gt; packageVector = new NamedVector(packageName, checkBoxNodes);\n\n            vectors.add(packageVector);\n        }\n\n        CustomCheckBoxNodeRenderer renderer = new CustomCheckBoxNodeRenderer();\n\n        Object rootNodes[] = new Object[packagesAndFiles.size()];\n\n        for (int i = 0; i &lt; vectors.size(); i++) {\n            rootNodes[i] = vectors.get(i);\n        }\n\n        Vector&lt;Object&gt; rootVector = new NamedVector(&quot;Root&quot;, rootNodes);\n\n        JTree tree = new JTree(rootVector);\n\n        tree.setVisibleRowCount(50);\n        tree.setRootVisible(false);\n        tree.setShowsRootHandles(true);\n\n        tree.setCellRenderer(renderer);\n        tree.setCellEditor(new CustomCheckBoxNodeEditor(tree));\n        tree.setEditable(true);\n\n        return tree;\n    }\n}\n\nclass CustomCheckBoxNodeRenderer implements TreeCellRenderer {\n\n    private JCheckBox leafRenderer = new JCheckBox();\n    private Color selectionForeground, selectionBackground, textForeground, textBackground;\n\n    protected JCheckBox getLeafRenderer() {\n        return leafRenderer;\n    }\n\n    public CustomCheckBoxNodeRenderer() {\n        Font fontValue = UIManager.getFont(&quot;Tree.font&quot;);\n        if (fontValue != null) {\n            leafRenderer.setFont(fontValue);\n        }\n        Boolean booleanValue = (Boolean) UIManager.get(&quot;Tree.drawsFocusBorderAroundIcon&quot;);\n        leafRenderer.setFocusPainted((booleanValue != null) &amp;&amp; (booleanValue.booleanValue()));\n        UIManager.getColor(&quot;Tree.selectionBorderColor&quot;);\n        selectionForeground = UIManager.getColor(&quot;Tree.selectionForeground&quot;);\n        selectionBackground = UIManager.getColor(&quot;Tree.selectionBackground&quot;);\n        textForeground = UIManager.getColor(&quot;Tree.textForeground&quot;);\n        textBackground = UIManager.getColor(&quot;Tree.textBackground&quot;);\n    }\n\n    @Override\n    public Component getTreeCellRendererComponent(JTree tree, Object value, boolean selected, boolean expanded,\n                                                  boolean leaf, int row, boolean hasFocus) {\n\n        Component returnValue;\n        String stringValue = tree.convertValueToText(value, selected, expanded, leaf, row, false);\n        leafRenderer.setText(stringValue);\n        leafRenderer.setSelected(false);\n        leafRenderer.setEnabled(tree.isEnabled());\n        if (selected) {\n            leafRenderer.setForeground(selectionForeground);\n            leafRenderer.setBackground(selectionBackground);\n        } else {\n            leafRenderer.setForeground(textForeground);\n            leafRenderer.setBackground(textBackground);\n        }\n        if ((value != null) &amp;&amp; (value instanceof DefaultMutableTreeNode)) {\n            Object userObject = ((DefaultMutableTreeNode) value).getUserObject();\n            if (userObject instanceof CustomCheckBoxNode) {\n                CustomCheckBoxNode node = (CustomCheckBoxNode) userObject;\n                leafRenderer.setText(node.getText());\n                leafRenderer.setSelected(node.isSelected());\n            }\n        }\n        returnValue = leafRenderer;\n\n        return returnValue;\n    }\n}\n\nclass CustomCheckBoxNodeEditor extends AbstractCellEditor implements TreeCellEditor {\n\n    private static final long serialVersionUID = 1L;\n    private CustomCheckBoxNodeRenderer renderer = new CustomCheckBoxNodeRenderer();\n    private JTree tree;\n\n    public CustomCheckBoxNodeEditor(JTree tree) {\n        this.tree = tree;\n    }\n\n    @Override\n    public Object getCellEditorValue() {\n        JCheckBox checkbox = renderer.getLeafRenderer();\n        CustomCheckBoxNode customCheckBoxNode = new CustomCheckBoxNode(checkbox.getText(), checkbox.isSelected());\n        return customCheckBoxNode;\n    }\n\n    @Override\n    public boolean isCellEditable(EventObject event) {\n        boolean returnValue = false;\n        if (event instanceof MouseEvent) {\n            MouseEvent mouseEvent = (MouseEvent) event;\n            TreePath path = tree.getPathForLocation(mouseEvent.getX(), mouseEvent.getY());\n            if (path != null) {\n                Object node = path.getLastPathComponent();\n                if ((node != null) &amp;&amp; (node instanceof DefaultMutableTreeNode)) {\n                    DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) node;\n                    Object userObject = treeNode.getUserObject();\n                    returnValue = ((treeNode.isLeaf()) &amp;&amp; (userObject instanceof CustomCheckBoxNode));\n                }\n            }\n        }\n        return returnValue;\n    }\n\n    @Override\n    public Component getTreeCellEditorComponent(JTree tree, Object value, boolean isSelected, boolean expanded, boolean leaf, int row) {\n        return renderer.getTreeCellRendererComponent(tree, value, true, expanded, leaf, row, true);\n    }\n}\n\nclass CustomCheckBoxNode {\n\n    private String text;\n    private boolean selected;\n\n    public CustomCheckBoxNode(String text, boolean selected) {\n        this.text = text;\n        this.selected = selected;\n    }\n\n    public boolean isSelected() {\n        return selected;\n    }\n\n    public void setSelected(boolean newValue) {\n        selected = newValue;\n    }\n\n    public String getText() {\n        return text;\n    }\n\n    public void setText(String newValue) {\n        text = newValue;\n    }\n\n    @Override\n    public String toString() {\n        return getClass().getName() + &quot;[&quot; + text + &quot;/&quot; + selected + &quot;]&quot;;\n    }\n}\n\nclass NamedVector extends Vector&lt;Object&gt; {\n\n    private String name;\n\n    public NamedVector(String name) {\n        this.name = name;\n    }\n\n    public NamedVector(String name, Object elements[]) {\n        this.name = name;\n        for (int i = 0, n = elements.length; i &lt; n; i++) {\n            add(elements[i]);\n        }\n    }\n\n    @Override\n    public String toString() {\n        return &quot;[&quot; + name + &quot;]&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","maven","spring-mvc"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689919775,"post_id":76735046,"comment_id":135283913,"body_markdown":"If you use it you need to declare it yourself. Spring has support for many many different frameworks, the fact that they support something doesn&#39;t mean they pull every dependency in (they do during building but it is a compileOnly/optional dependency for usage).","body":"If you use it you need to declare it yourself. Spring has support for many many different frameworks, the fact that they support something doesn&#39;t mean they pull every dependency in (they do during building but it is a compileOnly/optional dependency for usage)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689920474,"post_id":76735046,"comment_id":135284023,"body_markdown":"See https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/spring-web.gradle#L48C59-L48C59","body":"See <a href=\"https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/spring-web.gradle#L48C59-L48C59\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/blob/&hellip;</a>"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689968043,"post_id":76735046,"comment_id":135292780,"body_markdown":"@M.Deinum From what I understand, I don&#39;t think that&#39;s how maven works (or there is a gap in my understanding). Setting aside Spring here for a minute, if a source code in a maven project refers _directly_ to a library in its code by importing &amp; using to it then the library _has_ to be declared as a dependency in its POM. Now it could be classified as _optional_ (`&lt;optional&gt;true&lt;/optional&gt;`) in which case any project that depends on the aforementioned project might have to explicitly declare the optional library as a dependency in its POM if it wants to use it. But that&#39;s not what we see here.","body":"@M.Deinum From what I understand, I don&#39;t think that&#39;s how maven works (or there is a gap in my understanding). Setting aside Spring here for a minute, if a source code in a maven project refers <i>directly</i> to a library in its code by importing &amp; using to it then the library <i>has</i> to be declared as a dependency in its POM. Now it could be classified as <i>optional</i> (<code>&lt;optional&gt;true&lt;&#47;optional&gt;</code>) in which case any project that depends on the aforementioned project might have to explicitly declare the optional library as a dependency in its POM if it wants to use it. But that&#39;s not what we see here."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689968680,"post_id":76735046,"comment_id":135292877,"body_markdown":"@Slaw Thank you, I did see it. Though I am not very familiar with gradle, I noticed at least there it made perfect sense since it was declared as optional dependency, which seems correct since if a project doesn&#39;t use client-side HTTP it will _not need_ the Apache HTTPClient library &amp; forcing it would be a bloat. But the maven one did not even declare it. That&#39;s the confusion.","body":"@Slaw Thank you, I did see it. Though I am not very familiar with gradle, I noticed at least there it made perfect sense since it was declared as optional dependency, which seems correct since if a project doesn&#39;t use client-side HTTP it will <i>not need</i> the Apache HTTPClient library &amp; forcing it would be a bloat. But the maven one did not even declare it. That&#39;s the confusion."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689975785,"post_id":76735046,"comment_id":135293809,"body_markdown":"I think that&#39;s due to the POM being generated by Gradle when publishing the artifacts (via Gradle). Because the POM is not actually being used to _build_ the project (that&#39;s Gradle&#39;s job), it only declares enough for other projects to _use_ it. But that&#39;s all speculation on my part.","body":"I think that&#39;s due to the POM being generated by Gradle when publishing the artifacts (via Gradle). Because the POM is not actually being used to <i>build</i> the project (that&#39;s Gradle&#39;s job), it only declares enough for other projects to <i>use</i> it. But that&#39;s all speculation on my part."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689976409,"post_id":76735046,"comment_id":135293884,"body_markdown":"@Slaw Thank you. Btw I didn&#39;t know Gradle can generate the maven POM!","body":"@Slaw Thank you. Btw I didn&#39;t know Gradle can generate the maven POM!"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689977015,"post_id":76735046,"comment_id":135293942,"body_markdown":"Check out the [Maven Publish Plugin](https://docs.gradle.org/current/userguide/publishing_maven.html) (it talks about POM generation). Also, note it looks like the `optional` configuration is added by a [custom Gradle plugin](https://github.com/spring-projects/spring-framework/tree/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/buildSrc#optional-dependencies).","body":"Check out the <a href=\"https://docs.gradle.org/current/userguide/publishing_maven.html\" rel=\"nofollow noreferrer\">Maven Publish Plugin</a> (it talks about POM generation). Also, note it looks like the <code>optional</code> configuration is added by a <a href=\"https://github.com/spring-projects/spring-framework/tree/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/buildSrc#optional-dependencies\" rel=\"nofollow noreferrer\">custom Gradle plugin</a>."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689979590,"post_id":76735046,"comment_id":135294186,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/254618/discussion-between-lmk-and-slaw).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/254618/discussion-between-lmk-and-slaw\">continue this discussion in chat</a>."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689927749,"post_id":76736213,"comment_id":135285306,"body_markdown":"Not sure but feels a bit like a ChatGPT answer? That being said if it was a transitive dependency it would automatically be included, only `optional` dependencies aren&#39;t automatically included.","body":"Not sure but feels a bit like a ChatGPT answer? That being said if it was a transitive dependency it would automatically be included, only <code>optional</code> dependencies aren&#39;t automatically included."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689969006,"post_id":76736213,"comment_id":135292924,"body_markdown":"@M.Deinum I agree, it feels a little &#39;ChatGPT&#39;ish ;-) Also the following line is not even true if one actually looks at the snippet in the question, \n&gt; _But, if you look closely, you can find that spring-web has a transitive dependency on org.apache.httpcomponents:httpclient._","body":"@M.Deinum I agree, it feels a little &#39;ChatGPT&#39;ish ;-) Also the following line is not even true if one actually looks at the snippet in the question,  &gt; <i>But, if you look closely, you can find that spring-web has a transitive dependency on org.apache.httpcomponents:httpclient.</i>"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689969193,"post_id":76736213,"comment_id":135292948,"body_markdown":"@Massnissa BELAID can you please elaborate on this line in your answer?, \n&gt; _But, if you look closely, you can find that spring-web has a transitive dependency on org.apache.httpcomponents:httpclient._","body":"@Massnissa BELAID can you please elaborate on this line in your answer?,  &gt; <i>But, if you look closely, you can find that spring-web has a transitive dependency on org.apache.httpcomponents:httpclient.</i>"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689969615,"post_id":76736213,"comment_id":135293024,"body_markdown":"@M.Deinum Yes, that&#39;s the question. Shouldn&#39;t Apache HTTPClient library be defined as an optional dependency of Spring Web? Why is it not even declared (let alone marked as optional) in the POM of Spring Web.","body":"@M.Deinum Yes, that&#39;s the question. Shouldn&#39;t Apache HTTPClient library be defined as an optional dependency of Spring Web? Why is it not even declared (let alone marked as optional) in the POM of Spring Web."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689971084,"post_id":76736213,"comment_id":135293242,"body_markdown":"`[INFO] --- maven-dependency-plugin:3.2.0:tree (default-cli) @ maven-dependency-resolver-tool ---\n[INFO] dcm.dev.util:maven-dependency-resolver-tool:jar:1.0\n[INFO] \\- org.springframework:spring-web:jar:5.3.20:compile\n[INFO]    +- org.springframework:spring-beans:jar:5.3.20:compile\n[INFO]    |  \\- (org.springframework:spring-core:jar:5.3.20:compile - omitted for duplicate)\n[INFO]    \\- org.springframework:spring-core:jar:5.3.20:compile\n[INFO]       \\- org.springframework:spring-jcl:jar:5.3.20:compile\n[INFO] ------------------------------------------------------------------------\n[INFO]`","body":"<code>[INFO] --- maven-dependency-plugin:3.2.0:tree (default-cli) @ maven-dependency-resolver-tool --- [INFO] dcm.dev.util:maven-dependency-resolver-tool:jar:1.0 [INFO] \\- org.springframework:spring-web:jar:5.3.20:compile [INFO]    +- org.springframework:spring-beans:jar:5.3.20:compile [INFO]    |  \\- (org.springframework:spring-core:jar:5.3.20:compile - omitted for duplicate) [INFO]    \\- org.springframework:spring-core:jar:5.3.20:compile [INFO]       \\- org.springframework:spring-jcl:jar:5.3.20:compile [INFO] ------------------------------------------------------------&zwnj;&#8203;------------ [INFO]</code>"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1689971161,"post_id":76736213,"comment_id":135293250,"body_markdown":"@Massnissa BELAID Above is the dependency tree for spring-web, where do you see `org.apache.httpcomponents:httpclient` there?","body":"@Massnissa BELAID Above is the dependency tree for spring-web, where do you see <code>org.apache.httpcomponents:httpclient</code> there?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1690179698,"post_id":76736213,"comment_id":135311660,"body_markdown":"It is an optional dependency of Spring Web which is exactly why you don&#39;t see it! Opotional dependencies aren&#39;t included!.","body":"It is an optional dependency of Spring Web which is exactly why you don&#39;t see it! Opotional dependencies aren&#39;t included!."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1690411357,"post_id":76736213,"comment_id":135351731,"body_markdown":"@M.Deinum Sorry I missed your last response. I didn&#39;t quite get why optional dependencies aren&#39;t included. Are you referring to the decision taken by Spring team a while back to not include optional dependencies in the Maven POM (even though its included in the Gradle build used to build the artifacts)?","body":"@M.Deinum Sorry I missed your last response. I didn&#39;t quite get why optional dependencies aren&#39;t included. Are you referring to the decision taken by Spring team a while back to not include optional dependencies in the Maven POM (even though its included in the Gradle build used to build the artifacts)?"},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1690412355,"post_id":76736213,"comment_id":135351883,"body_markdown":"@M.Deinum I came to know of the above decision after I raised an issue [#30943](https://github.com/spring-projects/spring-framework/issues/30943) on Spring. The problem is the PR [#23486](https://github.com/spring-projects/spring-framework/issues/23486) that was meant to track &amp; provide an alternate approach to convey this dependency metadata was abruptly closed with [&quot;We didn&#39;t find proper ways to express that information in our build&quot;](https://github.com/spring-projects/spring-framework/issues/23486#issuecomment-607445982). This leaves us with the original issues including mine now in limbo.","body":"@M.Deinum I came to know of the above decision after I raised an issue <a href=\"https://github.com/spring-projects/spring-framework/issues/30943\" rel=\"nofollow noreferrer\">#30943</a> on Spring. The problem is the PR <a href=\"https://github.com/spring-projects/spring-framework/issues/23486\" rel=\"nofollow noreferrer\">#23486</a> that was meant to track &amp; provide an alternate approach to convey this dependency metadata was abruptly closed with <a href=\"https://github.com/spring-projects/spring-framework/issues/23486#issuecomment-607445982\" rel=\"nofollow noreferrer\">&quot;We didn&#39;t find proper ways to express that information in our build&quot;</a>. This leaves us with the original issues including mine now in limbo."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690438470,"post_id":76736213,"comment_id":135354396,"body_markdown":"What limbo? Even if it would have been an `optional` dependency you wouldn&#39;t see it in a dependency tree, so even if it would be there you wouldn&#39;t see it. Unless you would actually read the `pom.xml`.","body":"What limbo? Even if it would have been an <code>optional</code> dependency you wouldn&#39;t see it in a dependency tree, so even if it would be there you wouldn&#39;t see it. Unless you would actually read the <code>pom.xml</code>."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1690502843,"post_id":76736213,"comment_id":135366710,"body_markdown":"@M.Deinum Its true that `maven-dependency-plugin` will not show `optional` dependencies in the tree (I remember they used to show that, but not sure &amp; surely not any more) but its also true that maven does show the optional dependencies when one looks at it online on maven central, which is what I always do. Here is an [example](https://mvnrepository.com/artifact/io.netty/netty-all/4.1.50.Final). The limbo part is the underlying requirement of publishing the dependency metadata in some way which is what both my issue &amp; the other ones listed in my previous comment requested for.","body":"@M.Deinum Its true that <code>maven-dependency-plugin</code> will not show <code>optional</code> dependencies in the tree (I remember they used to show that, but not sure &amp; surely not any more) but its also true that maven does show the optional dependencies when one looks at it online on maven central, which is what I always do. Here is an <a href=\"https://mvnrepository.com/artifact/io.netty/netty-all/4.1.50.Final\" rel=\"nofollow noreferrer\">example</a>. The limbo part is the underlying requirement of publishing the dependency metadata in some way which is what both my issue &amp; the other ones listed in my previous comment requested for."},{"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"score":0,"creation_date":1690503362,"post_id":76736213,"comment_id":135366758,"body_markdown":"@M.Deinum Perhaps you may have some thoughts on my [last](https://github.com/spring-projects/spring-framework/issues/30943#issuecomment-1652311985) comment..","body":"@M.Deinum Perhaps you may have some thoughts on my <a href=\"https://github.com/spring-projects/spring-framework/issues/30943#issuecomment-1652311985\" rel=\"nofollow noreferrer\">last</a> comment.."}],"tags":[],"owner":{"account_id":25301977,"reputation":31,"user_id":19126107,"display_name":"Massnissa BELAID"},"comment_count":12,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689927702,"creation_date":1689926888,"answer_id":76736213,"question_id":76735046,"body_markdown":"In the Spring framework, some components may have optional dependencies that are not explicitly declared in the project&#39;s POM (Project Object Model) file. Instead, these dependencies are conditionally loaded at runtime based on certain conditions. This mechanism is achieved through Spring&#39;s use of conditional dependencies and dynamic class loading.\r\n\r\nWhen you see the documentation for `HttpComponentsClientHttpRequestFactory` stating that it requires Apache HttpComponents 5.1 or higher, and you can see corresponding imports and references to Apache HttpComponents `HTTPClient` in the code, it means that the class uses features from Apache HttpComponents.\r\n\r\nHowever, Apache HttpComponents is not explicitly declared as a direct dependency in the project&#39;s POM for `spring-boot-starter-web`. Instead, it might be an optional or transitive dependency.\r\n\r\nIn your provided dependency tree, you can see that `spring-web` and `spring-webmvc` are the direct dependencies for the `spring-boot-starter-web` artifact. But, if you look closely, you can find that `spring-web` has a transitive dependency on org.apache.httpcomponents:httpclient.\r\n\r\nSo, the actual declaration of Apache HttpComponents HTTPClient as a dependency is hidden within the transitive dependencies of `spring-web`, which is a direct dependency of `spring-boot-starter-web`.\r\n\r\nThis approach allows Spring to maintain a more lightweight and flexible framework, as users can choose to include or exclude specific features by managing the dependencies accordingly. It also avoids version conflicts with other libraries that might have different requirements for Apache HttpComponents versions.","title":"How does Spring Web require Apache HttpComponents (HTTPClient) without declaring it as a dependency?","body":"<p>In the Spring framework, some components may have optional dependencies that are not explicitly declared in the project's POM (Project Object Model) file. Instead, these dependencies are conditionally loaded at runtime based on certain conditions. This mechanism is achieved through Spring's use of conditional dependencies and dynamic class loading.</p>\n<p>When you see the documentation for <code>HttpComponentsClientHttpRequestFactory</code> stating that it requires Apache HttpComponents 5.1 or higher, and you can see corresponding imports and references to Apache HttpComponents <code>HTTPClient</code> in the code, it means that the class uses features from Apache HttpComponents.</p>\n<p>However, Apache HttpComponents is not explicitly declared as a direct dependency in the project's POM for <code>spring-boot-starter-web</code>. Instead, it might be an optional or transitive dependency.</p>\n<p>In your provided dependency tree, you can see that <code>spring-web</code> and <code>spring-webmvc</code> are the direct dependencies for the <code>spring-boot-starter-web</code> artifact. But, if you look closely, you can find that <code>spring-web</code> has a transitive dependency on org.apache.httpcomponents:httpclient.</p>\n<p>So, the actual declaration of Apache HttpComponents HTTPClient as a dependency is hidden within the transitive dependencies of <code>spring-web</code>, which is a direct dependency of <code>spring-boot-starter-web</code>.</p>\n<p>This approach allows Spring to maintain a more lightweight and flexible framework, as users can choose to include or exclude specific features by managing the dependencies accordingly. It also avoids version conflicts with other libraries that might have different requirements for Apache HttpComponents versions.</p>\n"}],"owner":{"account_id":6749614,"reputation":654,"user_id":5200064,"accept_rate":80,"display_name":"lmk"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":567,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689989023,"creation_date":1689912226,"question_id":76735046,"body_markdown":"In the Spring ([Spring Web][1]) documentation for [HttpComponentsClientHttpRequestFactory][2] it states that,\r\n\r\n&gt; NOTE: Requires Apache HttpComponents 5.1 or higher, as of Spring 6.0.\r\n\r\nWhen I look at the code for [HttpComponentsClientHttpRequestFactory.java][3] I can also clearly see corresponding [imports][4] &amp; [references][5] to [Apache HttpComponents HTTPClient][6].\r\n\r\nHowever when I look at [Spring Web][1]&#39;s (maven) dependency [declaration][7] (or its [POM][8]) I don&#39;t see [Apache HttpComponents HTTPClient][6] declared as a dependency.\r\n\r\nJust to add more context here (for folks who may miss the comments section where I clarified this), shouldn&#39;t [Apache HttpComponents HTTPClient][6] library be declared at least as an optional dependency (`&lt;optional&gt;true&lt;/optional&gt;`) of [Spring Web][1]? Why (or how) is it not even declared (let alone marked as optional) in its POM?\r\n\r\nHow does this work? Does someone know &amp; can help share pointers?\r\n\r\nBelow for example is the dependency tree for an older version `org.springframework.boot:spring-boot-starter-web:jar:2.7.0`\r\n\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] ------------&lt; dcm.dev.util:maven-dependency-resolver-tool &gt;-------------\r\n    [INFO] Building maven-dependency-resolver-tool 1.0\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-dependency-plugin:3.2.0:tree (default-cli) @ maven-dependency-resolver-tool ---\r\n    [INFO] dcm.dev.util:maven-dependency-resolver-tool:jar:1.0\r\n    [INFO] \\- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile\r\n    [INFO]    +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile\r\n    [INFO]    |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile\r\n    [INFO]    |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile\r\n    [INFO]    |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.1:compile\r\n    [INFO]    |  |  +- ch.qos.logback:logback-classic:jar:1.4.8:compile\r\n    [INFO]    |  |  |  +- ch.qos.logback:logback-core:jar:1.4.8:compile\r\n    [INFO]    |  |  |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\r\n    [INFO]    |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\r\n    [INFO]    |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\r\n    [INFO]    |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\r\n    [INFO]    |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\r\n    [INFO]    |  +- org.springframework:spring-core:jar:6.0.10:compile\r\n    [INFO]    |  |  \\- org.springframework:spring-jcl:jar:6.0.10:compile\r\n    [INFO]    |  \\- org.yaml:snakeyaml:jar:1.33:compile\r\n    [INFO]    +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile\r\n    [INFO]    |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile\r\n    [INFO]    |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile\r\n    [INFO]    |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\r\n    [INFO]    |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile\r\n    [INFO]    |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\r\n    [INFO]    |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile\r\n    [INFO]    +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile\r\n    [INFO]    |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile\r\n    [INFO]    |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile\r\n    [INFO]    |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile\r\n    [INFO]    +- org.springframework:spring-web:jar:6.0.10:compile\r\n    [INFO]    |  +- org.springframework:spring-beans:jar:6.0.10:compile\r\n    [INFO]    |  \\- io.micrometer:micrometer-observation:jar:1.10.8:compile\r\n    [INFO]    |     \\- io.micrometer:micrometer-commons:jar:1.10.8:compile\r\n    [INFO]    \\- org.springframework:spring-webmvc:jar:6.0.10:compile\r\n    [INFO]       +- org.springframework:spring-aop:jar:6.0.10:compile\r\n    [INFO]       +- org.springframework:spring-context:jar:6.0.10:compile\r\n    [INFO]       \\- org.springframework:spring-expression:jar:6.0.10:compile\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\n\r\n\r\n**Update (07/21/23)**:\r\nThanks to @Slaw, I realized Spring switched to Gradle with 2.3 release (June 2020), which may explain how the build works (since it **_is_** declared as an optional dependency in the gradle build). \r\n\r\nSo could the [org.springframework.build.optional-dependencies][9] plugin have a play in this?\r\n\r\nThanks\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.springframework/spring-web\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.html\r\n  [3]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java\r\n  [4]: https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java#L26C8-L26C53\r\n  [5]: https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java#L98C34-L98C34\r\n  [6]: https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5\r\n  [7]: https://mvnrepository.com/artifact/org.springframework/spring-web/6.0.11\r\n  [8]: https://repo1.maven.org/maven2/org/springframework/spring-web/6.0.11/spring-web-6.0.11.pom\r\n  [9]: https://github.com/spring-projects/spring-framework/tree/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/buildSrc#optional-dependencies","title":"How does Spring Web require Apache HttpComponents (HTTPClient) without declaring it as a dependency?","body":"<p>In the Spring (<a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web\" rel=\"nofollow noreferrer\">Spring Web</a>) documentation for <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.html\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequestFactory</a> it states that,</p>\n<blockquote>\n<p>NOTE: Requires Apache HttpComponents 5.1 or higher, as of Spring 6.0.</p>\n</blockquote>\n<p>When I look at the code for <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java\" rel=\"nofollow noreferrer\">HttpComponentsClientHttpRequestFactory.java</a> I can also clearly see corresponding <a href=\"https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java#L26C8-L26C53\" rel=\"nofollow noreferrer\">imports</a> &amp; <a href=\"https://github.com/spring-projects/spring-framework/blob/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/spring-web/src/main/java/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.java#L98C34-L98C34\" rel=\"nofollow noreferrer\">references</a> to <a href=\"https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5\" rel=\"nofollow noreferrer\">Apache HttpComponents HTTPClient</a>.</p>\n<p>However when I look at <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web\" rel=\"nofollow noreferrer\">Spring Web</a>'s (maven) dependency <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web/6.0.11\" rel=\"nofollow noreferrer\">declaration</a> (or its <a href=\"https://repo1.maven.org/maven2/org/springframework/spring-web/6.0.11/spring-web-6.0.11.pom\" rel=\"nofollow noreferrer\">POM</a>) I don't see <a href=\"https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5\" rel=\"nofollow noreferrer\">Apache HttpComponents HTTPClient</a> declared as a dependency.</p>\n<p>Just to add more context here (for folks who may miss the comments section where I clarified this), shouldn't <a href=\"https://mvnrepository.com/artifact/org.apache.httpcomponents.client5/httpclient5\" rel=\"nofollow noreferrer\">Apache HttpComponents HTTPClient</a> library be declared at least as an optional dependency (<code>&lt;optional&gt;true&lt;/optional&gt;</code>) of <a href=\"https://mvnrepository.com/artifact/org.springframework/spring-web\" rel=\"nofollow noreferrer\">Spring Web</a>? Why (or how) is it not even declared (let alone marked as optional) in its POM?</p>\n<p>How does this work? Does someone know &amp; can help share pointers?</p>\n<p>Below for example is the dependency tree for an older version <code>org.springframework.boot:spring-boot-starter-web:jar:2.7.0</code></p>\n<pre><code>[INFO] Scanning for projects...\n[INFO] \n[INFO] ------------&lt; dcm.dev.util:maven-dependency-resolver-tool &gt;-------------\n[INFO] Building maven-dependency-resolver-tool 1.0\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-dependency-plugin:3.2.0:tree (default-cli) @ maven-dependency-resolver-tool ---\n[INFO] dcm.dev.util:maven-dependency-resolver-tool:jar:1.0\n[INFO] \\- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile\n[INFO]    +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile\n[INFO]    |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile\n[INFO]    |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile\n[INFO]    |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.1:compile\n[INFO]    |  |  +- ch.qos.logback:logback-classic:jar:1.4.8:compile\n[INFO]    |  |  |  +- ch.qos.logback:logback-core:jar:1.4.8:compile\n[INFO]    |  |  |  \\- org.slf4j:slf4j-api:jar:2.0.7:compile\n[INFO]    |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile\n[INFO]    |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile\n[INFO]    |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.7:compile\n[INFO]    |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO]    |  +- org.springframework:spring-core:jar:6.0.10:compile\n[INFO]    |  |  \\- org.springframework:spring-jcl:jar:6.0.10:compile\n[INFO]    |  \\- org.yaml:snakeyaml:jar:1.33:compile\n[INFO]    +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile\n[INFO]    |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile\n[INFO]    |  |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile\n[INFO]    |  |  \\- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile\n[INFO]    |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile\n[INFO]    |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile\n[INFO]    |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile\n[INFO]    +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile\n[INFO]    |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile\n[INFO]    |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile\n[INFO]    |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile\n[INFO]    +- org.springframework:spring-web:jar:6.0.10:compile\n[INFO]    |  +- org.springframework:spring-beans:jar:6.0.10:compile\n[INFO]    |  \\- io.micrometer:micrometer-observation:jar:1.10.8:compile\n[INFO]    |     \\- io.micrometer:micrometer-commons:jar:1.10.8:compile\n[INFO]    \\- org.springframework:spring-webmvc:jar:6.0.10:compile\n[INFO]       +- org.springframework:spring-aop:jar:6.0.10:compile\n[INFO]       +- org.springframework:spring-context:jar:6.0.10:compile\n[INFO]       \\- org.springframework:spring-expression:jar:6.0.10:compile\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p><strong>Update (07/21/23)</strong>:\nThanks to @Slaw, I realized Spring switched to Gradle with 2.3 release (June 2020), which may explain how the build works (since it <strong><em>is</em></strong> declared as an optional dependency in the gradle build).</p>\n<p>So could the <a href=\"https://github.com/spring-projects/spring-framework/tree/efb6abc43f550c2be20f39ad9ce65346ee5ebd65/buildSrc#optional-dependencies\" rel=\"nofollow noreferrer\">org.springframework.build.optional-dependencies</a> plugin have a play in this?</p>\n<p>Thanks</p>\n"},{"tags":["java","reactjs","npm","localhost"],"answers":[{"comments":[{"owner":{"account_id":29046241,"reputation":3,"user_id":22250018,"display_name":"mattvalgreen"},"score":0,"creation_date":1689990290,"post_id":76741962,"comment_id":135294789,"body_markdown":"Thank you so much for your help! It really worked for me.","body":"Thank you so much for your help! It really worked for me."}],"tags":[],"owner":{"account_id":10544648,"reputation":38,"user_id":7769334,"display_name":"Juan Valencia"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689988575,"creation_date":1689988575,"answer_id":76741962,"question_id":76741916,"body_markdown":"It might be a typo, but your question states `localhost3000` when the port and url should be `localhost:3000`\r\n\r\nIf you still see a blank page then check the console using developer tools.\r\n\r\nDepending on which version of React you&#39;re using, you might also need to update the method in which you are rendering on the root element as this has changed in the latest version.\r\n\r\nBefore:\r\n```js\r\nReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;));\r\n```\r\n\r\nAfter:\r\n```js\r\nReactDOM.createRoot(document.getElementById(&#39;root&#39;)).render(\r\n&lt;App /&gt;,\r\n)\r\n```\r\n","title":"REACT: Blank Page on localhost3000","body":"<p>It might be a typo, but your question states <code>localhost3000</code> when the port and url should be <code>localhost:3000</code></p>\n<p>If you still see a blank page then check the console using developer tools.</p>\n<p>Depending on which version of React you're using, you might also need to update the method in which you are rendering on the root element as this has changed in the latest version.</p>\n<p>Before:</p>\n<pre class=\"lang-js prettyprint-override\"><code>ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n</code></pre>\n<p>After:</p>\n<pre class=\"lang-js prettyprint-override\"><code>ReactDOM.createRoot(document.getElementById('root')).render(\n&lt;App /&gt;,\n)\n</code></pre>\n"}],"owner":{"account_id":29046241,"reputation":3,"user_id":22250018,"display_name":"mattvalgreen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76741962,"answer_count":1,"score":0,"last_activity_date":1689988575,"creation_date":1689986847,"question_id":76741916,"body_markdown":"I&#39;m having problems trying to run this application when I try the `npm start` command. It should be showing `&lt;h1&gt;GPT-3&lt;/h1&gt;` on `localhost3000` on my browser as it does on the code above:\r\n\r\n\r\n```\r\nindex.html\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;&gt;\r\n  &lt;head&gt;\r\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\r\n    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;\r\n    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot; /&gt;\r\n    &lt;meta name=&quot;description&quot; content=&quot;Web site created using create-react-app&quot;/&gt;\r\n    &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;%PUBLIC_URL%/logo192.png&quot; /&gt;\r\n    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot; /&gt;\r\n    &lt;title&gt;React App&lt;/title&gt;\r\n  &lt;/head&gt;\r\n  &lt;body&gt;\r\n    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\r\n  &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\n```\r\nindex.js\r\nimport React from &#39;react&#39;;\r\nimport ReactDOM from &#39;react-dom&#39;;\r\n\r\nimport App from &#39;./App&#39;;\r\n\r\nReactDOM.render(&lt;App /&gt;, document.getElementById(&#39;root&#39;));\r\n```\r\n\r\n```\r\nApp.js\r\nimport React from &#39;react&#39;\r\n\r\nconst App = () =&gt; {\r\n  return (\r\n    &lt;div&gt;\r\n        &lt;h1&gt;GPT-3&lt;/h1&gt;\r\n    &lt;/div&gt;\r\n  )\r\n}\r\n\r\nexport default App\r\n```\r\n\r\n\r\nBefore starting this application, I tried the command `npx create react-app ./` to create the files needed, after that I used `npm install react-icons` and finally `npm start` but it&#39;s not working as I planned. \r\n\r\nnpm -v\r\n9.7.2\r\n\r\nnode -v\r\nv18.16.1\r\n\r\nWindows 11 -v\r\n22H2\r\n\r\nChrome -v\r\n115.0.5790.102 (Compila&#231;&#227;o oficial) (64 bits)\r\n\r\nthis message appears when I run the command `npm start`:\r\n[`npm start`](https://i.stack.imgur.com/L48oR.png)\r\n","title":"REACT: Blank Page on localhost3000","body":"<p>I'm having problems trying to run this application when I try the <code>npm start</code> command. It should be showing <code>&lt;h1&gt;GPT-3&lt;/h1&gt;</code> on <code>localhost3000</code> on my browser as it does on the code above:</p>\n<pre><code>index.html\n&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n  &lt;head&gt;\n    &lt;meta charset=&quot;utf-8&quot; /&gt;\n    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;\n    &lt;meta name=&quot;theme-color&quot; content=&quot;#000000&quot; /&gt;\n    &lt;meta name=&quot;description&quot; content=&quot;Web site created using create-react-app&quot;/&gt;\n    &lt;link rel=&quot;apple-touch-icon&quot; href=&quot;%PUBLIC_URL%/logo192.png&quot; /&gt;\n    &lt;link rel=&quot;manifest&quot; href=&quot;%PUBLIC_URL%/manifest.json&quot; /&gt;\n    &lt;title&gt;React App&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<pre><code>index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(&lt;App /&gt;, document.getElementById('root'));\n</code></pre>\n<pre><code>App.js\nimport React from 'react'\n\nconst App = () =&gt; {\n  return (\n    &lt;div&gt;\n        &lt;h1&gt;GPT-3&lt;/h1&gt;\n    &lt;/div&gt;\n  )\n}\n\nexport default App\n</code></pre>\n<p>Before starting this application, I tried the command <code>npx create react-app ./</code> to create the files needed, after that I used <code>npm install react-icons</code> and finally <code>npm start</code> but it's not working as I planned.</p>\n<p>npm -v\n9.7.2</p>\n<p>node -v\nv18.16.1</p>\n<p>Windows 11 -v\n22H2</p>\n<p>Chrome -v\n115.0.5790.102 (Compilação oficial) (64 bits)</p>\n<p>this message appears when I run the command <code>npm start</code>:\n<a href=\"https://i.stack.imgur.com/L48oR.png\" rel=\"nofollow noreferrer\"><code>npm start</code></a></p>\n"},{"tags":["java","css","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":29061971,"reputation":3,"user_id":22262405,"display_name":"maniek"},"score":0,"creation_date":1689930683,"post_id":76736602,"comment_id":135285818,"body_markdown":"Things that i have tried\n\n&lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{~/static/styles.css}&quot; /&gt;\n&lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/static/styles.css}&quot; /&gt;\n&lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/styles.css}&quot; /&gt;","body":"Things that i have tried  &lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{~/static/styles.css}&quot; /&gt; &lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/static/styles.css}&quot; /&gt; &lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/styles.css}&quot; /&gt;"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689930961,"post_id":76736602,"comment_id":135285868,"body_markdown":"You need to serve that static css file to the frontend somehow. It won&#39;t be magically available just because it&#39;s in the resources folder.","body":"You need to serve that static css file to the frontend somehow. It won&#39;t be magically available just because it&#39;s in the resources folder."}],"answers":[{"comments":[{"owner":{"account_id":29061971,"reputation":3,"user_id":22262405,"display_name":"maniek"},"score":0,"creation_date":1689932818,"post_id":76736719,"comment_id":135286231,"body_markdown":"thank you, spring security was the problem in this case","body":"thank you, spring security was the problem in this case"},{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1689935025,"post_id":76736719,"comment_id":135286645,"body_markdown":"Cool. Thanks for update.","body":"Cool. Thanks for update."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689931636,"creation_date":1689931636,"answer_id":76736719,"question_id":76736602,"body_markdown":"This is the correct syntax in your case:\r\n```\r\n&lt;link th:href=&quot;@{/styles.css}&quot; rel=&quot;stylesheet&quot; /&gt;\r\n```","title":"Spring Boot Thymeleaf not recognizing CSS file","body":"<p>This is the correct syntax in your case:</p>\n<pre><code>&lt;link th:href=&quot;@{/styles.css}&quot; rel=&quot;stylesheet&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29066902,"reputation":1,"user_id":22266274,"display_name":"Ashraf Ablia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689986347,"creation_date":1689986178,"answer_id":76741891,"question_id":76736602,"body_markdown":"i see you found the solution\r\nI will give some details as i found.\r\n\r\nWhen using thymeleaf, springboot, spring security\r\nthymeleaf cannot access css files because of spring security\r\n\r\n    `@Bean\r\n    public WebSecurityCustomizer webSecurityCustomizer() {\r\n        return (web) -&gt; web.ignoring().requestMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;);\r\n    }`\r\n\r\nWill solve the problem. It&#39;s work for me.","title":"Spring Boot Thymeleaf not recognizing CSS file","body":"<p>i see you found the solution\nI will give some details as i found.</p>\n<p>When using thymeleaf, springboot, spring security\nthymeleaf cannot access css files because of spring security</p>\n<pre><code>`@Bean\npublic WebSecurityCustomizer webSecurityCustomizer() {\n    return (web) -&gt; web.ignoring().requestMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;);\n}`\n</code></pre>\n<p>Will solve the problem. It's work for me.</p>\n"}],"owner":{"account_id":29061971,"reputation":3,"user_id":22262405,"display_name":"maniek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736719,"answer_count":2,"score":0,"last_activity_date":1689986347,"creation_date":1689930572,"question_id":76736602,"body_markdown":"The problem is that a thymeleaf does not find my css file\r\n\r\nProject structure\r\n[enter image description here](https://i.stack.imgur.com/fMHzK.png)\r\n\r\nI am able to access css file with given url http://localhost:8080/styles.css\r\n\r\nI use spring boot 3.1.1\r\n\r\n\r\n\r\n\r\nI have tried \r\n&lt;link href=&quot;/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/styles.css}&quot; /&gt;\r\nand\r\n&lt;link href=&quot;/static/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{/static/styles.css}&quot; /&gt;\r\nas well as \r\n&lt;link href=&quot;/static/styles.css&quot; rel=&quot;stylesheet&quot; th:href=&quot;@{~/static/styles.css}&quot; /&gt;\r\n\r\nTemplate does show correctly but css is not applied","title":"Spring Boot Thymeleaf not recognizing CSS file","body":"<p>The problem is that a thymeleaf does not find my css file</p>\n<p>Project structure\n<a href=\"https://i.stack.imgur.com/fMHzK.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I am able to access css file with given url http://localhost:8080/styles.css</p>\n<p>I use spring boot 3.1.1</p>\n<p>I have tried</p>\n\nand\n\nas well as \n\n<p>Template does show correctly but css is not applied</p>\n"},{"tags":["java","xml","bean-io"],"answers":[{"comments":[{"owner":{"account_id":27503478,"reputation":1,"user_id":20986652,"display_name":"james"},"score":0,"creation_date":1689990335,"post_id":76741852,"comment_id":135294791,"body_markdown":"Thank you so much for answering the question, but could you please provide an example on how to implement it to read/update the file?","body":"Thank you so much for answering the question, but could you please provide an example on how to implement it to read/update the file?"},{"owner":{"account_id":10043993,"reputation":76,"user_id":7426014,"display_name":"OpticalEngineering"},"score":0,"creation_date":1689994306,"post_id":76741852,"comment_id":135295003,"body_markdown":"Do you mean that you want to add xmlName attribute to the mapping file by java code, why?","body":"Do you mean that you want to add xmlName attribute to the mapping file by java code, why?"},{"owner":{"account_id":27503478,"reputation":1,"user_id":20986652,"display_name":"james"},"score":0,"creation_date":1689996940,"post_id":76741852,"comment_id":135295110,"body_markdown":"I want to create data using that XML mapping file, so if I do not update that file and add xmlName attribute using java, then in the data it will have the name of that tag from code?","body":"I want to create data using that XML mapping file, so if I do not update that file and add xmlName attribute using java, then in the data it will have the name of that tag from code?"},{"owner":{"account_id":27503478,"reputation":1,"user_id":20986652,"display_name":"james"},"score":0,"creation_date":1690037304,"post_id":76741852,"comment_id":135298504,"body_markdown":"I do not want to add into it, but how do I create data using the mapping file and then use the xmlName attribute set in the code","body":"I do not want to add into it, but how do I create data using the mapping file and then use the xmlName attribute set in the code"},{"owner":{"account_id":27503478,"reputation":1,"user_id":20986652,"display_name":"james"},"score":0,"creation_date":1690118014,"post_id":76741852,"comment_id":135305593,"body_markdown":"I know how to create data using mapping file. I need your help because I&#39;m going to read the same mapping file, but then for some field I will be using a different field name(xmlName) that I will define in the code. I need an example on how to set xmlName for a field inside the code. I do not want to update the mapping file, but I need to update the data that it is being created using the mapping file.","body":"I know how to create data using mapping file. I need your help because I&#39;m going to read the same mapping file, but then for some field I will be using a different field name(xmlName) that I will define in the code. I need an example on how to set xmlName for a field inside the code. I do not want to update the mapping file, but I need to update the data that it is being created using the mapping file."}],"tags":[],"owner":{"account_id":10043993,"reputation":76,"user_id":7426014,"display_name":"OpticalEngineering"},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689984901,"creation_date":1689984901,"answer_id":76741852,"question_id":76741755,"body_markdown":"you can refer to [BuilderApiAndAnnotations](http://beanio.org/2.1/docs/reference/index.html#BuilderApiAndAnnotations) and add xmlName attribute by [FieldBuilder#xmlName(String xmlName)](http://beanio.org/2.1/docs/api/org/beanio/builder/PropertyBuilderSupport.html#xmlName-java.lang.String-)","title":"How do I add xmlName attribute to a field in BeanIO using Java?","body":"<p>you can refer to <a href=\"http://beanio.org/2.1/docs/reference/index.html#BuilderApiAndAnnotations\" rel=\"nofollow noreferrer\">BuilderApiAndAnnotations</a> and add xmlName attribute by <a href=\"http://beanio.org/2.1/docs/api/org/beanio/builder/PropertyBuilderSupport.html#xmlName-java.lang.String-\" rel=\"nofollow noreferrer\">FieldBuilder#xmlName(String xmlName)</a></p>\n"}],"owner":{"account_id":27503478,"reputation":1,"user_id":20986652,"display_name":"james"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689984901,"creation_date":1689982425,"question_id":76741755,"body_markdown":"I am trying to add xmlName attribute to a field in my mapping file. Now I know I can add xmlName attribute to any field by adding it manually, but I want to know if it is possible to add it using Java code. \r\n\r\nHere is my mapping.xml file:\r\n```\r\nbeanio&gt;\r\n\r\n  &lt;stream name=&quot;employees&quot; format=&quot;xml&quot;&gt;\r\n    &lt;record name=&quot;employee&quot; class=&quot;example.Employee&quot;&gt;\r\n      &lt;field name=&quot;firstName&quot; /&gt;\r\n      &lt;field name=&quot;lastName&quot; /&gt;\r\n      &lt;field name=&quot;title&quot; /&gt;\r\n      &lt;field name=&quot;salary&quot; /&gt;\r\n      &lt;field name=&quot;hireDate&quot; type=&quot;date&quot; /&gt;\r\n    &lt;/record&gt;\r\n  &lt;/stream&gt;\r\n  \r\n&lt;/beanio&gt;\r\n```\r\n\r\nIn the above file, I want to set xmlName attribute for my field firstName as fName. I have looked through BeanIO documentation, but I did not see any method that would help me add xmlName attribute using Java. Is there any way to accomplish this?\r\n\r\nThank you for all the help.","title":"How do I add xmlName attribute to a field in BeanIO using Java?","body":"<p>I am trying to add xmlName attribute to a field in my mapping file. Now I know I can add xmlName attribute to any field by adding it manually, but I want to know if it is possible to add it using Java code.</p>\n<p>Here is my mapping.xml file:</p>\n<pre><code>beanio&gt;\n\n  &lt;stream name=&quot;employees&quot; format=&quot;xml&quot;&gt;\n    &lt;record name=&quot;employee&quot; class=&quot;example.Employee&quot;&gt;\n      &lt;field name=&quot;firstName&quot; /&gt;\n      &lt;field name=&quot;lastName&quot; /&gt;\n      &lt;field name=&quot;title&quot; /&gt;\n      &lt;field name=&quot;salary&quot; /&gt;\n      &lt;field name=&quot;hireDate&quot; type=&quot;date&quot; /&gt;\n    &lt;/record&gt;\n  &lt;/stream&gt;\n  \n&lt;/beanio&gt;\n</code></pre>\n<p>In the above file, I want to set xmlName attribute for my field firstName as fName. I have looked through BeanIO documentation, but I did not see any method that would help me add xmlName attribute using Java. Is there any way to accomplish this?</p>\n<p>Thank you for all the help.</p>\n"},{"tags":["java","postgresql","hibernate"],"comments":[{"owner":{"account_id":8402734,"reputation":1404,"user_id":6307292,"display_name":"mm759"},"score":0,"creation_date":1477583384,"post_id":40288995,"comment_id":67836301,"body_markdown":"Do you have a stack trace or error message?","body":"Do you have a stack trace or error message?"},{"owner":{"account_id":2040932,"reputation":151,"user_id":1822157,"accept_rate":92,"display_name":"Koz"},"score":0,"creation_date":1477585057,"post_id":40288995,"comment_id":67837380,"body_markdown":"@mm759 It doesn&#39;t generate any error messages. I can see the insert being performed in the hibernate logs, but the row is not being actually inserted in the database.","body":"@mm759 It doesn&#39;t generate any error messages. I can see the insert being performed in the hibernate logs, but the row is not being actually inserted in the database."},{"owner":{"account_id":8402734,"reputation":1404,"user_id":6307292,"display_name":"mm759"},"score":0,"creation_date":1477633917,"post_id":40288995,"comment_id":67855476,"body_markdown":"Doe you see the rollback in the locks that you believe in?","body":"Doe you see the rollback in the locks that you believe in?"}],"owner":{"account_id":2040932,"reputation":151,"user_id":1822157,"accept_rate":92,"display_name":"Koz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":725,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1689984780,"creation_date":1477583197,"question_id":40288995,"body_markdown":"I have a table in which there is an OID column for storing large objects, like this:\r\n\r\n    public class MyTable...{\r\n        @Lob\r\n\t    @Column(name = &quot;image&quot;)\r\n\t    private byte[] image;\r\n        ...\r\n    }\r\n\r\nI&#39;m tring to write the bytes to the image array and then persist the object, but this does not seem to be working. The object is not persisted to the database, so I assume the transaction is being rolledback somewhere during the process.\r\n\r\nIs it possible to write Large Objects like this? Or do I need to save the bytes as a file somewhere in the filesystem and then use the lo_import() function?","title":"How to write data to a Postgres OID column with Hibernate?","body":"<p>I have a table in which there is an OID column for storing large objects, like this:</p>\n<pre><code>public class MyTable...{\n    @Lob\n    @Column(name = &quot;image&quot;)\n    private byte[] image;\n    ...\n}\n</code></pre>\n<p>I'm tring to write the bytes to the image array and then persist the object, but this does not seem to be working. The object is not persisted to the database, so I assume the transaction is being rolledback somewhere during the process.</p>\n<p>Is it possible to write Large Objects like this? Or do I need to save the bytes as a file somewhere in the filesystem and then use the lo_import() function?</p>\n"},{"tags":["java","maven","cmd","jar"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690025214,"post_id":76741821,"comment_id":135297178,"body_markdown":"To run that jar standalone, you need a &#39;fat jar&#39; made with the Maven Shade or Maven Assembly plugin","body":"To run that jar standalone, you need a &#39;fat jar&#39; made with the Maven Shade or Maven Assembly plugin"}],"owner":{"account_id":21309766,"reputation":1,"user_id":15684366,"display_name":"Roseland"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689983946,"creation_date":1689983946,"question_id":76741821,"body_markdown":"I used mvn packaged my jar and tried to run jarfile in cmd.\r\nJava code works in my Intelliji IDEA but jarfile is not working in command line.\r\n\r\nI got a JNI error before so I edited the target bytecode version to 8 to comply my java runtime environment 1.8.0. So I got the following error:\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/WorkbookFactory\r\n        at main.Main.main\r\n    Caused by: java.lang.ClassNotFoundException: org.apache.poi.ss.usermodel.WorkbookFactory\r\n        at java.net.URLClassLoader.findClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n        at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\r\n        at java.lang.ClassLoader.loadClass(Unknown Source)\r\n        ... 1 more\r\n\r\n\r\nplease help, thanks!","title":"run jar in cmd NoClassDefFoundError: org/apache/poi/ss/usermodel/WorkbookFactory","body":"<p>I used mvn packaged my jar and tried to run jarfile in cmd.\nJava code works in my Intelliji IDEA but jarfile is not working in command line.</p>\n<p>I got a JNI error before so I edited the target bytecode version to 8 to comply my java runtime environment 1.8.0. So I got the following error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/poi/ss/usermodel/WorkbookFactory\n    at main.Main.main\nCaused by: java.lang.ClassNotFoundException: org.apache.poi.ss.usermodel.WorkbookFactory\n    at java.net.URLClassLoader.findClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)\n    at java.lang.ClassLoader.loadClass(Unknown Source)\n    ... 1 more\n</code></pre>\n<p>please help, thanks!</p>\n"},{"tags":["java","json","spring","spring-boot"],"comments":[{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1610964754,"post_id":65772301,"comment_id":116289573,"body_markdown":"What is `dsPersonHits`? What type does it have? To match the JSON, it should be a `List&lt;Map&lt;String, Object&gt;&gt;`. Since you only specified the type as `List`, it has to be a list of `Map`, not a list of some POJO. To get a `List&lt;MyPojo&gt;`, you need to tell the `exchange()` method that.","body":"What is <code>dsPersonHits</code>? What type does it have? To match the JSON, it should be a <code>List&lt;Map&lt;String, Object&gt;&gt;</code>. Since you only specified the type as <code>List</code>, it has to be a list of <code>Map</code>, not a list of some POJO. To get a <code>List&lt;MyPojo&gt;</code>, you need to tell the <code>exchange()</code> method that."}],"answers":[{"comments":[{"owner":{"account_id":11552567,"reputation":201,"user_id":8464673,"display_name":"Mike Oliver"},"score":0,"creation_date":1611011562,"post_id":65772722,"comment_id":116308963,"body_markdown":"Thanks,  I saw another post similar but the example was not clear, this was perfect.","body":"Thanks,  I saw another post similar but the example was not clear, this was perfect."}],"tags":[],"owner":{"account_id":19573912,"reputation":793,"user_id":14324416,"display_name":"jacky-neo"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689981606,"creation_date":1610965624,"answer_id":65772722,"question_id":65772301,"body_markdown":"This is an old question. Please use `ParameterizedTypeReference` to encapsulate result if using  generic type.\r\n\r\n```java\r\nimport org.springframework.core.ParameterizedTypeReference;\r\n\r\nParameterizedTypeReference&lt;List&lt;DSPerson&gt;&gt; ptr =\r\n\t\t\tnew ParameterizedTypeReference&lt;List&lt;DSPerson&gt;&gt;() {};\r\nList&lt;DSPerson&gt; dsPersonHits = null;\r\n\r\nHttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; entity = new HttpEntity&lt;&gt;(bimap, headers);\r\n    ResponseEntity&lt;List&lt;DSPerson&gt;&gt; response = null;\r\n    try {\r\n        response = restTemplate.exchange(&quot;http://localhost:8080/dsperson/getallmatching&quot;,\r\n                                  HttpMethod.POST,\r\n                                  entity,\r\n                                  ptr);\r\n        dsPersonHits = response.getBody();\r\n    } catch (RestClientException e) {\r\n        // TODO Auto-generated catch block\r\n        System.out.println(&quot;getMatches exception:&quot; + e.getLocalizedMessage());\r\n        e.printStackTrace();\r\n    }\r\n    //System.out.println(&quot;getMatches response:&quot; + response);\r\n    return dsPersonHits;\r\n\r\n```","title":"class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String","body":"<p>This is an old question. Please use <code>ParameterizedTypeReference</code> to encapsulate result if using  generic type.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.core.ParameterizedTypeReference;\n\nParameterizedTypeReference&lt;List&lt;DSPerson&gt;&gt; ptr =\n            new ParameterizedTypeReference&lt;List&lt;DSPerson&gt;&gt;() {};\nList&lt;DSPerson&gt; dsPersonHits = null;\n\nHttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; entity = new HttpEntity&lt;&gt;(bimap, headers);\n    ResponseEntity&lt;List&lt;DSPerson&gt;&gt; response = null;\n    try {\n        response = restTemplate.exchange(&quot;http://localhost:8080/dsperson/getallmatching&quot;,\n                                  HttpMethod.POST,\n                                  entity,\n                                  ptr);\n        dsPersonHits = response.getBody();\n    } catch (RestClientException e) {\n        // TODO Auto-generated catch block\n        System.out.println(&quot;getMatches exception:&quot; + e.getLocalizedMessage());\n        e.printStackTrace();\n    }\n    //System.out.println(&quot;getMatches response:&quot; + response);\n    return dsPersonHits;\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5225929,"reputation":179,"user_id":4177981,"accept_rate":50,"display_name":"James Webb"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1610966099,"creation_date":1610966099,"answer_id":65772842,"question_id":65772301,"body_markdown":"You need to serialize the response. There are a number of librarys that can help do this for you, for example Jackson or Gson.\r\n\r\nIn Jackson you might do:\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    String json = mapper.writeValueAsString(serializableObject);\r\n\r\nIn Gson you might do:\r\n\r\n    Gson gson = new Gson();\r\n    String json = gson.toJson(serializableObject);","title":"class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String","body":"<p>You need to serialize the response. There are a number of librarys that can help do this for you, for example Jackson or Gson.</p>\n<p>In Jackson you might do:</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nString json = mapper.writeValueAsString(serializableObject);\n</code></pre>\n<p>In Gson you might do:</p>\n<pre><code>Gson gson = new Gson();\nString json = gson.toJson(serializableObject);\n</code></pre>\n"}],"owner":{"account_id":11552567,"reputation":201,"user_id":8464673,"display_name":"Mike Oliver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17251,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689981737,"creation_date":1610963956,"question_id":65772301,"body_markdown":"I am fetching records from a Rest API with the following code...\r\n\r\n    HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; entity = new HttpEntity&lt;&gt;(bimap, headers);\r\n    \tResponseEntity&lt;List&gt; response = null;\r\n\t\ttry {\r\n\t\t\tresponse = restTemplate.exchange(&quot;http://localhost:8080/dsperson/getallmatching&quot;,\r\n\t\t\t                          HttpMethod.POST,\r\n\t\t\t                          entity,\r\n\t\t\t                          List.class);\r\n\t\t\tdsPersonHits = response.getBody();\r\n\t\t} catch (RestClientException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\tSystem.out.println(&quot;getMatches exception:&quot; + e.getLocalizedMessage());\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n    \tSystem.out.println(&quot;getMatches response:&quot; + response);\r\n        return dsPersonHits;\r\n\r\nHere are the logs.  It appears to be getting the JSON list ok but I am getting the following when I try to get at the json to build a List of `DSPerson` objects.\r\n\r\n    getMatches response:&lt;200,[{id=1, userName=, title=Mr., firstName=Abel, middleName=, lastName=Baker, suffix=, alias=HITMAN , birthday=, philSysNumber=PSN:12345, dataSource=BI, criminalCaseNumber=, caseDescription=invalid visa, caseStatus=Settled}, {id=2, userName=, title=Ms., firstName=Alice, middleName=, lastName=Baker, suffix=, alias=Alice , birthday=, philSysNumber=PSN:12346, dataSource=BI, criminalCaseNumber=, caseDescription=invalid visa, caseStatus=Settled}, {id=3, userName=, title=Mr., firstName=Abrahim, middleName=, lastName=Balous, suffix=, alias=Abe, birthday=, philSysNumber=, dataSource=DOJ, criminalCaseNumber=CCN:123456, caseDescription=Murder, caseStatus=Convicted}],[Content-Type:&quot;application/json&quot;, Transfer-Encoding:&quot;chunked&quot;, Date:&quot;Mon, 18 Jan 2021 09:30:26 GMT&quot;, Keep-Alive:&quot;timeout=60&quot;, Connection:&quot;keep-alive&quot;]&gt;\r\n    \r\n    Received Exception : class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String are in module java.base of loader &#39;bootstrap&#39;)\r\n    java.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String are in module java.base of loader &#39;bootstrap&#39;)\r\n    \tat gov.doj.indisearch.datasource.listener.JmsConsumer.onMessage(JmsConsumer.java:62)\r\n\r\nHow do I get at the JSON in the response?\r\n","title":"class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String","body":"<p>I am fetching records from a Rest API with the following code...</p>\n<pre><code>HttpEntity&lt;MultiValueMap&lt;String, String&gt;&gt; entity = new HttpEntity&lt;&gt;(bimap, headers);\n    ResponseEntity&lt;List&gt; response = null;\n    try {\n        response = restTemplate.exchange(&quot;http://localhost:8080/dsperson/getallmatching&quot;,\n                                  HttpMethod.POST,\n                                  entity,\n                                  List.class);\n        dsPersonHits = response.getBody();\n    } catch (RestClientException e) {\n        // TODO Auto-generated catch block\n        System.out.println(&quot;getMatches exception:&quot; + e.getLocalizedMessage());\n        e.printStackTrace();\n    }\n    System.out.println(&quot;getMatches response:&quot; + response);\n    return dsPersonHits;\n</code></pre>\n<p>Here are the logs.  It appears to be getting the JSON list ok but I am getting the following when I try to get at the json to build a List of <code>DSPerson</code> objects.</p>\n<pre><code>getMatches response:&lt;200,[{id=1, userName=, title=Mr., firstName=Abel, middleName=, lastName=Baker, suffix=, alias=HITMAN , birthday=, philSysNumber=PSN:12345, dataSource=BI, criminalCaseNumber=, caseDescription=invalid visa, caseStatus=Settled}, {id=2, userName=, title=Ms., firstName=Alice, middleName=, lastName=Baker, suffix=, alias=Alice , birthday=, philSysNumber=PSN:12346, dataSource=BI, criminalCaseNumber=, caseDescription=invalid visa, caseStatus=Settled}, {id=3, userName=, title=Mr., firstName=Abrahim, middleName=, lastName=Balous, suffix=, alias=Abe, birthday=, philSysNumber=, dataSource=DOJ, criminalCaseNumber=CCN:123456, caseDescription=Murder, caseStatus=Convicted}],[Content-Type:&quot;application/json&quot;, Transfer-Encoding:&quot;chunked&quot;, Date:&quot;Mon, 18 Jan 2021 09:30:26 GMT&quot;, Keep-Alive:&quot;timeout=60&quot;, Connection:&quot;keep-alive&quot;]&gt;\n\nReceived Exception : class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String are in module java.base of loader 'bootstrap')\njava.lang.ClassCastException: class java.util.LinkedHashMap cannot be cast to class java.lang.String (java.util.LinkedHashMap and java.lang.String are in module java.base of loader 'bootstrap')\n    at gov.doj.indisearch.datasource.listener.JmsConsumer.onMessage(JmsConsumer.java:62)\n</code></pre>\n<p>How do I get at the JSON in the response?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1689975421,"post_id":76740641,"comment_id":135293759,"body_markdown":"In order to fix the input programmatically you need to understand and enumerate the types of errors involved.  It may be that some errors cannot be unambiguously detected, in which case you may be out of luck.  In any event, none of your current approaches will work because you&#39;ll need to process the input stream yourself, and fix the errors, _before_ passing it to any &quot;standard&quot; parser.","body":"In order to fix the input programmatically you need to understand and enumerate the types of errors involved.  It may be that some errors cannot be unambiguously detected, in which case you may be out of luck.  In any event, none of your current approaches will work because you&#39;ll need to process the input stream yourself, and fix the errors, <i>before</i> passing it to any &quot;standard&quot; parser."},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1689981898,"post_id":76740641,"comment_id":135294362,"body_markdown":"To &quot;fix&quot; the problem you&#39;ll need to write a non-trivial parser that can detect problems and know how to fix them, which is basically a bad idea because it validates the source of the problem allowing, even encouraging, them to create bad output. IMHO the best approach is to reject invalid input which will force the producer to stop causing problems.","body":"To &quot;fix&quot; the problem you&#39;ll need to write a non-trivial parser that can detect problems and know how to fix them, which is basically a bad idea because it validates the source of the problem allowing, even encouraging, them to create bad output. IMHO the best approach is to reject invalid input which will force the producer to stop causing problems."},{"owner":{"account_id":8463393,"reputation":153,"user_id":6923588,"display_name":"Cyriac George"},"score":0,"creation_date":1689987893,"post_id":76740641,"comment_id":135294687,"body_markdown":"Yeah, I agree that fixing at the source is the best solution. I&#39;ll try for that","body":"Yeah, I agree that fixing at the source is the best solution. I&#39;ll try for that"}],"answers":[{"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689975538,"post_id":76740995,"comment_id":135293775,"body_markdown":"_&quot;format the JSON&quot;_ -- how (other than manually) would a formatter know what to do with `&quot;appName&quot;:&quot;Sample \\ &quot;App &quot;  Name&quot;,`?","body":"<i>&quot;format the JSON&quot;</i> -- how (other than manually) would a formatter know what to do with <code>&quot;appName&quot;:&quot;Sample \\ &quot;App &quot;  Name&quot;,</code>?"},{"owner":{"account_id":28850828,"reputation":512,"user_id":22096771,"display_name":"Bademeister"},"score":0,"creation_date":1689981462,"post_id":76740995,"comment_id":135294330,"body_markdown":"@JimGarrison I have my answer extended.","body":"@JimGarrison I have my answer extended."},{"owner":{"account_id":8463393,"reputation":153,"user_id":6923588,"display_name":"Cyriac George"},"score":0,"creation_date":1689987725,"post_id":76740995,"comment_id":135294679,"body_markdown":"@Bademeister While I have debugged it to understand what&#39;s being done and I do understand it to an extent I&#39;ll admit that it&#39;s doing some magic. I tried this code and it does work, but does it cover all the cases? Also, when I supply `sourceJson` to this code, the `cleanedJson` it produces looks more or less the same as the `sourceJson` except a couple of newlines are added. So, why does it work then?","body":"@Bademeister While I have debugged it to understand what&#39;s being done and I do understand it to an extent I&#39;ll admit that it&#39;s doing some magic. I tried this code and it does work, but does it cover all the cases? Also, when I supply <code>sourceJson</code> to this code, the <code>cleanedJson</code> it produces looks more or less the same as the <code>sourceJson</code> except a couple of newlines are added. So, why does it work then?"},{"owner":{"account_id":8463393,"reputation":153,"user_id":6923588,"display_name":"Cyriac George"},"score":0,"creation_date":1689988207,"post_id":76740995,"comment_id":135294701,"body_markdown":"BTW I found a way to break this logic. If we supply a properly escaped valid JSON to this logic, it doesn&#39;t produce the right result. For e.x. `sourceJson={&quot;appName&quot;: &quot;Sample :\\\\ \\&quot;App \\&quot; Name&quot;}`. It produces `Sample: &quot;App &quot; Name` but expected is `Sample:\\ &quot;App &quot; Name`","body":"BTW I found a way to break this logic. If we supply a properly escaped valid JSON to this logic, it doesn&#39;t produce the right result. For e.x. <code>sourceJson={&quot;appName&quot;: &quot;Sample :\\\\ \\&quot;App \\&quot; Name&quot;}</code>. It produces <code>Sample: &quot;App &quot; Name</code> but expected is <code>Sample:\\ &quot;App &quot; Name</code>"},{"owner":{"account_id":28850828,"reputation":512,"user_id":22096771,"display_name":"Bademeister"},"score":0,"creation_date":1689989957,"post_id":76740995,"comment_id":135294770,"body_markdown":"@CyriacGeorge As I wrote, it is a PoC. You have to add any cases yourself. But the best solution is to make sure that wellformed JSON is stored in the database.","body":"@CyriacGeorge As I wrote, it is a PoC. You have to add any cases yourself. But the best solution is to make sure that wellformed JSON is stored in the database."}],"tags":[],"owner":{"account_id":28850828,"reputation":512,"user_id":22096771,"display_name":"Bademeister"},"comment_count":5,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689981553,"creation_date":1689970710,"answer_id":76740995,"question_id":76740641,"body_markdown":"I think a regex could be quite complex because there is so much to consider. Specially if the JSON is not available wellformed. \r\n\r\n```json\r\n{&quot;appName&quot;: &quot;Sample \\ &quot;App &quot;  Name&quot;, &quot;foo&quot;\r\n: &quot;Bar App \\ &quot;Name&quot;,\r\n  &quot;test&quot;:[{&quot;a&quot;: &quot;b&quot;}]}\r\n```\r\n\r\nI would format the JSON and then process it line by line. With a RegEx or/and StringMethods you can then repair the values line by line.\r\n\r\n```json\r\n{\r\n&quot;appName&quot;:&quot;Sample \\ &quot;App &quot;  Name&quot;,\r\n&quot;foo&quot;:&quot;Bar App \\ &quot;Name&quot;, \r\n&quot;test&quot;:\r\n[\r\n{\r\n&quot;a&quot;:&quot;b&quot;\r\n}\r\n]\r\n}\r\n```\r\n\r\n\r\n**Example / Proof of Concept**\r\n\r\nYou will have to correct the JSON programmatically because otherwise no JSON parser will be able to process it. The following is a PoC. I would pursue it like this if I had this challenge. I don&#39;t know a library that fixes corrupt JSON. The question would be, how does the corrupt JSON get into your database?\r\n\r\n```java\r\nString corruptJson = &quot;{\\&quot;appName\\&quot;: \\&quot;Sample \\\\ \\&quot;App \\&quot;  Name\\&quot;, \\&quot;foo\\&quot;\\n&quot; +\r\n        &quot;: \\&quot;Bar App \\\\ \\&quot;Name\\&quot;,\\n&quot; +\r\n        &quot;  \\&quot;test\\&quot;:[{\\&quot;a\\&quot;: \\&quot;b\\&quot;}]}&quot;;\r\n\r\nString replacedJson = corruptJson\r\n        .replaceAll(&quot;[\\\\n\\\\s]*:[\\\\n\\\\s]*&quot;, &quot;:&quot;)\r\n        .replaceAll(&quot;([\\\\{\\\\},\\\\[\\\\]])&quot;, &quot;\\n$1\\n&quot;);\r\n\r\nStringBuilder cleanedJson = new StringBuilder();\r\nScanner scanner = new Scanner(replacedJson);\r\nwhile (scanner.hasNextLine()) {\r\n    String line = scanner.nextLine();\r\n    if (line.length() &gt; 0) {\r\n        int posDoublePoint = line.indexOf(&quot;:&quot;);\r\n        if (posDoublePoint &gt; 0) {\r\n            String key = line.substring(0, posDoublePoint);\r\n            String value = line.substring(posDoublePoint + 1).trim();\r\n            if (value.length() &gt; 0) {\r\n                value = value.replaceAll(&quot;^\\&quot;&quot;, &quot;&quot;);\r\n                value = value.replaceAll(&quot;\\&quot;$&quot;, &quot;&quot;);\r\n                value = value.replace(&quot;\\\\&quot;, &quot;&quot;);\r\n                value = value.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\r\n                cleanedJson.append(key).append(&quot;:&quot;).append(String.format(&quot;\\&quot;%s\\&quot;&quot;, value));\r\n                continue;\r\n            }\r\n        }\r\n        cleanedJson.append(line);\r\n    }\r\n}\r\nscanner.close();\r\n\r\nGson gson = new GsonBuilder().setPrettyPrinting().create();\r\nString prettyJson = gson.toJson(JsonParser.parseString(cleanedJson.toString()));\r\n```\r\n\r\n```json\r\n{\r\n  &quot;appName&quot;: &quot;Sample  \\&quot;App \\&quot;  Name&quot;,\r\n  &quot;foo&quot;: &quot;Bar App  \\&quot;Name&quot;,\r\n  &quot;test&quot;: [\r\n    {\r\n      &quot;a&quot;: &quot;b&quot;\r\n    }\r\n  ]\r\n}\r\n```","title":"How to correct an invalid JSON that contains unescaped special characters","body":"<p>I think a regex could be quite complex because there is so much to consider. Specially if the JSON is not available wellformed.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;appName&quot;: &quot;Sample \\ &quot;App &quot;  Name&quot;, &quot;foo&quot;\n: &quot;Bar App \\ &quot;Name&quot;,\n  &quot;test&quot;:[{&quot;a&quot;: &quot;b&quot;}]}\n</code></pre>\n<p>I would format the JSON and then process it line by line. With a RegEx or/and StringMethods you can then repair the values line by line.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n&quot;appName&quot;:&quot;Sample \\ &quot;App &quot;  Name&quot;,\n&quot;foo&quot;:&quot;Bar App \\ &quot;Name&quot;, \n&quot;test&quot;:\n[\n{\n&quot;a&quot;:&quot;b&quot;\n}\n]\n}\n</code></pre>\n<p><strong>Example / Proof of Concept</strong></p>\n<p>You will have to correct the JSON programmatically because otherwise no JSON parser will be able to process it. The following is a PoC. I would pursue it like this if I had this challenge. I don't know a library that fixes corrupt JSON. The question would be, how does the corrupt JSON get into your database?</p>\n<pre class=\"lang-java prettyprint-override\"><code>String corruptJson = &quot;{\\&quot;appName\\&quot;: \\&quot;Sample \\\\ \\&quot;App \\&quot;  Name\\&quot;, \\&quot;foo\\&quot;\\n&quot; +\n        &quot;: \\&quot;Bar App \\\\ \\&quot;Name\\&quot;,\\n&quot; +\n        &quot;  \\&quot;test\\&quot;:[{\\&quot;a\\&quot;: \\&quot;b\\&quot;}]}&quot;;\n\nString replacedJson = corruptJson\n        .replaceAll(&quot;[\\\\n\\\\s]*:[\\\\n\\\\s]*&quot;, &quot;:&quot;)\n        .replaceAll(&quot;([\\\\{\\\\},\\\\[\\\\]])&quot;, &quot;\\n$1\\n&quot;);\n\nStringBuilder cleanedJson = new StringBuilder();\nScanner scanner = new Scanner(replacedJson);\nwhile (scanner.hasNextLine()) {\n    String line = scanner.nextLine();\n    if (line.length() &gt; 0) {\n        int posDoublePoint = line.indexOf(&quot;:&quot;);\n        if (posDoublePoint &gt; 0) {\n            String key = line.substring(0, posDoublePoint);\n            String value = line.substring(posDoublePoint + 1).trim();\n            if (value.length() &gt; 0) {\n                value = value.replaceAll(&quot;^\\&quot;&quot;, &quot;&quot;);\n                value = value.replaceAll(&quot;\\&quot;$&quot;, &quot;&quot;);\n                value = value.replace(&quot;\\\\&quot;, &quot;&quot;);\n                value = value.replace(&quot;\\&quot;&quot;, &quot;\\\\\\&quot;&quot;);\n                cleanedJson.append(key).append(&quot;:&quot;).append(String.format(&quot;\\&quot;%s\\&quot;&quot;, value));\n                continue;\n            }\n        }\n        cleanedJson.append(line);\n    }\n}\nscanner.close();\n\nGson gson = new GsonBuilder().setPrettyPrinting().create();\nString prettyJson = gson.toJson(JsonParser.parseString(cleanedJson.toString()));\n</code></pre>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;appName&quot;: &quot;Sample  \\&quot;App \\&quot;  Name&quot;,\n  &quot;foo&quot;: &quot;Bar App  \\&quot;Name&quot;,\n  &quot;test&quot;: [\n    {\n      &quot;a&quot;: &quot;b&quot;\n    }\n  ]\n}\n</code></pre>\n"}],"owner":{"account_id":8463393,"reputation":153,"user_id":6923588,"display_name":"Cyriac George"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":140,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1689981553,"creation_date":1689966606,"question_id":76740641,"body_markdown":"### Context\r\nThe data source (DB) returns CLOB data on one of the columns. It&#39;s supposed to be a valid JSON and most of the time it is. But in certain cases, it may contain JSON-special characters such as `\\` or `&quot;`. \r\n\r\nFor e.x. sourceJson = \r\n```\r\n{\r\n  &quot;appName&quot;: &quot;Sample \\ &quot;App &quot; Name&quot;\r\n}\r\n```\r\n\r\n### Questions\r\nCorrecting this in the data source is probably the right approach. But if that&#39;s infeasible,\r\n1. How to correct an invalid JSON that contains unescaped special characters on the receiver side (Java)?\r\n2. I can handle `\\` by doing `String replaced = sourceJson.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);` but what about `&quot;`?\r\n3. If the only way is to manually replace, are there characters other than `\\`, `&quot;` that should be replaced this way?\r\n\r\n### What have I tried so far?\r\n1. Escape the source JSON using `org.apache.commons.lang3.StringEscapeUtils` and use that to deserialize\r\n```\r\nString escapeJson = StringEscapeUtils.escapeJson(sourceJson);\r\nGson gson = new Gson();\r\n\r\nMyObject obj = gson.fromJson(escapeJson, MyObject.class);\r\n// produces com.google.gson.stream.MalformedJsonException: Expected name at line 1 column 2 path $.appName=null\r\n```\r\n2. Use `com.fasterxml.jackson.core.io.JsonStringEncoder.getInstance().quoteAsString` and use that to deserialize\r\n```\r\nString quotedJson = String.valueOf(JsonStringEncoder.getInstance().quoteAsString(sourceJson));\r\n\r\nGson gson = new Gson();\r\nMyObject obj = gson.fromJson(quotedJson, MyObject.class);\r\n// produces com.google.gson.stream.MalformedJsonException: Expected name at line 1 column 2 path $.appName=null\r\n```\r\n3. Same as 1 except use ObjectMapper to deserialize\r\n```\r\nString escapeJson = StringEscapeUtils.escapeJson(sourceJson);\r\n\r\nObjectMapper objectMapper = JsonMapper.builder()\r\n          .enable(JsonReadFeature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER,\r\n              JsonReadFeature.ALLOW_UNESCAPED_CONTROL_CHARS)\r\n          .build();\r\nMyObject obj = objectMapper.readValue(escapeJson, MyObject.class);\r\n// produces Unexpected character (&#39;\\&#39; (code 92)): was expecting double-quote to start field name\r\n```\r\n4. Same as 2 except use ObjectMapper to deserialize\r\n```\r\nString quotedJson = String.valueOf(JsonStringEncoder.getInstance().quoteAsString(sourceJson));\r\n\r\nObjectMapper objectMapper = JsonMapper.builder()\r\n          .enable(JsonReadFeature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER,\r\n              JsonReadFeature.ALLOW_UNESCAPED_CONTROL_CHARS)\r\n          .build();\r\nMyObject obj = objectMapper.readValue(escapeJson, MyObject.class);\r\n// produces Unexpected character (&#39;\\&#39; (code 92)): was expecting double-quote to start field name\r\n```\r\n\r\n### Research Inferences\r\n1. I have looked at several SO posts but they all talk about escaping strings at the source side\r\n2. The only way I can think of making it work on the receiver side is by manually replacing it with some regexes. Replacing a single `\\` is easy (probably regex=`\\\\` should do). But I don&#39;t know how to replace a single/unterminated `&quot;` with regex\r\n","title":"How to correct an invalid JSON that contains unescaped special characters","body":"<h3>Context</h3>\n<p>The data source (DB) returns CLOB data on one of the columns. It's supposed to be a valid JSON and most of the time it is. But in certain cases, it may contain JSON-special characters such as <code>\\</code> or <code>&quot;</code>.</p>\n<p>For e.x. sourceJson =</p>\n<pre><code>{\n  &quot;appName&quot;: &quot;Sample \\ &quot;App &quot; Name&quot;\n}\n</code></pre>\n<h3>Questions</h3>\n<p>Correcting this in the data source is probably the right approach. But if that's infeasible,</p>\n<ol>\n<li>How to correct an invalid JSON that contains unescaped special characters on the receiver side (Java)?</li>\n<li>I can handle <code>\\</code> by doing <code>String replaced = sourceJson.replace(&quot;\\\\&quot;, &quot;\\\\\\\\&quot;);</code> but what about <code>&quot;</code>?</li>\n<li>If the only way is to manually replace, are there characters other than <code>\\</code>, <code>&quot;</code> that should be replaced this way?</li>\n</ol>\n<h3>What have I tried so far?</h3>\n<ol>\n<li>Escape the source JSON using <code>org.apache.commons.lang3.StringEscapeUtils</code> and use that to deserialize</li>\n</ol>\n<pre><code>String escapeJson = StringEscapeUtils.escapeJson(sourceJson);\nGson gson = new Gson();\n\nMyObject obj = gson.fromJson(escapeJson, MyObject.class);\n// produces com.google.gson.stream.MalformedJsonException: Expected name at line 1 column 2 path $.appName=null\n</code></pre>\n<ol start=\"2\">\n<li>Use <code>com.fasterxml.jackson.core.io.JsonStringEncoder.getInstance().quoteAsString</code> and use that to deserialize</li>\n</ol>\n<pre><code>String quotedJson = String.valueOf(JsonStringEncoder.getInstance().quoteAsString(sourceJson));\n\nGson gson = new Gson();\nMyObject obj = gson.fromJson(quotedJson, MyObject.class);\n// produces com.google.gson.stream.MalformedJsonException: Expected name at line 1 column 2 path $.appName=null\n</code></pre>\n<ol start=\"3\">\n<li>Same as 1 except use ObjectMapper to deserialize</li>\n</ol>\n<pre><code>String escapeJson = StringEscapeUtils.escapeJson(sourceJson);\n\nObjectMapper objectMapper = JsonMapper.builder()\n          .enable(JsonReadFeature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER,\n              JsonReadFeature.ALLOW_UNESCAPED_CONTROL_CHARS)\n          .build();\nMyObject obj = objectMapper.readValue(escapeJson, MyObject.class);\n// produces Unexpected character ('\\' (code 92)): was expecting double-quote to start field name\n</code></pre>\n<ol start=\"4\">\n<li>Same as 2 except use ObjectMapper to deserialize</li>\n</ol>\n<pre><code>String quotedJson = String.valueOf(JsonStringEncoder.getInstance().quoteAsString(sourceJson));\n\nObjectMapper objectMapper = JsonMapper.builder()\n          .enable(JsonReadFeature.ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER,\n              JsonReadFeature.ALLOW_UNESCAPED_CONTROL_CHARS)\n          .build();\nMyObject obj = objectMapper.readValue(escapeJson, MyObject.class);\n// produces Unexpected character ('\\' (code 92)): was expecting double-quote to start field name\n</code></pre>\n<h3>Research Inferences</h3>\n<ol>\n<li>I have looked at several SO posts but they all talk about escaping strings at the source side</li>\n<li>The only way I can think of making it work on the receiver side is by manually replacing it with some regexes. Replacing a single <code>\\</code> is easy (probably regex=<code>\\\\</code> should do). But I don't know how to replace a single/unterminated <code>&quot;</code> with regex</li>\n</ol>\n"},{"tags":["java","android","spring","classcastexception","resttemplate"],"comments":[{"owner":{"account_id":1590928,"reputation":484,"user_id":1474261,"accept_rate":75,"display_name":"Emilla"},"score":1,"creation_date":1398065534,"post_id":19463372,"comment_id":35473992,"body_markdown":"Hi Erick, have you found any solution for your problem? I have almost same problem too","body":"Hi Erick, have you found any solution for your problem? I have almost same problem too"},{"owner":{"account_id":435701,"reputation":1565,"user_id":822436,"display_name":"Deepankar Sarkar"},"score":1,"creation_date":1425891472,"post_id":19463372,"comment_id":46131281,"body_markdown":"This answer helped me out to solve the issue. https://stackoverflow.com/a/15453159/822436","body":"This answer helped me out to solve the issue. <a href=\"https://stackoverflow.com/a/15453159/822436\">stackoverflow.com/a/15453159/822436</a>"},{"owner":{"account_id":2102746,"reputation":1414,"user_id":1869908,"accept_rate":56,"display_name":"Robin Sun"},"score":0,"creation_date":1563934483,"post_id":19463372,"comment_id":100861178,"body_markdown":"There is some way to convert List&lt;LinkedHashMap&gt; to List&lt;MyModelClass&gt;. But why it doesn&#39;t throw any exception when restTemplate retruns List&lt;LinkedHashMap&gt; and assgin it to myModelClass[]? They are differnt types. Why?","body":"There is some way to convert List&lt;LinkedHashMap&gt; to List&lt;MyModelClass&gt;. But why it doesn&#39;t throw any exception when restTemplate retruns List&lt;LinkedHashMap&gt; and assgin it to myModelClass[]? They are differnt types. Why?"}],"answers":[{"tags":[],"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"comment_count":0,"down_vote_count":0,"up_vote_count":64,"is_accepted":true,"score":64,"last_activity_date":1461885539,"creation_date":1382167690,"answer_id":19463586,"question_id":19463372,"body_markdown":"With the following method call\r\n\r\n    List&lt;MyModelClass&gt; myModelClass=(List&lt;MyModelClass&gt;) restTemplate.postForObject(url,mvm,List.class);\r\n\r\nAll Jackson knows is that you want a `List`, but doesn&#39;t have any restriction on the type. By default Jackson deserializes a JSON object into a `LinkedHashMap`, so that&#39;s why you are getting the `ClassCastException`. \r\n\r\nIf your returned JSON is an array, one way to get it is to use an array\r\n\r\n    MyModelClass[] myModelClasses = restTemplate.postForObject(url,mvm, MyModelClass[].class);\r\n\r\nYou can always add the elements from that array to a `List`.\r\n\r\nI can&#39;t remember since what version, but [`RestTemplate#exchange`][1] now has an overload that accepts a [`ParameterizedTypeReference`][2] argument. The `ParameterizedTypeReference` is the type token hack for suggesting a parameterized type as the target for deserialization.\r\n\r\nYou can refactor the code above to use `exchange` instead of `postForObject`, and use `ParameterizedTypeReference` to get a `List&lt;MyModelClass&gt;`. For example\r\n\r\n    ParameterizedTypeReference&lt;List&lt;MyModelClass&gt;&gt; typeRef = new ParameterizedTypeReference&lt;List&lt;MyModelClass&gt;&gt;() {\r\n    };\r\n    ResponseEntity&lt;List&lt;MyModelClass&gt;&gt; responseEntity = restTemplate.exchange(url, HttpMethod.POST, new HttpEntity&lt;&gt;(mvm), typeRef);\r\n    List&lt;MyModelClass&gt; myModelClasses = responseEntity.getBody();\r\n\r\n\r\n  [1]: http://docs.spring.io/autorepo/docs/spring/current/javadoc-api/org/springframework/web/client/RestTemplate.html#exchange-java.lang.String-org.springframework.http.HttpMethod-org.springframework.http.HttpEntity-org.springframework.core.ParameterizedTypeReference-java.lang.Object...-\r\n  [2]: http://docs.spring.io/autorepo/docs/spring/current/javadoc-api/org/springframework/core/ParameterizedTypeReference.html","title":"ClassCastException: RestTemplate returning List&lt;LinkedHashMap&gt; instead of List&lt;MymodelClass&gt;","body":"<p>With the following method call</p>\n\n<pre><code>List&lt;MyModelClass&gt; myModelClass=(List&lt;MyModelClass&gt;) restTemplate.postForObject(url,mvm,List.class);\n</code></pre>\n\n<p>All Jackson knows is that you want a <code>List</code>, but doesn't have any restriction on the type. By default Jackson deserializes a JSON object into a <code>LinkedHashMap</code>, so that's why you are getting the <code>ClassCastException</code>. </p>\n\n<p>If your returned JSON is an array, one way to get it is to use an array</p>\n\n<pre><code>MyModelClass[] myModelClasses = restTemplate.postForObject(url,mvm, MyModelClass[].class);\n</code></pre>\n\n<p>You can always add the elements from that array to a <code>List</code>.</p>\n\n<p>I can't remember since what version, but <a href=\"http://docs.spring.io/autorepo/docs/spring/current/javadoc-api/org/springframework/web/client/RestTemplate.html#exchange-java.lang.String-org.springframework.http.HttpMethod-org.springframework.http.HttpEntity-org.springframework.core.ParameterizedTypeReference-java.lang.Object...-\"><code>RestTemplate#exchange</code></a> now has an overload that accepts a <a href=\"http://docs.spring.io/autorepo/docs/spring/current/javadoc-api/org/springframework/core/ParameterizedTypeReference.html\"><code>ParameterizedTypeReference</code></a> argument. The <code>ParameterizedTypeReference</code> is the type token hack for suggesting a parameterized type as the target for deserialization.</p>\n\n<p>You can refactor the code above to use <code>exchange</code> instead of <code>postForObject</code>, and use <code>ParameterizedTypeReference</code> to get a <code>List&lt;MyModelClass&gt;</code>. For example</p>\n\n<pre><code>ParameterizedTypeReference&lt;List&lt;MyModelClass&gt;&gt; typeRef = new ParameterizedTypeReference&lt;List&lt;MyModelClass&gt;&gt;() {\n};\nResponseEntity&lt;List&lt;MyModelClass&gt;&gt; responseEntity = restTemplate.exchange(url, HttpMethod.POST, new HttpEntity&lt;&gt;(mvm), typeRef);\nList&lt;MyModelClass&gt; myModelClasses = responseEntity.getBody();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15246195,"reputation":633,"user_id":11001003,"display_name":"Chiranjaya Denuwan"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1647842962,"creation_date":1647842962,"answer_id":71553407,"question_id":19463372,"body_markdown":"With the following method call , you can convert `LinkedHashMap` to `List`\r\n\r\n\r\n    ObjectMapper mapper = new  ObjectMapper();\r\n    List&lt;Object&gt; list = mapper.convertValue(listResponse, new TypeReference&lt;List&lt;Object&gt;&gt;() {})","title":"ClassCastException: RestTemplate returning List&lt;LinkedHashMap&gt; instead of List&lt;MymodelClass&gt;","body":"<p>With the following method call , you can convert <code>LinkedHashMap</code> to <code>List</code></p>\n<pre><code>ObjectMapper mapper = new  ObjectMapper();\nList&lt;Object&gt; list = mapper.convertValue(listResponse, new TypeReference&lt;List&lt;Object&gt;&gt;() {})\n</code></pre>\n"}],"owner":{"account_id":2188422,"reputation":715,"user_id":1936227,"accept_rate":40,"display_name":"Erick"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44945,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":19463586,"answer_count":2,"score":50,"last_activity_date":1689981329,"creation_date":1382166043,"question_id":19463372,"body_markdown":"I&#39;m trying to access getter methods on my MyModelClass but my code is returning `List&lt;LinkedHashMap&gt;` instead of `List&lt;MyModelClass&gt;`. This is my code.\r\n\r\n    List&lt;MyModelClass&gt; myModelClass = \r\n       (List&lt;MyModelClass&gt;) restTemplate.postForObject(url,mvm,List.class);\r\n\r\n    System.out.println(&quot;Response= &quot; +  myModelClass);\r\n\r\nI tried to print the response and I got the JSON Response that I&#39;m expecting. \r\nbut when I tried to run this code.\r\n\r\n    System.out.println(&quot;Response= &quot; +  myModelClass.get(0).getMessage());\r\n\r\n\r\nIt will produce this error.\r\n\r\n    java.lang.ClassCastException: \r\n    java.util.LinkedHashMap cannot be cast to com.XXX.XXX.MyModelClass \r\n\r\nIt is a mismatch. Can someone help me to get rid with this error? thanks.\r\n\r\nMyModelClass\r\n\r\n    public class MyModelClass{\r\n    \t\t\r\n    \t/**\r\n    \t * \r\n    \t */\r\n    \t@JsonProperty(&quot;id&quot;)\r\n    \tpublic String id;\r\n    \t\r\n    \t@JsonProperty(&quot;type&quot;)\r\n    \tpublic String type;\r\n    \t\r\n    \t@JsonProperty(&quot;user&quot;)\r\n    \tpublic String user;\r\n    \t\r\n    \t@JsonProperty(&quot;message&quot;)\r\n    \tpublic String message;\r\n\r\n        //getters\r\n\r\n\r\nError for \r\n\r\n    MyModelClass[] myModelClass= restTemplate.postForObject(url,mvm, myModelClass[].class);\r\n    \r\n    org.springframework.http.converter.HttpMessageNotReadableException:\r\n    Could not read JSON: \r\n    Can not deserialize instance of java.util.ArrayList out of START_OBJECT token\r\n\r\nJSON Response Structure\r\n\r\n        \r\n        [{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;,&quot;parameters&quot;:{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;,&quot;key3&quot;:&quot;value3&quot;,&quot;key4&quot;:&quot;value4&quot;,&quot;key5&quot;:&quot;value5&quot;}},\r\n    {&quot;key12&quot;:&quot;value12&quot;,&quot;key22&quot;:&quot;value22&quot;,&quot;parameters&quot;:{&quot;key12&quot;:&quot;value12&quot;,&quot;key22&quot;:&quot;value22&quot;,&quot;key32&quot;:&quot;value32&quot;,&quot;key42&quot;:&quot;value42&quot;,&quot;key52&quot;:&quot;value52&quot;}}]\r\n\r\nIf there is any suggestion on how to map this kind of JSON Response in RestTemplate,It would help a lot. thanks\r\n\r\n","title":"ClassCastException: RestTemplate returning List&lt;LinkedHashMap&gt; instead of List&lt;MymodelClass&gt;","body":"<p>I'm trying to access getter methods on my MyModelClass but my code is returning <code>List&lt;LinkedHashMap&gt;</code> instead of <code>List&lt;MyModelClass&gt;</code>. This is my code.</p>\n<pre><code>List&lt;MyModelClass&gt; myModelClass = \n   (List&lt;MyModelClass&gt;) restTemplate.postForObject(url,mvm,List.class);\n\nSystem.out.println(&quot;Response= &quot; +  myModelClass);\n</code></pre>\n<p>I tried to print the response and I got the JSON Response that I'm expecting.\nbut when I tried to run this code.</p>\n<pre><code>System.out.println(&quot;Response= &quot; +  myModelClass.get(0).getMessage());\n</code></pre>\n<p>It will produce this error.</p>\n<pre><code>java.lang.ClassCastException: \njava.util.LinkedHashMap cannot be cast to com.XXX.XXX.MyModelClass \n</code></pre>\n<p>It is a mismatch. Can someone help me to get rid with this error? thanks.</p>\n<p>MyModelClass</p>\n<pre><code>public class MyModelClass{\n        \n    /**\n     * \n     */\n    @JsonProperty(&quot;id&quot;)\n    public String id;\n    \n    @JsonProperty(&quot;type&quot;)\n    public String type;\n    \n    @JsonProperty(&quot;user&quot;)\n    public String user;\n    \n    @JsonProperty(&quot;message&quot;)\n    public String message;\n\n    //getters\n</code></pre>\n<p>Error for</p>\n<pre><code>MyModelClass[] myModelClass= restTemplate.postForObject(url,mvm, myModelClass[].class);\n\norg.springframework.http.converter.HttpMessageNotReadableException:\nCould not read JSON: \nCan not deserialize instance of java.util.ArrayList out of START_OBJECT token\n</code></pre>\n<p>JSON Response Structure</p>\n<pre><code>    [{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;,&quot;parameters&quot;:{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;,&quot;key3&quot;:&quot;value3&quot;,&quot;key4&quot;:&quot;value4&quot;,&quot;key5&quot;:&quot;value5&quot;}},\n{&quot;key12&quot;:&quot;value12&quot;,&quot;key22&quot;:&quot;value22&quot;,&quot;parameters&quot;:{&quot;key12&quot;:&quot;value12&quot;,&quot;key22&quot;:&quot;value22&quot;,&quot;key32&quot;:&quot;value32&quot;,&quot;key42&quot;:&quot;value42&quot;,&quot;key52&quot;:&quot;value52&quot;}}]\n</code></pre>\n<p>If there is any suggestion on how to map this kind of JSON Response in RestTemplate,It would help a lot. thanks</p>\n"},{"tags":["java","tree"],"comments":[{"owner":{"account_id":3415784,"reputation":60457,"user_id":2864740,"accept_rate":78,"display_name":"user2864740"},"score":0,"creation_date":1385519960,"post_id":20232858,"comment_id":30174309,"body_markdown":"Create a stack - either explicitly or implicitly (as with recursion). This stack will contain the path.","body":"Create a stack - either explicitly or implicitly (as with recursion). This stack will contain the path."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1385519961,"post_id":20232858,"comment_id":30174310,"body_markdown":"`SearchTreeNode` is the same class as `Node`?","body":"<code>SearchTreeNode</code> is the same class as <code>Node</code>?"},{"owner":{"account_id":3592546,"reputation":241,"user_id":2998228,"accept_rate":20,"display_name":"user2998228"},"score":0,"creation_date":1385520052,"post_id":20232858,"comment_id":30174329,"body_markdown":"Sorry yes it is. I changed it.","body":"Sorry yes it is. I changed it."}],"answers":[{"comments":[{"owner":{"account_id":3592546,"reputation":241,"user_id":2998228,"accept_rate":20,"display_name":"user2998228"},"score":0,"creation_date":1385520200,"post_id":20232929,"comment_id":30174362,"body_markdown":"They only point to their children. I can&#39;t figure out how to effectively keep track of the current path","body":"They only point to their children. I can&#39;t figure out how to effectively keep track of the current path"}],"tags":[],"owner":{"account_id":165453,"reputation":1984,"user_id":388928,"accept_rate":71,"display_name":"Ari"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1385520985,"creation_date":1385520157,"answer_id":20232929,"question_id":20232858,"body_markdown":"If the nodes only point to their children, you&#39;ll need to keep track of each path on the way down. As mentioned in comment, you can do this with your own stack or with recursion. For example, you could always return find() call on the children of each node.\r\n\r\nIf the nodes point both ways, you can easily re-trace the path up once you find the correct node. ","title":"Find path to node in Tree?","body":"<p>If the nodes only point to their children, you'll need to keep track of each path on the way down. As mentioned in comment, you can do this with your own stack or with recursion. For example, you could always return find() call on the children of each node.</p>\n\n<p>If the nodes point both ways, you can easily re-trace the path up once you find the correct node. </p>\n"},{"tags":[],"owner":{"account_id":2277179,"reputation":2924,"user_id":2003136,"accept_rate":50,"display_name":"Easton L."},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1436000665,"creation_date":1385520866,"answer_id":20233033,"question_id":20232858,"body_markdown":"passing a list tracking the path, once find the node, exit the recursion and fill the path one by one.\r\n\r\n        Boolean Search(Node node, String value, List&lt;Node&gt; track)\r\n        {\r\n            if (node == null) return false;\r\n\r\n            if (node.data.equals(value))\r\n            {\r\n                track.add(node);\r\n                return true;\r\n            }\r\n    \r\n            for(Node child : node.children)\r\n            {\r\n                if (Search(child, value, track)\r\n                {\r\n                    track.add(0, node);\r\n                    return true;\r\n                }\r\n            }\r\n    \r\n            return false;\r\n        }","title":"Find path to node in Tree?","body":"<p>passing a list tracking the path, once find the node, exit the recursion and fill the path one by one.</p>\n\n<pre><code>    Boolean Search(Node node, String value, List&lt;Node&gt; track)\n    {\n        if (node == null) return false;\n\n        if (node.data.equals(value))\n        {\n            track.add(node);\n            return true;\n        }\n\n        for(Node child : node.children)\n        {\n            if (Search(child, value, track)\n            {\n                track.add(0, node);\n                return true;\n            }\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1979692,"reputation":41,"user_id":1776604,"display_name":"Neha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1486566400,"creation_date":1486565184,"answer_id":42116209,"question_id":20232858,"body_markdown":"The following code traces the path, adding nodes to the list and removing them if they are not in the path  \r\n \r\n    boolean getPath(Node root,String targetValue,List&lt;Integer&gt; path)\r\n    {\r\n        // base case root is null so path not available\r\n        if(root==null)\r\n            return false;\r\n        //add the data to the path\r\n        path.add(root.getData());\r\n        //if the root has data return true,path already saved\r\n        if(root.getData().equals(targetValue))\r\n            return true;\r\n        //find the value in all the children\r\n        for(Node child: children){\r\n             if(getPath(child,targetValue,path))\r\n              return true;\r\n        }\r\n        //if this node does not exist in path remove it\r\n        path.remove(path.size()-1);\r\n        return false;\r\n    }","title":"Find path to node in Tree?","body":"<p>The following code traces the path, adding nodes to the list and removing them if they are not in the path  </p>\n\n<pre><code>boolean getPath(Node root,String targetValue,List&lt;Integer&gt; path)\n{\n    // base case root is null so path not available\n    if(root==null)\n        return false;\n    //add the data to the path\n    path.add(root.getData());\n    //if the root has data return true,path already saved\n    if(root.getData().equals(targetValue))\n        return true;\n    //find the value in all the children\n    for(Node child: children){\n         if(getPath(child,targetValue,path))\n          return true;\n    }\n    //if this node does not exist in path remove it\n    path.remove(path.size()-1);\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10343557,"reputation":1253,"user_id":7629178,"display_name":"vedavyasa k"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689980992,"creation_date":1689980992,"answer_id":76741683,"question_id":20232858,"body_markdown":"\tprivate static boolean treePathFinderRecurr(Node root, List&lt;Character&gt; path,Character target){\r\n\t\t\r\n\t\tif(root == null) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tif(root.data == target || (treePathFinderRecurr(root.left,path,target) || treePathFinderRecurr(root.right,path,target))) {\r\n\t\t\tpath.add(root.data);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}","title":"Find path to node in Tree?","body":"<pre><code>private static boolean treePathFinderRecurr(Node root, List&lt;Character&gt; path,Character target){\n    \n    if(root == null) {\n        return false;\n    }\n    \n    if(root.data == target || (treePathFinderRecurr(root.left,path,target) || treePathFinderRecurr(root.right,path,target))) {\n        path.add(root.data);\n        return true;\n    }\n    \n    return false;\n    \n}\n</code></pre>\n"}],"owner":{"account_id":3592546,"reputation":241,"user_id":2998228,"accept_rate":20,"display_name":"user2998228"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12435,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":4,"score":5,"last_activity_date":1689980992,"creation_date":1385519680,"question_id":20232858,"body_markdown":"I have a tree class that looks like:\r\n\r\n    Class Tree {\r\n       Node root;\r\n       Node curNode;\r\n       public List&lt;String&gt; find(String value) {\r\n          if (curNode == null) curNode = root;\r\n            for (Node child : curNode.children) {\r\n                if (found == false) {\r\n                    if (child.data.equals(value)) {\r\n                        // if it finds it return the path to this node.\r\n                    }\r\n                    curNode = child;\r\n                    findDFS(value);\r\n                }\r\n            }\r\n       }\r\n    \r\n\r\n    class Node {\r\n       List&lt;Node&gt; children;\r\n       String data;\r\n    }\r\n\r\nWhere the tree root contains pointers to children nodes which point to other children etc etc. What I&#39;m having problems with is once it finds the node, I need to return the the path to that node.\r\n    ","title":"Find path to node in Tree?","body":"<p>I have a tree class that looks like:</p>\n\n<pre><code>Class Tree {\n   Node root;\n   Node curNode;\n   public List&lt;String&gt; find(String value) {\n      if (curNode == null) curNode = root;\n        for (Node child : curNode.children) {\n            if (found == false) {\n                if (child.data.equals(value)) {\n                    // if it finds it return the path to this node.\n                }\n                curNode = child;\n                findDFS(value);\n            }\n        }\n   }\n\n\nclass Node {\n   List&lt;Node&gt; children;\n   String data;\n}\n</code></pre>\n\n<p>Where the tree root contains pointers to children nodes which point to other children etc etc. What I'm having problems with is once it finds the node, I need to return the the path to that node.</p>\n"},{"tags":["java","openrewrite"],"comments":[{"owner":{"account_id":2119809,"reputation":50969,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1689979401,"post_id":76741547,"comment_id":135294170,"body_markdown":"I don&#39;t see any such method in the documentation; maybe I missed it.  Why do you think that exists?","body":"I don&#39;t see any such method in the documentation; maybe I missed it.  Why do you think that exists?"}],"answers":[{"comments":[{"owner":{"account_id":29044519,"reputation":3,"user_id":22248665,"display_name":"Bhavya Penumarthi"},"score":0,"creation_date":1689980273,"post_id":76741619,"comment_id":135294242,"body_markdown":"I dont have a proper understanding of template that was given in the documentation, can you suggest me in my case, how I. need to proceed.","body":"I dont have a proper understanding of template that was given in the documentation, can you suggest me in my case, how I. need to proceed."},{"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"score":0,"creation_date":1690199436,"post_id":76741619,"comment_id":135315502,"body_markdown":"Continued here: https://github.com/openrewrite/rewrite-logging-frameworks/issues/111","body":"Continued here: <a href=\"https://github.com/openrewrite/rewrite-logging-frameworks/issues/111\" rel=\"nofollow noreferrer\">github.com/openrewrite/rewrite-logging-frameworks/issues/111</a>"}],"tags":[],"owner":{"account_id":21852,"reputation":19896,"user_id":53444,"accept_rate":70,"display_name":"Tim"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689979502,"creation_date":1689979502,"answer_id":76741619,"question_id":76741547,"body_markdown":"You&#39;ll likely want to [look at JavaTemplate instead][1] of JavaParser. That has an API to actually create the LST elements that you need here.\r\n\r\n\r\n  [1]: https://docs.openrewrite.org/authoring-recipes/modifying-methods-with-javatemplate","title":"Facing Error while creating a custom recipe to add log level guard","body":"<p>You'll likely want to <a href=\"https://docs.openrewrite.org/authoring-recipes/modifying-methods-with-javatemplate\" rel=\"nofollow noreferrer\">look at JavaTemplate instead</a> of JavaParser. That has an API to actually create the LST elements that you need here.</p>\n"}],"owner":{"account_id":29044519,"reputation":3,"user_id":22248665,"display_name":"Bhavya Penumarthi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689979502,"creation_date":1689978034,"question_id":76741547,"body_markdown":"I am trying to create a snippet using Java parser to add a if block.\r\n\r\n```java\r\nExpression condition = JavaParser.buildSnippet(\r\n    String.format(&quot;if (logger.%sEnabled())&quot;, logLevel)\r\n    ).get(0);\r\n```\r\n\r\nFor the above code, I am getting error in buildSnippet() method, stating its not found. I am using jdk 17 with rewrite-version 6.1.15\r\n\r\nI am expecting an alternative for JavaParser.buildSnippet() method","title":"Facing Error while creating a custom recipe to add log level guard","body":"<p>I am trying to create a snippet using Java parser to add a if block.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Expression condition = JavaParser.buildSnippet(\n    String.format(&quot;if (logger.%sEnabled())&quot;, logLevel)\n    ).get(0);\n</code></pre>\n<p>For the above code, I am getting error in buildSnippet() method, stating its not found. I am using jdk 17 with rewrite-version 6.1.15</p>\n<p>I am expecting an alternative for JavaParser.buildSnippet() method</p>\n"},{"tags":["java","mysql","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":5973669,"reputation":6765,"user_id":4695271,"accept_rate":69,"display_name":"x80486"},"score":1,"creation_date":1548757559,"post_id":54418827,"comment_id":95647374,"body_markdown":"What&#39;s the result if you don&#39;t use `?serverTimezone=UTC` in the connection string?","body":"What&#39;s the result if you don&#39;t use <code>?serverTimezone=UTC</code> in the connection string?"},{"owner":{"account_id":3339332,"reputation":694,"user_id":2805930,"accept_rate":19,"display_name":"Hareesh"},"score":0,"creation_date":1548757865,"post_id":54418827,"comment_id":95647573,"body_markdown":"whats type of column in the table?","body":"whats type of column in the table?"},{"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"score":0,"creation_date":1548759938,"post_id":54418827,"comment_id":95648868,"body_markdown":"@Hareesh the column is of type date.","body":"@Hareesh the column is of type date."},{"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"score":0,"creation_date":1548760052,"post_id":54418827,"comment_id":95648933,"body_markdown":"@x80486 without `?serverTimezone=UTC` throws `Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value &#39;Jerusalem Standard Time&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.`","body":"@x80486 without <code>?serverTimezone=UTC</code> throws <code>Caused by: com.mysql.cj.exceptions.InvalidConnectionAttributeException: The server time zone value &#39;Jerusalem Standard Time&#39; is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.</code>"},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1548760140,"post_id":54418827,"comment_id":95648984,"body_markdown":"So what&#39;s the value in the database?","body":"So what&#39;s the value in the database?"},{"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"score":0,"creation_date":1548763954,"post_id":54418827,"comment_id":95651225,"body_markdown":"@AlanHay the value in the database is `2019-01-28`. When save&amp;return by `coupon = repository.saveAndFlush(...)` the date is still `2019-01-29` passing first two assertEquals(...). But, when retrieve from database by `Coupon returned = repository.findByName(...)` the date is changed to `2019-01-28` in both fields and the database.","body":"@AlanHay the value in the database is <code>2019-01-28</code>. When save&amp;return by <code>coupon = repository.saveAndFlush(...)</code> the date is still <code>2019-01-29</code> passing first two assertEquals(...). But, when retrieve from database by <code>Coupon returned = repository.findByName(...)</code> the date is changed to <code>2019-01-28</code> in both fields and the database."},{"owner":{"account_id":1434762,"reputation":22772,"user_id":1356423,"accept_rate":65,"display_name":"Alan Hay"},"score":0,"creation_date":1548765166,"post_id":54418827,"comment_id":95651921,"body_markdown":"Coupon and the coupon returned by saveAndFlush are the same instance so that is not really telling you anything. The first 2 asserts are against the in-memory model and tells you nothing about the database. Your issue is almost certainly around timezones.","body":"Coupon and the coupon returned by saveAndFlush are the same instance so that is not really telling you anything. The first 2 asserts are against the in-memory model and tells you nothing about the database. Your issue is almost certainly around timezones."},{"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"score":0,"creation_date":1548768544,"post_id":54418827,"comment_id":95654102,"body_markdown":"@AlanHay Thank you I wasn&#39;t aware of that. Misunderstood the repository.save()/.saveAndFlush() functions. Thought they return the object from database after save with generated primary key.    Tested with different dates and all return a day earlier e.g. saving `2019-02-03` becomes `2019-02-02` in db.  \n  Does this help to find the timezone issue ? `SELECT @@GLOBAL.time_zone, @@session.time_zone, @@system_time_zone;` result `SYSTEM\tSYSTEM\tJerusalem Standard Time`.  Additionally, used `SELECT TIMEDIFF(NOW(), UTC_TIMESTAMP) as GMT_TIME_DIFF;` result `02:00:00`","body":"@AlanHay Thank you I wasn&#39;t aware of that. Misunderstood the repository.save()/.saveAndFlush() functions. Thought they return the object from database after save with generated primary key.    Tested with different dates and all return a day earlier e.g. saving <code>2019-02-03</code> becomes <code>2019-02-02</code> in db.     Does this help to find the timezone issue ? <code>SELECT @@GLOBAL.time_zone, @@session.time_zone, @@system_time_zone;</code> result <code>SYSTEM\tSYSTEM\tJerusalem Standard Time</code>.  Additionally, used <code>SELECT TIMEDIFF(NOW(), UTC_TIMESTAMP) as GMT_TIME_DIFF;</code> result <code>02:00:00</code>"},{"owner":{"account_id":8201951,"reputation":1790,"user_id":9424793,"display_name":"Andr&#233; Pacheco"},"score":0,"creation_date":1549545486,"post_id":54418827,"comment_id":95946207,"body_markdown":"I&#39;m facing the same problem and this solution doesn&#39;t work for me. I described what&#39;s happening [here](https://stackoverflow.com/questions/54561638/date-issue-in-spring-boot-data-rest). If you guys have some hint, I&#39;ll appreciate hearing that.","body":"I&#39;m facing the same problem and this solution doesn&#39;t work for me. I described what&#39;s happening <a href=\"https://stackoverflow.com/questions/54561638/date-issue-in-spring-boot-data-rest\">here</a>. If you guys have some hint, I&#39;ll appreciate hearing that."}],"answers":[{"tags":[],"owner":{"account_id":11255785,"reputation":21,"user_id":8255638,"display_name":"Jorik Kozor&#243;h"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1548777055,"creation_date":1548777055,"answer_id":54424813,"question_id":54418827,"body_markdown":"I Have the same problem in Wildfly 13, this is my datasource:\r\n\r\n           &lt;datasource jndi-name=&quot;java:/comp/env/isobit&quot; pool-name=&quot;isobit-dev&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/isobit?zeroDateTimeBehavior=convertToNull&amp;amp;useUnicode=true&amp;amp;useJDBCCompliantTimezoneShift=true&amp;amp;useLegacyDatetimeCode=false&amp;amp;serverTimezone=UTC&lt;/connection-url&gt;\r\n                    &lt;driver&gt;mysql-connector-java-8.0.13.jar&lt;/driver&gt;\r\n                 \r\nThen change the driver to mysql-connector-java-5.1.23-bin.jar and in my standalone.xml\r\n\r\n                 &lt;datasource jndi-name=&quot;java:/comp/env/isobit&quot; pool-name=&quot;isobit-dev&quot; enabled=&quot;true&quot; use-java-context=&quot;true&quot;&gt;\r\n                    &lt;connection-url&gt;jdbc:mysql://localhost:3306/isobit?zeroDateTimeBehavior=convertToNull&lt;/connection-url&gt;\r\n                    &lt;driver&gt;mysql-connector-java-5.1.23-bin.jar&lt;/driver&gt;\r\n                    &lt;security&gt;\r\n                        &lt;user-name&gt;root&lt;/user-name&gt;\r\n                        &lt;password&gt;root&lt;/password&gt;\r\n                    &lt;/security&gt;\r\n                &lt;/datasource&gt;\r\n\r\nNow the dates are the right. \r\n","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>I Have the same problem in Wildfly 13, this is my datasource:</p>\n\n<pre><code>       &lt;datasource jndi-name=\"java:/comp/env/isobit\" pool-name=\"isobit-dev\" enabled=\"true\" use-java-context=\"true\"&gt;\n                &lt;connection-url&gt;jdbc:mysql://localhost:3306/isobit?zeroDateTimeBehavior=convertToNull&amp;amp;useUnicode=true&amp;amp;useJDBCCompliantTimezoneShift=true&amp;amp;useLegacyDatetimeCode=false&amp;amp;serverTimezone=UTC&lt;/connection-url&gt;\n                &lt;driver&gt;mysql-connector-java-8.0.13.jar&lt;/driver&gt;\n</code></pre>\n\n<p>Then change the driver to mysql-connector-java-5.1.23-bin.jar and in my standalone.xml</p>\n\n<pre><code>             &lt;datasource jndi-name=\"java:/comp/env/isobit\" pool-name=\"isobit-dev\" enabled=\"true\" use-java-context=\"true\"&gt;\n                &lt;connection-url&gt;jdbc:mysql://localhost:3306/isobit?zeroDateTimeBehavior=convertToNull&lt;/connection-url&gt;\n                &lt;driver&gt;mysql-connector-java-5.1.23-bin.jar&lt;/driver&gt;\n                &lt;security&gt;\n                    &lt;user-name&gt;root&lt;/user-name&gt;\n                    &lt;password&gt;root&lt;/password&gt;\n                &lt;/security&gt;\n            &lt;/datasource&gt;\n</code></pre>\n\n<p>Now the dates are the right. </p>\n"},{"tags":[],"owner":{"account_id":3339332,"reputation":694,"user_id":2805930,"accept_rate":19,"display_name":"Hareesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1548829033,"creation_date":1548829033,"answer_id":54434379,"question_id":54418827,"body_markdown":"I think its because of Timezone problem. Locale Date do not consider the timezone as you already know. But In the database, I guess the date is associated with Timezone. The JPA/Hibernate layer will convert the LocaleDate to TimeStamp( default it will take JVM timezone during the conversion ). The timezone that your running the application is different from the database timezone, due to this there is mismatch.\r\n\r\nTo confirm on this, set the timezone of the running machine to UTC.","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>I think its because of Timezone problem. Locale Date do not consider the timezone as you already know. But In the database, I guess the date is associated with Timezone. The JPA/Hibernate layer will convert the LocaleDate to TimeStamp( default it will take JVM timezone during the conversion ). The timezone that your running the application is different from the database timezone, due to this there is mismatch.</p>\n\n<p>To confirm on this, set the timezone of the running machine to UTC.</p>\n"},{"comments":[{"owner":{"account_id":2055939,"reputation":2208,"user_id":1833705,"display_name":"Rafael Renan Pacheco"},"score":0,"creation_date":1561564140,"post_id":54436027,"comment_id":100108772,"body_markdown":"This solution is better than the others because it doesn&#39;t target your Java project which already works perfectly with LocalDate / LocalDateTime. Instead it aims to configure the database to set a proper timezone. Since I use docker-compose to boot a development mysql server, I use the `--default-time-zone=America/Sao_Paulo` configuration which solve this issue at the mysql level, not at the Java level.","body":"This solution is better than the others because it doesn&#39;t target your Java project which already works perfectly with LocalDate / LocalDateTime. Instead it aims to configure the database to set a proper timezone. Since I use docker-compose to boot a development mysql server, I use the <code>--default-time-zone=America&#47;Sao_Paulo</code> configuration which solve this issue at the mysql level, not at the Java level."}],"tags":[],"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1548836360,"creation_date":1548836360,"answer_id":54436027,"question_id":54418827,"body_markdown":"Thanks for your help. As noted and answered above, it was a **Timezone issue**. \n\n## Solution: ##\n1. Set in MySQL `SET GLOBAL time_zone = &#39;+02:00&#39;;&quot;;`\n2. Remove `?serverTimezone=UTC` from `spring.datasource.url=jdbc:mysql://localhost:3306/schema_name`\n\nFound these MySQL commands useful:\n`SELECT @@GLOBAL.time_zone, @@session.time_zone, @@system_time_zone;` and \n`SELECT TIMEDIFF(NOW(), UTC_TIMESTAMP) as GMT_TIME_DIFF;`\n\nAdditional information &lt;https://stackoverflow.com/questions/19023978/should-mysql-have-its-timezone-set-to-utc/19075291#19075291&gt; and in the [MySQL Documentaion](https://dev.mysql.com/doc/mysql-g11n-excerpt/5.7/en/time-zone-support.html).\n \n### Workaround ###\nAs answered above, changing the Spring Boot default `mysql-connector-java` in *pom.xml*:\n```\n&lt;dependency&gt;\n &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.47&lt;/&gt;\n&lt;/dependency&gt;\n```\nAnd the driver to `spring.datasource.driverClassName=com.mysql.jdbc.Driver` in *properties* file also returned the proper date. ","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>Thanks for your help. As noted and answered above, it was a <strong>Timezone issue</strong>.</p>\n<h2>Solution:</h2>\n<ol>\n<li>Set in MySQL <code>SET GLOBAL time_zone = '+02:00';&quot;;</code></li>\n<li>Remove <code>?serverTimezone=UTC</code> from <code>spring.datasource.url=jdbc:mysql://localhost:3306/schema_name</code></li>\n</ol>\n<p>Found these MySQL commands useful:\n<code>SELECT @@GLOBAL.time_zone, @@session.time_zone, @@system_time_zone;</code> and\n<code>SELECT TIMEDIFF(NOW(), UTC_TIMESTAMP) as GMT_TIME_DIFF;</code></p>\n<p>Additional information <a href=\"https://stackoverflow.com/questions/19023978/should-mysql-have-its-timezone-set-to-utc/19075291#19075291\">Should MySQL have its timezone set to UTC?</a> and in the <a href=\"https://dev.mysql.com/doc/mysql-g11n-excerpt/5.7/en/time-zone-support.html\" rel=\"nofollow noreferrer\">MySQL Documentaion</a>.</p>\n<h3>Workaround</h3>\n<p>As answered above, changing the Spring Boot default <code>mysql-connector-java</code> in <em>pom.xml</em>:</p>\n<pre><code>&lt;dependency&gt;\n &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.47&lt;/&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And the driver to <code>spring.datasource.driverClassName=com.mysql.jdbc.Driver</code> in <em>properties</em> file also returned the proper date.</p>\n"},{"tags":[],"owner":{"account_id":12663702,"reputation":11,"user_id":9203726,"display_name":"livingobjects"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1565585229,"creation_date":1565585229,"answer_id":57455753,"question_id":54418827,"body_markdown":"Convert the Date field to TimeStamp will fix the issue and make sure you pass the timezone through spring properties file\r\n\r\nspring.jpa.properties.hibernate.jdbc.time_zone=GMT+10\r\n","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>Convert the Date field to TimeStamp will fix the issue and make sure you pass the timezone through spring properties file</p>\n\n<p>spring.jpa.properties.hibernate.jdbc.time_zone=GMT+10</p>\n"},{"comments":[{"owner":{"account_id":9632497,"reputation":1292,"user_id":7149835,"display_name":"ZINE Mahmoud"},"score":0,"creation_date":1642362994,"post_id":58521666,"comment_id":125045378,"body_markdown":"working like a charm thanks buddy !!!!","body":"working like a charm thanks buddy !!!!"}],"tags":[],"owner":{"account_id":13483170,"reputation":521,"user_id":9727794,"display_name":"hamza saber"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1571829505,"creation_date":1571829505,"answer_id":58521666,"question_id":54418827,"body_markdown":"In my country, the time is GMT+1 and I had the same issue.\r\n\r\nWhat i did first is `serverTimezone=GMT+1` which gives me error.\r\n\r\nBut JDBC uses a so-called &quot;connection URL&quot;, so you can escape &quot;+&quot; by &quot;%2B&quot;, that is\r\n\r\n    db.url=jdbc:mysql://localhost:3306/MyDB?useSSL=false&amp;serverTimezone=GMT%2B1&amp;useLegacyDatetimeCode=false\r\n\r\nP.S: check this [Why useLegacyDatetimeCode=false][1] to unserstand more.\r\n\r\nHope it helps someone. If it does don&#39;t forget to Up Vote this.\r\n\r\n\r\n  [1]: https://www.baeldung.com/mysql-jdbc-timezone-spring-boot","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>In my country, the time is GMT+1 and I had the same issue.</p>\n\n<p>What i did first is <code>serverTimezone=GMT+1</code> which gives me error.</p>\n\n<p>But JDBC uses a so-called \"connection URL\", so you can escape \"+\" by \"%2B\", that is</p>\n\n<pre><code>db.url=jdbc:mysql://localhost:3306/MyDB?useSSL=false&amp;serverTimezone=GMT%2B1&amp;useLegacyDatetimeCode=false\n</code></pre>\n\n<p>P.S: check this <a href=\"https://www.baeldung.com/mysql-jdbc-timezone-spring-boot\" rel=\"nofollow noreferrer\">Why useLegacyDatetimeCode=false</a> to unserstand more.</p>\n\n<p>Hope it helps someone. If it does don't forget to Up Vote this.</p>\n"},{"comments":[{"owner":{"account_id":9705583,"reputation":765,"user_id":7199110,"accept_rate":42,"display_name":"tyro"},"score":0,"creation_date":1591788837,"post_id":60906163,"comment_id":110187662,"body_markdown":"I had set other properties related to timeZone except spring.jpa.properties.hibernate.jdbc.time_zone and by adding this property now date is being saved in correct timeZone","body":"I had set other properties related to timeZone except spring.jpa.properties.hibernate.jdbc.time_zone and by adding this property now date is being saved in correct timeZone"},{"owner":{"account_id":11011803,"reputation":91,"user_id":8088909,"display_name":"Pumpanickel"},"score":0,"creation_date":1626429759,"post_id":60906163,"comment_id":120896258,"body_markdown":"Setting spring.datasource.url=jdbc:mysql://localhost:3306/database?serverTimezone=Europe/Warsaw for the datasource worked for me and was the perfect solution, since I have multiple datasources, which can have different timezones. Thanks for the solution","body":"Setting spring.datasource.url=jdbc:mysql://localhost:3306/database?s&zwnj;&#8203;erverTimezone=Europe&zwnj;&#8203;/Warsaw for the datasource worked for me and was the perfect solution, since I have multiple datasources, which can have different timezones. Thanks for the solution"}],"tags":[],"owner":{"account_id":11657675,"reputation":996,"user_id":8536903,"display_name":"Lukk17s"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1585424916,"creation_date":1585424916,"answer_id":60906163,"question_id":54418827,"body_markdown":"If your timezone is for example \r\n\r\n    Europe/Warsaw\r\n\r\nyou can set:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/database?serverTimezone=Europe/Warsaw\r\n\r\ninstead of this:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/database?serverTimezone=UTC\r\n\r\nbut you can also add one more entry in application.properties:\r\n\r\n    spring.jpa.properties.hibernate.jdbc.time_zone=Europe/Warsaw","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>If your timezone is for example </p>\n\n<pre><code>Europe/Warsaw\n</code></pre>\n\n<p>you can set:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/database?serverTimezone=Europe/Warsaw\n</code></pre>\n\n<p>instead of this:</p>\n\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/database?serverTimezone=UTC\n</code></pre>\n\n<p>but you can also add one more entry in application.properties:</p>\n\n<pre><code>spring.jpa.properties.hibernate.jdbc.time_zone=Europe/Warsaw\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9228721,"reputation":1203,"user_id":6855603,"display_name":"estn"},"score":4,"creation_date":1589272342,"post_id":61678763,"comment_id":109219656,"body_markdown":"solved with: spring.datasource.hikari.data-source-properties.cacheDefaultTimezone=false","body":"solved with: spring.datasource.hikari.data-source-properties.cacheDefault&zwnj;&#8203;Timezone=false"},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1627883103,"post_id":61678763,"comment_id":121265099,"body_markdown":"I would include the `cacheDefaultTimezone` solution in your actual answer.  It&#39;s probably a better workaround than downgrading the library, so having it in the answer would be beneficial.","body":"I would include the <code>cacheDefaultTimezone</code> solution in your actual answer.  It&#39;s probably a better workaround than downgrading the library, so having it in the answer would be beneficial."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1689978458,"post_id":61678763,"comment_id":135294086,"body_markdown":"I&#39;ve updated this answer with the actual solution used by the answerer, per their comment.","body":"I&#39;ve updated this answer with the actual solution used by the answerer, per their comment."}],"tags":[],"owner":{"account_id":9228721,"reputation":1203,"user_id":6855603,"display_name":"estn"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689978391,"creation_date":1588939472,"answer_id":61678763,"question_id":54418827,"body_markdown":"This issue occured again in Spring Boot 2.2.7 - root cause seems to be bug in MySQL Connector version 8.0.20. \r\n\r\nI reported this to Oracle: https://bugs.mysql.com/bug.php?id=99487\r\n\r\nPer the bug, the issue can be worked around by setting `cacheDefaultTimezone=false`.\r\n\r\nAlternatively, downgrading to MySQL Connector to 8.0.19 works:\r\n\r\n```lang-xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t&lt;version&gt;8.0.19&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>This issue occured again in Spring Boot 2.2.7 - root cause seems to be bug in MySQL Connector version 8.0.20.</p>\n<p>I reported this to Oracle: <a href=\"https://bugs.mysql.com/bug.php?id=99487\" rel=\"nofollow noreferrer\">https://bugs.mysql.com/bug.php?id=99487</a></p>\n<p>Per the bug, the issue can be worked around by setting <code>cacheDefaultTimezone=false</code>.</p>\n<p>Alternatively, downgrading to MySQL Connector to 8.0.19 works:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;version&gt;8.0.19&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17254818,"reputation":169,"user_id":12494167,"display_name":"Shaikh Nazish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596654301,"creation_date":1596654301,"answer_id":63271935,"question_id":54418827,"body_markdown":"To solve this issue we simply have to set the server timezone to UTC as the timezone differs at every place.\r\n\r\nAdd or update the following line in application.properties file:\r\n\r\n**spring.datasource.url=jdbc:mysql://localhost:3306/test_coupon_system?serverTimezone=UTC**","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p>To solve this issue we simply have to set the server timezone to UTC as the timezone differs at every place.</p>\n<p>Add or update the following line in application.properties file:</p>\n<p><strong>spring.datasource.url=jdbc:mysql://localhost:3306/test_coupon_system?serverTimezone=UTC</strong></p>\n"},{"tags":[],"owner":{"account_id":155681,"reputation":7205,"user_id":372496,"accept_rate":86,"display_name":"Ganesh Krishnan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611676893,"creation_date":1611676893,"answer_id":65904767,"question_id":54418827,"body_markdown":"**Timezone mismatch** between your Java code which runs on your Local Timezone vs MySQL which is in UTC timezone.\r\n\r\nDepending on your timezone this day difference only happens during specific hours when your day is different from UTC.\r\n\r\nChange the connection string in MySQL to the same timezone as your computer.\r\n","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<p><strong>Timezone mismatch</strong> between your Java code which runs on your Local Timezone vs MySQL which is in UTC timezone.</p>\n<p>Depending on your timezone this day difference only happens during specific hours when your day is different from UTC.</p>\n<p>Change the connection string in MySQL to the same timezone as your computer.</p>\n"}],"owner":{"account_id":13824888,"reputation":143,"user_id":9979475,"display_name":"George"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11081,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":54434379,"answer_count":9,"score":9,"last_activity_date":1689978391,"creation_date":1548757434,"question_id":54418827,"body_markdown":"### I have encountered a problem with a date field/database column while using Spring&#39;s JpaRepository to save an entity to MySQL. ###\nThe entity has LocalDate fields. When testing with LocalDate.now(), encountered a problem with the returned Date field:\n\n1. First save the returned object&#39;s date is correct. \n2. When return the object from MySQL database the date is a day before\n\nExample:\n\nExpected :2019-01-29\n\nActual   :2019-01-28\n\n\nI have tried it yesterday and results were:\n\nExpected :2019-01-28\n\nActual   :2019-01-27\n\nMaybe similar to the this &lt;https://stackoverflow.com/questions/41938999/jpa-saving-wrong-date-in-mysql-database&gt;\n\n### Code ###\n**application-mysql-test-connection.properties**\n```\nspring.jpa.hibernate.ddl-auto=create\n\n# Database url\nspring.datasource.url=jdbc:mysql://localhost:3306/test_coupon_system?serverTimezone=UTC\n\nspring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\n\n# Test Database credentials\nspring.datasource.username=springuser\nspring.datasource.password=springuser\n\n### showing values - for development\nspring.jpa.show-sql=true\n```\n**Coupon** removed constructor &amp; getter/setter for brevity \n```\n@Entity\npublic class Coupon {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;, length = 45)\n    private long id;\n\n\n    @Column(name = &quot;name&quot;, unique = true, nullable = false, length = 45)\n    private String name;\n\n    @Column(name = &quot;description&quot;, length = 100)\n    private String description;\n\n    @Column(name = &quot;imageLocation&quot;)\n    private String imageLocation;\n\n    @Column(name = &quot;startDate&quot;, length = 45)\n    private LocalDate startDate;\n\n    @Column(name = &quot;endDate&quot;, length = 45)\n    private LocalDate endDate;\n\n    @ManyToOne(cascade = CascadeType.PERSIST)\n    @JoinColumn(name = &quot;company_id&quot;)\n    private Company company;\n\n    @ManyToMany(cascade = CascadeType.PERSIST,fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;customer_coupon&quot;,\n            joinColumns = @JoinColumn(name = &quot;coupon_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;customer_id&quot;)\n    )\n    private List&lt;Customer&gt; customers;\n```\n**CouponRepository**\n```\n@Repository\npublic interface CouponRepository extends JpaRepository&lt;Coupon, Long&gt; {\n\n    Coupon findByName(String name);\n}\n```\n\n**Test Class** with printout\n```\n@SpringBootTest\n@TestPropertySource(locations = {\n        &quot;classpath:application-mysql-test-connection.properties&quot;,\n})\npublic class CouponDateIT {\n\n    @Autowired\n    private CouponRepository repository;\n\n    @BeforeEach\n    void setUp() {\n        repository.deleteAll();\n    }\n\n    @Test\n    void returnsLocalDate() {\n        LocalDate testDate = LocalDate.now();\n\n        DateTime.now();\n        Coupon coupon = new Coupon();\n        String couponName = &quot;test1&quot;;\n        coupon.setName(couponName);\n        coupon.setStartDate(LocalDate.now());\n        coupon.setEndDate(LocalDate.now());\n        coupon = repository.saveAndFlush(coupon);\n\n        System.out.println(&quot;===&gt; test date &quot; + testDate);\n        System.out.println(&quot;===&gt; coupon from db &quot; + coupon);\n\n        assertEquals(testDate, coupon.getStartDate());\n        assertEquals(testDate, coupon.getEndDate());\n\n        Coupon returned = repository.findByName(couponName);\n        System.out.println(&quot;===&gt; after save &quot; + returned);\n        assertEquals(testDate, returned.getStartDate());\n        assertEquals(testDate, returned.getEndDate());\n    }\n```\n\n**Failing Test**\n```\nHibernate: select coupon0_.id as id1_1_, coupon0_.company_id as company_7_1_, coupon0_.description as descript2_1_, coupon0_.end_date as end_date3_1_, coupon0_.image_location as image_lo4_1_, coupon0_.name as name5_1_, coupon0_.start_date as start_da6_1_ from coupon coupon0_\nHibernate: select next_val as id_val from hibernate_sequence for update\nHibernate: update hibernate_sequence set next_val= ? where next_val=?\nHibernate: insert into coupon (company_id, description, end_date, image_location, name, start_date, id) values (?, ?, ?, ?, ?, ?, ?)\n===&gt; test date 2019-01-29\n===&gt; coupon from db Coupon{id=1, name=&#39;test1&#39;, description=&#39;null&#39;, imageLocation=&#39;null&#39;, startDate=2019-01-29, endDate=2019-01-29}\nHibernate: select coupon0_.id as id1_1_, coupon0_.company_id as company_7_1_, coupon0_.description as descript2_1_, coupon0_.end_date as end_date3_1_, coupon0_.image_location as image_lo4_1_, coupon0_.name as name5_1_, coupon0_.start_date as start_da6_1_ from coupon coupon0_ where coupon0_.name=?\nHibernate: select customers0_.coupon_id as coupon_i2_3_0_, customers0_.customer_id as customer1_3_0_, customer1_.id as id1_2_1_, customer1_.email as email2_2_1_, customer1_.name as name3_2_1_ from customer_coupon customers0_ inner join customer customer1_ on customers0_.customer_id=customer1_.id where customers0_.coupon_id=?\n===&gt; after save Coupon{id=1, name=&#39;test1&#39;, description=&#39;null&#39;, imageLocation=&#39;null&#39;, startDate=2019-01-28, endDate=2019-01-28}\n\njava.lang.AssertionError: expected:&lt;2019-01-29&gt; but was:&lt;2019-01-28&gt;\nExpected :2019-01-29\nActual   :2019-01-28\n```\n\n**Log before test with**\n```\n2019-01-29 11:26:07.986  INFO 6576 --- [           main] g.f.d.s.database.CouponDateIT            : No active profile set, falling back to default profiles: default\n2019-01-29 11:26:09.235  INFO 6576 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\n2019-01-29 11:26:09.308  INFO 6576 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73ms. Found 3 repository interfaces.\n2019-01-29 11:26:09.762  INFO 6576 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean &#39;org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration&#39; of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$70fe81c1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2019-01-29 11:26:09.981  INFO 6576 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2019-01-29 11:26:10.894  INFO 6576 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2019-01-29 11:26:10.957  INFO 6576 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\n    name: default\n    ...]\n2019-01-29 11:26:11.019  INFO 6576 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.7.Final}\n2019-01-29 11:26:11.019  INFO 6576 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2019-01-29 11:26:11.191  INFO 6576 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\n2019-01-29 11:26:11.341  INFO 6576 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2019-01-29 11:26:11.591  WARN 6576 --- [           main] org.hibernate.mapping.RootClass          : HHH000038: Composite-id class does not override equals(): .entity.Customer_Coupon\n2019-01-29 11:26:11.591  WARN 6576 --- [           main] org.hibernate.mapping.RootClass          : HHH000039: Composite-id class does not override hashCode(): .entity.Customer_Coupon\nHibernate: drop table if exists company\nHibernate: drop table if exists coupon\nHibernate: drop table if exists customer\nHibernate: drop table if exists customer_coupon\nHibernate: drop table if exists hibernate_sequence\nHibernate: create table company (id bigint not null, email varchar(45) not null, name varchar(45) not null, password varchar(45) not null, primary key (id)) engine=MyISAM\nHibernate: alter table company add constraint UK_bma9lv19ba3yjwf12a34xord3 unique (email)\nHibernate: alter table company add constraint UK_niu8sfil2gxywcru9ah3r4ec5 unique (name)\nHibernate: create table coupon (id bigint not null, description varchar(100), end_date date, image_location varchar(255), name varchar(45) not null, start_date date, company_id bigint, primary key (id)) engine=MyISAM\nHibernate: create table customer (id integer not null, email varchar(45) not null, name varchar(45) not null, primary key (id)) engine=MyISAM\nHibernate: create table customer_coupon (customer_id bigint not null, coupon_id bigint not null, primary key (customer_id, coupon_id)) engine=MyISAM\nHibernate: create table hibernate_sequence (next_val bigint) engine=MyISAM\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: alter table coupon add constraint UK_dfikvnp7dxdfishfvpnlc0xc1 unique (name)\nHibernate: alter table customer add constraint UK_dwk6cx0afu8bs9o4t536v1j5v unique (email)\nHibernate: alter table customer add constraint UK_crkjmjk1oj8gb6j6t5kt7gcxm unique (name)\nHibernate: alter table coupon add constraint FKe2v6qnb3w90rekqrae28iiqhm foreign key (company_id) references company (id)\nHibernate: alter table customer_coupon add constraint FKppndqdpydmsumc9yqslm5hss4 foreign key (coupon_id) references coupon (id)\nHibernate: alter table customer_coupon add constraint FKi755t5tde9sf6nrp4rm2rnnmn foreign key (customer_id) references customer (id)\n2019-01-29 11:26:12.515  INFO 6576 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script &#39;ScriptSourceInputFromUrl(/import.sql)&#39;\n2019-01-29 11:26:12.515  INFO 6576 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\n2019-01-29 11:26:12.812  INFO 6576 --- [           main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory\n2019-01-29 11:26:13.747  INFO 6576 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService &#39;applicationTaskExecutor&#39;\n2019-01-29 11:26:13.793  WARN 6576 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2019-01-29 11:26:14.592  INFO 6576 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path &#39;/actuator&#39;\n2019-01-29 11:26:14.655  INFO 6576 --- [           main] g.f.d.s.database.CouponDateIT            : Started CouponDateIT in 6.985 seconds (JVM running for 8.059)\n```\n\n&lt;b&gt;I am expecting the date field not to change after saving and returning it, but the date keeps changing to yesterday&#39;s AFTER saving the coupon.&lt;/b&gt; \n\n","title":"MySQL Date Changes to Yesterday&#39;s date After JPA Save","body":"<h3>I have encountered a problem with a date field/database column while using Spring's JpaRepository to save an entity to MySQL.</h3>\n<p>The entity has LocalDate fields. When testing with LocalDate.now(), encountered a problem with the returned Date field:</p>\n<ol>\n<li>First save the returned object's date is correct.</li>\n<li>When return the object from MySQL database the date is a day before</li>\n</ol>\n<p>Example:</p>\n<p>Expected :2019-01-29</p>\n<p>Actual   :2019-01-28</p>\n<p>I have tried it yesterday and results were:</p>\n<p>Expected :2019-01-28</p>\n<p>Actual   :2019-01-27</p>\n<p>Maybe similar to the this <a href=\"https://stackoverflow.com/questions/41938999/jpa-saving-wrong-date-in-mysql-database\">JPA Saving wrong date in MySQL database</a></p>\n<h3>Code</h3>\n<p><strong>application-mysql-test-connection.properties</strong></p>\n<pre><code>spring.jpa.hibernate.ddl-auto=create\n\n# Database url\nspring.datasource.url=jdbc:mysql://localhost:3306/test_coupon_system?serverTimezone=UTC\n\nspring.datasource.driverClassName=com.mysql.cj.jdbc.Driver\n\n# Test Database credentials\nspring.datasource.username=springuser\nspring.datasource.password=springuser\n\n### showing values - for development\nspring.jpa.show-sql=true\n</code></pre>\n<p><strong>Coupon</strong> removed constructor &amp; getter/setter for brevity</p>\n<pre><code>@Entity\npublic class Coupon {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    @Column(name = &quot;id&quot;, length = 45)\n    private long id;\n\n\n    @Column(name = &quot;name&quot;, unique = true, nullable = false, length = 45)\n    private String name;\n\n    @Column(name = &quot;description&quot;, length = 100)\n    private String description;\n\n    @Column(name = &quot;imageLocation&quot;)\n    private String imageLocation;\n\n    @Column(name = &quot;startDate&quot;, length = 45)\n    private LocalDate startDate;\n\n    @Column(name = &quot;endDate&quot;, length = 45)\n    private LocalDate endDate;\n\n    @ManyToOne(cascade = CascadeType.PERSIST)\n    @JoinColumn(name = &quot;company_id&quot;)\n    private Company company;\n\n    @ManyToMany(cascade = CascadeType.PERSIST,fetch = FetchType.EAGER)\n    @JoinTable(\n            name = &quot;customer_coupon&quot;,\n            joinColumns = @JoinColumn(name = &quot;coupon_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;customer_id&quot;)\n    )\n    private List&lt;Customer&gt; customers;\n</code></pre>\n<p><strong>CouponRepository</strong></p>\n<pre><code>@Repository\npublic interface CouponRepository extends JpaRepository&lt;Coupon, Long&gt; {\n\n    Coupon findByName(String name);\n}\n</code></pre>\n<p><strong>Test Class</strong> with printout</p>\n<pre><code>@SpringBootTest\n@TestPropertySource(locations = {\n        &quot;classpath:application-mysql-test-connection.properties&quot;,\n})\npublic class CouponDateIT {\n\n    @Autowired\n    private CouponRepository repository;\n\n    @BeforeEach\n    void setUp() {\n        repository.deleteAll();\n    }\n\n    @Test\n    void returnsLocalDate() {\n        LocalDate testDate = LocalDate.now();\n\n        DateTime.now();\n        Coupon coupon = new Coupon();\n        String couponName = &quot;test1&quot;;\n        coupon.setName(couponName);\n        coupon.setStartDate(LocalDate.now());\n        coupon.setEndDate(LocalDate.now());\n        coupon = repository.saveAndFlush(coupon);\n\n        System.out.println(&quot;===&gt; test date &quot; + testDate);\n        System.out.println(&quot;===&gt; coupon from db &quot; + coupon);\n\n        assertEquals(testDate, coupon.getStartDate());\n        assertEquals(testDate, coupon.getEndDate());\n\n        Coupon returned = repository.findByName(couponName);\n        System.out.println(&quot;===&gt; after save &quot; + returned);\n        assertEquals(testDate, returned.getStartDate());\n        assertEquals(testDate, returned.getEndDate());\n    }\n</code></pre>\n<p><strong>Failing Test</strong></p>\n<pre><code>Hibernate: select coupon0_.id as id1_1_, coupon0_.company_id as company_7_1_, coupon0_.description as descript2_1_, coupon0_.end_date as end_date3_1_, coupon0_.image_location as image_lo4_1_, coupon0_.name as name5_1_, coupon0_.start_date as start_da6_1_ from coupon coupon0_\nHibernate: select next_val as id_val from hibernate_sequence for update\nHibernate: update hibernate_sequence set next_val= ? where next_val=?\nHibernate: insert into coupon (company_id, description, end_date, image_location, name, start_date, id) values (?, ?, ?, ?, ?, ?, ?)\n===&gt; test date 2019-01-29\n===&gt; coupon from db Coupon{id=1, name='test1', description='null', imageLocation='null', startDate=2019-01-29, endDate=2019-01-29}\nHibernate: select coupon0_.id as id1_1_, coupon0_.company_id as company_7_1_, coupon0_.description as descript2_1_, coupon0_.end_date as end_date3_1_, coupon0_.image_location as image_lo4_1_, coupon0_.name as name5_1_, coupon0_.start_date as start_da6_1_ from coupon coupon0_ where coupon0_.name=?\nHibernate: select customers0_.coupon_id as coupon_i2_3_0_, customers0_.customer_id as customer1_3_0_, customer1_.id as id1_2_1_, customer1_.email as email2_2_1_, customer1_.name as name3_2_1_ from customer_coupon customers0_ inner join customer customer1_ on customers0_.customer_id=customer1_.id where customers0_.coupon_id=?\n===&gt; after save Coupon{id=1, name='test1', description='null', imageLocation='null', startDate=2019-01-28, endDate=2019-01-28}\n\njava.lang.AssertionError: expected:&lt;2019-01-29&gt; but was:&lt;2019-01-28&gt;\nExpected :2019-01-29\nActual   :2019-01-28\n</code></pre>\n<p><strong>Log before test with</strong></p>\n<pre><code>2019-01-29 11:26:07.986  INFO 6576 --- [           main] g.f.d.s.database.CouponDateIT            : No active profile set, falling back to default profiles: default\n2019-01-29 11:26:09.235  INFO 6576 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data repositories in DEFAULT mode.\n2019-01-29 11:26:09.308  INFO 6576 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 73ms. Found 3 repository interfaces.\n2019-01-29 11:26:09.762  INFO 6576 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$70fe81c1] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2019-01-29 11:26:09.981  INFO 6576 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2019-01-29 11:26:10.894  INFO 6576 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2019-01-29 11:26:10.957  INFO 6576 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [\n    name: default\n    ...]\n2019-01-29 11:26:11.019  INFO 6576 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate Core {5.3.7.Final}\n2019-01-29 11:26:11.019  INFO 6576 --- [           main] org.hibernate.cfg.Environment            : HHH000206: hibernate.properties not found\n2019-01-29 11:26:11.191  INFO 6576 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.0.4.Final}\n2019-01-29 11:26:11.341  INFO 6576 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.MySQL5Dialect\n2019-01-29 11:26:11.591  WARN 6576 --- [           main] org.hibernate.mapping.RootClass          : HHH000038: Composite-id class does not override equals(): .entity.Customer_Coupon\n2019-01-29 11:26:11.591  WARN 6576 --- [           main] org.hibernate.mapping.RootClass          : HHH000039: Composite-id class does not override hashCode(): .entity.Customer_Coupon\nHibernate: drop table if exists company\nHibernate: drop table if exists coupon\nHibernate: drop table if exists customer\nHibernate: drop table if exists customer_coupon\nHibernate: drop table if exists hibernate_sequence\nHibernate: create table company (id bigint not null, email varchar(45) not null, name varchar(45) not null, password varchar(45) not null, primary key (id)) engine=MyISAM\nHibernate: alter table company add constraint UK_bma9lv19ba3yjwf12a34xord3 unique (email)\nHibernate: alter table company add constraint UK_niu8sfil2gxywcru9ah3r4ec5 unique (name)\nHibernate: create table coupon (id bigint not null, description varchar(100), end_date date, image_location varchar(255), name varchar(45) not null, start_date date, company_id bigint, primary key (id)) engine=MyISAM\nHibernate: create table customer (id integer not null, email varchar(45) not null, name varchar(45) not null, primary key (id)) engine=MyISAM\nHibernate: create table customer_coupon (customer_id bigint not null, coupon_id bigint not null, primary key (customer_id, coupon_id)) engine=MyISAM\nHibernate: create table hibernate_sequence (next_val bigint) engine=MyISAM\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: insert into hibernate_sequence values ( 1 )\nHibernate: alter table coupon add constraint UK_dfikvnp7dxdfishfvpnlc0xc1 unique (name)\nHibernate: alter table customer add constraint UK_dwk6cx0afu8bs9o4t536v1j5v unique (email)\nHibernate: alter table customer add constraint UK_crkjmjk1oj8gb6j6t5kt7gcxm unique (name)\nHibernate: alter table coupon add constraint FKe2v6qnb3w90rekqrae28iiqhm foreign key (company_id) references company (id)\nHibernate: alter table customer_coupon add constraint FKppndqdpydmsumc9yqslm5hss4 foreign key (coupon_id) references coupon (id)\nHibernate: alter table customer_coupon add constraint FKi755t5tde9sf6nrp4rm2rnnmn foreign key (customer_id) references customer (id)\n2019-01-29 11:26:12.515  INFO 6576 --- [           main] o.h.t.schema.internal.SchemaCreatorImpl  : HHH000476: Executing import script 'ScriptSourceInputFromUrl(/import.sql)'\n2019-01-29 11:26:12.515  INFO 6576 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2019-01-29 11:26:12.812  INFO 6576 --- [           main] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory\n2019-01-29 11:26:13.747  INFO 6576 --- [           main] o.s.s.concurrent.ThreadPoolTaskExecutor  : Initializing ExecutorService 'applicationTaskExecutor'\n2019-01-29 11:26:13.793  WARN 6576 --- [           main] aWebConfiguration$JpaWebMvcConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2019-01-29 11:26:14.592  INFO 6576 --- [           main] o.s.b.a.e.web.EndpointLinksResolver      : Exposing 2 endpoint(s) beneath base path '/actuator'\n2019-01-29 11:26:14.655  INFO 6576 --- [           main] g.f.d.s.database.CouponDateIT            : Started CouponDateIT in 6.985 seconds (JVM running for 8.059)\n</code></pre>\n<p><b>I am expecting the date field not to change after saving and returning it, but the date keeps changing to yesterday's AFTER saving the coupon.</b></p>\n"},{"tags":["javascript","java","jar","electron"],"owner":{"account_id":27562039,"reputation":287,"user_id":21034926,"display_name":"ICTDEV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689977455,"creation_date":1689322110,"question_id":76685845,"body_markdown":"I have this code inside my electron app. I need to run a [jar file][1] and that will do a conversion job of some documents from  docx to pdf\r\n\r\n```lang-js\r\nfor (let p = 0; p &lt; docPaths.length; p++ ) {\r\n    const jar = childProcess.spawn(`java -jar docs-to-pdf-converter-1.7.jar -i ${docPaths[p]}, -o ${docPaths[p].replace(&#39;.docx&#39;, &#39;.pdf&#39;)}`);\r\n    //\r\n    jar.stderr.on(&#39;error&#39;, () =&gt; {\r\n\r\n    });\r\n    //\r\n    jar.stdout.on(&#39;data&#39;, (data) =&gt; {\r\n        console.log(data);\r\n    });\r\n    //\r\n    jar.on(&#39;exit&#39;, (code) =&gt; {\r\n        console.log(&#39;jar ok&#39;, code);\r\n    });\r\n}\r\n```\r\n\r\nWhen I run the electron app I will get always this error\r\n\r\n[![Error screenshot][2]][2]\r\n\r\nIs possible to run a java file from an electron app? what I need to do exactli, use `exec` instead of `spawn`?\r\n\r\n  [1]: https://github.com/yeokm1/docs-to-pdf-converter\r\n  [2]: https://i.stack.imgur.com/E2odc.png","title":"Electron - run jar file from background script","body":"<p>I have this code inside my electron app. I need to run a <a href=\"https://github.com/yeokm1/docs-to-pdf-converter\" rel=\"nofollow noreferrer\">jar file</a> and that will do a conversion job of some documents from  docx to pdf</p>\n<pre class=\"lang-js prettyprint-override\"><code>for (let p = 0; p &lt; docPaths.length; p++ ) {\n    const jar = childProcess.spawn(`java -jar docs-to-pdf-converter-1.7.jar -i ${docPaths[p]}, -o ${docPaths[p].replace('.docx', '.pdf')}`);\n    //\n    jar.stderr.on('error', () =&gt; {\n\n    });\n    //\n    jar.stdout.on('data', (data) =&gt; {\n        console.log(data);\n    });\n    //\n    jar.on('exit', (code) =&gt; {\n        console.log('jar ok', code);\n    });\n}\n</code></pre>\n<p>When I run the electron app I will get always this error</p>\n<p><a href=\"https://i.stack.imgur.com/E2odc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/E2odc.png\" alt=\"Error screenshot\" /></a></p>\n<p>Is possible to run a java file from an electron app? what I need to do exactli, use <code>exec</code> instead of <code>spawn</code>?</p>\n"},{"tags":["java","spring-boot","completable-future","spring-cloud-feign","feign"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690044862,"post_id":76741486,"comment_id":135299504,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":22530700,"reputation":16,"user_id":20444647,"display_name":"rafinhaLQ"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689977062,"creation_date":1689977062,"question_id":76741486,"body_markdown":"I am trying to use the feign interceptor to the feign requisitions i am calling using completable future, but the ServletRequestAttributes only return null.\r\n\r\n\r\n```\r\npublic class FeignInterceptor implements RequestInterceptor  {\r\n\r\n    @Override\r\n    public void apply(RequestTemplate requestTemplate) {\r\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n        HttpServletRequest request = attributes.getRequest();\r\n        String bearerToken = request.getHeader(AUTHORIZATION);\r\n        requestTemplate.header(AUTHORIZATION, bearerToken);\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n    public Object searchObject() {\r\n        Object[] listFutures;\r\n        try {\r\n            listFutures = Stream.of(getObjectFuture1(), getObjectFuture2(), getObjectFuture3())\r\n                    .map(CompletableFuture::join)\r\n                    .toArray(Object[]::new);\r\n        } catch(Exception e) {\r\n            throw e.getCause();\r\n        }\r\n\r\n        // Rest of the code\r\n\r\n        return listFutures[0];\r\n    }\r\n    \r\n    private CompletableFuture&lt;Object&gt; getObjectFuture1() {\r\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.detailObject(null));\r\n    }\r\n    \r\n    private CompletableFuture&lt;Object&gt; getObjectFuture2() {\r\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.listObject(true));\r\n    }\r\n    \r\n    private CompletableFuture&lt;Object&gt; getObjectFuture3() {\r\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.listObject(true));\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nI&#39;m looking for an anwser for a long time but couldn&#39;t find it.","title":"Can I use Feign interceptor while calling the feign requisitions with completable future?","body":"<p>I am trying to use the feign interceptor to the feign requisitions i am calling using completable future, but the ServletRequestAttributes only return null.</p>\n<pre><code>public class FeignInterceptor implements RequestInterceptor  {\n\n    @Override\n    public void apply(RequestTemplate requestTemplate) {\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n        HttpServletRequest request = attributes.getRequest();\n        String bearerToken = request.getHeader(AUTHORIZATION);\n        requestTemplate.header(AUTHORIZATION, bearerToken);\n    }\n}\n</code></pre>\n<pre><code>    public Object searchObject() {\n        Object[] listFutures;\n        try {\n            listFutures = Stream.of(getObjectFuture1(), getObjectFuture2(), getObjectFuture3())\n                    .map(CompletableFuture::join)\n                    .toArray(Object[]::new);\n        } catch(Exception e) {\n            throw e.getCause();\n        }\n\n        // Rest of the code\n\n        return listFutures[0];\n    }\n    \n    private CompletableFuture&lt;Object&gt; getObjectFuture1() {\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.detailObject(null));\n    }\n    \n    private CompletableFuture&lt;Object&gt; getObjectFuture2() {\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.listObject(true));\n    }\n    \n    private CompletableFuture&lt;Object&gt; getObjectFuture3() {\n        return CompletableFuture.supplyAsync(() -&gt; feignClient.listObject(true));\n    }\n\n</code></pre>\n<p>I'm looking for an anwser for a long time but couldn't find it.</p>\n"},{"tags":["java","android","database","sqlite","android-sqlite"],"comments":[{"owner":{"account_id":4726205,"reputation":12248,"user_id":4420967,"display_name":"James Z"},"score":1,"creation_date":1689862677,"post_id":76727969,"comment_id":135275943,"body_markdown":"Please don&#39;t post pictures of code or other text","body":"Please don&#39;t post pictures of code or other text"},{"owner":{"account_id":11779404,"reputation":764,"user_id":8619606,"display_name":"Kirguduck"},"score":0,"creation_date":1689866885,"post_id":76727969,"comment_id":135277108,"body_markdown":"post your code as lines. not like pic","body":"post your code as lines. not like pic"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689867656,"post_id":76727969,"comment_id":135277299,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":19093226,"reputation":1,"user_id":13943089,"display_name":"sufyan ashraf"},"score":0,"creation_date":1690034537,"post_id":76727969,"comment_id":135298163,"body_markdown":"still failed to insert data @MikeT","body":"still failed to insert data @MikeT"}],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689976570,"creation_date":1689976570,"answer_id":76741457,"question_id":76727969,"body_markdown":"I believe that your issue is that the `onClick` method is starting another Activity before it does anything else, so control will pass to that activity, and as such the subsequent code does not execute and thus never insert the data.\r\n\r\nTry removing or commenting out the line `startActivity(it);`","title":"Data failed to insert in database","body":"<p>I believe that your issue is that the <code>onClick</code> method is starting another Activity before it does anything else, so control will pass to that activity, and as such the subsequent code does not execute and thus never insert the data.</p>\n<p>Try removing or commenting out the line <code>startActivity(it);</code></p>\n"}],"owner":{"account_id":19093226,"reputation":1,"user_id":13943089,"display_name":"sufyan ashraf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":8,"up_vote_count":0,"answer_count":1,"score":-8,"last_activity_date":1689976570,"creation_date":1689841460,"question_id":76727969,"body_markdown":"I am facing trouble while inserting data in database. The table was created but data was not inserting\r\n\r\ndbhelpher class func\r\n\r\n[![enter image description here][1]][1]\r\n\r\nmainactivity onlick func\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI have tried to insert data on databse using onclick func with a button, hence the table was created but data was not inserted in the table. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rUmI9.png\r\n  [2]: https://i.stack.imgur.com/2AP4f.png","title":"Data failed to insert in database","body":"<p>I am facing trouble while inserting data in database. The table was created but data was not inserting</p>\n<p>dbhelpher class func</p>\n<p><a href=\"https://i.stack.imgur.com/rUmI9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rUmI9.png\" alt=\"enter image description here\" /></a></p>\n<p>mainactivity onlick func</p>\n<p><a href=\"https://i.stack.imgur.com/2AP4f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2AP4f.png\" alt=\"enter image description here\" /></a></p>\n<p>I have tried to insert data on databse using onclick func with a button, hence the table was created but data was not inserted in the table.</p>\n"},{"tags":["java","jackson-databind"],"owner":{"account_id":487587,"reputation":3346,"user_id":1375292,"accept_rate":67,"display_name":"Troy Daniels"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689975332,"creation_date":1689975332,"question_id":76741371,"body_markdown":"I am using `JsonTypeInfo.As.PROPERTY` to serialize polymorphic data.  I also want to ignore incoming data with unknown types in it.  I am trying to do this with `handleUnknownTypeId` as such:\r\n\r\n**IgnoreInvalidTypeHandler.java**\r\n```\r\npackage com.example.jackson;\r\n\r\nimport java.io.IOException;\r\n\r\nimport com.fasterxml.jackson.databind.DeserializationContext;\r\nimport com.fasterxml.jackson.databind.JavaType;\r\nimport com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;\r\nimport com.fasterxml.jackson.databind.jsontype.TypeIdResolver;\r\nimport com.fasterxml.jackson.databind.type.TypeFactory;\r\n\r\npublic class IgnoreInvalidTypeIdHandler extends DeserializationProblemHandler {\r\n\r\n  @Override\r\n  public JavaType handleUnknownTypeId(DeserializationContext ctxt, JavaType baseType, String subTypeId,\r\n                                      TypeIdResolver idResolver, String failureMsg) throws IOException {\r\n    System.out.println(&quot;failureMsg: &quot; + failureMessage);\r\n    return TypeFactory.defaultInstance().constructSimpleType(Void.class, new JavaType[0]);\r\n  }\r\n\r\n}\r\n```\r\n\r\nI have a unit test to verify that it works:\r\n\r\n**IgnoreInvalidateTypeHanderTest.java**\r\n```\r\npackage com.example.jackson;\r\n\r\nimport org.junit.Test;\r\nimport static org.hamcrest.Matchers.*;\r\nimport static org.hamcrest.MatcherAssert.assertThat;\r\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n\r\npublic class IgnoreInvalidTypeIdHandlerTest {\r\n\r\n@JsonTypeInfo(\r\n    use = JsonTypeInfo.Id.MINIMAL_CLASS,\r\n    include = JsonTypeInfo.As.PROPERTY,\r\n    property = &quot;@class&quot;)\r\n  public interface Root {\r\n  }\r\n\r\n  public static class Base implements Root {\r\n    public String id;\r\n  }\r\n\r\n  public static class Derived extends Base {\r\n    public String field;\r\n  }\r\n\r\n  public static class Wrapper implements Root {\r\n    public Base base;\r\n  }\r\n\r\n  @Test\r\n  public void basic() throws Exception  {\r\n    ObjectMapper mapper = new ObjectMapper()\r\n        .addHandler(new IgnoreInvalidTypeIdHandler())\r\n        //.disable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE)\r\n        ;\r\n\r\n    Wrapper wrapper = new Wrapper();\r\n    Derived derived = new Derived();\r\n    derived.id = &quot;foo&quot;;\r\n    derived.field = &quot;123&quot;;\r\n    wrapper.base = derived;\r\n\r\n    String json = mapper.writeValueAsString(wrapper);\r\n    // Verify that we can serialize it\r\n    Wrapper newWrapper = mapper.readValue(json, Wrapper.class);\r\n    assertThat(newWrapper.base.id, is(wrapper.base.id));\r\n    assertThat(newWrapper.base, is(instanceOf(Derived.class)));\r\n    Derived newDerived = (Derived) newWrapper.base;\r\n    assertThat(newDerived.field, is(derived.field));\r\n\r\n    String badJson = &quot;{&#39;@class&#39;:&#39;.IgnoreInvalidTypeIdHandlerTest$Wrapper&#39;,&quot; +\r\n      &quot;&#39;base&#39;:{&#39;@class&#39;:&#39;.UnknownClass&#39;,&#39;id&#39;:&#39;unk-id&#39;,&#39;field&#39;:&#39;unk-field&#39;}}&quot;;\r\n    badJson = badJson.replace(&quot;&#39;&quot;, &quot;\\&quot;&quot;);\r\n\r\n    Wrapper result = mapper.readValue(badJson, Wrapper.class);\r\n    assertThat(result.base, is(nullValue()));\r\n\r\n  }\r\n}\r\n```\r\n\r\nAccording to the documentation on DeserializationProblemHandler, one option is for it to &quot;Indicate that nothing should be deserialized, by return `Void.class`&quot;.  The interface requires that a `JavaType` is returned, not a `Class`, but I think my implementation follows the spirit of the documentation.  \r\n\r\nWhen I run the unit test, my handler is called twice.  The first time, `subTypeId` is &quot;com.example.jackson.UnknownClass&quot;.  The second time, it is &quot;.UnknownClass&quot;.  The test then throws an exception:\r\n\r\n```\r\ncom.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;com.fasterxml.jackson.databind.JsonDeserializer.deserialize(com.fasterxml.jackson.core.JsonParser, com.fasterxml.jackson.databind.DeserializationContext)&quot; because &quot;deser&quot; is null (through reference chain: com.example.jackson.IgnoreInvalidTypeIdHandlerTest$Wrapper[&quot;base&quot;])\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:394)\r\n\tat com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:353)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.wrapAndThrow(BeanDeserializerBase.java:1711)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:290)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:189)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:161)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:130)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:97)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\r\n\tat com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:68)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3004)\r\n\tat com.example.jackson.IgnoreInvalidTypeIdHandlerTest.basic(IgnoreInvalidTypeIdHandlerTest.java:77)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n\tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n\tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n\tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\r\n\tat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\r\n\tat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\r\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;com.fasterxml.jackson.databind.JsonDeserializer.deserialize(com.fasterxml.jackson.core.JsonParser, com.fasterxml.jackson.databind.DeserializationContext)&quot; because &quot;deser&quot; is null\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:130)\r\n\tat com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:97)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\r\n\tat com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:145)\r\n\tat com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\r\n\t... 34 more\r\n```\r\n\r\nAm I using this method correctly? It looks to me like Jackson realizes there is an unknown type and calls my handler as expected, and converts the object being deserialized to `null`.  However, it then seems to continue trying to deserialize it.\r\n\r\nIf I remove the handler and uncomment the `FAIL_ON_INVALID_SUBTYPE` call, then the test passes, although without any indication that it ignored the data.\r\n\r\nI have not tried it, but it seems that if I uncomment the `FAIL` flag and return null from the handler (don&#39;t know what to do), I can log from the handler and then use the built-in behavior to set the field to null, but that seems like a workaround.\r\n\r\nI am using Java 17 and Jackson 2.9.8.  \r\n\r\nMy full use case is that we have a domain model of objects that are passed around between components as JSON.  When we update the domain model, we need to update the pom for every component that uses the model, whether or not it cares about the change.  If we forget a module, it crashes when it receives an object whose type does not exist in its domain model.  So we would like to ignore those objects, but warn that we did so, in case the component does need the current version of the domain model.\r\n","title":"Using `handleUnknownTypeId` to skip unknown types in Jackson","body":"<p>I am using <code>JsonTypeInfo.As.PROPERTY</code> to serialize polymorphic data.  I also want to ignore incoming data with unknown types in it.  I am trying to do this with <code>handleUnknownTypeId</code> as such:</p>\n<p><strong>IgnoreInvalidTypeHandler.java</strong></p>\n<pre><code>package com.example.jackson;\n\nimport java.io.IOException;\n\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JavaType;\nimport com.fasterxml.jackson.databind.deser.DeserializationProblemHandler;\nimport com.fasterxml.jackson.databind.jsontype.TypeIdResolver;\nimport com.fasterxml.jackson.databind.type.TypeFactory;\n\npublic class IgnoreInvalidTypeIdHandler extends DeserializationProblemHandler {\n\n  @Override\n  public JavaType handleUnknownTypeId(DeserializationContext ctxt, JavaType baseType, String subTypeId,\n                                      TypeIdResolver idResolver, String failureMsg) throws IOException {\n    System.out.println(&quot;failureMsg: &quot; + failureMessage);\n    return TypeFactory.defaultInstance().constructSimpleType(Void.class, new JavaType[0]);\n  }\n\n}\n</code></pre>\n<p>I have a unit test to verify that it works:</p>\n<p><strong>IgnoreInvalidateTypeHanderTest.java</strong></p>\n<pre><code>package com.example.jackson;\n\nimport org.junit.Test;\nimport static org.hamcrest.Matchers.*;\nimport static org.hamcrest.MatcherAssert.assertThat;\nimport com.fasterxml.jackson.annotation.JsonTypeInfo;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class IgnoreInvalidTypeIdHandlerTest {\n\n@JsonTypeInfo(\n    use = JsonTypeInfo.Id.MINIMAL_CLASS,\n    include = JsonTypeInfo.As.PROPERTY,\n    property = &quot;@class&quot;)\n  public interface Root {\n  }\n\n  public static class Base implements Root {\n    public String id;\n  }\n\n  public static class Derived extends Base {\n    public String field;\n  }\n\n  public static class Wrapper implements Root {\n    public Base base;\n  }\n\n  @Test\n  public void basic() throws Exception  {\n    ObjectMapper mapper = new ObjectMapper()\n        .addHandler(new IgnoreInvalidTypeIdHandler())\n        //.disable(DeserializationFeature.FAIL_ON_INVALID_SUBTYPE)\n        ;\n\n    Wrapper wrapper = new Wrapper();\n    Derived derived = new Derived();\n    derived.id = &quot;foo&quot;;\n    derived.field = &quot;123&quot;;\n    wrapper.base = derived;\n\n    String json = mapper.writeValueAsString(wrapper);\n    // Verify that we can serialize it\n    Wrapper newWrapper = mapper.readValue(json, Wrapper.class);\n    assertThat(newWrapper.base.id, is(wrapper.base.id));\n    assertThat(newWrapper.base, is(instanceOf(Derived.class)));\n    Derived newDerived = (Derived) newWrapper.base;\n    assertThat(newDerived.field, is(derived.field));\n\n    String badJson = &quot;{'@class':'.IgnoreInvalidTypeIdHandlerTest$Wrapper',&quot; +\n      &quot;'base':{'@class':'.UnknownClass','id':'unk-id','field':'unk-field'}}&quot;;\n    badJson = badJson.replace(&quot;'&quot;, &quot;\\&quot;&quot;);\n\n    Wrapper result = mapper.readValue(badJson, Wrapper.class);\n    assertThat(result.base, is(nullValue()));\n\n  }\n}\n</code></pre>\n<p>According to the documentation on DeserializationProblemHandler, one option is for it to &quot;Indicate that nothing should be deserialized, by return <code>Void.class</code>&quot;.  The interface requires that a <code>JavaType</code> is returned, not a <code>Class</code>, but I think my implementation follows the spirit of the documentation.</p>\n<p>When I run the unit test, my handler is called twice.  The first time, <code>subTypeId</code> is &quot;com.example.jackson.UnknownClass&quot;.  The second time, it is &quot;.UnknownClass&quot;.  The test then throws an exception:</p>\n<pre><code>com.fasterxml.jackson.databind.JsonMappingException: Cannot invoke &quot;com.fasterxml.jackson.databind.JsonDeserializer.deserialize(com.fasterxml.jackson.core.JsonParser, com.fasterxml.jackson.databind.DeserializationContext)&quot; because &quot;deser&quot; is null (through reference chain: com.example.jackson.IgnoreInvalidTypeIdHandlerTest$Wrapper[&quot;base&quot;])\n    at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:394)\n    at com.fasterxml.jackson.databind.JsonMappingException.wrapWithPath(JsonMappingException.java:353)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.wrapAndThrow(BeanDeserializerBase.java:1711)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:290)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer._deserializeOther(BeanDeserializer.java:189)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:161)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:130)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:97)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\n    at com.fasterxml.jackson.databind.deser.impl.TypeWrappedDeserializer.deserialize(TypeWrappedDeserializer.java:68)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4013)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3004)\n    at com.example.jackson.IgnoreInvalidTypeIdHandlerTest.basic(IgnoreInvalidTypeIdHandlerTest.java:77)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:365)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeWithRerun(JUnit4Provider.java:273)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:238)\n    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:159)\n    at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:384)\n    at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:345)\n    at org.apache.maven.surefire.booter.ForkedBooter.execute(ForkedBooter.java:126)\n    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:418)\nCaused by: java.lang.NullPointerException: Cannot invoke &quot;com.fasterxml.jackson.databind.JsonDeserializer.deserialize(com.fasterxml.jackson.core.JsonParser, com.fasterxml.jackson.databind.DeserializationContext)&quot; because &quot;deser&quot; is null\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer._deserializeTypedForId(AsPropertyTypeDeserializer.java:130)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsPropertyTypeDeserializer.deserializeTypedFromObject(AsPropertyTypeDeserializer.java:97)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeWithType(BeanDeserializerBase.java:1178)\n    at com.fasterxml.jackson.databind.deser.impl.FieldProperty.deserializeAndSet(FieldProperty.java:145)\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:288)\n    ... 34 more\n</code></pre>\n<p>Am I using this method correctly? It looks to me like Jackson realizes there is an unknown type and calls my handler as expected, and converts the object being deserialized to <code>null</code>.  However, it then seems to continue trying to deserialize it.</p>\n<p>If I remove the handler and uncomment the <code>FAIL_ON_INVALID_SUBTYPE</code> call, then the test passes, although without any indication that it ignored the data.</p>\n<p>I have not tried it, but it seems that if I uncomment the <code>FAIL</code> flag and return null from the handler (don't know what to do), I can log from the handler and then use the built-in behavior to set the field to null, but that seems like a workaround.</p>\n<p>I am using Java 17 and Jackson 2.9.8.</p>\n<p>My full use case is that we have a domain model of objects that are passed around between components as JSON.  When we update the domain model, we need to update the pom for every component that uses the model, whether or not it cares about the change.  If we forget a module, it crashes when it receives an object whose type does not exist in its domain model.  So we would like to ignore those objects, but warn that we did so, in case the component does need the current version of the domain model.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1689975132,"post_id":76741324,"comment_id":135293715,"body_markdown":"Please provide a https://stackoverflow.com/help/minimal-reproducible-example","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689975268,"creation_date":1689975268,"answer_id":76741364,"question_id":76741324,"body_markdown":"This value with `.` is `double`. You should parse `double` from the stirng and then convert it to `long`.\r\n```java\r\nString str = &quot;447475.0&quot;;\r\nlong num = (long) Double.parseDouble(str);  // 447475\r\n```","title":"Parsing error from ms excel to java object , java.lang.NumberFormatException: For input string: &quot;447475.0&quot;","body":"<p>This value with <code>.</code> is <code>double</code>. You should parse <code>double</code> from the stirng and then convert it to <code>long</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String str = &quot;447475.0&quot;;\nlong num = (long) Double.parseDouble(str);  // 447475\n</code></pre>\n"}],"owner":{"account_id":3758035,"reputation":1073,"user_id":3123934,"accept_rate":54,"display_name":"user3123934"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76741364,"answer_count":1,"score":0,"last_activity_date":1689975268,"creation_date":1689974670,"question_id":76741324,"body_markdown":"I am reading microsoft excel data as string value [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/9oGWB.png\r\n\r\nActually, I am reading value in java as string java.lang.NumberFormatException: For input string: &quot;447475.0&quot;\r\n\r\nCode snippet\r\nLong.parseLong(getCellValue(row.getCell(positionMap.get(columnName))))\r\n","title":"Parsing error from ms excel to java object , java.lang.NumberFormatException: For input string: &quot;447475.0&quot;","body":"<p>I am reading microsoft excel data as string value <a href=\"https://i.stack.imgur.com/9oGWB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9oGWB.png\" alt=\"enter image description here\" /></a></p>\n<p>Actually, I am reading value in java as string java.lang.NumberFormatException: For input string: &quot;447475.0&quot;</p>\n<p>Code snippet\nLong.parseLong(getCellValue(row.getCell(positionMap.get(columnName))))</p>\n"},{"tags":["java","inheritance","extends"],"comments":[{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1689973337,"post_id":76741198,"comment_id":135293501,"body_markdown":"I don&#39;t mind the downvote but a little explanation as to why would be really helpful","body":"I don&#39;t mind the downvote but a little explanation as to why would be really helpful"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689973628,"post_id":76741198,"comment_id":135293532,"body_markdown":"Do you know the difference between the static and the dynamic type of an object?","body":"Do you know the difference between the static and the dynamic type of an object?"},{"owner":{"account_id":23428052,"reputation":6895,"user_id":17487348,"display_name":"Mushroomator"},"score":0,"creation_date":1689973653,"post_id":76741198,"comment_id":135293535,"body_markdown":"Take a look at [static vs. dynamic binding](https://www.baeldung.com/java-static-dynamic-binding).","body":"Take a look at <a href=\"https://www.baeldung.com/java-static-dynamic-binding\" rel=\"nofollow noreferrer\">static vs. dynamic binding</a>."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689973815,"post_id":76741198,"comment_id":135293558,"body_markdown":"@Mushroomator that is only part of the puzzle (dynamic dispatch/binding). There are more nuances. E.g. when an overloaded method is called, the exact implementation called is determined by the static types of the actual parameters.","body":"@Mushroomator that is only part of the puzzle (dynamic dispatch/binding). There are more nuances. E.g. when an overloaded method is called, the exact implementation called is determined by the static types of the actual parameters."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1689973913,"post_id":76741198,"comment_id":135293569,"body_markdown":"clear as mud.  Does anyone one have a clearer explanation suitable for a highschool classroom","body":"clear as mud.  Does anyone one have a clearer explanation suitable for a highschool classroom"},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":2,"creation_date":1689973925,"post_id":76741198,"comment_id":135293570,"body_markdown":"The downvotes come from the fact that this a fundamental aspect of Java that is extremely well documented all over the Internet.  One of the SO tenets is that we&#39;d rather not re-document stuff that can already be found elsewhere, and you&#39;re expected to have done the research before asking.","body":"The downvotes come from the fact that this a fundamental aspect of Java that is extremely well documented all over the Internet.  One of the SO tenets is that we&#39;d rather not re-document stuff that can already be found elsewhere, and you&#39;re expected to have done the research before asking."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":2,"creation_date":1689973964,"post_id":76741198,"comment_id":135293579,"body_markdown":"wow, I&#39;ve looked all over the internet and all of the explanations are as I said, clear as mud","body":"wow, I&#39;ve looked all over the internet and all of the explanations are as I said, clear as mud"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689974094,"post_id":76741198,"comment_id":135293603,"body_markdown":"[This pdf from `www.cs.cornell.edu`](https://www.cs.cornell.edu/courses/JavaAndDS/files/staticType.pdf) explains static and dynamic types quite well and with a concrete examples. For completeness: the static type determines what we &quot;see&quot; when we write code: When the variable has the static type `Animal`, we only see methods defined in `Animal`. The dynamic type, however, determines (through dynamic dispatch) which implementation of a method is called (aside from overloading, which falls back to the static types and is a separate topic).","body":"<a href=\"https://www.cs.cornell.edu/courses/JavaAndDS/files/staticType.pdf\" rel=\"nofollow noreferrer\">This pdf from <code>www.cs.cornell.edu</code></a> explains static and dynamic types quite well and with a concrete examples. For completeness: the static type determines what we &quot;see&quot; when we write code: When the variable has the static type <code>Animal</code>, we only see methods defined in <code>Animal</code>. The dynamic type, however, determines (through dynamic dispatch) which implementation of a method is called (aside from overloading, which falls back to the static types and is a separate topic)."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1689974659,"post_id":76741198,"comment_id":135293669,"body_markdown":"The compile-time type is `ClassA`. You can only reference methods that are know to the compile-time type. But the actual invocation is resolved against the runtime type, namely `ClassB`. So if a method declared in `ClassA` is overridden in `ClassB`, it&#39;s the latter version that gets invoked. It&#39;s fundamental to polymorphism that you can have a shared &quot;contract&quot; for multiple types with varying implementations depending on subtype of a particular instance. This is supposed to reflect real-world objects in the sense that you can describe e.g. how to drive a car without knowing the specific model.","body":"The compile-time type is <code>ClassA</code>. You can only reference methods that are know to the compile-time type. But the actual invocation is resolved against the runtime type, namely <code>ClassB</code>. So if a method declared in <code>ClassA</code> is overridden in <code>ClassB</code>, it&#39;s the latter version that gets invoked. It&#39;s fundamental to polymorphism that you can have a shared &quot;contract&quot; for multiple types with varying implementations depending on subtype of a particular instance. This is supposed to reflect real-world objects in the sense that you can describe e.g. how to drive a car without knowing the specific model."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1689975798,"post_id":76741198,"comment_id":135293810,"body_markdown":"@user16320675 &quot;*it sure can be done in Java*&quot; - Can it be done? yes. Should it be done? Probably not. At least not without at least a preceeding type check. Even then: the uses should be few and far between. See the [Liskov Substitution Principle](https://en.wikipedia.org/wiki/Liskov_substitution_principle).","body":"@user16320675 &quot;<i>it sure can be done in Java</i>&quot; - Can it be done? yes. Should it be done? Probably not. At least not without at least a preceeding type check. Even then: the uses should be few and far between. See the <a href=\"https://en.wikipedia.org/wiki/Liskov_substitution_principle\" rel=\"nofollow noreferrer\">Liskov Substitution Principle</a>."},{"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"score":0,"creation_date":1689976297,"post_id":76741198,"comment_id":135293870,"body_markdown":"@user16320675, thanks I didn&#39;t realize I need to add the extra set of ()","body":"@user16320675, thanks I didn&#39;t realize I need to add the extra set of ()"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1689985940,"post_id":76741198,"comment_id":135294602,"body_markdown":"@JimGarrison The information may be _&quot;all over the Internet&quot;_ but that does not, and never should, preclude users from asking here. I&#39;d also note that so far nobody has proposed a duplicate for the OP&#39;s question, which suggests it may not have been asked before on SO. Given that the question is about _&quot;a fundamental aspect of Java&quot;_, if nobody has asked it here before it is actually a good and very useful question.","body":"@JimGarrison The information may be <i>&quot;all over the Internet&quot;</i> but that does not, and never should, preclude users from asking here. I&#39;d also note that so far nobody has proposed a duplicate for the OP&#39;s question, which suggests it may not have been asked before on SO. Given that the question is about <i>&quot;a fundamental aspect of Java&quot;</i>, if nobody has asked it here before it is actually a good and very useful question."},{"owner":{"account_id":10943394,"reputation":111,"user_id":22230072,"display_name":"Mr. Brown"},"score":0,"creation_date":1690239067,"post_id":76741198,"comment_id":135322834,"body_markdown":"“All over the Internet” and doesn’t provide a single reference. Nice job.","body":"“All over the Internet” and doesn’t provide a single reference. Nice job."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1689975178,"creation_date":1689975178,"answer_id":76741357,"question_id":76741198,"body_markdown":"Your question is identical to this situation:\r\n\r\nYou see Max, who is a poodle. You ask: So, what&#39;s the deal? Is Max a Poodle, a Dog, or an Animal? Or all three at the same time?\r\n\r\nThe answer is more or less &#39;that question belies a misunderstanding of how we classify living things&#39;. If you must choose from your limited set of options, &quot;It is all 3&quot; is more correct than any other. But that implies you could create a Poodle that is also an Animal but _not_ a Dog, and that is the wrong conclusion: _Anything that is a poodle is __necessarily__ also a Dog_.\r\n\r\nIt also depends on context. If I ask about the &#39;type&#39; of creature that Max is, and the situation calls for just one answer, you always get &#39;Poodle&#39;. Because that&#39;s the most useful answer - knowing that max is a Poodle is enough to determine that max is therefore necessarily also a dog and also an animal because _by definition, __all__ poodles are. You can&#39;t have a non-dog creature that is nevertheless a poodle_.\r\n\r\nHence:\r\n\r\n* `Animal a = new Poodle();` is perfectly legal. Al poodles are animals, so, if you have a job that requires any animal, a poodle will work. So would a chihuahua.\r\n\r\n* Java does everything by reference. `Animal a;` is like declaring the existence of a little post-it note named `a` which is to contain the __adress__ of where some animal lives. The address can even be left blank (`null`). You are guaranteed that, if an actual address is on this post-it note, that it will __definitely__ lead to some sort of animal (it would not lead to, say, an oak tree, the language and runtime __guarantee__ this). In this case, it would, in fact, lead to a poodle. Which works fine: all poodles are animals, after all. The fact that your address postit says &#39;I might lead to any animal&#39; doesn&#39;t magically turn max into a donkey or even into a &#39;generic animal&#39; - max remains a poodle:\r\n\r\n```\r\nPoodle max = new Poodle();\r\nAnimal a = max;\r\nSystem.out.println(a.getClass()); // prints &#39;Poodle&#39;.\r\n```\r\n\r\nRemember, the dot operator is &#39;follow the address on the post-it and ask the thing you find there a question&#39;. `.getClass()` doesn&#39;t &#39;ask the question&#39; to `a`, it asks the question to the thing a is pointing at. Currently, a is pointing at max. And if you ask Max what he is (and if dogs could speak, I guess), max would say &#39;I am a poodle&#39;. Max won&#39;t say &quot;I am an animal&quot;; max has no awareness of the postit note, and really couldn&#39;t: There could be 85 postits all with the address of max. There could be none left (local variables cease existing once a method ends, for example, as if the postit note poofs into oblivion). When asking questions to objects they don&#39;t get the &#39;context&#39; (what route you used to _find_ that object), and thus you know their answer cannot possibly be dependent on it.\r\n\r\n* `Poodle b = a;` __is not__ legal. This means: &quot;Take the address on post-it note a and copy it over to post-it note b, which is restricted such that, if it points to anything, it points to a poodle. __Even if__ a is currently pointing at a poodle, at compile time the compiler doesn&#39;t know that, so it won&#39;t let you do this. Not without a cast: `Poodle b = (Poodle) a;` is fine, because that is interjecting: &quot;Check if a is in fact pointing at a poodle. If it is indeed, then all is well. But if not, stop everything you are doing and exit this procedure abnormally with a &#39;ClassCastException&#39;.\r\n\r\n* Objects always have many, many types. For example, `new ArrayList&lt;String&gt;` is __all__ of these things: `Serializable`, `RandomAccess`, `Iterable&lt;String&gt;`, `ArrayList&lt;String&gt;`, `AbstractList&lt;String&gt;`, `List&lt;String&gt;`, `AbstractCollection&lt;String&gt;`, `Collection&lt;String&gt;`, `Object`, and perhaps a few more I missed. It&#39;s not just the type hierarchy (ArrayList extends AbstractList extends AbstractCollection extends Object), it&#39;s also all the interfaces you pick up along the way - and all of _their_ superinterfaces too. This matches real life. max is a poodle, a dog, an animal, a meat eater, a legged thing, a source of pee, a 2-eared thing, male, and so many other things. All at the same time.\r\n","title":"java do extended classes have two types","body":"<p>Your question is identical to this situation:</p>\n<p>You see Max, who is a poodle. You ask: So, what's the deal? Is Max a Poodle, a Dog, or an Animal? Or all three at the same time?</p>\n<p>The answer is more or less 'that question belies a misunderstanding of how we classify living things'. If you must choose from your limited set of options, &quot;It is all 3&quot; is more correct than any other. But that implies you could create a Poodle that is also an Animal but <em>not</em> a Dog, and that is the wrong conclusion: <em>Anything that is a poodle is <strong>necessarily</strong> also a Dog</em>.</p>\n<p>It also depends on context. If I ask about the 'type' of creature that Max is, and the situation calls for just one answer, you always get 'Poodle'. Because that's the most useful answer - knowing that max is a Poodle is enough to determine that max is therefore necessarily also a dog and also an animal because <em>by definition, <strong>all</strong> poodles are. You can't have a non-dog creature that is nevertheless a poodle</em>.</p>\n<p>Hence:</p>\n<ul>\n<li><p><code>Animal a = new Poodle();</code> is perfectly legal. Al poodles are animals, so, if you have a job that requires any animal, a poodle will work. So would a chihuahua.</p>\n</li>\n<li><p>Java does everything by reference. <code>Animal a;</code> is like declaring the existence of a little post-it note named <code>a</code> which is to contain the <strong>adress</strong> of where some animal lives. The address can even be left blank (<code>null</code>). You are guaranteed that, if an actual address is on this post-it note, that it will <strong>definitely</strong> lead to some sort of animal (it would not lead to, say, an oak tree, the language and runtime <strong>guarantee</strong> this). In this case, it would, in fact, lead to a poodle. Which works fine: all poodles are animals, after all. The fact that your address postit says 'I might lead to any animal' doesn't magically turn max into a donkey or even into a 'generic animal' - max remains a poodle:</p>\n</li>\n</ul>\n<pre><code>Poodle max = new Poodle();\nAnimal a = max;\nSystem.out.println(a.getClass()); // prints 'Poodle'.\n</code></pre>\n<p>Remember, the dot operator is 'follow the address on the post-it and ask the thing you find there a question'. <code>.getClass()</code> doesn't 'ask the question' to <code>a</code>, it asks the question to the thing a is pointing at. Currently, a is pointing at max. And if you ask Max what he is (and if dogs could speak, I guess), max would say 'I am a poodle'. Max won't say &quot;I am an animal&quot;; max has no awareness of the postit note, and really couldn't: There could be 85 postits all with the address of max. There could be none left (local variables cease existing once a method ends, for example, as if the postit note poofs into oblivion). When asking questions to objects they don't get the 'context' (what route you used to <em>find</em> that object), and thus you know their answer cannot possibly be dependent on it.</p>\n<ul>\n<li><p><code>Poodle b = a;</code> <strong>is not</strong> legal. This means: &quot;Take the address on post-it note a and copy it over to post-it note b, which is restricted such that, if it points to anything, it points to a poodle. <strong>Even if</strong> a is currently pointing at a poodle, at compile time the compiler doesn't know that, so it won't let you do this. Not without a cast: <code>Poodle b = (Poodle) a;</code> is fine, because that is interjecting: &quot;Check if a is in fact pointing at a poodle. If it is indeed, then all is well. But if not, stop everything you are doing and exit this procedure abnormally with a 'ClassCastException'.</p>\n</li>\n<li><p>Objects always have many, many types. For example, <code>new ArrayList&lt;String&gt;</code> is <strong>all</strong> of these things: <code>Serializable</code>, <code>RandomAccess</code>, <code>Iterable&lt;String&gt;</code>, <code>ArrayList&lt;String&gt;</code>, <code>AbstractList&lt;String&gt;</code>, <code>List&lt;String&gt;</code>, <code>AbstractCollection&lt;String&gt;</code>, <code>Collection&lt;String&gt;</code>, <code>Object</code>, and perhaps a few more I missed. It's not just the type hierarchy (ArrayList extends AbstractList extends AbstractCollection extends Object), it's also all the interfaces you pick up along the way - and all of <em>their</em> superinterfaces too. This matches real life. max is a poodle, a dog, an animal, a meat eater, a legged thing, a source of pee, a 2-eared thing, male, and so many other things. All at the same time.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":4010701,"reputation":15103,"user_id":4398966,"accept_rate":64,"display_name":"DCR"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":76741357,"answer_count":1,"score":0,"last_activity_date":1689975178,"creation_date":1689973067,"question_id":76741198,"body_markdown":"In java I have the following:\r\n\r\n    ClassA obj = new ClassB();\r\n\r\nwhere `ClassB extends ClassA`.\r\nIs obj of type `ClassA` or `ClassB` or both?\r\n\r\nif we have instead:\r\n\r\n    ClassB obj = new ClassB();\r\n    \r\nit seems clear that `obj` is of type `ClassB` but all `ClassB` are `ClassA` too, aren&#39;t they? So is the type both `ClassA` and `ClassB`?\r\n\r\nif we add the following:\r\n\r\n    ClassA [] objects = new ClassA[3];\r\n    ClassA obj = new ClassB();\r\n    objects[0] = obj;\r\n\r\nit seems that `obj` is of type `ClassA`. So we can add it to objects even though obj is a `new ClassB();`\r\n\r\nHere&#39;s my confusion, let say we have an overwritten method in `ClassB` from `ClassA`, I can call the method and I get the expected output from the `ClassB` overwritten method.  But, if I have just a `ClassB` method not also contained in `ClassA` I can&#39;t call it and I don&#39;t seem to be able to upcast it to `ClassB`.  oh wait, `obj` is of type `ClassA` so we can&#39;t cast it to a `ClassB` because all `ClassA`&#39;s aren&#39;t `ClassB`&#39;s.\r\n\r\nSo obj is of type `ClassA` but we set it to `new ClassB()`. so what the heck is it? Is it `ClassA` or `ClassB`, I&#39;m so confused. Why can we access the overwritten methods in `ClassB` but not the non overwritten methods?  Is that just the way polymorphism works?","title":"java do extended classes have two types","body":"<p>In java I have the following:</p>\n<pre><code>ClassA obj = new ClassB();\n</code></pre>\n<p>where <code>ClassB extends ClassA</code>.\nIs obj of type <code>ClassA</code> or <code>ClassB</code> or both?</p>\n<p>if we have instead:</p>\n<pre><code>ClassB obj = new ClassB();\n</code></pre>\n<p>it seems clear that <code>obj</code> is of type <code>ClassB</code> but all <code>ClassB</code> are <code>ClassA</code> too, aren't they? So is the type both <code>ClassA</code> and <code>ClassB</code>?</p>\n<p>if we add the following:</p>\n<pre><code>ClassA [] objects = new ClassA[3];\nClassA obj = new ClassB();\nobjects[0] = obj;\n</code></pre>\n<p>it seems that <code>obj</code> is of type <code>ClassA</code>. So we can add it to objects even though obj is a <code>new ClassB();</code></p>\n<p>Here's my confusion, let say we have an overwritten method in <code>ClassB</code> from <code>ClassA</code>, I can call the method and I get the expected output from the <code>ClassB</code> overwritten method.  But, if I have just a <code>ClassB</code> method not also contained in <code>ClassA</code> I can't call it and I don't seem to be able to upcast it to <code>ClassB</code>.  oh wait, <code>obj</code> is of type <code>ClassA</code> so we can't cast it to a <code>ClassB</code> because all <code>ClassA</code>'s aren't <code>ClassB</code>'s.</p>\n<p>So obj is of type <code>ClassA</code> but we set it to <code>new ClassB()</code>. so what the heck is it? Is it <code>ClassA</code> or <code>ClassB</code>, I'm so confused. Why can we access the overwritten methods in <code>ClassB</code> but not the non overwritten methods?  Is that just the way polymorphism works?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"score":0,"creation_date":1690560901,"post_id":76741316,"comment_id":135375787,"body_markdown":"This did not work unfortunately!!","body":"This did not work unfortunately!!"}],"tags":[],"owner":{"account_id":28850828,"reputation":512,"user_id":22096771,"display_name":"Bademeister"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689974573,"creation_date":1689974573,"answer_id":76741316,"question_id":76740763,"body_markdown":"I had a similar challenge last time. First I excluded `/static/**` in the InterceptorRegistry config because the Interceptor felt responsible for it. After the exclusion I had 404 with the static files.\r\n\r\nAfter I made the following entry in application.properties were the static resources loaded.\r\n\r\n```\r\nspring.mvc.static-path-pattern=/static/**\r\n```","title":"How can I have different context path in spring boot for static pages such as .js or .css?","body":"<p>I had a similar challenge last time. First I excluded <code>/static/**</code> in the InterceptorRegistry config because the Interceptor felt responsible for it. After the exclusion I had 404 with the static files.</p>\n<p>After I made the following entry in application.properties were the static resources loaded.</p>\n<pre><code>spring.mvc.static-path-pattern=/static/**\n</code></pre>\n"}],"owner":{"account_id":12275702,"reputation":23,"user_id":13786905,"display_name":"Coder"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689974573,"creation_date":1689967987,"question_id":76740763,"body_markdown":"My Spring boot MVC application has,\r\n\r\n**ForgotController.java**\r\n```\r\n@RequestMapping(value = &quot;forgot.do&quot;, method = RequestMethod.GET)\r\npublic ModelAndView forgotCreds(HttpServletRequest request,\r\n\t\t\t\t\t\t\t\t\t  HttpServletResponse response) throws Exception {\r\n\t//returns or calls a view &#39;forgot.jsp&#39; \r\n}\r\n```\r\n\r\n**application.properties**\r\n\r\n```\r\nserver.servlet.context-path=/login\r\nstatic.contextPath=/static\r\n```\r\n\r\n**dispatcher-servlet.xml**\r\n\r\n```\r\n.\r\n.\r\n&lt;bean id=&quot;viewResolver&quot;\r\n\t  class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\r\n\t&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;/&gt;\r\n\t&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;\r\n&lt;/bean&gt;\r\n.\r\n.\r\nother config\r\n```\r\n\r\n**ViewRegistry.java**\r\n\r\n```\r\n@Configuration\r\npublic class ViewRegistry implements WebMvcConfigurer {\r\n\r\n@Override\r\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\r\n\t\tregistry.addResourceHandler(&quot;/static/**&quot;).addResourceLocations(&quot;classpath:build/dist/static/&quot;);\r\n\t\r\n\t}\r\n}\r\n```\r\n\r\n**Application.java**\r\n\r\n```\r\n@SpringBootApplication\r\n@ImportResource(\r\n        locations = {\r\n                &quot;classpath:/WEB-INF/config/dispatcher-servlet.xml&quot;\r\n})\r\npublic class Application extends SpringBootServletInitializer {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n}\r\n```\r\n\r\nMy application that initiates as **localhost:8080/login/forgot.do**, should load static resources from **localhost:8080/static/css/style.css**, but instead I&#39;m getting 404 not found for static resources. And, if I manually check for static content as **localhost:8080/login/static/css/style.css**, it&#39;s available. How can i get my spring boot application to serve static pages from &#39;/static&#39; context as **localhost:8080/static/..**?\r\n\r\nAny help would be appreciated. Thanks in advance!","title":"How can I have different context path in spring boot for static pages such as .js or .css?","body":"<p>My Spring boot MVC application has,</p>\n<p><strong>ForgotController.java</strong></p>\n<pre><code>@RequestMapping(value = &quot;forgot.do&quot;, method = RequestMethod.GET)\npublic ModelAndView forgotCreds(HttpServletRequest request,\n                                      HttpServletResponse response) throws Exception {\n    //returns or calls a view 'forgot.jsp' \n}\n</code></pre>\n<p><strong>application.properties</strong></p>\n<pre><code>server.servlet.context-path=/login\nstatic.contextPath=/static\n</code></pre>\n<p><strong>dispatcher-servlet.xml</strong></p>\n<pre><code>.\n.\n&lt;bean id=&quot;viewResolver&quot;\n      class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;\n    &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/views/&quot;/&gt;\n    &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;\n&lt;/bean&gt;\n.\n.\nother config\n</code></pre>\n<p><strong>ViewRegistry.java</strong></p>\n<pre><code>@Configuration\npublic class ViewRegistry implements WebMvcConfigurer {\n\n@Override\npublic void addResourceHandlers(ResourceHandlerRegistry registry) {\n        registry.addResourceHandler(&quot;/static/**&quot;).addResourceLocations(&quot;classpath:build/dist/static/&quot;);\n    \n    }\n}\n</code></pre>\n<p><strong>Application.java</strong></p>\n<pre><code>@SpringBootApplication\n@ImportResource(\n        locations = {\n                &quot;classpath:/WEB-INF/config/dispatcher-servlet.xml&quot;\n})\npublic class Application extends SpringBootServletInitializer {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>My application that initiates as <strong>localhost:8080/login/forgot.do</strong>, should load static resources from <strong>localhost:8080/static/css/style.css</strong>, but instead I'm getting 404 not found for static resources. And, if I manually check for static content as <strong>localhost:8080/login/static/css/style.css</strong>, it's available. How can i get my spring boot application to serve static pages from '/static' context as <strong>localhost:8080/static/..</strong>?</p>\n<p>Any help would be appreciated. Thanks in advance!</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1689864587,"post_id":76731078,"comment_id":135276437,"body_markdown":"`if(obj.isAssignableFrom(entry.getClass()))` might be what you are looking for","body":"<code>if(obj.isAssignableFrom(entry.getClass()))</code> might be what you are looking for"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689929301,"post_id":76731078,"comment_id":135285586,"body_markdown":"Note that getting a list of entries from `getResourceAsStream` for a package is not a guaranteed behavior. This may work in the development environment and break in production, depending on the form of deployment. Consider using [`ServiceLoader`](https://docs.oracle.com/javase/8/docs/api/?java/util/ServiceLoader.html) instead. But you are also confusing classes and objects. A `Class` object is not an instance of your class, hence you can’t use `instanceof`, neither can you “retrieve the id on(sic) the object”, as there is no object, only a class. And a `Set` is not a `List`.","body":"Note that getting a list of entries from <code>getResourceAsStream</code> for a package is not a guaranteed behavior. This may work in the development environment and break in production, depending on the form of deployment. Consider using <a href=\"https://docs.oracle.com/javase/8/docs/api/?java/util/ServiceLoader.html\" rel=\"nofollow noreferrer\"><code>ServiceLoader</code></a> instead. But you are also confusing classes and objects. A <code>Class</code> object is not an instance of your class, hence you can’t use <code>instanceof</code>, neither can you “retrieve the id on(sic) the object”, as there is no object, only a class. And a <code>Set</code> is not a <code>List</code>."},{"owner":{"account_id":17599454,"reputation":3,"user_id":12769744,"display_name":"Yfoem"},"score":0,"creation_date":1689943292,"post_id":76731078,"comment_id":135288249,"body_markdown":"@OHGODSPIDERS sorry but it&#39;s didn&#39;t work for me, the bool is always false","body":"@OHGODSPIDERS sorry but it&#39;s didn&#39;t work for me, the bool is always false"},{"owner":{"account_id":17599454,"reputation":3,"user_id":12769744,"display_name":"Yfoem"},"score":0,"creation_date":1689943296,"post_id":76731078,"comment_id":135288251,"body_markdown":"@Holger Thanks for the warning. I wil check ServiceLoader","body":"@Holger Thanks for the warning. I wil check ServiceLoader"}],"answers":[{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689973963,"creation_date":1689973515,"answer_id":76741240,"question_id":76731078,"body_markdown":"```java\r\npublic Set&lt;Class&lt;?&gt;&gt; findAllClassesUsingClassLoader(String packageName) {}\r\n```\r\n\r\nIf what you want to do is test whether or not `FooChildX` actual type is `Foo` or a subtype, you&#39;ve got it:\r\n\r\n```java\r\nFooChildX.class.isAssignableFrom(Foo.class);\r\n````\r\n----\r\nThere&#39;s a framework [Reflections][1] you can use it to do it very easily:\r\n```java\r\npublic static void main(String... args) {\r\n    Set&lt;Class&lt;? extends FooChild&gt;&gt; classes = findAllClasses(&quot;foo&quot;, FooChild.class);\r\n\r\n    for (Class&lt;?&gt; cls : classes) {\r\n        // do smth\r\n    }\r\n}\r\n\r\npublic static &lt;T&gt; Set&lt;Class&lt;? extends T&gt;&gt; findAllClasses(String packageName, Class&lt;T&gt; cls) {\r\n    return new Reflections(packageName).getSubTypesOf(cls);\r\n}\r\n```\r\n\r\n  [1]: https://github.com/ronmamo/reflections","title":"Check that an object&#39;s class is contained in a specific package and cast it","body":"<pre class=\"lang-java prettyprint-override\"><code>public Set&lt;Class&lt;?&gt;&gt; findAllClassesUsingClassLoader(String packageName) {}\n</code></pre>\n<p>If what you want to do is test whether or not <code>FooChildX</code> actual type is <code>Foo</code> or a subtype, you've got it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FooChildX.class.isAssignableFrom(Foo.class);\n</code></pre>\n<hr />\n<p>There's a framework <a href=\"https://github.com/ronmamo/reflections\" rel=\"nofollow noreferrer\">Reflections</a> you can use it to do it very easily:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    Set&lt;Class&lt;? extends FooChild&gt;&gt; classes = findAllClasses(&quot;foo&quot;, FooChild.class);\n\n    for (Class&lt;?&gt; cls : classes) {\n        // do smth\n    }\n}\n\npublic static &lt;T&gt; Set&lt;Class&lt;? extends T&gt;&gt; findAllClasses(String packageName, Class&lt;T&gt; cls) {\n    return new Reflections(packageName).getSubTypesOf(cls);\n}\n</code></pre>\n"}],"owner":{"account_id":17599454,"reputation":3,"user_id":12769744,"display_name":"Yfoem"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689973963,"creation_date":1689864358,"question_id":76731078,"body_markdown":"I have a java code (java 8) that call a service returning an object (class Foo)\r\n\r\nThe Foo class is inherited by child classes (FooChild1, FooChild2 ... contained in a package, named &quot;packageFoo&quot;) and other child classes.\r\n\r\nI have an id on FooChildX (from packageFoo). \r\n\r\nI want to retrieve the id on the object if its class is a child class of Foo. \r\nI can&#39;t modify the service or edit the Foo class (or child classes)\r\n\r\nI&#39;ve extracted the list of classes present in packageFoo. I&#39;m using the method on baeldung site for the extraction : \r\n\r\n     public Set&lt;Class&gt; findAllClassesUsingClassLoader(String packageName) {\r\n        InputStream stream = ClassLoader.getSystemClassLoader()\r\n          .getResourceAsStream(packageName.replaceAll(&quot;[.]&quot;, &quot;/&quot;));\r\n        BufferedReader reader = new BufferedReader(new InputStreamReader(stream));\r\n        return reader.lines()\r\n          .filter(line -&gt; line.endsWith(&quot;.class&quot;))\r\n          .map(line -&gt; getClass(line, packageName))\r\n          .collect(Collectors.toSet());\r\n    }\r\n \r\n    private Class getClass(String className, String packageName) {\r\n        try {\r\n            return Class.forName(packageName + &quot;.&quot;\r\n              + className.substring(0, className.lastIndexOf(&#39;.&#39;)));\r\n        } catch (ClassNotFoundException e) {\r\n            // handle the exception\r\n        }\r\n        return null;\r\n    }\r\n\r\nBut I can&#39;t perform instanceof and cast on my extracted list\r\n\r\n    for(Class obj : classesList){\r\n            if(entry instanceof obj ) {\r\n               (obj) entry\r\n            }\r\n    }\r\n \r\n\r\nI don&#39;t want specifying every class in my package to keep light maintainability if possible. \r\n\r\n    if(entry instanceof FooChild1) {...} \r\n    if(entry instanceof FooChild2) {...}\r\n\r\n\r\nDo you have a solution? ","title":"Check that an object&#39;s class is contained in a specific package and cast it","body":"<p>I have a java code (java 8) that call a service returning an object (class Foo)</p>\n<p>The Foo class is inherited by child classes (FooChild1, FooChild2 ... contained in a package, named &quot;packageFoo&quot;) and other child classes.</p>\n<p>I have an id on FooChildX (from packageFoo).</p>\n<p>I want to retrieve the id on the object if its class is a child class of Foo.\nI can't modify the service or edit the Foo class (or child classes)</p>\n<p>I've extracted the list of classes present in packageFoo. I'm using the method on baeldung site for the extraction :</p>\n<pre><code> public Set&lt;Class&gt; findAllClassesUsingClassLoader(String packageName) {\n    InputStream stream = ClassLoader.getSystemClassLoader()\n      .getResourceAsStream(packageName.replaceAll(&quot;[.]&quot;, &quot;/&quot;));\n    BufferedReader reader = new BufferedReader(new InputStreamReader(stream));\n    return reader.lines()\n      .filter(line -&gt; line.endsWith(&quot;.class&quot;))\n      .map(line -&gt; getClass(line, packageName))\n      .collect(Collectors.toSet());\n}\n\nprivate Class getClass(String className, String packageName) {\n    try {\n        return Class.forName(packageName + &quot;.&quot;\n          + className.substring(0, className.lastIndexOf('.')));\n    } catch (ClassNotFoundException e) {\n        // handle the exception\n    }\n    return null;\n}\n</code></pre>\n<p>But I can't perform instanceof and cast on my extracted list</p>\n<pre><code>for(Class obj : classesList){\n        if(entry instanceof obj ) {\n           (obj) entry\n        }\n}\n</code></pre>\n<p>I don't want specifying every class in my package to keep light maintainability if possible.</p>\n<pre><code>if(entry instanceof FooChild1) {...} \nif(entry instanceof FooChild2) {...}\n</code></pre>\n<p>Do you have a solution?</p>\n"},{"tags":["java","spring-boot","deployment","artifactory"],"comments":[{"owner":{"account_id":17138155,"reputation":266,"user_id":12402748,"display_name":"shaibz"},"score":0,"creation_date":1689855952,"post_id":76725936,"comment_id":135274269,"body_markdown":"which kind of client you are using to consume or deploy these files? What are the files which you produce? Are you using Maven or Gradle? What&#39;s wrong with curl?","body":"which kind of client you are using to consume or deploy these files? What are the files which you produce? Are you using Maven or Gradle? What&#39;s wrong with curl?"},{"owner":{"account_id":2683594,"reputation":490,"user_id":2318409,"accept_rate":80,"display_name":"Gary Greenberg"},"score":0,"creation_date":1689872065,"post_id":76725936,"comment_id":135278172,"body_markdown":"I am using Maven. I am creating a REST service that is in its own turn calling other APIs to get data, combine them into a tarball and deploy to the artifactory. Nothing is wrong with curl for someone who is writing a shell script, but I am writing a Java service and JFrog documentation of their REST API is horrible. That is why I am asking question here.","body":"I am using Maven. I am creating a REST service that is in its own turn calling other APIs to get data, combine them into a tarball and deploy to the artifactory. Nothing is wrong with curl for someone who is writing a shell script, but I am writing a Java service and JFrog documentation of their REST API is horrible. That is why I am asking question here."},{"owner":{"account_id":17138155,"reputation":266,"user_id":12402748,"display_name":"shaibz"},"score":0,"creation_date":1690099190,"post_id":76725936,"comment_id":135303637,"body_markdown":"In order to debug it I suggest checking the artifactory-request.log, perhaps the request doesn&#39;t reach Artifactory correctly.\nFor example the PUT request should look like &quot;https://your-artifactory-url/artifactory/repo-name/path/to/file.jar&quot;","body":"In order to debug it I suggest checking the artifactory-request.log, perhaps the request doesn&#39;t reach Artifactory correctly. For example the PUT request should look like &quot;<a href=\"https://your-artifactory-url/artifactory/repo-name/path/to/file.jar\" rel=\"nofollow noreferrer\">your-artifactory-url/artifactory/repo-name/path/to/file.jar</a>&zwnj;&#8203;&quot;"},{"owner":{"account_id":2683594,"reputation":490,"user_id":2318409,"accept_rate":80,"display_name":"Gary Greenberg"},"score":0,"creation_date":1690215321,"post_id":76725936,"comment_id":135319096,"body_markdown":"Sorry, but you are quoting JFrog documentation, which is a) useless, b) incorrect.","body":"Sorry, but you are quoting JFrog documentation, which is a) useless, b) incorrect."}],"owner":{"account_id":2683594,"reputation":490,"user_id":2318409,"accept_rate":80,"display_name":"Gary Greenberg"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":131,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689973309,"creation_date":1689812309,"question_id":76725936,"body_markdown":"I am developing a SpringBoot application that generates some binary data blob.\r\nI can write it to a file, but per my requirements this data shall be stored in the JFrog artifactory in the specified directory with the particular name.\r\n\r\nI spent couple days studying JFrog REST API documentation, but it only provides CURL and CLI interfaces without much of details. It does describe few headers, but it is quite unclear what are request params, body, etc, what would be possible return codes and responses. \r\n \r\nI did find here post regarding downloads from the artifactory:\r\nhttps://stackoverflow.com/questions/73024804/how-to-connect-and-download-artifacts-from-jfrog-artifactory-in-a-spring-boot-ap/73033720#73033720\r\nI did test it for download and it is working. Using it as example I created my own function to do upload (deployment):\r\n\r\n        OperationStatus doUpload(String filePath, String folder, String name) \r\n            throws MalformedURLException, ProtocolException, IOException {\r\n        StringBuilder pathBuilder = new StringBuilder(this.getBaseUrl()).append(&#39;/&#39;)\r\n                .append(this.target);\r\n        if(folder != null) {\r\n            pathBuilder.append(&#39;/&#39;).append(folder);\r\n        }\r\n        pathBuilder.append(&#39;/&#39;).append(name);\r\n        URL repositoryUrl = new URL(pathBuilder.toString());\r\n        HttpURLConnection connection = (HttpURLConnection) repositoryUrl.openConnection();\r\n        connection.addRequestProperty(ARTIFACTORY_TOKEN_HEADER_NAME, token);\r\n        connection.setRequestMethod(&quot;PUT&quot;);\r\n        connection.setDoOutput(true);\r\n        try (OutputStream output = connection.getOutputStream()) {\r\n            try (FileInputStream input = new FileInputStream(new File(filePath))) {\r\n                int b;\r\n                while((b = input.read()) != -1) {\r\n                    output.write(b);\r\n                }\r\n            }\r\n            output.flush();\r\n        }\r\n        connection.connect();\r\n        return new OperationStatus(&quot;success&quot;, &quot;Artifact &quot; + name + &quot; deployed&quot;);\r\n    }\r\n\r\n\r\nFunction works without errors, but artifact does not appear in the artifactory. If someone can point out what I am doing wrong, I will appreciate it.","title":"Deploying data to the JFrog artifactory from Java SpringBoot application","body":"<p>I am developing a SpringBoot application that generates some binary data blob.\nI can write it to a file, but per my requirements this data shall be stored in the JFrog artifactory in the specified directory with the particular name.</p>\n<p>I spent couple days studying JFrog REST API documentation, but it only provides CURL and CLI interfaces without much of details. It does describe few headers, but it is quite unclear what are request params, body, etc, what would be possible return codes and responses.</p>\n<p>I did find here post regarding downloads from the artifactory:\n<a href=\"https://stackoverflow.com/questions/73024804/how-to-connect-and-download-artifacts-from-jfrog-artifactory-in-a-spring-boot-ap/73033720#73033720\">How to connect and download artifacts from JFrog Artifactory in a Spring boot application</a>\nI did test it for download and it is working. Using it as example I created my own function to do upload (deployment):</p>\n<pre><code>    OperationStatus doUpload(String filePath, String folder, String name) \n        throws MalformedURLException, ProtocolException, IOException {\n    StringBuilder pathBuilder = new StringBuilder(this.getBaseUrl()).append('/')\n            .append(this.target);\n    if(folder != null) {\n        pathBuilder.append('/').append(folder);\n    }\n    pathBuilder.append('/').append(name);\n    URL repositoryUrl = new URL(pathBuilder.toString());\n    HttpURLConnection connection = (HttpURLConnection) repositoryUrl.openConnection();\n    connection.addRequestProperty(ARTIFACTORY_TOKEN_HEADER_NAME, token);\n    connection.setRequestMethod(&quot;PUT&quot;);\n    connection.setDoOutput(true);\n    try (OutputStream output = connection.getOutputStream()) {\n        try (FileInputStream input = new FileInputStream(new File(filePath))) {\n            int b;\n            while((b = input.read()) != -1) {\n                output.write(b);\n            }\n        }\n        output.flush();\n    }\n    connection.connect();\n    return new OperationStatus(&quot;success&quot;, &quot;Artifact &quot; + name + &quot; deployed&quot;);\n}\n</code></pre>\n<p>Function works without errors, but artifact does not appear in the artifactory. If someone can point out what I am doing wrong, I will appreciate it.</p>\n"},{"tags":["java","lambda","java-8"],"answers":[{"comments":[{"owner":{"account_id":3175071,"reputation":20715,"user_id":2683146,"accept_rate":85,"display_name":"Jean-Fran&#231;ois Savard"},"score":27,"creation_date":1436480057,"post_id":23525446,"comment_id":50644336,"body_markdown":"Note that as of Java 9, `_` will be disallowed as any legal identifier names and not only as a lambda parameter name. This  was actually fixed in build 43 : https://bugs.openjdk.java.net/browse/JDK-8061549","body":"Note that as of Java 9, <code>_</code> will be disallowed as any legal identifier names and not only as a lambda parameter name. This  was actually fixed in build 43 : <a href=\"https://bugs.openjdk.java.net/browse/JDK-8061549\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8061549</a>"},{"owner":{"account_id":208696,"reputation":2360,"user_id":459347,"accept_rate":100,"display_name":"lscoughlin"},"score":2,"creation_date":1438001569,"post_id":23525446,"comment_id":51252333,"body_markdown":"I can&#39;t find any reference as to why?","body":"I can&#39;t find any reference as to why?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1438001862,"post_id":23525446,"comment_id":51252572,"body_markdown":"@lscoughlin: Isn’t “Future versions of the Java programming language may reserve this name as a keyword and/or give it special semantics” statement enough? Well, replace “may reserve” by “will use”, and you’ll get the picture. Maybe [this mail reference](http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010670.html) helps…","body":"@lscoughlin: Isn’t “Future versions of the Java programming language may reserve this name as a keyword and/or give it special semantics” statement enough? Well, replace “may reserve” by “will use”, and you’ll get the picture. Maybe <a href=\"http://mail.openjdk.java.net/pipermail/lambda-dev/2013-July/010670.html\" rel=\"nofollow noreferrer\">this mail reference</a> helps…"},{"owner":{"account_id":208696,"reputation":2360,"user_id":459347,"accept_rate":100,"display_name":"lscoughlin"},"score":1,"creation_date":1438007354,"post_id":23525446,"comment_id":51256679,"body_markdown":"@Holger, yeah -- helps a little.  It just seems so odd and arbitrary to me.","body":"@Holger, yeah -- helps a little.  It just seems so odd and arbitrary to me."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1438008157,"post_id":23525446,"comment_id":51257274,"body_markdown":"@lscoughlin: it seems to be inspired by the Scala programming language. Besides being close to other languages, it don’t see any reason to deprecate an identify instead of using one of the currently unused special characters, say `#`, `&#167;`, or `&#182;`","body":"@lscoughlin: it seems to be inspired by the Scala programming language. Besides being close to other languages, it don’t see any reason to deprecate an identify instead of using one of the currently unused special characters, say <code>#</code>, <code>&#167;</code>, or <code>&#182;</code>"},{"owner":{"account_id":990800,"reputation":2791,"user_id":1858296,"accept_rate":62,"display_name":"Arturo Torres S&#225;nchez"},"score":11,"creation_date":1438019040,"post_id":23525446,"comment_id":51264211,"body_markdown":"What is this? Java breaking backwards compatibility?","body":"What is this? Java breaking backwards compatibility?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":11,"creation_date":1438019562,"post_id":23525446,"comment_id":51264511,"body_markdown":"@Arturo Torres S&#225;nchez: that’s nothing new. There were times when `enum` and `assert` were legal identifiers…","body":"@Arturo Torres S&#225;nchez: that’s nothing new. There were times when <code>enum</code> and <code>assert</code> were legal identifiers…"},{"owner":{"account_id":208696,"reputation":2360,"user_id":459347,"accept_rate":100,"display_name":"lscoughlin"},"score":0,"creation_date":1438087230,"post_id":23525446,"comment_id":51295066,"body_markdown":"@Holger I know where it comes from i just find it odd, especially in it&#39;s extremely limited nature.  And I completely agree with you about there being plenty of other characters or character combinations left that would work just fine with out being out place if used in other contexts ( @, ^, or even &#39;..&#39; come to mind ) .","body":"@Holger I know where it comes from i just find it odd, especially in it&#39;s extremely limited nature.  And I completely agree with you about there being plenty of other characters or character combinations left that would work just fine with out being out place if used in other contexts ( @, ^, or even &#39;..&#39; come to mind ) ."},{"owner":{"account_id":113266,"reputation":62487,"user_id":298389,"accept_rate":100,"display_name":"om-nom-nom"},"score":12,"creation_date":1438117148,"post_id":23525446,"comment_id":51315718,"body_markdown":"@Holger actually there are tons of languages that use underscore as a name placeholder (Scala, Clojure, F#, SML, Erlang, just to name a few). It&#39;s an established pattern that traces back to 90s or 80s, I believe, so disobeying it is odd.","body":"@Holger actually there are tons of languages that use underscore as a name placeholder (Scala, Clojure, F#, SML, Erlang, just to name a few). It&#39;s an established pattern that traces back to 90s or 80s, I believe, so disobeying it is odd."},{"owner":{"account_id":2668714,"reputation":1931,"user_id":2306536,"accept_rate":66,"display_name":"ASA"},"score":3,"creation_date":1446192472,"post_id":23525446,"comment_id":54650775,"body_markdown":"Apples Swift uses an underscore. The underscore can be placed before method argument names. It makes writing variable names unnecessary when calling methods.","body":"Apples Swift uses an underscore. The underscore can be placed before method argument names. It makes writing variable names unnecessary when calling methods."},{"owner":{"account_id":16224013,"reputation":1568,"user_id":11714860,"display_name":"Sapphire_Brick"},"score":0,"creation_date":1593194034,"post_id":23525446,"comment_id":110704476,"body_markdown":"_So much for backwards compatibility._","body":"<i>So much for backwards compatibility.</i>"},{"owner":{"account_id":2777323,"reputation":4033,"user_id":2390644,"display_name":"William Price"},"score":2,"creation_date":1642352542,"post_id":23525446,"comment_id":125042762,"body_markdown":"For the record, it&#39;s a _compile-time_ compatibility break. This doesn&#39;t break runtime backwards-compatibility for existing classes.","body":"For the record, it&#39;s a <i>compile-time</i> compatibility break. This doesn&#39;t break runtime backwards-compatibility for existing classes."}],"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":12,"down_vote_count":1,"up_vote_count":93,"is_accepted":true,"score":92,"last_activity_date":1399487119,"creation_date":1399487119,"answer_id":23525446,"question_id":23523946,"body_markdown":"The place to look is [JLS &#167;15.27.1. Lambda Parameters](http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.27.1)\n\n&gt; **It is a compile-time error if a lambda parameter has the name _ (that is, a single underscore character).**\n&gt;\n&gt; &lt;sup&gt;The use of the variable name _ in any context is discouraged. Future versions of the Java programming language may reserve this name as a keyword and/or give it special semantics.\n&lt;/sup&gt;\n\nSo the Eclipse message is misleading, especially as the same message is used for both cases, when an error is generated for a lambda parameter or when a warning is generated for any other `_` identifier.\n","title":"_ (underscore) is a reserved keyword","body":"<p>The place to look is <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-15.html#jls-15.27.1\" rel=\"noreferrer\">JLS §15.27.1. Lambda Parameters</a></p>\n<blockquote>\n<p><strong>It is a compile-time error if a lambda parameter has the name _ (that is, a single underscore character).</strong></p>\n<p><sup>The use of the variable name _ in any context is discouraged. Future versions of the Java programming language may reserve this name as a keyword and/or give it special semantics.\n</sup></p>\n</blockquote>\n<p>So the Eclipse message is misleading, especially as the same message is used for both cases, when an error is generated for a lambda parameter or when a warning is generated for any other <code>_</code> identifier.</p>\n"},{"tags":[],"owner":{"account_id":540573,"reputation":12635,"user_id":908821,"accept_rate":68,"display_name":"Angel Koh"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1506512904,"creation_date":1506512904,"answer_id":46447095,"question_id":23523946,"body_markdown":"**Java Language Changes for Java SE 9**\nhttps://docs.oracle.com/javase/9/language/toc.htm#JSLAN-GUID-16A5183A-DC0D-4A96-B9D8-AAC9671222DD \n\n\nFrom Java 9, the _ character cannot be used as an identifier anymore, not just within the lambda context\n\n&gt;The underscore character is not a legal name.\n&gt;\n&gt;If you use the underscore character (&quot;_&quot;) an identifier, your source code can no longer be compiled.","title":"_ (underscore) is a reserved keyword","body":"<p><strong>Java Language Changes for Java SE 9</strong>\n<a href=\"https://docs.oracle.com/javase/9/language/toc.htm#JSLAN-GUID-16A5183A-DC0D-4A96-B9D8-AAC9671222DD\" rel=\"noreferrer\">https://docs.oracle.com/javase/9/language/toc.htm#JSLAN-GUID-16A5183A-DC0D-4A96-B9D8-AAC9671222DD</a></p>\n<p>From Java 9, the _ character cannot be used as an identifier anymore, not just within the lambda context</p>\n<blockquote>\n<p>The underscore character is not a legal name.</p>\n<p>If you use the underscore character (&quot;_&quot;) an identifier, your source code can no longer be compiled.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":3,"creation_date":1537260077,"post_id":51254912,"comment_id":91709118,"body_markdown":"This usage is discussed by Brian Goetz in [his Devoxx talk of 2017-11](https://youtu.be/qul2B8iPC-o?t=43m1s) about [Project Amber](http://openjdk.java.net/projects/amber/).","body":"This usage is discussed by Brian Goetz in <a href=\"https://youtu.be/qul2B8iPC-o?t=43m1s\" rel=\"nofollow noreferrer\">his Devoxx talk of 2017-11</a> about <a href=\"http://openjdk.java.net/projects/amber/\" rel=\"nofollow noreferrer\">Project Amber</a>."},{"owner":{"account_id":2103967,"reputation":14454,"user_id":1870795,"accept_rate":68,"display_name":"Manuel"},"score":0,"creation_date":1572036542,"post_id":51254912,"comment_id":103449563,"body_markdown":"OK, but what is the alternative to denote unused parameters in J8? Is that not possible at all?","body":"OK, but what is the alternative to denote unused parameters in J8? Is that not possible at all?"},{"owner":{"account_id":6333754,"reputation":2065,"user_id":4917881,"display_name":"aventurin"},"score":2,"creation_date":1576755506,"post_id":51254912,"comment_id":105005164,"body_markdown":"We currently use `$` for this purpose.","body":"We currently use <code>$</code> for this purpose."},{"owner":{"account_id":47487,"reputation":3720,"user_id":140707,"display_name":"Frans"},"score":9,"creation_date":1591602936,"post_id":51254912,"comment_id":110107336,"body_markdown":"I&#39;m on Java 14 now, and I still cannot use an underscore as an unnamed lambda parameter. Whatever the JCP set out to achieve, it appears they have achieved the opposite.","body":"I&#39;m on Java 14 now, and I still cannot use an underscore as an unnamed lambda parameter. Whatever the JCP set out to achieve, it appears they have achieved the opposite."},{"owner":{"account_id":1509064,"reputation":1842,"user_id":1411628,"accept_rate":100,"display_name":"Alexandre de Champeaux"},"score":1,"creation_date":1591659324,"post_id":51254912,"comment_id":110134519,"body_markdown":"@Frans Note that the JEP is (as of today) only in candidate stage. It has not been completed yet.\nFor more details on the JEP process see [JEP 1](https://openjdk.java.net/jeps/1)","body":"@Frans Note that the JEP is (as of today) only in candidate stage. It has not been completed yet. For more details on the JEP process see <a href=\"https://openjdk.java.net/jeps/1\" rel=\"nofollow noreferrer\">JEP 1</a>"},{"owner":{"account_id":47487,"reputation":3720,"user_id":140707,"display_name":"Frans"},"score":1,"creation_date":1591701856,"post_id":51254912,"comment_id":110149496,"body_markdown":"@AlexandredeChampeaux The original comment was from 2014 so it seemed reasonable to assume that both phases would have been completed. I don&#39;t quite see the merits of disallowing an underscore only to allow it again later (albeit with slightly different semantics) but I guess the wise men had their reasons.","body":"@AlexandredeChampeaux The original comment was from 2014 so it seemed reasonable to assume that both phases would have been completed. I don&#39;t quite see the merits of disallowing an underscore only to allow it again later (albeit with slightly different semantics) but I guess the wise men had their reasons."},{"owner":{"account_id":16224013,"reputation":1568,"user_id":11714860,"display_name":"Sapphire_Brick"},"score":1,"creation_date":1623193640,"post_id":51254912,"comment_id":120008022,"body_markdown":"@Manuel I like to use two underscores as an unused parameter, but I&#39;ve never seen anyone else do that.","body":"@Manuel I like to use two underscores as an unused parameter, but I&#39;ve never seen anyone else do that."}],"tags":[],"owner":{"account_id":1509064,"reputation":1842,"user_id":1411628,"accept_rate":100,"display_name":"Alexandre de Champeaux"},"comment_count":7,"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1531283329,"creation_date":1531175696,"answer_id":51254912,"question_id":23523946,"body_markdown":"It is the Phase 2 of [JEP 302][1], that is going to add underscore as a special character to denote unused parameters in lambda expressions.\r\n\r\n\r\n&gt; ### Treatment of underscores\r\n&gt;\r\n&gt; In many languages, it is common to use an underscore (`_`) to denote an unnamed lambda parameter (and similarly for method and exception parameters):\r\n&gt; \r\n&gt; `BiFunction&lt;Integer, String, String&gt; biss = (i, _) -&gt; String.valueOf(i);`\r\n&gt; \r\n&gt; This allows stronger static checking of unused arguments, and also allows multiple arguments to be marked as unused. However, because underscore was a valid identifier as of Java 8, compatibility required us to take a more indirect path to getting to where underscore could serve this role in Java. Phase 1 was forbidding underscore as a lambda formal parameter name in Java 8 (this had no compatibility consequence, since lambdas did not exist previously) and a warning was issued for using underscore as an identifier in other places. Phase 2 came in Java 9, when this warning became an error. We are now free to complete the planned rehabilitation of underscore to indicate an unused lambda, method, or catch formal parameter.\r\n\r\n  [1]: http://openjdk.java.net/jeps/302","title":"_ (underscore) is a reserved keyword","body":"<p>It is the Phase 2 of <a href=\"http://openjdk.java.net/jeps/302\" rel=\"noreferrer\">JEP 302</a>, that is going to add underscore as a special character to denote unused parameters in lambda expressions.</p>\n\n<blockquote>\n  <h3>Treatment of underscores</h3>\n  \n  <p>In many languages, it is common to use an underscore (<code>_</code>) to denote an unnamed lambda parameter (and similarly for method and exception parameters):</p>\n  \n  <p><code>BiFunction&lt;Integer, String, String&gt; biss = (i, _) -&gt; String.valueOf(i);</code></p>\n  \n  <p>This allows stronger static checking of unused arguments, and also allows multiple arguments to be marked as unused. However, because underscore was a valid identifier as of Java 8, compatibility required us to take a more indirect path to getting to where underscore could serve this role in Java. Phase 1 was forbidding underscore as a lambda formal parameter name in Java 8 (this had no compatibility consequence, since lambdas did not exist previously) and a warning was issued for using underscore as an identifier in other places. Phase 2 came in Java 9, when this warning became an error. We are now free to complete the planned rehabilitation of underscore to indicate an unused lambda, method, or catch formal parameter.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689973121,"creation_date":1684982132,"answer_id":76328541,"question_id":23523946,"body_markdown":"# tl;dr\r\n\r\nAs Java evolves, the underscore character takes on a special new meaning: elide the type and name of a `record` component.\r\n\r\n\r\n# Underscore = eliding type and name\r\n\r\nAs a preview feature in [Java 21][1], we see the underscore character used to:\r\n\r\n - [elide][2] the type and name of a [record][3] component in pattern matching.\r\n - elide the identifier which follows the type or var in a type pattern.\r\n\r\nSee [*JEP 443: Unnamed Patterns and Variables (Preview)*](https://openjdk.org/jeps/443).\r\n\r\n## Underscore as identifier disallowed in Java 9+\r\n\r\nThe underscore character (`_`) is code point 95 decimal, 5F hex. Formally named `LOW LINE` in the [Unicode][4] standard. \r\n\r\nUsing underscore as an identifier throws:\r\n\r\n - a warning in Java 8.\r\n - an error in Java 9+. \r\n\r\nSee: [*JEP 213: Milling Project Coin*](https://openjdk.org/jeps/213).\r\n\r\n\r\n  [1]: https://openjdk.org/projects/jdk/21/\r\n  [2]: https://en.wiktionary.org/wiki/elide\r\n  [3]: https://openjdk.org/jeps/395\r\n  [4]: https://en.wikipedia.org/wiki/Unicode","title":"_ (underscore) is a reserved keyword","body":"<h1>tl;dr</h1>\n<p>As Java evolves, the underscore character takes on a special new meaning: elide the type and name of a <code>record</code> component.</p>\n<h1>Underscore = eliding type and name</h1>\n<p>As a preview feature in <a href=\"https://openjdk.org/projects/jdk/21/\" rel=\"nofollow noreferrer\">Java 21</a>, we see the underscore character used to:</p>\n<ul>\n<li><a href=\"https://en.wiktionary.org/wiki/elide\" rel=\"nofollow noreferrer\">elide</a> the type and name of a <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">record</a> component in pattern matching.</li>\n<li>elide the identifier which follows the type or var in a type pattern.</li>\n</ul>\n<p>See <a href=\"https://openjdk.org/jeps/443\" rel=\"nofollow noreferrer\"><em>JEP 443: Unnamed Patterns and Variables (Preview)</em></a>.</p>\n<h2>Underscore as identifier disallowed in Java 9+</h2>\n<p>The underscore character (<code>_</code>) is code point 95 decimal, 5F hex. Formally named <code>LOW LINE</code> in the <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a> standard.</p>\n<p>Using underscore as an identifier throws:</p>\n<ul>\n<li>a warning in Java 8.</li>\n<li>an error in Java 9+.</li>\n</ul>\n<p>See: <a href=\"https://openjdk.org/jeps/213\" rel=\"nofollow noreferrer\"><em>JEP 213: Milling Project Coin</em></a>.</p>\n"}],"owner":{"account_id":1781872,"reputation":14665,"user_id":1624376,"accept_rate":76,"display_name":"Aubin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33633,"favorite_count":0,"down_vote_count":0,"up_vote_count":106,"accepted_answer_id":23525446,"answer_count":4,"score":106,"last_activity_date":1689973121,"creation_date":1399482140,"question_id":23523946,"body_markdown":"I&#39;ve just replaced `s` in the following lambda expression by `_`:\r\n\r\n    s -&gt; Integer.parseInt(s)\r\n\r\nEclipse compiler says:\r\n&gt;&#39;_&#39; should not be used as an identifier, since it is a reserved keyword from source level 1.8 on.\r\n\r\nI haven&#39;t found any explanation in the [JLS &#167;3.9][1] Lexical Structure / Keywords.\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.9","title":"_ (underscore) is a reserved keyword","body":"<p>I've just replaced <code>s</code> in the following lambda expression by <code>_</code>:</p>\n\n<pre><code>s -&gt; Integer.parseInt(s)\n</code></pre>\n\n<p>Eclipse compiler says:</p>\n\n<blockquote>\n  <p>'_' should not be used as an identifier, since it is a reserved keyword from source level 1.8 on.</p>\n</blockquote>\n\n<p>I haven't found any explanation in the <a href=\"http://docs.oracle.com/javase/specs/jls/se8/html/jls-3.html#jls-3.9\" rel=\"noreferrer\">JLS §3.9</a> Lexical Structure / Keywords.</p>\n"},{"tags":["java","sharepoint","microsoft-graph-api"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1689971355,"post_id":76740961,"comment_id":135293276,"body_markdown":"Considering that 401 means unauthorized, it seems you can&#39;t access the resource because you don&#39;t have a valid token to read it. Where does the token come from? Are you sure it&#39;s a bearer (usually Microsoft uses Oauth)?","body":"Considering that 401 means unauthorized, it seems you can&#39;t access the resource because you don&#39;t have a valid token to read it. Where does the token come from? Are you sure it&#39;s a bearer (usually Microsoft uses Oauth)?"},{"owner":{"account_id":367805,"reputation":143,"user_id":714212,"display_name":"rread"},"score":0,"creation_date":1689972990,"post_id":76740961,"comment_id":135293455,"body_markdown":"i added my code to get the token, and its the same one i use for my calls to graphclient","body":"i added my code to get the token, and its the same one i use for my calls to graphclient"}],"owner":{"account_id":367805,"reputation":143,"user_id":714212,"display_name":"rread"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689972963,"creation_date":1689970204,"question_id":76740961,"body_markdown":"My company has a system that uploads files to a sharepoint site asynchronous, and save the url to a data base.\r\n\r\nbut now it seems system is not 100% reliable, and i need now to check all the entried in the database and list the ones that do not exists in the sharepoint.\r\n\r\nSo how can i having the complete url for the file check if the file exists.\r\n\r\nThis was the code i was triying but for some reason i keep getting 401 only.\r\n\r\n```\r\nimport java.net.*;\r\nimport java.net.http.HttpClient;\r\nimport java.net.http.HttpRequest;\r\nimport java.net.http.HttpResponse;\r\n\r\n...\r\n\r\npublic static boolean checkFileExists(String fileUrl, String accessToken) {\r\n\ttry {\r\n\t\tString encodedFileUrl = fileUrl.replace(&quot; &quot;,&quot;%20&quot;);\r\n\t\tURI uri = new URI(encodedFileUrl);\r\n\t\tHttpRequest request = HttpRequest.newBuilder()\r\n\t\t\t.GET()\r\n\t\t\t.uri(uri)\r\n\t\t\t.header(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\r\n\t\t\t.build();\r\n\r\n\t\tHttpClient httpClient = HttpClient.newHttpClient();\r\n\t\tHttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\r\n\t\tint statusCode = response.statusCode();\r\n\r\n\t\treturn (statusCode &gt;= 200 &amp;&amp; statusCode &lt; 300);\r\n\t} catch (IOException | URISyntaxException | InterruptedException e) {\r\n\t\te.printStackTrace();\r\n\t\treturn false;\r\n\t}\r\n}\r\n```\r\n\r\ni tried using the microsoft graph client that i have, but i found no way to do this using the java sdk client.\r\n\r\nHere is how i get my token\r\n```\r\npublic String getAccessTokenFromUserCredentials(String username, String password) throws Exception {\r\n   AuthenticationContext context;\r\n   AuthenticationResult result;\r\n   ExecutorService service = null;\r\n   try {\r\n      service = Executors.newFixedThreadPool(1);\r\n      context = new AuthenticationContext(authority, false, service);\r\n      Future&lt;AuthenticationResult&gt; future = context.acquireToken(&quot;https://graph.microsoft.com&quot;, clientId, username, password, null);\r\n      result = future.get();\r\n   } finally {\r\n      assert service != null;\r\n      service.shutdown();\r\n   }\r\n   if (result == null) {\r\n      throw new ServiceUnavailableException(&quot;authentication result was null&quot;);\r\n   }\r\n   return result.getAccessToken();\r\n}\r\n```","title":"Using file url, and credential check if file exists","body":"<p>My company has a system that uploads files to a sharepoint site asynchronous, and save the url to a data base.</p>\n<p>but now it seems system is not 100% reliable, and i need now to check all the entried in the database and list the ones that do not exists in the sharepoint.</p>\n<p>So how can i having the complete url for the file check if the file exists.</p>\n<p>This was the code i was triying but for some reason i keep getting 401 only.</p>\n<pre><code>import java.net.*;\nimport java.net.http.HttpClient;\nimport java.net.http.HttpRequest;\nimport java.net.http.HttpResponse;\n\n...\n\npublic static boolean checkFileExists(String fileUrl, String accessToken) {\n    try {\n        String encodedFileUrl = fileUrl.replace(&quot; &quot;,&quot;%20&quot;);\n        URI uri = new URI(encodedFileUrl);\n        HttpRequest request = HttpRequest.newBuilder()\n            .GET()\n            .uri(uri)\n            .header(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken)\n            .build();\n\n        HttpClient httpClient = HttpClient.newHttpClient();\n        HttpResponse&lt;String&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\n        int statusCode = response.statusCode();\n\n        return (statusCode &gt;= 200 &amp;&amp; statusCode &lt; 300);\n    } catch (IOException | URISyntaxException | InterruptedException e) {\n        e.printStackTrace();\n        return false;\n    }\n}\n</code></pre>\n<p>i tried using the microsoft graph client that i have, but i found no way to do this using the java sdk client.</p>\n<p>Here is how i get my token</p>\n<pre><code>public String getAccessTokenFromUserCredentials(String username, String password) throws Exception {\n   AuthenticationContext context;\n   AuthenticationResult result;\n   ExecutorService service = null;\n   try {\n      service = Executors.newFixedThreadPool(1);\n      context = new AuthenticationContext(authority, false, service);\n      Future&lt;AuthenticationResult&gt; future = context.acquireToken(&quot;https://graph.microsoft.com&quot;, clientId, username, password, null);\n      result = future.get();\n   } finally {\n      assert service != null;\n      service.shutdown();\n   }\n   if (result == null) {\n      throw new ServiceUnavailableException(&quot;authentication result was null&quot;);\n   }\n   return result.getAccessToken();\n}\n</code></pre>\n"},{"tags":["java","guice"],"comments":[{"owner":{"account_id":4603196,"reputation":1932,"user_id":3733369,"accept_rate":44,"display_name":"rodridevops"},"score":0,"creation_date":1528179841,"post_id":50693221,"comment_id":88396139,"body_markdown":"Maybe, you could share with us that &quot;main&quot; function","body":"Maybe, you could share with us that &quot;main&quot; function"},{"owner":{"account_id":10538195,"reputation":45,"user_id":7765309,"accept_rate":25,"display_name":"wege"},"score":0,"creation_date":1528180115,"post_id":50693221,"comment_id":88396258,"body_markdown":"Sure, just edited the post","body":"Sure, just edited the post"},{"owner":{"account_id":4603196,"reputation":1932,"user_id":3733369,"accept_rate":44,"display_name":"rodridevops"},"score":0,"creation_date":1528180133,"post_id":50693221,"comment_id":88396266,"body_markdown":"What about line 31? could you mark it on the question?","body":"What about line 31? could you mark it on the question?"},{"owner":{"account_id":10538195,"reputation":45,"user_id":7765309,"accept_rate":25,"display_name":"wege"},"score":0,"creation_date":1528180562,"post_id":50693221,"comment_id":88396470,"body_markdown":"Line 31 is not include in the code above, but it was `exception.printStackTrace()`.","body":"Line 31 is not include in the code above, but it was <code>exception.printStackTrace()</code>."},{"owner":{"account_id":4603196,"reputation":1932,"user_id":3733369,"accept_rate":44,"display_name":"rodridevops"},"score":0,"creation_date":1528180961,"post_id":50693221,"comment_id":88396660,"body_markdown":"I can&#39;t see the big picture. Please add the code related to that stackTrace printing","body":"I can&#39;t see the big picture. Please add the code related to that stackTrace printing"},{"owner":{"account_id":4124531,"reputation":732,"user_id":5928411,"display_name":"Programmer Dancuk"},"score":0,"creation_date":1528181417,"post_id":50693221,"comment_id":88396919,"body_markdown":"Can you please tell Java version you are using? Java 9+ is breaking most of things","body":"Can you please tell Java version you are using? Java 9+ is breaking most of things"},{"owner":{"account_id":10538195,"reputation":45,"user_id":7765309,"accept_rate":25,"display_name":"wege"},"score":0,"creation_date":1528181567,"post_id":50693221,"comment_id":88396988,"body_markdown":"I use Java 10, but also tried 8 and 9. Nothing helped.","body":"I use Java 10, but also tried 8 and 9. Nothing helped."},{"owner":{"account_id":4603196,"reputation":1932,"user_id":3733369,"accept_rate":44,"display_name":"rodridevops"},"score":0,"creation_date":1528182936,"post_id":50693221,"comment_id":88397756,"body_markdown":"which version of guice are you using?","body":"which version of guice are you using?"},{"owner":{"account_id":10538195,"reputation":45,"user_id":7765309,"accept_rate":25,"display_name":"wege"},"score":0,"creation_date":1528183155,"post_id":50693221,"comment_id":88397897,"body_markdown":"I&#39;m using Guice 4.2.0","body":"I&#39;m using Guice 4.2.0"}],"answers":[{"tags":[],"owner":{"account_id":5989141,"reputation":5020,"user_id":7725621,"accept_rate":77,"display_name":"Kohei TAMURA"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1528254150,"creation_date":1528253836,"answer_id":50711635,"question_id":50693221,"body_markdown":"&gt; I use Java 10, but also tried 8 and 9. Nothing helped. \r\n\r\nI think you didn&#39;t use Java 8 or 9 because the exception is thrown from `ClassReader` due to using Java version 10 or later .\r\n\r\nhttps://gitlab.ow2.org/asm/asm/blob/f7f44a8e306dd2bd70f0db50194f6366938579c5/src/org/objectweb/asm/ClassReader.java#L160\r\n\r\n`Opcodes.V9` means Java 9. So please check your Java version again and run with Java 9 or earlier.","title":"Guice caused throwing UncaughtExceptionHandler","body":"<blockquote>\n  <p>I use Java 10, but also tried 8 and 9. Nothing helped. </p>\n</blockquote>\n\n<p>I think you didn't use Java 8 or 9 because the exception is thrown from <code>ClassReader</code> due to using Java version 10 or later .</p>\n\n<p><a href=\"https://gitlab.ow2.org/asm/asm/blob/f7f44a8e306dd2bd70f0db50194f6366938579c5/src/org/objectweb/asm/ClassReader.java#L160\" rel=\"nofollow noreferrer\">https://gitlab.ow2.org/asm/asm/blob/f7f44a8e306dd2bd70f0db50194f6366938579c5/src/org/objectweb/asm/ClassReader.java#L160</a></p>\n\n<p><code>Opcodes.V9</code> means Java 9. So please check your Java version again and run with Java 9 or earlier.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1643451044,"post_id":70899799,"comment_id":125346150,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70899799/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":8576980,"reputation":21,"user_id":6426032,"display_name":"Naman Sachdeva"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643400978,"creation_date":1643400978,"answer_id":70899799,"question_id":50693221,"body_markdown":"I understand this is an old post. Posting the solution here for visibility -\r\n\r\nThe issue should be JDK11 incompatibility with GoogleGuice 4.0.\r\n\r\nGuice 4.0 does not support Java 9 (or above), but Guice 4.2 does. So, you should add an explicit dependency on GoogleGuice-4.2, and everything should work!","title":"Guice caused throwing UncaughtExceptionHandler","body":"<p>I understand this is an old post. Posting the solution here for visibility -</p>\n<p>The issue should be JDK11 incompatibility with GoogleGuice 4.0.</p>\n<p>Guice 4.0 does not support Java 9 (or above), but Guice 4.2 does. So, you should add an explicit dependency on GoogleGuice-4.2, and everything should work!</p>\n"},{"tags":[],"owner":{"account_id":29066382,"reputation":11,"user_id":22265865,"display_name":"user22265865"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689972717,"creation_date":1689972717,"answer_id":76741171,"question_id":50693221,"body_markdown":"If you are using JDK9 and above upgrade GoogleGuice version to 4.2 or above. I would suggest &gt;5. \r\nIt would show the actual underlying problems such as missing bindings or missing implementations. Hope this helps. ","title":"Guice caused throwing UncaughtExceptionHandler","body":"<p>If you are using JDK9 and above upgrade GoogleGuice version to 4.2 or above. I would suggest &gt;5.\nIt would show the actual underlying problems such as missing bindings or missing implementations. Hope this helps.</p>\n"}],"owner":{"account_id":10538195,"reputation":45,"user_id":7765309,"accept_rate":25,"display_name":"wege"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10777,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1689972717,"creation_date":1528179255,"question_id":50693221,"body_markdown":"I would like to use Guice in my application but it throws following exception when I want to run it:\r\n\r\n    Exception in thread &quot;main&quot; \r\n    Exception: com.google.common.util.concurrent.UncheckedExecutionException thrown from the UncaughtExceptionHandler in thread &quot;main&quot;\r\n\r\nWhen I wrap `main()` function with try... catch block I receive folloving stackTrace:\r\n\r\n    Exception in thread &quot;main&quot; com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IllegalArgumentException\r\n\t    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2047)\r\n\t    at com.google.common.cache.LocalCache.get(LocalCache.java:3869)\r\n\t    at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3873)\r\n\t    at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4798)\r\n\t    at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4804)\r\n\t    at com.google.inject.internal.util.StackTraceElements.forMember(StackTraceElements.java:71)\r\n\t    at com.google.inject.internal.Messages.formatSource(Messages.java:241)\r\n\t    at com.google.inject.internal.Messages.formatSource(Messages.java:220)\r\n\t    at com.google.inject.internal.Messages.formatMessages(Messages.java:90)\r\n\t    at com.google.inject.CreationException.getMessage(CreationException.java:50)\r\n\t    at java.base/java.lang.Throwable.getLocalizedMessage(Throwable.java:396)\r\n\t    at java.base/java.lang.Throwable.toString(Throwable.java:485)\r\n\t    at java.base/java.lang.String.valueOf(String.java:2788)\r\n\t    at java.base/java.io.PrintStream.println(PrintStream.java:897)\r\n\t    at java.base/java.lang.Throwable$WrappedPrintStream.println(Throwable.java:752)\r\n\t    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:659)\r\n\t    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:648)\r\n\t    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:639)\r\n\t    at com.github.blackjack.Main.main(Main.java:31)\r\n    Caused by: java.lang.IllegalArgumentException\r\n\t    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:160)\r\n\t    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:143)\r\n\t    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:418)\r\n\t    at com.google.inject.internal.util.LineNumbers.&lt;init&gt;(LineNumbers.java:64)\r\n\t    at com.google.inject.internal.util.StackTraceElements$1.load(StackTraceElements.java:49)\r\n\t    at com.google.inject.internal.util.StackTraceElements$1.load(StackTraceElements.java:45)\r\n\t    at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3443)\r\n\t    at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2169)\r\n\t    at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2128)\r\n\t    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2041)\r\n\t    ... 18 more\r\n\r\nFrom the information I found this exception was caused by method contains a lambda definition, is thrown by Provides method. Nevertheless it should be fixed with Guice 4.0. Maybe someone know how to fix it and can help?\r\nThanks in advance!\r\n\r\n`main()` function:\r\n\r\n    public static void main (String[] args){\r\n        try{\r\n            MainModule module = new MainModule();\r\n            Injector injector = Guice.createInjector(module);\r\n\r\n            GameFactory gameFactory = injector.getInstance(GameFactory.class);\r\n            DeckFactory blackjackDeckFactory = injector.getInstance(BlackjackDeckCreator.class);\r\n            PlayerFactory playerFactory = injector.getInstance(PlayerFactory.class);\r\n\r\n            Player player = playerFactory.createPlayer(&quot;Paul&quot;);\r\n            Player dealer = playerFactory.createPlayer(&quot;Dealer&quot;, true);\r\n\r\n            Deck deck = blackjackDeckFactory.createDeck();\r\n\r\n            Game game = gameFactory.createGame(player, dealer, deck);\r\n            game.start();\r\n        } catch (Exception e){\r\n            e.printStackTrace(); // line 31\r\n        }\r\n    }","title":"Guice caused throwing UncaughtExceptionHandler","body":"<p>I would like to use Guice in my application but it throws following exception when I want to run it:</p>\n\n<pre><code>Exception in thread \"main\" \nException: com.google.common.util.concurrent.UncheckedExecutionException thrown from the UncaughtExceptionHandler in thread \"main\"\n</code></pre>\n\n<p>When I wrap <code>main()</code> function with try... catch block I receive folloving stackTrace:</p>\n\n<pre><code>Exception in thread \"main\" com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IllegalArgumentException\n    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2047)\n    at com.google.common.cache.LocalCache.get(LocalCache.java:3869)\n    at com.google.common.cache.LocalCache.getOrLoad(LocalCache.java:3873)\n    at com.google.common.cache.LocalCache$LocalLoadingCache.get(LocalCache.java:4798)\n    at com.google.common.cache.LocalCache$LocalLoadingCache.getUnchecked(LocalCache.java:4804)\n    at com.google.inject.internal.util.StackTraceElements.forMember(StackTraceElements.java:71)\n    at com.google.inject.internal.Messages.formatSource(Messages.java:241)\n    at com.google.inject.internal.Messages.formatSource(Messages.java:220)\n    at com.google.inject.internal.Messages.formatMessages(Messages.java:90)\n    at com.google.inject.CreationException.getMessage(CreationException.java:50)\n    at java.base/java.lang.Throwable.getLocalizedMessage(Throwable.java:396)\n    at java.base/java.lang.Throwable.toString(Throwable.java:485)\n    at java.base/java.lang.String.valueOf(String.java:2788)\n    at java.base/java.io.PrintStream.println(PrintStream.java:897)\n    at java.base/java.lang.Throwable$WrappedPrintStream.println(Throwable.java:752)\n    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:659)\n    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:648)\n    at java.base/java.lang.Throwable.printStackTrace(Throwable.java:639)\n    at com.github.blackjack.Main.main(Main.java:31)\nCaused by: java.lang.IllegalArgumentException\n    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:160)\n    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:143)\n    at com.google.inject.internal.asm.$ClassReader.&lt;init&gt;(ClassReader.java:418)\n    at com.google.inject.internal.util.LineNumbers.&lt;init&gt;(LineNumbers.java:64)\n    at com.google.inject.internal.util.StackTraceElements$1.load(StackTraceElements.java:49)\n    at com.google.inject.internal.util.StackTraceElements$1.load(StackTraceElements.java:45)\n    at com.google.common.cache.LocalCache$LoadingValueReference.loadFuture(LocalCache.java:3443)\n    at com.google.common.cache.LocalCache$Segment.loadSync(LocalCache.java:2169)\n    at com.google.common.cache.LocalCache$Segment.lockedGetOrLoad(LocalCache.java:2128)\n    at com.google.common.cache.LocalCache$Segment.get(LocalCache.java:2041)\n    ... 18 more\n</code></pre>\n\n<p>From the information I found this exception was caused by method contains a lambda definition, is thrown by Provides method. Nevertheless it should be fixed with Guice 4.0. Maybe someone know how to fix it and can help?\nThanks in advance!</p>\n\n<p><code>main()</code> function:</p>\n\n<pre><code>public static void main (String[] args){\n    try{\n        MainModule module = new MainModule();\n        Injector injector = Guice.createInjector(module);\n\n        GameFactory gameFactory = injector.getInstance(GameFactory.class);\n        DeckFactory blackjackDeckFactory = injector.getInstance(BlackjackDeckCreator.class);\n        PlayerFactory playerFactory = injector.getInstance(PlayerFactory.class);\n\n        Player player = playerFactory.createPlayer(\"Paul\");\n        Player dealer = playerFactory.createPlayer(\"Dealer\", true);\n\n        Deck deck = blackjackDeckFactory.createDeck();\n\n        Game game = gameFactory.createGame(player, dealer, deck);\n        game.start();\n    } catch (Exception e){\n        e.printStackTrace(); // line 31\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","cas"],"answers":[{"tags":[],"owner":{"account_id":1656067,"reputation":496,"user_id":1525602,"display_name":"Petr Bodn&#225;r"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689972383,"creation_date":1689972383,"answer_id":76741142,"question_id":76731244,"body_markdown":"## The Problem\r\n\r\nThe main problem seems to be that you try to access field `phoneNumber` inside object `phoneNumber` of type `String` (see [Thymeleaf documentation][1] if unsure about the asterisk syntax):\r\n\r\nJava:\r\n\r\n```java\r\n            createFlowVariable(flow, &quot;phoneNumber&quot;, String.class);\r\n```\r\n\r\nThymeleaf:\r\n\r\n```thymeleaf\r\n        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumber}&quot;&gt;\r\n            ...\r\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\r\n                                   ...\r\n                                   th:field=&quot;*{phoneNumber}&quot;\r\n```\r\n\r\nNote that the last line above is referenced from the logs you provided (while `th:field` being a Spring extension to Thymeleaf):\r\n\r\n```\r\n2023-07-20 16:51:33,812 ERROR [org.thymeleaf.TemplateEngine] - &lt;[THYMELEAF][https-jsse-nio-8443-exec-1] Exception processing template &quot;phoneNumberEntry&quot;: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;phoneNumberEntry&quot; - line 42, col 36)&gt;\r\n```\r\n\r\n## The Fix\r\n\r\nI think the simplest fix should be to change the web flow object from `String` to a proper &quot;form bean class&quot; with 1 field (and potentially other fields when more input is needed in the future). I.e., when we focus just on the key parts of the code again, it could look like this:\r\n\r\nJava:\r\n\r\n```java\r\n            createFlowVariable(flow, &quot;phoneNumberForm&quot;, PhoneNumberForm.class);\r\n```\r\n\r\nThymeleaf:\r\n\r\n```thymeleaf\r\n        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumberForm}&quot;&gt;\r\n            ...\r\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\r\n                                   ...\r\n                                   th:field=&quot;*{phoneNumber}&quot;\r\n```\r\n\r\n[1]: https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#expressions-on-selections-asterisk-syntax","title":"Customizing CAS server with a custom MFA provider and a custom flow","body":"<h2>The Problem</h2>\n<p>The main problem seems to be that you try to access field <code>phoneNumber</code> inside object <code>phoneNumber</code> of type <code>String</code> (see <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#expressions-on-selections-asterisk-syntax\" rel=\"nofollow noreferrer\">Thymeleaf documentation</a> if unsure about the asterisk syntax):</p>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            createFlowVariable(flow, &quot;phoneNumber&quot;, String.class);\n</code></pre>\n<p>Thymeleaf:</p>\n<pre><code>        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumber}&quot;&gt;\n            ...\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\n                                   ...\n                                   th:field=&quot;*{phoneNumber}&quot;\n</code></pre>\n<p>Note that the last line above is referenced from the logs you provided (while <code>th:field</code> being a Spring extension to Thymeleaf):</p>\n<pre><code>2023-07-20 16:51:33,812 ERROR [org.thymeleaf.TemplateEngine] - &lt;[THYMELEAF][https-jsse-nio-8443-exec-1] Exception processing template &quot;phoneNumberEntry&quot;: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;phoneNumberEntry&quot; - line 42, col 36)&gt;\n</code></pre>\n<h2>The Fix</h2>\n<p>I think the simplest fix should be to change the web flow object from <code>String</code> to a proper &quot;form bean class&quot; with 1 field (and potentially other fields when more input is needed in the future). I.e., when we focus just on the key parts of the code again, it could look like this:</p>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>            createFlowVariable(flow, &quot;phoneNumberForm&quot;, PhoneNumberForm.class);\n</code></pre>\n<p>Thymeleaf:</p>\n<pre><code>        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumberForm}&quot;&gt;\n            ...\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\n                                   ...\n                                   th:field=&quot;*{phoneNumber}&quot;\n</code></pre>\n"}],"owner":{"account_id":29058049,"reputation":1,"user_id":22259410,"display_name":"R3dSh4d0vv"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689972383,"creation_date":1689865433,"question_id":76731244,"body_markdown":"I am trying to customize a CAS server by adding a custom multi-factor authentication (MFA) provider. Specifically, I want to modify the flow of the Authy provider. After login, I want users to arrive at a page where they can enter a phone number. This phone number will then be used to send a verification code.\r\n\r\nHere is my webflow configurer:\r\n\r\n```\r\npublic class AuthyMultifactorWebflowConfigurer extends AbstractCasMultifactorWebflowConfigurer {\r\n\r\n    /**\r\n     * Webflow event id.\r\n     */\r\n    public static final String MFA_AUTHY_EVENT_ID = &quot;mfa-authy&quot;;\r\n\r\n    public AuthyMultifactorWebflowConfigurer(final FlowBuilderServices flowBuilderServices,\r\n                                             final FlowDefinitionRegistry loginFlowDefinitionRegistry,\r\n                                             final FlowDefinitionRegistry flowDefinitionRegistry,\r\n                                             final ConfigurableApplicationContext applicationContext,\r\n                                             final CasConfigurationProperties casProperties,\r\n                                             final List&lt;CasMultifactorWebflowCustomizer&gt; mfaFlowCustomizers) {\r\n        super(flowBuilderServices, loginFlowDefinitionRegistry, applicationContext,\r\n                casProperties, Optional.of(flowDefinitionRegistry), mfaFlowCustomizers);\r\n    }\r\n\r\n    @Override\r\n    protected void doInitialize() {\r\n        multifactorAuthenticationFlowDefinitionRegistries.forEach(registry -&gt; {\r\n\r\n            val flow = getFlow(registry, MFA_AUTHY_EVENT_ID);\r\n            createFlowVariable(flow, &quot;phoneNumber&quot;, String.class);\r\n\r\n            flow.getStartActionList().add(createEvaluateAction(CasWebflowConstants.ACTION_ID_INITIAL_FLOW_SETUP));\r\n\r\n            createEndState(flow, CasWebflowConstants.STATE_ID_SUCCESS);\r\n\r\n            val initLoginFormState = createActionState(flow, CasWebflowConstants.STATE_ID_INIT_LOGIN_FORM,\r\n                    createEvaluateAction(CasWebflowConstants.ACTION_ID_INIT_LOGIN_ACTION));\r\n\r\n            createTransitionForState(initLoginFormState, CasWebflowConstants.TRANSITION_ID_SUCCESS, &quot;phoneNumberEntryState&quot;);\r\n\r\n            val phoneNumberProperties = CollectionUtils.wrapList(&quot;phoneNumber&quot;);\r\n            val phoneNumberBinder = createStateBinderConfiguration(phoneNumberProperties);\r\n\r\n            val phoneNumberEntryState = createViewState(flow, &quot;phoneNumberEntryState&quot;, &quot;phoneNumberEntry&quot;, phoneNumberBinder);\r\n            createStateModelBinding(phoneNumberEntryState, &quot;phoneNumber&quot;, String.class);\r\n            val setPrincipalAction = createSetAction(&quot;viewScope.principal&quot;, &quot;conversationScope.authentication.principal&quot;);\r\n            phoneNumberEntryState.getEntryActionList().addAll(setPrincipalAction);\r\n            createTransitionForState(phoneNumberEntryState, CasWebflowConstants.TRANSITION_ID_SUBMIT,&quot;phoneNumberEntryAction&quot;);\r\n            \r\n            val phoneNumberEntryActionState = createActionState(flow, &quot;phoneNumberEntryAction&quot;,\r\n                    createEvaluateAction(&quot;phoneNumberEntryAction&quot;));\r\n\r\n            createTransitionForState(phoneNumberEntryActionState, CasWebflowConstants.TRANSITION_ID_SUCCESS, CasWebflowConstants.STATE_ID_SUCCESS);\r\n            createTransitionForState(phoneNumberEntryActionState, CasWebflowConstants.TRANSITION_ID_ERROR, &quot;phoneNumberEntryState&quot;);\r\n\r\n            setStartState(flow, initLoginFormState);\r\n\r\n            registerMultifactorProviderAuthenticationWebflow(getLoginFlow(), MFA_AUTHY_EVENT_ID,\r\n                    casProperties.getAuthn().getMfa().getAuthy().getId());\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nAnd here is the Thymeleaf view for the page where users enter their phone number\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot; xmlns:th=&quot;http://www.w3.org/1999/xhtml&quot;\r\n      layout:decorate=&quot;~{layout}&quot;&gt;\r\n\r\n&lt;head&gt;\r\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;/&gt;\r\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;/&gt;\r\n\r\n    &lt;title th:text=&quot;#{cas.mfa.authy.pagetitle}&quot;&gt;Authy Login View&lt;/title&gt;\r\n    &lt;link href=&quot;./cas.css&quot; rel=&quot;stylesheet&quot; th:remove=&quot;tag&quot;/&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n&lt;main role=&quot;main&quot; class=&quot;container mt-3 mb-3&quot;&gt;\r\n    &lt;div layout:fragment=&quot;content&quot; class=&quot;mdc-card card p-4 m-auto w-lg-66&quot;&gt;\r\n        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumber}&quot;&gt;\r\n            &lt;input type=&quot;hidden&quot; name=&quot;_eventId_submit&quot; value=&quot;LOGIN&quot; /&gt;\r\n            &lt;input type=&quot;hidden&quot; name=&quot;execution&quot; th:value=&quot;${flowExecutionKey}&quot; /&gt;\r\n            &lt;input type=&quot;hidden&quot; name=&quot;geolocation&quot; /&gt;\r\n            &lt;div id=&quot;msg&quot; class=&quot;banner banner-danger alert alert-danger my-2&quot; role=&quot;alert&quot;\r\n                 th:if=&quot;${#fields.hasErrors(&#39;*&#39;)}&quot;&gt;\r\n                &lt;span th:each=&quot;err : ${#fields.errors(&#39;*&#39;)}&quot; th:utext=&quot;${err + &#39; &#39;}&quot;&gt;this error block and text is only shown\r\n                    if there are errors&lt;/span&gt;\r\n            &lt;/div&gt;\r\n\r\n            &lt;div class=&quot;cas-field form-group my-3 mdc-input-group d-flex&quot;&gt;\r\n                &lt;div class=&quot;mdc-input-group-field mdc-input-group-field-append&quot;&gt;\r\n                    &lt;div class=&quot;d-flex caps-check&quot;&gt;\r\n                        &lt;label for=&quot;phoneNumber&quot;\r\n                               class=&quot;mdc-text-field mdc-text-field--outlined control-label mdc-text-field--with-trailing-icon&quot;&gt;\r\n                            &lt;span class=&quot;mdc-notched-outline&quot;&gt;\r\n                                &lt;span class=&quot;mdc-notched-outline__leading&quot;&gt;&lt;/span&gt;\r\n                                &lt;span class=&quot;mdc-notched-outline__notch&quot;&gt;\r\n                                    &lt;span class=&quot;mdc-floating-label&quot;&gt;Number&lt;/span&gt;\r\n                                &lt;/span&gt;\r\n                                &lt;span class=&quot;mdc-notched-outline__trailing&quot;&gt;&lt;/span&gt;\r\n                            &lt;/span&gt;\r\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\r\n                                   type=&quot;text&quot;\r\n                                   name=&quot;phoneNumber&quot;\r\n                                   id=&quot;phoneNumber&quot;\r\n                                   th:field=&quot;*{phoneNumber}&quot;\r\n                                   size=&quot;25&quot;\r\n                                   autocomplete=&quot;off&quot; required /&gt;\r\n                        &lt;/label&gt;\r\n\r\n                    &lt;/div&gt;\r\n                &lt;/div&gt;\r\n\r\n                &lt;button class=&quot;mdc-button mdc-button--raised&quot; accesskey=&quot;l&quot;&gt;\r\n                    &lt;span class=&quot;mdc-button__label&quot;&gt;Validate&lt;/span&gt;\r\n                &lt;/button&gt;\r\n            &lt;/div&gt;\r\n        &lt;/form&gt;\r\n    &lt;/div&gt;\r\n&lt;/main&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt; \r\n```\r\n\r\nWhen I launch the server, I can log in, but after that, I receive a page without the field to enter the phone number. The console logs the following error:\r\n\r\n```\r\n2023-07-20 16:51:33,812 ERROR [org.thymeleaf.TemplateEngine] - &lt;[THYMELEAF][https-jsse-nio-8443-exec-1] Exception processing template &quot;phoneNumberEntry&quot;: Error during execution of processor &#39;org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor&#39; (template: &quot;phoneNumberEntry&quot; - line 42, col 36)&gt;\r\n2023-07-20 16:51:33,817 ERROR [org.springframework.boot.web.servlet.support.ErrorPageFilter] - &lt;Cannot forward to error page for request [/login] as the response has already been committed. As a result, the response may have the wrong status code. If your application is running on WebSphere Application Server you may be able to resolve this problem by setting com.ibm.ws.webcontainer.invokeFlushAfterService to false&gt;\r\n```\r\n\r\nI&#39;m not familiar with Spring Web Flow, so I&#39;m unsure how to proceed. Any help would be great!","title":"Customizing CAS server with a custom MFA provider and a custom flow","body":"<p>I am trying to customize a CAS server by adding a custom multi-factor authentication (MFA) provider. Specifically, I want to modify the flow of the Authy provider. After login, I want users to arrive at a page where they can enter a phone number. This phone number will then be used to send a verification code.</p>\n<p>Here is my webflow configurer:</p>\n<pre><code>public class AuthyMultifactorWebflowConfigurer extends AbstractCasMultifactorWebflowConfigurer {\n\n    /**\n     * Webflow event id.\n     */\n    public static final String MFA_AUTHY_EVENT_ID = &quot;mfa-authy&quot;;\n\n    public AuthyMultifactorWebflowConfigurer(final FlowBuilderServices flowBuilderServices,\n                                             final FlowDefinitionRegistry loginFlowDefinitionRegistry,\n                                             final FlowDefinitionRegistry flowDefinitionRegistry,\n                                             final ConfigurableApplicationContext applicationContext,\n                                             final CasConfigurationProperties casProperties,\n                                             final List&lt;CasMultifactorWebflowCustomizer&gt; mfaFlowCustomizers) {\n        super(flowBuilderServices, loginFlowDefinitionRegistry, applicationContext,\n                casProperties, Optional.of(flowDefinitionRegistry), mfaFlowCustomizers);\n    }\n\n    @Override\n    protected void doInitialize() {\n        multifactorAuthenticationFlowDefinitionRegistries.forEach(registry -&gt; {\n\n            val flow = getFlow(registry, MFA_AUTHY_EVENT_ID);\n            createFlowVariable(flow, &quot;phoneNumber&quot;, String.class);\n\n            flow.getStartActionList().add(createEvaluateAction(CasWebflowConstants.ACTION_ID_INITIAL_FLOW_SETUP));\n\n            createEndState(flow, CasWebflowConstants.STATE_ID_SUCCESS);\n\n            val initLoginFormState = createActionState(flow, CasWebflowConstants.STATE_ID_INIT_LOGIN_FORM,\n                    createEvaluateAction(CasWebflowConstants.ACTION_ID_INIT_LOGIN_ACTION));\n\n            createTransitionForState(initLoginFormState, CasWebflowConstants.TRANSITION_ID_SUCCESS, &quot;phoneNumberEntryState&quot;);\n\n            val phoneNumberProperties = CollectionUtils.wrapList(&quot;phoneNumber&quot;);\n            val phoneNumberBinder = createStateBinderConfiguration(phoneNumberProperties);\n\n            val phoneNumberEntryState = createViewState(flow, &quot;phoneNumberEntryState&quot;, &quot;phoneNumberEntry&quot;, phoneNumberBinder);\n            createStateModelBinding(phoneNumberEntryState, &quot;phoneNumber&quot;, String.class);\n            val setPrincipalAction = createSetAction(&quot;viewScope.principal&quot;, &quot;conversationScope.authentication.principal&quot;);\n            phoneNumberEntryState.getEntryActionList().addAll(setPrincipalAction);\n            createTransitionForState(phoneNumberEntryState, CasWebflowConstants.TRANSITION_ID_SUBMIT,&quot;phoneNumberEntryAction&quot;);\n            \n            val phoneNumberEntryActionState = createActionState(flow, &quot;phoneNumberEntryAction&quot;,\n                    createEvaluateAction(&quot;phoneNumberEntryAction&quot;));\n\n            createTransitionForState(phoneNumberEntryActionState, CasWebflowConstants.TRANSITION_ID_SUCCESS, CasWebflowConstants.STATE_ID_SUCCESS);\n            createTransitionForState(phoneNumberEntryActionState, CasWebflowConstants.TRANSITION_ID_ERROR, &quot;phoneNumberEntryState&quot;);\n\n            setStartState(flow, initLoginFormState);\n\n            registerMultifactorProviderAuthenticationWebflow(getLoginFlow(), MFA_AUTHY_EVENT_ID,\n                    casProperties.getAuthn().getMfa().getAuthy().getId());\n        });\n    }\n}\n</code></pre>\n<p>And here is the Thymeleaf view for the page where users enter their phone number</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html xmlns:layout=&quot;http://www.ultraq.net.nz/thymeleaf/layout&quot; xmlns:th=&quot;http://www.w3.org/1999/xhtml&quot;\n      layout:decorate=&quot;~{layout}&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;/&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1, shrink-to-fit=no&quot;/&gt;\n\n    &lt;title th:text=&quot;#{cas.mfa.authy.pagetitle}&quot;&gt;Authy Login View&lt;/title&gt;\n    &lt;link href=&quot;./cas.css&quot; rel=&quot;stylesheet&quot; th:remove=&quot;tag&quot;/&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;main role=&quot;main&quot; class=&quot;container mt-3 mb-3&quot;&gt;\n    &lt;div layout:fragment=&quot;content&quot; class=&quot;mdc-card card p-4 m-auto w-lg-66&quot;&gt;\n        &lt;form method=&quot;post&quot; id=&quot;fm1&quot; th:action=&quot;@{/login}&quot; th:object=&quot;${phoneNumber}&quot;&gt;\n            &lt;input type=&quot;hidden&quot; name=&quot;_eventId_submit&quot; value=&quot;LOGIN&quot; /&gt;\n            &lt;input type=&quot;hidden&quot; name=&quot;execution&quot; th:value=&quot;${flowExecutionKey}&quot; /&gt;\n            &lt;input type=&quot;hidden&quot; name=&quot;geolocation&quot; /&gt;\n            &lt;div id=&quot;msg&quot; class=&quot;banner banner-danger alert alert-danger my-2&quot; role=&quot;alert&quot;\n                 th:if=&quot;${#fields.hasErrors('*')}&quot;&gt;\n                &lt;span th:each=&quot;err : ${#fields.errors('*')}&quot; th:utext=&quot;${err + ' '}&quot;&gt;this error block and text is only shown\n                    if there are errors&lt;/span&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;cas-field form-group my-3 mdc-input-group d-flex&quot;&gt;\n                &lt;div class=&quot;mdc-input-group-field mdc-input-group-field-append&quot;&gt;\n                    &lt;div class=&quot;d-flex caps-check&quot;&gt;\n                        &lt;label for=&quot;phoneNumber&quot;\n                               class=&quot;mdc-text-field mdc-text-field--outlined control-label mdc-text-field--with-trailing-icon&quot;&gt;\n                            &lt;span class=&quot;mdc-notched-outline&quot;&gt;\n                                &lt;span class=&quot;mdc-notched-outline__leading&quot;&gt;&lt;/span&gt;\n                                &lt;span class=&quot;mdc-notched-outline__notch&quot;&gt;\n                                    &lt;span class=&quot;mdc-floating-label&quot;&gt;Number&lt;/span&gt;\n                                &lt;/span&gt;\n                                &lt;span class=&quot;mdc-notched-outline__trailing&quot;&gt;&lt;/span&gt;\n                            &lt;/span&gt;\n                            &lt;input class=&quot;mdc-text-field__input form-control pwd&quot;\n                                   type=&quot;text&quot;\n                                   name=&quot;phoneNumber&quot;\n                                   id=&quot;phoneNumber&quot;\n                                   th:field=&quot;*{phoneNumber}&quot;\n                                   size=&quot;25&quot;\n                                   autocomplete=&quot;off&quot; required /&gt;\n                        &lt;/label&gt;\n\n                    &lt;/div&gt;\n                &lt;/div&gt;\n\n                &lt;button class=&quot;mdc-button mdc-button--raised&quot; accesskey=&quot;l&quot;&gt;\n                    &lt;span class=&quot;mdc-button__label&quot;&gt;Validate&lt;/span&gt;\n                &lt;/button&gt;\n            &lt;/div&gt;\n        &lt;/form&gt;\n    &lt;/div&gt;\n&lt;/main&gt;\n&lt;/body&gt;\n&lt;/html&gt; \n</code></pre>\n<p>When I launch the server, I can log in, but after that, I receive a page without the field to enter the phone number. The console logs the following error:</p>\n<pre><code>2023-07-20 16:51:33,812 ERROR [org.thymeleaf.TemplateEngine] - &lt;[THYMELEAF][https-jsse-nio-8443-exec-1] Exception processing template &quot;phoneNumberEntry&quot;: Error during execution of processor 'org.thymeleaf.spring5.processor.SpringInputGeneralFieldTagProcessor' (template: &quot;phoneNumberEntry&quot; - line 42, col 36)&gt;\n2023-07-20 16:51:33,817 ERROR [org.springframework.boot.web.servlet.support.ErrorPageFilter] - &lt;Cannot forward to error page for request [/login] as the response has already been committed. As a result, the response may have the wrong status code. If your application is running on WebSphere Application Server you may be able to resolve this problem by setting com.ibm.ws.webcontainer.invokeFlushAfterService to false&gt;\n</code></pre>\n<p>I'm not familiar with Spring Web Flow, so I'm unsure how to proceed. Any help would be great!</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689968976,"creation_date":1689968976,"answer_id":76740862,"question_id":76740774,"body_markdown":"&gt; _&quot;java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. ...&quot;_\r\n\r\nYes, it does.&amp;nbsp; Here is the code from the _OpenJDK_.\r\n\r\n_[GitHub &amp;ndash; jdk/src/java.base/share/classes/java/lang/Integer.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L1486)_.\r\n\r\n```java\r\npublic static int compare(int x, int y) {\r\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\r\n}\r\n```\r\n\r\n&gt; _&quot;If so why does java documentation say a value less than 0 if x &lt; y; and a value greater than 0 if x &gt; y. Why can&#39;t they just say it returns -1, 0, 1? ...&quot;_\r\n\r\nBecause technically those conditional statements would suffice.\r\n\r\n&gt; _&quot;... Im pretty sure it only return values of -1,0, 1 and not sure if I want to do a comparison should I do if(Integer.compare(2,1) == 1) or if(Integer.compare(2,1) &gt; 0)&quot;_\r\n\r\nEither will work; there wouldn&#39;t be any performance impact here.","title":"java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. If so","body":"<blockquote>\n<p><em>&quot;java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. ...&quot;</em></p>\n</blockquote>\n<p>Yes, it does.  Here is the code from the <em>OpenJDK</em>.</p>\n<p><em><a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/Integer.java#L1486\" rel=\"nofollow noreferrer\">GitHub – jdk/src/java.base/share/classes/java/lang/Integer.java</a></em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int compare(int x, int y) {\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\n}\n</code></pre>\n<blockquote>\n<p><em>&quot;If so why does java documentation say a value less than 0 if x &lt; y; and a value greater than 0 if x &gt; y. Why can't they just say it returns -1, 0, 1? ...&quot;</em></p>\n</blockquote>\n<p>Because technically those conditional statements would suffice.</p>\n<blockquote>\n<p><em>&quot;... Im pretty sure it only return values of -1,0, 1 and not sure if I want to do a comparison should I do if(Integer.compare(2,1) == 1) or if(Integer.compare(2,1) &gt; 0)&quot;</em></p>\n</blockquote>\n<p>Either will work; there wouldn't be any performance impact here.</p>\n"},{"tags":[],"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1689970151,"creation_date":1689970151,"answer_id":76740955,"question_id":76740774,"body_markdown":"The implementation could change as long as it complies with the [documented behavior][1]. Return values of -1, 0, 1 are values consistent with that. Although it is unlikely to change the future safe way of comparing would be to compare with less than zero, equal to zero, or greater than zero.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#compare(int,int)","title":"java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. If so","body":"<p>The implementation could change as long as it complies with the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Integer.html#compare(int,int)\" rel=\"nofollow noreferrer\">documented behavior</a>. Return values of -1, 0, 1 are values consistent with that. Although it is unlikely to change the future safe way of comparing would be to compare with less than zero, equal to zero, or greater than zero.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689972162,"creation_date":1689972162,"answer_id":76741112,"question_id":76740774,"body_markdown":"In case you check the implemenation, you will see:\r\n```java\r\npublic static int compare(int x, int y) {\r\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\r\n}\r\n```\r\nBut in java doc of this method it says, that:\r\n```\r\n@return the value {@code 0} if {@code x == y};\r\n        a value less than {@code 0} if {@code x &lt; y}; and\r\n        a value greater than {@code 0} if {@code x &gt; y}\r\n```\r\n\r\nYou definitely can check for `-1,0,1`, but I recommend you to check `&lt;0,0,&gt;0` - this is **much more reliable**. Just to protect the code.\r\n\r\n```java\r\nif(Integer.compare(2,1) == 1) {} // this is 100% correct\r\nif(Integer.compare(2,1) &gt; 0)  {} // this is 999% correct\r\n```","title":"java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. If so","body":"<p>In case you check the implemenation, you will see:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int compare(int x, int y) {\n    return (x &lt; y) ? -1 : ((x == y) ? 0 : 1);\n}\n</code></pre>\n<p>But in java doc of this method it says, that:</p>\n<pre><code>@return the value {@code 0} if {@code x == y};\n        a value less than {@code 0} if {@code x &lt; y}; and\n        a value greater than {@code 0} if {@code x &gt; y}\n</code></pre>\n<p>You definitely can check for <code>-1,0,1</code>, but I recommend you to check <code>&lt;0,0,&gt;0</code> - this is <strong>much more reliable</strong>. Just to protect the code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if(Integer.compare(2,1) == 1) {} // this is 100% correct\nif(Integer.compare(2,1) &gt; 0)  {} // this is 999% correct\n</code></pre>\n"}],"owner":{"account_id":29066094,"reputation":11,"user_id":22265642,"display_name":"Joey Zheng"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1689972162,"creation_date":1689968046,"question_id":76740774,"body_markdown":"If so why does java documentation say a value less than `0` if `x &lt; y`; and a value greater than `0` if `x &gt; y`. Why can&#39;t they just say it returns `-1`,`0`,`1`? \r\n\r\n\r\nIm pretty sure it only return values of `-1`,`0`,`1` and not sure if I want to do a comparison should I do \r\n`if(Integer.compare(2,1) == 1)` or\r\n`if(Integer.compare(2,1) &gt; 0)`","title":"java.lang.Integer, Integer.compare does it only return the values of -1,0 and 1. If so","body":"<p>If so why does java documentation say a value less than <code>0</code> if <code>x &lt; y</code>; and a value greater than <code>0</code> if <code>x &gt; y</code>. Why can't they just say it returns <code>-1</code>,<code>0</code>,<code>1</code>?</p>\n<p>Im pretty sure it only return values of <code>-1</code>,<code>0</code>,<code>1</code> and not sure if I want to do a comparison should I do\n<code>if(Integer.compare(2,1) == 1)</code> or\n<code>if(Integer.compare(2,1) &gt; 0)</code></p>\n"},{"tags":["java","hibernate","jpa","hibernate-criteria","criteriaquery"],"owner":{"account_id":25938029,"reputation":11,"user_id":19657948,"display_name":"Arash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689970845,"creation_date":1689970812,"question_id":76741002,"body_markdown":"I&#39;m trying to create a generified *get* method for my DAO implementation that takes a predicate of that generic type and returns an object that makes the respective predicate.test() return true\r\n\r\nis there a way to create a valid Criteria Query that can be later passed as argument to the where() function, with a predicate defined on an Entity class ?\r\n\r\nfor example :\r\n\r\n\r\n```\r\nClass User {\r\nString name;\r\n}\r\n\r\n\r\nvar predicate = new Predicate&lt;User&gt; {\r\npublic boolean test(User user) {return user.name.equals(...);}\r\n\r\nother methods...\r\n}\r\n\r\n\r\npublic T get(Predicate&lt;T&gt; predicate, Class&lt;?&gt; outputClass) {\r\n\r\nCriteriaQuery cq = entityManager.getCriteriaBuilder.createQuery();\r\nRoot&lt;T&gt; root = cq.from(someClass);\r\ncq.select(root).where(predicet) // I need to somehow pipe the predicate into this method\r\n\r\n\r\nblah blah blah\r\n}\r\n```\r\n\r\nif there was a way to get the entity representing the root object and pass that into the test method that would have been fine as well\r\n\r\nfor example I need to get the user with a specific name (NAME)\r\n\r\nthe valid criteria query :\r\n\r\n```\r\nvar builder0 = session.getCriteriaBuilder();\r\nvar cQuery0 = builder0.createQuery(User.class);\r\nvar root0 = cQuery0.from(User.class);\r\ncQuery0.select(root0).where(builder0.equal(root0.get(&quot;name&quot;), &quot;NAME&quot;));\r\n```\r\n\r\nbut I&#39;d like to implement\r\nthat using a predicate with the following test method...\r\n\r\n```\r\npublic boolean test(User user) {\r\nreturn user.name.equals(&quot;NAME&quot;);\r\n}\r\n```","title":"creating a Criteria Query using java predicate","body":"<p>I'm trying to create a generified <em>get</em> method for my DAO implementation that takes a predicate of that generic type and returns an object that makes the respective predicate.test() return true</p>\n<p>is there a way to create a valid Criteria Query that can be later passed as argument to the where() function, with a predicate defined on an Entity class ?</p>\n<p>for example :</p>\n<pre><code>Class User {\nString name;\n}\n\n\nvar predicate = new Predicate&lt;User&gt; {\npublic boolean test(User user) {return user.name.equals(...);}\n\nother methods...\n}\n\n\npublic T get(Predicate&lt;T&gt; predicate, Class&lt;?&gt; outputClass) {\n\nCriteriaQuery cq = entityManager.getCriteriaBuilder.createQuery();\nRoot&lt;T&gt; root = cq.from(someClass);\ncq.select(root).where(predicet) // I need to somehow pipe the predicate into this method\n\n\nblah blah blah\n}\n</code></pre>\n<p>if there was a way to get the entity representing the root object and pass that into the test method that would have been fine as well</p>\n<p>for example I need to get the user with a specific name (NAME)</p>\n<p>the valid criteria query :</p>\n<pre><code>var builder0 = session.getCriteriaBuilder();\nvar cQuery0 = builder0.createQuery(User.class);\nvar root0 = cQuery0.from(User.class);\ncQuery0.select(root0).where(builder0.equal(root0.get(&quot;name&quot;), &quot;NAME&quot;));\n</code></pre>\n<p>but I'd like to implement\nthat using a predicate with the following test method...</p>\n<pre><code>public boolean test(User user) {\nreturn user.name.equals(&quot;NAME&quot;);\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security","keycloak"],"comments":[{"owner":{"account_id":3380632,"reputation":14294,"user_id":2837741,"accept_rate":100,"display_name":"daniu"},"score":0,"creation_date":1689962615,"post_id":76740223,"comment_id":135291996,"body_markdown":"You can use `.hasRole(rolename)` in your posted code instead of `.authenticated()`.","body":"You can use <code>.hasRole(rolename)</code> in your posted code instead of <code>.authenticated()</code>."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1690314300,"post_id":76740223,"comment_id":135335489,"body_markdown":"I&#39;m curious why the answer below is neither accepted nor upvoted.","body":"I&#39;m curious why the answer below is neither accepted nor upvoted."},{"owner":{"account_id":9056575,"reputation":747,"user_id":6744675,"display_name":"IndyStef"},"score":0,"creation_date":1690448601,"post_id":76740223,"comment_id":135356288,"body_markdown":"because I&#39;m currently very busy. I will do that as soon as I find time to deal with this issue again. Sorry for the delay ...","body":"because I&#39;m currently very busy. I will do that as soon as I find time to deal with this issue again. Sorry for the delay ..."}],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689969313,"creation_date":1689965499,"answer_id":76740530,"question_id":76740223,"body_markdown":"First, and most importantly, Mapping Keycloak roles to Spring authorities has nothing to do with Keycloak version.\r\n\r\nSecond, you are using `oauth2Login` =&gt; you are configuring an OAuth2 client (not an OAuth2 resource server) and **the requests are secured with sessions**, not access tokens (just check in your browser debugging tools, you&#39;ll find a session cookie but no header with a `Bearer` token). You should definitely read the [OAuth2 essentials section of my tutorials][1].\r\n\r\nAbout Keycloak roles mapping to Spring authorities, what you have not read, apparently is the [Spring Security manual][2]. No more than the accepted answer to [this question][3] here on stackoverflow.\r\n\r\nInstead of writing a `GrantedAuthoritiesMapper` or an `OAuth2UserService` yourself as instructed in the doc, you could use the `GrantedAuthoritiesMapper` which is auto-configured by the [additional starter I wrote][4], which configures OpenID provider (Keycloak or whatever) roles to Spring authorities mapping with just application properties:\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\r\n\t&lt;version&gt;7.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n```yaml\r\noauth2-issuer: http://locahost:8080/realms/master\r\noauth2-client-id: change-me\r\noauth2-client-secret: change-me\r\n\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        provider:\r\n          keycloak:\r\n            issuer-uri: ${oauth2-issuer}\r\n            user-name-attribute: preferred_username\r\n        registration:\r\n          keycloak-authorization-code:\r\n            authorization-grant-type: authorization_code\r\n            client-id: ${oauth2-client-id}\r\n            client-secret: ${oauth2-secret}\r\n            provider: keycloak\r\n            scope: openid,profile,email,offline_access\r\ncom:\r\n  c4-soft:\r\n    springaddons:\r\n      oidc:\r\n        ops:\r\n        - iss: ${oauth2-issuer}\r\n          username-claim: $.preferred_username\r\n          authorities:\r\n          # In addition to JSON path, you may define prefix and case transformation\r\n          # for each claim to map to spring authorities\r\n          - path: $.realm_access.roles\r\n          - path: $.resource_access.${oauth2-client-id}.roles\r\n        client:\r\n          security-matchers:\r\n          - /**\r\n          permit-all:\r\n          - /login/**\r\n          - /oauth2/**\r\n```\r\nThat simple. And this works in both reactive and servlet applications configured as OAuth2 clients with `oauth2Login`.\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials\r\n  [2]: https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authoritieshttps://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities\r\n  [3]: https://stackoverflow.com/q/74571191/619830\r\n  [4]: https://github.com/ch4mpy/spring-addons","title":"How to get roles in token from an OAuth2 login from a Spring Boot application?","body":"<p>First, and most importantly, Mapping Keycloak roles to Spring authorities has nothing to do with Keycloak version.</p>\n<p>Second, you are using <code>oauth2Login</code> =&gt; you are configuring an OAuth2 client (not an OAuth2 resource server) and <strong>the requests are secured with sessions</strong>, not access tokens (just check in your browser debugging tools, you'll find a session cookie but no header with a <code>Bearer</code> token). You should definitely read the <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials#1-oauth2-essentials\" rel=\"nofollow noreferrer\">OAuth2 essentials section of my tutorials</a>.</p>\n<p>About Keycloak roles mapping to Spring authorities, what you have not read, apparently is the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authoritieshttps://docs.spring.io/spring-security/reference/servlet/oauth2/login/advanced.html#oauth2login-advanced-map-authorities\" rel=\"nofollow noreferrer\">Spring Security manual</a>. No more than the accepted answer to <a href=\"https://stackoverflow.com/q/74571191/619830\">this question</a> here on stackoverflow.</p>\n<p>Instead of writing a <code>GrantedAuthoritiesMapper</code> or an <code>OAuth2UserService</code> yourself as instructed in the doc, you could use the <code>GrantedAuthoritiesMapper</code> which is auto-configured by the <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">additional starter I wrote</a>, which configures OpenID provider (Keycloak or whatever) roles to Spring authorities mapping with just application properties:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-oauth2-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.c4-soft.springaddons&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-addons-starter-oidc&lt;/artifactId&gt;\n    &lt;version&gt;7.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>oauth2-issuer: http://locahost:8080/realms/master\noauth2-client-id: change-me\noauth2-client-secret: change-me\n\nspring:\n  security:\n    oauth2:\n      client:\n        provider:\n          keycloak:\n            issuer-uri: ${oauth2-issuer}\n            user-name-attribute: preferred_username\n        registration:\n          keycloak-authorization-code:\n            authorization-grant-type: authorization_code\n            client-id: ${oauth2-client-id}\n            client-secret: ${oauth2-secret}\n            provider: keycloak\n            scope: openid,profile,email,offline_access\ncom:\n  c4-soft:\n    springaddons:\n      oidc:\n        ops:\n        - iss: ${oauth2-issuer}\n          username-claim: $.preferred_username\n          authorities:\n          # In addition to JSON path, you may define prefix and case transformation\n          # for each claim to map to spring authorities\n          - path: $.realm_access.roles\n          - path: $.resource_access.${oauth2-client-id}.roles\n        client:\n          security-matchers:\n          - /**\n          permit-all:\n          - /login/**\n          - /oauth2/**\n</code></pre>\n<p>That simple. And this works in both reactive and servlet applications configured as OAuth2 clients with <code>oauth2Login</code>.</p>\n"}],"owner":{"account_id":9056575,"reputation":747,"user_id":6744675,"display_name":"IndyStef"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":436,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"answer_count":1,"score":-3,"last_activity_date":1689969313,"creation_date":1689962299,"question_id":76740223,"body_markdown":"I know this question has been answered a number of times ... but all the answers I found refer to earlier versions of Keycloak, and I cannot find the equivalents in the current versions (22.0.1).\r\n\r\nI am trying to develop an application that uses OAuth2 login, where the login is referred to keycloak. That&#39;s pretty simple to do with the use of org.springframework.boot:spring-boot-starter-oauth2-client, and a security config like this:\r\n\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) {\r\n            httpSecurity.authorizeHttpRequests()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .oauth2Login();\r\n    \r\n           return  httpSecurity.build();\r\n        }\r\n\r\nSo far, so good. When I navigate to any page, I first have to log in through keycloak, and get forwarded to the page successfully. A call to `SecurityContextHolder.getContext().getAuthentication()` gets me the content of the token ... but what is missing are the roles that I assigned to the user in Keycloak. So I cannot use role based API access control.\r\n\r\nWhen I follow the many examples that obtain the token through Postman (through /realms/{realm}/protocol/openid-connect/token, the roles are present. I could technically just write my own login screen, and use that approach, but I&#39;d rather let keycloak handle the login (to cover for MFA and stuff).\r\n\r\nIs it even possible to get the roles defined in Keycloak through a Spring boot OAuth2 login?\r\n\r\nThx,\r\n\r\nStefan","title":"How to get roles in token from an OAuth2 login from a Spring Boot application?","body":"<p>I know this question has been answered a number of times ... but all the answers I found refer to earlier versions of Keycloak, and I cannot find the equivalents in the current versions (22.0.1).</p>\n<p>I am trying to develop an application that uses OAuth2 login, where the login is referred to keycloak. That's pretty simple to do with the use of org.springframework.boot:spring-boot-starter-oauth2-client, and a security config like this:</p>\n<pre><code>public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) {\n        httpSecurity.authorizeHttpRequests()\n                .anyRequest().authenticated()\n                .and()\n                .oauth2Login();\n\n       return  httpSecurity.build();\n    }\n</code></pre>\n<p>So far, so good. When I navigate to any page, I first have to log in through keycloak, and get forwarded to the page successfully. A call to <code>SecurityContextHolder.getContext().getAuthentication()</code> gets me the content of the token ... but what is missing are the roles that I assigned to the user in Keycloak. So I cannot use role based API access control.</p>\n<p>When I follow the many examples that obtain the token through Postman (through /realms/{realm}/protocol/openid-connect/token, the roles are present. I could technically just write my own login screen, and use that approach, but I'd rather let keycloak handle the login (to cover for MFA and stuff).</p>\n<p>Is it even possible to get the roles defined in Keycloak through a Spring boot OAuth2 login?</p>\n<p>Thx,</p>\n<p>Stefan</p>\n"},{"tags":["java","maven","noclassdeffounderror","plexus"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1689967948,"post_id":76740744,"comment_id":135292763,"body_markdown":"Why have you added the plexus-utils as a dependency for the plugin? Also I would suggest to use most recent version of maven-compiler-plugin (3.11.0) See https://maven.apache.org/plugins/ ... and remove the supplemental dependency ...Furthermore I would suggest to use most recent version of Maven (https://maven.apache.org/download.cgi)","body":"Why have you added the plexus-utils as a dependency for the plugin? Also I would suggest to use most recent version of maven-compiler-plugin (3.11.0) See <a href=\"https://maven.apache.org/plugins/\" rel=\"nofollow noreferrer\">maven.apache.org/plugins</a> ... and remove the supplemental dependency ...Furthermore I would suggest to use most recent version of Maven (<a href=\"https://maven.apache.org/download.cgi\" rel=\"nofollow noreferrer\">maven.apache.org/download.cgi</a>)"},{"owner":{"account_id":1623729,"reputation":5200,"user_id":1499766,"accept_rate":86,"display_name":"Scott Kurz"},"score":0,"creation_date":1689968043,"post_id":76740744,"comment_id":135292781,"body_markdown":"This looks like you might have stumbled upon a workaround to an older problem.  Are you sure you even need this dependency?","body":"This looks like you might have stumbled upon a workaround to an older problem.  Are you sure you even need this dependency?"},{"owner":{"account_id":15605231,"reputation":1,"user_id":11258179,"display_name":"Ariane Leite"},"score":0,"creation_date":1689968335,"post_id":76740744,"comment_id":135292825,"body_markdown":"I tried with this version of maven compiler and deleted plugin, but still show this error","body":"I tried with this version of maven compiler and deleted plugin, but still show this error"}],"owner":{"account_id":15605231,"reputation":1,"user_id":11258179,"display_name":"Ariane Leite"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":491,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689968542,"creation_date":1689967816,"question_id":76740744,"body_markdown":"Im trying compile the project but this error showing: \r\n\r\njava.lang.NoClassDefFoundError: org/codehaus/plexus/util/Scanner\r\n\r\nUsing Java 11 and Maven v3.8.1 by Intellij\r\n\r\n\r\nI set: \r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.6.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.0.15&lt;/version&gt;\r\n                &lt;/dependency&gt;\r\n            &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n\r\nBut not working.\r\n\r\nI tried with version maven compiler more recent too\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;","title":"Error mvn install java.lang.NoClassDefFoundError: org/codehaus/plexus/util/Scanner","body":"<p>Im trying compile the project but this error showing:</p>\n<p>java.lang.NoClassDefFoundError: org/codehaus/plexus/util/Scanner</p>\n<p>Using Java 11 and Maven v3.8.1 by Intellij</p>\n<p>I set:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;11&lt;/source&gt;\n                &lt;target&gt;11&lt;/target&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.plexus&lt;/groupId&gt;\n                &lt;artifactId&gt;plexus-utils&lt;/artifactId&gt;\n                &lt;version&gt;3.0.15&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n</code></pre>\n<p>But not working.</p>\n<p>I tried with version maven compiler more recent too</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.11.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;11&lt;/source&gt;\n                &lt;target&gt;11&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","rest","spring-cloud-feign"],"comments":[{"owner":{"account_id":10164387,"reputation":4961,"user_id":7506820,"display_name":"Nico Van Belle"},"score":0,"creation_date":1687253781,"post_id":76513234,"comment_id":134907312,"body_markdown":"Did you check this answer yet? https://stackoverflow.com/a/54841998/7506820","body":"Did you check this answer yet? <a href=\"https://stackoverflow.com/a/54841998/7506820\">stackoverflow.com/a/54841998/7506820</a>"},{"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"score":0,"creation_date":1687253959,"post_id":76513234,"comment_id":134907355,"body_markdown":"Yes it didn&#39;t works and I assumed that the data there is a bit outdated","body":"Yes it didn&#39;t works and I assumed that the data there is a bit outdated"}],"answers":[{"tags":[],"owner":{"account_id":26186343,"reputation":70,"user_id":19868833,"display_name":"Oussama Abouzid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1687255247,"creation_date":1687255247,"answer_id":76513540,"question_id":76513234,"body_markdown":"you can try ```@SpringQueryMap```: \r\n\r\n```\r\n@PostMapping(value = &quot;url&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\r\nMpcsAuthResponse obtainAccessToken(@SpringQueryMap MpcsTokenRequest request);\r\n```\r\nbut make sure to add ```consumes = MediaType.MULTIPART_FORM_DATA_VALUE ``` at the resource you want to consume : ```@PostMapping(value = &quot;/url&quot;,consumes = MediaType.MULTIPART_FORM_DATA_VALUE)```\r\n\r\n","title":"Spring open feign not sending body (empty body) when content type is application/x-www-form-urlencoded","body":"<p>you can try <code>@SpringQueryMap</code>:</p>\n<pre><code>@PostMapping(value = &quot;url&quot;, consumes = MediaType.MULTIPART_FORM_DATA_VALUE)\nMpcsAuthResponse obtainAccessToken(@SpringQueryMap MpcsTokenRequest request);\n</code></pre>\n<p>but make sure to add <code>consumes = MediaType.MULTIPART_FORM_DATA_VALUE </code> at the resource you want to consume : <code>@PostMapping(value = &quot;/url&quot;,consumes = MediaType.MULTIPART_FORM_DATA_VALUE)</code></p>\n"}],"owner":{"account_id":7392763,"reputation":3367,"user_id":5625696,"accept_rate":50,"display_name":"Borislav Stoilov"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":768,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689968413,"creation_date":1687253038,"question_id":76513234,"body_markdown":"This is my feign endpoint\r\n\r\n    @PostMapping(value = &quot;url&quot;, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\r\n    MpcsAuthResponse obtainAccessToken(@RequestBody MpcsTokenRequest request);\r\n\r\nand when I enable feign full logs I see that the body is empty\r\n\r\n    c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] ---&gt; POST &lt;url&gt; HTTP/1.1\r\n    11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] Content-Type: application/x-www-form-urlencoded; charset=UTF-8\r\n    11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] \r\n    11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] \r\n    11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] ---&gt; END HTTP (0-byte body)\r\n\r\n\r\nI have other feign clients that are working fine. The only time this happens is when I use APPLICATION_FORM_URLENCODED_VALUE.\r\n\r\nI am on Java 17, spring boot 3.1.0 and fiegn comes from\r\n\r\n    org.springframework.cloud:spring-cloud-starter-openfeign:4.0.3\r\n\r\nNOTE: If I use just String instead of the MpcsTokenRequest dto it works, so it is probably something with the encoders, but I can&#39;t figure it out\r\n\r\nEDIT: this is how my DTO looks like\r\n\r\n    public record MpcsTokenRequest(@FormProperty(&quot;client_id&quot;)\r\n                                   String clientId,\r\n                                   @FormProperty(&quot;client_secret&quot;)\r\n                                   String clientSecret,\r\n                                   @FormProperty(&quot;grant_type&quot;)\r\n                                   String grantType) {\r\n    }\r\n\r\nMy client configuration\r\n\r\n    public class MpcsClientConfiguration {\r\n    \r\n        @Bean\r\n        Encoder formEncoder() {\r\n            return new feign.form.FormEncoder();\r\n        }\r\n    \r\n        @Bean\r\n        Logger.Level feignLoggerLevel() {\r\n            return Logger.Level.FULL;\r\n        }\r\n    }\r\n\r\nThe problem was that feign doesn&#39;t serialize the form if its a record. \r\nhttps://github.com/OpenFeign/feign-form/issues/105\r\n\r\nConverting my DTO to POJO solved it.","title":"Spring open feign not sending body (empty body) when content type is application/x-www-form-urlencoded","body":"<p>This is my feign endpoint</p>\n<pre><code>@PostMapping(value = &quot;url&quot;, consumes = MediaType.APPLICATION_FORM_URLENCODED_VALUE)\nMpcsAuthResponse obtainAccessToken(@RequestBody MpcsTokenRequest request);\n</code></pre>\n<p>and when I enable feign full logs I see that the body is empty</p>\n<pre><code>c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] ---&gt; POST &lt;url&gt; HTTP/1.1\n11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] Content-Type: application/x-www-form-urlencoded; charset=UTF-8\n11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] \n11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] \n11:16:47.532 [main] DEBUG c.k.c.t.m.m.client.mpcs.MpcsClient -- [MpcsClient#obtainAccessToken] ---&gt; END HTTP (0-byte body)\n</code></pre>\n<p>I have other feign clients that are working fine. The only time this happens is when I use APPLICATION_FORM_URLENCODED_VALUE.</p>\n<p>I am on Java 17, spring boot 3.1.0 and fiegn comes from</p>\n<pre><code>org.springframework.cloud:spring-cloud-starter-openfeign:4.0.3\n</code></pre>\n<p>NOTE: If I use just String instead of the MpcsTokenRequest dto it works, so it is probably something with the encoders, but I can't figure it out</p>\n<p>EDIT: this is how my DTO looks like</p>\n<pre><code>public record MpcsTokenRequest(@FormProperty(&quot;client_id&quot;)\n                               String clientId,\n                               @FormProperty(&quot;client_secret&quot;)\n                               String clientSecret,\n                               @FormProperty(&quot;grant_type&quot;)\n                               String grantType) {\n}\n</code></pre>\n<p>My client configuration</p>\n<pre><code>public class MpcsClientConfiguration {\n\n    @Bean\n    Encoder formEncoder() {\n        return new feign.form.FormEncoder();\n    }\n\n    @Bean\n    Logger.Level feignLoggerLevel() {\n        return Logger.Level.FULL;\n    }\n}\n</code></pre>\n<p>The problem was that feign doesn't serialize the form if its a record.\n<a href=\"https://github.com/OpenFeign/feign-form/issues/105\" rel=\"nofollow noreferrer\">https://github.com/OpenFeign/feign-form/issues/105</a></p>\n<p>Converting my DTO to POJO solved it.</p>\n"},{"tags":["java","naming-conventions"],"comments":[{"owner":{"account_id":48334,"reputation":19092,"user_id":143585,"accept_rate":67,"display_name":"Denis Tulskiy"},"score":51,"creation_date":1310444525,"post_id":6659455,"comment_id":7872331,"body_markdown":"“There are only two hard things in Computer Science: cache invalidation and naming things”","body":"“There are only two hard things in Computer Science: cache invalidation and naming things”"},{"owner":{"account_id":6051,"reputation":26236,"user_id":10018,"display_name":"Rich Adams"},"score":20,"creation_date":1310444691,"post_id":6659455,"comment_id":7872357,"body_markdown":"...and off-by-one errors.","body":"...and off-by-one errors."},{"owner":{"account_id":169793,"reputation":1135,"user_id":396089,"accept_rate":46,"display_name":"user396089"},"score":3,"creation_date":1310446887,"post_id":6659455,"comment_id":7872628,"body_markdown":"also, add de-referencing de-allocated memory, you never know when it will crash.","body":"also, add de-referencing de-allocated memory, you never know when it will crash."},{"owner":{"account_id":113326,"reputation":2445,"user_id":298522,"accept_rate":71,"display_name":"Logan"},"score":1,"creation_date":1310446959,"post_id":6659455,"comment_id":7872636,"body_markdown":"You can name it as countiesInState","body":"You can name it as countiesInState"},{"owner":{"account_id":1130669,"reputation":584,"user_id":6853900,"display_name":"Domi W"},"score":1,"creation_date":1556025925,"post_id":6659455,"comment_id":98291358,"body_markdown":"Possible duplicate of [How should I name a java.util.Map?](https://stackoverflow.com/questions/2253453/how-should-i-name-a-java-util-map)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2253453/how-should-i-name-a-java-util-map\">How should I name a java.util.Map?</a>"}],"answers":[{"tags":[],"owner":{"account_id":204988,"reputation":6870,"user_id":453513,"accept_rate":72,"display_name":"RAY"},"comment_count":0,"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1310550382,"creation_date":1310444553,"answer_id":6659471,"question_id":6659455,"body_markdown":"I don&#39;t believe there is a hard-written rule anywhere that tells you how to name your map, so as long as you come up with a rule that makes sense to you (and your teammates), then it should be fine.\r\n\r\nPersonally, I like to call my maps `keyToValue` or `valueByKey`.","title":"How to name a HashMap in Java?","body":"<p>I don't believe there is a hard-written rule anywhere that tells you how to name your map, so as long as you come up with a rule that makes sense to you (and your teammates), then it should be fine.</p>\n\n<p>Personally, I like to call my maps <code>keyToValue</code> or <code>valueByKey</code>.</p>\n"},{"comments":[{"owner":{"account_id":385740,"reputation":1912,"user_id":743077,"display_name":"gatkin"},"score":10,"creation_date":1310445616,"post_id":6659472,"comment_id":7872474,"body_markdown":"I sometimes name maps as if they were functions taking K as a parameter and returning V. That convention leads to names like the ones in this answer.","body":"I sometimes name maps as if they were functions taking K as a parameter and returning V. That convention leads to names like the ones in this answer."},{"owner":{"account_id":1130669,"reputation":584,"user_id":6853900,"display_name":"Domi W"},"score":0,"creation_date":1554751472,"post_id":6659472,"comment_id":97859311,"body_markdown":"I think this would lead to the assumption that the variable contains a simple Collection like a List but not a Map.","body":"I think this would lead to the assumption that the variable contains a simple Collection like a List but not a Map."},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":1,"creation_date":1554781560,"post_id":6659472,"comment_id":97867101,"body_markdown":"I would think `numCounties` creates the assumption that the variable holds an _integer_, but I would guess, and this is heavily qualified by personal bias and experience, that `countyCounts` would generally invoke the idea of a map as opposed to a collection. But I will warrant that we are all different and it is difficult to please everyone. If Java did not require access with `get` there are better alternatives. Of course you could put the word `map` in the variable name, too :) Gotta love programming because there is rarely every a right answer.","body":"I would think <code>numCounties</code> creates the assumption that the variable holds an <i>integer</i>, but I would guess, and this is heavily qualified by personal bias and experience, that <code>countyCounts</code> would generally invoke the idea of a map as opposed to a collection. But I will warrant that we are all different and it is difficult to please everyone. If Java did not require access with <code>get</code> there are better alternatives. Of course you could put the word <code>map</code> in the variable name, too :) Gotta love programming because there is rarely every a right answer."}],"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"comment_count":3,"down_vote_count":1,"up_vote_count":10,"is_accepted":false,"score":9,"last_activity_date":1310444555,"creation_date":1310444555,"answer_id":6659472,"question_id":6659455,"body_markdown":"I would call it `numCounties` or `countyCounts`.","title":"How to name a HashMap in Java?","body":"<p>I would call it <code>numCounties</code> or <code>countyCounts</code>.</p>\n"},{"comments":[{"owner":{"account_id":204988,"reputation":6870,"user_id":453513,"accept_rate":72,"display_name":"RAY"},"score":0,"creation_date":1310444656,"post_id":6659473,"comment_id":7872347,"body_markdown":"there&#39;s definitely a widely-accepted convention to name variables in camel case though...","body":"there&#39;s definitely a widely-accepted convention to name variables in camel case though..."},{"owner":{"account_id":169793,"reputation":1135,"user_id":396089,"accept_rate":46,"display_name":"user396089"},"score":0,"creation_date":1310447054,"post_id":6659473,"comment_id":7872645,"body_markdown":"I am still ok with camel case as long as I  don&#39;t have a mountain range!","body":"I am still ok with camel case as long as I  don&#39;t have a mountain range!"}],"tags":[],"owner":{"account_id":6832,"reputation":6763,"user_id":11614,"accept_rate":67,"display_name":"Nrj"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1310444557,"creation_date":1310444557,"answer_id":6659473,"question_id":6659455,"body_markdown":"Whatever explains it best - In this case `stateToCountyMap` is ok or else `countiesInStateMap` can be used.","title":"How to name a HashMap in Java?","body":"<p>Whatever explains it best - In this case <code>stateToCountyMap</code> is ok or else <code>countiesInStateMap</code> can be used.</p>\n"},{"comments":[{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":2,"creation_date":1310470287,"post_id":6659476,"comment_id":7877992,"body_markdown":"“it would be confusing to name it map” – why? That’s what it does: it *maps* values from an input to an output domain. “hash”, on the other hand, is a particularly bad name since it’s describing an irrelevant (and maybe even wrong – what if the type of the map is subsequently changed to `TreeMap`?) implementation detail rather than the usage of the variable.","body":"“it would be confusing to name it map” – why? That’s what it does: it <i>maps</i> values from an input to an output domain. “hash”, on the other hand, is a particularly bad name since it’s describing an irrelevant (and maybe even wrong – what if the type of the map is subsequently changed to <code>TreeMap</code>?) implementation detail rather than the usage of the variable."},{"owner":{"account_id":208636,"reputation":26513,"user_id":459233,"accept_rate":87,"display_name":"Tudor Constantin"},"score":1,"creation_date":1310473496,"post_id":6659476,"comment_id":7878834,"body_markdown":"Does the *map* from the name reffers to a data structure or to the representation of geographical landscape? - in this context is confusing :)","body":"Does the <i>map</i> from the name reffers to a data structure or to the representation of geographical landscape? - in this context is confusing :)"},{"owner":{"account_id":1475,"reputation":533794,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"score":1,"creation_date":1310474840,"post_id":6659476,"comment_id":7879217,"body_markdown":"In mathematics, [map](http://en.wikipedia.org/wiki/Map_%28mathematics%29) describes pretty exactly what a `Map` in Java, or more generally a [map in computer science](http://en.wikipedia.org/wiki/Associative_array) does. The context (e.g. if the variable is called `mapStateToCountyCount`) should make it clear that its meaning in geography is irrelevant here.","body":"In mathematics, <a href=\"http://en.wikipedia.org/wiki/Map_%28mathematics%29\" rel=\"nofollow noreferrer\">map</a> describes pretty exactly what a <code>Map</code> in Java, or more generally a <a href=\"http://en.wikipedia.org/wiki/Associative_array\" rel=\"nofollow noreferrer\">map in computer science</a> does. The context (e.g. if the variable is called <code>mapStateToCountyCount</code>) should make it clear that its meaning in geography is irrelevant here."},{"owner":{"account_id":169793,"reputation":1135,"user_id":396089,"accept_rate":46,"display_name":"user396089"},"score":0,"creation_date":1310512193,"post_id":6659476,"comment_id":7890597,"body_markdown":"mapStateToCountyCount does seem very reasonable, and it also leaves out the detailed implementation semantics such as whether it is referring to a - TreeMap or LinkedHashMap. Though map, county, state (all in one variable) might be tad confusing to someone coming from Geography/History background!","body":"mapStateToCountyCount does seem very reasonable, and it also leaves out the detailed implementation semantics such as whether it is referring to a - TreeMap or LinkedHashMap. Though map, county, state (all in one variable) might be tad confusing to someone coming from Geography/History background!"}],"tags":[],"owner":{"account_id":208636,"reputation":26513,"user_id":459233,"accept_rate":87,"display_name":"Tudor Constantin"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1310444580,"creation_date":1310444580,"answer_id":6659476,"question_id":6659455,"body_markdown":"Storing states and counties in that variable it would be confusing to name it map - call it `stateCountyHash` or `numCountiesByState`","title":"How to name a HashMap in Java?","body":"<p>Storing states and counties in that variable it would be confusing to name it map - call it <code>stateCountyHash</code> or <code>numCountiesByState</code></p>\n"},{"comments":[{"owner":{"account_id":1130669,"reputation":584,"user_id":6853900,"display_name":"Domi W"},"score":2,"creation_date":1554751700,"post_id":6659535,"comment_id":97859401,"body_markdown":"I think `CountryCounts` would lead to the assumption that the variable contains a simple Collection like a List but not a Map. How would you distinguish between them?","body":"I think <code>CountryCounts</code> would lead to the assumption that the variable contains a simple Collection like a List but not a Map. How would you distinguish between them?"},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1559318728,"post_id":6659535,"comment_id":99395303,"body_markdown":"Nice observation! When `countyCounts` is used by itself, I&#39;d grant the ambiguity. But when used in context with a `get`, and in `countyCounts.get(&quot;NY&quot;)` to me, at least, we know we are getting the count _for_ `NY` so it is a map, while if we saw `countyCounts[3]` it&#39;s an array, and `countyCounts.get(3)` is a Java list. Personally I am willing to put up with that ambiguity, but I agree it is a matter of preference. That silly `get` makes it awkward (in English anyway)! The flexibility you get in other languages allows `countyCountsFor[state]`, `countyCountOf`, `countiesIn`, etc. is so nice!","body":"Nice observation! When <code>countyCounts</code> is used by itself, I&#39;d grant the ambiguity. But when used in context with a <code>get</code>, and in <code>countyCounts.get(&quot;NY&quot;)</code> to me, at least, we know we are getting the count <i>for</i> <code>NY</code> so it is a map, while if we saw <code>countyCounts[3]</code> it&#39;s an array, and <code>countyCounts.get(3)</code> is a Java list. Personally I am willing to put up with that ambiguity, but I agree it is a matter of preference. That silly <code>get</code> makes it awkward (in English anyway)! The flexibility you get in other languages allows <code>countyCountsFor[state]</code>, <code>countyCountOf</code>, <code>countiesIn</code>, etc. is so nice!"},{"owner":{"account_id":9325818,"reputation":1005,"user_id":6923171,"display_name":"Julius"},"score":3,"creation_date":1570545661,"post_id":6659535,"comment_id":102942002,"body_markdown":"I think there would be some value in specifying the nature of the keyset with a name such as `countyCountsByState`","body":"I think there would be some value in specifying the nature of the keyset with a name such as <code>countyCountsByState</code>"}],"tags":[],"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"comment_count":3,"down_vote_count":3,"up_vote_count":44,"is_accepted":true,"score":41,"last_activity_date":1310449975,"creation_date":1310445231,"answer_id":6659535,"question_id":6659455,"body_markdown":"I like this question because Java does not allow map access via an operator like `[]`.  In other languages we could say things like\r\n\r\n    numberOfCountiesIn[&quot;HI&quot;]\r\n\r\nor\r\n\r\n    countyCountOf[&quot;CA&quot;]\r\n\r\nor\r\n\r\n    numCountiesIn-&gt;{&quot;MA&quot;}\r\n\r\nor (in Scala, this is cool)\r\n\r\n    numCountiesIn(&quot;WA&quot;)\r\n\r\nand on and on.  None of these work in Java, because of that silly `get` word!\r\n\r\n    countyCounts.get(&quot;NY&quot;)\r\n\r\nIndeed!\r\n\r\nEDIT: I actually think `countyCounts` is the _best_ answer (IMHO); I was just making the point that the need for `get` limits one&#39;s choices.\r\n\r\n\r\n\r\n","title":"How to name a HashMap in Java?","body":"<p>I like this question because Java does not allow map access via an operator like <code>[]</code>.  In other languages we could say things like</p>\n\n<pre><code>numberOfCountiesIn[\"HI\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>countyCountOf[\"CA\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>numCountiesIn-&gt;{\"MA\"}\n</code></pre>\n\n<p>or (in Scala, this is cool)</p>\n\n<pre><code>numCountiesIn(\"WA\")\n</code></pre>\n\n<p>and on and on.  None of these work in Java, because of that silly <code>get</code> word!</p>\n\n<pre><code>countyCounts.get(\"NY\")\n</code></pre>\n\n<p>Indeed!</p>\n\n<p>EDIT: I actually think <code>countyCounts</code> is the <em>best</em> answer (IMHO); I was just making the point that the need for <code>get</code> limits one's choices.</p>\n"},{"tags":[],"owner":{"account_id":50410,"reputation":3979,"user_id":150371,"accept_rate":54,"display_name":"raksja"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1310446285,"creation_date":1310446285,"answer_id":6659625,"question_id":6659455,"body_markdown":"My opinion would be to have it `countiesCountOfStateMap` or simply `countiesOfStateMap` since we will be getting the counties count using the State. \r\n\r\nIt would be more meaningful to have it like this, so when new person looks into your code atleast he would be aware of what is contained in it. \r\n\r\nBut at the end of the day its your decision to have the appropriate name and as @tulskiy mentioned naming the class and variable appropriately is one of the harder things. ","title":"How to name a HashMap in Java?","body":"<p>My opinion would be to have it <code>countiesCountOfStateMap</code> or simply <code>countiesOfStateMap</code> since we will be getting the counties count using the State. </p>\n\n<p>It would be more meaningful to have it like this, so when new person looks into your code atleast he would be aware of what is contained in it. </p>\n\n<p>But at the end of the day its your decision to have the appropriate name and as @tulskiy mentioned naming the class and variable appropriately is one of the harder things. </p>\n"},{"comments":[{"owner":{"account_id":4627,"reputation":16143,"user_id":7034,"accept_rate":100,"display_name":"Henning"},"score":2,"creation_date":1310458535,"post_id":6660364,"comment_id":7874912,"body_markdown":"Hey, not even the Hungarians use hungarian notation anymore! ;)","body":"Hey, not even the Hungarians use hungarian notation anymore! ;)"}],"tags":[],"owner":{"account_id":370300,"reputation":3680,"user_id":718149,"accept_rate":87,"display_name":"Charith De Silva"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1310452621,"creation_date":1310452621,"answer_id":6660364,"question_id":6659455,"body_markdown":"I would call it **mapStatesbyCountyCount**, then again its bit lengthy variable name... ","title":"How to name a HashMap in Java?","body":"<p>I would call it <strong>mapStatesbyCountyCount</strong>, then again its bit lengthy variable name... </p>\n"},{"comments":[{"owner":{"account_id":16852652,"reputation":400,"user_id":12185226,"display_name":"Fifnmar"},"score":0,"creation_date":1679385843,"post_id":9531324,"comment_id":133707760,"body_markdown":"`Map` is not always an implementation detail, though, as sometimes what you want is really a map from A to B.","body":"<code>Map</code> is not always an implementation detail, though, as sometimes what you want is really a map from A to B."}],"tags":[],"owner":{"account_id":353544,"reputation":3326,"user_id":691308,"accept_rate":40,"display_name":"Dimitar Bonev"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1330683018,"creation_date":1330682563,"answer_id":9531324,"question_id":6659455,"body_markdown":"Firstly avoid putting implementation details in the name of a variable, e.g. &lt;code&gt;StateToCounty&lt;strong&gt;Map&lt;/strong&gt;&lt;/code&gt;. Today you are using a &lt;code&gt;Map&lt;/code&gt; interface but tomorrow you can decide to store your data in another type and the name of your variable has to be refactored otherwise it will become invalid and misleading. \r\n\r\nYour data represents association of a state to its number of counties, so my advice is to name the variable as &lt;code&gt;&lt;strong&gt;stateToNumberOfCounties&lt;/strong&gt;&lt;/code&gt;. The key point in this name is &lt;code&gt;&lt;strong&gt;to&lt;/strong&gt;&lt;/code&gt; which designates that this variable stores an association, the part before that is the &lt;code&gt;key&lt;/code&gt; and the part after is the &lt;code&gt;value&lt;/code&gt; or &lt;code&gt;values&lt;/code&gt; that are associated to the corresponding &lt;code&gt;key&lt;/code&gt;. Also it would be indistinct to name the variable as &lt;code&gt;stateToCountyNumber&lt;/code&gt; because one could not tell if it stores relation between a state and its number of counties or it stores a single number that represents the number of state to county associations, thus you would have to go back and forth in your code to check if it is of type &lt;code&gt;Map&lt;/code&gt; or of type &lt;code&gt;int&lt;/code&gt;.","title":"How to name a HashMap in Java?","body":"<p>Firstly avoid putting implementation details in the name of a variable, e.g. <code>StateToCounty<strong>Map</strong></code>. Today you are using a <code>Map</code> interface but tomorrow you can decide to store your data in another type and the name of your variable has to be refactored otherwise it will become invalid and misleading. </p>\n\n<p>Your data represents association of a state to its number of counties, so my advice is to name the variable as <code><strong>stateToNumberOfCounties</strong></code>. The key point in this name is <code><strong>to</strong></code> which designates that this variable stores an association, the part before that is the <code>key</code> and the part after is the <code>value</code> or <code>values</code> that are associated to the corresponding <code>key</code>. Also it would be indistinct to name the variable as <code>stateToCountyNumber</code> because one could not tell if it stores relation between a state and its number of counties or it stores a single number that represents the number of state to county associations, thus you would have to go back and forth in your code to check if it is of type <code>Map</code> or of type <code>int</code>.</p>\n"},{"tags":[],"owner":{"account_id":379606,"reputation":5664,"user_id":733092,"accept_rate":86,"display_name":"Noumenon"},"comment_count":0,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1486499389,"creation_date":1486499389,"answer_id":42099394,"question_id":6659455,"body_markdown":"I found a great case for `countiesByState` [here](http://softwareas.com/naming-conventions-for-key-value-maps/):\r\n\r\n&gt; `valuesByKeys`, as in teamsByCaptains. If you&#39;re going to include both key and value, this seems to read best. At a high level, you can read it as just &quot;teams&quot;, so anything that&#39;s performed on it is being performed on teams. The &quot;byCaptains&quot; prefix reads as it should do: a less significant qualifier that follows the teams around to help someone understand the structure if they need to.\r\n\r\nThis also allows you to access a value in a JSP with the nice notation `countiesByState[myState]`.","title":"How to name a HashMap in Java?","body":"<p>I found a great case for <code>countiesByState</code> <a href=\"http://softwareas.com/naming-conventions-for-key-value-maps/\" rel=\"noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p><code>valuesByKeys</code>, as in teamsByCaptains. If you're going to include both key and value, this seems to read best. At a high level, you can read it as just \"teams\", so anything that's performed on it is being performed on teams. The \"byCaptains\" prefix reads as it should do: a less significant qualifier that follows the teams around to help someone understand the structure if they need to.</p>\n</blockquote>\n\n<p>This also allows you to access a value in a JSP with the nice notation <code>countiesByState[myState]</code>.</p>\n"},{"tags":[],"owner":{"account_id":23691091,"reputation":17,"user_id":17715425,"display_name":"Forrest Wei"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689968254,"creation_date":1689968254,"answer_id":76740795,"question_id":6659455,"body_markdown":"`stateToCountyNumber`. More generally, `keyToValue` for any map.\r\n\r\nThis naming rule is deeply rooted in the essence of a map — a map is a function in disguise. A map transforms a key to the corresponding value. Who also does the transformation work? Functions! `toString`, `toDouble`, to name a few. So I believe a map variable should be named in the same way functions are named.","title":"How to name a HashMap in Java?","body":"<p><code>stateToCountyNumber</code>. More generally, <code>keyToValue</code> for any map.</p>\n<p>This naming rule is deeply rooted in the essence of a map — a map is a function in disguise. A map transforms a key to the corresponding value. Who also does the transformation work? Functions! <code>toString</code>, <code>toDouble</code>, to name a few. So I believe a map variable should be named in the same way functions are named.</p>\n"}],"owner":{"account_id":169793,"reputation":1135,"user_id":396089,"accept_rate":46,"display_name":"user396089"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37001,"favorite_count":0,"down_vote_count":3,"up_vote_count":78,"accepted_answer_id":6659535,"answer_count":10,"score":75,"last_activity_date":1689968254,"creation_date":1310444393,"question_id":6659455,"body_markdown":"This might be a silly question, but I have never found a satisfying way to name a variable of type `HashMap&lt;K,V&gt;` in Java. For example - lets say I have a `HashMap` where every bucket is a `&lt;K,V&gt;` pair where `K` is a `String` say representing &quot;State&quot; and `V` is an `Integer` representing the number of counties the state has.\r\n\r\nShould the `HashMap` be named as &quot;`mapStateCounty`&quot;, &quot;`stateToCountyMap`&quot;, etc. ?\r\nWhich one seems logically more appealing and intuitive to understand without sounding confusing and verbose?\r\n","title":"How to name a HashMap in Java?","body":"<p>This might be a silly question, but I have never found a satisfying way to name a variable of type <code>HashMap&lt;K,V&gt;</code> in Java. For example - lets say I have a <code>HashMap</code> where every bucket is a <code>&lt;K,V&gt;</code> pair where <code>K</code> is a <code>String</code> say representing \"State\" and <code>V</code> is an <code>Integer</code> representing the number of counties the state has.</p>\n\n<p>Should the <code>HashMap</code> be named as \"<code>mapStateCounty</code>\", \"<code>stateToCountyMap</code>\", etc. ?\nWhich one seems logically more appealing and intuitive to understand without sounding confusing and verbose?</p>\n"},{"tags":["java","spring-boot","integration-testing","wiremock"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683461800,"post_id":76193384,"comment_id":134367423,"body_markdown":"so for a 404 it is sufficient, that (the url or) *one* of the (`withXXX` *before* , not inside `willReturn(...)`) conditions doesn&#39;t match.","body":"so for a 404 it is sufficient, that (the url or) <i>one</i> of the (<code>withXXX</code> <i>before</i> , not inside <code>willReturn(...)</code>) conditions doesn&#39;t match."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683462191,"post_id":76193384,"comment_id":134367467,"body_markdown":"tips (regarding post): 1. obfuscate &quot;api key&quot;! 2. please prefer &quot;real json&quot; (/error/code/text/curl(!)...) to &quot;image json(/...)&quot; 3. add client/reproduction code. Regarding the issue:  start with very basic stub (comment all .withXXX *before* willReturn), successively add/test them back","body":"tips (regarding post): 1. obfuscate &quot;api key&quot;! 2. please prefer &quot;real json&quot; (/error/code/text/curl(!)...) to &quot;image json(/...)&quot; 3. add client/reproduction code. Regarding the issue:  start with very basic stub (comment all .withXXX <i>before</i> willReturn), successively add/test them back"},{"owner":{"account_id":25847958,"reputation":21,"user_id":19582453,"display_name":"Shruti Mishra"},"score":0,"creation_date":1683522300,"post_id":76193384,"comment_id":134373927,"body_markdown":"As suggested, I have removed all the checks before will return and just tried to pass the url with get method, but still recieved the same result. Can you please suggest some solution on this.","body":"As suggested, I have removed all the checks before will return and just tried to pass the url with get method, but still recieved the same result. Can you please suggest some solution on this."},{"owner":{"account_id":991044,"reputation":3566,"user_id":1008361,"display_name":"Tom"},"score":0,"creation_date":1683539929,"post_id":76193384,"comment_id":134377023,"body_markdown":"Is there any chance you have another instance of WireMock running in the background (e.g. standalone) and you&#39;re accidentally connecting to that one instead of the one you&#39;re starting as an extension?","body":"Is there any chance you have another instance of WireMock running in the background (e.g. standalone) and you&#39;re accidentally connecting to that one instead of the one you&#39;re starting as an extension?"},{"owner":{"account_id":25847958,"reputation":21,"user_id":19582453,"display_name":"Shruti Mishra"},"score":0,"creation_date":1683542873,"post_id":76193384,"comment_id":134377569,"body_markdown":"No, Actually wiremock is being running on port 8082, and the other application (which is java spring boot application is being run on port 8080). In 8082, no other instance is running.","body":"No, Actually wiremock is being running on port 8082, and the other application (which is java spring boot application is being run on port 8080). In 8082, no other instance is running."}],"answers":[{"comments":[{"owner":{"account_id":25847958,"reputation":21,"user_id":19582453,"display_name":"Shruti Mishra"},"score":0,"creation_date":1683610802,"post_id":76201954,"comment_id":134388805,"body_markdown":"Thanks for providing the solution, as in my requirement, I need to test on the postman not in eclipse ide, thus I can skip the service creation part in it. So here I have 1 ques 1. Can it be worked without using service. (Just by having some enteries for the url in the stub for method).","body":"Thanks for providing the solution, as in my requirement, I need to test on the postman not in eclipse ide, thus I can skip the service creation part in it. So here I have 1 ques 1. Can it be worked without using service. (Just by having some enteries for the url in the stub for method)."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683619908,"post_id":76201954,"comment_id":134390342,"body_markdown":"for postman tests, you can run it (without the &quot;test stuff&quot;) in a [(psv)&quot;main&quot;](https://wiremock.org/docs/java-usage/), for &quot;serious&quot; usage (e.g. having &quot;dev/test/int/...&quot; instances of the (mocked) external service), i would propose (try the) [docker](https://wiremock.org/docs/docker/) ..it offers a &quot;management ui&quot; (for the endpoint &quot;stubs&quot;), you can (apparently) also persist/port its (docker) &quot;volumes&quot;","body":"for postman tests, you can run it (without the &quot;test stuff&quot;) in a <a href=\"https://wiremock.org/docs/java-usage/\" rel=\"nofollow noreferrer\">(psv)&quot;main&quot;</a>, for &quot;serious&quot; usage (e.g. having &quot;dev/test/int/...&quot; instances of the (mocked) external service), i would propose (try the) <a href=\"https://wiremock.org/docs/docker/\" rel=\"nofollow noreferrer\">docker</a> ..it offers a &quot;management ui&quot; (for the endpoint &quot;stubs&quot;), you can (apparently) also persist/port its (docker) &quot;volumes&quot;"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683620086,"post_id":76201954,"comment_id":134390391,"body_markdown":"(these were v2 links, see version notes;)","body":"(these were v2 links, see version notes;)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683621415,"post_id":76201954,"comment_id":134390704,"body_markdown":"one (big) advantage of the &quot;integrated&quot; solution: you can change the &quot;behavior&quot; (normal/exception/lags...) of the mock without changing the url/additional deployment...quickly","body":"one (big) advantage of the &quot;integrated&quot; solution: you can change the &quot;behavior&quot; (normal/exception/lags...) of the mock without changing the url/additional deployment...quickly"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683621775,"post_id":76201954,"comment_id":134390798,"body_markdown":"you can &quot;hack&quot; also the above (single test!) solution :) just replace &quot;when-then&quot; code with a `Thread.sleep()` (long enough), then knowing/logging wiremock (host&amp;) port, you can: `GET /parties` (kill test from ide/terminal;(","body":"you can &quot;hack&quot; also the above (single test!) solution :) just replace &quot;when-then&quot; code with a <code>Thread.sleep()</code> (long enough), then knowing/logging wiremock (host&amp;) port, you can: <code>GET &#47;parties</code> (kill test from ide/terminal;("},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1683622607,"post_id":76201954,"comment_id":134390981,"body_markdown":"so, if you want &quot;to present something&quot; (more than logs/green tests/coverage) to your &quot;stake holders&quot;, I would use/try the docker image, these can also be used (as endpoints/&quot;base-url&quot;) in your tests (dev/int/uat/...) for &quot;normal scenarios&quot;. ... for &quot;exceptional scenarios&quot;, you could still run resetable stubs like above.","body":"so, if you want &quot;to present something&quot; (more than logs/green tests/coverage) to your &quot;stake holders&quot;, I would use/try the docker image, these can also be used (as endpoints/&quot;base-url&quot;) in your tests (dev/int/uat/...) for &quot;normal scenarios&quot;. ... for &quot;exceptional scenarios&quot;, you could still run resetable stubs like above."}],"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":6,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683644168,"creation_date":1683558905,"answer_id":76201954,"question_id":76193384,"body_markdown":"Pheeew, that was not that easy one!\r\n\r\n1. https://wiremock.org/docs/spring-boot/ points (currently) &quot;to nirvana&quot; (404)\r\n2. We want to test &quot;multiple backend&quot; integration, which is complicated per se.\r\n\r\nI could update https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/ (which looks very like your question) to latest versions and got it working like so:\r\n\r\n- [(spring-boot)started simple (current, maven, java17, webflux+lombok)](https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=lombok,webflux)\r\n- Main, (fictive) demo application, which calls (get on) &quot;some&quot; `${ext_base_url}` REST API, and (tries to) returns its results as a `Flux` of `SomeDto`:\r\n  ```lang-java\r\n  package com.example;\r\n\r\n  import lombok.EqualsAndHashCode;\r\n  import org.springframework.beans.factory.annotation.Value;\r\n  import org.springframework.boot.SpringApplication;\r\n  import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n  import org.springframework.stereotype.Service;\r\n  import org.springframework.web.reactive.function.client.WebClient;\r\n  import reactor.core.publisher.Flux;\r\n\r\n  @SpringBootApplication\r\n  public class DemoApp {\r\n\r\n    public static void main(String[] args) {\r\n      SpringApplication.run(DemoApp.class, args);\r\n    }\r\n\r\n    @Service // 1.\r\n    static class MyService {\r\n\r\n      private final WebClient webClient;\r\n\r\n      public MyService(WebClient.Builder webClientBuilder,\r\n          @Value(&quot;${ext_base_url}&quot;) String baseUrl) { // 2.\r\n        this.webClient = webClientBuilder.baseUrl(baseUrl).build();\r\n      }\r\n\r\n      public Flux&lt;SomeDto&gt; someRestCall() { // 3.\r\n        return this.webClient.get().uri(&quot;/parties&quot;)\r\n            .retrieve().bodyToFlux(SomeDto.class);\r\n      }\r\n    }\r\n\r\n    @lombok.Value(staticConstructor = &quot;of&quot;)\r\n    @EqualsAndHashCode(onlyExplicitlyIncluded = true) \r\n    static class SomeDto { // dto\r\n\r\n      @EqualsAndHashCode.Include // consider only this, lazy, sorry\r\n      Integer id;\r\n      Integer userId;\r\n      String title;\r\n      boolean completed;\r\n    }\r\n  }\r\n  ```\r\n- To mock the &quot;external&quot; API for integration tests we add (current, latest):\r\n  ```lang-xml\r\n  &lt;dependency&gt;\r\n    &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\r\n    &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\r\n    &lt;version&gt;3.0.0-beta-8&lt;/version&gt; &lt;!-- update! --&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n  &lt;/dependency&gt;\r\n  ```\r\n- This (&quot;full&quot; spring boot application) test passes:\r\n  ```lang-java\r\n  package com.example;\r\n\r\n  import com.example.DemoApp.MyService;\r\n  import com.example.DemoApp.SomeDto;\r\n  import org.junit.jupiter.api.Test;\r\n\r\n  import static com.github.tomakehurst.wiremock.client.WireMock.*;\r\n  import com.github.tomakehurst.wiremock.junit5.WireMockExtension;\r\n  import java.io.IOException;\r\n  import org.junit.jupiter.api.AfterEach;\r\n  import org.junit.jupiter.api.extension.RegisterExtension;\r\n  import org.springframework.beans.factory.annotation.Autowired;\r\n  import org.springframework.boot.test.context.SpringBootTest;\r\n  import org.springframework.test.context.DynamicPropertyRegistry;\r\n  import org.springframework.test.context.DynamicPropertySource;\r\n  import reactor.core.publisher.Flux;\r\n  import reactor.test.StepVerifier;\r\n\r\n  @SpringBootTest\r\n  class MyWireMockTest {\r\n\r\n    @RegisterExtension\r\n    static WireMockExtension wm = WireMockExtension.newInstance()\r\n        // dynamic port is the default\r\n        .build();\r\n\r\n    @DynamicPropertySource\r\n    static void configureProperties(DynamicPropertyRegistry registry) {\r\n      registry.add(&quot;ext_base_url&quot;, wm::baseUrl); // replaces spring property with actual wire mock value\r\n    }\r\n\r\n    @Autowired\r\n    MyService testee;\r\n\r\n    @Test\r\n    void test_something_with_wiremock() throws IOException {\r\n      // given:\r\n      wm.stubFor(get(&quot;/parties&quot;) // static instance!\r\n       // add *successively* &quot;withXXX&quot; conditions here...\r\n       .willReturn(aResponse()\r\n         .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n         .withBody(&quot;&quot;&quot;\r\n          [\r\n            {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\r\n            {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\r\n          ]\r\n          &quot;&quot;&quot;)\r\n        )\r\n      );\r\n      // when:\r\n      Flux&lt;SomeDto&gt; response = testee.someRestCall();\r\n      // then:\r\n      StepVerifier.create(response)\r\n          .expectNext(SomeDto.of(1, null, null, false))\r\n          .expectNext(SomeDto.of(2, null, null, false))\r\n          .verifyComplete();\r\n    }\r\n\r\n    @AfterEach // cleanup (per test method)\r\n    void afterEach() {\r\n        wm.resetAll();\r\n    }\r\n  }\r\n  ```\r\n\r\nRefs:\r\n- https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/\r\n- https://medium.com/reactive-programming-in-springboot-using-webflux/testing-flux-mono-with-junit-e6150bf3635","title":"Wiremock integration with spring boot is throwing 404 exception as &quot;Request did not match as stub is not registered&quot;","body":"<p>Pheeew, that was not that easy one!</p>\n<ol>\n<li><a href=\"https://wiremock.org/docs/spring-boot/\" rel=\"nofollow noreferrer\">https://wiremock.org/docs/spring-boot/</a> points (currently) &quot;to nirvana&quot; (404)</li>\n<li>We want to test &quot;multiple backend&quot; integration, which is complicated per se.</li>\n</ol>\n<p>I could update <a href=\"https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/\" rel=\"nofollow noreferrer\">https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/</a> (which looks very like your question) to latest versions and got it working like so:</p>\n<ul>\n<li><a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=lombok,webflux\" rel=\"nofollow noreferrer\">(spring-boot)started simple (current, maven, java17, webflux+lombok)</a></li>\n<li>Main, (fictive) demo application, which calls (get on) &quot;some&quot; <code>${ext_base_url}</code> REST API, and (tries to) returns its results as a <code>Flux</code> of <code>SomeDto</code>:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport lombok.EqualsAndHashCode;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.core.publisher.Flux;\n\n@SpringBootApplication\npublic class DemoApp {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoApp.class, args);\n  }\n\n  @Service // 1.\n  static class MyService {\n\n    private final WebClient webClient;\n\n    public MyService(WebClient.Builder webClientBuilder,\n        @Value(&quot;${ext_base_url}&quot;) String baseUrl) { // 2.\n      this.webClient = webClientBuilder.baseUrl(baseUrl).build();\n    }\n\n    public Flux&lt;SomeDto&gt; someRestCall() { // 3.\n      return this.webClient.get().uri(&quot;/parties&quot;)\n          .retrieve().bodyToFlux(SomeDto.class);\n    }\n  }\n\n  @lombok.Value(staticConstructor = &quot;of&quot;)\n  @EqualsAndHashCode(onlyExplicitlyIncluded = true) \n  static class SomeDto { // dto\n\n    @EqualsAndHashCode.Include // consider only this, lazy, sorry\n    Integer id;\n    Integer userId;\n    String title;\n    boolean completed;\n  }\n}\n</code></pre>\n</li>\n<li>To mock the &quot;external&quot; API for integration tests we add (current, latest):\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n  &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0-beta-8&lt;/version&gt; &lt;!-- update! --&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li>This (&quot;full&quot; spring boot application) test passes:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport com.example.DemoApp.MyService;\nimport com.example.DemoApp.SomeDto;\nimport org.junit.jupiter.api.Test;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\nimport com.github.tomakehurst.wiremock.junit5.WireMockExtension;\nimport java.io.IOException;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.extension.RegisterExtension;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport reactor.core.publisher.Flux;\nimport reactor.test.StepVerifier;\n\n@SpringBootTest\nclass MyWireMockTest {\n\n  @RegisterExtension\n  static WireMockExtension wm = WireMockExtension.newInstance()\n      // dynamic port is the default\n      .build();\n\n  @DynamicPropertySource\n  static void configureProperties(DynamicPropertyRegistry registry) {\n    registry.add(&quot;ext_base_url&quot;, wm::baseUrl); // replaces spring property with actual wire mock value\n  }\n\n  @Autowired\n  MyService testee;\n\n  @Test\n  void test_something_with_wiremock() throws IOException {\n    // given:\n    wm.stubFor(get(&quot;/parties&quot;) // static instance!\n     // add *successively* &quot;withXXX&quot; conditions here...\n     .willReturn(aResponse()\n       .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n       .withBody(&quot;&quot;&quot;\n        [\n          {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\n          {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\n        ]\n        &quot;&quot;&quot;)\n      )\n    );\n    // when:\n    Flux&lt;SomeDto&gt; response = testee.someRestCall();\n    // then:\n    StepVerifier.create(response)\n        .expectNext(SomeDto.of(1, null, null, false))\n        .expectNext(SomeDto.of(2, null, null, false))\n        .verifyComplete();\n  }\n\n  @AfterEach // cleanup (per test method)\n  void afterEach() {\n      wm.resetAll();\n  }\n}\n</code></pre>\n</li>\n</ul>\n<p>Refs:</p>\n<ul>\n<li><a href=\"https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/\" rel=\"nofollow noreferrer\">https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/</a></li>\n<li><a href=\"https://medium.com/reactive-programming-in-springboot-using-webflux/testing-flux-mono-with-junit-e6150bf3635\" rel=\"nofollow noreferrer\">https://medium.com/reactive-programming-in-springboot-using-webflux/testing-flux-mono-with-junit-e6150bf3635</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683645295,"creation_date":1683639679,"answer_id":76210003,"question_id":76193384,"body_markdown":"According to comments, here a sample &quot;docker/standalone&quot; solution:\r\n\r\n1. (Optional) Pull the image. I used `main-alpine` tag, but hope it works also well with [the others][1]:\r\n   ```lang-bash\r\n   docker pull wiremock/wiremock:main-alpine\r\n   ```\r\n2. (Optional) Create a docker volume ([1][2], [2][3]):\r\n   ```lang-bash\r\n   docker volume create wiremock_data\r\n   ```\r\n3. Create &quot;wiremock mappings&quot; (in docker volume or dedicated path).\r\n   I placed a `parties.json` file in my `${docker_volumes_location}/wiremock_data[/_data]/mappings`:\r\n   ```lang-json\r\n   {\r\n      &quot;request&quot;: {\r\n        &quot;method&quot;: &quot;GET&quot;,\r\n        &quot;url&quot;: &quot;/parties&quot;\r\n      },\r\n      &quot;response&quot;: {\r\n        &quot;status&quot;: 200,\r\n        &quot;jsonBody&quot;: [\r\n            {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\r\n            {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\r\n         ],\r\n         &quot;headers&quot;: {\r\n             &quot;Content-Type&quot;: &quot;application/json&quot;\r\n         }\r\n      }\r\n   }\r\n   ```\r\n   ..it should result in `/home/wiremock/mappings/parties.json` in container&#39;s file system, where &quot;parties&quot; is freely chosen/all jsons in this folder get &quot;scanned&quot;.\r\n4. After:\r\n   ```lang-bash\r\n   docker run \\\r\n     -it --rm \\\r\n     -p 8443:8443 \\\r\n     -v wiremock_data:/home/wiremock \\\r\n     wiremock/wiremock:main-alpine \\\r\n     --https-port 8443 --verbose  \r\n   ```\r\n   with arguments for:\r\n   - interactive, clean up (`-it`, `--rm`)\r\n   - publish port (`-p`)\r\n   - volume mount (`-v`)\r\n   - image name/id/tag \r\n   - container arguments (`https-port, verbose`)\r\n5. ..and successful container start, we can &quot;browse&quot; `https://localhost:8443/parties`:\r\n   - with curl:\r\n     ```lang-bash\r\n     &gt;curl --insecure &#39;https://localhost:8443/parties&#39;           \r\n     [{&quot;userId&quot;:1,&quot;id&quot;:1,&quot;title&quot;:&quot;Learn Spring Boot 3.0&quot;,&quot;completed&quot;:false}, \r\n     {&quot;userId&quot;:1,&quot;id&quot;:2,&quot;title&quot;:&quot;Learn WireMock&quot;,&quot;completed&quot;:true}]\r\n     ```\r\n   - , postman:\r\n      [![postman screenshot][4]][4]\r\n   - and browser:\r\n      [![browser screenshot][5]][5]\r\n\r\n   ... after disabling (self-signed) SSL validation.\r\n6. (`https://localhost:8443/__admin/` shows a (JSON) overview of all current mappings.)\r\n7. (For mapping modifications, we have to restart the container.)\r\n\r\n### Details and References:\r\n\r\n- https://hub.docker.com/r/wiremock/wiremock\r\n- https://docs.docker.com/\r\n- https://wiremock.org/\r\n\r\n### To run (shown) spring boot test against docker (wiremock)\r\nWe:\r\n1. Run the docker instance as described (1. - 7.), on `https://localhost:8443`.\r\n2. Remove &quot;wiremock&quot; dependency(/ies) from (spring-boot) pom.xml.\r\n3. (Without changing the application,) Adjust test to:\r\n   ```lang-java\r\n   package com.example;\r\n\r\n   import javax.net.ssl.SSLException;\r\n\r\n   import org.junit.jupiter.api.Test;\r\n   import org.springframework.beans.factory.annotation.Autowired;\r\n   import org.springframework.boot.test.context.SpringBootTest;\r\n   import org.springframework.boot.test.context.TestConfiguration;\r\n   import org.springframework.boot.web.reactive.function.client.WebClientCustomizer;\r\n   import org.springframework.context.annotation.Bean;\r\n   import org.springframework.http.client.reactive.ReactorClientHttpConnector;\r\n\r\n   import com.example.DemoApp.MyService;\r\n   import com.example.DemoApp.SomeDto;\r\n\r\n   import io.netty.handler.ssl.SslContext;\r\n   import io.netty.handler.ssl.SslContextBuilder;\r\n   import io.netty.handler.ssl.util.InsecureTrustManagerFactory;\r\n   import reactor.core.publisher.Flux;\r\n   import reactor.netty.http.client.HttpClient;\r\n   import reactor.test.StepVerifier;\r\n\r\n   @SpringBootTest(\r\n     /* this sets base url for the client: */\r\n     properties = &quot;ext_base_url=https://localhost:8443&quot;\r\n   )\r\n   class MyWireMockTest {\r\n\r\n     // RE: How to disable SSL validation for springboot-webclient test? Voila:\r\n     @TestConfiguration // 1. (test configuration!) &quot;Adds to&quot; current spring context (doesn&#39;t &quot;replace&quot;)\r\n     static class MyInsecureWebClientConfig { // should be static!\r\n      @Bean // WC customizer bean! (spring-boot, babe)\r\n      WebClientCustomizer wcCustomizr() throws SSLException {\r\n        // combining with [6]:\r\n        SslContext context = SslContextBuilder.forClient()\r\n           .trustManager(InsecureTrustManagerFactory.INSTANCE)\r\n           .build();\r\n        return wcb -&gt; {\r\n         wcb.clientConnector(new ReactorClientHttpConnector(\r\n            HttpClient.create().secure(t -&gt; t.sslContext(context))));\r\n        };\r\n      }\r\n     }\r\n\r\n     @Autowired\r\n     MyService testee;\r\n\r\n     @Test\r\n     void test_something_with_wiremock() throws InterruptedException {\r\n      // given: config, wiremock instance...\r\n      // when:\r\n      Flux&lt;SomeDto&gt; response = testee.someRestCall();\r\n      // then:\r\n      StepVerifier.create(response)\r\n         .expectNext(SomeDto.of(1, null, null, false))\r\n         .expectNext(SomeDto.of(2, null, null, false))\r\n         .verifyComplete();\r\n     }\r\n\r\n   }\r\n   ```\r\n   [\\[6\\]][6]\r\n\r\n\r\n  [1]: https://hub.docker.com/r/wiremock/wiremock\r\n  [2]: https://docs.docker.com/engine/reference/commandline/volume_create/\r\n  [3]: https://docs.docker.com/storage/volumes/\r\n  [4]: https://i.stack.imgur.com/eNuXH.png\r\n  [5]: https://i.stack.imgur.com/VO3BW.png\r\n  [6]: https://stackoverflow.com/q/45418523/592355","title":"Wiremock integration with spring boot is throwing 404 exception as &quot;Request did not match as stub is not registered&quot;","body":"<p>According to comments, here a sample &quot;docker/standalone&quot; solution:</p>\n<ol>\n<li><p>(Optional) Pull the image. I used <code>main-alpine</code> tag, but hope it works also well with <a href=\"https://hub.docker.com/r/wiremock/wiremock\" rel=\"nofollow noreferrer\">the others</a>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker pull wiremock/wiremock:main-alpine\n</code></pre>\n</li>\n<li><p>(Optional) Create a docker volume (<a href=\"https://docs.docker.com/engine/reference/commandline/volume_create/\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://docs.docker.com/storage/volumes/\" rel=\"nofollow noreferrer\">2</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker volume create wiremock_data\n</code></pre>\n</li>\n<li><p>Create &quot;wiremock mappings&quot; (in docker volume or dedicated path).\nI placed a <code>parties.json</code> file in my <code>${docker_volumes_location}/wiremock_data[/_data]/mappings</code>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;request&quot;: {\n     &quot;method&quot;: &quot;GET&quot;,\n     &quot;url&quot;: &quot;/parties&quot;\n   },\n   &quot;response&quot;: {\n     &quot;status&quot;: 200,\n     &quot;jsonBody&quot;: [\n         {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\n         {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\n      ],\n      &quot;headers&quot;: {\n          &quot;Content-Type&quot;: &quot;application/json&quot;\n      }\n   }\n}\n</code></pre>\n<p>..it should result in <code>/home/wiremock/mappings/parties.json</code> in container's file system, where &quot;parties&quot; is freely chosen/all jsons in this folder get &quot;scanned&quot;.</p>\n</li>\n<li><p>After:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run \\\n  -it --rm \\\n  -p 8443:8443 \\\n  -v wiremock_data:/home/wiremock \\\n  wiremock/wiremock:main-alpine \\\n  --https-port 8443 --verbose  \n</code></pre>\n<p>with arguments for:</p>\n<ul>\n<li>interactive, clean up (<code>-it</code>, <code>--rm</code>)</li>\n<li>publish port (<code>-p</code>)</li>\n<li>volume mount (<code>-v</code>)</li>\n<li>image name/id/tag</li>\n<li>container arguments (<code>https-port, verbose</code>)</li>\n</ul>\n</li>\n<li><p>..and successful container start, we can &quot;browse&quot; <code>https://localhost:8443/parties</code>:</p>\n<ul>\n<li>with curl:\n<pre class=\"lang-bash prettyprint-override\"><code>&gt;curl --insecure 'https://localhost:8443/parties'           \n[{&quot;userId&quot;:1,&quot;id&quot;:1,&quot;title&quot;:&quot;Learn Spring Boot 3.0&quot;,&quot;completed&quot;:false}, \n{&quot;userId&quot;:1,&quot;id&quot;:2,&quot;title&quot;:&quot;Learn WireMock&quot;,&quot;completed&quot;:true}]\n</code></pre>\n</li>\n<li>, postman:\n<a href=\"https://i.stack.imgur.com/eNuXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eNuXH.png\" alt=\"postman screenshot\" /></a></li>\n<li>and browser:\n<a href=\"https://i.stack.imgur.com/VO3BW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VO3BW.png\" alt=\"browser screenshot\" /></a></li>\n</ul>\n<p>... after disabling (self-signed) SSL validation.</p>\n</li>\n<li><p>(<code>https://localhost:8443/__admin/</code> shows a (JSON) overview of all current mappings.)</p>\n</li>\n<li><p>(For mapping modifications, we have to restart the container.)</p>\n</li>\n</ol>\n<h3>Details and References:</h3>\n<ul>\n<li><a href=\"https://hub.docker.com/r/wiremock/wiremock\" rel=\"nofollow noreferrer\">https://hub.docker.com/r/wiremock/wiremock</a></li>\n<li><a href=\"https://docs.docker.com/\" rel=\"nofollow noreferrer\">https://docs.docker.com/</a></li>\n<li><a href=\"https://wiremock.org/\" rel=\"nofollow noreferrer\">https://wiremock.org/</a></li>\n</ul>\n<h3>To run (shown) spring boot test against docker (wiremock)</h3>\n<p>We:</p>\n<ol>\n<li>Run the docker instance as described (1. - 7.), on <code>https://localhost:8443</code>.</li>\n<li>Remove &quot;wiremock&quot; dependency(/ies) from (spring-boot) pom.xml.</li>\n<li>(Without changing the application,) Adjust test to:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport javax.net.ssl.SSLException;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.context.TestConfiguration;\nimport org.springframework.boot.web.reactive.function.client.WebClientCustomizer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.http.client.reactive.ReactorClientHttpConnector;\n\nimport com.example.DemoApp.MyService;\nimport com.example.DemoApp.SomeDto;\n\nimport io.netty.handler.ssl.SslContext;\nimport io.netty.handler.ssl.SslContextBuilder;\nimport io.netty.handler.ssl.util.InsecureTrustManagerFactory;\nimport reactor.core.publisher.Flux;\nimport reactor.netty.http.client.HttpClient;\nimport reactor.test.StepVerifier;\n\n@SpringBootTest(\n  /* this sets base url for the client: */\n  properties = &quot;ext_base_url=https://localhost:8443&quot;\n)\nclass MyWireMockTest {\n\n  // RE: How to disable SSL validation for springboot-webclient test? Voila:\n  @TestConfiguration // 1. (test configuration!) &quot;Adds to&quot; current spring context (doesn't &quot;replace&quot;)\n  static class MyInsecureWebClientConfig { // should be static!\n   @Bean // WC customizer bean! (spring-boot, babe)\n   WebClientCustomizer wcCustomizr() throws SSLException {\n     // combining with [6]:\n     SslContext context = SslContextBuilder.forClient()\n        .trustManager(InsecureTrustManagerFactory.INSTANCE)\n        .build();\n     return wcb -&gt; {\n      wcb.clientConnector(new ReactorClientHttpConnector(\n         HttpClient.create().secure(t -&gt; t.sslContext(context))));\n     };\n   }\n  }\n\n  @Autowired\n  MyService testee;\n\n  @Test\n  void test_something_with_wiremock() throws InterruptedException {\n   // given: config, wiremock instance...\n   // when:\n   Flux&lt;SomeDto&gt; response = testee.someRestCall();\n   // then:\n   StepVerifier.create(response)\n      .expectNext(SomeDto.of(1, null, null, false))\n      .expectNext(SomeDto.of(2, null, null, false))\n      .verifyComplete();\n  }\n\n}\n</code></pre>\n<a href=\"https://stackoverflow.com/q/45418523/592355\">[6]</a></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":17134703,"reputation":11,"user_id":12400032,"display_name":"Simon Heavens"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689968199,"creation_date":1689968199,"answer_id":76740789,"question_id":76193384,"body_markdown":"After updating my dependancy to \r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\r\n  &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\r\n  &lt;version&gt;3.0.0-beta-8&lt;/version&gt; &lt;!-- update! --&gt;\r\n  &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIt worked for me","title":"Wiremock integration with spring boot is throwing 404 exception as &quot;Request did not match as stub is not registered&quot;","body":"<p>After updating my dependancy to</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n  &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0-beta-8&lt;/version&gt; &lt;!-- update! --&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>It worked for me</p>\n"}],"owner":{"account_id":25847958,"reputation":21,"user_id":19582453,"display_name":"Shruti Mishra"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1367,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1689968199,"creation_date":1683455571,"question_id":76193384,"body_markdown":"I have been using wiremock for integration testing with spring boot, getting 404 exception.\r\n\r\nWith message as &quot;Request did not match, as no stubs registered&quot;\r\n\r\nI have tried with wiremock server and wiremock rule instance.\r\n\r\nTried with Wiremock&#39;s JUnit jupiter extension approach and Application context initializer approach, nothing seems to be work.\r\n```\r\npackage fi.op.bcsio.application.wiremock;\r\n\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.aResponse;\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.configureFor;\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.containing;\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.equalTo;\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.get;\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.urlEqualTo;\r\nimport static com.github.tomakehurst.wiremock.core.WireMockConfiguration.options;\r\nimport static org.junit.Assert.assertEquals;\r\nimport static org.junit.Assert.assertThat;\r\nimport static org.junit.jupiter.api.Assertions.assertAll;\r\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\r\n\r\nimport java.util.function.Supplier;\r\n\r\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\r\n\r\nimport javax.annotation.PostConstruct;\r\n\r\nimport org.junit.Assert;\r\nimport org.junit.ClassRule;\r\nimport org.junit.Rule;\r\nimport org.junit.Test;\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.extension.RegisterExtension;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.MediaType;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Component;\r\nimport org.springframework.test.context.ContextConfiguration;\r\nimport org.springframework.test.context.DynamicPropertyRegistry;\r\nimport org.springframework.test.context.DynamicPropertySource;\r\nimport org.springframework.test.web.reactive.server.WebTestClient;\r\nimport org.springframework.web.client.RestTemplate;\r\n\r\nimport com.github.tomakehurst.wiremock.WireMockServer;\r\nimport com.github.tomakehurst.wiremock.client.WireMock;\r\nimport com.github.tomakehurst.wiremock.common.ConsoleNotifier;\r\nimport com.github.tomakehurst.wiremock.core.WireMockConfiguration;\r\nimport com.github.tomakehurst.wiremock.junit.WireMockClassRule;\r\nimport com.github.tomakehurst.wiremock.junit.WireMockRule;\r\nimport com.github.tomakehurst.wiremock.junit5.WireMockExtension;\r\n\r\nimport org.assertj.core.api.Assertions;\r\n\r\n@Component\r\n//@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n//@ContextConfiguration(initializers = {WireMockInitializer.class})\r\npublic class LuukuWiremockStub {\r\n\r\n//\t  @Autowired\r\n//\t  private WebTestClient webTestClient;\r\n\t\r\n\t\r\n//\t@ClassRule\r\n//\tpublic static WireMockRule wireMockRule = new WireMockRule(WireMockConfiguration.DYNAMIC_PORT);\r\n\r\n\t  @RegisterExtension\r\n\t  static WireMockExtension wireMockServer = WireMockExtension.newInstance()\r\n\t    .options(WireMockConfiguration.options().dynamicPort())\r\n\t    .build();\r\n\r\n//\t  @DynamicPropertySource\r\n//\t  static void configureProperties(DynamicPropertyRegistry registry) {\r\n//\t    registry.add(&quot;http://op-common.apis.jty.op-palvelut.net/bankingparties/basic/info/v1/parties?context=Pankin ostopolku&quot;, wireMockServer::baseUrl);\r\n//\t  }\r\n\r\n//\t  @AfterEach\r\n//\t  void resetAll() {\r\n//\t    // we&#39;re using one WireMock server for the test class (see static on the WireMockExtension definition)\r\n//\t\t  wireMockRule.resetAll();\r\n//\t  }\r\n\r\n\t  @Test\r\n\t  void testGetAllTodosShouldReturnDataFromClient() {\r\n\t\t  wireMockServer.stubFor(\r\n\t      WireMock.get(&quot;/parties&quot;)\r\n\t      \r\n\t      .withHeader(&quot;x-request-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\r\n\t\t  \r\n\t        .withHeader(&quot;x-session-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\r\n\t    \t\t\t  \r\n\t        .withHeader(&quot;x-api-key&quot;, equalTo(&quot;X8Jy6AEXqJjdBx&quot;))\r\n\t    \t\t\t  \r\n\t    \t.withHeader(&quot;Authorization&quot;, matching(&quot;Bearer [a-zA-Z0-9&amp;._-]{1,}&quot;))\r\n\t    \t\r\n\t        .withQueryParam(&quot;context&quot;, equalTo(&quot;Pankin ostopolku&quot;))\r\n\t      \r\n\t        .willReturn(aResponse()\r\n            \r\n\t        .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\r\n\t          \r\n\t        .withBody(&quot;[{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 1,\\&quot;title\\&quot;: \\&quot;Learn Spring Boot 3.0\\&quot;, \\&quot;completed\\&quot;: false},&quot; +\r\n\t            &quot;{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 2,\\&quot;title\\&quot;: \\&quot;Learn WireMock\\&quot;, \\&quot;completed\\&quot;: true}]&quot;))\r\n\t    );\r\n\t    \r\n\t    // ... controller invocation using the WebTestClient\r\n\t  }\r\n}\r\n\r\n```\r\nPostman console error:\r\n![Postman console error](https://i.stack.imgur.com/MhEgU.png)\r\nEclipse Console error:\r\n![Eclipse Console error](https://i.stack.imgur.com/ggDNV.png)","title":"Wiremock integration with spring boot is throwing 404 exception as &quot;Request did not match as stub is not registered&quot;","body":"<p>I have been using wiremock for integration testing with spring boot, getting 404 exception.</p>\n<p>With message as &quot;Request did not match, as no stubs registered&quot;</p>\n<p>I have tried with wiremock server and wiremock rule instance.</p>\n<p>Tried with Wiremock's JUnit jupiter extension approach and Application context initializer approach, nothing seems to be work.</p>\n<pre><code>package fi.op.bcsio.application.wiremock;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.aResponse;\nimport static com.github.tomakehurst.wiremock.client.WireMock.configureFor;\nimport static com.github.tomakehurst.wiremock.client.WireMock.containing;\nimport static com.github.tomakehurst.wiremock.client.WireMock.equalTo;\nimport static com.github.tomakehurst.wiremock.client.WireMock.get;\nimport static com.github.tomakehurst.wiremock.client.WireMock.urlEqualTo;\nimport static com.github.tomakehurst.wiremock.core.WireMockConfiguration.options;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertThat;\nimport static org.junit.jupiter.api.Assertions.assertAll;\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\nimport java.util.function.Supplier;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\n\nimport javax.annotation.PostConstruct;\n\nimport org.junit.Assert;\nimport org.junit.ClassRule;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.extension.RegisterExtension;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Component;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.reactive.server.WebTestClient;\nimport org.springframework.web.client.RestTemplate;\n\nimport com.github.tomakehurst.wiremock.WireMockServer;\nimport com.github.tomakehurst.wiremock.client.WireMock;\nimport com.github.tomakehurst.wiremock.common.ConsoleNotifier;\nimport com.github.tomakehurst.wiremock.core.WireMockConfiguration;\nimport com.github.tomakehurst.wiremock.junit.WireMockClassRule;\nimport com.github.tomakehurst.wiremock.junit.WireMockRule;\nimport com.github.tomakehurst.wiremock.junit5.WireMockExtension;\n\nimport org.assertj.core.api.Assertions;\n\n@Component\n//@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n//@ContextConfiguration(initializers = {WireMockInitializer.class})\npublic class LuukuWiremockStub {\n\n//    @Autowired\n//    private WebTestClient webTestClient;\n    \n    \n//  @ClassRule\n//  public static WireMockRule wireMockRule = new WireMockRule(WireMockConfiguration.DYNAMIC_PORT);\n\n      @RegisterExtension\n      static WireMockExtension wireMockServer = WireMockExtension.newInstance()\n        .options(WireMockConfiguration.options().dynamicPort())\n        .build();\n\n//    @DynamicPropertySource\n//    static void configureProperties(DynamicPropertyRegistry registry) {\n//      registry.add(&quot;http://op-common.apis.jty.op-palvelut.net/bankingparties/basic/info/v1/parties?context=Pankin ostopolku&quot;, wireMockServer::baseUrl);\n//    }\n\n//    @AfterEach\n//    void resetAll() {\n//      // we're using one WireMock server for the test class (see static on the WireMockExtension definition)\n//        wireMockRule.resetAll();\n//    }\n\n      @Test\n      void testGetAllTodosShouldReturnDataFromClient() {\n          wireMockServer.stubFor(\n          WireMock.get(&quot;/parties&quot;)\n          \n          .withHeader(&quot;x-request-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\n          \n            .withHeader(&quot;x-session-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\n                      \n            .withHeader(&quot;x-api-key&quot;, equalTo(&quot;X8Jy6AEXqJjdBx&quot;))\n                      \n            .withHeader(&quot;Authorization&quot;, matching(&quot;Bearer [a-zA-Z0-9&amp;._-]{1,}&quot;))\n            \n            .withQueryParam(&quot;context&quot;, equalTo(&quot;Pankin ostopolku&quot;))\n          \n            .willReturn(aResponse()\n            \n            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\n              \n            .withBody(&quot;[{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 1,\\&quot;title\\&quot;: \\&quot;Learn Spring Boot 3.0\\&quot;, \\&quot;completed\\&quot;: false},&quot; +\n                &quot;{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 2,\\&quot;title\\&quot;: \\&quot;Learn WireMock\\&quot;, \\&quot;completed\\&quot;: true}]&quot;))\n        );\n        \n        // ... controller invocation using the WebTestClient\n      }\n}\n\n</code></pre>\n<p>Postman console error:\n<img src=\"https://i.stack.imgur.com/MhEgU.png\" alt=\"Postman console error\" />\nEclipse Console error:\n<img src=\"https://i.stack.imgur.com/ggDNV.png\" alt=\"Eclipse Console error\" /></p>\n"},{"tags":["java","apache-kafka","kafka-producer-api"],"answers":[{"comments":[{"owner":{"account_id":340961,"reputation":2914,"user_id":671282,"display_name":"Samuel &#197;slund"},"score":0,"creation_date":1631521862,"post_id":60319079,"comment_id":122234962,"body_markdown":"Have you got a reference for this?","body":"Have you got a reference for this?"},{"owner":{"account_id":336332,"reputation":4386,"user_id":663929,"accept_rate":70,"display_name":"Andras Hatvani"},"score":2,"creation_date":1667907802,"post_id":60319079,"comment_id":131274905,"body_markdown":"This is not true as the producers will be registered upon the first write and their ids expire by default 7 days after the last write. See https://docs.confluent.io/platform/current/installation/configuration/broker-configs.html#brokerconfigs_transactional.id.expiration.ms.","body":"This is not true as the producers will be registered upon the first write and their ids expire by default 7 days after the last write. See <a href=\"https://docs.confluent.io/platform/current/installation/configuration/broker-configs.html#brokerconfigs_transactional.id.expiration.ms\" rel=\"nofollow noreferrer\">docs.confluent.io/platform/current/installation/configuratio&zwnj;&#8203;n/&hellip;</a>."}],"tags":[],"owner":{"account_id":9605621,"reputation":37117,"user_id":7131757,"accept_rate":77,"display_name":"Giorgos Myrianthous"},"comment_count":2,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1582199444,"creation_date":1582198664,"answer_id":60319079,"question_id":60318519,"body_markdown":"In contrast to consumers, it is **not** possible to retrieve such information since Kafka brokers don&#39;t store any kind of information about the producers connected to them.  \r\n\r\n","title":"How to list all producers of a kafka cluster?","body":"<p>In contrast to consumers, it is <strong>not</strong> possible to retrieve such information since Kafka brokers don't store any kind of information about the producers connected to them.  </p>\n"},{"tags":[],"owner":{"account_id":10081405,"reputation":3033,"user_id":7451566,"display_name":"senjin.hajrulahovic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689967778,"creation_date":1689967778,"answer_id":76740741,"question_id":60318519,"body_markdown":"It is possible to get all active producer using AdminClient API:\r\n\r\n```java\r\nCollection&lt;TopicPartition&gt; topicPartitions = ...\r\n\r\nDescribeProducersResult result = adminClient.describeProducers(\r\n  Collections.singleton(topicPartition)\r\n);\r\n\r\nMap&lt;TopicPartition, DescribeProducersResult.PartitionProducerState&gt; producerStateMap = result.all().get();\r\n```\r\n\r\nhttps://kafka.apache.org/32/javadoc/org/apache/kafka/clients/admin/KafkaAdminClient.html#describeProducers(java.util.Collection,org.apache.kafka.clients.admin.DescribeProducersOptions)","title":"How to list all producers of a kafka cluster?","body":"<p>It is possible to get all active producer using AdminClient API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collection&lt;TopicPartition&gt; topicPartitions = ...\n\nDescribeProducersResult result = adminClient.describeProducers(\n  Collections.singleton(topicPartition)\n);\n\nMap&lt;TopicPartition, DescribeProducersResult.PartitionProducerState&gt; producerStateMap = result.all().get();\n</code></pre>\n<p><a href=\"https://kafka.apache.org/32/javadoc/org/apache/kafka/clients/admin/KafkaAdminClient.html#describeProducers(java.util.Collection,org.apache.kafka.clients.admin.DescribeProducersOptions)\" rel=\"nofollow noreferrer\">https://kafka.apache.org/32/javadoc/org/apache/kafka/clients/admin/KafkaAdminClient.html#describeProducers(java.util.Collection,org.apache.kafka.clients.admin.DescribeProducersOptions)</a></p>\n"}],"owner":{"account_id":8806171,"reputation":480,"user_id":6580775,"display_name":"kaiffeetasse"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8187,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":60319079,"answer_count":2,"score":11,"last_activity_date":1689967778,"creation_date":1582196751,"question_id":60318519,"body_markdown":"I am able to list all Kafka Consumer with `KafkaAdminClient`:\r\n\r\n    AdminClient client = AdminClient.create(conf);\r\n    ListTopicsResult ltr = client.listTopics();\r\n    KafkaFuture&lt;Set&lt;String&gt;&gt; names = ltr.names();\r\n    \r\n    ArrayList&lt;ConsumerGroupListing&gt; consumerGroups = new ArrayList&lt;&gt;(client.listConsumerGroups().all().get());\r\n    ConsumerGroupListing consumerGroup = consumerGroups.get(0);\r\n\r\nIs it possible to list all registrated producers in a similar way?","title":"How to list all producers of a kafka cluster?","body":"<p>I am able to list all Kafka Consumer with <code>KafkaAdminClient</code>:</p>\n\n<pre><code>AdminClient client = AdminClient.create(conf);\nListTopicsResult ltr = client.listTopics();\nKafkaFuture&lt;Set&lt;String&gt;&gt; names = ltr.names();\n\nArrayList&lt;ConsumerGroupListing&gt; consumerGroups = new ArrayList&lt;&gt;(client.listConsumerGroups().all().get());\nConsumerGroupListing consumerGroup = consumerGroups.get(0);\n</code></pre>\n\n<p>Is it possible to list all registrated producers in a similar way?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1771189,"reputation":32923,"user_id":1615903,"display_name":"1615903"},"score":0,"creation_date":1689912276,"post_id":76734902,"comment_id":135283109,"body_markdown":"Does this answer your question? [@Conditionalonproperty for complex objects to yaml](https://stackoverflow.com/questions/64228084/conditionalonproperty-for-complex-objects-to-yaml)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/64228084/conditionalonproperty-for-complex-objects-to-yaml\">@Conditionalonproperty for complex objects to yaml</a>"},{"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"score":0,"creation_date":1689918229,"post_id":76734902,"comment_id":135283710,"body_markdown":"@1615903 thanks but not yet, I wanna to specify one or more upper layer prefix which not considered lower layer what really need. To be exact, what I really want is spreate the `Prefix` and `Config`, in my Configuration class, I just assure the prefix is immutable and others will be dealed by Properties and Parser, though some property will change it&#39;s name or even new or deleted, but configuration don&#39;t care, that&#39;s my expects","body":"@1615903 thanks but not yet, I wanna to specify one or more upper layer prefix which not considered lower layer what really need. To be exact, what I really want is spreate the <code>Prefix</code> and <code>Config</code>, in my Configuration class, I just assure the prefix is immutable and others will be dealed by Properties and Parser, though some property will change it&#39;s name or even new or deleted, but configuration don&#39;t care, that&#39;s my expects"}],"answers":[{"tags":[],"owner":{"account_id":18535178,"reputation":340,"user_id":13505007,"display_name":"Spyros Palaiokostas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689944893,"creation_date":1689944893,"answer_id":76738299,"question_id":76734902,"body_markdown":"The `@ConditionalOnProperty` enables bean registration only if an environment property is present and has a specific value.\r\n\r\nThis means that you cannot use it to check if the property is present in the `application.yml` or `application.properties` file.\r\n\r\nI think you have 2 options\r\n\r\n\r\n----------\r\n**Option 1: Add a new property in the application properties**\r\n\r\nYou can add a new property in the application properties file. \r\n\r\nFor example:\r\n```yaml\r\nmy:\r\n  redis:\r\n    enabled: true\r\n    connections:\r\n      - name: redis-1\r\n        address: 127.0.0.1:6379\r\n        mode: master\r\n      - name: redis-2\r\n        address: 127.0.0.1:6479\r\n        mode: slave\r\n        ofSlave: redis-1\r\n      - name: redis-3\r\n        address: 127.0.0.1:6579\r\n        mode: slave\r\n        ofSlave: redis-1\r\n```\r\n\r\nThe new property `my.redis.enabled` is not required to be mapped by the object used to map the connection properties, so it should not affect how you read the configuration. \r\n\r\nNow you can use `my.redis.enabled`\r\n```java\r\n@ConditionalOnProperty(&quot;my.redis.enabled&quot;)\r\npublic class MyRedisAutoConfiguration {}\r\n```\r\n\r\nThis is the simplest and better solution IMO\r\n\r\n\r\n----------\r\n**Option 2: Implement Custom Condition**\r\n\r\nYou can map the configuration in a class, for example:\r\n\r\n```java\r\n@ConfigurationProperties(prefix = &quot;my.redis&quot;)\r\npublic class RedisConnectionProperties {\r\n    \r\n    private Map&lt;String, String&gt; connections;\r\n\r\n    public Map&lt;String, String&gt; getConnections() {\r\n        return connections;\r\n    }\r\n\r\n    public void setConnections(Map&lt;String, String&gt; connections) {\r\n        this.connections = connections;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAnd then implement a custom condition that will check if the `Map` of Redis connection that was mapped to `RedisConnectionProperties` is empty:\r\n\r\n```java\r\npublic class RedisConnection implements Condition {\r\n\r\n  @Override\r\n  public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\r\n    RedisConnectionProperties config = Binder.get(context.getEnvironment())\r\n        .bind(&quot;my.redis&quot;,RedisConnectionProperties.class)\r\n        .orElse(null);\r\n    return config != null &amp;&amp; config.getConnections() != null &amp;&amp; !config.getConnections().isEmpty();\r\n  }\r\n}\r\n```\r\n\r\nFinally, you can use this condition on `MyRedisAutoConfiguration`:\r\n\r\n```java\r\n@Conditional(RedisConnection.class)\r\npublic class MyRedisAutoConfiguration {}\r\n```\r\n\r\n","title":"How to make Spring @ConditionalOnProperty check by if an property is present without value","body":"<p>The <code>@ConditionalOnProperty</code> enables bean registration only if an environment property is present and has a specific value.</p>\n<p>This means that you cannot use it to check if the property is present in the <code>application.yml</code> or <code>application.properties</code> file.</p>\n<p>I think you have 2 options</p>\n<hr />\n<p><strong>Option 1: Add a new property in the application properties</strong></p>\n<p>You can add a new property in the application properties file.</p>\n<p>For example:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>my:\n  redis:\n    enabled: true\n    connections:\n      - name: redis-1\n        address: 127.0.0.1:6379\n        mode: master\n      - name: redis-2\n        address: 127.0.0.1:6479\n        mode: slave\n        ofSlave: redis-1\n      - name: redis-3\n        address: 127.0.0.1:6579\n        mode: slave\n        ofSlave: redis-1\n</code></pre>\n<p>The new property <code>my.redis.enabled</code> is not required to be mapped by the object used to map the connection properties, so it should not affect how you read the configuration.</p>\n<p>Now you can use <code>my.redis.enabled</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConditionalOnProperty(&quot;my.redis.enabled&quot;)\npublic class MyRedisAutoConfiguration {}\n</code></pre>\n<p>This is the simplest and better solution IMO</p>\n<hr />\n<p><strong>Option 2: Implement Custom Condition</strong></p>\n<p>You can map the configuration in a class, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ConfigurationProperties(prefix = &quot;my.redis&quot;)\npublic class RedisConnectionProperties {\n    \n    private Map&lt;String, String&gt; connections;\n\n    public Map&lt;String, String&gt; getConnections() {\n        return connections;\n    }\n\n    public void setConnections(Map&lt;String, String&gt; connections) {\n        this.connections = connections;\n    }\n\n}\n</code></pre>\n<p>And then implement a custom condition that will check if the <code>Map</code> of Redis connection that was mapped to <code>RedisConnectionProperties</code> is empty:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class RedisConnection implements Condition {\n\n  @Override\n  public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {\n    RedisConnectionProperties config = Binder.get(context.getEnvironment())\n        .bind(&quot;my.redis&quot;,RedisConnectionProperties.class)\n        .orElse(null);\n    return config != null &amp;&amp; config.getConnections() != null &amp;&amp; !config.getConnections().isEmpty();\n  }\n}\n</code></pre>\n<p>Finally, you can use this condition on <code>MyRedisAutoConfiguration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Conditional(RedisConnection.class)\npublic class MyRedisAutoConfiguration {}\n</code></pre>\n"}],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":678,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76738299,"answer_count":1,"score":1,"last_activity_date":1689966895,"creation_date":1689909140,"question_id":76734902,"body_markdown":"Well, my own project has a special config file, it can set multi-source of Redis\r\n\r\n```yaml\r\nmy:\r\n  redis:\r\n    connections:\r\n      - name: redis-1\r\n        address: 127.0.0.1:6379\r\n        mode: master\r\n      - name: redis-2\r\n        address: 127.0.0.1:6479\r\n        mode: slave\r\n        ofSlave: redis-1\r\n      - name: redis-3\r\n        address: 127.0.0.1:6579\r\n        mode: slave\r\n        ofSlave: redis-1\r\n\r\n```\r\n\r\nI try to build an Auto-Configuration Class and it will be loaded on property detected\r\n\r\n```\r\n// @Configuration // controll by @EnableMyRedis\r\n@ConditionalOnProperty(&quot;my.redis.connections&quot;)\r\npublic class MyRedisAutoConfiguration {\r\n\r\n}\r\n```\r\n\r\nSo I want to load this Configuration and other Components when my `application.yml` file contains the property `my.redis.connections`, even though is does not have value.\r\n\r\n---\r\nAddition:\r\n\r\nThings I really want can be expressed as this example, an `AutoConfiguration` and a `PropertyBeanDefinitionRegistrar`\r\n\r\n```\r\n@Import(AutoConfiguration.class)\r\npublic @annotation EnableMyRedis {\r\n}\r\n\r\n@MyConditionalOnProperty(prefix = &quot;my.redis.connections&quot;)\r\n@Import(PropertyBeanDefinitionRegistrar.class)\r\npublic class AutoConfiguration {\r\n\r\n}\r\n\r\npublic class PropertyBeanDefinitionRegistrar implements\r\n    EnvironmentAware, BeanDefinitionRegistrar {\r\n\r\n}\r\n```\r\n\r\nIt&#39;s very clear to see their relationship;\r\n\r\n1. If Have Enabled, then load `AutoConfiguration`, otherwise not\r\n2. If Have property-prefix &#39;my.redis.connections&#39;, then load `PropertyBeanDefinitionRegistrar`, otherwise not\r\n3. In this step, property-file will be really dealed and generating beans.\r\n\r\n---\r\n\r\nBut I enabled `debug: true` and found it doesn&#39;t work, the `PropertyResolver` or Environment in method `getMatchOutcome` of Class `OnPropertyCondition` only checked the real property instead of layer relation\r\n\r\nHow can I achieve my needs?","title":"How to make Spring @ConditionalOnProperty check by if an property is present without value","body":"<p>Well, my own project has a special config file, it can set multi-source of Redis</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>my:\n  redis:\n    connections:\n      - name: redis-1\n        address: 127.0.0.1:6379\n        mode: master\n      - name: redis-2\n        address: 127.0.0.1:6479\n        mode: slave\n        ofSlave: redis-1\n      - name: redis-3\n        address: 127.0.0.1:6579\n        mode: slave\n        ofSlave: redis-1\n\n</code></pre>\n<p>I try to build an Auto-Configuration Class and it will be loaded on property detected</p>\n<pre><code>// @Configuration // controll by @EnableMyRedis\n@ConditionalOnProperty(&quot;my.redis.connections&quot;)\npublic class MyRedisAutoConfiguration {\n\n}\n</code></pre>\n<p>So I want to load this Configuration and other Components when my <code>application.yml</code> file contains the property <code>my.redis.connections</code>, even though is does not have value.</p>\n<hr />\n<p>Addition:</p>\n<p>Things I really want can be expressed as this example, an <code>AutoConfiguration</code> and a <code>PropertyBeanDefinitionRegistrar</code></p>\n<pre><code>@Import(AutoConfiguration.class)\npublic @annotation EnableMyRedis {\n}\n\n@MyConditionalOnProperty(prefix = &quot;my.redis.connections&quot;)\n@Import(PropertyBeanDefinitionRegistrar.class)\npublic class AutoConfiguration {\n\n}\n\npublic class PropertyBeanDefinitionRegistrar implements\n    EnvironmentAware, BeanDefinitionRegistrar {\n\n}\n</code></pre>\n<p>It's very clear to see their relationship;</p>\n<ol>\n<li>If Have Enabled, then load <code>AutoConfiguration</code>, otherwise not</li>\n<li>If Have property-prefix 'my.redis.connections', then load <code>PropertyBeanDefinitionRegistrar</code>, otherwise not</li>\n<li>In this step, property-file will be really dealed and generating beans.</li>\n</ol>\n<hr />\n<p>But I enabled <code>debug: true</code> and found it doesn't work, the <code>PropertyResolver</code> or Environment in method <code>getMatchOutcome</code> of Class <code>OnPropertyCondition</code> only checked the real property instead of layer relation</p>\n<p>How can I achieve my needs?</p>\n"},{"tags":["java","string","search","substring"],"comments":[{"owner":{"account_id":7871558,"reputation":5,"user_id":5948666,"display_name":"Laurenţiu Roşu"},"score":0,"creation_date":1455892936,"post_id":35507908,"comment_id":58706752,"body_markdown":"Sorry about the ok=1 and i=1; I have removed them from the code.","body":"Sorry about the ok=1 and i=1; I have removed them from the code."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1455892940,"post_id":35507908,"comment_id":58706758,"body_markdown":"Code review is off-topic for SO. For review, there is [Code Review](http://codereview.stackexchange.com/). If your code is not working, please describe your input, your expected output and your observed output.","body":"Code review is off-topic for SO. For review, there is <a href=\"http://codereview.stackexchange.com/\">Code Review</a>. If your code is not working, please describe your input, your expected output and your observed output."},{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1455892960,"post_id":35507908,"comment_id":58706767,"body_markdown":"@Turing85 Don&#39;t recommend CR, this is off-topic there.","body":"@Turing85 Don&#39;t recommend CR, this is off-topic there."},{"owner":{"account_id":476178,"reputation":2048,"user_id":886945,"display_name":"Steve Wong"},"score":0,"creation_date":1455893077,"post_id":35507908,"comment_id":58706851,"body_markdown":"Why doesn&#39;t it work?  Does the code print 4 and you expect 1?","body":"Why doesn&#39;t it work?  Does the code print 4 and you expect 1?"},{"owner":{"account_id":40721,"reputation":357298,"user_id":118068,"display_name":"Marc B"},"score":2,"creation_date":1455893128,"post_id":35507908,"comment_id":58706892,"body_markdown":"Not working **HOW**?","body":"Not working <b>HOW</b>?"}],"answers":[{"comments":[{"owner":{"account_id":7871558,"reputation":5,"user_id":5948666,"display_name":"Laurenţiu Roşu"},"score":0,"creation_date":1455894560,"post_id":35507962,"comment_id":58707987,"body_markdown":"I was not able at that time :) .","body":"I was not able at that time :) ."}],"tags":[],"owner":{"account_id":2915811,"reputation":10602,"user_id":2499035,"accept_rate":100,"display_name":"resueman"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1455893040,"creation_date":1455893040,"answer_id":35507962,"question_id":35507908,"body_markdown":"The problem is you&#39;re using the wrong end condition on your `for` loop. The highest index in `s2` that you attempt to access is `i + s1.length()`, so you need to make sure that&#39;s always at most `s2.length() - 1`.\r\n\r\nChange your `for` loop to this:\r\n\r\n    for(i = 0; i + s1.length() &lt; s2.length(); i++)\r\n\r\nAnd it will work.","title":"How many times there is a substring in a string [Java]","body":"<p>The problem is you're using the wrong end condition on your <code>for</code> loop. The highest index in <code>s2</code> that you attempt to access is <code>i + s1.length()</code>, so you need to make sure that's always at most <code>s2.length() - 1</code>.</p>\n\n<p>Change your <code>for</code> loop to this:</p>\n\n<pre><code>for(i = 0; i + s1.length() &lt; s2.length(); i++)\n</code></pre>\n\n<p>And it will work.</p>\n"},{"tags":[],"owner":{"account_id":4217278,"reputation":799,"user_id":3453066,"accept_rate":92,"display_name":"Jure"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455893173,"creation_date":1455893173,"answer_id":35507998,"question_id":35507908,"body_markdown":"This is a little diffrent approach, but it should also work. You just split the string and check it&#39;s size -1:\r\n\r\n    String s1 = &quot;si&quot;;\r\n    String s2 = &quot;sir1 si cu sir2 fac un sir3&quot;;\r\n    String[] split = s2.split(s1);\r\n    System.out.println(&quot;number of substrings: &quot; + (split.length - 1));","title":"How many times there is a substring in a string [Java]","body":"<p>This is a little diffrent approach, but it should also work. You just split the string and check it's size -1:</p>\n\n<pre><code>String s1 = \"si\";\nString s2 = \"sir1 si cu sir2 fac un sir3\";\nString[] split = s2.split(s1);\nSystem.out.println(\"number of substrings: \" + (split.length - 1));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4217278,"reputation":799,"user_id":3453066,"accept_rate":92,"display_name":"Jure"},"score":0,"creation_date":1455893419,"post_id":35508046,"comment_id":58707121,"body_markdown":"If I output numCcurrrences I get 0, for the strings in the question.","body":"If I output numCcurrrences I get 0, for the strings in the question."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1455893464,"post_id":35508046,"comment_id":58707144,"body_markdown":"...and that&#39;s why you give variables better names than `s1` and `s2`. Fixed.","body":"...and that&#39;s why you give variables better names than <code>s1</code> and <code>s2</code>. Fixed."},{"owner":{"account_id":6169984,"reputation":704,"user_id":4808528,"accept_rate":100,"display_name":"Floam"},"score":0,"creation_date":1456193006,"post_id":35508046,"comment_id":58822920,"body_markdown":"Yuck. break statements in the middle of a while loop leave room for serious bugs later on down the road...","body":"Yuck. break statements in the middle of a while loop leave room for serious bugs later on down the road..."}],"tags":[],"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455893441,"creation_date":1455893296,"answer_id":35508046,"question_id":35507908,"body_markdown":"I would count how many times [`String.indexOf`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#indexOf-java.lang.String-int-) returns a non-negative number:\r\n\r\n    int lastPos = -1;\r\n    int count = 0;\r\n    while (true) {\r\n      lastPos = s2.indexOf(s1, lastPos + 1);\r\n      if (lastPos &lt; 0) break;\r\n      ++count;\r\n    }\r\n\r\nThis is much more efficient than using `String.split` (or `String.substring`) because it doesn&#39;t construct any additional objects.","title":"How many times there is a substring in a string [Java]","body":"<p>I would count how many times <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#indexOf-java.lang.String-int-\" rel=\"nofollow\"><code>String.indexOf</code></a> returns a non-negative number:</p>\n\n<pre><code>int lastPos = -1;\nint count = 0;\nwhile (true) {\n  lastPos = s2.indexOf(s1, lastPos + 1);\n  if (lastPos &lt; 0) break;\n  ++count;\n}\n</code></pre>\n\n<p>This is much more efficient than using <code>String.split</code> (or <code>String.substring</code>) because it doesn't construct any additional objects.</p>\n"},{"tags":[],"owner":{"account_id":23703015,"reputation":1,"user_id":17725932,"display_name":"Akash Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689966779,"creation_date":1689966779,"answer_id":76740655,"question_id":35507908,"body_markdown":"fix of your soultion\r\n\r\n    public class Main {\r\n\r\n    public static void main(String[] args) {\r\n        String s1 = &quot;si&quot;;\r\n        String s2 = &quot;sir1 si cu sir2 fac un sir3&quot;;\r\n\r\n        int count = 0;\r\n        int i=1;\r\n        for(i=0;i&lt;s2.length()-s1.length();i++) {\r\n            if (s2.substring(i, i + s1.length()).equals(s1))\r\n                count++;\r\n        }\r\n        System.out.println(count);\r\n    }}\r\n\r\nonly for loop line is wrong\r\n\r\n    for(i=0;i&lt;s2.length()-s1.length();i++)\r\n\r\n","title":"How many times there is a substring in a string [Java]","body":"<p>fix of your soultion</p>\n<pre><code>public class Main {\n\npublic static void main(String[] args) {\n    String s1 = &quot;si&quot;;\n    String s2 = &quot;sir1 si cu sir2 fac un sir3&quot;;\n\n    int count = 0;\n    int i=1;\n    for(i=0;i&lt;s2.length()-s1.length();i++) {\n        if (s2.substring(i, i + s1.length()).equals(s1))\n            count++;\n    }\n    System.out.println(count);\n}}\n</code></pre>\n<p>only for loop line is wrong</p>\n<pre><code>for(i=0;i&lt;s2.length()-s1.length();i++)\n</code></pre>\n"}],"owner":{"account_id":7871558,"reputation":5,"user_id":5948666,"display_name":"Laurenţiu Roşu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":35507962,"answer_count":4,"score":-2,"last_activity_date":1689966779,"creation_date":1455892870,"question_id":35507908,"body_markdown":"I am trying to write a code in order to determine how many times there is the string s1 in the string s2.\r\n\r\nThis is the code I have written,but doesn&#39;t work:\r\n\r\n    package lab2_1;\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) {\r\n            String s1 = &quot;si&quot;;\r\n            String s2 = &quot;sir1 si cu sir2 fac un sir3&quot;;\r\n    \r\n            int count = 0;\r\n            int ok=1;\r\n            int i=1;\r\n            for(i=0;i&lt;=s2.length()-1;i++)\r\n                if (s2.substring(i,i+s1.length()).equals(s1))\r\n                    count++;\r\n    \r\n    \r\n            System.out.println(count);\r\n    \r\n        }\r\n    }\r\n\r\nCan you anyone please review my code and tell me what is my mistake?","title":"How many times there is a substring in a string [Java]","body":"<p>I am trying to write a code in order to determine how many times there is the string s1 in the string s2.</p>\n\n<p>This is the code I have written,but doesn't work:</p>\n\n<pre><code>package lab2_1;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        String s1 = \"si\";\n        String s2 = \"sir1 si cu sir2 fac un sir3\";\n\n        int count = 0;\n        int ok=1;\n        int i=1;\n        for(i=0;i&lt;=s2.length()-1;i++)\n            if (s2.substring(i,i+s1.length()).equals(s1))\n                count++;\n\n\n        System.out.println(count);\n\n    }\n}\n</code></pre>\n\n<p>Can you anyone please review my code and tell me what is my mistake?</p>\n"},{"tags":["java","android","google-cloud-platform","google-drive-api"],"comments":[{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1689746692,"post_id":76717954,"comment_id":135255022,"body_markdown":"remove spaces drive if that doesn&#39;t work remove the name in the q parm to see what happens.   let me know","body":"remove spaces drive if that doesn&#39;t work remove the name in the q parm to see what happens.   let me know"},{"owner":{"account_id":29045854,"reputation":1,"user_id":22249718,"display_name":"Vinicbr123"},"score":0,"creation_date":1689918243,"post_id":76717954,"comment_id":135283715,"body_markdown":"@LindaLawton-DaImTo I did both things but it doesn&#39;t work, the list of folders continues with size 0, I even changed my google account and set everything up again, but the same thing happened.","body":"@LindaLawton-DaImTo I did both things but it doesn&#39;t work, the list of folders continues with size 0, I even changed my google account and set everything up again, but the same thing happened."},{"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"score":0,"creation_date":1689927383,"post_id":76717954,"comment_id":135285241,"body_markdown":"are you using a service account?","body":"are you using a service account?"},{"owner":{"account_id":29045854,"reputation":1,"user_id":22249718,"display_name":"Vinicbr123"},"score":0,"creation_date":1689963665,"post_id":76717954,"comment_id":135292149,"body_markdown":"@LindaLawton-DaImTo yes","body":"@LindaLawton-DaImTo yes"},{"owner":{"account_id":29045854,"reputation":1,"user_id":22249718,"display_name":"Vinicbr123"},"score":1,"creation_date":1690010530,"post_id":76717954,"comment_id":135295883,"body_markdown":"@LindaLawton-DaImTo i changed &quot;Scopes.DRIVE_FILE&quot; for &quot;DriveScopes.DRIVE&quot; and it worked","body":"@LindaLawton-DaImTo i changed &quot;Scopes.DRIVE_FILE&quot; for &quot;DriveScopes.DRIVE&quot; and it worked"}],"answers":[{"tags":[],"owner":{"account_id":2066403,"reputation":109440,"user_id":1841839,"accept_rate":71,"display_name":"Linda Lawton - DaImTo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689966286,"creation_date":1689966286,"answer_id":76740606,"question_id":76717954,"body_markdown":"Remember a service account isn&#39;t you.   its a dummy account it has its own drive account with nothing in it.   It doesn&#39;t have access to anything until you give it access.\r\n\r\nTake the service account email address and share the directory with it.","title":"Unable to locate specific folder using Google Drive API","body":"<p>Remember a service account isn't you.   its a dummy account it has its own drive account with nothing in it.   It doesn't have access to anything until you give it access.</p>\n<p>Take the service account email address and share the directory with it.</p>\n"}],"owner":{"account_id":29045854,"reputation":1,"user_id":22249718,"display_name":"Vinicbr123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689966286,"creation_date":1689740114,"question_id":76717954,"body_markdown":"I&#39;m trying to get the url of a file that is on my drive, knowing its name and the name of the parent folder. But the result is always null.\r\n\r\nI&#39;m using a service account with owner permission, I already put the correct credentials inside the project and shared the folder and file with the service account email and still the problem continues. When debugging the code it is possible to see that the size of `List&lt;File&gt; folders = result.getFiles(); ` is 0.\r\n\r\nHere is the complete code:\r\n\r\n```\r\nimport android.content.Context;\r\n\r\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\nimport com.google.api.client.http.HttpRequestInitializer;\r\nimport com.google.api.client.http.HttpTransport;\r\nimport com.google.api.client.json.JsonFactory;\r\nimport com.google.api.client.json.gson.GsonFactory;\r\nimport com.google.api.services.drive.Drive;\r\nimport com.google.api.services.drive.DriveScopes;\r\nimport com.google.api.services.drive.model.File;\r\nimport com.google.api.services.drive.model.FileList;\r\nimport com.google.auth.http.HttpCredentialsAdapter;\r\nimport com.google.auth.oauth2.GoogleCredentials;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.security.GeneralSecurityException;\r\nimport java.util.Collections;\r\nimport java.util.List;\r\n\r\npublic class DriveAccessRunnable implements Runnable {\r\n\r\n   private static final String APPLICATION_NAME = &quot;School Grade&quot;;\r\n\r\n   private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n\r\n   private static Drive driveService;\r\n   private final Context context;\r\n   private final String parentFolderTitle;\r\n   private final String fileName;\r\n   private final DriveAccessCallback callback;\r\n\r\n   public DriveAccessRunnable(Context context, String parentFolderTitle, String fileName, DriveAccessCallback callback) {\r\n      this.context = context;\r\n      this.parentFolderTitle = parentFolderTitle;\r\n      this.fileName = fileName;\r\n      this.callback = callback;\r\n   }\r\n\r\n   @Override\r\n   public void run() {\r\n      try {\r\n         // Google Drive access code\r\n         HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\r\n         driveService = new Drive.Builder(httpTransport, JSON_FACTORY, getHttpRequestInitializer())\r\n                 .setApplicationName(APPLICATION_NAME)\r\n                 .build();\r\n\r\n         // Get the URL of the file or null if not found\r\n         String fileUrl = getFileUrl(parentFolderTitle, fileName);\r\n\r\n        \r\n         // Call the callback with the result\r\n         callback.onFileUrlReceived(fileUrl);\r\n      } catch (IOException | GeneralSecurityException e) {\r\n         e.printStackTrace();\r\n         // Call the callback with an error result\r\n         callback.onError(e.getMessage());\r\n      }\r\n\r\n   }\r\n\r\n   private HttpRequestInitializer getHttpRequestInitializer() throws IOException {\r\n      InputStream credentialsStream = context.getResources().openRawResource(R.raw.credentials);\r\n\r\n      GoogleCredentials credentials = GoogleCredentials.fromStream(credentialsStream)\r\n              .createScoped(Collections.singletonList(DriveScopes.DRIVE_FILE));\r\n\r\n      return new HttpCredentialsAdapter(credentials);\r\n   }\r\n\r\n   private String getFileUrl(String parentFolderTitle, String fileName) throws IOException {\r\n     \r\n       // Search parent folder by title\r\n      FileList result = driveService.files().list()\r\n              .setQ(&quot;mimeType=&#39;application/vnd.google-apps.folder&#39; and trashed=false and name=&#39;&quot; + parentFolderTitle + &quot;&#39;&quot;)\r\n              .setSpaces(&quot;drive&quot;)\r\n              .setFields(&quot;files(id)&quot;)\r\n              .execute();\r\n\r\n      List&lt;File&gt; folders = result.getFiles();\r\n\r\n      if (!folders.isEmpty()) {\r\n         String parentFolderId = folders.get(0).getId();\r\n\r\n         \r\n         // Browse files inside the parent folder\r\n         result = driveService.files().list()\r\n                 .setQ(&quot;&#39;&quot; + parentFolderId + &quot;&#39; in parents and trashed=false&quot;)\r\n                 .setFields(&quot;files(name, webViewLink)&quot;)\r\n                 .execute();\r\n\r\n         List&lt;File&gt; files = result.getFiles();\r\n         for (File file : files) {\r\n            if (file.getName().equals(fileName)) {\r\n               return file.getWebViewLink();\r\n            }\r\n         }\r\n      }\r\n\r\n      return null;\r\n   }\r\n\r\n\r\n   public interface DriveAccessCallback {\r\n      void onFileUrlReceived(String fileUrl);\r\n      void onError(String errorMessage);\r\n   }\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"Unable to locate specific folder using Google Drive API","body":"<p>I'm trying to get the url of a file that is on my drive, knowing its name and the name of the parent folder. But the result is always null.</p>\n<p>I'm using a service account with owner permission, I already put the correct credentials inside the project and shared the folder and file with the service account email and still the problem continues. When debugging the code it is possible to see that the size of <code>List&lt;File&gt; folders = result.getFiles(); </code> is 0.</p>\n<p>Here is the complete code:</p>\n<pre><code>import android.content.Context;\n\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.HttpRequestInitializer;\nimport com.google.api.client.http.HttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.services.drive.Drive;\nimport com.google.api.services.drive.DriveScopes;\nimport com.google.api.services.drive.model.File;\nimport com.google.api.services.drive.model.FileList;\nimport com.google.auth.http.HttpCredentialsAdapter;\nimport com.google.auth.oauth2.GoogleCredentials;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.GeneralSecurityException;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class DriveAccessRunnable implements Runnable {\n\n   private static final String APPLICATION_NAME = &quot;School Grade&quot;;\n\n   private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n\n   private static Drive driveService;\n   private final Context context;\n   private final String parentFolderTitle;\n   private final String fileName;\n   private final DriveAccessCallback callback;\n\n   public DriveAccessRunnable(Context context, String parentFolderTitle, String fileName, DriveAccessCallback callback) {\n      this.context = context;\n      this.parentFolderTitle = parentFolderTitle;\n      this.fileName = fileName;\n      this.callback = callback;\n   }\n\n   @Override\n   public void run() {\n      try {\n         // Google Drive access code\n         HttpTransport httpTransport = GoogleNetHttpTransport.newTrustedTransport();\n         driveService = new Drive.Builder(httpTransport, JSON_FACTORY, getHttpRequestInitializer())\n                 .setApplicationName(APPLICATION_NAME)\n                 .build();\n\n         // Get the URL of the file or null if not found\n         String fileUrl = getFileUrl(parentFolderTitle, fileName);\n\n        \n         // Call the callback with the result\n         callback.onFileUrlReceived(fileUrl);\n      } catch (IOException | GeneralSecurityException e) {\n         e.printStackTrace();\n         // Call the callback with an error result\n         callback.onError(e.getMessage());\n      }\n\n   }\n\n   private HttpRequestInitializer getHttpRequestInitializer() throws IOException {\n      InputStream credentialsStream = context.getResources().openRawResource(R.raw.credentials);\n\n      GoogleCredentials credentials = GoogleCredentials.fromStream(credentialsStream)\n              .createScoped(Collections.singletonList(DriveScopes.DRIVE_FILE));\n\n      return new HttpCredentialsAdapter(credentials);\n   }\n\n   private String getFileUrl(String parentFolderTitle, String fileName) throws IOException {\n     \n       // Search parent folder by title\n      FileList result = driveService.files().list()\n              .setQ(&quot;mimeType='application/vnd.google-apps.folder' and trashed=false and name='&quot; + parentFolderTitle + &quot;'&quot;)\n              .setSpaces(&quot;drive&quot;)\n              .setFields(&quot;files(id)&quot;)\n              .execute();\n\n      List&lt;File&gt; folders = result.getFiles();\n\n      if (!folders.isEmpty()) {\n         String parentFolderId = folders.get(0).getId();\n\n         \n         // Browse files inside the parent folder\n         result = driveService.files().list()\n                 .setQ(&quot;'&quot; + parentFolderId + &quot;' in parents and trashed=false&quot;)\n                 .setFields(&quot;files(name, webViewLink)&quot;)\n                 .execute();\n\n         List&lt;File&gt; files = result.getFiles();\n         for (File file : files) {\n            if (file.getName().equals(fileName)) {\n               return file.getWebViewLink();\n            }\n         }\n      }\n\n      return null;\n   }\n\n\n   public interface DriveAccessCallback {\n      void onFileUrlReceived(String fileUrl);\n      void onError(String errorMessage);\n   }\n}\n</code></pre>\n"},{"tags":["java","list","java-8"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":3,"creation_date":1689855108,"post_id":76729712,"comment_id":135274029,"body_markdown":"Please provice a [mcve]. I guess, listB is immutable","body":"Please provice a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. I guess, listB is immutable"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689855134,"post_id":76729712,"comment_id":135274034,"body_markdown":"Guava has `Comparators.explicit` which might be useful here","body":"Guava has <code>Comparators.explicit</code> which might be useful here"},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":1,"creation_date":1689881332,"post_id":76729712,"comment_id":135279984,"body_markdown":"`But was getting UnsupportedOperationException as ListB doesn&#39;t have all elements of listA.`  Why should `listB` contain any elements of A?  `ListB` is supposed to contain indexes into ListA?  The only exception I would expect would be an `IndexOutofBoundsException` since 8 would be be an illegal index into A.","body":"<code>But was getting UnsupportedOperationException as ListB doesn&#39;t have all elements of listA.</code>  Why should <code>listB</code> contain any elements of A?  <code>ListB</code> is supposed to contain indexes into ListA?  The only exception I would expect would be an <code>IndexOutofBoundsException</code> since 8 would be be an illegal index into A."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1689965903,"post_id":76729712,"comment_id":135292477,"body_markdown":"There&#39;s no streaming in your code. Also note `element -&gt; listA.indexOf(element)` can be reduced to `listA::indexOf`.","body":"There&#39;s no streaming in your code. Also note <code>element -&gt; listA.indexOf(element)</code> can be reduced to <code>listA::indexOf</code>."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689855255,"creation_date":1689855255,"answer_id":76729745,"question_id":76729712,"body_markdown":"`List.indexOf` doesn&#39;t throw `UnsupportedOperationException` if the element isn&#39;t there, it returns `-1`. So all you need to do is make sure that an index of -1 will result in &quot;somewhere at the end&quot;, meaning a high number (such as the list size or `Integer.MAX_VALUE`.\r\n\r\nIf you are getting an `UnsupportedOperationException`, it&#39;s most likely because `listB` isn&#39;t mutable, so it won&#39;t support sorting in-place.","title":"Sort list elements by another list","body":"<p><code>List.indexOf</code> doesn't throw <code>UnsupportedOperationException</code> if the element isn't there, it returns <code>-1</code>. So all you need to do is make sure that an index of -1 will result in &quot;somewhere at the end&quot;, meaning a high number (such as the list size or <code>Integer.MAX_VALUE</code>.</p>\n<p>If you are getting an <code>UnsupportedOperationException</code>, it's most likely because <code>listB</code> isn't mutable, so it won't support sorting in-place.</p>\n"},{"comments":[{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1689855889,"post_id":76729825,"comment_id":135274245,"body_markdown":"See the code working [here](https://tio.run/##ZVBNSwMxEL33V@SYSDpo1aotCuvHQWjxUBRBRKa76ZKa3SzJbGmV/vZ1dttDsXOZ8Oa9N2@yxBX2l9l309ii8oHEkgGoyTo4GfeOsEjBYNGOqnrubCpShzGKKdpS/PYE1x6PhMRt5W0mCp7KGQVb5h@fAkMe1Z7c1gqDcDZSIm5FEgJuImCcMCDP9EBf6Es91Ff6Wt@o8ZHmnjUtFfxCDvU5swb/WLbMzJpZzyXNdtkDlrmRp3pnANH@GKkUzP3aZFJB6p0zKcmHXfchAvkpVrKjj0a5IS2s6N8Jqw52dRdA5N9iZVFhQJayWfvku3m9XHeiNg@wyUt4NAusHeO6TWdyE2CavH@9JZPXJ3XoPdtEMgX4mqBiM3JlFybZU7a9bdP8AQ).","body":"See the code working <a href=\"https://tio.run/##ZVBNSwMxEL33V@SYSDpo1aotCuvHQWjxUBRBRKa76ZKa3SzJbGmV/vZ1dttDsXOZ8Oa9N2@yxBX2l9l309ii8oHEkgGoyTo4GfeOsEjBYNGOqnrubCpShzGKKdpS/PYE1x6PhMRt5W0mCp7KGQVb5h@fAkMe1Z7c1gqDcDZSIm5FEgJuImCcMCDP9EBf6Es91Ff6Wt@o8ZHmnjUtFfxCDvU5swb/WLbMzJpZzyXNdtkDlrmRp3pnANH@GKkUzP3aZFJB6p0zKcmHXfchAvkpVrKjj0a5IS2s6N8Jqw52dRdA5N9iZVFhQJayWfvku3m9XHeiNg@wyUt4NAusHeO6TWdyE2CavH@9JZPXJ3XoPdtEMgX4mqBiM3JlFybZU7a9bdP8AQ\" rel=\"nofollow noreferrer\">here</a>."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689855762,"creation_date":1689855762,"answer_id":76729825,"question_id":76729712,"body_markdown":"To improve performance, the indexes of all the elements in `listB` can be stored in a `Map` first. Then, to order elements that are not in `listB` to the end of the result, they can all be given `Integer.MAX_VALUE` as the sort key.\r\n\r\n```java\r\nvar listA = Arrays.asList(1,2,4,5,6,7,8,9);\r\nvar listB = List.of(6,3,8,2);\r\nvar index = IntStream.range(0, listB.size()).boxed()\r\n                     .collect(Collectors.toMap(listB::get, i -&gt; i));\r\nlistA.sort(Comparator.comparingInt(x -&gt; index.getOrDefault(x, Integer.MAX_VALUE)));\r\n// listA = [6, 8, 2, 1, 4, 5, 7, 9]\r\n```","title":"Sort list elements by another list","body":"<p>To improve performance, the indexes of all the elements in <code>listB</code> can be stored in a <code>Map</code> first. Then, to order elements that are not in <code>listB</code> to the end of the result, they can all be given <code>Integer.MAX_VALUE</code> as the sort key.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var listA = Arrays.asList(1,2,4,5,6,7,8,9);\nvar listB = List.of(6,3,8,2);\nvar index = IntStream.range(0, listB.size()).boxed()\n                     .collect(Collectors.toMap(listB::get, i -&gt; i));\nlistA.sort(Comparator.comparingInt(x -&gt; index.getOrDefault(x, Integer.MAX_VALUE)));\n// listA = [6, 8, 2, 1, 4, 5, 7, 9]\n</code></pre>\n"}],"owner":{"account_id":26661181,"reputation":9,"user_id":20273989,"display_name":"sreenu yalam"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":72,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"accepted_answer_id":76729825,"answer_count":2,"score":-2,"last_activity_date":1689965802,"creation_date":1689855047,"question_id":76729712,"body_markdown":"I have two lists `A[1,2,4,5,6,7,8,9]` and `B[6,3,8,2]`. I need to sort the `A` list by `B` list indexes. So that the `A` list will be `[6,8,2,1,4,5,7,9]`. Is there any efficient way to do that?\r\n\r\nTried using java8 streaming and comparators \r\n```java\r\nlistB.sort(Comparator.comparingInt(element -&gt; listA.indexOf(element)));\r\n```\r\nBut was getting UnsupportedOperationException as listB doesn&#39;t have all elements of listA.","title":"Sort list elements by another list","body":"<p>I have two lists <code>A[1,2,4,5,6,7,8,9]</code> and <code>B[6,3,8,2]</code>. I need to sort the <code>A</code> list by <code>B</code> list indexes. So that the <code>A</code> list will be <code>[6,8,2,1,4,5,7,9]</code>. Is there any efficient way to do that?</p>\n<p>Tried using java8 streaming and comparators</p>\n<pre class=\"lang-java prettyprint-override\"><code>listB.sort(Comparator.comparingInt(element -&gt; listA.indexOf(element)));\n</code></pre>\n<p>But was getting UnsupportedOperationException as listB doesn't have all elements of listA.</p>\n"},{"tags":["java","spring","spring-annotations"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1421840290,"post_id":28065994,"comment_id":44512359,"body_markdown":"Annotate the preferred one with `@Primary`. No need to use a `@Qualifier` that way.","body":"Annotate the preferred one with <code>@Primary</code>. No need to use a <code>@Qualifier</code> that way."},{"owner":{"account_id":4130036,"reputation":3449,"user_id":3388227,"accept_rate":71,"display_name":"Nazaret K."},"score":0,"creation_date":1421842737,"post_id":28065994,"comment_id":44513799,"body_markdown":"Thanks for the comment. Yes, that is actually one way I have found to overcome the problem, but I am just wondering how come there is no equivalent of autowire-candidate in annotations.","body":"Thanks for the comment. Yes, that is actually one way I have found to overcome the problem, but I am just wondering how come there is no equivalent of autowire-candidate in annotations."},{"owner":{"account_id":9181659,"reputation":1756,"user_id":6825250,"display_name":"Sergey Bespalov"},"score":3,"creation_date":1476241820,"post_id":28065994,"comment_id":67258333,"body_markdown":"Looks like Spring refused `autowire-candidate=false` concept and it no longer supported. There is no analogue with annotations, so `@Primary` is only way as you noticed.","body":"Looks like Spring refused <code>autowire-candidate=false</code> concept and it no longer supported. There is no analogue with annotations, so <code>@Primary</code> is only way as you noticed."},{"owner":{"account_id":6751261,"reputation":907,"user_id":5201186,"accept_rate":50,"display_name":"Николай Митропольский"},"score":0,"creation_date":1476255030,"post_id":28065994,"comment_id":67262348,"body_markdown":"Sergey Bespalov, probably you should write it as answer, because seemed that it is the only truth.","body":"Sergey Bespalov, probably you should write it as answer, because seemed that it is the only truth."},{"owner":{"account_id":9181659,"reputation":1756,"user_id":6825250,"display_name":"Sergey Bespalov"},"score":0,"creation_date":1476324787,"post_id":28065994,"comment_id":67300339,"body_markdown":"@НиколайМитропольский, done with some additional suggestion.","body":"@НиколайМитропольский, done with some additional suggestion."}],"answers":[{"tags":[],"owner":{"account_id":9181659,"reputation":1756,"user_id":6825250,"display_name":"Sergey Bespalov"},"comment_count":0,"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1476324744,"creation_date":1476323983,"answer_id":40011075,"question_id":28065994,"body_markdown":"Looks like Spring refused `autowire-candidate=false` concept and it no longer supported. There is no analogue with annotations, so `@Primary` is the best work-around as you noticed.\r\n\r\nAnother way is to use custom `org.springframework.beans.factory.support.AutowireCandidateResolver`, which is used in `DefaultListableBeanFactory`, with logic that exclude undesirable beans from autowire candidates. In such case, the  technology will be similar to that used for `autowire-candidate=false` in `SimpleAutowireCandidateResolver`.","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>Looks like Spring refused <code>autowire-candidate=false</code> concept and it no longer supported. There is no analogue with annotations, so <code>@Primary</code> is the best work-around as you noticed.</p>\n\n<p>Another way is to use custom <code>org.springframework.beans.factory.support.AutowireCandidateResolver</code>, which is used in <code>DefaultListableBeanFactory</code>, with logic that exclude undesirable beans from autowire candidates. In such case, the  technology will be similar to that used for <code>autowire-candidate=false</code> in <code>SimpleAutowireCandidateResolver</code>.</p>\n"},{"comments":[{"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"score":0,"creation_date":1580472747,"post_id":48184250,"comment_id":106117813,"body_markdown":"Are you sure the Bean Visibility is implemented in Spring?","body":"Are you sure the Bean Visibility is implemented in Spring?"},{"owner":{"account_id":1591496,"reputation":1127,"user_id":1474729,"display_name":"Ghurdyl"},"score":1,"creation_date":1580806176,"post_id":48184250,"comment_id":106209113,"body_markdown":"@Whimusical yes, I created a class as defined in my answert and Autowired an attribute of type &quot;Bean&quot; in another spring component and spring injected the &#39;public&#39; Bean.","body":"@Whimusical yes, I created a class as defined in my answert and Autowired an attribute of type &quot;Bean&quot; in another spring component and spring injected the &#39;public&#39; Bean."},{"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"score":0,"creation_date":1580826737,"post_id":48184250,"comment_id":106220354,"body_markdown":"I was thinking of https://github.com/spring-projects/spring-framework/issues/11829 and the fact that most documentation I see on the net regarding that feature is on Spring 1.0, but they must be outdated","body":"I was thinking of <a href=\"https://github.com/spring-projects/spring-framework/issues/11829\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-framework/issues/11829</a> and the fact that most documentation I see on the net regarding that feature is on Spring 1.0, but they must be outdated"}],"tags":[],"owner":{"account_id":1591496,"reputation":1127,"user_id":1474729,"display_name":"Ghurdyl"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1543940814,"creation_date":1515576830,"answer_id":48184250,"question_id":28065994,"body_markdown":"You can also use the bean accessor to tune it&#39;s visibiltiy.\r\n\r\nsee [Bean visibility][1]\r\n\r\n    @Configuration\r\n    public abstract class VisibilityConfiguration {\r\n\r\n        @Bean\r\n        public Bean publicBean() {\r\n            Bean bean = new Bean();\r\n            bean.setDependency(hiddenBean());\r\n            return bean;\r\n        }\r\n\r\n        @Bean\r\n        protected Bean hiddenBean() {\r\n            return new Bean(&quot;protected bean&quot;);\r\n        }\r\n    }\r\n\r\nYou can then `@Autowire` the `Bean` class and it will autowire the **`public`** bean (without complaining about multiple matching beans)\r\n\r\nAs a class&#39; definition (unless embedded) does not allow **`private`** / **`protected`** accessor the work around would be to use an `@Configuration` class that would instantiate all the beans an publish the public beans while hiding the private/protected (instead of directly annotating the classes `@Component` \\ `@Service`)\r\n\r\nAlso package-protected accessor may worth a try to hide `@Component` annotated classes. I don&#39;t know if that may work.\r\n\r\n  [1]: https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html#bean-visibility","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>You can also use the bean accessor to tune it's visibiltiy.</p>\n\n<p>see <a href=\"https://docs.spring.io/spring-javaconfig/docs/1.0.0.m3/reference/html/creating-bean-definitions.html#bean-visibility\" rel=\"nofollow noreferrer\">Bean visibility</a></p>\n\n<pre><code>@Configuration\npublic abstract class VisibilityConfiguration {\n\n    @Bean\n    public Bean publicBean() {\n        Bean bean = new Bean();\n        bean.setDependency(hiddenBean());\n        return bean;\n    }\n\n    @Bean\n    protected Bean hiddenBean() {\n        return new Bean(\"protected bean\");\n    }\n}\n</code></pre>\n\n<p>You can then <code>@Autowire</code> the <code>Bean</code> class and it will autowire the <strong><code>public</code></strong> bean (without complaining about multiple matching beans)</p>\n\n<p>As a class' definition (unless embedded) does not allow <strong><code>private</code></strong> / <strong><code>protected</code></strong> accessor the work around would be to use an <code>@Configuration</code> class that would instantiate all the beans an publish the public beans while hiding the private/protected (instead of directly annotating the classes <code>@Component</code> \\ <code>@Service</code>)</p>\n\n<p>Also package-protected accessor may worth a try to hide <code>@Component</code> annotated classes. I don't know if that may work.</p>\n"},{"tags":[],"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1571426880,"creation_date":1571424568,"answer_id":58456618,"question_id":28065994,"body_markdown":"Since Spring 5.1 , you can configure `autowire-candidate` in `@Bean` through  `autowireCandidate` attribute: \r\n\r\n``` java\r\n@Bean(autowireCandidate = false)\r\npublic FooBean foo() {\r\n      return newFooBean();\r\n}\r\n```","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>Since Spring 5.1 , you can configure <code>autowire-candidate</code> in <code>@Bean</code> through  <code>autowireCandidate</code> attribute: </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@Bean(autowireCandidate = false)\npublic FooBean foo() {\n      return newFooBean();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22085194,"reputation":466,"user_id":16344146,"display_name":"A D"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633450094,"creation_date":1633450094,"answer_id":69453886,"question_id":28065994,"body_markdown":"We can do this by using the ```@Qualifier``` annotations with name mentioned in the ```@Component``` annotations\r\nBean classes - \r\n```\r\n@Component(&quot;fooFormatter&quot;)\r\npublic class FooFormatter implements Formatter {\r\n    public String format() {\r\n        return &quot;foo&quot;;\r\n    }\r\n}\r\n@Component(&quot;barFormatter&quot;)\r\npublic class BarFormatter implements Formatter {\r\n    public String format() {\r\n        return &quot;bar&quot;;\r\n    }\r\n}\r\n```\r\nInjecting bean in service class - \r\n```\r\npublic class FooService {\r\n    @Autowired\r\n    @Qualifier(&quot;fooFormatter&quot;)\r\n    private Formatter formatter;\r\n}\r\n```\r\nFor more details please refer - https://www.baeldung.com/spring-autowire#disambiguation. Above example taken from this link.","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>We can do this by using the <code>@Qualifier</code> annotations with name mentioned in the <code>@Component</code> annotations\nBean classes -</p>\n<pre><code>@Component(&quot;fooFormatter&quot;)\npublic class FooFormatter implements Formatter {\n    public String format() {\n        return &quot;foo&quot;;\n    }\n}\n@Component(&quot;barFormatter&quot;)\npublic class BarFormatter implements Formatter {\n    public String format() {\n        return &quot;bar&quot;;\n    }\n}\n</code></pre>\n<p>Injecting bean in service class -</p>\n<pre><code>public class FooService {\n    @Autowired\n    @Qualifier(&quot;fooFormatter&quot;)\n    private Formatter formatter;\n}\n</code></pre>\n<p>For more details please refer - <a href=\"https://www.baeldung.com/spring-autowire#disambiguation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-autowire#disambiguation</a>. Above example taken from this link.</p>\n"},{"tags":[],"owner":{"account_id":1448634,"reputation":540,"user_id":1366298,"display_name":"cfillol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689965690,"creation_date":1689965690,"answer_id":76740547,"question_id":28065994,"body_markdown":"Use Object type to create the Bean you want to hide\r\n\r\n    @Configuration\r\n    public class MyConfiguration {\r\n\r\n        @Bean\r\n        public MyInterface publicBean() {\r\n            return new MyInterfaceImpl1();\r\n        }\r\n\r\n        @Bean\r\n        protected Object hiddenBean() {\r\n           return new MyInterfaceImpl2();\r\n        }\r\n    }\r\n\r\nThen you can use a simple @Autowired to inject publicBean \r\n\r\n    @Component\r\n    public class MyService {\r\n\r\n        @Autowired\r\n        MyInterface publicBean;\r\n\r\n    }\r\n\r\nAnd even if you wanted to inject also hiddenBean in other place, then you could using @Qualifier\r\n\r\n    @Component\r\n    public class OtherComponent {\r\n\r\n        @Autowired\r\n        @Qualifier(&quot;hiddenBean&quot;)\r\n        MyInterface hiddenBean;\r\n\r\n    }","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>Use Object type to create the Bean you want to hide</p>\n<pre><code>@Configuration\npublic class MyConfiguration {\n\n    @Bean\n    public MyInterface publicBean() {\n        return new MyInterfaceImpl1();\n    }\n\n    @Bean\n    protected Object hiddenBean() {\n       return new MyInterfaceImpl2();\n    }\n}\n</code></pre>\n<p>Then you can use a simple @Autowired to inject publicBean</p>\n<pre><code>@Component\npublic class MyService {\n\n    @Autowired\n    MyInterface publicBean;\n\n}\n</code></pre>\n<p>And even if you wanted to inject also hiddenBean in other place, then you could using @Qualifier</p>\n<pre><code>@Component\npublic class OtherComponent {\n\n    @Autowired\n    @Qualifier(&quot;hiddenBean&quot;)\n    MyInterface hiddenBean;\n\n}\n</code></pre>\n"}],"owner":{"account_id":4130036,"reputation":3449,"user_id":3388227,"accept_rate":71,"display_name":"Nazaret K."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12125,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":5,"score":12,"last_activity_date":1689965690,"creation_date":1421839312,"question_id":28065994,"body_markdown":"I am using `@ComponentScan` and `@Component` to define my spring beans. What I would like is to declare one of these beans to be `autowire-candidate=false`. \r\n\r\nThis could be done with this attribute in xml. Isn&#39;t there the equivalent in annotations? \r\n\r\nThe reason I want this is because I have 2 implementations of the same interface and I don&#39;t want to use `@Qualifier`.\r\n\r\nEDIT: Using @Primary is a valid work-around, but autowire-candidate seems to me like a useful feature with its own semantics.\r\n\r\nThanks","title":"How to declare a Spring bean autowire-candidate=&quot;false&quot; when using annotations?","body":"<p>I am using <code>@ComponentScan</code> and <code>@Component</code> to define my spring beans. What I would like is to declare one of these beans to be <code>autowire-candidate=false</code>. </p>\n\n<p>This could be done with this attribute in xml. Isn't there the equivalent in annotations? </p>\n\n<p>The reason I want this is because I have 2 implementations of the same interface and I don't want to use <code>@Qualifier</code>.</p>\n\n<p>EDIT: Using @Primary is a valid work-around, but autowire-candidate seems to me like a useful feature with its own semantics.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","unit-testing","junit","mockachino"],"answers":[{"comments":[{"owner":{"account_id":8719608,"reputation":25664,"user_id":6523163,"accept_rate":72,"display_name":"aircraft"},"score":0,"creation_date":1486447361,"post_id":19929642,"comment_id":71336215,"body_markdown":"If I run the `response.addCookie(cookie);`, then how to see the cookies if I save successd?","body":"If I run the <code>response.addCookie(cookie);</code>, then how to see the cookies if I save successd?"}],"tags":[],"owner":{"account_id":261539,"reputation":19938,"user_id":981715,"accept_rate":74,"display_name":"Eugen Martynov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384260516,"creation_date":1384260516,"answer_id":19929642,"question_id":19925467,"body_markdown":"My preferred mocking framework is **Mockito**. But you can try this with **Mockachino**:\r\n\r\n    @Test\r\n    public void providedNameAndEmptyValueCookieSetToResponse() {\r\n       String name = &quot;name&quot;;\r\n       HttpServletResponse responseMock = mock(HttpServletResponse.class, RETURNS_DEEP_STUBS);\r\n\r\n       removeCookie(responseMock, name);\r\n\r\n       Cookie cookie = catchCookie(mock);\r\n       assertEquals(name, cookie.getName());\r\n       assertEquals(&quot;&quot;, cookie.getValue());\r\n    }\r\n\r\n    private Cookie catchCookie() {\r\n       ArgumentCatcher&lt;Cookie&gt; catcher = ArgumentCatcher.create(new AnyMatcher(Cookie.class));\r\n       verifyOnce().on(responseMock).addCookie(match(catcher));\r\n\r\n      return catcher.getValue();\r\n    }\r\n\r\n    @Test\r\n    public void zeroMaxAgeCookieSetToResponse() {\r\n       HttpServletResponse responseMock = mock(HttpServletResponse.class, RETURNS_DEEP_STUBS);\r\n\r\n       removeCookie(responseMock, &quot;any&quot;);\r\n\r\n       Cookie cookie = catchCookie(mock);\r\n       assertEquals(Integer.valueOf(0), cookie.getMaxAge());\r\n    }","title":"Testing HttpServletResponse addCookie","body":"<p>My preferred mocking framework is <strong>Mockito</strong>. But you can try this with <strong>Mockachino</strong>:</p>\n\n<pre><code>@Test\npublic void providedNameAndEmptyValueCookieSetToResponse() {\n   String name = \"name\";\n   HttpServletResponse responseMock = mock(HttpServletResponse.class, RETURNS_DEEP_STUBS);\n\n   removeCookie(responseMock, name);\n\n   Cookie cookie = catchCookie(mock);\n   assertEquals(name, cookie.getName());\n   assertEquals(\"\", cookie.getValue());\n}\n\nprivate Cookie catchCookie() {\n   ArgumentCatcher&lt;Cookie&gt; catcher = ArgumentCatcher.create(new AnyMatcher(Cookie.class));\n   verifyOnce().on(responseMock).addCookie(match(catcher));\n\n  return catcher.getValue();\n}\n\n@Test\npublic void zeroMaxAgeCookieSetToResponse() {\n   HttpServletResponse responseMock = mock(HttpServletResponse.class, RETURNS_DEEP_STUBS);\n\n   removeCookie(responseMock, \"any\");\n\n   Cookie cookie = catchCookie(mock);\n   assertEquals(Integer.valueOf(0), cookie.getMaxAge());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":329602,"reputation":3748,"user_id":653211,"accept_rate":100,"display_name":"Ashwin Krishnamurthy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490294652,"creation_date":1490294652,"answer_id":42984468,"question_id":19925467,"body_markdown":"A late answer for posterity&#39;s sake. Here is a snippet I used to test the `addCookie` functionality using EasyMock and the awesomeness that is [Capture][1]:\r\n    \r\n    Capture&lt;Cookie&gt; getCookie = new Capture&lt;Cookie&gt;();\r\n    \r\n    //mocking\r\n    HttpServletRequest request = new MockHttpServletRequest();\r\n    Model model = new ExtendedModelMap();\r\n    HttpServletResponse response = createNiceMock(HttpServletResponse.class);\r\n    MyController controller = createMock(MyController.class);\r\n    \t\t\r\n    \r\n    // expectation\r\n    response.addCookie( capture(getCookie) ); //Capture would look for a Cookie object being sent to the addCookie method and grab that for you\r\n    \r\n    // invocation\r\n    replay(controller, response);\r\n    String result = controller.someAction(request, response, model);\r\n    verify(controller, response);\r\n    \r\n    // assertions\r\n    Cookie cookie = getCookie.getValue();\r\n    assertEquals(&quot;myCookie&quot;, cookie.getName());\r\n\r\n\r\nGood luck.\r\n    \t\t\r\n\r\n  [1]: http://easymock.org/api/org/easymock/Capture.html","title":"Testing HttpServletResponse addCookie","body":"<p>A late answer for posterity's sake. Here is a snippet I used to test the <code>addCookie</code> functionality using EasyMock and the awesomeness that is <a href=\"http://easymock.org/api/org/easymock/Capture.html\" rel=\"nofollow noreferrer\">Capture</a>:</p>\n\n<pre><code>Capture&lt;Cookie&gt; getCookie = new Capture&lt;Cookie&gt;();\n\n//mocking\nHttpServletRequest request = new MockHttpServletRequest();\nModel model = new ExtendedModelMap();\nHttpServletResponse response = createNiceMock(HttpServletResponse.class);\nMyController controller = createMock(MyController.class);\n\n\n// expectation\nresponse.addCookie( capture(getCookie) ); //Capture would look for a Cookie object being sent to the addCookie method and grab that for you\n\n// invocation\nreplay(controller, response);\nString result = controller.someAction(request, response, model);\nverify(controller, response);\n\n// assertions\nCookie cookie = getCookie.getValue();\nassertEquals(\"myCookie\", cookie.getName());\n</code></pre>\n\n<p>Good luck.</p>\n"},{"tags":[],"owner":{"account_id":21960464,"reputation":294,"user_id":16238436,"display_name":"Todd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689965671,"creation_date":1689965671,"answer_id":76740545,"question_id":19925467,"body_markdown":"Wow. Ancient topic I&#39;ve landed on here. For what it&#39;s worth I&#39;ve found the MockHttpServletRequest and MockHttpServletResponse classes from Spring to be VERY helpful for this sort of stuff.  They can be used even if your project is NOT a Spring project.  Only one dependency is needed:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\r\n        &lt;version&gt;5.3.20&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen I do stuff like this:\r\n\r\n\t\tMockHttpServletRequest request = new MockHttpServletRequest();\r\n\t\tMockHttpServletResponse response = new MockHttpServletResponse();\r\n\r\n\t\tmethodThatTakesRequestOrResponse(request, response);\r\n\r\n\t\t// Validate state (cookies, attributes, etc.)\r\n\t\tString attribute = (String)request.getAttribute(&quot;expected attribute name&quot;);\r\n\t\tassertNotNull(attribute);\r\n\t\tString cookie = response.getCookie(&quot;expected cookie name&quot;).getValue();\r\n\t\tassertNotNull(cookie);\r\n","title":"Testing HttpServletResponse addCookie","body":"<p>Wow. Ancient topic I've landed on here. For what it's worth I've found the MockHttpServletRequest and MockHttpServletResponse classes from Spring to be VERY helpful for this sort of stuff.  They can be used even if your project is NOT a Spring project.  Only one dependency is needed:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;\n    &lt;version&gt;5.3.20&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then I do stuff like this:</p>\n<pre><code>    MockHttpServletRequest request = new MockHttpServletRequest();\n    MockHttpServletResponse response = new MockHttpServletResponse();\n\n    methodThatTakesRequestOrResponse(request, response);\n\n    // Validate state (cookies, attributes, etc.)\n    String attribute = (String)request.getAttribute(&quot;expected attribute name&quot;);\n    assertNotNull(attribute);\n    String cookie = response.getCookie(&quot;expected cookie name&quot;).getValue();\n    assertNotNull(cookie);\n</code></pre>\n"}],"owner":{"account_id":76211,"reputation":1536,"user_id":218372,"accept_rate":80,"display_name":"heffaklump"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1689965671,"creation_date":1384248689,"question_id":19925467,"body_markdown":"I have this method I want to test with JUnit and Mockachino.\r\n\r\n    public void removeCookie(HttpServletResponse response, String name) {\r\n        Cookie cookie = new Cookie(name, &quot;&quot;);\r\n        cookie.setMaxAge(0);\r\n        response.addCookie(cookie);\r\n    }\r\n\r\nBut how?","title":"Testing HttpServletResponse addCookie","body":"<p>I have this method I want to test with JUnit and Mockachino.</p>\n\n<pre><code>public void removeCookie(HttpServletResponse response, String name) {\n    Cookie cookie = new Cookie(name, \"\");\n    cookie.setMaxAge(0);\n    response.addCookie(cookie);\n}\n</code></pre>\n\n<p>But how?</p>\n"},{"tags":["java","spring-boot","jpa","pageable"],"comments":[{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":1,"creation_date":1689965089,"post_id":76740469,"comment_id":135292366,"body_markdown":"Your `countQuery` does not have a WHERE clause so it counts every row in the table. In newer Spring Data JPA versions, you [don&#39;t need to specify a countQuery for a native query](https://stackoverflow.com/questions/38349930/spring-data-and-native-query-with-pagination).","body":"Your <code>countQuery</code> does not have a WHERE clause so it counts every row in the table. In newer Spring Data JPA versions, you <a href=\"https://stackoverflow.com/questions/38349930/spring-data-and-native-query-with-pagination\">don&#39;t need to specify a countQuery for a native query</a>."},{"owner":{"account_id":28881418,"reputation":21,"user_id":22120821,"display_name":"GyeongEun Kim"},"score":0,"creation_date":1690017893,"post_id":76740469,"comment_id":135296489,"body_markdown":"thank you so much. by deleting countQuery, It works well","body":"thank you so much. by deleting countQuery, It works well"}],"owner":{"account_id":28881418,"reputation":21,"user_id":22120821,"display_name":"GyeongEun Kim"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689965656,"creation_date":1689964774,"question_id":76740469,"body_markdown":"hi Iam using spring boot, JPA\r\n\r\nI used Pageable objects to do Pagination\r\n\r\nand when I get each Page, I got totalElements by using `getTotalElements()`\r\n\r\nI expected to get the number of searching result, but I got the total number of table&#39;s record.\r\n\r\nfor example, if i have 14 records in my db table and the number of searching result  is `6` ,\r\n\r\n- request page =0 size =20\r\n\r\ngetTotalElements() method returns 6 and getNumberOfElements() method returns 6 so it has no problem in this case\r\n\r\n- request page =1 size =20\r\n\r\n  getTotalElements() method **returns 14** and getNumberOfElements() method returns 0 so it has **problem in this case**\r\n\r\n- request page =0 size =4\r\n\r\n  getTotalElements() method **returns 14** and getNumberOfElements() method returns 4 so it has **problem in this case**\r\n\r\n- request page =1 size =4\r\n\r\n  getTotalElements() method returns 6 and getNumberOfElements() method returns 2 so it has no problem in this case\r\n\r\nI don&#39;t know why it happens...\r\n\r\ndata from query is correct but i have no idea why getTotalElements returns the total elements of db records. (and even it&#39;s not all the time..)\r\n\r\n## service layer\r\n\r\n```\r\n Optional&lt;Page&lt;Club&gt;&gt; clubList = searchRepository.findByConditionsOrderByDate(pointWKT, distance * 1000, state, category, memberNum, regexpTag, pageable);\r\n\r\n//and I call getTotalElements() here\r\n```\r\n\r\n## repository\r\n\r\n```\r\n @Query(nativeQuery = true, value = searchDefaultQuery+ WhereOptionQuery +\r\n            &quot;ORDER BY created_date DESC&quot;,\r\n            countQuery = &quot;SELECT COUNT(club_id) FROM club&quot;)\r\n    Optional&lt;Page&lt;Club&gt;&gt; findByConditionsOrderByDate (@Param(&quot;standard_point&quot;) String point, @Param(&quot;distance&quot;)Integer distance,\r\n                                                      @Param(&quot;state&quot;)String state, @Param(&quot;category&quot;)String category, @Param(&quot;memberNum&quot;)Integer memberNum,\r\n                                                      @Param(&quot;tags&quot;)String tags, Pageable pageable);\r\n```","title":"Page.getTotalElements() returns the number of total data in table not the number of result of query","body":"<p>hi Iam using spring boot, JPA</p>\n<p>I used Pageable objects to do Pagination</p>\n<p>and when I get each Page, I got totalElements by using <code>getTotalElements()</code></p>\n<p>I expected to get the number of searching result, but I got the total number of table's record.</p>\n<p>for example, if i have 14 records in my db table and the number of searching result  is <code>6</code> ,</p>\n<ul>\n<li>request page =0 size =20</li>\n</ul>\n<p>getTotalElements() method returns 6 and getNumberOfElements() method returns 6 so it has no problem in this case</p>\n<ul>\n<li><p>request page =1 size =20</p>\n<p>getTotalElements() method <strong>returns 14</strong> and getNumberOfElements() method returns 0 so it has <strong>problem in this case</strong></p>\n</li>\n<li><p>request page =0 size =4</p>\n<p>getTotalElements() method <strong>returns 14</strong> and getNumberOfElements() method returns 4 so it has <strong>problem in this case</strong></p>\n</li>\n<li><p>request page =1 size =4</p>\n<p>getTotalElements() method returns 6 and getNumberOfElements() method returns 2 so it has no problem in this case</p>\n</li>\n</ul>\n<p>I don't know why it happens...</p>\n<p>data from query is correct but i have no idea why getTotalElements returns the total elements of db records. (and even it's not all the time..)</p>\n<h2>service layer</h2>\n<pre><code> Optional&lt;Page&lt;Club&gt;&gt; clubList = searchRepository.findByConditionsOrderByDate(pointWKT, distance * 1000, state, category, memberNum, regexpTag, pageable);\n\n//and I call getTotalElements() here\n</code></pre>\n<h2>repository</h2>\n<pre><code> @Query(nativeQuery = true, value = searchDefaultQuery+ WhereOptionQuery +\n            &quot;ORDER BY created_date DESC&quot;,\n            countQuery = &quot;SELECT COUNT(club_id) FROM club&quot;)\n    Optional&lt;Page&lt;Club&gt;&gt; findByConditionsOrderByDate (@Param(&quot;standard_point&quot;) String point, @Param(&quot;distance&quot;)Integer distance,\n                                                      @Param(&quot;state&quot;)String state, @Param(&quot;category&quot;)String category, @Param(&quot;memberNum&quot;)Integer memberNum,\n                                                      @Param(&quot;tags&quot;)String tags, Pageable pageable);\n</code></pre>\n"},{"tags":["java","azure","azure-web-app-service"],"comments":[{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1689554524,"post_id":76700896,"comment_id":135225446,"body_markdown":"Time to run a profiler.","body":"Time to run a profiler."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689563694,"post_id":76700896,"comment_id":135226056,"body_markdown":"Or get a thread dump.","body":"Or get a thread dump."}],"answers":[{"tags":[],"owner":{"account_id":11166237,"reputation":2917,"user_id":8194837,"display_name":"AjayKumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689965586,"creation_date":1689965586,"answer_id":76740538,"question_id":76700896,"body_markdown":"Adding to the above suggestions, if you haven’t done this already, kindly leverage `Diagnose and Solve Problems` to fetch more details on `Web App Restarted`\r\n \r\n\r\n\r\nI understand a simple code change is causing the restart and as you mentioned auto-heal is enabled.\r\n\r\nYou have mentioned about, BRANCH-X  and BRANCH-Y on UAT and Prod, if these are slots swaps. \r\n\r\nTo minimize these types of restarts, set the `WEBSITE_ADD_SITENAME_BINDINGS_IN_APPHOST_CONFIG=1` app setting on all slots and see if it makes any difference. \r\n\r\n Just to isolate the issue, you may try to use [proactive CPU monitoring][1] to set your own CPU threshold rules to temporarily mitigate a high CPU issue ( to narrow-down until the real cause for the issue is found)\r\n\r\n\r\nJust to highlight, on the other hand, restarting an application could cause a possible increase in resource consumption, and depending on the application sometimes those extra resources can be high, so be aware that even though restarting a slot should not affect the other slots, resources are still shared, so it can indirectly affect the other slots if the App Service Plan does not have enough resources.\r\n\r\nMost of the configuration changes trigger some sort of restart. \r\n\r\n\r\n[App Service Restarts][2]  - This document covers some common operations that can be performed in an App Service and the effects in terms of availability and restart operations. Restarts on an App Service can be triggered either manually or by configuration changes.\r\n\r\n\r\nRef: [Troubleshoot swaps][3]\r\n\r\n\r\n  [1]: https://azure.github.io/AppService/2019/10/07/Mitigate-your-CPU-problems-before-they-even-happen.html\r\n  [2]: https://azure.github.io/AppService/2021/09/16/App-Service-Restarts.html\r\n  [3]: https://learn.microsoft.com/azure/app-service/deploy-staging-slots?tabs=portal#troubleshoot-swaps","title":"Adding any simple code to the old code causes Azure App restarts","body":"<p>Adding to the above suggestions, if you haven’t done this already, kindly leverage <code>Diagnose and Solve Problems</code> to fetch more details on <code>Web App Restarted</code></p>\n<p>I understand a simple code change is causing the restart and as you mentioned auto-heal is enabled.</p>\n<p>You have mentioned about, BRANCH-X  and BRANCH-Y on UAT and Prod, if these are slots swaps.</p>\n<p>To minimize these types of restarts, set the <code>WEBSITE_ADD_SITENAME_BINDINGS_IN_APPHOST_CONFIG=1</code> app setting on all slots and see if it makes any difference.</p>\n<p>Just to isolate the issue, you may try to use <a href=\"https://azure.github.io/AppService/2019/10/07/Mitigate-your-CPU-problems-before-they-even-happen.html\" rel=\"nofollow noreferrer\">proactive CPU monitoring</a> to set your own CPU threshold rules to temporarily mitigate a high CPU issue ( to narrow-down until the real cause for the issue is found)</p>\n<p>Just to highlight, on the other hand, restarting an application could cause a possible increase in resource consumption, and depending on the application sometimes those extra resources can be high, so be aware that even though restarting a slot should not affect the other slots, resources are still shared, so it can indirectly affect the other slots if the App Service Plan does not have enough resources.</p>\n<p>Most of the configuration changes trigger some sort of restart.</p>\n<p><a href=\"https://azure.github.io/AppService/2021/09/16/App-Service-Restarts.html\" rel=\"nofollow noreferrer\">App Service Restarts</a>  - This document covers some common operations that can be performed in an App Service and the effects in terms of availability and restart operations. Restarts on an App Service can be triggered either manually or by configuration changes.</p>\n<p>Ref: <a href=\"https://learn.microsoft.com/azure/app-service/deploy-staging-slots?tabs=portal#troubleshoot-swaps\" rel=\"nofollow noreferrer\">Troubleshoot swaps</a></p>\n"}],"owner":{"account_id":29030389,"reputation":1,"user_id":22237472,"display_name":"Brijesh Narayana Punjari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689965586,"creation_date":1689553248,"question_id":76700896,"body_markdown":"We had a branch, **BRANCH-X** on UAT and Prod for a while now. When I deploy a new branch **BRANCH-Y** on UAT, the CPU utilization hits 100% and restarts the app as Azure Auto-heal is ON, which results in thousands of 503-Service Unavailable errors. Initially I thought my new changes would&#39;ve caused this but when I look at the code, nothing seems to be the problem- functionality was good, all the exceptions are handled and no application exits. \r\n\r\n\r\n\r\nFor debugging if it&#39;s a code issue or something is happening internally, I made a small change to BRANCH-X and deployed on UAT. The change was a small as below-\r\n\r\n\r\nBranch-X : \r\n\r\n```\r\nreturn 5;\r\n```\r\n\r\nNew code on UAT for debugging:\r\n\r\n```\r\nint x = 5;\r\nreturn x;\r\n```\r\n\r\n\r\nNow anyone would think the new code would work just like Branch-X, with no 503s. But that&#39;s not the case, the new code auto restarts, hits CPU 100% and throws 503s. To confirm, I again deployed BRANCH-X - No auto restarts, no 100% CPU and no 503s. I don&#39;t understand why any new code changes are giving me 503s on Azure. I have tried to browse for a good answer, but had no luck. So posting it here. ","title":"Adding any simple code to the old code causes Azure App restarts","body":"<p>We had a branch, <strong>BRANCH-X</strong> on UAT and Prod for a while now. When I deploy a new branch <strong>BRANCH-Y</strong> on UAT, the CPU utilization hits 100% and restarts the app as Azure Auto-heal is ON, which results in thousands of 503-Service Unavailable errors. Initially I thought my new changes would've caused this but when I look at the code, nothing seems to be the problem- functionality was good, all the exceptions are handled and no application exits.</p>\n<p>For debugging if it's a code issue or something is happening internally, I made a small change to BRANCH-X and deployed on UAT. The change was a small as below-</p>\n<p>Branch-X :</p>\n<pre><code>return 5;\n</code></pre>\n<p>New code on UAT for debugging:</p>\n<pre><code>int x = 5;\nreturn x;\n</code></pre>\n<p>Now anyone would think the new code would work just like Branch-X, with no 503s. But that's not the case, the new code auto restarts, hits CPU 100% and throws 503s. To confirm, I again deployed BRANCH-X - No auto restarts, no 100% CPU and no 503s. I don't understand why any new code changes are giving me 503s on Azure. I have tried to browse for a good answer, but had no luck. So posting it here.</p>\n"},{"tags":["java","encryption","telegram"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689948069,"post_id":76738572,"comment_id":135289259,"body_markdown":"That&#39;s *not* Java","body":"That&#39;s <i>not</i> Java"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1689948250,"post_id":76738572,"comment_id":135289295,"body_markdown":"@g00se Why do you think it&#39;s not Java? `HmacUtils` is a class from Apache Commons Codec.","body":"@g00se Why do you think it&#39;s not Java? <code>HmacUtils</code> is a class from Apache Commons Codec."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689948544,"post_id":76738572,"comment_id":135289358,"body_markdown":"Sorry - didn&#39;t look far enough down the page","body":"Sorry - didn&#39;t look far enough down the page"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1689948547,"post_id":76738572,"comment_id":135289360,"body_markdown":"You probably need to use the raw key bytes, not the hex-encoded form.","body":"You probably need to use the raw key bytes, not the hex-encoded form."},{"owner":{"account_id":13294099,"reputation":49274,"user_id":9597706,"display_name":"Richard Heap"},"score":1,"creation_date":1689948840,"post_id":76738572,"comment_id":135289421,"body_markdown":"change `var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmacHex(&quot;k&quot;);` to `var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmac(&quot;k&quot;);`","body":"change <code>var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmacHex(&quot;k&quot;);</code> to <code>var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmac(&quot;k&quot;);</code>"}],"answers":[{"comments":[{"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"score":0,"creation_date":1689965530,"post_id":76738773,"comment_id":135292433,"body_markdown":"Thank you! Did try the constructor for the data but not for the key!","body":"Thank you! Did try the constructor for the data but not for the key!"}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689948873,"creation_date":1689948873,"answer_id":76738773,"question_id":76738572,"body_markdown":"The problem is that you take the hex-encoded form of the secret key as the key of the hash. The `HmacUtils(String, String)` constructor will encode the string to bytes using UTF-8, which is not what you want here, so you need to use the `HmacUtils(String, byte[])` constructor. \r\n\r\nSo, you need to use the raw byte form:\r\n\r\n```java\r\nbyte[] secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmac(&quot;k&quot;);\r\nString hash = new HmacUtils(&quot;HmacSHA256&quot;, secretKey).hmacHex(&quot;data&quot;);\r\n\r\nSystem.out.println(HexFormat.of().formatHex(secretKey));\r\nSystem.out.println(hash);\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1\r\n9158b0aeb1e882c075ea46a0d5302cffba1a9b66b0df40f5f01eef614f7d9f94\r\n```\r\n\r\nThis matches the hash from the JavaScript code.","title":"Telegram hash validation in Java","body":"<p>The problem is that you take the hex-encoded form of the secret key as the key of the hash. The <code>HmacUtils(String, String)</code> constructor will encode the string to bytes using UTF-8, which is not what you want here, so you need to use the <code>HmacUtils(String, byte[])</code> constructor.</p>\n<p>So, you need to use the raw byte form:</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmac(&quot;k&quot;);\nString hash = new HmacUtils(&quot;HmacSHA256&quot;, secretKey).hmacHex(&quot;data&quot;);\n\nSystem.out.println(HexFormat.of().formatHex(secretKey));\nSystem.out.println(hash);\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1\n9158b0aeb1e882c075ea46a0d5302cffba1a9b66b0df40f5f01eef614f7d9f94\n</code></pre>\n<p>This matches the hash from the JavaScript code.</p>\n"}],"owner":{"account_id":441129,"reputation":2872,"user_id":831061,"accept_rate":75,"display_name":"luso"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76738773,"answer_count":1,"score":1,"last_activity_date":1689965572,"creation_date":1689947256,"question_id":76738572,"body_markdown":"For the sake of me, I can&#39;t get to [validate a Telegram hash][1] in Java.\r\n\r\nI have a working JS example compiled from different sources that I&#39;ve reduced to barebones to illustrate this question.    \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function main() {\r\n      var k = CryptoJS.HmacSHA256(&#39;k&#39;, &#39;WebAppData&#39;);\r\n      console.log(&quot;k: &quot; + k);\r\n\r\n      var h = CryptoJS.HmacSHA256(&#39;data&#39;, k);\r\n      console.log(&quot;h: &quot; + h);\r\n    }\r\n\r\n    main();\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nThe response of the complete example matches the expected hash\r\n\r\n    &quot;k: 3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1&quot;\r\n    &quot;h: 9158b0aeb1e882c075ea46a0d5302cffba1a9b66b0df40f5f01eef614f7d9f94&quot;\r\n\r\nTrying to do the same thing using Apache commons&#39; Hmac method\r\n\r\n    var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmacHex(&quot;k&quot;);\r\n    var hash = new HmacUtils(&quot;HmacSHA256&quot;, secretKey).hmacHex(&quot;data&quot;);\r\n\r\nI end up with the first one being correct but not the second one, that differs from the other implementation.\r\n\r\n    secretKey: 3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1\r\n    hash: 2c73ad3290e04a382b29edea6cb0ef4b1454592429336c32e98ad611452581b2\r\n\r\nwhat am I failing to see?\r\n\r\nIsn&#39;t there a method to handle this validation in the [Telegram SDK][2] I missed to avoid doing this by hand?\r\n\r\n\r\n  [1]: https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app\r\n  [2]: https://github.com/rubenlagus/TelegramBots","title":"Telegram hash validation in Java","body":"<p>For the sake of me, I can't get to <a href=\"https://core.telegram.org/bots/webapps#validating-data-received-via-the-web-app\" rel=\"nofollow noreferrer\">validate a Telegram hash</a> in Java.</p>\n<p>I have a working JS example compiled from different sources that I've reduced to barebones to illustrate this question.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function main() {\n  var k = CryptoJS.HmacSHA256('k', 'WebAppData');\n  console.log(\"k: \" + k);\n\n  var h = CryptoJS.HmacSHA256('data', k);\n  console.log(\"h: \" + h);\n}\n\nmain();</code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js\"&gt;&lt;/script&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>The response of the complete example matches the expected hash</p>\n<pre><code>&quot;k: 3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1&quot;\n&quot;h: 9158b0aeb1e882c075ea46a0d5302cffba1a9b66b0df40f5f01eef614f7d9f94&quot;\n</code></pre>\n<p>Trying to do the same thing using Apache commons' Hmac method</p>\n<pre><code>var secretKey = new HmacUtils(&quot;HmacSHA256&quot;, &quot;WebAppData&quot;).hmacHex(&quot;k&quot;);\nvar hash = new HmacUtils(&quot;HmacSHA256&quot;, secretKey).hmacHex(&quot;data&quot;);\n</code></pre>\n<p>I end up with the first one being correct but not the second one, that differs from the other implementation.</p>\n<pre><code>secretKey: 3db03151d3fb2678c9fc0f24ee15817bfd1ff922a712a055f63066f875e43fc1\nhash: 2c73ad3290e04a382b29edea6cb0ef4b1454592429336c32e98ad611452581b2\n</code></pre>\n<p>what am I failing to see?</p>\n<p>Isn't there a method to handle this validation in the <a href=\"https://github.com/rubenlagus/TelegramBots\" rel=\"nofollow noreferrer\">Telegram SDK</a> I missed to avoid doing this by hand?</p>\n"},{"tags":["java","dropwizard"],"answers":[{"tags":[],"owner":{"account_id":7547772,"reputation":8593,"user_id":5730279,"display_name":"hc_dev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689964843,"creation_date":1689962655,"answer_id":76740265,"question_id":76739734,"body_markdown":"Technically, it should be possible.\r\n\r\n## How to enable it\r\nYou could use the constructor [`EnvironmentVariableSubstitutor​(boolean strict, boolean substitutionInVariables)`][1] with the second argument as `true` to enable substitution inside variables.\r\n\r\nFor bootsrapping your app with this special `EnvironmentVariableSubstitutor​` instance, see [*WarFox*&#39;s answer](https://stackoverflow.com/a/32231630/5730279) in related question https://stackoverflow.com/questions/23464451/overriding-server-connector-config-with-env-variables-with-dropwizard/32231630#32231630.\r\n\r\nThe `SubstitutingSourceProvider` to use environment variables inside YAML files is explained here: https://stackoverflow.com/questions/53831014/can-i-specify-default-values-for-a-config-yml-on-my-java-application/53832360#53832360.\r\n\r\n## How it works \r\n### Dropwizard Configuration uses Apache Commons Text\r\n\r\nResponsible for environment variable substitution is the class [`EnvironmentVariableSubstitutor`][2].\r\n\r\nIt is implemented by inheritance and uses Apache Commons Text: ` extends StringSubstitutor`.\r\n\r\n### StringSubstitutor allows recursive resolution\r\nFrom [`StringSubstitutor`][3] &#39;s JavaDoc:\r\n&gt; ### Using Recursive Variable Replacement\r\n&gt;\r\n&gt; Variable replacement can work recursively by calling `setEnableSubstitutionInVariables(boolean)` with `true`. If a variable value contains a variable then that variable will also be replaced. Cyclic replacements are detected and will throw an exception.\r\n&gt;\r\n&gt; You can get the replace result to contain a variable prefix. For example:\r\n&gt;\r\n&gt; `&quot;The variable ${${name}} must be used.&quot;`\r\n&gt;\r\n&gt; If the value of the &quot;name&quot; variable is &quot;x&quot;, then only the variable &quot;name&quot; is replaced resulting in:\r\n&gt;\r\n&gt; `&quot;The variable ${x} must be used.&quot;`\r\n\r\n\r\n  [1]: https://javadoc.io/doc/io.dropwizard/dropwizard-project/latest/io/dropwizard/configuration/EnvironmentVariableSubstitutor.html\r\n  [2]: https://github.com/dropwizard/dropwizard/blob/release/4.0.x/dropwizard-configuration/src/main/java/io/dropwizard/configuration/EnvironmentVariableSubstitutor.java\r\n  [3]: https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html","title":"In dropwizard configuration am I allowed to use environment variable as default?","body":"<p>Technically, it should be possible.</p>\n<h2>How to enable it</h2>\n<p>You could use the constructor <a href=\"https://javadoc.io/doc/io.dropwizard/dropwizard-project/latest/io/dropwizard/configuration/EnvironmentVariableSubstitutor.html\" rel=\"nofollow noreferrer\"><code>EnvironmentVariableSubstitutor​(boolean strict, boolean substitutionInVariables)</code></a> with the second argument as <code>true</code> to enable substitution inside variables.</p>\n<p>For bootsrapping your app with this special <code>EnvironmentVariableSubstitutor​</code> instance, see <a href=\"https://stackoverflow.com/a/32231630/5730279\"><em>WarFox</em>'s answer</a> in related question <a href=\"https://stackoverflow.com/questions/23464451/overriding-server-connector-config-with-env-variables-with-dropwizard/32231630#32231630\">Overriding server connector config with env variables with dropwizard</a>.</p>\n<p>The <code>SubstitutingSourceProvider</code> to use environment variables inside YAML files is explained here: <a href=\"https://stackoverflow.com/questions/53831014/can-i-specify-default-values-for-a-config-yml-on-my-java-application/53832360#53832360\">Can I specify default values for a config.yml on my java application?</a>.</p>\n<h2>How it works</h2>\n<h3>Dropwizard Configuration uses Apache Commons Text</h3>\n<p>Responsible for environment variable substitution is the class <a href=\"https://github.com/dropwizard/dropwizard/blob/release/4.0.x/dropwizard-configuration/src/main/java/io/dropwizard/configuration/EnvironmentVariableSubstitutor.java\" rel=\"nofollow noreferrer\"><code>EnvironmentVariableSubstitutor</code></a>.</p>\n<p>It is implemented by inheritance and uses Apache Commons Text: <code> extends StringSubstitutor</code>.</p>\n<h3>StringSubstitutor allows recursive resolution</h3>\n<p>From <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\"><code>StringSubstitutor</code></a> 's JavaDoc:</p>\n<blockquote>\n<h3>Using Recursive Variable Replacement</h3>\n<p>Variable replacement can work recursively by calling <code>setEnableSubstitutionInVariables(boolean)</code> with <code>true</code>. If a variable value contains a variable then that variable will also be replaced. Cyclic replacements are detected and will throw an exception.</p>\n<p>You can get the replace result to contain a variable prefix. For example:</p>\n<p><code>&quot;The variable ${${name}} must be used.&quot;</code></p>\n<p>If the value of the &quot;name&quot; variable is &quot;x&quot;, then only the variable &quot;name&quot; is replaced resulting in:</p>\n<p><code>&quot;The variable ${x} must be used.&quot;</code></p>\n</blockquote>\n"}],"owner":{"account_id":9143631,"reputation":145,"user_id":6800688,"accept_rate":50,"display_name":"user6800688"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76740265,"answer_count":1,"score":0,"last_activity_date":1689964843,"creation_date":1689957214,"question_id":76739734,"body_markdown":"I couldn&#39;t find any documentation for this. For example, I know this is possible:\r\n\r\n```\r\ndefaultSetting: ${DW_DEFAULT_SETTING:-default value}\r\n```\r\n\r\nBut what if I want logic to say if DW_DEFAULT_SETTING is not defined, then use another env variable\r\n\r\n```\r\ndefaultSetting: ${DW_DEFAULT_SETTING:-${ANOTHER_SETTING}}\r\n```\r\n\r\nIs this possible? The only other alternative I can think of is defining a custom getter for defaultSetting in my Configuration class which would read system env variables. ","title":"In dropwizard configuration am I allowed to use environment variable as default?","body":"<p>I couldn't find any documentation for this. For example, I know this is possible:</p>\n<pre><code>defaultSetting: ${DW_DEFAULT_SETTING:-default value}\n</code></pre>\n<p>But what if I want logic to say if DW_DEFAULT_SETTING is not defined, then use another env variable</p>\n<pre><code>defaultSetting: ${DW_DEFAULT_SETTING:-${ANOTHER_SETTING}}\n</code></pre>\n<p>Is this possible? The only other alternative I can think of is defining a custom getter for defaultSetting in my Configuration class which would read system env variables.</p>\n"},{"tags":["java","spring-boot","kotlin","apache-kafka","sasl"],"comments":[{"owner":{"account_id":17100074,"reputation":67,"user_id":12374210,"display_name":"Liu"},"score":0,"creation_date":1698420191,"post_id":71112179,"comment_id":136407720,"body_markdown":"I&#39;m also looking for a solution to this issue, any idea you&#39;ve got now?","body":"I&#39;m also looking for a solution to this issue, any idea you&#39;ve got now?"}],"answers":[{"tags":[],"owner":{"account_id":4073503,"reputation":23,"user_id":3345744,"display_name":"Bala Kalyan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689964825,"creation_date":1689964825,"answer_id":76740473,"question_id":71112179,"body_markdown":"Kafka provides support for custom SASL call back handler. You can override the default SASL call back handler for name and password call back and return the username and password values from AWS secret manager without reconstructing consumer or producer.\r\n\r\nCheck this https://cwiki.apache.org/confluence/display/KAFKA/KIP-86%3A+Configurable+SASL+callback+handlers\r\n\r\nYou can extend the  class ‘org.apache.kafka.common.security.authenticator.SaslClientCAllbackHandler’ and provide your own implementation for Namecallback or passwordcallback \r\n","title":"How to handle AWS Secret Manager rotation in a Spring boot project for Kafka consumers with SASL Authentication Strategy","body":"<p>Kafka provides support for custom SASL call back handler. You can override the default SASL call back handler for name and password call back and return the username and password values from AWS secret manager without reconstructing consumer or producer.</p>\n<p>Check this <a href=\"https://cwiki.apache.org/confluence/display/KAFKA/KIP-86%3A+Configurable+SASL+callback+handlers\" rel=\"nofollow noreferrer\">https://cwiki.apache.org/confluence/display/KAFKA/KIP-86%3A+Configurable+SASL+callback+handlers</a></p>\n<p>You can extend the  class ‘org.apache.kafka.common.security.authenticator.SaslClientCAllbackHandler’ and provide your own implementation for Namecallback or passwordcallback</p>\n"}],"owner":{"account_id":305053,"reputation":939,"user_id":614953,"accept_rate":100,"display_name":"Saeed Afshari"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":531,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689964825,"creation_date":1644842967,"question_id":71112179,"body_markdown":"I have a spring boot application with the following configuration for Kafka consumers:\r\n```\r\n@EnableKafka\r\n@Configuration\r\nclass KafkaConsumerConfig(\r\n    @Value(&quot;\\${aws.secret-manager.sasl-auth.secret-name}&quot;) private val kafkaAuthSecretName: String,\r\n    private val kafkaProperties: KafkaProperties,\r\n    private val awsSecretManagerAdaptor: AwsSecretManagerAdaptor,\r\n    private val applicationContext: ApplicationContext\r\n) {\r\n\r\n    private val logger = KotlinLogging.logger { }\r\n\r\n    @Bean\r\n    fun kafkaListenerContainerFactory():\r\n        KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;String, String&gt;&gt; {\r\n        val factory = ConcurrentKafkaListenerContainerFactory&lt;String, String&gt;()\r\n        factory.consumerFactory = consumerFactory()\r\n        factory.containerProperties.isMissingTopicsFatal = false\r\n        factory.setRetryTemplate(retryTemplate())\r\n        factory.setErrorHandler { exception, data -&gt;\r\n            logger.error(&quot;Error in process with Exception {} and the record is {}&quot;, exception, data)\r\n            SpringApplication.exit(applicationContext)\r\n        }\r\n        return factory\r\n    }\r\n\r\n    fun consumerFactory(): ConsumerFactory&lt;String, String&gt; {\r\n        return DefaultKafkaConsumerFactory(consumerConfig())\r\n    }\r\n\r\n    fun consumerConfig(): Map&lt;String, Any&gt; {\r\n        val props = kafkaProperties.buildConsumerProperties()\r\n        props[ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\r\n        props[ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG] = KafkaAvroDeserializer::class.java\r\n\r\n        val secretValue = awsSecretManagerAdaptor.getSecretValue(kafkaAuthSecretName)\r\n        val username = getUsername()\r\n        val saslJaasConfig =\r\n            &quot;&quot;&quot;org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;$username&quot; password=&quot;$secretValue&quot;;&quot;&quot;&quot;\r\n        props[SaslConfigs.SASL_JAAS_CONFIG] = saslJaasConfig\r\n\r\n        return props\r\n    }\r\n\r\n    private fun getUsername(): String? {\r\n        val secretTags = awsSecretManagerAdaptor.getSecretTags(kafkaAuthSecretName)\r\n        return secretTags.firstOrNull { it.key().equals(&quot;username&quot;) }?.value()\r\n    }\r\n\r\n    private fun retryTemplate(): RetryTemplate {\r\n        val retryTemplate = RetryTemplate()\r\n        retryTemplate.setBackOffPolicy(getFixedBackOffPolicy())\r\n        retryTemplate.setRetryPolicy(getSimpleRetryPolicy())\r\n\r\n        return retryTemplate\r\n    }\r\n\r\n    private fun getFixedBackOffPolicy(): BackOffPolicy {\r\n        val fixedBackOffPolicy = FixedBackOffPolicy()\r\n        fixedBackOffPolicy.backOffPeriod = 3000\r\n        return fixedBackOffPolicy\r\n    }\r\n\r\n    private fun getSimpleRetryPolicy(): SimpleRetryPolicy {\r\n        val simpleRetryPolicy = SimpleRetryPolicy()\r\n        simpleRetryPolicy.maxAttempts = 3\r\n        return simpleRetryPolicy\r\n    }\r\n}\r\n```\r\n\r\nThe Kafka server provides SASL Authentication with username and password. As You can see the username and password are fetched using a service called AwsSecretManagerAdaptor from AWS secret manager.\r\nThe configuration works like charm, however, once the Secret is rotated, and the Kafka consumers are restarted the SASL authentication fails. To solve the issue I am now restarting the SpringBoot Application in order to read the rotated key correctly from AWS Secret Manager.\r\n\r\nThe solution works but as you can see restarting the application is very ugly and error-prone.\r\nI wonder do you have any better suggestions for the improvement?","title":"How to handle AWS Secret Manager rotation in a Spring boot project for Kafka consumers with SASL Authentication Strategy","body":"<p>I have a spring boot application with the following configuration for Kafka consumers:</p>\n<pre><code>@EnableKafka\n@Configuration\nclass KafkaConsumerConfig(\n    @Value(&quot;\\${aws.secret-manager.sasl-auth.secret-name}&quot;) private val kafkaAuthSecretName: String,\n    private val kafkaProperties: KafkaProperties,\n    private val awsSecretManagerAdaptor: AwsSecretManagerAdaptor,\n    private val applicationContext: ApplicationContext\n) {\n\n    private val logger = KotlinLogging.logger { }\n\n    @Bean\n    fun kafkaListenerContainerFactory():\n        KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;String, String&gt;&gt; {\n        val factory = ConcurrentKafkaListenerContainerFactory&lt;String, String&gt;()\n        factory.consumerFactory = consumerFactory()\n        factory.containerProperties.isMissingTopicsFatal = false\n        factory.setRetryTemplate(retryTemplate())\n        factory.setErrorHandler { exception, data -&gt;\n            logger.error(&quot;Error in process with Exception {} and the record is {}&quot;, exception, data)\n            SpringApplication.exit(applicationContext)\n        }\n        return factory\n    }\n\n    fun consumerFactory(): ConsumerFactory&lt;String, String&gt; {\n        return DefaultKafkaConsumerFactory(consumerConfig())\n    }\n\n    fun consumerConfig(): Map&lt;String, Any&gt; {\n        val props = kafkaProperties.buildConsumerProperties()\n        props[ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG] = StringDeserializer::class.java\n        props[ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG] = KafkaAvroDeserializer::class.java\n\n        val secretValue = awsSecretManagerAdaptor.getSecretValue(kafkaAuthSecretName)\n        val username = getUsername()\n        val saslJaasConfig =\n            &quot;&quot;&quot;org.apache.kafka.common.security.scram.ScramLoginModule required username=&quot;$username&quot; password=&quot;$secretValue&quot;;&quot;&quot;&quot;\n        props[SaslConfigs.SASL_JAAS_CONFIG] = saslJaasConfig\n\n        return props\n    }\n\n    private fun getUsername(): String? {\n        val secretTags = awsSecretManagerAdaptor.getSecretTags(kafkaAuthSecretName)\n        return secretTags.firstOrNull { it.key().equals(&quot;username&quot;) }?.value()\n    }\n\n    private fun retryTemplate(): RetryTemplate {\n        val retryTemplate = RetryTemplate()\n        retryTemplate.setBackOffPolicy(getFixedBackOffPolicy())\n        retryTemplate.setRetryPolicy(getSimpleRetryPolicy())\n\n        return retryTemplate\n    }\n\n    private fun getFixedBackOffPolicy(): BackOffPolicy {\n        val fixedBackOffPolicy = FixedBackOffPolicy()\n        fixedBackOffPolicy.backOffPeriod = 3000\n        return fixedBackOffPolicy\n    }\n\n    private fun getSimpleRetryPolicy(): SimpleRetryPolicy {\n        val simpleRetryPolicy = SimpleRetryPolicy()\n        simpleRetryPolicy.maxAttempts = 3\n        return simpleRetryPolicy\n    }\n}\n</code></pre>\n<p>The Kafka server provides SASL Authentication with username and password. As You can see the username and password are fetched using a service called AwsSecretManagerAdaptor from AWS secret manager.\nThe configuration works like charm, however, once the Secret is rotated, and the Kafka consumers are restarted the SASL authentication fails. To solve the issue I am now restarting the SpringBoot Application in order to read the rotated key correctly from AWS Secret Manager.</p>\n<p>The solution works but as you can see restarting the application is very ugly and error-prone.\nI wonder do you have any better suggestions for the improvement?</p>\n"},{"tags":["java","spring-boot","multithreading","hibernate"],"comments":[{"owner":{"account_id":23128,"reputation":13127,"user_id":57719,"display_name":"Chin Huang"},"score":0,"creation_date":1689960219,"post_id":76739966,"comment_id":135291600,"body_markdown":"The [HikariCP maximum pool size](https://github.com/brettwooldridge/HikariCP#frequently-used) default is 10. This limits the number of database connections. What happens when you set [application property](https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data.spring.datasource.hikari) `spring.datasource.hikari.maximum-pool-size=20` ?","body":"The <a href=\"https://github.com/brettwooldridge/HikariCP#frequently-used\" rel=\"nofollow noreferrer\">HikariCP maximum pool size</a> default is 10. This limits the number of database connections. What happens when you set <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties.data.spring.datasource.hikari\" rel=\"nofollow noreferrer\">application property</a> <code>spring.datasource.hikari.maximum-pool-size=20</code> ?"},{"owner":{"account_id":29065435,"reputation":11,"user_id":22265152,"display_name":"Parth Atara"},"score":0,"creation_date":1689962854,"post_id":76739966,"comment_id":135292035,"body_markdown":"This didn&#39;t work. Getting the same results. I&#39;m using C3P0 ComboPooledDataSource with  max pool size = 200","body":"This didn&#39;t work. Getting the same results. I&#39;m using C3P0 ComboPooledDataSource with  max pool size = 200"},{"owner":{"account_id":29065435,"reputation":11,"user_id":22265152,"display_name":"Parth Atara"},"score":0,"creation_date":1689964334,"post_id":76739966,"comment_id":135292249,"body_markdown":"It is resolved. I had hikariCP config class which wasn&#39;t being used but had @Primay defined so I guess it was creating its pool instead of C3P0. After commenting it, The logic works as expected. Thank you","body":"It is resolved. I had hikariCP config class which wasn&#39;t being used but had @Primay defined so I guess it was creating its pool instead of C3P0. After commenting it, The logic works as expected. Thank you"}],"owner":{"account_id":29065435,"reputation":11,"user_id":22265152,"display_name":"Parth Atara"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1689963816,"creation_date":1689959816,"question_id":76739966,"body_markdown":"I&#39;m using hibernate in my springboot application. I&#39;m trying to execute one api on multithreading. But at one point when hibernate findBy() method is called only 10 threads are able to move after that line of code at a time while I want all the threads to run parallelly. \r\n\r\nThis is that line of code\r\n\r\n    System.out.println(&quot;Step 0 - &quot; + System.currentTimeMillis());\r\n    Optional&lt;RuleMaster&gt; master = ruleMasterDao.findByRuleId(id);\r\n    System.out.println(&quot;Step 1 - &quot; + System.currentTimeMillis());\r\n\r\nHere when I try to execute multithreading with 20 threads all the requests reach Step - 0 at the same time but only 10 reaches step - 1. Once the whole execution completes and requests start getting final response and finishes execution only then next set of requests reaches step - 1. \r\n\r\nBelow is the console output of above code.\r\n\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805815\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805814\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 0 :1689945805813\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805869\r\n    Step - 1 :1689945805869\r\n    Step - 1 :1689945805868\r\n    Step - 1 :1689945805869\r\n    Step - 1 :1689945805869\r\n    Final Response At : 1689945810355\r\n    Final Response At : 1689945810355\r\n    Step - 1 :1689945810402\r\n    Step - 1 :1689945810402\r\n    Final Response At : 1689945810564\r\n    Step - 1 :1689945810574\r\n    Final Response At : 1689945810675\r\n    Step - 1 :1689945810690\r\n    Final Response At : 1689945810706\r\n    Step - 1 :1689945810722\r\n    Final Response At : 1689945810722\r\n    Final Response At : 1689945810722\r\n    Step - 1 :1689945810731\r\n    Step - 1 :1689945810738\r\n    Final Response At : 1689945810738\r\n    Step - 1 :1689945810754\r\n    Final Response At : 1689945810770\r\n    Step - 1 :1689945810770\r\n    Final Response At : 1689945810793\r\n    Step - 1 :1689945810793\r\n    Final Response At : 1689945814180\r\n    Final Response At : 1689945814243\r\n    Final Response At : 1689945814337\r\n    Final Response At : 1689945814352\r\n    Final Response At : 1689945814449\r\n    Final Response At : 1689945814463\r\n    Final Response At : 1689945814574\r\n    Final Response At : 1689945814668\r\n    Final Response At : 1689945814715\r\n    Final Response At : 1689945814746\r\n\r\nPlease help me with this issue. I want all the threads to reach step - 1 parallelly.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Hibernate not allowing multiple threads execution","body":"<p>I'm using hibernate in my springboot application. I'm trying to execute one api on multithreading. But at one point when hibernate findBy() method is called only 10 threads are able to move after that line of code at a time while I want all the threads to run parallelly.</p>\n<p>This is that line of code</p>\n<pre><code>System.out.println(&quot;Step 0 - &quot; + System.currentTimeMillis());\nOptional&lt;RuleMaster&gt; master = ruleMasterDao.findByRuleId(id);\nSystem.out.println(&quot;Step 1 - &quot; + System.currentTimeMillis());\n</code></pre>\n<p>Here when I try to execute multithreading with 20 threads all the requests reach Step - 0 at the same time but only 10 reaches step - 1. Once the whole execution completes and requests start getting final response and finishes execution only then next set of requests reaches step - 1.</p>\n<p>Below is the console output of above code.</p>\n<pre><code>Step - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805814\nStep - 0 :1689945805814\nStep - 0 :1689945805813\nStep - 0 :1689945805815\nStep - 0 :1689945805814\nStep - 0 :1689945805814\nStep - 0 :1689945805814\nStep - 0 :1689945805814\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 0 :1689945805813\nStep - 1 :1689945805868\nStep - 1 :1689945805868\nStep - 1 :1689945805868\nStep - 1 :1689945805868\nStep - 1 :1689945805868\nStep - 1 :1689945805869\nStep - 1 :1689945805869\nStep - 1 :1689945805868\nStep - 1 :1689945805869\nStep - 1 :1689945805869\nFinal Response At : 1689945810355\nFinal Response At : 1689945810355\nStep - 1 :1689945810402\nStep - 1 :1689945810402\nFinal Response At : 1689945810564\nStep - 1 :1689945810574\nFinal Response At : 1689945810675\nStep - 1 :1689945810690\nFinal Response At : 1689945810706\nStep - 1 :1689945810722\nFinal Response At : 1689945810722\nFinal Response At : 1689945810722\nStep - 1 :1689945810731\nStep - 1 :1689945810738\nFinal Response At : 1689945810738\nStep - 1 :1689945810754\nFinal Response At : 1689945810770\nStep - 1 :1689945810770\nFinal Response At : 1689945810793\nStep - 1 :1689945810793\nFinal Response At : 1689945814180\nFinal Response At : 1689945814243\nFinal Response At : 1689945814337\nFinal Response At : 1689945814352\nFinal Response At : 1689945814449\nFinal Response At : 1689945814463\nFinal Response At : 1689945814574\nFinal Response At : 1689945814668\nFinal Response At : 1689945814715\nFinal Response At : 1689945814746\n</code></pre>\n<p>Please help me with this issue. I want all the threads to reach step - 1 parallelly.</p>\n"},{"tags":["java","firebase","microsoft-oauth"],"owner":{"account_id":29040856,"reputation":1,"user_id":22245739,"display_name":"ChingHeng Tan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689963658,"creation_date":1689963658,"question_id":76740358,"body_markdown":"I am new to using firebase auth with providers so bear with me.\r\n\r\nIn the documentation for FirebaseAuth using microsoft, it says:\r\n\r\n*\r\nAuthenticate with Firebase using the OAuth provider object. Note that unlike other FirebaseAuth operations, this will take control of your UI by popping up a Custom Chrome Tab. As a result, do not reference your Activity in the OnSuccessListener and OnFailureListener that you attach as they will immediately detach when the operation starts the UI.*\r\n\r\nI am not quite sure what it means by &quot;do not reference your Activity&quot;. Does it mean I cannot start an activity in the onSuccess listener? if so what is the proper way for me to redirect the users to another activity?\r\n\r\n\r\n```\r\nfirebaseAuth\r\n        .startActivityForSignInWithProvider(/* activity= */ this, provider.build())\r\n        .addOnSuccessListener(\r\n                new OnSuccessListener&lt;AuthResult&gt;() {\r\n                    @Override\r\n                    public void onSuccess(AuthResult authResult) {\r\n                        // User is signed in.\r\n                        // DO I NOT REDIRECT THE USER HERE?\r\n                        Intent intent= new Intent(AuthActivity.this,MainActivity.class);\r\n                        startActivity(intent);\r\n                        //Is the above a code a No-No?\r\n\r\n                    }\r\n                })\r\n        .addOnFailureListener(\r\n                new OnFailureListener() {\r\n                    @Override\r\n                    public void onFailure(@NonNull Exception e) {\r\n                        // Handle failure.\r\n                    }\r\n                });\r\n```\r\n","title":"Proper way to redirect user to another activity after when using startActivityForSignInWithProvider?","body":"<p>I am new to using firebase auth with providers so bear with me.</p>\n<p>In the documentation for FirebaseAuth using microsoft, it says:</p>\n<p>*\nAuthenticate with Firebase using the OAuth provider object. Note that unlike other FirebaseAuth operations, this will take control of your UI by popping up a Custom Chrome Tab. As a result, do not reference your Activity in the OnSuccessListener and OnFailureListener that you attach as they will immediately detach when the operation starts the UI.*</p>\n<p>I am not quite sure what it means by &quot;do not reference your Activity&quot;. Does it mean I cannot start an activity in the onSuccess listener? if so what is the proper way for me to redirect the users to another activity?</p>\n<pre><code>firebaseAuth\n        .startActivityForSignInWithProvider(/* activity= */ this, provider.build())\n        .addOnSuccessListener(\n                new OnSuccessListener&lt;AuthResult&gt;() {\n                    @Override\n                    public void onSuccess(AuthResult authResult) {\n                        // User is signed in.\n                        // DO I NOT REDIRECT THE USER HERE?\n                        Intent intent= new Intent(AuthActivity.this,MainActivity.class);\n                        startActivity(intent);\n                        //Is the above a code a No-No?\n\n                    }\n                })\n        .addOnFailureListener(\n                new OnFailureListener() {\n                    @Override\n                    public void onFailure(@NonNull Exception e) {\n                        // Handle failure.\n                    }\n                });\n</code></pre>\n"},{"tags":["java","spring-boot","junit","microservices","junit5"],"comments":[{"owner":{"account_id":27597790,"reputation":11,"user_id":21063641,"display_name":"Vinod"},"score":0,"creation_date":1689962141,"post_id":76740183,"comment_id":135291930,"body_markdown":"added annotations as like \n\n@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {RulesApiController.class},\n        loader = AnnotationConfigContextLoader.class)\n@TestPropertySource(locations = {&quot;classpath:properties/test/application-test-normal-flow.properties&quot;})\n@ActiveProfiles(profiles = &quot;test&quot;)\n@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)","body":"added annotations as like   @ExtendWith(SpringExtension.class) @ContextConfiguration(classes = {RulesApiController.class},         loader = AnnotationConfigContextLoader.class) @TestPropertySource(locations = {&quot;classpath:properties/test/application-test-normal-flow.pro&zwnj;&#8203;perties&quot;}) @ActiveProfiles(profiles = &quot;test&quot;) @SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":1,"creation_date":1689962315,"post_id":76740183,"comment_id":135291954,"body_markdown":"Please edit your question and add that information, don&#39;t try to add long pieces of code in a comment, the formatting is terrible.","body":"Please edit your question and add that information, don&#39;t try to add long pieces of code in a comment, the formatting is terrible."},{"owner":{"account_id":15361,"reputation":4976,"user_id":32352,"accept_rate":62,"display_name":"johanneslink"},"score":0,"creation_date":1690007273,"post_id":76740183,"comment_id":135295670,"body_markdown":"Also, add at least the failing test and the controller class that’s supposed to handle it.","body":"Also, add at least the failing test and the controller class that’s supposed to handle it."}],"owner":{"account_id":27597790,"reputation":11,"user_id":21063641,"display_name":"Vinod"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689962064,"creation_date":1689961983,"question_id":76740183,"body_markdown":"`your text`M controller class is like \r\n\r\nmy Test class is something like this:\r\n\r\n\r\n    public class ApiControllerTest {\r\n    \r\n        @Autowired\r\n        private TestRestTemplate testRestTemplate;\r\n\r\ngetting this error msg:\r\n\r\n    org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/pharmacyrules-specialty/pharmacyrules-specialty/v1/pac&quot;: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\r\n\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\r\n\tat org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:361)\r\n\tat org.springframework.boot.test.web.client.TestRestTemplate.getForEntity(TestRestTemplate.java:231)\r\n\tat com.esrx.services.pacRulesEngine.api.RulesApiControllerTest.emptyValueStateCodeBadRequestHttp400Error(RulesApiControllerTest.java:110)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)\r\n\t\r\n    \r\n    \r\ntried changing the top annotations however it did not work.\r\n\r\n\r\nexpecting any leads to get this issue resolved for controller JUnit test cases.\r\n\r\n\r\n\r\n","title":"ResourceAccessException: I/O error on GET request receving in case of controller testcases junit","body":"<p><code>your text</code>M controller class is like</p>\n<p>my Test class is something like this:</p>\n<pre><code>public class ApiControllerTest {\n\n    @Autowired\n    private TestRestTemplate testRestTemplate;\n</code></pre>\n<p>getting this error msg:</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/pharmacyrules-specialty/pharmacyrules-specialty/v1/pac&quot;: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\n\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\nat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\nat org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:361)\nat org.springframework.boot.test.web.client.TestRestTemplate.getForEntity(TestRestTemplate.java:231)\nat com.esrx.services.pacRulesEngine.api.RulesApiControllerTest.emptyValueStateCodeBadRequestHttp400Error(RulesApiControllerTest.java:110)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke(Method.java:498)\nat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\nat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\nat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\nat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\nat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\nat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\nat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\nat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.util.ArrayList.forEach(ArrayList.java:1249)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat java.util.ArrayList.forEach(ArrayList.java:1249)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\nat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\nat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\nat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\nat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\nat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\nat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\nat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\nat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\nat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\nat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\nat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\nat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\n</code></pre>\n<p>Caused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\nat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)</p>\n<p>tried changing the top annotations however it did not work.</p>\n<p>expecting any leads to get this issue resolved for controller JUnit test cases.</p>\n"},{"tags":["java","pdf","pdfbox"],"answers":[{"tags":[],"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689960786,"creation_date":1689960786,"answer_id":76740063,"question_id":76738878,"body_markdown":"call\r\n\r\n    txtLink.setConstantOpacity(ca);\r\n\r\nca is a float value between 0 and 1. 0 is fully transparent (invisible), 1 fully visible (opaque), all between is transparent.","title":"Add PDAnnotationLink to a PDF With pdfbox","body":"<p>call</p>\n<pre><code>txtLink.setConstantOpacity(ca);\n</code></pre>\n<p>ca is a float value between 0 and 1. 0 is fully transparent (invisible), 1 fully visible (opaque), all between is transparent.</p>\n"},{"tags":[],"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689961572,"creation_date":1689961572,"answer_id":76740142,"question_id":76738878,"body_markdown":"Your code actually explicitly draws that _black rectangle_!\r\n\r\nIt requests an underline with a line width of 10:\r\n```\r\nlinkBorder.setStyle (PDBorderStyleDictionary.STYLE_UNDERLINE);\r\nlinkBorder.setWidth (10);\r\ntxtLink.setBorderStyle (linkBorder);\r\n```\r\nAs the underlying text has a font size of also 10, you can expect it to be half covered by that thick underline.\r\n\r\nThus, if you actually don&#39;t want that black rectangle, don&#39;t draw such a thick underline. You may want to try values of 1 or 2 there...","title":"Add PDAnnotationLink to a PDF With pdfbox","body":"<p>Your code actually explicitly draws that <em>black rectangle</em>!</p>\n<p>It requests an underline with a line width of 10:</p>\n<pre><code>linkBorder.setStyle (PDBorderStyleDictionary.STYLE_UNDERLINE);\nlinkBorder.setWidth (10);\ntxtLink.setBorderStyle (linkBorder);\n</code></pre>\n<p>As the underlying text has a font size of also 10, you can expect it to be half covered by that thick underline.</p>\n<p>Thus, if you actually don't want that black rectangle, don't draw such a thick underline. You may want to try values of 1 or 2 there...</p>\n"}],"owner":{"account_id":23207499,"reputation":49,"user_id":17301498,"display_name":"Mario Rovelli"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689961572,"creation_date":1689949706,"question_id":76738878,"body_markdown":"I want to add a PDAnnotationLink with an action to a pdf.\r\n\r\nI write this code\r\n```\r\n            ...\r\n            PDPageContentStream contentStream = new PDPageContentStream (doc, page,true,true);\r\n\t      \r\n\t        final PDAnnotationLink txtLink = new PDAnnotationLink ();\r\n\r\n\t        // border style\r\n\t        final PDBorderStyleDictionary linkBorder = new PDBorderStyleDictionary ();\r\n\t        linkBorder.setStyle (PDBorderStyleDictionary.STYLE_UNDERLINE);\r\n\t        linkBorder.setWidth (10);\r\n\t        txtLink.setBorderStyle (linkBorder);\r\n\t        \r\n\t        // Destination URI\r\n\t        final PDActionURI action = new PDActionURI ();\r\n\t        action.setURI (&quot;https://www.test.com&quot;);\r\n\t        txtLink.setAction (action); \r\n\r\n\t        // Position\r\n\t        final PDRectangle position = new PDRectangle (200,302,100,11);\r\n\t        txtLink.setRectangle (position);\r\n\t        page.getAnnotations ().add (txtLink);\r\n\r\n\t        // Main page content\r\n\t        contentStream.beginText ();\r\n\t        contentStream.newLineAtOffset (102, 302);\r\n\t        contentStream.setFont (PDType1Font.COURIER_BOLD, 10);\r\n\t        contentStream.showText (&quot;This is linked to the outside world&quot;);\r\n\t        contentStream.endText ();\r\n\t        contentStream.close(); \r\n```\r\n\r\nPDAnnotationLink is added with a black rectangle over the text &quot;This is linked to the outside world&quot;. \r\n\r\nHow can i make this rectangle trasparent?\r\n\r\nThanks\r\n","title":"Add PDAnnotationLink to a PDF With pdfbox","body":"<p>I want to add a PDAnnotationLink with an action to a pdf.</p>\n<p>I write this code</p>\n<pre><code>            ...\n            PDPageContentStream contentStream = new PDPageContentStream (doc, page,true,true);\n          \n            final PDAnnotationLink txtLink = new PDAnnotationLink ();\n\n            // border style\n            final PDBorderStyleDictionary linkBorder = new PDBorderStyleDictionary ();\n            linkBorder.setStyle (PDBorderStyleDictionary.STYLE_UNDERLINE);\n            linkBorder.setWidth (10);\n            txtLink.setBorderStyle (linkBorder);\n            \n            // Destination URI\n            final PDActionURI action = new PDActionURI ();\n            action.setURI (&quot;https://www.test.com&quot;);\n            txtLink.setAction (action); \n\n            // Position\n            final PDRectangle position = new PDRectangle (200,302,100,11);\n            txtLink.setRectangle (position);\n            page.getAnnotations ().add (txtLink);\n\n            // Main page content\n            contentStream.beginText ();\n            contentStream.newLineAtOffset (102, 302);\n            contentStream.setFont (PDType1Font.COURIER_BOLD, 10);\n            contentStream.showText (&quot;This is linked to the outside world&quot;);\n            contentStream.endText ();\n            contentStream.close(); \n</code></pre>\n<p>PDAnnotationLink is added with a black rectangle over the text &quot;This is linked to the outside world&quot;.</p>\n<p>How can i make this rectangle trasparent?</p>\n<p>Thanks</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-data-jpa"],"owner":{"account_id":105522,"reputation":43,"user_id":281540,"accept_rate":25,"display_name":"denlab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689961344,"creation_date":1689960787,"question_id":76740064,"body_markdown":"I have a generic jpa `AttributeConverter` that converts a dbValue to the specified `ConvertableDbConstant`:\r\n```\r\n@Converter(autoApply = true) // this would only work on the concrete Converter implementation\r\npublic class GenericDbValueToEnumConverter&lt;E extends ConvertableDbConstant&lt;DbValue&gt;, DbValue&gt; implements AttributeConverter&lt;E, DbValue&gt; {\r\n\r\n\r\n  @Getter\r\n  private Class&lt;E&gt; clazz;\r\n\r\n  @Override\r\n  public DbValue convertToDatabaseColumn(E attribute) {\r\n    return attribute.getDbValue(); \r\n  }\r\n\r\n  @Override\r\n  public E convertToEntityAttribute(DbValue dbData) {\r\n    return Arrays.stream(clazz.getEnumConstants())\r\n                 .filter(v -&gt; v.getDbValue().equals(dbData)).findFirst()\r\n                 .orElse(null));\r\n  }\r\n```\r\nRather than have to create a bunch of empty concrete classes, I was hoping to create the required converters during startup through Springs BeanFactoryPostProcessor; \r\n\r\n```\r\npublic class DbValueEnumConstantsBeanFactory implements BeanFactoryPostProcessor {\r\n  \r\n  @Override\r\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\r\n    final var scanner = new ClassPathScanningCandidateComponentProvider(false);\r\n\r\n    scanner.addIncludeFilter(new AssignableTypeFilter(ConvertableDbConstant.class));\r\n    scanner.findCandidateComponents(&quot;com.org.base.package&quot;)\r\n           .forEach(x -&gt; {\r\n             try {\r\n               final var clazz = Class.forName(x.getBeanClassName());\r\n               final var converter = new GenericDbValueToEnumConverter(clazz);\r\n               beanFactory.registerSingleton(GenericDbValueToEnumConverter.getBeanName(clazz.getName()), converter);\r\n               log.info(&quot;Registering AttributeConverter for {} with name {}&quot;, x.getClass().getSimpleName(), x);\r\n\r\n             } catch (ClassNotFoundException e) {}\r\n           });\r\n  }\r\n}\r\n```\r\n\r\nWhile the Converters are being registered into the applicationContext, they&#39;re being ignored by (whichever) persistence hooks used to add the AttributeConverter(s) to the persistence provider.  How can I achieve this during the `postProcessBeanFactory` invocation?  All of the examples I&#39;ve seen would require the concrete classes I am trying to avoid. \r\n\r\nBy the way, I am using Springboot version &#39;3.1.1&#39;, and spring-boot-starter-data-jpa.","title":"Creating Anonymous AttributeConverter during context initialization","body":"<p>I have a generic jpa <code>AttributeConverter</code> that converts a dbValue to the specified <code>ConvertableDbConstant</code>:</p>\n<pre><code>@Converter(autoApply = true) // this would only work on the concrete Converter implementation\npublic class GenericDbValueToEnumConverter&lt;E extends ConvertableDbConstant&lt;DbValue&gt;, DbValue&gt; implements AttributeConverter&lt;E, DbValue&gt; {\n\n\n  @Getter\n  private Class&lt;E&gt; clazz;\n\n  @Override\n  public DbValue convertToDatabaseColumn(E attribute) {\n    return attribute.getDbValue(); \n  }\n\n  @Override\n  public E convertToEntityAttribute(DbValue dbData) {\n    return Arrays.stream(clazz.getEnumConstants())\n                 .filter(v -&gt; v.getDbValue().equals(dbData)).findFirst()\n                 .orElse(null));\n  }\n</code></pre>\n<p>Rather than have to create a bunch of empty concrete classes, I was hoping to create the required converters during startup through Springs BeanFactoryPostProcessor;</p>\n<pre><code>public class DbValueEnumConstantsBeanFactory implements BeanFactoryPostProcessor {\n  \n  @Override\n  public void postProcessBeanFactory(ConfigurableListableBeanFactory beanFactory) throws BeansException {\n    final var scanner = new ClassPathScanningCandidateComponentProvider(false);\n\n    scanner.addIncludeFilter(new AssignableTypeFilter(ConvertableDbConstant.class));\n    scanner.findCandidateComponents(&quot;com.org.base.package&quot;)\n           .forEach(x -&gt; {\n             try {\n               final var clazz = Class.forName(x.getBeanClassName());\n               final var converter = new GenericDbValueToEnumConverter(clazz);\n               beanFactory.registerSingleton(GenericDbValueToEnumConverter.getBeanName(clazz.getName()), converter);\n               log.info(&quot;Registering AttributeConverter for {} with name {}&quot;, x.getClass().getSimpleName(), x);\n\n             } catch (ClassNotFoundException e) {}\n           });\n  }\n}\n</code></pre>\n<p>While the Converters are being registered into the applicationContext, they're being ignored by (whichever) persistence hooks used to add the AttributeConverter(s) to the persistence provider.  How can I achieve this during the <code>postProcessBeanFactory</code> invocation?  All of the examples I've seen would require the concrete classes I am trying to avoid.</p>\n<p>By the way, I am using Springboot version '3.1.1', and spring-boot-starter-data-jpa.</p>\n"},{"tags":["java","java-bytecode-asm"],"comments":[{"owner":{"account_id":137237,"reputation":13989,"user_id":341291,"accept_rate":76,"display_name":"Axel"},"score":2,"creation_date":1444337069,"post_id":33025409,"comment_id":53873602,"body_markdown":"Well, just write a parser. I think ANTLR has example grammars to get you started.","body":"Well, just write a parser. I think ANTLR has example grammars to get you started."},{"owner":{"account_id":7054036,"reputation":479,"user_id":5406207,"display_name":"triadiktyo"},"score":1,"creation_date":1444337144,"post_id":33025409,"comment_id":53873634,"body_markdown":"Well the first thing that comes to mind is to use a regular expression with the right capture groups. That should give you the right information in each group. But you know what they say... a programmer has a problem and decides to solve it with regular expressions. Now he has two problems! Alternatively you could just code a parser method to return you an object containing the fields you need. Getting the pretty output could be as simple (?) as using the toString to format it as you like... And yes I also like the ANTLR proposal by @Axel","body":"Well the first thing that comes to mind is to use a regular expression with the right capture groups. That should give you the right information in each group. But you know what they say... a programmer has a problem and decides to solve it with regular expressions. Now he has two problems! Alternatively you could just code a parser method to return you an object containing the fields you need. Getting the pretty output could be as simple (?) as using the toString to format it as you like... And yes I also like the ANTLR proposal by @Axel"}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689960127,"creation_date":1444396105,"answer_id":33039128,"question_id":33025409,"body_markdown":"If you implement the [method](http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/ClassVisitor.html#visitMethod(int,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String[]))\r\n\r\n    public MethodVisitor visitMethod(\r\n      int access, String name, String desc, String signature, String[] exceptions)\r\n\r\nyou already have most of the needed information which you can assemble to a human readable declaration. The biggest obstacle is the signature, but thankfully, the ASM library already provides tools helping on this purpose.\r\n\r\nThe following code uses [`SignatureReader`](http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureReader.html) and [`TraceSignatureVisitor`](http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/util/TraceSignatureVisitor.html) to format them. Unfortunately, it requires a bit of post processing as it does not separate type parameters and method parameters and it omits `Object` return types for non-generic methods. Further, it generates an exception list only if there are generic exceptions, so we have to do it manually otherwise.\r\n\r\n```java\r\nstatic String decode(int access, String name, String desc,\r\n                     String signature, String[] exceptions) {\r\n\r\n    if(signature == null) signature = desc;\r\n    StringBuilder sb = new StringBuilder();\r\n    appendModifiers(sb, access);\r\n    TraceSignatureVisitor v = new TraceSignatureVisitor(0);\r\n    new SignatureReader(signature).accept(v);\r\n\r\n    String declaration = v.getDeclaration(), rType = v.getReturnType();\r\n    if(declaration.charAt(0) == &#39;&lt;&#39;)\r\n        sb.append(declaration, 0, declaration.indexOf(&quot;(&quot;)).append(&#39; &#39;);\r\n    else if(rType.isEmpty() || rType.charAt(0) == &#39;[&#39;)\r\n        sb.append(&quot;java.lang.Object&quot;);\r\n    sb.append(rType).append(&#39; &#39;).append(name)\r\n      .append(declaration, declaration.indexOf(&#39;(&#39;), declaration.length());\r\n    if((access &amp; Opcodes.ACC_VARARGS) != 0 &amp;&amp; declaration.endsWith(&quot;[])&quot;))\r\n        sb.replace(sb.length() - 3, sb.length(), &quot;...)&quot;);\r\n    String genericExceptions = v.getExceptions();\r\n    if(genericExceptions != null &amp;&amp; !v.getDeclaration().isEmpty())\r\n        sb.append(&quot; throws &quot;).append(genericExceptions);\r\n    else if(exceptions != null &amp;&amp; exceptions.length &gt; 0) {\r\n        sb.append(&quot; throws &quot;);\r\n        int pos = sb.length();\r\n        for(String e:exceptions) sb.append(e).append(&quot;, &quot;);\r\n        int e = sb.length() - 2;\r\n        sb.setLength(e);\r\n        for(; pos &lt; e; pos++) if(sb.charAt(pos) == &#39;/&#39;) sb.setCharAt(pos, &#39;.&#39;);\r\n    }\r\n    return sb.toString();\r\n}\r\n\r\nprivate static void appendModifiers(StringBuilder buf, int access) {\r\n    for(int bit; access != 0; access -= bit) {\r\n        bit = access &amp; -access;\r\n        buf.append(switch(bit) {\r\n            case Opcodes.ACC_PUBLIC -&gt; &quot;public &quot;;\r\n            case Opcodes.ACC_PRIVATE -&gt; &quot;private &quot;;\r\n            case Opcodes.ACC_PROTECTED -&gt; &quot;protected &quot;;\r\n            case Opcodes.ACC_STATIC -&gt; &quot;static &quot;;\r\n            case Opcodes.ACC_FINAL -&gt; &quot;final &quot;;\r\n            case Opcodes.ACC_ABSTRACT -&gt; &quot;abstract &quot;;\r\n            case Opcodes.ACC_NATIVE -&gt; &quot;native &quot;;\r\n            case Opcodes.ACC_SYNCHRONIZED -&gt; &quot;synchronized &quot;;\r\n            default -&gt; &quot;&quot;;\r\n        });\r\n    }\r\n}\r\n```\r\n&lt;sup&gt;The `appendModifiers` method has been adapted for recent Java versions, for old versions look [here](https://stackoverflow.com/revisions/33039128/1)&lt;/sup&gt;\r\n\r\nIt also decodes the modifiers manually, as you can see at the end, but that’s not such a big deal.\r\n\r\nIf you test it with:\r\n\r\n    String[] exceptions={&quot;java/lang/Exception&quot;};\r\n    System.out.println(decode(9, &quot;testMethod&quot;,\r\n        &quot;(Ljava/lang/Object;)Ljava/lang/Object;&quot;,\r\n        &quot;&lt;T:Ljava/lang/Object;&gt;(TT;)TT;&quot;, exceptions));\r\nit will print:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    public static &lt;T&gt; T testMethod(T) throws java.lang.Exception\r\n\r\n---\r\n\r\nWhen it comes to parsing such a declaration, it gets more complicated. Since you are going to implement an *editor* rather than an assembler, you may think about the alternative of just providing distinct editors components for the different features, e.g. checkboxes and comboboxes for the modifiers, a textfield for the name and a list editor for the parameter types.\r\n\r\nAt this point, I’d recommend studying the [`Type`](http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/Type.html) class. It allows extracting the [parameter types](http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getArgumentTypes(java.lang.String)) and [return type](http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getReturnType(java.lang.String)) from a signature and after applying changes you may [recreate a signature](http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getMethodDescriptor(org.objectweb.asm.Type,%20org.objectweb.asm.Type...)).\r\n\r\nSimilarly, [`SignatureReader`](http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureReader.html) and [`SignatureWriter`](http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureWriter.html) may help dealing with generic signature in a structural way rather than converting them to textual form and reparsing this form back.\r\n","title":"Pretty-print Java method signature and parse back","body":"<p>If you implement the <a href=\"http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/ClassVisitor.html#visitMethod(int,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D)\" rel=\"nofollow noreferrer\">method</a></p>\n<pre><code>public MethodVisitor visitMethod(\n  int access, String name, String desc, String signature, String[] exceptions)\n</code></pre>\n<p>you already have most of the needed information which you can assemble to a human readable declaration. The biggest obstacle is the signature, but thankfully, the ASM library already provides tools helping on this purpose.</p>\n<p>The following code uses <a href=\"http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureReader.html\" rel=\"nofollow noreferrer\"><code>SignatureReader</code></a> and <a href=\"http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/util/TraceSignatureVisitor.html\" rel=\"nofollow noreferrer\"><code>TraceSignatureVisitor</code></a> to format them. Unfortunately, it requires a bit of post processing as it does not separate type parameters and method parameters and it omits <code>Object</code> return types for non-generic methods. Further, it generates an exception list only if there are generic exceptions, so we have to do it manually otherwise.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static String decode(int access, String name, String desc,\n                     String signature, String[] exceptions) {\n\n    if(signature == null) signature = desc;\n    StringBuilder sb = new StringBuilder();\n    appendModifiers(sb, access);\n    TraceSignatureVisitor v = new TraceSignatureVisitor(0);\n    new SignatureReader(signature).accept(v);\n\n    String declaration = v.getDeclaration(), rType = v.getReturnType();\n    if(declaration.charAt(0) == '&lt;')\n        sb.append(declaration, 0, declaration.indexOf(&quot;(&quot;)).append(' ');\n    else if(rType.isEmpty() || rType.charAt(0) == '[')\n        sb.append(&quot;java.lang.Object&quot;);\n    sb.append(rType).append(' ').append(name)\n      .append(declaration, declaration.indexOf('('), declaration.length());\n    if((access &amp; Opcodes.ACC_VARARGS) != 0 &amp;&amp; declaration.endsWith(&quot;[])&quot;))\n        sb.replace(sb.length() - 3, sb.length(), &quot;...)&quot;);\n    String genericExceptions = v.getExceptions();\n    if(genericExceptions != null &amp;&amp; !v.getDeclaration().isEmpty())\n        sb.append(&quot; throws &quot;).append(genericExceptions);\n    else if(exceptions != null &amp;&amp; exceptions.length &gt; 0) {\n        sb.append(&quot; throws &quot;);\n        int pos = sb.length();\n        for(String e:exceptions) sb.append(e).append(&quot;, &quot;);\n        int e = sb.length() - 2;\n        sb.setLength(e);\n        for(; pos &lt; e; pos++) if(sb.charAt(pos) == '/') sb.setCharAt(pos, '.');\n    }\n    return sb.toString();\n}\n\nprivate static void appendModifiers(StringBuilder buf, int access) {\n    for(int bit; access != 0; access -= bit) {\n        bit = access &amp; -access;\n        buf.append(switch(bit) {\n            case Opcodes.ACC_PUBLIC -&gt; &quot;public &quot;;\n            case Opcodes.ACC_PRIVATE -&gt; &quot;private &quot;;\n            case Opcodes.ACC_PROTECTED -&gt; &quot;protected &quot;;\n            case Opcodes.ACC_STATIC -&gt; &quot;static &quot;;\n            case Opcodes.ACC_FINAL -&gt; &quot;final &quot;;\n            case Opcodes.ACC_ABSTRACT -&gt; &quot;abstract &quot;;\n            case Opcodes.ACC_NATIVE -&gt; &quot;native &quot;;\n            case Opcodes.ACC_SYNCHRONIZED -&gt; &quot;synchronized &quot;;\n            default -&gt; &quot;&quot;;\n        });\n    }\n}\n</code></pre>\n<p><sup>The <code>appendModifiers</code> method has been adapted for recent Java versions, for old versions look <a href=\"https://stackoverflow.com/revisions/33039128/1\">here</a></sup></p>\n<p>It also decodes the modifiers manually, as you can see at the end, but that’s not such a big deal.</p>\n<p>If you test it with:</p>\n<pre><code>String[] exceptions={&quot;java/lang/Exception&quot;};\nSystem.out.println(decode(9, &quot;testMethod&quot;,\n    &quot;(Ljava/lang/Object;)Ljava/lang/Object;&quot;,\n    &quot;&lt;T:Ljava/lang/Object;&gt;(TT;)TT;&quot;, exceptions));\n</code></pre>\n<p>it will print:</p>\n<pre class=\"lang-none prettyprint-override\"><code>public static &lt;T&gt; T testMethod(T) throws java.lang.Exception\n</code></pre>\n<hr />\n<p>When it comes to parsing such a declaration, it gets more complicated. Since you are going to implement an <em>editor</em> rather than an assembler, you may think about the alternative of just providing distinct editors components for the different features, e.g. checkboxes and comboboxes for the modifiers, a textfield for the name and a list editor for the parameter types.</p>\n<p>At this point, I’d recommend studying the <a href=\"http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/Type.html\" rel=\"nofollow noreferrer\"><code>Type</code></a> class. It allows extracting the <a href=\"http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getArgumentTypes(java.lang.String)\" rel=\"nofollow noreferrer\">parameter types</a> and <a href=\"http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getReturnType(java.lang.String)\" rel=\"nofollow noreferrer\">return type</a> from a signature and after applying changes you may <a href=\"http://asm.ow2.org/asm50/javadoc/user/org/objectweb/asm/Type.html#getMethodDescriptor(org.objectweb.asm.Type,%20org.objectweb.asm.Type...)\" rel=\"nofollow noreferrer\">recreate a signature</a>.</p>\n<p>Similarly, <a href=\"http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureReader.html\" rel=\"nofollow noreferrer\"><code>SignatureReader</code></a> and <a href=\"http://asm.ow2.org/asm50/javadoc/user/?org/objectweb/asm/signature/SignatureWriter.html\" rel=\"nofollow noreferrer\"><code>SignatureWriter</code></a> may help dealing with generic signature in a structural way rather than converting them to textual form and reparsing this form back.</p>\n"}],"owner":{"account_id":5782371,"reputation":108,"user_id":4562591,"display_name":"BeforeBigBang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2250,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689960127,"creation_date":1444336199,"question_id":33025409,"body_markdown":"I&#39;m making a Java bytecode editor that translates bytecode to some sort of intermediate code that can be changed by user, then parse that code back to bytecode. For now, the method declaration looks terrible and hard to read. But, well, it works.\r\n\r\n    method [public,static] testMethod (Ljava/lang/Object;)Ljava/lang/Object; throws [java/lang/Exception] &lt;T:Ljava/lang/Object;&gt;(TT;)TT; \r\n\r\nAs you can see there is a access flags, method name, method description, generics signature and exception that I get from  \r\n\r\n    org.objectweb.asm.ClassVisitor#visitMethod\r\n\r\nIs there a convenient way to make it looks like in a original source code, and then extract from that pretty string all that information back?\r\nThe method above should be like this:\r\n\r\n    public static &lt;T&gt; T testMethod(T) throws Exception\r\nThank you!","title":"Pretty-print Java method signature and parse back","body":"<p>I'm making a Java bytecode editor that translates bytecode to some sort of intermediate code that can be changed by user, then parse that code back to bytecode. For now, the method declaration looks terrible and hard to read. But, well, it works.</p>\n\n<pre><code>method [public,static] testMethod (Ljava/lang/Object;)Ljava/lang/Object; throws [java/lang/Exception] &lt;T:Ljava/lang/Object;&gt;(TT;)TT; \n</code></pre>\n\n<p>As you can see there is a access flags, method name, method description, generics signature and exception that I get from  </p>\n\n<pre><code>org.objectweb.asm.ClassVisitor#visitMethod\n</code></pre>\n\n<p>Is there a convenient way to make it looks like in a original source code, and then extract from that pretty string all that information back?\nThe method above should be like this:</p>\n\n<pre><code>public static &lt;T&gt; T testMethod(T) throws Exception\n</code></pre>\n\n<p>Thank you!</p>\n"},{"tags":["java","maven","maven-3","maven-embedder"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1491515011,"post_id":43264732,"comment_id":73601069,"body_markdown":"What is the purpose of this?","body":"What is the purpose of this?"},{"owner":{"account_id":993136,"reputation":173,"user_id":1009816,"accept_rate":62,"display_name":"xandout"},"score":0,"creation_date":1491538044,"post_id":43264732,"comment_id":73607420,"body_markdown":"I am running this inside of an in house automation system and want to avoid using a process wrapper.","body":"I am running this inside of an in house automation system and want to avoid using a process wrapper."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1491556725,"post_id":43264732,"comment_id":73616571,"body_markdown":"What is the problem? Why not simply calling maven as usual from command line which works ...The question is what kind of problem are you trying to solve?","body":"What is the problem? Why not simply calling maven as usual from command line which works ...The question is what kind of problem are you trying to solve?"},{"owner":{"account_id":993136,"reputation":173,"user_id":1009816,"accept_rate":62,"display_name":"xandout"},"score":1,"creation_date":1491565138,"post_id":43264732,"comment_id":73622130,"body_markdown":"Because the environments this will run in do not have a maven installation. If I can get this to work then it solves a lot of issues with distribution.","body":"Because the environments this will run in do not have a maven installation. If I can get this to work then it solves a lot of issues with distribution."},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1613225442,"post_id":43264732,"comment_id":117012957,"body_markdown":"did you get it to work?","body":"did you get it to work?"}],"answers":[{"tags":[],"owner":{"account_id":1428765,"reputation":61,"user_id":1351660,"display_name":"Gonzalo G&#243;mez Garc&#237;a"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1567777656,"creation_date":1501754233,"answer_id":45480847,"question_id":43264732,"body_markdown":"I&#39;ve just hit the same problem as you. I hope it&#39;s not too late for a solution.\r\n\r\nThe problem you got is related to use maven-embedder inside a shade/fatjat/jarwithdependencies\r\n\r\nWhen you create the jar-with-dependencies, some resources may be defined in many jars but only one is packed inside the jar (the last one processed). Here is where the problem lays with the ```META-INF/plexus/components.xml``` and ```META-INF/sisu/javax.inject.Named``` files required by Maven and Plexus\r\n\r\nThe fix this problem you should:\r\n\r\n - Exclude all this files when building the jar-with-dependencies\r\n - Create this files in your project as the concatenations of the files contained in you dependencies. \r\n\r\nIn my case, I use maven-shade-plugin to build the jar-with-dependecies. So to exclude the files from the dependency jars is done this way:\r\n\r\n    \t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;shade&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;transformers&gt;\r\n\t\t\t\t\t\t\t\t&lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;manifestEntries&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Main-Class&gt;io.vertx.core.Starter&lt;/Main-Class&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;Main-Verticle&gt;main.Main&lt;/Main-Verticle&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/manifestEntries&gt;\r\n\t\t\t\t\t\t\t\t&lt;/transformer&gt;\r\n\t\t\t\t\t\t\t&lt;/transformers&gt;\r\n\t\t\t\t\t\t\t&lt;filters&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;*:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;org.sonatype.plexus:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/plexus/components.xml&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;org.apache.maven:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/plexus/components.xml&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;org.eclipse.aether:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t\t&lt;filter&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;io.vertx:*&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t\t&lt;/filter&gt;\r\n\t\t\t\t\t\t\t&lt;/filters&gt;\r\n\t\t\t\t\t\t\t&lt;artifactSet&gt;\r\n\t\t\t\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.eclipse.xpand:*&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.mod4j.org.eclipse.xtend.util:*&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;com.ibm.icu:*&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;org.mod4j.*:*&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;exclude&gt;*:*:tests&lt;/exclude&gt;\r\n\t\t\t\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t\t\t\t&lt;/artifactSet&gt;\r\n\t\t\t              \t\t\t&lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n\t\t\t              \t\t\t&lt;shadedClassifierName&gt;fat&lt;/shadedClassifierName&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\nThis way only the ```META-INF/plexus/components.xml``` and ```META-INF/sisu/javax.inject.Named``` created in your project are included in the fatjar\r\n","title":"Maven Embedded 3.3.9 - Is it possible?","body":"<p>I've just hit the same problem as you. I hope it's not too late for a solution.</p>\n\n<p>The problem you got is related to use maven-embedder inside a shade/fatjat/jarwithdependencies</p>\n\n<p>When you create the jar-with-dependencies, some resources may be defined in many jars but only one is packed inside the jar (the last one processed). Here is where the problem lays with the <code>META-INF/plexus/components.xml</code> and <code>META-INF/sisu/javax.inject.Named</code> files required by Maven and Plexus</p>\n\n<p>The fix this problem you should:</p>\n\n<ul>\n<li>Exclude all this files when building the jar-with-dependencies</li>\n<li>Create this files in your project as the concatenations of the files contained in you dependencies. </li>\n</ul>\n\n<p>In my case, I use maven-shade-plugin to build the jar-with-dependecies. So to exclude the files from the dependency jars is done this way:</p>\n\n<pre><code>            &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;shade&lt;/goal&gt;\n                    &lt;/goals&gt;\n                    &lt;configuration&gt;\n                        &lt;transformers&gt;\n                            &lt;transformer implementation=\"org.apache.maven.plugins.shade.resource.ManifestResourceTransformer\"&gt;\n                                &lt;manifestEntries&gt;\n                                    &lt;Main-Class&gt;io.vertx.core.Starter&lt;/Main-Class&gt;\n                                    &lt;Main-Verticle&gt;main.Main&lt;/Main-Verticle&gt;\n                                &lt;/manifestEntries&gt;\n                            &lt;/transformer&gt;\n                        &lt;/transformers&gt;\n                        &lt;filters&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;*:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/*.SF&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.DSA&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/*.RSA&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;org.sonatype.plexus:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/plexus/components.xml&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;org.apache.maven:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/plexus/components.xml&lt;/exclude&gt;\n                                    &lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;org.eclipse.aether:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                            &lt;filter&gt;\n                                &lt;artifact&gt;io.vertx:*&lt;/artifact&gt;\n                                &lt;excludes&gt;\n                                    &lt;exclude&gt;META-INF/sisu/javax.inject.Named&lt;/exclude&gt;\n                                &lt;/excludes&gt;\n                            &lt;/filter&gt;\n                        &lt;/filters&gt;\n                        &lt;artifactSet&gt;\n                            &lt;excludes&gt;\n                                &lt;exclude&gt;org.eclipse.xpand:*&lt;/exclude&gt;\n                                &lt;exclude&gt;org.mod4j.org.eclipse.xtend.util:*&lt;/exclude&gt;\n                                &lt;exclude&gt;com.ibm.icu:*&lt;/exclude&gt;\n                                &lt;exclude&gt;org.mod4j.*:*&lt;/exclude&gt;\n                                &lt;exclude&gt;*:*:tests&lt;/exclude&gt;\n                            &lt;/excludes&gt;\n                        &lt;/artifactSet&gt;\n                                &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n                                &lt;shadedClassifierName&gt;fat&lt;/shadedClassifierName&gt;\n                    &lt;/configuration&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n</code></pre>\n\n<p>This way only the <code>META-INF/plexus/components.xml</code> and <code>META-INF/sisu/javax.inject.Named</code> created in your project are included in the fatjar</p>\n"},{"tags":[],"owner":{"account_id":17207292,"reputation":1,"user_id":12457562,"display_name":"Ian Page"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689958964,"creation_date":1689958938,"answer_id":76739882,"question_id":43264732,"body_markdown":"I had the same issue.  However I was using Spring Boot, so was able to use the repackage goal of the spring-boot-maven-plugin to build my fat jar, rather than the maven-assembly-plugin or the maven-shade-plugin.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n&lt;!-- language: xml --&gt;\r\n\r\n      &lt;build&gt;\r\n        &lt;plugins&gt;\r\n          &lt;plugin&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;configuration&gt;    \r\n              &lt;mainClass&gt;com.acme.test.Application&lt;/mainClass&gt;\r\n            &lt;/configuration&gt;\r\n            &lt;executions&gt;\r\n              &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                  &lt;goal&gt;repackage&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n              &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n          &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n      &lt;/build&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Maven Embedded 3.3.9 - Is it possible?","body":"<p>I had the same issue.  However I was using Spring Boot, so was able to use the repackage goal of the spring-boot-maven-plugin to build my fat jar, rather than the maven-assembly-plugin or the maven-shade-plugin.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;    \n          &lt;mainClass&gt;com.acme.test.Application&lt;/mainClass&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n          &lt;execution&gt;\n            &lt;goals&gt;\n              &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n          &lt;/execution&gt;\n        &lt;/executions&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n</code></pre>\n"}],"owner":{"account_id":993136,"reputation":173,"user_id":1009816,"accept_rate":62,"display_name":"xandout"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1570,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689958964,"creation_date":1491508760,"question_id":43264732,"body_markdown":"So I am trying to embed maven in my code rather than use a shell wrapper however I am having issues getting it to actually work.\r\n\r\n[Source Code](https://github.com/tc-turner/maven-embedder-otg/tree/339)\r\n\r\nThe `master` branch works however it is an older version of maven (3.1.1) and I would like to use a more recent version.\r\n\r\nThe `339` branch has every dependency that I can pin down for that version defined in pom.xml.\r\n\r\nHowever no amount of playing with the dependencies will help avoid the following error.\r\n\r\n    java -jar maven-embedder-example-1-jar-with-dependencies.jar package\r\n    [main] WARN Sisu - Error injecting: org.apache.maven.project.DefaultProjectBuildingHelper\r\n    com.google.inject.ProvisionException: Unable to provision, see the following errors:\r\n    \r\n    1) No implementation for org.apache.maven.classrealm.ClassRealmManager was bound.\r\n      while locating org.apache.maven.project.DefaultProjectBuildingHelper\r\n    \r\n    1 error\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1025)\r\n        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\r\n        at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\r\n        at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\r\n        at org.eclipse.sisu.plexus.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:250)\r\n        at org.eclipse.sisu.plexus.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:48)\r\n        at org.eclipse.sisu.bean.BeanInjector.injectMembers(BeanInjector.java:52)\r\n        at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:140)\r\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\r\n        at com.google.inject.internal.ConstructorInjector.access$000(ConstructorInjector.java:32)\r\n        at com.google.inject.internal.ConstructorInjector$1.call(ConstructorInjector.java:89)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:87)\r\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\r\n        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\r\n        at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\r\n        at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\r\n        at org.eclipse.sisu.plexus.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:250)\r\n        at org.eclipse.sisu.plexus.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:48)\r\n        at org.eclipse.sisu.bean.BeanInjector.injectMembers(BeanInjector.java:52)\r\n        at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:140)\r\n        at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\r\n        at com.google.inject.internal.ConstructorInjector.access$000(ConstructorInjector.java:32)\r\n        at com.google.inject.internal.ConstructorInjector$1.call(ConstructorInjector.java:89)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:87)\r\n        at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\r\n        at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\r\n        at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\r\n        at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\r\n        at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\r\n        at org.eclipse.sisu.bean.BeanScheduler$Activator.onProvision(BeanScheduler.java:176)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:126)\r\n        at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\r\n        at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\r\n        at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\r\n        at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\r\n        at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\r\n        at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\r\n        at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\r\n        at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)\r\n        at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\r\n        at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\r\n        at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:263)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:255)\r\n        at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:249)\r\n        at org.apache.maven.cli.MavenCli.container(MavenCli.java:585)\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:281)\r\n        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:243)\r\n        at tc_turner.maven_embedder_example.Main.main(Main.java:10)\r\n    [main] WARN Sisu - Error injecting: org.apache.maven.project.DefaultProjectBuilder\r\n    com.google.inject.ProvisionException: Unable to provision, see the following errors: ....... More of the same\r\n\r\n\r\n\r\nI have gone through every SO question I can find and read lots of mailing lists but it seems like very few people want to do this or I am just failing.\r\n\r\nDo you fine folks have any idea?","title":"Maven Embedded 3.3.9 - Is it possible?","body":"<p>So I am trying to embed maven in my code rather than use a shell wrapper however I am having issues getting it to actually work.</p>\n\n<p><a href=\"https://github.com/tc-turner/maven-embedder-otg/tree/339\" rel=\"nofollow noreferrer\">Source Code</a></p>\n\n<p>The <code>master</code> branch works however it is an older version of maven (3.1.1) and I would like to use a more recent version.</p>\n\n<p>The <code>339</code> branch has every dependency that I can pin down for that version defined in pom.xml.</p>\n\n<p>However no amount of playing with the dependencies will help avoid the following error.</p>\n\n<pre><code>java -jar maven-embedder-example-1-jar-with-dependencies.jar package\n[main] WARN Sisu - Error injecting: org.apache.maven.project.DefaultProjectBuildingHelper\ncom.google.inject.ProvisionException: Unable to provision, see the following errors:\n\n1) No implementation for org.apache.maven.classrealm.ClassRealmManager was bound.\n  while locating org.apache.maven.project.DefaultProjectBuildingHelper\n\n1 error\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1025)\n    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\n    at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\n    at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\n    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\n    at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\n    at org.eclipse.sisu.plexus.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:250)\n    at org.eclipse.sisu.plexus.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:48)\n    at org.eclipse.sisu.bean.BeanInjector.injectMembers(BeanInjector.java:52)\n    at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:140)\n    at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\n    at com.google.inject.internal.ConstructorInjector.access$000(ConstructorInjector.java:32)\n    at com.google.inject.internal.ConstructorInjector$1.call(ConstructorInjector.java:89)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:87)\n    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)\n    at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\n    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\n    at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\n    at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\n    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\n    at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\n    at org.eclipse.sisu.plexus.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:250)\n    at org.eclipse.sisu.plexus.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:48)\n    at org.eclipse.sisu.bean.BeanInjector.injectMembers(BeanInjector.java:52)\n    at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:140)\n    at com.google.inject.internal.ConstructorInjector.provision(ConstructorInjector.java:114)\n    at com.google.inject.internal.ConstructorInjector.access$000(ConstructorInjector.java:32)\n    at com.google.inject.internal.ConstructorInjector$1.call(ConstructorInjector.java:89)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:133)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:87)\n    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:267)\n    at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\n    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:1051)\n    at org.eclipse.sisu.space.AbstractDeferredClass.get(AbstractDeferredClass.java:48)\n    at com.google.inject.internal.ProviderInternalFactory.provision(ProviderInternalFactory.java:81)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.provision(InternalFactoryToInitializableAdapter.java:53)\n    at com.google.inject.internal.ProviderInternalFactory$1.call(ProviderInternalFactory.java:65)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:115)\n    at org.eclipse.sisu.bean.BeanScheduler$Activator.onProvision(BeanScheduler.java:176)\n    at com.google.inject.internal.ProvisionListenerStackCallback$Provision.provision(ProvisionListenerStackCallback.java:126)\n    at com.google.inject.internal.ProvisionListenerStackCallback.provision(ProvisionListenerStackCallback.java:68)\n    at com.google.inject.internal.ProviderInternalFactory.circularGet(ProviderInternalFactory.java:63)\n    at com.google.inject.internal.InternalFactoryToInitializableAdapter.get(InternalFactoryToInitializableAdapter.java:45)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter$1.call(ProviderToInternalFactoryAdapter.java:46)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1103)\n    at com.google.inject.internal.ProviderToInternalFactoryAdapter.get(ProviderToInternalFactoryAdapter.java:40)\n    at com.google.inject.internal.SingletonScope$1.get(SingletonScope.java:145)\n    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:41)\n    at com.google.inject.internal.InjectorImpl$2$1.call(InjectorImpl.java:1016)\n    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1092)\n    at com.google.inject.internal.InjectorImpl$2.get(InjectorImpl.java:1012)\n    at org.eclipse.sisu.inject.LazyBeanEntry.getValue(LazyBeanEntry.java:81)\n    at org.eclipse.sisu.plexus.LazyPlexusBean.getValue(LazyPlexusBean.java:51)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:263)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:255)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:249)\n    at org.apache.maven.cli.MavenCli.container(MavenCli.java:585)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:281)\n    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:243)\n    at tc_turner.maven_embedder_example.Main.main(Main.java:10)\n[main] WARN Sisu - Error injecting: org.apache.maven.project.DefaultProjectBuilder\ncom.google.inject.ProvisionException: Unable to provision, see the following errors: ....... More of the same\n</code></pre>\n\n<p>I have gone through every SO question I can find and read lots of mailing lists but it seems like very few people want to do this or I am just failing.</p>\n\n<p>Do you fine folks have any idea?</p>\n"},{"tags":["java","python","jython"],"comments":[{"owner":{"account_id":220789,"reputation":114430,"user_id":478399,"accept_rate":83,"display_name":"AlexR"},"score":4,"creation_date":1326820546,"post_id":8898765,"comment_id":11128734,"body_markdown":"Please take a look on similar question and read the answer. http://bytes.com/topic/python/answers/22390-executing-jython-function-java","body":"Please take a look on similar question and read the answer. <a href=\"http://bytes.com/topic/python/answers/22390-executing-jython-function-java\" rel=\"nofollow noreferrer\">bytes.com/topic/python/answers/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":7,"creation_date":1326820772,"post_id":8898882,"comment_id":11128537,"body_markdown":"Any language that itself can be called from c that is. Well ok python can, but Jython is a much simpler solution there really (or using the PyInterpreter in j6+). It&#39;s not that trivial to write the code to call python functions from c.","body":"Any language that itself can be called from c that is. Well ok python can, but Jython is a much simpler solution there really (or using the PyInterpreter in j6+). It&#39;s not that trivial to write the code to call python functions from c."}],"tags":[],"owner":{"account_id":255877,"reputation":6710,"user_id":536205,"accept_rate":83,"display_name":"nidhin"},"comment_count":1,"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1326820669,"creation_date":1326820669,"answer_id":8898882,"question_id":8898765,"body_markdown":"You can call any language from java using [Java Native Interface][1]\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Java_Native_Interface","title":"Calling Python in Java?","body":"<p>You can call any language from java using <a href=\"http://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"nofollow noreferrer\">Java Native Interface</a></p>\n"},{"comments":[{"owner":{"account_id":447451,"reputation":1987,"user_id":841072,"accept_rate":65,"display_name":"Shahab"},"score":0,"creation_date":1326827514,"post_id":8899042,"comment_id":11130708,"body_markdown":"I&#39;ve installed JYthon, or i assume i did, and I keep trying to run the code that you outlined but it highlighted as a mistake. Does the installion of Jython need to go to a specific folder, either in the python or java folders?","body":"I&#39;ve installed JYthon, or i assume i did, and I keep trying to run the code that you outlined but it highlighted as a mistake. Does the installion of Jython need to go to a specific folder, either in the python or java folders?"},{"owner":{"account_id":447451,"reputation":1987,"user_id":841072,"accept_rate":65,"display_name":"Shahab"},"score":2,"creation_date":1326830996,"post_id":8899042,"comment_id":11131754,"body_markdown":"There aren&#39;t any error, i&#39;m just having a hard time integrating Jython into Netbeans","body":"There aren&#39;t any error, i&#39;m just having a hard time integrating Jython into Netbeans"},{"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"score":0,"creation_date":1326832087,"post_id":8899042,"comment_id":11132100,"body_markdown":"If there&#39;s no error it would work, so that&#39;s obviously not the case ;) &quot;Error&quot; does not mean runtime error, could be a compile error as well.","body":"If there&#39;s no error it would work, so that&#39;s obviously not the case ;) &quot;Error&quot; does not mean runtime error, could be a compile error as well."},{"owner":{"account_id":447451,"reputation":1987,"user_id":841072,"accept_rate":65,"display_name":"Shahab"},"score":0,"creation_date":1326832443,"post_id":8899042,"comment_id":11132212,"body_markdown":"My bad, it was a poor use of the word. I was trying to add the jython.jar to my project and netbeans. I figured it out though","body":"My bad, it was a poor use of the word. I was trying to add the jython.jar to my project and netbeans. I figured it out though"},{"owner":{"account_id":2373149,"reputation":2559,"user_id":2213958,"accept_rate":88,"display_name":"Lion.k"},"score":0,"creation_date":1392306849,"post_id":8899042,"comment_id":32913554,"body_markdown":"@Voo I imported jython.jar as a external library. but I got an error: Could not find class &#39;org.python.util.PythonInterpreter&#39;","body":"@Voo I imported jython.jar as a external library. but I got an error: Could not find class &#39;org.python.util.PythonInterpreter&#39;"},{"owner":{"account_id":1507320,"reputation":516,"user_id":1410402,"accept_rate":64,"display_name":"Peter Raeves"},"score":0,"creation_date":1406824746,"post_id":8899042,"comment_id":38991772,"body_markdown":"@Voo I installed jpython on Ub14.04 and after adding a bunch of required jar files, I stranded at `java.lang.IncompatibleClassChangeError: Implementing class`. My Main is doing `PythonInterpreter i = new PythonInterpreter(); i.exec(&quot;print \\&quot;hello world\\&quot;&quot;);` Any idea what might be wrong?","body":"@Voo I installed jpython on Ub14.04 and after adding a bunch of required jar files, I stranded at <code>java.lang.IncompatibleClassChangeError: Implementing class</code>. My Main is doing <code>PythonInterpreter i = new PythonInterpreter(); i.exec(&quot;print \\&quot;hello world\\&quot;&quot;);</code> Any idea what might be wrong?"},{"owner":{"account_id":1507320,"reputation":516,"user_id":1410402,"accept_rate":64,"display_name":"Peter Raeves"},"score":0,"creation_date":1406825672,"post_id":8899042,"comment_id":38992281,"body_markdown":"@Voo Nvm, I found the error. Looks like I needed to add asm3 instead of asm4","body":"@Voo Nvm, I found the error. Looks like I needed to add asm3 instead of asm4"},{"owner":{"account_id":335071,"reputation":1189,"user_id":661935,"accept_rate":76,"display_name":"nn0p"},"score":0,"creation_date":1425359345,"post_id":8899042,"comment_id":45919940,"body_markdown":"Is the Python interpreter used by `org.python.util.PythonInterpreter` Jython or CPython?","body":"Is the Python interpreter used by <code>org.python.util.PythonInterpreter</code> Jython or CPython?"},{"owner":{"account_id":161158,"reputation":4007,"user_id":381712,"accept_rate":53,"display_name":"soulmachine"},"score":0,"creation_date":1430981056,"post_id":8899042,"comment_id":48299719,"body_markdown":"This works! But I have another question,   `PyObject obj = interpreter.compile(&quot;...&quot;);  // a piece of code that contains two functions, myFunc1 and myFunc2,  how to call a specified functioin, for example myFunc1`","body":"This works! But I have another question,   <code>PyObject obj = interpreter.compile(&quot;...&quot;);  &#47;&#47; a piece of code that contains two functions, myFunc1 and myFunc2,  how to call a specified functioin, for example myFunc1</code>"},{"owner":{"account_id":96769,"reputation":8248,"user_id":262852,"accept_rate":65,"display_name":"Thufir"},"score":0,"creation_date":1484501708,"post_id":8899042,"comment_id":70526466,"body_markdown":"further info in regards to invoking an actual Python API through PythonInterpreter would be appreciated.","body":"further info in regards to invoking an actual Python API through PythonInterpreter would be appreciated."},{"owner":{"account_id":2979311,"reputation":592,"user_id":2529666,"accept_rate":40,"display_name":"Flummiboy"},"score":4,"creation_date":1571737609,"post_id":8899042,"comment_id":103331644,"body_markdown":"Python 2 end of Life is 1.1.2020 and Jython only supports Python 2.7. so no Jython is basically dead. Best (simplest) Option is the Jep lib","body":"Python 2 end of Life is 1.1.2020 and Jython only supports Python 2.7. so no Jython is basically dead. Best (simplest) Option is the Jep lib"},{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":2,"creation_date":1616455968,"post_id":8899042,"comment_id":118003488,"body_markdown":"_jython_ is long long dormant [/dead]. That&#39;s too bad.","body":"<i>jython</i> is long long dormant [/dead]. That&#39;s too bad."}],"tags":[],"owner":{"account_id":48693,"reputation":29189,"user_id":144746,"accept_rate":93,"display_name":"Voo"},"comment_count":12,"down_vote_count":2,"up_vote_count":114,"is_accepted":true,"score":112,"last_activity_date":1623240702,"creation_date":1326821481,"answer_id":8899042,"question_id":8898765,"body_markdown":"Jython: Python for the Java Platform - http://www.jython.org/index.html\r\n\r\nYou can easily call python functions from Java code with Jython. That is as long as your python code itself runs under jython, i.e. doesn&#39;t use some c-extensions that aren&#39;t supported.\r\n\r\nIf that works for you, it&#39;s certainly the simplest solution you can get. Otherwise you can use `org.python.util.PythonInterpreter` from the new Java6 interpreter support.\r\n\r\nA simple example from the top of my head - but should work I hope: (no error checking done for brevity)\r\n\r\n    PythonInterpreter interpreter = new PythonInterpreter();\r\n    interpreter.exec(&quot;import sys\\nsys.path.append(&#39;pathToModules if they are not there by default&#39;)\\nimport yourModule&quot;);\r\n    // execute a function that takes a string and returns a string\r\n    PyObject someFunc = interpreter.get(&quot;funcName&quot;);\r\n    PyObject result = someFunc.__call__(new PyString(&quot;Test!&quot;));\r\n    String realResult = (String) result.__tojava__(String.class);\r\n\r\nAs of 2021, Jython does not support Python 3.x","title":"Calling Python in Java?","body":"<p>Jython: Python for the Java Platform - <a href=\"http://www.jython.org/index.html\" rel=\"noreferrer\">http://www.jython.org/index.html</a></p>\n<p>You can easily call python functions from Java code with Jython. That is as long as your python code itself runs under jython, i.e. doesn't use some c-extensions that aren't supported.</p>\n<p>If that works for you, it's certainly the simplest solution you can get. Otherwise you can use <code>org.python.util.PythonInterpreter</code> from the new Java6 interpreter support.</p>\n<p>A simple example from the top of my head - but should work I hope: (no error checking done for brevity)</p>\n<pre><code>PythonInterpreter interpreter = new PythonInterpreter();\ninterpreter.exec(&quot;import sys\\nsys.path.append('pathToModules if they are not there by default')\\nimport yourModule&quot;);\n// execute a function that takes a string and returns a string\nPyObject someFunc = interpreter.get(&quot;funcName&quot;);\nPyObject result = someFunc.__call__(new PyString(&quot;Test!&quot;));\nString realResult = (String) result.__tojava__(String.class);\n</code></pre>\n<p>As of 2021, Jython does not support Python 3.x</p>\n"},{"tags":[],"owner":{"account_id":4581,"reputation":86514,"user_id":6946,"accept_rate":89,"display_name":"Anurag Uniyal"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1326821708,"creation_date":1326821708,"answer_id":8899086,"question_id":8898765,"body_markdown":"It depends on what do you mean by python functions? if they were written in [cpython][1] you can not directly call them you will have to use [JNI][2], but if they were written in [Jython][3] you can easily call them from java, as jython ultimately generates java byte code.\r\n\r\nNow when I say written in cpython or jython it doesn&#39;t make much sense because python is python and most code will run on both implementations unless you are using specific libraries which relies on cpython or java.\r\n\r\nsee here [how to use Python interpreter in Java.][4]\r\n\r\n\r\n  [1]: http://python.org/\r\n  [2]: http://en.wikipedia.org/wiki/Java_Native_Interface\r\n  [3]: http://www.jython.org/\r\n  [4]: http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html#utilizing-pythoninterpreter","title":"Calling Python in Java?","body":"<p>It depends on what do you mean by python functions? if they were written in <a href=\"http://python.org/\" rel=\"noreferrer\">cpython</a> you can not directly call them you will have to use <a href=\"http://en.wikipedia.org/wiki/Java_Native_Interface\" rel=\"noreferrer\">JNI</a>, but if they were written in <a href=\"http://www.jython.org/\" rel=\"noreferrer\">Jython</a> you can easily call them from java, as jython ultimately generates java byte code.</p>\n\n<p>Now when I say written in cpython or jython it doesn't make much sense because python is python and most code will run on both implementations unless you are using specific libraries which relies on cpython or java.</p>\n\n<p>see here <a href=\"http://www.jython.org/jythonbook/en/1.0/JythonAndJavaIntegration.html#utilizing-pythoninterpreter\" rel=\"noreferrer\">how to use Python interpreter in Java.</a></p>\n"},{"comments":[{"owner":{"account_id":1053202,"reputation":59956,"user_id":1056563,"accept_rate":90,"display_name":"WestCoastProjects"},"score":0,"creation_date":1616456053,"post_id":13743612,"comment_id":118003505,"body_markdown":"I used that for a project 15 years ago and it was murderously complicated.  At least use JSON..","body":"I used that for a project 15 years ago and it was murderously complicated.  At least use JSON.."}],"tags":[],"owner":{"account_id":309464,"reputation":5258,"user_id":621917,"accept_rate":88,"display_name":"Timo"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1354796744,"creation_date":1354796744,"answer_id":13743612,"question_id":8898765,"body_markdown":"Depending on your requirements, options like [XML-RPC][1] could be useful, which can be used to remotely call functions virtually in any language supporting the protocol.\r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/XML-RPC","title":"Calling Python in Java?","body":"<p>Depending on your requirements, options like <a href=\"http://en.wikipedia.org/wiki/XML-RPC\" rel=\"noreferrer\">XML-RPC</a> could be useful, which can be used to remotely call functions virtually in any language supporting the protocol.</p>\n"},{"comments":[{"owner":{"account_id":26053,"reputation":1832,"user_id":67492,"accept_rate":62,"display_name":"subes"},"score":2,"creation_date":1497003237,"post_id":26759569,"comment_id":75906524,"body_markdown":"Here a library that lets you write your python scripts once and decide which integration method (Jython, CPython via Jep and Py4j) to use at runtime: https://github.com/subes/invesdwin-context-python Since each method has its own benefits/drawbacks","body":"Here a library that lets you write your python scripts once and decide which integration method (Jython, CPython via Jep and Py4j) to use at runtime: <a href=\"https://github.com/subes/invesdwin-context-python\" rel=\"nofollow noreferrer\">github.com/subes/invesdwin-context-python</a> Since each method has its own benefits/drawbacks"},{"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"score":0,"creation_date":1497005532,"post_id":26759569,"comment_id":75908033,"body_markdown":"@subes that project looks awesome I wrote this a while ago. I encourage you to write an answer I would upvote it. I dislike the top answer haha because I don&#39;t think it provides much useful information outside of a google search.","body":"@subes that project looks awesome I wrote this a while ago. I encourage you to write an answer I would upvote it. I dislike the top answer haha because I don&#39;t think it provides much useful information outside of a google search."},{"owner":{"account_id":26053,"reputation":1832,"user_id":67492,"accept_rate":62,"display_name":"subes"},"score":0,"creation_date":1497094750,"post_id":26759569,"comment_id":75941261,"body_markdown":"I created a separate answer","body":"I created a separate answer"},{"owner":{"account_id":1575209,"reputation":10468,"user_id":1461862,"accept_rate":67,"display_name":"Mauricio Gracia Gutierrez"},"score":3,"creation_date":1531054855,"post_id":26759569,"comment_id":89443558,"body_markdown":"does this answer smell to &quot;this should be the accepted answer&quot; or is it just me ? ;-)","body":"does this answer smell to &quot;this should be the accepted answer&quot; or is it just me ? ;-)"}],"tags":[],"owner":{"account_id":5019425,"reputation":7741,"user_id":4033292,"accept_rate":81,"display_name":"Derrops"},"comment_count":4,"down_vote_count":0,"up_vote_count":73,"is_accepted":false,"score":73,"last_activity_date":1689958229,"creation_date":1415197562,"answer_id":26759569,"question_id":8898765,"body_markdown":"I think there are some important things to consider first with how strong you wish to have the linking between Java and Python.\r\n\r\n**Firstly**  Do you only want to call functions or do you actually want Python code to change the data in your java objects? This is very important. If you only want to call some Python code with or without arguments, then that is not very difficult. If your arguments are primitives it makes it even more easy. However, if you want to have Java class implement member functions in Python, which change the data of the Java object, then this is not so easy or straight forward.\r\n\r\n**Secondly** are we talking CPython, or will Jython do? I would say CPython is where its at! I would advocate this is why Python is so kool! Having such high abstractions however access to C or C++ when needed. Imagine if you could have that in Java. This question is not even worth asking if Jython is ok because then it is easy anyway.\r\n\r\nSo I have played with the following methods, and listed them from easy to difficult:\r\n\r\n\r\n\r\n\r\n**Java to Jython**\r\n\r\n*Advantages:* Trivially easy. Have actual references to Java objects\r\n\r\n*Disadvantages:* No CPython, Extremely Slow!\r\n\r\nJython from Java is so easy, and if this is really enough then great. However it is very slow and no CPython! Is life worth living without CPython? I don&#39;t think so! You can easily have Python code implementing your member functions for you Java objects.\r\n\r\n**Java to Jython to CPython via Pyro**\r\n\r\n\r\nPyro is the remote object module for Python. You have some object on a CPython interpreter, and you can send it objects which are transferred via serialization and it can also return objects via this method. Note that if you send a serialized Python object from Jython and then call some functions which change the data in its members, then you will not see those changes in Java. You just need to remember to send back the data which you want from Pyro. This, I believe, is the easiest way to get to CPython! You do not need any JNI or JNA or SWIG or .... You don&#39;t need to know any C, or C++. Kool huh?\r\n\r\n*Advantages:*\r\n\r\n - Access to CPython\r\n - Not as difficult as following methods\r\n\r\n*Disadvantages:*\r\n - Cannot change the member data of Java objects directly from Python\r\n - Is somewhat indirect (Jython is middle man)\r\n\r\n**Java to C/C++ via JNI/JNA/SWIG to Python via Embedded interpreter (maybe using BOOST Libraries?)**\r\n\r\n  OMG this method is not for the faint of heart. And I can tell you it has taken me very long to achieve this in with a decent method. Main reason you would want to do this is so that you can run CPython code which as full rein over you java object. There are  major things to consider before deciding to try and breed Java (which is like a chimp) with Python (which is like a horse). Firstly if you crash the interpreter, that&#39;s lights out for you program! And don&#39;t get me started on concurrency issues! In addition, there is a lot of boiler, I believe I have found the best configuration to minimize this boiler but it is still a lot! So how to go about this:\r\nConsider that C++ is your middle man, your objects are actually C++ objects! Good that you know that now. Just write your object as if your program is in C++ and not Java, with the data you want to access from both worlds. Then you can use the wrapper generator called [SWIG](http://www.swig.org/Doc1.3/Java.html) to make this accessible to java and compile a dll which you call (`System.load(dllNameHere)`) in Java. Get this working first, then move on to the hard part!\r\nTo get to Python you need to embed an interpreter. Firstly I suggest doing some hello interpreter programs or this tutorial [Embedding Python in C/C][2]. Once you have that working, its time to make the horse and the monkey dance! You can send you C++ object to Python via [boost][3] . I know I have not given you the fish, merely told you where to find the fish. Some pointers to note for this when compiling.\r\n\r\nWhen you compile boost you will need to compile a shared library. And you need to include and link to the stuff you need from jdk, ie jawt.lib, jvm.lib, (you will also need the client jvm.dll in your path when launching the application) As well as the python27.lib or whatever and the boost_python-vc100-mt-1_55.lib.\r\nThen include Python/include, jdk/include, boost and only use shared libraries (dlls) otherwise boost has a teary. And yeah full on I know. There are so many ways in which this can go sour. So make sure you get each thing done block by block. Then put them together. \r\n\r\n\r\n  [1]: http://www.codeproject.com/Articles/11805/Embedding-Python-in-C-C-Part-I\r\n  [2]: http://www.boost.org/doc/libs/1_57_0/libs/python/doc/tutorial/doc/html/python","title":"Calling Python in Java?","body":"<p>I think there are some important things to consider first with how strong you wish to have the linking between Java and Python.</p>\n<p><strong>Firstly</strong>  Do you only want to call functions or do you actually want Python code to change the data in your java objects? This is very important. If you only want to call some Python code with or without arguments, then that is not very difficult. If your arguments are primitives it makes it even more easy. However, if you want to have Java class implement member functions in Python, which change the data of the Java object, then this is not so easy or straight forward.</p>\n<p><strong>Secondly</strong> are we talking CPython, or will Jython do? I would say CPython is where its at! I would advocate this is why Python is so kool! Having such high abstractions however access to C or C++ when needed. Imagine if you could have that in Java. This question is not even worth asking if Jython is ok because then it is easy anyway.</p>\n<p>So I have played with the following methods, and listed them from easy to difficult:</p>\n<p><strong>Java to Jython</strong></p>\n<p><em>Advantages:</em> Trivially easy. Have actual references to Java objects</p>\n<p><em>Disadvantages:</em> No CPython, Extremely Slow!</p>\n<p>Jython from Java is so easy, and if this is really enough then great. However it is very slow and no CPython! Is life worth living without CPython? I don't think so! You can easily have Python code implementing your member functions for you Java objects.</p>\n<p><strong>Java to Jython to CPython via Pyro</strong></p>\n<p>Pyro is the remote object module for Python. You have some object on a CPython interpreter, and you can send it objects which are transferred via serialization and it can also return objects via this method. Note that if you send a serialized Python object from Jython and then call some functions which change the data in its members, then you will not see those changes in Java. You just need to remember to send back the data which you want from Pyro. This, I believe, is the easiest way to get to CPython! You do not need any JNI or JNA or SWIG or .... You don't need to know any C, or C++. Kool huh?</p>\n<p><em>Advantages:</em></p>\n<ul>\n<li>Access to CPython</li>\n<li>Not as difficult as following methods</li>\n</ul>\n<p><em>Disadvantages:</em></p>\n<ul>\n<li>Cannot change the member data of Java objects directly from Python</li>\n<li>Is somewhat indirect (Jython is middle man)</li>\n</ul>\n<p><strong>Java to C/C++ via JNI/JNA/SWIG to Python via Embedded interpreter (maybe using BOOST Libraries?)</strong></p>\n<p>OMG this method is not for the faint of heart. And I can tell you it has taken me very long to achieve this in with a decent method. Main reason you would want to do this is so that you can run CPython code which as full rein over you java object. There are  major things to consider before deciding to try and breed Java (which is like a chimp) with Python (which is like a horse). Firstly if you crash the interpreter, that's lights out for you program! And don't get me started on concurrency issues! In addition, there is a lot of boiler, I believe I have found the best configuration to minimize this boiler but it is still a lot! So how to go about this:\nConsider that C++ is your middle man, your objects are actually C++ objects! Good that you know that now. Just write your object as if your program is in C++ and not Java, with the data you want to access from both worlds. Then you can use the wrapper generator called <a href=\"http://www.swig.org/Doc1.3/Java.html\" rel=\"nofollow noreferrer\">SWIG</a> to make this accessible to java and compile a dll which you call (<code>System.load(dllNameHere)</code>) in Java. Get this working first, then move on to the hard part!\nTo get to Python you need to embed an interpreter. Firstly I suggest doing some hello interpreter programs or this tutorial <a href=\"http://www.boost.org/doc/libs/1_57_0/libs/python/doc/tutorial/doc/html/python\" rel=\"nofollow noreferrer\">Embedding Python in C/C</a>. Once you have that working, its time to make the horse and the monkey dance! You can send you C++ object to Python via [boost][3] . I know I have not given you the fish, merely told you where to find the fish. Some pointers to note for this when compiling.</p>\n<p>When you compile boost you will need to compile a shared library. And you need to include and link to the stuff you need from jdk, ie jawt.lib, jvm.lib, (you will also need the client jvm.dll in your path when launching the application) As well as the python27.lib or whatever and the boost_python-vc100-mt-1_55.lib.\nThen include Python/include, jdk/include, boost and only use shared libraries (dlls) otherwise boost has a teary. And yeah full on I know. There are so many ways in which this can go sour. So make sure you get each thing done block by block. Then put them together.</p>\n"},{"tags":[],"owner":{"account_id":55163,"reputation":1777,"user_id":165130,"accept_rate":40,"display_name":"alex"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1444081031,"creation_date":1444080729,"answer_id":32958257,"question_id":8898765,"body_markdown":"Jython has some limitations:\r\n\r\n&gt; There are a number of differences. First, Jython programs cannot use CPython \r\nextension modules written in C. These modules usually have files with the\r\nextension .so, .pyd or .dll. If you want to use such a module, you should look \r\nfor an equivalent written in pure Python or Java. Although it is technically \r\nfeasible to support such extensions - IronPython does so - there are no plans \r\nto do so in Jython.\r\n\r\nhttps://stackoverflow.com/questions/1252965/distributing-my-python-scripts-as-jars-with-jython\r\n\r\nyou can simply call python scripts (or bash or Perl scripts) from Java using Runtime or ProcessBuilder and pass output back to Java:\r\n\r\nhttps://stackoverflow.com/questions/13707519/running-a-bash-shell-script-in-java \r\n\r\nhttps://stackoverflow.com/questions/8496494/running-command-line-in-java\r\n\r\nhttps://stackoverflow.com/questions/5711084/java-runtime-getruntime-getting-output-from-executing-a-command-line-program","title":"Calling Python in Java?","body":"<p>Jython has some limitations:</p>\n\n<blockquote>\n  <p>There are a number of differences. First, Jython programs cannot use CPython \n  extension modules written in C. These modules usually have files with the\n  extension .so, .pyd or .dll. If you want to use such a module, you should look \n  for an equivalent written in pure Python or Java. Although it is technically \n  feasible to support such extensions - IronPython does so - there are no plans \n  to do so in Jython.</p>\n</blockquote>\n\n<p><a href=\"https://stackoverflow.com/questions/1252965/distributing-my-python-scripts-as-jars-with-jython\">Distributing my Python scripts as JAR files with Jython?</a></p>\n\n<p>you can simply call python scripts (or bash or Perl scripts) from Java using Runtime or ProcessBuilder and pass output back to Java:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/13707519/running-a-bash-shell-script-in-java\">Running a bash shell script in java</a> </p>\n\n<p><a href=\"https://stackoverflow.com/questions/8496494/running-command-line-in-java\">Running Command Line in Java</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/5711084/java-runtime-getruntime-getting-output-from-executing-a-command-line-program\">java runtime.getruntime() getting output from executing a command line program</a></p>\n"},{"comments":[{"owner":{"account_id":1030972,"reputation":123,"user_id":1039281,"display_name":"stx"},"score":0,"creation_date":1583858861,"post_id":42464815,"comment_id":107251554,"body_markdown":"+1 , but what about the additional performance and communication overhead of creating and parsing back and forth messages on both ends?","body":"+1 , but what about the additional performance and communication overhead of creating and parsing back and forth messages on both ends?"},{"owner":{"account_id":6629189,"reputation":517,"user_id":5118359,"display_name":"Peiming Hu"},"score":0,"creation_date":1585027686,"post_id":42464815,"comment_id":107616183,"body_markdown":"yes, this needs to define an api interface with minimum input/output required. It is not smart to have a lot of data transfter between client/server on the network. If you cannot define such an interface, then this design approach doesn&#39;t suits.","body":"yes, this needs to define an api interface with minimum input/output required. It is not smart to have a lot of data transfter between client/server on the network. If you cannot define such an interface, then this design approach doesn&#39;t suits."}],"tags":[],"owner":{"account_id":6629189,"reputation":517,"user_id":5118359,"display_name":"Peiming Hu"},"comment_count":2,"down_vote_count":2,"up_vote_count":30,"is_accepted":false,"score":28,"last_activity_date":1631876578,"creation_date":1488083920,"answer_id":42464815,"question_id":8898765,"body_markdown":"It&#39;s not smart to have python code inside java. Wrap your python code with flask or another web framework to make it a microservice. This makes your java program able to call this microservice (e.g. via REST).\r\n\r\nThis approach is simple and it will save you tons of issues. And the codes are loosely coupled so they are scalable.\r\n\r\nUpdated on Mar 24th 2020:\r\nAccording to @stx&#39;s comment, the above approach is not suitable for massive data transfer between client and server. \r\nHere is another approach I recommended: \r\nConnecting Python and Java with Rust(C/C++ also ok).\r\nhttps://medium.com/@shmulikamar/https-medium-com-shmulikamar-connecting-python-and-java-with-rust-11c256a1dfb0","title":"Calling Python in Java?","body":"<p>It's not smart to have python code inside java. Wrap your python code with flask or another web framework to make it a microservice. This makes your java program able to call this microservice (e.g. via REST).</p>\n<p>This approach is simple and it will save you tons of issues. And the codes are loosely coupled so they are scalable.</p>\n<p>Updated on Mar 24th 2020:\nAccording to @stx's comment, the above approach is not suitable for massive data transfer between client and server.\nHere is another approach I recommended:\nConnecting Python and Java with Rust(C/C++ also ok).\n<a href=\"https://medium.com/@shmulikamar/https-medium-com-shmulikamar-connecting-python-and-java-with-rust-11c256a1dfb0\" rel=\"noreferrer\">https://medium.com/@shmulikamar/https-medium-com-shmulikamar-connecting-python-and-java-with-rust-11c256a1dfb0</a></p>\n"},{"tags":[],"owner":{"account_id":10477676,"reputation":371,"user_id":7723708,"display_name":"bsteffen"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1489697310,"creation_date":1489697310,"answer_id":42844490,"question_id":8898765,"body_markdown":"Several of the answers mention that you can use JNI or JNA to access cpython but I would not recommend starting from scratch because there are already open source libraries for accessing cpython from java. For example:\r\n\r\n* [JEP](https://github.com/mrj0/jep/)\r\n* [JPY](https://github.com/bcdev/jpy)\r\n","title":"Calling Python in Java?","body":"<p>Several of the answers mention that you can use JNI or JNA to access cpython but I would not recommend starting from scratch because there are already open source libraries for accessing cpython from java. For example:</p>\n\n<ul>\n<li><a href=\"https://github.com/mrj0/jep/\" rel=\"noreferrer\">JEP</a></li>\n<li><a href=\"https://github.com/bcdev/jpy\" rel=\"noreferrer\">JPY</a></li>\n</ul>\n"},{"comments":[{"owner":{"account_id":379825,"reputation":3125,"user_id":733456,"accept_rate":84,"display_name":"Christian Schlichtherle"},"score":0,"creation_date":1550567407,"post_id":44472897,"comment_id":96305270,"body_markdown":"This project doesn&#39;t have any release.","body":"This project doesn&#39;t have any release."},{"owner":{"account_id":26053,"reputation":1832,"user_id":67492,"accept_rate":62,"display_name":"subes"},"score":0,"creation_date":1561938350,"post_id":44472897,"comment_id":100210004,"body_markdown":"@ChristianSchlichtherle invesdwin-context-python version 1.0.0 is not available; thanks to this little gem: https://github.com/loewenfels/dep-graph-releaser","body":"@ChristianSchlichtherle invesdwin-context-python version 1.0.0 is not available; thanks to this little gem: <a href=\"https://github.com/loewenfels/dep-graph-releaser\" rel=\"nofollow noreferrer\">github.com/loewenfels/dep-graph-releaser</a>"},{"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"score":0,"creation_date":1623238982,"post_id":44472897,"comment_id":120021045,"body_markdown":"Project release are now available, see https://github.com/invesdwin/invesdwin-context-python/issues/1 , however one should consider number of dependencies this project brings, see https://github.com/invesdwin/invesdwin-context-python/issues/4","body":"Project release are now available, see <a href=\"https://github.com/invesdwin/invesdwin-context-python/issues/1\" rel=\"nofollow noreferrer\">github.com/invesdwin/invesdwin-context-python/issues/1</a> , however one should consider number of dependencies this project brings, see <a href=\"https://github.com/invesdwin/invesdwin-context-python/issues/4\" rel=\"nofollow noreferrer\">github.com/invesdwin/invesdwin-context-python/issues/4</a>"}],"tags":[],"owner":{"account_id":26053,"reputation":1832,"user_id":67492,"accept_rate":62,"display_name":"subes"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1623239095,"creation_date":1497094725,"answer_id":44472897,"question_id":8898765,"body_markdown":"Here a library that lets you write your python scripts once and decide which integration method (Jython, CPython/PyPy via Jep and Py4j) to use at runtime: \r\n\r\nhttps://github.com/subes/invesdwin-context-python \r\n\r\nSince each method has its own benefits/drawbacks as explained in the link.  \r\n (3 modules: jep,  Py4J, jython )","title":"Calling Python in Java?","body":"<p>Here a library that lets you write your python scripts once and decide which integration method (Jython, CPython/PyPy via Jep and Py4j) to use at runtime:</p>\n<p><a href=\"https://github.com/subes/invesdwin-context-python\" rel=\"nofollow noreferrer\">https://github.com/subes/invesdwin-context-python</a></p>\n<p>Since each method has its own benefits/drawbacks as explained in the link.<br />\n(3 modules: jep,  Py4J, jython )</p>\n"},{"comments":[{"owner":{"account_id":223484,"reputation":61176,"user_id":482717,"accept_rate":66,"display_name":"Paul Verest"},"score":0,"creation_date":1622721960,"post_id":62082797,"comment_id":119876418,"body_markdown":"This answers https://stackoverflow.com/questions/67820680/how-to-run-python-code-with-pandas-request-etc-dependencies-from-java . Thanks","body":"This answers <a href=\"https://stackoverflow.com/questions/67820680/how-to-run-python-code-with-pandas-request-etc-dependencies-from-java\" title=\"how to run python code with pandas request etc dependencies from java\">stackoverflow.com/questions/67820680/&hellip;</a> . Thanks"}],"tags":[],"owner":{"account_id":2979311,"reputation":592,"user_id":2529666,"accept_rate":40,"display_name":"Flummiboy"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1662315141,"creation_date":1590744653,"answer_id":62082797,"question_id":8898765,"body_markdown":"[This][1] gives a pretty good overview over the current options. Some of which are named in other answers. Jython is not usable until they decide to not implement Python 3. Many of the other projects are coming from the python side and want to access java. But there are a few options still, to name something which has not been named yet: [gRPC][2]\r\n\r\n  [1]: https://web.archive.org/web/20200501221233/https://talvi.net/a-brief-overview-of-python-java-bridges-in-2020.html\r\n  [2]: https://grpc.io/","title":"Calling Python in Java?","body":"<p><a href=\"https://web.archive.org/web/20200501221233/https://talvi.net/a-brief-overview-of-python-java-bridges-in-2020.html\" rel=\"nofollow noreferrer\">This</a> gives a pretty good overview over the current options. Some of which are named in other answers. Jython is not usable until they decide to not implement Python 3. Many of the other projects are coming from the python side and want to access java. But there are a few options still, to name something which has not been named yet: <a href=\"https://grpc.io/\" rel=\"nofollow noreferrer\">gRPC</a></p>\n"},{"tags":[],"owner":{"account_id":3047300,"reputation":2037,"user_id":2582581,"display_name":"Wildhammer"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1623240230,"creation_date":1596241974,"answer_id":63200642,"question_id":8898765,"body_markdown":"[GraalVM][1] is a good choice. I&#39;ve done Java+Javascript combination with GraalVM for microservice design (Java with Javascript reflection). They recently added support for python, I&#39;d give it a try especially with how big its community has grown over the years.\r\n\r\nUPDATE June 2021\r\n\r\nhttps://www.graalvm.org/reference-manual/python/ says\r\n\r\n&gt; GraalVM provides a Python 3.8 compliant runtime. A primary goal of the GraalVM Python runtime is to support SciPy and its constituent libraries, as well as to work with other data science and machine learning libraries from the rich Python ecosystem. At this point, the Python runtime is made available for experimentation and curious end-users.\r\n\r\n  [1]: https://www.graalvm.org/getting-started/#running-python","title":"Calling Python in Java?","body":"<p><a href=\"https://www.graalvm.org/getting-started/#running-python\" rel=\"nofollow noreferrer\">GraalVM</a> is a good choice. I've done Java+Javascript combination with GraalVM for microservice design (Java with Javascript reflection). They recently added support for python, I'd give it a try especially with how big its community has grown over the years.</p>\n<p>UPDATE June 2021</p>\n<p><a href=\"https://www.graalvm.org/reference-manual/python/\" rel=\"nofollow noreferrer\">https://www.graalvm.org/reference-manual/python/</a> says</p>\n<blockquote>\n<p>GraalVM provides a Python 3.8 compliant runtime. A primary goal of the GraalVM Python runtime is to support SciPy and its constituent libraries, as well as to work with other data science and machine learning libraries from the rich Python ecosystem. At this point, the Python runtime is made available for experimentation and curious end-users.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":19341163,"reputation":119,"user_id":14140634,"display_name":"towith"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625912550,"creation_date":1625912550,"answer_id":68326816,"question_id":8898765,"body_markdown":"I have similar requirement, I think best solution is `thrift` for me(also a rpc solution),  just run test passed successfully right now, and can use [thrift-generator](https://github.com/hongliuliao/thrift-generator) to gen thrift file from java interface, then gen python files and java client files from the thrift file","title":"Calling Python in Java?","body":"<p>I have similar requirement, I think best solution is <code>thrift</code> for me(also a rpc solution),  just run test passed successfully right now, and can use <a href=\"https://github.com/hongliuliao/thrift-generator\" rel=\"nofollow noreferrer\">thrift-generator</a> to gen thrift file from java interface, then gen python files and java client files from the thrift file</p>\n"},{"tags":[],"owner":{"account_id":23945000,"reputation":1,"user_id":17937464,"display_name":"Ashfaq"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679300519,"creation_date":1679300519,"answer_id":75787885,"question_id":8898765,"body_markdown":"In in terms of data exchange from python to Java we can make it a rest services and exchange the data in the XML or Json format but sometimes we need to call automated script is easily created with python to called in java file. ","title":"Calling Python in Java?","body":"<p>In in terms of data exchange from python to Java we can make it a rest services and exchange the data in the XML or Json format but sometimes we need to call automated script is easily created with python to called in java file.</p>\n"}],"owner":{"account_id":447451,"reputation":1987,"user_id":841072,"accept_rate":65,"display_name":"Shahab"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230647,"favorite_count":0,"down_vote_count":0,"up_vote_count":139,"accepted_answer_id":8899042,"answer_count":13,"score":139,"last_activity_date":1689958229,"creation_date":1326820228,"question_id":8898765,"body_markdown":"I am wondering if it is possible to call Python functions from Java code using Jython, or is it only for calling Java code from Python?\r\n","title":"Calling Python in Java?","body":"<p>I am wondering if it is possible to call Python functions from Java code using Jython, or is it only for calling Java code from Python?</p>\n"},{"tags":["java","spring","hibernate","spring-mvc","spring-data-jpa"],"owner":{"account_id":25853606,"reputation":1,"user_id":19587254,"display_name":"Oxygensend"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689958092,"creation_date":1689868815,"question_id":76731705,"body_markdown":"I am new to Spring boot and hibernate. I am creating a simple project with a micro services architecture. While creating entities I&#39;ve faced a problem with many to many relationship, I&#39;ve searched whole internet and I couldn&#39;t find the answer so maybe someone here can help me. I am using postgres 15 database if it help somehow. spring-boot-jpa version: 3.1, hibernate version: 6.2.2.Final.\r\n\r\nI have two entities - `Restaurant` and `Category`:\r\n\r\n```\r\npackage food.domain.entity;\r\n\r\nimport food.infrastructure.hibernate.UUIDConverter;\r\nimport jakarta.persistence.*;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\nimport java.util.UUID;\r\n\r\n@Data\r\n@Builder\r\n@Entity\r\n@Table(name = &quot;food_category&quot;)\r\npublic class Category {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    @Column(nullable = false)\r\n    private String description;\r\n\r\n    @ManyToMany(mappedBy = &quot;categories&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    private Set&lt;Restaurant&gt; restaurants = new HashSet&lt;&gt;();\r\n\r\n    public Category() {\r\n    }\r\n\r\n    public Category(Long id, String name, String description, Set&lt;Restaurant&gt; restaurants) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.restaurants = restaurants;\r\n    }\r\n\r\n    public void addRestaurant(Restaurant restaurant) {\r\n        restaurants.add(restaurant);\r\n    }\r\n\r\n}\r\npackage food.domain.entity;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.*;\r\nimport org.springframework.lang.NonNull;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\n@Data\r\n@Builder\r\n@Entity\r\n@Table(name = &quot;food_restaurant&quot;)\r\npublic class Restaurant {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private String name;\r\n\r\n    private String description;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private String openingTime;\r\n\r\n    @NonNull\r\n    @Column(nullable = false)\r\n    private String closingTime;\r\n\r\n    @OneToMany(mappedBy = &quot;restaurant&quot;)\r\n    private Set&lt;Course&gt; courses = new HashSet&lt;&gt;();\r\n\r\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\r\n    @JoinTable(name = &quot;food_restaurant_category&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;restaurant_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;category_id&quot;))\r\n    private Set&lt;Category&gt; categories = new HashSet&lt;&gt;();\r\n\r\n\r\n    public Restaurant() {\r\n    }\r\n//\r\n    public Restaurant(Long id, @NonNull String name, String description, @NonNull String openingTime, @NonNull String closingTime, Set&lt;Course&gt; courses, Set&lt;Category&gt; categories) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.description = description;\r\n        this.openingTime = openingTime;\r\n        this.closingTime = closingTime;\r\n        this.courses = courses;\r\n        this.categories = categories;\r\n    }\r\n\r\n\r\n    public void addCategory(Category category) {\r\n        this.categories.add(category);\r\n        category.getRestaurants().add(this);\r\n    }\r\n\r\n}\r\n```\r\n\r\nFor linking restaurant with category it works pretty well(from the restaurant side -  that what i wanted to achive)I can see the results in the pivot\r\n\r\n```\r\npackage food.domain.command.restaurant.create;\r\n\r\nimport commons.cqrs.command.CommandHandler;\r\nimport food.application.response.RestaurantIdResponse;\r\nimport food.domain.entity.Restaurant;\r\nimport food.infrastructure.repository.CategoryRepository;\r\nimport food.infrastructure.repository.RestaurantRepository;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.UUID;\r\n\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class CreateRestaurantCommandHandler implements CommandHandler&lt;RestaurantIdResponse, CreateRestaurantCommand&gt; {\r\n\r\n    private final CategoryRepository categoryRepository;\r\n    private final RestaurantRepository restaurantRepository;\r\n\r\n    @Override\r\n    public RestaurantIdResponse handle(CreateRestaurantCommand command) {\r\n        var request = command.request();\r\n        var categories = new HashSet&lt;&gt;(categoryRepository.findAllById(request.categories()));\r\n        var restaurant = Restaurant.builder()\r\n                .name(request.name())\r\n                .description(request.description())\r\n                .openingTime(request.openingTime())\r\n                .closingTime(request.closingTime())\r\n                .categories(categories)\r\n                .build();\r\n\r\n        restaurantRepository.save(restaurant);\r\n\r\n        return new RestaurantIdResponse(restaurant.getId());\r\n    }\r\n}\r\n```\r\n\r\nBut when it comes to reading it doesnt work, every time i&#39;ve got empty set\r\n\r\n```\r\npackage food.domain.query.restaurant.get;\r\n\r\nimport commons.cqrs.query.QueryHandler;\r\nimport food.application.response.GetRestaurantResponse;\r\nimport food.domain.entity.Category;\r\nimport food.domain.entity.Restaurant;\r\nimport food.domain.exception.RestaurantNotFoundException;\r\nimport food.infrastructure.repository.CategoryRepository;\r\nimport food.infrastructure.repository.RestaurantRepository;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.List;\r\nimport java.util.Optional;\r\nimport java.util.Set;\r\nimport java.util.stream.Collectors;\r\n\r\n@RequiredArgsConstructor\r\n@Component\r\npublic class GetRestaurantQueryHandler implements QueryHandler&lt;GetRestaurantResponse, GetRestaurantQuery&gt; {\r\n\r\n    private final RestaurantRepository repository;\r\n    private final CategoryRepository categoryRepository;\r\n\r\n    @Override\r\n    public GetRestaurantResponse handle(GetRestaurantQuery query) {\r\n        Restaurant restaurant = repository.findById(query.restaurantId()).orElseThrow(() -&gt; new RestaurantNotFoundException(&quot;Restaurant with id: &quot; + query.restaurantId() + &quot; not found&quot;));\r\n\r\n        int z = restaurant.getCategories().size(); // This will trigger the loading of categories from the database\r\n        List&lt;Restaurant&gt; all = repository.findAll();\r\n        Optional&lt;Category&gt; byId = categoryRepository.findById(1L);\r\n\r\n\r\n        Set&lt;String&gt; categories = restaurant.getCategories().stream().map(Category::getName).collect(Collectors.toSet());\r\n\r\n\r\n        return new GetRestaurantResponse(\r\n                restaurant.getId(),\r\n                restaurant.getName(),\r\n                restaurant.getDescription(),\r\n                restaurant.getOpeningTime(),\r\n                restaurant.getClosingTime(),\r\n                categories\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nHere are also all queries that in executed from GetRestaurantQueryHandler:\r\n\r\n```\r\n2023-07-20T17:37:06.730+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select r1_0.id,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0\r\n2023-07-20T17:37:06.742+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:06.743+02:00 TRACE 61831 --- [nio-8081-exec-2] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [9]\r\n2023-07-20T17:37:06.748+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:06.749+02:00 TRACE 61831 --- [nio-8081-exec-2] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [4]\r\n2023-07-20T17:37:37.858+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.id,c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0 left join (food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id) on r1_0.id=c1_0.restaurant_id where r1_0.id=?\r\n2023-07-20T17:37:37.860+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\r\n2023-07-20T17:37:37.868+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\r\n2023-07-20T17:37:37.870+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [1]\r\n2023-07-20T17:37:37.878+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.879+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [5]\r\n2023-07-20T17:37:37.885+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.886+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [5]\r\n2023-07-20T17:37:37.893+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\r\n2023-07-20T17:37:37.895+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [1]\r\n2023-07-20T17:37:37.901+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.902+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [6]\r\n2023-07-20T17:37:37.908+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.909+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [6]\r\n2023-07-20T17:37:37.914+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.915+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\r\n2023-07-20T17:37:37.919+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:37.920+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\r\n2023-07-20T17:37:37.925+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\r\n2023-07-20T17:37:37.926+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [2]\r\n2023-07-20T17:37:56.784+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.id,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0\r\n2023-07-20T17:37:56.799+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:56.800+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [9]\r\n2023-07-20T17:37:56.807+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\r\n2023-07-20T17:37:56.808+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [4]\r\n```\r\n\r\nIn `GetRestaurantQueryHandler`, &#39;z&#39;,&#39;all&#39;, &#39;byId&#39; objects are just debugging ones. `Restaurant` object doesn&#39;t contain any category, but the `byId` object contains  this restaurant... So I&#39;ve tried to reverse the mapping, so maybe then I will got any categories in the restaurant object but nothing really changed. In the beginning I was using UUID instead of Long, I read that it maybe because the issue but unfortunately not. I also tried to remove new `HashSet&lt;&gt;()` from definition, remove `JoinTable`, create pivot entity, nothing worked... Do you have any idea why it works like this?\r\n\r\n[enter image description here](https://i.stack.imgur.com/xBxdv.png)","title":"Hibernate Many To Many Relationship - Data is not fetched for many to many relationship","body":"<p>I am new to Spring boot and hibernate. I am creating a simple project with a micro services architecture. While creating entities I've faced a problem with many to many relationship, I've searched whole internet and I couldn't find the answer so maybe someone here can help me. I am using postgres 15 database if it help somehow. spring-boot-jpa version: 3.1, hibernate version: 6.2.2.Final.</p>\n<p>I have two entities - <code>Restaurant</code> and <code>Category</code>:</p>\n<pre><code>package food.domain.entity;\n\nimport food.infrastructure.hibernate.UUIDConverter;\nimport jakarta.persistence.*;\nimport lombok.Builder;\nimport lombok.Data;\n\nimport java.util.HashSet;\nimport java.util.Set;\nimport java.util.UUID;\n\n@Data\n@Builder\n@Entity\n@Table(name = &quot;food_category&quot;)\npublic class Category {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(nullable = false)\n    private String name;\n\n    @Column(nullable = false)\n    private String description;\n\n    @ManyToMany(mappedBy = &quot;categories&quot;, cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    private Set&lt;Restaurant&gt; restaurants = new HashSet&lt;&gt;();\n\n    public Category() {\n    }\n\n    public Category(Long id, String name, String description, Set&lt;Restaurant&gt; restaurants) {\n        this.id = id;\n        this.name = name;\n        this.description = description;\n        this.restaurants = restaurants;\n    }\n\n    public void addRestaurant(Restaurant restaurant) {\n        restaurants.add(restaurant);\n    }\n\n}\npackage food.domain.entity;\n\nimport jakarta.persistence.*;\nimport lombok.*;\nimport org.springframework.lang.NonNull;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\n@Data\n@Builder\n@Entity\n@Table(name = &quot;food_restaurant&quot;)\npublic class Restaurant {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NonNull\n    @Column(nullable = false)\n    private String name;\n\n    private String description;\n\n    @NonNull\n    @Column(nullable = false)\n    private String openingTime;\n\n    @NonNull\n    @Column(nullable = false)\n    private String closingTime;\n\n    @OneToMany(mappedBy = &quot;restaurant&quot;)\n    private Set&lt;Course&gt; courses = new HashSet&lt;&gt;();\n\n    @ManyToMany(cascade = CascadeType.ALL, fetch = FetchType.EAGER)\n    @JoinTable(name = &quot;food_restaurant_category&quot;,\n            joinColumns = @JoinColumn(name = &quot;restaurant_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;category_id&quot;))\n    private Set&lt;Category&gt; categories = new HashSet&lt;&gt;();\n\n\n    public Restaurant() {\n    }\n//\n    public Restaurant(Long id, @NonNull String name, String description, @NonNull String openingTime, @NonNull String closingTime, Set&lt;Course&gt; courses, Set&lt;Category&gt; categories) {\n        this.id = id;\n        this.name = name;\n        this.description = description;\n        this.openingTime = openingTime;\n        this.closingTime = closingTime;\n        this.courses = courses;\n        this.categories = categories;\n    }\n\n\n    public void addCategory(Category category) {\n        this.categories.add(category);\n        category.getRestaurants().add(this);\n    }\n\n}\n</code></pre>\n<p>For linking restaurant with category it works pretty well(from the restaurant side -  that what i wanted to achive)I can see the results in the pivot</p>\n<pre><code>package food.domain.command.restaurant.create;\n\nimport commons.cqrs.command.CommandHandler;\nimport food.application.response.RestaurantIdResponse;\nimport food.domain.entity.Restaurant;\nimport food.infrastructure.repository.CategoryRepository;\nimport food.infrastructure.repository.RestaurantRepository;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\nimport java.util.HashSet;\nimport java.util.UUID;\n\n@RequiredArgsConstructor\n@Component\npublic class CreateRestaurantCommandHandler implements CommandHandler&lt;RestaurantIdResponse, CreateRestaurantCommand&gt; {\n\n    private final CategoryRepository categoryRepository;\n    private final RestaurantRepository restaurantRepository;\n\n    @Override\n    public RestaurantIdResponse handle(CreateRestaurantCommand command) {\n        var request = command.request();\n        var categories = new HashSet&lt;&gt;(categoryRepository.findAllById(request.categories()));\n        var restaurant = Restaurant.builder()\n                .name(request.name())\n                .description(request.description())\n                .openingTime(request.openingTime())\n                .closingTime(request.closingTime())\n                .categories(categories)\n                .build();\n\n        restaurantRepository.save(restaurant);\n\n        return new RestaurantIdResponse(restaurant.getId());\n    }\n}\n</code></pre>\n<p>But when it comes to reading it doesnt work, every time i've got empty set</p>\n<pre><code>package food.domain.query.restaurant.get;\n\nimport commons.cqrs.query.QueryHandler;\nimport food.application.response.GetRestaurantResponse;\nimport food.domain.entity.Category;\nimport food.domain.entity.Restaurant;\nimport food.domain.exception.RestaurantNotFoundException;\nimport food.infrastructure.repository.CategoryRepository;\nimport food.infrastructure.repository.RestaurantRepository;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.stereotype.Component;\n\nimport java.util.List;\nimport java.util.Optional;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\n@RequiredArgsConstructor\n@Component\npublic class GetRestaurantQueryHandler implements QueryHandler&lt;GetRestaurantResponse, GetRestaurantQuery&gt; {\n\n    private final RestaurantRepository repository;\n    private final CategoryRepository categoryRepository;\n\n    @Override\n    public GetRestaurantResponse handle(GetRestaurantQuery query) {\n        Restaurant restaurant = repository.findById(query.restaurantId()).orElseThrow(() -&gt; new RestaurantNotFoundException(&quot;Restaurant with id: &quot; + query.restaurantId() + &quot; not found&quot;));\n\n        int z = restaurant.getCategories().size(); // This will trigger the loading of categories from the database\n        List&lt;Restaurant&gt; all = repository.findAll();\n        Optional&lt;Category&gt; byId = categoryRepository.findById(1L);\n\n\n        Set&lt;String&gt; categories = restaurant.getCategories().stream().map(Category::getName).collect(Collectors.toSet());\n\n\n        return new GetRestaurantResponse(\n                restaurant.getId(),\n                restaurant.getName(),\n                restaurant.getDescription(),\n                restaurant.getOpeningTime(),\n                restaurant.getClosingTime(),\n                categories\n        );\n    }\n}\n</code></pre>\n<p>Here are also all queries that in executed from GetRestaurantQueryHandler:</p>\n<pre><code>2023-07-20T17:37:06.730+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select r1_0.id,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0\n2023-07-20T17:37:06.742+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:06.743+02:00 TRACE 61831 --- [nio-8081-exec-2] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [9]\n2023-07-20T17:37:06.748+02:00 DEBUG 61831 --- [nio-8081-exec-2] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:06.749+02:00 TRACE 61831 --- [nio-8081-exec-2] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [4]\n2023-07-20T17:37:37.858+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.id,c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0 left join (food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id) on r1_0.id=c1_0.restaurant_id where r1_0.id=?\n2023-07-20T17:37:37.860+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\n2023-07-20T17:37:37.868+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\n2023-07-20T17:37:37.870+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [1]\n2023-07-20T17:37:37.878+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.879+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [5]\n2023-07-20T17:37:37.885+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.886+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [5]\n2023-07-20T17:37:37.893+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\n2023-07-20T17:37:37.895+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [1]\n2023-07-20T17:37:37.901+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.902+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [6]\n2023-07-20T17:37:37.908+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.909+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [6]\n2023-07-20T17:37:37.914+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_0.id,c1_0.availability,c2_0.id,c2_0.description,c2_0.name,r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time,c1_0.cost,c1_0.description,c1_0.name from food_food c1_0 left join food_category c2_0 on c2_0.id=c1_0.category_id left join (food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id) on c2_0.id=r1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.915+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\n2023-07-20T17:37:37.919+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:37.920+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [7]\n2023-07-20T17:37:37.925+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.category_id,r1_1.id,r1_1.closing_time,r1_1.description,r1_1.name,r1_1.opening_time from food_restaurant_category r1_0 join food_restaurant r1_1 on r1_1.id=r1_0.restaurant_id where r1_0.category_id=?\n2023-07-20T17:37:37.926+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [2]\n2023-07-20T17:37:56.784+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select r1_0.id,r1_0.closing_time,r1_0.description,r1_0.name,r1_0.opening_time from food_restaurant r1_0\n2023-07-20T17:37:56.799+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:56.800+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [9]\n2023-07-20T17:37:56.807+02:00 DEBUG 61831 --- [nio-8081-exec-3] org.hibernate.SQL                        : select c1_0.restaurant_id,c1_1.id,c1_1.description,c1_1.name from food_restaurant_category c1_0 join food_category c1_1 on c1_1.id=c1_0.category_id where c1_0.restaurant_id=?\n2023-07-20T17:37:56.808+02:00 TRACE 61831 --- [nio-8081-exec-3] org.hibernate.orm.jdbc.bind              : binding parameter [1] as [BIGINT] - [4]\n</code></pre>\n<p>In <code>GetRestaurantQueryHandler</code>, 'z','all', 'byId' objects are just debugging ones. <code>Restaurant</code> object doesn't contain any category, but the <code>byId</code> object contains  this restaurant... So I've tried to reverse the mapping, so maybe then I will got any categories in the restaurant object but nothing really changed. In the beginning I was using UUID instead of Long, I read that it maybe because the issue but unfortunately not. I also tried to remove new <code>HashSet&lt;&gt;()</code> from definition, remove <code>JoinTable</code>, create pivot entity, nothing worked... Do you have any idea why it works like this?</p>\n<p><a href=\"https://i.stack.imgur.com/xBxdv.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","tar","minio"],"owner":{"account_id":29065337,"reputation":1,"user_id":22265076,"display_name":"Diogo Eira"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689957874,"creation_date":1689957874,"question_id":76739788,"body_markdown":"I can extract the files to minio root folder but not elsewhere\r\n\r\n\r\nHello all.\r\nI&#39;m using MinIO Java Client API:\r\n  &lt;name&gt;minio&lt;/name&gt;\r\n  &lt;version&gt;8.4.5&lt;/version&gt;\r\n\r\n\r\n\r\nI use:\r\nMap&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\nheaders.put(&quot;X-Amz-Meta-Snowball-Auto-Extract&quot;, &quot;true&quot;);\r\n\r\nin the PutObjectArgs and Minio extracts the contents to the root folder (of the Bucket).\r\n\r\n\r\n    public ObjectWriteResponse createObject(MinioClient minioClient, String bucket, String objectPath, InputStream inputStream,\r\n                                            Map&lt;String, String&gt; headers) throws\r\n            ServerException, InsufficientDataException, ErrorResponseException,\r\n            IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException,\r\n            XmlParserException, InternalException {\r\n        try {\r\n            PutObjectArgs.Builder builder = PutObjectArgs.builder().bucket(bucket).object(safeUrl(objectPath)).\r\n                    stream(inputStream, inputStream.available(), -1);\r\n            if (!CollectionUtils.isEmpty(headers)) {\r\n                builder = builder.headers(headers);\r\n            }\r\n            return minioClient.putObject(builder.build());\r\n        } finally {\r\n            inputStream.close();\r\n        }\r\n    }\r\n\r\n\r\nHow to define an extract destination folder for my tar?\r\n\r\nIs it possible to extract a tar already present in the Minio server, without a new upload?\r\n\r\nBest Regards\r\n\r\n","title":"Minio define Extract Path","body":"<p>I can extract the files to minio root folder but not elsewhere</p>\n<p>Hello all.\nI'm using MinIO Java Client API:\nminio\n8.4.5</p>\n<p>I use:\nMap&lt;String, String&gt; headers = new HashMap&lt;&gt;();\nheaders.put(&quot;X-Amz-Meta-Snowball-Auto-Extract&quot;, &quot;true&quot;);</p>\n<p>in the PutObjectArgs and Minio extracts the contents to the root folder (of the Bucket).</p>\n<pre><code>public ObjectWriteResponse createObject(MinioClient minioClient, String bucket, String objectPath, InputStream inputStream,\n                                        Map&lt;String, String&gt; headers) throws\n        ServerException, InsufficientDataException, ErrorResponseException,\n        IOException, NoSuchAlgorithmException, InvalidKeyException, InvalidResponseException,\n        XmlParserException, InternalException {\n    try {\n        PutObjectArgs.Builder builder = PutObjectArgs.builder().bucket(bucket).object(safeUrl(objectPath)).\n                stream(inputStream, inputStream.available(), -1);\n        if (!CollectionUtils.isEmpty(headers)) {\n            builder = builder.headers(headers);\n        }\n        return minioClient.putObject(builder.build());\n    } finally {\n        inputStream.close();\n    }\n}\n</code></pre>\n<p>How to define an extract destination folder for my tar?</p>\n<p>Is it possible to extract a tar already present in the Minio server, without a new upload?</p>\n<p>Best Regards</p>\n"},{"tags":["java","file-io","symlink"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689961712,"post_id":76739670,"comment_id":135291865,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1689961836,"post_id":76739670,"comment_id":135291886,"body_markdown":"Not sure what your problem is here: it&#39;s quite common to see `IllegalArgumentException` when a method has found problems when doing very basic checks on arguments, but in your case file system has been accessed so it isn&#39;t unreasonable to see `IOException`. Admittedly its not a very good error message.","body":"Not sure what your problem is here: it&#39;s quite common to see <code>IllegalArgumentException</code> when a method has found problems when doing very basic checks on arguments, but in your case file system has been accessed so it isn&#39;t unreasonable to see <code>IOException</code>. Admittedly its not a very good error message."}],"answers":[{"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":1,"creation_date":1689976326,"post_id":76739768,"comment_id":135293874,"body_markdown":"The exception actually makes sense -- `NOFOLLOW_LINKS` could be interpreted as ***number of links allowed = 0***, in which case the first link would cause that exception.,","body":"The exception actually makes sense -- <code>NOFOLLOW_LINKS</code> could be interpreted as <b><i>number of links allowed = 0</i></b>, in which case the first link would cause that exception.,"},{"owner":{"account_id":29064968,"reputation":13,"user_id":22264782,"display_name":"Daniel"},"score":0,"creation_date":1690045947,"post_id":76739768,"comment_id":135299647,"body_markdown":"If the option is interpreted like Jim described (number of links allowed = 0), then the error make sense now.","body":"If the option is interpreted like Jim described (number of links allowed = 0), then the error make sense now."}],"tags":[],"owner":{"account_id":6466355,"reputation":488,"user_id":5008145,"display_name":"NorthernSky"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689957555,"creation_date":1689957555,"answer_id":76739768,"question_id":76739670,"body_markdown":"The expected behavior for I/O errors is that an IOException is thrown, which it is, as you have seen.\r\n\r\nIllegalArgumentException is not a good fit here. It is used when there is something wrong with the arguments that can be detected before attempting to do anything.\r\nFor example, Files.newInputStream throws this exception &#39;if an invalid combination of options is specified&#39;.\r\n\r\nUnsupportedOperationException is also used for something different, it is used in cases where the entire operation is unsupported. For example, attempting to remove an element from an unmodifiable collection.\r\n\r\n","title":"Files.newInputStream with NOFOLLOW_LINKS option","body":"<p>The expected behavior for I/O errors is that an IOException is thrown, which it is, as you have seen.</p>\n<p>IllegalArgumentException is not a good fit here. It is used when there is something wrong with the arguments that can be detected before attempting to do anything.\nFor example, Files.newInputStream throws this exception 'if an invalid combination of options is specified'.</p>\n<p>UnsupportedOperationException is also used for something different, it is used in cases where the entire operation is unsupported. For example, attempting to remove an element from an unmodifiable collection.</p>\n"}],"owner":{"account_id":29064968,"reputation":13,"user_id":22264782,"display_name":"Daniel"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76739768,"answer_count":1,"score":1,"last_activity_date":1689957555,"creation_date":1689956679,"question_id":76739670,"body_markdown":"I wonder what is the expected behavior of java.nio.file.Files.newInputStream with java.nio.file.LinkOption.NOFOLLOW_LINKS option when used on symbolic links. I could not find it in documentation.\r\n\r\nI created two files. Regular empty file called &quot;file&quot; and a symbolic link called &quot;link&quot;:\r\n\r\n```\r\ntouch file\r\nln -s file link\r\n```\r\nWhen I try to open input stream for the link file:\r\n\r\n```\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.LinkOption;\r\nimport java.nio.file.Path;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) throws IOException {\r\n        try (\r\n            InputStream stream = Files.newInputStream(Path.of(&quot;src&quot;, &quot;link&quot;), LinkOption.NOFOLLOW_LINKS)\r\n        ) {}\r\n    }\r\n}\r\n```\r\nthen I get an error:\r\n\r\n```\r\nException in thread &quot;main&quot; java.io.IOException: Too many levels of symbolic links (NOFOLLOW_LINKS specified)\r\n\tat java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\r\n\tat java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)\r\n\tat java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:219)\r\n\tat java.base/java.nio.file.Files.newByteChannel(Files.java:371)\r\n\tat java.base/java.nio.file.Files.newByteChannel(Files.java:422)\r\n\tat java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:420)\r\n\tat java.base/java.nio.file.Files.newInputStream(Files.java:156)\r\n\tat Main.main(Main.java:10)\r\n```\r\nIf I either remove the NOFOLLOW_LINKS option or change path to the regular file, then no error is thrown.\r\n\r\nIf NOFOLLOW_LINKS option cannot be used on symbolic links, then I would expect either IllegalArgumentException or UnsupportedOperationException to be thrown. Why is IOexception with message &quot;Too many levels of symbolic links&quot; thrown instead?\r\n\r\nI use openjdk version &quot;11.0.19&quot; in case that was relevant.","title":"Files.newInputStream with NOFOLLOW_LINKS option","body":"<p>I wonder what is the expected behavior of java.nio.file.Files.newInputStream with java.nio.file.LinkOption.NOFOLLOW_LINKS option when used on symbolic links. I could not find it in documentation.</p>\n<p>I created two files. Regular empty file called &quot;file&quot; and a symbolic link called &quot;link&quot;:</p>\n<pre><code>touch file\nln -s file link\n</code></pre>\n<p>When I try to open input stream for the link file:</p>\n<pre><code>import java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.file.Files;\nimport java.nio.file.LinkOption;\nimport java.nio.file.Path;\n\npublic class Main {\n    public static void main(String[] args) throws IOException {\n        try (\n            InputStream stream = Files.newInputStream(Path.of(&quot;src&quot;, &quot;link&quot;), LinkOption.NOFOLLOW_LINKS)\n        ) {}\n    }\n}\n</code></pre>\n<p>then I get an error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.io.IOException: Too many levels of symbolic links (NOFOLLOW_LINKS specified)\n    at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:86)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)\n    at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:219)\n    at java.base/java.nio.file.Files.newByteChannel(Files.java:371)\n    at java.base/java.nio.file.Files.newByteChannel(Files.java:422)\n    at java.base/java.nio.file.spi.FileSystemProvider.newInputStream(FileSystemProvider.java:420)\n    at java.base/java.nio.file.Files.newInputStream(Files.java:156)\n    at Main.main(Main.java:10)\n</code></pre>\n<p>If I either remove the NOFOLLOW_LINKS option or change path to the regular file, then no error is thrown.</p>\n<p>If NOFOLLOW_LINKS option cannot be used on symbolic links, then I would expect either IllegalArgumentException or UnsupportedOperationException to be thrown. Why is IOexception with message &quot;Too many levels of symbolic links&quot; thrown instead?</p>\n<p>I use openjdk version &quot;11.0.19&quot; in case that was relevant.</p>\n"},{"tags":["java","spring"],"owner":{"account_id":4926772,"reputation":45,"user_id":3967827,"display_name":"M.Ghanem"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689957338,"creation_date":1689957338,"question_id":76739746,"body_markdown":"I would like to write a multimodule library that contains a portion built with spring (and not spring boot) and another portion built with java native.\r\n\r\nI am a beginner at Spring and I would appreciate any advice on how to proceed.\r\n\r\n","title":"Creating a multimodule spring library using Java","body":"<p>I would like to write a multimodule library that contains a portion built with spring (and not spring boot) and another portion built with java native.</p>\n<p>I am a beginner at Spring and I would appreciate any advice on how to proceed.</p>\n"},{"tags":["java","spring-boot","ehcache","graalvm"],"comments":[{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1674401574,"post_id":75201538,"comment_id":132702219,"body_markdown":"I assume that it also runs fine when you are not building it as &quot;native&quot;. The problem probably comes from the missing hints for EHcache for the GraalVM. Maybe try the tracing agent to help you on the way (doc: https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html#native-image.advanced.using-the-tracing-agent)","body":"I assume that it also runs fine when you are not building it as &quot;native&quot;. The problem probably comes from the missing hints for EHcache for the GraalVM. Maybe try the tracing agent to help you on the way (doc: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/native-image.html#native-image.advanced.using-the-tracing-agent\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>)"},{"owner":{"account_id":27593689,"reputation":11,"user_id":21060344,"display_name":"John Dillard"},"score":0,"creation_date":1674403769,"post_id":75201538,"comment_id":132702600,"body_markdown":"@grekier correct, it will run fine if I don&#39;t run it as a native image.\nI edited my post to add that information.","body":"@grekier correct, it will run fine if I don&#39;t run it as a native image. I edited my post to add that information."},{"owner":{"account_id":27593689,"reputation":11,"user_id":21060344,"display_name":"John Dillard"},"score":0,"creation_date":1674403816,"post_id":75201538,"comment_id":132702609,"body_markdown":"@grekier I will try the tracing agent as you suggested. Thanks.","body":"@grekier I will try the tracing agent as you suggested. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":27593689,"reputation":11,"user_id":21060344,"display_name":"John Dillard"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1674495403,"creation_date":1674417773,"answer_id":75203521,"question_id":75201538,"body_markdown":"Thanks to @grekier for suggesting to try the GraalVM native image tracing agent.\r\nFirstly I changed that part of code:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;build-native&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\ninto that:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nThen I run locally (on my host, not inside the docker container) the folllowing command:\r\n```\r\n./mvnw clean package -DskipTests -Pnative\r\n```\r\nThen I run the following command:\r\n```\r\njava -Dspring.aot.enabled=true -agentlib:native-image-agent=config-output-dir=/myPathOne -jar target/test-app-one-1.0.0.jar\r\n```\r\nand while the app was running I tested it by calling the simple one endpoint that it has. After that I closed the `test-app-one` app via `CTRL+C`.\r\nAfter that, I checked on my directory: `/myPathOne` (that I declaed) and there were some `.json` files.\r\nI took all those `.json` files and copied them on my project, on the following path:\r\n`src/main/resources/META-INF/native-image`\r\nAfter that, I reverted my code, into:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;build-native&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\nand then I run the `docker-compose.yml` file, by:\r\n```\r\ndocker-compose up --build\r\n```\r\nand then the app started correctly without producing any error.\r\nThe endpoint also works ok.\r\n\r\nI updated my GitHub repository with the new `.json` files that make the app work.","title":"Error when trying to run Java 17 - Spring Boot 3 project with ehcache using GraalVM native image","body":"<p>Thanks to @grekier for suggesting to try the GraalVM native image tracing agent.\nFirstly I changed that part of code:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;build-native&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>into that:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Then I run locally (on my host, not inside the docker container) the folllowing command:</p>\n<pre><code>./mvnw clean package -DskipTests -Pnative\n</code></pre>\n<p>Then I run the following command:</p>\n<pre><code>java -Dspring.aot.enabled=true -agentlib:native-image-agent=config-output-dir=/myPathOne -jar target/test-app-one-1.0.0.jar\n</code></pre>\n<p>and while the app was running I tested it by calling the simple one endpoint that it has. After that I closed the <code>test-app-one</code> app via <code>CTRL+C</code>.\nAfter that, I checked on my directory: <code>/myPathOne</code> (that I declaed) and there were some <code>.json</code> files.\nI took all those <code>.json</code> files and copied them on my project, on the following path:\n<code>src/main/resources/META-INF/native-image</code>\nAfter that, I reverted my code, into:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;build-native&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>and then I run the <code>docker-compose.yml</code> file, by:</p>\n<pre><code>docker-compose up --build\n</code></pre>\n<p>and then the app started correctly without producing any error.\nThe endpoint also works ok.</p>\n<p>I updated my GitHub repository with the new <code>.json</code> files that make the app work.</p>\n"},{"tags":[],"owner":{"account_id":20586516,"reputation":31,"user_id":15111268,"display_name":"Guilherme Pisco"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689956764,"creation_date":1689956764,"answer_id":76739682,"question_id":75201538,"body_markdown":"I think this might also help a few people.\r\n\r\nAdd the classifier as `jakarta` in ehcache dependency, as shown below. Otherwise ehcache will still depend on some `javax` packages.\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n    \t&lt;version&gt;3.10.8&lt;/version&gt;\r\n    \t&lt;classifier&gt;jakarta&lt;/classifier&gt;\r\n    &lt;/dependency&gt;\r\n\r\nhttps://github.com/ehcache/ehcache3/issues/2946#issuecomment-1033796898","title":"Error when trying to run Java 17 - Spring Boot 3 project with ehcache using GraalVM native image","body":"<p>I think this might also help a few people.</p>\n<p>Add the classifier as <code>jakarta</code> in ehcache dependency, as shown below. Otherwise ehcache will still depend on some <code>javax</code> packages.</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n    &lt;version&gt;3.10.8&lt;/version&gt;\n    &lt;classifier&gt;jakarta&lt;/classifier&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://github.com/ehcache/ehcache3/issues/2946#issuecomment-1033796898\" rel=\"nofollow noreferrer\">https://github.com/ehcache/ehcache3/issues/2946#issuecomment-1033796898</a></p>\n"}],"owner":{"account_id":27593689,"reputation":11,"user_id":21060344,"display_name":"John Dillard"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3085,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":75203521,"answer_count":2,"score":0,"last_activity_date":1689956764,"creation_date":1674400588,"question_id":75201538,"body_markdown":"I&#39;m trying to run an app with Java 17 and Spring Boot 3 using GraalVM native image support.\r\nIt&#39;s a very simple app with just a GET endpoint.\r\nThe app uses ehcache and Spring Boot cache to cache the result of one method.\r\nMore specifically, I&#39;m using the following Maven dependencies for cache:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\r\n    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\r\n    &lt;version&gt;3.10.8&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nand here is my ehcache config which seems to be the problem:\r\n\r\n```\r\nimport java.time.Duration;\r\nimport javax.cache.CacheManager;\r\nimport javax.cache.Caching;\r\nimport org.ehcache.config.builders.CacheConfigurationBuilder;\r\nimport org.ehcache.config.builders.ExpiryPolicyBuilder;\r\nimport org.ehcache.config.builders.ResourcePoolsBuilder;\r\nimport org.ehcache.config.units.MemoryUnit;\r\nimport org.ehcache.jsr107.Eh107Configuration;\r\nimport org.springframework.cache.annotation.EnableCaching;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@EnableCaching\r\n@Configuration\r\npublic class EhcacheConfiguration {\r\n\r\n  @Bean\r\n  public CacheManager EhcacheManager() {\r\n    var cachingProvider = Caching.getCachingProvider();\r\n    var cacheManager = cachingProvider.getCacheManager();\r\n\r\n    cacheManager.createCache(&quot;myTestOne&quot;,\r\n        Eh107Configuration.fromEhcacheCacheConfiguration(\r\n            CacheConfigurationBuilder\r\n                .newCacheConfigurationBuilder(Integer.class,\r\n                    MyObject.class,\r\n                    ResourcePoolsBuilder.newResourcePoolsBuilder()\r\n                        .offheap(100, MemoryUnit.MB)\r\n                        .build())\r\n                .withExpiry(ExpiryPolicyBuilder.timeToIdleExpiration(Duration.ofHours(23)))\r\n                .build()\r\n        )\r\n    );\r\n\r\n    return cacheManager;\r\n  }\r\n\r\n}\r\n```\r\n\r\nalso here is the part where I declare the spring native maven plugin:\r\n```\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;build-native&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;phase&gt;package&lt;/phase&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nand I&#39;m trying to build and run the app using docker-compose,\r\nhere is the Dockerfile:\r\n\r\n```\r\nFROM ghcr.io/graalvm/graalvm-ce:ol7-java17-22.3.0 as build\r\n\r\nRUN gu install native-image\r\n\r\nRUN yum install -y zip unzip libstdc++-static freetype-devel\r\n\r\nWORKDIR /app\r\n\r\nCOPY mvnw .\r\nCOPY .mvn .mvn\r\n\r\nCOPY pom.xml .\r\n\r\nRUN chmod +x ./mvnw\r\n\r\nCOPY src src\r\n\r\nRUN ./mvnw clean package -DskipTests -Pnative\r\n\r\nENTRYPOINT [&quot;sh&quot;, &quot;-c&quot; ,&quot;./target/test-app-one&quot;]\r\n```\r\n\r\nand here is the docker-compose.yml file:\r\n\r\n```\r\nservices:\r\n  app-server:\r\n    build:\r\n      context: .\r\n      dockerfile: Dockerfile\r\n    ports:\r\n      - &quot;8080:8080&quot;\r\n    restart: always\r\n```\r\n\r\nI&#39;m trying to start the docker-compose.yml by the following command:\r\n\r\n```\r\ndocker-compose up --build\r\n```\r\n\r\nthe build will finish successfully, but when it will try to start the app (on the last step of the Dockerfile), it will produce the following error.\r\nHere is the full log:\r\n\r\n```\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.559Z  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.559Z  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 39 ms\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.568Z  WARN 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh a\r\nttempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;EhcacheManager&#39;: Instantiation of supplied bean failed\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.569Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.570Z ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\ncache-test-app-one-app-server-1  | \r\ncache-test-app-one-app-server-1  | org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;EhcacheManager&#39;: Instantiation of supplied bean failed\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainInstanceFromSupplier(AbstractAutowireCapableBeanFactory.java:1236) ~[test-app-one\r\n:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1210) ~[test-app-one:6.0.4] \r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1157) ~[test-app-one:6.0.4] \r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561) ~[test-app-one:6.0.4]        \r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[test-app-one:3.0.2]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.TestAppOneApplication.main(TestAppOneApplication.java:10) ~[test-app-one:na]\r\ncache-test-app-one-app-server-1  | Caused by: java.lang.IllegalArgumentException: The serializer: org.ehcache.impl.serialization.PlainJavaSerializer does not have a constructor that takes in a ClassLoader.  \r\ncache-test-app-one-app-server-1  |      at org.ehcache.impl.config.serializer.DefaultSerializationProviderConfiguration.addSerializerFor(DefaultSerializationProviderConfiguration.java:99) ~[test-app-one:3.10\r\n.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.impl.config.serializer.DefaultSerializationProviderConfiguration.addSerializerFor(DefaultSerializationProviderConfiguration.java:75) ~[test-app-one:3.10\r\n.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.createCacheManager(EhcacheCachingProvider.java:148) ~[test-app-one:3.10.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:134) ~[test-app-one:3.10.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:85) ~[test-app-one:3.10.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:194) ~[test-app-one:3.10.8]\r\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:202) ~[test-app-one:3.10.8]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration.EhcacheManager(EhcacheConfiguration.java:22) ~[test-app-one:na]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$0.CGLIB$EhcacheManager$0(&lt;generated&gt;) ~[test-app-one:na]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$2.invoke(&lt;generated&gt;) ~[test-app-one:na]\r\ncache-test-app-one-app-server-1  |      at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[na:na]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$0.EhcacheManager(&lt;generated&gt;) ~[test-app-one:na]\r\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration__BeanDefinitions.lambda$getEhcacheManagerInstanceSupplier$0(EhcacheConfiguration__BeanDefinitions.java:30) ~[na:na]        \r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingFunction.apply(ThrowingFunction.java:63) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingFunction.apply(ThrowingFunction.java:51) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$withGenerator$0(BeanInstanceSupplier.java:173) ~[na:na]\r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:208) ~[na:na]\r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47) ~[test-app-one:6.0.4]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:220) ~[na:na]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:208) ~[na:na]\r\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainInstanceFromSupplier(AbstractAutowireCapableBeanFactory.java:1225) ~[test-app-one\r\n:6.0.4]\r\ncache-test-app-one-app-server-1  |      ... 18 common frames omitted\r\n```\r\n\r\nif I try to remove the caching maven dependencies and the caching functionality, the app will run and start just fine.\r\nIt will also run fine as it is now if I don&#39;t run it as native image.\r\n\r\nHere you can find the full code on my GitHub repository:\r\n&lt;https://github.com/ndil101/cache-test-app-one&gt;","title":"Error when trying to run Java 17 - Spring Boot 3 project with ehcache using GraalVM native image","body":"<p>I'm trying to run an app with Java 17 and Spring Boot 3 using GraalVM native image support.\nIt's a very simple app with just a GET endpoint.\nThe app uses ehcache and Spring Boot cache to cache the result of one method.\nMore specifically, I'm using the following Maven dependencies for cache:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;\n    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;\n    &lt;version&gt;3.10.8&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and here is my ehcache config which seems to be the problem:</p>\n<pre><code>import java.time.Duration;\nimport javax.cache.CacheManager;\nimport javax.cache.Caching;\nimport org.ehcache.config.builders.CacheConfigurationBuilder;\nimport org.ehcache.config.builders.ExpiryPolicyBuilder;\nimport org.ehcache.config.builders.ResourcePoolsBuilder;\nimport org.ehcache.config.units.MemoryUnit;\nimport org.ehcache.jsr107.Eh107Configuration;\nimport org.springframework.cache.annotation.EnableCaching;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@EnableCaching\n@Configuration\npublic class EhcacheConfiguration {\n\n  @Bean\n  public CacheManager EhcacheManager() {\n    var cachingProvider = Caching.getCachingProvider();\n    var cacheManager = cachingProvider.getCacheManager();\n\n    cacheManager.createCache(&quot;myTestOne&quot;,\n        Eh107Configuration.fromEhcacheCacheConfiguration(\n            CacheConfigurationBuilder\n                .newCacheConfigurationBuilder(Integer.class,\n                    MyObject.class,\n                    ResourcePoolsBuilder.newResourcePoolsBuilder()\n                        .offheap(100, MemoryUnit.MB)\n                        .build())\n                .withExpiry(ExpiryPolicyBuilder.timeToIdleExpiration(Duration.ofHours(23)))\n                .build()\n        )\n    );\n\n    return cacheManager;\n  }\n\n}\n</code></pre>\n<p>also here is the part where I declare the spring native maven plugin:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;build-native&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>and I'm trying to build and run the app using docker-compose,\nhere is the Dockerfile:</p>\n<pre><code>FROM ghcr.io/graalvm/graalvm-ce:ol7-java17-22.3.0 as build\n\nRUN gu install native-image\n\nRUN yum install -y zip unzip libstdc++-static freetype-devel\n\nWORKDIR /app\n\nCOPY mvnw .\nCOPY .mvn .mvn\n\nCOPY pom.xml .\n\nRUN chmod +x ./mvnw\n\nCOPY src src\n\nRUN ./mvnw clean package -DskipTests -Pnative\n\nENTRYPOINT [&quot;sh&quot;, &quot;-c&quot; ,&quot;./target/test-app-one&quot;]\n</code></pre>\n<p>and here is the docker-compose.yml file:</p>\n<pre><code>services:\n  app-server:\n    build:\n      context: .\n      dockerfile: Dockerfile\n    ports:\n      - &quot;8080:8080&quot;\n    restart: always\n</code></pre>\n<p>I'm trying to start the docker-compose.yml by the following command:</p>\n<pre><code>docker-compose up --build\n</code></pre>\n<p>the build will finish successfully, but when it will try to start the app (on the last step of the Dockerfile), it will produce the following error.\nHere is the full log:</p>\n<pre><code>cache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.554Z  INFO 1 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.5]\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.559Z  INFO 1 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.559Z  INFO 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 39 ms\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.568Z  WARN 1 --- [           main] w.s.c.ServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh a\nttempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'EhcacheManager': Instantiation of supplied bean failed\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.569Z  INFO 1 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\ncache-test-app-one-app-server-1  | 2023-01-22T14:21:04.570Z ERROR 1 --- [           main] o.s.boot.SpringApplication               : Application run failed\ncache-test-app-one-app-server-1  | \ncache-test-app-one-app-server-1  | org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'EhcacheManager': Instantiation of supplied bean failed\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainInstanceFromSupplier(AbstractAutowireCapableBeanFactory.java:1236) ~[test-app-one\n:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1210) ~[test-app-one:6.0.4] \ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1157) ~[test-app-one:6.0.4] \ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561) ~[test-app-one:6.0.4]        \ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[test-app-one:3.0.2]\ncache-test-app-one-app-server-1  |      at com.test.testappone.TestAppOneApplication.main(TestAppOneApplication.java:10) ~[test-app-one:na]\ncache-test-app-one-app-server-1  | Caused by: java.lang.IllegalArgumentException: The serializer: org.ehcache.impl.serialization.PlainJavaSerializer does not have a constructor that takes in a ClassLoader.  \ncache-test-app-one-app-server-1  |      at org.ehcache.impl.config.serializer.DefaultSerializationProviderConfiguration.addSerializerFor(DefaultSerializationProviderConfiguration.java:99) ~[test-app-one:3.10\n.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.impl.config.serializer.DefaultSerializationProviderConfiguration.addSerializerFor(DefaultSerializationProviderConfiguration.java:75) ~[test-app-one:3.10\n.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.createCacheManager(EhcacheCachingProvider.java:148) ~[test-app-one:3.10.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:134) ~[test-app-one:3.10.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:85) ~[test-app-one:3.10.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:194) ~[test-app-one:3.10.8]\ncache-test-app-one-app-server-1  |      at org.ehcache.jsr107.EhcacheCachingProvider.getCacheManager(EhcacheCachingProvider.java:202) ~[test-app-one:3.10.8]\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration.EhcacheManager(EhcacheConfiguration.java:22) ~[test-app-one:na]\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$0.CGLIB$EhcacheManager$0(&lt;generated&gt;) ~[test-app-one:na]\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$2.invoke(&lt;generated&gt;) ~[test-app-one:na]\ncache-test-app-one-app-server-1  |      at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:331) ~[na:na]\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration$$SpringCGLIB$$0.EhcacheManager(&lt;generated&gt;) ~[test-app-one:na]\ncache-test-app-one-app-server-1  |      at com.test.testappone.EhcacheConfiguration__BeanDefinitions.lambda$getEhcacheManagerInstanceSupplier$0(EhcacheConfiguration__BeanDefinitions.java:30) ~[na:na]        \ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingFunction.apply(ThrowingFunction.java:63) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingFunction.apply(ThrowingFunction.java:51) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$withGenerator$0(BeanInstanceSupplier.java:173) ~[na:na]\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:208) ~[na:na]\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47) ~[test-app-one:6.0.4]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:220) ~[na:na]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:208) ~[na:na]\ncache-test-app-one-app-server-1  |      at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainInstanceFromSupplier(AbstractAutowireCapableBeanFactory.java:1225) ~[test-app-one\n:6.0.4]\ncache-test-app-one-app-server-1  |      ... 18 common frames omitted\n</code></pre>\n<p>if I try to remove the caching maven dependencies and the caching functionality, the app will run and start just fine.\nIt will also run fine as it is now if I don't run it as native image.</p>\n<p>Here you can find the full code on my GitHub repository:\n<a href=\"https://github.com/ndil101/cache-test-app-one\" rel=\"nofollow noreferrer\">https://github.com/ndil101/cache-test-app-one</a></p>\n"},{"tags":["java","mariadb"],"comments":[{"owner":{"account_id":29026558,"reputation":11,"user_id":22234575,"display_name":"Eric"},"score":0,"creation_date":1689902493,"post_id":76697232,"comment_id":135282339,"body_markdown":"Thank you for your instruction to improve the quality of my question. I edited the question trying to fullfil the aspects you mentioned.","body":"Thank you for your instruction to improve the quality of my question. I edited the question trying to fullfil the aspects you mentioned."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1689955795,"post_id":76697232,"comment_id":135290821,"body_markdown":"Is this the error message you get when you try to connect to the MariaDB server from your local host or do you get this message when you deploy your application on the layershift host? Usually the database provider does not give access to external IPs to their database, that would be a security risk. That&#39;s why you can&#39;t even reach the host from &quot;locally&quot;.","body":"Is this the error message you get when you try to connect to the MariaDB server from your local host or do you get this message when you deploy your application on the layershift host? Usually the database provider does not give access to external IPs to their database, that would be a security risk. That&#39;s why you can&#39;t even reach the host from &quot;locally&quot;."},{"owner":{"account_id":29026558,"reputation":11,"user_id":22234575,"display_name":"Eric"},"score":0,"creation_date":1690094359,"post_id":76697232,"comment_id":135303198,"body_markdown":"The console in eclipse shows this error:\njava.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=node495323-studiquizv3.j.layershift.co.uk)(port=3306)(type=primary). Connection timed out: no further information\nwhen I run program locally, which begins with the initialization of the database (Class.forName(&quot;org.mariadb.jdbc.Driver&quot;); and creation of the tables and entries needed from beginning).\nWhen I deploy the .war-file, the deployment process seems to work and I can open the website, but inputs needing the database for checking don&#39;t work.","body":"The console in eclipse shows this error: java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=node495323-studiquizv3.j.layershift.co.uk&zwnj;&#8203;)(port=3306)(type=pr&zwnj;&#8203;imary). Connection timed out: no further information when I run program locally, which begins with the initialization of the database (Class.forName(&quot;org.mariadb.jdbc.Driver&quot;); and creation of the tables and entries needed from beginning). When I deploy the .war-file, the deployment process seems to work and I can open the website, but inputs needing the database for checking don&#39;t work."},{"owner":{"account_id":29026558,"reputation":11,"user_id":22234575,"display_name":"Eric"},"score":0,"creation_date":1690094859,"post_id":76697232,"comment_id":135303242,"body_markdown":"When I run the program after deploying, I don&#39;t have any console to get debugging or logging information. I have tried to use Log4j but couldn&#39;t bring it to work.\n\nIf the database provider doesn&#39;t give access to external IPs, I understand that running the program locally doesn&#39;t let it connect to the database. But then it should work for the version I deployed on the layershift server, shouldn&#39;t it?","body":"When I run the program after deploying, I don&#39;t have any console to get debugging or logging information. I have tried to use Log4j but couldn&#39;t bring it to work.  If the database provider doesn&#39;t give access to external IPs, I understand that running the program locally doesn&#39;t let it connect to the database. But then it should work for the version I deployed on the layershift server, shouldn&#39;t it?"},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1690100740,"post_id":76697232,"comment_id":135303785,"body_markdown":"When it doesn&#39;t work on the layershift servers as well, you have to check the error messages to see the issue. It might be a different problem, which we don&#39;t see. You have to figure out how to get logging to work and/or how to get any error/exception messages. Depending on your setup, the error/exception messages might get logged in a general error file of the server (assuming your don&#39;t catch the exceptions yourself). Or you use any logging frameworks which are available to java like slf4j+logback or log4j as you already mentioned.","body":"When it doesn&#39;t work on the layershift servers as well, you have to check the error messages to see the issue. It might be a different problem, which we don&#39;t see. You have to figure out how to get logging to work and/or how to get any error/exception messages. Depending on your setup, the error/exception messages might get logged in a general error file of the server (assuming your don&#39;t catch the exceptions yourself). Or you use any logging frameworks which are available to java like slf4j+logback or log4j as you already mentioned."}],"owner":{"account_id":29026558,"reputation":11,"user_id":22234575,"display_name":"Eric"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689955406,"creation_date":1689494348,"question_id":76697232,"body_markdown":"I&#39;m using layershift for the deployment of a .war-file (program written in Java using eclipse-19), but the connection to the database doesn&#39;t work. So I&#39;m trying to run the program locally and connect to the database lying on the layershift server (using a local database works out without problems).\r\n\r\nI have added the connector mariadb-java-client-3.1.4.jar to the projects classpath as well as the tomcat/lib.\r\n\r\n    Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n\r\nWhile configuring the layershift server I choose the MariaDB version I used when I ran the program locally, 10.4.28.\r\n\r\n    public String URLAbrufen() {\r\n\r\n\t    //String server = &quot;mysql://localhost&quot;;\r\n\t    String server = &quot;mariadb://node495323-studiquizv3.j.layershift.co.uk&quot;;\r\n\t    String port = &quot;3306&quot;;\r\n\t    String database = &quot;studiquiz&quot;;\t    \r\n\t    String URL = &quot;jdbc:&quot; + server + &quot;:&quot; + port + &quot;/&quot; + database;\r\n\t    System.out.println(URL);\r\n\r\n    \treturn URL;    \t \t\r\n    }\r\n\r\ncreates this URL:\r\n*jdbc:mariadb://node495323-studiquizv3.j.layershift.co.uk:3306/studiquiz*\r\n\r\nWith which I try to connect the database like this:\r\n\r\n*Connection connection = DriverManager.getConnection(url, BenutzerDB, PasswortDB);*\r\n\r\nusing the credentials provided by layershift while setting up the server.\r\n\r\nIf I run the programm, the following exception is thrown:\r\n*java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=node495323-studiquizv3.j.layershift.co.uk)(port=3306)(type=primary). Connection timed out: no further information*\r\n\r\nThe connection to the database on the layershift server doesn&#39;t seem to work, how can I establish this connection successfully?\r\n\r\nMinimal reproducible example of my code:\r\n\r\n    package studiquiz_test_p1;\r\n    \r\n    import java.sql.*;\r\n    \r\n    public class main {\r\n    \t\r\n        public static void main(String[] args) {\r\n    \r\n    \t\ttry {\r\n    \t\t\tClass.forName(&quot;org.mariadb.jdbc.Driver&quot;);\r\n    \t\t\t\r\n    \t\t    String server = &quot;mariadb://node495323-studiquizv3.j.layershift.co.uk&quot;;\r\n    \t\t    String port = &quot;3306&quot;;\r\n    \t\t    String database = &quot;studiquiz&quot;;\t    \r\n    \t\t    String URL = &quot;jdbc:&quot; + server + &quot;:&quot; + port + &quot;/&quot; + database;\r\n    \t\t    \r\n    \t\t\tString BenutzerDB = &quot;root&quot;;\r\n    \t\t\tString PasswortDB = &quot;password&quot;;\t\r\n    \t\t\t\r\n    \t\t\tConnection connection = DriverManager.getConnection(URL, BenutzerDB, PasswortDB);            \r\n    \t\t\t//Statement statement = connection.createStatement();\r\n    \t\t\t\r\n    \t\t\tSystem.out.println(&quot;Connection successful.&quot;);\t\t\r\n    \t\t} catch (ClassNotFoundException e) {\r\n    \t\t\tSystem.out.println(&quot;Connection failed [ClassNotFoundException].&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t} catch (SQLException e) {\r\n    \t\t\tSystem.out.println(&quot;Connection failed [SQLException].&quot;);\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nThank you for your support!\r\n","title":"Connection to database fails using layershift and MariaDB","body":"<p>I'm using layershift for the deployment of a .war-file (program written in Java using eclipse-19), but the connection to the database doesn't work. So I'm trying to run the program locally and connect to the database lying on the layershift server (using a local database works out without problems).</p>\n<p>I have added the connector mariadb-java-client-3.1.4.jar to the projects classpath as well as the tomcat/lib.</p>\n<pre><code>Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\n</code></pre>\n<p>While configuring the layershift server I choose the MariaDB version I used when I ran the program locally, 10.4.28.</p>\n<pre><code>public String URLAbrufen() {\n\n    //String server = &quot;mysql://localhost&quot;;\n    String server = &quot;mariadb://node495323-studiquizv3.j.layershift.co.uk&quot;;\n    String port = &quot;3306&quot;;\n    String database = &quot;studiquiz&quot;;      \n    String URL = &quot;jdbc:&quot; + server + &quot;:&quot; + port + &quot;/&quot; + database;\n    System.out.println(URL);\n\n    return URL;         \n}\n</code></pre>\n<p>creates this URL:\n<em>jdbc:mariadb://node495323-studiquizv3.j.layershift.co.uk:3306/studiquiz</em></p>\n<p>With which I try to connect the database like this:</p>\n<p><em>Connection connection = DriverManager.getConnection(url, BenutzerDB, PasswortDB);</em></p>\n<p>using the credentials provided by layershift while setting up the server.</p>\n<p>If I run the programm, the following exception is thrown:\n<em>java.sql.SQLNonTransientConnectionException: Socket fail to connect to host:address=(host=node495323-studiquizv3.j.layershift.co.uk)(port=3306)(type=primary). Connection timed out: no further information</em></p>\n<p>The connection to the database on the layershift server doesn't seem to work, how can I establish this connection successfully?</p>\n<p>Minimal reproducible example of my code:</p>\n<pre><code>package studiquiz_test_p1;\n\nimport java.sql.*;\n\npublic class main {\n    \n    public static void main(String[] args) {\n\n        try {\n            Class.forName(&quot;org.mariadb.jdbc.Driver&quot;);\n            \n            String server = &quot;mariadb://node495323-studiquizv3.j.layershift.co.uk&quot;;\n            String port = &quot;3306&quot;;\n            String database = &quot;studiquiz&quot;;      \n            String URL = &quot;jdbc:&quot; + server + &quot;:&quot; + port + &quot;/&quot; + database;\n            \n            String BenutzerDB = &quot;root&quot;;\n            String PasswortDB = &quot;password&quot;; \n            \n            Connection connection = DriverManager.getConnection(URL, BenutzerDB, PasswortDB);            \n            //Statement statement = connection.createStatement();\n            \n            System.out.println(&quot;Connection successful.&quot;);       \n        } catch (ClassNotFoundException e) {\n            System.out.println(&quot;Connection failed [ClassNotFoundException].&quot;);\n            e.printStackTrace();\n        } catch (SQLException e) {\n            System.out.println(&quot;Connection failed [SQLException].&quot;);\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Thank you for your support!</p>\n"},{"tags":["java","data-structures","hashmap"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689941669,"post_id":76737851,"comment_id":135287895,"body_markdown":"[I then switched int with long but I am getting the exception error.](https://technojeeves.com/index.php/aliasjava1/17-errors)","body":"<a href=\"https://technojeeves.com/index.php/aliasjava1/17-errors\" rel=\"nofollow noreferrer\">I then switched int with long but I am getting the exception error.</a>"}],"answers":[{"comments":[{"owner":{"account_id":28733733,"reputation":3,"user_id":22005141,"display_name":"Naman Bajaj"},"score":0,"creation_date":1689946718,"post_id":76738237,"comment_id":135288968,"body_markdown":"I have used longValue() itself in my code, it doesn&#39;t work.","body":"I have used longValue() itself in my code, it doesn&#39;t work."}],"tags":[],"owner":{"account_id":10728079,"reputation":1543,"user_id":7895005,"display_name":"Pramod H G"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689944388,"creation_date":1689944388,"answer_id":76738237,"question_id":76737851,"body_markdown":"To convert **Integer** to **long** use the **longValue()** method available in the Integer class.\r\nWhich returns the value of the Integer as a long after a widening primitive conversion.\r\n\r\nExample:\r\n\r\n     Integer intVal = 10;\r\n\r\n     long longVal = intVal.longValue();","title":"Exception in converting Integer wrapper class to primitive long data type","body":"<p>To convert <strong>Integer</strong> to <strong>long</strong> use the <strong>longValue()</strong> method available in the Integer class.\nWhich returns the value of the Integer as a long after a widening primitive conversion.</p>\n<p>Example:</p>\n<pre><code> Integer intVal = 10;\n\n long longVal = intVal.longValue();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":28733733,"reputation":3,"user_id":22005141,"display_name":"Naman Bajaj"},"score":0,"creation_date":1690008718,"post_id":76739196,"comment_id":135295773,"body_markdown":"Thanks a lot, it worked. Also, I was getting the stack overflow error earlier when I was dynamically allocating the HashMap at the start of the function. It disappeared when I removed that allocation, but I&#39;ll keep the tip in mind. Thanks again!","body":"Thanks a lot, it worked. Also, I was getting the stack overflow error earlier when I was dynamically allocating the HashMap at the start of the function. It disappeared when I removed that allocation, but I&#39;ll keep the tip in mind. Thanks again!"}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689955055,"creation_date":1689952348,"answer_id":76739196,"question_id":76737851,"body_markdown":"The problem is you do `int + int` which can be `long`. You should keep in the `Map` `long` value insted of `int`.\r\n\r\n```java\r\npublic static long gridProblem(int m, int n, Map&lt;String, Long&gt; map) {\r\n    if (n == 0 || m == 0) return 0;\r\n    if (n == 1 &amp;&amp; m == 1) return 1;\r\n\r\n    String s = m + &quot;,&quot; + n;\r\n\r\n    if (map.containsKey(s)) return map.get(s);\r\n\r\n    long nth = gridProblem(m - 1, n, map) + gridProblem(m, n - 1, map);\r\n    map.put(s, nth);\r\n    return nth;\r\n}\r\n\r\npublic static void main(String... args) {\r\n    Map&lt;String, Long&gt; h = new HashMap&lt;&gt;();\r\n    System.out.println(gridProblem(11, 8, h));\r\n}\r\n```\r\n\r\n***P.S.** I know that using recursion is quite intuitive and simple, but only for test tasks. For big input, you can get `StackOverflowError`. It&#39;s better to use iterations instead. Check this out!*\r\n```java\r\npublic static long gridProblem(int rows, int cols) {\r\n    int[][] b = new int[rows][cols];\r\n    long sum = 0;\r\n\r\n    for (int row = 0; row &lt; rows; row++) {\r\n        for (int col = 0; col &lt; cols; col++) {\r\n            if (row == 0 || col == 0) b[row][col] = 0;\r\n            else if (row == 1 &amp;&amp; col == 1) b[row][col] = 1;\r\n            else b[row][col] = b[row][col - 1] + b[row - 1][col];\r\n\r\n            sum += b[row][col];\r\n        }\r\n    }\r\n\r\n    return sum;\r\n}\r\n````","title":"Exception in converting Integer wrapper class to primitive long data type","body":"<p>The problem is you do <code>int + int</code> which can be <code>long</code>. You should keep in the <code>Map</code> <code>long</code> value insted of <code>int</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static long gridProblem(int m, int n, Map&lt;String, Long&gt; map) {\n    if (n == 0 || m == 0) return 0;\n    if (n == 1 &amp;&amp; m == 1) return 1;\n\n    String s = m + &quot;,&quot; + n;\n\n    if (map.containsKey(s)) return map.get(s);\n\n    long nth = gridProblem(m - 1, n, map) + gridProblem(m, n - 1, map);\n    map.put(s, nth);\n    return nth;\n}\n\npublic static void main(String... args) {\n    Map&lt;String, Long&gt; h = new HashMap&lt;&gt;();\n    System.out.println(gridProblem(11, 8, h));\n}\n</code></pre>\n<p><em><strong>P.S.</strong> I know that using recursion is quite intuitive and simple, but only for test tasks. For big input, you can get <code>StackOverflowError</code>. It's better to use iterations instead. Check this out!</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>public static long gridProblem(int rows, int cols) {\n    int[][] b = new int[rows][cols];\n    long sum = 0;\n\n    for (int row = 0; row &lt; rows; row++) {\n        for (int col = 0; col &lt; cols; col++) {\n            if (row == 0 || col == 0) b[row][col] = 0;\n            else if (row == 1 &amp;&amp; col == 1) b[row][col] = 1;\n            else b[row][col] = b[row][col - 1] + b[row - 1][col];\n\n            sum += b[row][col];\n        }\n    }\n\n    return sum;\n}\n</code></pre>\n"}],"owner":{"account_id":28733733,"reputation":3,"user_id":22005141,"display_name":"Naman Bajaj"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76739196,"answer_count":2,"score":0,"last_activity_date":1689955055,"creation_date":1689941195,"question_id":76737851,"body_markdown":"I am writing a simple program related to the grid problem using Dynamic programming where I have used HashMap. I used integer as the return type and it worked just fine but for smaller values, when the values of rows of columns is big enough for the answer to be many digits long then the answer isn&#39;t returned properly.\r\n\r\nI then switched int with long but I am getting the exception error. I have tried various ways to sort this out but it&#39;s still not getting passed. I was easily able to convert the Integer object to int value, but here I can&#39;t do it via any method.\r\n\r\nAre there any alternative ways to sort this out?\r\n\r\n    import java.util.*;\r\n\r\n\r\n    public class Grid{\r\n\t\r\n    public static long grid_problem(int m, int n, HashMap h)\r\n    {   \r\n\r\n    // Convert the integers to string so as to create a unique key for every combination\r\n\r\n\tString s1 = Integer.toString(m);\r\n\tString s2 = Integer.toString(n);\r\n\tString s=s1 + &#39;,&#39; + s2;\r\n\tif(n==0||m==0)\r\n\t{\r\n\t\treturn 0; // Base Case\r\n\t}\r\n\telse if(n==1&amp;&amp;m==1)\r\n\t{\r\n\t\treturn 1; // Base Case\r\n\t}\r\n\telse if(h.containsKey(s)) // If the value is already stored\r\n\t{\r\n\t\t \r\n\t\tInteger i = (Integer) h.get(s); // This step works fine \r\n\t\tlong l = i.longValue();         // I can&#39;t find any way to cast Integer to Long or     \r\n\t\treturn l;                          int to long.\r\n\t}\r\n\telse\r\n\t{\r\n\t        long nth=grid_problem(m-1,n,h) + grid_problem(m,n-1,h); \r\n\t\th.put(s,nth);\r\n\t\treturn nth; // return both halves of the binary tree\r\n\t}\r\n    }\r\n\r\n    public static void main(String args[])\r\n    {\r\n\t HashMap&lt;String, Integer&gt; h = new HashMap&lt;&gt;();\r\n\t System.out.println(grid_problem(11,8,h));\r\n    }\r\n    }","title":"Exception in converting Integer wrapper class to primitive long data type","body":"<p>I am writing a simple program related to the grid problem using Dynamic programming where I have used HashMap. I used integer as the return type and it worked just fine but for smaller values, when the values of rows of columns is big enough for the answer to be many digits long then the answer isn't returned properly.</p>\n<p>I then switched int with long but I am getting the exception error. I have tried various ways to sort this out but it's still not getting passed. I was easily able to convert the Integer object to int value, but here I can't do it via any method.</p>\n<p>Are there any alternative ways to sort this out?</p>\n<pre><code>import java.util.*;\n\n\npublic class Grid{\n\npublic static long grid_problem(int m, int n, HashMap h)\n{   \n\n// Convert the integers to string so as to create a unique key for every combination\n\nString s1 = Integer.toString(m);\nString s2 = Integer.toString(n);\nString s=s1 + ',' + s2;\nif(n==0||m==0)\n{\n    return 0; // Base Case\n}\nelse if(n==1&amp;&amp;m==1)\n{\n    return 1; // Base Case\n}\nelse if(h.containsKey(s)) // If the value is already stored\n{\n     \n    Integer i = (Integer) h.get(s); // This step works fine \n    long l = i.longValue();         // I can't find any way to cast Integer to Long or     \n    return l;                          int to long.\n}\nelse\n{\n        long nth=grid_problem(m-1,n,h) + grid_problem(m,n-1,h); \n    h.put(s,nth);\n    return nth; // return both halves of the binary tree\n}\n}\n\npublic static void main(String args[])\n{\n HashMap&lt;String, Integer&gt; h = new HashMap&lt;&gt;();\n System.out.println(grid_problem(11,8,h));\n}\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","gradle","resources"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1689895048,"post_id":76734143,"comment_id":135281729,"body_markdown":"Are these files in the assets folder?  If not, they won&#39;t be accessible as assets.","body":"Are these files in the assets folder?  If not, they won&#39;t be accessible as assets."},{"owner":{"account_id":5784158,"reputation":312,"user_id":4563960,"display_name":"Lucas Sousa"},"score":0,"creation_date":1689899933,"post_id":76734143,"comment_id":135282152,"body_markdown":"The files is in a arbitrary directory. In my example of the question, inside a neighbor module. Is necessary the folder have the name &quot;assets&quot;? This example something like that: https://stackoverflow.com/a/62693361/4563960. Other related example: https://stackoverflow.com/a/68246046/4563960","body":"The files is in a arbitrary directory. In my example of the question, inside a neighbor module. Is necessary the folder have the name &quot;assets&quot;? This example something like that: <a href=\"https://stackoverflow.com/a/62693361/4563960\">stackoverflow.com/a/62693361/4563960</a>. Other related example: <a href=\"https://stackoverflow.com/a/68246046/4563960\">stackoverflow.com/a/68246046/4563960</a>"},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1689924363,"post_id":76734143,"comment_id":135284692,"body_markdown":"The files in your directory on your PC have no bearing in the format of the APK.  None of those files are directly copied over.  The kotlin and java files are compiled and combined into a couple of .dex files.  The resources are similarly combined and compiled.  Anything else in the src directory would just be dropped-  except for the files in the assets directory, which will be put into the special assets section of the APK.  Which is the only data that AssetManager (like you use above) can access.","body":"The files in your directory on your PC have no bearing in the format of the APK.  None of those files are directly copied over.  The kotlin and java files are compiled and combined into a couple of .dex files.  The resources are similarly combined and compiled.  Anything else in the src directory would just be dropped-  except for the files in the assets directory, which will be put into the special assets section of the APK.  Which is the only data that AssetManager (like you use above) can access."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1689924404,"post_id":76734143,"comment_id":135284698,"body_markdown":"So yes, if you want to put a file into your apk, it must be in an assets directory.  The srcSet stuff is a way to include other Java/Kotlin code, not files.  Which is why it&#39;s called sourceSets-  it&#39;s sets of source code.  Not of random files.","body":"So yes, if you want to put a file into your apk, it must be in an assets directory.  The srcSet stuff is a way to include other Java/Kotlin code, not files.  Which is why it&#39;s called sourceSets-  it&#39;s sets of source code.  Not of random files."},{"owner":{"account_id":5784158,"reputation":312,"user_id":4563960,"display_name":"Lucas Sousa"},"score":0,"creation_date":1689954655,"post_id":76734143,"comment_id":135290614,"body_markdown":"Hi Gabe, I just droped an answer detailing how I achieved that. For now, using my custom directory to hold general files seems to work on both android and jvm modules. Feel free to point me something to improve it!","body":"Hi Gabe, I just droped an answer detailing how I achieved that. For now, using my custom directory to hold general files seems to work on both android and jvm modules. Feel free to point me something to improve it!"}],"answers":[{"tags":[],"owner":{"account_id":5784158,"reputation":312,"user_id":4563960,"display_name":"Lucas Sousa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689954889,"creation_date":1689954567,"answer_id":76739454,"question_id":76734143,"body_markdown":"After the unfortunate response &quot;not possible to use arbitrary directory&quot; as holder for common files to be accesed by android and/or other kotlin modules I started to study a bit about Gradle Source Sets possibilities.\r\n\r\nAfter that I found that we make a module look and use some folder as resources/assets (general files, not source code) by doing this in its `build.gradle.kts` file:\r\n\r\n```kotlin\r\nandroid {\r\n  //...\r\n\r\n  // get access to configs about the &quot;main&quot; source set\r\n  sourceSets.getByName(&quot;main&quot;) {\r\n    // creates an empty directories paths holder\r\n    val allNeededDirectories = mutableListOf&lt;String&gt;()\r\n\r\n    // adds all current existing defined dirs of the gradle defaults\r\n    allNeededDirectories.addAll(assets.srcDirs.map { it.toString() })\r\n    \r\n    // adds a custom and user-created directory\r\n    allNeededDirectories += project\r\n      .layout\r\n      .projectDirectory\r\n      .dir(&quot;../my_awsome_custom_directory&quot;)\r\n      .toString()\r\n    \r\n    // defines the dirs list above to be the main [assets] srcDirs\r\n    assets.setSrcDirs(allNeededDirectories)\r\n  }\r\n}\r\n```\r\n\r\nNote to the `../` prefix to access `my_awsome_custom_directory`, which is in a previous level from the current gradle module/sub project.\r\n\r\nAlso, note to the `android` block. This means that external general files (e.g.: fonts, binaries) are treated as &quot;assets&quot;, while &quot;resources&quot; are pre-indexed files, through the `R` class. For this reason, inside android activity to access a file named &quot;`my_file.test`&quot; from the `my_awsome_custom_directory` we can do:\r\n\r\n```kotlin\r\noverride fun onCreate(savedInstanceState: Bundle?) {\r\n  val resultStreamOfFile = assets.open(&quot;my_file.test&quot;)\r\n  println(resultStreamOfFile.readText())\r\n}\r\n```\r\n\r\nIn addition, when setting the custom `my_awsome_custom_directory` to be acceced by other module different of android, e.g., pure Jvm, is very similar:\r\n\r\n```kotlin\r\nkotlin {\r\n  //...\r\n\r\n  // get access to configs about the &quot;main&quot; source set\r\n  sourceSets.getByName(&quot;main&quot;) {\r\n    // creates an empty directories paths holder\r\n    val allNeededDirectories = mutableListOf&lt;String&gt;()\r\n\r\n    // adds all current existing defined dirs of the gradle defaults\r\n    allNeededDirectories.addAll(resources.srcDirs.map { it.toString() })\r\n    \r\n    // adds a custom and user-created directory\r\n    allNeededDirectories += project\r\n      .layout\r\n      .projectDirectory\r\n      .dir(&quot;../my_awsome_custom_directory&quot;)\r\n      .toString()\r\n    \r\n    // defines the dirs list above to be the main [resources] srcDirs\r\n    resources.setSrcDirs(allNeededDirectories)\r\n  }\r\n}\r\n```\r\n\r\nThe difference is that we need to define the paths to `resources` instead of `assets`. This is due to the `assets` is only provided by the `android` plugin, when the `kotlin(&quot;jvm&quot;)` provides `resources`.\r\n\r\nBy the end, all experiments above I made in a application of mine and is working well. However, if some point of my explanations are messy or if this could not work well in a specific scnenario, please, feel free to correct then!","title":"How to access files from some folder inside an android application module?","body":"<p>After the unfortunate response &quot;not possible to use arbitrary directory&quot; as holder for common files to be accesed by android and/or other kotlin modules I started to study a bit about Gradle Source Sets possibilities.</p>\n<p>After that I found that we make a module look and use some folder as resources/assets (general files, not source code) by doing this in its <code>build.gradle.kts</code> file:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>android {\n  //...\n\n  // get access to configs about the &quot;main&quot; source set\n  sourceSets.getByName(&quot;main&quot;) {\n    // creates an empty directories paths holder\n    val allNeededDirectories = mutableListOf&lt;String&gt;()\n\n    // adds all current existing defined dirs of the gradle defaults\n    allNeededDirectories.addAll(assets.srcDirs.map { it.toString() })\n    \n    // adds a custom and user-created directory\n    allNeededDirectories += project\n      .layout\n      .projectDirectory\n      .dir(&quot;../my_awsome_custom_directory&quot;)\n      .toString()\n    \n    // defines the dirs list above to be the main [assets] srcDirs\n    assets.setSrcDirs(allNeededDirectories)\n  }\n}\n</code></pre>\n<p>Note to the <code>../</code> prefix to access <code>my_awsome_custom_directory</code>, which is in a previous level from the current gradle module/sub project.</p>\n<p>Also, note to the <code>android</code> block. This means that external general files (e.g.: fonts, binaries) are treated as &quot;assets&quot;, while &quot;resources&quot; are pre-indexed files, through the <code>R</code> class. For this reason, inside android activity to access a file named &quot;<code>my_file.test</code>&quot; from the <code>my_awsome_custom_directory</code> we can do:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>override fun onCreate(savedInstanceState: Bundle?) {\n  val resultStreamOfFile = assets.open(&quot;my_file.test&quot;)\n  println(resultStreamOfFile.readText())\n}\n</code></pre>\n<p>In addition, when setting the custom <code>my_awsome_custom_directory</code> to be acceced by other module different of android, e.g., pure Jvm, is very similar:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>kotlin {\n  //...\n\n  // get access to configs about the &quot;main&quot; source set\n  sourceSets.getByName(&quot;main&quot;) {\n    // creates an empty directories paths holder\n    val allNeededDirectories = mutableListOf&lt;String&gt;()\n\n    // adds all current existing defined dirs of the gradle defaults\n    allNeededDirectories.addAll(resources.srcDirs.map { it.toString() })\n    \n    // adds a custom and user-created directory\n    allNeededDirectories += project\n      .layout\n      .projectDirectory\n      .dir(&quot;../my_awsome_custom_directory&quot;)\n      .toString()\n    \n    // defines the dirs list above to be the main [resources] srcDirs\n    resources.setSrcDirs(allNeededDirectories)\n  }\n}\n</code></pre>\n<p>The difference is that we need to define the paths to <code>resources</code> instead of <code>assets</code>. This is due to the <code>assets</code> is only provided by the <code>android</code> plugin, when the <code>kotlin(&quot;jvm&quot;)</code> provides <code>resources</code>.</p>\n<p>By the end, all experiments above I made in a application of mine and is working well. However, if some point of my explanations are messy or if this could not work well in a specific scnenario, please, feel free to correct then!</p>\n"}],"owner":{"account_id":5784158,"reputation":312,"user_id":4563960,"display_name":"Lucas Sousa"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76739454,"answer_count":1,"score":0,"last_activity_date":1689954889,"creation_date":1689893303,"question_id":76734143,"body_markdown":"Consider a gradle project that contains 3 sub-projects:\r\n\r\n```\r\nroot\r\n    |\r\n    |&gt; androidModule\r\n    |&gt; coreModule\r\n    |&gt; desktopModule\r\n```\r\n\r\nI decided to centralize some project files (e.g. fonts, binaries) inside the `coreModule` but I can&#39;t load then inside the `androidModule`. This was chosen once those files are being used either in `androidModule`, either in `desktopModule`, as well.\r\n\r\nI tried a lot of ways of declaring custom `sourceSets` in the `androidModule/build.gradle.kts` but I still can&#39;t access the files. One attempt I tried so far:\r\n\r\n```kotlin\r\nandroid {\r\n  sourceSets[&quot;main&quot;].resources {\r\n    srcDirs(arrayOf(&quot;coreModule/example/targeted/folder&quot;, &quot;other/path&quot;, &quot;etc&quot;))\r\n  }\r\n}\r\n```\r\n\r\nAlso, my attempt to load the file inside some android activity code is:\r\n\r\n```kotlin\r\nval resultStream = assets.open(&quot;file-from-the-custom-folder&quot;) //no such file or directory here\r\nprintln(resultStream)\r\n```\r\n\r\nThen, how to deal with that multiple resources directories in android gradle module?\r\n\r\nI was trying to avoid centralize the files to be in the androidModule because I think they can be accessed by the other modules easly if living in that module, by the way I also really think that the files should be inside the core module, making this place more consistent about locations/pathing. What the best way to handle this?","title":"How to access files from some folder inside an android application module?","body":"<p>Consider a gradle project that contains 3 sub-projects:</p>\n<pre><code>root\n    |\n    |&gt; androidModule\n    |&gt; coreModule\n    |&gt; desktopModule\n</code></pre>\n<p>I decided to centralize some project files (e.g. fonts, binaries) inside the <code>coreModule</code> but I can't load then inside the <code>androidModule</code>. This was chosen once those files are being used either in <code>androidModule</code>, either in <code>desktopModule</code>, as well.</p>\n<p>I tried a lot of ways of declaring custom <code>sourceSets</code> in the <code>androidModule/build.gradle.kts</code> but I still can't access the files. One attempt I tried so far:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>android {\n  sourceSets[&quot;main&quot;].resources {\n    srcDirs(arrayOf(&quot;coreModule/example/targeted/folder&quot;, &quot;other/path&quot;, &quot;etc&quot;))\n  }\n}\n</code></pre>\n<p>Also, my attempt to load the file inside some android activity code is:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val resultStream = assets.open(&quot;file-from-the-custom-folder&quot;) //no such file or directory here\nprintln(resultStream)\n</code></pre>\n<p>Then, how to deal with that multiple resources directories in android gradle module?</p>\n<p>I was trying to avoid centralize the files to be in the androidModule because I think they can be accessed by the other modules easly if living in that module, by the way I also really think that the files should be inside the core module, making this place more consistent about locations/pathing. What the best way to handle this?</p>\n"},{"tags":["java","kotlin","inputstream","fileinputstream","oscilloscope"],"comments":[{"owner":{"account_id":2574017,"reputation":4150,"user_id":2232127,"accept_rate":100,"display_name":"JensV"},"score":1,"creation_date":1689948854,"post_id":76738748,"comment_id":135289425,"body_markdown":"That doesn&#39;t sound like a standard file format, we would probably need to know which oscilloscope this is and get related documentation to that. A sample of the file could also prove helpful","body":"That doesn&#39;t sound like a standard file format, we would probably need to know which oscilloscope this is and get related documentation to that. A sample of the file could also prove helpful"},{"owner":{"account_id":2353259,"reputation":163,"user_id":2061650,"accept_rate":67,"display_name":"sergii.gudym"},"score":0,"creation_date":1689950149,"post_id":76738748,"comment_id":135289725,"body_markdown":"I don&#39;t have an app. A friend sent me a file. There are several formats, now I looked, there is an option *.mt4","body":"I don&#39;t have an app. A friend sent me a file. There are several formats, now I looked, there is an option *.mt4"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689950257,"post_id":76738748,"comment_id":135289739,"body_markdown":"Maybe your friend can give you enough information about the oscilloscope so that you can find out how to parse the file.","body":"Maybe your friend can give you enough information about the oscilloscope so that you can find out how to parse the file."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689950747,"post_id":76738748,"comment_id":135289831,"body_markdown":"Why not post a link to the file?","body":"Why not post a link to the file?"},{"owner":{"account_id":2163224,"reputation":6602,"user_id":1916917,"accept_rate":60,"display_name":"Holloway"},"score":0,"creation_date":1689951843,"post_id":76738748,"comment_id":135290062,"body_markdown":"Can you edit the question with first 20 bytes or so (`print(list(open(&#39;filename&#39;, &#39;rb&#39;).read(20)))` in python). I&#39;d rather not be opening random files from dropbox.","body":"Can you edit the question with first 20 bytes or so (<code>print(list(open(&#39;filename&#39;, &#39;rb&#39;).read(20)))</code> in python). I&#39;d rather not be opening random files from dropbox."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689952276,"post_id":76738748,"comment_id":135290154,"body_markdown":"So how did the &quot;weird&quot; stuff manifest itself? If that&#39;s a file of 64 bit values, it could be big-endian *or* little-endian","body":"So how did the &quot;weird&quot; stuff manifest itself? If that&#39;s a file of 64 bit values, it could be big-endian <i>or</i> little-endian"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689953270,"post_id":76738748,"comment_id":135290334,"body_markdown":"First eight values as doubles, little-endian: `-4.56, -4.61, -4.66, -4.55, -4.61, -4.56, -4.64, -4.55` Big-endian ones are *crazy* ;)","body":"First eight values as doubles, little-endian: <code>-4.56, -4.61, -4.66, -4.55, -4.61, -4.56, -4.64, -4.55</code> Big-endian ones are <i>crazy</i> ;)"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689954151,"creation_date":1689953439,"answer_id":76739313,"question_id":76738748,"body_markdown":"You can read it with this. The values are in line with your expectations:\r\n\r\n```\r\nimport java.nio.ByteBuffer;\r\nimport static java.nio.ByteOrder.*;\r\nimport java.nio.file.Path;\r\nimport java.nio.file.Files;\r\nimport java.io.InputStream;\r\n\r\npublic class Doubler {\r\n    public static void main(String[] args) throws Exception {\r\n        int count = -1;\r\n        byte[] buff = new byte[8];\r\n        ByteBuffer bb = ByteBuffer.allocate(8).order(LITTLE_ENDIAN);\r\n        try (InputStream in = Files.newInputStream(Path.of(args[0]))) {\r\n            while ((count = in.read(buff)) &gt; -1) {\r\n                bb.put(buff);\r\n                bb.rewind();\r\n                System.out.printf(&quot;%.2f%n&quot;, bb.getDouble());\r\n                bb.rewind();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```","title":"how to get values from *.dbl/*.mt4","body":"<p>You can read it with this. The values are in line with your expectations:</p>\n<pre><code>import java.nio.ByteBuffer;\nimport static java.nio.ByteOrder.*;\nimport java.nio.file.Path;\nimport java.nio.file.Files;\nimport java.io.InputStream;\n\npublic class Doubler {\n    public static void main(String[] args) throws Exception {\n        int count = -1;\n        byte[] buff = new byte[8];\n        ByteBuffer bb = ByteBuffer.allocate(8).order(LITTLE_ENDIAN);\n        try (InputStream in = Files.newInputStream(Path.of(args[0]))) {\n            while ((count = in.read(buff)) &gt; -1) {\n                bb.put(buff);\n                bb.rewind();\n                System.out.printf(&quot;%.2f%n&quot;, bb.getDouble());\n                bb.rewind();\n            }\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":2353259,"reputation":163,"user_id":2061650,"accept_rate":67,"display_name":"sergii.gudym"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76739313,"answer_count":1,"score":-2,"last_activity_date":1689954151,"creation_date":1689948676,"question_id":76738748,"body_markdown":"I received data from the oscilloscope in 64-bit doubles (*.dbl) or in &quot;measured data&quot; (*.mt4) format. How can I parse it (preferably Java or Kotlin) or where can I find documentation for this format?\r\n\r\nI tried using DataInputStream.readDouble but the results were weird\r\n\r\nc5 12 52 9b ec 3f 12 c0 17 29 e9 87 4e 71 12 c0 6a 3f 80 74 \r\nb0 a2 12 c0 b8 39 8e 9e b1 37 12 c0 17 29 e9 87 4e 71 12 c0\r\nc5 12 52 9b ec 3f 12 c0 4e 8d f8 7a 3a 92 12 c0 aa 60 ca a1 ","title":"how to get values from *.dbl/*.mt4","body":"<p>I received data from the oscilloscope in 64-bit doubles (<em>.dbl) or in &quot;measured data&quot; (</em>.mt4) format. How can I parse it (preferably Java or Kotlin) or where can I find documentation for this format?</p>\n<p>I tried using DataInputStream.readDouble but the results were weird</p>\n<p>c5 12 52 9b ec 3f 12 c0 17 29 e9 87 4e 71 12 c0 6a 3f 80 74\nb0 a2 12 c0 b8 39 8e 9e b1 37 12 c0 17 29 e9 87 4e 71 12 c0\nc5 12 52 9b ec 3f 12 c0 4e 8d f8 7a 3a 92 12 c0 aa 60 ca a1</p>\n"},{"tags":["java","javafx","game-development","fxgl"],"comments":[{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1690050636,"post_id":76739396,"comment_id":135300213,"body_markdown":"See also [_Game Development Stack Exchange_](https://gamedev.stackexchange.com), which may offer insight on arbitrarily large models.","body":"See also <a href=\"https://gamedev.stackexchange.com\"><i>Game Development Stack Exchange</i></a>, which may offer insight on arbitrarily large models."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1690054309,"post_id":76739396,"comment_id":135300578,"body_markdown":"You could use a [tile engine](https://www.javacodegeeks.com/2013/01/writing-a-tile-engine-in-javafx.html), (careful the link has a lot of advertising spam I cannot control but is the only available link because the original blog post no longer exists). The link outlines the concept and provides snippets of example code for an implementation, but not a complete implementation. FXGL may have a similar concept built-in, so I suggest investigating that before trying to build your own (non-trivial) or searching for a [3rd party solution](https://github.com/Kogs/JavaFXTileMap).","body":"You could use a <a href=\"https://www.javacodegeeks.com/2013/01/writing-a-tile-engine-in-javafx.html\" rel=\"nofollow noreferrer\">tile engine</a>, (careful the link has a lot of advertising spam I cannot control but is the only available link because the original blog post no longer exists). The link outlines the concept and provides snippets of example code for an implementation, but not a complete implementation. FXGL may have a similar concept built-in, so I suggest investigating that before trying to build your own (non-trivial) or searching for a <a href=\"https://github.com/Kogs/JavaFXTileMap\" rel=\"nofollow noreferrer\">3rd party solution</a>."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1690054420,"post_id":76739396,"comment_id":135300589,"body_markdown":"I did a quick search on FXGL and tile map, and [the first link that turned up was [Building Levels Using Tiled Map Editor (FXGL 11)](https://github.com/AlmasB/FXGL/wiki/Building-Levels-Using-Tiled-Map-Editor-(FXGL-11))","body":"I did a quick search on FXGL and tile map, and <a href=\"https://github.com/AlmasB/FXGL/wiki/Building-Levels-Using-Tiled-Map-Editor-(FXGL-11)\" rel=\"nofollow noreferrer\">the first link that turned up was [Building Levels Using Tiled Map Editor (FXGL 11)</a>"}],"owner":{"account_id":29064992,"reputation":1,"user_id":22264802,"display_name":"Pourya Aliannejadi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689954113,"creation_date":1689954113,"question_id":76739396,"body_markdown":"I am trying to recreate a game like Splix.io using FXGL, I have implemented the logic of the game for one player and it works.\r\nAnd for my game window I am using a 800*800 window. My problem is my game should be &quot;unbounded&quot; which means that the player should be able to move till infinity if it desires it and I have been trying different stuff to make this happen but none of them work.\r\n\r\nAs you know Splix.io has a gird like board so to create this grid I created Light Gray cells of 20 pixels like this:\r\n\r\n```\r\n@Spawns(&quot;cell&quot;)\r\npublic Entity newCell(SpawnData data) {\r\n    return FXGL.entityBuilder(data)\r\n            .view(new Rectangle(BLOCK_SIZE,BLOCK_SIZE, Color.LIGHTGRAY))\r\n            .with(new CellComponent())\r\n            .build();\r\n}\r\n\r\n@Spawns(&quot;player&quot;)\r\npublic Entity newPlayer(SpawnData data) {\r\n    return FXGL.entityBuilder(data)\r\n            .view(&quot;steve.png&quot;)\r\n            .zIndex(100)\r\n            .build();\r\n}\r\n```\r\n\r\nand this is how I initialize the game board at the start:\r\n\r\n```\r\n    cells = new Entity[40][40];\r\n\r\n    player = spawn(&quot;player&quot;, 400, 400);\r\n    for (int y = 0; y &lt; 40; y++) {\r\n        for (int x = 0; x &lt; 40; x++) {\r\n            cells[x][y] = spawn(&quot;cell&quot;, x * BLOCK_SIZE, y * BLOCK_SIZE);\r\n        }\r\n    }\r\n```\r\n\r\nCan someone tell me how I can make this fixed size game unbounded?\r\nOne idea that I had was to check if the player comes close to any side of the window and if they get close I make the game window bigger and move the board but I don&#39;t know if this is the right way or not and even if it is, I don&#39;t know how to properly implement it.","title":"Having trouble creating an unbound game using FXGL","body":"<p>I am trying to recreate a game like Splix.io using FXGL, I have implemented the logic of the game for one player and it works.\nAnd for my game window I am using a 800*800 window. My problem is my game should be &quot;unbounded&quot; which means that the player should be able to move till infinity if it desires it and I have been trying different stuff to make this happen but none of them work.</p>\n<p>As you know Splix.io has a gird like board so to create this grid I created Light Gray cells of 20 pixels like this:</p>\n<pre><code>@Spawns(&quot;cell&quot;)\npublic Entity newCell(SpawnData data) {\n    return FXGL.entityBuilder(data)\n            .view(new Rectangle(BLOCK_SIZE,BLOCK_SIZE, Color.LIGHTGRAY))\n            .with(new CellComponent())\n            .build();\n}\n\n@Spawns(&quot;player&quot;)\npublic Entity newPlayer(SpawnData data) {\n    return FXGL.entityBuilder(data)\n            .view(&quot;steve.png&quot;)\n            .zIndex(100)\n            .build();\n}\n</code></pre>\n<p>and this is how I initialize the game board at the start:</p>\n<pre><code>    cells = new Entity[40][40];\n\n    player = spawn(&quot;player&quot;, 400, 400);\n    for (int y = 0; y &lt; 40; y++) {\n        for (int x = 0; x &lt; 40; x++) {\n            cells[x][y] = spawn(&quot;cell&quot;, x * BLOCK_SIZE, y * BLOCK_SIZE);\n        }\n    }\n</code></pre>\n<p>Can someone tell me how I can make this fixed size game unbounded?\nOne idea that I had was to check if the player comes close to any side of the window and if they get close I make the game window bigger and move the board but I don't know if this is the right way or not and even if it is, I don't know how to properly implement it.</p>\n"},{"tags":["java","hamcrest"],"comments":[{"owner":{"account_id":1688935,"reputation":2244,"user_id":1551685,"display_name":"Steve Smith"},"score":0,"creation_date":1485261070,"post_id":41828198,"comment_id":70843333,"body_markdown":"You will need to tell us what you have tried.","body":"You will need to tell us what you have tried."}],"answers":[{"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1485261627,"post_id":41828389,"comment_id":70843652,"body_markdown":"This is good. I realize now that I had made an incorrect inference and my answer was wrong. Well done.","body":"This is good. I realize now that I had made an incorrect inference and my answer was wrong. Well done."}],"tags":[],"owner":{"account_id":8869342,"reputation":638,"user_id":6623474,"display_name":"Florian Link"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1535023260,"creation_date":1485261361,"answer_id":41828389,"question_id":41828198,"body_markdown":"# Update\r\n\r\nAfter checking this old answer, I found that you can use a better combination of built-in matchers making both the assertion and the error messages more readable:\r\n\r\n    expectedStrings.forEach(expectedString -&gt; \r\n        assertThat(strings, hasItem(containsString(expectedString))));\r\n\r\n---\r\n# Original answer for reference\r\n\r\nYou can do it quite easily with streams:\r\n\r\n    assertThat(expectedStrings.stream().allMatch(\r\n        expectedString -&gt; strings.stream()\r\n                                 .anyMatch(string -&gt; string.contains(expectedString))),\r\n        is(true));\r\n\r\n`allMatch` will make sure all of the `expectedStrings` will be checked, and with using `anyMatch` on `strings` you can efficiently check if any of the strings contains the expected string.","title":"Assert that one of string in array contains substring","body":"<h1>Update</h1>\n\n<p>After checking this old answer, I found that you can use a better combination of built-in matchers making both the assertion and the error messages more readable:</p>\n\n<pre><code>expectedStrings.forEach(expectedString -&gt; \n    assertThat(strings, hasItem(containsString(expectedString))));\n</code></pre>\n\n<hr>\n\n<h1>Original answer for reference</h1>\n\n<p>You can do it quite easily with streams:</p>\n\n<pre><code>assertThat(expectedStrings.stream().allMatch(\n    expectedString -&gt; strings.stream()\n                             .anyMatch(string -&gt; string.contains(expectedString))),\n    is(true));\n</code></pre>\n\n<p><code>allMatch</code> will make sure all of the <code>expectedStrings</code> will be checked, and with using <code>anyMatch</code> on <code>strings</code> you can efficiently check if any of the strings contains the expected string.</p>\n"},{"tags":[],"owner":{"account_id":6087813,"reputation":15135,"user_id":4751165,"accept_rate":96,"display_name":"Pau"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495016705,"creation_date":1495016705,"answer_id":44022215,"question_id":41828198,"body_markdown":"At the moment there isn&#39;t any matcher in hamcrest with this requeriment, despite you can combine multiple this is not possible yet.\r\n\r\nSo, in cases like yours the best solution in my opinion is to **create your own matcher** Why? \r\n\r\n - It can be reused\r\n - Is maintainable \r\n - Is more readable\r\n\r\n----\r\n\r\nSo in your case you need to match the first list contains any string of the second one, you can create a Matcher like next:\r\n\r\n\r\n    public class ContainsStringsOf extends BaseMatcher&lt;List&lt;String&gt;&gt; {\r\n    \r\n        private final List&lt;String&gt; valuesToCompare;\r\n    \r\n        public ContainsStringsOf(List&lt;String&gt; valuesToCompare) {\r\n            this.valuesToCompare = valuesToCompare;\r\n        }\r\n    \r\n        @Override\r\n        public void describeTo(Description description) {\r\n            description.appendText(&quot;doesn&#39;t contains all of &quot; + valuesToCompare.toString() + &quot; text&quot;);\r\n        }\r\n    \r\n        @Override\r\n        public boolean matches(Object o) {\r\n            List&lt;String&gt; values = (List&lt;String&gt;) o;\r\n            for (String valueToCompare : valuesToCompare) {\r\n                boolean containsText = false;\r\n                for (String value : values) {\r\n                    if (value.contains(valueToCompare)) {\r\n                        containsText = true;\r\n                    }\r\n                }\r\n                if (!containsText) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n           //note: you can replace this impl with java-8 @florian answer comparison\r\n           //return valuesToCompare.stream().allMatch(exp -&gt; strings.stream().anyMatch(st-&gt; st.contains(exp)))\r\n        }\r\n    \r\n        @Factory\r\n        public static Matcher&lt;List&lt;String&gt;&gt; containsStringsOf(List&lt;String&gt; collection) {\r\n            return new ContainsStringsOf(collection);\r\n        }\r\n    }\r\n\r\nThen you can use it is just as hamcrest matcher is used:\r\n\r\n    List&lt;String&gt; expectedStrings = Arrays.asList(&quot;link1&quot;, &quot;link2&quot;);\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;lalala link1 lalalla&quot;, &quot;lalalal link2 lalalla&quot;);\r\n    Assert.assertThat(strings , containsStringsOf(expectedStrings));\r\n\r\n","title":"Assert that one of string in array contains substring","body":"<p>At the moment there isn't any matcher in hamcrest with this requeriment, despite you can combine multiple this is not possible yet.</p>\n\n<p>So, in cases like yours the best solution in my opinion is to <strong>create your own matcher</strong> Why? </p>\n\n<ul>\n<li>It can be reused</li>\n<li>Is maintainable </li>\n<li>Is more readable</li>\n</ul>\n\n<hr>\n\n<p>So in your case you need to match the first list contains any string of the second one, you can create a Matcher like next:</p>\n\n<pre><code>public class ContainsStringsOf extends BaseMatcher&lt;List&lt;String&gt;&gt; {\n\n    private final List&lt;String&gt; valuesToCompare;\n\n    public ContainsStringsOf(List&lt;String&gt; valuesToCompare) {\n        this.valuesToCompare = valuesToCompare;\n    }\n\n    @Override\n    public void describeTo(Description description) {\n        description.appendText(\"doesn't contains all of \" + valuesToCompare.toString() + \" text\");\n    }\n\n    @Override\n    public boolean matches(Object o) {\n        List&lt;String&gt; values = (List&lt;String&gt;) o;\n        for (String valueToCompare : valuesToCompare) {\n            boolean containsText = false;\n            for (String value : values) {\n                if (value.contains(valueToCompare)) {\n                    containsText = true;\n                }\n            }\n            if (!containsText) {\n                return false;\n            }\n        }\n        return true;\n       //note: you can replace this impl with java-8 @florian answer comparison\n       //return valuesToCompare.stream().allMatch(exp -&gt; strings.stream().anyMatch(st-&gt; st.contains(exp)))\n    }\n\n    @Factory\n    public static Matcher&lt;List&lt;String&gt;&gt; containsStringsOf(List&lt;String&gt; collection) {\n        return new ContainsStringsOf(collection);\n    }\n}\n</code></pre>\n\n<p>Then you can use it is just as hamcrest matcher is used:</p>\n\n<pre><code>List&lt;String&gt; expectedStrings = Arrays.asList(\"link1\", \"link2\");\nList&lt;String&gt; strings = Arrays.asList(\"lalala link1 lalalla\", \"lalalal link2 lalalla\");\nAssert.assertThat(strings , containsStringsOf(expectedStrings));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6667122,"reputation":11,"user_id":5144453,"display_name":"Stephen Gissendaner"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689953812,"creation_date":1689953177,"answer_id":76739290,"question_id":41828198,"body_markdown":"I like the idea of a custom matcher. You could use the streams mechanism as the core of that. Here is a simple (inefficient) example:\r\n\r\n     assertThat( infoLogs.stream().filter(logItem -&gt; logItem.contains(&quot;writing out group&quot;)).collect(Collectors.toList()).size()).isNotZero();","title":"Assert that one of string in array contains substring","body":"<p>I like the idea of a custom matcher. You could use the streams mechanism as the core of that. Here is a simple (inefficient) example:</p>\n<pre><code> assertThat( infoLogs.stream().filter(logItem -&gt; logItem.contains(&quot;writing out group&quot;)).collect(Collectors.toList()).size()).isNotZero();\n</code></pre>\n"}],"owner":{"account_id":10097795,"reputation":129,"user_id":7462612,"display_name":"Hamster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8764,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":41828389,"answer_count":3,"score":7,"last_activity_date":1689953812,"creation_date":1485260651,"question_id":41828198,"body_markdown":"    List&lt;String&gt; expectedStrings = Arrays.asList(&quot;link1&quot;, &quot;link2&quot;);\r\n    List&lt;String&gt; strings = Arrays.asList(&quot;lalala link1 lalalla&quot;, &quot;lalalal link2 lalalla&quot;);\r\n\r\nFor each expectedString, I need assert that any of string in the &#39;strings&#39; contains expectedString.\r\nHow I may assert this with Hamcrest?\r\nThanks for your attention.","title":"Assert that one of string in array contains substring","body":"<pre><code>List&lt;String&gt; expectedStrings = Arrays.asList(\"link1\", \"link2\");\nList&lt;String&gt; strings = Arrays.asList(\"lalala link1 lalalla\", \"lalalal link2 lalalla\");\n</code></pre>\n\n<p>For each expectedString, I need assert that any of string in the 'strings' contains expectedString.\nHow I may assert this with Hamcrest?\nThanks for your attention.</p>\n"},{"tags":["java","junit","mockito","powermockito","pmd"],"comments":[{"owner":{"account_id":886614,"reputation":29561,"user_id":925913,"accept_rate":82,"display_name":"Andrew Cheong"},"score":0,"creation_date":1690453611,"post_id":66115120,"comment_id":135357364,"body_markdown":"I came across this question when I was trying to figure out how to mock the response of the send / sendAsync method on HttpClient. For an answer to that, see https://stackoverflow.com/a/76778792/925913.","body":"I came across this question when I was trying to figure out how to mock the response of the send / sendAsync method on HttpClient. For an answer to that, see <a href=\"https://stackoverflow.com/a/76778792/925913\">stackoverflow.com/a/76778792/925913</a>."}],"answers":[{"comments":[{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612860129,"post_id":66115353,"comment_id":116891456,"body_markdown":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor","body":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor"},{"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"score":0,"creation_date":1612860717,"post_id":66115353,"comment_id":116891681,"body_markdown":"I am suggesting to use wiremock which is a different library from powermock. But I get your point. You want to remove final. But then you are being shown it as a issue because it is an issue. I guess you are using PMD for analyzing your code. Why complain when its doing what it is supposed to.! Anyways, if thats what you want,You can add exceptions for files to not report issues on certain files in your source code analyzer. This might be helpful.\nhttps://stackoverflow.com/questions/32272138/suppressing-violations-in-pmd","body":"I am suggesting to use wiremock which is a different library from powermock. But I get your point. You want to remove final. But then you are being shown it as a issue because it is an issue. I guess you are using PMD for analyzing your code. Why complain when its doing what it is supposed to.! Anyways, if thats what you want,You can add exceptions for files to not report issues on certain files in your source code analyzer. This might be helpful. <a href=\"https://stackoverflow.com/questions/32272138/suppressing-violations-in-pmd\" title=\"suppressing violations in pmd\">stackoverflow.com/questions/32272138/&hellip;</a>"},{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612861141,"post_id":66115353,"comment_id":116891845,"body_markdown":"I can do this way  @SuppressWarnings(&quot;PMD&quot;) But instead of PMD i am looking for specific Code related to this error..... This  @SuppressWarnings(&quot;PMD&quot;) works but i want specific code.","body":"I can do this way  @SuppressWarnings(&quot;PMD&quot;) But instead of PMD i am looking for specific Code related to this error..... This  @SuppressWarnings(&quot;PMD&quot;) works but i want specific code."},{"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"score":0,"creation_date":1612861501,"post_id":66115353,"comment_id":116891987,"body_markdown":"Well Looks like we are missing the context as to what exactly you are looking for. Please  try updating the question with more details.","body":"Well Looks like we are missing the context as to what exactly you are looking for. Please  try updating the question with more details."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612864098,"post_id":66115353,"comment_id":116893035,"body_markdown":"So PMD is issuing you a warning saying that the field _could_ be final.  It is up to you as a developer if in this instance PMD is correct.  I would argue that in this instance PMD is correct that your real issue is you are attempting to mock something you shouldnt be mocking (HTTPClient), as Shubham says try using something like WireMock that is a much better way to test a  class that makes calls on the network, means you will have better structured code and the PMD warning will go away because the field is final.  Everything solved.","body":"So PMD is issuing you a warning saying that the field <i>could</i> be final.  It is up to you as a developer if in this instance PMD is correct.  I would argue that in this instance PMD is correct that your real issue is you are attempting to mock something you shouldnt be mocking (HTTPClient), as Shubham says try using something like WireMock that is a much better way to test a  class that makes calls on the network, means you will have better structured code and the PMD warning will go away because the field is final.  Everything solved."}],"tags":[],"owner":{"account_id":12259853,"reputation":53,"user_id":8947900,"display_name":"Shubham Anand"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1612859260,"creation_date":1612859260,"answer_id":66115353,"question_id":66115120,"body_markdown":"One of the ways to test a HTTP client code would be to not mock your HTTPClient object, but to create mock responses for the http calls and then let your HPPTClient make calls to those URLs.\r\nTake a look at Wiremock. [http://wiremock.org/docs/][1]\r\nIt helps you create a simple mock server and you can stub responses for your URLs.\r\nThen invoke your URLs using your client for the test.\r\n\r\n\r\n  [1]: http://wiremock.org/docs/","title":"How to mock HttpClient using Mockito","body":"<p>One of the ways to test a HTTP client code would be to not mock your HTTPClient object, but to create mock responses for the http calls and then let your HPPTClient make calls to those URLs.\nTake a look at Wiremock. <a href=\"http://wiremock.org/docs/\" rel=\"nofollow noreferrer\">http://wiremock.org/docs/</a>\nIt helps you create a simple mock server and you can stub responses for your URLs.\nThen invoke your URLs using your client for the test.</p>\n"},{"comments":[{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1612860119,"post_id":66115370,"comment_id":116891451,"body_markdown":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor","body":"I don&#39;t want to use PowerMock. Is there a way to suppress this PMD warning Private field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor"},{"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"score":0,"creation_date":1612860594,"post_id":66115370,"comment_id":116891621,"body_markdown":"To suppress a PMD warning, use an annotation - see https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html.","body":"To suppress a PMD warning, use an annotation - see <a href=\"https://pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html\" rel=\"nofollow noreferrer\">pmd.github.io/latest/pmd_userdocs_suppressing_warnings.html</a>."},{"owner":{"account_id":5240687,"reputation":1727,"user_id":4187837,"accept_rate":86,"display_name":"Gavin"},"score":0,"creation_date":1612864297,"post_id":66115370,"comment_id":116893115,"body_markdown":"PowerMock is a hack, in this instance at least.  The approach to testing is the issue, `HTTPClient` shouldnt be being mocked at all, an alternative approach is what is required.","body":"PowerMock is a hack, in this instance at least.  The approach to testing is the issue, <code>HTTPClient</code> shouldnt be being mocked at all, an alternative approach is what is required."}],"tags":[],"owner":{"account_id":84846,"reputation":5030,"user_id":236936,"accept_rate":67,"display_name":"TrueDub"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1612859333,"creation_date":1612859333,"answer_id":66115370,"question_id":66115120,"body_markdown":"You can&#39;t mock a final instance using plain mocking. You need something like [PowerMock][1].\r\n\r\nSee the answer to [this question][2]for implementation.\r\n\r\n\r\n  [1]: https://github.com/powermock/powermock\r\n  [2]: https://stackoverflow.com/questions/45034464/powermock-static-final-method-in-final-class","title":"How to mock HttpClient using Mockito","body":"<p>You can't mock a final instance using plain mocking. You need something like <a href=\"https://github.com/powermock/powermock\" rel=\"nofollow noreferrer\">PowerMock</a>.</p>\n<p>See the answer to <a href=\"https://stackoverflow.com/questions/45034464/powermock-static-final-method-in-final-class\">this question</a>for implementation.</p>\n"},{"tags":[],"owner":{"account_id":3732234,"reputation":672,"user_id":3104218,"display_name":"Acanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612988132,"creation_date":1612988132,"answer_id":66144358,"question_id":66115120,"body_markdown":"A simple way to use a mocked HttpClient for your tests is to add a second constructor that takes a HttpClient.\r\n\r\n```java\r\npublic class KMSHttpClientImpl implements KMSHttpClient\r\n{\r\n\r\n  private final HttpClient httpClient;\r\n\r\n  public KMSHttpClientImpl ()\r\n  {\r\n    final PoolingHttpClientConnectionManager connectionManager =\r\n            kmsHttpConnectionManager.getConnectionManager();\r\n    httpClient = HttpClients.custom()\r\n            .setConnectionManager(connectionManager)\r\n            .build();\r\n  }\r\n\r\n  // This constructor is package private instead\r\n  // of public so it is not accidentally used by\r\n  // classes outside of this package. If your test\r\n  // class is not in the same package, then you\r\n  // need to make this a public constructor.\r\n  KMSHttpClientImpl (final HttpClient httpClient)\r\n  {\r\n    this.httpClient = httpClient;\r\n  }\r\n\r\n}\r\n```\r\n\r\nYou then inject your mocked HttpClient using this constructor and will need neither `@InjectMocks` nor `@Mock` in your tests.\r\n\r\n```java\r\n@Test\r\npublic void testPostRequest () throws KMSClientException\r\n{\r\n  final HttpClient httpClient = Mockito.mock(HttpClient.class);\r\n  final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n  Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n  final KMSHttpClientImpl kmsHttpClientImpl = new KMSHttpClientImpl(httpClient);\r\n\r\n  // run your test...\r\n}\r\n```","title":"How to mock HttpClient using Mockito","body":"<p>A simple way to use a mocked HttpClient for your tests is to add a second constructor that takes a HttpClient.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class KMSHttpClientImpl implements KMSHttpClient\n{\n\n  private final HttpClient httpClient;\n\n  public KMSHttpClientImpl ()\n  {\n    final PoolingHttpClientConnectionManager connectionManager =\n            kmsHttpConnectionManager.getConnectionManager();\n    httpClient = HttpClients.custom()\n            .setConnectionManager(connectionManager)\n            .build();\n  }\n\n  // This constructor is package private instead\n  // of public so it is not accidentally used by\n  // classes outside of this package. If your test\n  // class is not in the same package, then you\n  // need to make this a public constructor.\n  KMSHttpClientImpl (final HttpClient httpClient)\n  {\n    this.httpClient = httpClient;\n  }\n\n}\n</code></pre>\n<p>You then inject your mocked HttpClient using this constructor and will need neither <code>@InjectMocks</code> nor <code>@Mock</code> in your tests.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testPostRequest () throws KMSClientException\n{\n  final HttpClient httpClient = Mockito.mock(HttpClient.class);\n  final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n  Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n  final KMSHttpClientImpl kmsHttpClientImpl = new KMSHttpClientImpl(httpClient);\n\n  // run your test...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1961640,"reputation":12136,"user_id":1763035,"accept_rate":56,"display_name":"Andy Brown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689953681,"creation_date":1689953681,"answer_id":76739352,"question_id":66115120,"body_markdown":"Apache HTTP client 5 deprecates the single argument `HttpClient.execute()` method in favour of the methods that take a `ResponseHandler` so that the library can ensure that the request is cleaned up.\r\n\r\nTo mock those calls, do this:\r\n```java\r\n// mock the http client\r\nCloseableHttpClient httpClient = mock(CloseableHttpClient.class);\r\n\r\n// mock the response object\r\nCloseableHttpResponse response = mock(CloseableHttpResponse.class);\r\nwhen(response.getCode()).thenReturn(200);\r\n// [...] add other mocks, e.g. response headers and body entity\r\n\r\n// provide the mock response object when your mock HttpClient is executed\r\n// replace any() with more specific matchers if you need to\r\n\r\nwhen(httpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenAnswer(invocation -&gt;\r\n  invocation.getArgument(1, HttpClientResponseHandler.class).handleResponse(response));\r\n```","title":"How to mock HttpClient using Mockito","body":"<p>Apache HTTP client 5 deprecates the single argument <code>HttpClient.execute()</code> method in favour of the methods that take a <code>ResponseHandler</code> so that the library can ensure that the request is cleaned up.</p>\n<p>To mock those calls, do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// mock the http client\nCloseableHttpClient httpClient = mock(CloseableHttpClient.class);\n\n// mock the response object\nCloseableHttpResponse response = mock(CloseableHttpResponse.class);\nwhen(response.getCode()).thenReturn(200);\n// [...] add other mocks, e.g. response headers and body entity\n\n// provide the mock response object when your mock HttpClient is executed\n// replace any() with more specific matchers if you need to\n\nwhen(httpClient.execute(any(ClassicHttpRequest.class), any(HttpClientResponseHandler.class))).thenAnswer(invocation -&gt;\n  invocation.getArgument(1, HttpClientResponseHandler.class).handleResponse(response));\n</code></pre>\n"}],"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4624,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1689953681,"creation_date":1612858065,"question_id":66115120,"body_markdown":"This is my Actual class for which i am writing junit. I have HtpClient as private and final.\r\n\r\n     public class KMSHttpClientImpl implements KMSHttpClient\r\n     {\r\n    /**\r\n     * ObjectMapper Instance.\r\n     */\r\n    private final ObjectMapper objectMapper = new ObjectMapper ();\r\n\r\n    /**\r\n     * KMS ConnectionManager Instance.\r\n     */\r\n    private final KMSHttpConnectionManager kmsHttpConnectionManager =\r\n            new KMSHttpConnectionManagerImpl ();\r\n\r\n    /**\r\n     * HttpClient object.\r\n     */\r\n   \r\n    private final HttpClient httpClient;\r\n\r\n    /**\r\n     * KMSHttpClient constructor.\r\n     */\r\n    public KMSHttpClientImpl ()\r\n    {\r\n        // TODO PoolingHttpClientConnectionManager object should be closed after use.\r\n        // TODO This needs to be either singleton or should be kept in static block\r\n        final PoolingHttpClientConnectionManager connectionManager =\r\n                kmsHttpConnectionManager.getConnectionManager();\r\n        httpClient = HttpClients.custom()\r\n                .setConnectionManager(connectionManager)\r\n                .build();\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T invokeGETRequest (final String url, final Class&lt;T&gt; clazz)\r\n            throws KMSClientException\r\n    {\r\n        final HttpGet httpGet = new HttpGet(url);\r\n        try {\r\n            final HttpResponse response = httpClient.execute(httpGet);\r\n            return objectMapper.readValue(\r\n                    response.getEntity().getContent(), clazz);\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to get the result&quot;, e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; T invokePOSTRequest (final String url, final Object object, final Class&lt;T&gt; clazz)\r\n            throws KMSClientException\r\n    {\r\n        final HttpPost httpPost = new HttpPost(url);\r\n        try {\r\n            final HttpResponse response = httpClient.execute(httpPost);\r\n            return objectMapper.readValue(\r\n                    response.getEntity().getContent(), clazz);\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n    }\r\n     }\r\n\r\nThis is my testclass. I am trying to Mock HttpClient but as it is final i cant mock it. And if i remove final from HttpClient in my KMSHttpClientImpl.java class. I am getting PMd issue saying\r\nPrivate field &#39;httpClient&#39; could be made final; it is only initialized in the declaration or constructor. What can i do to fix this issue?\r\n\r\n    public class KMSHttpClientImplTest\r\n    {\r\n\r\n    /**\r\n     * Injecting mocks KMSHttpClientImpl.\r\n     */\r\n    @InjectMocks\r\n    private KMSHttpClientImpl kmsHttpClientImpl;\r\n\r\n    /**\r\n     * Mock HttpClient.\r\n     */\r\n    @Mock\r\n    private HttpClient httpClient;\r\n\r\n\r\n    /**\r\n     * Initial SetUp Method.\r\n     */\r\n    @Before\r\n    public void setUp ()\r\n    {\r\n        initMocks(this);\r\n    }\r\n\r\n    /**\r\n     * Method to test postRequest Method.\r\n     * @throws KMSClientException\r\n     */\r\n    @Test\r\n    public void testPostRequest () throws KMSClientException\r\n    {\r\n        final OrganizationRequest request = getOrganizationRequest();\r\n        final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n        try {\r\n            Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n            final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokePOSTRequest(\r\n                    ORG_TEST_URL, request, OrganizationResponse.class);\r\n            assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\r\n        } catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n          }\r\n\r\n    /**\r\n     * Method to test getRequest Method.\r\n     * @throws KMSClientException\r\n     */\r\n    @Test\r\n    public void testGetRequest () throws KMSClientException\r\n    {\r\n        try {\r\n            final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\r\n            Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\r\n            final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokeGETRequest\r\n                    (ORG_TEST_URL, OrganizationResponse.class);\r\n            assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\r\n        }  catch (IOException e) {\r\n            throw new KMSClientException(&quot;Unable to create the request&quot;, e);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Method to organizationRequest Object.\r\n     * @return OrganizationRequest object\r\n     */\r\n    public OrganizationRequest getOrganizationRequest ()\r\n    {\r\n        return OrganizationRequest.builder().id(&quot;test&quot;).build();\r\n    }\r\n\r\n    /**\r\n     * Method to getOrganizationResponse String.\r\n     * @return String Object\r\n     */\r\n    public String getOrganizationResponse ()\r\n    {\r\n        final Map obj=new HashMap();\r\n        obj.put(&quot;id&quot;, ORG_ID);\r\n        obj.put(&quot;uuid&quot;, ORG_UUID);\r\n        obj.put(&quot;orgKeyId&quot;, ORG_KEYID);\r\n        return JSONValue.toJSONString(obj);\r\n    }\r\n\r\n    /**\r\n     * Method to prepare Response.\r\n     * @param expectedResponseStatus\r\n     * @return HttpResponse\r\n     */\r\n    private HttpResponse prepareResponse (final int expectedResponseStatus)\r\n    {\r\n        final HttpResponse response = new BasicHttpResponse(new BasicStatusLine(\r\n                new ProtocolVersion(&quot;HTTP&quot;, 1, 1),\r\n                expectedResponseStatus, &quot;&quot;));\r\n        response.setStatusCode(expectedResponseStatus);\r\n        final HttpEntity httpEntity = new StringEntity(getOrganizationResponse(),\r\n                ContentType.APPLICATION_JSON);\r\n        response.setEntity(httpEntity);\r\n        return response;\r\n         }\r\n        }\r\n","title":"How to mock HttpClient using Mockito","body":"<p>This is my Actual class for which i am writing junit. I have HtpClient as private and final.</p>\n<pre><code> public class KMSHttpClientImpl implements KMSHttpClient\n {\n/**\n * ObjectMapper Instance.\n */\nprivate final ObjectMapper objectMapper = new ObjectMapper ();\n\n/**\n * KMS ConnectionManager Instance.\n */\nprivate final KMSHttpConnectionManager kmsHttpConnectionManager =\n        new KMSHttpConnectionManagerImpl ();\n\n/**\n * HttpClient object.\n */\n\nprivate final HttpClient httpClient;\n\n/**\n * KMSHttpClient constructor.\n */\npublic KMSHttpClientImpl ()\n{\n    // TODO PoolingHttpClientConnectionManager object should be closed after use.\n    // TODO This needs to be either singleton or should be kept in static block\n    final PoolingHttpClientConnectionManager connectionManager =\n            kmsHttpConnectionManager.getConnectionManager();\n    httpClient = HttpClients.custom()\n            .setConnectionManager(connectionManager)\n            .build();\n}\n\n@Override\npublic &lt;T&gt; T invokeGETRequest (final String url, final Class&lt;T&gt; clazz)\n        throws KMSClientException\n{\n    final HttpGet httpGet = new HttpGet(url);\n    try {\n        final HttpResponse response = httpClient.execute(httpGet);\n        return objectMapper.readValue(\n                response.getEntity().getContent(), clazz);\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to get the result&quot;, e);\n    }\n}\n\n@Override\npublic &lt;T&gt; T invokePOSTRequest (final String url, final Object object, final Class&lt;T&gt; clazz)\n        throws KMSClientException\n{\n    final HttpPost httpPost = new HttpPost(url);\n    try {\n        final HttpResponse response = httpClient.execute(httpPost);\n        return objectMapper.readValue(\n                response.getEntity().getContent(), clazz);\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n}\n }\n</code></pre>\n<p>This is my testclass. I am trying to Mock HttpClient but as it is final i cant mock it. And if i remove final from HttpClient in my KMSHttpClientImpl.java class. I am getting PMd issue saying\nPrivate field 'httpClient' could be made final; it is only initialized in the declaration or constructor. What can i do to fix this issue?</p>\n<pre><code>public class KMSHttpClientImplTest\n{\n\n/**\n * Injecting mocks KMSHttpClientImpl.\n */\n@InjectMocks\nprivate KMSHttpClientImpl kmsHttpClientImpl;\n\n/**\n * Mock HttpClient.\n */\n@Mock\nprivate HttpClient httpClient;\n\n\n/**\n * Initial SetUp Method.\n */\n@Before\npublic void setUp ()\n{\n    initMocks(this);\n}\n\n/**\n * Method to test postRequest Method.\n * @throws KMSClientException\n */\n@Test\npublic void testPostRequest () throws KMSClientException\n{\n    final OrganizationRequest request = getOrganizationRequest();\n    final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n    try {\n        Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n        final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokePOSTRequest(\n                ORG_TEST_URL, request, OrganizationResponse.class);\n        assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\n    } catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n      }\n\n/**\n * Method to test getRequest Method.\n * @throws KMSClientException\n */\n@Test\npublic void testGetRequest () throws KMSClientException\n{\n    try {\n        final HttpResponse response = prepareResponse(HttpStatus.SC_OK);\n        Mockito.when(httpClient.execute(Mockito.any())).thenReturn(response);\n        final OrganizationResponse organizationResponse = kmsHttpClientImpl.invokeGETRequest\n                (ORG_TEST_URL, OrganizationResponse.class);\n        assertEquals(&quot;Id should match&quot;, ORG_ID, organizationResponse.getId());\n    }  catch (IOException e) {\n        throw new KMSClientException(&quot;Unable to create the request&quot;, e);\n    }\n}\n\n/**\n * Method to organizationRequest Object.\n * @return OrganizationRequest object\n */\npublic OrganizationRequest getOrganizationRequest ()\n{\n    return OrganizationRequest.builder().id(&quot;test&quot;).build();\n}\n\n/**\n * Method to getOrganizationResponse String.\n * @return String Object\n */\npublic String getOrganizationResponse ()\n{\n    final Map obj=new HashMap();\n    obj.put(&quot;id&quot;, ORG_ID);\n    obj.put(&quot;uuid&quot;, ORG_UUID);\n    obj.put(&quot;orgKeyId&quot;, ORG_KEYID);\n    return JSONValue.toJSONString(obj);\n}\n\n/**\n * Method to prepare Response.\n * @param expectedResponseStatus\n * @return HttpResponse\n */\nprivate HttpResponse prepareResponse (final int expectedResponseStatus)\n{\n    final HttpResponse response = new BasicHttpResponse(new BasicStatusLine(\n            new ProtocolVersion(&quot;HTTP&quot;, 1, 1),\n            expectedResponseStatus, &quot;&quot;));\n    response.setStatusCode(expectedResponseStatus);\n    final HttpEntity httpEntity = new StringEntity(getOrganizationResponse(),\n            ContentType.APPLICATION_JSON);\n    response.setEntity(httpEntity);\n    return response;\n     }\n    }\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7873,"page":295,"page_size":100}
