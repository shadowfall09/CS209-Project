{"items":[{"tags":["java","excel","spring-boot","jxls"],"answers":[{"tags":[],"owner":{"account_id":23702888,"reputation":11,"user_id":17725834,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689942204,"creation_date":1689942204,"answer_id":76737973,"question_id":76737413,"body_markdown":"I have found the solution. In my service class, I need to add this line of code before reading the excel to avoid the `org.jxls.reader.XLSDataReadException` exception: `ReaderConfig.getInstance().setSkipErrors(true);`. With this adjustment, the code will read the empty cell and return 0 without any issues.","title":"How do I handle empty cells while reading Excel with org.jxls in Spring Boot?","body":"<p>I have found the solution. In my service class, I need to add this line of code before reading the excel to avoid the <code>org.jxls.reader.XLSDataReadException</code> exception: <code>ReaderConfig.getInstance().setSkipErrors(true);</code>. With this adjustment, the code will read the empty cell and return 0 without any issues.</p>\n"}],"owner":{"account_id":23702888,"reputation":11,"user_id":17725834,"display_name":"Abhishek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689942508,"creation_date":1689937622,"question_id":76737413,"body_markdown":"I am using the org.jxls library in a Spring Boot project to read an Excel file. The reading process is working fine, but when it encounters an empty cell, it throws an org.jxls.reader.XLSDataReadException exception. I would like to skip reading the empty cell and continue with the next cell.\r\n\r\nHere is my XML configuration file.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\r\n    &lt;workbook&gt;\r\n        &lt;worksheet name=&quot;Sheet1&quot;&gt;\r\n            &lt;section startRow=&quot;0&quot; endRow=&quot;0&quot; /&gt;\r\n            &lt;loop startRow=&quot;1&quot; endRow=&quot;1&quot; items=&quot;estimations&quot; var=&quot;estimation&quot;\r\n                varType=&quot;com.osi.exceljxls.entities.Estimation&quot;&gt;\r\n                &lt;section startRow=&quot;1&quot; endRow=&quot;1&quot;&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;0&quot;&gt;estimation.role&lt;/mapping&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;1&quot;&gt;estimation.noOfResources&lt;/mapping&gt;\r\n                    &lt;mapping row=&quot;1&quot; col=&quot;3&quot;&gt;estimation.projectLocation&lt;/mapping&gt;\r\n                    &lt;!-- Other mappings --&gt;\r\n                    &lt;!-- ... --&gt;\r\n                    &lt;cellcheck offset=&quot;0&quot; evaluator=&quot;org.jxls.common.cell.reader.IsEmptyCellCheck&quot; /&gt;\r\n                &lt;/section&gt;\r\n                &lt;loopbreakcondition&gt;\r\n                    &lt;rowcheck offset=&quot;0&quot;&gt;\r\n                        &lt;cellcheck offset=&quot;0&quot; /&gt;\r\n                    &lt;/rowcheck&gt;\r\n                &lt;/loopbreakcondition&gt;\r\n            &lt;/loop&gt;\r\n          &lt;/worksheet&gt;\r\n      &lt;/workbook&gt;\r\n\r\nI have already tried adding the `&lt;cellcheck /&gt;` tag as shown above, but it doesn&#39;t seem to be working.\r\n\r\nI also considered handling the exception, but I am unsure how to proceed in that case.\r\n\r\nI would appreciate any insights or suggestions on how to skip reading empty cells or how to handle the XLSDataReadException when an empty cell is encountered. Thank you in advance!\r\n\r\n","title":"How do I handle empty cells while reading Excel with org.jxls in Spring Boot?","body":"<p>I am using the org.jxls library in a Spring Boot project to read an Excel file. The reading process is working fine, but when it encounters an empty cell, it throws an org.jxls.reader.XLSDataReadException exception. I would like to skip reading the empty cell and continue with the next cell.</p>\n<p>Here is my XML configuration file.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;\n&lt;workbook&gt;\n    &lt;worksheet name=&quot;Sheet1&quot;&gt;\n        &lt;section startRow=&quot;0&quot; endRow=&quot;0&quot; /&gt;\n        &lt;loop startRow=&quot;1&quot; endRow=&quot;1&quot; items=&quot;estimations&quot; var=&quot;estimation&quot;\n            varType=&quot;com.osi.exceljxls.entities.Estimation&quot;&gt;\n            &lt;section startRow=&quot;1&quot; endRow=&quot;1&quot;&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;0&quot;&gt;estimation.role&lt;/mapping&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;1&quot;&gt;estimation.noOfResources&lt;/mapping&gt;\n                &lt;mapping row=&quot;1&quot; col=&quot;3&quot;&gt;estimation.projectLocation&lt;/mapping&gt;\n                &lt;!-- Other mappings --&gt;\n                &lt;!-- ... --&gt;\n                &lt;cellcheck offset=&quot;0&quot; evaluator=&quot;org.jxls.common.cell.reader.IsEmptyCellCheck&quot; /&gt;\n            &lt;/section&gt;\n            &lt;loopbreakcondition&gt;\n                &lt;rowcheck offset=&quot;0&quot;&gt;\n                    &lt;cellcheck offset=&quot;0&quot; /&gt;\n                &lt;/rowcheck&gt;\n            &lt;/loopbreakcondition&gt;\n        &lt;/loop&gt;\n      &lt;/worksheet&gt;\n  &lt;/workbook&gt;\n</code></pre>\n<p>I have already tried adding the <code>&lt;cellcheck /&gt;</code> tag as shown above, but it doesn't seem to be working.</p>\n<p>I also considered handling the exception, but I am unsure how to proceed in that case.</p>\n<p>I would appreciate any insights or suggestions on how to skip reading empty cells or how to handle the XLSDataReadException when an empty cell is encountered. Thank you in advance!</p>\n"},{"tags":["java","sonarqube"],"owner":{"account_id":17161389,"reputation":1,"user_id":12425000,"display_name":"TrustThisRobot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689942310,"creation_date":1689942310,"question_id":76737987,"body_markdown":"So, i am trying to write a custom rule for sonarqube that it rise an isuess if it detect an REGEX that i pass them,\r\n\r\n\r\n```\r\npublic class AvoidHardCodedUsers extends IssuableSubscriptionVisitor implements JavaFileScanner {\r\nprivate static final String PATTERN = &quot;ESOP\\\\d{7}&quot;;\r\n\r\n@Override\r\npublic List&lt;Tree.Kind&gt; nodesToVisit() {\r\nreturn Arrays.asList(Tree.Kind.STRING_LITERAL);\r\n}\r\n\r\n@Override\r\npublic void visitNode(Tree tree) {\r\nLiteralTree literalTree = (LiteralTree) tree;\r\nString literalValue = literalTree.value();\r\nif (literalValue.matches(PATTERN)) {\r\ncontext.reportIssue(this, literalTree, String.format(&quot;Avoid using hard coded user in code @%s&quot;));\r\n}\r\n}\r\n\r\n}\r\n```\r\n\r\n\r\nOn the test file of the plugin i put some error like the pattern, but the error messaje says there are not test failure, \r\n\r\n\r\n\r\nI pass every type of String into the test class to match that pattern, but nothing taking the pattern as error.","title":"Sonarqube custom rule giving back not failed test","body":"<p>So, i am trying to write a custom rule for sonarqube that it rise an isuess if it detect an REGEX that i pass them,</p>\n<pre><code>public class AvoidHardCodedUsers extends IssuableSubscriptionVisitor implements JavaFileScanner {\nprivate static final String PATTERN = &quot;ESOP\\\\d{7}&quot;;\n\n@Override\npublic List&lt;Tree.Kind&gt; nodesToVisit() {\nreturn Arrays.asList(Tree.Kind.STRING_LITERAL);\n}\n\n@Override\npublic void visitNode(Tree tree) {\nLiteralTree literalTree = (LiteralTree) tree;\nString literalValue = literalTree.value();\nif (literalValue.matches(PATTERN)) {\ncontext.reportIssue(this, literalTree, String.format(&quot;Avoid using hard coded user in code @%s&quot;));\n}\n}\n\n}\n</code></pre>\n<p>On the test file of the plugin i put some error like the pattern, but the error messaje says there are not test failure,</p>\n<p>I pass every type of String into the test class to match that pattern, but nothing taking the pattern as error.</p>\n"},{"tags":["java","reactjs","cookies","jax-rs","cookie-httponly"],"comments":[{"owner":{"account_id":174208,"reputation":5254,"user_id":403425,"accept_rate":71,"display_name":"Kevin Renskers"},"score":0,"creation_date":1635448569,"post_id":64747157,"comment_id":123308423,"body_markdown":"I&#39;m having the exact same problem! Logging in and setting a HttpOnly cookie works just fine, but removing that cookie when logging out is impossible? Can&#39;t set it to an empty value, changing the max-age to 0 doesn&#39;t help either. Have you managed to solve it?","body":"I&#39;m having the exact same problem! Logging in and setting a HttpOnly cookie works just fine, but removing that cookie when logging out is impossible? Can&#39;t set it to an empty value, changing the max-age to 0 doesn&#39;t help either. Have you managed to solve it?"}],"answers":[{"tags":[],"owner":{"account_id":19705290,"reputation":954,"user_id":14427125,"display_name":"Ntshembo Hlongwane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604912817,"creation_date":1604912817,"answer_id":64748656,"question_id":64747157,"body_markdown":"From what you are saying is your are using httpOnly cookie so you have to understand one thing is that from the client-side you wont achieve that because then that then would defeat the purpose of having an httpOnly cookie than that would have just been the same as having a regular cookie.\r\n\r\n- So now your solution to get rid of the cookie when a user logs out is on your back-end where I am to believe the cookie was made is where you want want to delete that specific cookie. ","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>From what you are saying is your are using httpOnly cookie so you have to understand one thing is that from the client-side you wont achieve that because then that then would defeat the purpose of having an httpOnly cookie than that would have just been the same as having a regular cookie.</p>\n<ul>\n<li>So now your solution to get rid of the cookie when a user logs out is on your back-end where I am to believe the cookie was made is where you want want to delete that specific cookie.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2632663,"reputation":387,"user_id":2278206,"display_name":"psq"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689942307,"creation_date":1689942307,"answer_id":76737985,"question_id":64747157,"body_markdown":"From [MDN][1]:\r\n\r\n&gt; Max-Age=\\&lt;number&gt;\r\n&gt;\r\n&gt; Indicates the number of seconds until the cookie expires. A zero or negative number will expire the cookie immediately. If both Expires and Max-Age are set, Max-Age has precedence.\r\n\r\nMake sure that other attributes (i.e. `Path`) are set correctly: if the client&#39;s cookie is set with `Path=/`, the server should set that same value before sending the cookie. Same goes for the other attributes.\r\n\r\nThis is how I have done it, in Go:\r\n```lang-go\r\n// Taken from the handler that logs users in:\r\nsession_id := generateRandomString()\r\ncookie := &amp;http.Cookie{\r\n\tName:     &quot;session&quot;,\r\n\tValue:    session_id,\r\n\tMaxAge:   int(time.Hour.Seconds()),\r\n\tSecure:   r.TLS != nil, // r is the typical *http.Request\r\n\tHttpOnly: true,\r\n\tSameSite: http.SameSiteStrictMode,\r\n\tPath:     &quot;/&quot;,\r\n}\r\nhttp.SetCookie(w, cookie)\r\n```\r\n```lang-go\r\n// Taken from the handler that logs users out:\r\ncookie, err := r.Cookie(&quot;session&quot;)\r\nif err != nil {\r\n\thttp.Error(w, &quot;cookie not found&quot;, http.StatusUnauthorized)\r\n\treturn\r\n}\r\n// Here goes the logic to log out the user.\r\n// Once that is done, it is time to send an expired cookie back:\r\nnewCookie := &amp;http.Cookie{\r\n\tName:     &quot;session&quot;,\r\n\tValue:    cookie.Value,\r\n\tMaxAge:   -1,\r\n\tSecure:   r.TLS != nil,\r\n\tHttpOnly: true,\r\n\tSameSite: http.SameSiteStrictMode,\r\n\tPath:     &quot;/&quot;,\r\n}\r\nhttp.SetCookie(w, newCookie)\r\n```\r\n\r\nFrom Go&#39;s source code for type `Cookie`:\r\n\r\n```lang-go\r\n// MaxAge=0 means no &#39;Max-Age&#39; attribute specified.\r\n// MaxAge&lt;0 means delete cookie now, equivalently &#39;Max-Age: 0&#39;\r\n```\r\n\r\n\r\n  [1]: https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>From <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie\" rel=\"nofollow noreferrer\">MDN</a>:</p>\n<blockquote>\n<p>Max-Age=&lt;number&gt;</p>\n<p>Indicates the number of seconds until the cookie expires. A zero or negative number will expire the cookie immediately. If both Expires and Max-Age are set, Max-Age has precedence.</p>\n</blockquote>\n<p>Make sure that other attributes (i.e. <code>Path</code>) are set correctly: if the client's cookie is set with <code>Path=/</code>, the server should set that same value before sending the cookie. Same goes for the other attributes.</p>\n<p>This is how I have done it, in Go:</p>\n<pre class=\"lang-go prettyprint-override\"><code>// Taken from the handler that logs users in:\nsession_id := generateRandomString()\ncookie := &amp;http.Cookie{\n    Name:     &quot;session&quot;,\n    Value:    session_id,\n    MaxAge:   int(time.Hour.Seconds()),\n    Secure:   r.TLS != nil, // r is the typical *http.Request\n    HttpOnly: true,\n    SameSite: http.SameSiteStrictMode,\n    Path:     &quot;/&quot;,\n}\nhttp.SetCookie(w, cookie)\n</code></pre>\n<pre class=\"lang-go prettyprint-override\"><code>// Taken from the handler that logs users out:\ncookie, err := r.Cookie(&quot;session&quot;)\nif err != nil {\n    http.Error(w, &quot;cookie not found&quot;, http.StatusUnauthorized)\n    return\n}\n// Here goes the logic to log out the user.\n// Once that is done, it is time to send an expired cookie back:\nnewCookie := &amp;http.Cookie{\n    Name:     &quot;session&quot;,\n    Value:    cookie.Value,\n    MaxAge:   -1,\n    Secure:   r.TLS != nil,\n    HttpOnly: true,\n    SameSite: http.SameSiteStrictMode,\n    Path:     &quot;/&quot;,\n}\nhttp.SetCookie(w, newCookie)\n</code></pre>\n<p>From Go's source code for type <code>Cookie</code>:</p>\n<pre class=\"lang-go prettyprint-override\"><code>// MaxAge=0 means no 'Max-Age' attribute specified.\n// MaxAge&lt;0 means delete cookie now, equivalently 'Max-Age: 0'\n</code></pre>\n"}],"owner":{"account_id":18150538,"reputation":159,"user_id":13203322,"display_name":"BaraKanske"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2950,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689942307,"creation_date":1604905778,"question_id":64747157,"body_markdown":"I have a website that, when a user logs in, creates an Access token which is stored in memory and a Refresh token that is stored in an HttpOnly cookie. When a user logs out I want to delete the HttpOnly cookie. however, since it&#39;s HttpOnly I am not able to do this with JavaScript, so instead my plan is to send another cookie from the server that is expired and overwrite the valid cookie. Unfortunately, for some reason, this does not work. \r\n\r\nThis is how I create the cookie in the first place:\r\n````\r\n String refreshToken = issueRefreshToken(username);\r\n long currentDate = Calendar.getInstance().getTimeInMillis();\r\n Date expDate = new Date(currentDate + 60 * 24 * 7 * ONE_MINUTE_IN_MILLIS);\r\n\r\n NewCookie newCookie = new NewCookie(&quot;RefreshCookie&quot;,\r\n                    refreshToken,\r\n                    &quot;/&quot;,\r\n                    null,\r\n                    NewCookie.DEFAULT_VERSION,\r\n                    &quot;Comment&quot;,\r\n                    60 * 60 * 24 * 7,\r\n                    expDate,\r\n                    false,\r\n                    true);\r\n\r\n            // Return the token  on the response\r\n return Response.ok(accessToken).cookie(newCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\r\n\r\n````\r\nThis works as intended and creates a Refresh cookie that is valid for one week. \r\n\r\nI have another endpoint (/logout) that creates another cookie, which is suppose to overwrite the first one. \r\n\r\n`````\r\n @POST\r\n public Response logout(){\r\n        NewCookie logoutCookie = new NewCookie(\r\n                &quot;RefreshCookie&quot;,\r\n                null,\r\n                &quot;/&quot;,\r\n                null,\r\n                NewCookie.DEFAULT_VERSION,\r\n                &quot;&quot;,\r\n                0,\r\n                new Date(),\r\n                false,\r\n                true);\r\n        return Response.ok().cookie(logoutCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\r\n    }\r\n`````\r\nThis cookie does not even get saved to the frontend when the first client is not set. I have tried to send it from a subpath of where the first cookie is set, with no luck. Is there something that I&#39;m missing here? Is this the wrong way to do it?","title":"How do I delete a HttpOnly Cookie on the client?","body":"<p>I have a website that, when a user logs in, creates an Access token which is stored in memory and a Refresh token that is stored in an HttpOnly cookie. When a user logs out I want to delete the HttpOnly cookie. however, since it's HttpOnly I am not able to do this with JavaScript, so instead my plan is to send another cookie from the server that is expired and overwrite the valid cookie. Unfortunately, for some reason, this does not work.</p>\n<p>This is how I create the cookie in the first place:</p>\n<pre><code> String refreshToken = issueRefreshToken(username);\n long currentDate = Calendar.getInstance().getTimeInMillis();\n Date expDate = new Date(currentDate + 60 * 24 * 7 * ONE_MINUTE_IN_MILLIS);\n\n NewCookie newCookie = new NewCookie(&quot;RefreshCookie&quot;,\n                    refreshToken,\n                    &quot;/&quot;,\n                    null,\n                    NewCookie.DEFAULT_VERSION,\n                    &quot;Comment&quot;,\n                    60 * 60 * 24 * 7,\n                    expDate,\n                    false,\n                    true);\n\n            // Return the token  on the response\n return Response.ok(accessToken).cookie(newCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\n\n</code></pre>\n<p>This works as intended and creates a Refresh cookie that is valid for one week.</p>\n<p>I have another endpoint (/logout) that creates another cookie, which is suppose to overwrite the first one.</p>\n<pre><code> @POST\n public Response logout(){\n        NewCookie logoutCookie = new NewCookie(\n                &quot;RefreshCookie&quot;,\n                null,\n                &quot;/&quot;,\n                null,\n                NewCookie.DEFAULT_VERSION,\n                &quot;&quot;,\n                0,\n                new Date(),\n                false,\n                true);\n        return Response.ok().cookie(logoutCookie).header(&quot;Access-Control-Allow-Credentials&quot;, true).build();\n    }\n</code></pre>\n<p>This cookie does not even get saved to the frontend when the first client is not set. I have tried to send it from a subpath of where the first cookie is set, with no luck. Is there something that I'm missing here? Is this the wrong way to do it?</p>\n"},{"tags":["java","eclipse","qr-code","zxing"],"comments":[{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":1,"creation_date":1689945196,"post_id":76737922,"comment_id":135288645,"body_markdown":"You did not import the right libraries. `com.google` is not from `javafx`. It&#39;s from some google library, hence why the package name includes `google`.","body":"You did not import the right libraries. <code>com.google</code> is not from <code>javafx</code>. It&#39;s from some google library, hence why the package name includes <code>google</code>."},{"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"score":0,"creation_date":1690034705,"post_id":76737922,"comment_id":135298188,"body_markdown":"So I cannot use the library in my JavaFX project... I&#39;m going to have to find another way to implement the QR code scanner and generator.","body":"So I cannot use the library in my JavaFX project... I&#39;m going to have to find another way to implement the QR code scanner and generator."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690041965,"post_id":76737922,"comment_id":135299133,"body_markdown":"Of course you can. just add the dependency to the project&#39;s dependency list.","body":"Of course you can. just add the dependency to the project&#39;s dependency list."},{"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"score":0,"creation_date":1690616377,"post_id":76737922,"comment_id":135380918,"body_markdown":"How do I &quot;add the dependency&quot; to the project&#39;s dependency list? I am using a JavaFXML in an Eclipse IDE. I already added the Jar files to the project&#39;s Java Build Path.","body":"How do I &quot;add the dependency&quot; to the project&#39;s dependency list? I am using a JavaFXML in an Eclipse IDE. I already added the Jar files to the project&#39;s Java Build Path."},{"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1690638985,"post_id":76737922,"comment_id":135383245,"body_markdown":"In your gradle or maven build description file. Adding the jars to the build path _will_ get rid of those errors, so double check that you really did that.","body":"In your gradle or maven build description file. Adding the jars to the build path <i>will</i> get rid of those errors, so double check that you really did that."}],"owner":{"account_id":29063733,"reputation":1,"user_id":22263807,"display_name":"kfpcraft"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689942074,"creation_date":1689941747,"question_id":76737922,"body_markdown":"I am trying to implement a QR code generator and scanner in a desktop application written in Java from the Eclipse IDE. I am following this tutorial: [Java code to Generate QR Code and Read QR Code using Camera https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s](https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s)\r\n\r\nHere is my code for generating the QR code:\r\n\r\n```\r\npackage application;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.Map;\r\n\r\nimport com.google.zxing.BarcodeFormat;\r\nimport com.google.zxing.MultiFormatWriter;\r\nimport com.google.zxing.WriterException;\r\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\r\nimport com.google.zxing.common.BitMatrix;\r\n\r\npublic class QRGenerator {\r\n    \r\n    public void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException {\r\n        BitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);\r\n        MatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf(&#39;.&#39;) + 1), new File(path));\r\n    } \r\n    \r\n}\r\n\r\n```\r\n\r\nI already imported the Jar Libraries into Eclipse using this other tutorial: [How to Import or Add Jar Libraries in Eclipse https://www.youtube.com/watch?v=zWTzZ4sNAFw] (https://www.youtube.com/watch?v=zWTzZ4sNAFw)\r\n\r\nThis is what my project folder looks like. The project name is Splogurt_OOP_MiniProject.\r\n[Jar files are imported into the project](https://i.stack.imgur.com/Kwho6.png)\r\n\r\nThe code should have no errors, but there are sqwiggly red lines under text like `com.google.zxing`, `com.google.zxing.client.j2se`, `com.google.zxing.common` and a few other parts of the code.\r\n\r\nThe errors say things like &quot;The package from com.google.zxing is not accessible.&quot;\r\n\r\n[Screenshot of my QR generator code.](https://i.stack.imgur.com/mYhjR.png)\r\n\r\nI already deleted and re-made my module-info.java file to try and fix this:\r\n\r\n```\r\nmodule Splogurt_OOP_MiniProject {\r\n    exports application;\r\n\r\n    requires javafx.base;\r\n    requires javafx.controls;\r\n    requires javafx.fxml;\r\n    requires javafx.graphics;\r\n    requires javase;\r\n    \r\n    opens application to javafx.graphics, javafx.fxml;\r\n    \r\n    requires Webcam;\r\n}\r\n```\r\n\r\nHow do I solve these errors?","title":"Eclipse IDE: The package com.google.zxing is not accessible, despite importing the right libraries","body":"<p>I am trying to implement a QR code generator and scanner in a desktop application written in Java from the Eclipse IDE. I am following this tutorial: <a href=\"https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s\" rel=\"nofollow noreferrer\">Java code to Generate QR Code and Read QR Code using Camera https://www.youtube.com/watch?v=oBibVwgi09g&amp;t=193s</a></p>\n<p>Here is my code for generating the QR code:</p>\n<pre><code>package application;\n\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Map;\n\nimport com.google.zxing.BarcodeFormat;\nimport com.google.zxing.MultiFormatWriter;\nimport com.google.zxing.WriterException;\nimport com.google.zxing.client.j2se.MatrixToImageWriter;\nimport com.google.zxing.common.BitMatrix;\n\npublic class QRGenerator {\n    \n    public void generateQRcode(String data, String path, String charset, Map map, int h, int w) throws WriterException, IOException {\n        BitMatrix matrix = new MultiFormatWriter().encode(new String(data.getBytes(charset), charset), BarcodeFormat.QR_CODE, w, h);\n        MatrixToImageWriter.writeToFile(matrix, path.substring(path.lastIndexOf('.') + 1), new File(path));\n    } \n    \n}\n\n</code></pre>\n<p>I already imported the Jar Libraries into Eclipse using this other tutorial: [How to Import or Add Jar Libraries in Eclipse https://www.youtube.com/watch?v=zWTzZ4sNAFw] (<a href=\"https://www.youtube.com/watch?v=zWTzZ4sNAFw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=zWTzZ4sNAFw</a>)</p>\n<p>This is what my project folder looks like. The project name is Splogurt_OOP_MiniProject.\n<a href=\"https://i.stack.imgur.com/Kwho6.png\" rel=\"nofollow noreferrer\">Jar files are imported into the project</a></p>\n<p>The code should have no errors, but there are sqwiggly red lines under text like <code>com.google.zxing</code>, <code>com.google.zxing.client.j2se</code>, <code>com.google.zxing.common</code> and a few other parts of the code.</p>\n<p>The errors say things like &quot;The package from com.google.zxing is not accessible.&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/mYhjR.png\" rel=\"nofollow noreferrer\">Screenshot of my QR generator code.</a></p>\n<p>I already deleted and re-made my module-info.java file to try and fix this:</p>\n<pre><code>module Splogurt_OOP_MiniProject {\n    exports application;\n\n    requires javafx.base;\n    requires javafx.controls;\n    requires javafx.fxml;\n    requires javafx.graphics;\n    requires javase;\n    \n    opens application to javafx.graphics, javafx.fxml;\n    \n    requires Webcam;\n}\n</code></pre>\n<p>How do I solve these errors?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-cloud-contract"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689888107,"post_id":76731711,"comment_id":135281053,"body_markdown":"i am suspecting the following but i cant test it out currently. according to https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-contract-stub-runner/4.0.3 stub-runner has an optional dependency on `spring-boot-starter-web` when you have both, spring-web and spring-webflux on the classpath the spring boot application will favor spring-web and start up a `non-reactive` spring application. In a spring-web application `HttpSecurity` is used and not `ServerHttpSecurity` hence you application crashes because it is started as a regular spring-web app.","body":"i am suspecting the following but i cant test it out currently. according to <a href=\"https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-contract-stub-runner/4.0.3\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.springframework.cloud/&hellip;</a> stub-runner has an optional dependency on <code>spring-boot-starter-web</code> when you have both, spring-web and spring-webflux on the classpath the spring boot application will favor spring-web and start up a <code>non-reactive</code> spring application. In a spring-web application <code>HttpSecurity</code> is used and not <code>ServerHttpSecurity</code> hence you application crashes because it is started as a regular spring-web app."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689888421,"post_id":76731711,"comment_id":135281091,"body_markdown":"if you could get a dependency tree printed and check if you have spring-web on the classpath it will confirm my theory. And if so you need to either exclude that optional library, or you can force your application to be started as a reactive application this is pointed out here https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.reactive.webflux about mid way down in the tip box. So by forcing you add `SpringApplication.setWebApplicationType(WebApplicationType.REACTIVE)` in the main function. Im only writing this as a comment because i cant confirm this.","body":"if you could get a dependency tree printed and check if you have spring-web on the classpath it will confirm my theory. And if so you need to either exclude that optional library, or you can force your application to be started as a reactive application this is pointed out here <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#web.reactive.webflux\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/htmlsingle&zwnj;&#8203;/&hellip;</a> about mid way down in the tip box. So by forcing you add <code>SpringApplication.setWebApplicationType(WebApplicationType.R&zwnj;&#8203;EACTIVE)</code> in the main function. Im only writing this as a comment because i cant confirm this."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689922410,"post_id":76731711,"comment_id":135284345,"body_markdown":"@Toerktumlare I have added it to the GitHub repo (content adds way too many characters for a SO post) https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt","body":"@Toerktumlare I have added it to the GitHub repo (content adds way too many characters for a SO post) <a href=\"https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\" rel=\"nofollow noreferrer\">github.com/favna/congenial-fishstick/blob/main/dependencies.&zwnj;&#8203;txt</a>"},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689923179,"post_id":76731711,"comment_id":135284471,"body_markdown":"As per your suggestion I changed the main function to this:\n```java\n\tpublic static void main(String[] args) {\n\t\tSpringApplication app = new SpringApplication(DemoApplication.class);\n\t\tapp.setWebApplicationType(WebApplicationType.REACTIVE);\n\t\tapp.run(args);\n\t}\n```\nBut to no avail, sadly.","body":"As per your suggestion I changed the main function to this: <code>java \tpublic static void main(String[] args) { \t\tSpringApplication app = new SpringApplication(DemoApplication.class); \t\tapp.setWebApplicationType(WebApplicationType.REACTIVE); \t\tapp.run(args); \t} </code> But to no avail, sadly."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689934823,"post_id":76731711,"comment_id":135286609,"body_markdown":"Been doing a lot more digging over the past couple of hours and it turns out that if I downgrade `spring-cloud-starter-contract-verifier` and `spring-cloud-starter-contract-stub-runner` to 3.1.8 (latest release on 3.x) the tests do pass. Sadly I am currently unable to find any form of changelog of breaking changes for v4.x so I&#39;m currently having a hard time validating why this would be.","body":"Been doing a lot more digging over the past couple of hours and it turns out that if I downgrade <code>spring-cloud-starter-contract-verifier</code> and <code>spring-cloud-starter-contract-stub-runner</code> to 3.1.8 (latest release on 3.x) the tests do pass. Sadly I am currently unable to find any form of changelog of breaking changes for v4.x so I&#39;m currently having a hard time validating why this would be."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1689940202,"post_id":76731711,"comment_id":135287600,"body_markdown":"Another update to the above, I retract that downgrade. It breaks lots of other stuff. Transitive dependencies with groovy, and even when fixing that it breaks runtime things. I also found another SO post that very explicitly stated that for Spring Boot 3, you need Spring Cloud Contract 4. So still no dice.","body":"Another update to the above, I retract that downgrade. It breaks lots of other stuff. Transitive dependencies with groovy, and even when fixing that it breaks runtime things. I also found another SO post that very explicitly stated that for Spring Boot 3, you need Spring Cloud Contract 4. So still no dice."},{"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"score":0,"creation_date":1690275932,"post_id":76731711,"comment_id":135327148,"body_markdown":"@Toerktumlare hey I just wanted to check if you could review the updated information again as I am still stuck?","body":"@Toerktumlare hey I just wanted to check if you could review the updated information again as I am still stuck?"}],"owner":{"account_id":13349282,"reputation":322,"user_id":9635150,"display_name":"Favna"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689941767,"creation_date":1689868838,"question_id":76731711,"body_markdown":"First of all, I will start by saying that I created a small project where this issue can be reproduced: https://github.com/favna/congenial-fishstick. Following I will more-or-less assume that the code in the repo is looked at.\r\n\r\n---\r\n\r\nI am currently in the process of updating many of our microservices from Java 11 to 17, and part of that upgrade is going from Spring 2 to Spring 3 and Spring Cloud Contract 2 to 4. After much digging I have noticed that adding `org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3` as a dependency to a project causes even the most basic boot unit test such as:\r\n```java\r\npackage com.example.demo;\r\n\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\r\n\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest()\r\nclass DemoApplicationTest {\r\n\t@Test\r\n\tvoid bootTest() {\r\n\t\t// EMPTY\r\n\t}\r\n}\r\n```\r\nwhich for all intents and purposes is identical to the official sample from Spring Security: https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java, except that it checks even less than the sample does.\r\n\r\nThe error it is giving is:\r\n```\r\njava.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@62b09715 testClass = com.example.demo.DemoApplicationTest, locations = [], classes = [com.example.demo.DemoApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986bbaf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2eee3069, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13d9b21f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@93cf163, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@25bfcafd, org.springframework.boot.test.context.SpringBootTestAnnotation@80d32d79], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\r\n\tat org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)\r\n\tat org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)\r\n\tat org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)\r\n\tat org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)\r\n\tat org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\r\n\tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n\tat java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\r\n\tat java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\r\n\tat java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\r\n\tat java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\r\n\tat java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\r\n\tat java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\r\n\tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n\tat org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\r\n\tat org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\r\n\tat org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\r\n\tat org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\r\n\tat org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\r\n\tat worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\r\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;springSecurityWebFilterChain&#39; defined in class path resource [com/example/demo/config/SecurityConfig.class]: Unsatisfied dependency expressed through method &#39;springSecurityWebFilterChain&#39; parameter 0: No qualifying bean of type &#39;org.springframework.security.config.web.server.ServerHttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\r\n\tat app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\r\n\tat app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\r\n\tat app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)\r\n\tat app//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)\r\n\tat app//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\r\n\tat app//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\n\tat app//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\r\n\tat app//org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\r\n\tat app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\r\n\tat app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\r\n\tat app//org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\r\n\tat app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\r\n\tat app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)\r\n\tat app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)\r\n\t... 86 more\r\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.security.config.web.server.ServerHttpSecurity&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\r\n\tat app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)\r\n\tat app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\r\n\t... 110 more\r\n```\r\n\r\nI am absolutely stumped as to why this issue is coming up, and using the Spring Cloud Contract Stub runner is an essential part of the microservices that we develop in the project I am working on.\r\n\r\nIn short the conditions that need to be met for this error to pop up:\r\n1. Have a dependency of `org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3`\r\n2. Have a test that uses the `@SpringBootTest` annotation\r\n3. Use Spring Security with a webflux configuration.\r\n\r\nWhat I have tried so far is (that is still relevant to the repro linked above anyway):\r\n1. Adding `@EnableWebFluxSecurity` to the `SecurityConfig` class.\r\n2. Making the `springSecurityWebFilterChain` bean method explicitly public\r\n3. Going through all the dependencies (multiple times by now) and ensuring each is on their latest version (as seen on Maven Central)\r\n\r\nI have tried many other things but those were in the microservices being updated and aren&#39;t relevant to the little bit of code that remains in the repro.\r\n\r\nEdit: As per requested in the comments I have added a dependencies tree as generated by `./gradlew -q dependencies &gt; dependencies.txt`: https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\r\n\r\nEdit 2: I have also made a Gradle Build Scan available: https://scans.gradle.com/s/h2uzcanvhk7fk","title":"Adding Spring Cloud Contract Stubrunner dependency causes Spring Security `ServerHttpSecurity` to not be autowire-able when running JUnit 5 tests","body":"<p>First of all, I will start by saying that I created a small project where this issue can be reproduced: <a href=\"https://github.com/favna/congenial-fishstick\" rel=\"nofollow noreferrer\">https://github.com/favna/congenial-fishstick</a>. Following I will more-or-less assume that the code in the repo is looked at.</p>\n<hr />\n<p>I am currently in the process of updating many of our microservices from Java 11 to 17, and part of that upgrade is going from Spring 2 to Spring 3 and Spring Cloud Contract 2 to 4. After much digging I have noticed that adding <code>org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3</code> as a dependency to a project causes even the most basic boot unit test such as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\n\n@ExtendWith(SpringExtension.class)\n@SpringBootTest()\nclass DemoApplicationTest {\n    @Test\n    void bootTest() {\n        // EMPTY\n    }\n}\n</code></pre>\n<p>which for all intents and purposes is identical to the official sample from Spring Security: <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-security-samples/blob/main/reactive/webflux/java/hello-security-explicit/src/test/java/example/HelloSecurityTests.java</a>, except that it checks even less than the sample does.</p>\n<p>The error it is giving is:</p>\n<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@62b09715 testClass = com.example.demo.DemoApplicationTest, locations = [], classes = [com.example.demo.DemoApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = [&quot;org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true&quot;], contextCustomizers = [org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@0, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@6986bbaf, org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2eee3069, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@13d9b21f, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@93cf163, org.springframework.boot.test.web.reactive.server.WebTestClientContextCustomizer@25bfcafd, org.springframework.boot.test.context.SpringBootTestAnnotation@80d32d79], resourceBasePath = &quot;src/main/webapp&quot;, contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:143)\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:110)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:90)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:85)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:62)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at jdk.proxy1/jdk.proxy1.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker$3.run(TestWorker.java:193)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.executeAndMaintainThreadName(TestWorker.java:129)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:100)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.execute(TestWorker.java:60)\n    at org.gradle.process.internal.worker.child.ActionExecutionWorker.execute(ActionExecutionWorker.java:56)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:113)\n    at org.gradle.process.internal.worker.child.SystemApplicationClassLoaderWorker.call(SystemApplicationClassLoaderWorker.java:65)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.run(GradleWorkerMain.java:69)\n    at worker.org.gradle.process.internal.worker.GradleWorkerMain.main(GradleWorkerMain.java:74)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'springSecurityWebFilterChain' defined in class path resource [com/example/demo/config/SecurityConfig.class]: Unsatisfied dependency expressed through method 'springSecurityWebFilterChain' parameter 0: No qualifying bean of type 'org.springframework.security.config.web.server.ServerHttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:800)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:550)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1332)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560)\n    at app//org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at app//org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at app//org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)\n    at app//org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:941)\n    at app//org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608)\n    at app//org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at app//org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436)\n    at app//org.springframework.boot.SpringApplication.run(SpringApplication.java:312)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)\n    at app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)\n    at app//org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)\n    at app//org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1406)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)\n    at app//org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)\n    at app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:187)\n    at app//org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:119)\n    ... 86 more\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.security.config.web.server.ServerHttpSecurity' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\n    at app//org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1337)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:888)\n    at app//org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)\n    ... 110 more\n</code></pre>\n<p>I am absolutely stumped as to why this issue is coming up, and using the Spring Cloud Contract Stub runner is an essential part of the microservices that we develop in the project I am working on.</p>\n<p>In short the conditions that need to be met for this error to pop up:</p>\n<ol>\n<li>Have a dependency of <code>org.springframework.cloud:spring-cloud-starter-contract-stub-runner:4.0.3</code></li>\n<li>Have a test that uses the <code>@SpringBootTest</code> annotation</li>\n<li>Use Spring Security with a webflux configuration.</li>\n</ol>\n<p>What I have tried so far is (that is still relevant to the repro linked above anyway):</p>\n<ol>\n<li>Adding <code>@EnableWebFluxSecurity</code> to the <code>SecurityConfig</code> class.</li>\n<li>Making the <code>springSecurityWebFilterChain</code> bean method explicitly public</li>\n<li>Going through all the dependencies (multiple times by now) and ensuring each is on their latest version (as seen on Maven Central)</li>\n</ol>\n<p>I have tried many other things but those were in the microservices being updated and aren't relevant to the little bit of code that remains in the repro.</p>\n<p>Edit: As per requested in the comments I have added a dependencies tree as generated by <code>./gradlew -q dependencies &gt; dependencies.txt</code>: <a href=\"https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt\" rel=\"nofollow noreferrer\">https://github.com/favna/congenial-fishstick/blob/main/dependencies.txt</a></p>\n<p>Edit 2: I have also made a Gradle Build Scan available: <a href=\"https://scans.gradle.com/s/h2uzcanvhk7fk\" rel=\"nofollow noreferrer\">https://scans.gradle.com/s/h2uzcanvhk7fk</a></p>\n"},{"tags":["java","logback","slf4j","osgi-bundle"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689605082,"post_id":76705573,"comment_id":135233409,"body_markdown":"That class seems to migrate between `classic` and `core`. Try `core`","body":"That class seems to migrate between <code>classic</code> and <code>core</code>. Try <code>core</code>"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689605133,"post_id":76705573,"comment_id":135233429,"body_markdown":"https://github.com/qos-ch/logback-db","body":"<a href=\"https://github.com/qos-ch/logback-db\" rel=\"nofollow noreferrer\">github.com/qos-ch/logback-db</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689605674,"post_id":76705573,"comment_id":135233542,"body_markdown":"https://mvnrepository.com/artifact/ch.qos.logback.db/logback-classic-db","body":"<a href=\"https://mvnrepository.com/artifact/ch.qos.logback.db/logback-classic-db\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/ch.qos.logback.db/logback-classic&zwnj;&#8203;-db</a>"},{"owner":{"account_id":3523773,"reputation":87,"user_id":2945440,"display_name":"skrenato"},"score":0,"creation_date":1689606037,"post_id":76705573,"comment_id":135233631,"body_markdown":"`osgi-log` (bundle for handling log) already has the dependency `implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;` set. Maybe I should highlight it","body":"<code>osgi-log</code> (bundle for handling log) already has the dependency <code>implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;</code> set. Maybe I should highlight it"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689610435,"post_id":76705573,"comment_id":135234578,"body_markdown":"Oops, so you do ;) I must confess I don&#39;t use Gradle, but needless to say that you&#39;ve got a *runtime* dependency problem. Maybe that class is not getting into what is executed","body":"Oops, so you do ;) I must confess I don&#39;t use Gradle, but needless to say that you&#39;ve got a <i>runtime</i> dependency problem. Maybe that class is not getting into what is executed"}],"owner":{"account_id":3523773,"reputation":87,"user_id":2945440,"display_name":"skrenato"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689941096,"creation_date":1689604872,"question_id":76705573,"body_markdown":"I&#39;ve been trying to apply configuration of a [DBAppender][1] in my OSGi application and I keep getting the following error:\r\n\r\n```java\r\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [DB]\r\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.db.DBAppender]\r\n10:12:59,285 |-ERROR in ch.qos.logback.core.model.processor.AppenderModelHandler - Could not create an Appender of type [ch.qos.logback.classic.db.DBAppender]. ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\r\n        at ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:69)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:44)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:33)\r\n        at      at ch.qos.logback.core.model.processor.AppenderModelHandler.handle(AppenderModelHandler.java:67)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:241)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\r\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:200)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:166)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\r\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\r\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configureByResource(DefaultJoranConfigurator.java:53)\r\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configure(DefaultJoranConfigurator.java:34)\r\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:98)\r\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:77)\r\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initializeLoggerContext(LogbackServiceProvider.java:50)\r\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initialize(LogbackServiceProvider.java:41)\r\n        at      at org.slf4j.LoggerFactory.bind(LoggerFactory.java:183)\r\n        at      at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:170)\r\n        at      at org.slf4j.LoggerFactory.getProvider(LoggerFactory.java:453)\r\n        at      at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:439)\r\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\r\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:414)\r\n        at      at prodist.robot.equinox.Application.&lt;clinit&gt;(Application.java:37)\r\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n        at      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n        at      at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n        at      at java.lang.Class.newInstance(Class.java:442)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:270)\r\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:331)\r\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\r\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\r\n        at      at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\r\n        at      at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\r\n        at      at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\r\n        at      at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\r\n        at      at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\r\n        at      at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\r\nCaused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\r\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\r\n        at      at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\r\n        at      at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\r\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:56)\r\n        at      ... 40 common frames omitted\r\n```\r\n\r\nI&#39;ve implemented an gradle module (`osgi-log`) to handle log only. This is his configuration:\r\n\r\n```groovy\r\ngroup &#39;project&#39;\r\nversion &#39;1.0.0&#39;\r\n\r\ndependencies {\r\n    api group: &#39;org.slf4j&#39;, name: &#39;slf4j-api&#39;, version: &#39;2.0.5&#39;\r\n\r\n    implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-classic&#39;, version: &#39;1.3.5&#39;\r\n    implementation group: &#39;ch.qos.logback&#39;, name: &#39;logback-core&#39;, version: &#39;1.3.5&#39;\r\n    implementation group: &#39;ch.qos.logback.db&#39;, name: &#39;logback-classic-db&#39;, version: &#39;1.2.11.1&#39;\r\n    implementation group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;8.0.33&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm-commons&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.ow2.asm&#39;, name: &#39;asm-util&#39;, version: &#39;5.2&#39;\r\n    implementation group: &#39;org.apache.aries.spifly&#39;, name: &#39;org.apache.aries.spifly.dynamic.bundle&#39;, version: &#39;1.3.5&#39;\r\n}\r\n```\r\n\r\nIn general, to use log in other bundles, I set a dependency like this:\r\n\r\n```\r\ndependencies {\r\n    implementation group: &#39;project&#39;, name: &#39;osgi-log&#39;\r\n}\r\n```\r\n\r\nNot sure if worth mentioning, but I&#39;m trying to work local - meaning both application and database are installed and running under localhost. I&#39;m using `mysql v.8.0.33`.\r\n\r\nAnd finally this is my logback configuration:\r\n\r\n```\r\n  &lt;appender name=&quot;DB&quot; class=&quot;ch.qos.logback.classic.db.DBAppender&quot;&gt;\r\n    &lt;connectionSource class=&quot;ch.qos.logback.core.db.DriverManagerConnectionSource&quot;&gt;\r\n      &lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;\r\n      &lt;url&gt;jdbc:mysql://127.0.0.1:3306/osgi_app&lt;/url&gt;\r\n      &lt;user&gt;osgi_app&lt;/user&gt;\r\n      &lt;password&gt;osgi_app&lt;/password&gt;\r\n    &lt;/connectionSource&gt;\r\n  &lt;/appender&gt;\r\n```\r\n\r\nI really don&#39;t understand why `BundleLoader` is struggling to find the `DBAppender` class.\r\nJust a disclaimer that I don&#39;t fully understand this environment, osgi, bundle and logback-classic working under slf4j.\r\n\r\n  [1]: https://logback.qos.ch/manual/appenders.html#DBAppender","title":"OSGI: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5","body":"<p>I've been trying to apply configuration of a <a href=\"https://logback.qos.ch/manual/appenders.html#DBAppender\" rel=\"nofollow noreferrer\">DBAppender</a> in my OSGi application and I keep getting the following error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - Processing appender named [DB]\n10:12:59,285 |-INFO in ch.qos.logback.core.model.processor.AppenderModelHandler - About to instantiate appender of type [ch.qos.logback.classic.db.DBAppender]\n10:12:59,285 |-ERROR in ch.qos.logback.core.model.processor.AppenderModelHandler - Could not create an Appender of type [ch.qos.logback.classic.db.DBAppender]. ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\n        at ch.qos.logback.core.util.DynamicClassLoadingException: Failed to instantiate type ch.qos.logback.classic.db.DBAppender\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:69)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:44)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassName(OptionHelper.java:33)\n        at      at ch.qos.logback.core.model.processor.AppenderModelHandler.handle(AppenderModelHandler.java:67)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:241)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.secondPhaseTraverse(DefaultProcessor.java:253)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.traversalLoop(DefaultProcessor.java:90)\n        at      at ch.qos.logback.core.model.processor.DefaultProcessor.process(DefaultProcessor.java:106)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.processModel(GenericXMLConfigurator.java:200)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:166)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:122)\n        at      at ch.qos.logback.core.joran.GenericXMLConfigurator.doConfigure(GenericXMLConfigurator.java:65)\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configureByResource(DefaultJoranConfigurator.java:53)\n        at      at ch.qos.logback.classic.util.DefaultJoranConfigurator.configure(DefaultJoranConfigurator.java:34)\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:98)\n        at      at ch.qos.logback.classic.util.ContextInitializer.autoConfig(ContextInitializer.java:77)\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initializeLoggerContext(LogbackServiceProvider.java:50)\n        at      at ch.qos.logback.classic.spi.LogbackServiceProvider.initialize(LogbackServiceProvider.java:41)\n        at      at org.slf4j.LoggerFactory.bind(LoggerFactory.java:183)\n        at      at org.slf4j.LoggerFactory.performInitialization(LoggerFactory.java:170)\n        at      at org.slf4j.LoggerFactory.getProvider(LoggerFactory.java:453)\n        at      at org.slf4j.LoggerFactory.getILoggerFactory(LoggerFactory.java:439)\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:388)\n        at      at org.slf4j.LoggerFactory.getLogger(LoggerFactory.java:414)\n        at      at prodist.robot.equinox.Application.&lt;clinit&gt;(Application.java:37)\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n        at      at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n        at      at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n        at      at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n        at      at java.lang.Class.newInstance(Class.java:442)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponent.createInstance(ServiceComponent.java:493)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.createInstance(ServiceComponentProp.java:270)\n        at      at org.eclipse.equinox.internal.ds.model.ServiceComponentProp.build(ServiceComponentProp.java:331)\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponent(InstanceProcess.java:620)\n        at      at org.eclipse.equinox.internal.ds.InstanceProcess.buildComponents(InstanceProcess.java:197)\n        at      at org.eclipse.equinox.internal.ds.Resolver.buildNewlySatisfied(Resolver.java:473)\n        at      at org.eclipse.equinox.internal.ds.Resolver.enableComponents(Resolver.java:217)\n        at      at org.eclipse.equinox.internal.ds.SCRManager.performWork(SCRManager.java:816)\n        at      at org.eclipse.equinox.internal.ds.SCRManager$QueuedJob.dispatch(SCRManager.java:783)\n        at      at org.eclipse.equinox.internal.ds.WorkThread.run(WorkThread.java:89)\n        at      at org.eclipse.equinox.internal.util.impl.tpt.threadpool.Executor.run(Executor.java:70)\nCaused by: java.lang.ClassNotFoundException: ch.qos.logback.classic.db.DBAppender cannot be found by ch.qos.logback.classic_1.3.5\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\n        at      at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\n        at      at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\n        at      at java.lang.ClassLoader.loadClass(ClassLoader.java:352)\n        at      at ch.qos.logback.core.util.OptionHelper.instantiateByClassNameAndParameter(OptionHelper.java:56)\n        at      ... 40 common frames omitted\n</code></pre>\n<p>I've implemented an gradle module (<code>osgi-log</code>) to handle log only. This is his configuration:</p>\n<pre><code>group 'project'\nversion '1.0.0'\n\ndependencies {\n    api group: 'org.slf4j', name: 'slf4j-api', version: '2.0.5'\n\n    implementation group: 'ch.qos.logback', name: 'logback-classic', version: '1.3.5'\n    implementation group: 'ch.qos.logback', name: 'logback-core', version: '1.3.5'\n    implementation group: 'ch.qos.logback.db', name: 'logback-classic-db', version: '1.2.11.1'\n    implementation group: 'mysql', name: 'mysql-connector-java', version: '8.0.33'\n    implementation group: 'org.ow2.asm', name: 'asm', version: '5.2'\n    implementation group: 'org.ow2.asm', name: 'asm-commons', version: '5.2'\n    implementation group: 'org.ow2.asm', name: 'asm-util', version: '5.2'\n    implementation group: 'org.apache.aries.spifly', name: 'org.apache.aries.spifly.dynamic.bundle', version: '1.3.5'\n}\n</code></pre>\n<p>In general, to use log in other bundles, I set a dependency like this:</p>\n<pre><code>dependencies {\n    implementation group: 'project', name: 'osgi-log'\n}\n</code></pre>\n<p>Not sure if worth mentioning, but I'm trying to work local - meaning both application and database are installed and running under localhost. I'm using <code>mysql v.8.0.33</code>.</p>\n<p>And finally this is my logback configuration:</p>\n<pre><code>  &lt;appender name=&quot;DB&quot; class=&quot;ch.qos.logback.classic.db.DBAppender&quot;&gt;\n    &lt;connectionSource class=&quot;ch.qos.logback.core.db.DriverManagerConnectionSource&quot;&gt;\n      &lt;driverClass&gt;com.mysql.jdbc.Driver&lt;/driverClass&gt;\n      &lt;url&gt;jdbc:mysql://127.0.0.1:3306/osgi_app&lt;/url&gt;\n      &lt;user&gt;osgi_app&lt;/user&gt;\n      &lt;password&gt;osgi_app&lt;/password&gt;\n    &lt;/connectionSource&gt;\n  &lt;/appender&gt;\n</code></pre>\n<p>I really don't understand why <code>BundleLoader</code> is struggling to find the <code>DBAppender</code> class.\nJust a disclaimer that I don't fully understand this environment, osgi, bundle and logback-classic working under slf4j.</p>\n"},{"tags":["java","mysql","spring-boot","error-handling","breakpoints"],"comments":[{"owner":{"account_id":15102634,"reputation":338,"user_id":10899197,"display_name":"Tr1monster"},"score":1,"creation_date":1689941289,"post_id":76737512,"comment_id":135287805,"body_markdown":"There is a blank space in front of your PW. I&#39;m not sure if this cause your trouble.","body":"There is a blank space in front of your PW. I&#39;m not sure if this cause your trouble."}],"owner":{"account_id":28422388,"reputation":35,"user_id":21744271,"display_name":"Anonymous"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689940193,"creation_date":1689938445,"question_id":76737512,"body_markdown":"I am creating a Spring Boot application using the mysql database dependency however I am getting the error:\r\n`java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES)`\r\n\r\n\r\nI have included my pom.xml and application.properties files below:\r\n\r\n**application.properties**\r\n\r\n```\r\nspring.datasource.url=jdbc:mysql://localhost:3306/AssignmentSubApp_DB\r\nspring.datasource.username=root\r\nspring.datasource.password= password123\r\n\r\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\r\nspring.jpa.show-sql=true\r\n#spring.jpa.hibernate.ddl-auto=update\r\n```\r\nThe above are my application.properties settings that I have selected are above, and I am not too sure if these are the reasons for the error. I have tried changing, however, the error remained.\r\n\r\n**pom.xml**\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.AssignmentApp&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;AssignmentSubmission&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;name&gt;AssignmentSubmission&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n","title":"Error: Access denied for user &#39;root&#39;@&#39;localhost&#39; (using password: YES) using mysql in Spring Boot","body":"<p>I am creating a Spring Boot application using the mysql database dependency however I am getting the error:\n<code>java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)</code></p>\n<p>I have included my pom.xml and application.properties files below:</p>\n<p><strong>application.properties</strong></p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/AssignmentSubApp_DB\nspring.datasource.username=root\nspring.datasource.password= password123\n\nspring.jpa.database-platform=org.hibernate.dialect.MySQLDialect\nspring.jpa.show-sql=true\n#spring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>The above are my application.properties settings that I have selected are above, and I am not too sure if these are the reasons for the error. I have tried changing, however, the error remained.</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.AssignmentApp&lt;/groupId&gt;\n    &lt;artifactId&gt;AssignmentSubmission&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;AssignmentSubmission&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n"},{"tags":["java","windows","swing","java-17","swingutilities"],"comments":[{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":1,"creation_date":1689779253,"post_id":76722326,"comment_id":135262448,"body_markdown":"You could write a wrapper method that checks for a secondary display and divides the X and Y by the scaling factor (percentage divided by 100).  As an example, 300 / 1.5 (150%) equals 200.","body":"You could write a wrapper method that checks for a secondary display and divides the X and Y by the scaling factor (percentage divided by 100).  As an example, 300 / 1.5 (150%) equals 200."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1689861710,"post_id":76722326,"comment_id":135275690,"body_markdown":"You wrote in your question: _`MouseInfo.getPointerInfo().getLocation();` delivers also the wrong location._ Pardon me, but how do you know that it is the wrong location? Maybe you could post a [mcve] so that I can see if it occurs on my computer as well?","body":"You wrote in your question: <i><code>MouseInfo.getPointerInfo().getLocation();</code> delivers also the wrong location.</i> Pardon me, but how do you know that it is the wrong location? Maybe you could post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> so that I can see if it occurs on my computer as well?"}],"owner":{"account_id":8321153,"reputation":19,"user_id":6252809,"display_name":"Ben Janus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689939989,"creation_date":1689776430,"question_id":76722326,"body_markdown":"I want to call `SwingUtilities.convertPointToScreen(clickPoint, component)` but i want a result where the windows scaling is NOT taken into account.\r\n\r\nWhen the click occurs on the primary screen the point is correct, but if the click was made on the second screen the coordinates are wrong because now the windows scaling is taken into account.\r\n\r\nI tried to calculate the scaling out (with AffineTransform.inverseTransform()) but this seems wrong that i need to manually calculate around.\r\n\r\n`MouseInfo.getPointerInfo().getLocation();` delivers also the wrong location.\r\n\r\nThe whole problem occurs since i switched from java 11 to java 17.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/QSJOs.png","title":"Can SwingUtilities.getLocationOnScreen() ignore windows scaling?","body":"<p>I want to call <code>SwingUtilities.convertPointToScreen(clickPoint, component)</code> but i want a result where the windows scaling is NOT taken into account.</p>\n<p>When the click occurs on the primary screen the point is correct, but if the click was made on the second screen the coordinates are wrong because now the windows scaling is taken into account.</p>\n<p>I tried to calculate the scaling out (with AffineTransform.inverseTransform()) but this seems wrong that i need to manually calculate around.</p>\n<p><code>MouseInfo.getPointerInfo().getLocation();</code> delivers also the wrong location.</p>\n<p>The whole problem occurs since i switched from java 11 to java 17.</p>\n<p><a href=\"https://i.stack.imgur.com/QSJOs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QSJOs.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","jvm","language-lawyer","java-bytecode-asm","jvm-bytecode"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689918073,"post_id":76735066,"comment_id":135283688,"body_markdown":"The quotation describes what the bytecode verifier does for its own purposes. Not what you can put into a bytecode instruction stream.","body":"The quotation describes what the bytecode verifier does for its own purposes. Not what you can put into a bytecode instruction stream."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689920923,"post_id":76735066,"comment_id":135284088,"body_markdown":"Your bytecode fails at &quot;[Verification by type checking](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.1)&quot;. I think it violated some of the rules there, regarding whether two frames are assignable. The bytecode verifier section is rather irrelevant.","body":"Your bytecode fails at &quot;<a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.1\" rel=\"nofollow noreferrer\">Verification by type checking</a>&quot;. I think it violated some of the rules there, regarding whether two frames are assignable. The bytecode verifier section is rather irrelevant."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1689935091,"post_id":76735066,"comment_id":135286661,"body_markdown":"@Sweeper this code intentionally creates a class file for Java&#160;5, which must be verified by type checking, as there are no frames.","body":"@Sweeper this code intentionally creates a class file for Java 5, which must be verified by type checking, as there are no frames."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1689936041,"post_id":76735066,"comment_id":135286855,"body_markdown":"@Holger Oh I missed that detail! Looking at the old specs, there aren&#39;t even prolog rules for each instruction. I&#39;m now extremely confused as to how old JVMs did type-checking.","body":"@Holger Oh I missed that detail! Looking at the old specs, there aren&#39;t even prolog rules for each instruction. I&#39;m now extremely confused as to how old JVMs did type-checking."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1689940558,"post_id":76735066,"comment_id":135287671,"body_markdown":"@Sweeper actually, I don’t think that these Prolog rules add anything useful. The JVM’s verifier surely isn’t implemented in Prolog and neither is the target audience of the JVM specification expected to be fluent in reading Prolog. Most people will still use the textual information between the Prolog snippets, which is not so much different to the situation with the old verification rules.","body":"@Sweeper actually, I don’t think that these Prolog rules add anything useful. The JVM’s verifier surely isn’t implemented in Prolog and neither is the target audience of the JVM specification expected to be fluent in reading Prolog. Most people will still use the textual information between the Prolog snippets, which is not so much different to the situation with the old verification rules."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689939783,"creation_date":1689939783,"answer_id":76737675,"question_id":76735066,"body_markdown":"Java&#160;7’s JVM specification [looked like]:\r\n\r\n&gt; To merge two operand stacks, the number of values on each stack must be identical. The types of values on the stacks must also be identical, except that differently typed `reference` values may appear at corresponding places on the two stacks. In this case, the merged operand stack contains a `reference` to an instance of the first common superclass of the two types. Such a `reference` type always exists because the type `Object` is a superclass of all class and interface types. If the operand stacks cannot be merged, verification of the method fails.\r\n\r\nwhich is pretty straight-forward and does not contain any special rules for array types. Since this rule requires consulting the JLS anyway regarding the common superclass of the two reference types, we can [do that for arrays too], to find the, e.g. `Integer[]` and `Long[]` have the common superclass `Number[]`, but `int[]`’s direct superclass is `Object` and it’s assignable to `Cloneable` and `Serializable` but not `Object[]`.\r\n\r\nThen, the specification was [changed with Java&#160;8] (Note that this part about arrays is the only change in the “Verification by Type Inference” section).\r\n\r\nSince then, it reads as you already cited:\r\n\r\n&gt; If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a `reference` to an instance of an array type which is first common supertype of both array types.\r\n\r\nSo far so as-before. It could stop here, instead of contradicting itself in the subsequent part:\r\n\r\n&gt; (If either or both of the array types has a primitive element type, then `Object` is used as the element type instead.)\r\n\r\nKeep in mind that there is no extra rule for the case that both types are the same. So if we take this insertion at face value, it even implies that merging `int[]` and `int[]` has to result in `Object[]` because “either or both of the array types has a primitive element type”.\r\n\r\nThis is easy to disprove\r\n\r\n```java\r\nint[] array = Math.random() &gt; 0.5? new int[5]: new int[10];\r\nSystem.out.println(array[3]);\r\n```\r\n\r\nworks with all Java versions and does not cause problems like “`iaload` used with the (merged) type `Object[]`”.\r\n\r\nI’m also skipping the part about the different dimensions and obvious examples. \r\n\r\n&gt; …\r\n&gt; Even `int[]` and `String[]` can be merged; the result is `Object[]`, because `Object` is used instead of `int` when computing the first common supertype.\r\n\r\nThis is a special situation. This time, it’s not a problematic wording or a too complex matter leading to misinterpretation, here, the author explicitly states that it is meant that way and the way it’s meant is just … as wrong as an information can be.\r\n\r\nIt even violates common sense.\r\n\r\nYou already wrote “*I did never expect this to work in the first place*” and how should it? What should the JVM do in the subsequent code if it really allowed an `int[]` to pass as `Object[]`?\r\n\r\nThere is no part in the specification explaining how the JVM should deal with it and whatever way it should be treated, it would require drastic changes to the implementation.\r\n\r\nOne option would be to produce errors when later code tries to access the `int[]` array as `Object[]`. Of course, it makes no sense to change the JVM to allow something, just to forbid the result at other places.\r\n\r\nThe other option would be to implement an autoboxing feature at JVM level. Considering the amount of work for such a change, it would be a weird approach, to implement such a feature and only enable it when uncommon bytecode with an outdated class file version merges two differently typed arrays on two code paths.\r\n\r\nLikewise, it would be a strange approach to insert such a statement in the specification, just to add another rule somewhere else explaining why it doesn’t work. So I don’t think you’re missing something; I don’t expect to find such a statement anywhere. This obviously wrong statement shouldn’t exist in the first place.\r\n\r\n[looked like]: https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.2.2-300\r\n[do that for arrays too]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3\r\n[changed with Java&#160;8]: https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.2.2-300","title":"Merging int[] and String[] should result in Object[]","body":"<p>Java 7’s JVM specification <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">looked like</a>:</p>\n<blockquote>\n<p>To merge two operand stacks, the number of values on each stack must be identical. The types of values on the stacks must also be identical, except that differently typed <code>reference</code> values may appear at corresponding places on the two stacks. In this case, the merged operand stack contains a <code>reference</code> to an instance of the first common superclass of the two types. Such a <code>reference</code> type always exists because the type <code>Object</code> is a superclass of all class and interface types. If the operand stacks cannot be merged, verification of the method fails.</p>\n</blockquote>\n<p>which is pretty straight-forward and does not contain any special rules for array types. Since this rule requires consulting the JLS anyway regarding the common superclass of the two reference types, we can <a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10.3\" rel=\"nofollow noreferrer\">do that for arrays too</a>, to find the, e.g. <code>Integer[]</code> and <code>Long[]</code> have the common superclass <code>Number[]</code>, but <code>int[]</code>’s direct superclass is <code>Object</code> and it’s assignable to <code>Cloneable</code> and <code>Serializable</code> but not <code>Object[]</code>.</p>\n<p>Then, the specification was <a href=\"https://docs.oracle.com/javase/specs/jvms/se8/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">changed with Java 8</a> (Note that this part about arrays is the only change in the “Verification by Type Inference” section).</p>\n<p>Since then, it reads as you already cited:</p>\n<blockquote>\n<p>If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a <code>reference</code> to an instance of an array type which is first common supertype of both array types.</p>\n</blockquote>\n<p>So far so as-before. It could stop here, instead of contradicting itself in the subsequent part:</p>\n<blockquote>\n<p>(If either or both of the array types has a primitive element type, then <code>Object</code> is used as the element type instead.)</p>\n</blockquote>\n<p>Keep in mind that there is no extra rule for the case that both types are the same. So if we take this insertion at face value, it even implies that merging <code>int[]</code> and <code>int[]</code> has to result in <code>Object[]</code> because “either or both of the array types has a primitive element type”.</p>\n<p>This is easy to disprove</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] array = Math.random() &gt; 0.5? new int[5]: new int[10];\nSystem.out.println(array[3]);\n</code></pre>\n<p>works with all Java versions and does not cause problems like “<code>iaload</code> used with the (merged) type <code>Object[]</code>”.</p>\n<p>I’m also skipping the part about the different dimensions and obvious examples.</p>\n<blockquote>\n<p>…\nEven <code>int[]</code> and <code>String[]</code> can be merged; the result is <code>Object[]</code>, because <code>Object</code> is used instead of <code>int</code> when computing the first common supertype.</p>\n</blockquote>\n<p>This is a special situation. This time, it’s not a problematic wording or a too complex matter leading to misinterpretation, here, the author explicitly states that it is meant that way and the way it’s meant is just … as wrong as an information can be.</p>\n<p>It even violates common sense.</p>\n<p>You already wrote “<em>I did never expect this to work in the first place</em>” and how should it? What should the JVM do in the subsequent code if it really allowed an <code>int[]</code> to pass as <code>Object[]</code>?</p>\n<p>There is no part in the specification explaining how the JVM should deal with it and whatever way it should be treated, it would require drastic changes to the implementation.</p>\n<p>One option would be to produce errors when later code tries to access the <code>int[]</code> array as <code>Object[]</code>. Of course, it makes no sense to change the JVM to allow something, just to forbid the result at other places.</p>\n<p>The other option would be to implement an autoboxing feature at JVM level. Considering the amount of work for such a change, it would be a weird approach, to implement such a feature and only enable it when uncommon bytecode with an outdated class file version merges two differently typed arrays on two code paths.</p>\n<p>Likewise, it would be a strange approach to insert such a statement in the specification, just to add another rule somewhere else explaining why it doesn’t work. So I don’t think you’re missing something; I don’t expect to find such a statement anywhere. This obviously wrong statement shouldn’t exist in the first place.</p>\n"}],"owner":{"account_id":785560,"reputation":14879,"user_id":845414,"display_name":"Johannes Kuhn"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76737675,"answer_count":1,"score":2,"last_activity_date":1689939783,"creation_date":1689912645,"question_id":76735066,"body_markdown":"After carefully reading [JVMS &#167;4.10.2.2](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.2.2-300), I noticed the following paragraph:\r\n\r\n&gt;  If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a reference to an instance of an array type which is first common supertype of both array types. (If either or both of the array types has a primitive element type, then Object is used as the element type instead.) [...]\r\n&gt; \r\n&gt; [...] **Even int[] and String[] can be merged; the result is Object[]**, because Object is used instead of int when computing the first common supertype. \r\n\r\n`int[]` should not be a subtype of `Object[]`, so this is interesting, let&#39;s test this:\r\n\r\n```java\r\npackage test.se17;\r\n\r\nimport org.objectweb.asm.ClassWriter;\r\nimport org.objectweb.asm.Label;\r\nimport org.objectweb.asm.MethodVisitor;\r\nimport static org.objectweb.asm.Opcodes.*;\r\n\r\nimport java.lang.invoke.MethodHandles;\r\n\r\npublic class CastArrayDump {\r\n    \r\n    public static byte[] dump() throws Exception {\r\n        \r\n        ClassWriter classWriter = new ClassWriter(0);\r\n        MethodVisitor methodVisitor;\r\n        \r\n        classWriter.visit(V1_5, ACC_PUBLIC | ACC_SUPER, &quot;test/se17/CastArray&quot;, null,\r\n                &quot;java/lang/Object&quot;, null);\r\n        \r\n        {\r\n            methodVisitor = classWriter.visitMethod(ACC_PUBLIC | ACC_STATIC, &quot;cast&quot;,\r\n                    &quot;(Ljava/lang/Object;)[Ljava/lang/Object;&quot;, null, null);\r\n            methodVisitor.visitCode();\r\n            Label end = new Label();\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[I&quot;);\r\n            Label notint = new Label();\r\n            methodVisitor.visitJumpInsn(IFEQ, notint);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[I&quot;);\r\n            methodVisitor.visitJumpInsn(GOTO, end);\r\n            methodVisitor.visitLabel(notint);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[Ljava/lang/String;&quot;);\r\n            Label notobj = new Label();\r\n            methodVisitor.visitJumpInsn(IFEQ, notobj);\r\n            methodVisitor.visitVarInsn(ALOAD, 0);\r\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[Ljava/lang/String;&quot;);\r\n            methodVisitor.visitJumpInsn(GOTO, end);\r\n            methodVisitor.visitLabel(notobj);\r\n            methodVisitor.visitMethodInsn(INVOKESTATIC, &quot;test/se17/CastArray&quot;,\r\n                    &quot;newIllegalArgumentException&quot;, &quot;()Ljava/lang/IllegalArgumentException;&quot;, false);\r\n            methodVisitor.visitInsn(ATHROW);\r\n            methodVisitor.visitLabel(end);\r\n            methodVisitor.visitInsn(ARETURN);\r\n            methodVisitor.visitMaxs(2, 2);\r\n            methodVisitor.visitEnd();\r\n        }\r\n        {\r\n            methodVisitor =\r\n                    classWriter.visitMethod(ACC_PRIVATE | ACC_STATIC, &quot;newIllegalArgumentException&quot;,\r\n                            &quot;()Ljava/lang/IllegalArgumentException;&quot;, null, null);\r\n            methodVisitor.visitCode();\r\n            Label label0 = new Label();\r\n            methodVisitor.visitTypeInsn(NEW, &quot;java/lang/IllegalArgumentException&quot;);\r\n            methodVisitor.visitInsn(DUP);\r\n            methodVisitor.visitMethodInsn(INVOKESPECIAL, &quot;java/lang/IllegalArgumentException&quot;,\r\n                    &quot;&lt;init&gt;&quot;, &quot;()V&quot;, false);\r\n            methodVisitor.visitInsn(ARETURN);\r\n            methodVisitor.visitMaxs(2, 0);\r\n            methodVisitor.visitEnd();\r\n        }\r\n        classWriter.visitEnd();\r\n        \r\n        return classWriter.toByteArray();\r\n    }\r\n    \r\n    public static void main(String[] args) throws IllegalAccessException, Exception {\r\n        MethodHandles.lookup().defineClass(dump());\r\n        test();\r\n    }\r\n    \r\n    private static void test() {\r\n        System.out.println(CastArray.cast(new String[0]));\r\n    }\r\n}\r\n```\r\nNote that `CastArrayDump` is compiled against a stub `CastArray` with a `cast` method that has the same signature.\r\n\r\nWhen running this code I get the following exception:\r\n\r\n&lt;pre&gt;\r\nException in thread &quot;main&quot; java.lang.VerifyError: (class: test/se17/CastArray, method: cast signature: (Ljava/lang/Object;)[Ljava/lang/Object;) Wrong return type in function\r\n\tat java.base/java.lang.ClassLoader.defineClass0(Native Method)\r\n\tat java.base/java.lang.System$2.defineClass(System.java:2307)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2439)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2416)\r\n\tat java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:1843)\r\n\tat test.se17/test.se17.CastArrayDump.main(CastArrayDump.java:69)\r\n&lt;/pre&gt;\r\n\r\nIn the `cast`, the control flow merges with the `end` label.  \r\nOn the stack we have either a `String[]` or a `int[]` - which should be merged into `Object[]`.  \r\n\r\n&gt;  An areturn instruction is type safe iff the enclosing method has a declared return type, ReturnType, that is a reference type, and one can validly pop a type matching ReturnType off the incoming operand stack.\r\n\r\nNow, there should be a `Object[]` on the stack, because we just merged into that.  \r\nBut for some reason, this is not the case, and we get &quot;Wrong return type in function&quot;.\r\n\r\nSo, I must be missing something in the JVMS that forbids this.  \r\n**Where in the JVMS does it state that this does not work?**\r\n\r\n(*To be clear: I did never expect this to work in the first place*)","title":"Merging int[] and String[] should result in Object[]","body":"<p>After carefully reading <a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10.2.2-300\" rel=\"nofollow noreferrer\">JVMS §4.10.2.2</a>, I noticed the following paragraph:</p>\n<blockquote>\n<p>If corresponding values are both array reference types, then their dimensions are examined. If the array types have the same dimensions, then the merged value is a reference to an instance of an array type which is first common supertype of both array types. (If either or both of the array types has a primitive element type, then Object is used as the element type instead.) [...]</p>\n<p>[...] <strong>Even int[] and String[] can be merged; the result is Object[]</strong>, because Object is used instead of int when computing the first common supertype.</p>\n</blockquote>\n<p><code>int[]</code> should not be a subtype of <code>Object[]</code>, so this is interesting, let's test this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package test.se17;\n\nimport org.objectweb.asm.ClassWriter;\nimport org.objectweb.asm.Label;\nimport org.objectweb.asm.MethodVisitor;\nimport static org.objectweb.asm.Opcodes.*;\n\nimport java.lang.invoke.MethodHandles;\n\npublic class CastArrayDump {\n    \n    public static byte[] dump() throws Exception {\n        \n        ClassWriter classWriter = new ClassWriter(0);\n        MethodVisitor methodVisitor;\n        \n        classWriter.visit(V1_5, ACC_PUBLIC | ACC_SUPER, &quot;test/se17/CastArray&quot;, null,\n                &quot;java/lang/Object&quot;, null);\n        \n        {\n            methodVisitor = classWriter.visitMethod(ACC_PUBLIC | ACC_STATIC, &quot;cast&quot;,\n                    &quot;(Ljava/lang/Object;)[Ljava/lang/Object;&quot;, null, null);\n            methodVisitor.visitCode();\n            Label end = new Label();\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[I&quot;);\n            Label notint = new Label();\n            methodVisitor.visitJumpInsn(IFEQ, notint);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[I&quot;);\n            methodVisitor.visitJumpInsn(GOTO, end);\n            methodVisitor.visitLabel(notint);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(INSTANCEOF, &quot;[Ljava/lang/String;&quot;);\n            Label notobj = new Label();\n            methodVisitor.visitJumpInsn(IFEQ, notobj);\n            methodVisitor.visitVarInsn(ALOAD, 0);\n            methodVisitor.visitTypeInsn(CHECKCAST, &quot;[Ljava/lang/String;&quot;);\n            methodVisitor.visitJumpInsn(GOTO, end);\n            methodVisitor.visitLabel(notobj);\n            methodVisitor.visitMethodInsn(INVOKESTATIC, &quot;test/se17/CastArray&quot;,\n                    &quot;newIllegalArgumentException&quot;, &quot;()Ljava/lang/IllegalArgumentException;&quot;, false);\n            methodVisitor.visitInsn(ATHROW);\n            methodVisitor.visitLabel(end);\n            methodVisitor.visitInsn(ARETURN);\n            methodVisitor.visitMaxs(2, 2);\n            methodVisitor.visitEnd();\n        }\n        {\n            methodVisitor =\n                    classWriter.visitMethod(ACC_PRIVATE | ACC_STATIC, &quot;newIllegalArgumentException&quot;,\n                            &quot;()Ljava/lang/IllegalArgumentException;&quot;, null, null);\n            methodVisitor.visitCode();\n            Label label0 = new Label();\n            methodVisitor.visitTypeInsn(NEW, &quot;java/lang/IllegalArgumentException&quot;);\n            methodVisitor.visitInsn(DUP);\n            methodVisitor.visitMethodInsn(INVOKESPECIAL, &quot;java/lang/IllegalArgumentException&quot;,\n                    &quot;&lt;init&gt;&quot;, &quot;()V&quot;, false);\n            methodVisitor.visitInsn(ARETURN);\n            methodVisitor.visitMaxs(2, 0);\n            methodVisitor.visitEnd();\n        }\n        classWriter.visitEnd();\n        \n        return classWriter.toByteArray();\n    }\n    \n    public static void main(String[] args) throws IllegalAccessException, Exception {\n        MethodHandles.lookup().defineClass(dump());\n        test();\n    }\n    \n    private static void test() {\n        System.out.println(CastArray.cast(new String[0]));\n    }\n}\n</code></pre>\n<p>Note that <code>CastArrayDump</code> is compiled against a stub <code>CastArray</code> with a <code>cast</code> method that has the same signature.</p>\n<p>When running this code I get the following exception:</p>\n<pre>\nException in thread \"main\" java.lang.VerifyError: (class: test/se17/CastArray, method: cast signature: (Ljava/lang/Object;)[Ljava/lang/Object;) Wrong return type in function\n    at java.base/java.lang.ClassLoader.defineClass0(Native Method)\n    at java.base/java.lang.System$2.defineClass(System.java:2307)\n    at java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2439)\n    at java.base/java.lang.invoke.MethodHandles$Lookup$ClassDefiner.defineClass(MethodHandles.java:2416)\n    at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:1843)\n    at test.se17/test.se17.CastArrayDump.main(CastArrayDump.java:69)\n</pre>\n<p>In the <code>cast</code>, the control flow merges with the <code>end</code> label.<br />\nOn the stack we have either a <code>String[]</code> or a <code>int[]</code> - which should be merged into <code>Object[]</code>.</p>\n<blockquote>\n<p>An areturn instruction is type safe iff the enclosing method has a declared return type, ReturnType, that is a reference type, and one can validly pop a type matching ReturnType off the incoming operand stack.</p>\n</blockquote>\n<p>Now, there should be a <code>Object[]</code> on the stack, because we just merged into that.<br />\nBut for some reason, this is not the case, and we get &quot;Wrong return type in function&quot;.</p>\n<p>So, I must be missing something in the JVMS that forbids this.<br />\n<strong>Where in the JVMS does it state that this does not work?</strong></p>\n<p>(<em>To be clear: I did never expect this to work in the first place</em>)</p>\n"},{"tags":["java","json","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689939479,"post_id":76737610,"comment_id":135287459,"body_markdown":"Yes, reading as a byte[] is fine. Directly reading from the request&#39;s `InputStream` would be even better. I&#39;m not sure why Jackson claims differently: The same logic as for the output applies: Why construct an intermediate?","body":"Yes, reading as a byte[] is fine. Directly reading from the request&#39;s <code>InputStream</code> would be even better. I&#39;m not sure why Jackson claims differently: The same logic as for the output applies: Why construct an intermediate?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689939542,"post_id":76737610,"comment_id":135287474,"body_markdown":"As for using the correct String encoding, you&#39;ll need to account for that anyway. Having Jackson convert the bytes to String or doing it yourself doesn&#39;t matter. As long as you&#39;re using the correct encoding (probably UTF-8), you&#39;ll be fine.","body":"As for using the correct String encoding, you&#39;ll need to account for that anyway. Having Jackson convert the bytes to String or doing it yourself doesn&#39;t matter. As long as you&#39;re using the correct encoding (probably UTF-8), you&#39;ll be fine."},{"owner":{"account_id":19425488,"reputation":57,"user_id":14207055,"display_name":"shibel"},"score":0,"creation_date":1689939887,"post_id":76737610,"comment_id":135287544,"body_markdown":"@Jorn Thank you. Can you please add this as an answer and clarify the following: &quot;Yes, reading as a byte[] is fine.&quot; - is it better than reading from `String` though?","body":"@Jorn Thank you. Can you please add this as an answer and clarify the following: &quot;Yes, reading as a byte[] is fine.&quot; - is it better than reading from <code>String</code> though?"}],"owner":{"account_id":19425488,"reputation":57,"user_id":14207055,"display_name":"shibel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689939253,"creation_date":1689939253,"question_id":76737610,"body_markdown":"From [Jackson&#39;s best practices section][1]:\r\n\r\n&gt; Input: byte[] is best if you have it; InputStream second best; followed by Reader -- and in every case, do NOT try reading input into a String!\r\n\r\n&gt; Output: OutputStream is best; Writer second best; and calling writeValueAsString() is the least efficient (why construct an intermediate String?)\r\n\r\nI currently work on an app (Dropwizard) that reads a relatively big HTTP response every minute, in this fashion:\r\n\r\n```Java\r\nHttpRequest request = httpBuilder.build();\r\nHttpResponse&lt;String&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\r\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\r\n```\r\n\r\nIf I understand things correctly, it&#39;d be much more beneficial to read the HTTP response and have Jackson deserialize the `byte[]` instead of `String`, like so:\r\n\r\n```Java\r\nHttpRequest request = httpBuilder.build();\r\n// Notice: BodyHandlers.ofByteArray()\r\nHttpResponse&lt;byte[]&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofByteArray());\r\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\r\n```\r\n\r\n- This should be more efficient memory-wise, correct?\r\n\r\nHowever, I&#39;ve read about some limitations regarding byte-arrays and non-ASCII characters, and with my lack of knowledge I&#39;m concerned that reading the response as `byte[]` instead of `String` will result in accented characters getting malformed? On the other hand, nowhere do I see the encoding of the response being specified when reading as `String`, so I guess it&#39;s safe to read the response in this manner? (and, the response is originally a `bytearray[]` when coming in if I understand correctly)\r\n\r\n\r\n  [1]: https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance","title":"Java Jackson deserialization efficiency: is it safe to an HTTP response as byte-array?","body":"<p>From <a href=\"https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance\" rel=\"nofollow noreferrer\">Jackson's best practices section</a>:</p>\n<blockquote>\n<p>Input: byte[] is best if you have it; InputStream second best; followed by Reader -- and in every case, do NOT try reading input into a String!</p>\n</blockquote>\n<blockquote>\n<p>Output: OutputStream is best; Writer second best; and calling writeValueAsString() is the least efficient (why construct an intermediate String?)</p>\n</blockquote>\n<p>I currently work on an app (Dropwizard) that reads a relatively big HTTP response every minute, in this fashion:</p>\n<pre><code>HttpRequest request = httpBuilder.build();\nHttpResponse&lt;String&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofString());\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\n</code></pre>\n<p>If I understand things correctly, it'd be much more beneficial to read the HTTP response and have Jackson deserialize the <code>byte[]</code> instead of <code>String</code>, like so:</p>\n<pre><code>HttpRequest request = httpBuilder.build();\n// Notice: BodyHandlers.ofByteArray()\nHttpResponse&lt;byte[]&gt; responseresponse = httpClient.send(request, HttpResponse.BodyHandlers.ofByteArray());\nMyDeserializedClass deserResponse = objMapper.readValue(response.body(), MyDeserializedClass.class);\n</code></pre>\n<ul>\n<li>This should be more efficient memory-wise, correct?</li>\n</ul>\n<p>However, I've read about some limitations regarding byte-arrays and non-ASCII characters, and with my lack of knowledge I'm concerned that reading the response as <code>byte[]</code> instead of <code>String</code> will result in accented characters getting malformed? On the other hand, nowhere do I see the encoding of the response being specified when reading as <code>String</code>, so I guess it's safe to read the response in this manner? (and, the response is originally a <code>bytearray[]</code> when coming in if I understand correctly)</p>\n"},{"tags":["java","json","objectmapper"],"answers":[{"tags":[],"owner":{"account_id":4224566,"reputation":1,"user_id":3458376,"display_name":"trusted12001"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1689936170,"creation_date":1689936170,"answer_id":76737260,"question_id":76737214,"body_markdown":"To convert the JSON with uppercased field names to the desired Java class, you can use the `@JsonProperty` annotation from Jackson library. Here&#39;s how you can modify your `Person` class and ObjectMapper configuration to achieve the conversion:\r\n\r\n1. Modify the `Person` class to use the `@JsonProperty` annotation:\r\n\r\n```java\r\npublic class Person {\r\n    @JsonProperty(&quot;PersonId&quot;)\r\n    private String personId;\r\n    \r\n    @JsonProperty(&quot;Name&quot;)\r\n    private String name;\r\n    \r\n    @JsonProperty(&quot;Surname&quot;)\r\n    private String surname;\r\n    \r\n    @JsonProperty(&quot;age&quot;)\r\n    private int age;\r\n\r\n    // Getters and setters...\r\n}\r\n```\r\n\r\n2. Remove the custom `LowerCaseStrategy` from your ObjectMapper configuration since the field names in your JSON are already in lowercase.\r\n\r\n```java\r\n@Bean\r\npublic ObjectMapper objectMapper() {\r\n    return new ObjectMapper();\r\n}\r\n```\r\n\r\nNow, when you deserialize the JSON using the updated ObjectMapper, it will correctly map the fields with uppercased names to the corresponding fields in the `Person` class.\r\n\r\nFor example:\r\n\r\n```java\r\nString jsonString = &quot;{\\&quot;Person\\&quot;:{\\&quot;PersonId\\&quot;:122,\\&quot;Name\\&quot;:\\&quot;John\\&quot;,\\&quot;Surname\\&quot;:\\&quot;Doe\\&quot;,\\&quot;age\\&quot;:2}}&quot;;\r\n\r\nObjectMapper objectMapper = new ObjectMapper();\r\nPerson person = objectMapper.readValue(jsonString, Person.class);\r\n\r\nSystem.out.println(person.getPersonId()); // Output: 122\r\nSystem.out.println(person.getName()); // Output: John\r\nSystem.out.println(person.getSurname()); // Output: Doe\r\nSystem.out.println(person.getAge()); // Output: 2\r\n```\r\n\r\nWith these changes, the JSON with uppercased field names will be correctly converted to the Java `Person` object.","title":"How can I convert json with uppercased field names to object?","body":"<p>To convert the JSON with uppercased field names to the desired Java class, you can use the <code>@JsonProperty</code> annotation from Jackson library. Here's how you can modify your <code>Person</code> class and ObjectMapper configuration to achieve the conversion:</p>\n<ol>\n<li>Modify the <code>Person</code> class to use the <code>@JsonProperty</code> annotation:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class Person {\n    @JsonProperty(&quot;PersonId&quot;)\n    private String personId;\n    \n    @JsonProperty(&quot;Name&quot;)\n    private String name;\n    \n    @JsonProperty(&quot;Surname&quot;)\n    private String surname;\n    \n    @JsonProperty(&quot;age&quot;)\n    private int age;\n\n    // Getters and setters...\n}\n</code></pre>\n<ol start=\"2\">\n<li>Remove the custom <code>LowerCaseStrategy</code> from your ObjectMapper configuration since the field names in your JSON are already in lowercase.</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic ObjectMapper objectMapper() {\n    return new ObjectMapper();\n}\n</code></pre>\n<p>Now, when you deserialize the JSON using the updated ObjectMapper, it will correctly map the fields with uppercased names to the corresponding fields in the <code>Person</code> class.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String jsonString = &quot;{\\&quot;Person\\&quot;:{\\&quot;PersonId\\&quot;:122,\\&quot;Name\\&quot;:\\&quot;John\\&quot;,\\&quot;Surname\\&quot;:\\&quot;Doe\\&quot;,\\&quot;age\\&quot;:2}}&quot;;\n\nObjectMapper objectMapper = new ObjectMapper();\nPerson person = objectMapper.readValue(jsonString, Person.class);\n\nSystem.out.println(person.getPersonId()); // Output: 122\nSystem.out.println(person.getName()); // Output: John\nSystem.out.println(person.getSurname()); // Output: Doe\nSystem.out.println(person.getAge()); // Output: 2\n</code></pre>\n<p>With these changes, the JSON with uppercased field names will be correctly converted to the Java <code>Person</code> object.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689936731,"creation_date":1689936731,"answer_id":76737316,"question_id":76737214,"body_markdown":"You are almost there. The one error you made, is the direction in which the PropertyNamingStrategy applies: You are converting *from* Java name, *to* JSON name, not the other way around. So, this should work:\r\n\r\n```\r\n        @Override\r\n        public String translate(String input) {\r\n            char[] chars = input.toCharArray();\r\n            chars[0] = Character.toUpperCase(chars[0]); // upper!\r\n            return new String(chars);\r\n        }\r\n```\r\n\r\nAlso, Jackson has `PropertyNamingStrategies.UPPER_CAMEL_CASE` which should do the thing you need without implementing your own.","title":"How can I convert json with uppercased field names to object?","body":"<p>You are almost there. The one error you made, is the direction in which the PropertyNamingStrategy applies: You are converting <em>from</em> Java name, <em>to</em> JSON name, not the other way around. So, this should work:</p>\n<pre><code>        @Override\n        public String translate(String input) {\n            char[] chars = input.toCharArray();\n            chars[0] = Character.toUpperCase(chars[0]); // upper!\n            return new String(chars);\n        }\n</code></pre>\n<p>Also, Jackson has <code>PropertyNamingStrategies.UPPER_CAMEL_CASE</code> which should do the thing you need without implementing your own.</p>\n"}],"owner":{"account_id":14860210,"reputation":61,"user_id":10731303,"display_name":"Zhazgul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689939050,"creation_date":1689935746,"question_id":76737214,"body_markdown":"I have json \r\n```\r\n{\r\n    &quot;Person&quot;: {\r\n        &quot;PersonId&quot;: 122,\r\n        &quot;Name&quot;: &quot;John&quot;,\r\n        &quot;Surname&quot;: &quot;Doe&quot;,\r\n        &quot;age&quot;: 2\r\n    }\r\n}\r\n```\r\n\r\nI want to convert it to Java class\r\n\r\n```\r\n    public class Person {\r\n        private String personId;\r\n        private String name;\r\n        private String surname;\r\n        private int age;\r\n        \r\n        //getters,setters...\r\n    }\r\n```\r\n\r\n\r\nWhat I already have tried is \r\n\r\n```\r\n\r\n    @Bean\r\n    ObjectMapper objectMapper() {\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.setPropertyNamingStrategy(new LowerCaseStrategy());\r\n        return mapper;\r\n    }\r\n\r\n    public static class LowerCaseStrategy extends PropertyNamingStrategy.PropertyNamingStrategyBase {\r\n        @Override\r\n        public String translate(String input) {\r\n            char[] chars = input.toCharArray();\r\n            chars[0] = Character.toLowerCase(chars[0]);\r\n            return new String(chars);\r\n        }\r\n    }\r\n```\r\nBut it did not help.\r\n\r\nDoes anyone have an idea how this can be solved?\r\n\r\n\r\nupd: I don&#39;t have permission to change `Person` class.","title":"How can I convert json with uppercased field names to object?","body":"<p>I have json</p>\n<pre><code>{\n    &quot;Person&quot;: {\n        &quot;PersonId&quot;: 122,\n        &quot;Name&quot;: &quot;John&quot;,\n        &quot;Surname&quot;: &quot;Doe&quot;,\n        &quot;age&quot;: 2\n    }\n}\n</code></pre>\n<p>I want to convert it to Java class</p>\n<pre><code>    public class Person {\n        private String personId;\n        private String name;\n        private String surname;\n        private int age;\n        \n        //getters,setters...\n    }\n</code></pre>\n<p>What I already have tried is</p>\n<pre><code>\n    @Bean\n    ObjectMapper objectMapper() {\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.setPropertyNamingStrategy(new LowerCaseStrategy());\n        return mapper;\n    }\n\n    public static class LowerCaseStrategy extends PropertyNamingStrategy.PropertyNamingStrategyBase {\n        @Override\n        public String translate(String input) {\n            char[] chars = input.toCharArray();\n            chars[0] = Character.toLowerCase(chars[0]);\n            return new String(chars);\n        }\n    }\n</code></pre>\n<p>But it did not help.</p>\n<p>Does anyone have an idea how this can be solved?</p>\n<p>upd: I don't have permission to change <code>Person</code> class.</p>\n"},{"tags":["java","android","multithreading","android-studio"],"answers":[{"tags":[],"owner":{"account_id":11529522,"reputation":4397,"user_id":8448886,"accept_rate":90,"display_name":"Abhishek kumar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1689938686,"creation_date":1689933126,"answer_id":76736901,"question_id":76736850,"body_markdown":"\r\nHere, I have created a method named `blinkCall()` that have `Handler()`, I have defined 1 sec to blink the `textview`.\r\n\r\nTry to use below code:\r\n\r\nCode:\r\n\r\n    private void blinkCall() {\r\n        final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    int timeToBlink = 1000;\r\n                    try {\r\n                        Thread.sleep(timeToBlink);\r\n                    } catch (Exception e) {\r\n                    }\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n    \r\n                            if (textView.getText().toString().equals(&quot;&quot;)) {\r\n                                textView.setText(&quot;Abhishek&quot;);\r\n                            } else {\r\n                                textView.setText(&quot;&quot;);\r\n                            }\r\n                            blinkCall();\r\n                        }\r\n                    });\r\n                }\r\n            }).start();\r\n    }","title":"Why does my Thread interrupt whole Android application?","body":"<p>Here, I have created a method named <code>blinkCall()</code> that have <code>Handler()</code>, I have defined 1 sec to blink the <code>textview</code>.</p>\n<p>Try to use below code:</p>\n<p>Code:</p>\n<pre><code>private void blinkCall() {\n    final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                int timeToBlink = 1000;\n                try {\n                    Thread.sleep(timeToBlink);\n                } catch (Exception e) {\n                }\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n\n                        if (textView.getText().toString().equals(&quot;&quot;)) {\n                            textView.setText(&quot;Abhishek&quot;);\n                        } else {\n                            textView.setText(&quot;&quot;);\n                        }\n                        blinkCall();\n                    }\n                });\n            }\n        }).start();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24303543,"reputation":876,"user_id":21163959,"display_name":"ObscureCookie"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689934632,"creation_date":1689934632,"answer_id":76737096,"question_id":76736850,"body_markdown":"In android, manipulating views from other threads than the main thread throws an exception.\r\n\r\nYou need to make a handler for the main thread.\r\n\r\n\r\n    private final Handler mainHandler = new Handler(getMainLooper());\r\n\r\n\r\nand post runnables to it.\r\n\r\n        Thread blinkThread = new Thread() {\r\n            @Override\r\n            public void run() {\r\n                for (int i = 0; i &lt; 10; i++) {\r\n                    // the main thread will handle this\r\n                    mainHandler.post(() -&gt; lastletter.setVisibility(View.VISIBLE));\r\n                    \r\n                    try {\r\n                        sleep(500);\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n\r\n                    mainHandler.post(() -&gt; lastletter.setVisibility(View.INVISIBLE));\r\n                    \r\n                    try {\r\n                        sleep(500);\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }\r\n        };","title":"Why does my Thread interrupt whole Android application?","body":"<p>In android, manipulating views from other threads than the main thread throws an exception.</p>\n<p>You need to make a handler for the main thread.</p>\n<pre><code>private final Handler mainHandler = new Handler(getMainLooper());\n</code></pre>\n<p>and post runnables to it.</p>\n<pre><code>    Thread blinkThread = new Thread() {\n        @Override\n        public void run() {\n            for (int i = 0; i &lt; 10; i++) {\n                // the main thread will handle this\n                mainHandler.post(() -&gt; lastletter.setVisibility(View.VISIBLE));\n                \n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n\n                mainHandler.post(() -&gt; lastletter.setVisibility(View.INVISIBLE));\n                \n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }\n    };\n</code></pre>\n"}],"owner":{"account_id":15570900,"reputation":61,"user_id":11233380,"display_name":"Matteo Passaro"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76736901,"answer_count":2,"score":1,"last_activity_date":1689938686,"creation_date":1689932720,"question_id":76736850,"body_markdown":"I&#39;m trying to make a TextView blink while the user is in the Main Activity.\r\n&lt;br&gt;&lt;br&gt;\r\nI created a new thread but what happens is that the TextView&#39;s visibility turns on, than off and then the app closes itself with Android saying that the app stopped working. &lt;br&gt; \r\nSeems like the for loop executes ones and then the whole application is interrupted.\r\n\r\nHere&#39;s a code snippet\r\n\r\n```\r\n    Thread blinkThread = new Thread(){\r\n        @Override\r\n        public void run() {\r\n            for(int i = 0; i &lt; 10; i++){\r\n                lastletter.setVisibility(VISIBLE);\r\n                try {\r\n                    sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                lastletter.setVisibility(View.INVISIBLE);\r\n                try {\r\n                    sleep(500);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\nThe code above code is inside the MainActivity class.\r\nThe thread starts in the onCreate() method, I basically wrote `blinkThread.start()`\r\n","title":"Why does my Thread interrupt whole Android application?","body":"<p>I'm trying to make a TextView blink while the user is in the Main Activity.\n<br><br>\nI created a new thread but what happens is that the TextView's visibility turns on, than off and then the app closes itself with Android saying that the app stopped working. <br>\nSeems like the for loop executes ones and then the whole application is interrupted.</p>\n<p>Here's a code snippet</p>\n<pre><code>    Thread blinkThread = new Thread(){\n        @Override\n        public void run() {\n            for(int i = 0; i &lt; 10; i++){\n                lastletter.setVisibility(VISIBLE);\n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n                lastletter.setVisibility(View.INVISIBLE);\n                try {\n                    sleep(500);\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }\n    };\n</code></pre>\n<p>The code above code is inside the MainActivity class.\nThe thread starts in the onCreate() method, I basically wrote <code>blinkThread.start()</code></p>\n"},{"tags":["java","hibernate","jpa","jakarta-ee","seam"],"comments":[{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287081015,"post_id":3935394,"comment_id":4201087,"body_markdown":"@stacker Let me know: Have you deployed a datasource whose global jndi address is **jdbc/appDatasource** ???","body":"@stacker Let me know: Have you deployed a datasource whose global jndi address is <b>jdbc/appDatasource</b> ???"},{"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"score":0,"creation_date":1287085313,"post_id":3935394,"comment_id":4201814,"body_markdown":"@Arthur thanks for your response. Yes, I tried several JNDI names after the error occurred. I suppose it gets the persistenceUnits name &quot;pu&quot; wrong  since it isn&#39;t complaining about the datasource.","body":"@Arthur thanks for your response. Yes, I tried several JNDI names after the error occurred. I suppose it gets the persistenceUnits name &quot;pu&quot; wrong  since it isn&#39;t complaining about the datasource."},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090049,"post_id":3935394,"comment_id":4202629,"body_markdown":"@stacker I need additional info: post how your app is built ( As shown here: http://stackoverflow.com/questions/2453746/2459795#2459795 ) Try to use SeamTest (Take a look at Seam **examples** directory - There are a lot of tests).","body":"@stacker I need additional info: post how your app is built ( As shown here: <a href=\"http://stackoverflow.com/questions/2453746/2459795#2459795\">stackoverflow.com/questions/2453746/2459795#2459795</a> ) Try to use SeamTest (Take a look at Seam <b>examples</b> directory - There are a lot of tests)."},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090323,"post_id":3935394,"comment_id":4202682,"body_markdown":"@stacker How to set up a connection pool in JBoss: **1&#176;** Copy your database&#39;s JDBC JAR file to $JBOSS_HOME/server/default/lib **2&#176;** JBoss includes example database connection-pool files in the directory $JBOSS_HOME/docs/examples/jca. **The name of each file ends in -ds.xml** For instance, oracle-ds.xml. Copy your Target database **-ds.xml** file to $JBOSS_HOME/service/default/deploy and set up your datasource As follows","body":"@stacker How to set up a connection pool in JBoss: <b>1&#176;</b> Copy your database&#39;s JDBC JAR file to $JBOSS_HOME/server/default/lib <b>2&#176;</b> JBoss includes example database connection-pool files in the directory $JBOSS_HOME/docs/examples/jca. <b>The name of each file ends in -ds.xml</b> For instance, oracle-ds.xml. Copy your Target database <b>-ds.xml</b> file to $JBOSS_HOME/service/default/deploy and set up your datasource As follows"},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090477,"post_id":3935394,"comment_id":4202711,"body_markdown":"&lt;datasources&gt;\n  &lt;local-tx-datasource&gt;\n    &lt;jndi-name&gt;OracleDS&lt;/jndi-name&gt;\n\t\t&lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:app&lt;/connection-url&gt;\n\t\t&lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-class&gt;\n\t\t&lt;user-name&gt;scott&lt;/user-name&gt;\n    &lt;password&gt;tiger&lt;/password&gt;\n  &lt;/local-tx-datasource&gt;\n&lt;/datasources&gt;","body":"&lt;datasources&gt;   &lt;local-tx-datasource&gt;     &lt;jndi-name&gt;OracleDS&lt;/jndi-name&gt; \t\t&lt;connection-url&gt;jdbc:oracle:thin:@localhost:1521:app&lt;/conn&zwnj;&#8203;ection-url&gt; \t\t&lt;driver-class&gt;oracle.jdbc.driver.OracleDriver&lt;/driver-clas&zwnj;&#8203;s&gt; \t\t&lt;user-name&gt;scott&lt;/user-name&gt;     &lt;password&gt;tiger&lt;/password&gt;   &lt;/local-tx-datasource&gt; &lt;/datasources&gt;"},{"owner":{"account_id":43546,"reputation":33497,"user_id":127359,"accept_rate":85,"display_name":"Arthur Ronald"},"score":0,"creation_date":1287090552,"post_id":3935394,"comment_id":4202731,"body_markdown":"For the example above, JBoss will create a global jndi datasource called **java:/OracleDS**","body":"For the example above, JBoss will create a global jndi datasource called <b>java:/OracleDS</b>"}],"answers":[{"tags":[],"owner":{"account_id":26957,"reputation":564361,"user_id":70604,"display_name":"Pascal Thivent"},"down_vote_count":1,"up_vote_count":11,"is_accepted":true,"score":10,"last_activity_date":1287250012,"creation_date":1287250012,"answer_id":3949950,"question_id":3935394,"body_markdown":"As an alternative to your current approach and since you&#39;re using Hibernate, you could use Hibernate to configure JPA by declaring a `hibernate.cfg.xml` file using the `hibernate.ejb.cfgfile` property, like this: \r\n\r\n    &lt;persistence&gt;\r\n     &lt;persistence-unit name=&quot;manager1&quot; transaction-type=&quot;JTA&quot;&gt;\r\n        &lt;jta-data-source&gt;java:/DefaultDS&lt;/jta-data-source&gt;\r\n        &lt;properties&gt;\r\n           &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\r\n        &lt;/properties&gt;\r\n     &lt;/persistence-unit&gt;\r\n    &lt;/persistence&gt;\r\n\r\nMy understanding is that the `hibernate.cfg.xml` is just supposed to be on the classpath (so it could be outside the packaged archive).\r\n\r\n### References\r\n\r\n- Hibernate Entity Manager Reference Guide\r\n - [Table 2.1. Hibernate Entity Manager specific properties][1] \r\n\r\n\r\n  [1]: http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/#d0e708","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>As an alternative to your current approach and since you're using Hibernate, you could use Hibernate to configure JPA by declaring a <code>hibernate.cfg.xml</code> file using the <code>hibernate.ejb.cfgfile</code> property, like this: </p>\n\n<pre><code>&lt;persistence&gt;\n &lt;persistence-unit name=\"manager1\" transaction-type=\"JTA\"&gt;\n    &lt;jta-data-source&gt;java:/DefaultDS&lt;/jta-data-source&gt;\n    &lt;properties&gt;\n       &lt;property name=\"hibernate.ejb.cfgfile\" value=\"/hibernate.cfg.xml\"/&gt;\n    &lt;/properties&gt;\n &lt;/persistence-unit&gt;\n&lt;/persistence&gt;\n</code></pre>\n\n<p>My understanding is that the <code>hibernate.cfg.xml</code> is just supposed to be on the classpath (so it could be outside the packaged archive).</p>\n\n<h3>References</h3>\n\n<ul>\n<li>Hibernate Entity Manager Reference Guide\n\n<ul>\n<li><a href=\"http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html_single/#d0e708\" rel=\"noreferrer\">Table 2.1. Hibernate Entity Manager specific properties</a> </li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":53428,"reputation":8315,"user_id":159679,"accept_rate":64,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1329290757,"creation_date":1329290757,"answer_id":9289412,"question_id":3935394,"body_markdown":"Just found a an alleged way for EclipseLink users. There is &quot;**eclipselink.persistencexml**&quot; which has a default value of \r\n\r\n    public static final String ECLIPSELINK_PERSISTENCE_XML_DEFAULT = &quot;META-INF/persistence.xml&quot;;\r\n    \r\nbut it can&#39;t be overridden although the docs say it can be...\r\n\r\n    /**\r\n     * The &lt;code&gt;&quot;eclipselink.persistencexml&quot;&lt;/code&gt; property specifies the full\r\n     * resource name to look for the persistence XML files in. If not specified\r\n     * the default value defined by {@link #ECLIPSELINK_PERSISTENCE_XML_DEFAULT}\r\n     * will be used.\r\n     * &lt;p&gt;\r\n     * IMPORTANT: For now this property is used for the canonical model\r\n     * generator but it can later be used as a system property for customizing\r\n     * weaving and application bootstrap usage.\r\n     * &lt;p&gt;\r\n     * This property is only used by EclipseLink when it is locating the\r\n     * configuration file. When used within an EJB/Spring container in container\r\n     * managed mode the locating and reading of this file is done by the\r\n     * container and will not use this configuration.\r\n     */","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>Just found a an alleged way for EclipseLink users. There is \"<strong>eclipselink.persistencexml</strong>\" which has a default value of </p>\n\n<pre><code>public static final String ECLIPSELINK_PERSISTENCE_XML_DEFAULT = \"META-INF/persistence.xml\";\n</code></pre>\n\n<p>but it can't be overridden although the docs say it can be...</p>\n\n<pre><code>/**\n * The &lt;code&gt;\"eclipselink.persistencexml\"&lt;/code&gt; property specifies the full\n * resource name to look for the persistence XML files in. If not specified\n * the default value defined by {@link #ECLIPSELINK_PERSISTENCE_XML_DEFAULT}\n * will be used.\n * &lt;p&gt;\n * IMPORTANT: For now this property is used for the canonical model\n * generator but it can later be used as a system property for customizing\n * weaving and application bootstrap usage.\n * &lt;p&gt;\n * This property is only used by EclipseLink when it is locating the\n * configuration file. When used within an EJB/Spring container in container\n * managed mode the locating and reading of this file is done by the\n * container and will not use this configuration.\n */\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3605220,"reputation":11,"user_id":3007532,"display_name":"user3007532"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1384841738,"creation_date":1384841738,"answer_id":20064501,"question_id":3935394,"body_markdown":"I used this mechanism, seems to work for most of the properties, had issues with non-jta-data-source.\r\n\r\nhttp://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>I used this mechanism, seems to work for most of the properties, had issues with non-jta-data-source.</p>\n\n<p><a href=\"http://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html\" rel=\"nofollow\">http://www.eclipse.org/eclipselink/api/2.4/index.html?org/eclipse/persistence/config/PersistenceUnitProperties.html</a></p>\n"},{"tags":[],"owner":{"account_id":7038768,"reputation":429,"user_id":5391873,"accept_rate":17,"display_name":"Rajesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1455188013,"creation_date":1455188013,"answer_id":35337346,"question_id":3935394,"body_markdown":"If you are using Spring to manage and inject entity manager, then it is possible to implement org.springframework.orm.jpa.persistenceunit.PersistenceUnitPostProcessor and pass on external properties. I could successfully externalize all properties from persistence.xml using this.","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>If you are using Spring to manage and inject entity manager, then it is possible to implement org.springframework.orm.jpa.persistenceunit.PersistenceUnitPostProcessor and pass on external properties. I could successfully externalize all properties from persistence.xml using this.</p>\n"},{"tags":[],"owner":{"account_id":13669548,"reputation":149,"user_id":9862502,"display_name":"Mayur Jain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689938517,"creation_date":1689938517,"answer_id":76737518,"question_id":3935394,"body_markdown":"    **persistence.xml**\r\n                \r\n                &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n                &lt;persistence version=&quot;2.2&quot;\r\n                \txmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\r\n                \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                \txsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\r\n                \t&lt;persistence-unit name=&quot;jsf-maven-project&quot;&gt;\r\n                \t    &lt;properties&gt;\r\n                \t       &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\r\n                \t    &lt;/properties&gt;\r\n                    &lt;/persistence-unit&gt;\r\n                &lt;/persistence&gt;\r\n               \r\n    **hibernate.cfg.xml**\r\n                &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n            &lt;!DOCTYPE hibernate-configuration PUBLIC \r\n              &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \r\n              &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\r\n              &lt;hibernate-configuration&gt;\r\n                &lt;session-factory&gt;\r\n                  &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/testdb&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.username&quot;&gt;postgres&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.password&quot;&gt;Test@123&lt;/property&gt;\r\n                  &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\r\n                  &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\r\n                  &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\r\n                  &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\r\n                  &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\r\n                  &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n                  &lt;!-- mapping  class=&quot;com.sample.Book&quot; / --&gt;\r\n              &lt;/session-factory&gt;\r\n            &lt;/hibernate-configuration&gt;\r\n        \r\n    **HibernateUtil.java**\r\n                public static EntityManager getEntityManager() {\r\n                \t\tif (entityManagerFactory == null) {\r\n                \t\t\tentityManagerFactory = Persistence.createEntityManagerFactory(&quot;jsf-maven-project&quot;);\r\n                \t\t}\r\n                \t\treturn entityManagerFactory.createEntityManager();\r\n                \t}\r\n                \r\nI was createing JSF project with hibernate JPA and this solution worked for me. ","title":"How to externalize properties from JPAs persistence.xml?","body":"<pre><code>**persistence.xml**\n            \n            &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n            &lt;persistence version=&quot;2.2&quot;\n                xmlns=&quot;http://xmlns.jcp.org/xml/ns/persistence&quot;\n                xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/persistence http://xmlns.jcp.org/xml/ns/persistence/persistence_2_2.xsd&quot;&gt;\n                &lt;persistence-unit name=&quot;jsf-maven-project&quot;&gt;\n                    &lt;properties&gt;\n                       &lt;property name=&quot;hibernate.ejb.cfgfile&quot; value=&quot;/hibernate.cfg.xml&quot;/&gt;\n                    &lt;/properties&gt;\n                &lt;/persistence-unit&gt;\n            &lt;/persistence&gt;\n           \n**hibernate.cfg.xml**\n            &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n        &lt;!DOCTYPE hibernate-configuration PUBLIC \n          &quot;-//Hibernate/Hibernate Configuration DTD 3.0//EN&quot; \n          &quot;http://www.hibernate.org/dtd/hibernate-configuration-3.0.dtd&quot;&gt;\n          &lt;hibernate-configuration&gt;\n            &lt;session-factory&gt;\n              &lt;property name=&quot;connection.driver_class&quot;&gt;org.postgresql.Driver&lt;/property&gt;\n              &lt;property name=&quot;connection.url&quot;&gt;jdbc:postgresql://localhost:5432/testdb&lt;/property&gt;\n              &lt;property name=&quot;connection.username&quot;&gt;postgres&lt;/property&gt;\n              &lt;property name=&quot;connection.password&quot;&gt;Test@123&lt;/property&gt;\n              &lt;property name=&quot;connection.pool_size&quot;&gt;10&lt;/property&gt;\n              &lt;property name=&quot;dialect&quot;&gt;org.hibernate.dialect.PostgreSQLDialect&lt;/property&gt;\n              &lt;property name=&quot;current_session_context_class&quot;&gt;thread&lt;/property&gt;\n              &lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;\n              &lt;property name=&quot;format_sql&quot;&gt;true&lt;/property&gt;\n              &lt;property name=&quot;hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\n              &lt;!-- mapping  class=&quot;com.sample.Book&quot; / --&gt;\n          &lt;/session-factory&gt;\n        &lt;/hibernate-configuration&gt;\n    \n**HibernateUtil.java**\n            public static EntityManager getEntityManager() {\n                    if (entityManagerFactory == null) {\n                        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;jsf-maven-project&quot;);\n                    }\n                    return entityManagerFactory.createEntityManager();\n                }\n            \n</code></pre>\n<p>I was createing JSF project with hibernate JPA and this solution worked for me.</p>\n"}],"owner":{"account_id":87016,"reputation":68348,"user_id":241590,"accept_rate":99,"display_name":"stacker"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29704,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":3949950,"answer_count":5,"score":24,"last_activity_date":1689938517,"creation_date":1287073768,"question_id":3935394,"body_markdown":"I would like to put some of the hibernate configuration in a property file to make it editable without build and deploy.\r\n\r\nI tried to solve my problem by following the instructions from https://stackoverflow.com/questions/1989672/create-entity-manager-without-persistence-xml \r\n\r\napp.properties:\r\n\r\n    hibernate.show_sql=true \r\n    hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    hibernate.hbm2ddl.auto=validate \r\n    hibernate.show_sql=true\r\n    hibernate.format_sql=true\r\n    hibernate.default_schema=myschema\r\n\r\npersistence.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;!-- Persistence deployment descriptor for dev profile --&gt;\r\n    &lt;persistence xmlns=&quot;http://java.sun.com/xml/ns/persistence&quot; \r\n                 xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n                 xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd&quot; \r\n                 version=&quot;1.0&quot;&gt;\r\n                 \r\n       &lt;persistence-unit name=&quot;pu&quot;&gt;\r\n          &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\r\n          &lt;jta-data-source&gt;jdbc/appDatasource&lt;/jta-data-source&gt;\r\n          &lt;properties&gt;\r\n             &lt;property name=&quot;jboss.entity.manager.factory.jndi.name&quot; value=&quot;java:/appEntityManagerFactory&quot;/&gt;\r\n          &lt;/properties&gt;\r\n       &lt;/persistence-unit&gt;\r\n        \r\n    &lt;/persistence&gt;\r\n\r\n\r\n\r\nIn the initialization code the application executes the following sequence, (which finds the properties),\r\n\r\n    Properties props = new Properties();\r\n    InputStream is = ClassLoader.getSystemResourceAsStream( &quot;app.properties&quot; );\r\n    props.load( is );\r\n    Persistence.createEntityManagerFactory( &quot;pu&quot;, props );\r\n\r\n\r\n\r\nbut fails with the error message:\r\n\r\n     INFO  [SessionFactoryImpl] building session factory\r\n     INFO  [SessionFactoryObjectFactory] Not binding factory to JNDI, no JNDI name configured\r\n    ERROR [STDERR] javax.persistence.PersistenceException: [PersistenceUnit: pu] Unable to build EntityManagerFactory\r\n\r\nDoes anyone have an idea what could be wrong with my configuration?\r\n\r\nVersions: JBoss 4.3\r\nSeam: 2.1.2 \r\n\r\nEDIT:\r\n\r\nJBoss JNDI enlists &quot;pu&quot; as persistence unit:\r\n\r\n    persistence.units:ear=app.ear,jar=app.jar,unitName=pu (class: org.hibernate.impl.SessionFactoryImpl)\r\n\r\n","title":"How to externalize properties from JPAs persistence.xml?","body":"<p>I would like to put some of the hibernate configuration in a property file to make it editable without build and deploy.</p>\n\n<p>I tried to solve my problem by following the instructions from <a href=\"https://stackoverflow.com/questions/1989672/create-entity-manager-without-persistence-xml\">Create JPA EntityManager without persistence.xml configuration file</a> </p>\n\n<p>app.properties:</p>\n\n<pre><code>hibernate.show_sql=true \nhibernate.dialect=org.hibernate.dialect.MySQLDialect\nhibernate.hbm2ddl.auto=validate \nhibernate.show_sql=true\nhibernate.format_sql=true\nhibernate.default_schema=myschema\n</code></pre>\n\n<p>persistence.xml</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;!-- Persistence deployment descriptor for dev profile --&gt;\n&lt;persistence xmlns=\"http://java.sun.com/xml/ns/persistence\" \n             xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n             xsi:schemaLocation=\"http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd\" \n             version=\"1.0\"&gt;\n\n   &lt;persistence-unit name=\"pu\"&gt;\n      &lt;provider&gt;org.hibernate.ejb.HibernatePersistence&lt;/provider&gt;\n      &lt;jta-data-source&gt;jdbc/appDatasource&lt;/jta-data-source&gt;\n      &lt;properties&gt;\n         &lt;property name=\"jboss.entity.manager.factory.jndi.name\" value=\"java:/appEntityManagerFactory\"/&gt;\n      &lt;/properties&gt;\n   &lt;/persistence-unit&gt;\n\n&lt;/persistence&gt;\n</code></pre>\n\n<p>In the initialization code the application executes the following sequence, (which finds the properties),</p>\n\n<pre><code>Properties props = new Properties();\nInputStream is = ClassLoader.getSystemResourceAsStream( \"app.properties\" );\nprops.load( is );\nPersistence.createEntityManagerFactory( \"pu\", props );\n</code></pre>\n\n<p>but fails with the error message:</p>\n\n<pre><code> INFO  [SessionFactoryImpl] building session factory\n INFO  [SessionFactoryObjectFactory] Not binding factory to JNDI, no JNDI name configured\nERROR [STDERR] javax.persistence.PersistenceException: [PersistenceUnit: pu] Unable to build EntityManagerFactory\n</code></pre>\n\n<p>Does anyone have an idea what could be wrong with my configuration?</p>\n\n<p>Versions: JBoss 4.3\nSeam: 2.1.2 </p>\n\n<p>EDIT:</p>\n\n<p>JBoss JNDI enlists \"pu\" as persistence unit:</p>\n\n<pre><code>persistence.units:ear=app.ear,jar=app.jar,unitName=pu (class: org.hibernate.impl.SessionFactoryImpl)\n</code></pre>\n"},{"tags":["java","executorservice","threadpoolexecutor"],"comments":[{"owner":{"account_id":1077457,"reputation":8074,"user_id":1075282,"display_name":"Renat"},"score":0,"creation_date":1689938253,"post_id":76737469,"comment_id":135287248,"body_markdown":"For exact number you probably need to implement manual counting, https://stackoverflow.com/questions/7271541/threadpoolexecutors-getactivecount","body":"For exact number you probably need to implement manual counting, <a href=\"https://stackoverflow.com/questions/7271541/threadpoolexecutors-getactivecount\" title=\"threadpoolexecutors getactivecount\">stackoverflow.com/questions/7271541/&hellip;</a>"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1689944038,"post_id":76737469,"comment_id":135288428,"body_markdown":"It can never be guaranteed to be exact, because tasks could be started or stopped concurrently with reading the value.","body":"It can never be guaranteed to be exact, because tasks could be started or stopped concurrently with reading the value."}],"owner":{"account_id":17841845,"reputation":1,"user_id":12959566,"display_name":"Stream_Cipher"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689938019,"creation_date":1689938019,"question_id":76737469,"body_markdown":"i have read the documentation its mentioned that this method \r\n\r\n`((ThreadPoolExecutor) executorService).getActiveCount();`\r\n\r\n returns approximate  number of threads that are actively executing tasks.\r\ncan anyone suggest in which practical scenario this method will return incorrect count?\r\nthe reason why i asked this question is in my spring-boot app one of the UT case is dependent on this method and that ut cases is failing once in while specifically on Jenkins server.\r\n\r\n\r\n```\r\nExecutorService executorService = Executors.newFixedThreadPool(10);\r\nSynchronousQueue&lt;Integer&gt; queue = new SynchronousQueue&lt;&gt;();\r\nfor(int i = 0;i&lt;10;i++){\r\n            executorService.submit(() -&gt; {\r\n                queue.put(1);\r\n                return null;\r\n            });\r\n        }\r\n```\r\nwhat i am expecting is when i call this method `((ThreadPoolExecutor) executorService).getActiveCount();` it should not return 10 (number of running thread) instead it should return some other value may be 9 or 8 .. ","title":"ExecutorService.getActiveCount return approximate number of active threads","body":"<p>i have read the documentation its mentioned that this method</p>\n<p><code>((ThreadPoolExecutor) executorService).getActiveCount();</code></p>\n<p>returns approximate  number of threads that are actively executing tasks.\ncan anyone suggest in which practical scenario this method will return incorrect count?\nthe reason why i asked this question is in my spring-boot app one of the UT case is dependent on this method and that ut cases is failing once in while specifically on Jenkins server.</p>\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(10);\nSynchronousQueue&lt;Integer&gt; queue = new SynchronousQueue&lt;&gt;();\nfor(int i = 0;i&lt;10;i++){\n            executorService.submit(() -&gt; {\n                queue.put(1);\n                return null;\n            });\n        }\n</code></pre>\n<p>what i am expecting is when i call this method <code>((ThreadPoolExecutor) executorService).getActiveCount();</code> it should not return 10 (number of running thread) instead it should return some other value may be 9 or 8 ..</p>\n"},{"tags":["java","junit4"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689937738,"post_id":76737424,"comment_id":135287151,"body_markdown":"Does this answer your question? [Multiple RunWith Statements in jUnit](https://stackoverflow.com/questions/24431427/multiple-runwith-statements-in-junit)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/24431427/multiple-runwith-statements-in-junit\">Multiple RunWith Statements in jUnit</a>"}],"owner":{"account_id":21482511,"reputation":3,"user_id":15829656,"display_name":"jijesh vu"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937696,"creation_date":1689937696,"question_id":76737424,"body_markdown":"How can i add the multiple @RunWith or there are any other alternative available. I must use the Parameterized.class with other class which i cannnot exclude\r\n\r\n    @RunWith(ScenarioStepRunner.class)\r\n    @RunWith(Parameterized.class)\r\n    public class Test{\r\n    \r\n    \r\n    }","title":"Junit4 how add multiple classes for @RunWith annotation","body":"<p>How can i add the multiple @RunWith or there are any other alternative available. I must use the Parameterized.class with other class which i cannnot exclude</p>\n<pre><code>@RunWith(ScenarioStepRunner.class)\n@RunWith(Parameterized.class)\npublic class Test{\n\n\n}\n</code></pre>\n"},{"tags":["java","java-17","java-module","module-path"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1689961040,"post_id":76737390,"comment_id":135291733,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690198930,"post_id":76737390,"comment_id":135315395,"body_markdown":"Maybe [this Q&amp;A](https://stackoverflow.com/q/76733809/2711488) helps which has been opened a few hours after yours.","body":"Maybe <a href=\"https://stackoverflow.com/q/76733809/2711488\">this Q&amp;A</a> helps which has been opened a few hours after yours."}],"owner":{"account_id":13913514,"reputation":1,"user_id":10046020,"display_name":"Syndrome"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937404,"creation_date":1689937404,"question_id":76737390,"body_markdown":"I have a Java-Swing-Application with a small, self-written application-debugger (let&#39;s call it AID) attached. With AID you can execute code, inspect objects and look at the ui-hierarchy inside the application.\r\n\r\nWhen running the app with java 17 or higher, the module-system gives the usual errors like \r\n&quot;`InaccessibleObjectException: ... module java.desktop does not &quot;opens java.swing.border&quot; to unnamed module ...`&quot;. I am aware of the &quot;`-add-opens ...`&quot;-argument and already tried it. Unfortunately I would have to open *a lot of* modules/packages for my debugger to work properly because I do not know which packages are accessed. \r\n\r\nI would be ok with making AID a standalone-module if that helps with the solution, but is there a way to open up *all* modules/packages to a specific module (like my AID-module)?\r\n\r\n","title":"Is there a way to open all modules to a specific modules?","body":"<p>I have a Java-Swing-Application with a small, self-written application-debugger (let's call it AID) attached. With AID you can execute code, inspect objects and look at the ui-hierarchy inside the application.</p>\n<p>When running the app with java 17 or higher, the module-system gives the usual errors like\n&quot;<code>InaccessibleObjectException: ... module java.desktop does not &quot;opens java.swing.border&quot; to unnamed module ...</code>&quot;. I am aware of the &quot;<code>-add-opens ...</code>&quot;-argument and already tried it. Unfortunately I would have to open <em>a lot of</em> modules/packages for my debugger to work properly because I do not know which packages are accessed.</p>\n<p>I would be ok with making AID a standalone-module if that helps with the solution, but is there a way to open up <em>all</em> modules/packages to a specific module (like my AID-module)?</p>\n"},{"tags":["java","vaadin","vaadin-flow","vaadin-grid","vaadin23"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689936162,"post_id":76736522,"comment_id":135286884,"body_markdown":"The event that triggers the dialogs could be triggered by either paint() repaint() update() or a more deliberate implementation of &quot;event&quot; such as &quot;focus&quot; , component layer level change , a mouse click event , or a click added to an actionevent.","body":"The event that triggers the dialogs could be triggered by either paint() repaint() update() or a more deliberate implementation of &quot;event&quot; such as &quot;focus&quot; , component layer level change , a mouse click event , or a click added to an actionevent."},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1689936975,"post_id":76736522,"comment_id":135287017,"body_markdown":"I checked in debug that for my example each time is fired action from ValueProvider in addComponentColumn","body":"I checked in debug that for my example each time is fired action from ValueProvider in addComponentColumn"},{"owner":{"account_id":295383,"reputation":4686,"user_id":599765,"accept_rate":22,"display_name":"Andr&#233; Schild"},"score":0,"creation_date":1690055354,"post_id":76736522,"comment_id":135300701,"body_markdown":"When you add columns, then the grid must recalculate col width and content, so it has to repaint.\nUsually you add all columns first and then bind the data to the grid","body":"When you add columns, then the grid must recalculate col width and content, so it has to repaint. Usually you add all columns first and then bind the data to the grid"},{"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"score":0,"creation_date":1690192049,"post_id":76736522,"comment_id":135314038,"body_markdown":"but im not doing anything with other grids after they are created, i&#39;m just refreshing page by F5 o routing to another page and then every previously created grid that are not even visible at this moment are refreshing like in my example. If i&#39;m in tab &quot;Grid2&quot; and i press F5 then both ValueProviders( Grid1 and Grid2) are fired even that tab with Grid1 isnet even shown right now","body":"but im not doing anything with other grids after they are created, i&#39;m just refreshing page by F5 o routing to another page and then every previously created grid that are not even visible at this moment are refreshing like in my example. If i&#39;m in tab &quot;Grid2&quot; and i press F5 then both ValueProviders( Grid1 and Grid2) are fired even that tab with Grid1 isnet even shown right now"}],"owner":{"account_id":19662820,"reputation":169,"user_id":14393923,"display_name":"Miłosz Bąbliński"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689937327,"creation_date":1689929774,"question_id":76736522,"body_markdown":"I found out a strange behavior of the grid component. I have app with multiple tabs in each tab can be multiple grids, sometimes i handle some errors by showing dialog in addColumn method. \r\nI found out that every created grid are refreshing each time i change UI (by navigating or F5) I have PreserveOnRefresh annotation. So even grids from other tabs that are not visible right now are refreshing and showing me again some dialogs that are implemented in addColumn method in another grid.\r\nI have application where users can add new tabs with a lots of grids so after some time they are refreshing a lot of data after each navigation or F5 pressing. \r\nBelow I&#39;m adding code example:\r\n\r\n        @Route(&quot;test&quot;)\r\n    @PreserveOnRefresh\r\n    public class Test extends Div {\r\n        public Test(){\r\n    \r\n            Grid&lt;String&gt; grid1 = new Grid();\r\n            List&lt;String&gt; grid1List = new ArrayList&lt;&gt;();\r\n            grid1List.add(&quot;grid1Element&quot;);\r\n            grid1.setItems(grid1List);\r\n            grid1.addComponentColumn(item -&gt; {\r\n                Dialog grid1D = new Dialog(new SpanTrans(&quot;Grid1 Dialog&quot;));\r\n                grid1D.open();\r\n                return new SpanTrans(item);\r\n            });\r\n    \r\n            Grid&lt;String&gt; grid2 = new Grid();\r\n            List&lt;String&gt; grid2List = new ArrayList&lt;&gt;();\r\n            grid2List.add(&quot;grid2Element&quot;);\r\n            grid2.setItems(grid2List);\r\n            grid2.addComponentColumn(item -&gt; {\r\n                Dialog grid2D = new Dialog(new SpanTrans(&quot;Grid2 Dialog&quot;));\r\n                grid2D.open();\r\n                return new SpanTrans(item);\r\n            });\r\n            TabSheet tabs = new TabSheet();\r\n            tabs.add(&quot;Grid1&quot;,grid1);\r\n            tabs.add(&quot;Grid2&quot;,grid2);\r\n    \r\n            add(tabs);\r\n        }\r\n    }\r\n\r\nSo when i every time i enter each tab the dialog for grid inside this tab is shown. Why isi t hapenning every time  shouldnt it be only for the first time until i&#39;m send refresh request from my code if i would like to? And after F5/Refreshing Page both dialogs for both tabs are shown.\r\n\r\nI want to refresh grids only when i&#39;m executing refresh from code and not doing it for every created grid whenever UI will change.\r\nI&#39;m using Vaadin 23.3.15","title":"Vaadin 23 all grids refreshing after changing UI","body":"<p>I found out a strange behavior of the grid component. I have app with multiple tabs in each tab can be multiple grids, sometimes i handle some errors by showing dialog in addColumn method.\nI found out that every created grid are refreshing each time i change UI (by navigating or F5) I have PreserveOnRefresh annotation. So even grids from other tabs that are not visible right now are refreshing and showing me again some dialogs that are implemented in addColumn method in another grid.\nI have application where users can add new tabs with a lots of grids so after some time they are refreshing a lot of data after each navigation or F5 pressing.\nBelow I'm adding code example:</p>\n<pre><code>    @Route(&quot;test&quot;)\n@PreserveOnRefresh\npublic class Test extends Div {\n    public Test(){\n\n        Grid&lt;String&gt; grid1 = new Grid();\n        List&lt;String&gt; grid1List = new ArrayList&lt;&gt;();\n        grid1List.add(&quot;grid1Element&quot;);\n        grid1.setItems(grid1List);\n        grid1.addComponentColumn(item -&gt; {\n            Dialog grid1D = new Dialog(new SpanTrans(&quot;Grid1 Dialog&quot;));\n            grid1D.open();\n            return new SpanTrans(item);\n        });\n\n        Grid&lt;String&gt; grid2 = new Grid();\n        List&lt;String&gt; grid2List = new ArrayList&lt;&gt;();\n        grid2List.add(&quot;grid2Element&quot;);\n        grid2.setItems(grid2List);\n        grid2.addComponentColumn(item -&gt; {\n            Dialog grid2D = new Dialog(new SpanTrans(&quot;Grid2 Dialog&quot;));\n            grid2D.open();\n            return new SpanTrans(item);\n        });\n        TabSheet tabs = new TabSheet();\n        tabs.add(&quot;Grid1&quot;,grid1);\n        tabs.add(&quot;Grid2&quot;,grid2);\n\n        add(tabs);\n    }\n}\n</code></pre>\n<p>So when i every time i enter each tab the dialog for grid inside this tab is shown. Why isi t hapenning every time  shouldnt it be only for the first time until i'm send refresh request from my code if i would like to? And after F5/Refreshing Page both dialogs for both tabs are shown.</p>\n<p>I want to refresh grids only when i'm executing refresh from code and not doing it for every created grid whenever UI will change.\nI'm using Vaadin 23.3.15</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":28827923,"reputation":1,"user_id":22078940,"display_name":"Vinay Mundhe"},"score":0,"creation_date":1689941631,"post_id":76737256,"comment_id":135287882,"body_markdown":"@SamuelMarchant I&#39;m just learning everything. Can you pls tell me how to do that exactly?","body":"@SamuelMarchant I&#39;m just learning everything. Can you pls tell me how to do that exactly?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1689944386,"post_id":76737256,"comment_id":135288493,"body_markdown":"If this isn&#39;t the current release, 2023-06, where this is solved, go get the current release.","body":"If this isn&#39;t the current release, 2023-06, where this is solved, go get the current release."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689988785,"post_id":76737256,"comment_id":135294725,"body_markdown":"Sorry, that was a stupid way I said that , you need to check you imported the IBM jar containing that class into your project, and then compiled your project to a .war , then deploy to the Tomcat server in its &quot;webapps&quot; folder.","body":"Sorry, that was a stupid way I said that , you need to check you imported the IBM jar containing that class into your project, and then compiled your project to a .war , then deploy to the Tomcat server in its &quot;webapps&quot; folder."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689989037,"post_id":76737256,"comment_id":135294734,"body_markdown":"Note that Tomcat 9 and older versions servlet and framework API in the server use javax library name on imports but Tomcat 10 and newer use jakarta name in imports of classes, However, SE Core classes remain their actual naming for package imports into code.","body":"Note that Tomcat 9 and older versions servlet and framework API in the server use javax library name on imports but Tomcat 10 and newer use jakarta name in imports of classes, However, SE Core classes remain their actual naming for package imports into code."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689989733,"post_id":76737256,"comment_id":135294761,"body_markdown":"Take a look at this &quot;The Directory Structure of the WAR file&quot;  https://www.middlewareinventory.com/blog/sample-web-application-war-file-download/      in the image it shows inside the &quot;WEB-INF/classes&quot; folder tree example the folder &quot;com&quot; , that folder is &quot;typically&quot; (a typical)  top folder name of the contents of a jar library that is added to a web project, of it is fine for all the jar files to use such a name or tree names the same , only .class file must be unique names when unloaded into use","body":"Take a look at this &quot;The Directory Structure of the WAR file&quot;  <a href=\"https://www.middlewareinventory.com/blog/sample-web-application-war-file-download/\" rel=\"nofollow noreferrer\">middlewareinventory.com/blog/&hellip;</a>      in the image it shows inside the &quot;WEB-INF/classes&quot; folder tree example the folder &quot;com&quot; , that folder is &quot;typically&quot; (a typical)  top folder name of the contents of a jar library that is added to a web project, of it is fine for all the jar files to use such a name or tree names the same , only .class file must be unique names when unloaded into use"}],"owner":{"account_id":28827923,"reputation":1,"user_id":22078940,"display_name":"Vinay Mundhe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689936132,"creation_date":1689936132,"question_id":76737256,"body_markdown":"I&#39;m creating a maven web project with tomcat server. But the web.xml and index.jsp file are not opening up. Here&#39;s a screenshot of the error. \r\n\r\nThe error: Failed to create the part&#39;s controls -\r\njava.lang.NoClassDefFoundError: com/ibm/icu/util/StringTokenizer [The image shows what I see after clicking on index.jsp file](https://i.stack.imgur.com/e9Ga4.png) \r\n\r\nI have already tried re-starting workspace. Also, went to File Associations from preferences and set .jsp and java to deafualt. This was suggested in some other stackoverflow link. ","title":"Creating a maven web project with tomcat server. The web.xml and index.jsp file are not opening up: It says Failed to create the part&#39;s controls","body":"<p>I'm creating a maven web project with tomcat server. But the web.xml and index.jsp file are not opening up. Here's a screenshot of the error.</p>\n<p>The error: Failed to create the part's controls -\njava.lang.NoClassDefFoundError: com/ibm/icu/util/StringTokenizer <a href=\"https://i.stack.imgur.com/e9Ga4.png\" rel=\"nofollow noreferrer\">The image shows what I see after clicking on index.jsp file</a></p>\n<p>I have already tried re-starting workspace. Also, went to File Associations from preferences and set .jsp and java to deafualt. This was suggested in some other stackoverflow link.</p>\n"},{"tags":["java","spring","spring-boot","java-17"],"comments":[{"owner":{"account_id":321634,"reputation":596,"user_id":2860981,"display_name":"MK Tan"},"score":0,"creation_date":1689952348,"post_id":76737208,"comment_id":135290169,"body_markdown":"are you migrate from jdk 8 to jdk 17 as well?","body":"are you migrate from jdk 8 to jdk 17 as well?"},{"owner":{"account_id":26715547,"reputation":3,"user_id":20320200,"display_name":"Levent Kaya"},"score":0,"creation_date":1689954275,"post_id":76737208,"comment_id":135290539,"body_markdown":"Yes, i am migreating my jdk level too","body":"Yes, i am migreating my jdk level too"}],"owner":{"account_id":26715547,"reputation":3,"user_id":20320200,"display_name":"Levent Kaya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689935619,"creation_date":1689935619,"question_id":76737208,"body_markdown":"I have migrated an application running Spring Boot 2.7 to Spring Boot 3.1.2. After making the necessary security arrangements, I was able to build and run it without any problems. But when I tried to login with Bearer token, I got `java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter` error. I didn&#39;t have such a problem when using Spring Boot 2.7.\r\n\r\nHere was the one that gave the error:\r\n\r\n    public String generateAccessToken(User user) {\r\n        List&lt;String&gt; roleNames = user.getRoles().stream()\r\n            .map(Role::getRoleType)\r\n            .map(Enum::name)\r\n            .toList();\r\n    \r\n        return Jwts.builder()\r\n            .setSubject(String.format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\r\n            .claim(&quot;roles&quot;, roleNames)\r\n            .setIssuedAt(new Date())\r\n            .setExpiration(new Date(System.currentTimeMillis() + jwtExpireDate))\r\n            .signWith(SignatureAlgorithm.HS512, jwtSecret)\r\n            .compact();\r\n      }\r\n\r\nI have overcome this problem by adding\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n        &lt;version&gt;2.3.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nto my pom file and now my project is running. But I am not sure that this is the most effective and correct way to deal with this problem. I would appreciate it if you could share your views on this subject\r\n","title":"Spring Boot Migration javax.xml.bind.DatatypeConverter Error","body":"<p>I have migrated an application running Spring Boot 2.7 to Spring Boot 3.1.2. After making the necessary security arrangements, I was able to build and run it without any problems. But when I tried to login with Bearer token, I got <code>java.lang.ClassNotFoundException: javax.xml.bind.DatatypeConverter</code> error. I didn't have such a problem when using Spring Boot 2.7.</p>\n<p>Here was the one that gave the error:</p>\n<pre><code>public String generateAccessToken(User user) {\n    List&lt;String&gt; roleNames = user.getRoles().stream()\n        .map(Role::getRoleType)\n        .map(Enum::name)\n        .toList();\n\n    return Jwts.builder()\n        .setSubject(String.format(&quot;%s,%s&quot;, user.getId(), user.getEmail()))\n        .claim(&quot;roles&quot;, roleNames)\n        .setIssuedAt(new Date())\n        .setExpiration(new Date(System.currentTimeMillis() + jwtExpireDate))\n        .signWith(SignatureAlgorithm.HS512, jwtSecret)\n        .compact();\n  }\n</code></pre>\n<p>I have overcome this problem by adding</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to my pom file and now my project is running. But I am not sure that this is the most effective and correct way to deal with this problem. I would appreciate it if you could share your views on this subject</p>\n"},{"tags":["java","javafx","audio","url-scheme","unsupportedoperation"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1689895130,"post_id":76733812,"comment_id":135281732,"body_markdown":"Audio plays just fine for me on Windows 10 build 19045 using Zulu 20.0.2—with and without JavaFX included—and either JavaFX 20.0.2 or JavaFX 21-ea+24. [Zulu 18 doesn&#39;t seem to be available any more](https://www.azul.com/downloads/#zulu).","body":"Audio plays just fine for me on Windows 10 build 19045 using Zulu 20.0.2—with and without JavaFX included—and either JavaFX 20.0.2 or JavaFX 21-ea+24. <a href=\"https://www.azul.com/downloads/#zulu\" rel=\"nofollow noreferrer\">Zulu 18 doesn&#39;t seem to be available any more</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689896495,"post_id":76733812,"comment_id":135281841,"body_markdown":"There appears to be something strange in your setup, or at least something I don&#39;t understand in the description and error message.  You mention that you *&quot;made sure that the sound file is actually included in .jar in the correct path&quot;*.  But the error message is `Unsupported protocol &quot;file&quot;`.  Resources in a jar file are accessed via the `jar` protocol, not the `file` protocol. I don&#39;t know what the cause is.","body":"There appears to be something strange in your setup, or at least something I don&#39;t understand in the description and error message.  You mention that you <i>&quot;made sure that the sound file is actually included in .jar in the correct path&quot;</i>.  But the error message is <code>Unsupported protocol &quot;file&quot;</code>.  Resources in a jar file are accessed via the <code>jar</code> protocol, not the <code>file</code> protocol. I don&#39;t know what the cause is."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1689896663,"post_id":76733812,"comment_id":135281864,"body_markdown":"You example app is playing the audio app, without either starting the JavaFX runtime explicitly or launching a JavaFX application, which will implicitly start the JavaFX runtime.  I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running (I wouldn&#39;t try it).","body":"You example app is playing the audio app, without either starting the JavaFX runtime explicitly or launching a JavaFX application, which will implicitly start the JavaFX runtime.  I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running (I wouldn&#39;t try it)."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689912392,"post_id":76733812,"comment_id":135283120,"body_markdown":"Use a debugger with a breakpoint on [`NativeMediaManager.canPlayProtocol`](https://github.com/openjdk/jfx/blob/600cee70a2f6f907a53f7183315e6d7f79b291d6/modules/javafx.media/src/main/java/com/sun/media/jfxmediaimpl/NativeMediaManager.java#L264) and see which protocols it can actually play on your system.","body":"Use a debugger with a breakpoint on <a href=\"https://github.com/openjdk/jfx/blob/600cee70a2f6f907a53f7183315e6d7f79b291d6/modules/javafx.media/src/main/java/com/sun/media/jfxmediaimpl/NativeMediaManager.java#L264\" rel=\"nofollow noreferrer\"><code>NativeMediaManager.canPlayProtocol</code></a> and see which protocols it can actually play on your system."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689913457,"post_id":76733812,"comment_id":135283214,"body_markdown":"@jewelsea &quot;_I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running_&quot; -- It worked for me, but yes, I would not rely on that.","body":"@jewelsea &quot;<i>I don&#39;t know if playing audio with JavaFX media is supported if the JavaFX runtime is not running</i>&quot; -- It worked for me, but yes, I would not rely on that."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1689925563,"post_id":76733812,"comment_id":135284909,"body_markdown":"It&#39;s definitely getting confused about the type of resource but as @jewelsea says, you are initializing the FX environment in the wrong way so that won&#39;t help. If it&#39;s any use I can post a link to a working version. I say *working* but actually the main thread doesn&#39;t complete for me, which suggests that *I* have something slightly wrong","body":"It&#39;s definitely getting confused about the type of resource but as @jewelsea says, you are initializing the FX environment in the wrong way so that won&#39;t help. If it&#39;s any use I can post a link to a working version. I say <i>working</i> but actually the main thread doesn&#39;t complete for me, which suggests that <i>I</i> have something slightly wrong"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689927155,"post_id":76733812,"comment_id":135285200,"body_markdown":"@jewelsea It&#39;s actually `jar:file:/`","body":"@jewelsea It&#39;s actually <code>jar:file:&#47;</code>"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689930193,"post_id":76733812,"comment_id":135285725,"body_markdown":"The error message I quoted does not say `jar:file:`, but maybe that doesn’t matter.  What protocols were reported as supported when performed the requested debugging?  Calling JavaFX methods from the awt thread and without starting the runtime is inadvisable IMO.","body":"The error message I quoted does not say <code>jar:file:</code>, but maybe that doesn’t matter.  What protocols were reported as supported when performed the requested debugging?  Calling JavaFX methods from the awt thread and without starting the runtime is inadvisable IMO."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1689930359,"post_id":76733812,"comment_id":135285759,"body_markdown":"@g00se Interesting. Playing the `AudioClip` the same way as the OP, I had to add a call to `Thread.sleep` to _stop_ the main thread from exiting too early (which led to the JVM exiting too early). Apparently, trying to use an `AudioClip` outside a JavaFX application leads to unexpected behavior, which is honestly not surprising.","body":"@g00se Interesting. Playing the <code>AudioClip</code> the same way as the OP, I had to add a call to <code>Thread.sleep</code> to <i>stop</i> the main thread from exiting too early (which led to the JVM exiting too early). Apparently, trying to use an <code>AudioClip</code> outside a JavaFX application leads to unexpected behavior, which is honestly not surprising."},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689930687,"post_id":76733812,"comment_id":135285823,"body_markdown":"@Slaw My the original project is basically separate application so there was no need to Thread.sleep(), and I still get the UnsuportedProtocol &quot;file&quot;/UnsatisfiedLinkError: no glib-lite (based on if the .jar is built on my windows machine or on linux github workspace)","body":"@Slaw My the original project is basically separate application so there was no need to Thread.sleep(), and I still get the UnsuportedProtocol &quot;file&quot;/UnsatisfiedLinkError: no glib-lite (based on if the .jar is built on my windows machine or on linux github workspace)"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689930731,"post_id":76733812,"comment_id":135285828,"body_markdown":"Even though I reinstalled jdk","body":"Even though I reinstalled jdk"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689930785,"post_id":76733812,"comment_id":135285838,"body_markdown":"JavaFX jars from Maven central include native components for the detected OS, CPU and architecture, including the streaming components.    When you init the runtime, it extracts these from the jar to a cache directory it places in the native library load path.  If you don’t init it, it won’t be done.  The JavaFX SDK jars are different and include the native components as separate files shipped in the sdk lib dir.  jmods and images built by jlink from jmods include the native libs in the mod or image files, which, unlike jars have a built-in mechanism for native code resolution.","body":"JavaFX jars from Maven central include native components for the detected OS, CPU and architecture, including the streaming components.    When you init the runtime, it extracts these from the jar to a cache directory it places in the native library load path.  If you don’t init it, it won’t be done.  The JavaFX SDK jars are different and include the native components as separate files shipped in the sdk lib dir.  jmods and images built by jlink from jmods include the native libs in the mod or image files, which, unlike jars have a built-in mechanism for native code resolution."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1689930841,"post_id":76733812,"comment_id":135285846,"body_markdown":"@kofiy That stack trace and the presence of the `AWT-EventQueue-0` thread indicate you&#39;re using AWT or Swing as the UI framework, but then trying to use JavaFX to play audio. Mixing UI frameworks like this is not recommended. But if you must, then you have to manage which UI thread is executing certain code appropriately. First, initialize the JavaFX platform (there are a few ways to do this). Then make sure any interaction with the `AudioClip` occurs on the _JavaFX Application Thread_, not the EDT.","body":"@kofiy That stack trace and the presence of the <code>AWT-EventQueue-0</code> thread indicate you&#39;re using AWT or Swing as the UI framework, but then trying to use JavaFX to play audio. Mixing UI frameworks like this is not recommended. But if you must, then you have to manage which UI thread is executing certain code appropriately. First, initialize the JavaFX platform (there are a few ways to do this). Then make sure any interaction with the <code>AudioClip</code> occurs on the <i>JavaFX Application Thread</i>, not the EDT."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689931210,"post_id":76733812,"comment_id":135285918,"body_markdown":"Your issue is no native streaming library on the Java native library path (because you did not correctly package the app and start the JavaFX runtime).  You use maven JavaFX dependencies and don’t init the runtime, so native libraries are not extracted from the JavaFX jars.  When the native libraries can’t be found, the Java code can’t play media usng any protocol, hence the unsupported protocol exception, which is a symptom and not a cause of your problem.","body":"Your issue is no native streaming library on the Java native library path (because you did not correctly package the app and start the JavaFX runtime).  You use maven JavaFX dependencies and don’t init the runtime, so native libraries are not extracted from the JavaFX jars.  When the native libraries can’t be found, the Java code can’t play media usng any protocol, hence the unsupported protocol exception, which is a symptom and not a cause of your problem."},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689931507,"post_id":76733812,"comment_id":135285974,"body_markdown":"@jewelsea The supported protocols are: `file`, `http`, `https`, `jrt`, `resource` (sorry for the wait)","body":"@jewelsea The supported protocols are: <code>file</code>, <code>http</code>, <code>https</code>, <code>jrt</code>, <code>resource</code> (sorry for the wait)"},{"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"score":0,"creation_date":1689931671,"post_id":76733812,"comment_id":135286004,"body_markdown":"@jewelsea Oh thanks, got it. (Still kind off weird that it works for other people, and that error is different based on if the .jar was build on windows or linux)","body":"@jewelsea Oh thanks, got it. (Still kind off weird that it works for other people, and that error is different based on if the .jar was build on windows or linux)"},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689931858,"post_id":76733812,"comment_id":135286035,"body_markdown":"Probably the issue wasn’t replicable by others because they had a different configuration whch placed JavaFX native libraries on the Java native library path.  For example, they had initialized the JavaFX environment for another project sometime in the past, which created a cached JavaFX native library directory on their system that was reused when they tried to replicate your issue.","body":"Probably the issue wasn’t replicable by others because they had a different configuration whch placed JavaFX native libraries on the Java native library path.  For example, they had initialized the JavaFX environment for another project sometime in the past, which created a cached JavaFX native library directory on their system that was reused when they tried to replicate your issue."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689931875,"post_id":76733812,"comment_id":135286042,"body_markdown":"Yes, the JavaFX, is misused. My FX knowledge is almost non-existent, but fwiw I&#39;ll append the code I&#39;m using to my &#39;answer&#39;. It plays but misbehaves in that the app doesn&#39;t exit properly. It could be that it&#39;s being inited as per gui but *without* a gui that&#39;s the problem","body":"Yes, the JavaFX, is misused. My FX knowledge is almost non-existent, but fwiw I&#39;ll append the code I&#39;m using to my &#39;answer&#39;. It plays but misbehaves in that the app doesn&#39;t exit properly. It could be that it&#39;s being inited as per gui but <i>without</i> a gui that&#39;s the problem"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689932154,"post_id":76733812,"comment_id":135286097,"body_markdown":"[JavaFX creates an application thread for running the application start method, processing input events, and running animation timelines.](https://docs.oracle.com/javase/8/javafx/api/javafx/application/Application.html). Not quite sure if the same thread that runs the start method runs the audio clip or not ...","body":"<a href=\"https://docs.oracle.com/javase/8/javafx/api/javafx/application/Application.html\" rel=\"nofollow noreferrer\">JavaFX creates an application thread for running the application start method, processing input events, and running animation timelines.</a>. Not quite sure if the same thread that runs the start method runs the audio clip or not ..."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689932316,"post_id":76733812,"comment_id":135286131,"body_markdown":"The maven jars are implicitly classified dependencies.  By default maven will only require the jar with native code matching the build system.  The jars are not portable from windows to Linux.  If you want jars as dependencies for different platforms you need to include them as classified dependencies for all target platforms, [like this](https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing).  Though linking jmods into a target image for a given platform using jlink is probably preferred.","body":"The maven jars are implicitly classified dependencies.  By default maven will only require the jar with native code matching the build system.  The jars are not portable from windows to Linux.  If you want jars as dependencies for different platforms you need to include them as classified dependencies for all target platforms, <a href=\"https://stackoverflow.com/questions/52653836/maven-shade-javafx-runtime-components-are-missing\">like this</a>.  Though linking jmods into a target image for a given platform using jlink is probably preferred."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689932537,"post_id":76733812,"comment_id":135286180,"body_markdown":"@g00se media and JavaFX threads are different.  See the [Threads section of the JavaFX architecture documentation](https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm#A1107438).","body":"@g00se media and JavaFX threads are different.  See the <a href=\"https://docs.oracle.com/javase/8/javafx/get-started-tutorial/jfx-architecture.htm#A1107438\" rel=\"nofollow noreferrer\">Threads section of the JavaFX architecture documentation</a>."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1689933500,"post_id":76733812,"comment_id":135286361,"body_markdown":"@g00se The JavaFX runtime has a lifecycle for startup and shutdown documented in the `Application` javadoc.  When the JavaFX runtime is shutdown (`Platform.exit()` is one way), it will call stop on the application to release resources, then it will stop the JavaFX application, render and media threads. The code in the question does not do this, hence your shutdown issues.","body":"@g00se The JavaFX runtime has a lifecycle for startup and shutdown documented in the <code>Application</code> javadoc.  When the JavaFX runtime is shutdown (<code>Platform.exit()</code> is one way), it will call stop on the application to release resources, then it will stop the JavaFX application, render and media threads. The code in the question does not do this, hence your shutdown issues."},{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":1,"creation_date":1689934194,"post_id":76733812,"comment_id":135286514,"body_markdown":"Summary, problems so far: Ran JavaFX from classpath not module path, called JavaFX code from AWT thread, did not initialize the JavaFX runtime,  did not shutdown the JavaFX runtime. did not include native components for required target platforms; native components were not placed on the Java library path due to incorrectly packaging and using the JavaFX system, tried to execute jar by double click using obsolete and incompatible Java 8 runtime, used jar built in git workspace that won’t match the target runtime architecture:","body":"Summary, problems so far: Ran JavaFX from classpath not module path, called JavaFX code from AWT thread, did not initialize the JavaFX runtime,  did not shutdown the JavaFX runtime. did not include native components for required target platforms; native components were not placed on the Java library path due to incorrectly packaging and using the JavaFX system, tried to execute jar by double click using obsolete and incompatible Java 8 runtime, used jar built in git workspace that won’t match the target runtime architecture:"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689935355,"post_id":76733812,"comment_id":135286715,"body_markdown":"*The code in the question does not do this, hence your shutdown issues.* @jewelsea If I call `Platform.exit()` the app stops without playing the file, which is why it&#39;s commented out","body":"<i>The code in the question does not do this, hence your shutdown issues.</i> @jewelsea If I call <code>Platform.exit()</code> the app stops without playing the file, which is why it&#39;s commented out"}],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1689931936,"creation_date":1689891470,"answer_id":76734039,"question_id":76733812,"body_markdown":"This is not an answer but I&#39;m putting this out there to show you what happens for me. In both cases the sound plays and I use your `toExternalForm` to print to stdout. When running it from the jar:\r\n```\r\ngoose@t410:/tmp/sound$ java -cp /tmp/sound/target/sound-1.0-SNAPSHOT.jar fx.sound.App\r\njar:file:/tmp/sound/target/sound-1.0-SNAPSHOT.jar!/sound/ambience/testSound.mp3\r\n```\r\nthen with Maven:\r\n```\r\ngoose@t410:/tmp/sound$ mvnt javafx:run\r\n[INFO] Scanning for projects...\r\n[INFO] \r\n[INFO] -----------------------&lt; com.technojeeves:sound &gt;-----------------------\r\n[INFO] Building sound 1.0-SNAPSHOT\r\n[INFO] --------------------------------[ jar ]---------------------------------\r\n[INFO] \r\n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.6:run (default-cli) &gt; process-classes @ sound &gt;&gt;&gt;\r\n[INFO] \r\n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sound ---\r\n[INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n[INFO] Copying 1 resource\r\n[INFO] \r\n[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sound ---\r\n[INFO] Nothing to compile - all classes are up to date\r\n[INFO] \r\n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.6:run (default-cli) &lt; process-classes @ sound &lt;&lt;&lt;\r\n[INFO] \r\n[INFO] \r\n[INFO] --- javafx-maven-plugin:0.0.6:run (default-cli) @ sound ---\r\n[INFO] Toolchain in javafx-maven-plugin null\r\n[WARNING] Module name not found in &lt;mainClass&gt;. Module name will be assumed from module-info.java\r\nfile:/tmp/sound/target/classes/sound/ambience/testSound.mp3\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD SUCCESS\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  7.320 s\r\n[INFO] Finished at: 2023-07-20T23:13:32+01:00\r\n[INFO] ------------------------------------------------------------------------\r\ngoose@t410:/tmp/sound$ \r\n```\r\nCode used to run the clip:\r\n\r\n```\r\npackage main;\r\n\r\nimport javafx.application.Application;\r\nimport javafx.application.Platform;\r\nimport javafx.stage.Stage;\r\nimport javafx.scene.media.AudioClip;\r\n\r\npublic class Main extends Application {\r\n    @Override\r\n    public void start(Stage stage) {\r\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        System.out.println(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        clip.play();\r\n        //Platform.exit();\r\n    }\r\n\r\n\r\n    public static void main(String[] args) {\r\n        launch();\r\n    }\r\n\r\n}\r\n```","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>This is not an answer but I'm putting this out there to show you what happens for me. In both cases the sound plays and I use your <code>toExternalForm</code> to print to stdout. When running it from the jar:</p>\n<pre><code>goose@t410:/tmp/sound$ java -cp /tmp/sound/target/sound-1.0-SNAPSHOT.jar fx.sound.App\njar:file:/tmp/sound/target/sound-1.0-SNAPSHOT.jar!/sound/ambience/testSound.mp3\n</code></pre>\n<p>then with Maven:</p>\n<pre><code>goose@t410:/tmp/sound$ mvnt javafx:run\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------------&lt; com.technojeeves:sound &gt;-----------------------\n[INFO] Building sound 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] &gt;&gt;&gt; javafx-maven-plugin:0.0.6:run (default-cli) &gt; process-classes @ sound &gt;&gt;&gt;\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ sound ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.8.0:compile (default-compile) @ sound ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] &lt;&lt;&lt; javafx-maven-plugin:0.0.6:run (default-cli) &lt; process-classes @ sound &lt;&lt;&lt;\n[INFO] \n[INFO] \n[INFO] --- javafx-maven-plugin:0.0.6:run (default-cli) @ sound ---\n[INFO] Toolchain in javafx-maven-plugin null\n[WARNING] Module name not found in &lt;mainClass&gt;. Module name will be assumed from module-info.java\nfile:/tmp/sound/target/classes/sound/ambience/testSound.mp3\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  7.320 s\n[INFO] Finished at: 2023-07-20T23:13:32+01:00\n[INFO] ------------------------------------------------------------------------\ngoose@t410:/tmp/sound$ \n</code></pre>\n<p>Code used to run the clip:</p>\n<pre><code>package main;\n\nimport javafx.application.Application;\nimport javafx.application.Platform;\nimport javafx.stage.Stage;\nimport javafx.scene.media.AudioClip;\n\npublic class Main extends Application {\n    @Override\n    public void start(Stage stage) {\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        System.out.println(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        clip.play();\n        //Platform.exit();\n    }\n\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689935490,"creation_date":1689935490,"answer_id":76737197,"question_id":76733812,"body_markdown":"In the end issue was in fact with JavaFX not being initialized.\r\n\r\nAs a simple test workaround I created very simple JavaFX app that just starts the actual JavaX application. \r\n\r\n\r\n\r\n(Although in the future I will probably rewrite a big piece of the code to avoid this VERY BAD workaround. (But at least it works for now...))","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>In the end issue was in fact with JavaFX not being initialized.</p>\n<p>As a simple test workaround I created very simple JavaFX app that just starts the actual JavaX application.</p>\n<p>(Although in the future I will probably rewrite a big piece of the code to avoid this VERY BAD workaround. (But at least it works for now...))</p>\n"}],"owner":{"account_id":19836578,"reputation":31,"user_id":22260806,"display_name":"kofiy"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689935490,"creation_date":1689888520,"question_id":76733812,"body_markdown":"I&#39;m trying to use javafx.scene.media.AudioClip to play audio included with .jar file, but I&#39;m constantly getting hit with this error:\r\n```java\r\nException in thread &quot;main&quot; java.lang.UnsupportedOperationException: Unsupported protocol &quot;file&quot;\r\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:241)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\r\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\r\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\r\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\r\n        at main.Main.main(Main.java:77)\r\n```\r\n\r\n\r\nI simplified my code as much as possible, omitting abstractions and additional methods to make sure that the error is actually in the AudioClip:\r\n\r\n```java\r\npackage main;\r\n\r\nimport javafx.scene.media.AudioClip;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\r\n        clip.play();\r\n    }\r\n}\r\n```\r\n(I also tried using .toString() instead of toExternalForm())\r\n\r\nI made sure that the sound file is actually included in .jar in the correct path. For example this way of playing audio via JavaX AudioInputStream and Clip works just fine:\r\n```java\r\n    public static void main(String[] args) throws LineUnavailableException, IOException, UnsupportedAudioFileException, InterruptedException {\r\n        AudioInputStream ais = AudioSystem.getAudioInputStream(Main.class.getResource(&quot;/sound/ambience/randomScare.wav&quot;));\r\n        Clip clip = AudioSystem.getClip();\r\n        clip.open(ais);\r\n        ais.close();\r\n\r\n        clip.start();\r\n        Thread.sleep()\r\n    }\r\n``` \r\n(But I can&#39;t use this in final product, as it supports only uncompressed .wav format)\r\n\r\nI have no idea what could be causing that problem, as even [official javadoc](https://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioClip.html#AudioClip(java.lang.String)) states:\r\n&gt; `source` - URL string from which to load the audio clip. This can be an HTTP, file or **jar source**.\r\n\r\n\r\nSome more information that possibly can help with finding solution:\r\nI&#39;m using `org.openjfx:javafx-media`, version `21-ea+24` from maven central repository (and I also tried switching back to version `20.0.1`):\r\n```xml\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\r\n            &lt;version&gt;21-ea+24&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\nMaven project is setup with java version 1.17:\r\n```xml\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;1.17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;1.17&lt;/maven.compiler.target&gt;\r\n        &lt;exec.mainClass&gt;main.Main&lt;/exec.mainClass&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n    &lt;/properties&gt;\r\n```\r\nAnd I run it using Zulu 18 (`Zulu18.32+13-CA (build 18.0.2.1+1)`) on Windows 10 (`Build 19044`)\r\n\r\nI will appreciate any help (and hope that I&#39;ve given all needed information).\r\n\r\n**Update:** I tried running the .jar build with github workspaces (that .jar worked just fine for my friend), and got different error:\r\n```java\r\nException in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsatisfiedLinkError: no glib-lite in java.library.path: C:\\Program Files\\Zulu\\zulu-18\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\Zulu\\zulu-18\\bin\\;C:\\Program Files\\Zulu\\zulu-19\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\\jdk-16.0.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Common Files\\Autodesk Shared\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\spwn\\;C:\\Program Files\\Kotlin\\kotlinc_1_6_10;C:\\Program Files\\Kotlin\\kotlinc_1_6_10\\bin;C:\\Program Files\\Kotlin\\konaco_1_6_10;C:\\Program Files\\Kotlin\\konaco_1_6_10\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\ffmpeg\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\PuTTY\\;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\\;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\;C:\\Users\\Kofiy\\AppData\\Local\\Microsoft\\WindowsApps;C:\\jdk-16.0.1\\bin;C:\\jdk-16.0.1\\bin\\;C:\\jdk-16.0.1\\bin\\javac.exe;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.1.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\PyCharm Community Edition 2021.3.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts;C:\\Users\\Kofiy\\.dotnet\\tools;.\r\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2434)\r\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:848)\r\n        at java.base/java.lang.System.loadLibrary(System.java:2015)\r\n        at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:168)\r\n        at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:56)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:111)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:108)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:78)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:90)\r\n        at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\r\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\r\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\r\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\r\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\r\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\r\n        at main.Sound.playMP3(Sound.java:222)\r\n        at main.GamePanel.startGame(GamePanel.java:1624)\r\n        at main.KeyHandler.keyPressed(KeyHandler.java:126)\r\n        at java.desktop/java.awt.Component.processKeyEvent(Component.java:6574)\r\n        at java.desktop/javax.swing.JComponent.processKeyEvent(JComponent.java:2905)\r\n        at java.desktop/java.awt.Component.processEvent(Component.java:6393)\r\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4991)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\r\n        at java.desktop/java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1952)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:883)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1146)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:1020)\r\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:848)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4872)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n(((*The error in now in AWT-EventQueue-0 because it&#39;s full version of the project and not mine simplified code that I wrote earlier*)))\r\n\r\nAnd I also tried running .jar with doubleclicking on it, and both .jar built on my system via IntelJ IDEA and .jar built on GitHub workspaces showed this error:\r\n[![Error: A JNI error has occurred, please check your installation and try again][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mzN3U.png\r\n**PS:** This JNI visual error actually appears whenever I double click on **any .jar**, what&#39;s also very strange \r\n**PS 2:** The JNI visual error is because I messed up and had Java 1.8 as default JRE\r\n\r\n***So it does in fact look like the problem with my installation, so I will just try reinstalling JDK, verifying system files etc.***","title":"JavaFX problem with playing audio: Unsupported protocol &quot;file&quot;","body":"<p>I'm trying to use javafx.scene.media.AudioClip to play audio included with .jar file, but I'm constantly getting hit with this error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.UnsupportedOperationException: Unsupported protocol &quot;file&quot;\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:241)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\n        at main.Main.main(Main.java:77)\n</code></pre>\n<p>I simplified my code as much as possible, omitting abstractions and additional methods to make sure that the error is actually in the AudioClip:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package main;\n\nimport javafx.scene.media.AudioClip;\n\npublic class Main {\n    public static void main(String[] args) {\n        AudioClip clip = new AudioClip(Main.class.getResource(&quot;/sound/ambience/testSound.mp3&quot;).toExternalForm());\n        clip.play();\n    }\n}\n</code></pre>\n<p>(I also tried using .toString() instead of toExternalForm())</p>\n<p>I made sure that the sound file is actually included in .jar in the correct path. For example this way of playing audio via JavaX AudioInputStream and Clip works just fine:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) throws LineUnavailableException, IOException, UnsupportedAudioFileException, InterruptedException {\n        AudioInputStream ais = AudioSystem.getAudioInputStream(Main.class.getResource(&quot;/sound/ambience/randomScare.wav&quot;));\n        Clip clip = AudioSystem.getClip();\n        clip.open(ais);\n        ais.close();\n\n        clip.start();\n        Thread.sleep()\n    }\n</code></pre>\n<p>(But I can't use this in final product, as it supports only uncompressed .wav format)</p>\n<p>I have no idea what could be causing that problem, as even <a href=\"https://docs.oracle.com/javafx/2/api/javafx/scene/media/AudioClip.html#AudioClip(java.lang.String)\" rel=\"nofollow noreferrer\">official javadoc</a> states:</p>\n<blockquote>\n<p><code>source</code> - URL string from which to load the audio clip. This can be an HTTP, file or <strong>jar source</strong>.</p>\n</blockquote>\n<p>Some more information that possibly can help with finding solution:\nI'm using <code>org.openjfx:javafx-media</code>, version <code>21-ea+24</code> from maven central repository (and I also tried switching back to version <code>20.0.1</code>):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;\n            &lt;version&gt;21-ea+24&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Maven project is setup with java version 1.17:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.17&lt;/maven.compiler.target&gt;\n        &lt;exec.mainClass&gt;main.Main&lt;/exec.mainClass&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;/properties&gt;\n</code></pre>\n<p>And I run it using Zulu 18 (<code>Zulu18.32+13-CA (build 18.0.2.1+1)</code>) on Windows 10 (<code>Build 19044</code>)</p>\n<p>I will appreciate any help (and hope that I've given all needed information).</p>\n<p><strong>Update:</strong> I tried running the .jar build with github workspaces (that .jar worked just fine for my friend), and got different error:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.UnsatisfiedLinkError: no glib-lite in java.library.path: C:\\Program Files\\Zulu\\zulu-18\\bin;C:\\Windows\\Sun\\Java\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Program Files\\Zulu\\zulu-18\\bin\\;C:\\Program Files\\Zulu\\zulu-19\\bin\\;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\Program Files\\Common Files\\Oracle\\Java\\javapath;C:\\ProgramData\\Oracle\\Java\\jdk-16.0.1;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\Common Files\\Autodesk Shared\\;C:\\Program Files\\dotnet\\;C:\\Program Files\\spwn\\;C:\\Program Files\\Kotlin\\kotlinc_1_6_10;C:\\Program Files\\Kotlin\\kotlinc_1_6_10\\bin;C:\\Program Files\\Kotlin\\konaco_1_6_10;C:\\Program Files\\Kotlin\\konaco_1_6_10\\bin;C:\\Program Files\\Microsoft SQL Server\\130\\Tools\\Binn\\;C:\\Program Files\\Microsoft SQL Server\\Client SDK\\ODBC\\170\\Tools\\Binn\\;C:\\Program Files\\ffmpeg\\bin;C:\\Program Files\\Git\\cmd;C:\\Program Files\\PuTTY\\;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts\\;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\;C:\\Users\\Kofiy\\AppData\\Local\\Microsoft\\WindowsApps;C:\\jdk-16.0.1\\bin;C:\\jdk-16.0.1\\bin\\;C:\\jdk-16.0.1\\bin\\javac.exe;C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2021.1.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\GitHubDesktop\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Microsoft VS Code\\bin;C:\\Program Files\\JetBrains\\PyCharm Community Edition 2021.3.2\\bin;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310;C:\\Users\\Kofiy\\AppData\\Local\\Programs\\Python\\Python310\\Scripts;C:\\Users\\Kofiy\\.dotnet\\tools;.\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2434)\n        at java.base/java.lang.Runtime.loadLibrary0(Runtime.java:848)\n        at java.base/java.lang.System.loadLibrary(System.java:2015)\n        at com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:168)\n        at com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:56)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.lambda$new$0(NativeMediaManager.java:111)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:569)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.&lt;init&gt;(NativeMediaManager.java:108)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager$NativeMediaManagerInitializer.&lt;clinit&gt;(NativeMediaManager.java:78)\n        at com.sun.media.jfxmediaimpl.NativeMediaManager.getDefaultInstance(NativeMediaManager.java:90)\n        at com.sun.media.jfxmedia.MediaManager.canPlayProtocol(MediaManager.java:78)\n        at com.sun.media.jfxmedia.locator.Locator.&lt;init&gt;(Locator.java:240)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.&lt;init&gt;(NativeMediaAudioClip.java:53)\n        at com.sun.media.jfxmediaimpl.NativeMediaAudioClip.load(NativeMediaAudioClip.java:63)\n        at com.sun.media.jfxmediaimpl.AudioClipProvider.load(AudioClipProvider.java:66)\n        at com.sun.media.jfxmedia.AudioClip.load(AudioClip.java:135)\n        at javafx.scene.media.AudioClip.&lt;init&gt;(AudioClip.java:83)\n        at main.Sound.playMP3(Sound.java:222)\n        at main.GamePanel.startGame(GamePanel.java:1624)\n        at main.KeyHandler.keyPressed(KeyHandler.java:126)\n        at java.desktop/java.awt.Component.processKeyEvent(Component.java:6574)\n        at java.desktop/javax.swing.JComponent.processKeyEvent(JComponent.java:2905)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6393)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4991)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\n        at java.desktop/java.awt.KeyboardFocusManager.redispatchEvent(KeyboardFocusManager.java:1952)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchKeyEvent(DefaultKeyboardFocusManager.java:883)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.preDispatchKeyEvent(DefaultKeyboardFocusManager.java:1146)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.typeAheadAssertions(DefaultKeyboardFocusManager.java:1020)\n        at java.desktop/java.awt.DefaultKeyboardFocusManager.dispatchEvent(DefaultKeyboardFocusManager.java:848)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:4872)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4823)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:775)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:747)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:745)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:744)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<p>(((<em>The error in now in AWT-EventQueue-0 because it's full version of the project and not mine simplified code that I wrote earlier</em>)))</p>\n<p>And I also tried running .jar with doubleclicking on it, and both .jar built on my system via IntelJ IDEA and .jar built on GitHub workspaces showed this error:\n<a href=\"https://i.stack.imgur.com/mzN3U.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mzN3U.png\" alt=\"Error: A JNI error has occurred, please check your installation and try again\" /></a></p>\n<p><strong>PS:</strong> This JNI visual error actually appears whenever I double click on <strong>any .jar</strong>, what's also very strange\n<strong>PS 2:</strong> The JNI visual error is because I messed up and had Java 1.8 as default JRE</p>\n<p><em><strong>So it does in fact look like the problem with my installation, so I will just try reinstalling JDK, verifying system files etc.</strong></em></p>\n"},{"tags":["java","hibernate","jpa","spring-boot","h2"],"comments":[{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1500982747,"post_id":45302132,"comment_id":77565592,"body_markdown":"select * from game returns nothing means there is no data, not there is not table","body":"select * from game returns nothing means there is no data, not there is not table"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500982838,"post_id":45302132,"comment_id":77565646,"body_markdown":"how is there no data if the parameters are binded? the table isn&#39;t there because Hibernate refuses to create it, since something&#39;s not right in the data.","body":"how is there no data if the parameters are binded? the table isn&#39;t there because Hibernate refuses to create it, since something&#39;s not right in the data."},{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1500982922,"post_id":45302132,"comment_id":77565709,"body_markdown":"can you share your package structure?","body":"can you share your package structure?"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983052,"post_id":45302132,"comment_id":77565813,"body_markdown":"sure: http://i.imgur.com/3hMQEUT.png","body":"sure: <a href=\"http://i.imgur.com/3hMQEUT.png\" rel=\"nofollow noreferrer\">i.imgur.com/3hMQEUT.png</a>"},{"owner":{"account_id":10734404,"reputation":1062,"user_id":7899430,"accept_rate":50,"display_name":"PySaad"},"score":0,"creation_date":1500983073,"post_id":45302132,"comment_id":77565829,"body_markdown":"Add dialect property and use create not update. I know update should create the table but at least give a try","body":"Add dialect property and use create not update. I know update should create the table but at least give a try"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983359,"post_id":45302132,"comment_id":77566034,"body_markdown":"like that? spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create","body":"like that? spring.jpa.database-platform=org.hibernate.dialect.H2Dialect spring.jpa.hibernate.ddl-auto = create"},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1500983369,"post_id":45302132,"comment_id":77566047,"body_markdown":"didn&#39;t make a difference, eh","body":"didn&#39;t make a difference, eh"},{"owner":{"account_id":39327,"reputation":1213,"user_id":113359,"display_name":"mikemil"},"score":0,"creation_date":1523112509,"post_id":45302132,"comment_id":86430555,"body_markdown":"Found this while looking at something similiar - not sure if this was resolved but I had problems setting the database name and couldn&#39;t see the tables, but if I looked in testdb for the in-memory database, I found my tables and data.","body":"Found this while looking at something similiar - not sure if this was resolved but I had problems setting the database name and couldn&#39;t see the tables, but if I looked in testdb for the in-memory database, I found my tables and data."},{"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"score":0,"creation_date":1523260960,"post_id":45302132,"comment_id":86470015,"body_markdown":"it was resolved, thanks to the answer and comments below my post","body":"it was resolved, thanks to the answer and comments below my post"}],"answers":[{"tags":[],"owner":{"account_id":100270,"reputation":127154,"user_id":270371,"accept_rate":33,"display_name":"davidxxx"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1544964806,"creation_date":1500983593,"answer_id":45302489,"question_id":45302132,"body_markdown":"&gt; It looks like data is binded to parameters, but in H2 console SELECT *\r\n&gt; FROM GAME returns me nothing. The table doesn&#39;t exist.\r\n\r\nYou are using an `in-memory` instance of H2 :\r\n\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n\r\nIn this mode, you cannot see the content of the changes from another client that which one that started the  `in-memory` database.&lt;br&gt;\r\nTo see the changes from other clients, you have to use the TCP mode.&lt;br&gt;\r\n\r\nYou have two solutions :\r\n\r\n- using a file to persist the instance of H2.\r\n\r\n&gt; **Where are the Database Files Stored?**\r\n&gt; \r\n&gt; When using database URLs like jdbc:h2:~/test, the database is stored\r\n&gt; in the user directory. For Windows, this is usually C:\\Documents and\r\n&gt; Settings\\&lt;userName&gt; or C:\\Users\\&lt;userName&gt;. If the base directory is\r\n&gt; not set (as in jdbc:h2:./test), the database files are stored in the\r\n&gt; directory where the application is started (the current working\r\n&gt; directory). When using the H2 Console application from the start menu,\r\n&gt; this is &lt;Installation Directory&gt;/bin. The base directory can be set in\r\n&gt; the database URL. A fixed or relative path can be used. When using the\r\n&gt; URL jdbc:h2:file:./data/sample, the database is stored in the\r\n&gt; directory data (relative to the current working directory). The\r\n&gt; directory is created automatically if it does not yet exist. It is\r\n&gt; also possible to use the fully qualified directory name (and for\r\n&gt; Windows, drive name). Example: jdbc:h2:file:C:/data/test\r\n\r\n\r\n- keeping to use an in-memory instance but using the TCP mode.\r\n\r\nReplace :\r\n\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n\r\nby :\r\n\r\n    spring.datasource.url=jdbc:h2:tcp://localhost/~/test\r\n\r\n\r\nGenerally, I switch to this mode during JPA entity unit testing when I really want to know which was inserted in the database.&lt;br&gt;\r\n\r\nFrom [the official documentation][1] :\r\n\r\n\r\n&gt; **In-Memory Databases**\r\n&gt; \r\n&gt; For certain use cases (for example: rapid prototyping, testing, high\r\n&gt; performance operations, read-only databases), it may not be required\r\n&gt; to persist data, or persist changes to the data. This database\r\n&gt; supports the in-memory mode, where the data is not persisted.\r\n&gt;...\r\n\r\n&gt; In some cases, only one connection to a in-memory database is\r\n&gt; required. This means the database to be opened is private. In this\r\n&gt; case, the database URL is jdbc:h2:mem: Opening two connections within\r\n&gt; the same virtual machine means opening two different (private)\r\n&gt; databases.\r\n&gt; \r\n&gt; Sometimes multiple connections to the same in-memory database are\r\n&gt; required. In this case, the database URL must include a name. Example:\r\n&gt; jdbc:h2:mem:db1. Accessing the same database using this URL only works\r\n&gt; within the same virtual machine and class loader environment.\r\n&gt; \r\n\r\n&gt; **To access an in-memory database from another process or from another\r\n&gt; computer, you need to start a TCP server in the same process as the\r\n&gt; in-memory database was created. The other processes then need to\r\n&gt; access the database over TCP/IP or TLS, using a database URL such as:\r\n&gt; jdbc:h2:tcp://localhost/mem:db1.**\r\n\r\n\r\n----------\r\n\r\n\r\n**Alternative to standalone H2 Console : using the H2 console accessible from the Spring Boot application**    \r\n\r\nIndeed the H2 database provides a browser-based console that [Spring Boot can\r\nauto-configure for you][2]. The console is auto-configured when these\r\nconditions are met :\r\n\r\n&gt; \r\n&gt; - You are developing a servlet-based web application.\r\n&gt; - com.h2database:h2 is on the classpath.\r\n&gt; - You are using Spring Boot’s developer tools.\r\n\r\nSo it means that will be accessible only in dev. What generally you want.  \r\n\r\nBy default, the console is available at `/h2-console`.  \r\nSet the `spring.h2.console.path` property to change that.\r\n\r\n\r\n  [1]: http://www.h2database.com/html/features.html\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-sql-h2-console","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<blockquote>\n  <p>It looks like data is binded to parameters, but in H2 console SELECT *\n  FROM GAME returns me nothing. The table doesn't exist.</p>\n</blockquote>\n\n<p>You are using an <code>in-memory</code> instance of H2 :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\n</code></pre>\n\n<p>In this mode, you cannot see the content of the changes from another client that which one that started the  <code>in-memory</code> database.<br>\nTo see the changes from other clients, you have to use the TCP mode.<br></p>\n\n<p>You have two solutions :</p>\n\n<ul>\n<li>using a file to persist the instance of H2.</li>\n</ul>\n\n<blockquote>\n  <p><strong>Where are the Database Files Stored?</strong></p>\n  \n  <p>When using database URLs like jdbc:h2:~/test, the database is stored\n  in the user directory. For Windows, this is usually C:\\Documents and\n  Settings\\ or C:\\Users\\. If the base directory is\n  not set (as in jdbc:h2:./test), the database files are stored in the\n  directory where the application is started (the current working\n  directory). When using the H2 Console application from the start menu,\n  this is /bin. The base directory can be set in\n  the database URL. A fixed or relative path can be used. When using the\n  URL jdbc:h2:file:./data/sample, the database is stored in the\n  directory data (relative to the current working directory). The\n  directory is created automatically if it does not yet exist. It is\n  also possible to use the fully qualified directory name (and for\n  Windows, drive name). Example: jdbc:h2:file:C:/data/test</p>\n</blockquote>\n\n<ul>\n<li>keeping to use an in-memory instance but using the TCP mode.</li>\n</ul>\n\n<p>Replace :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\n</code></pre>\n\n<p>by :</p>\n\n<pre><code>spring.datasource.url=jdbc:h2:tcp://localhost/~/test\n</code></pre>\n\n<p>Generally, I switch to this mode during JPA entity unit testing when I really want to know which was inserted in the database.<br></p>\n\n<p>From <a href=\"http://www.h2database.com/html/features.html\" rel=\"noreferrer\">the official documentation</a> :</p>\n\n<blockquote>\n  <p><strong>In-Memory Databases</strong></p>\n  \n  <p>For certain use cases (for example: rapid prototyping, testing, high\n  performance operations, read-only databases), it may not be required\n  to persist data, or persist changes to the data. This database\n  supports the in-memory mode, where the data is not persisted.\n  ...</p>\n  \n  <p>In some cases, only one connection to a in-memory database is\n  required. This means the database to be opened is private. In this\n  case, the database URL is jdbc:h2:mem: Opening two connections within\n  the same virtual machine means opening two different (private)\n  databases.</p>\n  \n  <p>Sometimes multiple connections to the same in-memory database are\n  required. In this case, the database URL must include a name. Example:\n  jdbc:h2:mem:db1. Accessing the same database using this URL only works\n  within the same virtual machine and class loader environment.</p>\n  \n  <p><strong>To access an in-memory database from another process or from another\n  computer, you need to start a TCP server in the same process as the\n  in-memory database was created. The other processes then need to\n  access the database over TCP/IP or TLS, using a database URL such as:\n  jdbc:h2:tcp://localhost/mem:db1.</strong></p>\n</blockquote>\n\n<hr>\n\n<p><strong>Alternative to standalone H2 Console : using the H2 console accessible from the Spring Boot application</strong>    </p>\n\n<p>Indeed the H2 database provides a browser-based console that <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-sql-h2-console\" rel=\"noreferrer\">Spring Boot can\nauto-configure for you</a>. The console is auto-configured when these\nconditions are met :</p>\n\n<blockquote>\n  <ul>\n  <li>You are developing a servlet-based web application.</li>\n  <li>com.h2database:h2 is on the classpath.</li>\n  <li>You are using Spring Boot’s developer tools.</li>\n  </ul>\n</blockquote>\n\n<p>So it means that will be accessible only in dev. What generally you want.  </p>\n\n<p>By default, the console is available at <code>/h2-console</code>.<br>\nSet the <code>spring.h2.console.path</code> property to change that.</p>\n"},{"tags":[],"owner":{"account_id":6967899,"reputation":1320,"user_id":5345215,"display_name":"Ashlin Karkada"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1524562226,"creation_date":1524562226,"answer_id":49998098,"question_id":45302132,"body_markdown":"Check if you main class(Spring boot application class) is able to scan the entities defined. This usually happens when the entities are in a different package than that of the main class.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Check if you main class(Spring boot application class) is able to scan the entities defined. This usually happens when the entities are in a different package than that of the main class.</p>\n"},{"tags":[],"owner":{"account_id":1373820,"reputation":1579,"user_id":1308236,"accept_rate":79,"display_name":"Dev M"},"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1532172438,"creation_date":1532172438,"answer_id":51455582,"question_id":45302132,"body_markdown":"Just go to the H2 console for example at: http://localhost:9090/h2-console/\r\nand In the JDBC URL field, type **jdbc:h2:mem:testdb** to configure the connection to the testdb database in RAM.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Just go to the H2 console for example at: <a href=\"http://localhost:9090/h2-console/\" rel=\"noreferrer\">http://localhost:9090/h2-console/</a>\nand In the JDBC URL field, type <strong>jdbc:h2:mem:testdb</strong> to configure the connection to the testdb database in RAM.</p>\n"},{"tags":[],"owner":{"account_id":17749239,"reputation":131,"user_id":12887824,"display_name":"Avinash Pratap Singh"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1581536433,"creation_date":1581533648,"answer_id":60195141,"question_id":45302132,"body_markdown":"Putting this line: `spring.jpa.hibernate.ddl-auto = update` in your application.properties file start population data in in-memory database and in file based database for H2 data-base.Hope this helps anyone.","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Putting this line: <code>spring.jpa.hibernate.ddl-auto = update</code> in your application.properties file start population data in in-memory database and in file based database for H2 data-base.Hope this helps anyone.</p>\n"},{"tags":[],"owner":{"account_id":18065529,"reputation":41,"user_id":13131528,"display_name":"Ganesh Gope"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1585262752,"creation_date":1585255220,"answer_id":60875766,"question_id":45302132,"body_markdown":"use `@EntityScan(&quot;com.db.jpasample.entity&quot;)`\r\n     \r\n    @SpringBootApplication\r\n    @EntityScan(&quot;com.db.jpasample.entity&quot;)\r\n    public class GsoftApplication {\r\n      \r\n   \t  public static void main(String[] args) {\r\n      \tSpringApplication.run(GsoftApplication.class, args);\r\n      }\r\n      \r\n    }\r\n\r\n\r\n----------\r\n\r\n\r\napplication.properties\r\n\r\n    server.port = 9090\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.platform=h2\r\n    spring.datasource.url=jdbc:h2:mem:socialdb;DB_CLOSE_DELAY=-1\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto = create\r\n\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>use <code>@EntityScan(\"com.db.jpasample.entity\")</code></p>\n\n<pre><code>@SpringBootApplication\n@EntityScan(\"com.db.jpasample.entity\")\npublic class GsoftApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(GsoftApplication.class, args);\n  }\n\n}\n</code></pre>\n\n<hr>\n\n<p>application.properties</p>\n\n<pre><code>server.port = 9090\nspring.h2.console.enabled=true\nspring.datasource.platform=h2\nspring.datasource.url=jdbc:h2:mem:socialdb;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14053388,"reputation":33,"user_id":10151486,"display_name":"Shubham Kature"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627324990,"creation_date":1627305624,"answer_id":68530638,"question_id":45302132,"body_markdown":"In the `application.properties` file, try to use `spring.jpa.defer-datasource-initialization=true`.\r\n\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>In the <code>application.properties</code> file, try to use <code>spring.jpa.defer-datasource-initialization=true</code>.</p>\n"},{"tags":[],"owner":{"account_id":18537481,"reputation":1557,"user_id":13506812,"display_name":"abhinav kumar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1634817493,"creation_date":1634817493,"answer_id":69661572,"question_id":45302132,"body_markdown":"Same problem i faced and i added below changes to resolve it,\r\n\r\ni added below version for H2 dependencies in **pom.xml**\r\n\r\n \r\n\r\n        &lt;dependency&gt;\r\n    \t&lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.4.193&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n\r\nAnd added below configuration in **application.properties** file\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.platform=h2\r\n    spring.datasource.driverClassName = org.h2.Driver\r\n    spring.datasource.url=jdbc:h2:file:~/test;\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>Same problem i faced and i added below changes to resolve it,</p>\n<p>i added below version for H2 dependencies in <strong>pom.xml</strong></p>\n<pre><code>    &lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n    &lt;version&gt;1.4.193&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>And added below configuration in <strong>application.properties</strong> file</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.platform=h2\nspring.datasource.driverClassName = org.h2.Driver\nspring.datasource.url=jdbc:h2:file:~/test;\nspring.datasource.username=sa\nspring.datasource.password=\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7795885,"reputation":23,"user_id":5896989,"display_name":"Nitin Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1642519853,"creation_date":1642519853,"answer_id":70758228,"question_id":45302132,"body_markdown":"The DataSource Initialization feature for SQL Script has been redesigned in **[Spring Boot 2.5][1]**.\r\n## \r\n\r\n\r\n----------\r\n\r\n\r\n ##\r\nBy default, **data.sql** scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use **data.sql** to populate a schema created by Hibernate, set **spring.jpa.defer-datasource-initialization** to **true**. While mixing database initialization technologies is not recommended, this will also allow you to use a **schema.sql** script to build upon a Hibernate-created schema before it’s populated via **data.sql**.\r\n\r\nReference:\r\n\r\n[Spring Boot 2.5 Release Notes][1]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>The DataSource Initialization feature for SQL Script has been redesigned in <strong><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.5</a></strong>.</p>\n<h2></h2>\n<hr />\n<h2></h2>\n<p>By default, <strong>data.sql</strong> scripts are now run before Hibernate is initialized. This aligns the behavior of basic script-based initialization with that of Flyway and Liquibase. If you want to use <strong>data.sql</strong> to populate a schema created by Hibernate, set <strong>spring.jpa.defer-datasource-initialization</strong> to <strong>true</strong>. While mixing database initialization technologies is not recommended, this will also allow you to use a <strong>schema.sql</strong> script to build upon a Hibernate-created schema before it’s populated via <strong>data.sql</strong>.</p>\n<p>Reference:</p>\n<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.5-Release-Notes\" rel=\"nofollow noreferrer\">Spring Boot 2.5 Release Notes</a></p>\n"},{"tags":[],"owner":{"account_id":14640622,"reputation":1728,"user_id":10573307,"display_name":"Aayush Bhattacharya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1652512846,"creation_date":1652512846,"answer_id":72238151,"question_id":45302132,"body_markdown":"Missing ddl script\r\n==\r\ni was also facing the same but it seemed i didnt added the ddl part\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.datasource.url=jdbc:h2:~/test\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=   //empty as i didnt has password in h2\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto = create //add this to create table first time then use &#39;update&#39;","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<h1>Missing ddl script</h1>\n<p>i was also facing the same but it seemed i didnt added the ddl part</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:~/test\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=   //empty as i didnt has password in h2\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto = create //add this to create table first time then use 'update'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25153425,"reputation":41,"user_id":18998510,"display_name":"wromma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661253193,"creation_date":1661253193,"answer_id":73457697,"question_id":45302132,"body_markdown":"It should work with your &lt;b&gt;in-memory&lt;/b&gt; instance of H2\r\nif you load the data and call all operations within the same JVM session.\r\n\r\nIt has a lot to do with the design of the connection.\r\n\r\nPlease check both these:\r\n - the url to setup the connection\r\n - the validation and export of schema DDL to the database with the good\r\n   choice of the parameter of hibernate.hbm2ddl.auto\r\n\r\nOne has to act on these two parameters, it could require some time.\r\n\r\n[More options for in memory db][1].\r\n\r\n\r\n  [1]: https://h2database.com/html/features.html#in_memory_databases","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>It should work with your <b>in-memory</b> instance of H2\nif you load the data and call all operations within the same JVM session.</p>\n<p>It has a lot to do with the design of the connection.</p>\n<p>Please check both these:</p>\n<ul>\n<li>the url to setup the connection</li>\n<li>the validation and export of schema DDL to the database with the good\nchoice of the parameter of hibernate.hbm2ddl.auto</li>\n</ul>\n<p>One has to act on these two parameters, it could require some time.</p>\n<p><a href=\"https://h2database.com/html/features.html#in_memory_databases\" rel=\"nofollow noreferrer\">More options for in memory db</a>.</p>\n"},{"tags":[],"owner":{"account_id":2396304,"reputation":164,"user_id":2095034,"display_name":"Ishmael Mavor Raines"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689935299,"creation_date":1689932247,"answer_id":76736787,"question_id":45302132,"body_markdown":"May not be the best answer but u might want to use @Column (name = &quot;\\\\&quot;WIDTH\\\\&quot;&quot;)  and force usage of reserved words. Im using file instead of memory,\r\n\r\n    #Allow viewing H2 database via web browser e.g. &quot;http://localhost:8085/testdb&quot;\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/testdb\r\n\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    #First create an empty file &quot;testdb.mv.db&quot; in the file system that will act as the database storage. Check database error for location\r\n    spring.datasource.url=jdbc:h2:file:~/testdb;\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.jpa.hibernate.ddl-auto=create    \r\n\r\n\r\nIf using a file storage use jdbc:h2:file:~/testdb or jdbc:h2:~/testdb\r\nbut jdbc:h2:mem:testdb will not connect.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z91uK.png","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>May not be the best answer but u might want to use @Column (name = &quot;\\&quot;WIDTH\\&quot;&quot;)  and force usage of reserved words. Im using file instead of memory,</p>\n<pre><code>#Allow viewing H2 database via web browser e.g. &quot;http://localhost:8085/testdb&quot;\nspring.h2.console.enabled=true\nspring.h2.console.path=/testdb\n\nspring.datasource.username=sa\nspring.datasource.password=\n#First create an empty file &quot;testdb.mv.db&quot; in the file system that will act as the database storage. Check database error for location\nspring.datasource.url=jdbc:h2:file:~/testdb;\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.hibernate.ddl-auto=create    \n</code></pre>\n<p>If using a file storage use jdbc:h2:file:~/testdb or jdbc:h2:~/testdb\nbut jdbc:h2:mem:testdb will not connect.</p>\n<p><a href=\"https://i.stack.imgur.com/Z91uK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z91uK.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":10722569,"reputation":359,"user_id":7891178,"accept_rate":75,"display_name":"VapeKop"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94723,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":45302489,"answer_count":11,"score":21,"last_activity_date":1689935299,"creation_date":1500982644,"question_id":45302132,"body_markdown":"I want to keep some data in H2 database by making a CRUD repository, using Hibernate.\r\n\r\nI can&#39;t get the database to store my entries whatsoever. Currently, I&#39;m trying to achieve that during updating the db by making a sample entry. Entry is looking good in the logs, but table is not created/updated/generated.\r\n\r\n**Why Hibernate is not unable to create a table in this case?** (if the problem lies in structure of my data)\r\n\r\nHere&#39;s my Entity, **Game.java** class (I&#39;ve tried without @Column annotations, no difference. Id is not auto-generated, I need to be able to enter my own ID everytime):\r\n\r\n    @Entity\r\n    @Table(name = &quot;GAME&quot;)\r\n    public class Game {\r\n    \r\n        @Id\r\n        @Column (name = &quot;ID&quot;)\r\n        private long id;\r\n    \r\n        @Column (name = &quot;NAME&quot;)\r\n        private String name;\r\n    \r\n        @Column(name = &quot;STORYLINE&quot;, length = 4000)\r\n        private String storyline;\r\n    \r\n        @Column(name = &quot;AGGREGATED_RATING&quot;)\r\n        @JsonProperty(&quot;aggregated_rating&quot;)\r\n        private double aggregatedRating;\r\n    \r\n        @Column(name = &quot;FIRST_RELEASE_DATE&quot;)\r\n        @JsonProperty(&quot;first_release_date&quot;)\r\n        private long firstReleaseDate;\r\n    \r\n        @Embedded\r\n        private Cover cover;\r\n    \r\n        public Game(){\r\n    \r\n        }\r\n    \r\n        public Game(long id, String name, String storyline, double aggregatedRating, long firstReleaseDate, Cover cover) {\r\n            this.id = id;\r\n            this.name = name;\r\n            this.storyline = storyline;\r\n            this.aggregatedRating = aggregatedRating;\r\n            this.firstReleaseDate = firstReleaseDate;\r\n            this.cover = cover;\r\n        }\r\n    \r\n        public long getId() {\r\n            return id;\r\n        }\r\n    \r\n        public String getName() {\r\n            return name;\r\n        }\r\n    \r\n        public String getStoryline() {\r\n            return storyline;\r\n        }\r\n    \r\n        public double getAggregatedRating() {\r\n            return aggregatedRating;\r\n        }\r\n    \r\n        public long getFirstReleaseDate() {\r\n            return firstReleaseDate;\r\n        }\r\n    \r\n        public Cover getCover() {\r\n            return cover;\r\n        }\r\n    \r\n    \r\n    }\r\n\r\nAnd here&#39;s **Cover.java** class:\r\n\r\n    @Embeddable\r\n    public class Cover {\r\n    \r\n        @Column (name = &quot;URL&quot;)\r\n        private String url;\r\n        @JsonProperty(&quot;cloudinary_id&quot;)\r\n        @Column (name = &quot;CLOUDINARY_ID&quot;)\r\n        private String cloudinaryId;\r\n        @Column (name = &quot;WIDTH&quot;)\r\n        private Integer width;\r\n        @Column (name = &quot;HEIGHT&quot;)\r\n        private Integer height;\r\n    \r\n        public Cover(){\r\n        }\r\n    \r\n        public Cover(String url, String cloudinaryId, Integer width, Integer height) {\r\n            this.url = url;\r\n            this.cloudinaryId = cloudinaryId;\r\n            this.width = width;\r\n            this.height = height;\r\n    }\r\n    \r\n        public String getUrl() {\r\n            return url;\r\n        }\r\n    \r\n        public String getCloudinaryId() {\r\n            return cloudinaryId;\r\n        }\r\n    \r\n        public Integer getWidth() {\r\n            return width;\r\n        }\r\n    \r\n        public Integer getHeight() {\r\n            return height;\r\n        }\r\n    \r\n    }\r\n\r\nI configured H2 database here, in **application.properties** file:\r\n\r\n    spring.h2.console.enabled=true\r\n    spring.h2.console.path=/h2_console\r\n    spring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.jpa.hibernate.ddl-auto = update\r\n    spring.jpa.show-sql=true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\r\n\r\n**Repository** is configured like this:\r\n\r\n    import org.springframework.data.repository.CrudRepository;\r\n    \r\n    import java.util.List;\r\n    \r\n    public interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\r\n        List&lt;Game&gt; findAllByName(String name);\r\n    }\r\n\r\nI test my repository by going under localhost:8080/test, where a sample entry should be inserted into table:\r\n\r\n    @RequestMapping(&quot;/test&quot;)\r\n    public String saveSth(){\r\n        gameRepository.save(new Game(127, &quot;Assassin&#39;s Creed II&quot;, &quot;The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccol&#242; Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.&quot;, 90.25, 1258416000000L, new Cover(&quot;//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg&quot;, &quot;doczeiofd1ckpapdhqs7&quot;, 1000, 1426)));\r\n        return &quot;success&quot;;\r\n    }\r\n\r\nI get the following log:\r\n\r\n    2017-07-25 13:09:58.873 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\r\n    Hibernate: select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\r\n    2017-07-25 13:09:58.875 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [127]\r\n    2017-07-25 13:09:58.894 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    Hibernate: insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n    2017-07-25 13:09:58.895 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [DOUBLE] - [90.25]\r\n    2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [doczeiofd1ckpapdhqs7]\r\n    2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [1426]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [INTEGER] - [1000]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [BIGINT] - [1258416000000]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [Assassin&#39;s Creed II]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [VARCHAR] - [The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccol&#242; Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.]\r\n    2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [BIGINT] - [127]\r\n\r\nIt looks like data is binded to parameters, but in H2 console **SELECT * FROM GAME** returns me:\r\n     SELECT * FROM GAME;\r\n    Table &quot;GAME&quot; not found; SQL statement:\r\n    SELECT * FROM GAME [42102-193] 42S02/42102 (Help)\r\n\r\nI&#39;ve tried other H2 modes such as create-drop or create, but no success. What worries me is that, I can&#39;t even get the database to create an empty table with the correct rows, ready for entries.\r\n\r\nI think that something&#39;s wrong either with my Entity or missing from my GameRepository configuration, but I have no more ideas to fix this error.\r\n\r\nI want to achieve what&#39;s here:\r\nhttp://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode\r\nAnd here:\r\nhttp://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/\r\n\r\n\r\nAlso, I&#39;ve tried this set of tutorials for a change:\r\nhttps://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/\r\nhttps://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/\r\n\r\nBut no luck so far.\r\n","title":"H2 not creating/updating table in my Spring Boot app. Something&#39;s wrong with my Entity?","body":"<p>I want to keep some data in H2 database by making a CRUD repository, using Hibernate.</p>\n\n<p>I can't get the database to store my entries whatsoever. Currently, I'm trying to achieve that during updating the db by making a sample entry. Entry is looking good in the logs, but table is not created/updated/generated.</p>\n\n<p><strong>Why Hibernate is not unable to create a table in this case?</strong> (if the problem lies in structure of my data)</p>\n\n<p>Here's my Entity, <strong>Game.java</strong> class (I've tried without @Column annotations, no difference. Id is not auto-generated, I need to be able to enter my own ID everytime):</p>\n\n<pre><code>@Entity\n@Table(name = \"GAME\")\npublic class Game {\n\n    @Id\n    @Column (name = \"ID\")\n    private long id;\n\n    @Column (name = \"NAME\")\n    private String name;\n\n    @Column(name = \"STORYLINE\", length = 4000)\n    private String storyline;\n\n    @Column(name = \"AGGREGATED_RATING\")\n    @JsonProperty(\"aggregated_rating\")\n    private double aggregatedRating;\n\n    @Column(name = \"FIRST_RELEASE_DATE\")\n    @JsonProperty(\"first_release_date\")\n    private long firstReleaseDate;\n\n    @Embedded\n    private Cover cover;\n\n    public Game(){\n\n    }\n\n    public Game(long id, String name, String storyline, double aggregatedRating, long firstReleaseDate, Cover cover) {\n        this.id = id;\n        this.name = name;\n        this.storyline = storyline;\n        this.aggregatedRating = aggregatedRating;\n        this.firstReleaseDate = firstReleaseDate;\n        this.cover = cover;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public String getStoryline() {\n        return storyline;\n    }\n\n    public double getAggregatedRating() {\n        return aggregatedRating;\n    }\n\n    public long getFirstReleaseDate() {\n        return firstReleaseDate;\n    }\n\n    public Cover getCover() {\n        return cover;\n    }\n\n\n}\n</code></pre>\n\n<p>And here's <strong>Cover.java</strong> class:</p>\n\n<pre><code>@Embeddable\npublic class Cover {\n\n    @Column (name = \"URL\")\n    private String url;\n    @JsonProperty(\"cloudinary_id\")\n    @Column (name = \"CLOUDINARY_ID\")\n    private String cloudinaryId;\n    @Column (name = \"WIDTH\")\n    private Integer width;\n    @Column (name = \"HEIGHT\")\n    private Integer height;\n\n    public Cover(){\n    }\n\n    public Cover(String url, String cloudinaryId, Integer width, Integer height) {\n        this.url = url;\n        this.cloudinaryId = cloudinaryId;\n        this.width = width;\n        this.height = height;\n}\n\n    public String getUrl() {\n        return url;\n    }\n\n    public String getCloudinaryId() {\n        return cloudinaryId;\n    }\n\n    public Integer getWidth() {\n        return width;\n    }\n\n    public Integer getHeight() {\n        return height;\n    }\n\n}\n</code></pre>\n\n<p>I configured H2 database here, in <strong>application.properties</strong> file:</p>\n\n<pre><code>spring.h2.console.enabled=true\nspring.h2.console.path=/h2_console\nspring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\nspring.datasource.username=sa\nspring.datasource.password=\nspring.datasource.driverClassName=org.h2.Driver\nspring.jpa.hibernate.ddl-auto = update\nspring.jpa.show-sql=true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE\n</code></pre>\n\n<p><strong>Repository</strong> is configured like this:</p>\n\n<pre><code>import org.springframework.data.repository.CrudRepository;\n\nimport java.util.List;\n\npublic interface GameRepository extends CrudRepository&lt;Game, Long&gt; {\n    List&lt;Game&gt; findAllByName(String name);\n}\n</code></pre>\n\n<p>I test my repository by going under localhost:8080/test, where a sample entry should be inserted into table:</p>\n\n<pre><code>@RequestMapping(\"/test\")\npublic String saveSth(){\n    gameRepository.save(new Game(127, \"Assassin's Creed II\", \"The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccolò Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.\", 90.25, 1258416000000L, new Cover(\"//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg\", \"doczeiofd1ckpapdhqs7\", 1000, 1426)));\n    return \"success\";\n}\n</code></pre>\n\n<p>I get the following log:</p>\n\n<pre><code>2017-07-25 13:09:58.873 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\nHibernate: select game0_.id as id1_0_0_, game0_.aggregated_rating as aggregat2_0_0_, game0_.cloudinary_id as cloudina3_0_0_, game0_.height as height4_0_0_, game0_.url as url5_0_0_, game0_.width as width6_0_0_, game0_.first_release_date as first_re7_0_0_, game0_.name as name8_0_0_, game0_.storyline as storylin9_0_0_ from game game0_ where game0_.id=?\n2017-07-25 13:09:58.875 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [127]\n2017-07-25 13:09:58.894 DEBUG 9442 --- [nio-8080-exec-1] org.hibernate.SQL                        : insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\nHibernate: insert into game (aggregated_rating, cloudinary_id, height, url, width, first_release_date, name, storyline, id) values (?, ?, ?, ?, ?, ?, ?, ?, ?)\n2017-07-25 13:09:58.895 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [DOUBLE] - [90.25]\n2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [2] as [VARCHAR] - [doczeiofd1ckpapdhqs7]\n2017-07-25 13:09:58.896 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [3] as [INTEGER] - [1426]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [4] as [VARCHAR] - [//images.igdb.com/igdb/image/upload/t_thumb/doczeiofd1ckpapdhqs7.jpg]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [5] as [INTEGER] - [1000]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [6] as [BIGINT] - [1258416000000]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [7] as [VARCHAR] - [Assassin's Creed II]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [8] as [VARCHAR] - [The lineage continues as this new chapter introduces Ezio, inheritor of the talents and creed of the Assassins. His family murdered by rival families, Ezio resolves to learn the ancient art of the Assassin in order to seek revenge. He will not do so alone though, allying with historical figures such as philosopher and writer Niccolò Machiavelli. You will also be able to master the art of the assassin with all new weapons and instruments created by the renowned inventor and genius of the Renaissance, Leonardo Da Vinci himself.]\n2017-07-25 13:09:58.897 TRACE 9442 --- [nio-8080-exec-1] o.h.type.descriptor.sql.BasicBinder      : binding parameter [9] as [BIGINT] - [127]\n</code></pre>\n\n<p>It looks like data is binded to parameters, but in H2 console <strong>SELECT * FROM GAME</strong> returns me:\n     SELECT * FROM GAME;\n    Table \"GAME\" not found; SQL statement:\n    SELECT * FROM GAME [42102-193] 42S02/42102 (Help)</p>\n\n<p>I've tried other H2 modes such as create-drop or create, but no success. What worries me is that, I can't even get the database to create an empty table with the correct rows, ready for entries.</p>\n\n<p>I think that something's wrong either with my Entity or missing from my GameRepository configuration, but I have no more ideas to fix this error.</p>\n\n<p>I want to achieve what's here:\n<a href=\"http://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode\" rel=\"noreferrer\">http://javasampleapproach.com/spring-framework/spring-boot/integrate-h2-database-springboot-spring-jpa-embedded-mode</a>\nAnd here:\n<a href=\"http://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/\" rel=\"noreferrer\">http://www.simplecodestuffs.com/value-object-entity-object-in-hibernate-mapping/</a></p>\n\n<p>Also, I've tried this set of tutorials for a change:\n<a href=\"https://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/\" rel=\"noreferrer\">https://springframework.guru/using-the-h2-database-console-in-spring-boot-with-spring-security/</a>\n<a href=\"https://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/\" rel=\"noreferrer\">https://springframework.guru/spring-boot-web-application-part-3-spring-data-jpa/</a></p>\n\n<p>But no luck so far.</p>\n"},{"tags":["java","ssl","jetty","apache-nifi","tls1.2"],"comments":[{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1609085511,"post_id":65461182,"comment_id":115744284,"body_markdown":"set `org.apache.nifi.web.security` logger to DEBUG in logback.xml to have more info on keystore init.  do you have your keystore without a password?","body":"set <code>org.apache.nifi.web.security</code> logger to DEBUG in logback.xml to have more info on keystore init.  do you have your keystore without a password?"},{"owner":{"account_id":739104,"reputation":4630,"user_id":703236,"display_name":"Adam"},"score":0,"creation_date":1609086219,"post_id":65461182,"comment_id":115744497,"body_markdown":"Thanks I will try changing the logging. The keystore must have always had a password but I&#39;ve tried both ways with specifying it and not specifying it. It seems even the key tool can read it without specifying a password.","body":"Thanks I will try changing the logging. The keystore must have always had a password but I&#39;ve tried both ways with specifying it and not specifying it. It seems even the key tool can read it without specifying a password."}],"answers":[{"tags":[],"owner":{"account_id":11542680,"reputation":306,"user_id":8457815,"display_name":"ruakn"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1646041979,"creation_date":1646041979,"answer_id":71293163,"question_id":65461182,"body_markdown":"If user is trying to setup unsecure nifi cluster, and encounters the above error, then remove all the values as below:\r\n\r\n    nifi.security.keystore= \r\n    nifi.security.keystoreType= \r\n    nifi.security.keystorePasswd= \r\n    nifi.security.keyPasswd= \r\n    nifi.security.truststore= \r\n    nifi.security.truststoreType= \r\n    nifi.security.truststorePasswd=\r\n\r\nRestart the cluster, and you will be able to continue.\r\n\r\n(From NiFi 1.15.3, secure cluster is created without user has to manually enter these values and create certs for the same using nifi-toolkit or via organisation)","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>If user is trying to setup unsecure nifi cluster, and encounters the above error, then remove all the values as below:</p>\n<pre><code>nifi.security.keystore= \nnifi.security.keystoreType= \nnifi.security.keystorePasswd= \nnifi.security.keyPasswd= \nnifi.security.truststore= \nnifi.security.truststoreType= \nnifi.security.truststorePasswd=\n</code></pre>\n<p>Restart the cluster, and you will be able to continue.</p>\n<p>(From NiFi 1.15.3, secure cluster is created without user has to manually enter these values and create certs for the same using nifi-toolkit or via organisation)</p>\n"},{"tags":[],"owner":{"account_id":4723232,"reputation":870,"user_id":4214037,"accept_rate":91,"display_name":"32cupo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689934743,"creation_date":1689934743,"answer_id":76737103,"question_id":65461182,"body_markdown":"I experienced the same issue during configuration of NiFi cluster. The first node was running, but other nodes were unable to start with given error. I compared all properties, checked file existency, checked if passwords are set correct without any progress. \r\n\r\nFinally I found out, that file permissions for keystore.jks and trustore.jks are different between servers and they weren&#39;t readable by nifi user. It started working after fixing permission:\r\n\r\n```\r\nchmod +r keystore.jks truststore.jks\r\n```\r\n","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>I experienced the same issue during configuration of NiFi cluster. The first node was running, but other nodes were unable to start with given error. I compared all properties, checked file existency, checked if passwords are set correct without any progress.</p>\n<p>Finally I found out, that file permissions for keystore.jks and trustore.jks are different between servers and they weren't readable by nifi user. It started working after fixing permission:</p>\n<pre><code>chmod +r keystore.jks truststore.jks\n</code></pre>\n"}],"owner":{"account_id":739104,"reputation":4630,"user_id":703236,"display_name":"Adam"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7744,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":71293163,"answer_count":2,"score":7,"last_activity_date":1689934743,"creation_date":1609021001,"question_id":65461182,"body_markdown":"I am attempting to upgrade to Apache NiFi from 1.9.2 to 1.12.1 and no matter how I tweak the properties file, I keep getting errors about TLS. I was running just fine before the upgrade. I was able to use the keytool to open the jks files and output the keys inside of them. The upgrade added the truststore, truststoreType, and truststorePasswd lines but removing them, filling them out, etc. does nothing to change the result. If anyone knows some definitive steps resolve this (commands to run, etc.) it would be much appreciated.\r\n\r\n**nifi.properties:**\r\n\r\nThe `keystore.jks` and `truststore.jks` files are both in the `conf` folder.\r\n\r\n    nifi.security.keystore=keystore.jks\r\n    nifi.security.keystoreType=JKS\r\n    nifi.security.keystorePasswd=\r\n    nifi.security.keyPasswd=\r\n    nifi.security.truststore=truststore.jks\r\n    nifi.security.truststoreType=JKS\r\n    nifi.security.truststorePasswd=\r\n    nifi.security.user.authorizer=managed-authorizer\r\n    nifi.security.allow.anonymous.authentication=false\r\n    nifi.security.user.login.identity.provider=\r\n    nifi.security.ocsp.responder.url=\r\n    nifi.security.ocsp.responder.certificate=\r\n\r\n**nifi-app.log:**\r\n\r\n    2020-12-26 17:00:03,600 INFO [main] org.apache.nifi.NiFi Launching NiFi...\r\n    &lt;&lt;&lt;&lt;  REMOVED SOME UNECESSARY LINES DUE TO STACKOVERFLOW CHAR LIMITS  &gt;&gt;&gt;&gt;\r\n    2020-12-26 17:00:20,415 INFO [main] org.eclipse.jetty.server.Server jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 1.8.0_102-b14\r\n    2020-12-26 17:00:20,789 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=124ms\r\n    2020-12-26 17:00:20,894 INFO [main] org.eclipse.jetty.server.session DefaultSessionIdManager workerName=node0\r\n    2020-12-26 17:00:20,895 INFO [main] org.eclipse.jetty.server.session No SessionScavenger set, using defaults\r\n    2020-12-26 17:00:20,896 INFO [main] org.eclipse.jetty.server.session node0 Scavenging every 600000ms\r\n    2020-12-26 17:00:20,935 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@55634720{nifi-standard-content-viewer,/nifi-standard-content-viewer-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-standard-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-standard-content-viewer-1.12.1.war}\r\n    2020-12-26 17:00:21,847 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=426ms\r\n    2020-12-26 17:00:21,900 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4b0d79fc{/nifi-jolt-transform-json-ui-1.12.1,/nifi-jolt-transform-json-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-jolt-transform-json-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-jolt-transform-json-ui-1.12.1.war}\r\n    2020-12-26 17:00:23,283 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=464ms\r\n    2020-12-26 17:00:23,315 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4c1909a3{/nifi-update-attribute-ui-1.12.1,/nifi-update-attribute-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-update-attribute-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-update-attribute-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-update-attribute-ui-1.12.1.war}\r\n    2020-12-26 17:00:24,404 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=187ms\r\n    2020-12-26 17:00:24,408 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:24,453 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@428640fa{nifi,/nifi,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-ui-1.12.1.war}\r\n    2020-12-26 17:00:25,057 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=402ms\r\n    2020-12-26 17:00:25,058 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:25,108 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\r\n    2020-12-26 17:00:27,144 INFO [main] org.apache.nifi.security.kms.CryptoUtils Determined default nifi.properties path to be &#39;D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties&#39;\r\n    2020-12-26 17:00:27,145 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loaded 166 properties from D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties\r\n    2020-12-26 17:00:28,952 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 141 properties from system properties and environment variables\r\n    2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 8 properties from &#39;..\\custom\\variable-registry.properties&#39;\r\n    2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 149 properties.  Including precedence overrides effective accessible registry key size is 149\r\n    2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\r\n    2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\r\n    2020-12-26 17:00:28,992 WARN [main] org.eclipse.jetty.webapp.WebAppContext Failed startup of context o.e.j.w.WebAppContext@d9345cd{nifi-api,/nifi-api,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-api-1.12.1.war/webapp/,UNAVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-api-1.12.1.war}\r\n    org.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.server.Server.start(Server.java:407)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:371)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:301)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowService&#39;: FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\r\n    \t... 37 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 43 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\r\n    \tat org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\r\n    \tat org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 50 common frames omitted\r\n    Caused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\r\n    \tat org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\r\n    \t... 53 common frames omitted\r\n    2020-12-26 17:00:29,259 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=63ms\r\n    2020-12-26 17:00:29,260 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,280 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@2d710f1a{nifi-content-viewer,/nifi-content-viewer,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-content-viewer-1.12.1.war}\r\n    2020-12-26 17:00:29,313 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=9ms\r\n    2020-12-26 17:00:29,315 WARN [main] o.e.j.webapp.StandardDescriptorProcessor Duplicate mapping from / to default\r\n    2020-12-26 17:00:29,315 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,335 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@29215f06{nifi-docs,/nifi-docs,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-docs-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-docs-1.12.1.war}\r\n    2020-12-26 17:00:29,361 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=6ms\r\n    2020-12-26 17:00:29,363 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\r\n    2020-12-26 17:00:29,379 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@59505b48{nifi-error,/,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-error-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-error-1.12.1.war}\r\n    2020-12-26 17:00:29,399 INFO [main] o.eclipse.jetty.server.AbstractConnector Started ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n    2020-12-26 17:00:29,400 INFO [main] org.eclipse.jetty.server.Server Started @26147ms\r\n    2020-12-26 17:00:29,400 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\r\n    org.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\r\n    \tat org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\r\n    \tat org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\r\n    \tat org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\r\n    \tat org.eclipse.jetty.server.Server.start(Server.java:407)\r\n    \tat org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\r\n    \tat org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\r\n    \tat org.eclipse.jetty.server.Server.doStart(Server.java:371)\r\n    \tat org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\r\n    \tat org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\r\n    \tat org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\r\n    \tat org.apache.nifi.NiFi.main(NiFi.java:301)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowService&#39;: FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\r\n    \t... 37 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;flowController&#39;: FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\r\n    \tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\r\n    \tat org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 43 common frames omitted\r\n    Caused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\r\n    \tat org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\r\n    \tat org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\r\n    \tat org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\r\n    \t... 50 common frames omitted\r\n    Caused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\r\n    \tat org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\r\n    \tat org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\r\n    \tat org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\r\n    \t... 53 common frames omitted\r\n    2020-12-26 17:00:29,401 INFO [Thread-1] org.apache.nifi.NiFi Initiating shutdown of Jetty web server...\r\n    2020-12-26 17:00:29,405 INFO [Thread-1] o.eclipse.jetty.server.AbstractConnector Stopped ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\r\n    2020-12-26 17:00:29,405 INFO [Thread-1] org.eclipse.jetty.server.session node0 Stopped scavenging\r\n\r\n**These lines are particularly interesting:**\r\n\r\n    2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\r\n    2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","title":"Apache NiFi Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid","body":"<p>I am attempting to upgrade to Apache NiFi from 1.9.2 to 1.12.1 and no matter how I tweak the properties file, I keep getting errors about TLS. I was running just fine before the upgrade. I was able to use the keytool to open the jks files and output the keys inside of them. The upgrade added the truststore, truststoreType, and truststorePasswd lines but removing them, filling them out, etc. does nothing to change the result. If anyone knows some definitive steps resolve this (commands to run, etc.) it would be much appreciated.</p>\n<p><strong>nifi.properties:</strong></p>\n<p>The <code>keystore.jks</code> and <code>truststore.jks</code> files are both in the <code>conf</code> folder.</p>\n<pre><code>nifi.security.keystore=keystore.jks\nnifi.security.keystoreType=JKS\nnifi.security.keystorePasswd=\nnifi.security.keyPasswd=\nnifi.security.truststore=truststore.jks\nnifi.security.truststoreType=JKS\nnifi.security.truststorePasswd=\nnifi.security.user.authorizer=managed-authorizer\nnifi.security.allow.anonymous.authentication=false\nnifi.security.user.login.identity.provider=\nnifi.security.ocsp.responder.url=\nnifi.security.ocsp.responder.certificate=\n</code></pre>\n<p><strong>nifi-app.log:</strong></p>\n<pre><code>2020-12-26 17:00:03,600 INFO [main] org.apache.nifi.NiFi Launching NiFi...\n&lt;&lt;&lt;&lt;  REMOVED SOME UNECESSARY LINES DUE TO STACKOVERFLOW CHAR LIMITS  &gt;&gt;&gt;&gt;\n2020-12-26 17:00:20,415 INFO [main] org.eclipse.jetty.server.Server jetty-9.4.26.v20200117; built: 2020-01-17T12:35:33.676Z; git: 7b38981d25d14afb4a12ff1f2596756144edf695; jvm 1.8.0_102-b14\n2020-12-26 17:00:20,789 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=124ms\n2020-12-26 17:00:20,894 INFO [main] org.eclipse.jetty.server.session DefaultSessionIdManager workerName=node0\n2020-12-26 17:00:20,895 INFO [main] org.eclipse.jetty.server.session No SessionScavenger set, using defaults\n2020-12-26 17:00:20,896 INFO [main] org.eclipse.jetty.server.session node0 Scavenging every 600000ms\n2020-12-26 17:00:20,935 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@55634720{nifi-standard-content-viewer,/nifi-standard-content-viewer-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-standard-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-standard-content-viewer-1.12.1.war}\n2020-12-26 17:00:21,847 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=426ms\n2020-12-26 17:00:21,900 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4b0d79fc{/nifi-jolt-transform-json-ui-1.12.1,/nifi-jolt-transform-json-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-jolt-transform-json-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-standard-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-jolt-transform-json-ui-1.12.1.war}\n2020-12-26 17:00:23,283 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=464ms\n2020-12-26 17:00:23,315 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@4c1909a3{/nifi-update-attribute-ui-1.12.1,/nifi-update-attribute-ui-1.12.1,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-update-attribute-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\extensions\\nifi-update-attribute-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-update-attribute-ui-1.12.1.war}\n2020-12-26 17:00:24,404 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=187ms\n2020-12-26 17:00:24,408 INFO [main] o.e.j.s.handler.ContextHandler._nifi No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:24,453 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@428640fa{nifi,/nifi,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-ui-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-ui-1.12.1.war}\n2020-12-26 17:00:25,057 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=402ms\n2020-12-26 17:00:25,058 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:25,108 INFO [main] o.e.j.s.handler.ContextHandler._nifi_api Initializing Spring root WebApplicationContext\n2020-12-26 17:00:27,144 INFO [main] org.apache.nifi.security.kms.CryptoUtils Determined default nifi.properties path to be 'D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties'\n2020-12-26 17:00:27,145 INFO [main] o.a.nifi.properties.NiFiPropertiesLoader Loaded 166 properties from D:\\Projects\\NIFI~1.SER\\nifi\\.\\conf\\nifi.properties\n2020-12-26 17:00:28,952 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 141 properties from system properties and environment variables\n2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded 8 properties from '..\\custom\\variable-registry.properties'\n2020-12-26 17:00:28,954 INFO [main] o.a.n.r.v.FileBasedVariableRegistry Loaded a total of 149 properties.  Including precedence overrides effective accessible registry key size is 149\n2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\n2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\n2020-12-26 17:00:28,992 WARN [main] org.eclipse.jetty.webapp.WebAppContext Failed startup of context o.e.j.w.WebAppContext@d9345cd{nifi-api,/nifi-api,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-api-1.12.1.war/webapp/,UNAVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-api-1.12.1.war}\norg.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\n    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\n    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\n    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\n    at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\n    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\n    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\n    at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\n    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.server.Server.start(Server.java:407)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:371)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\n    at org.apache.nifi.NiFi.main(NiFi.java:301)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowService': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\n    ... 37 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 43 common frames omitted\nCaused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\n    at org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\n    at org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 50 common frames omitted\nCaused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\n    at org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\n    ... 53 common frames omitted\n2020-12-26 17:00:29,259 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=63ms\n2020-12-26 17:00:29,260 INFO [main] o.e.j.s.h.C._nifi_content_viewer No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,280 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@2d710f1a{nifi-content-viewer,/nifi-content-viewer,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-content-viewer-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-content-viewer-1.12.1.war}\n2020-12-26 17:00:29,313 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=9ms\n2020-12-26 17:00:29,315 WARN [main] o.e.j.webapp.StandardDescriptorProcessor Duplicate mapping from / to default\n2020-12-26 17:00:29,315 INFO [main] o.e.j.s.h.ContextHandler._nifi_docs No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,335 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@29215f06{nifi-docs,/nifi-docs,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-docs-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-docs-1.12.1.war}\n2020-12-26 17:00:29,361 INFO [main] o.e.j.a.AnnotationConfiguration Scanning elapsed time=6ms\n2020-12-26 17:00:29,363 INFO [main] o.e.j.server.handler.ContextHandler._ No Spring WebApplicationInitializer types detected on classpath\n2020-12-26 17:00:29,379 INFO [main] o.e.jetty.server.handler.ContextHandler Started o.e.j.w.WebAppContext@59505b48{nifi-error,/,file:///D:/Projects/NiFi.Server/nifi/work/jetty/nifi-web-error-1.12.1.war/webapp/,AVAILABLE}{.\\work\\nar\\framework\\nifi-framework-nar-1.12.1.nar-unpacked\\NAR-INF\\bundled-dependencies\\nifi-web-error-1.12.1.war}\n2020-12-26 17:00:29,399 INFO [main] o.eclipse.jetty.server.AbstractConnector Started ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\n2020-12-26 17:00:29,400 INFO [main] org.eclipse.jetty.server.Server Started @26147ms\n2020-12-26 17:00:29,400 WARN [main] org.apache.nifi.web.server.JettyServer Failed to start web server... shutting down.\norg.apache.nifi.web.NiFiCoreException: Unable to start Flow Controller.\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:88)\n    at org.eclipse.jetty.server.handler.ContextHandler.callContextInitialized(ContextHandler.java:930)\n    at org.eclipse.jetty.servlet.ServletContextHandler.callContextInitialized(ServletContextHandler.java:553)\n    at org.eclipse.jetty.server.handler.ContextHandler.startContext(ContextHandler.java:889)\n    at org.eclipse.jetty.servlet.ServletContextHandler.startContext(ServletContextHandler.java:356)\n    at org.eclipse.jetty.webapp.WebAppContext.startWebapp(WebAppContext.java:1445)\n    at org.eclipse.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1409)\n    at org.eclipse.jetty.server.handler.ContextHandler.doStart(ContextHandler.java:822)\n    at org.eclipse.jetty.servlet.ServletContextHandler.doStart(ServletContextHandler.java:275)\n    at org.eclipse.jetty.webapp.WebAppContext.doStart(WebAppContext.java:524)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.handler.gzip.GzipHandler.doStart(GzipHandler.java:425)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:117)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.start(ContainerLifeCycle.java:169)\n    at org.eclipse.jetty.server.Server.start(Server.java:407)\n    at org.eclipse.jetty.util.component.ContainerLifeCycle.doStart(ContainerLifeCycle.java:110)\n    at org.eclipse.jetty.server.handler.AbstractHandler.doStart(AbstractHandler.java:97)\n    at org.eclipse.jetty.server.Server.doStart(Server.java:371)\n    at org.eclipse.jetty.util.component.AbstractLifeCycle.start(AbstractLifeCycle.java:72)\n    at org.apache.nifi.web.server.JettyServer.start(JettyServer.java:1052)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:158)\n    at org.apache.nifi.NiFi.&lt;init&gt;(NiFi.java:72)\n    at org.apache.nifi.NiFi.main(NiFi.java:301)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowService': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.web.contextlistener.ApplicationStartupContextListener.contextInitialized(ApplicationStartupContextListener.java:55)\n    ... 37 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'flowController': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:185)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1640)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1086)\n    at org.apache.nifi.spring.StandardFlowServiceFactoryBean.getObject(StandardFlowServiceFactoryBean.java:48)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 43 common frames omitted\nCaused by: java.lang.IllegalStateException: Flow controller TLS configuration is invalid\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:476)\n    at org.apache.nifi.controller.FlowController.createStandaloneInstance(FlowController.java:388)\n    at org.apache.nifi.spring.FlowControllerFactoryBean.getObject(FlowControllerFactoryBean.java:80)\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178)\n    ... 50 common frames omitted\nCaused by: org.apache.nifi.security.util.TlsException: The keystore properties are not valid\n    at org.apache.nifi.security.util.SslContextFactory.getKeyManagers(SslContextFactory.java:161)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:88)\n    at org.apache.nifi.security.util.SslContextFactory.createSslContext(SslContextFactory.java:55)\n    at org.apache.nifi.controller.FlowController.&lt;init&gt;(FlowController.java:473)\n    ... 53 common frames omitted\n2020-12-26 17:00:29,401 INFO [Thread-1] org.apache.nifi.NiFi Initiating shutdown of Jetty web server...\n2020-12-26 17:00:29,405 INFO [Thread-1] o.eclipse.jetty.server.AbstractConnector Stopped ServerConnector@1018bde2{HTTP/1.1,[http/1.1]}{0.0.0.0:8080}\n2020-12-26 17:00:29,405 INFO [Thread-1] org.eclipse.jetty.server.session node0 Stopped scavenging\n</code></pre>\n<p><strong>These lines are particularly interesting:</strong></p>\n<pre><code>2020-12-26 17:00:28,989 WARN [main] o.a.nifi.security.util.SslContextFactory Some keystore properties are populated (keystore.jks, null, null, JKS) but not valid\n2020-12-26 17:00:28,990 ERROR [main] o.apache.nifi.controller.FlowController Unable to start the flow controller because the TLS configuration was invalid: The keystore properties are not valid\n</code></pre>\n"},{"tags":["java","angular","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1689950938,"post_id":76737077,"comment_id":135289884,"body_markdown":"using jwt tokens as sessions is very insecure.","body":"using jwt tokens as sessions is very insecure."}],"owner":{"account_id":25838033,"reputation":9,"user_id":19574119,"display_name":"TSH"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934476,"creation_date":1689934476,"question_id":76737077,"body_markdown":"I have implemented Spring Security with JWT into my application and I am using Angular served by Springboot 3; same origin. However, I am encountering some issue after I deploy my application to railway. I encounter JwtTokenMissingException claiming that no jwt token is found in my request header even on my landing page though I did not set the requirement for jwt authentication on the landing page. I set up the code such that requests hitting the server matching url /api/public/ can access without any authentication. Even if I add url &quot;/&quot;, it doesnt work. \r\n\r\nWhen I ng build Angular, it generates index.html file and visual studio code flagged out an error in the line onload=&quot;this.media=&amp;apos;all&amp;apos;&quot; claiming expression required. So I changed it manually to onload=&quot;this.media=&#39;all&#39;;&quot;. But I dont think this is the issue. Either way also did not resolve the issue that I am facing.\r\n\r\nEverything works well in local environment with the same code but not in production. Thus, I am seeking help to find out what is the issue. \r\n\r\nMy railway domain is https://tfipminiproject-production.up.railway.app/\r\n\r\nThe following codes below show snippets of the error I encounter in my deploy log and also snippets of my code which might be causing the issue. \r\nHope to seek all your help! Thank you!\r\n\r\n```\r\nSnippets of Error in Deploy Log:\r\nERROR 1 --- [nio-7055-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers] with root cause\r\n﻿miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers\r\n﻿at miniProject.server.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:43) ~[classes!/:0.0.1-SNAPSHOT]\r\n﻿at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar!/:6.0.9]\r\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.0.jar!/:6.1.0]\r\n```\r\n\r\n```\r\npublic class JwtAuthenticationFilter extends OncePerRequestFilter{\r\n   \r\n   @Autowired\r\nprivate JwtUtil jwtUtil;\r\n \r\n@Autowired\r\nprivate UserAuthService userAuthService;\r\n \r\n   @Override\r\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\nthrows ServletException, IOException {\r\n \r\nString header = request.getHeader(&quot;Authorization&quot;);\r\n \r\nif (header == null || !header.startsWith(&quot;Bearer&quot;)) {\r\nthrow new JwtTokenMissingException(&quot;No JWT token found in the request headers&quot;);\r\n}\r\n \r\nString token = header.substring(7);\r\n \r\n// Optional - verification\r\njwtUtil.validateToken(token);\r\n \r\nUserVo userVo = jwtUtil.getUserDataFromToken(token);\r\n \r\nUserDetails userDetails = userAuthService.loadUserByUsername(userVo.getUsername());\r\n \r\nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\nuserDetails, null, userDetails.getAuthorities());\r\n \r\n       //create an Authentication object with the AuthenticationToken\r\nusernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n \r\nif (SecurityContextHolder.getContext().getAuthentication() == null) {\r\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n}\r\n \r\nfilterChain.doFilter(request, response);\r\n}\r\n}\r\n```\r\n```\r\n@Configuration\r\n@EnableMethodSecurity\r\npublic class WebSecurityConfig {\r\n   \r\n   @Autowired\r\nprivate UserAuthService userAuthService;\r\n \r\n   @Autowired\r\nprivate ApiAuthenticationEntryPoint authenticationEntryPoint;\r\n \r\n   @Bean\r\n   public JwtAuthenticationFilter authenticationJwtTokenFilter() {\r\n       return new JwtAuthenticationFilter();\r\n   }\r\n \r\n   @Bean\r\n   public WebSecurityCustomizer webSecurityCustomizer() {\r\n   return (web) -&gt; web.ignoring().requestMatchers(&quot;/api/public/**&quot;);\r\n   }\r\n \r\n \r\n   @Bean\r\n   public DaoAuthenticationProvider authenticationProvider() {\r\n     DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\r\n      \r\n     authProvider.setUserDetailsService(userAuthService);\r\n     authProvider.setPasswordEncoder(passwordEncoder());\r\n  \r\n     return authProvider;\r\n   }\r\n \r\n \r\n    @Bean\r\n   public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n   http.csrf(csrf -&gt; csrf.disable())\r\n       .exceptionHandling(exception -&gt; exception.authenticationEntryPoint(authenticationEntryPoint))\r\n       .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n       .authorizeHttpRequests(auth -&gt; auth.requestMatchers(&quot;/api/public/**&quot;).permitAll()\r\n       .anyRequest().authenticated());\r\n \r\n       http.authenticationProvider(authenticationProvider());\r\n       \r\n       http.addFilterBefore(authenticationJwtTokenFilter(),   UsernamePasswordAuthenticationFilter.class);\r\n       return http.build();\r\n   }\r\n \r\n       @Bean\r\npublic RegistrationBean jwtAuthFilterRegister(JwtAuthenticationFilter filter) {\r\nFilterRegistrationBean&lt;JwtAuthenticationFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;(filter);\r\nregistrationBean.setEnabled(false);\r\nreturn registrationBean;\r\n}\r\n \r\n \r\n   @Bean\r\n   public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfiguration) throws Exception {\r\n       return authConfiguration.getAuthenticationManager();\r\n   }\r\n \r\n   @Bean\r\npublic PasswordEncoder passwordEncoder() {\r\nreturn new BCryptPasswordEncoder();\r\n}\r\n}\r\n```\r\n\r\n","title":"JWT Authentication Error after Deploying to Railway","body":"<p>I have implemented Spring Security with JWT into my application and I am using Angular served by Springboot 3; same origin. However, I am encountering some issue after I deploy my application to railway. I encounter JwtTokenMissingException claiming that no jwt token is found in my request header even on my landing page though I did not set the requirement for jwt authentication on the landing page. I set up the code such that requests hitting the server matching url /api/public/ can access without any authentication. Even if I add url &quot;/&quot;, it doesnt work.</p>\n<p>When I ng build Angular, it generates index.html file and visual studio code flagged out an error in the line onload=&quot;this.media='all'&quot; claiming expression required. So I changed it manually to onload=&quot;this.media='all';&quot;. But I dont think this is the issue. Either way also did not resolve the issue that I am facing.</p>\n<p>Everything works well in local environment with the same code but not in production. Thus, I am seeking help to find out what is the issue.</p>\n<p>My railway domain is <a href=\"https://tfipminiproject-production.up.railway.app/\" rel=\"nofollow noreferrer\">https://tfipminiproject-production.up.railway.app/</a></p>\n<p>The following codes below show snippets of the error I encounter in my deploy log and also snippets of my code which might be causing the issue.\nHope to seek all your help! Thank you!</p>\n<pre><code>Snippets of Error in Deploy Log:\nERROR 1 --- [nio-7055-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers] with root cause\n﻿miniProject.server.exception.JwtTokenMissingException: No JWT token found in the request headers\n﻿at miniProject.server.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:43) ~[classes!/:0.0.1-SNAPSHOT]\n﻿at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.9.jar!/:6.0.9]\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n﻿at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.1.0.jar!/:6.1.0]\n</code></pre>\n<pre><code>public class JwtAuthenticationFilter extends OncePerRequestFilter{\n   \n   @Autowired\nprivate JwtUtil jwtUtil;\n \n@Autowired\nprivate UserAuthService userAuthService;\n \n   @Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\nthrows ServletException, IOException {\n \nString header = request.getHeader(&quot;Authorization&quot;);\n \nif (header == null || !header.startsWith(&quot;Bearer&quot;)) {\nthrow new JwtTokenMissingException(&quot;No JWT token found in the request headers&quot;);\n}\n \nString token = header.substring(7);\n \n// Optional - verification\njwtUtil.validateToken(token);\n \nUserVo userVo = jwtUtil.getUserDataFromToken(token);\n \nUserDetails userDetails = userAuthService.loadUserByUsername(userVo.getUsername());\n \nUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\nuserDetails, null, userDetails.getAuthorities());\n \n       //create an Authentication object with the AuthenticationToken\nusernamePasswordAuthenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n \nif (SecurityContextHolder.getContext().getAuthentication() == null) {\nSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n}\n \nfilterChain.doFilter(request, response);\n}\n}\n</code></pre>\n<pre><code>@Configuration\n@EnableMethodSecurity\npublic class WebSecurityConfig {\n   \n   @Autowired\nprivate UserAuthService userAuthService;\n \n   @Autowired\nprivate ApiAuthenticationEntryPoint authenticationEntryPoint;\n \n   @Bean\n   public JwtAuthenticationFilter authenticationJwtTokenFilter() {\n       return new JwtAuthenticationFilter();\n   }\n \n   @Bean\n   public WebSecurityCustomizer webSecurityCustomizer() {\n   return (web) -&gt; web.ignoring().requestMatchers(&quot;/api/public/**&quot;);\n   }\n \n \n   @Bean\n   public DaoAuthenticationProvider authenticationProvider() {\n     DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();\n      \n     authProvider.setUserDetailsService(userAuthService);\n     authProvider.setPasswordEncoder(passwordEncoder());\n  \n     return authProvider;\n   }\n \n \n    @Bean\n   public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n   http.csrf(csrf -&gt; csrf.disable())\n       .exceptionHandling(exception -&gt; exception.authenticationEntryPoint(authenticationEntryPoint))\n       .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n       .authorizeHttpRequests(auth -&gt; auth.requestMatchers(&quot;/api/public/**&quot;).permitAll()\n       .anyRequest().authenticated());\n \n       http.authenticationProvider(authenticationProvider());\n       \n       http.addFilterBefore(authenticationJwtTokenFilter(),   UsernamePasswordAuthenticationFilter.class);\n       return http.build();\n   }\n \n       @Bean\npublic RegistrationBean jwtAuthFilterRegister(JwtAuthenticationFilter filter) {\nFilterRegistrationBean&lt;JwtAuthenticationFilter&gt; registrationBean = new FilterRegistrationBean&lt;&gt;(filter);\nregistrationBean.setEnabled(false);\nreturn registrationBean;\n}\n \n \n   @Bean\n   public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfiguration) throws Exception {\n       return authConfiguration.getAuthenticationManager();\n   }\n \n   @Bean\npublic PasswordEncoder passwordEncoder() {\nreturn new BCryptPasswordEncoder();\n}\n}\n</code></pre>\n"},{"tags":["java","regex","replace","regex-group"],"comments":[{"owner":{"account_id":7745,"reputation":189755,"user_id":13531,"accept_rate":75,"display_name":"Michael Myers"},"score":13,"creation_date":1244837535,"post_id":988655,"comment_id":797397,"body_markdown":"Can you clarify your question, like maybe give the expected output for that input?","body":"Can you clarify your question, like maybe give the expected output for that input?"}],"answers":[{"tags":[],"owner":{"account_id":29775,"reputation":12605,"user_id":80714,"accept_rate":91,"display_name":"Chadwick"},"down_vote_count":4,"up_vote_count":164,"is_accepted":true,"score":160,"last_activity_date":1676485641,"creation_date":1244837108,"answer_id":988778,"question_id":988655,"body_markdown":"Use `$n` (where n is a digit) to refer to captured subsequences in [`replaceFirst(...)`][1]. I&#39;m assuming you wanted to replace the first group with the literal string *&quot;number&quot;* and the second group with the value of the first group.\r\n\r\n    Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\r\n    String input = &quot;6 example input 4&quot;;\r\n    Matcher m = p.matcher(input);\r\n    if (m.find()) {\r\n        // replace first number with &quot;number&quot; and second number with the first\r\n        // the added group (&quot;(.*)&quot; which is $2) captures unmodified text to include it in the result\r\n        String output = m.replaceFirst(&quot;number$2$1&quot;); // &quot;number example input 6&quot;\r\n    }\r\n\r\nConsider `(\\D+)` for the second group instead of `(.*)`.  `*` is a greedy matcher, and will at first consume the last digit. The matcher will then have to backtrack when it realizes the final `(\\d)` has nothing to match, before it can match to the final digit.\r\n\r\n**Edit**\r\n\r\nYears later, this still gets votes, and the comments and edits (which broke the answer) show there is still confusion on what the question meant. I&#39;ve fixed it, and added the much needed example output.\r\n\r\nThe edits to the replacement (some thought `$2` should not be used) actually broke the answer. Though the continued votes shows the answer hits the key point - Use `$n` references within `replaceFirst(...)` to reuse captured values - the edits lost the fact that unmodified text needs to be captured as well, and used in  the replacement so that &quot;*only groups (not all pattern)*&quot;.\r\n\r\nThe question, and thus this answer, is not concerned with iterating. This is intentionally an [MRE][2].\r\n\r\n\r\n[1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst%28java.lang.String%29\r\n[2]: https://stackoverflow.com/help/minimal-reproducible-example  ","title":"Can I replace groups in Java regex?","body":"<p>Use <code>$n</code> (where n is a digit) to refer to captured subsequences in <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#replaceFirst%28java.lang.String%29\" rel=\"noreferrer\"><code>replaceFirst(...)</code></a>. I'm assuming you wanted to replace the first group with the literal string <em>&quot;number&quot;</em> and the second group with the value of the first group.</p>\n<pre><code>Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\nString input = &quot;6 example input 4&quot;;\nMatcher m = p.matcher(input);\nif (m.find()) {\n    // replace first number with &quot;number&quot; and second number with the first\n    // the added group (&quot;(.*)&quot; which is $2) captures unmodified text to include it in the result\n    String output = m.replaceFirst(&quot;number$2$1&quot;); // &quot;number example input 6&quot;\n}\n</code></pre>\n<p>Consider <code>(\\D+)</code> for the second group instead of <code>(.*)</code>.  <code>*</code> is a greedy matcher, and will at first consume the last digit. The matcher will then have to backtrack when it realizes the final <code>(\\d)</code> has nothing to match, before it can match to the final digit.</p>\n<p><strong>Edit</strong></p>\n<p>Years later, this still gets votes, and the comments and edits (which broke the answer) show there is still confusion on what the question meant. I've fixed it, and added the much needed example output.</p>\n<p>The edits to the replacement (some thought <code>$2</code> should not be used) actually broke the answer. Though the continued votes shows the answer hits the key point - Use <code>$n</code> references within <code>replaceFirst(...)</code> to reuse captured values - the edits lost the fact that unmodified text needs to be captured as well, and used in  the replacement so that &quot;<em>only groups (not all pattern)</em>&quot;.</p>\n<p>The question, and thus this answer, is not concerned with iterating. This is intentionally an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>.</p>\n"},{"tags":[],"owner":{"account_id":149776,"reputation":71,"user_id":362517,"display_name":"ydanneg"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1276092832,"creation_date":1276092832,"answer_id":3006657,"question_id":988655,"body_markdown":"You can use matcher.start() and matcher.end() methods to get the group positions. So using this positions you can easily replace any text.","title":"Can I replace groups in Java regex?","body":"<p>You can use matcher.start() and matcher.end() methods to get the group positions. So using this positions you can easily replace any text.</p>\n"},{"tags":[],"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"down_vote_count":2,"up_vote_count":76,"is_accepted":false,"score":74,"last_activity_date":1389194030,"creation_date":1389194030,"answer_id":20999446,"question_id":988655,"body_markdown":"You could use [`Matcher#start(group)`][1] and [`Matcher#end(group)`][2] to build a generic replacement method:\r\n\r\n\tpublic static String replaceGroup(String regex, String source, int groupToReplace, String replacement) {\r\n\t\treturn replaceGroup(regex, source, groupToReplace, 1, replacement);\r\n\t}\r\n\t\r\n\tpublic static String replaceGroup(String regex, String source, int groupToReplace, int groupOccurrence, String replacement) {\r\n\t\tMatcher m = Pattern.compile(regex).matcher(source);\r\n\t\tfor (int i = 0; i &lt; groupOccurrence; i++)\r\n\t\t\tif (!m.find()) return source; // pattern not met, may also throw an exception here\r\n\t\treturn new StringBuilder(source).replace(m.start(groupToReplace), m.end(groupToReplace), replacement).toString();\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// replace with &quot;%&quot; what was matched by group 1 \r\n\t\t// input: aaa123ccc\r\n\t\t// output: %123ccc\r\n\t    System.out.println(replaceGroup(&quot;([a-z]+)([0-9]+)([a-z]+)&quot;, &quot;aaa123ccc&quot;, 1, &quot;%&quot;));\r\n\t\t\r\n\t\t// replace with &quot;!!!&quot; what was matched the 4th time by the group 2\r\n\t\t// input: a1b2c3d4e5\r\n\t\t// output: a1b2c3d!!!e5\r\n\t\tSystem.out.println(replaceGroup(&quot;([a-z])(\\\\d)&quot;, &quot;a1b2c3d4e5&quot;, 2, 4, &quot;!!!&quot;));\r\n\t}\r\n\r\nCheck **[online demo here][3]**.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#start%28int%29\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28int%29\r\n  [3]: http://ideone.com/qVTMqm","title":"Can I replace groups in Java regex?","body":"<p>You could use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#start%28int%29\"><code>Matcher#start(group)</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#end%28int%29\"><code>Matcher#end(group)</code></a> to build a generic replacement method:</p>\n\n<pre><code>public static String replaceGroup(String regex, String source, int groupToReplace, String replacement) {\n    return replaceGroup(regex, source, groupToReplace, 1, replacement);\n}\n\npublic static String replaceGroup(String regex, String source, int groupToReplace, int groupOccurrence, String replacement) {\n    Matcher m = Pattern.compile(regex).matcher(source);\n    for (int i = 0; i &lt; groupOccurrence; i++)\n        if (!m.find()) return source; // pattern not met, may also throw an exception here\n    return new StringBuilder(source).replace(m.start(groupToReplace), m.end(groupToReplace), replacement).toString();\n}\n\npublic static void main(String[] args) {\n    // replace with \"%\" what was matched by group 1 \n    // input: aaa123ccc\n    // output: %123ccc\n    System.out.println(replaceGroup(\"([a-z]+)([0-9]+)([a-z]+)\", \"aaa123ccc\", 1, \"%\"));\n\n    // replace with \"!!!\" what was matched the 4th time by the group 2\n    // input: a1b2c3d4e5\n    // output: a1b2c3d!!!e5\n    System.out.println(replaceGroup(\"([a-z])(\\\\d)\", \"a1b2c3d4e5\", 2, 4, \"!!!\"));\n}\n</code></pre>\n\n<p>Check <strong><a href=\"http://ideone.com/qVTMqm\">online demo here</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":5705055,"reputation":1872,"user_id":4508899,"accept_rate":75,"display_name":"Jonas_Hess"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516697331,"creation_date":1516695609,"answer_id":48397045,"question_id":988655,"body_markdown":"Here is a different solution, that also allows the replacement of a single group in multiple matches.\r\nIt uses stacks to reverse the execution order, so the string operation can be safely executed.\r\n\r\n\tprivate static void demo () {\r\n\t\t\r\n\t\tfinal String sourceString = &quot;hello world!&quot;;\r\n\t\t\r\n\t\tfinal String regex = &quot;(hello) (world)(!)&quot;;\r\n\t\tfinal Pattern pattern = Pattern.compile(regex);\r\n\t\t\r\n\t\tString result = replaceTextOfMatchGroup(sourceString, pattern, 2, world -&gt; world.toUpperCase());\r\n\t\tSystem.out.println(result);  // output: hello WORLD!\r\n\t}\r\n\t\r\n\tpublic static String replaceTextOfMatchGroup(String sourceString, Pattern pattern, int groupToReplace, Function&lt;String,String&gt; replaceStrategy) {\r\n\t\tStack&lt;Integer&gt; startPositions = new Stack&lt;&gt;();\r\n\t\tStack&lt;Integer&gt; endPositions = new Stack&lt;&gt;();\r\n\t\tMatcher matcher = pattern.matcher(sourceString);\r\n\t\t\r\n\t\twhile (matcher.find()) {\r\n\t\t\tstartPositions.push(matcher.start(groupToReplace));\r\n\t\t\tendPositions.push(matcher.end(groupToReplace));\r\n\t\t}\r\n\t\tStringBuilder sb = new StringBuilder(sourceString);\r\n\t\twhile (! startPositions.isEmpty()) {\r\n\t\t\tint start = startPositions.pop();\r\n\t\t\tint end = endPositions.pop();\r\n            if (start &gt;= 0 &amp;&amp; end &gt;= 0) {\r\n\t\t\t    sb.replace(start, end, replaceStrategy.apply(sourceString.substring(start, end)));\r\n\t\t    }\r\n        }\r\n\t\treturn sb.toString();\t\t\r\n\t}","title":"Can I replace groups in Java regex?","body":"<p>Here is a different solution, that also allows the replacement of a single group in multiple matches.\nIt uses stacks to reverse the execution order, so the string operation can be safely executed.</p>\n\n<pre><code>private static void demo () {\n\n    final String sourceString = \"hello world!\";\n\n    final String regex = \"(hello) (world)(!)\";\n    final Pattern pattern = Pattern.compile(regex);\n\n    String result = replaceTextOfMatchGroup(sourceString, pattern, 2, world -&gt; world.toUpperCase());\n    System.out.println(result);  // output: hello WORLD!\n}\n\npublic static String replaceTextOfMatchGroup(String sourceString, Pattern pattern, int groupToReplace, Function&lt;String,String&gt; replaceStrategy) {\n    Stack&lt;Integer&gt; startPositions = new Stack&lt;&gt;();\n    Stack&lt;Integer&gt; endPositions = new Stack&lt;&gt;();\n    Matcher matcher = pattern.matcher(sourceString);\n\n    while (matcher.find()) {\n        startPositions.push(matcher.start(groupToReplace));\n        endPositions.push(matcher.end(groupToReplace));\n    }\n    StringBuilder sb = new StringBuilder(sourceString);\n    while (! startPositions.isEmpty()) {\n        int start = startPositions.pop();\n        int end = endPositions.pop();\n        if (start &gt;= 0 &amp;&amp; end &gt;= 0) {\n            sb.replace(start, end, replaceStrategy.apply(sourceString.substring(start, end)));\n        }\n    }\n    return sb.toString();       \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12436458,"reputation":668,"user_id":9056664,"display_name":"Yaro"},"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1521455498,"creation_date":1519806122,"answer_id":49024941,"question_id":988655,"body_markdown":"Sorry to beat a dead horse, but it is kind-of weird that no-one pointed this out - &quot;Yes you can, but this is the opposite of how you use capturing groups in real life&quot;.\r\n\r\nIf you use Regex the way it is meant to be used, the solution is as simple as this:\r\n\r\n    &quot;6 example input 4&quot;.replaceAll(&quot;(?:\\\\d)(.*)(?:\\\\d)&quot;, &quot;number$11&quot;);\r\n\r\nOr as rightfully pointed out by shmosel below,\r\n\r\n    &quot;6 example input 4&quot;.replaceAll(&quot;\\d(.*)\\d&quot;, &quot;number$11&quot;);\r\n\r\n...since in your regex there is no good reason to group the decimals at all. \r\n\r\nYou don&#39;t usually use *capturing* groups on the parts of the string you want to *discard*, you use them on the part of the string you want to *keep*.\r\n\r\nIf you really want groups that you want to replace, what you probably want instead is a templating engine (e.g. moustache, ejs, StringTemplate, ...).\r\n\r\n\r\n----------\r\n\r\n\r\nAs an aside for the curious, even non-capturing groups in regexes are just there for the case that the regex engine needs them to recognize and skip variable text. For example, in\r\n\r\n    (?:abc)*(capture me)(?:bcd)*\r\n\r\nyou need them if your input can look either like &quot;abcabc**capture me**bcdbcd&quot; or &quot;abc**capture me**bcd&quot; or even just &quot;capture me&quot;.\r\n\r\nOr to put it the other way around: if the text is always the same, and you don&#39;t capture it, there is no reason to use groups at all.","title":"Can I replace groups in Java regex?","body":"<p>Sorry to beat a dead horse, but it is kind-of weird that no-one pointed this out - \"Yes you can, but this is the opposite of how you use capturing groups in real life\".</p>\n\n<p>If you use Regex the way it is meant to be used, the solution is as simple as this:</p>\n\n<pre><code>\"6 example input 4\".replaceAll(\"(?:\\\\d)(.*)(?:\\\\d)\", \"number$11\");\n</code></pre>\n\n<p>Or as rightfully pointed out by shmosel below,</p>\n\n<pre><code>\"6 example input 4\".replaceAll(\"\\d(.*)\\d\", \"number$11\");\n</code></pre>\n\n<p>...since in your regex there is no good reason to group the decimals at all. </p>\n\n<p>You don't usually use <em>capturing</em> groups on the parts of the string you want to <em>discard</em>, you use them on the part of the string you want to <em>keep</em>.</p>\n\n<p>If you really want groups that you want to replace, what you probably want instead is a templating engine (e.g. moustache, ejs, StringTemplate, ...).</p>\n\n<hr>\n\n<p>As an aside for the curious, even non-capturing groups in regexes are just there for the case that the regex engine needs them to recognize and skip variable text. For example, in</p>\n\n<pre><code>(?:abc)*(capture me)(?:bcd)*\n</code></pre>\n\n<p>you need them if your input can look either like \"abcabc<strong>capture me</strong>bcdbcd\" or \"abc<strong>capture me</strong>bcd\" or even just \"capture me\".</p>\n\n<p>Or to put it the other way around: if the text is always the same, and you don't capture it, there is no reason to use groups at all.</p>\n"},{"tags":[],"owner":{"account_id":2578068,"reputation":41,"user_id":2235323,"display_name":"whimmy"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1542958941,"creation_date":1542880187,"answer_id":53428097,"question_id":988655,"body_markdown":"replace the password fields from the input:\r\n\r\n    {&quot;_csrf&quot;:[&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005&quot;],&quot;originPassword&quot;:[&quot;uaas&quot;],&quot;newPassword&quot;:[&quot;uaas&quot;],&quot;confirmPassword&quot;:[&quot;uaas&quot;]}\r\n\r\n\r\n\r\n      private static final Pattern PATTERN = Pattern.compile(&quot;.*?password.*?\\&quot;:\\\\[\\&quot;(.*?)\\&quot;\\\\](,\\&quot;|}$)&quot;, Pattern.CASE_INSENSITIVE);\r\n    \r\n      private static String replacePassword(String input, String replacement) {\r\n        Matcher m = PATTERN.matcher(input);\r\n        StringBuffer sb = new StringBuffer();\r\n        while (m.find()) {\r\n          Matcher m2 = PATTERN.matcher(m.group(0));\r\n          if (m2.find()) {\r\n            StringBuilder stringBuilder = new StringBuilder(m2.group(0));\r\n            String result = stringBuilder.replace(m2.start(1), m2.end(1), replacement).toString();\r\n            m.appendReplacement(sb, result);\r\n          }\r\n        }\r\n        m.appendTail(sb);\r\n        return sb.toString();\r\n      }\r\n    \r\n      @Test\r\n      public void test1() {\r\n        String input = &quot;{\\&quot;_csrf\\&quot;:[\\&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\&quot;],\\&quot;originPassword\\&quot;:[\\&quot;123\\&quot;],\\&quot;newPassword\\&quot;:[\\&quot;456\\&quot;],\\&quot;confirmPassword\\&quot;:[\\&quot;456\\&quot;]}&quot;;\r\n        String expected = &quot;{\\&quot;_csrf\\&quot;:[\\&quot;9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\&quot;],\\&quot;originPassword\\&quot;:[\\&quot;**\\&quot;],\\&quot;newPassword\\&quot;:[\\&quot;**\\&quot;],\\&quot;confirmPassword\\&quot;:[\\&quot;**\\&quot;]}&quot;;\r\n        Assert.assertEquals(expected, replacePassword(input, &quot;**&quot;));\r\n      }","title":"Can I replace groups in Java regex?","body":"<p>replace the password fields from the input:</p>\n\n<pre><code>{\"_csrf\":[\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\"],\"originPassword\":[\"uaas\"],\"newPassword\":[\"uaas\"],\"confirmPassword\":[\"uaas\"]}\n\n\n\n  private static final Pattern PATTERN = Pattern.compile(\".*?password.*?\\\":\\\\[\\\"(.*?)\\\"\\\\](,\\\"|}$)\", Pattern.CASE_INSENSITIVE);\n\n  private static String replacePassword(String input, String replacement) {\n    Matcher m = PATTERN.matcher(input);\n    StringBuffer sb = new StringBuffer();\n    while (m.find()) {\n      Matcher m2 = PATTERN.matcher(m.group(0));\n      if (m2.find()) {\n        StringBuilder stringBuilder = new StringBuilder(m2.group(0));\n        String result = stringBuilder.replace(m2.start(1), m2.end(1), replacement).toString();\n        m.appendReplacement(sb, result);\n      }\n    }\n    m.appendTail(sb);\n    return sb.toString();\n  }\n\n  @Test\n  public void test1() {\n    String input = \"{\\\"_csrf\\\":[\\\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\\"],\\\"originPassword\\\":[\\\"123\\\"],\\\"newPassword\\\":[\\\"456\\\"],\\\"confirmPassword\\\":[\\\"456\\\"]}\";\n    String expected = \"{\\\"_csrf\\\":[\\\"9d90c85f-ac73-4b15-ad08-ebaa3fa4a005\\\"],\\\"originPassword\\\":[\\\"**\\\"],\\\"newPassword\\\":[\\\"**\\\"],\\\"confirmPassword\\\":[\\\"**\\\"]}\";\n    Assert.assertEquals(expected, replacePassword(input, \"**\"));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1750956,"reputation":414,"user_id":1600055,"accept_rate":50,"display_name":"Maciek Murawski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689934164,"creation_date":1689934164,"answer_id":76737036,"question_id":988655,"body_markdown":"Since Java 9 you can use `Matcher.replaceAll`.\r\nThe usage is as follows:\r\n```java\r\nPattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\r\nString input = &quot;6 example input 4&quot;;\r\nMatcher matcher = p.matcher(input);\r\nString output = matcher.replaceAll(matchResult -&gt; &quot;%s%s%s&quot;.formatted(&quot;number&quot;, matchResult.group(2), matchResult.group(1) ));\r\n```\r\n`output` should be equal to `number example input 6`\r\n\r\n`matchResult.group(0)` is the whole pattern, so groups are indexed from `1`","title":"Can I replace groups in Java regex?","body":"<p>Since Java 9 you can use <code>Matcher.replaceAll</code>.\nThe usage is as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Pattern p = Pattern.compile(&quot;(\\\\d)(.*)(\\\\d)&quot;);\nString input = &quot;6 example input 4&quot;;\nMatcher matcher = p.matcher(input);\nString output = matcher.replaceAll(matchResult -&gt; &quot;%s%s%s&quot;.formatted(&quot;number&quot;, matchResult.group(2), matchResult.group(1) ));\n</code></pre>\n<p><code>output</code> should be equal to <code>number example input 6</code></p>\n<p><code>matchResult.group(0)</code> is the whole pattern, so groups are indexed from <code>1</code></p>\n"}],"owner":{"account_id":32313,"reputation":1311,"user_id":89534,"accept_rate":91,"display_name":"wokena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":168042,"favorite_count":0,"down_vote_count":0,"up_vote_count":132,"accepted_answer_id":988778,"answer_count":7,"score":132,"last_activity_date":1689934164,"creation_date":1244835558,"question_id":988655,"body_markdown":"I have this code, and I want to know, if I can replace only groups (not all pattern) in Java regex.\r\nCode:\r\n\r\n     //...\r\n     Pattern p = Pattern.compile(&quot;(\\\\d).*(\\\\d)&quot;);\r\n        String input = &quot;6 example input 4&quot;;\r\n        Matcher m = p.matcher(input);\r\n        if (m.find()) {\r\n\r\n            //Now I want replace group one ( (\\\\d) ) with number \r\n           //and group two (too (\\\\d) ) with 1, but I don&#39;t know how.\r\n\r\n        }\r\n     \r\n\r\n","title":"Can I replace groups in Java regex?","body":"<p>I have this code, and I want to know, if I can replace only groups (not all pattern) in Java regex.\nCode:</p>\n\n<pre><code> //...\n Pattern p = Pattern.compile(\"(\\\\d).*(\\\\d)\");\n    String input = \"6 example input 4\";\n    Matcher m = p.matcher(input);\n    if (m.find()) {\n\n        //Now I want replace group one ( (\\\\d) ) with number \n       //and group two (too (\\\\d) ) with 1, but I don't know how.\n\n    }\n</code></pre>\n"},{"tags":["java","sockets","user-interface","server","client"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689935836,"post_id":76736907,"comment_id":135286811,"body_markdown":"Are you going to be *writing* data *at runtime*? That&#39;s important, as then the target is not a resource, but a data file and must be treated as a file in the file system, probably in an app directory off `${user.home}`","body":"Are you going to be <i>writing</i> data <i>at runtime</i>? That&#39;s important, as then the target is not a resource, but a data file and must be treated as a file in the file system, probably in an app directory off <code>${user.home}</code>"},{"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"score":0,"creation_date":1689936921,"post_id":76736907,"comment_id":135287004,"body_markdown":"Yes the data is written into the files at runtime.. So I can&#39;t have a resources package then? What do you mean by user.home?","body":"Yes the data is written into the files at runtime.. So I can&#39;t have a resources package then? What do you mean by user.home?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689939377,"post_id":76736907,"comment_id":135287444,"body_markdown":"No you can&#39;t. You want `mkdir &quot;%USERPROFILE%\\.EShop\\data&quot;` from cmd.exe. Put your data files in there","body":"No you can&#39;t. You want <code>mkdir &quot;%USERPROFILE%\\.EShop\\data&quot;</code> from cmd.exe. Put your data files in there"},{"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"score":0,"creation_date":1690127691,"post_id":76736907,"comment_id":135306875,"body_markdown":"I honestly have to say I am not quite sure If I got that. \nSo I have to go into the cmd and enter &quot;mkdir &quot;%USERPROFILE%\\.EShop\\data&quot; there. \n\nBut where in intellij do I have to put the files?","body":"I honestly have to say I am not quite sure If I got that.  So I have to go into the cmd and enter &quot;mkdir &quot;%USERPROFILE%\\.EShop\\data&quot; there.   But where in intellij do I have to put the files?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690127890,"post_id":76736907,"comment_id":135306892,"body_markdown":"Yes. You don&#39;t put the files anywhere to do with IntelliJ. But you can drag them into the correct location which you&#39;ll see if you follow that command with `explorer &quot;%USERPROFILE%\\.EShop\\data&quot;`","body":"Yes. You don&#39;t put the files anywhere to do with IntelliJ. But you can drag them into the correct location which you&#39;ll see if you follow that command with <code>explorer &quot;%USERPROFILE%\\.EShop\\data&quot;</code>"}],"owner":{"account_id":26662523,"reputation":37,"user_id":20275134,"display_name":"Kaja S."},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934091,"creation_date":1689933160,"question_id":76736907,"body_markdown":"I have a question about package structure and reading and writing into files.\r\n\r\nI am coding an eshop to learn java and now implented data exchange via sockets. \r\n\r\nSince I am not using a data bank I am using .txt-files to write articles, new customers etc. into it.\r\n[![enter image description here][1]][1]\r\n\r\n\r\nI now wanted to place the txt files into the server module in a package named &quot;ressources&quot;. But then the compiler always said he couldn&#39;t find the files. \r\nI then named him the exact path to the &quot;ressources&quot; package and the reading worked. \r\n\r\n\tpublic void openForReading(String dataSource) throws FileNotFoundException {\r\n\t\t//New code\r\n\t\tInputStream is = this.getClass().getResourceAsStream(&quot;/&quot; + dataSource);\r\n\t\tInputStreamReader isr = new InputStreamReader(is);\r\n\t\treader = new BufferedReader(isr);\r\n\r\n\t\t//old code, compiler said he couldn&#39;t find the file\r\n\t\t//reader = new BufferedReader(new FileReader(dataSource));\r\n\t}\r\n\r\nBut when I registered a new customer and wrote him into the files he created a new file in the project directory instead of refreshing the file on the server in the package &quot;ressources&quot;. \r\nI could fix that too with this code. but now he only refreshes the files in the directory &quot;out&quot;.\r\n\r\n\tpublic void openForWriting(String dataSource) throws IOException {\r\n\t\t//New code\r\n\t\tURL url = this.getClass().getResource(&quot;/&quot; + dataSource);\t\t\r\n\t\tFile file = new File(url.getPath());\r\n\t    writer = new PrintWriter(new BufferedWriter(new FileWriter(file)));\r\n\r\n\t\t//old code, not working - creates new file\r\n\t\t//writer = new PrintWriter(new BufferedWriter(new FileWriter(dataSource)));\r\n\t}\r\n\r\nIs there a way to refresh the files on the server and in the directory out?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uXPdq.png\r\n  [2]: https://i.stack.imgur.com/cMgsB.png\r\n  [3]: https://i.stack.imgur.com/w77tw.png","title":"Eshop with sockets - file reading/writing problem","body":"<p>I have a question about package structure and reading and writing into files.</p>\n<p>I am coding an eshop to learn java and now implented data exchange via sockets.</p>\n<p>Since I am not using a data bank I am using .txt-files to write articles, new customers etc. into it.\n<a href=\"https://i.stack.imgur.com/uXPdq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uXPdq.png\" alt=\"enter image description here\" /></a></p>\n<p>I now wanted to place the txt files into the server module in a package named &quot;ressources&quot;. But then the compiler always said he couldn't find the files.\nI then named him the exact path to the &quot;ressources&quot; package and the reading worked.</p>\n<pre><code>public void openForReading(String dataSource) throws FileNotFoundException {\n    //New code\n    InputStream is = this.getClass().getResourceAsStream(&quot;/&quot; + dataSource);\n    InputStreamReader isr = new InputStreamReader(is);\n    reader = new BufferedReader(isr);\n\n    //old code, compiler said he couldn't find the file\n    //reader = new BufferedReader(new FileReader(dataSource));\n}\n</code></pre>\n<p>But when I registered a new customer and wrote him into the files he created a new file in the project directory instead of refreshing the file on the server in the package &quot;ressources&quot;.\nI could fix that too with this code. but now he only refreshes the files in the directory &quot;out&quot;.</p>\n<pre><code>public void openForWriting(String dataSource) throws IOException {\n    //New code\n    URL url = this.getClass().getResource(&quot;/&quot; + dataSource);        \n    File file = new File(url.getPath());\n    writer = new PrintWriter(new BufferedWriter(new FileWriter(file)));\n\n    //old code, not working - creates new file\n    //writer = new PrintWriter(new BufferedWriter(new FileWriter(dataSource)));\n}\n</code></pre>\n<p>Is there a way to refresh the files on the server and in the directory out?</p>\n"},{"tags":["java","apache-spark","apache-kafka"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":1,"creation_date":1689934490,"post_id":76737020,"comment_id":135286557,"body_markdown":"It&#39;s never a good idea to use `printStackTrace` in your exception handler except for throwaway example code. Just let the exception escape the method. Then you&#39;ll see the stack trace in your log. As you have it now, there is a stack trace printed _somewhere_ (or possibly nowhere), but it&#39;s not in the log.","body":"It&#39;s never a good idea to use <code>printStackTrace</code> in your exception handler except for throwaway example code. Just let the exception escape the method. Then you&#39;ll see the stack trace in your log. As you have it now, there is a stack trace printed <i>somewhere</i> (or possibly nowhere), but it&#39;s not in the log."},{"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"score":1,"creation_date":1689936563,"post_id":76737020,"comment_id":135286948,"body_markdown":"Thanks, it help a lot, I saw the error printing out after removing it, was missing configuration, and the Scala version incorrect","body":"Thanks, it help a lot, I saw the error printing out after removing it, was missing configuration, and the Scala version incorrect"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1689944874,"post_id":76737020,"comment_id":135288579,"body_markdown":"FWIW, you don&#39;t really need Spark to read and average a CSV file. Just open the file with a regular CSV library and iterate over it. Or at the very least, you should use Spark Kafka consumer rather than use plain Kafka client API","body":"FWIW, you don&#39;t really need Spark to read and average a CSV file. Just open the file with a regular CSV library and iterate over it. Or at the very least, you should use Spark Kafka consumer rather than use plain Kafka client API"},{"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"score":0,"creation_date":1690118183,"post_id":76737020,"comment_id":135305615,"body_markdown":"@OneCricketeer I gave the average as a small example because it was not the root of my problem, the real usage is heavy (creating market data from the futures market order book log)","body":"@OneCricketeer I gave the average as a small example because it was not the root of my problem, the real usage is heavy (creating market data from the futures market order book log)"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1690153330,"post_id":76737020,"comment_id":135309628,"body_markdown":"Still, if you&#39;re only reading a local file on disk, you won&#39;t need Spark... It is outputting data, but in the Spark UI, in the executor logs... You&#39;re looking at logs of the driver app","body":"Still, if you&#39;re only reading a local file on disk, you won&#39;t need Spark... It is outputting data, but in the Spark UI, in the executor logs... You&#39;re looking at logs of the driver app"}],"owner":{"account_id":18423089,"reputation":171,"user_id":13420196,"display_name":"Niko Konovalov"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689934057,"creation_date":1689934057,"question_id":76737020,"body_markdown":"I&#39;m currently building a backend application using a microservice architecture.\r\nOne of my services is an apache spark job runner which uses Apache Spark &amp; Kafka to receive a message with a date range and extract some data from a CSV file in that date range.\r\n\r\nThis is the full code of my service, I&#39;ve put everything into the main and changes the `processMarketDataRequest` method to something more simple like getting the avg price for all the logs in the CSV file for simplicity reasons (so please overlook the unused variable `request`):\r\n\r\n```java\r\npackage com.samurai.lab.sparkjobservice;\r\n\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\r\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\r\nimport org.apache.kafka.common.serialization.StringDeserializer;\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.SparkSession;\r\n\r\nimport java.io.IOException;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.time.Duration;\r\nimport java.util.Collections;\r\nimport java.util.Properties;\r\nimport java.util.concurrent.ExecutorService;\r\nimport java.util.concurrent.Executors;\r\n\r\npublic class App2 {\r\n\r\n    private static final ObjectMapper mapper = new ObjectMapper();\r\n    private static final String KAFKA_BROKERS = &quot;localhost:9092&quot;;\r\n    private static final String KAFKA_GROUP = &quot;sparkGroup&quot;;\r\n    private static final String KAFKA_TOPIC = &quot;marketDataRequests&quot;;\r\n    private static final String MARKETDATA_CSV_PATH = &quot;C:/Users/USER/Desktop/TickData/data-12-01-until-12-03-year-2020/fake.csv&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        ExecutorService executor = Executors.newSingleThreadExecutor();\r\n        executor.submit(App2::consume);\r\n    }\r\n\r\n    private static void consume() {\r\n        try (KafkaConsumer&lt;String, String&gt; consumer = createKafkaConsumer()) {\r\n            consumer.subscribe(Collections.singletonList(KAFKA_TOPIC));\r\n\r\n            while (true) {\r\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100));\r\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                    processRecord(record);\r\n                }\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private static KafkaConsumer&lt;String, String&gt; createKafkaConsumer() {\r\n        Properties props = new Properties();\r\n        props.put(&quot;bootstrap.servers&quot;, KAFKA_BROKERS);\r\n        props.put(&quot;group.id&quot;, KAFKA_GROUP);\r\n        props.put(&quot;key.deserializer&quot;, StringDeserializer.class.getName());\r\n        props.put(&quot;value.deserializer&quot;, StringDeserializer.class.getName());\r\n        return new KafkaConsumer&lt;&gt;(props);\r\n    }\r\n\r\n    private static void processRecord(ConsumerRecord&lt;String, String&gt; record) {\r\n            try {\r\n                String jsonMessage = record.value();\r\n                JsonNode rootNode = mapper.readTree(jsonMessage);\r\n\r\n                processMarketDataRequest(rootNode);\r\n            } catch (IOException e) {\r\n                System.out.println(&quot;Error while processing record: &quot; + e.getMessage());\r\n                e.printStackTrace();\r\n            }\r\n    }\r\n\r\n    private static void processMarketDataRequest(JsonNode request) {\r\n        // Create a Spark session\r\n        SparkSession spark = SparkSession.builder()\r\n                .appName(&quot;ClientModeExample&quot;)\r\n                .master(&quot;local[*]&quot;)\r\n                .getOrCreate();\r\n\r\n        // Check if file exists\r\n        if (!Files.exists(Paths.get(MARKETDATA_CSV_PATH))) {\r\n            System.err.println(&quot;File does not exist: &quot; + MARKETDATA_CSV_PATH);\r\n            return;\r\n        }\r\n\r\n        // Read CSV into a DataFrame\r\n        Dataset&lt;Row&gt; df = spark.read().option(&quot;header&quot;, &quot;true&quot;).csv(MARKETDATA_CSV_PATH);\r\n\r\n        // Convert the Price column to double\r\n        Dataset&lt;Row&gt; dfDouble = df.withColumn(&quot;Price&quot;, df.col(&quot;Price&quot;).cast(&quot;double&quot;));\r\n\r\n        // Calculate the average price\r\n        Dataset&lt;Row&gt; avgPrice = dfDouble.agg(org.apache.spark.sql.functions.avg(&quot;Price&quot;).alias(&quot;average_price&quot;));\r\n\r\n        // Print the average price\r\n        avgPrice.show();\r\n\r\n        // Stop the Spark session\r\n        spark.stop();\r\n    }\r\n}\r\n```\r\n\r\n\r\nThis is the full log details from the console:\r\n```console\r\nSLF4J: Class path contains multiple SLF4J providers.\r\nSLF4J: Found provider [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\r\nSLF4J: Found provider [org.slf4j.simple.SimpleServiceProvider@121ff335]\r\nSLF4J: See https://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\nSLF4J: Actual provider is of type [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\r\nUsing Spark&#39;s default log4j profile: org/apache/spark/log4j2-defaults.properties\r\n23/07/21 13:00:36 INFO SparkContext: Running Spark version 3.4.1\r\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\r\n23/07/21 13:00:37 INFO ResourceUtils: No custom resources configured for spark.driver.\r\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\r\n23/07/21 13:00:37 INFO SparkContext: Submitted application: ClientModeExample\r\n23/07/21 13:00:37 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\r\n23/07/21 13:00:37 INFO ResourceProfile: Limiting resource is cpu\r\n23/07/21 13:00:37 INFO ResourceProfileManager: Added ResourceProfile id: 0\r\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls to: USER\r\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls to: USER\r\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls groups to: \r\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls groups to: \r\n23/07/21 13:00:37 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: USER; groups with view permissions: EMPTY; users with modify permissions: USER; groups with modify permissions: EMPTY\r\n23/07/21 13:00:37 INFO Utils: Successfully started service &#39;sparkDriver&#39; on port 5396.\r\n23/07/21 13:00:37 INFO SparkEnv: Registering MapOutputTracker\r\n23/07/21 13:00:37 INFO SparkEnv: Registering BlockManagerMaster\r\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\r\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Revoke previously assigned partitions marketDataRequests-0\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Member consumer-sparkGroup-1-89cbdb45-88a1-4d93-9817-26920020efe5 sending LeaveGroup request to coordinator DESKTOP-SCGERG2.lan:9092 (id: 2147483647 rack: null) due to the consumer is being closed\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Resetting generation and member id due to: consumer pro-actively leaving the group\r\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Request joining group due to: consumer pro-actively leaving the group\r\n23/07/21 13:00:37 INFO Metrics: Metrics scheduler closed\r\n23/07/21 13:00:37 INFO Metrics: Closing reporter org.apache.kafka.common.metrics.JmxReporter\r\n23/07/21 13:00:37 INFO Metrics: Metrics reporters closed\r\n23/07/21 13:00:37 INFO AppInfoParser: App info kafka.consumer for consumer-sparkGroup-1 unregistered\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nSo basically as you can see I&#39;m experiencing a silent shutdown of the process, nothing in the log output indicates an error it simply closes and I&#39;m trying to understand why?\r\n\r\nAny insights on how can I find the error or fix this issue would be welcomed.\r\n\r\nHere is the pom.xml for reference:\r\n```xml\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.samurai.lab&lt;/groupId&gt;\r\n        &lt;artifactId&gt;samurai-lab&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;spark-job-service&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;name&gt;spark-job-service&lt;/name&gt;\r\n    &lt;url&gt;https://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;apache-spark.version&gt;3.4.1&lt;/apache-spark.version&gt;\r\n        &lt;apache-kafka.version&gt;3.5.0&lt;/apache-kafka.version&gt;\r\n        &lt;extraJavaTestArgs&gt;\r\n            -XX:+IgnoreUnrecognizedVMOptions\r\n            --add-opens=java.base/java.lang=ALL-UNNAMED\r\n            --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n            --add-opens=java.base/java.lang.reflect=ALL-UNNAMED\r\n            --add-opens=java.base/java.io=ALL-UNNAMED\r\n            --add-opens=java.base/java.net=ALL-UNNAMED\r\n            --add-opens=java.base/java.nio=ALL-UNNAMED\r\n            --add-opens=java.base/java.util=ALL-UNNAMED\r\n            --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n            --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\r\n            --add-opens=java.base/sun.nio.ch=ALL-UNNAMED\r\n            --add-opens=java.base/sun.nio.cs=ALL-UNNAMED\r\n            --add-opens=java.base/sun.security.action=ALL-UNNAMED\r\n            --add-opens=java.base/sun.util.calendar=ALL-UNNAMED\r\n            -Djdk.reflect.useDirectMethodHandle=false\r\n        &lt;/extraJavaTestArgs&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;${apache-kafka.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.7&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mongodb.spark&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mongo-spark-connector_2.12&lt;/artifactId&gt;\r\n            &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.11.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n``` \r\n\r\n","title":"Silent shutdown reading CSV file","body":"<p>I'm currently building a backend application using a microservice architecture.\nOne of my services is an apache spark job runner which uses Apache Spark &amp; Kafka to receive a message with a date range and extract some data from a CSV file in that date range.</p>\n<p>This is the full code of my service, I've put everything into the main and changes the <code>processMarketDataRequest</code> method to something more simple like getting the avg price for all the logs in the CSV file for simplicity reasons (so please overlook the unused variable <code>request</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.samurai.lab.sparkjobservice;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SparkSession;\n\nimport java.io.IOException;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.time.Duration;\nimport java.util.Collections;\nimport java.util.Properties;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class App2 {\n\n    private static final ObjectMapper mapper = new ObjectMapper();\n    private static final String KAFKA_BROKERS = &quot;localhost:9092&quot;;\n    private static final String KAFKA_GROUP = &quot;sparkGroup&quot;;\n    private static final String KAFKA_TOPIC = &quot;marketDataRequests&quot;;\n    private static final String MARKETDATA_CSV_PATH = &quot;C:/Users/USER/Desktop/TickData/data-12-01-until-12-03-year-2020/fake.csv&quot;;\n\n    public static void main(String[] args) {\n        ExecutorService executor = Executors.newSingleThreadExecutor();\n        executor.submit(App2::consume);\n    }\n\n    private static void consume() {\n        try (KafkaConsumer&lt;String, String&gt; consumer = createKafkaConsumer()) {\n            consumer.subscribe(Collections.singletonList(KAFKA_TOPIC));\n\n            while (true) {\n                ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(100));\n                for (ConsumerRecord&lt;String, String&gt; record : records) {\n                    processRecord(record);\n                }\n            }\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private static KafkaConsumer&lt;String, String&gt; createKafkaConsumer() {\n        Properties props = new Properties();\n        props.put(&quot;bootstrap.servers&quot;, KAFKA_BROKERS);\n        props.put(&quot;group.id&quot;, KAFKA_GROUP);\n        props.put(&quot;key.deserializer&quot;, StringDeserializer.class.getName());\n        props.put(&quot;value.deserializer&quot;, StringDeserializer.class.getName());\n        return new KafkaConsumer&lt;&gt;(props);\n    }\n\n    private static void processRecord(ConsumerRecord&lt;String, String&gt; record) {\n            try {\n                String jsonMessage = record.value();\n                JsonNode rootNode = mapper.readTree(jsonMessage);\n\n                processMarketDataRequest(rootNode);\n            } catch (IOException e) {\n                System.out.println(&quot;Error while processing record: &quot; + e.getMessage());\n                e.printStackTrace();\n            }\n    }\n\n    private static void processMarketDataRequest(JsonNode request) {\n        // Create a Spark session\n        SparkSession spark = SparkSession.builder()\n                .appName(&quot;ClientModeExample&quot;)\n                .master(&quot;local[*]&quot;)\n                .getOrCreate();\n\n        // Check if file exists\n        if (!Files.exists(Paths.get(MARKETDATA_CSV_PATH))) {\n            System.err.println(&quot;File does not exist: &quot; + MARKETDATA_CSV_PATH);\n            return;\n        }\n\n        // Read CSV into a DataFrame\n        Dataset&lt;Row&gt; df = spark.read().option(&quot;header&quot;, &quot;true&quot;).csv(MARKETDATA_CSV_PATH);\n\n        // Convert the Price column to double\n        Dataset&lt;Row&gt; dfDouble = df.withColumn(&quot;Price&quot;, df.col(&quot;Price&quot;).cast(&quot;double&quot;));\n\n        // Calculate the average price\n        Dataset&lt;Row&gt; avgPrice = dfDouble.agg(org.apache.spark.sql.functions.avg(&quot;Price&quot;).alias(&quot;average_price&quot;));\n\n        // Print the average price\n        avgPrice.show();\n\n        // Stop the Spark session\n        spark.stop();\n    }\n}\n</code></pre>\n<p>This is the full log details from the console:</p>\n<pre><code>SLF4J: Class path contains multiple SLF4J providers.\nSLF4J: Found provider [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\nSLF4J: Found provider [org.slf4j.simple.SimpleServiceProvider@121ff335]\nSLF4J: See https://www.slf4j.org/codes.html#multiple_bindings for an explanation.\nSLF4J: Actual provider is of type [org.apache.logging.slf4j.SLF4JServiceProvider@620b29e6]\nUsing Spark's default log4j profile: org/apache/spark/log4j2-defaults.properties\n23/07/21 13:00:36 INFO SparkContext: Running Spark version 3.4.1\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\n23/07/21 13:00:37 INFO ResourceUtils: No custom resources configured for spark.driver.\n23/07/21 13:00:37 INFO ResourceUtils: ==============================================================\n23/07/21 13:00:37 INFO SparkContext: Submitted application: ClientModeExample\n23/07/21 13:00:37 INFO ResourceProfile: Default ResourceProfile created, executor resources: Map(cores -&gt; name: cores, amount: 1, script: , vendor: , memory -&gt; name: memory, amount: 1024, script: , vendor: , offHeap -&gt; name: offHeap, amount: 0, script: , vendor: ), task resources: Map(cpus -&gt; name: cpus, amount: 1.0)\n23/07/21 13:00:37 INFO ResourceProfile: Limiting resource is cpu\n23/07/21 13:00:37 INFO ResourceProfileManager: Added ResourceProfile id: 0\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls to: USER\n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls to: USER\n23/07/21 13:00:37 INFO SecurityManager: Changing view acls groups to: \n23/07/21 13:00:37 INFO SecurityManager: Changing modify acls groups to: \n23/07/21 13:00:37 INFO SecurityManager: SecurityManager: authentication disabled; ui acls disabled; users with view permissions: USER; groups with view permissions: EMPTY; users with modify permissions: USER; groups with modify permissions: EMPTY\n23/07/21 13:00:37 INFO Utils: Successfully started service 'sparkDriver' on port 5396.\n23/07/21 13:00:37 INFO SparkEnv: Registering MapOutputTracker\n23/07/21 13:00:37 INFO SparkEnv: Registering BlockManagerMaster\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: Using org.apache.spark.storage.DefaultTopologyMapper for getting topology information\n23/07/21 13:00:37 INFO BlockManagerMasterEndpoint: BlockManagerMasterEndpoint up\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Revoke previously assigned partitions marketDataRequests-0\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Member consumer-sparkGroup-1-89cbdb45-88a1-4d93-9817-26920020efe5 sending LeaveGroup request to coordinator DESKTOP-SCGERG2.lan:9092 (id: 2147483647 rack: null) due to the consumer is being closed\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Resetting generation and member id due to: consumer pro-actively leaving the group\n23/07/21 13:00:37 INFO ConsumerCoordinator: [Consumer clientId=consumer-sparkGroup-1, groupId=sparkGroup] Request joining group due to: consumer pro-actively leaving the group\n23/07/21 13:00:37 INFO Metrics: Metrics scheduler closed\n23/07/21 13:00:37 INFO Metrics: Closing reporter org.apache.kafka.common.metrics.JmxReporter\n23/07/21 13:00:37 INFO Metrics: Metrics reporters closed\n23/07/21 13:00:37 INFO AppInfoParser: App info kafka.consumer for consumer-sparkGroup-1 unregistered\n\nProcess finished with exit code 0\n</code></pre>\n<p>So basically as you can see I'm experiencing a silent shutdown of the process, nothing in the log output indicates an error it simply closes and I'm trying to understand why?</p>\n<p>Any insights on how can I find the error or fix this issue would be welcomed.</p>\n<p>Here is the pom.xml for reference:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;com.samurai.lab&lt;/groupId&gt;\n        &lt;artifactId&gt;samurai-lab&lt;/artifactId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n\n    &lt;artifactId&gt;spark-job-service&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;name&gt;spark-job-service&lt;/name&gt;\n    &lt;url&gt;https://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;apache-spark.version&gt;3.4.1&lt;/apache-spark.version&gt;\n        &lt;apache-kafka.version&gt;3.5.0&lt;/apache-kafka.version&gt;\n        &lt;extraJavaTestArgs&gt;\n            -XX:+IgnoreUnrecognizedVMOptions\n            --add-opens=java.base/java.lang=ALL-UNNAMED\n            --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n            --add-opens=java.base/java.lang.reflect=ALL-UNNAMED\n            --add-opens=java.base/java.io=ALL-UNNAMED\n            --add-opens=java.base/java.net=ALL-UNNAMED\n            --add-opens=java.base/java.nio=ALL-UNNAMED\n            --add-opens=java.base/java.util=ALL-UNNAMED\n            --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\n            --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\n            --add-opens=java.base/sun.nio.ch=ALL-UNNAMED\n            --add-opens=java.base/sun.nio.cs=ALL-UNNAMED\n            --add-opens=java.base/sun.security.action=ALL-UNNAMED\n            --add-opens=java.base/sun.util.calendar=ALL-UNNAMED\n            -Djdk.reflect.useDirectMethodHandle=false\n        &lt;/extraJavaTestArgs&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-core_2.13&lt;/artifactId&gt;\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;spark-sql_2.13&lt;/artifactId&gt;\n            &lt;version&gt;${apache-spark.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;${apache-kafka.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb.spark&lt;/groupId&gt;\n            &lt;artifactId&gt;mongo-spark-connector_2.12&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","ssl","weblogic"],"comments":[{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":4,"creation_date":1353417458,"post_id":13470998,"comment_id":18432613,"body_markdown":"Do you realise that ignoring certificate (and host name) verification opens the connections to potential MITM attacks? There seems to be a flaw in your (administrative) security procedures if you have to ignore certificate errors. In addition, you should look at the Certicom TLS options, since you&#39;re visibly not using the default JSSE provider.","body":"Do you realise that ignoring certificate (and host name) verification opens the connections to potential MITM attacks? There seems to be a flaw in your (administrative) security procedures if you have to ignore certificate errors. In addition, you should look at the Certicom TLS options, since you&#39;re visibly not using the default JSSE provider."},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1353435289,"post_id":13470998,"comment_id":18441780,"body_markdown":"I am well aware of MITM attacks. In fact, if somebody is able to perform a MITM attack on that network, we have much bigger problems than him intercepting the communication. At first, I was considering a step in the software where we retrieve the certificate and if validated by the user, store it for further use. This is however a bigger challenge than the small problem I&#39;m trying to address. I&#39;ll have a look at Certicom TLS options.","body":"I am well aware of MITM attacks. In fact, if somebody is able to perform a MITM attack on that network, we have much bigger problems than him intercepting the communication. At first, I was considering a step in the software where we retrieve the certificate and if validated by the user, store it for further use. This is however a bigger challenge than the small problem I&#39;m trying to address. I&#39;ll have a look at Certicom TLS options."},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":2,"creation_date":1353442104,"post_id":13470998,"comment_id":18444831,"body_markdown":"WebLogic has done horrible, horrible things with SSL, and I pity you for having to try to deal with it. They don&#39;t follow Java standards have have their own screwed up and broken way of messing everything up.","body":"WebLogic has done horrible, horrible things with SSL, and I pity you for having to try to deal with it. They don&#39;t follow Java standards have have their own screwed up and broken way of messing everything up."},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":1,"creation_date":1353603453,"post_id":13470998,"comment_id":18503935,"body_markdown":"You&#39;re sufficiently concerned that there may be someone in a position to eavesdrop, but you&#39;re also assuming that they won&#39;t be able to alter the traffic (MITM). If you&#39;re worried about the former, I&#39;m not sure I&#39;d make this assumption about the latter. (If you really just want to protect against eavesdropping, but not MITM, it might be better to use anonymous cipher suites instead, without certificate.)","body":"You&#39;re sufficiently concerned that there may be someone in a position to eavesdrop, but you&#39;re also assuming that they won&#39;t be able to alter the traffic (MITM). If you&#39;re worried about the former, I&#39;m not sure I&#39;d make this assumption about the latter. (If you really just want to protect against eavesdropping, but not MITM, it might be better to use anonymous cipher suites instead, without certificate.)"},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1353928432,"post_id":13470998,"comment_id":18582648,"body_markdown":"@Bruno you misunderstood me. I don&#39;t care about eavesdropping. At all. There are much more important communications going on unencrypted on the same network. So if some one is able to place a MITM there, he won&#39;t even need to go that far to get the juicy bits of data. That&#39;s why I don&#39;t care about this SSL certificate.","body":"@Bruno you misunderstood me. I don&#39;t care about eavesdropping. At all. There are much more important communications going on unencrypted on the same network. So if some one is able to place a MITM there, he won&#39;t even need to go that far to get the juicy bits of data. That&#39;s why I don&#39;t care about this SSL certificate."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1382650862,"post_id":13470998,"comment_id":29054586,"body_markdown":"So why use SSL at all? Why not use plaintext? Via an HTTP: URL?","body":"So why use SSL at all? Why not use plaintext? Via an HTTP: URL?"},{"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"score":0,"creation_date":1382900834,"post_id":13470998,"comment_id":29129786,"body_markdown":"@EJP I was accessing a legacy system that imposed HTTPS on some operations and HTTP on others. The actual data was in HTTP. Since then, we ported that app to JBoss and at install-time, we ask the admin to validate the certificate and then only accept this one. On Weblogic, we try to generate a trustStore and let the sysadmin manually configures/import/adapt his stores. Inconvenient but no choice.","body":"@EJP I was accessing a legacy system that imposed HTTPS on some operations and HTTP on others. The actual data was in HTTP. Since then, we ported that app to JBoss and at install-time, we ask the admin to validate the certificate and then only accept this one. On Weblogic, we try to generate a trustStore and let the sysadmin manually configures/import/adapt his stores. Inconvenient but no choice."}],"answers":[{"tags":[],"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1353597581,"creation_date":1353450321,"answer_id":13483271,"question_id":13470998,"body_markdown":"There is in fact nothing wrong with the code above. The problem seems to lie with Weblogic and this Certicom TLS module. When I look at the _server_ options, _SSL_ and _Advanced_ I see that I can specify a custom HostnameVerifier (SSLMBean.HostnameVerifier) but the only element suggesting the ability to interfere with Certificate validation is deprecated.\r\n\r\nI tried the above code outside of Weblogic and it worked beautifully (fixed the HostnameVerifier in the post though).\r\n\r\nThen I tried to add &quot;-DUseSunHttpHandler=true&quot; to the Weblogic parameters as suggested by ipolevoy in &lt;a href=&quot;https://stackoverflow.com/questions/7109550/handshake-failure-alert-received&quot;&gt;this other question&lt;/a&gt;. It started working.\r\n\r\nThat being said, switching the HTTP handler on an Oracle Service Bus server seems a bit risky. There might well be side-effects that come back to bite me in a few weeks time...\r\n\r\nI also attempted to define my own trustStore and point it to a jssecacert that contained the required key. It was also ignored by Weblogic because it has its own setting of the trustStore for each server. So I&#39;m resorting to ask the administrator to manually import the required keys or point Weblogic to my own store.","title":"Ignoring SSL validation in Java","body":"<p>There is in fact nothing wrong with the code above. The problem seems to lie with Weblogic and this Certicom TLS module. When I look at the <em>server</em> options, <em>SSL</em> and <em>Advanced</em> I see that I can specify a custom HostnameVerifier (SSLMBean.HostnameVerifier) but the only element suggesting the ability to interfere with Certificate validation is deprecated.</p>\n\n<p>I tried the above code outside of Weblogic and it worked beautifully (fixed the HostnameVerifier in the post though).</p>\n\n<p>Then I tried to add \"-DUseSunHttpHandler=true\" to the Weblogic parameters as suggested by ipolevoy in <a href=\"https://stackoverflow.com/questions/7109550/handshake-failure-alert-received\">this other question</a>. It started working.</p>\n\n<p>That being said, switching the HTTP handler on an Oracle Service Bus server seems a bit risky. There might well be side-effects that come back to bite me in a few weeks time...</p>\n\n<p>I also attempted to define my own trustStore and point it to a jssecacert that contained the required key. It was also ignored by Weblogic because it has its own setting of the trustStore for each server. So I'm resorting to ask the administrator to manually import the required keys or point Weblogic to my own store.</p>\n"},{"tags":[],"owner":{"account_id":4569909,"reputation":1,"user_id":3709860,"display_name":"Ajunne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401949907,"creation_date":1401949907,"answer_id":24053127,"question_id":13470998,"body_markdown":"Actually, this is a know bug in Weblogic versions below 10.3.5, for which there is a patch available from Oracle. Please see document 1474989.1 in My Oracle Support for details.\r\n\r\nThe fix above is a non-recommended (but supported) workaround by Oracle, which will work, but is not the preferred solution.\r\n\r\nThe preferred solution is to download the patch mentioned in the Oracle article, and replace the SSL hostname verifier with the new one which is also part of Weblogic 10.3.5 and above. If you wish to remain compliant with Oracle in terms of support, this is the way to go.","title":"Ignoring SSL validation in Java","body":"<p>Actually, this is a know bug in Weblogic versions below 10.3.5, for which there is a patch available from Oracle. Please see document 1474989.1 in My Oracle Support for details.</p>\n\n<p>The fix above is a non-recommended (but supported) workaround by Oracle, which will work, but is not the preferred solution.</p>\n\n<p>The preferred solution is to download the patch mentioned in the Oracle article, and replace the SSL hostname verifier with the new one which is also part of Weblogic 10.3.5 and above. If you wish to remain compliant with Oracle in terms of support, this is the way to go.</p>\n"}],"owner":{"account_id":41689,"reputation":25007,"user_id":121260,"accept_rate":75,"display_name":"Eric Darchis"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15146,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"accepted_answer_id":13483271,"answer_count":2,"score":11,"last_activity_date":1689933143,"creation_date":1353406574,"question_id":13470998,"body_markdown":"I have to call an HTTP service hosted on web server with an invalid SSL certificate. In dev, I&#39;m importing the certificate with _keytool_ but the certificate will be different on each client install, so I can&#39;t just bundle it.\r\n\r\nForeword: I **DO** know that skipping SSL validation is really ugly. In this specific case, I would not even need SSL and all other communications in the system are over simple HTTP. So I really don&#39;t care about MITM attacks or such. An attacker would not need to go as far as to break SSL because there is no SSL for the data. This is support for a legacy system over which I have no control.\r\n\r\nI&#39;m using `HttpURLConnection` with an `SSLSocketFactory` that has a `NaiveTrustManager` and a `NaiveHostnameVerifier`. This works on some self-signed servers I tried but not on the customer&#39;s site. The error I&#39;m getting is:\r\n\r\n    javax.net.ssl.SSLKeyException: [Security:090477]Certificate chain received from xxxxxxxxxx was not trusted causing SSL handshake failure.\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireException(Unknown Source)\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireAlertSent(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\r\n        at com.certicom.tls.record.handshake.ClientStateReceivedServerHello.handle(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessage(Unknown Source)\r\n        at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessages(Unknown Source)\r\n        at com.certicom.tls.record.MessageInterpreter.interpretContent(Unknown Source)\r\n        at com.certicom.tls.record.MessageInterpreter.decryptMessage(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.processRecord(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.readRecord(Unknown Source)\r\n        at com.certicom.tls.record.ReadHandler.readUntilHandshakeComplete(Unknown Source)\r\n        at com.certicom.tls.interfaceimpl.TLSConnectionImpl.completeHandshake(Unknown Source)\r\n        at com.certicom.tls.record.WriteHandler.write(Unknown Source)\r\n        at com.certicom.io.OutputSSLIOStreamWrapper.write(Unknown Source)\r\n        at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\r\n        at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\r\n        at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)\r\n        at weblogic.net.http.HttpURLConnection.writeRequests(HttpURLConnection.java:154)\r\n        at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:358)\r\n        at weblogic.net.http.SOAPHttpsURLConnection.getInputStream(SOAPHttpsURLConnection.java:37)\r\n        at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)\r\n        at (my own code)\r\n\r\nMy `SimpleSocketFactory` looks like:\r\n\r\n    public static final SSLSocketFactory getSocketFactory()\r\n    {\r\n        if ( sslSocketFactory == null ) {\r\n            try {\r\n                // get ssl context\r\n                SSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n\r\n                // Create a trust manager that does not validate certificate chains\r\n                TrustManager[] trustAllCerts = new TrustManager[]{\r\n                    new NaiveTrustManager() {\r\n                        public java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n                            log.debug(&quot;getAcceptedIssuers&quot;);\r\n                            return new java.security.cert.X509Certificate[0];\r\n                        }\r\n                        public void checkClientTrusted(\r\n                            java.security.cert.X509Certificate[] certs, String authType) {\r\n                            log.debug(&quot;checkClientTrusted&quot;);\r\n                        }\r\n                        public void checkServerTrusted(\r\n                            java.security.cert.X509Certificate[] certs, String authType) {\r\n                            log.debug(&quot;checkServerTrusted&quot;);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                sc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n                // EDIT: fixed the following line that was redeclaring SSLSocketFactory sslSocketFactory, returning null every time. Same result though.\r\n                sslSocketFactory = sc.getSocketFactory();\r\n\r\n                HttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory);\r\n                // EDIT: The following line has no effect\r\n                //HttpsURLConnection.setDefaultHostnameVerifier(new NaiveHostNameVerifier());\r\n\r\n            } catch (KeyManagementException e) {\r\n                log.error (&quot;No SSL algorithm support: &quot; + e.getMessage(), e);\r\n            } catch (NoSuchAlgorithmException e) {\r\n                log.error (&quot;Exception when setting up the Naive key management.&quot;, e);\r\n            }\r\n        }\r\n        return sslSocketFactory;\r\n    }\r\n\r\nThe `NaiveHostnameVerifier` has a way to limit the valid hosts but it&#39;s left null, so basically accepting anything:\r\n\r\n    public class NaiveHostnameVerifier implements HostnameVerifier {\r\n        String[] patterns;\r\n    \r\n        public NaiveHostnameVerifier () {\r\n            this.patterns=null;\r\n        }\r\n    \r\n        public NaiveHostnameVerifier (String[] patterns) {\r\n            this.patterns = patterns;\r\n        }\r\n    \r\n        public boolean verify(String urlHostName,SSLSession session) {\r\n            if (patterns==null || patterns.length==0) {\r\n                return true;\r\n            } else {\r\n                for (String pattern : patterns) {\r\n                    if (urlHostName.matches(pattern)) {\r\n                        return true;\r\n                    }\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\nThe usage is like this:\r\n\r\n        try {\r\n            conn = (HttpURLConnection)url.openConnection();\r\n            if (conn instanceof HttpsURLConnection) {\r\n                    ((HttpsURLConnection)conn).setSSLSocketFactory(SimpleSSLSocketFactory.getSocketFactory());\r\n                    // EDIT: added this line, the HV has to be set on connection, not on the factory.\r\n                    ((HttpsURLConnection)conn).setHostnameVerifier(new NaiveHostnameVerifier());\r\n            }\r\n            conn.setDoInput(true);\r\n            conn.setDoOutput(true);\r\n            conn.setRequestMethod(&quot;POST&quot;);\r\n            conn.setRequestProperty(&quot;Content-type&quot;,&quot;application/x-www-form-urlencoded&quot;);\r\n            conn.connect();\r\n\r\n\t\t\tStringBuffer sbContent = new StringBuffer();\r\n\t\t\t// (snip)\r\n\t\t\tDataOutputStream stream = new DataOutputStream(conn.getOutputStream ());\r\n\t\t\tstream.writeBytes(sbContent.toString());\r\n\t\t\tstream.flush();\r\n\t\t\tstream.close();\r\n        } catch (ClassCastException e) {\r\n            log.error(&quot;The URL does not seem to point to a HTTP connection&quot;);\r\n            return null;\r\n        } catch (IOException e) {\r\n            log.error(&quot;Error accessing the requested URL&quot;, e);\r\n            return null;\r\n        }\r\n\r\n\r\nWhen I&#39;m searching on the error message, most people just import the certificate in their store but again, I can&#39;t really do that because I don&#39;t know which certificate it&#39;ll be. My only alternative if this doesn&#39;t work is to make a tool that can download the certificate and add it in an easier way that cryptic command lines but I&#39;d rather let my Java code just ignore the invalid certificate.\r\n\r\nAny idea ?","title":"Ignoring SSL validation in Java","body":"<p>I have to call an HTTP service hosted on web server with an invalid SSL certificate. In dev, I'm importing the certificate with <em>keytool</em> but the certificate will be different on each client install, so I can't just bundle it.</p>\n\n<p>Foreword: I <strong>DO</strong> know that skipping SSL validation is really ugly. In this specific case, I would not even need SSL and all other communications in the system are over simple HTTP. So I really don't care about MITM attacks or such. An attacker would not need to go as far as to break SSL because there is no SSL for the data. This is support for a legacy system over which I have no control.</p>\n\n<p>I'm using <code>HttpURLConnection</code> with an <code>SSLSocketFactory</code> that has a <code>NaiveTrustManager</code> and a <code>NaiveHostnameVerifier</code>. This works on some self-signed servers I tried but not on the customer's site. The error I'm getting is:</p>\n\n<pre><code>javax.net.ssl.SSLKeyException: [Security:090477]Certificate chain received from xxxxxxxxxx was not trusted causing SSL handshake failure.\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireException(Unknown Source)\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.fireAlertSent(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.fireAlert(Unknown Source)\n    at com.certicom.tls.record.handshake.ClientStateReceivedServerHello.handle(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessage(Unknown Source)\n    at com.certicom.tls.record.handshake.HandshakeHandler.handleHandshakeMessages(Unknown Source)\n    at com.certicom.tls.record.MessageInterpreter.interpretContent(Unknown Source)\n    at com.certicom.tls.record.MessageInterpreter.decryptMessage(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.processRecord(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.readRecord(Unknown Source)\n    at com.certicom.tls.record.ReadHandler.readUntilHandshakeComplete(Unknown Source)\n    at com.certicom.tls.interfaceimpl.TLSConnectionImpl.completeHandshake(Unknown Source)\n    at com.certicom.tls.record.WriteHandler.write(Unknown Source)\n    at com.certicom.io.OutputSSLIOStreamWrapper.write(Unknown Source)\n    at java.io.BufferedOutputStream.flushBuffer(BufferedOutputStream.java:65)\n    at java.io.BufferedOutputStream.flush(BufferedOutputStream.java:123)\n    at java.io.FilterOutputStream.flush(FilterOutputStream.java:123)\n    at weblogic.net.http.HttpURLConnection.writeRequests(HttpURLConnection.java:154)\n    at weblogic.net.http.HttpURLConnection.getInputStream(HttpURLConnection.java:358)\n    at weblogic.net.http.SOAPHttpsURLConnection.getInputStream(SOAPHttpsURLConnection.java:37)\n    at weblogic.net.http.HttpURLConnection.getResponseCode(HttpURLConnection.java:947)\n    at (my own code)\n</code></pre>\n\n<p>My <code>SimpleSocketFactory</code> looks like:</p>\n\n<pre><code>public static final SSLSocketFactory getSocketFactory()\n{\n    if ( sslSocketFactory == null ) {\n        try {\n            // get ssl context\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n\n            // Create a trust manager that does not validate certificate chains\n            TrustManager[] trustAllCerts = new TrustManager[]{\n                new NaiveTrustManager() {\n                    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                        log.debug(\"getAcceptedIssuers\");\n                        return new java.security.cert.X509Certificate[0];\n                    }\n                    public void checkClientTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                        log.debug(\"checkClientTrusted\");\n                    }\n                    public void checkServerTrusted(\n                        java.security.cert.X509Certificate[] certs, String authType) {\n                        log.debug(\"checkServerTrusted\");\n                    }\n                }\n            };\n\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            // EDIT: fixed the following line that was redeclaring SSLSocketFactory sslSocketFactory, returning null every time. Same result though.\n            sslSocketFactory = sc.getSocketFactory();\n\n            HttpsURLConnection.setDefaultSSLSocketFactory(sslSocketFactory);\n            // EDIT: The following line has no effect\n            //HttpsURLConnection.setDefaultHostnameVerifier(new NaiveHostNameVerifier());\n\n        } catch (KeyManagementException e) {\n            log.error (\"No SSL algorithm support: \" + e.getMessage(), e);\n        } catch (NoSuchAlgorithmException e) {\n            log.error (\"Exception when setting up the Naive key management.\", e);\n        }\n    }\n    return sslSocketFactory;\n}\n</code></pre>\n\n<p>The <code>NaiveHostnameVerifier</code> has a way to limit the valid hosts but it's left null, so basically accepting anything:</p>\n\n<pre><code>public class NaiveHostnameVerifier implements HostnameVerifier {\n    String[] patterns;\n\n    public NaiveHostnameVerifier () {\n        this.patterns=null;\n    }\n\n    public NaiveHostnameVerifier (String[] patterns) {\n        this.patterns = patterns;\n    }\n\n    public boolean verify(String urlHostName,SSLSession session) {\n        if (patterns==null || patterns.length==0) {\n            return true;\n        } else {\n            for (String pattern : patterns) {\n                if (urlHostName.matches(pattern)) {\n                    return true;\n                }\n            }\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p>The usage is like this:</p>\n\n<pre><code>    try {\n        conn = (HttpURLConnection)url.openConnection();\n        if (conn instanceof HttpsURLConnection) {\n                ((HttpsURLConnection)conn).setSSLSocketFactory(SimpleSSLSocketFactory.getSocketFactory());\n                // EDIT: added this line, the HV has to be set on connection, not on the factory.\n                ((HttpsURLConnection)conn).setHostnameVerifier(new NaiveHostnameVerifier());\n        }\n        conn.setDoInput(true);\n        conn.setDoOutput(true);\n        conn.setRequestMethod(\"POST\");\n        conn.setRequestProperty(\"Content-type\",\"application/x-www-form-urlencoded\");\n        conn.connect();\n\n        StringBuffer sbContent = new StringBuffer();\n        // (snip)\n        DataOutputStream stream = new DataOutputStream(conn.getOutputStream ());\n        stream.writeBytes(sbContent.toString());\n        stream.flush();\n        stream.close();\n    } catch (ClassCastException e) {\n        log.error(\"The URL does not seem to point to a HTTP connection\");\n        return null;\n    } catch (IOException e) {\n        log.error(\"Error accessing the requested URL\", e);\n        return null;\n    }\n</code></pre>\n\n<p>When I'm searching on the error message, most people just import the certificate in their store but again, I can't really do that because I don't know which certificate it'll be. My only alternative if this doesn't work is to make a tool that can download the certificate and add it in an easier way that cryptic command lines but I'd rather let my Java code just ignore the invalid certificate.</p>\n\n<p>Any idea ?</p>\n"},{"tags":["java","junit","controller","mockito","spring-boot-test"],"comments":[{"owner":{"account_id":106565,"reputation":18790,"user_id":283837,"accept_rate":70,"display_name":"Simeon Leyzerzon"},"score":0,"creation_date":1581283548,"post_id":53051236,"comment_id":106370065,"body_markdown":"Did you figure it out?","body":"Did you figure it out?"}],"answers":[{"tags":[],"owner":{"account_id":5590946,"reputation":3040,"user_id":4430183,"display_name":"Emre Savcı"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540964426,"creation_date":1540964426,"answer_id":53076972,"question_id":53051236,"body_markdown":"Try to change \r\n\r\n    public ResponseEntity&lt;String&gt; insertString(String str)\r\n\r\nto\r\n\r\n\r\n    public ResponseEntity&lt;String&gt; insertString(@RequestBody String str)\r\n\r\nI&#39;ve run the test with above code and it passed.\r\n\r\n","title":"Issue with responseEntity . MockMvc.Perform() gives 200 status code even if the ResponseEntity.HttpStatus is 201","body":"<p>Try to change </p>\n\n<pre><code>public ResponseEntity&lt;String&gt; insertString(String str)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>public ResponseEntity&lt;String&gt; insertString(@RequestBody String str)\n</code></pre>\n\n<p>I've run the test with above code and it passed.</p>\n"}],"owner":{"account_id":8682185,"reputation":157,"user_id":6497689,"display_name":"Rohan RM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1729,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1689933127,"creation_date":1540835720,"question_id":53051236,"body_markdown":"Im trying to mock a controller&#39;s post method. I want it to return status code 201(CREATED) . But it gives Status Code 200.\r\nGiven below is the code\r\nThis is my controller Class        \r\n\r\n    package com.example.demo;\r\n    \r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    public @RestController\r\n    class SomeController{\r\n    \t\r\n    \t@PostMapping(&quot;/insertString&quot;)\r\n    \tpublic ResponseEntity&lt;String&gt; insertString(String str) {\r\n    \t\treturn new ResponseEntity&lt;&gt;(new String(&quot;monster&quot;),HttpStatus.CREATED);\r\n    \t}\r\n    }\r\n\r\nThis is my junit test Suit\r\n\r\n    package com.example.demo;\r\n\r\n    import static org.junit.Assert.*;\r\n    import static org.mockito.Mockito.when;\r\n    import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\r\n    import static org.mockito.Mockito.anyString;\r\n\r\n    import org.junit.Test;\r\n    import org.junit.runner.RunWith;\r\n    import org.mockito.Mockito.*;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\r\n    import org.springframework.boot.test.mock.mockito.MockBean;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ResponseEntity;\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.test.context.junit4.SpringRunner;\r\n    import org.springframework.test.web.servlet.MockMvc;\r\n    import org.springframework.test.web.servlet.MvcResult;\r\n    import org.springframework.test.web.servlet.RequestBuilder;\r\n    import org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\r\n    import org.springframework.web.bind.annotation.PostMapping;\r\n    import org.springframework.web.bind.annotation.RestController;   \r\n\r\n    @RunWith(SpringRunner.class)\r\n    @WebMvcTest(SomeController.class)\r\n    public class TestClass {\r\n\r\n\t@Autowired\r\n\tprivate MockMvc mockMvc;\r\n\t\r\n\t@MockBean\r\n\tprivate SomeController someController;\r\n\t\r\n\t@Test\r\n\tpublic void test() throws Exception {\r\n\t\t\r\n\t\tResponseEntity&lt;String&gt; entity = new ResponseEntity&lt;&gt;(HttpStatus.CREATED);\r\n\t\t\r\n\t\twhen(someController.insertString(anyString())).thenReturn(entity);\r\n\t\t\r\n\t\tRequestBuilder requestBuilder = MockMvcRequestBuilders\r\n\t\t\t\t.post(&quot;/insertString&quot;)\r\n\t\t\t\t.accept(MediaType.APPLICATION_JSON)\r\n\t\t\t\t.content(&quot;monkey&quot;)\r\n\t\t\t\t.contentType(MediaType.APPLICATION_JSON);\r\n\t\t\r\n\t\tMvcResult result = mockMvc.perform(requestBuilder)\r\n\t\t\t\t.andExpect(status().isCreated())\r\n\t\t\t\t.andReturn();\r\n\t\tSystem.out.println(result.getResponse().getContentAsString());\r\n\t}\r\n\r\n}\r\n\r\nThe errorim getting is\r\n\r\njava.lang.AssertionErrror:Status expected:&lt;201&gt; but was:&lt;200&gt;\r\n\r\n\r\nThough i have mentioned the status as HttpStatus.CREATED in the RequestEntity object, Why am i getting 200.\r\nPlease if someone can help\r\n\r\n\r\n\r\n\r\n","title":"Issue with responseEntity . MockMvc.Perform() gives 200 status code even if the ResponseEntity.HttpStatus is 201","body":"<p>Im trying to mock a controller's post method. I want it to return status code 201(CREATED) . But it gives Status Code 200.\nGiven below is the code\nThis is my controller Class        </p>\n\n<pre><code>package com.example.demo;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\npublic @RestController\nclass SomeController{\n\n    @PostMapping(\"/insertString\")\n    public ResponseEntity&lt;String&gt; insertString(String str) {\n        return new ResponseEntity&lt;&gt;(new String(\"monster\"),HttpStatus.CREATED);\n    }\n}\n</code></pre>\n\n<p>This is my junit test Suit</p>\n\n<pre><code>package com.example.demo;\n\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\nimport static org.mockito.Mockito.anyString;\n\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.Mockito.*;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\nimport org.springframework.test.web.servlet.RequestBuilder;\nimport org.springframework.test.web.servlet.request.MockMvcRequestBuilders;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RestController;   \n\n@RunWith(SpringRunner.class)\n@WebMvcTest(SomeController.class)\npublic class TestClass {\n\n@Autowired\nprivate MockMvc mockMvc;\n\n@MockBean\nprivate SomeController someController;\n\n@Test\npublic void test() throws Exception {\n\n    ResponseEntity&lt;String&gt; entity = new ResponseEntity&lt;&gt;(HttpStatus.CREATED);\n\n    when(someController.insertString(anyString())).thenReturn(entity);\n\n    RequestBuilder requestBuilder = MockMvcRequestBuilders\n            .post(\"/insertString\")\n            .accept(MediaType.APPLICATION_JSON)\n            .content(\"monkey\")\n            .contentType(MediaType.APPLICATION_JSON);\n\n    MvcResult result = mockMvc.perform(requestBuilder)\n            .andExpect(status().isCreated())\n            .andReturn();\n    System.out.println(result.getResponse().getContentAsString());\n}\n</code></pre>\n\n<p>}</p>\n\n<p>The errorim getting is</p>\n\n<p>java.lang.AssertionErrror:Status expected:&lt;201> but was:&lt;200></p>\n\n<p>Though i have mentioned the status as HttpStatus.CREATED in the RequestEntity object, Why am i getting 200.\nPlease if someone can help</p>\n"},{"tags":["java","spring-boot","unit-testing","mockito","junit5"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689157644,"post_id":76669547,"comment_id":135172654,"body_markdown":"Take care of java naming conventions. Names should be camelCase not snake_case.","body":"Take care of java naming conventions. Names should be camelCase not snake_case."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":1,"creation_date":1689157814,"post_id":76669547,"comment_id":135172686,"body_markdown":"The method in utilsclass should not be called at all, because the class which are calling it should be a mock.","body":"The method in utilsclass should not be called at all, because the class which are calling it should be a mock."},{"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"score":0,"creation_date":1689161319,"post_id":76669547,"comment_id":135173445,"body_markdown":"Noted the point on java naming conventions. And on the mock, I was using `thenCallRealMethod` since the serviceClass was straight forward conversions only.","body":"Noted the point on java naming conventions. And on the mock, I was using <code>thenCallRealMethod</code> since the serviceClass was straight forward conversions only."},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1689168031,"post_id":76669547,"comment_id":135175056,"body_markdown":"I think you have to `spy` `serviceClass` if you want to inject mocks","body":"I think you have to <code>spy</code> <code>serviceClass</code> if you want to inject mocks"},{"owner":{"account_id":19935722,"reputation":214,"user_id":14608443,"display_name":"IveGotCodeButImNotACoder"},"score":0,"creation_date":1689179234,"post_id":76669547,"comment_id":135177893,"body_markdown":"can you add access modifiers please to each variable","body":"can you add access modifiers please to each variable"}],"answers":[{"tags":[],"owner":{"account_id":11459881,"reputation":1,"user_id":8399833,"display_name":"Ibrahim AbdElJalil"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689208566,"creation_date":1689208566,"answer_id":76675213,"question_id":76669547,"body_markdown":"Replace @InjectMocks to @Mock in case you call the service directly from your testcase as @InjectMocks mock the whole class with null values\r\n","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>Replace @InjectMocks to @Mock in case you call the service directly from your testcase as @InjectMocks mock the whole class with null values</p>\n"},{"tags":[],"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689932876,"creation_date":1689932876,"answer_id":76736868,"question_id":76669547,"body_markdown":"After searching and reading through some documents I understood that its possible to mock only the immediate class calls while doing the mocks unit tests.\r\n\r\nAlso the right way was to test only the `FileService` by mocking the `ServiceClass` using `when(..).thenReturn(..);` and testing the other methods in the `ServiceClass` and the `UtilsClass` by creating separate test classes like `ServiceClassTest` &amp; `UtilsClassTest` and individually unit test by asserting only the values/conversions that were implemented in the block. ","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>After searching and reading through some documents I understood that its possible to mock only the immediate class calls while doing the mocks unit tests.</p>\n<p>Also the right way was to test only the <code>FileService</code> by mocking the <code>ServiceClass</code> using <code>when(..).thenReturn(..);</code> and testing the other methods in the <code>ServiceClass</code> and the <code>UtilsClass</code> by creating separate test classes like <code>ServiceClassTest</code> &amp; <code>UtilsClassTest</code> and individually unit test by asserting only the values/conversions that were implemented in the block.</p>\n"}],"owner":{"account_id":9134977,"reputation":121,"user_id":6794989,"display_name":"Ramji"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689932911,"creation_date":1689157384,"question_id":76669547,"body_markdown":"I have a class FileService that needs some unit tests to be run.\r\n\r\n```\r\nClass FileService {\r\n    @Autowired\r\n    ServiceClass serviceClass;\r\n\r\n    method_class_FileService() {\r\n         serviceClass.method_service_class();\r\n    }\r\n}\r\n\r\nClass ServiceClass {\r\n     @Autowired\r\n     UtilsClass utilsClass;\r\n\r\n     method_service_class() {\r\n           utilsClass.method();\r\n     }\r\n}\r\n\r\nClass UtilsClass {\r\n     method() {\r\n     // Some implementation\r\n     }\r\n}\r\n\r\n```\r\n\r\nMockito test case\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\npublic class FileServiceImplTest {\r\n     @InjectMocks\r\n     FileService fileService;\r\n     \r\n     @Mock\r\n     ServiceClass serviceClass;\r\n\r\n     @Mock\r\n     UtilsClass utilsClass;\r\n     \r\n     @Test\r\n     public void testMethod_class_FileService() {\r\n          when(serviceClass.method_service_class()).thenCallRealMethod();\r\n          when(utilsClass.method_service_class()).thenCallRealMethod();\r\n          fileService.method_class_FileService();\r\n          //Assertions\r\n     }\r\n}\r\n```\r\n\r\nWhen the `fileService.method_class_FileService()` is called, it throws NullPointerException while calling the `utilsClass.method_service_class()`\r\n\r\n\r\n\r\n\r\n     \r\n\r\nTried to mock the objects which did not work. \r\nTried to use thenCallRealMethod which also did not work.","title":"How to create/mock a class thats already mocked in Mockito unit tests","body":"<p>I have a class FileService that needs some unit tests to be run.</p>\n<pre><code>Class FileService {\n    @Autowired\n    ServiceClass serviceClass;\n\n    method_class_FileService() {\n         serviceClass.method_service_class();\n    }\n}\n\nClass ServiceClass {\n     @Autowired\n     UtilsClass utilsClass;\n\n     method_service_class() {\n           utilsClass.method();\n     }\n}\n\nClass UtilsClass {\n     method() {\n     // Some implementation\n     }\n}\n\n</code></pre>\n<p>Mockito test case</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class FileServiceImplTest {\n     @InjectMocks\n     FileService fileService;\n     \n     @Mock\n     ServiceClass serviceClass;\n\n     @Mock\n     UtilsClass utilsClass;\n     \n     @Test\n     public void testMethod_class_FileService() {\n          when(serviceClass.method_service_class()).thenCallRealMethod();\n          when(utilsClass.method_service_class()).thenCallRealMethod();\n          fileService.method_class_FileService();\n          //Assertions\n     }\n}\n</code></pre>\n<p>When the <code>fileService.method_class_FileService()</code> is called, it throws NullPointerException while calling the <code>utilsClass.method_service_class()</code></p>\n<p>Tried to mock the objects which did not work.\nTried to use thenCallRealMethod which also did not work.</p>\n"},{"tags":["java","spring","hibernate","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1689675938,"post_id":76710492,"comment_id":135244167,"body_markdown":"@PostRemove is &quot;in transaction&quot; so be careful.\nExample: https://stackoverflow.com/a/38870659/390462","body":"@PostRemove is &quot;in transaction&quot; so be careful. Example: <a href=\"https://stackoverflow.com/a/38870659/390462\">stackoverflow.com/a/38870659/390462</a>"},{"owner":{"account_id":6506515,"reputation":1641,"user_id":5035525,"accept_rate":69,"display_name":"Ramanujan R"},"score":0,"creation_date":1689684288,"post_id":76710492,"comment_id":135245997,"body_markdown":"@BendaThierry.com Yes `@PostRemove` is in transaction. I&#39;m wondering why the second record is not updated then!","body":"@BendaThierry.com Yes <code>@PostRemove</code> is in transaction. I&#39;m wondering why the second record is not updated then!"},{"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"score":0,"creation_date":1689932289,"post_id":76710492,"comment_id":135286128,"body_markdown":"Simply because your transaction is closed before triggering this `@PostRemove` code. You&#39;ll find it.","body":"Simply because your transaction is closed before triggering this <code>@PostRemove</code> code. You&#39;ll find it."}],"answers":[{"tags":[],"owner":{"account_id":166382,"reputation":2080,"user_id":390462,"display_name":"BendaThierry.com"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689932634,"creation_date":1689932634,"answer_id":76736835,"question_id":76710492,"body_markdown":"Adding `@Transactional` annotation above any method involved in database operations in your (micro)services ensure you are staying inside a current database transaction.\r\n\r\nPlease stop using repositories in the controllers layer. It&#39;s a very bad way to develop things for your application.\r\n\r\nDisable OpenSessionInView property to optimize things around your database queries.\r\n\r\n\r\n","title":"Executing repository method inside Spring Data Jpa @PostRemove is not working","body":"<p>Adding <code>@Transactional</code> annotation above any method involved in database operations in your (micro)services ensure you are staying inside a current database transaction.</p>\n<p>Please stop using repositories in the controllers layer. It's a very bad way to develop things for your application.</p>\n<p>Disable OpenSessionInView property to optimize things around your database queries.</p>\n"}],"owner":{"account_id":6506515,"reputation":1641,"user_id":5035525,"accept_rate":69,"display_name":"Ramanujan R"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689932634,"creation_date":1689665963,"question_id":76710492,"body_markdown":"I have two entities `First` and `Second`. There are `@PreRemove` and `PostRemove` implementations for `First`. The `preRemove()` creates a record in `Second` and caches the result to a transient property `First.second`. This is working. I want the `postRemove` to update the same record, which is not working. It is not updating the record.\r\n\r\n    @Entity\r\n    @Getter@Setter@NoArgsConstructor@AllArgsConstructor\r\n    public class Second {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n        @Column(name = &quot;id&quot;, nullable = false)\r\n        private Long id;\r\n    \r\n        private String prop;\r\n    }\r\n\r\n\r\n    @Entity\r\n    @Getter@Setter@NoArgsConstructor@AllArgsConstructor\r\n    public class First {\r\n\r\n      @Id\r\n      @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n      @Column(name = &quot;id&quot;)\r\n      private Long id;\r\n\r\n      private String prop;\r\n\r\n      @Transient@JsonIgnore\r\n      private Second second;\r\n\r\n      @PreRemove\r\n      public void preRemove() {\r\n          second = MyBeanUtils.getBean(SecondRepository.class).save(new Second());\r\n      }\r\n\r\n      @PostRemove\r\n      public void postRemove() {\r\n          second.setProp(&quot;after remove&quot;);\r\n          MyBeanUtils.getBean(SecondRepository.class).save(second);\r\n      }\r\n\r\n    }\r\n\r\nController and Repository codes\r\n\r\n    @Repository\r\n    public interface FirstRepository extends JpaRepository&lt;First, Long&gt; {\r\n    }\r\n    @Repository\r\n    public interface SecondRepository extends JpaRepository&lt;Second, Long&gt; {\r\n    }\r\n    @RestController\r\n    @RequiredArgsConstructor\r\n    public class DemoController {\r\n    \r\n        private final FirstRepository repository;\r\n    \r\n        @PostMapping(&quot;/first&quot;)\r\n        public First postBo3(@RequestBody First bo3) {\r\n            return repository.save(bo3);\r\n        }\r\n    \r\n        @DeleteMapping(&quot;/first/{id}&quot;)\r\n        void postBo3(@PathVariable long id) {\r\n            repository.deleteById(id);\r\n        }\r\n    \r\n    }\r\n\r\nWhen I put a break point on the line `second.setProp(&quot;after remove&quot;);` in the `postRemove()`, it shows the field `second` does have an ID, because it is the cached instance after `save()`.\r\n\r\nWith `spring.jpa.show-sql=true`, these are the queries logged. Can&#39;t see any update query and the record is not updated in the database too. Please suggest a reason for this and a workaround.\r\n\r\n    Hibernate: select first0_.id as id1_0_0_, first0_.prop as prop2_0_0_ from first first0_ where first0_.id=?\r\n    Hibernate: insert into second (prop) values (?)\r\n    Hibernate: delete from first where id=?","title":"Executing repository method inside Spring Data Jpa @PostRemove is not working","body":"<p>I have two entities <code>First</code> and <code>Second</code>. There are <code>@PreRemove</code> and <code>PostRemove</code> implementations for <code>First</code>. The <code>preRemove()</code> creates a record in <code>Second</code> and caches the result to a transient property <code>First.second</code>. This is working. I want the <code>postRemove</code> to update the same record, which is not working. It is not updating the record.</p>\n<pre><code>@Entity\n@Getter@Setter@NoArgsConstructor@AllArgsConstructor\npublic class Second {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    private String prop;\n}\n\n\n@Entity\n@Getter@Setter@NoArgsConstructor@AllArgsConstructor\npublic class First {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;id&quot;)\n  private Long id;\n\n  private String prop;\n\n  @Transient@JsonIgnore\n  private Second second;\n\n  @PreRemove\n  public void preRemove() {\n      second = MyBeanUtils.getBean(SecondRepository.class).save(new Second());\n  }\n\n  @PostRemove\n  public void postRemove() {\n      second.setProp(&quot;after remove&quot;);\n      MyBeanUtils.getBean(SecondRepository.class).save(second);\n  }\n\n}\n</code></pre>\n<p>Controller and Repository codes</p>\n<pre><code>@Repository\npublic interface FirstRepository extends JpaRepository&lt;First, Long&gt; {\n}\n@Repository\npublic interface SecondRepository extends JpaRepository&lt;Second, Long&gt; {\n}\n@RestController\n@RequiredArgsConstructor\npublic class DemoController {\n\n    private final FirstRepository repository;\n\n    @PostMapping(&quot;/first&quot;)\n    public First postBo3(@RequestBody First bo3) {\n        return repository.save(bo3);\n    }\n\n    @DeleteMapping(&quot;/first/{id}&quot;)\n    void postBo3(@PathVariable long id) {\n        repository.deleteById(id);\n    }\n\n}\n</code></pre>\n<p>When I put a break point on the line <code>second.setProp(&quot;after remove&quot;);</code> in the <code>postRemove()</code>, it shows the field <code>second</code> does have an ID, because it is the cached instance after <code>save()</code>.</p>\n<p>With <code>spring.jpa.show-sql=true</code>, these are the queries logged. Can't see any update query and the record is not updated in the database too. Please suggest a reason for this and a workaround.</p>\n<pre><code>Hibernate: select first0_.id as id1_0_0_, first0_.prop as prop2_0_0_ from first first0_ where first0_.id=?\nHibernate: insert into second (prop) values (?)\nHibernate: delete from first where id=?\n</code></pre>\n"},{"tags":["java","visual-studio-code","error-messaging"],"answers":[{"tags":[],"owner":{"account_id":24435058,"reputation":6292,"user_id":18359438,"display_name":"MingJie-MSFT"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1651565696,"creation_date":1651565696,"answer_id":72096525,"question_id":72064275,"body_markdown":"The method of opening file is wrong. The problem is that a single file cannot be recognized as a project. The correct way to open a java file is to open folder first and then the file.\r\n\r\n","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>The method of opening file is wrong. The problem is that a single file cannot be recognized as a project. The correct way to open a java file is to open folder first and then the file.</p>\n"},{"tags":[],"owner":{"account_id":18459141,"reputation":351,"user_id":13447096,"display_name":"Suchint "},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689932422,"creation_date":1689932422,"answer_id":76736806,"question_id":72064275,"body_markdown":"You need to right-click on the parent folder of the file you are working on in your current workspace and then click on &quot;Add Folder To Java Source Path&quot;\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2QVem.png","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>You need to right-click on the parent folder of the file you are working on in your current workspace and then click on &quot;Add Folder To Java Source Path&quot;\n<a href=\"https://i.stack.imgur.com/2QVem.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2QVem.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":23539402,"reputation":49,"user_id":17583849,"display_name":"Abdelrahmane Khaldi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5325,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":72096525,"answer_count":2,"score":0,"last_activity_date":1689932422,"creation_date":1651271576,"question_id":72064275,"body_markdown":"this error keeps showing while I run any java program on vs code, the program gets executed with no problem but the error keeps showing","title":"Java Error Vs code: (class_Name).java is a non-project file, only syntax errors are reported","body":"<p>this error keeps showing while I run any java program on vs code, the program gets executed with no problem but the error keeps showing</p>\n"},{"tags":["java","amazon-web-services","amazon-ec2","ec2-api-tools"],"comments":[{"owner":{"account_id":8623,"reputation":34484,"user_id":15625,"accept_rate":65,"display_name":"bortzmeyer"},"score":0,"creation_date":1318516250,"post_id":7652247,"comment_id":9440416,"body_markdown":"Do note there is a similar question for the shell users http://stackoverflow.com/questions/2644742/getting-id-of-an-instance-newly-launched-with-ec2-api-tools and the answer is the same, you have to poll (test repeatedly).","body":"Do note there is a similar question for the shell users <a href=\"http://stackoverflow.com/questions/2644742/getting-id-of-an-instance-newly-launched-with-ec2-api-tools\" title=\"getting id of an instance newly launched with ec2 api tools\">stackoverflow.com/questions/2644742/&hellip;</a> and the answer is the same, you have to poll (test repeatedly)."}],"answers":[{"tags":[],"owner":{"account_id":83310,"reputation":9796,"user_id":233653,"accept_rate":100,"display_name":"Eight-Bit Guru"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1317770883,"creation_date":1317770883,"answer_id":7655176,"question_id":7652247,"body_markdown":"There is no event model or other signal raised by the SDK to tell you when an EC2 object changes state - the only way to find out is to issue a DescribeXXXXXXXX call on the object on a repeated basis, say once every 30 seconds, until the state field changes.\r\n\r\nThere&#39;s a finite minimum time for the call to execute and respond, so you need to find an interval that doesn&#39;t fire requests before the prior one has completed. Or simply wait for the response, and then wait another &#39;n&#39; seconds before re-issuing the call. You also don&#39;t want to spam the AWS API with rapid requests, even if they&#39;re timed between responses. In my controller application, I set the interval at 30 seconds, issue the request, wait for the response, and then subtract the elapsed time from the interval and sleep that long. In a multithreaded model, I can thereby track state changes on many objects simultaneously without swamping either my local CPU or the API.\r\n\r\nOnce the change of state has been detected (and assuming the new state is whet you expect - don&#39;t forget to handle failure modes) you can get a wide variety of descriptive information, including public DNS address (in the case of instance objects) from the structure returned in the API response object.","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>There is no event model or other signal raised by the SDK to tell you when an EC2 object changes state - the only way to find out is to issue a DescribeXXXXXXXX call on the object on a repeated basis, say once every 30 seconds, until the state field changes.</p>\n\n<p>There's a finite minimum time for the call to execute and respond, so you need to find an interval that doesn't fire requests before the prior one has completed. Or simply wait for the response, and then wait another 'n' seconds before re-issuing the call. You also don't want to spam the AWS API with rapid requests, even if they're timed between responses. In my controller application, I set the interval at 30 seconds, issue the request, wait for the response, and then subtract the elapsed time from the interval and sleep that long. In a multithreaded model, I can thereby track state changes on many objects simultaneously without swamping either my local CPU or the API.</p>\n\n<p>Once the change of state has been detected (and assuming the new state is whet you expect - don't forget to handle failure modes) you can get a wide variety of descriptive information, including public DNS address (in the case of instance objects) from the structure returned in the API response object.</p>\n"},{"tags":[],"owner":{"account_id":34729,"reputation":747,"user_id":98177,"accept_rate":67,"display_name":"Dennis"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1465165833,"creation_date":1465165833,"answer_id":37647430,"question_id":7652247,"body_markdown":"Actually, you can POLL to find out the status of an instance. Here is some Bash code to do that, just adapt it to JAVA. You MAY have a similar command in the Java SDK so that you don&#39;t have to do an execution of Bash from Java. The command &#39;ec2-describe-instances&#39; comes from the [Amazon AWS CLI][1]. I would start out the function or method to wait for running state to test if instance is &#39;pending&#39;, and fail if it is not starting or &#39;pending&#39;. Then record the time, and give it a max of let&#39;s say 3 minutes, and just keep polling for &#39;running&#39; status in a loop, checking for the 3 minute limit. Return to the calling point whichever comes first, &#39;not started&#39;,&#39;startup time exceeded&#39;, or &#39;running&#39;.\r\n\r\n        setInstanceStatus () {\r\n      instanceStatus=`ec2-describe-instances $INSTANCE_ID -C $CERTIFICATE_FILE -K $PRIVATE_KEY --region $REGION -U $AWS_URL`\r\n    \r\n      is_pending=&quot;`echo $instanceStatus|grep -c &quot; pending &quot;`&quot;\r\n      is_running=&quot;`echo $instanceStatus|grep -c &quot; running &quot;`&quot;\r\n      is_shutting_down=&quot;`echo $instanceStatus|grep -c &quot; shutting-down &quot;`&quot;\r\n      is_terminated=&quot;`echo $instanceStatus|grep -c &quot; terminated &quot;`&quot;\r\n      is_stopping=&quot;`echo $instanceStatus|grep -c &quot; stopping &quot;`&quot;\r\n      is_stopped=&quot;`echo $instanceStatus|grep -c &quot; stopped &quot;`&quot;\r\n    \r\n      if   [ &quot;$is_pending&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;pending&quot;\r\n      elif [  &quot;$is_running&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;running&quot;\r\n      elif [  &quot;$is_shutting_down&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;shutting-down&quot;\r\n      elif [  &quot;$is_terminated&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;terminated&quot;\r\n      elif [  &quot;$is_stopping&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;stopping&quot;\r\n      elif [  &quot;$is_stopped&quot; -eq &quot;1&quot; ]; then\r\n        status=&quot;stopped&quot;\r\n      else\r\n        status=&quot;bad-instance-state&quot;\r\n      fi\r\n    }\r\n\r\n  [1]: http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstances.html\r\n\r\n","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>Actually, you can POLL to find out the status of an instance. Here is some Bash code to do that, just adapt it to JAVA. You MAY have a similar command in the Java SDK so that you don't have to do an execution of Bash from Java. The command 'ec2-describe-instances' comes from the <a href=\"http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-DescribeInstances.html\" rel=\"nofollow\">Amazon AWS CLI</a>. I would start out the function or method to wait for running state to test if instance is 'pending', and fail if it is not starting or 'pending'. Then record the time, and give it a max of let's say 3 minutes, and just keep polling for 'running' status in a loop, checking for the 3 minute limit. Return to the calling point whichever comes first, 'not started','startup time exceeded', or 'running'.</p>\n\n<pre><code>    setInstanceStatus () {\n  instanceStatus=`ec2-describe-instances $INSTANCE_ID -C $CERTIFICATE_FILE -K $PRIVATE_KEY --region $REGION -U $AWS_URL`\n\n  is_pending=\"`echo $instanceStatus|grep -c \" pending \"`\"\n  is_running=\"`echo $instanceStatus|grep -c \" running \"`\"\n  is_shutting_down=\"`echo $instanceStatus|grep -c \" shutting-down \"`\"\n  is_terminated=\"`echo $instanceStatus|grep -c \" terminated \"`\"\n  is_stopping=\"`echo $instanceStatus|grep -c \" stopping \"`\"\n  is_stopped=\"`echo $instanceStatus|grep -c \" stopped \"`\"\n\n  if   [ \"$is_pending\" -eq \"1\" ]; then\n    status=\"pending\"\n  elif [  \"$is_running\" -eq \"1\" ]; then\n    status=\"running\"\n  elif [  \"$is_shutting_down\" -eq \"1\" ]; then\n    status=\"shutting-down\"\n  elif [  \"$is_terminated\" -eq \"1\" ]; then\n    status=\"terminated\"\n  elif [  \"$is_stopping\" -eq \"1\" ]; then\n    status=\"stopping\"\n  elif [  \"$is_stopped\" -eq \"1\" ]; then\n    status=\"stopped\"\n  else\n    status=\"bad-instance-state\"\n  fi\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1712951,"reputation":3348,"user_id":1570601,"accept_rate":50,"display_name":"JRun"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689932341,"creation_date":1689932341,"answer_id":76736795,"question_id":7652247,"body_markdown":"This is what I&#39;m doing. If there&#39;s a more elegant way to do it I would love to see it.\r\n\r\n    \t\tCallable&lt;String&gt; getInstanceMetadata = () -&gt; {\r\n\t\t\t  Instance instance = null;\r\n\t\t\t  while (null == instance) {\r\n\t\t\t\t// Describe the instance to check its state\r\n\t\t\t\tThread.sleep(10 * 1000);\r\n\t\t\t\t//Each reservation is a representation of a request that may be tens of nodes.\r\n\t\t\t\tList&lt;Reservation&gt; reservations = ec2.describeInstances().getReservations();\r\n\t\t\t\t//create a stream of instances from all reservations\r\n\t\t\t\tStream&lt;Instance&gt; instancesStream = reservations.stream().flatMap(reservation -&gt; reservation.getInstances().stream());\r\n\t\t\t\t//filter the stream to find the instance with the instanceId\r\n\t\t\t\tinstance = instancesStream.filter(i -&gt; i.getInstanceId().equals(instanceId)).findFirst().orElse(null);\r\n\t\t\t}\r\n\r\n\t\t\tString publicIp = instance.getPublicIpAddress();\r\n\t\t\tassert instance.getInstanceId() == instanceId;\r\n\r\n\t\t\tlog.debug(&quot;Successfully created ec2 node {} with public IP {}&quot;, instance.getInstanceId(), publicIp);\r\n            return instance.getInstanceId()\r\n\t\t};\r\n\r\n\t\tTimeLimiter timeLimiter = SimpleTimeLimiter.create(Executors.newSingleThreadExecutor());","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>This is what I'm doing. If there's a more elegant way to do it I would love to see it.</p>\n<pre><code>        Callable&lt;String&gt; getInstanceMetadata = () -&gt; {\n          Instance instance = null;\n          while (null == instance) {\n            // Describe the instance to check its state\n            Thread.sleep(10 * 1000);\n            //Each reservation is a representation of a request that may be tens of nodes.\n            List&lt;Reservation&gt; reservations = ec2.describeInstances().getReservations();\n            //create a stream of instances from all reservations\n            Stream&lt;Instance&gt; instancesStream = reservations.stream().flatMap(reservation -&gt; reservation.getInstances().stream());\n            //filter the stream to find the instance with the instanceId\n            instance = instancesStream.filter(i -&gt; i.getInstanceId().equals(instanceId)).findFirst().orElse(null);\n        }\n\n        String publicIp = instance.getPublicIpAddress();\n        assert instance.getInstanceId() == instanceId;\n\n        log.debug(&quot;Successfully created ec2 node {} with public IP {}&quot;, instance.getInstanceId(), publicIp);\n        return instance.getInstanceId()\n    };\n\n    TimeLimiter timeLimiter = SimpleTimeLimiter.create(Executors.newSingleThreadExecutor());\n</code></pre>\n"}],"owner":{"account_id":245126,"reputation":2810,"user_id":518445,"accept_rate":83,"display_name":"kanap008"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3253,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":7655176,"answer_count":3,"score":9,"last_activity_date":1689932341,"creation_date":1317752078,"question_id":7652247,"body_markdown":"I have just started using Amazon EC2 API in Java. \r\n\r\nI have created instances using ec2.runInstances(runInstancesRequest);\r\n\r\nBut it will take some time for the instance to get launched (typically 1-2 mins).\r\nI need to get the public DNS of the machine via Java EC2 API.\r\n\r\nHow do I know when the instances change from &quot;pending&quot; state to &quot;processed&quot; state, and How can I get the public DNS of the EC2 instance through the EC2 API.\r\n\r\nThanks in advance.\r\nKanna","title":"EC2 Java Api Wait till Ec2 Instance gets created.","body":"<p>I have just started using Amazon EC2 API in Java. </p>\n\n<p>I have created instances using ec2.runInstances(runInstancesRequest);</p>\n\n<p>But it will take some time for the instance to get launched (typically 1-2 mins).\nI need to get the public DNS of the machine via Java EC2 API.</p>\n\n<p>How do I know when the instances change from \"pending\" state to \"processed\" state, and How can I get the public DNS of the EC2 instance through the EC2 API.</p>\n\n<p>Thanks in advance.\nKanna</p>\n"},{"tags":["java","servlets","request"],"comments":[{"owner":{"account_id":226074,"reputation":4120,"user_id":486920,"accept_rate":75,"display_name":"ch4nd4n"},"score":0,"creation_date":1358340509,"post_id":14358776,"comment_id":19963375,"body_markdown":"What exactly is the plan to monitor the server call? If this can be delayed job or typical post action analysis job why not use Logger?","body":"What exactly is the plan to monitor the server call? If this can be delayed job or typical post action analysis job why not use Logger?"},{"owner":{"account_id":1073910,"reputation":6049,"user_id":1072484,"accept_rate":71,"display_name":"Peter Wooster"},"score":2,"creation_date":1358340535,"post_id":14358776,"comment_id":19963385,"body_markdown":"and have you determined that those Date instances are costing a lot of cpu time per request?  I suspect it&#39;s a tiny fraction of the socket i/o time.","body":"and have you determined that those Date instances are costing a lot of cpu time per request?  I suspect it&#39;s a tiny fraction of the socket i/o time."},{"owner":{"account_id":226074,"reputation":4120,"user_id":486920,"accept_rate":75,"display_name":"ch4nd4n"},"score":1,"creation_date":1358340644,"post_id":14358776,"comment_id":19963455,"body_markdown":"Exactly, I suspect, creation of 50 to 60 data object is not a big toll on CPU or Memory.","body":"Exactly, I suspect, creation of 50 to 60 data object is not a big toll on CPU or Memory."},{"owner":{"account_id":396855,"reputation":15238,"user_id":760656,"display_name":"Ramesh PVK"},"score":0,"creation_date":1358343019,"post_id":14358776,"comment_id":19964736,"body_markdown":"First of all, what is that you are trying to achieve. Log the time in some log file.","body":"First of all, what is that you are trying to achieve. Log the time in some log file."}],"answers":[{"tags":[],"owner":{"account_id":1932421,"reputation":72673,"user_id":1741542,"accept_rate":75,"display_name":"Olaf Dietsche"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1689932146,"creation_date":1358340564,"answer_id":14358884,"question_id":14358776,"body_markdown":"[HttpServletRequest.getDateHeader](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getDateHeader%28java.lang.String%29) gives you a timestamp as a `long` value.\r\n\r\nAlthough this is from the request header and *not* the received time, it might work since it provides milliseconds since the epoch.\r\n\r\nYou can also look into [Filter](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html), which allows you to \r\n\r\n&gt; Examples that have been identified for this design are:  \r\n1. Authentication Filters  \r\n2. *Logging and Auditing Filters*  \r\n...\r\n\r\n[Event Listeners](http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654) might be another facility, where you can hook into the processing of a servlet.\r\n\r\nBack to your question:\r\n\r\nServletActionContext.getRequest() -&gt; HttpServletRequest.getSession() -&gt; \r\n[HttpSession.getLastAccessedTime](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29)\r\n\r\n&gt; Returns the last time the client sent a request associated with this session, as the number of milliseconds since midnight January 1, 1970 GMT, and marked by the time the container received the request.\r\n","title":"Request receive timestamp w/o application layer code","body":"<p><a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getDateHeader%28java.lang.String%29\" rel=\"nofollow noreferrer\">HttpServletRequest.getDateHeader</a> gives you a timestamp as a <code>long</code> value.</p>\n<p>Although this is from the request header and <em>not</em> the received time, it might work since it provides milliseconds since the epoch.</p>\n<p>You can also look into <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html\" rel=\"nofollow noreferrer\">Filter</a>, which allows you to</p>\n<blockquote>\n<p>Examples that have been identified for this design are:</p>\n</blockquote>\n<ol>\n<li>Authentication Filters</li>\n<li><em>Logging and Auditing Filters</em><br />\n...</li>\n</ol>\n<p><a href=\"http://docs.oracle.com/cd/B15904_01/web.1012/b14017/filters.htm#i1000654\" rel=\"nofollow noreferrer\">Event Listeners</a> might be another facility, where you can hook into the processing of a servlet.</p>\n<p>Back to your question:</p>\n<p>ServletActionContext.getRequest() -&gt; HttpServletRequest.getSession() -&gt;\n<a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpSession.html#getLastAccessedTime%28%29\" rel=\"nofollow noreferrer\">HttpSession.getLastAccessedTime</a></p>\n<blockquote>\n<p>Returns the last time the client sent a request associated with this session, as the number of milliseconds since midnight January 1, 1970 GMT, and marked by the time the container received the request.</p>\n</blockquote>\n"}],"owner":{"account_id":955813,"reputation":417,"user_id":1117189,"accept_rate":35,"display_name":"Zohaib"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5377,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1689932146,"creation_date":1358340254,"question_id":14358776,"body_markdown":"I want to basically monitor the server calls on java side. So is there any way I can directly obtain the timestamp when request was received .\r\n\r\nIn other words,I do not want to explicitly make Date Objects and find out the timestamp. Rather I am interested if there&#39;s any timestamp parameter utility provided with Request Object.\r\n\r\nSomething provided by ServletActionContext.getRequest() or any available solution without the need to code to create Date() objects and find out.\r\n\r\nThe reason I am saying is I have around 50-60 server calls and may be even more in future in my application so each time i need code in application layer rather use this ready-made facility.\r\n","title":"Request receive timestamp w/o application layer code","body":"<p>I want to basically monitor the server calls on java side. So is there any way I can directly obtain the timestamp when request was received .</p>\n\n<p>In other words,I do not want to explicitly make Date Objects and find out the timestamp. Rather I am interested if there's any timestamp parameter utility provided with Request Object.</p>\n\n<p>Something provided by ServletActionContext.getRequest() or any available solution without the need to code to create Date() objects and find out.</p>\n\n<p>The reason I am saying is I have around 50-60 server calls and may be even more in future in my application so each time i need code in application layer rather use this ready-made facility.</p>\n"},{"tags":["java","android","gecko","geckoview"],"answers":[{"tags":[],"owner":{"account_id":11639319,"reputation":1404,"user_id":8524395,"accept_rate":82,"display_name":"Mario"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689931973,"creation_date":1689931545,"answer_id":76736712,"question_id":76734508,"body_markdown":"I finally managed to figure it out, leaving the answer here for anyone else who needs it :)\r\n\r\nSo basically it seems that GeckoView already has some sort of handling for new tab/window creations, you just have to override `onNewSession` in your `GeckoSession.NavigationDelegate` class to load the new session (tab) into your GeckoView view.\r\n\r\nSo this did it for me\r\n```java\r\n@Override\r\npublic GeckoResult&lt;GeckoSession&gt; onNewSession(GeckoSession session, String uri) {\r\n    GeckoSession newSession = new GeckoSession();\r\n    [your GeckoView instance].setSession(newSession);\r\n\r\n    return GeckoResult.fromValue(newSession);\r\n}\r\n```\r\n\r\nIt seems that the `return GeckoResult.fromValue(newSession)` line is like telling GeckoView &quot;Yeah! we&#39;ve created a new session and here it is, please load the new tab  data onto it&quot;\r\n\r\nNote that this will work only for the first attempt to open a new tab/window, then if you try to open another new tab from the first new tab it may stop working. That&#39;s because we have to apply our `GeckoSession.NavigationDelegate` class to the newly creation session(s) as well. Something like this will do\r\n```java\r\nnewSession.setNavigationDelegate([your NavigationDelegate class here]);\r\n```\r\n\r\n---\r\n\r\nThanks to https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181 and https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899 for helping me with this\r\n\r\nAlso it&#39;s safe to not use `onLoadRequest` for this purpose anymore (it&#39;s actually better to remove it if you&#39;re still using it to handle new tabs)","title":"How to handle any new tab/window creations in GeckoView properly?","body":"<p>I finally managed to figure it out, leaving the answer here for anyone else who needs it :)</p>\n<p>So basically it seems that GeckoView already has some sort of handling for new tab/window creations, you just have to override <code>onNewSession</code> in your <code>GeckoSession.NavigationDelegate</code> class to load the new session (tab) into your GeckoView view.</p>\n<p>So this did it for me</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic GeckoResult&lt;GeckoSession&gt; onNewSession(GeckoSession session, String uri) {\n    GeckoSession newSession = new GeckoSession();\n    [your GeckoView instance].setSession(newSession);\n\n    return GeckoResult.fromValue(newSession);\n}\n</code></pre>\n<p>It seems that the <code>return GeckoResult.fromValue(newSession)</code> line is like telling GeckoView &quot;Yeah! we've created a new session and here it is, please load the new tab  data onto it&quot;</p>\n<p>Note that this will work only for the first attempt to open a new tab/window, then if you try to open another new tab from the first new tab it may stop working. That's because we have to apply our <code>GeckoSession.NavigationDelegate</code> class to the newly creation session(s) as well. Something like this will do</p>\n<pre class=\"lang-java prettyprint-override\"><code>newSession.setNavigationDelegate([your NavigationDelegate class here]);\n</code></pre>\n<hr />\n<p>Thanks to <a href=\"https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181\" rel=\"nofollow noreferrer\">https://github.com/mozilla/gecko-dev/blob/241cba7e1f351ddd8a70a8ca05eeb78bca038b75/mobile/android/geckoview_example/src/main/java/org/mozilla/geckoview_example/GeckoViewActivity.java#L2181</a> and <a href=\"https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckoview/issues/142#issuecomment-654211899</a> for helping me with this</p>\n<p>Also it's safe to not use <code>onLoadRequest</code> for this purpose anymore (it's actually better to remove it if you're still using it to handle new tabs)</p>\n"}],"owner":{"account_id":11639319,"reputation":1404,"user_id":8524395,"accept_rate":82,"display_name":"Mario"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736712,"answer_count":1,"score":0,"last_activity_date":1689931973,"creation_date":1689901217,"question_id":76734508,"body_markdown":"So I&#39;ve been trying to power my app using the Mozilla GeckoView package instead of the Google WebView one, and one issue that I am trying to get through is the way new tab or new window creations are handled.\r\n\r\nI looked up the lovely internet about it and all I could find is https://stackoverflow.com/a/76157635/8524395\r\n\r\nWhich by the way is a great example that works fine, However it doesn&#39;t work for example if we do like this:\r\n\r\n```html\r\n&lt;form action=&quot;&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;\r\n    &lt;input type=&quot;submit&quot; name&quot;sbtn&quot; value=&quot;submit&quot; /&gt;\r\n&lt;/form&gt;\r\n```\r\nIn the above HTML code we are submitting a form in a new tab. how can I handle this in my GeckoView session? I searched enough for a way to handle this scenario but all the results were very restrictive.\r\n\r\nCan we maybe get the submitted form data and create the request manually then send the result page to the GeckoView view? Any ideas on how can this be done, or how does Firefox for Android do it?\r\n\r\nAny feedback will be much appreciated :)","title":"How to handle any new tab/window creations in GeckoView properly?","body":"<p>So I've been trying to power my app using the Mozilla GeckoView package instead of the Google WebView one, and one issue that I am trying to get through is the way new tab or new window creations are handled.</p>\n<p>I looked up the lovely internet about it and all I could find is <a href=\"https://stackoverflow.com/a/76157635/8524395\">https://stackoverflow.com/a/76157635/8524395</a></p>\n<p>Which by the way is a great example that works fine, However it doesn't work for example if we do like this:</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;form action=&quot;&quot; method=&quot;post&quot; target=&quot;_blank&quot;&gt;\n    &lt;input type=&quot;submit&quot; name&quot;sbtn&quot; value=&quot;submit&quot; /&gt;\n&lt;/form&gt;\n</code></pre>\n<p>In the above HTML code we are submitting a form in a new tab. how can I handle this in my GeckoView session? I searched enough for a way to handle this scenario but all the results were very restrictive.</p>\n<p>Can we maybe get the submitted form data and create the request manually then send the result page to the GeckoView view? Any ideas on how can this be done, or how does Firefox for Android do it?</p>\n<p>Any feedback will be much appreciated :)</p>\n"},{"tags":["java","spring","maven"],"comments":[{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":1,"creation_date":1498211892,"post_id":44718345,"comment_id":76419126,"body_markdown":"Seems like this class has been removed from SpringBoot 2.x but some dependencies require SpringBoot 1.x. If you don&#39;t require any specific feature of SpringBoot 2, please specify the 1.5.3 version in the POM instead of LATEST.","body":"Seems like this class has been removed from SpringBoot 2.x but some dependencies require SpringBoot 1.x. If you don&#39;t require any specific feature of SpringBoot 2, please specify the 1.5.3 version in the POM instead of LATEST."},{"owner":{"account_id":4862517,"reputation":1544,"user_id":3921725,"display_name":"Alex Roig"},"score":0,"creation_date":1498211899,"post_id":44718345,"comment_id":76419134,"body_markdown":"Related issue: https://stackoverflow.com/questions/44031949/spring-boot-2-0-0-m1-where-is-the-package-org-springframework-bind","body":"Related issue: <a href=\"https://stackoverflow.com/questions/44031949/spring-boot-2-0-0-m1-where-is-the-package-org-springframework-bind\" title=\"spring boot 2 0 0 m1 where is the package org springframework bind\">stackoverflow.com/questions/44031949/&hellip;</a>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":7,"creation_date":1498212640,"post_id":44718345,"comment_id":76419610,"body_markdown":"Using LATEST is a very bad idea to manage your dependencies. Use an explicit version.","body":"Using LATEST is a very bad idea to manage your dependencies. Use an explicit version."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498217982,"post_id":44718345,"comment_id":76423105,"body_markdown":"@AlexRoig thw it worked but i have an other error that i never had before :  java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.SerializationConfig it will be solved by adding the corresponding dependency but i never used jackson before and it was working perfectly can you explain why ?","body":"@AlexRoig thw it worked but i have an other error that i never had before :  java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.SerializationConfig it will be solved by adding the corresponding dependency but i never used jackson before and it was working perfectly can you explain why ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1498222892,"post_id":44718345,"comment_id":76426344,"body_markdown":"Where on earth is Spring 5 coming from?! As stated don&#39;t use LATEST you probably overriding/messing with dependencies in one of your other modules, don&#39;t. You want to use Spring Boot then let boot manage the dependencies for you.","body":"Where on earth is Spring 5 coming from?! As stated don&#39;t use LATEST you probably overriding/messing with dependencies in one of your other modules, don&#39;t. You want to use Spring Boot then let boot manage the dependencies for you."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498223566,"post_id":44718345,"comment_id":76426821,"body_markdown":"@M.Deinum i removed all the latest !","body":"@M.Deinum i removed all the latest !"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498223678,"post_id":44718345,"comment_id":76426906,"body_markdown":"In this one but you have 4 child projects. Also make sure you don&#39;t have mixed versions of spring boot, have a `spring.version` property etc.","body":"In this one but you have 4 child projects. Also make sure you don&#39;t have mixed versions of spring boot, have a <code>spring.version</code> property etc."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498224600,"post_id":44718345,"comment_id":76427543,"body_markdown":"@M.Deinum yeah thx i&#39;ve found in an other child a redefinition of spring dependency ! I&#39;ve some thing now i can&#39;t launch the app two times in a raw it says that the local host 8080 is already in use i have to close eclipse and launch again maybe you know why ?","body":"@M.Deinum yeah thx i&#39;ve found in an other child a redefinition of spring dependency ! I&#39;ve some thing now i can&#39;t launch the app two times in a raw it says that the local host 8080 is already in use i have to close eclipse and launch again maybe you know why ?"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1498224877,"post_id":44718345,"comment_id":76427727,"body_markdown":"Because you cannot have 2 processes on the same port.","body":"Because you cannot have 2 processes on the same port."},{"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"score":0,"creation_date":1498225158,"post_id":44718345,"comment_id":76427911,"body_markdown":"and you know how to stop or kill the process automatically after executing the app ?","body":"and you know how to stop or kill the process automatically after executing the app ?"},{"owner":{"account_id":1553846,"reputation":375,"user_id":1445585,"accept_rate":80,"display_name":"Meadowlark Bradsher"},"score":0,"creation_date":1646441047,"post_id":44718345,"comment_id":126131484,"body_markdown":"What is the original problem statement here?","body":"What is the original problem statement here?"}],"answers":[{"tags":[],"owner":{"account_id":1848023,"reputation":3458,"user_id":1841143,"accept_rate":78,"display_name":"Haozhe Xie"},"down_vote_count":1,"up_vote_count":179,"is_accepted":true,"score":178,"last_activity_date":1517499125,"creation_date":1517499125,"answer_id":48566390,"question_id":44718345,"body_markdown":"Try to use the latest `com.fasterxml.jackson.core/jackson-databind`.\r\nI upgraded it to `2.9.4` and it works now.\r\n\r\n    &lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.9.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Try to use the latest <code>com.fasterxml.jackson.core/jackson-databind</code>.\nI upgraded it to <code>2.9.4</code> and it works now.</p>\n\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.9.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3333666,"reputation":2544,"user_id":2801909,"accept_rate":33,"display_name":"Vijay Nandwana"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531989514,"creation_date":1531989514,"answer_id":51418031,"question_id":44718345,"body_markdown":"If issue remains even after updating dependency version, then delete everything present under  \r\n C:\\Users\\\\[your_username]\\\\.m2\\repository\\com\\fasterxml\r\n\r\nAnd, make sure following dependencies are present:\r\n\r\n                &lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;\r\n    \r\n    \t\t\t&lt;dependency&gt;\r\n    \t\t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;${jackson.version}&lt;/version&gt;\r\n    \t\t\t&lt;/dependency&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>If issue remains even after updating dependency version, then delete everything present under<br>\n C:\\Users\\[your_username]\\.m2\\repository\\com\\fasterxml</p>\n\n<p>And, make sure following dependencies are present:</p>\n\n<pre><code>            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n\n            &lt;dependency&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n                &lt;version&gt;${jackson.version}&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10872990,"reputation":1661,"user_id":7994269,"display_name":"Jorge Santos Neill"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1536430255,"creation_date":1536430255,"answer_id":52238084,"question_id":44718345,"body_markdown":"Replace the dependency in the POM.xml file\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n      &lt;version&gt;2.2.3&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBy the dependency\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Replace the dependency in the POM.xml file</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n  &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n  &lt;version&gt;2.2.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>By the dependency</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14531023,"reputation":193,"user_id":10495955,"display_name":"Krishna Chaitanya V"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1539805946,"creation_date":1539802618,"answer_id":52861824,"question_id":44718345,"body_markdown":"Use all the jackson dependencies(databind,core, annotations, scala(if you are using spark and scala)) with the same version.. and upgrade the versions to the latest releases..\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\r\n                &lt;version&gt;2.9.4&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    \r\n            &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;version&gt;2.9.4&lt;/version&gt;\r\n    \r\n            &lt;/dependency&gt;\r\nNote: Use Scala dependency only if you are working with scala. Otherwise it is not needed.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Use all the jackson dependencies(databind,core, annotations, scala(if you are using spark and scala)) with the same version.. and upgrade the versions to the latest releases..</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.module&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-module-scala_2.11&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;exclusions&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n            &lt;exclusion&gt;\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n        &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;version&gt;2.9.4&lt;/version&gt;\n\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>Note: Use Scala dependency only if you are working with scala. Otherwise it is not needed.</p>\n"},{"tags":[],"owner":{"account_id":16921011,"reputation":2463,"user_id":12237837,"display_name":"Aditya Rewari"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1572297686,"creation_date":1572297686,"answer_id":58598578,"question_id":44718345,"body_markdown":"Worked by lowering the spring boot starter parent to 1.5.13\r\n\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.5.13.RELEASE&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>Worked by lowering the spring boot starter parent to 1.5.13</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.13.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8652819,"reputation":1174,"user_id":6477946,"display_name":"Rajneesh Shukla"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593004530,"creation_date":1593004530,"answer_id":62555969,"question_id":44718345,"body_markdown":"I also have the same error. I have updated the jackson library version and error has gone.\r\n\r\n    &lt;!-- Jackson to convert Java object to Json --&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.9.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.9.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n\r\nand also check your data classes that have you created getters and setters for all the properties.\r\n\r\n","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I also have the same error. I have updated the jackson library version and error has gone.</p>\n<pre><code>&lt;!-- Jackson to convert Java object to Json --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n            &lt;version&gt;2.9.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>and also check your data classes that have you created getters and setters for all the properties.</p>\n"},{"tags":[],"owner":{"account_id":2839356,"reputation":2154,"user_id":2439249,"display_name":"ozeray"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1635929183,"creation_date":1635929183,"answer_id":69821929,"question_id":44718345,"body_markdown":"This problem seems to be solved in latest versions of Spring Boot. If you are still facing it, there is a strong possibility that same Jackson artifacts are defined in other libraries you use, thereby transitively causing conflicts in your application.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>This problem seems to be solved in latest versions of Spring Boot. If you are still facing it, there is a strong possibility that same Jackson artifacts are defined in other libraries you use, thereby transitively causing conflicts in your application.</p>\n"},{"tags":[],"owner":{"account_id":11389854,"reputation":6022,"user_id":8370915,"display_name":"invzbl3"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661214241,"creation_date":1661214241,"answer_id":73452184,"question_id":44718345,"body_markdown":"I&#39;ve reproduced the same issue:\r\n\r\n    java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n\r\nwith dependencies like:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.5.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nand:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.8.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nTo fix it you can use these versions of dependencies:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n            &lt;version&gt;2.10.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\nor:\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.12.1&lt;/version&gt;\r\n        &lt;/dependency&gt; ","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I've reproduced the same issue:</p>\n<pre><code>java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n</code></pre>\n<p>with dependencies like:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.5.2&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>and:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>To fix it you can use these versions of dependencies:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n        &lt;version&gt;2.10.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>or:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;version&gt;2.12.1&lt;/version&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689931970,"creation_date":1689931970,"answer_id":76736756,"question_id":44718345,"body_markdown":"I got 2 main differences that caused issues when I compared my working configuration dependency tree with new configuration dependency tree for jackson..\r\nTo get Dependency tree::(look for differences and get to solution)\r\nmvn dependency:tree\r\n\r\nWhat worked for me after comparing differences::\r\n1. updated child dependency of jackson-bind -&gt; jackson-core and jackson-annotations\r\n2. Excluded jackson-module-jaxb-annotations from org.glassfish.jersey.media and included new version dependency for same.","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I got 2 main differences that caused issues when I compared my working configuration dependency tree with new configuration dependency tree for jackson..\nTo get Dependency tree::(look for differences and get to solution)\nmvn dependency:tree</p>\n<p>What worked for me after comparing differences::</p>\n<ol>\n<li>updated child dependency of jackson-bind -&gt; jackson-core and jackson-annotations</li>\n<li>Excluded jackson-module-jaxb-annotations from org.glassfish.jersey.media and included new version dependency for same.</li>\n</ol>\n"}],"owner":{"account_id":9849441,"reputation":1502,"user_id":7295936,"accept_rate":38,"display_name":"FrozzenFinger"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":243661,"favorite_count":0,"down_vote_count":2,"up_vote_count":100,"accepted_answer_id":48566390,"answer_count":9,"score":98,"last_activity_date":1689931970,"creation_date":1498211348,"question_id":44718345,"body_markdown":"I have updated my dependecies like you said in your comment and i have this now :\r\n\r\n\r\n    org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat com.o2xp.ats.accountManager.test.App.main(App.java:42) [classes/:na]\r\n    Caused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \t... 8 common frames omitted\r\n    Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;httpPutFormContentFilter&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:586) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1262) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1110) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:305) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:233) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:303) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_131]\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_131]\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_131]\r\n    \tat java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_131]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:182) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:575) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \t... 26 common frames omitted\r\n    Caused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\r\n    \tat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:67) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338$$FastClassBySpringCGLIB$$3e6bfe4d.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:359) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\r\n    \tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:155) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\r\n    \t... 27 common frames omitted\r\n    Caused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException\r\n    \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_131]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_131]\r\n    \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) ~[na:1.8.0_131]\r\n    \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_131]\r\n    \t... 41 common frames omitted\r\n\r\nAnd ther is my new pom : \r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n      &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n       &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.8&lt;/source&gt;\r\n                        &lt;target&gt;1.8&lt;/target&gt;   \r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n               &lt;plugin&gt;\r\n                  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \r\n                  &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n               &lt;/plugin&gt;\r\n           &lt;/plugins&gt;\r\n       &lt;/build&gt;\r\n      &lt;packaging&gt;pom&lt;/packaging&gt;\r\n      &lt;groupId&gt;com.o2xp&lt;/groupId&gt;\r\n      &lt;artifactId&gt;ats-impl&lt;/artifactId&gt;\r\n      &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n      &lt;name&gt;ats-impl&lt;/name&gt;\r\n      &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n      &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n      &lt;/properties&gt;\r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n          &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.1.0.Final&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n        \t&lt;groupId&gt;io.github.jhipster&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;jhipster&lt;/artifactId&gt;\r\n        \t&lt;version&gt;1.1.6&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n       &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;spring-releases&lt;/id&gt;\r\n                &lt;name&gt;Spring Releases&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;org.jboss.repository.releases&lt;/id&gt;\r\n                &lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;\r\n                &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n            &lt;repository&gt;\r\n            \t&lt;id&gt;spring-milestone&lt;/id&gt;\r\n            \t&lt;name&gt;Spring Milestone Repository&lt;/name&gt;\r\n            \t&lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;pluginRepositories&gt;\r\n            &lt;pluginRepository&gt;\r\n                &lt;id&gt;spring-releases&lt;/id&gt;\r\n                &lt;name&gt;Spring Releases&lt;/name&gt;\r\n                &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\r\n            &lt;/pluginRepository&gt;\r\n        &lt;/pluginRepositories&gt;\r\n      &lt;modules&gt;\r\n        &lt;module&gt;ats-application-context&lt;/module&gt;\r\n        &lt;module&gt;ats-notice-manager&lt;/module&gt;\r\n        &lt;module&gt;ats-common&lt;/module&gt;\r\n        &lt;module&gt;ats-accountManager&lt;/module&gt;\r\n      &lt;/modules&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\ni have to precise that i never used jackson and it was working verry well. Maybe it&#39;s cause auf spring 5 ?","title":"Java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException","body":"<p>I have updated my dependecies like you said in your comment and i have this now :</p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:536) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:737) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:370) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:314) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1162) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1151) [spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at com.o2xp.ats.accountManager.test.App.main(App.java:42) [classes/:na]\nCaused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    ... 8 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'httpPutFormContentFilter' defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:586) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1262) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1110) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:305) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:233) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:303) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.14.jar:8.5.14]\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266) ~[na:1.8.0_131]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) ~[na:1.8.0_131]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) ~[na:1.8.0_131]\n    at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_131]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:182) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:575) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    ... 26 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: com/fasterxml/jackson/databind/exc/InvalidDefinitionException\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:67) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.3.RELEASE.jar:1.5.3.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338$$FastClassBySpringCGLIB$$3e6bfe4d.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:359) ~[spring-context-5.0.0.RC2.jar:5.0.0.RC2]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d0610338.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.4.RELEASE.jar:1.5.4.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_131]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_131]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_131]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_131]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:155) ~[spring-beans-5.0.0.RC2.jar:5.0.0.RC2]\n    ... 27 common frames omitted\nCaused by: java.lang.ClassNotFoundException: com.fasterxml.jackson.databind.exc.InvalidDefinitionException\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381) ~[na:1.8.0_131]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424) ~[na:1.8.0_131]\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:335) ~[na:1.8.0_131]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357) ~[na:1.8.0_131]\n    ... 41 common frames omitted\n</code></pre>\n\n<p>And ther is my new pom : </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n   &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;   \n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n           &lt;plugin&gt;\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;  \n              &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n           &lt;/plugin&gt;\n       &lt;/plugins&gt;\n   &lt;/build&gt;\n  &lt;packaging&gt;pom&lt;/packaging&gt;\n  &lt;groupId&gt;com.o2xp&lt;/groupId&gt;\n  &lt;artifactId&gt;ats-impl&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;name&gt;ats-impl&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n  &lt;/properties&gt;\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n      &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n        &lt;version&gt;1.5.3.RELEASE&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n        &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n        &lt;version&gt;1.1.0.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.jhipster&lt;/groupId&gt;\n        &lt;artifactId&gt;jhipster&lt;/artifactId&gt;\n        &lt;version&gt;1.1.6&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n   &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;name&gt;Spring Releases&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;org.jboss.repository.releases&lt;/id&gt;\n            &lt;name&gt;JBoss Maven Release Repository&lt;/name&gt;\n            &lt;url&gt;https://repository.jboss.org/nexus/content/repositories/releases&lt;/url&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestone&lt;/id&gt;\n            &lt;name&gt;Spring Milestone Repository&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-releases&lt;/id&gt;\n            &lt;name&gt;Spring Releases&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/libs-release&lt;/url&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n  &lt;modules&gt;\n    &lt;module&gt;ats-application-context&lt;/module&gt;\n    &lt;module&gt;ats-notice-manager&lt;/module&gt;\n    &lt;module&gt;ats-common&lt;/module&gt;\n    &lt;module&gt;ats-accountManager&lt;/module&gt;\n  &lt;/modules&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>i have to precise that i never used jackson and it was working verry well. Maybe it's cause auf spring 5 ?</p>\n"},{"tags":["java","spring","intellij-idea","keycloak"],"owner":{"account_id":25602430,"reputation":1,"user_id":19377189,"display_name":"Aji Codi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689931910,"creation_date":1689764860,"question_id":76720653,"body_markdown":"After requesting the endpoint: `http://localhost:8083/microservice1/home`, once the *client credentials flow* chapter implemented of [this video][1], I get the following answer:\r\n```\r\nLogin ith OAuth 2.0\r\n```\r\ninstead of the expected one [from here][2]\r\nI tried to debug via Intellij, and run the request, but I don&#39;t know why It doesn&#39;t stop in breakpoints\r\n\r\n  [1]: https://www.youtube.com/watch?v=t9O99l4gjAc\r\n  [2]: https://github.com/onepseudoxy/spring-security-oauth2-keycloak-demo\r\n\r\n","title":"Unexpected response after requesting home page spring + keycloak app","body":"<p>After requesting the endpoint: <code>http://localhost:8083/microservice1/home</code>, once the <em>client credentials flow</em> chapter implemented of <a href=\"https://www.youtube.com/watch?v=t9O99l4gjAc\" rel=\"nofollow noreferrer\">this video</a>, I get the following answer:</p>\n<pre><code>Login ith OAuth 2.0\n</code></pre>\n<p>instead of the expected one <a href=\"https://github.com/onepseudoxy/spring-security-oauth2-keycloak-demo\" rel=\"nofollow noreferrer\">from here</a>\nI tried to debug via Intellij, and run the request, but I don't know why It doesn't stop in breakpoints</p>\n"},{"tags":["java","multithreading","selenium","automated-tests","thread-local"],"answers":[{"tags":[],"owner":{"account_id":4895787,"reputation":10833,"user_id":3945473,"display_name":"M.P. Korstanje"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1689931480,"creation_date":1609607203,"answer_id":65541795,"question_id":65541200,"body_markdown":"It depends.\r\n\r\nWhen using a static field, there is only a single instance of that field in the JVM. It refers to one specific address in memory. Unlike the field of an object which refers to a field of a specific object and for each object there is a unique address in memory for that field.\r\n\r\nWhen using a `ThreadLocal` each thread has its own instance of the variable.\r\n\r\nSo by using `static WebDriver driver` you have exactly one webdriver for all tests and all threads. By using `static ThreadLocal&lt;WebDriver&gt; driver` you have exactly one  webdriver for each thread, effectively sharing the webdriver between scenarios that are executed on that thread.\r\n\r\nWhen executing tests in parallel there are multiple threads executing scenarios so a single webdriver would be a problem. Scenarios running in parallel would make the webdriver do different things at the same time or they&#39;d have to wait for the webdriver to be available, making them effectively run serially again.\r\n\r\nSo if a webdriver is to be shared between scenarios and if those scenarios run in parallel you have to use a `ThreadLocal`.\r\n\r\nHowever it appears that are unfamiliar with programming concurrent systems. So you may want to consider a different approach. Rather then sharing the webdriver between scenarios, consider starting a new webdriver in each scenario instead. This is much safer and from a test perspective much cleaner because each scenario starts without any state from the previous scenario.\r\n\r\nThis means you now have the problem of sharing information between steps. You were using a static field to share to share the webdriver. But you can&#39;t use use static fields because there are now multiple threads running.\r\n\r\nTo solve this problem Cucumber supports dependency injection. The easiest to use is probably [cucumber-pico][1]. When using dependency injection cucumber will instantiate each step definition class for each scenario with a isolated set of dependencies.\r\n\r\n```xml\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\r\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\nSo for example when your step definitions depend on a `WebDriverFactory`, cucumber will instantiate a `WebDriverFactory` for you and instantiate both `StepDefinition` and `OtherStepDefinition` with the same factory. \r\n\r\n\r\n```java\r\npublic class StepDefinition {\r\n\r\n    private final WebDriverFactory webdriverFactory;\r\n\r\n    public StepDefinitions(WebDriverFactory webdriverFactory) {\r\n        this.webdriverFactory = webdriverFactory;\r\n    }\r\n\r\n    @Given(&quot;I do a thing with a webdriver&quot;)\r\n    public void useTheWebDriver() {\r\n        // get the webdriver from the factory and use it\r\n    }\r\n\r\n}\r\n\r\npublic class OtherStepDefinition {\r\n\r\n    private final WebDriverFactory webdriverFactory; // Same instance as in StepDefinition\r\n\r\n    public OtherStepDefinition(WebDriverFactory webdriverFactory) {\r\n        this.webdriverFactory = webdriverFactory; \r\n    }\r\n\r\n    @Given(&quot;I do another thing with a webdriver&quot;)\r\n    public void useTheWebDriver() {\r\n        // get the webdriver from the factory and use it\r\n    }\r\n\r\n}\r\n```\r\n\r\nThen in the web driver factory you keep a reference to the webdriver for use in both step definitions.\r\n\r\n```\r\npublic class WebDriverFactory implements Startable {\r\n\r\n    private WebDriver driver;\r\n\r\n    public setDriver(String browser) {\r\n        // create the web driver here \r\n    }\r\n\r\n    public WebDriver getDriver(){\r\n        return driver;\r\n    }\r\n\r\n    public void start() { \r\n      // do nothing\r\n    } \r\n    \r\n    public void stop() { \r\n       // stop web driver if it was created\r\n    } \r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/cucumber/cucumber-jvm/tree/main/picocontainer","title":"Is ThreadLocal required for automation framework that uses Cucumber, Jmeter and FailSafe?","body":"<p>It depends.</p>\n<p>When using a static field, there is only a single instance of that field in the JVM. It refers to one specific address in memory. Unlike the field of an object which refers to a field of a specific object and for each object there is a unique address in memory for that field.</p>\n<p>When using a <code>ThreadLocal</code> each thread has its own instance of the variable.</p>\n<p>So by using <code>static WebDriver driver</code> you have exactly one webdriver for all tests and all threads. By using <code>static ThreadLocal&lt;WebDriver&gt; driver</code> you have exactly one  webdriver for each thread, effectively sharing the webdriver between scenarios that are executed on that thread.</p>\n<p>When executing tests in parallel there are multiple threads executing scenarios so a single webdriver would be a problem. Scenarios running in parallel would make the webdriver do different things at the same time or they'd have to wait for the webdriver to be available, making them effectively run serially again.</p>\n<p>So if a webdriver is to be shared between scenarios and if those scenarios run in parallel you have to use a <code>ThreadLocal</code>.</p>\n<p>However it appears that are unfamiliar with programming concurrent systems. So you may want to consider a different approach. Rather then sharing the webdriver between scenarios, consider starting a new webdriver in each scenario instead. This is much safer and from a test perspective much cleaner because each scenario starts without any state from the previous scenario.</p>\n<p>This means you now have the problem of sharing information between steps. You were using a static field to share to share the webdriver. But you can't use use static fields because there are now multiple threads running.</p>\n<p>To solve this problem Cucumber supports dependency injection. The easiest to use is probably <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/picocontainer\" rel=\"nofollow noreferrer\">cucumber-pico</a>. When using dependency injection cucumber will instantiate each step definition class for each scenario with a isolated set of dependencies.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-picocontainer&lt;/artifactId&gt;\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>So for example when your step definitions depend on a <code>WebDriverFactory</code>, cucumber will instantiate a <code>WebDriverFactory</code> for you and instantiate both <code>StepDefinition</code> and <code>OtherStepDefinition</code> with the same factory.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class StepDefinition {\n\n    private final WebDriverFactory webdriverFactory;\n\n    public StepDefinitions(WebDriverFactory webdriverFactory) {\n        this.webdriverFactory = webdriverFactory;\n    }\n\n    @Given(&quot;I do a thing with a webdriver&quot;)\n    public void useTheWebDriver() {\n        // get the webdriver from the factory and use it\n    }\n\n}\n\npublic class OtherStepDefinition {\n\n    private final WebDriverFactory webdriverFactory; // Same instance as in StepDefinition\n\n    public OtherStepDefinition(WebDriverFactory webdriverFactory) {\n        this.webdriverFactory = webdriverFactory; \n    }\n\n    @Given(&quot;I do another thing with a webdriver&quot;)\n    public void useTheWebDriver() {\n        // get the webdriver from the factory and use it\n    }\n\n}\n</code></pre>\n<p>Then in the web driver factory you keep a reference to the webdriver for use in both step definitions.</p>\n<pre><code>public class WebDriverFactory implements Startable {\n\n    private WebDriver driver;\n\n    public setDriver(String browser) {\n        // create the web driver here \n    }\n\n    public WebDriver getDriver(){\n        return driver;\n    }\n\n    public void start() { \n      // do nothing\n    } \n    \n    public void stop() { \n       // stop web driver if it was created\n    } \n}\n</code></pre>\n"}],"owner":{"account_id":4777108,"reputation":89,"user_id":3859913,"display_name":"Oasis001"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2025,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":65541795,"answer_count":1,"score":4,"last_activity_date":1689931480,"creation_date":1609603495,"question_id":65541200,"body_markdown":"Sorry if this question sounds silly.\r\nWe are developing an automation framework that would use Java,Cucumber, Junit and Failsafe suite etc.\r\nThere&#39;s been a suggestion to use ThreadLocal. But I am bit confused as why we need to use ThreadLocal when Junit runs the cucumber features in its own threads..\r\n\r\nThe suggestion was to use ThreadLocal as shown below;-\r\n\r\n\r\n    public class WebDriverFactory {\r\n    \r\n        private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\r\n    \r\n        public static synchronized void setDriver(String browser) {\r\n    \r\n            switch (browser) {\r\n                case &quot;chrome&quot;:\r\n                    driver = ThreadLocal.withInitial(() -&gt; {\r\n                        WebDriverManager.chromedriver().setup();\r\n                        return new ChromeDriver(BrowserOptions.getChromeOptions());\r\n                    });\r\n            \r\n                    break;\r\n               \r\n                default:\r\n                    throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\r\n            }\r\n        }\r\n  \r\n        public static synchronized WebDriver getDriver(){\r\n            return driver.get();\r\n        }\r\n\r\n\r\nCan anyone confirm if this is really required to run tests parallelly.? Also, is &#39;synchronized&#39; required when using ThreadLocal?","title":"Is ThreadLocal required for automation framework that uses Cucumber, Jmeter and FailSafe?","body":"<p>Sorry if this question sounds silly.\nWe are developing an automation framework that would use Java,Cucumber, Junit and Failsafe suite etc.\nThere's been a suggestion to use ThreadLocal. But I am bit confused as why we need to use ThreadLocal when Junit runs the cucumber features in its own threads..</p>\n<p>The suggestion was to use ThreadLocal as shown below;-</p>\n<pre><code>public class WebDriverFactory {\n\n    private static ThreadLocal&lt;WebDriver&gt; driver = new ThreadLocal&lt;&gt;();\n\n    public static synchronized void setDriver(String browser) {\n\n        switch (browser) {\n            case &quot;chrome&quot;:\n                driver = ThreadLocal.withInitial(() -&gt; {\n                    WebDriverManager.chromedriver().setup();\n                    return new ChromeDriver(BrowserOptions.getChromeOptions());\n                });\n        \n                break;\n           \n            default:\n                throw new IllegalStateException(&quot;Unexpected value: &quot; + browser);\n        }\n    }\n\n    public static synchronized WebDriver getDriver(){\n        return driver.get();\n    }\n</code></pre>\n<p>Can anyone confirm if this is really required to run tests parallelly.? Also, is 'synchronized' required when using ThreadLocal?</p>\n"},{"tags":["java","mysql","hibernate","mysql-8.0"],"answers":[{"tags":[],"owner":{"account_id":40939,"reputation":41525,"user_id":118846,"display_name":"Mikko Maunu"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1557069455,"creation_date":1557069455,"answer_id":55993485,"question_id":55991050,"body_markdown":"According pom.xml you are currently using Hibernate 5.2.12. From [5.2 Javadocs][1] one can see that it does not have `MySQL8Dialect`. \r\n\r\n[MySQL8Dialect][2] was introduced in Hibernate 5.3 (see [Javadoc][2]). Problem can be solved by updating to Hibernate to [5.3][3] or to [5.4][4].\r\n\r\nIf updating Hibernate is not an option, then one must create custom dialect. That can be as easy as simply copying `MySQL8Dialect.java` from newer version to your code base and referencing it from persistence.xml. Potentially minor modifications are necessary.\r\n\r\n\r\n  [1]: https://docs.jboss.org/hibernate/orm/5.2/javadocs/\r\n  [2]: https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\r\n  [3]: https://hibernate.org/orm/releases/5.3/\r\n  [4]: https://hibernate.org/orm/releases/5.4/","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p>According pom.xml you are currently using Hibernate 5.2.12. From <a href=\"https://docs.jboss.org/hibernate/orm/5.2/javadocs/\" rel=\"nofollow noreferrer\">5.2 Javadocs</a> one can see that it does not have <code>MySQL8Dialect</code>. </p>\n\n<p><a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\" rel=\"nofollow noreferrer\">MySQL8Dialect</a> was introduced in Hibernate 5.3 (see <a href=\"https://docs.jboss.org/hibernate/orm/5.3/javadocs/org/hibernate/dialect/MySQL8Dialect.html\" rel=\"nofollow noreferrer\">Javadoc</a>). Problem can be solved by updating to Hibernate to <a href=\"https://hibernate.org/orm/releases/5.3/\" rel=\"nofollow noreferrer\">5.3</a> or to <a href=\"https://hibernate.org/orm/releases/5.4/\" rel=\"nofollow noreferrer\">5.4</a>.</p>\n\n<p>If updating Hibernate is not an option, then one must create custom dialect. That can be as easy as simply copying <code>MySQL8Dialect.java</code> from newer version to your code base and referencing it from persistence.xml. Potentially minor modifications are necessary.</p>\n"},{"tags":[],"owner":{"account_id":24323906,"reputation":128,"user_id":18263761,"display_name":"ilia"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1666380317,"creation_date":1666380317,"answer_id":74158365,"question_id":55991050,"body_markdown":"\r\n[![S][1]][1]\r\n\r\nBasically  if you use spring boot, you don&#39;t need to define Dialect on the properties file because boot will automatically define itself\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ulkki.png\r\n  [2]: https://i.stack.imgur.com/7meF9.png","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p><a href=\"https://i.stack.imgur.com/ulkki.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ulkki.png\" alt=\"S\" /></a></p>\n<p>Basically  if you use spring boot, you don't need to define Dialect on the properties file because boot will automatically define itself</p>\n<p><a href=\"https://i.stack.imgur.com/7meF9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7meF9.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":6833305,"reputation":3084,"user_id":5256337,"display_name":"Lova Chittumuri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689931264,"creation_date":1689931264,"answer_id":76736679,"question_id":55991050,"body_markdown":"&gt; please provide the new mysql 8 dialect to resolve this\r\n&gt; issue.\r\n\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<blockquote>\n<p>please provide the new mysql 8 dialect to resolve this\nissue.</p>\n</blockquote>\n<pre><code>spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect\n</code></pre>\n"}],"owner":{"account_id":11336250,"reputation":47,"user_id":8312008,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10235,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":55993485,"answer_count":3,"score":2,"last_activity_date":1689931264,"creation_date":1557052333,"question_id":55991050,"body_markdown":"I received an exception when starting the application:\r\n\r\n    Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect] as strategy [org.hibernate.dialect.Dialect]\r\n\tat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:126)\r\n\r\nI am using MySQL 8.0.\r\n  \r\npom.xml:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n        &lt;version&gt;5.2.12.Final&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n        &lt;version&gt;8.0.15&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\nhibernate.cfg.xml:\r\n\r\n        &lt;property name=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.driver_class&quot;&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.url&quot;&gt;jdbc:mysql://localhost/botdb?serverTimezone=UTC&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.username&quot;&gt;root&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.password&quot;&gt;password&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.show_sql&quot;&gt;true&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.connection.useSSL&quot;&gt;false&lt;/property&gt;\r\n        &lt;property name=&quot;hibernate.enable_lazy_load_no_trans&quot;&gt;true&lt;/property&gt;","title":"How fix &quot;org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect]&quot;?","body":"<p>I received an exception when starting the application:</p>\n\n<pre><code>Caused by: org.hibernate.boot.registry.selector.spi.StrategySelectionException: Unable to resolve name [org.hibernate.dialect.MySQL8Dialect] as strategy [org.hibernate.dialect.Dialect]\nat org.hibernate.boot.registry.selector.internal.StrategySelectorImpl.selectStrategyImplementor(StrategySelectorImpl.java:126)\n</code></pre>\n\n<p>I am using MySQL 8.0.</p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n    &lt;version&gt;5.2.12.Final&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;mysql&lt;/groupId&gt;\n    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n    &lt;version&gt;8.0.15&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>hibernate.cfg.xml:</p>\n\n<pre><code>    &lt;property name=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL8Dialect&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.driver_class\"&gt;com.mysql.cj.jdbc.Driver&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.url\"&gt;jdbc:mysql://localhost/botdb?serverTimezone=UTC&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.username\"&gt;root&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.password\"&gt;password&lt;/property&gt;\n    &lt;property name=\"hibernate.show_sql\"&gt;true&lt;/property&gt;\n    &lt;property name=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/property&gt;\n    &lt;property name=\"hibernate.connection.useSSL\"&gt;false&lt;/property&gt;\n    &lt;property name=\"hibernate.enable_lazy_load_no_trans\"&gt;true&lt;/property&gt;\n</code></pre>\n"},{"tags":["java","jexl"],"comments":[{"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"score":0,"creation_date":1689802893,"post_id":76725359,"comment_id":135267046,"body_markdown":"Probability that the last ten bits flip from changing the last bit is with the rotation is much worse without the rotation","body":"Probability that the last ten bits flip from changing the last bit is with the rotation is much worse without the rotation"},{"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"score":0,"creation_date":1689872255,"post_id":76725359,"comment_id":135278197,"body_markdown":"Gave up. Changed it.\n```\nboolean wasNegative = (state &lt; 0);\n state &amp;= 9223372036854775807L;\n long last7 = state &amp; 127;\n state &gt;&gt;= 7;\n state += last7 &lt;&lt; 56;\n if(wasNegative)\n {\n state = -state;\n }\n```\n\nand this in JEXL\n\n```\nif(state&lt;0)\n{\n state = state &amp; 9223372036854775807L;\n last7 = state &amp; 127;\n state = state / 128;\n state = state + last7 * 72057594037927936L;\n state = -state;\n}\nelse\n{\n state = state &amp; 9223372036854775807L;\n last7 = state &amp; 127;\n state = state / 128;\n state = state + last7 * 72057594037927936L;\n}\n\nreturn state + 0;\n```","body":"Gave up. Changed it. ``` boolean wasNegative = (state &lt; 0);  state &amp;= 9223372036854775807L;  long last7 = state &amp; 127;  state &gt;&gt;= 7;  state += last7 &lt;&lt; 56;  if(wasNegative)  {  state = -state;  } ```  and this in JEXL  ``` if(state&lt;0) {  state = state &amp; 9223372036854775807L;  last7 = state &amp; 127;  state = state / 128;  state = state + last7 * 72057594037927936L;  state = -state; } else {  state = state &amp; 9223372036854775807L;  last7 = state &amp; 127;  state = state / 128;  state = state + last7 * 72057594037927936L; }  return state + 0; ```"}],"answers":[{"tags":[],"owner":{"account_id":11845668,"reputation":187,"user_id":8668250,"display_name":"henrib"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689931250,"creation_date":1689931250,"answer_id":76736678,"question_id":76725359,"body_markdown":"I&#39;d recommend using JEXL 3.3 instead which does implement the bitshift operators. The following example works in 3.3:\r\n\r\n    \r\n    long hashState(long state) {\r\n        return (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7));\r\n    }\r\n    @Test\r\n    public void testSOHash() {\r\n        String src =&quot;state -&gt;  (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7))&quot;;\r\n        final JexlEngine jexl = new JexlBuilder().create();\r\n        JexlScript script = jexl.createScript(src);\r\n        Object result;\r\n        long[] checks = new long[]{33, 89, 345678990, -23233, -169, 0};\r\n        for(long arg : checks) {\r\n            result = script.execute(null, arg);\r\n            Assert.assertTrue(result instanceof Number);\r\n            long nresult = ((Number) result).longValue();\r\n            Assert.assertEquals(&quot;checking &quot; + arg, hashState(arg), nresult);\r\n        }\r\n    }","title":"JEXL2.1 Circular Bit Shift To Mirror Java","body":"<p>I'd recommend using JEXL 3.3 instead which does implement the bitshift operators. The following example works in 3.3:</p>\n<pre><code>long hashState(long state) {\n    return (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7));\n}\n@Test\npublic void testSOHash() {\n    String src =&quot;state -&gt;  (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7))&quot;;\n    final JexlEngine jexl = new JexlBuilder().create();\n    JexlScript script = jexl.createScript(src);\n    Object result;\n    long[] checks = new long[]{33, 89, 345678990, -23233, -169, 0};\n    for(long arg : checks) {\n        result = script.execute(null, arg);\n        Assert.assertTrue(result instanceof Number);\n        long nresult = ((Number) result).longValue();\n        Assert.assertEquals(&quot;checking &quot; + arg, hashState(arg), nresult);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":16557887,"reputation":29,"user_id":11964569,"display_name":"Luc Taylor"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736678,"answer_count":1,"score":0,"last_activity_date":1689931250,"creation_date":1689802825,"question_id":76725359,"body_markdown":"I wrote a hashing function that takes a 64 bit integer in, and outputs a 64 bit integer out in JAVA and translated it to JEXL 2.1\r\n\r\nI need it to return the same results in both, but am not too picky about how it works\r\n\r\nEverything was fine until this line\r\n\r\nstate = (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7)); // couldn&#39;t get bit shift to work in JEXL\r\n\r\nI cannot replicate this behavior in in JEXL2.1   Bit shift doesn&#39;t seem to exist at all, I tried to replicate with multiplication and division and was getting odd off by 1 errors.\r\n\r\nBy the way.. I&#39;m open to changing the java as long as it basically does the same thing.","title":"JEXL2.1 Circular Bit Shift To Mirror Java","body":"<p>I wrote a hashing function that takes a 64 bit integer in, and outputs a 64 bit integer out in JAVA and translated it to JEXL 2.1</p>\n<p>I need it to return the same results in both, but am not too picky about how it works</p>\n<p>Everything was fine until this line</p>\n<p>state = (state &lt;&lt; 7) | (state &gt;&gt;&gt; (64 - 7)); // couldn't get bit shift to work in JEXL</p>\n<p>I cannot replicate this behavior in in JEXL2.1   Bit shift doesn't seem to exist at all, I tried to replicate with multiplication and division and was getting odd off by 1 errors.</p>\n<p>By the way.. I'm open to changing the java as long as it basically does the same thing.</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":36208,"reputation":240316,"user_id":103154,"display_name":"axtavt"},"score":4,"creation_date":1406704370,"post_id":25030576,"comment_id":38928153,"body_markdown":"See http://stackoverflow.com/questions/3793791/final-method-mocking","body":"See <a href=\"http://stackoverflow.com/questions/3793791/final-method-mocking\">stackoverflow.com/questions/3793791/final-method-mocking</a>"},{"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"score":0,"creation_date":1406704684,"post_id":25030576,"comment_id":38928310,"body_markdown":"My bad, I missed that getString is final. Feel free to add your comment as an answer in order you get the credits.","body":"My bad, I missed that getString is final. Feel free to add your comment as an answer in order you get the credits."},{"owner":{"account_id":900361,"reputation":801,"user_id":936670,"display_name":"Aleksei Egorov"},"score":0,"creation_date":1462531579,"post_id":25030576,"comment_id":61685874,"body_markdown":"You may consider introducing one more bean - let&#39;s say `Messages`. It will have initialization block (locale setup, `getBundle` call) and `get(String key, String ... args)`. Next use through out your application calls to `Messages` instead of `ResourceBundle` coupling. And finally you may mock `Messages` in unit tests without any difficulties.","body":"You may consider introducing one more bean - let&#39;s say <code>Messages</code>. It will have initialization block (locale setup, <code>getBundle</code> call) and <code>get(String key, String ... args)</code>. Next use through out your application calls to <code>Messages</code> instead of <code>ResourceBundle</code> coupling. And finally you may mock <code>Messages</code> in unit tests without any difficulties."},{"owner":{"account_id":1058660,"reputation":1737,"user_id":1060779,"accept_rate":77,"display_name":"maxivis"},"score":1,"creation_date":1496085888,"post_id":25030576,"comment_id":75506780,"body_markdown":"I&#39;ve found another option, https://stackoverflow.com/a/10816819/1060779 just adding the messages_xx_XX.properties in src/test/resources and it worked.","body":"I&#39;ve found another option, <a href=\"https://stackoverflow.com/a/10816819/1060779\">stackoverflow.com/a/10816819/1060779</a> just adding the messages_xx_XX.properties in src/test/resources and it worked."},{"owner":{"account_id":404573,"reputation":7556,"user_id":772981,"accept_rate":46,"display_name":"Jarekczek"},"score":0,"creation_date":1532418217,"post_id":25030576,"comment_id":89954848,"body_markdown":"Another question being a kind of duplicate: https://stackoverflow.com/q/18377160/772981. Also contains an answer &quot;no need to mock&quot;.","body":"Another question being a kind of duplicate: <a href=\"https://stackoverflow.com/q/18377160/772981\">stackoverflow.com/q/18377160/772981</a>. Also contains an answer &quot;no need to mock&quot;."}],"answers":[{"tags":[],"owner":{"account_id":2337137,"reputation":127,"user_id":2049200,"accept_rate":43,"display_name":"user2049200"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1414013121,"creation_date":1414012818,"answer_id":26517338,"question_id":25030576,"body_markdown":"You&#39;ll find an example of solution below :\r\n\r\n\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({ ResourceBundle.class })\r\n    public class ResourceBundleTest {\r\n    \r\n    \t@Test\r\n    \tpublic void getStringByPowerMock() throws Exception {   \r\n    \t\tResourceBundle resourceBundle = PowerMockito.mock(ResourceBundle.class);\r\n    \t\tMockito.when(resourceBundle.getString(Mockito.anyString())).thenReturn(&quot;Hello world....&quot;);\r\n    \t\tSystem.out.println(resourceBundle.getString(&quot;keyword&quot;));\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n","title":"How to mock ResourceBundle.getString()?","body":"<p>You'll find an example of solution below :</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({ ResourceBundle.class })\npublic class ResourceBundleTest {\n\n    @Test\n    public void getStringByPowerMock() throws Exception {   \n        ResourceBundle resourceBundle = PowerMockito.mock(ResourceBundle.class);\n        Mockito.when(resourceBundle.getString(Mockito.anyString())).thenReturn(\"Hello world....\");\n        System.out.println(resourceBundle.getString(\"keyword\"));\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":109571,"reputation":4085,"user_id":290254,"display_name":"Julius Musseau"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1424980387,"creation_date":1424980387,"answer_id":28751526,"question_id":25030576,"body_markdown":"I figured out a way to mock ResourceBundle by subclassing ResourceBundle.Control.  My answer is here:\r\n\r\nhttps://stackoverflow.com/a/28640458/290254\r\n\r\nI prefer to avoid the dynamic bytecode rewriting (to remove final) of PowerMock, JMockit and friends, since Jacoco and other things seem to hate it.","title":"How to mock ResourceBundle.getString()?","body":"<p>I figured out a way to mock ResourceBundle by subclassing ResourceBundle.Control.  My answer is here:</p>\n\n<p><a href=\"https://stackoverflow.com/a/28640458/290254\">https://stackoverflow.com/a/28640458/290254</a></p>\n\n<p>I prefer to avoid the dynamic bytecode rewriting (to remove final) of PowerMock, JMockit and friends, since Jacoco and other things seem to hate it.</p>\n"},{"tags":[],"owner":{"account_id":64856,"reputation":29696,"user_id":191246,"accept_rate":77,"display_name":"ccpizza"},"down_vote_count":0,"up_vote_count":17,"is_accepted":true,"score":17,"last_activity_date":1651135024,"creation_date":1427277790,"answer_id":29252590,"question_id":25030576,"body_markdown":"Instead of mocking you can create a dummy ResourceBundle implementation, and then pass it as an argument to `.thenReturn(resourceBundle)`:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n        import java.util.ResourceBundle;\r\n\r\n        ResourceBundle dummyResourceBundle = new ResourceBundle() {\r\n            @Override\r\n            protected Object handleGetObject(String key) {\r\n                return &quot;fake_translated_value&quot;;\r\n            }\r\n\r\n            @Override\r\n            public Enumeration&lt;String&gt; getKeys() {\r\n                return Collections.emptyEnumeration();\r\n            }\r\n        };\r\n\r\n        // Example usage\r\n        when(request.getResourceBundle(any(Locale.class))).thenReturn(dummyResourceBundle)\r\n\r\nIf you need the actual keys and values, then you&#39;ll need to provide an implementation for `getKeys()`, e.g. a hashmap for storage and key lookup.","title":"How to mock ResourceBundle.getString()?","body":"<p>Instead of mocking you can create a dummy ResourceBundle implementation, and then pass it as an argument to <code>.thenReturn(resourceBundle)</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    import java.util.ResourceBundle;\n\n    ResourceBundle dummyResourceBundle = new ResourceBundle() {\n        @Override\n        protected Object handleGetObject(String key) {\n            return &quot;fake_translated_value&quot;;\n        }\n\n        @Override\n        public Enumeration&lt;String&gt; getKeys() {\n            return Collections.emptyEnumeration();\n        }\n    };\n\n    // Example usage\n    when(request.getResourceBundle(any(Locale.class))).thenReturn(dummyResourceBundle)\n</code></pre>\n<p>If you need the actual keys and values, then you'll need to provide an implementation for <code>getKeys()</code>, e.g. a hashmap for storage and key lookup.</p>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1515925150,"creation_date":1515925150,"answer_id":48248581,"question_id":25030576,"body_markdown":"@Powermockito did not worked as ResourceBundle.class have static final methods which were not easy to mock.\r\n\r\nI tried.\r\n\r\nIn the Main Class extract your method inside another public method, and then overide it with implementaion.\r\n\r\nHere ReviewEChannelApplicationMBean is my Controller, where i overrriden the getBundle.\r\n\r\n    ReviewEChannelApplicationMBean = spy(new ReviewEChannelApplicationMBean(){\r\n                @Override\r\n                public ResourceBundle getBundle(FacesContext fcContext) {\r\n                    return TestDataBuilder.getResourceBundle();\r\n                }\r\n            });\r\n    \r\n//This Class i my TestDataBuilder using ListResourceBundle\r\n\r\n    public class TestDataBuilder {\r\n    \tpublic static ResourceBundle getResourceBundle() {\r\n    \t\t\treturn new ListResourceBundle(){\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tprotected Object[][] getContents() {\r\n    \t\t\t\t\treturn contents;\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tprivate Object[][] contents = {\r\n    \t\t\t\t\t\t{&quot;test1&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test2&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test3&quot;,&quot;01&quot;},\r\n    \t\t\t\t\t\t{&quot;test4&quot;,&quot;01&quot;}\r\n    \t\t\t\t};\r\n    \t\t\t};\r\n    \r\n    \t\t}\r\n    }","title":"How to mock ResourceBundle.getString()?","body":"<p>@Powermockito did not worked as ResourceBundle.class have static final methods which were not easy to mock.</p>\n\n<p>I tried.</p>\n\n<p>In the Main Class extract your method inside another public method, and then overide it with implementaion.</p>\n\n<p>Here ReviewEChannelApplicationMBean is my Controller, where i overrriden the getBundle.</p>\n\n<pre><code>ReviewEChannelApplicationMBean = spy(new ReviewEChannelApplicationMBean(){\n            @Override\n            public ResourceBundle getBundle(FacesContext fcContext) {\n                return TestDataBuilder.getResourceBundle();\n            }\n        });\n</code></pre>\n\n<p>//This Class i my TestDataBuilder using ListResourceBundle</p>\n\n<pre><code>public class TestDataBuilder {\n    public static ResourceBundle getResourceBundle() {\n            return new ListResourceBundle(){\n\n                @Override\n                protected Object[][] getContents() {\n                    return contents;\n                }\n\n                private Object[][] contents = {\n                        {\"test1\",\"01\"},\n                        {\"test2\",\"01\"},\n                        {\"test3\",\"01\"},\n                        {\"test4\",\"01\"}\n                };\n            };\n\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29062781,"reputation":1,"user_id":22263067,"display_name":"Aleksandr Zholud"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689931056,"creation_date":1689931056,"answer_id":76736657,"question_id":25030576,"body_markdown":"If You want mock such a situation:\r\n\r\n    ResourceBundle messages = ResourceBundle.getBundle(&quot;messages&quot;);\r\n    var msg = messages.getString(&quot;company.wizard.field.IsEnabledFromToReqDto.isNull&quot;);\r\n\r\nU should use the next **working** variant:\r\n\r\n    @Test\r\n    void testMethodName() {\r\n            //normally mock static\r\n            try (MockedStatic&lt;ResourceBundle&gt; contextMock = mockStatic(ResourceBundle.class)) {\r\n                //mock an object of mocked static\r\n                ResourceBundle messages = mock(ResourceBundle.class);\r\n                contextMock.when(() -&gt; ResourceBundle.getBundle(&quot;messages&quot;)).thenReturn(messages);\r\n                when(messages.getString(anyString())).thenReturn(&quot;Error message&quot;); //or your own mock for messages\r\n    \r\n                //... your test...\r\n                //... your verifying...\r\n            }\r\n        }","title":"How to mock ResourceBundle.getString()?","body":"<p>If You want mock such a situation:</p>\n<pre><code>ResourceBundle messages = ResourceBundle.getBundle(&quot;messages&quot;);\nvar msg = messages.getString(&quot;company.wizard.field.IsEnabledFromToReqDto.isNull&quot;);\n</code></pre>\n<p>U should use the next <strong>working</strong> variant:</p>\n<pre><code>@Test\nvoid testMethodName() {\n        //normally mock static\n        try (MockedStatic&lt;ResourceBundle&gt; contextMock = mockStatic(ResourceBundle.class)) {\n            //mock an object of mocked static\n            ResourceBundle messages = mock(ResourceBundle.class);\n            contextMock.when(() -&gt; ResourceBundle.getBundle(&quot;messages&quot;)).thenReturn(messages);\n            when(messages.getString(anyString())).thenReturn(&quot;Error message&quot;); //or your own mock for messages\n\n            //... your test...\n            //... your verifying...\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":341185,"reputation":16364,"user_id":671639,"accept_rate":69,"display_name":"BetaRide"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17427,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":29252590,"answer_count":5,"score":17,"last_activity_date":1689931056,"creation_date":1406703710,"question_id":25030576,"body_markdown":"I&#39;m failing to mock `ResourceBundle.getString()`.\r\n\r\nThis is my code:\r\n\r\n    ResourceBundle schemaBundle = Mockito.mock(ResourceBundle.class);\r\n    Mockito.when(schemaBundle.getString(&quot;testKey_testPropertyName_ect&quot;)).thenReturn(&quot;testString1&quot;);\r\n\r\nThis gives the following exception on the second line:\r\n\r\n    java.util.MissingResourceException: Can&#39;t find resource for bundle $java.util.ResourceBundle$$EnhancerByMockitoWithCGLIB$$9e259f03, key testKey_testPropertyName_ect\r\n    \tat java.util.ResourceBundle.getObject(ResourceBundle.java:374)\r\n    \tat java.util.ResourceBundle.getString(ResourceBundle.java:334)\r\n    \tat com.foo.bar.resource.PropertyResourceTest.testGet(PropertyResourceTest.java:104)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n    \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\r\n\r\nTo me this looks as if `schemaBundle` isn&#39;t mocked at all. But the debuger clearly shows, that the instance is wrapped by mockito.\r\n\r\nI also tried with\r\n\r\n    Mockito.doReturn(&quot;testString1&quot;).when(schemaBundle).getString(&quot;testKey_testPropertyName_ect&quot;);\r\n\r\nbut this returns the same exception.\r\n\r\nAny idea what&#39;s wrong?\r\n\r\n","title":"How to mock ResourceBundle.getString()?","body":"<p>I'm failing to mock <code>ResourceBundle.getString()</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>ResourceBundle schemaBundle = Mockito.mock(ResourceBundle.class);\nMockito.when(schemaBundle.getString(\"testKey_testPropertyName_ect\")).thenReturn(\"testString1\");\n</code></pre>\n\n<p>This gives the following exception on the second line:</p>\n\n<pre><code>java.util.MissingResourceException: Can't find resource for bundle $java.util.ResourceBundle$$EnhancerByMockitoWithCGLIB$$9e259f03, key testKey_testPropertyName_ect\n    at java.util.ResourceBundle.getObject(ResourceBundle.java:374)\n    at java.util.ResourceBundle.getString(ResourceBundle.java:334)\n    at com.foo.bar.resource.PropertyResourceTest.testGet(PropertyResourceTest.java:104)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n    at java.lang.reflect.Method.invoke(Method.java:597)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)\n</code></pre>\n\n<p>To me this looks as if <code>schemaBundle</code> isn't mocked at all. But the debuger clearly shows, that the instance is wrapped by mockito.</p>\n\n<p>I also tried with</p>\n\n<pre><code>Mockito.doReturn(\"testString1\").when(schemaBundle).getString(\"testKey_testPropertyName_ect\");\n</code></pre>\n\n<p>but this returns the same exception.</p>\n\n<p>Any idea what's wrong?</p>\n"},{"tags":["java","json","spring-boot","jackson"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688744769,"post_id":76638351,"comment_id":135119524,"body_markdown":"&quot;The problem is that this JSON can&#39;t be parsed by other clients.&quot; The JSON you&#39;ve shown us is absolutely valid, assuming it genuinely contains a backslash followed by n. Rather than show us the code producing the valid JSON, please provide the code that fails to deserialize it - using hard-coded JSON in a [mcve].","body":"&quot;The problem is that this JSON can&#39;t be parsed by other clients.&quot; The JSON you&#39;ve shown us is absolutely valid, assuming it genuinely contains a backslash followed by n. Rather than show us the code producing the valid JSON, please provide the code that fails to deserialize it - using hard-coded JSON in a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688855643,"post_id":76638351,"comment_id":135130601,"body_markdown":"Hi @JonSkeet, it is my understanding that \\n is a control character that represents new line. The escaped version of it would be \\\\n, but I could be wrong. At least this what I was expecting to get in the response from Spring. \nIt seems like it is also what Jackson expects as it returns “Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value” when trying to parse that JSON with it.","body":"Hi @JonSkeet, it is my understanding that \\n is a control character that represents new line. The escaped version of it would be \\\\n, but I could be wrong. At least this what I was expecting to get in the response from Spring.  It seems like it is also what Jackson expects as it returns “Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value” when trying to parse that JSON with it."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688886794,"post_id":76638351,"comment_id":135132338,"body_markdown":"Yes, you&#39;re wrong. the escaped version of the control character is just `\\n`. `\\\\n` represents a backslash followed by n, that&#39;s all. It&#39;s really, really important to distinguish between &quot;the characters in the string&quot; and &quot;the text in a string literal&quot; (which itself uses escaping). A *string literal* representing a JSON string would use `\\\\n` because the JSON itself contains a backslash followed by an `n` - but you shouldn&#39;t see a double backslash in the JSON itself Again, you should really provide a [mcve] of parsing a hard-coded JSON string.","body":"Yes, you&#39;re wrong. the escaped version of the control character is just <code>\\n</code>. <code>\\\\n</code> represents a backslash followed by n, that&#39;s all. It&#39;s really, really important to distinguish between &quot;the characters in the string&quot; and &quot;the text in a string literal&quot; (which itself uses escaping). A <i>string literal</i> representing a JSON string would use <code>\\\\n</code> because the JSON itself contains a backslash followed by an <code>n</code> - but you shouldn&#39;t see a double backslash in the JSON itself Again, you should really provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of parsing a hard-coded JSON string."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688973268,"post_id":76638351,"comment_id":135141349,"body_markdown":"Hi @JonSkeet, I updated the code example with the parsing of the JSON generated by Jackson.\n\nSo when you say:\n&quot;A string literal representing a JSON string would use `\\\\n` because the JSON itself contains a backslash followed by an `n` - but you shouldn&#39;t see a double backslash in the JSON itself&quot;\nMy difficulty to understand here is that why Jackson expects `\\\\n` but returns `\\n`?\n\nIf I try to serialize an object with the string `Example of \\n JSON` in other languages, it returns in fact `Example of \\\\n JSON`. So, what is missing on my code to have the same behaviour with Jackson?","body":"Hi @JonSkeet, I updated the code example with the parsing of the JSON generated by Jackson.  So when you say: &quot;A string literal representing a JSON string would use <code>\\\\n</code> because the JSON itself contains a backslash followed by an <code>n</code> - but you shouldn&#39;t see a double backslash in the JSON itself&quot; My difficulty to understand here is that why Jackson expects <code>\\\\n</code> but returns <code>\\n</code>?  If I try to serialize an object with the string <code>Example of \\n JSON</code> in other languages, it returns in fact <code>Example of \\\\n JSON</code>. So, what is missing on my code to have the same behaviour with Jackson?"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688973873,"post_id":76638351,"comment_id":135141476,"body_markdown":"This code is broken: `objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class)`. That is not the same as the JSON you&#39;ve shown after &quot;returns the following JSON&quot;. Your string literal contains a line break; the JSON you&#39;ve shown contains a backslash followed by an n. Print both of those to the console with `System.out` and you&#39;ll see the difference. I&#39;m sure that Jackson doesn&#39;t expect a `\\n` in the actual JSON - but if you want to represent the JSON *as a string literal* then you do indeed need `\\\\n`. But print that to the console - you won&#39;t see the double backslash.","body":"This code is broken: <code>objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class)</code>. That is not the same as the JSON you&#39;ve shown after &quot;returns the following JSON&quot;. Your string literal contains a line break; the JSON you&#39;ve shown contains a backslash followed by an n. Print both of those to the console with <code>System.out</code> and you&#39;ll see the difference. I&#39;m sure that Jackson doesn&#39;t expect a <code>\\n</code> in the actual JSON - but if you want to represent the JSON <i>as a string literal</i> then you do indeed need <code>\\\\n</code>. But print that to the console - you won&#39;t see the double backslash."},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1688973927,"post_id":76638351,"comment_id":135141486,"body_markdown":"(To highlight what I&#39;m saying about the JSON not being the same - note how in your string literal you&#39;re escaping all the double quotes, but those *aren&#39;t* escaped in the three-line JSON you&#39;ve shown. In other words, you&#39;ve been inconsistent about how you&#39;ve converted the JSON into a string literal.)","body":"(To highlight what I&#39;m saying about the JSON not being the same - note how in your string literal you&#39;re escaping all the double quotes, but those <i>aren&#39;t</i> escaped in the three-line JSON you&#39;ve shown. In other words, you&#39;ve been inconsistent about how you&#39;ve converted the JSON into a string literal.)"},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688975225,"post_id":76638351,"comment_id":135141778,"body_markdown":"Hi @JonSkeet, I appreciate you are trying to help but I think we are going off track here. The three-line JSON in the question is just formatted so people can read it better. Sorry if that confused you, the raw format would be `{&quot;title&quot;:&quot;Example of \\n JSON&quot;}`. \nBut just to try what you suggested, I tried:\n```\nSystem.out.println(&quot;Original object: &quot; + demo.getTitle());\nSystem.out.println(&quot;Example of incoming JSON: {\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;&quot;);\n```\n\nAnd the result is:\n```Original object: Example of\n JSON\nExample of incoming JSON: {&quot;title&quot; : &quot;Example of\n JSON&quot;```","body":"Hi @JonSkeet, I appreciate you are trying to help but I think we are going off track here. The three-line JSON in the question is just formatted so people can read it better. Sorry if that confused you, the raw format would be <code>{&quot;title&quot;:&quot;Example of \\n JSON&quot;}</code>.  But just to try what you suggested, I tried: ``` System.out.println(&quot;Original object: &quot; + demo.getTitle()); System.out.println(&quot;Example of incoming JSON: {\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;&quot;); ```  And the result is: <code>Original object: Example of  JSON Example of incoming JSON: {&quot;title&quot; : &quot;Example of  JSON&quot;</code>"},{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1688975618,"post_id":76638351,"comment_id":135141861,"body_markdown":"I don&#39;t think this *is* off track. I think the cause of the whole problem is you getting confused between the actual content of a string, and its string literal representation (and potentially the representation as shown in the debugger). However, it looks like I&#39;m not able to communicate that clearly, so I&#39;ll step away from this question now. Best of luck (no sarcasm intended) getting it resolved.","body":"I don&#39;t think this <i>is</i> off track. I think the cause of the whole problem is you getting confused between the actual content of a string, and its string literal representation (and potentially the representation as shown in the debugger). However, it looks like I&#39;m not able to communicate that clearly, so I&#39;ll step away from this question now. Best of luck (no sarcasm intended) getting it resolved."},{"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"score":0,"creation_date":1688976399,"post_id":76638351,"comment_id":135142029,"body_markdown":"No problem @JonSkeet, it is probably lack of understanding on my side and wrong expectation towards Jackson. I don&#39;t see any difference in the `System.out`, but thanks for the help! If I find the reason or what I&#39;m doing wrong, I will update here in the future.","body":"No problem @JonSkeet, it is probably lack of understanding on my side and wrong expectation towards Jackson. I don&#39;t see any difference in the <code>System.out</code>, but thanks for the help! If I find the reason or what I&#39;m doing wrong, I will update here in the future."}],"answers":[{"tags":[],"owner":{"account_id":6734194,"reputation":75,"user_id":5189512,"accept_rate":57,"display_name":"Zargham irtza"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1688745193,"creation_date":1688745193,"answer_id":76638463,"question_id":76638351,"body_markdown":"To escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson, you can configure the ObjectMapper used by Jackson to enable the JsonGenerator.Feature.ESCAPE_NON_ASCII feature. This feature escapes non-ASCII characters using Unicode escape sequences, which includes characters like \\n and \\t.\r\n\r\nHere&#39;s how you can do it:\r\n\r\nCreate a configuration class to customize the Jackson ObjectMapper:\r\n\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class JacksonConfig {\r\n\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\r\n        return builder -&gt; {\r\n            builder.featuresToEnable(JsonGenerator.Feature.ESCAPE_NON_ASCII);\r\n            // Add any other Jackson customization if needed\r\n        };\r\n    }\r\n\r\n    @Bean\r\n    public ObjectMapper objectMapper(Jackson2ObjectMapperBuilderCustomizer customizer) {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        customizer.customize(objectMapper);\r\n        return objectMapper;\r\n    }\r\n}\r\n\r\n\r\nIn the above configuration class, we define a bean for Jackson2ObjectMapperBuilderCustomizer that enables the JsonGenerator.Feature.ESCAPE_NON_ASCII feature.\r\n\r\nWe also define a bean for the ObjectMapper itself, where we apply the customizer to configure the ObjectMapper instance.\r\n\r\nWith the above configuration in place, Spring Boot will use the customized ObjectMapper to serialize JSON responses. The \\n and \\t characters (along with other non-ASCII characters) will be escaped with Unicode escape sequences.\r\n\r\nNote: Ensure that you have Jackson dependencies already configured in your Spring Boot project.\r\n\r\nThat&#39;s it! Now your JSON responses should include escaped characters like \\n and \\t by default.","title":"How to escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson","body":"<p>To escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson, you can configure the ObjectMapper used by Jackson to enable the JsonGenerator.Feature.ESCAPE_NON_ASCII feature. This feature escapes non-ASCII characters using Unicode escape sequences, which includes characters like \\n and \\t.</p>\n<p>Here's how you can do it:</p>\n<p>Create a configuration class to customize the Jackson ObjectMapper:</p>\n<p>import com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport org.springframework.boot.autoconfigure.jackson.Jackson2ObjectMapperBuilderCustomizer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;</p>\n<p>@Configuration\npublic class JacksonConfig {</p>\n<pre><code>@Bean\npublic Jackson2ObjectMapperBuilderCustomizer jsonCustomizer() {\n    return builder -&gt; {\n        builder.featuresToEnable(JsonGenerator.Feature.ESCAPE_NON_ASCII);\n        // Add any other Jackson customization if needed\n    };\n}\n\n@Bean\npublic ObjectMapper objectMapper(Jackson2ObjectMapperBuilderCustomizer customizer) {\n    ObjectMapper objectMapper = new ObjectMapper();\n    customizer.customize(objectMapper);\n    return objectMapper;\n}\n</code></pre>\n<p>}</p>\n<p>In the above configuration class, we define a bean for Jackson2ObjectMapperBuilderCustomizer that enables the JsonGenerator.Feature.ESCAPE_NON_ASCII feature.</p>\n<p>We also define a bean for the ObjectMapper itself, where we apply the customizer to configure the ObjectMapper instance.</p>\n<p>With the above configuration in place, Spring Boot will use the customized ObjectMapper to serialize JSON responses. The \\n and \\t characters (along with other non-ASCII characters) will be escaped with Unicode escape sequences.</p>\n<p>Note: Ensure that you have Jackson dependencies already configured in your Spring Boot project.</p>\n<p>That's it! Now your JSON responses should include escaped characters like \\n and \\t by default.</p>\n"}],"owner":{"account_id":9483990,"reputation":123,"user_id":7050893,"display_name":"lbodevan"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":852,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689930785,"creation_date":1688744338,"question_id":76638351,"body_markdown":"I&#39;m having problems to return a JSON with escaped characters from a Spring Boot application (version 2.7.13).\r\n\r\nThe `/demo` endpoint in the following example code:\r\n\r\n```java\r\npackage com.example.invalidjson.demo;\r\n\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(DemoApplication.class, args);\r\n    }\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class DemoController {\r\n        @GetMapping(path = &quot;/demo&quot;)\r\n        Demo getExample() {\r\n            Demo demo = new Demo();\r\n            demo.setTitle(&quot;Example of \\n JSON&quot;);\r\n\r\n            return demo;\r\n        }\r\n\r\n        @GetMapping(path = &quot;/read&quot;)\r\n        void readExample() {\r\n            try {\r\n                ObjectMapper objectMapper = new ObjectMapper();\r\n                Demo demo = objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class);\r\n\r\n                System.out.println(&quot;Reading succeeded: &quot; + demo.getTitle());\r\n            } catch (JsonProcessingException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static class Demo {\r\n        private String title;\r\n\r\n        public String getTitle() {\r\n            return title;\r\n        }\r\n\r\n        public void setTitle(String title) {\r\n            this.title = title;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nreturns the following JSON:\r\n\r\n```json\r\n{&quot;title&quot;:&quot;Example of \\n JSON&quot;}\r\n```\r\n\r\nThe problem is that this JSON can&#39;t be parsed by other clients. Even Jackson fails to read it. The `/read` endpoint throws the following exception:\r\n\r\n```lang-none\r\ncom.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value\r\n at [Source: (String)&quot;{&quot;title&quot; : &quot;Example of\r\n JSON&quot;}&quot;; line: 1, column: 25]\r\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:735) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1110) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString2(ReaderBasedJsonParser.java:2155) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString(ReaderBasedJsonParser.java:2126) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.getText(ReaderBasedJsonParser.java:320) ~[jackson-core-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:41) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:314) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3597) ~[jackson-databind-2.13.5.jar:2.13.5]\r\n    at com.example.invalidjson.demo.DemoApplication$DemoController.readExample(DemoApplication.java:34) ~[classes/:na]\r\n...\r\n```\r\n\r\nIt was my understanding that [Jackson](https://github.com/FasterXML/jackson), as the default JSON parser of Spring Boot, would automatically escape characters like `\\n` and `\\t` as per the [documentation](http://fasterxml.github.io/jackson-core/javadoc/2.10/com/fasterxml/jackson/core/json/JsonReadFeature.html#ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER), or maybe I didn&#39;t understand the documentation so well.\r\n\r\nI&#39;ve see some options using `JacksonConfiguration` like:\r\n\r\n```java\r\npackage com.example.invalidjson.demo;\r\n\r\nimport com.fasterxml.jackson.core.JsonGenerator;\r\nimport com.fasterxml.jackson.databind.JsonSerializer;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializerProvider;\r\nimport com.fasterxml.jackson.databind.module.SimpleModule;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\nimport java.io.IOException;\r\n\r\n@Configuration\r\npublic class JacksonConfiguration {\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n\r\n        JsonSerializer&lt;String&gt; stringJsonSerializer = new JsonSerializer&lt;String&gt;() {\r\n            @Override\r\n            public void serialize(String value, JsonGenerator generator, SerializerProvider serializers) throws IOException {\r\n                generator.writeString(value.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\r\n            }\r\n        };\r\n\r\n        SimpleModule simpleModule = new SimpleModule();\r\n        simpleModule.addSerializer(String.class, stringJsonSerializer);\r\n\r\n        objectMapper.registerModule(simpleModule);\r\n        return objectMapper;\r\n    }\r\n}\r\n```\r\n\r\nIsn&#39;t there a different way to handle that?\r\n\r\nAnd the underlying question is: Why is Jackson generating a JSON that not even itself can read?\r\n\r\n","title":"How to escape characters like \\n and \\t in a JSON response by default using Spring Boot and Jackson","body":"<p>I'm having problems to return a JSON with escaped characters from a Spring Boot application (version 2.7.13).</p>\n<p>The <code>/demo</code> endpoint in the following example code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.invalidjson.demo;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n\n    @RestController\n    @RequestMapping(&quot;/&quot;)\n    public class DemoController {\n        @GetMapping(path = &quot;/demo&quot;)\n        Demo getExample() {\n            Demo demo = new Demo();\n            demo.setTitle(&quot;Example of \\n JSON&quot;);\n\n            return demo;\n        }\n\n        @GetMapping(path = &quot;/read&quot;)\n        void readExample() {\n            try {\n                ObjectMapper objectMapper = new ObjectMapper();\n                Demo demo = objectMapper.readValue(&quot;{\\&quot;title\\&quot; : \\&quot;Example of \\n JSON\\&quot;}&quot;, Demo.class);\n\n                System.out.println(&quot;Reading succeeded: &quot; + demo.getTitle());\n            } catch (JsonProcessingException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n\n    public static class Demo {\n        private String title;\n\n        public String getTitle() {\n            return title;\n        }\n\n        public void setTitle(String title) {\n            this.title = title;\n        }\n    }\n}\n</code></pre>\n<p>returns the following JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{&quot;title&quot;:&quot;Example of \\n JSON&quot;}\n</code></pre>\n<p>The problem is that this JSON can't be parsed by other clients. Even Jackson fails to read it. The <code>/read</code> endpoint throws the following exception:</p>\n<pre class=\"lang-none prettyprint-override\"><code>com.fasterxml.jackson.core.JsonParseException: Illegal unquoted character ((CTRL-CHAR, code 10)): has to be escaped using backslash to be included in string value\n at [Source: (String)&quot;{&quot;title&quot; : &quot;Example of\n JSON&quot;}&quot;; line: 1, column: 25]\n    at com.fasterxml.jackson.core.JsonParser._constructError(JsonParser.java:2391) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.base.ParserMinimalBase._reportError(ParserMinimalBase.java:735) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.base.ParserBase._throwUnquotedSpace(ParserBase.java:1110) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString2(ReaderBasedJsonParser.java:2155) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser._finishString(ReaderBasedJsonParser.java:2126) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.getText(ReaderBasedJsonParser.java:320) ~[jackson-core-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:41) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.std.StringDeserializer.deserialize(StringDeserializer.java:11) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:129) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:314) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:177) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4674) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3629) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3597) ~[jackson-databind-2.13.5.jar:2.13.5]\n    at com.example.invalidjson.demo.DemoApplication$DemoController.readExample(DemoApplication.java:34) ~[classes/:na]\n...\n</code></pre>\n<p>It was my understanding that <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a>, as the default JSON parser of Spring Boot, would automatically escape characters like <code>\\n</code> and <code>\\t</code> as per the <a href=\"http://fasterxml.github.io/jackson-core/javadoc/2.10/com/fasterxml/jackson/core/json/JsonReadFeature.html#ALLOW_BACKSLASH_ESCAPING_ANY_CHARACTER\" rel=\"nofollow noreferrer\">documentation</a>, or maybe I didn't understand the documentation so well.</p>\n<p>I've see some options using <code>JacksonConfiguration</code> like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.invalidjson.demo;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport java.io.IOException;\n\n@Configuration\npublic class JacksonConfiguration {\n    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n\n        JsonSerializer&lt;String&gt; stringJsonSerializer = new JsonSerializer&lt;String&gt;() {\n            @Override\n            public void serialize(String value, JsonGenerator generator, SerializerProvider serializers) throws IOException {\n                generator.writeString(value.replace(&quot;\\n&quot;, &quot;\\\\n&quot;));\n            }\n        };\n\n        SimpleModule simpleModule = new SimpleModule();\n        simpleModule.addSerializer(String.class, stringJsonSerializer);\n\n        objectMapper.registerModule(simpleModule);\n        return objectMapper;\n    }\n}\n</code></pre>\n<p>Isn't there a different way to handle that?</p>\n<p>And the underlying question is: Why is Jackson generating a JSON that not even itself can read?</p>\n"},{"tags":["java","spring-boot","next.js"],"answers":[{"tags":[],"owner":{"account_id":20296591,"reputation":1,"user_id":14886991,"display_name":"Ian Lau"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640232928,"creation_date":1640232928,"answer_id":70457601,"question_id":70091462,"body_markdown":"Next.js is written in Javascript, Spring Boot is written in Java, they cannot be run together. However, after you run them in different ports, you can use a reverse proxy (e.g. Nginx) to stick them together under the same port but different endpoints (for example map Next.js to / and Spring Boot to /api)","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Next.js is written in Javascript, Spring Boot is written in Java, they cannot be run together. However, after you run them in different ports, you can use a reverse proxy (e.g. Nginx) to stick them together under the same port but different endpoints (for example map Next.js to / and Spring Boot to /api)</p>\n"},{"tags":[],"owner":{"account_id":16478744,"reputation":150,"user_id":11905991,"display_name":"Man Man Yu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929841,"creation_date":1689929841,"answer_id":76736525,"question_id":70091462,"body_markdown":"Yes you can !\r\n\r\nCheck the answer over here:\r\n\r\nhttps://stackoverflow.com/questions/71333551/how-do-i-serve-the-nextjs-application-from-spring-boot-application\r\n\r\n\r\nyou need to modify the api link inside the nextjs (frontend)\r\nfrom http://xxxxx to /xxx,","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Yes you can !</p>\n<p>Check the answer over here:</p>\n<p><a href=\"https://stackoverflow.com/questions/71333551/how-do-i-serve-the-nextjs-application-from-spring-boot-application\">How do I serve the NextJs application from spring boot application?</a></p>\n<p>you need to modify the api link inside the nextjs (frontend)\nfrom http://xxxxx to /xxx,</p>\n"}],"owner":{"account_id":23436978,"reputation":21,"user_id":17494956,"display_name":"anubhav verman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":601,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1689929841,"creation_date":1637734402,"question_id":70091462,"body_markdown":"Ideally NextJs code runs on a different port 3000. Can we have NextJS code clubbed in Springboot executable Jar /WAR (embedded Tomcat) which runs on default port 8080, and make the clubbed application jar/war run on single port?\r\n\r\nJust want to highlight, React JS can be clubbed with Springboot , whereas NextJS I am no sure. ","title":"Can we have Springboot jar + NextJs running on same port as a packaged Jar","body":"<p>Ideally NextJs code runs on a different port 3000. Can we have NextJS code clubbed in Springboot executable Jar /WAR (embedded Tomcat) which runs on default port 8080, and make the clubbed application jar/war run on single port?</p>\n<p>Just want to highlight, React JS can be clubbed with Springboot , whereas NextJS I am no sure.</p>\n"},{"tags":["java","compilation"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":5,"creation_date":1689923413,"post_id":76735816,"comment_id":135284514,"body_markdown":"Are you aware of [De Morgan&#39;s Laws](https://en.wikipedia.org/wiki/De_Morgan%27s_laws)? If you do, what kind of answer are you expecting here?","body":"Are you aware of <a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">De Morgan&#39;s Laws</a>? If you do, what kind of answer are you expecting here?"}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1689923495,"creation_date":1689923495,"answer_id":76735850,"question_id":76735816,"body_markdown":"It didn&#39;t just change OR to AND, it changed `A || B` to `!(!A &amp;&amp; !B)`, which is a standard Boolean logic substitution. Note that the outer `not` was done by swapping around the `if` and `else` blocks.\r\n\r\nI would assume this is a compiler optimization. Don&#39;t worry about it.","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>It didn't just change OR to AND, it changed <code>A || B</code> to <code>!(!A &amp;&amp; !B)</code>, which is a standard Boolean logic substitution. Note that the outer <code>not</code> was done by swapping around the <code>if</code> and <code>else</code> blocks.</p>\n<p>I would assume this is a compiler optimization. Don't worry about it.</p>\n"},{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689929682,"creation_date":1689929682,"answer_id":76736507,"question_id":76735816,"body_markdown":"Keep in mind this:\r\n\r\n - If you think that your logic is better then a code that was revied and tested by hundreds, then you are wrong\r\n - If you think there is a bug in an open-source code then think twice, highly possible that you are wrong\r\n\r\n\r\n**Lets suppose this:**\r\n\r\n    A: currentValue.toString().matches(EPOCH_PATTERN.pattern()\r\n    B: currentValue instanceof Long\r\n\r\n\r\n**Your code**\r\n\r\n    A = 0 and B = 1 ---&gt; 0 || 1 = 1 ---&gt; setValue(Long...)\r\n    A = 1 and B = 0 ---&gt; same case\r\n    A = 1 and B = 1 ---&gt; same case\r\n    A = 0 and B = 0 ---&gt; 0 || 0 = 0 ---&gt; setValue(currentValue)\r\n\r\n\r\n**JVM code**\r\n\r\n    A = 0 and B = 1 ---&gt; !0 &amp;&amp; !1 ---&gt; 1 &amp;&amp; 0 = 0 ---&gt; setValue(Long...)\r\n    A = 1 and B = 0 ---&gt; !1 &amp;&amp; !0 ---&gt; same case\r\n    A = 1 and B = 1 ---&gt; !1 &amp;&amp; !1 ---&gt; same case\r\n    A = 0 and B = 0 ---&gt; !0 &amp;&amp; !0 ---&gt; 1 &amp;&amp; 1 = 1 --&gt; setValue(currentValue)\r\n\r\n\r\n","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>Keep in mind this:</p>\n<ul>\n<li>If you think that your logic is better then a code that was revied and tested by hundreds, then you are wrong</li>\n<li>If you think there is a bug in an open-source code then think twice, highly possible that you are wrong</li>\n</ul>\n<p><strong>Lets suppose this:</strong></p>\n<pre><code>A: currentValue.toString().matches(EPOCH_PATTERN.pattern()\nB: currentValue instanceof Long\n</code></pre>\n<p><strong>Your code</strong></p>\n<pre><code>A = 0 and B = 1 ---&gt; 0 || 1 = 1 ---&gt; setValue(Long...)\nA = 1 and B = 0 ---&gt; same case\nA = 1 and B = 1 ---&gt; same case\nA = 0 and B = 0 ---&gt; 0 || 0 = 0 ---&gt; setValue(currentValue)\n</code></pre>\n<p><strong>JVM code</strong></p>\n<pre><code>A = 0 and B = 1 ---&gt; !0 &amp;&amp; !1 ---&gt; 1 &amp;&amp; 0 = 0 ---&gt; setValue(Long...)\nA = 1 and B = 0 ---&gt; !1 &amp;&amp; !0 ---&gt; same case\nA = 1 and B = 1 ---&gt; !1 &amp;&amp; !1 ---&gt; same case\nA = 0 and B = 0 ---&gt; !0 &amp;&amp; !0 ---&gt; 1 &amp;&amp; 1 = 1 --&gt; setValue(currentValue)\n</code></pre>\n"}],"owner":{"account_id":8191273,"reputation":163,"user_id":7800452,"display_name":"Deepak Gopal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":7,"up_vote_count":0,"closed_date":1689932100,"accepted_answer_id":76736507,"answer_count":2,"score":-7,"last_activity_date":1689929682,"creation_date":1689923230,"question_id":76735816,"body_markdown":"I am checking if an `object` is having an epoch pattern or is of type `Long`. So I wrote this in Java 8:\r\n```      \r\nif(currentValue.toString().matches(EPOCH_PATTERN.pattern()) || \r\ncurrentValue instanceof Long) \r\n        this.setValue(Long.valueOf(currentValue.toString()));\r\n      else\r\n        this.setValue(currentValue);\r\n```\r\n\r\nand JVM compiled it to \r\n```\r\nif (!currentValue.toString().matches(EPOCH_PATTERN.pattern()) &amp;&amp; \r\n!(currentValue instanceof Long)) {\r\n                this.setValue(currentValue);\r\n            } else {\r\n                this.setValue(Long.valueOf(currentValue.toString()));\r\n            }\r\n```\r\n\r\nThis is definitely not what I expected when I wrote the code.\r\nHow does `OR` get changed to `AND`. Am I making a fundamental mistake here?","title":"Why does JVM convert an `OR` to `AND`?","body":"<p>I am checking if an <code>object</code> is having an epoch pattern or is of type <code>Long</code>. So I wrote this in Java 8:</p>\n<pre><code>if(currentValue.toString().matches(EPOCH_PATTERN.pattern()) || \ncurrentValue instanceof Long) \n        this.setValue(Long.valueOf(currentValue.toString()));\n      else\n        this.setValue(currentValue);\n</code></pre>\n<p>and JVM compiled it to</p>\n<pre><code>if (!currentValue.toString().matches(EPOCH_PATTERN.pattern()) &amp;&amp; \n!(currentValue instanceof Long)) {\n                this.setValue(currentValue);\n            } else {\n                this.setValue(Long.valueOf(currentValue.toString()));\n            }\n</code></pre>\n<p>This is definitely not what I expected when I wrote the code.\nHow does <code>OR</code> get changed to <code>AND</code>. Am I making a fundamental mistake here?</p>\n"},{"tags":["java","spring","hibernate","kotlin","jpa"],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689756439,"creation_date":1689675534,"answer_id":76711753,"question_id":76711733,"body_markdown":"If you want to have the conversion from camelCase to snake_case you have to set this:\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\r\n\r\nOr if you want to use your own:\r\n\r\n    spring.jpa.hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\r\n\r\n**Please not that there is spring.jpa before hibernate...**\r\n\r\nAnd finally `CustomPhysicalNamingStrategy` MUST implement `PhysicalNamingStrategy` from Hibernate.","title":"Hibernate Field Naming with Spring Boot","body":"<p>If you want to have the conversion from camelCase to snake_case you have to set this:</p>\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.CamelCaseToUnderscoresNamingStrategy\n</code></pre>\n<p>Or if you want to use your own:</p>\n<pre><code>spring.jpa.hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\n</code></pre>\n<p><strong>Please not that there is spring.jpa before hibernate...</strong></p>\n<p>And finally <code>CustomPhysicalNamingStrategy</code> MUST implement <code>PhysicalNamingStrategy</code> from Hibernate.</p>\n"},{"tags":[],"owner":{"account_id":26647805,"reputation":11,"user_id":20262528,"display_name":"Akash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689676233,"creation_date":1689676233,"answer_id":76711847,"question_id":76711733,"body_markdown":"If you are working with hibernate, Then you can use `name` attribute of `@Column` annotation just like you did in `@Table`. e.g.\r\n\r\n    @Column(name = &quot;year_2022_green&quot;)\r\n    var year2022Green: String = &quot;&quot;;\r\n\r\n","title":"Hibernate Field Naming with Spring Boot","body":"<p>If you are working with hibernate, Then you can use <code>name</code> attribute of <code>@Column</code> annotation just like you did in <code>@Table</code>. e.g.</p>\n<pre><code>@Column(name = &quot;year_2022_green&quot;)\nvar year2022Green: String = &quot;&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689929390,"creation_date":1689929390,"answer_id":76736481,"question_id":76711733,"body_markdown":"There are two problems. With Spring boot 3 and Hibernate 6, `application.properties` must look like this\r\n\r\n    spring.jpa.hibernate.naming.physical-strategy=&lt;path&gt;.CustomPhysicalNamingStrategy\r\n\r\n\r\nNote that *physical-strategy* uses a `CustomPhysicalNamingStrategy` and not the shipped `CamelCaseToUnderscoresNamingStrategy` ","title":"Hibernate Field Naming with Spring Boot","body":"<p>There are two problems. With Spring boot 3 and Hibernate 6, <code>application.properties</code> must look like this</p>\n<pre><code>spring.jpa.hibernate.naming.physical-strategy=&lt;path&gt;.CustomPhysicalNamingStrategy\n</code></pre>\n<p>Note that <em>physical-strategy</em> uses a <code>CustomPhysicalNamingStrategy</code> and not the shipped <code>CamelCaseToUnderscoresNamingStrategy</code></p>\n"}],"owner":{"account_id":4640755,"reputation":11089,"user_id":3935035,"accept_rate":86,"display_name":"four-eyes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736481,"answer_count":3,"score":0,"last_activity_date":1689929390,"creation_date":1689675357,"question_id":76711733,"body_markdown":"In my table I have columns with the following names `price_year_2023_eur `, `date_added`, `yet_another_column_2`, ....\r\nOn the `kotlin` side I want to be able to use `camelCase` column names. Because of that I am trying to convert the column names.\r\n\r\n\r\n```\r\n// kotlin\r\n@Entity\r\n@Table(name = &quot;foo&quot;)\r\nclass Project(\r\n    @Column var priceYear2023Eur : String = &quot;&quot;,\r\n    @Column var dateAdded: Int = 1,\r\n    @Column var name: String = &quot;&quot;,\r\n    @Column var yetAnotherColumn2: Double = 0.0,\r\n)\r\n```\r\n\r\nI created a class (based on [this][1]) in which I extend the `convertToSnakeCase()` to include numbers.\r\n\r\n\r\n```\r\n\r\nclass CustomPhysicalNamingStrategy {\r\n    fun toPhysicalCatalogName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalColumnName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalSchemaName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalSequenceName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    fun toPhysicalTableName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\r\n        return convertToSnakeCase(identifier)\r\n    }\r\n\r\n    private fun convertToSnakeCase(identifier: Identifier): Identifier? {\r\n        val regexCamelCase = &quot;([a-z])([A-Z])&quot;.toRegex()\r\n        val regexNumber = &quot;&quot;&quot;([a-zA-Z])(\\d)&quot;&quot;&quot;.toRegex()\r\n        val replacement = &quot;$1_$2&quot;\r\n        val newNameLetters: String = identifier.text\r\n            .replace(regexCamelCase, replacement)\r\n            .lowercase()\r\n        val newNameNumbers: String = newNameLetters\r\n            .replace(regexNumber, replacement)\r\n            .lowercase()\r\n        return Identifier.toIdentifier(newNameNumbers)\r\n    }\r\n}\r\n\r\n```\r\n\r\nThis class I added to the `application.properties` files like this\r\n\r\n    hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\r\n\r\n\r\nHowever, I am getting\r\n\r\n&gt; org.postgresql.util.PSQLException: ERROR: column p1_0.price_year2023eur does not exist\r\n  Hinweis: Perhaps you meant to reference the column &quot;p1_0.price_year_2023_eur&quot;.\r\n\r\nSomething is not working with the conversion, and I am unsure why. \r\n\r\n\r\n  [1]: https://www.baeldung.com/hibernate-naming-strategy#physical_name","title":"Hibernate Field Naming with Spring Boot","body":"<p>In my table I have columns with the following names <code>price_year_2023_eur </code>, <code>date_added</code>, <code>yet_another_column_2</code>, ....\nOn the <code>kotlin</code> side I want to be able to use <code>camelCase</code> column names. Because of that I am trying to convert the column names.</p>\n<pre><code>// kotlin\n@Entity\n@Table(name = &quot;foo&quot;)\nclass Project(\n    @Column var priceYear2023Eur : String = &quot;&quot;,\n    @Column var dateAdded: Int = 1,\n    @Column var name: String = &quot;&quot;,\n    @Column var yetAnotherColumn2: Double = 0.0,\n)\n</code></pre>\n<p>I created a class (based on <a href=\"https://www.baeldung.com/hibernate-naming-strategy#physical_name\" rel=\"nofollow noreferrer\">this</a>) in which I extend the <code>convertToSnakeCase()</code> to include numbers.</p>\n<pre><code>\nclass CustomPhysicalNamingStrategy {\n    fun toPhysicalCatalogName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalColumnName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalSchemaName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalSequenceName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    fun toPhysicalTableName(identifier: Identifier, jdbcEnv: JdbcEnvironment?): Identifier? {\n        return convertToSnakeCase(identifier)\n    }\n\n    private fun convertToSnakeCase(identifier: Identifier): Identifier? {\n        val regexCamelCase = &quot;([a-z])([A-Z])&quot;.toRegex()\n        val regexNumber = &quot;&quot;&quot;([a-zA-Z])(\\d)&quot;&quot;&quot;.toRegex()\n        val replacement = &quot;$1_$2&quot;\n        val newNameLetters: String = identifier.text\n            .replace(regexCamelCase, replacement)\n            .lowercase()\n        val newNameNumbers: String = newNameLetters\n            .replace(regexNumber, replacement)\n            .lowercase()\n        return Identifier.toIdentifier(newNameNumbers)\n    }\n}\n\n</code></pre>\n<p>This class I added to the <code>application.properties</code> files like this</p>\n<pre><code>hibernate.physical_naming_strategy=org....utils.CustomPhysicalNamingStrategy\n</code></pre>\n<p>However, I am getting</p>\n<blockquote>\n<p>org.postgresql.util.PSQLException: ERROR: column p1_0.price_year2023eur does not exist\nHinweis: Perhaps you meant to reference the column &quot;p1_0.price_year_2023_eur&quot;.</p>\n</blockquote>\n<p>Something is not working with the conversion, and I am unsure why.</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"score":3,"creation_date":1689912676,"post_id":76735055,"comment_id":135283144,"body_markdown":"I am guessing that you probably named your class _String.java_","body":"I am guessing that you probably named your class <i>String.java</i>"},{"owner":{"account_id":8958875,"reputation":3265,"user_id":6682274,"accept_rate":25,"display_name":"Sudhir Ojha"},"score":0,"creation_date":1689912680,"post_id":76735055,"comment_id":135283145,"body_markdown":"Use `sc.next()` or `sc.nextLine()`","body":"Use <code>sc.next()</code> or <code>sc.nextLine()</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1689912756,"post_id":76735055,"comment_id":135283151,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":29034010,"reputation":1,"user_id":22240319,"display_name":"Krishna Yadav"},"score":0,"creation_date":1689913671,"post_id":76735055,"comment_id":135283232,"body_markdown":"I tried by  using  sc.next() , sc.nextLine(), also tried by casting method but the error was same","body":"I tried by  using  sc.next() , sc.nextLine(), also tried by casting method but the error was same"},{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":2,"creation_date":1689920338,"post_id":76735055,"comment_id":135284005,"body_markdown":"Show your code. There is something else going on here but there is no way of knowing what without looking at your runnable code.","body":"Show your code. There is something else going on here but there is no way of knowing what without looking at your runnable code."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689922281,"post_id":76735055,"comment_id":135284324,"body_markdown":"@KrishnaYadav Did you see the comment from @MattClark?","body":"@KrishnaYadav Did you see the comment from @MattClark?"}],"answers":[{"tags":[],"owner":{"account_id":526476,"reputation":27861,"user_id":1790644,"accept_rate":80,"display_name":"Matt Clark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929297,"creation_date":1689929297,"answer_id":76736472,"question_id":76735055,"body_markdown":"I assume that you named you class `String`.\r\n\r\n**Don&#39;t do that.**\r\n\r\nI mean, you can. But try to not reuse names of core objects.\r\n\r\nI used Eclipse to verify and was able to reproduce a very similar message.\r\n\r\n    public class String {\r\n    \r\n    \tpublic void main(String[] args) {\r\n    \r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tString s = sc.nextLine();\r\n    \t\t//         /\\\r\n    \t\t// Type mismatch: cannot convert from java.lang.String to String\r\n    \t}\r\n    }\r\n\r\nIf you _really_ want to name you class _String_, you will need to fully qualify any reference to _java.lang.string_. The below will work, but you should really just change the name of your class.\r\n\r\n    java.lang.String s = sc.nextLine();\r\n","title":"how solve this problem so that I can store the string value to this variable","body":"<p>I assume that you named you class <code>String</code>.</p>\n<p><strong>Don't do that.</strong></p>\n<p>I mean, you can. But try to not reuse names of core objects.</p>\n<p>I used Eclipse to verify and was able to reproduce a very similar message.</p>\n<pre><code>public class String {\n\n    public void main(String[] args) {\n\n        Scanner sc = new Scanner(System.in);\n        String s = sc.nextLine();\n        //         /\\\n        // Type mismatch: cannot convert from java.lang.String to String\n    }\n}\n</code></pre>\n<p>If you <em>really</em> want to name you class <em>String</em>, you will need to fully qualify any reference to <em>java.lang.string</em>. The below will work, but you should really just change the name of your class.</p>\n<pre><code>java.lang.String s = sc.nextLine();\n</code></pre>\n"}],"owner":{"account_id":29034010,"reputation":1,"user_id":22240319,"display_name":"Krishna Yadav"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1689929297,"creation_date":1689912466,"question_id":76735055,"body_markdown":"String.java:8: error: incompatible types: java.lang.String cannot be converted to String\r\n    lastname = sc.next();\r\n\r\n\r\nI tried to store the string value to variable lastname but it is showing error that the variable is in compatible to store string value ","title":"how solve this problem so that I can store the string value to this variable","body":"<p>String.java:8: error: incompatible types: java.lang.String cannot be converted to String\nlastname = sc.next();</p>\n<p>I tried to store the string value to variable lastname but it is showing error that the variable is in compatible to store string value</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1689905938,"post_id":76734735,"comment_id":135282622,"body_markdown":"Can you show a [mcve]? Give a complete program that reproduces your problem, and state what you expected it to do instead of what it currently does.","body":"Can you show a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Give a complete program that reproduces your problem, and state what you expected it to do instead of what it currently does."}],"answers":[{"tags":[],"owner":{"account_id":1233070,"reputation":9484,"user_id":1197251,"display_name":"dominicoder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689906427,"creation_date":1689906427,"answer_id":76734769,"question_id":76734735,"body_markdown":"&gt; The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.\r\n\r\nYou&#39;re misundertanding the &quot;equal&quot; operator. `String one = n.getPhraseX();` does _not_ mean &quot;assign `one` to always reference the value returned by `getPhraseX()`&quot;. It means &quot;_copy_ the _current_ value of `n.getPhraseX()` over to `one`&quot;.\r\n\r\nSo regardless of what you do with the setter for &quot;phrase x&quot;, &quot;one&quot; will continue to hold the value it was assigned.\r\n\r\nTry searching for tutorials and examples for &quot;Java assignment&quot; and &quot;Java copy by value&quot;.","title":"Assigning a method from an instantiated object to a variable","body":"<blockquote>\n<p>The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.</p>\n</blockquote>\n<p>You're misundertanding the &quot;equal&quot; operator. <code>String one = n.getPhraseX();</code> does <em>not</em> mean &quot;assign <code>one</code> to always reference the value returned by <code>getPhraseX()</code>&quot;. It means &quot;<em>copy</em> the <em>current</em> value of <code>n.getPhraseX()</code> over to <code>one</code>&quot;.</p>\n<p>So regardless of what you do with the setter for &quot;phrase x&quot;, &quot;one&quot; will continue to hold the value it was assigned.</p>\n<p>Try searching for tutorials and examples for &quot;Java assignment&quot; and &quot;Java copy by value&quot;.</p>\n"},{"tags":[],"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689929054,"creation_date":1689929054,"answer_id":76736451,"question_id":76734735,"body_markdown":"If you want to be able to do: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + one);\r\n\r\n... without explicitly recalling the function to update the value: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\r\n\r\n... then you could define the variable `one` as being a `Supplier&lt;String&gt;` instead: \r\n\r\n    Supplier&lt;String&gt; one = new Supplier&lt;&gt;() {\r\n        @Override\r\n        public String get() {\r\n            return n.getPhraseX();\r\n        }\r\n\r\n        @Override\r\n        public String toString() {\r\n            return get();\r\n        }\r\n    };\r\n\r\nLike that, when you print `one` inside `System.out.println`, the `toString()` method will be called and that method will invoke the `get()` of the supplier in order to recompute the value.\r\n\r\nIt changes nothing in terms of performance (you still need to invoke the function each time to recompute the value) but it allows you to keep the code &quot;clean&quot; while delegating the task of recomputing the value to the supplier instead of calling it each time. \r\n\r\nHowever, the option of writing directly: \r\n\r\n    System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\r\n\r\n... doesn&#39;t seem that bad either. ","title":"Assigning a method from an instantiated object to a variable","body":"<p>If you want to be able to do:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + one);\n</code></pre>\n<p>... without explicitly recalling the function to update the value:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\n</code></pre>\n<p>... then you could define the variable <code>one</code> as being a <code>Supplier&lt;String&gt;</code> instead:</p>\n<pre><code>Supplier&lt;String&gt; one = new Supplier&lt;&gt;() {\n    @Override\n    public String get() {\n        return n.getPhraseX();\n    }\n\n    @Override\n    public String toString() {\n        return get();\n    }\n};\n</code></pre>\n<p>Like that, when you print <code>one</code> inside <code>System.out.println</code>, the <code>toString()</code> method will be called and that method will invoke the <code>get()</code> of the supplier in order to recompute the value.</p>\n<p>It changes nothing in terms of performance (you still need to invoke the function each time to recompute the value) but it allows you to keep the code &quot;clean&quot; while delegating the task of recomputing the value to the supplier instead of calling it each time.</p>\n<p>However, the option of writing directly:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + n.getPhraseX());\n</code></pre>\n<p>... doesn't seem that bad either.</p>\n"}],"owner":{"account_id":29060214,"reputation":3,"user_id":22261081,"display_name":"droid"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734769,"answer_count":2,"score":0,"last_activity_date":1689929054,"creation_date":1689905670,"question_id":76734735,"body_markdown":"Just to give an example, the beginning of the code I&#39;m working on is similar to what&#39;s below. I have created an object of the N class.\r\n\r\n```\r\nclass Main {\r\n  public static void main(String[] args) {\r\n    N n = new N();\r\n    String one = n.getPhraseX(); \r\n    String two;\r\n    String three;\r\n```\r\n\r\nLets say we have a method in the created class that looks like this:\r\n\r\n```\r\npublic String getPhraseX()\r\nreturn PhraseX;\r\n```\r\n\r\nWhen I assign this method to a variable from the Main class, String one as shown:\r\n\r\n```\r\nString one = n.getPhraseX();\r\n```\r\n\r\nI can&#39;t get a correct value from it without always declaring:\r\n\r\n```\r\none = n.getPhraseX();\r\n```\r\n\r\nafter changing PhraseX&#39;s value through a setter.\r\n\r\nIf I were to change the value of PhraseX through a setter, I cannot afterwards just call upon the method like this:\r\n\r\n```\r\nn.getPhraseX();\r\n```\r\n\r\nand get an updated value. It would give me an outdated value. I have to use one = n.getPhraseX();\r\n\r\nI tested this through:\r\n\r\n```\r\nSystem.out.println(&quot;This is what PhraseX says: &quot; + one);\r\n```\r\n\r\nin the line directly after the get method.\r\n\r\nThe value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.\r\n\r\nI would like to know the specifics as to why this is the case, why the value of the String one isn&#39;t updating upon calling of the method alone.\r\n\r\nI tried exactly as shown above, as well as moving the positioning of the intialized String in the code, as well as trying to tweak the get and set methods.","title":"Assigning a method from an instantiated object to a variable","body":"<p>Just to give an example, the beginning of the code I'm working on is similar to what's below. I have created an object of the N class.</p>\n<pre><code>class Main {\n  public static void main(String[] args) {\n    N n = new N();\n    String one = n.getPhraseX(); \n    String two;\n    String three;\n</code></pre>\n<p>Lets say we have a method in the created class that looks like this:</p>\n<pre><code>public String getPhraseX()\nreturn PhraseX;\n</code></pre>\n<p>When I assign this method to a variable from the Main class, String one as shown:</p>\n<pre><code>String one = n.getPhraseX();\n</code></pre>\n<p>I can't get a correct value from it without always declaring:</p>\n<pre><code>one = n.getPhraseX();\n</code></pre>\n<p>after changing PhraseX's value through a setter.</p>\n<p>If I were to change the value of PhraseX through a setter, I cannot afterwards just call upon the method like this:</p>\n<pre><code>n.getPhraseX();\n</code></pre>\n<p>and get an updated value. It would give me an outdated value. I have to use one = n.getPhraseX();</p>\n<p>I tested this through:</p>\n<pre><code>System.out.println(&quot;This is what PhraseX says: &quot; + one);\n</code></pre>\n<p>in the line directly after the get method.</p>\n<p>The value of String one was not what was most recently set by the setter method, even though it was intialized to always be equal to whatever is returned by the get method.</p>\n<p>I would like to know the specifics as to why this is the case, why the value of the String one isn't updating upon calling of the method alone.</p>\n<p>I tried exactly as shown above, as well as moving the positioning of the intialized String in the code, as well as trying to tweak the get and set methods.</p>\n"},{"tags":["java","jdbc","keycloak"],"answers":[{"tags":[],"owner":{"account_id":23991445,"reputation":46,"user_id":17977545,"display_name":"Amir Mohammad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681413502,"creation_date":1681413502,"answer_id":76009083,"question_id":76007973,"body_markdown":"This happens when there is no database server running at the specified URL.\r\n\r\n&gt; By default, the server uses the dev-file database. This is the default database that the server will use to persist data and only exists for development use-cases.\r\n\r\nCheck [this][1] guide for configuring a database for Keycloak and make sure if you are connecting to a remote database Keycloak has access to the remote system.\r\n\r\n\r\n  [1]: https://www.keycloak.org/server/db","title":"Error in starting Keycloak dev environment server","body":"<p>This happens when there is no database server running at the specified URL.</p>\n<blockquote>\n<p>By default, the server uses the dev-file database. This is the default database that the server will use to persist data and only exists for development use-cases.</p>\n</blockquote>\n<p>Check <a href=\"https://www.keycloak.org/server/db\" rel=\"nofollow noreferrer\">this</a> guide for configuring a database for Keycloak and make sure if you are connecting to a remote database Keycloak has access to the remote system.</p>\n"},{"tags":[],"owner":{"account_id":5799456,"reputation":75,"user_id":4574091,"display_name":"Kuppusamy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689928753,"creation_date":1689928753,"answer_id":76736414,"question_id":76007973,"body_markdown":"Encountered the same error and it seems Keycloak cannot get the default number of connections of 5 to set up the pool and in my mysql DB not sure what was the issue but managed to get Keycloak up and running by setting the following three values as 1:\r\n\r\nKC_DB_POOL_INITIAL_SIZE, KC_DB_POOL_MIN_SIZE and KC_DB_POOL_MAX_SIZE","title":"Error in starting Keycloak dev environment server","body":"<p>Encountered the same error and it seems Keycloak cannot get the default number of connections of 5 to set up the pool and in my mysql DB not sure what was the issue but managed to get Keycloak up and running by setting the following three values as 1:</p>\n<p>KC_DB_POOL_INITIAL_SIZE, KC_DB_POOL_MIN_SIZE and KC_DB_POOL_MAX_SIZE</p>\n"}],"owner":{"account_id":23327984,"reputation":1,"user_id":17404841,"display_name":"Abhipransh Pratap"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5015,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1689928753,"creation_date":1681404626,"question_id":76007973,"body_markdown":"I&#39;ve already set the path variables but still getting this error.\r\nKeycloak-21.0.2\r\n\r\n\r\n```\r\nC:\\Program Files\\keycloak-21.0.2\\bin&gt;kc.bat start-dev\r\n2023-04-13 21:58:58,216 INFO  [org.keycloak.quarkus.runtime.hostname.DefaultHostnameProvider] (main) Hostname settings: Base URL: &lt;unset&gt;, Hostname: &lt;request&gt;, Strict HTTPS: false, Path: &lt;request&gt;, Strict BackChannel: false, Admin URL: &lt;unset&gt;, Admin: &lt;request&gt;, Port: -1, Proxied: false\r\n2023-04-13 21:59:01,941 WARN  [io.quarkus.agroal.runtime.DataSources] (main) Datasource &lt;default&gt; enables XA but transaction recovery is not enabled. Please enable transaction recovery by setting quarkus.transaction-manager.enable-recovery=true, otherwise data may be lost if the application is terminated abruptly\r\n2023-04-13 21:59:06,112 WARN  [org.infinispan.CONFIG] (keycloak-cache-init) ISPN000569: Unable to persist Infinispan internal caches as no global state enabled\r\n2023-04-13 21:59:06,241 WARN  [org.infinispan.PERSISTENCE] (keycloak-cache-init) ISPN000554: jboss-marshalling is deprecated and planned for removal\r\n2023-04-13 21:59:06,264 INFO  [org.infinispan.CONTAINER] (keycloak-cache-init) ISPN000556: Starting user marshaller &#39;org.infinispan.jboss.marshalling.core.JBossUserMarshaller&#39;\r\n2023-04-13 21:59:07,756 WARN  [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator] (JPA Startup Thread: keycloak-default) HHH000342: Could not obtain connection to query metadata: java.sql.SQLException: Acquisition timeout while waiting for new connection\r\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:321)\r\n        at io.agroal.pool.ConnectionPool.getConnection(ConnectionPool.java:249)\r\n        at io.agroal.pool.DataSource.getConnection(DataSource.java:86)\r\n        at io.quarkus.hibernate.orm.runtime.customized.QuarkusConnectionProvider.getConnection(QuarkusConnectionProvider.java:23)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\r\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\r\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\r\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\r\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\r\n        at org.hibernate.boot.internal.SessionFactoryOptionsBuilder.&lt;init&gt;(SessionFactoryOptionsBuilder.java:272)\r\n        at io.quarkus.hibernate.orm.runtime.recording.PrevalidatedQuarkusMetadata.buildSessionFactoryOptionsBuilder(PrevalidatedQuarkusMetadata.java:68)\r\n        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:72)\r\n        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:72)\r\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\r\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\r\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:165)\r\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:66)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.util.concurrent.TimeoutException\r\n        at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\r\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:298)\r\n        ... 23 more\r\n\r\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (development) mode\r\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to obtain JDBC connection\r\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Acquisition timeout while waiting for new connection\r\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the &#39;--verbose&#39; option. Also you can use &#39;--help&#39; to see the details about the usage of the particular command.\r\n```\r\n\r\nI was trying to open the dev server of Keycloak but in trun keep getting this instead.","title":"Error in starting Keycloak dev environment server","body":"<p>I've already set the path variables but still getting this error.\nKeycloak-21.0.2</p>\n<pre><code>C:\\Program Files\\keycloak-21.0.2\\bin&gt;kc.bat start-dev\n2023-04-13 21:58:58,216 INFO  [org.keycloak.quarkus.runtime.hostname.DefaultHostnameProvider] (main) Hostname settings: Base URL: &lt;unset&gt;, Hostname: &lt;request&gt;, Strict HTTPS: false, Path: &lt;request&gt;, Strict BackChannel: false, Admin URL: &lt;unset&gt;, Admin: &lt;request&gt;, Port: -1, Proxied: false\n2023-04-13 21:59:01,941 WARN  [io.quarkus.agroal.runtime.DataSources] (main) Datasource &lt;default&gt; enables XA but transaction recovery is not enabled. Please enable transaction recovery by setting quarkus.transaction-manager.enable-recovery=true, otherwise data may be lost if the application is terminated abruptly\n2023-04-13 21:59:06,112 WARN  [org.infinispan.CONFIG] (keycloak-cache-init) ISPN000569: Unable to persist Infinispan internal caches as no global state enabled\n2023-04-13 21:59:06,241 WARN  [org.infinispan.PERSISTENCE] (keycloak-cache-init) ISPN000554: jboss-marshalling is deprecated and planned for removal\n2023-04-13 21:59:06,264 INFO  [org.infinispan.CONTAINER] (keycloak-cache-init) ISPN000556: Starting user marshaller 'org.infinispan.jboss.marshalling.core.JBossUserMarshaller'\n2023-04-13 21:59:07,756 WARN  [org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator] (JPA Startup Thread: keycloak-default) HHH000342: Could not obtain connection to query metadata: java.sql.SQLException: Acquisition timeout while waiting for new connection\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:321)\n        at io.agroal.pool.ConnectionPool.getConnection(ConnectionPool.java:249)\n        at io.agroal.pool.DataSource.getConnection(DataSource.java:86)\n        at io.quarkus.hibernate.orm.runtime.customized.QuarkusConnectionProvider.getConnection(QuarkusConnectionProvider.java:23)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:181)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:68)\n        at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:35)\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:101)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:263)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:237)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n        at org.hibernate.engine.jdbc.internal.JdbcServicesImpl.configure(JdbcServicesImpl.java:51)\n        at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.configureService(StandardServiceRegistryImpl.java:107)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:246)\n        at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:214)\n        at org.hibernate.boot.internal.SessionFactoryOptionsBuilder.&lt;init&gt;(SessionFactoryOptionsBuilder.java:272)\n        at io.quarkus.hibernate.orm.runtime.recording.PrevalidatedQuarkusMetadata.buildSessionFactoryOptionsBuilder(PrevalidatedQuarkusMetadata.java:68)\n        at io.quarkus.hibernate.orm.runtime.boot.FastBootEntityManagerFactoryBuilder.build(FastBootEntityManagerFactoryBuilder.java:72)\n        at io.quarkus.hibernate.orm.runtime.FastBootHibernatePersistenceProvider.createEntityManagerFactory(FastBootHibernatePersistenceProvider.java:72)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:80)\n        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:55)\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$LazyPersistenceUnit.get(JPAConfig.java:165)\n        at io.quarkus.hibernate.orm.runtime.JPAConfig$1.run(JPAConfig.java:66)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.util.concurrent.TimeoutException\n        at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:204)\n        at io.agroal.pool.ConnectionPool.handlerFromSharedCache(ConnectionPool.java:298)\n        ... 23 more\n\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to start server in (development) mode\n2023-04-13 21:59:14,212 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Failed to obtain JDBC connection\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) ERROR: Acquisition timeout while waiting for new connection\n2023-04-13 21:59:14,214 ERROR [org.keycloak.quarkus.runtime.cli.ExecutionExceptionHandler] (main) For more details run the same command passing the '--verbose' option. Also you can use '--help' to see the details about the usage of the particular command.\n</code></pre>\n<p>I was trying to open the dev server of Keycloak but in trun keep getting this instead.</p>\n"},{"tags":["java","neo4j","spring-data-neo4j","neo4j-ogm"],"answers":[{"tags":[],"owner":{"account_id":16156328,"reputation":21,"user_id":11663480,"display_name":"Vladyslav Mysiura"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689928656,"creation_date":1689927920,"answer_id":76736318,"question_id":76614144,"body_markdown":"I found out what caused this problem. It was the call of this asynchronous method:\r\n\r\n```java\r\nemailService.sendPayoutCreatedEmailAsync(employmentId, payout, userDetails); // fire-and-forget\r\n```\r\n\r\nThe method above is called just after the `addEmploymentPayout` one.\r\n\r\nThis is a definition of this method which is called another non-ansync method - `sendPayoutCreatedEmail` (this method has calls to repository methods):\r\n\r\n```java\r\n@Override\r\npublic CompletableFuture&lt;Void&gt; sendPayoutCreatedEmailAsync(String employmentId, EmploymentPayoutDTO payout, InfotempUserDetails userDetails) {\r\n\r\n\tvar future = CompletableFuture.runAsync(() -&gt; {\r\n\t    this.sendPayoutCreatedEmail(employmentId, payout, userDetails);\r\n\t});\r\n\r\n\treturn future;\r\n}\r\n```\r\n\r\n### SOLUTION:\r\n\r\nIt works (don&#39;t know how, but it does) if you change the asynchronous method call to a call from a new thread. Like this:\r\n\r\n```java\r\nnew Thread(() -&gt; {\r\n\temailService.sendPayoutCreatedEmail(employmentId, payout, userDetails);\r\n}).start();\r\n```\r\n","title":"Why I&#39;m getting &#39;Error mapping GraphModel&#39; error with neo4j OGM","body":"<p>I found out what caused this problem. It was the call of this asynchronous method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>emailService.sendPayoutCreatedEmailAsync(employmentId, payout, userDetails); // fire-and-forget\n</code></pre>\n<p>The method above is called just after the <code>addEmploymentPayout</code> one.</p>\n<p>This is a definition of this method which is called another non-ansync method - <code>sendPayoutCreatedEmail</code> (this method has calls to repository methods):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic CompletableFuture&lt;Void&gt; sendPayoutCreatedEmailAsync(String employmentId, EmploymentPayoutDTO payout, InfotempUserDetails userDetails) {\n\n    var future = CompletableFuture.runAsync(() -&gt; {\n        this.sendPayoutCreatedEmail(employmentId, payout, userDetails);\n    });\n\n    return future;\n}\n</code></pre>\n<h3>SOLUTION:</h3>\n<p>It works (don't know how, but it does) if you change the asynchronous method call to a call from a new thread. Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new Thread(() -&gt; {\n    emailService.sendPayoutCreatedEmail(employmentId, payout, userDetails);\n}).start();\n</code></pre>\n"}],"owner":{"account_id":16156328,"reputation":21,"user_id":11663480,"display_name":"Vladyslav Mysiura"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736318,"answer_count":1,"score":0,"last_activity_date":1689928656,"creation_date":1688485133,"question_id":76614144,"body_markdown":"# Inputs:\r\n\r\n1. I am using a server cluster structure with 1 LEADER and 2 FOLLOWERS.\r\n2. Nodes structure\r\n   [![node structure](https://i.stack.imgur.com/wWFTr.png)](https://i.stack.imgur.com/wWFTr.png)\r\n\r\nSave Payout method:\r\n\r\n```java\r\n@Override\r\n@UseBookmark\r\n@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\r\npublic void addEmploymentPayout(EmploymentPayoutDTO payoutDto, String employmentId) {\r\n    try {\r\n        // Map\r\n        var payout = dozerMapper.map(payoutDto, EmploymentPayout.class);\r\n\r\n        // Save\r\n        var employment = profileService.findEmploymentByUuid(employmentId);\r\n\r\n        var container = employmentPayoutContainerRepository.getContainerIfExist(employmentId)\r\n                                                           .orElse(new EmploymentPayoutContainer());\r\n        container.setEmployment(employment);\r\n\r\n        var payouts = Optional.ofNullable(container.getEmploymentPayouts())\r\n                              .orElse(new ArrayList&lt;&gt;());\r\n        payouts.add(payout);\r\n        container.setEmploymentPayouts(payouts);\r\n        employmentPayoutContainerRepository.save(container);\r\n\r\n        // employmentPayout.setEmploymentPayoutContainer(container);\r\n        // employmentPayoutRepository.save(payout);\r\n        // employmentPayoutRepository.save(employmentPayout, 2);\r\n    } catch (Exception e) {\r\n        LOG.error(ExceptionUtils.getStackTrace(e));\r\n    }\r\n}\r\n```\r\n\r\nMethod `getAllPureEmploymentsByProfileId`:\r\n```java\r\n@Query(&quot;MATCH (p:Profile) WHERE p.uuid=$profileId &quot;\r\n\t+ &quot;MATCH (p)-[:HAS_PROFILE_EMPLOYMENT_CONTAINER]-&gt;(pec:ProfileEmploymentContainer) &quot;\r\n\t+ &quot;MATCH path = (pec)-[:USES_PROFILE_EMPLOYMENT]-(pe:ProfileEmployment) RETURN pec, path&quot;)\r\nProfileEmploymentContainer getAllPureEmploymentsByProfileId( @Param(&quot;profileId&quot;) String profileId);\r\n```\r\n\r\n# Description\r\n\r\nAfter saving (adding) a new `EmploymentPayout` (`addEmploymentPayout`), when I try to load all or part of the path (`getAllPureEmploymentsByProfileId`), I get this error. But the error disappears after restarting the server.\r\nCan you help me understand what I am doing wrong? Thanks a lot!\r\n\r\nError:\r\n\r\n```log\r\norg.springframework.dao.InvalidDataAccessApiUsageException: Error mapping GraphModel; nested exception is org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\r\n\tat org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:125)\r\n\tat org.springframework.data.neo4j.repository.support.Neo4jPersistenceExceptionTranslator.translateExceptionIfPossible(Neo4jPersistenceExceptionTranslator.java:31)\r\n\tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n\tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n\tat com.sun.proxy.$Proxy128.getAllPureEmploymentsByProfileId(Unknown Source)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl.getEmploymentsForUser(ProfileServiceImpl.java:7410)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl$$FastClassBySpringCGLIB$$9ac11082.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n\tat com.infotemp.neo4j.service.impl.ProfileServiceImpl$$EnhancerBySpringCGLIB$$56efb754.getEmploymentsForUser(&lt;generated&gt;)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getProfileEmployments(VacationCompensationAccountServiceImpl.java:536)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getCurrentEmployment(VacationCompensationAccountServiceImpl.java:73)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$FastClassBySpringCGLIB$$18090ab5.invoke(&lt;generated&gt;)\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\r\n\tat com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$EnhancerBySpringCGLIB$$5ea6899a.getCurrentEmployment(&lt;generated&gt;)\r\n\tat com.infotemp.controller.ProfileController.getVacationCompansation(ProfileController.java:2096)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\tat org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:182)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n\tat org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:829)\r\nCaused by: org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:164)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.lambda$map$2(GraphEntityMapper.java:115)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.map(GraphEntityMapper.java:117)\r\n\tat org.neo4j.ogm.context.GraphRowModelMapper.map(GraphRowModelMapper.java:60)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.lambda$executeAndMap$1(ExecuteQueriesDelegate.java:165)\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:590)\r\n\tat org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:564)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.executeAndMap(ExecuteQueriesDelegate.java:150)\r\n\tat org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.query(ExecuteQueriesDelegate.java:117)\r\n\tat org.neo4j.ogm.session.Neo4jSession.query(Neo4jSession.java:425)\r\n\tat jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.lambda$invoke$1(SharedSessionCreator.java:121)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invokeInTransaction(SharedSessionCreator.java:159)\r\n\tat org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invoke(SharedSessionCreator.java:123)\r\n\tat com.sun.proxy.$Proxy89.query(Unknown Source)\r\n\tat org.springframework.data.neo4j.repository.query.GraphQueryExecution$SingleEntityExecution.execute(GraphQueryExecution.java:68)\r\n\tat org.springframework.data.neo4j.repository.query.GraphRepositoryQuery.doExecute(GraphRepositoryQuery.java:76)\r\n\tat org.springframework.data.neo4j.repository.query.AbstractGraphRepositoryQuery.execute(AbstractGraphRepositoryQuery.java:57)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor$QueryMethodInvoker.invoke(QueryExecutorMethodInterceptor.java:195)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n\t... 120 more\r\nCaused by: java.lang.NullPointerException\r\n\tat org.neo4j.ogm.session.Utils.coerceTypes(Utils.java:79)\r\n\tat org.neo4j.ogm.metadata.FieldInfo.write(FieldInfo.java:449)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.createRelationshipEntity(GraphEntityMapper.java:419)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapRelationshipEntity(GraphEntityMapper.java:354)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapRelationships(GraphEntityMapper.java:330)\r\n\tat org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:158)\r\n\t... 150 more\r\n```\r\n\r\n\r\nI tried to add these annotations but it didn&#39;t help:\r\n\r\n - `@UseBookmark`\r\n - `@Transactional(rollbackFor = Exception.class,\r\n   propagation = Propagation.REQUIRED)`\r\n\r\n**UPD**\r\n\r\nI don&#39;t have that problem with standalone (no clusters) Neoj4 server.","title":"Why I&#39;m getting &#39;Error mapping GraphModel&#39; error with neo4j OGM","body":"<h1>Inputs:</h1>\n<ol>\n<li>I am using a server cluster structure with 1 LEADER and 2 FOLLOWERS.</li>\n<li>Nodes structure\n<a href=\"https://i.stack.imgur.com/wWFTr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wWFTr.png\" alt=\"node structure\" /></a></li>\n</ol>\n<p>Save Payout method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n@UseBookmark\n@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)\npublic void addEmploymentPayout(EmploymentPayoutDTO payoutDto, String employmentId) {\n    try {\n        // Map\n        var payout = dozerMapper.map(payoutDto, EmploymentPayout.class);\n\n        // Save\n        var employment = profileService.findEmploymentByUuid(employmentId);\n\n        var container = employmentPayoutContainerRepository.getContainerIfExist(employmentId)\n                                                           .orElse(new EmploymentPayoutContainer());\n        container.setEmployment(employment);\n\n        var payouts = Optional.ofNullable(container.getEmploymentPayouts())\n                              .orElse(new ArrayList&lt;&gt;());\n        payouts.add(payout);\n        container.setEmploymentPayouts(payouts);\n        employmentPayoutContainerRepository.save(container);\n\n        // employmentPayout.setEmploymentPayoutContainer(container);\n        // employmentPayoutRepository.save(payout);\n        // employmentPayoutRepository.save(employmentPayout, 2);\n    } catch (Exception e) {\n        LOG.error(ExceptionUtils.getStackTrace(e));\n    }\n}\n</code></pre>\n<p>Method <code>getAllPureEmploymentsByProfileId</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;MATCH (p:Profile) WHERE p.uuid=$profileId &quot;\n    + &quot;MATCH (p)-[:HAS_PROFILE_EMPLOYMENT_CONTAINER]-&gt;(pec:ProfileEmploymentContainer) &quot;\n    + &quot;MATCH path = (pec)-[:USES_PROFILE_EMPLOYMENT]-(pe:ProfileEmployment) RETURN pec, path&quot;)\nProfileEmploymentContainer getAllPureEmploymentsByProfileId( @Param(&quot;profileId&quot;) String profileId);\n</code></pre>\n<h1>Description</h1>\n<p>After saving (adding) a new <code>EmploymentPayout</code> (<code>addEmploymentPayout</code>), when I try to load all or part of the path (<code>getAllPureEmploymentsByProfileId</code>), I get this error. But the error disappears after restarting the server.\nCan you help me understand what I am doing wrong? Thanks a lot!</p>\n<p>Error:</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: Error mapping GraphModel; nested exception is org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\n    at org.springframework.data.neo4j.transaction.SessionFactoryUtils.convertOgmAccessException(SessionFactoryUtils.java:125)\n    at org.springframework.data.neo4j.repository.support.Neo4jPersistenceExceptionTranslator.translateExceptionIfPossible(Neo4jPersistenceExceptionTranslator.java:31)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy128.getAllPureEmploymentsByProfileId(Unknown Source)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl.getEmploymentsForUser(ProfileServiceImpl.java:7410)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl$$FastClassBySpringCGLIB$$9ac11082.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at com.infotemp.neo4j.service.impl.ProfileServiceImpl$$EnhancerBySpringCGLIB$$56efb754.getEmploymentsForUser(&lt;generated&gt;)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getProfileEmployments(VacationCompensationAccountServiceImpl.java:536)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl.getCurrentEmployment(VacationCompensationAccountServiceImpl.java:73)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$FastClassBySpringCGLIB$$18090ab5.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:783)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:753)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:698)\n    at com.infotemp.neo4j.service.impl.VacationCompensationAccountServiceImpl$$EnhancerBySpringCGLIB$$5ea6899a.getCurrentEmployment(&lt;generated&gt;)\n    at com.infotemp.controller.ProfileController.getVacationCompansation(ProfileController.java:2096)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter.doFilter(OAuth2AuthenticationProcessingFilter.java:182)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:540)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:359)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:889)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1735)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: org.neo4j.ogm.exception.core.MappingException: Error mapping GraphModel\n    at org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:164)\n    at org.neo4j.ogm.context.GraphEntityMapper.lambda$map$2(GraphEntityMapper.java:115)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.neo4j.ogm.context.GraphEntityMapper.map(GraphEntityMapper.java:117)\n    at org.neo4j.ogm.context.GraphRowModelMapper.map(GraphRowModelMapper.java:60)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.lambda$executeAndMap$1(ExecuteQueriesDelegate.java:165)\n    at org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:590)\n    at org.neo4j.ogm.session.Neo4jSession.doInTransaction(Neo4jSession.java:564)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.executeAndMap(ExecuteQueriesDelegate.java:150)\n    at org.neo4j.ogm.session.delegates.ExecuteQueriesDelegate.query(ExecuteQueriesDelegate.java:117)\n    at org.neo4j.ogm.session.Neo4jSession.query(Neo4jSession.java:425)\n    at jdk.internal.reflect.GeneratedMethodAccessor114.invoke(Unknown Source)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:282)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.lambda$invoke$1(SharedSessionCreator.java:121)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invokeInTransaction(SharedSessionCreator.java:159)\n    at org.springframework.data.neo4j.transaction.SharedSessionCreator$SharedSessionInvocationHandler.invoke(SharedSessionCreator.java:123)\n    at com.sun.proxy.$Proxy89.query(Unknown Source)\n    at org.springframework.data.neo4j.repository.query.GraphQueryExecution$SingleEntityExecution.execute(GraphQueryExecution.java:68)\n    at org.springframework.data.neo4j.repository.query.GraphRepositoryQuery.doExecute(GraphRepositoryQuery.java:76)\n    at org.springframework.data.neo4j.repository.query.AbstractGraphRepositoryQuery.execute(AbstractGraphRepositoryQuery.java:57)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor$QueryMethodInvoker.invoke(QueryExecutorMethodInterceptor.java:195)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:152)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:130)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 120 more\nCaused by: java.lang.NullPointerException\n    at org.neo4j.ogm.session.Utils.coerceTypes(Utils.java:79)\n    at org.neo4j.ogm.metadata.FieldInfo.write(FieldInfo.java:449)\n    at org.neo4j.ogm.context.GraphEntityMapper.createRelationshipEntity(GraphEntityMapper.java:419)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapRelationshipEntity(GraphEntityMapper.java:354)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapRelationships(GraphEntityMapper.java:330)\n    at org.neo4j.ogm.context.GraphEntityMapper.mapContentOf(GraphEntityMapper.java:158)\n    ... 150 more\n</code></pre>\n<p>I tried to add these annotations but it didn't help:</p>\n<ul>\n<li><code>@UseBookmark</code></li>\n<li><code>@Transactional(rollbackFor = Exception.class, propagation = Propagation.REQUIRED)</code></li>\n</ul>\n<p><strong>UPD</strong></p>\n<p>I don't have that problem with standalone (no clusters) Neoj4 server.</p>\n"},{"tags":["java","string","stringbuilder"],"comments":[{"owner":{"account_id":2571824,"reputation":302,"user_id":2230348,"display_name":"Omar Zaarour"},"score":3,"creation_date":1507821939,"post_id":46713326,"comment_id":80373168,"body_markdown":"The line before the last is useless, you should assign that back to a string.So basically line 6 and 8 are doing exactly the same. If you want to test you theory, do System.out.println(s.ToString()).\n\nThat being said, the println function is doing it for you in both cases, so basically, println behind the scenes, takes the value of your string builder which is a string and print it.","body":"The line before the last is useless, you should assign that back to a string.So basically line 6 and 8 are doing exactly the same. If you want to test you theory, do System.out.println(s.ToString()).  That being said, the println function is doing it for you in both cases, so basically, println behind the scenes, takes the value of your string builder which is a string and print it."}],"answers":[{"tags":[],"owner":{"account_id":8737108,"reputation":30927,"user_id":6535399,"display_name":"bartonjs"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1507822074,"creation_date":1507822074,"answer_id":46713458,"question_id":46713326,"body_markdown":"There&#39;s nothing different between line 6 and line 8.\r\n\r\n[PrintStream.println(Object)](https://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html#println-java.lang.Object-) calls [string.valueOf(Object)](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf(java.lang.Object)) which calls the object&#39;s `toString()` method, and that gets printed.\r\n\r\n`System.out.println(s)` and `System.out.println(s.toString())` have the same output (unless `s` is `null`, in which case the latter throws an exception).\r\n\r\nThe reason you call `s.toString()` directly is to get the current &quot;built&quot; value from the StringBuilder as a `string` so you can pass it on to other code which expects a `string`.  If the code you want to call takes a `StringBuilder` you could just pass `s`, but then the called code has the ability to modify your value (they can&#39;t with `string` because it is an immutable data type).","title":"Why do we need to use toString method with StringBuilder?","body":"<p>There's nothing different between line 6 and line 8.</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/PrintStream.html#println-java.lang.Object-\" rel=\"noreferrer\">PrintStream.println(Object)</a> calls <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#valueOf(java.lang.Object)\" rel=\"noreferrer\">string.valueOf(Object)</a> which calls the object's <code>toString()</code> method, and that gets printed.</p>\n\n<p><code>System.out.println(s)</code> and <code>System.out.println(s.toString())</code> have the same output (unless <code>s</code> is <code>null</code>, in which case the latter throws an exception).</p>\n\n<p>The reason you call <code>s.toString()</code> directly is to get the current \"built\" value from the StringBuilder as a <code>string</code> so you can pass it on to other code which expects a <code>string</code>.  If the code you want to call takes a <code>StringBuilder</code> you could just pass <code>s</code>, but then the called code has the ability to modify your value (they can't with <code>string</code> because it is an immutable data type).</p>\n"},{"tags":[],"owner":{"account_id":6703345,"reputation":61,"user_id":5169174,"display_name":"Micktommyord"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507822130,"creation_date":1507822130,"answer_id":46713477,"question_id":46713326,"body_markdown":"System.out.println can print out arrays of chars (line6)\r\ns.toString() is used to actually place the stringbuilder contents into a string. in your code you are not setting it to a string variable so nothing will happen... so on line8 the array of chars is printed again from the contents of your string builder.\r\n\r\nif you add\r\nstring str = s.toString();\r\nSystem.out.println(str);\r\n\r\nthen the string will print the string variable made from the stringbuilder.\r\n\r\n","title":"Why do we need to use toString method with StringBuilder?","body":"<p>System.out.println can print out arrays of chars (line6)\ns.toString() is used to actually place the stringbuilder contents into a string. in your code you are not setting it to a string variable so nothing will happen... so on line8 the array of chars is printed again from the contents of your string builder.</p>\n\n<p>if you add\nstring str = s.toString();\nSystem.out.println(str);</p>\n\n<p>then the string will print the string variable made from the stringbuilder.</p>\n"},{"tags":[],"owner":{"account_id":12868075,"reputation":31,"user_id":9307605,"display_name":"Dharani Manickavasagam"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548456070,"creation_date":1548456070,"answer_id":54373750,"question_id":46713326,"body_markdown":"StringBuilder needs toString() to convert the mutable sequence of characters to String. \r\n\r\nSo technically, to return a StringBuilder obj from a method returning String, you have to convert the StringBuilder to String using toString().\r\n\r\nYou can also sysout a StringBuilder obj without the method toString() to get the values directly","title":"Why do we need to use toString method with StringBuilder?","body":"<p>StringBuilder needs toString() to convert the mutable sequence of characters to String. </p>\n\n<p>So technically, to return a StringBuilder obj from a method returning String, you have to convert the StringBuilder to String using toString().</p>\n\n<p>You can also sysout a StringBuilder obj without the method toString() to get the values directly</p>\n"}],"owner":{"account_id":11750498,"reputation":55,"user_id":8599883,"accept_rate":80,"display_name":"Mahesh Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2674,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":46713458,"answer_count":3,"score":1,"last_activity_date":1689928627,"creation_date":1507821707,"question_id":46713326,"body_markdown":"What is the difference between line 6 and line 8?\r\n\r\nThey both print the same string. Why do we need to use toString with StringBuilder?\r\n\r\n    StringBuilder s = new StringBuilder(&quot;hello&quot;); // Line 1\r\n    System.out.println(s); // Line 2\r\n\r\n    s.append(&quot;hi&quot;); // Line 3\r\n    System.out.println(s);\r\n\r\n    s.append(&quot;okk&quot;);\r\n    System.out.println(s); // Line 6\r\n\r\n    s.toString();\r\n    System.out.println(s); // Line 8\r\n\r\n","title":"Why do we need to use toString method with StringBuilder?","body":"<p>What is the difference between line 6 and line 8?</p>\n<p>They both print the same string. Why do we need to use toString with StringBuilder?</p>\n<pre><code>StringBuilder s = new StringBuilder(&quot;hello&quot;); // Line 1\nSystem.out.println(s); // Line 2\n\ns.append(&quot;hi&quot;); // Line 3\nSystem.out.println(s);\n\ns.append(&quot;okk&quot;);\nSystem.out.println(s); // Line 6\n\ns.toString();\nSystem.out.println(s); // Line 8\n</code></pre>\n"},{"tags":["java","maven","native","modular","jlink"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689609721,"post_id":76706172,"comment_id":135234443,"body_markdown":"Please post the shell script you mentioned","body":"Please post the shell script you mentioned"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689612746,"post_id":76706172,"comment_id":135235103,"body_markdown":"@g00se : thanks for the reply; the script is the default one, generated by the pug-in; it is mostly the same for all the apps I have jlink-ed. Anyway, for completeness, I have added it to the question.","body":"@g00se : thanks for the reply; the script is the default one, generated by the pug-in; it is mostly the same for all the apps I have jlink-ed. Anyway, for completeness, I have added it to the question."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689613143,"post_id":76706172,"comment_id":135235189,"body_markdown":"But how is that script getting invoked? What parameters are being passed?","body":"But how is that script getting invoked? What parameters are being passed?"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689623279,"post_id":76706172,"comment_id":135237151,"body_markdown":"None; the application (at least in its current state) needs (or knows) no parameter. Note that any parameter passed to the JVM after the `-m ...&quot; parameter (the &quot;$@&quot; at the end of the last script line) is ignored by the JVM itself and passed directly to the application.","body":"None; the application (at least in its current state) needs (or knows) no parameter. Note that any parameter passed to the JVM after the `-m ...&quot; parameter (the &quot;$@&quot; at the end of the last script line) is ignored by the JVM itself and passed directly to the application."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689623625,"post_id":76706172,"comment_id":135237200,"body_markdown":"I think you might try to intepolate `-Djava.library.path=foo`","body":"I think you might try to intepolate <code>-Djava.library.path=foo</code>"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689677507,"post_id":76706172,"comment_id":135244497,"body_markdown":"Well, there is no physical path to the these libraries: they are within the `bin/modules` binary file, which is packed by jlink and added to the module and to the class path. This is the whole point of the jlink (and of the Maven jlink plug-in which is essentially a higher-level interface to it): to prepare a bunch of files containing EVERYTHING (and as far as possible ONLY) what it is needed to run the application (including a minimal Java executable), so that copying the pack to another machine (of a compatible platform, of course) you get a runnable application with no other prerequisites.","body":"Well, there is no physical path to the these libraries: they are within the <code>bin&#47;modules</code> binary file, which is packed by jlink and added to the module and to the class path. This is the whole point of the jlink (and of the Maven jlink plug-in which is essentially a higher-level interface to it): to prepare a bunch of files containing EVERYTHING (and as far as possible ONLY) what it is needed to run the application (including a minimal Java executable), so that copying the pack to another machine (of a compatible platform, of course) you get a runnable application with no other prerequisites."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689682170,"post_id":76706172,"comment_id":135245505,"body_markdown":"Yes, I know that&#39;s the general theory. Clearly that&#39;s not happened in this case, as what would normally be a shared library has *not* been linked properly, so I was suggesting that as a temporary workaround. Is it possible for us to get to the whole project?","body":"Yes, I know that&#39;s the general theory. Clearly that&#39;s not happened in this case, as what would normally be a shared library has <i>not</i> been linked properly, so I was suggesting that as a temporary workaround. Is it possible for us to get to the whole project?"},{"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"score":0,"creation_date":1689685666,"post_id":76706172,"comment_id":135246333,"body_markdown":"The whole project is quite large; I&#39;ll try to put together a minimal project and rephrase the question.","body":"The whole project is quite large; I&#39;ll try to put together a minimal project and rephrase the question."}],"answers":[{"tags":[],"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689928625,"creation_date":1689928625,"answer_id":76736397,"question_id":76706172,"body_markdown":"I am far from sure this is the best solution, as it is rather cumbersome, but it is the only one I found so far, it works (mostly) and may be useful to someone else too. I want to thank SPASI in [the LWJGL forum][1], who greatly helped me in finding it.\r\n\r\n1) **Add native libraries modules** to `module-info.java`: this ensures that the libraries will be found within the runnable image generated by the jlink pug-in. In practice, add to `module-info.java` one line like\r\n```\r\nrequires transitive org.lwjgl.natives;\r\n```\r\nfor each native library.\r\n\r\n2) Unfortunately, both Eclipse and the Maven compiler seem unable to locate these modules within the local Maven repo `.m2`. The solution is three-fold:\r\n\r\n2a) **Copy the dependencies** from the repo to a local folder, for instance `target/modules` using the `copy-dependencies` goal of the Maven dependency plug-in; this must be done **before** the Maven compile phase (I use the `generate-resources` phase), for instance:\r\n```\r\n&lt;plugin&gt;\r\n\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.6.0&lt;/version&gt;\r\n\t&lt;configuration&gt;\r\n\t\t&lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n\t\t&lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\r\n\t\t&lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\r\n\t\t&lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\r\n\t&lt;/configuration&gt;\r\n\t&lt;executions&gt;\r\n\t\t&lt;execution&gt;\r\n\t\t\t&lt;id&gt;copy-dependencies&lt;/id&gt;\r\n\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t&lt;goals&gt;\r\n\t\t\t\t&lt;goal&gt;copy-dependencies&lt;/goal&gt;\r\n\t\t\t&lt;/goals&gt;\r\n\t\t&lt;/execution&gt;\r\n\t&lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\n2b) **Maven compiler plug-in**: point this plug-in to the folder where the dependencies have been copied, adding this directive to the plug-in configuration:\r\n```\r\n&lt;compilerArgs&gt;\r\n\t&lt;arg&gt;--module-path&lt;/arg&gt;\r\n\t&lt;arg&gt;${project.build.directory}/modules&lt;/arg&gt;\r\n&lt;/compilerArgs&gt;\r\n```\r\n\r\n2c) **Maven jlink plug-in**: point this plug-in also to the same folder, adding the following directive to the plug-in configuration:\r\n```\r\n&lt;modulePaths&gt;\r\n\t&lt;modulePath&gt;${project.build.directory}/modules&lt;/modulePath&gt;\r\n&lt;/modulePaths&gt;\r\n```\r\n\r\nNow, Maven should correctly compile the project and jlink a runnable application.\r\n\r\n3) **Eclipse** (and perhaps other Java IDE&#39;s too): this leaves unsolved the issue with Eclipse not resolving the native library modules added to the `module-info.java` in step 1.\r\n\r\nThis precludes building the project from within Eclipse, which I find very useful at least for debugging. Maybe this can be solved for the libraries whose JAR&#39;s are already modular (but I do not know how), but surely it **cannot** be solved for the JAR&#39;s which are NOT modular and have to be modularised (for instance with the org.moditect:moditect-maven-plugin): their modules simply do not exist in any well-known location and are generated out-of-source (this happen to me with the `io.github.spair:imgui-java-natives-&lt;platform&gt;` which is not modular and is often used with openGL / Vulkan projects).\r\n\r\nAs I use Maven only via command line, I work-around this preparing (our of the Java source and parallel to the main project `pom.xml`) 2 versions of the `module-info.java`, one without and one with the added modules.\r\n\r\nNormally the project `module-info.java` is kept equal to the first, shorter, version; when I have to launch a Maven build, a small shell script overwrites `module-info` with the extended version, run the required `mvn` command(s) and finally overwrites `module-info.java` back with the &#39;normal&#39; version. Not really fool-proof, but usable.\r\n\r\n\r\n  [1]: http://forum.lwjgl.org/index.php?topic=7271.0","title":"Maven jlink plugin: native libraries not found when running the resulting image","body":"<p>I am far from sure this is the best solution, as it is rather cumbersome, but it is the only one I found so far, it works (mostly) and may be useful to someone else too. I want to thank SPASI in <a href=\"http://forum.lwjgl.org/index.php?topic=7271.0\" rel=\"nofollow noreferrer\">the LWJGL forum</a>, who greatly helped me in finding it.</p>\n<ol>\n<li><strong>Add native libraries modules</strong> to <code>module-info.java</code>: this ensures that the libraries will be found within the runnable image generated by the jlink pug-in. In practice, add to <code>module-info.java</code> one line like</li>\n</ol>\n<pre><code>requires transitive org.lwjgl.natives;\n</code></pre>\n<p>for each native library.</p>\n<ol start=\"2\">\n<li>Unfortunately, both Eclipse and the Maven compiler seem unable to locate these modules within the local Maven repo <code>.m2</code>. The solution is three-fold:</li>\n</ol>\n<p>2a) <strong>Copy the dependencies</strong> from the repo to a local folder, for instance <code>target/modules</code> using the <code>copy-dependencies</code> goal of the Maven dependency plug-in; this must be done <strong>before</strong> the Maven compile phase (I use the <code>generate-resources</code> phase), for instance:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.6.0&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n        &lt;overWriteReleases&gt;false&lt;/overWriteReleases&gt;\n        &lt;overWriteSnapshots&gt;false&lt;/overWriteSnapshots&gt;\n        &lt;overWriteIfNewer&gt;true&lt;/overWriteIfNewer&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;copy-dependencies&lt;/id&gt;\n            &lt;phase&gt;generate-resources&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>2b) <strong>Maven compiler plug-in</strong>: point this plug-in to the folder where the dependencies have been copied, adding this directive to the plug-in configuration:</p>\n<pre><code>&lt;compilerArgs&gt;\n    &lt;arg&gt;--module-path&lt;/arg&gt;\n    &lt;arg&gt;${project.build.directory}/modules&lt;/arg&gt;\n&lt;/compilerArgs&gt;\n</code></pre>\n<p>2c) <strong>Maven jlink plug-in</strong>: point this plug-in also to the same folder, adding the following directive to the plug-in configuration:</p>\n<pre><code>&lt;modulePaths&gt;\n    &lt;modulePath&gt;${project.build.directory}/modules&lt;/modulePath&gt;\n&lt;/modulePaths&gt;\n</code></pre>\n<p>Now, Maven should correctly compile the project and jlink a runnable application.</p>\n<ol start=\"3\">\n<li><strong>Eclipse</strong> (and perhaps other Java IDE's too): this leaves unsolved the issue with Eclipse not resolving the native library modules added to the <code>module-info.java</code> in step 1.</li>\n</ol>\n<p>This precludes building the project from within Eclipse, which I find very useful at least for debugging. Maybe this can be solved for the libraries whose JAR's are already modular (but I do not know how), but surely it <strong>cannot</strong> be solved for the JAR's which are NOT modular and have to be modularised (for instance with the org.moditect:moditect-maven-plugin): their modules simply do not exist in any well-known location and are generated out-of-source (this happen to me with the <code>io.github.spair:imgui-java-natives-&lt;platform&gt;</code> which is not modular and is often used with openGL / Vulkan projects).</p>\n<p>As I use Maven only via command line, I work-around this preparing (our of the Java source and parallel to the main project <code>pom.xml</code>) 2 versions of the <code>module-info.java</code>, one without and one with the added modules.</p>\n<p>Normally the project <code>module-info.java</code> is kept equal to the first, shorter, version; when I have to launch a Maven build, a small shell script overwrites <code>module-info</code> with the extended version, run the required <code>mvn</code> command(s) and finally overwrites <code>module-info.java</code> back with the 'normal' version. Not really fool-proof, but usable.</p>\n"}],"owner":{"account_id":7506712,"reputation":11,"user_id":5702995,"display_name":"Maurizio M. Gavioli"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76736397,"answer_count":1,"score":0,"last_activity_date":1689928625,"creation_date":1689609081,"question_id":76706172,"body_markdown":"Context: Linux Mint 21.1, Java Adoptium 17.0.7 JDK, Maven 3.6.3.\r\n\r\nMy modular application uses LWJGL (and then its native libraries); using the Maven jlink plug-in I generate a Java image. During generation, the jlink plug-in prints the following:\r\n```\r\n[INFO] --- maven-jlink-plugin:3.1.0:jlink (default-cli) @ treni ---\r\nINFO]  -&gt; module: org.lwjgl.stb ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2.jar )\r\n[INFO]  -&gt; module: org.slf4j ( /home/mmg/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar )\r\n[INFO]  -&gt; module: imgui.natives.linux ( /home/mmg/.m2/repository/io/github/spair/imgui-java-natives-linux/1.86.10/imgui-java-natives-linux-1.86.10.jar )\r\n[INFO]  -&gt; module: org.lwjgl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2.jar )\r\n[INFO]  -&gt; module: imgui.binding ( /home/mmg/.m2/repository/io/github/spair/imgui-java-binding/1.86.10/imgui-java-binding-1.86.10.jar )\r\n[INFO]  -&gt; module: org.lwjgl.stb.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: org.lwjgl.glfw ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2.jar )\r\n[INFO]  -&gt; module: org.joml ( /home/mmg/.m2/repository/org/joml/joml/1.10.5/joml-1.10.5.jar )\r\n[INFO]  -&gt; module: org.lwjgl.opengl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2.jar )\r\n[INFO]  -&gt; module: org.slf4j.jul ( /home/mmg/.m2/repository/org/slf4j/slf4j-jdk14/2.0.7/slf4j-jdk14-2.0.7.jar )\r\n[INFO]  -&gt; module: org.lwjgl.opengl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: org.lwjgl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2-natives-linux.jar )\r\n[INFO]  -&gt; module: com.vistamaresoft.treni ( /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/classes )\r\n[INFO]  -&gt; module: org.lwjgl.glfw.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2-natives-linux.jar )\r\n[INFO] Building zip: /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/treni-0.0.1.zip\r\n\r\n```\r\nwhich shows that the plug-in knows about all the required native library JAR&#39;s.\r\n\r\nI expected the resulting application to be able to locate the (evidently included, see below) native libraries, but it seems it is not, at leat without additional hits I have no idea how to give it (and I could not find described anywhere). In fact, when I run the generate shell script, I receive the error:\r\n\r\n`Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Failed to locate library: liblwjgl.so`\r\n\r\nNote that the required library is contained in the `lwjgl-3.3.2-natives-linux.jar` referenced by the `pom.xml` dependencies via the appropriate profile (see below for the `pom.xml` contents).\r\n\r\nThe shell script is the default one generated by the jlink plug-in (the same for all my jlink-ed apps, only the module/main_class changes from one to another); anyway for completeness, this is its contents:\r\n```\r\n#!/bin/sh\r\nJLINK_VM_OPTIONS=\r\nDIR=`dirname $0`\r\n$DIR/java $JLINK_VM_OPTIONS -m com.vistamaresoft.treni/com.vistamaresoft.treni.Main &quot;$@&quot;\r\n```\r\n\r\nThe generated image DOES contain the native libraries: I tried generating an image WITHOUT the native dependencies and the result is shorter roughly of the same size of those JAR&#39;s. The difference, as expected, is in the resulting `lib/modules` file. So, this file presumably does contain the needed library/ies, but the executable(s) are not able to retrieve them?\r\n\r\nI have Googled and &#39;stackoverflow-ed&#39; for a whole day and I found nothing: any suggestion, help, hint about what it is happening is welcome.\r\n\r\nThis is the (slightly shortened for brevity) `pom.xml`;\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n&lt;!-- Several descriptive tags removed for brevity --&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n\t\t&lt;target.name&gt;treni&lt;/target.name&gt;\r\n\t\t&lt;!-- Versions --&gt;\r\n\t\t&lt;project.version&gt;0.0.1&lt;/project.version&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;joml.version&gt;1.10.5&lt;/joml.version&gt;\r\n\t\t&lt;joml-primitives.version&gt;1.10.4&lt;/joml-primitives.version&gt;\r\n\t\t&lt;lwjgl.version&gt;3.3.2&lt;/lwjgl.version&gt;\r\n\t\t&lt;imgui-java.version&gt;1.86.10&lt;/imgui-java.version&gt;\r\n\t\t&lt;exec-maven-plugin.version&gt;3.0.0&lt;/exec-maven-plugin.version&gt;\r\n\t\t&lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\r\n\t\t&lt;maven-dependency-plugin.version&gt;3.6.0&lt;/maven-dependency-plugin.version&gt;\r\n\t\t&lt;maven-jar-plugin.version&gt;3.3.0&lt;/maven-jar-plugin.version&gt;\r\n\t\t&lt;maven-jlink-plugin.version&gt;3.1.0&lt;/maven-jlink-plugin.version&gt;\r\n\t\t&lt;maven-resources-plugin.version&gt;3.3.1&lt;/maven-resources-plugin.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;profiles&gt;\r\n\t\t&lt;profile&gt;\r\n\t\t\t&lt;id&gt;lwjgl-natives-linux-amd64&lt;/id&gt;\r\n\t\t\t&lt;activation&gt;\r\n\t\t\t\t&lt;os&gt;\r\n\t\t\t\t\t&lt;family&gt;unix&lt;/family&gt;\r\n\t\t\t\t\t&lt;arch&gt;amd64&lt;/arch&gt;\r\n\t\t\t\t&lt;/os&gt;\r\n\t\t\t&lt;/activation&gt;\r\n\t\t\t&lt;properties&gt;\r\n\t\t\t\t&lt;lwjgl.natives&gt;natives-linux&lt;/lwjgl.natives&gt;\r\n\t\t\t\t&lt;imgui.native&gt;natives-linux&lt;/imgui.native&gt;\r\n\t\t\t\t&lt;imgui.native.module&gt;linux&lt;/imgui.native.module&gt;\r\n\t\t\t&lt;/properties&gt;\r\n\t\t&lt;/profile&gt;\r\n\t\t&lt;!-- Windows and MacOs profiles removed for brevity --&gt;\r\n\t&lt;/profiles&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.0.7&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.joml&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;joml&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${joml.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n&lt;!-- Natives --&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${lwjgl.version}&lt;/version&gt;\r\n\t\t\t&lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt; &lt;!--\r\n\t\t\t\t\t\t&lt;release&gt;S${java.version}&lt;/release&gt; --&gt;\r\n\t\t\t\t\t\t&lt;source&gt;${java.version}&lt;/source&gt;\r\n\t\t\t\t\t\t&lt;target&gt;${java.version}&lt;/target&gt;\r\n\t\t\t\t\t\t&lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;archive&gt;\r\n\t\t\t\t\t\t\t&lt;manifest&gt;\r\n\t\t\t\t\t\t\t\t&lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n\t\t\t\t\t\t\t\t&lt;mainClass&gt;com.vistamaresoft.treni.Main&lt;/mainClass&gt;\r\n\t\t\t\t\t\t\t&lt;/manifest&gt;\r\n\t\t\t\t\t\t&lt;/archive&gt;\r\n\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/${target.name}&lt;/outputDirectory&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.5.0&lt;/version&gt;\r\n\t\t\t\t\t&lt;!-- run with `mvn javadoc:javadoc` --&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;reportOutputDirectory&gt;${project.basedir}/doc&lt;/reportOutputDirectory&gt;\r\n\t\t\t\t\t\t&lt;show&gt;public&lt;/show&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.0.0.Final&lt;/version&gt;\r\n\t\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t\t&lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\r\n\t\t\t\t\t\t\t&lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\r\n\t\t\t\t\t\t\t&lt;modules&gt;\r\n\t\t\t\t\t\t\t\t&lt;module&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.binding.module-info.java&lt;/moduleInfoFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;/module&gt;\r\n\r\n\t\t\t\t\t\t\t\t&lt;module&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;artifact&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;groupId&gt;io.github.spair&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\r\n\t\t\t\t\t\t\t\t\t\t&lt;version&gt;${imgui-java.version}&lt;/version&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;/artifact&gt;\r\n\t\t\t\t\t\t\t\t\t&lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.natives.${imgui.native.module}.module-info.java&lt;/moduleInfoFile&gt;\r\n\t\t\t\t\t\t\t\t&lt;/module&gt;\r\n\t\t\t\t\t\t\t&lt;/modules&gt;\r\n\t\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;${maven-jlink-plugin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;!-- run with `mvn jlink:jlink` separately from `mvn package` as combining both into `mvn package jlink:jlink` raises an error --&gt;\r\n\t\t\t\t\t&lt;extensions&gt;true&lt;/extensions&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;!-- Module paths overriding the Mavem local repo path for non-modular JAR, modularised with moditect-maven-plugin --&gt;\r\n\t\t\t\t\t\t&lt;modulePaths&gt;\r\n\t\t\t\t\t\t\t&lt;modulePath&gt;${project.build.directory}/modules/imgui-java-binding-${imgui-java.version}.jar&lt;/modulePath&gt;\r\n\t\t\t\t\t\t\t&lt;modulePath&gt;${project.build.directory}/modules/imgui-java-natives-${imgui.native.module}-${imgui-java.version}.jar&lt;/modulePath&gt;\r\n\t\t\t\t\t\t&lt;/modulePaths&gt;\r\n\t\t\t\t\t\t&lt;compress&gt;2&lt;/compress&gt;\r\n\t\t\t\t\t\t&lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\r\n\t\t\t\t\t\t&lt;noManPages&gt;true&lt;/noManPages&gt;\r\n\t\t\t\t\t\t&lt;stripDebug&gt;true&lt;/stripDebug&gt;\r\n\t\t\t\t\t\t&lt;launcher&gt;treni=com.vistamaresoft.treni/com.vistamaresoft.treni.Main&lt;/launcher&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;/plugins&gt;\r\n\t\t&lt;/pluginManagement&gt;\r\n\r\n\t\t&lt;!-- PLUG-IN EXECUTIONS --&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.moditect&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;id&gt;add-module-infos&lt;/id&gt;\r\n\t\t\t\t\t\t&lt;phase&gt;generate-resources&lt;/phase&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t&lt;goal&gt;add-module-info&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\nAnd this is the `module-info.java` of the app (currently in a single module):\r\n```\r\nmodule com.vistamaresoft.treni\r\n{\r\n\texports\t\t\t\tcom.vistamaresoft.treni;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.engine;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.engine.elements;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.objectviewer;\r\n\texports\t\t\t\tcom.vistamaresoft.treni.sim;\r\n\r\n\trequires\t\t\timgui.binding;\r\n\trequires transitive\torg.joml;\r\n\trequires\t\t\torg.lwjgl;\r\n\trequires\t\t\torg.lwjgl.glfw;\r\n\trequires\t\t\torg.lwjgl.opengl;\r\n\trequires\t\t\torg.lwjgl.stb;\r\n\trequires transitive\torg.slf4j;\r\n\trequires java.prefs;\r\n\trequires java.base;\r\n\trequires java.logging;\r\n}\r\n```\r\n","title":"Maven jlink plugin: native libraries not found when running the resulting image","body":"<p>Context: Linux Mint 21.1, Java Adoptium 17.0.7 JDK, Maven 3.6.3.</p>\n<p>My modular application uses LWJGL (and then its native libraries); using the Maven jlink plug-in I generate a Java image. During generation, the jlink plug-in prints the following:</p>\n<pre><code>[INFO] --- maven-jlink-plugin:3.1.0:jlink (default-cli) @ treni ---\nINFO]  -&gt; module: org.lwjgl.stb ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2.jar )\n[INFO]  -&gt; module: org.slf4j ( /home/mmg/.m2/repository/org/slf4j/slf4j-api/2.0.7/slf4j-api-2.0.7.jar )\n[INFO]  -&gt; module: imgui.natives.linux ( /home/mmg/.m2/repository/io/github/spair/imgui-java-natives-linux/1.86.10/imgui-java-natives-linux-1.86.10.jar )\n[INFO]  -&gt; module: org.lwjgl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2.jar )\n[INFO]  -&gt; module: imgui.binding ( /home/mmg/.m2/repository/io/github/spair/imgui-java-binding/1.86.10/imgui-java-binding-1.86.10.jar )\n[INFO]  -&gt; module: org.lwjgl.stb.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-stb/3.3.2/lwjgl-stb-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: org.lwjgl.glfw ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2.jar )\n[INFO]  -&gt; module: org.joml ( /home/mmg/.m2/repository/org/joml/joml/1.10.5/joml-1.10.5.jar )\n[INFO]  -&gt; module: org.lwjgl.opengl ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2.jar )\n[INFO]  -&gt; module: org.slf4j.jul ( /home/mmg/.m2/repository/org/slf4j/slf4j-jdk14/2.0.7/slf4j-jdk14-2.0.7.jar )\n[INFO]  -&gt; module: org.lwjgl.opengl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-opengl/3.3.2/lwjgl-opengl-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: org.lwjgl.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl/3.3.2/lwjgl-3.3.2-natives-linux.jar )\n[INFO]  -&gt; module: com.vistamaresoft.treni ( /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/classes )\n[INFO]  -&gt; module: org.lwjgl.glfw.natives ( /home/mmg/.m2/repository/org/lwjgl/lwjgl-glfw/3.3.2/lwjgl-glfw-3.3.2-natives-linux.jar )\n[INFO] Building zip: /home/mmg/Documents/projects/Eclipse_workspaces/Treni/treni/target/treni-0.0.1.zip\n\n</code></pre>\n<p>which shows that the plug-in knows about all the required native library JAR's.</p>\n<p>I expected the resulting application to be able to locate the (evidently included, see below) native libraries, but it seems it is not, at leat without additional hits I have no idea how to give it (and I could not find described anywhere). In fact, when I run the generate shell script, I receive the error:</p>\n<p><code>Exception in thread &quot;main&quot; java.lang.UnsatisfiedLinkError: Failed to locate library: liblwjgl.so</code></p>\n<p>Note that the required library is contained in the <code>lwjgl-3.3.2-natives-linux.jar</code> referenced by the <code>pom.xml</code> dependencies via the appropriate profile (see below for the <code>pom.xml</code> contents).</p>\n<p>The shell script is the default one generated by the jlink plug-in (the same for all my jlink-ed apps, only the module/main_class changes from one to another); anyway for completeness, this is its contents:</p>\n<pre><code>#!/bin/sh\nJLINK_VM_OPTIONS=\nDIR=`dirname $0`\n$DIR/java $JLINK_VM_OPTIONS -m com.vistamaresoft.treni/com.vistamaresoft.treni.Main &quot;$@&quot;\n</code></pre>\n<p>The generated image DOES contain the native libraries: I tried generating an image WITHOUT the native dependencies and the result is shorter roughly of the same size of those JAR's. The difference, as expected, is in the resulting <code>lib/modules</code> file. So, this file presumably does contain the needed library/ies, but the executable(s) are not able to retrieve them?</p>\n<p>I have Googled and 'stackoverflow-ed' for a whole day and I found nothing: any suggestion, help, hint about what it is happening is welcome.</p>\n<p>This is the (slightly shortened for brevity) <code>pom.xml</code>;</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;!-- Several descriptive tags removed for brevity --&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;target.name&gt;treni&lt;/target.name&gt;\n        &lt;!-- Versions --&gt;\n        &lt;project.version&gt;0.0.1&lt;/project.version&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;joml.version&gt;1.10.5&lt;/joml.version&gt;\n        &lt;joml-primitives.version&gt;1.10.4&lt;/joml-primitives.version&gt;\n        &lt;lwjgl.version&gt;3.3.2&lt;/lwjgl.version&gt;\n        &lt;imgui-java.version&gt;1.86.10&lt;/imgui-java.version&gt;\n        &lt;exec-maven-plugin.version&gt;3.0.0&lt;/exec-maven-plugin.version&gt;\n        &lt;maven-compiler-plugin.version&gt;3.11.0&lt;/maven-compiler-plugin.version&gt;\n        &lt;maven-dependency-plugin.version&gt;3.6.0&lt;/maven-dependency-plugin.version&gt;\n        &lt;maven-jar-plugin.version&gt;3.3.0&lt;/maven-jar-plugin.version&gt;\n        &lt;maven-jlink-plugin.version&gt;3.1.0&lt;/maven-jlink-plugin.version&gt;\n        &lt;maven-resources-plugin.version&gt;3.3.1&lt;/maven-resources-plugin.version&gt;\n    &lt;/properties&gt;\n\n    &lt;profiles&gt;\n        &lt;profile&gt;\n            &lt;id&gt;lwjgl-natives-linux-amd64&lt;/id&gt;\n            &lt;activation&gt;\n                &lt;os&gt;\n                    &lt;family&gt;unix&lt;/family&gt;\n                    &lt;arch&gt;amd64&lt;/arch&gt;\n                &lt;/os&gt;\n            &lt;/activation&gt;\n            &lt;properties&gt;\n                &lt;lwjgl.natives&gt;natives-linux&lt;/lwjgl.natives&gt;\n                &lt;imgui.native&gt;natives-linux&lt;/imgui.native&gt;\n                &lt;imgui.native.module&gt;linux&lt;/imgui.native.module&gt;\n            &lt;/properties&gt;\n        &lt;/profile&gt;\n        &lt;!-- Windows and MacOs profiles removed for brevity --&gt;\n    &lt;/profiles&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.joml&lt;/groupId&gt;\n            &lt;artifactId&gt;joml&lt;/artifactId&gt;\n            &lt;version&gt;${joml.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n            &lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\n            &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n&lt;!-- Natives --&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-glfw&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-opengl&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.lwjgl&lt;/groupId&gt;\n            &lt;artifactId&gt;lwjgl-stb&lt;/artifactId&gt;\n            &lt;version&gt;${lwjgl.version}&lt;/version&gt;\n            &lt;classifier&gt;${lwjgl.natives}&lt;/classifier&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n            &lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\n            &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt; &lt;!--\n                        &lt;release&gt;S${java.version}&lt;/release&gt; --&gt;\n                        &lt;source&gt;${java.version}&lt;/source&gt;\n                        &lt;target&gt;${java.version}&lt;/target&gt;\n                        &lt;showDeprecation&gt;true&lt;/showDeprecation&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n                    &lt;configuration&gt;\n                        &lt;archive&gt;\n                            &lt;manifest&gt;\n                                &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                                &lt;mainClass&gt;com.vistamaresoft.treni.Main&lt;/mainClass&gt;\n                            &lt;/manifest&gt;\n                        &lt;/archive&gt;\n                        &lt;outputDirectory&gt;${project.build.directory}/${target.name}&lt;/outputDirectory&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-javadoc-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;3.5.0&lt;/version&gt;\n                    &lt;!-- run with `mvn javadoc:javadoc` --&gt;\n                    &lt;configuration&gt;\n                        &lt;reportOutputDirectory&gt;${project.basedir}/doc&lt;/reportOutputDirectory&gt;\n                        &lt;show&gt;public&lt;/show&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n                    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;1.0.0.Final&lt;/version&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;\n                            &lt;overwriteExistingFiles&gt;true&lt;/overwriteExistingFiles&gt;\n                            &lt;modules&gt;\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n                                        &lt;artifactId&gt;imgui-java-binding&lt;/artifactId&gt;\n                                        &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.binding.module-info.java&lt;/moduleInfoFile&gt;\n                                &lt;/module&gt;\n\n                                &lt;module&gt;\n                                    &lt;artifact&gt;\n                                        &lt;groupId&gt;io.github.spair&lt;/groupId&gt;\n                                        &lt;artifactId&gt;imgui-java-${imgui.native}&lt;/artifactId&gt;\n                                        &lt;version&gt;${imgui-java.version}&lt;/version&gt;\n                                    &lt;/artifact&gt;\n                                    &lt;moduleInfoFile&gt;${project.basedir}/src/main/moduleInfos/imgui.natives.${imgui.native.module}.module-info.java&lt;/moduleInfoFile&gt;\n                                &lt;/module&gt;\n                            &lt;/modules&gt;\n                        &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-jlink-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven-jlink-plugin.version}&lt;/version&gt;\n                    &lt;!-- run with `mvn jlink:jlink` separately from `mvn package` as combining both into `mvn package jlink:jlink` raises an error --&gt;\n                    &lt;extensions&gt;true&lt;/extensions&gt;\n                    &lt;configuration&gt;\n                        &lt;!-- Module paths overriding the Mavem local repo path for non-modular JAR, modularised with moditect-maven-plugin --&gt;\n                        &lt;modulePaths&gt;\n                            &lt;modulePath&gt;${project.build.directory}/modules/imgui-java-binding-${imgui-java.version}.jar&lt;/modulePath&gt;\n                            &lt;modulePath&gt;${project.build.directory}/modules/imgui-java-natives-${imgui.native.module}-${imgui-java.version}.jar&lt;/modulePath&gt;\n                        &lt;/modulePaths&gt;\n                        &lt;compress&gt;2&lt;/compress&gt;\n                        &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;noManPages&gt;true&lt;/noManPages&gt;\n                        &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                        &lt;launcher&gt;treni=com.vistamaresoft.treni/com.vistamaresoft.treni.Main&lt;/launcher&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n\n            &lt;/plugins&gt;\n        &lt;/pluginManagement&gt;\n\n        &lt;!-- PLUG-IN EXECUTIONS --&gt;\n\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.moditect&lt;/groupId&gt;\n                &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;add-module-infos&lt;/id&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;goals&gt;\n                        &lt;goal&gt;add-module-info&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>And this is the <code>module-info.java</code> of the app (currently in a single module):</p>\n<pre><code>module com.vistamaresoft.treni\n{\n    exports             com.vistamaresoft.treni;\n    exports             com.vistamaresoft.treni.engine;\n    exports             com.vistamaresoft.treni.engine.elements;\n    exports             com.vistamaresoft.treni.objectviewer;\n    exports             com.vistamaresoft.treni.sim;\n\n    requires            imgui.binding;\n    requires transitive org.joml;\n    requires            org.lwjgl;\n    requires            org.lwjgl.glfw;\n    requires            org.lwjgl.opengl;\n    requires            org.lwjgl.stb;\n    requires transitive org.slf4j;\n    requires java.prefs;\n    requires java.base;\n    requires java.logging;\n}\n</code></pre>\n"},{"tags":["java","mysql","jooq"],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689928184,"creation_date":1522666986,"answer_id":49610034,"question_id":49590493,"body_markdown":"As you&#39;ve noticed, jOOQ doesn&#39;t currently strictly support your syntax, so you have to make use of the plain SQL templating mechanisms offered by the jOOQ API:\r\nhttps://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating\r\n\r\nYou&#39;ve already done that correctly for the query itself. Now about initialising the variable, this is done ideally in the same JDBC statement, not in a separate statement to prevent side effects caused by jOOQ closing the JDBC connection between consecutive executions (e.g. when using a [`DataSourceConnectionProvider`][1]). So, the most straightforward way to do that with jOOQ is to use an [`ExecuteListener`][2] that prepends the initialisation SQL string to that particular statement only, e.g.\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    class InitialisingVariableListener extends DefaultExecuteListener {\r\n        @Override\r\n        public void renderEnd(ExecuteContext ctx) {\r\n            ctx.sql(&quot;SET @row_number = 0;&quot; + ctx.sql());\r\n        }\r\n    }\r\n\r\nAnd hook that to your `Configuration` prior to executing the query:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\r\n    DSLContext create = DSL.using(connection, dialect);\r\n    create.configuration().set(new InitialisingVariableListener());\r\n    create.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\r\n          .from(AUTHOR)\r\n          .limit(5)\r\n          .fetch();\r\n\r\nIf you&#39;re reusing the `Configuration` among several queries, you may want to prefer to call `derive()` on it to create a new `Configuration` rather than `set()`, which modifies the `Configuration` for everyone.\r\n\r\n### A note on other RDBMS\r\n\r\nThis answer was MySQL specific, where the `SET` statement does not produce any output (update counts) through JDBC. In other RDBMS (e.g. PostgreSQL), `SET` produces an update count, which might have to be skipped, see this question here for details, and workarounds:\r\n\r\n- https://stackoverflow.com/q/76540584/521799\r\n\r\n  [1]: https://www.jooq.org/javadoc/latest/org/jooq/impl/DataSourceConnectionProvider.html\r\n  [2]: https://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html","title":"How to set a @Variable in JOOQ","body":"<p>As you've noticed, jOOQ doesn't currently strictly support your syntax, so you have to make use of the plain SQL templating mechanisms offered by the jOOQ API:\n<a href=\"https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-building/plain-sql-templating</a></p>\n<p>You've already done that correctly for the query itself. Now about initialising the variable, this is done ideally in the same JDBC statement, not in a separate statement to prevent side effects caused by jOOQ closing the JDBC connection between consecutive executions (e.g. when using a <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/impl/DataSourceConnectionProvider.html\" rel=\"nofollow noreferrer\"><code>DataSourceConnectionProvider</code></a>). So, the most straightforward way to do that with jOOQ is to use an <a href=\"https://www.jooq.org/javadoc/latest/org/jooq/ExecuteListener.html\" rel=\"nofollow noreferrer\"><code>ExecuteListener</code></a> that prepends the initialisation SQL string to that particular statement only, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class InitialisingVariableListener extends DefaultExecuteListener {\n    @Override\n    public void renderEnd(ExecuteContext ctx) {\n        ctx.sql(&quot;SET @row_number = 0;&quot; + ctx.sql());\n    }\n}\n</code></pre>\n<p>And hook that to your <code>Configuration</code> prior to executing the query:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\nDSLContext create = DSL.using(connection, dialect);\ncreate.configuration().set(new InitialisingVariableListener());\ncreate.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\n      .from(AUTHOR)\n      .limit(5)\n      .fetch();\n</code></pre>\n<p>If you're reusing the <code>Configuration</code> among several queries, you may want to prefer to call <code>derive()</code> on it to create a new <code>Configuration</code> rather than <code>set()</code>, which modifies the <code>Configuration</code> for everyone.</p>\n<h3>A note on other RDBMS</h3>\n<p>This answer was MySQL specific, where the <code>SET</code> statement does not produce any output (update counts) through JDBC. In other RDBMS (e.g. PostgreSQL), <code>SET</code> produces an update count, which might have to be skipped, see this question here for details, and workarounds:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/q/76540584/521799\">JOOQ: Mutli Tenancy with set session/local database variable</a></li>\n</ul>\n"}],"owner":{"account_id":2306685,"reputation":790,"user_id":2025820,"accept_rate":79,"display_name":"lumo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1097,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49610034,"answer_count":1,"score":3,"last_activity_date":1689928184,"creation_date":1522517162,"question_id":49590493,"body_markdown":"How can i use @variables using `JOOQ`?\r\n(or is there a simpler possibility to show the line numbers? - note that i need to INSERT the selected data INTO another Table and the row_number shall always start at 0!)\r\n\r\n    SET @row_number = 0;\r\n     \r\n    SELECT \r\n        (@row_number:=@row_number + 1) AS NUM, FIRST_NAME, LAST_NAME\r\n    FROM\r\n        AUTHOR\r\n    LIMIT 5;\r\n\r\nthis is what i think the `JOOQ`code could look like...\r\n\r\n    Field&lt;Integer&gt; num = DSL.field(&quot;@row_number:=@row_number +1&quot;, Integer.class);\r\n    DSLContext create = DSL.using(connection, dialect);\r\n    create.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\r\n          .from(AUTHOR)\r\n          .limit(5)\r\n          .fetch();\r\n\r\n\r\ndo i need to execute that\r\n\r\n    SET @row_number = 0;\r\n\r\nwith plain `JDBC` ?\r\n\r\ni found the thing about variables and `JOOQ` here on StackOverflow - [how can we have variable in jooq][1]\r\n\r\n\nEDIT: i investigated a bit more and read that the results of this &quot;solution&quot; might change in future versions. ao i think about changing it to creating a temporary table with an pk identity (start at 0) then i have the same results but no user variable set and updates.\n\r\n  [1]: https://stackoverflow.com/questions/17318757/how-can-we-have-variable-in-jooq","title":"How to set a @Variable in JOOQ","body":"<p>How can i use @variables using <code>JOOQ</code>?\n(or is there a simpler possibility to show the line numbers? - note that i need to INSERT the selected data INTO another Table and the row_number shall always start at 0!)</p>\n\n<pre><code>SET @row_number = 0;\n\nSELECT \n    (@row_number:=@row_number + 1) AS NUM, FIRST_NAME, LAST_NAME\nFROM\n    AUTHOR\nLIMIT 5;\n</code></pre>\n\n<p>this is what i think the <code>JOOQ</code>code could look like...</p>\n\n<pre><code>Field&lt;Integer&gt; num = DSL.field(\"@row_number:=@row_number +1\", Integer.class);\nDSLContext create = DSL.using(connection, dialect);\ncreate.select(AUTHOR.FIRST_NAME, AUTHOR.LAST_NAME, num)\n      .from(AUTHOR)\n      .limit(5)\n      .fetch();\n</code></pre>\n\n<p>do i need to execute that</p>\n\n<pre><code>SET @row_number = 0;\n</code></pre>\n\n<p>with plain <code>JDBC</code> ?</p>\n\n<p>i found the thing about variables and <code>JOOQ</code> here on StackOverflow - <a href=\"https://stackoverflow.com/questions/17318757/how-can-we-have-variable-in-jooq\">how can we have variable in jooq</a></p>\n\n<p>EDIT: i investigated a bit more and read that the results of this \"solution\" might change in future versions. ao i think about changing it to creating a temporary table with an pk identity (start at 0) then i have the same results but no user variable set and updates.</p>\n"},{"tags":["java","maven"],"owner":{"account_id":123756,"reputation":4386,"user_id":318414,"accept_rate":95,"display_name":"simonalexander2005"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689928032,"creation_date":1689928032,"question_id":76736328,"body_markdown":"I used to successfully use the following in my pom:\r\n\r\n`&lt;dependency&gt;&lt;groupId&gt;net.ser1&lt;/groupId&gt;&lt;artifactId&gt;gozirra-client&lt;/artifactId&gt;&lt;version&gt;0.4.1&lt;/version&gt;&lt;/dependency&gt;`\r\n\r\nBut now I get a missing artefact error.\r\n\r\nIf I try to download manually via https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1 (linked to https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar for the jar), this now gives a 401 because repo.spring.io have changed their policies.\r\n\r\nAre these two things related, and if so is there an alternative source I can point my pom at?","title":"gozirra-0.4.1 no longer available via maven","body":"<p>I used to successfully use the following in my pom:</p>\n<p><code>&lt;dependency&gt;&lt;groupId&gt;net.ser1&lt;/groupId&gt;&lt;artifactId&gt;gozirra-client&lt;/artifactId&gt;&lt;version&gt;0.4.1&lt;/version&gt;&lt;/dependency&gt;</code></p>\n<p>But now I get a missing artefact error.</p>\n<p>If I try to download manually via <a href=\"https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/net.ser1/gozirra-client/0.4.1</a> (linked to <a href=\"https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar\" rel=\"nofollow noreferrer\">https://repo.spring.io/plugins-release/net/ser1/gozirra-client/0.4.1/gozirra-client-0.4.1.jar</a> for the jar), this now gives a 401 because repo.spring.io have changed their policies.</p>\n<p>Are these two things related, and if so is there an alternative source I can point my pom at?</p>\n"},{"tags":["java","triggers","salesforce","apex","apex-code"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1689926404,"post_id":76736151,"comment_id":135285052,"body_markdown":"Method names should start with a lowercase letter. By the way, that &quot;error&quot; is just a linter warning. Your code should compile and run fine like this. But even so, you should stick to the standard Java code conventions: methods and variables are `lowerCamel`, classes are `UpperCamel`.","body":"Method names should start with a lowercase letter. By the way, that &quot;error&quot; is just a linter warning. Your code should compile and run fine like this. But even so, you should stick to the standard Java code conventions: methods and variables are <code>lowerCamel</code>, classes are <code>UpperCamel</code>."},{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":0,"creation_date":1689926764,"post_id":76736151,"comment_id":135285129,"body_markdown":"@Jorn I&#39;d say your comment would make a more than adequate answer :)","body":"@Jorn I&#39;d say your comment would make a more than adequate answer :)"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689927317,"post_id":76736151,"comment_id":135285227,"body_markdown":"What is the first character class telling you?","body":"What is the first character class telling you?"}],"answers":[{"tags":[],"owner":{"account_id":25758939,"reputation":36,"user_id":19510182,"display_name":"Sanjula Dulshan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689927779,"creation_date":1689927779,"answer_id":76736309,"question_id":76736151,"body_markdown":"The error message you&#39;re seeing indicates that the method name AmountHandlertest doesn&#39;t match the specified naming convention **[a-z][a-zA-Z0-9]***. In most programming languages, including Java, there are standard naming conventions for methods, variables, classes, etc. The naming convention mentioned in the error message follows the standard Java method naming convention, which usually starts with a lowercase letter.\r\n\r\nTo fix the error, you should rename your method to start with a lowercase letter. For example:\r\n\r\n    public static void amountHandlerTest() {\r\n    // CODE;\r\n    }\r\n","title":"Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","body":"<p>The error message you're seeing indicates that the method name AmountHandlertest doesn't match the specified naming convention <strong>[a-z][a-zA-Z0-9]</strong>*. In most programming languages, including Java, there are standard naming conventions for methods, variables, classes, etc. The naming convention mentioned in the error message follows the standard Java method naming convention, which usually starts with a lowercase letter.</p>\n<p>To fix the error, you should rename your method to start with a lowercase letter. For example:</p>\n<pre><code>public static void amountHandlerTest() {\n// CODE;\n}\n</code></pre>\n"}],"owner":{"account_id":28620028,"reputation":3,"user_id":21913331,"display_name":"Abhishek Srinivasan US"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":76736309,"answer_count":1,"score":-3,"last_activity_date":1689927779,"creation_date":1689926180,"question_id":76736151,"body_markdown":"I dont understand whats the issue here is. Please still gives the error.\r\n\r\n```\r\n public static void AmountHandlertest(){\r\n    //CODE;\r\n\r\n}\r\n```\r\n\r\n\r\nI want to run that method but shows an error saying Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","title":"Doesn&#39;t match &#39;[a-z][a-zA-Z0-9]*&#39; (rule: Code Style-MethodNamingConventions)","body":"<p>I dont understand whats the issue here is. Please still gives the error.</p>\n<pre><code> public static void AmountHandlertest(){\n    //CODE;\n\n}\n</code></pre>\n<p>I want to run that method but shows an error saying Doesn't match '[a-z][a-zA-Z0-9]*' (rule: Code Style-MethodNamingConventions)</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","lombok"],"owner":{"account_id":394811,"reputation":1062,"user_id":757446,"accept_rate":33,"display_name":"vinodpthmn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":218,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689927682,"creation_date":1689927682,"question_id":76736302,"body_markdown":"The POST API takes a payload with couple of fields where one of them is a write only field. The class has *lombok* @Data annotation to generate setters/getters and the write only field is annotated with *@Getter(AccessLevel.NONE)*. Since lombok is used, the fields are annotated with @Schema with proper description.\r\n\r\n```Java\r\n@Data\r\npublic class Query {\r\n\r\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\r\n    private String filter;\r\n\r\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\r\n    @Getter(AccessLevel.NONE)\r\n    private int page;\r\n\r\n    // other fields\r\n}\r\n```\r\n\r\nUnfortunately, the given description is ignored by Swagger, and Swagger UI is showing &quot;writeOnly: true&quot; instead of the description mentioned in the @Schema annotation of the field.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI tried the solution mentioned [here][2] by adding *lombok.config* with below line, but no luck.\r\n\r\n    lombok.copyableAnnotations += io.swagger.v3.oas.annotations.media.Schema\r\n\r\nHowever, if I add an explicit setter method with @Schema annotation (instead of mentioning at field level), it is getting honoured and Swagger generates the documentation as expected.\r\n\r\n```Java\r\n@Data\r\npublic class Query {\r\n\r\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\r\n    private String filter;\r\n\r\n    @Getter(AccessLevel.NONE)\r\n    private int page;\r\n\r\n    // other fields\r\n\r\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\r\n    public void setPage(int page){\r\n        this.page = page;\r\n    }\r\n}\r\n```\r\n[![enter image description here][3]][3]\r\n\r\nI am wondering, (a) why lombok is not copying the @Schema to the setter method? (b) why Swagger generating the documentation with hardcoded &quot;writeOnly: true&quot;?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1kA5S.png\r\n  [2]: https://github.com/micronaut-projects/micronaut-openapi/issues/398\r\n  [3]: https://i.stack.imgur.com/ZWHuY.png","title":"Swagger ignoring @Schema annotation for write only fields","body":"<p>The POST API takes a payload with couple of fields where one of them is a write only field. The class has <em>lombok</em> @Data annotation to generate setters/getters and the write only field is annotated with <em>@Getter(AccessLevel.NONE)</em>. Since lombok is used, the fields are annotated with @Schema with proper description.</p>\n<pre><code>@Data\npublic class Query {\n\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\n    private String filter;\n\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\n    @Getter(AccessLevel.NONE)\n    private int page;\n\n    // other fields\n}\n</code></pre>\n<p>Unfortunately, the given description is ignored by Swagger, and Swagger UI is showing &quot;writeOnly: true&quot; instead of the description mentioned in the @Schema annotation of the field.</p>\n<p><a href=\"https://i.stack.imgur.com/1kA5S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1kA5S.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried the solution mentioned <a href=\"https://github.com/micronaut-projects/micronaut-openapi/issues/398\" rel=\"nofollow noreferrer\">here</a> by adding <em>lombok.config</em> with below line, but no luck.</p>\n<pre><code>lombok.copyableAnnotations += io.swagger.v3.oas.annotations.media.Schema\n</code></pre>\n<p>However, if I add an explicit setter method with @Schema annotation (instead of mentioning at field level), it is getting honoured and Swagger generates the documentation as expected.</p>\n<pre><code>@Data\npublic class Query {\n\n    @Schema(description = &quot;List of filter conditions separated by comma.&quot;)\n    private String filter;\n\n    @Getter(AccessLevel.NONE)\n    private int page;\n\n    // other fields\n\n    @Schema(description = &quot;Desired page number (starting from 1).&quot;)\n    public void setPage(int page){\n        this.page = page;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZWHuY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZWHuY.png\" alt=\"enter image description here\" /></a></p>\n<p>I am wondering, (a) why lombok is not copying the @Schema to the setter method? (b) why Swagger generating the documentation with hardcoded &quot;writeOnly: true&quot;?</p>\n"},{"tags":["java","spring","spring-annotations","spring-jmx"],"answers":[{"tags":[],"owner":{"account_id":2158921,"reputation":18762,"user_id":1913537,"accept_rate":73,"display_name":"Ori Dar"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1377156045,"creation_date":1377156045,"answer_id":18374059,"question_id":18373970,"body_markdown":"You should use `@ManagedOperation` instead. `@ManagedAttribute` is for a getter / setter methods only.","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>You should use <code>@ManagedOperation</code> instead. <code>@ManagedAttribute</code> is for a getter / setter methods only.</p>\n"},{"tags":[],"owner":{"account_id":3273973,"reputation":5791,"user_id":2756574,"accept_rate":89,"display_name":"Sebastian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689927581,"creation_date":1689924375,"answer_id":76735951,"question_id":18373970,"body_markdown":"It sounds weird, but you can fix it by just renaming `myExample` to `getMyExample`.\r\n\r\n    @ManagedAttribute\r\n    public String getMyExample() {\r\n        return exampleService.getSomething().toString();\r\n    }\r\n\r\nIt will even show up as &quot;MyExample&quot; in e.g. visualVM.","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>It sounds weird, but you can fix it by just renaming <code>myExample</code> to <code>getMyExample</code>.</p>\n<pre><code>@ManagedAttribute\npublic String getMyExample() {\n    return exampleService.getSomething().toString();\n}\n</code></pre>\n<p>It will even show up as &quot;MyExample&quot; in e.g. visualVM.</p>\n"}],"owner":{"account_id":2321169,"reputation":9855,"user_id":2036867,"accept_rate":64,"display_name":"Nimrod007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4932,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":18374059,"answer_count":2,"score":6,"last_activity_date":1689927581,"creation_date":1377155762,"question_id":18373970,"body_markdown":"Ive Added Spring annotation&#39;s to my code \r\nbut when connecting via visual vm the method &quot;myExample()&quot; isn&#39;t showing in the JMX bean list\r\n\r\nMy code : \r\n\r\n\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.jmx.export.annotation.ManagedAttribute;\r\n    import org.springframework.jmx.export.annotation.ManagedResource;\r\n    import org.springframework.stereotype.Component;\r\n    \r\n    \r\n    @Component\r\n    @ManagedResource\r\n    public class MyClass {\r\n    \r\n       @Autowired\r\n       private Example exampleService;\r\n    \r\n       @ManagedAttribute\r\n       public String myExample() {\r\n          return exampleService.getSomething().toString();\r\n       }\r\n    } \r\n\r\nany idea why this is happening ?\r\n\r\n","title":"Java Spring Framework jmx managed annotation @ManagedAttribute not showing method in MBeanServerConnection/Jconsole/Visual vm/bean list","body":"<p>Ive Added Spring annotation's to my code \nbut when connecting via visual vm the method \"myExample()\" isn't showing in the JMX bean list</p>\n\n<p>My code : </p>\n\n<pre><code>import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jmx.export.annotation.ManagedAttribute;\nimport org.springframework.jmx.export.annotation.ManagedResource;\nimport org.springframework.stereotype.Component;\n\n\n@Component\n@ManagedResource\npublic class MyClass {\n\n   @Autowired\n   private Example exampleService;\n\n   @ManagedAttribute\n   public String myExample() {\n      return exampleService.getSomething().toString();\n   }\n} \n</code></pre>\n\n<p>any idea why this is happening ?</p>\n"},{"tags":["java","spring-boot","gradle","aws-lambda","pulumi"],"comments":[{"owner":{"account_id":1912742,"reputation":15070,"user_id":1726083,"display_name":"erik258"},"score":0,"creation_date":1689889708,"post_id":76733893,"comment_id":135281245,"body_markdown":"you should expect to run your lambda in development enviroments so you can test it locally","body":"you should expect to run your lambda in development enviroments so you can test it locally"}],"owner":{"account_id":11227019,"reputation":1057,"user_id":8236354,"accept_rate":0,"display_name":"stein korsveien"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689927076,"creation_date":1689889328,"question_id":76733893,"body_markdown":"I want to use spring boot in a aws lamda function. I have created the main class:\r\n\r\n    package com.baeldung.aws;\r\n    \r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    \r\n    @SpringBootApplication\r\n    public class Application {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\nThe controller class:\r\n\r\n    package com.baeldung.aws.controller;\r\n    \r\n    import java.util.List;\r\n    \r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    \r\n    import com.baeldung.aws.data.User;\r\n    \r\n    @RestController\r\n    @RequestMapping(&quot;/&quot;)\r\n    public class ProfileController {\r\n    \r\n        @GetMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public List&lt;User&gt; getUser() {\r\n            return List.of(new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe@baeldung.com&quot;), new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe-2@baeldung.com&quot;));\r\n        }\r\n    \r\n    }\r\n\r\nAnd the handler class:\r\n\r\n    package com.baeldung.aws.handler;\r\n    \r\n    import com.amazonaws.serverless.exceptions.ContainerInitializationException;\r\n    import com.amazonaws.serverless.proxy.model.AwsProxyResponse;\r\n    import com.amazonaws.serverless.proxy.model.HttpApiV2ProxyRequest;\r\n    import com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\r\n    import com.amazonaws.services.lambda.runtime.Context;\r\n    import com.amazonaws.services.lambda.runtime.RequestHandler;\r\n    import com.baeldung.aws.Application;\r\n    \r\n    public class HttpV2LambdaHandler implements RequestHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; {\r\n        private static SpringBootLambdaContainerHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; handler;\r\n    \r\n        static {\r\n            try {\r\n                handler = SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(Application.class);\r\n            } catch (ContainerInitializationException ex) {\r\n                throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public AwsProxyResponse handleRequest(HttpApiV2ProxyRequest input, Context context) {\r\n            return handler.proxy(input, context);\r\n        }\r\n    }\r\n\r\nTo build the following Gradle script is used. \r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &#39;com.github.johnrengelman.shadow&#39; version &#39;8.1.1&#39;\r\n        id &#39;org.springframework.boot&#39; version &#39;3.1.2&#39;\r\n    }\r\n    \r\n    repositories {\r\n      mavenCentral()\r\n    }\r\n    \r\n    sourceCompatibility = JavaVersion.VERSION_11\r\n    targetCompatibility = JavaVersion.VERSION_11\r\n    \r\n    dependencies {\r\n             implementation &#39;org.springframework.boot:spring-boot-starter-web:2.7.13&#39;\r\n             implementation &#39;org.springframework.boot:spring-boot-starter-validation:2.7.13&#39;\r\n             implementation &#39;com.amazonaws.serverless:aws-serverless-java-container-springboot2:1.9.3&#39;\r\n             testImplementation &#39;org.springframework.boot:spring-boot-starter-test:2.7.13&#39;\r\n    }\r\n\r\n    jar {\r\n    \t    manifest {\r\n            attributes &#39;Implementation-Title&#39;: &#39;Gradle Quickstart&#39;,\r\n                       &#39;Implementation-Version&#39;: version,\r\n                       &#39;Main-Class&#39;: &#39;com.baeldung.aws.Application&#39;\r\n              }\r\n        }\r\n        \r\n        shadowJar {\r\n                    exclude &#39;org.apache.tomcat.embed:*&#39;\r\n                   }\r\nI use the following Pulumi code to deploy the code to the aws lamda function:\r\n\r\n    import * as aws from &quot;@pulumi/aws&quot;\r\n    import * as pulumi from &quot;@pulumi/pulumi&quot;;\r\n    import  {petsExecutionRole} from &quot;./PetsExecutionRole&quot;\r\n    \r\n    const stack = pulumi.getStack()\r\n    const handler= &quot;com.baeldung.aws.handler.HttpV2LambdaHandler&quot;\r\n    \r\n    \r\n    export const petsFunction = new aws.lambda.Function(&quot;pets-function&quot;, {\r\n        code: new pulumi.asset.FileArchive(&quot;../app/build/libs/pets-all.jar&quot;),   \r\n        runtime: aws.lambda.Runtime.Java11,\r\n        handler: handler,\r\n        role: petsExecutionRole.arn,\r\n        name: stack + &#39;-&#39; +&quot;petsFunction&quot;,\r\n        memorySize: 10240,\r\n        timeout: 900,\r\n        tracingConfig:{mode:&quot;Active&quot;},\r\n        architectures:[&quot;arm64&quot;],\r\n        layers: [ &quot;arn:aws:lambda:eu-north-1:901920570463:layer:aws-otel-java-agent-arm64-ver-1-24-0:1&quot;,\r\n                  &quot;arn:aws:lambda:eu-north-1:464622532012:layer:Datadog-Extension-ARM:43&quot;], \r\n        environment: {\r\n            variables: {\r\n    \t\t\tAWS_LAMBDA_EXEC_WRAPPER: &quot;/opt/otel-handler&quot;,\r\n    \t\t\tDD_LOGS_INJECTION:&quot;true&quot;,\r\n    \t\t\tDD_SITE: &quot;datadoghq.eu&quot;,\r\n    \t\t\tDD_ENV: &quot;dev&quot;,\r\n    \t\t\tDD_API_KEY: &quot;xxxxxxx&quot;\r\n    \t\t}\r\n    \t\t\t\r\n            }\r\n    \r\n    },\r\n\r\nIf run gradle bootRun and  run  curl http://localhost:8080 I get \r\ncurl  http://localhost:8080/users\r\n\r\n[{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe@baeldung.com&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe-2@baeldung.com&quot;}]%              steinko@Steins-MacBook-Pro inf % \r\n\r\n\r\nThe aws lamda function is called from a aws gateway \r\nWhen I run a curl \r\ncurl https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users\r\nI get following error in the Cloadwatch log\r\n\r\n\r\nError loading class com.baeldung.aws.handler.HttpV2LambdaHandler: java.lang.ExceptionInInitializerError\r\njava.lang.ExceptionInInitializerError\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Unknown Source)\r\nCaused by: java.lang.ClassCastException: class org.springframework.context.annotation.AnnotationConfigApplicationContext cannot be cast to class org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext (org.springframework.context.annotation.AnnotationConfigApplicationContext and org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext are in unnamed module of loader lambdainternal.CustomerClassLoader @4b960b5b)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.initialize(SpringBootLambdaContainerHandler.java:197)\r\n\tat com.amazonaws.serverless.proxy.InitializationWrapper.start(InitializationWrapper.java:35)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootProxyHandlerBuilder.buildAndInitialize(SpringBootProxyHandlerBuilder.java:81)\r\n\tat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(SpringBootLambdaContainerHandler.java:110)\r\n\tat com.baeldung.aws.handler.HttpV2LambdaHandler.&lt;clinit&gt;(HttpV2LambdaHandler.java:16)\r\n\t... 2 more\r\n\r\nHow do I fix this error ?\r\n\r\n\r\n","title":"How do I fix the error in loading handler to aws lamda function?","body":"<p>I want to use spring boot in a aws lamda function. I have created the main class:</p>\n<pre><code>package com.baeldung.aws;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n<p>The controller class:</p>\n<pre><code>package com.baeldung.aws.controller;\n\nimport java.util.List;\n\nimport org.springframework.http.MediaType;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport com.baeldung.aws.data.User;\n\n@RestController\n@RequestMapping(&quot;/&quot;)\npublic class ProfileController {\n\n    @GetMapping(value = &quot;users&quot;, produces = MediaType.APPLICATION_JSON_VALUE)\n    public List&lt;User&gt; getUser() {\n        return List.of(new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe@baeldung.com&quot;), new User(&quot;John&quot;, &quot;Doe&quot;, &quot;john.doe-2@baeldung.com&quot;));\n    }\n\n}\n</code></pre>\n<p>And the handler class:</p>\n<pre><code>package com.baeldung.aws.handler;\n\nimport com.amazonaws.serverless.exceptions.ContainerInitializationException;\nimport com.amazonaws.serverless.proxy.model.AwsProxyResponse;\nimport com.amazonaws.serverless.proxy.model.HttpApiV2ProxyRequest;\nimport com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.baeldung.aws.Application;\n\npublic class HttpV2LambdaHandler implements RequestHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; {\n    private static SpringBootLambdaContainerHandler&lt;HttpApiV2ProxyRequest, AwsProxyResponse&gt; handler;\n\n    static {\n        try {\n            handler = SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(Application.class);\n        } catch (ContainerInitializationException ex) {\n            throw new RuntimeException(&quot;Unable to load spring boot application&quot;, ex);\n        }\n    }\n\n    @Override\n    public AwsProxyResponse handleRequest(HttpApiV2ProxyRequest input, Context context) {\n        return handler.proxy(input, context);\n    }\n}\n</code></pre>\n<p>To build the following Gradle script is used.</p>\n<pre><code>plugins {\n    id 'java'\n    id 'com.github.johnrengelman.shadow' version '8.1.1'\n    id 'org.springframework.boot' version '3.1.2'\n}\n\nrepositories {\n  mavenCentral()\n}\n\nsourceCompatibility = JavaVersion.VERSION_11\ntargetCompatibility = JavaVersion.VERSION_11\n\ndependencies {\n         implementation 'org.springframework.boot:spring-boot-starter-web:2.7.13'\n         implementation 'org.springframework.boot:spring-boot-starter-validation:2.7.13'\n         implementation 'com.amazonaws.serverless:aws-serverless-java-container-springboot2:1.9.3'\n         testImplementation 'org.springframework.boot:spring-boot-starter-test:2.7.13'\n}\n\njar {\n        manifest {\n        attributes 'Implementation-Title': 'Gradle Quickstart',\n                   'Implementation-Version': version,\n                   'Main-Class': 'com.baeldung.aws.Application'\n          }\n    }\n    \n    shadowJar {\n                exclude 'org.apache.tomcat.embed:*'\n               }\n</code></pre>\n<p>I use the following Pulumi code to deploy the code to the aws lamda function:</p>\n<pre><code>import * as aws from &quot;@pulumi/aws&quot;\nimport * as pulumi from &quot;@pulumi/pulumi&quot;;\nimport  {petsExecutionRole} from &quot;./PetsExecutionRole&quot;\n\nconst stack = pulumi.getStack()\nconst handler= &quot;com.baeldung.aws.handler.HttpV2LambdaHandler&quot;\n\n\nexport const petsFunction = new aws.lambda.Function(&quot;pets-function&quot;, {\n    code: new pulumi.asset.FileArchive(&quot;../app/build/libs/pets-all.jar&quot;),   \n    runtime: aws.lambda.Runtime.Java11,\n    handler: handler,\n    role: petsExecutionRole.arn,\n    name: stack + '-' +&quot;petsFunction&quot;,\n    memorySize: 10240,\n    timeout: 900,\n    tracingConfig:{mode:&quot;Active&quot;},\n    architectures:[&quot;arm64&quot;],\n    layers: [ &quot;arn:aws:lambda:eu-north-1:901920570463:layer:aws-otel-java-agent-arm64-ver-1-24-0:1&quot;,\n              &quot;arn:aws:lambda:eu-north-1:464622532012:layer:Datadog-Extension-ARM:43&quot;], \n    environment: {\n        variables: {\n            AWS_LAMBDA_EXEC_WRAPPER: &quot;/opt/otel-handler&quot;,\n            DD_LOGS_INJECTION:&quot;true&quot;,\n            DD_SITE: &quot;datadoghq.eu&quot;,\n            DD_ENV: &quot;dev&quot;,\n            DD_API_KEY: &quot;xxxxxxx&quot;\n        }\n            \n        }\n\n},\n</code></pre>\n<p>If run gradle bootRun and  run  curl http://localhost:8080 I get\ncurl  http://localhost:8080/users</p>\n<p>[{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe@baeldung.com&quot;},{&quot;name&quot;:&quot;John&quot;,&quot;surname&quot;:&quot;Doe&quot;,&quot;emailAddress&quot;:&quot;john.doe-2@baeldung.com&quot;}]%              steinko@Steins-MacBook-Pro inf %</p>\n<p>The aws lamda function is called from a aws gateway\nWhen I run a curl\ncurl <a href=\"https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users\" rel=\"nofollow noreferrer\">https://h1t5hu3bu8.execute-api.eu-north-1.amazonaws.com/dev/users</a>\nI get following error in the Cloadwatch log</p>\n<p>Error loading class com.baeldung.aws.handler.HttpV2LambdaHandler: java.lang.ExceptionInInitializerError\njava.lang.ExceptionInInitializerError\nat java.base/java.lang.Class.forName0(Native Method)\nat java.base/java.lang.Class.forName(Unknown Source)\nCaused by: java.lang.ClassCastException: class org.springframework.context.annotation.AnnotationConfigApplicationContext cannot be cast to class org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext (org.springframework.context.annotation.AnnotationConfigApplicationContext and org.springframework.boot.web.servlet.context.AnnotationConfigServletWebServerApplicationContext are in unnamed module of loader lambdainternal.CustomerClassLoader @4b960b5b)\nat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.initialize(SpringBootLambdaContainerHandler.java:197)\nat com.amazonaws.serverless.proxy.InitializationWrapper.start(InitializationWrapper.java:35)\nat com.amazonaws.serverless.proxy.spring.SpringBootProxyHandlerBuilder.buildAndInitialize(SpringBootProxyHandlerBuilder.java:81)\nat com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler.getHttpApiV2ProxyHandler(SpringBootLambdaContainerHandler.java:110)\nat com.baeldung.aws.handler.HttpV2LambdaHandler.(HttpV2LambdaHandler.java:16)\n... 2 more</p>\n<p>How do I fix this error ?</p>\n"},{"tags":["java","snakeyaml"],"comments":[{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1568201767,"post_id":57886990,"comment_id":102198234,"body_markdown":"Where exactly is the exception thrown?","body":"Where exactly is the exception thrown?"},{"owner":{"account_id":9712403,"reputation":344,"user_id":7203814,"display_name":"Lakshman Miani"},"score":0,"creation_date":1568202236,"post_id":57886990,"comment_id":102198492,"body_markdown":"java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data","body":"java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data"},{"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"score":0,"creation_date":1568202504,"post_id":57886990,"comment_id":102198622,"body_markdown":"What line is it thrown at and what kind of exception is it?","body":"What line is it thrown at and what kind of exception is it?"}],"answers":[{"tags":[],"owner":{"account_id":14619534,"reputation":421,"user_id":10558670,"display_name":"MAO3J1m0Op"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1568202417,"creation_date":1568202417,"answer_id":57888469,"question_id":57886990,"body_markdown":"Since `DataConfig` is not a subtype or supertype of `LinkedHashMap`, casting cannot be used there. I’m not familiar with yaml, but I can assume that the method `yaml.load()` returns a `LinkedHashMap` from your exception description.\r\n\r\nTry writing a static method belonging to `DataConfig` that converts a `LinkedHashMap` to a `DataConfig`:\r\n\r\n    public static DataConfig parseNew(LinkedHashMap map) {\r\n\r\n    }","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>Since <code>DataConfig</code> is not a subtype or supertype of <code>LinkedHashMap</code>, casting cannot be used there. I’m not familiar with yaml, but I can assume that the method <code>yaml.load()</code> returns a <code>LinkedHashMap</code> from your exception description.</p>\n\n<p>Try writing a static method belonging to <code>DataConfig</code> that converts a <code>LinkedHashMap</code> to a <code>DataConfig</code>:</p>\n\n<pre><code>public static DataConfig parseNew(LinkedHashMap map) {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":289412,"reputation":910,"user_id":590374,"display_name":"Naaooj"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658306611,"creation_date":1658306611,"answer_id":73048473,"question_id":57886990,"body_markdown":"To solve this, you should add a [TypeDescription][1] to your ***Yaml*** object and manually map the type of the list of the underlying property:\r\n\r\n    yaml.addTypeDescription(new TypeDescription(DataConfig.class) {\r\n        @Override\r\n        public boolean setupPropertyType(String key, Node valueNode) {\r\n            if (&quot;heros&quot;.equals(key) &amp;&amp;  valueNode instanceof MappingNode) {\r\n                MappingNode mappingNode = (MappingNode) valueNode;\r\n                boolean listTypeDefined = false;\r\n                for (NodeTuple nodeTuple : mappingNode.getValue()) {\r\n                    if (nodeTuple.getValueNode() instanceof SequenceNode) {\r\n                        SequenceNode sequenceNode = (SequenceNode) nodeTuple.getValueNode();\r\n                        sequenceNode.setListType(Data.class);\r\n                        listTypeDefined = true;\r\n                    }\r\n                }\r\n                return listTypeDefined;\r\n            }\r\n            return super.setupPropertyType(key, valueNode);\r\n        }\r\n    });\r\n\r\nIf you do this and run your program, you should see the following output:\r\n\r\n    one h1\r\n    two h3\r\n    Test$DataConfig@6a79c292\r\n\r\nPlease note a small mistake in your example, your ***Data*** class has a property ***url*** whereas in the yaml it&#39;s ***uri***.\r\n\r\n  [1]: https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/TypeDescription.java","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>To solve this, you should add a <a href=\"https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/TypeDescription.java\" rel=\"nofollow noreferrer\">TypeDescription</a> to your <em><strong>Yaml</strong></em> object and manually map the type of the list of the underlying property:</p>\n<pre><code>yaml.addTypeDescription(new TypeDescription(DataConfig.class) {\n    @Override\n    public boolean setupPropertyType(String key, Node valueNode) {\n        if (&quot;heros&quot;.equals(key) &amp;&amp;  valueNode instanceof MappingNode) {\n            MappingNode mappingNode = (MappingNode) valueNode;\n            boolean listTypeDefined = false;\n            for (NodeTuple nodeTuple : mappingNode.getValue()) {\n                if (nodeTuple.getValueNode() instanceof SequenceNode) {\n                    SequenceNode sequenceNode = (SequenceNode) nodeTuple.getValueNode();\n                    sequenceNode.setListType(Data.class);\n                    listTypeDefined = true;\n                }\n            }\n            return listTypeDefined;\n        }\n        return super.setupPropertyType(key, valueNode);\n    }\n});\n</code></pre>\n<p>If you do this and run your program, you should see the following output:</p>\n<pre><code>one h1\ntwo h3\nTest$DataConfig@6a79c292\n</code></pre>\n<p>Please note a small mistake in your example, your <em><strong>Data</strong></em> class has a property <em><strong>url</strong></em> whereas in the yaml it's <em><strong>uri</strong></em>.</p>\n"},{"tags":[],"owner":{"account_id":12151907,"reputation":2171,"user_id":8871891,"display_name":"z.x"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689926366,"creation_date":1689926366,"answer_id":76736165,"question_id":57886990,"body_markdown":"May use custom constructor \r\n\r\n```java\r\npublic class MyDataConstructor extends Constructor {\r\n    private static final String MY_DATA_CONSTRUCTOR_NAME = MyDataConstructor.class.getSimpleName();\r\n\r\n    public MyDataConstructor(LoaderOptions loadingConfig) {\r\n        super(loadingConfig);\r\n        this.rootTag = new Tag(MY_DATA_CONSTRUCTOR_NAME);\r\n    }\r\n\r\n    @Override\r\n    protected Object constructObject(Node node) {\r\n        if (MY_DATA_CONSTRUCTOR_NAME.equals(node.getTag().getValue()) &amp;&amp; node instanceof MappingNode mNode) {\r\n            return mNode.getValue().stream().collect(\r\n                    Collectors.toMap(\r\n                            t -&gt; super.constructObject(t.getKeyNode()),\r\n                            t -&gt; {\r\n                                Node child = t.getValueNode();\r\n                                if (child instanceof SequenceNode sNode) {\r\n                                    sNode.setListType(Data.class);\r\n                                }\r\n                                return super.constructObject(child);\r\n                            }\r\n                    )\r\n            );\r\n        }\r\n        return super.constructObject(node);\r\n    }\r\n\r\n    @lombok.Data\r\n    public static class Data {\r\n        private String name;\r\n        private String uri;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            Yaml yl = new Yaml(new MyDataConstructor(new LoaderOptions()));\r\n            String ylStr =\r\n                    &quot;custom-xxx:\\n&quot; +\r\n                    &quot;  - name: qwe\\n&quot; +\r\n                    &quot;    uri: wwww\\n&quot; +\r\n                    &quot;  - name: asd\\n&quot; +\r\n                    &quot;    uri: xxxx\\n&quot; +\r\n                    &quot;  - name: zxc\\n&quot; +\r\n                    &quot;    uri: rrr&quot;;\r\n            Map&lt;String, List&lt;Data&gt;&gt; my = yl.load(ylStr);\r\n\r\n            for (String key : my.keySet()){\r\n                for(Data item: my.get(key)){\r\n                    System.out.println(item.getName());\r\n                    System.out.println(item.getUri());\r\n                    System.out.println(item.getClass().getName());\r\n                }\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\noutput:\r\n```shell\r\n&gt; Task :MyDataConstructor.main()\r\nqwe\r\nwwww\r\nxxx.MyDataConstructor$Data\r\nasd\r\nxxxx\r\nxxx.MyDataConstructor$Data\r\nzxc\r\nrrr\r\nxxx.MyDataConstructor$Data\r\n```\r\n\r\nps:\r\n\r\n```gradle\r\ndependencies {\r\n    implementation &quot;org.yaml:snakeyaml:2.0&quot;\r\n}\r\n```\r\n\r\n&gt; ref [Constructor][1]\r\n\r\n\r\n  [1]: https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/constructor/Constructor.java","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>May use custom constructor</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyDataConstructor extends Constructor {\n    private static final String MY_DATA_CONSTRUCTOR_NAME = MyDataConstructor.class.getSimpleName();\n\n    public MyDataConstructor(LoaderOptions loadingConfig) {\n        super(loadingConfig);\n        this.rootTag = new Tag(MY_DATA_CONSTRUCTOR_NAME);\n    }\n\n    @Override\n    protected Object constructObject(Node node) {\n        if (MY_DATA_CONSTRUCTOR_NAME.equals(node.getTag().getValue()) &amp;&amp; node instanceof MappingNode mNode) {\n            return mNode.getValue().stream().collect(\n                    Collectors.toMap(\n                            t -&gt; super.constructObject(t.getKeyNode()),\n                            t -&gt; {\n                                Node child = t.getValueNode();\n                                if (child instanceof SequenceNode sNode) {\n                                    sNode.setListType(Data.class);\n                                }\n                                return super.constructObject(child);\n                            }\n                    )\n            );\n        }\n        return super.constructObject(node);\n    }\n\n    @lombok.Data\n    public static class Data {\n        private String name;\n        private String uri;\n    }\n\n    public static void main(String[] args) {\n        try {\n            Yaml yl = new Yaml(new MyDataConstructor(new LoaderOptions()));\n            String ylStr =\n                    &quot;custom-xxx:\\n&quot; +\n                    &quot;  - name: qwe\\n&quot; +\n                    &quot;    uri: wwww\\n&quot; +\n                    &quot;  - name: asd\\n&quot; +\n                    &quot;    uri: xxxx\\n&quot; +\n                    &quot;  - name: zxc\\n&quot; +\n                    &quot;    uri: rrr&quot;;\n            Map&lt;String, List&lt;Data&gt;&gt; my = yl.load(ylStr);\n\n            for (String key : my.keySet()){\n                for(Data item: my.get(key)){\n                    System.out.println(item.getName());\n                    System.out.println(item.getUri());\n                    System.out.println(item.getClass().getName());\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>output:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>&gt; Task :MyDataConstructor.main()\nqwe\nwwww\nxxx.MyDataConstructor$Data\nasd\nxxxx\nxxx.MyDataConstructor$Data\nzxc\nrrr\nxxx.MyDataConstructor$Data\n</code></pre>\n<p>ps:</p>\n<pre><code>dependencies {\n    implementation &quot;org.yaml:snakeyaml:2.0&quot;\n}\n</code></pre>\n<blockquote>\n<p>ref <a href=\"https://github.com/snakeyaml/snakeyaml/blob/master/src/main/java/org/yaml/snakeyaml/constructor/Constructor.java\" rel=\"nofollow noreferrer\">Constructor</a></p>\n</blockquote>\n"}],"owner":{"account_id":9712403,"reputation":344,"user_id":7203814,"display_name":"Lakshman Miani"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1584,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1689926366,"creation_date":1568197167,"question_id":57886990,"body_markdown":"trying to load data from yaml and creating the following object:\r\n\r\nProblem: Not able map yaml to Object, When I try to it is always throwing exception: java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data\r\n\r\n\r\n    Map&lt;String,List&lt;Data&gt;&gt; map;\r\n\r\nCode Snippet:\r\n\r\n    public class DataConfig {\r\n\tprivate Map&lt;String, List&lt;Data&gt;&gt; heros = new HashMap&lt;String, List&lt;Data&gt;&gt;();\r\n\r\n\tpublic static class Data {\r\n\t\tprivate String name;\r\n\t\tprivate String uri;\r\n\r\n\t\tpublic String getName() {\r\n\t\t\treturn name;\r\n\t\t}\r\n\r\n\t\tpublic void setName(String name) {\r\n\t\t\tthis.name = name;\r\n\t\t}\r\n\r\n\t\tpublic String getUri() {\r\n\t\t\treturn uri;\r\n\t\t}\r\n\r\n\t\tpublic void setUri(String uri) {\r\n\t\t\tthis.uri = uri;\r\n\t\t}\r\n\r\n\t\t@Override\r\n\t\tpublic String toString() {\r\n\t\t\treturn &quot;Data [name=&quot; + name + &quot;, uri=&quot; + uri + &quot;]&quot;;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic Map&lt;String, List&lt;Data&gt;&gt; getHeros() {\r\n\t\treturn heros;\r\n\t}\r\n\r\n\tpublic void setHeros(Map&lt;String, List&lt;Data&gt;&gt; heros) {\r\n\t\tthis.heros = heros;\r\n\t}\r\n\r\nYaml:\r\n\r\n \r\n\r\n  \r\n\r\n      --- \r\n     heros: \r\n       one:\r\n          \r\n         - name: h1\r\n           url: hu2\r\n         - name: h2\r\n           url: hu22\r\n      two: \r\n        - name: h3\r\n          url: hu3\r\n\r\nConstructing Object:\r\n\r\n       Yaml yaml = new Yaml(new Constructor(DataConfig.class));\r\n       \r\n       DataConfig retValue = (DataConfig) yaml.load(new FileInputStream(&quot;one.yaml&quot;));\r\n       retValue.getHeros().entrySet().forEach(ele-&gt;{\r\n    \t   System.out.println(ele.getKey()+&quot; &quot;+ele.getValue().get(0).getName());\r\n       });\r\n        System.out.println(retValue);","title":"how to get Map&lt;String,List&lt;Data&gt;&gt; from yaml using snakeyaml","body":"<p>trying to load data from yaml and creating the following object:</p>\n\n<p>Problem: Not able map yaml to Object, When I try to it is always throwing exception: java.util.LinkedHashMap cannot be cast to com.heraizen.DataConfig$Data</p>\n\n<pre><code>Map&lt;String,List&lt;Data&gt;&gt; map;\n</code></pre>\n\n<p>Code Snippet:</p>\n\n<pre><code>public class DataConfig {\nprivate Map&lt;String, List&lt;Data&gt;&gt; heros = new HashMap&lt;String, List&lt;Data&gt;&gt;();\n\npublic static class Data {\n    private String name;\n    private String uri;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getUri() {\n        return uri;\n    }\n\n    public void setUri(String uri) {\n        this.uri = uri;\n    }\n\n    @Override\n    public String toString() {\n        return \"Data [name=\" + name + \", uri=\" + uri + \"]\";\n    }\n\n}\n\npublic Map&lt;String, List&lt;Data&gt;&gt; getHeros() {\n    return heros;\n}\n\npublic void setHeros(Map&lt;String, List&lt;Data&gt;&gt; heros) {\n    this.heros = heros;\n}\n</code></pre>\n\n<p>Yaml:</p>\n\n<pre><code>  --- \n heros: \n   one:\n\n     - name: h1\n       url: hu2\n     - name: h2\n       url: hu22\n  two: \n    - name: h3\n      url: hu3\n</code></pre>\n\n<p>Constructing Object:</p>\n\n<pre><code>   Yaml yaml = new Yaml(new Constructor(DataConfig.class));\n\n   DataConfig retValue = (DataConfig) yaml.load(new FileInputStream(\"one.yaml\"));\n   retValue.getHeros().entrySet().forEach(ele-&gt;{\n       System.out.println(ele.getKey()+\" \"+ele.getValue().get(0).getName());\n   });\n    System.out.println(retValue);\n</code></pre>\n"},{"tags":["java","vert.x","vertx-verticle","vertx-httpclient","vertx-eventbus"],"comments":[{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":1,"creation_date":1590415608,"post_id":61974437,"comment_id":109663494,"body_markdown":"The first line shows: `Failed to bind on port: 8000`. Is something already bound to port 8000 on the server? It seems this was logged by the app so if more info is needed perhaps the cause should be logged too.","body":"The first line shows: <code>Failed to bind on port: 8000</code>. Is something already bound to port 8000 on the server? It seems this was logged by the app so if more info is needed perhaps the cause should be logged too."}],"owner":{"account_id":18662116,"reputation":11,"user_id":13603071,"display_name":"Alice Shunder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5057,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1689926095,"creation_date":1590247952,"question_id":61974437,"body_markdown":"I was making a vertx verticle for Java. When I run it in IntelliJ it seems to start, but when I make a shadowjar and launch it on my Ubuntu server I get this:\r\n\r\n    INFO: Failed to bind on port: 8000\r\n    May 23, 2020 3:23:11 PM io.vertx.core.impl.DeploymentManager\r\n    SEVERE: Failed to start http server\r\n    io.vertx.core.impl.NoStackTraceThrowable: Failed to start http server\r\n\r\nIt used to work normally before but I can&#39;t figure out what this means.  \r\nI have been using shadowjar to deploy this for weeks before, it gives no errors in IntelliJ and this error gives zero information...","title":"How to fix io.vertx.core.impl.NoStackTraceThrowable?","body":"<p>I was making a vertx verticle for Java. When I run it in IntelliJ it seems to start, but when I make a shadowjar and launch it on my Ubuntu server I get this:</p>\n<pre><code>INFO: Failed to bind on port: 8000\nMay 23, 2020 3:23:11 PM io.vertx.core.impl.DeploymentManager\nSEVERE: Failed to start http server\nio.vertx.core.impl.NoStackTraceThrowable: Failed to start http server\n</code></pre>\n<p>It used to work normally before but I can't figure out what this means.<br />\nI have been using shadowjar to deploy this for weeks before, it gives no errors in IntelliJ and this error gives zero information...</p>\n"},{"tags":["java","generics","interface","polymorphism","abstract-class"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689889890,"post_id":76733908,"comment_id":135281270,"body_markdown":"Why does `Math` extend `Course&lt;Student&gt;` instead of `Course&lt;MathStudent&gt;`? Why does `Course.getStudents()` not return `List&lt;T&gt;`?","body":"Why does <code>Math</code> extend <code>Course&lt;Student&gt;</code> instead of <code>Course&lt;MathStudent&gt;</code>? Why does <code>Course.getStudents()</code> not return <code>List&lt;T&gt;</code>?"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689889928,"post_id":76733908,"comment_id":135281275,"body_markdown":"Please show more about how you want to use the `Math` class.","body":"Please show more about how you want to use the <code>Math</code> class."},{"owner":{"account_id":19632725,"reputation":23,"user_id":14370656,"display_name":"FlorinS"},"score":0,"creation_date":1689890272,"post_id":76733908,"comment_id":135281322,"body_markdown":"I don&#39;t want to extend the MathStudent because then it will make the Math class only workable for the math students, but I&#39;d like to add more type of students.\n\nFor example I have:\nStudent student1 = new MathStudent(&quot;Name&quot;, etc...);\nStudent student2 = new EconomyStudent(&quot;Name&quot;, etc...);\nStudent student3 = new BiologyStudent(&quot;Name&quot;, etc...);\n\nIf I extend Course&lt;MathStudent&gt; then I won&#39;t be abble to add the EconomyStudent to it. So in other words I&#39;d like a Math class that would take in all the students that implement the MathBackground (MathStudent and EconomyStudent implement it)","body":"I don&#39;t want to extend the MathStudent because then it will make the Math class only workable for the math students, but I&#39;d like to add more type of students.  For example I have: Student student1 = new MathStudent(&quot;Name&quot;, etc...); Student student2 = new EconomyStudent(&quot;Name&quot;, etc...); Student student3 = new BiologyStudent(&quot;Name&quot;, etc...);  If I extend Course&lt;MathStudent&gt; then I won&#39;t be abble to add the EconomyStudent to it. So in other words I&#39;d like a Math class that would take in all the students that implement the MathBackground (MathStudent and EconomyStudent implement it)"},{"owner":{"account_id":19632725,"reputation":23,"user_id":14370656,"display_name":"FlorinS"},"score":0,"creation_date":1689890542,"post_id":76733908,"comment_id":135281344,"body_markdown":"And with all the courses that I ll get, I want to make a course catalog that will contain every course for every user","body":"And with all the courses that I ll get, I want to make a course catalog that will contain every course for every user"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":3,"creation_date":1689891172,"post_id":76733908,"comment_id":135281409,"body_markdown":"Why does `Course` need to be parameterized by `Student`? This makes no sense, especially since you don&#39;t use `T` in the code.  It is unclear what you are actually trying to do.","body":"Why does <code>Course</code> need to be parameterized by <code>Student</code>? This makes no sense, especially since you don&#39;t use <code>T</code> in the code.  It is unclear what you are actually trying to do."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1689891198,"post_id":76733908,"comment_id":135281410,"body_markdown":"In that case, I don&#39;t think there&#39;s any point in having `Course` be generic -- if every subclass will extend `Course&lt;Student&gt;`.","body":"In that case, I don&#39;t think there&#39;s any point in having <code>Course</code> be generic -- if every subclass will extend <code>Course&lt;Student&gt;</code>."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689914749,"post_id":76733908,"comment_id":135283327,"body_markdown":"To answer the question in your title, all Generic classes in Java ultimately inherit from `java.lang.Object`, so there is nothing inherently wrong with the practice; but your class hierarchy looks upside down and back to front.","body":"To answer the question in your title, all Generic classes in Java ultimately inherit from <code>java.lang.Object</code>, so there is nothing inherently wrong with the practice; but your class hierarchy looks upside down and back to front."},{"owner":{"account_id":19632725,"reputation":23,"user_id":14370656,"display_name":"FlorinS"},"score":0,"creation_date":1689922924,"post_id":76733908,"comment_id":135284424,"body_markdown":"@JimGarrison it doesn’t need, it’s not mandatory, I mean I thought that by parameterizing the course by the student in the end I ll create a Math object that will only take some kind of Students","body":"@JimGarrison it doesn’t need, it’s not mandatory, I mean I thought that by parameterizing the course by the student in the end I ll create a Math object that will only take some kind of Students"},{"owner":{"account_id":9760,"reputation":85859,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1689973679,"post_id":76733908,"comment_id":135293538,"body_markdown":"The model you seem to want doesn&#39;t really work.  Courses and Students are different types of objects, with the only relationship being a third type of object (a CourseRegistration).  If you restrict courses to specific student types at the source code level your system will be impossible to maintain and enhance as requirements change.","body":"The model you seem to want doesn&#39;t really work.  Courses and Students are different types of objects, with the only relationship being a third type of object (a CourseRegistration).  If you restrict courses to specific student types at the source code level your system will be impossible to maintain and enhance as requirements change."}],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689925814,"creation_date":1689925814,"answer_id":76736101,"question_id":76733908,"body_markdown":"You want to bind one type of object to another type without adding restrictions to each of the type .You could employ enum which will give compile time error if you fail to define coupling.\r\n\r\nWe added abstract method in Course so that we are defining coupling while creating new course.\r\n\r\n\r\n```\r\npublic abstract CourseStudentPair getCourseStudentPair();\r\n```\r\nWe could easily extend the functionality to allow multiple student type for a course using varargs as below later.Following [YAGNI](https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it) defined one to one coupling for now.\r\n```\r\n\tCourseStudentPair(Class courseClass, Class ... studentClass)\r\n```\r\nSince we want to check the student type while enrolling only, we could implement it as\r\n```\r\n    if ( !getCourseStudentPair().isValidStudForCourse(student, course))\r\n```\r\nthe complete snippet\r\n```\r\n@Data\r\npublic abstract class Course&lt;T extends Student&gt; {\r\n    private String name;\r\n    private int months;\r\n    private int capacity;\r\n    private static List&lt;Student&gt; students = new ArrayList&lt;&gt;();\r\n\r\n    public Course(String name, int months, int capacity) {\r\n        this.name = name;\r\n        this.months= months;\r\n        this.capacity = capacity;\r\n    }\r\n\r\n    public int getCapacity() {\r\n        return capacity;\r\n    }\r\n\r\n    public List&lt;Student&gt; getStudents() {\r\n        return Collections.unmodifiableList(students);\r\n    }\r\n\r\n    protected void addStudent(Student student){\r\n        students.add(student);\r\n    }\r\n\r\n    public abstract void enroll(T student);\r\n    public abstract CourseStudentPair getCourseStudentPair();\r\n\r\n}\r\n\r\nclass Math extends Course&lt;Student&gt; {\r\n\r\n    public Math(String name, int months, int capacity) {\r\n        super(name, months, capacity);\r\n    }\r\n\r\n    @Override\r\n    public void enroll(Student student) {\r\n        System.out.println(student.getClass());\r\n        if ( !getCourseStudentPair().isValidStudForCourse(student, this)) {\r\n            System.out.println(&quot;Can not enroll the student &quot; + student.getName() + &quot; due to the background&quot;);\r\n        }\r\n\r\n        if (this.getCapacity() &lt;= this.getStudents().size()) {\r\n            System.out.println(&quot;The course is already full. We will add you to the waitlist&quot;);\r\n        } else {\r\n            this.addStudent(student);\r\n            System.out.println(&quot;The student &quot; + student.getName() + &quot; has been enrolled&quot;);\r\n        }\r\n\r\n    }\r\n\r\n    @Override\r\n    public CourseStudentPair getCourseStudentPair() {\r\n        return CourseStudentPair.MATH;\r\n    }\r\n}\r\n\r\nenum CourseStudentPair {\r\n    MATH(Math.class,MathStudent.class),ECONOMICS(Economics.class,EconomicsStudent.class);\r\n\r\n    private final Class courseClass;\r\n    private final Class studentClass;\r\n\r\n    CourseStudentPair(Class courseClass, Class studentClass) {\r\n        this.courseClass = courseClass;\r\n        this.studentClass = studentClass;\r\n    }\r\n\r\n    public boolean isValidStudForCourse(@NonNull Student student, @NonNull Course course){\r\n        return  studentClass.isInstance(student) &amp;&amp; courseClass.isInstance(course)  ;\r\n    }\r\n\r\n}\r\n```","title":"Is it a good practice to inherit a generic class from a non generic class, in Java?","body":"<p>You want to bind one type of object to another type without adding restrictions to each of the type .You could employ enum which will give compile time error if you fail to define coupling.</p>\n<p>We added abstract method in Course so that we are defining coupling while creating new course.</p>\n<pre><code>public abstract CourseStudentPair getCourseStudentPair();\n</code></pre>\n<p>We could easily extend the functionality to allow multiple student type for a course using varargs as below later.Following <a href=\"https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it\" rel=\"nofollow noreferrer\">YAGNI</a> defined one to one coupling for now.</p>\n<pre><code>    CourseStudentPair(Class courseClass, Class ... studentClass)\n</code></pre>\n<p>Since we want to check the student type while enrolling only, we could implement it as</p>\n<pre><code>    if ( !getCourseStudentPair().isValidStudForCourse(student, course))\n</code></pre>\n<p>the complete snippet</p>\n<pre><code>@Data\npublic abstract class Course&lt;T extends Student&gt; {\n    private String name;\n    private int months;\n    private int capacity;\n    private static List&lt;Student&gt; students = new ArrayList&lt;&gt;();\n\n    public Course(String name, int months, int capacity) {\n        this.name = name;\n        this.months= months;\n        this.capacity = capacity;\n    }\n\n    public int getCapacity() {\n        return capacity;\n    }\n\n    public List&lt;Student&gt; getStudents() {\n        return Collections.unmodifiableList(students);\n    }\n\n    protected void addStudent(Student student){\n        students.add(student);\n    }\n\n    public abstract void enroll(T student);\n    public abstract CourseStudentPair getCourseStudentPair();\n\n}\n\nclass Math extends Course&lt;Student&gt; {\n\n    public Math(String name, int months, int capacity) {\n        super(name, months, capacity);\n    }\n\n    @Override\n    public void enroll(Student student) {\n        System.out.println(student.getClass());\n        if ( !getCourseStudentPair().isValidStudForCourse(student, this)) {\n            System.out.println(&quot;Can not enroll the student &quot; + student.getName() + &quot; due to the background&quot;);\n        }\n\n        if (this.getCapacity() &lt;= this.getStudents().size()) {\n            System.out.println(&quot;The course is already full. We will add you to the waitlist&quot;);\n        } else {\n            this.addStudent(student);\n            System.out.println(&quot;The student &quot; + student.getName() + &quot; has been enrolled&quot;);\n        }\n\n    }\n\n    @Override\n    public CourseStudentPair getCourseStudentPair() {\n        return CourseStudentPair.MATH;\n    }\n}\n\nenum CourseStudentPair {\n    MATH(Math.class,MathStudent.class),ECONOMICS(Economics.class,EconomicsStudent.class);\n\n    private final Class courseClass;\n    private final Class studentClass;\n\n    CourseStudentPair(Class courseClass, Class studentClass) {\n        this.courseClass = courseClass;\n        this.studentClass = studentClass;\n    }\n\n    public boolean isValidStudForCourse(@NonNull Student student, @NonNull Course course){\n        return  studentClass.isInstance(student) &amp;&amp; courseClass.isInstance(course)  ;\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":19632725,"reputation":23,"user_id":14370656,"display_name":"FlorinS"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1689925814,"creation_date":1689889516,"question_id":76733908,"body_markdown":"I have this code:\r\n\r\n```\r\npublic abstract class Course&lt;T extends Student&gt; {\r\n    private String name;\r\n    private int months;\r\n    private int capacity;\r\n    private static List&lt;Student&gt; students = new ArrayList&lt;&gt;();\r\n\r\n    public Course(String name, int months, int capacity) {\r\n        this.name = name;\r\n        this.months= months;\r\n        this.capacity = capacity;\r\n    }\r\n\r\n    public int getCapacity() {\r\n        return capacity;\r\n    }\r\n\r\n    public List&lt;Student&gt; getStudents() {\r\n        return Collections.unmodifiableList(students);\r\n    }\r\n\r\n    protected void addStudent(Student student){\r\n        students.add(student);\r\n    }\r\n\r\n    public abstract void enroll(T student);\r\n}\r\n\r\npublic class Math extends Course&lt;Student&gt; {\r\n\r\n    public Math(String name, int months, int capacity) {\r\n        super(name, months, capacity);\r\n    }\r\n\r\n    @Override\r\n    public void enroll(Student student) {\r\n        System.out.println(student.getClass());\r\n        if (student instanceof MathBackground) {\r\n            if (this.getCapacity() &lt;= this.getStudents().size()) {\r\n                System.out.println(&quot;The course is already full. We will add you to the waitlist&quot;);\r\n            } else {\r\n                this.addStudent(student);\r\n                System.out.println(&quot;The student &quot; + student.getName() + &quot; has been enrolled&quot;);\r\n            }\r\n        } else{\r\n            System.out.println(&quot;Can not enroll the student &quot; + student.getName() + &quot; due to the background&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI want to have a more than one subclass for the Course and I&#39;m trying to make it as generic as possible, so I can add another course called &quot;Economics&quot; for example, in which I&#39;ll make its own enrol process.\r\n\r\nMore details:\r\n\r\n- I have a `List&lt;Student&gt;` which contains more types of Students, from `MathStudent` to `BiologyStudent` and so on..\r\n- I&#39;d like for the Math class to have something that could only let the students that implement the `MathBackground` interface join, probably my approach is not very good since I understood that it is not a good practice to extend a generic class from a non generic.\r\n\r\nI also want to ask, is it a better approach to have the type as the parent type? I mean, should I have:\r\n\r\n    Course mathClass = new Math(); \r\n\r\nor \r\n\r\n    Math mathClass = new Math();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","title":"Is it a good practice to inherit a generic class from a non generic class, in Java?","body":"<p>I have this code:</p>\n<pre><code>public abstract class Course&lt;T extends Student&gt; {\n    private String name;\n    private int months;\n    private int capacity;\n    private static List&lt;Student&gt; students = new ArrayList&lt;&gt;();\n\n    public Course(String name, int months, int capacity) {\n        this.name = name;\n        this.months= months;\n        this.capacity = capacity;\n    }\n\n    public int getCapacity() {\n        return capacity;\n    }\n\n    public List&lt;Student&gt; getStudents() {\n        return Collections.unmodifiableList(students);\n    }\n\n    protected void addStudent(Student student){\n        students.add(student);\n    }\n\n    public abstract void enroll(T student);\n}\n\npublic class Math extends Course&lt;Student&gt; {\n\n    public Math(String name, int months, int capacity) {\n        super(name, months, capacity);\n    }\n\n    @Override\n    public void enroll(Student student) {\n        System.out.println(student.getClass());\n        if (student instanceof MathBackground) {\n            if (this.getCapacity() &lt;= this.getStudents().size()) {\n                System.out.println(&quot;The course is already full. We will add you to the waitlist&quot;);\n            } else {\n                this.addStudent(student);\n                System.out.println(&quot;The student &quot; + student.getName() + &quot; has been enrolled&quot;);\n            }\n        } else{\n            System.out.println(&quot;Can not enroll the student &quot; + student.getName() + &quot; due to the background&quot;);\n        }\n    }\n}\n</code></pre>\n<p>I want to have a more than one subclass for the Course and I'm trying to make it as generic as possible, so I can add another course called &quot;Economics&quot; for example, in which I'll make its own enrol process.</p>\n<p>More details:</p>\n<ul>\n<li>I have a <code>List&lt;Student&gt;</code> which contains more types of Students, from <code>MathStudent</code> to <code>BiologyStudent</code> and so on..</li>\n<li>I'd like for the Math class to have something that could only let the students that implement the <code>MathBackground</code> interface join, probably my approach is not very good since I understood that it is not a good practice to extend a generic class from a non generic.</li>\n</ul>\n<p>I also want to ask, is it a better approach to have the type as the parent type? I mean, should I have:</p>\n<pre><code>Course mathClass = new Math(); \n</code></pre>\n<p>or</p>\n<pre><code>Math mathClass = new Math();\n</code></pre>\n"},{"tags":["java","null","try-catch","nullpointerexception","concurrenthashmap"],"comments":[{"owner":{"account_id":82500,"reputation":38454,"user_id":231917,"accept_rate":98,"display_name":"zengr"},"score":0,"creation_date":1284599673,"post_id":3722991,"comment_id":3930453,"body_markdown":"Have you tried Collections.synchronizedMap(map) ?","body":"Have you tried Collections.synchronizedMap(map) ?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":5,"creation_date":1284600508,"post_id":3722991,"comment_id":3930540,"body_markdown":"&quot;TF&quot; is that ConcurrentHashMap **is** thread-safe, but you are expecting something else on top of thread safety.","body":"&quot;TF&quot; is that ConcurrentHashMap <b>is</b> thread-safe, but you are expecting something else on top of thread safety."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1284600790,"post_id":3722991,"comment_id":3930564,"body_markdown":"it would also help if you explained what &quot;crash occurs here&quot; means.  What kind of &quot;crash&quot;?  What&#39;s the exception?","body":"it would also help if you explained what &quot;crash occurs here&quot; means.  What kind of &quot;crash&quot;?  What&#39;s the exception?"},{"owner":{"account_id":140872,"reputation":1341,"user_id":347487,"display_name":"Jacob Tomaw"},"score":0,"creation_date":1284601438,"post_id":3722991,"comment_id":3930610,"body_markdown":"Please answer @Stephen C&#39;s questions and rewrite this as a question and less of a story.","body":"Please answer @Stephen C&#39;s questions and rewrite this as a question and less of a story."},{"owner":{"account_id":638909,"reputation":5696,"user_id":414521,"accept_rate":97,"display_name":"SSpoke"},"score":0,"creation_date":1284602147,"post_id":3722991,"comment_id":3930663,"body_markdown":"Sorry I&#39;m a newbie to this whole deal, but I edited the question and put the exception error but it&#39;s still very hazy stacktrace. What would you guys recommend instead of extending the class something simple. I&#39;d do copying collection idea but i&#39;m not sure if thats even possible to be 100% safe aint objects all linked up by references so it&#39;s kinda pointless anyways if the copied object gets deconstructed/destructed somewhere else?.","body":"Sorry I&#39;m a newbie to this whole deal, but I edited the question and put the exception error but it&#39;s still very hazy stacktrace. What would you guys recommend instead of extending the class something simple. I&#39;d do copying collection idea but i&#39;m not sure if thats even possible to be 100% safe aint objects all linked up by references so it&#39;s kinda pointless anyways if the copied object gets deconstructed/destructed somewhere else?."},{"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"score":0,"creation_date":1382684789,"post_id":3722991,"comment_id":29064382,"body_markdown":"JAVA DOC (http://docs.oracle.com/javase/6/docs/api/index.html?overview-summary.html) says ConcurrentHashMap class is fully interoperable with Hashtable in programs that rely on its **thread safety** but not on its **synchronization details**.","body":"JAVA DOC (<a href=\"http://docs.oracle.com/javase/6/docs/api/index.html?overview-summary.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/6/docs/api/&hellip;</a>) says ConcurrentHashMap class is fully interoperable with Hashtable in programs that rely on its <b>thread safety</b> but not on its <b>synchronization details</b>."}],"answers":[{"tags":[],"owner":{"account_id":26075,"reputation":41643,"user_id":67566,"accept_rate":73,"display_name":"James Black"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1284600540,"creation_date":1284599483,"answer_id":3723023,"question_id":3722991,"body_markdown":"You may find that you can&#39;t have the map get modified while you are iterating through it.  If that is the case you may want to get the values and keys in a separate collection and iterate through that, as it will be immutable.\r\n\r\nIt won&#39;t be perfect, but the other option is to extend `ConcurrentHashMap` and when something is added or removed you update these four variables, so you don&#39;t have to iterate through the entire list each time, as that seems to be a waste of cpu cycles.\r\n\r\nHere are a couple of links that may be useful:\r\n\r\nThis one talks a bit about the fact that the improved concurrency is because of relaxing of some promises.\r\n[http://www.ibm.com/developerworks/java/library/j-jtp07233.html][1]\r\n\r\nmemory consistency properties explained:\r\n[http://download-llnw.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility][2]\r\n\r\n  [1]: http://www.ibm.com/developerworks/java/library/j-jtp07233.html\r\n  [2]: http://download-llnw.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>You may find that you can't have the map get modified while you are iterating through it.  If that is the case you may want to get the values and keys in a separate collection and iterate through that, as it will be immutable.</p>\n\n<p>It won't be perfect, but the other option is to extend <code>ConcurrentHashMap</code> and when something is added or removed you update these four variables, so you don't have to iterate through the entire list each time, as that seems to be a waste of cpu cycles.</p>\n\n<p>Here are a couple of links that may be useful:</p>\n\n<p>This one talks a bit about the fact that the improved concurrency is because of relaxing of some promises.\n<a href=\"http://www.ibm.com/developerworks/java/library/j-jtp07233.html\" rel=\"nofollow noreferrer\">http://www.ibm.com/developerworks/java/library/j-jtp07233.html</a></p>\n\n<p>memory consistency properties explained:\n<a href=\"http://download-llnw.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility\" rel=\"nofollow noreferrer\">http://download-llnw.oracle.com/javase/6/docs/api/java/util/concurrent/package-summary.html#MemoryVisibility</a></p>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":16,"is_accepted":true,"score":16,"last_activity_date":1284600586,"creation_date":1284599527,"answer_id":3723027,"question_id":3722991,"body_markdown":"You need to read the javadocs for the [`ConcurrentHashMap.values()`][1] method, paying special attention to this description of how the iterator for the `values()` collection works:\r\n\r\n&gt; &quot;The view&#39;s iterator is a &quot;weakly consistent&quot; iterator that will never throw ConcurrentModificationException, and guarantees to traverse elements as they existed upon construction of the iterator, and may (but is not guaranteed to) reflect any modifications subsequent to construction.&quot;\r\n\r\nThe iterator does not give you a consistent snapshot of the state of the values collection, but **it is thread-safe**, and the expected range of behaviours is *clearly specified*.\r\n\r\nIf you want a Map implementation that gives you a consistent snapshot of the values (or keys, or entries) in the map AND allows you to iterate concurrently with modifications,  you will probably need to create a custom Map wrapper class (that copies the collections atomically) ... or a full-blown custom Map implementation.  Both are likely to be a lot slower than a ConcurrentHashMap for your use-case.\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#values()","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>You need to read the javadocs for the <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html#values()\" rel=\"noreferrer\"><code>ConcurrentHashMap.values()</code></a> method, paying special attention to this description of how the iterator for the <code>values()</code> collection works:</p>\n\n<blockquote>\n  <p>\"The view's iterator is a \"weakly consistent\" iterator that will never throw ConcurrentModificationException, and guarantees to traverse elements as they existed upon construction of the iterator, and may (but is not guaranteed to) reflect any modifications subsequent to construction.\"</p>\n</blockquote>\n\n<p>The iterator does not give you a consistent snapshot of the state of the values collection, but <strong>it is thread-safe</strong>, and the expected range of behaviours is <em>clearly specified</em>.</p>\n\n<p>If you want a Map implementation that gives you a consistent snapshot of the values (or keys, or entries) in the map AND allows you to iterate concurrently with modifications,  you will probably need to create a custom Map wrapper class (that copies the collections atomically) ... or a full-blown custom Map implementation.  Both are likely to be a lot slower than a ConcurrentHashMap for your use-case.</p>\n"},{"tags":[],"owner":{"account_id":70373,"reputation":7742,"user_id":204143,"accept_rate":57,"display_name":"Steve Emmerson"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1284599761,"creation_date":1284599761,"answer_id":3723041,"question_id":3722991,"body_markdown":"I don&#39;t see anything wrong with your code. Because it&#39;s unlikely that the crash actually occurs at the `else`, it&#39;s likely that the `getGender()` method is returning `null`.","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>I don't see anything wrong with your code. Because it's unlikely that the crash actually occurs at the <code>else</code>, it's likely that the <code>getGender()</code> method is returning <code>null</code>.</p>\n"},{"tags":[],"owner":{"account_id":185575,"reputation":93,"user_id":422385,"accept_rate":75,"display_name":"heekyu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1284600102,"creation_date":1284600102,"answer_id":3723068,"question_id":3722991,"body_markdown":"java.util.concurrent.ConcurrentHashMap does &lt;em&gt;not&lt;/em&gt; allow null value. So, null check(person != null) in your code is unnecessary.\r\n\r\nIf you want to deny modification of Map while iteration, you must use synchronization block in above code and all modification operation codes.\r\n\r\n","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>java.util.concurrent.ConcurrentHashMap does <em>not</em> allow null value. So, null check(person != null) in your code is unnecessary.</p>\n\n<p>If you want to deny modification of Map while iteration, you must use synchronization block in above code and all modification operation codes.</p>\n"},{"tags":[],"owner":{"account_id":15855810,"reputation":11,"user_id":11440222,"display_name":"Vivek Paliwal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689925430,"creation_date":1689925430,"answer_id":76736066,"question_id":3722991,"body_markdown":"ConcurrentHashMap is threadsafe and its functions are thread safe but it doesn&#39;t mean your all lines of code in which you are using concurrenthashmap are also thread safe.\r\nThe block of code you must synchronize. You are iterating and trying to get object from concurrenthashmap but in middle some other thread is getting chance to remove object from same concurrenthashmap due to which your thread is throwing NPE.","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>ConcurrentHashMap is threadsafe and its functions are thread safe but it doesn't mean your all lines of code in which you are using concurrenthashmap are also thread safe.\nThe block of code you must synchronize. You are iterating and trying to get object from concurrenthashmap but in middle some other thread is getting chance to remove object from same concurrenthashmap due to which your thread is throwing NPE.</p>\n"}],"owner":{"account_id":638909,"reputation":5696,"user_id":414521,"accept_rate":97,"display_name":"SSpoke"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10150,"favorite_count":0,"down_vote_count":1,"up_vote_count":9,"accepted_answer_id":3723027,"answer_count":5,"score":8,"last_activity_date":1689925430,"creation_date":1284598674,"question_id":3722991,"body_markdown":"I was using HashMap before like \r\n\r\n       public Map&lt;SocketChannel, UserProfile&gt; clients = new HashMap&lt;SocketChannel, UserProfile&gt;();\r\n\r\nnow I&#39;ve switched to ConcurrentHashMap to avoid synchronized blocks and now i&#39;m experiencing problems my server is heavily loaded with 200-400 concurrent clients every second which is expected to grow over time.\r\n\r\nwhich now looks like this\r\n\r\n    public ConcurrentHashMap&lt;SocketChannel, UserProfile&gt; clients = new ConcurrentHashMap&lt;SocketChannel, UserProfile&gt;();\r\n\r\n\r\nMy server design works like this.\r\nI have a worker thread(s) for processing huge amounts of packets. Each packet is checked with a packetHandler sub-routine (not part of thread) pretty much any client can call it at anytime it&#39;s almost like static but it isn&#39;t.\r\n\r\nMy whole server is mostly single threaded except for the packet processing portion.\r\n\r\nAnyways so when someone uses a command like count up all clients online and get some information from them.\r\n\r\nIt is also possible that clients can get disconnected and removed from **ConcurrentHashMap** while the counting is in progress (which causes my problems).\r\n\r\nAlso I&#39;d like to add some code here.\r\n\r\n                    int txtGirls=0;\r\n                    int vidGirls=0;\r\n                    int txtBoys=0;\r\n                    int vidBoys=0;\r\n                    Iterator i = clients.values().iterator();\r\n                    while (i.hasNext()) {\r\n                        UserProfile person = (UserProfile)i.next();\r\n                        if(person != null) {\r\n                            if(person.getChatType()) {\r\n                                if(person.getGender().equals(&quot;m&quot;))\r\n                                    vidBoys++;\r\n                                else //&lt;-- crash occurs here.\r\n                                    vidGirls++;\r\n                            } else if(!person.getChatType()) {\r\n                                if(person.getGender().equals(&quot;m&quot;))\r\n                                    txtBoys++;\r\n                                else\r\n                                    txtGirls++;\r\n                            }\r\n                        }\r\n                    }\r\n\r\nI mean of course i&#39;m going to fix it by adding a try-catch Exception inside the Iterator to skip these null clients.\r\n\r\nBut what I don&#39;t understand if it checks above if(person != null) shouldn&#39;t the code nested automatically works..\r\n\r\nif it doesn&#39;t means it got removed while it was iterating which should be impossible since it&#39;s thread safe wtf?\r\n\r\nWhat should I do? or is try-catch Exception the best way?\r\n\r\n\r\nHere is the exception\r\n\r\n    java.lang.NullPointerException\r\n    \tat Server.processPackets(Server.java:398)\r\n    \tat PacketWorker.run(PacketWorker.java:43)\r\n    \tat java.lang.Thread.run(Thread.java:636)\r\n\r\n\r\nThe processPackets contains the code above. and the comment indicates the line count #\r\n\r\nThanks for enlightening me.","title":"Java ConcurrentHashMap not thread safe.. wth?","body":"<p>I was using HashMap before like </p>\n\n<pre><code>   public Map&lt;SocketChannel, UserProfile&gt; clients = new HashMap&lt;SocketChannel, UserProfile&gt;();\n</code></pre>\n\n<p>now I've switched to ConcurrentHashMap to avoid synchronized blocks and now i'm experiencing problems my server is heavily loaded with 200-400 concurrent clients every second which is expected to grow over time.</p>\n\n<p>which now looks like this</p>\n\n<pre><code>public ConcurrentHashMap&lt;SocketChannel, UserProfile&gt; clients = new ConcurrentHashMap&lt;SocketChannel, UserProfile&gt;();\n</code></pre>\n\n<p>My server design works like this.\nI have a worker thread(s) for processing huge amounts of packets. Each packet is checked with a packetHandler sub-routine (not part of thread) pretty much any client can call it at anytime it's almost like static but it isn't.</p>\n\n<p>My whole server is mostly single threaded except for the packet processing portion.</p>\n\n<p>Anyways so when someone uses a command like count up all clients online and get some information from them.</p>\n\n<p>It is also possible that clients can get disconnected and removed from <strong>ConcurrentHashMap</strong> while the counting is in progress (which causes my problems).</p>\n\n<p>Also I'd like to add some code here.</p>\n\n<pre><code>                int txtGirls=0;\n                int vidGirls=0;\n                int txtBoys=0;\n                int vidBoys=0;\n                Iterator i = clients.values().iterator();\n                while (i.hasNext()) {\n                    UserProfile person = (UserProfile)i.next();\n                    if(person != null) {\n                        if(person.getChatType()) {\n                            if(person.getGender().equals(\"m\"))\n                                vidBoys++;\n                            else //&lt;-- crash occurs here.\n                                vidGirls++;\n                        } else if(!person.getChatType()) {\n                            if(person.getGender().equals(\"m\"))\n                                txtBoys++;\n                            else\n                                txtGirls++;\n                        }\n                    }\n                }\n</code></pre>\n\n<p>I mean of course i'm going to fix it by adding a try-catch Exception inside the Iterator to skip these null clients.</p>\n\n<p>But what I don't understand if it checks above if(person != null) shouldn't the code nested automatically works..</p>\n\n<p>if it doesn't means it got removed while it was iterating which should be impossible since it's thread safe wtf?</p>\n\n<p>What should I do? or is try-catch Exception the best way?</p>\n\n<p>Here is the exception</p>\n\n<pre><code>java.lang.NullPointerException\n    at Server.processPackets(Server.java:398)\n    at PacketWorker.run(PacketWorker.java:43)\n    at java.lang.Thread.run(Thread.java:636)\n</code></pre>\n\n<p>The processPackets contains the code above. and the comment indicates the line count #</p>\n\n<p>Thanks for enlightening me.</p>\n"},{"tags":["java","eclipse","java-8"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1689922253,"post_id":76735608,"comment_id":135284319,"body_markdown":"Please go to the _Error Log_ view, select the error, hit Ctrl+C and paste it into your question formatted as _Sample Code_.","body":"Please go to the <i>Error Log</i> view, select the error, hit Ctrl+C and paste it into your question formatted as <i>Sample Code</i>."},{"owner":{"account_id":23989903,"reputation":31,"user_id":17976211,"display_name":"Jatin Bhola"},"score":0,"creation_date":1689925036,"post_id":76735608,"comment_id":135284818,"body_markdown":"@howlger error is clear to you now ?","body":"@howlger error is clear to you now ?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1690016720,"post_id":76735608,"comment_id":135296388,"body_markdown":"Please follow my description exactly. I asked you for the full(!) error formatted as _Sample Code_(!). Eclipse 2020-12 is 10 releases behind. This might be the cause. Please always make sure your software is up to date before asking.","body":"Please follow my description exactly. I asked you for the full(!) error formatted as _Sample Code_(!). Eclipse 2020-12 is 10 releases behind. This might be the cause. Please always make sure your software is up to date before asking."}],"owner":{"account_id":23989903,"reputation":31,"user_id":17976211,"display_name":"Jatin Bhola"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689925297,"creation_date":1689921114,"question_id":76735608,"body_markdown":"I am getting an error while opening the dynamic web project the dialogue box saying problem opening wizard and the selection wizard could not be started. \r\nCan anyone please help me in this issue. \r\nThanks.. \r\nError details - \r\n\r\n`The selection wizard vould not be started. Plug-in &quot;org.eclipse.jst.servlet.ui&quot; was unable to Instantiate class &quot;org.eclipse.jst.servlet.ui.project.facet.webProjectWizard&quot;. Java.lang.reflect.InvocationTargetException`\r\nI am using eclipse 2020-12 version and tomcat 9.0 version\r\n","title":"Problem opening wizard in eclipse while opening the dynamic web project","body":"<p>I am getting an error while opening the dynamic web project the dialogue box saying problem opening wizard and the selection wizard could not be started.\nCan anyone please help me in this issue.\nThanks..\nError details -</p>\n<p><code>The selection wizard vould not be started. Plug-in &quot;org.eclipse.jst.servlet.ui&quot; was unable to Instantiate class &quot;org.eclipse.jst.servlet.ui.project.facet.webProjectWizard&quot;. Java.lang.reflect.InvocationTargetException</code>\nI am using eclipse 2020-12 version and tomcat 9.0 version</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1044371,"reputation":10970,"user_id":1049678,"display_name":"Aviram Segal"},"score":0,"creation_date":1357163808,"post_id":14129791,"comment_id":19562159,"body_markdown":"Why you must have the same string ?","body":"Why you must have the same string ?"},{"owner":{"account_id":91502,"reputation":88301,"user_id":251173,"accept_rate":86,"display_name":"Buhake Sindi"},"score":0,"creation_date":1357163996,"post_id":14129791,"comment_id":19562235,"body_markdown":"Try perhaps using Apache [`HashCodeBuilder`](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html)?","body":"Try perhaps using Apache <a href=\"http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/builder/HashCodeBuilder.html\" rel=\"nofollow noreferrer\"><code>HashCodeBuilder</code></a>?"}],"answers":[{"tags":[],"owner":{"account_id":1101161,"reputation":119804,"user_id":1093528,"accept_rate":65,"display_name":"fge"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1357167127,"creation_date":1357164018,"answer_id":14129905,"question_id":14129791,"body_markdown":"You want to have a look at [Jackson][1]: read your input as a `JsonNode`, which implements `.equals()` and `.hashCode()` correctly (that is, sticking to the contract established by `java.lang.Object`), for _all_ JSON values (numbers, booleans, strings, objects recursively, arrays recursively, nulls).\r\n\r\n\r\n  [1]: http://jackson.codehaus.org/","title":"hashing a Java JSONObject","body":"<p>You want to have a look at <a href=\"http://jackson.codehaus.org/\" rel=\"noreferrer\">Jackson</a>: read your input as a <code>JsonNode</code>, which implements <code>.equals()</code> and <code>.hashCode()</code> correctly (that is, sticking to the contract established by <code>java.lang.Object</code>), for <em>all</em> JSON values (numbers, booleans, strings, objects recursively, arrays recursively, nulls).</p>\n"},{"tags":[],"owner":{"account_id":109862,"reputation":2187,"user_id":290918,"accept_rate":67,"display_name":"kldavis4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1357164027,"creation_date":1357164027,"answer_id":14129908,"question_id":14129791,"body_markdown":"I suggest calling the hashCode method on the JSONObject as it will not depend on the ordering of the elements or the string representation.","title":"hashing a Java JSONObject","body":"<p>I suggest calling the hashCode method on the JSONObject as it will not depend on the ordering of the elements or the string representation.</p>\n"},{"tags":[],"owner":{"account_id":1266527,"reputation":2643,"user_id":1223719,"accept_rate":95,"display_name":"aglassman"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1357164642,"creation_date":1357164642,"answer_id":14130025,"question_id":14129791,"body_markdown":"You can just do `.toString().hashCode()`\r\n\r\nEven though JSON is unordered, I&#39;m thinking the strings would be generated the same way each time.  Even on the off chance they were not generated the same, You would just have two objects in your cache, which probably wouldn&#39;t be the end of the world.","title":"hashing a Java JSONObject","body":"<p>You can just do <code>.toString().hashCode()</code></p>\n\n<p>Even though JSON is unordered, I'm thinking the strings would be generated the same way each time.  Even on the off chance they were not generated the same, You would just have two objects in your cache, which probably wouldn't be the end of the world.</p>\n"},{"tags":[],"owner":{"account_id":3273639,"reputation":149,"user_id":2756335,"display_name":"user2756335"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689925260,"creation_date":1590475768,"answer_id":62016201,"question_id":14129791,"body_markdown":"I agree with @fge&#39;s solution. This is working for me across multiple variations of a JSON structure - \r\n   \r\n        int hash = 0;\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        JsonFactory factory = mapper.getFactory();\r\n        try {\r\n            JsonNode jsonNode = mapper.readTree(factory.createParser(jsonString));\r\n            hash = jsonNode.hashCode();\r\n        } catch (IOException e) {\r\n            LOG.error(&quot;Error generating hash for jsonString: {}&quot;, jsonString);\r\n            e.printStackTrace();\r\n        }\r\n    \r\n    \r\n    Example permutations - \r\n     &quot;{ k1: v1, k2:v2, k3: v3}&quot;\r\n     &quot;{ k3: v3, k2:v2, k1: v1}&quot;\r\n     &quot;{ k3: v3, k1:v1, k2: v2}&quot;\r\n    \r\nAll 3 produced same hashcode everytime. In practice however my json also had ArrayList and Map within itself and that worked perfectly well too.\r\n\r\n","title":"hashing a Java JSONObject","body":"<p>I agree with @fge's solution. This is working for me across multiple variations of a JSON structure -</p>\n<pre><code>    int hash = 0;\n    ObjectMapper mapper = new ObjectMapper();\n    JsonFactory factory = mapper.getFactory();\n    try {\n        JsonNode jsonNode = mapper.readTree(factory.createParser(jsonString));\n        hash = jsonNode.hashCode();\n    } catch (IOException e) {\n        LOG.error(&quot;Error generating hash for jsonString: {}&quot;, jsonString);\n        e.printStackTrace();\n    }\n\n\nExample permutations - \n &quot;{ k1: v1, k2:v2, k3: v3}&quot;\n &quot;{ k3: v3, k2:v2, k1: v1}&quot;\n &quot;{ k3: v3, k1:v1, k2: v2}&quot;\n</code></pre>\n<p>All 3 produced same hashcode everytime. In practice however my json also had ArrayList and Map within itself and that worked perfectly well too.</p>\n"}],"owner":{"account_id":429040,"reputation":173,"user_id":811725,"display_name":"oli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13096,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":14129905,"answer_count":4,"score":2,"last_activity_date":1689925260,"creation_date":1357163572,"question_id":14129791,"body_markdown":"I&#39;m currently writing a jsonrpc-client in java. A request is represented by an [JSONObject][1] like this:\r\n\r\n    {&#39;method&#39;: &#39;do.stuff&#39;, &#39;params&#39;: [&#39;asdf&#39;, 3, {&#39;foo&#39;: &#39;bar&#39;}]}\r\n\r\nNow I want to implement a low-level request cache and for this I need a way to create a hash from a JSONObject that will always return the same value. Using the toString() is not an option since JSONObjects are unordered: the following example would do exactly the same as my first example even though the string representation is different:\r\n\r\n    {&#39;params&#39;: [&#39;asdf&#39;, 3, {&#39;foo&#39;: &#39;bar&#39;}], &#39;method&#39;: &#39;do.stuff&#39;}\r\nWhats the best solution to this problem? The jsonobject may be nested to any arbitrary depth of course. I&#39;m fairly new to Java and thankful for any suggestion.\r\n\r\n  [1]: http://www.json.org/javadoc/org/json/JSONObject.html","title":"hashing a Java JSONObject","body":"<p>I'm currently writing a jsonrpc-client in java. A request is represented by an <a href=\"http://www.json.org/javadoc/org/json/JSONObject.html\" rel=\"nofollow\">JSONObject</a> like this:</p>\n\n<pre><code>{'method': 'do.stuff', 'params': ['asdf', 3, {'foo': 'bar'}]}\n</code></pre>\n\n<p>Now I want to implement a low-level request cache and for this I need a way to create a hash from a JSONObject that will always return the same value. Using the toString() is not an option since JSONObjects are unordered: the following example would do exactly the same as my first example even though the string representation is different:</p>\n\n<pre><code>{'params': ['asdf', 3, {'foo': 'bar'}], 'method': 'do.stuff'}\n</code></pre>\n\n<p>Whats the best solution to this problem? The jsonobject may be nested to any arbitrary depth of course. I'm fairly new to Java and thankful for any suggestion.</p>\n"},{"tags":["java","trivy"],"owner":{"account_id":4140698,"reputation":1600,"user_id":3396129,"accept_rate":71,"display_name":"LeoN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689924933,"creation_date":1689878490,"question_id":76732844,"body_markdown":"I have a Java application where I need to run a Trivy vulnerability scan. This application has dependencies which has shaded dependencies.\r\nHow can we make Trivy scan for the shaded dependencies?","title":"Trivy scan for shaded dependencies","body":"<p>I have a Java application where I need to run a Trivy vulnerability scan. This application has dependencies which has shaded dependencies.\nHow can we make Trivy scan for the shaded dependencies?</p>\n"},{"tags":["java","gson","proguard","obfuscation"],"comments":[{"owner":{"account_id":6243460,"reputation":97907,"user_id":4856258,"accept_rate":100,"display_name":"Tagir Valeev"},"score":0,"creation_date":1431081173,"post_id":30121642,"comment_id":48352905,"body_markdown":"Please show us the declaration of `selectedProfile` and `profiles` fields. Also if it&#39;s possible, please provide a non-obfuscated and obfuscated `.class` file. And which version of ProGuard are you using?","body":"Please show us the declaration of <code>selectedProfile</code> and <code>profiles</code> fields. Also if it&#39;s possible, please provide a non-obfuscated and obfuscated <code>.class</code> file. And which version of ProGuard are you using?"},{"owner":{"account_id":4454349,"reputation":85,"user_id":3625168,"accept_rate":60,"display_name":"user3625168"},"score":0,"creation_date":1431082816,"post_id":30121642,"comment_id":48353896,"body_markdown":"Added to bottom of post. \n\nWhole Class File (Un obfuscated) : http://pastebin.com/Jgh4x1SS\nProGuard version : 5.2.1\nDeclaration of Profiles field:\nprivate final Map&lt;String, Profile&gt; profiles = new HashMap&lt;String, Profile&gt;();","body":"Added to bottom of post.   Whole Class File (Un obfuscated) : <a href=\"http://pastebin.com/Jgh4x1SS\" rel=\"nofollow noreferrer\">pastebin.com/Jgh4x1SS</a> ProGuard version : 5.2.1 Declaration of Profiles field: private final Map&lt;String, Profile&gt; profiles = new HashMap&lt;String, Profile&gt;();"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1431083538,"post_id":30121642,"comment_id":48354344,"body_markdown":"Who writes in the `profiles` map? I suspect there is something in the Minecraft framework that uses reflection to decide what to populate your map with, and since the names have changed, it behaves differently with the obfuscated code.","body":"Who writes in the <code>profiles</code> map? I suspect there is something in the Minecraft framework that uses reflection to decide what to populate your map with, and since the names have changed, it behaves differently with the obfuscated code."},{"owner":{"account_id":1424271,"reputation":14854,"user_id":1348215,"accept_rate":78,"display_name":"Egor Neliuba"},"score":0,"creation_date":1431083569,"post_id":30121642,"comment_id":48354361,"body_markdown":"Show us the `RawProfileList` class.","body":"Show us the <code>RawProfileList</code> class."},{"owner":{"account_id":4454349,"reputation":85,"user_id":3625168,"accept_rate":60,"display_name":"user3625168"},"score":0,"creation_date":1431084030,"post_id":30121642,"comment_id":48354627,"body_markdown":"@biziclop if you look in this class (http://pastebin.com/Jgh4x1SS) the loadProfiles uses gson&#39;s fromJson method to set rawProfile&#39;s profiles to the values. RawProfileList class = http://pastebin.com/Jgh4x1SS","body":"@biziclop if you look in this class (<a href=\"http://pastebin.com/Jgh4x1SS\" rel=\"nofollow noreferrer\">pastebin.com/Jgh4x1SS</a>) the loadProfiles uses gson&#39;s fromJson method to set rawProfile&#39;s profiles to the values. RawProfileList class = <a href=\"http://pastebin.com/Jgh4x1SS\" rel=\"nofollow noreferrer\">pastebin.com/Jgh4x1SS</a>"},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1431084235,"post_id":30121642,"comment_id":48354765,"body_markdown":"That&#39;s where I would start looking then. If you&#39;re getting a class cast exception when getting a value from a map, always look at the put, that&#39;s where the problems are likely to be.","body":"That&#39;s where I would start looking then. If you&#39;re getting a class cast exception when getting a value from a map, always look at the put, that&#39;s where the problems are likely to be."},{"owner":{"account_id":1424271,"reputation":14854,"user_id":1348215,"accept_rate":78,"display_name":"Egor Neliuba"},"score":1,"creation_date":1431084319,"post_id":30121642,"comment_id":48354821,"body_markdown":"Does your `proguard.cfg` contain [these rules](https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg)?","body":"Does your <code>proguard.cfg</code> contain <a href=\"https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\" rel=\"nofollow noreferrer\">these rules</a>?"},{"owner":{"account_id":4454349,"reputation":85,"user_id":3625168,"accept_rate":60,"display_name":"user3625168"},"score":0,"creation_date":1431088719,"post_id":30121642,"comment_id":48357646,"body_markdown":"@EgorN Not all of it, only some. This is my proguard config file: http://pastebin.com/68gec9uG","body":"@EgorN Not all of it, only some. This is my proguard config file: <a href=\"http://pastebin.com/68gec9uG\" rel=\"nofollow noreferrer\">pastebin.com/68gec9uG</a>"},{"owner":{"account_id":4454349,"reputation":85,"user_id":3625168,"accept_rate":60,"display_name":"user3625168"},"score":0,"creation_date":1431152351,"post_id":30121642,"comment_id":48382907,"body_markdown":"@EgorN It worked!!!  don&#39;t know how, but it did. I&#39;m curious to know how it worked.","body":"@EgorN It worked!!!  don&#39;t know how, but it did. I&#39;m curious to know how it worked."}],"answers":[{"tags":[],"owner":{"account_id":1424271,"reputation":14854,"user_id":1348215,"accept_rate":78,"display_name":"Egor Neliuba"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1431162821,"creation_date":1431162821,"answer_id":30138142,"question_id":30121642,"body_markdown":"Your classes look fine. `ClassCastException` means that `Gson` didn&#39;t know that a field should have been serialized as `Profile`.\r\n\r\nMake sure your `proguard.cfg` contains all of [these rules](https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg).","title":"ProGuard: ClassCastException","body":"<p>Your classes look fine. <code>ClassCastException</code> means that <code>Gson</code> didn't know that a field should have been serialized as <code>Profile</code>.</p>\n\n<p>Make sure your <code>proguard.cfg</code> contains all of <a href=\"https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\" rel=\"noreferrer\">these rules</a>.</p>\n"},{"tags":[],"owner":{"account_id":3801000,"reputation":624,"user_id":3154666,"accept_rate":75,"display_name":"Introspective"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689924589,"creation_date":1689920350,"answer_id":76735547,"question_id":30121642,"body_markdown":"Adding to @EgorNeliuba&#39;s excellent answer, as [these rules][1] **alone** were insufficient in my situation:\r\n\r\n 1. `MyPrettyAmazingDataStruct` is fully serialized and instantiated from a corresponding JSON in **debug** mode.\r\n 2. `MyApp` is using `MyCoreLib`, hence 2 `build.gradle` files and 2 `proguard.cfg` files.\r\n\r\nMy ordeal started when my APK started crashing with: \r\n\r\n```\r\njava.lang.ClassCastException: e2.s cannot be cast to com.me.mycorelib.MyPrettyAmazingDataStruct\r\n```\r\nI checked `mapping.txt` and the only obfuscation to `e2.s` is:\r\n```\r\ncom.google.gson.internal.LinkedTreeMap -&gt; e2.s\r\n```\r\n\r\n**Note**: Getting Logcat to log messages from a Proguard-processed APK was an ordeal by itself because I did not know that the [-assumenosideeffects class android.util.Log][2] should be **commented out** in MyApp&#39;s proguard.cfg **as well**. It is not enough to do so in MyCoreLib&#39;s proguard.cfg **only**.\r\n\r\nSo, I naively added to **both** proguard.cfg files the following:\r\n```  \r\n-keep public class com.me.mycorelib.MyPrettyAmazingDataStruct\r\n-keepnames class  com.me.mycorelib.MyPrettyAmazingDataStruct\r\n-keepclassmembers class com.me.mycorelib.MyPrettyAmazingDataStruct\r\n```\r\nThat did not eliminate the exception.\r\n\r\nThen I found @EgorNeliuba&#39;s answer which added [these rules][1] (to **both files!**) and now MyApp is no longer crashing.\r\n\r\n\r\nLastly, it was helpful for me to finally understand the differences between:\r\n\r\n|Option|Class Name|Class Code|Member Name|Member Code|\r\n|------|----------|----------|-----------|-----------|\r\n|-keep|Preserved|Preserved|Preserved|Preserved|\r\n|-keepnames|Preserved|Optimized|Preserved|Optimized|\r\n|-keepclassmembers|Optimized|Optimized|Preserved|Preserved|\r\n\r\nPlease correct the above table if you spot any mistake.\r\n\r\n\r\n  [1]: https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\r\n  [2]: https://stackoverflow.com/a/22774371/3154666","title":"ProGuard: ClassCastException","body":"<p>Adding to @EgorNeliuba's excellent answer, as <a href=\"https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\" rel=\"nofollow noreferrer\">these rules</a> <strong>alone</strong> were insufficient in my situation:</p>\n<ol>\n<li><code>MyPrettyAmazingDataStruct</code> is fully serialized and instantiated from a corresponding JSON in <strong>debug</strong> mode.</li>\n<li><code>MyApp</code> is using <code>MyCoreLib</code>, hence 2 <code>build.gradle</code> files and 2 <code>proguard.cfg</code> files.</li>\n</ol>\n<p>My ordeal started when my APK started crashing with:</p>\n<pre><code>java.lang.ClassCastException: e2.s cannot be cast to com.me.mycorelib.MyPrettyAmazingDataStruct\n</code></pre>\n<p>I checked <code>mapping.txt</code> and the only obfuscation to <code>e2.s</code> is:</p>\n<pre><code>com.google.gson.internal.LinkedTreeMap -&gt; e2.s\n</code></pre>\n<p><strong>Note</strong>: Getting Logcat to log messages from a Proguard-processed APK was an ordeal by itself because I did not know that the <a href=\"https://stackoverflow.com/a/22774371/3154666\">-assumenosideeffects class android.util.Log</a> should be <strong>commented out</strong> in MyApp's proguard.cfg <strong>as well</strong>. It is not enough to do so in MyCoreLib's proguard.cfg <strong>only</strong>.</p>\n<p>So, I naively added to <strong>both</strong> proguard.cfg files the following:</p>\n<pre><code>-keep public class com.me.mycorelib.MyPrettyAmazingDataStruct\n-keepnames class  com.me.mycorelib.MyPrettyAmazingDataStruct\n-keepclassmembers class com.me.mycorelib.MyPrettyAmazingDataStruct\n</code></pre>\n<p>That did not eliminate the exception.</p>\n<p>Then I found @EgorNeliuba's answer which added <a href=\"https://github.com/google/gson/blob/master/examples/android-proguard-example/proguard.cfg\" rel=\"nofollow noreferrer\">these rules</a> (to <strong>both files!</strong>) and now MyApp is no longer crashing.</p>\n<p>Lastly, it was helpful for me to finally understand the differences between:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Option</th>\n<th>Class Name</th>\n<th>Class Code</th>\n<th>Member Name</th>\n<th>Member Code</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>-keep</td>\n<td>Preserved</td>\n<td>Preserved</td>\n<td>Preserved</td>\n<td>Preserved</td>\n</tr>\n<tr>\n<td>-keepnames</td>\n<td>Preserved</td>\n<td>Optimized</td>\n<td>Preserved</td>\n<td>Optimized</td>\n</tr>\n<tr>\n<td>-keepclassmembers</td>\n<td>Optimized</td>\n<td>Optimized</td>\n<td>Preserved</td>\n<td>Preserved</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Please correct the above table if you spot any mistake.</p>\n"}],"owner":{"account_id":4454349,"reputation":85,"user_id":3625168,"accept_rate":60,"display_name":"user3625168"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2974,"favorite_count":0,"down_vote_count":1,"up_vote_count":5,"accepted_answer_id":30138142,"answer_count":2,"score":4,"last_activity_date":1689924589,"creation_date":1431081123,"question_id":30121642,"body_markdown":"I&#39;m getting this annoying `ClassCastException` when I obfuscate my Java code (which works fine before I obfuscate using `ProGuard`).\r\n\r\n       java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to net.minecraft.launcher.profile.Profile\r\n        \tat java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to net.minecraft.launcher.profile.Profile\r\n\tat net.minecraft.launcher.profile.ProfileManager.getSelectedProfile(SourceFile:117)\r\n\tat net.minecraft.launcher.g.run(SourceFile:184)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\r\n\tat java.util.concurrent.FutureTask.run(Unknown Source)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n\r\n\r\nThat ClastCastException error points to this bit of code, here (the bolded line being the exact line):\r\n\r\n\tpublic Profile getSelectedProfile()\r\n\t{\r\n\t\tif ((this.selectedProfile == null) || (!this.profiles.containsKey(this.selectedProfile))) {\r\n\t\t\tif (this.profiles.get(&quot;Default&quot;) != null)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedProfile = &quot;Default&quot;;\r\n\t\t\t}\r\n\t\t\telse if (this.profiles.size() &gt; 0)\r\n\t\t\t{\r\n\t\t\t\tthis.selectedProfile = ((Profile)this.profiles.values().iterator().next()).getName();\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.selectedProfile = &quot;Default&quot;;\r\n\t\t\t\tthis.profiles.put(&quot;Default&quot;, new Profile(this.selectedProfile));\r\n\t\t\t}\r\n\t\t}\r\n\t\t*Profile profile = this.profiles.get(this.selectedProfile);*\r\n\t\treturn profile;\r\n\t}\r\n\r\nWhole Class File (Un obfuscated) : http://pastebin.com/Jgh4x1SS\r\n`RawProfileList` Class File (Un obfuscated) : http://pastebin.com/vPxFpYfC\r\n`ProGuard` version : 5.2.1\r\n\r\nDeclaration of Profiles field:\r\n\r\n    private final Map&lt;String, Profile&gt; profiles = new HashMap&lt;String, Profile&gt;();\r\n\r\n","title":"ProGuard: ClassCastException","body":"<p>I'm getting this annoying <code>ClassCastException</code> when I obfuscate my Java code (which works fine before I obfuscate using <code>ProGuard</code>).</p>\n\n<pre><code>   java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to net.minecraft.launcher.profile.Profile\n        at java.lang.ClassCastException: com.google.gson.internal.StringMap cannot be cast to net.minecraft.launcher.profile.Profile\nat net.minecraft.launcher.profile.ProfileManager.getSelectedProfile(SourceFile:117)\nat net.minecraft.launcher.g.run(SourceFile:184)\nat java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)\nat java.util.concurrent.FutureTask.run(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\nat java.lang.Thread.run(Unknown Source)\n</code></pre>\n\n<p>That ClastCastException error points to this bit of code, here (the bolded line being the exact line):</p>\n\n<pre><code>public Profile getSelectedProfile()\n{\n    if ((this.selectedProfile == null) || (!this.profiles.containsKey(this.selectedProfile))) {\n        if (this.profiles.get(\"Default\") != null)\n        {\n            this.selectedProfile = \"Default\";\n        }\n        else if (this.profiles.size() &gt; 0)\n        {\n            this.selectedProfile = ((Profile)this.profiles.values().iterator().next()).getName();\n        }\n        else\n        {\n            this.selectedProfile = \"Default\";\n            this.profiles.put(\"Default\", new Profile(this.selectedProfile));\n        }\n    }\n    *Profile profile = this.profiles.get(this.selectedProfile);*\n    return profile;\n}\n</code></pre>\n\n<p>Whole Class File (Un obfuscated) : <a href=\"http://pastebin.com/Jgh4x1SS\" rel=\"nofollow\">http://pastebin.com/Jgh4x1SS</a>\n<code>RawProfileList</code> Class File (Un obfuscated) : <a href=\"http://pastebin.com/vPxFpYfC\" rel=\"nofollow\">http://pastebin.com/vPxFpYfC</a>\n<code>ProGuard</code> version : 5.2.1</p>\n\n<p>Declaration of Profiles field:</p>\n\n<pre><code>private final Map&lt;String, Profile&gt; profiles = new HashMap&lt;String, Profile&gt;();\n</code></pre>\n"},{"tags":["java","android","background","imageview"],"comments":[{"owner":{"account_id":6023647,"reputation":1142,"user_id":4730040,"display_name":"Dmitriy Mitiai"},"score":0,"creation_date":1689930285,"post_id":76734413,"comment_id":135285744,"body_markdown":"What&#39;s the problem in your XML to set a full screen background image and download image there?","body":"What&#39;s the problem in your XML to set a full screen background image and download image there?"}],"answers":[{"tags":[],"owner":{"account_id":29054467,"reputation":36,"user_id":22256528,"display_name":"Muhammad Tariq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689924576,"creation_date":1689924576,"answer_id":76735974,"question_id":76734413,"body_markdown":"You need to download image from URL and that downloaded file use to set background of the activity. Make sure to replace &quot;https://www.example.com/image.jpg&quot; with the actual URL of the image you want to download. Also, replace R.layout.activity_your and R.id.your_activity_layout with the appropriate layout ID for your activity and the ID of the layout you want to set the background to, respectively.\r\n\r\n **Create a function to download the image**\r\n\r\n    suspend fun downloadImageFromUrl(context: Context, imageUrl: String): File? = withContext(Dispatchers.IO) {\r\n    var file: File? = null\r\n    try {\r\n        val url = URL(imageUrl)\r\n        val connection = url.openConnection() as HttpURLConnection\r\n        connection.doInput = true\r\n        connection.connect()\r\n        val input: InputStream = connection.inputStream\r\n\r\n        val outputDir = context.filesDir\r\n        file = File.createTempFile(&quot;image&quot;, &quot;.jpg&quot;, outputDir)\r\n        val outputStream = FileOutputStream(file)\r\n        val buffer = ByteArray(4 * 1024) // 4KB buffer\r\n\r\n        var bytesRead: Int\r\n        while (input.read(buffer).also { bytesRead = it } != -1) {\r\n            outputStream.write(buffer, 0, bytesRead)\r\n        }\r\n\r\n        outputStream.flush()\r\n        outputStream.close()\r\n        input.close()\r\n    } catch (e: Exception) {\r\n        e.printStackTrace()\r\n    }\r\n    file\r\n}\r\n\r\nIn your activity, use coroutines to download the image and set it as the background\r\n\r\n    class YourActivity : AppCompatActivity() {\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_your)\r\n\r\n        val imageUrl = &quot;https://www.example.com/image.jpg&quot; // Replace with your image URL\r\n\r\n        // Use a CoroutineScope to launch a coroutine\r\n        CoroutineScope(Dispatchers.IO).launch {\r\n            val downloadedFile = downloadImageFromUrl(applicationContext, imageUrl)\r\n            if (downloadedFile != null) {CoroutineScope(Dispatchers.Mian).launch {\r\n                onImageDownloaded(downloadedFile)}\r\n            }\r\n        }\r\n    }\r\n\r\n    private fun onImageDownloaded(imageFile: File) {\r\n        val layout = findViewById&lt;RelativeLayout&gt;(R.id.your_activity_layout)\r\n        val bitmap = BitmapFactory.decodeFile(imageFile.absolutePath)\r\n        val drawable = BitmapDrawable(resources, bitmap)\r\n        layout.background = drawable\r\n    }\r\n}\r\n\r\nUsing coroutines, the image will be downloaded asynchronously without blocking the main thread, which can lead to a smoother user experience.\r\n","title":"How can I set downloaded image as background in activity?","body":"<p>You need to download image from URL and that downloaded file use to set background of the activity. Make sure to replace &quot;https://www.example.com/image.jpg&quot; with the actual URL of the image you want to download. Also, replace R.layout.activity_your and R.id.your_activity_layout with the appropriate layout ID for your activity and the ID of the layout you want to set the background to, respectively.</p>\n<p><strong>Create a function to download the image</strong></p>\n<pre><code>suspend fun downloadImageFromUrl(context: Context, imageUrl: String): File? = withContext(Dispatchers.IO) {\nvar file: File? = null\ntry {\n    val url = URL(imageUrl)\n    val connection = url.openConnection() as HttpURLConnection\n    connection.doInput = true\n    connection.connect()\n    val input: InputStream = connection.inputStream\n\n    val outputDir = context.filesDir\n    file = File.createTempFile(&quot;image&quot;, &quot;.jpg&quot;, outputDir)\n    val outputStream = FileOutputStream(file)\n    val buffer = ByteArray(4 * 1024) // 4KB buffer\n\n    var bytesRead: Int\n    while (input.read(buffer).also { bytesRead = it } != -1) {\n        outputStream.write(buffer, 0, bytesRead)\n    }\n\n    outputStream.flush()\n    outputStream.close()\n    input.close()\n} catch (e: Exception) {\n    e.printStackTrace()\n}\nfile\n</code></pre>\n<p>}</p>\n<p>In your activity, use coroutines to download the image and set it as the background</p>\n<pre><code>class YourActivity : AppCompatActivity() {\n\noverride fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_your)\n\n    val imageUrl = &quot;https://www.example.com/image.jpg&quot; // Replace with your image URL\n\n    // Use a CoroutineScope to launch a coroutine\n    CoroutineScope(Dispatchers.IO).launch {\n        val downloadedFile = downloadImageFromUrl(applicationContext, imageUrl)\n        if (downloadedFile != null) {CoroutineScope(Dispatchers.Mian).launch {\n            onImageDownloaded(downloadedFile)}\n        }\n    }\n}\n\nprivate fun onImageDownloaded(imageFile: File) {\n    val layout = findViewById&lt;RelativeLayout&gt;(R.id.your_activity_layout)\n    val bitmap = BitmapFactory.decodeFile(imageFile.absolutePath)\n    val drawable = BitmapDrawable(resources, bitmap)\n    layout.background = drawable\n}\n</code></pre>\n<p>}</p>\n<p>Using coroutines, the image will be downloaded asynchronously without blocking the main thread, which can lead to a smoother user experience.</p>\n"}],"owner":{"account_id":10370467,"reputation":25,"user_id":9714339,"display_name":"Алекс"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689924576,"creation_date":1689899011,"question_id":76734413,"body_markdown":"I get image from backend into variable ImageView and wish to set this image (which not in resourse files) as background in activity. I surf in internet, but found only variant with resource (drawable). But I have dinamic image.\r\n\r\nJava:\r\n\r\n```\r\npublic class CoreTest extends AppCompatActivity {\r\n...\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.core_test);\r\n...\r\n        Imageview imageView;\r\n        Picasso.get().load(GET_IMAGE_URL + testCountry.imageName).into(imageView);\r\n```\r\n\r\nXML\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:id=&quot;@+id/core_test&quot;\r\n    tools:context=&quot;.CoreTest&quot;&gt;\r\n...\r\n\r\n```\r\n\r\n","title":"How can I set downloaded image as background in activity?","body":"<p>I get image from backend into variable ImageView and wish to set this image (which not in resourse files) as background in activity. I surf in internet, but found only variant with resource (drawable). But I have dinamic image.</p>\n<p>Java:</p>\n<pre><code>public class CoreTest extends AppCompatActivity {\n...\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.core_test);\n...\n        Imageview imageView;\n        Picasso.get().load(GET_IMAGE_URL + testCountry.imageName).into(imageView);\n</code></pre>\n<p>XML</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:id=&quot;@+id/core_test&quot;\n    tools:context=&quot;.CoreTest&quot;&gt;\n...\n\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":299251,"reputation":335905,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1334391926,"creation_date":1334391926,"answer_id":10152159,"question_id":10151111,"body_markdown":"I think you are approaching the problem from the wrong side. Instead of having &quot;*local*&quot; session-scoped caches storing only one value have one global cache storing a map from user name to `User` values.\r\n\r\nIn your case drop `@Cacheable` on `getUserName()` and put it on `UserDao`:\r\n\r\n    public class UserDao {\r\n      @Cacheable(&quot;users&quot;)\r\n      public User getUserByLogin(String user) {\r\n        //...\r\n      }\r\n    }\r\n\r\nNot only this is more idiomatic usage of cache, but also it will prove to be easier to maintain and better performing.\r\n\r\nBack to your original question: no, this is not possible out-of-the-box. You would have to write your own [`CacheManager`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/cache/CacheManager.html) - probably a [tag:decorator] around existing implementation.","title":"Can Spring&#39;s @Cacheable annotation have the same scope as the annotated method&#39;s bean?","body":"<p>I think you are approaching the problem from the wrong side. Instead of having \"<em>local</em>\" session-scoped caches storing only one value have one global cache storing a map from user name to <code>User</code> values.</p>\n\n<p>In your case drop <code>@Cacheable</code> on <code>getUserName()</code> and put it on <code>UserDao</code>:</p>\n\n<pre><code>public class UserDao {\n  @Cacheable(\"users\")\n  public User getUserByLogin(String user) {\n    //...\n  }\n}\n</code></pre>\n\n<p>Not only this is more idiomatic usage of cache, but also it will prove to be easier to maintain and better performing.</p>\n\n<p>Back to your original question: no, this is not possible out-of-the-box. You would have to write your own <a href=\"http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/cache/CacheManager.html\" rel=\"nofollow\"><code>CacheManager</code></a> - probably a <a href=\"/questions/tagged/decorator\" class=\"post-tag\" title=\"show questions tagged 'decorator'\" rel=\"tag\">decorator</a> around existing implementation.</p>\n"},{"tags":[],"owner":{"account_id":45917,"reputation":20079,"user_id":167365,"accept_rate":78,"display_name":"sinuhepop"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1334405940,"creation_date":1334405940,"answer_id":10153553,"question_id":10151111,"body_markdown":"I haven&#39;t tried it, but according to [Spring reference][1] I think this would work:\r\n\r\n    @Cacheable(value = &quot;userName&quot;, key = &quot;#root.target&quot;)\r\n\r\n\r\n  [1]: http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-spel-context","title":"Can Spring&#39;s @Cacheable annotation have the same scope as the annotated method&#39;s bean?","body":"<p>I haven't tried it, but according to <a href=\"http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html#cache-spel-context\" rel=\"nofollow\">Spring reference</a> I think this would work:</p>\n\n<pre><code>@Cacheable(value = \"userName\", key = \"#root.target\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1334437916,"creation_date":1334437916,"answer_id":10157408,"question_id":10151111,"body_markdown":"If you want a session cache, use the session. That is, store the user in a private field in the session-scoped bean, or access the `HttpSession` object directly. `@Cacheable` is generally meant for application-wide resources. \r\n\r\nWell, you can use `key=&quot;#user.id&quot;`, and to invalidate the cache (manually or with `@CacheEvict`) on a `@PreDestroy` method, but it would be better if you don&#39;t mix the two - caching and session data.","title":"Can Spring&#39;s @Cacheable annotation have the same scope as the annotated method&#39;s bean?","body":"<p>If you want a session cache, use the session. That is, store the user in a private field in the session-scoped bean, or access the <code>HttpSession</code> object directly. <code>@Cacheable</code> is generally meant for application-wide resources. </p>\n\n<p>Well, you can use <code>key=\"#user.id\"</code>, and to invalidate the cache (manually or with <code>@CacheEvict</code>) on a <code>@PreDestroy</code> method, but it would be better if you don't mix the two - caching and session data.</p>\n"},{"tags":[],"owner":{"account_id":140044,"reputation":2757,"user_id":346057,"accept_rate":33,"display_name":"razor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689924496,"creation_date":1689867001,"answer_id":76731460,"question_id":10151111,"body_markdown":"You can create CacheManager bean with Session (or Request if you want only for a request) scope.\r\nIt works perfectly fine.\r\n```\r\n  @Bean\r\n  @SessionScope\r\n  public CacheManager requestCacheManager() {\r\n    return new ConcurrentMapCacheManager();\r\n  }\r\n```\r\n\r\nConsider limiting/setting bounds for you cache (as some ppl mentioned about memory &#39;leaks&#39;)\r\nSo you can try using CaffeineCacheManager, where you can set maximum size, expire ttl etc.","title":"Can Spring&#39;s @Cacheable annotation have the same scope as the annotated method&#39;s bean?","body":"<p>You can create CacheManager bean with Session (or Request if you want only for a request) scope.\nIt works perfectly fine.</p>\n<pre><code>  @Bean\n  @SessionScope\n  public CacheManager requestCacheManager() {\n    return new ConcurrentMapCacheManager();\n  }\n</code></pre>\n<p>Consider limiting/setting bounds for you cache (as some ppl mentioned about memory 'leaks')\nSo you can try using CaffeineCacheManager, where you can set maximum size, expire ttl etc.</p>\n"}],"owner":{"account_id":358740,"reputation":5921,"user_id":699700,"accept_rate":69,"display_name":"Max Nanasy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12393,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":10153553,"answer_count":4,"score":7,"last_activity_date":1689924496,"creation_date":1334379027,"question_id":10151111,"body_markdown":"Is there an easy way to use Spring&#39;s `@Cacheable` annotation with a non-singleton (e.g. session-scoped) bean and have the cache have the same scope as said bean?\r\n\r\nExample:\r\n\r\n\timport javax.inject.Inject;\r\n\timport javax.inject.Named;\r\n\t\r\n\timport org.springframework.cache.annotation.Cacheable;\r\n\timport org.springframework.context.annotation.Scope;\r\n\timport org.springframework.security.core.context.SecurityContextHolder;\r\n\t\r\n\t@Named\r\n\t@Scope(&quot;session&quot;)\r\n\tpublic class UserNameRetriever {\r\n\t\t\r\n\t\t@Inject private UserDao userDao;\r\n\t\t\r\n\t\t@Cacheable(&quot;userName&quot;)\r\n\t\tpublic String getUserName() {\r\n\t\t\treturn userDao.getUserByLogin((String)SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getName();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nIdeally, `UserNameRetriever.getUserName()` would fetch the username from the `UserDao` once per session, but this code actually caches application-wide.","title":"Can Spring&#39;s @Cacheable annotation have the same scope as the annotated method&#39;s bean?","body":"<p>Is there an easy way to use Spring's <code>@Cacheable</code> annotation with a non-singleton (e.g. session-scoped) bean and have the cache have the same scope as said bean?</p>\n\n<p>Example:</p>\n\n<pre><code>import javax.inject.Inject;\nimport javax.inject.Named;\n\nimport org.springframework.cache.annotation.Cacheable;\nimport org.springframework.context.annotation.Scope;\nimport org.springframework.security.core.context.SecurityContextHolder;\n\n@Named\n@Scope(\"session\")\npublic class UserNameRetriever {\n\n    @Inject private UserDao userDao;\n\n    @Cacheable(\"userName\")\n    public String getUserName() {\n        return userDao.getUserByLogin((String)SecurityContextHolder.getContext().getAuthentication().getPrincipal()).getName();\n    }\n\n}\n</code></pre>\n\n<p>Ideally, <code>UserNameRetriever.getUserName()</code> would fetch the username from the <code>UserDao</code> once per session, but this code actually caches application-wide.</p>\n"},{"tags":["java","android","kotlin","gradle","android-instrumentation"],"owner":{"account_id":9751136,"reputation":418,"user_id":7229349,"display_name":"IamVariable"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":81,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689924294,"creation_date":1689920693,"question_id":76735578,"body_markdown":"Am working on an SDK and its test failed with the following error. But still I can able to build assemble and the aar is working flawlessly. But when i run the test am getting the following error.. \r\n\r\n```java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/lifecycle/runtime/R$id;\r\nat androidx.lifecycle.ViewTreeLifecycleOwner.set(ViewTreeLifecycleOwner.java:49)\r\nat androidx.activity.ComponentActivity.initViewTreeOwners(ComponentActivity.java:431)\r\nat androidx.activity.ComponentActivity.setContentView(ComponentActivity.java:402)\r\nat com.demo.app.application.MainActivityFragment.onCreate(MainActivityFragment.java:20)\r\nat android.app.Activity.performCreate(Activity.java:7802)\r\nat android.app.Activity.performCreate(Activity.java:7791)\r\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1299)\r\nat androidx.test.runner.MonitoringInstrumentation.callActivityOnCreate(MonitoringInstrumentation.java:730)\r\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3245)\r\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3409)\r\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\r\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\r\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\r\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2016)\r\nat android.os.Handler.dispatchMessage(Handler.java:107)\r\nat android.os.Looper.loop(Looper.java:214)\r\nat android.app.ActivityThread.main(ActivityThread.java:7356)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\r\nCaused by: java.lang.ClassNotFoundException: Didn&#39;t find class &quot;androidx.lifecycle.runtime.R$id&quot; on path: DexPathList[[zip file &quot;/data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/lib/x86, /system/fake-libs, /data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/base.apk!/lib/x86, /system/lib, /system/product/lib]]\r\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:196)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\r\nat java.lang.ClassLoader.loadClass(ClassLoader.java:312)\r\n... 20 more```\r\n\r\n\r\n\r\nin addition, in my log i can see the error \r\n\r\n\r\n ``` java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/lifecycle/runtime/R$id;\r\n        at androidx.lifecycle.ViewTreeLifecycleOwner.set(ViewTreeLifecycleOwner.java:49)\r\nTests on Pixel_XL_API_30(AVD) - 11 failed: Instrumentation run failed due to &#39;Process crashed.&#39;```","title":"instrumentation test failed with java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/lifecycle/runtime/R$id; error","body":"<p>Am working on an SDK and its test failed with the following error. But still I can able to build assemble and the aar is working flawlessly. But when i run the test am getting the following error..</p>\n<pre><code>at androidx.lifecycle.ViewTreeLifecycleOwner.set(ViewTreeLifecycleOwner.java:49)\nat androidx.activity.ComponentActivity.initViewTreeOwners(ComponentActivity.java:431)\nat androidx.activity.ComponentActivity.setContentView(ComponentActivity.java:402)\nat com.demo.app.application.MainActivityFragment.onCreate(MainActivityFragment.java:20)\nat android.app.Activity.performCreate(Activity.java:7802)\nat android.app.Activity.performCreate(Activity.java:7791)\nat android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1299)\nat androidx.test.runner.MonitoringInstrumentation.callActivityOnCreate(MonitoringInstrumentation.java:730)\nat android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3245)\nat android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3409)\nat android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:83)\nat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:135)\nat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:95)\nat android.app.ActivityThread$H.handleMessage(ActivityThread.java:2016)\nat android.os.Handler.dispatchMessage(Handler.java:107)\nat android.os.Looper.loop(Looper.java:214)\nat android.app.ActivityThread.main(ActivityThread.java:7356)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:492)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:930)\nCaused by: java.lang.ClassNotFoundException: Didn't find class &quot;androidx.lifecycle.runtime.R$id&quot; on path: DexPathList[[zip file &quot;/data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/base.apk&quot;],nativeLibraryDirectories=[/data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/lib/x86, /system/fake-libs, /data/app/com.app.demo.test-j1kivHfi4LEQWZGW5bU8sw==/base.apk!/lib/x86, /system/lib, /system/product/lib]]\nat dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:196)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:379)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n... 20 more```\n\n\n\nin addition, in my log i can see the error \n\n\n ``` java.lang.NoClassDefFoundError: Failed resolution of: Landroidx/lifecycle/runtime/R$id;\n        at androidx.lifecycle.ViewTreeLifecycleOwner.set(ViewTreeLifecycleOwner.java:49)\nTests on Pixel_XL_API_30(AVD) - 11 failed: Instrumentation run failed due to 'Process crashed.'```\n</code></pre>\n"},{"tags":["java","spring-boot","jade4j"],"owner":{"account_id":23071180,"reputation":1,"user_id":17184859,"display_name":"Mikhail"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689924055,"creation_date":1689692522,"question_id":76714149,"body_markdown":"I try to load style from my resources folder (/resources/static/styles.css) but embedded tomcat answers 404.\r\n\r\n```\r\n@Configuration\r\n@EnableWebMvc\r\npublic class PugTemplateConfiguration {\r\n    @Bean\r\n    public SpringTemplateLoader templateLoader() {\r\n        SpringTemplateLoader templateLoader\r\n                = new SpringTemplateLoader();\r\n        templateLoader.setTemplateLoaderPath(&quot;classpath:/templates/&quot;);\r\n        templateLoader.setEncoding(&quot;UTF-8&quot;);\r\n        templateLoader.setSuffix(&quot;.pug&quot;);\r\n        return templateLoader;\r\n    }\r\n    @Bean\r\n    public PugConfiguration pugConfiguration() {\r\n        PugConfiguration configuration = new PugConfiguration();\r\n        configuration.setCaching(false);\r\n        configuration.setTemplateLoader(templateLoader());\r\n        return configuration;\r\n    }\r\n    @Bean\r\n    public ViewResolver viewResolver() {\r\n        PugViewResolver viewResolver = new PugViewResolver();\r\n        viewResolver.setConfiguration(pugConfiguration());\r\n        return viewResolver;\r\n    }\r\n}\r\n```\r\ntemplates/index.pug\r\n```\r\ndoctype html\r\nhtml\r\n  head\r\n    meta(charset=&quot;UTF-8&quot;)\r\n    link(rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/style.css&quot;)\r\n    title document title\r\n  body\r\n    p hello, world!\r\n```\r\nstyles located in resources/static/css/styles.css\r\nin target folder I can see it in /static/css/styles.css\r\n\r\nspring log:\r\n\r\n    DEBUG org.springframework.web.servlet.DispatcherServlet : GET &quot;/css/style.css&quot;, parameters={}\r\n    WARN  org.springframework.web.servlet.PageNotFound : No mapping for GET /css/style.css\r\n    DEBUG org.springframework.web.servlet.DispatcherServlet : Completed 404 NOT_FOUND\r\n\r\nI tried to move style.css to &#39;templates&#39; folder, but it did not help","title":"Can&#39;t load styles using pug4j template engine in spring boot","body":"<p>I try to load style from my resources folder (/resources/static/styles.css) but embedded tomcat answers 404.</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class PugTemplateConfiguration {\n    @Bean\n    public SpringTemplateLoader templateLoader() {\n        SpringTemplateLoader templateLoader\n                = new SpringTemplateLoader();\n        templateLoader.setTemplateLoaderPath(&quot;classpath:/templates/&quot;);\n        templateLoader.setEncoding(&quot;UTF-8&quot;);\n        templateLoader.setSuffix(&quot;.pug&quot;);\n        return templateLoader;\n    }\n    @Bean\n    public PugConfiguration pugConfiguration() {\n        PugConfiguration configuration = new PugConfiguration();\n        configuration.setCaching(false);\n        configuration.setTemplateLoader(templateLoader());\n        return configuration;\n    }\n    @Bean\n    public ViewResolver viewResolver() {\n        PugViewResolver viewResolver = new PugViewResolver();\n        viewResolver.setConfiguration(pugConfiguration());\n        return viewResolver;\n    }\n}\n</code></pre>\n<p>templates/index.pug</p>\n<pre><code>doctype html\nhtml\n  head\n    meta(charset=&quot;UTF-8&quot;)\n    link(rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;css/style.css&quot;)\n    title document title\n  body\n    p hello, world!\n</code></pre>\n<p>styles located in resources/static/css/styles.css\nin target folder I can see it in /static/css/styles.css</p>\n<p>spring log:</p>\n<pre><code>DEBUG org.springframework.web.servlet.DispatcherServlet : GET &quot;/css/style.css&quot;, parameters={}\nWARN  org.springframework.web.servlet.PageNotFound : No mapping for GET /css/style.css\nDEBUG org.springframework.web.servlet.DispatcherServlet : Completed 404 NOT_FOUND\n</code></pre>\n<p>I tried to move style.css to 'templates' folder, but it did not help</p>\n"},{"tags":["java","spring-boot","hibernate"],"owner":{"account_id":9137252,"reputation":2391,"user_id":6796524,"display_name":"Camille"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689923941,"creation_date":1689887767,"question_id":76733755,"body_markdown":"I try to define a Hibernate Entity that gets a list of calculated integers. \r\nThey are not stored in any table but calculated on the fly by database.\r\n\r\nIn my hibernate entity, I like to map this list to a List/Set.\r\n\r\n&gt; I try with `@Formula` like this\r\n```\r\n@Entity\r\npublic class MyClass {\r\n    ...\r\n    @Formula(value = &quot;database_fn_returning_id_list(col1, col2)&quot;)\r\n    private Set&lt;Integer&gt; idList = new HashSet&lt;&gt;();\r\n}\r\n```\r\nBut it doesn&#39;t compile\r\n`Could not determine type for java.util.Set, at table...`\r\n\r\n\r\n&gt; I also investigated with `@ElementCollection`\r\n\r\n```\r\n...\r\n@ElementCollection\r\n@CollectionTable( name = &quot;database_fn_returning_id_list(col1, col2)&quot;)\r\n...\r\n\r\n```\r\nI get runtime error `Schema-validation: missing table [database_fn_returning_id_list(col1, col2)]`.\r\nIt seems to accept only existing tables.\r\n\r\nDoes somebody have an idea?\r\n\r\n&gt; **UPDATE**\r\n\r\nAfter more research, it&#39;s seems than Hibernate don&#39;t map database array for following reason\r\n- Not all DBMS support arrays. Because of that, Hibernate doesn’t support native database array types.\r\n- Mappings as a @ElementCollection are not very efficient. Most developers prefer to model a many-to-many or one-to-many association.\r\n- Hibernate can’t offer lazy-loading for the elements of an array. That makes it a bad data type for any associations.\r\n- Possible to define custom `UserType` to support array of primitive types.\r\n\r\nSource : [here][1] (Thorben Janssen) and [here][2] (Baeldung)\r\n\r\n\r\n  [1]: https://thorben-janssen.com/mapping-arrays-with-hibernate/\r\n  [2]: https://www.baeldung.com/java-hibernate-map-postgresql-array\r\n\r\n\r\nYet I fallback to a not great but working solution. All integer are concatenated into a string with separator.\r\n\r\nWhen time and motivation will be available, I will dig into this `UserType`","title":"Hibernate + Map a list of Integer coming from a database function","body":"<p>I try to define a Hibernate Entity that gets a list of calculated integers.\nThey are not stored in any table but calculated on the fly by database.</p>\n<p>In my hibernate entity, I like to map this list to a List/Set.</p>\n<blockquote>\n<p>I try with <code>@Formula</code> like this</p>\n</blockquote>\n<pre><code>@Entity\npublic class MyClass {\n    ...\n    @Formula(value = &quot;database_fn_returning_id_list(col1, col2)&quot;)\n    private Set&lt;Integer&gt; idList = new HashSet&lt;&gt;();\n}\n</code></pre>\n<p>But it doesn't compile\n<code>Could not determine type for java.util.Set, at table...</code></p>\n<blockquote>\n<p>I also investigated with <code>@ElementCollection</code></p>\n</blockquote>\n<pre><code>...\n@ElementCollection\n@CollectionTable( name = &quot;database_fn_returning_id_list(col1, col2)&quot;)\n...\n\n</code></pre>\n<p>I get runtime error <code>Schema-validation: missing table [database_fn_returning_id_list(col1, col2)]</code>.\nIt seems to accept only existing tables.</p>\n<p>Does somebody have an idea?</p>\n<blockquote>\n<p><strong>UPDATE</strong></p>\n</blockquote>\n<p>After more research, it's seems than Hibernate don't map database array for following reason</p>\n<ul>\n<li>Not all DBMS support arrays. Because of that, Hibernate doesn’t support native database array types.</li>\n<li>Mappings as a @ElementCollection are not very efficient. Most developers prefer to model a many-to-many or one-to-many association.</li>\n<li>Hibernate can’t offer lazy-loading for the elements of an array. That makes it a bad data type for any associations.</li>\n<li>Possible to define custom <code>UserType</code> to support array of primitive types.</li>\n</ul>\n<p>Source : <a href=\"https://thorben-janssen.com/mapping-arrays-with-hibernate/\" rel=\"nofollow noreferrer\">here</a> (Thorben Janssen) and <a href=\"https://www.baeldung.com/java-hibernate-map-postgresql-array\" rel=\"nofollow noreferrer\">here</a> (Baeldung)</p>\n<p>Yet I fallback to a not great but working solution. All integer are concatenated into a string with separator.</p>\n<p>When time and motivation will be available, I will dig into this <code>UserType</code></p>\n"},{"tags":["java","rest","asynchronous","amazon-s3"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689923877,"post_id":76735884,"comment_id":135284610,"body_markdown":"You don&#39;t need a configuration change, you need to fix your code. The stream is *always* going to be closed when the `@PUT` method returns. You must have read the stream before that happens, no way around it.","body":"You don&#39;t need a configuration change, you need to fix your code. The stream is <i>always</i> going to be closed when the <code>@PUT</code> method returns. You must have read the stream before that happens, no way around it."}],"owner":{"account_id":29062026,"reputation":1,"user_id":22262451,"display_name":"Mayank Saini"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689923801,"creation_date":1689923763,"question_id":76735884,"body_markdown":"I am trying to upload a file to s3 asynchronously using my Java Api, but in async thread the i/o stream is getting closed the request is completed\r\n\r\nhere is my code\r\n\r\nController class \r\n\r\n```\r\n@PUT\r\n   // @Produces(MediaType.APPLICATION_JSON)\r\n    @Consumes(MediaType.MULTIPART_FORM_DATA)\r\n    public String uploadFile(@FormDataParam(&quot;file&quot;) InputStream uploadedInputStream , @FormDataParam(&quot;file&quot;) FormDataContentDisposition fileDetail ) throws IOException {\r\n        String key  = &quot;media/&quot; + fileDetail.getFileName();\r\n        String s3MediaUrl =   S3Helper.IMG_BUCKET_NAME + key;\r\n        fileUploadService.uploadFile(uploadedInputStream,fileDetail);\r\n\r\n        return s3MediaUrl;\r\n    }\r\n```\r\nFileUpliadSerivce Class\r\n\r\n```\r\npublic void uploadFile(InputStream uploadedInputStream, FormDataContentDisposition fileDetail) throws OustMeException, IOException {\r\n        \r\nThread newThread = new Thread(() -&gt; {\r\n      byte[] bytes;\r\n            try {\r\n                bytes = IOUtils.toByteArray(uploadedInputStream);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n\r\n            String fileName = fileDetail.getFileName();\r\n            String filePath = &quot;/tmp/&quot; + fileName;\r\n            File file = new File(filePath);\r\n            try (OutputStream out = Files.newOutputStream(file.toPath())) {\r\n                out.write(bytes);\r\n                out.flush();\r\n            } catch (IOException e) {\r\n                log.error(&quot;exception occurred while writing file to memory. Exception : {}&quot;, e.getMessage());\r\n                throw new RuntimeException(e);\r\n\r\n            }\r\n            String key = &quot;course/media/image/&quot; + fileName;\r\n            S3Helper.getInstance().upload(S3Helper.IMG_BUCKET_NAME, key, filePath);\r\n            file.delete();\r\n    \r\n});\r\n newThread.start();\r\n    }\r\n```\r\n\r\ngetting this exception on upload :\r\n\r\n```\r\nException in thread &quot;pool-3-thread-1&quot; org.jvnet.mimepull.MIMEParsingException: java.io.IOException: Stream Closed\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.WeakDataFile.read(WeakDataFile.java:112)\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataFile.read(DataFile.java:77)\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.FileData.read(FileData.java:69)\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataHead$ReadMultiStream.fetch(DataHead.java:265)\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataHead$ReadMultiStream.read(DataHead.java:219)\r\n2023-07-21 12:15:40     at java.io.InputStream.read(InputStream.java:101)\r\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2146)\r\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copy(IOUtils.java:2102)\r\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2123)\r\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copy(IOUtils.java:2078)\r\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:721)\r\n2023-07-21 12:15:40     at com.oustme.data.service.impl.FileUploadService.lambda$uploadFile$0(FileUploadService.java:32)\r\n2023-07-21 12:15:40     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n2023-07-21 12:15:40     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n2023-07-21 12:15:40     at java.lang.Thread.run(Thread.java:750)\r\n2023-07-21 12:15:40 Caused by: java.io.IOException: Stream Closed\r\n2023-07-21 12:15:40     at java.io.RandomAccessFile.readBytes(Native Method)\r\n2023-07-21 12:15:40     at java.io.RandomAccessFile.read(RandomAccessFile.java:377)\r\n2023-07-21 12:15:40     at java.io.RandomAccessFile.readFully(RandomAccessFile.java:436)\r\n2023-07-21 12:15:40     at org.jvnet.mimepull.WeakDataFile.read(WeakDataFile.java:110)\r\n2023-07-21 12:15:40     ... 14 more\r\n```\r\nis there any configuration changes needed to be done to keep the stream alive?\r\n","title":"org.jvnet.mimepull.MIMEParsingException: java.io.IOException: Stream Closed","body":"<p>I am trying to upload a file to s3 asynchronously using my Java Api, but in async thread the i/o stream is getting closed the request is completed</p>\n<p>here is my code</p>\n<p>Controller class</p>\n<pre><code>@PUT\n   // @Produces(MediaType.APPLICATION_JSON)\n    @Consumes(MediaType.MULTIPART_FORM_DATA)\n    public String uploadFile(@FormDataParam(&quot;file&quot;) InputStream uploadedInputStream , @FormDataParam(&quot;file&quot;) FormDataContentDisposition fileDetail ) throws IOException {\n        String key  = &quot;media/&quot; + fileDetail.getFileName();\n        String s3MediaUrl =   S3Helper.IMG_BUCKET_NAME + key;\n        fileUploadService.uploadFile(uploadedInputStream,fileDetail);\n\n        return s3MediaUrl;\n    }\n</code></pre>\n<p>FileUpliadSerivce Class</p>\n<pre><code>public void uploadFile(InputStream uploadedInputStream, FormDataContentDisposition fileDetail) throws OustMeException, IOException {\n        \nThread newThread = new Thread(() -&gt; {\n      byte[] bytes;\n            try {\n                bytes = IOUtils.toByteArray(uploadedInputStream);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n\n            String fileName = fileDetail.getFileName();\n            String filePath = &quot;/tmp/&quot; + fileName;\n            File file = new File(filePath);\n            try (OutputStream out = Files.newOutputStream(file.toPath())) {\n                out.write(bytes);\n                out.flush();\n            } catch (IOException e) {\n                log.error(&quot;exception occurred while writing file to memory. Exception : {}&quot;, e.getMessage());\n                throw new RuntimeException(e);\n\n            }\n            String key = &quot;course/media/image/&quot; + fileName;\n            S3Helper.getInstance().upload(S3Helper.IMG_BUCKET_NAME, key, filePath);\n            file.delete();\n    \n});\n newThread.start();\n    }\n</code></pre>\n<p>getting this exception on upload :</p>\n<pre><code>Exception in thread &quot;pool-3-thread-1&quot; org.jvnet.mimepull.MIMEParsingException: java.io.IOException: Stream Closed\n2023-07-21 12:15:40     at org.jvnet.mimepull.WeakDataFile.read(WeakDataFile.java:112)\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataFile.read(DataFile.java:77)\n2023-07-21 12:15:40     at org.jvnet.mimepull.FileData.read(FileData.java:69)\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataHead$ReadMultiStream.fetch(DataHead.java:265)\n2023-07-21 12:15:40     at org.jvnet.mimepull.DataHead$ReadMultiStream.read(DataHead.java:219)\n2023-07-21 12:15:40     at java.io.InputStream.read(InputStream.java:101)\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2146)\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copy(IOUtils.java:2102)\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2123)\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.copy(IOUtils.java:2078)\n2023-07-21 12:15:40     at org.apache.commons.io.IOUtils.toByteArray(IOUtils.java:721)\n2023-07-21 12:15:40     at com.oustme.data.service.impl.FileUploadService.lambda$uploadFile$0(FileUploadService.java:32)\n2023-07-21 12:15:40     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n2023-07-21 12:15:40     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n2023-07-21 12:15:40     at java.lang.Thread.run(Thread.java:750)\n2023-07-21 12:15:40 Caused by: java.io.IOException: Stream Closed\n2023-07-21 12:15:40     at java.io.RandomAccessFile.readBytes(Native Method)\n2023-07-21 12:15:40     at java.io.RandomAccessFile.read(RandomAccessFile.java:377)\n2023-07-21 12:15:40     at java.io.RandomAccessFile.readFully(RandomAccessFile.java:436)\n2023-07-21 12:15:40     at org.jvnet.mimepull.WeakDataFile.read(WeakDataFile.java:110)\n2023-07-21 12:15:40     ... 14 more\n</code></pre>\n<p>is there any configuration changes needed to be done to keep the stream alive?</p>\n"},{"tags":["java","arrays","data-structures"],"comments":[{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1689916489,"post_id":76735267,"comment_id":135283490,"body_markdown":"You are wrong.  The sorted array is [ 0 1 5 5 8 8 9 ].  The third smallest is 5, the third largest is 8.","body":"You are wrong.  The sorted array is [ 0 1 5 5 8 8 9 ].  The third smallest is 5, the third largest is 8."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":1,"creation_date":1689916879,"post_id":76735267,"comment_id":135283531,"body_markdown":"@TimRoberts: 8 is the third largest item/element, 5 is the third largest *value* - as Prabhjyot Singh isn&#39;t satisfied, *k smallest/largest element* may be worded misleadingly.","body":"@TimRoberts: 8 is the third largest item/element, 5 is the third largest <i>value</i> - as Prabhjyot Singh isn&#39;t satisfied, <i>k smallest/largest element</i> may be worded misleadingly."},{"owner":{"account_id":2119809,"reputation":50937,"user_id":1883316,"display_name":"Tim Roberts"},"score":0,"creation_date":1689918221,"post_id":76735267,"comment_id":135283707,"body_markdown":"Good spotting.  If you are supposed to remove duplicates, then [5 5] is correct.  If you are not supposed to remove duplicates, then [5 8] is correct.","body":"Good spotting.  If you are supposed to remove duplicates, then [5 5] is correct.  If you are not supposed to remove duplicates, then [5 8] is correct."},{"owner":{"account_id":4680926,"reputation":2259,"user_id":3789665,"accept_rate":57,"display_name":"greybeard"},"score":0,"creation_date":1689918262,"post_id":76735267,"comment_id":135283718,"body_markdown":"(See `println()`s, too.)","body":"(See <code>println()</code>s, too.)"},{"owner":{"account_id":306540,"reputation":1801,"user_id":2695990,"display_name":"fascynacja"},"score":0,"creation_date":1689920075,"post_id":76735267,"comment_id":135283962,"body_markdown":"1) if you would like to continue with the approach which you chosen: [sort the array,use the same array to find  the kth smallest value]: you iterate from the beginnig of array trying to find the kth unique value from the beginnig ( so you skip counting when the previous value is equal to the current).  2)Anyhow in this solution I would also recommend to use more efficient sort (the buildin java .sort() is perfectly fine).   3) You can solve this problem without sorting the array as well, but you would need 2 additional arrays of size k, if you want I can share also this solution.","body":"1) if you would like to continue with the approach which you chosen: [sort the array,use the same array to find  the kth smallest value]: you iterate from the beginnig of array trying to find the kth unique value from the beginnig ( so you skip counting when the previous value is equal to the current).  2)Anyhow in this solution I would also recommend to use more efficient sort (the buildin java .sort() is perfectly fine).   3) You can solve this problem without sorting the array as well, but you would need 2 additional arrays of size k, if you want I can share also this solution."},{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1689950540,"post_id":76735267,"comment_id":135289795,"body_markdown":"Hey! It seems that you are new to StackOverflow. You can find many answers to this question on SO. Please check those before asking a question yourself.","body":"Hey! It seems that you are new to StackOverflow. You can find many answers to this question on SO. Please check those before asking a question yourself."}],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323243,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689923454,"creation_date":1689923454,"answer_id":76735841,"question_id":76735267,"body_markdown":"You would at least have to make &#119896; a dynamic value, so that it not only works for 3 but for any any other valid &#119896;.\r\n\r\nOne way to approach this is using two priority queues: one for keeping the &#119896; smallest (unique) values so far, and one for keeping the &#119896; greatest (unique) values so far. Also use a HashSet to skip processing values that were already encountered before.\r\n\r\nAt the end of this process, the two values at the fronts of both queues are the values to return.\r\n\r\nHere is how that could look:\r\n\r\n```\r\n    static int[] SmallestLargestArrayUsingFunction(int[] arr, int k) {\r\n        Queue&lt;Integer&gt; minHeap = new PriorityQueue&lt;Integer&gt;();\r\n        Queue&lt;Integer&gt; maxHeap = new PriorityQueue&lt;&gt;(Comparator.reverseOrder());\r\n        Set&lt;Integer&gt; collected = new HashSet&lt;Integer&gt;();\r\n\r\n        for (var value : arr) {\r\n            if (collected.contains(value)) continue;\r\n            collected.add(value);\r\n            if (k &gt; 0) {\r\n                k--;\r\n                minHeap.add(value);\r\n                maxHeap.add(value);\r\n            } else {\r\n                if (value &lt; maxHeap.peek()) {\r\n                    maxHeap.poll(); // Make room for lesser value\r\n                    maxHeap.add(value);\r\n                }\r\n                if (value &gt; minHeap.peek()) {\r\n                    minHeap.poll(); // Make room for greater value\r\n                    minHeap.add(value);\r\n                }\r\n            }\r\n        }\r\n        int[] ans = {maxHeap.peek(), minHeap.peek()};\r\n        return ans;\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        int[] arr = { 5, 1, 8, 5, 9, 8, 0 };\r\n        int k = 3;\r\n        System.out.println(&quot;Orignal Array:&quot;);\r\n        printArray(arr);\r\n        System.out.println(&quot;Kth Smallest and Largest values using function are:&quot;);\r\n        int[] result = SmallestLargestArrayUsingFunction(arr, k);\r\n        System.out.println(result[0]+&quot; &quot;+result[1]); // 5 5 \r\n    }\r\n```\r\n","title":"Finding k Number of Largest and Smallest Elements in an Array (Java)","body":"<p>You would at least have to make 𝑘 a dynamic value, so that it not only works for 3 but for any any other valid 𝑘.</p>\n<p>One way to approach this is using two priority queues: one for keeping the 𝑘 smallest (unique) values so far, and one for keeping the 𝑘 greatest (unique) values so far. Also use a HashSet to skip processing values that were already encountered before.</p>\n<p>At the end of this process, the two values at the fronts of both queues are the values to return.</p>\n<p>Here is how that could look:</p>\n<pre><code>    static int[] SmallestLargestArrayUsingFunction(int[] arr, int k) {\n        Queue&lt;Integer&gt; minHeap = new PriorityQueue&lt;Integer&gt;();\n        Queue&lt;Integer&gt; maxHeap = new PriorityQueue&lt;&gt;(Comparator.reverseOrder());\n        Set&lt;Integer&gt; collected = new HashSet&lt;Integer&gt;();\n\n        for (var value : arr) {\n            if (collected.contains(value)) continue;\n            collected.add(value);\n            if (k &gt; 0) {\n                k--;\n                minHeap.add(value);\n                maxHeap.add(value);\n            } else {\n                if (value &lt; maxHeap.peek()) {\n                    maxHeap.poll(); // Make room for lesser value\n                    maxHeap.add(value);\n                }\n                if (value &gt; minHeap.peek()) {\n                    minHeap.poll(); // Make room for greater value\n                    minHeap.add(value);\n                }\n            }\n        }\n        int[] ans = {maxHeap.peek(), minHeap.peek()};\n        return ans;\n    }\n    \n    public static void main(String[] args) {\n        int[] arr = { 5, 1, 8, 5, 9, 8, 0 };\n        int k = 3;\n        System.out.println(&quot;Orignal Array:&quot;);\n        printArray(arr);\n        System.out.println(&quot;Kth Smallest and Largest values using function are:&quot;);\n        int[] result = SmallestLargestArrayUsingFunction(arr, k);\n        System.out.println(result[0]+&quot; &quot;+result[1]); // 5 5 \n    }\n</code></pre>\n"}],"owner":{"account_id":24749400,"reputation":1,"user_id":18635117,"display_name":"Prabhjyot Singh"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689923454,"creation_date":1689916252,"question_id":76735267,"body_markdown":"Hi Stack Overflow community,\r\n\r\nI&#39;m working on a programming task where I need to find the k number of largest and smallest elements in an array. I&#39;ve written a program in Java to solve this problem, but I&#39;m facing some issues.\r\n\r\nHere&#39;s my current approach:\r\n\r\n```\r\npackage Arrays;\r\nimport java.util.Arrays;\r\npublic class KthSmallestAndLargestArray {\r\n        static void printArray(int[] arr) {\r\n        for (int i = 0; i &lt; arr.length; i++) {\r\n            System.out.print(arr[i] + &quot; &quot;);\r\n        }\r\n        System.out.println();\r\n    }\r\n    static void KthSmallLargeArrayUsingLogic(int[] arr) {\r\n        int temp=0;\r\n        for (int i = 0; i &lt; arr.length - 1; i++) {\r\n            for (int j = 0; j &lt; arr.length - i - 1; j++) {\r\n                if (arr[j] &gt; arr[j + 1]) {\r\n                    temp = arr[j];\r\n                    arr[j] = arr[j + 1];\r\n                    arr[j + 1] = temp;\r\n                }\r\n            }\r\n        }\r\n        System.out.println(&quot;Sorted Array:&quot;);\r\n        printArray(arr);\r\n        System.out.println(&quot;Kth Smallest and Largest values using logic are:&quot;);\r\n        System.out.println(arr[2]+&quot; &quot;+arr[arr.length-3]);\r\n    }\r\n    static int[] SmallestLargestArrayUsingFunction(int[] arr){\r\n        Arrays.sort(arr);\r\n        int[] ans={arr[0],arr[arr.length-1]};\r\n        System.out.println(arr[2]+&quot; &quot;+arr[arr.length-3]);\r\n        return ans;\r\n    }\r\n    public static void main(String[] args) {\r\n        int[] arr = { 5, 1, 8, 5, 9, 8, 0 };\r\n        System.out.println(&quot;Orignal Array:&quot;);\r\n        printArray(arr);\r\n        KthSmallLargeArrayUsingLogic(arr);\r\n        System.out.println(&quot;Kth Smallest and Largest values using function are:&quot;);\r\n        SmallestLargestArrayUsingFunction(arr);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\nThe problem I&#39;m encountering is whenever I try finding 3rd largest and smallest in an array{ 5, 1, 8, 5, 9, 8, 0 } it is giving me output as {5,8} which is incorrect it should provide output as {5,5}, However I try solving this by removing duplicates from an array and it worked but I don&#39;t want to remove duplicates.\r\n\r\nWithout removing duplicates:\r\n[enter image description here](https://i.stack.imgur.com/EUW7I.png)\r\n\r\nAny help or advice would be greatly appreciated!","title":"Finding k Number of Largest and Smallest Elements in an Array (Java)","body":"<p>Hi Stack Overflow community,</p>\n<p>I'm working on a programming task where I need to find the k number of largest and smallest elements in an array. I've written a program in Java to solve this problem, but I'm facing some issues.</p>\n<p>Here's my current approach:</p>\n<pre><code>package Arrays;\nimport java.util.Arrays;\npublic class KthSmallestAndLargestArray {\n        static void printArray(int[] arr) {\n        for (int i = 0; i &lt; arr.length; i++) {\n            System.out.print(arr[i] + &quot; &quot;);\n        }\n        System.out.println();\n    }\n    static void KthSmallLargeArrayUsingLogic(int[] arr) {\n        int temp=0;\n        for (int i = 0; i &lt; arr.length - 1; i++) {\n            for (int j = 0; j &lt; arr.length - i - 1; j++) {\n                if (arr[j] &gt; arr[j + 1]) {\n                    temp = arr[j];\n                    arr[j] = arr[j + 1];\n                    arr[j + 1] = temp;\n                }\n            }\n        }\n        System.out.println(&quot;Sorted Array:&quot;);\n        printArray(arr);\n        System.out.println(&quot;Kth Smallest and Largest values using logic are:&quot;);\n        System.out.println(arr[2]+&quot; &quot;+arr[arr.length-3]);\n    }\n    static int[] SmallestLargestArrayUsingFunction(int[] arr){\n        Arrays.sort(arr);\n        int[] ans={arr[0],arr[arr.length-1]};\n        System.out.println(arr[2]+&quot; &quot;+arr[arr.length-3]);\n        return ans;\n    }\n    public static void main(String[] args) {\n        int[] arr = { 5, 1, 8, 5, 9, 8, 0 };\n        System.out.println(&quot;Orignal Array:&quot;);\n        printArray(arr);\n        KthSmallLargeArrayUsingLogic(arr);\n        System.out.println(&quot;Kth Smallest and Largest values using function are:&quot;);\n        SmallestLargestArrayUsingFunction(arr);\n    }\n}\n</code></pre>\n<p>The problem I'm encountering is whenever I try finding 3rd largest and smallest in an array{ 5, 1, 8, 5, 9, 8, 0 } it is giving me output as {5,8} which is incorrect it should provide output as {5,5}, However I try solving this by removing duplicates from an array and it worked but I don't want to remove duplicates.</p>\n<p>Without removing duplicates:\n<a href=\"https://i.stack.imgur.com/EUW7I.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Any help or advice would be greatly appreciated!</p>\n"},{"tags":["java","connection-pooling","jedis"],"comments":[{"owner":{"account_id":3206362,"reputation":7086,"user_id":2707363,"accept_rate":58,"display_name":"zenbeni"},"score":0,"creation_date":1390211320,"post_id":21230503,"comment_id":31978356,"body_markdown":"Can you add the whole code of JedisFactory? Especially the getInstance() impl and getJedisPool()?","body":"Can you add the whole code of JedisFactory? Especially the getInstance() impl and getJedisPool()?"},{"owner":{"account_id":92573,"reputation":13381,"user_id":253656,"accept_rate":80,"display_name":"ipkiss"},"score":0,"creation_date":1390211450,"post_id":21230503,"comment_id":31978468,"body_markdown":"I added the complete code of JedisFactory","body":"I added the complete code of JedisFactory"},{"owner":{"account_id":3206362,"reputation":7086,"user_id":2707363,"accept_rate":58,"display_name":"zenbeni"},"score":0,"creation_date":1390212494,"post_id":21230503,"comment_id":31979071,"body_markdown":"Do you use 2 or more threads? Could be a multithreading issue?","body":"Do you use 2 or more threads? Could be a multithreading issue?"},{"owner":{"account_id":92573,"reputation":13381,"user_id":253656,"accept_rate":80,"display_name":"ipkiss"},"score":0,"creation_date":1390214194,"post_id":21230503,"comment_id":31980063,"body_markdown":"My app is a servlet web and of course there are multi threads.","body":"My app is a servlet web and of course there are multi threads."},{"owner":{"account_id":3206362,"reputation":7086,"user_id":2707363,"accept_rate":58,"display_name":"zenbeni"},"score":1,"creation_date":1390215354,"post_id":21230503,"comment_id":31980761,"body_markdown":"Then you should protect your JedisFactory and JedisPool instance with either setting them as static final (with eager instanciation) or volatile  (with double check locking - deferred instanciation). If not, each thread can make a local copy of it (for performance), the object can be instanciated twice. So it is possible that you have many JedisPool instances at runtime that just spam your redis server that does not have enough connections.","body":"Then you should protect your JedisFactory and JedisPool instance with either setting them as static final (with eager instanciation) or volatile  (with double check locking - deferred instanciation). If not, each thread can make a local copy of it (for performance), the object can be instanciated twice. So it is possible that you have many JedisPool instances at runtime that just spam your redis server that does not have enough connections."},{"owner":{"account_id":78976,"reputation":1526,"user_id":224335,"accept_rate":40,"display_name":"Jannik Jochem"},"score":0,"creation_date":1415093086,"post_id":21230503,"comment_id":42050479,"body_markdown":"Also note that `Jedis.close()` will automatically call `JedisPool.returnBrokenResource()` or `JedisPool.returnResource()` for you if the `Jedis` was acquired from a `Pool`.","body":"Also note that <code>Jedis.close()</code> will automatically call <code>JedisPool.returnBrokenResource()</code> or <code>JedisPool.returnResource()</code> for you if the <code>Jedis</code> was acquired from a <code>Pool</code>."}],"answers":[{"tags":[],"owner":{"account_id":25902,"reputation":3385,"user_id":66992,"accept_rate":50,"display_name":"Alexandre L Telles"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1689923454,"creation_date":1390227848,"answer_id":21236427,"question_id":21230503,"body_markdown":"You haven&#39;t configured the **maxTotal** size of the pool, and the default value is only 8. You could change the JedisFactory constructor to:\r\n\r\n&lt;pre&gt;&lt;code&gt;\r\n    public JedisFactory() {\r\n        JedisPoolConfig poolConfig = new JedisPoolConfig();\r\n        &lt;b&gt;poolConfig.setMaxTotal(128);&lt;/b&gt;\r\n        jedisPool = new JedisPool(poolConfig, RedisDBConfig.HOST, RedisDBConfig.PORT, RedisDBConfig.TIMEOUT, RedisDBConfig.PASSWORD);\r\n    }\r\n&lt;/code&gt;&lt;/pre&gt;\r\n\r\nBeware also of the default value of the **WhenExhaustedAction** (WHEN_EXHAUSTED_BLOCK), as it may not be your desired behavior.\r\n\r\nJedis uses Apache Commons Pool, and you can read about its parameters here: [GenericObjectPool][1]\r\n\r\n\r\n  [1]: http://commons.apache.org/proper/commons-pool/api-1.6/org/apache/commons/pool/impl/GenericObjectPool.html","title":"How Jedis Pool works?","body":"<p>You haven't configured the <strong>maxTotal</strong> size of the pool, and the default value is only 8. You could change the JedisFactory constructor to:</p>\n<pre><code>\n    public JedisFactory() {\n        JedisPoolConfig poolConfig = new JedisPoolConfig();\n        <b>poolConfig.setMaxTotal(128);</b>\n        jedisPool = new JedisPool(poolConfig, RedisDBConfig.HOST, RedisDBConfig.PORT, RedisDBConfig.TIMEOUT, RedisDBConfig.PASSWORD);\n    }\n</code></pre>\n<p>Beware also of the default value of the <strong>WhenExhaustedAction</strong> (WHEN_EXHAUSTED_BLOCK), as it may not be your desired behavior.</p>\n<p>Jedis uses Apache Commons Pool, and you can read about its parameters here: <a href=\"http://commons.apache.org/proper/commons-pool/api-1.6/org/apache/commons/pool/impl/GenericObjectPool.html\" rel=\"nofollow noreferrer\">GenericObjectPool</a></p>\n"}],"owner":{"account_id":92573,"reputation":13381,"user_id":253656,"accept_rate":80,"display_name":"ipkiss"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61125,"favorite_count":0,"down_vote_count":1,"up_vote_count":38,"answer_count":1,"score":37,"last_activity_date":1689923454,"creation_date":1390210629,"question_id":21230503,"body_markdown":"I&#39;m using Jedis pool to manage connections to Redis server. An example code of mine as follows:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public Set&lt;String&gt; getTopArticleList(int start, int end) {\r\n        Set&lt;String&gt; list = null;\r\n        Jedis j = JedisFactory.getInstance().getJedisPool().getResource();\r\n        Pipeline pipe = j.pipelined();\r\n        try {\r\n            // do stuff with redis\r\n            pipe.sync();\r\n        } catch (JedisConnectionException jex) {\r\n            JedisFactory.getInstance().getJedisPool().returnBrokenResource(j);\r\n        } finally {\r\n            JedisFactory.getInstance().getJedisPool().returnResource(j);\r\n        }\r\n        return list;\r\n    }\r\n\r\nCode to create and retrieve the Jedis pool:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    class JedisFactory {\r\n        private static JedisPool jedisPool;\r\n        public JedisFactory() {\r\n            JedisPoolConfig poolConfig = new JedisPoolConfig();\r\n            jedisPool = new JedisPool(\r\n                poolConfig,\r\n                RedisDBConfig.HOST,\r\n                RedisDBConfig.PORT,\r\n                RedisDBConfig.TIMEOUT,\r\n                RedisDBConfig.PASSWORD\r\n            );\r\n        }\r\n    \r\n        public JedisPool getJedisPool() {\r\n            return jedisPool;\r\n        }\r\n    \r\n        public static JedisFactory getInstance() {\r\n            if (instance == null) {\r\n                instance = new JedisFactory();\r\n            }\r\n            return instance;\r\n        }\r\n     }            \r\n\r\nThe problem is that after reaching the number of limited connections, the web cannot be accessed anymore. Am I doing something wrong?","title":"How Jedis Pool works?","body":"<p>I'm using Jedis pool to manage connections to Redis server. An example code of mine as follows:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Set&lt;String&gt; getTopArticleList(int start, int end) {\n    Set&lt;String&gt; list = null;\n    Jedis j = JedisFactory.getInstance().getJedisPool().getResource();\n    Pipeline pipe = j.pipelined();\n    try {\n        // do stuff with redis\n        pipe.sync();\n    } catch (JedisConnectionException jex) {\n        JedisFactory.getInstance().getJedisPool().returnBrokenResource(j);\n    } finally {\n        JedisFactory.getInstance().getJedisPool().returnResource(j);\n    }\n    return list;\n}\n</code></pre>\n\n<p>Code to create and retrieve the Jedis pool:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class JedisFactory {\n    private static JedisPool jedisPool;\n    public JedisFactory() {\n        JedisPoolConfig poolConfig = new JedisPoolConfig();\n        jedisPool = new JedisPool(\n            poolConfig,\n            RedisDBConfig.HOST,\n            RedisDBConfig.PORT,\n            RedisDBConfig.TIMEOUT,\n            RedisDBConfig.PASSWORD\n        );\n    }\n\n    public JedisPool getJedisPool() {\n        return jedisPool;\n    }\n\n    public static JedisFactory getInstance() {\n        if (instance == null) {\n            instance = new JedisFactory();\n        }\n        return instance;\n    }\n }            \n</code></pre>\n\n<p>The problem is that after reaching the number of limited connections, the web cannot be accessed anymore. Am I doing something wrong?</p>\n"},{"tags":["java","mysql","string","password-encryption"],"comments":[{"owner":{"display_name":"user890904"},"score":0,"creation_date":1401139977,"post_id":23877580,"comment_id":36756807,"body_markdown":"I see you have accepted an answer. yet you need to pay attention to this line: String test = encryptionfinal.replace(encryption, &quot;&quot;); \n\nreplace changes the first occurrence of the string and you never know if the encoded bytes in the array result in a string that itself contains the &quot;encryption&quot; string.","body":"I see you have accepted an answer. yet you need to pay attention to this line: String test = encryptionfinal.replace(encryption, &quot;&quot;);   replace changes the first occurrence of the string and you never know if the encoded bytes in the array result in a string that itself contains the &quot;encryption&quot; string."},{"owner":{"display_name":"user890904"},"score":0,"creation_date":1401140427,"post_id":23877580,"comment_id":36756990,"body_markdown":"also is your program portable too? or does it run on your own server? if you are going to store the key and encryption string in your code then it can be relatively easy find out.","body":"also is your program portable too? or does it run on your own server? if you are going to store the key and encryption string in your code then it can be relatively easy find out."},{"owner":{"display_name":"user3677640"},"score":0,"creation_date":1401174650,"post_id":23877580,"comment_id":36766449,"body_markdown":"It is portable how would I go about fixing the security issue and thanks A.J","body":"It is portable how would I go about fixing the security issue and thanks A.J"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689923315,"post_id":23877580,"comment_id":135284494,"body_markdown":"1. `String` is not a container for binary data. 2. MySQL already has facilities for encryption and indeed for passwords. 3. Don&#39;t encrypt passwords: see the tag info for [tag:password-encryption] for why not. 4. Don&#39;t re-invent the wheel.","body":"1. <code>String</code> is not a container for binary data. 2. MySQL already has facilities for encryption and indeed for passwords. 3. Don&#39;t encrypt passwords: see the tag info for <a href=\"https://stackoverflow.com/questions/tagged/password-encryption\">password-encryption</a> for why not. 4. Don&#39;t re-invent the wheel."}],"answers":[{"tags":[],"owner":{"account_id":3904817,"reputation":13839,"user_id":3231778,"accept_rate":100,"display_name":"Evandro Pomatti"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1401150611,"creation_date":1401139014,"answer_id":23877835,"question_id":23877580,"body_markdown":"When you persist real user passwords (which I assume is what you are doing) for authentication you only need to store the password hash, and you should add the salt **before** the encryption, not after. Bellow is an example with MD5 but there are other algorithms for hash generation avaible for Java.\r\n\r\n    String saltedPassword = password + salt;\r\n    MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n    md.update(saltedPassword .getBytes());\r\n    byte byteData[] = md.digest();\r\n\r\nA general good practice is to create a individual salt for each user. You never decrypt a hash, you only compare it again when the user inputs the password for validation.\r\n\r\nNow, if you are encrypting and storing a password that ***needs to be retrieved***, like a database password, or even for a real user why not, you dont need salt. A symmetric or asymmetric algorithm will be enough. I personally always use AES 256 when I need it, and it is supported by Java as well.\r\n\r\nTo store and retrieve it properly you will need to encoded the generated bytes returned by the algorith/Java API, and personally I always use **Base64** for it.\r\n\r\nThe [official Base64][1] came in Java 8, but it is avaible in ealier releases as well. You can use Apache implementation if you want too.\r\n\r\n    Base64.getEncoder().encodeToString(encryptedPasswordArray);\r\n\r\nI think this can lead you to solve your problem, but if you have any further questions please let us know.\r\n\r\n  [1]: http://blog.eyallupu.com/2013/11/base64-encoding-in-java-8.html","title":"Converting String To Byte - Java","body":"<p>When you persist real user passwords (which I assume is what you are doing) for authentication you only need to store the password hash, and you should add the salt <strong>before</strong> the encryption, not after. Bellow is an example with MD5 but there are other algorithms for hash generation avaible for Java.</p>\n\n<pre><code>String saltedPassword = password + salt;\nMessageDigest md = MessageDigest.getInstance(\"MD5\");\nmd.update(saltedPassword .getBytes());\nbyte byteData[] = md.digest();\n</code></pre>\n\n<p>A general good practice is to create a individual salt for each user. You never decrypt a hash, you only compare it again when the user inputs the password for validation.</p>\n\n<p>Now, if you are encrypting and storing a password that <strong><em>needs to be retrieved</em></strong>, like a database password, or even for a real user why not, you dont need salt. A symmetric or asymmetric algorithm will be enough. I personally always use AES 256 when I need it, and it is supported by Java as well.</p>\n\n<p>To store and retrieve it properly you will need to encoded the generated bytes returned by the algorith/Java API, and personally I always use <strong>Base64</strong> for it.</p>\n\n<p>The <a href=\"http://blog.eyallupu.com/2013/11/base64-encoding-in-java-8.html\" rel=\"nofollow\">official Base64</a> came in Java 8, but it is avaible in ealier releases as well. You can use Apache implementation if you want too.</p>\n\n<pre><code>Base64.getEncoder().encodeToString(encryptedPasswordArray);\n</code></pre>\n\n<p>I think this can lead you to solve your problem, but if you have any further questions please let us know.</p>\n"}],"owner":{"display_name":"user3677640"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":506,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":23877835,"answer_count":1,"score":0,"last_activity_date":1689923363,"creation_date":1401137576,"question_id":23877580,"body_markdown":"I am currently making a new password storage program. To do this I am using MySQL and Java. I will be storing it into a portable (SQLite) database. However my problem is when making my security more secure it is failing. Before I put my password into a database I encrypt it for security I then add a more secure string to the end (right now) of the encryption. I know I probably shouldn&#39;t be telling you this but I will be changing it after I have had some help. My problem is when I add the two strings together it works. I then try and take away the second string (for decrypting) except the bytes does not equal 16 so I can&#39;t decrypt my password. I know there are several questions for converting strings to bytes except this one is different. My code is below.\r\n\r\n    public static String upload(String password, String username, String website) throws Exception, GeneralSecurityException{  \t\r\n    \t\t//Generates the encryption\r\n    \t\tString key = &quot;dcW2znalixOYi7jt&quot;;\r\n    \t\tbyte[] encrypted = Encryption.encrypt(key, password);\r\n    \t\tString encryption = &quot;syfs8yy48y3483434tg4&quot;;\r\n    \t\tString encryptionfinal = encrypted + encryption;\r\n    \t\tif(encryptionfinal.contains(encryption)){\r\n    \t\t\tSystem.out.println(&quot;LOL FAILURE&quot;);\r\n    \t\t\tSystem.out.println(encrypted);\r\n    \t\t\tString test = encryptionfinal.replace(encryption, &quot;&quot;);\r\n    \t\t\tSystem.out.println(encryptionfinal);\r\n    \t\t\tSystem.out.println(test);\r\n    \t\t\tbyte[] atest = test.getBytes();\r\n    \t\t\tSystem.out.println(&quot;Length Of Byte From Test:&quot;);\r\n    \t\t\tSystem.out.println(atest.length);\r\n    \t\t\tSystem.out.println(&quot;Length Of Byte From Key:&quot;);\r\n    \t\t\tSystem.out.println(key.length());\r\n    \t\t\tSystem.out.println(&quot;Length Of String Test:&quot;);\r\n    \t\t\tSystem.out.println(test.length());\r\n    \t\t\tSystem.out.println(&quot;Length Of Encryption:&quot;);\r\n    \t\t\tSystem.out.println(encrypted.length);\r\n    \t\t\tSystem.out.println(&quot;Length Of EncryptionFinal:&quot;);\r\n    \t\t\tSystem.out.println(encryptionfinal.length());\r\n    \t\t\tSystem.out.println(&quot;Length of encryption addon:&quot;);\r\n    \t\t\tSystem.out.println(encryption.length());\r\n    \t\t\tSystem.out.println(&quot;Length of encryption final - encryption addon:&quot;);\r\n    \t\t\tSystem.out.println(encryptionfinal.length() - encryption.length());\r\n    \t\t\tString decrypted = Encryption.decrypt(key, atest);\r\n    \t\t\tSystem.out.println(decrypted);\r\n    \t\t}\r\n    \t\tString sDriverName = &quot;org.sqlite.JDBC&quot;;\r\n    \t\tClass.forName(sDriverName); \r\n    \t    String sTempDb = &quot;passwords.db&quot;;\r\n    \t\tString sJdbc = &quot;jdbc:sqlite&quot;;\r\n    \t\tString sDbUrl = sJdbc + &quot;:&quot; + sTempDb;\r\n    \t\tConnection conn = DriverManager.getConnection(sDbUrl);\r\n    \t\tString sql = &quot;INSERT INTO information &quot; + &quot;VALUES (&quot;+null+&quot;,&#39;&quot;+encryptionfinal+&quot;&#39;, &#39;&quot;+username+&quot;&#39;, &#39;&quot;+website+&quot;&#39;);&quot;; \r\n    \t\tString insert = &quot;CREATE TABLE IF NOT EXISTS &#39;information&#39; (&#39;id&#39; INTEGER DEFAULT &#39;0&#39; PRIMARY KEY AUTOINCREMENT,&#39;password&#39;\tTEXT NOT NULL,&#39;username&#39;\tTEXT NOT NULL,&#39;website&#39;\tTEXT NOT NULL);&quot;;\r\n    \t\ttry {\r\n    \t\t    Statement stmt = conn.createStatement();\r\n    \t\t    stmt.executeUpdate(insert);\r\n    \t\t    stmt.executeUpdate(sql);\r\n    \t\t\tstmt.close();\r\n    \t\t}\r\n    \t\tfinally{\r\n    \t\t\t\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n\r\nThe problem with this is when I run it, it says \r\n\r\n    &gt; LOL FAILURE\r\n    javax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when         decrypting with padded cipher\r\n    [B@2b8898c5\r\n    [B@2b8898c5syfs8yy48y3483434tg4\r\n    [B@2b8898c5\r\n    Length Of Byte From Test:\r\n    11\r\n    Length Of Byte From Key:\r\n    16\r\n    Length Of String Test:\r\n    11\r\n    Length Of Encryption:\r\n    16\r\n    Length Of EncryptionFinal:\r\n    31\r\n    Length of encryption addon:\r\n    20\r\n    Length of encryption final - encryption addon:\r\n    11\r\n\tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\r\n\tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\r\n\tat com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:436)\r\n\tat javax.crypto.Cipher.doFinal(Cipher.java:2121)\r\n\tat me.thomasjcf21.SecurePassword.Encryption.decrypt(Encryption.java:38)\r\n\tat me.thomasjcf21.SecurePassword.MySQL.upload(MySQL.java:37)\r\n\tat me.thomasjcf21.SecurePassword.Program$3.actionPerformed(Program.java:90)\r\n\tat javax.swing.AbstractButton.fireActionPerformed(Unknown Source)\r\n\tat javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)\r\n\tat javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)\r\n\tat javax.swing.DefaultButtonModel.setPressed(Unknown Source)\r\n\tat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)\r\n\tat java.awt.Component.processMouseEvent(Unknown Source)\r\n\tat javax.swing.JComponent.processMouseEvent(Unknown Source)\r\n\tat java.awt.Component.processEvent(Unknown Source)\r\n\tat java.awt.Container.processEvent(Unknown Source)\r\n\tat java.awt.Component.dispatchEventImpl(Unknown Source)\r\n\tat java.awt.Container.dispatchEventImpl(Unknown Source)\r\n\tat java.awt.Component.dispatchEvent(Unknown Source)\r\n\tat java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)\r\n\tat java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)\r\n\tat java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)\r\n\tat java.awt.Container.dispatchEventImpl(Unknown Source)\r\n\tat java.awt.Window.dispatchEventImpl(Unknown Source)\r\n\tat java.awt.Component.dispatchEvent(Unknown Source)\r\n\tat java.awt.EventQueue.dispatchEventImpl(Unknown Source)\r\n\tat java.awt.EventQueue.access$400(Unknown Source)\r\n\tat java.awt.EventQueue$3.run(Unknown Source)\r\n\tat java.awt.EventQueue$3.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\r\n\tat java.awt.EventQueue$4.run(Unknown Source)\r\n\tat java.awt.EventQueue$4.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\r\n\tat java.awt.EventQueue.dispatchEvent(Unknown Source)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\r\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\r\n\tat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\r\n\tat java.awt.EventDispatchThread.run(Unknown Source)\r\n\r\nPlease ignore the &quot;LOL Failure&quot; that was a test to see if it was working earlier on.","title":"Converting String To Byte - Java","body":"<p>I am currently making a new password storage program. To do this I am using MySQL and Java. I will be storing it into a portable (SQLite) database. However my problem is when making my security more secure it is failing. Before I put my password into a database I encrypt it for security I then add a more secure string to the end (right now) of the encryption. I know I probably shouldn't be telling you this but I will be changing it after I have had some help. My problem is when I add the two strings together it works. I then try and take away the second string (for decrypting) except the bytes does not equal 16 so I can't decrypt my password. I know there are several questions for converting strings to bytes except this one is different. My code is below.</p>\n<pre><code>public static String upload(String password, String username, String website) throws Exception, GeneralSecurityException{   \n        //Generates the encryption\n        String key = &quot;dcW2znalixOYi7jt&quot;;\n        byte[] encrypted = Encryption.encrypt(key, password);\n        String encryption = &quot;syfs8yy48y3483434tg4&quot;;\n        String encryptionfinal = encrypted + encryption;\n        if(encryptionfinal.contains(encryption)){\n            System.out.println(&quot;LOL FAILURE&quot;);\n            System.out.println(encrypted);\n            String test = encryptionfinal.replace(encryption, &quot;&quot;);\n            System.out.println(encryptionfinal);\n            System.out.println(test);\n            byte[] atest = test.getBytes();\n            System.out.println(&quot;Length Of Byte From Test:&quot;);\n            System.out.println(atest.length);\n            System.out.println(&quot;Length Of Byte From Key:&quot;);\n            System.out.println(key.length());\n            System.out.println(&quot;Length Of String Test:&quot;);\n            System.out.println(test.length());\n            System.out.println(&quot;Length Of Encryption:&quot;);\n            System.out.println(encrypted.length);\n            System.out.println(&quot;Length Of EncryptionFinal:&quot;);\n            System.out.println(encryptionfinal.length());\n            System.out.println(&quot;Length of encryption addon:&quot;);\n            System.out.println(encryption.length());\n            System.out.println(&quot;Length of encryption final - encryption addon:&quot;);\n            System.out.println(encryptionfinal.length() - encryption.length());\n            String decrypted = Encryption.decrypt(key, atest);\n            System.out.println(decrypted);\n        }\n        String sDriverName = &quot;org.sqlite.JDBC&quot;;\n        Class.forName(sDriverName); \n        String sTempDb = &quot;passwords.db&quot;;\n        String sJdbc = &quot;jdbc:sqlite&quot;;\n        String sDbUrl = sJdbc + &quot;:&quot; + sTempDb;\n        Connection conn = DriverManager.getConnection(sDbUrl);\n        String sql = &quot;INSERT INTO information &quot; + &quot;VALUES (&quot;+null+&quot;,'&quot;+encryptionfinal+&quot;', '&quot;+username+&quot;', '&quot;+website+&quot;');&quot;; \n        String insert = &quot;CREATE TABLE IF NOT EXISTS 'information' ('id' INTEGER DEFAULT '0' PRIMARY KEY AUTOINCREMENT,'password'    TEXT NOT NULL,'username'    TEXT NOT NULL,'website' TEXT NOT NULL);&quot;;\n        try {\n            Statement stmt = conn.createStatement();\n            stmt.executeUpdate(insert);\n            stmt.executeUpdate(sql);\n            stmt.close();\n        }\n        finally{\n            \n        }\n        return null;\n    }\n</code></pre>\n<p>The problem with this is when I run it, it says</p>\n<pre><code>&gt; LOL FAILURE\njavax.crypto.IllegalBlockSizeException: Input length must be multiple of 16 when         decrypting with padded cipher\n[B@2b8898c5\n[B@2b8898c5syfs8yy48y3483434tg4\n[B@2b8898c5\nLength Of Byte From Test:\n11\nLength Of Byte From Key:\n16\nLength Of String Test:\n11\nLength Of Encryption:\n16\nLength Of EncryptionFinal:\n31\nLength of encryption addon:\n20\nLength of encryption final - encryption addon:\n11\nat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:913)\nat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:824)\nat com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:436)\nat javax.crypto.Cipher.doFinal(Cipher.java:2121)\nat me.thomasjcf21.SecurePassword.Encryption.decrypt(Encryption.java:38)\nat me.thomasjcf21.SecurePassword.MySQL.upload(MySQL.java:37)\nat me.thomasjcf21.SecurePassword.Program$3.actionPerformed(Program.java:90)\nat javax.swing.AbstractButton.fireActionPerformed(Unknown Source)\nat javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)\nat javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)\nat javax.swing.DefaultButtonModel.setPressed(Unknown Source)\nat javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)\nat java.awt.Component.processMouseEvent(Unknown Source)\nat javax.swing.JComponent.processMouseEvent(Unknown Source)\nat java.awt.Component.processEvent(Unknown Source)\nat java.awt.Container.processEvent(Unknown Source)\nat java.awt.Component.dispatchEventImpl(Unknown Source)\nat java.awt.Container.dispatchEventImpl(Unknown Source)\nat java.awt.Component.dispatchEvent(Unknown Source)\nat java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)\nat java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)\nat java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)\nat java.awt.Container.dispatchEventImpl(Unknown Source)\nat java.awt.Window.dispatchEventImpl(Unknown Source)\nat java.awt.Component.dispatchEvent(Unknown Source)\nat java.awt.EventQueue.dispatchEventImpl(Unknown Source)\nat java.awt.EventQueue.access$400(Unknown Source)\nat java.awt.EventQueue$3.run(Unknown Source)\nat java.awt.EventQueue$3.run(Unknown Source)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\nat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\nat java.awt.EventQueue$4.run(Unknown Source)\nat java.awt.EventQueue$4.run(Unknown Source)\nat java.security.AccessController.doPrivileged(Native Method)\nat java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)\nat java.awt.EventQueue.dispatchEvent(Unknown Source)\nat java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)\nat java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)\nat java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)\nat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\nat java.awt.EventDispatchThread.pumpEvents(Unknown Source)\nat java.awt.EventDispatchThread.run(Unknown Source)\n</code></pre>\n<p>Please ignore the &quot;LOL Failure&quot; that was a test to see if it was working earlier on.</p>\n"},{"tags":["java","jmeter","garbage-collection","performance-testing"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689920977,"creation_date":1689920977,"answer_id":76735595,"question_id":76735049,"body_markdown":"If you&#39;re absolutely sure that this is due to garbage collection and [G1 garbage collector][1] is to blame you can comment out the line which tells JMeter to use it:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nAlso be aware that according to [9 Easy Solutions for a JMeter Load Test “Out of Memory” Failure][3] you should always be using the latest version of JMeter and Java so consider upgrading to [JMeter 5.6.2][4] (or whatever is the latest stable version available at [JMeter Downloads][5] page)\r\n\r\n\r\n  [1]: https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html\r\n  [2]: https://i.stack.imgur.com/npB0W.png\r\n  [3]: https://www.blazemeter.com/blog/jmeter-memory-profiling#use\r\n  [4]: https://www.mail-archive.com/user@jmeter.apache.org/msg12970.html\r\n  [5]: https://jmeter.apache.org/download_jmeter.cgi","title":"Jmeter properties configuration adding UseConcMarkSweepGC &amp; DisableExplicitGC","body":"<p>If you're absolutely sure that this is due to garbage collection and <a href=\"https://www.oracle.com/technetwork/tutorials/tutorials-1876574.html\" rel=\"nofollow noreferrer\">G1 garbage collector</a> is to blame you can comment out the line which tells JMeter to use it:</p>\n<p><a href=\"https://i.stack.imgur.com/npB0W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/npB0W.png\" alt=\"enter image description here\" /></a></p>\n<p>Also be aware that according to <a href=\"https://www.blazemeter.com/blog/jmeter-memory-profiling#use\" rel=\"nofollow noreferrer\">9 Easy Solutions for a JMeter Load Test “Out of Memory” Failure</a> you should always be using the latest version of JMeter and Java so consider upgrading to <a href=\"https://www.mail-archive.com/user@jmeter.apache.org/msg12970.html\" rel=\"nofollow noreferrer\">JMeter 5.6.2</a> (or whatever is the latest stable version available at <a href=\"https://jmeter.apache.org/download_jmeter.cgi\" rel=\"nofollow noreferrer\">JMeter Downloads</a> page)</p>\n"}],"owner":{"account_id":26449163,"reputation":125,"user_id":20092606,"display_name":"Harris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76735595,"answer_count":1,"score":0,"last_activity_date":1689922764,"creation_date":1689912312,"question_id":76735049,"body_markdown":"Can anyone help me how to add these `-XX:+UseConcMarkSweepGC` and `-XX:+DisableExplicitGC` on my Jmeter configuration, Current the issue I&#39;m encountering upon generating 6000 request per minute and after few hours request is decreasing. I tried to update this file /data/apache-jmeter-5.3/bin/jmeter unfortunately its not working. Your response is highly appreciated. \r\n\r\nFYI: I&#39;m using Jmeter 5.3 version\r\n\r\n[![Jmeter configuration][1]][1]\r\n\r\n[![Error Message][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ggC3E.png\r\n  [2]: https://i.stack.imgur.com/XWPBY.png","title":"Jmeter properties configuration adding UseConcMarkSweepGC &amp; DisableExplicitGC","body":"<p>Can anyone help me how to add these <code>-XX:+UseConcMarkSweepGC</code> and <code>-XX:+DisableExplicitGC</code> on my Jmeter configuration, Current the issue I'm encountering upon generating 6000 request per minute and after few hours request is decreasing. I tried to update this file /data/apache-jmeter-5.3/bin/jmeter unfortunately its not working. Your response is highly appreciated.</p>\n<p>FYI: I'm using Jmeter 5.3 version</p>\n<p><a href=\"https://i.stack.imgur.com/ggC3E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ggC3E.png\" alt=\"Jmeter configuration\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/XWPBY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWPBY.png\" alt=\"Error Message\" /></a></p>\n"},{"tags":["java","database","spring-boot","logback","sybase"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1689925713,"post_id":76735747,"comment_id":135284935,"body_markdown":"Add this to `application.properties`: `logging.level.org.springframework.jdbc.core.JdbcTemplate=DEBUG`","body":"Add this to <code>application.properties</code>: <code>logging.level.org.springframework.jdbc.core.JdbcTemplate=DEB&zwnj;&#8203;UG</code>"},{"owner":{"account_id":23908240,"reputation":11,"user_id":17905539,"display_name":"Himanshu Dixit"},"score":0,"creation_date":1689942002,"post_id":76735747,"comment_id":135287959,"body_markdown":"Can we change it to application.yml context ?\nAlso, application yml looks like this as of now :\n\n**logging:\n      config: classpath:logback-spring.xml**","body":"Can we change it to application.yml context ? Also, application yml looks like this as of now :  <b>logging:       config: classpath:logback-spring.xml</b>"}],"owner":{"account_id":23908240,"reputation":11,"user_id":17905539,"display_name":"Himanshu Dixit"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689922595,"creation_date":1689922595,"question_id":76735747,"body_markdown":"Is there any way to log all the queries &amp; procedures in Sybase DB with Spring Boot Application having logback ?\r\n\r\nAs of now, I tried following in my **logback-spring.xml** - \r\n \r\n```\r\n&lt;logger name=&quot;org.springframework.jdbc.core.JdbcTemplate&quot; level =&quot;DEBUG&quot;&gt;\r\n&lt;appender-ref ref=&quot;console&quot;/&gt;\r\n&lt;/logger&gt;\r\n```\r\n\r\nThe above code didn&#39;t work for me.\r\nI&#39;m expecting to print/log all the Database queries/Proc in my Logger file/Splunk.","title":"How to log Sybase queries in SpringBoot","body":"<p>Is there any way to log all the queries &amp; procedures in Sybase DB with Spring Boot Application having logback ?</p>\n<p>As of now, I tried following in my <strong>logback-spring.xml</strong> -</p>\n<pre><code>&lt;logger name=&quot;org.springframework.jdbc.core.JdbcTemplate&quot; level =&quot;DEBUG&quot;&gt;\n&lt;appender-ref ref=&quot;console&quot;/&gt;\n&lt;/logger&gt;\n</code></pre>\n<p>The above code didn't work for me.\nI'm expecting to print/log all the Database queries/Proc in my Logger file/Splunk.</p>\n"},{"tags":["java","optaplanner"],"comments":[{"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"score":0,"creation_date":1690817837,"post_id":76735727,"comment_id":135402484,"body_markdown":"This should of been impossible (emphasis on should of); The queue has size (# move threads + selectedMoveBufferSize, where selectedMoveBufferSize is the maximum number of move evaluations at any given time). Before any move evaluations are made, each move thread need to take the current Setup/ApplyStep operation (of which there will be # move threads in the queue). No new MoveEvaluationOperations are added to the queue until they are all consumed (for reproducibility). Before a step is ended, the operation queue is cleared, and either # move threads ApplyStep or Destroy operations are added.","body":"This should of been impossible (emphasis on should of); The queue has size (# move threads + selectedMoveBufferSize, where selectedMoveBufferSize is the maximum number of move evaluations at any given time). Before any move evaluations are made, each move thread need to take the current Setup/ApplyStep operation (of which there will be # move threads in the queue). No new MoveEvaluationOperations are added to the queue until they are all consumed (for reproducibility). Before a step is ended, the operation queue is cleared, and either # move threads ApplyStep or Destroy operations are added."},{"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"score":0,"creation_date":1690817900,"post_id":76735727,"comment_id":135402497,"body_markdown":"What was your SolverConfig, domain and constraints?","body":"What was your SolverConfig, domain and constraints?"}],"owner":{"account_id":29061879,"reputation":1,"user_id":22262329,"display_name":"co_kl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689922343,"creation_date":1689922343,"question_id":76735727,"body_markdown":"I&#39;m using Optaplanner for some optimization problem and in the last days there is this error:\r\n\r\n`java.lang.IllegalStateException: Queue full\r\n\tat java.base/java.util.AbstractQueue.add(AbstractQueue.java:98)\r\n\tat java.base/java.util.concurrent.ArrayBlockingQueue.add(ArrayBlockingQueue.java:329)\r\n\tat org.optaplanner.core.impl.localsearch.decider.MultiThreadedLocalSearchDecider.decideNextStep(MultiThreadedLocalSearchDecider.java:157)\r\n\tat org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.solve(DefaultLocalSearchPhase.java:72)\r\n\tat org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:83)\r\n\tat org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:193)`\r\n\r\nDoes anyone have an idea when this error occurs in Optaplanner? From my perspective Optaplanner adds moves (possible Solutions to the Optimization problem) to this operationQueue to be evaluated by the Operating Threads. It seems, that they&#39;re not fast enough with the evaluation.\r\n\r\nThe error occurs for &quot;bad&quot; optimization problems with less data, where it&#39;s hard to find a good solution.","title":"Optaplanner - Optimization problem - Error: Queue Full - ArrayBlockingQueue","body":"<p>I'm using Optaplanner for some optimization problem and in the last days there is this error:</p>\n<p><code>java.lang.IllegalStateException: Queue full at java.base/java.util.AbstractQueue.add(AbstractQueue.java:98) at java.base/java.util.concurrent.ArrayBlockingQueue.add(ArrayBlockingQueue.java:329) at org.optaplanner.core.impl.localsearch.decider.MultiThreadedLocalSearchDecider.decideNextStep(MultiThreadedLocalSearchDecider.java:157) at org.optaplanner.core.impl.localsearch.DefaultLocalSearchPhase.solve(DefaultLocalSearchPhase.java:72) at org.optaplanner.core.impl.solver.AbstractSolver.runPhases(AbstractSolver.java:83) at org.optaplanner.core.impl.solver.DefaultSolver.solve(DefaultSolver.java:193)</code></p>\n<p>Does anyone have an idea when this error occurs in Optaplanner? From my perspective Optaplanner adds moves (possible Solutions to the Optimization problem) to this operationQueue to be evaluated by the Operating Threads. It seems, that they're not fast enough with the evaluation.</p>\n<p>The error occurs for &quot;bad&quot; optimization problems with less data, where it's hard to find a good solution.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","h2"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689911351,"post_id":76734750,"comment_id":135283025,"body_markdown":"If you log a stack trace from the `User` constructors, what is creating an instance?","body":"If you log a stack trace from the <code>User</code> constructors, what is creating an instance?"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1689921344,"post_id":76734750,"comment_id":135284157,"body_markdown":"Remove the @Component annotation from the entity class. This is the cause. Spring creates an instance on start up.","body":"Remove the @Component annotation from the entity class. This is the cause. Spring creates an instance on start up."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1689921868,"post_id":76734750,"comment_id":135284244,"body_markdown":"Why is your use an `@Component` that shouldn&#39;t be the case, remove it as a field from your service and controller as well? Next to that don&#39;t use `@Data` with entities see https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/","body":"Why is your use an <code>@Component</code> that shouldn&#39;t be the case, remove it as a field from your service and controller as well? Next to that don&#39;t use <code>@Data</code> with entities see <a href=\"https://deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities/\" rel=\"nofollow noreferrer\">deinum.biz/2019-02-13-Lombok-Data-Ojects-Arent-Entities</a>"},{"owner":{"account_id":22137140,"reputation":11,"user_id":16387706,"display_name":"Jboyd34"},"score":0,"creation_date":1689938730,"post_id":76734750,"comment_id":135287309,"body_markdown":"I need to have the component annotations there so spring can auto detect beans. I also have a component annotation on two other entity classes and they&#39;re not creating a default row so I don&#39;t think my @Component is the cause","body":"I need to have the component annotations there so spring can auto detect beans. I also have a component annotation on two other entity classes and they&#39;re not creating a default row so I don&#39;t think my @Component is the cause"},{"owner":{"account_id":22137140,"reputation":11,"user_id":16387706,"display_name":"Jboyd34"},"score":0,"creation_date":1689938921,"post_id":76734750,"comment_id":135287343,"body_markdown":"I figured it out. I had an empty @Autowire annotation","body":"I figured it out. I had an empty @Autowire annotation"},{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1689939101,"post_id":76734750,"comment_id":135287387,"body_markdown":"You definitely don&#39;t need to make a Spring bean from an entity. Remove those auto wired fields from other classes. Trust me and @M.Deinum","body":"You definitely don&#39;t need to make a Spring bean from an entity. Remove those auto wired fields from other classes. Trust me and @M.Deinum"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690179857,"post_id":76734750,"comment_id":135311683,"body_markdown":"You didn&#39;t have an empty `@Autowired` it was on the `addUser` method (despite the empty line). It doesn&#39;t make sense to make components out of entities, Spring doesn&#39;t need to detect those and Spring Data has other means to detect entities and repositories.","body":"You didn&#39;t have an empty <code>@Autowired</code> it was on the <code>addUser</code> method (despite the empty line). It doesn&#39;t make sense to make components out of entities, Spring doesn&#39;t need to detect those and Spring Data has other means to detect entities and repositories."}],"owner":{"account_id":22137140,"reputation":11,"user_id":16387706,"display_name":"Jboyd34"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689922069,"creation_date":1689905924,"question_id":76734750,"body_markdown":"My h2 database creates a row with default values each time I restart my spring boot application. This is happening for my users entity. \r\n\r\n```java\r\n@Component\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Data\r\n@Entity(name = &quot;Users&quot;)\r\n@Table(name = &quot;Users&quot;)\r\npublic class User {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name=&quot;userId&quot;)\r\n\tprivate int id;\r\n\t@Column(unique=true)\r\n\tprivate String username = &quot;&quot;;\r\n\tprivate String city = &quot;&quot;;\r\n\tprivate String state = &quot;&quot;;\r\n\tprivate String zip = &quot;&quot;;\r\n\tprivate boolean peanutAll = false;\r\n\tprivate boolean eggAll = false;\r\n\tprivate boolean dairyAll = false;\r\n}\r\n```\r\nHere is my properties file \r\n\r\n```\r\nspring.h2.console.enabled=true\r\nspring.datasource.url=jdbc:h2:mem:dcbapp;DATABASE_TO_UPPER=false;\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=sa\r\nspring.datasource.password=password\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.jpa.properties.hibernate.globally_quoted_identifiers=true\r\nspring.jpa.hibernate.ddl-auto=update\r\n```\r\nI&#39;m not sure if my controller and service class will be helpful or not since I&#39;m not making a request but I&#39;ll still provide it just incase.\r\n\r\n\r\n```java\r\n@RestController\r\n\r\n@RequestMapping(path=&quot;/user&quot;)\r\npublic class UserController {\r\n\t@Autowired UserService userv;\r\n\t@Autowired User returnUser;\r\n\t\r\n\t@PostMapping(&quot;/add&quot;)\r\n\tpublic ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody User user){\r\n\tOptional&lt;User&gt; tempUser =\tOptional.ofNullable(userv.addUser(user));\r\n\treturn ResponseEntity.of(tempUser);\r\n\r\n\t}\r\n\t\r\n\t@PutMapping(&quot;/update&quot;)\r\n\tpublic ResponseEntity&lt;User&gt; updateUser(@Valid @RequestBody User user){\r\n\t\tUser tempUser =\tuserv.updateUser(user);\r\n\t\treturn ResponseEntity.ok(tempUser);\r\n\t}\r\n\t\r\n\t@GetMapping(&quot;/{username}&quot;)\r\n\tpublic ResponseEntity&lt;User&gt; getUser(@PathVariable(value=&quot;username&quot;) String username ){\r\n\t\tUser tempUser = userv.getUserByUsername(username);\r\n\t\treturn ResponseEntity.ok(tempUser);\r\n\t}\r\n}\r\n```\r\n\r\n```java\r\n@Service\r\npublic class UserService {\r\n\r\n\t@Autowired UserRepo userRepo;\r\n\t@Autowired User tempUser;\r\n\t@Autowired \r\n\t\r\n\tpublic User addUser(User user) {\r\n\t\tif(userRepo.existsById(user.getId())) {\r\n\t\t\tthrow new UserAlreadyExistsException(String.format(&quot;User %s already exists&quot;, user.getUsername()));\r\n\t\t}\r\n\r\n\t\telse {\r\n\t\t\t\treturn userRepo.save(user);\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t\r\n\tpublic User getUserByUsername(String username) {\t\t\r\n\t\tUser tempUser = userRepo.findByUsername(username).orElseThrow(() -&gt; new UserNotFoundException(String.format(&quot;User doesn&#39;t exist: %s&quot;, username)));\t\t\r\n\t\treturn tempUser;\r\n    }\r\n\t\r\n\tpublic User getUserById(int id) {\r\n\t\tUser tempUser = userRepo.findById(id).orElseThrow(() -&gt; new UserNotFoundException(String.format(&quot;User doesn&#39;t exist with id: %d&quot;, id)));\r\n\t\treturn tempUser;\r\n\t}\r\n\t\r\n\t//you need to include id in json body request\r\n\tpublic User updateUser(User user) throws UserNotFoundException, ChangeUsernameException, MustMakeChangeException{\r\n\t\tOptional&lt;User&gt; tempUser1 = userRepo.findById(user.getId());\r\n\t\tif(tempUser1.isEmpty()) {\r\n\t\t\tthrow new UserNotFoundException(String.format(&quot;User doesn&#39;t exist: %s&quot;, user.getUsername()));\r\n\t\t}\r\n\t\tUser tempUser = tempUser1.get();\r\n\t\t\r\n\t\tif(!tempUser.getUsername().equals(user.getUsername())) {\r\n\t\t\tthrow new ChangeUsernameException(String.format(&quot;Unable to change username: %s&quot;, user.getUsername()));\r\n\t\t}\r\n\t\telse if(tempUser.getCity().equals(user.getCity()) &amp;&amp; tempUser.getState().equals(user.getState()) &amp;&amp; tempUser.getZip().equals(user.getZip())) {\r\n\t\t\t\r\n\t\t\tthrow new MustMakeChangeException(&quot;You must make an update to user&quot;);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t\r\n\t\t\treturn userRepo.save(user);\r\n\t\t}\r\n\t\r\n\t}\r\n}\r\n```","title":"Why is my h2 database inserting a row with default values on each spring boot restart","body":"<p>My h2 database creates a row with default values each time I restart my spring boot application. This is happening for my users entity.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@NoArgsConstructor\n@AllArgsConstructor\n@Data\n@Entity(name = &quot;Users&quot;)\n@Table(name = &quot;Users&quot;)\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;userId&quot;)\n    private int id;\n    @Column(unique=true)\n    private String username = &quot;&quot;;\n    private String city = &quot;&quot;;\n    private String state = &quot;&quot;;\n    private String zip = &quot;&quot;;\n    private boolean peanutAll = false;\n    private boolean eggAll = false;\n    private boolean dairyAll = false;\n}\n</code></pre>\n<p>Here is my properties file</p>\n<pre><code>spring.h2.console.enabled=true\nspring.datasource.url=jdbc:h2:mem:dcbapp;DATABASE_TO_UPPER=false;\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.properties.hibernate.globally_quoted_identifiers=true\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>I'm not sure if my controller and service class will be helpful or not since I'm not making a request but I'll still provide it just incase.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n\n@RequestMapping(path=&quot;/user&quot;)\npublic class UserController {\n    @Autowired UserService userv;\n    @Autowired User returnUser;\n    \n    @PostMapping(&quot;/add&quot;)\n    public ResponseEntity&lt;User&gt; addUser(@Valid @RequestBody User user){\n    Optional&lt;User&gt; tempUser =   Optional.ofNullable(userv.addUser(user));\n    return ResponseEntity.of(tempUser);\n\n    }\n    \n    @PutMapping(&quot;/update&quot;)\n    public ResponseEntity&lt;User&gt; updateUser(@Valid @RequestBody User user){\n        User tempUser = userv.updateUser(user);\n        return ResponseEntity.ok(tempUser);\n    }\n    \n    @GetMapping(&quot;/{username}&quot;)\n    public ResponseEntity&lt;User&gt; getUser(@PathVariable(value=&quot;username&quot;) String username ){\n        User tempUser = userv.getUserByUsername(username);\n        return ResponseEntity.ok(tempUser);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class UserService {\n\n    @Autowired UserRepo userRepo;\n    @Autowired User tempUser;\n    @Autowired \n    \n    public User addUser(User user) {\n        if(userRepo.existsById(user.getId())) {\n            throw new UserAlreadyExistsException(String.format(&quot;User %s already exists&quot;, user.getUsername()));\n        }\n\n        else {\n                return userRepo.save(user);\n            }       \n        }\n    \n    public User getUserByUsername(String username) {        \n        User tempUser = userRepo.findByUsername(username).orElseThrow(() -&gt; new UserNotFoundException(String.format(&quot;User doesn't exist: %s&quot;, username)));      \n        return tempUser;\n    }\n    \n    public User getUserById(int id) {\n        User tempUser = userRepo.findById(id).orElseThrow(() -&gt; new UserNotFoundException(String.format(&quot;User doesn't exist with id: %d&quot;, id)));\n        return tempUser;\n    }\n    \n    //you need to include id in json body request\n    public User updateUser(User user) throws UserNotFoundException, ChangeUsernameException, MustMakeChangeException{\n        Optional&lt;User&gt; tempUser1 = userRepo.findById(user.getId());\n        if(tempUser1.isEmpty()) {\n            throw new UserNotFoundException(String.format(&quot;User doesn't exist: %s&quot;, user.getUsername()));\n        }\n        User tempUser = tempUser1.get();\n        \n        if(!tempUser.getUsername().equals(user.getUsername())) {\n            throw new ChangeUsernameException(String.format(&quot;Unable to change username: %s&quot;, user.getUsername()));\n        }\n        else if(tempUser.getCity().equals(user.getCity()) &amp;&amp; tempUser.getState().equals(user.getState()) &amp;&amp; tempUser.getZip().equals(user.getZip())) {\n            \n            throw new MustMakeChangeException(&quot;You must make an update to user&quot;);\n        }\n        else {\n            \n            return userRepo.save(user);\n        }\n    \n    }\n}\n</code></pre>\n"},{"tags":["java","spring","google-cloud-platform","spring-jms","spring-cloud-gcp"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1689922742,"post_id":76735697,"comment_id":135284401,"body_markdown":"You should ask your reviewer what scheduling library they want you to use instead","body":"You should ask your reviewer what scheduling library they want you to use instead"},{"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"score":0,"creation_date":1689923221,"post_id":76735697,"comment_id":135284479,"body_markdown":"@Jorn they are looking for solution provided by gcp sdk itself like its implemented on second link that I have provided or somehow using JMS that I am not sure.","body":"@Jorn they are looking for solution provided by gcp sdk itself like its implemented on second link that I have provided or somehow using JMS that I am not sure."}],"owner":{"account_id":12377600,"reputation":565,"user_id":9024680,"display_name":"stackUser"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689922016,"creation_date":1689922016,"question_id":76735697,"body_markdown":"My requirement is to read gcp pubsub message in java. I have implemented it using java scheduler and google-cloud-pubsub maven dependency(https://cloud.google.com/pubsub/docs/pull). Its a Pull subscriptions not Push.\r\nBut same implementation was not accepted by reviewer. It was rejected by saying implement the same without Java scheduler and asked me to refer this link https://spring.io/guides/gs/messaging-gcp-pubsub/\r\n\r\nI tried POC with above link and its working fine with spring-boot but issue is its not supported using spring with version: 5.1.3.RELEASE that we are using.\r\n\r\nCan someone please help me or provide any reference that I can try to implement GCP pubsub read msg without Java scheduler and it supports spring version: 5.1.3.RELEASE.\r\n \r\n","title":"How to read GCP pubsub message in Java without @Scheduled","body":"<p>My requirement is to read gcp pubsub message in java. I have implemented it using java scheduler and google-cloud-pubsub maven dependency(<a href=\"https://cloud.google.com/pubsub/docs/pull\" rel=\"nofollow noreferrer\">https://cloud.google.com/pubsub/docs/pull</a>). Its a Pull subscriptions not Push.\nBut same implementation was not accepted by reviewer. It was rejected by saying implement the same without Java scheduler and asked me to refer this link <a href=\"https://spring.io/guides/gs/messaging-gcp-pubsub/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/messaging-gcp-pubsub/</a></p>\n<p>I tried POC with above link and its working fine with spring-boot but issue is its not supported using spring with version: 5.1.3.RELEASE that we are using.</p>\n<p>Can someone please help me or provide any reference that I can try to implement GCP pubsub read msg without Java scheduler and it supports spring version: 5.1.3.RELEASE.</p>\n"},{"tags":["java","thymeleaf"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":3,"creation_date":1689918629,"post_id":76735368,"comment_id":135283768,"body_markdown":"It&#39;s not supposed to be regular Java syntax. See [here](https://www.thymeleaf.org/doc/articles/standarddialect5minutes.html), particularly the `book.author.name` example.","body":"It&#39;s not supposed to be regular Java syntax. See <a href=\"https://www.thymeleaf.org/doc/articles/standarddialect5minutes.html\" rel=\"nofollow noreferrer\">here</a>, particularly the <code>book.author.name</code> example."}],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689921944,"creation_date":1689921944,"answer_id":76735688,"question_id":76735368,"body_markdown":"Thymeleaf syntax is not Java. Thymeleaf offers its own way of accessing properties, in this case using `.name` to access the Java method `name()`. But that&#39;s fully configurable, you could configure it so that `foo.bar` would also return `APPROVED`.\r\n\r\nJust don&#39;t assume that you can now also just use `.name` instead of `.name()` in plain Java code.","title":"How do Java enum values work without calling the name method (+thymeleaf)","body":"<p>Thymeleaf syntax is not Java. Thymeleaf offers its own way of accessing properties, in this case using <code>.name</code> to access the Java method <code>name()</code>. But that's fully configurable, you could configure it so that <code>foo.bar</code> would also return <code>APPROVED</code>.</p>\n<p>Just don't assume that you can now also just use <code>.name</code> instead of <code>.name()</code> in plain Java code.</p>\n"}],"owner":{"account_id":203988,"reputation":4774,"user_id":451945,"accept_rate":73,"display_name":"Frexuz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76735688,"answer_count":1,"score":-1,"last_activity_date":1689921944,"creation_date":1689918092,"question_id":76735368,"body_markdown":"In all examples of how to use enums in Java, i see that you use the `.name()` method, (or `.toString()`.\r\n\r\nHowever, it seems that using it __without__ the parentheses also works (?!). \r\n\r\nHOW / WHY? :D\r\n```html\r\n&lt;div th:text=&quot;${user.accountStatus.name == &#39;APPROVED&#39;}&quot;&gt;&lt;/div&gt; &lt;!-- prints true correctly --&gt;\r\n```\r\n\r\n(For extra context: It&#39;s quite confusing when reviewing code in a team where frontend developers (who don&#39;t know java) use it like this. Without knowing exactly why this works, from a language-agnostic standpoint, it _looks_ like a bug)","title":"How do Java enum values work without calling the name method (+thymeleaf)","body":"<p>In all examples of how to use enums in Java, i see that you use the <code>.name()</code> method, (or <code>.toString()</code>.</p>\n<p>However, it seems that using it <strong>without</strong> the parentheses also works (?!).</p>\n<p>HOW / WHY? :D</p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div th:text=&quot;${user.accountStatus.name == 'APPROVED'}&quot;&gt;&lt;/div&gt; &lt;!-- prints true correctly --&gt;\n</code></pre>\n<p>(For extra context: It's quite confusing when reviewing code in a team where frontend developers (who don't know java) use it like this. Without knowing exactly why this works, from a language-agnostic standpoint, it <em>looks</em> like a bug)</p>\n"},{"tags":["java","android","kotlin","java-threads"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1689907286,"post_id":76734596,"comment_id":135282744,"body_markdown":"Concurrency in Java can be a complex subject.  Usually on a device like Android it&#39;s been simplified by library functions, but you&#39;ve shown us no code so we don&#39;t know what function you&#39;re having problems with.  Show some code please, and read up on concurrency: https://docs.oracle.com/javase/tutorial/essential/concurrency/","body":"Concurrency in Java can be a complex subject.  Usually on a device like Android it&#39;s been simplified by library functions, but you&#39;ve shown us no code so we don&#39;t know what function you&#39;re having problems with.  Show some code please, and read up on concurrency: <a href=\"https://docs.oracle.com/javase/tutorial/essential/concurrency/\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/essential/concurrency</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":2,"creation_date":1689908610,"post_id":76734596,"comment_id":135282837,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":29054467,"reputation":36,"user_id":22256528,"display_name":"Muhammad Tariq"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689914151,"creation_date":1689914151,"answer_id":76735146,"question_id":76734596,"body_markdown":" Within the coroutine, we use withContext to switch to the background thread (Dispatchers.IO) for the URL request and then switch back to the main thread to update the button color using the updateButtonColor function.`import kotlinx.coroutines.*\r\n\r\n    // Assuming you&#39;re inside an activity or a fragment\r\n    val myButton = findViewById&lt;Button&gt;(R.id.my_button)\r\n    \r\n    // Create a coroutine scope\r\n    val coroutineScope = CoroutineScope(Dispatchers.Main)\r\n    \r\n    // Function to perform the URL request and get the value (true or false)\r\n    suspend fun performURLRequest(): Boolean {\r\n        // Perform your URL request here and return the result (true or false)\r\n        delay(2000) // Simulating a network delay for demonstration purposes\r\n        return true\r\n    }\r\n    \r\n    // Function to update the button color based on the value\r\n    fun updateButtonColor(value: Boolean) {\r\n        if (value) {\r\n            myButton.setBackgroundColor(Color.GREEN)\r\n        } else {\r\n            myButton.setBackgroundColor(Color.RED)\r\n        }\r\n    }\r\n    \r\n    // Launch a coroutine in the main thread\r\n    coroutineScope.launch {\r\n        // Switch to the background thread for the URL request\r\n        val value = withContext(Dispatchers.IO) {\r\n            performURLRequest()\r\n        }\r\n    \r\n        // Now, switch back to the main thread to update the button color\r\n        updateButtonColor(value)\r\n    }\r\n    `","title":"Access values from another thread? Kotlin/Java","body":"<p>Within the coroutine, we use withContext to switch to the background thread (Dispatchers.IO) for the URL request and then switch back to the main thread to update the button color using the updateButtonColor function.`import kotlinx.coroutines.*</p>\n<pre><code>// Assuming you're inside an activity or a fragment\nval myButton = findViewById&lt;Button&gt;(R.id.my_button)\n\n// Create a coroutine scope\nval coroutineScope = CoroutineScope(Dispatchers.Main)\n\n// Function to perform the URL request and get the value (true or false)\nsuspend fun performURLRequest(): Boolean {\n    // Perform your URL request here and return the result (true or false)\n    delay(2000) // Simulating a network delay for demonstration purposes\n    return true\n}\n\n// Function to update the button color based on the value\nfun updateButtonColor(value: Boolean) {\n    if (value) {\n        myButton.setBackgroundColor(Color.GREEN)\n    } else {\n        myButton.setBackgroundColor(Color.RED)\n    }\n}\n\n// Launch a coroutine in the main thread\ncoroutineScope.launch {\n    // Switch to the background thread for the URL request\n    val value = withContext(Dispatchers.IO) {\n        performURLRequest()\n    }\n\n    // Now, switch back to the main thread to update the button color\n    updateButtonColor(value)\n}\n`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25155166,"reputation":864,"user_id":19000086,"display_name":"zaid khan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689921879,"creation_date":1689921879,"answer_id":76735681,"question_id":76734596,"body_markdown":"```\r\n@Volatile\r\n\r\nprivate var flag: Boolean = false\r\n\r\nfun toggleFlag() {\r\n\r\nflag = !flag\r\n\r\n}\r\n\r\nfun performAction() {\r\n\r\nif (flag) {\r\n\r\n// Code execution when the flag is true\r\n\r\n} else {\r\n\r\n// Code execution when the flag is false\r\n\r\n}\r\n\r\n}\r\n```\r\n\r\nIn this code, flag is declared as volatile. Multiple threads can call toggleFlag() to change its value, and performAction() uses the flag to decide which code path to take. With volatile, we ensure that any updates made by one thread are instantly seen by others. It&#39;s like using a special megaphone that ensures everyone hears the latest message.","title":"Access values from another thread? Kotlin/Java","body":"<pre><code>@Volatile\n\nprivate var flag: Boolean = false\n\nfun toggleFlag() {\n\nflag = !flag\n\n}\n\nfun performAction() {\n\nif (flag) {\n\n// Code execution when the flag is true\n\n} else {\n\n// Code execution when the flag is false\n\n}\n\n}\n</code></pre>\n<p>In this code, flag is declared as volatile. Multiple threads can call toggleFlag() to change its value, and performAction() uses the flag to decide which code path to take. With volatile, we ensure that any updates made by one thread are instantly seen by others. It's like using a special megaphone that ensures everyone hears the latest message.</p>\n"}],"owner":{"account_id":29060554,"reputation":3,"user_id":22261336,"display_name":"KrabimannBardo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76735146,"answer_count":2,"score":0,"last_activity_date":1689921879,"creation_date":1689903082,"question_id":76734596,"body_markdown":"I am programming an app with Kotlin using Android Studio.  \r\nI want to open a specific URL to check if a value in it is true or false (SmartHome Stuff) and then change the color of a button in my app. When doing this on the main thread Kotlin throws an android.os.NetworkOnMainThreadException.  \r\nSo I created a new thread to do all the URL action over there and it is working (everything fine until here).\r\n\r\nThe problem is that I somehow need to get the value from the second thread into my main thread to change the button color. Or to &quot;get&quot; the button into the second thread and change the button color there.\r\n\r\nI&#180;m pretty new to programming so I&#180;m probably not aware about easy ways of fixing my problem.  \r\nThanks in advance","title":"Access values from another thread? Kotlin/Java","body":"<p>I am programming an app with Kotlin using Android Studio.<br />\nI want to open a specific URL to check if a value in it is true or false (SmartHome Stuff) and then change the color of a button in my app. When doing this on the main thread Kotlin throws an android.os.NetworkOnMainThreadException.<br />\nSo I created a new thread to do all the URL action over there and it is working (everything fine until here).</p>\n<p>The problem is that I somehow need to get the value from the second thread into my main thread to change the button color. Or to &quot;get&quot; the button into the second thread and change the button color there.</p>\n<p>I´m pretty new to programming so I´m probably not aware about easy ways of fixing my problem.<br />\nThanks in advance</p>\n"},{"tags":["java","mysql","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3023214,"reputation":20362,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":1,"creation_date":1689849125,"post_id":76728848,"comment_id":135272853,"body_markdown":"You are embedding `Country`. Does this also have an ID field? (It should not ...)","body":"You are embedding <code>Country</code>. Does this also have an ID field? (It should not ...)"}],"answers":[{"tags":[],"owner":{"account_id":16341513,"reputation":209,"user_id":11802330,"display_name":"Eric"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689921757,"creation_date":1689921757,"answer_id":76735667,"question_id":76728848,"body_markdown":"In your Agency entity comment this line\r\n\r\n    @Column(name=&quot;id&quot;, insertable = false, updatable = false)","title":"Hibernate MappingException: Column &#39;id&#39; is duplicated in mapping for entity &#39;Agency&#39;","body":"<p>In your Agency entity comment this line</p>\n<pre><code>@Column(name=&quot;id&quot;, insertable = false, updatable = false)\n</code></pre>\n"}],"owner":{"account_id":29055833,"reputation":1,"user_id":22257641,"display_name":"Abdessamad_xerox"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":205,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689921757,"creation_date":1689848079,"question_id":76728848,"body_markdown":"I&#39;m developing a Spring Boot application using Hibernate for ORM, and I&#39;m facing an issue with the entity mappings. When I try to run my application, it throws the following exception:\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column &#39;id&#39; is duplicated in mapping for entity &#39;com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency&#39; (use &#39;@Column(insertable=false, updatable=false)&#39; when mapping multiple properties to the same column)\r\n    \r\n    Caused by: org.hibernate.MappingException: Column &#39;id&#39; is duplicated in mapping for entity &#39;com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency&#39; (use &#39;@Column(insertable=false, updatable=false)&#39; when mapping multiple properties to the same column)\r\n    \r\n    Caused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column &#39;id&#39; is duplicated in mapping for entity &#39;com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency&#39; (use &#39;@Column(insertable=false, updatable=false)&#39; when mapping multiple properties to the same column)\r\n\r\nThe issue seems to be related to the Agency entity, which is defined as follows:\r\n\r\n\r\n\r\n```\r\n\r\n\r\n\r\n@Entity\r\n@Table(name=&quot;tr_agency&quot;)\r\n@Data\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class Agency {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    @Column(name=&quot;id&quot;, insertable = false, updatable = false)\r\n\r\n    private long id;\r\n\r\n    @Column(name=&quot;label&quot;)\r\n    private String label;\r\n\r\n    @Column(name=&quot;leave_balance&quot;)\r\n    private Double leave_balance;\r\n\r\n    private LocalDateTime deleted_at;\r\n\r\n    private String code;\r\n\r\n    @Column(name=&quot;has_previous_year_holidays&quot;)\r\n    private Boolean has_previous_year_holidays;\r\n\r\n    @Embedded\r\n    private Country country;\r\n\r\n\r\n}\r\n```\r\n```\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Table(name=&quot;collaborator&quot;)\r\npublic class Collaborator {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    private Long id;\r\n    \r\n//other fields \r\n\r\n\r\n    @ManyToOne(targetEntity = Agency.class)\r\n    @JoinColumn(name=&quot;agency_id&quot;,referencedColumnName = &quot;id&quot;,insertable = false,updatable = false)\r\n    private  Agency agency;\r\n\r\n    @ManyToOne(targetEntity = ServiceType.class)\r\n    @JoinColumn(name=&quot;service_id&quot;,referencedColumnName = &quot;id&quot;)\r\n    private ServiceType serviceType;\r\n\r\n    @ManyToOne(targetEntity = Departement.class)\r\n    @JoinColumn(name=&quot;departement_id&quot;,referencedColumnName = &quot;id&quot;)\r\n    private Departement departement;\r\n\r\n    @ManyToOne(targetEntity = StatutProfessional.class)\r\n    @JoinColumn(name=&quot;statut_professionnel_id&quot;,referencedColumnName = &quot;id&quot;)\r\n    private StatutProfessional statutProfessional;\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n\r\nI don&#39;t where is the problem exactly\r\n\r\n\r\n\r\n","title":"Hibernate MappingException: Column &#39;id&#39; is duplicated in mapping for entity &#39;Agency&#39;","body":"<p>I'm developing a Spring Boot application using Hibernate for ORM, and I'm facing an issue with the entity mappings. When I try to run my application, it throws the following exception:</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'id' is duplicated in mapping for entity 'com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)\n\nCaused by: org.hibernate.MappingException: Column 'id' is duplicated in mapping for entity 'com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)\n\nCaused by: jakarta.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.MappingException: Column 'id' is duplicated in mapping for entity 'com.intelligentadmindashboard.intelligentadmindashboard.domain.Agency' (use '@Column(insertable=false, updatable=false)' when mapping multiple properties to the same column)\n</code></pre>\n<p>The issue seems to be related to the Agency entity, which is defined as follows:</p>\n<pre><code>\n\n\n@Entity\n@Table(name=&quot;tr_agency&quot;)\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class Agency {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;id&quot;, insertable = false, updatable = false)\n\n    private long id;\n\n    @Column(name=&quot;label&quot;)\n    private String label;\n\n    @Column(name=&quot;leave_balance&quot;)\n    private Double leave_balance;\n\n    private LocalDateTime deleted_at;\n\n    private String code;\n\n    @Column(name=&quot;has_previous_year_holidays&quot;)\n    private Boolean has_previous_year_holidays;\n\n    @Embedded\n    private Country country;\n\n\n}\n</code></pre>\n<pre><code>@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Table(name=&quot;collaborator&quot;)\npublic class Collaborator {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    \n//other fields \n\n\n    @ManyToOne(targetEntity = Agency.class)\n    @JoinColumn(name=&quot;agency_id&quot;,referencedColumnName = &quot;id&quot;,insertable = false,updatable = false)\n    private  Agency agency;\n\n    @ManyToOne(targetEntity = ServiceType.class)\n    @JoinColumn(name=&quot;service_id&quot;,referencedColumnName = &quot;id&quot;)\n    private ServiceType serviceType;\n\n    @ManyToOne(targetEntity = Departement.class)\n    @JoinColumn(name=&quot;departement_id&quot;,referencedColumnName = &quot;id&quot;)\n    private Departement departement;\n\n    @ManyToOne(targetEntity = StatutProfessional.class)\n    @JoinColumn(name=&quot;statut_professionnel_id&quot;,referencedColumnName = &quot;id&quot;)\n    private StatutProfessional statutProfessional;\n\n}\n\n</code></pre>\n<p>I don't where is the problem exactly</p>\n"},{"tags":["java","android","dialog"],"owner":{"display_name":"user6413892"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2107,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":0,"score":8,"last_activity_date":1689921596,"creation_date":1464864220,"question_id":37589585,"body_markdown":"Is there any way to dismiss/close/cancel or at least *programatically/automatically* anwer the **class 0 messages** also called **flash messages** in android?  \r\n\r\nClass 0 Message dialog:\r\n\r\n![][1]\r\n\r\nI have gone through the following forums but no definitive answer is given.\r\n\r\n- androidforums.com/threads/class-0-zero-messages.331720/\r\n- www.droidforums.net/threads/can-you-block-class-0-messages.281093/\r\n\r\nThe following software (**Notification History Pro**) claims to have solved this problem.\r\n\r\n- https://play.google.com/store/apps/details?id=com.evanhe.nh \r\n\r\nI have used the free version but it doesn&#39;t provide the &quot;automatically close class 0/ flash message dialog&quot; feature.\r\nI have checked every possible answer on stackoverflow.com but they don&#39;t provide the answer to my question. \r\n\r\n- https://stackoverflow.com/questions/9123125/class-0-sms-flash-sms-on-android.\r\n\r\nI have also tried the following answers on dismissing the **USSD/system dialogs** on android with no avail. It only works for USSD/system dialogs but not for &quot;**class 0 messages**&quot;.\r\n\r\n- stackoverflow.com/questions/24013790/how-to-dismiss-system-dialog-in-android\r\n\r\n- stackoverflow.com/questions/24875914/a-new-way-to-manage-ussd-dialogs-in-android\r\n\r\n- stackoverflow.com/questions/24013790/how-to-dismiss-system-dialog-in-android\r\n\r\n- stackoverflow.com/questions/9908020/how-to-close-cancel-dismiss-a-system-dialog-programmatically-android\r\n\r\nAny help will be highly appreciated.\r\n\r\n**UPDATE**: The pro version of the Android application I referenced solves the problem. That said, I need to implement the feature in my own application. \r\n  [1]: http://i.stack.imgur.com/lH8L9m.png","title":"How to dismiss/close class 0 message dialogs in Android","body":"<p>Is there any way to dismiss/close/cancel or at least <em>programatically/automatically</em> anwer the <strong>class 0 messages</strong> also called <strong>flash messages</strong> in android?  </p>\n\n<p>Class 0 Message dialog:</p>\n\n<p><img src=\"https://i.stack.imgur.com/lH8L9m.png\" alt=\"\"></p>\n\n<p>I have gone through the following forums but no definitive answer is given.</p>\n\n<ul>\n<li>androidforums.com/threads/class-0-zero-messages.331720/</li>\n<li>www.droidforums.net/threads/can-you-block-class-0-messages.281093/</li>\n</ul>\n\n<p>The following software (<strong>Notification History Pro</strong>) claims to have solved this problem.</p>\n\n<ul>\n<li><a href=\"https://play.google.com/store/apps/details?id=com.evanhe.nh\" rel=\"nofollow noreferrer\">https://play.google.com/store/apps/details?id=com.evanhe.nh</a> </li>\n</ul>\n\n<p>I have used the free version but it doesn't provide the \"automatically close class 0/ flash message dialog\" feature.\nI have checked every possible answer on stackoverflow.com but they don't provide the answer to my question. </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9123125/class-0-sms-flash-sms-on-android\">Class 0 SMS (flash SMS) on Android</a>.</li>\n</ul>\n\n<p>I have also tried the following answers on dismissing the <strong>USSD/system dialogs</strong> on android with no avail. It only works for USSD/system dialogs but not for \"<strong>class 0 messages</strong>\".</p>\n\n<ul>\n<li><p>stackoverflow.com/questions/24013790/how-to-dismiss-system-dialog-in-android</p></li>\n<li><p>stackoverflow.com/questions/24875914/a-new-way-to-manage-ussd-dialogs-in-android</p></li>\n<li><p>stackoverflow.com/questions/24013790/how-to-dismiss-system-dialog-in-android</p></li>\n<li><p>stackoverflow.com/questions/9908020/how-to-close-cancel-dismiss-a-system-dialog-programmatically-android</p></li>\n</ul>\n\n<p>Any help will be highly appreciated.</p>\n\n<p><strong>UPDATE</strong>: The pro version of the Android application I referenced solves the problem. That said, I need to implement the feature in my own application. </p>\n"},{"tags":["java","jformattedtextfield","maskformatter"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1467046984,"post_id":38059290,"comment_id":63557733,"body_markdown":"Why not `super(mask);` https://docs.oracle.com/javase/tutorial/java/IandI/super.html","body":"Why not <code>super(mask);</code> <a href=\"https://docs.oracle.com/javase/tutorial/java/IandI/super.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/IandI/super.html</a>"},{"owner":{"account_id":1980373,"reputation":49,"user_id":1777151,"accept_rate":60,"display_name":"james castillo"},"score":0,"creation_date":1467053831,"post_id":38059290,"comment_id":63561440,"body_markdown":"im sorry, I never really knew what super was for. Reading and tesing this out. Thanks!","body":"im sorry, I never really knew what super was for. Reading and tesing this out. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":1980373,"reputation":49,"user_id":1777151,"accept_rate":60,"display_name":"james castillo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689921495,"creation_date":1467104035,"answer_id":38071458,"question_id":38059290,"body_markdown":"    import java.awt.event.KeyEvent;\r\n    import javax.swing.JFormattedTextField;\r\n    import javax.swing.text.MaskFormatter;\r\n    \r\n    public final class JayTimeInput extends JFormattedTextField{\r\n      \r\n\r\n  \r\n    public JayTimeInput(){\r\n        myFormat();\r\n        addKeyListener(new java.awt.event.KeyAdapter() {\r\n            @Override\r\n            public void keyTyped(java.awt.event.KeyEvent evt) {\r\n                verify(evt);\r\n            }\r\n        });\r\n        \r\n    }\r\n    \r\n    public void myFormat() {\r\n        try {\r\n            MaskFormatter format = new MaskFormatter(&quot;##:##&quot;);\r\n            format.setPlaceholderCharacter(&#39;0&#39;);\r\n            this.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(format));\r\n        } catch (java.text.ParseException ex) {\r\n            ex.printStackTrace();\r\n        }\r\n    }\r\n    \r\n    public String getTime(){\r\n        return this.getText();\r\n    }\r\n    \r\n    public void setTime(String x){\r\n        this.setText(x);\r\n    }\r\n    \r\n    public void resetTime(){\r\n        this.setText(&quot;00:00&quot;);\r\n    }\r\n    \r\n    public void setFocus(boolean f){\r\n        this.setFocusable(f);\r\n        this.setVerifyInputWhenFocusTarget(f);\r\n    }\r\n    public void verify(KeyEvent evt){\r\n        try {\r\n                int carret = this.getCaretPosition();\r\n                char c = evt.getKeyChar();\r\n\r\n                if(carret==0){\r\n                    int hour = Integer.parseInt(c+&quot;&quot;);\r\n                    if(hour&gt;1){\r\n                        evt.consume();\r\n                    }\r\n                }\r\n\r\n                if(carret==1){\r\n                    int hour = Integer.parseInt(c+&quot;&quot;);\r\n                    if(hour&gt;2){\r\n                        evt.consume();\r\n                    }\r\n                }\r\n\r\n                if(carret==3){\r\n                    int min = Integer.parseInt(c+&quot;&quot;);\r\n                    if(min&gt;5){\r\n                        evt.consume();\r\n                    }\r\n                }\r\n        } catch (Exception e) {\r\n            //do nothing. nothing to catch since its keyevent\r\n        }\r\n    }\r\n    }","title":"Creating Custom Components - Extending to JFormattedField","body":"<pre><code>import java.awt.event.KeyEvent;\nimport javax.swing.JFormattedTextField;\nimport javax.swing.text.MaskFormatter;\n\npublic final class JayTimeInput extends JFormattedTextField{\n  \n\n\npublic JayTimeInput(){\n    myFormat();\n    addKeyListener(new java.awt.event.KeyAdapter() {\n        @Override\n        public void keyTyped(java.awt.event.KeyEvent evt) {\n            verify(evt);\n        }\n    });\n    \n}\n\npublic void myFormat() {\n    try {\n        MaskFormatter format = new MaskFormatter(&quot;##:##&quot;);\n        format.setPlaceholderCharacter('0');\n        this.setFormatterFactory(new javax.swing.text.DefaultFormatterFactory(format));\n    } catch (java.text.ParseException ex) {\n        ex.printStackTrace();\n    }\n}\n\npublic String getTime(){\n    return this.getText();\n}\n\npublic void setTime(String x){\n    this.setText(x);\n}\n\npublic void resetTime(){\n    this.setText(&quot;00:00&quot;);\n}\n\npublic void setFocus(boolean f){\n    this.setFocusable(f);\n    this.setVerifyInputWhenFocusTarget(f);\n}\npublic void verify(KeyEvent evt){\n    try {\n            int carret = this.getCaretPosition();\n            char c = evt.getKeyChar();\n\n            if(carret==0){\n                int hour = Integer.parseInt(c+&quot;&quot;);\n                if(hour&gt;1){\n                    evt.consume();\n                }\n            }\n\n            if(carret==1){\n                int hour = Integer.parseInt(c+&quot;&quot;);\n                if(hour&gt;2){\n                    evt.consume();\n                }\n            }\n\n            if(carret==3){\n                int min = Integer.parseInt(c+&quot;&quot;);\n                if(min&gt;5){\n                    evt.consume();\n                }\n            }\n    } catch (Exception e) {\n        //do nothing. nothing to catch since its keyevent\n    }\n}\n}\n</code></pre>\n"}],"owner":{"account_id":1980373,"reputation":49,"user_id":1777151,"accept_rate":60,"display_name":"james castillo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1689921495,"creation_date":1467046330,"question_id":38059290,"body_markdown":"&lt;strike&gt;I am currently working on an application and I have a certain requirement for my interface: A time input.\n\nI need my controls to accept 12hrs to 24hrs input using JFormattedTextField and found this:\n\n     MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\n     mask.setPlaceHolderCharacter(&#39;0&#39;);\n\nNow I created a class that extends to a JFormattedTextField\n\n     public class JayTimeInput extends JFormattedTextField{....\n\nnow I peeked inside JFormattedTextField&#39;s source and found something like this:\n     \n    public JFormattedTextField(Object mask){...\n\nmy question is: How do I create my JayTimeInput class that automatically has a mask formatter? I tried declaring it in my constructor but I am not sure about this:\n    \n    public JayTimeInput(){\n         try{\n              MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\n              mask.setPlaceHolderCharacter(&#39;0&#39;);\n              new JFormattedTextField(mask);\n         }catch(Exception e){e.printStackTrace()}\n    }\n\nIve seen examples on how to use MaskFormatter and the only way I found was by declaring it like this:\n\n    MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\n    mask.setPlaceHolderCharacter(&#39;0&#39;);\n    JFormattedTextField jformat = new JFormattedTextField(mask);\n\nIm not sure if my actionlistener was correctly done but I need this to work first.\n\nanyone help me out? im still new in creating my own controls by extending existing swings.&lt;/strike&gt;\n\n**UPDATE:**\n\n  I was looking at the wrong way of customizing my JFormattedTextField. I Should&#39;ve used FormatFactory. Answer code has been posted for anyone who needs it.","title":"Creating Custom Components - Extending to JFormattedField","body":"<p><strike>I am currently working on an application and I have a certain requirement for my interface: A time input.</p>\n<p>I need my controls to accept 12hrs to 24hrs input using JFormattedTextField and found this:</p>\n<pre><code> MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\n mask.setPlaceHolderCharacter('0');\n</code></pre>\n<p>Now I created a class that extends to a JFormattedTextField</p>\n<pre><code> public class JayTimeInput extends JFormattedTextField{....\n</code></pre>\n<p>now I peeked inside JFormattedTextField's source and found something like this:</p>\n<pre><code>public JFormattedTextField(Object mask){...\n</code></pre>\n<p>my question is: How do I create my JayTimeInput class that automatically has a mask formatter? I tried declaring it in my constructor but I am not sure about this:</p>\n<pre><code>public JayTimeInput(){\n     try{\n          MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\n          mask.setPlaceHolderCharacter('0');\n          new JFormattedTextField(mask);\n     }catch(Exception e){e.printStackTrace()}\n}\n</code></pre>\n<p>Ive seen examples on how to use MaskFormatter and the only way I found was by declaring it like this:</p>\n<pre><code>MaskFormatter mask = new MaskFormatter(&quot;##:##&quot;);\nmask.setPlaceHolderCharacter('0');\nJFormattedTextField jformat = new JFormattedTextField(mask);\n</code></pre>\n<p>Im not sure if my actionlistener was correctly done but I need this to work first.</p>\n<p>anyone help me out? im still new in creating my own controls by extending existing swings.</strike></p>\n<p><strong>UPDATE:</strong></p>\n<p>I was looking at the wrong way of customizing my JFormattedTextField. I Should've used FormatFactory. Answer code has been posted for anyone who needs it.</p>\n"},{"tags":["java","mysql","swing","jtable","resultset"],"comments":[{"owner":{"account_id":368268,"reputation":109587,"user_id":714968,"accept_rate":90,"display_name":"mKorbel"},"score":2,"creation_date":1469118537,"post_id":38509422,"comment_id":64417026,"body_markdown":"1. everything inside `doInBackground()` is out of `EDT`, you have to notify GUI inside `publish()` ---&gt; `process()`, `setProcess()` or `done()`, 2. `JTable` != `DefaultListModel` 3. to reset `DefaultListModel`, run `SwingWorker`, where inside `publish() ---&gt; process()`, `setProcess()` or `done()` to add a new `Item` to `DefaultListModel`, nothing esle (clear for me) to your code or description","body":"1. everything inside <code>doInBackground()</code> is out of <code>EDT</code>, you have to notify GUI inside <code>publish()</code> ---&gt; <code>process()</code>, <code>setProcess()</code> or <code>done()</code>, 2. <code>JTable</code> != <code>DefaultListModel</code> 3. to reset <code>DefaultListModel</code>, run <code>SwingWorker</code>, where inside <code>publish() ---&gt; process()</code>, <code>setProcess()</code> or <code>done()</code> to add a new <code>Item</code> to <code>DefaultListModel</code>, nothing esle (clear for me) to your code or description"},{"owner":{"display_name":"user3677640"},"score":0,"creation_date":1469119109,"post_id":38509422,"comment_id":64417361,"body_markdown":"@mKorbel 1) For the rest of the application changes to the GUI from `doInBackground()` have worked. 2) I know the `DefaultListMenu` is what supplies the `JTable` with the information.\n\nIf the problem is because I&#39;m changing the code in the `doInBackground()` function then I&#39;m confused as to why sometimes it works and sometimes it doesn&#39;t.","body":"@mKorbel 1) For the rest of the application changes to the GUI from <code>doInBackground()</code> have worked. 2) I know the <code>DefaultListMenu</code> is what supplies the <code>JTable</code> with the information.  If the problem is because I&#39;m changing the code in the <code>doInBackground()</code> function then I&#39;m confused as to why sometimes it works and sometimes it doesn&#39;t."},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":1,"creation_date":1469126221,"post_id":38509422,"comment_id":64421206,"body_markdown":"It may work _sometimes_, but it is not reliable; more [here](http://stackoverflow.com/a/7158505/230513) and [here](http://stackoverflow.com/a/38499763/230513).","body":"It may work <i>sometimes</i>, but it is not reliable; more <a href=\"http://stackoverflow.com/a/7158505/230513\">here</a> and <a href=\"http://stackoverflow.com/a/38499763/230513\">here</a>."}],"answers":[{"tags":[],"owner":{"display_name":"user3677640"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689921244,"creation_date":1469569242,"answer_id":38600354,"question_id":38509422,"body_markdown":"I have solved the issue by adding the information into the table from the done() function. The code is below\r\n\r\n    SwingWorker&lt;Void, Void&gt; worker = new SwingWorker&lt; Void, Void&gt;() {\r\n        \t\r\n        \tString[] billItems = null;\r\n        \t\r\n        \t@Override\r\n\t\t    public Void doInBackground() {\r\n        \t\t\r\n        \t\tString SQL = &quot;SELECT * FROM AddABill&quot;;\r\n        \t\t\r\n        \t\ttry {\r\n\t\t\t\t\tStatement stmt = GlobalVars.conn.createStatement();\r\n\t\t\t\t\t\r\n\t\t\t\t\tResultSet rs = stmt.executeQuery(SQL);\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Set The Cursor To Last Position\r\n\t\t\t\t\trs.last();\r\n\t\t\t\t\t\r\n\t\t\t\t\tint totalRows = rs.getRow();\r\n\t\t\t\t\t\r\n\t\t\t\t\tbillItems = new String[totalRows];\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Set The Cursor Back To The Start\r\n\t\t\t\t\trs.beforeFirst();\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile(rs.next()){\r\n\t\t\t\t\t\tint rowNum = rs.getRow() - 1;\r\n\t\t\t\t\t\tbillItems[rowNum] = rs.getString(1) + &quot; - &quot; + rs.getString(2);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\trs.close();\r\n\t\t\t\t\tstmt.close();\r\n\t\t\t\t}\r\n        \t\t\r\n        \t\tcatch (SQLException e) {\r\n\t\t\t\t\tSystem.out.println(&quot;An Error Was Detected! :/&quot;);\r\n\t\t\t\t}\r\n        \t\t\r\n        \t\treturn null;\r\n        \t}\r\n        \t\r\n        \t@Override\r\n\t\t    public void done(){\r\n        \t\tmenuOptions.clear();\r\n        \t\t\r\n        \t\tfor(int i = 0; i &lt; billItems.length; i++){\r\n        \t\t\tmenuOptions.addElement(billItems[i]);\r\n        \t\t}\r\n        \t\t\r\n        \t\tloadingGif.setVisible(false);\r\n        \t}\r\n        \t\r\n        };","title":"Result Set not always being shown in the JTable","body":"<p>I have solved the issue by adding the information into the table from the done() function. The code is below</p>\n<pre><code>SwingWorker&lt;Void, Void&gt; worker = new SwingWorker&lt; Void, Void&gt;() {\n        \n        String[] billItems = null;\n        \n        @Override\n        public Void doInBackground() {\n            \n            String SQL = &quot;SELECT * FROM AddABill&quot;;\n            \n            try {\n                Statement stmt = GlobalVars.conn.createStatement();\n                \n                ResultSet rs = stmt.executeQuery(SQL);\n                \n                //Set The Cursor To Last Position\n                rs.last();\n                \n                int totalRows = rs.getRow();\n                \n                billItems = new String[totalRows];\n                \n                //Set The Cursor Back To The Start\n                rs.beforeFirst();\n                \n                while(rs.next()){\n                    int rowNum = rs.getRow() - 1;\n                    billItems[rowNum] = rs.getString(1) + &quot; - &quot; + rs.getString(2);\n                }\n                \n                rs.close();\n                stmt.close();\n            }\n            \n            catch (SQLException e) {\n                System.out.println(&quot;An Error Was Detected! :/&quot;);\n            }\n            \n            return null;\n        }\n        \n        @Override\n        public void done(){\n            menuOptions.clear();\n            \n            for(int i = 0; i &lt; billItems.length; i++){\n                menuOptions.addElement(billItems[i]);\n            }\n            \n            loadingGif.setVisible(false);\n        }\n        \n    };\n</code></pre>\n"}],"owner":{"display_name":"user3677640"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":38600354,"answer_count":1,"score":0,"last_activity_date":1689921244,"creation_date":1469117944,"question_id":38509422,"body_markdown":"I am creating an application in Java which retrieves some information from a MySQL database and then displays it in a JTable on the screen.\r\n\r\nThe code I am using to get and put the information into a DefaultListModel&lt;&gt; is shown below. The DefaultListModel&lt;&gt; is then fed to the JTable which displays the information onto the screen.\r\n\r\n    SwingWorker&lt;Void, Void&gt; worker = new SwingWorker&lt; Void, Void&gt;() {\r\n        \t\r\n        \t@Override\r\n\t\t    public Void doInBackground() {\r\n        \t\t\r\n        \t\tString SQL = &quot;SELECT * FROM AddABill&quot;;\r\n        \t\t\r\n        \t\ttry {\r\n\t\t\t\t\tStatement stmt = GlobalVars.conn.createStatement();\r\n\t\t\t\t\t\r\n\t\t\t\t\tResultSet rs = stmt.executeQuery(SQL);\r\n\t\t\t\t\t\r\n\t\t\t\t\tmenuOptions.clear();\r\n\t\t\t\t\t\r\n\t\t\t\t\twhile(rs.next()){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmenuOptions.addElement(rs.getString(1) + &quot; - &quot; + rs.getString(2));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\trs.close();\r\n\t\t\t\t\tstmt.close();\r\n\t\t\t\t}\r\n        \t\t\r\n        \t\tcatch (SQLException e) {\r\n\t\t\t\t\tSystem.out.println(&quot;An Error Was Detected! :/&quot;);\r\n\t\t\t\t}\r\n        \t\t\r\n        \t\treturn null;\r\n        \t}\r\n        \t\r\n        \t@Override\r\n\t\t    public void done(){\r\n        \t\tloadingGif.setVisible(false);\r\n        \t}\r\n        \t\r\n        };\r\n        \r\n        worker.execute();\r\n\r\nThe issue I am having is that sometimes the information is displayed onto the screen and sometimes it isn&#39;t. Since there is no change in the query used I am assuming it is something to do with the MySQL connection.\r\n\r\nThe JTable and MenuOptions are setup like this\r\n\r\n    menuOptions = new DefaultListModel&lt;&gt;();\r\n    menuOptions.addElement(&quot;&quot;);\r\n        \r\n    menuList = new JList&lt;&gt;(menuOptions);\r\n    menuList.setFont(new Font(&quot;Myriad Hebrew&quot;, Font.PLAIN, 32));\r\n    menuList.setBackground(Color.decode(&quot;#005952&quot;));\r\n    menuList.setForeground(Color.decode(&quot;#BEC423&quot;));\r\n    menuList.setSelectionBackground(Color.decode(&quot;#660033&quot;));\r\n    menuList.setSelectionForeground(Color.decode(&quot;#FFFFFF&quot;));\r\n\r\nSo the question I am wondering is how can I make sure that the information is always displayed on the screen. A picture of when it is displayed and not displayed is shown below.\r\n\r\nDisplayed:\r\n\r\n[![Displayed][1]][1]\r\n\r\nNot Displayed:\r\n\r\n[![Not Displayed][2]][2]\r\n\r\nOn a final note to get the information to show I have to keep on re-running the code until it is eventually shown.\r\n\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/62ZBt.png\r\n  [2]: http://i.stack.imgur.com/j6ba1.png","title":"Result Set not always being shown in the JTable","body":"<p>I am creating an application in Java which retrieves some information from a MySQL database and then displays it in a JTable on the screen.</p>\n<p>The code I am using to get and put the information into a DefaultListModel&lt;&gt; is shown below. The DefaultListModel&lt;&gt; is then fed to the JTable which displays the information onto the screen.</p>\n<pre><code>SwingWorker&lt;Void, Void&gt; worker = new SwingWorker&lt; Void, Void&gt;() {\n        \n        @Override\n        public Void doInBackground() {\n            \n            String SQL = &quot;SELECT * FROM AddABill&quot;;\n            \n            try {\n                Statement stmt = GlobalVars.conn.createStatement();\n                \n                ResultSet rs = stmt.executeQuery(SQL);\n                \n                menuOptions.clear();\n                \n                while(rs.next()){\n                    \n                    menuOptions.addElement(rs.getString(1) + &quot; - &quot; + rs.getString(2));\n                }\n                \n                rs.close();\n                stmt.close();\n            }\n            \n            catch (SQLException e) {\n                System.out.println(&quot;An Error Was Detected! :/&quot;);\n            }\n            \n            return null;\n        }\n        \n        @Override\n        public void done(){\n            loadingGif.setVisible(false);\n        }\n        \n    };\n    \n    worker.execute();\n</code></pre>\n<p>The issue I am having is that sometimes the information is displayed onto the screen and sometimes it isn't. Since there is no change in the query used I am assuming it is something to do with the MySQL connection.</p>\n<p>The JTable and MenuOptions are setup like this</p>\n<pre><code>menuOptions = new DefaultListModel&lt;&gt;();\nmenuOptions.addElement(&quot;&quot;);\n    \nmenuList = new JList&lt;&gt;(menuOptions);\nmenuList.setFont(new Font(&quot;Myriad Hebrew&quot;, Font.PLAIN, 32));\nmenuList.setBackground(Color.decode(&quot;#005952&quot;));\nmenuList.setForeground(Color.decode(&quot;#BEC423&quot;));\nmenuList.setSelectionBackground(Color.decode(&quot;#660033&quot;));\nmenuList.setSelectionForeground(Color.decode(&quot;#FFFFFF&quot;));\n</code></pre>\n<p>So the question I am wondering is how can I make sure that the information is always displayed on the screen. A picture of when it is displayed and not displayed is shown below.</p>\n<p>Displayed:</p>\n<p><a href=\"https://i.stack.imgur.com/62ZBt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/62ZBt.png\" alt=\"Displayed\" /></a></p>\n<p>Not Displayed:</p>\n<p><a href=\"https://i.stack.imgur.com/j6ba1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j6ba1.png\" alt=\"Not Displayed\" /></a></p>\n<p>On a final note to get the information to show I have to keep on re-running the code until it is eventually shown.</p>\n"},{"tags":["java","maven","allure"],"comments":[{"owner":{"account_id":4853449,"reputation":2312,"user_id":3915166,"display_name":"Dmitry Baev"},"score":0,"creation_date":1500118327,"post_id":45111998,"comment_id":77206520,"body_markdown":"How are you run your tests?","body":"How are you run your tests?"},{"owner":{"account_id":3992044,"reputation":339,"user_id":3290656,"accept_rate":50,"display_name":"user3290656"},"score":0,"creation_date":1500135718,"post_id":45111998,"comment_id":77211438,"body_markdown":"mvn clean install exec:java site","body":"mvn clean install exec:java site"}],"answers":[{"tags":[],"owner":{"account_id":4853449,"reputation":2312,"user_id":3915166,"display_name":"Dmitry Baev"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1503751333,"creation_date":1503751333,"answer_id":45895491,"question_id":45111998,"body_markdown":"Create a file `allure.properties` under your test resources (usually it is `src/test/resources`) with the following content:\r\n\r\n    allure.results.directory=target/allure-results","title":"allure-results directory not generated under target folder","body":"<p>Create a file <code>allure.properties</code> under your test resources (usually it is <code>src/test/resources</code>) with the following content:</p>\n\n<pre><code>allure.results.directory=target/allure-results\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13068375,"reputation":71,"user_id":9442860,"display_name":"Tomahawks"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1551467565,"creation_date":1551467565,"answer_id":54950915,"question_id":45111998,"body_markdown":"Try out this solution - https://github.com/allure-framework/allure-maven/issues/30#issuecomment-276441970\r\n\r\nIn systemPropertyVariables create the following entry:\r\n\r\n`&lt;allure.results.directory&gt;target/allure-results&lt;/allure.results.directory&gt;`\r\n","title":"allure-results directory not generated under target folder","body":"<p>Try out this solution - <a href=\"https://github.com/allure-framework/allure-maven/issues/30#issuecomment-276441970\" rel=\"noreferrer\">https://github.com/allure-framework/allure-maven/issues/30#issuecomment-276441970</a></p>\n\n<p>In systemPropertyVariables create the following entry:</p>\n\n<p><code>&lt;allure.results.directory&gt;target/allure-results&lt;/allure.results.directory&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":1260556,"reputation":1859,"user_id":1218956,"display_name":"Lauri"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1639749299,"creation_date":1639749299,"answer_id":70394269,"question_id":45111998,"body_markdown":"If you have ***allure-results*** directory generated in your main project directory (instead being under ***./target***) as I did, then you want to run ***allure:report*** form commandline, then you might have luck with following command\r\n\r\n    mvn allure:report -Dallure.results.directory=../allure-results\r\n\r\nHere i use mac/linux directory separator, so on windows you might need backward slash instead.","title":"allure-results directory not generated under target folder","body":"<p>If you have <em><strong>allure-results</strong></em> directory generated in your main project directory (instead being under <em><strong>./target</strong></em>) as I did, then you want to run <em><strong>allure:report</strong></em> form commandline, then you might have luck with following command</p>\n<pre><code>mvn allure:report -Dallure.results.directory=../allure-results\n</code></pre>\n<p>Here i use mac/linux directory separator, so on windows you might need backward slash instead.</p>\n"},{"tags":[],"owner":{"account_id":7453273,"reputation":1,"user_id":5667285,"display_name":"Manjunath T.N."},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670599199,"creation_date":1670599111,"answer_id":74745019,"question_id":45111998,"body_markdown":"Sometimes, there might also be a case that in your allure.properties, the path that you have written for ```allure.results.directory``` has a prefix &quot;/&quot;.\r\nRemove that and try again.\r\n \r\nMeaning, \r\n\r\n```allure.results.directory=/target/allure-results```\r\n\r\nshould be changed to \r\n\r\n```allure.results.directory=target/allure-results```","title":"allure-results directory not generated under target folder","body":"<p>Sometimes, there might also be a case that in your allure.properties, the path that you have written for <code>allure.results.directory</code> has a prefix &quot;/&quot;.\nRemove that and try again.</p>\n<p>Meaning,</p>\n<p><code>allure.results.directory=/target/allure-results</code></p>\n<p>should be changed to</p>\n<p><code>allure.results.directory=target/allure-results</code></p>\n"},{"tags":[],"owner":{"account_id":25480120,"reputation":9,"user_id":19276625,"display_name":"Vlad Boikov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689921151,"creation_date":1689921151,"answer_id":76735612,"question_id":45111998,"body_markdown":"I moved allure.properties from &quot;src.test.java&quot; to &quot;src.test&quot; and now allure-results generating in /target/allure-results. So you may try to move allure.properties to another folder","title":"allure-results directory not generated under target folder","body":"<p>I moved allure.properties from &quot;src.test.java&quot; to &quot;src.test&quot; and now allure-results generating in /target/allure-results. So you may try to move allure.properties to another folder</p>\n"}],"owner":{"account_id":3992044,"reputation":339,"user_id":3290656,"accept_rate":50,"display_name":"user3290656"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34884,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":5,"score":13,"last_activity_date":1689921151,"creation_date":1500068627,"question_id":45111998,"body_markdown":"I upgraded to latest `&lt;allure2.version&gt;2.0-BETA14` in my Maven project. `test-results` folder is getting generated under the project directory instead of `target` directory. \r\n\r\nI have gone through the allure documentation website and they have suggest to add `&lt;allure.results.directory&gt;` in the system path to override but it doesn&#39;t seem to be working. \r\n\r\nI am building my TestNG suite programatically. This was working absolutely fine with allure1.\r\n\r\nBelow is my `pom.xml`: \r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n\t&lt;groupId&gt;com.mycompany.test.projectA&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;scarpbook&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n\t&lt;name&gt;scarpbook&lt;/name&gt;\r\n\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n\t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n\r\n\t\t&lt;testng.version&gt;6.10&lt;/testng.version&gt;\r\n\r\n\t\t&lt;surefire.plugin.version&gt;2.19.1&lt;/surefire.plugin.version&gt;\r\n\t\t&lt;allure.version&gt;2.0-BETA14&lt;/allure.version&gt;\r\n\t\t&lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\r\n\t\t&lt;allure.results.directory&gt;target/allure-results&lt;/allure.results.directory&gt;\r\n\t\t&lt;allure.report.directory&gt;target/allure-report&lt;/allure.report.directory&gt;\r\n\t\t&lt;tms&gt;\r\n\t\t\thttps://github.com/allure-framework/allure-docs/issues/{}\r\n\t\t&lt;/tms&gt;\r\n\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.mycompany.testlib&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lib&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${testng.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;${allure.version}&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.7.21&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\r\n\t\t&lt;plugins&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n\t\t\t\t&lt;executions&gt;\r\n\t\t\t\t\t&lt;execution&gt;\r\n\t\t\t\t\t\t&lt;goals&gt;\r\n\t\t\t\t\t\t\t&lt;goal&gt;exec&lt;/goal&gt;\r\n\t\t\t\t\t\t&lt;/goals&gt;\r\n\t\t\t\t\t&lt;/execution&gt;\r\n\t\t\t\t&lt;/executions&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;executable&gt;java&lt;/executable&gt;\r\n\t\t\t\t\t&lt;mainClass&gt;com.mycompany.testlib.testrunner&lt;/mainClass&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.18.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\r\n\t\t\t\t\t&lt;argLine&gt;\r\n\t\t\t\t\t\t-javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\r\n\t\t\t\t\t&lt;/argLine&gt;\r\n\t\t\t\t\t &lt;systemProperties&gt;\r\n                    \t&lt;property&gt;\r\n                        \t&lt;name&gt;allure.results.directory&lt;/name&gt;\r\n                        \t&lt;value&gt;${allure.results.directory}&lt;/value&gt;\r\n                    \t&lt;/property&gt;\r\n                    &lt;/systemProperties&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;dependencies&gt;\r\n\t\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t\t&lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n\t\t\t\t\t\t&lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;/dependencies&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\t&lt;reporting&gt;\r\n\t\t&lt;excludeDefaults&gt;true&lt;/excludeDefaults&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;2.8&lt;/version&gt;\r\n\t\t\t\t    &lt;configuration&gt;\r\n            \t\t\t&lt;outputDirectory&gt;${basedir}/target/allure-reports/&lt;/outputDirectory&gt;\r\n            \t\t\t&lt;allureResultsDirectory&gt;${basedir}/target/allure-results&lt;/allureResultsDirectory&gt;\r\n        \t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/reporting&gt;\r\n\r\n&lt;/project&gt;\r\n","title":"allure-results directory not generated under target folder","body":"<p>I upgraded to latest <code>&lt;allure2.version&gt;2.0-BETA14</code> in my Maven project. <code>test-results</code> folder is getting generated under the project directory instead of <code>target</code> directory. </p>\n\n<p>I have gone through the allure documentation website and they have suggest to add <code>&lt;allure.results.directory&gt;</code> in the system path to override but it doesn't seem to be working. </p>\n\n<p>I am building my TestNG suite programatically. This was working absolutely fine with allure1.</p>\n\n<p>Below is my <code>pom.xml</code>: </p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n&lt;groupId&gt;com.mycompany.test.projectA&lt;/groupId&gt;\n&lt;artifactId&gt;scarpbook&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;name&gt;scarpbook&lt;/name&gt;\n&lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n\n    &lt;testng.version&gt;6.10&lt;/testng.version&gt;\n\n    &lt;surefire.plugin.version&gt;2.19.1&lt;/surefire.plugin.version&gt;\n    &lt;allure.version&gt;2.0-BETA14&lt;/allure.version&gt;\n    &lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\n    &lt;allure.results.directory&gt;target/allure-results&lt;/allure.results.directory&gt;\n    &lt;allure.report.directory&gt;target/allure-report&lt;/allure.report.directory&gt;\n    &lt;tms&gt;\n        https://github.com/allure-framework/allure-docs/issues/{}\n    &lt;/tms&gt;\n\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mycompany.testlib&lt;/groupId&gt;\n        &lt;artifactId&gt;lib&lt;/artifactId&gt;\n        &lt;version&gt;1.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;${testng.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n        &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\n        &lt;version&gt;${allure.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.7.21&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n\n    &lt;plugins&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n            &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;exec&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n            &lt;configuration&gt;\n                &lt;executable&gt;java&lt;/executable&gt;\n                &lt;mainClass&gt;com.mycompany.testlib.testrunner&lt;/mainClass&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.18.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;testFailureIgnore&gt;true&lt;/testFailureIgnore&gt;\n                &lt;argLine&gt;\n                    -javaagent:\"${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar\"\n                &lt;/argLine&gt;\n                 &lt;systemProperties&gt;\n                    &lt;property&gt;\n                        &lt;name&gt;allure.results.directory&lt;/name&gt;\n                        &lt;value&gt;${allure.results.directory}&lt;/value&gt;\n                    &lt;/property&gt;\n                &lt;/systemProperties&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n                    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n                    &lt;version&gt;${aspectj.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;reporting&gt;\n    &lt;excludeDefaults&gt;true&lt;/excludeDefaults&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n            &lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\n            &lt;version&gt;2.8&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;outputDirectory&gt;${basedir}/target/allure-reports/&lt;/outputDirectory&gt;\n                    &lt;allureResultsDirectory&gt;${basedir}/target/allure-results&lt;/allureResultsDirectory&gt;\n                &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/reporting&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1507939157,"post_id":46739110,"comment_id":80425745,"body_markdown":"You&#39;ve used a KPA that is available in BouncyCastle but not in JSSE, and the keytool only uses JSSE. Find a compatible KPA.","body":"You&#39;ve used a KPA that is available in BouncyCastle but not in JSSE, and the keytool only uses JSSE. Find a compatible KPA."},{"owner":{"account_id":71784,"reputation":28710,"user_id":207524,"accept_rate":78,"display_name":"Crystal"},"score":0,"creation_date":1507940209,"post_id":46739110,"comment_id":80425928,"body_markdown":"@EJP sorry for the dumb question, but what is KPA? I got most of that code from a tutorial","body":"@EJP sorry for the dumb question, but what is KPA? I got most of that code from a tutorial"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1507942924,"post_id":46739110,"comment_id":80426387,"body_markdown":"Key Protection Algorithm, as mentioned in the error message.","body":"Key Protection Algorithm, as mentioned in the error message."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1507980858,"post_id":46739110,"comment_id":80434121,"body_markdown":"@EJP: I don&#39;t see how; posted code uses BCprov to create the _cert_, but autoselect for KeyStore JKS -- and BCprov doesn&#39;t provide JKS, only SUN does. Did you really mean JSSE specifically, or JCE? Historically SunJSSE provides PKCS12 but not JKS; I don&#39;t know if this changes in j9 when pkcs12 becomes &#39;preferred&#39;.","body":"@EJP: I don&#39;t see how; posted code uses BCprov to create the <i>cert</i>, but autoselect for KeyStore JKS -- and BCprov doesn&#39;t provide JKS, only SUN does. Did you really mean JSSE specifically, or JCE? Historically SunJSSE provides PKCS12 but not JKS; I don&#39;t know if this changes in j9 when pkcs12 becomes &#39;preferred&#39;."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1507981335,"post_id":46739110,"comment_id":80434273,"body_markdown":"(0) From code it&#39;s just as easy to write P12 as JKS, as I showed [on your previous Q](https://stackoverflow.com/questions/46657809/cannot-open-pkcs12-store-because-of-password) (1) have you changed your JRE/lib/security/java.security file, or does anything in your code configure a provider other than the Sun/Oracle ones and BC? (2) if you do this more than once, issuing multiple certs from the same CA with the same serial is a very bad idea (3) extkeyusage=clientauth means SSL/TLS client which _only_ signs so keyusage other than digSign is useless ...","body":"(0) From code it&#39;s just as easy to write P12 as JKS, as I showed <a href=\"https://stackoverflow.com/questions/46657809/cannot-open-pkcs12-store-because-of-password\">on your previous Q</a> (1) have you changed your JRE/lib/security/java.security file, or does anything in your code configure a provider other than the Sun/Oracle ones and BC? (2) if you do this more than once, issuing multiple certs from the same CA with the same serial is a very bad idea (3) extkeyusage=clientauth means SSL/TLS client which <i>only</i> signs so keyusage other than digSign is useless ..."},{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1507981904,"post_id":46739110,"comment_id":80434431,"body_markdown":"... (4) your command doesn&#39;t include -srcstorepass which means keytool will prompt for it, but you don&#39;t indicate how you handle that prompting (5) your command does specify -deststorepass clientName which is presumably not secret (a bad idea) and different from the key password (a worse idea) (6) there&#39;s no need to specify -srcalias and -destalias for a file with only one entry. ... but none of those explain the quite weird error you got. If the problem occurs with a throwaway key can you post that file somewhere readable?","body":"... (4) your command doesn&#39;t include -srcstorepass which means keytool will prompt for it, but you don&#39;t indicate how you handle that prompting (5) your command does specify -deststorepass clientName which is presumably not secret (a bad idea) and different from the key password (a worse idea) (6) there&#39;s no need to specify -srcalias and -destalias for a file with only one entry. ... but none of those explain the quite weird error you got. If the problem occurs with a throwaway key can you post that file somewhere readable?"}],"answers":[{"tags":[],"owner":{"account_id":11967453,"reputation":87,"user_id":8756729,"display_name":"rodriguesf53"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1507973713,"creation_date":1507973713,"answer_id":46743030,"question_id":46739110,"body_markdown":"I would like you to the following steps (suppose the name of the jks file is abc.jks)\r\n\r\n 1. Paste the abc.jks file in the bin folder of java where keytool.exe file is present (e.g. C:\\Program Files (x86)\\Java\\jre1.8.0_121\\bin)\r\n 2. Run this command `keytool -keystore abc.jks -list -v` and enter the password\r\n 3. Now you will need to check the following content in it\r\n       A. Entry type (It should be private, if it is not a then you don&#39;t have the key)\r\n       B. Certificate chain (It should be 3, if it is one then you need to import the CA certificates)\r\n\r\nyou can confirm the same in the image\r\n[![enter image description here][1]][1]\r\n\r\nYou can use the this command to convert the jks to pfx `keytool -importkeystore -srckeystore abc.jks -srcstoretype jks -destkeystore xyz.pfx -deststoretype pkcs12` (I will recommend to paste the abc.jks in the bin folder of java) at the end **you need to change the extension to P12**\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/X58vt.jpg","title":"Key protection algorithm not found: java.security.KeyStoreException: Certificate chain is not validate","body":"<p>I would like you to the following steps (suppose the name of the jks file is abc.jks)</p>\n\n<ol>\n<li>Paste the abc.jks file in the bin folder of java where keytool.exe file is present (e.g. C:\\Program Files (x86)\\Java\\jre1.8.0_121\\bin)</li>\n<li>Run this command <code>keytool -keystore abc.jks -list -v</code> and enter the password</li>\n<li>Now you will need to check the following content in it\n   A. Entry type (It should be private, if it is not a then you don't have the key)\n   B. Certificate chain (It should be 3, if it is one then you need to import the CA certificates)</li>\n</ol>\n\n<p>you can confirm the same in the image\n<a href=\"https://i.stack.imgur.com/X58vt.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X58vt.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>You can use the this command to convert the jks to pfx <code>keytool -importkeystore -srckeystore abc.jks -srcstoretype jks -destkeystore xyz.pfx -deststoretype pkcs12</code> (I will recommend to paste the abc.jks in the bin folder of java) at the end <strong>you need to change the extension to P12</strong></p>\n"},{"tags":[],"owner":{"account_id":10155056,"reputation":61,"user_id":9404749,"display_name":"jm009"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1523095608,"creation_date":1523093896,"answer_id":49705934,"question_id":46739110,"body_markdown":"I have the same exception, trying to programatically fill a key store.\r\n\r\nI tracked the problem down to [sun.security.pkcs12.PKCS12KeyStore](https://github.com/dmlloyd/openjdk/blob/jdk9/jdk9/jdk/src/java.base/share/classes/sun/security/pkcs12/PKCS12KeyStore.java)\r\n\r\nIn method `setKeyEntry`\r\n\r\n                if (chain != null) {\r\n                    // validate cert-chain\r\n                    if ((chain.length &gt; 1) &amp;&amp; (!validateChain(chain)))\r\n                       throw new KeyStoreException(&quot;Certificate chain is &quot; +\r\n                                                &quot;not valid&quot;);\r\n\r\nMethod `validateChain`\r\n\r\n    private boolean validateChain(Certificate[] certChain)\r\n    {\r\n        for (int i = 0; i &lt; certChain.length-1; i++) {\r\n            X500Principal issuerDN =\r\n                ((X509Certificate)certChain[i]).getIssuerX500Principal();\r\n            X500Principal subjectDN =\r\n                ((X509Certificate)certChain[i+1]).getSubjectX500Principal();\r\n            if (!(issuerDN.equals(subjectDN)))\r\n                return false;\r\n        }\r\n    \r\n\r\n        // Check for loops in the chain. If there are repeated certs,\r\n        // the Set of certs in the chain will contain fewer certs than\r\n        // the chain\r\n        Set&lt;Certificate&gt; set = new HashSet&lt;&gt;(Arrays.asList(certChain));\r\n        return set.size() == certChain.length;\r\n    }\r\n\r\nSo check for intermediateCredential and rootCredential.","title":"Key protection algorithm not found: java.security.KeyStoreException: Certificate chain is not validate","body":"<p>I have the same exception, trying to programatically fill a key store.</p>\n\n<p>I tracked the problem down to <a href=\"https://github.com/dmlloyd/openjdk/blob/jdk9/jdk9/jdk/src/java.base/share/classes/sun/security/pkcs12/PKCS12KeyStore.java\" rel=\"nofollow noreferrer\">sun.security.pkcs12.PKCS12KeyStore</a></p>\n\n<p>In method <code>setKeyEntry</code></p>\n\n<pre><code>            if (chain != null) {\n                // validate cert-chain\n                if ((chain.length &gt; 1) &amp;&amp; (!validateChain(chain)))\n                   throw new KeyStoreException(\"Certificate chain is \" +\n                                            \"not valid\");\n</code></pre>\n\n<p>Method <code>validateChain</code></p>\n\n<pre><code>private boolean validateChain(Certificate[] certChain)\n{\n    for (int i = 0; i &lt; certChain.length-1; i++) {\n        X500Principal issuerDN =\n            ((X509Certificate)certChain[i]).getIssuerX500Principal();\n        X500Principal subjectDN =\n            ((X509Certificate)certChain[i+1]).getSubjectX500Principal();\n        if (!(issuerDN.equals(subjectDN)))\n            return false;\n    }\n\n\n    // Check for loops in the chain. If there are repeated certs,\n    // the Set of certs in the chain will contain fewer certs than\n    // the chain\n    Set&lt;Certificate&gt; set = new HashSet&lt;&gt;(Arrays.asList(certChain));\n    return set.size() == certChain.length;\n}\n</code></pre>\n\n<p>So check for intermediateCredential and rootCredential.</p>\n"},{"tags":[],"owner":{"account_id":2492806,"reputation":404,"user_id":2169951,"accept_rate":83,"display_name":"M. Gopal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689921110,"creation_date":1689921110,"answer_id":76735607,"question_id":46739110,"body_markdown":"For me the order how I added the was the issue, By maintaining \r\n&quot;leaf-&gt; intermediate-&gt; root&quot; order everything was working fine","title":"Key protection algorithm not found: java.security.KeyStoreException: Certificate chain is not validate","body":"<p>For me the order how I added the was the issue, By maintaining\n&quot;leaf-&gt; intermediate-&gt; root&quot; order everything was working fine</p>\n"}],"owner":{"account_id":71784,"reputation":28710,"user_id":207524,"accept_rate":78,"display_name":"Crystal"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11517,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1689921110,"creation_date":1507935830,"question_id":46739110,"body_markdown":"I&#39;m getting this error when I try to create a JKS file, write it to disk, then run keytool to convert it to a P12.  The reason I&#39;m going this route is because I cannot get a P12 that works for iOS in code (not a crypto person).  There was enough code out there to create a JKS.  To create my end credential, I&#39;m doing this:\r\n\r\n\tpublic X509Certificate buildEndEntityCert(PublicKey entityKey, PrivateKey caKey, X509Certificate caCert, String clientName)\r\n            throws Exception {\r\n        String name = &quot;CN=&quot; + clientName;\r\n        X509v3CertificateBuilder certBldr = new JcaX509v3CertificateBuilder(\r\n                caCert.getSubjectX500Principal(),\r\n                BigInteger.ONE,\r\n                new Date(System.currentTimeMillis()),\r\n                new Date(System.currentTimeMillis() + VALIDITY_PERIOD),\r\n                new X500Principal(name),\r\n                entityKey);\r\n\r\n        JcaX509ExtensionUtils extUtils = new JcaX509ExtensionUtils();\r\n\r\n        certBldr.addExtension(Extension.authorityKeyIdentifier, false, extUtils.createAuthorityKeyIdentifier(caCert))\r\n                .addExtension(Extension.subjectKeyIdentifier, false, extUtils.createSubjectKeyIdentifier(entityKey))\r\n                .addExtension(Extension.basicConstraints, false, new BasicConstraints(false))\r\n                .addExtension(Extension.keyUsage, false, new KeyUsage(KeyUsage.digitalSignature | KeyUsage.keyEncipherment | KeyUsage.nonRepudiation))\r\n                .addExtension(Extension.extendedKeyUsage, false, new ExtendedKeyUsage(KeyPurposeId.id_kp_clientAuth));\r\n\r\n        ContentSigner signer = new JcaContentSignerBuilder(&quot;SHA256withRSA&quot;).setProvider(&quot;BC&quot;).build(caKey);\r\n\r\n        return new JcaX509CertificateConverter().setProvider(&quot;BC&quot;).getCertificate(certBldr.build(signer));\r\n    }\r\n\r\nI call that method and create the JKS like this:\r\n\r\n\tKeyPair endPair = generateRSAKeyPair(2048);\r\n    X509Certificate endCert = buildEndEntityCert(endPair.getPublic(), intermediateCredential.getPrivateKey(), intermediateCredential.getCertificate(), clientName);  // intermediateCredential and rootCredential are properties of this class that get loaded when the app starts up\r\n    X500PrivateCredential endCredential = new X500PrivateCredential(endCert, endPair.getPrivate(), clientName);\r\n\r\n    KeyStore store = KeyStore.getInstance(&quot;JKS&quot;);\r\n    store.load(null, null);\r\n    store.setKeyEntry(clientName, endCredential.getPrivateKey(), &quot;secret&quot;.toCharArray(),\r\n            new Certificate[]{\r\n                    endCredential.getCertificate(),\r\n                    intermediateCredential.getCertificate(),\r\n                    rootCredential.getCertificate()\r\n            });\r\n    store.store(new FileOutputStream(clientName + &quot;.jks&quot;), &quot;secret&quot;.toCharArray());\r\n\r\nThen when I run keytool from ProcessBuilder:\r\n\r\n    &quot;C:\\\\Program Files\\\\Java\\\\jdk1.7.0_80\\\\bin\\\\keytool&quot;,     \r\n                    &quot;-importkeystore&quot;,\r\n                    &quot;-srckeystore&quot;,\r\n                    clientName + &quot;.jks&quot;,\r\n                    &quot;-destkeystore&quot;,\r\n                    clientName + &quot;.p12&quot;,\r\n                    &quot;-srcstoretype&quot;, &quot;JKS&quot;,\r\n                    &quot;-deststoretype&quot;, &quot;PKCS12&quot;,\r\n                    &quot;-deststorepass&quot;,\r\n                    clientName,\r\n                    &quot;-srcalias&quot;,\r\n                    clientName,\r\n                    &quot;-destalias&quot;,\r\n                    clientName\r\n\r\nI get:\r\n\r\n&gt; Problem importing entry for alias CLIENT_NAME: java.security.KeyStoreException: Key protection  algorithm not found: java.security.KeyStoreException: Certificate chain is not validate.\r\n\r\nI tried searching for this but did not find much info.  What does this mean or am  I am doing something wrong?\r\n","title":"Key protection algorithm not found: java.security.KeyStoreException: Certificate chain is not validate","body":"<p>I'm getting this error when I try to create a JKS file, write it to disk, then run keytool to convert it to a P12.  The reason I'm going this route is because I cannot get a P12 that works for iOS in code (not a crypto person).  There was enough code out there to create a JKS.  To create my end credential, I'm doing this:</p>\n\n<pre><code>public X509Certificate buildEndEntityCert(PublicKey entityKey, PrivateKey caKey, X509Certificate caCert, String clientName)\n        throws Exception {\n    String name = \"CN=\" + clientName;\n    X509v3CertificateBuilder certBldr = new JcaX509v3CertificateBuilder(\n            caCert.getSubjectX500Principal(),\n            BigInteger.ONE,\n            new Date(System.currentTimeMillis()),\n            new Date(System.currentTimeMillis() + VALIDITY_PERIOD),\n            new X500Principal(name),\n            entityKey);\n\n    JcaX509ExtensionUtils extUtils = new JcaX509ExtensionUtils();\n\n    certBldr.addExtension(Extension.authorityKeyIdentifier, false, extUtils.createAuthorityKeyIdentifier(caCert))\n            .addExtension(Extension.subjectKeyIdentifier, false, extUtils.createSubjectKeyIdentifier(entityKey))\n            .addExtension(Extension.basicConstraints, false, new BasicConstraints(false))\n            .addExtension(Extension.keyUsage, false, new KeyUsage(KeyUsage.digitalSignature | KeyUsage.keyEncipherment | KeyUsage.nonRepudiation))\n            .addExtension(Extension.extendedKeyUsage, false, new ExtendedKeyUsage(KeyPurposeId.id_kp_clientAuth));\n\n    ContentSigner signer = new JcaContentSignerBuilder(\"SHA256withRSA\").setProvider(\"BC\").build(caKey);\n\n    return new JcaX509CertificateConverter().setProvider(\"BC\").getCertificate(certBldr.build(signer));\n}\n</code></pre>\n\n<p>I call that method and create the JKS like this:</p>\n\n<pre><code>KeyPair endPair = generateRSAKeyPair(2048);\nX509Certificate endCert = buildEndEntityCert(endPair.getPublic(), intermediateCredential.getPrivateKey(), intermediateCredential.getCertificate(), clientName);  // intermediateCredential and rootCredential are properties of this class that get loaded when the app starts up\nX500PrivateCredential endCredential = new X500PrivateCredential(endCert, endPair.getPrivate(), clientName);\n\nKeyStore store = KeyStore.getInstance(\"JKS\");\nstore.load(null, null);\nstore.setKeyEntry(clientName, endCredential.getPrivateKey(), \"secret\".toCharArray(),\n        new Certificate[]{\n                endCredential.getCertificate(),\n                intermediateCredential.getCertificate(),\n                rootCredential.getCertificate()\n        });\nstore.store(new FileOutputStream(clientName + \".jks\"), \"secret\".toCharArray());\n</code></pre>\n\n<p>Then when I run keytool from ProcessBuilder:</p>\n\n<pre><code>\"C:\\\\Program Files\\\\Java\\\\jdk1.7.0_80\\\\bin\\\\keytool\",     \n                \"-importkeystore\",\n                \"-srckeystore\",\n                clientName + \".jks\",\n                \"-destkeystore\",\n                clientName + \".p12\",\n                \"-srcstoretype\", \"JKS\",\n                \"-deststoretype\", \"PKCS12\",\n                \"-deststorepass\",\n                clientName,\n                \"-srcalias\",\n                clientName,\n                \"-destalias\",\n                clientName\n</code></pre>\n\n<p>I get:</p>\n\n<blockquote>\n  <p>Problem importing entry for alias CLIENT_NAME: java.security.KeyStoreException: Key protection  algorithm not found: java.security.KeyStoreException: Certificate chain is not validate.</p>\n</blockquote>\n\n<p>I tried searching for this but did not find much info.  What does this mean or am  I am doing something wrong?</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1689922793,"post_id":76735601,"comment_id":135284410,"body_markdown":"&quot;Invalid header signature; read 0x7265562D454D494D&quot;: If the file starts with these bytes, then it is not a valid OLE2 document. The bytes are ASCII code: &quot;MIME-Ver&quot; read in Little-Endian-Format. So the file seems to start with the text &quot;MIME-Version&quot;. That looks like a header field content instead of the start of a file. How was the file stored?","body":"&quot;Invalid header signature; read 0x7265562D454D494D&quot;: If the file starts with these bytes, then it is not a valid OLE2 document. The bytes are ASCII code: &quot;MIME-Ver&quot; read in Little-Endian-Format. So the file seems to start with the text &quot;MIME-Version&quot;. That looks like a header field content instead of the start of a file. How was the file stored?"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689924192,"post_id":76735601,"comment_id":135284656,"body_markdown":"I have saved the file into my file system by exporting it from the atlassian confluence article in the browser from the option export to word","body":"I have saved the file into my file system by exporting it from the atlassian confluence article in the browser from the option export to word"},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689924707,"post_id":76735601,"comment_id":135284759,"body_markdown":"When i opened the saved document in vs code i am seeing the following text - ----- MIME-Version: 1.0\nContent-Type: multipart/related; boundary=&quot;----=_NextPart_01D9BBC8.A1782840&quot;\n\nThis document is a Single File Web Page, also known as a Web Archive file.  If you are seeing this message, your browser or editor doesn&#39;t support Web Archive files.  Please download a browser that supports Web Archive.\n\n------=_NextPart_01D9BBC8.A1782840","body":"When i opened the saved document in vs code i am seeing the following text - ----- MIME-Version: 1.0 Content-Type: multipart/related; boundary=&quot;----=_NextPart_01D9BBC8.A1782840&quot;  This document is a Single File Web Page, also known as a Web Archive file.  If you are seeing this message, your browser or editor doesn&#39;t support Web Archive files.  Please download a browser that supports Web Archive.  ------=_NextPart_01D9BBC8.A1782840"},{"owner":{"account_id":4853829,"reputation":57305,"user_id":3915431,"display_name":"Axel Richter"},"score":1,"creation_date":1689925056,"post_id":76735601,"comment_id":135284821,"body_markdown":"&quot;If you are seeing this message, your browser or editor doesn&#39;t support Web Archive files.&quot; This message is very clear. Apache POI doesn&#39;t support Web Archive files.","body":"&quot;If you are seeing this message, your browser or editor doesn&#39;t support Web Archive files.&quot; This message is very clear. Apache POI doesn&#39;t support Web Archive files."},{"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"score":0,"creation_date":1689925501,"post_id":76735601,"comment_id":135284897,"body_markdown":"One update on the issue is i opened the exported word document from confluence in ms word and saved it back as .doc then my word doc parser written using apache poi is able to read it","body":"One update on the issue is i opened the exported word document from confluence in ms word and saved it back as .doc then my word doc parser written using apache poi is able to read it"}],"owner":{"account_id":28967622,"reputation":5,"user_id":22188644,"display_name":"Code Trickle"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689921062,"creation_date":1689921062,"question_id":76735601,"body_markdown":"\r\nI am trying to read a word document (.doc) which has been exported from confluence page in my org using the below code, I am getting the following exception, Am I doing anything wrong initializing word doc like this. If I read a word doc that I have created I am not getting any exception.\r\n\r\n```\r\ntry {\r\n                POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(inputFile));\r\n                HWPFDocument document = new HWPFDocument(fs);\r\n```\r\n\r\n```\r\norg.apache.poi.poifs.filesystem.NotOLE2FileException: Invalid header signature; read 0x7265562D454D494D, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document\r\n\tat org.apache.poi.poifs.storage.HeaderBlock.&lt;init&gt;(HeaderBlock.java:149)\r\n\tat org.apache.poi.poifs.storage.HeaderBlock.&lt;init&gt;(HeaderBlock.java:115)\r\n\tat org.apache.poi.poifs.filesystem.POIFSFileSystem.&lt;init&gt;(POIFSFileSystem.java:326)\r\n\r\n","title":"Getting Invalid header signature Exception while reading word document from file system in java","body":"<p>I am trying to read a word document (.doc) which has been exported from confluence page in my org using the below code, I am getting the following exception, Am I doing anything wrong initializing word doc like this. If I read a word doc that I have created I am not getting any exception.</p>\n<pre><code>try {\n                POIFSFileSystem fs = new POIFSFileSystem(new FileInputStream(inputFile));\n                HWPFDocument document = new HWPFDocument(fs);\n</code></pre>\n<pre><code>org.apache.poi.poifs.filesystem.NotOLE2FileException: Invalid header signature; read 0x7265562D454D494D, expected 0xE11AB1A1E011CFD0 - Your file appears not to be a valid OLE2 document\n    at org.apache.poi.poifs.storage.HeaderBlock.&lt;init&gt;(HeaderBlock.java:149)\n    at org.apache.poi.poifs.storage.HeaderBlock.&lt;init&gt;(HeaderBlock.java:115)\n    at org.apache.poi.poifs.filesystem.POIFSFileSystem.&lt;init&gt;(POIFSFileSystem.java:326)\n\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":1180113,"reputation":152325,"user_id":1155209,"display_name":"jewelsea"},"score":2,"creation_date":1689934649,"post_id":76735573,"comment_id":135286576,"body_markdown":"*“the other scene”* -&gt; why create another scene? For your design. you can use a single scene with a stackpane or other pane type as root and transition via animation in and out new panes that you load in fxml and set as children of the scene root pane, which you never change, you only change the children.  Like [this](https://stackoverflow.com/questions/18619394/loading-new-fxml-in-the-same-scene), but animated.  You don’t need to “specify a node of a specific fxml scene”.","body":"<i>“the other scene”</i> -&gt; why create another scene? For your design. you can use a single scene with a stackpane or other pane type as root and transition via animation in and out new panes that you load in fxml and set as children of the scene root pane, which you never change, you only change the children.  Like <a href=\"https://stackoverflow.com/questions/18619394/loading-new-fxml-in-the-same-scene\">this</a>, but animated.  You don’t need to “specify a node of a specific fxml scene”."}],"owner":{"account_id":27691360,"reputation":13,"user_id":21137969,"display_name":"Crynda"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689920910,"creation_date":1689920603,"question_id":76735573,"body_markdown":"I am working on the transition between scenes, the question is the following, in my program I plan to keep an animated background, and it occurred to me that for this, I could use a stack pane, put an imageview on it and load the gif in the latter, and then to make the transitions, simply change the anchor pane that is on the stack pane, that is, change the anchor pane keeping the same stack pane in all the scenes, this works when I change the mode nu (it&#39;s the scene that contains the stack pane with the background) to another scene, but when I want to do something inverse, for some reason it doesn&#39;t work, and it&#39;s probably that I just didn&#39;t know how to do it.\r\n\r\nThis is the code for the transition method from the menu scene to the configuration scene (it does work):\r\n\r\n    @FXML\r\n\tprivate void loadconfig(ActionEvent event) throws IOException {\r\n\t\tParent root = FXMLLoader.load(getClass().getResource(&quot;config.fxml&quot;)); \r\n\t\tScene scene = myButton.getScene();\r\n\t\r\n\t\t\r\n\t\troot.translateYProperty().set(scene.getHeight()); //aqui movemos el root (escena a cargar), en este caso la altura \r\n\t\tmyStPane.getChildren().add(root);\r\n\t\t\r\n\t\tTranslateTransition translate = new TranslateTransition();\r\n\t\ttranslate.setNode(root);\r\n\t\ttranslate.setDuration(Duration.millis(150));\r\n\t\ttranslate.setToY(0);\r\n\t\ttranslate.setOnFinished(event1 -&gt; {\r\n\t\t\tmyStPane.getChildren().remove(myAnchorPane);//Esto se ejecuta al finalizar la animacion\r\n\t\t});\r\n\t\t\r\n\t\tTranslateTransition translat2 = new TranslateTransition();\r\n\t\ttranslat2.setNode(myAnchorPane);\r\n\t\ttranslat2.setDuration(Duration.millis(200));\r\n\t\ttranslat2.setToY(-500);\r\n\r\n\t\t\r\n\t\ttranslate.playFromStart();\r\n\t\ttranslat2.playFromStart();\r\n\t}\r\n\r\nAnd here is the attempted reverse animation:\r\n\r\n    @FXML///cambiar este metodo y checar temita con el stack pane flojo\r\n\tprivate void loadmenu(ActionEvent event) throws IOException {\r\n\t\tParent root = FXMLLoader.load(getClass().getResource(&quot;menu.fxml&quot;)); //la escena raiz se carga, es decir toma como base esta desde la escena que se usara a continuacion\r\n\t\tScene scene = myButton.getScene();//se toma la escena desde un nodo, en este caso el boton que inicia la accion\r\n\t\t\r\n\t\troot.translateYProperty().set(scene.getHeight()); //aqui movemos el root (escena a cargar), en este caso la altura \r\n\t\tmyStPane.getChildren().add(root);\r\n\t\t\r\n\t\tTranslateTransition translate = new TranslateTransition();\r\n\t\ttranslate.setNode(root);\r\n\t\ttranslate.setDuration(Duration.millis(150));\r\n\t\ttranslate.setToY(0);\r\n\t\ttranslate.setOnFinished(event1 -&gt; {\r\n\t\t\tmyStPane.getChildren().remove(myAnchorPane);//Esto se ejecuta al finalizar la animacion\r\n\t\t});\r\n\t\t\r\n\t\tTranslateTransition translat2 = new TranslateTransition();\r\n\t\ttranslat2.setNode(myAnchorPane);\r\n\t\ttranslat2.setDuration(Duration.millis(200));\r\n\t\ttranslat2.setToY(-500);\r\n\r\n\t\t\r\n\t\ttranslate.playFromStart();\r\n\t\ttranslat2.playFromStart();\r\n\t}\r\n\r\nAs you will notice, it is almost the same, maybe I have to change it more. But the question is that when using it I get an error because since the other scene does not contain any stack pane and this is used to change the anchor pane, a null stack pane is sent and the method does not work correctly.\r\n\r\nIn case you need it, here is the code for the fxml scenes\r\n&quot;menu.fxml&quot;:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.image.Image?&gt;\r\n&lt;?import javafx.scene.image.ImageView?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;?import javafx.scene.layout.StackPane?&gt;\r\n&lt;?import javafx.scene.text.Font?&gt;\r\n\r\n&lt;StackPane fx:id=&quot;myStPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;768.0&quot; prefWidth=&quot;1366.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.scenes.MenuCont&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;ImageView fitHeight=&quot;768.0&quot; fitWidth=&quot;1366.0&quot; pickOnBounds=&quot;true&quot;&gt;\r\n         &lt;image&gt;\r\n            &lt;Image url=&quot;@Images/Fondo2.gif&quot; /&gt;\r\n         &lt;/image&gt;\r\n      &lt;/ImageView&gt;\r\n      &lt;AnchorPane fx:id=&quot;myAnchorPane&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;200.0&quot;&gt;\r\n         &lt;children&gt;\r\n            &lt;ImageView fitHeight=&quot;262.0&quot; fitWidth=&quot;502.0&quot; layoutX=&quot;501.0&quot; layoutY=&quot;99.0&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\r\n               &lt;image&gt;\r\n                  &lt;Image url=&quot;@Images/icon.png&quot; /&gt;\r\n               &lt;/image&gt;\r\n            &lt;/ImageView&gt;\r\n            &lt;Button fx:id=&quot;myButton&quot; layoutX=&quot;570.0&quot; layoutY=&quot;330.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#loadconfig&quot; text=&quot;Configuracion&quot;&gt;\r\n               &lt;font&gt;\r\n                  &lt;Font size=&quot;30.0&quot; /&gt;\r\n               &lt;/font&gt;\r\n            &lt;/Button&gt;\r\n         &lt;/children&gt;\r\n      &lt;/AnchorPane&gt;\r\n   &lt;/children&gt;\r\n&lt;/StackPane&gt;\r\n```\r\nAnd &quot;config.fxml&quot;:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n&lt;?import javafx.scene.control.Button?&gt;\r\n&lt;?import javafx.scene.control.Label?&gt;\r\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\r\n&lt;?import javafx.scene.text.Font?&gt;\r\n\r\n&lt;AnchorPane fx:id=&quot;myAnchorPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;768.0&quot; prefWidth=&quot;1366.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.scenes.MenuCont&quot;&gt;\r\n   &lt;children&gt;\r\n      &lt;Label layoutX=&quot;579.0&quot; layoutY=&quot;48.0&quot; text=&quot;Opciones&quot; textFill=&quot;WHITE&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font size=&quot;50.0&quot; /&gt;\r\n         &lt;/font&gt;&lt;/Label&gt;\r\n      &lt;Button fx:id=&quot;myButton&quot; layoutX=&quot;1217.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#switchToScene1&quot; text=&quot;Volver&quot;&gt;\r\n         &lt;font&gt;\r\n            &lt;Font size=&quot;30.0&quot; /&gt;\r\n         &lt;/font&gt;&lt;/Button&gt;\r\n   &lt;/children&gt;\r\n&lt;/AnchorPane&gt;\r\n```\r\n\r\n","title":"Is there a way to specify a node of a specific fxml scene?","body":"<p>I am working on the transition between scenes, the question is the following, in my program I plan to keep an animated background, and it occurred to me that for this, I could use a stack pane, put an imageview on it and load the gif in the latter, and then to make the transitions, simply change the anchor pane that is on the stack pane, that is, change the anchor pane keeping the same stack pane in all the scenes, this works when I change the mode nu (it's the scene that contains the stack pane with the background) to another scene, but when I want to do something inverse, for some reason it doesn't work, and it's probably that I just didn't know how to do it.</p>\n<p>This is the code for the transition method from the menu scene to the configuration scene (it does work):</p>\n<pre><code>@FXML\nprivate void loadconfig(ActionEvent event) throws IOException {\n    Parent root = FXMLLoader.load(getClass().getResource(&quot;config.fxml&quot;)); \n    Scene scene = myButton.getScene();\n\n    \n    root.translateYProperty().set(scene.getHeight()); //aqui movemos el root (escena a cargar), en este caso la altura \n    myStPane.getChildren().add(root);\n    \n    TranslateTransition translate = new TranslateTransition();\n    translate.setNode(root);\n    translate.setDuration(Duration.millis(150));\n    translate.setToY(0);\n    translate.setOnFinished(event1 -&gt; {\n        myStPane.getChildren().remove(myAnchorPane);//Esto se ejecuta al finalizar la animacion\n    });\n    \n    TranslateTransition translat2 = new TranslateTransition();\n    translat2.setNode(myAnchorPane);\n    translat2.setDuration(Duration.millis(200));\n    translat2.setToY(-500);\n\n    \n    translate.playFromStart();\n    translat2.playFromStart();\n}\n</code></pre>\n<p>And here is the attempted reverse animation:</p>\n<pre><code>@FXML///cambiar este metodo y checar temita con el stack pane flojo\nprivate void loadmenu(ActionEvent event) throws IOException {\n    Parent root = FXMLLoader.load(getClass().getResource(&quot;menu.fxml&quot;)); //la escena raiz se carga, es decir toma como base esta desde la escena que se usara a continuacion\n    Scene scene = myButton.getScene();//se toma la escena desde un nodo, en este caso el boton que inicia la accion\n    \n    root.translateYProperty().set(scene.getHeight()); //aqui movemos el root (escena a cargar), en este caso la altura \n    myStPane.getChildren().add(root);\n    \n    TranslateTransition translate = new TranslateTransition();\n    translate.setNode(root);\n    translate.setDuration(Duration.millis(150));\n    translate.setToY(0);\n    translate.setOnFinished(event1 -&gt; {\n        myStPane.getChildren().remove(myAnchorPane);//Esto se ejecuta al finalizar la animacion\n    });\n    \n    TranslateTransition translat2 = new TranslateTransition();\n    translat2.setNode(myAnchorPane);\n    translat2.setDuration(Duration.millis(200));\n    translat2.setToY(-500);\n\n    \n    translate.playFromStart();\n    translat2.playFromStart();\n}\n</code></pre>\n<p>As you will notice, it is almost the same, maybe I have to change it more. But the question is that when using it I get an error because since the other scene does not contain any stack pane and this is used to change the anchor pane, a null stack pane is sent and the method does not work correctly.</p>\n<p>In case you need it, here is the code for the fxml scenes\n&quot;menu.fxml&quot;:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.image.Image?&gt;\n&lt;?import javafx.scene.image.ImageView?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.layout.StackPane?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n\n&lt;StackPane fx:id=&quot;myStPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;768.0&quot; prefWidth=&quot;1366.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.scenes.MenuCont&quot;&gt;\n   &lt;children&gt;\n      &lt;ImageView fitHeight=&quot;768.0&quot; fitWidth=&quot;1366.0&quot; pickOnBounds=&quot;true&quot;&gt;\n         &lt;image&gt;\n            &lt;Image url=&quot;@Images/Fondo2.gif&quot; /&gt;\n         &lt;/image&gt;\n      &lt;/ImageView&gt;\n      &lt;AnchorPane fx:id=&quot;myAnchorPane&quot; prefHeight=&quot;200.0&quot; prefWidth=&quot;200.0&quot;&gt;\n         &lt;children&gt;\n            &lt;ImageView fitHeight=&quot;262.0&quot; fitWidth=&quot;502.0&quot; layoutX=&quot;501.0&quot; layoutY=&quot;99.0&quot; pickOnBounds=&quot;true&quot; preserveRatio=&quot;true&quot;&gt;\n               &lt;image&gt;\n                  &lt;Image url=&quot;@Images/icon.png&quot; /&gt;\n               &lt;/image&gt;\n            &lt;/ImageView&gt;\n            &lt;Button fx:id=&quot;myButton&quot; layoutX=&quot;570.0&quot; layoutY=&quot;330.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#loadconfig&quot; text=&quot;Configuracion&quot;&gt;\n               &lt;font&gt;\n                  &lt;Font size=&quot;30.0&quot; /&gt;\n               &lt;/font&gt;\n            &lt;/Button&gt;\n         &lt;/children&gt;\n      &lt;/AnchorPane&gt;\n   &lt;/children&gt;\n&lt;/StackPane&gt;\n</code></pre>\n<p>And &quot;config.fxml&quot;:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n&lt;?import javafx.scene.text.Font?&gt;\n\n&lt;AnchorPane fx:id=&quot;myAnchorPane&quot; maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;768.0&quot; prefWidth=&quot;1366.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;com.scenes.MenuCont&quot;&gt;\n   &lt;children&gt;\n      &lt;Label layoutX=&quot;579.0&quot; layoutY=&quot;48.0&quot; text=&quot;Opciones&quot; textFill=&quot;WHITE&quot;&gt;\n         &lt;font&gt;\n            &lt;Font size=&quot;50.0&quot; /&gt;\n         &lt;/font&gt;&lt;/Label&gt;\n      &lt;Button fx:id=&quot;myButton&quot; layoutX=&quot;1217.0&quot; layoutY=&quot;676.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#switchToScene1&quot; text=&quot;Volver&quot;&gt;\n         &lt;font&gt;\n            &lt;Font size=&quot;30.0&quot; /&gt;\n         &lt;/font&gt;&lt;/Button&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n"},{"tags":["java","validation","protocol-buffers"],"answers":[{"tags":[],"owner":{"account_id":2463651,"reputation":7805,"user_id":2147218,"display_name":"bazza"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689885015,"creation_date":1689885015,"answer_id":76733510,"question_id":76727649,"body_markdown":"Apparently, not. \r\n\r\nThis happens with oneof&#39;s too. If a sender contrives to send more than one of the oneof&#39;s fields, the parser simply keeps the last one received.\r\n\r\nIt is pretty bizarre, especially to be so silent about it. The whole idea of a schema based serialisation system like GPB is that you can easily have an agreed contract / ICD / message set. They&#39;ve managed to make it very hard to detect in code that the contract isn&#39;t actually met...\r\n\r\nI suspect the reason they&#39;ve done this goes back to why Google invented GPB in the first place, to store data within Google&#39;s own systems. They probably wanted something that could do pretty well, even if old data was a long way out of spec compared to the current version of a schema. For most of Google&#39;s stuff, it doesn&#39;t matter if things occassionally go wrong; analytics, search, etc aren&#39;t exact anyway, who cares if an old bit of data parses weirdly in some server somewhere?\r\n\r\nBeing more tidly minded than it appears Google are, I much prefer to use ASN.1; it&#39;s a much more capable serialiser in the first place, and it makes it very easy to enforce an ICD / contract. \r\n\r\nWhen Google first announced GPB at a dev conference and the reasons why they&#39;d done it, apparently someone in the crowd asked, &quot;why didn&#39;t you just use ASN.1?&quot;, to which the answer was that Google had never heard of it, Google&#39;s developers not having used Google to search the Internet for &quot;binary serialisation standards&quot;. Says it all, really.","title":"Protobuf: parsing of optional fields works if the incoming data contains multiple values for that field?","body":"<p>Apparently, not.</p>\n<p>This happens with oneof's too. If a sender contrives to send more than one of the oneof's fields, the parser simply keeps the last one received.</p>\n<p>It is pretty bizarre, especially to be so silent about it. The whole idea of a schema based serialisation system like GPB is that you can easily have an agreed contract / ICD / message set. They've managed to make it very hard to detect in code that the contract isn't actually met...</p>\n<p>I suspect the reason they've done this goes back to why Google invented GPB in the first place, to store data within Google's own systems. They probably wanted something that could do pretty well, even if old data was a long way out of spec compared to the current version of a schema. For most of Google's stuff, it doesn't matter if things occassionally go wrong; analytics, search, etc aren't exact anyway, who cares if an old bit of data parses weirdly in some server somewhere?</p>\n<p>Being more tidly minded than it appears Google are, I much prefer to use ASN.1; it's a much more capable serialiser in the first place, and it makes it very easy to enforce an ICD / contract.</p>\n<p>When Google first announced GPB at a dev conference and the reasons why they'd done it, apparently someone in the crowd asked, &quot;why didn't you just use ASN.1?&quot;, to which the answer was that Google had never heard of it, Google's developers not having used Google to search the Internet for &quot;binary serialisation standards&quot;. Says it all, really.</p>\n"},{"tags":[],"owner":{"account_id":492960,"reputation":10530,"user_id":914716,"display_name":"jpa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689920418,"creation_date":1689920418,"answer_id":76735553,"question_id":76727649,"body_markdown":"&gt; Or at least detect such defect incoming messages?\r\n\r\nOne way to detect any message that differs from the schema, is to re-encode the decoded message. That will force it to the canonical format, and if the message exactly matches the schema, the binary representations will be byte-for-byte equivalent.\r\n\r\n**However, I do not think you should do this.**\r\n\r\nIf the message is untrusted, what good does it do you to detect one particular kind of modification? The sender can fully control all message data anyway. If you want to enforce message integrity, you&#39;ll need to add a cryptographic signature or [HMAC](https://en.wikipedia.org/wiki/HMAC).\r\n\r\nThe behavior when same field is present multiple times is [&quot;last one wins&quot;](https://protobuf.dev/programming-guides/encoding/#last-one-wins). Sometimes it is useful behavior, sometimes not. But there doesn&#39;t seem to be any compelling reason to throw an error for it, and I&#39;m not aware of any protobuf library that supports doing that.","title":"Protobuf: parsing of optional fields works if the incoming data contains multiple values for that field?","body":"<blockquote>\n<p>Or at least detect such defect incoming messages?</p>\n</blockquote>\n<p>One way to detect any message that differs from the schema, is to re-encode the decoded message. That will force it to the canonical format, and if the message exactly matches the schema, the binary representations will be byte-for-byte equivalent.</p>\n<p><strong>However, I do not think you should do this.</strong></p>\n<p>If the message is untrusted, what good does it do you to detect one particular kind of modification? The sender can fully control all message data anyway. If you want to enforce message integrity, you'll need to add a cryptographic signature or <a href=\"https://en.wikipedia.org/wiki/HMAC\" rel=\"nofollow noreferrer\">HMAC</a>.</p>\n<p>The behavior when same field is present multiple times is <a href=\"https://protobuf.dev/programming-guides/encoding/#last-one-wins\" rel=\"nofollow noreferrer\">&quot;last one wins&quot;</a>. Sometimes it is useful behavior, sometimes not. But there doesn't seem to be any compelling reason to throw an error for it, and I'm not aware of any protobuf library that supports doing that.</p>\n"}],"owner":{"account_id":10583629,"reputation":1134,"user_id":7796663,"accept_rate":67,"display_name":"JMax"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":245,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1689920418,"creation_date":1689838746,"question_id":76727649,"body_markdown":"I have a gRPC server and the incoming messages contain fields that are marked as `optional`. As the client which sends data to the server runs in an untrusted environment, invalid or modified incoming messages are possible. \r\n\r\nIn a test I noticed that if the client sends multiple values for that field (like it was defined as `repeated`), protobuf simply ignores the multiple values and uses the last received value, instead of throwing an Exception.\r\n\r\nIs there a possibility to switch behavior to something like a &quot;strict mode&quot; and let protobuf throw an error in such a case? Or at least detect such defect incoming messages?\r\n\r\nTested with `com.google.protobuf:protobuf-java:3.23.3`:\r\n\r\n```\r\nmessage Msg1 { \r\n    repeated string field = 1;\r\n}\r\nmessage Msg2 { \r\n    optional string field = 1;\r\n}\r\n\r\nMsg1 msg1 = Msg1.newBuilder().addField(&quot;value1&quot;).addField(&quot;value2&quot;).addField(&quot;value3&quot;).build();\r\nbyte[] data = msg1.msg1.toByteArray(); // serialization on client side\r\n\r\nMsg2 msg2 = Msg2.parseFrom(data); // deserializationon on server side. How to make this fail if the format is different\r\n\r\nSystem.out.println(msg.getField()); // outputs &quot;value3&quot;\r\n```","title":"Protobuf: parsing of optional fields works if the incoming data contains multiple values for that field?","body":"<p>I have a gRPC server and the incoming messages contain fields that are marked as <code>optional</code>. As the client which sends data to the server runs in an untrusted environment, invalid or modified incoming messages are possible.</p>\n<p>In a test I noticed that if the client sends multiple values for that field (like it was defined as <code>repeated</code>), protobuf simply ignores the multiple values and uses the last received value, instead of throwing an Exception.</p>\n<p>Is there a possibility to switch behavior to something like a &quot;strict mode&quot; and let protobuf throw an error in such a case? Or at least detect such defect incoming messages?</p>\n<p>Tested with <code>com.google.protobuf:protobuf-java:3.23.3</code>:</p>\n<pre><code>message Msg1 { \n    repeated string field = 1;\n}\nmessage Msg2 { \n    optional string field = 1;\n}\n\nMsg1 msg1 = Msg1.newBuilder().addField(&quot;value1&quot;).addField(&quot;value2&quot;).addField(&quot;value3&quot;).build();\nbyte[] data = msg1.msg1.toByteArray(); // serialization on client side\n\nMsg2 msg2 = Msg2.parseFrom(data); // deserializationon on server side. How to make this fail if the format is different\n\nSystem.out.println(msg.getField()); // outputs &quot;value3&quot;\n</code></pre>\n"},{"tags":["java","rest","http","containers","quarkus"],"answers":[{"tags":[],"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689920164,"creation_date":1689830729,"answer_id":76726897,"question_id":76726232,"body_markdown":"If your application does not expose an HTTP server, setting `quarkus.http.host` will have no effect.\r\nMore technically, this setting is used by the `quarkus-vertx-http` extension.\r\n\r\nFurthermore, you can always override the docker `CMD` instruction if you want to.","title":"What is application server in base image?","body":"<p>If your application does not expose an HTTP server, setting <code>quarkus.http.host</code> will have no effect.\nMore technically, this setting is used by the <code>quarkus-vertx-http</code> extension.</p>\n<p>Furthermore, you can always override the docker <code>CMD</code> instruction if you want to.</p>\n"}],"owner":{"account_id":20743229,"reputation":13,"user_id":16433289,"display_name":"Chain Head"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76726897,"answer_count":1,"score":0,"last_activity_date":1689920164,"creation_date":1689818906,"question_id":76726232,"body_markdown":"In the [base image][1], the command uses `-Dquarkus.http.host=0.0.0.0`. My Quarkus application uses Kafka and I don&#39;t see the need to expose a HTTP server. How do I not expose this HTTP end-point? Also, is this end-point tied to the `quarkus-resteasy-reactive-jackson` extension?\r\n\r\n\r\n  [1]: https://quarkus.io/guides/quarkus-runtime-base-image","title":"What is application server in base image?","body":"<p>In the <a href=\"https://quarkus.io/guides/quarkus-runtime-base-image\" rel=\"nofollow noreferrer\">base image</a>, the command uses <code>-Dquarkus.http.host=0.0.0.0</code>. My Quarkus application uses Kafka and I don't see the need to expose a HTTP server. How do I not expose this HTTP end-point? Also, is this end-point tied to the <code>quarkus-resteasy-reactive-jackson</code> extension?</p>\n"},{"tags":["java","spring","spring-webflux"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1689920027,"post_id":76733748,"comment_id":135283953,"body_markdown":"You don&#39;t as that isn&#39;t there yet. That is only there after the conversion. Instead of rolling your own security framework I suggest Spring Security which does this and much more and you can use standard mechanisms to get the object.","body":"You don&#39;t as that isn&#39;t there yet. That is only there after the conversion. Instead of rolling your own security framework I suggest Spring Security which does this and much more and you can use standard mechanisms to get the object."}],"owner":{"account_id":8771652,"reputation":11,"user_id":6558258,"display_name":"Yuri Zamboni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689920070,"creation_date":1689887623,"question_id":76733748,"body_markdown":"So, I&#39;m creating a authentication service with Java20 and WebFlux, I&#39;ve this `@Secured` annotation to validate my Bearer token and add in the parameter `ClientDto` the token Owner. \r\nI`m using `WebFilter` to intercept the request and validate my token, but I don&#39;t know how to override my `ClientDto` value. \r\n\r\n\r\n\r\n```java \r\n@AllArgsConstructor\r\n@RequestMapping(&quot;/v1/client&quot;)\r\n@RestController(&quot;ClientControllerV1&quot;)\r\n@Secured\r\npublic class ClientController {\r\n\r\n    @PostMapping\r\n    public Mono&lt;ClientDto&gt; createClient(@RequestBody CreateClientRequest createClient, ClientDto tokenUser){\r\n        return clientServiceImp.createClient(createClient.getRole(), createClient.getUsername(), createClient.getPassword(), createClient.getEmail(), createClient.getTags());\r\n    }\r\n\r\n```\r\n\r\n\r\nI tried get RequestMappingHandlerMapping and find a way to change the value but I didn`t find a way.\r\n","title":"Override a value in my @RestContoller dynamically. Webflux","body":"<p>So, I'm creating a authentication service with Java20 and WebFlux, I've this <code>@Secured</code> annotation to validate my Bearer token and add in the parameter <code>ClientDto</code> the token Owner.\nI<code>m using </code>WebFilter<code>to intercept the request and validate my token, but I don't know how to override my</code>ClientDto` value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AllArgsConstructor\n@RequestMapping(&quot;/v1/client&quot;)\n@RestController(&quot;ClientControllerV1&quot;)\n@Secured\npublic class ClientController {\n\n    @PostMapping\n    public Mono&lt;ClientDto&gt; createClient(@RequestBody CreateClientRequest createClient, ClientDto tokenUser){\n        return clientServiceImp.createClient(createClient.getRole(), createClient.getUsername(), createClient.getPassword(), createClient.getEmail(), createClient.getTags());\n    }\n\n</code></pre>\n<p>I tried get RequestMappingHandlerMapping and find a way to change the value but I didn`t find a way.</p>\n"},{"tags":["java","rabbitmq","quarkus","smallrye-reactive-messaging"],"owner":{"account_id":1685748,"reputation":21,"user_id":1549094,"display_name":"user1549094"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689919875,"creation_date":1689919875,"question_id":76735511,"body_markdown":"I have the following consumer for rabbitmq :\r\n\r\n```\r\n    @Incoming(&quot;incoming-msg&quot;)\r\n    @Blocking(ordered = false, value = &quot;my-worker-pool&quot;)\r\n    public Uni&lt;Void&gt; onExecutionReceive(final Message&lt;JsonObject&gt; message) {\r\n        message.ack();\r\n        .. do some stuff\r\n        return Uni.createFrom().voidItem();\r\n    }\r\n\r\n```\r\nwith\r\nsmallrye.messaging.worker.my-worker-pool.max-concurrency=3\r\n\r\nWith this configuration, I have only 3 messages process at the same time. The problem is that if I send let&#39;s say 5 messages the two non process messages will be in the queue in non acknowledge status instead of ready which prevent other consumer to take them.\r\n\r\nHow can i limit my channel to only those 3 messages and let other messages to ready status.\r\nI have tried :\r\nmp.messaging.incoming.incoming-msgmax-outstanding-messages=1.\r\n\r\nWith such parameter, it limits number of non acknowledge messages to 1, but it is not what i want (all messages ready except those 3 processing).\r\n\r\nHow can I do that ? Is it possible ? If not which strategy should i use for one consumer to let messages available if he is not able to process them ?\r\n\r\n","title":"AMQP Message consumption","body":"<p>I have the following consumer for rabbitmq :</p>\n<pre><code>    @Incoming(&quot;incoming-msg&quot;)\n    @Blocking(ordered = false, value = &quot;my-worker-pool&quot;)\n    public Uni&lt;Void&gt; onExecutionReceive(final Message&lt;JsonObject&gt; message) {\n        message.ack();\n        .. do some stuff\n        return Uni.createFrom().voidItem();\n    }\n\n</code></pre>\n<p>with\nsmallrye.messaging.worker.my-worker-pool.max-concurrency=3</p>\n<p>With this configuration, I have only 3 messages process at the same time. The problem is that if I send let's say 5 messages the two non process messages will be in the queue in non acknowledge status instead of ready which prevent other consumer to take them.</p>\n<p>How can i limit my channel to only those 3 messages and let other messages to ready status.\nI have tried :\nmp.messaging.incoming.incoming-msgmax-outstanding-messages=1.</p>\n<p>With such parameter, it limits number of non acknowledge messages to 1, but it is not what i want (all messages ready except those 3 processing).</p>\n<p>How can I do that ? Is it possible ? If not which strategy should i use for one consumer to let messages available if he is not able to process them ?</p>\n"},{"tags":["java","eclipse","maven"],"comments":[{"owner":{"account_id":5592234,"reputation":4576,"user_id":4431053,"display_name":"Mohsen"},"score":2,"creation_date":1545776067,"post_id":53925923,"comment_id":94693406,"body_markdown":"Maybe your server didn&#39;t stopped yet","body":"Maybe your server didn&#39;t stopped yet"},{"owner":{"account_id":14695242,"reputation":552,"user_id":10612806,"display_name":"Evgeni Enchev"},"score":1,"creation_date":1545810105,"post_id":53925923,"comment_id":94698861,"body_markdown":"@Spara could be right, happens sometimes, but also eclipse gets lock on some files and maven cannot delete them. Try to exit eclipse and run maven from command line. Then start eclipse again.","body":"@Spara could be right, happens sometimes, but also eclipse gets lock on some files and maven cannot delete them. Try to exit eclipse and run maven from command line. Then start eclipse again."},{"owner":{"account_id":6244293,"reputation":3872,"user_id":4856814,"display_name":"murali selenium"},"score":0,"creation_date":1545821478,"post_id":53925923,"comment_id":94702564,"body_markdown":"this may helps you https://stackoverflow.com/questions/19489720/maven-failed-to-clean-project-failed-to-delete-org-ow2-util-asm-asm-tree","body":"this may helps you <a href=\"https://stackoverflow.com/questions/19489720/maven-failed-to-clean-project-failed-to-delete-org-ow2-util-asm-asm-tree\" title=\"maven failed to clean project failed to delete org ow2 util asm asm tree\">stackoverflow.com/questions/19489720/&hellip;</a>"},{"owner":{"account_id":12929719,"reputation":2931,"user_id":9349129,"display_name":"Dushmantha"},"score":1,"creation_date":1545831313,"post_id":53925923,"comment_id":94705899,"body_markdown":"this could happen some time (mostly when another process open the location) try deleting F:\\..project\\target manually and build project again","body":"this could happen some time (mostly when another process open the location) try deleting F:\\..project\\target manually and build project again"},{"owner":{"account_id":13216606,"reputation":422,"user_id":9544909,"display_name":"kwishna"},"score":0,"creation_date":1545846536,"post_id":53925923,"comment_id":94710813,"body_markdown":"Thank You Everyone. Might Be The File Were Being Used By Some Other System. Now, It Am Able To Do Maven Clean Successfully.","body":"Thank You Everyone. Might Be The File Were Being Used By Some Other System. Now, It Am Able To Do Maven Clean Successfully."}],"answers":[{"tags":[],"owner":{"account_id":21928672,"reputation":1,"user_id":16558954,"display_name":"Lakkoju Mahendra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689919509,"creation_date":1689919509,"answer_id":76735481,"question_id":53925923,"body_markdown":"I have faced the similar issue. In my case I kept open the command prompt with the path pointing to my target folder of project. When I closed the command prompt and retied it worked. \r\n\r\nMake sure your target folder is not being used in any other application.","title":"Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean on project ...: Failed to clean project: Failed to delete project\\target","body":"<p>I have faced the similar issue. In my case I kept open the command prompt with the path pointing to my target folder of project. When I closed the command prompt and retied it worked.</p>\n<p>Make sure your target folder is not being used in any other application.</p>\n"}],"owner":{"account_id":13216606,"reputation":422,"user_id":9544909,"display_name":"kwishna"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3228,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1689919509,"creation_date":1545775701,"question_id":53925923,"body_markdown":" I Am Getting BUILD FAILURE On Performing maven clean   \r\n    Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\workspace\\project\\target -&gt; \r\nWhen I Saw Inside My Target Folder : \r\n    \r\n    ..\\target\\classes\\META-INF\\maven\\com.project\\datadriven\\pom.xml\r\n    \r\n    ..\\target\\classes\\META-INF\\maven\\com.project\\datadriven\\pom.properties\r\n    \r\n    ..\\target\\classes\\META-INF\\MANIFEST.MF\r\n    \r\n    ..\\target\\test-classes\\log4j.properties\r\n\r\nThese Files Were Present. But, I Haven&#39;t Kept These Files At This Place. Except MANIFEST.MF They Are Present In Another Place.\r\n\r\nI Am New To Maven. I Can&#39;t Understand How To Solve This Problem.\r\n\r\n    &lt;build&gt; \r\n              &lt;plugins&gt; \r\n              &lt;plugin&gt; \r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.19.1&lt;/version&gt;\r\n              &lt;configuration&gt;\r\n              &lt;suiteXmlFiles&gt;\r\n              &lt;suiteXmlFile&gt;testng.xml&lt;/suiteXmlFile&gt;\r\n              &lt;/suiteXmlFiles&gt;          \r\n              &lt;skipTests&gt;false&lt;/skipTests&gt;\r\n              &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\r\n              &lt;forkMode&gt;once&lt;/forkMode&gt;             \r\n             &lt;properties&gt;\r\n              &lt;property&gt;\r\n              &lt;name&gt;usedefaultlisteners&lt;/name&gt;\r\n              &lt;value&gt;false&lt;/value&gt;\r\n              &lt;/property&gt;\r\n              &lt;property&gt;\r\n               &lt;name&gt;listener&lt;/name&gt;\r\n        \t&lt;value&gt;org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter,com.abd.listeners.CustomListener&lt;/value&gt;\r\n               &lt;/property&gt;\r\n               &lt;/properties&gt;          \r\n               &lt;workingDirectory&gt;target/&lt;/workingDirectory&gt; \r\n               &lt;/configuration&gt;\r\n              &lt;/plugin&gt;\t\r\n              &lt;plugin&gt;\r\n               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n               &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\r\n              &lt;version&gt;2.19.1&lt;/version&gt;\r\n              &lt;/plugin&gt;      \t\t\r\n              &lt;plugin&gt;\r\n              &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n              &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n               &lt;version&gt;3.5.1&lt;/version&gt;\r\n               &lt;configuration&gt;\r\n               &lt;source&gt;1.7&lt;/source&gt;\r\n               &lt;target&gt;1.7&lt;/target&gt;\r\n               &lt;/configuration&gt;\r\n               &lt;/plugin&gt;     \t\t\r\n               &lt;plugin&gt;\r\n               &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n               &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n               &lt;version&gt;3.1.0&lt;/version&gt;\r\n               &lt;/plugin&gt;\r\n              &lt;/plugins&gt;\r\n              \t\r\n              &lt;testResource&gt;\r\n                &lt;directory&gt;src/test/resources&lt;/directory&gt;\r\n                &lt;filtering&gt;true&lt;/filtering&gt;\r\n                &lt;includes&gt;\r\n                &lt;include&gt;log4j.properties&lt;/include&gt;\r\n                &lt;/includes&gt;\r\n               &lt;/testResource&gt;\r\n              &lt;/testResources&gt;\r\n            &lt;/build&gt;\r\n             \r\n            &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n              &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n              &lt;version&gt;1.7.25&lt;/version&gt;\r\n              &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n              &lt;artifactId&gt;poi&lt;/artifactId&gt;\r\n              &lt;version&gt;3.15&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\r\n              &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\r\n              &lt;version&gt;3.15&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n                &lt;version&gt;2.11.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n            &lt;dependency&gt;\r\n              &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n              &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n              &lt;version&gt;1.2.17&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;/dependencies&gt; \t\r\n            &lt;/project&gt;\r\n        \r\n        \r\n        Below Are The Errors On Console I Got On Doing cmd:\\\\  mvn clean -X\r\n        \r\n         [INFO]Deleting F:\\..project\\target\r\n         [INFO]Deleting directory F:\\..project\\target\r\n              BUILD FAILURE\r\n        [ERROR]Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\..project\\target \r\n        org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\..project\\target\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n            at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n            at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n            at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\r\n            at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n            at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke (Method.java:497)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n        Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to clean project: Failed to delete F:\\..project\\target\r\n            at org.apache.maven.plugin.clean.CleanMojo.execute (CleanMojo.java:215)\r\n            at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n            at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n            at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n            at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\r\n            at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n            at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke (Method.java:497)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\r\n        Caused by: java.io.IOException: Failed to delete F:\\..project\\target\r\n            at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:249)\r\n            at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:191)\r\n            at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:117)\r\n            at org.apache.maven.plugin.clean.CleanMojo.execute (CleanMojo.java:193)\r\n            at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\r\n            at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\r\n            at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\r\n            at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\r\n            at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\r\n            at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\r\n            at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\r\n            at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\r\n            at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\r\n            at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke (Method.java:497)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\r\n            at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)","title":"Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean on project ...: Failed to clean project: Failed to delete project\\target","body":"<p>I Am Getting BUILD FAILURE On Performing maven clean<br>\n    Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\workspace\\project\\target -> \nWhen I Saw Inside My Target Folder : </p>\n\n<pre><code>..\\target\\classes\\META-INF\\maven\\com.project\\datadriven\\pom.xml\n\n..\\target\\classes\\META-INF\\maven\\com.project\\datadriven\\pom.properties\n\n..\\target\\classes\\META-INF\\MANIFEST.MF\n\n..\\target\\test-classes\\log4j.properties\n</code></pre>\n\n<p>These Files Were Present. But, I Haven't Kept These Files At This Place. Except MANIFEST.MF They Are Present In Another Place.</p>\n\n<p>I Am New To Maven. I Can't Understand How To Solve This Problem.</p>\n\n<pre><code>&lt;build&gt; \n          &lt;plugins&gt; \n          &lt;plugin&gt; \n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.19.1&lt;/version&gt;\n          &lt;configuration&gt;\n          &lt;suiteXmlFiles&gt;\n          &lt;suiteXmlFile&gt;testng.xml&lt;/suiteXmlFile&gt;\n          &lt;/suiteXmlFiles&gt;          \n          &lt;skipTests&gt;false&lt;/skipTests&gt;\n          &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\n          &lt;forkMode&gt;once&lt;/forkMode&gt;             \n         &lt;properties&gt;\n          &lt;property&gt;\n          &lt;name&gt;usedefaultlisteners&lt;/name&gt;\n          &lt;value&gt;false&lt;/value&gt;\n          &lt;/property&gt;\n          &lt;property&gt;\n           &lt;name&gt;listener&lt;/name&gt;\n        &lt;value&gt;org.uncommons.reportng.HTMLReporter,org.uncommons.reportng.JUnitXMLReporter,com.abd.listeners.CustomListener&lt;/value&gt;\n           &lt;/property&gt;\n           &lt;/properties&gt;          \n           &lt;workingDirectory&gt;target/&lt;/workingDirectory&gt; \n           &lt;/configuration&gt;\n          &lt;/plugin&gt; \n          &lt;plugin&gt;\n           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n           &lt;artifactId&gt;maven-surefire-report-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.19.1&lt;/version&gt;\n          &lt;/plugin&gt;             \n          &lt;plugin&gt;\n          &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n           &lt;version&gt;3.5.1&lt;/version&gt;\n           &lt;configuration&gt;\n           &lt;source&gt;1.7&lt;/source&gt;\n           &lt;target&gt;1.7&lt;/target&gt;\n           &lt;/configuration&gt;\n           &lt;/plugin&gt;            \n           &lt;plugin&gt;\n           &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n           &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n           &lt;version&gt;3.1.0&lt;/version&gt;\n           &lt;/plugin&gt;\n          &lt;/plugins&gt;\n\n          &lt;testResource&gt;\n            &lt;directory&gt;src/test/resources&lt;/directory&gt;\n            &lt;filtering&gt;true&lt;/filtering&gt;\n            &lt;includes&gt;\n            &lt;include&gt;log4j.properties&lt;/include&gt;\n            &lt;/includes&gt;\n           &lt;/testResource&gt;\n          &lt;/testResources&gt;\n        &lt;/build&gt;\n\n        &lt;dependencies&gt;\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n          &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n          &lt;version&gt;1.7.25&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n          &lt;artifactId&gt;poi&lt;/artifactId&gt;\n          &lt;version&gt;3.15&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n          &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n          &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n          &lt;version&gt;3.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n          &lt;groupId&gt;log4j&lt;/groupId&gt;\n          &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n          &lt;version&gt;1.2.17&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;/dependencies&gt;     \n        &lt;/project&gt;\n\n\n    Below Are The Errors On Console I Got On Doing cmd:\\\\  mvn clean -X\n\n     [INFO]Deleting F:\\..project\\target\n     [INFO]Deleting directory F:\\..project\\target\n          BUILD FAILURE\n    [ERROR]Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\..project\\target \n    org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-clean-plugin:2.5:clean (default-clean) on project datadriven: Failed to clean project: Failed to delete F:\\..project\\target\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:497)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n    Caused by: org.apache.maven.plugin.MojoExecutionException: Failed to clean project: Failed to delete F:\\..project\\target\n        at org.apache.maven.plugin.clean.CleanMojo.execute (CleanMojo.java:215)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:497)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n    Caused by: java.io.IOException: Failed to delete F:\\..project\\target\n        at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:249)\n        at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:191)\n        at org.apache.maven.plugin.clean.Cleaner.delete (Cleaner.java:117)\n        at org.apache.maven.plugin.clean.CleanMojo.execute (CleanMojo.java:193)\n        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:137)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:208)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:154)\n        at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:146)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:117)\n        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:81)\n        at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:56)\n        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:128)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:305)\n        at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:192)\n        at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:105)\n        at org.apache.maven.cli.MavenCli.execute (MavenCli.java:954)\n        at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:288)\n        at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke (Method.java:497)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:289)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:229)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:415)\n        at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:356)\n</code></pre>\n"},{"tags":["java",".net","automation","selenium-chromedriver","cefglue"],"owner":{"account_id":2369991,"reputation":520,"user_id":2074804,"accept_rate":46,"display_name":"SKN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689918165,"creation_date":1688488360,"question_id":76614495,"body_markdown":"**Background**: I have WPF based desktop application under test. The application has few cefglue based browser pages contained within .NET components. I use WinAppdriver for automating  WPF based screens and ChromeDriver  to automate the browser pages that are contained within WPF based app. I have a challenge to switch to browser pages  from WPF screen using chrome driver.\r\n\r\n\r\nHere is how I launch the WPF based app in java based automation code by specifying the remote debugging port.\r\n\r\n        String username = &quot;username&quot;;//Dummy detail\r\n        String password=&quot;password&quot;; //Dummy detail\r\n        String appName = &quot;TestApp.exe&quot;;\r\n        tring command = &quot;powershell.exe -command $securePassword = ConvertTo-SecureString &#39;&quot; + password + &quot;&#39; -AsPlainText -Force ; $credential = New-Object System.Management.Automation.PSCredential &#39;&quot; + username +\r\n                                &quot;&#39;, $securePassword ; Start-Process &quot; + appName + &quot;-launcher --remote-debugging-port=5555;&quot; +&quot; -Credential $credential;&quot;;\r\n        \r\n    Runtime.getRuntime().exec(command);\r\n\r\n\r\nHere is how I have setup chrome driver  to interact with cefglue browser page.\r\n\r\n \r\n\r\n     public ChromeDriver BrowserDriver() {\r\n            try {\r\n                System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\chromedriver.exe&quot;);\r\n                ChromeOptions chromeOptions = new ChromeOptions();\r\n                chromeOptions.addArguments(&quot;--no-sandbox&quot;);\r\n                chromeOptions.addArguments(&quot;--disable-extensions&quot;);\r\n                chromeOptions.addArguments(&quot;--disable-plugins&quot;);\r\n                chromeOptions.setExperimentalOption(&quot;debuggerAddress&quot;, &quot;127.0.0.1:5555&quot;);\r\n                chromeOptions.setBinary(&quot;C:\\\\Program Files\\\\CefGlue.BrowserSubProcess.exe&quot;);\r\n                chromeOptions.addArguments(&quot;--user-data-dir=C:\\\\Users&quot;);\r\n                ChromeDriver webDriver = new ChromeDriver(chromeOptions);\r\n                return webDriver;\r\n            }\r\n            catch (Exception ex){\r\n                LOGGER.error(&quot;Exception in starting chrome&quot; + ex.getMessage());\r\n                return null;\r\n            }\r\n\r\nI get below error:\r\n\r\n\r\nException in starting chromeunknown error: cannot connect to chrome at 127.0.0.1:5555\r\n\r\nfrom chrome not reachable\r\n\r\n\r\n&gt; 2023-06-19 10:56:34.780 [main] ERROR - Exception in starting\r\n&gt; chromeunknown error: cannot connect to chrome at 127.0.0.1:5555\r\n&gt; \r\n&gt; from chrome not reachable\r\n&gt; \r\n&gt; Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time:\r\n&gt; &#39;2018-11-14T08:17:03&#39;\r\n&gt; \r\n&gt; \r\n&gt; Driver info: driver.version: ChromeDriver\r\n&gt; \r\n&gt; remote stacktrace: Backtrace:\r\n&gt; \r\n&gt;     Ordinal0 [0x009FA113+1548563]\r\n&gt; \r\n&gt;     Ordinal0 [0x0097DDA1+1039777]\r\n&gt; \r\n&gt;     Ordinal0 [0x008FE32E+516910]\r\n&gt; \r\n&gt;     Ordinal0 [0x008F7EBF+491199]\r\n&gt; \r\n&gt;     Ordinal0 [0x0088F969+63849]\r\n&gt; \r\n&gt;     Ordinal0 [0x0088CDF6+52726]\r\n&gt; \r\n&gt;     Ordinal0 [0x0088B203+45571]\r\n&gt; \r\n&gt;     Ordinal0 [0x008AB797+178071]\r\n&gt; \r\n&gt;     Ordinal0 [0x008AB59D+177565]\r\n&gt; \r\n&gt;     Ordinal0 [0x008A95FB+169467]\r\n&gt; \r\n&gt;     Ordinal0 [0x0089160A+71178]\r\n&gt; \r\n&gt;     Ordinal0 [0x00892690+75408]\r\n&gt; \r\n&gt;     Ordinal0 [0x00892629+75305]\r\n&gt; \r\n&gt;     Ordinal0 [0x009971B7+1143223]\r\n&gt; \r\n&gt;     GetHandleVerifier [0x00A92B46+507814]\r\n&gt; \r\n&gt;     GetHandleVerifier [0x00A92864+507076]\r\n&gt; \r\n&gt;     GetHandleVerifier [0x00A99F47+537511]\r\n&gt; \r\n&gt;     GetHandleVerifier [0x00A93402+510050]\r\n&gt; \r\n&gt;     Ordinal0 [0x0098F29C+1110684]\r\n&gt; \r\n&gt;     Ordinal0 [0x0099938B+1151883]\r\n&gt; \r\n&gt;     Ordinal0 [0x009994F3+1152243]\r\n&gt; \r\n&gt;     Ordinal0 [0x009983F5+1147893]\r\n&gt; \r\n&gt;     BaseThreadInitThunk [0x773500C9+25]\r\n&gt; \r\n&gt;     RtlGetAppContainerNamedObjectPath [0x77497B4E+286]\r\n&gt; \r\n&gt;     RtlGetAppContainerNamedObjectPath [0x77497B1E+238]\r\n\r\n I strongly suspect the way the remote debugging port in specified in java during app launch. I&#39;m not sure if it is 100% correct. There aren&#39;t much details on this. Appreciate any help on this \r\n\r\nBy the way I&#39;m using chromedriver version 79, as the version of cefglue browser used within my desktop application is v79\r\n","title":"How to specify a remote debugging port through java code for a cefglue browser process that&#39;s contained within .NET application?","body":"<p><strong>Background</strong>: I have WPF based desktop application under test. The application has few cefglue based browser pages contained within .NET components. I use WinAppdriver for automating  WPF based screens and ChromeDriver  to automate the browser pages that are contained within WPF based app. I have a challenge to switch to browser pages  from WPF screen using chrome driver.</p>\n<p>Here is how I launch the WPF based app in java based automation code by specifying the remote debugging port.</p>\n<pre><code>    String username = &quot;username&quot;;//Dummy detail\n    String password=&quot;password&quot;; //Dummy detail\n    String appName = &quot;TestApp.exe&quot;;\n    tring command = &quot;powershell.exe -command $securePassword = ConvertTo-SecureString '&quot; + password + &quot;' -AsPlainText -Force ; $credential = New-Object System.Management.Automation.PSCredential '&quot; + username +\n                            &quot;', $securePassword ; Start-Process &quot; + appName + &quot;-launcher --remote-debugging-port=5555;&quot; +&quot; -Credential $credential;&quot;;\n    \nRuntime.getRuntime().exec(command);\n</code></pre>\n<p>Here is how I have setup chrome driver  to interact with cefglue browser page.</p>\n<pre><code> public ChromeDriver BrowserDriver() {\n        try {\n            System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\chromedriver.exe&quot;);\n            ChromeOptions chromeOptions = new ChromeOptions();\n            chromeOptions.addArguments(&quot;--no-sandbox&quot;);\n            chromeOptions.addArguments(&quot;--disable-extensions&quot;);\n            chromeOptions.addArguments(&quot;--disable-plugins&quot;);\n            chromeOptions.setExperimentalOption(&quot;debuggerAddress&quot;, &quot;127.0.0.1:5555&quot;);\n            chromeOptions.setBinary(&quot;C:\\\\Program Files\\\\CefGlue.BrowserSubProcess.exe&quot;);\n            chromeOptions.addArguments(&quot;--user-data-dir=C:\\\\Users&quot;);\n            ChromeDriver webDriver = new ChromeDriver(chromeOptions);\n            return webDriver;\n        }\n        catch (Exception ex){\n            LOGGER.error(&quot;Exception in starting chrome&quot; + ex.getMessage());\n            return null;\n        }\n</code></pre>\n<p>I get below error:</p>\n<p>Exception in starting chromeunknown error: cannot connect to chrome at 127.0.0.1:5555</p>\n<p>from chrome not reachable</p>\n<blockquote>\n<p>2023-06-19 10:56:34.780 [main] ERROR - Exception in starting\nchromeunknown error: cannot connect to chrome at 127.0.0.1:5555</p>\n<p>from chrome not reachable</p>\n<p>Build info: version: '3.141.59', revision: 'e82be7d358', time:\n'2018-11-14T08:17:03'</p>\n<p>Driver info: driver.version: ChromeDriver</p>\n<p>remote stacktrace: Backtrace:</p>\n<pre><code>Ordinal0 [0x009FA113+1548563]\n\nOrdinal0 [0x0097DDA1+1039777]\n\nOrdinal0 [0x008FE32E+516910]\n\nOrdinal0 [0x008F7EBF+491199]\n\nOrdinal0 [0x0088F969+63849]\n\nOrdinal0 [0x0088CDF6+52726]\n\nOrdinal0 [0x0088B203+45571]\n\nOrdinal0 [0x008AB797+178071]\n\nOrdinal0 [0x008AB59D+177565]\n\nOrdinal0 [0x008A95FB+169467]\n\nOrdinal0 [0x0089160A+71178]\n\nOrdinal0 [0x00892690+75408]\n\nOrdinal0 [0x00892629+75305]\n\nOrdinal0 [0x009971B7+1143223]\n\nGetHandleVerifier [0x00A92B46+507814]\n\nGetHandleVerifier [0x00A92864+507076]\n\nGetHandleVerifier [0x00A99F47+537511]\n\nGetHandleVerifier [0x00A93402+510050]\n\nOrdinal0 [0x0098F29C+1110684]\n\nOrdinal0 [0x0099938B+1151883]\n\nOrdinal0 [0x009994F3+1152243]\n\nOrdinal0 [0x009983F5+1147893]\n\nBaseThreadInitThunk [0x773500C9+25]\n\nRtlGetAppContainerNamedObjectPath [0x77497B4E+286]\n\nRtlGetAppContainerNamedObjectPath [0x77497B1E+238]\n</code></pre>\n</blockquote>\n<p>I strongly suspect the way the remote debugging port in specified in java during app launch. I'm not sure if it is 100% correct. There aren't much details on this. Appreciate any help on this</p>\n<p>By the way I'm using chromedriver version 79, as the version of cefglue browser used within my desktop application is v79</p>\n"},{"tags":["java","apache-nifi","snmp"],"comments":[{"owner":{"account_id":1838718,"reputation":11848,"user_id":1668575,"display_name":"mattyb"},"score":1,"creation_date":1689819734,"post_id":76720319,"comment_id":135268548,"body_markdown":"We would need a lot more details than that, such as a link to your code of your Maven module structure with the various POMs, as well as the version of Maven and Java you are using.","body":"We would need a lot more details than that, such as a link to your code of your Maven module structure with the various POMs, as well as the version of Maven and Java you are using."},{"owner":{"account_id":24047058,"reputation":85,"user_id":18025959,"display_name":"Faisal Khan"},"score":0,"creation_date":1690349762,"post_id":76720319,"comment_id":135339176,"body_markdown":"i have added my Pom.xml please let me know if anything else is needed","body":"i have added my Pom.xml please let me know if anything else is needed"},{"owner":{"account_id":1838718,"reputation":11848,"user_id":1668575,"display_name":"mattyb"},"score":0,"creation_date":1690386891,"post_id":76720319,"comment_id":135347192,"body_markdown":"It looks like your `tnm4j` library is a different package than the class that&#39;s missing the method","body":"It looks like your <code>tnm4j</code> library is a different package than the class that&#39;s missing the method"}],"owner":{"account_id":24047058,"reputation":85,"user_id":18025959,"display_name":"Faisal Khan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1689917755,"creation_date":1689762547,"question_id":76720319,"body_markdown":"I am using this library in my Apache NiFi project, to perform a walk operation but it shows the following error\r\n\r\n    java.lang.NoSuchMethodError: &#39;void net.percederberg.mibble.asn1.Asn1Parser.reset(java.io.Reader, net.percederberg.grammatica.parser.Analyzer)&#39; at net.percederberg.mibble.MibLoader$MibSource.parseMib(MibLoader.java:970) at net.percederberg.mibble.MibLoader.loadQueue(MibLoader.java:724) at net.percederberg.mibble.MibLoader.load(MibLoader.java:550) at net.percederberg.mibble.MibLoader.load(MibLoader.java:451) at org.soulwing.snmp.provider.mibble.CachingMibRepository.load(CachingMibRepository.java:79) at org.soulwing.snmp.provider.mibble.MibbleMib.load(MibbleMib.java:226)\r\n\r\nThis is only a case with Apache NiFI but when i try with normal java project it will work fine.\r\nI did not seen any dependency conflict on here can anyone help me to resolves it.\r\nHere is My Pom.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.pnm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;pnm&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;artifactId&gt;nifi-PNMtest-processors&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.soulwing.snmp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tnm4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nifi-api&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nifi-utils&lt;/artifactId&gt;\r\n            &lt;version&gt;1.20.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\r\n            &lt;artifactId&gt;nifi-mock&lt;/artifactId&gt;\r\n            &lt;version&gt;1.20.0&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n\r\n\r\ncan you help me to resolves it.\r\nThanks in Advance.","title":"I have problem while using tnm4j library in my NIFI program","body":"<p>I am using this library in my Apache NiFi project, to perform a walk operation but it shows the following error</p>\n<pre><code>java.lang.NoSuchMethodError: 'void net.percederberg.mibble.asn1.Asn1Parser.reset(java.io.Reader, net.percederberg.grammatica.parser.Analyzer)' at net.percederberg.mibble.MibLoader$MibSource.parseMib(MibLoader.java:970) at net.percederberg.mibble.MibLoader.loadQueue(MibLoader.java:724) at net.percederberg.mibble.MibLoader.load(MibLoader.java:550) at net.percederberg.mibble.MibLoader.load(MibLoader.java:451) at org.soulwing.snmp.provider.mibble.CachingMibRepository.load(CachingMibRepository.java:79) at org.soulwing.snmp.provider.mibble.MibbleMib.load(MibbleMib.java:226)\n</code></pre>\n<p>This is only a case with Apache NiFI but when i try with normal java project it will work fine.\nI did not seen any dependency conflict on here can anyone help me to resolves it.\nHere is My Pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;com.pnm&lt;/groupId&gt;\n    &lt;artifactId&gt;pnm&lt;/artifactId&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n&lt;/parent&gt;\n\n&lt;artifactId&gt;nifi-PNMtest-processors&lt;/artifactId&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt;\n\n&lt;dependencies&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.soulwing.snmp&lt;/groupId&gt;\n        &lt;artifactId&gt;tnm4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n        &lt;artifactId&gt;nifi-api&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n        &lt;artifactId&gt;nifi-utils&lt;/artifactId&gt;\n        &lt;version&gt;1.20.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.nifi&lt;/groupId&gt;\n        &lt;artifactId&gt;nifi-mock&lt;/artifactId&gt;\n        &lt;version&gt;1.20.0&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n\n<p>can you help me to resolves it.\nThanks in Advance.</p>\n"},{"tags":["java","testng","allure"],"answers":[{"tags":[],"owner":{"account_id":15836589,"reputation":821,"user_id":11426982,"display_name":"Moro"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651059950,"creation_date":1651059950,"answer_id":72028134,"question_id":72020291,"body_markdown":"If you want allure to work with Jenkins you need to install `Allure` plugin for it and configure it in `Manage Jenkins -&gt; Global Tool Configuration -&gt; Allure Commandline...`\r\n\r\nThen inside your pipeline script, you simply call allure like this:\r\n\r\n    allure includeProperties: false, jdk: &#39;&#39;, results: [[path: &#39;allure-results&#39;]]\r\n\r\nthe `allure` part of the command has to match the name you set for allure in `Global Configuration`.","title":"allure-results does not exist in jenkins","body":"<p>If you want allure to work with Jenkins you need to install <code>Allure</code> plugin for it and configure it in <code>Manage Jenkins -&gt; Global Tool Configuration -&gt; Allure Commandline...</code></p>\n<p>Then inside your pipeline script, you simply call allure like this:</p>\n<pre><code>allure includeProperties: false, jdk: '', results: [[path: 'allure-results']]\n</code></pre>\n<p>the <code>allure</code> part of the command has to match the name you set for allure in <code>Global Configuration</code>.</p>\n"},{"tags":[],"owner":{"account_id":17097499,"reputation":1,"user_id":14494014,"display_name":"steed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1654179949,"creation_date":1654179917,"answer_id":72477866,"question_id":72020291,"body_markdown":"Changed the startup command: bat &quot;mvn clean test -Dtest=BDDRunner&quot;","title":"allure-results does not exist in jenkins","body":"<p>Changed the startup command: bat &quot;mvn clean test -Dtest=BDDRunner&quot;</p>\n"},{"tags":[],"owner":{"account_id":27152388,"reputation":1,"user_id":20691692,"display_name":"Bryson Karanja"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689917602,"creation_date":1689615245,"answer_id":76706859,"question_id":72020291,"body_markdown":"This one worked for me. Hope it helps\r\n\r\n    stage(&#39;Generate Allure Report&#39;) { steps { script { ws(&#39;/path of project/&#39;) { allure([ includeProperties: false, jdk: &#39;&#39;, properties: [], reportBuildPolicy: &#39;ALWAYS&#39;, results: [[path: &#39;allure-results&#39;]] ]) } } } }","title":"allure-results does not exist in jenkins","body":"<p>This one worked for me. Hope it helps</p>\n<pre><code>stage('Generate Allure Report') { steps { script { ws('/path of project/') { allure([ includeProperties: false, jdk: '', properties: [], reportBuildPolicy: 'ALWAYS', results: [[path: 'allure-results']] ]) } } } }\n</code></pre>\n"}],"owner":{"account_id":17097499,"reputation":1,"user_id":14494014,"display_name":"steed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3341,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72477866,"answer_count":3,"score":0,"last_activity_date":1689917602,"creation_date":1651005692,"question_id":72020291,"body_markdown":"Jenkins ignores properties and does not create allure-results. Please help. \r\n\r\n\r\n## pom.xml ##\r\n\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;GoogleTest&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\r\n        &lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\r\n        &lt;allure.version&gt;2.17.3&lt;/allure.version&gt;\r\n        &lt;cucumber.version&gt;7.2.3&lt;/cucumber.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-testng --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;3.141.59&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\r\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${cucumber.version}&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\r\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\r\n            &lt;version&gt;4.4.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.qos.reload4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reload4j&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.19&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.testng&lt;/groupId&gt;\r\n            &lt;artifactId&gt;testng&lt;/artifactId&gt;\r\n            &lt;version&gt;7.5&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.3&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-java-commons&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.3&lt;/version&gt;\r\n            &lt;scope&gt;compile&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/io.qameta.allure/allure-commandline --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-commandline&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.3&lt;/version&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n            &lt;artifactId&gt;allure-cucumber3-jvm&lt;/artifactId&gt;\r\n            &lt;version&gt;2.17.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;version&gt;4.13.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.7.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                    &lt;source&gt;8&lt;/source&gt;\r\n                    &lt;target&gt;8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.22.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n\r\n                    &lt;argLine&gt;\r\n                        -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\r\n                    &lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n                &lt;dependencies&gt;\r\n                    &lt;dependency&gt;\r\n                        &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\r\n                        &lt;version&gt;${aspectj.version}&lt;/version&gt;\r\n                    &lt;/dependency&gt;\r\n                &lt;/dependencies&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\r\n                &lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\r\n                &lt;version&gt;2.10.0&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;reportVersion&gt;${allure.version}&lt;/reportVersion&gt;\r\n                    &lt;allureDownloadUrl&gt;https://repo.maven.apache.org/maven2/io/qameta/allure/allure-commandline/${allure.version}/allure-commandline-${allure.version}.zip&lt;/allureDownloadUrl&gt;\r\n                    &lt;reportVersion&gt;${allure.version}&lt;/reportVersion&gt;\r\n                    &lt;reportDirectory&gt;${basedir}/target/allure-results&lt;/reportDirectory&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n&lt;/project&gt;\r\n\r\n## allure.properties ##\r\nallure.results.directory=target/allure-results\r\n\r\n## jenkins ##\r\nresults path: target/allure-results\r\n\r\nJenkins does not create the allure-results folder. If I create a folder myself, the files for the report do not fit in the workspace\r\n\r\n## add pipeline script ##\r\n\r\n    pipeline {\r\n    agent any\r\n\r\n    tools {\r\n        // Install the Maven version configured as &quot;M3&quot; and add it to the path.\r\n        \r\n        maven &quot;3.8.5&quot;\r\n    }\r\n\r\n    stages {\r\n        stage(&#39;Build&#39;) {\r\n            steps {\r\n                // Get some code from a GitHub repository\r\n                git &#39;https://github.com/steed777/GoogleTest.git&#39;\r\n\r\n                // Run Maven on a Unix agent.\r\n                bat &quot;mvn -Dtest=com.github.steed777.common.runner.**verify&quot;\r\n\r\n                // To run Maven on a Windows agent, use\r\n                // bat &quot;mvn -Dmaven.test.failure.ignore=true clean package&quot;\r\n            }\r\n\r\n            \r\n        }\r\n    }\r\n    post{\r\n        always{\r\n            allure([\r\n                \r\n                includeProperties: false, jdk: &#39;&#39;, results: [[path: &#39;target/allure-results&#39;]]\r\n                ])\r\n        }\r\n    }\r\n    }\r\n\r\n","title":"allure-results does not exist in jenkins","body":"<p>Jenkins ignores properties and does not create allure-results. Please help.</p>\n<h2>pom.xml</h2>\n<pre><code>&lt;groupId&gt;org.example&lt;/groupId&gt;\n&lt;artifactId&gt;GoogleTest&lt;/artifactId&gt;\n&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n&lt;properties&gt;\n    &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;\n    &lt;aspectj.version&gt;1.8.10&lt;/aspectj.version&gt;\n    &lt;allure.version&gt;2.17.3&lt;/allure.version&gt;\n    &lt;cucumber.version&gt;7.2.3&lt;/cucumber.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/io.cucumber/cucumber-testng --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-testng&lt;/artifactId&gt;\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-java --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n        &lt;version&gt;3.141.59&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n        &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n        &lt;version&gt;${cucumber.version}&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/io.github.bonigarcia/webdrivermanager --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n        &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n        &lt;version&gt;4.4.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;ch.qos.reload4j&lt;/groupId&gt;\n        &lt;artifactId&gt;reload4j&lt;/artifactId&gt;\n        &lt;version&gt;1.2.19&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.testng&lt;/groupId&gt;\n        &lt;artifactId&gt;testng&lt;/artifactId&gt;\n        &lt;version&gt;7.5&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n        &lt;artifactId&gt;allure-testng&lt;/artifactId&gt;\n        &lt;version&gt;2.17.3&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n        &lt;artifactId&gt;allure-java-commons&lt;/artifactId&gt;\n        &lt;version&gt;2.17.3&lt;/version&gt;\n        &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/io.qameta.allure/allure-commandline --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n        &lt;artifactId&gt;allure-commandline&lt;/artifactId&gt;\n        &lt;version&gt;2.17.3&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n        &lt;artifactId&gt;allure-cucumber3-jvm&lt;/artifactId&gt;\n        &lt;version&gt;2.17.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/junit/junit --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.13.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.7.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                &lt;source&gt;8&lt;/source&gt;\n                &lt;target&gt;8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n            &lt;configuration&gt;\n\n                &lt;argLine&gt;\n                    -javaagent:&quot;${settings.localRepository}/org/aspectj/aspectjweaver/${aspectj.version}/aspectjweaver-${aspectj.version}.jar&quot;\n                &lt;/argLine&gt;\n            &lt;/configuration&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;\n                    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;\n                    &lt;version&gt;${aspectj.version}&lt;/version&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;io.qameta.allure&lt;/groupId&gt;\n            &lt;artifactId&gt;allure-maven&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;reportVersion&gt;${allure.version}&lt;/reportVersion&gt;\n                &lt;allureDownloadUrl&gt;https://repo.maven.apache.org/maven2/io/qameta/allure/allure-commandline/${allure.version}/allure-commandline-${allure.version}.zip&lt;/allureDownloadUrl&gt;\n                &lt;reportVersion&gt;${allure.version}&lt;/reportVersion&gt;\n                &lt;reportDirectory&gt;${basedir}/target/allure-results&lt;/reportDirectory&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<h2>allure.properties</h2>\n<p>allure.results.directory=target/allure-results</p>\n<h2>jenkins</h2>\n<p>results path: target/allure-results</p>\n<p>Jenkins does not create the allure-results folder. If I create a folder myself, the files for the report do not fit in the workspace</p>\n<h2>add pipeline script</h2>\n<pre><code>pipeline {\nagent any\n\ntools {\n    // Install the Maven version configured as &quot;M3&quot; and add it to the path.\n    \n    maven &quot;3.8.5&quot;\n}\n\nstages {\n    stage('Build') {\n        steps {\n            // Get some code from a GitHub repository\n            git 'https://github.com/steed777/GoogleTest.git'\n\n            // Run Maven on a Unix agent.\n            bat &quot;mvn -Dtest=com.github.steed777.common.runner.**verify&quot;\n\n            // To run Maven on a Windows agent, use\n            // bat &quot;mvn -Dmaven.test.failure.ignore=true clean package&quot;\n        }\n\n        \n    }\n}\npost{\n    always{\n        allure([\n            \n            includeProperties: false, jdk: '', results: [[path: 'target/allure-results']]\n            ])\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","rsa","java-17"],"answers":[{"tags":[],"owner":{"account_id":19317142,"reputation":97,"user_id":14121658,"display_name":"jnasworld223"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1689914157,"creation_date":1689914157,"answer_id":76735147,"question_id":76725761,"body_markdown":"Based on @david_thompson_085&#39;s comment and [this post](https://stackoverflow.com/questions/41934846/read-rsa-private-key-of-format-pkcs1-in-java), I got the following solution to work.\r\n\r\n```\r\nPEMParser pemParser = new PEMParser(new StringReader(r.getPublicKey()));\r\nJcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\r\nObject o = pemParser.readObject();\r\nPublicKey pk = converter.getPublicKey((SubjectPublicKeyInfo)o);\r\n```\r\n\r\nNote, as described in the referenced post, I did have to set BouncyCastle as my security provider.\r\n\r\n```\r\nSecurity.addProvider(new BouncyCastleProvider());\r\n```","title":"How to create Java Key object from RSA public key in PEM format Java17","body":"<p>Based on @david_thompson_085's comment and <a href=\"https://stackoverflow.com/questions/41934846/read-rsa-private-key-of-format-pkcs1-in-java\">this post</a>, I got the following solution to work.</p>\n<pre><code>PEMParser pemParser = new PEMParser(new StringReader(r.getPublicKey()));\nJcaPEMKeyConverter converter = new JcaPEMKeyConverter().setProvider(&quot;BC&quot;);\nObject o = pemParser.readObject();\nPublicKey pk = converter.getPublicKey((SubjectPublicKeyInfo)o);\n</code></pre>\n<p>Note, as described in the referenced post, I did have to set BouncyCastle as my security provider.</p>\n<pre><code>Security.addProvider(new BouncyCastleProvider());\n</code></pre>\n"}],"owner":{"account_id":19317142,"reputation":97,"user_id":14121658,"display_name":"jnasworld223"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76735147,"answer_count":1,"score":0,"last_activity_date":1689914157,"creation_date":1689808877,"question_id":76725761,"body_markdown":"I am upgrading from Java 8 to Java 17. I had working code to convert RSA public key to a Java Key object using classes in sun.security.util. This is no longer allowed (as of Java 9 I believe). How can I update my code to be compatible with Java 17? I would prefer to use Bouncycastle, as it is already a dependency in my project.\r\n\r\nMy previous code:\r\n```\r\n            String keyData = r.getPublicKey()\r\n                    .replace(&quot;-----BEGIN RSA PUBLIC KEY-----&quot;, &quot;&quot;)\r\n                    .replace(&quot;-----END RSA PUBLIC KEY-----&quot;, &quot;&quot;);\r\n            byte[] content = Base64.decodeBase64(keyData);\r\n            DerInputStream derReader = new DerInputStream(content);\r\n            DerValue[] seq = derReader.getSequence(0);\r\n            BigInteger modulus = seq[0].getBigInteger();\r\n            BigInteger publicExp = seq[1].getBigInteger();\r\n            KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\r\n            RSAPublicKeySpec keySpec = new RSAPublicKeySpec(modulus, publicExp);\r\n            PublicKey pk = kf.generatePublic(keySpec);\r\n```\r\nThe following classes were pulled from sun.security.util:\r\n```\r\nsun.security.util.DerInputStream;\r\nsun.security.util.DerValue;\r\n```","title":"How to create Java Key object from RSA public key in PEM format Java17","body":"<p>I am upgrading from Java 8 to Java 17. I had working code to convert RSA public key to a Java Key object using classes in sun.security.util. This is no longer allowed (as of Java 9 I believe). How can I update my code to be compatible with Java 17? I would prefer to use Bouncycastle, as it is already a dependency in my project.</p>\n<p>My previous code:</p>\n<pre><code>            String keyData = r.getPublicKey()\n                    .replace(&quot;-----BEGIN RSA PUBLIC KEY-----&quot;, &quot;&quot;)\n                    .replace(&quot;-----END RSA PUBLIC KEY-----&quot;, &quot;&quot;);\n            byte[] content = Base64.decodeBase64(keyData);\n            DerInputStream derReader = new DerInputStream(content);\n            DerValue[] seq = derReader.getSequence(0);\n            BigInteger modulus = seq[0].getBigInteger();\n            BigInteger publicExp = seq[1].getBigInteger();\n            KeyFactory kf = KeyFactory.getInstance(&quot;RSA&quot;);\n            RSAPublicKeySpec keySpec = new RSAPublicKeySpec(modulus, publicExp);\n            PublicKey pk = kf.generatePublic(keySpec);\n</code></pre>\n<p>The following classes were pulled from sun.security.util:</p>\n<pre><code>sun.security.util.DerInputStream;\nsun.security.util.DerValue;\n</code></pre>\n"},{"tags":["java","websocket","jvm","out-of-memory","heap-memory"],"comments":[{"owner":{"account_id":7953408,"reputation":1827,"user_id":6003541,"display_name":"Rafał Sokalski"},"score":0,"creation_date":1637608529,"post_id":70071123,"comment_id":123867131,"body_markdown":"Is that a whole stacktrace of java heap space? If not could you drop as a code to your post whole instead of screenshot? How long does your application work before OutOfMemory happens?","body":"Is that a whole stacktrace of java heap space? If not could you drop as a code to your post whole instead of screenshot? How long does your application work before OutOfMemory happens?"},{"owner":{"account_id":10158538,"reputation":2222,"user_id":7502800,"accept_rate":100,"display_name":"usuario"},"score":3,"creation_date":1637608968,"post_id":70071123,"comment_id":123867302,"body_markdown":"Manually calling `System.GC()` is not a good idea. You can use the following flag `-XX:+HeapDumpOnOutOfMemoryError` to get a heap dump before OOO. You can then analyse the heap. I suggest using [Eclipse Memory Analizer](https://www.eclipse.org/mat/) as it helps you discovering where all the objects are being held instead of being garbage collected. If the error has started happening just because an increase of users, then you just may simply need more heap (as you have stated with `-Xmx8192m`). But you should check if there is a memory leak.","body":"Manually calling <code>System.GC()</code> is not a good idea. You can use the following flag <code>-XX:+HeapDumpOnOutOfMemoryError</code> to get a heap dump before OOO. You can then analyse the heap. I suggest using <a href=\"https://www.eclipse.org/mat/\" rel=\"nofollow noreferrer\">Eclipse Memory Analizer</a> as it helps you discovering where all the objects are being held instead of being garbage collected. If the error has started happening just because an increase of users, then you just may simply need more heap (as you have stated with <code>-Xmx8192m</code>). But you should check if there is a memory leak."},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":0,"creation_date":1637609541,"post_id":70071123,"comment_id":123867510,"body_markdown":"@RafałSokalski Updated the stacktrace as code instead of screenshot and yes, that is the whole stacktrace. Application works fine for few days until the memory reaches max assigned and thus ends up with OutOfMemory","body":"@RafałSokalski Updated the stacktrace as code instead of screenshot and yes, that is the whole stacktrace. Application works fine for few days until the memory reaches max assigned and thus ends up with OutOfMemory"},{"owner":{"account_id":7953408,"reputation":1827,"user_id":6003541,"display_name":"Rafał Sokalski"},"score":0,"creation_date":1637609595,"post_id":70071123,"comment_id":123867536,"body_markdown":"could you also share code for sendText method?","body":"could you also share code for sendText method?"},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":1,"creation_date":1637609783,"post_id":70071123,"comment_id":123867576,"body_markdown":"@usuario Checked with Eclipse Memory Analizer, it shows that the 80% of memory is utilized by a GlobalSessions object which holds the list of open sessions.","body":"@usuario Checked with Eclipse Memory Analizer, it shows that the 80% of memory is utilized by a GlobalSessions object which holds the list of open sessions."},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":0,"creation_date":1637609892,"post_id":70071123,"comment_id":123867607,"body_markdown":"@RafałSokalski that code is present in ```broadcastToSessions()```","body":"@RafałSokalski that code is present in <code>broadcastToSessions()</code>"},{"owner":{"account_id":7953408,"reputation":1827,"user_id":6003541,"display_name":"Rafał Sokalski"},"score":0,"creation_date":1637609971,"post_id":70071123,"comment_id":123867628,"body_markdown":"`eachSession.getBasicRemote().sendText(mapper.writeValueAsString(messageObj));` That sendText method is not present in your post.","body":"<code>eachSession.getBasicRemote().sendText(mapper.writeValueAsStr&zwnj;&#8203;ing(messageObj));</code> That sendText method is not present in your post."},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":0,"creation_date":1637610407,"post_id":70071123,"comment_id":123867755,"body_markdown":"@RafałSokalski that is an in-built java library method associated with Session object to send the message to that particular session","body":"@RafałSokalski that is an in-built java library method associated with Session object to send the message to that particular session"},{"owner":{"account_id":10158538,"reputation":2222,"user_id":7502800,"accept_rate":100,"display_name":"usuario"},"score":0,"creation_date":1637615208,"post_id":70071123,"comment_id":123869354,"body_markdown":"@rahul, so the problem lies in that GlobalSessions object. You have a couple of options. **A)** Maybe there is a bug/issue and sessions are not cleared/removed after being closed. Check if number or active sessions relates the number of sessions stored in the object. I am not familiar with websockets, what type of class is GlobalSessions? maybe you are not removing them when onError **B)** Or maybe as you now have a higher number of users, you just need more heap to allocate all of them.","body":"@rahul, so the problem lies in that GlobalSessions object. You have a couple of options. <b>A)</b> Maybe there is a bug/issue and sessions are not cleared/removed after being closed. Check if number or active sessions relates the number of sessions stored in the object. I am not familiar with websockets, what type of class is GlobalSessions? maybe you are not removing them when onError <b>B)</b> Or maybe as you now have a higher number of users, you just need more heap to allocate all of them."},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":0,"creation_date":1637642825,"post_id":70071123,"comment_id":123874619,"body_markdown":"@usuario from the top command I can see that if number of clients decrese, memory utilization gets reduced. From this I came to conclusion that my server needs more heap allocation i.e., accepting your **B** case. But my question was, why am I still able to see the oldest of socket messages in my heap dump? Will those messages be there until the session gets deleted?","body":"@usuario from the top command I can see that if number of clients decrese, memory utilization gets reduced. From this I came to conclusion that my server needs more heap allocation i.e., accepting your <b>B</b> case. But my question was, why am I still able to see the oldest of socket messages in my heap dump? Will those messages be there until the session gets deleted?"},{"owner":{"account_id":10158538,"reputation":2222,"user_id":7502800,"accept_rate":100,"display_name":"usuario"},"score":2,"creation_date":1637655575,"post_id":70071123,"comment_id":123877747,"body_markdown":"@rahul after a full gc, all not reachable objects are cleaned from the heap. So if you see an object in the heap after a full gc, that object is somehow still referenced in your code. If that is not the desired behaviour, there is something wrong in code implementation. Heap objects are not GC cleaned based on age, but on reachability. Using Eclipse Memory Analizer you can track objects to its roots, so as to see who is holding references to that object.","body":"@rahul after a full gc, all not reachable objects are cleaned from the heap. So if you see an object in the heap after a full gc, that object is somehow still referenced in your code. If that is not the desired behaviour, there is something wrong in code implementation. Heap objects are not GC cleaned based on age, but on reachability. Using Eclipse Memory Analizer you can track objects to its roots, so as to see who is holding references to that object."},{"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"score":0,"creation_date":1637744866,"post_id":70071123,"comment_id":123905557,"body_markdown":"@usuario I figured out that as long as I keep hold of session objects, the messages sent to those sessions are still stored in the heap. These messages are still holding the reference of messages sent to those sessions and that&#39;s why the heap has this data store still. Thanks for the help.","body":"@usuario I figured out that as long as I keep hold of session objects, the messages sent to those sessions are still stored in the heap. These messages are still holding the reference of messages sent to those sessions and that&#39;s why the heap has this data store still. Thanks for the help."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1689915105,"post_id":70071123,"comment_id":135283361,"body_markdown":"So you must be saving them in your `Session` object.","body":"So you must be saving them in your <code>Session</code> object."}],"answers":[{"tags":[],"owner":{"account_id":900013,"reputation":36,"user_id":936387,"display_name":"Adugna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689914093,"creation_date":1689914093,"answer_id":76735143,"question_id":70071123,"body_markdown":"&gt; static CopyOnWriteArrayList&lt;Session&gt; GlobalSessions = new CopyOnWriteArrayList&lt;Session&gt;();\r\n\r\nThis is a code smell to me. Statically initialized instance most of the time creates a memory leak. Check best practices to avoid memory leak.","title":"OutOfMemory : Java heap space","body":"<blockquote>\n<p>static CopyOnWriteArrayList GlobalSessions = new CopyOnWriteArrayList();</p>\n</blockquote>\n<p>This is a code smell to me. Statically initialized instance most of the time creates a memory leak. Check best practices to avoid memory leak.</p>\n"}],"owner":{"account_id":17684457,"reputation":29,"user_id":12837625,"display_name":"rahul"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1266,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1689914093,"creation_date":1637607906,"question_id":70071123,"body_markdown":"I have a javax based websocket server which acts as communication between two clients running using tomcat9. Application was running fine for 7-8months and as no. of clients start increasing and the websocket calls starts increaing I&#39;m running into ```java.lang.OutOfMemoryError: Java heap space``` error.\r\n\r\n```\r\njava.lang.OutOfMemoryError: Java heap space\r\n\tat java.nio.HeapCharBuffer.&lt;init&gt;(HeapCharBuffer.java:57)\r\n\tat java.nio.CharBuffer.allocate(CharBuffer.java:335)\r\n\tat org.apache.tomcat.websocket.WsFrameBase.processInitialHeader(WsFrameBase.java:196)\r\n\tat org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:118)\r\n\tat org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82)\r\n\tat org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171)\r\n\tat org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151)\r\n\tat org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148)\r\n\tat org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:53)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:754)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1385)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\nHere in the error, it says something with the CharBuffer allocation so I thought it must be related to String and to analyse more about it I took the heap dump of my application and below is the image from JProfiler.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nHere, the char[] is about 6Gb and holds all the usual ```onMessage(String message)``` calls.\r\n\r\nBelow is the simplified code from my project\r\n\r\n```@ServerEndpoint(value = &quot;/websocketendpoint&quot;, configurator = MyServerEndpointConfigurator.class)\r\npublic class WsServer {\r\n\t\r\n\tLogger logger = LogManager.getLogger(WsServer.class);\r\n\tstatic CopyOnWriteArrayList&lt;Session&gt; GlobalSessions = new CopyOnWriteArrayList&lt;Session&gt;();\r\n\r\n\t@OnOpen\r\n\tpublic void onOpen(Session session, EndpointConfig endpointConfig) {\r\n\t\tGlobalSessions.add(session);\r\n\t}\r\n\r\n\t@OnClose\r\n\tpublic void onClose(Session session, CloseReason reason) {\r\n\t\t\r\n\t\ttry {\r\n\t\t\r\n\t\t\tGlobalSessions.remove(session);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(e.getMessage(),e);\r\n\t\t}\r\n\t}\r\n\t\r\n\t@OnError\r\n\tpublic void onError(Session session, Throwable t) {\r\n        \r\n\t\ttry {\r\n\t\t\tsession.close(new CloseReason(CloseReason.CloseCodes.VIOLATED_POLICY, t.getMessage()));\r\n\t\t\tif(t instanceof IOException) {\r\n\t\t\t\tlogger.error(t.getMessage());\r\n\t\t\t}else {\r\n\t\t\t\tlogger.error(t.getMessage(), t);\r\n\t\t\t}\r\n\t\t}catch (Exception e) {\r\n\t\t\tlogger.error(e.getMessage(), e);\r\n\t\t}\r\n\t\t\r\n    }\r\n\r\n\t@OnMessage(maxMessageSize = 5242880)\r\n\tpublic void onMessage(String message, Session session) {\r\n\t\tupdateLoggerFile(defaultLoggerName);\r\n\t\tLogger logger = LogManager.getLogger(WsServer.class);\r\n\t\ttry {\r\n\t\t\tObjectMapper mapper = new ObjectMapper();\r\n\t\t\tMessage messageObj = mapper.readValue(message, Message.class);\r\n\t\t\tlogger.info(&quot;message=====&gt;&quot;+messageObj.toString());\r\n\t\t\tbroadcastToUISessions(messageObj);\r\n\t\t} catch (Exception e) {\r\n\t\t\tlogger.error(e.getMessage(),e);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic void broadcastToSessions(Message messageObj) {\r\n\t\t\r\n\t\t\tGlobalSessions.forEach(eachSession -&gt; {\r\n\t\t\t\ttry {\r\n\t\r\n\t\t\t\t\tif (eachSession.isOpen()) {\r\n\t\t\t\t\t\tsynchronized(eachSession) {\r\n\t\t\t\t\t\t\teachSession.getBasicRemote().sendText(mapper.writeValueAsString(messageObj));\r\n\t\t\t\t        }\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t} catch (JsonProcessingException e) {\r\n\t\t\t\t\tlogger.error(e.getMessage(),e);\r\n\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\tlogger.error(e.getMessage(),e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\r\n\t@OnMessage\r\n\tpublic void onMessage(PongMessage pongFrame, Session session) throws SchedulerException {\r\n\t\r\n\t\t//simple pingpong mechanism to check the client status\r\n\r\n\t}\r\n\t\r\n\tstatic void updateLoggerFile(String filename) {\r\n\t\tSystem.setProperty(&quot;abcFileName&quot;, &quot;&quot;+filename+&quot;.log&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nFrom the code you can see that I&#39;m not storing the message String in any global variable, each time a new message comes, the previous message gets deferrenced and should be garbage collected.\r\nBut these messages are still retained in the GC as soft reference. \r\n\r\nAm I missing something here?\r\nShouldn&#39;t the String value get cleared from the heap periodically every time GC runs?\r\nShould I manually call the ```System.GC()``` manually every hour (or after particular intervals)?\r\nShould I set some JAVA_OPTS for GC?\r\n\r\nOne temprory solution I found was to reduce the maxMessageSize from 5Mb to 1Mb for ```onMessage() ``` and reduce the memory occupancy to 1/5th.\r\n\r\nI have set JVM max heap size as ```-Xmx8192m``` \r\n\r\n\r\n  \r\n  [2]: https://i.stack.imgur.com/cIOQ9.png","title":"OutOfMemory : Java heap space","body":"<p>I have a javax based websocket server which acts as communication between two clients running using tomcat9. Application was running fine for 7-8months and as no. of clients start increasing and the websocket calls starts increaing I'm running into <code>java.lang.OutOfMemoryError: Java heap space</code> error.</p>\n<pre><code>java.lang.OutOfMemoryError: Java heap space\n    at java.nio.HeapCharBuffer.&lt;init&gt;(HeapCharBuffer.java:57)\n    at java.nio.CharBuffer.allocate(CharBuffer.java:335)\n    at org.apache.tomcat.websocket.WsFrameBase.processInitialHeader(WsFrameBase.java:196)\n    at org.apache.tomcat.websocket.WsFrameBase.processInputBuffer(WsFrameBase.java:118)\n    at org.apache.tomcat.websocket.server.WsFrameServer.onDataAvailable(WsFrameServer.java:82)\n    at org.apache.tomcat.websocket.server.WsFrameServer.doOnDataAvailable(WsFrameServer.java:171)\n    at org.apache.tomcat.websocket.server.WsFrameServer.notifyDataAvailable(WsFrameServer.java:151)\n    at org.apache.tomcat.websocket.server.WsHttpUpgradeHandler.upgradeDispatch(WsHttpUpgradeHandler.java:148)\n    at org.apache.coyote.http11.upgrade.UpgradeProcessorInternal.dispatch(UpgradeProcessorInternal.java:54)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:53)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:754)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1385)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>Here in the error, it says something with the CharBuffer allocation so I thought it must be related to String and to analyse more about it I took the heap dump of my application and below is the image from JProfiler.</p>\n<p><a href=\"https://i.stack.imgur.com/cIOQ9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cIOQ9.png\" alt=\"enter image description here\" /></a></p>\n<p>Here, the char[] is about 6Gb and holds all the usual <code>onMessage(String message)</code> calls.</p>\n<p>Below is the simplified code from my project</p>\n<pre><code>public class WsServer {\n    \n    Logger logger = LogManager.getLogger(WsServer.class);\n    static CopyOnWriteArrayList&lt;Session&gt; GlobalSessions = new CopyOnWriteArrayList&lt;Session&gt;();\n\n    @OnOpen\n    public void onOpen(Session session, EndpointConfig endpointConfig) {\n        GlobalSessions.add(session);\n    }\n\n    @OnClose\n    public void onClose(Session session, CloseReason reason) {\n        \n        try {\n        \n            GlobalSessions.remove(session);\n        } catch (Exception e) {\n            logger.error(e.getMessage(),e);\n        }\n    }\n    \n    @OnError\n    public void onError(Session session, Throwable t) {\n        \n        try {\n            session.close(new CloseReason(CloseReason.CloseCodes.VIOLATED_POLICY, t.getMessage()));\n            if(t instanceof IOException) {\n                logger.error(t.getMessage());\n            }else {\n                logger.error(t.getMessage(), t);\n            }\n        }catch (Exception e) {\n            logger.error(e.getMessage(), e);\n        }\n        \n    }\n\n    @OnMessage(maxMessageSize = 5242880)\n    public void onMessage(String message, Session session) {\n        updateLoggerFile(defaultLoggerName);\n        Logger logger = LogManager.getLogger(WsServer.class);\n        try {\n            ObjectMapper mapper = new ObjectMapper();\n            Message messageObj = mapper.readValue(message, Message.class);\n            logger.info(&quot;message=====&gt;&quot;+messageObj.toString());\n            broadcastToUISessions(messageObj);\n        } catch (Exception e) {\n            logger.error(e.getMessage(),e);\n        }\n        \n    }\n    \n    public void broadcastToSessions(Message messageObj) {\n        \n            GlobalSessions.forEach(eachSession -&gt; {\n                try {\n    \n                    if (eachSession.isOpen()) {\n                        synchronized(eachSession) {\n                            eachSession.getBasicRemote().sendText(mapper.writeValueAsString(messageObj));\n                        }\n                    }\n    \n                } catch (JsonProcessingException e) {\n                    logger.error(e.getMessage(),e);\n                } catch (IOException e) {\n                    logger.error(e.getMessage(),e);\n                }\n            });\n        \n    }\n    \n    \n\n    @OnMessage\n    public void onMessage(PongMessage pongFrame, Session session) throws SchedulerException {\n    \n        //simple pingpong mechanism to check the client status\n\n    }\n    \n    static void updateLoggerFile(String filename) {\n        System.setProperty(&quot;abcFileName&quot;, &quot;&quot;+filename+&quot;.log&quot;);\n    }\n}\n</code></pre>\n<p>From the code you can see that I'm not storing the message String in any global variable, each time a new message comes, the previous message gets deferrenced and should be garbage collected.\nBut these messages are still retained in the GC as soft reference.</p>\n<p>Am I missing something here?\nShouldn't the String value get cleared from the heap periodically every time GC runs?\nShould I manually call the <code>System.GC()</code> manually every hour (or after particular intervals)?\nShould I set some JAVA_OPTS for GC?</p>\n<p>One temprory solution I found was to reduce the maxMessageSize from 5Mb to 1Mb for <code>onMessage() </code> and reduce the memory occupancy to 1/5th.</p>\n<p>I have set JVM max heap size as <code>-Xmx8192m</code></p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":160350,"reputation":11421,"user_id":380338,"display_name":"Neil Stockton"},"score":3,"creation_date":1389639309,"post_id":21059451,"comment_id":31740153,"body_markdown":"Any basic JPA(2) docs will say that a List of Strings requires an ElementCollection annotation. As for why you refer to Python docs when using Java ...","body":"Any basic JPA(2) docs will say that a List of Strings requires an ElementCollection annotation. As for why you refer to Python docs when using Java ..."}],"answers":[{"tags":[],"owner":{"account_id":231518,"reputation":32297,"user_id":495796,"accept_rate":79,"display_name":"Robin Green"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1389427680,"creation_date":1389427680,"answer_id":21060068,"question_id":21059451,"body_markdown":"As the message says, `@Basic` should not be used for containers (e.g. Java collections). It is only to be used for a limited list of basic types. Remove the `@Basic` annotation on that field.\r\n\r\nIf, as you say in the question, the error message is still there, you might need to try the following steps in order:\r\n\r\n 1. Save the file\r\n 2. Close and reopen the file\r\n 3. Clean and rebuild the project\r\n 4. Restart the IDE\r\n\r\n(these are generic steps, which I use when an IDE is generating a compilation error that obviously makes no sense.)","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>As the message says, <code>@Basic</code> should not be used for containers (e.g. Java collections). It is only to be used for a limited list of basic types. Remove the <code>@Basic</code> annotation on that field.</p>\n\n<p>If, as you say in the question, the error message is still there, you might need to try the following steps in order:</p>\n\n<ol>\n<li>Save the file</li>\n<li>Close and reopen the file</li>\n<li>Clean and rebuild the project</li>\n<li>Restart the IDE</li>\n</ol>\n\n<p>(these are generic steps, which I use when an IDE is generating a compilation error that obviously makes no sense.)</p>\n"},{"tags":[],"owner":{"account_id":242113,"reputation":52552,"user_id":513413,"accept_rate":74,"display_name":"Hesam"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1616609367,"creation_date":1390020403,"answer_id":21200106,"question_id":21059451,"body_markdown":"The error seems not have impact on GAE since I can run the app and store data into storage. I guess it&#39;s a bug in IntelliJ IDEA and you can simply ignore it.\r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/lWAX0.png","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>The error seems not have impact on GAE since I can run the app and store data into storage. I guess it's a bug in IntelliJ IDEA and you can simply ignore it.</p>\n<p><img src=\"https://i.stack.imgur.com/lWAX0.png\" alt=\"enter image description here\" /></p>\n"},{"tags":[],"owner":{"account_id":5643420,"reputation":3611,"user_id":4466399,"accept_rate":50,"display_name":"mikebertiean"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1450133566,"creation_date":1450133566,"answer_id":34278100,"question_id":21059451,"body_markdown":"Change `@basic` to `@OneToMany` for List types\r\n","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>Change <code>@basic</code> to <code>@OneToMany</code> for List types</p>\n"},{"tags":[],"owner":{"account_id":165044,"reputation":4235,"user_id":388185,"accept_rate":84,"display_name":"Alkanshel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1452901805,"creation_date":1452901805,"answer_id":34821813,"question_id":21059451,"body_markdown":"This can also happen when your class is missing its @Entity annotation. When you get weird warnings like these, sometimes it helps to try and compile and see if the compiler complains.","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>This can also happen when your class is missing its @Entity annotation. When you get weird warnings like these, sometimes it helps to try and compile and see if the compiler complains.</p>\n"},{"tags":[],"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1664795646,"creation_date":1582720822,"answer_id":60414184,"question_id":21059451,"body_markdown":"You are most likely missing an *association mapping* (like `@OneToMany`) and/or `@Entity` annotation(s).\r\n\r\nI had a same problem in:\r\n```\r\n@Entity\r\npublic class SomeFee {\r\n    @Id\r\n    private Long id;\r\n    private List&lt;AdditionalFee&gt; additionalFees;\r\n    //other fields, getters, setters..\r\n}\r\n\r\nclass AdditionalFee {\r\n    @Id\r\n    private int id;\r\n    //other fields, getters, setters..\r\n}\r\n```\r\n\r\nand `additionalFees` was the field causing the problem.\r\n\r\nWhat I was missing and what helped me are the following:\r\n\r\n 1. `@Entity` annotation on the generic type argument (`AdditionalFee`) class;\r\n 2. `@OneToMany` (or any other type of association that fits particular business case) annotation on the `private List&lt;AdditionalFee&gt; additionalFees;` field.\r\n\r\nSo, the working version looked like this:\r\n\r\n```java\r\n@Entity\r\npublic class SomeFee {\r\n    @Id\r\n    private Long id;\r\n    @OneToMany\r\n    private List&lt;AdditionalFee&gt; additionalFees;\r\n    //other fields, getters, setters..\r\n}\r\n    \r\n@Entity\r\nclass AdditionalFee {\r\n    @Id\r\n    private int id;\r\n    //other fields, getters, setters..\r\n}\r\n```","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>You are most likely missing an <em>association mapping</em> (like <code>@OneToMany</code>) and/or <code>@Entity</code> annotation(s).</p>\n<p>I had a same problem in:</p>\n<pre><code>@Entity\npublic class SomeFee {\n    @Id\n    private Long id;\n    private List&lt;AdditionalFee&gt; additionalFees;\n    //other fields, getters, setters..\n}\n\nclass AdditionalFee {\n    @Id\n    private int id;\n    //other fields, getters, setters..\n}\n</code></pre>\n<p>and <code>additionalFees</code> was the field causing the problem.</p>\n<p>What I was missing and what helped me are the following:</p>\n<ol>\n<li><code>@Entity</code> annotation on the generic type argument (<code>AdditionalFee</code>) class;</li>\n<li><code>@OneToMany</code> (or any other type of association that fits particular business case) annotation on the <code>private List&lt;AdditionalFee&gt; additionalFees;</code> field.</li>\n</ol>\n<p>So, the working version looked like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class SomeFee {\n    @Id\n    private Long id;\n    @OneToMany\n    private List&lt;AdditionalFee&gt; additionalFees;\n    //other fields, getters, setters..\n}\n    \n@Entity\nclass AdditionalFee {\n    @Id\n    private int id;\n    //other fields, getters, setters..\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":41653,"reputation":1487,"user_id":121139,"accept_rate":20,"display_name":"Fred Campos"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1590759580,"creation_date":1590759580,"answer_id":62087335,"question_id":21059451,"body_markdown":"You can also use `@ElementCollection`:\r\n\r\n    @ElementCollection\r\n    private List&lt;String&gt; tags;","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>You can also use <code>@ElementCollection</code>:</p>\n\n<pre><code>@ElementCollection\nprivate List&lt;String&gt; tags;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2904275,"reputation":12430,"user_id":2490074,"accept_rate":62,"display_name":"Sarvar Nishonboyev"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1625668933,"creation_date":1625668933,"answer_id":68288156,"question_id":21059451,"body_markdown":"Or you can mark it as `@Transient` if it doesn&#39;t exist on DB table. \r\n\r\n```\r\n@Transient\r\nprivate List&lt;String&gt; authorities = new ArrayList&lt;&gt;();\r\n```","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>Or you can mark it as <code>@Transient</code> if it doesn't exist on DB table.</p>\n<pre><code>@Transient\nprivate List&lt;String&gt; authorities = new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10517283,"reputation":998,"user_id":7750999,"display_name":"Caffeine Coder"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1645617936,"creation_date":1645617936,"answer_id":71236621,"question_id":21059451,"body_markdown":"&gt; &#39;Basic&#39; attribute type should not be a container\r\n\r\nThis error occurs when you declare an existing entity as an attribute in the current Entity without declaring the relationship type which could be either of the JPA relationships.\r\n[Detailed Article on JPA relationships][1]\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-data-rest-relationships","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<blockquote>\n<p>'Basic' attribute type should not be a container</p>\n</blockquote>\n<p>This error occurs when you declare an existing entity as an attribute in the current Entity without declaring the relationship type which could be either of the JPA relationships.\n<a href=\"https://www.baeldung.com/spring-data-rest-relationships\" rel=\"nofollow noreferrer\">Detailed Article on JPA relationships</a></p>\n"},{"tags":[],"owner":{"account_id":15141541,"reputation":49,"user_id":10926405,"display_name":" Mannawar Hussain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689913091,"creation_date":1689913091,"answer_id":76735094,"question_id":21059451,"body_markdown":"Check and specify whether it is ```@OneToMany @OneToOne @ManyToMany```\r\nas per the requirement and replace with @Basic","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>Check and specify whether it is <code>@OneToMany @OneToOne @ManyToMany</code>\nas per the requirement and replace with @Basic</p>\n"}],"owner":{"account_id":242113,"reputation":52552,"user_id":513413,"accept_rate":74,"display_name":"Hesam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95009,"favorite_count":0,"down_vote_count":1,"up_vote_count":58,"accepted_answer_id":21200106,"answer_count":9,"score":57,"last_activity_date":1689913091,"creation_date":1389422454,"question_id":21059451,"body_markdown":"I have a JPA `@Entity class Place`, with some properties holding some information about a place, such as name of place, description, and URLs of some images.\r\n\r\nFor the URLs of images, I declare a `List&lt;Link&gt;` in my entity.\r\n\r\n![enter image description here][3]\r\n\r\nHowever, I am getting this error:\r\n\r\n&gt;`Basic attribute type should not be a container.`\r\n\r\nI tried to remove `@Basic`, but the error message is still there. Why does it shows this error?\r\n\r\n  [1]: https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/Link\r\n  [2]: https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses\r\n  [3]: http://i.stack.imgur.com/BWkDD.png\r\n","title":"Cannot declare List property in the JPA @Entity class. It says &#39;Basic&#39; attribute type should not be a container","body":"<p>I have a JPA <code>@Entity class Place</code>, with some properties holding some information about a place, such as name of place, description, and URLs of some images.</p>\n<p>For the URLs of images, I declare a <code>List&lt;Link&gt;</code> in my entity.</p>\n<p><img src=\"https://i.stack.imgur.com/BWkDD.png\" alt=\"enter image description here\" /></p>\n<p>However, I am getting this error:</p>\n<blockquote>\n<p><code>Basic attribute type should not be a container.</code></p>\n</blockquote>\n<p>I tried to remove <code>@Basic</code>, but the error message is still there. Why does it shows this error?</p>\n"},{"tags":["java","reflection","jar","urlclassloader"],"answers":[{"tags":[],"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1689912459,"creation_date":1689897638,"answer_id":76734357,"question_id":76733705,"body_markdown":"Annotation elements are just methods. Meaning you can get the value of an annotation element by invoking a `Method` on the `Annotation` instance. For example, say we have the following annotation:\r\n\r\n```java\r\nimport java.lang.annotation.ElementType;\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\nimport java.lang.annotation.Target;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.TYPE)\r\npublic @interface Foo {\r\n\r\n    String value();\r\n}\r\n```\r\n\r\nThen we get the value of the `value` element by doing:\r\n\r\n```java\r\nimport java.lang.annotation.Annotation;\r\nimport java.lang.reflect.Method;\r\n\r\n@Foo(&quot;Hello, World!&quot;)\r\npublic class Main {\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        // Pretending we don&#39;t have compile-time access to &#39;Foo&#39;\r\n        Annotation fooAnnotation = Main.class.getAnnotations()[0];\r\n        Method valueMethod = fooAnnotation.annotationType().getMethod(&quot;value&quot;);\r\n        Object value = valueMethod.invoke(fooAnnotation);\r\n        System.out.printf(&quot;value = &#39;%s&#39;%n&quot;, value);\r\n    }\r\n}\r\n```\r\n\r\nAnd the output is:\r\n\r\n```none\r\nvalue = &#39;Hello, World!&#39;\r\n```\r\n\r\n","title":"How to get method annotation value","body":"<p>Annotation elements are just methods. Meaning you can get the value of an annotation element by invoking a <code>Method</code> on the <code>Annotation</code> instance. For example, say we have the following annotation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.ElementType;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\nimport java.lang.annotation.Target;\n\n@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.TYPE)\npublic @interface Foo {\n\n    String value();\n}\n</code></pre>\n<p>Then we get the value of the <code>value</code> element by doing:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.lang.annotation.Annotation;\nimport java.lang.reflect.Method;\n\n@Foo(&quot;Hello, World!&quot;)\npublic class Main {\n\n    public static void main(String[] args) throws Exception {\n        // Pretending we don't have compile-time access to 'Foo'\n        Annotation fooAnnotation = Main.class.getAnnotations()[0];\n        Method valueMethod = fooAnnotation.annotationType().getMethod(&quot;value&quot;);\n        Object value = valueMethod.invoke(fooAnnotation);\n        System.out.printf(&quot;value = '%s'%n&quot;, value);\n    }\n}\n</code></pre>\n<p>And the output is:</p>\n<pre class=\"lang-none prettyprint-override\"><code>value = 'Hello, World!'\n</code></pre>\n"}],"owner":{"account_id":17617723,"reputation":105,"user_id":12823863,"display_name":"SP QRT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76734357,"answer_count":1,"score":0,"last_activity_date":1689912459,"creation_date":1689887042,"question_id":76733705,"body_markdown":"I am writing a plugin for parsing a jar archive, using the url classloader, I get reflective access to the classes of this archive, I have annotation names by which I can find the classes corresponding to them in the bytecode (for obvious reasons, I do not have access to the annotation class itself from the code that is currently parsing this jar),\r\nI&#39;m sure there is some dirty trick to do this, please help\r\n\r\nfor example what i am doing in nutshell:\r\n\r\n```java\r\nPath pathToJar = Paths.get(&quot;/a/b/c/Application.jar&quot;);\r\n\r\nList&lt;Class&lt;?&gt;&gt; allJarClasses = loadAllJarClasses(pathToJar);\r\n\r\nString annotationName = &quot;MyAnnotation&quot;;\r\n\r\ngetValueFromAnnotationWithName(annotationName, allJarClasses);\r\n\r\n---\r\n\r\npublic String getValueFromAnnotationWithName(String annotationName, List&lt;Class&lt;?&gt;&gt; classes) {\r\n    classes.forEach(cl -&gt; {\r\n        Method[] methods = ...getMethods\r\n        for(Method m : methods) {\r\n            Annotations[] annotations = ...getAnnotations from method\r\n            for (Annotation a: annotations) {\r\n               if (a.annotationType().getName().matches(&quot;.*&quot; + annotationName)) {\r\n                     return getValueFromAnnotation(&quot;someValueName&quot;, a); &lt;- here i need help;\r\n               }\r\n            }\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nUpdate: \r\ni can get values while debugging in intellij idea\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/j5eL1.png\r\n\r\nalso if do this:\r\n```java\r\nannotationMethod.toString()\r\n```\r\ni can get this:\r\n\r\n&gt;@ru.sparural.kafka.annotation.KafkaSparuralMapping(value=&quot;file/create&quot;)","title":"How to get method annotation value","body":"<p>I am writing a plugin for parsing a jar archive, using the url classloader, I get reflective access to the classes of this archive, I have annotation names by which I can find the classes corresponding to them in the bytecode (for obvious reasons, I do not have access to the annotation class itself from the code that is currently parsing this jar),\nI'm sure there is some dirty trick to do this, please help</p>\n<p>for example what i am doing in nutshell:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Path pathToJar = Paths.get(&quot;/a/b/c/Application.jar&quot;);\n\nList&lt;Class&lt;?&gt;&gt; allJarClasses = loadAllJarClasses(pathToJar);\n\nString annotationName = &quot;MyAnnotation&quot;;\n\ngetValueFromAnnotationWithName(annotationName, allJarClasses);\n\n---\n\npublic String getValueFromAnnotationWithName(String annotationName, List&lt;Class&lt;?&gt;&gt; classes) {\n    classes.forEach(cl -&gt; {\n        Method[] methods = ...getMethods\n        for(Method m : methods) {\n            Annotations[] annotations = ...getAnnotations from method\n            for (Annotation a: annotations) {\n               if (a.annotationType().getName().matches(&quot;.*&quot; + annotationName)) {\n                     return getValueFromAnnotation(&quot;someValueName&quot;, a); &lt;- here i need help;\n               }\n            }\n        }\n    });\n}\n</code></pre>\n<p>Update:\ni can get values while debugging in intellij idea\n<a href=\"https://i.stack.imgur.com/j5eL1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/j5eL1.png\" alt=\"enter image description here\" /></a></p>\n<p>also if do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>annotationMethod.toString()\n</code></pre>\n<p>i can get this:</p>\n<blockquote>\n<p>@ru.sparural.kafka.annotation.KafkaSparuralMapping(value=&quot;file/create&quot;)</p>\n</blockquote>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9697,"page":295,"page_size":100}
