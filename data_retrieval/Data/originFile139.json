{"items":[{"tags":["java","android-studio","random","srand"],"comments":[{"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"score":3,"creation_date":1456309754,"post_id":35599445,"comment_id":58883765,"body_markdown":"Use [`SecureRandom`](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)","body":"Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\"><code>SecureRandom</code></a>"},{"owner":{"account_id":2764833,"reputation":232372,"user_id":2380830,"accept_rate":89,"display_name":"Bathsheba"},"score":1,"creation_date":1456309845,"post_id":35599445,"comment_id":58883831,"body_markdown":"The C++ version is not completely unique by the way. It&#39;s just that you can explicitly seed the generator (as you can in Java too).","body":"The C++ version is not completely unique by the way. It&#39;s just that you can explicitly seed the generator (as you can in Java too)."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":1,"creation_date":1456309910,"post_id":35599445,"comment_id":58883891,"body_markdown":"The only way to always get the same sequence of numbers is to reuse the same seed. Remove the seed you&#39;re using and you&#39;ll be getting random numbers again.","body":"The only way to always get the same sequence of numbers is to reuse the same seed. Remove the seed you&#39;re using and you&#39;ll be getting random numbers again."},{"owner":{"account_id":2883920,"reputation":1142,"user_id":2474214,"accept_rate":75,"display_name":"C&#233;dric M."},"score":2,"creation_date":1456310028,"post_id":35599445,"comment_id":58883978,"body_markdown":"It does that because `Random` is using a seed generated during the _compilation_ process. Once your program is built, the sequence will be the same. As @Ferrybig said, try using `SecureRandom` ([SecureRandom](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html)) or try to implement `Random(seed)` as your _seed_ is randomly generated during the _runtime_. By the way, the question is interresting","body":"It does that because <code>Random</code> is using a seed generated during the <i>compilation</i> process. Once your program is built, the sequence will be the same. As @Ferrybig said, try using <code>SecureRandom</code> (<a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow noreferrer\">SecureRandom</a>) or try to implement <code>Random(seed)</code> as your <i>seed</i> is randomly generated during the <i>runtime</i>. By the way, the question is interresting"}],"answers":[{"tags":[],"owner":{"account_id":1677570,"reputation":18354,"user_id":1542723,"display_name":"Ferrybig"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1456594313,"creation_date":1456310793,"answer_id":35599933,"question_id":35599445,"body_markdown":"- If you require a unique random in Java, use [`SecureRandom`](https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html). This class provides a cryptographically strong random number generator (RNG), meaning it can be used when creating certificates and this class is slow compared to the other solutions.\r\n\r\n- If you require a predictable random that you can reset, use a [`Random`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html), where you call `.setSeed(number)` to seed it to make the values predictable from that point.\r\n\r\n- If you want a pseudo-random that is random every time you start the program, use a normal [`Random`](https://docs.oracle.com/javase/7/docs/api/java/util/Random.html). A random instance is seed by default by some hash of the current time.\r\n\r\nFor the best randomness in every solution, it is important to RE-USE the random instance. If this isn&#39;t done, most of the output it gives will be similar over the same timespan, and at the case of a thrown away SecureRandom, it will spend a lot of time recreating the new random.","title":"Unique random - srand in java ? (like in c++)","body":"<ul>\n<li><p>If you require a unique random in Java, use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/security/SecureRandom.html\" rel=\"nofollow\"><code>SecureRandom</code></a>. This class provides a cryptographically strong random number generator (RNG), meaning it can be used when creating certificates and this class is slow compared to the other solutions.</p></li>\n<li><p>If you require a predictable random that you can reset, use a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a>, where you call <code>.setSeed(number)</code> to seed it to make the values predictable from that point.</p></li>\n<li><p>If you want a pseudo-random that is random every time you start the program, use a normal <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Random.html\" rel=\"nofollow\"><code>Random</code></a>. A random instance is seed by default by some hash of the current time.</p></li>\n</ul>\n\n<p>For the best randomness in every solution, it is important to RE-USE the random instance. If this isn't done, most of the output it gives will be similar over the same timespan, and at the case of a thrown away SecureRandom, it will spend a lot of time recreating the new random.</p>\n"}],"owner":{"account_id":7338578,"reputation":595,"user_id":5589049,"accept_rate":68,"display_name":"Dawid"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4288,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":35599933,"answer_count":1,"score":3,"last_activity_date":1696611722,"creation_date":1456309586,"question_id":35599445,"body_markdown":"Currently I&#39;m using a \r\n\r\n    Random rand = new Random();\r\n    myNumber = rand.nextInt((100-0)+1)+0;\r\n\r\nand it&#39;s a pseudo-random, because I always get the same sequence of numbers.\r\nI remember in c++ you could just use the ctime and use srand to make it unique. How do you do it in java ?","title":"Unique random - srand in java ? (like in c++)","body":"<p>Currently I'm using a </p>\n\n<pre><code>Random rand = new Random();\nmyNumber = rand.nextInt((100-0)+1)+0;\n</code></pre>\n\n<p>and it's a pseudo-random, because I always get the same sequence of numbers.\nI remember in c++ you could just use the ctime and use srand to make it unique. How do you do it in java ?</p>\n"},{"tags":["java","string","charsequence"],"comments":[{"owner":{"account_id":156587,"reputation":15475,"user_id":373962,"accept_rate":86,"display_name":"Miquel"},"score":12,"creation_date":1341385554,"post_id":11323962,"comment_id":14906723,"body_markdown":"This is going to sound very RTFMish, but it&#39;s an honest advice: it can be very interesting and a learning experience to actually look at the source code for String yourself","body":"This is going to sound very RTFMish, but it&#39;s an honest advice: it can be very interesting and a learning experience to actually look at the source code for String yourself"},{"owner":{"account_id":176642,"reputation":6111,"user_id":885287,"accept_rate":81,"display_name":"aaronsnoswell"},"score":1,"creation_date":1341898354,"post_id":11323962,"comment_id":15041875,"body_markdown":"Where can you find the Java source code? I thought it was all proprietary?","body":"Where can you find the Java source code? I thought it was all proprietary?"},{"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"score":4,"creation_date":1367047869,"post_id":11323962,"comment_id":23249078,"body_markdown":"@aaronsnoswell: OpenJDK is open source. You can find one version of the `String` class at http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/share/classes/java/lang/String.java. But even before that, Sun JDKs used to come with a file called `src.zip` which contained much of the source code. Looking at that code was possible and useful, although modifying it was probably another matter, in terms of license.","body":"@aaronsnoswell: OpenJDK is open source. You can find one version of the <code>String</code> class at <a href=\"http://hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/share/classes/java/lang/String.java\" rel=\"nofollow noreferrer\">hg.openjdk.java.net/jdk7u/jdk7u/jdk/file/6069fe8ffead/src/sh&zwnj;&#8203;are/&hellip;</a>. But even before that, Sun JDKs used to come with a file called <code>src.zip</code> which contained much of the source code. Looking at that code was possible and useful, although modifying it was probably another matter, in terms of license."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1413937425,"post_id":11323962,"comment_id":41629783,"body_markdown":"For source code, multiple companies provide access through their own web sites to various open source projects including OpenJDK. Simply **use a search engine** for a query such as &quot;java string class source code&quot; to get multiple hits on those providers.","body":"For source code, multiple companies provide access through their own web sites to various open source projects including OpenJDK. Simply <b>use a search engine</b> for a query such as &quot;java string class source code&quot; to get multiple hits on those providers."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1523479688,"post_id":11323962,"comment_id":86583855,"body_markdown":"Similar to: [*Why StringBuilder when there is String?*](https://stackoverflow.com/q/5234147/642706)","body":"Similar to: <a href=\"https://stackoverflow.com/q/5234147/642706\"><i>Why StringBuilder when there is String?</i></a>"},{"owner":{"account_id":308177,"reputation":1911,"user_id":619895,"accept_rate":85,"display_name":"ggb667"},"score":0,"creation_date":1634647206,"post_id":11323962,"comment_id":123076739,"body_markdown":"Oh my god, does Oracle no longer release the source  with their JDK?","body":"Oh my god, does Oracle no longer release the source  with their JDK?"}],"answers":[{"tags":[],"owner":{"account_id":298886,"reputation":40470,"user_id":605153,"accept_rate":67,"display_name":"Mark Bramnik"},"down_vote_count":2,"up_vote_count":5,"is_accepted":false,"score":3,"last_activity_date":1341385381,"creation_date":1341385381,"answer_id":11323989,"question_id":11323962,"body_markdown":"I know it a kind of obvious, but CharSequence is an interface whereas String is a concrete class :)\r\n\r\njava.lang.String is an implementation of this interface...\r\n\r\n","title":"Exact difference between CharSequence and String in java","body":"<p>I know it a kind of obvious, but CharSequence is an interface whereas String is a concrete class :)</p>\n\n<p>java.lang.String is an implementation of this interface...</p>\n"},{"tags":[],"owner":{"account_id":331053,"reputation":1135,"user_id":655504,"accept_rate":100,"display_name":"Andreas Johansson"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1341385605,"creation_date":1341385605,"answer_id":11324025,"question_id":11323962,"body_markdown":"From the Java API of [CharSequence][1]:\r\n\r\n&gt; A CharSequence is a readable sequence of characters. This interface provides uniform, read-only access to many different kinds of character sequences.\r\n\r\nThis interface is then used by [String][2], [CharBuffer][3] and [StringBuffer][4] to keep consistency for all method names.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CharSequence.html\r\n  [2]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/CharBuffer.html\r\n  [4]: http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html","title":"Exact difference between CharSequence and String in java","body":"<p>From the Java API of <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/CharSequence.html\" rel=\"nofollow\">CharSequence</a>:</p>\n\n<blockquote>\n  <p>A CharSequence is a readable sequence of characters. This interface provides uniform, read-only access to many different kinds of character sequences.</p>\n</blockquote>\n\n<p>This interface is then used by <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html\" rel=\"nofollow\">String</a>, <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/nio/CharBuffer.html\" rel=\"nofollow\">CharBuffer</a> and <a href=\"http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/StringBuffer.html\" rel=\"nofollow\">StringBuffer</a> to keep consistency for all method names.</p>\n"},{"tags":[],"owner":{"account_id":1580982,"reputation":57898,"user_id":1468366,"accept_rate":78,"display_name":"MvG"},"down_vote_count":0,"up_vote_count":105,"is_accepted":true,"score":105,"last_activity_date":1431989087,"creation_date":1341385650,"answer_id":11324030,"question_id":11323962,"body_markdown":"## General differences ##\r\n\r\nThere are several classes which implement the [`CharSequence`][1] interface besides [`String`][2]. Among these are\r\n\r\n- [`StringBuilder`][3] for variable-length character sequences which can be modified\r\n- [`CharBuffer`][4] for fixed-length low-level character sequences which can be modified\r\n\r\nAny method which accepts a `CharSequence` can operate on all of these equally well. Any method which only accepts a `String` will require conversion. So using `CharSequence` as an argument type in all the places where you don&#39;t care about the internals is prudent. However you should use `String` as a return type if you actually return a `String`, because that avoids possible conversions of returned values if the calling method actually does require a `String`.\r\n\r\nAlso note that maps should use `String` as key type, not `CharSequence`, as map keys must not change. In other words, sometimes the immutable nature of `String` is essential.\r\n\r\n## Specific code snippet ##\r\n\r\nAs for the code you pasted: simply compile that, and have a look at the JVM bytecode using `javap -v`. There you will notice that both `obj` and `str` are references to the same constant object. As a `String` is immutable, this kind of sharing is all right.\r\n\r\nThe `+` operator of `String` is compiled as invocations of various `StringBuilder.append` calls. So it is equivalent to\r\n\r\n    System.out.println(\r\n      (new StringBuilder())\r\n      .append(&quot;output is : &quot;)\r\n      .append((Object)obj)\r\n      .append(&quot; &quot;)\r\n      .append(str)\r\n      .toString()\r\n    )\r\n\r\nI must confess I&#39;m a bit surprised that my compiler `javac 1.6.0_33` compiles the `+ obj` using `StringBuilder.append(Object)` instead of `StringBuilder.append(CharSequence)`. The former probably involves a call to the `toString()` method of the object, whereas the latter should be possible in a more efficient way. On the other hand, `String.toString()` simply returns the `String` itself, so there is little penalty there. So  `StringBuilder.append(String)` might be more efficient by about one method invocation.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/CharSequence.html\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/StringBuilder.html\r\n  [4]: http://docs.oracle.com/javase/8/docs/api/index.html?java/nio/CharBuffer.html","title":"Exact difference between CharSequence and String in java","body":"<h2>General differences</h2>\n\n<p>There are several classes which implement the <a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/CharSequence.html\" rel=\"noreferrer\"><code>CharSequence</code></a> interface besides <a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/String.html\" rel=\"noreferrer\"><code>String</code></a>. Among these are</p>\n\n<ul>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/lang/StringBuilder.html\" rel=\"noreferrer\"><code>StringBuilder</code></a> for variable-length character sequences which can be modified</li>\n<li><a href=\"http://docs.oracle.com/javase/8/docs/api/index.html?java/nio/CharBuffer.html\" rel=\"noreferrer\"><code>CharBuffer</code></a> for fixed-length low-level character sequences which can be modified</li>\n</ul>\n\n<p>Any method which accepts a <code>CharSequence</code> can operate on all of these equally well. Any method which only accepts a <code>String</code> will require conversion. So using <code>CharSequence</code> as an argument type in all the places where you don't care about the internals is prudent. However you should use <code>String</code> as a return type if you actually return a <code>String</code>, because that avoids possible conversions of returned values if the calling method actually does require a <code>String</code>.</p>\n\n<p>Also note that maps should use <code>String</code> as key type, not <code>CharSequence</code>, as map keys must not change. In other words, sometimes the immutable nature of <code>String</code> is essential.</p>\n\n<h2>Specific code snippet</h2>\n\n<p>As for the code you pasted: simply compile that, and have a look at the JVM bytecode using <code>javap -v</code>. There you will notice that both <code>obj</code> and <code>str</code> are references to the same constant object. As a <code>String</code> is immutable, this kind of sharing is all right.</p>\n\n<p>The <code>+</code> operator of <code>String</code> is compiled as invocations of various <code>StringBuilder.append</code> calls. So it is equivalent to</p>\n\n<pre><code>System.out.println(\n  (new StringBuilder())\n  .append(\"output is : \")\n  .append((Object)obj)\n  .append(\" \")\n  .append(str)\n  .toString()\n)\n</code></pre>\n\n<p>I must confess I'm a bit surprised that my compiler <code>javac 1.6.0_33</code> compiles the <code>+ obj</code> using <code>StringBuilder.append(Object)</code> instead of <code>StringBuilder.append(CharSequence)</code>. The former probably involves a call to the <code>toString()</code> method of the object, whereas the latter should be possible in a more efficient way. On the other hand, <code>String.toString()</code> simply returns the <code>String</code> itself, so there is little penalty there. So  <code>StringBuilder.append(String)</code> might be more efficient by about one method invocation.</p>\n"},{"tags":[],"owner":{"account_id":981398,"reputation":23613,"user_id":1001027,"accept_rate":72,"display_name":"Francisco Spaeth"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1435770958,"creation_date":1341385802,"answer_id":11324071,"question_id":11323962,"body_markdown":"`CharSequence` is a contract ([interface][1]), and `String` is an [implementation][2] of this contract.\r\n\r\n    public final class String extends Object \r\n        implements Serializable, Comparable&lt;String&gt;, CharSequence\r\n\r\nThe [documentation](http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html) for `CharSequence` is:\r\n\r\n&gt; A CharSequence is a readable sequence of char values. This interface\r\n&gt; provides uniform, read-only access to many different kinds of char\r\n&gt; sequences. A char value represents a character in the Basic\r\n&gt; Multilingual Plane (BMP) or a surrogate. Refer to Unicode Character\r\n&gt; Representation for details.\r\n\r\n\r\n  [1]: https://en.m.wikipedia.org/wiki/Interface_(computing)\r\n  [2]: https://en.m.wikipedia.org/wiki/Implementation#Computer_science","title":"Exact difference between CharSequence and String in java","body":"<p><code>CharSequence</code> is a contract (<a href=\"https://en.m.wikipedia.org/wiki/Interface_(computing)\" rel=\"noreferrer\">interface</a>), and <code>String</code> is an <a href=\"https://en.m.wikipedia.org/wiki/Implementation#Computer_science\" rel=\"noreferrer\">implementation</a> of this contract.</p>\n\n<pre><code>public final class String extends Object \n    implements Serializable, Comparable&lt;String&gt;, CharSequence\n</code></pre>\n\n<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"noreferrer\">documentation</a> for <code>CharSequence</code> is:</p>\n\n<blockquote>\n  <p>A CharSequence is a readable sequence of char values. This interface\n  provides uniform, read-only access to many different kinds of char\n  sequences. A char value represents a character in the Basic\n  Multilingual Plane (BMP) or a surrogate. Refer to Unicode Character\n  Representation for details.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":1508032,"reputation":357,"user_id":1410932,"accept_rate":100,"display_name":"Doszi89"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1341385807,"creation_date":1341385807,"answer_id":11324075,"question_id":11323962,"body_markdown":"In charSequence you don&#39;t have very useful methods which are available for String. If you don&#39;t want to look in the documentation, type:\r\n   obj.\r\nand\r\n   str. \r\n\r\nand see what methods your compilator offers you. That&#39;s the basic difference for me.","title":"Exact difference between CharSequence and String in java","body":"<p>In charSequence you don't have very useful methods which are available for String. If you don't want to look in the documentation, type:\n   obj.\nand\n   str. </p>\n\n<p>and see what methods your compilator offers you. That's the basic difference for me.</p>\n"},{"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1341387770,"creation_date":1341387770,"answer_id":11324555,"question_id":11323962,"body_markdown":"&gt; other than the fact that String implements CharSequence and that String is a sequence of character.\r\n\r\nSeveral things happen in your code:\r\n\r\n    CharSequence obj = &quot;hello&quot;;\r\n\r\nThat creates a `String` literal, `&quot;hello&quot;`, which is a `String` object. Being a `String`, which implements `CharSequence`, it is also a `CharSequence`. (you can read [this post about coding to interface][1] for example).\r\n\r\nThe next line:\r\n\r\n    String str = &quot;hello&quot;;\r\n\r\nis a little more complex. `String` literals in Java are held in a pool (interned) so the `&quot;hello&quot;` on this line is the same object (identity) as the `&quot;hello&quot;` on the first line. Therefore, this line only assigns the same `String` literal to `str`.\r\n\r\nAt this point, both `obj` and `str` are references to the `String` literal `&quot;hello&quot;` and are therefore `equals`, `==` and they are both a `String` and a `CharSequence`.\r\n\r\nI suggest you test this code, showing in action what I just wrote:\r\n\r\n    public static void main(String[] args) {\r\n        CharSequence obj = &quot;hello&quot;;\r\n        String str = &quot;hello&quot;;\r\n        System.out.println(&quot;Type of obj: &quot; + obj.getClass().getSimpleName());\r\n        System.out.println(&quot;Type of str: &quot; + str.getClass().getSimpleName());\r\n        System.out.println(&quot;Value of obj: &quot; + obj);\r\n        System.out.println(&quot;Value of str: &quot; + str);\r\n        System.out.println(&quot;Is obj a String? &quot; + (obj instanceof String));\r\n        System.out.println(&quot;Is obj a CharSequence? &quot; + (obj instanceof CharSequence));\r\n        System.out.println(&quot;Is str a String? &quot; + (str instanceof String));\r\n        System.out.println(&quot;Is str a CharSequence? &quot; + (str instanceof CharSequence));\r\n        System.out.println(&quot;Is \\&quot;hello\\&quot; a String? &quot; + (&quot;hello&quot; instanceof String));\r\n        System.out.println(&quot;Is \\&quot;hello\\&quot; a CharSequence? &quot; + (&quot;hello&quot; instanceof CharSequence));\r\n        System.out.println(&quot;str.equals(obj)? &quot; + str.equals(obj));\r\n        System.out.println(&quot;(str == obj)? &quot; + (str == obj));\r\n    }\r\n\r\n  [1]: https://stackoverflow.com/questions/3194278/should-you-always-code-to-interfaces-in-java","title":"Exact difference between CharSequence and String in java","body":"<blockquote>\n  <p>other than the fact that String implements CharSequence and that String is a sequence of character.</p>\n</blockquote>\n\n<p>Several things happen in your code:</p>\n\n<pre><code>CharSequence obj = \"hello\";\n</code></pre>\n\n<p>That creates a <code>String</code> literal, <code>\"hello\"</code>, which is a <code>String</code> object. Being a <code>String</code>, which implements <code>CharSequence</code>, it is also a <code>CharSequence</code>. (you can read <a href=\"https://stackoverflow.com/questions/3194278/should-you-always-code-to-interfaces-in-java\">this post about coding to interface</a> for example).</p>\n\n<p>The next line:</p>\n\n<pre><code>String str = \"hello\";\n</code></pre>\n\n<p>is a little more complex. <code>String</code> literals in Java are held in a pool (interned) so the <code>\"hello\"</code> on this line is the same object (identity) as the <code>\"hello\"</code> on the first line. Therefore, this line only assigns the same <code>String</code> literal to <code>str</code>.</p>\n\n<p>At this point, both <code>obj</code> and <code>str</code> are references to the <code>String</code> literal <code>\"hello\"</code> and are therefore <code>equals</code>, <code>==</code> and they are both a <code>String</code> and a <code>CharSequence</code>.</p>\n\n<p>I suggest you test this code, showing in action what I just wrote:</p>\n\n<pre><code>public static void main(String[] args) {\n    CharSequence obj = \"hello\";\n    String str = \"hello\";\n    System.out.println(\"Type of obj: \" + obj.getClass().getSimpleName());\n    System.out.println(\"Type of str: \" + str.getClass().getSimpleName());\n    System.out.println(\"Value of obj: \" + obj);\n    System.out.println(\"Value of str: \" + str);\n    System.out.println(\"Is obj a String? \" + (obj instanceof String));\n    System.out.println(\"Is obj a CharSequence? \" + (obj instanceof CharSequence));\n    System.out.println(\"Is str a String? \" + (str instanceof String));\n    System.out.println(\"Is str a CharSequence? \" + (str instanceof CharSequence));\n    System.out.println(\"Is \\\"hello\\\" a String? \" + (\"hello\" instanceof String));\n    System.out.println(\"Is \\\"hello\\\" a CharSequence? \" + (\"hello\" instanceof CharSequence));\n    System.out.println(\"str.equals(obj)? \" + str.equals(obj));\n    System.out.println(\"(str == obj)? \" + (str == obj));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2867503,"reputation":31,"user_id":2461520,"display_name":"Patrick Campbell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1379704216,"creation_date":1379704216,"answer_id":18924163,"question_id":11323962,"body_markdown":"Consider UTF-8. In UTF-8 Unicode code points are built from one or more bytes. A class encapsulating a UTF-8 byte array can implement the CharSequence interface but is most decidedly not a String. Certainly you can&#39;t pass a UTF-8 byte array where a String is expected but you certainly can pass a UTF-8 wrapper class that implements CharSequence when the contract is relaxed to allow a CharSequence. On my project, I am developing a class called CBTF8Field (Compressed Binary Transfer Format - Eight Bit) to provide data compression for xml and am looking to use the CharSequence interface to implement conversions from CBTF8 byte arrays to/from character arrays (UTF-16) and byte arrays (UTF-8).\r\n\r\nThe reason I came here was to get a complete understanding of the subsequence contract.","title":"Exact difference between CharSequence and String in java","body":"<p>Consider UTF-8. In UTF-8 Unicode code points are built from one or more bytes. A class encapsulating a UTF-8 byte array can implement the CharSequence interface but is most decidedly not a String. Certainly you can't pass a UTF-8 byte array where a String is expected but you certainly can pass a UTF-8 wrapper class that implements CharSequence when the contract is relaxed to allow a CharSequence. On my project, I am developing a class called CBTF8Field (Compressed Binary Transfer Format - Eight Bit) to provide data compression for xml and am looking to use the CharSequence interface to implement conversions from CBTF8 byte arrays to/from character arrays (UTF-16) and byte arrays (UTF-8).</p>\n\n<p>The reason I came here was to get a complete understanding of the subsequence contract.</p>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":98,"is_accepted":false,"score":98,"last_activity_date":1696611647,"creation_date":1413940727,"answer_id":26498954,"question_id":11323962,"body_markdown":"# tl;dr\r\n\r\nOne is an interface ([`CharSequence`](https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html)) while other is a concrete implementation of that interface ([`String`](https://docs.oracle.com/javase/8/docs/api/java/lang/String.html)).\r\n\r\n    CharSequence animal = &quot;cat&quot;  // `String` object presented as the interface `CharSequence`.\r\n\r\nJust like [`ArrayList`][1] is a [`List`][2], and [`HashMap`][3] is a [`Map`][4], so too `String` is a `CharSequence`.\r\n\r\nAs an interface, normally the `CharSequence` would be more commonly seen than `String`, but some twisted history resulted in the interface being defined years *after* the implementation. So in older APIs we often see `String` while in newer APIs we tend to see `CharSequence` used to define arguments and return types.\r\n\r\n# Details\r\n\r\nNowadays we know that generally an API/framework should focus on exporting interfaces primarily and concrete classes secondarily. But we did not always know this lesson so well.\r\n\r\nThe `String` class came first in Java. Only later did they place a front-facing interface, `CharSequence`.\r\n\r\n## Twisted History\r\n\r\nA little history might help with understanding.\r\n\r\nIn its early days, Java was rushed to market a bit ahead of its time, due to the Internet/Web mania animating the industry. Some libraries were not as well thought-through as they should have been. String handling was one of those areas. \r\n\r\nAlso, Java was one of the earliest production-oriented non-academic [Object-Oriented Programming (OOP)][5] environments. The only successful real-world rubber-meets-the-road implementations of OOP before that was some limited versions of [SmallTalk][6], then [Objective-C][7] with [NeXTSTEP][8]/[OpenStep][9]. So, many practical lessons were yet to be learned.\r\n\r\nJava started with the [`String`][10] class and [`StringBuffer`][11] class. But those two classes were unrelated, not tied to each other by inheritance nor interface. Later, the Java team recognized that there should have been a unifying tie between string-related implementations to make them interchangeable. In Java 4 the team added the [`CharSequence`][12] interface and retroactively implemented that interface on String and String Buffer, as well as adding another implementation [`CharBuffer`][13]. Later in Java 5 they added [`StringBuilder`][14], basically a unsynchronized and therefore somewhat faster version of `StringBuffer`.\r\n\r\nSo these string-oriented classes are a bit of a mess, and a little confusing to learn about. Many libraries and interfaces were built to take and return `String` objects. Nowadays such libraries should generally be built to expect `CharSequence`. But (a) `String` seems to still dominate the mindspace, and (b) there may be some subtle technical issues when mixing the various `CharSequence` implementations. With the 20/20 vision of hindsight we can see that all this string stuff could have been better handled, but here we are. \r\n\r\nIdeally Java would have started with an interface and/or superclass that would be used in many places where we now use `String`, just as we use the [`Collection`][15] or [`List`][16] interfaces in place of the [`ArrayList`][17] or [`LinkedList`][18] implementations.\r\n\r\n## Interface Versus Class\r\n\r\nThe key difference about `CharSequence` is that it is an [interface][19], not an [implementation][20]. That means you cannot directly instantiate a `CharSequence`. Rather you instantiate one of the classes that implements that interface. \r\n\r\nFor example, here we have `x` that looks like a `CharSequence` but underneath is actually a `StringBuilder` object.\r\n\r\n    CharSequence x = new StringBuilder( &quot;dog&quot; );  // Looks like a `CharSequence` but is actually a `StringBuilder` instance.\r\n    \r\nThis becomes less obvious when using a String literal. Keep in mind that when you see source code with just quote marks around characters, the compiler is translating that into a String object.\r\n\r\n    CharSequence y = &quot;cat&quot;;  // Looks like a `CharSequence` but is actually a `String` instance.\r\n\r\n\r\n## Literal versus constructor\r\n\r\nThere are some subtle differences between `&quot;cat&quot;` and `new String(&quot;cat&quot;)` as discussed in [this other Question][21], but are irrelevant here.\r\n\r\n## Class Diagram\r\n\r\nThis class diagram may help to guide you. I noted the version of Java in which they appeared to demonstrate how much change has churned through these classes and interfaces.\r\n\r\n![diagram showing the various string-related classes and interfaces as of Java 8][22]\r\n\r\n\r\n## Text Blocks \r\n\r\nOther than adding more [Unicode][23] characters including a multitude of [emoji][24], in recent years not much has changed in Java for working with text. Until *text blocks*. \r\n\r\nText blocks are a new way of better handling the tedium of string literals with multiple lines or [character-escaping][25]. This would make writing embedded code strings such as HTML, XML, SQL, or JSON much more convenient.\r\n\r\nTo quote [JEP 378][26]:\r\n\r\n&gt;A text block is a multi-line string literal that avoids the need for most escape sequences, automatically formats the string in a predictable way, and gives the developer control over the format when desired.\r\n\r\nThe text blocks feature does *not* introduce a new [data type][27]. Text blocks are merely a new syntax for writing a `String` literal. A text block produces a `String` object, just like the conventional literal syntax. A text block produces a `String` object, which is also a `CharSequence` object, as discussed above.\r\n\r\n### SQL example\r\n\r\nTo quote JSR 378 again…\r\n\r\nUsing &quot;one-dimensional&quot; string literals.\r\n\r\n    String query = &quot;SELECT \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot; FROM \\&quot;EMPLOYEE_TB\\&quot;\\n&quot; +\r\n                   &quot;WHERE \\&quot;CITY\\&quot; = &#39;INDIANAPOLIS&#39;\\n&quot; +\r\n                   &quot;ORDER BY \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot;;\\n&quot;;\r\n\r\nUsing a &quot;two-dimensional&quot; block of text\r\n\r\n    String query = &quot;&quot;&quot;\r\n                   SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\r\n                   WHERE &quot;CITY&quot; = &#39;INDIANAPOLIS&#39;\r\n                   ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\r\n                   &quot;&quot;&quot;;\r\n\r\nText blocks are found in [Java 15][28] and later, per [*JEP 378: Text Blocks*](https://openjdk.java.net/jeps/378).\r\n\r\nFirst previewed in Java 13, under [JEP 355: Text Blocks (Preview)](http://openjdk.java.net/jeps/355). Then previewed again in Java 14 under [*JEP 368: Text Blocks (Second Preview)*](https://openjdk.java.net/jeps/368).\r\n\r\nThis effort was preceded by [*JEP 326: Raw String Literals (Preview)*](https://openjdk.java.net/jeps/326). The concepts were reworked to produce the *Text Blocks* feature instead. \r\n\r\n## String templates\r\n\r\nString templates complement Java&#39;s existing string literals and text blocks by coupling literal text with embedded expressions and template processors to produce specialized results.\r\n\r\nSee [*JEP 430: String Templates (Preview)*][29]. \r\n\r\nThis feature is being previewed in Java 21. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\r\n  [5]: https://en.wikipedia.org/wiki/Object-oriented_programming\r\n  [6]: http://en.wikipedia.org/wiki/Smalltalk\r\n  [7]: http://en.wikipedia.org/wiki/Objective-C\r\n  [8]: http://en.wikipedia.org/wiki/NeXTSTEP\r\n  [9]: http://en.wikipedia.org/wiki/OpenStep\r\n  [10]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\r\n  [11]: http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html\r\n  [12]: http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\r\n  [13]: http://docs.oracle.com/javase/8/docs/api/java/nio/CharBuffer.html\r\n  [14]: http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\r\n  [15]: http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html\r\n  [16]: http://docs.oracle.com/javase/8/docs/api/java/util/List.html\r\n  [17]: http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\r\n  [18]: http://docs.oracle.com/javase/8/docs/api/java/util/LinkedList.html\r\n  [19]: https://en.wikipedia.org/wiki/Interface_(computing)\r\n  [20]: https://en.wikipedia.org/wiki/Implementation\r\n  [21]: https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java\r\n  [22]: https://i.stack.imgur.com/tmrd7.jpg\r\n  [23]: https://en.wikipedia.org/wiki/Unicode\r\n  [24]: https://en.wikipedia.org/wiki/Emoji\r\n  [25]: https://en.wikipedia.org/wiki/Escape_character\r\n  [26]: https://openjdk.java.net/jeps/378\r\n  [27]: https://en.wikipedia.org/wiki/Data_type\r\n  [28]: https://en.wikipedia.org/wiki/Java_version_history#Java_SE_15\r\n  [29]: https://openjdk.org/jeps/430","title":"Exact difference between CharSequence and String in java","body":"<h1>tl;dr</h1>\n<p>One is an interface (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"nofollow noreferrer\"><code>CharSequence</code></a>) while other is a concrete implementation of that interface (<a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a>).</p>\n<pre><code>CharSequence animal = &quot;cat&quot;  // `String` object presented as the interface `CharSequence`.\n</code></pre>\n<p>Just like <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a>, and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\"><code>HashMap</code></a> is a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\"><code>Map</code></a>, so too <code>String</code> is a <code>CharSequence</code>.</p>\n<p>As an interface, normally the <code>CharSequence</code> would be more commonly seen than <code>String</code>, but some twisted history resulted in the interface being defined years <em>after</em> the implementation. So in older APIs we often see <code>String</code> while in newer APIs we tend to see <code>CharSequence</code> used to define arguments and return types.</p>\n<h1>Details</h1>\n<p>Nowadays we know that generally an API/framework should focus on exporting interfaces primarily and concrete classes secondarily. But we did not always know this lesson so well.</p>\n<p>The <code>String</code> class came first in Java. Only later did they place a front-facing interface, <code>CharSequence</code>.</p>\n<h2>Twisted History</h2>\n<p>A little history might help with understanding.</p>\n<p>In its early days, Java was rushed to market a bit ahead of its time, due to the Internet/Web mania animating the industry. Some libraries were not as well thought-through as they should have been. String handling was one of those areas.</p>\n<p>Also, Java was one of the earliest production-oriented non-academic <a href=\"https://en.wikipedia.org/wiki/Object-oriented_programming\" rel=\"nofollow noreferrer\">Object-Oriented Programming (OOP)</a> environments. The only successful real-world rubber-meets-the-road implementations of OOP before that was some limited versions of <a href=\"http://en.wikipedia.org/wiki/Smalltalk\" rel=\"nofollow noreferrer\">SmallTalk</a>, then <a href=\"http://en.wikipedia.org/wiki/Objective-C\" rel=\"nofollow noreferrer\">Objective-C</a> with <a href=\"http://en.wikipedia.org/wiki/NeXTSTEP\" rel=\"nofollow noreferrer\">NeXTSTEP</a>/<a href=\"http://en.wikipedia.org/wiki/OpenStep\" rel=\"nofollow noreferrer\">OpenStep</a>. So, many practical lessons were yet to be learned.</p>\n<p>Java started with the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> class and <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuffer.html\" rel=\"nofollow noreferrer\"><code>StringBuffer</code></a> class. But those two classes were unrelated, not tied to each other by inheritance nor interface. Later, the Java team recognized that there should have been a unifying tie between string-related implementations to make them interchangeable. In Java 4 the team added the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"nofollow noreferrer\"><code>CharSequence</code></a> interface and retroactively implemented that interface on String and String Buffer, as well as adding another implementation <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/CharBuffer.html\" rel=\"nofollow noreferrer\"><code>CharBuffer</code></a>. Later in Java 5 they added <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/StringBuilder.html\" rel=\"nofollow noreferrer\"><code>StringBuilder</code></a>, basically a unsynchronized and therefore somewhat faster version of <code>StringBuffer</code>.</p>\n<p>So these string-oriented classes are a bit of a mess, and a little confusing to learn about. Many libraries and interfaces were built to take and return <code>String</code> objects. Nowadays such libraries should generally be built to expect <code>CharSequence</code>. But (a) <code>String</code> seems to still dominate the mindspace, and (b) there may be some subtle technical issues when mixing the various <code>CharSequence</code> implementations. With the 20/20 vision of hindsight we can see that all this string stuff could have been better handled, but here we are.</p>\n<p>Ideally Java would have started with an interface and/or superclass that would be used in many places where we now use <code>String</code>, just as we use the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/Collection.html\" rel=\"nofollow noreferrer\"><code>Collection</code></a> or <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/List.html\" rel=\"nofollow noreferrer\"><code>List</code></a> interfaces in place of the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\"><code>ArrayList</code></a> or <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/LinkedList.html\" rel=\"nofollow noreferrer\"><code>LinkedList</code></a> implementations.</p>\n<h2>Interface Versus Class</h2>\n<p>The key difference about <code>CharSequence</code> is that it is an <a href=\"https://en.wikipedia.org/wiki/Interface_(computing)\" rel=\"nofollow noreferrer\">interface</a>, not an <a href=\"https://en.wikipedia.org/wiki/Implementation\" rel=\"nofollow noreferrer\">implementation</a>. That means you cannot directly instantiate a <code>CharSequence</code>. Rather you instantiate one of the classes that implements that interface.</p>\n<p>For example, here we have <code>x</code> that looks like a <code>CharSequence</code> but underneath is actually a <code>StringBuilder</code> object.</p>\n<pre><code>CharSequence x = new StringBuilder( &quot;dog&quot; );  // Looks like a `CharSequence` but is actually a `StringBuilder` instance.\n</code></pre>\n<p>This becomes less obvious when using a String literal. Keep in mind that when you see source code with just quote marks around characters, the compiler is translating that into a String object.</p>\n<pre><code>CharSequence y = &quot;cat&quot;;  // Looks like a `CharSequence` but is actually a `String` instance.\n</code></pre>\n<h2>Literal versus constructor</h2>\n<p>There are some subtle differences between <code>&quot;cat&quot;</code> and <code>new String(&quot;cat&quot;)</code> as discussed in <a href=\"https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java\">this other Question</a>, but are irrelevant here.</p>\n<h2>Class Diagram</h2>\n<p>This class diagram may help to guide you. I noted the version of Java in which they appeared to demonstrate how much change has churned through these classes and interfaces.</p>\n<p><img src=\"https://i.stack.imgur.com/tmrd7.jpg\" alt=\"diagram showing the various string-related classes and interfaces as of Java 8\" /></p>\n<h2>Text Blocks</h2>\n<p>Other than adding more <a href=\"https://en.wikipedia.org/wiki/Unicode\" rel=\"nofollow noreferrer\">Unicode</a> characters including a multitude of <a href=\"https://en.wikipedia.org/wiki/Emoji\" rel=\"nofollow noreferrer\">emoji</a>, in recent years not much has changed in Java for working with text. Until <em>text blocks</em>.</p>\n<p>Text blocks are a new way of better handling the tedium of string literals with multiple lines or <a href=\"https://en.wikipedia.org/wiki/Escape_character\" rel=\"nofollow noreferrer\">character-escaping</a>. This would make writing embedded code strings such as HTML, XML, SQL, or JSON much more convenient.</p>\n<p>To quote <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\">JEP 378</a>:</p>\n<blockquote>\n<p>A text block is a multi-line string literal that avoids the need for most escape sequences, automatically formats the string in a predictable way, and gives the developer control over the format when desired.</p>\n</blockquote>\n<p>The text blocks feature does <em>not</em> introduce a new <a href=\"https://en.wikipedia.org/wiki/Data_type\" rel=\"nofollow noreferrer\">data type</a>. Text blocks are merely a new syntax for writing a <code>String</code> literal. A text block produces a <code>String</code> object, just like the conventional literal syntax. A text block produces a <code>String</code> object, which is also a <code>CharSequence</code> object, as discussed above.</p>\n<h3>SQL example</h3>\n<p>To quote JSR 378 again…</p>\n<p>Using &quot;one-dimensional&quot; string literals.</p>\n<pre><code>String query = &quot;SELECT \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot; FROM \\&quot;EMPLOYEE_TB\\&quot;\\n&quot; +\n               &quot;WHERE \\&quot;CITY\\&quot; = 'INDIANAPOLIS'\\n&quot; +\n               &quot;ORDER BY \\&quot;EMP_ID\\&quot;, \\&quot;LAST_NAME\\&quot;;\\n&quot;;\n</code></pre>\n<p>Using a &quot;two-dimensional&quot; block of text</p>\n<pre><code>String query = &quot;&quot;&quot;\n               SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;\n               WHERE &quot;CITY&quot; = 'INDIANAPOLIS'\n               ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;\n               &quot;&quot;&quot;;\n</code></pre>\n<p>Text blocks are found in <a href=\"https://en.wikipedia.org/wiki/Java_version_history#Java_SE_15\" rel=\"nofollow noreferrer\">Java 15</a> and later, per <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\"><em>JEP 378: Text Blocks</em></a>.</p>\n<p>First previewed in Java 13, under <a href=\"http://openjdk.java.net/jeps/355\" rel=\"nofollow noreferrer\">JEP 355: Text Blocks (Preview)</a>. Then previewed again in Java 14 under <a href=\"https://openjdk.java.net/jeps/368\" rel=\"nofollow noreferrer\"><em>JEP 368: Text Blocks (Second Preview)</em></a>.</p>\n<p>This effort was preceded by <a href=\"https://openjdk.java.net/jeps/326\" rel=\"nofollow noreferrer\"><em>JEP 326: Raw String Literals (Preview)</em></a>. The concepts were reworked to produce the <em>Text Blocks</em> feature instead.</p>\n<h2>String templates</h2>\n<p>String templates complement Java's existing string literals and text blocks by coupling literal text with embedded expressions and template processors to produce specialized results.</p>\n<p>See <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\"><em>JEP 430: String Templates (Preview)</em></a>.</p>\n<p>This feature is being previewed in Java 21.</p>\n"}],"owner":{"account_id":970670,"reputation":1917,"user_id":1845188,"accept_rate":60,"display_name":"Amith"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":135508,"favorite_count":0,"down_vote_count":5,"up_vote_count":115,"closed_date":1527400255,"accepted_answer_id":11324030,"answer_count":8,"score":110,"last_activity_date":1696611647,"creation_date":1341385236,"question_id":11323962,"body_markdown":"I read this [previous post][1]. Can any one say what the exact difference between `CharSequence` and String is, other than the fact that [`String`][2] implements [`CharSequence`][3] and that `String` is a sequence of character? For example:\r\n\r\n    CharSequence obj = &quot;hello&quot;;\r\n    String str = &quot;hello&quot;;\r\n    System.out.println(&quot;output is : &quot; + obj + &quot;  &quot; + str);\r\n\r\nWhat happens when &quot;hello&quot; is assigned to `obj` and again to `str` ?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/3600635/what-is-the-difference-between-charsequence-and-a-string\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html","title":"Exact difference between CharSequence and String in java","body":"<p>I read this <a href=\"https://stackoverflow.com/questions/3600635/what-is-the-difference-between-charsequence-and-a-string\">previous post</a>. Can any one say what the exact difference between <code>CharSequence</code> and String is, other than the fact that <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/String.html\" rel=\"noreferrer\"><code>String</code></a> implements <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/CharSequence.html\" rel=\"noreferrer\"><code>CharSequence</code></a> and that <code>String</code> is a sequence of character? For example:</p>\n\n<pre><code>CharSequence obj = \"hello\";\nString str = \"hello\";\nSystem.out.println(\"output is : \" + obj + \"  \" + str);\n</code></pre>\n\n<p>What happens when \"hello\" is assigned to <code>obj</code> and again to <code>str</code> ?</p>\n"},{"tags":["java","reactjs","spring-boot","docker","amazon-ec2"],"answers":[{"tags":[],"owner":{"account_id":18346641,"reputation":61,"user_id":13361708,"display_name":"heyValdemar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696611454,"creation_date":1696611454,"answer_id":77246243,"question_id":77245674,"body_markdown":"Your issue seems to be that your applications (Spring Boot API and React app) are running inside Docker containers on an AWS EC2 instance but you&#39;re unable to access them externally. Let&#39;s break this down step by step:\r\n\r\n1. **Docker Port Mapping**:\r\n   From the logs, we can see that your Spring Boot application is running on port 8080 inside the Docker container and is mapped to port 8080 on the host. Similarly, your React app is running on port 5173 inside its Docker container and mapped to port 80 on the host.\r\n\r\n2. **Accessing the Applications**:\r\n   - Spring Boot API: Access it using `http://[EC2_INSTANCE_PUBLIC_IP]:8080/`\r\n   - React app: Access it using `http://[EC2_INSTANCE_PUBLIC_IP]/` (since it&#39;s on port 80, you don&#39;t need to specify the port).\r\n\r\n3. **AWS Security Groups**:\r\n   Ensure that the AWS security group associated with your EC2 instance allows incoming traffic on the necessary ports:\r\n   - Port 80 for the React app.\r\n   - Port 8080 for the Spring Boot API.\r\n\r\n4. **Docker Networking**:\r\n   Your applications seem to be running and listening correctly, as they&#39;re accessible via `localhost` inside the container. However, always ensure you&#39;re not binding your applications to `localhost` or `127.0.0.1` inside the container if you want to access them externally.\r\n\r\n5. **Other Considerations**:\r\n   - React App: Ensure that your React app, if it needs to communicate with your Spring Boot API, uses the correct base URL for the API endpoints. If your React app makes calls to the API using `localhost`, it will not work because inside the React container, `localhost` refers to the container itself and not the host or other containers.\r\n   - Application Configuration: Ensure there&#39;s no configuration inside your Spring Boot or React application that restricts access from certain IPs or domains.\r\n\r\n**Action Steps**:\r\n1. If you haven&#39;t already, check the security group rules associated with the EC2 instance to ensure ports 80 and 8080 are open to incoming traffic.\r\n2. Try accessing the applications using the EC2 public IP as mentioned above.\r\n3. If your React app communicates with the Spring Boot API, ensure it&#39;s using the correct base URL (EC2 IP and port).\r\n4. Ensure no internal application configurations block external requests.\r\n\r\nIf after trying the above you&#39;re still facing issues, consider sharing more specific details about the problem you&#39;re encountering (e.g., error messages, exact steps taken, etc.) so I can provide more targeted assistance.","title":"React app showing data from Spring Boot Api","body":"<p>Your issue seems to be that your applications (Spring Boot API and React app) are running inside Docker containers on an AWS EC2 instance but you're unable to access them externally. Let's break this down step by step:</p>\n<ol>\n<li><p><strong>Docker Port Mapping</strong>:\nFrom the logs, we can see that your Spring Boot application is running on port 8080 inside the Docker container and is mapped to port 8080 on the host. Similarly, your React app is running on port 5173 inside its Docker container and mapped to port 80 on the host.</p>\n</li>\n<li><p><strong>Accessing the Applications</strong>:</p>\n<ul>\n<li>Spring Boot API: Access it using <code>http://[EC2_INSTANCE_PUBLIC_IP]:8080/</code></li>\n<li>React app: Access it using <code>http://[EC2_INSTANCE_PUBLIC_IP]/</code> (since it's on port 80, you don't need to specify the port).</li>\n</ul>\n</li>\n<li><p><strong>AWS Security Groups</strong>:\nEnsure that the AWS security group associated with your EC2 instance allows incoming traffic on the necessary ports:</p>\n<ul>\n<li>Port 80 for the React app.</li>\n<li>Port 8080 for the Spring Boot API.</li>\n</ul>\n</li>\n<li><p><strong>Docker Networking</strong>:\nYour applications seem to be running and listening correctly, as they're accessible via <code>localhost</code> inside the container. However, always ensure you're not binding your applications to <code>localhost</code> or <code>127.0.0.1</code> inside the container if you want to access them externally.</p>\n</li>\n<li><p><strong>Other Considerations</strong>:</p>\n<ul>\n<li>React App: Ensure that your React app, if it needs to communicate with your Spring Boot API, uses the correct base URL for the API endpoints. If your React app makes calls to the API using <code>localhost</code>, it will not work because inside the React container, <code>localhost</code> refers to the container itself and not the host or other containers.</li>\n<li>Application Configuration: Ensure there's no configuration inside your Spring Boot or React application that restricts access from certain IPs or domains.</li>\n</ul>\n</li>\n</ol>\n<p><strong>Action Steps</strong>:</p>\n<ol>\n<li>If you haven't already, check the security group rules associated with the EC2 instance to ensure ports 80 and 8080 are open to incoming traffic.</li>\n<li>Try accessing the applications using the EC2 public IP as mentioned above.</li>\n<li>If your React app communicates with the Spring Boot API, ensure it's using the correct base URL (EC2 IP and port).</li>\n<li>Ensure no internal application configurations block external requests.</li>\n</ol>\n<p>If after trying the above you're still facing issues, consider sharing more specific details about the problem you're encountering (e.g., error messages, exact steps taken, etc.) so I can provide more targeted assistance.</p>\n"}],"owner":{"account_id":20823528,"reputation":63,"user_id":21365300,"display_name":"Ahmad Mujtaba"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1696611454,"creation_date":1696605909,"question_id":77245674,"body_markdown":"I am using AWS to host the server and Spring boot API and react app as docker images on the EC2 instance. I have checked all the logs by doing SSH to my instance all the ports have given as they have to, and I also checked with security groups as well but nothing works. \r\n\r\n    CONTAINER ID   IMAGE                                              COMMAND                  CREATED          STATUS                 PORTS                                       NAMES\r\n    21aba65e815e   ahmadmujtaba200210/fullstack-react:latest          &quot;npm run dev&quot;            19 minutes ago   Up 19 minutes          0.0.0.0:80-&gt;5173/tcp, :::80-&gt;5173/tcp       ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-react-d0b5d5a587e89cc42b00\r\n    8110e126d33b   ahmadmujtaba200210/fullstack:06.10.2023.14.52.47   &quot;java -cp @/app/jib-…&quot;   19 minutes ago   Up 19 minutes          0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-96b19dfc91cccd8beb01\r\n    34ffc605a8c0   amazon/amazon-ecs-agent:latest                     &quot;/agent&quot;                 3 hours ago      Up 3 hours (healthy)                                               ecs-agent\r\n\r\n\r\nSpring boot Docker logs on EC2 instance:\r\n\r\n     .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::                (v3.1.2)\r\n    \r\n    2023-10-06T14:54:38.069Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Starting FullstackApplication using Java 17.0.8.1 with PID 1 (/app/classes started by root in /)\r\n    2023-10-06T14:54:38.082Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-10-06T14:54:38.212Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set &#39;spring.devtools.add-properties&#39; to &#39;false&#39; to disable\r\n    2023-10-06T14:54:38.213Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the &#39;logging.level.web&#39; property to &#39;DEBUG&#39;\r\n    2023-10-06T14:54:39.811Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-06T14:54:39.817Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\r\n    2023-10-06T14:54:39.940Z  INFO 1 --- [  restartedMain] .RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.amigoes.fullstack.customer.CustomerRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\r\n    2023-10-06T14:54:39.942Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 0 JDBC repository interfaces.\r\n    2023-10-06T14:54:39.995Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\r\n    2023-10-06T14:54:40.000Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-10-06T14:54:40.108Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 1 JPA repository interfaces.\r\n    2023-10-06T14:54:41.881Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2023-10-06T14:54:41.899Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-10-06T14:54:41.900Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n    2023-10-06T14:54:42.003Z  INFO 1 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-10-06T14:54:42.010Z  INFO 1 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3747 ms\r\n    2023-10-06T14:54:42.366Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.16.3 by Redgate\r\n    2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi\r\n    2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    :\r\n    2023-10-06T14:54:42.379Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2023-10-06T14:54:42.951Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f97503\r\n    2023-10-06T14:54:42.953Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2023-10-06T14:54:42.971Z  INFO 1 --- [  restartedMain] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:PostgreSQL:&lt;URL removed intentionally&gt;:5432/customer (PostgreSQL 14.7)\r\n    2023-10-06T14:54:43.032Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.039s)\r\n    2023-10-06T14:54:43.113Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;public&quot;: 3\r\n    2023-10-06T14:54:43.119Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Schema &quot;public&quot; is up to date. No migration necessary.\r\n    2023-10-06T14:54:43.345Z  INFO 1 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-10-06T14:54:43.474Z  INFO 1 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n    2023-10-06T14:54:43.482Z  INFO 1 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n    2023-10-06T14:54:43.765Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-10-06T14:54:43.982Z  INFO 1 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n    2023-10-06T14:54:44.293Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-10-06T14:54:45.121Z  INFO 1 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-10-06T14:54:45.125Z  INFO 1 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-10-06T14:54:45.838Z  WARN 1 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n    2023-10-06T14:54:46.432Z  INFO 1 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\r\n    2023-10-06T14:54:46.487Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n    2023-10-06T14:54:46.522Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Started FullstackApplication in 9.448 seconds (process running for 10.808)\r\n    Hibernate:\r\n        select\r\n            nextval(&#39;customer_id_seq&#39;)\r\n    Hibernate:\r\n        insert\r\n        into\r\n            customer\r\n            (age,email,gender,name,id)\r\n        values\r\n            (?,?,?,?,?)\r\n\r\n\r\nReact Docker app logs on EC2 instance:\r\n\r\n    &gt; engicodes@0.0.0 dev\r\n    &gt; vite --host\r\n    \r\n    \r\n      VITE v4.4.9  ready in 1607 ms\r\n    \r\n      ➜  Local:   http://localhost:5173/\r\n      ➜  Network: http://172.17.0.3:5173/\r\n\r\n","title":"React app showing data from Spring Boot Api","body":"<p>I am using AWS to host the server and Spring boot API and react app as docker images on the EC2 instance. I have checked all the logs by doing SSH to my instance all the ports have given as they have to, and I also checked with security groups as well but nothing works.</p>\n<pre><code>CONTAINER ID   IMAGE                                              COMMAND                  CREATED          STATUS                 PORTS                                       NAMES\n21aba65e815e   ahmadmujtaba200210/fullstack-react:latest          &quot;npm run dev&quot;            19 minutes ago   Up 19 minutes          0.0.0.0:80-&gt;5173/tcp, :::80-&gt;5173/tcp       ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-react-d0b5d5a587e89cc42b00\n8110e126d33b   ahmadmujtaba200210/fullstack:06.10.2023.14.52.47   &quot;java -cp @/app/jib-…&quot;   19 minutes ago   Up 19 minutes          0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   ecs-awseb-Fullstack-api-env-ewuh4fh3ed-21-fullstack-96b19dfc91cccd8beb01\n34ffc605a8c0   amazon/amazon-ecs-agent:latest                     &quot;/agent&quot;                 3 hours ago      Up 3 hours (healthy)                                               ecs-agent\n</code></pre>\n<p>Spring boot Docker logs on EC2 instance:</p>\n<pre><code> .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-10-06T14:54:38.069Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Starting FullstackApplication using Java 17.0.8.1 with PID 1 (/app/classes started by root in /)\n2023-10-06T14:54:38.082Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-10-06T14:54:38.212Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable\n2023-10-06T14:54:38.213Z  INFO 1 --- [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'\n2023-10-06T14:54:39.811Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-06T14:54:39.817Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JDBC repositories in DEFAULT mode.\n2023-10-06T14:54:39.940Z  INFO 1 --- [  restartedMain] .RepositoryConfigurationExtensionSupport : Spring Data JDBC - Could not safely identify store assignment for repository candidate interface com.amigoes.fullstack.customer.CustomerRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.\n2023-10-06T14:54:39.942Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 109 ms. Found 0 JDBC repository interfaces.\n2023-10-06T14:54:39.995Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-10-06T14:54:40.000Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-10-06T14:54:40.108Z  INFO 1 --- [  restartedMain] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 95 ms. Found 1 JPA repository interfaces.\n2023-10-06T14:54:41.881Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-10-06T14:54:41.899Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-10-06T14:54:41.900Z  INFO 1 --- [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-10-06T14:54:42.003Z  INFO 1 --- [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-10-06T14:54:42.010Z  INFO 1 --- [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3747 ms\n2023-10-06T14:54:42.366Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : Flyway Community Edition 9.16.3 by Redgate\n2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    : See release notes here: https://rd.gt/416ObMi\n2023-10-06T14:54:42.367Z  INFO 1 --- [  restartedMain] o.f.c.internal.license.VersionPrinter    :\n2023-10-06T14:54:42.379Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-10-06T14:54:42.951Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3f97503\n2023-10-06T14:54:42.953Z  INFO 1 --- [  restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-10-06T14:54:42.971Z  INFO 1 --- [  restartedMain] o.f.c.i.database.base.BaseDatabaseType   : Database: jdbc:PostgreSQL:&lt;URL removed intentionally&gt;:5432/customer (PostgreSQL 14.7)\n2023-10-06T14:54:43.032Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbValidate     : Successfully validated 3 migrations (execution time 00:00.039s)\n2023-10-06T14:54:43.113Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;public&quot;: 3\n2023-10-06T14:54:43.119Z  INFO 1 --- [  restartedMain] o.f.core.internal.command.DbMigrate      : Schema &quot;public&quot; is up to date. No migration necessary.\n2023-10-06T14:54:43.345Z  INFO 1 --- [  restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-10-06T14:54:43.474Z  INFO 1 --- [  restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-10-06T14:54:43.482Z  INFO 1 --- [  restartedMain] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-10-06T14:54:43.765Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-10-06T14:54:43.982Z  INFO 1 --- [  restartedMain] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-10-06T14:54:44.293Z  INFO 1 --- [  restartedMain] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-10-06T14:54:45.121Z  INFO 1 --- [  restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-10-06T14:54:45.125Z  INFO 1 --- [  restartedMain] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-10-06T14:54:45.838Z  WARN 1 --- [  restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-10-06T14:54:46.432Z  INFO 1 --- [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729\n2023-10-06T14:54:46.487Z  INFO 1 --- [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-10-06T14:54:46.522Z  INFO 1 --- [  restartedMain] c.a.fullstack.FullstackApplication       : Started FullstackApplication in 9.448 seconds (process running for 10.808)\nHibernate:\n    select\n        nextval('customer_id_seq')\nHibernate:\n    insert\n    into\n        customer\n        (age,email,gender,name,id)\n    values\n        (?,?,?,?,?)\n</code></pre>\n<p>React Docker app logs on EC2 instance:</p>\n<pre><code>&gt; engicodes@0.0.0 dev\n&gt; vite --host\n\n\n  VITE v4.4.9  ready in 1607 ms\n\n  ➜  Local:   http://localhost:5173/\n  ➜  Network: http://172.17.0.3:5173/\n</code></pre>\n"},{"tags":["java","string","stringbuilder"],"comments":[{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":2,"creation_date":1696611301,"post_id":77246226,"comment_id":136180129,"body_markdown":"`getTipo()==t` - use `equals` to compare objects (strings) not reference equality.  As in `getTipo().equals(t)`.  Also should probably ignore case.","body":"<code>getTipo()==t</code> - use <code>equals</code> to compare objects (strings) not reference equality.  As in <code>getTipo().equals(t)</code>.  Also should probably ignore case."},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":3,"creation_date":1696611377,"post_id":77246226,"comment_id":136180147,"body_markdown":"Don&#39;t compare Strings using `==` or `!=`. Use the `equals(...)` or the `equalsIgnoreCase(...)` method instead. Understand that `==` checks if the two *object references* are the same which is not what you&#39;re interested in. The methods on the other hand check if the two Strings have the same characters in the same order, and that&#39;s what matters here.","body":"Don&#39;t compare Strings using <code>==</code> or <code>!=</code>. Use the <code>equals(...)</code> or the <code>equalsIgnoreCase(...)</code> method instead. Understand that <code>==</code> checks if the two <i>object references</i> are the same which is not what you&#39;re interested in. The methods on the other hand check if the two Strings have the same characters in the same order, and that&#39;s what matters here."}],"owner":{"account_id":29566401,"reputation":48,"user_id":22659708,"display_name":"Lorelius Hogglefart"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1696611359,"answer_count":0,"score":1,"last_activity_date":1696611440,"creation_date":1696611184,"question_id":77246226,"body_markdown":"We just started Java at school and I was wondering why this search algorithm isn&#39;t working:\r\nthe purpose of the entire code is to store N wine bottles (object) in a cellar (array) and to search for the bottles with the same year and type (red, white, etc..) starting from an input given by the user. I used the same algorithm to search for wine bottles from a specific year and to return them as a StringBuilder and it worked.\r\n```\r\npublic StringBuilder StampaTipo(String t) {\r\n\tStringBuilder tipo= new StringBuilder(50);\r\n\tint i=0;\r\n\r\n\tfor(i=0;i&lt;this.cantina.length;i++) {\r\n\t\tif(this.cantina[i].getTipo()==t) {\r\n\t\t\ttipo.append(this.cantina[i].toString());\r\n\t\t}\r\n\t}\r\n\treturn tipo;\r\n}\r\n```\r\n\r\n\r\nI was expecting to find the search results, this what i&#39;m using in the main:\r\n\r\n```\r\nSystem.out.println(&quot;\\nInserisci il tipo da cercare: &quot;);\r\nricercaT=in.next();\r\nSystem.out.println(&quot;\\nBottiglie trovate: &quot;+&quot;\\n&quot;+c.StampaTipo(ricercaT));\r\n```\r\n\r\n&quot;ricercaT&quot; is the String input given by the user to find the bottles based on the type.\r\n\r\nThis is the output: \r\n```\r\nInsert the type of wine to find: \r\nred\r\n\r\nBottles found: \r\n```","title":"Why is my searching algorithm in Java not working?","body":"<p>We just started Java at school and I was wondering why this search algorithm isn't working:\nthe purpose of the entire code is to store N wine bottles (object) in a cellar (array) and to search for the bottles with the same year and type (red, white, etc..) starting from an input given by the user. I used the same algorithm to search for wine bottles from a specific year and to return them as a StringBuilder and it worked.</p>\n<pre><code>public StringBuilder StampaTipo(String t) {\n    StringBuilder tipo= new StringBuilder(50);\n    int i=0;\n\n    for(i=0;i&lt;this.cantina.length;i++) {\n        if(this.cantina[i].getTipo()==t) {\n            tipo.append(this.cantina[i].toString());\n        }\n    }\n    return tipo;\n}\n</code></pre>\n<p>I was expecting to find the search results, this what i'm using in the main:</p>\n<pre><code>System.out.println(&quot;\\nInserisci il tipo da cercare: &quot;);\nricercaT=in.next();\nSystem.out.println(&quot;\\nBottiglie trovate: &quot;+&quot;\\n&quot;+c.StampaTipo(ricercaT));\n</code></pre>\n<p>&quot;ricercaT&quot; is the String input given by the user to find the bottles based on the type.</p>\n<p>This is the output:</p>\n<pre><code>Insert the type of wine to find: \nred\n\nBottles found: \n</code></pre>\n"},{"tags":["java","unit-testing","junit","mockito"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696594037,"post_id":77244246,"comment_id":136176571,"body_markdown":"Are you trying to mock the instance created inside `method1()`? This one - `Myclass obj = new Myclass ();`?","body":"Are you trying to mock the instance created inside <code>method1()</code>? This one - <code>Myclass obj = new Myclass ();</code>?"},{"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"score":0,"creation_date":1696594339,"post_id":77244246,"comment_id":136176614,"body_markdown":"@Chaosfire yes using that mock object I need to mock the getData method","body":"@Chaosfire yes using that mock object I need to mock the getData method"},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1696595000,"post_id":77244246,"comment_id":136176734,"body_markdown":"you can&#39;t mock that, obviously. it is instantiated while running the code","body":"you can&#39;t mock that, obviously. it is instantiated while running the code"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696595169,"post_id":77244246,"comment_id":136176773,"body_markdown":"@Stultuske he can mock the construction, junit supports this since 3.something (not sure which minor version exactly).","body":"@Stultuske he can mock the construction, junit supports this since 3.something (not sure which minor version exactly)."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1696595299,"post_id":77244246,"comment_id":136176807,"body_markdown":"hadn&#39;t seen that work yet, should try it once","body":"hadn&#39;t seen that work yet, should try it once"},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696610213,"post_id":77244246,"comment_id":136179946,"body_markdown":"Does this answer your question? [Why are my mocked methods not called when executing a unit test?](https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/74027324/why-are-my-mocked-methods-not-called-when-executing-a-unit-test\">Why are my mocked methods not called when executing a unit test?</a>"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1696611541,"post_id":77244246,"comment_id":136180185,"body_markdown":"Ehm, does the linked question really answer this one? All the solutions require refactoring, while mockito provides exactly the needed functionality.","body":"Ehm, does the linked question really answer this one? All the solutions require refactoring, while mockito provides exactly the needed functionality."},{"owner":{"account_id":39208,"reputation":251220,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1696619061,"post_id":77244246,"comment_id":136181410,"body_markdown":"@Chaosfire I would think it does. The non-working code is exactly the same as in the linked question (an independent mock that&#39;s not used anywhere in the class; and a class that creates its own instances). Yes, Mockito offers such functionality, but it does not allow finer-grained control. Throwing heavyweight frameworks at such problems can work, but it&#39;s better to understand why something does not work. By refactoring you will end up with a more flexible solution that can be tested, even without reflection or &quot;magic&quot;.","body":"@Chaosfire I would think it does. The non-working code is exactly the same as in the linked question (an independent mock that&#39;s not used anywhere in the class; and a class that creates its own instances). Yes, Mockito offers such functionality, but it does not allow finer-grained control. Throwing heavyweight frameworks at such problems can work, but it&#39;s better to understand why something does not work. By refactoring you will end up with a more flexible solution that can be tested, even without reflection or &quot;magic&quot;."}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696610871,"creation_date":1696595865,"answer_id":77244496,"question_id":77244246,"body_markdown":"The instance of `Myclass` you want mocked is local to the method, meaning that even if you create the mock normally, you can&#39;t give it to the tested class to use.\r\n\r\nWhat you can do, is mock the construction of objects of particular class. This means that **every** object created with `new` will be a mock - even the local variable `obj` in `method1()` will be a mock when created. Mockito supports this since [`v3.5.0`][1].\r\n```\r\n@Test\r\npublic void testcase() {\r\n  try (MockedConstruction&lt;Myclass&gt; ignore = Mockito.mockConstruction(Myclass.class, (mock, context) -&gt; Mockito.when(mock.getData(&quot;test&quot;, &quot;test&quot;)).thenReturn(false))) {\r\n    //go on with actual test for method1()\r\n  }\r\n}\r\n```\r\nNote how the created `MockedConstruction` object is used together with `try-with-resources`. This is important, because if it&#39;s not closed the mocked construction will persist in every test you run. It can also be closed manually, if you are using `@Before`/`@After` methods for setup/cleanup.\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#mocked_construction","title":"Junit local object mock","body":"<p>The instance of <code>Myclass</code> you want mocked is local to the method, meaning that even if you create the mock normally, you can't give it to the tested class to use.</p>\n<p>What you can do, is mock the construction of objects of particular class. This means that <strong>every</strong> object created with <code>new</code> will be a mock - even the local variable <code>obj</code> in <code>method1()</code> will be a mock when created. Mockito supports this since <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/3.5.0/org/mockito/Mockito.html#mocked_construction\" rel=\"nofollow noreferrer\"><code>v3.5.0</code></a>.</p>\n<pre><code>@Test\npublic void testcase() {\n  try (MockedConstruction&lt;Myclass&gt; ignore = Mockito.mockConstruction(Myclass.class, (mock, context) -&gt; Mockito.when(mock.getData(&quot;test&quot;, &quot;test&quot;)).thenReturn(false))) {\n    //go on with actual test for method1()\n  }\n}\n</code></pre>\n<p>Note how the created <code>MockedConstruction</code> object is used together with <code>try-with-resources</code>. This is important, because if it's not closed the mocked construction will persist in every test you run. It can also be closed manually, if you are using <code>@Before</code>/<code>@After</code> methods for setup/cleanup.</p>\n"}],"owner":{"account_id":3963817,"reputation":1269,"user_id":3270329,"accept_rate":80,"display_name":"KVK"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1696610871,"creation_date":1696593305,"question_id":77244246,"body_markdown":"I am trying to mock my local object in JUnit using Mockito but it is not working.\r\n\r\n**Original method:**\r\n\r\n```java\r\nPublic void method1() {\r\n    Myclass obj = new Myclass ();\r\n    Boolean r = Obj.getData(String s1,String s2);\r\n}\r\n```\r\n**Test method:**\r\n```java\r\n@Test\r\npublic void testcase() {\r\n    Myclass obj1 = Mockito.mock(Myclass.class);\r\n    Mockito.when(obj1.getData(&quot;test&quot;,&quot;test&quot;)).thenreturn(false);\r\n}\r\n```\r\nBut this mock is not working.\r\n\r\nKindly help to fix this.","title":"Junit local object mock","body":"<p>I am trying to mock my local object in JUnit using Mockito but it is not working.</p>\n<p><strong>Original method:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>Public void method1() {\n    Myclass obj = new Myclass ();\n    Boolean r = Obj.getData(String s1,String s2);\n}\n</code></pre>\n<p><strong>Test method:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testcase() {\n    Myclass obj1 = Mockito.mock(Myclass.class);\n    Mockito.when(obj1.getData(&quot;test&quot;,&quot;test&quot;)).thenreturn(false);\n}\n</code></pre>\n<p>But this mock is not working.</p>\n<p>Kindly help to fix this.</p>\n"},{"tags":["java","android","android-camera2","illegalargumentexception","android-camerax"],"comments":[{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1696690397,"post_id":77233622,"comment_id":136187184,"body_markdown":"What is the device?","body":"What is the device?"},{"owner":{"account_id":14068837,"reputation":23,"user_id":10162907,"display_name":"mohammed said"},"score":0,"creation_date":1696710889,"post_id":77233622,"comment_id":136189120,"body_markdown":"Realme( C35 ,c25s,c33), Samsung( Galaxy A03 ,A10s), Nokia G21,Smart 6 Plus","body":"Realme( C35 ,c25s,c33), Samsung( Galaxy A03 ,A10s), Nokia G21,Smart 6 Plus"},{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1697145930,"post_id":77233622,"comment_id":136246766,"body_markdown":"I suggest you filing a bug against the CameraX team: https://issuetracker.google.com/issues/new?component=618491&amp;template=1257717","body":"I suggest you filing a bug against the CameraX team: <a href=\"https://issuetracker.google.com/issues/new?component=618491&amp;template=1257717\" rel=\"nofollow noreferrer\">issuetracker.google.com/issues/&hellip;</a>"}],"owner":{"account_id":14068837,"reputation":23,"user_id":10162907,"display_name":"mohammed said"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696610340,"creation_date":1696464632,"question_id":77233622,"body_markdown":"I am getting this crash in firebase from a flashlight app.\r\n```\r\nFatal Exception: java.lang.IllegalArgumentException: setTorchMode:2297: Camera ID &quot;0&quot; is a not valid camera ID\r\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1332)\r\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:1886)\r\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:943)\r\n       at AccService2.onSensorChanged(AccService2.java:197)\r\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:1004)\r\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n       at android.os.MessageQueue.next(MessageQueue.java:335)\r\n       at android.os.Looper.loop(Looper.java:206)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\r\n```\r\nand \r\n\r\n```\r\nFatal Exception: java.lang.IllegalArgumentException: setTorchMode:2721: Camera &quot;1&quot; does not have a flash unit\r\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1723)\r\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:2318)\r\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:1211)\r\n       at AccService2.onSensorChanged(AccService2.java:197)\r\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:991)\r\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\r\n       at android.os.MessageQueue.next(MessageQueue.java:335)\r\n       at android.os.Looper.loopOnce(Looper.java:186)\r\n       at android.os.Looper.loop(Looper.java:313)\r\n       at android.app.ActivityThread.main(ActivityThread.java:8757)\r\n       at java.lang.reflect.Method.invoke(Method.java)\r\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\r\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\r\n```\r\nthis is the code \r\n\r\n```            \r\n            sCameraId = MAcamID.getFirstCameraIdFacing(camManager,null);\r\n\r\n                    if (Flash_Available) {\r\n                        String Cam_id=sCameraId;\r\n                        if (Cam_id != null) {\r\n                            try {\r\n                                camManager.setTorchMode(Cam_id, !flashState);\r\n\r\n                            } catch (CameraAccessException e) {\r\n                                Log.e(&quot;TAG&quot;, &quot;settorchmode Excep&quot;, e);\r\n                            }\r\n                        }\r\n\r\n                     \r\n                    }\r\n```\r\n\r\n \r\n\r\nand in this class i&#39;m checking the camera id list to get the id of the back camera and check if it has a flash unit\r\n\r\n```\r\npublic class CamId {\r\n\r\n    public String getFirstCameraIdFacing(CameraManager cameraManager, @Nullable Integer facing) {\r\n        if (facing == null) facing = CameraMetadata.LENS_FACING_BACK;\r\n        String cameraId = null;\r\n        try {\r\n            // Get a list of all compatible cameras\r\n            String[] cameraIdList = cameraManager.getCameraIdList();\r\n\r\n            // Iterate over the list of cameras and return the first one matching desired\r\n            // lens-facing configuration and backward compatibility\r\n            for (String id : cameraIdList) {\r\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\r\n\r\n                if ( characteristics.get(CameraCharacteristics.LENS_FACING).equals(facing) &amp;&amp;\r\n                        characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE)) {\r\n                        cameraId = id;\r\n                        break;\r\n                    }\r\n\r\n            }\r\n\r\n            // If no camera matches the desired orientation, return the first one from the\r\n            if(cameraId == null &amp;&amp; cameraIdList.length&gt;0) {\r\n                cameraId = cameraIdList[0];\r\n\r\n            }\r\n        } catch (CameraAccessException e) {\r\n            Log.e(&quot;CameraId ex&quot;, &quot;getFirstCameraIdFacing: &quot; + e.getMessage());\r\n        }\r\n\r\n        return cameraId;\r\n    }\r\n\r\n}\r\n```\r\nand i&#39;m checking the avalablity of the flashlight this callback\r\n\r\n```\r\npublic void callBack(){\r\n\r\n        torchCallback = new CameraManager.TorchCallback() {\r\n            @Override\r\n            public void onTorchModeUnavailable(@NonNull String cameraId) {\r\n                super.onTorchModeUnavailable(cameraId);\r\n                    Flash_Available = false;\r\n\r\n            }\r\n\r\n\r\n            @Override\r\n            public void onTorchModeChanged(@NonNull String cameraId, boolean enabled) {\r\n                super.onTorchModeChanged(cameraId, enabled);\r\n                flashState = enabled;\r\n                    Flash_Available = true;\r\n            }\r\n\r\n        };\r\n        camManager.registerTorchCallback(torchCallback, null);\r\n\r\n    }\r\n```\r\nThis crash happens for a few users but with a lot of event count, in the code i made sure to check for a valid camera id and if it has a flash unit before calling setTorchMode how this crash still happens?\r\n\r\n","title":"setTorchMode-IllegalArgumentException","body":"<p>I am getting this crash in firebase from a flashlight app.</p>\n<pre><code>Fatal Exception: java.lang.IllegalArgumentException: setTorchMode:2297: Camera ID &quot;0&quot; is a not valid camera ID\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1332)\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:1886)\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:943)\n       at AccService2.onSensorChanged(AccService2.java:197)\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:1004)\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:335)\n       at android.os.Looper.loop(Looper.java:206)\n       at android.app.ActivityThread.main(ActivityThread.java:8653)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:602)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1130)\n</code></pre>\n<p>and</p>\n<pre><code>Fatal Exception: java.lang.IllegalArgumentException: setTorchMode:2721: Camera &quot;1&quot; does not have a flash unit\n       at android.hardware.camera2.CameraManager.throwAsPublicException(CameraManager.java:1723)\n       at android.hardware.camera2.CameraManager$CameraManagerGlobal.setTorchMode(CameraManager.java:2318)\n       at android.hardware.camera2.CameraManager.setTorchMode(CameraManager.java:1211)\n       at AccService2.onSensorChanged(AccService2.java:197)\n       at android.hardware.SystemSensorManager$SensorEventQueue.dispatchSensorEvent(SystemSensorManager.java:991)\n       at android.os.MessageQueue.nativePollOnce(MessageQueue.java)\n       at android.os.MessageQueue.next(MessageQueue.java:335)\n       at android.os.Looper.loopOnce(Looper.java:186)\n       at android.os.Looper.loop(Looper.java:313)\n       at android.app.ActivityThread.main(ActivityThread.java:8757)\n       at java.lang.reflect.Method.invoke(Method.java)\n       at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:571)\n       at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1067)\n</code></pre>\n<p>this is the code</p>\n<pre><code>            sCameraId = MAcamID.getFirstCameraIdFacing(camManager,null);\n\n                    if (Flash_Available) {\n                        String Cam_id=sCameraId;\n                        if (Cam_id != null) {\n                            try {\n                                camManager.setTorchMode(Cam_id, !flashState);\n\n                            } catch (CameraAccessException e) {\n                                Log.e(&quot;TAG&quot;, &quot;settorchmode Excep&quot;, e);\n                            }\n                        }\n\n                     \n                    }\n</code></pre>\n<p>and in this class i'm checking the camera id list to get the id of the back camera and check if it has a flash unit</p>\n<pre><code>public class CamId {\n\n    public String getFirstCameraIdFacing(CameraManager cameraManager, @Nullable Integer facing) {\n        if (facing == null) facing = CameraMetadata.LENS_FACING_BACK;\n        String cameraId = null;\n        try {\n            // Get a list of all compatible cameras\n            String[] cameraIdList = cameraManager.getCameraIdList();\n\n            // Iterate over the list of cameras and return the first one matching desired\n            // lens-facing configuration and backward compatibility\n            for (String id : cameraIdList) {\n                CameraCharacteristics characteristics = cameraManager.getCameraCharacteristics(id);\n\n                if ( characteristics.get(CameraCharacteristics.LENS_FACING).equals(facing) &amp;&amp;\n                        characteristics.get(CameraCharacteristics.FLASH_INFO_AVAILABLE)) {\n                        cameraId = id;\n                        break;\n                    }\n\n            }\n\n            // If no camera matches the desired orientation, return the first one from the\n            if(cameraId == null &amp;&amp; cameraIdList.length&gt;0) {\n                cameraId = cameraIdList[0];\n\n            }\n        } catch (CameraAccessException e) {\n            Log.e(&quot;CameraId ex&quot;, &quot;getFirstCameraIdFacing: &quot; + e.getMessage());\n        }\n\n        return cameraId;\n    }\n\n}\n</code></pre>\n<p>and i'm checking the avalablity of the flashlight this callback</p>\n<pre><code>public void callBack(){\n\n        torchCallback = new CameraManager.TorchCallback() {\n            @Override\n            public void onTorchModeUnavailable(@NonNull String cameraId) {\n                super.onTorchModeUnavailable(cameraId);\n                    Flash_Available = false;\n\n            }\n\n\n            @Override\n            public void onTorchModeChanged(@NonNull String cameraId, boolean enabled) {\n                super.onTorchModeChanged(cameraId, enabled);\n                flashState = enabled;\n                    Flash_Available = true;\n            }\n\n        };\n        camManager.registerTorchCallback(torchCallback, null);\n\n    }\n</code></pre>\n<p>This crash happens for a few users but with a lot of event count, in the code i made sure to check for a valid camera id and if it has a flash unit before calling setTorchMode how this crash still happens?</p>\n"},{"tags":["java","javafx","javafx-8"],"comments":[{"owner":{"display_name":"user5946312"},"score":0,"creation_date":1482200172,"post_id":41233886,"comment_id":69667354,"body_markdown":"I tried overriding the stop() method in the main class but it still closes the application even before the confirmation Prompt is displayed","body":"I tried overriding the stop() method in the main class but it still closes the application even before the confirmation Prompt is displayed"},{"owner":{"account_id":9853597,"reputation":21,"user_id":7298878,"display_name":"R. Salame"},"score":1,"creation_date":1482200498,"post_id":41233886,"comment_id":69667419,"body_markdown":"I found the best answer is in this thread:\nhttp://stackoverflow.com/questions/13727314/prevent-or-cancel-exit-javafx-2","body":"I found the best answer is in this thread: <a href=\"http://stackoverflow.com/questions/13727314/prevent-or-cancel-exit-javafx-2\" title=\"prevent or cancel exit javafx 2\">stackoverflow.com/questions/13727314/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":8493750,"reputation":887,"user_id":6369009,"accept_rate":78,"display_name":"Politic Revolutionnaire"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1482201100,"creation_date":1482200562,"answer_id":41233936,"question_id":41233886,"body_markdown":"    primaryStage.addEventFilter(WindowEvent.WINDOW_CLOSE_REQUEST, e-&gt;{\r\n        e.consume();\r\n        Popup popup = new Popup();\r\n        HBox buttons = new HBox();\r\n        Button close = new Button(&quot;close&quot;);\r\n        Button cancel = new Button(&quot;cancel&quot;);\r\n        buttons.getChildren().addAll(close,cancel);\r\n        buttons.setPadding(new Insets(5,5,5,5));\r\n        popup.getContent().add(buttons);\r\n        popup.show(primaryStage);\r\n    \tclose.setOnAction(ex -&gt; {\r\n    \t\tPlatform.exit();\r\n    \t});\r\n    \tcancel.setOnAction(ec -&gt; {\r\n    \t\tpopup.hide();\r\n    \t});\r\n    });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<pre><code>primaryStage.addEventFilter(WindowEvent.WINDOW_CLOSE_REQUEST, e-&gt;{\n    e.consume();\n    Popup popup = new Popup();\n    HBox buttons = new HBox();\n    Button close = new Button(\"close\");\n    Button cancel = new Button(\"cancel\");\n    buttons.getChildren().addAll(close,cancel);\n    buttons.setPadding(new Insets(5,5,5,5));\n    popup.getContent().add(buttons);\n    popup.show(primaryStage);\n    close.setOnAction(ex -&gt; {\n        Platform.exit();\n    });\n    cancel.setOnAction(ec -&gt; {\n        popup.hide();\n    });\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3101890,"reputation":10709,"user_id":2855515,"accept_rate":100,"display_name":"brian"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1482206898,"creation_date":1482206898,"answer_id":41234759,"question_id":41233886,"body_markdown":"You can use Alert since 8.40\r\n\r\n\r\n    stage.setOnCloseRequest(evt -&gt; {\r\n        Alert alert = new Alert(AlertType.CONFIRMATION);\r\n        alert.setTitle(&quot;Confirm Close&quot;);\r\n        alert.setHeaderText(&quot;Close program?&quot;);\r\n        alert.showAndWait().filter(r -&gt; r != ButtonType.OK).ifPresent(r-&gt;evt.consume());\r\n    });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>You can use Alert since 8.40</p>\n\n<pre><code>stage.setOnCloseRequest(evt -&gt; {\n    Alert alert = new Alert(AlertType.CONFIRMATION);\n    alert.setTitle(\"Confirm Close\");\n    alert.setHeaderText(\"Close program?\");\n    alert.showAndWait().filter(r -&gt; r != ButtonType.OK).ifPresent(r-&gt;evt.consume());\n});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23586720,"reputation":11,"user_id":17625083,"display_name":"NethakaDeSaram"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696609810,"creation_date":1696609810,"answer_id":77246079,"question_id":41233886,"body_markdown":"I Followed this approach...\r\n\r\n**After creating my stage I use this code to launch a popup and exit...**\r\n\r\n    stage.setOnCloseRequest((WindowEvent arg0) -&gt; {\r\n            arg0.consume();\r\n            Alert exitAlert = new Alert(AlertType.CONFIRMATION);\r\n            exitAlert.setTitle(&quot;Exit Confirmation&quot;);\r\n            exitAlert.setHeaderText(null);\r\n            exitAlert.setContentText(&quot;Do you really need to exit ?&quot;);\r\n\r\n            ButtonType yesBtn = new ButtonType(&quot;Yes&quot;, ButtonData.YES);\r\n            ButtonType noBtn = new ButtonType(&quot;No&quot;, ButtonData.NO);\r\n\r\n            exitAlert.getButtonTypes().setAll(yesBtn, noBtn);\r\n            exitAlert.initOwner(getScene().getWindow());\r\n            exitAlert.showAndWait();\r\n            if (exitAlert.getResult().getButtonData() == ButtonData.YES) {\r\n                Platform.exit();\r\n                System.exit(0);\r\n            }\r\n        });","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>I Followed this approach...</p>\n<p><strong>After creating my stage I use this code to launch a popup and exit...</strong></p>\n<pre><code>stage.setOnCloseRequest((WindowEvent arg0) -&gt; {\n        arg0.consume();\n        Alert exitAlert = new Alert(AlertType.CONFIRMATION);\n        exitAlert.setTitle(&quot;Exit Confirmation&quot;);\n        exitAlert.setHeaderText(null);\n        exitAlert.setContentText(&quot;Do you really need to exit ?&quot;);\n\n        ButtonType yesBtn = new ButtonType(&quot;Yes&quot;, ButtonData.YES);\n        ButtonType noBtn = new ButtonType(&quot;No&quot;, ButtonData.NO);\n\n        exitAlert.getButtonTypes().setAll(yesBtn, noBtn);\n        exitAlert.initOwner(getScene().getWindow());\n        exitAlert.showAndWait();\n        if (exitAlert.getResult().getButtonData() == ButtonData.YES) {\n            Platform.exit();\n            System.exit(0);\n        }\n    });\n</code></pre>\n"}],"owner":{"display_name":"user5946312"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":859,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41233936,"answer_count":3,"score":1,"last_activity_date":1696609810,"creation_date":1482200022,"question_id":41233886,"body_markdown":"I want to modify the default exit procedure in my javafx application to display a confirmation dialogue to the user. The confirmation dialogue will exit the application if the user chooses OK and will keep the application running when user chooses Cancel.\r\n\r\nWhat should I do to make this in javaFX?","title":"Display a confirmation dialogue when the user try to exit the application (Press X button)","body":"<p>I want to modify the default exit procedure in my javafx application to display a confirmation dialogue to the user. The confirmation dialogue will exit the application if the user chooses OK and will keep the application running when user chooses Cancel.</p>\n\n<p>What should I do to make this in javaFX?</p>\n"},{"tags":["java","jakarta-mail"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696588515,"post_id":77243691,"comment_id":136175539,"body_markdown":"Have you tried to open the input file with a text editor/viewer?  Perhaps the mail has an HTML body only but your code expects a &quot;text/plain&quot; MIME type.","body":"Have you tried to open the input file with a text editor/viewer?  Perhaps the mail has an HTML body only but your code expects a &quot;text/plain&quot; MIME type."},{"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"score":0,"creation_date":1696588841,"post_id":77243691,"comment_id":136175606,"body_markdown":"The file containing the attachment has all three tags\n\n1. Content-Type: text/plain; charset=&quot;UTF-8&quot;, \n2. Content-Type: text/html; charset=&quot;UTF-8&quot;, \n3. Content-Type: image/png; name=&quot;third attachment.png&quot; \n\nFile not containing attachments have only two tags\n\n1. Content-Type: text/plain; charset=&quot;UTF-8&quot; \n2. Content-Type: text/html; charset=&quot;UTF-8&quot;","body":"The file containing the attachment has all three tags  1. Content-Type: text/plain; charset=&quot;UTF-8&quot;,  2. Content-Type: text/html; charset=&quot;UTF-8&quot;,  3. Content-Type: image/png; name=&quot;third attachment.png&quot;   File not containing attachments have only two tags  1. Content-Type: text/plain; charset=&quot;UTF-8&quot;  2. Content-Type: text/html; charset=&quot;UTF-8&quot;"},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696590277,"post_id":77243691,"comment_id":136175881,"body_markdown":"Does this answer your question? [How to read text inside body of mail using javax.mail](https://stackoverflow.com/questions/11240368/how-to-read-text-inside-body-of-mail-using-javax-mail)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11240368/how-to-read-text-inside-body-of-mail-using-javax-mail\">How to read text inside body of mail using javax.mail</a>"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696606288,"post_id":77243691,"comment_id":136179187,"body_markdown":"Please provide the example emails.","body":"Please provide the example emails."},{"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"score":0,"creation_date":1696607569,"post_id":77243691,"comment_id":136179436,"body_markdown":"@MarkRotteveel file content is too large to add here","body":"@MarkRotteveel file content is too large to add here"},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1696609625,"post_id":77243691,"comment_id":136179835,"body_markdown":"Then you should do your best to create minimal emails that allows you to reproduce it. I haven&#39;t touched JakartaMail in a while, but I guess you&#39;re decoding the body structure incorrectly.","body":"Then you should do your best to create minimal emails that allows you to reproduce it. I haven&#39;t touched JakartaMail in a while, but I guess you&#39;re decoding the body structure incorrectly."}],"owner":{"account_id":22883760,"reputation":101,"user_id":17024974,"display_name":"Vinayak"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696609634,"creation_date":1696587925,"question_id":77243691,"body_markdown":"I am writing transform to convert eml to JSON. I have written the below code to parse eml. I want to extract the mail body and attachments from the eml. But whenever eml contains attachments I get an empty body and if eml does not contain attachments then I get an email body.\r\n```\r\npackage org.example;\r\n\r\nimport com.fasterxml.jackson.databind.JsonNode;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.databind.SerializationFeature;\r\nimport com.fasterxml.jackson.databind.node.ObjectNode;\r\n\r\nimport javax.activation.DataHandler;\r\nimport javax.mail.*;\r\nimport javax.mail.internet.MimeMessage;\r\nimport javax.mail.internet.MimeUtility;\r\nimport java.io.*;\r\nimport java.util.*;\r\n\r\n/**\r\n * Class which transform EML file into JSON\r\n */\r\npublic class EMLtoJSONJavaTransform {\r\n\r\n    private static final String FORWARD_EMAIL_PREFIX = &quot;Fwd:&quot;;\r\n    private static final int INPUT_FILE_INDEX = 0;\r\n    private static final int OUTPUT_FILE_INDEX = 1;\r\n\r\n    public static void main(String[] args) {\r\n        String emlFilePath = args[INPUT_FILE_INDEX];\r\n        String jsonFilePath = args[OUTPUT_FILE_INDEX];\r\n\r\n        try {\r\n            File inputFile = new File(emlFilePath);\r\n            File outputFile = new File(jsonFilePath);\r\n            EMLtoJSONJavaTransform obj = new EMLtoJSONJavaTransform();\r\n            obj.executeTransform(inputFile, outputFile);\r\n            System.out.println(&quot;Conversion completed. JSON file saved to &quot; + jsonFilePath);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n    private File executeTransform(File inputFile, File outputFile)  {\r\n        try {\r\n            Properties properties = new Properties();\r\n            Session session = Session.getDefaultInstance(properties);\r\n\r\n            // Read the .eml file\r\n            InputStream emlInputStream = new FileInputStream(inputFile);\r\n            MimeMessage emlMessage = new MimeMessage(session, emlInputStream);\r\n\r\n            // Convert the email message to JSON\r\n            ObjectNode jsonNode = convertEmlToJson(emlMessage);\r\n\r\n            // Write JSON to a file\r\n            ObjectMapper objectMapper = new ObjectMapper();\r\n            objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n            objectMapper.writeValue(outputFile, jsonNode);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n        return outputFile;\r\n    }\r\n\r\n    private ObjectNode convertEmlToJson(MimeMessage emlMessage) throws MessagingException, IOException {\r\n        ObjectNode jsonNode = new ObjectMapper().createObjectNode();\r\n        String subject = emlMessage.getSubject();\r\n        if(subject.contains(FORWARD_EMAIL_PREFIX)) {\r\n            subject = subject.substring(4).trim();\r\n        }\r\n\r\n        String sender = emlMessage.getFrom()[0].toString();\r\n        int startIdx = sender.indexOf(&quot;&lt;&quot;);\r\n        int endIdx = sender.indexOf(&quot;&gt;&quot;);\r\n\r\n        // Extract relevant email properties and content\r\n        jsonNode.put(&quot;sender&quot;, sender.substring(startIdx+1, endIdx));\r\n        jsonNode.put(&quot;summary&quot;, subject);\r\n\r\n\r\n        // Process the email body\r\n        String bodyText = extractTextFromMessage(emlMessage);\r\n        jsonNode.put(&quot;body&quot;, bodyText);\r\n        Map&lt;String, String&gt; map = extractAttachmentsFromMessage(emlMessage);\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        JsonNode jsonNodeMap = mapper.convertValue(map, JsonNode.class);\r\n        jsonNode.put(&quot;attachments&quot;, jsonNodeMap);\r\n\r\n        return jsonNode;\r\n    }\r\n\r\n    private String extractTextFromMessage(Message message) throws MessagingException, IOException {\r\n        StringBuilder result = new StringBuilder();\r\n        if (message.isMimeType(&quot;text/plain&quot;)) {\r\n            result.append(message.getContent());\r\n        } else if (message.isMimeType(&quot;multipart/*&quot;)) {\r\n            Multipart multipart = (Multipart) message.getContent();\r\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\r\n                BodyPart bodyPart = multipart.getBodyPart(i);\r\n                if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\r\n                    result.append(bodyPart.getContent());\r\n                }\r\n            }\r\n        }\r\n        return result.toString();\r\n    }\r\n\r\n    private Map&lt;String, String&gt; extractAttachmentsFromMessage(Message message) throws MessagingException, IOException {\r\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        if (message.isMimeType(&quot;multipart/*&quot;)) {\r\n            Multipart multipart = (Multipart) message.getContent();\r\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\r\n                BodyPart bodyPart = multipart.getBodyPart(i);\r\n                if (Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) {\r\n                    // This is an attachment\r\n                    String fileName = MimeUtility.decodeText(bodyPart.getFileName());\r\n                    System.out.println(&quot;Attachment Name: &quot; + fileName);\r\n\r\n                    // Get the attachment content in base64 format\r\n                    DataHandler handler = bodyPart.getDataHandler();\r\n                    InputStream inputStream = handler.getInputStream();\r\n                    byte[] bytes = new byte[inputStream.available()];\r\n                    inputStream.read(bytes);\r\n                    String base64Content = java.util.Base64.getEncoder().encodeToString(bytes);\r\n                    map.put(fileName, base64Content);\r\n//                    System.out.println(&quot;Base64 Content: &quot; + base64Content);\r\n                }\r\n            }\r\n        }\r\n        return map;\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe output of my code:\r\n\r\n1. When eml contains an attachment\r\n\r\n    ```json\r\n    {\r\n      &quot;sender&quot; : &quot;xyz@abc.com&quot;,\r\n      &quot;summary&quot; : &quot;Sending test email&quot;,\r\n      &quot;body&quot; : &quot;&quot;,\r\n      &quot;attachments&quot; : {\r\n        &quot;third attachment.png&quot; : &quot;iVBORw0KGgoAAAANSUhEUgAADewAAAgqCAYAAABIGbTdAAAMPWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnltSIbRABKSE3gTpVUoILVKlCjZCEiCUEANBxY4uKrh2UQEbuiqi6FoAsSOKKItg74sFFWVd1MWuvEkBXfeV7833nTv/PXPmP2fOnXvvHADUT3HF4hxUA4BcUYEkNjSQOT45hUl6CiiAAVSAESBzefliVkxMBIBtqP97e3sdILL+ir2M65/j/7Vp8gX5PACQGIjT+Pm8XIgPAYBX8cSSAgCIMr3ZtAKxDEMB2hIYIMSLZThDgatkOE2B98tt4mPZELcAQFblciUZAKh1Qj2zkJcBOdT6IXYU8YUiANSZEPvl5ubxIU6F2BraiCGW8XumfceT8TfOtGFOLjdjGCvWIm/kIGG+OIc74/9Mx/9uuTnSIR+WUFQzJWGxsjXDvN3MzguXYVWI+0RpUdEQa0H8XsiX20OMUjOlYQkKe9SAl8+GOYNPGqCOfG5QOMQGEIeIcqIilPq0dGEIB2K4Q9DpwgJOPMS6EC8W5AfHKW22SPJilb7Q+nQJm6XUn+dK5H5lvu5LsxNYSv7XmQKOkh9TK8qMT4KYCrF5oTAxCmI1iB3ys+PClTZjijLZUUM2EmmsLH5ziGMFotBABT9WmC4JiVXal+bmD60X25Ip5EQp8YGCzPgwRX6wFh5XHj9cC9YpELEShngE+eMjhtbCFwQFK9aOPROIEuKUPO/FBYGxirk4VZwTo7THTQU5oTK9KcSu+YVxyrl4YgHckAp+PF1cEBOviBMvyuKOjVHEg68AEYANggATSKGkgTyQBYQdfQ198E4xEgK4QAIygADYKzVDM5LkIyJ4jQNF4A+IBCB/eF6gfFQACqH+y7BWcbUH6fLRQvmMbPAE4lwQDnLgvVQ+SzTsLRE8hhrhP7xzofBgvDlQZOP/Xj+k/aZhQU2EUiMd8shUH7IkBhODiGHEEKINro/74T54BLwGQHHGPXGvoXV8syc8IXQRHhKuEboJt6YIiyU/RBkJuiF/iDIXad/nAreEnG54IO4L2SEzzsD1gT3uCv2wcH/o2Q1q2cq4ZVlh/sD9txV89zSUdhRHCkoZQQmgWP84U81WzW2YRZbr7/OjiDVtON/s4ZEf/bO/yz4f9uE/WmKLsYNYK3Yaa8OOYQ2AiZ3EGrF27LgMD++ux/LdNeQtVh5PNuQR/sPf0JOVZTLfsdax1/GzYqxAMF32jQbsPPEMiTAjs4DJgn8EAZMj4jmMYjo7OrsAIPu/KD5fbxjy/wbCuPBNt+AiAL5tg4ODR7/pwtMBOHAGvv7f2Vlth99o6Ov8Tp5UUqjQ4bILAX4l1OGbpgf/XWbAGq7HGbgDHxAAgsFYEA3iQTKYDKPPhPtcAqaBWWA+KAFlYAVYCyrAZrAN7AJ7wQHQAI6B0+AcuAg6wTVwB+6eHvAC9IO34BOCICSEhtARPcQYsUDsEGfEE/FDgpEIJBZJRlKRDESESJFZb3aejAABAgQIECBAgAABAgQIECBA4BuBC67PQXdnEv1jAAAAAElFTkSuQmCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;\r\n      }\r\n    }\r\n    ```\r\n\r\n2. When eml not contain attachment\r\n\r\n    ```json\r\n    {\r\n      &quot;sender&quot; : &quot;abc@xyz.com&quot;,\r\n      &quot;summary&quot; : &quot;Sending test email&quot;,\r\n      &quot;body&quot; : &quot;---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 9:39 AM\\r\\nSubject: Fwd: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 1:55 AM\\r\\nSubject: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\nThis is mail body \\r\\n\\r\\nThanks,\\r\\npqr\\r\\n&quot;,\r\n      &quot;attachments&quot;: { }\r\n    }\r\n    ```\r\n\r\nHelp me to figure out my mistake.\r\n","title":"Getting empty email body while parsing eml to json only when eml contains attachment","body":"<p>I am writing transform to convert eml to JSON. I have written the below code to parse eml. I want to extract the mail body and attachments from the eml. But whenever eml contains attachments I get an empty body and if eml does not contain attachments then I get an email body.</p>\n<pre><code>package org.example;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\n\nimport javax.activation.DataHandler;\nimport javax.mail.*;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeUtility;\nimport java.io.*;\nimport java.util.*;\n\n/**\n * Class which transform EML file into JSON\n */\npublic class EMLtoJSONJavaTransform {\n\n    private static final String FORWARD_EMAIL_PREFIX = &quot;Fwd:&quot;;\n    private static final int INPUT_FILE_INDEX = 0;\n    private static final int OUTPUT_FILE_INDEX = 1;\n\n    public static void main(String[] args) {\n        String emlFilePath = args[INPUT_FILE_INDEX];\n        String jsonFilePath = args[OUTPUT_FILE_INDEX];\n\n        try {\n            File inputFile = new File(emlFilePath);\n            File outputFile = new File(jsonFilePath);\n            EMLtoJSONJavaTransform obj = new EMLtoJSONJavaTransform();\n            obj.executeTransform(inputFile, outputFile);\n            System.out.println(&quot;Conversion completed. JSON file saved to &quot; + jsonFilePath);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private File executeTransform(File inputFile, File outputFile)  {\n        try {\n            Properties properties = new Properties();\n            Session session = Session.getDefaultInstance(properties);\n\n            // Read the .eml file\n            InputStream emlInputStream = new FileInputStream(inputFile);\n            MimeMessage emlMessage = new MimeMessage(session, emlInputStream);\n\n            // Convert the email message to JSON\n            ObjectNode jsonNode = convertEmlToJson(emlMessage);\n\n            // Write JSON to a file\n            ObjectMapper objectMapper = new ObjectMapper();\n            objectMapper.enable(SerializationFeature.INDENT_OUTPUT);\n            objectMapper.writeValue(outputFile, jsonNode);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        return outputFile;\n    }\n\n    private ObjectNode convertEmlToJson(MimeMessage emlMessage) throws MessagingException, IOException {\n        ObjectNode jsonNode = new ObjectMapper().createObjectNode();\n        String subject = emlMessage.getSubject();\n        if(subject.contains(FORWARD_EMAIL_PREFIX)) {\n            subject = subject.substring(4).trim();\n        }\n\n        String sender = emlMessage.getFrom()[0].toString();\n        int startIdx = sender.indexOf(&quot;&lt;&quot;);\n        int endIdx = sender.indexOf(&quot;&gt;&quot;);\n\n        // Extract relevant email properties and content\n        jsonNode.put(&quot;sender&quot;, sender.substring(startIdx+1, endIdx));\n        jsonNode.put(&quot;summary&quot;, subject);\n\n\n        // Process the email body\n        String bodyText = extractTextFromMessage(emlMessage);\n        jsonNode.put(&quot;body&quot;, bodyText);\n        Map&lt;String, String&gt; map = extractAttachmentsFromMessage(emlMessage);\n        ObjectMapper mapper = new ObjectMapper();\n        JsonNode jsonNodeMap = mapper.convertValue(map, JsonNode.class);\n        jsonNode.put(&quot;attachments&quot;, jsonNodeMap);\n\n        return jsonNode;\n    }\n\n    private String extractTextFromMessage(Message message) throws MessagingException, IOException {\n        StringBuilder result = new StringBuilder();\n        if (message.isMimeType(&quot;text/plain&quot;)) {\n            result.append(message.getContent());\n        } else if (message.isMimeType(&quot;multipart/*&quot;)) {\n            Multipart multipart = (Multipart) message.getContent();\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\n                BodyPart bodyPart = multipart.getBodyPart(i);\n                if (bodyPart.isMimeType(&quot;text/plain&quot;)) {\n                    result.append(bodyPart.getContent());\n                }\n            }\n        }\n        return result.toString();\n    }\n\n    private Map&lt;String, String&gt; extractAttachmentsFromMessage(Message message) throws MessagingException, IOException {\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n        if (message.isMimeType(&quot;multipart/*&quot;)) {\n            Multipart multipart = (Multipart) message.getContent();\n            for (int i = 0; i &lt; multipart.getCount(); i++) {\n                BodyPart bodyPart = multipart.getBodyPart(i);\n                if (Part.ATTACHMENT.equalsIgnoreCase(bodyPart.getDisposition())) {\n                    // This is an attachment\n                    String fileName = MimeUtility.decodeText(bodyPart.getFileName());\n                    System.out.println(&quot;Attachment Name: &quot; + fileName);\n\n                    // Get the attachment content in base64 format\n                    DataHandler handler = bodyPart.getDataHandler();\n                    InputStream inputStream = handler.getInputStream();\n                    byte[] bytes = new byte[inputStream.available()];\n                    inputStream.read(bytes);\n                    String base64Content = java.util.Base64.getEncoder().encodeToString(bytes);\n                    map.put(fileName, base64Content);\n//                    System.out.println(&quot;Base64 Content: &quot; + base64Content);\n                }\n            }\n        }\n        return map;\n    }\n}\n\n</code></pre>\n<p>The output of my code:</p>\n<ol>\n<li><p>When eml contains an attachment</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sender&quot; : &quot;xyz@abc.com&quot;,\n  &quot;summary&quot; : &quot;Sending test email&quot;,\n  &quot;body&quot; : &quot;&quot;,\n  &quot;attachments&quot; : {\n    &quot;third attachment.png&quot; : &quot;iVBORw0KGgoAAAANSUhEUgAADewAAAgqCAYAAABIGbTdAAAMPWlDQ1BJQ0MgUHJvZmlsZQAASImVVwdYU8kWnltSIbRABKSE3gTpVUoILVKlCjZCEiCUEANBxY4uKrh2UQEbuiqi6FoAsSOKKItg74sFFWVd1MWuvEkBXfeV7833nTv/PXPmP2fOnXvvHADUT3HF4hxUA4BcUYEkNjSQOT45hUl6CiiAAVSAESBzefliVkxMBIBtqP97e3sdILL+ir2M65/j/7Vp8gX5PACQGIjT+Pm8XIgPAYBX8cSSAgCIMr3ZtAKxDEMB2hIYIMSLZThDgatkOE2B98tt4mPZELcAQFblciUZAKh1Qj2zkJcBOdT6IXYU8YUiANSZEPvl5ubxIU6F2BraiCGW8XumfceT8TfOtGFOLjdjGCvWIm/kIGG+OIc74/9Mx/9uuTnSIR+WUFQzJWGxsjXDvN3MzguXYVWI+0RpUdEQa0H8XsiX20OMUjOlYQkKe9SAl8+GOYNPGqCOfG5QOMQGEIeIcqIilPq0dGEIB2K4Q9DpwgJOPMS6EC8W5AfHKW22SPJilb7Q+nQJm6XUn+dK5H5lvu5LsxNYSv7XmQKOkh9TK8qMT4KYCrF5oTAxCmI1iB3ys+PClTZjijLZUUM2EmmsLH5ziGMFotBABT9WmC4JiVXal+bmD60X25Ip5EQp8YGCzPgwRX6wFh5XHj9cC9YpELEShngE+eMjhtbCFwQFK9aOPROIEuKUPO/FBYGxirk4VZwTo7THTQU5oTK9KcSu+YVxyrl4YgHckAp+PF1cEBOviBMvyuKOjVHEg68AEYANggATSKGkgTyQBYQdfQ198E4xEgK4QAIygADYKzVDM5LkIyJ4jQNF4A+IBCB/eF6gfFQACqH+y7BWcbUH6fLRQvmMbPAE4lwQDnLgvVQ+SzTsLRE8hhrhP7xzofBgvDlQZOP/Xj+k/aZhQU2EUiMd8shUH7IkBhODiGHEEKINro/74T54BLwGQHHGPXGvoXV8syc8IXQRHhKuEboJt6YIiyU/RBkJuiF/iDIXad/nAreEnG54IO4L2SEzzsD1gT3uCv2wcH/o2Q1q2cq4ZVlh/sD9txV89zSUdhRHCkoZQQmgWP84U81WzW2YRZbr7/OjiDVtON/s4ZEf/bO/yz4f9uE/WmKLsYNYK3Yaa8OOYQ2AiZ3EGrF27LgMD++ux/LdNeQtVh5PNuQR/sPf0JOVZTLfsdax1/GzYqxAMF32jQbsPPEMiTAjs4DJgn8EAZMj4jmMYjo7OrsAIPu/KD5fbxjy/wbCuPBNt+AiAL5tg4ODR7/pwtMBOHAGvv7f2Vlth99o6Ov8Tp5UUqjQ4bILAX4l1OGbpgf/XWbAGq7HGbgDHxAAgsFYEA3iQTKYDKPPhPtcAqaBWWA+KAFlYAVYCyrAZrAN7AJ7wQHQAI6B0+AcuAg6wTVwB+6eHvAC9IO34BOCICSEhtARPcQYsUDsEGfEE/FDgpEIJBZJRlKRDESESJFZb3aejAABAgQIECBAgAABAgQIECBA4BuBC67PQXdnEv1jAAAAAElFTkSuQmCCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&quot;\n  }\n}\n</code></pre>\n</li>\n<li><p>When eml not contain attachment</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;sender&quot; : &quot;abc@xyz.com&quot;,\n  &quot;summary&quot; : &quot;Sending test email&quot;,\n  &quot;body&quot; : &quot;---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 9:39 AM\\r\\nSubject: Fwd: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\n\\r\\n\\r\\n---------- Forwarded message ---------\\r\\nFrom: abc &lt;abc@xyz.com&gt;\\r\\nDate: Wed, Aug 23, 2023 at 1:55 AM\\r\\nSubject: Sending test email\\r\\nTo: abc &lt;abc@xyz.com&gt;\\r\\n\\r\\n\\r\\nThis is mail body \\r\\n\\r\\nThanks,\\r\\npqr\\r\\n&quot;,\n  &quot;attachments&quot;: { }\n}\n</code></pre>\n</li>\n</ol>\n<p>Help me to figure out my mistake.</p>\n"},{"tags":["java","android","timestamp"],"answers":[{"tags":[],"owner":{"account_id":17464704,"reputation":989,"user_id":12661688,"display_name":"Kalpesh Rupani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580219771,"creation_date":1580219771,"answer_id":59950402,"question_id":59950270,"body_markdown":"Use this function :\r\n\r\nYou just need to pass timestamp here\r\n\r\n \r\n\r\n       public static String dayStringFormat(long msecs) {\r\n            final long ONE_SECOND = 1000L;\r\n            final long ONE_MINUTE = 60000L;\r\n            final long ONE_HOUR = 3600000L;\r\n            final long ONE_DAY = 86400000L;\r\n            final long ONE_MONTH = 2592000000L;\r\n            final long ONE_YEAR = 31536000000L;\r\n            int gmtOffset = TimeZone.getDefault().getRawOffset();\r\n            long currentTime = System.currentTimeMillis();\r\n            long difference = currentTime - msecs;\r\n            if (difference &lt; ONE_MINUTE) {\r\n                long timeAgo = difference / ONE_SECOND;\r\n                int finalUnits = (int) timeAgo;\r\n                return &quot;Just Now&quot;\r\n            } else if (difference &lt; ONE_HOUR) {\r\n                long timeAgo = difference / ONE_MINUTE;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot; &quot; + &quot;Minutes Ago&quot;;\r\n            } else if (difference &lt; ONE_DAY) {\r\n                long timeAgo = difference / ONE_HOUR;\r\n                int finalUnits = (int) timeAgo;\r\n                return finalUnits + &quot; &quot; + &quot;Hours Ago&quot;;\r\n            } else if (difference &lt; ONE_MONTH) {\r\n                long timeAgo = difference / ONE_DAY;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits +&quot; &quot; + &quot;Days Ago&quot;;\r\n            } else if (difference &lt; ONE_YEAR) {\r\n                long timeAgo = difference / ONE_MONTH;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot; &quot; + &quot;Months Ago&quot;;\r\n            } else {\r\n                long timeAgo = difference / ONE_MONTH;\r\n                int finalUnits = (int) timeAgo;\r\n                return  finalUnits + &quot;&quot; + &quot;Months Ago&quot;;\r\n    \r\n            }\r\n        }\r\n\r\nHope this will work!","title":"Converting a timestamp to relative time","body":"<p>Use this function :</p>\n\n<p>You just need to pass timestamp here</p>\n\n<pre><code>   public static String dayStringFormat(long msecs) {\n        final long ONE_SECOND = 1000L;\n        final long ONE_MINUTE = 60000L;\n        final long ONE_HOUR = 3600000L;\n        final long ONE_DAY = 86400000L;\n        final long ONE_MONTH = 2592000000L;\n        final long ONE_YEAR = 31536000000L;\n        int gmtOffset = TimeZone.getDefault().getRawOffset();\n        long currentTime = System.currentTimeMillis();\n        long difference = currentTime - msecs;\n        if (difference &lt; ONE_MINUTE) {\n            long timeAgo = difference / ONE_SECOND;\n            int finalUnits = (int) timeAgo;\n            return \"Just Now\"\n        } else if (difference &lt; ONE_HOUR) {\n            long timeAgo = difference / ONE_MINUTE;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \" \" + \"Minutes Ago\";\n        } else if (difference &lt; ONE_DAY) {\n            long timeAgo = difference / ONE_HOUR;\n            int finalUnits = (int) timeAgo;\n            return finalUnits + \" \" + \"Hours Ago\";\n        } else if (difference &lt; ONE_MONTH) {\n            long timeAgo = difference / ONE_DAY;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits +\" \" + \"Days Ago\";\n        } else if (difference &lt; ONE_YEAR) {\n            long timeAgo = difference / ONE_MONTH;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \" \" + \"Months Ago\";\n        } else {\n            long timeAgo = difference / ONE_MONTH;\n            int finalUnits = (int) timeAgo;\n            return  finalUnits + \"\" + \"Months Ago\";\n\n        }\n    }\n</code></pre>\n\n<p>Hope this will work!</p>\n"},{"tags":[],"owner":{"account_id":8977382,"reputation":1204,"user_id":9993404,"display_name":"Victory"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1580228691,"creation_date":1580228691,"answer_id":59953043,"question_id":59950270,"body_markdown":"This function will return time same as `Facebook`:\r\n\r\n    public static String getTimeAgo(long time) {\r\n\r\n        final DateFormat sdfTime = new SimpleDateFormat(&quot;h:mm aa&quot;, Locale.ENGLISH);\r\n        final DateFormat sdf = new SimpleDateFormat(&quot;d MMM &#39;at&#39; h:mm aa&quot;, Locale.ENGLISH);\r\n        final DateFormat sdfY = new SimpleDateFormat(&quot;d MMM yyyy &#39;at&#39; h:mm aa&quot;, Locale.ENGLISH);\r\n\r\n        final int SECOND_MILLIS = 1000;\r\n        final int MINUTE_MILLIS = 60 * SECOND_MILLIS;\r\n        final int HOUR_MILLIS = 60 * MINUTE_MILLIS;\r\n        final int DAY_MILLIS = 24 * HOUR_MILLIS;\r\n\r\n        if (time &lt; 1000000000000L) {\r\n            time *= 1000;\r\n        }\r\n\r\n        Calendar today = Calendar.getInstance();\r\n\r\n        Calendar timeCal = Calendar.getInstance();\r\n        timeCal.setTimeInMillis(time);\r\n\r\n        long now = System.currentTimeMillis();\r\n        if (time &gt; now || time &lt;= 0) {\r\n            return null;\r\n        }\r\n\r\n        final long diff = now - time;\r\n        if (diff &lt; MINUTE_MILLIS) {\r\n            return &quot;Just now&quot;;\r\n        } else if (diff &lt; 2 * MINUTE_MILLIS) {\r\n            return &quot;1 min&quot;;\r\n        } else if (diff &lt; 59 * MINUTE_MILLIS) {\r\n            return diff / MINUTE_MILLIS + &quot; mins&quot;;\r\n        } else if (diff &lt; 2 * HOUR_MILLIS) {\r\n            return &quot;1 hr&quot;;\r\n        } else if (diff &lt; 24 * HOUR_MILLIS) {\r\n            return diff / HOUR_MILLIS + &quot; hrs&quot;;\r\n        } else if (diff &lt; 48 * HOUR_MILLIS) {\r\n            return (&quot;Yesterday at &quot; + capsAMtoSmall(sdfTime.format(timeCal.getTime())));\r\n        } else if (today.get(Calendar.YEAR) == timeCal.get(Calendar.YEAR)) {\r\n            return capsAMtoSmall(sdf.format(timeCal.getTime()));\r\n        } else {\r\n            return capsAMtoSmall(sdfY.format(timeCal.getTime()));\r\n        }\r\n    }\r\n&lt;br\r\n\r\n    private static String capsAMtoSmall(String time) {\r\n        return time.replace(&quot;AM&quot;, &quot;am&quot;).replace(&quot;PM&quot;,&quot;pm&quot;);\r\n    }\r\n\r\nHappy coding :) ","title":"Converting a timestamp to relative time","body":"<p>This function will return time same as <code>Facebook</code>:</p>\n\n<pre><code>public static String getTimeAgo(long time) {\n\n    final DateFormat sdfTime = new SimpleDateFormat(\"h:mm aa\", Locale.ENGLISH);\n    final DateFormat sdf = new SimpleDateFormat(\"d MMM 'at' h:mm aa\", Locale.ENGLISH);\n    final DateFormat sdfY = new SimpleDateFormat(\"d MMM yyyy 'at' h:mm aa\", Locale.ENGLISH);\n\n    final int SECOND_MILLIS = 1000;\n    final int MINUTE_MILLIS = 60 * SECOND_MILLIS;\n    final int HOUR_MILLIS = 60 * MINUTE_MILLIS;\n    final int DAY_MILLIS = 24 * HOUR_MILLIS;\n\n    if (time &lt; 1000000000000L) {\n        time *= 1000;\n    }\n\n    Calendar today = Calendar.getInstance();\n\n    Calendar timeCal = Calendar.getInstance();\n    timeCal.setTimeInMillis(time);\n\n    long now = System.currentTimeMillis();\n    if (time &gt; now || time &lt;= 0) {\n        return null;\n    }\n\n    final long diff = now - time;\n    if (diff &lt; MINUTE_MILLIS) {\n        return \"Just now\";\n    } else if (diff &lt; 2 * MINUTE_MILLIS) {\n        return \"1 min\";\n    } else if (diff &lt; 59 * MINUTE_MILLIS) {\n        return diff / MINUTE_MILLIS + \" mins\";\n    } else if (diff &lt; 2 * HOUR_MILLIS) {\n        return \"1 hr\";\n    } else if (diff &lt; 24 * HOUR_MILLIS) {\n        return diff / HOUR_MILLIS + \" hrs\";\n    } else if (diff &lt; 48 * HOUR_MILLIS) {\n        return (\"Yesterday at \" + capsAMtoSmall(sdfTime.format(timeCal.getTime())));\n    } else if (today.get(Calendar.YEAR) == timeCal.get(Calendar.YEAR)) {\n        return capsAMtoSmall(sdf.format(timeCal.getTime()));\n    } else {\n        return capsAMtoSmall(sdfY.format(timeCal.getTime()));\n    }\n}\n</code></pre>\n\n<p>\n\n<pre><code>private static String capsAMtoSmall(String time) {\n    return time.replace(\"AM\", \"am\").replace(\"PM\",\"pm\");\n}\n</code></pre>\n\n<p>Happy coding :) </p>\n"},{"tags":[],"owner":{"account_id":29011837,"reputation":1,"user_id":22223178,"display_name":"Roustam Manookian"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696609560,"creation_date":1696609560,"answer_id":77246060,"question_id":59950270,"body_markdown":"I converted &quot;Kalpesh Rupani&#39;s&quot; answer to Kotlin as an Extension to Long, and it&#39;s working perfectly.\r\n        \r\n        \r\n    fun Long.relativeDate(): String {\r\n    val ONE_SECOND = 1000L\r\n    val ONE_MINUTE = 60000L\r\n    val ONE_HOUR = 3600000L\r\n    val ONE_DAY = 86400000L\r\n    val ONE_WEEK = 604800000L\r\n    val ONE_MONTH = 2592000000L\r\n    val ONE_YEAR = 31536000000L\r\n    //int gmtOffset = TimeZone.getDefault().getRawOffset()\r\n    val currentTime = System.currentTimeMillis()\r\n    val difference = currentTime - this\r\n    if (difference &lt; ONE_MINUTE) {\r\n        val timeAgo = difference / ONE_SECOND\r\n        return if (timeAgo &lt; 3 )\r\n            &quot;just now&quot;\r\n        else\r\n            &quot;$timeAgo seconds ago&quot;\r\n    } else if (difference &lt; ONE_HOUR) {\r\n        val timeAgo = difference / ONE_MINUTE\r\n        return if (timeAgo == 1L)\r\n            &quot;a minute ago&quot;\r\n        else\r\n            &quot;$timeAgo minutes ago&quot;\r\n    } else if (difference &lt; ONE_DAY) {\r\n        val timeAgo = difference / ONE_HOUR\r\n        return if (timeAgo == 1L )\r\n            &quot;an hour ago&quot;\r\n        else\r\n            &quot;$timeAgo hours ago&quot;\r\n    } else if (difference &lt; ONE_WEEK) {\r\n        val timeAgo = difference / ONE_DAY\r\n        return if (timeAgo == 1L )\r\n            &quot;yesterday&quot;\r\n        else\r\n            &quot;$timeAgo days ago&quot;\r\n    } else if (difference &lt; ONE_MONTH) {\r\n        val timeAgo = difference / ONE_WEEK\r\n        return if (timeAgo == 1L )\r\n            &quot;last week&quot;\r\n        else\r\n            &quot;$timeAgo weeks ago&quot;\r\n    } else if (difference &lt; ONE_YEAR) {\r\n        val timeAgo = difference / ONE_MONTH\r\n        return if (timeAgo == 1L )\r\n            &quot;last month&quot;\r\n        else\r\n            &quot;$timeAgo months ago&quot;\r\n    } else {\r\n        val timeAgo = difference / ONE_MONTH\r\n        return &quot;$timeAgo Months Ago&quot;\r\n    }\r\n}","title":"Converting a timestamp to relative time","body":"<p>I converted &quot;Kalpesh Rupani's&quot; answer to Kotlin as an Extension to Long, and it's working perfectly.</p>\n<pre><code>fun Long.relativeDate(): String {\nval ONE_SECOND = 1000L\nval ONE_MINUTE = 60000L\nval ONE_HOUR = 3600000L\nval ONE_DAY = 86400000L\nval ONE_WEEK = 604800000L\nval ONE_MONTH = 2592000000L\nval ONE_YEAR = 31536000000L\n//int gmtOffset = TimeZone.getDefault().getRawOffset()\nval currentTime = System.currentTimeMillis()\nval difference = currentTime - this\nif (difference &lt; ONE_MINUTE) {\n    val timeAgo = difference / ONE_SECOND\n    return if (timeAgo &lt; 3 )\n        &quot;just now&quot;\n    else\n        &quot;$timeAgo seconds ago&quot;\n} else if (difference &lt; ONE_HOUR) {\n    val timeAgo = difference / ONE_MINUTE\n    return if (timeAgo == 1L)\n        &quot;a minute ago&quot;\n    else\n        &quot;$timeAgo minutes ago&quot;\n} else if (difference &lt; ONE_DAY) {\n    val timeAgo = difference / ONE_HOUR\n    return if (timeAgo == 1L )\n        &quot;an hour ago&quot;\n    else\n        &quot;$timeAgo hours ago&quot;\n} else if (difference &lt; ONE_WEEK) {\n    val timeAgo = difference / ONE_DAY\n    return if (timeAgo == 1L )\n        &quot;yesterday&quot;\n    else\n        &quot;$timeAgo days ago&quot;\n} else if (difference &lt; ONE_MONTH) {\n    val timeAgo = difference / ONE_WEEK\n    return if (timeAgo == 1L )\n        &quot;last week&quot;\n    else\n        &quot;$timeAgo weeks ago&quot;\n} else if (difference &lt; ONE_YEAR) {\n    val timeAgo = difference / ONE_MONTH\n    return if (timeAgo == 1L )\n        &quot;last month&quot;\n    else\n        &quot;$timeAgo months ago&quot;\n} else {\n    val timeAgo = difference / ONE_MONTH\n    return &quot;$timeAgo Months Ago&quot;\n}\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":8977382,"reputation":1204,"user_id":9993404,"display_name":"Victory"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":840,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59953043,"answer_count":3,"score":1,"last_activity_date":1696609560,"creation_date":1580219316,"question_id":59950270,"body_markdown":"I want convert **`timestamp` to relative time** using `Java` in `Android` like **`Facebook`**. I&#39;m using `android.text.format.DateUtils.getRelativeTimeSpanString()` but not getting expected result.\r\n\r\nMy code : \r\n\r\n    public static CharSequence  getTimeAgo(long timestamp) {\r\n\r\n        return DateUtils.getRelativeTimeSpanString(timestamp, System.currentTimeMillis(), DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE);\r\n        \r\n    }\r\n\r\nResults : \r\n\r\n    5 sec ago\r\n    5 min ago\r\n    5 hr ago\r\n    5 days ago\r\n\r\nExpected results : \r\n\r\n    1 sec\r\n    5 secs\r\n    1 min\r\n    5 mins\r\n    1 hr\r\n    5 hrs\r\n    5 days\r\n    Yesterday at 11:48 pm\r\n    27 Jan at 6:52 pm\r\n    25 Aug 2019 at 7:53 pm\r\n\r\n","title":"Converting a timestamp to relative time","body":"<p>I want convert <strong><code>timestamp</code> to relative time</strong> using <code>Java</code> in <code>Android</code> like <strong><code>Facebook</code></strong>. I'm using <code>android.text.format.DateUtils.getRelativeTimeSpanString()</code> but not getting expected result.</p>\n\n<p>My code : </p>\n\n<pre><code>public static CharSequence  getTimeAgo(long timestamp) {\n\n    return DateUtils.getRelativeTimeSpanString(timestamp, System.currentTimeMillis(), DateUtils.SECOND_IN_MILLIS, DateUtils.FORMAT_ABBREV_RELATIVE);\n\n}\n</code></pre>\n\n<p>Results : </p>\n\n<pre><code>5 sec ago\n5 min ago\n5 hr ago\n5 days ago\n</code></pre>\n\n<p>Expected results : </p>\n\n<pre><code>1 sec\n5 secs\n1 min\n5 mins\n1 hr\n5 hrs\n5 days\nYesterday at 11:48 pm\n27 Jan at 6:52 pm\n25 Aug 2019 at 7:53 pm\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1696607252,"post_id":77245780,"comment_id":136179381,"body_markdown":"You can try this regex: `\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+`","body":"You can try this regex: <code>\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*&#47;{}=]|\\w+</code>"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1696607392,"post_id":77245780,"comment_id":136179404,"body_markdown":"It sounds like you want a custom compiler","body":"It sounds like you want a custom compiler"},{"owner":{"account_id":18825500,"reputation":169,"user_id":13730499,"display_name":"Mahmoud Hany"},"score":1,"creation_date":1696607434,"post_id":77245780,"comment_id":136179413,"body_markdown":"@anubhava wow that was quick! I have no idea how it works but it seems to work perfectly, I should definitly learn more about regular expressions, thanks!","body":"@anubhava wow that was quick! I have no idea how it works but it seems to work perfectly, I should definitly learn more about regular expressions, thanks!"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1696610310,"post_id":77245780,"comment_id":136179959,"body_markdown":"regular expressions work well if you can find and express strict rules. General tokenization has so many exceptions and special rules that you probably wouldn&#39;t use that here. E.g. usually you&#39;ll have some form of escaping, `&quot;SomeStr=\\&quot;123\\&quot;&quot;(something)` , maybe a syntax to span your string across multiple lines, ..","body":"regular expressions work well if you can find and express strict rules. General tokenization has so many exceptions and special rules that you probably wouldn&#39;t use that here. E.g. usually you&#39;ll have some form of escaping, <code>&quot;SomeStr=\\&quot;123\\&quot;&quot;(something)</code> , maybe a syntax to span your string across multiple lines, .."}],"answers":[{"tags":[],"owner":{"account_id":262968,"reputation":767110,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696608084,"creation_date":1696608084,"answer_id":77245908,"question_id":77245780,"body_markdown":"You can write a regex that matches quoted first as the first alternative before matching symbols and words like this:\r\n\r\n```sh\r\n\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\r\n```\r\n\r\n[RegEx Demo][1]\r\n\r\n**RegEx Details:**\r\n\r\n- `\\&quot;[^\\&quot;]*\\&quot;`: Match quoted text\r\n- `|`: OR\r\n- `[-()\\[\\]+*/{}=]`: Match a given symbol\r\n- `|`: OR\r\n- `\\w+`: Match 1+ word characters\r\n\r\n\r\nIf you want to allow escaped quotes then use:\r\n\r\n```sh\r\n\\&quot;[^\\&quot;\\\\]*(?:\\\\.[^\\&quot;\\\\]*)*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\r\n```\r\n\r\n[RegEx Demo 2][2]\r\n\r\n\r\n  [1]: https://regex101.com/r/GyW6d2/1\r\n  [2]: https://regex101.com/r/GyW6d2/2","title":"Add exception to regular expression if it happens to be between quotation marks?","body":"<p>You can write a regex that matches quoted first as the first alternative before matching symbols and words like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>\\&quot;[^\\&quot;]*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\n</code></pre>\n<p><a href=\"https://regex101.com/r/GyW6d2/1\" rel=\"nofollow noreferrer\">RegEx Demo</a></p>\n<p><strong>RegEx Details:</strong></p>\n<ul>\n<li><code>\\&quot;[^\\&quot;]*\\&quot;</code>: Match quoted text</li>\n<li><code>|</code>: OR</li>\n<li><code>[-()\\[\\]+*/{}=]</code>: Match a given symbol</li>\n<li><code>|</code>: OR</li>\n<li><code>\\w+</code>: Match 1+ word characters</li>\n</ul>\n<p>If you want to allow escaped quotes then use:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>\\&quot;[^\\&quot;\\\\]*(?:\\\\.[^\\&quot;\\\\]*)*\\&quot;|[-()\\[\\]+*/{}=]|\\w+\n</code></pre>\n<p><a href=\"https://regex101.com/r/GyW6d2/2\" rel=\"nofollow noreferrer\">RegEx Demo 2</a></p>\n"}],"owner":{"account_id":18825500,"reputation":169,"user_id":13730499,"display_name":"Mahmoud Hany"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77245908,"answer_count":1,"score":0,"last_activity_date":1696608084,"creation_date":1696606935,"question_id":77245780,"body_markdown":"I&#39;m writing a java application where I&#39;m trying to seperate tokens from each other given a string using regular expressions. the regular expression should seperate symbols (+ - / * = and any kind of brackets) from other things like letters and numbers, however I want to add an exception where it wouldn&#39;t seperate these symbols if they happen to be between quotation marks as in a string literal\r\n\r\nhere is the regular expression I currently have:\r\n`([a-zA-Z0-9&quot;]+|[\\(\\)\\[\\]\\+\\-\\*\\/\\{\\}=])`\r\nthis pattern gives me different matches and I process each match as a seperate token\r\n\r\nif I use this on this example string: `&quot;SomeStr=123&quot;(something)` (including the quotation marks) what I get is these tokens: `[&quot;SomeStr, =, 123&quot;, (, something, )]`\r\n\r\nwhat I want to get is:`[&quot;SomeStr=123&quot;, (, something, )]`\r\n\r\n\r\nthe pattern should only seperate the symbols if they were between quotation marks (with the fact that the quotation marks won&#39;t always be directly behind/infront of the symbol)\r\nis there a way I can do this in the regex?\r\n\r\nFYI I&#39;m trying to do this to make a tokenizer for educational purposes, perhaps using regex isn&#39;t the best way to do this?","title":"Add exception to regular expression if it happens to be between quotation marks?","body":"<p>I'm writing a java application where I'm trying to seperate tokens from each other given a string using regular expressions. the regular expression should seperate symbols (+ - / * = and any kind of brackets) from other things like letters and numbers, however I want to add an exception where it wouldn't seperate these symbols if they happen to be between quotation marks as in a string literal</p>\n<p>here is the regular expression I currently have:\n<code>([a-zA-Z0-9&quot;]+|[\\(\\)\\[\\]\\+\\-\\*\\/\\{\\}=])</code>\nthis pattern gives me different matches and I process each match as a seperate token</p>\n<p>if I use this on this example string: <code>&quot;SomeStr=123&quot;(something)</code> (including the quotation marks) what I get is these tokens: <code>[&quot;SomeStr, =, 123&quot;, (, something, )]</code></p>\n<p>what I want to get is:<code>[&quot;SomeStr=123&quot;, (, something, )]</code></p>\n<p>the pattern should only seperate the symbols if they were between quotation marks (with the fact that the quotation marks won't always be directly behind/infront of the symbol)\nis there a way I can do this in the regex?</p>\n<p>FYI I'm trying to do this to make a tokenizer for educational purposes, perhaps using regex isn't the best way to do this?</p>\n"},{"tags":["java","maven","maven-3","maven-surefire-plugin"],"answers":[{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"down_vote_count":0,"up_vote_count":39,"is_accepted":true,"score":39,"last_activity_date":1507067557,"creation_date":1506692243,"answer_id":46490011,"question_id":46489455,"body_markdown":"The official documentation calls that [late replacement][1].\r\n\r\nIf you do the following you will overwrite the value of the `argLine` parameter which is set by another plugins before, so **DO NOT DO THIS:**\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;argLine&gt;-D... -D...&lt;/argLine&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nThe proper way to keep the existing values and add your configuration is to use `@{...}` syntax:\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\nOR you can set `argLine` as a `property` in your `pom.xml` file:\r\n\r\n    &lt;properties&gt;\r\n        &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\r\n    &lt;/properties&gt;\r\n\r\n\r\nBoth solutions above works properly.\r\n\r\n  [1]: http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>The official documentation calls that <a href=\"http://maven.apache.org/surefire/maven-surefire-plugin/test-mojo.html#argLine\" rel=\"noreferrer\">late replacement</a>.</p>\n\n<p>If you do the following you will overwrite the value of the <code>argLine</code> parameter which is set by another plugins before, so <strong>DO NOT DO THIS:</strong></p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;-D... -D...&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>The proper way to keep the existing values and add your configuration is to use <code>@{...}</code> syntax:</p>\n\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n\n<p>OR you can set <code>argLine</code> as a <code>property</code> in your <code>pom.xml</code> file:</p>\n\n<pre><code>&lt;properties&gt;\n    &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\n&lt;/properties&gt;\n</code></pre>\n\n<p>Both solutions above works properly.</p>\n"},{"tags":[],"owner":{"account_id":25143265,"reputation":1,"user_id":18989383,"display_name":"nicolasdh.92"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1651234980,"creation_date":1651234980,"answer_id":72057919,"question_id":46489455,"body_markdown":"Thanks!\r\n\r\nIn my case it was:\r\n\r\n    &lt;argLine&gt;${tycho.testArgLine} -D...&lt;/argLine&gt;","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>Thanks!</p>\n<p>In my case it was:</p>\n<pre><code>&lt;argLine&gt;${tycho.testArgLine} -D...&lt;/argLine&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1668438587,"creation_date":1668438587,"answer_id":74433823,"question_id":46489455,"body_markdown":"**Update** for `Apache Maven 3.8.3`.\r\n\r\nIn my case only combination of both @zapee suggestions works, in other words it&#39;s important to add `&lt;argLine/&gt;` to `&lt;properties&gt;` and `@{argLine}` to configuration section. Example:\r\n\r\n```xml\r\n&lt;properties&gt;\r\n  &lt;!--  This is required for later correct replacement of argline --&gt;\r\n  &lt;argLine/&gt;\r\n&lt;/properties&gt;\r\n...\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n  &lt;configuration&gt;\r\n    &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt; \r\n  &lt;/configuration&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nHope, it helps somebody.","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p><strong>Update</strong> for <code>Apache Maven 3.8.3</code>.</p>\n<p>In my case only combination of both @zapee suggestions works, in other words it's important to add <code>&lt;argLine/&gt;</code> to <code>&lt;properties&gt;</code> and <code>@{argLine}</code> to configuration section. Example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n  &lt;!--  This is required for later correct replacement of argline --&gt;\n  &lt;argLine/&gt;\n&lt;/properties&gt;\n...\n&lt;plugin&gt;\n  &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n  &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n  &lt;configuration&gt;\n    &lt;argLine&gt;@{argLine} -D... -D...&lt;/argLine&gt; \n  &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Hope, it helps somebody.</p>\n"},{"tags":[],"owner":{"account_id":14883214,"reputation":27,"user_id":10747165,"display_name":"Ben Trono"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696607808,"creation_date":1696607808,"answer_id":77245875,"question_id":46489455,"body_markdown":"There&#39;s a difference between using ${} and @{}.\r\n\r\n`${}` is used by maven to do property replacement, which is done before any plugin is run.\r\n\r\n`@{}` is used by the maven surefire plugin as of Version 2.17 and allows for &quot;late replacement&quot; of properties when the the surefire plugin is executed,  so properties that have been modified by other plugins will be picked up correctly.\r\n\r\n[reference][1]\r\n\r\n\r\n  [1]: https://maven.apache.org/surefire/maven-surefire-plugin/faq.html#late-property-evaluation","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>There's a difference between using ${} and @{}.</p>\n<p><code>${}</code> is used by maven to do property replacement, which is done before any plugin is run.</p>\n<p><code>@{}</code> is used by the maven surefire plugin as of Version 2.17 and allows for &quot;late replacement&quot; of properties when the the surefire plugin is executed,  so properties that have been modified by other plugins will be picked up correctly.</p>\n<p><a href=\"https://maven.apache.org/surefire/maven-surefire-plugin/faq.html#late-property-evaluation\" rel=\"nofollow noreferrer\">reference</a></p>\n"}],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36874,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":46490011,"answer_count":4,"score":23,"last_activity_date":1696607808,"creation_date":1506690333,"question_id":46489455,"body_markdown":"I am using `maven-surefire-plugin` + `Sonar` together and I would like to add some extra value to `argLine` parameter of the maven-surefire-plugin.\r\n\r\nSo I did it:\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;2.20.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            ...\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\nBut in this case I am overwriting the original value of the `argLine` parameter and Sonar does not generate jacoco.exec file.\r\n\r\nI can see in the maven debug log (-X) that the value of argLine param without overwriting its value is `-javaagent:/opt/jenkins/.../myproject-SONAR/.repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128/org.jacoco.agent-0.7.4.201502262128-runtime.jar=destfile=/opt/jenkins/.../myproject-SONAR/target/jacoco.exec`.\r\n\r\nWhat is the proper way to APPEND the original value of this parameter (keep the original + add extra values)?\r\n\r\nI am using Apache Maven 3.5.0, Java version: 1.8.0_131, vendor: Oracle Corporation.\r\n","title":"Append the value of argLine param in maven-surefire-plugin","body":"<p>I am using <code>maven-surefire-plugin</code> + <code>Sonar</code> together and I would like to add some extra value to <code>argLine</code> parameter of the maven-surefire-plugin.</p>\n\n<p>So I did it:</p>\n\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.20.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;argLine&gt;-DCRR.Webservice.isSimulated=true -D...&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        ...\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>But in this case I am overwriting the original value of the <code>argLine</code> parameter and Sonar does not generate jacoco.exec file.</p>\n\n<p>I can see in the maven debug log (-X) that the value of argLine param without overwriting its value is <code>-javaagent:/opt/jenkins/.../myproject-SONAR/.repository/org/jacoco/org.jacoco.agent/0.7.4.201502262128/org.jacoco.agent-0.7.4.201502262128-runtime.jar=destfile=/opt/jenkins/.../myproject-SONAR/target/jacoco.exec</code>.</p>\n\n<p>What is the proper way to APPEND the original value of this parameter (keep the original + add extra values)?</p>\n\n<p>I am using Apache Maven 3.5.0, Java version: 1.8.0_131, vendor: Oracle Corporation.</p>\n"},{"tags":["java","inputstream","nonblocking","thread-local","java-21"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":4,"creation_date":1696577403,"post_id":77242529,"comment_id":136173559,"body_markdown":"Using virtual threads does not make code non-blocking, it just means that the carrier thread is available to do other work.","body":"Using virtual threads does not make code non-blocking, it just means that the carrier thread is available to do other work."},{"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"score":0,"creation_date":1696581551,"post_id":77242529,"comment_id":136174322,"body_markdown":"@MarkRotteveel Ok, you are right. But my question still remains. Which method is better/","body":"@MarkRotteveel Ok, you are right. But my question still remains. Which method is better/"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1696581739,"post_id":77242529,"comment_id":136174353,"body_markdown":"All the methods are blocking, because you are calling `get()`. Wrapping al that (or using an excutor that uses virtual threads) doesn&#39;t make it suddenly non-blocking. If you want it non-blocking yuo need to use a `CompletableFuture` throughout your stack. As Mark said if you use a virtual thread the actual platform thread will be able to do other work.","body":"All the methods are blocking, because you are calling <code>get()</code>. Wrapping al that (or using an excutor that uses virtual threads) doesn&#39;t make it suddenly non-blocking. If you want it non-blocking yuo need to use a <code>CompletableFuture</code> throughout your stack. As Mark said if you use a virtual thread the actual platform thread will be able to do other work."}],"answers":[{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1696607508,"creation_date":1696582662,"answer_id":77243122,"question_id":77242529,"body_markdown":"There is no significant difference between your variants. Any method returning a fully constructed result, like a `List&lt;String&gt;`, is always a synchronous or blocking method, as there is no way around waiting for any required result of asynchronous or external evaluations, to construct the final result.\r\n\r\nAsynchronous methods have to return a `Future` or similar kind of promise object which allows them to return before the actual result has been computed. This requires the caller to be able to deal with this kind of result. When the caller has to return a fully constructed result to their caller, it brings you back to square one, as it again requires a blocking wait.\r\n\r\nSo this traditional asynchronous processing requires all processing steps to be implemented as asynchronous operations, chaining callbacks to defer the actual computation to when the inputs are available.\r\n\r\nThe point of [virtual threads][1] is that they do not require you to write such traditional asynchronous methods at all. You can write your operation in a synchronous way. To stay at your example,\r\n\r\n```java\r\nList&lt;String&gt; straightForward() throws IOException {\r\n    try(InputStream bigInputStream = getResponse()) {\r\n        return deserialize(bigInputStream);\r\n    }\r\n}\r\n```\r\n\r\nIt’s the *caller’s responsibility* to invoke your code within a virtual thread, to get the benefit. Or, maybe it’s better to say that it’s the caller’s choice to use your method just synchronous or within a virtual thread. But it’s also possible that the caller uses your method in a plain synchronous way but the caller’s caller arranged the call in a virtual thread.\r\n\r\nIn the best case, 99% of your code does not deal with threads or asynchronous APIs but is written straight-forwardly in a synchronous manner. Only the remaining 1% has to arrange the invocations in virtual threads, like the web server creating a virtual thread per request or such alike.\r\n\r\n\r\n  [1]: https://openjdk.org/jeps/444","title":"Virtual thread for reading InputStream from HTTP response","body":"<p>There is no significant difference between your variants. Any method returning a fully constructed result, like a <code>List&lt;String&gt;</code>, is always a synchronous or blocking method, as there is no way around waiting for any required result of asynchronous or external evaluations, to construct the final result.</p>\n<p>Asynchronous methods have to return a <code>Future</code> or similar kind of promise object which allows them to return before the actual result has been computed. This requires the caller to be able to deal with this kind of result. When the caller has to return a fully constructed result to their caller, it brings you back to square one, as it again requires a blocking wait.</p>\n<p>So this traditional asynchronous processing requires all processing steps to be implemented as asynchronous operations, chaining callbacks to defer the actual computation to when the inputs are available.</p>\n<p>The point of <a href=\"https://openjdk.org/jeps/444\" rel=\"nofollow noreferrer\">virtual threads</a> is that they do not require you to write such traditional asynchronous methods at all. You can write your operation in a synchronous way. To stay at your example,</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;String&gt; straightForward() throws IOException {\n    try(InputStream bigInputStream = getResponse()) {\n        return deserialize(bigInputStream);\n    }\n}\n</code></pre>\n<p>It’s the <em>caller’s responsibility</em> to invoke your code within a virtual thread, to get the benefit. Or, maybe it’s better to say that it’s the caller’s choice to use your method just synchronous or within a virtual thread. But it’s also possible that the caller uses your method in a plain synchronous way but the caller’s caller arranged the call in a virtual thread.</p>\n<p>In the best case, 99% of your code does not deal with threads or asynchronous APIs but is written straight-forwardly in a synchronous manner. Only the remaining 1% has to arrange the invocations in virtual threads, like the web server creating a virtual thread per request or such alike.</p>\n"}],"owner":{"account_id":16501460,"reputation":213,"user_id":11922671,"display_name":"Urb"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":259,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1696607508,"creation_date":1696576890,"question_id":77242529,"body_markdown":"With the java 21 one can convert a blocking IO code to non-blocking one by just executing it in a virtual thread.\r\n\r\nShould I simply wrap the HTTP call that returns an `InputStream` (as in method `nonBlockingA`), or would it be more efficient to also perform the reading and deserialization of the `InputStream` in a virtual thread (as in method `nonBlockingB`)?\r\n\r\nIn other words, is the reading of `InputStream` a blocking IO operation?\r\n\r\nKeep in mind that the response could be quite large, potentially containing more than 500,000 Strings.\r\nI&#39;m also not sure if the used libraries are using any ThreadLocals, which is not recommended with virtual threads\r\n\r\n```java\r\n\r\n@SuppressWarnings(&quot;unchecked&quot;)\r\nclass Request {\r\n    private final ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\r\n    private CloseableHttpClient httpApacheClient;\r\n\r\n    List&lt;String&gt; nonBlockingA() throws Exception {\r\n        InputStream bigInputStream = executorService.submit(this::getResponse).get();\r\n        return deserialize(bigInputStream);\r\n    }\r\n\r\n    List&lt;String&gt; nonBlockingB() throws Exception {\r\n        return executorService.submit(() -&gt; {\r\n            InputStream bigInputStream = getResponse();\r\n            return deserialize(bigInputStream);\r\n        }).get();\r\n    }\r\n\r\n    private InputStream getResponse() throws IOException {\r\n        return httpApacheClient.execute(new HttpGet(&quot;http://random/names/size/500000&quot;)).getEntity().getContent();\r\n    }\r\n\r\n    private static List&lt;String&gt; deserialize(InputStream body) throws IOException {\r\n        try (InputStreamReader reader = new InputStreamReader(body, UTF_8)) {\r\n            return new Gson().fromJson(reader, List.class);\r\n        }\r\n    }\r\n} \r\n```\r\n\r\n","title":"Virtual thread for reading InputStream from HTTP response","body":"<p>With the java 21 one can convert a blocking IO code to non-blocking one by just executing it in a virtual thread.</p>\n<p>Should I simply wrap the HTTP call that returns an <code>InputStream</code> (as in method <code>nonBlockingA</code>), or would it be more efficient to also perform the reading and deserialization of the <code>InputStream</code> in a virtual thread (as in method <code>nonBlockingB</code>)?</p>\n<p>In other words, is the reading of <code>InputStream</code> a blocking IO operation?</p>\n<p>Keep in mind that the response could be quite large, potentially containing more than 500,000 Strings.\nI'm also not sure if the used libraries are using any ThreadLocals, which is not recommended with virtual threads</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n@SuppressWarnings(&quot;unchecked&quot;)\nclass Request {\n    private final ExecutorService executorService = Executors.newVirtualThreadPerTaskExecutor();\n    private CloseableHttpClient httpApacheClient;\n\n    List&lt;String&gt; nonBlockingA() throws Exception {\n        InputStream bigInputStream = executorService.submit(this::getResponse).get();\n        return deserialize(bigInputStream);\n    }\n\n    List&lt;String&gt; nonBlockingB() throws Exception {\n        return executorService.submit(() -&gt; {\n            InputStream bigInputStream = getResponse();\n            return deserialize(bigInputStream);\n        }).get();\n    }\n\n    private InputStream getResponse() throws IOException {\n        return httpApacheClient.execute(new HttpGet(&quot;http://random/names/size/500000&quot;)).getEntity().getContent();\n    }\n\n    private static List&lt;String&gt; deserialize(InputStream body) throws IOException {\n        try (InputStreamReader reader = new InputStreamReader(body, UTF_8)) {\n            return new Gson().fromJson(reader, List.class);\n        }\n    }\n} \n</code></pre>\n"},{"tags":["java","android","libgdx","rendering","flicker"],"comments":[{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497271516,"post_id":44499779,"comment_id":75992860,"body_markdown":"Use breakpoints to see where you call the render/show method and actually draw your image.","body":"Use breakpoints to see where you call the render/show method and actually draw your image."},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497339894,"post_id":44499779,"comment_id":76022927,"body_markdown":"Could you elaborate what you mean? Is it the addAction method with the stage.getActionsRequestRendering() and Gdx.graphics.requestRendering() that is causing the flickering.","body":"Could you elaborate what you mean? Is it the addAction method with the stage.getActionsRequestRendering() and Gdx.graphics.requestRendering() that is causing the flickering."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497340288,"post_id":44499779,"comment_id":76023202,"body_markdown":"What&#39;s this line `final Stage stage = this;` ? You never seem to use it.\n**edit**: your code has blatant compilation flaws, such as missing parenthesis. Could you double-check you didn&#39;t do an error pasting?","body":"What&#39;s this line <code>final Stage stage = this;</code> ? You never seem to use it. <b>edit</b>: your code has blatant compilation flaws, such as missing parenthesis. Could you double-check you didn&#39;t do an error pasting?"},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497346458,"post_id":44499779,"comment_id":76027269,"body_markdown":"With copy/paste some lines got cut off. The code should compile now.","body":"With copy/paste some lines got cut off. The code should compile now."},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497346709,"post_id":44499779,"comment_id":76027448,"body_markdown":"I thought so. And for the `final Stage stage = this;`? Why do you do that and `about.show( stage )` instead of passing `this` directly? Are you duplicating the stages?","body":"I thought so. And for the <code>final Stage stage = this;</code>? Why do you do that and <code>about.show( stage )</code> instead of passing <code>this</code> directly? Are you duplicating the stages?"},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497347412,"post_id":44499779,"comment_id":76027991,"body_markdown":"I use the &#39;final Stage stage = this&#39;  to save the reference. Its because im overriding the &#39;result( Object object );&#39; i cant use this in that method body. There are no duplicates of the stages.","body":"I use the &#39;final Stage stage = this&#39;  to save the reference. Its because im overriding the &#39;result( Object object );&#39; i cant use this in that method body. There are no duplicates of the stages."},{"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"score":0,"creation_date":1497529718,"post_id":44499779,"comment_id":76123555,"body_markdown":"@Nathan Did you try to run the code and could you confirm the bug?","body":"@Nathan Did you try to run the code and could you confirm the bug?"},{"owner":{"account_id":7009242,"reputation":1636,"user_id":5372723,"accept_rate":100,"display_name":"Turtle"},"score":0,"creation_date":1497530125,"post_id":44499779,"comment_id":76123844,"body_markdown":"No. I can&#39;t at my work (I have to modify the entire badlogic configuration, as we don&#39;t have direct access to the libs), and I forgot at home. I&#39;ll look it up this night or tomorrow.","body":"No. I can&#39;t at my work (I have to modify the entire badlogic configuration, as we don&#39;t have direct access to the libs), and I forgot at home. I&#39;ll look it up this night or tomorrow."}],"answers":[{"tags":[],"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1511034195,"creation_date":1506008754,"answer_id":46348168,"question_id":44499779,"body_markdown":"For closure the solution was just to create a new SpriteBatch in the HUD class like this:\r\n\r\n    super( new ScalingViewport(\r\n        Scaling.stretch,\r\n        0.3f * Gdx.graphics.getWidth(),\r\n        0.3f * Gdx.graphics.getHeight(),\r\n        new OrthographicCamera() ),\r\n        new SpriteBatch()\r\n    );\r\nThe flickering didn&#39;t happen at all. The wiki explained that &quot;A SpriteBatch is a pretty heavy object so you should only ever have one in your program.&quot; so this is not recommended.","title":"Java gdxlib flickers when changing dialogs","body":"<p>For closure the solution was just to create a new SpriteBatch in the HUD class like this:</p>\n\n<pre><code>super( new ScalingViewport(\n    Scaling.stretch,\n    0.3f * Gdx.graphics.getWidth(),\n    0.3f * Gdx.graphics.getHeight(),\n    new OrthographicCamera() ),\n    new SpriteBatch()\n);\n</code></pre>\n\n<p>The flickering didn't happen at all. The wiki explained that \"A SpriteBatch is a pretty heavy object so you should only ever have one in your program.\" so this is not recommended.</p>\n"},{"tags":[],"owner":{"account_id":63479,"reputation":5810,"user_id":187883,"accept_rate":100,"display_name":"NateS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696606895,"creation_date":1696606895,"answer_id":77245777,"question_id":44499779,"body_markdown":"Most likely the color of the SpriteBatch is changed. Drawing code doesn&#39;t try to keep the color whatever it was previously because that would require a lot of unnecessary color changes. Set it to white before drawing the background or anything else.","title":"Java gdxlib flickers when changing dialogs","body":"<p>Most likely the color of the SpriteBatch is changed. Drawing code doesn't try to keep the color whatever it was previously because that would require a lot of unnecessary color changes. Set it to white before drawing the background or anything else.</p>\n"}],"owner":{"account_id":11099771,"reputation":236,"user_id":8148804,"display_name":"Tejay"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696606895,"creation_date":1497271328,"question_id":44499779,"body_markdown":"Hello I have problems with flickering texture in libGdx. I have looked everywhere and I couldn&#39;t find a solution.\r\n\r\nThe texture only flickers when I&#39;m change dialogs with the show (Stage stage) method. There are basically 2 render calls. One from the render where I draw the texture and the second is the draw method in Stage class. \r\n\r\nThe first one shouldn&#39;t flicker when I&#39;m changing dialogs. This is very annoying and I don&#39;t know how to solve this.\r\n\r\nThe app class:\r\n\r\n    import com.badlogic.gdx.ApplicationListener;\r\n\timport com.badlogic.gdx.Gdx;\r\n\timport com.badlogic.gdx.graphics.Color;\r\n\timport com.badlogic.gdx.graphics.GL20;\r\n\timport com.badlogic.gdx.graphics.OrthographicCamera;\r\n\timport com.badlogic.gdx.graphics.Texture;\r\n\timport com.badlogic.gdx.graphics.g2d.BitmapFont;\r\n\timport com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\n\timport com.badlogic.gdx.graphics.g2d.TextureRegion;\r\n\timport com.badlogic.gdx.scenes.scene2d.Stage;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Dialog;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Label.LabelStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Skin;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Table;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.TextButton.TextButtonStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.ui.Window.WindowStyle;\r\n\timport com.badlogic.gdx.scenes.scene2d.utils.Drawable;\r\n\timport com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;\r\n\timport com.badlogic.gdx.utils.Scaling;\r\n\timport com.badlogic.gdx.utils.viewport.ScalingViewport;\r\n\timport com.badlogic.gdx.utils.viewport.StretchViewport;\r\n                               \r\n\tpublic class FlickerGame implements ApplicationListener {                                 \r\n\t\t                                                                                      \r\n\t\tprivate SpriteBatch batch;                                                            \r\n\t\tprivate StretchViewport viewport;                                                     \r\n\t\tprivate HUD hud;                                                                      \r\n\t\tprivate Texture texture;                                                              \r\n\t\tprivate BitmapFont font;                                                              \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void create() {                                                                \r\n\t\t\t                                                                                  \r\n\t\t\t// use only one SpriteBatch in game                                           \r\n\t\t\tbatch = new SpriteBatch();                                                        \r\n\t\t\tviewport = new StretchViewport( Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );\r\n\t\t\ttexture = new Texture( Gdx.files.local( &quot;badlogic.jpg&quot; ) );                       \r\n\t\t\tfont = new BitmapFont();                                                          \r\n\t\t\thud = new HUD( batch, getSkin() );                                                \r\n\t\t\t                                                                                  \r\n\t\t\tGdx.input.setInputProcessor( hud );                                               \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void dispose() {                                                               \r\n\t                                                                                          \r\n\t\t\tbatch.dispose();                                                                  \r\n\t\t\thud.dispose();                                                                    \r\n\t\t\ttexture.dispose();                                                                \r\n\t\t\tfont.dispose();                                                                   \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void resize( int width, int height ) {                                         \r\n\t\t\t                                                                                  \r\n\t\t\tviewport.update( width, height, true );                                           \r\n\t\t\thud.getViewport().update( width, height, true );                                  \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override                                                                             \r\n\t\tpublic void render() {                                                                \r\n\t\t\t                                                                                  \r\n\t\t\tfloat delta = Gdx.graphics.getDeltaTime();                                        \r\n\t\t\t                                                                                  \r\n\t\t\tGdx.gl.glClearColor( 0, 0, 0, 1 );                                                \r\n\t\t\tGdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );                                       \r\n\t\t\t                                                                                  \r\n\t\t\t// draw the texture on the whole screen                                           \r\n\t\t\tbatch.setProjectionMatrix( viewport.getCamera().combined );                       \r\n\t\t\tbatch.begin();                                                                    \r\n\t\t\tbatch.draw( texture, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );   \r\n\t\t\tbatch.end();                                                                      \r\n\t                                                                                          \r\n\t\t\thud.act( delta );                                                                 \r\n\t\t\thud.draw();                                                                       \r\n\t\t}                                                                                     \r\n\t                                                                                          \r\n\t\t@Override public void pause() {}                                                      \r\n\t\t@Override public void resume() {}                                                     \r\n\t\t                                                                                      \r\n\t\tprivate Skin getSkin(){                                                               \r\n\t\t\t                                                                                  \r\n\t\t\tSkin skin = new Skin();                                                           \r\n\t\t\t                                                                                  \r\n\t\t\t// just add a part of the badlogic.jpg as button looks awful its just for testing \r\n\t\t\tDrawable up = new TextureRegionDrawable( new TextureRegion( texture, 0, 0, 50, 8 ) );\r\n\t\t\t                                                                                  \r\n\t\t\tskin.add( DEFAULT, new WindowStyle( font, Color.WHITE, null ), WindowStyle.class );\r\n\t\t\tskin.add( DEFAULT, new LabelStyle( font, Color.WHITE ), LabelStyle.class );       \r\n\t\t\tskin.add( DEFAULT, new TextButtonStyle( up, null, null, font ), TextButtonStyle.class );\r\n\t\t\t                                                                                  \r\n\t\t\treturn skin;                                                                      \r\n\t\t}                                                                                     \r\n\t\t                                                                                      \r\n\t\tprivate static final String DEFAULT = &quot;default&quot;;                                      \r\n\t}                                                                                         \r\n\r\nThe HUD class where I implemented the Dialog.                                      \r\n\t                                                                                          \r\n\tclass HUD extends Stage {                                                                 \r\n\t\t                                                                                      \r\n\t\tprivate Dialog menu;                                                                  \r\n\t\tprivate Dialog about;                                                                 \r\n\t\tprivate Dialog exit;                                                                  \r\n\t\t                                                                                      \r\n\t\tpublic HUD( SpriteBatch batch, Skin skin ){                                           \r\n\t\t\t                                                                                  \r\n\t\t\tsuper( new ScalingViewport( Scaling.stretch, 0.3f * Gdx.graphics.getWidth(), 0.3f * Gdx.graphics.getHeight(), new OrthographicCamera() ), batch );\r\n\t\t\t                                                                                  \r\n\t\t\tfinal Stage stage = this;                                                         \r\n\t\t\t                                                                                  \r\n\t\t\tmenu = new Dialog( &quot;menu&quot;, skin ){                                                \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tif ( object instanceof Integer ){                                         \r\n\t\t\t\t\t\tswitch ( (Integer) object ){                                          \r\n\t\t\t\t\t\t\tcase 0:                                                           \r\n\t\t\t\t\t\t\t\t// play button doesn&#39;t do anything at the moment              \r\n\t\t\t\t\t\t\t\tGdx.app.log( &quot;Button&quot;, &quot;play&quot; );                              \r\n\t\t\t\t\t\t\t\tbreak;                                                        \r\n\t\t\t\t\t\t\tcase 1: about.show( stage ); break;                               \r\n\t\t\t\t\t\t\tcase 2: exit.show( stage ); break;                                \r\n\t\t\t\t\t\t}                                                                     \r\n\t\t\t\t\t}                                                                         \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\tTable menuButtons = menu.getButtonTable();                                        \r\n\t\t\tmenu.button( &quot;play&quot;, 0 );                                                         \r\n\t\t\tmenuButtons.row();                                                                \r\n\t\t\tmenu.button( &quot;credits&quot;, 1 );                                                      \r\n\t\t\tmenuButtons.row();                                                                \r\n\t\t\tmenu.button( &quot;exit&quot;, 2 );                                                         \r\n\t\t\t                                                                                  \r\n\t\t\tabout = new Dialog( &quot;credits&quot;, skin ){                                            \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tmenu.show( stage );                                                       \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\tabout.text( &quot;made by me!&quot; );                                                      \r\n\t\t\tabout.button( &quot;back&quot; );                                                           \r\n\t\t\t                                                                                  \r\n\t\t\texit = new Dialog( &quot;&quot;, skin ){                                                    \r\n\t\t\t\t                                                                              \r\n\t\t\t\t@Override                                                                     \r\n\t\t\t\tpublic void result( Object object ){                                          \r\n\t\t\t\t\t                                                                          \r\n\t\t\t\t\tif ( object instanceof Boolean ){                                         \r\n\t\t\t\t\t\tif ( (Boolean) object ){                                              \r\n\t\t\t\t\t\t\tGdx.app.exit();                                                   \r\n\t\t\t\t\t\t} else {                                                              \r\n\t\t\t\t\t\t\tmenu.show( stage );                                               \r\n\t\t\t\t\t\t}                                                                     \r\n\t\t\t\t\t}                                                                         \r\n\t\t\t\t}                                                                             \r\n\t\t\t};                                                                                \r\n\t\t\texit.text( &quot;Are you sure you want to exit?&quot; );                                    \r\n\t\t\texit.button( &quot;yes&quot;, true );                                                       \r\n\t\t\texit.button( &quot;no&quot;, false );                                                       \r\n\t\t\t                                                                                  \r\n\t\t\tmenu.show( this );                                                                \r\n\t\t}                                                                                     \r\n\t}                                                                                         \r\n                                                                                              ","title":"Java gdxlib flickers when changing dialogs","body":"<p>Hello I have problems with flickering texture in libGdx. I have looked everywhere and I couldn't find a solution.</p>\n\n<p>The texture only flickers when I'm change dialogs with the show (Stage stage) method. There are basically 2 render calls. One from the render where I draw the texture and the second is the draw method in Stage class. </p>\n\n<p>The first one shouldn't flicker when I'm changing dialogs. This is very annoying and I don't know how to solve this.</p>\n\n<p>The app class:</p>\n\n<pre><code>import com.badlogic.gdx.ApplicationListener;\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.graphics.Color;\nimport com.badlogic.gdx.graphics.GL20;\nimport com.badlogic.gdx.graphics.OrthographicCamera;\nimport com.badlogic.gdx.graphics.Texture;\nimport com.badlogic.gdx.graphics.g2d.BitmapFont;\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\nimport com.badlogic.gdx.scenes.scene2d.Stage;\nimport com.badlogic.gdx.scenes.scene2d.ui.Dialog;\nimport com.badlogic.gdx.scenes.scene2d.ui.Label.LabelStyle;\nimport com.badlogic.gdx.scenes.scene2d.ui.Skin;\nimport com.badlogic.gdx.scenes.scene2d.ui.Table;\nimport com.badlogic.gdx.scenes.scene2d.ui.TextButton.TextButtonStyle;\nimport com.badlogic.gdx.scenes.scene2d.ui.Window.WindowStyle;\nimport com.badlogic.gdx.scenes.scene2d.utils.Drawable;\nimport com.badlogic.gdx.scenes.scene2d.utils.TextureRegionDrawable;\nimport com.badlogic.gdx.utils.Scaling;\nimport com.badlogic.gdx.utils.viewport.ScalingViewport;\nimport com.badlogic.gdx.utils.viewport.StretchViewport;\n\npublic class FlickerGame implements ApplicationListener {                                 \n\n    private SpriteBatch batch;                                                            \n    private StretchViewport viewport;                                                     \n    private HUD hud;                                                                      \n    private Texture texture;                                                              \n    private BitmapFont font;                                                              \n\n    @Override                                                                             \n    public void create() {                                                                \n\n        // use only one SpriteBatch in game                                           \n        batch = new SpriteBatch();                                                        \n        viewport = new StretchViewport( Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );\n        texture = new Texture( Gdx.files.local( \"badlogic.jpg\" ) );                       \n        font = new BitmapFont();                                                          \n        hud = new HUD( batch, getSkin() );                                                \n\n        Gdx.input.setInputProcessor( hud );                                               \n    }                                                                                     \n\n    @Override                                                                             \n    public void dispose() {                                                               \n\n        batch.dispose();                                                                  \n        hud.dispose();                                                                    \n        texture.dispose();                                                                \n        font.dispose();                                                                   \n    }                                                                                     \n\n    @Override                                                                             \n    public void resize( int width, int height ) {                                         \n\n        viewport.update( width, height, true );                                           \n        hud.getViewport().update( width, height, true );                                  \n    }                                                                                     \n\n    @Override                                                                             \n    public void render() {                                                                \n\n        float delta = Gdx.graphics.getDeltaTime();                                        \n\n        Gdx.gl.glClearColor( 0, 0, 0, 1 );                                                \n        Gdx.gl.glClear( GL20.GL_COLOR_BUFFER_BIT );                                       \n\n        // draw the texture on the whole screen                                           \n        batch.setProjectionMatrix( viewport.getCamera().combined );                       \n        batch.begin();                                                                    \n        batch.draw( texture, 0, 0, Gdx.graphics.getWidth(), Gdx.graphics.getHeight() );   \n        batch.end();                                                                      \n\n        hud.act( delta );                                                                 \n        hud.draw();                                                                       \n    }                                                                                     \n\n    @Override public void pause() {}                                                      \n    @Override public void resume() {}                                                     \n\n    private Skin getSkin(){                                                               \n\n        Skin skin = new Skin();                                                           \n\n        // just add a part of the badlogic.jpg as button looks awful its just for testing \n        Drawable up = new TextureRegionDrawable( new TextureRegion( texture, 0, 0, 50, 8 ) );\n\n        skin.add( DEFAULT, new WindowStyle( font, Color.WHITE, null ), WindowStyle.class );\n        skin.add( DEFAULT, new LabelStyle( font, Color.WHITE ), LabelStyle.class );       \n        skin.add( DEFAULT, new TextButtonStyle( up, null, null, font ), TextButtonStyle.class );\n\n        return skin;                                                                      \n    }                                                                                     \n\n    private static final String DEFAULT = \"default\";                                      \n}                                                                                         \n</code></pre>\n\n<p>The HUD class where I implemented the Dialog.                                      </p>\n\n<pre><code>class HUD extends Stage {                                                                 \n\n    private Dialog menu;                                                                  \n    private Dialog about;                                                                 \n    private Dialog exit;                                                                  \n\n    public HUD( SpriteBatch batch, Skin skin ){                                           \n\n        super( new ScalingViewport( Scaling.stretch, 0.3f * Gdx.graphics.getWidth(), 0.3f * Gdx.graphics.getHeight(), new OrthographicCamera() ), batch );\n\n        final Stage stage = this;                                                         \n\n        menu = new Dialog( \"menu\", skin ){                                                \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                if ( object instanceof Integer ){                                         \n                    switch ( (Integer) object ){                                          \n                        case 0:                                                           \n                            // play button doesn't do anything at the moment              \n                            Gdx.app.log( \"Button\", \"play\" );                              \n                            break;                                                        \n                        case 1: about.show( stage ); break;                               \n                        case 2: exit.show( stage ); break;                                \n                    }                                                                     \n                }                                                                         \n            }                                                                             \n        };                                                                                \n        Table menuButtons = menu.getButtonTable();                                        \n        menu.button( \"play\", 0 );                                                         \n        menuButtons.row();                                                                \n        menu.button( \"credits\", 1 );                                                      \n        menuButtons.row();                                                                \n        menu.button( \"exit\", 2 );                                                         \n\n        about = new Dialog( \"credits\", skin ){                                            \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                menu.show( stage );                                                       \n            }                                                                             \n        };                                                                                \n        about.text( \"made by me!\" );                                                      \n        about.button( \"back\" );                                                           \n\n        exit = new Dialog( \"\", skin ){                                                    \n\n            @Override                                                                     \n            public void result( Object object ){                                          \n\n                if ( object instanceof Boolean ){                                         \n                    if ( (Boolean) object ){                                              \n                        Gdx.app.exit();                                                   \n                    } else {                                                              \n                        menu.show( stage );                                               \n                    }                                                                     \n                }                                                                         \n            }                                                                             \n        };                                                                                \n        exit.text( \"Are you sure you want to exit?\" );                                    \n        exit.button( \"yes\", true );                                                       \n        exit.button( \"no\", false );                                                       \n\n        menu.show( this );                                                                \n    }                                                                                     \n}                                                                                         \n</code></pre>\n"},{"tags":["java","spring-boot","apache-kafka"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694520072,"post_id":77088835,"comment_id":135898896,"body_markdown":"Depends on your use case. We don&#39;t have nearly enough information to answer that question.","body":"Depends on your use case. We don&#39;t have nearly enough information to answer that question."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694524290,"post_id":77088835,"comment_id":135899888,"body_markdown":"@Jorn my use cas is just get the message from kafka &amp; persist it in the Database","body":"@Jorn my use cas is just get the message from kafka &amp; persist it in the Database"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694524750,"post_id":77088835,"comment_id":135900005,"body_markdown":"If there&#39;s absolutely no other difference, then why add the extra indirection via a REST API? Just persist to the database.","body":"If there&#39;s absolutely no other difference, then why add the extra indirection via a REST API? Just persist to the database."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694524787,"post_id":77088835,"comment_id":135900017,"body_markdown":"It&#39;s like asking: &quot;I need bread, should I drive to the bakery directly or through the next town over?&quot;","body":"It&#39;s like asking: &quot;I need bread, should I drive to the bakery directly or through the next town over?&quot;"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694524827,"post_id":77088835,"comment_id":135900027,"body_markdown":"You could use Kafka Connect instead of writing your own Java/Spring code, by the way","body":"You could use Kafka Connect instead of writing your own Java/Spring code, by the way"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694525033,"post_id":77088835,"comment_id":135900092,"body_markdown":"If you control the code of that REST API, you could also put your consumer there instead of making any HTTP calls","body":"If you control the code of that REST API, you could also put your consumer there instead of making any HTTP calls"},{"owner":{"account_id":22650899,"reputation":355,"user_id":16825573,"display_name":"Lejdi Prifti"},"score":1,"creation_date":1694525347,"post_id":77088835,"comment_id":135900196,"body_markdown":"Just persist on database, keep it simple.","body":"Just persist on database, keep it simple."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694526548,"post_id":77088835,"comment_id":135900506,"body_markdown":"@Jorn im asking the question becaue i have already the API developped that persist the object.and i want to know if i could use it instead of developping all the layers Entity,repository,service.. plus datasource conf in my kafka consumer","body":"@Jorn im asking the question becaue i have already the API developped that persist the object.and i want to know if i could use it instead of developping all the layers Entity,repository,service.. plus datasource conf in my kafka consumer"},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694526810,"post_id":77088835,"comment_id":135900586,"body_markdown":"@OneCricketeer yes i have the control on the api project. it&#39;s a good practise to combine api (synchronous call) &amp; kafka (asynchronous call) in the same project ?","body":"@OneCricketeer yes i have the control on the api project. it&#39;s a good practise to combine api (synchronous call) &amp; kafka (asynchronous call) in the same project ?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1694526932,"post_id":77088835,"comment_id":135900613,"body_markdown":"Still, how do you expect *us* to make that choice? Either option is viable. *You* need to pick one based on requirements.","body":"Still, how do you expect <i>us</i> to make that choice? Either option is viable. <i>You</i> need to pick one based on requirements."},{"owner":{"account_id":1662914,"reputation":332,"user_id":1530849,"display_name":"talipkorkmaz"},"score":1,"creation_date":1694527045,"post_id":77088835,"comment_id":135900653,"body_markdown":"Follow S of SOLID principle, let the HTTP API manage the lifecycle of the entity if it&#39;s built for that. But I&#39;m very skeptical about your architecture in terms of domain responsibility segregation.","body":"Follow S of SOLID principle, let the HTTP API manage the lifecycle of the entity if it&#39;s built for that. But I&#39;m very skeptical about your architecture in terms of domain responsibility segregation."},{"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"score":0,"creation_date":1694527459,"post_id":77088835,"comment_id":135900765,"body_markdown":"@Jorn my question was clear : if the both solutions are valid or not or i could choose one instead of the other. not asking you to choice at my place. regards","body":"@Jorn my question was clear : if the both solutions are valid or not or i could choose one instead of the other. not asking you to choice at my place. regards"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1694527496,"post_id":77088835,"comment_id":135900774,"body_markdown":"It&#39;s a practice commonly done. Good or not, we cannot decide for you. Kafka Steams can be both a REST API and processor (see docs on Interactive Queries), for example. Similarly for ksqlDB","body":"It&#39;s a practice commonly done. Good or not, we cannot decide for you. Kafka Steams can be both a REST API and processor (see docs on Interactive Queries), for example. Similarly for ksqlDB"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1694529899,"post_id":77088835,"comment_id":135901361,"body_markdown":"@James I&#39;m going to repeat myself because it&#39;s important to get this point across: There is no &quot;best&quot; choice in a vacuum. And since you haven&#39;t defined any parameters, there&#39;s not much we can do for you. And that&#39;s why all answers here are pure speculation.","body":"@James I&#39;m going to repeat myself because it&#39;s important to get this point across: There is no &quot;best&quot; choice in a vacuum. And since you haven&#39;t defined any parameters, there&#39;s not much we can do for you. And that&#39;s why all answers here are pure speculation."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1696606837,"creation_date":1694527728,"answer_id":77089916,"question_id":77088835,"body_markdown":"Think about your problem in terms of availability and consistency. \r\n\r\nWhat happens if the database is unreachable (say, it&#39;s going through an upgrade), then will you end up losing events? In that scenario, a highly available HTTP API seems like a better choice.\r\n\r\nAlternatively, you&#39;ve not mentioned what the API actually does with the record. Is it writing to the same database? If so, you&#39;re only adding latency to any process that reads from the database (eventual consistency). In that case, directly writing to the database would be quicker, with the tradeoff of availability, mentioned above, which could be addressed by running a distributed database cluster.\r\n\r\nYou could alternatively use Kafka Streams to create a RocksDB table on disk, rather than use JPA. ","title":"Kafka consumer Spring Data or Http REST API","body":"<p>Think about your problem in terms of availability and consistency.</p>\n<p>What happens if the database is unreachable (say, it's going through an upgrade), then will you end up losing events? In that scenario, a highly available HTTP API seems like a better choice.</p>\n<p>Alternatively, you've not mentioned what the API actually does with the record. Is it writing to the same database? If so, you're only adding latency to any process that reads from the database (eventual consistency). In that case, directly writing to the database would be quicker, with the tradeoff of availability, mentioned above, which could be addressed by running a distributed database cluster.</p>\n<p>You could alternatively use Kafka Streams to create a RocksDB table on disk, rather than use JPA.</p>\n"}],"owner":{"account_id":7275154,"reputation":1283,"user_id":5546850,"accept_rate":66,"display_name":"James"},"comment_count":14,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1694530051,"accepted_answer_id":77089916,"answer_count":1,"score":-3,"last_activity_date":1696606837,"creation_date":1694519482,"question_id":77088835,"body_markdown":"\r\n\r\nI have the choice to persist a Kafka message in database directly using Spring Data JPA, or make an HTTP POST call to another REST API after consuming. \r\n\r\nCould you please tell me what&#39;s the best choice? ","title":"Kafka consumer Spring Data or Http REST API","body":"<p>I have the choice to persist a Kafka message in database directly using Spring Data JPA, or make an HTTP POST call to another REST API after consuming.</p>\n<p>Could you please tell me what's the best choice?</p>\n"},{"tags":["java","spring","spring-mvc","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":9503455,"reputation":36,"user_id":7063755,"display_name":"Alessandro Lacchi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696606830,"creation_date":1696606650,"answer_id":77245759,"question_id":77245554,"body_markdown":"it seems that you are not initializing the connector, as you can see from the official spring documentation you need the connector instatiated before plug in the builder (a direct dependency injection of spring for the connector does not seem advisable):\r\n\r\n    @Bean\r\n    public JettyResourceFactory resourceFactory() {\r\n    \treturn new JettyResourceFactory();\r\n    }\r\n    \r\n        @Bean\r\n    public WebClient webClient() {\r\n    \r\n    \tHttpClient httpClient = new HttpClient();\r\n    \t// Further customizations...\r\n    \r\n    \tClientHttpConnector connector =\r\n    \t\t\tnew JettyClientHttpConnector(httpClient, resourceFactory()); \r\n    \r\n    \treturn WebClient.builder().clientConnector(connector).build(); \r\n    }\r\n\r\nhere you can find the documentation: [Client-builder][1]\r\n\r\nI hope it was helpful to you.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html","title":"Error &quot;No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available&quot; while creating WebClient bean","body":"<p>it seems that you are not initializing the connector, as you can see from the official spring documentation you need the connector instatiated before plug in the builder (a direct dependency injection of spring for the connector does not seem advisable):</p>\n<pre><code>@Bean\npublic JettyResourceFactory resourceFactory() {\n    return new JettyResourceFactory();\n}\n\n    @Bean\npublic WebClient webClient() {\n\n    HttpClient httpClient = new HttpClient();\n    // Further customizations...\n\n    ClientHttpConnector connector =\n            new JettyClientHttpConnector(httpClient, resourceFactory()); \n\n    return WebClient.builder().clientConnector(connector).build(); \n}\n</code></pre>\n<p>here you can find the documentation: <a href=\"https://docs.spring.io/spring-framework/reference/web/webflux-webclient/client-builder.html\" rel=\"nofollow noreferrer\">Client-builder</a></p>\n<p>I hope it was helpful to you.</p>\n"}],"owner":{"account_id":5640896,"reputation":187,"user_id":4464806,"display_name":"Abhinash Jha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77245759,"answer_count":1,"score":0,"last_activity_date":1696606830,"creation_date":1696604947,"question_id":77245554,"body_markdown":"I need to use WebClient on an existing Spring project. The existing Spring version is 4. I updated the Spring version to 5 because to use WebClient, Spring 5 is required.\r\n\r\nBelow are the spring dependencies in pom.xml:\r\n```\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.5.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.4-1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;5.2.15.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;0.9.20.RELEASE&lt;/version&gt;\r\n\t\t\t&lt;scope&gt;compile&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n**added** : spring-web, spring-webflux and reactor-netty.\r\n\r\nNext, I configured WebClient bean in AppConfig\r\n```\r\n@Bean\r\n  public WebClient webClient(@Value(&quot;${myservice.endpoint}&quot;) String countryServiceUrl, ClientHttpConnector connector) {\r\n    return WebClient.builder()\r\n            .baseUrl(countryServiceUrl)\r\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\r\n            .clientConnector(connector)\r\n            .build();\r\n  }\r\n```\r\nBelow is the project setup:\r\n```\r\npublic class WebAppInitializer implements WebApplicationInitializer {\r\nprivate AnnotationConfigWebApplicationContext applicationContext;\r\n@Override\r\n  public void onStartup(final ServletContext servletContext) throws ServletException {\r\n    applicationContext = new AnnotationConfigWebApplicationContext();\r\n    applicationContext.register(AppConfig.class);\r\n    applicationContext.setDisplayName(DISPLAY_NAME);\r\n\r\n    // Manage the life cycle of the root application context\r\n    servletContext.addListener(new ContextLoaderListener(applicationContext));\r\n\r\n    applicationContext.refresh();\r\n    applicationContext.registerShutdownHook();\r\n  }\r\n}\r\n```\r\nI am deploying the project to tomcat 9 in my local. Below is the error:\r\n```\r\nWARN  AnnotationConfigWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;createMyMessageConverter&#39;: Unsatisfied dependency expressed through field &#39;myMessageConverter&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;myMessageConverter&#39;: Unsatisfied dependency expressed through field ‘myServiceCaller&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘myServiceCaller&#39;: Unsatisfied dependency expressed through field ‘someDAO&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘someDAOImpl&#39;: Unsatisfied dependency expressed through field &#39;webClient&#39;; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;webClient&#39; defined in com.my.package.config.AppConfig: Unsatisfied dependency expressed through method &#39;webClient&#39; parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n06-Oct-2023 07:37:23.262 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/Users/abhinash.kumar/Downloads/apache-tomcat-9.0.65/webapps/myApp-SNAPSHOT.war]\r\n\tjava.lang.IllegalStateException: Error starting child\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n\t\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n\t\tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n\t\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n\t\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n\t\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n\t\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n\t\tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n\t\tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n\t\tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n\t\tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n\t\tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n\t\tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n\t\tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n\t\tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\t\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\t\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n\t\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\tCaused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp-SNAPSHOT]]\r\n\t\tat org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n\t\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n\t\t... 37 more\r\n\tCaused by: java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.clearCache()V\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.resetCommonCaches(AbstractApplicationContext.java:915)\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:575)\r\n\t\tat com.choicehotels.bs.ecb.accountmsgadapter.travelagentadapter.web.WebAppInitializer.onStartup(WebAppInitializer.java:37)\r\n\t\tat org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n\t\t... 38 more\r\n\r\n```\r\nSo, basically, this part seems to be the issue:\r\n**Unsatisfied dependency expressed through method &#39;webClient&#39; parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available:**\r\n\r\nBut, I do see ClientHttpConnector present in the project classpath. image added\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThanks in advance!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/FvmUR.png","title":"Error &quot;No qualifying bean of type &#39;org.springframework.http.client.reactive.ClientHttpConnector&#39; available&quot; while creating WebClient bean","body":"<p>I need to use WebClient on an existing Spring project. The existing Spring version is 4. I updated the Spring version to 5 because to use WebClient, Spring 5 is required.</p>\n<p>Below are the spring dependencies in pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;3.0.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.2.4-1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;5.0.1.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webflux&lt;/artifactId&gt;\n            &lt;version&gt;5.2.15.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\n            &lt;version&gt;0.9.20.RELEASE&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><strong>added</strong> : spring-web, spring-webflux and reactor-netty.</p>\n<p>Next, I configured WebClient bean in AppConfig</p>\n<pre><code>@Bean\n  public WebClient webClient(@Value(&quot;${myservice.endpoint}&quot;) String countryServiceUrl, ClientHttpConnector connector) {\n    return WebClient.builder()\n            .baseUrl(countryServiceUrl)\n            .defaultHeader(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE)\n            .clientConnector(connector)\n            .build();\n  }\n</code></pre>\n<p>Below is the project setup:</p>\n<pre><code>public class WebAppInitializer implements WebApplicationInitializer {\nprivate AnnotationConfigWebApplicationContext applicationContext;\n@Override\n  public void onStartup(final ServletContext servletContext) throws ServletException {\n    applicationContext = new AnnotationConfigWebApplicationContext();\n    applicationContext.register(AppConfig.class);\n    applicationContext.setDisplayName(DISPLAY_NAME);\n\n    // Manage the life cycle of the root application context\n    servletContext.addListener(new ContextLoaderListener(applicationContext));\n\n    applicationContext.refresh();\n    applicationContext.registerShutdownHook();\n  }\n}\n</code></pre>\n<p>I am deploying the project to tomcat 9 in my local. Below is the error:</p>\n<pre><code>WARN  AnnotationConfigWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'createMyMessageConverter': Unsatisfied dependency expressed through field 'myMessageConverter'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'myMessageConverter': Unsatisfied dependency expressed through field ‘myServiceCaller'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘myServiceCaller': Unsatisfied dependency expressed through field ‘someDAO'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name ‘someDAOImpl': Unsatisfied dependency expressed through field 'webClient'; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webClient' defined in com.my.package.config.AppConfig: Unsatisfied dependency expressed through method 'webClient' parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.http.client.reactive.ClientHttpConnector' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n06-Oct-2023 07:37:23.262 SEVERE [main] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [/Users/abhinash.kumar/Downloads/apache-tomcat-9.0.65/webapps/myApp-SNAPSHOT.war]\n    java.lang.IllegalStateException: Error starting child\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:729)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/myApp-SNAPSHOT]]\n        at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n        ... 37 more\n    Caused by: java.lang.NoSuchMethodError: org.springframework.core.annotation.AnnotationUtils.clearCache()V\n        at org.springframework.context.support.AbstractApplicationContext.resetCommonCaches(AbstractApplicationContext.java:915)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:575)\n        at com.choicehotels.bs.ecb.accountmsgadapter.travelagentadapter.web.WebAppInitializer.onStartup(WebAppInitializer.java:37)\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:172)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5219)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        ... 38 more\n\n</code></pre>\n<p>So, basically, this part seems to be the issue:\n<strong>Unsatisfied dependency expressed through method 'webClient' parameter 1; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'org.springframework.http.client.reactive.ClientHttpConnector' available:</strong></p>\n<p>But, I do see ClientHttpConnector present in the project classpath. image added</p>\n<p><a href=\"https://i.stack.imgur.com/FvmUR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FvmUR.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"score":0,"creation_date":1667939393,"post_id":74366588,"comment_id":131286871,"body_markdown":"without the code for class B, we can never help you other than to say &quot;you are doing something wrong&quot;","body":"without the code for class B, we can never help you other than to say &quot;you are doing something wrong&quot;"},{"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"score":0,"creation_date":1667940693,"post_id":74366588,"comment_id":131287296,"body_markdown":"added a simplified version of the code","body":"added a simplified version of the code"},{"owner":{"account_id":10673275,"reputation":1351,"user_id":7857701,"display_name":"Snigdhajyoti"},"score":0,"creation_date":1696602896,"post_id":74366588,"comment_id":136178513,"body_markdown":"Getting the same problem with any class and in any test. Doesn&#39;t matter. Even simple `ObjectMapper` spy was not working","body":"Getting the same problem with any class and in any test. Doesn&#39;t matter. Even simple <code>ObjectMapper</code> spy was not working"}],"answers":[{"tags":[],"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1668028215,"creation_date":1668024622,"answer_id":74380814,"question_id":74366588,"body_markdown":"Finally able to solve it as below.\r\nMy guess about cause of the problem is implementation class &quot;InternalServiceImpl&quot; for interface &quot;InternalService&quot; could not be injected properly to unit test class (despite it is working fine when injected to a business class), so during debugging, I was not able to see execution of methods in spy object.\r\n\r\nAfter spying (without annonation) an explicitly provided implementation class, everything seems solved.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      AService  aService ;\r\n    \r\n      @InjectMocks\r\n      InternalService  internalService = Mockito.spy(InternalServiceImpl.class);\r\n    \r\n      @Mock\r\n      PanelDao panelDao;\r\n    \r\n      @Test\r\n      public void test() { \r\n        ..\r\n      }\r\n    }","title":"Mockito Spy behaves like Mock","body":"<p>Finally able to solve it as below.\nMy guess about cause of the problem is implementation class &quot;InternalServiceImpl&quot; for interface &quot;InternalService&quot; could not be injected properly to unit test class (despite it is working fine when injected to a business class), so during debugging, I was not able to see execution of methods in spy object.</p>\n<p>After spying (without annonation) an explicitly provided implementation class, everything seems solved.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  AService  aService ;\n\n  @InjectMocks\n  InternalService  internalService = Mockito.spy(InternalServiceImpl.class);\n\n  @Mock\n  PanelDao panelDao;\n\n  @Test\n  public void test() { \n    ..\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10673275,"reputation":1351,"user_id":7857701,"display_name":"Snigdhajyoti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696603478,"creation_date":1696603478,"answer_id":77245391,"question_id":74366588,"body_markdown":"Adding `mockito-inline` dependency solved the problem for -\r\n\r\n`mockito` version `4.11` on `Java 17`\r\n\r\nAlthough [this](https://stackoverflow.com/a/65997640/7857701) answer gives the idea on why to use the module; to enable advance features. But not sure on whats the issue here.","title":"Mockito Spy behaves like Mock","body":"<p>Adding <code>mockito-inline</code> dependency solved the problem for -</p>\n<p><code>mockito</code> version <code>4.11</code> on <code>Java 17</code></p>\n<p>Although <a href=\"https://stackoverflow.com/a/65997640/7857701\">this</a> answer gives the idea on why to use the module; to enable advance features. But not sure on whats the issue here.</p>\n"}],"owner":{"account_id":3280922,"reputation":225,"user_id":2761554,"accept_rate":100,"display_name":"bahadir_g"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74380814,"answer_count":2,"score":1,"last_activity_date":1696606736,"creation_date":1667938147,"question_id":74366588,"body_markdown":"Environment: Java11, AWS Lambda, Dagger, JUnit5 (5.9.1), Mockito(4.8.1) (tried both mockito core &amp; inline)\r\n\r\nI have classes A, B and C.  \r\nC is injected to B and B is injected to A.\r\nMethod A.ma1() calls B.mb1() and B.mb1 calls C.mc1()\r\n\r\nI just want to verify if a method &quot;mc1&quot; of C is called or not if I call A.ma1\r\n\r\nHere is my structure:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      A a;\r\n    \r\n      @Spy\r\n      B b;\r\n    \r\n      @Mock\r\n      C c;\r\n\r\n      @Test\r\n      public void test() { \r\n        a.ma1();\r\n        verify(c).mc1(any());\r\n      }\r\n    }\r\n\r\nThe problem is when A.ma1() calls B.mb1(),  B.mb1() behaves like a Mock instead of a Spy.\r\nThe contents of the method never being executed during debugging, but immediately returning. I also tried to annotate B with @InjectMocks along with @Spy. It also did not work, throwing a different kind of exception.\r\n\r\nDoes anybody have any idea why does B behave like a Mock instead of a Spy?\r\n\r\nAdded after comment:\r\nHere is the complete code: (simplified)\r\nAService is A, InternalService is B and PanelDao is C in the above example. B&#39;s &quot;selectMappedInternal&quot; never executes line by line but returns immediately like a mock when called.\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class Test {\r\n    \r\n      @InjectMocks\r\n      AService  aService ;\r\n    \r\n      @Spy\r\n      InternalService  internalService ;\r\n    \r\n      @Mock\r\n      PanelDao panelDao;\r\n    \r\n      @Test\r\n      public void test() { \r\n        ..\r\n      }\r\n    }\r\n\r\n    public class AService {\r\n    \r\n        @Inject\r\n        InternalService internalService;\r\n    \r\n        @Inject\r\n        public AService() {\r\n        }\r\n    \r\n        public void processMessage(AccSqsMessage accSqsMessage) {\r\n             ..\r\n             internalSet = internalService.selectMappedInternal(accSqsMessage.getCode());\r\n             ..\r\n        }\r\n    }\r\n\r\n  \r\n\r\n    public class InternalServiceImpl implements InternalService {\r\n    \r\n        @Inject\r\n        PanelDao panelDao;\r\n    \r\n        @Inject\r\n        public InternalServiceImpl() {\r\n        }\r\n    \r\n        @Override\r\n        public Set&lt;Internal&gt; selectMappedInternal(String code) {\r\n           ..\r\n           Optional&lt;Panel&gt; p = panelDao.findPanelByCode(code);\r\n           ..\r\n        }\r\n    }\r\n","title":"Mockito Spy behaves like Mock","body":"<p>Environment: Java11, AWS Lambda, Dagger, JUnit5 (5.9.1), Mockito(4.8.1) (tried both mockito core &amp; inline)</p>\n<p>I have classes A, B and C.<br />\nC is injected to B and B is injected to A.\nMethod A.ma1() calls B.mb1() and B.mb1 calls C.mc1()</p>\n<p>I just want to verify if a method &quot;mc1&quot; of C is called or not if I call A.ma1</p>\n<p>Here is my structure:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  A a;\n\n  @Spy\n  B b;\n\n  @Mock\n  C c;\n\n  @Test\n  public void test() { \n    a.ma1();\n    verify(c).mc1(any());\n  }\n}\n</code></pre>\n<p>The problem is when A.ma1() calls B.mb1(),  B.mb1() behaves like a Mock instead of a Spy.\nThe contents of the method never being executed during debugging, but immediately returning. I also tried to annotate B with @InjectMocks along with @Spy. It also did not work, throwing a different kind of exception.</p>\n<p>Does anybody have any idea why does B behave like a Mock instead of a Spy?</p>\n<p>Added after comment:\nHere is the complete code: (simplified)\nAService is A, InternalService is B and PanelDao is C in the above example. B's &quot;selectMappedInternal&quot; never executes line by line but returns immediately like a mock when called.</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass Test {\n\n  @InjectMocks\n  AService  aService ;\n\n  @Spy\n  InternalService  internalService ;\n\n  @Mock\n  PanelDao panelDao;\n\n  @Test\n  public void test() { \n    ..\n  }\n}\n\npublic class AService {\n\n    @Inject\n    InternalService internalService;\n\n    @Inject\n    public AService() {\n    }\n\n    public void processMessage(AccSqsMessage accSqsMessage) {\n         ..\n         internalSet = internalService.selectMappedInternal(accSqsMessage.getCode());\n         ..\n    }\n}\n\n\n\npublic class InternalServiceImpl implements InternalService {\n\n    @Inject\n    PanelDao panelDao;\n\n    @Inject\n    public InternalServiceImpl() {\n    }\n\n    @Override\n    public Set&lt;Internal&gt; selectMappedInternal(String code) {\n       ..\n       Optional&lt;Panel&gt; p = panelDao.findPanelByCode(code);\n       ..\n    }\n}\n</code></pre>\n"},{"tags":["java","utf-8","file-io","character-encoding","filenames"],"comments":[{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609026,"post_id":77245754,"comment_id":136179712,"body_markdown":"I am using the value returned by the path object and directly performing a stat on it, that fails as well so there is no involvement of my console in that. Furthermore when you take the bytes i shared and create the file using your console it will encode it with the encoding of your console (which seems to be utf8)","body":"I am using the value returned by the path object and directly performing a stat on it, that fails as well so there is no involvement of my console in that. Furthermore when you take the bytes i shared and create the file using your console it will encode it with the encoding of your console (which seems to be utf8)"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609078,"post_id":77245754,"comment_id":136179722,"body_markdown":"its more about reading the filename from directory and then being able to perform stat on that file using java","body":"its more about reading the filename from directory and then being able to perform stat on that file using java"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609646,"post_id":77245754,"comment_id":136179839,"body_markdown":"https://man7.org/linux/man-pages/man2/stat.2.html\nThis is what I mean by stat","body":"<a href=\"https://man7.org/linux/man-pages/man2/stat.2.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man2/stat.2.html</a> This is what I mean by stat"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609725,"post_id":77245754,"comment_id":136179851,"body_markdown":"Also, I have ensured that those file names print correctly when I print them on my terminal using ISO-8859-1 encoding","body":"Also, I have ensured that those file names print correctly when I print them on my terminal using ISO-8859-1 encoding"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609828,"post_id":77245754,"comment_id":136179873,"body_markdown":"For exampl, in my linux if I convert these filenames from ISO-8859-1 to utf-8\nI am able to do that, using below command\n# ls &gt; output\n# iconv -f ISO-8859-1 -t UTF8 output\n\nsame command fails when i try to read it as UTF-8","body":"For exampl, in my linux if I convert these filenames from ISO-8859-1 to utf-8 I am able to do that, using below command # ls &gt; output # iconv -f ISO-8859-1 -t UTF8 output  same command fails when i try to read it as UTF-8"},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696609924,"post_id":77245754,"comment_id":136179897,"body_markdown":"Hence, I concluded that these java APIs only expect UTF8 when we try to read these filenames. The character are not incorrect in the filename, above command proves that for me","body":"Hence, I concluded that these java APIs only expect UTF8 when we try to read these filenames. The character are not incorrect in the filename, above command proves that for me"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1696633874,"post_id":77245754,"comment_id":136183180,"body_markdown":"Does this answer your question? [Java Can&#39;t Open a File with Surrogate Unicode Values in the Filename?](https://stackoverflow.com/questions/1545625/java-cant-open-a-file-with-surrogate-unicode-values-in-the-filename)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/1545625/java-cant-open-a-file-with-surrogate-unicode-values-in-the-filename\">Java Can&#39;t Open a File with Surrogate Unicode Values in the Filename?</a>"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":0,"creation_date":1696748772,"post_id":77245754,"comment_id":136191346,"body_markdown":"@TimMoore Your proposed duplicate specifically relates to surrogate pairs, but this question is more general. Also, that question was raised in 2009, has not received any answers since 2014, and has no accepted answer. If you think this question is a duplicate of that one, can you explain _how_ it resolves the OP&#39;s problem, because I don&#39;t see it. A question that simply looks somewhat similar to an existing one is not sufficient grounds to close vote.","body":"@TimMoore Your proposed duplicate specifically relates to surrogate pairs, but this question is more general. Also, that question was raised in 2009, has not received any answers since 2014, and has no accepted answer. If you think this question is a duplicate of that one, can you explain <i>how</i> it resolves the OP&#39;s problem, because I don&#39;t see it. A question that simply looks somewhat similar to an existing one is not sufficient grounds to close vote."},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1696765607,"post_id":77245754,"comment_id":136192760,"body_markdown":"Could you put the code which fails in the question, and details of the file and platform encoding? Just having System.out printing something odd isn&#39;t proof the character of filename is corrupt, whereas if `Files.readAllBytes(entry)` fails then there is an issue.","body":"Could you put the code which fails in the question, and details of the file and platform encoding? Just having System.out printing something odd isn&#39;t proof the character of filename is corrupt, whereas if <code>Files.readAllBytes(entry)</code> fails then there is an issue."},{"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"score":0,"creation_date":1696827746,"post_id":77245754,"comment_id":136197810,"body_markdown":"@DuncG the path object that I create, that itself has &quot;?&quot; in it. from iconv, i was able to figure out that the filename has &quot;ISO-8859-1&quot; encoding and my system is on utf8. Tried changing the local to the same but still failed. can you more info on how can I check with readAllBytes(). Accorsing to iconv it is a valid filename","body":"@DuncG the path object that I create, that itself has &quot;?&quot; in it. from iconv, i was able to figure out that the filename has &quot;ISO-8859-1&quot; encoding and my system is on utf8. Tried changing the local to the same but still failed. can you more info on how can I check with readAllBytes(). Accorsing to iconv it is a valid filename"},{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1696924948,"post_id":77245754,"comment_id":136211481,"body_markdown":"The code you have shown does not contain the Java code which fails - you mention ls and stat which isn&#39;t NIO call to read a file. You ought to check the characters of filename are as expected (not by System.out). The question lacks detail which would help you get an answer.","body":"The code you have shown does not contain the Java code which fails - you mention ls and stat which isn&#39;t NIO call to read a file. You ought to check the characters of filename are as expected (not by System.out). The question lacks detail which would help you get an answer."}],"owner":{"account_id":9081161,"reputation":59,"user_id":6760959,"display_name":"Rk1659"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":0,"score":1,"last_activity_date":1696606602,"creation_date":1696606602,"question_id":77245754,"body_markdown":"I have a list of files within a directory and those filenames have non-utf8 characters in their name. When I use java NIO library to read those filenames from the directory and list the files, it fails to read the correct name. The path object that will be created from iterating DirectoryStream will replace all the non-UTF8 characters with `\\357\\277\\275` which corresponds to &quot;?&quot;. Is there a way I can read these filenames correctly using java so I can use the list of filenames within a given directory and perform stat on each file in a given directory.\r\n\r\nI have written a sample piece of java code which uses NIO library and tries to list down all the entities within the directory. Below is my code:\r\n\r\n```\r\npublic class FileIteration {\r\n    public static void main(String[] args) {\r\n\r\n\t    Scanner scanner = new Scanner(System.in);\r\n        System.out.print(&quot;Enter the directory path: &quot;);\r\n        String directoryPathStr = scanner.nextLine();\r\n\r\n        Path directoryPath = Paths.get(directoryPathStr);\r\n\r\n        try (DirectoryStream&lt;Path&gt; directoryStream = Files.newDirectoryStream(directoryPath)) {\r\n            Iterator&lt;Path&gt; iterator = directoryStream.iterator();\r\n            while (iterator.hasNext()) {\r\n                Path entry = iterator.next();\r\n\t\t        String fileName = entry.getFileName().toString();\r\n\r\n\t\t    //String decodedFileName = new String(fileName.getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);\r\n                System.out.println(&quot;File: &quot; + fileName);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\nHere is the an example filename with bytes `8000124463972718\\314H2\\376\\=M\\3230U\\317\\313S\\=`\r\nit is supposed to be printed and read as \r\n`8000124463972718&#204;H2&#254;=M&#211;0U&#207;&#203;S=`\r\nbut instead I am getting \r\n`8000124463972718?H2?=M?0U??S=` in my path object, which in bytes you can replace each &quot;?&quot; with `\\357\\277\\275`\r\n\r\nI had also tried different APIs, same issue was observed with them as well, for example I also tried:\r\n```\r\npublic static void printPathsUsingFileWalk(String dir, int depth) throws IOException {\r\n        try (Stream&lt;Path&gt; stream = Files.walk(Paths.get(dir), depth)) {\r\n            stream.forEach(path -&gt; System.out.println(&quot;File name (using stream)&quot;+path));\r\n        }\r\n    }\r\n```\r\nThis fails as well.\r\n\r\nEncoding of the filenames seems to be ISO-8859-1 and these java APIs seems to be expecting them to be UTF8.\r\nJust in case to make sure I get across my question clearly, the issue is not reading the content of the file, but the filename from the directory. Since I get wrong characters when I try to list down files, I am missing to perform stat on some of the files.\r\n","title":"Unable to read non-UTF8 bytes in the filename using java, causing failure in stat of file","body":"<p>I have a list of files within a directory and those filenames have non-utf8 characters in their name. When I use java NIO library to read those filenames from the directory and list the files, it fails to read the correct name. The path object that will be created from iterating DirectoryStream will replace all the non-UTF8 characters with <code>\\357\\277\\275</code> which corresponds to &quot;?&quot;. Is there a way I can read these filenames correctly using java so I can use the list of filenames within a given directory and perform stat on each file in a given directory.</p>\n<p>I have written a sample piece of java code which uses NIO library and tries to list down all the entities within the directory. Below is my code:</p>\n<pre><code>public class FileIteration {\n    public static void main(String[] args) {\n\n        Scanner scanner = new Scanner(System.in);\n        System.out.print(&quot;Enter the directory path: &quot;);\n        String directoryPathStr = scanner.nextLine();\n\n        Path directoryPath = Paths.get(directoryPathStr);\n\n        try (DirectoryStream&lt;Path&gt; directoryStream = Files.newDirectoryStream(directoryPath)) {\n            Iterator&lt;Path&gt; iterator = directoryStream.iterator();\n            while (iterator.hasNext()) {\n                Path entry = iterator.next();\n                String fileName = entry.getFileName().toString();\n\n            //String decodedFileName = new String(fileName.getBytes(StandardCharsets.UTF_8), StandardCharsets.UTF_8);\n                System.out.println(&quot;File: &quot; + fileName);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>Here is the an example filename with bytes <code>8000124463972718\\314H2\\376\\=M\\3230U\\317\\313S\\=</code>\nit is supposed to be printed and read as\n<code>8000124463972718ÌH2þ=MÓ0UÏËS=</code>\nbut instead I am getting\n<code>8000124463972718?H2?=M?0U??S=</code> in my path object, which in bytes you can replace each &quot;?&quot; with <code>\\357\\277\\275</code></p>\n<p>I had also tried different APIs, same issue was observed with them as well, for example I also tried:</p>\n<pre><code>public static void printPathsUsingFileWalk(String dir, int depth) throws IOException {\n        try (Stream&lt;Path&gt; stream = Files.walk(Paths.get(dir), depth)) {\n            stream.forEach(path -&gt; System.out.println(&quot;File name (using stream)&quot;+path));\n        }\n    }\n</code></pre>\n<p>This fails as well.</p>\n<p>Encoding of the filenames seems to be ISO-8859-1 and these java APIs seems to be expecting them to be UTF8.\nJust in case to make sure I get across my question clearly, the issue is not reading the content of the file, but the filename from the directory. Since I get wrong characters when I try to list down files, I am missing to perform stat on some of the files.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":2,"creation_date":1696588313,"post_id":77243101,"comment_id":136175504,"body_markdown":"Which library are you using? There are many third-party libraries supporting the javax.usb specification. You should specify the library and exact version number (e.g. the Github URL or the Maven coordinates of the library).","body":"Which library are you using? There are many third-party libraries supporting the javax.usb specification. You should specify the library and exact version number (e.g. the Github URL or the Maven coordinates of the library)."},{"owner":{"account_id":27201203,"reputation":45,"user_id":20733431,"display_name":"amirmohammad firouzfar"},"score":0,"creation_date":1696620047,"post_id":77243101,"comment_id":136181557,"body_markdown":"@k314159 this is where i downloaded it from. I can&#39;t remember the exact site. http://www.java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip","body":"@k314159 this is where i downloaded it from. I can&#39;t remember the exact site. <a href=\"http://www.java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip\" rel=\"nofollow noreferrer\">java2s.com/Code/JarDownload/javax.usb/javax.usb.jar.zip</a>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1696840557,"post_id":77243101,"comment_id":136199546,"body_markdown":"It looks like you are omitting to set up the properties. You will need to check the documentation for that, but the jar file in this link contains only compiled class files, so finding documentation will be difficult.","body":"It looks like you are omitting to set up the properties. You will need to check the documentation for that, but the jar file in this link contains only compiled class files, so finding documentation will be difficult."}],"owner":{"account_id":27201203,"reputation":45,"user_id":20733431,"display_name":"amirmohammad firouzfar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696606405,"creation_date":1696582452,"question_id":77243101,"body_markdown":"I&#39;m trying to use the javax.usb library. \r\n```java\r\nimport javax.usb.*;\r\n\r\npublic class PrinterCheck {\r\n    public static void main(String[] args) {\r\n\r\n        try {\r\n            UsbServices usbServices = UsbHostManager.getUsbServices();\r\n        } catch (UsbException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI wrote this simple code, but when I run it, I get this error:\r\n```none\r\n/usr/lib/jvm/java-1.17.0-openjdk-amd64/bin/java -javaagent:/snap/intellij-idea-community/456/lib/idea_rt.jar=42049:/snap/intellij-idea-community/456/bin -Dfile.encoding=UTF-8 -classpath /home/amiroof/Projects/Cinema/out/production/Cinema:/home/amiroof/Projects/Cinema/lib/mysql-connector-j-8.1.0.jar:/home/amiroof/Projects/Cinema/lib/javax.usb.jar PrinterCheck\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Properties.getProperty(String)&quot; because &quot;properties&quot; is null\r\n\tat javax.usb.UsbHostManager.getServicesName(UsbHostManager.java:96)\r\n\tat javax.usb.UsbHostManager.initialize(UsbHostManager.java:32)\r\n\tat javax.usb.UsbHostManager.getUsbServices(UsbHostManager.java:24)\r\n\tat PrinterCheck.main(PrinterCheck.java:9)\r\n\r\nProcess finished with exit code 1\r\n```\r\nI tried reinstalling the library, but that didn&#39;t worked. I&#39;m new to Java, so if I&#39;m missing something obvious, please let me know.","title":"javax.usb UsbHostManager.getUsbService() properties is null","body":"<p>I'm trying to use the javax.usb library.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.usb.*;\n\npublic class PrinterCheck {\n    public static void main(String[] args) {\n\n        try {\n            UsbServices usbServices = UsbHostManager.getUsbServices();\n        } catch (UsbException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>I wrote this simple code, but when I run it, I get this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>/usr/lib/jvm/java-1.17.0-openjdk-amd64/bin/java -javaagent:/snap/intellij-idea-community/456/lib/idea_rt.jar=42049:/snap/intellij-idea-community/456/bin -Dfile.encoding=UTF-8 -classpath /home/amiroof/Projects/Cinema/out/production/Cinema:/home/amiroof/Projects/Cinema/lib/mysql-connector-j-8.1.0.jar:/home/amiroof/Projects/Cinema/lib/javax.usb.jar PrinterCheck\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;java.util.Properties.getProperty(String)&quot; because &quot;properties&quot; is null\n    at javax.usb.UsbHostManager.getServicesName(UsbHostManager.java:96)\n    at javax.usb.UsbHostManager.initialize(UsbHostManager.java:32)\n    at javax.usb.UsbHostManager.getUsbServices(UsbHostManager.java:24)\n    at PrinterCheck.main(PrinterCheck.java:9)\n\nProcess finished with exit code 1\n</code></pre>\n<p>I tried reinstalling the library, but that didn't worked. I'm new to Java, so if I'm missing something obvious, please let me know.</p>\n"},{"tags":["java","google-chrome","selenium-webdriver","selenium-chromedriver","selenium-java"],"comments":[{"owner":{"account_id":16840055,"reputation":300,"user_id":12175652,"display_name":"Rolandas Ulevicius"},"score":0,"creation_date":1678690214,"post_id":75718422,"comment_id":133575374,"body_markdown":"what issue? what problem?","body":"what issue? what problem?"}],"answers":[{"tags":[],"owner":{"account_id":27938804,"reputation":102,"user_id":21335232,"display_name":"Bhairu"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678711251,"creation_date":1678698037,"answer_id":75719759,"question_id":75718422,"body_markdown":"```\r\nChromeOptions options=new ChromeOptions();    \r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);    \r\n//Launching the browser\r\ndriver=new ChromeDriver(options);\r\n```\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<pre><code>ChromeOptions options=new ChromeOptions();    \noptions.addArguments(&quot;--remote-allow-origins=*&quot;);    \n//Launching the browser\ndriver=new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28003016,"reputation":173,"user_id":21386874,"display_name":"JBM"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1679138165,"creation_date":1678711457,"answer_id":75722029,"question_id":75718422,"body_markdown":"I followed the below answer: https://stackoverflow.com/a/75703971/21386874\r\n```\r\noptions.addArguments(&quot;--remote-allow-origins=*&quot;); \r\n```\r\nI tried but it is not working. \r\nIn my project, I got the below error.  \r\n                                                                                                                Error:\r\n&gt; org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\r\nBuild info: version: &#39;4.5.3&#39;, revision: &#39;4b786a1e430&#39;\r\n\r\nAns: \r\n\r\nI downloaded the newest chromedriver.exe with the 111.0.5563.64 version. \r\nAlso, I added one more dependency:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n      &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n      &lt;version&gt;4.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAnd added this code line at the first line into the `@BeforeTest` method:\r\n\r\n```\r\nSystem.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n```","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I followed the below answer: <a href=\"https://stackoverflow.com/a/75703971/21386874\">https://stackoverflow.com/a/75703971/21386874</a></p>\n<pre><code>options.addArguments(&quot;--remote-allow-origins=*&quot;); \n</code></pre>\n<p>I tried but it is not working.\nIn my project, I got the below error.<br />\nError:</p>\n<blockquote>\n<p>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\nBuild info: version: '4.5.3', revision: '4b786a1e430'</p>\n</blockquote>\n<p>Ans:</p>\n<p>I downloaded the newest chromedriver.exe with the 111.0.5563.64 version.\nAlso, I added one more dependency:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And added this code line at the first line into the <code>@BeforeTest</code> method:</p>\n<pre><code>System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1679010632,"creation_date":1678866163,"answer_id":75741758,"question_id":75718422,"body_markdown":"Using [tag:google-chrome] _**v111.0**_ this error message...\r\n\r\n\torg.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\r\n\r\nand this error message...\r\n\r\n    2023-03-08T21:06:50.3319163Z WARNING: Invalid Status code=403 text=Forbidden\r\n    2023-03-08T21:06:50.3320374Z java.io.IOException: Invalid Status code=403 text=Forbidden\r\n\r\nand even this error message...\r\n\r\n    java.lang.NullPointerException: Cannot invoke &quot;org.asynchttpclient.ws.WebSocket.sendCloseFrame(int, String)&quot; because &quot;this.socket&quot; is null\r\n\r\n...is the result of _`devtools_http_handler`_ rejecting an incoming WebSocket connection from the http://localhost origin.\r\n\r\n\r\n----------\r\n\r\n\r\nDetails\r\n-------\r\nThis issue is the result of _`Origin`_ header when set is being auto-resolved into meaningless value in **Netty 4.x** currently being used by Selenium. This issue was discussed in details in [Origin header is always sent from WebSocket client](https://github.com/netty/netty/issues/9673) and was addressed through [Fix generating the Origin header value for websocket handshake request](https://github.com/netty/netty/pull/12941).\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nAs per the [_Selenium Blog_](https://www.selenium.dev/blog/2022/using-java11-httpclient/) there are a couple of approaches to solve this issue.\r\n\r\n- _**Using**_ [tag:java-11] _**HTTP Client in Selenium**_: Selenium uses an HTTP client and associated WebSocket client for multiple purposes. [AsyncHttpClient](https://github.com/AsyncHttpClient/async-http-client) is an open-source library built on top of Netty. It allows the execution of HTTP requests and responses asynchronously. Additionally it also provides WebSocket support.But _AsyncHttpClient_ is no more maintained since June 2021 as _Java 11+_ provides a built-in HTTP and WebSocket client. Selenium can utilize it to replace AsyncHttpClient.\r\n\r\n  - _Prerequisites_:\r\n  \r\n\t    Project configured to use Java 11+\r\n\t    Using Selenium 4.5.0 as a minumum version\r\n\r\n  - _Integrating the Java 11+ client_: As Java 11+ HTTP client sits in its own artifact it can be imported into your project that use Java 11+ as follows:\r\n  \r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.5.0&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t      &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n\t      &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\r\n\t      &lt;version&gt;4.5.0&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t    \r\n  - _Setting the system property_: You need to set the system property to indicate that Java 11+ Http client needs to be used. By default, it uses the _AsyncHttpClient_:\r\n  \r\n\t    System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\r\n  \r\n- _**Using**_ [tag:java-8] _**in Selenium**_: As the ChromeDriver [verbose log](https://groups.google.com/g/chromedriver-users/c/xL5-13_qGaA/m/cGk_5MvTAAAJ) suggests:\r\n\r\n\t  [32332:259:0214/190812.204658:ERROR:devtools_http_handler.cc(766)] Rejected an incoming WebSocket connection from the http://localhost:58642 origin. Use the command line flag --remote-allow-origins=http://localhost:58642 to allow connections from this origin or --remote-allow-origins=* to allow all origins.\r\n\t\r\nA quick fix to this issue would be to add the argument _`--remote-allow-origins=*`_ as follows:\r\n\r\n- _Java_:\r\n\r\n\t  ChromeOptions options = new ChromeOptions();\r\n\t  options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n\t  WebDriver driver = new ChromeDriver(options);\r\n\r\n\r\n----------\r\n\r\n\r\nReferences\r\n----------\r\nLinks to useful references:\r\n\r\n- [Chrome 111 is not compatible with default HTTP Client](https://github.com/SeleniumHQ/selenium/issues/11750)\r\n- [Issue 1422444: Selenium Chromedriver no longer works with Chrome 111 update](https://bugs.chromium.org/p/chromium/issues/detail?id=1422444)\r\n- [DevTools: reject debugging web socket connections with a defined Origin header](https://chromiumdash.appspot.com/commit/0154caeefc74530d5cb57ce71608beb1b77bca39)\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>Using <a href=\"/questions/tagged/google-chrome\" class=\"post-tag\" title=\"show questions tagged &#39;google-chrome&#39;\" aria-label=\"show questions tagged &#39;google-chrome&#39;\" rel=\"tag\" aria-labelledby=\"tag-google-chrome-tooltip-container\">google-chrome</a> <em><strong>v111.0</strong></em> this error message...</p>\n<pre><code>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection to http://localhost:49877/devtools/browser/3a3af47d-732a-4337-a91c-18c8ced545cd\n</code></pre>\n<p>and this error message...</p>\n<pre><code>2023-03-08T21:06:50.3319163Z WARNING: Invalid Status code=403 text=Forbidden\n2023-03-08T21:06:50.3320374Z java.io.IOException: Invalid Status code=403 text=Forbidden\n</code></pre>\n<p>and even this error message...</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;org.asynchttpclient.ws.WebSocket.sendCloseFrame(int, String)&quot; because &quot;this.socket&quot; is null\n</code></pre>\n<p>...is the result of <em><code>devtools_http_handler</code></em> rejecting an incoming WebSocket connection from the http://localhost origin.</p>\n<hr />\n<h2>Details</h2>\n<p>This issue is the result of <em><code>Origin</code></em> header when set is being auto-resolved into meaningless value in <strong>Netty 4.x</strong> currently being used by Selenium. This issue was discussed in details in <a href=\"https://github.com/netty/netty/issues/9673\" rel=\"noreferrer\">Origin header is always sent from WebSocket client</a> and was addressed through <a href=\"https://github.com/netty/netty/pull/12941\" rel=\"noreferrer\">Fix generating the Origin header value for websocket handshake request</a>.</p>\n<hr />\n<h2>Solution</h2>\n<p>As per the <a href=\"https://www.selenium.dev/blog/2022/using-java11-httpclient/\" rel=\"noreferrer\"><em>Selenium Blog</em></a> there are a couple of approaches to solve this issue.</p>\n<ul>\n<li><p><em><strong>Using</strong></em> <a href=\"/questions/tagged/java-11\" class=\"post-tag\" title=\"show questions tagged &#39;java-11&#39;\" aria-label=\"show questions tagged &#39;java-11&#39;\" rel=\"tag\" aria-labelledby=\"tag-java-11-tooltip-container\">java-11</a> <em><strong>HTTP Client in Selenium</strong></em>: Selenium uses an HTTP client and associated WebSocket client for multiple purposes. <a href=\"https://github.com/AsyncHttpClient/async-http-client\" rel=\"noreferrer\">AsyncHttpClient</a> is an open-source library built on top of Netty. It allows the execution of HTTP requests and responses asynchronously. Additionally it also provides WebSocket support.But <em>AsyncHttpClient</em> is no more maintained since June 2021 as <em>Java 11+</em> provides a built-in HTTP and WebSocket client. Selenium can utilize it to replace AsyncHttpClient.</p>\n<ul>\n<li><p><em>Prerequisites</em>:</p>\n<pre><code>Project configured to use Java 11+\nUsing Selenium 4.5.0 as a minumum version\n</code></pre>\n</li>\n<li><p><em>Integrating the Java 11+ client</em>: As Java 11+ HTTP client sits in its own artifact it can be imported into your project that use Java 11+ as follows:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n  &lt;artifactId&gt;selenium-http-jdk-client&lt;/artifactId&gt;\n  &lt;version&gt;4.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p><em>Setting the system property</em>: You need to set the system property to indicate that Java 11+ Http client needs to be used. By default, it uses the <em>AsyncHttpClient</em>:</p>\n<pre><code>System.setProperty(&quot;webdriver.http.factory&quot;, &quot;jdk-http-client&quot;);\n</code></pre>\n</li>\n</ul>\n</li>\n<li><p><em><strong>Using</strong></em> <a href=\"/questions/tagged/java-8\" class=\"post-tag\" title=\"show questions tagged &#39;java-8&#39;\" aria-label=\"show questions tagged &#39;java-8&#39;\" rel=\"tag\" aria-labelledby=\"tag-java-8-tooltip-container\">java-8</a> <em><strong>in Selenium</strong></em>: As the ChromeDriver <a href=\"https://groups.google.com/g/chromedriver-users/c/xL5-13_qGaA/m/cGk_5MvTAAAJ\" rel=\"noreferrer\">verbose log</a> suggests:</p>\n<pre><code>[32332:259:0214/190812.204658:ERROR:devtools_http_handler.cc(766)] Rejected an incoming WebSocket connection from the http://localhost:58642 origin. Use the command line flag --remote-allow-origins=http://localhost:58642 to allow connections from this origin or --remote-allow-origins=* to allow all origins.\n</code></pre>\n</li>\n</ul>\n<p>A quick fix to this issue would be to add the argument <em><code>--remote-allow-origins=*</code></em> as follows:</p>\n<ul>\n<li><p><em>Java</em>:</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n</li>\n</ul>\n<hr />\n<h2>References</h2>\n<p>Links to useful references:</p>\n<ul>\n<li><a href=\"https://github.com/SeleniumHQ/selenium/issues/11750\" rel=\"noreferrer\">Chrome 111 is not compatible with default HTTP Client</a></li>\n<li><a href=\"https://bugs.chromium.org/p/chromium/issues/detail?id=1422444\" rel=\"noreferrer\">Issue 1422444: Selenium Chromedriver no longer works with Chrome 111 update</a></li>\n<li><a href=\"https://chromiumdash.appspot.com/commit/0154caeefc74530d5cb57ce71608beb1b77bca39\" rel=\"noreferrer\">DevTools: reject debugging web socket connections with a defined Origin header</a></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":28032984,"reputation":1,"user_id":21411865,"display_name":"Nitee Asswani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679318423,"creation_date":1679318423,"answer_id":75790792,"question_id":75718422,"body_markdown":"I was facing the same error for different versions and this got resolved for me. The problem might be with the java, selenium and testNG versions compatibility. You can try with java 11 , selenium version as 4.5 or above and testNG version as 7.5","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I was facing the same error for different versions and this got resolved for me. The problem might be with the java, selenium and testNG versions compatibility. You can try with java 11 , selenium version as 4.5 or above and testNG version as 7.5</p>\n"},{"tags":[],"owner":{"account_id":28119334,"reputation":21,"user_id":21485818,"display_name":"B.Harish Kumar"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1679715207,"creation_date":1679715207,"answer_id":75839523,"question_id":75718422,"body_markdown":"I downloaded chromedriver_win32.zip for ChromeDriver 111.0.5563.64 version &amp; on workspace I added below code.\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(options);\r\nAfter this issue resolved","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I downloaded chromedriver_win32.zip for ChromeDriver 111.0.5563.64 version &amp; on workspace I added below code.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n<p>After this issue resolved</p>\n"},{"tags":[],"owner":{"account_id":28769474,"reputation":31,"user_id":22033549,"display_name":"avinash pottipadu"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686111940,"creation_date":1686111940,"answer_id":76419892,"question_id":75718422,"body_markdown":"I faced same issue and found solutions. I added below code then program worked perfectly.\r\n\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n    WebDriver driver = new ChromeDriver(options);\r\n\r\n","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I faced same issue and found solutions. I added below code then program worked perfectly.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7689584,"reputation":835,"user_id":8916210,"display_name":"Viktor Ilienko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696606122,"creation_date":1696606122,"answer_id":77245693,"question_id":75718422,"body_markdown":"In Chrome 117 there is an issue, that could be solved by adding a dependency:\r\n\r\n``` \r\n&lt;dependency&gt;\r\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\r\n            &lt;version&gt;4.8.2&lt;/version&gt;\r\n&lt;/dependency&gt;","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>In Chrome 117 there is an issue, that could be solved by adding a dependency:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;4.8.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":28003016,"reputation":173,"user_id":21386874,"display_name":"JBM"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18933,"favorite_count":0,"down_vote_count":1,"up_vote_count":8,"accepted_answer_id":75722029,"answer_count":7,"score":7,"last_activity_date":1696606122,"creation_date":1678686717,"question_id":75718422,"body_markdown":"I tried to invoke the website using Selenium and Chrome browser v111.\r\n\r\nThe browser is opening but the website is not invoking.\r\nIt is working properly but after updating chrome &quot;Version 111.0.5563.65 (Official Build) (64-bit)&quot; I&#39;m getting this problem:\r\n\r\n    org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection\r\n\r\nI tried,\r\nEclipse IDE for Enterprise Java Developers (includes Incubating components)\r\nVersion: 2020-12 (4.18.0)\r\nBuild id: 20201210-1552.\r\n\r\nThis is the code:\r\n\r\n     package com.testng.library_Files;\r\n    \r\n     import org.openqa.selenium.WebDriver;\r\n     import org.openqa.selenium.chrome.ChromeDriver;\r\n     import org.openqa.selenium.chrome.ChromeOptions;\r\n     import org.testng.annotations.Test;\r\n    \r\n     public class one {\r\n         WebDriver driver=null;\r\n\r\n         @Test(priority = 1)\r\n         public void DoSetup()\r\n         {\r\n             //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;./src/main/java/drivers/chromedriver.exe&quot;);\r\n    \t     ChromeOptions options= new ChromeOptions(); \r\n    \t     options.setHeadless(true);\r\n             //driver= new ChromeDriver(options);\r\n             driver= new ChromeDriver();\r\n         }\r\n\r\n         @Test(priority = 2)\r\n         public void LaunchURL()\r\n         {\r\n             driver.get(&quot;https://www.google.com&quot;);\r\n         }\r\n     }\r\n\r\nPlease help me to solve this issue.","title":"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111","body":"<p>I tried to invoke the website using Selenium and Chrome browser v111.</p>\n<p>The browser is opening but the website is not invoking.\nIt is working properly but after updating chrome &quot;Version 111.0.5563.65 (Official Build) (64-bit)&quot; I'm getting this problem:</p>\n<pre><code>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection\n</code></pre>\n<p>I tried,\nEclipse IDE for Enterprise Java Developers (includes Incubating components)\nVersion: 2020-12 (4.18.0)\nBuild id: 20201210-1552.</p>\n<p>This is the code:</p>\n<pre><code> package com.testng.library_Files;\n\n import org.openqa.selenium.WebDriver;\n import org.openqa.selenium.chrome.ChromeDriver;\n import org.openqa.selenium.chrome.ChromeOptions;\n import org.testng.annotations.Test;\n\n public class one {\n     WebDriver driver=null;\n\n     @Test(priority = 1)\n     public void DoSetup()\n     {\n         //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;./src/main/java/drivers/chromedriver.exe&quot;);\n         ChromeOptions options= new ChromeOptions(); \n         options.setHeadless(true);\n         //driver= new ChromeDriver(options);\n         driver= new ChromeDriver();\n     }\n\n     @Test(priority = 2)\n     public void LaunchURL()\n     {\n         driver.get(&quot;https://www.google.com&quot;);\n     }\n }\n</code></pre>\n<p>Please help me to solve this issue.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696592060,"creation_date":1696592060,"answer_id":77244100,"question_id":77244050,"body_markdown":"In cases where the client exceeds the file size limit, it might choose to terminate the connection without waiting for a response, which is why your custom error message isn&#39;t reaching the client. Rather than closing the connection immediately, your client should be designed to process this status code as a valid server response.\r\n\r\nYou should modify your client application&#39;s code (e.g., a web browser, a mobile app, or any software making HTTP requests to your Spring Boot server) to handle the HTTP 413 Payload Too Large status code as returned by your Spring Boot server when the file size limit is exceeded.\r\n\r\nIf you need more help on that, please make sure to provide the client side code aswell.\r\n","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>In cases where the client exceeds the file size limit, it might choose to terminate the connection without waiting for a response, which is why your custom error message isn't reaching the client. Rather than closing the connection immediately, your client should be designed to process this status code as a valid server response.</p>\n<p>You should modify your client application's code (e.g., a web browser, a mobile app, or any software making HTTP requests to your Spring Boot server) to handle the HTTP 413 Payload Too Large status code as returned by your Spring Boot server when the file size limit is exceeded.</p>\n<p>If you need more help on that, please make sure to provide the client side code aswell.</p>\n"},{"tags":[],"owner":{"account_id":9427779,"reputation":336,"user_id":7012221,"display_name":"Abhishek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696595213,"creation_date":1696595213,"answer_id":77244426,"question_id":77244050,"body_markdown":"had similar issue and in our case the issue was with scanBasePackages. Due to configuration issue, the Application was not able to locate the ControllerAdvice class and as a result it wrote only log entry and thrown the original error.\r\n\r\nAfter correcting the scanBasePackages, the application was able to locate the  ControllerAdvice class ans thrown custome error message. ","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>had similar issue and in our case the issue was with scanBasePackages. Due to configuration issue, the Application was not able to locate the ControllerAdvice class and as a result it wrote only log entry and thrown the original error.</p>\n<p>After correcting the scanBasePackages, the application was able to locate the  ControllerAdvice class ans thrown custome error message.</p>\n"}],"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696605988,"creation_date":1696591395,"question_id":77244050,"body_markdown":"I have a Spring Boot application (running with Spring Boot v3.0.5, Spring v6.0.7) where I want to limit the size of file uploads and return a custom error message when the limit is exceeded. I have set the maximum file size in my application.properties file:\r\n\r\n    spring.servlet.multipart.max-file-size=1MB\r\n    spring.servlet.multipart.max-request-size=1MB\r\n\r\nAnd I have created a @ControllerAdvice class to handle MaxUploadSizeExceededException and return a custom error message:\r\n\r\n```java\r\n@ControllerAdvice\r\npublic class FileUploadExceptionAdvice {\r\n\r\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\r\n    public ResponseEntity&lt;String&gt; handleMaxUploadSizeExceededException(MaxUploadSizeExceededException exc) {\r\n        return ResponseEntity\r\n                .status(HttpStatus.PAYLOAD_TOO_LARGE)\r\n                .body(&quot;File upload failed: File too large!&quot;);\r\n    }\r\n}\r\n``` \r\n\r\nHowever, when I test the file upload with a file that exceeds the size limit, the client receives a &quot;Connection reset by peer&quot; error instead of my custom error message, although the MaxUploadSizeExceededException is correctly logged in the console.\r\n\r\nHow can I ensure that my custom error message is returned to the client when the file size limit is exceeded?\r\n\r\n","title":"How to return a custom error message for MaxUploadSizeExceededException?","body":"<p>I have a Spring Boot application (running with Spring Boot v3.0.5, Spring v6.0.7) where I want to limit the size of file uploads and return a custom error message when the limit is exceeded. I have set the maximum file size in my application.properties file:</p>\n<pre><code>spring.servlet.multipart.max-file-size=1MB\nspring.servlet.multipart.max-request-size=1MB\n</code></pre>\n<p>And I have created a @ControllerAdvice class to handle MaxUploadSizeExceededException and return a custom error message:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ControllerAdvice\npublic class FileUploadExceptionAdvice {\n\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\n    public ResponseEntity&lt;String&gt; handleMaxUploadSizeExceededException(MaxUploadSizeExceededException exc) {\n        return ResponseEntity\n                .status(HttpStatus.PAYLOAD_TOO_LARGE)\n                .body(&quot;File upload failed: File too large!&quot;);\n    }\n}\n</code></pre>\n<p>However, when I test the file upload with a file that exceeds the size limit, the client receives a &quot;Connection reset by peer&quot; error instead of my custom error message, although the MaxUploadSizeExceededException is correctly logged in the console.</p>\n<p>How can I ensure that my custom error message is returned to the client when the file size limit is exceeded?</p>\n"},{"tags":["java","opencv","geometry"],"answers":[{"tags":[],"owner":{"account_id":3072614,"reputation":12296,"user_id":2602877,"display_name":"Christoph Rackwitz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696601327,"creation_date":1696599141,"answer_id":77244895,"question_id":77244343,"body_markdown":"The *reason* for the differing results would take some archaeology to find. OpenCV 3.2 is quite old. A lot of OpenCV&#39;s internals may have been improved since then. I don&#39;t think the docs specify the range of angles or relationship between width and height. It would have been acceptable for someone to change the implementation details.\r\n\r\nDismissing differences beginning in the third or fourth decimal, those two representations are ***equivalent*** though:\r\n\r\n```\r\n{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\r\n{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\r\n\r\n```\r\n\r\n`(-0.5055) % 90 = 89.4945`\r\n\r\n90 degrees is a quarter turn. A quarter turn is equivalent to swapping width and height.\r\n\r\n\r\nIf you need them in some canonical form, swap size and adjust angle to be positive and less than 90 degrees.\r\n\r\nOr better yet, because that can jitter for boxes with close to 0 degrees of angle: canonize the angle to be within -45 to +45 degrees. That makes sense to do if you expect mostly axis-aligned objects.\r\n\r\nPseudocode/Python:\r\n```python\r\nold_angle = np.linspace(-90, +90, 7)\r\ntemp = old_angle + 45\r\nquarter_turns = temp // 90 # division and floor\r\nnew_angle = temp % 90 - 45\r\n\r\n# array([-90., -60., -30.,   0.,  30.,  60.,  90.]) # old_angle\r\n# array([ -1.,  -1.,   0.,   0.,   0.,   1.,   1.]) # quarter_turns\r\n# array([  0.,  30., -30.,   0.,  30., -30.,   0.]) # new_angle\r\n\r\n...\r\n\r\nif quarter_turns % 2 != 0: # single angle, not array\r\n    height, width = width, height\r\n```","title":"ReturnedRect are inverted after upgrade","body":"<p>The <em>reason</em> for the differing results would take some archaeology to find. OpenCV 3.2 is quite old. A lot of OpenCV's internals may have been improved since then. I don't think the docs specify the range of angles or relationship between width and height. It would have been acceptable for someone to change the implementation details.</p>\n<p>Dismissing differences beginning in the third or fourth decimal, those two representations are <em><strong>equivalent</strong></em> though:</p>\n<pre><code>{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\n{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\n\n</code></pre>\n<p><code>(-0.5055) % 90 = 89.4945</code></p>\n<p>90 degrees is a quarter turn. A quarter turn is equivalent to swapping width and height.</p>\n<p>If you need them in some canonical form, swap size and adjust angle to be positive and less than 90 degrees.</p>\n<p>Or better yet, because that can jitter for boxes with close to 0 degrees of angle: canonize the angle to be within -45 to +45 degrees. That makes sense to do if you expect mostly axis-aligned objects.</p>\n<p>Pseudocode/Python:</p>\n<pre class=\"lang-py prettyprint-override\"><code>old_angle = np.linspace(-90, +90, 7)\ntemp = old_angle + 45\nquarter_turns = temp // 90 # division and floor\nnew_angle = temp % 90 - 45\n\n# array([-90., -60., -30.,   0.,  30.,  60.,  90.]) # old_angle\n# array([ -1.,  -1.,   0.,   0.,   0.,   1.,   1.]) # quarter_turns\n# array([  0.,  30., -30.,   0.,  30., -30.,   0.]) # new_angle\n\n...\n\nif quarter_turns % 2 != 0: # single angle, not array\n    height, width = width, height\n</code></pre>\n"}],"owner":{"account_id":8538748,"reputation":487,"user_id":6399544,"accept_rate":57,"display_name":"Cesar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77244895,"answer_count":1,"score":1,"last_activity_date":1696605920,"creation_date":1696594380,"question_id":77244343,"body_markdown":"I&#39;m working on a big project, and we need to upgrade OpenCV from 3.2 to 4.6 on our Java project.\r\n\r\nUsing the exact same image I&#39;ve got inverted results:\r\n\r\nGetting contours : \r\n\r\n    matOfPoint = contours.get(i);\r\n    MatOfPoint2f contour2f = new MatOfPoint2f(matOfPoint.toArray());\r\n    RotatedRect rotatedRect = Imgproc.minAreaRect(contour2f);\r\n\r\nI version 3.2 of OpenCV result of **rotatedRect** is: \r\n\r\n    {{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\r\n\r\nIn version 4.6: \r\n\r\n    {{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\r\n\r\nWhy are the **width**, **height** and **angles** inverted?\r\n\r\nI&#39;ve got a bunch of calculations after this, and I would like to avoid changing them too much.","title":"ReturnedRect are inverted after upgrade","body":"<p>I'm working on a big project, and we need to upgrade OpenCV from 3.2 to 4.6 on our Java project.</p>\n<p>Using the exact same image I've got inverted results:</p>\n<p>Getting contours :</p>\n<pre><code>matOfPoint = contours.get(i);\nMatOfPoint2f contour2f = new MatOfPoint2f(matOfPoint.toArray());\nRotatedRect rotatedRect = Imgproc.minAreaRect(contour2f);\n</code></pre>\n<p>I version 3.2 of OpenCV result of <strong>rotatedRect</strong> is:</p>\n<pre><code>{{485.0001220703125, 641.5073852539062} 793x23 * -0.5055378675460815}}\n</code></pre>\n<p>In version 4.6:</p>\n<pre><code>{{485.0000915527344, 641.5073852539062} 23x793 * 89.49445343017578}}\n</code></pre>\n<p>Why are the <strong>width</strong>, <strong>height</strong> and <strong>angles</strong> inverted?</p>\n<p>I've got a bunch of calculations after this, and I would like to avoid changing them too much.</p>\n"},{"tags":["java","eclipse","hibernate","jdbc","spring-data"],"comments":[{"owner":{"account_id":6503402,"reputation":117,"user_id":5033276,"display_name":"Eugene K."},"score":0,"creation_date":1547631050,"post_id":54211638,"comment_id":95253605,"body_markdown":"You need to post the full exception stacktrace, the message you show probably misses its end, so there might be other errors that cause JDBCConnectionException","body":"You need to post the full exception stacktrace, the message you show probably misses its end, so there might be other errors that cause JDBCConnectionException"}],"answers":[{"tags":[],"owner":{"account_id":11747381,"reputation":320,"user_id":8597738,"display_name":"Sabesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1547629772,"creation_date":1547623892,"answer_id":54212245,"question_id":54211638,"body_markdown":"Can you make the following changes to your code. \r\n\r\n    &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n         &lt;props&gt;\r\n            &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\r\n            &lt;prop key=&quot;hibernate.hbm2ddl.auto&quot;&gt;update&lt;/prop&gt;\r\n        &lt;/props&gt;\r\n    &lt;/property&gt;\r\n\r\nAnd add below property in addition and remove the `@Autowired` from sessionFactory\r\n\r\n    &lt;bean id=&quot;employeeDAO&quot; class=&quot;yourbasepackage.EmployeeRepositoryDAOImple&quot;&gt; \r\n      &lt;property name=&quot;sessionFactory&quot; ref=&quot;sessionFactory&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Can you make the following changes to your code. </p>\n\n<pre><code>&lt;property name=\"hibernateProperties\"&gt;\n     &lt;props&gt;\n        &lt;prop key=\"hibernate.dialect\"&gt;org.hibernate.dialect.MySQL5Dialect&lt;/prop&gt;\n        &lt;prop key=\"hibernate.hbm2ddl.auto\"&gt;update&lt;/prop&gt;\n    &lt;/props&gt;\n&lt;/property&gt;\n</code></pre>\n\n<p>And add below property in addition and remove the <code>@Autowired</code> from sessionFactory</p>\n\n<pre><code>&lt;bean id=\"employeeDAO\" class=\"yourbasepackage.EmployeeRepositoryDAOImple\"&gt; \n  &lt;property name=\"sessionFactory\" ref=\"sessionFactory\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10826858,"reputation":470,"user_id":7962526,"display_name":"Aarthi Ananth"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1552422040,"creation_date":1547788793,"answer_id":54248115,"question_id":54211638,"body_markdown":"**Solution:**\r\n\r\nUpgrading MySql connector jar from 5.1 to 8.0 fixed the problem - my code was not the problem.\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p><strong>Solution:</strong></p>\n\n<p>Upgrading MySql connector jar from 5.1 to 8.0 fixed the problem - my code was not the problem.</p>\n"},{"tags":[],"owner":{"account_id":3241401,"reputation":1103,"user_id":2734348,"display_name":"Anand Singh"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1557912031,"creation_date":1557912031,"answer_id":56145777,"question_id":54211638,"body_markdown":"I solved this by correcting mysql credentials in the src &gt; main &gt; `application.properties` file\r\n\r\nCheck if your mysql credentials are correct and mysql server is running.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>I solved this by correcting mysql credentials in the src > main > <code>application.properties</code> file</p>\n\n<p>Check if your mysql credentials are correct and mysql server is running.</p>\n"},{"tags":[],"owner":{"account_id":3122384,"reputation":168,"user_id":2641909,"display_name":"hfunes.com"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1566225413,"creation_date":1566225413,"answer_id":57558932,"question_id":54211638,"body_markdown":"In my case didn&#39;t have the right autentication permission for root user.\r\nI knew that because logged to database just only tipying that:\r\n\r\n&lt;pre&gt;sudo mysql&lt;/pre&gt;\r\n\r\nSo, once logged into MySQL I typed that:\r\n\r\n&lt;pre&gt;SELECT user,authentication_string,plugin,host FROM mysql.user;&lt;/pre&gt;\r\n\r\nAnd saw the value auth_socket in the plugin column of root user.\r\nSo, I typed that:\r\n\r\n&lt;pre&gt;ALTER USER &#39;root&#39;@&#39;localhost&#39; IDENTIFIED WITH mysql_native_password BY &#39;PASSWORD&#39;;&lt;/pre&gt;\r\n\r\nThen restarted tomcat and problem solved.\r\n\r\nHenceforth, have to log into mysql typing:\r\n\r\n&lt;pre&gt;mysql -u root -pPASSWORD&lt;/pre&gt;\r\n\r\nHope It helps someone :)","title":"Unable to open JDBC Connection for DDL execution","body":"<p>In my case didn't have the right autentication permission for root user.\nI knew that because logged to database just only tipying that:</p>\n\n<pre>sudo mysql</pre>\n\n<p>So, once logged into MySQL I typed that:</p>\n\n<pre>SELECT user,authentication_string,plugin,host FROM mysql.user;</pre>\n\n<p>And saw the value auth_socket in the plugin column of root user.\nSo, I typed that:</p>\n\n<pre>ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY 'PASSWORD';</pre>\n\n<p>Then restarted tomcat and problem solved.</p>\n\n<p>Henceforth, have to log into mysql typing:</p>\n\n<pre>mysql -u root -pPASSWORD</pre>\n\n<p>Hope It helps someone :)</p>\n"},{"tags":[],"owner":{"account_id":5746045,"reputation":1135,"user_id":4537268,"display_name":"Ganesh Giri"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696605710,"creation_date":1577611000,"answer_id":59518142,"question_id":54211638,"body_markdown":"Check your Hibernate configuration:\r\n    \r\n```ini\r\nspring.datasource.url=jdbc:mysql://localhost:3306/spring_boot_db\r\nspring.datasource.username=root\r\nspring.datasource.password=r00t\r\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\nspring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl-auto = update\r\n```","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Check your Hibernate configuration:</p>\n<pre class=\"lang-ini prettyprint-override\"><code>spring.datasource.url=jdbc:mysql://localhost:3306/spring_boot_db\nspring.datasource.username=root\nspring.datasource.password=r00t\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\nspring.jpa.database-platform = org.hibernate.dialect.MySQL5Dialect\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto = update\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20714455,"reputation":365,"user_id":15234088,"display_name":"Scilla"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1617355900,"creation_date":1617355900,"answer_id":66917259,"question_id":54211638,"body_markdown":"this is what worked for me\r\n\r\n```\r\nmysql&gt;  CREATE USER &#39;scilla&#39;@&#39;172.17.0.1&#39; IDENTIFIED BY &#39;password&#39;;\r\nmysql&gt;  GRANT ALL PRIVILEGES ON *.* TO &#39;scilla&#39;@&#39;172.17.0.1&#39; WITH GRANT OPTION;\r\nmysql&gt; flush privileges; \r\nmysql&gt; exit\r\n\r\n\r\nspring:\r\n  datasource:\r\n    driverClassName: com.mysql.jdbc.Driver\r\n    url: jdbc:mysql://localhost:3306/scilla\r\n    username: scilla\r\n    password: password\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: validate\r\n    database: mysql\r\n    show-sql: true\r\n    database-platform: org.hibernate.dialect.MySQL5Dialect\r\n    hibernate.ddl-auto: update\r\n\r\n```","title":"Unable to open JDBC Connection for DDL execution","body":"<p>this is what worked for me</p>\n<pre><code>mysql&gt;  CREATE USER 'scilla'@'172.17.0.1' IDENTIFIED BY 'password';\nmysql&gt;  GRANT ALL PRIVILEGES ON *.* TO 'scilla'@'172.17.0.1' WITH GRANT OPTION;\nmysql&gt; flush privileges; \nmysql&gt; exit\n\n\nspring:\n  datasource:\n    driverClassName: com.mysql.jdbc.Driver\n    url: jdbc:mysql://localhost:3306/scilla\n    username: scilla\n    password: password\n  jpa:\n    hibernate:\n      ddl-auto: validate\n    database: mysql\n    show-sql: true\n    database-platform: org.hibernate.dialect.MySQL5Dialect\n    hibernate.ddl-auto: update\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20621616,"reputation":715,"user_id":15138511,"display_name":"Salim Nadji"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621359603,"creation_date":1621359603,"answer_id":67591375,"question_id":54211638,"body_markdown":"i had the same problem, i recommand you to revise the way you are establishing the connection to the database via reviewing the configuration(application.properties):\r\n\r\n    ## Spring Datasource Configuration\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/(package_name)?useSSL=false&amp;serverTimezone=UTC&amp;useLegacyDatetimeCode=false\r\n    spring.datasource.username=****\r\n    spring.datasource.password=****\r\n    \r\n    ## JPA Hibernate Properties\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n    spring.jpa.hibernate.ddl-auto=update\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>i had the same problem, i recommand you to revise the way you are establishing the connection to the database via reviewing the configuration(application.properties):</p>\n<pre><code>## Spring Datasource Configuration\nspring.datasource.url=jdbc:mysql://localhost:3306/(package_name)?useSSL=false&amp;serverTimezone=UTC&amp;useLegacyDatetimeCode=false\nspring.datasource.username=****\nspring.datasource.password=****\n\n## JPA Hibernate Properties\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17104739,"reputation":11,"user_id":12377003,"display_name":"RodRivas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1646946598,"creation_date":1646946598,"answer_id":71430849,"question_id":54211638,"body_markdown":"My problem was in the timezone configuration. I added:\r\n\r\n    ?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\r\n\r\nin application.properties. The whole line looked like this:\r\n\r\n    db.url= jdbc:mysql://localhost:3306/indigo?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\r\n\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>My problem was in the timezone configuration. I added:</p>\n<pre><code>?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\n</code></pre>\n<p>in application.properties. The whole line looked like this:</p>\n<pre><code>db.url= jdbc:mysql://localhost:3306/indigo?useSSL=false&amp;useTimezone=true&amp;serverTimezone=UTC\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22761741,"reputation":1,"user_id":16920453,"display_name":"San Thiago Teixeira"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666993268,"creation_date":1666993268,"answer_id":74241183,"question_id":54211638,"body_markdown":"Make sure if you did up a image on docker for DB connection. This happens to me when I don&#39;t run Docker Desktop.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>Make sure if you did up a image on docker for DB connection. This happens to me when I don't run Docker Desktop.</p>\n"},{"tags":[],"owner":{"account_id":13754432,"reputation":11,"user_id":9925743,"display_name":"Jai Jadhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1694243779,"creation_date":1694243779,"answer_id":77071222,"question_id":54211638,"body_markdown":"1.Test your mysql connection with the correct credentials\r\n2.RE-run the spring boot application.","title":"Unable to open JDBC Connection for DDL execution","body":"<p>1.Test your mysql connection with the correct credentials\n2.RE-run the spring boot application.</p>\n"}],"owner":{"account_id":10826858,"reputation":470,"user_id":7962526,"display_name":"Aarthi Ananth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123286,"favorite_count":0,"down_vote_count":0,"up_vote_count":20,"answer_count":10,"score":20,"last_activity_date":1696605710,"creation_date":1547620689,"question_id":54211638,"body_markdown":"I get the following error with my spring beans, \r\n\r\n&gt; Error creating bean with name &#39;employeeRepositoryDAOImple&#39;:\r\n&gt; Unsatisfied dependency expressed through method &#39;setSessionFactory&#39;\r\n&gt; parameter 0; nested exception is\r\n&gt; org.springframework.beans.factory.BeanCreationException: Error\r\n&gt; creating bean with name &#39;sessionFactory&#39; defined in class path\r\n&gt; resource [config.xml]: Invocation of init method failed; nested\r\n&gt; exception is org.hibernate.exception.JDBCConnectionException: Unable\r\n&gt; to open JDBC Connection for DDL execution\r\n\r\nClient.java \r\n\r\n    public class Client {\r\n\t    public static void main(String arg[]) {\r\n       \r\n            AbstractApplicationContext ctx = new     ClassPathXmlApplicationContext(&quot;config.xml&quot;);\r\n            EmployeeService employeeService = (EmployeeService) ctx.getBean(&quot;empoyeService&quot;);\r\n       \r\n            Employee employee1 = new Employee(100001, &quot;Alex&quot;, &quot;Account&quot;);\r\n            Employee employee2 = new Employee(100002, &quot;Sam&quot;, &quot;HR&quot;);\r\n        \r\n            employeeService.insert(employee1);\r\n            employeeService.insert(employee2);\r\n            System.out.println(&quot;Records are successfully added..&quot;);\r\n            ctx.close();\r\n    \r\n\t    }\r\n    }\r\n\r\nEntity.java\r\n\r\n    @Entity\r\n    public class Employee {\r\n\t@Id\r\n\tprivate int empId;\r\n\tprivate String empName;\r\n\tprivate String department;\r\n\tpublic Employee() {\r\n\t\tsuper();\r\n\t}\r\n\tpublic Employee(int empId,String empName,String deptName)\r\n\t{\r\n\t\tsuper();\r\n\t\tthis.empId=empId;\r\n\t\tthis.empName=empName;\r\n\t\tthis.department=deptName;\r\n\t}\r\n\t\r\n\tpublic int getEmpId() {\r\n\t\treturn empId;\r\n\t}\r\n\tpublic void setEmpId(int empId) {\r\n\t\tthis.empId = empId;\r\n\t}\r\n\tpublic String getEmpName() {\r\n\t\treturn empName;\r\n\t}\r\n\tpublic void setEmpName(String empName) {\r\n\t\tthis.empName = empName;\r\n\t}\r\n\tpublic String getDepartment() {\r\n\t\treturn department;\r\n\t}\r\n\tpublic void setDepartment(String department) {\r\n\t\tthis.department = department;\r\n\t}\r\n\t@Override\r\n\tpublic String toString()\r\n\t{\r\n\t\treturn &quot;Employee Empid=&quot;+empId+&quot; empName=&quot;+empName+&quot; department=&quot;+department;\r\n\t}\r\n\t\r\n\r\n    }\r\n\r\nEmployeeService.java\r\n\r\n    @Service(&quot;empoyeService&quot;)\r\n    public class EmployeeServiceImpl implements EmployeeService {\r\n\t@Autowired\r\n\tEmployeeRepository emprepo;\r\n\t@Override\r\n\tpublic void insert(Employee employee) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\temprepo.insert(employee);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic int delete(int empid) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\treturn emprepo.delete(empid);\r\n\t}\r\n    \r\n    }\r\n    EmployeeRepositoryDAOImple.java\r\n       @Repository\r\n       public class EmployeeRepositoryDAOImple implements EmployeeRepository{\r\n\tprivate SessionFactory sessionFactory;\r\n    @Autowired\r\n    public void setSessionFactory(SessionFactory sessionFactory) {\r\n        this.sessionFactory = sessionFactory;\r\n    }\r\n\t@Override\r\n\tpublic void insert(Employee employee) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tSession session = sessionFactory.openSession();\r\n        Transaction tx = session.beginTransaction();\r\n        session.save(employee);\r\n        tx.commit();\r\n        session.close();\r\n\t\t\r\n\t}}\r\nConfig.xml\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n    http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    http://www.springframework.org/schema/context\r\n    http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\r\n    &lt;!-- Define Service and Repository beans using auto scan feature of         Spring --&gt;\r\n    &lt;context:component-scan base-package=&quot;com.orm.employee.dao,com.orm.employee.Service&quot; /&gt;\r\n    \r\n    &lt;!-- Define DataSource bean using DriverManagerDataSource class of Spring --&gt; \r\n    &lt;bean id=&quot;myDataSource&quot;\r\n        class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;\r\n        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/myschema&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;username&quot; value=&quot;root&quot;&gt;&lt;/property&gt;\r\n        &lt;property name=&quot;password&quot; value=&quot;xxxx&quot;&gt;&lt;/property&gt;\r\n    &lt;/bean&gt;\r\n    &lt;!-- Define sessionFactory bean of Spring class --&gt;\r\n    &lt;bean id=&quot;sessionFactory&quot;\r\n        class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;myDataSource&quot; /&gt;\r\n        &lt;property name=&quot;packagesToScan&quot; value=&quot;com.orm.employee.dao&quot; /&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;value&gt;\r\n                hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\r\n                hibernate.hbm2ddl.auto=update\r\n                    \r\n            &lt;/value&gt;\r\n        &lt;/property&gt;\r\n    &lt;/bean&gt;\r\n&lt;/beans&gt;\r\n\r\n    Exception\r\n    SLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\r\n    SLF4J: Defaulting to no-operation (NOP) logger implementation\r\n    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\r\n    log4j:WARN No appenders could be found for logger (org.jboss.logging).\r\n    log4j:WARN Please initialize the log4j system properly.\r\n    log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\r\n    Exception in thread &quot;main&quot;      org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;employeeRepositoryDAOImple&#39;: Unsatisfied dependency expressed through method &#39;setSessionFactory&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:676)\r\n\tat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\r\n\tat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\r\n\tat com.orm.employee.client.Client.main(Client.java:14)\r\n    Caused by: org.springframework.beans.factory.BeanCreationException:      Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\r\n\tat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:668)\r\n\t... 15 more\r\n    Caused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\r\n\tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n\tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\r\n\tat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\r\n\tat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:329)\r\n\tat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\r\n\tat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\r\n\tat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\r\n\tat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\r\n\tat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310)\r\n\tat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:708)\r\n\tat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\r\n\tat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804)\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)\r\n\t... 25 more\r\n    Caused by:     com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server; consider upgrading MySQL client\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\r\n\tat com.mysql.jdbc.Util.getInstance(Util.java:336)\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:985)\r\n\tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)\r\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2938)\r\n\tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:855)\r\n\tat com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3337)\r\n\tat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1217)\r\n\tat com.mysql.jdbc.Connection.createNewIO(Connection.java:1930)\r\n\tat com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:716)\r\n\tat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n\tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n\tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n\tat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\r\n\tat com.mysql.jdbc.Connection.getInstance(Connection.java:295)\r\n\tat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:664)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:154)\r\n\tat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:145)\r\n\tat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)\r\n\tat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\r\n\tat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\r\n\t... 42 more\r\n","title":"Unable to open JDBC Connection for DDL execution","body":"<p>I get the following error with my spring beans, </p>\n\n<blockquote>\n  <p>Error creating bean with name 'employeeRepositoryDAOImple':\n  Unsatisfied dependency expressed through method 'setSessionFactory'\n  parameter 0; nested exception is\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'sessionFactory' defined in class path\n  resource [config.xml]: Invocation of init method failed; nested\n  exception is org.hibernate.exception.JDBCConnectionException: Unable\n  to open JDBC Connection for DDL execution</p>\n</blockquote>\n\n<p>Client.java </p>\n\n<pre><code>public class Client {\n    public static void main(String arg[]) {\n\n        AbstractApplicationContext ctx = new     ClassPathXmlApplicationContext(\"config.xml\");\n        EmployeeService employeeService = (EmployeeService) ctx.getBean(\"empoyeService\");\n\n        Employee employee1 = new Employee(100001, \"Alex\", \"Account\");\n        Employee employee2 = new Employee(100002, \"Sam\", \"HR\");\n\n        employeeService.insert(employee1);\n        employeeService.insert(employee2);\n        System.out.println(\"Records are successfully added..\");\n        ctx.close();\n\n    }\n}\n</code></pre>\n\n<p>Entity.java</p>\n\n<pre><code>@Entity\npublic class Employee {\n@Id\nprivate int empId;\nprivate String empName;\nprivate String department;\npublic Employee() {\n    super();\n}\npublic Employee(int empId,String empName,String deptName)\n{\n    super();\n    this.empId=empId;\n    this.empName=empName;\n    this.department=deptName;\n}\n\npublic int getEmpId() {\n    return empId;\n}\npublic void setEmpId(int empId) {\n    this.empId = empId;\n}\npublic String getEmpName() {\n    return empName;\n}\npublic void setEmpName(String empName) {\n    this.empName = empName;\n}\npublic String getDepartment() {\n    return department;\n}\npublic void setDepartment(String department) {\n    this.department = department;\n}\n@Override\npublic String toString()\n{\n    return \"Employee Empid=\"+empId+\" empName=\"+empName+\" department=\"+department;\n}\n\n\n}\n</code></pre>\n\n<p>EmployeeService.java</p>\n\n<pre><code>@Service(\"empoyeService\")\npublic class EmployeeServiceImpl implements EmployeeService {\n@Autowired\nEmployeeRepository emprepo;\n@Override\npublic void insert(Employee employee) {\n    // TODO Auto-generated method stub\n    emprepo.insert(employee);\n}\n\n@Override\npublic int delete(int empid) {\n    // TODO Auto-generated method stub\n    return emprepo.delete(empid);\n}\n\n}\nEmployeeRepositoryDAOImple.java\n   @Repository\n   public class EmployeeRepositoryDAOImple implements EmployeeRepository{\nprivate SessionFactory sessionFactory;\n@Autowired\npublic void setSessionFactory(SessionFactory sessionFactory) {\n    this.sessionFactory = sessionFactory;\n}\n@Override\npublic void insert(Employee employee) {\n    // TODO Auto-generated method stub\n    Session session = sessionFactory.openSession();\n    Transaction tx = session.beginTransaction();\n    session.save(employee);\n    tx.commit();\n    session.close();\n\n}}\n</code></pre>\n\n<p>Config.xml</p>\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:context=\"http://www.springframework.org/schema/context\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans.xsd\nhttp://www.springframework.org/schema/context\nhttp://www.springframework.org/schema/context/spring-context.xsd\"&gt;\n&lt;!-- Define Service and Repository beans using auto scan feature of         Spring --&gt;\n&lt;context:component-scan base-package=\"com.orm.employee.dao,com.orm.employee.Service\" /&gt;\n\n&lt;!-- Define DataSource bean using DriverManagerDataSource class of Spring --&gt; \n&lt;bean id=\"myDataSource\"\n    class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n    &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/myschema\"&gt;&lt;/property&gt;\n    &lt;property name=\"username\" value=\"root\"&gt;&lt;/property&gt;\n    &lt;property name=\"password\" value=\"xxxx\"&gt;&lt;/property&gt;\n&lt;/bean&gt;\n&lt;!-- Define sessionFactory bean of Spring class --&gt;\n&lt;bean id=\"sessionFactory\"\n    class=\"org.springframework.orm.hibernate5.LocalSessionFactoryBean\"&gt;\n    &lt;property name=\"dataSource\" ref=\"myDataSource\" /&gt;\n    &lt;property name=\"packagesToScan\" value=\"com.orm.employee.dao\" /&gt;\n    &lt;property name=\"hibernateProperties\"&gt;\n        &lt;value&gt;\n            hibernate.dialect=org.hibernate.dialect.MySQL5Dialect\n            hibernate.hbm2ddl.auto=update\n\n        &lt;/value&gt;\n    &lt;/property&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p></p>\n\n<pre><code>Exception\nSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nlog4j:WARN No appenders could be found for logger (org.jboss.logging).\nlog4j:WARN Please initialize the log4j system properly.\nlog4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.\nException in thread \"main\"      org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'employeeRepositoryDAOImple': Unsatisfied dependency expressed through method 'setSessionFactory' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:676)\nat org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1378)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:575)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:846)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:863)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:546)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\nat org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\nat com.orm.employee.client.Client.main(Client.java:14)\nCaused by: org.springframework.beans.factory.BeanCreationException:      Error creating bean with name 'sessionFactory' defined in class path resource [config.xml]: Invocation of init method failed; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1745)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:576)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:498)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:273)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1237)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1164)\nat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:668)\n... 15 more\nCaused by: org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:48)\nat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\nat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99)\nat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:69)\nat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcConnection(ImprovedExtractionContextImpl.java:60)\nat org.hibernate.tool.schema.internal.exec.ImprovedExtractionContextImpl.getJdbcDatabaseMetaData(ImprovedExtractionContextImpl.java:67)\nat org.hibernate.tool.schema.extract.internal.InformationExtractorJdbcDatabaseMetaDataImpl.getTables(InformationExtractorJdbcDatabaseMetaDataImpl.java:329)\nat org.hibernate.tool.schema.extract.internal.DatabaseInformationImpl.getTablesInformation(DatabaseInformationImpl.java:120)\nat org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:65)\nat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:207)\nat org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:114)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:183)\nat org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:72)\nat org.hibernate.internal.SessionFactoryImpl.&lt;init&gt;(SessionFactoryImpl.java:310)\nat org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:467)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:708)\nat org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:724)\nat org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:615)\nat org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:599)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1804)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1741)\n... 25 more\nCaused by:     com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Client does not support authentication protocol requested by server; consider upgrading MySQL client\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\nat com.mysql.jdbc.Util.getInstance(Util.java:336)\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:985)\nat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:957)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2938)\nat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:855)\nat com.mysql.jdbc.MysqlIO.secureAuth411(MysqlIO.java:3337)\nat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1217)\nat com.mysql.jdbc.Connection.createNewIO(Connection.java:1930)\nat com.mysql.jdbc.Connection.&lt;init&gt;(Connection.java:716)\nat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:46)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\nat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\nat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\nat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\nat com.mysql.jdbc.Util.handleNewInstance(Util.java:353)\nat com.mysql.jdbc.Connection.getInstance(Connection.java:295)\nat com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:266)\nat java.sql.DriverManager.getConnection(DriverManager.java:664)\nat java.sql.DriverManager.getConnection(DriverManager.java:208)\nat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriverManager(DriverManagerDataSource.java:154)\nat org.springframework.jdbc.datasource.DriverManagerDataSource.getConnectionFromDriver(DriverManagerDataSource.java:145)\nat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)\nat org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)\nat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122)\nat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:180)\nat org.hibernate.resource.transaction.backend.jdbc.internal.DdlTransactionIsolatorNonJtaImpl.getIsolatedConnection(DdlTransactionIsolatorNonJtaImpl.java:43)\n... 42 more\n</code></pre>\n"},{"tags":["java","junit","mockito","spring-webflux","spring-webclient"],"answers":[{"tags":[],"owner":{"account_id":12455565,"reputation":5317,"user_id":9068895,"display_name":"Alex"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1673666601,"creation_date":1673666293,"answer_id":75115531,"question_id":75114698,"body_markdown":"Unit testing WebClient has very low ROI. I would recommend looking at  [WireMock](https://wiremock.org) that provides very good API for testing web clients. Here are some examples\r\n\r\n```\r\nstubFor(get(url)\r\n\t\t.withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\r\n\t\t.willReturn(aResponse()\r\n\t\t\t\t.withStatus(200)\r\n\t\t\t\t.withBody(&quot;{}&quot;)\r\n\t\t)\r\n);\r\n\r\nStepVerifier.create(service.callApi())\r\n\t\t.expectNextCount(1)\r\n\t\t.verifyComplete();\r\n```\r\n\r\nYou could easily test both positive and negative scenarios by providing different stubs \r\n```\r\nstubFor(get(url)\r\n\t\t.withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\r\n\t\t.willReturn(aResponse()\r\n\t\t\t\t.withStatus(500)\r\n\t\t)\r\n);\r\n```\r\n\r\nIn addition, you could test retry logic using [Scenarios](https://wiremock.org/docs/stateful-behaviour/) or even simulate timeouts using [Delays](https://wiremock.org/docs/simulating-faults/).\r\n\r\nTo initialize it you could use `@AutoConfigureWireMock`provided by `org.springframework.cloud:spring-cloud-contract-wiremock` or, as an alternative, you can add direct dependency to `WireMock` and initialize it explicitly.","title":"How to unit test the Spring WebClient in java?","body":"<p>Unit testing WebClient has very low ROI. I would recommend looking at  <a href=\"https://wiremock.org\" rel=\"noreferrer\">WireMock</a> that provides very good API for testing web clients. Here are some examples</p>\n<pre><code>stubFor(get(url)\n        .withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\n        .willReturn(aResponse()\n                .withStatus(200)\n                .withBody(&quot;{}&quot;)\n        )\n);\n\nStepVerifier.create(service.callApi())\n        .expectNextCount(1)\n        .verifyComplete();\n</code></pre>\n<p>You could easily test both positive and negative scenarios by providing different stubs</p>\n<pre><code>stubFor(get(url)\n        .withHeader(HttpHeaders.ACCEPT, containing(MediaType.APPLICATION_JSON_VALUE))\n        .willReturn(aResponse()\n                .withStatus(500)\n        )\n);\n</code></pre>\n<p>In addition, you could test retry logic using <a href=\"https://wiremock.org/docs/stateful-behaviour/\" rel=\"noreferrer\">Scenarios</a> or even simulate timeouts using <a href=\"https://wiremock.org/docs/simulating-faults/\" rel=\"noreferrer\">Delays</a>.</p>\n<p>To initialize it you could use <code>@AutoConfigureWireMock</code>provided by <code>org.springframework.cloud:spring-cloud-contract-wiremock</code> or, as an alternative, you can add direct dependency to <code>WireMock</code> and initialize it explicitly.</p>\n"},{"tags":[],"owner":{"account_id":11533982,"reputation":3,"user_id":8452071,"display_name":"Roman Abakumov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673708889,"creation_date":1673708889,"answer_id":75118926,"question_id":75114698,"body_markdown":"requestHeadersSpec.retrieve() return ResponseSpec, but you are trying to return Mono.error by mockito instead. You need to return result of valid type, something that can be inherited from ResponseSpec.\r\nYou may return mock of ResponseSpec or something like\r\n new DefaultResponseSpec(Mono.error(new RetryableException(&quot;Server error: 500&quot;)))\r\n```\r\n\tstatic class DefaultResponseSpec implements ResponseSpec {\r\n\t\tprivate final Mono&lt;ClientResponse&gt; responseMono;\r\n\r\n\t\tDefaultResponseSpec(Mono&lt;ClientResponse&gt; responseMono) {\r\n\t\t\tthis.responseMono = responseMono;\r\n\t\t}\r\n```\r\n\r\n","title":"How to unit test the Spring WebClient in java?","body":"<p>requestHeadersSpec.retrieve() return ResponseSpec, but you are trying to return Mono.error by mockito instead. You need to return result of valid type, something that can be inherited from ResponseSpec.\nYou may return mock of ResponseSpec or something like\nnew DefaultResponseSpec(Mono.error(new RetryableException(&quot;Server error: 500&quot;)))</p>\n<pre><code>    static class DefaultResponseSpec implements ResponseSpec {\n        private final Mono&lt;ClientResponse&gt; responseMono;\n\n        DefaultResponseSpec(Mono&lt;ClientResponse&gt; responseMono) {\n            this.responseMono = responseMono;\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1628102,"reputation":3602,"user_id":1503163,"display_name":"Sanjay Bharwani"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696605689,"creation_date":1696605689,"answer_id":77245652,"question_id":75114698,"body_markdown":"We use Wiremock to test Client functionality. It can be done in standard unit test or a SpringBoot test.\r\n\r\nBelow code explains the Unit testing in regular tests.\r\n    \r\n    @Service\r\n    class MoviesClient {\r\n      private final WebClient moviesWebClient;\r\n    \r\n      public Mono&lt;Movie&gt; findMovieById(String movieID) {\r\n        return moviesWebClient.get().uri(MOVIE_ENDPOINT+&quot;/&quot;+movieID).bodyValue(job).retrieve()\r\n            .bodyToMono(Movie.class);\r\n      }\r\n    }\r\n\r\nNow as we see MoviesClient needs webClient to call the movie service and get movie.\r\n\r\n  \r\n\r\n      @ExtendWith({MockitoExtension.class})\r\n        class MoviesClientTest {\r\n        \r\n            private MoviesClient moviesClient;\r\n            \r\n            @RegisterExtension\r\n              private static final WireMockExtension MOVIES_WM =\r\n             WireMockExtension.newInstance().options(wireMockConfig().port(&quot;8086&quot;)).build();\r\n            \r\n            @BeforeEach\r\n            void setup() {\r\n            \r\n            var webClient = WebClient.builder().baseUrl(&quot;http://localhost:8086&quot;)\r\n                    .defaultHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE).build();\r\n            moviesClient = new MoviesClient(moviesClient)\r\n    MOVIES_WM.stubFor(get(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)).withHeader(CONTENT_TYPE, matching(APPLICATION_JSON_VALUE))willReturn(aResponse().withStatus(OK.value()).withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\r\n                .withBody(&quot;Your json response body comes here&quot;)));\r\n            }\r\n    }\r\n\r\nNow you can write your tests to call the method on client which in turn will make a webclient call which will be stubbed to wiremock server.\r\n\r\n\r\n    @Test\r\n    void testMoviesEndPoint() {\r\n      StepVerifier.create(moviesClient.findMovieById(1234)\r\n      .expectNext(movie -&gt; assertThat(movie).getId.equals(1234))\r\n      .verifyComplete();\r\n    \r\n    FLUENT_WM.verify(1, postRequestedFor(urlEqualTo(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)));\r\n    }\r\n","title":"How to unit test the Spring WebClient in java?","body":"<p>We use Wiremock to test Client functionality. It can be done in standard unit test or a SpringBoot test.</p>\n<p>Below code explains the Unit testing in regular tests.</p>\n<pre><code>@Service\nclass MoviesClient {\n  private final WebClient moviesWebClient;\n\n  public Mono&lt;Movie&gt; findMovieById(String movieID) {\n    return moviesWebClient.get().uri(MOVIE_ENDPOINT+&quot;/&quot;+movieID).bodyValue(job).retrieve()\n        .bodyToMono(Movie.class);\n  }\n}\n</code></pre>\n<p>Now as we see MoviesClient needs webClient to call the movie service and get movie.</p>\n<pre><code>  @ExtendWith({MockitoExtension.class})\n    class MoviesClientTest {\n    \n        private MoviesClient moviesClient;\n        \n        @RegisterExtension\n          private static final WireMockExtension MOVIES_WM =\n         WireMockExtension.newInstance().options(wireMockConfig().port(&quot;8086&quot;)).build();\n        \n        @BeforeEach\n        void setup() {\n        \n        var webClient = WebClient.builder().baseUrl(&quot;http://localhost:8086&quot;)\n                .defaultHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE).build();\n        moviesClient = new MoviesClient(moviesClient)\nMOVIES_WM.stubFor(get(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)).withHeader(CONTENT_TYPE, matching(APPLICATION_JSON_VALUE))willReturn(aResponse().withStatus(OK.value()).withHeader(CONTENT_TYPE, APPLICATION_JSON_VALUE)\n            .withBody(&quot;Your json response body comes here&quot;)));\n        }\n}\n</code></pre>\n<p>Now you can write your tests to call the method on client which in turn will make a webclient call which will be stubbed to wiremock server.</p>\n<pre><code>@Test\nvoid testMoviesEndPoint() {\n  StepVerifier.create(moviesClient.findMovieById(1234)\n  .expectNext(movie -&gt; assertThat(movie).getId.equals(1234))\n  .verifyComplete();\n\nFLUENT_WM.verify(1, postRequestedFor(urlEqualTo(MOVIE_ENDPOINT+&quot;/&quot;+&quot;1234&quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":25266045,"reputation":141,"user_id":19096205,"display_name":"Gojo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3256,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1696605689,"creation_date":1673645973,"question_id":75114698,"body_markdown":"I have this code which uses WebClient to call a third party API. \r\n\r\n```\r\n    public Mono&lt;JsonNode&gt; callApi(String url) {\r\n        return webClient.get()\r\n                .uri(url)\r\n                .headers(httpHeaders -&gt; httpHeaders.set(Constants.X_API_KEY, apiKey))\r\n                .retrieve()\r\n                .onStatus(HttpStatus::is5xxServerError,\r\n                        res -&gt; {\r\n                            res.bodyToMono(String.class)\r\n                                    .subscribe(e -&gt; log.error(Constants.EXCEPTION_LOG, e));\r\n                            return Mono.error(new RetryableException(&quot;Server error: &quot; + res.rawStatusCode()));\r\n                        })\r\n                .onStatus(HttpStatus::is4xxClientError,\r\n                        res -&gt; {\r\n                            res.bodyToMono(String.class)\r\n                                    .subscribe(e -&gt; log.error(&quot;Exception occurred in callPartnerApi: No retries {}&quot;, e));\r\n                            return Mono.error(new Exception(&quot;Exception occurred calling partner api, no retries &quot; + res.rawStatusCode()));\r\n                        })\r\n                .bodyToMono(JsonNode.class);\r\n    }\r\n```\r\n\r\nI am trying to use Mockito to unit test this and so far I have this which is failing:\r\n\r\n```\r\n    @Test\r\n    void testCallPartnerApi_then5xxException() {\r\n        WebClient.RequestHeadersUriSpec requestHeadersUriSpec = mock(WebClient.RequestHeadersUriSpec.class);\r\n        WebClient.RequestHeadersSpec requestHeadersSpec = mock(WebClient.RequestHeadersSpec.class);\r\n        WebClient.ResponseSpec responseSpec = mock(WebClient.ResponseSpec.class);\r\n\r\n        when(webClient.get()).thenReturn(requestHeadersUriSpec);\r\n        when(requestHeadersUriSpec.uri(anyString())).thenReturn(requestHeadersSpec);\r\n        when(requestHeadersSpec.headers(any())).thenReturn(requestHeadersSpec);\r\n        when(requestHeadersSpec.retrieve()).then(invocationOnMock -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\r\n\r\n        when(responseSpec.onStatus(argThat(x -&gt; x.test(HttpStatus.INTERNAL_SERVER_ERROR)), any())).thenAnswer(invocation -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\r\n\r\n\r\n        StepVerifier.create(partnerService.callPartnerApi(&quot;/test&quot;))\r\n                .expectError()\r\n                .verify();\r\n    }\r\n```\r\nThe error I get from this test is this:\r\n```\r\njava.lang.ClassCastException: class reactor.core.publisher.MonoError cannot be cast to class org.springframework.web.reactive.function.client.WebClient$ResponseSpec\r\n```\r\nIs using a library like WireMock or MockServerTest the only way to test these scenarios? ","title":"How to unit test the Spring WebClient in java?","body":"<p>I have this code which uses WebClient to call a third party API.</p>\n<pre><code>    public Mono&lt;JsonNode&gt; callApi(String url) {\n        return webClient.get()\n                .uri(url)\n                .headers(httpHeaders -&gt; httpHeaders.set(Constants.X_API_KEY, apiKey))\n                .retrieve()\n                .onStatus(HttpStatus::is5xxServerError,\n                        res -&gt; {\n                            res.bodyToMono(String.class)\n                                    .subscribe(e -&gt; log.error(Constants.EXCEPTION_LOG, e));\n                            return Mono.error(new RetryableException(&quot;Server error: &quot; + res.rawStatusCode()));\n                        })\n                .onStatus(HttpStatus::is4xxClientError,\n                        res -&gt; {\n                            res.bodyToMono(String.class)\n                                    .subscribe(e -&gt; log.error(&quot;Exception occurred in callPartnerApi: No retries {}&quot;, e));\n                            return Mono.error(new Exception(&quot;Exception occurred calling partner api, no retries &quot; + res.rawStatusCode()));\n                        })\n                .bodyToMono(JsonNode.class);\n    }\n</code></pre>\n<p>I am trying to use Mockito to unit test this and so far I have this which is failing:</p>\n<pre><code>    @Test\n    void testCallPartnerApi_then5xxException() {\n        WebClient.RequestHeadersUriSpec requestHeadersUriSpec = mock(WebClient.RequestHeadersUriSpec.class);\n        WebClient.RequestHeadersSpec requestHeadersSpec = mock(WebClient.RequestHeadersSpec.class);\n        WebClient.ResponseSpec responseSpec = mock(WebClient.ResponseSpec.class);\n\n        when(webClient.get()).thenReturn(requestHeadersUriSpec);\n        when(requestHeadersUriSpec.uri(anyString())).thenReturn(requestHeadersSpec);\n        when(requestHeadersSpec.headers(any())).thenReturn(requestHeadersSpec);\n        when(requestHeadersSpec.retrieve()).then(invocationOnMock -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\n\n        when(responseSpec.onStatus(argThat(x -&gt; x.test(HttpStatus.INTERNAL_SERVER_ERROR)), any())).thenAnswer(invocation -&gt; Mono.error(new RetryableException(&quot;Server error: 500&quot;)));\n\n\n        StepVerifier.create(partnerService.callPartnerApi(&quot;/test&quot;))\n                .expectError()\n                .verify();\n    }\n</code></pre>\n<p>The error I get from this test is this:</p>\n<pre><code>java.lang.ClassCastException: class reactor.core.publisher.MonoError cannot be cast to class org.springframework.web.reactive.function.client.WebClient$ResponseSpec\n</code></pre>\n<p>Is using a library like WireMock or MockServerTest the only way to test these scenarios?</p>\n"},{"tags":["java","aes","javax.crypto","ctr"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1696606315,"post_id":77245222,"comment_id":136179195,"body_markdown":"[The documentation of Cipher.getInstance](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/javax/crypto/Cipher.html#getInstance(java.lang.String)) explains how providers are located.  I recommend going by the docs rather than the source, as internal implementations may change from one release to the next, but the written contract is forever.","body":"<a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/javax/crypto/Cipher.html#getInstance(java.lang.String)\" rel=\"nofollow noreferrer\">The documentation of Cipher.getInstance</a> explains how providers are located.  I recommend going by the docs rather than the source, as internal implementations may change from one release to the next, but the written contract is forever."}],"answers":[{"tags":[],"owner":{"account_id":2116673,"reputation":678,"user_id":1880811,"display_name":"Asthor"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1696603219,"creation_date":1696603219,"answer_id":77245360,"question_id":77245222,"body_markdown":"There is no direct answer to your question as this varies based on among other which JDK you are currently using. \r\n\r\nQuoting directly from the [Java Cryptography Architecture][1] documentation for Java 17 it sates \r\n\r\n&gt; java.security.Provider is the base class for all security providers. Each CSP [Cryptography Security Provider] contains an instance of this class which contains the provider&#39;s name and lists all of the security services/algorithms it implements. When an instance of a particular algorithm is needed, the JCA framework consults the provider&#39;s database, and if a suitable match is found, the instance is created.\r\n&gt; \r\n&gt; Providers contain a package (or a set of packages) that supply concrete implementations for the advertised cryptographic algorithms. Each JDK installation has one or more providers installed and configured by default. Additional providers may be added statically or dynamically. Clients may configure their runtime environment to specify the provider preference order. The preference order is the order in which providers are searched for requested services when no specific provider is requested.\r\n\r\nSo depending on your setup, it can be any of the provided algorithms for `AES/CTR/NoPadding` with your JDK.\r\n\r\nYou can control which provider you use by supplying which provider you&#39;d prefer through \r\n\r\n    Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;, &quot;Provider&quot;);\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/security/java-cryptography-architecture-jca-reference-guide.html#GUID-EAB9FF73-4C69-4FD5-8A0C-5CF48211A859","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>There is no direct answer to your question as this varies based on among other which JDK you are currently using.</p>\n<p>Quoting directly from the <a href=\"https://docs.oracle.com/en/java/javase/17/security/java-cryptography-architecture-jca-reference-guide.html#GUID-EAB9FF73-4C69-4FD5-8A0C-5CF48211A859\" rel=\"nofollow noreferrer\">Java Cryptography Architecture</a> documentation for Java 17 it sates</p>\n<blockquote>\n<p>java.security.Provider is the base class for all security providers. Each CSP [Cryptography Security Provider] contains an instance of this class which contains the provider's name and lists all of the security services/algorithms it implements. When an instance of a particular algorithm is needed, the JCA framework consults the provider's database, and if a suitable match is found, the instance is created.</p>\n<p>Providers contain a package (or a set of packages) that supply concrete implementations for the advertised cryptographic algorithms. Each JDK installation has one or more providers installed and configured by default. Additional providers may be added statically or dynamically. Clients may configure their runtime environment to specify the provider preference order. The preference order is the order in which providers are searched for requested services when no specific provider is requested.</p>\n</blockquote>\n<p>So depending on your setup, it can be any of the provided algorithms for <code>AES/CTR/NoPadding</code> with your JDK.</p>\n<p>You can control which provider you use by supplying which provider you'd prefer through</p>\n<pre><code>Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;, &quot;Provider&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1696605120,"creation_date":1696605120,"answer_id":77245571,"question_id":77245222,"body_markdown":"The [`Cipher`](https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html) object has a method [`getProvider()`](https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html#getProvider--) to return the [`Provider`](https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html) instance, that was used to create the `Cipher` object. This class has several methods to get information about the provider itself like the name. You can use this information to &quot;reverse engineer&quot; which class or package is implementing the cipher. See the following example:\r\n\r\n    Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\r\n    System.out.println(cipher);\r\n    System.out.println(cipher.getClass());\r\n    Provider provider = cipher.getProvider();\r\n    System.out.println(provider);\r\n    System.out.println(provider.getName());\r\n    System.out.println(provider.getInfo());\r\n    System.out.println(provider.getClass());\r\n\r\nThis can generate an output like this (with openjdk version &quot;1.8.0_362&quot;):\r\n\r\n    javax.crypto.Cipher@7440e464\r\n    class javax.crypto.Cipher\r\n    SunJCE version 1.8\r\n    SunJCE\r\n    SunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)\r\n    class com.sun.crypto.provider.SunJCE\r\n\r\nYou can check the JDK or any installed provider JAR (like BouncyCastle) for the implementation class. For OpenJDK, the implementation of that class is at https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java. From there you can check other related classes like [`AESCipher`](https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCipher.java) or [`AESCrypt`](https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCrypt.java).","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html\" rel=\"nofollow noreferrer\"><code>Cipher</code></a> object has a method <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/crypto/Cipher.html#getProvider--\" rel=\"nofollow noreferrer\"><code>getProvider()</code></a> to return the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/security/Provider.html\" rel=\"nofollow noreferrer\"><code>Provider</code></a> instance, that was used to create the <code>Cipher</code> object. This class has several methods to get information about the provider itself like the name. You can use this information to &quot;reverse engineer&quot; which class or package is implementing the cipher. See the following example:</p>\n<pre><code>Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);\nSystem.out.println(cipher);\nSystem.out.println(cipher.getClass());\nProvider provider = cipher.getProvider();\nSystem.out.println(provider);\nSystem.out.println(provider.getName());\nSystem.out.println(provider.getInfo());\nSystem.out.println(provider.getClass());\n</code></pre>\n<p>This can generate an output like this (with openjdk version &quot;1.8.0_362&quot;):</p>\n<pre><code>javax.crypto.Cipher@7440e464\nclass javax.crypto.Cipher\nSunJCE version 1.8\nSunJCE\nSunJCE Provider (implements RSA, DES, Triple DES, AES, Blowfish, ARCFOUR, RC2, PBE, Diffie-Hellman, HMAC)\nclass com.sun.crypto.provider.SunJCE\n</code></pre>\n<p>You can check the JDK or any installed provider JAR (like BouncyCastle) for the implementation class. For OpenJDK, the implementation of that class is at <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/SunJCE.java</a>. From there you can check other related classes like <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCipher.java\" rel=\"nofollow noreferrer\"><code>AESCipher</code></a> or <a href=\"https://github.com/openjdk/jdk/blob/b3cc0c84316dd59f406a6fa23fcaf3d029910843/src/java.base/share/classes/com/sun/crypto/provider/AESCrypt.java\" rel=\"nofollow noreferrer\"><code>AESCrypt</code></a>.</p>\n"}],"owner":{"account_id":28954964,"reputation":35,"user_id":22178719,"display_name":"schegga_BC"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77245571,"answer_count":2,"score":1,"last_activity_date":1696605120,"creation_date":1696602045,"question_id":77245222,"body_markdown":"I am trying to find the implementations of the source code.  \r\nFor example, if I initialize the Cipher-object like this:\r\n\r\n`Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);`\r\n\r\nhow can I find the actual implementaion of the AES-Algorithm that is used and of the CTR-mode?\r\n\r\nIf I am looking up the source code of [Cipher.java](https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/javax/crypto/Cipher.java#L35) than you can see that the getInstance()-method uses some service-providers. I am guessing that the line:\r\n\r\n```\r\nList&lt;Service&gt; services = GetInstance.getServices(cipherServices);\r\n```\r\n\r\nis responsible for matching the &quot;AES/CTR/NoPadding&quot; to the CipherSpi-object that is created.\r\n\r\nBut now I am stuck and I do not know what is going on. How is this working? Where can I find the source code to AES and CTR?\r\nIs it matched to the classes in this [.../sun/crypto/provider](https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider) folder?\r\nHow does this matching work? Where can I see what is matched to what input?\r\nWhat I am also trying to figure out is if the CTR-Mode uses some sort of parallelism.","title":"javax.crypto - Cipher objects - How does the Provider Service work?","body":"<p>I am trying to find the implementations of the source code.<br />\nFor example, if I initialize the Cipher-object like this:</p>\n<p><code>Cipher cipher = Cipher.getInstance(&quot;AES/CTR/NoPadding&quot;);</code></p>\n<p>how can I find the actual implementaion of the AES-Algorithm that is used and of the CTR-mode?</p>\n<p>If I am looking up the source code of <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/javax/crypto/Cipher.java#L35\" rel=\"nofollow noreferrer\">Cipher.java</a> than you can see that the getInstance()-method uses some service-providers. I am guessing that the line:</p>\n<pre><code>List&lt;Service&gt; services = GetInstance.getServices(cipherServices);\n</code></pre>\n<p>is responsible for matching the &quot;AES/CTR/NoPadding&quot; to the CipherSpi-object that is created.</p>\n<p>But now I am stuck and I do not know what is going on. How is this working? Where can I find the source code to AES and CTR?\nIs it matched to the classes in this <a href=\"https://github.com/openjdk/jdk/tree/master/src/java.base/share/classes/com/sun/crypto/provider\" rel=\"nofollow noreferrer\">.../sun/crypto/provider</a> folder?\nHow does this matching work? Where can I see what is matched to what input?\nWhat I am also trying to figure out is if the CTR-Mode uses some sort of parallelism.</p>\n"},{"tags":["python","java","pdf","jupyter-notebook","tabula"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696608328,"post_id":77245524,"comment_id":136179581,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":25969259,"reputation":1,"user_id":19684758,"display_name":"Mr.Child"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696604734,"creation_date":1696604734,"question_id":77245524,"body_markdown":"I&#39;m running tabula.read_pdf function on Jupyter Notebook. It keeps telling me died kernel. Any ideas how to solve this? Thank you so much!\r\n\r\nI tried to install the package on jupyter notebook, and install java on conda prompt. I was trying to extract dataframe from pdf","title":"Died kernel when running tabula","body":"<p>I'm running tabula.read_pdf function on Jupyter Notebook. It keeps telling me died kernel. Any ideas how to solve this? Thank you so much!</p>\n<p>I tried to install the package on jupyter notebook, and install java on conda prompt. I was trying to extract dataframe from pdf</p>\n"},{"tags":["java","selenium","robotframework"],"answers":[{"tags":[],"owner":{"account_id":2287318,"reputation":1315,"user_id":2011041,"accept_rate":43,"display_name":"Floella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1499383615,"creation_date":1499383615,"answer_id":44960330,"question_id":44959866,"body_markdown":"Actually, I found a solution, but I&#39;m not sure it&#39;s the right approach: \r\n\r\n\r\n    public class Customized {\r\n     \r\n    \tprivate static Selenium2Library s;\r\n    \tprivate BrowserManagement b;\r\n    \tprivate WebDriver driver;\r\n    \t\r\n    \tpublic Customized() throws ScriptException {\r\n    \t\ttry {\r\n    \t\t\tCustomized.s = (Selenium2Library) Selenium2Library.getLibraryInstance();\r\n    \t\t} catch (javax.script.ScriptException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tb = s.getBrowserManagement();\r\n            driver=b.getCurrentWebDriver();\r\n        }\r\n    }\r\n\r\nNow the selenium methods are available from the driver object. However, there might be a better way to do it, as there&#39;s this message in the `javax.script.ScriptException` exception: &quot;*Access restriction: The type &#39;ScriptException&#39; is not API (restriction on required library &#39;C:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar&#39;)*&quot;","title":"Robot framework: how can I get current instance of selenium webdriver to write my own keywords?","body":"<p>Actually, I found a solution, but I'm not sure it's the right approach: </p>\n\n<pre><code>public class Customized {\n\n    private static Selenium2Library s;\n    private BrowserManagement b;\n    private WebDriver driver;\n\n    public Customized() throws ScriptException {\n        try {\n            Customized.s = (Selenium2Library) Selenium2Library.getLibraryInstance();\n        } catch (javax.script.ScriptException e) {\n            e.printStackTrace();\n        }\n        b = s.getBrowserManagement();\n        driver=b.getCurrentWebDriver();\n    }\n}\n</code></pre>\n\n<p>Now the selenium methods are available from the driver object. However, there might be a better way to do it, as there's this message in the <code>javax.script.ScriptException</code> exception: \"<em>Access restriction: The type 'ScriptException' is not API (restriction on required library 'C:\\Program Files\\Java\\jdk1.8.0_131\\jre\\lib\\rt.jar')</em>\"</p>\n"},{"tags":[],"owner":{"account_id":77276,"reputation":1440,"user_id":220671,"display_name":"romanlv"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1514923846,"creation_date":1514923846,"answer_id":48067221,"question_id":44959866,"body_markdown":"in python it can be done with following code\r\n\r\n\r\n\r\n    from robot.libraries.BuiltIn import BuiltIn\r\n    \r\n    \r\n    def _browser(self):\r\n        return BuiltIn().get_library_instance(&#39;Selenium2Library&#39;)._current_browser()\r\n\r\n","title":"Robot framework: how can I get current instance of selenium webdriver to write my own keywords?","body":"<p>in python it can be done with following code</p>\n\n<pre><code>from robot.libraries.BuiltIn import BuiltIn\n\n\ndef _browser(self):\n    return BuiltIn().get_library_instance('Selenium2Library')._current_browser()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6957722,"reputation":690,"user_id":5338256,"accept_rate":21,"display_name":"Michal"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636362026,"creation_date":1636362026,"answer_id":69880891,"question_id":44959866,"body_markdown":"For newer Selenium version (4.0) the following snippet can be used:\r\n\r\n    class SelCustomLib():\r\n\r\n    def get_browser_driver(self):\r\n        return BuiltIn().get_library_instance(&#39;SeleniumLibrary&#39;).driver","title":"Robot framework: how can I get current instance of selenium webdriver to write my own keywords?","body":"<p>For newer Selenium version (4.0) the following snippet can be used:</p>\n<pre><code>class SelCustomLib():\n\ndef get_browser_driver(self):\n    return BuiltIn().get_library_instance('SeleniumLibrary').driver\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25078050,"reputation":1,"user_id":18931214,"display_name":"Devendra Shakya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696604611,"creation_date":1696124843,"answer_id":77208967,"question_id":44959866,"body_markdown":"Here if you want to get instance of the webelement from robot framework and use into python code for selenium method..\r\n\r\n\r\n${element} =    Get WebElement    ${xapth_of_element}\r\n def get_captcha_text(self,element):\r\n     with open(&#39;logo.jpg&#39;, &#39;wb&#39;) as file:\r\n     file.write(element.screenshot_as_png)","title":"Robot framework: how can I get current instance of selenium webdriver to write my own keywords?","body":"<p>Here if you want to get instance of the webelement from robot framework and use into python code for selenium method..</p>\n<p>${element} =    Get WebElement    ${xapth_of_element}\ndef get_captcha_text(self,element):\nwith open('logo.jpg', 'wb') as file:\nfile.write(element.screenshot_as_png)</p>\n"}],"owner":{"account_id":2287318,"reputation":1315,"user_id":2011041,"accept_rate":43,"display_name":"Floella"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5014,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":4,"score":3,"last_activity_date":1696604611,"creation_date":1499380226,"question_id":44959866,"body_markdown":"I have a maven-powered Robot-framework project in java that uses selenium 3.4.0 dependency, robotframework 3.0.2 dependency, markusbernhardt&#39;s selenium2library version 1.4.0.8, and robotframework-maven-plugin version 1.4.7.\r\n\r\nMy robot tests live in the *src/main/test/robotframework/acceptance* folder, while in *src/main/java/mypackage* I created a Customized.java file to set a system property for the browser driver path (I then import this library in my tests:\r\n\r\n    *** Settings ***\r\n    Library  \t\t\tSelenium2Library\r\n    Library  \t\t\tmypackage.Customized\r\n\r\nThis works perfectly. But now I&#39;d like to implement my own keywords to extend Selenium2Library. But I&#39;m not sure how to obtain the current WebDriver instance that is running.\r\n\r\nI mean, if I weren&#39;t using Robot and just plain Selenium, I&#39;d do something like this:\r\n\r\n    WebDriver driver=new ChromeDriver();\r\n    driver.doSomething();\r\n\r\nHowever, in this case I don&#39;t want to instantiate a new WebDriver but instead get the one that is currently running (which Robot automatically instantiated). How can I do that?\r\n\r\nI&#39;ve so far created a `Selenium2Library` object and set it with the value returned by `Selenium2Library.getLibraryInstance();` but that&#39;s not giving me access to selenium&#39;s methods (e.g.: getCurrentUrl() is not listed).\r\n","title":"Robot framework: how can I get current instance of selenium webdriver to write my own keywords?","body":"<p>I have a maven-powered Robot-framework project in java that uses selenium 3.4.0 dependency, robotframework 3.0.2 dependency, markusbernhardt's selenium2library version 1.4.0.8, and robotframework-maven-plugin version 1.4.7.</p>\n\n<p>My robot tests live in the <em>src/main/test/robotframework/acceptance</em> folder, while in <em>src/main/java/mypackage</em> I created a Customized.java file to set a system property for the browser driver path (I then import this library in my tests:</p>\n\n<pre><code>*** Settings ***\nLibrary             Selenium2Library\nLibrary             mypackage.Customized\n</code></pre>\n\n<p>This works perfectly. But now I'd like to implement my own keywords to extend Selenium2Library. But I'm not sure how to obtain the current WebDriver instance that is running.</p>\n\n<p>I mean, if I weren't using Robot and just plain Selenium, I'd do something like this:</p>\n\n<pre><code>WebDriver driver=new ChromeDriver();\ndriver.doSomething();\n</code></pre>\n\n<p>However, in this case I don't want to instantiate a new WebDriver but instead get the one that is currently running (which Robot automatically instantiated). How can I do that?</p>\n\n<p>I've so far created a <code>Selenium2Library</code> object and set it with the value returned by <code>Selenium2Library.getLibraryInstance();</code> but that's not giving me access to selenium's methods (e.g.: getCurrentUrl() is not listed).</p>\n"},{"tags":["java","unique","hashcode"],"comments":[{"owner":{"account_id":286112,"reputation":11570,"user_id":585185,"display_name":"Jems"},"score":0,"creation_date":1390766711,"post_id":21368492,"comment_id":32222778,"body_markdown":"If you can be sure of some small upper limit of how many objects you have, you can check for a collision each time you calculate an id. If you find one, you could add 1 until you got a unique value, for instance, being careful of integer overflow. Or just make the ids 1,2,3, ...","body":"If you can be sure of some small upper limit of how many objects you have, you can check for a collision each time you calculate an id. If you find one, you could add 1 until you got a unique value, for instance, being careful of integer overflow. Or just make the ids 1,2,3, ..."},{"owner":{"account_id":960307,"reputation":107851,"user_id":984823,"display_name":"Joop Eggen"},"score":1,"creation_date":1390769204,"post_id":21368492,"comment_id":32223642,"body_markdown":"There is no `Math.abs(Integer.MIN_VALUE)` as `-MIN_VALUE == MIN_VALUE == 0x8000_0000`. Use `hc &amp; Integer.MAX_VALUE` instead if you remain with your strategy.","body":"There is no <code>Math.abs(Integer.MIN_VALUE)</code> as <code>-MIN_VALUE == MIN_VALUE == 0x8000_0000</code>. Use <code>hc &amp; Integer.MAX_VALUE</code> instead if you remain with your strategy."}],"answers":[{"tags":[],"owner":{"account_id":97082,"reputation":375006,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1390766682,"creation_date":1390766682,"answer_id":21368526,"question_id":21368492,"body_markdown":"You already can get two strings with the same hashcode. This should be obvious if you think that you have an infinite number of strings and only 2^32 possible hashcodes.\r\n\r\nYou just make it a little more probable when taking the absolute value. The risk is small but if you **need** an unique id, this isn&#39;t the right approach.","title":"Using hashcode for a unique ID","body":"<p>You already can get two strings with the same hashcode. This should be obvious if you think that you have an infinite number of strings and only 2^32 possible hashcodes.</p>\n\n<p>You just make it a little more probable when taking the absolute value. The risk is small but if you <strong>need</strong> an unique id, this isn't the right approach.</p>\n"},{"tags":[],"owner":{"account_id":5049,"reputation":23450,"user_id":7918,"accept_rate":99,"display_name":"jb."},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1696604340,"creation_date":1390767186,"answer_id":21368609,"question_id":21368492,"body_markdown":"Hashes are not unique, hence they are not appropriate for **uniqueId**.\r\n\r\nAs to probability of hash collision, you could read about [birthday paradox][1]. Actually (from what I recall) when drawing from an uniform distribution of N values, you should expect collision after drawing `$\\sqrt(N)$` (you could get collision much earlier). The problem is that Java&#39;s implementation of `hashCode` (and especially when hashing short strings) doesn&#39;t provide uniform distribution, so you&#39;ll get collision much earlier. \r\n\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Birthday_problem","title":"Using hashcode for a unique ID","body":"<p>Hashes are not unique, hence they are not appropriate for <strong>uniqueId</strong>.</p>\n<p>As to probability of hash collision, you could read about <a href=\"http://en.wikipedia.org/wiki/Birthday_problem\" rel=\"nofollow noreferrer\">birthday paradox</a>. Actually (from what I recall) when drawing from an uniform distribution of N values, you should expect collision after drawing <code>$\\sqrt(N)$</code> (you could get collision much earlier). The problem is that Java's implementation of <code>hashCode</code> (and especially when hashing short strings) doesn't provide uniform distribution, so you'll get collision much earlier.</p>\n"},{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1439224879,"creation_date":1390767262,"answer_id":21368620,"question_id":21368492,"body_markdown":"Hash codes can be thought of as pseudo-random numbers. Statistically, with a positive `int` hash code the chance of a collision between any two elements reaches 50% when the population size is about 54K (and 77K for *any* `int`). See [Birthday Problem Probability Table][1] for collision probabilities of various hash code sizes. \r\n\r\nAlso, your idea to use `Math.abs()` alone is flawed: It does not always return a positive number! In 2&#39;s compliment arithmetic, the absolute value of `Integer.MIN_VALUE` is itself!  Famously, the hash code of `&quot;polygenelubricants&quot;` is this value.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Birthday_problem#Probability_table","title":"Using hashcode for a unique ID","body":"<p>Hash codes can be thought of as pseudo-random numbers. Statistically, with a positive <code>int</code> hash code the chance of a collision between any two elements reaches 50% when the population size is about 54K (and 77K for <em>any</em> <code>int</code>). See <a href=\"https://en.wikipedia.org/wiki/Birthday_problem#Probability_table\" rel=\"noreferrer\">Birthday Problem Probability Table</a> for collision probabilities of various hash code sizes. </p>\n\n<p>Also, your idea to use <code>Math.abs()</code> alone is flawed: It does not always return a positive number! In 2's compliment arithmetic, the absolute value of <code>Integer.MIN_VALUE</code> is itself!  Famously, the hash code of <code>\"polygenelubricants\"</code> is this value.</p>\n"},{"tags":[],"owner":{"account_id":3910638,"reputation":6001,"user_id":3236102,"accept_rate":80,"display_name":"Dakkaron"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390769300,"creation_date":1390769300,"answer_id":21368987,"question_id":21368492,"body_markdown":"What you can do when you only have 30-50 values as you said is register each String you get into an HashMap together with a running counter as value:\r\n\r\n    HashMap StringMap = new HashMap&lt;String,Integer&gt;();\r\n    \r\n    StringMap.add(&quot;Test&quot;,1);\r\n    StringMap.add(&quot;AnotherTest&quot;,2);\r\n\r\nYou can then get your unique ID by calling this:\r\n\r\n    StringMap.get(&quot;Test&quot;); //returns 1","title":"Using hashcode for a unique ID","body":"<p>What you can do when you only have 30-50 values as you said is register each String you get into an HashMap together with a running counter as value:</p>\n\n<pre><code>HashMap StringMap = new HashMap&lt;String,Integer&gt;();\n\nStringMap.add(\"Test\",1);\nStringMap.add(\"AnotherTest\",2);\n</code></pre>\n\n<p>You can then get your unique ID by calling this:</p>\n\n<pre><code>StringMap.get(\"Test\"); //returns 1\n</code></pre>\n"}],"owner":{"account_id":92537,"reputation":6275,"user_id":253575,"accept_rate":83,"display_name":"IcedDante"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17434,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":21368620,"answer_count":4,"score":14,"last_activity_date":1696604340,"creation_date":1390766507,"question_id":21368492,"body_markdown":"I am working in a java-based system where I need to set an id for certain elements in the visual display. One category of elements is Strings, so I decided to use the String.hashCode() method to get a unique identifier for these elements.\r\n\r\nThe problem I ran into, however, is that the system I am working in borks if the id is negative and `String.hashCode` often returns negative values. One quick solution is to just use Math.abs() around the hashcode call to guarantee a positive result. What I was wondering about this approach is what are the chances of two distinct elements having the same hashcode?\r\n\r\nFor example, if one string returns a hashcode of -10 and another string returns a hashcode of 10 an error would occur. In my system we&#39;re talking about collections of objects that aren&#39;t more than 30 elements large typically so I don&#39;t think this would really be an issue, but I am curious as to what the math says.","title":"Using hashcode for a unique ID","body":"<p>I am working in a java-based system where I need to set an id for certain elements in the visual display. One category of elements is Strings, so I decided to use the String.hashCode() method to get a unique identifier for these elements.</p>\n\n<p>The problem I ran into, however, is that the system I am working in borks if the id is negative and <code>String.hashCode</code> often returns negative values. One quick solution is to just use Math.abs() around the hashcode call to guarantee a positive result. What I was wondering about this approach is what are the chances of two distinct elements having the same hashcode?</p>\n\n<p>For example, if one string returns a hashcode of -10 and another string returns a hashcode of 10 an error would occur. In my system we're talking about collections of objects that aren't more than 30 elements large typically so I don't think this would really be an issue, but I am curious as to what the math says.</p>\n"},{"tags":["java","gradle","launch4j"],"comments":[{"owner":{"account_id":19576930,"reputation":23,"user_id":18430044,"display_name":"tochitopor"},"score":0,"creation_date":1696866266,"post_id":77245363,"comment_id":136204641,"body_markdown":"I solved the problem by updating the plugin to the latest version. Although you cannot specify jar path in it. I also added header Type = &#39;console&#39; to launch4j{}","body":"I solved the problem by updating the plugin to the latest version. Although you cannot specify jar path in it. I also added header Type = &#39;console&#39; to launch4j{}"}],"owner":{"account_id":19576930,"reputation":23,"user_id":18430044,"display_name":"tochitopor"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1696603857,"creation_date":1696603237,"question_id":77245363,"body_markdown":"I want to use gradle to create from my code .jar, and then from .jar create .exe. I have a simple Java code \r\n\r\n```\r\npackage project;\r\n\r\npublic class main {\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;hello&quot;);\r\n    }\r\n}\r\n```\r\n\r\nand a build.gradle file. \r\n\r\n\r\n```\r\nplugins {\r\n    id &#39;java&#39;\r\n    id &#39;idea&#39;\r\n    id &#39;com.github.johnrengelman.shadow&#39;\r\n    id &#39;edu.sc.seis.launch4j&#39;\r\n}\r\n\r\njar.enabled = false\r\n\r\ngroup &#39;project&#39;\r\nversion &#39;1.0-SNAPSHOT&#39;\r\n\r\n\r\njava {\r\n    sourceCompatibility = 1.8\r\n}\r\n\r\nrepositories {\r\n}\r\n\r\ndependencies {\r\n}\r\n\r\nshadowJar {\r\n    archiveBaseName.set(&#39;toJarToExeFat&#39;)\r\n    archiveVersion.set(&#39;0.1&#39;)\r\n    archiveClassifier.set(&#39;&#39;)\r\n    manifest {\r\n        attributes &#39;Main-Class&#39;: &#39;project.main&#39;\r\n    }\r\n}\r\n\r\ntasks.shadowJar.dependsOn tasks.build\r\n\r\ncreateExe {\r\n    outfile = &#39;test.exe&#39;\r\n    mainClassName = &#39;project.main&#39;\r\n    jar = &quot;C:/work/java/toJarToExe/build/libs/toJarToExeFat-0.1.jar&quot;\r\n}\r\n\r\ntasks.createExe.dependsOn tasks.shadowJar\r\n```\r\n\r\n\r\nIt works, but when I run .exe, I get &quot;This application requires Java Runtime Environment 1.8.0&quot;.\r\n\r\nI was expecting to receive .exe as if I wrote this program in C","title":"Create .exe from .jar with gradle","body":"<p>I want to use gradle to create from my code .jar, and then from .jar create .exe. I have a simple Java code</p>\n<pre><code>package project;\n\npublic class main {\n    public static void main(String[] args) {\n        System.out.println(&quot;hello&quot;);\n    }\n}\n</code></pre>\n<p>and a build.gradle file.</p>\n<pre><code>plugins {\n    id 'java'\n    id 'idea'\n    id 'com.github.johnrengelman.shadow'\n    id 'edu.sc.seis.launch4j'\n}\n\njar.enabled = false\n\ngroup 'project'\nversion '1.0-SNAPSHOT'\n\n\njava {\n    sourceCompatibility = 1.8\n}\n\nrepositories {\n}\n\ndependencies {\n}\n\nshadowJar {\n    archiveBaseName.set('toJarToExeFat')\n    archiveVersion.set('0.1')\n    archiveClassifier.set('')\n    manifest {\n        attributes 'Main-Class': 'project.main'\n    }\n}\n\ntasks.shadowJar.dependsOn tasks.build\n\ncreateExe {\n    outfile = 'test.exe'\n    mainClassName = 'project.main'\n    jar = &quot;C:/work/java/toJarToExe/build/libs/toJarToExeFat-0.1.jar&quot;\n}\n\ntasks.createExe.dependsOn tasks.shadowJar\n</code></pre>\n<p>It works, but when I run .exe, I get &quot;This application requires Java Runtime Environment 1.8.0&quot;.</p>\n<p>I was expecting to receive .exe as if I wrote this program in C</p>\n"},{"tags":["java","lambda","interface","functional-interface"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":1,"creation_date":1696601357,"post_id":77245098,"comment_id":136178175,"body_markdown":"`Runnable` does not throw `Exception` but [`Callable`](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html) does.","body":"<code>Runnable</code> does not throw <code>Exception</code> but <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/Callable.html\" rel=\"nofollow noreferrer\"><code>Callable</code></a> does."},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1696601519,"post_id":77245098,"comment_id":136178212,"body_markdown":"@Pino Thanks but thats not my question","body":"@Pino Thanks but thats not my question"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696602781,"post_id":77245098,"comment_id":136178484,"body_markdown":"Why design with a checked exception? Most think that checked exceptions are an antipattern these days","body":"Why design with a checked exception? Most think that checked exceptions are an antipattern these days"},{"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"score":0,"creation_date":1696602849,"post_id":77245098,"comment_id":136178501,"body_markdown":"@g00se its out of my control, some come from external library that are still throwing checked exceptions","body":"@g00se its out of my control, some come from external library that are still throwing checked exceptions"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1696603398,"post_id":77245098,"comment_id":136178633,"body_markdown":"@g00se Got a citation for that?  Checked exceptions are *very* useful.  I have lost hours upon hours of my time trying to figure out what exceptions certain frameworks (read: Spring) are capable of throwing.","body":"@g00se Got a citation for that?  Checked exceptions are <i>very</i> useful.  I have lost hours upon hours of my time trying to figure out what exceptions certain frameworks (read: Spring) are capable of throwing."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696608041,"post_id":77245098,"comment_id":136179539,"body_markdown":"Well, I think I would actually say *some* rather than &quot;most&quot;. I can&#39;t find much, since SO seems to feature *very* heavily in searches including &quot;java&quot; ;) but here&#39;s one [thing](https://medium.com/@eob/checked-exceptions-considered-evil-f7d07e051fa6)","body":"Well, I think I would actually say <i>some</i> rather than &quot;most&quot;. I can&#39;t find much, since SO seems to feature <i>very</i> heavily in searches including &quot;java&quot; ;) but here&#39;s one <a href=\"https://medium.com/@eob/checked-exceptions-considered-evil-f7d07e051fa6\" rel=\"nofollow noreferrer\">thing</a>"}],"answers":[{"tags":[],"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696603699,"creation_date":1696603699,"answer_id":77245415,"question_id":77245098,"body_markdown":"1. You can create interface that _throws_ generic exception:\r\n```java\r\n    interface MyInterface&lt;T extends Exception&gt; {\r\n        void run() throws T;\r\n    }\r\n```  \r\nAnd one that _not throws_\r\n```java\r\n    interface MySuperInterface extends MyInterface&lt;Exception&gt; {\r\n        void run();\r\n    }\r\n```\r\n**usage:**\r\n```java\r\nMyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\r\nMyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\r\n```\r\n2. You also can create generic **consumer** method:  \r\n\r\n\r\nOne for _throws_:\r\n```java\r\n    public static &lt;T extends Exception&gt; void consume(MyInterface&lt;T&gt; action) throws T {\r\n        action.run();\r\n    }\r\n```\r\nOne for _no throws_:  \r\n```java\r\n    public static void consume(MySuperInterface action) {\r\n        action.run();\r\n    }\r\n```\r\n3. And you be able to do this:\r\n```java\r\n    public static void mainMethod() throws IOException, IllegalAccessException {\r\n        MyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\r\n        MyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\r\n        MySuperInterface noException = () -&gt; {};\r\n        //can assign to runnable cause noException.run() doesnt throw an exception\r\n        Runnable runnable = noException::run;\r\n\r\n        consume(io);\r\n        consume(iae);\r\n        consume(noException);\r\n    }\r\n```\r\n4. Full example:\r\n\r\n```java\r\n    interface MyInterface&lt;T extends Exception&gt; {\r\n        void run() throws T;\r\n    }\r\n\r\n    interface MySuperInterface extends MyInterface&lt;Exception&gt; {\r\n        void run();\r\n    }\r\n\r\n    public static void main(String[] args) throws Exception {\r\n        mainMethod();\r\n    }\r\n\r\n    public static void mainMethod() throws IOException, IllegalAccessException {\r\n        MyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\r\n        MyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\r\n        MySuperInterface noException = () -&gt; {};\r\n        //can assign to runnable cause noException.run() doesnt throw an exception\r\n        Runnable runnable = noException::run;\r\n\r\n        consume(io);\r\n        consume(iae);\r\n        consume(noException);\r\n    }\r\n\r\n    public static &lt;T extends Exception&gt; void consume(MyInterface&lt;T&gt; action) throws T {\r\n        action.run();\r\n    }\r\n\r\n    public static void consume(MySuperInterface action) {\r\n        action.run();\r\n    }\r\n```\r\nHope this will help you","title":"How to write a Functional Interface that throws the same checked exception","body":"<ol>\n<li>You can create interface that <em>throws</em> generic exception:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    interface MyInterface&lt;T extends Exception&gt; {\n        void run() throws T;\n    }\n</code></pre>\n<p>And one that <em>not throws</em></p>\n<pre class=\"lang-java prettyprint-override\"><code>    interface MySuperInterface extends MyInterface&lt;Exception&gt; {\n        void run();\n    }\n</code></pre>\n<p><strong>usage:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>MyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\nMyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\n</code></pre>\n<ol start=\"2\">\n<li>You also can create generic <strong>consumer</strong> method:</li>\n</ol>\n<p>One for <em>throws</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static &lt;T extends Exception&gt; void consume(MyInterface&lt;T&gt; action) throws T {\n        action.run();\n    }\n</code></pre>\n<p>One for <em>no throws</em>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void consume(MySuperInterface action) {\n        action.run();\n    }\n</code></pre>\n<ol start=\"3\">\n<li>And you be able to do this:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void mainMethod() throws IOException, IllegalAccessException {\n        MyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\n        MyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\n        MySuperInterface noException = () -&gt; {};\n        //can assign to runnable cause noException.run() doesnt throw an exception\n        Runnable runnable = noException::run;\n\n        consume(io);\n        consume(iae);\n        consume(noException);\n    }\n</code></pre>\n<ol start=\"4\">\n<li>Full example:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    interface MyInterface&lt;T extends Exception&gt; {\n        void run() throws T;\n    }\n\n    interface MySuperInterface extends MyInterface&lt;Exception&gt; {\n        void run();\n    }\n\n    public static void main(String[] args) throws Exception {\n        mainMethod();\n    }\n\n    public static void mainMethod() throws IOException, IllegalAccessException {\n        MyInterface&lt;IOException&gt; io = () -&gt; {throw new IOException();};\n        MyInterface&lt;IllegalAccessException&gt; iae = () -&gt; {throw new IllegalAccessException();};\n        MySuperInterface noException = () -&gt; {};\n        //can assign to runnable cause noException.run() doesnt throw an exception\n        Runnable runnable = noException::run;\n\n        consume(io);\n        consume(iae);\n        consume(noException);\n    }\n\n    public static &lt;T extends Exception&gt; void consume(MyInterface&lt;T&gt; action) throws T {\n        action.run();\n    }\n\n    public static void consume(MySuperInterface action) {\n        action.run();\n    }\n</code></pre>\n<p>Hope this will help you</p>\n"}],"owner":{"account_id":1736824,"reputation":5410,"user_id":1589188,"accept_rate":66,"display_name":"user1589188"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77245415,"answer_count":1,"score":0,"last_activity_date":1696603699,"creation_date":1696600979,"question_id":77245098,"body_markdown":"I know `Runnable` does not throw `Exception`, so I am trying to write a new interface that accepts method that can throw checked exception:\r\n\r\nInterface:\r\n\r\n    interface MyInterface {\r\n        void run() throws Exception;\r\n    }\r\n\r\nService:\r\n\r\n    public void serviceMethod(MyInterface action) throws Exception {\r\n        // ...\r\n        action.run();\r\n        // ...\r\n    }\r\n    public void serviceMethod(Runnable action) { // for methods don&#39;t throw checked exception\r\n        // ...\r\n        action.run();\r\n        // ...\r\n    }\r\n\r\nMain:\r\n\r\n    public void myMethod() throws Exception {\r\n        service.serviceMethod(this::someMethodThatThrowsCheckedException);\r\n        service.serviceMethod(this::someMethodThatDoesNotThrowCheckedException);\r\n    }\r\n\r\nThis all seems OK, but I don&#39;t want `myMethod()` to throw the base class `Exception`, I want it to throw the actual exception classes throw by `someMethodThatThrowsCheckedException`. e.g. if\r\n\r\n    public void someMethodThatThrowsCheckedException throws IOException, ClassNotFoundException {//...}\r\n\r\nThen I want `myMethod()` to throw `IOException, ClassNotFoundException`, instead of `Exception`. Just like the case when the method is called normally without going through the interface:\r\n\r\n    public void myMethod() throws IOException, ClassNotFoundException {\r\n        someMethodThatThrowsCheckedException();\r\n    }\r\n\r\nCan this be done in a generic way?","title":"How to write a Functional Interface that throws the same checked exception","body":"<p>I know <code>Runnable</code> does not throw <code>Exception</code>, so I am trying to write a new interface that accepts method that can throw checked exception:</p>\n<p>Interface:</p>\n<pre><code>interface MyInterface {\n    void run() throws Exception;\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>public void serviceMethod(MyInterface action) throws Exception {\n    // ...\n    action.run();\n    // ...\n}\npublic void serviceMethod(Runnable action) { // for methods don't throw checked exception\n    // ...\n    action.run();\n    // ...\n}\n</code></pre>\n<p>Main:</p>\n<pre><code>public void myMethod() throws Exception {\n    service.serviceMethod(this::someMethodThatThrowsCheckedException);\n    service.serviceMethod(this::someMethodThatDoesNotThrowCheckedException);\n}\n</code></pre>\n<p>This all seems OK, but I don't want <code>myMethod()</code> to throw the base class <code>Exception</code>, I want it to throw the actual exception classes throw by <code>someMethodThatThrowsCheckedException</code>. e.g. if</p>\n<pre><code>public void someMethodThatThrowsCheckedException throws IOException, ClassNotFoundException {//...}\n</code></pre>\n<p>Then I want <code>myMethod()</code> to throw <code>IOException, ClassNotFoundException</code>, instead of <code>Exception</code>. Just like the case when the method is called normally without going through the interface:</p>\n<pre><code>public void myMethod() throws IOException, ClassNotFoundException {\n    someMethodThatThrowsCheckedException();\n}\n</code></pre>\n<p>Can this be done in a generic way?</p>\n"},{"tags":["java","hibernate","jpa","tomcat","websphere"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695298343,"post_id":77150088,"comment_id":136007530,"body_markdown":"The ejbthinclient does contain all those classes afaik.","body":"The ejbthinclient does contain all those classes afaik."},{"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"score":0,"creation_date":1695650493,"post_id":77150088,"comment_id":136049075,"body_markdown":"it seem to be the case and ibm.ws.runtime &amp; ibm.ws.ejb seem to have them too.","body":"it seem to be the case and ibm.ws.runtime &amp; ibm.ws.ejb seem to have them too."}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695299988,"creation_date":1695299988,"answer_id":77150325,"question_id":77150088,"body_markdown":"This is typically a **version conflict with the JPA** (Java Persistence API) library. The NoSuchMethodError indicates that the application is trying to call a method indexes() on the javax.persistence.Table class, which doesn&#39;t exist in the version of JPA *being used*.\r\n\r\nAs of my (brief) analysis based on your dependency tree, you are using \r\n\r\n - ***JPA 2.1*** in &quot;*com.project-common.data-access:data-access:jar:5.0.0.2*&quot; and \r\n - ***JPA 2.2*** in &quot;*javax.persistence:javax.persistence-api:jar:2.2*&quot; and \r\n - also your hibernate includes its own JPA implementation. \r\n\r\nSo you&#39;ve got to decide which one you are gonna use, which is the one that contains the method &quot;javax.persistence.Table.indexes()&quot;\r\n\r\nThe *javax.persistence:javax.persistence-api:jar:2.2* looks like the one that should contain the *javax.persistence.Table.indexes()* method (You should check that up!).\r\n\r\nNow, the idea is to try excluding all the other JPA from other dependencies like this:\r\n\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;some.group&lt;/groupId&gt;\r\n    &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;\r\n    &lt;version&gt;conflicting-version&lt;/version&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n\r\n```\r\n\r\n\r\n\r\nSince you have Hibernate as your JPA provider, you should consider using Hibernate&#39;s internal JPA implementation, which is included with Hibernate Core. \r\n\r\nClean and then rebuild.. If the problem persisted, try printing the classpath being used by your application during startup to help identify any unexpected JPA libraries being loaded.\r\n\r\nGood luck :)\r\n","title":"ClassPathXmlApplicationContext: Error creating bean with name &#39;X&#39;; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.indexes()","body":"<p>This is typically a <strong>version conflict with the JPA</strong> (Java Persistence API) library. The NoSuchMethodError indicates that the application is trying to call a method indexes() on the javax.persistence.Table class, which doesn't exist in the version of JPA <em>being used</em>.</p>\n<p>As of my (brief) analysis based on your dependency tree, you are using</p>\n<ul>\n<li><em><strong>JPA 2.1</strong></em> in &quot;<em>com.project-common.data-access:data-access:jar:5.0.0.2</em>&quot; and</li>\n<li><em><strong>JPA 2.2</strong></em> in &quot;<em>javax.persistence:javax.persistence-api:jar:2.2</em>&quot; and</li>\n<li>also your hibernate includes its own JPA implementation.</li>\n</ul>\n<p>So you've got to decide which one you are gonna use, which is the one that contains the method &quot;javax.persistence.Table.indexes()&quot;</p>\n<p>The <em>javax.persistence:javax.persistence-api:jar:2.2</em> looks like the one that should contain the <em>javax.persistence.Table.indexes()</em> method (You should check that up!).</p>\n<p>Now, the idea is to try excluding all the other JPA from other dependencies like this:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;some.group&lt;/groupId&gt;\n    &lt;artifactId&gt;conflicting-artifact&lt;/artifactId&gt;\n    &lt;version&gt;conflicting-version&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n\n</code></pre>\n<p>Since you have Hibernate as your JPA provider, you should consider using Hibernate's internal JPA implementation, which is included with Hibernate Core.</p>\n<p>Clean and then rebuild.. If the problem persisted, try printing the classpath being used by your application during startup to help identify any unexpected JPA libraries being loaded.</p>\n<p>Good luck :)</p>\n"},{"tags":[],"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696603571,"creation_date":1696542827,"answer_id":77240793,"question_id":77150088,"body_markdown":"Like explain in the update, the problem come from two libs from ibm (ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer) which included a implementation on jpa directly in thier libs instead of a dependency that could be managed via maven. \r\n\r\nSolution: \r\n1) re-package ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer to exclude the folder src/javax/persistense from these project, the app build correctly and no longer have the NoSuchMethodError. This however force us to have custom jar in our company nexus. \r\n\r\n2) The another way is to overide the classloader via -Djava.endorsed.dirs, but that will only work with java 8 and earlier version. https://tomcat.apache.org/tomcat-8.5-doc/class-loader-howto.html\r\n\r\nWe tested both and they work but since this project might need to be migrated to a more recent version of java we decided to go with the first option. \r\n\r\nHope this can help someone with the same problem and save them some precious time. ","title":"ClassPathXmlApplicationContext: Error creating bean with name &#39;X&#39;; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.indexes()","body":"<p>Like explain in the update, the problem come from two libs from ibm (ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer) which included a implementation on jpa directly in thier libs instead of a dependency that could be managed via maven.</p>\n<p>Solution:</p>\n<ol>\n<li><p>re-package ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer to exclude the folder src/javax/persistense from these project, the app build correctly and no longer have the NoSuchMethodError. This however force us to have custom jar in our company nexus.</p>\n</li>\n<li><p>The another way is to overide the classloader via -Djava.endorsed.dirs, but that will only work with java 8 and earlier version. <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/class-loader-howto.html\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-8.5-doc/class-loader-howto.html</a></p>\n</li>\n</ol>\n<p>We tested both and they work but since this project might need to be migrated to a more recent version of java we decided to go with the first option.</p>\n<p>Hope this can help someone with the same problem and save them some precious time.</p>\n"}],"owner":{"account_id":71185,"reputation":1110,"user_id":205839,"accept_rate":81,"display_name":"Chris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77240793,"answer_count":2,"score":2,"last_activity_date":1696603571,"creation_date":1695297883,"question_id":77150088,"body_markdown":"I&#39;m currently moving a legacy websphere application/service to run on tomcat instead.\r\nThis all work fine for most of what the service need to do except for a particular call that need to access a sqlServer db. \r\n\r\nWhen trying to load the context it give the following error: \r\n\r\n    ClassPathXmlApplicationContext           : Exception encountered during context initialization - cancelling refresh attempt: \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sessionFactory&#39; defined in class path resource [SpringConfigDataAccess.xml]: \r\n    Invocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.indexes()[Ljavax/persistence/Index; \r\n\r\n\r\nHowever, there seem to be a conflict with the use jpa 2.1 \r\nI suspect it might be one of the WAS lib that is added to make the app work on tomcat or the WAS specific class in the db config.\r\n\r\n**Here some general info and dependencies tree:** \r\n\r\nWAS was using ibmjdk for java 1.8 \r\n\r\nTomcat is using openJDk for java 1.8\r\n\r\nPrevious config\r\n```\r\n&lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;         \r\n\t&lt;property name=&quot;jndiName&quot; value=&quot;jdbc/dbName&quot;/&gt;         \r\n\t&lt;property name=&quot;lookupOnStartup&quot; value=&quot;false&quot;/&gt;         \r\n\t&lt;property name=&quot;cache&quot; value=&quot;true&quot; /&gt;         \r\n\t&lt;property name=&quot;proxyInterface&quot;  value=&quot;javax.sql.DataSource&quot; /&gt;     \r\n&lt;/bean&gt; \r\n```\r\n\t\r\nnew config\r\n```\r\n\t&lt;bean id=&quot;dataSource&quot; destroy-method=&quot;close&quot;\r\n\t\t  class=&quot;org.apache.commons.dbcp2.BasicDataSource&quot; scope=&quot;prototype&quot;&gt;\r\n\t\t&lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\r\n\t\t&lt;property name=&quot;username&quot; value=&quot;username&quot; /&gt;\r\n\t\t&lt;property name=&quot;password&quot; value=&quot;pass&quot; /&gt;\r\n\t\t&lt;property name=&quot;url&quot; value=&quot;server_url&quot;/&gt;\r\n\t&lt;/bean&gt;\r\n```\t\r\nThis changed required the need to add commons-dbcp2 in the maven project dependencies\r\n```\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.10.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\t\r\n\r\nThe session factory config for that db is: \r\n```\t\r\n\t&lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\r\n \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\r\n \t\t&lt;property name=&quot;annotatedClasses&quot;&gt;\r\n\t\t\t&lt;list&gt;\r\n\t\t\t...\r\n\t\t\t&lt;/list&gt;\r\n \t\t&lt;/property&gt;\r\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\r\n            &lt;props&gt;\r\n            \t&lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.SQLServerDialect&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;false&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.max_fetch_depth&quot;&gt;6&lt;/prop&gt;\r\n                &lt;prop key=&quot;hibernate.connection.driver_class&quot;&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/prop&gt;\r\n\r\n                &lt;!--           IBM WAS SPECIFIC             --&gt;          \r\n\t\t          &lt;prop key=&quot;hibernate.transaction.factory_class&quot;&gt;org.hibernate.transaction.CMTTransactionFactory&lt;/prop&gt;\r\n\t\t          &lt;prop key=&quot;hibernate.transaction.manager_lookup_class&quot;&gt;org.hibernate.transaction.WebSphereJTATransactionLookup&lt;/prop&gt;\r\n\t\t          &lt;prop key=&quot;hibernate.transaction.jta.platform&quot;&gt;org.hibernate.service.jta.platform.internal.WebSphereJtaPlatform&lt;/prop&gt;\t\t          \r\n  \t            &lt;!--           /END IBM WAS SPECIFIC        --&gt;\r\n                \r\n                &lt;!-- added in order for a JUnit test to load properly --&gt;\r\n                &lt;prop key=&quot;javax.persistence.validation.mode&quot;&gt;none&lt;/prop&gt;\r\n            &lt;/props&gt;\r\n        &lt;/property&gt;\t\r\n\t\t\r\n&lt;!--          Previous WAS SPECIFIC transaction manager             --&gt;  \r\n&lt;!--\t&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.transaction.jta.WebSphereUowTransactionManager&quot;/&gt;--&gt;\r\n\t&lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;/&gt;\t\t\r\n```\t\t\r\nFinally the dependency tree\r\n```\t\t\r\n +- com.project.app:main-project-compose:jar:1.0.0-SNAPSHOT:compile\r\n |  +- com.project-common.data-access:data-access:jar:5.0.0.2:compile\r\n |  |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\r\n |  |  \\- com.microsoft:sqlserver.jdbc:jar:4.0:runtime\r\n |  +- org.hibernate:hibernate-core:jar:5.6.4.Final:compile\r\n |  |  +- org.jboss.logging:jboss-logging:jar:3.4.3.Final:compile\r\n |  |  +- net.bytebuddy:byte-buddy:jar:1.12.7:compile\r\n |  |  +- antlr:antlr:jar:2.7.7:compile\r\n |  |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.1.1.Final:compile\r\n |  |  +- org.jboss:jandex:jar:2.4.2.Final:compile\r\n |  |  +- com.fasterxml:classmate:jar:1.5.1:compile\r\n |  |  +- javax.activation:javax.activation-api:jar:1.2.0:compile\r\n |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:5.1.2.Final:compile\r\n |  |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\r\n |  |  \\- org.glassfish.jaxb:jaxb-runtime:jar:2.3.1:compile\r\n |  |     +- org.glassfish.jaxb:txw2:jar:2.3.1:compile\r\n |  |     +- com.sun.istack:istack-commons-runtime:jar:3.0.7:compile\r\n |  |     +- org.jvnet.staxex:stax-ex:jar:1.8:compile\r\n |  |     \\- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.15:compile\r\n |  \\- org.apache.commons:commons-collections4:jar:4.1:compile\r\n +- org.springframework:spring-context:jar:5.3.13:compile\r\n |  +- org.springframework:spring-aop:jar:5.3.13:compile\r\n |  +- org.springframework:spring-beans:jar:5.3.13:compile\r\n |  +- org.springframework:spring-core:jar:5.3.13:compile\r\n |  |  \\- org.springframework:spring-jcl:jar:5.3.13:compile\r\n |  \\- org.springframework:spring-expression:jar:5.3.13:compile\r\n +- org.springframework:spring-orm:jar:5.3.13:compile\r\n |  +- org.springframework:spring-jdbc:jar:5.3.13:compile\r\n |  \\- org.springframework:spring-tx:jar:5.3.13:compile\r\n +- junit:junit:jar:4.11:test\r\n |  \\- org.hamcrest:hamcrest-core:jar:1.3:test\r\n +- xerces:xercesImpl:jar:2.12.2:compile\r\n |  \\- xml-apis:xml-apis:jar:1.4.01:compile\r\n +- com.commons:websphere-mq-dependencies:pom:7.0.1.5.0:test\r\n |  +- com.ibm.websphere:com.ibm.mq:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mqjms:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.jmqi:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.local:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.remote:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.system:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.commonservices:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.jms.internal:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.jms:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.provider:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.wmq:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.msg.client.wmq.common:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.connector:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.commonservices:jar:7.0.1.5:test\r\n |  +- com.ibm.websphere:com.ibm.mq.headers:jar:7.0.1.5:test\r\n |  \\- com.ibm.websphere:com.ibm.mq.pcf:jar:7.0.1.5:test\r\n +- com.ibm.websphere:com.ibm.ws.ejb.thinclient:jar:8.0.0:test\r\n +- com.project.app:main-project-packaging:jar:1.0.0-SNAPSHOT:compile\r\n |  +- org.apache.pdfbox:pdfbox:jar:3.0.0-alpha3:compile\r\n |  |  +- org.apache.pdfbox:io:jar:3.0.0-alpha3:compile\r\n |  |  \\- org.apache.pdfbox:fontbox:jar:3.0.0-alpha3:compile\r\n |  +- org.bouncycastle:bcprov-jdk18on:jar:1.72:compile\r\n |  +- net.sf.opencsv:opencsv:jar:2.4:compile\r\n |  \\- com.commons:dependencies-emf-ecore-sdo:pom:2.2.1.0:runtime\r\n |     +- org.eclipse.persistence:commonj.sdo:jar:2.1.1:runtime\r\n |     +- org.eclipse.emf:org.eclipse.emf.ecore:jar:2.2.1.v200609210005:runtime\r\n |     +- org.eclipse.emf:org.eclipse.emf.common:jar:2.2.1.v200609210005:runtime\r\n |     +- org.eclipse.emf:org.eclipse.emf.ecore.sdo:jar:2.2.0.v200609210005:runtime\r\n |     +- org.eclipse.emf:org.eclipse.emf.ecore.xmi:jar:2.2.1.v200609210005:runtime\r\n |     \\- org.eclipse.emf:org.eclipse.emf.ecore.change:jar:2.2.0.v200609210005:runtime\r\n +- javax.persistence:javax.persistence-api:jar:2.2:compile\r\n \\- org.apache.commons:commons-dbcp2:jar:2.10.0:compile\r\n    +- org.apache.commons:commons-pool2:jar:2.11.1:compile\r\n    +- commons-logging:commons-logging:jar:1.2:compile\r\n    \\- jakarta.transaction:jakarta.transaction-api:jar:1.3.1:compile\r\n```\t\t\r\n\r\nUPDATE: \r\n\r\nData access was using jpa 2.1 but hibernate.core is loading jpa 2.2 (javax.persistence-api-2.2), since data-access is a internal lib I migrated it to jpa 2.2. \r\n\r\nHowever, the exception still happen at runtime. With some digging it seem that 3 librairies have the package javax.persistence in their project that seem to interfer with javax.persistence-api-2.2. (the lib with the problem were all libs from ibm websphere, ibm.ws.thinclient, ibm.ws.runtime &amp; ibm.ws.ejb.)\r\nJust to hit this point home here the structure of one of them\r\n```\t\r\n&gt; com.ibm.websphere:com.ibm.ws.ejb.thinclient:jar:8.5.0\r\n---&gt; com.ibm.*\r\n\t----&gt; has many package\r\n---&gt; javax.*\r\n\t----&gt; has many package\r\n\t----&gt; persistences\r\n\t\t-----&gt; Table.java -&gt; 2.0 interface\r\n```\t\r\n\r\nIn all project that had these issues I&#39;ve put javax.persistence-api-2.2 first in the dependencies tree so it will be the first jpa lib in the classpath. \r\nIt seem to be the case when I run  mvn dependency:build-classpath -Dmdep.includeScope=compile\r\n\r\nHowever, the exception still happen even after that change. \r\n\r\nUpdate 2: \r\n\r\nAfter re-packaging ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer to exclude the folder src/javax/persistense from these project, the app build correctly and no longer have the NoSuchMethodError. It has a another exception which (NoSuchBeanDefinitionException) which seem to be unrelated. \r\nHowever, removing the folder from the jar is not ideal and probably using a solution involving the classloader is probably a cleaner alternative. ","title":"ClassPathXmlApplicationContext: Error creating bean with name &#39;X&#39;; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.indexes()","body":"<p>I'm currently moving a legacy websphere application/service to run on tomcat instead.\nThis all work fine for most of what the service need to do except for a particular call that need to access a sqlServer db.</p>\n<p>When trying to load the context it give the following error:</p>\n<pre><code>ClassPathXmlApplicationContext           : Exception encountered during context initialization - cancelling refresh attempt: \norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [SpringConfigDataAccess.xml]: \nInvocation of init method failed; nested exception is java.lang.NoSuchMethodError: javax.persistence.Table.indexes()[Ljavax/persistence/Index; \n</code></pre>\n<p>However, there seem to be a conflict with the use jpa 2.1\nI suspect it might be one of the WAS lib that is added to make the app work on tomcat or the WAS specific class in the db config.</p>\n<p><strong>Here some general info and dependencies tree:</strong></p>\n<p>WAS was using ibmjdk for java 1.8</p>\n<p>Tomcat is using openJDk for java 1.8</p>\n<p>Previous config</p>\n<pre><code>&lt;bean id=&quot;dataSource&quot; class=&quot;org.springframework.jndi.JndiObjectFactoryBean&quot;&gt;         \n    &lt;property name=&quot;jndiName&quot; value=&quot;jdbc/dbName&quot;/&gt;         \n    &lt;property name=&quot;lookupOnStartup&quot; value=&quot;false&quot;/&gt;         \n    &lt;property name=&quot;cache&quot; value=&quot;true&quot; /&gt;         \n    &lt;property name=&quot;proxyInterface&quot;  value=&quot;javax.sql.DataSource&quot; /&gt;     \n&lt;/bean&gt; \n</code></pre>\n<p>new config</p>\n<pre><code>    &lt;bean id=&quot;dataSource&quot; destroy-method=&quot;close&quot;\n          class=&quot;org.apache.commons.dbcp2.BasicDataSource&quot; scope=&quot;prototype&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;com.microsoft.sqlserver.jdbc.SQLServerDriver&quot;/&gt;\n        &lt;property name=&quot;username&quot; value=&quot;username&quot; /&gt;\n        &lt;property name=&quot;password&quot; value=&quot;pass&quot; /&gt;\n        &lt;property name=&quot;url&quot; value=&quot;server_url&quot;/&gt;\n    &lt;/bean&gt;\n</code></pre>\n<p>This changed required the need to add commons-dbcp2 in the maven project dependencies</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-dbcp2&lt;/artifactId&gt;\n            &lt;version&gt;2.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The session factory config for that db is:</p>\n<pre><code>    &lt;bean id=&quot;sessionFactory&quot; class=&quot;org.springframework.orm.hibernate5.LocalSessionFactoryBean&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;dataSource&quot;/&gt;\n        &lt;property name=&quot;annotatedClasses&quot;&gt;\n            &lt;list&gt;\n            ...\n            &lt;/list&gt;\n        &lt;/property&gt;\n        &lt;property name=&quot;hibernateProperties&quot;&gt;\n            &lt;props&gt;\n                &lt;prop key=&quot;hibernate.show_sql&quot;&gt;true&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.SQLServerDialect&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.cache.use_second_level_cache&quot;&gt;false&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.max_fetch_depth&quot;&gt;6&lt;/prop&gt;\n                &lt;prop key=&quot;hibernate.connection.driver_class&quot;&gt;com.microsoft.sqlserver.jdbc.SQLServerDriver&lt;/prop&gt;\n\n                &lt;!--           IBM WAS SPECIFIC             --&gt;          \n                  &lt;prop key=&quot;hibernate.transaction.factory_class&quot;&gt;org.hibernate.transaction.CMTTransactionFactory&lt;/prop&gt;\n                  &lt;prop key=&quot;hibernate.transaction.manager_lookup_class&quot;&gt;org.hibernate.transaction.WebSphereJTATransactionLookup&lt;/prop&gt;\n                  &lt;prop key=&quot;hibernate.transaction.jta.platform&quot;&gt;org.hibernate.service.jta.platform.internal.WebSphereJtaPlatform&lt;/prop&gt;                  \n                &lt;!--           /END IBM WAS SPECIFIC        --&gt;\n                \n                &lt;!-- added in order for a JUnit test to load properly --&gt;\n                &lt;prop key=&quot;javax.persistence.validation.mode&quot;&gt;none&lt;/prop&gt;\n            &lt;/props&gt;\n        &lt;/property&gt; \n        \n&lt;!--          Previous WAS SPECIFIC transaction manager             --&gt;  \n&lt;!--    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.transaction.jta.WebSphereUowTransactionManager&quot;/&gt;--&gt;\n    &lt;bean id=&quot;transactionManager&quot; class=&quot;org.springframework.orm.hibernate5.HibernateTransactionManager&quot;/&gt;      \n</code></pre>\n<p>Finally the dependency tree</p>\n<pre><code> +- com.project.app:main-project-compose:jar:1.0.0-SNAPSHOT:compile\n |  +- com.project-common.data-access:data-access:jar:5.0.0.2:compile\n |  |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\n |  |  \\- com.microsoft:sqlserver.jdbc:jar:4.0:runtime\n |  +- org.hibernate:hibernate-core:jar:5.6.4.Final:compile\n |  |  +- org.jboss.logging:jboss-logging:jar:3.4.3.Final:compile\n |  |  +- net.bytebuddy:byte-buddy:jar:1.12.7:compile\n |  |  +- antlr:antlr:jar:2.7.7:compile\n |  |  +- org.jboss.spec.javax.transaction:jboss-transaction-api_1.2_spec:jar:1.1.1.Final:compile\n |  |  +- org.jboss:jandex:jar:2.4.2.Final:compile\n |  |  +- com.fasterxml:classmate:jar:1.5.1:compile\n |  |  +- javax.activation:javax.activation-api:jar:1.2.0:compile\n |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:5.1.2.Final:compile\n |  |  +- javax.xml.bind:jaxb-api:jar:2.3.1:compile\n |  |  \\- org.glassfish.jaxb:jaxb-runtime:jar:2.3.1:compile\n |  |     +- org.glassfish.jaxb:txw2:jar:2.3.1:compile\n |  |     +- com.sun.istack:istack-commons-runtime:jar:3.0.7:compile\n |  |     +- org.jvnet.staxex:stax-ex:jar:1.8:compile\n |  |     \\- com.sun.xml.fastinfoset:FastInfoset:jar:1.2.15:compile\n |  \\- org.apache.commons:commons-collections4:jar:4.1:compile\n +- org.springframework:spring-context:jar:5.3.13:compile\n |  +- org.springframework:spring-aop:jar:5.3.13:compile\n |  +- org.springframework:spring-beans:jar:5.3.13:compile\n |  +- org.springframework:spring-core:jar:5.3.13:compile\n |  |  \\- org.springframework:spring-jcl:jar:5.3.13:compile\n |  \\- org.springframework:spring-expression:jar:5.3.13:compile\n +- org.springframework:spring-orm:jar:5.3.13:compile\n |  +- org.springframework:spring-jdbc:jar:5.3.13:compile\n |  \\- org.springframework:spring-tx:jar:5.3.13:compile\n +- junit:junit:jar:4.11:test\n |  \\- org.hamcrest:hamcrest-core:jar:1.3:test\n +- xerces:xercesImpl:jar:2.12.2:compile\n |  \\- xml-apis:xml-apis:jar:1.4.01:compile\n +- com.commons:websphere-mq-dependencies:pom:7.0.1.5.0:test\n |  +- com.ibm.websphere:com.ibm.mq:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mqjms:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.jmqi:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.local:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.remote:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.jmqi.system:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.commonservices:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.jms.internal:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.jms:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.provider:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.wmq:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.msg.client.wmq.common:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.connector:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.commonservices:jar:7.0.1.5:test\n |  +- com.ibm.websphere:com.ibm.mq.headers:jar:7.0.1.5:test\n |  \\- com.ibm.websphere:com.ibm.mq.pcf:jar:7.0.1.5:test\n +- com.ibm.websphere:com.ibm.ws.ejb.thinclient:jar:8.0.0:test\n +- com.project.app:main-project-packaging:jar:1.0.0-SNAPSHOT:compile\n |  +- org.apache.pdfbox:pdfbox:jar:3.0.0-alpha3:compile\n |  |  +- org.apache.pdfbox:io:jar:3.0.0-alpha3:compile\n |  |  \\- org.apache.pdfbox:fontbox:jar:3.0.0-alpha3:compile\n |  +- org.bouncycastle:bcprov-jdk18on:jar:1.72:compile\n |  +- net.sf.opencsv:opencsv:jar:2.4:compile\n |  \\- com.commons:dependencies-emf-ecore-sdo:pom:2.2.1.0:runtime\n |     +- org.eclipse.persistence:commonj.sdo:jar:2.1.1:runtime\n |     +- org.eclipse.emf:org.eclipse.emf.ecore:jar:2.2.1.v200609210005:runtime\n |     +- org.eclipse.emf:org.eclipse.emf.common:jar:2.2.1.v200609210005:runtime\n |     +- org.eclipse.emf:org.eclipse.emf.ecore.sdo:jar:2.2.0.v200609210005:runtime\n |     +- org.eclipse.emf:org.eclipse.emf.ecore.xmi:jar:2.2.1.v200609210005:runtime\n |     \\- org.eclipse.emf:org.eclipse.emf.ecore.change:jar:2.2.0.v200609210005:runtime\n +- javax.persistence:javax.persistence-api:jar:2.2:compile\n \\- org.apache.commons:commons-dbcp2:jar:2.10.0:compile\n    +- org.apache.commons:commons-pool2:jar:2.11.1:compile\n    +- commons-logging:commons-logging:jar:1.2:compile\n    \\- jakarta.transaction:jakarta.transaction-api:jar:1.3.1:compile\n</code></pre>\n<p>UPDATE:</p>\n<p>Data access was using jpa 2.1 but hibernate.core is loading jpa 2.2 (javax.persistence-api-2.2), since data-access is a internal lib I migrated it to jpa 2.2.</p>\n<p>However, the exception still happen at runtime. With some digging it seem that 3 librairies have the package javax.persistence in their project that seem to interfer with javax.persistence-api-2.2. (the lib with the problem were all libs from ibm websphere, ibm.ws.thinclient, ibm.ws.runtime &amp; ibm.ws.ejb.)\nJust to hit this point home here the structure of one of them</p>\n<pre><code>&gt; com.ibm.websphere:com.ibm.ws.ejb.thinclient:jar:8.5.0\n---&gt; com.ibm.*\n    ----&gt; has many package\n---&gt; javax.*\n    ----&gt; has many package\n    ----&gt; persistences\n        -----&gt; Table.java -&gt; 2.0 interface\n</code></pre>\n<p>In all project that had these issues I've put javax.persistence-api-2.2 first in the dependencies tree so it will be the first jpa lib in the classpath.\nIt seem to be the case when I run  mvn dependency:build-classpath -Dmdep.includeScope=compile</p>\n<p>However, the exception still happen even after that change.</p>\n<p>Update 2:</p>\n<p>After re-packaging ibm.ws.thinclient &amp; ibm.ws.ejb.embeddableContainer to exclude the folder src/javax/persistense from these project, the app build correctly and no longer have the NoSuchMethodError. It has a another exception which (NoSuchBeanDefinitionException) which seem to be unrelated.\nHowever, removing the folder from the jar is not ideal and probably using a solution involving the classloader is probably a cleaner alternative.</p>\n"},{"tags":["java","spring","spring-boot","spring-validator"],"comments":[{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":1,"creation_date":1651304631,"post_id":72066545,"comment_id":127336816,"body_markdown":"Your record will need to have validation annotations, such as `@NotNull String createdBy` and then in your Controller @RequestBody `@Valid CreateSellerRequestDTO` though as this is a record, I am not quite sure if it will work.  Try and see","body":"Your record will need to have validation annotations, such as <code>@NotNull String createdBy</code> and then in your Controller @RequestBody <code>@Valid CreateSellerRequestDTO</code> though as this is a record, I am not quite sure if it will work.  Try and see"}],"answers":[{"tags":[],"owner":{"account_id":5096768,"reputation":1551,"user_id":4087817,"display_name":"ngg"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671113427,"creation_date":1671113427,"answer_id":74812870,"question_id":72066545,"body_markdown":"***try like this:***\r\n\r\n    public record CreateSellerRequestDTO(@NotNull(message = &quot;createdBy can not be null&quot;) String createdBy,\r\n                                         @NotNull(message = &quot;userName can not be null&quot;) String userName,\r\n                                         String name,\r\n                                         String email,\r\n                                         BigDecimal shippingCost,\r\n                                         String password,\r\n                                         SellerAddress sellerAddress) {\r\n\r\n}","title":"How can i validate dto of type record in spring framework?","body":"<p><em><strong>try like this:</strong></em></p>\n<pre><code>public record CreateSellerRequestDTO(@NotNull(message = &quot;createdBy can not be null&quot;) String createdBy,\n                                     @NotNull(message = &quot;userName can not be null&quot;) String userName,\n                                     String name,\n                                     String email,\n                                     BigDecimal shippingCost,\n                                     String password,\n                                     SellerAddress sellerAddress) {\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":6299922,"reputation":365,"user_id":4894891,"accept_rate":0,"display_name":"uğur taş"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696602382,"creation_date":1696602382,"answer_id":77245253,"question_id":72066545,"body_markdown":"If validation annotations are not meet your requirements, you can override constructor of the record class and make your own validations. Such as\r\n\r\n    public record UserRecord(String name, int age, String email) {\r\n\r\n      public UserRecord(String name, int age, String email) {\r\n        this.name = name.trim();\r\n        this.age = age;\r\n        if(age &gt; 18) {\r\n          // email is mandatory in that case \r\n          this.email = email.toLowerCase(Locale.ROOT);\r\n        }\r\n      }\r\n    }\r\nYou can use [compact constructor][1] if you don&#39;t want to handle assigning all values one by one.\r\n\r\nYou can find details [here][2].\r\n\r\n\r\n  [1]: https://medium.com/codimis/constructor-types-of-java-record-classes-19cc45050d09?sk=802c8a097984d37d7d2bbc8cd2edc124\r\n  [2]: https://medium.com/codimis/how-to-validate-and-normalize-java-record-classes-82cae6326df8?sk=bb6ad92ff363cf60271905532360a6fe","title":"How can i validate dto of type record in spring framework?","body":"<p>If validation annotations are not meet your requirements, you can override constructor of the record class and make your own validations. Such as</p>\n<pre><code>public record UserRecord(String name, int age, String email) {\n\n  public UserRecord(String name, int age, String email) {\n    this.name = name.trim();\n    this.age = age;\n    if(age &gt; 18) {\n      // email is mandatory in that case \n      this.email = email.toLowerCase(Locale.ROOT);\n    }\n  }\n}\n</code></pre>\n<p>You can use <a href=\"https://medium.com/codimis/constructor-types-of-java-record-classes-19cc45050d09?sk=802c8a097984d37d7d2bbc8cd2edc124\" rel=\"nofollow noreferrer\">compact constructor</a> if you don't want to handle assigning all values one by one.</p>\n<p>You can find details <a href=\"https://medium.com/codimis/how-to-validate-and-normalize-java-record-classes-82cae6326df8?sk=bb6ad92ff363cf60271905532360a6fe\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"account_id":24301317,"reputation":53,"user_id":18244772,"display_name":"Emirhan Ay"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3305,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1696602382,"creation_date":1651303936,"question_id":72066545,"body_markdown":"I have an endpoint to create the Seller object.I get the necessary information to create the Seller object from the dto of record type.\r\nHow can i validate this dto in spring validation? I need to make sure that the data of the incoming DTO object is validated. I don&#39;t want to validate manually. \r\n\r\n```java\r\n@RestController\r\n@RequestMapping(&quot;api/sellers&quot;)\r\npublic class SellerController {\r\n\r\n    private final SellerService sellerService;\r\n    private final CreateSellerRequestValidator createSellerRequestValidator;\r\n\r\n    @PostMapping\r\n    public ResponseEntity&lt;?&gt; create(@RequestBody CreateSellerRequestDTO createSellerRequestDTO){\r\n            createSellerRequestValidator.validate(createSellerRequestDTO);\r\n            sellerService.create(createSellerRequestDTO);\r\n            return ResponseEntity.ok().build();\r\n    }\r\n}\r\n```\r\n```java\r\npublic record CreateSellerRequestDTO(String createdBy,\r\n                                     String userName,\r\n                                     String name,\r\n                                     String email,\r\n                                     BigDecimal shippingCost,\r\n                                     String password,\r\n                                     SellerAddress sellerAddress) {\r\n}\r\n```","title":"How can i validate dto of type record in spring framework?","body":"<p>I have an endpoint to create the Seller object.I get the necessary information to create the Seller object from the dto of record type.\nHow can i validate this dto in spring validation? I need to make sure that the data of the incoming DTO object is validated. I don't want to validate manually.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\n@RequestMapping(&quot;api/sellers&quot;)\npublic class SellerController {\n\n    private final SellerService sellerService;\n    private final CreateSellerRequestValidator createSellerRequestValidator;\n\n    @PostMapping\n    public ResponseEntity&lt;?&gt; create(@RequestBody CreateSellerRequestDTO createSellerRequestDTO){\n            createSellerRequestValidator.validate(createSellerRequestDTO);\n            sellerService.create(createSellerRequestDTO);\n            return ResponseEntity.ok().build();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public record CreateSellerRequestDTO(String createdBy,\n                                     String userName,\n                                     String name,\n                                     String email,\n                                     BigDecimal shippingCost,\n                                     String password,\n                                     SellerAddress sellerAddress) {\n}\n</code></pre>\n"},{"tags":["java","jtable"],"comments":[{"owner":{"account_id":23391725,"reputation":243,"user_id":17456295,"display_name":"Sawan Meshram"},"score":0,"creation_date":1696579251,"post_id":77242359,"comment_id":136173903,"body_markdown":"I will try to give answers on the basis of the question which I understand. \n\nI assume you don&#39;t want an insert duplicate movie value on JTable which got from the txtMovie field, then you can use some approach before sets value on JTable such as\n\nUsed Set collection to get unique value or read JTable to check if the value is present on the table.","body":"I will try to give answers on the basis of the question which I understand.   I assume you don&#39;t want an insert duplicate movie value on JTable which got from the txtMovie field, then you can use some approach before sets value on JTable such as  Used Set collection to get unique value or read JTable to check if the value is present on the table."}],"owner":{"account_id":29610274,"reputation":1,"user_id":22693700,"display_name":"b222n"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696602238,"creation_date":1696574993,"question_id":77242359,"body_markdown":"This is a jtable code that receives data in order when you click the insert button. What should I do if I get a duplicate value when I receive a value of txtMovie and get an alert message?\r\nthis is my code..\r\n\r\n    private void btnInsertActionPerformed(java.awt.event.ActionEvent evt{\r\n                                          \r\n        int iCntRow=0;\r\n        int iOrder=0;\r\n        int iGallery=0;\r\n        \r\n        iCntRow=jTable1.getRowCount();\r\n        for(int idx=0;idx&lt;jTable1.getRowCount();idx++){\r\n            if(jTable1.getValueAt(idx,0)==null){\r\n                iCntRow=idx;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        iOrder=Integer.parseInt(txtOrder.getText());\r\n        jTable1.setValueAt(iOrder, iCntRow, 0);\r\n        \r\n        \r\n        \r\n        jTable1.setValueAt(txtMovie.getText(), iCntRow, 1);\r\n  \r\n        iGallery=Integer.parseInt(txtGallery.getText());\r\n        jTable1.setValueAt(iGallery, iCntRow, 2);\r\n        \r\n        \r\n    } ","title":"Prevent adding duplicate data into JTable in Java(jtable)","body":"<p>This is a jtable code that receives data in order when you click the insert button. What should I do if I get a duplicate value when I receive a value of txtMovie and get an alert message?\nthis is my code..</p>\n<pre><code>private void btnInsertActionPerformed(java.awt.event.ActionEvent evt{\n                                      \n    int iCntRow=0;\n    int iOrder=0;\n    int iGallery=0;\n    \n    iCntRow=jTable1.getRowCount();\n    for(int idx=0;idx&lt;jTable1.getRowCount();idx++){\n        if(jTable1.getValueAt(idx,0)==null){\n            iCntRow=idx;\n            break;\n        }\n    }\n    \n    iOrder=Integer.parseInt(txtOrder.getText());\n    jTable1.setValueAt(iOrder, iCntRow, 0);\n    \n    \n    \n    jTable1.setValueAt(txtMovie.getText(), iCntRow, 1);\n\n    iGallery=Integer.parseInt(txtGallery.getText());\n    jTable1.setValueAt(iGallery, iCntRow, 2);\n    \n    \n} \n</code></pre>\n"},{"tags":["java","jasper-reports"],"answers":[{"tags":[],"owner":{"account_id":958762,"reputation":4773,"user_id":983559,"display_name":"dada67"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696601947,"creation_date":1696601947,"answer_id":77245209,"question_id":77198941,"body_markdown":"If you know in advance the subreport that the main report is using, you can compile the subreport into a JasperReport object (using the same code as for the main report), pass the JasperReport object as a parameter and use the parameter in the subreport expression.\r\n\r\nSomething like this:\r\n\r\n    JasperReports subreport = compileReport(&quot;subreport.jrxml&quot;);\r\n    ...\r\n    parameters.put(&quot;SUBREPORT&quot;, subreport);\r\n\r\nIn the report:\r\n\r\n    &lt;parameter name=&quot;SUBREPORT&quot; class=&quot;net.sf.jasperreports.engine.JasperReport&quot; isForPrompting=&quot;false&quot;&gt;\r\n        &lt;parameterDescription&gt;&lt;![CDATA[Subreport]]&gt;&lt;/parameterDescription&gt;\r\n    &lt;/parameter&gt;\r\n    ...\r\n    &lt;subreportExpression&gt;&lt;![CDATA[$P{SUBREPORT}]]&gt;&lt;/subreportExpression&gt;\r\n\r\n","title":"How to refer to subreport in main Jasper report if no jasper file is generated?","body":"<p>If you know in advance the subreport that the main report is using, you can compile the subreport into a JasperReport object (using the same code as for the main report), pass the JasperReport object as a parameter and use the parameter in the subreport expression.</p>\n<p>Something like this:</p>\n<pre><code>JasperReports subreport = compileReport(&quot;subreport.jrxml&quot;);\n...\nparameters.put(&quot;SUBREPORT&quot;, subreport);\n</code></pre>\n<p>In the report:</p>\n<pre><code>&lt;parameter name=&quot;SUBREPORT&quot; class=&quot;net.sf.jasperreports.engine.JasperReport&quot; isForPrompting=&quot;false&quot;&gt;\n    &lt;parameterDescription&gt;&lt;![CDATA[Subreport]]&gt;&lt;/parameterDescription&gt;\n&lt;/parameter&gt;\n...\n&lt;subreportExpression&gt;&lt;![CDATA[$P{SUBREPORT}]]&gt;&lt;/subreportExpression&gt;\n</code></pre>\n"}],"owner":{"account_id":15148347,"reputation":827,"user_id":10931326,"display_name":"user10931326"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696601947,"creation_date":1695948295,"question_id":77198941,"body_markdown":"In my Tomcat webapp I have a Java file that is responsible for loading and compiling Jasper jrxml files.\r\n\r\n```\r\nJasperReport jasperReport = reportMap.get(reportName);\r\nif (jasperReport == null) {\r\n\tsynchronized (reportMap) {\r\n\t\tjasperReport = reportMap.get(reportName);\r\n\t\tif (jasperReport == null) {\r\n\t\t\tInputStream in;\r\n\t\t\tif (reportName.contains(&quot;csv&quot;))\r\n\t\t\t\tin = getClass().getClassLoader().getResourceAsStream(\r\n\t\t\t\t        &quot;report/&quot; + reportName + &quot;_CSV.jrxml&quot;);\r\n\t\t\telse\r\n\t\t\t\tin = getClass().getClassLoader().getResourceAsStream(\r\n\t\t\t\t        &quot;report/&quot; + reportName + &quot;.jrxml&quot;);\r\n\t\t\tJasperDesign design = JRXmlLoader.load(in);\r\n\t\t\tjasperReport = JasperCompileManager.compileReport(design);\r\n\t\t\treportMap.put(reportName, jasperReport);\r\n\t\t}\r\n\t}\r\n}\r\nreturn jasperReport;\r\n```\r\n\r\nThis has worked fine so far because the report templates I inherited don&#39;t have subreports, but the problem I&#39;m facing now is that I&#39;m developing a new report template, and its requirements necessitate the use of subreports.\r\n\r\nThese are the steps I&#39;ve done so far:\r\n\r\n1. Created `subreport.jrxml` file in the same folder as all my other jrxml files - in this case, the `report` folder (i.e `report/subreport.jrxml`)\r\n\r\n2. Added the following parameter for the subreport in `mainreport.jrxml`:\r\n```\r\n&lt;parameter name=&quot;SUBREPORT_DATA&quot; class=&quot;java.util.List&quot; isForPrompting=&quot;false&quot;&gt;\r\n\t&lt;parameterDescription&gt;&lt;![CDATA[Subreport Data]]&gt;&lt;/parameterDescription&gt;\r\n&lt;/parameter&gt;\r\n```\r\n\r\n3. Added two subreport elements, one in the normal report detail band and the other in the no-data band:\r\n```\r\n&lt;subreport&gt;\r\n\t&lt;reportElement x=&quot;20&quot; y=&quot;150&quot; width=&quot;410&quot; height=&quot;60&quot;/&gt;\r\n\t&lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{SUBREPORT_DATA})]]&gt;&lt;/dataSourceExpression&gt;\r\n\t&lt;subreportExpression&gt;&lt;![CDATA[&quot;subreport.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\r\n&lt;/subreport&gt;\r\n```\r\n\r\nTo test whether the subreport is being displayed correctly, `subreport.jrxml` is all string stubs for now.\r\n\r\nWhen I test this in my webapp, I get the following exception:\r\n```\r\nCaused by: net.sf.jasperreports.engine.JRException: Resource not found at : subreport.jasper\r\n\tat net.sf.jasperreports.repo.RepositoryUtil.getResource(RepositoryUtil.java:155) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.repo.RepositoryUtil.getReport(RepositoryUtil.java:126) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:317) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:347) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:275) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:473) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillNoData(JRVerticalFiller.java:2192) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:207) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:765) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:84) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n\tat net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:624) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\r\n...\r\n```\r\n\r\nObviously the subreport expression is wrong, but I don&#39;t know what I should change it to (`report/subreport.jasper` didn&#39;t work either.) - I did a quick search of my file system and it seems like no jasper file is being generated?","title":"How to refer to subreport in main Jasper report if no jasper file is generated?","body":"<p>In my Tomcat webapp I have a Java file that is responsible for loading and compiling Jasper jrxml files.</p>\n<pre><code>JasperReport jasperReport = reportMap.get(reportName);\nif (jasperReport == null) {\n    synchronized (reportMap) {\n        jasperReport = reportMap.get(reportName);\n        if (jasperReport == null) {\n            InputStream in;\n            if (reportName.contains(&quot;csv&quot;))\n                in = getClass().getClassLoader().getResourceAsStream(\n                        &quot;report/&quot; + reportName + &quot;_CSV.jrxml&quot;);\n            else\n                in = getClass().getClassLoader().getResourceAsStream(\n                        &quot;report/&quot; + reportName + &quot;.jrxml&quot;);\n            JasperDesign design = JRXmlLoader.load(in);\n            jasperReport = JasperCompileManager.compileReport(design);\n            reportMap.put(reportName, jasperReport);\n        }\n    }\n}\nreturn jasperReport;\n</code></pre>\n<p>This has worked fine so far because the report templates I inherited don't have subreports, but the problem I'm facing now is that I'm developing a new report template, and its requirements necessitate the use of subreports.</p>\n<p>These are the steps I've done so far:</p>\n<ol>\n<li><p>Created <code>subreport.jrxml</code> file in the same folder as all my other jrxml files - in this case, the <code>report</code> folder (i.e <code>report/subreport.jrxml</code>)</p>\n</li>\n<li><p>Added the following parameter for the subreport in <code>mainreport.jrxml</code>:</p>\n</li>\n</ol>\n<pre><code>&lt;parameter name=&quot;SUBREPORT_DATA&quot; class=&quot;java.util.List&quot; isForPrompting=&quot;false&quot;&gt;\n    &lt;parameterDescription&gt;&lt;![CDATA[Subreport Data]]&gt;&lt;/parameterDescription&gt;\n&lt;/parameter&gt;\n</code></pre>\n<ol start=\"3\">\n<li>Added two subreport elements, one in the normal report detail band and the other in the no-data band:</li>\n</ol>\n<pre><code>&lt;subreport&gt;\n    &lt;reportElement x=&quot;20&quot; y=&quot;150&quot; width=&quot;410&quot; height=&quot;60&quot;/&gt;\n    &lt;dataSourceExpression&gt;&lt;![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($P{SUBREPORT_DATA})]]&gt;&lt;/dataSourceExpression&gt;\n    &lt;subreportExpression&gt;&lt;![CDATA[&quot;subreport.jasper&quot;]]&gt;&lt;/subreportExpression&gt;\n&lt;/subreport&gt;\n</code></pre>\n<p>To test whether the subreport is being displayed correctly, <code>subreport.jrxml</code> is all string stubs for now.</p>\n<p>When I test this in my webapp, I get the following exception:</p>\n<pre><code>Caused by: net.sf.jasperreports.engine.JRException: Resource not found at : subreport.jasper\n    at net.sf.jasperreports.repo.RepositoryUtil.getResource(RepositoryUtil.java:155) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.repo.RepositoryUtil.getReport(RepositoryUtil.java:126) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateReport(JRFillSubreport.java:317) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:347) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:275) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:257) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:473) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillNoData(JRVerticalFiller.java:2192) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:207) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:836) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:765) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:84) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:624) ~[oss-net-sf-jasperreports-4.1.3.jar:4.1.3]\n...\n</code></pre>\n<p>Obviously the subreport expression is wrong, but I don't know what I should change it to (<code>report/subreport.jasper</code> didn't work either.) - I did a quick search of my file system and it seems like no jasper file is being generated?</p>\n"},{"tags":["java","kubernetes","amazon-eks","pulumi"],"comments":[{"owner":{"account_id":324433,"reputation":12660,"user_id":645002,"accept_rate":55,"display_name":"jaxxstorm"},"score":0,"creation_date":1696600690,"post_id":77244661,"comment_id":136178024,"body_markdown":"Please post the full code, including imported dependencies","body":"Please post the full code, including imported dependencies"},{"owner":{"account_id":54359,"reputation":9223,"user_id":162622,"accept_rate":51,"display_name":"Kiva"},"score":0,"creation_date":1696601928,"post_id":77244661,"comment_id":136178296,"body_markdown":"done @jaxxstorm","body":"done @jaxxstorm"}],"owner":{"account_id":54359,"reputation":9223,"user_id":162622,"accept_rate":51,"display_name":"Kiva"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696601915,"creation_date":1696597214,"question_id":77244661,"body_markdown":"I&#39;m trying to PoC pulumi and the eks module.\r\n\r\nMy code is really simple for now but I have a weird exception:\r\n\r\n```java\r\nimport com.pulumi.eks.Cluster;\r\nimport com.pulumi.eks.ClusterArgs;\r\n\r\npublic class EKS {\r\n\r\npublic Cluster createEKS(Network network, Context ctx) {\r\n Role role = getClusterRole();\r\n\r\n var cluster = new Cluster(&quot;pulumi-cluster&quot;, ClusterArgs.builder()\r\n   .minSize(2)\r\n   .maxSize(5)\r\n   .desiredCapacity(2)\r\n   .vpcId(network.vpc().id())\r\n   .version(&quot;1.27&quot;)\r\n   .instanceType(&quot;t2.small&quot;)\r\n   .publicSubnetIds(network.subnetsEksId())\r\n   .privateSubnetIds(network.subnetsEksId())\r\n   .serviceRole(role)\r\n   .build());\r\n}\r\n\r\n    private Role getClusterRole() {\r\n        var role = new Role(&quot;pulumi-eks-role&quot;, RoleArgs.builder()\r\n                .assumeRolePolicy(\r\n                        &quot;&quot;&quot;\r\n                                {\r\n                                    &quot;Version&quot;: &quot;2012-10-17&quot;,\r\n                                    &quot;Statement&quot;: [\r\n                                        {\r\n                                            &quot;Effect&quot;: &quot;Allow&quot;,\r\n                                            &quot;Principal&quot;: {\r\n                                                &quot;Service&quot;: &quot;eks.amazonaws.com&quot;\r\n                                            },\r\n                                            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\r\n                                        }\r\n                                    ]\r\n                                }\r\n                                &quot;&quot;&quot;).build());\r\n\r\n        new RolePolicyAttachment(&quot;pulumi-eks-policy-attachment&quot;,\r\n                RolePolicyAttachmentArgs.builder()\r\n                        .policyArn(&quot;arn:aws:iam::aws:policy/AmazonEKSClusterPolicy&quot;)\r\n                        .role(role.id()).build());\r\n        return role;\r\n    }\r\n}\r\n```\r\nwhere network works fine and define my vpc / subnets and role an eks admin policy.\r\n\r\nWhen I run a `pulumi up`, I get the following:\r\n\r\n```java\r\njava.util.concurrent.CompletionException: java.lang.NoClassDefFoundError: com/pulumi/kubernetes/core_v1/ConfigMap\r\n    \tat java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)\r\n    \tat java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)\r\n    \tat java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:649)\r\n    \tat java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)\r\n    \tat java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843)\r\n    \tat java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808)\r\n    \tat java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)\r\n    Caused by: java.lang.NoClassDefFoundError: com/pulumi/kubernetes/core_v1/ConfigMap\r\n    \tat java.base/java.lang.Class.getDeclaredMethods0(Native Method)\r\n    \tat java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)\r\n    \tat java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)\r\n    \tat com.pulumi.serialization.internal.Converter.processSetters(Converter.java:851)\r\n    \tat com.pulumi.serialization.internal.Converter.collectSetters(Converter.java:847)\r\n    \tat com.pulumi.serialization.internal.Converter.checkTargetType(Converter.java:829)\r\n    \tat com.pulumi.serialization.internal.Converter.checkTargetType(Converter.java:675)\r\n    \tat com.pulumi.serialization.internal.Converter.convertValue(Converter.java:78)\r\n    \tat com.pulumi.core.internal.OutputCompletionSource.setValue(OutputCompletionSource.java:95)\r\n    \tat com.pulumi.deployment.internal.DeploymentImpl$ReadOrRegisterResourceInternal.lambda$completeResourceAsync$0(DeploymentImpl.java:1187)\r\n    \tat java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:646)\r\n    \t... 6 more\r\n    Caused by: java.lang.ClassNotFoundException: com.pulumi.kubernetes.core_v1.ConfigMap\r\n    \tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:593)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\r\n    \t... 17 more\r\n```\r\n\r\nI have a package from com.pulumi:kubernetes dependency which is `com.pulumi.kubernetes.core.v1.ConfigMap` but not with an *_*\r\n\r\nDo you know where this error comes from ?\r\n\r\npulumi version: v3.84.0\r\n\r\npulumi-kubernetes: 4.3.0\r\n\r\npulumi-eks: 1.0.3\r\n\r\npulumi-aws: 6.3.0\r\n\r\nkubectl: 1.28\r\n","title":"Pulumi: Class not found kubernetes.core_v1.ConfigMap and EKS cluster","body":"<p>I'm trying to PoC pulumi and the eks module.</p>\n<p>My code is really simple for now but I have a weird exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.pulumi.eks.Cluster;\nimport com.pulumi.eks.ClusterArgs;\n\npublic class EKS {\n\npublic Cluster createEKS(Network network, Context ctx) {\n Role role = getClusterRole();\n\n var cluster = new Cluster(&quot;pulumi-cluster&quot;, ClusterArgs.builder()\n   .minSize(2)\n   .maxSize(5)\n   .desiredCapacity(2)\n   .vpcId(network.vpc().id())\n   .version(&quot;1.27&quot;)\n   .instanceType(&quot;t2.small&quot;)\n   .publicSubnetIds(network.subnetsEksId())\n   .privateSubnetIds(network.subnetsEksId())\n   .serviceRole(role)\n   .build());\n}\n\n    private Role getClusterRole() {\n        var role = new Role(&quot;pulumi-eks-role&quot;, RoleArgs.builder()\n                .assumeRolePolicy(\n                        &quot;&quot;&quot;\n                                {\n                                    &quot;Version&quot;: &quot;2012-10-17&quot;,\n                                    &quot;Statement&quot;: [\n                                        {\n                                            &quot;Effect&quot;: &quot;Allow&quot;,\n                                            &quot;Principal&quot;: {\n                                                &quot;Service&quot;: &quot;eks.amazonaws.com&quot;\n                                            },\n                                            &quot;Action&quot;: &quot;sts:AssumeRole&quot;\n                                        }\n                                    ]\n                                }\n                                &quot;&quot;&quot;).build());\n\n        new RolePolicyAttachment(&quot;pulumi-eks-policy-attachment&quot;,\n                RolePolicyAttachmentArgs.builder()\n                        .policyArn(&quot;arn:aws:iam::aws:policy/AmazonEKSClusterPolicy&quot;)\n                        .role(role.id()).build());\n        return role;\n    }\n}\n</code></pre>\n<p>where network works fine and define my vpc / subnets and role an eks admin policy.</p>\n<p>When I run a <code>pulumi up</code>, I get the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.util.concurrent.CompletionException: java.lang.NoClassDefFoundError: com/pulumi/kubernetes/core_v1/ConfigMap\n        at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)\n        at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)\n        at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:649)\n        at java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)\n        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:387)\n        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1312)\n        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1843)\n        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1808)\n        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:188)\n    Caused by: java.lang.NoClassDefFoundError: com/pulumi/kubernetes/core_v1/ConfigMap\n        at java.base/java.lang.Class.getDeclaredMethods0(Native Method)\n        at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)\n        at java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)\n        at com.pulumi.serialization.internal.Converter.processSetters(Converter.java:851)\n        at com.pulumi.serialization.internal.Converter.collectSetters(Converter.java:847)\n        at com.pulumi.serialization.internal.Converter.checkTargetType(Converter.java:829)\n        at com.pulumi.serialization.internal.Converter.checkTargetType(Converter.java:675)\n        at com.pulumi.serialization.internal.Converter.convertValue(Converter.java:78)\n        at com.pulumi.core.internal.OutputCompletionSource.setValue(OutputCompletionSource.java:95)\n        at com.pulumi.deployment.internal.DeploymentImpl$ReadOrRegisterResourceInternal.lambda$completeResourceAsync$0(DeploymentImpl.java:1187)\n        at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(CompletableFuture.java:646)\n        ... 6 more\n    Caused by: java.lang.ClassNotFoundException: com.pulumi.kubernetes.core_v1.ConfigMap\n        at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:593)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)\n        ... 17 more\n</code></pre>\n<p>I have a package from com.pulumi:kubernetes dependency which is <code>com.pulumi.kubernetes.core.v1.ConfigMap</code> but not with an <em>_</em></p>\n<p>Do you know where this error comes from ?</p>\n<p>pulumi version: v3.84.0</p>\n<p>pulumi-kubernetes: 4.3.0</p>\n<p>pulumi-eks: 1.0.3</p>\n<p>pulumi-aws: 6.3.0</p>\n<p>kubectl: 1.28</p>\n"},{"tags":["java","linux","intellij-idea","mariadb","mysql-connector"],"comments":[{"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"score":0,"creation_date":1696592998,"post_id":77244166,"comment_id":136176387,"body_markdown":"Try following - https://stackoverflow.com/a/72752009/584420 if you have the mysql driver jar downloaded. Then register the driver and the rest of the steps. If you want to do maven way, follow the other answers of the same post.","body":"Try following - <a href=\"https://stackoverflow.com/a/72752009/584420\">stackoverflow.com/a/72752009/584420</a> if you have the mysql driver jar downloaded. Then register the driver and the rest of the steps. If you want to do maven way, follow the other answers of the same post."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1696593678,"post_id":77244166,"comment_id":136176501,"body_markdown":"If you use Gradle, then you shoudn&#39;t download and install and manipulate the classpath manually. The only thing you should do is to add the dependency to the gradle file (and reimport in IntelliJ).","body":"If you use Gradle, then you shoudn&#39;t download and install and manipulate the classpath manually. The only thing you should do is to add the dependency to the gradle file (and reimport in IntelliJ)."},{"owner":{"account_id":208830,"reputation":10240,"user_id":459557,"display_name":"vanje"},"score":0,"creation_date":1696594023,"post_id":77244166,"comment_id":136176568,"body_markdown":"You can search for the package like here: https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-client/3.2.0. The tabs below contain the exact code to add to your build file.","body":"You can search for the package like here: <a href=\"https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-client/3.2.0\" rel=\"nofollow noreferrer\">mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-cli&zwnj;&#8203;ent/&hellip;</a>. The tabs below contain the exact code to add to your build file."},{"owner":{"account_id":14354937,"reputation":11,"user_id":10468824,"display_name":"Max Pershin"},"score":0,"creation_date":1696594214,"post_id":77244166,"comment_id":136176603,"body_markdown":"@vanje - I feel myself really silly right now\n\nI could&#39;t find exact place where I could find gradle dependencies so I always skipped a mvnrepository.com thinking it&#39;s only about Maven\n\nThank you so much - adding just a one line solved my 8-hour problem","body":"@vanje - I feel myself really silly right now  I could&#39;t find exact place where I could find gradle dependencies so I always skipped a mvnrepository.com thinking it&#39;s only about Maven  Thank you so much - adding just a one line solved my 8-hour problem"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696601806,"post_id":77244166,"comment_id":136178265,"body_markdown":"`static final String DB_URL = &quot;jdbc:mariadb://localhost/testdb&quot;;` actually, if you&#39;re using mariadb-server","body":"<code>static final String DB_URL = &quot;jdbc:mariadb:&#47;&#47;localhost&#47;testdb&quot;;</code> actually, if you&#39;re using mariadb-server"}],"owner":{"account_id":14354937,"reputation":11,"user_id":10468824,"display_name":"Max Pershin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696609339,"answer_count":0,"score":0,"last_activity_date":1696601908,"creation_date":1696592675,"question_id":77244166,"body_markdown":"I am doing some minor project for my work using Java with IntelliJ IDEA as IDE and Gradle.  \r\nI decided to use MySQL database inside of my project.  \r\nI installed MySQL from Manjaro repository and choose default MariaDB\r\n\r\nInstallation and setup was successful - server working fine on my local machine and I can manipulate databases and tables from command line\r\n\r\nNext step for me was to add database to java.  \r\nTo do so I used \r\n`DriverManager class` from `java.sql.*`\r\n\r\nBTW this database will be used on my local machine only\r\n\r\nNext step was to upload driver.\r\n\r\nIt was a bit struggle for me because I was unsure which one to pick - `mysql-connector-j-8.1.0.jar` or `mariadb-java-client-3.2.0-sources.jar`\r\n\r\nI found an info that DriverManager will choose appropriate for me so it is not a big deal - so I downloaded both.\r\n\r\nThen I first met my problem - an error telling me that \r\n```\r\njava.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\r\n\tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:708)\r\n\tat java.sql/java.sql.DriverManager.getConnection(DriverManager.java:230)\r\n\tat DatabaseHandler.main(DatabaseHandler.java:11)\r\n```\r\n\r\nI checked breakpoints and find out that collection size where `DriverManager` stores all found drivers was equal to 0 so I thought that my problem is in `CLASSPATH` environment variable.\r\n\r\nHere is my code where I try to create simple interaction with DB:\r\n\r\n```\r\nimport java.sql.*;\r\n\r\npublic class DatabaseHandler {\r\n    static final String DB_URL = &quot;jdbc:mysql://localhost/testdb&quot;;\r\n    static final String USER = &quot;max&quot;;\r\n    static final String PASS = &quot;12345&quot;;\r\n    static final String QUERY = &quot;SELECT * FROM Users&quot;;\r\n\r\n    public static void main(String[] args) {\r\n        // Open a connection\r\n        try(Connection conn = DriverManager.getConnection(DB_URL, USER, PASS);\r\n            Statement stmt = conn.createStatement();\r\n            ResultSet rs = stmt.executeQuery(QUERY);) {\r\n            // Extract data from result set\r\n            while (rs.next()) {\r\n                // Retrieve by column name\r\n                System.out.print(&quot;ID: &quot; + rs.getInt(&quot;id&quot;));\r\n                System.out.print(&quot;, Age: &quot; + rs.getInt(&quot;age&quot;));\r\n                System.out.print(&quot;, First: &quot; + rs.getString(&quot;first&quot;));\r\n                System.out.println(&quot;, Last: &quot; + rs.getString(&quot;last&quot;));\r\n            }\r\n        } catch (SQLException e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nSo far I tried to set up `CLASSPATH` with\r\n`export CLASSPATH=/home/max/code/libs`.\r\n\r\nSo this path is where my jars are.  \r\nAlso I tried to add names of those jars after libs... Still same error\r\n\r\nI tried to copy those jars into java-related folder but still miss...\r\n\r\nI found out that IntelliJ itself has some kind of it&#39;s own IDEA_CLASSPATH or something but adding to this value also did nothing\r\n\r\nCould you please tell me in which direction should I think or where did I get things wrong?\r\n\r\nCurrently using Linux Manjaro / IntelliJ Idea / Gradle","title":"Can&#39;t set up connector for MySQL (MariaDB) in Java using IntelliJ on Linux (Manjaro)","body":"<p>I am doing some minor project for my work using Java with IntelliJ IDEA as IDE and Gradle.<br />\nI decided to use MySQL database inside of my project.<br />\nI installed MySQL from Manjaro repository and choose default MariaDB</p>\n<p>Installation and setup was successful - server working fine on my local machine and I can manipulate databases and tables from command line</p>\n<p>Next step for me was to add database to java.<br />\nTo do so I used\n<code>DriverManager class</code> from <code>java.sql.*</code></p>\n<p>BTW this database will be used on my local machine only</p>\n<p>Next step was to upload driver.</p>\n<p>It was a bit struggle for me because I was unsure which one to pick - <code>mysql-connector-j-8.1.0.jar</code> or <code>mariadb-java-client-3.2.0-sources.jar</code></p>\n<p>I found an info that DriverManager will choose appropriate for me so it is not a big deal - so I downloaded both.</p>\n<p>Then I first met my problem - an error telling me that</p>\n<pre><code>java.sql.SQLException: No suitable driver found for jdbc:mysql://localhost/testdb\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:708)\n    at java.sql/java.sql.DriverManager.getConnection(DriverManager.java:230)\n    at DatabaseHandler.main(DatabaseHandler.java:11)\n</code></pre>\n<p>I checked breakpoints and find out that collection size where <code>DriverManager</code> stores all found drivers was equal to 0 so I thought that my problem is in <code>CLASSPATH</code> environment variable.</p>\n<p>Here is my code where I try to create simple interaction with DB:</p>\n<pre><code>import java.sql.*;\n\npublic class DatabaseHandler {\n    static final String DB_URL = &quot;jdbc:mysql://localhost/testdb&quot;;\n    static final String USER = &quot;max&quot;;\n    static final String PASS = &quot;12345&quot;;\n    static final String QUERY = &quot;SELECT * FROM Users&quot;;\n\n    public static void main(String[] args) {\n        // Open a connection\n        try(Connection conn = DriverManager.getConnection(DB_URL, USER, PASS);\n            Statement stmt = conn.createStatement();\n            ResultSet rs = stmt.executeQuery(QUERY);) {\n            // Extract data from result set\n            while (rs.next()) {\n                // Retrieve by column name\n                System.out.print(&quot;ID: &quot; + rs.getInt(&quot;id&quot;));\n                System.out.print(&quot;, Age: &quot; + rs.getInt(&quot;age&quot;));\n                System.out.print(&quot;, First: &quot; + rs.getString(&quot;first&quot;));\n                System.out.println(&quot;, Last: &quot; + rs.getString(&quot;last&quot;));\n            }\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>So far I tried to set up <code>CLASSPATH</code> with\n<code>export CLASSPATH=/home/max/code/libs</code>.</p>\n<p>So this path is where my jars are.<br />\nAlso I tried to add names of those jars after libs... Still same error</p>\n<p>I tried to copy those jars into java-related folder but still miss...</p>\n<p>I found out that IntelliJ itself has some kind of it's own IDEA_CLASSPATH or something but adding to this value also did nothing</p>\n<p>Could you please tell me in which direction should I think or where did I get things wrong?</p>\n<p>Currently using Linux Manjaro / IntelliJ Idea / Gradle</p>\n"},{"tags":["java","spring-mvc","redis","pom.xml"],"answers":[{"tags":[],"owner":{"account_id":15361537,"reputation":1,"user_id":11082241,"display_name":"Eric"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1696601893,"creation_date":1696601893,"answer_id":77245199,"question_id":77245132,"body_markdown":"Your project may import multiple spring-context-support.jar.","title":"Java Spring MVC redis issue in Redis Cache manager","body":"<p>Your project may import multiple spring-context-support.jar.</p>\n"}],"owner":{"account_id":29381819,"reputation":3,"user_id":22512151,"display_name":"Ali Khan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696601893,"creation_date":1696601317,"question_id":77245132,"body_markdown":"I m trying to use Redis in Spring MVC. I have added Redis cache dependencies in `pom.xml` created configuration file for Redis but it keeps throwing error. Please see the error below.\r\n\r\n    `The type org.springframework.cache.transaction.AbstractTransactionSupportingCacheManager cannot be resolved. It is indirectly referenced from required type org.springframework.data.redis.cache.RedisCacheManager`\r\n\r\nThis error is generated from the configuration file below:\r\n\r\n\r\n        import org.springframework.context.annotation.Bean;\r\n        import org.springframework.context.annotation.Configuration;\r\n        import org.springframework.data.redis.cache.RedisCacheManager;\r\n        import org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\r\n        import org.springframework.data.redis.core.RedisTemplate;\r\n        import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;\r\n        import org.springframework.data.redis.serializer.StringRedisSerializer;\r\n\r\n        @Configuration\r\n        public class RedisConfig {\r\n            @Bean\r\n            public JedisConnectionFactory jedisConnectionFactory() {\r\n                JedisConnectionFactory factory = new JedisConnectionFactory();\r\n                factory.setHostName(&quot;&quot;);\r\n                factory.setPort(&quot;);\r\n                factory.setPassword(&quot;&quot;);\r\n                return factory;\r\n            }\r\n\r\n            @Bean\r\n            public RedisTemplate&lt;String, Object&gt; redisTemplate() {\r\n                RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\r\n                template.setConnectionFactory(jedisConnectionFactory());\r\n                template.setKeySerializer(new StringRedisSerializer());\r\n                template.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\r\n                return template;\r\n            }\r\n            \r\n            @Bean\r\n            public RedisCacheManager cacheManager() {\r\n                RedisCacheManager cacheManager = RedisCacheManager.builder(jedisConnectionFactory()).build(); // The erorr is generated on this line\r\n                return cacheManager;\r\n            }\r\n\r\n        }`\r\n\r\n\r\nThe error is generated on this code below:\r\n\r\n            @Bean\r\n            public RedisCacheManager cacheManager() {\r\n                RedisCacheManager cacheManager = RedisCacheManager.builder(jedisConnectionFactory()).build(); // The erorr is generated on this line\r\n                return cacheManager;\r\n            }\r\n\r\n\r\n**My pom.xml:**\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project &gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n        &lt;groupId&gt;xxxx&lt;/groupId&gt;\r\n        &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\r\n        &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n        &lt;packaging&gt;war&lt;/packaging&gt;\r\n        &lt;name&gt;xxxx Maven Webapp&lt;/name&gt;\r\n        &lt;!-- FIXME change it to the project&#39;s website --&gt;\r\n        &lt;url&gt;http://www.example.com&lt;/url&gt;\r\n        &lt;properties&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n            &lt;hsqldb.version&gt;1.8.0.10&lt;/hsqldb.version&gt;\r\n            &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n            \r\n        &lt;/properties&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- spring dependency --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\r\n                &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- jstl dependency --&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\r\n                &lt;dependency&gt;\r\n                    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n                    &lt;version&gt;4.0.1&lt;/version&gt;\r\n                    &lt;scope&gt;provided&lt;/scope&gt;\r\n                &lt;/dependency&gt;\r\n\r\n            &lt;!-- https://mvnrepository.com/artifact/com.squareup.okhttp3/okhttp --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\r\n                &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\r\n                &lt;version&gt;4.0.0-alpha01&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Spring Security Artifacts - START --&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-web --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n                &lt;version&gt;5.4.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-web --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n                &lt;version&gt;5.4.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\n            &lt;!-- Spring Boot Starter Data Redis --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\r\n                &lt;version&gt;2.5.2&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            \r\n        &lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\n\r\nPlease help me out. I m just a beginner and i cant understand how to resolve this issue and use redis. Thanks.\r\n\r\n\r\n\r\n","title":"Java Spring MVC redis issue in Redis Cache manager","body":"<p>I m trying to use Redis in Spring MVC. I have added Redis cache dependencies in <code>pom.xml</code> created configuration file for Redis but it keeps throwing error. Please see the error below.</p>\n<pre><code>`The type org.springframework.cache.transaction.AbstractTransactionSupportingCacheManager cannot be resolved. It is indirectly referenced from required type org.springframework.data.redis.cache.RedisCacheManager`\n</code></pre>\n<p>This error is generated from the configuration file below:</p>\n<pre><code>    import org.springframework.context.annotation.Bean;\n    import org.springframework.context.annotation.Configuration;\n    import org.springframework.data.redis.cache.RedisCacheManager;\n    import org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\n    import org.springframework.data.redis.core.RedisTemplate;\n    import org.springframework.data.redis.serializer.Jackson2JsonRedisSerializer;\n    import org.springframework.data.redis.serializer.StringRedisSerializer;\n\n    @Configuration\n    public class RedisConfig {\n        @Bean\n        public JedisConnectionFactory jedisConnectionFactory() {\n            JedisConnectionFactory factory = new JedisConnectionFactory();\n            factory.setHostName(&quot;&quot;);\n            factory.setPort(&quot;);\n            factory.setPassword(&quot;&quot;);\n            return factory;\n        }\n\n        @Bean\n        public RedisTemplate&lt;String, Object&gt; redisTemplate() {\n            RedisTemplate&lt;String, Object&gt; template = new RedisTemplate&lt;&gt;();\n            template.setConnectionFactory(jedisConnectionFactory());\n            template.setKeySerializer(new StringRedisSerializer());\n            template.setValueSerializer(new Jackson2JsonRedisSerializer&lt;&gt;(Object.class));\n            return template;\n        }\n        \n        @Bean\n        public RedisCacheManager cacheManager() {\n            RedisCacheManager cacheManager = RedisCacheManager.builder(jedisConnectionFactory()).build(); // The erorr is generated on this line\n            return cacheManager;\n        }\n\n    }`\n</code></pre>\n<p>The error is generated on this code below:</p>\n<pre><code>        @Bean\n        public RedisCacheManager cacheManager() {\n            RedisCacheManager cacheManager = RedisCacheManager.builder(jedisConnectionFactory()).build(); // The erorr is generated on this line\n            return cacheManager;\n        }\n</code></pre>\n<p><strong>My pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project &gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;xxxx&lt;/groupId&gt;\n    &lt;artifactId&gt;xxxx&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;xxxx Maven Webapp&lt;/name&gt;\n    &lt;!-- FIXME change it to the project's website --&gt;\n    &lt;url&gt;http://www.example.com&lt;/url&gt;\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;hsqldb.version&gt;1.8.0.10&lt;/hsqldb.version&gt;\n        &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n        \n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;!-- spring dependency --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-orm&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- jstl dependency --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n&lt;!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n                &lt;version&gt;4.0.1&lt;/version&gt;\n                &lt;scope&gt;provided&lt;/scope&gt;\n            &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.squareup.okhttp3/okhttp --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-alpha01&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Spring Security Artifacts - START --&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-web --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n            &lt;version&gt;5.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.springframework.security/spring-security-web --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;5.4.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/javax.xml.ws/jaxws-api --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-api&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Spring Boot Starter Data Redis --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;\n            &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Please help me out. I m just a beginner and i cant understand how to resolve this issue and use redis. Thanks.</p>\n"},{"tags":["java","spring","spring-boot","maven","spring-mvc"],"owner":{"account_id":29158271,"reputation":1,"user_id":22337573,"display_name":"Dev Greyneon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696601818,"creation_date":1696601818,"question_id":77245181,"body_markdown":"I&#39;ve created a custom SecurityExpressionRoot which has a method called hasAccess() where i provide module name and permission everything is working fine on local i am using the VSCode with Spring Boot Dashboard to run my application when i try to access any end point which has method on controller **@PreAuthorize(&quot;hasAccess(&#39;ModuleKey&#39;,&#39;Permission&#39;)&quot;)** is working fine and logic work fine but the issue is when i deploy my application on docker and try to access my end point which have the @PreAuthorize annomation is give error that the hasAccess function not found below is complete error detail which i get from docker container logs can any one help me how can i fix this issue is there anything related to docker side setting or i am missing any thing?\r\n\r\n\r\n```\r\n Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Failed to evaluate expression &#39;hasAccess(&#39;Module&#39;,&#39;Permission&#39;)&#39;] with root cause\r\norg.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method hasAccess(java.lang.String,java.lang.String) cannot be found on type org.springframework.security.access.expression.method.MethodSecurityExpressionRoot\r\n```\r\n\r\n\r\nI&#39;ve already check the classpath list on my jar file and i can see the class name AuthorizeRoot is present on the list which contain the hasAccess method I&#39;ve follow the below link to implement that\r\n\r\nhttps://stackoverflow.com/questions/58224516/spring-boot-configure-custom-methodsecurityexpressionoperations","title":"hasAccess Method not found in docker spring boot Custom SecurityExpressionRoot","body":"<p>I've created a custom SecurityExpressionRoot which has a method called hasAccess() where i provide module name and permission everything is working fine on local i am using the VSCode with Spring Boot Dashboard to run my application when i try to access any end point which has method on controller <strong>@PreAuthorize(&quot;hasAccess('ModuleKey','Permission')&quot;)</strong> is working fine and logic work fine but the issue is when i deploy my application on docker and try to access my end point which have the @PreAuthorize annomation is give error that the hasAccess function not found below is complete error detail which i get from docker container logs can any one help me how can i fix this issue is there anything related to docker side setting or i am missing any thing?</p>\n<pre><code> Servlet.service() for servlet [dispatcherServlet] in context with path [/api] threw exception [Request processing failed; nested exception is java.lang.IllegalArgumentException: Failed to evaluate expression 'hasAccess('Module','Permission')'] with root cause\norg.springframework.expression.spel.SpelEvaluationException: EL1004E: Method call: Method hasAccess(java.lang.String,java.lang.String) cannot be found on type org.springframework.security.access.expression.method.MethodSecurityExpressionRoot\n</code></pre>\n<p>I've already check the classpath list on my jar file and i can see the class name AuthorizeRoot is present on the list which contain the hasAccess method I've follow the below link to implement that</p>\n<p><a href=\"https://stackoverflow.com/questions/58224516/spring-boot-configure-custom-methodsecurityexpressionoperations\">Spring Boot: Configure custom MethodSecurityExpressionOperations?</a></p>\n"},{"tags":["java","optaplanner","timefold"],"answers":[{"tags":[],"owner":{"account_id":13441459,"reputation":1433,"user_id":9698517,"display_name":"Christopher Chianelli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696601499,"creation_date":1696601499,"answer_id":77245150,"question_id":77244148,"body_markdown":"The `ScoreDirector` does not check if a variable actually changed; when `afterVariableChanged` is called, it assumes that the variable did indeed change and incrementally update its internal score. Nothing bad will happen if the check is omitted, just a performance lost resulting from a pointless incremental update.\r\n\r\nSo, in general, if there is a possibility that the VariableListener/Move does not actually change the entity variable (i.e. `oldValue == newValue`), it is recommended to have the `if (oldValue != newValue)` check to improve performance.","title":"Is it recommended to check if a planning variable really changed before informing the ScoreDirector?","body":"<p>The <code>ScoreDirector</code> does not check if a variable actually changed; when <code>afterVariableChanged</code> is called, it assumes that the variable did indeed change and incrementally update its internal score. Nothing bad will happen if the check is omitted, just a performance lost resulting from a pointless incremental update.</p>\n<p>So, in general, if there is a possibility that the VariableListener/Move does not actually change the entity variable (i.e. <code>oldValue == newValue</code>), it is recommended to have the <code>if (oldValue != newValue)</code> check to improve performance.</p>\n"}],"owner":{"account_id":11139285,"reputation":301,"user_id":8176509,"display_name":"Jonas Erbe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77245150,"answer_count":1,"score":0,"last_activity_date":1696601499,"creation_date":1696592452,"question_id":77244148,"body_markdown":"Is it recommended to check if a planning variable really changed before informing the ScoreDirector or does the score director is doing that check internally before it start recalculating the store?\r\nE.G. Can I omit the if clause in the following example or does it have a performance impact?\r\n\r\n```  \r\nif (oldValue != newValue) {\r\n   scoreDirector.beforeVariableChanged(holdingJob, &quot;required&quot;);\r\n   holdingJob.setRequired(newValue);\r\n   scoreDirector.afterVariableChanged(holdingJob, &quot;required&quot;);\r\n}\r\n```\r\n\r\n","title":"Is it recommended to check if a planning variable really changed before informing the ScoreDirector?","body":"<p>Is it recommended to check if a planning variable really changed before informing the ScoreDirector or does the score director is doing that check internally before it start recalculating the store?\nE.G. Can I omit the if clause in the following example or does it have a performance impact?</p>\n<pre><code>if (oldValue != newValue) {\n   scoreDirector.beforeVariableChanged(holdingJob, &quot;required&quot;);\n   holdingJob.setRequired(newValue);\n   scoreDirector.afterVariableChanged(holdingJob, &quot;required&quot;);\n}\n</code></pre>\n"},{"tags":["java","image","metadata","iptc","icafe"],"comments":[{"owner":{"display_name":"user3973283"},"score":1,"creation_date":1528096740,"post_id":50669162,"comment_id":88360064,"body_markdown":"`NoClassDefFoundError: org/slf4j/LoggerFactory`, so you haven&#39;t put SLF4J (or a dependent) into the CLASSPATH. And there is NOTHING to do with the JPA API in that question ...","body":"<code>NoClassDefFoundError: org&#47;slf4j&#47;LoggerFactory</code>, so you haven&#39;t put SLF4J (or a dependent) into the CLASSPATH. And there is NOTHING to do with the JPA API in that question ..."},{"owner":{"account_id":1230714,"reputation":2655,"user_id":1195383,"accept_rate":86,"display_name":"dragon66"},"score":0,"creation_date":1528127110,"post_id":50669162,"comment_id":88378310,"body_markdown":"I answered your question asked under a closed issue in icafe. Billy Frost is correct. Besides the logging jar, you also need to add all the jar files in the lib folder except the two icafe related jars to you classpath.","body":"I answered your question asked under a closed issue in icafe. Billy Frost is correct. Besides the logging jar, you also need to add all the jar files in the lib folder except the two icafe related jars to you classpath."},{"owner":{"account_id":11087913,"reputation":33,"user_id":8140908,"display_name":"Ibrahim Rajabli"},"score":0,"creation_date":1528127527,"post_id":50669162,"comment_id":88378556,"body_markdown":"thanks all. ) dragon66 yes you answerd. :)","body":"thanks all. ) dragon66 yes you answerd. :)"},{"owner":{"account_id":11087913,"reputation":33,"user_id":8140908,"display_name":"Ibrahim Rajabli"},"score":0,"creation_date":1528155514,"post_id":50669162,"comment_id":88390046,"body_markdown":"yes. you are right. bu i can&#39;t find example about icafe. and have to write code apache common imaging. now i can not finish my code. a little bit difficult for me. my task edit JPG file IPTC keywords and Title.","body":"yes. you are right. bu i can&#39;t find example about icafe. and have to write code apache common imaging. now i can not finish my code. a little bit difficult for me. my task edit JPG file IPTC keywords and Title."},{"owner":{"account_id":1230714,"reputation":2655,"user_id":1195383,"accept_rate":86,"display_name":"dragon66"},"score":0,"creation_date":1528348750,"post_id":50669162,"comment_id":88474587,"body_markdown":"See my answer below. If you have other issues, let me know.","body":"See my answer below. If you have other issues, let me know."}],"answers":[{"tags":[],"owner":{"account_id":1230714,"reputation":2655,"user_id":1195383,"accept_rate":86,"display_name":"dragon66"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1528370279,"creation_date":1528345873,"answer_id":50732994,"question_id":50669162,"body_markdown":"Not sure what exactly you want but here is what ICAFE can do with IPTC metadata:\r\n\r\n - Read IPTC from image.\r\n - Insert IPTC into image or update IPTC of existing image.\r\n - Delete IPTC from image.\r\n\r\nFor reading IPTC, here is an example:\r\n\r\n        import java.io.IOException;\r\n        import java.util.List;\r\n        import java.util.Map;\r\n        import java.util.Iterator;\r\n    \r\n        import com.icafe4j.image.meta.Metadata;\r\n        import com.icafe4j.image.meta.MetadataEntry;\r\n        import com.icafe4j.image.meta.MetadataType;\r\n        import com.icafe4j.image.meta.iptc.IPTC;\r\n    \r\n        public class ExtractIPTC {\r\n    \r\n            public static void main(String[] args) throws IOException {\r\n                Map&lt;MetadataType, Metadata&gt; metadataMap = Metadata.readMetadata(args[0]);\r\n                IPTC iptc = (IPTC)metadataMap.get(MetadataType.IPTC);\r\n    \r\n                if(iptc != null) {\r\n                    Iterator&lt;MetadataEntry&gt; iterator = iptc.iterator();\r\n    \r\n                    while(iterator.hasNext()) {\r\n                        MetadataEntry item = iterator.next();\r\n                        printMetadata(item, &quot;&quot;, &quot;     &quot;);\r\n                    }\r\n                }   \r\n            }\r\n            private void printMetadata(MetadataEntry entry, String indent, String increment) {\r\n                logger.info(indent + entry.getKey() (StringUtils.isNullOrEmpty(entry.getValue())? &quot;&quot; : &quot;: &quot; + entry.getValue()));\r\n                if(entry.isMetadataEntryGroup()) {\r\n                     indent += increment;\r\n                     Collection&lt;MetadataEntry&gt; entries = entry.getMetadataEntries();\r\n                     for(MetadataEntry e : entries) {\r\n                        printMetadata(e, indent, increment);\r\n                     }          \r\n                }\r\n            }   \r\n        }\r\n\r\nFor insert/update IPTC, here is an example:\r\n\r\n        import java.io.IOException;\r\n        import java.util.List;\r\n        import java.io.FileInputStream;\r\n        import java.io.FileOutputStream;\r\n    \r\n        import com.icafe4j.image.meta.Metadata;\r\n        import com.icafe4j.image.meta.MetadataEntry;\r\n        import com.icafe4j.image.meta.MetadataType;\r\n        import com.icafe4j.image.meta.iptc.IPTCDataSet;\r\n        import com.icafe4j.image.meta.iptc.IPTCApplicationTag;\r\n    \r\n        public class InsertIPTC {\r\n    \r\n            public static void main(String[] args) throws IOException {\r\n               FileInputStream fin = new FileInputStream(&quot;C:/Users/rajab/Desktop/test/ibo.jpeg&quot;);\r\n               FileOutputStream fout = new FileOutputStream(&quot;C:/Users/rajab/Desktop/test/ibo/ibo.jpeg&quot;);\r\n\t\t\r\n\t\t       Metadata.insertIPTC(fin, fout, createIPTCDataSet(), true);\r\n            }\r\n            private static List&lt;IPTCDataSet&gt; createIPTCDataSet() {\r\n\t            List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\r\n\t            iptcs.add(new IPTCDataSet(IPTCApplicationTag.COPYRIGHT_NOTICE, &quot;Copyright 2014-2016, yuwen_66@yahoo.com&quot;));\r\n\t            iptcs.add(new IPTCDataSet(IPTCApplicationTag.OBJECT_NAME, &quot;ICAFE&quot;));\r\n\t            iptcs.add(new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, &quot;Welcome &#39;icafe&#39; user!&quot;));\r\n\t\r\n\t            return iptcs;\r\n            }\r\n        }\r\n\r\nThe above example uses Metadata.insertIPTC instead of Metadata.insertMetadata because we need one more boolean parameter. If set to true, it will keep the existing IPTC data and only update the those we want. Some of the IPTC entries allow multiple values. In that case, we only append/add the new ones. For other unique entries, they will be replaced by the new ones.\r\n\r\nLooks like you want to add key words and title. In your question, you already showed code to insert key words and in order to insert title, use OBJECT_NAME which can be found in the example above.\r\n\r\nNote: you can add multiple key words as well. Some softwares can only handle one key words record. In that case, you can put all the key words in one record separated by semi-colon instead of insert multiple entries.","title":"Read /Edit / Write jpg IPTC metadata in Java","body":"<p>Not sure what exactly you want but here is what ICAFE can do with IPTC metadata:</p>\n\n<ul>\n<li>Read IPTC from image.</li>\n<li>Insert IPTC into image or update IPTC of existing image.</li>\n<li>Delete IPTC from image.</li>\n</ul>\n\n<p>For reading IPTC, here is an example:</p>\n\n<pre><code>    import java.io.IOException;\n    import java.util.List;\n    import java.util.Map;\n    import java.util.Iterator;\n\n    import com.icafe4j.image.meta.Metadata;\n    import com.icafe4j.image.meta.MetadataEntry;\n    import com.icafe4j.image.meta.MetadataType;\n    import com.icafe4j.image.meta.iptc.IPTC;\n\n    public class ExtractIPTC {\n\n        public static void main(String[] args) throws IOException {\n            Map&lt;MetadataType, Metadata&gt; metadataMap = Metadata.readMetadata(args[0]);\n            IPTC iptc = (IPTC)metadataMap.get(MetadataType.IPTC);\n\n            if(iptc != null) {\n                Iterator&lt;MetadataEntry&gt; iterator = iptc.iterator();\n\n                while(iterator.hasNext()) {\n                    MetadataEntry item = iterator.next();\n                    printMetadata(item, \"\", \"     \");\n                }\n            }   \n        }\n        private void printMetadata(MetadataEntry entry, String indent, String increment) {\n            logger.info(indent + entry.getKey() (StringUtils.isNullOrEmpty(entry.getValue())? \"\" : \": \" + entry.getValue()));\n            if(entry.isMetadataEntryGroup()) {\n                 indent += increment;\n                 Collection&lt;MetadataEntry&gt; entries = entry.getMetadataEntries();\n                 for(MetadataEntry e : entries) {\n                    printMetadata(e, indent, increment);\n                 }          \n            }\n        }   \n    }\n</code></pre>\n\n<p>For insert/update IPTC, here is an example:</p>\n\n<pre><code>    import java.io.IOException;\n    import java.util.List;\n    import java.io.FileInputStream;\n    import java.io.FileOutputStream;\n\n    import com.icafe4j.image.meta.Metadata;\n    import com.icafe4j.image.meta.MetadataEntry;\n    import com.icafe4j.image.meta.MetadataType;\n    import com.icafe4j.image.meta.iptc.IPTCDataSet;\n    import com.icafe4j.image.meta.iptc.IPTCApplicationTag;\n\n    public class InsertIPTC {\n\n        public static void main(String[] args) throws IOException {\n           FileInputStream fin = new FileInputStream(\"C:/Users/rajab/Desktop/test/ibo.jpeg\");\n           FileOutputStream fout = new FileOutputStream(\"C:/Users/rajab/Desktop/test/ibo/ibo.jpeg\");\n\n           Metadata.insertIPTC(fin, fout, createIPTCDataSet(), true);\n        }\n        private static List&lt;IPTCDataSet&gt; createIPTCDataSet() {\n            List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\n            iptcs.add(new IPTCDataSet(IPTCApplicationTag.COPYRIGHT_NOTICE, \"Copyright 2014-2016, yuwen_66@yahoo.com\"));\n            iptcs.add(new IPTCDataSet(IPTCApplicationTag.OBJECT_NAME, \"ICAFE\"));\n            iptcs.add(new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, \"Welcome 'icafe' user!\"));\n\n            return iptcs;\n        }\n    }\n</code></pre>\n\n<p>The above example uses Metadata.insertIPTC instead of Metadata.insertMetadata because we need one more boolean parameter. If set to true, it will keep the existing IPTC data and only update the those we want. Some of the IPTC entries allow multiple values. In that case, we only append/add the new ones. For other unique entries, they will be replaced by the new ones.</p>\n\n<p>Looks like you want to add key words and title. In your question, you already showed code to insert key words and in order to insert title, use OBJECT_NAME which can be found in the example above.</p>\n\n<p>Note: you can add multiple key words as well. Some softwares can only handle one key words record. In that case, you can put all the key words in one record separated by semi-colon instead of insert multiple entries.</p>\n"},{"tags":[],"owner":{"account_id":5267841,"reputation":781,"user_id":4207141,"display_name":"max"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696601424,"creation_date":1696601424,"answer_id":77245141,"question_id":50669162,"body_markdown":"i tried the second example (insert) a little bit simplified\r\n\r\n    enter code here\r\n    public class Foto_Read_Write_IPTC_icafe\r\n    {\r\n      public static void main(String[] args)\r\n      {\r\n        try\r\n        {\r\n          FileInputStream  fin = new FileInputStream(&quot;C:\\\\IPTC-test\\\\IPTC-Google-test-image.jpg&quot;);\r\n          FileOutputStream fout = new FileOutputStream(&quot;C:\\\\IPTC-test\\\\IPTC-Google-test-image.jpg&quot;);\r\n\r\n      BufferedInputStream bis = new BufferedInputStream(fin);\r\n      BufferedOutputStream bos = new BufferedOutputStream(fout);\r\n\r\n      List&lt;IPTCDataSet&gt; dataset = createIPTCDataSet();\r\n      Metadata.insertIPTC(bis, bos, dataset, true);   //  Error while reading bytes into buffer !\r\n        }\r\n        catch(FileNotFoundException ex)\r\n        {\r\n          ex.printStackTrace();\r\n        }\r\n        catch(IOException ex)\r\n        {\r\n          ex.printStackTrace();\r\n        }\r\n     }  // end main\r\n  \r\n     private static List&lt;IPTCDataSet&gt; createIPTCDataSet()\r\n     {\r\n       IPTCDataSet byline_title = new \r\n       IPTCDataSet(IPTCApplicationTag.BY_LINE_TITLE, &quot;byline title&quot;);\r\n       IPTCDataSet keywords = new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, \r\n       &quot;keyword1, keyword2&quot;);\r\n\r\n       List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\r\n       iptcs.add(byline_title);\r\n       iptcs.add(keywords);\r\n\r\n       return iptcs;\r\n     }\r\n   }\r\n\r\n","title":"Read /Edit / Write jpg IPTC metadata in Java","body":"<p>i tried the second example (insert) a little bit simplified</p>\n<pre><code>enter code here\npublic class Foto_Read_Write_IPTC_icafe\n{\n  public static void main(String[] args)\n  {\n    try\n    {\n      FileInputStream  fin = new FileInputStream(&quot;C:\\\\IPTC-test\\\\IPTC-Google-test-image.jpg&quot;);\n      FileOutputStream fout = new FileOutputStream(&quot;C:\\\\IPTC-test\\\\IPTC-Google-test-image.jpg&quot;);\n\n  BufferedInputStream bis = new BufferedInputStream(fin);\n  BufferedOutputStream bos = new BufferedOutputStream(fout);\n\n  List&lt;IPTCDataSet&gt; dataset = createIPTCDataSet();\n  Metadata.insertIPTC(bis, bos, dataset, true);   //  Error while reading bytes into buffer !\n    }\n    catch(FileNotFoundException ex)\n    {\n      ex.printStackTrace();\n    }\n    catch(IOException ex)\n    {\n      ex.printStackTrace();\n    }\n }  // end main\n\n private static List&lt;IPTCDataSet&gt; createIPTCDataSet()\n {\n   IPTCDataSet byline_title = new \n   IPTCDataSet(IPTCApplicationTag.BY_LINE_TITLE, &quot;byline title&quot;);\n   IPTCDataSet keywords = new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, \n   &quot;keyword1, keyword2&quot;);\n\n   List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\n   iptcs.add(byline_title);\n   iptcs.add(keywords);\n\n   return iptcs;\n }\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":11087913,"reputation":33,"user_id":8140908,"display_name":"Ibrahim Rajabli"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1592,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":50732994,"answer_count":2,"score":2,"last_activity_date":1696601424,"creation_date":1528047249,"question_id":50669162,"body_markdown":"I am using Apache Commons but it is not enough for me because it is so old technology. So ,i found [iCafe][1] and it seems better but I am having the error below. Any idea what i am doing wrong?\r\n\r\n          private static List&lt;IPTCDataSet&gt; createIPTCDataSet() {\r\n          \t  List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\r\n          \t  iptcs.add(new IPTCDataSet(IPTCApplicationTag.COPYRIGHT_NOTICE, &quot;Copyright 2014-2016, yuwen_66@yahoo.com&quot;));\r\n          \t  iptcs.add(new IPTCDataSet(IPTCApplicationTag.CATEGORY, &quot;ICAFE&quot;));\r\n          \t  iptcs.add(new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, &quot;Welcome &#39;icafe&#39; user!&quot;));\r\n          \t\r\n          \t  return iptcs;\r\n          }\r\n        \r\n          private static IPTC createIPTC() {\r\n          \tIPTC iptc = new IPTC();\r\n          \tiptc.addDataSets(createIPTCDataSet());\r\n          \treturn iptc;\r\n          }\r\n            \r\n          public static void main(String[] args) throws  IOException {\r\n    \r\n            FileInputStream fin = new FileInputStream(&quot;C:/Users/rajab/Desktop/test/ibo.jpeg&quot;);\r\n            FileOutputStream fout = new FileOutputStream(&quot;C:/Users/rajab/Desktop/test/ibo/ibo.jpeg&quot;);\r\n    \r\n            List&lt;Metadata&gt; metaList = new ArrayList&lt;Metadata&gt;();\r\n            //metaList.add(populateExif(TiffExif.class));\r\n            metaList.add(createIPTC());\r\n            metaList.add(new Comments(Arrays.asList(&quot;Comment1&quot;, &quot;Comment2&quot;)));\r\n      \r\n            Metadata.insertMetadata(metaList, fin, fout);\r\n        }\r\n    }\r\n\r\n**and my EXCEPTION**\r\n\r\n    \r\n\r\n&gt; run:\r\n&gt;     Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory\r\n&gt;     \tat com.icafe4j.image.meta.Metadata.&lt;clinit&gt;(Unknown Source)\r\n&gt;     \tat vectorcleaner.Metadata1.populateExif(Metadata1.java:41)\r\n&gt;     \tat vectorcleaner.Metadata1.main(Metadata1.java:127)\r\n&gt;     Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory\r\n&gt;     \tat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n&gt;     \tat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n&gt;     \tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\r\n&gt;     \tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n&gt;     \t... 3 more\r\n&gt;     C:\\Users\\rajab\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53:\r\n&gt; Java returned: 1\r\n&gt;     BUILD FAILED (total time: 0 seconds)\r\n\r\n\r\n  [1]: https://github.com/dragon66/icafe","title":"Read /Edit / Write jpg IPTC metadata in Java","body":"<p>I am using Apache Commons but it is not enough for me because it is so old technology. So ,i found <a href=\"https://github.com/dragon66/icafe\" rel=\"nofollow noreferrer\">iCafe</a> and it seems better but I am having the error below. Any idea what i am doing wrong?</p>\n\n<pre><code>      private static List&lt;IPTCDataSet&gt; createIPTCDataSet() {\n          List&lt;IPTCDataSet&gt; iptcs = new ArrayList&lt;IPTCDataSet&gt;();\n          iptcs.add(new IPTCDataSet(IPTCApplicationTag.COPYRIGHT_NOTICE, \"Copyright 2014-2016, yuwen_66@yahoo.com\"));\n          iptcs.add(new IPTCDataSet(IPTCApplicationTag.CATEGORY, \"ICAFE\"));\n          iptcs.add(new IPTCDataSet(IPTCApplicationTag.KEY_WORDS, \"Welcome 'icafe' user!\"));\n\n          return iptcs;\n      }\n\n      private static IPTC createIPTC() {\n        IPTC iptc = new IPTC();\n        iptc.addDataSets(createIPTCDataSet());\n        return iptc;\n      }\n\n      public static void main(String[] args) throws  IOException {\n\n        FileInputStream fin = new FileInputStream(\"C:/Users/rajab/Desktop/test/ibo.jpeg\");\n        FileOutputStream fout = new FileOutputStream(\"C:/Users/rajab/Desktop/test/ibo/ibo.jpeg\");\n\n        List&lt;Metadata&gt; metaList = new ArrayList&lt;Metadata&gt;();\n        //metaList.add(populateExif(TiffExif.class));\n        metaList.add(createIPTC());\n        metaList.add(new Comments(Arrays.asList(\"Comment1\", \"Comment2\")));\n\n        Metadata.insertMetadata(metaList, fin, fout);\n    }\n}\n</code></pre>\n\n<p><strong>and my EXCEPTION</strong></p>\n\n<blockquote>\n  <p>run:\n      Exception in thread \"main\" java.lang.NoClassDefFoundError: org/slf4j/LoggerFactory\n        at com.icafe4j.image.meta.Metadata.(Unknown Source)\n        at vectorcleaner.Metadata1.populateExif(Metadata1.java:41)\n        at vectorcleaner.Metadata1.main(Metadata1.java:127)\n      Caused by: java.lang.ClassNotFoundException: org.slf4j.LoggerFactory\n        at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\n        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:349)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n        ... 3 more\n      C:\\Users\\rajab\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53:\n  Java returned: 1\n      BUILD FAILED (total time: 0 seconds)</p>\n</blockquote>\n"},{"tags":["java","file","cross-platform"],"answers":[{"tags":[],"owner":{"account_id":136987,"reputation":494,"user_id":340881,"display_name":"Steven Ourada"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1282575704,"creation_date":1282575704,"answer_id":3548800,"question_id":3548775,"body_markdown":"Java is pretty smart about paths in File objects. I just use something like &quot;../foo/bar&quot; and it works in those two platforms plus MacOSX.","title":"Platform independent paths in Java","body":"<p>Java is pretty smart about paths in File objects. I just use something like \"../foo/bar\" and it works in those two platforms plus MacOSX.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":3,"up_vote_count":62,"is_accepted":true,"score":59,"last_activity_date":1438195796,"creation_date":1282575818,"answer_id":3548818,"question_id":3548775,"body_markdown":"The [`File`][1] class contains the following public members that you can use for platform specific file paths:\r\n\r\n&gt;`static String\tpathSeparator `:  \r\n   The system-dependent path-separator character, represented as a string for convenience.  \r\n`static char\tpathSeparatorChar `:  \r\n   The system-dependent path-separator character.  \r\n`static String\tseparator `:  \r\n    The system-dependent default name-separator character, represented as a string for convenience.\r\n`static char\tseparatorChar `:  \r\n    The system-dependent default name-separator character.\r\n\r\n\r\n[1]: http://docs.oracle.com/javase/8/docs/api/java/io/File.html","title":"Platform independent paths in Java","body":"<p>The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/File.html\" rel=\"noreferrer\"><code>File</code></a> class contains the following public members that you can use for platform specific file paths:</p>\n\n<blockquote>\n  <p><code>static String pathSeparator</code>:<br>\n     The system-dependent path-separator character, represented as a string for convenience.<br>\n  <code>static char    pathSeparatorChar</code>:<br>\n     The system-dependent path-separator character.<br>\n  <code>static String  separator</code>:<br>\n      The system-dependent default name-separator character, represented as a string for convenience.\n  <code>static char    separatorChar</code>:<br>\n      The system-dependent default name-separator character.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":185700,"reputation":91879,"user_id":422597,"display_name":"Colin Hebert"},"down_vote_count":2,"up_vote_count":20,"is_accepted":false,"score":18,"last_activity_date":1467796176,"creation_date":1282575820,"answer_id":3548819,"question_id":3548775,"body_markdown":"You can use any path separator in Java, it will work on both Unix and Windows.\r\nIf you still want to use the system path separator there is the [`File.separator`][1] property which will give you the right one depending on the *current* system.\r\n\r\nFor the root, you can use [`listRoots()`][2] which gives you an array of root, there will be only one element on Unix systems, and as many as you have drives on Windows.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/io/File.html#separator\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/io/File.html#listRoots--","title":"Platform independent paths in Java","body":"<p>You can use any path separator in Java, it will work on both Unix and Windows.\nIf you still want to use the system path separator there is the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html#separator\" rel=\"noreferrer\"><code>File.separator</code></a> property which will give you the right one depending on the <em>current</em> system.</p>\n\n<p>For the root, you can use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/File.html#listRoots--\" rel=\"noreferrer\"><code>listRoots()</code></a> which gives you an array of root, there will be only one element on Unix systems, and as many as you have drives on Windows.</p>\n"},{"tags":[],"owner":{"account_id":173378,"reputation":4592,"user_id":402008,"accept_rate":100,"display_name":"Jeroen Rosenberg"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1696601321,"creation_date":1282575903,"answer_id":3548834,"question_id":3548775,"body_markdown":"You can use the static field `File.separator` to retrieve the platform specific separator character for file paths","title":"Platform independent paths in Java","body":"<p>You can use the static field <code>File.separator</code> to retrieve the platform specific separator character for file paths</p>\n"},{"tags":[],"owner":{"account_id":31682,"reputation":22471,"user_id":87197,"accept_rate":81,"display_name":"Chris Dennett"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1282577151,"creation_date":1282577151,"answer_id":3549023,"question_id":3548775,"body_markdown":"Personally, I like to use the Path class from Eclipse for handling paths in general, which you can just use standalone with few modifications as it&#39;s quite isolated.\r\n\r\nhttp://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse.equinox/common/3.5.0/org/eclipse/core/runtime/Path.java/?v=source","title":"Platform independent paths in Java","body":"<p>Personally, I like to use the Path class from Eclipse for handling paths in general, which you can just use standalone with few modifications as it's quite isolated.</p>\n\n<p><a href=\"http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse.equinox/common/3.5.0/org/eclipse/core/runtime/Path.java/?v=source\" rel=\"nofollow noreferrer\">http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.eclipse.equinox/common/3.5.0/org/eclipse/core/runtime/Path.java/?v=source</a></p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":11,"up_vote_count":141,"is_accepted":false,"score":130,"last_activity_date":1604396851,"creation_date":1282636322,"answer_id":3554456,"question_id":3548775,"body_markdown":"Just use `/`. I&#39;ve been using it for 23.5 years. Never a problem.","title":"Platform independent paths in Java","body":"<p>Just use <code>/</code>. I've been using it for 23.5 years. Never a problem.</p>\n"},{"tags":[],"owner":{"account_id":1183661,"reputation":633,"user_id":1158046,"accept_rate":100,"display_name":"ccDict"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1531250964,"creation_date":1418300056,"answer_id":27422642,"question_id":3548775,"body_markdown":"java 7 also supports the use of [`Paths`](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html) here\r\n\r\n&gt; The Path is obtained by invoking the getPath method of the default FileSystem.\r\n\r\nYou then may get a file from it by calling:\r\n     \r\n    File fileSystemObtainedFile = Paths.get(&quot;C:\\\\foo\\\\bar.txt&quot;).toFile();","title":"Platform independent paths in Java","body":"<p>java 7 also supports the use of <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html\" rel=\"nofollow noreferrer\"><code>Paths</code></a> here</p>\n\n<blockquote>\n  <p>The Path is obtained by invoking the getPath method of the default FileSystem.</p>\n</blockquote>\n\n<p>You then may get a file from it by calling:</p>\n\n<pre><code>File fileSystemObtainedFile = Paths.get(\"C:\\\\foo\\\\bar.txt\").toFile();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17093622,"reputation":29,"user_id":12369151,"display_name":"NotAJavaGuy"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1573682585,"creation_date":1573677448,"answer_id":58845250,"question_id":3548775,"body_markdown":"Only 10 years too late....\r\nThe &quot;It doesn&#39;t matter just use &#39;/&#39;&quot; is only half true (ok, three quarters).  You have to think about where your data is coming from.\r\n\r\nIf you get a path in Java, it will use &#39;/&#39;\r\nIf you create a path in Java it will understand &#39;/&#39;\r\n\r\nBut what about paths that are input to your program?\r\n\r\nSuppose I have a series of scripts that create a config (Properties) file.  Suppose one of the config variables is INTERESTING_FILE, and we generate this to be a filename including path.  Now suppose I want to extract the actual Filename from that, so I say \r\n\r\n    String[] filename = INTERESTING_FILE.split(&quot;/&quot;);\r\n\r\nThis will misbehave on Windows Systems, however\r\n\r\n    String[] filename = INTERESTING_FILE.split(pathSeparator);\r\n\r\nwill work (as will washing it through the Paths class).\r\n\r\nI guess the point is, I wouldn&#39;t assume &#39;/&#39; is going to work in every case.","title":"Platform independent paths in Java","body":"<p>Only 10 years too late....\nThe \"It doesn't matter just use '/'\" is only half true (ok, three quarters).  You have to think about where your data is coming from.</p>\n\n<p>If you get a path in Java, it will use '/'\nIf you create a path in Java it will understand '/'</p>\n\n<p>But what about paths that are input to your program?</p>\n\n<p>Suppose I have a series of scripts that create a config (Properties) file.  Suppose one of the config variables is INTERESTING_FILE, and we generate this to be a filename including path.  Now suppose I want to extract the actual Filename from that, so I say </p>\n\n<pre><code>String[] filename = INTERESTING_FILE.split(\"/\");\n</code></pre>\n\n<p>This will misbehave on Windows Systems, however</p>\n\n<pre><code>String[] filename = INTERESTING_FILE.split(pathSeparator);\n</code></pre>\n\n<p>will work (as will washing it through the Paths class).</p>\n\n<p>I guess the point is, I wouldn't assume '/' is going to work in every case.</p>\n"}],"owner":{"account_id":128283,"reputation":973,"user_id":326009,"accept_rate":50,"display_name":"jakewins"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":117296,"favorite_count":0,"down_vote_count":0,"up_vote_count":84,"accepted_answer_id":3548818,"answer_count":8,"score":84,"last_activity_date":1696601321,"creation_date":1282575564,"question_id":3548775,"body_markdown":"I know the relative path of a file and want to handle it as a `File` object on both Linux and Windows. \r\n\r\nWhat is the best way to specify platform-independent paths in Java?","title":"Platform independent paths in Java","body":"<p>I know the relative path of a file and want to handle it as a <code>File</code> object on both Linux and Windows. </p>\n\n<p>What is the best way to specify platform-independent paths in Java?</p>\n"},{"tags":["java","selenium-webdriver","testing","appium","lambdatest"],"owner":{"account_id":19227669,"reputation":7,"user_id":14050201,"display_name":"Leonardo Aros U"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696600890,"creation_date":1691505687,"question_id":76860641,"body_markdown":"I want to make my pipeline fail if I have an error.\r\nFor now, for example, if I don&#39;t find an item, my pipeline shows as if everything is OK.\r\n\r\n\r\n\r\nFor example, if i dont obtain an element, i say to my code that do this lines:\r\n\r\n```\r\ndriver.executeScript(&quot;lambda-status=failed&quot;);\r\ndriver.quit();\r\n```\r\n\r\nthe first one is to show in lambda test like my test is failed, and de second one is to finish the test.\r\n\r\nThere is another way to quit the driver?, something like. driver.quit(&quot;error&quot;); or something like that.\r\nI want to do this to my pipeline fails if exist any error in my test.\r\n","title":"How to make pipeline fail when a error is outputted from java appium","body":"<p>I want to make my pipeline fail if I have an error.\nFor now, for example, if I don't find an item, my pipeline shows as if everything is OK.</p>\n<p>For example, if i dont obtain an element, i say to my code that do this lines:</p>\n<pre><code>driver.executeScript(&quot;lambda-status=failed&quot;);\ndriver.quit();\n</code></pre>\n<p>the first one is to show in lambda test like my test is failed, and de second one is to finish the test.</p>\n<p>There is another way to quit the driver?, something like. driver.quit(&quot;error&quot;); or something like that.\nI want to do this to my pipeline fails if exist any error in my test.</p>\n"},{"tags":["java","selenium","google-chrome","webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":1916259,"reputation":4166,"user_id":1728790,"accept_rate":67,"display_name":"demouser123"},"score":0,"creation_date":1574080887,"post_id":58914348,"comment_id":104091346,"body_markdown":"Are you able to execute the `.exe` file for Chromedriver itself by clicking on it?","body":"Are you able to execute the <code>.exe</code> file for Chromedriver itself by clicking on it?"},{"owner":{"account_id":10421616,"reputation":4105,"user_id":11061080,"display_name":"SeleniumUser"},"score":0,"creation_date":1574080951,"post_id":58914348,"comment_id":104091381,"body_markdown":"If you check log chrome is launching properly but it&#39;s immediately  crashes","body":"If you check log chrome is launching properly but it&#39;s immediately  crashes"},{"owner":{"account_id":1916259,"reputation":4166,"user_id":1728790,"accept_rate":67,"display_name":"demouser123"},"score":0,"creation_date":1574081236,"post_id":58914348,"comment_id":104091544,"body_markdown":"Have you tried with the beta version for 79? If it also fails then there is something else/","body":"Have you tried with the beta version for 79? If it also fails then there is something else/"},{"owner":{"account_id":10421616,"reputation":4105,"user_id":11061080,"display_name":"SeleniumUser"},"score":0,"creation_date":1574081308,"post_id":58914348,"comment_id":104091594,"body_markdown":"No,  I am on cooperate proxy and cant downgrade or upgrade my chrome","body":"No,  I am on cooperate proxy and cant downgrade or upgrade my chrome"},{"owner":{"account_id":7602875,"reputation":211,"user_id":5766792,"display_name":"Ishan"},"score":0,"creation_date":1574081707,"post_id":58914348,"comment_id":104091817,"body_markdown":"Does you chrome browser launches? Maybe you can check if you are passing correct url with &#39;http://&#39; . From the logs, it is not clear why it is failing. Maybe you will be required to share the code as well","body":"Does you chrome browser launches? Maybe you can check if you are passing correct url with &#39;http://&#39; . From the logs, it is not clear why it is failing. Maybe you will be required to share the code as well"},{"owner":{"account_id":10421616,"reputation":4105,"user_id":11061080,"display_name":"SeleniumUser"},"score":0,"creation_date":1574082030,"post_id":58914348,"comment_id":104091987,"body_markdown":"It&#39;s not with code. I am 100% sure if you check then I am passing 78.0.3904.70 version of chrome driver and trying to launch 78.0.3904.97 chrome browser which is creating an issue. Also if you check https://chromedriver.chromium.org/downloads link then you will get to know 78.0.3904.97 version of chrome driver is not available","body":"It&#39;s not with code. I am 100% sure if you check then I am passing 78.0.3904.70 version of chrome driver and trying to launch 78.0.3904.97 chrome browser which is creating an issue. Also if you check <a href=\"https://chromedriver.chromium.org/downloads\" rel=\"nofollow noreferrer\">chromedriver.chromium.org/downloads</a> link then you will get to know 78.0.3904.97 version of chrome driver is not available"}],"answers":[{"tags":[],"owner":{"account_id":7602875,"reputation":211,"user_id":5766792,"display_name":"Ishan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574079842,"creation_date":1574079842,"answer_id":58914515,"question_id":58914348,"body_markdown":"Chromedriver version should be shown in logs\r\n\r\n     Driver info: driver.version: unknown \r\n\r\n\r\nAre you setting the correct path to chromedriver.exe. Verify it.\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;C:/PathToChromeDriver/chromedriver.exe&quot;);","title":"Driver info: driver.version: unknown using ChromeDriver v78.0.3904.70 and Chrome browser v78.0.3904.97","body":"<p>Chromedriver version should be shown in logs</p>\n\n<pre><code> Driver info: driver.version: unknown \n</code></pre>\n\n<p>Are you setting the correct path to chromedriver.exe. Verify it.</p>\n\n<pre><code>System.setProperty(\"webdriver.chrome.driver\", \"C:/PathToChromeDriver/chromedriver.exe\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10049107,"reputation":186627,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574090040,"creation_date":1574090040,"answer_id":58917636,"question_id":58914348,"body_markdown":"This error message...\r\n\r\n\torg.openqa.selenium.remote.UnreachableBrowserException: invalid argument\r\n\t  (Session info: chrome=78.0.3904.97)\r\n\tBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n\tSystem info: host: &#39;UKF6-L015064&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_131&#39;\r\n\tDriver info: org.openqa.selenium.chrome.ChromeDriver\r\n\tCapabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 78.0.3904.97, chrome: {chromedriverVersion: 78.0.3904.70 (edb9c9f3de024..., userDataDir: C:\\Users\\DIPAK~1.BAC\\AppDat...}, goog:chromeOptions: {debuggerAddress: localhost:52359}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\r\n\tSession ID: 22ece16d3a54371674e778dca702876b\r\n\tBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n\tSystem info: host: &#39;UKF6-L015064&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_131&#39;\r\n\tDriver info: driver.version: unknown\r\n\r\n...implies that the **ChromeDriver** was unable to initiate/spawn a new **WebBrowser** i.e. **Chrome Browser** session.\r\n\r\n\r\nYour main issue is the **incompatibility** between the version of the binaries you are using as follows:\r\n\r\n- Though you are using _chromedriver=78.0.3904.97_ \r\n- And you are also using _chrome=78.0.3904.97_\r\n- Your _Selenium Client_ version is also _3.141.59_.\r\n- Your _JDK version_ is **1.8.0_131** which is pretty ancient.\r\n\r\nSo there is a clear mismatch between the _JDK v8u131_ , _Selenium Client v3.141.59_ , _ChromeDriver v78.0.3904.97_ and the _Chrome Browser v78.0.3904.97_\r\n\r\n\r\n----------\r\n\r\n\r\nSolution\r\n--------\r\nEnsure that:\r\n\r\n- _JDK_ is upgraded to  current levels [JDK 8u222](https://www.oracle.com/technetwork/java/javase/downloads/index.html).\r\n- _Clean_ your _Project Workspace_ through your _IDE_ and _Rebuild_ your project with required dependencies only.\r\n- If your base _Web Client_ version is too old, then uninstall it and install a recent GA and released version of _Web Client_.\r\n- Take a _System Reboot_.\r\n- Execute your `@Test` as **non-root** user.","title":"Driver info: driver.version: unknown using ChromeDriver v78.0.3904.70 and Chrome browser v78.0.3904.97","body":"<p>This error message...</p>\n\n<pre><code>org.openqa.selenium.remote.UnreachableBrowserException: invalid argument\n  (Session info: chrome=78.0.3904.97)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'UKF6-L015064', ip: '192.168.56.1', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_131'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 78.0.3904.97, chrome: {chromedriverVersion: 78.0.3904.70 (edb9c9f3de024..., userDataDir: C:\\Users\\DIPAK~1.BAC\\AppDat...}, goog:chromeOptions: {debuggerAddress: localhost:52359}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\nSession ID: 22ece16d3a54371674e778dca702876b\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'UKF6-L015064', ip: '192.168.56.1', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_131'\nDriver info: driver.version: unknown\n</code></pre>\n\n<p>...implies that the <strong>ChromeDriver</strong> was unable to initiate/spawn a new <strong>WebBrowser</strong> i.e. <strong>Chrome Browser</strong> session.</p>\n\n<p>Your main issue is the <strong>incompatibility</strong> between the version of the binaries you are using as follows:</p>\n\n<ul>\n<li>Though you are using <em>chromedriver=78.0.3904.97</em> </li>\n<li>And you are also using <em>chrome=78.0.3904.97</em></li>\n<li>Your <em>Selenium Client</em> version is also <em>3.141.59</em>.</li>\n<li>Your <em>JDK version</em> is <strong>1.8.0_131</strong> which is pretty ancient.</li>\n</ul>\n\n<p>So there is a clear mismatch between the <em>JDK v8u131</em> , <em>Selenium Client v3.141.59</em> , <em>ChromeDriver v78.0.3904.97</em> and the <em>Chrome Browser v78.0.3904.97</em></p>\n\n<hr>\n\n<h2>Solution</h2>\n\n<p>Ensure that:</p>\n\n<ul>\n<li><em>JDK</em> is upgraded to  current levels <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" rel=\"nofollow noreferrer\">JDK 8u222</a>.</li>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>If your base <em>Web Client</em> version is too old, then uninstall it and install a recent GA and released version of <em>Web Client</em>.</li>\n<li>Take a <em>System Reboot</em>.</li>\n<li>Execute your <code>@Test</code> as <strong>non-root</strong> user.</li>\n</ul>\n"}],"owner":{"account_id":10421616,"reputation":4105,"user_id":11061080,"display_name":"SeleniumUser"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24618,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":2,"score":2,"last_activity_date":1696600844,"creation_date":1574079330,"question_id":58914348,"body_markdown":"I am using java 1.8 with chrome browser version `78.0.3904.97`. I am trying to execute my selenium script code with the chrome driver version `78.0.3904.70`. but while execution I am facing below issue and chrome crases immediately \r\n\r\n\r\n    Picked up JAVA_TOOL_OPTIONS: -Djdk.http.auth.tunneling.disabledSchemes=&quot;&quot;\r\n    java version &quot;1.8.0_131&quot;\r\n    Java(TM) SE Runtime Environment (build 1.8.0_131-b11)\r\n    Java HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\r\n\r\n\r\nIf you check the below logs then you will get to know that I am passing 78.0.3904.70 version of chrome driver and trying to launch 78.0.3904.97 chrome browser which is creating an issue. Also if you check `https://chromedriver.chromium.org/downloads` link then you will get to know 78.0.3904.97 version of chrome driver is not available\r\n\r\n**Error Log**\r\n\r\n    Starting ChromeDriver 78.0.3904.70 (edb9c9f3de0247fd912a77b7f6cae7447f6d3ad5-refs/branch-heads/3904@{#800}) on port 22844\r\n    Only local connections are allowed.\r\n    Please protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\r\n    Nov 18, 2019 12:06:32 PM org.openqa.selenium.remote.ProtocolHandshake createSession\r\n    INFO: Detected dialect: W3C\r\n    12:06:32.350 [main] DEBUG net.serenitybdd.core.photography.Darkroom - Opening darkroom\r\n    12:06:32.360 [Darkroom Processing Line] DEBUG net.serenitybdd.core.photography.DarkroomProcessingLine - Darkroom processing line starting up\r\n    12:06:33.613 [main] DEBUG net.serenitybdd.core.photography.Darkroom - Send negative for processing for target\\site\\serenity\\c5e0d5f762dd0408b347b1b56ece2682cce0d422c500276e3f33c78c87fadcf6.png\r\n    12:06:35.280 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - \r\n        \r\n    \r\n    12:06:35.825 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - TEST FAILED AT STEP Launch browser and navigate to  URL\r\n    12:06:35.825 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - invalid argument\r\n    \r\n    \r\n    \r\n    org.openqa.selenium.remote.UnreachableBrowserException: invalid argument\r\n      (Session info: chrome=78.0.3904.97)\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;UKF6-L015064&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_131&#39;\r\n    Driver info: org.openqa.selenium.chrome.ChromeDriver\r\n    Capabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 78.0.3904.97, chrome: {chromedriverVersion: 78.0.3904.70 (edb9c9f3de024..., userDataDir: C:\\Users\\DIPAK~1.BAC\\AppDat...}, goog:chromeOptions: {debuggerAddress: localhost:52359}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\r\n    Session ID: 22ece16d3a54371674e778dca702876b\r\n    Build info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n    System info: host: &#39;UKF6-L015064&#39;, ip: &#39;192.168.56.1&#39;, os.name: &#39;Windows 7&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;6.1&#39;, java.version: &#39;1.8.0_131&#39;\r\n    Driver info: driver.version: unknown\r\n    \r\n    \tat webapplication.contactlenses.pages.Homepage.navigateToBaseUrlNL(Homepage.java:530)\r\n    \tat webapplication.contactlenses.steplib.ContactLensSteplib.navigate_to_baseUrlNL(ContactLensSteplib.java:28)\r\n    \tat webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70.CGLIB$navigate_to_baseUrlNL$16(&lt;generated&gt;)\r\n    \tat webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70$$FastClassByCGLIB$$c8d6c80f.invoke(&lt;generated&gt;)\r\n    \tat net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\r\n    \tat net.thucydides.core.steps.StepInterceptor.invokeMethod(StepInterceptor.java:461)\r\n    \tat net.thucydides.core.steps.StepInterceptor.executeTestStepMethod(StepInterceptor.java:446)\r\n    \tat net.thucydides.core.steps.StepInterceptor.runTestStep(StepInterceptor.java:421)\r\n    \tat net.thucydides.core.steps.StepInterceptor.runOrSkipMethod(StepInterceptor.java:176)\r\n    \tat net.thucydides.core.steps.StepInterceptor.testStepResult(StepInterceptor.java:163)\r\n    \tat net.thucydides.core.steps.StepInterceptor.intercept(StepInterceptor.java:69)\r\n    \tat webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70.navigate_to_baseUrlNL(&lt;generated&gt;)\r\n\r\n\t\r\n\r\nI have already checked for chrome driver version `78.0.3904.97` but it&#39;s not available. Can someone please guide me to resolve this issue. \r\n\r\n","title":"Driver info: driver.version: unknown using ChromeDriver v78.0.3904.70 and Chrome browser v78.0.3904.97","body":"<p>I am using java 1.8 with chrome browser version <code>78.0.3904.97</code>. I am trying to execute my selenium script code with the chrome driver version <code>78.0.3904.70</code>. but while execution I am facing below issue and chrome crases immediately </p>\n\n<pre><code>Picked up JAVA_TOOL_OPTIONS: -Djdk.http.auth.tunneling.disabledSchemes=\"\"\njava version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b11)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b11, mixed mode)\n</code></pre>\n\n<p>If you check the below logs then you will get to know that I am passing 78.0.3904.70 version of chrome driver and trying to launch 78.0.3904.97 chrome browser which is creating an issue. Also if you check <code>https://chromedriver.chromium.org/downloads</code> link then you will get to know 78.0.3904.97 version of chrome driver is not available</p>\n\n<p><strong>Error Log</strong></p>\n\n<pre><code>Starting ChromeDriver 78.0.3904.70 (edb9c9f3de0247fd912a77b7f6cae7447f6d3ad5-refs/branch-heads/3904@{#800}) on port 22844\nOnly local connections are allowed.\nPlease protect ports used by ChromeDriver and related test frameworks to prevent access by malicious code.\nNov 18, 2019 12:06:32 PM org.openqa.selenium.remote.ProtocolHandshake createSession\nINFO: Detected dialect: W3C\n12:06:32.350 [main] DEBUG net.serenitybdd.core.photography.Darkroom - Opening darkroom\n12:06:32.360 [Darkroom Processing Line] DEBUG net.serenitybdd.core.photography.DarkroomProcessingLine - Darkroom processing line starting up\n12:06:33.613 [main] DEBUG net.serenitybdd.core.photography.Darkroom - Send negative for processing for target\\site\\serenity\\c5e0d5f762dd0408b347b1b56ece2682cce0d422c500276e3f33c78c87fadcf6.png\n12:06:35.280 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - \n\n\n12:06:35.825 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - TEST FAILED AT STEP Launch browser and navigate to  URL\n12:06:35.825 [main] ERROR net.thucydides.core.steps.ConsoleLoggingListener - invalid argument\n\n\n\norg.openqa.selenium.remote.UnreachableBrowserException: invalid argument\n  (Session info: chrome=78.0.3904.97)\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'UKF6-L015064', ip: '192.168.56.1', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_131'\nDriver info: org.openqa.selenium.chrome.ChromeDriver\nCapabilities {acceptInsecureCerts: true, browserName: chrome, browserVersion: 78.0.3904.97, chrome: {chromedriverVersion: 78.0.3904.70 (edb9c9f3de024..., userDataDir: C:\\Users\\DIPAK~1.BAC\\AppDat...}, goog:chromeOptions: {debuggerAddress: localhost:52359}, javascriptEnabled: true, networkConnectionEnabled: false, pageLoadStrategy: normal, platform: XP, platformName: XP, proxy: Proxy(), setWindowRect: true, strictFileInteractability: false, timeouts: {implicit: 0, pageLoad: 300000, script: 30000}, unhandledPromptBehavior: dismiss and notify}\nSession ID: 22ece16d3a54371674e778dca702876b\nBuild info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'\nSystem info: host: 'UKF6-L015064', ip: '192.168.56.1', os.name: 'Windows 7', os.arch: 'amd64', os.version: '6.1', java.version: '1.8.0_131'\nDriver info: driver.version: unknown\n\n    at webapplication.contactlenses.pages.Homepage.navigateToBaseUrlNL(Homepage.java:530)\n    at webapplication.contactlenses.steplib.ContactLensSteplib.navigate_to_baseUrlNL(ContactLensSteplib.java:28)\n    at webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70.CGLIB$navigate_to_baseUrlNL$16(&lt;generated&gt;)\n    at webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70$$FastClassByCGLIB$$c8d6c80f.invoke(&lt;generated&gt;)\n    at net.sf.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228)\n    at net.thucydides.core.steps.StepInterceptor.invokeMethod(StepInterceptor.java:461)\n    at net.thucydides.core.steps.StepInterceptor.executeTestStepMethod(StepInterceptor.java:446)\n    at net.thucydides.core.steps.StepInterceptor.runTestStep(StepInterceptor.java:421)\n    at net.thucydides.core.steps.StepInterceptor.runOrSkipMethod(StepInterceptor.java:176)\n    at net.thucydides.core.steps.StepInterceptor.testStepResult(StepInterceptor.java:163)\n    at net.thucydides.core.steps.StepInterceptor.intercept(StepInterceptor.java:69)\n    at webapplication.contactlenses.steplib.ContactLensSteplib$$EnhancerByCGLIB$$916d3a70.navigate_to_baseUrlNL(&lt;generated&gt;)\n</code></pre>\n\n<p>I have already checked for chrome driver version <code>78.0.3904.97</code> but it's not available. Can someone please guide me to resolve this issue. </p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":1,"creation_date":1696592419,"post_id":77244085,"comment_id":136176285,"body_markdown":"Your buffer is way too small to be efficient. The minimum buffer size for file operations should be 4K, but as flash uses larger sectors (up to 256KB) my recommendation for buffer size would be 16K or 32K. Or use a BufferedOutputStream with a buffer of 16K.","body":"Your buffer is way too small to be efficient. The minimum buffer size for file operations should be 4K, but as flash uses larger sectors (up to 256KB) my recommendation for buffer size would be 16K or 32K. Or use a BufferedOutputStream with a buffer of 16K."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1696592440,"post_id":77244085,"comment_id":136176287,"body_markdown":"&quot;But after saving them - time crazy increases&quot; -- we do not know what the `v5` log lines represent, as that does not appear in your [mcve]. All we know is that you ran the `v5` code before the `v6` code. Beyond that, `AsyncTask` has been deprecated for several years, your 1K buffer is small, and IMHO `HttpURLConnection` is obsolete. If I were doing this, I would [use OkHttp and Okio for handling the downloads to disk](https://stackoverflow.com/a/29012988/115145).","body":"&quot;But after saving them - time crazy increases&quot; -- we do not know what the <code>v5</code> log lines represent, as that does not appear in your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. All we know is that you ran the <code>v5</code> code before the <code>v6</code> code. Beyond that, <code>AsyncTask</code> has been deprecated for several years, your 1K buffer is small, and IMHO <code>HttpURLConnection</code> is obsolete. If I were doing this, I would <a href=\"https://stackoverflow.com/a/29012988/115145\">use OkHttp and Okio for handling the downloads to disk</a>."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1696595092,"post_id":77244085,"comment_id":136176759,"body_markdown":"`But after saving them - time crazy increases` ! The time of what! Are you downloading them again and now overwriting former files? Tell what you do.","body":"<code>But after saving them - time crazy increases</code> ! The time of what! Are you downloading them again and now overwriting former files? Tell what you do."},{"owner":{"account_id":22056185,"reputation":107,"user_id":16319680,"display_name":"Vitalii"},"score":0,"creation_date":1696600835,"post_id":77244085,"comment_id":136178051,"body_markdown":"If AysncTask just download 5 files - every AsyncTask complete in average 300ms. If AsyncTask download 5 files, read buffers and save it to Android storage AsyncTask complete in average 2000ms","body":"If AysncTask just download 5 files - every AsyncTask complete in average 300ms. If AsyncTask download 5 files, read buffers and save it to Android storage AsyncTask complete in average 2000ms"}],"owner":{"account_id":22056185,"reputation":107,"user_id":16319680,"display_name":"Vitalii"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":0,"score":1,"last_activity_date":1696600482,"creation_date":1696591859,"question_id":77244085,"body_markdown":"I have a task to download multiple files from internet and save them to Android storage.\r\n\r\nFiles downloading very fast.\r\n\r\n```\r\n2023-10-06 13:02:26.412  D  File downloaded: v6:file_1696590146411 | 288 ms\r\n2023-10-06 13:02:26.412  D  File downloaded: v6:file_1696590146412 | 288 ms\r\n2023-10-06 13:02:26.419  D  File downloaded: v6:file_1696590146418 | 295 ms\r\n2023-10-06 13:02:26.572  D  File downloaded: v6:file_1696590146572 | 448 ms\r\n2023-10-06 13:02:26.603  D  File downloaded: v6:file_1696590146602 | 480 ms\r\n```\r\n\r\nBut after reading buffer and save buffer - time to complete AsyncTask increase\r\n\r\n```\r\n2023-10-06 12:59:14.602  D  File downloaded: v5:file_1696589953363 | 1452 ms\r\n2023-10-06 12:59:16.299  D  File downloaded: v5:file_1696589953401 | 3148 ms\r\n2023-10-06 12:59:16.796  D  File downloaded: v5:file_1696589953400 | 3646 ms\r\n2023-10-06 12:59:17.088  D  File downloaded: v5:file_1696589953399 | 3938 ms\r\n2023-10-06 12:59:18.882  D  File downloaded: v5:file_1696589953398 | 5731 ms\r\n```\r\n\r\nLooks like reading bytes from InputStream is very slow for multiple files. I can not find anything to make it quicker.\r\n\r\n`while ((bytesRead = inputStream.read(buffer)) != -1) {\r\noutputStream.write(buffer, 0, bytesRead);\r\n}`\r\n\r\nattaching code project files below\r\n\r\n    package com.kerman.testapp;\r\n    \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Bundle;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n    \r\n    \r\n            String[] urls = {\r\n                    &quot;https://fastly.picsum.photos/id/16/2500/1667.jpg?hmac=uAkZwYc5phCRNFTrV_prJ_0rP0EdwJaZ4ctje2bY7aE&quot;,\r\n                    &quot;https://fastly.picsum.photos/id/19/2500/1667.jpg?hmac=7epGozH4QjToGaBf_xb2HbFTXoV5o8n_cYzB7I4lt6g&quot;,\r\n                    &quot;https://fastly.picsum.photos/id/22/4434/3729.jpg?hmac=fjZdkSMZJNFgsoDh8Qo5zdA_nSGUAWvKLyyqmEt2xs0&quot;,\r\n                    &quot;https://fastly.picsum.photos/id/21/3008/2008.jpg?hmac=T8DSVNvP-QldCew7WD4jj_S3mWwxZPqdF0CNPksSko4&quot;,\r\n                    &quot;https://fastly.picsum.photos/id/25/5000/3333.jpg?hmac=yCz9LeSs-i72Ru0YvvpsoECnCTxZjzGde805gWrAHkM&quot;\r\n            };\r\n    \r\n            DownloadTask downloadTask = new DownloadTask(this); \r\n            downloadTask.execute(urls);\r\n        }\r\n    }\r\n\r\nOther file\r\n\r\n    package com.kerman.testapp;\r\n    \r\n    import android.content.Context;\r\n    import android.os.AsyncTask;\r\n    import android.util.Log;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.net.HttpURLConnection;\r\n    import java.net.URL;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.apache.commons.io.IOUtils;\r\n    \r\n    public class DownloadTask extends AsyncTask&lt;String, Void, Void&gt; {\r\n        private static final String TAG = &quot;DownloadTask&quot;;\r\n        private final Context context;\r\n    \r\n        public DownloadTask(Context context) {\r\n            this.context = context;\r\n        }\r\n    \r\n        @Override\r\n        protected Void doInBackground(String... urls) {\r\n            // Use ExecutorService to download files concurrently\r\n            ExecutorService executor = Executors.newFixedThreadPool(urls.length);\r\n    \r\n            try {\r\n                for (String url : urls) {\r\n                    executor.submit(() -&gt; downloadFile(url));\r\n                }\r\n            } finally {\r\n                // Shut down the executor when done\r\n                executor.shutdown();\r\n            }\r\n    \r\n            return null;\r\n        }\r\n    \r\n        private void downloadFile(String urlString) {\r\n            Log.d(TAG, &quot;downloadFile(): &quot; + urlString);\r\n            long unixTime = System.currentTimeMillis();\r\n    \r\n            try {\r\n                URL url = new URL(urlString);\r\n                HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\r\n    \r\n                try {\r\n                    InputStream inputStream = urlConnection.getInputStream();\r\n    \r\n                    // Get the app-specific external files directory\r\n                    String externalFilesDir = context.getExternalFilesDir(null).getPath();\r\n    \r\n                    // Create a timestamped filename\r\n                    String fileName = &quot;file_&quot; + System.currentTimeMillis();\r\n    \r\n                    // Create a FileOutputStream pointing to the external files directory and the filename\r\n                    FileOutputStream outputStream = new FileOutputStream(externalFilesDir + &quot;/&quot; + fileName);\r\n    \r\n                    byte[] buffer = new byte[1024];\r\n                    int bytesRead;\r\n                    while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n                        outputStream.write(buffer, 0, bytesRead);\r\n                    }\r\n    \r\n    \r\n                    Log.d(TAG, &quot;File downloaded: v6:&quot; + fileName+&quot; | &quot;+Long.toString((System.currentTimeMillis()) - unixTime)+&quot; ms&quot;);\r\n    \r\n                    // Close the streams\r\n                    outputStream.close();\r\n                    inputStream.close();\r\n                } finally {\r\n                    urlConnection.disconnect();\r\n                }\r\n            } catch (IOException e) {\r\n                Log.e(TAG, &quot;Error downloading file from &quot; + urlString, e);\r\n            }\r\n        }\r\n    }\r\n\r\nThanks for any advise\r\n\r\n\r\n","title":"Android method InputStream.read() is very slow for multiple tasks","body":"<p>I have a task to download multiple files from internet and save them to Android storage.</p>\n<p>Files downloading very fast.</p>\n<pre><code>2023-10-06 13:02:26.412  D  File downloaded: v6:file_1696590146411 | 288 ms\n2023-10-06 13:02:26.412  D  File downloaded: v6:file_1696590146412 | 288 ms\n2023-10-06 13:02:26.419  D  File downloaded: v6:file_1696590146418 | 295 ms\n2023-10-06 13:02:26.572  D  File downloaded: v6:file_1696590146572 | 448 ms\n2023-10-06 13:02:26.603  D  File downloaded: v6:file_1696590146602 | 480 ms\n</code></pre>\n<p>But after reading buffer and save buffer - time to complete AsyncTask increase</p>\n<pre><code>2023-10-06 12:59:14.602  D  File downloaded: v5:file_1696589953363 | 1452 ms\n2023-10-06 12:59:16.299  D  File downloaded: v5:file_1696589953401 | 3148 ms\n2023-10-06 12:59:16.796  D  File downloaded: v5:file_1696589953400 | 3646 ms\n2023-10-06 12:59:17.088  D  File downloaded: v5:file_1696589953399 | 3938 ms\n2023-10-06 12:59:18.882  D  File downloaded: v5:file_1696589953398 | 5731 ms\n</code></pre>\n<p>Looks like reading bytes from InputStream is very slow for multiple files. I can not find anything to make it quicker.</p>\n<p><code>while ((bytesRead = inputStream.read(buffer)) != -1) { outputStream.write(buffer, 0, bytesRead); }</code></p>\n<p>attaching code project files below</p>\n<pre><code>package com.kerman.testapp;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n\n        String[] urls = {\n                &quot;https://fastly.picsum.photos/id/16/2500/1667.jpg?hmac=uAkZwYc5phCRNFTrV_prJ_0rP0EdwJaZ4ctje2bY7aE&quot;,\n                &quot;https://fastly.picsum.photos/id/19/2500/1667.jpg?hmac=7epGozH4QjToGaBf_xb2HbFTXoV5o8n_cYzB7I4lt6g&quot;,\n                &quot;https://fastly.picsum.photos/id/22/4434/3729.jpg?hmac=fjZdkSMZJNFgsoDh8Qo5zdA_nSGUAWvKLyyqmEt2xs0&quot;,\n                &quot;https://fastly.picsum.photos/id/21/3008/2008.jpg?hmac=T8DSVNvP-QldCew7WD4jj_S3mWwxZPqdF0CNPksSko4&quot;,\n                &quot;https://fastly.picsum.photos/id/25/5000/3333.jpg?hmac=yCz9LeSs-i72Ru0YvvpsoECnCTxZjzGde805gWrAHkM&quot;\n        };\n\n        DownloadTask downloadTask = new DownloadTask(this); \n        downloadTask.execute(urls);\n    }\n}\n</code></pre>\n<p>Other file</p>\n<pre><code>package com.kerman.testapp;\n\nimport android.content.Context;\nimport android.os.AsyncTask;\nimport android.util.Log;\n\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\nimport org.apache.commons.io.FileUtils;\nimport org.apache.commons.io.IOUtils;\n\npublic class DownloadTask extends AsyncTask&lt;String, Void, Void&gt; {\n    private static final String TAG = &quot;DownloadTask&quot;;\n    private final Context context;\n\n    public DownloadTask(Context context) {\n        this.context = context;\n    }\n\n    @Override\n    protected Void doInBackground(String... urls) {\n        // Use ExecutorService to download files concurrently\n        ExecutorService executor = Executors.newFixedThreadPool(urls.length);\n\n        try {\n            for (String url : urls) {\n                executor.submit(() -&gt; downloadFile(url));\n            }\n        } finally {\n            // Shut down the executor when done\n            executor.shutdown();\n        }\n\n        return null;\n    }\n\n    private void downloadFile(String urlString) {\n        Log.d(TAG, &quot;downloadFile(): &quot; + urlString);\n        long unixTime = System.currentTimeMillis();\n\n        try {\n            URL url = new URL(urlString);\n            HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\n\n            try {\n                InputStream inputStream = urlConnection.getInputStream();\n\n                // Get the app-specific external files directory\n                String externalFilesDir = context.getExternalFilesDir(null).getPath();\n\n                // Create a timestamped filename\n                String fileName = &quot;file_&quot; + System.currentTimeMillis();\n\n                // Create a FileOutputStream pointing to the external files directory and the filename\n                FileOutputStream outputStream = new FileOutputStream(externalFilesDir + &quot;/&quot; + fileName);\n\n                byte[] buffer = new byte[1024];\n                int bytesRead;\n                while ((bytesRead = inputStream.read(buffer)) != -1) {\n                    outputStream.write(buffer, 0, bytesRead);\n                }\n\n\n                Log.d(TAG, &quot;File downloaded: v6:&quot; + fileName+&quot; | &quot;+Long.toString((System.currentTimeMillis()) - unixTime)+&quot; ms&quot;);\n\n                // Close the streams\n                outputStream.close();\n                inputStream.close();\n            } finally {\n                urlConnection.disconnect();\n            }\n        } catch (IOException e) {\n            Log.e(TAG, &quot;Error downloading file from &quot; + urlString, e);\n        }\n    }\n}\n</code></pre>\n<p>Thanks for any advise</p>\n"},{"tags":["java","android","android-ndk"],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1382085704,"creation_date":1382085704,"answer_id":19445220,"question_id":19445083,"body_markdown":"The correct signature is whatever is output by `javap -s`. Don&#39;t try to write signatures yourself when there is a tool that does it for you with 100% accuracy.","title":"Android NDK JNI dot notation method signature variable","body":"<p>The correct signature is whatever is output by <code>javap -s</code>. Don't try to write signatures yourself when there is a tool that does it for you with 100% accuracy.</p>\n"},{"tags":[],"owner":{"account_id":54682,"reputation":2559,"user_id":163679,"accept_rate":71,"display_name":"bigh_29"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696600430,"creation_date":1696600430,"answer_id":77245037,"question_id":19445083,"body_markdown":"The accepted answer is correct, however, I struggled to figure out the right syntax for javap. Here are some commands that worked for me when run in the terminal window of Android Studio Giraffe on a Linux system. Start off in the root directory of the project.\r\n\r\n**Note:** Do a full build of your project beforehand so your `.class` java output files are up to date. `javap` takes `.class` input, not source code input.\r\n\r\n\r\n```bash\r\n# Find where javap lives. I didn&#39;t have one on my path\r\nfind ~ -name javap\r\n\r\n# Best javap candidate was found in ~/bin/android-studio/jbr/bin/javap\r\n\r\n# Find the .class file for the class that you want to run javap on\r\nfind . -iname Foo.class\r\n\r\n# .class file found in ./mygreatapp/build/intermediates/javac/debug/classes/com/awesomecompany/mygreatapp/packagename/Foo.class\r\n\r\n# cd into the base directory for .class output. Stop at classes. Don&#39;t go into com/blahblah\r\ncd ./mygreatapp/build/intermediates/javac/debug/classes\r\n\r\n# Now we can run javap. I include -p because I needed private method signatures\r\n~/bin/android-studio/jbr/bin/javap -s -p com/awesomecompany/mygreatapp/packagename/Foo.class\r\n\r\n```\r\n\r\nOne final note. My command history shows that I once had to pass the android jar file as the `bootclasspath` argument to javap. I think that was because I wanted to dump out a system class instead of one of my classes. That command looked like this:\r\n\r\n```\r\n~/bin/android-studio/jbr/bin/javap -s -bootclasspath ~/Android/Sdk/platforms/android-31/android.jar android.os.Parcel\r\n```","title":"Android NDK JNI dot notation method signature variable","body":"<p>The accepted answer is correct, however, I struggled to figure out the right syntax for javap. Here are some commands that worked for me when run in the terminal window of Android Studio Giraffe on a Linux system. Start off in the root directory of the project.</p>\n<p><strong>Note:</strong> Do a full build of your project beforehand so your <code>.class</code> java output files are up to date. <code>javap</code> takes <code>.class</code> input, not source code input.</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Find where javap lives. I didn't have one on my path\nfind ~ -name javap\n\n# Best javap candidate was found in ~/bin/android-studio/jbr/bin/javap\n\n# Find the .class file for the class that you want to run javap on\nfind . -iname Foo.class\n\n# .class file found in ./mygreatapp/build/intermediates/javac/debug/classes/com/awesomecompany/mygreatapp/packagename/Foo.class\n\n# cd into the base directory for .class output. Stop at classes. Don't go into com/blahblah\ncd ./mygreatapp/build/intermediates/javac/debug/classes\n\n# Now we can run javap. I include -p because I needed private method signatures\n~/bin/android-studio/jbr/bin/javap -s -p com/awesomecompany/mygreatapp/packagename/Foo.class\n\n</code></pre>\n<p>One final note. My command history shows that I once had to pass the android jar file as the <code>bootclasspath</code> argument to javap. I think that was because I wanted to dump out a system class instead of one of my classes. That command looked like this:</p>\n<pre><code>~/bin/android-studio/jbr/bin/javap -s -bootclasspath ~/Android/Sdk/platforms/android-31/android.jar android.os.Parcel\n</code></pre>\n"}],"owner":{"account_id":1362540,"reputation":45,"user_id":1319230,"display_name":"athlon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":782,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":19445220,"answer_count":2,"score":2,"last_activity_date":1696600430,"creation_date":1382085268,"question_id":19445083,"body_markdown":"I have following method, which have multiple arguments dot notation :\r\n\r\n    static public void configure( Activity activity,String client_options, String app_id, String... zone_ids )\r\n\r\nSo now I want to call it like follow :\r\n\r\n    jmethodID configMethodID =(*env)-&gt;GetStaticMethodID(env, adcolonyclazz, &quot;configure&quot;,&quot;(Landroid/app/Activity;Ljav/lang/String;Ljava/lang/String;[java/lang/String;)V&quot;);\r\nBut the all I got is :\r\n\r\njava.lang.NoSuchMethodError: no static method with name=&#39;configure&#39; signature=&#39;(Landroid/app/Activity;Ljava/lang/String;Ljava/lang/String;[java/lang/String;)V&#39;\r\n\r\nSame goes with :\r\n\r\n    jmethodID configMethodID =(*env)-&gt;GetStaticMethodID(env, adcolonyclazz, &quot;configure&quot;,&quot;(Landroid/app/Activity;Ljav/lang/String;Ljava/lang/String;Ljava/lang/String;)V&quot;);\r\n\r\nDoes anyone know the signature variable for this specific method. Thanks","title":"Android NDK JNI dot notation method signature variable","body":"<p>I have following method, which have multiple arguments dot notation :</p>\n\n<pre><code>static public void configure( Activity activity,String client_options, String app_id, String... zone_ids )\n</code></pre>\n\n<p>So now I want to call it like follow :</p>\n\n<pre><code>jmethodID configMethodID =(*env)-&gt;GetStaticMethodID(env, adcolonyclazz, \"configure\",\"(Landroid/app/Activity;Ljav/lang/String;Ljava/lang/String;[java/lang/String;)V\");\n</code></pre>\n\n<p>But the all I got is :</p>\n\n<p>java.lang.NoSuchMethodError: no static method with name='configure' signature='(Landroid/app/Activity;Ljava/lang/String;Ljava/lang/String;[java/lang/String;)V'</p>\n\n<p>Same goes with :</p>\n\n<pre><code>jmethodID configMethodID =(*env)-&gt;GetStaticMethodID(env, adcolonyclazz, \"configure\",\"(Landroid/app/Activity;Ljav/lang/String;Ljava/lang/String;Ljava/lang/String;)V\");\n</code></pre>\n\n<p>Does anyone know the signature variable for this specific method. Thanks</p>\n"},{"tags":["java","spring","rest","junit","mockito"],"comments":[{"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"score":0,"creation_date":1660142454,"post_id":73308169,"comment_id":129463784,"body_markdown":"Please, add the fields from your test class to the attached code (including annotations over them). Also - you mentioned an exception is thrown - include the exception name and at least a shortened stack trace.","body":"Please, add the fields from your test class to the attached code (including annotations over them). Also - you mentioned an exception is thrown - include the exception name and at least a shortened stack trace."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1660142893,"post_id":73308169,"comment_id":129463986,"body_markdown":"Why don&#39;t you have a `when` for the `findById` that returns the applicant? Why are you mocking the method you&#39;re trying to test?","body":"Why don&#39;t you have a <code>when</code> for the <code>findById</code> that returns the applicant? Why are you mocking the method you&#39;re trying to test?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1660143179,"post_id":73308169,"comment_id":129464120,"body_markdown":"You also haven&#39;t shown the code for the `getById` method, which is where the exception is being thrown, but presumably it&#39;s just calling `applicantRepository.findById`.","body":"You also haven&#39;t shown the code for the <code>getById</code> method, which is where the exception is being thrown, but presumably it&#39;s just calling <code>applicantRepository.findById</code>."},{"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"score":0,"creation_date":1660143278,"post_id":73308169,"comment_id":129464166,"body_markdown":"@DavidConrad Currently learning testing. Can you explain this a little more?","body":"@DavidConrad Currently learning testing. Can you explain this a little more?"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1660143936,"post_id":73308169,"comment_id":129464431,"body_markdown":"See the detailed answer by @Jonasz.","body":"See the detailed answer by @Jonasz."}],"answers":[{"tags":[],"owner":{"account_id":4012793,"reputation":1627,"user_id":3305737,"display_name":"Jonasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660143156,"creation_date":1660143156,"answer_id":73308448,"question_id":73308169,"body_markdown":"The problem with your test code is that you&#39;ve mixed mocking a method for a mock object (e.g. `applicantRepository`) with calling the tested method on an object under test (`applicantService`). We use `when(...)` to define the mocked behavior in Mockito and after that the actually tested code should be called (without the `when()`).\r\n\r\nWhat you probably want to do is: mock retrieving the `applicant` object by ID, mock saving the modified object, run the `update` method to test it and assert the result.\r\n\r\nTo mock the behavior of the `applicantRepository` you need to tell Mockito what is the expected outcome of its methods calls, for example (I made a few assumptions for the code that is not attached):\r\n```java\r\nwhen(applicantRepository.findById(anyLong())).thenReturn(applicantFromDb);\r\nwhen(applicantRepository.save(notNull())).thenAnswer(returnsFirstArg());\r\n```\r\n(`applicantFromDb` is an object created in the test method)\r\n\r\nAfter that when you call your update method, the mocked behavior above will be used:\r\n```java\r\nApplicant result = applicantService.update(...);\r\n```\r\n\r\nNow you can assert the result returned from the tested method.","title":"How to test update function in Rest API?","body":"<p>The problem with your test code is that you've mixed mocking a method for a mock object (e.g. <code>applicantRepository</code>) with calling the tested method on an object under test (<code>applicantService</code>). We use <code>when(...)</code> to define the mocked behavior in Mockito and after that the actually tested code should be called (without the <code>when()</code>).</p>\n<p>What you probably want to do is: mock retrieving the <code>applicant</code> object by ID, mock saving the modified object, run the <code>update</code> method to test it and assert the result.</p>\n<p>To mock the behavior of the <code>applicantRepository</code> you need to tell Mockito what is the expected outcome of its methods calls, for example (I made a few assumptions for the code that is not attached):</p>\n<pre class=\"lang-java prettyprint-override\"><code>when(applicantRepository.findById(anyLong())).thenReturn(applicantFromDb);\nwhen(applicantRepository.save(notNull())).thenAnswer(returnsFirstArg());\n</code></pre>\n<p>(<code>applicantFromDb</code> is an object created in the test method)</p>\n<p>After that when you call your update method, the mocked behavior above will be used:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Applicant result = applicantService.update(...);\n</code></pre>\n<p>Now you can assert the result returned from the tested method.</p>\n"},{"tags":[],"owner":{"account_id":2883526,"reputation":2320,"user_id":3439993,"accept_rate":33,"display_name":"Deltharis"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660143552,"creation_date":1660143165,"answer_id":73308450,"question_id":73308169,"body_markdown":"`ApplicationService` is your class under test. The exception you&#39;re getting is coming from `ApplicationService.getById()` method called at the start of `update()` method you&#39;re testing. You did not show us that method, but at a guess it calls the repository to get an instance by id. Your Repository mock is not set up to return anything when asked for any entity, so it returns null. Which seems to trigger the `orElseThrow` clause in the `getById()` method.\r\n\r\nAs such what you&#39;re seeing is likely the expected behaviour - when trying to update with an id that does not exist in the repository (repository returns null) service throws an exception. If you want to test the case where the entity is present you need to mock the repository appropriately.","title":"How to test update function in Rest API?","body":"<p><code>ApplicationService</code> is your class under test. The exception you're getting is coming from <code>ApplicationService.getById()</code> method called at the start of <code>update()</code> method you're testing. You did not show us that method, but at a guess it calls the repository to get an instance by id. Your Repository mock is not set up to return anything when asked for any entity, so it returns null. Which seems to trigger the <code>orElseThrow</code> clause in the <code>getById()</code> method.</p>\n<p>As such what you're seeing is likely the expected behaviour - when trying to update with an id that does not exist in the repository (repository returns null) service throws an exception. If you want to test the case where the entity is present you need to mock the repository appropriately.</p>\n"}],"owner":{"account_id":26020646,"reputation":23,"user_id":19728398,"display_name":"Ege Coskun"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":568,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73308448,"answer_count":2,"score":-1,"last_activity_date":1696600262,"creation_date":1660141959,"question_id":73308169,"body_markdown":"I can&#39;t find a way to test my `update` method using JUnit. I am mocking the necessary repo and services. But when I call `findById(Mockito.any())` it can&#39;t find anything so it throws an exception.\r\n\r\nHere is my test class:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass ApplicantServiceTest {\r\n\r\n\r\n    @Mock\r\n    private ApplicantRepository applicantRepository;\r\n    @Mock\r\n    private CreditRatingService creditRatingService;\r\n    @Mock\r\n    private ApplicantMapper applicantMapper;\r\n\r\n    @InjectMocks\r\n    private ApplicantService applicantService;\r\n\r\n    @Test\r\n    void update() {\r\n        Applicant applicant = getSampleApplicants().get(1);\r\n        Applicant updatedApplicant = new Applicant(1L,2141245L,&quot;ege&quot;,&quot;c0skun&quot;,2523,&quot;21412412&quot;,null,null);\r\n\r\n        Mockito.when(applicantService.update(applicantMapper.toDTO(applicant),Mockito.any())).thenReturn(applicant);\r\n\r\n        Assert.assertEquals(applicant.getIdentificationNumber(),updatedApplicant.getIdentificationNumber());\r\n        Assert.assertEquals(applicant.getPhoneNumber(), updatedApplicant.getPhoneNumber());\r\n        Assert.assertEquals(applicant.getFirstName(), updatedApplicant.getFirstName());\r\n        assertEquals(applicant.getMonthlyIncome(), updatedApplicant.getMonthlyIncome());\r\n        Assert.assertEquals(applicant.getId(), updatedApplicant.getId());\r\n\r\n    }\r\n```\r\n\r\nAnd this is the method I am trying to test:\r\n\r\n```\r\n  public Applicant update(ApplicantDTO applicantDTO,Long id) {\r\n\r\n        Applicant byId = getById(id);\r\n\r\n        if (applicantDTO.getMonthlyIncome()!=byId.getMonthlyIncome()){\r\n            byId.setMonthlyIncome(applicantDTO.getMonthlyIncome());\r\n        }\r\n        if (!Objects.equals(applicantDTO.getFirstName(), byId.getFirstName())){\r\n            byId.setFirstName(applicantDTO.getFirstName());\r\n        }\r\n        if (!Objects.equals(applicantDTO.getLastName(), byId.getLastName())){\r\n            byId.setLastName(applicantDTO.getLastName());\r\n        }\r\n        if (!Objects.equals(applicantDTO.getPhoneNumber(), byId.getPhoneNumber())){\r\n            byId.setPhoneNumber(applicantDTO.getPhoneNumber());\r\n        }\r\n        if (!Objects.equals(applicantDTO.getIdentificationNumber(), byId.getIdentificationNumber())){\r\n            byId.setIdentificationNumber(applicantDTO.getIdentificationNumber());\r\n        }\r\n\r\n        return applicantRepository.save(byId);\r\n    }\r\n\r\n```\r\nThis is the output:\r\n\r\n```\r\n17:43:19.520 [main] ERROR com.egecoskun.finalproject.services.ApplicantService - Applicant not found by id : null\r\n\r\nRelated Applicant not found with : [id : null]\r\nEntityNotFoundException(details=Some Special Details)\r\n\tat com.egecoskun.finalproject.services.ApplicantService.lambda$getById$0(ApplicantService.java:47)\r\n\tat java.base/java.util.Optional.orElseThrow(Optional.java:403)\r\n\tat com.egecoskun.finalproject.services.ApplicantService.getById(ApplicantService.java:45)\r\n\tat com.egecoskun.finalproject.services.ApplicantService.update(ApplicantService.java:75)\r\n\tat com.egecoskun.finalproject.services.ApplicantServiceTest.update(ApplicantServiceTest.java:136)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    ...\r\n```\r\n\r\n\r\nCan someone explain how to unit test my update method? \r\n","title":"How to test update function in Rest API?","body":"<p>I can't find a way to test my <code>update</code> method using JUnit. I am mocking the necessary repo and services. But when I call <code>findById(Mockito.any())</code> it can't find anything so it throws an exception.</p>\n<p>Here is my test class:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass ApplicantServiceTest {\n\n\n    @Mock\n    private ApplicantRepository applicantRepository;\n    @Mock\n    private CreditRatingService creditRatingService;\n    @Mock\n    private ApplicantMapper applicantMapper;\n\n    @InjectMocks\n    private ApplicantService applicantService;\n\n    @Test\n    void update() {\n        Applicant applicant = getSampleApplicants().get(1);\n        Applicant updatedApplicant = new Applicant(1L,2141245L,&quot;ege&quot;,&quot;c0skun&quot;,2523,&quot;21412412&quot;,null,null);\n\n        Mockito.when(applicantService.update(applicantMapper.toDTO(applicant),Mockito.any())).thenReturn(applicant);\n\n        Assert.assertEquals(applicant.getIdentificationNumber(),updatedApplicant.getIdentificationNumber());\n        Assert.assertEquals(applicant.getPhoneNumber(), updatedApplicant.getPhoneNumber());\n        Assert.assertEquals(applicant.getFirstName(), updatedApplicant.getFirstName());\n        assertEquals(applicant.getMonthlyIncome(), updatedApplicant.getMonthlyIncome());\n        Assert.assertEquals(applicant.getId(), updatedApplicant.getId());\n\n    }\n</code></pre>\n<p>And this is the method I am trying to test:</p>\n<pre><code>  public Applicant update(ApplicantDTO applicantDTO,Long id) {\n\n        Applicant byId = getById(id);\n\n        if (applicantDTO.getMonthlyIncome()!=byId.getMonthlyIncome()){\n            byId.setMonthlyIncome(applicantDTO.getMonthlyIncome());\n        }\n        if (!Objects.equals(applicantDTO.getFirstName(), byId.getFirstName())){\n            byId.setFirstName(applicantDTO.getFirstName());\n        }\n        if (!Objects.equals(applicantDTO.getLastName(), byId.getLastName())){\n            byId.setLastName(applicantDTO.getLastName());\n        }\n        if (!Objects.equals(applicantDTO.getPhoneNumber(), byId.getPhoneNumber())){\n            byId.setPhoneNumber(applicantDTO.getPhoneNumber());\n        }\n        if (!Objects.equals(applicantDTO.getIdentificationNumber(), byId.getIdentificationNumber())){\n            byId.setIdentificationNumber(applicantDTO.getIdentificationNumber());\n        }\n\n        return applicantRepository.save(byId);\n    }\n\n</code></pre>\n<p>This is the output:</p>\n<pre><code>17:43:19.520 [main] ERROR com.egecoskun.finalproject.services.ApplicantService - Applicant not found by id : null\n\nRelated Applicant not found with : [id : null]\nEntityNotFoundException(details=Some Special Details)\n    at com.egecoskun.finalproject.services.ApplicantService.lambda$getById$0(ApplicantService.java:47)\n    at java.base/java.util.Optional.orElseThrow(Optional.java:403)\n    at com.egecoskun.finalproject.services.ApplicantService.getById(ApplicantService.java:45)\n    at com.egecoskun.finalproject.services.ApplicantService.update(ApplicantService.java:75)\n    at com.egecoskun.finalproject.services.ApplicantServiceTest.update(ApplicantServiceTest.java:136)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    ...\n</code></pre>\n<p>Can someone explain how to unit test my update method?</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"score":0,"creation_date":1696366111,"post_id":77221002,"comment_id":136143149,"body_markdown":"I have something , but i can&#39;t control its topology  yet .","body":"I have something , but i can&#39;t control its topology  yet ."},{"owner":{"account_id":6211203,"reputation":87,"user_id":13660973,"display_name":"FarHooD"},"score":0,"creation_date":1696366518,"post_id":77221002,"comment_id":136143199,"body_markdown":"It can be helpful. thank you.","body":"It can be helpful. thank you."},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":1,"creation_date":1696540495,"post_id":77221002,"comment_id":136170193,"body_markdown":"You can check [TriangulatedMesh](https://github.com/FXyz/FXyz/blob/master/FXyz-Core/src/main/java/org/fxyz3d/shapes/primitives/TriangulatedMesh.java#L66) from the FXyz library. It uses Delaunay interpolation to generate a 2D mesh out of the points that define the perimeter, that then it is extruded with a given height. See https://github.com/FXyz/FXyz#sample on how to get started.","body":"You can check <a href=\"https://github.com/FXyz/FXyz/blob/master/FXyz-Core/src/main/java/org/fxyz3d/shapes/primitives/TriangulatedMesh.java#L66\" rel=\"nofollow noreferrer\">TriangulatedMesh</a> from the FXyz library. It uses Delaunay interpolation to generate a 2D mesh out of the points that define the perimeter, that then it is extruded with a given height. See <a href=\"https://github.com/FXyz/FXyz#sample\" rel=\"nofollow noreferrer\">github.com/FXyz/FXyz#sample</a> on how to get started."},{"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"score":0,"creation_date":1697107545,"post_id":77221002,"comment_id":136239353,"body_markdown":"You  edited and added more  stuff making it way more complex .  We are happy to help you( or trying ), but time is a tyrant  .My thoughts anyway . I think you can mirroring an axis just multiplying that vertex axis by -1 in .make it just x and y on papper. That will mirror it not extrude . That needs more steps I think","body":"You  edited and added more  stuff making it way more complex .  We are happy to help you( or trying ), but time is a tyrant  .My thoughts anyway . I think you can mirroring an axis just multiplying that vertex axis by -1 in .make it just x and y on papper. That will mirror it not extrude . That needs more steps I think"}],"answers":[{"tags":[],"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696368189,"creation_date":1696367437,"answer_id":77225533,"question_id":77221002,"body_markdown":"This approach will mesh `MeshView` object with xy parent&#39;s coordinates ( z is alway 0 ) given by `PickResult`. There are some issues about topology and artifacts .\r\nSince a tringle has 9 coordinates (3 vertices ) the condition will start at third click event . And , every new click needs a new face after the first triangle . That is why faces array needs to be cleared with `mesh.getFaces().clear()`  method.\r\n\r\nAll 3d vertices are pointing to u =0 &amp; v=0  uv coordinates and raster images can not be applied as texture . Check this [answer][1]\r\n \r\n\r\n\r\n[![meshview javafx][2]][2]\r\n\r\nApp.java\r\n\r\n    public class App extends Application {\r\n    \r\n        private final TriangleMesh mesh = new TriangleMesh();\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n    \r\n            mesh.getTexCoords().addAll(0, 0);\r\n            MeshView meshView = new MeshView(mesh);\r\n            meshView.setMaterial(new PhongMaterial(Color.CYAN));\r\n    \r\n            AnchorPane anchorPane = new AnchorPane(meshView);\r\n    \r\n            anchorPane.setOnMouseClicked(e -&gt; {\r\n                float x = (float) e.getX();\r\n                float y = (float) e.getY();\r\n    \r\n                mesh.getPoints().addAll(x, y, 0);\r\n    \r\n                if (mesh.getPoints().size() &gt;= 9) {\r\n    \r\n                    makeFaces();\r\n                }\r\n    \r\n            });\r\n    \r\n            var scene = new Scene(anchorPane, 640, 480);\r\n            stage.setScene(scene);\r\n            stage.show();\r\n        }\r\n    \r\n        private void makeFaces() {\r\n            mesh.getFaces().clear();\r\n            int vertices = mesh.getPoints().size();\r\n            int faces = 1 + ((vertices - 9) / 3);\r\n    \r\n            for (int i = 0; i &lt; faces; i++) {\r\n    \r\n                mesh.getFaces().addAll(i, 0, i + 1, 0, i + 2, 0);\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/72007091/7587451\r\n  [2]: https://i.stack.imgur.com/t22Mz.gif","title":"Create Custom shape 3D from 2D points or path in java(or JavaFx)","body":"<p>This approach will mesh <code>MeshView</code> object with xy parent's coordinates ( z is alway 0 ) given by <code>PickResult</code>. There are some issues about topology and artifacts .\nSince a tringle has 9 coordinates (3 vertices ) the condition will start at third click event . And , every new click needs a new face after the first triangle . That is why faces array needs to be cleared with <code>mesh.getFaces().clear()</code>  method.</p>\n<p>All 3d vertices are pointing to u =0 &amp; v=0  uv coordinates and raster images can not be applied as texture . Check this <a href=\"https://stackoverflow.com/a/72007091/7587451\">answer</a></p>\n<p><a href=\"https://i.stack.imgur.com/t22Mz.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t22Mz.gif\" alt=\"meshview javafx\" /></a></p>\n<p>App.java</p>\n<pre><code>public class App extends Application {\n\n    private final TriangleMesh mesh = new TriangleMesh();\n\n    @Override\n    public void start(Stage stage) {\n\n        mesh.getTexCoords().addAll(0, 0);\n        MeshView meshView = new MeshView(mesh);\n        meshView.setMaterial(new PhongMaterial(Color.CYAN));\n\n        AnchorPane anchorPane = new AnchorPane(meshView);\n\n        anchorPane.setOnMouseClicked(e -&gt; {\n            float x = (float) e.getX();\n            float y = (float) e.getY();\n\n            mesh.getPoints().addAll(x, y, 0);\n\n            if (mesh.getPoints().size() &gt;= 9) {\n\n                makeFaces();\n            }\n\n        });\n\n        var scene = new Scene(anchorPane, 640, 480);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    private void makeFaces() {\n        mesh.getFaces().clear();\n        int vertices = mesh.getPoints().size();\n        int faces = 1 + ((vertices - 9) / 3);\n\n        for (int i = 0; i &lt; faces; i++) {\n\n            mesh.getFaces().addAll(i, 0, i + 1, 0, i + 2, 0);\n\n        }\n\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10283144,"reputation":2440,"user_id":7587451,"display_name":"Giovanni Contreras"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696562164,"creation_date":1696558170,"answer_id":77241504,"question_id":77221002,"body_markdown":"**Meshing a MeshView object from 2d coordinates** \r\n\r\n[![meshview javafx][1]][1]\r\n\r\nThere is an array of `Point2d` wich are replaced by a custom class that extends `Rectangle` to visulize where we can click .  We need to click three different dots(`Rectangles`) to thrigger this sequence :\r\n\r\n 1. check if the dot x&amp;y coords  already  exists in points array from the `TriangleMesh` instance . If is not it will add it.\r\n\r\n 2. check its vertex index with `searchByCoords` method\r\n\r\n 3. Once 1 and 2 steps were done  for all 3 dots . It will add a new face for faces array in the mesh instance .\r\n\r\n 4. It will clear the array were those 3 clicked dots were stored allowing next iterations.\r\n\r\nAll uv coordinates are the same (0,0)  and raster images can not be applied as textures . Check this [answer][2]\r\n\r\njavafx does not support [ngons][3]\r\n\r\n\r\nThis is a single class  javafx app you can try \r\n\r\nApp.java\r\n\r\n    public class App extends Application {\r\n    \r\n        private Point2D[] points;\r\n    \r\n        private ArrayList&lt;Dot&gt; clickedDots = new ArrayList&lt;&gt;();\r\n    \r\n        private final ArrayList&lt;Dot&gt; dots = new ArrayList&lt;&gt;();\r\n    \r\n        private final AnchorPane anchorPane = new AnchorPane();\r\n    \r\n        private final TriangleMesh mesh = new TriangleMesh(VertexFormat.POINT_TEXCOORD);\r\n    \r\n        @Override\r\n        public void start(Stage stage) {\r\n    \r\n            MeshView meshView = new MeshView(mesh);\r\n            meshView.setMaterial(new PhongMaterial(Color.YELLOWGREEN));\r\n            mesh.getTexCoords().addAll(0, 0);\r\n            meshView.setDisable(true);\r\n    \r\n            Button drawmode = new Button(&quot;mode&quot;);\r\n            drawmode.setOnAction(e -&gt; {\r\n                if (meshView.getDrawMode() == DrawMode.FILL) {\r\n                    meshView.setDrawMode(DrawMode.LINE);\r\n                } else {\r\n                    meshView.setDrawMode(DrawMode.FILL);\r\n                }\r\n    \r\n            });\r\n            AnchorPane.setRightAnchor(drawmode, 5d);\r\n            anchorPane.getChildren().add(drawmode);\r\n            Button reset = new Button(&quot;reset&quot;);\r\n            reset.setOnAction(e -&gt; {\r\n    \r\n                mesh.getFaces().clear();\r\n                mesh.getPoints().clear();\r\n                clickedDots.forEach(dot -&gt; {\r\n                    dot.clear();\r\n                });\r\n                clickedDots.clear();\r\n    \r\n            });\r\n            AnchorPane.setRightAnchor(reset, 60d);\r\n            anchorPane.getChildren().add(reset);\r\n    \r\n            points = new Point2D[]{new Point2D(10, 10), new Point2D(100, 10),\r\n                new Point2D(150, 10), new Point2D(160, 20), new Point2D(180, 25),\r\n                new Point2D(180, 200), new Point2D(160, 200), new Point2D(100, 200), new Point2D(10, 200)};\r\n    \r\n            populate();\r\n            anchorPane.getChildren().add(meshView);\r\n    \r\n            anchorPane.setOnMouseClicked(e -&gt; {\r\n    \r\n                if (e.getPickResult().getIntersectedNode() instanceof Dot) {\r\n                    Dot dot = (Dot) e.getPickResult().getIntersectedNode();\r\n    \r\n                    if (!dot.isSelected) {\r\n                        dot.select();\r\n                        clickedDots.add(dot);\r\n                    }\r\n                }\r\n                if (clickedDots.size() == 3) {\r\n                    float z = 0;\r\n                    // vertex1\r\n                    float x1 = (float) clickedDots.get(0).getTranslateX();\r\n                    float y1 = (float) clickedDots.get(0).getTranslateY();\r\n    \r\n                    if (!wasXYAdded(x1, y1)) {\r\n                        mesh.getPoints().addAll(x1, y1, z);\r\n                    }\r\n                    int vertext1 = searchByCoords(x1, y1);\r\n              \r\n                    \r\n                    // vertex2\r\n                    float x2 = (float) clickedDots.get(1).getTranslateX();\r\n                    float y2 = (float) clickedDots.get(1).getTranslateY();\r\n    \r\n                    if (!wasXYAdded(x2, y2)) {\r\n                        mesh.getPoints().addAll(x2, y2, z);\r\n                    }\r\n                    int vertext2 = searchByCoords(x2, y2);\r\n                   \r\n    \r\n                    // vertex3\r\n                    float x3 = (float) clickedDots.get(2).getTranslateX();\r\n                    float y3 = (float) clickedDots.get(2).getTranslateY();\r\n    \r\n                    if (!wasXYAdded(x3, y3)) {\r\n                        mesh.getPoints().addAll(x3, y3, z);\r\n                    }\r\n                    int vertext3 = searchByCoords(x3, y3);\r\n                  \r\n    \r\n                    mesh.getFaces().addAll(vertext1, 0, vertext2, 0, vertext3, 0);\r\n                    mesh.getFaces().addAll(vertext3, 0, vertext2, 0, vertext1, 0);\r\n    \r\n                    clickedDots.forEach(dot -&gt; {\r\n                        dot.clear();\r\n    \r\n                    });\r\n                    clickedDots.clear();\r\n                }\r\n    \r\n            });\r\n    \r\n            var scene = new Scene(anchorPane, 320, 300);\r\n            stage.setScene(scene);\r\n            stage.setTitle(&quot;meshing from 2d coords&quot;);\r\n            stage.show();\r\n    \r\n        }\r\n    \r\n        private int searchByCoords(float x, float y) {\r\n            for (int i = 0; i &lt; mesh.getPoints().size() / 3; i++) {\r\n    \r\n                float testX = mesh.getPoints().get(i * 3);\r\n                float testY = mesh.getPoints().get((i * 3) + 1);\r\n                if (testX == x &amp;&amp; testY == y) {\r\n                    return i;\r\n                }\r\n    \r\n            }\r\n            return ((mesh.getPoints().size() / 3));\r\n        }\r\n    \r\n        private boolean wasXYAdded(float x, float y) {\r\n            for (int i = 0; i &lt; mesh.getPoints().size() / 3; i++) {\r\n    \r\n                float testX = mesh.getPoints().get(i * 3);\r\n                float testY = mesh.getPoints().get((i * 3) + 1);\r\n                if (testX == x &amp;&amp; testY == y) {\r\n                    \r\n                    return true;\r\n                }\r\n    \r\n            }\r\n            return false;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            launch();\r\n        }\r\n    \r\n        private void populate() {\r\n    \r\n            for (Point2D point : points) {\r\n    \r\n                Dot dot = new Dot(point.getX(), point.getY());\r\n                dots.add(dot);\r\n                anchorPane.getChildren().add(dot);\r\n    \r\n            }\r\n    \r\n        }\r\n    \r\n        private class Dot extends Rectangle {\r\n    \r\n            private boolean isSelected = false;\r\n    \r\n            public Dot(double x, double y) {\r\n                setTranslateX(x);\r\n                setTranslateY(y);\r\n                setWidth(10);\r\n                setHeight(10);\r\n                setFill(Color.BLACK);\r\n    \r\n            }\r\n    \r\n            public void clear() {\r\n                setFill(Color.BLACK);\r\n                isSelected = false;\r\n            }\r\n    \r\n            public void select() {\r\n                setFill(Color.ORANGERED);\r\n                isSelected = true;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1cfnM.gif\r\n  [2]: https://stackoverflow.com/a/72007091/7587451\r\n  [3]: https://docs.mcneel.com/rhino/7/help/en-us/popup_moreinformation/ngon.htm","title":"Create Custom shape 3D from 2D points or path in java(or JavaFx)","body":"<p><strong>Meshing a MeshView object from 2d coordinates</strong></p>\n<p><a href=\"https://i.stack.imgur.com/1cfnM.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1cfnM.gif\" alt=\"meshview javafx\" /></a></p>\n<p>There is an array of <code>Point2d</code> wich are replaced by a custom class that extends <code>Rectangle</code> to visulize where we can click .  We need to click three different dots(<code>Rectangles</code>) to thrigger this sequence :</p>\n<ol>\n<li><p>check if the dot x&amp;y coords  already  exists in points array from the <code>TriangleMesh</code> instance . If is not it will add it.</p>\n</li>\n<li><p>check its vertex index with <code>searchByCoords</code> method</p>\n</li>\n<li><p>Once 1 and 2 steps were done  for all 3 dots . It will add a new face for faces array in the mesh instance .</p>\n</li>\n<li><p>It will clear the array were those 3 clicked dots were stored allowing next iterations.</p>\n</li>\n</ol>\n<p>All uv coordinates are the same (0,0)  and raster images can not be applied as textures . Check this <a href=\"https://stackoverflow.com/a/72007091/7587451\">answer</a></p>\n<p>javafx does not support <a href=\"https://docs.mcneel.com/rhino/7/help/en-us/popup_moreinformation/ngon.htm\" rel=\"nofollow noreferrer\">ngons</a></p>\n<p>This is a single class  javafx app you can try</p>\n<p>App.java</p>\n<pre><code>public class App extends Application {\n\n    private Point2D[] points;\n\n    private ArrayList&lt;Dot&gt; clickedDots = new ArrayList&lt;&gt;();\n\n    private final ArrayList&lt;Dot&gt; dots = new ArrayList&lt;&gt;();\n\n    private final AnchorPane anchorPane = new AnchorPane();\n\n    private final TriangleMesh mesh = new TriangleMesh(VertexFormat.POINT_TEXCOORD);\n\n    @Override\n    public void start(Stage stage) {\n\n        MeshView meshView = new MeshView(mesh);\n        meshView.setMaterial(new PhongMaterial(Color.YELLOWGREEN));\n        mesh.getTexCoords().addAll(0, 0);\n        meshView.setDisable(true);\n\n        Button drawmode = new Button(&quot;mode&quot;);\n        drawmode.setOnAction(e -&gt; {\n            if (meshView.getDrawMode() == DrawMode.FILL) {\n                meshView.setDrawMode(DrawMode.LINE);\n            } else {\n                meshView.setDrawMode(DrawMode.FILL);\n            }\n\n        });\n        AnchorPane.setRightAnchor(drawmode, 5d);\n        anchorPane.getChildren().add(drawmode);\n        Button reset = new Button(&quot;reset&quot;);\n        reset.setOnAction(e -&gt; {\n\n            mesh.getFaces().clear();\n            mesh.getPoints().clear();\n            clickedDots.forEach(dot -&gt; {\n                dot.clear();\n            });\n            clickedDots.clear();\n\n        });\n        AnchorPane.setRightAnchor(reset, 60d);\n        anchorPane.getChildren().add(reset);\n\n        points = new Point2D[]{new Point2D(10, 10), new Point2D(100, 10),\n            new Point2D(150, 10), new Point2D(160, 20), new Point2D(180, 25),\n            new Point2D(180, 200), new Point2D(160, 200), new Point2D(100, 200), new Point2D(10, 200)};\n\n        populate();\n        anchorPane.getChildren().add(meshView);\n\n        anchorPane.setOnMouseClicked(e -&gt; {\n\n            if (e.getPickResult().getIntersectedNode() instanceof Dot) {\n                Dot dot = (Dot) e.getPickResult().getIntersectedNode();\n\n                if (!dot.isSelected) {\n                    dot.select();\n                    clickedDots.add(dot);\n                }\n            }\n            if (clickedDots.size() == 3) {\n                float z = 0;\n                // vertex1\n                float x1 = (float) clickedDots.get(0).getTranslateX();\n                float y1 = (float) clickedDots.get(0).getTranslateY();\n\n                if (!wasXYAdded(x1, y1)) {\n                    mesh.getPoints().addAll(x1, y1, z);\n                }\n                int vertext1 = searchByCoords(x1, y1);\n          \n                \n                // vertex2\n                float x2 = (float) clickedDots.get(1).getTranslateX();\n                float y2 = (float) clickedDots.get(1).getTranslateY();\n\n                if (!wasXYAdded(x2, y2)) {\n                    mesh.getPoints().addAll(x2, y2, z);\n                }\n                int vertext2 = searchByCoords(x2, y2);\n               \n\n                // vertex3\n                float x3 = (float) clickedDots.get(2).getTranslateX();\n                float y3 = (float) clickedDots.get(2).getTranslateY();\n\n                if (!wasXYAdded(x3, y3)) {\n                    mesh.getPoints().addAll(x3, y3, z);\n                }\n                int vertext3 = searchByCoords(x3, y3);\n              \n\n                mesh.getFaces().addAll(vertext1, 0, vertext2, 0, vertext3, 0);\n                mesh.getFaces().addAll(vertext3, 0, vertext2, 0, vertext1, 0);\n\n                clickedDots.forEach(dot -&gt; {\n                    dot.clear();\n\n                });\n                clickedDots.clear();\n            }\n\n        });\n\n        var scene = new Scene(anchorPane, 320, 300);\n        stage.setScene(scene);\n        stage.setTitle(&quot;meshing from 2d coords&quot;);\n        stage.show();\n\n    }\n\n    private int searchByCoords(float x, float y) {\n        for (int i = 0; i &lt; mesh.getPoints().size() / 3; i++) {\n\n            float testX = mesh.getPoints().get(i * 3);\n            float testY = mesh.getPoints().get((i * 3) + 1);\n            if (testX == x &amp;&amp; testY == y) {\n                return i;\n            }\n\n        }\n        return ((mesh.getPoints().size() / 3));\n    }\n\n    private boolean wasXYAdded(float x, float y) {\n        for (int i = 0; i &lt; mesh.getPoints().size() / 3; i++) {\n\n            float testX = mesh.getPoints().get(i * 3);\n            float testY = mesh.getPoints().get((i * 3) + 1);\n            if (testX == x &amp;&amp; testY == y) {\n                \n                return true;\n            }\n\n        }\n        return false;\n    }\n\n    public static void main(String[] args) {\n        launch();\n    }\n\n    private void populate() {\n\n        for (Point2D point : points) {\n\n            Dot dot = new Dot(point.getX(), point.getY());\n            dots.add(dot);\n            anchorPane.getChildren().add(dot);\n\n        }\n\n    }\n\n    private class Dot extends Rectangle {\n\n        private boolean isSelected = false;\n\n        public Dot(double x, double y) {\n            setTranslateX(x);\n            setTranslateY(y);\n            setWidth(10);\n            setHeight(10);\n            setFill(Color.BLACK);\n\n        }\n\n        public void clear() {\n            setFill(Color.BLACK);\n            isSelected = false;\n        }\n\n        public void select() {\n            setFill(Color.ORANGERED);\n            isSelected = true;\n        }\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":6211203,"reputation":87,"user_id":13660973,"display_name":"FarHooD"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":395,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1696599758,"creation_date":1696324415,"question_id":77221002,"body_markdown":"In order to my lack of knowledge is it about how to create 3d model from 2d point(coordinates/paths) in java and showing on javafx?\r\nin the basics I know how to use camera and light system and it&#39;s not a problem but I have Picture from stone (Original Image) that User with mouse input selected points, The codes:\r\n\r\n(The canvas put it on ImageView that have original Image. the canvas w , h bind to parent of imageView and imageview bind to parent w,h (so the imageview and canvas are the same w,h))\r\n```\r\n        canvas.setOnMouseClicked(new EventHandler&lt;MouseEvent&gt;() {\r\n            @Override\r\n            public void handle(MouseEvent mouseEvent) {\r\n                if (isStarted()) {\r\n                    App.logger.debug(&quot;Added the Point into: -&gt; X: &quot; + mouseEvent.getX() + &quot; And Y: &quot; + mouseEvent.getY());\r\n                    points.add(new Point2D(mouseEvent.getX(), mouseEvent.getY()));\r\n                    reDraw();\r\n                    restorePoints = new ArrayList&lt;Point2D&gt;();\r\n                } else {\r\n                    App.logger.debug(&quot;The Start stat is :&quot; + isStarted() + &quot; So we can&#39;t Draw Shapes.&quot;);\r\n                }\r\n            }\r\n        });\r\n```\r\nThe points and restore point are : ```ArrayList&lt;Point2D&gt; points = new ArrayList&lt;Point2D&gt;()``` and I have correct point of image that show me the area selected to be 3d, but I can&#39;t find how to change this into 3d model from 3dpoints (for z the user select z and I set all point z )\r\n\r\n```\r\n ArrayList&lt;Point3D&gt; points3D = new ArrayList&lt;Point3D&gt;();\r\n        for (Point2D point2D : points) {\r\n            points3D.add(new Point3D(point2D.getX(), point2D.getY(), 24));\r\n        }\r\n``` \r\nin extra information I convert the points into Path with this code :\r\n\r\n```\r\n    private void connectJoint() {\r\n        Point2D startPoint = null;\r\n        Point2D startingPoint = null, endingPoint = null;\r\n        Collection&lt;PathElement&gt; pathElements = new ArrayList&lt;PathElement&gt;();\r\n        for (Point2D point : points) {\r\n            if (startPoint == null) {\r\n                startingPoint = point;\r\n                startPoint = point;\r\n                pathElements.add(new MoveTo(point.getX(), point.getY()));\r\n                continue;\r\n            }\r\n            pathElements.add(new LineTo(point.getX(), point.getY()));\r\n            graphicsContext.strokeLine(startPoint.getX(), startPoint.getY(), point.getX(), point.getY());\r\n            pathElements.add(new LineTo(startingPoint.getX(), startingPoint.getY()));\r\n            startPoint = point;\r\n        }\r\n        endingPoint = startPoint;\r\n        if (startingPoint != null &amp;&amp; endingPoint != null &amp;&amp; points.size() &gt; 2) {\r\n            shadowLastLine(startingPoint, endingPoint);\r\n\r\n        }\r\n        pathOfSelectedAreaWithEndJoined = new Path(pathElements);\r\n    }\r\n```\r\nSo, back in My Question: How I can create 3dModel from the points or path I have in java to show in javafx?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n----------\r\n\r\nFor Update My Question, Created the 3D model with Photoshop that show what actually I&#39;m looking for :\r\n[![enter image description here][2]][2]\r\nI have Point3D that is from Point2D and ill create 2 ArrayList from it one for top layout and other for bottom layout some of them with z=0 and the other z=(Anything user selected). But what&#39;s really Idk is How to show this! in some point Using extra library or TrianglMesh can&#39;t show it and it&#39;s make so many convert the code for showing something like that!\r\n\r\n\r\n----------\r\n\r\nUpdate 3:\r\nAs You can see from Video that uploaded as GIF , I created Application that user can point area they want and create 2D picture from canvas but my Problem is create 3D Object as Image I mention before from 2D points.\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LiRjQ.jpg\r\n  [2]: https://i.stack.imgur.com/Tff9q.png\r\n  [3]: https://i.stack.imgur.com/CHvNp.gif","title":"Create Custom shape 3D from 2D points or path in java(or JavaFx)","body":"<p>In order to my lack of knowledge is it about how to create 3d model from 2d point(coordinates/paths) in java and showing on javafx?\nin the basics I know how to use camera and light system and it's not a problem but I have Picture from stone (Original Image) that User with mouse input selected points, The codes:</p>\n<p>(The canvas put it on ImageView that have original Image. the canvas w , h bind to parent of imageView and imageview bind to parent w,h (so the imageview and canvas are the same w,h))</p>\n<pre><code>        canvas.setOnMouseClicked(new EventHandler&lt;MouseEvent&gt;() {\n            @Override\n            public void handle(MouseEvent mouseEvent) {\n                if (isStarted()) {\n                    App.logger.debug(&quot;Added the Point into: -&gt; X: &quot; + mouseEvent.getX() + &quot; And Y: &quot; + mouseEvent.getY());\n                    points.add(new Point2D(mouseEvent.getX(), mouseEvent.getY()));\n                    reDraw();\n                    restorePoints = new ArrayList&lt;Point2D&gt;();\n                } else {\n                    App.logger.debug(&quot;The Start stat is :&quot; + isStarted() + &quot; So we can't Draw Shapes.&quot;);\n                }\n            }\n        });\n</code></pre>\n<p>The points and restore point are : <code>ArrayList&lt;Point2D&gt; points = new ArrayList&lt;Point2D&gt;()</code> and I have correct point of image that show me the area selected to be 3d, but I can't find how to change this into 3d model from 3dpoints (for z the user select z and I set all point z )</p>\n<pre><code> ArrayList&lt;Point3D&gt; points3D = new ArrayList&lt;Point3D&gt;();\n        for (Point2D point2D : points) {\n            points3D.add(new Point3D(point2D.getX(), point2D.getY(), 24));\n        }\n</code></pre>\n<p>in extra information I convert the points into Path with this code :</p>\n<pre><code>    private void connectJoint() {\n        Point2D startPoint = null;\n        Point2D startingPoint = null, endingPoint = null;\n        Collection&lt;PathElement&gt; pathElements = new ArrayList&lt;PathElement&gt;();\n        for (Point2D point : points) {\n            if (startPoint == null) {\n                startingPoint = point;\n                startPoint = point;\n                pathElements.add(new MoveTo(point.getX(), point.getY()));\n                continue;\n            }\n            pathElements.add(new LineTo(point.getX(), point.getY()));\n            graphicsContext.strokeLine(startPoint.getX(), startPoint.getY(), point.getX(), point.getY());\n            pathElements.add(new LineTo(startingPoint.getX(), startingPoint.getY()));\n            startPoint = point;\n        }\n        endingPoint = startPoint;\n        if (startingPoint != null &amp;&amp; endingPoint != null &amp;&amp; points.size() &gt; 2) {\n            shadowLastLine(startingPoint, endingPoint);\n\n        }\n        pathOfSelectedAreaWithEndJoined = new Path(pathElements);\n    }\n</code></pre>\n<p>So, back in My Question: How I can create 3dModel from the points or path I have in java to show in javafx?</p>\n<p><a href=\"https://i.stack.imgur.com/LiRjQ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LiRjQ.jpg\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p>For Update My Question, Created the 3D model with Photoshop that show what actually I'm looking for :\n<a href=\"https://i.stack.imgur.com/Tff9q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tff9q.png\" alt=\"enter image description here\" /></a>\nI have Point3D that is from Point2D and ill create 2 ArrayList from it one for top layout and other for bottom layout some of them with z=0 and the other z=(Anything user selected). But what's really Idk is How to show this! in some point Using extra library or TrianglMesh can't show it and it's make so many convert the code for showing something like that!</p>\n<hr />\n<p>Update 3:\nAs You can see from Video that uploaded as GIF , I created Application that user can point area they want and create 2D picture from canvas but my Problem is create 3D Object as Image I mention before from 2D points.</p>\n<p><a href=\"https://i.stack.imgur.com/CHvNp.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CHvNp.gif\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","database-connection","couchbase","spring-data-couchbase","couchbase-java-api"],"comments":[{"owner":{"account_id":17736,"reputation":25458,"user_id":40015,"accept_rate":84,"display_name":"Matthew Groves"},"score":0,"creation_date":1696599269,"post_id":77241878,"comment_id":136177722,"body_markdown":"What version of the Couchbase Java SDK are you using? And what version of Couchbase Server?","body":"What version of the Couchbase Java SDK are you using? And what version of Couchbase Server?"},{"owner":{"account_id":1900628,"reputation":586,"user_id":1716558,"accept_rate":64,"display_name":"Amit Sinha"},"score":1,"creation_date":1696603978,"post_id":77241878,"comment_id":136178755,"body_markdown":"sdk : 3.4.0 server : 6.6.0","body":"sdk : 3.4.0 server : 6.6.0"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1697147928,"post_id":77241878,"comment_id":136247025,"body_markdown":"Are you using Log4j2? If so, the delay might be due to this issue: https://stackoverflow.com/questions/75647869/log4j-2-20-0-takes-several-seconds-to-initialize","body":"Are you using Log4j2? If so, the delay might be due to this issue: <a href=\"https://stackoverflow.com/questions/75647869/log4j-2-20-0-takes-several-seconds-to-initialize\" title=\"log4j 2 20 0 takes several seconds to initialize\">stackoverflow.com/questions/75647869/&hellip;</a>"},{"owner":{"account_id":1900628,"reputation":586,"user_id":1716558,"accept_rate":64,"display_name":"Amit Sinha"},"score":0,"creation_date":1697212821,"post_id":77241878,"comment_id":136256037,"body_markdown":"no.. we are using slf4j","body":"no.. we are using slf4j"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1697218772,"post_id":77241878,"comment_id":136257160,"body_markdown":"SLF4J is a logging facade that routes logging requests to a specific logger implementation (like logback, logj42, etc.). Which SLF4J binding are you using?","body":"SLF4J is a logging facade that routes logging requests to a specific logger implementation (like logback, logj42, etc.). Which SLF4J binding are you using?"},{"owner":{"account_id":303087,"reputation":8621,"user_id":611819,"accept_rate":100,"display_name":"dnault"},"score":0,"creation_date":1697218808,"post_id":77241878,"comment_id":136257167,"body_markdown":"Cross-reference to discussion on Couchbase Forum: https://www.couchbase.com/forums/t/environment-creation-is-taking-too-much-time/37151","body":"Cross-reference to discussion on Couchbase Forum: <a href=\"https://www.couchbase.com/forums/t/environment-creation-is-taking-too-much-time/37151\" rel=\"nofollow noreferrer\">couchbase.com/forums/t/&hellip;</a>"}],"owner":{"account_id":1900628,"reputation":586,"user_id":1716558,"accept_rate":64,"display_name":"Amit Sinha"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1696599304,"creation_date":1696566561,"question_id":77241878,"body_markdown":"We are creating environment variable like this.\r\n\r\n            logger.info(marker, &quot;Couchbase## initializeBuckets tracerConfig start time {}&quot;, LocalDateTime.now());\r\n\r\n        ThresholdLoggingTracerConfig.Builder tracer = ThresholdLoggingTracerConfig.builder()\r\n                .emitInterval(Duration.ofMillis(tracerConfig.getLong(&quot;emitInterval&quot;, 20000L)))\r\n                .kvThreshold(Duration.ofMillis(tracerConfig.getLong(&quot;kvThreshold&quot;, 20000L)))\r\n                .queryThreshold(Duration.ofMillis(tracerConfig.getLong(&quot;n1qlThreshold&quot;, 60000L)))\r\n                .sampleSize(tracerConfig.getInteger(&quot;sampleSize&quot;, 5)).searchThreshold(Duration.ofSeconds(60));\r\n\r\n        logger.info(marker, &quot;Couchbase## initializeBuckets before environment time {}&quot;, LocalDateTime.now());\r\n\r\n        environment = ClusterEnvironment.builder()\r\n            .thresholdLoggingTracerConfig(tracer)\r\n            .retryStrategy(BestEffortRetryStrategy.INSTANCE)\r\n            .ioConfig(IoConfig.enableDnsSrv(false))\r\n            .timeoutConfig(TimeoutConfig.connectTimeout(Duration.ofMillis(\r\n                    couchbaseConfig.getLong(CONNECT_TIMEOUT, CONNECT_TIMEOUT_DEFAULT_VALUE)))\r\n                .queryTimeout(Duration.ofMillis(couchbaseConfig.\r\n                    getLong(QUERY_TIMEOUT, QUERY_TIMEOUT_DEFAULT_VALUE)))\r\n                .kvTimeout(Duration.ofMillis(couchbaseConfig.getLong(KV_TIMEOUT, KV_TIMEOUT_DEFAULT_VALUE))))\r\n            .build();\r\n\r\n        logger.info(marker, &quot;Couchbase## initializeBuckets after environment time {}&quot;, LocalDateTime.now());\r\n\r\n**It takes around 6-8 seconds to crate environment** environment variable. Even if we remove thresholdLoggingTracerConfig or use just below code to create default environment, it remains same.\r\n\r\n    environment = ClusterEnvironment.builder()\r\n\r\nIs any better way to optimize this creation and also can you please help me to understand why it takes this much time to create environment.","title":"Couchbase connection taking too much of time in java","body":"<p>We are creating environment variable like this.</p>\n<pre><code>        logger.info(marker, &quot;Couchbase## initializeBuckets tracerConfig start time {}&quot;, LocalDateTime.now());\n\n    ThresholdLoggingTracerConfig.Builder tracer = ThresholdLoggingTracerConfig.builder()\n            .emitInterval(Duration.ofMillis(tracerConfig.getLong(&quot;emitInterval&quot;, 20000L)))\n            .kvThreshold(Duration.ofMillis(tracerConfig.getLong(&quot;kvThreshold&quot;, 20000L)))\n            .queryThreshold(Duration.ofMillis(tracerConfig.getLong(&quot;n1qlThreshold&quot;, 60000L)))\n            .sampleSize(tracerConfig.getInteger(&quot;sampleSize&quot;, 5)).searchThreshold(Duration.ofSeconds(60));\n\n    logger.info(marker, &quot;Couchbase## initializeBuckets before environment time {}&quot;, LocalDateTime.now());\n\n    environment = ClusterEnvironment.builder()\n        .thresholdLoggingTracerConfig(tracer)\n        .retryStrategy(BestEffortRetryStrategy.INSTANCE)\n        .ioConfig(IoConfig.enableDnsSrv(false))\n        .timeoutConfig(TimeoutConfig.connectTimeout(Duration.ofMillis(\n                couchbaseConfig.getLong(CONNECT_TIMEOUT, CONNECT_TIMEOUT_DEFAULT_VALUE)))\n            .queryTimeout(Duration.ofMillis(couchbaseConfig.\n                getLong(QUERY_TIMEOUT, QUERY_TIMEOUT_DEFAULT_VALUE)))\n            .kvTimeout(Duration.ofMillis(couchbaseConfig.getLong(KV_TIMEOUT, KV_TIMEOUT_DEFAULT_VALUE))))\n        .build();\n\n    logger.info(marker, &quot;Couchbase## initializeBuckets after environment time {}&quot;, LocalDateTime.now());\n</code></pre>\n<p><strong>It takes around 6-8 seconds to crate environment</strong> environment variable. Even if we remove thresholdLoggingTracerConfig or use just below code to create default environment, it remains same.</p>\n<pre><code>environment = ClusterEnvironment.builder()\n</code></pre>\n<p>Is any better way to optimize this creation and also can you please help me to understand why it takes this much time to create environment.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696597126,"creation_date":1696597126,"answer_id":77244647,"question_id":77244288,"body_markdown":"To be able to get the document ID, which is `Jcrat...CEkn2`, you have to call [getId()][1] on the [QueryDocumentSnapshot][2] object like this:\r\n\r\n    FirebaseFirestore db = FirebaseFirestore.getInstance();\r\n    CollectionReference customerRef = db.collection(&quot;Customer&quot;);\r\n    Query queryByName = customerRef.whereEqualTo(&quot;Name&quot;, &quot;Karan Bapat&quot;);\r\n    queryByName.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\r\n        @Override\r\n        public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\r\n            if (task.isSuccessful()) {\r\n                for (QueryDocumentSnapshot document : task.getResult()) {\r\n                    if (document != null) {\r\n                        String docId = document.getId();\r\n                        Log.d(TAG, &quot;docId: &quot; + docId);\r\n                    }\r\n                }\r\n            } else {\r\n                Log.d(TAG, task.getException().getMessage()); //Never ignore potential errors!\r\n            }\r\n        }\r\n    });\r\n\r\nThe result in the logcat will be:\r\n\r\n    docId: Jcrat...CEkn2\r\n\r\n\r\n  [1]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#getId()\r\n  [2]: https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot","title":"Fetching Document-id using where clause (Firebase Firestore with Android Studio)","body":"<p>To be able to get the document ID, which is <code>Jcrat...CEkn2</code>, you have to call <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot#getId()\" rel=\"nofollow noreferrer\">getId()</a> on the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/firestore/DocumentSnapshot\" rel=\"nofollow noreferrer\">QueryDocumentSnapshot</a> object like this:</p>\n<pre><code>FirebaseFirestore db = FirebaseFirestore.getInstance();\nCollectionReference customerRef = db.collection(&quot;Customer&quot;);\nQuery queryByName = customerRef.whereEqualTo(&quot;Name&quot;, &quot;Karan Bapat&quot;);\nqueryByName.get().addOnCompleteListener(new OnCompleteListener&lt;QuerySnapshot&gt;() {\n    @Override\n    public void onComplete(@NonNull Task&lt;QuerySnapshot&gt; task) {\n        if (task.isSuccessful()) {\n            for (QueryDocumentSnapshot document : task.getResult()) {\n                if (document != null) {\n                    String docId = document.getId();\n                    Log.d(TAG, &quot;docId: &quot; + docId);\n                }\n            }\n        } else {\n            Log.d(TAG, task.getException().getMessage()); //Never ignore potential errors!\n        }\n    }\n});\n</code></pre>\n<p>The result in the logcat will be:</p>\n<pre><code>docId: Jcrat...CEkn2\n</code></pre>\n"}],"owner":{"account_id":29612175,"reputation":3,"user_id":22695152,"display_name":"Viraj Yekhe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77244647,"answer_count":1,"score":0,"last_activity_date":1696599051,"creation_date":1696593756,"question_id":77244288,"body_markdown":"![This is my firebase firestore database](https://i.stack.imgur.com/RrWMz.jpg)\r\n\r\nI want to get document-id where field &quot;Name&quot; = &quot;Karan Bapat&quot;. I tried using the where clause but I can get only the field values not the document id for my precise field.\r\n\r\n","title":"Fetching Document-id using where clause (Firebase Firestore with Android Studio)","body":"<p><img src=\"https://i.stack.imgur.com/RrWMz.jpg\" alt=\"This is my firebase firestore database\" /></p>\n<p>I want to get document-id where field &quot;Name&quot; = &quot;Karan Bapat&quot;. I tried using the where clause but I can get only the field values not the document id for my precise field.</p>\n"},{"tags":["java","file","url","file-uri"],"answers":[{"tags":[],"owner":{"account_id":734,"reputation":4042,"user_id":959,"accept_rate":52,"display_name":"jatanp"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1696598823,"creation_date":1323201833,"answer_id":8406074,"question_id":8406025,"body_markdown":"You may use `file:///` and file path. For e.g. `file:///c:/temp.txt`","title":"Local file protocol for java.net.URL","body":"<p>You may use <code>file:///</code> and file path. For e.g. <code>file:///c:/temp.txt</code></p>\n"},{"tags":[],"owner":{"account_id":192606,"reputation":9871,"user_id":433835,"accept_rate":95,"display_name":"Koh&#225;nyi R&#243;bert"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1333908671,"creation_date":1323202811,"answer_id":8406282,"question_id":8406025,"body_markdown":"## Unix\r\n    file://localhost/&lt;path&gt;\r\n    file:///&lt;path&gt;\r\n\r\n## Windows\r\n\r\n    file://localhost/&lt;drive&gt;|/&lt;path&gt;\r\n    file:///&lt;drive&gt;|/&lt;path&gt;\r\n    file://localhost/&lt;drive&gt;:/&lt;path&gt;\r\n    file:///&lt;drive&gt;:/&lt;path&gt;\r\n\r\nFor more information see the [related Wikipedia article][1].\r\n\r\n[1]: http://en.wikipedia.org/wiki/File_url","title":"Local file protocol for java.net.URL","body":"<h2>Unix</h2>\n\n<pre><code>file://localhost/&lt;path&gt;\nfile:///&lt;path&gt;\n</code></pre>\n\n<h2>Windows</h2>\n\n<pre><code>file://localhost/&lt;drive&gt;|/&lt;path&gt;\nfile:///&lt;drive&gt;|/&lt;path&gt;\nfile://localhost/&lt;drive&gt;:/&lt;path&gt;\nfile:///&lt;drive&gt;:/&lt;path&gt;\n</code></pre>\n\n<p>For more information see the <a href=\"http://en.wikipedia.org/wiki/File_url\" rel=\"noreferrer\">related Wikipedia article</a>.</p>\n"}],"owner":{"account_id":1089086,"reputation":367,"user_id":1084138,"accept_rate":60,"display_name":"Ziddia"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41567,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":2,"score":13,"last_activity_date":1696598823,"creation_date":1323201667,"question_id":8406025,"body_markdown":"What&#39;s the protocol for local files using URL? I&#39;ve downloaded a file using Java and I need to know how to access it, not using File, but using URL.","title":"Local file protocol for java.net.URL","body":"<p>What's the protocol for local files using URL? I've downloaded a file using Java and I need to know how to access it, not using File, but using URL.</p>\n"},{"tags":["java","internationalization","locale"],"comments":[{"owner":{"account_id":11897952,"reputation":1170,"user_id":8706759,"display_name":"Ganesh Chowdhary Sadanala"},"score":1,"creation_date":1542706468,"post_id":5379231,"comment_id":93655407,"body_markdown":"https://stackoverflow.com/questions/2544454/get-the-currency-format-for-a-country-that-does-not-have-a-locale-constant  here you can find the answer","body":"<a href=\"https://stackoverflow.com/questions/2544454/get-the-currency-format-for-a-country-that-does-not-have-a-locale-constant\" title=\"get the currency format for a country that does not have a locale constant\">stackoverflow.com/questions/2544454/&hellip;</a>  here you can find the answer"}],"answers":[{"tags":[],"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"down_vote_count":0,"up_vote_count":99,"is_accepted":true,"score":99,"last_activity_date":1597066757,"creation_date":1300719099,"answer_id":5379337,"question_id":5379231,"body_markdown":"Unfortunately on standard Java SE [`DecimalFormat`][1] doesn&#39;t support variable-width groups. So it won&#39;t ever format the values exactly as you want to:\r\n\r\n&gt; If you supply a pattern with multiple grouping characters, the interval between the last one and the end of the integer is the one that is used. So `&quot;#,##,###,####&quot; == &quot;######,####&quot; == &quot;##,####,####&quot;`.\r\n\r\nMost number formatting mechanisms in Java are based on that class and therefore inherit this flaw.\r\n\r\nICU4J (the Java version of the [International Components for Unicode][2]) provides a [`NumberFormat`][3] class that **does** support this formatting:\r\n\r\n\tFormat format = com.ibm.icu.text.NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;, &quot;in&quot;));\r\n\tSystem.out.println(format.format(new BigDecimal(&quot;100000000&quot;)));\r\n\r\nThis code will produce this output:\r\n\r\n&lt;pre&gt;Rs&#160;10,00,00,000.00&lt;/pre&gt;\r\n\r\nNote: the `com.ibm.icu.text.NumberFormat` class does **not** extend the [`java.text.NumberFormat`][4] class (because it already extends an ICU-internal base class), it **does** however extend the [`java.text.Format`][5] class, which has the [`format(Object)`][6] method.\r\n\r\nNote that the [**Android version** of `java.text.DecimalFormat`][7] class is implemented using ICU under the hood and **does** support the feature in the same way that the ICU class itself does (even though the summary incorrectly mentions that it&#39;s *not* supported).\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\r\n  [2]: http://site.icu-project.org/\r\n  [3]: http://icu-project.org/apiref/icu4j/com/ibm/icu/text/NumberFormat.html\r\n  [4]: http://download.oracle.com/javase/6/docs/api/java/text/NumberFormat.html\r\n  [5]: http://download.oracle.com/javase/6/docs/api/java/text/Format.html\r\n  [6]: http://download.oracle.com/javase/6/docs/api/java/text/Format.html#format%28java.lang.Object%29\r\n  [7]: https://developer.android.com/reference/java/text/DecimalFormat","title":"Displaying Currency in Indian Numbering Format","body":"<p>Unfortunately on standard Java SE <a href=\"http://download.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html\" rel=\"noreferrer\"><code>DecimalFormat</code></a> doesn't support variable-width groups. So it won't ever format the values exactly as you want to:</p>\n<blockquote>\n<p>If you supply a pattern with multiple grouping characters, the interval between the last one and the end of the integer is the one that is used. So <code>&quot;#,##,###,####&quot; == &quot;######,####&quot; == &quot;##,####,####&quot;</code>.</p>\n</blockquote>\n<p>Most number formatting mechanisms in Java are based on that class and therefore inherit this flaw.</p>\n<p>ICU4J (the Java version of the <a href=\"http://site.icu-project.org/\" rel=\"noreferrer\">International Components for Unicode</a>) provides a <a href=\"http://icu-project.org/apiref/icu4j/com/ibm/icu/text/NumberFormat.html\" rel=\"noreferrer\"><code>NumberFormat</code></a> class that <strong>does</strong> support this formatting:</p>\n<pre><code>Format format = com.ibm.icu.text.NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;, &quot;in&quot;));\nSystem.out.println(format.format(new BigDecimal(&quot;100000000&quot;)));\n</code></pre>\n<p>This code will produce this output:</p>\n<pre>Rs 10,00,00,000.00</pre>\n<p>Note: the <code>com.ibm.icu.text.NumberFormat</code> class does <strong>not</strong> extend the <a href=\"http://download.oracle.com/javase/6/docs/api/java/text/NumberFormat.html\" rel=\"noreferrer\"><code>java.text.NumberFormat</code></a> class (because it already extends an ICU-internal base class), it <strong>does</strong> however extend the <a href=\"http://download.oracle.com/javase/6/docs/api/java/text/Format.html\" rel=\"noreferrer\"><code>java.text.Format</code></a> class, which has the <a href=\"http://download.oracle.com/javase/6/docs/api/java/text/Format.html#format%28java.lang.Object%29\" rel=\"noreferrer\"><code>format(Object)</code></a> method.</p>\n<p>Note that the <a href=\"https://developer.android.com/reference/java/text/DecimalFormat\" rel=\"noreferrer\"><strong>Android version</strong> of <code>java.text.DecimalFormat</code></a> class is implemented using ICU under the hood and <strong>does</strong> support the feature in the same way that the ICU class itself does (even though the summary incorrectly mentions that it's <em>not</em> supported).</p>\n"},{"tags":[],"owner":{"account_id":2826515,"reputation":1158,"user_id":2429059,"accept_rate":76,"display_name":"CleanX"},"down_vote_count":11,"up_vote_count":28,"is_accepted":false,"score":17,"last_activity_date":1416394218,"creation_date":1377860774,"answer_id":18531401,"question_id":5379231,"body_markdown":"here is simple thing u can do ,\r\n\r\n     float amount = 100000;\r\n\r\n     NumberFormat formatter = NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;, &quot;IN&quot;));\r\n\r\n     String moneyString = formatter.format(amount);\r\n\r\n     System.out.println(moneyString);\r\n\r\nThe output will be Rs.100,000.00.  ","title":"Displaying Currency in Indian Numbering Format","body":"<p>here is simple thing u can do ,</p>\n\n<pre><code> float amount = 100000;\n\n NumberFormat formatter = NumberFormat.getCurrencyInstance(new Locale(\"en\", \"IN\"));\n\n String moneyString = formatter.format(amount);\n\n System.out.println(moneyString);\n</code></pre>\n\n<p>The output will be Rs.100,000.00.  </p>\n"},{"tags":[],"owner":{"account_id":210863,"reputation":814,"user_id":462703,"display_name":"Kiran"},"down_vote_count":1,"up_vote_count":32,"is_accepted":false,"score":31,"last_activity_date":1377921111,"creation_date":1377921111,"answer_id":18544311,"question_id":5379231,"body_markdown":"With Android, this worked for me:\r\n\r\n    new DecimalFormat(&quot;##,##,##0&quot;).format(amount);\r\n\r\n**450500 gets formatted as 4,50,500**\r\n\r\nhttp://developer.android.com/reference/java/text/DecimalFormat.html - DecimalFormat supports two grouping sizes - the primary grouping size, and one used for all others.","title":"Displaying Currency in Indian Numbering Format","body":"<p>With Android, this worked for me:</p>\n\n<pre><code>new DecimalFormat(\"##,##,##0\").format(amount);\n</code></pre>\n\n<p><strong>450500 gets formatted as 4,50,500</strong></p>\n\n<p><a href=\"http://developer.android.com/reference/java/text/DecimalFormat.html\">http://developer.android.com/reference/java/text/DecimalFormat.html</a> - DecimalFormat supports two grouping sizes - the primary grouping size, and one used for all others.</p>\n"},{"tags":[],"owner":{"account_id":3401594,"reputation":720,"user_id":2853611,"accept_rate":62,"display_name":"Akshat"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1386309703,"creation_date":1386309703,"answer_id":20417091,"question_id":5379231,"body_markdown":"I also got myself in same problem.\r\nI was working with `DecimalFormat`.\r\n\r\nI have no knowledge of `JSTL` but you can figure out something by my solution.\r\n\r\nAs, grouping size remains constant in `DecimalFormat`. I separated both parts, formatted them with different patterns and concat both. Here is the code.\r\n\r\n    public static String format(double value) {\r\n        if(value &lt; 1000) {\r\n            return format(&quot;###&quot;, value);\r\n        } else {\r\n            double hundreds = value % 1000;\r\n            int other = (int) (value / 1000);\r\n            return format(&quot;,##&quot;, other) + &#39;,&#39; + format(&quot;000&quot;, hundreds);\r\n        }\r\n    }\r\n    \r\n    private static String format(String pattern, Object value) {\r\n        return new DecimalFormat(pattern).format(value);\r\n    }\r\n\r\nIt will provide format like Indian Numbering System.\r\n\r\nIf you want decimal points, just add `&quot;.##&quot;` in both conditions.\r\n\r\n`&quot;###&quot;` to `&quot;###.##&quot;` and `&quot;000&quot;` to `&quot;000.##&quot;`.","title":"Displaying Currency in Indian Numbering Format","body":"<p>I also got myself in same problem.\nI was working with <code>DecimalFormat</code>.</p>\n\n<p>I have no knowledge of <code>JSTL</code> but you can figure out something by my solution.</p>\n\n<p>As, grouping size remains constant in <code>DecimalFormat</code>. I separated both parts, formatted them with different patterns and concat both. Here is the code.</p>\n\n<pre><code>public static String format(double value) {\n    if(value &lt; 1000) {\n        return format(\"###\", value);\n    } else {\n        double hundreds = value % 1000;\n        int other = (int) (value / 1000);\n        return format(\",##\", other) + ',' + format(\"000\", hundreds);\n    }\n}\n\nprivate static String format(String pattern, Object value) {\n    return new DecimalFormat(pattern).format(value);\n}\n</code></pre>\n\n<p>It will provide format like Indian Numbering System.</p>\n\n<p>If you want decimal points, just add <code>\".##\"</code> in both conditions.</p>\n\n<p><code>\"###\"</code> to <code>\"###.##\"</code> and <code>\"000\"</code> to <code>\"000.##\"</code>.</p>\n"},{"tags":[],"owner":{"account_id":4547303,"reputation":91,"user_id":3693466,"display_name":"user3693466"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401512208,"creation_date":1401512208,"answer_id":23966529,"question_id":5379231,"body_markdown":"The default methods in existing libraries can only show thousands seperator. so we need to write custom function for this. You can use multiple substring operation to get the desired result.\r\n\r\n\r\nIn java, \r\n\r\n    function indianCurrencyNumberFormat(rupee) {\r\n        string explore_remaining_units = &quot;&quot;;\r\n        if (rupee.length() &gt; 3) {\r\n            last_three_digits = rupee.substring((rupee.length()-3), rupee.length());\r\n            remaining_units = rupee.substring(0, (rupee.length()-3)); \r\n            remaining_units =  ((remaining_units.length()) % 2 == 1) ? &quot;0&quot;+remaining_units : remaining_units; \r\n            split_rupee = remaining_units.split(&quot;(?&lt;=^(.{2})+)&quot;)\r\n            for (i = 0; i &lt; sizeof(split_rupee); i++) {\r\n              explore_remaining_units += ((i == 0) ? ( (int) split_rupee[i]+&quot;,&quot; ) : ( split_rupee[i]+&quot;,&quot; ));  \r\n            }\r\n            formatted_rupee = explore_remaining_units+last_three_digits;\r\n        } else {\r\n            formatted_rupee = rupee;\r\n        }\r\n        return formatted_rupee; \r\n    }\r\n\r\nAnd in php:\r\n\r\n    function indianCurrencyNumberFormat($rupee) {\r\n        $explore_remaining_units = &quot;&quot;;\r\n        if (strlen($rupee) &gt; 3) {\r\n            $last_three_digits = substr($rupee, strlen($rupee) - 3, strlen($rupee));\r\n            $remaining_units = substr($rupee, 0, strlen($rupee) - 3); \r\n            $remaining_units = (strlen($remaining_units) % 2 == 1) ? &quot;0&quot;.$remaining_units : $remaining_units; \r\n            $split_rupee = str_split($remaining_units, 2);\r\n            for ($i = 0; $i &lt; sizeof($split_rupee); $i++) {\r\n              $explore_remaining_units .= (($i == 0) ? ( (int) $split_rupee[$i] . &quot;,&quot; ) : ( $split_rupee[$i] . &quot;,&quot; ));  \r\n            }\r\n            $formatted_rupee = $explore_remaining_units.$last_three_digits;\r\n        } else {\r\n            $formatted_rupee = $rupee;\r\n        }\r\n        return $formatted_rupee; \r\n    }\r\n\r\nYou can see more details [here][1]. \r\n\r\n\r\n  [1]: http://www.htmlexplorer.com/2014/05/indian-currency-or-rupee-number-format.html","title":"Displaying Currency in Indian Numbering Format","body":"<p>The default methods in existing libraries can only show thousands seperator. so we need to write custom function for this. You can use multiple substring operation to get the desired result.</p>\n\n<p>In java, </p>\n\n<pre><code>function indianCurrencyNumberFormat(rupee) {\n    string explore_remaining_units = \"\";\n    if (rupee.length() &gt; 3) {\n        last_three_digits = rupee.substring((rupee.length()-3), rupee.length());\n        remaining_units = rupee.substring(0, (rupee.length()-3)); \n        remaining_units =  ((remaining_units.length()) % 2 == 1) ? \"0\"+remaining_units : remaining_units; \n        split_rupee = remaining_units.split(\"(?&lt;=^(.{2})+)\")\n        for (i = 0; i &lt; sizeof(split_rupee); i++) {\n          explore_remaining_units += ((i == 0) ? ( (int) split_rupee[i]+\",\" ) : ( split_rupee[i]+\",\" ));  \n        }\n        formatted_rupee = explore_remaining_units+last_three_digits;\n    } else {\n        formatted_rupee = rupee;\n    }\n    return formatted_rupee; \n}\n</code></pre>\n\n<p>And in php:</p>\n\n<pre><code>function indianCurrencyNumberFormat($rupee) {\n    $explore_remaining_units = \"\";\n    if (strlen($rupee) &gt; 3) {\n        $last_three_digits = substr($rupee, strlen($rupee) - 3, strlen($rupee));\n        $remaining_units = substr($rupee, 0, strlen($rupee) - 3); \n        $remaining_units = (strlen($remaining_units) % 2 == 1) ? \"0\".$remaining_units : $remaining_units; \n        $split_rupee = str_split($remaining_units, 2);\n        for ($i = 0; $i &lt; sizeof($split_rupee); $i++) {\n          $explore_remaining_units .= (($i == 0) ? ( (int) $split_rupee[$i] . \",\" ) : ( $split_rupee[$i] . \",\" ));  \n        }\n        $formatted_rupee = $explore_remaining_units.$last_three_digits;\n    } else {\n        $formatted_rupee = $rupee;\n    }\n    return $formatted_rupee; \n}\n</code></pre>\n\n<p>You can see more details <a href=\"http://www.htmlexplorer.com/2014/05/indian-currency-or-rupee-number-format.html\" rel=\"nofollow\">here</a>. </p>\n"},{"tags":[],"owner":{"account_id":1307549,"reputation":2032,"user_id":1256210,"display_name":"Nishant Shah"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1437110944,"creation_date":1437034406,"answer_id":31448792,"question_id":5379231,"body_markdown":"![enter image description here][1]\r\n\r\nJust Copy past this function. :)\r\n\r\n      public static String rupeeFormat(String value){\r\n                value=value.replace(&quot;,&quot;,&quot;&quot;);\r\n                char lastDigit=value.charAt(value.length()-1);\r\n                String result = &quot;&quot;;\r\n                int len = value.length()-1;\r\n                int nDigits = 0;\r\n        \r\n                for (int i = len - 1; i &gt;= 0; i--)\r\n                {\r\n                    result = value.charAt(i) + result;\r\n                    nDigits++;\r\n                    if (((nDigits % 2) == 0) &amp;&amp; (i &gt; 0))\r\n                    {\r\n                        result = &quot;,&quot; + result;\r\n                    }\r\n                }\r\n                return (result+lastDigit);\r\n            }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/jiSm0.gif","title":"Displaying Currency in Indian Numbering Format","body":"<p><img src=\"https://i.stack.imgur.com/jiSm0.gif\" alt=\"enter image description here\"></p>\n\n<p>Just Copy past this function. :)</p>\n\n<pre><code>  public static String rupeeFormat(String value){\n            value=value.replace(\",\",\"\");\n            char lastDigit=value.charAt(value.length()-1);\n            String result = \"\";\n            int len = value.length()-1;\n            int nDigits = 0;\n\n            for (int i = len - 1; i &gt;= 0; i--)\n            {\n                result = value.charAt(i) + result;\n                nDigits++;\n                if (((nDigits % 2) == 0) &amp;&amp; (i &gt; 0))\n                {\n                    result = \",\" + result;\n                }\n            }\n            return (result+lastDigit);\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6021664,"reputation":61,"user_id":4728543,"display_name":"NikHiL Bonte"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1457504043,"creation_date":1457504043,"answer_id":35884293,"question_id":5379231,"body_markdown":"The simple solution is -\r\n\r\n    Double amount = 5356673553123.0; //amount is an example ,can be used with any double value\r\n\r\n    **DecimalFormat IndianCurrencyFormat = new DecimalFormat(&quot;##,##,###.00&quot;);**\r\n\r\nthen use it as -\r\n\r\n    String formattedAmount = IndianCurrencyFormat.format(amount);","title":"Displaying Currency in Indian Numbering Format","body":"<p>The simple solution is -</p>\n\n<pre><code>Double amount = 5356673553123.0; //amount is an example ,can be used with any double value\n\n**DecimalFormat IndianCurrencyFormat = new DecimalFormat(\"##,##,###.00\");**\n</code></pre>\n\n<p>then use it as -</p>\n\n<pre><code>String formattedAmount = IndianCurrencyFormat.format(amount);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9271619,"reputation":1,"user_id":6885393,"display_name":"Amit gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1474950275,"creation_date":1474944587,"answer_id":39715256,"question_id":5379231,"body_markdown":"    import java.util.*;\r\n    \r\n    public class string1 {\r\n    \r\n    \t public static void main(String args[])\r\n    \t {\r\n    \t\t int i,j;\r\n    \t\t boolean op=false;\r\n    \t\t  \r\n    \t\t StringBuffer sbuffer = new StringBuffer();\r\n    \t\t Scanner input = new Scanner(System.in);\r\n    \t\t System.out.println(&quot;Enter a string&quot;);\r\n    \t\t sbuffer.append(input.nextLine());\r\n    \t\t\r\n    \t\t int length=sbuffer.length();\r\n    \t\t if(sbuffer.length()&lt;3)\r\n    \t\t {\r\n    \t\t\t System.out.println(&quot;string=&quot;+sbuffer);\r\n    \t\t }\r\n    \t\t else\r\n    \t\t {\r\n    \t\t\t for ( i = sbuffer.length(); i &gt;0; i--) \r\n    \t\t\t {\r\n    \t\t\t\t \r\n    \t\t\t\t if (i==length-3)\r\n    \t\t\t\t {\r\n    \t\t\t\t\t sbuffer.insert(i, &quot;,&quot;);\r\n    \t\t\t\t\t  op=true;\r\n    \t\t\t\t }\r\n    \t\t\t\t while(i&gt;1 &amp;&amp; op==true)\r\n    \t\t\t\t {\r\n    \t\t\t\t\t i=i-2;\r\n    \t\t\t\t\t \r\n    \t\t\t\t\t if(i&gt;=1)\r\n    \t\t\t\t\t {\r\n    \t\t\t\t\t\r\n    \t\t\t\t\t sbuffer.insert(i, &quot;,&quot;);\r\n    \t\t\t\t\t }\r\n    \t\t\t\t }\r\n    \t\t\t }\r\n    \t\t\t\r\n    \t\t }\r\n    \t\t System.out.println(&quot;string=&quot;+sbuffer);\r\n    \t }\r\n    }\r\n\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code>import java.util.*;\n\npublic class string1 {\n\n     public static void main(String args[])\n     {\n         int i,j;\n         boolean op=false;\n\n         StringBuffer sbuffer = new StringBuffer();\n         Scanner input = new Scanner(System.in);\n         System.out.println(\"Enter a string\");\n         sbuffer.append(input.nextLine());\n\n         int length=sbuffer.length();\n         if(sbuffer.length()&lt;3)\n         {\n             System.out.println(\"string=\"+sbuffer);\n         }\n         else\n         {\n             for ( i = sbuffer.length(); i &gt;0; i--) \n             {\n\n                 if (i==length-3)\n                 {\n                     sbuffer.insert(i, \",\");\n                      op=true;\n                 }\n                 while(i&gt;1 &amp;&amp; op==true)\n                 {\n                     i=i-2;\n\n                     if(i&gt;=1)\n                     {\n\n                     sbuffer.insert(i, \",\");\n                     }\n                 }\n             }\n\n         }\n         System.out.println(\"string=\"+sbuffer);\n     }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2121092,"reputation":71,"user_id":1884314,"display_name":"G M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480607394,"creation_date":1480607394,"answer_id":40914976,"question_id":5379231,"body_markdown":"    //Input:\r\n    long num = 450500;\r\n\r\n    // Unlike other countries, there is no direct Locale field for India.Therefore, we need to construct a locale for India.\r\n    Locale loc = new Locale(&quot;en&quot;, &quot;in&quot;); // This will display currency with &quot;Rs.&quot; symbol.\r\n\r\n    // or use below to display currency with &quot;INR&quot; symbol.\r\n    Locale loc = new Locale(&quot;&quot;, &quot;in&quot;);\r\n\r\n    NumberFormat indiacurrency = NumberFormat.getCurrencyInstance(loc);\r\n    String result = indiacurrency.format(num);\r\n    System.out.print(result);","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code>//Input:\nlong num = 450500;\n\n// Unlike other countries, there is no direct Locale field for India.Therefore, we need to construct a locale for India.\nLocale loc = new Locale(\"en\", \"in\"); // This will display currency with \"Rs.\" symbol.\n\n// or use below to display currency with \"INR\" symbol.\nLocale loc = new Locale(\"\", \"in\");\n\nNumberFormat indiacurrency = NumberFormat.getCurrencyInstance(loc);\nString result = indiacurrency.format(num);\nSystem.out.print(result);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6252463,"reputation":1657,"user_id":4862126,"accept_rate":100,"display_name":"Er. Kaushik Kajavadara"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484897989,"creation_date":1484897989,"answer_id":41758401,"question_id":5379231,"body_markdown":"It is better answer and works dynamically instead of specifying single Locale in code manually.\r\n\r\n    public String convertToDefaultCurrencyFormat(String amountToConvert){\r\n        NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.getDefault());\r\n        String moneyString = formatter.format(Double.valueOf(amountToConvert));\r\n        return moneyString;\r\n    }   \r\n\r\nfor Indian rupees format change Language in your Android device:\r\n\r\n`Setting &gt; Language &amp; Input Settings &gt;` choose `English(India)`\r\n\r\nOutput:\r\n\r\n    ₹10,00,000 (Starting with Indian Rupee symbol)\r\n\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<p>It is better answer and works dynamically instead of specifying single Locale in code manually.</p>\n\n<pre><code>public String convertToDefaultCurrencyFormat(String amountToConvert){\n    NumberFormat formatter = NumberFormat.getCurrencyInstance(Locale.getDefault());\n    String moneyString = formatter.format(Double.valueOf(amountToConvert));\n    return moneyString;\n}   \n</code></pre>\n\n<p>for Indian rupees format change Language in your Android device:</p>\n\n<p><code>Setting &gt; Language &amp; Input Settings &gt;</code> choose <code>English(India)</code></p>\n\n<p>Output:</p>\n\n<pre><code>₹10,00,000 (Starting with Indian Rupee symbol)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5129789,"reputation":1961,"user_id":4110413,"accept_rate":50,"display_name":"Palanivelraghul"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1489394552,"creation_date":1489394552,"answer_id":42759423,"question_id":5379231,"body_markdown":"    public String getIndianCurrencyFormat(String amount) {\r\n        StringBuilder stringBuilder = new StringBuilder();\r\n        char amountArray[] = amount.toCharArray();\r\n        int a = 0, b = 0;\r\n        for (int i = amountArray.length - 1; i &gt;= 0; i--) {\r\n            if (a &lt; 3) {\r\n                stringBuilder.append(amountArray[i]);\r\n                a++;\r\n            } else if (b &lt; 2) {\r\n                if (b == 0) {\r\n                    stringBuilder.append(&quot;,&quot;);\r\n                    stringBuilder.append(amountArray[i]);\r\n                    b++;\r\n                } else {\r\n                    stringBuilder.append(amountArray[i]);\r\n                    b = 0;\r\n                }\r\n            }\r\n        }\r\n        return stringBuilder.reverse().toString();\r\n    }\r\n\r\n\r\nThis is what i did, for getting Indian currency format. if input is 1234567890 means output is 1,23,45,67,890.","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code>public String getIndianCurrencyFormat(String amount) {\n    StringBuilder stringBuilder = new StringBuilder();\n    char amountArray[] = amount.toCharArray();\n    int a = 0, b = 0;\n    for (int i = amountArray.length - 1; i &gt;= 0; i--) {\n        if (a &lt; 3) {\n            stringBuilder.append(amountArray[i]);\n            a++;\n        } else if (b &lt; 2) {\n            if (b == 0) {\n                stringBuilder.append(\",\");\n                stringBuilder.append(amountArray[i]);\n                b++;\n            } else {\n                stringBuilder.append(amountArray[i]);\n                b = 0;\n            }\n        }\n    }\n    return stringBuilder.reverse().toString();\n}\n</code></pre>\n\n<p>This is what i did, for getting Indian currency format. if input is 1234567890 means output is 1,23,45,67,890.</p>\n"},{"tags":[],"owner":{"account_id":11029465,"reputation":1,"user_id":8101206,"display_name":"Deepak Bhardwaj"},"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1521701930,"creation_date":1496379667,"answer_id":44321126,"question_id":5379231,"body_markdown":"&gt; ALTER FUNCTION [dbo].[udf_CurrencyFormat](@UC varchar(50)) RETURNS\r\n&gt; varchar(50) AS BEGIN declare @FC varchar(50),@Scale varchar(3),@i\r\n&gt; bigint=1,@a int=3,@b int=2,@WhileLength bigint,@UCScale varchar(50),\r\n&gt; @Con varchar(20) set @Scale=charindex(&#39;.&#39;,@UC) --if number has &#39;.&#39;\r\n&gt; then value else &#39;0&#39; if(@Scale!=&#39;0&#39;) begin set @UCScale=@UC set\r\n&gt; @Con=substring(@UCScale,charindex(&#39;.&#39;,@UCScale),3) set\r\n&gt; @UC=substring(@UC,0,charindex(&#39;.&#39;,@UC)) -- substring end\r\n&gt; if(cast(len(@UC) as bigint)%2!=0) --if odd begin set\r\n&gt; @WhileLength=(cast(len(@UC) as bigint)-3)/2 while(@i&lt;=@WhileLength) --\r\n&gt; length-3/2=3 if length is 9 (cast(len(@UC) as bigint)-3)/2 begin set\r\n&gt; @a=3*@i set @UC = stuff(@UC,@a,0,&#39;,&#39;) set @i=@i+1 end --while set\r\n&gt; @FC=@UC end --if odd Scale &#39;0&#39; else if(cast(len(@UC) as bigint)%2=0)\r\n&gt; --if even begin set @WhileLength=(((cast(len(@UC) as bigint)-1)-3)/2)+1 while(@i&lt;=@WhileLength) begin if(@i=1) begin set\r\n&gt; @UC=stuff(@UC,@b,0,&#39;,&#39;) end else begin set @b=@b+3 set\r\n&gt; @UC=stuff(@UC,@b,0,&#39;,&#39;) end set @i=@i+1 end set @FC=@UC end\r\n&gt; if(@Scale!=&#39;0&#39;) begin set @FC=@FC+@Con end --if(@Scale!=&#39;0&#39;) --set\r\n&gt; @FC=@UC return @FC END","title":"Displaying Currency in Indian Numbering Format","body":"<blockquote>\n  <p>ALTER FUNCTION [dbo].[udf_CurrencyFormat](@UC varchar(50)) RETURNS\n  varchar(50) AS BEGIN declare @FC varchar(50),@Scale varchar(3),@i\n  bigint=1,@a int=3,@b int=2,@WhileLength bigint,@UCScale varchar(50),\n  @Con varchar(20) set @Scale=charindex('.',@UC) --if number has '.'\n  then value else '0' if(@Scale!='0') begin set @UCScale=@UC set\n  @Con=substring(@UCScale,charindex('.',@UCScale),3) set\n  @UC=substring(@UC,0,charindex('.',@UC)) -- substring end\n  if(cast(len(@UC) as bigint)%2!=0) --if odd begin set\n  @WhileLength=(cast(len(@UC) as bigint)-3)/2 while(@i&lt;=@WhileLength) --\n  length-3/2=3 if length is 9 (cast(len(@UC) as bigint)-3)/2 begin set\n  @a=3*@i set @UC = stuff(@UC,@a,0,',') set @i=@i+1 end --while set\n  @FC=@UC end --if odd Scale '0' else if(cast(len(@UC) as bigint)%2=0)\n  --if even begin set @WhileLength=(((cast(len(@UC) as bigint)-1)-3)/2)+1 while(@i&lt;=@WhileLength) begin if(@i=1) begin set\n  @UC=stuff(@UC,@b,0,',') end else begin set @b=@b+3 set\n  @UC=stuff(@UC,@b,0,',') end set @i=@i+1 end set @FC=@UC end\n  if(@Scale!='0') begin set @FC=@FC+@Con end --if(@Scale!='0') --set\n  @FC=@UC return @FC END</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4159299,"reputation":1799,"user_id":3409734,"accept_rate":100,"display_name":"SimplyProgrammer"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1501502896,"creation_date":1501136521,"answer_id":45342807,"question_id":5379231,"body_markdown":"If there is no default Locale available and the user doesn&#39;t make any change to the locale, we can go with setting the currency symbol using unicode and decimal formatting. As in the below code:\r\n\r\nFor e.g. Setting the Indian currency symbol and formatting the value. This will work without user making changes in the settings.\r\n\r\n        Locale locale = new Locale(&quot;en&quot;,&quot;IN&quot;);\r\n        DecimalFormat decimalFormat = (DecimalFormat) DecimalFormat.getCurrencyInstance(locale);\r\n        DecimalFormatSymbols dfs = DecimalFormatSymbols.getInstance(locale);\r\n        dfs.setCurrencySymbol(&quot;\\u20B9&quot;);\r\n        decimalFormat.setDecimalFormatSymbols(dfs);\r\n        System.out.println(decimalFormat.format(payment));\r\n\r\nOutput:\r\n\r\n    ₹12,324.13","title":"Displaying Currency in Indian Numbering Format","body":"<p>If there is no default Locale available and the user doesn't make any change to the locale, we can go with setting the currency symbol using unicode and decimal formatting. As in the below code:</p>\n\n<p>For e.g. Setting the Indian currency symbol and formatting the value. This will work without user making changes in the settings.</p>\n\n<pre><code>    Locale locale = new Locale(\"en\",\"IN\");\n    DecimalFormat decimalFormat = (DecimalFormat) DecimalFormat.getCurrencyInstance(locale);\n    DecimalFormatSymbols dfs = DecimalFormatSymbols.getInstance(locale);\n    dfs.setCurrencySymbol(\"\\u20B9\");\n    decimalFormat.setDecimalFormatSymbols(dfs);\n    System.out.println(decimalFormat.format(payment));\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>₹12,324.13\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2352671,"reputation":61,"user_id":2061158,"display_name":"ankit209"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1507795001,"creation_date":1507795001,"answer_id":46704341,"question_id":5379231,"body_markdown":"On Android android.icu.text.NumberFormat is available after api level 24 only. So to support lower version I wrote my own method in java.\r\n\r\n    public static String formatIndianCommaSeparated(long rupee){\r\n        // remove sign if present\r\n        String raw = String.valueOf(Math.abs(rupee));\r\n        int numDigits = raw.length();\r\n        StringBuilder sb = new StringBuilder(raw);\r\n        // Reverse the string to start from right most digits\r\n        sb = sb.reverse();\r\n        // Counter to keep track of number of commas placed\r\n        int commas = 0;\r\n        for (int i=0; i&lt;numDigits; i++){\r\n            // Insert a comma if i is in the range [3, 5, 7, 9, ...)\r\n            if (i % 2 == 1 &amp;&amp; i != 1 ){\r\n                sb.insert(i+commas, &quot;,&quot;);\r\n                commas++;\r\n            }\r\n        }\r\n        // Reverse the string back to get original number\r\n        String sign = (rupee &lt; 0) ? &quot;-&quot; : &quot;&quot;;\r\n        return sign + sb.reverse().toString();\r\n    }","title":"Displaying Currency in Indian Numbering Format","body":"<p>On Android android.icu.text.NumberFormat is available after api level 24 only. So to support lower version I wrote my own method in java.</p>\n\n<pre><code>public static String formatIndianCommaSeparated(long rupee){\n    // remove sign if present\n    String raw = String.valueOf(Math.abs(rupee));\n    int numDigits = raw.length();\n    StringBuilder sb = new StringBuilder(raw);\n    // Reverse the string to start from right most digits\n    sb = sb.reverse();\n    // Counter to keep track of number of commas placed\n    int commas = 0;\n    for (int i=0; i&lt;numDigits; i++){\n        // Insert a comma if i is in the range [3, 5, 7, 9, ...)\n        if (i % 2 == 1 &amp;&amp; i != 1 ){\n            sb.insert(i+commas, \",\");\n            commas++;\n        }\n    }\n    // Reverse the string back to get original number\n    String sign = (rupee &lt; 0) ? \"-\" : \"\";\n    return sign + sb.reverse().toString();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1563603,"reputation":1989,"user_id":1452884,"accept_rate":50,"display_name":"Kavin Varnan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1509513749,"creation_date":1509513749,"answer_id":47048699,"question_id":5379231,"body_markdown":"Kotlin version, It works on Android API 26\r\n\r\n    fun currencyLocale(value: Double): String {\r\n        val formatter = NumberFormat.getCurrencyInstance(Locale(&quot;en&quot;, &quot;in&quot;))\r\n        return formatter.format(value)\r\n    }\r\n\r\n    fun parseCommaSeparatedCurrency(value: String): Number {\r\n        return NumberFormat.getCurrencyInstance(Locale(&quot;en&quot;, &quot;in&quot;)).parse(value)\r\n    }","title":"Displaying Currency in Indian Numbering Format","body":"<p>Kotlin version, It works on Android API 26</p>\n\n<pre><code>fun currencyLocale(value: Double): String {\n    val formatter = NumberFormat.getCurrencyInstance(Locale(\"en\", \"in\"))\n    return formatter.format(value)\n}\n\nfun parseCommaSeparatedCurrency(value: String): Number {\n    return NumberFormat.getCurrencyInstance(Locale(\"en\", \"in\")).parse(value)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11790565,"reputation":129,"user_id":8626847,"display_name":"Charudatta Joshi"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1574237525,"creation_date":1574237525,"answer_id":58949528,"question_id":5379231,"body_markdown":"Few options that I explored are as below\r\n\r\n\t\timport java.text.NumberFormat;\r\n\t\timport java.util.Locale;\r\n\r\n\t\tclass NumberFormatDemo {\r\n\r\n\t\t\tpublic static void main(String[] args) {\r\n\t\t\t\tDouble d = 45124853123456.78941;\r\n\t\t\t\tNumberFormat nf = NumberFormat.getInstance(Locale.ITALY);\r\n\t\t\t\tSystem.out.println(&quot;ITALY representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\tnf = NumberFormat.getInstance(Locale.GERMANY);\r\n\t\t\t\tSystem.out.println(&quot;GERMANY representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\tnf = NumberFormat.getInstance(Locale.CHINESE);\r\n\t\t\t\tSystem.out.println(&quot;CHINESE representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\tnf = NumberFormat.getInstance(Locale.US);\r\n\t\t\t\tSystem.out.println(&quot;US representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\tnf = NumberFormat.getInstance(Locale.ENGLISH);\r\n\t\t\t\tSystem.out.println(&quot;ENGLISH representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\tnf = NumberFormat.getInstance(Locale.UK);\r\n\t\t\t\tSystem.out.println(&quot;UK representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\r\n\t\t\t\t//===================================================\r\n\t\t\t\t//ICU4j example\r\n\t\t\t\tcom.ibm.icu.text.NumberFormat format = com.ibm.icu.text.NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;, &quot;in&quot;));\r\n\t\t\t\tSystem.out.println(&quot;INDIA representation of &quot; + d + &quot; : &quot; + nf.format(d));\r\n\t\t\t}\r\n\t\t}\r\n\r\nThe last one reacquires following dependency\r\n\r\n    &lt;dependency&gt;\r\n    &lt;groupId&gt;com.ibm.icu&lt;/groupId&gt;\r\n    &lt;artifactId&gt;icu4j&lt;/artifactId&gt;\r\n    &lt;version&gt;65.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    \r\n\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<p>Few options that I explored are as below</p>\n\n<pre><code>    import java.text.NumberFormat;\n    import java.util.Locale;\n\n    class NumberFormatDemo {\n\n        public static void main(String[] args) {\n            Double d = 45124853123456.78941;\n            NumberFormat nf = NumberFormat.getInstance(Locale.ITALY);\n            System.out.println(\"ITALY representation of \" + d + \" : \" + nf.format(d));\n\n            nf = NumberFormat.getInstance(Locale.GERMANY);\n            System.out.println(\"GERMANY representation of \" + d + \" : \" + nf.format(d));\n\n            nf = NumberFormat.getInstance(Locale.CHINESE);\n            System.out.println(\"CHINESE representation of \" + d + \" : \" + nf.format(d));\n\n            nf = NumberFormat.getInstance(Locale.US);\n            System.out.println(\"US representation of \" + d + \" : \" + nf.format(d));\n\n            nf = NumberFormat.getInstance(Locale.ENGLISH);\n            System.out.println(\"ENGLISH representation of \" + d + \" : \" + nf.format(d));\n\n            nf = NumberFormat.getInstance(Locale.UK);\n            System.out.println(\"UK representation of \" + d + \" : \" + nf.format(d));\n\n            //===================================================\n            //ICU4j example\n            com.ibm.icu.text.NumberFormat format = com.ibm.icu.text.NumberFormat.getCurrencyInstance(new Locale(\"en\", \"in\"));\n            System.out.println(\"INDIA representation of \" + d + \" : \" + nf.format(d));\n        }\n    }\n</code></pre>\n\n<p>The last one reacquires following dependency</p>\n\n<pre><code>&lt;dependency&gt;\n&lt;groupId&gt;com.ibm.icu&lt;/groupId&gt;\n&lt;artifactId&gt;icu4j&lt;/artifactId&gt;\n&lt;version&gt;65.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16706790,"reputation":1,"user_id":12075104,"display_name":"Karun Kumar"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1580065777,"creation_date":1580065777,"answer_id":59921767,"question_id":5379231,"body_markdown":"```\r\n fun currencyFormatter(inputNumbers: String?): String {\r\n        var formattedNumber = &quot;&quot;\r\n        var decimalPoint=&quot;&quot;\r\n        var inputNumber=&quot;&quot;\r\n\r\n        if (inputNumbers != null) {\r\n            try {\r\n                val sp=inputNumbers.split(&quot;.&quot;)\r\n                inputNumber=sp[0]\r\n                decimalPoint=sp[1]\r\n            } catch (e: Exception) {\r\n                inputNumber=inputNumbers\r\n            }\r\n\r\n\r\n            formattedNumber = when {\r\n                inputNumber.length &lt;= 3 -&gt; {\r\n                    inputNumber\r\n                }\r\n                inputNumber.length &lt;= 5 -&gt; {\r\n                    String.format(&quot;%s,%s&quot;, inputNumber.substring(0, inputNumber.length - 3),\r\n                        inputNumber.substring(inputNumber.length - 3))\r\n                }\r\n                inputNumber.length &lt;= 7 -&gt; {\r\n                    String.format(&quot;%s,%s,%s&quot;,\r\n                        inputNumber.substring(0, inputNumber.length - 5),\r\n                        inputNumber.substring(inputNumber.length - 5, inputNumber.length - 3),\r\n                        inputNumber.substring(inputNumber.length - 3)\r\n                    )\r\n                }\r\n                inputNumber.length &lt;= 9 -&gt; {\r\n                    String.format(&quot;%s,%s,%s,%s&quot;,\r\n                        inputNumber.substring(0, inputNumber.length - 7),\r\n                        inputNumber.substring(inputNumber.length - 7, inputNumber.length - 5),\r\n                        inputNumber.substring(inputNumber.length - 5, inputNumber.length - 3),\r\n                        inputNumber.substring(inputNumber.length - 3)\r\n                    )\r\n                }\r\n                else -&gt; inputNumber\r\n            }\r\n        }\r\n        return &quot;$formattedNumber.$decimalPoint&quot;\r\n    }\r\n\r\nmain(){\r\n val rs=1200.55f\r\n    print(currencyFormatter(rs.toString()))\r\n}\r\n\r\n```\r\n\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code> fun currencyFormatter(inputNumbers: String?): String {\n        var formattedNumber = \"\"\n        var decimalPoint=\"\"\n        var inputNumber=\"\"\n\n        if (inputNumbers != null) {\n            try {\n                val sp=inputNumbers.split(\".\")\n                inputNumber=sp[0]\n                decimalPoint=sp[1]\n            } catch (e: Exception) {\n                inputNumber=inputNumbers\n            }\n\n\n            formattedNumber = when {\n                inputNumber.length &lt;= 3 -&gt; {\n                    inputNumber\n                }\n                inputNumber.length &lt;= 5 -&gt; {\n                    String.format(\"%s,%s\", inputNumber.substring(0, inputNumber.length - 3),\n                        inputNumber.substring(inputNumber.length - 3))\n                }\n                inputNumber.length &lt;= 7 -&gt; {\n                    String.format(\"%s,%s,%s\",\n                        inputNumber.substring(0, inputNumber.length - 5),\n                        inputNumber.substring(inputNumber.length - 5, inputNumber.length - 3),\n                        inputNumber.substring(inputNumber.length - 3)\n                    )\n                }\n                inputNumber.length &lt;= 9 -&gt; {\n                    String.format(\"%s,%s,%s,%s\",\n                        inputNumber.substring(0, inputNumber.length - 7),\n                        inputNumber.substring(inputNumber.length - 7, inputNumber.length - 5),\n                        inputNumber.substring(inputNumber.length - 5, inputNumber.length - 3),\n                        inputNumber.substring(inputNumber.length - 3)\n                    )\n                }\n                else -&gt; inputNumber\n            }\n        }\n        return \"$formattedNumber.$decimalPoint\"\n    }\n\nmain(){\n val rs=1200.55f\n    print(currencyFormatter(rs.toString()))\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17805641,"reputation":11,"user_id":12931414,"display_name":"Babu K"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582225053,"creation_date":1582192851,"answer_id":60317285,"question_id":5379231,"body_markdown":"\tpublic static String paiseToString(long paise)\r\n\t{\r\n\t    DecimalFormat fmt = new DecimalFormat(&quot;#0.00&quot;);\r\n        boolean minus = paise &lt; 0;\r\n\t    StringBuilder sb = new StringBuilder(fmt.format(Math.abs(paise)/100.0));\r\n\t    for (int index = sb.length()-6; index &gt; 0; index-=2)\r\n\t    {\r\n\t        sb.insert(index,&#39;,&#39;);\r\n\t    }\r\n        if (minus)\r\n           sb.insert(0,&#39;-&#39;);\r\n\t    return sb.toString();\r\n\t}\r\n\t\r\n    public static String rupeesToString(long rupees)\r\n    {\r\n        boolean minus = rupees &lt; 0;\r\n        StringBuilder sb = new StringBuilder(Long.toString(Math.abs(rupees)));\r\n        for (int index = sb.length()-3; index &gt; 0; index-=2)\r\n        {\r\n            sb.insert(index,&#39;,&#39;);\r\n        }\r\n        if (minus)\r\n           sb.insert(0,&#39;-&#39;);\r\n        return sb.toString();\r\n    }\r\n    \r\n    // Test the functions\r\n\tpublic static void main(String[] args)\r\n\t{\r\n\t    // Test for positive values\r\n\t    long val = 1;\r\n\t    while (val &lt; Long.MAX_VALUE/10)\r\n\t    {\r\n\t        System.out.printf(&quot;%28s %28s\\n&quot;,paiseToString(val),rupeesToString(val));\r\n\t        val *= 10;\r\n\t    }\r\n\t    // Test for negative values\r\n\t    val = -1;\r\n        while (val &gt; Long.MIN_VALUE/10)\r\n        {\r\n            System.out.printf(&quot;%28s %28s\\n&quot;,paiseToString(val),rupeesToString(val));\r\n            val *= 10;\r\n        }\t    \r\n\t}\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code>public static String paiseToString(long paise)\n{\n    DecimalFormat fmt = new DecimalFormat(\"#0.00\");\n    boolean minus = paise &lt; 0;\n    StringBuilder sb = new StringBuilder(fmt.format(Math.abs(paise)/100.0));\n    for (int index = sb.length()-6; index &gt; 0; index-=2)\n    {\n        sb.insert(index,',');\n    }\n    if (minus)\n       sb.insert(0,'-');\n    return sb.toString();\n}\n\npublic static String rupeesToString(long rupees)\n{\n    boolean minus = rupees &lt; 0;\n    StringBuilder sb = new StringBuilder(Long.toString(Math.abs(rupees)));\n    for (int index = sb.length()-3; index &gt; 0; index-=2)\n    {\n        sb.insert(index,',');\n    }\n    if (minus)\n       sb.insert(0,'-');\n    return sb.toString();\n}\n\n// Test the functions\npublic static void main(String[] args)\n{\n    // Test for positive values\n    long val = 1;\n    while (val &lt; Long.MAX_VALUE/10)\n    {\n        System.out.printf(\"%28s %28s\\n\",paiseToString(val),rupeesToString(val));\n        val *= 10;\n    }\n    // Test for negative values\n    val = -1;\n    while (val &gt; Long.MIN_VALUE/10)\n    {\n        System.out.printf(\"%28s %28s\\n\",paiseToString(val),rupeesToString(val));\n        val *= 10;\n    }       \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12379204,"reputation":957,"user_id":9025616,"display_name":"Nilesh B"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585748334,"creation_date":1585748334,"answer_id":60972184,"question_id":5379231,"body_markdown":"Working fine for me in Android:\r\n\r\n    public static String priceFormatWithDec(String price) {\r\n        DecimalFormat decimalFormat = new DecimalFormat(&quot;#,##,###.00&quot;);\r\n        String format = decimalFormat.format(Double.parseDouble(price));\r\n        return String.format(&quot;%s&quot;, format);\r\n    }","title":"Displaying Currency in Indian Numbering Format","body":"<p>Working fine for me in Android:</p>\n\n<pre><code>public static String priceFormatWithDec(String price) {\n    DecimalFormat decimalFormat = new DecimalFormat(\"#,##,###.00\");\n    String format = decimalFormat.format(Double.parseDouble(price));\n    return String.format(\"%s\", format);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18133099,"reputation":180,"user_id":13187977,"display_name":"Siddhant Ranjan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1589223556,"creation_date":1589223556,"answer_id":61737277,"question_id":5379231,"body_markdown":"using Locale class and getCurrencyInstance the Indian currency format can be obtained.\r\n\r\nwhile defining the new Locale for India use &quot;en&quot; for English and &quot;hi&quot; for Hindi.\r\n\r\nfor locale refer https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\r\n\r\nfor getCurrencyInstance refer https://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getCurrencyInstance--\r\n\r\nhere is a small implementation of the same.\r\n\r\n    import java.util.*;\r\n    import java.text.*;\r\n    import java.text.NumberFormat;\r\n    import java.util.Locale;\r\n\r\n    public class Solution {\r\n     \r\n        public static void main(String[] args) {\r\n        Scanner scanner = new Scanner(System.in);\r\n        double payment = scanner.nextDouble();\r\n        scanner.close();\r\n\t      \r\n        Locale indialocale=new Locale(&quot;en&quot;,&quot;IN&quot;);\r\n\t\tNumberFormat india  = NumberFormat.getCurrencyInstance(indialocale);\r\n        System.out.println(&quot;India: &quot; + india.format(payment));\r\n        }\r\n}\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<p>using Locale class and getCurrencyInstance the Indian currency format can be obtained.</p>\n\n<p>while defining the new Locale for India use \"en\" for English and \"hi\" for Hindi.</p>\n\n<p>for locale refer <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html</a></p>\n\n<p>for getCurrencyInstance refer <a href=\"https://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getCurrencyInstance--\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/text/NumberFormat.html#getCurrencyInstance--</a></p>\n\n<p>here is a small implementation of the same.</p>\n\n<pre><code>import java.util.*;\nimport java.text.*;\nimport java.text.NumberFormat;\nimport java.util.Locale;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    double payment = scanner.nextDouble();\n    scanner.close();\n\n    Locale indialocale=new Locale(\"en\",\"IN\");\n    NumberFormat india  = NumberFormat.getCurrencyInstance(indialocale);\n    System.out.println(\"India: \" + india.format(payment));\n    }\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":7704276,"reputation":1,"user_id":5835680,"display_name":"saggy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591786137,"creation_date":1591784033,"answer_id":62301054,"question_id":5379231,"body_markdown":"This is working for me ..\r\n\r\n    public String indianCurrencyFormat(String s) {\r\n\r\n\t\tString orignalNo = s;\r\n\t\tString formatted = &quot;&quot;;\r\n\r\n\t\tif(orignalNo.startsWith(&quot;-&quot;)) {\r\n\t\t\ts = s.replace(&quot;-&quot;,&quot;&quot;);\r\n\t\t}\r\n\r\n\t\tif(orignalNo.contains(&quot;.&quot;)) {\r\n\t\t\tif(s.length() &gt; 6){\r\n\t\t\t\tStringBuilder sb=new StringBuilder(s);\r\n\t\t\t\ts = sb.reverse().toString();\r\n\r\n\t\t\t\tformatted = s.substring(0,6);\r\n\t\t\t\ts = s.substring(6);\r\n\r\n\t\t\t\twhile(s.length() &gt; 1) {\r\n\t\t\t\t\tformatted += &quot;,&quot; + s.substring(0,2);\r\n\t\t\t\t\ts = s.substring(2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsb = new StringBuilder(formatted+(StringUtils.isNotBlank(s) ? &quot;,&quot;+s :&quot;&quot;));\r\n\t\t\t\tformatted = sb.reverse().toString();\r\n\t\t\t} else {\r\n\t\t\t\tformatted = s;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif(s.length() &gt; 3){\r\n\t\t\t\tStringBuilder sb=new StringBuilder(s);\r\n\t\t\t\ts = sb.reverse().toString();\r\n\r\n\t\t\t\tformatted = s.substring(0,3);\r\n\t\t\t\ts = s.substring(3);\r\n\r\n\t\t\t\twhile(s.length() &gt; 1) {\r\n\t\t\t\t\tformatted += &quot;,&quot; + s.substring(0,2);\r\n\t\t\t\t\ts = s.substring(2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsb = new StringBuilder(formatted+(StringUtils.isNotBlank(s) ? &quot;,&quot;+s :&quot;&quot;));\r\n\t\t\t\tformatted = sb.reverse().toString();\r\n\t\t\t} else {\r\n\t\t\t\tformatted = s;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (orignalNo.startsWith(&quot;-&quot;)){\r\n\t\t\tformatted = &quot;-&quot;+formatted;\r\n\t\t}\r\n\r\n\t\treturn formatted;\r\n\t}","title":"Displaying Currency in Indian Numbering Format","body":"<p>This is working for me ..</p>\n\n<pre><code>public String indianCurrencyFormat(String s) {\n\n    String orignalNo = s;\n    String formatted = \"\";\n\n    if(orignalNo.startsWith(\"-\")) {\n        s = s.replace(\"-\",\"\");\n    }\n\n    if(orignalNo.contains(\".\")) {\n        if(s.length() &gt; 6){\n            StringBuilder sb=new StringBuilder(s);\n            s = sb.reverse().toString();\n\n            formatted = s.substring(0,6);\n            s = s.substring(6);\n\n            while(s.length() &gt; 1) {\n                formatted += \",\" + s.substring(0,2);\n                s = s.substring(2);\n            }\n\n            sb = new StringBuilder(formatted+(StringUtils.isNotBlank(s) ? \",\"+s :\"\"));\n            formatted = sb.reverse().toString();\n        } else {\n            formatted = s;\n        }\n    } else {\n        if(s.length() &gt; 3){\n            StringBuilder sb=new StringBuilder(s);\n            s = sb.reverse().toString();\n\n            formatted = s.substring(0,3);\n            s = s.substring(3);\n\n            while(s.length() &gt; 1) {\n                formatted += \",\" + s.substring(0,2);\n                s = s.substring(2);\n            }\n\n            sb = new StringBuilder(formatted+(StringUtils.isNotBlank(s) ? \",\"+s :\"\"));\n            formatted = sb.reverse().toString();\n        } else {\n            formatted = s;\n        }\n    }\n\n    if (orignalNo.startsWith(\"-\")){\n        formatted = \"-\"+formatted;\n    }\n\n    return formatted;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15010121,"reputation":81,"user_id":10834873,"display_name":"zeeshan ahmad"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1594157892,"creation_date":1594143830,"answer_id":62781019,"question_id":5379231,"body_markdown":"Try this:\r\n\r\n    NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;,&quot;IN&quot;)).format(number)\r\n\r\n&quot;en&quot; is for English.\r\n&quot;IN&quot; is for the country (India).","title":"Displaying Currency in Indian Numbering Format","body":"<p>Try this:</p>\n<pre><code>NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;,&quot;IN&quot;)).format(number)\n</code></pre>\n<p>&quot;en&quot; is for English.\n&quot;IN&quot; is for the country (India).</p>\n"},{"tags":[],"owner":{"account_id":9923866,"reputation":157,"user_id":15739993,"display_name":"Nilanshu96"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1631783501,"creation_date":1631782590,"answer_id":69205332,"question_id":5379231,"body_markdown":"I know this is an old question but I&#39;ll add my answer just in case. It is possible to use the same decimal formatter in a roundabout way to achieve the result but it isn&#39;t the most efficient solution, just a simpler one.\r\n\r\n    import java.math.RoundingMode;\r\n    import java.text.DecimalFormat;\r\n    \r\n    public class IndianMoneyFormat {\r\n    \r\n        static String indianCurrencyFormat(double money) {\r\n            String result = null;\r\n    \r\n            double aboveThousands = money / 1000;\r\n            double thousands = money % 1000;\r\n    \r\n            if (aboveThousands &gt; 1) {\r\n                DecimalFormat formatter = new DecimalFormat(&quot;##,##&quot;);\r\n                formatter.setRoundingMode(RoundingMode.DOWN); //will round towards zero whether negative or positive. Same as truncating.\r\n                String one = formatter.format(aboveThousands);\r\n    \r\n                formatter.applyPattern(&quot;###.00&quot;);\r\n                formatter.setRoundingMode(RoundingMode.HALF_EVEN); //default rounding mode of DecimalFormat\r\n                String two = formatter.format(thousands);\r\n    \r\n                result = one + &quot;,&quot; + two;\r\n                return result;\r\n            } else {\r\n                DecimalFormat formatter = new DecimalFormat(&quot;###.00&quot;);\r\n                result = formatter.format(money);\r\n                return result;\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            double money1 = 123000999.5;\r\n            double money2 = 999.39;\r\n            System.out.println(indianCurrencyFormat(money1));\r\n            System.out.println(indianCurrencyFormat(money2));\r\n        }\r\n    }\r\n\r\nAbove code will provide the following result:\r\n\r\n    12,30,00,999.50\r\n    999.39","title":"Displaying Currency in Indian Numbering Format","body":"<p>I know this is an old question but I'll add my answer just in case. It is possible to use the same decimal formatter in a roundabout way to achieve the result but it isn't the most efficient solution, just a simpler one.</p>\n<pre><code>import java.math.RoundingMode;\nimport java.text.DecimalFormat;\n\npublic class IndianMoneyFormat {\n\n    static String indianCurrencyFormat(double money) {\n        String result = null;\n\n        double aboveThousands = money / 1000;\n        double thousands = money % 1000;\n\n        if (aboveThousands &gt; 1) {\n            DecimalFormat formatter = new DecimalFormat(&quot;##,##&quot;);\n            formatter.setRoundingMode(RoundingMode.DOWN); //will round towards zero whether negative or positive. Same as truncating.\n            String one = formatter.format(aboveThousands);\n\n            formatter.applyPattern(&quot;###.00&quot;);\n            formatter.setRoundingMode(RoundingMode.HALF_EVEN); //default rounding mode of DecimalFormat\n            String two = formatter.format(thousands);\n\n            result = one + &quot;,&quot; + two;\n            return result;\n        } else {\n            DecimalFormat formatter = new DecimalFormat(&quot;###.00&quot;);\n            result = formatter.format(money);\n            return result;\n        }\n    }\n\n    public static void main(String[] args) {\n        double money1 = 123000999.5;\n        double money2 = 999.39;\n        System.out.println(indianCurrencyFormat(money1));\n        System.out.println(indianCurrencyFormat(money2));\n    }\n}\n</code></pre>\n<p>Above code will provide the following result:</p>\n<pre><code>12,30,00,999.50\n999.39\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17202546,"reputation":101,"user_id":12453883,"display_name":"Rakesh Karkare"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1634303885,"creation_date":1634290515,"answer_id":69582687,"question_id":5379231,"body_markdown":"Please find below snippet to print currency according to locale by giving inputs \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    import java.util.*;\r\n    import java.text.*;\r\n\r\n    public class CurrencyPayment {\r\n\r\n        public static void main(String[] args) {\r\n            Scanner scanner = new Scanner(System.in);\r\n            double payment = scanner.nextDouble();\r\n            scanner.close();\r\n\r\n            System.out.println(&quot;US: &quot; + NumberFormat.getCurrencyInstance(Locale.US).format(payment));\r\n            System.out.println(&quot;India: &quot; + NumberFormat.getCurrencyInstance(new Locale(&quot;en&quot;,&quot;IN&quot;)).format(payment));\r\n            System.out.println(&quot;China: &quot; + NumberFormat.getCurrencyInstance(Locale.CHINA).format(payment));\r\n            System.out.println(&quot;France: &quot; + NumberFormat.getCurrencyInstance(Locale.FRANCE).format(payment));\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Displaying Currency in Indian Numbering Format","body":"<p>Please find below snippet to print currency according to locale by giving inputs</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>import java.util.*;\nimport java.text.*;\n\npublic class CurrencyPayment {\n\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        double payment = scanner.nextDouble();\n        scanner.close();\n\n        System.out.println(\"US: \" + NumberFormat.getCurrencyInstance(Locale.US).format(payment));\n        System.out.println(\"India: \" + NumberFormat.getCurrencyInstance(new Locale(\"en\",\"IN\")).format(payment));\n        System.out.println(\"China: \" + NumberFormat.getCurrencyInstance(Locale.CHINA).format(payment));\n        System.out.println(\"France: \" + NumberFormat.getCurrencyInstance(Locale.FRANCE).format(payment));\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":[],"owner":{"account_id":23859023,"reputation":1,"user_id":17862227,"display_name":"Karthik Ak"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1641556244,"creation_date":1641555908,"answer_id":70620760,"question_id":5379231,"body_markdown":"1. Converting any Number into Indian Rupee Format in Golang.\r\n2. Function IndianRupeeFormat takes paramter as string and returns as string \r\n    ```go\r\n    func IndianRupeeFormat(DisplayAmount string) string {\r\n    \tAmountDisplayed := DisplayAmount[:len(DisplayAmount)-3] // just removing decimal point numbers.\r\n    \tIndianRupee := &quot;&quot;\r\n    \tif len(AmountDisplayed) &gt; 3 { // amount should to greater than 999 if &quot;,&quot; should appear , so length should be greater than 3\r\n    \t\tstartIndex := math.Mod(float64(len(AmountDisplayed)), 2) // startIndex is taken as slicing part to add comma.\r\n    \t\tnoOfCommas := (len(AmountDisplayed) / 2) - 1             // No of Commas appear in the number.\r\n    \t\tstartSlice := 0                                          // start of the slice\r\n    \t\tfor i := 0; i &lt; noOfCommas; i++ {\r\n    \t\t\tIndianRupee = IndianRupee + DisplayAmount[startSlice:int64(startIndex)+1] + &quot;,&quot;\r\n    \t\t\tstartIndex = startIndex + 2 // adding +2 because after first comma we are skipping 2 digits to add another comma.\r\n    \t\t\tstartSlice = int(startIndex) - 1\r\n    \t\t}\r\n    \t\tk := len(DisplayAmount) - 6\r\n    \t\tIndianRupee = IndianRupee + DisplayAmount[k:] // adding the rest of digits.\r\n    \t} else {\r\n    \t\tIndianRupee = DisplayAmount\r\n    \t}\r\n    \treturn IndianRupee\r\n    }\r\n\r\n    Amount1 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,100))\r\n    Amount2 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000.345))\r\n    Amount3 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,10000.02))\r\n    Amount4 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,100000.100))\r\n    Amount5 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000000.))\r\n    Amount6 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000.090))\r\n    fmt.Println(Amount1)\r\n    fmt.Println(Amount2)\r\n    fmt.Println(Amount3)\r\n    fmt.Println(Amount4)\r\n    fmt.Println(Amount5)\r\n    fmt.Println(Amount6)\r\n    // Output: 100\r\n    // Output: 1,000.34\r\n    // Output: 10,000.02\r\n    // Output: 1,00,000.10\r\n    // Output: 10,00,000.00\r\n    // Output: 1,000.90\r\n    ```\r\n    \r\n\r\n\r\n  ","title":"Displaying Currency in Indian Numbering Format","body":"<ol>\n<li>Converting any Number into Indian Rupee Format in Golang.</li>\n<li>Function IndianRupeeFormat takes paramter as string and returns as string\n<pre class=\"lang-golang prettyprint-override\"><code>func IndianRupeeFormat(DisplayAmount string) string {\n    AmountDisplayed := DisplayAmount[:len(DisplayAmount)-3] // just removing decimal point numbers.\n    IndianRupee := &quot;&quot;\n    if len(AmountDisplayed) &gt; 3 { // amount should to greater than 999 if &quot;,&quot; should appear , so length should be greater than 3\n        startIndex := math.Mod(float64(len(AmountDisplayed)), 2) // startIndex is taken as slicing part to add comma.\n        noOfCommas := (len(AmountDisplayed) / 2) - 1             // No of Commas appear in the number.\n        startSlice := 0                                          // start of the slice\n        for i := 0; i &lt; noOfCommas; i++ {\n            IndianRupee = IndianRupee + DisplayAmount[startSlice:int64(startIndex)+1] + &quot;,&quot;\n            startIndex = startIndex + 2 // adding +2 because after first comma we are skipping 2 digits to add another comma.\n            startSlice = int(startIndex) - 1\n        }\n        k := len(DisplayAmount) - 6\n        IndianRupee = IndianRupee + DisplayAmount[k:] // adding the rest of digits.\n    } else {\n        IndianRupee = DisplayAmount\n    }\n    return IndianRupee\n}\n\nAmount1 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,100))\nAmount2 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000.345))\nAmount3 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,10000.02))\nAmount4 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,100000.100))\nAmount5 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000000.))\nAmount6 := IndianRupeeFormat(fmt.Sprintf(&quot;%.2f&quot;,1000.090))\nfmt.Println(Amount1)\nfmt.Println(Amount2)\nfmt.Println(Amount3)\nfmt.Println(Amount4)\nfmt.Println(Amount5)\nfmt.Println(Amount6)\n// Output: 100\n// Output: 1,000.34\n// Output: 10,000.02\n// Output: 1,00,000.10\n// Output: 10,00,000.00\n// Output: 1,000.90\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2868776,"reputation":20877,"user_id":2462531,"accept_rate":40,"display_name":"Shailendra Madda"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657796138,"creation_date":1657796138,"answer_id":72979365,"question_id":5379231,"body_markdown":"It worked for me:\r\n\r\n    fun getFormattedPrice(price: Double?): String {\r\n            if (price == null) return &quot;0&quot;\r\n            val formatter = DecimalFormat(&quot;##,##,###.00&quot;).format(price)\r\n            var formattedPrice = formatter.format(price)\r\n            if (formattedPrice.endsWith(&quot;.00&quot;)) formattedPrice = formattedPrice.dropLast(3)\r\n            if (formattedPrice.isEmpty()) formattedPrice = &quot;0&quot;\r\n            return formattedPrice\r\n        }","title":"Displaying Currency in Indian Numbering Format","body":"<p>It worked for me:</p>\n<pre><code>fun getFormattedPrice(price: Double?): String {\n        if (price == null) return &quot;0&quot;\n        val formatter = DecimalFormat(&quot;##,##,###.00&quot;).format(price)\n        var formattedPrice = formatter.format(price)\n        if (formattedPrice.endsWith(&quot;.00&quot;)) formattedPrice = formattedPrice.dropLast(3)\n        if (formattedPrice.isEmpty()) formattedPrice = &quot;0&quot;\n        return formattedPrice\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17934499,"reputation":156,"user_id":13031099,"display_name":"vibhu norby"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673772448,"creation_date":1673771560,"answer_id":75123833,"question_id":5379231,"body_markdown":"Try this:\r\n\r\n```\r\ndouble number = 100000.00\r\n\r\nNumberFormat numberFormat = new NumberFormat();\r\n\r\nLocale locale = new Locale(&quot;hi&quot;,&quot;IN&quot;);\r\n\r\nnumberFormat = Numberformat.getCurrencyInstance(locale);\r\n\r\ndouble yourFormattedNumber = numberFormat(number);\r\n\r\nOutPut = ₹1,00,000.00\r\n\r\n//Remove &quot;₹&quot; using String.replace()\r\n\r\nString myFormattedNumber = numberFormat.format(number).replace(&quot;₹&quot;,&quot;&quot;);\r\n```\r\nOutPut = 1,00,000.00\r\n[![Enjoy!! Happy coding][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/h8Uo3.jpg","title":"Displaying Currency in Indian Numbering Format","body":"<p>Try this:</p>\n<pre><code>double number = 100000.00\n\nNumberFormat numberFormat = new NumberFormat();\n\nLocale locale = new Locale(&quot;hi&quot;,&quot;IN&quot;);\n\nnumberFormat = Numberformat.getCurrencyInstance(locale);\n\ndouble yourFormattedNumber = numberFormat(number);\n\nOutPut = ₹1,00,000.00\n\n//Remove &quot;₹&quot; using String.replace()\n\nString myFormattedNumber = numberFormat.format(number).replace(&quot;₹&quot;,&quot;&quot;);\n</code></pre>\n<p>OutPut = 1,00,000.00\n<a href=\"https://i.stack.imgur.com/h8Uo3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/h8Uo3.jpg\" alt=\"Enjoy!! Happy coding\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24699382,"reputation":1,"user_id":18590889,"display_name":"Shankit Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678883083,"creation_date":1678787457,"answer_id":75731502,"question_id":5379231,"body_markdown":"I faced a similar question in an interview and I used the below code.\r\n\r\n   \r\n\r\n     import java.util.Scanner;\r\n    \r\n    class AssignmentFour {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc = new Scanner(System.in);\r\n    \t\tString str = sc.nextLine();\r\n    \t\tsc.close();\r\n    \t\tStringBuilder sb = new StringBuilder(str);\r\n    \t\tint length = sb.length();\r\n    \t\tif (length &gt; 4) {\r\n    \t\t\tfor (int i = length - 3; i &gt; 0; i -= 2) {\r\n    \t\t\t\tsb.insert(i, &quot;,&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(sb.toString());\r\n    \t}\r\n    }","title":"Displaying Currency in Indian Numbering Format","body":"<p>I faced a similar question in an interview and I used the below code.</p>\n<pre><code> import java.util.Scanner;\n\nclass AssignmentFour {\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        String str = sc.nextLine();\n        sc.close();\n        StringBuilder sb = new StringBuilder(str);\n        int length = sb.length();\n        if (length &gt; 4) {\n            for (int i = length - 3; i &gt; 0; i -= 2) {\n                sb.insert(i, &quot;,&quot;);\n            }\n        }\n        System.out.println(sb.toString());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15067705,"reputation":19,"user_id":10874268,"display_name":"Binson Selvin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696598772,"creation_date":1696598772,"answer_id":77244851,"question_id":5379231,"body_markdown":"    public static String addCommaToCurrency(String value) {\r\n        // 100\r\n       if(value.length()&gt;3) {\r\n           String[] arr = value.split(&quot;\\\\.&quot;);\r\n           System.out.println(arr[0]);\r\n           //0987654321\r\n           \r\n           boolean addCommaAfterThree = true;\r\n           \r\n           StringBuilder reverseValue = new StringBuilder(arr[0]).reverse();\r\n           String commaAddedValue = &quot;&quot;;\r\n           int counter = 0;\r\n           System.out.println(&quot;reverseValue length: &quot;+reverseValue.length());\r\n           \r\n           for(int i=0; i&lt;reverseValue.length(); i++) {\r\n               if(addCommaAfterThree &amp;&amp; counter == 3) {\r\n                   commaAddedValue = commaAddedValue+&quot;,&quot;+reverseValue.charAt(i); //098,7\r\n                   counter = 1;\r\n                   addCommaAfterThree = false;\r\n               } else if(counter == 2 &amp;&amp; !addCommaAfterThree) {\r\n            \t   commaAddedValue = commaAddedValue+&quot;,&quot;+reverseValue.charAt(i); //098,7\r\n                   counter = 1;\r\n               } else {\r\n            \t   commaAddedValue = commaAddedValue+reverseValue.charAt(i) +&quot;&quot;; \r\n                   counter = counter +1;\r\n               }\r\n           }\r\n           \r\n           System.out.println(&quot;Comma Added value &quot;+new StringBuilder(commaAddedValue).reverse().append(&quot;.&quot;+arr[1]));\r\n           return new StringBuilder(commaAddedValue).reverse().append(&quot;.&quot;+arr[1]).toString();\r\n       }\r\n       return value;}\r\n\r\n\r\nKindly use this method it working it was my project requirement","title":"Displaying Currency in Indian Numbering Format","body":"<pre><code>public static String addCommaToCurrency(String value) {\n    // 100\n   if(value.length()&gt;3) {\n       String[] arr = value.split(&quot;\\\\.&quot;);\n       System.out.println(arr[0]);\n       //0987654321\n       \n       boolean addCommaAfterThree = true;\n       \n       StringBuilder reverseValue = new StringBuilder(arr[0]).reverse();\n       String commaAddedValue = &quot;&quot;;\n       int counter = 0;\n       System.out.println(&quot;reverseValue length: &quot;+reverseValue.length());\n       \n       for(int i=0; i&lt;reverseValue.length(); i++) {\n           if(addCommaAfterThree &amp;&amp; counter == 3) {\n               commaAddedValue = commaAddedValue+&quot;,&quot;+reverseValue.charAt(i); //098,7\n               counter = 1;\n               addCommaAfterThree = false;\n           } else if(counter == 2 &amp;&amp; !addCommaAfterThree) {\n               commaAddedValue = commaAddedValue+&quot;,&quot;+reverseValue.charAt(i); //098,7\n               counter = 1;\n           } else {\n               commaAddedValue = commaAddedValue+reverseValue.charAt(i) +&quot;&quot;; \n               counter = counter +1;\n           }\n       }\n       \n       System.out.println(&quot;Comma Added value &quot;+new StringBuilder(commaAddedValue).reverse().append(&quot;.&quot;+arr[1]));\n       return new StringBuilder(commaAddedValue).reverse().append(&quot;.&quot;+arr[1]).toString();\n   }\n   return value;}\n</code></pre>\n<p>Kindly use this method it working it was my project requirement</p>\n"}],"owner":{"account_id":165134,"reputation":2480,"user_id":388324,"accept_rate":56,"display_name":"Mihir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137506,"favorite_count":0,"down_vote_count":1,"up_vote_count":80,"accepted_answer_id":5379337,"answer_count":29,"score":79,"last_activity_date":1696598772,"creation_date":1300718506,"question_id":5379231,"body_markdown":"I have a question about formatting the Rupee currency (Indian Rupee - INR).\r\n\r\nTypically a value like `450500` is formatted and shown as `450,500`. In India, the same value is displayed as `4,50,500`\r\n\r\nFor example, numbers here are represented as:\r\n\r\n    1\r\n    10\r\n    100\r\n    1,000\r\n    10,000\r\n    1,00,000\r\n    10,00,000\r\n    1,00,00,000\r\n    10,00,00,000\r\n\r\nRefer [Indian Numbering System][1]\r\n\r\nThe separators are after two digits, except for the last set, which is in thousands.\r\n\r\nI&#39;ve searched on the internet and people have asked to use the locale `en_GB` or pattern `#,##,##,##,##0.00`\r\n\r\nI tried this on JSTL by using the following tag:\r\n\r\n    &lt;fmt:formatNumber value=&quot;${product.price}&quot; type=&quot;currency&quot; \r\n      pattern=&quot;#,##,##,##,###.00&quot;/&gt;\r\n\r\nBut this does not seem to solve the issue.\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Indian_numbering_system","title":"Displaying Currency in Indian Numbering Format","body":"<p>I have a question about formatting the Rupee currency (Indian Rupee - INR).</p>\n<p>Typically a value like <code>450500</code> is formatted and shown as <code>450,500</code>. In India, the same value is displayed as <code>4,50,500</code></p>\n<p>For example, numbers here are represented as:</p>\n<pre><code>1\n10\n100\n1,000\n10,000\n1,00,000\n10,00,000\n1,00,00,000\n10,00,00,000\n</code></pre>\n<p>Refer <a href=\"http://en.wikipedia.org/wiki/Indian_numbering_system\" rel=\"noreferrer\">Indian Numbering System</a></p>\n<p>The separators are after two digits, except for the last set, which is in thousands.</p>\n<p>I've searched on the internet and people have asked to use the locale <code>en_GB</code> or pattern <code>#,##,##,##,##0.00</code></p>\n<p>I tried this on JSTL by using the following tag:</p>\n<pre><code>&lt;fmt:formatNumber value=&quot;${product.price}&quot; type=&quot;currency&quot; \n  pattern=&quot;#,##,##,##,###.00&quot;/&gt;\n</code></pre>\n<p>But this does not seem to solve the issue.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":7481088,"reputation":196,"user_id":5685800,"display_name":"toootooo"},"score":0,"creation_date":1696589510,"post_id":77243773,"comment_id":136175727,"body_markdown":"you can add the following method\n\n.orElseGet(() -&gt; null);\nat the end","body":"you can add the following method  .orElseGet(() -&gt; null); at the end"},{"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"score":0,"creation_date":1696589670,"post_id":77243773,"comment_id":136175755,"body_markdown":"Do you mind cut n pasting it into the sample code?","body":"Do you mind cut n pasting it into the sample code?"}],"answers":[{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696591774,"creation_date":1696590114,"answer_id":77243924,"question_id":77243773,"body_markdown":"You can do the operations using [`Optional.map()`][1]. Any operation will be invoked only if the optional is not empty.\r\n&gt; If a value is present, returns an Optional describing (as if by ofNullable(T)) the result of applying the given mapping function to the value, otherwise returns an empty Optional.\r\nIf the mapping function returns a null result then this method returns an empty Optional.\r\n\r\n```\r\npublic CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\r\n  Optional&lt;Car&gt; optionalCar = carRepository.getCarById(id);\r\n  return optionalCar.map(car -&gt; {\r\n    carMapper.partialupdate(updateCarDto, car);\r\n    return car;\r\n  })\r\n          .map(car -&gt; repository.save(car))\r\n          .map(car -&gt; CarCreateDto.fromCar(car))//your actual mapping from car to dto here\r\n          .orElseThrow(() -&gt; new RuntimeException(&quot;not found&quot;));\r\n}\r\n```\r\nThe current handling is to throw exception, if the operations result in empty optional (or the initial one was empty), but you can use [`orElseGet()`][2] or [`orELse()`][3] to supply fallback value, if that&#39;s what your scenario requires.\r\n\r\nAll of [Optional javadoc][4].\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#map(java.util.function.Function)\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#orElseGet(java.util.function.Supplier)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#orElse(T)\r\n  [4]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html","title":"Spring Boot Service to update (PUT)","body":"<p>You can do the operations using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#map(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>Optional.map()</code></a>. Any operation will be invoked only if the optional is not empty.</p>\n<blockquote>\n<p>If a value is present, returns an Optional describing (as if by ofNullable(T)) the result of applying the given mapping function to the value, otherwise returns an empty Optional.\nIf the mapping function returns a null result then this method returns an empty Optional.</p>\n</blockquote>\n<pre><code>public CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\n  Optional&lt;Car&gt; optionalCar = carRepository.getCarById(id);\n  return optionalCar.map(car -&gt; {\n    carMapper.partialupdate(updateCarDto, car);\n    return car;\n  })\n          .map(car -&gt; repository.save(car))\n          .map(car -&gt; CarCreateDto.fromCar(car))//your actual mapping from car to dto here\n          .orElseThrow(() -&gt; new RuntimeException(&quot;not found&quot;));\n}\n</code></pre>\n<p>The current handling is to throw exception, if the operations result in empty optional (or the initial one was empty), but you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#orElseGet(java.util.function.Supplier)\" rel=\"nofollow noreferrer\"><code>orElseGet()</code></a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html#orElse(T)\" rel=\"nofollow noreferrer\"><code>orELse()</code></a> to supply fallback value, if that's what your scenario requires.</p>\n<p>All of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Optional.html\" rel=\"nofollow noreferrer\">Optional javadoc</a>.</p>\n"},{"tags":[],"owner":{"account_id":6166039,"reputation":469,"user_id":7210926,"display_name":"Vipul Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696592332,"creation_date":1696592332,"answer_id":77244134,"question_id":77243773,"body_markdown":"Hi I think you are trying to achieve something like the below -\r\n\r\n    public CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\r\n            Car car = carRepository.findById(id)\r\n                    .orElseThrow(() -&gt; new RuntimeException(&quot;Car not found&quot;));\r\n        \r\n            CarMapper.partialUpdate(updateCarDto, car);\r\n            Car updatedCar = carRepository.save(car);\r\n        \r\n            return CarMapper.toDto(updatedCar);\r\n    }\r\n\r\n","title":"Spring Boot Service to update (PUT)","body":"<p>Hi I think you are trying to achieve something like the below -</p>\n<pre><code>public CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\n        Car car = carRepository.findById(id)\n                .orElseThrow(() -&gt; new RuntimeException(&quot;Car not found&quot;));\n    \n        CarMapper.partialUpdate(updateCarDto, car);\n        Car updatedCar = carRepository.save(car);\n    \n        return CarMapper.toDto(updatedCar);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13867576,"reputation":120,"user_id":10011738,"display_name":"amir rad"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696598383,"creation_date":1696598383,"answer_id":77244792,"question_id":77243773,"body_markdown":"If you don&#39;t want to return Optional&lt;&gt; type, replace findById with getById this method as a spring boot convention return Car type and then map it to Dto. This can be a simpler update method.","title":"Spring Boot Service to update (PUT)","body":"<p>If you don't want to return Optional&lt;&gt; type, replace findById with getById this method as a spring boot convention return Car type and then map it to Dto. This can be a simpler update method.</p>\n"}],"owner":{"account_id":7856677,"reputation":1967,"user_id":5938276,"accept_rate":38,"display_name":"Al Grant"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1696598383,"creation_date":1696588863,"question_id":77243773,"body_markdown":"I am writing a Spring Boot service layer to update a `Car` entity - but the issue is the added complexity of FindById methods now all returning Optional&lt;&gt; and also integrating the return type being a Dto not an entity.\r\n\r\nI understand Optional&lt;&gt; is good in so far as it forces the developer to handle not found but I intend to add exception handlers later.\r\n\r\n**Service**\r\n\r\n    @Override    \r\n    public CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\r\n        Optional&lt;Car&gt; CarOptional = CarRepository.findById(id);\r\n        return CarOptional.map(Car -&gt; {\r\n            CarMapper.partialUpdate(updateCarDto, Car);\r\n            return CarMapper.toDto(CarRepository.save(Car));\r\n            });\r\n    }\r\n\r\nThe issue with the above is that the Optional&lt;&gt; is bubbling up through the Entity to the Dto resulting in a return type of Optional&lt;CarCreateDto&gt; when it expects CarCreateDto.\r\n\r\nHow to best handle this simple update method on service layer and have the method return a Dto type.","title":"Spring Boot Service to update (PUT)","body":"<p>I am writing a Spring Boot service layer to update a <code>Car</code> entity - but the issue is the added complexity of FindById methods now all returning Optional&lt;&gt; and also integrating the return type being a Dto not an entity.</p>\n<p>I understand Optional&lt;&gt; is good in so far as it forces the developer to handle not found but I intend to add exception handlers later.</p>\n<p><strong>Service</strong></p>\n<pre><code>@Override    \npublic CarCreateDto updateCar(CarCreateDto updateCarDto, Long id) {\n    Optional&lt;Car&gt; CarOptional = CarRepository.findById(id);\n    return CarOptional.map(Car -&gt; {\n        CarMapper.partialUpdate(updateCarDto, Car);\n        return CarMapper.toDto(CarRepository.save(Car));\n        });\n}\n</code></pre>\n<p>The issue with the above is that the Optional&lt;&gt; is bubbling up through the Entity to the Dto resulting in a return type of Optional when it expects CarCreateDto.</p>\n<p>How to best handle this simple update method on service layer and have the method return a Dto type.</p>\n"},{"tags":["java","sql","spring"],"comments":[{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696598629,"post_id":77244789,"comment_id":136177582,"body_markdown":"Just remove `@Transient`.","body":"Just remove <code>@Transient</code>."},{"owner":{"account_id":8909811,"reputation":2612,"user_id":6650475,"display_name":"Andrew S"},"score":0,"creation_date":1696599235,"post_id":77244789,"comment_id":136177716,"body_markdown":"The second issue, which should probably be a separate question, is not clear why manual mapping would be needed.  Please clarify (in a new question).","body":"The second issue, which should probably be a separate question, is not clear why manual mapping would be needed.  Please clarify (in a new question)."},{"owner":{"account_id":13298380,"reputation":253,"user_id":9600573,"display_name":"Denis B"},"score":0,"creation_date":1696835268,"post_id":77244789,"comment_id":136198688,"body_markdown":"@Pino Removing `@Transient` is not possible because notification table doesn&#39;t have column &#39;read&#39;; spring is throwing exception","body":"@Pino Removing <code>@Transient</code> is not possible because notification table doesn&#39;t have column &#39;read&#39;; spring is throwing exception"},{"owner":{"account_id":13298380,"reputation":253,"user_id":9600573,"display_name":"Denis B"},"score":0,"creation_date":1696835438,"post_id":77244789,"comment_id":136198723,"body_markdown":"@AndrewS Manual mapping is needed because otherwise field &#39;read&#39; is not populated (read=null)","body":"@AndrewS Manual mapping is needed because otherwise field &#39;read&#39; is not populated (read=null)"},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696837896,"post_id":77244789,"comment_id":136199120,"body_markdown":"OK, now I see that your native query contains a calculated column named `read`.  In this case the correct question describing your problem is &quot;How can I populate a calculated column with a native query in JPA?&quot; and it has already been asked.","body":"OK, now I see that your native query contains a calculated column named <code>read</code>.  In this case the correct question describing your problem is &quot;How can I populate a calculated column with a native query in JPA?&quot; and it has already been asked."},{"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"score":0,"creation_date":1696837905,"post_id":77244789,"comment_id":136199122,"body_markdown":"Does this answer your question? [JPA - calculated column as entity class property?](https://stackoverflow.com/questions/11403924/jpa-calculated-column-as-entity-class-property)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11403924/jpa-calculated-column-as-entity-class-property\">JPA - calculated column as entity class property?</a>"}],"owner":{"account_id":13298380,"reputation":253,"user_id":9600573,"display_name":"Denis B"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1696598353,"creation_date":1696598353,"question_id":77244789,"body_markdown":"I have this Dao class with native SQL query that joins results from 2 tables:\r\n\r\n    public interface NotificationDao extends JpaRepository&lt;Notification, Long&gt; {\r\n    \r\n        String query = &quot;&quot;&quot;\r\n            SELECT n.*, CASE WHEN rn.notification_id IS NOT NULL THEN TRUE ELSE FALSE END as read \r\n            FROM notification n\r\n            LEFT JOIN (\r\n                SELECT DISTINCT notification_id, user_id\r\n                FROM read_notification\r\n                WHERE user_id = ?1 OR user_id IS NULL\r\n            ) rn\r\n            ON n.id = rn.notification_id\r\n            WHERE n.deleted IS FALSE\r\n            AND (n.user_id IS NULL OR n.user_id = ?1) \r\n            OFFSET (?2*?3) ROWS FETCH NEXT ?2 ROWS ONLY \r\n            &quot;&quot;&quot;;\r\n        \r\n        @Query(value = query, nativeQuery = true)\r\n        List&lt;Notification&gt; findAllNotifications(String userId, Integer size, Integer page);\r\n    }\r\n\r\nAnd this entity class:\r\n\r\n    @EqualsAndHashCode(callSuper = true)\r\n    @Entity\r\n    @Data\r\n    @NoArgsConstructor(force = true)\r\n    @Table(name = &quot;notification&quot;)\r\n    public class Notification extends AbstractEntity {\r\n    \r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;notification_gen&quot;)\r\n        @SequenceGenerator(name = &quot;notification_gen&quot;, sequenceName = &quot;notification_id_seq&quot;, allocationSize = 1)\r\n        private Long id;\r\n    \r\n        @Enumerated(EnumType.STRING)\r\n        private NotificationType type;\r\n    \r\n        private String text;\r\n    \r\n        @Column(name = &quot;user_id&quot;)\r\n        private String userId;\r\n    \r\n        @Transient\r\n        private boolean read;\r\n    }\r\n\r\nResult of calling `findAllNotifications` doesn&#39;t have values for field `read` (read = null).\r\nI tried SQL statement in console and it works fine; I get table with `read` column populated as expected. What do I need to do to make it work.\r\n\r\nAlso, I have made it work by returning `List&lt;Object[]&gt;` from `NotificationDao` class and mapping results by hand to `List&lt;Notification`:\r\n\r\n    private List&lt;Notification&gt; mapQueryResultsToNotifications(List&lt;Object[]&gt; results) {\r\n            return results.stream()\r\n                    .map(result -&gt; {\r\n                        Notification notification = new Notification();\r\n                        notification.setId((Long) result[0]);\r\n                        String notificationType = result[2] != null ? (String) result[7] : NotificationType.GENERAL.toString();\r\n                        notification.setType(NotificationType.valueOf(notificationType));\r\n                        notification.setText((String) result[1]);\r\n                        notification.setUserId((String) result[3]);\r\n                        notification.setRead((Boolean) result[4]);\r\n                        return notification;\r\n                    })\r\n                    .collect(Collectors.toList());\r\n        }\r\n\r\n    List&lt;Notification&gt; notifications = mapQueryResultsToNotifications(notificationDao.findUnreadNotifications(userId, size, page));\r\n\r\n    @Query(value = query, nativeQuery = true)\r\n        List&lt;Object[]&gt; findAllNotifications(String userId, Integer size, Integer page);\r\n\r\nBut it makes sense to me it could be done cleaner. This way every time I make a change to query I need to change mapping in `mapQueryResultsToNotifications`","title":"Native SQL query with table join doesn&#39;t work with Spring&#39;s JpaRepository","body":"<p>I have this Dao class with native SQL query that joins results from 2 tables:</p>\n<pre><code>public interface NotificationDao extends JpaRepository&lt;Notification, Long&gt; {\n\n    String query = &quot;&quot;&quot;\n        SELECT n.*, CASE WHEN rn.notification_id IS NOT NULL THEN TRUE ELSE FALSE END as read \n        FROM notification n\n        LEFT JOIN (\n            SELECT DISTINCT notification_id, user_id\n            FROM read_notification\n            WHERE user_id = ?1 OR user_id IS NULL\n        ) rn\n        ON n.id = rn.notification_id\n        WHERE n.deleted IS FALSE\n        AND (n.user_id IS NULL OR n.user_id = ?1) \n        OFFSET (?2*?3) ROWS FETCH NEXT ?2 ROWS ONLY \n        &quot;&quot;&quot;;\n    \n    @Query(value = query, nativeQuery = true)\n    List&lt;Notification&gt; findAllNotifications(String userId, Integer size, Integer page);\n}\n</code></pre>\n<p>And this entity class:</p>\n<pre><code>@EqualsAndHashCode(callSuper = true)\n@Entity\n@Data\n@NoArgsConstructor(force = true)\n@Table(name = &quot;notification&quot;)\npublic class Notification extends AbstractEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;notification_gen&quot;)\n    @SequenceGenerator(name = &quot;notification_gen&quot;, sequenceName = &quot;notification_id_seq&quot;, allocationSize = 1)\n    private Long id;\n\n    @Enumerated(EnumType.STRING)\n    private NotificationType type;\n\n    private String text;\n\n    @Column(name = &quot;user_id&quot;)\n    private String userId;\n\n    @Transient\n    private boolean read;\n}\n</code></pre>\n<p>Result of calling <code>findAllNotifications</code> doesn't have values for field <code>read</code> (read = null).\nI tried SQL statement in console and it works fine; I get table with <code>read</code> column populated as expected. What do I need to do to make it work.</p>\n<p>Also, I have made it work by returning <code>List&lt;Object[]&gt;</code> from <code>NotificationDao</code> class and mapping results by hand to <code>List&lt;Notification</code>:</p>\n<pre><code>private List&lt;Notification&gt; mapQueryResultsToNotifications(List&lt;Object[]&gt; results) {\n        return results.stream()\n                .map(result -&gt; {\n                    Notification notification = new Notification();\n                    notification.setId((Long) result[0]);\n                    String notificationType = result[2] != null ? (String) result[7] : NotificationType.GENERAL.toString();\n                    notification.setType(NotificationType.valueOf(notificationType));\n                    notification.setText((String) result[1]);\n                    notification.setUserId((String) result[3]);\n                    notification.setRead((Boolean) result[4]);\n                    return notification;\n                })\n                .collect(Collectors.toList());\n    }\n\nList&lt;Notification&gt; notifications = mapQueryResultsToNotifications(notificationDao.findUnreadNotifications(userId, size, page));\n\n@Query(value = query, nativeQuery = true)\n    List&lt;Object[]&gt; findAllNotifications(String userId, Integer size, Integer page);\n</code></pre>\n<p>But it makes sense to me it could be done cleaner. This way every time I make a change to query I need to change mapping in <code>mapQueryResultsToNotifications</code></p>\n"},{"tags":["java","jms","ibm-mq","spring-jms"],"answers":[{"tags":[],"owner":{"account_id":20564657,"reputation":91,"user_id":15094359,"display_name":"Rich"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696587322,"creation_date":1696587322,"answer_id":77243630,"question_id":77243416,"body_markdown":"You need the single quotes around the literal strings in the selector. The following would be a valid selector.\r\n\r\n    &quot;channel IN (&#39;TYPE1&#39;,&#39;TYPE2&#39;)&quot;\r\n","title":"IBM MQ JMS selector using a list of values","body":"<p>You need the single quotes around the literal strings in the selector. The following would be a valid selector.</p>\n<pre><code>&quot;channel IN ('TYPE1','TYPE2')&quot;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7206986,"reputation":4285,"user_id":5502306,"display_name":"chughts"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696597916,"creation_date":1696597916,"answer_id":77244747,"question_id":77243416,"body_markdown":"You are injecting a list / array of strings so need:\r\n\r\n```Java\r\n@Value(&quot;${jms.selector}&quot;) \r\nString[] selectors;\r\n```\r\n\r\n`selectors` will be: `[&quot;UK&quot;,&quot;US&quot;,&quot;France&quot;]`\r\n\r\nOnce you have that you can convert it into single string of comma separated quoted strings\r\n\r\n```Java\r\nString selectorString = &quot;&#39;&quot; + String.join(&quot;&#39;,&#39;&quot;, selectors); + &quot;&#39;&quot;\r\n```\r\n\r\n`selectorString` will be: `&quot;&#39;UK&#39;,&#39;US&#39;,&#39;France&#39;&quot;`\r\n","title":"IBM MQ JMS selector using a list of values","body":"<p>You are injecting a list / array of strings so need:</p>\n<pre><code>@Value(&quot;${jms.selector}&quot;) \nString[] selectors;\n</code></pre>\n<p><code>selectors</code> will be: <code>[&quot;UK&quot;,&quot;US&quot;,&quot;France&quot;]</code></p>\n<p>Once you have that you can convert it into single string of comma separated quoted strings</p>\n<pre><code>String selectorString = &quot;'&quot; + String.join(&quot;','&quot;, selectors); + &quot;'&quot;\n</code></pre>\n<p><code>selectorString</code> will be: <code>&quot;'UK','US','France'&quot;</code></p>\n"}],"owner":{"account_id":11094271,"reputation":39,"user_id":8145020,"display_name":"Ginel Guiu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1696597916,"creation_date":1696585460,"question_id":77243416,"body_markdown":"I&#39;m encountering a situation for which I can&#39;t find any other examples on the Internet, and I was wondering if anyone had any idea about this.\r\n\r\nBasically, we need to use a selector a Spring `JmsListener` which looks for the value in a list of strings we defined in the `.yml` file. I saw examples in the IBM documentation which look like this\r\n\r\n&gt; Country IN (&#39;UK&#39;, &#39;US&#39;, &#39;France&#39;) is true for &#39;UK&#39; and false for &#39;Peru&#39;. It is equivalent to the expression (Country = &#39;UK&#39;) OR (Country = &#39;US&#39;) OR (Country = &#39;France&#39;).\r\n\r\nBut we need to load them from the `.yml` file. So far, we tried like this\r\n\r\n```java\r\n@Value(&quot;${jms.selector}&quot;) \r\nString selectors;\r\n....\r\n@JmsListener(destination = ... , container = ... , selector = &quot;channel IN (${jms.selector})&quot;)\r\n```\r\n\r\nand the property in the `.yml` file looks like this\r\n\r\n```\r\njms:\r\n  selector: TYPE1, TYPE2\r\n```\r\n\r\nBut we get the following error\r\n```\r\nSetup of JMS message listener invoker failed for destination &#39;...&#39; - trying to recover. Cause: JMSWMQ2008: Failed to open MQ queue &#39;...&#39;.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ cqll failed with compcode &#39;2&#39; (&#39;MQCC_FAILED&#39;) reason &#39;2459&#39; (&#39;MQRC_SELECTOR_SYNTAX_ERROR&#39;)\r\n```","title":"IBM MQ JMS selector using a list of values","body":"<p>I'm encountering a situation for which I can't find any other examples on the Internet, and I was wondering if anyone had any idea about this.</p>\n<p>Basically, we need to use a selector a Spring <code>JmsListener</code> which looks for the value in a list of strings we defined in the <code>.yml</code> file. I saw examples in the IBM documentation which look like this</p>\n<blockquote>\n<p>Country IN ('UK', 'US', 'France') is true for 'UK' and false for 'Peru'. It is equivalent to the expression (Country = 'UK') OR (Country = 'US') OR (Country = 'France').</p>\n</blockquote>\n<p>But we need to load them from the <code>.yml</code> file. So far, we tried like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Value(&quot;${jms.selector}&quot;) \nString selectors;\n....\n@JmsListener(destination = ... , container = ... , selector = &quot;channel IN (${jms.selector})&quot;)\n</code></pre>\n<p>and the property in the <code>.yml</code> file looks like this</p>\n<pre><code>jms:\n  selector: TYPE1, TYPE2\n</code></pre>\n<p>But we get the following error</p>\n<pre><code>Setup of JMS message listener invoker failed for destination '...' - trying to recover. Cause: JMSWMQ2008: Failed to open MQ queue '...'.; nested exception is com.ibm.mq.MQException: JMSCMQ0001: IBM MQ cqll failed with compcode '2' ('MQCC_FAILED') reason '2459' ('MQRC_SELECTOR_SYNTAX_ERROR')\n</code></pre>\n"},{"tags":["java","jms"],"comments":[{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1696587607,"post_id":77243634,"comment_id":136175378,"body_markdown":"It sounds like your version of WebLogic is not compatible with Java 17.","body":"It sounds like your version of WebLogic is not compatible with Java 17."},{"owner":{"account_id":8660167,"reputation":1,"user_id":6482932,"display_name":"wouter"},"score":0,"creation_date":1696591851,"post_id":77243634,"comment_id":136176173,"body_markdown":"It is not a weblogic service\nI use it as a Jar in JMETER to perform load tests with","body":"It is not a weblogic service I use it as a Jar in JMETER to perform load tests with"},{"owner":{"account_id":17835,"reputation":303895,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1696592298,"post_id":77243634,"comment_id":136176258,"body_markdown":"Whatever the situation: you&#39;re trying to run some code related to weblogic on Java 17, which is apparently not able to work in that environment. Try to get a newer version of the jar, as the problem has likely since been fixed.","body":"Whatever the situation: you&#39;re trying to run some code related to weblogic on Java 17, which is apparently not able to work in that environment. Try to get a newer version of the jar, as the problem has likely since been fixed."},{"owner":{"account_id":213468,"reputation":103493,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1696595958,"post_id":77243634,"comment_id":136176939,"body_markdown":"The fact the stacktrace contains classes with the weblogic prefix do suggest you&#39;re using something from WebLogic","body":"The fact the stacktrace contains classes with the weblogic prefix do suggest you&#39;re using something from WebLogic"}],"owner":{"account_id":8660167,"reputation":1,"user_id":6482932,"display_name":"wouter"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":96,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696597425,"creation_date":1696587351,"question_id":77243634,"body_markdown":"I was having a client to put messages on a JMS queue in Java 8 using the following code. I anonymized the code a bit.\r\n\r\n```java\r\npublic class Application {\r\n    public static void main(String[] args) throws NamingException, JAXBException  {\r\n        Properties env = new Properties();\r\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;weblogic.jndi.WLInitialContextFactory&quot;);\r\n        env.put(Context.PROVIDER_URL, &quot;xxxxx&quot; );\r\n        InitialContext initialContext = new InitialContext(env);\r\n        ConnectionFactory connectionFactoryIn = (ConnectionFactory)initialContext.lookup(&quot;jms/xxxxxxxxx&quot;);\r\n        Destination destinationIn = (Destination)initialContext.lookup(&quot;jms/xxxxx&quot;);\r\n        ConnectionFactory connectionFactoryOut = (ConnectionFactory)initialContext.lookup(&quot;jms/xxxxxxxxxx&quot;);\r\n        Destination destinationOut = (Destination)initialContext.lookup(&quot;jms/xxxxxxx&quot;);\r\n```\r\n\r\nNow when upgrading to Java 17 I get an error at  \r\n\r\n```java\r\nInitialContext initialContext = new InitialContext(env);\r\n```\r\n\r\nThe error says:  \r\n\r\n```none\r\n&lt;Fri Oct 06 12:05:30 CEST 2023&gt; &lt;Debug&gt; &lt;RJVM&gt; &lt;WL-000517&gt; &lt;&#39;java.io.ObjectInputStream.defaultDataEnd&#39; field not initialized\r\njava.lang.reflect.InaccessibleObjectException: Unable to make field private boolean java.io.ObjectInputStream.defaultDataEnd accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @1bce4f0a\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n\tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n\tat weblogic.rjvm.MsgAbbrevInputStream.getField(MsgAbbrevInputStream.java:135)\r\n\tat weblogic.rjvm.MsgAbbrevInputStream.&lt;clinit&gt;(MsgAbbrevInputStream.java:89)\r\n\tat weblogic.rjvm.ConnectionManager.getInputStream(ConnectionManager.java:2005)\r\n\tat weblogic.rjvm.MsgAbbrevJVMConnection.dispatch(MsgAbbrevJVMConnection.java:555)\r\n\tat weblogic.rjvm.t3.client.MuxableSocketT3.dispatch(MuxableSocketT3.java:180)\r\n\tat weblogic.socket.BaseAbstractMuxableSocket.dispatch(BaseAbstractMuxableSocket.java:397)\r\n\tat weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:981)\r\n\tat weblogic.socket.SocketMuxer.readReadySocket(SocketMuxer.java:907)\r\n\tat weblogic.socket.JavaSocketMuxer.processSockets(JavaSocketMuxer.java:385)\r\n\tat weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:30)\r\n\tat weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:21)\r\n\tat weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:147)\r\n\tat weblogic.kernel.ExecuteThread.run(ExecuteThread.java:119)\r\n```\r\n\r\nI tried adding a `module-info.java` with following content to no avail.  \r\n\r\n```java\r\nmodule berichtenverkeer-utilities {\r\n    requires java.base;\r\n    requires java.reflect;\r\n    requires java.naming;\r\n    opens java.io;\r\n}\r\n```\r\n\r\n","title":"Java 17 java.lang.reflect.InaccessibleObjectException with new InitialContext()","body":"<p>I was having a client to put messages on a JMS queue in Java 8 using the following code. I anonymized the code a bit.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Application {\n    public static void main(String[] args) throws NamingException, JAXBException  {\n        Properties env = new Properties();\n        env.put(Context.INITIAL_CONTEXT_FACTORY, &quot;weblogic.jndi.WLInitialContextFactory&quot;);\n        env.put(Context.PROVIDER_URL, &quot;xxxxx&quot; );\n        InitialContext initialContext = new InitialContext(env);\n        ConnectionFactory connectionFactoryIn = (ConnectionFactory)initialContext.lookup(&quot;jms/xxxxxxxxx&quot;);\n        Destination destinationIn = (Destination)initialContext.lookup(&quot;jms/xxxxx&quot;);\n        ConnectionFactory connectionFactoryOut = (ConnectionFactory)initialContext.lookup(&quot;jms/xxxxxxxxxx&quot;);\n        Destination destinationOut = (Destination)initialContext.lookup(&quot;jms/xxxxxxx&quot;);\n</code></pre>\n<p>Now when upgrading to Java 17 I get an error at</p>\n<pre class=\"lang-java prettyprint-override\"><code>InitialContext initialContext = new InitialContext(env);\n</code></pre>\n<p>The error says:</p>\n<pre class=\"lang-none prettyprint-override\"><code>&lt;Fri Oct 06 12:05:30 CEST 2023&gt; &lt;Debug&gt; &lt;RJVM&gt; &lt;WL-000517&gt; &lt;'java.io.ObjectInputStream.defaultDataEnd' field not initialized\njava.lang.reflect.InaccessibleObjectException: Unable to make field private boolean java.io.ObjectInputStream.defaultDataEnd accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @1bce4f0a\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\n    at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\n    at weblogic.rjvm.MsgAbbrevInputStream.getField(MsgAbbrevInputStream.java:135)\n    at weblogic.rjvm.MsgAbbrevInputStream.&lt;clinit&gt;(MsgAbbrevInputStream.java:89)\n    at weblogic.rjvm.ConnectionManager.getInputStream(ConnectionManager.java:2005)\n    at weblogic.rjvm.MsgAbbrevJVMConnection.dispatch(MsgAbbrevJVMConnection.java:555)\n    at weblogic.rjvm.t3.client.MuxableSocketT3.dispatch(MuxableSocketT3.java:180)\n    at weblogic.socket.BaseAbstractMuxableSocket.dispatch(BaseAbstractMuxableSocket.java:397)\n    at weblogic.socket.SocketMuxer.readReadySocketOnce(SocketMuxer.java:981)\n    at weblogic.socket.SocketMuxer.readReadySocket(SocketMuxer.java:907)\n    at weblogic.socket.JavaSocketMuxer.processSockets(JavaSocketMuxer.java:385)\n    at weblogic.socket.SocketReaderRequest.run(SocketReaderRequest.java:30)\n    at weblogic.work.ExecuteRequestAdapter.execute(ExecuteRequestAdapter.java:21)\n    at weblogic.kernel.ExecuteThread.execute(ExecuteThread.java:147)\n    at weblogic.kernel.ExecuteThread.run(ExecuteThread.java:119)\n</code></pre>\n<p>I tried adding a <code>module-info.java</code> with following content to no avail.</p>\n<pre class=\"lang-java prettyprint-override\"><code>module berichtenverkeer-utilities {\n    requires java.base;\n    requires java.reflect;\n    requires java.naming;\n    opens java.io;\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","quarkus","smallrye-reactive-messaging","smallrye"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1613660352,"post_id":66249352,"comment_id":117148846,"body_markdown":"You&#39;ve got the topic name in the producer.send call. What&#39;s the issue?","body":"You&#39;ve got the topic name in the producer.send call. What&#39;s the issue?"},{"owner":{"account_id":18606024,"reputation":59,"user_id":13559628,"display_name":"EbiPenMan"},"score":0,"creation_date":1613751717,"post_id":66249352,"comment_id":117181371,"body_markdown":"@OneCricketeer Thanks for your reply. I use `quarkus-kafka-client` dependency. but I don&#39;t want to use it. I want to use `smallrye-kafka`. I used `quarkus-kafka-client` because I had no choice. `smallrye-kafka` use annotation for the topic name.","body":"@OneCricketeer Thanks for your reply. I use <code>quarkus-kafka-client</code> dependency. but I don&#39;t want to use it. I want to use <code>smallrye-kafka</code>. I used <code>quarkus-kafka-client</code> because I had no choice. <code>smallrye-kafka</code> use annotation for the topic name."},{"owner":{"account_id":18606024,"reputation":59,"user_id":13559628,"display_name":"EbiPenMan"},"score":0,"creation_date":1613752551,"post_id":66249352,"comment_id":117181801,"body_markdown":"@OneCricketeer I&#39;m looking for a way to use `smallrye-kafka` to manually set the topic name without the use of annotations.","body":"@OneCricketeer I&#39;m looking for a way to use <code>smallrye-kafka</code> to manually set the topic name without the use of annotations."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1613829213,"post_id":66249352,"comment_id":117199717,"body_markdown":"I&#39;m not super familiar with the smallrye library, but I think it requires the annotations so isn&#39;t able to dynamically redefine the outgoing channel","body":"I&#39;m not super familiar with the smallrye library, but I think it requires the annotations so isn&#39;t able to dynamically redefine the outgoing channel"},{"owner":{"account_id":10417331,"reputation":147,"user_id":7681004,"display_name":"bdeweer"},"score":3,"creation_date":1615291439,"post_id":66249352,"comment_id":117640372,"body_markdown":"now it&#39;s possible with https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/2.5/kafka/kafka.html#_dynamic_topic_names","body":"now it&#39;s possible with <a href=\"https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/2.5/kafka/kafka.html#_dynamic_topic_names\" rel=\"nofollow noreferrer\">smallrye.io/smallrye-reactive-messaging/&hellip;</a>"},{"owner":{"account_id":18606024,"reputation":59,"user_id":13559628,"display_name":"EbiPenMan"},"score":0,"creation_date":1653279472,"post_id":66249352,"comment_id":127803697,"body_markdown":"@bertranddeweer thank you. Yes, that&#39;s what I wanted. But your link gives me a 404 error. I put the link with the new version https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.9/kafka/kafka.html#_dynamic_topic_names","body":"@bertranddeweer thank you. Yes, that&#39;s what I wanted. But your link gives me a 404 error. I put the link with the new version <a href=\"https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.9/kafka/kafka.html#_dynamic_topic_names\" rel=\"nofollow noreferrer\">smallrye.io/smallrye-reactive-messaging/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":9348817,"reputation":39,"user_id":6939223,"display_name":"Hamed Hatami"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1630874450,"creation_date":1630835563,"answer_id":69062279,"question_id":66249352,"body_markdown":"You&#39;re able to override the value of topic dynamically at startup or at any time you need, but here is a snippet of code to indicates how to override the predefined value of topic:\r\n \r\n```lang-java\r\n@ApplicationScoped\r\npublic class AppLifecycleBean {\r\n\r\n    void onStart(@Observes StartupEvent ev) {               \r\n        System.setProperty(&quot;mp.messaging.outgoing.generated-price.topic&quot;, &quot;example&quot;);\r\n    }\r\n\r\n    void onStop(@Observes ShutdownEvent ev) {               \r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n","title":"Dynamic Topic Name / Quarkus SmallRye Reactive Messaging Kafka","body":"<p>You're able to override the value of topic dynamically at startup or at any time you need, but here is a snippet of code to indicates how to override the predefined value of topic:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\npublic class AppLifecycleBean {\n\n    void onStart(@Observes StartupEvent ev) {               \n        System.setProperty(&quot;mp.messaging.outgoing.generated-price.topic&quot;, &quot;example&quot;);\n    }\n\n    void onStop(@Observes ShutdownEvent ev) {               \n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10562604,"reputation":307,"user_id":7781915,"display_name":"Rahul_Mandhane"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696596853,"creation_date":1696596412,"answer_id":77244562,"question_id":66249352,"body_markdown":"you can use emitter, with metadata the code will look like this\r\n\r\n\r\n```\r\n\r\n    @Channel(&quot;channel-out&quot;)\r\n    Emitter&lt;String&gt; kafkaEventEmitter;\r\n\r\n    public void publishToKafka(String data,String TOPICNAME) {\r\n\r\n        OutgoingKafkaRecordMetadata&lt;?&gt; metadata= OutgoingKafkaRecordMetadata.builder()\r\n                .withTopic(TOPICNAME)\r\n                        .build();\r\n\r\n        kafkaEventEmitter.send(Message.of(data).addMetadata(metadata));\r\n}\r\n\r\n```\r\n\r\nand here is official documentation :https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.9/kafka/kafka.html#_dynamic_topic_names\r\n","title":"Dynamic Topic Name / Quarkus SmallRye Reactive Messaging Kafka","body":"<p>you can use emitter, with metadata the code will look like this</p>\n<pre><code>\n    @Channel(&quot;channel-out&quot;)\n    Emitter&lt;String&gt; kafkaEventEmitter;\n\n    public void publishToKafka(String data,String TOPICNAME) {\n\n        OutgoingKafkaRecordMetadata&lt;?&gt; metadata= OutgoingKafkaRecordMetadata.builder()\n                .withTopic(TOPICNAME)\n                        .build();\n\n        kafkaEventEmitter.send(Message.of(data).addMetadata(metadata));\n}\n\n</code></pre>\n<p>and here is official documentation :<a href=\"https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.9/kafka/kafka.html#_dynamic_topic_names\" rel=\"nofollow noreferrer\">https://smallrye.io/smallrye-reactive-messaging/smallrye-reactive-messaging/3.9/kafka/kafka.html#_dynamic_topic_names</a></p>\n"}],"owner":{"account_id":18606024,"reputation":59,"user_id":13559628,"display_name":"EbiPenMan"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2411,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1696596853,"creation_date":1613593032,"question_id":66249352,"body_markdown":"I want to use this extension: [Quarkus Smallrye Reactive Messaging Kafka]\r\n\r\nBut in my application the name of the topics is not known in advance,  it is specified according to the message received from the user at runtime. How can I specify the topic name and settings related to the topic without annotations and programmatically? (Only for send a message to Kafka -&gt; Produce)\r\n\r\n```\r\n@ApplicationScoped\r\npublic class PriceGenerator {\r\n\r\n    private Random random = new Random();\r\n\r\n    // Don&#39;t want to use this \r\n    // &quot;generated-price&quot; not known at build time\r\n    @Outgoing(&quot;generated-price&quot;)                       \r\n    public Multi&lt;Integer&gt; generate() {                  \r\n        return Multi.createFrom().ticks().every(Duration.ofSeconds(5))\r\n                .onOverflow().drop()\r\n                .map(tick -&gt; random.nextInt(100));\r\n    }\r\n\r\n}\r\n```\r\nor these configs should set at runtime and programmatically\r\n```\r\nmp.messaging.outgoing.generated-price.connector=smallrye-kafka\r\nmp.messaging.outgoing.generated-price.topic=prices\r\nmp.messaging.outgoing.generated-price.value.serializer=org.apache.kafka.common.serialization.IntegerSerializer\r\n\r\n```\r\n\r\nBecause I did not know the way, I used the native Kafka driver\r\n\r\n```\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\r\n      &lt;artifactId&gt;quarkus-kafka-client&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n```\r\n\r\n\r\n```\r\nProperties props = new Properties();\r\nprops.put(&quot;bootstrap.servers&quot;, &quot;85.93.89.115:9092&quot;);\r\nprops.put(&quot;acks&quot;, &quot;all&quot;);\r\nprops.put(&quot;retries&quot;, 0);\r\nprops.put(&quot;linger.ms&quot;, 1);\r\nprops.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nprops.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\r\nProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props);\r\nproducer.send(new ProducerRecord&lt;String, String&gt;(topicName.toString(), messageFactory.MessageToString(message)));\r\n\r\n```\r\n\r\n","title":"Dynamic Topic Name / Quarkus SmallRye Reactive Messaging Kafka","body":"<p>I want to use this extension: [Quarkus Smallrye Reactive Messaging Kafka]</p>\n<p>But in my application the name of the topics is not known in advance,  it is specified according to the message received from the user at runtime. How can I specify the topic name and settings related to the topic without annotations and programmatically? (Only for send a message to Kafka -&gt; Produce)</p>\n<pre><code>@ApplicationScoped\npublic class PriceGenerator {\n\n    private Random random = new Random();\n\n    // Don't want to use this \n    // &quot;generated-price&quot; not known at build time\n    @Outgoing(&quot;generated-price&quot;)                       \n    public Multi&lt;Integer&gt; generate() {                  \n        return Multi.createFrom().ticks().every(Duration.ofSeconds(5))\n                .onOverflow().drop()\n                .map(tick -&gt; random.nextInt(100));\n    }\n\n}\n</code></pre>\n<p>or these configs should set at runtime and programmatically</p>\n<pre><code>mp.messaging.outgoing.generated-price.connector=smallrye-kafka\nmp.messaging.outgoing.generated-price.topic=prices\nmp.messaging.outgoing.generated-price.value.serializer=org.apache.kafka.common.serialization.IntegerSerializer\n\n</code></pre>\n<p>Because I did not know the way, I used the native Kafka driver</p>\n<pre><code>    &lt;dependency&gt;\n      &lt;groupId&gt;io.quarkus&lt;/groupId&gt;\n      &lt;artifactId&gt;quarkus-kafka-client&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<pre><code>Properties props = new Properties();\nprops.put(&quot;bootstrap.servers&quot;, &quot;85.93.89.115:9092&quot;);\nprops.put(&quot;acks&quot;, &quot;all&quot;);\nprops.put(&quot;retries&quot;, 0);\nprops.put(&quot;linger.ms&quot;, 1);\nprops.put(&quot;key.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nprops.put(&quot;value.serializer&quot;, &quot;org.apache.kafka.common.serialization.StringSerializer&quot;);\nProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(props);\nproducer.send(new ProducerRecord&lt;String, String&gt;(topicName.toString(), messageFactory.MessageToString(message)));\n\n</code></pre>\n"},{"tags":["java","android","onclicklistener"],"comments":[{"owner":{"account_id":10055888,"reputation":3162,"user_id":7434090,"display_name":"Gavin Wright"},"score":0,"creation_date":1654907362,"post_id":72580830,"comment_id":128211747,"body_markdown":"Just add your own `Toolbar` to each layout. Trying to work around the built-in one in such a needless pain.","body":"Just add your own <code>Toolbar</code> to each layout. Trying to work around the built-in one in such a needless pain."},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1654909359,"post_id":72580830,"comment_id":128211934,"body_markdown":"@GavinWright I am using Toolbar but i feel its an issue of action layout","body":"@GavinWright I am using Toolbar but i feel its an issue of action layout"},{"owner":{"account_id":10055888,"reputation":3162,"user_id":7434090,"display_name":"Gavin Wright"},"score":0,"creation_date":1654911940,"post_id":72580830,"comment_id":128212138,"body_markdown":"Which app theme are you using? I&#39;m suggesting that you use one like `Theme.AppCompat.Light.NoActionBar`, and then add the `Toolbar` into your layout manually.","body":"Which app theme are you using? I&#39;m suggesting that you use one like <code>Theme.AppCompat.Light.NoActionBar</code>, and then add the <code>Toolbar</code> into your layout manually."},{"owner":{"account_id":8725718,"reputation":1712,"user_id":6527410,"accept_rate":53,"display_name":"androidXP"},"score":0,"creation_date":1654920530,"post_id":72580830,"comment_id":128212909,"body_markdown":"you are correct the issues comes in your action layout. You are using bell icon in menuitem and also in action layout. So leave menuitem and go with action layout&#39;s `Imageview`  on click listener","body":"you are correct the issues comes in your action layout. You are using bell icon in menuitem and also in action layout. So leave menuitem and go with action layout&#39;s <code>Imageview</code>  on click listener"},{"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"score":0,"creation_date":1654963745,"post_id":72580830,"comment_id":128219815,"body_markdown":"@androidXP can you please show me the code. Thnks","body":"@androidXP can you please show me the code. Thnks"}],"answers":[{"tags":[],"owner":{"account_id":5418581,"reputation":347,"user_id":4313009,"display_name":"Alfredo Tost&#243;n"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696596658,"creation_date":1696596658,"answer_id":77244591,"question_id":72580830,"body_markdown":"I&#39;ve been getting through the same problem for a while with a `MaterialToolbar`.\r\n\r\nAccording to [this post on copyprogramming.com][1], there is a known issue with some toolbar implementations.\r\n\r\nA solution that worked for me was to set the OnClickListener manually on the layout view:\r\n\r\n```kotlin\r\nval toolbar = view.findViewById&lt;MaterialToolbar&gt;(R.id.the_toolbar)\r\nval actionView = toolbar.menu\r\n    .findItem(R.id.notifications_menu_item).actionView\r\nactionView!!.setOnClickListener { view -&gt;\r\n    // Do something\r\n}\r\n```\r\n\r\n  [1]: https://copyprogramming.com/howto/onoptionsitemselected-not-called#onoptionsitemselected-not-called-when-using-actionlayout-sherlockactionbar","title":"Toolbar item (Notification bell with Count overlay) not responding to click","body":"<p>I've been getting through the same problem for a while with a <code>MaterialToolbar</code>.</p>\n<p>According to <a href=\"https://copyprogramming.com/howto/onoptionsitemselected-not-called#onoptionsitemselected-not-called-when-using-actionlayout-sherlockactionbar\" rel=\"nofollow noreferrer\">this post on copyprogramming.com</a>, there is a known issue with some toolbar implementations.</p>\n<p>A solution that worked for me was to set the OnClickListener manually on the layout view:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val toolbar = view.findViewById&lt;MaterialToolbar&gt;(R.id.the_toolbar)\nval actionView = toolbar.menu\n    .findItem(R.id.notifications_menu_item).actionView\nactionView!!.setOnClickListener { view -&gt;\n    // Do something\n}\n</code></pre>\n"}],"owner":{"account_id":9069534,"reputation":548,"user_id":6753279,"accept_rate":63,"display_name":"Ritu"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696596658,"creation_date":1654906302,"question_id":72580830,"body_markdown":"I have notification bell icon at toolbar with notification count text. It works as expected but when notification count is zero then click on bell icon not working. I think it&#39;s because of action layout which shows count over notification bell but at the same time i think bell icon should take onclick events. I know it&#39;s something i miss but i am able to figure out where the code break. Please help me out.\r\n\r\nMenuitem\r\n\r\n       &lt;item android:id=&quot;@+id/notificationBell&quot;\r\n            android:title=&quot;&quot;\r\n            android:icon=&quot;@drawable/notification&quot;\r\n            app:actionLayout=&quot;@layout/menuitem_notification_count&quot;\r\n            android:visible=&quot;true&quot;\r\n            app:showAsAction=&quot;always&quot;&gt;\r\n        &lt;/item&gt;\r\n\r\nAction Layout - menuitem_notification_count\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;FrameLayout\r\n        style=&quot;?attr/actionButtonStyle&quot;\r\n        xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;wrap_content&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:clipToPadding=&quot;false&quot;\r\n        android:focusable=&quot;true&quot;&gt;\r\n    \r\n        &lt;ImageView\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_gravity=&quot;center&quot;\r\n            android:src=&quot;@drawable/notification&quot;/&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/cart_badge&quot;\r\n            android:layout_width=&quot;22dp&quot;\r\n            android:layout_height=&quot;22dp&quot;\r\n            android:layout_gravity=&quot;end|top&quot;\r\n            android:layout_marginEnd=&quot;-10dp&quot;\r\n            android:layout_marginTop=&quot;1dp&quot;\r\n            android:padding=&quot;2dp&quot;\r\n            android:background=&quot;@drawable/notification_count_background&quot;\r\n            android:textAlignment=&quot;center&quot;\r\n            android:gravity=&quot;center&quot;\r\n            android:textColor=&quot;@android:color/white&quot;\r\n            android:textSize=&quot;12sp&quot;/&gt;\r\n    \r\n    &lt;/FrameLayout&gt;\r\n\r\nonCreateOptionsMenu\r\n\r\n     @Override\r\n        public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {\r\n            super.onCreateOptionsMenu(menu, inflater);\r\n            inflater.inflate(R.menu.menu_notification, menu);\r\n            MenuItem notificationBell = menu.findItem(R.id.notificationBell);\r\n            textNotificationCount = notificationBell.getActionView().findViewById(R.id.cart_badge);\r\n            Typeface fontFace = ResourcesCompat.getFont(getActivity(), R.font.roboto_medium_numbers);\r\n            textNotificationCount.setTypeface(fontFace);\r\n            notificationCount = getNotificationCount();\r\n            int checkCount = Integer.parseInt(notificationCount);\r\n            Log.d(TAG, &quot;run:  Notification Count = &quot; + notificationCount);\r\n            notificationBell.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {\r\n                @Override\r\n                public boolean onMenuItemClick(MenuItem menuItem) {\r\n                    if (checkCount==0){\r\n    \t\t\t\t\t// THIS TOAST AND LOG NEVER SHOWS \r\n    \t\t\t\t\tLog.d(TAG, &quot;run:  Notification Count Is 0&quot;);\r\n                        Toast.makeText(getActivity(), &quot;No New Notifications.&quot;, Toast.LENGTH_SHORT).show();\r\n                    }\r\n    \r\n                    return false;\r\n                }\r\n            });\r\n            if (checkCount == 0) {\r\n                if (textNotificationCount.getVisibility() != View.GONE) {\r\n                    textNotificationCount.setVisibility(View.GONE);\r\n                }\r\n            } else if (checkCount &gt; 99) {\r\n                //textNotificationCount.setText(String.valueOf(Math.min(notificationCount, 99))+&quot;+&quot;);\r\n                textNotificationCount.setText(&quot;99+&quot;);\r\n                if (textNotificationCount.getVisibility() != View.VISIBLE) {\r\n                    textNotificationCount.setVisibility(View.VISIBLE);\r\n                }\r\n            } else {\r\n                textNotificationCount.setText(notificationCount);\r\n                if (textNotificationCount.getVisibility() != View.VISIBLE) {\r\n                    textNotificationCount.setVisibility(View.VISIBLE);\r\n                }\r\n            }\r\n    \r\n            textNotificationCount.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n    \t\t\t\t// ON CLICK WORKS WHEN COUNT IS NOT ZERO\r\n                }\r\n            });\r\n    \r\n        }","title":"Toolbar item (Notification bell with Count overlay) not responding to click","body":"<p>I have notification bell icon at toolbar with notification count text. It works as expected but when notification count is zero then click on bell icon not working. I think it's because of action layout which shows count over notification bell but at the same time i think bell icon should take onclick events. I know it's something i miss but i am able to figure out where the code break. Please help me out.</p>\n<p>Menuitem</p>\n<pre><code>   &lt;item android:id=&quot;@+id/notificationBell&quot;\n        android:title=&quot;&quot;\n        android:icon=&quot;@drawable/notification&quot;\n        app:actionLayout=&quot;@layout/menuitem_notification_count&quot;\n        android:visible=&quot;true&quot;\n        app:showAsAction=&quot;always&quot;&gt;\n    &lt;/item&gt;\n</code></pre>\n<p>Action Layout - menuitem_notification_count</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;FrameLayout\n    style=&quot;?attr/actionButtonStyle&quot;\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;wrap_content&quot;\n    android:clipToPadding=&quot;false&quot;\n    android:focusable=&quot;true&quot;&gt;\n\n    &lt;ImageView\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_gravity=&quot;center&quot;\n        android:src=&quot;@drawable/notification&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/cart_badge&quot;\n        android:layout_width=&quot;22dp&quot;\n        android:layout_height=&quot;22dp&quot;\n        android:layout_gravity=&quot;end|top&quot;\n        android:layout_marginEnd=&quot;-10dp&quot;\n        android:layout_marginTop=&quot;1dp&quot;\n        android:padding=&quot;2dp&quot;\n        android:background=&quot;@drawable/notification_count_background&quot;\n        android:textAlignment=&quot;center&quot;\n        android:gravity=&quot;center&quot;\n        android:textColor=&quot;@android:color/white&quot;\n        android:textSize=&quot;12sp&quot;/&gt;\n\n&lt;/FrameLayout&gt;\n</code></pre>\n<p>onCreateOptionsMenu</p>\n<pre><code> @Override\n    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {\n        super.onCreateOptionsMenu(menu, inflater);\n        inflater.inflate(R.menu.menu_notification, menu);\n        MenuItem notificationBell = menu.findItem(R.id.notificationBell);\n        textNotificationCount = notificationBell.getActionView().findViewById(R.id.cart_badge);\n        Typeface fontFace = ResourcesCompat.getFont(getActivity(), R.font.roboto_medium_numbers);\n        textNotificationCount.setTypeface(fontFace);\n        notificationCount = getNotificationCount();\n        int checkCount = Integer.parseInt(notificationCount);\n        Log.d(TAG, &quot;run:  Notification Count = &quot; + notificationCount);\n        notificationBell.setOnMenuItemClickListener(new MenuItem.OnMenuItemClickListener() {\n            @Override\n            public boolean onMenuItemClick(MenuItem menuItem) {\n                if (checkCount==0){\n                    // THIS TOAST AND LOG NEVER SHOWS \n                    Log.d(TAG, &quot;run:  Notification Count Is 0&quot;);\n                    Toast.makeText(getActivity(), &quot;No New Notifications.&quot;, Toast.LENGTH_SHORT).show();\n                }\n\n                return false;\n            }\n        });\n        if (checkCount == 0) {\n            if (textNotificationCount.getVisibility() != View.GONE) {\n                textNotificationCount.setVisibility(View.GONE);\n            }\n        } else if (checkCount &gt; 99) {\n            //textNotificationCount.setText(String.valueOf(Math.min(notificationCount, 99))+&quot;+&quot;);\n            textNotificationCount.setText(&quot;99+&quot;);\n            if (textNotificationCount.getVisibility() != View.VISIBLE) {\n                textNotificationCount.setVisibility(View.VISIBLE);\n            }\n        } else {\n            textNotificationCount.setText(notificationCount);\n            if (textNotificationCount.getVisibility() != View.VISIBLE) {\n                textNotificationCount.setVisibility(View.VISIBLE);\n            }\n        }\n\n        textNotificationCount.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                // ON CLICK WORKS WHEN COUNT IS NOT ZERO\n            }\n        });\n\n    }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","amazon-sqs"],"answers":[{"tags":[],"owner":{"account_id":350117,"reputation":8653,"user_id":685806,"accept_rate":44,"display_name":"Pino"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696596521,"creation_date":1696594852,"answer_id":77244397,"question_id":77243756,"body_markdown":"If you upgrade Spring-boot you have to upgrade `io.awspring.cloud:spring-cloud-aws-autoconfigure` too: Spring-boot 3.x requires Spring-cloud 3.x.\r\n\r\nThe full compatibility matrix is available at https://github.com/awspring/spring-cloud-aws#compatibility-with-spring-project-versions\r\n\r\nAbout the techniques &quot;to determine why Spring is not including this bean anymore&quot;, generally speaking, you can examine the [autoconfiguration report][1] generated by Spring in debug mode.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/47101743/685806","title":"Diagnosis of missing Spring AutoConfiguration class","body":"<p>If you upgrade Spring-boot you have to upgrade <code>io.awspring.cloud:spring-cloud-aws-autoconfigure</code> too: Spring-boot 3.x requires Spring-cloud 3.x.</p>\n<p>The full compatibility matrix is available at <a href=\"https://github.com/awspring/spring-cloud-aws#compatibility-with-spring-project-versions\" rel=\"nofollow noreferrer\">https://github.com/awspring/spring-cloud-aws#compatibility-with-spring-project-versions</a></p>\n<p>About the techniques &quot;to determine why Spring is not including this bean anymore&quot;, generally speaking, you can examine the <a href=\"https://stackoverflow.com/q/47101743/685806\">autoconfiguration report</a> generated by Spring in debug mode.</p>\n"}],"owner":{"account_id":2115025,"reputation":384,"user_id":1879536,"display_name":"Martin Bamford"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77244397,"answer_count":1,"score":0,"last_activity_date":1696596521,"creation_date":1696588585,"question_id":77243756,"body_markdown":"I have a `@SpringBootApplication` with an implementation dependency on `io.awspring.cloud:spring-cloud-aws-autoconfigure:2.4.4`, which contains the class `SQSAutoConfiguration`.  This autoconfiguration class kicks in at application start-up and constructs a `SimpleMessageListenerContainer` bean using the `SimpleMessageListenerContainerFactory`\r\n\r\nUpdating from Spring Boot 2.7.12 to 3.1.2, the SQS processing is no longer working.  Debugging the Spring initialisation process, before and after, and using the `gradle dependencies` tool and the IntelliJ Spring Tool Window, I can confirm that whilst the `spring-cloud-aws-autoconfigure` dependency is still present, the `SQSAutoConfiguration` bean is now missing from the Spring context, as a result the `SimpleMessageListenerContainer` bean does not get created and so the SQS processing does not happen.\r\n\r\nMy question is - I have the tools to show me that the auto configure bean is missing after the spring boot version change, but what tools or techniques could I use to determine *why* Spring is not including this bean anymore.    \r\n\r\n","title":"Diagnosis of missing Spring AutoConfiguration class","body":"<p>I have a <code>@SpringBootApplication</code> with an implementation dependency on <code>io.awspring.cloud:spring-cloud-aws-autoconfigure:2.4.4</code>, which contains the class <code>SQSAutoConfiguration</code>.  This autoconfiguration class kicks in at application start-up and constructs a <code>SimpleMessageListenerContainer</code> bean using the <code>SimpleMessageListenerContainerFactory</code></p>\n<p>Updating from Spring Boot 2.7.12 to 3.1.2, the SQS processing is no longer working.  Debugging the Spring initialisation process, before and after, and using the <code>gradle dependencies</code> tool and the IntelliJ Spring Tool Window, I can confirm that whilst the <code>spring-cloud-aws-autoconfigure</code> dependency is still present, the <code>SQSAutoConfiguration</code> bean is now missing from the Spring context, as a result the <code>SimpleMessageListenerContainer</code> bean does not get created and so the SQS processing does not happen.</p>\n<p>My question is - I have the tools to show me that the auto configure bean is missing after the spring boot version change, but what tools or techniques could I use to determine <em>why</em> Spring is not including this bean anymore.</p>\n"},{"tags":["java","authentication","jenkins","jenkins-plugins"],"owner":{"account_id":5735131,"reputation":1080,"user_id":4529546,"accept_rate":75,"display_name":"Richard"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696596472,"creation_date":1696596472,"question_id":77244566,"body_markdown":"I need to create a Jenkins Authentication plugin that does this:\r\n\r\n - User arrives at the jenkins login page and enters username and password\r\n - plugin receives username and password (SecurityRealm.createSecurityComponents() etc.) and submits the credentials to a third party system that returns an MFA prompt.\r\n - Plugin takes the user to a &#39;page&#39; or in some other way notifies the user of the MFA prompt and allows them to enter their MFA response\r\n - Plugin completes login and returns SecurityComponents etc.\r\n\r\nI think what I&#39;m asking is, what is the best way to intercept the Jenkins login process such that I can provide an MFA challenge page?\r\nDo I need to get involved in Spring Filters or is there some more Jenkins Native way to do this?\r\n\r\n","title":"Jenkins Login Plugin Advice","body":"<p>I need to create a Jenkins Authentication plugin that does this:</p>\n<ul>\n<li>User arrives at the jenkins login page and enters username and password</li>\n<li>plugin receives username and password (SecurityRealm.createSecurityComponents() etc.) and submits the credentials to a third party system that returns an MFA prompt.</li>\n<li>Plugin takes the user to a 'page' or in some other way notifies the user of the MFA prompt and allows them to enter their MFA response</li>\n<li>Plugin completes login and returns SecurityComponents etc.</li>\n</ul>\n<p>I think what I'm asking is, what is the best way to intercept the Jenkins login process such that I can provide an MFA challenge page?\nDo I need to get involved in Spring Filters or is there some more Jenkins Native way to do this?</p>\n"},{"tags":["java","sorting","casting","long-integer"],"comments":[{"owner":{"account_id":27323737,"reputation":1,"user_id":20837016,"display_name":"user20837016"},"score":0,"creation_date":1696594848,"post_id":77244338,"comment_id":136176711,"body_markdown":"i know that the camparator cannot sort primitives but when using it with int,Integer it works fine\nin this case i used it as long,Long","body":"i know that the camparator cannot sort primitives but when using it with int,Integer it works fine in this case i used it as long,Long"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696595192,"post_id":77244338,"comment_id":136176777,"body_markdown":"`return IntStream.of(nums).max().orElseThrow();` Not sure why you&#39;d want to return `String` though, but trivial to fix if that&#39;s necessary for some reason","body":"<code>return IntStream.of(nums).max().orElseThrow();</code> Not sure why you&#39;d want to return <code>String</code> though, but trivial to fix if that&#39;s necessary for some reason"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1696595293,"post_id":77244338,"comment_id":136176803,"body_markdown":"If you look at [the methods of the Arrays class](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#method-summary), you will see that there are two `sort` methods that accept `long[]`.  Those methods are `sort(long[])` (which takes one argument) and `sort(long[], int, int)` (which takes three arguments).  There is no sort method which takes a `long[]` and a Comparator, which is what the compiler is telling you.","body":"If you look at <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#method-summary\" rel=\"nofollow noreferrer\">the methods of the Arrays class</a>, you will see that there are two <code>sort</code> methods that accept <code>long[]</code>.  Those methods are <code>sort(long[])</code> (which takes one argument) and <code>sort(long[], int, int)</code> (which takes three arguments).  There is no sort method which takes a <code>long[]</code> and a Comparator, which is what the compiler is telling you."},{"owner":{"account_id":27323737,"reputation":1,"user_id":20837016,"display_name":"user20837016"},"score":0,"creation_date":1696597787,"post_id":77244338,"comment_id":136177385,"body_markdown":"ohk, thanks\ni use this method just for sorting cases like this, i haven&#39;t studied it so it was a creating confusion","body":"ohk, thanks i use this method just for sorting cases like this, i haven&#39;t studied it so it was a creating confusion"}],"owner":{"account_id":27323737,"reputation":1,"user_id":20837016,"display_name":"user20837016"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696595273,"answer_count":0,"score":0,"last_activity_date":1696596434,"creation_date":1696594354,"question_id":77244338,"body_markdown":"I&#39;m trying to sort an array in java using the inbuilt comparator and sort method but it is giving me an error `incompatible type, object cannot be converted to int`\r\n\r\n\r\nI want to sort an array and also want to index changes apply to another array, e.g. sorting marks and id of students, instead if getting a sorted array, i got errors\r\n\r\n\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.Comparator;\r\n\r\nclass Solution\r\n{\r\n    public String largestNumber(int[] nums)\r\n    {\r\n        int n = nums.length;\r\n        long[] max = new long[n];\r\n        long[] id = new long[n];\r\n\r\n        for (int i = 0; i &lt; n; i++)\r\n        {\r\n            id[i] = (long) nums[i];\r\n            max[i] = changeNum(nums[i]); //return type of changeNum is long cant code it because the website wont allow it\r\n        }\r\n\r\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\r\n\r\n        return &quot;&quot;;\r\n    }\r\n\r\n\r\nthat my code and following is the error i got\r\nLine 21: error: no suitable method found for sort(long[],Comparator&lt;Object&gt;)\r\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\r\n              ^\r\n    method Arrays.&lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;) is not applicable\r\n      (inference variable T#1 has incompatible bounds\r\n        equality constraints: long\r\n        lower bounds: Object)\r\n    method Arrays.&lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;) is not applicable\r\n      (cannot infer type-variable(s) T#2\r\n        (actual and formal argument lists differ in length))\r\n  where T#1,T#2 are type-variables:\r\n    T#1 extends Object declared in method &lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;)\r\n    T#2 extends Object declared in method &lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;)\r\nLine 21: error: incompatible types: Object cannot be converted to int\r\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\r\n                                                          ^\r\n2 errors\r\n```","title":"Type casting and sorting two arrays in java","body":"<p>I'm trying to sort an array in java using the inbuilt comparator and sort method but it is giving me an error <code>incompatible type, object cannot be converted to int</code></p>\n<p>I want to sort an array and also want to index changes apply to another array, e.g. sorting marks and id of students, instead if getting a sorted array, i got errors</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Comparator;\n\nclass Solution\n{\n    public String largestNumber(int[] nums)\n    {\n        int n = nums.length;\n        long[] max = new long[n];\n        long[] id = new long[n];\n\n        for (int i = 0; i &lt; n; i++)\n        {\n            id[i] = (long) nums[i];\n            max[i] = changeNum(nums[i]); //return type of changeNum is long cant code it because the website wont allow it\n        }\n\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\n\n        return &quot;&quot;;\n    }\n\n\nthat my code and following is the error i got\nLine 21: error: no suitable method found for sort(long[],Comparator&lt;Object&gt;)\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\n              ^\n    method Arrays.&lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;) is not applicable\n      (inference variable T#1 has incompatible bounds\n        equality constraints: long\n        lower bounds: Object)\n    method Arrays.&lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;) is not applicable\n      (cannot infer type-variable(s) T#2\n        (actual and formal argument lists differ in length))\n  where T#1,T#2 are type-variables:\n    T#1 extends Object declared in method &lt;T#1&gt;sort(T#1[],Comparator&lt;? super T#1&gt;)\n    T#2 extends Object declared in method &lt;T#2&gt;sort(T#2[],int,int,Comparator&lt;? super T#2&gt;)\nLine 21: error: incompatible types: Object cannot be converted to int\n        Arrays.sort(id, Comparator.comparingLong(i -&gt; max[i]));\n                                                          ^\n2 errors\n</code></pre>\n"},{"tags":["java","jax-rs","resteasy"],"answers":[{"tags":[],"owner":{"account_id":22194253,"reputation":48,"user_id":16435873,"display_name":"Ninhache"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696595952,"creation_date":1696595952,"answer_id":77244509,"question_id":77243751,"body_markdown":"I&#39;ve found the problem !!\r\n\r\nIt&#39;s simply because I didnt setup my project properly :\r\nhttps://quarkus.io/guides/security-oidc-bearer-token-authentication\r\n\r\nI can&#39;t send request with a bearer like i&#39;m doing, i&#39;ve to &quot;configure&quot; the project before.. ups !!","title":"JAX-RS cannot handle a Authorization header with a JWT","body":"<p>I've found the problem !!</p>\n<p>It's simply because I didnt setup my project properly :\n<a href=\"https://quarkus.io/guides/security-oidc-bearer-token-authentication\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/security-oidc-bearer-token-authentication</a></p>\n<p>I can't send request with a bearer like i'm doing, i've to &quot;configure&quot; the project before.. ups !!</p>\n"}],"owner":{"account_id":22194253,"reputation":48,"user_id":16435873,"display_name":"Ninhache"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77244509,"answer_count":1,"score":0,"last_activity_date":1696595952,"creation_date":1696588538,"question_id":77243751,"body_markdown":"&lt;br&gt;\r\n*Possibly a duplicate but cannot find it lol*\r\n\r\nI&#39;m using Quarkus with [quarkus-resteasy](https://quarkus.io/guides/resteasy) and I&#39;m trying to implement a simple GET method that will syso the headers, but before that, I needed to create a method that could handle a curl request :\r\n```java\r\n@GET\r\npublic Response foo() {\r\n    return Response.status(200).entity(&quot;Hello world !&quot;).build();\r\n}\r\n```\r\n\r\n```bash\r\ncurl --location &#39;localhost:8080/api/...&#39;&#39;\r\n&gt; Hello world !\r\n```\r\n\r\nEverything was fine until i tried to put an Authorization Header with a bearer :\r\n```bash\r\ncurl --location &#39;localhost:8080/api/...&#39; --header &#39;Authorization: Bearer eyJhbGc....&#39;\r\n&gt;\r\n```\r\nI firstly tough Authorization was a &quot;banned&quot; header for some reason.. but if i try the same request with a different value..\r\n```bash\r\ncurl --location &#39;localhost:8080/api/...&#39; --header &#39;Authorization: foo&#39;\r\n&gt; Hello World !\r\n```\r\nI&#39;m getting an `Hello World !`..\r\n\r\nI&#39;ve also tried to use `@HeaderParam(&quot;Authorization&quot;)` but same problem, with a Bearer I cannot &quot;target&quot; my endpoint\r\nAnyone ever face this problem ? &lt;br&gt;\r\n*May the value is too long.. (1795 chars)*","title":"JAX-RS cannot handle a Authorization header with a JWT","body":"<br>\n*Possibly a duplicate but cannot find it lol*\n<p>I'm using Quarkus with <a href=\"https://quarkus.io/guides/resteasy\" rel=\"nofollow noreferrer\">quarkus-resteasy</a> and I'm trying to implement a simple GET method that will syso the headers, but before that, I needed to create a method that could handle a curl request :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GET\npublic Response foo() {\n    return Response.status(200).entity(&quot;Hello world !&quot;).build();\n}\n</code></pre>\n<pre class=\"lang-bash prettyprint-override\"><code>curl --location 'localhost:8080/api/...''\n&gt; Hello world !\n</code></pre>\n<p>Everything was fine until i tried to put an Authorization Header with a bearer :</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl --location 'localhost:8080/api/...' --header 'Authorization: Bearer eyJhbGc....'\n&gt;\n</code></pre>\n<p>I firstly tough Authorization was a &quot;banned&quot; header for some reason.. but if i try the same request with a different value..</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl --location 'localhost:8080/api/...' --header 'Authorization: foo'\n&gt; Hello World !\n</code></pre>\n<p>I'm getting an <code>Hello World !</code>..</p>\n<p>I've also tried to use <code>@HeaderParam(&quot;Authorization&quot;)</code> but same problem, with a Bearer I cannot &quot;target&quot; my endpoint\nAnyone ever face this problem ? <br>\n<em>May the value is too long.. (1795 chars)</em></p>\n"},{"tags":["java","maven","jenkins","java-8","build"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1672069277,"post_id":74921640,"comment_id":132216057,"body_markdown":"`1.9`? Or do you mean `19`?","body":"<code>1.9</code>? Or do you mean <code>19</code>?"}],"answers":[{"tags":[],"owner":{"account_id":13273539,"reputation":59,"user_id":9583677,"display_name":"Elior Estrin"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1672611584,"creation_date":1672597538,"answer_id":74976557,"question_id":74921640,"body_markdown":"If was experiencing the same issue, try the following steps to resolve it:\r\n\r\n    \r\n\r\n 1. Go to Jenkins &gt; Manage Plugins.\r\n 2. Locate the plugin &quot;Oracle Java SE Development Kit Installer.&quot;\r\n 3. Click &quot;Uninstall&quot; and confirm the action.\r\n 4. Restart your machine.\r\n    \r\n    \r\n\r\nThis should fix the error. &lt;br&gt;It&#39;s unclear why this particular plugin causes the issue, but removing it seems to resolve it.&lt;br&gt; To prevent the error from returning, make sure not to reinstall the plugin. (ITS WEIRD I KNOW)","title":"Can&#39;t install JDK from Oracle on Jenkins","body":"<p>If was experiencing the same issue, try the following steps to resolve it:</p>\n<ol>\n<li>Go to Jenkins &gt; Manage Plugins.</li>\n<li>Locate the plugin &quot;Oracle Java SE Development Kit Installer.&quot;</li>\n<li>Click &quot;Uninstall&quot; and confirm the action.</li>\n<li>Restart your machine.</li>\n</ol>\n<p>This should fix the error. <br>It's unclear why this particular plugin causes the issue, but removing it seems to resolve it.<br> To prevent the error from returning, make sure not to reinstall the plugin. (ITS WEIRD I KNOW)</p>\n"},{"tags":[],"owner":{"account_id":27955820,"reputation":1,"user_id":21348675,"display_name":"Harish Gupta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678195254,"creation_date":1678195254,"answer_id":75662506,"question_id":74921640,"body_markdown":"If your using Ubuntu OS. use below steps or Linux use Yum command to install Openjdk1.8*\r\n\r\nThis is known bug currently. Please follow below steps to solve it.\r\n\r\nSSH to jenkins and run below command.\r\n\r\nsudo apt update\r\nsudo apt install openjdk-8-jdk -y\r\n\r\n\r\nLogin to Jenkins\r\n\r\nGo to Manage Jenkins =&gt; Global Tool Configuration\r\n\r\nClick on JDK Installation =&gt; Click on Red Cross mark on the right to remove Any JDK you have\r\n\r\n\r\n\r\nClick on Add JDK =&gt; uncheck Install automatically option\r\n\r\nIn name add below line\r\n\r\nOracleJDK8\r\n\r\n\r\n\r\nIn JAVA_HOME add below line and save.\r\n\r\n/usr/lib/jvm/java-8-openjdk-amd64\r\n","title":"Can&#39;t install JDK from Oracle on Jenkins","body":"<p>If your using Ubuntu OS. use below steps or Linux use Yum command to install Openjdk1.8*</p>\n<p>This is known bug currently. Please follow below steps to solve it.</p>\n<p>SSH to jenkins and run below command.</p>\n<p>sudo apt update\nsudo apt install openjdk-8-jdk -y</p>\n<p>Login to Jenkins</p>\n<p>Go to Manage Jenkins =&gt; Global Tool Configuration</p>\n<p>Click on JDK Installation =&gt; Click on Red Cross mark on the right to remove Any JDK you have</p>\n<p>Click on Add JDK =&gt; uncheck Install automatically option</p>\n<p>In name add below line</p>\n<p>OracleJDK8</p>\n<p>In JAVA_HOME add below line and save.</p>\n<p>/usr/lib/jvm/java-8-openjdk-amd64</p>\n"},{"tags":[],"owner":{"account_id":5193900,"reputation":420,"user_id":5881763,"display_name":"Mahesh Kshirsagar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696595693,"creation_date":1696595693,"answer_id":77244475,"question_id":74921640,"body_markdown":"I found openjdk istalled on my machine at this location\r\n/opt/java/openjdk/bin \r\n\r\nAdd  /opt/java/openjdk/bin in java_home location","title":"Can&#39;t install JDK from Oracle on Jenkins","body":"<p>I found openjdk istalled on my machine at this location\n/opt/java/openjdk/bin</p>\n<p>Add  /opt/java/openjdk/bin in java_home location</p>\n"}],"owner":{"account_id":1357932,"reputation":21,"user_id":1295944,"display_name":"user1295944"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1494,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1696595693,"creation_date":1672067932,"question_id":74921640,"body_markdown":"I defined in Jenkins JDK-&gt;install automatically-&gt; selected JDK version -&gt; I agree\r\n\r\nBut when i ran a build the JDK installation fails with this error\r\n```\r\n [jdk] $ /var/jenkins_home/tools/hudson.model.JDK/jdk/jdk.sh -noregister\r\n/var/jenkins_home/tools/hudson.model.JDK/jdk/jdk.sh: 2: Syntax error: newline unexpected\r\n\r\nCan you please help?\r\n\r\n```\r\nI tried to run a build with JDK+maven \r\nI expected to see the jdk 1.9 being installed running\r\nThanks","title":"Can&#39;t install JDK from Oracle on Jenkins","body":"<p>I defined in Jenkins JDK-&gt;install automatically-&gt; selected JDK version -&gt; I agree</p>\n<p>But when i ran a build the JDK installation fails with this error</p>\n<pre><code> [jdk] $ /var/jenkins_home/tools/hudson.model.JDK/jdk/jdk.sh -noregister\n/var/jenkins_home/tools/hudson.model.JDK/jdk/jdk.sh: 2: Syntax error: newline unexpected\n\nCan you please help?\n\n</code></pre>\n<p>I tried to run a build with JDK+maven\nI expected to see the jdk 1.9 being installed running\nThanks</p>\n"},{"tags":["java","jpa","spring-data-cassandra","graphql-java"],"owner":{"account_id":2985148,"reputation":385,"user_id":2534177,"accept_rate":67,"display_name":"Soumav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696594075,"creation_date":1696356357,"question_id":77224586,"body_markdown":"For the following graphql request:\r\n\r\n    query{testInput(testQueryInput:{xyz:&quot;test&quot;}){\r\n        \tlist{\r\n        \tfield1\r\n        \tfield2\r\n            .\r\n            .\r\n        \t}\r\n        }\r\n    }\r\nI am using ```CassandraRepository```&#39;s findBy* methods.\r\nThis internally forms a ```select * from tbl``` query.\r\n\r\nIs there a way to form the select query with only the the fields that are being passed in the graphql query&#39;s return section, dynamically? (This is to improve the existing performance as the DB has around 300 columns)\r\ne.g:\r\n```select field1, field2 from tbl```...\r\n\r\nI prefer not using the **CqlSession** object and executing the query string.\r\nAny suggestions customizing the CassandraRepository?\r\n","title":"Selecting specific columns for CassandraRepository dynamically as per GrapqhQl query&#39;s return fields","body":"<p>For the following graphql request:</p>\n<pre><code>query{testInput(testQueryInput:{xyz:&quot;test&quot;}){\n        list{\n        field1\n        field2\n        .\n        .\n        }\n    }\n}\n</code></pre>\n<p>I am using <code>CassandraRepository</code>'s findBy* methods.\nThis internally forms a <code>select * from tbl</code> query.</p>\n<p>Is there a way to form the select query with only the the fields that are being passed in the graphql query's return section, dynamically? (This is to improve the existing performance as the DB has around 300 columns)\ne.g:\n<code>select field1, field2 from tbl</code>...</p>\n<p>I prefer not using the <strong>CqlSession</strong> object and executing the query string.\nAny suggestions customizing the CassandraRepository?</p>\n"},{"tags":["java","android","kotlin","android-room"],"comments":[{"owner":{"account_id":4192472,"reputation":1728,"user_id":3434763,"display_name":"TheLibrarian"},"score":0,"creation_date":1696932196,"post_id":77244167,"comment_id":136212756,"body_markdown":"My bad about that one, I misinterpreted an annotation. The other thing ok - just dig through it yourself - the code is open source so you can see whether nested transactions are accounted for. Also if you want that DEEP managing of the database, no one is stopping you.","body":"My bad about that one, I misinterpreted an annotation. The other thing ok - just dig through it yourself - the code is open source so you can see whether nested transactions are accounted for. Also if you want that DEEP managing of the database, no one is stopping you."}],"owner":{"account_id":10465788,"reputation":12036,"user_id":7715250,"accept_rate":74,"display_name":"J. Doe"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1696593814,"creation_date":1696592676,"question_id":77244167,"body_markdown":"When I write a DAO and add an insert method, the implementation can be found in a generated file. An example of this can be the following implementation:\r\n\r\n    @Override\r\n    public Object insert(final DbUser entity, final Continuation&lt;? super Unit&gt; continuation) {\r\n      return CoroutinesRoom.execute(__db, true, new Callable&lt;Unit&gt;() {\r\n        @Override\r\n        public Unit call() throws Exception {\r\n          __db.beginTransaction();\r\n          try {\r\n            __insertionAdapterOfDbUser.insert(entity);\r\n            __db.setTransactionSuccessful();\r\n            return Unit.INSTANCE;\r\n          } finally {\r\n            __db.endTransaction();\r\n          }\r\n        }\r\n      }, continuation);\r\n    }\r\n\r\nHere you can see it ALWAYS starts a transaction. My question is: can I annotate the method or do ANYTHING to remove that transaction? I want to do this because I think it&#39;s unnecessary since I already wrap all the database related stuff inside my own `runInTransaction` block, this just slows down everything.","title":"Does Room optimize out nested transactions? If not, how to remove the begin/endTransaction calls?","body":"<p>When I write a DAO and add an insert method, the implementation can be found in a generated file. An example of this can be the following implementation:</p>\n<pre><code>@Override\npublic Object insert(final DbUser entity, final Continuation&lt;? super Unit&gt; continuation) {\n  return CoroutinesRoom.execute(__db, true, new Callable&lt;Unit&gt;() {\n    @Override\n    public Unit call() throws Exception {\n      __db.beginTransaction();\n      try {\n        __insertionAdapterOfDbUser.insert(entity);\n        __db.setTransactionSuccessful();\n        return Unit.INSTANCE;\n      } finally {\n        __db.endTransaction();\n      }\n    }\n  }, continuation);\n}\n</code></pre>\n<p>Here you can see it ALWAYS starts a transaction. My question is: can I annotate the method or do ANYTHING to remove that transaction? I want to do this because I think it's unnecessary since I already wrap all the database related stuff inside my own <code>runInTransaction</code> block, this just slows down everything.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1551691938,"post_id":54980151,"comment_id":96718629,"body_markdown":"the maven `artifactId`?","body":"the maven <code>artifactId</code>?"}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1551729708,"creation_date":1551729708,"answer_id":54990692,"question_id":54980151,"body_markdown":"It&#39;s the **module name** that can be configured automatically from the `pom.xml` `&lt;artifactId&gt;` property or defined manually:\r\n\r\n[![module name][1]][1]\r\n\r\nYou can switch the view to some other mode like **Packages** or **Project Files** to not display the module names.\r\n\r\n  [1]: https://i.stack.imgur.com/P2uo9.png\r\n\r\n","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>It's the <strong>module name</strong> that can be configured automatically from the <code>pom.xml</code> <code>&lt;artifactId&gt;</code> property or defined manually:</p>\n\n<p><a href=\"https://i.stack.imgur.com/P2uo9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/P2uo9.png\" alt=\"module name\"></a></p>\n\n<p>You can switch the view to some other mode like <strong>Packages</strong> or <strong>Project Files</strong> to not display the module names.</p>\n"},{"tags":[],"owner":{"account_id":6700582,"reputation":21,"user_id":5167192,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1588376426,"creation_date":1588375945,"answer_id":61552430,"question_id":54980151,"body_markdown":"My approach to resolve this issue was similar to the previous poster. After changing the module name in Project Structure/Modules (command + ;), I was still seeing the old module name within the project name. What made a difference for me was assigning the rootProject.name to the new module name in settings.gradle:\r\n\r\n[changing module name in settings.gradle][1]\r\n\r\n  [1]: https://i.stack.imgur.com/4trfq.png","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>My approach to resolve this issue was similar to the previous poster. After changing the module name in Project Structure/Modules (command + ;), I was still seeing the old module name within the project name. What made a difference for me was assigning the rootProject.name to the new module name in settings.gradle:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4trfq.png\" rel=\"nofollow noreferrer\">changing module name in settings.gradle</a></p>\n"},{"tags":[],"owner":{"account_id":6959560,"reputation":1,"user_id":5339501,"display_name":"Rasheed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696592540,"creation_date":1592944177,"answer_id":62543237,"question_id":54980151,"body_markdown":"The name between brackets is the module name accessible in Intellij by pressing:\r\n&lt;kbd&gt;CTRL&lt;/kbd&gt; + &lt;kbd&gt;A&lt;/kbd&gt;","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>The name between brackets is the module name accessible in Intellij by pressing:\n<kbd>CTRL</kbd> + <kbd>A</kbd></p>\n"},{"tags":[],"owner":{"account_id":5290550,"reputation":1219,"user_id":4657846,"display_name":"nosaiba darwish"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1603885625,"creation_date":1603885625,"answer_id":64572193,"question_id":54980151,"body_markdown":"if you did rename project name and module. **just try sync project with gradle. file -&gt; Sync Project with Gradle Files.**\r\nit will update everything and remove that.","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>if you did rename project name and module. <strong>just try sync project with gradle. file -&gt; Sync Project with Gradle Files.</strong>\nit will update everything and remove that.</p>\n"},{"tags":[],"owner":{"account_id":14249071,"reputation":459,"user_id":10293166,"display_name":"Vishwas Shenoy Alevoor"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1631832576,"creation_date":1630531769,"answer_id":69020755,"question_id":54980151,"body_markdown":"This is due to `rename` of module not done properly, you or Intellij IDEA would have changed only `directory` name.\r\n\r\nThe easiest way to fix this issue is press `shift key+f6` / Right click on module `Refactor &gt;&gt; Rename` and select `Rename module`, give name same as `Project/directory`.\r\n\r\nImmediately you will see bracket with older module name disappear.\r\n\r\nBelow is snippet and option to choose highlighted:\r\n\r\n[![Rename module][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6yope.png","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>This is due to <code>rename</code> of module not done properly, you or Intellij IDEA would have changed only <code>directory</code> name.</p>\n<p>The easiest way to fix this issue is press <code>shift key+f6</code> / Right click on module <code>Refactor &gt;&gt; Rename</code> and select <code>Rename module</code>, give name same as <code>Project/directory</code>.</p>\n<p>Immediately you will see bracket with older module name disappear.</p>\n<p>Below is snippet and option to choose highlighted:</p>\n<p><a href=\"https://i.stack.imgur.com/6yope.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/6yope.png\" alt=\"Rename module\" /></a></p>\n"},{"tags":[],"owner":{"account_id":4878373,"reputation":9,"user_id":3932814,"display_name":"kciejek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1631274366,"creation_date":1631274366,"answer_id":69131719,"question_id":54980151,"body_markdown":"Besides `&lt;artifactId&gt;` in pom.xml also intellij&#39;s project specific iml file name is taken in sequence(intellij 2020.3). ","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>Besides <code>&lt;artifactId&gt;</code> in pom.xml also intellij's project specific iml file name is taken in sequence(intellij 2020.3).</p>\n"},{"tags":[],"owner":{"account_id":18348909,"reputation":11,"user_id":13363529,"display_name":"Dmitry  Balakirev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1667984698,"creation_date":1667640264,"answer_id":74326556,"question_id":54980151,"body_markdown":"If you are using Gradle in your project and the Rename option in IntellijIDEA didn&#39;t help as in other answers, try to change parameter rootProject.name in file settings.gradle:\r\n\r\n[![settings.gradle here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fLzpG.png","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>If you are using Gradle in your project and the Rename option in IntellijIDEA didn't help as in other answers, try to change parameter rootProject.name in file settings.gradle:</p>\n<p><a href=\"https://i.stack.imgur.com/fLzpG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fLzpG.png\" alt=\"settings.gradle here\" /></a></p>\n"}],"owner":{"account_id":14546090,"reputation":1702,"user_id":10506301,"display_name":"Daredevil"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9753,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":54990692,"answer_count":7,"score":14,"last_activity_date":1696592540,"creation_date":1551691489,"question_id":54980151,"body_markdown":"So I have a project in Intellij and I have a tree structure on the left hand side which list out the project name,folders,files etc.\r\n\r\nAnd at the top of the main project, I have my project name in the format of:\r\n\r\n   \r\n\r\n     Project Name [XXX] C:\\Users\\xxx\\xxx\\xxx\\ProjectName\r\n\r\nThe problem is [XXX] where I can&#39;t find any resources as to what it is and I want to rename it or remove it completely. Any idea what do I need to change?\r\n\r\nWhat is that bracket name represents?\r\n\r\nThings I have tried:\r\n\r\nRenaming the .iml file\r\n\r\nRenaming project name in Project Structure","title":"intellij- how to remove &quot;bracket&quot; from the project name?","body":"<p>So I have a project in Intellij and I have a tree structure on the left hand side which list out the project name,folders,files etc.</p>\n\n<p>And at the top of the main project, I have my project name in the format of:</p>\n\n<pre><code> Project Name [XXX] C:\\Users\\xxx\\xxx\\xxx\\ProjectName\n</code></pre>\n\n<p>The problem is [XXX] where I can't find any resources as to what it is and I want to rename it or remove it completely. Any idea what do I need to change?</p>\n\n<p>What is that bracket name represents?</p>\n\n<p>Things I have tried:</p>\n\n<p>Renaming the .iml file</p>\n\n<p>Renaming project name in Project Structure</p>\n"},{"tags":["java","spring-boot","dependency-injection","annotations"],"comments":[{"owner":{"account_id":5121316,"reputation":2890,"user_id":4104760,"accept_rate":36,"display_name":"George"},"score":1,"creation_date":1594828511,"post_id":62918829,"comment_id":111265555,"body_markdown":"You can&#39;t. That&#39;s literally impossible due to the constraints of the java programming language.","body":"You can&#39;t. That&#39;s literally impossible due to the constraints of the java programming language."},{"owner":{"account_id":268691,"reputation":832,"user_id":557576,"accept_rate":67,"display_name":"Shishir Pandey"},"score":0,"creation_date":1594828680,"post_id":62918829,"comment_id":111265658,"body_markdown":"Is it possible to move the variable to another class but still have the object in the interface?","body":"Is it possible to move the variable to another class but still have the object in the interface?"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1696596452,"post_id":62918829,"comment_id":136177071,"body_markdown":"Note that `color` is actually `public static final` i.e. a constant. All variables inside interfaces are `static`. Interfaces shouldn&#39;t (and can&#39;t) have any state.","body":"Note that <code>color</code> is actually <code>public static final</code> i.e. a constant. All variables inside interfaces are <code>static</code>. Interfaces shouldn&#39;t (and can&#39;t) have any state."}],"owner":{"account_id":268691,"reputation":832,"user_id":557576,"accept_rate":67,"display_name":"Shishir Pandey"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2208,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696592369,"creation_date":1594828304,"question_id":62918829,"body_markdown":"I have an interface parent class lets call it `IParent` here. There are two child classes that implements this interface `ChildA` and `ChildB`. `ChildA` also extends another class `OtherClass`.\r\n\r\n    public interface IParent{\r\n\r\n        @Value(&quot;${car.color:blue}&quot;)\r\n        public final String color = &quot;blue&quot;;\r\n\r\n        public int doSomething();\r\n    }\r\n\r\n\r\n    public class ChildA extends OtherClass implements IParent{\r\n        public int doSomething();\r\n    \r\n    }\r\n    \r\n    \r\n    public class ChildB implements IParent{\r\n        public int doSomething();\r\n    }\r\n\r\n\r\nI want to use `iParent.color` in my application but I want `color` to be read from a settings file, since the variable is final in an interface it does not work. The reason I cannot move this to the derived classes because I don&#39;t want a type conversion where ever I use the derived classes. Any idea how I can get it to work?","title":"@Value annotation in java interfaces","body":"<p>I have an interface parent class lets call it <code>IParent</code> here. There are two child classes that implements this interface <code>ChildA</code> and <code>ChildB</code>. <code>ChildA</code> also extends another class <code>OtherClass</code>.</p>\n<pre><code>public interface IParent{\n\n    @Value(&quot;${car.color:blue}&quot;)\n    public final String color = &quot;blue&quot;;\n\n    public int doSomething();\n}\n\n\npublic class ChildA extends OtherClass implements IParent{\n    public int doSomething();\n\n}\n\n\npublic class ChildB implements IParent{\n    public int doSomething();\n}\n</code></pre>\n<p>I want to use <code>iParent.color</code> in my application but I want <code>color</code> to be read from a settings file, since the variable is final in an interface it does not work. The reason I cannot move this to the derived classes because I don't want a type conversion where ever I use the derived classes. Any idea how I can get it to work?</p>\n"},{"tags":["java","maven","packaging","uberjar","fatjar"],"comments":[{"owner":{"account_id":203984,"reputation":21747,"user_id":451941,"accept_rate":100,"display_name":"Jeen Broekstra"},"score":2,"creation_date":1480988162,"post_id":11947037,"comment_id":69182050,"body_markdown":"I have also occasionally seen it called a &quot;onejar&quot; or &quot;one-jar&quot;.","body":"I have also occasionally seen it called a &quot;onejar&quot; or &quot;one-jar&quot;."},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1688081061,"post_id":11947037,"comment_id":135029757,"body_markdown":"&quot;uber&quot; anything - unless in German, a concept named by an illiterate fool.","body":"&quot;uber&quot; anything - unless in German, a concept named by an illiterate fool."}],"answers":[{"tags":[],"owner":{"account_id":8291,"reputation":860427,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":3,"up_vote_count":509,"is_accepted":true,"score":506,"last_activity_date":1582205473,"creation_date":1344926775,"answer_id":11947093,"question_id":11947037,"body_markdown":"`&#220;ber` is the German word for `above` or `over` (it&#39;s actually cognate with the English `over`).\r\n\r\nHence, in this context, an uber-jar is an &quot;over-jar&quot;, one level up from a simple JAR &lt;sup&gt;(a)&lt;/sup&gt;, defined as one that contains both your package _and_ all its dependencies in one single JAR file. The name can be thought to come from the same stable as ultrageek, superman, hyperspace, and metadata, which all have similar meanings of &quot;beyond the normal&quot;.\r\n\r\nThe advantage is that you can distribute your uber-jar and not care at all whether or not dependencies are installed at the destination, as your uber-jar actually _has_ no dependencies.\r\n\r\nAll the dependencies of your own stuff within the uber-jar are _also_ within that uber-jar. As are all dependencies of those dependencies. And so on.\r\n\r\n---\r\n\r\n&lt;sup&gt;(a)&lt;/sup&gt; I probably *shouldn&#39;t* have to explain what a JAR is to a Java developer but I&#39;ll include it for completeness. It&#39;s a Java archive, basically a single file that typically contains a number of Java class files along with associated metadata and resources.\r\n","title":"What is an uber JAR file?","body":"<p><code>Über</code> is the German word for <code>above</code> or <code>over</code> (it's actually cognate with the English <code>over</code>).</p>\n\n<p>Hence, in this context, an uber-jar is an \"over-jar\", one level up from a simple JAR <sup>(a)</sup>, defined as one that contains both your package <em>and</em> all its dependencies in one single JAR file. The name can be thought to come from the same stable as ultrageek, superman, hyperspace, and metadata, which all have similar meanings of \"beyond the normal\".</p>\n\n<p>The advantage is that you can distribute your uber-jar and not care at all whether or not dependencies are installed at the destination, as your uber-jar actually <em>has</em> no dependencies.</p>\n\n<p>All the dependencies of your own stuff within the uber-jar are <em>also</em> within that uber-jar. As are all dependencies of those dependencies. And so on.</p>\n\n<hr>\n\n<p><sup>(a)</sup> I probably <em>shouldn't</em> have to explain what a JAR is to a Java developer but I'll include it for completeness. It's a Java archive, basically a single file that typically contains a number of Java class files along with associated metadata and resources.</p>\n"},{"tags":[],"owner":{"account_id":1041394,"reputation":5637,"user_id":1047365,"accept_rate":86,"display_name":"Jean-R&#233;my Revy"},"down_vote_count":0,"up_vote_count":64,"is_accepted":false,"score":64,"last_activity_date":1688075741,"creation_date":1344953535,"answer_id":11954179,"question_id":11947037,"body_markdown":"[Paxdiablo&#39;s definition][1] is really good.\r\n\r\nIn addition, please consider delivering an uber-jar is sometimes quite useful, if you really want to distribute a software and don&#39;t want customer to download dependencies by themselves. As a drawback, if their own policy don&#39;t allow usage of some library, or if they have to bind some extra-components (slf4j, system compliant libraries, architecture specialize libraries, ...) this will probably increase difficulties for them.\r\n\r\nYou can perform that:\r\n\r\n - basically with [maven-assembly-plugin][2]\r\n - a bit more further with [maven-shade-plugin][3]\r\n\r\nA cleaner solution is to provide their library separately; maven-shade-plugin has a preconfigured descriptor for that. This is not more complicated to do (with [Maven][4] and its plugin).\r\n\r\nFinally, a really good solution is to use an [OSGi][5] Bundle. There are plenty of good tutorials on that :)\r\n\r\nFor further configuration, please read those topics:\r\n\r\n - *https://stackoverflow.com/questions/1746336/should-you-provide-dependent-libraries-in-client-jar*\r\n - *https://stackoverflow.com/questions/2391711/best-practices-in-building-and-deploying-clojure-applications-good-tutorials*\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11947037/what-is-an-uber-jar-file/11947093#11947093\r\n  [2]: http://maven.apache.org/plugins/maven-assembly-plugin/ &quot;maven-assembly-plugin&quot;\r\n  [3]: http://maven.apache.org/plugins/maven-shade-plugin/ &quot;maven-shade-plugin&quot;\r\n  [4]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [5]: https://en.wikipedia.org/wiki/OSGi\r\n\r\n","title":"What is an uber JAR file?","body":"<p><a href=\"https://stackoverflow.com/questions/11947037/what-is-an-uber-jar-file/11947093#11947093\">Paxdiablo's definition</a> is really good.</p>\n<p>In addition, please consider delivering an uber-jar is sometimes quite useful, if you really want to distribute a software and don't want customer to download dependencies by themselves. As a drawback, if their own policy don't allow usage of some library, or if they have to bind some extra-components (slf4j, system compliant libraries, architecture specialize libraries, ...) this will probably increase difficulties for them.</p>\n<p>You can perform that:</p>\n<ul>\n<li>basically with <a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\" title=\"maven-assembly-plugin\">maven-assembly-plugin</a></li>\n<li>a bit more further with <a href=\"http://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\" title=\"maven-shade-plugin\">maven-shade-plugin</a></li>\n</ul>\n<p>A cleaner solution is to provide their library separately; maven-shade-plugin has a preconfigured descriptor for that. This is not more complicated to do (with <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a> and its plugin).</p>\n<p>Finally, a really good solution is to use an <a href=\"https://en.wikipedia.org/wiki/OSGi\" rel=\"nofollow noreferrer\">OSGi</a> Bundle. There are plenty of good tutorials on that :)</p>\n<p>For further configuration, please read those topics:</p>\n<ul>\n<li><em><a href=\"https://stackoverflow.com/questions/1746336/should-you-provide-dependent-libraries-in-client-jar\">Should you provide dependent libraries in client jar?</a></em></li>\n<li><em><a href=\"https://stackoverflow.com/questions/2391711/best-practices-in-building-and-deploying-clojure-applications-good-tutorials\">Best practices in building and deploying Clojure applications: good tutorials?</a></em></li>\n</ul>\n"},{"tags":[],"owner":{"display_name":"anon"},"down_vote_count":0,"up_vote_count":123,"is_accepted":false,"score":123,"last_activity_date":1696592119,"creation_date":1471577234,"answer_id":39030649,"question_id":11947037,"body_markdown":"From [imagej.net Uber-JAR description](https://imagej.net/develop/uber-jars):\r\n\r\n&gt; An **uber JAR** file is also known as **fat JAR**, i.e., a **JAR file\r\n&gt; with dependencies.**\r\n&gt; \r\n&gt; There are three common methods for constructing an uber JAR file:\r\n&gt; \r\n&gt;  1. **Unshaded:** Unpack all JAR files, and then repack them into a single JAR file. It works with Java&#39;s default class loader. Tools\r\n&gt; [maven-assembly-plugin][1]\r\n&gt;  2. **Shaded:** Same as unshaded, but rename (i.e., &quot;shade&quot;) all **packages** of all dependencies. It works with Java&#39;s default class loader. It avoids some (not all) dependency version clashes. Tools\r\n&gt; [maven-shade-plugin][2]\r\n&gt;  3. **JAR files of JAR files:** The final JAR file contains the other JAR files embedded within. It avoids dependency version clashes. All\r\n&gt; resource files are preserved. Tools: [Eclipse JAR File Exporter][3]\r\n\r\n  [1]: http://maven.apache.org/plugins/maven-assembly-plugin/\r\n  [2]: http://maven.apache.org/plugins/maven-shade-plugin/\r\n  [3]: http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-export-jar.htm\r\n\r\n","title":"What is an uber JAR file?","body":"<p>From <a href=\"https://imagej.net/develop/uber-jars\" rel=\"nofollow noreferrer\">imagej.net Uber-JAR description</a>:</p>\n<blockquote>\n<p>An <strong>uber JAR</strong> file is also known as <strong>fat JAR</strong>, i.e., a <strong>JAR file\nwith dependencies.</strong></p>\n<p>There are three common methods for constructing an uber JAR file:</p>\n<ol>\n<li><strong>Unshaded:</strong> Unpack all JAR files, and then repack them into a single JAR file. It works with Java's default class loader. Tools\n<a href=\"http://maven.apache.org/plugins/maven-assembly-plugin/\" rel=\"nofollow noreferrer\">maven-assembly-plugin</a></li>\n<li><strong>Shaded:</strong> Same as unshaded, but rename (i.e., &quot;shade&quot;) all <strong>packages</strong> of all dependencies. It works with Java's default class loader. It avoids some (not all) dependency version clashes. Tools\n<a href=\"http://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">maven-shade-plugin</a></li>\n<li><strong>JAR files of JAR files:</strong> The final JAR file contains the other JAR files embedded within. It avoids dependency version clashes. All\nresource files are preserved. Tools: <a href=\"http://help.eclipse.org/luna/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fref-export-jar.htm\" rel=\"nofollow noreferrer\">Eclipse JAR File Exporter</a></li>\n</ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":2613618,"reputation":991,"user_id":2263214,"display_name":"Rasheed"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1493815591,"creation_date":1493815591,"answer_id":43760451,"question_id":11947037,"body_markdown":"A self-contained, executable Java archive. In the case of WildFly Swarm uberjars, it is a single .jar file containing your application, the portions of WildFly required to support it, an internal Maven repository of dependencies, plus a shim to bootstrap it all. [see this][1]\r\n\r\n\r\n  [1]: https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/content/getting-started/concepts.html","title":"What is an uber JAR file?","body":"<p>A self-contained, executable Java archive. In the case of WildFly Swarm uberjars, it is a single .jar file containing your application, the portions of WildFly required to support it, an internal Maven repository of dependencies, plus a shim to bootstrap it all. <a href=\"https://wildfly-swarm.gitbooks.io/wildfly-swarm-users-guide/content/getting-started/concepts.html\" rel=\"nofollow noreferrer\">see this</a></p>\n"},{"tags":[],"owner":{"account_id":11110386,"reputation":2865,"user_id":9470346,"display_name":"Mark Han"},"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1688064647,"creation_date":1589821863,"answer_id":61875148,"question_id":11947037,"body_markdown":"The different names are just ways of packaging Java applications.\r\n---------------------------------------------\r\n\r\n**Skinny** – Contains *only* the bits you literally type into your code editor, and *nothing* else.\r\n\r\n**Thin** – Contains all of the above *plus* the application’s direct dependencies of your applications (database drivers, utility libraries, etc.).\r\n\r\n**Hollow** – The inverse of thin. It contains only the bits needed to run your application, but does *not* contain the application itself. Basically a pre-packaged “app server” to which you can later deploy your application, in the same style as traditional Java EE application servers, but with important differences.\r\n\r\n**Fat/Uber** – Contains the bit you literally write yourself **plus** the direct dependencies of your application **plus** the bits needed to run your application “on its own”.\r\n\r\nSource: [Article from Dzone][1]\r\n\r\n[![Visual representation of JAR types][2]][2]\r\n\r\nReposted from: *https://stackoverflow.com/questions/19150811/what-is-a-fat-jar/57592130#57592130*\r\n\r\n  [1]: https://dzone.com/articles/the-skinny-on-fat-thin-hollow-and-uber\r\n  [2]: https://i.stack.imgur.com/9iS6A.png\r\n\r\n\r\n","title":"What is an uber JAR file?","body":"<h2>The different names are just ways of packaging Java applications.</h2>\n<p><strong>Skinny</strong> – Contains <em>only</em> the bits you literally type into your code editor, and <em>nothing</em> else.</p>\n<p><strong>Thin</strong> – Contains all of the above <em>plus</em> the application’s direct dependencies of your applications (database drivers, utility libraries, etc.).</p>\n<p><strong>Hollow</strong> – The inverse of thin. It contains only the bits needed to run your application, but does <em>not</em> contain the application itself. Basically a pre-packaged “app server” to which you can later deploy your application, in the same style as traditional Java EE application servers, but with important differences.</p>\n<p><strong>Fat/Uber</strong> – Contains the bit you literally write yourself <strong>plus</strong> the direct dependencies of your application <strong>plus</strong> the bits needed to run your application “on its own”.</p>\n<p>Source: <a href=\"https://dzone.com/articles/the-skinny-on-fat-thin-hollow-and-uber\" rel=\"nofollow noreferrer\">Article from Dzone</a></p>\n<p><a href=\"https://i.stack.imgur.com/9iS6A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9iS6A.png\" alt=\"Visual representation of JAR types\" /></a></p>\n<p>Reposted from: <em><a href=\"https://stackoverflow.com/questions/19150811/what-is-a-fat-jar/57592130#57592130\">What is a fat JAR?</a></em></p>\n"},{"tags":[],"owner":{"account_id":8748849,"reputation":784,"user_id":6542943,"display_name":"Md. Jamal Uddin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593339693,"creation_date":1593339693,"answer_id":62621179,"question_id":11947037,"body_markdown":"According to uber-JAR Documentation Approaches:\r\nThere are three common methods for constructing an uber-JAR:\r\n\r\n**Unshaded** Unpack all JAR files, then repack them into a single JAR.\r\nTools: Maven Assembly Plugin, Classworlds Uberjar\r\n\r\n**Shaded** Same as unshaded, but rename (i.e., &quot;shade&quot;) all packages of all dependencies.\r\nTools: Maven Shade Plugin\r\n\r\n**JAR of JARs** The final JAR file contains the other JAR files embedded within.\r\nTools: Eclipse JAR File Exporter, One-JAR.","title":"What is an uber JAR file?","body":"<p>According to uber-JAR Documentation Approaches:\nThere are three common methods for constructing an uber-JAR:</p>\n<p><strong>Unshaded</strong> Unpack all JAR files, then repack them into a single JAR.\nTools: Maven Assembly Plugin, Classworlds Uberjar</p>\n<p><strong>Shaded</strong> Same as unshaded, but rename (i.e., &quot;shade&quot;) all packages of all dependencies.\nTools: Maven Shade Plugin</p>\n<p><strong>JAR of JARs</strong> The final JAR file contains the other JAR files embedded within.\nTools: Eclipse JAR File Exporter, One-JAR.</p>\n"},{"tags":[],"owner":{"account_id":1448091,"reputation":699,"user_id":1365917,"display_name":"Davide Martorana"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1600101169,"creation_date":1598122145,"answer_id":63539932,"question_id":11947037,"body_markdown":"For Java Developers who use SpringBoot, **&#220;BER/FAT JAR** is *normally* the final result of the `package phase` of maven (or `build task` if you use `gradle`).\r\n\r\nInside the Fat JAR one can find a `META-INF` directory inside which the `MANIFEST.MF` file lives with all the info regarding the Main class. More importantly, at the same level of `META-INF` directory you find the `BOOT-INF` directory inside which the directory `lib` lives and contains all the `.jar` files that are the dependencies of your application.  ","title":"What is an uber JAR file?","body":"<p>For Java Developers who use SpringBoot, <strong>ÜBER/FAT JAR</strong> is <em>normally</em> the final result of the <code>package phase</code> of maven (or <code>build task</code> if you use <code>gradle</code>).</p>\n<p>Inside the Fat JAR one can find a <code>META-INF</code> directory inside which the <code>MANIFEST.MF</code> file lives with all the info regarding the Main class. More importantly, at the same level of <code>META-INF</code> directory you find the <code>BOOT-INF</code> directory inside which the directory <code>lib</code> lives and contains all the <code>.jar</code> files that are the dependencies of your application.</p>\n"}],"owner":{"account_id":1723294,"reputation":5485,"user_id":1578531,"accept_rate":57,"display_name":"Ashay Batwal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144258,"favorite_count":0,"down_vote_count":0,"up_vote_count":372,"accepted_answer_id":11947093,"answer_count":7,"score":372,"last_activity_date":1696592119,"creation_date":1344926524,"question_id":11947037,"body_markdown":"I am reading Maven documentation and came across the name `uber-jar`.\r\n\r\nWhat does an `uber-jar` mean and what are its features/advantages?\r\n\r\n\r\n","title":"What is an uber JAR file?","body":"<p>I am reading Maven documentation and came across the name <code>uber-jar</code>.</p>\n<p>What does an <code>uber-jar</code> mean and what are its features/advantages?</p>\n"},{"tags":["java","ethereum","blockchain","go-ethereum"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696850930,"post_id":77244064,"comment_id":136201510,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29611836,"reputation":1,"user_id":22694892,"display_name":"TheMajical"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696591642,"creation_date":1696591642,"question_id":77244064,"body_markdown":"I am using an Ethereum full node (geth) to retrieve blocks and transaction data, and my Java + Spring Boot project utilizes Web3j to read this data from the full node and store it in my database. Currently, I am capturing the &#39;value&#39; field, which indicates the amount of ETH transferred in a transaction. However, some Ethereum transactions do not involve the transfer of ETH; instead, they interact with smart contracts or perform other operations. To accurately calculate the value of these internal transactions, I believe I need to use a method called debug_tracetransaction().\r\n\r\nThe issue is that I couldn&#39;t find this specific method within the Web3j library. Can anyone guide me on how to retrieve the value of internal transactions or suggest an alternative approach to achieve this?\r\n\r\nTried to curl debug_tracetransaction() from my full node but got no response.","title":"Looking for a way to extract internalTransactions in a Ethereum Transaction","body":"<p>I am using an Ethereum full node (geth) to retrieve blocks and transaction data, and my Java + Spring Boot project utilizes Web3j to read this data from the full node and store it in my database. Currently, I am capturing the 'value' field, which indicates the amount of ETH transferred in a transaction. However, some Ethereum transactions do not involve the transfer of ETH; instead, they interact with smart contracts or perform other operations. To accurately calculate the value of these internal transactions, I believe I need to use a method called debug_tracetransaction().</p>\n<p>The issue is that I couldn't find this specific method within the Web3j library. Can anyone guide me on how to retrieve the value of internal transactions or suggest an alternative approach to achieve this?</p>\n<p>Tried to curl debug_tracetransaction() from my full node but got no response.</p>\n"},{"tags":["java","tomcat","java-9","java-10"],"answers":[{"tags":[],"owner":{"account_id":1426258,"reputation":4514,"user_id":1349691,"accept_rate":72,"display_name":"Philippe Marschall"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1533007903,"creation_date":1532528021,"answer_id":51521125,"question_id":51518781,"body_markdown":"Try the following and its dependencies. See a [Maven repository for latest version][1].\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\r\n      &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\r\n      &lt;version&gt;2.3.0.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nIt also contains the Java Service Loader descriptors. See [Using JAXB in Java 9+](https://ferstl.github.io/2018/07/19/jaxb-for-java9-and-newer.html)\r\n\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p>Try the following and its dependencies. See a <a href=\"https://mvnrepository.com/artifact/org.glassfish.jaxb/jaxb-runtime\" rel=\"noreferrer\">Maven repository for latest version</a>.</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.glassfish.jaxb&lt;/groupId&gt;\n  &lt;artifactId&gt;jaxb-runtime&lt;/artifactId&gt;\n  &lt;version&gt;2.3.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>It also contains the Java Service Loader descriptors. See <a href=\"https://ferstl.github.io/2018/07/19/jaxb-for-java9-and-newer.html\" rel=\"noreferrer\">Using JAXB in Java 9+</a></p>\n"},{"tags":[],"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"down_vote_count":1,"up_vote_count":19,"is_accepted":true,"score":18,"last_activity_date":1611947342,"creation_date":1533634457,"answer_id":51723474,"question_id":51518781,"body_markdown":"# Analysis\r\n\r\nFirst some random facts:\r\n\r\n* if not [given a class loader](https://javaee.github.io/jaxb-v2/doc/user-guide/ch06.html#d0e6919), `JAXBContext::newInstance` will use [the thread&#39;s context class loader](https://docs.oracle.com/javase/10/docs/api/java/lang/Thread.html#getContextClassLoader()) when looking for the JAXB implementation - this is the case even if you call `newInstance(Class...)` (one might mistakenly think it uses the provided class instances&#39; loader)\r\n* Tomcat builds [a small class loader hierarchy](https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html) to separate web applications from one another\r\n* by not relying on the module _java.xml.bind_, in Java 9, JAXB classes are not loaded by the bootstrap or system class loader\r\n\r\nSo here&#39;s what happened on Java 8:\r\n\r\n* we don&#39;t pass a class loader to JAXB (oops), so it uses the thread&#39;s context class loader\r\n* our conjecture is that Tomcat does not explicitly set the context class loader and so it will end up being the same one that loaded Tomcat: the system class loader\r\n* that&#39;s dandy because the system class loader sees the entire JDK and hence the JAXB implementation included therein\r\n\r\nJava 9 enters - the piano stops playing and everybody puts down their scotch:\r\n\r\n* we added [JAXB as a regular dependency](https://stackoverflow.com/a/48204154/2525313) and so it is loaded by the web app&#39;s class loader\r\n* just as on Java 8, JAXB searches the system class loader, though, and that one can&#39;t see the app&#39;s loader (only the other way around)\r\n* JAXB fails to find the implementation and goes belly up\r\n\r\n# Solution\r\n\r\nThe solution is to make sure JAXB uses the right class loader. We know of three ways:\r\n\r\n* call `Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());` but that&#39;s not really a good idea\r\n* create [a context resolver](https://docs.oracle.com/javaee/7/api/javax/ws/rs/ext/ContextResolver.html), but that requires JAX-WS and that feels like replacing one evil with another\r\n* use the package-accepting variant of `JAXBContext::newInstance` ([Javadoc from Java EE 7](https://docs.oracle.com/javaee/7/api/javax/xml/bind/JAXBContext.html#newInstance-java.lang.String-java.lang.ClassLoader-)) that also takes a class loader and pass the correct loader, although that requires some refactoring\r\n\r\nWe used the third option and refactored towards the package-accepting variant of `JAXBContext::newInstance`. Menial work, but fixed the problem.\r\n\r\n# Note\r\n\r\n[User _curlals_](https://stackoverflow.com/users/10141364/curlals) provided the critical piece of information, but deleted their answer. I hope it was not because I asked for a few edits. All credit/karma should go to them! @curlals: If you restore and edit your answer, I will accept and upvote it.","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<h1>Analysis</h1>\n<p>First some random facts:</p>\n<ul>\n<li>if not <a href=\"https://javaee.github.io/jaxb-v2/doc/user-guide/ch06.html#d0e6919\" rel=\"noreferrer\">given a class loader</a>, <code>JAXBContext::newInstance</code> will use <a href=\"https://docs.oracle.com/javase/10/docs/api/java/lang/Thread.html#getContextClassLoader()\" rel=\"noreferrer\">the thread's context class loader</a> when looking for the JAXB implementation - this is the case even if you call <code>newInstance(Class...)</code> (one might mistakenly think it uses the provided class instances' loader)</li>\n<li>Tomcat builds <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html\" rel=\"noreferrer\">a small class loader hierarchy</a> to separate web applications from one another</li>\n<li>by not relying on the module <em>java.xml.bind</em>, in Java 9, JAXB classes are not loaded by the bootstrap or system class loader</li>\n</ul>\n<p>So here's what happened on Java 8:</p>\n<ul>\n<li>we don't pass a class loader to JAXB (oops), so it uses the thread's context class loader</li>\n<li>our conjecture is that Tomcat does not explicitly set the context class loader and so it will end up being the same one that loaded Tomcat: the system class loader</li>\n<li>that's dandy because the system class loader sees the entire JDK and hence the JAXB implementation included therein</li>\n</ul>\n<p>Java 9 enters - the piano stops playing and everybody puts down their scotch:</p>\n<ul>\n<li>we added <a href=\"https://stackoverflow.com/a/48204154/2525313\">JAXB as a regular dependency</a> and so it is loaded by the web app's class loader</li>\n<li>just as on Java 8, JAXB searches the system class loader, though, and that one can't see the app's loader (only the other way around)</li>\n<li>JAXB fails to find the implementation and goes belly up</li>\n</ul>\n<h1>Solution</h1>\n<p>The solution is to make sure JAXB uses the right class loader. We know of three ways:</p>\n<ul>\n<li>call <code>Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());</code> but that's not really a good idea</li>\n<li>create <a href=\"https://docs.oracle.com/javaee/7/api/javax/ws/rs/ext/ContextResolver.html\" rel=\"noreferrer\">a context resolver</a>, but that requires JAX-WS and that feels like replacing one evil with another</li>\n<li>use the package-accepting variant of <code>JAXBContext::newInstance</code> (<a href=\"https://docs.oracle.com/javaee/7/api/javax/xml/bind/JAXBContext.html#newInstance-java.lang.String-java.lang.ClassLoader-\" rel=\"noreferrer\">Javadoc from Java EE 7</a>) that also takes a class loader and pass the correct loader, although that requires some refactoring</li>\n</ul>\n<p>We used the third option and refactored towards the package-accepting variant of <code>JAXBContext::newInstance</code>. Menial work, but fixed the problem.</p>\n<h1>Note</h1>\n<p><a href=\"https://stackoverflow.com/users/10141364/curlals\">User <em>curlals</em></a> provided the critical piece of information, but deleted their answer. I hope it was not because I asked for a few edits. All credit/karma should go to them! @curlals: If you restore and edit your answer, I will accept and upvote it.</p>\n"},{"tags":[],"owner":{"account_id":8320526,"reputation":2415,"user_id":6252399,"display_name":"Alan Sereb"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579726694,"creation_date":1579726694,"answer_id":59868152,"question_id":51518781,"body_markdown":"**TL;DR**\r\n\r\nA simple solution that worked for me is just to upgrade the Hibernate version. \r\n\r\nI used Hibernate with version of `5.2.10.Final` and they rely on JAXB. However, when I replaced undertow with Tomcat, that dependency went missing. I found this issue but none of the answers really solved my issue. When I found that `jpa-model-gen` was the issue I quickly realized, that it is the onlt Hibernate dependecy only that is looking for JAXB. Updating the hibernate version to a higher one solved my problem.","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p><strong>TL;DR</strong></p>\n\n<p>A simple solution that worked for me is just to upgrade the Hibernate version. </p>\n\n<p>I used Hibernate with version of <code>5.2.10.Final</code> and they rely on JAXB. However, when I replaced undertow with Tomcat, that dependency went missing. I found this issue but none of the answers really solved my issue. When I found that <code>jpa-model-gen</code> was the issue I quickly realized, that it is the onlt Hibernate dependecy only that is looking for JAXB. Updating the hibernate version to a higher one solved my problem.</p>\n"},{"tags":[],"owner":{"account_id":403585,"reputation":2211,"user_id":771431,"accept_rate":70,"display_name":"xonya"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1585918968,"creation_date":1585918968,"answer_id":61012531,"question_id":51518781,"body_markdown":"I had this issue using Spring Boot (version 2.2.6) with embedded Tomcat in a specific part of my code where I used a `CompletableFuture`. The code worked perfectly with Java 8 and related unit test passed in Java 12. The issue appeared only when the application was executed inside Tomcat using Java 11 or 12.\r\n\r\nDebugging the problem I discovered the issue was related to the fact that a different `ClassLoader` is used inside the `CompletableFuture`&#39;s `Runner`.\r\n\r\n```java\r\n// here Thread.currentThread().getContextClassLoader().getClass()\r\n// returns org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedWebappClassLoader\r\nreturn CompletableFuture.runAsync(() -&gt; {\r\n    // here returns jdk.internal.loader.ClassLoaders$AppClassLoader\r\n});\r\n```\r\n\r\nThe second `ClassLoader` is not able to load the JAXB classes. This behavior seems to be present only with Java 9+, indeed before Java 9 `ForkJoinPool.common()` returned an `Executor` with a `ClassLoader` of your main `Thread`, but after Java 9 it returns an executor with system `ClassLoader`.\r\n\r\nSince the `CompletableFuture.runAsync()` method accepts an `Executor` as second parameter, it is possible to set the desired `Executor` in the code. Here an example of a possible solution.\r\n\r\nFirst, define a proper `ForkJoinWorkerThreadFactory`:\r\n\r\n```java\r\npublic class JaxbForkJoinWorkerThreadFactory implements ForkJoinWorkerThreadFactory {\r\n\r\n    private final ClassLoader classLoader;\r\n\r\n    public JaxbForkJoinWorkerThreadFactory() {\r\n        classLoader = Thread.currentThread().getContextClassLoader();\r\n    }\r\n\r\n    @Override\r\n    public final ForkJoinWorkerThread newThread(ForkJoinPool pool) {\r\n        ForkJoinWorkerThread thread = new JaxbForkJoinWorkerThread(pool);\r\n        thread.setContextClassLoader(classLoader);\r\n        return thread;\r\n    }\r\n\r\n    private static class JaxbForkJoinWorkerThread extends ForkJoinWorkerThread {\r\n\r\n        private JaxbForkJoinWorkerThread(ForkJoinPool pool) {\r\n            super(pool);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThen pass an `Executor` using that factory to the `runAsync()` method:\r\n\r\n```java\r\nreturn CompletableFuture.runAsync(() -&gt; {\r\n    // now you have the right ClassLoader here\r\n}, getJaxbExecutor());\r\n\r\nprivate ForkJoinPool getJaxbExecutor() {\r\n    JaxbForkJoinWorkerThreadFactory threadFactory = new JaxbForkJoinWorkerThreadFactory();\r\n    int parallelism = Math.min(0x7fff /* copied from ForkJoinPool.java */, Runtime.getRuntime().availableProcessors());\r\n    return new ForkJoinPool(parallelism, threadFactory, null, false);\r\n}\r\n```","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p>I had this issue using Spring Boot (version 2.2.6) with embedded Tomcat in a specific part of my code where I used a <code>CompletableFuture</code>. The code worked perfectly with Java 8 and related unit test passed in Java 12. The issue appeared only when the application was executed inside Tomcat using Java 11 or 12.</p>\n\n<p>Debugging the problem I discovered the issue was related to the fact that a different <code>ClassLoader</code> is used inside the <code>CompletableFuture</code>'s <code>Runner</code>.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>// here Thread.currentThread().getContextClassLoader().getClass()\n// returns org.springframework.boot.web.embedded.tomcat.TomcatEmbeddedWebappClassLoader\nreturn CompletableFuture.runAsync(() -&gt; {\n    // here returns jdk.internal.loader.ClassLoaders$AppClassLoader\n});\n</code></pre>\n\n<p>The second <code>ClassLoader</code> is not able to load the JAXB classes. This behavior seems to be present only with Java 9+, indeed before Java 9 <code>ForkJoinPool.common()</code> returned an <code>Executor</code> with a <code>ClassLoader</code> of your main <code>Thread</code>, but after Java 9 it returns an executor with system <code>ClassLoader</code>.</p>\n\n<p>Since the <code>CompletableFuture.runAsync()</code> method accepts an <code>Executor</code> as second parameter, it is possible to set the desired <code>Executor</code> in the code. Here an example of a possible solution.</p>\n\n<p>First, define a proper <code>ForkJoinWorkerThreadFactory</code>:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class JaxbForkJoinWorkerThreadFactory implements ForkJoinWorkerThreadFactory {\n\n    private final ClassLoader classLoader;\n\n    public JaxbForkJoinWorkerThreadFactory() {\n        classLoader = Thread.currentThread().getContextClassLoader();\n    }\n\n    @Override\n    public final ForkJoinWorkerThread newThread(ForkJoinPool pool) {\n        ForkJoinWorkerThread thread = new JaxbForkJoinWorkerThread(pool);\n        thread.setContextClassLoader(classLoader);\n        return thread;\n    }\n\n    private static class JaxbForkJoinWorkerThread extends ForkJoinWorkerThread {\n\n        private JaxbForkJoinWorkerThread(ForkJoinPool pool) {\n            super(pool);\n        }\n    }\n}\n</code></pre>\n\n<p>Then pass an <code>Executor</code> using that factory to the <code>runAsync()</code> method:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>return CompletableFuture.runAsync(() -&gt; {\n    // now you have the right ClassLoader here\n}, getJaxbExecutor());\n\nprivate ForkJoinPool getJaxbExecutor() {\n    JaxbForkJoinWorkerThreadFactory threadFactory = new JaxbForkJoinWorkerThreadFactory();\n    int parallelism = Math.min(0x7fff /* copied from ForkJoinPool.java */, Runtime.getRuntime().availableProcessors());\n    return new ForkJoinPool(parallelism, threadFactory, null, false);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4502479,"reputation":891,"user_id":3660710,"display_name":"Asanka Siriwardena"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600506090,"creation_date":1600505767,"answer_id":63966985,"question_id":51518781,"body_markdown":"I too have experienced with the similar issue while using JAXB, i.e \r\n\r\n&gt; Implementation of JAXB-API has not been found\r\n\r\nwhich occurs randomly and it was harder to reproduce. Fortunately I had found a system environment where the above error is continuous, while other environments it worked smoothly.\r\n\r\n\r\nObservation\r\n-----------\r\n   With the extensive research into this issue, I found a **classloader** issue that causes this problem. Further I noticed, \r\n\r\n - JAXB implementation is visible to **ParallelWebappClassLoader**, a classloader present in Tomcat server\r\n - **Sometimes** it is not visible to jdk internal classloaders like AppClassLoader,(Even though it was visible for many cases)\r\n\r\nSolution\r\n--------\r\n   JAXBContext object is thread-safe (while marshaller/unmarshaller is not) and can be re-used once initiated. Therefore,\r\n\r\n 1. I found a thread that works with ParallelWebappClassLoader (i.e that given thread&#39;s context class loader is ParallelWebappClassLoader) and created JAXBContext there and stored in a map for later usage\r\n 2. Retrieved the stored JAXBContext whenever necessary (other threads that uses different class loaders) and carried out marshall/unmarshall tasks. That saved the day for me :)\r\n\r\n \r\n\r\n \r\n\r\n\r\n\r\n","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p>I too have experienced with the similar issue while using JAXB, i.e</p>\n<blockquote>\n<p>Implementation of JAXB-API has not been found</p>\n</blockquote>\n<p>which occurs randomly and it was harder to reproduce. Fortunately I had found a system environment where the above error is continuous, while other environments it worked smoothly.</p>\n<h2>Observation</h2>\n<p>With the extensive research into this issue, I found a <strong>classloader</strong> issue that causes this problem. Further I noticed,</p>\n<ul>\n<li>JAXB implementation is visible to <strong>ParallelWebappClassLoader</strong>, a classloader present in Tomcat server</li>\n<li><strong>Sometimes</strong> it is not visible to jdk internal classloaders like AppClassLoader,(Even though it was visible for many cases)</li>\n</ul>\n<h2>Solution</h2>\n<p>JAXBContext object is thread-safe (while marshaller/unmarshaller is not) and can be re-used once initiated. Therefore,</p>\n<ol>\n<li>I found a thread that works with ParallelWebappClassLoader (i.e that given thread's context class loader is ParallelWebappClassLoader) and created JAXBContext there and stored in a map for later usage</li>\n<li>Retrieved the stored JAXBContext whenever necessary (other threads that uses different class loaders) and carried out marshall/unmarshall tasks. That saved the day for me :)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":29611960,"reputation":1,"user_id":22694993,"display_name":"gnangoma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696591587,"creation_date":1696591498,"answer_id":77244059,"question_id":51518781,"body_markdown":"I have been struggling with this for several days. Thanks for three suggested solutions. However, my requirements dictate that I should not change any source code. I found a very simple solution. Basically, after I deploy my war file on Tomcat10 application server, I copied the jar file jaxb-impl.2.2.6 into WEB-INF\\classes. Explode the jar file from there using the command &quot;jar -xvf jaxb-impl.2.2.6&quot; and HOORAY, my 5 days nightmare trying to run my old JAXB project on  the Tomcat 10 ended and the project started to WORK! \r\n\r\nSo, piano that stop playing, started playing again. I love this solution since I do not need to change any code. As part of improvement, I will now explode the jar file during deployment of the war file.","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p>I have been struggling with this for several days. Thanks for three suggested solutions. However, my requirements dictate that I should not change any source code. I found a very simple solution. Basically, after I deploy my war file on Tomcat10 application server, I copied the jar file jaxb-impl.2.2.6 into WEB-INF\\classes. Explode the jar file from there using the command &quot;jar -xvf jaxb-impl.2.2.6&quot; and HOORAY, my 5 days nightmare trying to run my old JAXB project on  the Tomcat 10 ended and the project started to WORK!</p>\n<p>So, piano that stop playing, started playing again. I love this solution since I do not need to change any code. As part of improvement, I will now explode the jar file during deployment of the war file.</p>\n"}],"owner":{"account_id":2973802,"reputation":48688,"user_id":2525313,"accept_rate":88,"display_name":"Nicolai Parlog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17580,"favorite_count":0,"down_vote_count":0,"up_vote_count":32,"accepted_answer_id":51723474,"answer_count":6,"score":32,"last_activity_date":1696591587,"creation_date":1532521313,"question_id":51518781,"body_markdown":"**TLDR**: On Java 9/10, a web app in Tomcat has no access to JAXB even though its reference implementation is present on the class path.\r\n\r\n**Edit**: No, this is not a duplicate of [How to resolve java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException in Java 9](https://stackoverflow.com/q/43574426/2525313) - as you can tell by the _What I tried_ section, I already tried the proposed solutions.\r\n\r\n# The Situation\r\n\r\nWe have a web app that runs on Tomcat and depends on JAXB. During our migration to Java 9 we opted for adding [the JAXB reference implementation as a regular dependency](https://stackoverflow.com/a/48204154/2525313).\r\n\r\nEverything worked when launching the app from the IDE [with embedded Tomcat](https://tomcat.apache.org/tomcat-9.0-doc/api/org/apache/catalina/startup/Tomcat.html), but when running it on a real Tomcat instance, I get this error:\r\n\r\n\tCaused by: java.lang.RuntimeException: javax.xml.bind.JAXBException:\r\n\t\tImplementation of JAXB-API has not been found on module path or classpath.\r\n\t - with linked exception:\r\n\t[java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory]\r\n\t\tat [... our-code ...]\r\n\tCaused by: javax.xml.bind.JAXBException: Implementation of JAXB-API has not been found on module path or classpath.\r\n\t\tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:278) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.find(ContextFinder.java:421) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat [... our-code ...]\r\n\tCaused by: java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory\r\n\t\tat jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[?:?]\r\n\t\tat jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190) ~[?:?]\r\n\t\tat java.lang.ClassLoader.loadClass(ClassLoader.java:499) ~[?:?]\r\n\t\tat javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.find(ContextFinder.java:421) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat [... our-code ...]\r\n\r\nNote:\r\n\r\n&gt; Implementation of JAXB-API has not been found on module path or classpath.\r\n\r\nThese are the relevant files in `webapps/$app/WEB-INF/lib`:\r\n\r\n\tjaxb-api-2.3.0.jar\r\n\tjaxb-core-2.3.0.jar\r\n\tjaxb-impl-2.3.0.jar\r\n\r\nWhat is going on here?\r\n\r\n# What I tried\r\n\r\n## Adding JARs to Tomca&#39;s `CLASSPATH`\r\n\r\nMaybe it helps to add the JARs to Tomcat&#39;s class path in `setenv.sh`?\r\n\r\n    CLASSPATH=\r\n        .../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar:\r\n        .../webapps/$app/WEB-INF/lib/jaxb-impl-2.3.0.jar:\r\n        .../webapps/$app/WEB-INF/lib/jaxb-core-2.3.0.jar:\r\n        .../webapps/$app/WEB-INF/lib/javax.activation-1.2.0.jar\r\n\r\nNope:\r\n\r\n\tCaused by: javax.xml.bind.JAXBException: ClassCastException: attempting to cast\r\n\tjar:file:.../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar!/javax/xml/bind/JAXBContext.class to\r\n\tjar:file:.../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar!/javax/xml/bind/JAXBContext.class.\r\n\tPlease make sure that you are specifying the proper ClassLoader.    \r\n\t\tat javax.xml.bind.ContextFinder.handleClassCastException(ContextFinder.java:157) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:300) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\r\n\t\tat de.disy.gis.webmapserver.factory.DefaultWmsRequestFactory.initializeCommandExtractor(DefaultWmsRequestFactory.java:103) ~[cadenza-gis-webmapserver-7.7-SNAPSHOT.jar:7.6]\r\n\t\tat de.disy.gis.webmapserver.factory.DefaultWmsRequestFactory.lambda$new$0(DefaultWmsRequestFactory.java:87) ~[cadenza-gis-webmapserver-7.7-SNAPSHOT.jar:7.6]\r\n\r\nThat&#39;s clearly the same class, so apparently it has been loaded by two class loaders. I suspect [the system class loader and the app&#39;s class loader](https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html#Class_Loader_Definitions), but why would loading `JAXBContext` be delegated to the system class loader once but not always? It almost looks as if the delegation behavior of the app&#39;s class loader changes while the program runs.\r\n\r\n## Adding the module\r\n\r\nI don&#39;t really want to add _java.xml.bind_, but I tried it anyways by adding this to `catalina.sh`:\r\n\r\n\tJDK_JAVA_OPTIONS=&quot;$JDK_JAVA_OPTIONS --add-modules=java.xml.bind&quot;\r\n\r\nDoesn&#39;t work either, though:\r\n\r\n\tCaused by: java.lang.ClassCastException:\r\n\tjava.xml.bind/com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl\r\n\tcannot be cast to com.sun.xml.bind.v2.runtime.JAXBContextImpl\r\n\t\tat [... our-code ...]\r\n\r\nApart from the different class and stack trace, this is in line with what happened earlier: The class `JAXBContextImpl` was loaded twice, once from _java.xml.bind_ (must have been the system class loader) and one other time (I assume by the app&#39;s loader from the JAR).\r\n\r\n## Searching for bugs\r\n\r\n[Searching Tomcat&#39;s bug database](https://bz.apache.org/bugzilla/query.cgi) I found [#62559](https://bz.apache.org/bugzilla/show_bug.cgi?id=62559). Could that be the same error?\r\n\r\n## Adding JAR&#39;s to Tomcat&#39;s `lib`\r\n\r\nFollowing [advice given on the Tomcat user mailing list](http://mail-archives.apache.org/mod_mbox/tomcat-users/201807.mbox/%3cb1ca948e-f8d3-5c5e-9aaf-0c8c6c9f84d0@christopherschultz.net%3e), I added the JAXB JARs to Tomcat&#39;s `CATALINA_BASE/lib` directory, but got the same error as in the application&#39;s lib folder.","title":"JAXB not available on Tomcat 9 and Java 9/10","body":"<p><strong>TLDR</strong>: On Java 9/10, a web app in Tomcat has no access to JAXB even though its reference implementation is present on the class path.</p>\n\n<p><strong>Edit</strong>: No, this is not a duplicate of <a href=\"https://stackoverflow.com/q/43574426/2525313\">How to resolve java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException in Java 9</a> - as you can tell by the <em>What I tried</em> section, I already tried the proposed solutions.</p>\n\n<h1>The Situation</h1>\n\n<p>We have a web app that runs on Tomcat and depends on JAXB. During our migration to Java 9 we opted for adding <a href=\"https://stackoverflow.com/a/48204154/2525313\">the JAXB reference implementation as a regular dependency</a>.</p>\n\n<p>Everything worked when launching the app from the IDE <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/api/org/apache/catalina/startup/Tomcat.html\" rel=\"noreferrer\">with embedded Tomcat</a>, but when running it on a real Tomcat instance, I get this error:</p>\n\n<pre><code>Caused by: java.lang.RuntimeException: javax.xml.bind.JAXBException:\n    Implementation of JAXB-API has not been found on module path or classpath.\n - with linked exception:\n[java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory]\n    at [... our-code ...]\nCaused by: javax.xml.bind.JAXBException: Implementation of JAXB-API has not been found on module path or classpath.\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:278) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:421) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at [... our-code ...]\nCaused by: java.lang.ClassNotFoundException: com.sun.xml.internal.bind.v2.ContextFactory\n    at jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:582) ~[?:?]\n    at jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:190) ~[?:?]\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:499) ~[?:?]\n    at javax.xml.bind.ServiceLoaderUtil.nullSafeLoadClass(ServiceLoaderUtil.java:122) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ServiceLoaderUtil.safeLoadClass(ServiceLoaderUtil.java:155) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:276) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:421) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at [... our-code ...]\n</code></pre>\n\n<p>Note:</p>\n\n<blockquote>\n  <p>Implementation of JAXB-API has not been found on module path or classpath.</p>\n</blockquote>\n\n<p>These are the relevant files in <code>webapps/$app/WEB-INF/lib</code>:</p>\n\n<pre><code>jaxb-api-2.3.0.jar\njaxb-core-2.3.0.jar\njaxb-impl-2.3.0.jar\n</code></pre>\n\n<p>What is going on here?</p>\n\n<h1>What I tried</h1>\n\n<h2>Adding JARs to Tomca's <code>CLASSPATH</code></h2>\n\n<p>Maybe it helps to add the JARs to Tomcat's class path in <code>setenv.sh</code>?</p>\n\n<pre><code>CLASSPATH=\n    .../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar:\n    .../webapps/$app/WEB-INF/lib/jaxb-impl-2.3.0.jar:\n    .../webapps/$app/WEB-INF/lib/jaxb-core-2.3.0.jar:\n    .../webapps/$app/WEB-INF/lib/javax.activation-1.2.0.jar\n</code></pre>\n\n<p>Nope:</p>\n\n<pre><code>Caused by: javax.xml.bind.JAXBException: ClassCastException: attempting to cast\njar:file:.../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar!/javax/xml/bind/JAXBContext.class to\njar:file:.../webapps/$app/WEB-INF/lib/jaxb-api-2.3.0.jar!/javax/xml/bind/JAXBContext.class.\nPlease make sure that you are specifying the proper ClassLoader.    \n    at javax.xml.bind.ContextFinder.handleClassCastException(ContextFinder.java:157) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:300) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:286) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.ContextFinder.find(ContextFinder.java:409) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:721) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:662) ~[jaxb-api-2.3.0.jar:2.3.0]\n    at de.disy.gis.webmapserver.factory.DefaultWmsRequestFactory.initializeCommandExtractor(DefaultWmsRequestFactory.java:103) ~[cadenza-gis-webmapserver-7.7-SNAPSHOT.jar:7.6]\n    at de.disy.gis.webmapserver.factory.DefaultWmsRequestFactory.lambda$new$0(DefaultWmsRequestFactory.java:87) ~[cadenza-gis-webmapserver-7.7-SNAPSHOT.jar:7.6]\n</code></pre>\n\n<p>That's clearly the same class, so apparently it has been loaded by two class loaders. I suspect <a href=\"https://tomcat.apache.org/tomcat-9.0-doc/class-loader-howto.html#Class_Loader_Definitions\" rel=\"noreferrer\">the system class loader and the app's class loader</a>, but why would loading <code>JAXBContext</code> be delegated to the system class loader once but not always? It almost looks as if the delegation behavior of the app's class loader changes while the program runs.</p>\n\n<h2>Adding the module</h2>\n\n<p>I don't really want to add <em>java.xml.bind</em>, but I tried it anyways by adding this to <code>catalina.sh</code>:</p>\n\n<pre><code>JDK_JAVA_OPTIONS=\"$JDK_JAVA_OPTIONS --add-modules=java.xml.bind\"\n</code></pre>\n\n<p>Doesn't work either, though:</p>\n\n<pre><code>Caused by: java.lang.ClassCastException:\njava.xml.bind/com.sun.xml.internal.bind.v2.runtime.JAXBContextImpl\ncannot be cast to com.sun.xml.bind.v2.runtime.JAXBContextImpl\n    at [... our-code ...]\n</code></pre>\n\n<p>Apart from the different class and stack trace, this is in line with what happened earlier: The class <code>JAXBContextImpl</code> was loaded twice, once from <em>java.xml.bind</em> (must have been the system class loader) and one other time (I assume by the app's loader from the JAR).</p>\n\n<h2>Searching for bugs</h2>\n\n<p><a href=\"https://bz.apache.org/bugzilla/query.cgi\" rel=\"noreferrer\">Searching Tomcat's bug database</a> I found <a href=\"https://bz.apache.org/bugzilla/show_bug.cgi?id=62559\" rel=\"noreferrer\">#62559</a>. Could that be the same error?</p>\n\n<h2>Adding JAR's to Tomcat's <code>lib</code></h2>\n\n<p>Following <a href=\"http://mail-archives.apache.org/mod_mbox/tomcat-users/201807.mbox/%3cb1ca948e-f8d3-5c5e-9aaf-0c8c6c9f84d0@christopherschultz.net%3e\" rel=\"noreferrer\">advice given on the Tomcat user mailing list</a>, I added the JAXB JARs to Tomcat's <code>CATALINA_BASE/lib</code> directory, but got the same error as in the application's lib folder.</p>\n"},{"tags":["java","simplify"],"comments":[{"owner":{"account_id":6586022,"reputation":76,"user_id":5088766,"display_name":"mcarn"},"score":0,"creation_date":1696589888,"post_id":77243868,"comment_id":136175788,"body_markdown":"you could try reversing if elses as in https://softwareengineering.stackexchange.com/questions/47789/how-would-you-refactor-nested-if-statements","body":"you could try reversing if elses as in <a href=\"https://softwareengineering.stackexchange.com/questions/47789/how-would-you-refactor-nested-if-statements\" title=\"how would you refactor nested if statements\">softwareengineering.stackexchange.com/questions/47789/&hellip;</a>"},{"owner":{"account_id":9744358,"reputation":39903,"user_id":10138734,"display_name":"Akina"},"score":1,"creation_date":1696590068,"post_id":77243868,"comment_id":136175826,"body_markdown":"https://xyproblem.info/ Provide the problem itself.","body":"<a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">xyproblem.info</a> Provide the problem itself."},{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":3,"creation_date":1696590157,"post_id":77243868,"comment_id":136175847,"body_markdown":"Have you tried building the prepared statement dynamically based on the conditions you have?","body":"Have you tried building the prepared statement dynamically based on the conditions you have?"},{"owner":{"account_id":247613,"reputation":284087,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1696592349,"post_id":77243868,"comment_id":136176266,"body_markdown":"Unrelated, but never do `if (foo == true) {` and instead always do `if (foo) {`. It&#39;s just cleaner and less risky.","body":"Unrelated, but never do <code>if (foo == true) {</code> and instead always do <code>if (foo) {</code>. It&#39;s just cleaner and less risky."}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696591496,"creation_date":1696591496,"answer_id":77244058,"question_id":77243868,"body_markdown":"You can simplify this process by dynamically constructing the SQL query based on the selected parameters. Here&#39;s a more structured approach:\r\n\r\n```\r\n// Define the base query\r\nString query = &quot;SELECT * FROM propertyInfo WHERE 1 = 1&quot;;\r\n\r\n// Initialize a list to store query parameters\r\nList&lt;Object&gt; parameters = new ArrayList&lt;&gt;();\r\n\r\n// Check if Name is selected\r\nif (searchingForName) {\r\n    query += &quot; AND propertyName = ?&quot;;\r\n    parameters.add(nameValue);\r\n}\r\n\r\n// Check if Manager is selected\r\nif (searchingForManager) {\r\n    query += &quot; AND propertyManager = ?&quot;;\r\n    parameters.add(managerValue);\r\n}\r\n\r\n// Check if AccessLevel is selected\r\nif (searchingForAccessLevel) {\r\n    query += &quot; AND accessLevelRequired = ?&quot;;\r\n    parameters.add(accessLevelValue);\r\n}\r\n\r\n// Check if Inhabitant is selected\r\nif (searchingForInhabitant) {\r\n    query += &quot; AND propertyInhabitant = ?&quot;;\r\n    parameters.add(inhabitantValue);\r\n}\r\n\r\n// Check if Location is selected\r\nif (searchingForLocation) {\r\n    query += &quot; AND propertyLocation = ?&quot;;\r\n    parameters.add(locationValue);\r\n}\r\n\r\n```\r\n\r\nFor each selected parameter (e.g., Name, Manager, etc.), you dynamically add a corresponding condition to the query string and add the parameter value to the ***parameters*** list. Finally, you can execute the query using a prepared statement with the parameters.\r\n\r\nHave a good one!","title":"How to simplify the use of too many IF statements when finding specific cases","body":"<p>You can simplify this process by dynamically constructing the SQL query based on the selected parameters. Here's a more structured approach:</p>\n<pre><code>// Define the base query\nString query = &quot;SELECT * FROM propertyInfo WHERE 1 = 1&quot;;\n\n// Initialize a list to store query parameters\nList&lt;Object&gt; parameters = new ArrayList&lt;&gt;();\n\n// Check if Name is selected\nif (searchingForName) {\n    query += &quot; AND propertyName = ?&quot;;\n    parameters.add(nameValue);\n}\n\n// Check if Manager is selected\nif (searchingForManager) {\n    query += &quot; AND propertyManager = ?&quot;;\n    parameters.add(managerValue);\n}\n\n// Check if AccessLevel is selected\nif (searchingForAccessLevel) {\n    query += &quot; AND accessLevelRequired = ?&quot;;\n    parameters.add(accessLevelValue);\n}\n\n// Check if Inhabitant is selected\nif (searchingForInhabitant) {\n    query += &quot; AND propertyInhabitant = ?&quot;;\n    parameters.add(inhabitantValue);\n}\n\n// Check if Location is selected\nif (searchingForLocation) {\n    query += &quot; AND propertyLocation = ?&quot;;\n    parameters.add(locationValue);\n}\n\n</code></pre>\n<p>For each selected parameter (e.g., Name, Manager, etc.), you dynamically add a corresponding condition to the query string and add the parameter value to the <em><strong>parameters</strong></em> list. Finally, you can execute the query using a prepared statement with the parameters.</p>\n<p>Have a good one!</p>\n"}],"owner":{"account_id":29334364,"reputation":1,"user_id":22475069,"display_name":"Thomas Humphreys"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696591496,"creation_date":1696589569,"question_id":77243868,"body_markdown":"I have code which a user will select different perameters from 5 dropdown menus, these can be: &quot;None&quot;, &#39;Name&#39;, &#39;Manager&#39;, &#39;AccessLevel&#39;, &#39;Inhabitant&#39; and &#39;Location&#39; these will be matched with jtextfields that are searched to get the inputed value. However to get these values i am basically do alot of if statements to determine the combination of values e.g. Name, Manager and Location together will give the SQL statement:\r\n   `query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; `\r\n\r\nthis leads to a convoluted mess of if statements, is there any way to simplify it?\r\n\r\nit works however to actually create it i would have to do hundreds of lines for different combinations and it will be hard to expand later. however this is some of my current code:\r\n```\r\n`if (searchingForName == true) {\r\n          if (searchingForManager == true) {\r\n              if (searchingForAccessLevel == true) { // final lvl 1\r\n                   query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND accessLevelRequired = ?&quot;; \r\n                   query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND accessLevelRequired = ?&quot;; \r\n              }else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // final lvl 2\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyInhabitant = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND propertyInhabitant = ?&quot;; \r\n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // finaly lvl 3\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; \r\n            }\r\n          }  else if ((searchType1.equals(&quot;AccessLevel&quot;) || searchType2.equals(&quot;AccessLevel&quot;) || searchType3.equals(&quot;AccessLevel&quot;))) { // sub lvl 2\r\n               if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { //final lvl 1\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \r\n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 2\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \r\n            }\r\n          } else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // sub lvl 3\r\n               if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 1\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \r\n          }\r\n               \r\n      //}\r\n      }else if ((searchType1.equals(&quot;Manager&quot;) || searchType2.equals(&quot;Manager&quot;) || searchType3.equals(&quot;Manager&quot;))) { // main lvl 2\r\n          \r\n          \r\n          if ((searchType1.equals(&quot;AccessLevel&quot;) || searchType2.equals(&quot;AccessLevel&quot;) || searchType3.equals(&quot;AccessLevel&quot;))) { // sub lvl 1\r\n              \r\n              \r\n            if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) {// final lvl 1\r\n                   query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \r\n                   query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE   propertyManager = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \r\n                   \r\n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 2\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyManager = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \r\n            }\r\n          }  else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // sub lvl 2\r\n                if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 1\r\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \r\n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyManager = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \r\n            }\r\n          }\r\n        `  } \r\n      }\r\n```","title":"How to simplify the use of too many IF statements when finding specific cases","body":"<p>I have code which a user will select different perameters from 5 dropdown menus, these can be: &quot;None&quot;, 'Name', 'Manager', 'AccessLevel', 'Inhabitant' and 'Location' these will be matched with jtextfields that are searched to get the inputed value. However to get these values i am basically do alot of if statements to determine the combination of values e.g. Name, Manager and Location together will give the SQL statement:\n<code>query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; </code></p>\n<p>this leads to a convoluted mess of if statements, is there any way to simplify it?</p>\n<p>it works however to actually create it i would have to do hundreds of lines for different combinations and it will be hard to expand later. however this is some of my current code:</p>\n<pre><code>`if (searchingForName == true) {\n          if (searchingForManager == true) {\n              if (searchingForAccessLevel == true) { // final lvl 1\n                   query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND accessLevelRequired = ?&quot;; \n                   query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND accessLevelRequired = ?&quot;; \n              }else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // final lvl 2\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyInhabitant = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND propertyInhabitant = ?&quot;; \n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // finaly lvl 3\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyManager = ? AND propertyLocation = ?&quot;; \n            }\n          }  else if ((searchType1.equals(&quot;AccessLevel&quot;) || searchType2.equals(&quot;AccessLevel&quot;) || searchType3.equals(&quot;AccessLevel&quot;))) { // sub lvl 2\n               if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { //final lvl 1\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 2\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \n            }\n          } else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // sub lvl 3\n               if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 1\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyName = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyName = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \n          }\n               \n      //}\n      }else if ((searchType1.equals(&quot;Manager&quot;) || searchType2.equals(&quot;Manager&quot;) || searchType3.equals(&quot;Manager&quot;))) { // main lvl 2\n          \n          \n          if ((searchType1.equals(&quot;AccessLevel&quot;) || searchType2.equals(&quot;AccessLevel&quot;) || searchType3.equals(&quot;AccessLevel&quot;))) { // sub lvl 1\n              \n              \n            if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) {// final lvl 1\n                   query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \n                   query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE   propertyManager = ? AND accessLevelRequired = ? AND propertyInhabitant = ?&quot;; \n                   \n            }else if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 2\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyManager = ? AND accessLevelRequired = ? AND propertyLocation = ?&quot;; \n            }\n          }  else if ((searchType1.equals(&quot;Inhabitant&quot;) || searchType2.equals(&quot;Inhabitant&quot;) || searchType3.equals(&quot;Inhabitant&quot;))) { // sub lvl 2\n                if ((searchType1.equals(&quot;Location&quot;) || searchType2.equals(&quot;Location&quot;) || searchType3.equals(&quot;Location&quot;))) { // final lvl 1\n                query = &quot;SELECT * FROM propertyInfo WHERE propertyManager = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \n                query2 = &quot;SELECT COUNT(*) AS recordCount FROM propertyInfo WHERE  propertyManager = ? AND propertyInhabitant = ? AND propertyLocation = ?&quot;; \n            }\n          }\n        `  } \n      }\n</code></pre>\n"},{"tags":["java","spring","swagger","swagger-codegen"],"comments":[{"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"score":0,"creation_date":1531755706,"post_id":46584658,"comment_id":89703402,"body_markdown":"In your example you say `kambiTransaction` is of type `String`, but your method consumes `application/json`. That is you want to sent a plain text string (that contains JSON - as shown in the example value) wrapped in JSON? Why don&#39;t you create a domain class for `kambiTransaction`. Swagger will automatically print the class&#39; structure as JSON example.","body":"In your example you say <code>kambiTransaction</code> is of type <code>String</code>, but your method consumes <code>application&#47;json</code>. That is you want to sent a plain text string (that contains JSON - as shown in the example value) wrapped in JSON? Why don&#39;t you create a domain class for <code>kambiTransaction</code>. Swagger will automatically print the class&#39; structure as JSON example."},{"owner":{"account_id":4858008,"reputation":276,"user_id":3918488,"display_name":"Abinash"},"score":0,"creation_date":1531770106,"post_id":46584658,"comment_id":89710341,"body_markdown":"I would second @dpr. The right way would be to build a model class and use annotation [ApiModel](https://github.com/swagger-api/swagger-core/wiki/annotations#apimodel) on the class and [ApiModelProperty](https://github.com/swagger-api/swagger-core/wiki/annotations#apimodelproperty)  on the fields. ApiModelProperty accepts value and example parameters.","body":"I would second @dpr. The right way would be to build a model class and use annotation <a href=\"https://github.com/swagger-api/swagger-core/wiki/annotations#apimodel\" rel=\"nofollow noreferrer\">ApiModel</a> on the class and <a href=\"https://github.com/swagger-api/swagger-core/wiki/annotations#apimodelproperty\" rel=\"nofollow noreferrer\">ApiModelProperty</a>  on the fields. ApiModelProperty accepts value and example parameters."}],"answers":[{"tags":[],"owner":{"account_id":7675670,"reputation":535,"user_id":5816637,"display_name":"E. Bavoux"},"down_vote_count":2,"up_vote_count":7,"is_accepted":false,"score":5,"last_activity_date":1509985794,"creation_date":1509985794,"answer_id":47141538,"question_id":46584658,"body_markdown":"Have you tried the following ? \r\n\r\n    @ApiModelProperty(\r\n        value = &quot;A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.&quot;,\r\n        example = &quot;{foo: whatever, bar: whatever2}&quot;)\r\n\r\nHave a nice day","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>Have you tried the following ? </p>\n\n<pre><code>@ApiModelProperty(\n    value = \"A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.\",\n    example = \"{foo: whatever, bar: whatever2}\")\n</code></pre>\n\n<p>Have a nice day</p>\n"},{"tags":[],"owner":{"account_id":9518241,"reputation":416,"user_id":7073874,"display_name":"Artem Trofimoff"},"down_vote_count":0,"up_vote_count":39,"is_accepted":false,"score":39,"last_activity_date":1540992087,"creation_date":1531834346,"answer_id":51382735,"question_id":46584658,"body_markdown":"I have similar issue with generating examples for body objects - annotation `@Example` and `@ExampleProperty` simply doesn&#39;t work for no reason in swagger 1.5.x. (I use 1.5.16)\r\n\r\nMy current solution is:  \r\nuse `@ApiParam(example=&quot;...&quot;)` for **non-body objects**, e.g.:\r\n\r\n    public void post(@PathParam(&quot;userId&quot;) @ApiParam(value = &quot;userId&quot;, example = &quot;4100003&quot;) Integer userId) {}\r\n\r\nfor **body** objects create new class and annotate fields with `@ApiModelProperty(value = &quot; &quot;, example = &quot; &quot;)`, e.g.: \r\n\r\n    @ApiModel(subTypes = {BalanceUpdate.class, UserMessage.class})\r\n    class PushRequest {\r\n        @ApiModelProperty(value = &quot;status&quot;, example = &quot;push&quot;)\r\n        private final String status;;\r\n    }","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>I have similar issue with generating examples for body objects - annotation <code>@Example</code> and <code>@ExampleProperty</code> simply doesn't work for no reason in swagger 1.5.x. (I use 1.5.16)</p>\n\n<p>My current solution is:<br>\nuse <code>@ApiParam(example=\"...\")</code> for <strong>non-body objects</strong>, e.g.:</p>\n\n<pre><code>public void post(@PathParam(\"userId\") @ApiParam(value = \"userId\", example = \"4100003\") Integer userId) {}\n</code></pre>\n\n<p>for <strong>body</strong> objects create new class and annotate fields with <code>@ApiModelProperty(value = \" \", example = \" \")</code>, e.g.: </p>\n\n<pre><code>@ApiModel(subTypes = {BalanceUpdate.class, UserMessage.class})\nclass PushRequest {\n    @ApiModelProperty(value = \"status\", example = \"push\")\n    private final String status;;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5433910,"reputation":10649,"user_id":4323935,"accept_rate":69,"display_name":"dpr"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1531848547,"creation_date":1531848547,"answer_id":51387207,"question_id":46584658,"body_markdown":"Actually the java doc for the `example` property of the `@ApiParam` annotation states that this is exclusively to be used for non-body parameters. Where the `examples` property may be used for body parameters.\r\n\r\nI tested this annotation\r\n\r\n    @ApiParam(\r\n      value = &quot;A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.&quot;,\r\n      examples = @Example(value = \r\n        @ExampleProperty(\r\n          mediaType = MediaType.APPLICATION_JSON,\r\n          value = &quot;{foo: whatever, bar: whatever2}&quot;\r\n        )\r\n      )\r\n    )\r\n\r\nwhich resulted in the following swagger to be generated for the corresponding method:\r\n    \r\n    /transaction:\r\n      post:\r\n      ...\r\n        parameters:\r\n        ...\r\n        - in: &quot;body&quot;\r\n          name: &quot;body&quot;\r\n          description: &quot;A JSON value representing a transaction. An example of the expected\\\r\n            \\ schema can be found down here. The fields marked with an * means that\\\r\n            \\ they are required.&quot;\r\n          required: false\r\n          schema:\r\n            type: &quot;string&quot;  \r\n          x-examples:\r\n            application/json: &quot;{foo: whatever, bar: whatever2}&quot;\r\n\r\nHowever this value doesn&#39;t seem to be picked up by swagger-ui. I tried version 2.2.10 and the latest 3.17.4, but neither version used the `x-examples` property of the swagger.\r\n\r\nThere are some references for `x-example` (the one used for non-body parameters) in the [code of swagger-ui][1] but no match for `x-examples`. That is this doesn&#39;t seem to be supported by swagger-ui at the moment.\r\n\r\nIf you really need this example values to be present, your best option currently seems to be to change your method&#39;s signature and use a dedicated domain type for the body parameter. As stated in the comments already swagger will automatically pick up the structure of the domain type and print some nice information in swagger-ui:\r\n\r\n[![Swagger-UI 2.2.10 with domain type info][2]][2]\r\n\r\n\r\n  [1]: https://github.com/swagger-api/swagger-ui/search?q=x-example&amp;type=Code\r\n  [2]: https://i.stack.imgur.com/a5Ake.png","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>Actually the java doc for the <code>example</code> property of the <code>@ApiParam</code> annotation states that this is exclusively to be used for non-body parameters. Where the <code>examples</code> property may be used for body parameters.</p>\n\n<p>I tested this annotation</p>\n\n<pre><code>@ApiParam(\n  value = \"A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.\",\n  examples = @Example(value = \n    @ExampleProperty(\n      mediaType = MediaType.APPLICATION_JSON,\n      value = \"{foo: whatever, bar: whatever2}\"\n    )\n  )\n)\n</code></pre>\n\n<p>which resulted in the following swagger to be generated for the corresponding method:</p>\n\n<pre><code>/transaction:\n  post:\n  ...\n    parameters:\n    ...\n    - in: \"body\"\n      name: \"body\"\n      description: \"A JSON value representing a transaction. An example of the expected\\\n        \\ schema can be found down here. The fields marked with an * means that\\\n        \\ they are required.\"\n      required: false\n      schema:\n        type: \"string\"  \n      x-examples:\n        application/json: \"{foo: whatever, bar: whatever2}\"\n</code></pre>\n\n<p>However this value doesn't seem to be picked up by swagger-ui. I tried version 2.2.10 and the latest 3.17.4, but neither version used the <code>x-examples</code> property of the swagger.</p>\n\n<p>There are some references for <code>x-example</code> (the one used for non-body parameters) in the <a href=\"https://github.com/swagger-api/swagger-ui/search?q=x-example&amp;type=Code\" rel=\"noreferrer\">code of swagger-ui</a> but no match for <code>x-examples</code>. That is this doesn't seem to be supported by swagger-ui at the moment.</p>\n\n<p>If you really need this example values to be present, your best option currently seems to be to change your method's signature and use a dedicated domain type for the body parameter. As stated in the comments already swagger will automatically pick up the structure of the domain type and print some nice information in swagger-ui:</p>\n\n<p><a href=\"https://i.stack.imgur.com/a5Ake.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/a5Ake.png\" alt=\"Swagger-UI 2.2.10 with domain type info\"></a></p>\n"},{"tags":[],"owner":{"account_id":1265489,"reputation":121,"user_id":1222878,"display_name":"BorisHrenPopadesh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556290598,"creation_date":1556290598,"answer_id":55870191,"question_id":46584658,"body_markdown":"If you are using swagger 2.9.2 then Examples are not working there. These annotations are ignored\r\n\r\n    protected Map&lt;String, Response&gt; mapResponseMessages(Set&lt;ResponseMessage&gt; from) {\r\n      Map&lt;String, Response&gt; responses = newTreeMap();\r\n      for (ResponseMessage responseMessage : from) {\r\n        Property responseProperty;\r\n        ModelReference modelRef = responseMessage.getResponseModel();\r\n        responseProperty = modelRefToProperty(modelRef);\r\n        Response response = new Response()\r\n            .description(responseMessage.getMessage())\r\n            .schema(responseProperty);\r\n        **response.setExamples(Maps.&lt;String, Object&gt;newHashMap());**\r\n        response.setHeaders(transformEntries(responseMessage.getHeaders(), toPropertyEntry()));\r\n        Map&lt;String, Object&gt; extensions = new VendorExtensionsMapper()\r\n            .mapExtensions(responseMessage.getVendorExtensions());\r\n        response.getVendorExtensions().putAll(extensions);\r\n        responses.put(String.valueOf(responseMessage.getCode()), response);\r\n      }\r\n      return responses;\r\n    }\r\n\r\nTry using swagger 3.0.0-Snapshot.\r\nYou need to change maven dependencies like this:\r\n\r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n                &lt;artifactId&gt;springfox-spring-webmvc&lt;/artifactId&gt;\r\n                &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n\r\nand change annotation on your Swagger config file to this: @EnableSwagger2WebMvc","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>If you are using swagger 2.9.2 then Examples are not working there. These annotations are ignored</p>\n\n<pre><code>protected Map&lt;String, Response&gt; mapResponseMessages(Set&lt;ResponseMessage&gt; from) {\n  Map&lt;String, Response&gt; responses = newTreeMap();\n  for (ResponseMessage responseMessage : from) {\n    Property responseProperty;\n    ModelReference modelRef = responseMessage.getResponseModel();\n    responseProperty = modelRefToProperty(modelRef);\n    Response response = new Response()\n        .description(responseMessage.getMessage())\n        .schema(responseProperty);\n    **response.setExamples(Maps.&lt;String, Object&gt;newHashMap());**\n    response.setHeaders(transformEntries(responseMessage.getHeaders(), toPropertyEntry()));\n    Map&lt;String, Object&gt; extensions = new VendorExtensionsMapper()\n        .mapExtensions(responseMessage.getVendorExtensions());\n    response.getVendorExtensions().putAll(extensions);\n    responses.put(String.valueOf(responseMessage.getCode()), response);\n  }\n  return responses;\n}\n</code></pre>\n\n<p>Try using swagger 3.0.0-Snapshot.\nYou need to change maven dependencies like this:</p>\n\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n            &lt;artifactId&gt;springfox-spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;3.0.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n\n<p>and change annotation on your Swagger config file to this: @EnableSwagger2WebMvc</p>\n"},{"tags":[],"owner":{"account_id":1534622,"reputation":1593,"user_id":1430991,"display_name":"gce"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1614092830,"creation_date":1614092830,"answer_id":66335705,"question_id":46584658,"body_markdown":"Swagger.v3 Kotlin/Micronaut example:\r\n\r\n    @Post(&quot;/get-list&quot;)\r\n    fun getList(\r\n            @RequestBody(description = &quot;Get list of ...&quot;,\r\n                    content = [Content(\r\n                            mediaType = &quot;application/json&quot;,\r\n                            schema = Schema(implementation = RequestDTO::class),\r\n                            examples = [ExampleObject(value = &quot;&quot;&quot;\r\n                                {\r\n                                    &quot;pagination&quot;: {\r\n                                        &quot;page&quot;: 0,\r\n                                        &quot;perPage&quot;: 10\r\n                                    },\r\n                                    &quot;filter&quot;: {\r\n                                        &quot;property_1&quot;: &quot;string&quot;,\r\n                                        &quot;property_2&quot;: &quot;string&quot;\r\n                                    },\r\n                                    &quot;sort&quot;: {\r\n                                        &quot;field&quot;: &quot;property_1&quot;,\r\n                                        &quot;order&quot;: &quot;DESC&quot;\r\n                                    }\r\n                                }\r\n                            &quot;&quot;&quot;)]\r\n                    )]) @Body request: RequestDTO): Response&lt;SomeDTO&gt; { ... }\r\n","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>Swagger.v3 Kotlin/Micronaut example:</p>\n<pre><code>@Post(&quot;/get-list&quot;)\nfun getList(\n        @RequestBody(description = &quot;Get list of ...&quot;,\n                content = [Content(\n                        mediaType = &quot;application/json&quot;,\n                        schema = Schema(implementation = RequestDTO::class),\n                        examples = [ExampleObject(value = &quot;&quot;&quot;\n                            {\n                                &quot;pagination&quot;: {\n                                    &quot;page&quot;: 0,\n                                    &quot;perPage&quot;: 10\n                                },\n                                &quot;filter&quot;: {\n                                    &quot;property_1&quot;: &quot;string&quot;,\n                                    &quot;property_2&quot;: &quot;string&quot;\n                                },\n                                &quot;sort&quot;: {\n                                    &quot;field&quot;: &quot;property_1&quot;,\n                                    &quot;order&quot;: &quot;DESC&quot;\n                                }\n                            }\n                        &quot;&quot;&quot;)]\n                )]) @Body request: RequestDTO): Response&lt;SomeDTO&gt; { ... }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6478598,"reputation":51,"user_id":5016427,"display_name":"Maximiliano Sibert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1638933287,"creation_date":1638933287,"answer_id":70269487,"question_id":46584658,"body_markdown":"Using swagger 3.0.0 try this over the rest method\r\n\r\n    @Operation(\r\n            summary = &quot;Finds a person&quot;,\r\n            description = &quot;Finds a person by their Id.&quot;,\r\n            tags = { &quot;People&quot; },\r\n            responses = {\r\n                @ApiResponse(\r\n                    description = &quot;Success&quot;,\r\n                    responseCode = &quot;200&quot;,\r\n                    content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = Person.class))\r\n                ),\r\n                @ApiResponse(description = &quot;Not found&quot;, responseCode = &quot;404&quot;, content = @Content),\r\n                @ApiResponse(description = &quot;Internal error&quot;, responseCode = &quot;500&quot;, content = @Content)\r\n            }\r\n        )\r\n\r\n","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>Using swagger 3.0.0 try this over the rest method</p>\n<pre><code>@Operation(\n        summary = &quot;Finds a person&quot;,\n        description = &quot;Finds a person by their Id.&quot;,\n        tags = { &quot;People&quot; },\n        responses = {\n            @ApiResponse(\n                description = &quot;Success&quot;,\n                responseCode = &quot;200&quot;,\n                content = @Content(mediaType = &quot;application/json&quot;, schema = @Schema(implementation = Person.class))\n            ),\n            @ApiResponse(description = &quot;Not found&quot;, responseCode = &quot;404&quot;, content = @Content),\n            @ApiResponse(description = &quot;Internal error&quot;, responseCode = &quot;500&quot;, content = @Content)\n        }\n    )\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7082225,"reputation":347,"user_id":5420223,"accept_rate":100,"display_name":"NeilB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696591411,"creation_date":1696591411,"answer_id":77244054,"question_id":46584658,"body_markdown":"I am using swagger.version 1.5.22, springfox-swagger2 2.9.2 and springfox-swagger-ui 2.9.2. For me @schema works instead of @ApiModelProperty. Let&#39;s say the requestbody is using ABCDto class.\r\n\r\n    public class ABCDto {\r\n        @Schema(name = &quot;id&quot;, example = &quot;1&quot;, required = true)\r\n        @JsonProperty(&quot;id&quot;)\r\n        private String id;\r\n    }","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>I am using swagger.version 1.5.22, springfox-swagger2 2.9.2 and springfox-swagger-ui 2.9.2. For me @schema works instead of @ApiModelProperty. Let's say the requestbody is using ABCDto class.</p>\n<pre><code>public class ABCDto {\n    @Schema(name = &quot;id&quot;, example = &quot;1&quot;, required = true)\n    @JsonProperty(&quot;id&quot;)\n    private String id;\n}\n</code></pre>\n"}],"owner":{"account_id":90106,"reputation":1691,"user_id":248183,"accept_rate":72,"display_name":"Roman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143833,"favorite_count":0,"down_vote_count":0,"up_vote_count":55,"answer_count":7,"score":55,"last_activity_date":1696591411,"creation_date":1507203441,"question_id":46584658,"body_markdown":"I am creating a REST Api using Spring boot, and auto generating the swagger documentation in controllers using swagger codegen. However, I am not able to set a description and example for a parameter of type String in a POST request. Here is mi code:\r\n    \r\n    import io.swagger.annotations.*;\r\n    \r\n    @Api(value = &quot;transaction&quot;, tags = {&quot;transaction&quot;})\r\n    @FunctionalInterface\r\n    public interface ITransactionsApi {\r\n        @ApiOperation(value = &quot;Places a new transaction on the system.&quot;, notes = &quot;Creates a new transaction in the system. See the schema of the Transaction parameter for more information &quot;, tags={ &quot;transaction&quot;, })\r\n        @ApiResponses(value = {\r\n            @ApiResponse(code = 200, message = &quot;Another transaction with the same messageId already exists in the system. No transaction was created.&quot;),\r\n            @ApiResponse(code = 201, message = &quot;The transaction has been correctly created in the system&quot;),\r\n            @ApiResponse(code = 400, message = &quot;The transaction schema is invalid and therefore the transaction has not been created.&quot;, response = String.class),\r\n            @ApiResponse(code = 415, message = &quot;The content type is unsupported&quot;),\r\n            @ApiResponse(code = 500, message = &quot;An unexpected error has occurred. The error has been logged and is being investigated.&quot;) })\r\n    \r\n        @RequestMapping(value = &quot;/transaction&quot;,\r\n            produces = { &quot;text/plain&quot; },\r\n            consumes = { &quot;application/json&quot; },\r\n            method = RequestMethod.POST)\r\n        ResponseEntity&lt;Void&gt; createTransaction(\r\n            @ApiParam(\r\n                value = &quot;A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.&quot; ,\r\n                example = &quot;{foo: whatever, bar: whatever2}&quot;)\r\n            @Valid @RequestBody String kambiTransaction) throws InvalidTransactionException;\r\n    }\r\n\r\n**The example property of the @ApiParam has been manually inserted by me, because the codegen was ignoring that part of the yaml (That is another question: why is the editor ignoring the example part?).** Here is part of the yaml:\r\n\r\n    paths:\r\n      /transaction:\r\n        post:\r\n          tags:\r\n            - transaction\r\n          summary: Place a new transaction on the system.\r\n          description: &gt;\r\n            Creates a new transaction in the system. See the schema of the Transaction parameter\r\n            for more information\r\n          operationId: createTransaction\r\n          parameters:\r\n            - $ref: &#39;#/parameters/transaction&#39;\r\n          consumes:\r\n            - application/json\r\n          produces:\r\n            - text/plain\r\n          responses:\r\n            &#39;200&#39;:\r\n              description: Another transaction with the same messageId already exists in the system. No transaction was created.\r\n            &#39;201&#39;:\r\n              description: The transaction has been correctly created in the system\r\n            &#39;400&#39;:\r\n              description: The transaction schema is invalid and therefore the transaction has not been created.\r\n              schema:\r\n                type: string\r\n                description: error message explaining why the request is a bad request.\r\n            &#39;415&#39;:\r\n              description: The content type is unsupported\r\n            &#39;500&#39;:\r\n              $ref: &#39;#/responses/Standard500ErrorResponse&#39;\r\n\r\n    parameters:\r\n      transaction:\r\n        name: kambiTransaction\r\n        in: body\r\n        required: true\r\n        description: A JSON value representing a kambi transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.\r\n        schema:\r\n          type: string\r\n          example:\r\n            {\r\n              foo*: whatever,\r\n              bar: whatever2\r\n            }\r\n\r\nAnd finally, this is what swagger is showing:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nFinally, the dependencies used in build.gradle are the following ones:\r\n\r\n    compile group: &#39;io.springfox&#39;, name: &#39;springfox-swagger2&#39;, version: &#39;2.7.0&#39;\r\n    compile group: &#39;io.springfox&#39;, name: &#39;springfox-swagger-ui&#39;, version: &#39;2.7.0&#39;\r\n\r\n**So, Question is:**\r\nDoes anybody know how I can set the description and an example of a body parameter using swagger annotations?\r\n\r\n***EDIT***\r\n\r\nI&#39;ve achieved to change the description using @ApiImplicitParam instead of @ApiParam, but example is still missing:\r\n\r\n    @ApiImplicitParams({\r\n        @ApiImplicitParam(\r\n            name = &quot;kambiTransaction&quot;,\r\n            value = &quot;A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with * means that they are required. See the schema of KambiTransaction for more information.&quot;,\r\n            required = true,\r\n            dataType = &quot;String&quot;,\r\n            paramType = &quot;body&quot;,\r\n            examples = @Example(value = {@ExampleProperty(mediaType = &quot;application/json&quot;, value = &quot;{foo: whatever, bar: whatever2}&quot;)}))})\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uw5ZU.png","title":"How can I set a description and an example in Swagger with Swagger annotations?","body":"<p>I am creating a REST Api using Spring boot, and auto generating the swagger documentation in controllers using swagger codegen. However, I am not able to set a description and example for a parameter of type String in a POST request. Here is mi code:</p>\n\n<pre><code>import io.swagger.annotations.*;\n\n@Api(value = \"transaction\", tags = {\"transaction\"})\n@FunctionalInterface\npublic interface ITransactionsApi {\n    @ApiOperation(value = \"Places a new transaction on the system.\", notes = \"Creates a new transaction in the system. See the schema of the Transaction parameter for more information \", tags={ \"transaction\", })\n    @ApiResponses(value = {\n        @ApiResponse(code = 200, message = \"Another transaction with the same messageId already exists in the system. No transaction was created.\"),\n        @ApiResponse(code = 201, message = \"The transaction has been correctly created in the system\"),\n        @ApiResponse(code = 400, message = \"The transaction schema is invalid and therefore the transaction has not been created.\", response = String.class),\n        @ApiResponse(code = 415, message = \"The content type is unsupported\"),\n        @ApiResponse(code = 500, message = \"An unexpected error has occurred. The error has been logged and is being investigated.\") })\n\n    @RequestMapping(value = \"/transaction\",\n        produces = { \"text/plain\" },\n        consumes = { \"application/json\" },\n        method = RequestMethod.POST)\n    ResponseEntity&lt;Void&gt; createTransaction(\n        @ApiParam(\n            value = \"A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.\" ,\n            example = \"{foo: whatever, bar: whatever2}\")\n        @Valid @RequestBody String kambiTransaction) throws InvalidTransactionException;\n}\n</code></pre>\n\n<p><strong>The example property of the @ApiParam has been manually inserted by me, because the codegen was ignoring that part of the yaml (That is another question: why is the editor ignoring the example part?).</strong> Here is part of the yaml:</p>\n\n<pre><code>paths:\n  /transaction:\n    post:\n      tags:\n        - transaction\n      summary: Place a new transaction on the system.\n      description: &gt;\n        Creates a new transaction in the system. See the schema of the Transaction parameter\n        for more information\n      operationId: createTransaction\n      parameters:\n        - $ref: '#/parameters/transaction'\n      consumes:\n        - application/json\n      produces:\n        - text/plain\n      responses:\n        '200':\n          description: Another transaction with the same messageId already exists in the system. No transaction was created.\n        '201':\n          description: The transaction has been correctly created in the system\n        '400':\n          description: The transaction schema is invalid and therefore the transaction has not been created.\n          schema:\n            type: string\n            description: error message explaining why the request is a bad request.\n        '415':\n          description: The content type is unsupported\n        '500':\n          $ref: '#/responses/Standard500ErrorResponse'\n\nparameters:\n  transaction:\n    name: kambiTransaction\n    in: body\n    required: true\n    description: A JSON value representing a kambi transaction. An example of the expected schema can be found down here. The fields marked with an * means that they are required.\n    schema:\n      type: string\n      example:\n        {\n          foo*: whatever,\n          bar: whatever2\n        }\n</code></pre>\n\n<p>And finally, this is what swagger is showing:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uw5ZU.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/uw5ZU.png\" alt=\"enter image description here\"></a></p>\n\n<p>Finally, the dependencies used in build.gradle are the following ones:</p>\n\n<pre><code>compile group: 'io.springfox', name: 'springfox-swagger2', version: '2.7.0'\ncompile group: 'io.springfox', name: 'springfox-swagger-ui', version: '2.7.0'\n</code></pre>\n\n<p><strong>So, Question is:</strong>\nDoes anybody know how I can set the description and an example of a body parameter using swagger annotations?</p>\n\n<p><strong><em>EDIT</em></strong></p>\n\n<p>I've achieved to change the description using @ApiImplicitParam instead of @ApiParam, but example is still missing:</p>\n\n<pre><code>@ApiImplicitParams({\n    @ApiImplicitParam(\n        name = \"kambiTransaction\",\n        value = \"A JSON value representing a transaction. An example of the expected schema can be found down here. The fields marked with * means that they are required. See the schema of KambiTransaction for more information.\",\n        required = true,\n        dataType = \"String\",\n        paramType = \"body\",\n        examples = @Example(value = {@ExampleProperty(mediaType = \"application/json\", value = \"{foo: whatever, bar: whatever2}\")}))})\n</code></pre>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":6,"creation_date":1696404194,"post_id":77227504,"comment_id":136146699,"body_markdown":"Stop using outdated classes like`SimpleDateFormat` and `java.util.Date` move over to the more modern `java.time` API","body":"Stop using outdated classes like<code>SimpleDateFormat</code> and <code>java.util.Date</code> move over to the more modern <code>java.time</code> API"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1696404208,"post_id":77227504,"comment_id":136146702,"body_markdown":"Please add the stacktrace","body":"Please add the stacktrace"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1696404395,"post_id":77227504,"comment_id":136146742,"body_markdown":"In general you should avoid using timezone abbreviations (like CEST).  They are often ambiguous.   For example, CST can mean 3 different timezones.  See https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations","body":"In general you should avoid using timezone abbreviations (like CEST).  They are often ambiguous.   For example, CST can mean 3 different timezones.  See <a href=\"https://en.wikipedia.org/wiki/List_of_time_zone_abbreviations\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/List_of_time_zone_abbreviations</a>"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1696406232,"post_id":77227504,"comment_id":136147090,"body_markdown":"That string is the output from the `toString` method of the outdated `java.util.Date`  class. If you can get hold of the original `Date` object, convert with `yourDateObject.toInstant()` and make any further conversions from there, and you need no parsing. If you can get only the string, use [the good answer by deHaar](https://stackoverflow.com/a/77227619/5772882). This question has been asked before. I will search for an original and close this question once I find one.","body":"That string is the output from the <code>toString</code> method of the outdated <code>java.util.Date</code>  class. If you can get hold of the original <code>Date</code> object, convert with <code>yourDateObject.toInstant()</code> and make any further conversions from there, and you need no parsing. If you can get only the string, use <a href=\"https://stackoverflow.com/a/77227619/5772882\">the good answer by deHaar</a>. This question has been asked before. I will search for an original and close this question once I find one."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1696412290,"post_id":77227504,"comment_id":136148329,"body_markdown":"Nitpickng, from @StephenC’s link: *&quot;CST&quot; can mean China Standard Time (UTC+8), Cuba Standard Time (UTC−5), and (North American) Central Standard Time (UTC−6), and it is also a widely used variant of ACST (Australian Central Standard Time, UTC+9:30).* I count 4 in the quote.","body":"Nitpickng, from @StephenC’s link: <i>&quot;CST&quot; can mean China Standard Time (UTC+8), Cuba Standard Time (UTC−5), and (North American) Central Standard Time (UTC−6), and it is also a widely used variant of ACST (Australian Central Standard Time, UTC+9:30).</i> I count 4 in the quote."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1696415013,"post_id":77227504,"comment_id":136149012,"body_markdown":"@OleV.V. -  I live in Australia and I used to live in that timezone ... and CST is &gt;not&lt; commonly used in Australia.  Certainly, not these days.","body":"@OleV.V. -  I live in Australia and I used to live in that timezone ... and CST is &gt;not&lt; commonly used in Australia.  Certainly, not these days."}],"answers":[{"tags":[],"owner":{"account_id":29120678,"reputation":301,"user_id":22308196,"display_name":"Beulah Evanjalin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696404069,"creation_date":1696404069,"answer_id":77227543,"question_id":77227504,"body_markdown":"Assuming the format &quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, I  have tried the following and it works!\r\n\r\n```\r\nString dateString = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\r\nSimpleDateFormat formatter = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;);\r\nformatter.parse(dateString);\r\n```","title":"How to convert string in format &quot;Wed Oct 11 08:27:33 CEST 2023&quot; to date in Java","body":"<p>Assuming the format &quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;, I  have tried the following and it works!</p>\n<pre><code>String dateString = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\nSimpleDateFormat formatter = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss zzz yyyy&quot;);\nformatter.parse(dateString);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1696405189,"creation_date":1696404832,"answer_id":77227619,"question_id":77227504,"body_markdown":"If you are not forced to deal with large amounts of legacy code that makes heavy use of `java.util.Date` and you are using a Java version of 8 or higher, you are best adviced to use `java.time`, even if the desired result must be a `java.util.Date`.\r\n\r\nHere&#39;s an example that uses `java.time` and produces a `java.util.Date`:\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// example input\r\n\tString input = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\r\n\t// define a formatter for the input including a locale\r\n\tDateTimeFormatter dtf = DateTimeFormatter.ofPattern(\r\n\t\t\t\t\t\t\t\t&quot;EEE MMM dd HH:mm:ss z uuuu&quot;,\r\n\t\t\t\t\t\t\t\tLocale.ENGLISH\r\n\t\t\t\t\t\t\t);\r\n\t// parse the input using the formatter\r\n\tZonedDateTime zdt = ZonedDateTime.parse(input, dtf);\r\n\t// print it\r\n\tSystem.out.println(ZonedDateTime.parse(input, dtf));\r\n\t// convert it to a java.util.Date\r\n\tDate date = Date.from(zdt.toInstant());\r\n\t// print the Date, too\r\n\tSystem.out.println(date);\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\n2023-10-11T08:27:33+02:00[Europe/Paris]\r\nWed Oct 11 08:27:33 CEST 2023\r\n```\r\n\r\n---\r\n\r\nIf you have to use `java.util` and `java.text` for this task, then use a `z` in order to parse the time zone name (`CEST` for *Central European Summer Time*) and better add a `Locale.ENGLISH`):\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// example input\r\n\tString input = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\r\n\t// create a matching parser\r\n\tSimpleDateFormat sdf = new SimpleDateFormat(\r\n\t\t\t\t\t\t\t\t&quot;EEE MMM dd HH:mm:ss z yyyy&quot;,\r\n\t\t\t\t\t\t\t\tLocale.ENGLISH\r\n\t\t\t\t\t\t\t);\r\n\t// parse the String\r\n\tDate date = sdf.parse(input);\r\n\t// print the Date\r\n\tSystem.out.println(date);\r\n}\r\n```\r\nOutput:\r\n```none\r\nWed Oct 11 08:27:33 CEST 2023\r\n```","title":"How to convert string in format &quot;Wed Oct 11 08:27:33 CEST 2023&quot; to date in Java","body":"<p>If you are not forced to deal with large amounts of legacy code that makes heavy use of <code>java.util.Date</code> and you are using a Java version of 8 or higher, you are best adviced to use <code>java.time</code>, even if the desired result must be a <code>java.util.Date</code>.</p>\n<p>Here's an example that uses <code>java.time</code> and produces a <code>java.util.Date</code>:</p>\n<pre><code>public static void main(String[] args) {\n    // example input\n    String input = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\n    // define a formatter for the input including a locale\n    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(\n                                &quot;EEE MMM dd HH:mm:ss z uuuu&quot;,\n                                Locale.ENGLISH\n                            );\n    // parse the input using the formatter\n    ZonedDateTime zdt = ZonedDateTime.parse(input, dtf);\n    // print it\n    System.out.println(ZonedDateTime.parse(input, dtf));\n    // convert it to a java.util.Date\n    Date date = Date.from(zdt.toInstant());\n    // print the Date, too\n    System.out.println(date);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2023-10-11T08:27:33+02:00[Europe/Paris]\nWed Oct 11 08:27:33 CEST 2023\n</code></pre>\n<hr />\n<p>If you have to use <code>java.util</code> and <code>java.text</code> for this task, then use a <code>z</code> in order to parse the time zone name (<code>CEST</code> for <em>Central European Summer Time</em>) and better add a <code>Locale.ENGLISH</code>):</p>\n<pre><code>public static void main(String[] args) {\n    // example input\n    String input = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\n    // create a matching parser\n    SimpleDateFormat sdf = new SimpleDateFormat(\n                                &quot;EEE MMM dd HH:mm:ss z yyyy&quot;,\n                                Locale.ENGLISH\n                            );\n    // parse the String\n    Date date = sdf.parse(input);\n    // print the Date\n    System.out.println(date);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Wed Oct 11 08:27:33 CEST 2023\n</code></pre>\n"}],"owner":{"account_id":29594148,"reputation":11,"user_id":22680996,"display_name":"Ajeet Kumar"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1696519885,"answer_count":2,"score":0,"last_activity_date":1696590950,"creation_date":1696403610,"question_id":77227504,"body_markdown":"I need to convert `String` which is in format `&quot;Wed Oct 11 08:27:33 CEST 2023&quot;` to date in Java.\r\n\r\nI tried to use below but it is throwing parsing error.\r\n\r\n```Java\r\nString dateString = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\r\nSimpleDateFormat formatter = new SimpleDateFormat(&quot;E MMM dd HH:mm:ss XXX yyyy&quot;);\r\nformatter.parse(dateString);\r\n```\r\nFrankly speaking, I am not sure how to handle `&quot;CEST&quot;` part\r\n","title":"How to convert string in format &quot;Wed Oct 11 08:27:33 CEST 2023&quot; to date in Java","body":"<p>I need to convert <code>String</code> which is in format <code>&quot;Wed Oct 11 08:27:33 CEST 2023&quot;</code> to date in Java.</p>\n<p>I tried to use below but it is throwing parsing error.</p>\n<pre><code>String dateString = &quot;Wed Oct 11 08:27:33 CEST 2023&quot;;\nSimpleDateFormat formatter = new SimpleDateFormat(&quot;E MMM dd HH:mm:ss XXX yyyy&quot;);\nformatter.parse(dateString);\n</code></pre>\n<p>Frankly speaking, I am not sure how to handle <code>&quot;CEST&quot;</code> part</p>\n"},{"tags":["java","string","recursion","dynamic-programming"],"comments":[{"owner":{"account_id":26377,"reputation":352187,"user_id":68587,"accept_rate":95,"display_name":"John Kugelman"},"score":0,"creation_date":1429401894,"post_id":29724231,"comment_id":47582784,"body_markdown":"Can you show your recursive attempt? You really, really need to use recursion on this problem. A non-recursive solution like what you posted is just not going to work.","body":"Can you show your recursive attempt? You really, really need to use recursion on this problem. A non-recursive solution like what you posted is just not going to work."},{"owner":{"account_id":5550028,"reputation":805,"user_id":4403456,"accept_rate":29,"display_name":"Boris"},"score":0,"creation_date":1429401972,"post_id":29724231,"comment_id":47582797,"body_markdown":"@JohnKugelman  my recursive attempts were really awful since I can&#39;t understand how to properly solve this question with recursion. I just need to understand the basics on how to approach these types of problems.","body":"@JohnKugelman  my recursive attempts were really awful since I can&#39;t understand how to properly solve this question with recursion. I just need to understand the basics on how to approach these types of problems."}],"answers":[{"tags":[],"owner":{"account_id":3206885,"reputation":44070,"user_id":2707792,"accept_rate":100,"display_name":"Andrey Tyukin"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1696590859,"creation_date":1429402457,"answer_id":29724347,"question_id":29724231,"body_markdown":"1) Name your methods properly, &quot;WAYS&quot; is a constant name, not a method name.\r\n\r\n2) Provide runnable code, especially in cases where it&#39;s so short.\r\n\r\n3) Never use Exceptions for control flow. _(*Never say never; But unless you&#39;re actually designing some weird control flow primitives, like support for non-local returns: don&#39;t use Exceptions for control flow)_\r\n\r\n4) You are using magic values like &quot;uug&quot; and &quot;ook&quot; in your code? Does this look simple and obvious? Does this look maintainable? What is this supposed to look like if you get a lexicon with a million of different words?\r\n\r\nEdit: giving the complete listing is somehow boring, so I left a few gaps. Try to fill those, hope that helps.\r\n\r\n    public class JammedWords {\r\n      public static int ways(String sentence, String[] words) {\r\n        if (sentence.isEmpty()) {\r\n          // The trivial case: the sentence is empty. Return a single number.\r\n        } else {\r\n          int c = 0;\r\n          for (String w: words) {\r\n            if (sentence.startsWith(w)) {\r\n              // call method recursively, update counter `c`.\r\n            }\r\n          }\r\n          return c;\r\n        }\r\n      }\r\n      public static void main(String[] args) {\r\n        System.out.println(ways(&quot;ookookook&quot;, new String[]{&quot;ook&quot;, &quot;ookook&quot;}));\r\n        System.out.println(ways(&quot;oogamookoogumook&quot;, new String[]{&quot;ooga&quot;,&quot;oogam&quot;,&quot;oogum&quot;,&quot;mook&quot;,&quot;ook&quot;}));\r\n      }\r\n    }\r\n\r\nHints: \r\n\r\nA) Understand the difference between empty set, set containing the empty set, set containing a set containing an empty set etc. Sets that contain empty sets are of course not empty, and their size is not 0.\r\n\r\nB) There is a handy method String.substring(n) that drops everything before the &#39;n&#39;-th character. And there is String.length() to get size of words.","title":"Recursion? Combinations in a String","body":"<ol>\n<li><p>Name your methods properly, &quot;WAYS&quot; is a constant name, not a method name.</p>\n</li>\n<li><p>Provide runnable code, especially in cases where it's so short.</p>\n</li>\n<li><p>Never use Exceptions for control flow. <em>(*Never say never; But unless you're actually designing some weird control flow primitives, like support for non-local returns: don't use Exceptions for control flow)</em></p>\n</li>\n<li><p>You are using magic values like &quot;uug&quot; and &quot;ook&quot; in your code? Does this look simple and obvious? Does this look maintainable? What is this supposed to look like if you get a lexicon with a million of different words?</p>\n</li>\n</ol>\n<p>Edit: giving the complete listing is somehow boring, so I left a few gaps. Try to fill those, hope that helps.</p>\n<pre><code>public class JammedWords {\n  public static int ways(String sentence, String[] words) {\n    if (sentence.isEmpty()) {\n      // The trivial case: the sentence is empty. Return a single number.\n    } else {\n      int c = 0;\n      for (String w: words) {\n        if (sentence.startsWith(w)) {\n          // call method recursively, update counter `c`.\n        }\n      }\n      return c;\n    }\n  }\n  public static void main(String[] args) {\n    System.out.println(ways(&quot;ookookook&quot;, new String[]{&quot;ook&quot;, &quot;ookook&quot;}));\n    System.out.println(ways(&quot;oogamookoogumook&quot;, new String[]{&quot;ooga&quot;,&quot;oogam&quot;,&quot;oogum&quot;,&quot;mook&quot;,&quot;ook&quot;}));\n  }\n}\n</code></pre>\n<p>Hints:</p>\n<p>A) Understand the difference between empty set, set containing the empty set, set containing a set containing an empty set etc. Sets that contain empty sets are of course not empty, and their size is not 0.</p>\n<p>B) There is a handy method String.substring(n) that drops everything before the 'n'-th character. And there is String.length() to get size of words.</p>\n"},{"tags":[],"owner":{"account_id":4894353,"reputation":593,"user_id":3944480,"accept_rate":89,"display_name":"L D"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429405087,"creation_date":1429405087,"answer_id":29724634,"question_id":29724231,"body_markdown":"Hope VB.NET code won&#39;t mind, just for the grasp.\r\n\r\n    Private Sub Go()\r\n        Dim words As New List(Of String)\r\n\r\n        words.Add(&quot;ooga&quot;)\r\n        words.Add(&quot;oogam&quot;)\r\n        words.Add(&quot;oogum&quot;)\r\n        words.Add(&quot;mook&quot;)\r\n        words.Add(&quot;ook&quot;)\r\n\r\n        Search(&quot;oogamookoogumook&quot;, words, &quot;&quot;, New List(Of String))\r\n    End Sub\r\n\r\n    Private Sub Search(ByVal sentence As String, _\r\n                            ByVal wordList As List(Of String), _\r\n                            ByVal actualSentenceBuildingState As String, _\r\n                            ByVal currentPath As List(Of String))\r\n\r\n        For Each word As String In wordList\r\n            Dim actualSentenceAttemp As String\r\n            Dim thisPath As New List(Of String)(currentPath)\r\n\r\n            thisPath.Add(word)\r\n            actualSentenceAttemp = actualSentenceBuildingState + word\r\n\r\n            If actualSentenceAttemp = sentence Then\r\n                Debug.Print(&quot;Found: &quot; + String.Join(&quot;-&gt;&quot;, thisPath.ToArray()))\r\n            End If\r\n\r\n            If actualSentenceAttemp.Length &lt; sentence.Length Then &#39;if we are not too far, we can continue\r\n                Search(sentence, wordList, actualSentenceAttemp, thisPath)\r\n            End If\r\n        Next\r\n    End Sub\r\n\r\nPrintouts:\r\n\r\n    Sentence: oogamookoogumook\r\n    Found: ooga-&gt;mook-&gt;oogum-&gt;ook\r\n    Found: oogam-&gt;ook-&gt;oogum-&gt;ook\r\n\r\n    Sentence: ookookook\r\n    Found: ook-&gt;ook-&gt;ook\r\n    Found: ook-&gt;ookook\r\n    Found: ookook-&gt;ook\r\n\r\nThink about it as walking in graph (its nothing else than that in fact). You start with nothing (empty string). Now you start to iteratively add words from wordlist into your &#39;current attemp for sentence&#39;. After adding word to current attemp, you can end only in three possible states: (1) you got the final sentence, (2) current attemp is shorter than target sentence and thus still suitable for adding next words (recursion call), or (3), your current attemp is longer (or the same length but not equal) than target sequence, thus it has no meaning to continue in search with it. \r\n\r\nWhat you have to remember is path -- &quot;how did i get here?&quot; list (back tracking).","title":"Recursion? Combinations in a String","body":"<p>Hope VB.NET code won't mind, just for the grasp.</p>\n\n<pre><code>Private Sub Go()\n    Dim words As New List(Of String)\n\n    words.Add(\"ooga\")\n    words.Add(\"oogam\")\n    words.Add(\"oogum\")\n    words.Add(\"mook\")\n    words.Add(\"ook\")\n\n    Search(\"oogamookoogumook\", words, \"\", New List(Of String))\nEnd Sub\n\nPrivate Sub Search(ByVal sentence As String, _\n                        ByVal wordList As List(Of String), _\n                        ByVal actualSentenceBuildingState As String, _\n                        ByVal currentPath As List(Of String))\n\n    For Each word As String In wordList\n        Dim actualSentenceAttemp As String\n        Dim thisPath As New List(Of String)(currentPath)\n\n        thisPath.Add(word)\n        actualSentenceAttemp = actualSentenceBuildingState + word\n\n        If actualSentenceAttemp = sentence Then\n            Debug.Print(\"Found: \" + String.Join(\"-&gt;\", thisPath.ToArray()))\n        End If\n\n        If actualSentenceAttemp.Length &lt; sentence.Length Then 'if we are not too far, we can continue\n            Search(sentence, wordList, actualSentenceAttemp, thisPath)\n        End If\n    Next\nEnd Sub\n</code></pre>\n\n<p>Printouts:</p>\n\n<pre><code>Sentence: oogamookoogumook\nFound: ooga-&gt;mook-&gt;oogum-&gt;ook\nFound: oogam-&gt;ook-&gt;oogum-&gt;ook\n\nSentence: ookookook\nFound: ook-&gt;ook-&gt;ook\nFound: ook-&gt;ookook\nFound: ookook-&gt;ook\n</code></pre>\n\n<p>Think about it as walking in graph (its nothing else than that in fact). You start with nothing (empty string). Now you start to iteratively add words from wordlist into your 'current attemp for sentence'. After adding word to current attemp, you can end only in three possible states: (1) you got the final sentence, (2) current attemp is shorter than target sentence and thus still suitable for adding next words (recursion call), or (3), your current attemp is longer (or the same length but not equal) than target sequence, thus it has no meaning to continue in search with it. </p>\n\n<p>What you have to remember is path -- \"how did i get here?\" list (back tracking).</p>\n"}],"owner":{"account_id":5550028,"reputation":805,"user_id":4403456,"accept_rate":29,"display_name":"Boris"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":622,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":29724347,"answer_count":2,"score":2,"last_activity_date":1696590859,"creation_date":1429401242,"question_id":29724231,"body_markdown":"I&#39;ve been dealing with the following recursion question for a while now and haven&#39;t been able to figure it out. Basically, you have some sort of a sentence  made out of certain words, where all the words are just jammed together, not spaced out. The idea is to find the number of all possible combinations of words that can be used to create the sentence.\r\n\r\nFor example,\r\n\r\n* Words:    ook, ookook\r\n* Sentence: ookookook\r\n* Solution: {ook, ook, ook}, {ookook, ook}, {ook, ookook}.\r\n\r\n\r\nAnother example:\r\n\r\n* Words:    ooga, oogam, oogum, mook, ook\r\n* Sentence: oogamookoogumook\r\n* Solution: {ooga, mook, oogum, ook}, {oogam, ook, oogum, ook}\r\n\r\nI&#39;ve tried a lot of things, finally giving up and trying to do it manually...\r\n\r\n    public static int WAYS(String word) {\r\n\t\tint ways = 1;\r\n\t\tfor (int i = 0; i &lt; word.length(); i++) {\r\n\t\t\ttry{\r\n\t\t\t\tif(word.substring(i, i - 2).equals(&quot;ug&quot;)){\r\n\t\t\t\t\tif(word.substring(i - 4, i - 2).equals(&quot;ug&quot;)){\r\n\t\t\t\t\t\tways++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(word.substring(i, i - 3).contains(&quot;ook&quot;)){\r\n\t\t\t\t\tSystem.out.println(word.substring(i-6, i-3));\r\n\t\t\t\t\tif(word.substring(i - 6, i - 3).equals(&quot;ook&quot;)){\r\n\t\t\t\t\t\tways++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(word.charAt(i - 4) == &#39;m&#39;){\r\n\t\t\t\t\t\tif(word.substring(i - 8, i - 4).equals(&quot;ooga&quot;) || word.substring(i - 8, i - 4).equals(&quot;oogu&quot;)){\r\n\t\t\t\t\t\t\tways++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if(word.substring(i, i - 4).contains(&quot;mook&quot;)){\r\n\t\t\t\t\tif(word.substring(i - 8, i - 4).contains(&quot;mook&quot;)){\r\n\t\t\t\t\t\tways++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(word.substring(i, i - 2).equals(&quot;oog&quot;)){\r\n\t\t\t\t\tif(word.charAt(i + 2) == &#39;m&#39;){\r\n\t\t\t\t\t\tif(word.charAt(i + 1) == &#39;a&#39; || word.charAt(i + 1) == &#39;u&#39;){\r\n\t\t\t\t\t\t\tways++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} catch(Exception e){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn ways;\r\n\t}\r\n\r\nBut it hasn&#39;t worked. Could somebody please give me an idea or a sample on approaching this problem using recursion?","title":"Recursion? Combinations in a String","body":"<p>I've been dealing with the following recursion question for a while now and haven't been able to figure it out. Basically, you have some sort of a sentence  made out of certain words, where all the words are just jammed together, not spaced out. The idea is to find the number of all possible combinations of words that can be used to create the sentence.</p>\n\n<p>For example,</p>\n\n<ul>\n<li>Words:    ook, ookook</li>\n<li>Sentence: ookookook</li>\n<li>Solution: {ook, ook, ook}, {ookook, ook}, {ook, ookook}.</li>\n</ul>\n\n<p>Another example:</p>\n\n<ul>\n<li>Words:    ooga, oogam, oogum, mook, ook</li>\n<li>Sentence: oogamookoogumook</li>\n<li>Solution: {ooga, mook, oogum, ook}, {oogam, ook, oogum, ook}</li>\n</ul>\n\n<p>I've tried a lot of things, finally giving up and trying to do it manually...</p>\n\n<pre><code>public static int WAYS(String word) {\n    int ways = 1;\n    for (int i = 0; i &lt; word.length(); i++) {\n        try{\n            if(word.substring(i, i - 2).equals(\"ug\")){\n                if(word.substring(i - 4, i - 2).equals(\"ug\")){\n                    ways++;\n                }\n            }\n            else if(word.substring(i, i - 3).contains(\"ook\")){\n                System.out.println(word.substring(i-6, i-3));\n                if(word.substring(i - 6, i - 3).equals(\"ook\")){\n                    ways++;\n                }\n                if(word.charAt(i - 4) == 'm'){\n                    if(word.substring(i - 8, i - 4).equals(\"ooga\") || word.substring(i - 8, i - 4).equals(\"oogu\")){\n                        ways++;\n                    }\n                }\n            }\n            else if(word.substring(i, i - 4).contains(\"mook\")){\n                if(word.substring(i - 8, i - 4).contains(\"mook\")){\n                    ways++;\n                }\n            }\n            if(word.substring(i, i - 2).equals(\"oog\")){\n                if(word.charAt(i + 2) == 'm'){\n                    if(word.charAt(i + 1) == 'a' || word.charAt(i + 1) == 'u'){\n                        ways++;\n                    }\n                }\n            }\n        } catch(Exception e){\n            continue;\n        }\n    }\n    return ways;\n}\n</code></pre>\n\n<p>But it hasn't worked. Could somebody please give me an idea or a sample on approaching this problem using recursion?</p>\n"},{"tags":["java","unit-testing","mocking","mockito"],"answers":[{"tags":[],"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696554119,"creation_date":1696554119,"answer_id":77241340,"question_id":77241279,"body_markdown":"The default return value for all methods on a mock is null (or the equivalent default values for primitive types). If you want `m2()` to return a value you will need to stub the call:\r\n```\r\nwhen(c2.m2()).thenReturn(&quot;world&quot;);\r\n```\r\nThis is because the mock has *no implementation* for `m2` other than returning `null`.\r\n\r\nOf course in a real test you would never call a method on a mock directly.","title":"Mockito doesn&#39;t intercept indirect method call?","body":"<p>The default return value for all methods on a mock is null (or the equivalent default values for primitive types). If you want <code>m2()</code> to return a value you will need to stub the call:</p>\n<pre><code>when(c2.m2()).thenReturn(&quot;world&quot;);\n</code></pre>\n<p>This is because the mock has <em>no implementation</em> for <code>m2</code> other than returning <code>null</code>.</p>\n<p>Of course in a real test you would never call a method on a mock directly.</p>\n"},{"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696556165,"creation_date":1696556165,"answer_id":77241416,"question_id":77241279,"body_markdown":"This is because it is a mocked class. You need to understand mock work as if it extending the class with overriding all methods. In youe case when you don&#39;t set behavior for mock methods it will return null by default. \r\n\r\nEither mock the behavior of m2 method \r\n\r\n    when(c2.m2()).thenReturn(&quot;world&quot;)\r\n\r\nor\r\n\r\n     when(c2.m2()).thenCallRealMethod()","title":"Mockito doesn&#39;t intercept indirect method call?","body":"<p>This is because it is a mocked class. You need to understand mock work as if it extending the class with overriding all methods. In youe case when you don't set behavior for mock methods it will return null by default.</p>\n<p>Either mock the behavior of m2 method</p>\n<pre><code>when(c2.m2()).thenReturn(&quot;world&quot;)\n</code></pre>\n<p>or</p>\n<pre><code> when(c2.m2()).thenCallRealMethod()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27529235,"reputation":437,"user_id":21008053,"display_name":"subasri_"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696590624,"creation_date":1696556485,"answer_id":77241429,"question_id":77241279,"body_markdown":"Your object `c2` is mocked, actual invocation of the method `m2()` will not happen. Hence `null` is returned.\r\n\r\nYou will have to spy the class for your expected output. Spy does partial mocking. It invokes the actual methods while it still can be verified and stubbed.\r\n\r\n```\r\nC2 c2 = spy(new C2());\r\nMockito.doReturn(“world”).when(c2).m1();\r\nSystem.out.println(c2.m2()); // this will return &quot;world&quot; as you expect\r\n```\r\n\r\n","title":"Mockito doesn&#39;t intercept indirect method call?","body":"<p>Your object <code>c2</code> is mocked, actual invocation of the method <code>m2()</code> will not happen. Hence <code>null</code> is returned.</p>\n<p>You will have to spy the class for your expected output. Spy does partial mocking. It invokes the actual methods while it still can be verified and stubbed.</p>\n<pre><code>C2 c2 = spy(new C2());\nMockito.doReturn(“world”).when(c2).m1();\nSystem.out.println(c2.m2()); // this will return &quot;world&quot; as you expect\n</code></pre>\n"}],"owner":{"account_id":9074826,"reputation":707,"user_id":6756794,"accept_rate":25,"display_name":"zanyman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1696590624,"creation_date":1696552369,"question_id":77241279,"body_markdown":"I have the following code snippet to simply represent the issue:\r\n```\r\npublic class C2 {\r\n    public String m1() {\r\n        return &quot;hello&quot;;\r\n    }\r\n\r\n    public String m2() {\r\n        return this.m1();\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        C2 c2 = mock(C2.class);\r\n        Mockito.when(c2.m1()).thenReturn(&quot;world&quot;);\r\n        System.out.println(c2.m2()); -- mockito returned null instead of &quot;world&quot;\r\n```\r\n\r\nWhat I expect mockito to return is &quot;world&quot; instead of null. Is it I&#39;m wrongly using the mockito API? if so, what&#39;s the correct way to achieve what I expect?\r\n","title":"Mockito doesn&#39;t intercept indirect method call?","body":"<p>I have the following code snippet to simply represent the issue:</p>\n<pre><code>public class C2 {\n    public String m1() {\n        return &quot;hello&quot;;\n    }\n\n    public String m2() {\n        return this.m1();\n    }\n\n    public static void main(String[] args) {\n        C2 c2 = mock(C2.class);\n        Mockito.when(c2.m1()).thenReturn(&quot;world&quot;);\n        System.out.println(c2.m2()); -- mockito returned null instead of &quot;world&quot;\n</code></pre>\n<p>What I expect mockito to return is &quot;world&quot; instead of null. Is it I'm wrongly using the mockito API? if so, what's the correct way to achieve what I expect?</p>\n"},{"tags":["java","android","backgroundworker","android-workmanager","periodic-task"],"owner":{"account_id":6989591,"reputation":3250,"user_id":5359340,"display_name":"FGH"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1696634602,"answer_count":0,"score":0,"last_activity_date":1696590543,"creation_date":1696590543,"question_id":77243968,"body_markdown":"I created a sample Android application to send requests every 12 hours, I used worker class to achieve this, and I implemented like below, for testing purposes I have  changed the time to 6 Sec, but it&#39;s not changing every 6 seconds, what went wrong here, Thanks in Advance\r\n\r\n&gt; MyWorker.class\r\n\r\n    public class MyWorker extends Worker {\r\n        private static final String TAG = &quot;MyWorker&quot;;\r\n        public MyWorker(@NonNull Context context, @NonNull WorkerParameters params) {\r\n            super(context, params);\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public Result doWork() {\r\n            Log.d(TAG, &quot;doWork: now.... doing it&quot;);\r\n            sendRequest();\r\n            // Do your background work here\r\n            // This is where you&#39;ll put the code you want to run periodically\r\n            return Result.success(); // Indicate success\r\n        }\r\n    \r\n        private void sendRequest() {\r\n            //send\r\n        }\r\n    }\r\n\r\n&gt; in the MainActivity.class inside the onCreate method\r\n\r\n       private void doWork() {\r\n    //        Constraints constraints = new Constraints.Builder()\r\n    //                .setRequiredNetworkType(NetworkType.CONNECTED)\r\n    //                .build();\r\n    \r\n            Constraints constraints = new Constraints.Builder()\r\n                    .setRequiredNetworkType(NetworkType.UNMETERED) // This allows work to run on unmetered networks (Wi-Fi)\r\n                    .build();\r\n    \r\n    //        PeriodicWorkRequest periodicWorkRequest =\r\n    //                new PeriodicWorkRequest.Builder(MyWorker.class, 12, TimeUnit.HOURS)\r\n    //                        .setConstraints(constraints)\r\n    //                        .build();\r\n    \r\n            PeriodicWorkRequest periodicWorkRequest =\r\n                    new PeriodicWorkRequest.Builder(MyWorker.class, 6, TimeUnit.SECONDS)\r\n                            .setConstraints(constraints)\r\n                            .build();\r\n    \r\n            WorkManager.getInstance(this).enqueue(periodicWorkRequest);\r\n        }\r\n\r\n&gt; Manifest inside the application tag\r\n\r\n  \r\n\r\n               &lt;service\r\n                android:name=&quot;.MyWorker&quot;\r\n                android:exported=&quot;false&quot;\r\n                android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot; /&gt;\r\n\r\n\r\nThanks in Advance,\r\n\r\n","title":"in Android, Periodic work only runs one time and stops after quitting the app","body":"<p>I created a sample Android application to send requests every 12 hours, I used worker class to achieve this, and I implemented like below, for testing purposes I have  changed the time to 6 Sec, but it's not changing every 6 seconds, what went wrong here, Thanks in Advance</p>\n<blockquote>\n<p>MyWorker.class</p>\n</blockquote>\n<pre><code>public class MyWorker extends Worker {\n    private static final String TAG = &quot;MyWorker&quot;;\n    public MyWorker(@NonNull Context context, @NonNull WorkerParameters params) {\n        super(context, params);\n    }\n\n    @NonNull\n    @Override\n    public Result doWork() {\n        Log.d(TAG, &quot;doWork: now.... doing it&quot;);\n        sendRequest();\n        // Do your background work here\n        // This is where you'll put the code you want to run periodically\n        return Result.success(); // Indicate success\n    }\n\n    private void sendRequest() {\n        //send\n    }\n}\n</code></pre>\n<blockquote>\n<p>in the MainActivity.class inside the onCreate method</p>\n</blockquote>\n<pre><code>   private void doWork() {\n//        Constraints constraints = new Constraints.Builder()\n//                .setRequiredNetworkType(NetworkType.CONNECTED)\n//                .build();\n\n        Constraints constraints = new Constraints.Builder()\n                .setRequiredNetworkType(NetworkType.UNMETERED) // This allows work to run on unmetered networks (Wi-Fi)\n                .build();\n\n//        PeriodicWorkRequest periodicWorkRequest =\n//                new PeriodicWorkRequest.Builder(MyWorker.class, 12, TimeUnit.HOURS)\n//                        .setConstraints(constraints)\n//                        .build();\n\n        PeriodicWorkRequest periodicWorkRequest =\n                new PeriodicWorkRequest.Builder(MyWorker.class, 6, TimeUnit.SECONDS)\n                        .setConstraints(constraints)\n                        .build();\n\n        WorkManager.getInstance(this).enqueue(periodicWorkRequest);\n    }\n</code></pre>\n<blockquote>\n<p>Manifest inside the application tag</p>\n</blockquote>\n<pre><code>           &lt;service\n            android:name=&quot;.MyWorker&quot;\n            android:exported=&quot;false&quot;\n            android:permission=&quot;android.permission.BIND_JOB_SERVICE&quot; /&gt;\n</code></pre>\n<p>Thanks in Advance,</p>\n"},{"tags":["java","junit","mockito"],"answers":[{"tags":[],"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1528101227,"creation_date":1528101227,"answer_id":50676394,"question_id":50652516,"body_markdown":"your problem here is that you are calling `when` with something that isn&#39;t a mock. You are passing it an `Optional`. \r\n\r\nIf I understand what you are trying to do here, the clientHelper is passed to the object with the `doSomething` method and you want to mock it for testing purposes. If that&#39;s the case it&#39;d more typically look like this:\r\n\r\n    interface ClientHelper {\r\n        Client get(String place) throws Ex;\r\n    }\r\n\r\n    class ClassUnderTest {\r\n        private final ClientHelper clientHelper;\r\n\r\n        public ClassUnderTest(ClientHelper helper) {\r\n            this.clientHelper = helper;\r\n        }\r\n\r\n        public Optional&lt;String&gt; doSomething(String place) {\r\n            try {\r\n                return Optional.ofNullable(clientHelper.get(place).getPlaceDetails(place));\r\n            } catch (Ex ex) {\r\n                log.warn(&quot;Exception: &quot; + ex);\r\n                return Optional.empty();\r\n            }\r\n        }\r\n    }\r\n\r\n    @Test\r\n    void testFullHelper() {\r\n        Client client = mock(Client.class);\r\n        when(client.getPlaceDetails(&quot;IN&quot;)).thenReturn(&quot;Details&quot;);\r\n        ClientHelper helper = mock(ClientHelper.class);\r\n        when(helper.get(&quot;IN&quot;)).thenReturn(client);\r\n        ClassUnderTest obj = new ClassUnderTest(helper);\r\n        assertEquals(&quot;Details&quot;, obj.doSomething(&quot;IN&quot;));\r\n    }\r\n        ","title":"Unit test java Optional with mockito","body":"<p>your problem here is that you are calling <code>when</code> with something that isn't a mock. You are passing it an <code>Optional</code>. </p>\n\n<p>If I understand what you are trying to do here, the clientHelper is passed to the object with the <code>doSomething</code> method and you want to mock it for testing purposes. If that's the case it'd more typically look like this:</p>\n\n<pre><code>interface ClientHelper {\n    Client get(String place) throws Ex;\n}\n\nclass ClassUnderTest {\n    private final ClientHelper clientHelper;\n\n    public ClassUnderTest(ClientHelper helper) {\n        this.clientHelper = helper;\n    }\n\n    public Optional&lt;String&gt; doSomething(String place) {\n        try {\n            return Optional.ofNullable(clientHelper.get(place).getPlaceDetails(place));\n        } catch (Ex ex) {\n            log.warn(\"Exception: \" + ex);\n            return Optional.empty();\n        }\n    }\n}\n\n@Test\nvoid testFullHelper() {\n    Client client = mock(Client.class);\n    when(client.getPlaceDetails(\"IN\")).thenReturn(\"Details\");\n    ClientHelper helper = mock(ClientHelper.class);\n    when(helper.get(\"IN\")).thenReturn(client);\n    ClassUnderTest obj = new ClassUnderTest(helper);\n    assertEquals(\"Details\", obj.doSomething(\"IN\"));\n}\n</code></pre>\n"}],"owner":{"account_id":2861608,"reputation":85,"user_id":2456752,"accept_rate":0,"display_name":"user2456752"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11603,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696590350,"creation_date":1527900004,"question_id":50652516,"body_markdown":"I want to test a method which returns an Optional client in it.\r\n\r\nI want to test the scenario when client is empty.This is not a working code but overall it looks like this\r\n\r\n    public Optional&lt;String&gt; doSomething(String place) {\r\n        Optional&lt;Client&gt; client = Optional.empty();\r\n        try {\r\n            client = Optional.ofNullable(clientHelper.get(place));\r\n        } catch (Ex ex) {\r\n            log.warn(&quot;Exception occured:&quot;, ex);\r\n        }\r\n        return client.isPresent() ? Optional.ofNullable(client.get().getPlaceDetails(place)) : Optional.empty();\r\n    }\r\n\r\nI have a helper class clientHelper which returns a client based on place if exists, if not it throws exception.\r\nFor test, this is what I came up with\r\n\r\n      @Test\r\n    public void testClientHelper(){\r\n        ClientHelper clientHelper =  Mockito.mock(ClientHelper.class);\r\n        Optional&lt;Client&gt; client = Optional.empty();\r\n        Mockito.when(Optional.ofNullable(clientHelper.get(&quot;IN&quot;))).thenReturn(client);\r\n        assertEquals( doSomething(&quot;IN&quot;), Optional.empty())\r\n    }\r\n\r\n\r\nBut it returns exception - \r\n\r\n    org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \r\n    Optional cannot be returned by get()\r\n    get() should return Client\r\n\r\nI have been following this link [https://stackoverflow.com/questions/30946167/mockito-error-with-method-that-returns-optionalt?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30946167/mockito-error-with-method-that-returns-optionalt?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa","title":"Unit test java Optional with mockito","body":"<p>I want to test a method which returns an Optional client in it.</p>\n\n<p>I want to test the scenario when client is empty.This is not a working code but overall it looks like this</p>\n\n<pre><code>public Optional&lt;String&gt; doSomething(String place) {\n    Optional&lt;Client&gt; client = Optional.empty();\n    try {\n        client = Optional.ofNullable(clientHelper.get(place));\n    } catch (Ex ex) {\n        log.warn(\"Exception occured:\", ex);\n    }\n    return client.isPresent() ? Optional.ofNullable(client.get().getPlaceDetails(place)) : Optional.empty();\n}\n</code></pre>\n\n<p>I have a helper class clientHelper which returns a client based on place if exists, if not it throws exception.\nFor test, this is what I came up with</p>\n\n<pre><code>  @Test\npublic void testClientHelper(){\n    ClientHelper clientHelper =  Mockito.mock(ClientHelper.class);\n    Optional&lt;Client&gt; client = Optional.empty();\n    Mockito.when(Optional.ofNullable(clientHelper.get(\"IN\"))).thenReturn(client);\n    assertEquals( doSomething(\"IN\"), Optional.empty())\n}\n</code></pre>\n\n<p>But it returns exception - </p>\n\n<pre><code>org.mockito.exceptions.misusing.WrongTypeOfReturnValue: \nOptional cannot be returned by get()\nget() should return Client\n</code></pre>\n\n<p>I have been following this link <a href=\"https://stackoverflow.com/questions/30946167/mockito-error-with-method-that-returns-optionalt?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">Mockito error with method that returns Optional&lt;T&gt;</a></p>\n"},{"tags":["java","php","android","websocket"],"owner":{"account_id":25947452,"reputation":1,"user_id":19835374,"display_name":"Mark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696589766,"creation_date":1696589556,"question_id":77243865,"body_markdown":"Can you help me?\r\nWhen connecting and pinging the websock, the server sends a response, but when the second client connects, after sending the message, the entire client stack is zero, can you tell me what this is connected with?\r\n```\r\nuse Workerman\\Worker;\r\n\r\nrequire_once __DIR__ . &#39;/../vendor/autoload.php&#39;;\r\nrequire_once &quot;/var/www/html/DB/DB_connect.php&quot;;\r\nrequire &#39;/var/www/html/API/orders/orders.php&#39;;\r\n\r\n$wsWorker = new Worker(&#39;websocket://0.0.0.0:27810&#39;);\r\n$wsWorker-&gt;count = 4;\r\n$users = [];\r\n\r\n$wsWorker-&gt;onConnect = function ($connection) use (&amp;$users) {\r\n    echo &quot;New connection \\n&quot;;\r\n\r\n};\r\n\r\n$wsWorker-&gt;onMessage = function ($connection, $data) use ($wsWorker, &amp;$users){\r\n\t\r\n\t$decode = json_decode($data);\r\n\r\n\tif(isset($decode-&gt;user)){\r\n    \tif(!array_key_exists($decode-&gt;user, $users)) {\r\n        \t$users[$decode-&gt;user] = $connection;\r\n        }\r\n    } elseif(isset($decode-&gt;ping)){\r\n    var_dump($users);\r\n    \t$webconnection = $users[$decode-&gt;ping];\r\n   \r\n    \t$webconnection-&gt;send(&#39;pong&#39;);\r\n    \r\n    } else {\r\n\r\n    var_dump($users);\r\n\t\tforeach ($users as $key =&gt; $clientConnections){\r\n\t\t$clientConnections-&gt;send(json_encode(&quot;true&quot;));\r\n\t\techo &quot;true \\n&quot;;\r\n\t\t}\r\n    }\r\n\r\n   \r\n};\r\n\r\n$wsWorker-&gt;onClose = function ($connection) use (&amp;$users){\r\n    echo &quot;Closed \\n&quot;;\r\n\t$user = array_search($connection, $users);\r\n    unset($users[$user]);\r\n};\r\n\r\nWorker::runAll();\r\n```\r\nclient \r\n```\r\nprivate void connectToSocket() {\r\n        URI uri;\r\n        DBClass db = new DBClass();\r\n        String hash = db.getHash(getContext());\r\n        hash = hash + &quot;HomeFragmentDriver&quot;;\r\n        try {\r\n            uri = new URI(&quot;ws&quot;+&quot;://&quot;+&quot;ip:27810&quot;);\r\n        } catch (URISyntaxException e){\r\n            Log.d(&quot;----uri------&quot;, e.getMessage());\r\n            return;\r\n        }\r\n        String finalHash = hash;\r\n        mWebSocketClient = new WebSocketClient(uri, new Draft_17()) {\r\n            @Override\r\n            public void onOpen(ServerHandshake serverHandshake) {\r\n                Log.d(&quot;Websocket&quot;, &quot;Opened&quot;);\r\n                mWebSocketClient.send(&quot;{ \\&quot;user\\&quot; : \\&quot;&quot;+ finalHash + &quot;\\&quot;}&quot;);\r\n                pingPong(finalHash);\r\n            }\r\n            @Override\r\n            public void onMessage(String s) {\r\n                Log.d(&quot;--mes--&quot;, s);\r\n                if(s.equals(&quot;pong&quot;)) {\r\n                    isPong = true;\r\n                } else {\r\n                    try {\r\n                        socketCars(s);\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n            }\r\n            @Override\r\n            public void onClose(int i, String s, boolean b) {\r\n                Log.d(&quot;Websocket&quot;, &quot;Closed &quot; + s);\r\n            }\r\n            @Override\r\n            public void onError(Exception e) {\r\n                Log.d(&quot;Websocket&quot;, &quot;Error &quot; + e.getMessage());\r\n            }\r\n\r\n        };\r\n        try {\r\n            mWebSocketClient.connectBlocking();\r\n        } catch (InterruptedException e) {\r\n            mWebSocketClient.connect();\r\n        }\r\n    }\r\n```\r\n\r\nvpn - dont help\r\nother websockets work\r\nother libraries dont help\r\nin logs writed &quot;false&quot; (websocetClient.getCOnnections().isConnectig())\r\n\r\n\r\nedit \r\npong to go client\r\n","title":"java android websocets dont give message","body":"<p>Can you help me?\nWhen connecting and pinging the websock, the server sends a response, but when the second client connects, after sending the message, the entire client stack is zero, can you tell me what this is connected with?</p>\n<pre><code>use Workerman\\Worker;\n\nrequire_once __DIR__ . '/../vendor/autoload.php';\nrequire_once &quot;/var/www/html/DB/DB_connect.php&quot;;\nrequire '/var/www/html/API/orders/orders.php';\n\n$wsWorker = new Worker('websocket://0.0.0.0:27810');\n$wsWorker-&gt;count = 4;\n$users = [];\n\n$wsWorker-&gt;onConnect = function ($connection) use (&amp;$users) {\n    echo &quot;New connection \\n&quot;;\n\n};\n\n$wsWorker-&gt;onMessage = function ($connection, $data) use ($wsWorker, &amp;$users){\n    \n    $decode = json_decode($data);\n\n    if(isset($decode-&gt;user)){\n        if(!array_key_exists($decode-&gt;user, $users)) {\n            $users[$decode-&gt;user] = $connection;\n        }\n    } elseif(isset($decode-&gt;ping)){\n    var_dump($users);\n        $webconnection = $users[$decode-&gt;ping];\n   \n        $webconnection-&gt;send('pong');\n    \n    } else {\n\n    var_dump($users);\n        foreach ($users as $key =&gt; $clientConnections){\n        $clientConnections-&gt;send(json_encode(&quot;true&quot;));\n        echo &quot;true \\n&quot;;\n        }\n    }\n\n   \n};\n\n$wsWorker-&gt;onClose = function ($connection) use (&amp;$users){\n    echo &quot;Closed \\n&quot;;\n    $user = array_search($connection, $users);\n    unset($users[$user]);\n};\n\nWorker::runAll();\n</code></pre>\n<p>client</p>\n<pre><code>private void connectToSocket() {\n        URI uri;\n        DBClass db = new DBClass();\n        String hash = db.getHash(getContext());\n        hash = hash + &quot;HomeFragmentDriver&quot;;\n        try {\n            uri = new URI(&quot;ws&quot;+&quot;://&quot;+&quot;ip:27810&quot;);\n        } catch (URISyntaxException e){\n            Log.d(&quot;----uri------&quot;, e.getMessage());\n            return;\n        }\n        String finalHash = hash;\n        mWebSocketClient = new WebSocketClient(uri, new Draft_17()) {\n            @Override\n            public void onOpen(ServerHandshake serverHandshake) {\n                Log.d(&quot;Websocket&quot;, &quot;Opened&quot;);\n                mWebSocketClient.send(&quot;{ \\&quot;user\\&quot; : \\&quot;&quot;+ finalHash + &quot;\\&quot;}&quot;);\n                pingPong(finalHash);\n            }\n            @Override\n            public void onMessage(String s) {\n                Log.d(&quot;--mes--&quot;, s);\n                if(s.equals(&quot;pong&quot;)) {\n                    isPong = true;\n                } else {\n                    try {\n                        socketCars(s);\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n            }\n            @Override\n            public void onClose(int i, String s, boolean b) {\n                Log.d(&quot;Websocket&quot;, &quot;Closed &quot; + s);\n            }\n            @Override\n            public void onError(Exception e) {\n                Log.d(&quot;Websocket&quot;, &quot;Error &quot; + e.getMessage());\n            }\n\n        };\n        try {\n            mWebSocketClient.connectBlocking();\n        } catch (InterruptedException e) {\n            mWebSocketClient.connect();\n        }\n    }\n</code></pre>\n<p>vpn - dont help\nother websockets work\nother libraries dont help\nin logs writed &quot;false&quot; (websocetClient.getCOnnections().isConnectig())</p>\n<p>edit\npong to go client</p>\n"},{"tags":["java","sorting"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1696588797,"post_id":77243700,"comment_id":136175595,"body_markdown":"Try `Comparator&lt;String&gt; c = emptyValuesFirst().thenComparing(Comparator.reverseOrder());` Your method is not a method of `Comparators`. If the ordering is wrong then we can try something else","body":"Try <code>Comparator&lt;String&gt; c = emptyValuesFirst().thenComparing(Comparator.reverseOrder());</code> Your method is not a method of <code>Comparators</code>. If the ordering is wrong then we can try something else"}],"answers":[{"tags":[],"owner":{"account_id":9661155,"reputation":104,"user_id":22683654,"display_name":"Roma S"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1696589694,"creation_date":1696588931,"answer_id":77243786,"question_id":77243700,"body_markdown":" 1. in your `if` statements first `if` checks for both strings have length of 0, so when code reach first `else if` statement there is no way that o1 has length of 0 and o2 has length of 0, and as string length cannot be below zero you can improve your 1st `else if` statement to `else if (o1.length() == 0)` and your 2nd `else if` statement to `else if (o2.length() == 0)`\r\n\r\n\r\n 2. Use `Comparator.&lt;String&gt;reverseOrder()` instead of `Comparator.reverseOrder()` looks like java cannot guess the generic type\r\n\r\n 3. You want to sort &quot;empty strings first, and after this reverse order&quot; so you have to use this sorting: **all empty strings are less than non empty string, all non empty strings reverse-compared** so:\r\n\r\n```java\r\n    public static Comparator&lt;String&gt; emptyValuesFirst() {\r\n        return new Comparator&lt;String&gt;() {\r\n            @Override\r\n            public int compare(String o1, String o2) {\r\n                if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\r\n                    //if both strings empty they are same\r\n                    return 0;\r\n                } else if (o1.length() == 0) {\r\n                    //if o1 is empty then it less than o2\r\n                    return -1;\r\n                } else if (o2.length() == 0) {\r\n                    //if o2 is empty then o1 is greater then 02\r\n                    return 1;\r\n                } else {\r\n                    //string are equals comparing by *is empty*\r\n                    return 0;\r\n                }\r\n            }\r\n        };\r\n    }\r\n```\r\n\r\n**Usage:**\r\n```java\r\n        List&lt;String&gt; valuesInSortedColumn = new ArrayList&lt;&gt;();\r\n        valuesInSortedColumn.add(&quot;a&quot;);\r\n        valuesInSortedColumn.add(&quot;zz&quot;);\r\n        valuesInSortedColumn.add(&quot;b&quot;);\r\n        valuesInSortedColumn.add(&quot;c&quot;);\r\n        valuesInSortedColumn.add(&quot;zz&quot;);\r\n        valuesInSortedColumn.add(&quot;&quot;);\r\n        valuesInSortedColumn.add(&quot;&quot;);\r\n        valuesInSortedColumn.sort(\r\n                emptyValuesFirst().thenComparing(Comparator.reverseOrder())\r\n        );\r\n        System.out.println(valuesInSortedColumn);\r\n```\r\n**Output:** `[, , zz, zz, c, b, a]`\r\n\r\n","title":"Sorting list of strings according to different criteria","body":"<ol>\n<li><p>in your <code>if</code> statements first <code>if</code> checks for both strings have length of 0, so when code reach first <code>else if</code> statement there is no way that o1 has length of 0 and o2 has length of 0, and as string length cannot be below zero you can improve your 1st <code>else if</code> statement to <code>else if (o1.length() == 0)</code> and your 2nd <code>else if</code> statement to <code>else if (o2.length() == 0)</code></p>\n</li>\n<li><p>Use <code>Comparator.&lt;String&gt;reverseOrder()</code> instead of <code>Comparator.reverseOrder()</code> looks like java cannot guess the generic type</p>\n</li>\n<li><p>You want to sort &quot;empty strings first, and after this reverse order&quot; so you have to use this sorting: <strong>all empty strings are less than non empty string, all non empty strings reverse-compared</strong> so:</p>\n</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static Comparator&lt;String&gt; emptyValuesFirst() {\n        return new Comparator&lt;String&gt;() {\n            @Override\n            public int compare(String o1, String o2) {\n                if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\n                    //if both strings empty they are same\n                    return 0;\n                } else if (o1.length() == 0) {\n                    //if o1 is empty then it less than o2\n                    return -1;\n                } else if (o2.length() == 0) {\n                    //if o2 is empty then o1 is greater then 02\n                    return 1;\n                } else {\n                    //string are equals comparing by *is empty*\n                    return 0;\n                }\n            }\n        };\n    }\n</code></pre>\n<p><strong>Usage:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>        List&lt;String&gt; valuesInSortedColumn = new ArrayList&lt;&gt;();\n        valuesInSortedColumn.add(&quot;a&quot;);\n        valuesInSortedColumn.add(&quot;zz&quot;);\n        valuesInSortedColumn.add(&quot;b&quot;);\n        valuesInSortedColumn.add(&quot;c&quot;);\n        valuesInSortedColumn.add(&quot;zz&quot;);\n        valuesInSortedColumn.add(&quot;&quot;);\n        valuesInSortedColumn.add(&quot;&quot;);\n        valuesInSortedColumn.sort(\n                emptyValuesFirst().thenComparing(Comparator.reverseOrder())\n        );\n        System.out.println(valuesInSortedColumn);\n</code></pre>\n<p><strong>Output:</strong> <code>[, , zz, zz, c, b, a]</code></p>\n"}],"owner":{"account_id":12706527,"reputation":999,"user_id":9231614,"display_name":"kris82pl"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77243786,"answer_count":1,"score":0,"last_activity_date":1696589694,"creation_date":1696587996,"question_id":77243700,"body_markdown":"I want to sort my list of strings in reversed order but all empty string should be at the beginning of list.\r\nI wrote my comparator for empty strings:\r\n\r\n    public static Comparator&lt;String&gt; emptyValuesFirst() {\r\n        return new Comparator&lt;String&gt;() {\r\n            @Override\r\n            public int compare(String o1, String o2) {\r\n                if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\r\n                    return 0;\r\n                } else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\r\n                    return 1;\r\n                } else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\r\n                    return -1;\r\n                } else {\r\n                    return 0;\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\nbut then when I try to use it here:\r\n\r\n                Assertions.assertThat(valuesInSortedColumn)\r\n                        .isSortedAccordingTo(Comparator.reverseOrder().thenComparing(Comparators.emptyValuesFirst()));\r\n\r\nI receive an error:\r\n\r\n&gt; Cannot resolve method &#39;thenComparing(Comparator&lt;String&gt;)&#39;","title":"Sorting list of strings according to different criteria","body":"<p>I want to sort my list of strings in reversed order but all empty string should be at the beginning of list.\nI wrote my comparator for empty strings:</p>\n<pre><code>public static Comparator&lt;String&gt; emptyValuesFirst() {\n    return new Comparator&lt;String&gt;() {\n        @Override\n        public int compare(String o1, String o2) {\n            if (o1.length() == 0 &amp;&amp; o2.length() == 0) {\n                return 0;\n            } else if (o1.length() == 0 &amp;&amp; o2.length() &gt; 0) {\n                return 1;\n            } else if (o1.length() &gt; 0 &amp;&amp; o2.length() == 0) {\n                return -1;\n            } else {\n                return 0;\n            }\n        }\n    };\n}\n</code></pre>\n<p>but then when I try to use it here:</p>\n<pre><code>            Assertions.assertThat(valuesInSortedColumn)\n                    .isSortedAccordingTo(Comparator.reverseOrder().thenComparing(Comparators.emptyValuesFirst()));\n</code></pre>\n<p>I receive an error:</p>\n<blockquote>\n<p>Cannot resolve method 'thenComparing(Comparator)'</p>\n</blockquote>\n"},{"tags":["java","selenium-webdriver","ptc-windchill"],"owner":{"account_id":23881045,"reputation":87,"user_id":17881743,"display_name":"Techie_Taks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696589644,"creation_date":1696507494,"question_id":77236939,"body_markdown":"I have windchill application which uses Azure AD SSO for authenticating users. I want to automate few of the test cases wherein navigating to homepage via selenium is redirecting me to microsoft login page.\r\n\r\nCould you please help me with this?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cYSu7.png","title":"how to handle Azure AD SSO authentication on selenium cucumber framework java","body":"<p>I have windchill application which uses Azure AD SSO for authenticating users. I want to automate few of the test cases wherein navigating to homepage via selenium is redirecting me to microsoft login page.</p>\n<p>Could you please help me with this?</p>\n<p><a href=\"https://i.stack.imgur.com/cYSu7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cYSu7.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","unit-testing","junit5","ignite"],"comments":[{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1696381477,"post_id":77225096,"comment_id":136144556,"body_markdown":"How many JDK do you have on your computer?","body":"How many JDK do you have on your computer?"},{"owner":{"account_id":25837244,"reputation":109,"user_id":19573454,"display_name":"Vincent Y"},"score":0,"creation_date":1696431081,"post_id":77225096,"comment_id":136152472,"body_markdown":"jdk11 and jdk17, but env var is pointing to jdk17","body":"jdk11 and jdk17, but env var is pointing to jdk17"}],"answers":[{"tags":[],"owner":{"account_id":2182,"reputation":51860,"user_id":2998,"accept_rate":69,"display_name":"Stephen Darlington"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696589422,"creation_date":1696406241,"answer_id":77227763,"question_id":77225096,"body_markdown":"When running on Java 17, you need to have a few extra JVM options. See [the documentation](https://www.gridgain.com/docs/latest/getting-started/quick-start/java#running-gridgain-with-java-11-or-later).\r\n\r\n    --add-opens=java.base/jdk.internal.misc=ALL-UNNAMED\r\n    --add-opens=java.base/sun.nio.ch=ALL-UNNAMED\r\n    --add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\r\n    --add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\r\n    --add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\r\n    --add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\r\n    --add-opens=java.base/java.io=ALL-UNNAMED\r\n    --add-opens=java.base/java.nio=ALL-UNNAMED\r\n    --add-opens=java.base/java.util=ALL-UNNAMED\r\n    --add-opens=java.base/java.util.concurrent=ALL-UNNAMED\r\n    --add-opens=java.base/java.util.concurrent.locks=ALL-UNNAMED\r\n    --add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang=ALL-UNNAMED\r\n    --add-opens=java.base/java.lang.invoke=ALL-UNNAMED\r\n    --add-opens=java.base/java.math=ALL-UNNAMED\r\n    --add-opens=java.sql/java.sql=ALL-UNNAMED\r\n    --add-opens=java.base/java.net=ALL-UNNAMED\r\n\r\nYou can add them on the commandline:\r\n\r\n    mvn test -DargLine=&quot;--add-opens....&quot;\r\n\r\nOr by adding the options to your pom.xml:\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.1.2&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;argLine&gt;--add-opens=...&lt;/argLine&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n","title":"Apache Ignite: unit test fail for java17 and junit5","body":"<p>When running on Java 17, you need to have a few extra JVM options. See <a href=\"https://www.gridgain.com/docs/latest/getting-started/quick-start/java#running-gridgain-with-java-11-or-later\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n<pre><code>--add-opens=java.base/jdk.internal.misc=ALL-UNNAMED\n--add-opens=java.base/sun.nio.ch=ALL-UNNAMED\n--add-opens=java.management/com.sun.jmx.mbeanserver=ALL-UNNAMED\n--add-opens=jdk.internal.jvmstat/sun.jvmstat.monitor=ALL-UNNAMED\n--add-opens=java.base/sun.reflect.generics.reflectiveObjects=ALL-UNNAMED\n--add-opens=jdk.management/com.sun.management.internal=ALL-UNNAMED\n--add-opens=java.base/java.io=ALL-UNNAMED\n--add-opens=java.base/java.nio=ALL-UNNAMED\n--add-opens=java.base/java.util=ALL-UNNAMED\n--add-opens=java.base/java.util.concurrent=ALL-UNNAMED\n--add-opens=java.base/java.util.concurrent.locks=ALL-UNNAMED\n--add-opens=java.base/java.util.concurrent.atomic=ALL-UNNAMED\n--add-opens=java.base/java.lang=ALL-UNNAMED\n--add-opens=java.base/java.lang.invoke=ALL-UNNAMED\n--add-opens=java.base/java.math=ALL-UNNAMED\n--add-opens=java.sql/java.sql=ALL-UNNAMED\n--add-opens=java.base/java.net=ALL-UNNAMED\n</code></pre>\n<p>You can add them on the commandline:</p>\n<pre><code>mvn test -DargLine=&quot;--add-opens....&quot;\n</code></pre>\n<p>Or by adding the options to your pom.xml:</p>\n<pre><code>        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.2&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;argLine&gt;--add-opens=...&lt;/argLine&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n</code></pre>\n"}],"owner":{"account_id":25837244,"reputation":109,"user_id":19573454,"display_name":"Vincent Y"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696589422,"creation_date":1696362226,"question_id":77225096,"body_markdown":"I recently upgraded my project to java17 and springboot 3.1.1, and using gridgain community  8.8.34.\r\n\r\nEverything works fine except unit tests. When I tried to test creating cache, at the line of code:\r\n```\r\n QueryEntity queryEntity = new QueryEntity(AffinityKey.class, Object.class);\r\n```\r\nthe followingexception will be thrown \r\n```\r\njava.lang.ExceptionInInitializerError\r\n\tat org.apache.ignite.internal.util.IgniteUtils.&lt;clinit&gt;(IgniteUtils.java:896)\r\n\tat org.apache.ignite.cache.QueryEntity.processAnnotationsInClass(QueryEntity.java:780)\r\n\tat org.apache.ignite.cache.QueryEntity.processKeyAndValueClasses(QueryEntity.java:764)\r\n\tat org.apache.ignite.cache.QueryEntity.&lt;init&gt;(QueryEntity.java:159)\r\n...\r\nCaused by: java.lang.RuntimeException: java.nio.DirectByteBuffer.address field is unavailable.\r\n\tat org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1588)\r\n\tat org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1575)\r\n\tat java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\r\n\tat org.apache.ignite.internal.util.GridUnsafe.bufferAddressOffset(GridUnsafe.java:1575)\r\n\tat org.apache.ignite.internal.util.GridUnsafe.&lt;clinit&gt;(GridUnsafe.java:114)\r\n\t... 92 more\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field long java.nio.Buffer.address accessible: module java.base does not &quot;opens java.nio&quot; to unnamed module @38082d64\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n\tat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n\tat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n\tat org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1580)\r\n\t... 96 more\r\n```\r\n\r\nI tried to add vm parameters in this unit test run configuration, but not work. Does anyone have the similar issue before?","title":"Apache Ignite: unit test fail for java17 and junit5","body":"<p>I recently upgraded my project to java17 and springboot 3.1.1, and using gridgain community  8.8.34.</p>\n<p>Everything works fine except unit tests. When I tried to test creating cache, at the line of code:</p>\n<pre><code> QueryEntity queryEntity = new QueryEntity(AffinityKey.class, Object.class);\n</code></pre>\n<p>the followingexception will be thrown</p>\n<pre><code>java.lang.ExceptionInInitializerError\n    at org.apache.ignite.internal.util.IgniteUtils.&lt;clinit&gt;(IgniteUtils.java:896)\n    at org.apache.ignite.cache.QueryEntity.processAnnotationsInClass(QueryEntity.java:780)\n    at org.apache.ignite.cache.QueryEntity.processKeyAndValueClasses(QueryEntity.java:764)\n    at org.apache.ignite.cache.QueryEntity.&lt;init&gt;(QueryEntity.java:159)\n...\nCaused by: java.lang.RuntimeException: java.nio.DirectByteBuffer.address field is unavailable.\n    at org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1588)\n    at org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1575)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n    at org.apache.ignite.internal.util.GridUnsafe.bufferAddressOffset(GridUnsafe.java:1575)\n    at org.apache.ignite.internal.util.GridUnsafe.&lt;clinit&gt;(GridUnsafe.java:114)\n    ... 92 more\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field long java.nio.Buffer.address accessible: module java.base does not &quot;opens java.nio&quot; to unnamed module @38082d64\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\n    at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\n    at org.apache.ignite.internal.util.GridUnsafe$2.run(GridUnsafe.java:1580)\n    ... 96 more\n</code></pre>\n<p>I tried to add vm parameters in this unit test run configuration, but not work. Does anyone have the similar issue before?</p>\n"},{"tags":["java","spring","spring-boot","jdbc","datasource"],"comments":[{"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"score":0,"creation_date":1696430201,"post_id":77230333,"comment_id":136152264,"body_markdown":"Can you provide more details about your custom Spring context configuration?","body":"Can you provide more details about your custom Spring context configuration?"}],"answers":[{"tags":[],"owner":{"account_id":3682527,"reputation":8791,"user_id":3067148,"accept_rate":74,"display_name":"Harold L. Brown"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696589120,"creation_date":1696589120,"answer_id":77243805,"question_id":77230333,"body_markdown":"After adding [`EnableJpaRepositories`][1] to my test, the data source was initialized.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/config/EnableJpaRepositories.html","title":"In a Spring test, how to enable the Data Source auto-configuration?","body":"<p>After adding <a href=\"https://docs.spring.io/spring-data/data-jpa/docs/current/api/org/springframework/data/jpa/repository/config/EnableJpaRepositories.html\" rel=\"nofollow noreferrer\"><code>EnableJpaRepositories</code></a> to my test, the data source was initialized.</p>\n"}],"owner":{"account_id":3682527,"reputation":8791,"user_id":3067148,"accept_rate":74,"display_name":"Harold L. Brown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77243805,"answer_count":1,"score":0,"last_activity_date":1696589120,"creation_date":1696428573,"question_id":77230333,"body_markdown":"I have a Spring Boot application.\r\n\r\nI have a JUnit test with a custom Spring context configuration.\r\n\r\nHow can I enable the JDBC Data Source auto-configuration from the Spring properties like `spring.datasource.url`, `spring.datasource.username`, …?","title":"In a Spring test, how to enable the Data Source auto-configuration?","body":"<p>I have a Spring Boot application.</p>\n<p>I have a JUnit test with a custom Spring context configuration.</p>\n<p>How can I enable the JDBC Data Source auto-configuration from the Spring properties like <code>spring.datasource.url</code>, <code>spring.datasource.username</code>, …?</p>\n"},{"tags":["java","selenium-webdriver","cucumber"],"owner":{"account_id":27159796,"reputation":13,"user_id":20698038,"display_name":"PleasePlease"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696589116,"creation_date":1696578153,"question_id":77242648,"body_markdown":"Whenever I make changes in step-definition, feature file and pom.xml file in Eclipse IDE, cucumber takes more time to build. It is taking more than 5 mins for each build. \r\n\r\nCan someone tell me how to avoid this issue permanently? For the time-being, I disabled build automatically option in project  menu bar.\r\n\r\nIs this issue occurring due to eclipse cucumber plugin? If I switch to another IDE (IntellijIDEA), my problem will be resolved?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n[![enter image description here][2]][2] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/F491D.png\r\n  [2]: https://i.stack.imgur.com/UTffA.png","title":"Cucumber takes more time to build when making changes in step-definition, feature file and pom.xml file in Eclipse IDE","body":"<p>Whenever I make changes in step-definition, feature file and pom.xml file in Eclipse IDE, cucumber takes more time to build. It is taking more than 5 mins for each build.</p>\n<p>Can someone tell me how to avoid this issue permanently? For the time-being, I disabled build automatically option in project  menu bar.</p>\n<p>Is this issue occurring due to eclipse cucumber plugin? If I switch to another IDE (IntellijIDEA), my problem will be resolved?</p>\n<p><a href=\"https://i.stack.imgur.com/F491D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F491D.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/UTffA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTffA.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","gnupg"],"answers":[{"tags":[],"owner":{"account_id":11125108,"reputation":5965,"user_id":8166854,"display_name":"Michael Fehr"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1597220222,"creation_date":1597137245,"answer_id":63355145,"question_id":63351345,"body_markdown":"You can use the crypto library &#39;Bouncy Castle&#39; to encrypt a file using a PGP Public key in Ascii-format. The following code is taken from the examples section of Bouncy Castle that is located here: https://github.com/bcgit/bc-java/tree/master/pg/src/main/java/org/bouncycastle/openpgp/examples.\r\n\r\nYou do need the two files KeyBasedLargeFileProcessor.java and PGPExampleUtil.java plus the libraries itself; get the latest versions here: https://www.bouncycastle.org/latest_releases.html (you need the bcprov-xxx.jar and bcpg-xxx.jar to run the example).\r\n\r\nAs the example is a command line application you need to pass the information like\r\n\r\n    -e -a plaintext.txt java_pgp_encrypt_publickey.asc\r\n\r\nwhere -e = encryption, -a = ascii output, plaintext.txt is your file to get encrypted and java_pgp_encrypt_publickey.asc = the public key.\r\n\r\nThere are some other options but they depend on the third party requests.\r\n\r\n**Please take care about the notes in KeyBasedLargeFileProcessor.java - this is just a working example.**\r\n\r\nUsually there is not extra output but a new file in the current directory with the filename plaintext.txt.asc that looks like\r\n\r\n    -----BEGIN PGP MESSAGE-----\r\n    Version: BCPG v1.66\r\n    \r\n    hQEMAyr8BYmnLERrAQf/SaG7yIORewag0fziemyEmWq+sGJT3TiLIoVCEo+PjDfY\r\n    XyuXybIr/q5Q7tE3WcubkXzVIuShB2x2r8zaHP3rhtzDfuRS13S5QBM1LZ9KIcvg\r\n    +//OoeS1kfKfJnYfAQR1VCKWBkOQtSCIyMWGmqkrV2xEC8xzAo2cwXCBS2F7LYRE\r\n    vnmJGnr4ANFdbSlzRffBPJCcggk9RqDXXJjU31gCqFT+lpgc48Hf6OfRff7x5I2b\r\n    5++PH1UPKFIZhalnFE2UQ9DVbzJd2FaciUKhcM9nQSGKoNKy3o1wevrtive8VIuM\r\n    JjgV0ql+3MGCVVYL0tBnDdjdbmHV5pcZX9aI147esclPItwZQHTHTtaxTUKTJZeQ\r\n    4YgMas+o0faWLUilaeNvNa8PqxLy9gPGzMxUj2/P1narGs4bbivUooLJO73NKV4B\r\n    u3on8l/Es4vVLNoZpJv0kw==\r\n    =IZ8I\r\n    -----END PGP MESSAGE-----\r\n\r\n**Edit Aug. 12th 2020:** I made a fresh download of PGP Desktop x64 version 10.1.1, generated a sample keypair and\r\nexported the public key (&quot;-----BEGIN PGP PUBLIC KEY BLOCK-----...&quot;). I used this key with the mentioned options and\r\ncreated a encrypted file (&quot;-----BEGIN PGP MESSAGE-----...&quot;). This file was used as input for the PGP Viewer and it\r\nwas decrypted like expected, so something in your environment seems not to work as expected (or the wrong public key\r\nwas in use or or or):\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAs links may go away here are the source codes as well.\r\n\r\nclass KeyBasedLargeFileProcessor.java\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.BufferedOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.OutputStream;\r\n    import java.security.NoSuchProviderException;\r\n    import java.security.SecureRandom;\r\n    import java.security.Security;\r\n    import java.util.Iterator;\r\n    \r\n    import org.bouncycastle.bcpg.ArmoredOutputStream;\r\n    import org.bouncycastle.jce.provider.BouncyCastleProvider;\r\n    import org.bouncycastle.openpgp.PGPCompressedData;\r\n    import org.bouncycastle.openpgp.PGPCompressedDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPEncryptedData;\r\n    import org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPEncryptedDataList;\r\n    import org.bouncycastle.openpgp.PGPException;\r\n    import org.bouncycastle.openpgp.PGPLiteralData;\r\n    import org.bouncycastle.openpgp.PGPOnePassSignatureList;\r\n    import org.bouncycastle.openpgp.PGPPrivateKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyEncryptedData;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\n    import org.bouncycastle.openpgp.PGPUtil;\r\n    import org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\r\n    import org.bouncycastle.util.io.Streams;\r\n    \r\n    /**\r\n     * A simple utility class that encrypts/decrypts public key based\r\n     * encryption large files.\r\n     * &lt;p&gt;\r\n     * To encrypt a file: KeyBasedLargeFileProcessor -e [-a|-ai] fileName publicKeyFile.&lt;br&gt;\r\n     * If -a is specified the output file will be &quot;ascii-armored&quot;.\r\n     * If -i is specified the output file will be have integrity checking added.\r\n     * &lt;p&gt;\r\n     * To decrypt: KeyBasedLargeFileProcessor -d fileName secretKeyFile passPhrase.\r\n     * &lt;p&gt;\r\n     * Note 1: this example will silently overwrite files, nor does it pay any attention to\r\n     * the specification of &quot;_CONSOLE&quot; in the filename. It also expects that a single pass phrase\r\n     * will have been used.\r\n     * &lt;p&gt;\r\n     * Note 2: this example generates partial packets to encode the file, the output it generates\r\n     * will not be readable by older PGP products or products that don&#39;t support partial packet\r\n     * encoding.\r\n     * &lt;p&gt;\r\n     * Note 3: if an empty file name has been specified in the literal data object contained in the\r\n     * encrypted packet a file with the name filename.out will be generated in the current working directory.\r\n     */\r\n    public class KeyBasedLargeFileProcessor\r\n    /*\r\n       file taken from https://github.com/bcgit/bc-java/tree/master/pg/src/main/java/org/bouncycastle/openpgp/examples\r\n       get bouncy castle here: https://www.bouncycastle.org/latest_releases.html\r\n       i used the bcprov-jdk15on-166.jar and bcpg-jdk15on-166.jar at the time of writing\r\n    */\r\n    {\r\n        private static void decryptFile(\r\n                String inputFileName,\r\n                String keyFileName,\r\n                char[] passwd,\r\n                String defaultFileName)\r\n                throws IOException, NoSuchProviderException\r\n        {\r\n            InputStream in = new BufferedInputStream(new FileInputStream(inputFileName));\r\n            InputStream keyIn = new BufferedInputStream(new FileInputStream(keyFileName));\r\n            decryptFile(in, keyIn, passwd, defaultFileName);\r\n            keyIn.close();\r\n            in.close();\r\n        }\r\n    \r\n        /**\r\n         * decrypt the passed in message stream\r\n         */\r\n        private static void decryptFile(\r\n                InputStream in,\r\n                InputStream keyIn,\r\n                char[]      passwd,\r\n                String      defaultFileName)\r\n                throws IOException, NoSuchProviderException\r\n        {\r\n            in = PGPUtil.getDecoderStream(in);\r\n    \r\n            try\r\n            {\r\n                JcaPGPObjectFactory        pgpF = new JcaPGPObjectFactory(in);\r\n                PGPEncryptedDataList    enc;\r\n    \r\n                Object                  o = pgpF.nextObject();\r\n                //\r\n                // the first object might be a PGP marker packet.\r\n                //\r\n                if (o instanceof PGPEncryptedDataList)\r\n                {\r\n                    enc = (PGPEncryptedDataList)o;\r\n                }\r\n                else\r\n                {\r\n                    enc = (PGPEncryptedDataList)pgpF.nextObject();\r\n                }\r\n    \r\n                //\r\n                // find the secret key\r\n                //\r\n                Iterator                    it = enc.getEncryptedDataObjects();\r\n                PGPPrivateKey               sKey = null;\r\n                PGPPublicKeyEncryptedData   pbe = null;\r\n                PGPSecretKeyRingCollection  pgpSec = new PGPSecretKeyRingCollection(\r\n                        PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\r\n    \r\n                while (sKey == null &amp;&amp; it.hasNext())\r\n                {\r\n                    pbe = (PGPPublicKeyEncryptedData)it.next();\r\n    \r\n                    sKey = PGPExampleUtil.findSecretKey(pgpSec, pbe.getKeyID(), passwd);\r\n                }\r\n    \r\n                if (sKey == null)\r\n                {\r\n                    throw new IllegalArgumentException(&quot;secret key for message not found.&quot;);\r\n                }\r\n    \r\n                InputStream         clear = pbe.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder().setProvider(&quot;BC&quot;).build(sKey));\r\n    \r\n                JcaPGPObjectFactory    plainFact = new JcaPGPObjectFactory(clear);\r\n    \r\n                PGPCompressedData   cData = (PGPCompressedData)plainFact.nextObject();\r\n    \r\n                InputStream         compressedStream = new BufferedInputStream(cData.getDataStream());\r\n                JcaPGPObjectFactory    pgpFact = new JcaPGPObjectFactory(compressedStream);\r\n    \r\n                Object              message = pgpFact.nextObject();\r\n    \r\n                if (message instanceof PGPLiteralData)\r\n                {\r\n                    PGPLiteralData ld = (PGPLiteralData)message;\r\n    \r\n                    String outFileName = ld.getFileName();\r\n                    if (outFileName.length() == 0)\r\n                    {\r\n                        outFileName = defaultFileName;\r\n                    }\r\n    \r\n                    InputStream unc = ld.getInputStream();\r\n                    OutputStream fOut =  new BufferedOutputStream(new FileOutputStream(outFileName));\r\n    \r\n                    Streams.pipeAll(unc, fOut);\r\n    \r\n                    fOut.close();\r\n                }\r\n                else if (message instanceof PGPOnePassSignatureList)\r\n                {\r\n                    throw new PGPException(&quot;encrypted message contains a signed message - not literal data.&quot;);\r\n                }\r\n                else\r\n                {\r\n                    throw new PGPException(&quot;message is not a simple encrypted file - type unknown.&quot;);\r\n                }\r\n    \r\n                if (pbe.isIntegrityProtected())\r\n                {\r\n                    if (!pbe.verify())\r\n                    {\r\n                        System.err.println(&quot;message failed integrity check&quot;);\r\n                    }\r\n                    else\r\n                    {\r\n                        System.err.println(&quot;message integrity check passed&quot;);\r\n                    }\r\n                }\r\n                else\r\n                {\r\n                    System.err.println(&quot;no message integrity check&quot;);\r\n                }\r\n            }\r\n            catch (PGPException e)\r\n            {\r\n                System.err.println(e);\r\n                if (e.getUnderlyingException() != null)\r\n                {\r\n                    e.getUnderlyingException().printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n        private static void encryptFile(\r\n                String          outputFileName,\r\n                String          inputFileName,\r\n                String          encKeyFileName,\r\n                boolean         armor,\r\n                boolean         withIntegrityCheck)\r\n                throws IOException, NoSuchProviderException, PGPException\r\n        {\r\n            OutputStream out = new BufferedOutputStream(new FileOutputStream(outputFileName));\r\n            PGPPublicKey encKey = PGPExampleUtil.readPublicKey(encKeyFileName);\r\n            encryptFile(out, inputFileName, encKey, armor, withIntegrityCheck);\r\n            out.close();\r\n        }\r\n    \r\n        private static void encryptFile(\r\n                OutputStream    out,\r\n                String          fileName,\r\n                PGPPublicKey    encKey,\r\n                boolean         armor,\r\n                boolean         withIntegrityCheck)\r\n                throws IOException, NoSuchProviderException\r\n        {\r\n            if (armor)\r\n            {\r\n                out = new ArmoredOutputStream(out);\r\n            }\r\n    \r\n            try\r\n            {\r\n                PGPEncryptedDataGenerator   cPk = new PGPEncryptedDataGenerator(new JcePGPDataEncryptorBuilder(PGPEncryptedData.CAST5).setWithIntegrityPacket(withIntegrityCheck).setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\r\n    \r\n                cPk.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encKey).setProvider(&quot;BC&quot;));\r\n    \r\n                OutputStream                cOut = cPk.open(out, new byte[1 &lt;&lt; 16]);\r\n    \r\n                PGPCompressedDataGenerator  comData = new PGPCompressedDataGenerator(\r\n                        PGPCompressedData.ZIP);\r\n    \r\n                PGPUtil.writeFileToLiteralData(comData.open(cOut), PGPLiteralData.BINARY, new File(fileName), new byte[1 &lt;&lt; 16]);\r\n    \r\n                comData.close();\r\n    \r\n                cOut.close();\r\n    \r\n                if (armor)\r\n                {\r\n                    out.close();\r\n                }\r\n            }\r\n            catch (PGPException e)\r\n            {\r\n                System.err.println(e);\r\n                if (e.getUnderlyingException() != null)\r\n                {\r\n                    e.getUnderlyingException().printStackTrace();\r\n                }\r\n            }\r\n        }\r\n    \r\n        public static void main(\r\n                String[] args)\r\n                throws Exception\r\n        {\r\n            Security.addProvider(new BouncyCastleProvider());\r\n    \r\n            if (args.length == 0)\r\n            {\r\n                System.err.println(&quot;usage: KeyBasedLargeFileProcessor -e|-d [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]&quot;);\r\n                return;\r\n            }\r\n    \r\n            if (args[0].equals(&quot;-e&quot;))\r\n            {\r\n                if (args[1].equals(&quot;-a&quot;) || args[1].equals(&quot;-ai&quot;) || args[1].equals(&quot;-ia&quot;))\r\n                {\r\n                    encryptFile(args[2] + &quot;.asc&quot;, args[2], args[3], true, (args[1].indexOf(&#39;i&#39;) &gt; 0));\r\n                }\r\n                else if (args[1].equals(&quot;-i&quot;))\r\n                {\r\n                    encryptFile(args[2] + &quot;.bpg&quot;, args[2], args[3], false, true);\r\n                }\r\n                else\r\n                {\r\n                    encryptFile(args[1] + &quot;.bpg&quot;, args[1], args[2], false, false);\r\n                }\r\n            }\r\n            else if (args[0].equals(&quot;-d&quot;))\r\n            {\r\n                decryptFile(args[1], args[2], args[3].toCharArray(), new File(args[1]).getName() + &quot;.out&quot;);\r\n            }\r\n            else\r\n            {\r\n                System.err.println(&quot;usage: KeyBasedLargeFileProcessor -d|-e [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\nclass PGPExampleUtil.java\r\n\r\n    import java.io.BufferedInputStream;\r\n    import java.io.ByteArrayOutputStream;\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.security.NoSuchProviderException;\r\n    import java.util.Iterator;\r\n    \r\n    import org.bouncycastle.openpgp.PGPCompressedDataGenerator;\r\n    import org.bouncycastle.openpgp.PGPException;\r\n    import org.bouncycastle.openpgp.PGPLiteralData;\r\n    import org.bouncycastle.openpgp.PGPPrivateKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKey;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRing;\r\n    import org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\r\n    import org.bouncycastle.openpgp.PGPSecretKey;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRing;\r\n    import org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\r\n    import org.bouncycastle.openpgp.PGPUtil;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\r\n    import org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\r\n    \r\n    class PGPExampleUtil\r\n    {\r\n        static byte[] compressFile(String fileName, int algorithm) throws IOException\r\n        {\r\n            ByteArrayOutputStream bOut = new ByteArrayOutputStream();\r\n            PGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(algorithm);\r\n            PGPUtil.writeFileToLiteralData(comData.open(bOut), PGPLiteralData.BINARY,\r\n                    new File(fileName));\r\n            comData.close();\r\n            return bOut.toByteArray();\r\n        }\r\n    \r\n        /**\r\n         * Search a secret key ring collection for a secret key corresponding to keyID if it\r\n         * exists.\r\n         *\r\n         * @param pgpSec a secret key ring collection.\r\n         * @param keyID keyID we want.\r\n         * @param pass passphrase to decrypt secret key with.\r\n         * @return the private key.\r\n         * @throws PGPException\r\n         * @throws NoSuchProviderException\r\n         */\r\n        static PGPPrivateKey findSecretKey(PGPSecretKeyRingCollection pgpSec, long keyID, char[] pass)\r\n                throws PGPException, NoSuchProviderException\r\n        {\r\n            PGPSecretKey pgpSecKey = pgpSec.getSecretKey(keyID);\r\n    \r\n            if (pgpSecKey == null)\r\n            {\r\n                return null;\r\n            }\r\n    \r\n            return pgpSecKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(pass));\r\n        }\r\n    \r\n        static PGPPublicKey readPublicKey(String fileName) throws IOException, PGPException\r\n        {\r\n            InputStream keyIn = new BufferedInputStream(new FileInputStream(fileName));\r\n            PGPPublicKey pubKey = readPublicKey(keyIn);\r\n            keyIn.close();\r\n            return pubKey;\r\n        }\r\n    \r\n        /**\r\n         * A simple routine that opens a key ring file and loads the first available key\r\n         * suitable for encryption.\r\n         *\r\n         * @param input data stream containing the public key data\r\n         * @return the first public key found.\r\n         * @throws IOException\r\n         * @throws PGPException\r\n         */\r\n        static PGPPublicKey readPublicKey(InputStream input) throws IOException, PGPException\r\n        {\r\n            PGPPublicKeyRingCollection pgpPub = new PGPPublicKeyRingCollection(\r\n                    PGPUtil.getDecoderStream(input), new JcaKeyFingerprintCalculator());\r\n    \r\n            //\r\n            // we just loop through the collection till we find a key suitable for encryption, in the real\r\n            // world you would probably want to be a bit smarter about this.\r\n            //\r\n    \r\n            Iterator keyRingIter = pgpPub.getKeyRings();\r\n            while (keyRingIter.hasNext())\r\n            {\r\n                PGPPublicKeyRing keyRing = (PGPPublicKeyRing)keyRingIter.next();\r\n    \r\n                Iterator keyIter = keyRing.getPublicKeys();\r\n                while (keyIter.hasNext())\r\n                {\r\n                    PGPPublicKey key = (PGPPublicKey)keyIter.next();\r\n    \r\n                    if (key.isEncryptionKey())\r\n                    {\r\n                        return key;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            throw new IllegalArgumentException(&quot;Can&#39;t find encryption key in key ring.&quot;);\r\n        }\r\n    \r\n        static PGPSecretKey readSecretKey(String fileName) throws IOException, PGPException\r\n        {\r\n            InputStream keyIn = new BufferedInputStream(new FileInputStream(fileName));\r\n            PGPSecretKey secKey = readSecretKey(keyIn);\r\n            keyIn.close();\r\n            return secKey;\r\n        }\r\n    \r\n        /**\r\n         * A simple routine that opens a key ring file and loads the first available key\r\n         * suitable for signature generation.\r\n         *\r\n         * @param input stream to read the secret key ring collection from.\r\n         * @return a secret key.\r\n         * @throws IOException on a problem with using the input stream.\r\n         * @throws PGPException if there is an issue parsing the input stream.\r\n         */\r\n        static PGPSecretKey readSecretKey(InputStream input) throws IOException, PGPException\r\n        {\r\n            PGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(\r\n                    PGPUtil.getDecoderStream(input), new JcaKeyFingerprintCalculator());\r\n    \r\n            //\r\n            // we just loop through the collection till we find a key suitable for encryption, in the real\r\n            // world you would probably want to be a bit smarter about this.\r\n            //\r\n    \r\n            Iterator keyRingIter = pgpSec.getKeyRings();\r\n            while (keyRingIter.hasNext())\r\n            {\r\n                PGPSecretKeyRing keyRing = (PGPSecretKeyRing)keyRingIter.next();\r\n    \r\n                Iterator keyIter = keyRing.getSecretKeys();\r\n                while (keyIter.hasNext())\r\n                {\r\n                    PGPSecretKey key = (PGPSecretKey)keyIter.next();\r\n    \r\n                    if (key.isSigningKey())\r\n                    {\r\n                        return key;\r\n                    }\r\n                }\r\n            }\r\n    \r\n            throw new IllegalArgumentException(&quot;Can&#39;t find signing key in key ring.&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MhNRM.png","title":"java pgp encrypt file with public key in asc file","body":"<p>You can use the crypto library 'Bouncy Castle' to encrypt a file using a PGP Public key in Ascii-format. The following code is taken from the examples section of Bouncy Castle that is located here: <a href=\"https://github.com/bcgit/bc-java/tree/master/pg/src/main/java/org/bouncycastle/openpgp/examples\" rel=\"nofollow noreferrer\">https://github.com/bcgit/bc-java/tree/master/pg/src/main/java/org/bouncycastle/openpgp/examples</a>.</p>\n<p>You do need the two files KeyBasedLargeFileProcessor.java and PGPExampleUtil.java plus the libraries itself; get the latest versions here: <a href=\"https://www.bouncycastle.org/latest_releases.html\" rel=\"nofollow noreferrer\">https://www.bouncycastle.org/latest_releases.html</a> (you need the bcprov-xxx.jar and bcpg-xxx.jar to run the example).</p>\n<p>As the example is a command line application you need to pass the information like</p>\n<pre><code>-e -a plaintext.txt java_pgp_encrypt_publickey.asc\n</code></pre>\n<p>where -e = encryption, -a = ascii output, plaintext.txt is your file to get encrypted and java_pgp_encrypt_publickey.asc = the public key.</p>\n<p>There are some other options but they depend on the third party requests.</p>\n<p><strong>Please take care about the notes in KeyBasedLargeFileProcessor.java - this is just a working example.</strong></p>\n<p>Usually there is not extra output but a new file in the current directory with the filename plaintext.txt.asc that looks like</p>\n<pre><code>-----BEGIN PGP MESSAGE-----\nVersion: BCPG v1.66\n\nhQEMAyr8BYmnLERrAQf/SaG7yIORewag0fziemyEmWq+sGJT3TiLIoVCEo+PjDfY\nXyuXybIr/q5Q7tE3WcubkXzVIuShB2x2r8zaHP3rhtzDfuRS13S5QBM1LZ9KIcvg\n+//OoeS1kfKfJnYfAQR1VCKWBkOQtSCIyMWGmqkrV2xEC8xzAo2cwXCBS2F7LYRE\nvnmJGnr4ANFdbSlzRffBPJCcggk9RqDXXJjU31gCqFT+lpgc48Hf6OfRff7x5I2b\n5++PH1UPKFIZhalnFE2UQ9DVbzJd2FaciUKhcM9nQSGKoNKy3o1wevrtive8VIuM\nJjgV0ql+3MGCVVYL0tBnDdjdbmHV5pcZX9aI147esclPItwZQHTHTtaxTUKTJZeQ\n4YgMas+o0faWLUilaeNvNa8PqxLy9gPGzMxUj2/P1narGs4bbivUooLJO73NKV4B\nu3on8l/Es4vVLNoZpJv0kw==\n=IZ8I\n-----END PGP MESSAGE-----\n</code></pre>\n<p><strong>Edit Aug. 12th 2020:</strong> I made a fresh download of PGP Desktop x64 version 10.1.1, generated a sample keypair and\nexported the public key (&quot;-----BEGIN PGP PUBLIC KEY BLOCK-----...&quot;). I used this key with the mentioned options and\ncreated a encrypted file (&quot;-----BEGIN PGP MESSAGE-----...&quot;). This file was used as input for the PGP Viewer and it\nwas decrypted like expected, so something in your environment seems not to work as expected (or the wrong public key\nwas in use or or or):</p>\n<p><a href=\"https://i.stack.imgur.com/MhNRM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MhNRM.png\" alt=\"enter image description here\" /></a></p>\n<p>As links may go away here are the source codes as well.</p>\n<p>class KeyBasedLargeFileProcessor.java</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.BufferedOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.OutputStream;\nimport java.security.NoSuchProviderException;\nimport java.security.SecureRandom;\nimport java.security.Security;\nimport java.util.Iterator;\n\nimport org.bouncycastle.bcpg.ArmoredOutputStream;\nimport org.bouncycastle.jce.provider.BouncyCastleProvider;\nimport org.bouncycastle.openpgp.PGPCompressedData;\nimport org.bouncycastle.openpgp.PGPCompressedDataGenerator;\nimport org.bouncycastle.openpgp.PGPEncryptedData;\nimport org.bouncycastle.openpgp.PGPEncryptedDataGenerator;\nimport org.bouncycastle.openpgp.PGPEncryptedDataList;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPOnePassSignatureList;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyEncryptedData;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.jcajce.JcaPGPObjectFactory;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePGPDataEncryptorBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyDataDecryptorFactoryBuilder;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePublicKeyKeyEncryptionMethodGenerator;\nimport org.bouncycastle.util.io.Streams;\n\n/**\n * A simple utility class that encrypts/decrypts public key based\n * encryption large files.\n * &lt;p&gt;\n * To encrypt a file: KeyBasedLargeFileProcessor -e [-a|-ai] fileName publicKeyFile.&lt;br&gt;\n * If -a is specified the output file will be &quot;ascii-armored&quot;.\n * If -i is specified the output file will be have integrity checking added.\n * &lt;p&gt;\n * To decrypt: KeyBasedLargeFileProcessor -d fileName secretKeyFile passPhrase.\n * &lt;p&gt;\n * Note 1: this example will silently overwrite files, nor does it pay any attention to\n * the specification of &quot;_CONSOLE&quot; in the filename. It also expects that a single pass phrase\n * will have been used.\n * &lt;p&gt;\n * Note 2: this example generates partial packets to encode the file, the output it generates\n * will not be readable by older PGP products or products that don't support partial packet\n * encoding.\n * &lt;p&gt;\n * Note 3: if an empty file name has been specified in the literal data object contained in the\n * encrypted packet a file with the name filename.out will be generated in the current working directory.\n */\npublic class KeyBasedLargeFileProcessor\n/*\n   file taken from https://github.com/bcgit/bc-java/tree/master/pg/src/main/java/org/bouncycastle/openpgp/examples\n   get bouncy castle here: https://www.bouncycastle.org/latest_releases.html\n   i used the bcprov-jdk15on-166.jar and bcpg-jdk15on-166.jar at the time of writing\n*/\n{\n    private static void decryptFile(\n            String inputFileName,\n            String keyFileName,\n            char[] passwd,\n            String defaultFileName)\n            throws IOException, NoSuchProviderException\n    {\n        InputStream in = new BufferedInputStream(new FileInputStream(inputFileName));\n        InputStream keyIn = new BufferedInputStream(new FileInputStream(keyFileName));\n        decryptFile(in, keyIn, passwd, defaultFileName);\n        keyIn.close();\n        in.close();\n    }\n\n    /**\n     * decrypt the passed in message stream\n     */\n    private static void decryptFile(\n            InputStream in,\n            InputStream keyIn,\n            char[]      passwd,\n            String      defaultFileName)\n            throws IOException, NoSuchProviderException\n    {\n        in = PGPUtil.getDecoderStream(in);\n\n        try\n        {\n            JcaPGPObjectFactory        pgpF = new JcaPGPObjectFactory(in);\n            PGPEncryptedDataList    enc;\n\n            Object                  o = pgpF.nextObject();\n            //\n            // the first object might be a PGP marker packet.\n            //\n            if (o instanceof PGPEncryptedDataList)\n            {\n                enc = (PGPEncryptedDataList)o;\n            }\n            else\n            {\n                enc = (PGPEncryptedDataList)pgpF.nextObject();\n            }\n\n            //\n            // find the secret key\n            //\n            Iterator                    it = enc.getEncryptedDataObjects();\n            PGPPrivateKey               sKey = null;\n            PGPPublicKeyEncryptedData   pbe = null;\n            PGPSecretKeyRingCollection  pgpSec = new PGPSecretKeyRingCollection(\n                    PGPUtil.getDecoderStream(keyIn), new JcaKeyFingerprintCalculator());\n\n            while (sKey == null &amp;&amp; it.hasNext())\n            {\n                pbe = (PGPPublicKeyEncryptedData)it.next();\n\n                sKey = PGPExampleUtil.findSecretKey(pgpSec, pbe.getKeyID(), passwd);\n            }\n\n            if (sKey == null)\n            {\n                throw new IllegalArgumentException(&quot;secret key for message not found.&quot;);\n            }\n\n            InputStream         clear = pbe.getDataStream(new JcePublicKeyDataDecryptorFactoryBuilder().setProvider(&quot;BC&quot;).build(sKey));\n\n            JcaPGPObjectFactory    plainFact = new JcaPGPObjectFactory(clear);\n\n            PGPCompressedData   cData = (PGPCompressedData)plainFact.nextObject();\n\n            InputStream         compressedStream = new BufferedInputStream(cData.getDataStream());\n            JcaPGPObjectFactory    pgpFact = new JcaPGPObjectFactory(compressedStream);\n\n            Object              message = pgpFact.nextObject();\n\n            if (message instanceof PGPLiteralData)\n            {\n                PGPLiteralData ld = (PGPLiteralData)message;\n\n                String outFileName = ld.getFileName();\n                if (outFileName.length() == 0)\n                {\n                    outFileName = defaultFileName;\n                }\n\n                InputStream unc = ld.getInputStream();\n                OutputStream fOut =  new BufferedOutputStream(new FileOutputStream(outFileName));\n\n                Streams.pipeAll(unc, fOut);\n\n                fOut.close();\n            }\n            else if (message instanceof PGPOnePassSignatureList)\n            {\n                throw new PGPException(&quot;encrypted message contains a signed message - not literal data.&quot;);\n            }\n            else\n            {\n                throw new PGPException(&quot;message is not a simple encrypted file - type unknown.&quot;);\n            }\n\n            if (pbe.isIntegrityProtected())\n            {\n                if (!pbe.verify())\n                {\n                    System.err.println(&quot;message failed integrity check&quot;);\n                }\n                else\n                {\n                    System.err.println(&quot;message integrity check passed&quot;);\n                }\n            }\n            else\n            {\n                System.err.println(&quot;no message integrity check&quot;);\n            }\n        }\n        catch (PGPException e)\n        {\n            System.err.println(e);\n            if (e.getUnderlyingException() != null)\n            {\n                e.getUnderlyingException().printStackTrace();\n            }\n        }\n    }\n\n    private static void encryptFile(\n            String          outputFileName,\n            String          inputFileName,\n            String          encKeyFileName,\n            boolean         armor,\n            boolean         withIntegrityCheck)\n            throws IOException, NoSuchProviderException, PGPException\n    {\n        OutputStream out = new BufferedOutputStream(new FileOutputStream(outputFileName));\n        PGPPublicKey encKey = PGPExampleUtil.readPublicKey(encKeyFileName);\n        encryptFile(out, inputFileName, encKey, armor, withIntegrityCheck);\n        out.close();\n    }\n\n    private static void encryptFile(\n            OutputStream    out,\n            String          fileName,\n            PGPPublicKey    encKey,\n            boolean         armor,\n            boolean         withIntegrityCheck)\n            throws IOException, NoSuchProviderException\n    {\n        if (armor)\n        {\n            out = new ArmoredOutputStream(out);\n        }\n\n        try\n        {\n            PGPEncryptedDataGenerator   cPk = new PGPEncryptedDataGenerator(new JcePGPDataEncryptorBuilder(PGPEncryptedData.CAST5).setWithIntegrityPacket(withIntegrityCheck).setSecureRandom(new SecureRandom()).setProvider(&quot;BC&quot;));\n\n            cPk.addMethod(new JcePublicKeyKeyEncryptionMethodGenerator(encKey).setProvider(&quot;BC&quot;));\n\n            OutputStream                cOut = cPk.open(out, new byte[1 &lt;&lt; 16]);\n\n            PGPCompressedDataGenerator  comData = new PGPCompressedDataGenerator(\n                    PGPCompressedData.ZIP);\n\n            PGPUtil.writeFileToLiteralData(comData.open(cOut), PGPLiteralData.BINARY, new File(fileName), new byte[1 &lt;&lt; 16]);\n\n            comData.close();\n\n            cOut.close();\n\n            if (armor)\n            {\n                out.close();\n            }\n        }\n        catch (PGPException e)\n        {\n            System.err.println(e);\n            if (e.getUnderlyingException() != null)\n            {\n                e.getUnderlyingException().printStackTrace();\n            }\n        }\n    }\n\n    public static void main(\n            String[] args)\n            throws Exception\n    {\n        Security.addProvider(new BouncyCastleProvider());\n\n        if (args.length == 0)\n        {\n            System.err.println(&quot;usage: KeyBasedLargeFileProcessor -e|-d [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]&quot;);\n            return;\n        }\n\n        if (args[0].equals(&quot;-e&quot;))\n        {\n            if (args[1].equals(&quot;-a&quot;) || args[1].equals(&quot;-ai&quot;) || args[1].equals(&quot;-ia&quot;))\n            {\n                encryptFile(args[2] + &quot;.asc&quot;, args[2], args[3], true, (args[1].indexOf('i') &gt; 0));\n            }\n            else if (args[1].equals(&quot;-i&quot;))\n            {\n                encryptFile(args[2] + &quot;.bpg&quot;, args[2], args[3], false, true);\n            }\n            else\n            {\n                encryptFile(args[1] + &quot;.bpg&quot;, args[1], args[2], false, false);\n            }\n        }\n        else if (args[0].equals(&quot;-d&quot;))\n        {\n            decryptFile(args[1], args[2], args[3].toCharArray(), new File(args[1]).getName() + &quot;.out&quot;);\n        }\n        else\n        {\n            System.err.println(&quot;usage: KeyBasedLargeFileProcessor -d|-e [-a|ai] file [secretKeyFile passPhrase|pubKeyFile]&quot;);\n        }\n    }\n}\n</code></pre>\n<p>class PGPExampleUtil.java</p>\n<pre><code>import java.io.BufferedInputStream;\nimport java.io.ByteArrayOutputStream;\nimport java.io.File;\nimport java.io.FileInputStream;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.security.NoSuchProviderException;\nimport java.util.Iterator;\n\nimport org.bouncycastle.openpgp.PGPCompressedDataGenerator;\nimport org.bouncycastle.openpgp.PGPException;\nimport org.bouncycastle.openpgp.PGPLiteralData;\nimport org.bouncycastle.openpgp.PGPPrivateKey;\nimport org.bouncycastle.openpgp.PGPPublicKey;\nimport org.bouncycastle.openpgp.PGPPublicKeyRing;\nimport org.bouncycastle.openpgp.PGPPublicKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPSecretKey;\nimport org.bouncycastle.openpgp.PGPSecretKeyRing;\nimport org.bouncycastle.openpgp.PGPSecretKeyRingCollection;\nimport org.bouncycastle.openpgp.PGPUtil;\nimport org.bouncycastle.openpgp.operator.jcajce.JcaKeyFingerprintCalculator;\nimport org.bouncycastle.openpgp.operator.jcajce.JcePBESecretKeyDecryptorBuilder;\n\nclass PGPExampleUtil\n{\n    static byte[] compressFile(String fileName, int algorithm) throws IOException\n    {\n        ByteArrayOutputStream bOut = new ByteArrayOutputStream();\n        PGPCompressedDataGenerator comData = new PGPCompressedDataGenerator(algorithm);\n        PGPUtil.writeFileToLiteralData(comData.open(bOut), PGPLiteralData.BINARY,\n                new File(fileName));\n        comData.close();\n        return bOut.toByteArray();\n    }\n\n    /**\n     * Search a secret key ring collection for a secret key corresponding to keyID if it\n     * exists.\n     *\n     * @param pgpSec a secret key ring collection.\n     * @param keyID keyID we want.\n     * @param pass passphrase to decrypt secret key with.\n     * @return the private key.\n     * @throws PGPException\n     * @throws NoSuchProviderException\n     */\n    static PGPPrivateKey findSecretKey(PGPSecretKeyRingCollection pgpSec, long keyID, char[] pass)\n            throws PGPException, NoSuchProviderException\n    {\n        PGPSecretKey pgpSecKey = pgpSec.getSecretKey(keyID);\n\n        if (pgpSecKey == null)\n        {\n            return null;\n        }\n\n        return pgpSecKey.extractPrivateKey(new JcePBESecretKeyDecryptorBuilder().setProvider(&quot;BC&quot;).build(pass));\n    }\n\n    static PGPPublicKey readPublicKey(String fileName) throws IOException, PGPException\n    {\n        InputStream keyIn = new BufferedInputStream(new FileInputStream(fileName));\n        PGPPublicKey pubKey = readPublicKey(keyIn);\n        keyIn.close();\n        return pubKey;\n    }\n\n    /**\n     * A simple routine that opens a key ring file and loads the first available key\n     * suitable for encryption.\n     *\n     * @param input data stream containing the public key data\n     * @return the first public key found.\n     * @throws IOException\n     * @throws PGPException\n     */\n    static PGPPublicKey readPublicKey(InputStream input) throws IOException, PGPException\n    {\n        PGPPublicKeyRingCollection pgpPub = new PGPPublicKeyRingCollection(\n                PGPUtil.getDecoderStream(input), new JcaKeyFingerprintCalculator());\n\n        //\n        // we just loop through the collection till we find a key suitable for encryption, in the real\n        // world you would probably want to be a bit smarter about this.\n        //\n\n        Iterator keyRingIter = pgpPub.getKeyRings();\n        while (keyRingIter.hasNext())\n        {\n            PGPPublicKeyRing keyRing = (PGPPublicKeyRing)keyRingIter.next();\n\n            Iterator keyIter = keyRing.getPublicKeys();\n            while (keyIter.hasNext())\n            {\n                PGPPublicKey key = (PGPPublicKey)keyIter.next();\n\n                if (key.isEncryptionKey())\n                {\n                    return key;\n                }\n            }\n        }\n\n        throw new IllegalArgumentException(&quot;Can't find encryption key in key ring.&quot;);\n    }\n\n    static PGPSecretKey readSecretKey(String fileName) throws IOException, PGPException\n    {\n        InputStream keyIn = new BufferedInputStream(new FileInputStream(fileName));\n        PGPSecretKey secKey = readSecretKey(keyIn);\n        keyIn.close();\n        return secKey;\n    }\n\n    /**\n     * A simple routine that opens a key ring file and loads the first available key\n     * suitable for signature generation.\n     *\n     * @param input stream to read the secret key ring collection from.\n     * @return a secret key.\n     * @throws IOException on a problem with using the input stream.\n     * @throws PGPException if there is an issue parsing the input stream.\n     */\n    static PGPSecretKey readSecretKey(InputStream input) throws IOException, PGPException\n    {\n        PGPSecretKeyRingCollection pgpSec = new PGPSecretKeyRingCollection(\n                PGPUtil.getDecoderStream(input), new JcaKeyFingerprintCalculator());\n\n        //\n        // we just loop through the collection till we find a key suitable for encryption, in the real\n        // world you would probably want to be a bit smarter about this.\n        //\n\n        Iterator keyRingIter = pgpSec.getKeyRings();\n        while (keyRingIter.hasNext())\n        {\n            PGPSecretKeyRing keyRing = (PGPSecretKeyRing)keyRingIter.next();\n\n            Iterator keyIter = keyRing.getSecretKeys();\n            while (keyIter.hasNext())\n            {\n                PGPSecretKey key = (PGPSecretKey)keyIter.next();\n\n                if (key.isSigningKey())\n                {\n                    return key;\n                }\n            }\n        }\n\n        throw new IllegalArgumentException(&quot;Can't find signing key in key ring.&quot;);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15457133,"reputation":185,"user_id":11150851,"display_name":"vanitasvitae"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696588997,"creation_date":1696588997,"answer_id":77243794,"question_id":63351345,"body_markdown":"You can make use of [PGPainless](https://pgpainless.org), which offers a straight forward OpenPGP API:\r\n\r\n```java\r\nInputStream publicKeyIn = ... // e.g. FileInputStream on the .asc file\r\nPGPPublicKeyRing publicKey = PGPainless.readKeyRing().publicKeyRing(publicKeyIn);\r\n\r\nInputStream dataIn = ... // The data you want to send\r\nOutputStream dataOut = ... // Where you want to put the encrypted data, e.g. FileOutputStream\r\n\r\nEncryptionStream encryptor = PGPainless.encryptAndOrSign()\r\n    .onOutputStream(dataOut)\r\n    .withOptions(ProducerOptions.encrypt(\r\n        EncryptionOptions.get()\r\n            .addRecipient(publicKey)\r\n    ));\r\n\r\nStreams.pipeAll(dataIn, encryptor);\r\nencryptor.close();\r\n```\r\n\r\nThere are many more examples in the [documentation](https://pgpainless.readthedocs.io/en/latest/quickstart.html#pgpainless-api-with-pgpainless-core).\r\n\r\nAlternatively, you could use PGPainless via the [SOP interface](https://pgpainless.readthedocs.io/en/latest/quickstart.html#sop-api-with-pgpainless-sop), which is even more straight forward and allows you to use alternative OpenPGP backends.","title":"java pgp encrypt file with public key in asc file","body":"<p>You can make use of <a href=\"https://pgpainless.org\" rel=\"nofollow noreferrer\">PGPainless</a>, which offers a straight forward OpenPGP API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>InputStream publicKeyIn = ... // e.g. FileInputStream on the .asc file\nPGPPublicKeyRing publicKey = PGPainless.readKeyRing().publicKeyRing(publicKeyIn);\n\nInputStream dataIn = ... // The data you want to send\nOutputStream dataOut = ... // Where you want to put the encrypted data, e.g. FileOutputStream\n\nEncryptionStream encryptor = PGPainless.encryptAndOrSign()\n    .onOutputStream(dataOut)\n    .withOptions(ProducerOptions.encrypt(\n        EncryptionOptions.get()\n            .addRecipient(publicKey)\n    ));\n\nStreams.pipeAll(dataIn, encryptor);\nencryptor.close();\n</code></pre>\n<p>There are many more examples in the <a href=\"https://pgpainless.readthedocs.io/en/latest/quickstart.html#pgpainless-api-with-pgpainless-core\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p>Alternatively, you could use PGPainless via the <a href=\"https://pgpainless.readthedocs.io/en/latest/quickstart.html#sop-api-with-pgpainless-sop\" rel=\"nofollow noreferrer\">SOP interface</a>, which is even more straight forward and allows you to use alternative OpenPGP backends.</p>\n"}],"owner":{"account_id":7527441,"reputation":129,"user_id":5717068,"accept_rate":75,"display_name":"Duong Nhat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11222,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":63355145,"answer_count":2,"score":4,"last_activity_date":1696588997,"creation_date":1597118709,"question_id":63351345,"body_markdown":"My customer use PGP desktop for file encryption. They send me a public key in an .asc file and I have to encrypt a zip file by this public key with java. But I can&#39;t find any java code that use asc file. There are some potential lib, such as didisoft but they only have commercial version. An example of asc bellow.\r\n```\r\n-----BEGIN PGP PUBLIC KEY BLOCK-----\r\nVersion: PGP Desktop 10.1.1 (Build 10) - not licensed for commercial use: www.pgp.com\r\n\r\nmQENBF8x/WUBCACiwQ/ff0ZtK+HzR4JDn6Na30NrZx4851LHFcB0EFR4XK1myPbA\r\nOnWHc3tHmJOErcgudfWuADysrWQv/cl3byInLDhxGwKmcsGjnPg1kjQxW46UI/GH\r\n0Fx8Ojs9zTqXOb5R0jCWhvGqN9Mq076CowhGp5RTtRjTjy18+ybimrjRvscNEoR6\r\nJsoJLgOgWpPq0FqVaFvNXl3scu9LBtDO41f1+2BkPOPvMcK8Nh7ZZ84w49mxi1SH\r\n19nFxBE8bWvVE3y6z0ksNJAIc0BYyPD9ykBxUs0vg7iIRActoJq4F/sSEA70numA\r\nP/MGvjjsU0Wf7qj1k7o8e3CIZf/Tz26xI44xABEBAAG0IENoYXUgTGluaCA8ZHVv\r\nbmd0bmhhdEBnbWFpbC5jb20+iQFyBBABAgBcBQJfMf1lMBSAAAAAACAAB3ByZWZl\r\ncnJlZC1lbWFpbC1lbmNvZGluZ0BwZ3AuY29tcGdwbWltZQgLCQgHAwIKAQIZAQUb\r\nAwAAAAUWAAMCAQUeAQAAAAYVCAkKAgMACgkQKvwFiacsRGtB9Qf+PkATFrSMFEKJ\r\nnGAJd7n7xejWSJrb9InLsMueVFwM26v2uw58RiYbxJ1E1/onXdrbDIKk3qzbmlYi\r\nctY6DmGgzO72X2yDnhAxyzqYqeZyDaK4v1hxQei3+B2vKhdg74bjM7KZPsjpY7+O\r\nTSn4uC+Q5NuNIddmlAHpobZnzo2BxK9PghwHZCQkBgwPAj/3M2+au3gpXMtGGdMK\r\nro9fwjVINtkpkFOdrfPHyExkVDakrOWd2M0RhdHRIeoCfBvXoV4hqsBHMZODRFTu\r\noR9GVazgScf4191t8PfgaP30dglOvEoteluxc9w/b+PDcKzDxWkai5zJkriS1fyc\r\ncnyq5kIUibkBDQRfMf1lAQgAvVFocZU5rx1gTi4RxJpCctRwOoV7Ih2vWMDp0L5+\r\nudD3XRxrI0yNLrAfQ/oXeFVVzADm1gEgrt+I3EuRH3Dh32hlvnEpuzmqhxHFwfrl\r\nXiWsQFTHXw2ZrriLuluQanP7jJbIHG7ES19qx+RgJsjKiZz7T3agDWYoqAdREYfx\r\nVKukNoADhvovHI3H1fvzvKCF3SoDVhoG7M6PR4eP8bUcVP0OU8R+yB8OD2iuJJP7\r\nqJNxjZwlRzjW6uUiSnheqx6c/7KzJIShSpPW9S/jdXUeYK8XMs3yZFuZrZDGZNz1\r\nWqCYLInAOj39eyHZYWQoLvf9gxBwu1gcklZUyEecCXRggQARAQABiQJBBBgBAgEr\r\nBQJfMf1mBRsMAAAAwF0gBBkBCAAGBQJfMf1mAAoJEJ38RwOGw3MGo0EIAKF2aRaG\r\n2fPpxsLZxA12tEVi8ozt4Hu0dzyIc3yKKE4a3Ll7gFurpbSas71Q6k1CFrAitAvk\r\n7mdnoPRR7GkLCRhU9Cvai0O8WnQrLewxLxgLiSPPBaEo6ovWiUomY/OROyhOLuIs\r\nX8x20exC7qjVj+szZmExRwP+gWAjO+JV4+PxO/tGWkSx0Z8GVhGk1MegNMsbyC7i\r\nDykjopUWy/236es/3yU9yw+MPm4K9dX4dR6UkdfTs/3zRB8mWvEOrZD5iJqPt0O2\r\nwr9peYkl7pPt2Q9Q4UNo74fuQ7x9oLifRCM+g2dfGDDZHZDu7gTi5ChywJb/PIIz\r\nC1dHuafshuKIxHIACgkQKvwFiacsRGsgJQf+OvSjXriteeMeBDUVIBjO3DFSFimM\r\nEIC0e4MIlUEZxI1+wVX8Eu2ya9wGvyf35LnAIp58OymUKJpj+I6sZrrmlxnviYDF\r\n1K0+pVXlZdSOSJSxyo9uKTjoyLOIQnGVMctVMGtJB8Ia9J1ozmGyxF6X5bS93GkN\r\n1CXCMhzrtz8qzLN1GeZ8CjAK2moR98NTM6lqtpeZBCjLgj8QwRuEcMAvvNtWzyXU\r\n7hyroFhDI6nJbV8uqqp0KPHl9OalIdpUqd5KdKX3quC+na6GTV5pfYaIL8Ik86B/\r\nEp0qgks8E2bBubOhNsBiIO7O4StiqfFPnPA1u7gUsp3GtNtIyPqevMW51Q==\r\n=bQJS\r\n-----END PGP PUBLIC KEY BLOCK-----\r\n```","title":"java pgp encrypt file with public key in asc file","body":"<p>My customer use PGP desktop for file encryption. They send me a public key in an .asc file and I have to encrypt a zip file by this public key with java. But I can't find any java code that use asc file. There are some potential lib, such as didisoft but they only have commercial version. An example of asc bellow.</p>\n<pre><code>-----BEGIN PGP PUBLIC KEY BLOCK-----\nVersion: PGP Desktop 10.1.1 (Build 10) - not licensed for commercial use: www.pgp.com\n\nmQENBF8x/WUBCACiwQ/ff0ZtK+HzR4JDn6Na30NrZx4851LHFcB0EFR4XK1myPbA\nOnWHc3tHmJOErcgudfWuADysrWQv/cl3byInLDhxGwKmcsGjnPg1kjQxW46UI/GH\n0Fx8Ojs9zTqXOb5R0jCWhvGqN9Mq076CowhGp5RTtRjTjy18+ybimrjRvscNEoR6\nJsoJLgOgWpPq0FqVaFvNXl3scu9LBtDO41f1+2BkPOPvMcK8Nh7ZZ84w49mxi1SH\n19nFxBE8bWvVE3y6z0ksNJAIc0BYyPD9ykBxUs0vg7iIRActoJq4F/sSEA70numA\nP/MGvjjsU0Wf7qj1k7o8e3CIZf/Tz26xI44xABEBAAG0IENoYXUgTGluaCA8ZHVv\nbmd0bmhhdEBnbWFpbC5jb20+iQFyBBABAgBcBQJfMf1lMBSAAAAAACAAB3ByZWZl\ncnJlZC1lbWFpbC1lbmNvZGluZ0BwZ3AuY29tcGdwbWltZQgLCQgHAwIKAQIZAQUb\nAwAAAAUWAAMCAQUeAQAAAAYVCAkKAgMACgkQKvwFiacsRGtB9Qf+PkATFrSMFEKJ\nnGAJd7n7xejWSJrb9InLsMueVFwM26v2uw58RiYbxJ1E1/onXdrbDIKk3qzbmlYi\nctY6DmGgzO72X2yDnhAxyzqYqeZyDaK4v1hxQei3+B2vKhdg74bjM7KZPsjpY7+O\nTSn4uC+Q5NuNIddmlAHpobZnzo2BxK9PghwHZCQkBgwPAj/3M2+au3gpXMtGGdMK\nro9fwjVINtkpkFOdrfPHyExkVDakrOWd2M0RhdHRIeoCfBvXoV4hqsBHMZODRFTu\noR9GVazgScf4191t8PfgaP30dglOvEoteluxc9w/b+PDcKzDxWkai5zJkriS1fyc\ncnyq5kIUibkBDQRfMf1lAQgAvVFocZU5rx1gTi4RxJpCctRwOoV7Ih2vWMDp0L5+\nudD3XRxrI0yNLrAfQ/oXeFVVzADm1gEgrt+I3EuRH3Dh32hlvnEpuzmqhxHFwfrl\nXiWsQFTHXw2ZrriLuluQanP7jJbIHG7ES19qx+RgJsjKiZz7T3agDWYoqAdREYfx\nVKukNoADhvovHI3H1fvzvKCF3SoDVhoG7M6PR4eP8bUcVP0OU8R+yB8OD2iuJJP7\nqJNxjZwlRzjW6uUiSnheqx6c/7KzJIShSpPW9S/jdXUeYK8XMs3yZFuZrZDGZNz1\nWqCYLInAOj39eyHZYWQoLvf9gxBwu1gcklZUyEecCXRggQARAQABiQJBBBgBAgEr\nBQJfMf1mBRsMAAAAwF0gBBkBCAAGBQJfMf1mAAoJEJ38RwOGw3MGo0EIAKF2aRaG\n2fPpxsLZxA12tEVi8ozt4Hu0dzyIc3yKKE4a3Ll7gFurpbSas71Q6k1CFrAitAvk\n7mdnoPRR7GkLCRhU9Cvai0O8WnQrLewxLxgLiSPPBaEo6ovWiUomY/OROyhOLuIs\nX8x20exC7qjVj+szZmExRwP+gWAjO+JV4+PxO/tGWkSx0Z8GVhGk1MegNMsbyC7i\nDykjopUWy/236es/3yU9yw+MPm4K9dX4dR6UkdfTs/3zRB8mWvEOrZD5iJqPt0O2\nwr9peYkl7pPt2Q9Q4UNo74fuQ7x9oLifRCM+g2dfGDDZHZDu7gTi5ChywJb/PIIz\nC1dHuafshuKIxHIACgkQKvwFiacsRGsgJQf+OvSjXriteeMeBDUVIBjO3DFSFimM\nEIC0e4MIlUEZxI1+wVX8Eu2ya9wGvyf35LnAIp58OymUKJpj+I6sZrrmlxnviYDF\n1K0+pVXlZdSOSJSxyo9uKTjoyLOIQnGVMctVMGtJB8Ia9J1ozmGyxF6X5bS93GkN\n1CXCMhzrtz8qzLN1GeZ8CjAK2moR98NTM6lqtpeZBCjLgj8QwRuEcMAvvNtWzyXU\n7hyroFhDI6nJbV8uqqp0KPHl9OalIdpUqd5KdKX3quC+na6GTV5pfYaIL8Ik86B/\nEp0qgks8E2bBubOhNsBiIO7O4StiqfFPnPA1u7gUsp3GtNtIyPqevMW51Q==\n=bQJS\n-----END PGP PUBLIC KEY BLOCK-----\n</code></pre>\n"},{"tags":["java","spring-boot","itext7"],"answers":[{"tags":[],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696588471,"creation_date":1696588471,"answer_id":77243745,"question_id":77229491,"body_markdown":"**SOLUTION**\r\n\r\nThe rectangle i was creating was wrong.\r\nIt was as big as the table, so evrything was shrinking.\r\nI set his dimentions to the width of the Document and the height of the table\r\n\r\nlike this:\r\n\r\n    new Canvas(canvas, new Rectangle(30, 40,documentWidth , tableHeight))\r\n                .add(table).close();\r\n    }\r\n\r\n\r\nNow it&#39;s centered and not distorted\r\n\r\n    \r\n\r\n \r\n","title":"Why I can&#39;t center the footer of a PDF with ITEXT pdf 7?","body":"<p><strong>SOLUTION</strong></p>\n<p>The rectangle i was creating was wrong.\nIt was as big as the table, so evrything was shrinking.\nI set his dimentions to the width of the Document and the height of the table</p>\n<p>like this:</p>\n<pre><code>new Canvas(canvas, new Rectangle(30, 40,documentWidth , tableHeight))\n            .add(table).close();\n}\n</code></pre>\n<p>Now it's centered and not distorted</p>\n"}],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696588471,"creation_date":1696421799,"question_id":77229491,"body_markdown":"I&#39;m trying to build a pdf generator and I must add 2 different footers based on the tipe of file im generating.\r\nOne has just a text that says &quot;This PDF is a sample&quot;.\r\nThe other one is basically a 3 columns table with a short description and 2 logos.\r\n\r\nThe problem is that the style of both the table and text gets overwritten somehow once i invoke the event handler, and i can&#39;t center both footers to the table.\r\n\r\nThe table has even more problems than the text because it&#39;s width gets reduced and so there is no spacing between the logos and the text\r\n\r\nI also noticed that the position of the footer depends on how many pages i have\r\n\r\nfor example this is how the footer looks like most of the times (the position is not always the same, and never the right position):\r\n[![enter image description here](https://i.stack.imgur.com/ie7rX.png)](https://i.stack.imgur.com/ie7rX.png)\r\n\r\n\r\n\r\n\r\nI tried setting the horizontal alignement to all the object \r\n\r\nThis is one of my cells, the others are identical except for the content \r\n```\r\n Image trustedImage = new Image(ImageDataFactory.create(pathLogo3));\r\n        trustedImage.scaleToFit(100, 100);\r\n\r\n        Cell trustedIdentity = new Cell().setBorder(new SolidBorder(whiteColor, 1f));\r\n        trustedIdentity.add(trustedImage.setHorizontalAlignment(HorizontalAlignment.CENTER));\r\n        table.addCell(trustedIdentity.setVerticalAlignment(VerticalAlignment.MIDDLE));\r\n```\r\nAs you can see i setted the horizontal alignment to both the image and the cell\r\n\r\nThis is how I invoke the eventHandler\r\n`                pdf.addEventHandler(PdfDocumentEvent.END_PAGE, new TableFooterEventHandler(creaTabellaFineDocumentoPlaceholder()));\r\n`\r\n\r\nand this is the actual TableFooterEventHandler class\r\n\r\n\r\n```\r\nimport com.itextpdf.kernel.events.Event;\r\nimport com.itextpdf.kernel.events.IEventHandler;\r\nimport com.itextpdf.kernel.events.PdfDocumentEvent;\r\nimport com.itextpdf.kernel.geom.Rectangle;\r\nimport com.itextpdf.kernel.pdf.PdfDocument;\r\nimport com.itextpdf.kernel.pdf.PdfPage;\r\nimport com.itextpdf.kernel.pdf.canvas.PdfCanvas;\r\nimport com.itextpdf.layout.Canvas;\r\nimport com.itextpdf.layout.element.Table;\r\nimport com.itextpdf.layout.properties.HorizontalAlignment;\r\n\r\npublic class TableFooterEventHandler implements IEventHandler {\r\n\r\n    private Table table;\r\n    public TableFooterEventHandler(Table table) {\r\n        this.table=table;\r\n    }\r\n\r\n    @Override\r\n    public void handleEvent(Event event) {\r\n\r\n        PdfDocumentEvent docEvent = (PdfDocumentEvent) event;\r\n        PdfDocument pdfDoc = docEvent.getDocument();\r\n        PdfPage page = docEvent.getPage();\r\n        PdfCanvas canvas = new PdfCanvas(page.newContentStreamBefore(), page.getResources(), pdfDoc);\r\n\r\n        float tableHeight = table.getHeight() == null ? 30  :  table.getHeight().getValue();\r\n        float tableWidth = table.getWidth() == null ? 30  :  table.getWidth().getValue();\r\n\r\n\r\n        float x = (page.getPageSize().getWidth() - table.getWidth().getValue()) /2;\r\n\r\n        new Canvas(canvas, new Rectangle(x, 20, table.getWidth().getValue(), 30))\r\n                .add(table.setHorizontalAlignment(HorizontalAlignment.CENTER)).setHorizontalAlignment(HorizontalAlignment.CENTER)\r\n                .close();\r\n    }\r\n}```\r\n\r\nAs you can see here I&#39;m creating a `Canvas` containing a `Rectangle` containing the `Table`\r\n\r\nI followed and example from ITEXT itself on this page (the first example) : [text](https://kb.itextpdf.com/home/it7kb/examples/page-events-for-headers-and-footers)\r\nAnd except for the &quot;style&quot; of the footer it kinda works \r\n\r\n\r\nsomebody know why it does&#39;t center the footer and it also overwrites the table settings, and how should I fix it?\r\n","title":"Why I can&#39;t center the footer of a PDF with ITEXT pdf 7?","body":"<p>I'm trying to build a pdf generator and I must add 2 different footers based on the tipe of file im generating.\nOne has just a text that says &quot;This PDF is a sample&quot;.\nThe other one is basically a 3 columns table with a short description and 2 logos.</p>\n<p>The problem is that the style of both the table and text gets overwritten somehow once i invoke the event handler, and i can't center both footers to the table.</p>\n<p>The table has even more problems than the text because it's width gets reduced and so there is no spacing between the logos and the text</p>\n<p>I also noticed that the position of the footer depends on how many pages i have</p>\n<p>for example this is how the footer looks like most of the times (the position is not always the same, and never the right position):\n<a href=\"https://i.stack.imgur.com/ie7rX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ie7rX.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried setting the horizontal alignement to all the object</p>\n<p>This is one of my cells, the others are identical except for the content</p>\n<pre><code> Image trustedImage = new Image(ImageDataFactory.create(pathLogo3));\n        trustedImage.scaleToFit(100, 100);\n\n        Cell trustedIdentity = new Cell().setBorder(new SolidBorder(whiteColor, 1f));\n        trustedIdentity.add(trustedImage.setHorizontalAlignment(HorizontalAlignment.CENTER));\n        table.addCell(trustedIdentity.setVerticalAlignment(VerticalAlignment.MIDDLE));\n</code></pre>\n<p>As you can see i setted the horizontal alignment to both the image and the cell</p>\n<p>This is how I invoke the eventHandler\n<code>               pdf.addEventHandler(PdfDocumentEvent.END_PAGE, new TableFooterEventHandler(creaTabellaFineDocumentoPlaceholder()));</code></p>\n<p>and this is the actual TableFooterEventHandler class</p>\n<pre><code>import com.itextpdf.kernel.events.Event;\nimport com.itextpdf.kernel.events.IEventHandler;\nimport com.itextpdf.kernel.events.PdfDocumentEvent;\nimport com.itextpdf.kernel.geom.Rectangle;\nimport com.itextpdf.kernel.pdf.PdfDocument;\nimport com.itextpdf.kernel.pdf.PdfPage;\nimport com.itextpdf.kernel.pdf.canvas.PdfCanvas;\nimport com.itextpdf.layout.Canvas;\nimport com.itextpdf.layout.element.Table;\nimport com.itextpdf.layout.properties.HorizontalAlignment;\n\npublic class TableFooterEventHandler implements IEventHandler {\n\n    private Table table;\n    public TableFooterEventHandler(Table table) {\n        this.table=table;\n    }\n\n    @Override\n    public void handleEvent(Event event) {\n\n        PdfDocumentEvent docEvent = (PdfDocumentEvent) event;\n        PdfDocument pdfDoc = docEvent.getDocument();\n        PdfPage page = docEvent.getPage();\n        PdfCanvas canvas = new PdfCanvas(page.newContentStreamBefore(), page.getResources(), pdfDoc);\n\n        float tableHeight = table.getHeight() == null ? 30  :  table.getHeight().getValue();\n        float tableWidth = table.getWidth() == null ? 30  :  table.getWidth().getValue();\n\n\n        float x = (page.getPageSize().getWidth() - table.getWidth().getValue()) /2;\n\n        new Canvas(canvas, new Rectangle(x, 20, table.getWidth().getValue(), 30))\n                .add(table.setHorizontalAlignment(HorizontalAlignment.CENTER)).setHorizontalAlignment(HorizontalAlignment.CENTER)\n                .close();\n    }\n}```\n\nAs you can see here I'm creating a `Canvas` containing a `Rectangle` containing the `Table`\n\nI followed and example from ITEXT itself on this page (the first example) : [text](https://kb.itextpdf.com/home/it7kb/examples/page-events-for-headers-and-footers)\nAnd except for the &quot;style&quot; of the footer it kinda works \n\n\nsomebody know why it does't center the footer and it also overwrites the table settings, and how should I fix it?\n</code></pre>\n"},{"tags":["java","spring","unit-testing","mockito","springrunner"],"comments":[{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":2,"creation_date":1564863818,"post_id":57341818,"comment_id":101171999,"body_markdown":"You need to provide the mock of `someClient` to `SomeService` - either manually by passing the reference or by using Annotations. But Annotations are out of the question for now as your constructor does not have a `SomeService` parameter.","body":"You need to provide the mock of <code>someClient</code> to <code>SomeService</code> - either manually by passing the reference or by using Annotations. But Annotations are out of the question for now as your constructor does not have a <code>SomeService</code> parameter."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":2,"creation_date":1564863821,"post_id":57341818,"comment_id":101172000,"body_markdown":"Don&#39;t `@Autowired` on properties, [`@Autowired` on the constructor.](https://www.baeldung.com/constructor-injection-in-spring) Also, you can use Mockito&#39;s [`@InjectMocks`](https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/InjectMocks.html) to inject the mocks into your unit under test. Furthermore, define what type you expect to be passed: `when(someClient.createTennant(any(Request.class)))...`.","body":"Don&#39;t <code>@Autowired</code> on properties, <a href=\"https://www.baeldung.com/constructor-injection-in-spring\" rel=\"nofollow noreferrer\"><code>@Autowired</code> on the constructor.</a> Also, you can use Mockito&#39;s <a href=\"https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/InjectMocks.html\" rel=\"nofollow noreferrer\"><code>@InjectMocks</code></a> to inject the mocks into your unit under test. Furthermore, define what type you expect to be passed: <code>when(someClient.createTennant(any(Request.class)))...</code>."},{"owner":{"account_id":15956467,"reputation":4079,"user_id":11514534,"display_name":"second"},"score":0,"creation_date":1564864386,"post_id":57341818,"comment_id":101172107,"body_markdown":"Another question would by why you create a `spy` on the class under test, but as your example does not cover that part it could be considered off-topic.","body":"Another question would by why you create a <code>spy</code> on the class under test, but as your example does not cover that part it could be considered off-topic."},{"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"score":0,"creation_date":1564864529,"post_id":57341818,"comment_id":101172130,"body_markdown":"Curious why not explicitly inject `SomeClient` into you derived service?","body":"Curious why not explicitly inject <code>SomeClient</code> into you derived service?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1564864580,"post_id":57341818,"comment_id":101172135,"body_markdown":"@Nkosi because the code - as-is - does not allow direct injection of `SomeClient` :-)","body":"@Nkosi because the code - as-is - does not allow direct injection of <code>SomeClient</code> :-)"},{"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"score":0,"creation_date":1564864741,"post_id":57341818,"comment_id":101172169,"body_markdown":"I more meant why not refractor to exicitly inject it. I wasn&#39;t clear enough.","body":"I more meant why not refractor to exicitly inject it. I wasn&#39;t clear enough."},{"owner":{"account_id":2132178,"reputation":2011,"user_id":1892775,"accept_rate":16,"display_name":"user1892775"},"score":0,"creation_date":1564864833,"post_id":57341818,"comment_id":101172186,"body_markdown":"@Nkosi Could you explain more with some code?","body":"@Nkosi Could you explain more with some code?"},{"owner":{"account_id":6799630,"reputation":238626,"user_id":5233410,"accept_rate":100,"display_name":"Nkosi"},"score":0,"creation_date":1564864899,"post_id":57341818,"comment_id":101172202,"body_markdown":"It was already explained in the provided answer. Constructor injection.","body":"It was already explained in the provided answer. Constructor injection."}],"answers":[{"tags":[],"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1619993381,"creation_date":1564864535,"answer_id":57341902,"question_id":57341818,"body_markdown":"We can use Mockito&#39;s [`@InjectMocks`-annotation][InjectMock] to inject mocks into our unit under test. For this, we also need to\r\n\r\n- remove mock intialization from the `setup()`-method and\r\n- annotate the mocks with [`@Mock`][Mock]\r\n\r\n---\r\nRemarks:\r\n\r\n- Instead of field injection, I would recommend [constructor injection][ConstructorInjection]. This allows, among other things, to keep the structure of the code and create the unit under test within `setup()` by manual injection\r\n- I would also recommend to add a type to the `when`: `when(someClient.createTennant(any(Request.class)))...`\r\n- As was pointed out by @second, the `spy` on the unit under test is superfluous.\r\n- Also pointed out by @second was the fact that field injection will not work if a constructor is present\r\n\r\n[InjectMock]: https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/InjectMocks.html\r\n[Mock]: https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/Mock.html\r\n[ConstructorInjection]: https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/Mock.html","title":"Unit testing a method of a class that has a constructor and an autowired field that needs to be mocked using mockito","body":"<p>We can use Mockito's <a href=\"https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/InjectMocks.html\" rel=\"nofollow noreferrer\"><code>@InjectMocks</code>-annotation</a> to inject mocks into our unit under test. For this, we also need to</p>\n<ul>\n<li>remove mock intialization from the <code>setup()</code>-method and</li>\n<li>annotate the mocks with <a href=\"https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/Mock.html\" rel=\"nofollow noreferrer\"><code>@Mock</code></a></li>\n</ul>\n<hr />\n<p>Remarks:</p>\n<ul>\n<li>Instead of field injection, I would recommend <a href=\"https://static.javadoc.io/org.mockito/mockito-core/3.0.0/org/mockito/Mock.html\" rel=\"nofollow noreferrer\">constructor injection</a>. This allows, among other things, to keep the structure of the code and create the unit under test within <code>setup()</code> by manual injection</li>\n<li>I would also recommend to add a type to the <code>when</code>: <code>when(someClient.createTennant(any(Request.class)))...</code></li>\n<li>As was pointed out by @second, the <code>spy</code> on the unit under test is superfluous.</li>\n<li>Also pointed out by @second was the fact that field injection will not work if a constructor is present</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15120466,"reputation":87,"user_id":10911410,"display_name":"Ngoc Dinh Cong"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696587918,"creation_date":1696587918,"answer_id":77243690,"question_id":57341818,"body_markdown":"In this case you don&#39;t need to use @InjectMocks and @Mock.\r\nLet&#39;s init your target class by using constructor\r\n\r\n    i.e: \r\n    Product product = Mockito.mock(Product.class);\r\n    ...\r\n    SomeService service = new SomeService(product,...);\r\n\r\nThen use ReflectionTestUtils to init @Autowire fields by Mockito class\r\n\r\n    i.e:\r\n    SomeClient someClient = Mockito.mock(SomeClient.class);\r\n    ReflectionTestUtils.setField(service, &quot;someClient&quot;, someClient);\r\n\r\n","title":"Unit testing a method of a class that has a constructor and an autowired field that needs to be mocked using mockito","body":"<p>In this case you don't need to use @InjectMocks and @Mock.\nLet's init your target class by using constructor</p>\n<pre><code>i.e: \nProduct product = Mockito.mock(Product.class);\n...\nSomeService service = new SomeService(product,...);\n</code></pre>\n<p>Then use ReflectionTestUtils to init @Autowire fields by Mockito class</p>\n<pre><code>i.e:\nSomeClient someClient = Mockito.mock(SomeClient.class);\nReflectionTestUtils.setField(service, &quot;someClient&quot;, someClient);\n</code></pre>\n"}],"owner":{"account_id":2132178,"reputation":2011,"user_id":1892775,"accept_rate":16,"display_name":"user1892775"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1614,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696587918,"creation_date":1564863607,"question_id":57341818,"body_markdown":"I have a service class that extends another service with a constructor. This class has an autowired field and a method that I wanted to unit test using Mockito. However, I am having trouble writing a unit for it.\r\n\r\nLet say the service looks somewhat like this:\r\n\r\n    @Service\r\n    public class SomeService extends Service {\r\n    \r\n        @Autowired\r\n        private SomeClient someClient;\r\n    \r\n        public SomeService(Product product, @Qualifier(Constants.SOME_BEAN) Details temp) {\r\n            super(product, temp);\r\n        }\r\n    \t@Override\r\n        public State create() {\r\n            Request request = new Request();\r\n            request.set...\r\n    \t\trequest.set..\r\n    \r\n            Status status = someClient.createTenant(request);\r\n            ..\r\n    \t\t.. // construct a State object and return\r\n        }\r\n    }\r\n\r\nNow, I am writing a test for this class and I am trying to unit test the method create() above. I am having trouble mocking someClient there when this method is called by my test.\r\n\r\nThe test class looks somewhat like:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class SomeServiceTest {\r\n        private Detail temp;\r\n    \t\r\n        private SomeFacade service;\r\n    \r\n        private SomeClient someClient;\r\n    \r\n        private Product product;\r\n    \r\n        @Before\r\n        public void setup() {\r\n            temp = mock(Details.class);\r\n            product = mock(Product.class);\r\n            service = spy(new SomeService(product, temp));\r\n            someClient = mock(SomeClient.class);\r\n        }\r\n    \r\n        @Test\r\n        public void test() {\r\n            Status status = new Status();\r\n            status.setStatus(...);\r\n            when(someClient.createTenant(any())).thenReturn(status);\r\n            State state =  service.create();\r\n    \r\n            // asserts\r\n        }\r\n    }\t\r\n\r\nWhat I want to is that when I call service.create in the test above, the call \r\n`someClient.createTenant(request);` in the method tested should be mocked to return a value and this is something I am not able to get working. Any help?","title":"Unit testing a method of a class that has a constructor and an autowired field that needs to be mocked using mockito","body":"<p>I have a service class that extends another service with a constructor. This class has an autowired field and a method that I wanted to unit test using Mockito. However, I am having trouble writing a unit for it.</p>\n\n<p>Let say the service looks somewhat like this:</p>\n\n<pre><code>@Service\npublic class SomeService extends Service {\n\n    @Autowired\n    private SomeClient someClient;\n\n    public SomeService(Product product, @Qualifier(Constants.SOME_BEAN) Details temp) {\n        super(product, temp);\n    }\n    @Override\n    public State create() {\n        Request request = new Request();\n        request.set...\n        request.set..\n\n        Status status = someClient.createTenant(request);\n        ..\n        .. // construct a State object and return\n    }\n}\n</code></pre>\n\n<p>Now, I am writing a test for this class and I am trying to unit test the method create() above. I am having trouble mocking someClient there when this method is called by my test.</p>\n\n<p>The test class looks somewhat like:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class SomeServiceTest {\n    private Detail temp;\n\n    private SomeFacade service;\n\n    private SomeClient someClient;\n\n    private Product product;\n\n    @Before\n    public void setup() {\n        temp = mock(Details.class);\n        product = mock(Product.class);\n        service = spy(new SomeService(product, temp));\n        someClient = mock(SomeClient.class);\n    }\n\n    @Test\n    public void test() {\n        Status status = new Status();\n        status.setStatus(...);\n        when(someClient.createTenant(any())).thenReturn(status);\n        State state =  service.create();\n\n        // asserts\n    }\n}   \n</code></pre>\n\n<p>What I want to is that when I call service.create in the test above, the call \n<code>someClient.createTenant(request);</code> in the method tested should be mocked to return a value and this is something I am not able to get working. Any help?</p>\n"},{"tags":["java","methods","switch-statement","return"],"comments":[{"owner":{"account_id":442137,"reputation":57382,"user_id":832621,"accept_rate":87,"display_name":"Saullo G. P. Castro"},"score":0,"creation_date":1448928344,"post_id":17961047,"comment_id":55776680,"body_markdown":"Possible duplicate of [Switch statement with returns -- code correctness](http://stackoverflow.com/questions/3065438/switch-statement-with-returns-code-correctness)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/3065438/switch-statement-with-returns-code-correctness\">Switch statement with returns -- code correctness</a>"},{"owner":{"account_id":9007847,"reputation":1050,"user_id":6713758,"accept_rate":78,"display_name":"FKEinternet"},"score":0,"creation_date":1632779461,"post_id":17961047,"comment_id":122581096,"body_markdown":"You&#39;ve declared an array of 10 String objects, but you&#39;ve assigned a String to the *ELEVENTH* position in the array (wordsShapes[10]) - array indices are 0-(n-1), not 1-n.  I&#39;m surprised the compiler didn&#39;t generate an error because of that.","body":"You&#39;ve declared an array of 10 String objects, but you&#39;ve assigned a String to the <i>ELEVENTH</i> position in the array (wordsShapes[10]) - array indices are 0-(n-1), not 1-n.  I&#39;m surprised the compiler didn&#39;t generate an error because of that."}],"answers":[{"tags":[],"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1375242020,"creation_date":1375241264,"answer_id":17961074,"question_id":17961047,"body_markdown":"The problem is not that you have return statements inside the `switch` statement, which are perfectly fine, but you have no return _after_ the switch statement.  If your switch statement completes without returning, what will happen now?\r\n\r\nThe rules of Java require that all paths through a value-returning function encounter a `return` statement.  In your case, even though _you_ know the value of `i` will always be of a value that will cause a `return` from the switch, the Java compiler isn&#39;t smart enough to determine that.\r\n\r\n(ASIDE: By the way, you didn&#39;t actually prevent the value 0 from being generated; maybe your `if` should be a `while`.)\r\n\r\nADDENDUM:  In case you are interested, here&#39;s an implementation.  See http://ideone.com/IpIwis for the live example.\r\n\r\n    import java.util.Random;\r\n    class Main {\r\n        private static final Random random = new Random();\r\n \r\n        private static final String[] SHAPES = {\r\n            &quot;square&quot;, &quot;circle&quot;, &quot;cone&quot;, &quot;prism&quot;, &quot;cube&quot;, &quot;cylinder&quot;, &quot;triangle&quot;,\r\n            &quot;star&quot;, &quot;moon&quot;, &quot;parallelogram&quot;\r\n        };\r\n \r\n        public static String randomShapeWord() {\r\n            return SHAPES[random.nextInt(SHAPES.length)];\r\n        }\r\n \r\n        public static void main(String[] args) {\r\n            for (int i = 0; i &lt; 20; i++) {\r\n                System.out.println(randomShapeWord());\r\n            }\r\n        }\r\n    }\r\n \r\nNote the best practice of having the random number generator defined outside the function.\r\n","title":"Can I put a return statement inside a switch statement?","body":"<p>The problem is not that you have return statements inside the <code>switch</code> statement, which are perfectly fine, but you have no return <em>after</em> the switch statement.  If your switch statement completes without returning, what will happen now?</p>\n\n<p>The rules of Java require that all paths through a value-returning function encounter a <code>return</code> statement.  In your case, even though <em>you</em> know the value of <code>i</code> will always be of a value that will cause a <code>return</code> from the switch, the Java compiler isn't smart enough to determine that.</p>\n\n<p>(ASIDE: By the way, you didn't actually prevent the value 0 from being generated; maybe your <code>if</code> should be a <code>while</code>.)</p>\n\n<p>ADDENDUM:  In case you are interested, here's an implementation.  See <a href=\"http://ideone.com/IpIwis\" rel=\"nofollow\">http://ideone.com/IpIwis</a> for the live example.</p>\n\n<pre><code>import java.util.Random;\nclass Main {\n    private static final Random random = new Random();\n\n    private static final String[] SHAPES = {\n        \"square\", \"circle\", \"cone\", \"prism\", \"cube\", \"cylinder\", \"triangle\",\n        \"star\", \"moon\", \"parallelogram\"\n    };\n\n    public static String randomShapeWord() {\n        return SHAPES[random.nextInt(SHAPES.length)];\n    }\n\n    public static void main(String[] args) {\n        for (int i = 0; i &lt; 20; i++) {\n            System.out.println(randomShapeWord());\n        }\n    }\n}\n</code></pre>\n\n<p>Note the best practice of having the random number generator defined outside the function.</p>\n"},{"tags":[],"owner":{"account_id":189467,"reputation":1753,"user_id":428813,"accept_rate":100,"display_name":"Ramon Araujo"},"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1696587648,"creation_date":1375241379,"answer_id":17961084,"question_id":17961047,"body_markdown":"You can simply do:\r\n\r\n    return wordsShapes[i].toString();\r\n\r\nThis way you can avoid the switch and all.","title":"Can I put a return statement inside a switch statement?","body":"<p>You can simply do:</p>\n<pre><code>return wordsShapes[i].toString();\n</code></pre>\n<p>This way you can avoid the switch and all.</p>\n"},{"tags":[],"owner":{"account_id":62111,"reputation":40153,"user_id":184730,"accept_rate":72,"display_name":"fastcodejava"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1375243573,"creation_date":1375243573,"answer_id":17961416,"question_id":17961047,"body_markdown":"You can put `return` inside `switch` but you don&#39;t need to use `switch` in this case.","title":"Can I put a return statement inside a switch statement?","body":"<p>You can put <code>return</code> inside <code>switch</code> but you don't need to use <code>switch</code> in this case.</p>\n"},{"tags":[],"owner":{"account_id":8986159,"reputation":1,"user_id":6699676,"display_name":"Vbalaji21"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1470822987,"creation_date":1470822987,"answer_id":38870020,"question_id":17961047,"body_markdown":"The return statement will return from the entire function in which it is used.So I think it is good that no other useful lines of code must be there below the switch if you want to use the return statement in the switch. ","title":"Can I put a return statement inside a switch statement?","body":"<p>The return statement will return from the entire function in which it is used.So I think it is good that no other useful lines of code must be there below the switch if you want to use the return statement in the switch. </p>\n"}],"owner":{"account_id":2237649,"reputation":542,"user_id":1973535,"accept_rate":77,"display_name":"Fouroh3"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16119,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":17961084,"answer_count":4,"score":11,"last_activity_date":1696587648,"creation_date":1375241071,"question_id":17961047,"body_markdown":"Am I allowed to have a `switch` statement which decides what to return? For example, I want to return something different based on what my random generator come up with. Eclipse is giving me an error wanting me to put the `return` statement outside the `switch`.\r\n\r\nMy code:\r\n\r\n    public String wordBank() { //Error here saying: &quot;This method must return a type of string&quot;\r\n\t\tString[] wordsShapes = new String[10];\r\n\t\twordsShapes[1] = &quot;square&quot;;\r\n\t\twordsShapes[2] = &quot;circle&quot;;\r\n\t\twordsShapes[3] = &quot;cone&quot;;\r\n\t\twordsShapes[4] = &quot;prisim&quot;;\r\n\t\twordsShapes[5] = &quot;cube&quot;;\r\n\t\twordsShapes[6] = &quot;cylinder&quot;;\r\n\t\twordsShapes[7] = &quot;triangle&quot;;\r\n\t\twordsShapes[8] = &quot;star&quot;;\r\n\t\twordsShapes[9] = &quot;moon&quot;;\r\n\t\twordsShapes[10] = &quot;paralellogram&quot;;\r\n\r\n\t\tRandom rand = new Random();\r\n\t\tint i = rand.nextInt(11);\r\n\r\n\t\tif (i == 0) {\r\n\t\t\ti = rand.nextInt(11);\r\n\t\t}\r\n\r\n\t\tswitch (i) {\r\n\t\tcase 1:\r\n\t\t\treturn wordsShapes[1].toString();\r\n\t\tcase 2:\r\n\t\t\treturn wordsShapes[2].toString();\r\n\t\tcase 3:\r\n\t\t\treturn wordsShapes[3].toString();\r\n\t\tcase 4:\r\n\t\t\treturn wordsShapes[4].toString();\r\n\t\tcase 5:\r\n\t\t\treturn wordsShapes[5].toString();\r\n\t\tcase 6:\r\n\t\t\treturn wordsShapes[6].toString();\r\n\t\tcase 7:\r\n\t\t\treturn wordsShapes[7].toString();\r\n\t\tcase 8:\r\n\t\t\treturn wordsShapes[8].toString();\r\n\t\tcase 9:\r\n\t\t\treturn wordsShapes[9].toString();\r\n\t\tcase 10:\r\n\t\t\treturn wordsShapes[10].toString();\r\n\t\t}\r\n\t}\r\n\r\n","title":"Can I put a return statement inside a switch statement?","body":"<p>Am I allowed to have a <code>switch</code> statement which decides what to return? For example, I want to return something different based on what my random generator come up with. Eclipse is giving me an error wanting me to put the <code>return</code> statement outside the <code>switch</code>.</p>\n\n<p>My code:</p>\n\n<pre><code>public String wordBank() { //Error here saying: \"This method must return a type of string\"\n    String[] wordsShapes = new String[10];\n    wordsShapes[1] = \"square\";\n    wordsShapes[2] = \"circle\";\n    wordsShapes[3] = \"cone\";\n    wordsShapes[4] = \"prisim\";\n    wordsShapes[5] = \"cube\";\n    wordsShapes[6] = \"cylinder\";\n    wordsShapes[7] = \"triangle\";\n    wordsShapes[8] = \"star\";\n    wordsShapes[9] = \"moon\";\n    wordsShapes[10] = \"paralellogram\";\n\n    Random rand = new Random();\n    int i = rand.nextInt(11);\n\n    if (i == 0) {\n        i = rand.nextInt(11);\n    }\n\n    switch (i) {\n    case 1:\n        return wordsShapes[1].toString();\n    case 2:\n        return wordsShapes[2].toString();\n    case 3:\n        return wordsShapes[3].toString();\n    case 4:\n        return wordsShapes[4].toString();\n    case 5:\n        return wordsShapes[5].toString();\n    case 6:\n        return wordsShapes[6].toString();\n    case 7:\n        return wordsShapes[7].toString();\n    case 8:\n        return wordsShapes[8].toString();\n    case 9:\n        return wordsShapes[9].toString();\n    case 10:\n        return wordsShapes[10].toString();\n    }\n}\n</code></pre>\n"},{"tags":["java","bridge","ui-spy"],"owner":{"account_id":8145351,"reputation":61,"user_id":6134158,"display_name":"karthik110885"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696587378,"creation_date":1696587378,"question_id":77243636,"body_markdown":"I am trying to automate JMeter using Java Access Bridge for learning purposes. Am using pyjab which is a python wrapper for JAB. I have installed access bridge explorer to inspect the elements in JMeter and get their properties. However, there are some checkboxes that is not displayed in the root pane in the access bridge explorer but the properties are shown when highlighted. \r\n\r\nWhen i try to click it am getting the error that element is not available in root node. \r\n\r\n[![checkbox am trying to click][1]][1]\r\n\r\nits not listed in here.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nThanks for your help...\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DTdUC.png\r\n  [2]: https://i.stack.imgur.com/MOvXO.png","title":"access bridge explorer not listing the checkboxes in JMeter window","body":"<p>I am trying to automate JMeter using Java Access Bridge for learning purposes. Am using pyjab which is a python wrapper for JAB. I have installed access bridge explorer to inspect the elements in JMeter and get their properties. However, there are some checkboxes that is not displayed in the root pane in the access bridge explorer but the properties are shown when highlighted.</p>\n<p>When i try to click it am getting the error that element is not available in root node.</p>\n<p><a href=\"https://i.stack.imgur.com/DTdUC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DTdUC.png\" alt=\"checkbox am trying to click\" /></a></p>\n<p>its not listed in here.</p>\n<p><a href=\"https://i.stack.imgur.com/MOvXO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MOvXO.png\" alt=\"enter image description here\" /></a></p>\n<p>Thanks for your help...</p>\n"},{"tags":["java","android","fragment","ott","tablayout"],"owner":{"account_id":20274715,"reputation":1,"user_id":14870049,"display_name":"siddhant yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696586772,"creation_date":1696586772,"question_id":77243557,"body_markdown":"I have Home, Movies, Live TV, TV Guide, Apps &amp; Games Tabs and on every click on tab I open fragment which contains multiple rail like Bollywood Movies Rail and others rail also and when I press up button fragment rail focus goes on tab above rail data like it goes to all home, movies, live tv tab and i want to make that if i opened a movies fragment by clicking on movies tab so on pressing up button my focus should go to movies tab not on other tab HOW TO FIX THIS ! \r\n\r\nI try to customize my XML Files by implementing next focus up on tab but it didn&#39;t work.","title":"Tabs Focus Behaviour problem by fragment next focus up on tab layout","body":"<p>I have Home, Movies, Live TV, TV Guide, Apps &amp; Games Tabs and on every click on tab I open fragment which contains multiple rail like Bollywood Movies Rail and others rail also and when I press up button fragment rail focus goes on tab above rail data like it goes to all home, movies, live tv tab and i want to make that if i opened a movies fragment by clicking on movies tab so on pressing up button my focus should go to movies tab not on other tab HOW TO FIX THIS !</p>\n<p>I try to customize my XML Files by implementing next focus up on tab but it didn't work.</p>\n"},{"tags":["java","android","broadcastreceiver","telephonymanager","phone-state-listener"],"comments":[{"owner":{"account_id":6361550,"reputation":37042,"user_id":4936904,"display_name":"Pavneet_Singh"},"score":0,"creation_date":1474526086,"post_id":39631794,"comment_id":66568398,"body_markdown":"post your code along with question","body":"post your code along with question"},{"owner":{"account_id":8346077,"reputation":31,"user_id":6269759,"display_name":"Ekta"},"score":0,"creation_date":1474613628,"post_id":39631794,"comment_id":66611293,"body_markdown":"I got following logs:\n\n--&gt;onReceive() Call state: null  CallNo. null\n--&gt;onReceive() Call state: OFFHOOK CallNo. 7096059843\n--&gt;onReceive() Call state: IDLE CallNo. null","body":"I got following logs:  --&gt;onReceive() Call state: null  CallNo. null --&gt;onReceive() Call state: OFFHOOK CallNo. 7096059843 --&gt;onReceive() Call state: IDLE CallNo. null"}],"answers":[{"tags":[],"owner":{"account_id":4908638,"reputation":311,"user_id":3954582,"display_name":"ousanmaz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1571285250,"creation_date":1475178461,"answer_id":39778794,"question_id":39631794,"body_markdown":"Your Broadast Recevier gets fired each time the Phone State Changes.\r\n\r\nWhat this does is it sets the incoming_no to null after Ringing, each time the state changes.\r\n\r\nFirst the phone Rings. At that moment you are able to get the number. When the Phone number changes state to IDLE or OFF_HOOK, your number gets set to null again, since the BR fires all over again.\r\n\r\n\r\n`String incoming_number = null;` is what is setting your number to null. This is the code that is messing it up. Turn it into:\r\n\r\n````\r\nMainActivity:\r\n\r\nString incoming_number;\r\n\r\nBroadcastReceiver\r\n\r\nMainActivity.incomingnumber = XXX-XXX-XXXX ; \r\n\r\n//when done with the number clean it\r\nMainActivity.incomingnumber = null;\r\n````","title":"Phone number is set to null at the time of OFFHOOK state of TelephonyManager","body":"<p>Your Broadast Recevier gets fired each time the Phone State Changes.</p>\n\n<p>What this does is it sets the incoming_no to null after Ringing, each time the state changes.</p>\n\n<p>First the phone Rings. At that moment you are able to get the number. When the Phone number changes state to IDLE or OFF_HOOK, your number gets set to null again, since the BR fires all over again.</p>\n\n<p><code>String incoming_number = null;</code> is what is setting your number to null. This is the code that is messing it up. Turn it into:</p>\n\n<pre><code>MainActivity:\n\nString incoming_number;\n\nBroadcastReceiver\n\nMainActivity.incomingnumber = XXX-XXX-XXXX ; \n\n//when done with the number clean it\nMainActivity.incomingnumber = null;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18145552,"reputation":1,"user_id":13198924,"display_name":"Twisted"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1585835511,"creation_date":1585835511,"answer_id":60993173,"question_id":39631794,"body_markdown":"or you could just delete your call recording app. The call recording apps cause this problem also.","title":"Phone number is set to null at the time of OFFHOOK state of TelephonyManager","body":"<p>or you could just delete your call recording app. The call recording apps cause this problem also.</p>\n"}],"owner":{"account_id":8346077,"reputation":31,"user_id":6269759,"display_name":"Ekta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8736,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1696586770,"creation_date":1474525824,"question_id":39631794,"body_markdown":"I get a phone number at the time of the ringing state, but sometimes, it is set to null at the time of the off hook state. I can&#39;t catch the moment where it goes to null.\r\n\r\nSo, when a call comes (incoming call) it goes to `RINGING STATE` and the number is set to callno variable. After that when I pick up the call it goes to `OFFHOOK STATE` and I got `null` in callno therefore it gives me a `NullPointerException`. \r\n\r\nHow do I prevent this situation?\r\n\r\n\r\n\r\npublic class CallStateReceiver extends BroadcastReceiver {\r\n\r\n\tprivate static boolean noCallListenerYet = true;\r\n\tTelephonyManager telephonyManager;\r\n\tstatic MyPhoneStateListener phoneListener;\r\n\tprivate static Context context1;\r\n\tContext context;\r\n\tprivate int prevState;\r\n\tString userId;\r\n\tString incoming_number = null;\r\n\tBundle bundle;\r\n\tString state;\r\n\tprivate static String callno = null;\r\n\tstatic SharedPreferences pref;\r\n\tstatic int cidvalue;\r\n\t/*Added to resolve the below bug:\r\n\t * Bug: At the time of call comes on poped up note and \r\n\t * \t\tbelow note was not send and new userid not \r\n\t * \t\treplace with older userid.\r\n\t */\r\n\tprivate static boolean isOnReceive = false;\r\n\t\r\n\tpublic static String getCallno() {\r\n\t\treturn callno;\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void onReceive(Context context, Intent intent) {\r\n\t\tString state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);\r\n\t\t\r\n\t\t\r\n\t\tisOnReceive = true;\r\n\t\t\r\n\t\tif( CallTrackerModel.isRecording() ){\r\n\t\t}else{\r\n\t\t\r\n\t\tCallTrackerModel.setCallId(&quot;&quot;);\r\n\t\ttry{\r\n\t\t\tif (intent.getAction()\r\n\t\t\t\t\t.equals(&quot;android.intent.action.NEW_OUTGOING_CALL&quot;)) {\r\n\t\t\t\tif ((bundle = intent.getExtras()) != null) {\r\n\t\t\t\t\tcallno = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);\r\n\t\t\t\t\tcallno = callno.replaceAll(&quot; &quot;, &quot;&quot;);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch(Exception e){\r\n\t\t}\r\n\r\n\t\ttry{\r\n\t\tif (noCallListenerYet) {\r\n\t\t\ttelephonyManager = (TelephonyManager) context\r\n\t\t\t\t\t.getSystemService(Context.TELEPHONY_SERVICE);\r\n\t\t\tif (phoneListener == null) {\r\n\t\t\t\tphoneListener = new MyPhoneStateListener(context);\r\n\t\t\t\ttelephonyManager.listen(phoneListener,\r\n\t\t\t\t\t\tPhoneStateListener.LISTEN_CALL_STATE);\r\n\t\t\t}\r\n\t\t\tnoCallListenerYet = false;\r\n\t\t}\r\n\t\t}catch(Exception e){\r\n\t\t\tisOnReceive = false;\r\n\t\t}\r\n\t\t\t\t\r\n\t\tcontext1 = context;\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\tpublic static int returncid() {\r\n\t\tint cid;\r\n\t\tpref = context1.getSharedPreferences(&quot;Myprefer&quot;, 0);\r\n\t\tSharedPreferences.Editor editor = pref.edit();\r\n\t\tcid = pref.getInt(&quot;currentcid&quot;, 0);\r\n\t\tif (cid == 0) {\r\n\t\t\tcid = cid + 1;\r\n\t\t}\r\n\t\teditor.putInt(&quot;currentcid&quot;, cid);\r\n\t\teditor.commit();\r\n\t\tpref = context1.getSharedPreferences(&quot;Myprefer&quot;, 0);\r\n\t\tcidvalue = pref.getInt(&quot;currentcid&quot;, 0);\r\n\t\treturn cidvalue;\r\n\t}\r\n\r\n\t\r\n\tprivate class MyPhoneStateListener extends PhoneStateListener {\r\n\r\n\t\tContext context;\r\n\t\tMyPhoneStateListener(Context c) {\r\n\t\t\tsuper();\r\n\t\t\tcontext = c;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Listen call state changes.\r\n\t\t */\r\n\t\tpublic void onCallStateChanged(int state, String incomingNumber) {\r\n\t\t\tCallTrackerModel ctm = new CallTrackerModel(context1);\r\n\t\t\tswitch (state) {\r\n\r\n\t\t\t// Incoming/Outgoing call over.\r\n\t\t\tcase TelephonyManager.CALL_STATE_IDLE:\r\n\t\t\t\t\r\n\t\t\t\tif (CallTrackerModel.returnRecordStarted()) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tctm.stopRecording();\r\n\t\t\t\t\tuserId = RetrieveUserId.getUserId();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//For Received calls.\r\n\t\t\t\tif (prevState == TelephonyManager.CALL_STATE_OFFHOOK) {\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tcidvalue = pref.getInt(&quot;currentcid&quot;, 0);\r\n\t\t\t\t\t\t++cidvalue;\r\n\t\t\t\t\t\tpref = context1.getSharedPreferences(&quot;Myprefer&quot;, 0);\r\n\t\t\t\t\t\tSharedPreferences.Editor editor = pref.edit();\r\n\t\t\t\t\t\teditor.putInt(&quot;currentcid&quot;, cidvalue);\r\n\t\t\t\t\t\teditor.commit();\r\n\t\t\t\t\t\tprevState = state;\r\n\t\t\t\t\t\t// Start note activity.\r\n\t\t\t\t\t\tIntent i = new Intent(context1, NoteActivity.class);\r\n\t\t\t\t\t\ti.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\r\n\t\t\t\t\t\ti.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (userId == null) {\r\n\t\t\t\t\t\t\tuserId = &quot;@@&quot;;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ti.putExtra(&quot;userId&quot;, userId);\r\n\t\t\t\t\t\ti.putExtra(&quot;isSend&quot;, false);\r\n\t\t\t\t\t\ti.putExtra(&quot;incomingNumber&quot;, incoming_number);\r\n\t\t\t\t\t\tcontext1.startActivity(i);\r\n\t\t\t\t\t\ti = null;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}catch(Exception ex){\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//For missed calls.\r\n\t\t\t\tif(prevState==TelephonyManager.CALL_STATE_RINGING){  \r\n\t\t\t\t\tprevState=state;  \r\n                }  \r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t//If the caller or receiver picks up the phone\r\n\t\t\tcase TelephonyManager.CALL_STATE_OFFHOOK:\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif( CallTrackerModel.isRecording() ){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif( NoteActivity.getIsStart() ){\r\n\t\t\t\t\t\tNoteActivity.setStop(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tprevState = state;\r\n\t\t\t\t\tif (callno.length() == 13) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tincoming_number = callno.substring(3);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else if (callno.length() == 11) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tincoming_number = callno.substring(1);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tincoming_number = callno;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t                                                                                                                     \r\n\t\t\t\t}catch(Exception ex){\r\n\t\t\t\t\tisOnReceive = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry{\r\n\t\t\t\t\tif( NoteActivity.getIsStop() ){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(NoteActivity.getLater()){\r\n\t\t\t\t\t\t\tNoteActivity.setLater(false);\r\n\t\t\t\t\t\t\tNoteActivity.setStop(false);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tNoteActivity.later(); \r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(Exception e){\r\n\t\t\t\t\tisOnReceive = false;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\ttry{\r\n\t\t\t\t\tIntent i = new Intent(context1, RetrieveUserId.class);\r\n\t\t\t\t\ti.putExtra(&quot;incoming number&quot;, incoming_number);\r\n\t\r\n\t\t\t\t\tcontext1.startService(i);\r\n\t\t\t\t\t// start recording\r\n\t\t\t\t\tctm.startRecording();\r\n\t\t\t\t}catch(Exception e){\r\n\t\t\t\t\tisOnReceive = false;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\tcase TelephonyManager.CALL_STATE_RINGING:\r\n\t\t\t\t\r\n\t\t\t\tif( CallTrackerModel.isRecording() ){\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tprevState = state;\r\n\t\t\t\t\tcallno = incomingNumber;\r\n\t\t\t\t\tcallno = callno.replaceAll(&quot; &quot;, &quot;&quot;);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n}\r\n","title":"Phone number is set to null at the time of OFFHOOK state of TelephonyManager","body":"<p>I get a phone number at the time of the ringing state, but sometimes, it is set to null at the time of the off hook state. I can't catch the moment where it goes to null.</p>\n\n<p>So, when a call comes (incoming call) it goes to <code>RINGING STATE</code> and the number is set to callno variable. After that when I pick up the call it goes to <code>OFFHOOK STATE</code> and I got <code>null</code> in callno therefore it gives me a <code>NullPointerException</code>. </p>\n\n<p>How do I prevent this situation?</p>\n\n<p>public class CallStateReceiver extends BroadcastReceiver {</p>\n\n<pre><code>private static boolean noCallListenerYet = true;\nTelephonyManager telephonyManager;\nstatic MyPhoneStateListener phoneListener;\nprivate static Context context1;\nContext context;\nprivate int prevState;\nString userId;\nString incoming_number = null;\nBundle bundle;\nString state;\nprivate static String callno = null;\nstatic SharedPreferences pref;\nstatic int cidvalue;\n/*Added to resolve the below bug:\n * Bug: At the time of call comes on poped up note and \n *      below note was not send and new userid not \n *      replace with older userid.\n */\nprivate static boolean isOnReceive = false;\n\npublic static String getCallno() {\n    return callno;\n}\n\n@Override\npublic void onReceive(Context context, Intent intent) {\n    String state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);\n\n\n    isOnReceive = true;\n\n    if( CallTrackerModel.isRecording() ){\n    }else{\n\n    CallTrackerModel.setCallId(\"\");\n    try{\n        if (intent.getAction()\n                .equals(\"android.intent.action.NEW_OUTGOING_CALL\")) {\n            if ((bundle = intent.getExtras()) != null) {\n                callno = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);\n                callno = callno.replaceAll(\" \", \"\");                    \n            }\n        }\n    }\n    catch(Exception e){\n    }\n\n    try{\n    if (noCallListenerYet) {\n        telephonyManager = (TelephonyManager) context\n                .getSystemService(Context.TELEPHONY_SERVICE);\n        if (phoneListener == null) {\n            phoneListener = new MyPhoneStateListener(context);\n            telephonyManager.listen(phoneListener,\n                    PhoneStateListener.LISTEN_CALL_STATE);\n        }\n        noCallListenerYet = false;\n    }\n    }catch(Exception e){\n        isOnReceive = false;\n    }\n\n    context1 = context;\n    }\n\n}\n\npublic static int returncid() {\n    int cid;\n    pref = context1.getSharedPreferences(\"Myprefer\", 0);\n    SharedPreferences.Editor editor = pref.edit();\n    cid = pref.getInt(\"currentcid\", 0);\n    if (cid == 0) {\n        cid = cid + 1;\n    }\n    editor.putInt(\"currentcid\", cid);\n    editor.commit();\n    pref = context1.getSharedPreferences(\"Myprefer\", 0);\n    cidvalue = pref.getInt(\"currentcid\", 0);\n    return cidvalue;\n}\n\n\nprivate class MyPhoneStateListener extends PhoneStateListener {\n\n    Context context;\n    MyPhoneStateListener(Context c) {\n        super();\n        context = c;\n    }\n\n    /**\n     * Listen call state changes.\n     */\n    public void onCallStateChanged(int state, String incomingNumber) {\n        CallTrackerModel ctm = new CallTrackerModel(context1);\n        switch (state) {\n\n        // Incoming/Outgoing call over.\n        case TelephonyManager.CALL_STATE_IDLE:\n\n            if (CallTrackerModel.returnRecordStarted()) {\n\n                ctm.stopRecording();\n                userId = RetrieveUserId.getUserId();\n\n            }\n\n            //For Received calls.\n            if (prevState == TelephonyManager.CALL_STATE_OFFHOOK) {\n\n                try{\n\n                    cidvalue = pref.getInt(\"currentcid\", 0);\n                    ++cidvalue;\n                    pref = context1.getSharedPreferences(\"Myprefer\", 0);\n                    SharedPreferences.Editor editor = pref.edit();\n                    editor.putInt(\"currentcid\", cidvalue);\n                    editor.commit();\n                    prevState = state;\n                    // Start note activity.\n                    Intent i = new Intent(context1, NoteActivity.class);\n                    i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);\n                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);\n\n                    if (userId == null) {\n                        userId = \"@@\";\n                    }\n                    i.putExtra(\"userId\", userId);\n                    i.putExtra(\"isSend\", false);\n                    i.putExtra(\"incomingNumber\", incoming_number);\n                    context1.startActivity(i);\n                    i = null;\n\n                }catch(Exception ex){\n                }\n            }\n\n            //For missed calls.\n            if(prevState==TelephonyManager.CALL_STATE_RINGING){  \n                prevState=state;  \n            }  \n\n            break;\n\n        //If the caller or receiver picks up the phone\n        case TelephonyManager.CALL_STATE_OFFHOOK:\n            try{\n                if( CallTrackerModel.isRecording() ){\n                    break;\n                }\n                if( NoteActivity.getIsStart() ){\n                    NoteActivity.setStop(true);\n                }\n\n\n                prevState = state;\n                if (callno.length() == 13) {\n\n                    incoming_number = callno.substring(3);\n\n                } else if (callno.length() == 11) {\n\n                    incoming_number = callno.substring(1);\n\n                } else {\n\n                    incoming_number = callno;\n\n                }\n\n            }catch(Exception ex){\n                isOnReceive = false;\n            }\n\n            try{\n                if( NoteActivity.getIsStop() ){\n\n                    if(NoteActivity.getLater()){\n                        NoteActivity.setLater(false);\n                        NoteActivity.setStop(false);\n                    }else{\n                        NoteActivity.later(); \n                    }\n                }\n            }catch(Exception e){\n                isOnReceive = false;\n            }\n\n            try{\n                Intent i = new Intent(context1, RetrieveUserId.class);\n                i.putExtra(\"incoming number\", incoming_number);\n\n                context1.startService(i);\n                // start recording\n                ctm.startRecording();\n            }catch(Exception e){\n                isOnReceive = false;\n            }\n\n            break;\n        case TelephonyManager.CALL_STATE_RINGING:\n\n            if( CallTrackerModel.isRecording() ){\n\n            }else{\n                prevState = state;\n                callno = incomingNumber;\n                callno = callno.replaceAll(\" \", \"\");                    \n            }\n\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":["java","spring","spring-boot","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":3097035,"reputation":1105,"user_id":2622026,"accept_rate":71,"display_name":"hermit"},"score":0,"creation_date":1696500081,"post_id":77236045,"comment_id":136162104,"body_markdown":"You need to delete data from only one table here? I guess there will be multiple related entities to the record that you are deleting and you need to delete them as well.","body":"You need to delete data from only one table here? I guess there will be multiple related entities to the record that you are deleting and you need to delete them as well."}],"answers":[{"tags":[],"owner":{"account_id":15529698,"reputation":182,"user_id":11203574,"display_name":"Aurelien"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696500900,"creation_date":1696500900,"answer_id":77236186,"question_id":77236045,"body_markdown":"You can just add something like this in you repository and let Spring generate the appropriate query.\r\n\r\n    long deleteByStatus(Status status);\r\n\r\nBe careful to also delete the related entities.","title":"Update and delete millions of data in Spring Boot JPA","body":"<p>You can just add something like this in you repository and let Spring generate the appropriate query.</p>\n<pre><code>long deleteByStatus(Status status);\n</code></pre>\n<p>Be careful to also delete the related entities.</p>\n"},{"tags":[],"owner":{"account_id":7882042,"reputation":986,"user_id":5955651,"display_name":"stelios.anastasakis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696586395,"creation_date":1696586088,"answer_id":77243486,"question_id":77236045,"body_markdown":"First of all, you need to have the risks clear in your mind.\r\n- You need to make sure there are no cascade deletes (check the table scheme). if you do, then this adds more complexity and you need to think of the effects\r\n- You need to think of errors that might occur (like some records not being deleted). Do you want to handle those cases somehow? then you need a more custom solution. If you can just rerun the failed cases in a second go, then everything s easier\r\n- You need to think of the live traffic being affected. If you make multiple deletes (and even more if there are cascade deletes) your db will become slower. Which services are using the same db. Will those services be affected? Is there any risk of current users facing issues? \r\n- You need to think of the performance. Can your db and service handle this ok? (maybe running it on a test environment first).\r\n\r\nThe easiest way, as mentioned before, since you re using spring-data, is to do something like \r\n```\r\npublic interface RecordsRepository extends CrudRepository&lt;Record, long&gt; {\r\n\r\n    @Transactional\r\n    void deleteByStatus(String status);\r\n}\r\n```\r\nYou can use the &#39;@Transactional&#39; annotation if you want it all to happen in one transaction.\r\n\r\nIf you need to go with a more custom solution, then i guess you go one by one and do the relevant checks, logs, audits etc.","title":"Update and delete millions of data in Spring Boot JPA","body":"<p>First of all, you need to have the risks clear in your mind.</p>\n<ul>\n<li>You need to make sure there are no cascade deletes (check the table scheme). if you do, then this adds more complexity and you need to think of the effects</li>\n<li>You need to think of errors that might occur (like some records not being deleted). Do you want to handle those cases somehow? then you need a more custom solution. If you can just rerun the failed cases in a second go, then everything s easier</li>\n<li>You need to think of the live traffic being affected. If you make multiple deletes (and even more if there are cascade deletes) your db will become slower. Which services are using the same db. Will those services be affected? Is there any risk of current users facing issues?</li>\n<li>You need to think of the performance. Can your db and service handle this ok? (maybe running it on a test environment first).</li>\n</ul>\n<p>The easiest way, as mentioned before, since you re using spring-data, is to do something like</p>\n<pre><code>public interface RecordsRepository extends CrudRepository&lt;Record, long&gt; {\n\n    @Transactional\n    void deleteByStatus(String status);\n}\n</code></pre>\n<p>You can use the '@Transactional' annotation if you want it all to happen in one transaction.</p>\n<p>If you need to go with a more custom solution, then i guess you go one by one and do the relevant checks, logs, audits etc.</p>\n"}],"owner":{"account_id":22867978,"reputation":23,"user_id":17011464,"display_name":"arthus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1696586395,"creation_date":1696499565,"question_id":77236045,"body_markdown":"I have a situation where I want to update and delete millions of data and I am using Spring boot cron job. The process includes two things:\r\n1. Fetching records which are older than 6 months and set some status (lets say OPEN or CLOSED).\r\n2. I want to delete all the records which are updated to CLOSED status. The number of records in this case could be in millions and have one-to-many relationship with child entities.\r\n\r\n\r\n\r\nOne of the options I could think of is to use deleteAll() together with pagination.\r\n\r\nAnyone have some better ideas what could be other possible ways to achieve this?","title":"Update and delete millions of data in Spring Boot JPA","body":"<p>I have a situation where I want to update and delete millions of data and I am using Spring boot cron job. The process includes two things:</p>\n<ol>\n<li>Fetching records which are older than 6 months and set some status (lets say OPEN or CLOSED).</li>\n<li>I want to delete all the records which are updated to CLOSED status. The number of records in this case could be in millions and have one-to-many relationship with child entities.</li>\n</ol>\n<p>One of the options I could think of is to use deleteAll() together with pagination.</p>\n<p>Anyone have some better ideas what could be other possible ways to achieve this?</p>\n"},{"tags":["java","project","mplab"],"comments":[{"owner":{"account_id":12444729,"reputation":4096,"user_id":9061264,"display_name":"Mike"},"score":0,"creation_date":1603104753,"post_id":64383693,"comment_id":113921181,"body_markdown":"When I select &#39;NewProject&#39; I could select&#39;Stand alone Project&#39; an then select a controllter.","body":"When I select &#39;NewProject&#39; I could select&#39;Stand alone Project&#39; an then select a controllter."},{"owner":{"account_id":19748549,"reputation":1,"user_id":14460378,"display_name":"Luis Vila"},"score":0,"creation_date":1603292477,"post_id":64383693,"comment_id":113992193,"body_markdown":"Yeah, It used to be like that when I used MPLAB 8.92, but now with the MPLAB X instead of selecting the controller, I requires a &quot;Target Location&quot; which  I&#39;m unable to find.","body":"Yeah, It used to be like that when I used MPLAB 8.92, but now with the MPLAB X instead of selecting the controller, I requires a &quot;Target Location&quot; which  I&#39;m unable to find."}],"answers":[{"tags":[],"owner":{"account_id":4337054,"reputation":13,"user_id":3541297,"display_name":"user3541297"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696586171,"creation_date":1696586171,"answer_id":77243498,"question_id":64383693,"body_markdown":"I had the same problem (I know this post is old but in case...).\r\n\r\nI just have to uninstall MPLABX, delete &quot;C:/users/username/.mchp_packs&quot; folder, install MPLABX.\r\n\r\nI love this IDE (...sarcasm...)\r\n","title":"MPLab X v5.40: Cannot Get Target Location and &quot;Could Not Find Pack Repo Provider&quot;","body":"<p>I had the same problem (I know this post is old but in case...).</p>\n<p>I just have to uninstall MPLABX, delete &quot;C:/users/username/.mchp_packs&quot; folder, install MPLABX.</p>\n<p>I love this IDE (...sarcasm...)</p>\n"}],"owner":{"account_id":19748549,"reputation":1,"user_id":14460378,"display_name":"Luis Vila"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":274,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1696586171,"creation_date":1602828180,"question_id":64383693,"body_markdown":"Recently, I&#39;ve upgraded MPLab from v8.40 to the MPLab X v5.4. (I had first used the MPLab X  v5.30, but due to a requeriment from my profesor I had to downgraded to the MPLab v8.x) \r\n\r\nNow, I can&#39;t create a new project, because in step two, instead of &quot;Selecting Device&quot;, it shows **&quot;[Target Location][1]&quot;** (as depicted in the first picture). But, **it does&#39;t let you &quot;pick&quot; any folder nor file.** \r\nAlso, at starting the program, it show a notifaction under the label **&quot;Unexpected Error&quot;**. When clicked it says **&quot;[Could Not Find Pack Repo Provider][3]&quot;**. In the details of the error, it says **&quot;[java.lang.UnsupportedOperationException][2]&quot;.** \r\n\r\nWith the both versions I had previously installed there was no problem with the project creation, nor with the project wizard. \r\nBut as of this time, MPLab marks an error with Java (I have Java Developer Kit installed as well as Java 1.8.0). After some digging I read that MPLab uses it&#39;s own Java. \r\n\r\nI have uninstalled and installed MPLab X versions 5.30 (again), 5.35 and 5.40 several times (probably 10), making the &quot;complete&quot; uninstalling, but when I reinstall it just shows the same problem. I&#39;m out of ideas to solve the problem as I have ininstalled Java from my computer already (with the Developer Kit) to see if that could solve it, but it was futile, so i installed them back. \r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YI9py.png\r\n  [2]: https://i.stack.imgur.com/2EQl8.png\r\n  [3]: https://i.stack.imgur.com/qfU8Q.png","title":"MPLab X v5.40: Cannot Get Target Location and &quot;Could Not Find Pack Repo Provider&quot;","body":"<p>Recently, I've upgraded MPLab from v8.40 to the MPLab X v5.4. (I had first used the MPLab X  v5.30, but due to a requeriment from my profesor I had to downgraded to the MPLab v8.x)</p>\n<p>Now, I can't create a new project, because in step two, instead of &quot;Selecting Device&quot;, it shows <strong>&quot;<a href=\"https://i.stack.imgur.com/YI9py.png\" rel=\"nofollow noreferrer\">Target Location</a>&quot;</strong> (as depicted in the first picture). But, <strong>it does't let you &quot;pick&quot; any folder nor file.</strong>\nAlso, at starting the program, it show a notifaction under the label <strong>&quot;Unexpected Error&quot;</strong>. When clicked it says <strong>&quot;<a href=\"https://i.stack.imgur.com/qfU8Q.png\" rel=\"nofollow noreferrer\">Could Not Find Pack Repo Provider</a>&quot;</strong>. In the details of the error, it says <strong>&quot;<a href=\"https://i.stack.imgur.com/2EQl8.png\" rel=\"nofollow noreferrer\">java.lang.UnsupportedOperationException</a>&quot;.</strong></p>\n<p>With the both versions I had previously installed there was no problem with the project creation, nor with the project wizard.\nBut as of this time, MPLab marks an error with Java (I have Java Developer Kit installed as well as Java 1.8.0). After some digging I read that MPLab uses it's own Java.</p>\n<p>I have uninstalled and installed MPLab X versions 5.30 (again), 5.35 and 5.40 several times (probably 10), making the &quot;complete&quot; uninstalling, but when I reinstall it just shows the same problem. I'm out of ideas to solve the problem as I have ininstalled Java from my computer already (with the Developer Kit) to see if that could solve it, but it was futile, so i installed them back.</p>\n"},{"tags":["java","json","validation","schema","avro"],"answers":[{"tags":[],"owner":{"account_id":4734706,"reputation":7799,"user_id":3829426,"display_name":"hlagos"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1696585861,"creation_date":1525745514,"answer_id":50224798,"question_id":50219476,"body_markdown":"## Add Avro Dependency\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;avro&lt;/artifactId&gt;\r\n            &lt;version&gt;${version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\n## Programmatic Validation\r\n\r\nThis is how you can validate it programatically. \r\n\r\n    import org.apache.avro.AvroTypeException;\r\n    import org.apache.avro.Schema;\r\n    import org.apache.avro.generic.GenericDatumReader;\r\n    import org.apache.avro.io.DatumReader;\r\n    import org.apache.avro.io.Decoder;\r\n    import org.apache.avro.io.DecoderFactory;\r\n    \r\n    import java.io.*;\r\n    \r\n    public class MainClass {\r\n        public static void main (String [] args) throws Exception {\r\n            Schema schema = new Schema.Parser().parse(&quot;{\\n&quot; +\r\n                    &quot;     \\&quot;type\\&quot;: \\&quot;record\\&quot;,\\n&quot; +\r\n                    &quot;     \\&quot;namespace\\&quot;: \\&quot;com.acme\\&quot;,\\n&quot; +\r\n                    &quot;     \\&quot;name\\&quot;: \\&quot;Test\\&quot;,\\n&quot; +\r\n                    &quot;     \\&quot;fields\\&quot;: [\\n&quot; +\r\n                    &quot;       { \\&quot;name\\&quot;: \\&quot;name\\&quot;, \\&quot;type\\&quot;: \\&quot;string\\&quot; },\\n&quot; +\r\n                    &quot;       { \\&quot;name\\&quot;: \\&quot;age\\&quot;, \\&quot;type\\&quot;: \\&quot;int\\&quot; },\\n&quot; +\r\n                    &quot;       { \\&quot;name\\&quot;: \\&quot;sex\\&quot;, \\&quot;type\\&quot;: \\&quot;string\\&quot; },\\n&quot; +\r\n                    &quot;       { \\&quot;name\\&quot;: \\&quot;active\\&quot;, \\&quot;type\\&quot;: \\&quot;boolean\\&quot; }\\n&quot; +\r\n                    &quot;     ]\\n&quot; +\r\n                    &quot;}&quot;);\r\n            String json = &quot;{\\&quot;name\\&quot;:\\&quot;alex\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;M\\&quot;,\\&quot;active\\&quot;:true}&quot;;\r\n            System.out.println(validateJson(json, schema));\r\n            String invalidJson = &quot;{\\&quot;name\\&quot;:\\&quot;alex\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;M\\&quot;}&quot;; // missing active field\r\n            System.out.println(validateJson(invalidJson, schema));\r\n        }\r\n    \r\n        public static boolean validateJson(String json, Schema schema) throws Exception {\r\n            InputStream input = new ByteArrayInputStream(json.getBytes());\r\n            DataInputStream din = new DataInputStream(input);\r\n    \r\n            try {\r\n                DatumReader reader = new GenericDatumReader(schema);\r\n                Decoder decoder = DecoderFactory.get().jsonDecoder(schema, din);\r\n                reader.read(null, decoder);\r\n                return true;\r\n            } catch (AvroTypeException e) {\r\n                System.out.println(e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How do I validate JSON against Avro schema","body":"<h2>Add Avro Dependency</h2>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro&lt;/artifactId&gt;\n            &lt;version&gt;${version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<h2>Programmatic Validation</h2>\n<p>This is how you can validate it programatically.</p>\n<pre><code>import org.apache.avro.AvroTypeException;\nimport org.apache.avro.Schema;\nimport org.apache.avro.generic.GenericDatumReader;\nimport org.apache.avro.io.DatumReader;\nimport org.apache.avro.io.Decoder;\nimport org.apache.avro.io.DecoderFactory;\n\nimport java.io.*;\n\npublic class MainClass {\n    public static void main (String [] args) throws Exception {\n        Schema schema = new Schema.Parser().parse(&quot;{\\n&quot; +\n                &quot;     \\&quot;type\\&quot;: \\&quot;record\\&quot;,\\n&quot; +\n                &quot;     \\&quot;namespace\\&quot;: \\&quot;com.acme\\&quot;,\\n&quot; +\n                &quot;     \\&quot;name\\&quot;: \\&quot;Test\\&quot;,\\n&quot; +\n                &quot;     \\&quot;fields\\&quot;: [\\n&quot; +\n                &quot;       { \\&quot;name\\&quot;: \\&quot;name\\&quot;, \\&quot;type\\&quot;: \\&quot;string\\&quot; },\\n&quot; +\n                &quot;       { \\&quot;name\\&quot;: \\&quot;age\\&quot;, \\&quot;type\\&quot;: \\&quot;int\\&quot; },\\n&quot; +\n                &quot;       { \\&quot;name\\&quot;: \\&quot;sex\\&quot;, \\&quot;type\\&quot;: \\&quot;string\\&quot; },\\n&quot; +\n                &quot;       { \\&quot;name\\&quot;: \\&quot;active\\&quot;, \\&quot;type\\&quot;: \\&quot;boolean\\&quot; }\\n&quot; +\n                &quot;     ]\\n&quot; +\n                &quot;}&quot;);\n        String json = &quot;{\\&quot;name\\&quot;:\\&quot;alex\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;M\\&quot;,\\&quot;active\\&quot;:true}&quot;;\n        System.out.println(validateJson(json, schema));\n        String invalidJson = &quot;{\\&quot;name\\&quot;:\\&quot;alex\\&quot;,\\&quot;age\\&quot;:23,\\&quot;sex\\&quot;:\\&quot;M\\&quot;}&quot;; // missing active field\n        System.out.println(validateJson(invalidJson, schema));\n    }\n\n    public static boolean validateJson(String json, Schema schema) throws Exception {\n        InputStream input = new ByteArrayInputStream(json.getBytes());\n        DataInputStream din = new DataInputStream(input);\n\n        try {\n            DatumReader reader = new GenericDatumReader(schema);\n            Decoder decoder = DecoderFactory.get().jsonDecoder(schema, din);\n            reader.read(null, decoder);\n            return true;\n        } catch (AvroTypeException e) {\n            System.out.println(e.getMessage());\n            return false;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5928880,"reputation":911,"user_id":4664006,"display_name":"Sorabh Mendiratta"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628130230,"creation_date":1628130230,"answer_id":68659903,"question_id":50219476,"body_markdown":"NOTE: If you are on a java project and facing above error during validation of json.\r\n\r\nIn our project we expect a very long JSON object with multiple optional fields, so it was hard to find where is it failing.\r\n\r\nTried different ways using SpecificDatumReader/GenericDatumReaders and other probable ways, but I was always ending up with Expected start-union. Got VALUE_STRING\r\n\r\nWe have a SpringBoot application and we were already converting the avsc files to Java. So the idea was if we are able to populate the Class object and able to serialize it successfully, it shows that JSON received is valid.\r\n\r\nSo we ended up using a basic ObjectMapper to populate the class. And if you are compiling avsc files to Java using avro library, then it comes with some default methods to encode/decode the class\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    // DeSerializing the JSON to Avro class, but this doesn&#39;t check for Schema restrictions\r\n    StatusUpdated obj = mapper.readValue(payload, StatusUpdated.class);\r\n    // Encoding the class and serializing to raw format, this step validates based on schema\r\n    obj.toByteBuffer();\r\n","title":"How do I validate JSON against Avro schema","body":"<p>NOTE: If you are on a java project and facing above error during validation of json.</p>\n<p>In our project we expect a very long JSON object with multiple optional fields, so it was hard to find where is it failing.</p>\n<p>Tried different ways using SpecificDatumReader/GenericDatumReaders and other probable ways, but I was always ending up with Expected start-union. Got VALUE_STRING</p>\n<p>We have a SpringBoot application and we were already converting the avsc files to Java. So the idea was if we are able to populate the Class object and able to serialize it successfully, it shows that JSON received is valid.</p>\n<p>So we ended up using a basic ObjectMapper to populate the class. And if you are compiling avsc files to Java using avro library, then it comes with some default methods to encode/decode the class</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n// DeSerializing the JSON to Avro class, but this doesn't check for Schema restrictions\nStatusUpdated obj = mapper.readValue(payload, StatusUpdated.class);\n// Encoding the class and serializing to raw format, this step validates based on schema\nobj.toByteBuffer();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26670932,"reputation":1,"user_id":20282383,"display_name":"sumegha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666181676,"creation_date":1666181626,"answer_id":74125145,"question_id":50219476,"body_markdown":"Do we have similar thing available in C# ? I want to validate JSON message received through API and validate it against schema but there is no option available in .NET C#","title":"How do I validate JSON against Avro schema","body":"<p>Do we have similar thing available in C# ? I want to validate JSON message received through API and validate it against schema but there is no option available in .NET C#</p>\n"}],"owner":{"account_id":6167161,"reputation":161,"user_id":4806659,"display_name":"Bhargava Sharma"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19951,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1696585861,"creation_date":1525713788,"question_id":50219476,"body_markdown":"I have a JSON response from an API and I would like to validate against an existing Avro schema(strict validation with names and types).\r\n\r\nThe response is of type \r\n\r\n\r\n\r\n{&quot;name&quot;:&quot;alex&quot;,&quot;age&quot;:23,&quot;sex&quot;:&quot;M&quot;,&quot;active&quot;:&quot;true&quot;}\r\n\r\nThe schema has the above types with the data types and I would like to validate the schema and throw an exception in case it fails.(Preferably JAVA).\r\n\r\nI have read a solution using the command line but I wanted to do it programmatically.\r\n\r\nThanks in advance\r\n","title":"How do I validate JSON against Avro schema","body":"<p>I have a JSON response from an API and I would like to validate against an existing Avro schema(strict validation with names and types).</p>\n\n<p>The response is of type </p>\n\n<p>{\"name\":\"alex\",\"age\":23,\"sex\":\"M\",\"active\":\"true\"}</p>\n\n<p>The schema has the above types with the data types and I would like to validate the schema and throw an exception in case it fails.(Preferably JAVA).</p>\n\n<p>I have read a solution using the command line but I wanted to do it programmatically.</p>\n\n<p>Thanks in advance</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1696539545,"post_id":77240478,"comment_id":136170073,"body_markdown":"Your loop ends as soon as `input.hasNextInt()`, without consuming `nextInt()`.","body":"Your loop ends as soon as <code>input.hasNextInt()</code>, without consuming <code>nextInt()</code>."}],"owner":{"account_id":26071805,"reputation":1,"user_id":19771337,"display_name":"jim_bug"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696585828,"creation_date":1696538744,"question_id":77240478,"body_markdown":"I&#39;m studying the methods of the Scanner class, only each site says something completely different and I&#39;m getting confused. My doubt is as follows:\r\n\r\nWhy is the following code:\r\n\r\n```\r\nSystem.out.println(&quot;Enter the number of wheels: &quot;);\r\ndo {\r\n\tif (input.hasNextInt()) {\r\n\t\tnumeroRuote = input.nextInt();\r\n\t\t// verificaTipoDiDato = false;\r\n\t\tbreak;\r\n\t}\r\n\t\t\r\n\telse {\r\n\t\tSystem.out.println(&quot;Wrong data type for number of wheels!\\Enter new number of wheels: &quot;);\r\n\t\t// verificaTipoDiDato = true;\r\n\t\tinput.next();\r\n\t}\r\n}\r\nwhile (!input.hasNextInt());\r\n\r\nSystem.out.println(&quot;Enter the number of headlights: &quot;);\r\ndo {\r\n\tif (input.hasNextInt()) {\r\n\t\tnumeroFari = input.nextInt();\r\n\t\t// verificaTipoDiDato = false;\r\n\t\tbreak;\r\n\t}\r\n\telse {\r\n\t\tSystem.out.println(&quot;Incorrect data type for number of headlights!\\Enter new number of headlights: &quot;);\r\n\t\t// verificaTipoDiDato = true;\r\n\t\tinput.next();\r\n\t}\r\n}\r\nwhile (!input.hasNextInt());\r\n```\r\nIt does this:\r\n\r\n```none\r\nEnter the number of wheels: \r\nhello\r\nData type for the wrong number of wheels!\r\nEnter a new number of wheels: \r\nhello\r\nData type for the wrong number of wheels!\r\nEnter a new number of wheels: \r\n4  \r\nEnter the number of headlights: \r\nVehicle wheel number: 0\r\nNumber of vehicle headlights: 4\r\n```\r\n\r\nShouldn&#39;t it also require input of the number of headlights?\r\n\r\nI can&#39;t understand why.","title":"How do the methods of the Scanner class behave when I try to take input numbers?","body":"<p>I'm studying the methods of the Scanner class, only each site says something completely different and I'm getting confused. My doubt is as follows:</p>\n<p>Why is the following code:</p>\n<pre><code>System.out.println(&quot;Enter the number of wheels: &quot;);\ndo {\n    if (input.hasNextInt()) {\n        numeroRuote = input.nextInt();\n        // verificaTipoDiDato = false;\n        break;\n    }\n        \n    else {\n        System.out.println(&quot;Wrong data type for number of wheels!\\Enter new number of wheels: &quot;);\n        // verificaTipoDiDato = true;\n        input.next();\n    }\n}\nwhile (!input.hasNextInt());\n\nSystem.out.println(&quot;Enter the number of headlights: &quot;);\ndo {\n    if (input.hasNextInt()) {\n        numeroFari = input.nextInt();\n        // verificaTipoDiDato = false;\n        break;\n    }\n    else {\n        System.out.println(&quot;Incorrect data type for number of headlights!\\Enter new number of headlights: &quot;);\n        // verificaTipoDiDato = true;\n        input.next();\n    }\n}\nwhile (!input.hasNextInt());\n</code></pre>\n<p>It does this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter the number of wheels: \nhello\nData type for the wrong number of wheels!\nEnter a new number of wheels: \nhello\nData type for the wrong number of wheels!\nEnter a new number of wheels: \n4  \nEnter the number of headlights: \nVehicle wheel number: 0\nNumber of vehicle headlights: 4\n</code></pre>\n<p>Shouldn't it also require input of the number of headlights?</p>\n<p>I can't understand why.</p>\n"},{"tags":["java","debugging","intellij-idea"],"comments":[{"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"score":0,"creation_date":1696406815,"post_id":77227793,"comment_id":136147223,"body_markdown":"Can you provide your java code?","body":"Can you provide your java code?"},{"owner":{"account_id":10879641,"reputation":314,"user_id":8575474,"display_name":"Abhinav Singh"},"score":0,"creation_date":1696407143,"post_id":77227793,"comment_id":136147279,"body_markdown":"@ZufarSunagatov added my code","body":"@ZufarSunagatov added my code"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1696407153,"post_id":77227793,"comment_id":136147285,"body_markdown":"1) Are you running in debug mode? 2) Do other breakpoints work correctly? 3) If you put a breakpoint a little bit before this code is hit, does that trigger? Can you then step forwards to this code?","body":"1) Are you running in debug mode? 2) Do other breakpoints work correctly? 3) If you put a breakpoint a little bit before this code is hit, does that trigger? Can you then step forwards to this code?"},{"owner":{"account_id":10879641,"reputation":314,"user_id":8575474,"display_name":"Abhinav Singh"},"score":0,"creation_date":1696407570,"post_id":77227793,"comment_id":136147376,"body_markdown":"@Jorn yes running in debug mode, yes other bp works as expected.\nDidnt understand your 3rd question","body":"@Jorn yes running in debug mode, yes other bp works as expected. Didnt understand your 3rd question"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1696407641,"post_id":77227793,"comment_id":136147389,"body_markdown":"Once you hit a breakpoint, your debugger will have a &quot;step forwards&quot; button. You can use that to reach the place in the code where you claim the breakpoint isn&#39;t hit. Doing that will probably tell you *why* it isn&#39;t hit.","body":"Once you hit a breakpoint, your debugger will have a &quot;step forwards&quot; button. You can use that to reach the place in the code where you claim the breakpoint isn&#39;t hit. Doing that will probably tell you <i>why</i> it isn&#39;t hit."}],"answers":[{"tags":[],"owner":{"account_id":18549439,"reputation":1201,"user_id":13515974,"display_name":"Zufar Sunagatov"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1696407600,"creation_date":1696407600,"answer_id":77227916,"question_id":77227793,"body_markdown":"&gt; So is there any setting we can do, so that we get trigger everytime we insert or remove from the list.\r\n\r\nWell, if you add or remove elements from an `ArrayList`, the watchpoint will not be triggered, because `ArrayList` object itself is not changing.\r\n\r\nI have an idea that you can monitor changes to the elements inside the ArrayList, you would need to implement your own custom `class ArrayList`. This way you can set callback functions that get triggered whenever an element is added or removed from the list.\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.function.Consumer;\r\n\r\npublic class CustomObservableArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\r\n\r\n    private Consumer&lt;T&gt; addCallback;\r\n    private Consumer&lt;T&gt; removeCallback;\r\n\r\n    public CustomObservableArrayList(Consumer&lt;T&gt; addCallback, Consumer&lt;T&gt; removeCallback) {\r\n        super();\r\n        this.addCallback = addCallback;\r\n        this.removeCallback = removeCallback;\r\n    }\r\n\r\n    @Override\r\n    public boolean add(T element) {\r\n        boolean result = super.add(element);\r\n        if (result &amp;&amp; addCallback != null) {\r\n            addCallback.accept(element);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    @Override\r\n    public boolean remove(Object element) {\r\n        boolean result = super.remove(element);\r\n        if (result &amp;&amp; removeCallback != null) {\r\n            removeCallback.accept((T) element);\r\n        }\r\n        return result;\r\n    }\r\n}\r\n```","title":"Watchpoint not triggered when inserting to ArrayList","body":"<blockquote>\n<p>So is there any setting we can do, so that we get trigger everytime we insert or remove from the list.</p>\n</blockquote>\n<p>Well, if you add or remove elements from an <code>ArrayList</code>, the watchpoint will not be triggered, because <code>ArrayList</code> object itself is not changing.</p>\n<p>I have an idea that you can monitor changes to the elements inside the ArrayList, you would need to implement your own custom <code>class ArrayList</code>. This way you can set callback functions that get triggered whenever an element is added or removed from the list.</p>\n<pre><code>import java.util.ArrayList;\nimport java.util.function.Consumer;\n\npublic class CustomObservableArrayList&lt;T&gt; extends ArrayList&lt;T&gt; {\n\n    private Consumer&lt;T&gt; addCallback;\n    private Consumer&lt;T&gt; removeCallback;\n\n    public CustomObservableArrayList(Consumer&lt;T&gt; addCallback, Consumer&lt;T&gt; removeCallback) {\n        super();\n        this.addCallback = addCallback;\n        this.removeCallback = removeCallback;\n    }\n\n    @Override\n    public boolean add(T element) {\n        boolean result = super.add(element);\n        if (result &amp;&amp; addCallback != null) {\n            addCallback.accept(element);\n        }\n        return result;\n    }\n\n    @Override\n    public boolean remove(Object element) {\n        boolean result = super.remove(element);\n        if (result &amp;&amp; removeCallback != null) {\n            removeCallback.accept((T) element);\n        }\n        return result;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10879641,"reputation":314,"user_id":8575474,"display_name":"Abhinav Singh"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77227916,"answer_count":1,"score":0,"last_activity_date":1696585634,"creation_date":1696406481,"question_id":77227793,"body_markdown":"I have a java program, it has a global variable `ArrayList&lt;Integer&gt; al` I put a watchpoint on it to track changes to this variable. I found that watchpoint only gets triggered when there is assignment to the this varible, like this `al = new ArrayList&lt;&gt;`, but when I insert into this list, the watchpoint is not getting triggered. I guess this is a normal behaviour. So is there any setting we can do, so that we get trigger everytime we insert or remove from the list.\r\n\r\nThe actual code for reference\r\n\r\n```\r\npublic MyClass {\r\n\r\nprivate static ArrayList&lt;Integer&gt; al = new ArrayList(); Put a watchpoint here\r\n\r\npublic static void main(String args[]){\r\n    al = new ArrayList&lt;&gt;(); // watchpoint gets triggered here\r\n    Integer a = 1;\r\n    al.add(a); // watchpoint not getting triggered here\r\n  }\r\n}\r\n```\r\nEDIT\r\n\r\nMy actual scenario is this list can be modified from other threads, so I thought putting a watchpoint over it will be a good idea to know which thread modified it and also look into its stack trace\r\n\r\n","title":"Watchpoint not triggered when inserting to ArrayList","body":"<p>I have a java program, it has a global variable <code>ArrayList&lt;Integer&gt; al</code> I put a watchpoint on it to track changes to this variable. I found that watchpoint only gets triggered when there is assignment to the this varible, like this <code>al = new ArrayList&lt;&gt;</code>, but when I insert into this list, the watchpoint is not getting triggered. I guess this is a normal behaviour. So is there any setting we can do, so that we get trigger everytime we insert or remove from the list.</p>\n<p>The actual code for reference</p>\n<pre><code>public MyClass {\n\nprivate static ArrayList&lt;Integer&gt; al = new ArrayList(); Put a watchpoint here\n\npublic static void main(String args[]){\n    al = new ArrayList&lt;&gt;(); // watchpoint gets triggered here\n    Integer a = 1;\n    al.add(a); // watchpoint not getting triggered here\n  }\n}\n</code></pre>\n<p>EDIT</p>\n<p>My actual scenario is this list can be modified from other threads, so I thought putting a watchpoint over it will be a good idea to know which thread modified it and also look into its stack trace</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","scheduled-tasks"],"owner":{"account_id":27361694,"reputation":1,"user_id":20869202,"display_name":"Hrushikesh Kadam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696585595,"creation_date":1696584728,"question_id":77243335,"body_markdown":"```\r\n@Scheduled(cron = &quot;0 0 1 * * ?&quot;) // Runs daily at 1 AM\r\npublic void applyDiscountDaily() {\r\n    log.info(&quot;++++++++++at entry point of applyDiscountDaily+++++++++++++&quot;);\r\n    // fetch list of pharmacy whose discount frequency is daily\r\n    List&lt;PharmacyDAO&gt; pharmacyDAOs = pharmacyRepository.findPharmacyByDailyDiscount();\r\n    if (pharmacyDAOs.size() &gt; 0) {\r\n        for (PharmacyDAO pharmacyDAO : pharmacyDAOs) {\r\n            log.info(&quot;++++++++++into for loop+++++++++++++&quot;);\r\n            PaymentDAO paymentDAO = new PaymentDAO();\r\n            // get current month days\r\n            int days = YearMonth.of(LocalDate.now().getYear(), LocalDate.now().getMonth())\r\n                    .lengthOfMonth();\r\n            // apply discount % on exposure\r\n            Double roundedDebitedAmount = CommonUtil\r\n                    .roundWithTwoDecimalDigits((pharmacyDAO.getDiscountPercentage() / days\r\n                            * (pharmacyDAO.getCreditLimit()\r\n                                    - pharmacyDAO.getAvailabilityBalance()))\r\n                            / 100);\r\n            paymentDAO.setStatementType(&quot;Discount Fee&quot;);\r\n            paymentDAO.setDebitedAmount(roundedDebitedAmount);\r\n\r\n            // check total monthly discount is greater than monthly\r\n            if (today == totalDaysInMonth) {\r\n                Month desiredMonth = Month.of(currentYearMonth.getMonthValue());\r\n                LocalDate startDate = LocalDate.of(currentYearMonth.getYear(), desiredMonth, 1);\r\n                int lastDayOfMonth = desiredMonth.length(startDate.isLeapYear());\r\n                LocalDate endDate = LocalDate\r\n                        .of(currentYearMonth.getYear(), desiredMonth, lastDayOfMonth)\r\n                        .atStartOfDay()\r\n                        .toLocalDate();\r\n                Double totalMonthlyDiscount = transactionPaymentRepository\r\n                        .getMonthlyDiscountAmountTotal(\r\n                                pharmacyDAO.getId(),\r\n                                startDate, endDate);\r\n                paymentDAO.setDebitedAmount(roundedDebitedAmount);\r\n                if ((totalMonthlyDiscount + roundedDebitedAmount) &lt; pharmacyDAO\r\n                        .getMinimumFee()) {\r\n                    paymentDAO.setDebitedAmount(\r\n                            CommonUtil.roundWithTwoDecimalDigits(\r\n                                    totalMonthlyDiscount\r\n                                            + roundedDebitedAmount));\r\n                }\r\n            }\r\n\r\n            // If the discount fee is less than the minimum fee, the minimum fee must be\r\n            // charged to the pharmacy and NOT the discount fee\r\n            // if (roundedDebitedAmount &lt; pharmacyDAO.getMinimumFee()) {\r\n            // roundedDebitedAmount = pharmacyDAO.getMinimumFee(); //comment on 26 sep 10:25\r\n            // paymentDAO.setStatementType(&quot;Minimum Fee&quot;);\r\n            // paymentDAO.setDebitedAmount(roundedDebitedAmount);\r\n            // }\r\n            Double newAvailableBalance = CommonUtil\r\n                    .roundWithTwoDecimalDigits(pharmacyDAO.getAvailabilityBalance()\r\n                            - paymentDAO.getDebitedAmount());\r\n            paymentDAO.setExposure(\r\n                    CommonUtil.roundWithTwoDecimalDigits(\r\n                            Math.abs(pharmacyDAO.getCreditLimit()\r\n                                    - newAvailableBalance)));\r\n            paymentDAO.setPharmacyDAO(pharmacyDAO);\r\n\r\n            AuditLogsDAO auditLogsDAO = new AuditLogsDAO();\r\n            auditLogsDAO.setPharmacyName(pharmacyDAO.getPharmacyName());\r\n            auditLogsDAO.setUserEmail(adminEmail);\r\n            auditLogsDAO.setAdminId(1l);\r\n            auditLogsDAO.setUserName(&quot;Admin&quot;);\r\n            auditLogsDAO.setRole(1l);\r\n            auditLogsDAO.setRequestType(paymentDAO.getStatementType());\r\n            auditLogsDAO.setAction(&quot;Admin&quot;);\r\n            SchedularDiscountDTO discountDTO = SchedularDiscountDTO.builder()\r\n                    .pharmacyId(pharmacyDAO.getId())\r\n                    .availableBalance(newAvailableBalance)\r\n                    .debitedAmount(paymentDAO.getDebitedAmount())\r\n                    .discountPercentage(pharmacyDAO.getDiscountPercentage())\r\n                    .discountFrequency(pharmacyDAO.getDiscountFrequency())\r\n                    .statementType(paymentDAO.getStatementType())\r\n                    .createdDate(LocalDateTime.now())\r\n                    .build();\r\n            try {\r\n                auditLogsDAO.setData(objectMapper.writeValueAsString(discountDTO));\r\n            } catch (JsonProcessingException e) {\r\n                throw new JSONParseException(&quot;Unable to process JSON&quot;);\r\n            }\r\n            pharmacyDAO.setAvailabilityBalance(newAvailableBalance);\r\n            log.info(&quot; Current time : &quot; + LocalDateTime.now()\r\n                    + &quot;...Discount fee debited daily for pharmacy : &quot;\r\n                    + pharmacyDAO.getEmailId()\r\n                    + &quot;, debited amount =&quot;\r\n                    + paymentDAO.getDebitedAmount());\r\n            log.info(&quot;+++++++++++before saved payment object.++++++++++++&quot;);\r\n            transactionPaymentRepository.save(paymentDAO);\r\n            log.info(&quot;+++++++++++Saved payment object.+++++++++++++&quot;);\r\n            pharmacyRepository.save(pharmacyDAO);\r\n            log.info(&quot;+++++++++++Saved pharmacy object.+++++++++++++&quot;);\r\n            auditLogsRepository.save(auditLogsDAO);\r\n            log.info(&quot;+++++++++++Saved audit log object.+++++++++++++&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nI implemented save method in JPA repository and annotated it with @Transactional still it replicated the entity. The logs are getting printed one time only but the object to save method gets replicated into database as a new entry.\r\n\r\nI kept the ID as generated type Identity in entity. The code works fine at local but when i deploy my war file on EC2 instance with rds mySQL DB, then the replication scenario occurs. The logs are getting printed one time only.","title":"JPA repository save() method replicating the same entity twice into mySQL DB while executing @Scheduled task in spring boot","body":"<pre><code>@Scheduled(cron = &quot;0 0 1 * * ?&quot;) // Runs daily at 1 AM\npublic void applyDiscountDaily() {\n    log.info(&quot;++++++++++at entry point of applyDiscountDaily+++++++++++++&quot;);\n    // fetch list of pharmacy whose discount frequency is daily\n    List&lt;PharmacyDAO&gt; pharmacyDAOs = pharmacyRepository.findPharmacyByDailyDiscount();\n    if (pharmacyDAOs.size() &gt; 0) {\n        for (PharmacyDAO pharmacyDAO : pharmacyDAOs) {\n            log.info(&quot;++++++++++into for loop+++++++++++++&quot;);\n            PaymentDAO paymentDAO = new PaymentDAO();\n            // get current month days\n            int days = YearMonth.of(LocalDate.now().getYear(), LocalDate.now().getMonth())\n                    .lengthOfMonth();\n            // apply discount % on exposure\n            Double roundedDebitedAmount = CommonUtil\n                    .roundWithTwoDecimalDigits((pharmacyDAO.getDiscountPercentage() / days\n                            * (pharmacyDAO.getCreditLimit()\n                                    - pharmacyDAO.getAvailabilityBalance()))\n                            / 100);\n            paymentDAO.setStatementType(&quot;Discount Fee&quot;);\n            paymentDAO.setDebitedAmount(roundedDebitedAmount);\n\n            // check total monthly discount is greater than monthly\n            if (today == totalDaysInMonth) {\n                Month desiredMonth = Month.of(currentYearMonth.getMonthValue());\n                LocalDate startDate = LocalDate.of(currentYearMonth.getYear(), desiredMonth, 1);\n                int lastDayOfMonth = desiredMonth.length(startDate.isLeapYear());\n                LocalDate endDate = LocalDate\n                        .of(currentYearMonth.getYear(), desiredMonth, lastDayOfMonth)\n                        .atStartOfDay()\n                        .toLocalDate();\n                Double totalMonthlyDiscount = transactionPaymentRepository\n                        .getMonthlyDiscountAmountTotal(\n                                pharmacyDAO.getId(),\n                                startDate, endDate);\n                paymentDAO.setDebitedAmount(roundedDebitedAmount);\n                if ((totalMonthlyDiscount + roundedDebitedAmount) &lt; pharmacyDAO\n                        .getMinimumFee()) {\n                    paymentDAO.setDebitedAmount(\n                            CommonUtil.roundWithTwoDecimalDigits(\n                                    totalMonthlyDiscount\n                                            + roundedDebitedAmount));\n                }\n            }\n\n            // If the discount fee is less than the minimum fee, the minimum fee must be\n            // charged to the pharmacy and NOT the discount fee\n            // if (roundedDebitedAmount &lt; pharmacyDAO.getMinimumFee()) {\n            // roundedDebitedAmount = pharmacyDAO.getMinimumFee(); //comment on 26 sep 10:25\n            // paymentDAO.setStatementType(&quot;Minimum Fee&quot;);\n            // paymentDAO.setDebitedAmount(roundedDebitedAmount);\n            // }\n            Double newAvailableBalance = CommonUtil\n                    .roundWithTwoDecimalDigits(pharmacyDAO.getAvailabilityBalance()\n                            - paymentDAO.getDebitedAmount());\n            paymentDAO.setExposure(\n                    CommonUtil.roundWithTwoDecimalDigits(\n                            Math.abs(pharmacyDAO.getCreditLimit()\n                                    - newAvailableBalance)));\n            paymentDAO.setPharmacyDAO(pharmacyDAO);\n\n            AuditLogsDAO auditLogsDAO = new AuditLogsDAO();\n            auditLogsDAO.setPharmacyName(pharmacyDAO.getPharmacyName());\n            auditLogsDAO.setUserEmail(adminEmail);\n            auditLogsDAO.setAdminId(1l);\n            auditLogsDAO.setUserName(&quot;Admin&quot;);\n            auditLogsDAO.setRole(1l);\n            auditLogsDAO.setRequestType(paymentDAO.getStatementType());\n            auditLogsDAO.setAction(&quot;Admin&quot;);\n            SchedularDiscountDTO discountDTO = SchedularDiscountDTO.builder()\n                    .pharmacyId(pharmacyDAO.getId())\n                    .availableBalance(newAvailableBalance)\n                    .debitedAmount(paymentDAO.getDebitedAmount())\n                    .discountPercentage(pharmacyDAO.getDiscountPercentage())\n                    .discountFrequency(pharmacyDAO.getDiscountFrequency())\n                    .statementType(paymentDAO.getStatementType())\n                    .createdDate(LocalDateTime.now())\n                    .build();\n            try {\n                auditLogsDAO.setData(objectMapper.writeValueAsString(discountDTO));\n            } catch (JsonProcessingException e) {\n                throw new JSONParseException(&quot;Unable to process JSON&quot;);\n            }\n            pharmacyDAO.setAvailabilityBalance(newAvailableBalance);\n            log.info(&quot; Current time : &quot; + LocalDateTime.now()\n                    + &quot;...Discount fee debited daily for pharmacy : &quot;\n                    + pharmacyDAO.getEmailId()\n                    + &quot;, debited amount =&quot;\n                    + paymentDAO.getDebitedAmount());\n            log.info(&quot;+++++++++++before saved payment object.++++++++++++&quot;);\n            transactionPaymentRepository.save(paymentDAO);\n            log.info(&quot;+++++++++++Saved payment object.+++++++++++++&quot;);\n            pharmacyRepository.save(pharmacyDAO);\n            log.info(&quot;+++++++++++Saved pharmacy object.+++++++++++++&quot;);\n            auditLogsRepository.save(auditLogsDAO);\n            log.info(&quot;+++++++++++Saved audit log object.+++++++++++++&quot;);\n        }\n    }\n}\n</code></pre>\n<p>I implemented save method in JPA repository and annotated it with @Transactional still it replicated the entity. The logs are getting printed one time only but the object to save method gets replicated into database as a new entry.</p>\n<p>I kept the ID as generated type Identity in entity. The code works fine at local but when i deploy my war file on EC2 instance with rds mySQL DB, then the replication scenario occurs. The logs are getting printed one time only.</p>\n"},{"tags":["java","jsonp","jackson"],"comments":[{"owner":{"account_id":20445,"reputation":6733,"user_id":48869,"accept_rate":81,"display_name":"Eldelshell"},"score":0,"creation_date":1384859463,"post_id":20069088,"comment_id":29895982,"body_markdown":"well, I tried with a custom deserializer, but the exception is thrown before the call to the deserialize method is made.","body":"well, I tried with a custom deserializer, but the exception is thrown before the call to the deserialize method is made."}],"answers":[{"tags":[],"owner":{"account_id":20445,"reputation":6733,"user_id":48869,"accept_rate":81,"display_name":"Eldelshell"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1384862397,"creation_date":1384862397,"answer_id":20070999,"question_id":20069088,"body_markdown":"Finally I&#39;ve been able to remove the callback part of the JSONP response.\r\n\r\nFirst, Jackson is able to parse the JSON even when it ends with a parenthesis. So, by simply removing the `my_json_callback(` from the response is enough.\r\n\r\nSince I&#39;m using Apache&#39;s HTTP Client, this fixes the issue:\r\n\r\n    String callback = &quot;my_json_callback(&quot;;\r\n    InputStreamReader r = new InputStreamReader(response.getEntity().getContent());\r\n    r.skip(callback.length());\r\n    return mapper.readValue(r, MyObject.class);\r\n\r\nThe idea is not having to convert the Reader to a String and then parsing that String after removing the callback part.\r\n\r\nI was also able to accomplish the same results using `JSONTokener` from `json.org` library for a given JSONP String:\r\n\r\n    JSONTokener t = new JSONTokener(json);\r\n    t.nextValue(); // skip the callback\r\n    return mapper.readValue(t.nextValue().toString(), MyObject.class);\r\n\r\n","title":"Deserialize JSONP with Jackson","body":"<p>Finally I've been able to remove the callback part of the JSONP response.</p>\n\n<p>First, Jackson is able to parse the JSON even when it ends with a parenthesis. So, by simply removing the <code>my_json_callback(</code> from the response is enough.</p>\n\n<p>Since I'm using Apache's HTTP Client, this fixes the issue:</p>\n\n<pre><code>String callback = \"my_json_callback(\";\nInputStreamReader r = new InputStreamReader(response.getEntity().getContent());\nr.skip(callback.length());\nreturn mapper.readValue(r, MyObject.class);\n</code></pre>\n\n<p>The idea is not having to convert the Reader to a String and then parsing that String after removing the callback part.</p>\n\n<p>I was also able to accomplish the same results using <code>JSONTokener</code> from <code>json.org</code> library for a given JSONP String:</p>\n\n<pre><code>JSONTokener t = new JSONTokener(json);\nt.nextValue(); // skip the callback\nreturn mapper.readValue(t.nextValue().toString(), MyObject.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2466319,"reputation":41,"user_id":2149336,"display_name":"Ryon Day"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1569505672,"creation_date":1398377869,"answer_id":23280884,"question_id":20069088,"body_markdown":"Here&#39;s a trimmed-for-space version of the solution I came up with using a `ReaderInterceptor`. I am using Jersey 2.x in conjunction with Jackson to interact with a web service that only outputs JSONP.\r\n\r\n    public class CallbackStripInterceptor implements ReaderInterceptor {\r\n    \r\n        private final static byte[] callbackBytes = &quot;callback(&quot;.getBytes();\r\n\r\n        @Override\r\n        public Object aroundReadFrom(ReaderInterceptorContext context) throws IOException, WebApplicationException {\r\n\r\n        int howMany = callbackBytes.length;\r\n\r\n        InputStream x = context.getInputStream();\r\n\r\n        if( !(x.available() &gt;= howMany) ) {\r\n            return context.proceed();\r\n        }\r\n\r\n        x.mark( howMany );\r\n        byte[] preamble = new byte[ howMany ];\r\n        x.read( preamble );\r\n\r\n        // In case the first part of our entity doesn&#39;t have the callback String, reset the stream so downstream exploiters get the full entity.\r\n        if( !Arrays.equals( preamble, callbackBytes ) ) {\r\n            x.reset();\r\n        } \r\n\r\n        return context.proceed();\r\n    }\r\n\r\nUse like so:\r\n\r\n    Client c = ClientBuilder.newBuilder()\r\n        .register( new CallbackStripInterceptor() )\r\n        .build();\r\n\r\nUsing this client, all responses with an entity will go through this interceptor (Jersey does not run interceptors on responses without entity bodies).","title":"Deserialize JSONP with Jackson","body":"<p>Here's a trimmed-for-space version of the solution I came up with using a <code>ReaderInterceptor</code>. I am using Jersey 2.x in conjunction with Jackson to interact with a web service that only outputs JSONP.</p>\n\n<pre><code>public class CallbackStripInterceptor implements ReaderInterceptor {\n\n    private final static byte[] callbackBytes = \"callback(\".getBytes();\n\n    @Override\n    public Object aroundReadFrom(ReaderInterceptorContext context) throws IOException, WebApplicationException {\n\n    int howMany = callbackBytes.length;\n\n    InputStream x = context.getInputStream();\n\n    if( !(x.available() &gt;= howMany) ) {\n        return context.proceed();\n    }\n\n    x.mark( howMany );\n    byte[] preamble = new byte[ howMany ];\n    x.read( preamble );\n\n    // In case the first part of our entity doesn't have the callback String, reset the stream so downstream exploiters get the full entity.\n    if( !Arrays.equals( preamble, callbackBytes ) ) {\n        x.reset();\n    } \n\n    return context.proceed();\n}\n</code></pre>\n\n<p>Use like so:</p>\n\n<pre><code>Client c = ClientBuilder.newBuilder()\n    .register( new CallbackStripInterceptor() )\n    .build();\n</code></pre>\n\n<p>Using this client, all responses with an entity will go through this interceptor (Jersey does not run interceptors on responses without entity bodies).</p>\n"},{"tags":[],"owner":{"account_id":15782199,"reputation":69,"user_id":11388213,"display_name":"Universe Whole-Xuan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696584647,"creation_date":1696584647,"answer_id":77243329,"question_id":20069088,"body_markdown":"If your using feign,you can use below solution.\r\n\r\n    import java.io.IOException;\r\n    \r\n    import org.apache.commons.io.IOUtils;\r\n    import org.apache.commons.lang3.StringUtils;\r\n    \r\n    import feign.InvocationContext;\r\n    import feign.Response;\r\n    import feign.ResponseInterceptor;\r\n    import lombok.AccessLevel;\r\n    import lombok.RequiredArgsConstructor;\r\n    import lombok.extern.slf4j.Slf4j;\r\n    @Slf4j\r\n    @RequiredArgsConstructor(access = AccessLevel.PUBLIC)\r\n    public class JsonpResponseInterceptor implements ResponseInterceptor {\r\n    \r\n    \tprivate final String identifier;\r\n    \r\n    \t@Override\r\n    \tpublic Object aroundDecode(InvocationContext invocationContext) throws IOException {\r\n    \t\tString resp = IOUtils.toString(invocationContext.response().body().asInputStream(),\r\n    \t\t\t\tinvocationContext.response().charset());\r\n    \t\tLOGGER.debug(&quot;response is :&quot;+resp);\r\n    \t\tif (resp.startsWith(identifier)) {\r\n    \t\t\tString substring = StringUtils.substringBetween(resp, &quot;(&quot;, &quot;)&quot;);\r\n    \t\t\tResponse modifiedResponse = Response.builder().body(substring, invocationContext.response().charset())\r\n    \t\t\t\t\t.headers(invocationContext.response().headers())\r\n    \t\t\t\t\t.protocolVersion(invocationContext.response().protocolVersion())\r\n    \t\t\t\t\t.reason(invocationContext.response().reason()).status(invocationContext.response().status())\r\n    \t\t\t\t\t.request(invocationContext.response().request()).build();\r\n    \t\t\treturn invocationContext.decoder().decode(modifiedResponse, invocationContext.returnType());\r\n    \t\t} else {\r\n    \t\t\treturn invocationContext.proceed();\r\n    \t\t}\r\n    \t}\r\n    }","title":"Deserialize JSONP with Jackson","body":"<p>If your using feign,you can use below solution.</p>\n<pre><code>import java.io.IOException;\n\nimport org.apache.commons.io.IOUtils;\nimport org.apache.commons.lang3.StringUtils;\n\nimport feign.InvocationContext;\nimport feign.Response;\nimport feign.ResponseInterceptor;\nimport lombok.AccessLevel;\nimport lombok.RequiredArgsConstructor;\nimport lombok.extern.slf4j.Slf4j;\n@Slf4j\n@RequiredArgsConstructor(access = AccessLevel.PUBLIC)\npublic class JsonpResponseInterceptor implements ResponseInterceptor {\n\n    private final String identifier;\n\n    @Override\n    public Object aroundDecode(InvocationContext invocationContext) throws IOException {\n        String resp = IOUtils.toString(invocationContext.response().body().asInputStream(),\n                invocationContext.response().charset());\n        LOGGER.debug(&quot;response is :&quot;+resp);\n        if (resp.startsWith(identifier)) {\n            String substring = StringUtils.substringBetween(resp, &quot;(&quot;, &quot;)&quot;);\n            Response modifiedResponse = Response.builder().body(substring, invocationContext.response().charset())\n                    .headers(invocationContext.response().headers())\n                    .protocolVersion(invocationContext.response().protocolVersion())\n                    .reason(invocationContext.response().reason()).status(invocationContext.response().status())\n                    .request(invocationContext.response().request()).build();\n            return invocationContext.decoder().decode(modifiedResponse, invocationContext.returnType());\n        } else {\n            return invocationContext.proceed();\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20445,"reputation":6733,"user_id":48869,"accept_rate":81,"display_name":"Eldelshell"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2279,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":20070999,"answer_count":3,"score":4,"last_activity_date":1696584647,"creation_date":1384857154,"question_id":20069088,"body_markdown":"For some reason Jackson 2.3.0 is unable to parse a JSONP response.\r\n\r\n    com.fasterxml.jackson.core.JsonParseException: Unrecognized token &#39;my_json_callback&#39;:\r\n\r\nI&#39;ve got the deserialization process to work without the callback.\r\n\r\nI&#39;ve tried with the Jackson JAX-RS package which includes a `@JSONP` annotation, but this seems to be used only when serializing.","title":"Deserialize JSONP with Jackson","body":"<p>For some reason Jackson 2.3.0 is unable to parse a JSONP response.</p>\n\n<pre><code>com.fasterxml.jackson.core.JsonParseException: Unrecognized token 'my_json_callback':\n</code></pre>\n\n<p>I've got the deserialization process to work without the callback.</p>\n\n<p>I've tried with the Jackson JAX-RS package which includes a <code>@JSONP</code> annotation, but this seems to be used only when serializing.</p>\n"},{"tags":["java","libgdx","stage"],"owner":{"account_id":11290194,"reputation":19,"user_id":8279549,"display_name":"motesolo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1696584390,"creation_date":1696584390,"question_id":77243293,"body_markdown":"game screen is:\r\n```\r\npublic class GameScreen implements Screen {\r\n\tfinal Test1 game;\r\n\t\r\n\tprivate Stage stage;\r\n\tprivate TrafficGame trafficGame;\r\n\t\r\n\tpublic GameScreen(Test1 _game) {\r\n\t\tgame = _game;\r\n\t\tstage = new Stage(new ExtendViewport(800, 480));\r\n\r\n\t\ttrafficGame = new TrafficGame();\r\n\t\tstage.addActor(trafficGame);\r\n\t\t\r\n\t}\r\n\r\n        public void render(float delta) {\r\n\t\tGdx.gl.glClearColor(255, 255, 255, 1);\r\n\t\tGdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\r\n\t\t\r\n\t\t// calls TrafficGame actor act/draw method\r\n\t\tstage.act(delta);\r\n\t\tstage.draw();\r\n\t}\r\n```\r\nand TrafficGame which has main logic:\r\n```\r\npublic class TrafficGame extends Table {\r\n\tprivate InfiniteScrollBg backgroundRoad;\r\n\t\r\n\tpublic TrafficGame() {\r\n\t\tsetBounds(0, 0, 800, 480);\r\n\t\tbackgroundRoad = new InfiniteScrollBg(getWidth(), getHeight());\r\n\t\taddActor(backgroundRoad);\r\n\t}\r\n\t\r\n\tpublic void act(float delta) {\r\n\t\tsuper.act(delta);\r\n\t}\r\n\r\n\tpublic void draw(SpriteBatch batch, float parentAlpha) {\r\n\t\tbatch.setColor(Color.WHITE);\r\n\t\tsuper.draw(batch, parentAlpha);\r\n\t}\t\r\n\r\n}\r\n```\r\n\r\nand InfiniteScrollBg which is actor drawing scrolling road:\r\n```\r\n\r\npublic class InfiniteScrollBg extends Actor {\r\n\tprivate static Texture road;\r\n\t\r\n\t{\r\n\t\troad = new Texture(Gdx.files.internal(&quot;road.png&quot;));\r\n\t}\r\n\r\n\tpublic InfiniteScrollBg(float width, float height) {\r\n\t\tsetWidth(width);\r\n\t\tsetHeight(height);\r\n\t\tsetPosition(width, 0);\r\n                addAction(forever(sequence(moveTo(0, 0, 1f), moveTo(width, 0))));\r\n\t}\r\n\r\n\tpublic void draw(SpriteBatch batch, float parentAlpha) {\r\n\t\tsuper.draw(batch, parentAlpha);\r\n\r\n\t\tbatch.draw(road, getX() - getWidth(), getY(), getWidth() * 2, getHeight());\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nchanged InfiniteScrollBg.draw() parameters: \r\nfrom\r\nbatch.draw(road, getX() - getWidth(), getY(), getWidth() * 2, getHeight()); \r\nto\r\nbatch.draw(road, 0, getY(), getWidth() * 2, getHeight());\r\n\r\nor moving stage.camera to (0, 0) \r\n\r\nor anything I try not solving problem...","title":"Using libGdx, nothing is shown after calling stage.draw() which stage has extendViewport","body":"<p>game screen is:</p>\n<pre><code>public class GameScreen implements Screen {\n    final Test1 game;\n    \n    private Stage stage;\n    private TrafficGame trafficGame;\n    \n    public GameScreen(Test1 _game) {\n        game = _game;\n        stage = new Stage(new ExtendViewport(800, 480));\n\n        trafficGame = new TrafficGame();\n        stage.addActor(trafficGame);\n        \n    }\n\n        public void render(float delta) {\n        Gdx.gl.glClearColor(255, 255, 255, 1);\n        Gdx.gl.glClear(GL20.GL_COLOR_BUFFER_BIT);\n        \n        // calls TrafficGame actor act/draw method\n        stage.act(delta);\n        stage.draw();\n    }\n</code></pre>\n<p>and TrafficGame which has main logic:</p>\n<pre><code>public class TrafficGame extends Table {\n    private InfiniteScrollBg backgroundRoad;\n    \n    public TrafficGame() {\n        setBounds(0, 0, 800, 480);\n        backgroundRoad = new InfiniteScrollBg(getWidth(), getHeight());\n        addActor(backgroundRoad);\n    }\n    \n    public void act(float delta) {\n        super.act(delta);\n    }\n\n    public void draw(SpriteBatch batch, float parentAlpha) {\n        batch.setColor(Color.WHITE);\n        super.draw(batch, parentAlpha);\n    }   \n\n}\n</code></pre>\n<p>and InfiniteScrollBg which is actor drawing scrolling road:</p>\n<pre><code>\npublic class InfiniteScrollBg extends Actor {\n    private static Texture road;\n    \n    {\n        road = new Texture(Gdx.files.internal(&quot;road.png&quot;));\n    }\n\n    public InfiniteScrollBg(float width, float height) {\n        setWidth(width);\n        setHeight(height);\n        setPosition(width, 0);\n                addAction(forever(sequence(moveTo(0, 0, 1f), moveTo(width, 0))));\n    }\n\n    public void draw(SpriteBatch batch, float parentAlpha) {\n        super.draw(batch, parentAlpha);\n\n        batch.draw(road, getX() - getWidth(), getY(), getWidth() * 2, getHeight());\n    }\n}\n</code></pre>\n<p>changed InfiniteScrollBg.draw() parameters:\nfrom\nbatch.draw(road, getX() - getWidth(), getY(), getWidth() * 2, getHeight());\nto\nbatch.draw(road, 0, getY(), getWidth() * 2, getHeight());</p>\n<p>or moving stage.camera to (0, 0)</p>\n<p>or anything I try not solving problem...</p>\n"},{"tags":["java","centos","centos7"],"comments":[{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538480745,"post_id":52606848,"comment_id":92149317,"body_markdown":"Umm ... am I missing something?  Can&#39;t you just get your script to run `alternatives --config java` if you want the user to choose, or `alternative --set java &lt;path&gt;`?","body":"Umm ... am I missing something?  Can&#39;t you just get your script to run <code>alternatives --config java</code> if you want the user to choose, or <code>alternative --set java &lt;path&gt;</code>?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538480807,"post_id":52606848,"comment_id":92149352,"body_markdown":"Anyhow, this shouldn&#39;t be tagged with `java` since it is entirely about wrangling the `alternatives` command.","body":"Anyhow, this shouldn&#39;t be tagged with <code>java</code> since it is entirely about wrangling the <code>alternatives</code> command."},{"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"score":0,"creation_date":1538481127,"post_id":52606848,"comment_id":92149491,"body_markdown":"I don&#39;t run run `alternatives --config java`, because it requires user input .You can use   `alternatives --set &lt;name&gt; &lt;path&gt;`","body":"I don&#39;t run run <code>alternatives --config java</code>, because it requires user input .You can use   <code>alternatives --set &lt;name&gt; &lt;path&gt;</code>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538481649,"post_id":52606848,"comment_id":92149789,"body_markdown":"Correct.  So what is your question?","body":"Correct.  So what is your question?"},{"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"score":0,"creation_date":1538481706,"post_id":52606848,"comment_id":92149821,"body_markdown":"I don&#39;t want an user to choose which version, I want launch a script who require a specific version of openjdk, so I want to know if an alternative exits for this version. I need to get what usually you get with the command `alternatives --list java `, but for some reasons doesn&#39;t work here .","body":"I don&#39;t want an user to choose which version, I want launch a script who require a specific version of openjdk, so I want to know if an alternative exits for this version. I need to get what usually you get with the command <code>alternatives --list java </code>, but for some reasons doesn&#39;t work here ."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538481740,"post_id":52606848,"comment_id":92149846,"body_markdown":"If you want your script to **use** a specific version of Java, you don&#39;t use &quot;alternatives&quot;.  You simply add the path to the required version to the script&#39;s $PATH ... or use an absolute pathname.  And there are various symlinks to help you do this.","body":"If you want your script to <b>use</b> a specific version of Java, you don&#39;t use &quot;alternatives&quot;.  You simply add the path to the required version to the script&#39;s $PATH ... or use an absolute pathname.  And there are various symlinks to help you do this."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538482094,"post_id":52606848,"comment_id":92150041,"body_markdown":"Sorry ... but alternatives is not smart enough to do this kind of thing.  You are better off just using your knowledge of how the *standard* openjdk symlinks work for your OS platform.","body":"Sorry ... but alternatives is not smart enough to do this kind of thing.  You are better off just using your knowledge of how the <i>standard</i> openjdk symlinks work for your OS platform."},{"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"score":0,"creation_date":1538482658,"post_id":52606848,"comment_id":92150333,"body_markdown":"Ok, that&#39;s clearer, thank you; But do you have an idea why `alternatives --list `doesn&#39;t work?","body":"Ok, that&#39;s clearer, thank you; But do you have an idea why <code>alternatives --list </code>doesn&#39;t work?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1538483739,"post_id":52606848,"comment_id":92150901,"body_markdown":"Because it doesn&#39;t.  The `--list` option is designed to list all link groups and what they are currently configured to.  It don&#39;t take a `&lt;name&gt;` argument.  Like the `--help`  output and the manual entry both say.","body":"Because it doesn&#39;t.  The <code>--list</code> option is designed to list all link groups and what they are currently configured to.  It don&#39;t take a <code>&lt;name&gt;</code> argument.  Like the <code>--help</code>  output and the manual entry both say."},{"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"score":0,"creation_date":1538486130,"post_id":52606848,"comment_id":92152356,"body_markdown":"But in the synopsis there is alternatives [options] --list name, this is what fooled me","body":"But in the synopsis there is alternatives [options] --list name, this is what fooled me"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1538486782,"post_id":52606848,"comment_id":92152774,"body_markdown":"True.  That&#39;s a documentation bug.","body":"True.  That&#39;s a documentation bug."},{"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"score":0,"creation_date":1538486995,"post_id":52606848,"comment_id":92152949,"body_markdown":"Ok, well thank you very much for your time given, I&#39;hv learn a lot, it&#39;s a great day !","body":"Ok, well thank you very much for your time given, I&#39;hv learn a lot, it&#39;s a great day !"}],"answers":[{"tags":[],"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1538488698,"creation_date":1538487120,"answer_id":52609444,"question_id":52606848,"body_markdown":"It appears than the option --list doesn&#39;t take arguments, it&#39;s a bug in the manual synopsis.Moreover for manage my java versions I should try env variables.\r\n\r\n(The bug has been reported as https://github.com/fedora-sysv/chkconfig/issues/11)","title":"Centos 7 how get alternatives list for java","body":"<p>It appears than the option --list doesn't take arguments, it's a bug in the manual synopsis.Moreover for manage my java versions I should try env variables.</p>\n\n<p>(The bug has been reported as <a href=\"https://github.com/fedora-sysv/chkconfig/issues/11\" rel=\"nofollow noreferrer\">https://github.com/fedora-sysv/chkconfig/issues/11</a>)</p>\n"},{"tags":[],"owner":{"account_id":17979782,"reputation":51,"user_id":16341201,"display_name":"Rameez Sheraz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1661475637,"creation_date":1661174643,"answer_id":73445871,"question_id":52606848,"body_markdown":"Use this command `alternatives --list` to get available versions on cli.\r\n\r\n    [root@88a15b43eab2 /]# alternatives --list\r\n    ld\tauto\t/usr/bin/ld.bfd\r\n    libnssckbi.so.x86_64\tauto\t/usr/lib64/pkcs11/p11-kit-trust.so\r\n    jre_openjdk\tauto\t/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre\r\n    java\tauto\t/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre/bin/java\r\n    jre_1.8.0_openjdk\tauto\t/usr/lib/jvm/jre-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64\r\n    jre_1.8.0\tauto\t/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre","title":"Centos 7 how get alternatives list for java","body":"<p>Use this command <code>alternatives --list</code> to get available versions on cli.</p>\n<pre><code>[root@88a15b43eab2 /]# alternatives --list\nld  auto    /usr/bin/ld.bfd\nlibnssckbi.so.x86_64    auto    /usr/lib64/pkcs11/p11-kit-trust.so\njre_openjdk auto    /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre\njava    auto    /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre/bin/java\njre_1.8.0_openjdk   auto    /usr/lib/jvm/jre-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64\njre_1.8.0   auto    /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.342.b07-1.el7_9.x86_64/jre\n</code></pre>\n"}],"owner":{"account_id":12037779,"reputation":121,"user_id":8805730,"display_name":"UnRealCloud"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23328,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":52609444,"answer_count":2,"score":5,"last_activity_date":1696583866,"creation_date":1538477286,"question_id":52606848,"body_markdown":"I would like to get the list of all alternatives for java versions, choose one and set it in a script, but option --list doesn&#39;t work as expected:\r\n\r\n\r\n\r\n    alternatives --list java\r\n    alternatives version 1.7.4 - Copyright (C) 2001 Red Hat, Inc.\r\n    This may be freely redistributed under the terms of the GNU Public License.\r\n    \r\n    usage: alternatives --install &lt;link&gt; &lt;name&gt; &lt;path&gt; &lt;priority&gt;\r\n                        [--initscript &lt;service&gt;]\r\n                        [--family &lt;family&gt;]\r\n                        [--slave &lt;link&gt; &lt;name&gt; &lt;path&gt;]*\r\n           alternatives --remove &lt;name&gt; &lt;path&gt;\r\n           alternatives --auto &lt;name&gt;\r\n           alternatives --config &lt;name&gt;\r\n           alternatives --display &lt;name&gt;\r\n           alternatives --set &lt;name&gt; &lt;path&gt;\r\n           alternatives --list\r\n    common options: --verbose --test --help --usage --version --keep-missing\r\n                    --altdir &lt;directory&gt; --admindir &lt;directory&gt;\r\n\r\n\r\nFor the moment I create my own list with `/etc/alternatives`, but I&#39;m not satisfied. How can I get a list like :\r\n\r\n\r\n\r\n\r\n    # alternatives --config java\r\n    \r\n    There are 2 programs which provide &#39;java&#39;.\r\n    \r\n      Selection    Command\r\n    -----------------------------------------------\r\n     + 1           java-1.7.0-openjdk.x86_64 (/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.191-2.6.15.4.el7_5.x86_64/jre/bin/java)\r\n    *  2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-3.b13.el7_5.x86_64/jre/bin/java)\r\n\r\n\r\n","title":"Centos 7 how get alternatives list for java","body":"<p>I would like to get the list of all alternatives for java versions, choose one and set it in a script, but option --list doesn't work as expected:</p>\n<pre><code>alternatives --list java\nalternatives version 1.7.4 - Copyright (C) 2001 Red Hat, Inc.\nThis may be freely redistributed under the terms of the GNU Public License.\n\nusage: alternatives --install &lt;link&gt; &lt;name&gt; &lt;path&gt; &lt;priority&gt;\n                    [--initscript &lt;service&gt;]\n                    [--family &lt;family&gt;]\n                    [--slave &lt;link&gt; &lt;name&gt; &lt;path&gt;]*\n       alternatives --remove &lt;name&gt; &lt;path&gt;\n       alternatives --auto &lt;name&gt;\n       alternatives --config &lt;name&gt;\n       alternatives --display &lt;name&gt;\n       alternatives --set &lt;name&gt; &lt;path&gt;\n       alternatives --list\ncommon options: --verbose --test --help --usage --version --keep-missing\n                --altdir &lt;directory&gt; --admindir &lt;directory&gt;\n</code></pre>\n<p>For the moment I create my own list with <code>/etc/alternatives</code>, but I'm not satisfied. How can I get a list like :</p>\n<pre><code># alternatives --config java\n\nThere are 2 programs which provide 'java'.\n\n  Selection    Command\n-----------------------------------------------\n + 1           java-1.7.0-openjdk.x86_64 (/usr/lib/jvm/java-1.7.0-openjdk-1.7.0.191-2.6.15.4.el7_5.x86_64/jre/bin/java)\n*  2           java-1.8.0-openjdk.x86_64 (/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.181-3.b13.el7_5.x86_64/jre/bin/java)\n</code></pre>\n"},{"tags":["java","spring-boot","jackson","lombok"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":2,"creation_date":1696582850,"post_id":77243089,"comment_id":136174548,"body_markdown":"Java doesn&#39;t work that way. If you have declared a field but you haven&#39;t assigned any value, then it is `null` by default, provided it is non-primitive.","body":"Java doesn&#39;t work that way. If you have declared a field but you haven&#39;t assigned any value, then it is <code>null</code> by default, provided it is non-primitive."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1696583283,"post_id":77243089,"comment_id":136174611,"body_markdown":"What exactly did you think would happen? your jvm would (on runtime) create a new DataType with only the variables you provided?","body":"What exactly did you think would happen? your jvm would (on runtime) create a new DataType with only the variables you provided?"}],"answers":[{"tags":[],"owner":{"account_id":10298429,"reputation":307,"user_id":9311987,"display_name":"user699848"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1696583547,"creation_date":1696583547,"answer_id":77243203,"question_id":77243089,"body_markdown":"No that is not possible. \r\nWhen an object of data type is created, all the properties in that datatype can either have a value or, it will be null. Property wont disaapear.","title":"Ignore null value when using lombok superbuilder","body":"<p>No that is not possible.\nWhen an object of data type is created, all the properties in that datatype can either have a value or, it will be null. Property wont disaapear.</p>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1696583605,"creation_date":1696583605,"answer_id":77243211,"question_id":77243089,"body_markdown":"As others have explained in the comments, you can&#39;t omit the field from the object at all. That&#39;s just not how Java works.\r\n\r\nIf you want to omit it from the `toString` only, you can do that by manually writing your own `toString` implementation. It&#39;s [not a feature of Lombok&#39;s @ToString](https://stackoverflow.com/q/54604701/8681).","title":"Ignore null value when using lombok superbuilder","body":"<p>As others have explained in the comments, you can't omit the field from the object at all. That's just not how Java works.</p>\n<p>If you want to omit it from the <code>toString</code> only, you can do that by manually writing your own <code>toString</code> implementation. It's <a href=\"https://stackoverflow.com/q/54604701/8681\">not a feature of Lombok's @ToString</a>.</p>\n"}],"owner":{"account_id":4147580,"reputation":523,"user_id":3400871,"accept_rate":50,"display_name":"Clueless_Coder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1696583605,"creation_date":1696582293,"question_id":77243089,"body_markdown":"I have a situation using Lombok SuperBuilder to create a constructor for my class\r\nIs there anyway I can create an object using builder without it creating a null value?\r\n\r\n\r\n    @Data\r\n    @SuperBuilder\r\n    public class Student {\r\n        private String name;\r\n        private String email;\r\n        private String DOB;\r\n    }\r\n\r\n\r\n    StudentReq.builder()\r\n       .name(name)\r\n       .DOB(DOB)\r\n       .build()\r\n\r\nThe result should be StudentReq(name=John, DOB=19051995) but I am getting StudentReq(name=John, email=null, DOB=19051995)\r\n\r\n","title":"Ignore null value when using lombok superbuilder","body":"<p>I have a situation using Lombok SuperBuilder to create a constructor for my class\nIs there anyway I can create an object using builder without it creating a null value?</p>\n<pre><code>@Data\n@SuperBuilder\npublic class Student {\n    private String name;\n    private String email;\n    private String DOB;\n}\n\n\nStudentReq.builder()\n   .name(name)\n   .DOB(DOB)\n   .build()\n</code></pre>\n<p>The result should be StudentReq(name=John, DOB=19051995) but I am getting StudentReq(name=John, email=null, DOB=19051995)</p>\n"},{"tags":["java","scala","apache-spark","intellij-idea"],"comments":[{"owner":{"account_id":1450311,"reputation":23602,"user_id":1367454,"display_name":"eshirvana"},"score":1,"creation_date":1696534933,"post_id":77240066,"comment_id":136169332,"body_markdown":"provide your code as well.","body":"provide your code as well."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1696545436,"post_id":77240066,"comment_id":136170823,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"answers":[{"tags":[],"owner":{"account_id":1017255,"reputation":1526,"user_id":1028537,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696582602,"creation_date":1696582602,"answer_id":77243113,"question_id":77240066,"body_markdown":"Per https://spark.apache.org/docs/latest/ jdk-19 is not a supported jdk version:\r\n\r\n&gt; Spark runs on Java 8/11/17, Scala 2.12/2.13, Python 3.8+, and R 3.5+. Java 8 prior to version 8u371 support is deprecated as of Spark 3.5.0. \r\n\r\n ","title":"Spark RDD ADI&#39;s using scala programing intelliJ","body":"<p>Per <a href=\"https://spark.apache.org/docs/latest/\" rel=\"nofollow noreferrer\">https://spark.apache.org/docs/latest/</a> jdk-19 is not a supported jdk version:</p>\n<blockquote>\n<p>Spark runs on Java 8/11/17, Scala 2.12/2.13, Python 3.8+, and R 3.5+. Java 8 prior to version 8u371 support is deprecated as of Spark 3.5.0.</p>\n</blockquote>\n"}],"owner":{"account_id":24862511,"reputation":1,"user_id":18738071,"display_name":"Ahed Hamad"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1696582602,"creation_date":1696534246,"question_id":77240066,"body_markdown":"I want to create a Spark API program using Scala, and when adding the Spark context, this exception appears.&quot;\r\n\r\nI have:\r\n- spark version 3.5.0\r\n- scala version 2.12.18\r\n- jdk-19\r\n\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x47542153) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x47542153\r\n\tat org.apache.spark.storage.StorageUtils$.&lt;clinit&gt;(StorageUtils.scala:213)\r\n\tat org.apache.spark.storage.BlockManagerMasterEndpoint.&lt;init&gt;(BlockManagerMasterEndpoint.scala:121)\r\n\tat org.apache.spark.SparkEnv$.$anonfun$create$9(SparkEnv.scala:358)\r\n\tat org.apache.spark.SparkEnv$.registerOrLookupEndpoint$1(SparkEnv.scala:295)\r\n\tat org.apache.spark.SparkEnv$.create(SparkEnv.scala:344)\r\n\tat org.apache.spark.SparkEnv$.createDriverEnv(SparkEnv.scala:196)\r\n\tat org.apache.spark.SparkContext.createSparkEnv(SparkContext.scala:284)\r\n\tat org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:483)\r\n\tat ReadCSVFile$.main(ReadCSVFile.scala:15)\r\n\tat ReadCSVFile.main(ReadCSVFile.scala)\r\n```","title":"Spark RDD ADI&#39;s using scala programing intelliJ","body":"<p>I want to create a Spark API program using Scala, and when adding the Spark context, this exception appears.&quot;</p>\n<p>I have:</p>\n<ul>\n<li>spark version 3.5.0</li>\n<li>scala version 2.12.18</li>\n<li>jdk-19</li>\n</ul>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalAccessError: class org.apache.spark.storage.StorageUtils$ (in unnamed module @0x47542153) cannot access class sun.nio.ch.DirectBuffer (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x47542153\n    at org.apache.spark.storage.StorageUtils$.&lt;clinit&gt;(StorageUtils.scala:213)\n    at org.apache.spark.storage.BlockManagerMasterEndpoint.&lt;init&gt;(BlockManagerMasterEndpoint.scala:121)\n    at org.apache.spark.SparkEnv$.$anonfun$create$9(SparkEnv.scala:358)\n    at org.apache.spark.SparkEnv$.registerOrLookupEndpoint$1(SparkEnv.scala:295)\n    at org.apache.spark.SparkEnv$.create(SparkEnv.scala:344)\n    at org.apache.spark.SparkEnv$.createDriverEnv(SparkEnv.scala:196)\n    at org.apache.spark.SparkContext.createSparkEnv(SparkContext.scala:284)\n    at org.apache.spark.SparkContext.&lt;init&gt;(SparkContext.scala:483)\n    at ReadCSVFile$.main(ReadCSVFile.scala:15)\n    at ReadCSVFile.main(ReadCSVFile.scala)\n</code></pre>\n"},{"tags":["java","openid-connect","pac4j"],"answers":[{"tags":[],"owner":{"account_id":1608505,"reputation":2459,"user_id":1488073,"display_name":"jleleu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1696582226,"creation_date":1696582226,"answer_id":77243084,"question_id":77242876,"body_markdown":"To change the name of a client, `client.setName(&quot;xxx&quot;);` is the appropriate thing to do.\r\n\r\nSometimes, depending on the provider, there might be an issue with the fact that the client name is a request parameter. You can apply the client name on the path if need be: https://www.pac4j.org/5.7.x/docs/clients.html#3-the-callback-url","title":"How to change the name of the OIDC Client in pac4j","body":"<p>To change the name of a client, <code>client.setName(&quot;xxx&quot;);</code> is the appropriate thing to do.</p>\n<p>Sometimes, depending on the provider, there might be an issue with the fact that the client name is a request parameter. You can apply the client name on the path if need be: <a href=\"https://www.pac4j.org/5.7.x/docs/clients.html#3-the-callback-url\" rel=\"nofollow noreferrer\">https://www.pac4j.org/5.7.x/docs/clients.html#3-the-callback-url</a></p>\n"}],"owner":{"account_id":22418943,"reputation":39,"user_id":16626558,"display_name":"Impatient Hippo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77243084,"answer_count":1,"score":0,"last_activity_date":1696582226,"creation_date":1696580060,"question_id":77242876,"body_markdown":"I am experimenting with the pac4j in order to add OIDC to\r\na webapp. I started with the jee-pac4j-demo app.\r\n\r\nFrom there I intend to go to a different OIDC Client.\r\n\r\n* I was also able to switch the Client to another OAuth2.0-Client-ID inside the Google Cloud. (Just by setting different Credentials)\r\n\r\n* I got the GoogleOidcClient working with a public hostname/ip. (Had to set the base_url of the context in some places).\r\n\r\n* However, I am not able to change the *name* of the Client.\r\n\r\nI changed\r\n* the Name of the ID inside the Google Cloud Console\r\n  from GoogleOidClient to Auth-Test\r\n* and also client_name parameter in the callback URL accordingly\r\n\r\nI got a malformed_url error from Google.\r\n\r\n* then I also added `oidcClient.setName(&quot;Auth-Test&quot;)` to the factory.\r\n\r\nThen I just get an &quot;unauthorized&quot;. \r\n\r\nIs GoogleOidcClient not supposed to be tampered with? \r\n\r\nIs setName the wrong approach?\r\n\r\nIs there a tutorial on how to add a &quot;random&quot; OIDC Client to the pac4j configuration?\r\n\r\nWhy does the logging still refer to localhost:8080?\r\n\r\n```\r\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - url: http://localhost:8080/jee-pac4j-demo/oidc/index.jsp\r\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - clients: GoogleOidcClient | matchers: null\r\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - currentClients: []\r\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - Loaded profiles (from session: true): []\r\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - unauthorized\r\n```","title":"How to change the name of the OIDC Client in pac4j","body":"<p>I am experimenting with the pac4j in order to add OIDC to\na webapp. I started with the jee-pac4j-demo app.</p>\n<p>From there I intend to go to a different OIDC Client.</p>\n<ul>\n<li><p>I was also able to switch the Client to another OAuth2.0-Client-ID inside the Google Cloud. (Just by setting different Credentials)</p>\n</li>\n<li><p>I got the GoogleOidcClient working with a public hostname/ip. (Had to set the base_url of the context in some places).</p>\n</li>\n<li><p>However, I am not able to change the <em>name</em> of the Client.</p>\n</li>\n</ul>\n<p>I changed</p>\n<ul>\n<li>the Name of the ID inside the Google Cloud Console\nfrom GoogleOidClient to Auth-Test</li>\n<li>and also client_name parameter in the callback URL accordingly</li>\n</ul>\n<p>I got a malformed_url error from Google.</p>\n<ul>\n<li>then I also added <code>oidcClient.setName(&quot;Auth-Test&quot;)</code> to the factory.</li>\n</ul>\n<p>Then I just get an &quot;unauthorized&quot;.</p>\n<p>Is GoogleOidcClient not supposed to be tampered with?</p>\n<p>Is setName the wrong approach?</p>\n<p>Is there a tutorial on how to add a &quot;random&quot; OIDC Client to the pac4j configuration?</p>\n<p>Why does the logging still refer to localhost:8080?</p>\n<pre><code>JEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - url: http://localhost:8080/jee-pac4j-demo/oidc/index.jsp\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - clients: GoogleOidcClient | matchers: null\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - currentClients: []\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - Loaded profiles (from session: true): []\nJEE PAC4J DEMO 09:55:45.735 [http-nio-8080-exec-52] DEBUG o.p.core.engine.DefaultSecurityLogic - unauthorized\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9878,"page":139,"page_size":100}
