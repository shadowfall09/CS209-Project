{"items":[{"tags":["java","spring","postgresql","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1690293216,"post_id":76762715,"comment_id":135331038,"body_markdown":"Make it a native query. Otherwise you would need to [register a new function with HQL](https://stackoverflow.com/questions/13568914/date-operations-in-hql). As a side note: https://www.coding-dude.com/wp/hibernate/hql-current-date/ this lists possible options for you","body":"Make it a native query. Otherwise you would need to <a href=\"https://stackoverflow.com/questions/13568914/date-operations-in-hql\">register a new function with HQL</a>. As a side note: <a href=\"https://www.coding-dude.com/wp/hibernate/hql-current-date/\" rel=\"nofollow noreferrer\">coding-dude.com/wp/hibernate/hql-current-date</a> this lists possible options for you"},{"owner":{"account_id":17628263,"reputation":143,"user_id":12792897,"display_name":"Wail"},"score":0,"creation_date":1690295252,"post_id":76762715,"comment_id":135331570,"body_markdown":"If I do a native query as you say, it stops for a while and I get the message: &quot;No Dialect mapping for JDBC type: 2002; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002&quot;,","body":"If I do a native query as you say, it stops for a while and I get the message: &quot;No Dialect mapping for JDBC type: 2002; nested exception is org.hibernate.MappingException: No Dialect mapping for JDBC type: 2002&quot;,"},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1690351610,"post_id":76762715,"comment_id":135339399,"body_markdown":"To fix that is probably out of scope of this question. According to the 2nd link I posted, you could try in the HQL something like this: `WHERE :activeDate between cd.module_start_date and cd.module_end_date + 90` This requires `module_end_date` to be date without time though","body":"To fix that is probably out of scope of this question. According to the 2nd link I posted, you could try in the HQL something like this: <code>WHERE :activeDate between cd.module_start_date and cd.module_end_date + 90</code> This requires <code>module_end_date</code> to be date without time though"}],"owner":{"account_id":17628263,"reputation":143,"user_id":12792897,"display_name":"Wail"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690295844,"creation_date":1690288131,"question_id":76762715,"body_markdown":"I&#39;m trying to make the moduleEndDate field 90 days in the future. If I run this in the database natively from Postgre, it doesn&#39;t return any error, but if I apply it to JPA I get an error. \r\n\r\n&gt; 2023-07-25 14:22:35.099 [main] ERROR o.h.hql.internal.ast.ErrorTracker\r\n&gt; - line 1:103: unexpected token: INTERVAL antlr.NoViableAltException: unexpected token: INTERVAL\r\n\r\nThe specific query is customized for JPA:\r\n\r\n    public interface ICourseDataRepository extends JpaRepository&lt;CourseData, Long&gt; {\r\n    \r\n    \t@Query(&quot;SELECT cd FROM course_data cd WHERE :activeDate between cd.module_start_date and cd.module_end_date + INTERVAL &#39;90 DAY&#39;&quot;)\r\n    \tpublic List&lt;CourseData&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\r\n    \r\n    }\r\n\r\n\r\nIf I directly try to take the field and add it for the number of seconds in a day **cd.module_end_date + 90 * 86400** I can&#39;t either because the field is of the timestamp type... I can&#39;t think of any other way for JPA to accept it and be compatible with Postgre.\r\n\r\n\r\nI update that I have tried to do it with native query in this way and it returns another error:\r\n\r\n    @Query(value = &quot;SELECT cd FROM course_data cd WHERE ?1 between cd.module_start_date and cd.module_end_date + INTERVAL &#39;90 DAY&#39;&quot;,\r\n    \t\tnativeQuery = true)\r\n    public List&lt;Object[]&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\r\n\r\nAnd it returns the following error:\r\n\r\n&gt; org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for\r\n&gt; JDBC type: 2002; nested exception is org.hibernate.MappingException:\r\n&gt; No Dialect mapping for JDBC type: 2002","title":"How to increment days for JPA without using interval?","body":"<p>I'm trying to make the moduleEndDate field 90 days in the future. If I run this in the database natively from Postgre, it doesn't return any error, but if I apply it to JPA I get an error.</p>\n<blockquote>\n<p>2023-07-25 14:22:35.099 [main] ERROR o.h.hql.internal.ast.ErrorTracker</p>\n<ul>\n<li>line 1:103: unexpected token: INTERVAL antlr.NoViableAltException: unexpected token: INTERVAL</li>\n</ul>\n</blockquote>\n<p>The specific query is customized for JPA:</p>\n<pre><code>public interface ICourseDataRepository extends JpaRepository&lt;CourseData, Long&gt; {\n\n    @Query(&quot;SELECT cd FROM course_data cd WHERE :activeDate between cd.module_start_date and cd.module_end_date + INTERVAL '90 DAY'&quot;)\n    public List&lt;CourseData&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\n\n}\n</code></pre>\n<p>If I directly try to take the field and add it for the number of seconds in a day <strong>cd.module_end_date + 90 * 86400</strong> I can't either because the field is of the timestamp type... I can't think of any other way for JPA to accept it and be compatible with Postgre.</p>\n<p>I update that I have tried to do it with native query in this way and it returns another error:</p>\n<pre><code>@Query(value = &quot;SELECT cd FROM course_data cd WHERE ?1 between cd.module_start_date and cd.module_end_date + INTERVAL '90 DAY'&quot;,\n        nativeQuery = true)\npublic List&lt;Object[]&gt; findActiveCourses(@Param(&quot;activeDate&quot;) LocalDateTime activeDate);\n</code></pre>\n<p>And it returns the following error:</p>\n<blockquote>\n<p>org.springframework.orm.jpa.JpaSystemException: No Dialect mapping for\nJDBC type: 2002; nested exception is org.hibernate.MappingException:\nNo Dialect mapping for JDBC type: 2002</p>\n</blockquote>\n"},{"tags":["java","jsf","cdi"],"comments":[{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1690216429,"post_id":76745863,"comment_id":135319338,"body_markdown":"fire CDI event from generic popup? listen to event in beans, and don&#39;t forget @Observes(notifyObserver=IF_EXISTS),  so event is listened to only if there is instance of PopupCallback (so constructor will not be called for every PopupCallback, just for the one that is already in the view scope)","body":"fire CDI event from generic popup? listen to event in beans, and don&#39;t forget @Observes(notifyObserver=IF_EXISTS),  so event is listened to only if there is instance of PopupCallback (so constructor will not be called for every PopupCallback, just for the one that is already in the view scope)"}],"answers":[{"comments":[{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1690297912,"post_id":76757817,"comment_id":135332164,"body_markdown":"it&#39;s not hard to determine receiver, he can make different &quot;marker&quot; objects for every event he has, and using @Observes(notifyObserver=IF_EXISTS) will prevent constructor to be called","body":"it&#39;s not hard to determine receiver, he can make different &quot;marker&quot; objects for every event he has, and using @Observes(notifyObserver=IF_EXISTS) will prevent constructor to be called"}],"tags":[],"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690230350,"creation_date":1690230350,"answer_id":76757817,"question_id":76745863,"body_markdown":"If this were me, I would just inject the bean:\r\n\r\n```\r\n@Named\r\n@ViewScoped\r\npublic class GenericPopupBean {\r\n    @Inject\r\n    private PopupCallback callback;\r\n}\r\n```\r\nThis should work as long as there is one implementation of `PopupCallback`. You wouldn&#39;t even need the `PopupCallback` interface.\r\n\r\n\r\nIf multiple implementations of `PopupCallback` exist, I would probably solve this by inverting the relationship:\r\n\r\n```\r\n@Named\r\n@ViewScoped\r\npublic class MainBean implements PopupCallback {\r\n    @Inject\r\n    private MainBean popupCallback;\r\n    @Inject\r\n    private GenericPopupBean genericPopupBean;\r\n\r\n...\r\n\r\n    public void openPopup() {\r\n        genericPopupBean.setCallBack(popupCallback); //note &#39;this&#39; might work here instead, depending on the CDI implementation. Not sure that&#39;s 100% spec compliant.\r\n        ...\r\n    }\r\n...\r\n}\r\n```\r\n\r\nIf you want to know why this works, see my answer here: https://stackoverflow.com/questions/64536655/why-does-self-injection-with-cdi-not-result-in-an-infinite-loop\r\n\r\nIt&#39;s usually not a good idea to pass around `@Inject`ed material, but in this particular case I think it&#39;s ok.\r\n\r\n\r\nOther ways would be to use the flash scope, which really isn&#39;t super great solution if people have multiple tabs/windows open.\r\n\r\nAnother is CDI Events, where you broadcast an event and then an arbitrary number of receivers can listen for said event, but it&#39;ll be hard to figure out who the correct receiver should be if you have multiple PopupCallbacks.\r\n\r\nAnyway good luck, let us know what you end up doing so others can benefit!","title":"Changing reference of ViewScoped beans in JSF 2.3 dynamically","body":"<p>If this were me, I would just inject the bean:</p>\n<pre><code>@Named\n@ViewScoped\npublic class GenericPopupBean {\n    @Inject\n    private PopupCallback callback;\n}\n</code></pre>\n<p>This should work as long as there is one implementation of <code>PopupCallback</code>. You wouldn't even need the <code>PopupCallback</code> interface.</p>\n<p>If multiple implementations of <code>PopupCallback</code> exist, I would probably solve this by inverting the relationship:</p>\n<pre><code>@Named\n@ViewScoped\npublic class MainBean implements PopupCallback {\n    @Inject\n    private MainBean popupCallback;\n    @Inject\n    private GenericPopupBean genericPopupBean;\n\n...\n\n    public void openPopup() {\n        genericPopupBean.setCallBack(popupCallback); //note 'this' might work here instead, depending on the CDI implementation. Not sure that's 100% spec compliant.\n        ...\n    }\n...\n}\n</code></pre>\n<p>If you want to know why this works, see my answer here: <a href=\"https://stackoverflow.com/questions/64536655/why-does-self-injection-with-cdi-not-result-in-an-infinite-loop\">Why does self injection with CDI not result in an infinite loop?</a></p>\n<p>It's usually not a good idea to pass around <code>@Inject</code>ed material, but in this particular case I think it's ok.</p>\n<p>Other ways would be to use the flash scope, which really isn't super great solution if people have multiple tabs/windows open.</p>\n<p>Another is CDI Events, where you broadcast an event and then an arbitrary number of receivers can listen for said event, but it'll be hard to figure out who the correct receiver should be if you have multiple PopupCallbacks.</p>\n<p>Anyway good luck, let us know what you end up doing so others can benefit!</p>\n"}],"owner":{"account_id":16306907,"reputation":117,"user_id":11776660,"display_name":"dssof"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76757817,"answer_count":1,"score":1,"last_activity_date":1690295780,"creation_date":1690061612,"question_id":76745863,"body_markdown":"I am working on an application in JSF, in which I have two ViewScoped beans within the same screen, and they need to communicate with each other. The first bean represents the main screen, and the other bean is a popup window where the user selects a certain value, which is then passed back to the previous bean.\r\n\r\nThe problem is that this latter bean is generic, meaning it can be used from various screens, so it doesn&#39;t have a direct reference to the main screen&#39;s bean. Instead, it references an interface, which is set dynamically. However, in some cases, this dynamic setting leads to errors, such as data loss.\r\n\r\nExample: \r\n\r\n``` \r\npublic interface PopupCallback {\r\n    void onValueSelected(String value);\r\n}\r\n\r\n@Named\r\n@ViewScoped\r\npublic class MainBean implements PopupCallback {\r\n    private String selectedValue;\r\n\r\n    // Getter and Setter for selectedValue\r\n\r\n    @Override\r\n    public void onValueSelected(String value) {\r\n        this.selectedValue = value;\r\n        // You can perform any additional logic here upon receiving the value from the popup.\r\n    }\r\n\r\n    public void openPopup() {\r\n        // Code to open the generic popup window\r\n    }\r\n}\r\n\r\n@Named\r\n@ViewScoped\r\npublic class GenericPopupBean {\r\n    private PopupCallback callback;\r\n\r\n    // Setter for the callback interface\r\n    public void setCallback(PopupCallback callback) {\r\n        this.callback = callback;\r\n    }\r\n\r\n    // Method to be called when the user selects a value in the popup\r\n    public void onValueSelected(String value) {\r\n        if (callback != null) {\r\n            callback.onValueSelected(value);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nWhat is the best way to achieve this?","title":"Changing reference of ViewScoped beans in JSF 2.3 dynamically","body":"<p>I am working on an application in JSF, in which I have two ViewScoped beans within the same screen, and they need to communicate with each other. The first bean represents the main screen, and the other bean is a popup window where the user selects a certain value, which is then passed back to the previous bean.</p>\n<p>The problem is that this latter bean is generic, meaning it can be used from various screens, so it doesn't have a direct reference to the main screen's bean. Instead, it references an interface, which is set dynamically. However, in some cases, this dynamic setting leads to errors, such as data loss.</p>\n<p>Example:</p>\n<pre><code>public interface PopupCallback {\n    void onValueSelected(String value);\n}\n\n@Named\n@ViewScoped\npublic class MainBean implements PopupCallback {\n    private String selectedValue;\n\n    // Getter and Setter for selectedValue\n\n    @Override\n    public void onValueSelected(String value) {\n        this.selectedValue = value;\n        // You can perform any additional logic here upon receiving the value from the popup.\n    }\n\n    public void openPopup() {\n        // Code to open the generic popup window\n    }\n}\n\n@Named\n@ViewScoped\npublic class GenericPopupBean {\n    private PopupCallback callback;\n\n    // Setter for the callback interface\n    public void setCallback(PopupCallback callback) {\n        this.callback = callback;\n    }\n\n    // Method to be called when the user selects a value in the popup\n    public void onValueSelected(String value) {\n        if (callback != null) {\n            callback.onValueSelected(value);\n        }\n    }\n}\n\n</code></pre>\n<p>What is the best way to achieve this?</p>\n"},{"tags":["java","request","jwt","http-headers"],"comments":[{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558984157,"post_id":56331269,"comment_id":99269511,"body_markdown":"Can you explain?","body":"Can you explain?"},{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558984759,"post_id":56331269,"comment_id":99269701,"body_markdown":"Probably the server isn&#39;t set up correctly so is denying the options request, but we can&#39;t tell from what you&#39;ve posted. See e.g. https://stackoverflow.com/a/40723041/3001761","body":"Probably the server isn&#39;t set up correctly so is denying the options request, but we can&#39;t tell from what you&#39;ve posted. See e.g. <a href=\"https://stackoverflow.com/a/40723041/3001761\">stackoverflow.com/a/40723041/3001761</a>"},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558987378,"post_id":56331269,"comment_id":99270457,"body_markdown":"The angular not sended the token in the request is not a problem?","body":"The angular not sended the token in the request is not a problem?"},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558987527,"post_id":56331269,"comment_id":99270493,"body_markdown":"I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.","body":"I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request."},{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558987580,"post_id":56331269,"comment_id":99270508,"body_markdown":"Did you read the link? A preflight options request shouldn&#39;t include credentials. Unless you did the whole CORS cycle and made an options request from insomnia, you&#39;re wrong about where the problem is.","body":"Did you read the link? A preflight options request shouldn&#39;t include credentials. Unless you did the whole CORS cycle and made an options request from insomnia, you&#39;re wrong about where the problem is."},{"owner":{"account_id":4484745,"reputation":512,"user_id":3647773,"display_name":"Ritchie"},"score":0,"creation_date":1558988386,"post_id":56331269,"comment_id":99270736,"body_markdown":"Is the interceptor correctly extending the Http class in your `app.module`?","body":"Is the interceptor correctly extending the Http class in your <code>app.module</code>?"},{"owner":{"account_id":3597514,"reputation":117173,"user_id":3001761,"display_name":"jonrsharpe"},"score":0,"creation_date":1558988464,"post_id":56331269,"comment_id":99270755,"body_markdown":"@Ritchie this isn&#39;t getting as far as the point where that would matter. The credentials *don&#39;t get added to the preflight request*.","body":"@Ritchie this isn&#39;t getting as far as the point where that would matter. The credentials <i>don&#39;t get added to the preflight request</i>."},{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558991840,"post_id":56331269,"comment_id":99271651,"body_markdown":"@Ritchie I think so, I put my app modules in the question, can you look there?","body":"@Ritchie I think so, I put my app modules in the question, can you look there?"}],"answers":[{"comments":[{"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"score":0,"creation_date":1558991796,"post_id":56332172,"comment_id":99271642,"body_markdown":"I think that it is okay, I put this code in the question, look there.","body":"I think that it is okay, I put this code in the question, look there."}],"tags":[],"owner":{"account_id":4097863,"reputation":554,"user_id":5857484,"display_name":"andbjer"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1558990114,"creation_date":1558989190,"answer_id":56332172,"question_id":56331269,"body_markdown":"First of all, if you haven&#39;t done so already you need to provide the interceptor in the root module. Add this to the `providers`-field: \r\n\r\n    { provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\r\n\r\nSecond, this could be related to [this issue][1]. Make sure you only have one import of `HttpClientModule` in the entire app. \r\n\r\nAlso check out [this discussion](https://github.com/angular/angular/issues/20575) from an issue on the Angular repo. The same behavior can occur if you import some module from a third party package that imports `HttpClientModule`. \r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/45418477/angular-4-3-interceptor-not-working/47475945#47475945","title":"Not setting headers for request","body":"<p>First of all, if you haven't done so already you need to provide the interceptor in the root module. Add this to the <code>providers</code>-field: </p>\n\n<pre><code>{ provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }\n</code></pre>\n\n<p>Second, this could be related to <a href=\"https://stackoverflow.com/questions/45418477/angular-4-3-interceptor-not-working/47475945#47475945\">this issue</a>. Make sure you only have one import of <code>HttpClientModule</code> in the entire app. </p>\n\n<p>Also check out <a href=\"https://github.com/angular/angular/issues/20575\" rel=\"nofollow noreferrer\">this discussion</a> from an issue on the Angular repo. The same behavior can occur if you import some module from a third party package that imports <code>HttpClientModule</code>. </p>\n"},{"tags":[],"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1558994119,"creation_date":1558994119,"answer_id":56332816,"question_id":56331269,"body_markdown":"Thanks for the comments, I was able to formulate a solution, I modified my WebSecurityConfig.java api file, the problem was not the angular requests.\r\nThanks to all.\r\n\r\n       \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    \r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n        @Autowired\r\n        private ParametersProperties parameters;\r\n    \r\n        @Resource(name = &quot;userService&quot;)\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Autowired\r\n        private JwtAuthenticationEntryPoint unauthorizedHandler;\r\n    \r\n        @Override\r\n        @Bean\r\n        public AuthenticationManager authenticationManagerBean() throws Exception {\r\n            return super.authenticationManagerBean();\r\n        }\r\n    \r\n        @Autowired\r\n        public void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService)\r\n                    .passwordEncoder(encoder());\r\n        }\r\n    \r\n        @Bean\r\n        public JwtAuthenticationFilter authenticationTokenFilterBean() {\r\n            return new JwtAuthenticationFilter();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http.cors().and().csrf().disable().\r\n                    authorizeRequests()\r\n                    .antMatchers(\r\n                             &quot;/swagger-resources/**&quot;,\r\n                             &quot;/swagger-ui.html&quot;,\r\n                             &quot;/webjars/**&quot;,\r\n                             &quot;/h2/**&quot;,\r\n                             &quot;/auth/signin&quot;,\r\n                    ).permitAll()\r\n                    /* the saver is the line below*/ \r\n                    .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n                    .anyRequest().authenticated()\r\n                    .and()\r\n                    .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\r\n                    .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n    \r\n            http\r\n                    .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class)\r\n                    .headers().frameOptions().sameOrigin();\r\n        }\r\n    \r\n        @Bean\r\n        public BCryptPasswordEncoder encoder(){\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    }","title":"Not setting headers for request","body":"<p>Thanks for the comments, I was able to formulate a solution, I modified my WebSecurityConfig.java api file, the problem was not the angular requests.\nThanks to all.</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\n\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n    @Autowired\n    private ParametersProperties parameters;\n\n    @Resource(name = \"userService\")\n    private UserDetailsService userDetailsService;\n\n    @Autowired\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\n\n    @Override\n    @Bean\n    public AuthenticationManager authenticationManagerBean() throws Exception {\n        return super.authenticationManagerBean();\n    }\n\n    @Autowired\n    public void globalUserDetails(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService)\n                .passwordEncoder(encoder());\n    }\n\n    @Bean\n    public JwtAuthenticationFilter authenticationTokenFilterBean() {\n        return new JwtAuthenticationFilter();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable().\n                authorizeRequests()\n                .antMatchers(\n                         \"/swagger-resources/**\",\n                         \"/swagger-ui.html\",\n                         \"/webjars/**\",\n                         \"/h2/**\",\n                         \"/auth/signin\",\n                ).permitAll()\n                /* the saver is the line below*/ \n                .antMatchers(HttpMethod.OPTIONS, \"/**\").permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).and()\n                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n\n        http\n                .addFilterBefore(authenticationTokenFilterBean(), UsernamePasswordAuthenticationFilter.class)\n                .headers().frameOptions().sameOrigin();\n    }\n\n    @Bean\n    public BCryptPasswordEncoder encoder(){\n        return new BCryptPasswordEncoder();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9248781,"reputation":306,"user_id":8030874,"display_name":"Sabrina B."},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":56332816,"answer_count":2,"score":0,"last_activity_date":1690295727,"creation_date":1558983798,"question_id":56331269,"body_markdown":"I have an Angular 7 app and an API in Java Spring with JTW. The app must at each request in the API send the token, but this is not happening, and so all requests return the 401 error.\r\n\r\n**app modules**\r\n   \r\n\r\n         ...\r\n        \r\n            @NgModule\r\n    \r\n    ({\r\n          declarations: [\r\n            AppComponent,\r\n            PatientComponent,\r\n            HeaderComponent,\r\n            FooterComponent,\r\n            AlertComponent,\r\n            NotFoundComponent,\r\n            UserRegisterComponent,\r\n            LoginComponent,\r\n            AuthGuardComponent\r\n          ],\r\n          imports: [\r\n            BrowserModule,\r\n            FormsModule,\r\n            NgSelectModule, \r\n            ReactiveFormsModule,\r\n            HttpClientModule,\r\n            AppRoutingModule,\r\n            NgbModule,\r\n          ],\r\n          providers: [\r\n            {\r\n              provide : HTTP_INTERCEPTORS,\r\n              useClass: AuthInterceptor,\r\n              multi   : true,\r\n            },\r\n          ],\r\n          bootstrap: [AppComponent]\r\n        })\r\n        \r\n        export class AppModule {\r\n        \r\n        }\r\n\r\n**AuthInterceptor**\r\n\r\n    import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpHeaders } from &#39;@angular/common/http&#39;;\r\n    import { Injectable } from &#39;@angular/core&#39;;\r\n    import { GeneralService } from &#39;../_service/general.service&#39;;\r\n    import { Observable } from &#39;rxjs&#39;;\r\n    \r\n    @Injectable()\r\n    export class AuthInterceptor implements HttpInterceptor {\r\n        constructor(private generalService: GeneralService) {\r\n            \r\n        }\r\n    \r\n        intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\r\n            req = req.clone({\r\n                setHeaders: {\r\n                    Authorization: &#39;Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyIiwic2NvcGVzIjpbeyJhdXRob3JpdHkiOiJTeXN0ZW0gVXNlciJ9XSwiaXNzIjoiaHR0cHM6Ly9hcGkubmVvZ3JpZC5jb20vIiwiaWF0IjoxNTU4OTgwOTAxLCJleHAiOjE1NTg5OTg5MDF9.vZByXryTI-1wGLYY1bU8DurOF15qlxA7QkdMW5UeM8c&#39;)\r\n                }\r\n            });\r\n    \r\n           console.log(req);\r\n           return next.handle(req);\r\n        }\r\n    }\r\n\r\n**Request**\r\n\r\n    listAll() {\r\n         return this.http.get(&#39;http://localhost:8080/api/listAll&#39;);\r\n    }\r\n\r\n    async get() {\r\n        let error = null;\r\n    \r\n        let response = await this.listAll()\r\n        .toPromise()\r\n        .catch(error =&gt; error = error);\r\n    \r\n        console.log(response);\r\n      }\r\n\r\n  \r\n\r\n**Result of console.log(req);**\r\n\r\nLooks like okay, the authorization and the token is there\r\n\r\n[![enter image description here][1]][1]\r\n\r\n**The request**\r\n\r\nDont pass the token here :c\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**Erros**\r\n\r\n&gt; OPTIONS 401 Access to XMLHttpRequest\r\n&gt; at&#39;http://localhost:4200&#39; has been blocked by CORS policy: Response to\r\n&gt; preflight request doesn&#39;t pass access control check: It does not have\r\n&gt; HTTP ok status.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/7sFTN.png\r\n  [2]: https://i.stack.imgur.com/Yw0ro.png\r\n\r\n\r\nI done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.\r\n","title":"Not setting headers for request","body":"<p>I have an Angular 7 app and an API in Java Spring with JTW. The app must at each request in the API send the token, but this is not happening, and so all requests return the 401 error.</p>\n\n<p><strong>app modules</strong></p>\n\n<pre><code>     ...\n\n        @NgModule\n\n({\n      declarations: [\n        AppComponent,\n        PatientComponent,\n        HeaderComponent,\n        FooterComponent,\n        AlertComponent,\n        NotFoundComponent,\n        UserRegisterComponent,\n        LoginComponent,\n        AuthGuardComponent\n      ],\n      imports: [\n        BrowserModule,\n        FormsModule,\n        NgSelectModule, \n        ReactiveFormsModule,\n        HttpClientModule,\n        AppRoutingModule,\n        NgbModule,\n      ],\n      providers: [\n        {\n          provide : HTTP_INTERCEPTORS,\n          useClass: AuthInterceptor,\n          multi   : true,\n        },\n      ],\n      bootstrap: [AppComponent]\n    })\n\n    export class AppModule {\n\n    }\n</code></pre>\n\n<p><strong>AuthInterceptor</strong></p>\n\n<pre><code>import { HttpEvent, HttpHandler, HttpInterceptor, HttpRequest, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { GeneralService } from '../_service/general.service';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class AuthInterceptor implements HttpInterceptor {\n    constructor(private generalService: GeneralService) {\n\n    }\n\n    intercept(req: HttpRequest&lt;any&gt;, next: HttpHandler): Observable&lt;HttpEvent&lt;any&gt;&gt; {\n        req = req.clone({\n            setHeaders: {\n                Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1c2VyIiwic2NvcGVzIjpbeyJhdXRob3JpdHkiOiJTeXN0ZW0gVXNlciJ9XSwiaXNzIjoiaHR0cHM6Ly9hcGkubmVvZ3JpZC5jb20vIiwiaWF0IjoxNTU4OTgwOTAxLCJleHAiOjE1NTg5OTg5MDF9.vZByXryTI-1wGLYY1bU8DurOF15qlxA7QkdMW5UeM8c')\n            }\n        });\n\n       console.log(req);\n       return next.handle(req);\n    }\n}\n</code></pre>\n\n<p><strong>Request</strong></p>\n\n<pre><code>listAll() {\n     return this.http.get('http://localhost:8080/api/listAll');\n}\n\nasync get() {\n    let error = null;\n\n    let response = await this.listAll()\n    .toPromise()\n    .catch(error =&gt; error = error);\n\n    console.log(response);\n  }\n</code></pre>\n\n<p><strong>Result of console.log(req);</strong></p>\n\n<p>Looks like okay, the authorization and the token is there</p>\n\n<p><a href=\"https://i.stack.imgur.com/7sFTN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7sFTN.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>The request</strong></p>\n\n<p>Dont pass the token here :c</p>\n\n<p><a href=\"https://i.stack.imgur.com/Yw0ro.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yw0ro.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Erros</strong></p>\n\n<blockquote>\n  <p>OPTIONS 401 Access to XMLHttpRequest\n  at'<a href=\"http://localhost:4200\" rel=\"nofollow noreferrer\">http://localhost:4200</a>' has been blocked by CORS policy: Response to\n  preflight request doesn't pass access control check: It does not have\n  HTTP ok status.</p>\n</blockquote>\n\n<p>I done the  same request with insonmia (passed Authorization and the token) e all is okay, the problem is with the angular request.</p>\n"},{"tags":["java","android","android-livedata","android-viewmodel","viewmodelfactory"],"answers":[{"comments":[{"owner":{"account_id":26079994,"reputation":39,"user_id":19778332,"display_name":"David Feldman"},"score":0,"creation_date":1690235908,"post_id":76757919,"comment_id":135322442,"body_markdown":"but i want configChanges","body":"but i want configChanges"},{"owner":{"account_id":72095,"reputation":18817,"user_id":208273,"display_name":"Ryan M"},"score":0,"creation_date":1690342030,"post_id":76757919,"comment_id":135338484,"body_markdown":"As you note, this isn&#39;t a good idea.  It&#39;s better to actually fix the bug.","body":"As you note, this isn&#39;t a good idea.  It&#39;s better to actually fix the bug."}],"tags":[],"owner":{"account_id":27718587,"reputation":24,"user_id":21159694,"display_name":"genzo"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690231926,"creation_date":1690231619,"answer_id":76757919,"question_id":76757109,"body_markdown":"You can try using `android:&quot;configChanges:orientation`&quot; in your Manifest file to igonre screen rotation like this:\r\n\r\n    &lt;activity\r\n        android:name=&quot;ActivityName&quot;\r\n        android:configChanges=&quot;orientation&quot;\r\n        android:label=&quot;@string/your_label&quot;&gt;\r\n\r\nBut this isn&#39;t the best approach. \r\nLink on docs: https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity\r\n\r\nPlease let me know if the solution helped.","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>You can try using <code>android:&quot;configChanges:orientation</code>&quot; in your Manifest file to igonre screen rotation like this:</p>\n<pre><code>&lt;activity\n    android:name=&quot;ActivityName&quot;\n    android:configChanges=&quot;orientation&quot;\n    android:label=&quot;@string/your_label&quot;&gt;\n</code></pre>\n<p>But this isn't the best approach.\nLink on docs: <a href=\"https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity\" rel=\"nofollow noreferrer\">https://developer.android.com/guide/topics/resources/runtime-changes#restrict-activity</a></p>\n<p>Please let me know if the solution helped.</p>\n"},{"tags":[],"owner":{"account_id":26079994,"reputation":39,"user_id":19778332,"display_name":"David Feldman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690295066,"creation_date":1690295066,"answer_id":76763709,"question_id":76757109,"body_markdown":"i got the problem , that\r\nin the onDestroy i am deleting the list like this\r\n```java\r\n    @Override\r\n    protected void onDestroy() {super.onDestroy();\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().reactionsDao().deleteTopicReactions(topic));\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().chatMessageDao().deleteByTopic(topic));\r\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().repliesDao().deleteByTopic(topic));\r\n    }\r\n```\r\nand at configChanges the onDestroy is getting called so the database gets empty, so i am getting back a empty list","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>i got the problem , that\nin the onDestroy i am deleting the list like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @Override\n    protected void onDestroy() {super.onDestroy();\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().reactionsDao().deleteTopicReactions(topic));\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().chatMessageDao().deleteByTopic(topic));\n        Utils.asyncTask(() -&gt; ChatDatabase.getInstance().repliesDao().deleteByTopic(topic));\n    }\n</code></pre>\n<p>and at configChanges the onDestroy is getting called so the database gets empty, so i am getting back a empty list</p>\n"}],"owner":{"account_id":26079994,"reputation":39,"user_id":19778332,"display_name":"David Feldman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690295066,"creation_date":1690222987,"question_id":76757109,"body_markdown":"I have an issue concerning the behavior of LiveData within my ViewModel during a screen rotation.\r\n\r\nMy application, structured around the MVVM pattern, includes an Activity which observes a LiveData&lt;List&lt;ChatMessageDB&gt;&gt; from a ViewModel which, in turn, fetches data from a Repository linked to a Room database.\r\n\r\nBelow are the involved code snippets:\r\n\r\nThe Activity onCreate:\r\n```java\r\nChatViewModel2.getInstance(this, topic).getTopicChatLiveData().observe(this, chatMessageDBS -&gt; {\r\n    chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList()));\r\n});\r\n```\r\nThe ViewModel:\r\n```java\r\npublic class ChatViewModel2 extends ViewModel {\r\n    private final ChatMassagesRepository repository;\r\n    private String topic;\r\n    private static ChatViewModel2 instance;\r\n\r\n    public ChatViewModel2(@NonNull String topic) {\r\n        repository = new ChatMassagesRepository();\r\n        this.topic = topic;\r\n    }\r\n\r\n    public static synchronized ChatViewModel2 getInstance(Context context, String topic) {\r\n        if (instance == null) {\r\n            instance = new ViewModelProvider((ViewModelStoreOwner) context, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getTopicChatLiveData() {\r\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; topicChatLiveData = repository.getAllRepliesByTopic(topic);\r\n        return topicChatLiveData;\r\n    }\r\n}\r\n```\r\nThe ViewModelFactory:\r\n```java\r\npublic class ChatMassagesViewModelFactory implements ViewModelProvider.Factory {\r\n    private String topic;\r\n\r\n    public ChatMassagesViewModelFactory(String topic) {\r\n        this.topic = topic;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\r\n        if (modelClass.isAssignableFrom(ChatViewModel2.class)) {\r\n            return (T) new ChatViewModel2(topic);\r\n        }\r\n        throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\r\n    }\r\n}\r\n```\r\nThe Repository:\r\n```java\r\npublic class ChatMassagesRepository {\r\n    ChatMessageDAO chatMessageDao;\r\n    private static ChatMassagesRepository INSTANCE;\r\n\r\n    public static ChatMassagesRepository getInstance() {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = new ChatMassagesRepository();\r\n        }\r\n        return INSTANCE;\r\n    }\r\n\r\n    public ChatMassagesRepository() {\r\n        chatMessageDao= ChatDatabase.getInstance().chatMessageDao();\r\n    }\r\n\r\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getAllRepliesByTopic(String topic){\r\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; replies = chatMessageDao.getTopicChat(topic);\r\n        return  replies;\r\n    }\r\n}\r\n```\r\nAnd this is the getInstance from the Database class:\r\n```java\r\n@NonNull\r\npublic static ChatDatabase getInstance(final Context context){\r\n    synchronized (ChatDatabase.class) {\r\n        if (INSTANCE == null) {\r\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(), ChatDatabase.class, &quot;teleconsole_chat_database&quot;).fallbackToDestructiveMigration().build();\r\n        }\r\n    }\r\n    return INSTANCE;\r\n}\r\n\r\npublic static ChatDatabase getInstance(){\r\n    return getInstance(AppController.getInstance());\r\n}\r\n```\r\nEverything works fine until the screen rotates. Post-rotation, the observer in the Activity receives an empty list. Any insight into why this is happening and how to rectify it would be greatly appreciated.\r\n\r\ni also tried\r\n```java\r\n        new ViewModelProvider(this, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class).getTopicChatLiveData().observe(this, chatMessageDBS -&gt;\r\n                chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList())));\r\n```\r\nbut did not help","title":"ViewModel LiveData Emits Empty List After Screen Rotation in Android","body":"<p>I have an issue concerning the behavior of LiveData within my ViewModel during a screen rotation.</p>\n<p>My application, structured around the MVVM pattern, includes an Activity which observes a LiveData&lt;List&gt; from a ViewModel which, in turn, fetches data from a Repository linked to a Room database.</p>\n<p>Below are the involved code snippets:</p>\n<p>The Activity onCreate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ChatViewModel2.getInstance(this, topic).getTopicChatLiveData().observe(this, chatMessageDBS -&gt; {\n    chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList()));\n});\n</code></pre>\n<p>The ViewModel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatViewModel2 extends ViewModel {\n    private final ChatMassagesRepository repository;\n    private String topic;\n    private static ChatViewModel2 instance;\n\n    public ChatViewModel2(@NonNull String topic) {\n        repository = new ChatMassagesRepository();\n        this.topic = topic;\n    }\n\n    public static synchronized ChatViewModel2 getInstance(Context context, String topic) {\n        if (instance == null) {\n            instance = new ViewModelProvider((ViewModelStoreOwner) context, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class);\n        }\n        return instance;\n    }\n\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getTopicChatLiveData() {\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; topicChatLiveData = repository.getAllRepliesByTopic(topic);\n        return topicChatLiveData;\n    }\n}\n</code></pre>\n<p>The ViewModelFactory:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatMassagesViewModelFactory implements ViewModelProvider.Factory {\n    private String topic;\n\n    public ChatMassagesViewModelFactory(String topic) {\n        this.topic = topic;\n    }\n\n    @NonNull\n    @Override\n    public &lt;T extends ViewModel&gt; T create(@NonNull Class&lt;T&gt; modelClass) {\n        if (modelClass.isAssignableFrom(ChatViewModel2.class)) {\n            return (T) new ChatViewModel2(topic);\n        }\n        throw new IllegalArgumentException(&quot;Unknown ViewModel class&quot;);\n    }\n}\n</code></pre>\n<p>The Repository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChatMassagesRepository {\n    ChatMessageDAO chatMessageDao;\n    private static ChatMassagesRepository INSTANCE;\n\n    public static ChatMassagesRepository getInstance() {\n        if (INSTANCE == null) {\n            INSTANCE = new ChatMassagesRepository();\n        }\n        return INSTANCE;\n    }\n\n    public ChatMassagesRepository() {\n        chatMessageDao= ChatDatabase.getInstance().chatMessageDao();\n    }\n\n    public LiveData&lt;List&lt;ChatMessageDB&gt;&gt; getAllRepliesByTopic(String topic){\n        LiveData&lt;List&lt;ChatMessageDB&gt;&gt; replies = chatMessageDao.getTopicChat(topic);\n        return  replies;\n    }\n}\n</code></pre>\n<p>And this is the getInstance from the Database class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NonNull\npublic static ChatDatabase getInstance(final Context context){\n    synchronized (ChatDatabase.class) {\n        if (INSTANCE == null) {\n            INSTANCE = Room.databaseBuilder(context.getApplicationContext(), ChatDatabase.class, &quot;teleconsole_chat_database&quot;).fallbackToDestructiveMigration().build();\n        }\n    }\n    return INSTANCE;\n}\n\npublic static ChatDatabase getInstance(){\n    return getInstance(AppController.getInstance());\n}\n</code></pre>\n<p>Everything works fine until the screen rotates. Post-rotation, the observer in the Activity receives an empty list. Any insight into why this is happening and how to rectify it would be greatly appreciated.</p>\n<p>i also tried</p>\n<pre class=\"lang-java prettyprint-override\"><code>        new ViewModelProvider(this, new ChatMassagesViewModelFactory(topic)).get(ChatViewModel2.class).getTopicChatLiveData().observe(this, chatMessageDBS -&gt;\n                chatAdapter.submitList(chatMessageDBS.stream().distinct().map(ChatMessageViewModel::createInstance).collect(Collectors.toList())));\n</code></pre>\n<p>but did not help</p>\n"},{"tags":["java","inversion-of-control","micronaut"],"answers":[{"tags":[],"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690294135,"creation_date":1690294135,"answer_id":76763579,"question_id":76622237,"body_markdown":"After some trial and error i came up with this working solution:\r\n\r\n```java\r\npublic abstract class ObjectifyRepository&lt;T&gt; {\r\n}\r\n\r\n@Singleton\r\n@Bean(typed = RepositoryA.class)\r\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\r\n    public RepositoryA() {\r\n        super(EntityA.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\n@Bean(typed = RepositoryB.class)\r\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\r\n\r\n    public RepositoryB() {\r\n        super(EntityB.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\npublic class MyService {\r\n    private final RespositoryA repository;\r\n\r\n    public MyService(RespositoryA repository) {\r\n        this.repository = repository;\r\n    }\r\n}\r\n```","title":"Prevent NonUniqueBeanException in Micronaut, even with using @Named annotation","body":"<p>After some trial and error i came up with this working solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class ObjectifyRepository&lt;T&gt; {\n}\n\n@Singleton\n@Bean(typed = RepositoryA.class)\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\n    public RepositoryA() {\n        super(EntityA.class);\n    }\n}\n\n@Singleton\n@Bean(typed = RepositoryB.class)\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\n\n    public RepositoryB() {\n        super(EntityB.class);\n    }\n}\n\n@Singleton\npublic class MyService {\n    private final RespositoryA repository;\n\n    public MyService(RespositoryA repository) {\n        this.repository = repository;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28833084,"reputation":5,"user_id":22083086,"display_name":"Max Bachhuber"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763579,"answer_count":1,"score":0,"last_activity_date":1690294135,"creation_date":1688573873,"question_id":76622237,"body_markdown":"Why does this code yield a io.micronaut.context.exceptions.NonUniqueBeanException?\r\n\r\n```java\r\npublic abstract class ObjectifyRepository&lt;T&gt; {\r\n}\r\n\r\n@Singleton\r\n@Named(&quot;repositoryA&quot;)\r\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\r\n    public RepositoryA() {\r\n        super(EntityA.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\n@Named(&quot;repositoryB&quot;)\r\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\r\n\r\n    public RepositoryB() {\r\n        super(EntityB.class);\r\n    }\r\n}\r\n\r\n@Singleton\r\npublic class MyService {\r\n    private final RespositoryA repository;\r\n\r\n    public MyService(@Named(&quot;repositoryA&quot;) RespositoryA repository) {\r\n        this.repository = repository;\r\n    }\r\n}\r\n```\r\n\r\nThe error message is:\r\n```\r\nio.micronaut.context.exceptions.NonUniqueBeanException: Multiple possible bean candidates found: [com.example.repository.$RepositoryA$Definition$Intercepted, com.example.repository.$RepositoryB$Definition$Intercepted]\r\n```\r\n\r\nCould this be related to the fact that i extend a base class instead of using interfaces?\r\n\r\nEvery solution that i found suggested to use the `@Named` annotations, so i have added them, but it still doesn&#39;t resolve my problem.\r\n\r\n*When i asked ChatGPT it started lying and suggested some imaginary @Type annotation :D*","title":"Prevent NonUniqueBeanException in Micronaut, even with using @Named annotation","body":"<p>Why does this code yield a io.micronaut.context.exceptions.NonUniqueBeanException?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class ObjectifyRepository&lt;T&gt; {\n}\n\n@Singleton\n@Named(&quot;repositoryA&quot;)\npublic class RepositoryA extends ObjectifyRepository&lt;EntityA&gt; {\n    public RepositoryA() {\n        super(EntityA.class);\n    }\n}\n\n@Singleton\n@Named(&quot;repositoryB&quot;)\npublic class RepositoryB extends ObjectifyRepository&lt;EntityB&gt; {\n\n    public RepositoryB() {\n        super(EntityB.class);\n    }\n}\n\n@Singleton\npublic class MyService {\n    private final RespositoryA repository;\n\n    public MyService(@Named(&quot;repositoryA&quot;) RespositoryA repository) {\n        this.repository = repository;\n    }\n}\n</code></pre>\n<p>The error message is:</p>\n<pre><code>io.micronaut.context.exceptions.NonUniqueBeanException: Multiple possible bean candidates found: [com.example.repository.$RepositoryA$Definition$Intercepted, com.example.repository.$RepositoryB$Definition$Intercepted]\n</code></pre>\n<p>Could this be related to the fact that i extend a base class instead of using interfaces?</p>\n<p>Every solution that i found suggested to use the <code>@Named</code> annotations, so i have added them, but it still doesn't resolve my problem.</p>\n<p><em>When i asked ChatGPT it started lying and suggested some imaginary @Type annotation :D</em></p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"score":0,"creation_date":1690100570,"post_id":76742100,"comment_id":135303771,"body_markdown":"But this is no unit tests nor component test. The point of this test is to fully test end to end flow with everything running (db, kafka etc). So in my opinion there are benefits to test flow with jwt token, especially that username is used for audit log.","body":"But this is no unit tests nor component test. The point of this test is to fully test end to end flow with everything running (db, kafka etc). So in my opinion there are benefits to test flow with jwt token, especially that username is used for audit log."}],"tags":[],"owner":{"account_id":2673328,"reputation":1649,"user_id":2310221,"accept_rate":81,"display_name":"Markus"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1689993677,"creation_date":1689993677,"answer_id":76742100,"question_id":76738588,"body_markdown":"You can disable Spring security in your test if that&#39;s not what the test is supposed to check:\r\n\r\n```java\r\n@Import({DisableSpringSecurityTestConfiguration.class})\r\npublic class YourTest {\r\n\r\n   @Test\r\n   void testSomething() {\r\n      // ...\r\n   }\r\n}\r\n\r\n@Configuration\r\n@EnableAutoConfiguration(exclude = {\r\n  // disable Spring Security auto conf to get endpoint calls in unit tests executed\r\n  SecurityAutoConfiguration.class,\r\n  ManagementWebSecurityAutoConfiguration.class\r\n})\r\npublic class DisableSpringSecurtiyTestConfiguration {\r\n\r\n}\r\n```\r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>You can disable Spring security in your test if that's not what the test is supposed to check:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Import({DisableSpringSecurityTestConfiguration.class})\npublic class YourTest {\n\n   @Test\n   void testSomething() {\n      // ...\n   }\n}\n\n@Configuration\n@EnableAutoConfiguration(exclude = {\n  // disable Spring Security auto conf to get endpoint calls in unit tests executed\n  SecurityAutoConfiguration.class,\n  ManagementWebSecurityAutoConfiguration.class\n})\npublic class DisableSpringSecurtiyTestConfiguration {\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5759607,"reputation":78,"user_id":4546430,"display_name":"Herisson-88"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690293792,"creation_date":1690284718,"answer_id":76762283,"question_id":76738588,"body_markdown":"Seems issue of parallel call between asynchrone call\r\n```\r\n    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\r\n    }, res -&gt; {\r\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\r\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\r\n    });\r\n```\r\nand next call which is execute in parallel\r\n```\r\n    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\r\n```\r\n\r\nWhy not use restTemplate.getForEntity the 1st time to avoid parallel call and this issue of TestRestTemplate ?\r\n\r\nBut in fact to really analyse need all the Test class, especially the initialisation of TestRestTemplate\r\n   \r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>Seems issue of parallel call between asynchrone call</p>\n<pre><code>    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\n    }, res -&gt; {\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\n    });\n</code></pre>\n<p>and next call which is execute in parallel</p>\n<pre><code>    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\n</code></pre>\n<p>Why not use restTemplate.getForEntity the 1st time to avoid parallel call and this issue of TestRestTemplate ?</p>\n<p>But in fact to really analyse need all the Test class, especially the initialisation of TestRestTemplate</p>\n"}],"owner":{"account_id":10650147,"reputation":2228,"user_id":7841415,"display_name":"Suule"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":222,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1690293792,"creation_date":1689947392,"question_id":76738588,"body_markdown":"I have some strange issue with my old tests after adding spring security configuration.\r\n\r\nSo, let&#39;s start from beginning to my already existing project I have added Spring Security and `JWT Filter`. The reason for that is that every request from UI, we are expecting JWT token and what we want to allow only users with given roles to access given endpoints. \r\n\r\n**Configuration code:**\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfig {\r\n\r\n\tprivate final UserInfoHeaderFilter userInfoHeaderFilter;\r\n\r\n\tpublic SecurityConfig(UserInfoHeaderFilter userInfoHeaderFilter) {\r\n\t\tthis.userInfoHeaderFilter = userInfoHeaderFilter;\r\n\t}\r\n\r\n\t@Bean\r\n\tpublic SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\t\treturn http\r\n\t\t\t\t.addFilterBefore(userInfoHeaderFilter, BasicAuthenticationFilter.class)\r\n\t\t\t\t.authorizeHttpRequests(auth -&gt; auth\r\n\t\t\t\t\t\t.requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\r\n\t\t\t\t\t\t.anyRequest().hasAnyAuthority(&quot;SUPER_ADMIN&quot;)\r\n\t\t\t\t)\r\n\t\t\t\t.csrf().disable()\r\n\t\t\t\t.build();\r\n\t}\r\n}\r\n```\r\n\r\njust for example, I have changed it to have one role for each request.\r\n\r\n**JwtFilter code:**\r\n\r\n```\r\n@Slf4j\r\n@Component\r\npublic class UserInfoHeaderFilter extends OncePerRequestFilter {\r\n\r\n\tpublic static final String HEADER_NAME = &quot;Authorization&quot;;\r\n\r\n\tprivate static final String NO_USER = &quot;NO USER&quot;;\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, @NotNull HttpServletResponse response, @NotNull FilterChain filterChain) throws ServletException, IOException {\r\n\t\tString headerValue = request.getHeader(HEADER_NAME);\r\n\t\tif (headerValue != null &amp;&amp; headerValue.startsWith(&quot;Bearer &quot;)) {\r\n\t\t\tsetAuthenticationInSecurityContext(headerValue.substring(7));\r\n\t\t}\r\n\r\n\r\n\t\tfilterChain.doFilter(request, response);\r\n\t}\r\n\r\n\tprivate String setAuthenticationInSecurityContext(String token) {\r\n\t\ttry {\r\n\t\t\tDecodedJWT jwt = JWT.decode(token);\r\n\t\t\tString username = jwt.getClaim(&quot;preferred_username&quot;).asString();\r\n\t\t\tList&lt;String&gt; roles = (List&lt;String&gt;) jwt.getClaim(&quot;realm_access&quot;).asMap().get(&quot;roles&quot;);\r\n\r\n\t\t\tList&lt;GrantedAuthority&gt; authorities = roles.stream()\r\n\t\t\t\t\t.map(SimpleGrantedAuthority::new)\r\n\t\t\t\t\t.collect(Collectors.toList());\r\n\r\n\t\t\tAuthentication authentication = new UsernamePasswordAuthenticationToken(username, null, authorities);\r\n\t\t\tSecurityContextHolder.getContext().setAuthentication(authentication);\r\n\t\t\tlog.debug(&quot;User [{}] has been logged&quot;, username);\r\n\r\n\t\t\treturn username;\r\n\t\t} catch (JWTDecodeException e) {\r\n\t\t\tlog.error(&quot;Failed to decode JWT&quot;, e);\r\n\t\t\treturn NO_USER;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nAs you can probably see, in this filter we are only getting roles/username from jwt and putting them in `securityContext`. So no verification of jwt is needed.\r\n\r\nAnd locally everything seems to be working correctly. But integration tests are failing (I have added to restTemplate interceptor, which will add every request correct jwt token)\r\n\r\nThis is simplified test, which is using `TestRestTemplate` \r\n```\r\n@BeforeEach\r\nvoid setup() {\r\n\tClientHttpRequestInterceptor interceptor = (request, body, execution) -&gt; {\r\n\t\trequest.getHeaders().add(&quot;Authorization&quot;, BEARER + TEST_JWT_TOKEN);\r\n\t\treturn execution.execute(request, body);\r\n\t};\r\n\trestTemplate.getRestTemplate().setInterceptors(Collections.singletonList(interceptor));\r\n}\r\n\r\n@Test\r\nvoid stupidTest() {\r\n\trestTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\r\n\t}, res -&gt; {\r\n\t\tAssertions.assertTrue(res.getStatusCode().is2xxSuccessful());\r\n\t\treturn IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\r\n\t});\r\n\r\n\t//Thread.sleep(10000);\r\n\r\n\tAuthorRequest payload = AuthorRequest.builder()\r\n\t\t\t.name(&quot;TEST&quot;)\r\n\t\t\t.labels(Collections.emptySet())\r\n\t\t\t.build();\r\n\r\n\trestTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\r\n}\r\n```\r\n\r\nIt is failing when second request is sent. When debugging code, it is never entering `author` endpoint nor `filter` for second time, but when adding `Thread.sleep(1000);` between those two calls it starts working correctly. \r\n\r\nIn logs I can see \r\n\r\n&gt; 2023-07-21 15:45:20 5.14.0 SEVERE Servlet.service() for servlet\r\n&gt; [dispatcherServlet] in context with path [] threw exception [Unable to\r\n&gt; handle the Spring Security Exception because the response is already\r\n&gt; committed.] with root cause \r\n&gt; org.springframework.security.access.AccessDeniedException: Access\r\n&gt; Denied\r\n&gt; \r\n&gt; 2023-07-21 15:45:20 5.14.0 SEVERE Exception Processing\r\n&gt; ErrorPage[errorCode=0, location=/error] \r\n&gt; jakarta.servlet.ServletException: Unable to handle the Spring Security\r\n&gt; Exception because the response is already committed.\r\n&gt; \r\n&gt; I/O error on POST request for &quot;http://localhost:61916/v1/author&quot;:\r\n&gt; localhost:61916 failed to respond\r\n&gt; org.springframework.web.client.ResourceAccessException: I/O error on\r\n&gt; POST request for &quot;http://localhost:61916/v1/author&quot;: localhost:61916\r\n&gt; failed to respond\r\n\r\nWhich seems to be saying that second request was denied, but even though why it is working correctly, with sleep? Hmm. Removing Spring Security Configuration make test works again.\r\n\r\n\r\n","title":"TestRestTemplate fails on postForEntity after adding spring security configuration","body":"<p>I have some strange issue with my old tests after adding spring security configuration.</p>\n<p>So, let's start from beginning to my already existing project I have added Spring Security and <code>JWT Filter</code>. The reason for that is that every request from UI, we are expecting JWT token and what we want to allow only users with given roles to access given endpoints.</p>\n<p><strong>Configuration code:</strong></p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfig {\n\n    private final UserInfoHeaderFilter userInfoHeaderFilter;\n\n    public SecurityConfig(UserInfoHeaderFilter userInfoHeaderFilter) {\n        this.userInfoHeaderFilter = userInfoHeaderFilter;\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n                .addFilterBefore(userInfoHeaderFilter, BasicAuthenticationFilter.class)\n                .authorizeHttpRequests(auth -&gt; auth\n                        .requestMatchers(&quot;/swagger-ui/**&quot;, &quot;/v3/api-docs/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\n                        .anyRequest().hasAnyAuthority(&quot;SUPER_ADMIN&quot;)\n                )\n                .csrf().disable()\n                .build();\n    }\n}\n</code></pre>\n<p>just for example, I have changed it to have one role for each request.</p>\n<p><strong>JwtFilter code:</strong></p>\n<pre><code>@Slf4j\n@Component\npublic class UserInfoHeaderFilter extends OncePerRequestFilter {\n\n    public static final String HEADER_NAME = &quot;Authorization&quot;;\n\n    private static final String NO_USER = &quot;NO USER&quot;;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, @NotNull HttpServletResponse response, @NotNull FilterChain filterChain) throws ServletException, IOException {\n        String headerValue = request.getHeader(HEADER_NAME);\n        if (headerValue != null &amp;&amp; headerValue.startsWith(&quot;Bearer &quot;)) {\n            setAuthenticationInSecurityContext(headerValue.substring(7));\n        }\n\n\n        filterChain.doFilter(request, response);\n    }\n\n    private String setAuthenticationInSecurityContext(String token) {\n        try {\n            DecodedJWT jwt = JWT.decode(token);\n            String username = jwt.getClaim(&quot;preferred_username&quot;).asString();\n            List&lt;String&gt; roles = (List&lt;String&gt;) jwt.getClaim(&quot;realm_access&quot;).asMap().get(&quot;roles&quot;);\n\n            List&lt;GrantedAuthority&gt; authorities = roles.stream()\n                    .map(SimpleGrantedAuthority::new)\n                    .collect(Collectors.toList());\n\n            Authentication authentication = new UsernamePasswordAuthenticationToken(username, null, authorities);\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n            log.debug(&quot;User [{}] has been logged&quot;, username);\n\n            return username;\n        } catch (JWTDecodeException e) {\n            log.error(&quot;Failed to decode JWT&quot;, e);\n            return NO_USER;\n        }\n    }\n}\n</code></pre>\n<p>As you can probably see, in this filter we are only getting roles/username from jwt and putting them in <code>securityContext</code>. So no verification of jwt is needed.</p>\n<p>And locally everything seems to be working correctly. But integration tests are failing (I have added to restTemplate interceptor, which will add every request correct jwt token)</p>\n<p>This is simplified test, which is using <code>TestRestTemplate</code></p>\n<pre><code>@BeforeEach\nvoid setup() {\n    ClientHttpRequestInterceptor interceptor = (request, body, execution) -&gt; {\n        request.getHeaders().add(&quot;Authorization&quot;, BEARER + TEST_JWT_TOKEN);\n        return execution.execute(request, body);\n    };\n    restTemplate.getRestTemplate().setInterceptors(Collections.singletonList(interceptor));\n}\n\n@Test\nvoid stupidTest() {\n    restTemplate.execute(uri(&quot;/books&quot;), HttpMethod.GET, req -&gt; {\n    }, res -&gt; {\n        Assertions.assertTrue(res.getStatusCode().is2xxSuccessful());\n        return IOUtils.toString(res.getBody(), StandardCharsets.UTF_8);\n    });\n\n    //Thread.sleep(10000);\n\n    AuthorRequest payload = AuthorRequest.builder()\n            .name(&quot;TEST&quot;)\n            .labels(Collections.emptySet())\n            .build();\n\n    restTemplate.postForEntity(uri(&quot;/author&quot;), payload, String.class);\n}\n</code></pre>\n<p>It is failing when second request is sent. When debugging code, it is never entering <code>author</code> endpoint nor <code>filter</code> for second time, but when adding <code>Thread.sleep(1000);</code> between those two calls it starts working correctly.</p>\n<p>In logs I can see</p>\n<blockquote>\n<p>2023-07-21 15:45:20 5.14.0 SEVERE Servlet.service() for servlet\n[dispatcherServlet] in context with path [] threw exception [Unable to\nhandle the Spring Security Exception because the response is already\ncommitted.] with root cause\norg.springframework.security.access.AccessDeniedException: Access\nDenied</p>\n<p>2023-07-21 15:45:20 5.14.0 SEVERE Exception Processing\nErrorPage[errorCode=0, location=/error]\njakarta.servlet.ServletException: Unable to handle the Spring Security\nException because the response is already committed.</p>\n<p>I/O error on POST request for &quot;http://localhost:61916/v1/author&quot;:\nlocalhost:61916 failed to respond\norg.springframework.web.client.ResourceAccessException: I/O error on\nPOST request for &quot;http://localhost:61916/v1/author&quot;: localhost:61916\nfailed to respond</p>\n</blockquote>\n<p>Which seems to be saying that second request was denied, but even though why it is working correctly, with sleep? Hmm. Removing Spring Security Configuration make test works again.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":25882721,"reputation":21,"user_id":19611476,"display_name":"Abdullaah"},"score":0,"creation_date":1690440638,"post_id":76761021,"comment_id":135354757,"body_markdown":"thanks Jorn. could you share sample code to parse incoming JSON in a different way?","body":"thanks Jorn. could you share sample code to parse incoming JSON in a different way?"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690440768,"post_id":76761021,"comment_id":135354786,"body_markdown":"That&#39;s a bit much for one comment, but one option would be to parse to a `Map`. Then, you can distinguish between `containsKey=false` and `get(key)=null`. Of course, now you have lost type safety and Spring features like validation.","body":"That&#39;s a bit much for one comment, but one option would be to parse to a <code>Map</code>. Then, you can distinguish between <code>containsKey=false</code> and <code>get(key)=null</code>. Of course, now you have lost type safety and Spring features like validation."},{"owner":{"account_id":25882721,"reputation":21,"user_id":19611476,"display_name":"Abdullaah"},"score":0,"creation_date":1690691478,"post_id":76761021,"comment_id":135387523,"body_markdown":"okay...........","body":"okay..........."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690275231,"creation_date":1690275231,"answer_id":76761021,"question_id":76760954,"body_markdown":"Yes, this is a standard problem when mapping JSON to Java DTOs. JSON knows the difference between a key that&#39;s just not there (`{}`), and `{&quot;key&quot;=null}` property. In Java, both those versions will map to `key = null`. Your PUT endpoint ignores `null` values, so that you can PUT partial updates and leave other fields untouched. That&#39;s what the code you posted is doing:\r\n\r\n```\r\ncustomerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());\r\n```\r\n\r\nIf the posted value is `null`, it uses the value from the (existing) entity instead. A more readable variant would be:\r\n\r\n```\r\nif (customerDto.getNotificationId() != null) {\r\n  customerEntity.setNotificationId(customerDto.getNotificationId());\r\n}\r\n```\r\n\r\nHow you solve this problem is up to you. There are several options, including but not limited to:\r\n\r\n* Create a PATCH endpoint in addition to the PUT endpoint, which has different semantics regarding how `null` values are handled\r\n* Parse the incoming JSON in a different way, so that you know whether the client specificied an explicit `null` or just omitted the property.\r\n\r\n","title":"unable to update a value inside an entity to null using PUT request","body":"<p>Yes, this is a standard problem when mapping JSON to Java DTOs. JSON knows the difference between a key that's just not there (<code>{}</code>), and <code>{&quot;key&quot;=null}</code> property. In Java, both those versions will map to <code>key = null</code>. Your PUT endpoint ignores <code>null</code> values, so that you can PUT partial updates and leave other fields untouched. That's what the code you posted is doing:</p>\n<pre><code>customerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());\n</code></pre>\n<p>If the posted value is <code>null</code>, it uses the value from the (existing) entity instead. A more readable variant would be:</p>\n<pre><code>if (customerDto.getNotificationId() != null) {\n  customerEntity.setNotificationId(customerDto.getNotificationId());\n}\n</code></pre>\n<p>How you solve this problem is up to you. There are several options, including but not limited to:</p>\n<ul>\n<li>Create a PATCH endpoint in addition to the PUT endpoint, which has different semantics regarding how <code>null</code> values are handled</li>\n<li>Parse the incoming JSON in a different way, so that you know whether the client specificied an explicit <code>null</code> or just omitted the property.</li>\n</ul>\n"}],"owner":{"account_id":25882721,"reputation":21,"user_id":19611476,"display_name":"Abdullaah"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":238,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690293681,"creation_date":1690274726,"question_id":76760954,"body_markdown":"I have a method for updating customer Entity  using PUT request in my Java Spring boot project. There is a field notificationId inside customer entity. Below is a statement from this method.  \r\n```\r\ncustomerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());  \r\n```\r\nThis statement works as expected but if the customer once updates notificationId to eg: `12345` and then again wants to update to `null`, he is not able to update to `null`. I tried some changes in the logic, but no use. Kindly suggest changes.","title":"unable to update a value inside an entity to null using PUT request","body":"<p>I have a method for updating customer Entity  using PUT request in my Java Spring boot project. There is a field notificationId inside customer entity. Below is a statement from this method.</p>\n<pre><code>customerEntity.setNotificationId(customerDto.getNotificationId() == null ? customerEntity.getNotificationId() : customerDto.getNotificationId());  \n</code></pre>\n<p>This statement works as expected but if the customer once updates notificationId to eg: <code>12345</code> and then again wants to update to <code>null</code>, he is not able to update to <code>null</code>. I tried some changes in the logic, but no use. Kindly suggest changes.</p>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":1,"creation_date":1646150661,"post_id":71310532,"comment_id":126049894,"body_markdown":"Does this answer your question? [Error &quot;Source option 5 is no longer supported. Use 6 or later&quot; on Maven compile](https://stackoverflow.com/questions/53034953/error-source-option-5-is-no-longer-supported-use-6-or-later-on-maven-compile)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53034953/error-source-option-5-is-no-longer-supported-use-6-or-later-on-maven-compile\">Error &quot;Source option 5 is no longer supported. Use 6 or later&quot; on Maven compile</a>"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":0,"creation_date":1651288398,"post_id":71310532,"comment_id":127334909,"body_markdown":"It was helpful.  It explained how to fix the problem, but didn&#39;t explain why the problem occurred.   I tracked it down and provided an answer.  Thanks for the pointer!","body":"It was helpful.  It explained how to fix the problem, but didn&#39;t explain why the problem occurred.   I tracked it down and provided an answer.  Thanks for the pointer!"}],"answers":[{"comments":[{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1680858927,"post_id":72065336,"comment_id":133970872,"body_markdown":"How can you tell which JAVA Runtime a particular system supports/is using?","body":"How can you tell which JAVA Runtime a particular system supports/is using?"},{"owner":{"account_id":480174,"reputation":13676,"user_id":893254,"accept_rate":30,"display_name":"FreelanceConsultant"},"score":0,"creation_date":1680858948,"post_id":72065336,"comment_id":133970876,"body_markdown":"eg: How to find JDK version?","body":"eg: How to find JDK version?"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":0,"creation_date":1680962570,"post_id":72065336,"comment_id":133984535,"body_markdown":"The maven `mvn -X compile` shows the arguments being passed to the java compiler.  To see the version of the file produced use `javap -v target/classes/some-class-file.class` (see also https://stackoverflow.com/a/75812575/3281336)","body":"The maven <code>mvn -X compile</code> shows the arguments being passed to the java compiler.  To see the version of the file produced use <code>javap -v target&#47;classes&#47;some-class-file.class</code> (see also <a href=\"https://stackoverflow.com/a/75812575/3281336\">stackoverflow.com/a/75812575/3281336</a>)"},{"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"score":0,"creation_date":1690137278,"post_id":72065336,"comment_id":135308145,"body_markdown":"@FreelanceConsultant, The JDK version is found with `java -version`.  To figure out what version of java was used to compile a class file, you can see this: https://stackoverflow.com/a/1096159/3281336","body":"@FreelanceConsultant, The JDK version is found with <code>java -version</code>.  To figure out what version of java was used to compile a class file, you can see this: <a href=\"https://stackoverflow.com/a/1096159/3281336\">stackoverflow.com/a/1096159/3281336</a>"}],"tags":[],"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1651286998,"creation_date":1651286998,"answer_id":72065336,"question_id":71310532,"body_markdown":"The problem occurs because the maven plugin (maven-compiler-plugin:3.1) passes the arguments `-source 1.5 -target 1.5` to the JDK 17 java compiler.\r\n\r\nThe JDK 17 compiler doesn&#39;t support generating code for the Java 1.5 runtime so the error is produced as shown:\r\n\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile \r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n\r\n```\r\n\r\nYou can see this if you use the `-X` debug flag when running the maven command as shown below:\r\n\r\n```\r\nmvn -X clean install\r\n. . . lots of output omitted . . .\r\n[DEBUG] Command line options:\r\n[DEBUG] -target 1.5 -source 1.5 -d target\\classes -classpath target\\classes; -sourcepath src\\main\\java; -g -nowarn\r\n. . .\r\n```\r\n\r\n\r\nThe fix is to modify the `pom.xml` file so that the maven-compiler-plugin will pass options like `-source 1.8 -target 1.8` (or some higher number) so that the JDK 17 can produce code that is targeted for a version of the JDK that the JDK 17 compiler supports.\r\n\r\nFor example, to use JDK 1.8, you would add the following to your `pom.xml` file.\r\n```\r\n&lt;properties&gt;\r\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\r\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\r\n&lt;/properties&gt;\r\n```\r\n\r\nThe question and answer https://stackoverflow.com/a/60344341/3281336 also might add some more information if you are interested.\r\n\r\nNOTE: The 3.1 version of the maven-compiler-plugin is very old (released Apr 2013) based on https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin so back then, Java version 1.5 was a viable choice.\r\n\r\n","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>The problem occurs because the maven plugin (maven-compiler-plugin:3.1) passes the arguments <code>-source 1.5 -target 1.5</code> to the JDK 17 java compiler.</p>\n<p>The JDK 17 compiler doesn't support generating code for the Java 1.5 runtime so the error is produced as shown:</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile \n[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n\n</code></pre>\n<p>You can see this if you use the <code>-X</code> debug flag when running the maven command as shown below:</p>\n<pre><code>mvn -X clean install\n. . . lots of output omitted . . .\n[DEBUG] Command line options:\n[DEBUG] -target 1.5 -source 1.5 -d target\\classes -classpath target\\classes; -sourcepath src\\main\\java; -g -nowarn\n. . .\n</code></pre>\n<p>The fix is to modify the <code>pom.xml</code> file so that the maven-compiler-plugin will pass options like <code>-source 1.8 -target 1.8</code> (or some higher number) so that the JDK 17 can produce code that is targeted for a version of the JDK that the JDK 17 compiler supports.</p>\n<p>For example, to use JDK 1.8, you would add the following to your <code>pom.xml</code> file.</p>\n<pre><code>&lt;properties&gt;\n     &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n     &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>The question and answer <a href=\"https://stackoverflow.com/a/60344341/3281336\">https://stackoverflow.com/a/60344341/3281336</a> also might add some more information if you are interested.</p>\n<p>NOTE: The 3.1 version of the maven-compiler-plugin is very old (released Apr 2013) based on <a href=\"https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin</a> so back then, Java version 1.5 was a viable choice.</p>\n"},{"comments":[{"owner":{"account_id":4257006,"reputation":694,"user_id":3482424,"accept_rate":80,"display_name":"Morten"},"score":1,"creation_date":1690485541,"post_id":76763505,"comment_id":135364327,"body_markdown":"This probably depends on the compiler you are using. There might be some supported compilers out which can compile old stuff.","body":"This probably depends on the compiler you are using. There might be some supported compilers out which can compile old stuff."}],"tags":[],"owner":{"account_id":9718904,"reputation":11,"user_id":22077359,"display_name":"asn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690293679,"creation_date":1690293603,"answer_id":76763505,"question_id":71310532,"body_markdown":"It worked for me.\r\n\r\n```\r\n&lt;properties&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;!-- &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; --&gt;\r\n\t\t&lt;!-- &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; --&gt; \r\n\t\t&lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\r\n\t&lt;/properties&gt;\r\n```","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>It worked for me.</p>\n<pre><code>&lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;!-- &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt; --&gt;\n        &lt;!-- &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt; --&gt; \n        &lt;maven.compiler.release&gt;17&lt;/maven.compiler.release&gt;\n    &lt;/properties&gt;\n</code></pre>\n"}],"owner":{"account_id":3978849,"reputation":9293,"user_id":3281336,"accept_rate":60,"display_name":"PatS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72065336,"answer_count":2,"score":0,"last_activity_date":1690293679,"creation_date":1646147041,"question_id":71310532,"body_markdown":"When using the maven command to create a simple Maven project (with the latest versions of maven and java), I get the error:\r\n\r\n```\r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n```\r\n\r\n**So, what change is needed to fix this.**  Do I change the maven command or edit the pom.xml file afterwards?\r\n\r\n## To reproduce the error\r\n**First verify what versions of Java and Maven you are running.**\r\nAt the time of this question, I&#39;m using the latest versions of Maven and Java.\r\nMaven: 3.8.4 and Java 17.0.2&lt;br/&gt;\r\nBelow are details\r\n\r\n```\r\nmvn --version\r\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\r\nMaven home: D:\\p\\apache-maven-3.8.4\r\nJava version: 17.0.2, vendor: Oracle Corporation, runtime: D:\\p\\jdk-17.0.2\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n\r\njava -version\r\njava version &quot;17.0.2&quot; 2022-01-18 LTS\r\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\r\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)\r\n```\r\n\r\n### Create the maven hello world-like program\r\nI used this command to create the Java maven sample program.\r\n```\r\nmvn archetype:generate -DgroupId=com.example -DartifactId=helloworld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\r\n```\r\n\r\nI found the following link which explains this in more detail (if needed).\r\nhttps://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/.\r\n\r\n### Build the code\r\nNext, build the code and observe the error.\r\n```\r\ncd helloworld\r\nmvn clean install\r\n[ERROR] COMPILATION ERROR :\r\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\r\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\r\n```\r\nNotice the **ERROR**s.\r\n\r\n**But, if I switch back to Java 8 (JDK 1.8) and run the maven build command, then the code compiles successfully.**  Below is the successful compile and the maven version and JDK version used that result in a successful compilation.\r\n\r\n```\r\nmvn clean install\r\n[INFO] BUILD SUCCESS\r\n\r\nmvn --version\r\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\r\nMaven home: D:\\p\\apache-maven-3.8.4\r\nJava version: 1.8.0_271, vendor: Oracle Corporation, runtime: D:\\p\\jdk1.8.0_271\\jre\r\nDefault locale: en_US, platform encoding: Cp1252\r\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\r\n```\r\n\r\n**My question is, how do I fix this?**  and **Why does this happen?**\r\n\r\n\r\n","title":"Java 17 and maven-archetype-quickstart gives error: Source Option 5 is no longer supported","body":"<p>When using the maven command to create a simple Maven project (with the latest versions of maven and java), I get the error:</p>\n<pre><code>[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n</code></pre>\n<p><strong>So, what change is needed to fix this.</strong>  Do I change the maven command or edit the pom.xml file afterwards?</p>\n<h2>To reproduce the error</h2>\n<p><strong>First verify what versions of Java and Maven you are running.</strong>\nAt the time of this question, I'm using the latest versions of Maven and Java.\nMaven: 3.8.4 and Java 17.0.2<br/>\nBelow are details</p>\n<pre><code>mvn --version\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\nMaven home: D:\\p\\apache-maven-3.8.4\nJava version: 17.0.2, vendor: Oracle Corporation, runtime: D:\\p\\jdk-17.0.2\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n\njava -version\njava version &quot;17.0.2&quot; 2022-01-18 LTS\nJava(TM) SE Runtime Environment (build 17.0.2+8-LTS-86)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.2+8-LTS-86, mixed mode, sharing)\n</code></pre>\n<h3>Create the maven hello world-like program</h3>\n<p>I used this command to create the Java maven sample program.</p>\n<pre><code>mvn archetype:generate -DgroupId=com.example -DartifactId=helloworld -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false\n</code></pre>\n<p>I found the following link which explains this in more detail (if needed).\n<a href=\"https://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/\" rel=\"nofollow noreferrer\">https://facingissuesonit.com/2017/06/06/how-to-create-maven-java-console-project/</a>.</p>\n<h3>Build the code</h3>\n<p>Next, build the code and observe the error.</p>\n<pre><code>cd helloworld\nmvn clean install\n[ERROR] COMPILATION ERROR :\n[ERROR] Source option 5 is no longer supported. Use 7 or later.\n[ERROR] Target option 5 is no longer supported. Use 7 or later.\n</code></pre>\n<p>Notice the <strong>ERROR</strong>s.</p>\n<p><strong>But, if I switch back to Java 8 (JDK 1.8) and run the maven build command, then the code compiles successfully.</strong>  Below is the successful compile and the maven version and JDK version used that result in a successful compilation.</p>\n<pre><code>mvn clean install\n[INFO] BUILD SUCCESS\n\nmvn --version\nApache Maven 3.8.4 (9b656c72d54e5bacbed989b64718c159fe39b537)\nMaven home: D:\\p\\apache-maven-3.8.4\nJava version: 1.8.0_271, vendor: Oracle Corporation, runtime: D:\\p\\jdk1.8.0_271\\jre\nDefault locale: en_US, platform encoding: Cp1252\nOS name: &quot;windows 10&quot;, version: &quot;10.0&quot;, arch: &quot;amd64&quot;, family: &quot;windows&quot;\n</code></pre>\n<p><strong>My question is, how do I fix this?</strong>  and <strong>Why does this happen?</strong></p>\n"},{"tags":["java","json","rest","jersey","jax-rs"],"comments":[{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416759974,"post_id":27090833,"comment_id":42689106,"body_markdown":"I know this is a client side problem, but can you show the server application configuration","body":"I know this is a client side problem, but can you show the server application configuration"}],"answers":[{"comments":[{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416843020,"post_id":27091616,"comment_id":42719626,"body_markdown":"Thanks for your answer, I updated the post with the required information. As you can see, to return the map I use the Jackson as JSON provider adding the dependency to the pom.xml file and registering it in the ResourceConfig object before starting the HttpServer but still not working...","body":"Thanks for your answer, I updated the post with the required information. As you can see, to return the map I use the Jackson as JSON provider adding the dependency to the pom.xml file and registering it in the ResourceConfig object before starting the HttpServer but still not working..."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416843241,"post_id":27091616,"comment_id":42719767,"body_markdown":"Try registering it with the client also, since the problem is on the client side (since the problem is with the client) i.e. `client.register(...)`. Since you have the MOXy still, the client may be implicitly registered with MOXy.","body":"Try registering it with the client also, since the problem is on the client side (since the problem is with the client) i.e. <code>client.register(...)</code>. Since you have the MOXy still, the client may be implicitly registered with MOXy."},{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416844634,"post_id":27091616,"comment_id":42720649,"body_markdown":"thanks for the help, again, I updated the post with the error I get when I register the client...I have been considering also use the adapter, but I do not know how to implement it.","body":"thanks for the help, again, I updated the post with the error I get when I register the client...I have been considering also use the adapter, but I do not know how to implement it."},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416844810,"post_id":27091616,"comment_id":42720780,"body_markdown":"please show the `New` and `Term` class. I created my own to test and it worked fine.","body":"please show the <code>New</code> and <code>Term</code> class. I created my own to test and it worked fine."},{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416845577,"post_id":27091616,"comment_id":42721263,"body_markdown":"You can see the classes requested, thanks.\n\n\nCould you give an example of how to use `GenericEntity`?","body":"You can see the classes requested, thanks.   Could you give an example of how to use <code>GenericEntity</code>?"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416846648,"post_id":27091616,"comment_id":42721932,"body_markdown":"I see the problem. Keys in JSON are supposed to be Strings. If you want to use an object, 1) You need to create a custom serializer that will serialize and deserializer the object to a String 2) it&#39;ll look funky in JSON","body":"I see the problem. Keys in JSON are supposed to be Strings. If you want to use an object, 1) You need to create a custom serializer that will serialize and deserializer the object to a String 2) it&#39;ll look funky in JSON"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416846904,"post_id":27091616,"comment_id":42722102,"body_markdown":"Are you sure you meant for the `New` to be the key, and not the other way around? `Term` only has one field, which will be easier to represent as a key. `New` has four fields, which is an awkward key","body":"Are you sure you meant for the <code>New</code> to be the key, and not the other way around? <code>Term</code> only has one field, which will be easier to represent as a key. <code>New</code> has four fields, which is an awkward key"},{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416847411,"post_id":27091616,"comment_id":42722419,"body_markdown":"I can change the order without any problem, that would solve the problem?","body":"I can change the order without any problem, that would solve the problem?"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416847526,"post_id":27091616,"comment_id":42722507,"body_markdown":"No you still need a serializer/deserializer, but it&#39;s pretty easy. I just suggested switching the order, because trying to represent 4 fields as a json key just looks weird. I&#39;ll put together something. Give me a few minutes","body":"No you still need a serializer/deserializer, but it&#39;s pretty easy. I just suggested switching the order, because trying to represent 4 fields as a json key just looks weird. I&#39;ll put together something. Give me a few minutes"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416849716,"post_id":27091616,"comment_id":42723886,"body_markdown":"So it actually looks like just using the `Term` type for the key makes it work. But the actual text in the json is the `toString` So you can just have it return the `name`. No need for any serializers","body":"So it actually looks like just using the <code>Term</code> type for the key makes it work. But the actual text in the json is the <code>toString</code> So you can just have it return the <code>name</code>. No need for any serializers"},{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416850344,"post_id":27091616,"comment_id":42724280,"body_markdown":"So, If I change the `toString` method to return only the name, will work?\n\nI get the same first error: `GRAVE: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map` etc. by just changing the `toString` method like this:\n\n`public String toString() {return word;}`","body":"So, If I change the <code>toString</code> method to return only the name, will work?  I get the same first error: <code>GRAVE: MessageBodyReader not found for media type=application&#47;json, type=interface java.util.Map, genericType=java.util.Map</code> etc. by just changing the <code>toString</code> method like this:  <code>public String toString() {return word;}</code>"},{"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"score":0,"creation_date":1416850407,"post_id":27091616,"comment_id":42724314,"body_markdown":"Did you register the client with the JacksonFeature. You should get rid of the MOXy dependency if you&#39;re not going to use it. The Jackson module should autoconfigure itself. But the MOXy will take precedence","body":"Did you register the client with the JacksonFeature. You should get rid of the MOXy dependency if you&#39;re not going to use it. The Jackson module should autoconfigure itself. But the MOXy will take precedence"},{"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"score":0,"creation_date":1416850911,"post_id":27091616,"comment_id":42724623,"body_markdown":"Yes, I closed Eclipse, I have reopened and no longer returns an error. Thank you very much!","body":"Yes, I closed Eclipse, I have reopened and no longer returns an error. Thank you very much!"}],"tags":[],"owner":{"account_id":3013228,"reputation":205797,"user_id":2587435,"accept_rate":88,"display_name":"Paul Samsotha"},"comment_count":13,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1690293379,"creation_date":1416761681,"answer_id":27091616,"question_id":27090833,"body_markdown":"I see you have two different provider dependencies `jersey-media-moxy` and `jersey-media-json-jackson`. I&#39;ve always had a problem with `Maps` with MOXy. I guess they don&#39;t play well. Seems you will need to use an adapter to make it play nice, as seen [here from Blaise Doughan](https://stackoverflow.com/a/11360732/2587435). \r\n\r\nThat being said, I requested (in the comments above) to see your Server side configuration, as MOXy will auto configure itself, and take precedence over the `jersey-media-json-jackson`. Why, I&#39;m not sure, this is just what I&#39;ve always experienced. So I&#39;m curious how the Server side didn&#39;t fail even before the response came back to the client. Unless you confgiure the `JacksonFeature` with the server application, in which you should have also configured it with the client. (This is only the case, because you also have MOXy dependency).\r\n\r\nAnyway, if you don&#39;t want to go through the hassle creating adapters, as seen in the link above, just get rid of the `jersey-media-moxy` dependency. `jersey-media-json-jackson` will also auto configure it feature. You should just use one or the other.\r\n\r\n----\r\n\r\n**As an aside:**\r\n\r\n`@Path(&quot;/getAllNews&quot;)`. Path segments should be nouns, unless they are controller resources, which normally perform some action, other than normal CRUD operations (e.g. `/register`). The HTTP method already consists of the verb to which each CRUD action should be performed.\r\n\r\n* **C**reate - POST\r\n* **R**etriecve - GET\r\n* **U**pdate = PUT\r\n* **D**elete - DELETE \r\n\r\nJust some semantics to consider :-)\r\n\r\n------\r\n\r\n**UPDATE**\r\n\r\nThe problem is with the `New` key. Jackson doesn&#39;t know how to deserialize this. Since you are willing to switch the key and value type, just change the `toString` to return the `name` in the `Term` class, and it should be OK.\r\n\r\n\r\n","title":"Jersey Error: MessageBodyReader not found for media type=application/json","body":"<p>I see you have two different provider dependencies <code>jersey-media-moxy</code> and <code>jersey-media-json-jackson</code>. I've always had a problem with <code>Maps</code> with MOXy. I guess they don't play well. Seems you will need to use an adapter to make it play nice, as seen <a href=\"https://stackoverflow.com/a/11360732/2587435\">here from Blaise Doughan</a>.</p>\n<p>That being said, I requested (in the comments above) to see your Server side configuration, as MOXy will auto configure itself, and take precedence over the <code>jersey-media-json-jackson</code>. Why, I'm not sure, this is just what I've always experienced. So I'm curious how the Server side didn't fail even before the response came back to the client. Unless you confgiure the <code>JacksonFeature</code> with the server application, in which you should have also configured it with the client. (This is only the case, because you also have MOXy dependency).</p>\n<p>Anyway, if you don't want to go through the hassle creating adapters, as seen in the link above, just get rid of the <code>jersey-media-moxy</code> dependency. <code>jersey-media-json-jackson</code> will also auto configure it feature. You should just use one or the other.</p>\n<hr />\n<p><strong>As an aside:</strong></p>\n<p><code>@Path(&quot;/getAllNews&quot;)</code>. Path segments should be nouns, unless they are controller resources, which normally perform some action, other than normal CRUD operations (e.g. <code>/register</code>). The HTTP method already consists of the verb to which each CRUD action should be performed.</p>\n<ul>\n<li><strong>C</strong>reate - POST</li>\n<li><strong>R</strong>etriecve - GET</li>\n<li><strong>U</strong>pdate = PUT</li>\n<li><strong>D</strong>elete - DELETE</li>\n</ul>\n<p>Just some semantics to consider :-)</p>\n<hr />\n<p><strong>UPDATE</strong></p>\n<p>The problem is with the <code>New</code> key. Jackson doesn't know how to deserialize this. Since you are willing to switch the key and value type, just change the <code>toString</code> to return the <code>name</code> in the <code>Term</code> class, and it should be OK.</p>\n"}],"owner":{"account_id":2405770,"reputation":1942,"user_id":2102292,"accept_rate":69,"display_name":"Cheknov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":31653,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":27091616,"answer_count":1,"score":11,"last_activity_date":1690293379,"creation_date":1416757657,"question_id":27090833,"body_markdown":"i&#39;m trying to implement a small REST API using Jersey as framework, in principle the code worked fine but when I try to do a &#39;GET&#39; of a hash table, I get the following error:\r\n\r\n    nov 23, 2014 4:27:40 PM org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor aroundReadFrom\r\n\tGRAVE: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.JobRunShell - Job DEFAULT.testJob3 threw an unhandled Exception: \r\n\torg.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n\t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n    )\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n\t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\r\n\t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n\t1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.ErrorLogger - Job (DEFAULT.testJob3 threw an exception.\r\n\torg.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.]\r\n\t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:213)\r\n\t\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n\tCaused by: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\r\n\t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n\t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n\t\tat org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n\t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:228)\r\n\t\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\r\n\t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n\t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\r\n\t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n\t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n\t\t... 1 more\r\n\r\n\r\nThis is the problematic line:\r\n\r\n\t\tClient client = ClientBuilder.newClient();\r\n\t\t\r\n\t\tWebTarget targetGetAllNews = client.target(&quot;http://localhost:15000&quot;).path(&quot;news/getAllNews&quot;);\r\n\r\n\t\t\r\n    \tMap&lt;New, Term&gt; NewsAll = targetGetAllNews.request(\r\n\t\t\t\t MediaType.APPLICATION_JSON_TYPE).get(new GenericType&lt;Map&lt;New, Term&gt;&gt;(){});\r\n\r\n\r\nand this is how I implemented the service:\r\n\r\n\t@GET\r\n\t@Path(&quot;/getAllNews&quot;)\r\n\t@Produces(MediaType.APPLICATION_JSON)\r\n\tpublic Map&lt;New, Term&gt; getAllNews() {\r\n\t\treturn NewsCrawler.getNewAndTerm();\r\n\t}\r\n\r\npom.xml (maven dependencies)\r\n\r\n\t&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;upf.dad.proyecto&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;JAXRS-proyecto&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;dependencies&gt;\r\n\t&lt;!-- Rome RSS and Atom utilities @ http://rometools.github.io/rome/ --&gt;        \r\n\t&lt;dependency&gt;\r\n\t        &lt;groupId&gt;rome&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;rome&lt;/artifactId&gt;             \r\n\t        &lt;version&gt;1.0&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\r\n\t&lt;!-- jsoup HTML parser library @ http://jsoup.org/ --&gt;         \r\n\t&lt;dependency&gt;             \r\n\t\t\t&lt;groupId&gt;org.jsoup&lt;/groupId&gt;             \r\n\t\t\t&lt;artifactId&gt;jsoup&lt;/artifactId&gt;             \r\n\t\t\t&lt;version&gt;1.8.1&lt;/version&gt;      \t\t   \r\n\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.2.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.6.1&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.twitter4j&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;4.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-container-jdk-http&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.12&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.13&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;/project&gt;\r\n\r\n\r\nServer side configuration:\r\n\r\n    public class NewsCrawlerRestServer {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tURI baseUri = UriBuilder.fromUri(&quot;http://localhost/&quot;).port(15000).build();\r\n\t\tResourceConfig config = new ResourceConfig(NewsCrawlerServices.class, HotTopicDetectorServices.class);\r\n\t\tconfig.register(JacksonFeature.class);\r\n\t\tHttpServer server = JdkHttpServerFactory.createHttpServer(baseUri, config);\r\n\t\tSystem.out.println(&quot;Server started...&quot;);\r\n\t\t\r\n\t\t}\r\n    }\r\n\r\n\r\nError registering Jackson in the client:\r\n\r\n    org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ws.rs.ProcessingException: Error reading entity from input stream.]\r\n    \t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:213)\r\n    \t\tat org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\r\n    \tCaused by: javax.ws.rs.ProcessingException: Error reading entity from input stream.\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:866)\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\r\n    \t\tat org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:315)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:297)\r\n    \t\tat org.glassfish.jersey.internal.Errors.process(Errors.java:228)\r\n    \t\tat org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\r\n    \t\tat org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\r\n    \t\tat upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:112)\r\n    \t\tat upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\r\n    \t\tat org.quartz.core.JobRunShell.run(JobRunShell.java:202)\r\n    \t\t... 1 more\r\n    \tCaused by: com.fasterxml.jackson.databind.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class upf.dad.proyecto.New]\r\n    \t\tat com.fasterxml.jackson.databind.deser.DeserializerCache._handleUnknownKeyDeserializer(DeserializerCache.java:580)\r\n    \t\tat com.fasterxml.jackson.databind.deser.DeserializerCache.findKeyDeserializer(DeserializerCache.java:170)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.findKeyDeserializer(DeserializationContext.java:404)\r\n    \t\tat com.fasterxml.jackson.databind.deser.std.MapDeserializer.createContextual(MapDeserializer.java:232)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.handleSecondaryContextualization(DeserializationContext.java:572)\r\n    \t\tat com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:386)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader._findRootDeserializer(ObjectReader.java:1380)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1228)\r\n    \t\tat com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:677)\r\n    \t\tat com.fasterxml.jackson.jaxrs.base.ProviderBase.readFrom(ProviderBase.java:777)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.invokeReadFrom(ReaderInterceptorExecutor.java:264)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:234)\r\n    \t\tat org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\r\n    \t\tat org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\r\n    \t\tat org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\r\n\r\n\r\n\r\nNew Class:\r\n\r\n    package upf.dad.proyecto;\r\n\r\n    import java.util.Date;\r\n\r\n    public class New {\r\n\r\n\tprivate String tittle;\r\n\tprivate String description;\r\n\tprivate Date date;\r\n\tprivate String link;\r\n\t\r\n\tpublic New(){\r\n\r\n\t}\r\n\t\r\n\tpublic New(String t, String d, Date date, String l){\r\n\t\tthis.tittle = t;\r\n\t\tthis.description = d;\r\n\t\tthis.date = date;\r\n\t\tthis.link = l;\r\n\t}\r\n\r\n\tpublic String getTittle() {\r\n\t\treturn tittle;\r\n\t}\r\n\r\n\tpublic void setTittle(String tittle) {\r\n\t\tthis.tittle = tittle;\r\n\t}\r\n\r\n\tpublic String getDescription() {\r\n\t\treturn description;\r\n\t}\r\n\r\n\tpublic void setDescription(String description) {\r\n\t\tthis.description = description;\r\n\t}\r\n\r\n\tpublic Date getDate() {\r\n\t\treturn date;\r\n\t}\r\n\r\n\tpublic void setDate(Date date) {\r\n\t\tthis.date = date;\r\n\t}\r\n\r\n\tpublic String getLink() {\r\n\t\treturn link;\r\n\t}\r\n\r\n\tpublic void setLink(String link) {\r\n\t\tthis.link = link;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;New [tittle=&quot; + tittle + &quot;, description=&quot; + description\r\n\t\t\t\t+ &quot;, date=&quot; + date + &quot;, link=&quot; + link + &quot;]&quot;;\r\n\t}\r\n\t\r\n\t\r\n    }\r\n\r\n\r\nTerm class:\r\n\r\n    package upf.dad.proyecto;\r\n\r\n    public class Term {\r\n\r\n\tprivate String word;\r\n\t\r\n\tpublic Term(){\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic Term(String word){\r\n\t\tthis.word = word;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic String getWord(){\r\n\t\treturn word;\r\n\t}\r\n\t\r\n\tpublic void setWord(String _word){\r\n\t\tword = _word;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String toString() {\r\n\t\treturn &quot;Termino =&quot; + word + &quot;]&quot;;\r\n\t}\r\n    }\r\n\r\ncan someone help me please to return the map?\r\n","title":"Jersey Error: MessageBodyReader not found for media type=application/json","body":"<p>i'm trying to implement a small REST API using Jersey as framework, in principle the code worked fine but when I try to do a 'GET' of a hash table, I get the following error:</p>\n\n<pre><code>nov 23, 2014 4:27:40 PM org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor aroundReadFrom\nGRAVE: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.JobRunShell - Job DEFAULT.testJob3 threw an unhandled Exception: \norg.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n    at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n    at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\n    at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n1440 [DefaultQuartzScheduler_Worker-3] ERROR org.quartz.core.ErrorLogger - Job (DEFAULT.testJob3 threw an exception.\norg.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.]\n    at org.quartz.core.JobRunShell.run(JobRunShell.java:213)\n    at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\nCaused by: org.glassfish.jersey.message.internal.MessageBodyProviderNotFoundException: MessageBodyReader not found for media type=application/json, type=interface java.util.Map, genericType=java.util.Map&lt;upf.dad.proyecto.New, upf.dad.proyecto.Term&gt;.\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:230)\n    at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n    at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n    at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n    at org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\n    at org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\n    at org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\n    at org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n    at org.glassfish.jersey.internal.Errors.process(Errors.java:228)\n    at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\n    at org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\n    at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n    at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:110)\n    at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n    at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n    ... 1 more\n</code></pre>\n\n<p>This is the problematic line:</p>\n\n<pre><code>    Client client = ClientBuilder.newClient();\n\n    WebTarget targetGetAllNews = client.target(\"http://localhost:15000\").path(\"news/getAllNews\");\n\n\n    Map&lt;New, Term&gt; NewsAll = targetGetAllNews.request(\n             MediaType.APPLICATION_JSON_TYPE).get(new GenericType&lt;Map&lt;New, Term&gt;&gt;(){});\n</code></pre>\n\n<p>and this is how I implemented the service:</p>\n\n<pre><code>@GET\n@Path(\"/getAllNews\")\n@Produces(MediaType.APPLICATION_JSON)\npublic Map&lt;New, Term&gt; getAllNews() {\n    return NewsCrawler.getNewAndTerm();\n}\n</code></pre>\n\n<p>pom.xml (maven dependencies)</p>\n\n<pre><code>&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;groupId&gt;upf.dad.proyecto&lt;/groupId&gt;\n&lt;artifactId&gt;JAXRS-proyecto&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;dependencies&gt;\n&lt;!-- Rome RSS and Atom utilities @ http://rometools.github.io/rome/ --&gt;        \n&lt;dependency&gt;\n        &lt;groupId&gt;rome&lt;/groupId&gt;\n        &lt;artifactId&gt;rome&lt;/artifactId&gt;             \n        &lt;version&gt;1.0&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;!-- jsoup HTML parser library @ http://jsoup.org/ --&gt;         \n&lt;dependency&gt;             \n        &lt;groupId&gt;org.jsoup&lt;/groupId&gt;             \n        &lt;artifactId&gt;jsoup&lt;/artifactId&gt;             \n        &lt;version&gt;1.8.1&lt;/version&gt;               \n&lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n        &lt;artifactId&gt;quartz&lt;/artifactId&gt;\n        &lt;version&gt;2.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.twitter4j&lt;/groupId&gt;\n        &lt;artifactId&gt;twitter4j-core&lt;/artifactId&gt;\n        &lt;version&gt;4.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-container-servlet&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.containers&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-container-jdk-http&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-media-moxy&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.core&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-client&lt;/artifactId&gt;\n        &lt;version&gt;2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.glassfish.jersey.media&lt;/groupId&gt;\n        &lt;artifactId&gt;jersey-media-json-jackson&lt;/artifactId&gt;\n        &lt;version&gt;2.13&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n\n<p>Server side configuration:</p>\n\n<pre><code>public class NewsCrawlerRestServer {\n\npublic static void main(String[] args) throws IOException {\n\n    URI baseUri = UriBuilder.fromUri(\"http://localhost/\").port(15000).build();\n    ResourceConfig config = new ResourceConfig(NewsCrawlerServices.class, HotTopicDetectorServices.class);\n    config.register(JacksonFeature.class);\n    HttpServer server = JdkHttpServerFactory.createHttpServer(baseUri, config);\n    System.out.println(\"Server started...\");\n\n    }\n}\n</code></pre>\n\n<p>Error registering Jackson in the client:</p>\n\n<pre><code>org.quartz.SchedulerException: Job threw an unhandled exception. [See nested exception: javax.ws.rs.ProcessingException: Error reading entity from input stream.]\n        at org.quartz.core.JobRunShell.run(JobRunShell.java:213)\n        at org.quartz.simpl.SimpleThreadPool$WorkerThread.run(SimpleThreadPool.java:573)\n    Caused by: javax.ws.rs.ProcessingException: Error reading entity from input stream.\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:866)\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:810)\n        at org.glassfish.jersey.client.ClientResponse.readEntity(ClientResponse.java:368)\n        at org.glassfish.jersey.client.JerseyInvocation.translate(JerseyInvocation.java:846)\n        at org.glassfish.jersey.client.JerseyInvocation.access$600(JerseyInvocation.java:91)\n        at org.glassfish.jersey.client.JerseyInvocation$3.call(JerseyInvocation.java:705)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:315)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:297)\n        at org.glassfish.jersey.internal.Errors.process(Errors.java:228)\n        at org.glassfish.jersey.process.internal.RequestScope.runInScope(RequestScope.java:424)\n        at org.glassfish.jersey.client.JerseyInvocation.invoke(JerseyInvocation.java:701)\n        at org.glassfish.jersey.client.JerseyInvocation$Builder.method(JerseyInvocation.java:417)\n        at org.glassfish.jersey.client.JerseyInvocation$Builder.get(JerseyInvocation.java:313)\n        at upf.dad.proyecto.HotTopicDetector.News(HotTopicDetector.java:112)\n        at upf.dad.proyecto.ScheduledTestJob3.execute(ScheduledTestJob3.java:11)\n        at org.quartz.core.JobRunShell.run(JobRunShell.java:202)\n        ... 1 more\n    Caused by: com.fasterxml.jackson.databind.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class upf.dad.proyecto.New]\n        at com.fasterxml.jackson.databind.deser.DeserializerCache._handleUnknownKeyDeserializer(DeserializerCache.java:580)\n        at com.fasterxml.jackson.databind.deser.DeserializerCache.findKeyDeserializer(DeserializerCache.java:170)\n        at com.fasterxml.jackson.databind.DeserializationContext.findKeyDeserializer(DeserializationContext.java:404)\n        at com.fasterxml.jackson.databind.deser.std.MapDeserializer.createContextual(MapDeserializer.java:232)\n        at com.fasterxml.jackson.databind.DeserializationContext.handleSecondaryContextualization(DeserializationContext.java:572)\n        at com.fasterxml.jackson.databind.DeserializationContext.findRootValueDeserializer(DeserializationContext.java:386)\n        at com.fasterxml.jackson.databind.ObjectReader._findRootDeserializer(ObjectReader.java:1380)\n        at com.fasterxml.jackson.databind.ObjectReader._bind(ObjectReader.java:1228)\n        at com.fasterxml.jackson.databind.ObjectReader.readValue(ObjectReader.java:677)\n        at com.fasterxml.jackson.jaxrs.base.ProviderBase.readFrom(ProviderBase.java:777)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.invokeReadFrom(ReaderInterceptorExecutor.java:264)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor$TerminalReaderInterceptor.aroundReadFrom(ReaderInterceptorExecutor.java:234)\n        at org.glassfish.jersey.message.internal.ReaderInterceptorExecutor.proceed(ReaderInterceptorExecutor.java:154)\n        at org.glassfish.jersey.message.internal.MessageBodyFactory.readFrom(MessageBodyFactory.java:1124)\n        at org.glassfish.jersey.message.internal.InboundMessageContext.readEntity(InboundMessageContext.java:851)\n</code></pre>\n\n<p>New Class:</p>\n\n<pre><code>package upf.dad.proyecto;\n\nimport java.util.Date;\n\npublic class New {\n\nprivate String tittle;\nprivate String description;\nprivate Date date;\nprivate String link;\n\npublic New(){\n\n}\n\npublic New(String t, String d, Date date, String l){\n    this.tittle = t;\n    this.description = d;\n    this.date = date;\n    this.link = l;\n}\n\npublic String getTittle() {\n    return tittle;\n}\n\npublic void setTittle(String tittle) {\n    this.tittle = tittle;\n}\n\npublic String getDescription() {\n    return description;\n}\n\npublic void setDescription(String description) {\n    this.description = description;\n}\n\npublic Date getDate() {\n    return date;\n}\n\npublic void setDate(Date date) {\n    this.date = date;\n}\n\npublic String getLink() {\n    return link;\n}\n\npublic void setLink(String link) {\n    this.link = link;\n}\n\n@Override\npublic String toString() {\n    return \"New [tittle=\" + tittle + \", description=\" + description\n            + \", date=\" + date + \", link=\" + link + \"]\";\n}\n\n\n}\n</code></pre>\n\n<p>Term class:</p>\n\n<pre><code>package upf.dad.proyecto;\n\npublic class Term {\n\nprivate String word;\n\npublic Term(){\n\n}\n\npublic Term(String word){\n    this.word = word;\n\n}\n\npublic String getWord(){\n    return word;\n}\n\npublic void setWord(String _word){\n    word = _word;\n}\n\n@Override\npublic String toString() {\n    return \"Termino =\" + word + \"]\";\n}\n}\n</code></pre>\n\n<p>can someone help me please to return the map?</p>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1690291965,"post_id":76763237,"comment_id":135330703,"body_markdown":"What have you tried? Why didn&#39;t it work? Show us the relevant code and any error messages.","body":"What have you tried? Why didn&#39;t it work? Show us the relevant code and any error messages."}],"answers":[{"comments":[{"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"score":0,"creation_date":1690292724,"post_id":76763299,"comment_id":135330918,"body_markdown":"com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field &quot;data&quot; (class app.Data), not marked as ignorable (0 known properties: ])\n at [Source: (StringReader); line: 1, column: 10] (through reference chain: app.Data[&quot;data&quot;])","body":"com.fasterxml.jackson.databind.exc.UnrecognizedPropertyExcep&zwnj;&#8203;tion: Unrecognized field &quot;data&quot; (class app.Data), not marked as ignorable (0 known properties: ])  at [Source: (StringReader); line: 1, column: 10] (through reference chain: app.Data[&quot;data&quot;])"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690292741,"post_id":76763299,"comment_id":135330926,"body_markdown":"@trilogy Add the relevant Jackson wiring: constructor, getter/setter, etc. This code is just an example.","body":"@trilogy Add the relevant Jackson wiring: constructor, getter/setter, etc. This code is just an example."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690292807,"creation_date":1690292269,"answer_id":76763299,"question_id":76763237,"body_markdown":"You are trying to parse a `List&lt;JobSeeker&gt;`, while your JSON is an *object* with a `data` field that *contains* (what I think is) a `List&lt;JobSeeker&gt;`. So make another wrapper object and parse that instead:\r\n\r\n```\r\nclass Data {\r\n  // constructor, getter/setter and Jackson annotations omitted\r\n  List&lt;JobSeeker&gt; data;\r\n}\r\n```\r\n\r\nthen change the parsing: `objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;Data&gt;(){});`","title":"Getting map from a JSON object with an array using Jackson","body":"<p>You are trying to parse a <code>List&lt;JobSeeker&gt;</code>, while your JSON is an <em>object</em> with a <code>data</code> field that <em>contains</em> (what I think is) a <code>List&lt;JobSeeker&gt;</code>. So make another wrapper object and parse that instead:</p>\n<pre><code>class Data {\n  // constructor, getter/setter and Jackson annotations omitted\n  List&lt;JobSeeker&gt; data;\n}\n</code></pre>\n<p>then change the parsing: <code>objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;Data&gt;(){});</code></p>\n"}],"owner":{"account_id":12824901,"reputation":1708,"user_id":9278333,"display_name":"trilogy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76763299,"answer_count":1,"score":0,"last_activity_date":1690292807,"creation_date":1690291856,"question_id":76763237,"body_markdown":"I&#39;m trying to de-serialize a JSON String that contains an array and multiple levels down. I just want the map of the &quot;attributes&quot; property and the &quot;id&quot;. Here is an example:\r\n\r\n    {\r\n    \t&quot;data&quot;: [\r\n    \t\t{\r\n    \t\t\t&quot;id&quot;: &quot;3252&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;job_seekers&quot;,\r\n    \t\t\t&quot;attributes&quot;: {\r\n    \t\t\t\t&quot;first_name&quot;: &quot;nathan&quot;,\r\n    \t\t\t\t&quot;last_name&quot;: &quot;taylor&quot;,\r\n    \t\t\t\t&quot;full_name&quot;: &quot;nathan taylor&quot;,\r\n    \t\t\t\t&quot;email&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone_iso2&quot;: &quot;CA&quot;,\r\n    \t\t\t\t&quot;date_of_birth&quot;: null,\r\n    \t\t\t\t&quot;summary&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;created_at&quot;: &quot;2023-01-03T17:34:57+00:00&quot;,\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;2023-04-21T19:16:05+00:00&quot;,\r\n    \t\t\t\t&quot;locale&quot;: &quot;en&quot;,\r\n    \t\t\t\t&quot;channel&quot;: &quot;web_traffic_referral&quot;,\r\n    \t\t\t\t&quot;channel_source&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;pipeline_source&quot;: &quot;self_registered&quot;,\r\n    \t\t\t\t&quot;address1&quot;: null,\r\n    \t\t\t\t&quot;address2&quot;: null,\r\n    \t\t\t\t&quot;town&quot;: null,\r\n    \t\t\t\t&quot;country&quot;: null,\r\n    \t\t\t\t&quot;postcode&quot;: null\r\n    \t\t\t},\r\n    \t\t\t&quot;relationships&quot;: {\r\n    \t\t\t\t&quot;answers&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;custom_attributes&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;comments&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t},\r\n    \t\t{\r\n    \t\t\t&quot;id&quot;: &quot;26346&quot;,\r\n    \t\t\t&quot;type&quot;: &quot;job_seekers&quot;,\r\n    \t\t\t&quot;attributes&quot;: {\r\n    \t\t\t\t&quot;first_name&quot;: &quot;spencer&quot;,\r\n    \t\t\t\t&quot;last_name&quot;: &quot;gordon&quot;,\r\n    \t\t\t\t&quot;full_name&quot;: &quot;spencer gordon&quot;,\r\n    \t\t\t\t&quot;email&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;phone_iso2&quot;: &quot;US&quot;,\r\n    \t\t\t\t&quot;date_of_birth&quot;: null,\r\n    \t\t\t\t&quot;summary&quot;: &quot;&quot;,\r\n    \t\t\t\t&quot;created_at&quot;: &quot;2023-01-06T21:52:40+00:00&quot;,\r\n    \t\t\t\t&quot;updated_at&quot;: &quot;2023-04-21T19:16:43+00:00&quot;,\r\n    \t\t\t\t&quot;locale&quot;: &quot;en&quot;,\r\n    \t\t\t\t&quot;channel&quot;: &quot;direct&quot;,\r\n    \t\t\t\t&quot;channel_source&quot;: null,\r\n    \t\t\t\t&quot;pipeline_source&quot;: &quot;self_registered&quot;,\r\n    \t\t\t\t&quot;address1&quot;: null,\r\n    \t\t\t\t&quot;address2&quot;: null,\r\n    \t\t\t\t&quot;town&quot;: null,\r\n    \t\t\t\t&quot;country&quot;: null,\r\n    \t\t\t\t&quot;postcode&quot;: null\r\n    \t\t\t},\r\n    \t\t\t&quot;relationships&quot;: {\r\n    \t\t\t\t&quot;answers&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;custom_attributes&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t},\r\n    \t\t\t\t&quot;comments&quot;: {\r\n    \t\t\t\t\t&quot;meta&quot;: {\r\n    \t\t\t\t\t\t&quot;included&quot;: false\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t],\r\n    \t&quot;meta&quot;: {}\r\n    }\r\n\r\nThis is what I&#39;ve tried:\r\n\r\n\r\n      ObjectMapper objectMapper = new ObjectMapper();\r\n    \r\n    \r\n                    List&lt;JobSeeker&gt; myObjects = objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;List&lt;JobSeeker&gt;&gt;(){});\r\n    \r\n                    for (JobSeeker itr : myObjects)\r\n                    {\r\n                        System.out.println(itr);\r\n                    }\r\n\r\n\r\n\r\nError:\r\n\r\n    SEVERE: null\r\n    com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.ArrayList&lt;app.JobSeeker&gt;` from Object value (token `JsonToken.START_OBJECT`)\r\n     at [Source: (StringReader); line: 1, column: 1]\r\n    \tat com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1752)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1526)\r\n    \tat com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:396)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:252)\r\n    \tat com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\r\n    \tat com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)\r\n    \tat com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3755)\r\n    \tat app.Main.main(Main.java:52)","title":"Getting map from a JSON object with an array using Jackson","body":"<p>I'm trying to de-serialize a JSON String that contains an array and multiple levels down. I just want the map of the &quot;attributes&quot; property and the &quot;id&quot;. Here is an example:</p>\n<pre><code>{\n    &quot;data&quot;: [\n        {\n            &quot;id&quot;: &quot;3252&quot;,\n            &quot;type&quot;: &quot;job_seekers&quot;,\n            &quot;attributes&quot;: {\n                &quot;first_name&quot;: &quot;nathan&quot;,\n                &quot;last_name&quot;: &quot;taylor&quot;,\n                &quot;full_name&quot;: &quot;nathan taylor&quot;,\n                &quot;email&quot;: &quot;&quot;,\n                &quot;phone&quot;: &quot;&quot;,\n                &quot;phone_iso2&quot;: &quot;CA&quot;,\n                &quot;date_of_birth&quot;: null,\n                &quot;summary&quot;: &quot;&quot;,\n                &quot;created_at&quot;: &quot;2023-01-03T17:34:57+00:00&quot;,\n                &quot;updated_at&quot;: &quot;2023-04-21T19:16:05+00:00&quot;,\n                &quot;locale&quot;: &quot;en&quot;,\n                &quot;channel&quot;: &quot;web_traffic_referral&quot;,\n                &quot;channel_source&quot;: &quot;&quot;,\n                &quot;pipeline_source&quot;: &quot;self_registered&quot;,\n                &quot;address1&quot;: null,\n                &quot;address2&quot;: null,\n                &quot;town&quot;: null,\n                &quot;country&quot;: null,\n                &quot;postcode&quot;: null\n            },\n            &quot;relationships&quot;: {\n                &quot;answers&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;custom_attributes&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;comments&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                }\n            }\n        },\n        {\n            &quot;id&quot;: &quot;26346&quot;,\n            &quot;type&quot;: &quot;job_seekers&quot;,\n            &quot;attributes&quot;: {\n                &quot;first_name&quot;: &quot;spencer&quot;,\n                &quot;last_name&quot;: &quot;gordon&quot;,\n                &quot;full_name&quot;: &quot;spencer gordon&quot;,\n                &quot;email&quot;: &quot;&quot;,\n                &quot;phone&quot;: &quot;&quot;,\n                &quot;phone_iso2&quot;: &quot;US&quot;,\n                &quot;date_of_birth&quot;: null,\n                &quot;summary&quot;: &quot;&quot;,\n                &quot;created_at&quot;: &quot;2023-01-06T21:52:40+00:00&quot;,\n                &quot;updated_at&quot;: &quot;2023-04-21T19:16:43+00:00&quot;,\n                &quot;locale&quot;: &quot;en&quot;,\n                &quot;channel&quot;: &quot;direct&quot;,\n                &quot;channel_source&quot;: null,\n                &quot;pipeline_source&quot;: &quot;self_registered&quot;,\n                &quot;address1&quot;: null,\n                &quot;address2&quot;: null,\n                &quot;town&quot;: null,\n                &quot;country&quot;: null,\n                &quot;postcode&quot;: null\n            },\n            &quot;relationships&quot;: {\n                &quot;answers&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;custom_attributes&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                },\n                &quot;comments&quot;: {\n                    &quot;meta&quot;: {\n                        &quot;included&quot;: false\n                    }\n                }\n            }\n        }\n    ],\n    &quot;meta&quot;: {}\n}\n</code></pre>\n<p>This is what I've tried:</p>\n<pre><code>  ObjectMapper objectMapper = new ObjectMapper();\n\n\n                List&lt;JobSeeker&gt; myObjects = objectMapper.readValue(EntityUtils.toString(entity), new TypeReference&lt;List&lt;JobSeeker&gt;&gt;(){});\n\n                for (JobSeeker itr : myObjects)\n                {\n                    System.out.println(itr);\n                }\n</code></pre>\n<p>Error:</p>\n<pre><code>SEVERE: null\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize value of type `java.util.ArrayList&lt;app.JobSeeker&gt;` from Object value (token `JsonToken.START_OBJECT`)\n at [Source: (StringReader); line: 1, column: 1]\n    at com.fasterxml.jackson.databind.exc.MismatchedInputException.from(MismatchedInputException.java:59)\n    at com.fasterxml.jackson.databind.DeserializationContext.reportInputMismatch(DeserializationContext.java:1752)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1526)\n    at com.fasterxml.jackson.databind.DeserializationContext.handleUnexpectedToken(DeserializationContext.java:1473)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.handleNonArray(CollectionDeserializer.java:396)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:252)\n    at com.fasterxml.jackson.databind.deser.std.CollectionDeserializer.deserialize(CollectionDeserializer.java:28)\n    at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:323)\n    at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4825)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3772)\n    at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3755)\n    at app.Main.main(Main.java:52)\n</code></pre>\n"},{"tags":["java","spring","validation","bean-validation","jsr"],"comments":[{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1562949672,"post_id":57010688,"comment_id":100554699,"body_markdown":"can you add the stack trace or fully qualified name of both exceptions","body":"can you add the stack trace or fully qualified name of both exceptions"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1562950993,"post_id":57010688,"comment_id":100555177,"body_markdown":"I checked the root cause in debug mode but it is showing all validated fields in the root cause and the exception is same","body":"I checked the root cause in debug mode but it is showing all validated fields in the root cause and the exception is same"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":1,"creation_date":1562967253,"post_id":57010688,"comment_id":100560559,"body_markdown":"why don&#39;t you add it here","body":"why don&#39;t you add it here"},{"owner":{"account_id":13798611,"reputation":37885,"user_id":9959152,"display_name":"Ryuzaki L"},"score":0,"creation_date":1562968065,"post_id":57010688,"comment_id":100560726,"body_markdown":"and also add the `ClassA` and `ClassB ` with import statements, there is a possibility of  `ConstraintViolationException` which is part of jsr 380","body":"and also add the <code>ClassA</code> and <code>ClassB </code> with import statements, there is a possibility of  <code>ConstraintViolationException</code> which is part of jsr 380"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214612,"post_id":57010688,"comment_id":100618027,"body_markdown":"Exception strace for : javax.validation.ConstraintViolationException: methodName.obj_name.field_name: must not be blank","body":"Exception strace for : javax.validation.ConstraintViolationException: methodName.obj_name.field_name: must not be blank"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214691,"post_id":57010688,"comment_id":100618058,"body_markdown":"Import statements are :","body":"Import statements are :"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214693,"post_id":57010688,"comment_id":100618060,"body_markdown":"import javax.validation.Valid;\nimport javax.validation.constraints.NotBlank;\nimport javax.validation.constraints.NotEmpty;\nimport javax.validation.constraints.Pattern;\nimport javax.validation.constraints.Size;","body":"import javax.validation.Valid; import javax.validation.constraints.NotBlank; import javax.validation.constraints.NotEmpty; import javax.validation.constraints.Pattern; import javax.validation.constraints.Size;"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":0,"creation_date":1563214729,"post_id":57010688,"comment_id":100618078,"body_markdown":"I can not post completed code here","body":"I can not post completed code here"},{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":1,"creation_date":1563216744,"post_id":57010688,"comment_id":100618784,"body_markdown":"@Deadpool : One thing I observed is whenever I add validation groups (eg. @SomeValidation(groups=GroupA.class)) I get ConstraintViolationException and If I remove groups I get MethodArgumentNotValidException","body":"@Deadpool : One thing I observed is whenever I add validation groups (eg. @SomeValidation(groups=GroupA.class)) I get ConstraintViolationException and If I remove groups I get MethodArgumentNotValidException"}],"answers":[{"comments":[{"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"score":2,"creation_date":1562949089,"post_id":57010819,"comment_id":100554445,"body_markdown":"Thank you very much for your quick reply. Even I was under the same assumption but the strange thing is when I move all the validations to service layer, it always throws ConstraintViolationException for all the validations. Not even a single validation throws MethodArgumentNotValidException","body":"Thank you very much for your quick reply. Even I was under the same assumption but the strange thing is when I move all the validations to service layer, it always throws ConstraintViolationException for all the validations. Not even a single validation throws MethodArgumentNotValidException"},{"owner":{"account_id":5225768,"reputation":1139,"user_id":4177869,"accept_rate":50,"display_name":"Mohamed Sweelam"},"score":0,"creation_date":1562949278,"post_id":57010819,"comment_id":100554524,"body_markdown":"As I mentioned in the answer this is thrown from some JPA provider which you are using, Iyou can check that via debugging to see which field exactly is the reason of this? or you can share the code of your model class to see together","body":"As I mentioned in the answer this is thrown from some JPA provider which you are using, Iyou can check that via debugging to see which field exactly is the reason of this? or you can share the code of your model class to see together"}],"tags":[],"owner":{"account_id":5225768,"reputation":1139,"user_id":4177869,"accept_rate":50,"display_name":"Mohamed Sweelam"},"comment_count":2,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1594872395,"creation_date":1562948938,"answer_id":57010819,"question_id":57010688,"body_markdown":"When you use @Valid, you are applying validation which is defined by you on your model class fields, while there are different types of validations, you can choose like @NotNull, @Max, @Min and so on, you will get the matching type. \r\n\r\nIn general, all of these are parallel to **MethodArgumentNotValidException** which will be thrown in all cases.\r\n\r\nFrom official document \r\n&gt; Exception to be thrown when validation on an argument annotated with @Valid fails.\r\n\r\nConstraintViolationException is thrown by hibernate entity manager when some constrain violated, so this means you violated some fields in some entity you are using.","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>When you use @Valid, you are applying validation which is defined by you on your model class fields, while there are different types of validations, you can choose like @NotNull, @Max, @Min and so on, you will get the matching type.</p>\n<p>In general, all of these are parallel to <strong>MethodArgumentNotValidException</strong> which will be thrown in all cases.</p>\n<p>From official document</p>\n<blockquote>\n<p>Exception to be thrown when validation on an argument annotated with @Valid fails.</p>\n</blockquote>\n<p>ConstraintViolationException is thrown by hibernate entity manager when some constrain violated, so this means you violated some fields in some entity you are using.</p>\n"},{"tags":[],"owner":{"account_id":2017799,"reputation":3789,"user_id":1804661,"accept_rate":50,"display_name":"Christopher Yang"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1603137692,"creation_date":1603137692,"answer_id":64434390,"question_id":57010688,"body_markdown":"Take a look at this [article][1]. These exceptions are thrown under different situations when you mix spring&#39;s validation framework with bean validation.\r\n\r\n\r\n  [1]: https://reflectoring.io/bean-validation-with-spring-boot/","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>Take a look at this <a href=\"https://reflectoring.io/bean-validation-with-spring-boot/\" rel=\"noreferrer\">article</a>. These exceptions are thrown under different situations when you mix spring's validation framework with bean validation.</p>\n"},{"tags":[],"owner":{"account_id":14846084,"reputation":230,"user_id":10721364,"display_name":"Hashir Labs"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1690292763,"creation_date":1622893727,"answer_id":67849251,"question_id":57010688,"body_markdown":"For a simple understanding, if validation happens at the controller/service layer by using the `@Valid` annotation, it generates `MethodArgumentNotValidException`. You can add a handler for this and return the response accordingly. This class is part of the Spring framework, and validation is performed by the Spring framework.\r\nSee sample below:\r\n```java\r\n    @ExceptionHandler(MethodArgumentNotValidException.class)\r\n    public ResponseEntity&lt;Response&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\r\n    \r\n        logger.info(&quot;Invalid arguments found : &quot; + ex.getMessage());\r\n        // Get the error messages for invalid fields\r\n        List&lt;FieldError&gt; errors = ex.getBindingResult()\r\n                .getFieldErrors()\r\n                .stream()\r\n                .map(fieldError -&gt; new FieldError(fieldError.getField(), fieldError.getDefaultMessage()))\r\n                .collect(Collectors.toList());\r\n    \r\n        String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\r\n        Response response = new Response(false, message)\r\n                .setErrors(errors);\r\n        ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\r\n        return responseEntity;\r\n    }\r\n```\r\nInstead, if you do not validate using the `@Valid` annotation, an exception is raised by Hibernate at the JPA layer and generates `ConstraintViolationException`. This exception is part of the Javax bean validation framework and raised at the time of performing the persistence operation (before the actual SQL execution).\r\nSee sample below:\r\n```java\r\n    @ExceptionHandler(ConstraintViolationException.class)\r\n        public ResponseEntity&lt;Response&gt; handleConstraintViolationException(ConstraintViolationException ex) {\r\n            List&lt;FieldError&gt; errors = ex.getConstraintViolations()\r\n                    .stream()\r\n                    .map(constraintViolation -&gt; {\r\n                        return new FieldError(constraintViolation.getRootBeanClass().getName() + &quot; &quot; + constraintViolation.getPropertyPath(), constraintViolation.getMessage());\r\n                    })\r\n                    .collect(Collectors.toList());\r\n    \r\n            String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\r\n            Response response = new Response(false, message)\r\n                    .setErrors(errors);\r\n            ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\r\n            return responseEntity;\r\n        }\r\n```","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>For a simple understanding, if validation happens at the controller/service layer by using the <code>@Valid</code> annotation, it generates <code>MethodArgumentNotValidException</code>. You can add a handler for this and return the response accordingly. This class is part of the Spring framework, and validation is performed by the Spring framework.\nSee sample below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ExceptionHandler(MethodArgumentNotValidException.class)\n    public ResponseEntity&lt;Response&gt; handleMethodArgumentNotValidException(MethodArgumentNotValidException ex) {\n    \n        logger.info(&quot;Invalid arguments found : &quot; + ex.getMessage());\n        // Get the error messages for invalid fields\n        List&lt;FieldError&gt; errors = ex.getBindingResult()\n                .getFieldErrors()\n                .stream()\n                .map(fieldError -&gt; new FieldError(fieldError.getField(), fieldError.getDefaultMessage()))\n                .collect(Collectors.toList());\n    \n        String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\n        Response response = new Response(false, message)\n                .setErrors(errors);\n        ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\n        return responseEntity;\n    }\n</code></pre>\n<p>Instead, if you do not validate using the <code>@Valid</code> annotation, an exception is raised by Hibernate at the JPA layer and generates <code>ConstraintViolationException</code>. This exception is part of the Javax bean validation framework and raised at the time of performing the persistence operation (before the actual SQL execution).\nSee sample below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @ExceptionHandler(ConstraintViolationException.class)\n        public ResponseEntity&lt;Response&gt; handleConstraintViolationException(ConstraintViolationException ex) {\n            List&lt;FieldError&gt; errors = ex.getConstraintViolations()\n                    .stream()\n                    .map(constraintViolation -&gt; {\n                        return new FieldError(constraintViolation.getRootBeanClass().getName() + &quot; &quot; + constraintViolation.getPropertyPath(), constraintViolation.getMessage());\n                    })\n                    .collect(Collectors.toList());\n    \n            String message = messageSource.getMessage(&quot;invalid.data.message&quot;, null, LocaleContextHolder.getLocale());\n            Response response = new Response(false, message)\n                    .setErrors(errors);\n            ResponseEntity&lt;Response&gt; responseEntity = ResponseEntity.status(HttpStatus.BAD_REQUEST).body(response);\n            return responseEntity;\n        }\n</code></pre>\n"}],"owner":{"account_id":1415097,"reputation":2637,"user_id":1340910,"accept_rate":72,"display_name":"JOHND"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14512,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"answer_count":3,"score":23,"last_activity_date":1690292763,"creation_date":1562948330,"question_id":57010688,"body_markdown":"When I am validating bean using `@Valid` annotation in `javax.validation`, for some objects I am getting `ConstraintViolationException` and for some I am getting a `MethodArgumentNotValidException`.\r\n\r\nI understand that, if I validate anything in `@ResponseBody` in the controller , it throws a `MethodArgumentNotValidException`.\r\n\r\nBut for some custom validations(eg. `@MyCustomValidation`) at the class level it is throwing `ConstraintViolationException` even if it is being validated in @ResponseValidation.\r\n\r\nAnd for some other custom validation for a different REST endpoint, it throws `MethodArgumentNotValidException`.\r\n\r\nI am finding it a bit difficult to understand its behavior. \r\n\r\n    @PostMapping(path = &quot;/someEndPoint&quot;)\t\r\n\t@Validated(OnASave.class)\r\n\tpublic ResponseEntity&lt;ClassA&gt; saveObjA(@Valid @RequestBody ClassA objA)\r\n\r\n    \r\n\r\n&gt; Result - throws `MethodArgumentNotValidException`\r\n\r\n    @PostMapping(path = &quot;/someOtherEndPoint&quot;)\t\r\n\t@Validated(OnBSave.class)\r\n\tpublic ResponseEntity&lt;ClassB&gt; saveObjB(@Valid @RequestBody ClassB objB)\r\n\r\n&gt; Result - throws `ConstraintViolationException`\r\n\r\nBoth `ClassA` and `ClassB` has custom validations.","title":"What is the difference between ConstraintViolationException and MethodArgumentNotValidException","body":"<p>When I am validating bean using <code>@Valid</code> annotation in <code>javax.validation</code>, for some objects I am getting <code>ConstraintViolationException</code> and for some I am getting a <code>MethodArgumentNotValidException</code>.</p>\n<p>I understand that, if I validate anything in <code>@ResponseBody</code> in the controller , it throws a <code>MethodArgumentNotValidException</code>.</p>\n<p>But for some custom validations(eg. <code>@MyCustomValidation</code>) at the class level it is throwing <code>ConstraintViolationException</code> even if it is being validated in @ResponseValidation.</p>\n<p>And for some other custom validation for a different REST endpoint, it throws <code>MethodArgumentNotValidException</code>.</p>\n<p>I am finding it a bit difficult to understand its behavior.</p>\n<pre><code>@PostMapping(path = &quot;/someEndPoint&quot;)    \n@Validated(OnASave.class)\npublic ResponseEntity&lt;ClassA&gt; saveObjA(@Valid @RequestBody ClassA objA)\n</code></pre>\n<blockquote>\n<p>Result - throws <code>MethodArgumentNotValidException</code></p>\n</blockquote>\n<pre><code>@PostMapping(path = &quot;/someOtherEndPoint&quot;)   \n@Validated(OnBSave.class)\npublic ResponseEntity&lt;ClassB&gt; saveObjB(@Valid @RequestBody ClassB objB)\n</code></pre>\n<blockquote>\n<p>Result - throws <code>ConstraintViolationException</code></p>\n</blockquote>\n<p>Both <code>ClassA</code> and <code>ClassB</code> has custom validations.</p>\n"},{"tags":["java","intellij-idea","cucumber"],"comments":[{"owner":{"account_id":18999437,"reputation":2461,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1690292389,"post_id":76763279,"comment_id":135330831,"body_markdown":"Unfortunately  IntelliJ IDEA, or any other JetBrains product, does not have native support to resolve any file path from within a Gherkin (Cucumber) feature file and can provide navigation to it.","body":"Unfortunately  IntelliJ IDEA, or any other JetBrains product, does not have native support to resolve any file path from within a Gherkin (Cucumber) feature file and can provide navigation to it."}],"answers":[{"comments":[{"owner":{"account_id":3871840,"reputation":5493,"user_id":3206927,"accept_rate":77,"display_name":"sinedsem"},"score":0,"creation_date":1690293216,"post_id":76763356,"comment_id":135331039,"body_markdown":"Thank you, but looks like this is not supported for cucumber file","body":"Thank you, but looks like this is not supported for cucumber file"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690293256,"post_id":76763356,"comment_id":135331052,"body_markdown":"Sorry to hear that. You could always try writing your own IntelliJ plugin ;-)","body":"Sorry to hear that. You could always try writing your own IntelliJ plugin ;-)"}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690292642,"creation_date":1690292642,"answer_id":76763356,"question_id":76763279,"body_markdown":"There is a feature in IntelliJ that may help you, although I&#39;m not sure if it&#39;s supported on Cucumber files. Try it out by putting your cursor in the string, then selecting the action (Ctrl-shift-A in my keymap): &quot;Inject language or reference&quot;, and selecting &quot;File reference&quot;:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DVPIJ.png","title":"Can Intellij IDEA navigate from cucumber feature file to file from resources mentioned in step?","body":"<p>There is a feature in IntelliJ that may help you, although I'm not sure if it's supported on Cucumber files. Try it out by putting your cursor in the string, then selecting the action (Ctrl-shift-A in my keymap): &quot;Inject language or reference&quot;, and selecting &quot;File reference&quot;:</p>\n<p><a href=\"https://i.stack.imgur.com/DVPIJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DVPIJ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":3871840,"reputation":5493,"user_id":3206927,"accept_rate":77,"display_name":"sinedsem"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690292642,"creation_date":1690292155,"question_id":76763279,"body_markdown":"My input data for cucumber tests is big enough, so I moved that to external files in resources.\r\n\r\nSo my feature file looks like: \r\n\r\n    Given I have a file located at &quot;classpath:example.txt&quot;\r\n    When read the file\r\n    Then ...\r\n\r\nAny change IDEA can understand that my argument is a reference to file and help me to navigate to it?\r\n\r\n\r\n\r\n\r\n","title":"Can Intellij IDEA navigate from cucumber feature file to file from resources mentioned in step?","body":"<p>My input data for cucumber tests is big enough, so I moved that to external files in resources.</p>\n<p>So my feature file looks like:</p>\n<pre><code>Given I have a file located at &quot;classpath:example.txt&quot;\nWhen read the file\nThen ...\n</code></pre>\n<p>Any change IDEA can understand that my argument is a reference to file and help me to navigate to it?</p>\n"},{"tags":["java","spring","spring-boot","spring-security","auth0"],"comments":[{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":1,"creation_date":1631113610,"post_id":69105077,"comment_id":122137517,"body_markdown":"Does this help https://stackoverflow.com/questions/62249978/how-to-secure-apis-with-resourceserver-implementation-with-multiple-resource-ids/64666011#64666011","body":"Does this help <a href=\"https://stackoverflow.com/questions/62249978/how-to-secure-apis-with-resourceserver-implementation-with-multiple-resource-ids/64666011#64666011\" title=\"how to secure apis with resourceserver implementation with multiple resource ids\">stackoverflow.com/questions/62249978/&hellip;</a>"},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1631117687,"post_id":69105077,"comment_id":122139287,"body_markdown":"Thank you so much for the response. I&#39;m not sure if you would know but how could i make my jwtDecoder() work with this approach? thank you again!","body":"Thank you so much for the response. I&#39;m not sure if you would know but how could i make my jwtDecoder() work with this approach? thank you again!"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1631175093,"post_id":69105077,"comment_id":122153302,"body_markdown":"You could use an `AuthenticationManagerResolver` that resolves to different `JwtAuthenticationProviders`, each with a different `JwtDecoder`. See this [example](https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/oauth2/resource-server/multi-tenancy/src/main/java/example/OAuth2ResourceServerSecurityConfiguration.java). The approach would be very similar, except instead of a `OpaqueTokenIntrospector`, you would have 2 `JwtDecoder`.","body":"You could use an <code>AuthenticationManagerResolver</code> that resolves to different <code>JwtAuthenticationProviders</code>, each with a different <code>JwtDecoder</code>. See this <a href=\"https://github.com/spring-projects/spring-security-samples/blob/main/servlet/spring-boot/java/oauth2/resource-server/multi-tenancy/src/main/java/example/OAuth2ResourceServerSecurityConfiguration.java\" rel=\"nofollow noreferrer\">example</a>. The approach would be very similar, except instead of a <code>OpaqueTokenIntrospector</code>, you would have 2 <code>JwtDecoder</code>."},{"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"score":0,"creation_date":1631565984,"post_id":69105077,"comment_id":122251980,"body_markdown":"Thank you for the response Eleftheria!! Sorry dog had an accident needing surgery so I&#39;m only back at the computer now. \n\nI&#39;m having some issues with parts of that code example (probably more on the understanding) would you mind if i updated my main question and see if you can still help? thanks again!!","body":"Thank you for the response Eleftheria!! Sorry dog had an accident needing surgery so I&#39;m only back at the computer now.   I&#39;m having some issues with parts of that code example (probably more on the understanding) would you mind if i updated my main question and see if you can still help? thanks again!!"},{"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"score":0,"creation_date":1631605830,"post_id":69105077,"comment_id":122260570,"body_markdown":"Feel free to update the question with what you have tried, or open a new question if it&#39;s not directly related.","body":"Feel free to update the question with what you have tried, or open a new question if it&#39;s not directly related."},{"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"score":0,"creation_date":1646075718,"post_id":69105077,"comment_id":126030439,"body_markdown":"@EleftheriaStein-Kousathana is there an example where two &quot;issuer-uri&quot; are used? Thank you!","body":"@EleftheriaStein-Kousathana is there an example where two &quot;issuer-uri&quot; are used? Thank you!"},{"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"score":0,"creation_date":1646252456,"post_id":69105077,"comment_id":126080102,"body_markdown":"I have posted a working solution below","body":"I have posted a working solution below"}],"answers":[{"comments":[{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":1,"creation_date":1646990264,"post_id":71328679,"comment_id":126264990,"body_markdown":"II have tried this approach but i receive an error  Error creating bean with name &#39;springSecurityFilterChain&#39; ... AuthenticationManager is required ... any clue on this","body":"II have tried this approach but i receive an error  Error creating bean with name &#39;springSecurityFilterChain&#39; ... AuthenticationManager is required ... any clue on this"},{"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"score":0,"creation_date":1648224919,"post_id":71328679,"comment_id":126578427,"body_markdown":"@simonC It&#39;s not enough information to give you a direct answer. Your code is probably missing creating of AuthenticationManagerResolver that defined AuthenticationManagers. Please, look at my project from GitHub, I suggest downloading it and compare the Spring configuring with yours.","body":"@simonC It&#39;s not enough information to give you a direct answer. Your code is probably missing creating of AuthenticationManagerResolver that defined AuthenticationManagers. Please, look at my project from GitHub, I suggest downloading it and compare the Spring configuring with yours."}],"tags":[],"owner":{"account_id":745399,"reputation":872,"user_id":731938,"display_name":"Igor Kanshyn"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1646252406,"creation_date":1646252406,"answer_id":71328679,"question_id":69105077,"body_markdown":"I have struggled with this issue for a bit a well. \r\n\r\nThe code below works with several issues (user pools). It&#39;s an alternative to one *spring.security.oauth2.resourceserver.jwt.issuer-uri* property\r\n\r\n\r\nPlease, look at the code for SpringSecurity configuration:\r\n```\r\n\r\n@Component\r\n@ConfigurationProperties(prefix = &quot;config&quot;)\r\nclass JWTIssuersProps {\r\n    private List&lt;String&gt; issuers;\r\n\r\n    // getter and setter\r\n    public List&lt;String&gt; getIssuers() {\r\n        return issuers;\r\n    }\r\n\r\n    public void setIssuers(List&lt;String&gt; issuers) {\r\n        this.issuers = issuers;\r\n    }\r\n}\r\n\r\n@Configuration\r\npublic class JWTCustomSecurityConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private JWTIssuersProps props;\r\n\r\n    Map&lt;String, AuthenticationManager&gt; authenticationManagers = new HashMap&lt;&gt;();\r\n\r\n    JwtIssuerAuthenticationManagerResolver authenticationManagerResolver =\r\n            new JwtIssuerAuthenticationManagerResolver(authenticationManagers::get);\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        List&lt;String&gt; propsIssuers = props.getIssuers();\r\n        propsIssuers.forEach(issuer -&gt; addManager(authenticationManagers, issuer));\r\n\r\n        http.\r\n                // CORS configuration\r\n                cors().configurationSource(request -&gt; {\r\n                    var cors = new CorsConfiguration();\r\n                    cors.setAllowedOrigins(List.of(&quot;http://localhost:3000&quot;));\r\n                    cors.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\r\n                    cors.setAllowedHeaders(List.of(&quot;*&quot;));\r\n                    return cors;\r\n                })\r\n\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/actuator/**&quot;).permitAll()\r\n                .and()\r\n                .oauth2ResourceServer(oauth2ResourceServer -&gt; {\r\n                    oauth2ResourceServer.authenticationManagerResolver(this.authenticationManagerResolver);\r\n                });\r\n    }\r\n\r\n    public void addManager(Map&lt;String, AuthenticationManager&gt; authenticationManagers, String issuer) {\r\n        JwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        JwtAuthenticationProvider authenticationProvider = new JwtAuthenticationProvider(jwtDecoder);\r\n        authenticationProvider.setJwtAuthenticationConverter(new MyJwtAuthenticationConverter());\r\n        authenticationManagers.put(issuer, authenticationProvider::authenticate);\r\n    }\r\n\r\n    static class MyJwtAuthenticationConverter extends JwtAuthenticationConverter {\r\n        @Override\r\n        protected Collection&lt;GrantedAuthority&gt; extractAuthorities(final Jwt jwt) {\r\n            List&lt;String&gt; groups = jwt.getClaim(&quot;cognito:groups&quot;);\r\n\r\n            System.out.println(&quot;User groups list.size =&quot; + groups.size());\r\n            System.out.println(&quot;User groups:&quot;);\r\n            groups.forEach(System.out::println);\r\n\r\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\r\n            for (String role : groups) {\r\n                authorities.add(new SimpleGrantedAuthority(role));\r\n            }\r\n            return authorities;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nIt expects application.yaml file:\r\n```\r\nconfig:\r\n  issuers:\r\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-1&gt;\r\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-2&gt;\r\n```\r\n\r\nI also have CORS configuration there. And read Amazon Cognito groups.\r\n\r\nYou can find the full project source code here: https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java","title":"Spring Boot - Support multiple issuer-uri","body":"<p>I have struggled with this issue for a bit a well.</p>\n<p>The code below works with several issues (user pools). It's an alternative to one <em>spring.security.oauth2.resourceserver.jwt.issuer-uri</em> property</p>\n<p>Please, look at the code for SpringSecurity configuration:</p>\n<pre><code>\n@Component\n@ConfigurationProperties(prefix = &quot;config&quot;)\nclass JWTIssuersProps {\n    private List&lt;String&gt; issuers;\n\n    // getter and setter\n    public List&lt;String&gt; getIssuers() {\n        return issuers;\n    }\n\n    public void setIssuers(List&lt;String&gt; issuers) {\n        this.issuers = issuers;\n    }\n}\n\n@Configuration\npublic class JWTCustomSecurityConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private JWTIssuersProps props;\n\n    Map&lt;String, AuthenticationManager&gt; authenticationManagers = new HashMap&lt;&gt;();\n\n    JwtIssuerAuthenticationManagerResolver authenticationManagerResolver =\n            new JwtIssuerAuthenticationManagerResolver(authenticationManagers::get);\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        List&lt;String&gt; propsIssuers = props.getIssuers();\n        propsIssuers.forEach(issuer -&gt; addManager(authenticationManagers, issuer));\n\n        http.\n                // CORS configuration\n                cors().configurationSource(request -&gt; {\n                    var cors = new CorsConfiguration();\n                    cors.setAllowedOrigins(List.of(&quot;http://localhost:3000&quot;));\n                    cors.setAllowedMethods(List.of(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));\n                    cors.setAllowedHeaders(List.of(&quot;*&quot;));\n                    return cors;\n                })\n\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/actuator/**&quot;).permitAll()\n                .and()\n                .oauth2ResourceServer(oauth2ResourceServer -&gt; {\n                    oauth2ResourceServer.authenticationManagerResolver(this.authenticationManagerResolver);\n                });\n    }\n\n    public void addManager(Map&lt;String, AuthenticationManager&gt; authenticationManagers, String issuer) {\n        JwtDecoder jwtDecoder = JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        JwtAuthenticationProvider authenticationProvider = new JwtAuthenticationProvider(jwtDecoder);\n        authenticationProvider.setJwtAuthenticationConverter(new MyJwtAuthenticationConverter());\n        authenticationManagers.put(issuer, authenticationProvider::authenticate);\n    }\n\n    static class MyJwtAuthenticationConverter extends JwtAuthenticationConverter {\n        @Override\n        protected Collection&lt;GrantedAuthority&gt; extractAuthorities(final Jwt jwt) {\n            List&lt;String&gt; groups = jwt.getClaim(&quot;cognito:groups&quot;);\n\n            System.out.println(&quot;User groups list.size =&quot; + groups.size());\n            System.out.println(&quot;User groups:&quot;);\n            groups.forEach(System.out::println);\n\n            List&lt;GrantedAuthority&gt; authorities = new ArrayList&lt;&gt;();\n            for (String role : groups) {\n                authorities.add(new SimpleGrantedAuthority(role));\n            }\n            return authorities;\n        }\n    }\n}\n</code></pre>\n<p>It expects application.yaml file:</p>\n<pre><code>config:\n  issuers:\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-1&gt;\n  - https://cognito-idp.ca-central-1.amazonaws.com/&lt;pool-ID-2&gt;\n</code></pre>\n<p>I also have CORS configuration there. And read Amazon Cognito groups.</p>\n<p>You can find the full project source code here: <a href=\"https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java\" rel=\"noreferrer\">https://github.com/grenader/spring-security-cognito-oauth2-jwt/tree/java</a></p>\n"},{"tags":[],"owner":{"account_id":2921381,"reputation":486,"user_id":2503544,"display_name":"Mohammad Sadegh Rafiei"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1682491250,"creation_date":1682253939,"answer_id":76084924,"question_id":69105077,"body_markdown":"You can use this Implementation for multiple issuer support in Spring boot 2.7.10. auth-servers urls at this sample are equals to bellows urls.\r\n\r\n    http://localhost:9292/auth/realms/sso\r\n    http://www.auth-server.org:9292/auth/realms/sso\r\n    http://127.0.0.1:9292/auth/realms/sso\r\n\r\nalso this is my application.properties configuration\r\n\r\n    spring.security.oauth2.client.registration.keycloak.client-id=sample-client\r\n    spring.security.oauth2.client.provider.keycloak.authorization-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/auth\r\n    spring.security.oauth2.client.provider.keycloak.token-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/token\r\n    spring.security.oauth2.client.registration.keycloak.redirect-uri=http://localhost:8080/login/oauth2/code/sample-client\r\n    spring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\r\n    spring.security.oauth2.client.registration.keycloak.scope=openid\r\n\r\nThis class just is a simple configuration.\r\n\r\n    @Configuration\r\n    public class ClientSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n       @Override\r\n       public void configure(HttpSecurity http) throws Exception {\r\n           // @formatter:off\r\n           http.authorizeHttpRequests()\r\n                   .anyRequest()\r\n                   .authenticated();\r\n           http.oauth2Login();\r\n           http.oauth2ResourceServer(httpSecurity -&gt; httpSecurity.jwt(\r\n                   jwtConfigurer -&gt; jwtConfigurer.decoder(CustomJwtDecoder::getJwt)\r\n           ));\r\n           // @formatter:on\r\n        }\r\n    }\r\n\r\nand to support multiple issuers, write two class CustomJwtDecoder and CustomJwtDecoderFactory that implements in order two interfaces JwtDecoder and JwtDecoderFactory&lt;ClientRegistration&gt;.\r\n\r\nimplementation of these two class:\r\n\r\n    @Component\r\n    public class CustomJwtDecoder implements JwtDecoder {\r\n\r\n        @Override\r\n        public Jwt decode(String token) throws JwtException {\r\n            return getJwt(token);\r\n        }\r\n    \r\n        public static Jwt getJwt(String token) {\r\n            Jwt result = null;\r\n            JwtDecoder jdLocal =     JwtDecoders.fromIssuerLocation(&quot;http://localhost:9292/auth/realms/sso&quot;);\r\n            JwtDecoder jdDomain = JwtDecoders.fromIssuerLocation(&quot;http://www.auth-server.org:9292/auth/realms/sso&quot;);\r\n            JwtDecoder jdIp = JwtDecoders.fromIssuerLocation(&quot;http://127.0.0.1:9292/auth/realms/sso&quot;);\r\n            try { result = jdLocal.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            try { result = jdDomain.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            try { result = jdIp.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\r\n            return result;\r\n        }\r\n    }\r\nand this class\r\n\r\n\r\n    @Component\r\n    public class CustomJwtDecoderFactory implements JwtDecoderFactory&lt;ClientRegistration&gt; {\r\n        @Override\r\n        public JwtDecoder createDecoder(ClientRegistration context) {\r\n            return CustomJwtDecoder::getJwt;\r\n        }\r\n    }\r\n","title":"Spring Boot - Support multiple issuer-uri","body":"<p>You can use this Implementation for multiple issuer support in Spring boot 2.7.10. auth-servers urls at this sample are equals to bellows urls.</p>\n<pre><code>http://localhost:9292/auth/realms/sso\nhttp://www.auth-server.org:9292/auth/realms/sso\nhttp://127.0.0.1:9292/auth/realms/sso\n</code></pre>\n<p>also this is my application.properties configuration</p>\n<pre><code>spring.security.oauth2.client.registration.keycloak.client-id=sample-client\nspring.security.oauth2.client.provider.keycloak.authorization-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/auth\nspring.security.oauth2.client.provider.keycloak.token-uri=http://www.auth-server.org:9292/auth/realms/sso/protocol/openid-connect/token\nspring.security.oauth2.client.registration.keycloak.redirect-uri=http://localhost:8080/login/oauth2/code/sample-client\nspring.security.oauth2.client.registration.keycloak.authorization-grant-type=authorization_code\nspring.security.oauth2.client.registration.keycloak.scope=openid\n</code></pre>\n<p>This class just is a simple configuration.</p>\n<pre><code>@Configuration\npublic class ClientSecurityConfig extends WebSecurityConfigurerAdapter {\n\n   @Override\n   public void configure(HttpSecurity http) throws Exception {\n       // @formatter:off\n       http.authorizeHttpRequests()\n               .anyRequest()\n               .authenticated();\n       http.oauth2Login();\n       http.oauth2ResourceServer(httpSecurity -&gt; httpSecurity.jwt(\n               jwtConfigurer -&gt; jwtConfigurer.decoder(CustomJwtDecoder::getJwt)\n       ));\n       // @formatter:on\n    }\n}\n</code></pre>\n<p>and to support multiple issuers, write two class CustomJwtDecoder and CustomJwtDecoderFactory that implements in order two interfaces JwtDecoder and JwtDecoderFactory.</p>\n<p>implementation of these two class:</p>\n<pre><code>@Component\npublic class CustomJwtDecoder implements JwtDecoder {\n\n    @Override\n    public Jwt decode(String token) throws JwtException {\n        return getJwt(token);\n    }\n\n    public static Jwt getJwt(String token) {\n        Jwt result = null;\n        JwtDecoder jdLocal =     JwtDecoders.fromIssuerLocation(&quot;http://localhost:9292/auth/realms/sso&quot;);\n        JwtDecoder jdDomain = JwtDecoders.fromIssuerLocation(&quot;http://www.auth-server.org:9292/auth/realms/sso&quot;);\n        JwtDecoder jdIp = JwtDecoders.fromIssuerLocation(&quot;http://127.0.0.1:9292/auth/realms/sso&quot;);\n        try { result = jdLocal.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        try { result = jdDomain.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        try { result = jdIp.decode(token); } catch (Exception ex) { ex.printStackTrace(); }\n        return result;\n    }\n}\n</code></pre>\n<p>and this class</p>\n<pre><code>@Component\npublic class CustomJwtDecoderFactory implements JwtDecoderFactory&lt;ClientRegistration&gt; {\n    @Override\n    public JwtDecoder createDecoder(ClientRegistration context) {\n        return CustomJwtDecoder::getJwt;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1972832,"reputation":378,"user_id":1771344,"accept_rate":75,"display_name":"MetaCoder"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9203,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":2,"score":9,"last_activity_date":1690292539,"creation_date":1631111834,"question_id":69105077,"body_markdown":"Hi, I&#39;ve been searching the web with very little success and I&#39;m hoping someone here at SO might be able to help.\r\n\r\nCurrently I have my Spring Boot API&#39;s (Version 2.5.4) accepting a JWT which is provided by Auth0. Now I&#39;ve created a second tenant there and I&#39;m struggling to understand how I can support two or more  issuer-uri&#39;s. \r\n\r\nHere is how I&#39;m currently doing it:\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = false)\r\n@EnableGlobalMethodSecurity(\r\n        securedEnabled = true,\r\n        jsr250Enabled = true,\r\n        prePostEnabled = true\r\n)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Value(&quot;${auth0.audience}&quot;)\r\n    private String audience;\r\n\r\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\r\n    private String issuer;\r\n\r\n    @Bean\r\n    CorsConfigurationSource corsConfigurationSource() {\r\n        CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3010&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        configuration.addAllowedHeader(&quot;Authorization&quot;);\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http\r\n                .cors()\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .headers().referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.SAME_ORIGIN)\r\n                .and()\r\n                .xssProtection()\r\n                .and()\r\n                .contentSecurityPolicy(&quot;script-src &#39;self&#39;&quot;).and()\r\n                .and()\r\n                .csrf()\r\n                .disable()\r\n                .formLogin()\r\n                .disable()\r\n                .httpBasic()\r\n                .disable()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(new RestAuthenticationEntryPoint())\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/api/v1/user/profile/**&quot;).permitAll()\r\n                .antMatchers(&quot;/user/profile/**&quot;).permitAll()\r\n                .antMatchers(&quot;/swagger-resources/**&quot;).permitAll()        \r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2ResourceServer().jwt();\r\n    }\r\n\r\n    @Override\r\n    public void configure(WebSecurity web) throws Exception {\r\n        web.ignoring().antMatchers(&quot;/health&quot;, &quot;/health/**&quot;);\r\n    }\r\n\r\n    @Bean\r\n    JwtDecoder jwtDecoder() {\r\n        /*\r\n        By default, Spring Security does not validate the &quot;aud&quot; claim of the token, to ensure that this token is\r\n        indeed intended for our app. Adding our own validator is easy to do:\r\n        */\r\n\r\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\r\n                JwtDecoders.fromOidcIssuerLocation(issuer);\r\n\r\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\r\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\r\n\r\n        jwtDecoder.setJwtValidator(withAudience);\r\n\r\n        return jwtDecoder;\r\n    }\r\n}\r\n```\r\n\r\nCan anyone shed some light, with Node I can just set the issuer-uri to be a String array and it works out of the box. Hoping there is something similar in Spring?\r\n\r\nEDIT:\r\nIn case needed here is my build file for versions:\r\n\r\n```\r\nplugins {\r\n    id &quot;org.springframework.boot&quot; version &quot;2.5.4&quot;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n    id &#39;java&#39;\r\n    id &quot;com.github.davidmc24.gradle.plugin.avro&quot; version &quot;1.2.0&quot;\r\n    id &quot;idea&quot;\r\n    id &#39;com.google.cloud.tools.jib&#39; version &#39;3.0.0&#39;\r\n}\r\n\r\n\r\napply plugin: &#39;idea&#39;\r\n\r\ngroup &#39;org.example&#39;\r\nversion &#39;1.0&#39;\r\n\r\n\r\njava {\r\n    sourceCompatibility = JavaVersion.VERSION_14\r\n    targetCompatibility = JavaVersion.VERSION_14\r\n}\r\n\r\n\r\njib.from.image = &#39;openjdk:15-jdk-buster&#39;\r\njib.to.image = &#39;gcr.io/thefullstack/tfs-project-service&#39;\r\n\r\next {\r\n    avroVersion = &quot;1.10.1&quot;\r\n}\r\n\r\nrepositories {\r\n    mavenCentral()\r\n    jcenter()\r\n    maven {\r\n        url &quot;https://packages.confluent.io/maven/&quot;\r\n    }\r\n}\r\n\r\navro {\r\n    createSetters = true\r\n    fieldVisibility = &quot;PRIVATE&quot;\r\n}\r\n\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-data-elasticsearch&#39;)\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-data-mongodb&#39;\r\n    implementation group: &#39;org.springframework.data&#39;, name: &#39;spring-data-elasticsearch&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-security&#39;\r\n    implementation group: &#39;org.springframework.security&#39;, name: &#39;spring-security-oauth2-client&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-validation&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-oauth2-resource-server&#39;\r\n    implementation group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-cache&#39;\r\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\r\n    implementation group: &#39;org.springframework.integration&#39;, name: &#39;spring-integration-core&#39;, version: &#39;5.5.3&#39;\r\n\r\n\r\n//    implementation group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-logging&#39;\r\n    implementation group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-logging&#39;, version: &#39;1.2.8.RELEASE&#39;\r\n    implementation(&quot;org.springframework.cloud:spring-cloud-gcp-starter-pubsub:1.2.5.RELEASE&quot;)\r\n    implementation(&quot;org.springframework.integration:spring-integration-core&quot;)\r\n\r\n\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk&#39;, version: &#39;1.11.860&#39;\r\n    implementation group: &#39;com.mashape.unirest&#39;, name: &#39;unirest-java&#39;, version: &#39;1.4.9&#39;\r\n\r\n    implementation group: &#39;javax.validation&#39;, name: &#39;validation-api&#39;, version: &#39;2.0.1.Final&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.datatype&#39;, name: &#39;jackson-datatype-jsr310&#39;, version: &#39;2.12.3&#39;\r\n    implementation group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-core&#39;, version: &#39;2.12.3&#39;\r\n    implementation group: &#39;io.jsonwebtoken&#39;, name: &#39;jjwt&#39;, version: &#39;0.9.1&#39;\r\n    implementation group: &#39;org.openapitools&#39;, name: &#39;jackson-databind-nullable&#39;, version: &#39;0.2.1&#39;\r\n\r\n    implementation group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.6&#39;\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-collections4&#39;, version: &#39;4.4&#39;\r\n    implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.11&#39;\r\n\r\n    implementation group: &#39;com.auth0&#39;, name: &#39;java-jwt&#39;, version: &#39;3.12.0&#39;\r\n    implementation &quot;org.apache.avro:avro:1.10.1&quot;\r\n    implementation &quot;org.apache.avro:avro:${avroVersion}&quot;\r\n\r\n    implementation &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n\r\n    implementation &#39;com.amazonaws:aws-java-sdk-s3&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\r\n    testImplementation group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;\r\n    testImplementation &#39;org.projectlombok:lombok:1.18.20&#39;\r\n    testAnnotationProcessor &#39;org.projectlombok:lombok:1.18.20&#39;\r\n\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n        exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n    }\r\n}\r\n```","title":"Spring Boot - Support multiple issuer-uri","body":"<p>Hi, I've been searching the web with very little success and I'm hoping someone here at SO might be able to help.</p>\n<p>Currently I have my Spring Boot API's (Version 2.5.4) accepting a JWT which is provided by Auth0. Now I've created a second tenant there and I'm struggling to understand how I can support two or more  issuer-uri's.</p>\n<p>Here is how I'm currently doing it:</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = false)\n@EnableGlobalMethodSecurity(\n        securedEnabled = true,\n        jsr250Enabled = true,\n        prePostEnabled = true\n)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Value(&quot;${auth0.audience}&quot;)\n    private String audience;\n\n    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)\n    private String issuer;\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(&quot;http://localhost:3010&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;));\n        configuration.setAllowCredentials(true);\n        configuration.addAllowedHeader(&quot;Authorization&quot;);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http\n                .cors()\n                .and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .headers().referrerPolicy(ReferrerPolicyHeaderWriter.ReferrerPolicy.SAME_ORIGIN)\n                .and()\n                .xssProtection()\n                .and()\n                .contentSecurityPolicy(&quot;script-src 'self'&quot;).and()\n                .and()\n                .csrf()\n                .disable()\n                .formLogin()\n                .disable()\n                .httpBasic()\n                .disable()\n                .exceptionHandling()\n                .authenticationEntryPoint(new RestAuthenticationEntryPoint())\n                .and()\n                .authorizeRequests()\n                .antMatchers(&quot;/api/v1/user/profile/**&quot;).permitAll()\n                .antMatchers(&quot;/user/profile/**&quot;).permitAll()\n                .antMatchers(&quot;/swagger-resources/**&quot;).permitAll()        \n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2ResourceServer().jwt();\n    }\n\n    @Override\n    public void configure(WebSecurity web) throws Exception {\n        web.ignoring().antMatchers(&quot;/health&quot;, &quot;/health/**&quot;);\n    }\n\n    @Bean\n    JwtDecoder jwtDecoder() {\n        /*\n        By default, Spring Security does not validate the &quot;aud&quot; claim of the token, to ensure that this token is\n        indeed intended for our app. Adding our own validator is easy to do:\n        */\n\n        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)\n                JwtDecoders.fromOidcIssuerLocation(issuer);\n\n        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator = new AudienceValidator(audience);\n        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);\n        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);\n\n        jwtDecoder.setJwtValidator(withAudience);\n\n        return jwtDecoder;\n    }\n}\n</code></pre>\n<p>Can anyone shed some light, with Node I can just set the issuer-uri to be a String array and it works out of the box. Hoping there is something similar in Spring?</p>\n<p>EDIT:\nIn case needed here is my build file for versions:</p>\n<pre><code>plugins {\n    id &quot;org.springframework.boot&quot; version &quot;2.5.4&quot;\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n    id &quot;com.github.davidmc24.gradle.plugin.avro&quot; version &quot;1.2.0&quot;\n    id &quot;idea&quot;\n    id 'com.google.cloud.tools.jib' version '3.0.0'\n}\n\n\napply plugin: 'idea'\n\ngroup 'org.example'\nversion '1.0'\n\n\njava {\n    sourceCompatibility = JavaVersion.VERSION_14\n    targetCompatibility = JavaVersion.VERSION_14\n}\n\n\njib.from.image = 'openjdk:15-jdk-buster'\njib.to.image = 'gcr.io/thefullstack/tfs-project-service'\n\next {\n    avroVersion = &quot;1.10.1&quot;\n}\n\nrepositories {\n    mavenCentral()\n    jcenter()\n    maven {\n        url &quot;https://packages.confluent.io/maven/&quot;\n    }\n}\n\navro {\n    createSetters = true\n    fieldVisibility = &quot;PRIVATE&quot;\n}\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-data-elasticsearch')\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-data-mongodb'\n    implementation group: 'org.springframework.data', name: 'spring-data-elasticsearch'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-security'\n    implementation group: 'org.springframework.security', name: 'spring-security-oauth2-client'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-validation'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-oauth2-resource-server'\n    implementation group: 'org.springframework.boot', name: 'spring-boot-starter-cache'\n    implementation(&quot;org.springframework.boot:spring-boot-starter-actuator&quot;)\n    implementation group: 'org.springframework.integration', name: 'spring-integration-core', version: '5.5.3'\n\n\n//    implementation group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-logging'\n    implementation group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-logging', version: '1.2.8.RELEASE'\n    implementation(&quot;org.springframework.cloud:spring-cloud-gcp-starter-pubsub:1.2.5.RELEASE&quot;)\n    implementation(&quot;org.springframework.integration:spring-integration-core&quot;)\n\n\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk', version: '1.11.860'\n    implementation group: 'com.mashape.unirest', name: 'unirest-java', version: '1.4.9'\n\n    implementation group: 'javax.validation', name: 'validation-api', version: '2.0.1.Final'\n    implementation group: 'com.fasterxml.jackson.datatype', name: 'jackson-datatype-jsr310', version: '2.12.3'\n    implementation group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.12.3'\n    implementation group: 'io.jsonwebtoken', name: 'jjwt', version: '0.9.1'\n    implementation group: 'org.openapitools', name: 'jackson-databind-nullable', version: '0.2.1'\n\n    implementation group: 'commons-io', name: 'commons-io', version: '2.6'\n    implementation group: 'org.apache.commons', name: 'commons-collections4', version: '4.4'\n    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.11'\n\n    implementation group: 'com.auth0', name: 'java-jwt', version: '3.12.0'\n    implementation &quot;org.apache.avro:avro:1.10.1&quot;\n    implementation &quot;org.apache.avro:avro:${avroVersion}&quot;\n\n    implementation 'org.projectlombok:lombok:1.18.20'\n    annotationProcessor 'org.projectlombok:lombok:1.18.20'\n\n    implementation 'com.amazonaws:aws-java-sdk-s3'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n\n    testImplementation group: 'junit', name: 'junit', version: '4.12'\n    testImplementation 'org.projectlombok:lombok:1.18.20'\n    testAnnotationProcessor 'org.projectlombok:lombok:1.18.20'\n\n    testImplementation('org.springframework.boot:spring-boot-starter-test') {\n        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n    }\n}\n</code></pre>\n"},{"tags":["java","date","calendar","timezone"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1690314939,"post_id":12487125,"comment_id":135335604,"body_markdown":"**Update:** The code here uses terrible date-time classes that were years ago supplanted by the *java.time* classes defined in JSR 310. For a modern solution, see the [Answer by Ole V.V.](https://stackoverflow.com/a/46011166/642706)","body":"<b>Update:</b> The code here uses terrible date-time classes that were years ago supplanted by the <i>java.time</i> classes defined in JSR 310. For a modern solution, see the <a href=\"https://stackoverflow.com/a/46011166/642706\">Answer by Ole V.V.</a>"}],"answers":[{"comments":[{"owner":{"account_id":932593,"reputation":3291,"user_id":962146,"accept_rate":58,"display_name":"Android Noob"},"score":7,"creation_date":1348077966,"post_id":12487281,"comment_id":16822019,"body_markdown":"Cool it actually worked.  I was able to get the Android device&#39;s default timezone by calling TimeZone.getDefault().","body":"Cool it actually worked.  I was able to get the Android device&#39;s default timezone by calling TimeZone.getDefault()."},{"owner":{"account_id":9303469,"reputation":763,"user_id":6908100,"display_name":"dara"},"score":0,"creation_date":1550585161,"post_id":12487281,"comment_id":96316315,"body_markdown":"it is not changing, it is same as UTC time, what can i do ?","body":"it is not changing, it is same as UTC time, what can i do ?"},{"owner":{"account_id":2576749,"reputation":2384,"user_id":2234250,"accept_rate":65,"display_name":"Tung Vo"},"score":1,"creation_date":1659430518,"post_id":12487281,"comment_id":129287170,"body_markdown":"this post not answer the question","body":"this post not answer the question"}],"tags":[],"owner":{"account_id":12404,"reputation":62016,"user_id":24396,"accept_rate":74,"display_name":"Steve Kuo"},"comment_count":3,"down_vote_count":2,"up_vote_count":78,"is_accepted":true,"score":76,"last_activity_date":1348017176,"creation_date":1348017176,"answer_id":12487281,"question_id":12487125,"body_markdown":"`Date` has no timezone and internally stores in UTC. Only when a date is formatted is the timezone correction applies. When using a `DateFormat`, it defaults to the timezone of the JVM it&#39;s running in. Use `setTimeZone` to change it as necessary.\r\n\r\n    DateFormat utcFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&#39;Z&#39;&quot;);\r\n    utcFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n    Date date = utcFormat.parse(&quot;2012-08-15T22:56:02.038Z&quot;);\r\n\r\n    DateFormat pstFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;);\r\n    pstFormat.setTimeZone(TimeZone.getTimeZone(&quot;PST&quot;));\r\n\r\n    System.out.println(pstFormat.format(date));\r\n\r\nThis prints `2012-08-15T15:56:02.038`\r\n\r\nNote that I left out the `&#39;Z&#39;` in the PST format as it indicates UTC. If you just went with `Z` then the output would be `2012-08-15T15:56:02.038-0700`","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p><code>Date</code> has no timezone and internally stores in UTC. Only when a date is formatted is the timezone correction applies. When using a <code>DateFormat</code>, it defaults to the timezone of the JVM it's running in. Use <code>setTimeZone</code> to change it as necessary.</p>\n\n<pre><code>DateFormat utcFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\");\nutcFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\nDate date = utcFormat.parse(\"2012-08-15T22:56:02.038Z\");\n\nDateFormat pstFormat = new SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS\");\npstFormat.setTimeZone(TimeZone.getTimeZone(\"PST\"));\n\nSystem.out.println(pstFormat.format(date));\n</code></pre>\n\n<p>This prints <code>2012-08-15T15:56:02.038</code></p>\n\n<p>Note that I left out the <code>'Z'</code> in the PST format as it indicates UTC. If you just went with <code>Z</code> then the output would be <code>2012-08-15T15:56:02.038-0700</code></p>\n"},{"tags":[],"owner":{"account_id":3908294,"reputation":3454,"user_id":3234352,"accept_rate":68,"display_name":"Sathya Baman"},"comment_count":0,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1494223550,"creation_date":1494223550,"answer_id":43840821,"question_id":12487125,"body_markdown":"**Here is a Simple Modified solution**\r\n\r\n\r\n        public String convertToCurrentTimeZone(String Date) {\r\n                String converted_date = &quot;&quot;;\r\n                try {\r\n        \r\n                    DateFormat utcFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                    utcFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n        \r\n                    Date date = utcFormat.parse(Date);\r\n        \r\n                    DateFormat currentTFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n                    currentTFormat.setTimeZone(TimeZone.getTimeZone(getCurrentTimeZone()));\r\n        \r\n                    converted_date =  currentTFormat.format(date);\r\n                }catch (Exception e){ e.printStackTrace();}\r\n        \r\n                return converted_date;\r\n        }\r\n        \r\n        \r\n        //get the current time zone\r\n        \r\n        public String getCurrentTimeZone(){\r\n                TimeZone tz = Calendar.getInstance().getTimeZone();\r\n                System.out.println(tz.getDisplayName());\r\n                return tz.getID();\r\n        }","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p><strong>Here is a Simple Modified solution</strong></p>\n\n<pre><code>    public String convertToCurrentTimeZone(String Date) {\n            String converted_date = \"\";\n            try {\n\n                DateFormat utcFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                utcFormat.setTimeZone(TimeZone.getTimeZone(\"UTC\"));\n\n                Date date = utcFormat.parse(Date);\n\n                DateFormat currentTFormat = new SimpleDateFormat(\"yyyy-MM-dd HH:mm:ss\");\n                currentTFormat.setTimeZone(TimeZone.getTimeZone(getCurrentTimeZone()));\n\n                converted_date =  currentTFormat.format(date);\n            }catch (Exception e){ e.printStackTrace();}\n\n            return converted_date;\n    }\n\n\n    //get the current time zone\n\n    public String getCurrentTimeZone(){\n            TimeZone tz = Calendar.getInstance().getTimeZone();\n            System.out.println(tz.getDisplayName());\n            return tz.getID();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1504334422,"creation_date":1504334016,"answer_id":46011166,"question_id":12487125,"body_markdown":"Use the modern Java date &amp; time API, and this is straightforward:\r\n\r\n\t\tString inputValue = &quot;2012-08-15T22:56:02.038Z&quot;;\r\n\t\tInstant timestamp = Instant.parse(inputValue);\r\n\t\tZonedDateTime losAngelesTime = timestamp.atZone(ZoneId.of(&quot;America/Los_Angeles&quot;));\r\n\t\tSystem.out.println(losAngelesTime);\r\n\r\nThis prints\r\n\r\n    2012-08-15T15:56:02.038-07:00[America/Los_Angeles]\r\n\r\nPoints to note:\r\n\r\n - There’s a little bug in your expectations. The `Z` in your timestamp means UTC, also known as Zulu time. So in your local time value, the `Z` should not be there. Rather you would want a return value like for example `2012-08-15T15:56:02.038-07:00`, since the offset is now -7 hours rather than Z.\r\n - Avoid the three letter time zone abbreviations. They are not standardized and therefore most often ambiguous. PST, for example, may mean Philppine Standard Time, Pacific Standard Time or Pitcairn Standard Time (though S in an abbreviation is often for summer time (meaning DST)). If you intended Pacific Standard Time, that isn’t even a time zone, since in summer (where your sample timestamp falls) Pacific Daylight Time is used instead. Instead of the abbreviations use time zone IDs in the format *region/city* as in my code.\r\n - Timestamps are generally best handled as `Instant` objects. Convert to `ZonedDateTime` only when you have a need, like for presentation.\r\n\r\n**Question: Can I use the modern API with my Java version?**\r\n\r\nIf using at least Java **6**, you can.\r\n\r\n - In Java 8 and later the new API comes built-in.\r\n - In Java 6 and 7 get [the ThreeTen Backport](http://www.threeten.org/threetenbp/), the backport of the new classes (that’s ThreeTen for JSR-310, where the modern API was first defined).\r\n - On Android, use the Android edition of ThreeTen Backport. It’s called ThreeTenABP, and I think that there’s a wonderful explanation in [this question: How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project).\r\n","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p>Use the modern Java date &amp; time API, and this is straightforward:</p>\n\n<pre><code>    String inputValue = \"2012-08-15T22:56:02.038Z\";\n    Instant timestamp = Instant.parse(inputValue);\n    ZonedDateTime losAngelesTime = timestamp.atZone(ZoneId.of(\"America/Los_Angeles\"));\n    System.out.println(losAngelesTime);\n</code></pre>\n\n<p>This prints</p>\n\n<pre><code>2012-08-15T15:56:02.038-07:00[America/Los_Angeles]\n</code></pre>\n\n<p>Points to note:</p>\n\n<ul>\n<li>There’s a little bug in your expectations. The <code>Z</code> in your timestamp means UTC, also known as Zulu time. So in your local time value, the <code>Z</code> should not be there. Rather you would want a return value like for example <code>2012-08-15T15:56:02.038-07:00</code>, since the offset is now -7 hours rather than Z.</li>\n<li>Avoid the three letter time zone abbreviations. They are not standardized and therefore most often ambiguous. PST, for example, may mean Philppine Standard Time, Pacific Standard Time or Pitcairn Standard Time (though S in an abbreviation is often for summer time (meaning DST)). If you intended Pacific Standard Time, that isn’t even a time zone, since in summer (where your sample timestamp falls) Pacific Daylight Time is used instead. Instead of the abbreviations use time zone IDs in the format <em>region/city</em> as in my code.</li>\n<li>Timestamps are generally best handled as <code>Instant</code> objects. Convert to <code>ZonedDateTime</code> only when you have a need, like for presentation.</li>\n</ul>\n\n<p><strong>Question: Can I use the modern API with my Java version?</strong></p>\n\n<p>If using at least Java <strong>6</strong>, you can.</p>\n\n<ul>\n<li>In Java 8 and later the new API comes built-in.</li>\n<li>In Java 6 and 7 get <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">the ThreeTen Backport</a>, the backport of the new classes (that’s ThreeTen for JSR-310, where the modern API was first defined).</li>\n<li>On Android, use the Android edition of ThreeTen Backport. It’s called ThreeTenABP, and I think that there’s a wonderful explanation in <a href=\"https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project\">this question: How to use ThreeTenABP in Android Project</a>.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1690314993,"post_id":76762985,"comment_id":135335616,"body_markdown":"I am glad to see you wanting to contribute to Stack Overflow. However, I see two problems with your Answer: (A) This approach was already covered in the existing [Answer by Ole V.V.](https://stackoverflow.com/a/46011166/642706). (B)  I do not see the point of your conversion from `ZonedDateTime` to `OffsetDateTime`, as that discards valuable information (the time zone) while gaining nothing in return.","body":"I am glad to see you wanting to contribute to Stack Overflow. However, I see two problems with your Answer: (A) This approach was already covered in the existing <a href=\"https://stackoverflow.com/a/46011166/642706\">Answer by Ole V.V.</a>. (B)  I do not see the point of your conversion from <code>ZonedDateTime</code> to <code>OffsetDateTime</code>, as that discards valuable information (the time zone) while gaining nothing in return."}],"tags":[],"owner":{"account_id":28957321,"reputation":1,"user_id":22180602,"display_name":"Wolfgang Hasler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290177,"creation_date":1690290177,"answer_id":76762985,"question_id":12487125,"body_markdown":"        Instant timestamp = Instant.parse(&quot;2023-07-25T11:04:31.650Z&quot;);  \r\n        System.out.println(timestamp.atZone(ZoneId.systemDefault()).toOffsetDateTime());\r\n\r\nPrints for my location:\r\n\r\n2023-07-25T13:04:31.650+02:00\r\n\r\n\r\n\r\n","title":"Java: How do you convert a UTC timestamp to local time?","body":"<pre><code>    Instant timestamp = Instant.parse(&quot;2023-07-25T11:04:31.650Z&quot;);  \n    System.out.println(timestamp.atZone(ZoneId.systemDefault()).toOffsetDateTime());\n</code></pre>\n<p>Prints for my location:</p>\n<p>2023-07-25T13:04:31.650+02:00</p>\n"}],"owner":{"account_id":932593,"reputation":3291,"user_id":962146,"accept_rate":58,"display_name":"Android Noob"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140195,"favorite_count":0,"down_vote_count":0,"up_vote_count":50,"accepted_answer_id":12487281,"answer_count":4,"score":50,"last_activity_date":1690292502,"creation_date":1348015879,"question_id":12487125,"body_markdown":"I have a timestamp that&#39;s in UTC and I want to convert it to local time without using an API call like `TimeZone.getTimeZone(&quot;PST&quot;)`.  How exactly are you supposed to do this?  I&#39;ve been using the following code without much success:\r\n\r\n    private static final SimpleDateFormat mSegmentStartTimeFormatter = new        SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSS&quot;);\r\n\r\n    Calendar calendar = Calendar.getInstance();\r\n\t\t\r\n\t\ttry {\r\n\t\t\tcalendar.setTime(mSegmentStartTimeFormatter.parse(startTime));\r\n\t\t}\r\n\t\tcatch (ParseException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\treturn calendar.getTimeInMillis();\r\n\r\nSample input value: `[2012-08-15T22:56:02.038Z]`\r\n\r\nshould return the equivalent of `[2012-08-15T15:56:02.038Z]`","title":"Java: How do you convert a UTC timestamp to local time?","body":"<p>I have a timestamp that's in UTC and I want to convert it to local time without using an API call like <code>TimeZone.getTimeZone(\"PST\")</code>.  How exactly are you supposed to do this?  I've been using the following code without much success:</p>\n\n<pre><code>private static final SimpleDateFormat mSegmentStartTimeFormatter = new        SimpleDateFormat(\"yyyy-MM-dd'T'HH:mm:ss.SSS\");\n\nCalendar calendar = Calendar.getInstance();\n\n    try {\n        calendar.setTime(mSegmentStartTimeFormatter.parse(startTime));\n    }\n    catch (ParseException e) {\n        e.printStackTrace();\n    }\n\n    return calendar.getTimeInMillis();\n</code></pre>\n\n<p>Sample input value: <code>[2012-08-15T22:56:02.038Z]</code></p>\n\n<p>should return the equivalent of <code>[2012-08-15T15:56:02.038Z]</code></p>\n"},{"tags":["java","spring","spring-batch"],"comments":[{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1598287536,"post_id":63565151,"comment_id":112403273,"body_markdown":"You store them in some temporary repository, like a database or filesystem?","body":"You store them in some temporary repository, like a database or filesystem?"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598288650,"post_id":63565151,"comment_id":112403855,"body_markdown":"I am looking for a solution that hopefully conveys in the context of springbatch","body":"I am looking for a solution that hopefully conveys in the context of springbatch"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1598291595,"post_id":63565151,"comment_id":112405259,"body_markdown":"Just create a composite writer that does logging and then the analyzing. Basically you shoehorned logging into a seperate step. Heck you could even use an `ItemListener` or `StepListener` for that and log the written items (which would probably be more suiteable for the task).","body":"Just create a composite writer that does logging and then the analyzing. Basically you shoehorned logging into a seperate step. Heck you could even use an <code>ItemListener</code> or <code>StepListener</code> for that and log the written items (which would probably be more suiteable for the task)."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1598341831,"post_id":63565151,"comment_id":112419548,"body_markdown":"You defined an item processor but you did not set it on the step. Is that intended? `performing some processing against it rather than just logging it`: You can implement that processing in the item processor. Are you sure you need a second step for the processing?","body":"You defined an item processor but you did not set it on the step. Is that intended? <code>performing some processing against it rather than just logging it</code>: You can implement that processing in the item processor. Are you sure you need a second step for the processing?"},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598533925,"post_id":63565151,"comment_id":112494376,"body_markdown":"@M.Deinum , thanks. would it be possible to explain how I can share data for a second step using an itemlistener or steplistener? thank you.","body":"@M.Deinum , thanks. would it be possible to explain how I can share data for a second step using an itemlistener or steplistener? thank you."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1598535361,"post_id":63565151,"comment_id":112495284,"body_markdown":"Don&#39;t. As stated you are splitting something in 2 steps which you shouldn&#39;t split. You shouldn&#39;t store data in an item listener.","body":"Don&#39;t. As stated you are splitting something in 2 steps which you shouldn&#39;t split. You shouldn&#39;t store data in an item listener."}],"answers":[{"comments":[{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598368045,"post_id":63566381,"comment_id":112432954,"body_markdown":"thank you for your detailed example. I am attempting to implement it now. Does the writer require any particular implementations (for instance, you had: &quot;public class SampleReader  implements Tasklet,StepExecutionListener&quot; for reader and &quot;public class SampleProcessor  implements Tasklet&quot; for processor. thanks","body":"thank you for your detailed example. I am attempting to implement it now. Does the writer require any particular implementations (for instance, you had: &quot;public class SampleReader  implements Tasklet,StepExecutionListener&quot; for reader and &quot;public class SampleProcessor  implements Tasklet&quot; for processor. thanks"},{"owner":{"account_id":16623452,"reputation":902,"user_id":12013107,"display_name":"Saurabh"},"score":0,"creation_date":1598375734,"post_id":63566381,"comment_id":112436808,"body_markdown":"Yes, the implementation of `Tasklet` is mandatory. You may or may not implement `StepExectuionListener` it&#39;s up to you.","body":"Yes, the implementation of <code>Tasklet</code> is mandatory. You may or may not implement <code>StepExectuionListener</code> it&#39;s up to you."},{"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"score":0,"creation_date":1598554009,"post_id":63566381,"comment_id":112504763,"body_markdown":"Thanks. Saurabh. I was able to use custom job context with JobScope as yo suggested above to accomplish what I needed to do. My setup is different than your example but the key was custom job context with JobScope. thanks again.","body":"Thanks. Saurabh. I was able to use custom job context with JobScope as yo suggested above to accomplish what I needed to do. My setup is different than your example but the key was custom job context with JobScope. thanks again."},{"owner":{"account_id":1337396,"reputation":671,"user_id":1279790,"accept_rate":73,"display_name":"Sujal"},"score":0,"creation_date":1629194685,"post_id":63566381,"comment_id":121616593,"body_markdown":"@Saurabh Why is the implementation of Tasklet mandatory? Can&#39;t JobScope not be used in the Chunk? I&#39;m facing similar issue where I need to process data based on the data written by first Step&#39;s writer to make additional reads on secont Step&#39;s reader. Could you perhaps help me with my question: https://stackoverflow.com/questions/68757616/spring-batch-pass-data-from-writer-to-next-job-or-step. Thanks","body":"@Saurabh Why is the implementation of Tasklet mandatory? Can&#39;t JobScope not be used in the Chunk? I&#39;m facing similar issue where I need to process data based on the data written by first Step&#39;s writer to make additional reads on secont Step&#39;s reader. Could you perhaps help me with my question: <a href=\"https://stackoverflow.com/questions/68757616/spring-batch-pass-data-from-writer-to-next-job-or-step\" title=\"spring batch pass data from writer to next job or step\">stackoverflow.com/questions/68757616/&hellip;</a>. Thanks"}],"tags":[],"owner":{"account_id":16623452,"reputation":902,"user_id":12013107,"display_name":"Saurabh"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1598292337,"creation_date":1598292337,"answer_id":63566381,"question_id":63565151,"body_markdown":"If you do not want to write the data in the database or filesystem, one way to achieve the same is like below:\r\n\r\n 1. Create your own job context bean in your `config` class having the required properties and annotated it with `@JobScope`.\r\n 2. Implement `org.springframework.batch.core.step.tasklet` interface to your reader, processor and writer classes. If you want more control over steps you can also implement `org.springframework.batch.core.StepExecutionListener` with it.\r\n 3. Get your own `context` object using `@Autowire` and use the setter-getter method of it to store and retrieve the data.\r\n\r\nSample Code:\r\n\r\n**Config.java**\r\n\r\n    @Autowired\r\n    private Processor processor;\r\n    \r\n    @Autowired\r\n    private Reader reader;\r\n    \r\n    @Autowired\r\n    private Writer writer;\r\n    \r\n    @Autowired\r\n    private JobBuilderFactory jobBuilderFactory;\r\n    \t \r\n    @Autowired\r\n    private StepBuilderFactory stepBuilderFactory;\r\n    \r\n    @Bean\r\n    @JobScope\r\n    public JobContext getJobContexts() {\r\n    \tJobContext newJobContext = new JobContext();\r\n    \treturn newJobContext;\r\n    }\r\n    \r\n    @Bean\r\n    public Step reader() {\r\n    \t  return stepBuilderFactory.get(&quot;reader&quot;)\r\n    \t    .tasklet(reader)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    @Bean\r\n    public Step processor() {\r\n    \t  return stepBuilderFactory.get(&quot;processor&quot;)\r\n    \t    .tasklet(processor)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    @Bean\r\n    public Step writer() {\r\n    \t  return stepBuilderFactory.get(&quot;writer&quot;)\r\n    \t    .tasklet(writer)\r\n    \t    .build();\r\n    \t }\r\n    \r\n    \r\n    public Job testJob() {\r\n    \t  \r\n    \t  return jobBuilderFactory.get(&quot;testJob&quot;)\r\n    \t    .start(reader())\r\n    \t    .next(processor())\r\n    \t    .next(writer())\r\n    \t    .build();\r\n    \t }\r\n  \r\n    //Below will start the job\r\n    @Scheduled(fixedRate = 1000)\r\n    \tpublic void starJob(){\r\n    \t\t\r\n    \t\tMap&lt;String, JobParameter&gt; confMap = new HashMap&lt;&gt;();\r\n    \t\tconfMap.put(&quot;time&quot;, new JobParameter(new Date()));\r\n    \t\tJobParameters jobParameters = new JobParameters(confMap);\r\n    \t\tmonitorJobLauncher.run(testJob(), jobParameters);\r\n    \t\t\r\n    }\r\n\r\n**JobContext.java**\r\n \r\n\r\n    private List&lt;StuffDto&gt; dataToProcess = new ArrayList&lt;&gt;();\r\n    private List&lt;StuffDto&gt; dataToWrite = new ArrayList&lt;&gt;();\r\n    \r\n    //getter\r\n\r\n**SampleReader.java**\r\n\r\n    @Component\r\n    public class SampleReader  implements Tasklet,StepExecutionListener{\r\n            @Autowired\r\n        \tprivate JobContext context;\r\n           \r\n          @Override\r\n          public void beforeStep(StepExecution stepExecution) {\r\n        //logic that you need to perform before the execution of this step.\r\n          }\r\n        \r\n        @Override\r\n          public void afterStep(StepExecution stepExecution) {\r\n        //logic that you need to perform after the execution of this step.\r\n          }\r\n        \r\n        @Override\r\n        public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\r\n         // Whatever code is here will get executed for reader.\r\n         //  Fetch StuffDto object from database and add it to jobContext \r\n       //dataToProcess list.\r\n        return RepeatStatus.FINISHED;\r\n        }\r\n    }\r\n\r\n**SampleProcessor.java**\r\n\r\n  \r\n\r\n       @Component\r\n       public class SampleProcessor  implements Tasklet{\r\n        \r\n           @Autowired\r\n           private JobContext context;\r\n        \r\n            @Override\r\n            public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\r\n            \r\n             // Whatever code is here will get executed for processor.\r\n            // context.getDataToProcessList();\r\n           // apply business logic and set the data to write.\r\n    \r\n    return RepeatStatus.FINISHED;\r\n        }\r\n\r\nSame ways for the `writer` class. \r\n\r\n**Note**: Please note here that here you need to write database-related boilerplate code on your own. But this way you can have more control over your logic and nothing to worry about context size limit. All the data will be in memory so as soon as operation done those will be garbage collected. I hope you get the idea of what I willing to convey.\r\n\r\nTo read more about `Tasklet` vs `Chunk` read [this][1].\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-batch-tasklet-chunk","title":"SpringBatch Sharing Large Amounts of Data Between Steps","body":"<p>If you do not want to write the data in the database or filesystem, one way to achieve the same is like below:</p>\n<ol>\n<li>Create your own job context bean in your <code>config</code> class having the required properties and annotated it with <code>@JobScope</code>.</li>\n<li>Implement <code>org.springframework.batch.core.step.tasklet</code> interface to your reader, processor and writer classes. If you want more control over steps you can also implement <code>org.springframework.batch.core.StepExecutionListener</code> with it.</li>\n<li>Get your own <code>context</code> object using <code>@Autowire</code> and use the setter-getter method of it to store and retrieve the data.</li>\n</ol>\n<p>Sample Code:</p>\n<p><strong>Config.java</strong></p>\n<pre><code>@Autowired\nprivate Processor processor;\n\n@Autowired\nprivate Reader reader;\n\n@Autowired\nprivate Writer writer;\n\n@Autowired\nprivate JobBuilderFactory jobBuilderFactory;\n     \n@Autowired\nprivate StepBuilderFactory stepBuilderFactory;\n\n@Bean\n@JobScope\npublic JobContext getJobContexts() {\n    JobContext newJobContext = new JobContext();\n    return newJobContext;\n}\n\n@Bean\npublic Step reader() {\n      return stepBuilderFactory.get(&quot;reader&quot;)\n        .tasklet(reader)\n        .build();\n     }\n\n@Bean\npublic Step processor() {\n      return stepBuilderFactory.get(&quot;processor&quot;)\n        .tasklet(processor)\n        .build();\n     }\n\n@Bean\npublic Step writer() {\n      return stepBuilderFactory.get(&quot;writer&quot;)\n        .tasklet(writer)\n        .build();\n     }\n\n\npublic Job testJob() {\n      \n      return jobBuilderFactory.get(&quot;testJob&quot;)\n        .start(reader())\n        .next(processor())\n        .next(writer())\n        .build();\n     }\n\n//Below will start the job\n@Scheduled(fixedRate = 1000)\n    public void starJob(){\n        \n        Map&lt;String, JobParameter&gt; confMap = new HashMap&lt;&gt;();\n        confMap.put(&quot;time&quot;, new JobParameter(new Date()));\n        JobParameters jobParameters = new JobParameters(confMap);\n        monitorJobLauncher.run(testJob(), jobParameters);\n        \n}\n</code></pre>\n<p><strong>JobContext.java</strong></p>\n<pre><code>private List&lt;StuffDto&gt; dataToProcess = new ArrayList&lt;&gt;();\nprivate List&lt;StuffDto&gt; dataToWrite = new ArrayList&lt;&gt;();\n\n//getter\n</code></pre>\n<p><strong>SampleReader.java</strong></p>\n<pre><code>@Component\npublic class SampleReader  implements Tasklet,StepExecutionListener{\n        @Autowired\n        private JobContext context;\n       \n      @Override\n      public void beforeStep(StepExecution stepExecution) {\n    //logic that you need to perform before the execution of this step.\n      }\n    \n    @Override\n      public void afterStep(StepExecution stepExecution) {\n    //logic that you need to perform after the execution of this step.\n      }\n    \n    @Override\n    public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\n     // Whatever code is here will get executed for reader.\n     //  Fetch StuffDto object from database and add it to jobContext \n   //dataToProcess list.\n    return RepeatStatus.FINISHED;\n    }\n}\n</code></pre>\n<p><strong>SampleProcessor.java</strong></p>\n<pre><code>   @Component\n   public class SampleProcessor  implements Tasklet{\n    \n       @Autowired\n       private JobContext context;\n    \n        @Override\n        public RepeatStatus execute(StepContribution contribution, ChunkContext chunkContext){\n        \n         // Whatever code is here will get executed for processor.\n        // context.getDataToProcessList();\n       // apply business logic and set the data to write.\n\nreturn RepeatStatus.FINISHED;\n    }\n</code></pre>\n<p>Same ways for the <code>writer</code> class.</p>\n<p><strong>Note</strong>: Please note here that here you need to write database-related boilerplate code on your own. But this way you can have more control over your logic and nothing to worry about context size limit. All the data will be in memory so as soon as operation done those will be garbage collected. I hope you get the idea of what I willing to convey.</p>\n<p>To read more about <code>Tasklet</code> vs <code>Chunk</code> read <a href=\"https://www.baeldung.com/spring-batch-tasklet-chunk\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}],"owner":{"account_id":12024361,"reputation":2102,"user_id":8796806,"accept_rate":75,"display_name":"Timothy Clotworthy"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2352,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63566381,"answer_count":1,"score":1,"last_activity_date":1690292239,"creation_date":1598286999,"question_id":63565151,"body_markdown":"I have a need to share relatively large amounts of data between job steps for a spring batch implementation. I am aware of `StepExecutionContext` and `JobExecutionContext` as mechanisms for this. However, I read that since these must be limited in size (less than 2500 characters). That is too small for my needs. In my novice one-step `Spring Batch` implementation, my single step job is as below:\r\n\r\n```\r\n@Configuration\r\n@EnableBatchProcessing\r\npublic class BatchConfig {\r\n\r\n    @Autowired\r\n    public JobBuilderFactory jobBuilderFactory;\r\n\r\n    @Autowired\r\n    public StepBuilderFactory stepBuilderFactory;\r\n\r\n\r\n    private static final String GET_DATA =\r\n    &quot;    SELECT &quot; +\r\n    &quot;stuffA, &quot; +\r\n    &quot;stuffB, &quot; +\r\n    &quot;FROM STUFF_TABLE &quot; +\r\n    &quot;ORDER BY stuffA ASC&quot;;\r\n\r\n    @Bean\r\n    public ItemReader&lt;StuffDto&gt; databaseCursorItemReader(DataSource dataSource) {\r\n        return new JdbcCursorItemReaderBuilder&lt;StuffDto&gt;()\r\n                .name(&quot;cursorItemReader&quot;)\r\n            .dataSource(dataSource)\r\n            .sql(GET_DATA)\r\n            .rowMapper(new BeanPropertyRowMapper&lt;&gt;(StuffDto.class))\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    ItemProcessor&lt;StuffDto, StuffDto&gt; databaseXmlItemProcessor() {\r\n        return new QueryLoggingProcessor();\r\n    }\r\n\r\n    @Bean\r\n    public ItemWriter&lt;StuffDto&gt; databaseCursorItemWriter() {\r\n        return new LoggingItemWriter();\r\n    }\r\n\r\n    @Bean\r\n    public Step databaseCursorStep(@Qualifier(&quot;databaseCursorItemReader&quot;) ItemReader&lt;StuffDto&gt; reader,\r\n    @Qualifier(&quot;databaseCursorItemWriter&quot;) ItemWriter&lt;StuffDto&gt; writer,\r\n    StepBuilderFactory stepBuilderFactory) {\r\n        return stepBuilderFactory.get(&quot;databaseCursorStep&quot;)\r\n            .&lt;StuffDto, StuffDto&gt;chunk(1)\r\n        .reader(reader)\r\n            .writer(writer)\r\n            .build();\r\n    }\r\n\r\n    @Bean\r\n    public Job databaseCursorJob(@Qualifier(&quot;databaseCursorStep&quot;) Step exampleJobStep,\r\n    JobBuilderFactory jobBuilderFactory) {\r\n        return jobBuilderFactory.get(&quot;databaseCursorJob&quot;)\r\n            .incrementer(new RunIdIncrementer())\r\n            .flow(exampleJobStep)\r\n            .end()\r\n            .build();\r\n    }\r\n}\r\n```\r\n\r\nThis works fine in the sense that I can successfully read from the database and write in the writer step to a loggingitemwriter like this:\r\n\r\n```\r\npublic class LoggingItemWriter implements ItemWriter&lt;StuffDto&gt; {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\r\n\r\n    @Override\r\n    public void write(List&lt;? extends StuffDto&gt; list) throws Exception {\r\n        LOGGER.info(&quot;Writing stuff: {}&quot;, list);\r\n    }\r\n}\r\n```\r\n\r\nHowever, I need to be able to make available that `StuffDto` (or equivalent) and it&#39;s data to a second step that would be performing some processing against it rather than just logging it. \r\n\r\nI would be grateful for any ideas on how that could be accomplished if you assume that the step and job contexts are too limited. Thanks.","title":"SpringBatch Sharing Large Amounts of Data Between Steps","body":"<p>I have a need to share relatively large amounts of data between job steps for a spring batch implementation. I am aware of <code>StepExecutionContext</code> and <code>JobExecutionContext</code> as mechanisms for this. However, I read that since these must be limited in size (less than 2500 characters). That is too small for my needs. In my novice one-step <code>Spring Batch</code> implementation, my single step job is as below:</p>\n<pre><code>@Configuration\n@EnableBatchProcessing\npublic class BatchConfig {\n\n    @Autowired\n    public JobBuilderFactory jobBuilderFactory;\n\n    @Autowired\n    public StepBuilderFactory stepBuilderFactory;\n\n\n    private static final String GET_DATA =\n    &quot;    SELECT &quot; +\n    &quot;stuffA, &quot; +\n    &quot;stuffB, &quot; +\n    &quot;FROM STUFF_TABLE &quot; +\n    &quot;ORDER BY stuffA ASC&quot;;\n\n    @Bean\n    public ItemReader&lt;StuffDto&gt; databaseCursorItemReader(DataSource dataSource) {\n        return new JdbcCursorItemReaderBuilder&lt;StuffDto&gt;()\n                .name(&quot;cursorItemReader&quot;)\n            .dataSource(dataSource)\n            .sql(GET_DATA)\n            .rowMapper(new BeanPropertyRowMapper&lt;&gt;(StuffDto.class))\n                .build();\n    }\n\n    @Bean\n    ItemProcessor&lt;StuffDto, StuffDto&gt; databaseXmlItemProcessor() {\n        return new QueryLoggingProcessor();\n    }\n\n    @Bean\n    public ItemWriter&lt;StuffDto&gt; databaseCursorItemWriter() {\n        return new LoggingItemWriter();\n    }\n\n    @Bean\n    public Step databaseCursorStep(@Qualifier(&quot;databaseCursorItemReader&quot;) ItemReader&lt;StuffDto&gt; reader,\n    @Qualifier(&quot;databaseCursorItemWriter&quot;) ItemWriter&lt;StuffDto&gt; writer,\n    StepBuilderFactory stepBuilderFactory) {\n        return stepBuilderFactory.get(&quot;databaseCursorStep&quot;)\n            .&lt;StuffDto, StuffDto&gt;chunk(1)\n        .reader(reader)\n            .writer(writer)\n            .build();\n    }\n\n    @Bean\n    public Job databaseCursorJob(@Qualifier(&quot;databaseCursorStep&quot;) Step exampleJobStep,\n    JobBuilderFactory jobBuilderFactory) {\n        return jobBuilderFactory.get(&quot;databaseCursorJob&quot;)\n            .incrementer(new RunIdIncrementer())\n            .flow(exampleJobStep)\n            .end()\n            .build();\n    }\n}\n</code></pre>\n<p>This works fine in the sense that I can successfully read from the database and write in the writer step to a loggingitemwriter like this:</p>\n<pre><code>public class LoggingItemWriter implements ItemWriter&lt;StuffDto&gt; {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(LoggingItemWriter.class);\n\n    @Override\n    public void write(List&lt;? extends StuffDto&gt; list) throws Exception {\n        LOGGER.info(&quot;Writing stuff: {}&quot;, list);\n    }\n}\n</code></pre>\n<p>However, I need to be able to make available that <code>StuffDto</code> (or equivalent) and it's data to a second step that would be performing some processing against it rather than just logging it.</p>\n<p>I would be grateful for any ideas on how that could be accomplished if you assume that the step and job contexts are too limited. Thanks.</p>\n"},{"tags":["java","validation","bean-validation","hibernate-validator"],"answers":[{"tags":[],"owner":{"account_id":40043,"reputation":18749,"user_id":115835,"display_name":"Hardy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1329145344,"creation_date":1329145344,"answer_id":9262669,"question_id":9251671,"body_markdown":"With Bean Validation that is not possible. Only class level constraints have access to the validation root. A property level constraint has only access to the validated value. This might change in Bean Validation 1.1.\r\n\r\nYou could write your custom ConstraintValiatorFactory which allows injection.","title":"JSR303 Validation: Pass in an Object/Context Information at runtime?","body":"<p>With Bean Validation that is not possible. Only class level constraints have access to the validation root. A property level constraint has only access to the validated value. This might change in Bean Validation 1.1.</p>\n\n<p>You could write your custom ConstraintValiatorFactory which allows injection.</p>\n"}],"owner":{"account_id":1167224,"reputation":2444,"user_id":1145216,"accept_rate":78,"display_name":"user1145216"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1275,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":9262669,"answer_count":1,"score":0,"last_activity_date":1690291817,"creation_date":1329073050,"question_id":9251671,"body_markdown":"I have an List of String-IDs in a bean that I like to validate against a &quot;Reference List&quot; of String ids:\r\n\r\n    @MyIdListValidator  \r\n    private List&lt;String&gt; idsFromHtmlForm;  //These need to be validate against an ID list from DB\r\n\r\nSo I have to somehow inject the &quot;Reference List&quot; with all valid values to check against **at rumtime**. (These reference ids read/generated from the database at runtime). This is a webapplication (Struts) and I am really wondering why this seems to be not possible, but is a use-case that is prevalent in millions of webapplications. How do you solve this?\r\n\r\nIs there some way to either inject any arbitrary information (context objects) to the ```validator.validate(form);``` method?\r\n\r\nAnd is there an easy way to get access to the whole(!!) object being validated in this method:\r\n\r\n\r\n`public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext)` of  `ConstraintValidator&lt;Date,String&gt;,`\r\n\r\nNote:  My question is not related to class level validations, but to property level validations if there is a trick to get access to the whole object (the property belongs to), not only the value of a property itself. (If I would have access to the whole instance/class being validated I could set the data there as a secondary property, it is messy but would be a solution).\r\n\t\r\n\r\n\r\n\r\n\r\n\r\nThanks very much","title":"JSR303 Validation: Pass in an Object/Context Information at runtime?","body":"<p>I have an List of String-IDs in a bean that I like to validate against a &quot;Reference List&quot; of String ids:</p>\n<pre><code>@MyIdListValidator  \nprivate List&lt;String&gt; idsFromHtmlForm;  //These need to be validate against an ID list from DB\n</code></pre>\n<p>So I have to somehow inject the &quot;Reference List&quot; with all valid values to check against <strong>at rumtime</strong>. (These reference ids read/generated from the database at runtime). This is a webapplication (Struts) and I am really wondering why this seems to be not possible, but is a use-case that is prevalent in millions of webapplications. How do you solve this?</p>\n<p>Is there some way to either inject any arbitrary information (context objects) to the <code>validator.validate(form);</code> method?</p>\n<p>And is there an easy way to get access to the whole(!!) object being validated in this method:</p>\n<p><code>public boolean isValid(String value, ConstraintValidatorContext constraintValidatorContext)</code> of  <code>ConstraintValidator&lt;Date,String&gt;,</code></p>\n<p>Note:  My question is not related to class level validations, but to property level validations if there is a trick to get access to the whole object (the property belongs to), not only the value of a property itself. (If I would have access to the whole instance/class being validated I could set the data there as a secondary property, it is messy but would be a solution).</p>\n<p>Thanks very much</p>\n"},{"tags":["javascript","java","digital-signature","dss"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690279572,"post_id":76755188,"comment_id":135327945,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."},{"owner":{"account_id":24987108,"reputation":1,"user_id":18848767,"display_name":"Frago Mehdi"},"score":0,"creation_date":1690291826,"post_id":76755188,"comment_id":135330669,"body_markdown":"I just edited the question and added the source code to retrieve the positions. But my question in the first place is just to know the unit for DSS and for the front or the converter that must be put","body":"I just edited the question and added the source code to retrieve the positions. But my question in the first place is just to know the unit for DSS and for the front or the converter that must be put"}],"owner":{"account_id":24987108,"reputation":1,"user_id":18848767,"display_name":"Frago Mehdi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690291760,"creation_date":1690206888,"question_id":76755188,"body_markdown":"I have developed an online electronic signature application using DSS which works well.\r\n\r\nNow I&#39;m integrating a web application that allows users to position a signature area in a PDF (using Javascript) and then I get the X and Y positions.\r\n\r\nThe problem I encounter is that the positions I retrieve from the front application are shifted after signing at the DSS level.\r\n\r\nMay I know what unit of measurement is used at DSS level (originX and originY)?\r\n\r\nWhat I&#39;m doing right now is getting the positions provided at the web application level and converting by multiplying by 0.75 which decreases the lag a little but not top\r\n\r\nHere is the source code to retrieve pdf positions from front application : \r\n\r\n**index.html**\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n      &lt;title&gt;Positionnement de la zone de signature dans un PDF&lt;/title&gt;\r\n      &lt;style&gt;\r\n       \r\n        #signatureZone {\r\n          position: absolute;\r\n          top: 100px;\r\n          left: 100px;\r\n          width: 150px;\r\n          height: 50px;\r\n          border: 2px dashed #f00;\r\n          cursor: grab;\r\n        }\r\n        #pdfContainer {\r\n          overflow-y: scroll; /* Ajoute une barre de d&#233;filement verticale */\r\n          width: 600px;\r\n          height: 600px;\r\n          border: 1px solid #ccc;\r\n        }\r\n        #pdfPages {\r\n          height: 100%; /* Remplit toute la hauteur du conteneur */\r\n        }\r\n        .page {\r\n      display: block;\r\n      margin: 10px auto;\r\n      max-width: 100%;\r\n    }\r\n      &lt;/style&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n      &lt;div id=&quot;pdfContainer&quot;&gt;\r\n            &lt;div id=&quot;pdfPages&quot;&gt;&lt;/div&gt;\r\n    \r\n      &lt;/div&gt;\r\n         &lt;div id=&quot;signatureZone&quot;&gt;&lt;/div&gt;\r\n        &lt;button id=&quot;prevPage&quot;&gt;Precedent&lt;/button&gt;\r\n      &lt;button id=&quot;nextPage&quot;&gt;Suivant&lt;/button&gt;\r\n      &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;pdf.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;pdf.worker.js&quot;&gt;&lt;/script&gt;\r\n      &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**script.js**\r\n\r\n    let pdfDoc = null;\r\n    let pageNum = 1;\r\n    let pageRendering = false;\r\n    let pageNumPending = null;\r\n    const scale = 1.5; // Ajustez la valeur si n&#233;cessaire\r\n    const signatureZone = document.getElementById(&#39;signatureZone&#39;);\r\n    let offsetX, offsetY;\r\n    let isDragging = false;\r\n    let currentPage = 1; // Variable pour stocker le num&#233;ro de la page actuelle\r\n    \r\n    \r\n    // Gestionnaires d&#39;&#233;v&#233;nements pour faire glisser la zone de signature\r\n    signatureZone.addEventListener(&#39;mousedown&#39;, startDragging);\r\n    signatureZone.addEventListener(&#39;mousemove&#39;, drag);\r\n    signatureZone.addEventListener(&#39;mouseup&#39;, endDragging);\r\n    signatureZone.addEventListener(&#39;mouseleave&#39;, endDragging);\r\n    \r\n    // Charge le PDF et affiche la premi&#232;re page\r\n    pdfjsLib.getDocument(&#39;exemple.pdf&#39;).promise.then(function (pdf) {\r\n      pdfDoc = pdf;\r\n      renderPage(pageNum);\r\n      // displayPages(pdf.numPages);\r\n    });\r\n    \r\n    function displayPages(numPages) {\r\n      const pdfPagesContainer = document.getElementById(&#39;pdfPages&#39;);\r\n    \r\n      for (let i = 1; i &lt;= numPages; i++) {\r\n        const pageDiv = document.createElement(&#39;div&#39;);\r\n        pageDiv.className = &#39;page&#39;;\r\n        pdfPagesContainer.appendChild(pageDiv);\r\n    \r\n        // Affiche chaque page dans le div cr&#233;&#233; ci-dessus\r\n        pdfDoc.getPage(i).then(function (page) {\r\n          const canvas = document.createElement(&#39;canvas&#39;);\r\n          const context = canvas.getContext(&#39;2d&#39;);\r\n          const viewport = page.getViewport({ scale });\r\n          canvas.height = viewport.height;\r\n          canvas.width = viewport.width;\r\n          const renderContext = {\r\n            canvasContext: context,\r\n            viewport: viewport,\r\n          };\r\n          page.render(renderContext).promise.then(function () {\r\n            pageDiv.appendChild(canvas);\r\n          });\r\n        });\r\n      }\r\n      // Met &#224; jour la variable currentPage avec le num&#233;ro de la page actuelle\r\n      currentPage = numPages;\r\n    }\r\n    \r\n    \r\n    function renderPage(num) {\r\n      pageRendering = true;\r\n      pdfDoc.getPage(num).then(function (page) {\r\n        const canvas = document.createElement(&#39;canvas&#39;);\r\n        const context = canvas.getContext(&#39;2d&#39;);\r\n        const viewport = page.getViewport({ scale });\r\n        canvas.height = viewport.height;\r\n        canvas.width = viewport.width;\r\n    \r\n        const renderContext = {\r\n          canvasContext: context,\r\n          viewport: viewport,\r\n        };\r\n    \r\n        page.render(renderContext).promise.then(function () {\r\n          const pdfContainer = document.getElementById(&#39;pdfContainer&#39;);\r\n          pdfContainer.innerHTML = &#39;&#39;;\r\n          pdfContainer.appendChild(canvas);\r\n          pageRendering = false;\r\n          if (pageNumPending !== null) {\r\n            renderPage(pageNumPending);\r\n            pageNumPending = null;\r\n          }\r\n        });\r\n      });\r\n      // Met &#224; jour la variable currentPage avec le num&#233;ro de la page actuelle\r\n      currentPage = num;\r\n    }\r\n    \r\n    function queueRenderPage(num) {\r\n      if (pageRendering) {\r\n        pageNumPending = num;\r\n      } else {\r\n        renderPage(num);\r\n      }\r\n    }\r\n    \r\n    function onPrevPage() {\r\n      if (pageNum &lt;= 1) {\r\n        return;\r\n      }\r\n      pageNum--;\r\n      queueRenderPage(pageNum);\r\n    }\r\n    \r\n    function onNextPage() {\r\n      if (pageNum &gt;= pdfDoc.numPages) {\r\n        return;\r\n      }\r\n      pageNum++;\r\n      queueRenderPage(pageNum);\r\n    }\r\n    \r\n    function startDragging(e) {\r\n      isDragging = true;\r\n      offsetX = e.clientX - signatureZone.getBoundingClientRect().left;\r\n      offsetY = e.clientY - signatureZone.getBoundingClientRect().top;\r\n    }\r\n    \r\n    function drag(e) {\r\n      if (isDragging) {\r\n        e.preventDefault();\r\n        const containerRect = document.getElementById(&#39;pdfContainer&#39;).getBoundingClientRect();\r\n        const x = e.clientX - containerRect.left - offsetX;\r\n        const y = e.clientY - containerRect.top - offsetY;\r\n        signatureZone.style.left = `${x}px`;\r\n        signatureZone.style.top = `${y}px`;\r\n      }\r\n    }\r\n    \r\n    function endDragging() {\r\n      isDragging = false;\r\n    \r\n      // Enregistrez la position de la zone de signature ici, par exemple avec jQuery AJAX\r\n       const position = {\r\n        page: currentPage,\r\n        left: signatureZone.style.left,\r\n        top: signatureZone.style.top,\r\n      };\r\n    \r\n      console.log(&quot;position : &quot;, position)\r\n      // Vous pouvez ensuite envoyer la position au serveur pour enregistrement\r\n      // $.ajax({\r\n      //   url: &#39;/votre/endpoint&#39;,\r\n      //   type: &#39;POST&#39;,\r\n      //   data: position,\r\n      //   success: function (response) {\r\n      //     console.log(&#39;Position enregistr&#233;e avec succ&#232;s&#39;);\r\n      //   },\r\n      //   error: function (error) {\r\n      //     console.error(&#39;Erreur lors de l\\&#39;enregistrement de la position&#39;, error);\r\n      //   },\r\n      // });\r\n    }\r\n    \r\n    // Gestion des boutons pr&#233;c&#233;dents/suivants\r\n    document.getElementById(&#39;prevPage&#39;).addEventListener(&#39;click&#39;, onPrevPage);\r\n    document.getElementById(&#39;nextPage&#39;).addEventListener(&#39;click&#39;, onNextPage);\r\n\r\n","title":"Add signatyre field to PDF and use it on DSS","body":"<p>I have developed an online electronic signature application using DSS which works well.</p>\n<p>Now I'm integrating a web application that allows users to position a signature area in a PDF (using Javascript) and then I get the X and Y positions.</p>\n<p>The problem I encounter is that the positions I retrieve from the front application are shifted after signing at the DSS level.</p>\n<p>May I know what unit of measurement is used at DSS level (originX and originY)?</p>\n<p>What I'm doing right now is getting the positions provided at the web application level and converting by multiplying by 0.75 which decreases the lag a little but not top</p>\n<p>Here is the source code to retrieve pdf positions from front application :</p>\n<p><strong>index.html</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n  &lt;title&gt;Positionnement de la zone de signature dans un PDF&lt;/title&gt;\n  &lt;style&gt;\n   \n    #signatureZone {\n      position: absolute;\n      top: 100px;\n      left: 100px;\n      width: 150px;\n      height: 50px;\n      border: 2px dashed #f00;\n      cursor: grab;\n    }\n    #pdfContainer {\n      overflow-y: scroll; /* Ajoute une barre de défilement verticale */\n      width: 600px;\n      height: 600px;\n      border: 1px solid #ccc;\n    }\n    #pdfPages {\n      height: 100%; /* Remplit toute la hauteur du conteneur */\n    }\n    .page {\n  display: block;\n  margin: 10px auto;\n  max-width: 100%;\n}\n  &lt;/style&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=&quot;pdfContainer&quot;&gt;\n        &lt;div id=&quot;pdfPages&quot;&gt;&lt;/div&gt;\n\n  &lt;/div&gt;\n     &lt;div id=&quot;signatureZone&quot;&gt;&lt;/div&gt;\n    &lt;button id=&quot;prevPage&quot;&gt;Precedent&lt;/button&gt;\n  &lt;button id=&quot;nextPage&quot;&gt;Suivant&lt;/button&gt;\n  &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;pdf.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;pdf.worker.js&quot;&gt;&lt;/script&gt;\n  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>script.js</strong></p>\n<pre><code>let pdfDoc = null;\nlet pageNum = 1;\nlet pageRendering = false;\nlet pageNumPending = null;\nconst scale = 1.5; // Ajustez la valeur si nécessaire\nconst signatureZone = document.getElementById('signatureZone');\nlet offsetX, offsetY;\nlet isDragging = false;\nlet currentPage = 1; // Variable pour stocker le numéro de la page actuelle\n\n\n// Gestionnaires d'événements pour faire glisser la zone de signature\nsignatureZone.addEventListener('mousedown', startDragging);\nsignatureZone.addEventListener('mousemove', drag);\nsignatureZone.addEventListener('mouseup', endDragging);\nsignatureZone.addEventListener('mouseleave', endDragging);\n\n// Charge le PDF et affiche la première page\npdfjsLib.getDocument('exemple.pdf').promise.then(function (pdf) {\n  pdfDoc = pdf;\n  renderPage(pageNum);\n  // displayPages(pdf.numPages);\n});\n\nfunction displayPages(numPages) {\n  const pdfPagesContainer = document.getElementById('pdfPages');\n\n  for (let i = 1; i &lt;= numPages; i++) {\n    const pageDiv = document.createElement('div');\n    pageDiv.className = 'page';\n    pdfPagesContainer.appendChild(pageDiv);\n\n    // Affiche chaque page dans le div créé ci-dessus\n    pdfDoc.getPage(i).then(function (page) {\n      const canvas = document.createElement('canvas');\n      const context = canvas.getContext('2d');\n      const viewport = page.getViewport({ scale });\n      canvas.height = viewport.height;\n      canvas.width = viewport.width;\n      const renderContext = {\n        canvasContext: context,\n        viewport: viewport,\n      };\n      page.render(renderContext).promise.then(function () {\n        pageDiv.appendChild(canvas);\n      });\n    });\n  }\n  // Met à jour la variable currentPage avec le numéro de la page actuelle\n  currentPage = numPages;\n}\n\n\nfunction renderPage(num) {\n  pageRendering = true;\n  pdfDoc.getPage(num).then(function (page) {\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    const viewport = page.getViewport({ scale });\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n\n    const renderContext = {\n      canvasContext: context,\n      viewport: viewport,\n    };\n\n    page.render(renderContext).promise.then(function () {\n      const pdfContainer = document.getElementById('pdfContainer');\n      pdfContainer.innerHTML = '';\n      pdfContainer.appendChild(canvas);\n      pageRendering = false;\n      if (pageNumPending !== null) {\n        renderPage(pageNumPending);\n        pageNumPending = null;\n      }\n    });\n  });\n  // Met à jour la variable currentPage avec le numéro de la page actuelle\n  currentPage = num;\n}\n\nfunction queueRenderPage(num) {\n  if (pageRendering) {\n    pageNumPending = num;\n  } else {\n    renderPage(num);\n  }\n}\n\nfunction onPrevPage() {\n  if (pageNum &lt;= 1) {\n    return;\n  }\n  pageNum--;\n  queueRenderPage(pageNum);\n}\n\nfunction onNextPage() {\n  if (pageNum &gt;= pdfDoc.numPages) {\n    return;\n  }\n  pageNum++;\n  queueRenderPage(pageNum);\n}\n\nfunction startDragging(e) {\n  isDragging = true;\n  offsetX = e.clientX - signatureZone.getBoundingClientRect().left;\n  offsetY = e.clientY - signatureZone.getBoundingClientRect().top;\n}\n\nfunction drag(e) {\n  if (isDragging) {\n    e.preventDefault();\n    const containerRect = document.getElementById('pdfContainer').getBoundingClientRect();\n    const x = e.clientX - containerRect.left - offsetX;\n    const y = e.clientY - containerRect.top - offsetY;\n    signatureZone.style.left = `${x}px`;\n    signatureZone.style.top = `${y}px`;\n  }\n}\n\nfunction endDragging() {\n  isDragging = false;\n\n  // Enregistrez la position de la zone de signature ici, par exemple avec jQuery AJAX\n   const position = {\n    page: currentPage,\n    left: signatureZone.style.left,\n    top: signatureZone.style.top,\n  };\n\n  console.log(&quot;position : &quot;, position)\n  // Vous pouvez ensuite envoyer la position au serveur pour enregistrement\n  // $.ajax({\n  //   url: '/votre/endpoint',\n  //   type: 'POST',\n  //   data: position,\n  //   success: function (response) {\n  //     console.log('Position enregistrée avec succès');\n  //   },\n  //   error: function (error) {\n  //     console.error('Erreur lors de l\\'enregistrement de la position', error);\n  //   },\n  // });\n}\n\n// Gestion des boutons précédents/suivants\ndocument.getElementById('prevPage').addEventListener('click', onPrevPage);\ndocument.getElementById('nextPage').addEventListener('click', onNextPage);\n</code></pre>\n"},{"tags":["java","inputstream"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1690285369,"post_id":76762343,"comment_id":135329090,"body_markdown":"`InputStream` has a `read` method. Start there, try to implement it, and if you get stuck, ask a new question with specific details.","body":"<code>InputStream</code> has a <code>read</code> method. Start there, try to implement it, and if you get stuck, ask a new question with specific details."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690285751,"post_id":76762343,"comment_id":135329166,"body_markdown":"Call `read()` on each and exit reading as soon as the two calls produce a differing value. You can short cut by returning false if the files (if they *are* files) differ in length","body":"Call <code>read()</code> on each and exit reading as soon as the two calls produce a differing value. You can short cut by returning false if the files (if they <i>are</i> files) differ in length"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1690286290,"post_id":76762343,"comment_id":135329265,"body_markdown":"Read the whole stream,  md5 it, if the hashes are different - the content is different.","body":"Read the whole stream,  md5 it, if the hashes are different - the content is different."}],"answers":[{"comments":[{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1690286359,"post_id":76762427,"comment_id":135329283,"body_markdown":"I am sure `test.reEncrypt(cis, &quot;&quot;)` would be reading the stream `cis` already, inside it. That&#39;s how it would return the `reStream`.  So, above function to read both simultaneously won&#39;t work.  When you read from `resStream`, internally to encrypt a byte, it would also read from `cis`.  So, from `cis` - 2 bytes would be read (one by above furnction and one by resStream.read() internally), while from `resByte`, only one. Depends how the algo works. But this mostly won&#39;t work.","body":"I am sure <code>test.reEncrypt(cis, &quot;&quot;)</code> would be reading the stream <code>cis</code> already, inside it. That&#39;s how it would return the <code>reStream</code>.  So, above function to read both simultaneously won&#39;t work.  When you read from <code>resStream</code>, internally to encrypt a byte, it would also read from <code>cis</code>.  So, from <code>cis</code> - 2 bytes would be read (one by above furnction and one by resStream.read() internally), while from <code>resByte</code>, only one. Depends how the algo works. But this mostly won&#39;t work."},{"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"score":0,"creation_date":1690288031,"post_id":76762427,"comment_id":135329673,"body_markdown":"Is there a way to convert the content in inputStream to String, so that i can compare both the strings if both are equal or not.","body":"Is there a way to convert the content in inputStream to String, so that i can compare both the strings if both are equal or not."},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690288240,"post_id":76762427,"comment_id":135329721,"body_markdown":"@priyanka Yeap, You can use a &#39;BufferedReader&#39;. Something like &#39;BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));&#39; and\n    &#39;StringBuilder builder = new StringBuilder();&#39; then put builder in fused loop like while and call &#39;append&#39;, feel free to ask another question about this if you need more details about it.","body":"@priyanka Yeap, You can use a &#39;BufferedReader&#39;. Something like &#39;BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));&#39; and     &#39;StringBuilder builder = new StringBuilder();&#39; then put builder in fused loop like while and call &#39;append&#39;, feel free to ask another question about this if you need more details about it."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690290169,"post_id":76762427,"comment_id":135330246,"body_markdown":"If you&#39;ve got two files then `boolean identical = (Files.mismatch(path1, path2) == -1);`","body":"If you&#39;ve got two files then <code>boolean identical = (Files.mismatch(path1, path2) == -1);</code>"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1690296573,"post_id":76762427,"comment_id":135331884,"body_markdown":"Apache Commons IO has this method: https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html#contentEquals-java.io.InputStream-java.io.InputStream-","body":"Apache Commons IO has this method: <a href=\"https://commons.apache.org/proper/commons-io/apidocs/org/apache/commons/io/IOUtils.html#contentEquals-java.io.InputStream-java.io.InputStream-\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-io/apidocs/org/apache/comm&zwnj;&#8203;ons/&hellip;</a>"}],"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690286201,"creation_date":1690285865,"answer_id":76762427,"question_id":76762343,"body_markdown":" \r\n\r\n&gt; How to compare content of 2 [InputStreams][1] Objects ?\r\n\r\nYou can read the data from each stream and compare their byte codes.\r\nNot that If the streams has different size then they are definitely not equal.\r\n\r\n\r\n    int cisByte = cis.read();\r\n    int resByte = resStream.read();\r\n\r\n    while (cisByte != -1 &amp;&amp; resByte != -1) {\r\n        if (cisByte != resByte) {\r\n            return false;\r\n        }\r\n        cisByte = cis.read();\r\n        resByte = resStream.read();\r\n    }\r\n\r\n    return cisByte == resByte;\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html","title":"How to compare content of 2 InputStreams Objects","body":"<blockquote>\n<p>How to compare content of 2 <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/ObjectInputStream.html\" rel=\"nofollow noreferrer\">InputStreams</a> Objects ?</p>\n</blockquote>\n<p>You can read the data from each stream and compare their byte codes.\nNot that If the streams has different size then they are definitely not equal.</p>\n<pre><code>int cisByte = cis.read();\nint resByte = resStream.read();\n\nwhile (cisByte != -1 &amp;&amp; resByte != -1) {\n    if (cisByte != resByte) {\n        return false;\n    }\n    cisByte = cis.read();\n    resByte = resStream.read();\n}\n\nreturn cisByte == resByte;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1690286899,"post_id":76762553,"comment_id":135329405,"body_markdown":"Surely it&#39;s faster to simply compare the two strings, rather than calculating a hash and then comparing the hash? And there&#39;s no chance then that two different strings will happen to hash to the same value.","body":"Surely it&#39;s faster to simply compare the two strings, rather than calculating a hash and then comparing the hash? And there&#39;s no chance then that two different strings will happen to hash to the same value."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1690287062,"post_id":76762553,"comment_id":135329439,"body_markdown":"For an infinitely long string - sure, comparing individual characters is the way to go. For 10 megabytes of test data - does it really make a difference?\n\nI thought the whole **point of the question** was to detect whether there is a difference, not where the difference is. Identical strings will surely hash to the same value. Different strings (thus different contents) will not hash to the same value.","body":"For an infinitely long string - sure, comparing individual characters is the way to go. For 10 megabytes of test data - does it really make a difference?  I thought the whole <b>point of the question</b> was to detect whether there is a difference, not where the difference is. Identical strings will surely hash to the same value. Different strings (thus different contents) will not hash to the same value."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1690287161,"post_id":76762553,"comment_id":135329465,"body_markdown":"@tgdavies look: `My target is to check if the reEncryption gave me the same data or different.`. This does it just fine. Perhaps in a suboptimal way, but an easy peasy way.","body":"@tgdavies look: <code>My target is to check if the reEncryption gave me the same data or different.</code>. This does it just fine. Perhaps in a suboptimal way, but an easy peasy way."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1690287175,"post_id":76762553,"comment_id":135329470,"body_markdown":"You&#39;ve made the solution slower, less reliable, and more complicated for zero benefit. The expression `cisMD5.equals(resMD5)` can simply be `cisAsString.equals(resStreamAsString)`","body":"You&#39;ve made the solution slower, less reliable, and more complicated for zero benefit. The expression <code>cisMD5.equals(resMD5)</code> can simply be <code>cisAsString.equals(resStreamAsString)</code>"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1690287564,"post_id":76762553,"comment_id":135329561,"body_markdown":"@tgdavies Robustness aside, does it not demonstrate an idea to compare two things? Improvement and optimization is left as an excercise to the reader :) Which would probably skip the whole reading into string to begin with.","body":"@tgdavies Robustness aside, does it not demonstrate an idea to compare two things? Improvement and optimization is left as an excercise to the reader :) Which would probably skip the whole reading into string to begin with."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1690289766,"post_id":76762553,"comment_id":135330148,"body_markdown":"Who said anything about `String`s?","body":"Who said anything about <code>String</code>s?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1690289915,"post_id":76762553,"comment_id":135330184,"body_markdown":"This will result in a lossy comparison, because not all byte combinations are valid in UTF-8, and result in Unicode replacement characters (not to mention the unqualified usage of `String.getBytes()` also being potentially lossy if the default JVM character set is not UTF-8), so two different streams may produce the same string. If you want to determine a hash, use a `DigestInputStream` and read through it (discarding the bytes).","body":"This will result in a lossy comparison, because not all byte combinations are valid in UTF-8, and result in Unicode replacement characters (not to mention the unqualified usage of <code>String.getBytes()</code> also being potentially lossy if the default JVM character set is not UTF-8), so two different streams may produce the same string. If you want to determine a hash, use a <code>DigestInputStream</code> and read through it (discarding the bytes)."}],"tags":[],"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"comment_count":7,"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1690286790,"creation_date":1690286790,"answer_id":76762553,"question_id":76762343,"body_markdown":"The idea is to read the whole stream as a String, then md5 the string, and finally check if the hashes are the same. MD5 guarantees that hashing the same string will produce the same result.\r\n\r\n```\r\npublic String readInputStreamAsString(InputStream stream) {\r\n int bufferSize = 1024;\r\n char[] buffer = new char[bufferSize];\r\n StringBuilder out = new StringBuilder();\r\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\r\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\r\n     out.append(buffer, 0, numRead);\r\n }\r\n return out.toString();\r\n}\r\n\r\npublic String hashMD5(String input) {\r\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\r\n        byte[] messageDigest = md.digest(input.getBytes());\r\n        BigInteger number = new BigInteger(1, messageDigest);\r\n        String hashtext = number.toString(16);\r\n        return hashtext;\r\n}\r\n\r\npublic void TestMe() {\r\n   final InputStream cis = test.getEncryptingInputStream(is);\r\n   final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\r\n\r\n   String cisAsString = readInputStreamAsString(cis);\r\n   String resStreamAsString = readInputStreamAsString(resStream);\r\n\r\n   String cisMD5 = hashMD5(cisAsString);\r\n   String resMD5 = hashMD5(resStreamAsString);\r\n\r\n   if(cisMD5.equals(resMD5)) { \r\n       System.out.println(&quot;Streams contents are equal&quot;); \r\n   } else { \r\n       System.out.println(&quot;Stream contents are NOT equal :(&quot;); \r\n   }\r\n}\r\n```","title":"How to compare content of 2 InputStreams Objects","body":"<p>The idea is to read the whole stream as a String, then md5 the string, and finally check if the hashes are the same. MD5 guarantees that hashing the same string will produce the same result.</p>\n<pre><code>public String readInputStreamAsString(InputStream stream) {\n int bufferSize = 1024;\n char[] buffer = new char[bufferSize];\n StringBuilder out = new StringBuilder();\n Reader in = new InputStreamReader(stream, StandardCharsets.UTF_8);\n for (int numRead; (numRead = in.read(buffer, 0, buffer.length)) &gt; 0; ) {\n     out.append(buffer, 0, numRead);\n }\n return out.toString();\n}\n\npublic String hashMD5(String input) {\n        MessageDigest md = MessageDigest.getInstance(&quot;MD5&quot;);\n        byte[] messageDigest = md.digest(input.getBytes());\n        BigInteger number = new BigInteger(1, messageDigest);\n        String hashtext = number.toString(16);\n        return hashtext;\n}\n\npublic void TestMe() {\n   final InputStream cis = test.getEncryptingInputStream(is);\n   final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\n\n   String cisAsString = readInputStreamAsString(cis);\n   String resStreamAsString = readInputStreamAsString(resStream);\n\n   String cisMD5 = hashMD5(cisAsString);\n   String resMD5 = hashMD5(resStreamAsString);\n\n   if(cisMD5.equals(resMD5)) { \n       System.out.println(&quot;Streams contents are equal&quot;); \n   } else { \n       System.out.println(&quot;Stream contents are NOT equal :(&quot;); \n   }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690289643,"post_id":76762554,"comment_id":135330121,"body_markdown":"Why would you read everything into memory?","body":"Why would you read everything into memory?"},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1690290897,"post_id":76762554,"comment_id":135330423,"body_markdown":"At least one stream - cis has to be read into the memory and stored for later comparison with reEncrypt&#39;s output. The resStream&#39;s reading can be done byte by byte and compared with cisArray. But at least cisArray has to be read fully and remembered.","body":"At least one stream - cis has to be read into the memory and stored for later comparison with reEncrypt&#39;s output. The resStream&#39;s reading can be done byte by byte and compared with cisArray. But at least cisArray has to be read fully and remembered."},{"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"score":0,"creation_date":1690291343,"post_id":76762554,"comment_id":135330537,"body_markdown":"And depends, the output of the `test.getEncryptingInputStream(is)` can be stored in a file too, if it is too much for the memory. The main point is, we have to read one stream fully and store somewhere, and then create another stream from that stored data (in memory or on disk) and pass that to the `reEncrypt` function. If we directly pass the output of `getEncryptingInputStream` to `reEncrypt`, it won&#39;t work. You cannot read the first&#39;s output twice. The `reEncrypt`&#39;s output does not have to be stored anywhere, but just compared with the stored output of `getEncryptingInputStream`","body":"And depends, the output of the <code>test.getEncryptingInputStream(is)</code> can be stored in a file too, if it is too much for the memory. The main point is, we have to read one stream fully and store somewhere, and then create another stream from that stored data (in memory or on disk) and pass that to the <code>reEncrypt</code> function. If we directly pass the output of <code>getEncryptingInputStream</code> to <code>reEncrypt</code>, it won&#39;t work. You cannot read the first&#39;s output twice. The <code>reEncrypt</code>&#39;s output does not have to be stored anywhere, but just compared with the stored output of <code>getEncryptingInputStream</code>"}],"tags":[],"owner":{"account_id":17717155,"reputation":527,"user_id":12863192,"display_name":"Ishan"},"comment_count":3,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690291614,"creation_date":1690286806,"answer_id":76762554,"question_id":76762343,"body_markdown":"Putting just the algorithm, not the real implementation...\r\n```\r\nfinal InputStream cis = test.getEncryptingInputStream(is);\r\nCreate a ByteArrayOutputStream cisArray / FileOutputStream\r\nRead everything from cis and store in cisArray/FileOutputStream.\r\n\r\nCreate cisInputStream as ByteArrayInputStream from stored cisArray&#39;s bytes OR FileInputStream from file.\r\nfinal InputStream resStream = test.reEncrypt(cisInputStream, &quot;&quot;);\r\n\r\nRead resStream &amp; cisInputStream (re-open) byte by byte and compare\r\n```","title":"How to compare content of 2 InputStreams Objects","body":"<p>Putting just the algorithm, not the real implementation...</p>\n<pre><code>final InputStream cis = test.getEncryptingInputStream(is);\nCreate a ByteArrayOutputStream cisArray / FileOutputStream\nRead everything from cis and store in cisArray/FileOutputStream.\n\nCreate cisInputStream as ByteArrayInputStream from stored cisArray's bytes OR FileInputStream from file.\nfinal InputStream resStream = test.reEncrypt(cisInputStream, &quot;&quot;);\n\nRead resStream &amp; cisInputStream (re-open) byte by byte and compare\n</code></pre>\n"}],"owner":{"account_id":8085618,"reputation":422,"user_id":6093274,"accept_rate":33,"display_name":"priyanka"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1690290733,"accepted_answer_id":76762553,"answer_count":3,"score":-1,"last_activity_date":1690291614,"creation_date":1690285196,"question_id":76762343,"body_markdown":"I want to compare the content in cis and resStream. My target is to check if the reEncryption gave me the same data or different.\r\n\r\nAny leads would be really great. Thanks \r\n\r\n    final InputStream cis = test.getEncryptingInputStream(is);\r\n    final InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\r\n\r\nHow can we check the content of InputStreams?","title":"How to compare content of 2 InputStreams Objects","body":"<p>I want to compare the content in cis and resStream. My target is to check if the reEncryption gave me the same data or different.</p>\n<p>Any leads would be really great. Thanks</p>\n<pre><code>final InputStream cis = test.getEncryptingInputStream(is);\nfinal InputStream resStream = test.reEncrypt(cis, &quot;&quot;);\n</code></pre>\n<p>How can we check the content of InputStreams?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1690290832,"post_id":76763046,"comment_id":135330410,"body_markdown":"Your main class is named `com.startjava.lesson_2_3.calculator.CalculatorTest`, but you are trying to run one named `com.starjava.lesson_2_3.calculator.CalculatorTest`.  Note &quot;starjava&quot; != &quot;startjava&quot;.","body":"Your main class is named <code>com.startjava.lesson_2_3.calculator.CalculatorTest</code>, but you are trying to run one named <code>com.starjava.lesson_2_3.calculator.CalculatorTest</code>.  Note &quot;starjava&quot; != &quot;startjava&quot;."},{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690291125,"post_id":76763046,"comment_id":135330477,"body_markdown":"@JohnBollinger please write it as answer or i will do :)","body":"@JohnBollinger please write it as answer or i will do :)"},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690291286,"post_id":76763046,"comment_id":135330524,"body_markdown":"I added for clarification, the path options and sources, I am trying to understand your answer","body":"I added for clarification, the path options and sources, I am trying to understand your answer"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1690291309,"post_id":76763046,"comment_id":135330531,"body_markdown":"@Lunatic, the appropriate action, if you should choose to take one, is to vote to close as a typo.  I have not done so myself because I am presently refraining from all moderation actions.","body":"@Lunatic, the appropriate action, if you should choose to take one, is to vote to close as a typo.  I have not done so myself because I am presently refraining from all moderation actions."},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690292539,"post_id":76763046,"comment_id":135330870,"body_markdown":"@JohnBollinger it turns out I have an error in the optionsj file, I understand the error in the class name at start, but still not getting the same error","body":"@JohnBollinger it turns out I have an error in the optionsj file, I understand the error in the class name at start, but still not getting the same error"},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690292910,"post_id":76763046,"comment_id":135330969,"body_markdown":"@JohnBollinger  -cp D:\\Startjava\\out\\com\\startjava\\lesson_2_3\\calculator\nCalculatorTest if I write like this in the optionsj file, then the same error Caused by: java.lang.NoClassDefFoundError: com/startjava/lesson_2_3/calculator/CalculatorTest (wrong name: CalculatorTest)","body":"@JohnBollinger  -cp D:\\Startjava\\out\\com\\startjava\\lesson_2_3\\calculator CalculatorTest if I write like this in the optionsj file, then the same error Caused by: java.lang.NoClassDefFoundError: com/startjava/lesson_2_3/calculator/CalculatorTest (wrong name: CalculatorTest)"},{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":0,"creation_date":1690293462,"post_id":76763046,"comment_id":135331111,"body_markdown":"@Tribjj, the classpath should be `D:\\Startjava\\out`, not the full path to the class file, so the `options` and `optionsj` files presented in the question appear to be consistent with each other as-is.  The `java` and `javac` commands compute classpath-relative directories for class files based on classes&#39; package names.  You don&#39;t do that yourself.","body":"@Tribjj, the classpath should be <code>D:\\Startjava\\out</code>, not the full path to the class file, so the <code>options</code> and <code>optionsj</code> files presented in the question appear to be consistent with each other as-is.  The <code>java</code> and <code>javac</code> commands compute classpath-relative directories for class files based on classes&#39; package names.  You don&#39;t do that yourself."},{"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"score":0,"creation_date":1690295547,"post_id":76763046,"comment_id":135331646,"body_markdown":"@JohnBollinger strangely, everything started up for me, as in the beginning the options files, did not change anything, what is it :-d D:\\Startjava\\out\nCalculator.java                                                                                           \nCalculatorTest.java   -cp D:\\Startjava\\out\ncom.startjava.lesson_2_3.calculator.CalculatorTest and work","body":"@JohnBollinger strangely, everything started up for me, as in the beginning the options files, did not change anything, what is it :-d D:\\Startjava\\out Calculator.java                                                                                            CalculatorTest.java   -cp D:\\Startjava\\out com.startjava.lesson_2_3.calculator.CalculatorTest and work"}],"owner":{"account_id":16336898,"reputation":107,"user_id":11996777,"display_name":"Tribjj"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690291231,"creation_date":1690290522,"question_id":76763046,"body_markdown":"unable to run and find classpath compiled files CalculatorTest.class, Calculator.class\r\nI think I&#39;m confused about absolute paths...\r\n\r\nfile options:\r\n\r\n    -d D:\\Startjava\\out\r\n    Calculator.java                                                                                           \r\n    CalculatorTest.java \r\n\r\nfile optionsj :\r\n\r\n    -cp D:\\Startjava\\out\r\n    com.starjava.lesson_2_3.calculator.CalculatorTest\r\n\r\ncompile run javac @options \r\n\r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n    λ javac @options                                                                                                                 \r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8  \r\n\r\n\r\nrun Could not find or load main class compiled files CalculatorTest.class, Calculator.class.\r\n\r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n    λ java @optionsj                                                                                                                 \r\n    Picked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8                                                                                \r\n    Error: Could not find or load main class com.starjava.lesson_2_3.calculator.CalculatorTest                                       \r\n    Caused by: java.lang.ClassNotFoundException: com.starjava.lesson_2_3.calculator.CalculatorTest\r\n\r\nsource CalculatorTest.java :\r\n\r\n    package com.startjava.lesson_2_3.calculator;\r\n    \r\n    import java.util.*;\r\n    \r\n    public class CalculatorTest {\r\n        public static void  main(String[] args) {\r\n    ...\r\n    }\r\n\r\nsource Calculator.java\r\n\r\n    package com.startjava.lesson_2_3.calculator;\r\n    \r\n    public class Calculator {\r\n    ...\r\n    }\r\n\r\nfile path options optionsj and source :\r\n    \r\n    D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \r\n    λ ls                                                                                                                             \r\n    Calculator.java  CalculatorTest.java  options  optionsj  ","title":"Could not find or load main class, when run java @options","body":"<p>unable to run and find classpath compiled files CalculatorTest.class, Calculator.class\nI think I'm confused about absolute paths...</p>\n<p>file options:</p>\n<pre><code>-d D:\\Startjava\\out\nCalculator.java                                                                                           \nCalculatorTest.java \n</code></pre>\n<p>file optionsj :</p>\n<pre><code>-cp D:\\Startjava\\out\ncom.starjava.lesson_2_3.calculator.CalculatorTest\n</code></pre>\n<p>compile run javac @options</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \nλ javac @options                                                                                                                 \nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8  \n</code></pre>\n<p>run Could not find or load main class compiled files CalculatorTest.class, Calculator.class.</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \nλ java @optionsj                                                                                                                 \nPicked up JAVA_TOOL_OPTIONS: -Dfile.encoding=UTF8                                                                                \nError: Could not find or load main class com.starjava.lesson_2_3.calculator.CalculatorTest                                       \nCaused by: java.lang.ClassNotFoundException: com.starjava.lesson_2_3.calculator.CalculatorTest\n</code></pre>\n<p>source CalculatorTest.java :</p>\n<pre><code>package com.startjava.lesson_2_3.calculator;\n\nimport java.util.*;\n\npublic class CalculatorTest {\n    public static void  main(String[] args) {\n...\n}\n</code></pre>\n<p>source Calculator.java</p>\n<pre><code>package com.startjava.lesson_2_3.calculator;\n\npublic class Calculator {\n...\n}\n</code></pre>\n<p>file path options optionsj and source :</p>\n<pre><code>D:\\Startjava\\src\\com\\startjava\\lesson_2_3\\calculator (master -&gt; origin)                                                          \nλ ls                                                                                                                             \nCalculator.java  CalculatorTest.java  options  optionsj  \n</code></pre>\n"},{"tags":["java","multithreading","threadpool"],"comments":[{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":1,"creation_date":1689757171,"post_id":76719484,"comment_id":135257011,"body_markdown":"Try Apache Camel, it will solve your issue. You can also use it in Non-Blocking way. https://camel.apache.org/","body":"Try Apache Camel, it will solve your issue. You can also use it in Non-Blocking way. <a href=\"https://camel.apache.org/\" rel=\"nofollow noreferrer\">camel.apache.org</a>"},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1689861696,"post_id":76719484,"comment_id":135275681,"body_markdown":"@Shekhar Which feature of camel would allow parallel execution whilst also limiting to one parallel process per passenger?","body":"@Shekhar Which feature of camel would allow parallel execution whilst also limiting to one parallel process per passenger?"},{"owner":{"account_id":17348847,"reputation":79,"user_id":12567771,"display_name":"Shekhar"},"score":0,"creation_date":1689863581,"post_id":76719484,"comment_id":135276204,"body_markdown":"So Camel is a big framework for Workflows. You can customize the flows completely based on your requirement. \nIt provides you with all the interfaces that you can implement yourself and put conditions on Flows.","body":"So Camel is a big framework for Workflows. You can customize the flows completely based on your requirement.  It provides you with all the interfaces that you can implement yourself and put conditions on Flows."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1689866033,"post_id":76719484,"comment_id":135276868,"body_markdown":"I&#39;m very familiar with camel... I use it every day. I want to know the exact mechanism that will allow for parallel execution whilst also preventing messages for the same passenger from executing in parallel","body":"I&#39;m very familiar with camel... I use it every day. I want to know the exact mechanism that will allow for parallel execution whilst also preventing messages for the same passenger from executing in parallel"}],"answers":[{"comments":[{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1689760377,"post_id":76719806,"comment_id":135257718,"body_markdown":"This solution is based on existing Java building blocks, `Executors.newSingleThreadedExecutor()` and `hashCode() % partitionCount` reduces the parallelism unfortunately. I see the problem with `ThreadPoolExecutor`  because if has constructor with: `BlockingQueue` but this queue is not informed about existing jobs or finished jobs...","body":"This solution is based on existing Java building blocks, <code>Executors.newSingleThreadedExecutor()</code> and <code>hashCode() % partitionCount</code> reduces the parallelism unfortunately. I see the problem with <code>ThreadPoolExecutor</code>  because if has constructor with: <code>BlockingQueue</code> but this queue is not informed about existing jobs or finished jobs..."},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1689761226,"post_id":76719806,"comment_id":135257886,"body_markdown":"Seems partitioning is a simple, easy to understand solution. But partitioning is not about about 100% thread usage - it is more like a workaround to avoid conflicting jobs without locking or other methods. Synchronization is done via already implemented queues.","body":"Seems partitioning is a simple, easy to understand solution. But partitioning is not about about 100% thread usage - it is more like a workaround to avoid conflicting jobs without locking or other methods. Synchronization is done via already implemented queues."},{"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"score":1,"creation_date":1689851860,"post_id":76719806,"comment_id":135273325,"body_markdown":"For most workloads partitioning will evenly distribute your load across the threads. You are correct that some workloads may result in &quot;hot&quot; threads and &quot;idle&quot; threads. The other option would be a custom executor that buffers tasks for passengers that are currently executing on the pool. This complexity and synchronization would likely not yield better performance for most workloads.","body":"For most workloads partitioning will evenly distribute your load across the threads. You are correct that some workloads may result in &quot;hot&quot; threads and &quot;idle&quot; threads. The other option would be a custom executor that buffers tasks for passengers that are currently executing on the pool. This complexity and synchronization would likely not yield better performance for most workloads."}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689932505,"creation_date":1689758855,"answer_id":76719806,"question_id":76719484,"body_markdown":"In this situation you would likely use sharding/partitioning.\r\n\r\n```java\r\npublic interface HashFunction&lt;T&gt; {\r\n   /**\r\n    * Calculate a hash that is\r\n    *   - repeatable (same value always gets the same hash)\r\n    *   - evenly distributed (so jobs are distributed fairly across the threads)\r\n    */\r\n   int accept(T value);\r\n}\r\n```\r\n\r\n```java\r\n/**\r\n * Maintains threadCount single threaded executors\r\n * Ensures that tasks for the same ID execute serially, on a single thread\r\n * whilst jobs for different ID&#39;s can execute in parallel\r\n */\r\npublic class PartitionedExecutor&lt;ID&gt; {\r\n   private final int threadCount;\r\n   private final HashFunction&lt;ID&gt; hashFunction;\r\n   private final ExecutorService[] executors;\r\n   \r\n   public PartitionedExecutor(int threadCount, HashFunction&lt;ID&gt; hashFunction) {\r\n      this.threadCount = threadCount;\r\n\t  this.hashFunction = hashFunction;\r\n      this.executors = IntStream.range(0, threadCount)\r\n\t     .mapToObj(i -&gt; Executors.newSingleThreadedExecutor())\r\n         .toArray(Executors[]::new);\r\n   }   \r\n   \r\n   public Future&lt;V&gt; submit(ID identifier, Callable&lt;V&gt; task) {\r\n      int threadIndex = hashFunction.accept(identifier) % threadCount;\r\n      return executors[threadIndex].submit(task);\r\n   }\r\n}\r\n```\r\n\r\n```java\r\npublic class PassengerService {\r\n   private final PartitionedExecutor&lt;Long&gt; executor;\r\n\r\n   public PassengerService(int threadCount) {\r\n      // assuming passengerId is a Long here \r\n      // Using Long.hashCode() as the hash function\r\n      this.executor = new PartitionedExecutor&lt;&gt;(threadCount, Long::hashCode);\r\n   }\r\n   \r\n   public Future&lt;Result&gt; processOrder(PassengerOrder order) {\r\n      return executor.submit(order.getPassengerId(), () -&gt; doProcessOrder(order));\r\n   }\r\n   \r\n   public Future&lt;Result&gt; processAmend(PassengerAmend amend) {\r\n      return executor.submit(amend.getPassengerId(), () -&gt; doProcessAmend(amend));\r\n   }\r\n\r\n   public Future&lt;Result&gt; processDelete(Long passengerId) {\r\n      return executor.submit(passengerId, () -&gt; doProcessDelete(passengerId));\r\n   }\r\n   \r\n   private Result doProcessOrder(PassengerOrder order) {\r\n      // TODO: implement\r\n   }\r\n   \r\n   private Result doProcessAmend(PassengerAmend amend) {\r\n      // TODO: implement\r\n   }\r\n\r\n   private Result doProcessDelete(Long passengerId) {\r\n      // TODO: implement\r\n   }\r\n}\r\n```\r\n\r\n[Apache Kafka](https://kafka.apache.org/) has this concept at it&#39;s heart (you can&#39;t send a message without first assigning it a partition)\r\n","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>In this situation you would likely use sharding/partitioning.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface HashFunction&lt;T&gt; {\n   /**\n    * Calculate a hash that is\n    *   - repeatable (same value always gets the same hash)\n    *   - evenly distributed (so jobs are distributed fairly across the threads)\n    */\n   int accept(T value);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>/**\n * Maintains threadCount single threaded executors\n * Ensures that tasks for the same ID execute serially, on a single thread\n * whilst jobs for different ID's can execute in parallel\n */\npublic class PartitionedExecutor&lt;ID&gt; {\n   private final int threadCount;\n   private final HashFunction&lt;ID&gt; hashFunction;\n   private final ExecutorService[] executors;\n   \n   public PartitionedExecutor(int threadCount, HashFunction&lt;ID&gt; hashFunction) {\n      this.threadCount = threadCount;\n      this.hashFunction = hashFunction;\n      this.executors = IntStream.range(0, threadCount)\n         .mapToObj(i -&gt; Executors.newSingleThreadedExecutor())\n         .toArray(Executors[]::new);\n   }   \n   \n   public Future&lt;V&gt; submit(ID identifier, Callable&lt;V&gt; task) {\n      int threadIndex = hashFunction.accept(identifier) % threadCount;\n      return executors[threadIndex].submit(task);\n   }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class PassengerService {\n   private final PartitionedExecutor&lt;Long&gt; executor;\n\n   public PassengerService(int threadCount) {\n      // assuming passengerId is a Long here \n      // Using Long.hashCode() as the hash function\n      this.executor = new PartitionedExecutor&lt;&gt;(threadCount, Long::hashCode);\n   }\n   \n   public Future&lt;Result&gt; processOrder(PassengerOrder order) {\n      return executor.submit(order.getPassengerId(), () -&gt; doProcessOrder(order));\n   }\n   \n   public Future&lt;Result&gt; processAmend(PassengerAmend amend) {\n      return executor.submit(amend.getPassengerId(), () -&gt; doProcessAmend(amend));\n   }\n\n   public Future&lt;Result&gt; processDelete(Long passengerId) {\n      return executor.submit(passengerId, () -&gt; doProcessDelete(passengerId));\n   }\n   \n   private Result doProcessOrder(PassengerOrder order) {\n      // TODO: implement\n   }\n   \n   private Result doProcessAmend(PassengerAmend amend) {\n      // TODO: implement\n   }\n\n   private Result doProcessDelete(Long passengerId) {\n      // TODO: implement\n   }\n}\n</code></pre>\n<p><a href=\"https://kafka.apache.org/\" rel=\"nofollow noreferrer\">Apache Kafka</a> has this concept at it's heart (you can't send a message without first assigning it a partition)</p>\n"},{"comments":[{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1690298826,"post_id":76763137,"comment_id":135332375,"body_markdown":"`ConcurrentMap` helps with building &quot;lock&quot; but this solution leaves rescheduling maintenance outside - where is the major burden is... Locking is simple, but messaging among the threads and the pool of jobs in not...","body":"<code>ConcurrentMap</code> helps with building &quot;lock&quot; but this solution leaves rescheduling maintenance outside - where is the major burden is... Locking is simple, but messaging among the threads and the pool of jobs in not..."},{"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"score":0,"creation_date":1690357693,"post_id":76763137,"comment_id":135340534,"body_markdown":"Could you add more information on desired behaviour in case of conflict.For e.g:\njobList=job1,job2job1,job1    \nif t1 thread is executing on job1 should it search for entire jobList first(if yes the dynamic nature of list i.e jobs addition is questionable) or it can go ahead and run the task?    \nIf t1 and t3 both try to run task then only one should succeed and the other one should ignore the request and mark the task as not completed and add in jobList again for trying again.","body":"Could you add more information on desired behaviour in case of conflict.For e.g: jobList=job1,job2job1,job1     if t1 thread is executing on job1 should it search for entire jobList first(if yes the dynamic nature of list i.e jobs addition is questionable) or it can go ahead and run the task?     If t1 and t3 both try to run task then only one should succeed and the other one should ignore the request and mark the task as not completed and add in jobList again for trying again."},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":0,"creation_date":1690367745,"post_id":76763137,"comment_id":135342667,"body_markdown":"Right, tasks operated over the resource that have some ID. 2 jobs cannot run simultaneously if they refer to the same ID. So when the task is retrieved from the pool of pending the first thing we need to insure no one operated that ID, but then we also need a proper rescheduling for postponed blocking tasks - returning to the pool end is not enough: if there are no any non-conflicting pending tasks - we don&#39;t want 100% CPU load to picking / returning the same objects.. So thread safe check for conflicts &amp; intelligent rescheduling are necessary.","body":"Right, tasks operated over the resource that have some ID. 2 jobs cannot run simultaneously if they refer to the same ID. So when the task is retrieved from the pool of pending the first thing we need to insure no one operated that ID, but then we also need a proper rescheduling for postponed blocking tasks - returning to the pool end is not enough: if there are no any non-conflicting pending tasks - we don&#39;t want 100% CPU load to picking / returning the same objects.. So thread safe check for conflicts &amp; intelligent rescheduling are necessary."}],"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690291178,"creation_date":1690291178,"answer_id":76763137,"question_id":76719484,"body_markdown":"Not sure about the libraries directly available for specific requirement but the [answer](https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843)\r\nwould work out well with arguably maximum concurrency.","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>Not sure about the libraries directly available for specific requirement but the <a href=\"https://stackoverflow.com/questions/76631561/allowing-a-single-thread-to-use-a-long-value/76737843#76737843\">answer</a>\nwould work out well with arguably maximum concurrency.</p>\n"}],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":88,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":2,"score":0,"last_activity_date":1690291178,"creation_date":1689756427,"question_id":76719484,"body_markdown":"We want to execute a set of jobs, but some are conflicting, meaning cannot be executed in parallel. Is there anything (interfaces / libraries) supporting workflow in Java ecosystem?\r\n\r\nLike we have passengers and we&#39;d like to process orders but two orders for the same passenger cannot be processed in parallel, but sequentially. \r\n\r\nThe pool of awaiting jobs on the event of a signal that the thread worker is ready to execute a task could check what jobs are still in work and pick any non-conflicting.\r\n\r\nThe standard Java thread pool executor has a queue embedded but that queue knows nothing about currently running jobs - it only uses some static order without knowledge of conflicting jobs.\r\n\r\n","title":"Java thread pool executor for conflicting jobs: conflicting jobs are stay in pool till workers report they finish processing conflicting jobs","body":"<p>We want to execute a set of jobs, but some are conflicting, meaning cannot be executed in parallel. Is there anything (interfaces / libraries) supporting workflow in Java ecosystem?</p>\n<p>Like we have passengers and we'd like to process orders but two orders for the same passenger cannot be processed in parallel, but sequentially.</p>\n<p>The pool of awaiting jobs on the event of a signal that the thread worker is ready to execute a task could check what jobs are still in work and pick any non-conflicting.</p>\n<p>The standard Java thread pool executor has a queue embedded but that queue knows nothing about currently running jobs - it only uses some static order without knowledge of conflicting jobs.</p>\n"},{"tags":["java","karate","karate-call-single"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690289126,"post_id":76762834,"comment_id":135329960,"body_markdown":"Show us the code","body":"Show us the code"},{"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"score":0,"creation_date":1690289510,"post_id":76762834,"comment_id":135330084,"body_markdown":"can not show due to policies. all the relevant details have been mentioned above.","body":"can not show due to policies. all the relevant details have been mentioned above."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690289575,"post_id":76762834,"comment_id":135330101,"body_markdown":"Even if you cannot share the original code, I recommend you make a [MCVE]. Debugging code is much easier than debugging a description of code.","body":"Even if you cannot share the original code, I recommend you make a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Debugging code is much easier than debugging a description of code."},{"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"score":0,"creation_date":1690290619,"post_id":76762834,"comment_id":135330355,"body_markdown":"added, now can be looked. @Jorn","body":"added, now can be looked. @Jorn"}],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55363,"user_id":143475,"display_name":"Peter Thomas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290665,"creation_date":1690290130,"answer_id":76762979,"question_id":76762834,"body_markdown":"Normally teams use `karate.callSingle()` for this kind of use-case: https://stackoverflow.com/a/56853597/143475\r\n\r\nIf you insist on using Java, use a singleton as described here: https://stackoverflow.com/a/54571844/143475\r\n\r\nPlease note that tests that depend on each other is not a good practice and not supported by Karate: https://stackoverflow.com/a/46080568/143475","title":"How to extract a variable&#39;s value in feature file that was set during an endpoint call to java service using Karate automation?","body":"<p>Normally teams use <code>karate.callSingle()</code> for this kind of use-case: <a href=\"https://stackoverflow.com/a/56853597/143475\">https://stackoverflow.com/a/56853597/143475</a></p>\n<p>If you insist on using Java, use a singleton as described here: <a href=\"https://stackoverflow.com/a/54571844/143475\">https://stackoverflow.com/a/54571844/143475</a></p>\n<p>Please note that tests that depend on each other is not a good practice and not supported by Karate: <a href=\"https://stackoverflow.com/a/46080568/143475\">https://stackoverflow.com/a/46080568/143475</a></p>\n"}],"owner":{"account_id":22246052,"reputation":9,"user_id":16479742,"display_name":"Manu Chittora"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690290665,"creation_date":1690289047,"question_id":76762834,"body_markdown":"Have a variable &#39;dummyVariable&#39; in a function of MyService.java file. Now I am calling an endpoint &#39;dummyEndpoint&#39; that sets the value of &#39;dummyVariable&#39; to true or false. \r\n\r\nI want to extract this value of &#39;dummyVariable&#39; after I call &#39;dummyEndpoint&#39; using Karate feature files by call() method.\r\n\r\nFurther I want to perform different actions in feature file depending on this value being true or false. Basically this can be treated as knowing whether an experiment is on or off in java service during an endpoint calling.\r\n\r\nMore crisp explanation-&gt;\r\ndummyEndpoint called from Karate file-&gt; sets a variable&#39;s value in java service -&gt; want to extract that value after call completion.\r\n\r\n//MyKarateFile .feature file  \r\n\r\n    Scenario: Make a call to service\r\n      Given url baseUrl\r\n      And path ‘/some-path’\r\n      And header Authorization = api\r\n      And param environment = env\r\n      And request req\r\n      When method POST\r\n      Then status 200\r\n      //want to check dummyVariable &#39;s value here\r\n\r\n//MyService .java\r\n\r\n    private final DummyVariableSetter dummyVariableSetter;\r\n    public int myFunction() {\r\n        boolean dummyVariable = dummyVariableSetter.isDummyVaribaleOn();\r\n        if(!dummyVariable) return 0;\r\n        return 1;\r\n    }\r\n\r\n//DummyVariableSetter .java\r\n\r\n    public boolean isDummyVaribaleOn() {\r\n        return getVersion(“some-property”) &gt;= 0;\r\n    }\r\n\r\n\r\ntried using exits() method of Karate but did not worked. ","title":"How to extract a variable&#39;s value in feature file that was set during an endpoint call to java service using Karate automation?","body":"<p>Have a variable 'dummyVariable' in a function of MyService.java file. Now I am calling an endpoint 'dummyEndpoint' that sets the value of 'dummyVariable' to true or false.</p>\n<p>I want to extract this value of 'dummyVariable' after I call 'dummyEndpoint' using Karate feature files by call() method.</p>\n<p>Further I want to perform different actions in feature file depending on this value being true or false. Basically this can be treated as knowing whether an experiment is on or off in java service during an endpoint calling.</p>\n<p>More crisp explanation-&gt;\ndummyEndpoint called from Karate file-&gt; sets a variable's value in java service -&gt; want to extract that value after call completion.</p>\n<p>//MyKarateFile .feature file  </p>\n<pre><code>Scenario: Make a call to service\n  Given url baseUrl\n  And path ‘/some-path’\n  And header Authorization = api\n  And param environment = env\n  And request req\n  When method POST\n  Then status 200\n  //want to check dummyVariable 's value here\n</code></pre>\n<p>//MyService .java</p>\n<pre><code>private final DummyVariableSetter dummyVariableSetter;\npublic int myFunction() {\n    boolean dummyVariable = dummyVariableSetter.isDummyVaribaleOn();\n    if(!dummyVariable) return 0;\n    return 1;\n}\n</code></pre>\n<p>//DummyVariableSetter .java</p>\n<pre><code>public boolean isDummyVaribaleOn() {\n    return getVersion(“some-property”) &gt;= 0;\n}\n</code></pre>\n<p>tried using exits() method of Karate but did not worked.</p>\n"},{"tags":["java","data-structures","printing","binary-tree"],"answers":[{"comments":[{"owner":{"account_id":235018,"reputation":364854,"user_id":501557,"accept_rate":90,"display_name":"templatetypedef"},"score":1,"creation_date":1297451927,"post_id":4966711,"comment_id":5551732,"body_markdown":"What if the tree isn&#39;t complete?  In that case it seems like you should be able to do this without doubling the space at each level.","body":"What if the tree isn&#39;t complete?  In that case it seems like you should be able to do this without doubling the space at each level."},{"owner":{"account_id":207873,"reputation":1751,"user_id":458014,"accept_rate":83,"display_name":"hd42"},"score":0,"creation_date":1297503441,"post_id":4966711,"comment_id":5557545,"body_markdown":"Yes, but only in some very limited cases where most subtrees are linked lists instead of trees from the same level downward or you would draw different subtrees with different spacing between the layers...","body":"Yes, but only in some very limited cases where most subtrees are linked lists instead of trees from the same level downward or you would draw different subtrees with different spacing between the layers..."}],"tags":[],"owner":{"account_id":207873,"reputation":1751,"user_id":458014,"accept_rate":83,"display_name":"hd42"},"comment_count":2,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1297410306,"creation_date":1297410306,"answer_id":4966711,"question_id":4965335,"body_markdown":"Your tree will need twice the distance for each layer:\r\n&lt;pre&gt;       a\r\n      / \\\r\n     /   \\\r\n    /     \\\r\n   /       \\\r\n   b       c\r\n  / \\     / \\\r\n /   \\   /   \\\r\n d   e   f   g\r\n/ \\ / \\ / \\ / \\\r\nh i j k l m n o&lt;/pre&gt;\r\nYou can save your tree in an array of arrays, one array for every depth:\r\n&lt;pre&gt;[[a],[b,c],[d,e,f,g],[h,i,j,k,l,m,n,o]]&lt;/pre&gt;\r\nIf your tree is not full, you need to include empty values in that array:\r\n&lt;pre&gt;       a\r\n      / \\\r\n     /   \\\r\n    /     \\\r\n   /       \\\r\n   b       c\r\n  / \\     / \\\r\n /   \\   /   \\\r\n d   e   f   g\r\n/ \\   \\ / \\   \\\r\nh i   k l m   o\r\n[[a],[b,c],[d,e,f,g],[h,i, ,k,l,m, ,o]]&lt;/pre&gt;\r\nThen you can iterate over the array to print your tree, printing spaces before the first element and between the elements depending on the depth and printing the lines depending on if the corresponding elements in the array for the next layer are filled or not.\r\nIf your values can be more than one character long, you need to find the longest value while creating the array representation and multiply all widths and the number of lines accordingly.","title":"How to print binary tree diagram in Java?","body":"<p>Your tree will need twice the distance for each layer:</p>\n\n<pre>       a\n      / \\\n     /   \\\n    /     \\\n   /       \\\n   b       c\n  / \\     / \\\n /   \\   /   \\\n d   e   f   g\n/ \\ / \\ / \\ / \\\nh i j k l m n o</pre>\n\n<p>You can save your tree in an array of arrays, one array for every depth:</p>\n\n<pre>[[a],[b,c],[d,e,f,g],[h,i,j,k,l,m,n,o]]</pre>\n\n<p>If your tree is not full, you need to include empty values in that array:</p>\n\n<pre>       a\n      / \\\n     /   \\\n    /     \\\n   /       \\\n   b       c\n  / \\     / \\\n /   \\   /   \\\n d   e   f   g\n/ \\   \\ / \\   \\\nh i   k l m   o\n[[a],[b,c],[d,e,f,g],[h,i, ,k,l,m, ,o]]</pre>\n\n<p>Then you can iterate over the array to print your tree, printing spaces before the first element and between the elements depending on the depth and printing the lines depending on if the corresponding elements in the array for the next layer are filled or not.\nIf your values can be more than one character long, you need to find the longest value while creating the array representation and multiply all widths and the number of lines accordingly.</p>\n"},{"comments":[{"owner":{"account_id":2849300,"reputation":614,"user_id":2446827,"accept_rate":50,"display_name":"jijesh Aj"},"score":1,"creation_date":1377497148,"post_id":4973083,"comment_id":27090447,"body_markdown":"how to convert this output to horizontal?","body":"how to convert this output to horizontal?"},{"owner":{"account_id":114552,"reputation":12230,"user_id":301153,"accept_rate":88,"display_name":"michal.kreuzman"},"score":0,"creation_date":1377529124,"post_id":4973083,"comment_id":27106837,"body_markdown":"For horizontal output is better to use Vasya Novikov&#39;s solution.","body":"For horizontal output is better to use Vasya Novikov&#39;s solution."},{"owner":{"account_id":1743673,"reputation":549,"user_id":1594354,"display_name":"DJ&#39;"},"score":3,"creation_date":1379290713,"post_id":4973083,"comment_id":27757510,"body_markdown":"It will be great if you can elaborate on choosing 2^n - 1 as first spaces and 2^(n+1) - 1 as the between spaces","body":"It will be great if you can elaborate on choosing 2^n - 1 as first spaces and 2^(n+1) - 1 as the between spaces"},{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":1,"creation_date":1420273200,"post_id":4973083,"comment_id":43916892,"body_markdown":"It is good for balanced trees as I tried it for one of the right-skewed trees of 15 values and it became very unmanageable to see the print.","body":"It is good for balanced trees as I tried it for one of the right-skewed trees of 15 values and it became very unmanageable to see the print."},{"owner":{"account_id":2506651,"reputation":18472,"user_id":2180189,"accept_rate":71,"display_name":"MightyPork"},"score":0,"creation_date":1429286909,"post_id":4973083,"comment_id":47544120,"body_markdown":"This works OK if the nodes are 1 digit or at least equally wide, but it breaks for warying sizes. See my answer for a better version of this.","body":"This works OK if the nodes are 1 digit or at least equally wide, but it breaks for warying sizes. See my answer for a better version of this."},{"owner":{"account_id":1110258,"reputation":537,"user_id":1100859,"accept_rate":67,"display_name":"Breina"},"score":4,"creation_date":1486819776,"post_id":4973083,"comment_id":71516267,"body_markdown":"My tree is 44 layers deep, so java crashes when trying to print 8796093022207 whitespaces. So be warned.","body":"My tree is 44 layers deep, so java crashes when trying to print 8796093022207 whitespaces. So be warned."}],"tags":[],"owner":{"account_id":114552,"reputation":12230,"user_id":301153,"accept_rate":88,"display_name":"michal.kreuzman"},"comment_count":6,"down_vote_count":0,"up_vote_count":277,"is_accepted":true,"score":277,"last_activity_date":1297454569,"creation_date":1297451815,"answer_id":4973083,"question_id":4965335,"body_markdown":"I&#39;ve created simple binary tree printer. You can use and modify it as you want, but it&#39;s not optimized anyway. I think that a lot of things can be improved here ;)\r\n\r\n\r\n    import java.util.ArrayList;\r\n\timport java.util.Collections;\r\n\timport java.util.List;\r\n\t\r\n\tpublic class BTreePrinterTest {\r\n\t\r\n\t\tprivate static Node&lt;Integer&gt; test1() {\r\n\t\t\tNode&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\r\n\t\t\tNode&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(3);\r\n\t\t\tNode&lt;Integer&gt; n24 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\r\n\t\t\tNode&lt;Integer&gt; n34 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n35 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n36 = new Node&lt;Integer&gt;(4);\r\n\t\t\tNode&lt;Integer&gt; n37 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n38 = new Node&lt;Integer&gt;(8);\r\n\t\r\n\t\t\troot.left = n11;\r\n\t\t\troot.right = n12;\r\n\t\r\n\t\t\tn11.left = n21;\r\n\t\t\tn11.right = n22;\r\n\t\t\tn12.left = n23;\r\n\t\t\tn12.right = n24;\r\n\t\r\n\t\t\tn21.left = n31;\r\n\t\t\tn21.right = n32;\r\n\t\t\tn22.left = n33;\r\n\t\t\tn22.right = n34;\r\n\t\t\tn23.left = n35;\r\n\t\t\tn23.right = n36;\r\n\t\t\tn24.left = n37;\r\n\t\t\tn24.right = n38;\r\n\t\r\n\t\t\treturn root;\r\n\t\t}\r\n\t\r\n\t\tprivate static Node&lt;Integer&gt; test2() {\r\n\t\t\tNode&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\r\n\t\t\tNode&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\r\n\t\t\tNode&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\r\n\t\t\tNode&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(9);\r\n\t\t\tNode&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\r\n\t\t\tNode&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\r\n\t\t\tNode&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\r\n\t\r\n\t\t\troot.left = n11;\r\n\t\t\troot.right = n12;\r\n\t\r\n\t\t\tn11.left = n21;\r\n\t\t\tn11.right = n22;\r\n\t\r\n\t\t\tn12.right = n23;\r\n\t\t\tn22.left = n31;\r\n\t\t\tn22.right = n32;\r\n\t\r\n\t\t\tn23.left = n33;\r\n\t\r\n\t\t\treturn root;\r\n\t\t}\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\r\n\t\t\tBTreePrinter.printNode(test1());\r\n\t\t\tBTreePrinter.printNode(test2());\r\n\t\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass Node&lt;T extends Comparable&lt;?&gt;&gt; {\r\n\t\tNode&lt;T&gt; left, right;\r\n\t\tT data;\r\n\t\r\n\t\tpublic Node(T data) {\r\n\t\t\tthis.data = data;\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass BTreePrinter {\r\n\t\r\n\t\tpublic static &lt;T extends Comparable&lt;?&gt;&gt; void printNode(Node&lt;T&gt; root) {\r\n\t\t\tint maxLevel = BTreePrinter.maxLevel(root);\r\n\t\r\n\t\t\tprintNodeInternal(Collections.singletonList(root), 1, maxLevel);\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T extends Comparable&lt;?&gt;&gt; void printNodeInternal(List&lt;Node&lt;T&gt;&gt; nodes, int level, int maxLevel) {\r\n\t\t\tif (nodes.isEmpty() || BTreePrinter.isAllElementsNull(nodes))\r\n\t\t\t\treturn;\r\n\t\r\n\t\t\tint floor = maxLevel - level;\r\n\t\t\tint endgeLines = (int) Math.pow(2, (Math.max(floor - 1, 0)));\r\n\t\t\tint firstSpaces = (int) Math.pow(2, (floor)) - 1;\r\n\t\t\tint betweenSpaces = (int) Math.pow(2, (floor + 1)) - 1;\r\n\t\r\n\t\t\tBTreePrinter.printWhitespaces(firstSpaces);\r\n\t\r\n\t\t\tList&lt;Node&lt;T&gt;&gt; newNodes = new ArrayList&lt;Node&lt;T&gt;&gt;();\r\n\t\t\tfor (Node&lt;T&gt; node : nodes) {\r\n\t\t\t\tif (node != null) {\r\n\t\t\t\t\tSystem.out.print(node.data);\r\n\t\t\t\t\tnewNodes.add(node.left);\r\n\t\t\t\t\tnewNodes.add(node.right);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewNodes.add(null);\r\n\t\t\t\t\tnewNodes.add(null);\r\n\t\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tBTreePrinter.printWhitespaces(betweenSpaces);\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\r\n\t\t\tfor (int i = 1; i &lt;= endgeLines; i++) {\r\n\t\t\t\tfor (int j = 0; j &lt; nodes.size(); j++) {\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(firstSpaces - i);\r\n\t\t\t\t\tif (nodes.get(j) == null) {\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(endgeLines + endgeLines + i + 1);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tif (nodes.get(j).left != null)\r\n\t\t\t\t\t\tSystem.out.print(&quot;/&quot;);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(1);\r\n\t\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(i + i - 1);\r\n\t\r\n\t\t\t\t\tif (nodes.get(j).right != null)\r\n\t\t\t\t\t\tSystem.out.print(&quot;\\\\&quot;);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tBTreePrinter.printWhitespaces(1);\r\n\t\r\n\t\t\t\t\tBTreePrinter.printWhitespaces(endgeLines + endgeLines - i);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tSystem.out.println(&quot;&quot;);\r\n\t\t\t}\r\n\t\r\n\t\t\tprintNodeInternal(newNodes, level + 1, maxLevel);\r\n\t\t}\r\n\t\r\n\t\tprivate static void printWhitespaces(int count) {\r\n\t\t\tfor (int i = 0; i &lt; count; i++)\r\n\t\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T extends Comparable&lt;?&gt;&gt; int maxLevel(Node&lt;T&gt; node) {\r\n\t\t\tif (node == null)\r\n\t\t\t\treturn 0;\r\n\t\r\n\t\t\treturn Math.max(BTreePrinter.maxLevel(node.left), BTreePrinter.maxLevel(node.right)) + 1;\r\n\t\t}\r\n\t\r\n\t\tprivate static &lt;T&gt; boolean isAllElementsNull(List&lt;T&gt; list) {\r\n\t\t\tfor (Object object : list) {\r\n\t\t\t\tif (object != null)\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\r\n\t}\r\n\r\nOutput 1 :\r\n\r\n             2               \r\n            / \\       \r\n           /   \\      \r\n          /     \\     \r\n         /       \\    \r\n         7       5       \r\n        / \\     / \\   \r\n       /   \\   /   \\  \r\n       2   6   3   6   \r\n      / \\ / \\ / \\ / \\ \r\n      5 8 4 5 8 4 5 8 \r\n\r\nOutput 2 :\r\n\r\n           2               \r\n          / \\       \r\n         /   \\      \r\n        /     \\     \r\n       /       \\    \r\n       7       5       \r\n      / \\       \\   \r\n     /   \\       \\  \r\n     2   6       9   \r\n        / \\     /   \r\n        5 8     4   \r\n\r\n ","title":"How to print binary tree diagram in Java?","body":"<p>I've created simple binary tree printer. You can use and modify it as you want, but it's not optimized anyway. I think that a lot of things can be improved here ;)</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.Collections;\nimport java.util.List;\n\npublic class BTreePrinterTest {\n\n    private static Node&lt;Integer&gt; test1() {\n        Node&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\n        Node&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(3);\n        Node&lt;Integer&gt; n24 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\n        Node&lt;Integer&gt; n34 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n35 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n36 = new Node&lt;Integer&gt;(4);\n        Node&lt;Integer&gt; n37 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n38 = new Node&lt;Integer&gt;(8);\n\n        root.left = n11;\n        root.right = n12;\n\n        n11.left = n21;\n        n11.right = n22;\n        n12.left = n23;\n        n12.right = n24;\n\n        n21.left = n31;\n        n21.right = n32;\n        n22.left = n33;\n        n22.right = n34;\n        n23.left = n35;\n        n23.right = n36;\n        n24.left = n37;\n        n24.right = n38;\n\n        return root;\n    }\n\n    private static Node&lt;Integer&gt; test2() {\n        Node&lt;Integer&gt; root = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n11 = new Node&lt;Integer&gt;(7);\n        Node&lt;Integer&gt; n12 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n21 = new Node&lt;Integer&gt;(2);\n        Node&lt;Integer&gt; n22 = new Node&lt;Integer&gt;(6);\n        Node&lt;Integer&gt; n23 = new Node&lt;Integer&gt;(9);\n        Node&lt;Integer&gt; n31 = new Node&lt;Integer&gt;(5);\n        Node&lt;Integer&gt; n32 = new Node&lt;Integer&gt;(8);\n        Node&lt;Integer&gt; n33 = new Node&lt;Integer&gt;(4);\n\n        root.left = n11;\n        root.right = n12;\n\n        n11.left = n21;\n        n11.right = n22;\n\n        n12.right = n23;\n        n22.left = n31;\n        n22.right = n32;\n\n        n23.left = n33;\n\n        return root;\n    }\n\n    public static void main(String[] args) {\n\n        BTreePrinter.printNode(test1());\n        BTreePrinter.printNode(test2());\n\n    }\n}\n\nclass Node&lt;T extends Comparable&lt;?&gt;&gt; {\n    Node&lt;T&gt; left, right;\n    T data;\n\n    public Node(T data) {\n        this.data = data;\n    }\n}\n\nclass BTreePrinter {\n\n    public static &lt;T extends Comparable&lt;?&gt;&gt; void printNode(Node&lt;T&gt; root) {\n        int maxLevel = BTreePrinter.maxLevel(root);\n\n        printNodeInternal(Collections.singletonList(root), 1, maxLevel);\n    }\n\n    private static &lt;T extends Comparable&lt;?&gt;&gt; void printNodeInternal(List&lt;Node&lt;T&gt;&gt; nodes, int level, int maxLevel) {\n        if (nodes.isEmpty() || BTreePrinter.isAllElementsNull(nodes))\n            return;\n\n        int floor = maxLevel - level;\n        int endgeLines = (int) Math.pow(2, (Math.max(floor - 1, 0)));\n        int firstSpaces = (int) Math.pow(2, (floor)) - 1;\n        int betweenSpaces = (int) Math.pow(2, (floor + 1)) - 1;\n\n        BTreePrinter.printWhitespaces(firstSpaces);\n\n        List&lt;Node&lt;T&gt;&gt; newNodes = new ArrayList&lt;Node&lt;T&gt;&gt;();\n        for (Node&lt;T&gt; node : nodes) {\n            if (node != null) {\n                System.out.print(node.data);\n                newNodes.add(node.left);\n                newNodes.add(node.right);\n            } else {\n                newNodes.add(null);\n                newNodes.add(null);\n                System.out.print(\" \");\n            }\n\n            BTreePrinter.printWhitespaces(betweenSpaces);\n        }\n        System.out.println(\"\");\n\n        for (int i = 1; i &lt;= endgeLines; i++) {\n            for (int j = 0; j &lt; nodes.size(); j++) {\n                BTreePrinter.printWhitespaces(firstSpaces - i);\n                if (nodes.get(j) == null) {\n                    BTreePrinter.printWhitespaces(endgeLines + endgeLines + i + 1);\n                    continue;\n                }\n\n                if (nodes.get(j).left != null)\n                    System.out.print(\"/\");\n                else\n                    BTreePrinter.printWhitespaces(1);\n\n                BTreePrinter.printWhitespaces(i + i - 1);\n\n                if (nodes.get(j).right != null)\n                    System.out.print(\"\\\\\");\n                else\n                    BTreePrinter.printWhitespaces(1);\n\n                BTreePrinter.printWhitespaces(endgeLines + endgeLines - i);\n            }\n\n            System.out.println(\"\");\n        }\n\n        printNodeInternal(newNodes, level + 1, maxLevel);\n    }\n\n    private static void printWhitespaces(int count) {\n        for (int i = 0; i &lt; count; i++)\n            System.out.print(\" \");\n    }\n\n    private static &lt;T extends Comparable&lt;?&gt;&gt; int maxLevel(Node&lt;T&gt; node) {\n        if (node == null)\n            return 0;\n\n        return Math.max(BTreePrinter.maxLevel(node.left), BTreePrinter.maxLevel(node.right)) + 1;\n    }\n\n    private static &lt;T&gt; boolean isAllElementsNull(List&lt;T&gt; list) {\n        for (Object object : list) {\n            if (object != null)\n                return false;\n        }\n\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>Output 1 :</p>\n\n<pre><code>         2               \n        / \\       \n       /   \\      \n      /     \\     \n     /       \\    \n     7       5       \n    / \\     / \\   \n   /   \\   /   \\  \n   2   6   3   6   \n  / \\ / \\ / \\ / \\ \n  5 8 4 5 8 4 5 8 \n</code></pre>\n\n<p>Output 2 :</p>\n\n<pre><code>       2               \n      / \\       \n     /   \\      \n    /     \\     \n   /       \\    \n   7       5       \n  / \\       \\   \n /   \\       \\  \n 2   6       9   \n    / \\     /   \n    5 8     4   \n</code></pre>\n"},{"comments":[{"owner":{"account_id":181139,"reputation":1434,"user_id":414939,"accept_rate":93,"display_name":"patentfox"},"score":0,"creation_date":1541178122,"post_id":8948691,"comment_id":93140490,"body_markdown":"Does this solution handle right skewed binary trees?","body":"Does this solution handle right skewed binary trees?"},{"owner":{"account_id":3378088,"reputation":542,"user_id":2835825,"accept_rate":57,"display_name":"Sorry"},"score":0,"creation_date":1541461966,"post_id":8948691,"comment_id":93218389,"body_markdown":"@VasyaNovikov how would you rewrite `children.get(children.size() - 1)` if HashMap was used for children? I managed to modify every other part but this one.","body":"@VasyaNovikov how would you rewrite <code>children.get(children.size() - 1)</code> if HashMap was used for children? I managed to modify every other part but this one."},{"owner":{"account_id":1098340,"reputation":9801,"user_id":1091436,"accept_rate":50,"display_name":"VasiliNovikov"},"score":0,"creation_date":1541484376,"post_id":8948691,"comment_id":93222922,"body_markdown":"@LeNguyenDuyAnh what&#39;s the HashMap proposed type signature though? `HashMap&lt;String, List&lt;String&gt;&gt;` ?","body":"@LeNguyenDuyAnh what&#39;s the HashMap proposed type signature though? <code>HashMap&lt;String, List&lt;String&gt;&gt;</code> ?"},{"owner":{"account_id":3378088,"reputation":542,"user_id":2835825,"accept_rate":57,"display_name":"Sorry"},"score":0,"creation_date":1541525720,"post_id":8948691,"comment_id":93244139,"body_markdown":"I have implemented my tree as `HashMap&lt;String, Node&gt;`. String is the Node&#39;s id.","body":"I have implemented my tree as <code>HashMap&lt;String, Node&gt;</code>. String is the Node&#39;s id."},{"owner":{"account_id":987285,"reputation":17009,"user_id":1005481,"accept_rate":89,"display_name":"barfuin"},"score":1,"creation_date":1591283823,"post_id":8948691,"comment_id":110003345,"body_markdown":"I actually implemented something similar in a small Java library called [text-tree](https://gitlab.com/barfuin/text-tree). Maybe it helps someone.","body":"I actually implemented something similar in a small Java library called <a href=\"https://gitlab.com/barfuin/text-tree\" rel=\"nofollow noreferrer\">text-tree</a>. Maybe it helps someone."},{"owner":{"account_id":1250278,"reputation":306,"user_id":1210814,"accept_rate":50,"display_name":"Shpytyack Artem"},"score":0,"creation_date":1655413171,"post_id":8948691,"comment_id":128333163,"body_markdown":"For me it prints ??? instead of &quot;├── &quot; and &quot;└── &quot;","body":"For me it prints ??? instead of &quot;├── &quot; and &quot;└── &quot;"}],"tags":[],"owner":{"account_id":1098340,"reputation":9801,"user_id":1091436,"accept_rate":50,"display_name":"VasiliNovikov"},"comment_count":6,"down_vote_count":1,"up_vote_count":341,"is_accepted":false,"score":340,"last_activity_date":1563618541,"creation_date":1327098563,"answer_id":8948691,"question_id":4965335,"body_markdown":"Print a [large] tree by lines.\r\n\r\noutput example:\r\n\r\n\tz\r\n\t├──&#160;c\r\n\t│&#160;&#160;&#160;├──&#160;a\r\n\t│&#160;&#160;&#160;└──&#160;b\r\n\t├──&#160;d\r\n\t├──&#160;e\r\n\t│&#160;&#160;&#160;└──&#160;asdf\r\n\t└──&#160;f\r\n\r\ncode:\r\n\r\n\tpublic class TreeNode {\r\n\t\r\n\t\tfinal String name;\r\n\t\tfinal List&lt;TreeNode&gt; children;\r\n\t\r\n\t\tpublic TreeNode(String name, List&lt;TreeNode&gt; children) {\r\n\t\t\tthis.name = name;\r\n\t\t\tthis.children = children;\r\n\t\t}\r\n\t\r\n\t\tpublic String toString() {\r\n\t\t\tStringBuilder buffer = new StringBuilder(50);\r\n\t\t\tprint(buffer, &quot;&quot;, &quot;&quot;);\r\n\t\t\treturn buffer.toString();\r\n\t\t}\r\n\t\r\n\t\tprivate void print(StringBuilder buffer, String prefix, String childrenPrefix) {\r\n\t\t\tbuffer.append(prefix);\r\n\t\t\tbuffer.append(name);\r\n\t\t\tbuffer.append(&#39;\\n&#39;);\r\n\t\t\tfor (Iterator&lt;TreeNode&gt; it = children.iterator(); it.hasNext();) {\r\n\t\t\t\tTreeNode next = it.next();\r\n\t\t\t\tif (it.hasNext()) {\r\n\t\t\t\t\tnext.print(buffer, childrenPrefix + &quot;├── &quot;, childrenPrefix + &quot;│   &quot;);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnext.print(buffer, childrenPrefix + &quot;└── &quot;, childrenPrefix + &quot;    &quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nP.S. This answer doesn&#39;t exactly focus on &quot;binary&quot; trees -- instead, it prints all kinds of trees. Solution is inspired by the &quot;tree&quot; command in linux.","title":"How to print binary tree diagram in Java?","body":"<p>Print a [large] tree by lines.</p>\n\n<p>output example:</p>\n\n<pre><code>z\n├── c\n│   ├── a\n│   └── b\n├── d\n├── e\n│   └── asdf\n└── f\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>public class TreeNode {\n\n    final String name;\n    final List&lt;TreeNode&gt; children;\n\n    public TreeNode(String name, List&lt;TreeNode&gt; children) {\n        this.name = name;\n        this.children = children;\n    }\n\n    public String toString() {\n        StringBuilder buffer = new StringBuilder(50);\n        print(buffer, \"\", \"\");\n        return buffer.toString();\n    }\n\n    private void print(StringBuilder buffer, String prefix, String childrenPrefix) {\n        buffer.append(prefix);\n        buffer.append(name);\n        buffer.append('\\n');\n        for (Iterator&lt;TreeNode&gt; it = children.iterator(); it.hasNext();) {\n            TreeNode next = it.next();\n            if (it.hasNext()) {\n                next.print(buffer, childrenPrefix + \"├── \", childrenPrefix + \"│   \");\n            } else {\n                next.print(buffer, childrenPrefix + \"└── \", childrenPrefix + \"    \");\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>P.S. This answer doesn't exactly focus on \"binary\" trees -- instead, it prints all kinds of trees. Solution is inspired by the \"tree\" command in linux.</p>\n"},{"tags":[],"owner":{"account_id":2838904,"reputation":303,"user_id":2438880,"display_name":"Anurag Agarwal"},"comment_count":0,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1611702903,"creation_date":1373225455,"answer_id":17515532,"question_id":4965335,"body_markdown":"michal.kreuzman nice one I will have to say. It was useful.\r\n\r\nHowever, the above works only for single digits: if you are going to use more than one digit, the structure is going to get misplaced since you are using spaces and not tabs.\r\n\r\nAs for my later codes I needed more digits than only 2, so I made a program myself. \r\n\r\nIt has some bugs now, again right now I am feeling lazy to correct them but it prints very beautifully and the nodes can take a larger number of digits.\r\n\r\nThe tree is not going to be as the question mentions but it is 270 degrees rotated :)\r\n\r\n    public static void printBinaryTree(TreeNode root, int level){\r\n        if(root==null)\r\n             return;\r\n        printBinaryTree(root.right, level+1);\r\n        if(level!=0){\r\n            for(int i=0;i&lt;level-1;i++)\r\n                System.out.print(&quot;|\\t&quot;);\r\n            System.out.println(&quot;|-------&quot;+root.val);\r\n        }\r\n        else\r\n            System.out.println(root.val);\r\n        printBinaryTree(root.left, level+1);\r\n    }    \r\n\r\nPlace this function with your own specified TreeNode and keep the level initially 0, and enjoy! \r\n\r\nHere are some of the sample outputs:\r\n\r\n    |\t    |\t    |-------11\r\n    |\t    |-------10\r\n    |\t    |\t    |-------9\r\n    |-------8\r\n    |\t    |\t    |-------7\r\n    |\t    |-------6\r\n    |\t    |\t    |-------5\r\n    4\r\n    |\t    |-------3\r\n    |-------2\r\n    |\t    |-------1\r\n\r\n\r\n    |\t    |\t    |\t    |-------10\r\n    |\t    |\t    |-------9\r\n    |\t    |-------8\r\n    |\t    |\t    |-------7\r\n    |-------6\r\n    |\t    |-------5\r\n    4\r\n    |\t    |-------3\r\n    |-------2\r\n    |\t    |-------1\r\n\r\nOnly problem is with the extending branches; I will try to solve the problem as soon as possible but till then you can use it too.","title":"How to print binary tree diagram in Java?","body":"<p>michal.kreuzman nice one I will have to say. It was useful.</p>\n<p>However, the above works only for single digits: if you are going to use more than one digit, the structure is going to get misplaced since you are using spaces and not tabs.</p>\n<p>As for my later codes I needed more digits than only 2, so I made a program myself.</p>\n<p>It has some bugs now, again right now I am feeling lazy to correct them but it prints very beautifully and the nodes can take a larger number of digits.</p>\n<p>The tree is not going to be as the question mentions but it is 270 degrees rotated :)</p>\n<pre><code>public static void printBinaryTree(TreeNode root, int level){\n    if(root==null)\n         return;\n    printBinaryTree(root.right, level+1);\n    if(level!=0){\n        for(int i=0;i&lt;level-1;i++)\n            System.out.print(&quot;|\\t&quot;);\n        System.out.println(&quot;|-------&quot;+root.val);\n    }\n    else\n        System.out.println(root.val);\n    printBinaryTree(root.left, level+1);\n}    \n</code></pre>\n<p>Place this function with your own specified TreeNode and keep the level initially 0, and enjoy!</p>\n<p>Here are some of the sample outputs:</p>\n<pre><code>|       |       |-------11\n|       |-------10\n|       |       |-------9\n|-------8\n|       |       |-------7\n|       |-------6\n|       |       |-------5\n4\n|       |-------3\n|-------2\n|       |-------1\n\n\n|       |       |       |-------10\n|       |       |-------9\n|       |-------8\n|       |       |-------7\n|-------6\n|       |-------5\n4\n|       |-------3\n|-------2\n|       |-------1\n</code></pre>\n<p>Only problem is with the extending branches; I will try to solve the problem as soon as possible but till then you can use it too.</p>\n"},{"tags":[],"owner":{"display_name":"user1231969"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1381728086,"creation_date":1381728086,"answer_id":19353914,"question_id":4965335,"body_markdown":"I needed to print a binary tree in one of my projects, for that I have prepared a java class `TreePrinter`, one of the sample output is:\r\n&lt;pre&gt;&lt;code&gt;                [+]\r\n               /   \\\r\n              /     \\\r\n             /       \\\r\n            /         \\\r\n           /           \\\r\n        [*]             \\\r\n       /   \\             [-]\r\n[speed]     [2]         /   \\\r\n                    [45]     [12]&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nHere is the code for class `TreePrinter` along with class `TextNode`. For printing any tree you can just create an equivalent tree with `TextNode` class.\r\n\r\n&lt;pre&gt;\r\n&lt;code&gt;\r\nimport java.util.ArrayList;\r\n\r\npublic class TreePrinter {\r\n    \r\n    public TreePrinter(){\r\n    }\r\n    \r\n    public static String TreeString(TextNode root){\r\n        ArrayList&lt;String&gt; layers = new ArrayList&lt;&gt;();\r\n        ArrayList&lt;TextNode&gt; bottom = new ArrayList&lt;&gt;();\r\n         \r\n        FillBottom(bottom, root);  DrawEdges(root);\r\n        \r\n        int height = GetHeight(root);\r\n        for(int i = 0; i &lt; height; i++) layers.add(&quot;&quot;);\r\n        bottom.clear(); FillBottom(bottom, root);\r\n        \r\n        \r\n        int min = layers.get(0).length();\r\n        \r\n        for(int i = 0; i &lt; bottom.size(); i++){\r\n            TextNode n = bottom.get(i);\r\n            String s = layers.get(n.depth);\r\n            \r\n            while(s.length() &lt; n.x) s += &quot; &quot;;\r\n            if(min &gt; s.length()) min = s.length();\r\n            \r\n            if(!n.isEdge) s += &quot;[&quot;;\r\n            s += n.text;\r\n            if(!n.isEdge) s += &quot;]&quot;;\r\n            \r\n            layers.set(n.depth, s);\r\n        }\r\n\r\n        StringBuilder sb = new StringBuilder();\r\n        \r\n        for(int i = 0; i &lt; layers.size(); i++){\r\n            if(i != 0) sb.append(&quot;\\n&quot;);\r\n            sb.append(layers.get(i).substring(min));\r\n        }\r\n        \r\n        return sb.toString();\r\n    }\r\n    \r\n    private static void DrawEdges(TextNode n){\r\n        if(n == null) return;\r\n        if(isLeaf(n)) return;\r\n        \r\n        if(n.left != null){\r\n            int count = n.x - (n.left.x + n.left.text.length() + 2);\r\n            ArrayList&lt;TextNode&gt; temp = new ArrayList&lt;&gt;();\r\n            \r\n            for(int i = 0; i &lt; count; i++){\r\n                TextNode x = new TextNode(&quot;/&quot;); \r\n                x.isEdge = true;\r\n                x.x = n.x - i - 1;\r\n                x.depth = n.depth + i + 1;\r\n                if(i &gt; 0) temp.get(i-1).left = x;\r\n                temp.add(x);\r\n            }\r\n            \r\n            temp.get(count-1).left = n.left;\r\n            n.left.depth = temp.get(count-1).depth+1;\r\n            n.left = temp.get(0);\r\n            \r\n            DrawEdges(temp.get(count-1).left);\r\n        }\r\n        if(n.right != null){\r\n            int count = n.right.x - (n.x + n.text.length() + 2);\r\n            ArrayList&lt;TextNode&gt; temp = new ArrayList&lt;&gt;();\r\n            \r\n            for(int i = 0; i &lt; count; i++){\r\n                TextNode x = new TextNode(&quot;\\\\&quot;); \r\n                x.isEdge = true;\r\n                x.x = n.x + n.text.length() + 2 + i;\r\n                x.depth = n.depth + i + 1;\r\n                if(i &gt; 0) temp.get(i-1).right = x;\r\n                temp.add(x);\r\n            }\r\n            \r\n            temp.get(count-1).right = n.right;\r\n            n.right.depth = temp.get(count-1).depth+1;\r\n            n.right = temp.get(0);  \r\n            \r\n            DrawEdges(temp.get(count-1).right);\r\n        }\r\n    }\r\n    \r\n    private static void FillBottom(ArrayList&lt;TextNode&gt; bottom, TextNode n){\r\n        if(n == null) return;\r\n        \r\n        FillBottom(bottom, n.left);\r\n        \r\n        if(!bottom.isEmpty()){            \r\n            int i = bottom.size()-1;\r\n            while(bottom.get(i).isEdge) i--;\r\n            TextNode last = bottom.get(i);\r\n            \r\n            if(!n.isEdge) n.x = last.x + last.text.length() + 3;\r\n        }\r\n        bottom.add(n);\r\n        FillBottom(bottom, n.right);\r\n    }\r\n    \r\n    private static boolean isLeaf(TextNode n){\r\n        return (n.left == null &amp;&amp; n.right == null);\r\n    }\r\n    \r\n    private static int GetHeight(TextNode n){\r\n        if(n == null) return 0;\r\n        \r\n        int l = GetHeight(n.left);\r\n        int r = GetHeight(n.right);\r\n        \r\n        return Math.max(l, r) + 1;\r\n    }\r\n}\r\n\r\n\r\nclass TextNode {\r\n    public String text;\r\n    public TextNode parent, left, right;\r\n    public boolean isEdge;\r\n    public int x, depth;\r\n    \r\n    public TextNode(String text){\r\n        this.text = text;\r\n        parent = null; left = null; right = null;\r\n        isEdge = false;\r\n        x = 0; depth = 0;\r\n    }\r\n}\r\n&lt;/code&gt;\r\n&lt;/pre&gt;\r\n\r\nFinally here is a test class for printing given sample:\r\n&lt;pre&gt;&lt;code&gt;\r\npublic class Test {\r\n    \r\n    public static void main(String[] args){\r\n        TextNode root = new TextNode(&quot;+&quot;);\r\n        root.left = new TextNode(&quot;*&quot;);            root.left.parent = root;\r\n        root.right = new TextNode(&quot;-&quot;);           root.right.parent = root;\r\n        root.left.left = new TextNode(&quot;speed&quot;);   root.left.left.parent = root.left;\r\n        root.left.right = new TextNode(&quot;2&quot;);      root.left.right.parent = root.left;\r\n        root.right.left = new TextNode(&quot;45&quot;);     root.right.left.parent = root.right;\r\n        root.right.right = new TextNode(&quot;12&quot;);    root.right.right.parent = root.right;\r\n        \r\n        System.out.println(TreePrinter.TreeString(root));\r\n    }\r\n}\r\n&lt;/code&gt;&lt;/pre&gt;","title":"How to print binary tree diagram in Java?","body":"<p>I needed to print a binary tree in one of my projects, for that I have prepared a java class <code>TreePrinter</code>, one of the sample output is:</p>\n\n<pre><code>                [+]\n               /   \\\n              /     \\\n             /       \\\n            /         \\\n           /           \\\n        [*]             \\\n       /   \\             [-]\n[speed]     [2]         /   \\\n                    [45]     [12]</code>\n</pre>\n\n<p>Here is the code for class <code>TreePrinter</code> along with class <code>TextNode</code>. For printing any tree you can just create an equivalent tree with <code>TextNode</code> class.</p>\n\n<pre>\n<code>\nimport java.util.ArrayList;\n\npublic class TreePrinter {\n\n    public TreePrinter(){\n    }\n\n    public static String TreeString(TextNode root){\n        ArrayList layers = new ArrayList();\n        ArrayList bottom = new ArrayList();\n\n        FillBottom(bottom, root);  DrawEdges(root);\n\n        int height = GetHeight(root);\n        for(int i = 0; i  s.length()) min = s.length();\n\n            if(!n.isEdge) s += \"[\";\n            s += n.text;\n            if(!n.isEdge) s += \"]\";\n\n            layers.set(n.depth, s);\n        }\n\n        StringBuilder sb = new StringBuilder();\n\n        for(int i = 0; i  temp = new ArrayList();\n\n            for(int i = 0; i  0) temp.get(i-1).left = x;\n                temp.add(x);\n            }\n\n            temp.get(count-1).left = n.left;\n            n.left.depth = temp.get(count-1).depth+1;\n            n.left = temp.get(0);\n\n            DrawEdges(temp.get(count-1).left);\n        }\n        if(n.right != null){\n            int count = n.right.x - (n.x + n.text.length() + 2);\n            ArrayList temp = new ArrayList();\n\n            for(int i = 0; i  0) temp.get(i-1).right = x;\n                temp.add(x);\n            }\n\n            temp.get(count-1).right = n.right;\n            n.right.depth = temp.get(count-1).depth+1;\n            n.right = temp.get(0);  \n\n            DrawEdges(temp.get(count-1).right);\n        }\n    }\n\n    private static void FillBottom(ArrayList bottom, TextNode n){\n        if(n == null) return;\n\n        FillBottom(bottom, n.left);\n\n        if(!bottom.isEmpty()){            \n            int i = bottom.size()-1;\n            while(bottom.get(i).isEdge) i--;\n            TextNode last = bottom.get(i);\n\n            if(!n.isEdge) n.x = last.x + last.text.length() + 3;\n        }\n        bottom.add(n);\n        FillBottom(bottom, n.right);\n    }\n\n    private static boolean isLeaf(TextNode n){\n        return (n.left == null && n.right == null);\n    }\n\n    private static int GetHeight(TextNode n){\n        if(n == null) return 0;\n\n        int l = GetHeight(n.left);\n        int r = GetHeight(n.right);\n\n        return Math.max(l, r) + 1;\n    }\n}\n\n\nclass TextNode {\n    public String text;\n    public TextNode parent, left, right;\n    public boolean isEdge;\n    public int x, depth;\n\n    public TextNode(String text){\n        this.text = text;\n        parent = null; left = null; right = null;\n        isEdge = false;\n        x = 0; depth = 0;\n    }\n}\n</code>\n</pre>\n\n<p>Finally here is a test class for printing given sample:</p>\n\n<pre><code>\npublic class Test {\n\n    public static void main(String[] args){\n        TextNode root = new TextNode(\"+\");\n        root.left = new TextNode(\"*\");            root.left.parent = root;\n        root.right = new TextNode(\"-\");           root.right.parent = root;\n        root.left.left = new TextNode(\"speed\");   root.left.left.parent = root.left;\n        root.left.right = new TextNode(\"2\");      root.left.right.parent = root.left;\n        root.right.left = new TextNode(\"45\");     root.right.left.parent = root.right;\n        root.right.right = new TextNode(\"12\");    root.right.right.parent = root.right;\n\n        System.out.println(TreePrinter.TreeString(root));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":1,"creation_date":1555308825,"post_id":19484210,"comment_id":98050654,"body_markdown":"It&#39;d be awesome if you could rotate it 90&#176;.","body":"It&#39;d be awesome if you could rotate it 90&#176;."}],"tags":[],"owner":{"account_id":3465722,"reputation":797,"user_id":2901325,"display_name":"Laurent Demailly"},"comment_count":1,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1382312688,"creation_date":1382312688,"answer_id":19484210,"question_id":4965335,"body_markdown":"\tpublic static class Node&lt;T extends Comparable&lt;T&gt;&gt; {\r\n\t\tT value;\r\n\t\tNode&lt;T&gt; left, right;\r\n\r\n\t\tpublic void insertToTree(T v) {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tvalue = v;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (v.compareTo(value) &lt; 0) {\r\n\t\t\t\tif (left == null) {\r\n\t\t\t\t\tleft = new Node&lt;T&gt;();\r\n\t\t\t\t}\r\n\t\t\t\tleft.insertToTree(v);\r\n\t\t\t} else {\r\n\t\t\t\tif (right == null) {\r\n\t\t\t\t\tright = new Node&lt;T&gt;();\r\n\t\t\t\t}\r\n\t\t\t\tright.insertToTree(v);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic void printTree(OutputStreamWriter out) throws IOException {\r\n\t\t\tif (right != null) {\r\n\t\t\t\tright.printTree(out, true, &quot;&quot;);\r\n\t\t\t}\r\n\t\t\tprintNodeValue(out);\r\n\t\t\tif (left != null) {\r\n\t\t\t\tleft.printTree(out, false, &quot;&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\tprivate void printNodeValue(OutputStreamWriter out) throws IOException {\r\n\t\t\tif (value == null) {\r\n\t\t\t\tout.write(&quot;&lt;null&gt;&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tout.write(value.toString());\r\n\t\t\t}\r\n\t\t\tout.write(&#39;\\n&#39;);\r\n\t\t}\r\n\t\t// use string and not stringbuffer on purpose as we need to change the indent at each recursion\r\n\t\tprivate void printTree(OutputStreamWriter out, boolean isRight, String indent) throws IOException {\r\n\t\t\tif (right != null) {\r\n\t\t\t\tright.printTree(out, true, indent + (isRight ? &quot;        &quot; : &quot; |      &quot;));\r\n\t\t\t}\r\n\t\t\tout.write(indent);\r\n\t\t\tif (isRight) {\r\n\t\t\t\tout.write(&quot; /&quot;);\r\n\t\t\t} else {\r\n\t\t\t\tout.write(&quot; \\\\&quot;);\r\n\t\t\t}\r\n\t\t\tout.write(&quot;----- &quot;);\r\n\t\t\tprintNodeValue(out);\r\n\t\t\tif (left != null) {\r\n\t\t\t\tleft.printTree(out, false, indent + (isRight ? &quot; |      &quot; : &quot;        &quot;));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\nwill print:\r\n\r\n                     /----- 20\r\n                     |       \\----- 15\r\n             /----- 14\r\n             |       \\----- 13\r\n     /----- 12\r\n     |       |       /----- 11\r\n     |       \\----- 10\r\n     |               \\----- 9\r\n    8\r\n     |               /----- 7\r\n     |       /----- 6\r\n     |       |       \\----- 5\r\n     \\----- 4\r\n             |       /----- 3\r\n             \\----- 2\r\n                     \\----- 1\r\n\r\n\r\nfor the input\r\n\r\n8\r\n4\r\n12\r\n2\r\n6\r\n10\r\n14\r\n1\r\n3\r\n5\r\n7\r\n9\r\n11\r\n13\r\n20\r\n15\r\n\r\nthis is a variant from @anurag&#39;s answer - it was bugging me to see the extra |s\r\n","title":"How to print binary tree diagram in Java?","body":"<pre><code>public static class Node&lt;T extends Comparable&lt;T&gt;&gt; {\n    T value;\n    Node&lt;T&gt; left, right;\n\n    public void insertToTree(T v) {\n        if (value == null) {\n            value = v;\n            return;\n        }\n        if (v.compareTo(value) &lt; 0) {\n            if (left == null) {\n                left = new Node&lt;T&gt;();\n            }\n            left.insertToTree(v);\n        } else {\n            if (right == null) {\n                right = new Node&lt;T&gt;();\n            }\n            right.insertToTree(v);\n        }\n    }\n\n    public void printTree(OutputStreamWriter out) throws IOException {\n        if (right != null) {\n            right.printTree(out, true, \"\");\n        }\n        printNodeValue(out);\n        if (left != null) {\n            left.printTree(out, false, \"\");\n        }\n    }\n    private void printNodeValue(OutputStreamWriter out) throws IOException {\n        if (value == null) {\n            out.write(\"&lt;null&gt;\");\n        } else {\n            out.write(value.toString());\n        }\n        out.write('\\n');\n    }\n    // use string and not stringbuffer on purpose as we need to change the indent at each recursion\n    private void printTree(OutputStreamWriter out, boolean isRight, String indent) throws IOException {\n        if (right != null) {\n            right.printTree(out, true, indent + (isRight ? \"        \" : \" |      \"));\n        }\n        out.write(indent);\n        if (isRight) {\n            out.write(\" /\");\n        } else {\n            out.write(\" \\\\\");\n        }\n        out.write(\"----- \");\n        printNodeValue(out);\n        if (left != null) {\n            left.printTree(out, false, indent + (isRight ? \" |      \" : \"        \"));\n        }\n    }\n\n}\n</code></pre>\n\n<p>will print:</p>\n\n<pre><code>                 /----- 20\n                 |       \\----- 15\n         /----- 14\n         |       \\----- 13\n /----- 12\n |       |       /----- 11\n |       \\----- 10\n |               \\----- 9\n8\n |               /----- 7\n |       /----- 6\n |       |       \\----- 5\n \\----- 4\n         |       /----- 3\n         \\----- 2\n                 \\----- 1\n</code></pre>\n\n<p>for the input</p>\n\n<p>8\n4\n12\n2\n6\n10\n14\n1\n3\n5\n7\n9\n11\n13\n20\n15</p>\n\n<p>this is a variant from @anurag's answer - it was bugging me to see the extra |s</p>\n"},{"tags":[],"owner":{"account_id":3604825,"reputation":39,"user_id":3007237,"display_name":"Wenguang Wang"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1391283698,"creation_date":1391283698,"answer_id":21502660,"question_id":4965335,"body_markdown":"This is a very simple solution to print out a tree.  It is not that pretty, but it is really simple:\r\n\r\n    enum { kWidth = 6 };\r\n    void PrintSpace(int n)\r\n    {\r\n      for (int i = 0; i &lt; n; ++i)\r\n        printf(&quot; &quot;);\r\n    }\r\n\r\n    void PrintTree(struct Node * root, int level)\r\n    {\r\n      if (!root) return;\r\n      PrintTree(root-&gt;right, level + 1);\r\n      PrintSpace(level * kWidth);\r\n      printf(&quot;%d&quot;, root-&gt;data);\r\n      PrintTree(root-&gt;left, level + 1);\r\n    }\r\n\r\nSample output:\r\n&lt;pre&gt;\r\n      106\r\n            105\r\n104\r\n            103\r\n                  102\r\n                        101\r\n      100\r\n&lt;/pre&gt;\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>This is a very simple solution to print out a tree.  It is not that pretty, but it is really simple:</p>\n\n<pre><code>enum { kWidth = 6 };\nvoid PrintSpace(int n)\n{\n  for (int i = 0; i &lt; n; ++i)\n    printf(\" \");\n}\n\nvoid PrintTree(struct Node * root, int level)\n{\n  if (!root) return;\n  PrintTree(root-&gt;right, level + 1);\n  PrintSpace(level * kWidth);\n  printf(\"%d\", root-&gt;data);\n  PrintTree(root-&gt;left, level + 1);\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre>\n      106\n            105\n104\n            103\n                  102\n                        101\n      100\n</pre>\n"},{"tags":[],"owner":{"account_id":1008417,"reputation":831,"user_id":1021522,"display_name":"Sujit Kamthe"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1394287056,"creation_date":1394287056,"answer_id":22270258,"question_id":4965335,"body_markdown":"    public void printPreety() {\r\n\t\tList&lt;TreeNode&gt; list = new ArrayList&lt;TreeNode&gt;();\r\n\t\tlist.add(head);\r\n\t\tprintTree(list, getHeight(head));\r\n\t}\r\n\r\n\tpublic int getHeight(TreeNode head) {\r\n\r\n\t\tif (head == null) {\r\n\t\t\treturn 0;\r\n\t\t} else {\r\n\t\t\treturn 1 + Math.max(getHeight(head.left), getHeight(head.right));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * pass head node in list and height of the tree \r\n\t * \r\n\t * @param levelNodes\r\n\t * @param level\r\n\t */\r\n\tprivate void printTree(List&lt;TreeNode&gt; levelNodes, int level) {\r\n\r\n\t\tList&lt;TreeNode&gt; nodes = new ArrayList&lt;TreeNode&gt;();\r\n\t\t\r\n\t\t//indentation for first node in given level\r\n\t\tprintIndentForLevel(level);\r\n\t\t\r\n\t\tfor (TreeNode treeNode : levelNodes) {\r\n\t\t\t\r\n\t\t\t//print node data\r\n\t\t\tSystem.out.print(treeNode == null?&quot; &quot;:treeNode.data);\r\n\t\t\r\n\t\t\t//spacing between nodes\r\n\t\t\tprintSpacingBetweenNodes(level);\r\n\t\t\t\r\n\t\t\t//if its not a leaf node\r\n\t\t\tif(level&gt;1){\r\n\t\t\t\tnodes.add(treeNode == null? null:treeNode.left);\r\n\t\t\t\tnodes.add(treeNode == null? null:treeNode.right);\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\t\r\n\t\tif(level&gt;1){\t\t\r\n\t\t\tprintTree(nodes, level-1);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate void printIndentForLevel(int level){\r\n\t\tfor (int i = (int) (Math.pow(2,level-1)); i &gt;0; i--) {\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void printSpacingBetweenNodes(int level){\r\n\t\t//spacing between nodes\r\n\t\tfor (int i = (int) ((Math.pow(2,level-1))*2)-1; i &gt;0; i--) {\r\n\t\t\tSystem.out.print(&quot; &quot;);\r\n\t\t}\r\n\t}\r\n\r\n\r\n    Prints Tree in following format:\r\n                    4                               \r\n            3               7               \r\n        1               5       8       \r\n          2                       10   \r\n                                 9   ","title":"How to print binary tree diagram in Java?","body":"<pre><code>public void printPreety() {\n    List&lt;TreeNode&gt; list = new ArrayList&lt;TreeNode&gt;();\n    list.add(head);\n    printTree(list, getHeight(head));\n}\n\npublic int getHeight(TreeNode head) {\n\n    if (head == null) {\n        return 0;\n    } else {\n        return 1 + Math.max(getHeight(head.left), getHeight(head.right));\n    }\n}\n\n/**\n * pass head node in list and height of the tree \n * \n * @param levelNodes\n * @param level\n */\nprivate void printTree(List&lt;TreeNode&gt; levelNodes, int level) {\n\n    List&lt;TreeNode&gt; nodes = new ArrayList&lt;TreeNode&gt;();\n\n    //indentation for first node in given level\n    printIndentForLevel(level);\n\n    for (TreeNode treeNode : levelNodes) {\n\n        //print node data\n        System.out.print(treeNode == null?\" \":treeNode.data);\n\n        //spacing between nodes\n        printSpacingBetweenNodes(level);\n\n        //if its not a leaf node\n        if(level&gt;1){\n            nodes.add(treeNode == null? null:treeNode.left);\n            nodes.add(treeNode == null? null:treeNode.right);\n        }\n    }\n    System.out.println();\n\n    if(level&gt;1){        \n        printTree(nodes, level-1);\n    }\n}\n\nprivate void printIndentForLevel(int level){\n    for (int i = (int) (Math.pow(2,level-1)); i &gt;0; i--) {\n        System.out.print(\" \");\n    }\n}\n\nprivate void printSpacingBetweenNodes(int level){\n    //spacing between nodes\n    for (int i = (int) ((Math.pow(2,level-1))*2)-1; i &gt;0; i--) {\n        System.out.print(\" \");\n    }\n}\n\n\nPrints Tree in following format:\n                4                               \n        3               7               \n    1               5       8       \n      2                       10   \n                             9   \n</code></pre>\n"},{"comments":[{"owner":{"account_id":1257650,"reputation":23489,"user_id":1216775,"accept_rate":54,"display_name":"akhil_mittal"},"score":0,"creation_date":1420277042,"post_id":27153988,"comment_id":43917546,"body_markdown":"It does not work for a tree when we insert values: 30,40,50,60,70,80 into a BST. As that creates a right-skewed tree. The value for isTail should be false when `right != null`.I did the edit and tested it, it works fine.","body":"It does not work for a tree when we insert values: 30,40,50,60,70,80 into a BST. As that creates a right-skewed tree. The value for isTail should be false when <code>right != null</code>.I did the edit and tested it, it works fine."},{"owner":{"account_id":274883,"reputation":5504,"user_id":567390,"accept_rate":89,"display_name":"Todd Davies"},"score":0,"creation_date":1420277292,"post_id":27153988,"comment_id":43917587,"body_markdown":"Thanks for the input, I just edited the answer, it that better?","body":"Thanks for the input, I just edited the answer, it that better?"},{"owner":{"account_id":5444273,"reputation":572,"user_id":5441945,"display_name":"hychou"},"score":0,"creation_date":1497422397,"post_id":27153988,"comment_id":76065336,"body_markdown":"Thank you, @Vasya Novikov&#39;s answer is great but I need a linklist version of it, and your answer just fit my case.","body":"Thank you, @Vasya Novikov&#39;s answer is great but I need a linklist version of it, and your answer just fit my case."},{"owner":{"account_id":5431861,"reputation":1796,"user_id":4322461,"display_name":"p-sun"},"score":0,"creation_date":1507303928,"post_id":27153988,"comment_id":80170311,"body_markdown":"In all of the answers, this produces the best looking tree, and the code is very clean!","body":"In all of the answers, this produces the best looking tree, and the code is very clean!"},{"owner":{"account_id":1328516,"reputation":644,"user_id":1272886,"display_name":"Tom Silverman"},"score":0,"creation_date":1635949512,"post_id":27153988,"comment_id":123428604,"body_markdown":"Very nice and elegant solution!","body":"Very nice and elegant solution!"}],"tags":[],"owner":{"account_id":274883,"reputation":5504,"user_id":567390,"accept_rate":89,"display_name":"Todd Davies"},"comment_count":5,"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1425745175,"creation_date":1417018646,"answer_id":27153988,"question_id":4965335,"body_markdown":"Adapted from [Vasya Novikov][1]&#39;s [answer][2] to make it more *binary*, and use a `StringBuilder` for efficiency (concatenating `String` objects together in Java is generally inefficient).\r\n\r\n    public StringBuilder toString(StringBuilder prefix, boolean isTail, StringBuilder sb) {\r\n        if(right!=null) {\r\n            right.toString(new StringBuilder().append(prefix).append(isTail ? &quot;│   &quot; : &quot;    &quot;), false, sb);\r\n        }\r\n        sb.append(prefix).append(isTail ? &quot;└── &quot; : &quot;┌── &quot;).append(value.toString()).append(&quot;\\n&quot;);\r\n        if(left!=null) {\r\n            left.toString(new StringBuilder().append(prefix).append(isTail ? &quot;    &quot; : &quot;│   &quot;), true, sb);\r\n        }\r\n        return sb;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return this.toString(new StringBuilder(), true, new StringBuilder()).toString();\r\n    }\r\n\r\nOutput:\r\n\r\n    │       ┌── 7\r\n    │   ┌── 6\r\n    │   │   └── 5\r\n    └── 4\r\n        │   ┌── 3\r\n        └── 2\r\n            └── 1\r\n                └── 0\r\n\r\n\r\n  [1]: https://stackoverflow.com/users/1091436/vasya-novikov\r\n  [2]: https://stackoverflow.com/a/8948691/567390","title":"How to print binary tree diagram in Java?","body":"<p>Adapted from <a href=\"https://stackoverflow.com/users/1091436/vasya-novikov\">Vasya Novikov</a>'s <a href=\"https://stackoverflow.com/a/8948691/567390\">answer</a> to make it more <em>binary</em>, and use a <code>StringBuilder</code> for efficiency (concatenating <code>String</code> objects together in Java is generally inefficient).</p>\n\n<pre><code>public StringBuilder toString(StringBuilder prefix, boolean isTail, StringBuilder sb) {\n    if(right!=null) {\n        right.toString(new StringBuilder().append(prefix).append(isTail ? \"│   \" : \"    \"), false, sb);\n    }\n    sb.append(prefix).append(isTail ? \"└── \" : \"┌── \").append(value.toString()).append(\"\\n\");\n    if(left!=null) {\n        left.toString(new StringBuilder().append(prefix).append(isTail ? \"    \" : \"│   \"), true, sb);\n    }\n    return sb;\n}\n\n@Override\npublic String toString() {\n    return this.toString(new StringBuilder(), true, new StringBuilder()).toString();\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>│       ┌── 7\n│   ┌── 6\n│   │   └── 5\n└── 4\n    │   ┌── 3\n    └── 2\n        └── 1\n            └── 0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1650790,"reputation":654,"user_id":1521453,"accept_rate":67,"display_name":"Vikrant Goel"},"score":0,"creation_date":1430119755,"post_id":29704252,"comment_id":47902869,"body_markdown":"I was trying to replicate the &quot;selected answer&quot; technique.\nBut I think this one of the best answers here. So Robust and concise.","body":"I was trying to replicate the &quot;selected answer&quot; technique. But I think this one of the best answers here. So Robust and concise."},{"owner":{"account_id":4548627,"reputation":179,"user_id":3694398,"accept_rate":58,"display_name":"mitbanip"},"score":2,"creation_date":1441827169,"post_id":29704252,"comment_id":52836146,"body_markdown":"After implementing this it appears to work great, but only for balanced trees. Anything imbalanced returns odd results.","body":"After implementing this it appears to work great, but only for balanced trees. Anything imbalanced returns odd results."},{"owner":{"account_id":5185694,"reputation":327,"user_id":4150151,"accept_rate":100,"display_name":"Fitz"},"score":0,"creation_date":1469785574,"post_id":29704252,"comment_id":64692448,"body_markdown":"I get `???????????` instead of the lines between nodes but should be just some UTF8 ans stuff problem. Anyway, great stuff, I have to say. Best answer for me as it is really easy to use.","body":"I get <code>???????????</code> instead of the lines between nodes but should be just some UTF8 ans stuff problem. Anyway, great stuff, I have to say. Best answer for me as it is really easy to use."},{"owner":{"account_id":5185694,"reputation":327,"user_id":4150151,"accept_rate":100,"display_name":"Fitz"},"score":0,"creation_date":1469785878,"post_id":29704252,"comment_id":64692658,"body_markdown":"Yes, that was it. Just had to change all the special characters of your _lines and spaces_ paragraph.","body":"Yes, that was it. Just had to change all the special characters of your <i>lines and spaces</i> paragraph."},{"owner":{"account_id":5123878,"reputation":4700,"user_id":4106653,"accept_rate":100,"display_name":"Neo"},"score":0,"creation_date":1491760449,"post_id":29704252,"comment_id":73684652,"body_markdown":"Nice, to support printing an array of elements, created a [gist](https://gist.github.com/rahulsh1/48dc557c76b3fe5609ae4445d5284210) which just does that using @MightyPork logic for printing the tree. See `public static &lt;T&gt; void print(T[] elems)`","body":"Nice, to support printing an array of elements, created a <a href=\"https://gist.github.com/rahulsh1/48dc557c76b3fe5609ae4445d5284210\" rel=\"nofollow noreferrer\">gist</a> which just does that using @MightyPork logic for printing the tree. See <code>public static &lt;T&gt; void print(T[] elems)</code>"},{"owner":{"account_id":3741904,"reputation":2009,"user_id":3128652,"display_name":"Vaibhav Jain"},"score":0,"creation_date":1497461177,"post_id":29704252,"comment_id":76092682,"body_markdown":"Best answer so far. Even better then accepted answer. Really nice.","body":"Best answer so far. Even better then accepted answer. Really nice."},{"owner":{"account_id":5116256,"reputation":778,"user_id":4101264,"accept_rate":62,"display_name":"rents"},"score":0,"creation_date":1497727695,"post_id":29704252,"comment_id":76204063,"body_markdown":"I like the interface approach but there is no need to provide a getText() method here. Better to use toString() instead and expect the implementor to provide a good impl for that.","body":"I like the interface approach but there is no need to provide a getText() method here. Better to use toString() instead and expect the implementor to provide a good impl for that."},{"owner":{"account_id":3653011,"reputation":650,"user_id":3044680,"display_name":"Tokala Sai Teja"},"score":1,"creation_date":1505737370,"post_id":29704252,"comment_id":79521135,"body_markdown":"This is most robust and precise answer","body":"This is most robust and precise answer"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1555308980,"post_id":29704252,"comment_id":98050710,"body_markdown":"What are the numbers with `:`?","body":"What are the numbers with <code>:</code>?"},{"owner":{"account_id":2506651,"reputation":18472,"user_id":2180189,"accept_rate":71,"display_name":"MightyPork"},"score":0,"creation_date":1556520791,"post_id":29704252,"comment_id":98452683,"body_markdown":"@AbhijitSarkar it&#39;s just some data i was visualising","body":"@AbhijitSarkar it&#39;s just some data i was visualising"},{"owner":{"account_id":16252891,"reputation":91,"user_id":11736336,"display_name":"Philippe Vincent"},"score":0,"creation_date":1607641558,"post_id":29704252,"comment_id":115344385,"body_markdown":"Great idea to put an abstraction ! It is easier to use","body":"Great idea to put an abstraction ! It is easier to use"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1691421470,"post_id":29704252,"comment_id":135485944,"body_markdown":"Gives me a heap space error :(","body":"Gives me a heap space error :("}],"tags":[],"owner":{"account_id":2506651,"reputation":18472,"user_id":2180189,"accept_rate":71,"display_name":"MightyPork"},"comment_count":12,"down_vote_count":0,"up_vote_count":74,"is_accepted":false,"score":74,"last_activity_date":1429286770,"creation_date":1429286770,"answer_id":29704252,"question_id":4965335,"body_markdown":"I&#39;ve made an improved algorithm for this, which handles nicely nodes with different size. It prints top-down using lines.\r\n\r\n    package alg;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    \r\n    /**\r\n     * Binary tree printer\r\n     * \r\n     * @author MightyPork\r\n     */\r\n    public class TreePrinter\r\n    {\r\n        /** Node that can be printed */\r\n        public interface PrintableNode\r\n        {\r\n            /** Get left child */\r\n            PrintableNode getLeft();\r\n    \r\n    \r\n            /** Get right child */\r\n            PrintableNode getRight();\r\n    \r\n    \r\n            /** Get text to be printed */\r\n            String getText();\r\n        }\r\n    \r\n    \r\n        /**\r\n         * Print a tree\r\n         * \r\n         * @param root\r\n         *            tree root node\r\n         */\r\n        public static void print(PrintableNode root)\r\n        {\r\n            List&lt;List&lt;String&gt;&gt; lines = new ArrayList&lt;List&lt;String&gt;&gt;();\r\n    \r\n            List&lt;PrintableNode&gt; level = new ArrayList&lt;PrintableNode&gt;();\r\n            List&lt;PrintableNode&gt; next = new ArrayList&lt;PrintableNode&gt;();\r\n    \r\n            level.add(root);\r\n            int nn = 1;\r\n    \r\n            int widest = 0;\r\n    \r\n            while (nn != 0) {\r\n                List&lt;String&gt; line = new ArrayList&lt;String&gt;();\r\n    \r\n                nn = 0;\r\n    \r\n                for (PrintableNode n : level) {\r\n                    if (n == null) {\r\n                        line.add(null);\r\n    \r\n                        next.add(null);\r\n                        next.add(null);\r\n                    } else {\r\n                        String aa = n.getText();\r\n                        line.add(aa);\r\n                        if (aa.length() &gt; widest) widest = aa.length();\r\n    \r\n                        next.add(n.getLeft());\r\n                        next.add(n.getRight());\r\n    \r\n                        if (n.getLeft() != null) nn++;\r\n                        if (n.getRight() != null) nn++;\r\n                    }\r\n                }\r\n    \r\n                if (widest % 2 == 1) widest++;\r\n    \r\n                lines.add(line);\r\n    \r\n                List&lt;PrintableNode&gt; tmp = level;\r\n                level = next;\r\n                next = tmp;\r\n                next.clear();\r\n            }\r\n    \r\n            int perpiece = lines.get(lines.size() - 1).size() * (widest + 4);\r\n            for (int i = 0; i &lt; lines.size(); i++) {\r\n                List&lt;String&gt; line = lines.get(i);\r\n                int hpw = (int) Math.floor(perpiece / 2f) - 1;\r\n    \r\n                if (i &gt; 0) {\r\n                    for (int j = 0; j &lt; line.size(); j++) {\r\n    \r\n                        // split node\r\n                        char c = &#39; &#39;;\r\n                        if (j % 2 == 1) {\r\n                            if (line.get(j - 1) != null) {\r\n                                c = (line.get(j) != null) ? &#39;┴&#39; : &#39;┘&#39;;\r\n                            } else {\r\n                                if (j &lt; line.size() &amp;&amp; line.get(j) != null) c = &#39;└&#39;;\r\n                            }\r\n                        }\r\n                        System.out.print(c);\r\n    \r\n                        // lines and spaces\r\n                        if (line.get(j) == null) {\r\n                            for (int k = 0; k &lt; perpiece - 1; k++) {\r\n                                System.out.print(&quot; &quot;);\r\n                            }\r\n                        } else {\r\n    \r\n                            for (int k = 0; k &lt; hpw; k++) {\r\n                                System.out.print(j % 2 == 0 ? &quot; &quot; : &quot;─&quot;);\r\n                            }\r\n                            System.out.print(j % 2 == 0 ? &quot;┌&quot; : &quot;┐&quot;);\r\n                            for (int k = 0; k &lt; hpw; k++) {\r\n                                System.out.print(j % 2 == 0 ? &quot;─&quot; : &quot; &quot;);\r\n                            }\r\n                        }\r\n                    }\r\n                    System.out.println();\r\n                }\r\n    \r\n                // print line of numbers\r\n                for (int j = 0; j &lt; line.size(); j++) {\r\n    \r\n                    String f = line.get(j);\r\n                    if (f == null) f = &quot;&quot;;\r\n                    int gap1 = (int) Math.ceil(perpiece / 2f - f.length() / 2f);\r\n                    int gap2 = (int) Math.floor(perpiece / 2f - f.length() / 2f);\r\n    \r\n                    // a number\r\n                    for (int k = 0; k &lt; gap1; k++) {\r\n                        System.out.print(&quot; &quot;);\r\n                    }\r\n                    System.out.print(f);\r\n                    for (int k = 0; k &lt; gap2; k++) {\r\n                        System.out.print(&quot; &quot;);\r\n                    }\r\n                }\r\n                System.out.println();\r\n    \r\n                perpiece /= 2;\r\n            }\r\n        }\r\n    }\r\n\r\nTo use this for your Tree, let your `Node` class implement `PrintableNode`.\r\n\r\nExample output:\r\n\r\n                                             2952:0                                             \r\n                        ┌───────────────────────┴───────────────────────┐                       \r\n                     1249:-1                                         5866:0                     \r\n            ┌───────────┴───────────┐                       ┌───────────┴───────────┐           \r\n         491:-1                  1572:0                  4786:1                  6190:0         \r\n      ┌─────┘                                               └─────┐           ┌─────┴─────┐     \r\n    339:0                                                      5717:0      6061:0      6271:0   ","title":"How to print binary tree diagram in Java?","body":"<p>I've made an improved algorithm for this, which handles nicely nodes with different size. It prints top-down using lines.</p>\n\n<pre><code>package alg;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n\n/**\n * Binary tree printer\n * \n * @author MightyPork\n */\npublic class TreePrinter\n{\n    /** Node that can be printed */\n    public interface PrintableNode\n    {\n        /** Get left child */\n        PrintableNode getLeft();\n\n\n        /** Get right child */\n        PrintableNode getRight();\n\n\n        /** Get text to be printed */\n        String getText();\n    }\n\n\n    /**\n     * Print a tree\n     * \n     * @param root\n     *            tree root node\n     */\n    public static void print(PrintableNode root)\n    {\n        List&lt;List&lt;String&gt;&gt; lines = new ArrayList&lt;List&lt;String&gt;&gt;();\n\n        List&lt;PrintableNode&gt; level = new ArrayList&lt;PrintableNode&gt;();\n        List&lt;PrintableNode&gt; next = new ArrayList&lt;PrintableNode&gt;();\n\n        level.add(root);\n        int nn = 1;\n\n        int widest = 0;\n\n        while (nn != 0) {\n            List&lt;String&gt; line = new ArrayList&lt;String&gt;();\n\n            nn = 0;\n\n            for (PrintableNode n : level) {\n                if (n == null) {\n                    line.add(null);\n\n                    next.add(null);\n                    next.add(null);\n                } else {\n                    String aa = n.getText();\n                    line.add(aa);\n                    if (aa.length() &gt; widest) widest = aa.length();\n\n                    next.add(n.getLeft());\n                    next.add(n.getRight());\n\n                    if (n.getLeft() != null) nn++;\n                    if (n.getRight() != null) nn++;\n                }\n            }\n\n            if (widest % 2 == 1) widest++;\n\n            lines.add(line);\n\n            List&lt;PrintableNode&gt; tmp = level;\n            level = next;\n            next = tmp;\n            next.clear();\n        }\n\n        int perpiece = lines.get(lines.size() - 1).size() * (widest + 4);\n        for (int i = 0; i &lt; lines.size(); i++) {\n            List&lt;String&gt; line = lines.get(i);\n            int hpw = (int) Math.floor(perpiece / 2f) - 1;\n\n            if (i &gt; 0) {\n                for (int j = 0; j &lt; line.size(); j++) {\n\n                    // split node\n                    char c = ' ';\n                    if (j % 2 == 1) {\n                        if (line.get(j - 1) != null) {\n                            c = (line.get(j) != null) ? '┴' : '┘';\n                        } else {\n                            if (j &lt; line.size() &amp;&amp; line.get(j) != null) c = '└';\n                        }\n                    }\n                    System.out.print(c);\n\n                    // lines and spaces\n                    if (line.get(j) == null) {\n                        for (int k = 0; k &lt; perpiece - 1; k++) {\n                            System.out.print(\" \");\n                        }\n                    } else {\n\n                        for (int k = 0; k &lt; hpw; k++) {\n                            System.out.print(j % 2 == 0 ? \" \" : \"─\");\n                        }\n                        System.out.print(j % 2 == 0 ? \"┌\" : \"┐\");\n                        for (int k = 0; k &lt; hpw; k++) {\n                            System.out.print(j % 2 == 0 ? \"─\" : \" \");\n                        }\n                    }\n                }\n                System.out.println();\n            }\n\n            // print line of numbers\n            for (int j = 0; j &lt; line.size(); j++) {\n\n                String f = line.get(j);\n                if (f == null) f = \"\";\n                int gap1 = (int) Math.ceil(perpiece / 2f - f.length() / 2f);\n                int gap2 = (int) Math.floor(perpiece / 2f - f.length() / 2f);\n\n                // a number\n                for (int k = 0; k &lt; gap1; k++) {\n                    System.out.print(\" \");\n                }\n                System.out.print(f);\n                for (int k = 0; k &lt; gap2; k++) {\n                    System.out.print(\" \");\n                }\n            }\n            System.out.println();\n\n            perpiece /= 2;\n        }\n    }\n}\n</code></pre>\n\n<p>To use this for your Tree, let your <code>Node</code> class implement <code>PrintableNode</code>.</p>\n\n<p>Example output:</p>\n\n<pre><code>                                         2952:0                                             \n                    ┌───────────────────────┴───────────────────────┐                       \n                 1249:-1                                         5866:0                     \n        ┌───────────┴───────────┐                       ┌───────────┴───────────┐           \n     491:-1                  1572:0                  4786:1                  6190:0         \n  ┌─────┘                                               └─────┐           ┌─────┴─────┐     \n339:0                                                      5717:0      6061:0      6271:0   \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4992404,"reputation":307,"user_id":4014182,"accept_rate":60,"display_name":"Murtaza Raja"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1456764447,"creation_date":1456602838,"answer_id":35674693,"question_id":4965335,"body_markdown":"    private StringBuilder prettyPrint(Node root, int currentHeight, int totalHeight) {\r\n    \t\tStringBuilder sb = new StringBuilder();\r\n    \t\tint spaces = getSpaceCount(totalHeight-currentHeight + 1);\r\n    \t\tif(root == null) {\r\n    \t\t\t//create a &#39;spatial&#39; block and return it\r\n    \t\t\tString row = String.format(&quot;%&quot;+(2*spaces+1)+&quot;s%n&quot;, &quot;&quot;);\r\n    \t\t\t//now repeat this row space+1 times\r\n    \t\t\tString block = new String(new char[spaces+1]).replace(&quot;\\0&quot;, row);\r\n    \t\t\treturn new StringBuilder(block);\r\n    \t\t}\r\n    \t\tif(currentHeight==totalHeight) return new StringBuilder(root.data+&quot;&quot;);\r\n    \t\tint slashes = getSlashCount(totalHeight-currentHeight +1);\r\n    \t\tsb.append(String.format(&quot;%&quot;+(spaces+1)+&quot;s%&quot;+spaces+&quot;s&quot;, root.data+&quot;&quot;, &quot;&quot;));\r\n    \t\tsb.append(&quot;\\n&quot;);\r\n    \t\t//now print / and \\\r\n    \t\t// but make sure that left and right exists\r\n    \t\tchar leftSlash = root.left == null? &#39; &#39;:&#39;/&#39;;\r\n    \t\tchar rightSlash = root.right==null? &#39; &#39;:&#39;\\\\&#39;;\r\n    \t\tint spaceInBetween = 1;\r\n    \t\tfor(int i=0, space = spaces-1; i&lt;slashes; i++, space --, spaceInBetween+=2) {\r\n    \t\t\tfor(int j=0; j&lt;space; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(leftSlash);\r\n    \t\t\tfor(int j=0; j&lt;spaceInBetween; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(rightSlash+&quot;&quot;);\r\n    \t\t\tfor(int j=0; j&lt;space; j++) sb.append(&quot; &quot;);\r\n    \t\t\tsb.append(&quot;\\n&quot;);\r\n    \t\t}\r\n    \t\t//sb.append(&quot;\\n&quot;);\r\n    \r\n    \t\t//now get string representations of left and right subtrees\r\n    \t\tStringBuilder leftTree = prettyPrint(root.left, currentHeight+1, totalHeight);\r\n    \t\tStringBuilder rightTree = prettyPrint(root.right, currentHeight+1, totalHeight);\r\n    \t\t// now line by line print the trees side by side\r\n    \t\tScanner leftScanner = new Scanner(leftTree.toString());\r\n    \t\tScanner rightScanner = new Scanner(rightTree.toString());\r\n    //\t\tspaceInBetween+=1;\r\n    \t\twhile(leftScanner.hasNextLine()) {\r\n    \t\t\tif(currentHeight==totalHeight-1) {\r\n    \t\t\t\tsb.append(String.format(&quot;%-2s %2s&quot;, leftScanner.nextLine(), rightScanner.nextLine()));\r\n    \t\t\t\tsb.append(&quot;\\n&quot;);\r\n    \t\t\t\tspaceInBetween-=2;\t\t\t\t\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tsb.append(leftScanner.nextLine());\r\n    \t\t\t\tsb.append(&quot; &quot;);\r\n    \t\t\t\tsb.append(rightScanner.nextLine()+&quot;\\n&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn sb;\r\n    \r\n    \t}\r\n    private int getSpaceCount(int height) {\r\n    \t\treturn (int) (3*Math.pow(2, height-2)-1);\r\n    \t}\r\n    private int getSlashCount(int height) {\r\n    \t\tif(height &lt;= 3) return height -1;\r\n    \t\treturn (int) (3*Math.pow(2, height-3)-1);\r\n    \t}\r\n\r\nhttps://github.com/murtraja/java-binary-tree-printer\r\n\r\nonly works for 1 to 2 digit integers (i was lazy to make it generic)\r\n\r\n[![skewed][1]][1]\r\n[![full][2]][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/PbJzM.png\r\n  [2]: http://i.stack.imgur.com/WP2uj.png","title":"How to print binary tree diagram in Java?","body":"<pre><code>private StringBuilder prettyPrint(Node root, int currentHeight, int totalHeight) {\n        StringBuilder sb = new StringBuilder();\n        int spaces = getSpaceCount(totalHeight-currentHeight + 1);\n        if(root == null) {\n            //create a 'spatial' block and return it\n            String row = String.format(\"%\"+(2*spaces+1)+\"s%n\", \"\");\n            //now repeat this row space+1 times\n            String block = new String(new char[spaces+1]).replace(\"\\0\", row);\n            return new StringBuilder(block);\n        }\n        if(currentHeight==totalHeight) return new StringBuilder(root.data+\"\");\n        int slashes = getSlashCount(totalHeight-currentHeight +1);\n        sb.append(String.format(\"%\"+(spaces+1)+\"s%\"+spaces+\"s\", root.data+\"\", \"\"));\n        sb.append(\"\\n\");\n        //now print / and \\\n        // but make sure that left and right exists\n        char leftSlash = root.left == null? ' ':'/';\n        char rightSlash = root.right==null? ' ':'\\\\';\n        int spaceInBetween = 1;\n        for(int i=0, space = spaces-1; i&lt;slashes; i++, space --, spaceInBetween+=2) {\n            for(int j=0; j&lt;space; j++) sb.append(\" \");\n            sb.append(leftSlash);\n            for(int j=0; j&lt;spaceInBetween; j++) sb.append(\" \");\n            sb.append(rightSlash+\"\");\n            for(int j=0; j&lt;space; j++) sb.append(\" \");\n            sb.append(\"\\n\");\n        }\n        //sb.append(\"\\n\");\n\n        //now get string representations of left and right subtrees\n        StringBuilder leftTree = prettyPrint(root.left, currentHeight+1, totalHeight);\n        StringBuilder rightTree = prettyPrint(root.right, currentHeight+1, totalHeight);\n        // now line by line print the trees side by side\n        Scanner leftScanner = new Scanner(leftTree.toString());\n        Scanner rightScanner = new Scanner(rightTree.toString());\n//      spaceInBetween+=1;\n        while(leftScanner.hasNextLine()) {\n            if(currentHeight==totalHeight-1) {\n                sb.append(String.format(\"%-2s %2s\", leftScanner.nextLine(), rightScanner.nextLine()));\n                sb.append(\"\\n\");\n                spaceInBetween-=2;              \n            }\n            else {\n                sb.append(leftScanner.nextLine());\n                sb.append(\" \");\n                sb.append(rightScanner.nextLine()+\"\\n\");\n            }\n        }\n\n        return sb;\n\n    }\nprivate int getSpaceCount(int height) {\n        return (int) (3*Math.pow(2, height-2)-1);\n    }\nprivate int getSlashCount(int height) {\n        if(height &lt;= 3) return height -1;\n        return (int) (3*Math.pow(2, height-3)-1);\n    }\n</code></pre>\n\n<p><a href=\"https://github.com/murtraja/java-binary-tree-printer\" rel=\"nofollow noreferrer\">https://github.com/murtraja/java-binary-tree-printer</a></p>\n\n<p>only works for 1 to 2 digit integers (i was lazy to make it generic)</p>\n\n<p><a href=\"https://i.stack.imgur.com/PbJzM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PbJzM.png\" alt=\"skewed\"></a>\n<a href=\"https://i.stack.imgur.com/WP2uj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WP2uj.png\" alt=\"full\"></a></p>\n"},{"tags":[],"owner":{"account_id":355526,"reputation":61,"user_id":694521,"display_name":"Divang"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461759964,"creation_date":1461742966,"answer_id":36883418,"question_id":4965335,"body_markdown":"Print in Console: \r\n\r\n                                                    500\r\n                           700                                             300   \r\n        200                                   400                                                                                          \r\n    \r\nSimple code :\r\n\r\n    public int getHeight()\r\n    \t{\r\n    \t\tif(rootNode == null) return -1;\r\n    \t\treturn getHeight(rootNode);\r\n    \t}\r\n    \t\r\n    \tprivate int getHeight(Node node)\r\n    \t{\r\n    \t\tif(node == null) return -1;\r\n    \t\t\r\n    \t\treturn Math.max(getHeight(node.left), getHeight(node.right)) + 1;\r\n    \t}\r\n    \r\n    \tpublic void printBinaryTree(Node rootNode)\r\n    \t{\r\n    \t\tQueue&lt;Node&gt; rootsQueue = new LinkedList&lt;Node&gt;();\r\n    \t\tQueue&lt;Node&gt; levelQueue = new LinkedList&lt;Node&gt;();\r\n    \t\tlevelQueue.add(rootNode);\r\n    \t\tint treeHeight = getHeight();\r\n    \t\tint firstNodeGap;\r\n    \t\tint internalNodeGap;\r\n    \t\tint copyinternalNodeGap;\r\n    \t\twhile(true)\r\n    \t\t{\r\n    \t\t\tSystem.out.println(&quot;&quot;);\r\n    \t\t\tinternalNodeGap = (int)(Math.pow(2, treeHeight + 1) -1);  \r\n    \t\t\tcopyinternalNodeGap = internalNodeGap;\r\n    \t\t\tfirstNodeGap = internalNodeGap/2;\r\n    \t\t\t\r\n    \t\t\tboolean levelFirstNode = true;\r\n    \t\t\t\r\n    \t\t\twhile(!levelQueue.isEmpty())\r\n    \t\t\t{\r\n    \t\t\t\tinternalNodeGap = copyinternalNodeGap;\r\n    \t\t\t\tNode currNode = levelQueue.poll();\r\n    \t\t\t\tif(currNode != null)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tif(levelFirstNode)\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t    while(firstNodeGap &gt; 0)\r\n    \t\t\t\t\t    {\r\n    \t\t\t\t\t    \tSystem.out.format(&quot;%s&quot;, &quot;   &quot;);\r\n    \t\t\t\t\t    \tfirstNodeGap--; \r\n    \t\t\t\t\t    }\r\n    \t\t\t\t\t\tlevelFirstNode =false;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\telse\r\n    \t\t\t\t\t{\r\n    \t\t\t\t\t\twhile(internalNodeGap&gt;0)\r\n    \t\t\t\t\t\t{\r\n    \t\t\t\t\t\t\tinternalNodeGap--;\r\n    \t\t\t\t\t\t\tSystem.out.format(&quot;%s&quot;, &quot;   &quot;);\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tSystem.out.format(&quot;%3d&quot;,currNode.data);\r\n    \t\t\t\t\trootsQueue.add(currNode);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t--treeHeight;\r\n    \t\t\t\r\n    \t\t\twhile(!rootsQueue.isEmpty())\r\n    \t\t\t{\r\n    \t\t\t\tNode currNode = rootsQueue.poll();\r\n    \t\t\t\tif(currNode != null)\r\n    \t\t\t\t{\r\n    \t\t\t\t\tlevelQueue.add(currNode.left);\r\n    \t\t\t\t\tlevelQueue.add(currNode.right);\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tif(levelQueue.isEmpty()) break;\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Print in Console: </p>\n\n<pre><code>                                                500\n                       700                                             300   \n    200                                   400                                                                                          \n</code></pre>\n\n<p>Simple code :</p>\n\n<pre><code>public int getHeight()\n    {\n        if(rootNode == null) return -1;\n        return getHeight(rootNode);\n    }\n\n    private int getHeight(Node node)\n    {\n        if(node == null) return -1;\n\n        return Math.max(getHeight(node.left), getHeight(node.right)) + 1;\n    }\n\n    public void printBinaryTree(Node rootNode)\n    {\n        Queue&lt;Node&gt; rootsQueue = new LinkedList&lt;Node&gt;();\n        Queue&lt;Node&gt; levelQueue = new LinkedList&lt;Node&gt;();\n        levelQueue.add(rootNode);\n        int treeHeight = getHeight();\n        int firstNodeGap;\n        int internalNodeGap;\n        int copyinternalNodeGap;\n        while(true)\n        {\n            System.out.println(\"\");\n            internalNodeGap = (int)(Math.pow(2, treeHeight + 1) -1);  \n            copyinternalNodeGap = internalNodeGap;\n            firstNodeGap = internalNodeGap/2;\n\n            boolean levelFirstNode = true;\n\n            while(!levelQueue.isEmpty())\n            {\n                internalNodeGap = copyinternalNodeGap;\n                Node currNode = levelQueue.poll();\n                if(currNode != null)\n                {\n                    if(levelFirstNode)\n                    {\n                        while(firstNodeGap &gt; 0)\n                        {\n                            System.out.format(\"%s\", \"   \");\n                            firstNodeGap--; \n                        }\n                        levelFirstNode =false;\n                    }\n                    else\n                    {\n                        while(internalNodeGap&gt;0)\n                        {\n                            internalNodeGap--;\n                            System.out.format(\"%s\", \"   \");\n                        }\n                    }\n                    System.out.format(\"%3d\",currNode.data);\n                    rootsQueue.add(currNode);\n                }\n            }\n\n            --treeHeight;\n\n            while(!rootsQueue.isEmpty())\n            {\n                Node currNode = rootsQueue.poll();\n                if(currNode != null)\n                {\n                    levelQueue.add(currNode.left);\n                    levelQueue.add(currNode.right);\n                }\n            }\n\n            if(levelQueue.isEmpty()) break;\n        }\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1137268,"reputation":1777,"user_id":1122069,"accept_rate":68,"display_name":"user1122069"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1467163464,"creation_date":1467163464,"answer_id":38088807,"question_id":4965335,"body_markdown":"Here&#39;s a very versatile tree printer. Not the best looking, but it handles a lot of cases. Feel free to add slashes if you can figure that out.\r\n[![enter image description here][1]][1]\r\n\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.LinkedList;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class NodePrinter{\r\n        final private List&lt;List&lt;PrintableNodePosition&gt;&gt; nodesByRow;\r\n        int maxColumnsLeft = 0;\r\n        int maxColumnsRight = 0;\r\n        int maxTitleLength = 0;\r\n        String sep = &quot; &quot;;\r\n        int depth = 0;\r\n    \r\n        public NodePrinter(PrintableNode rootNode, int chars_per_node){\r\n            this.setDepth(rootNode,1);\r\n            nodesByRow = new ArrayList&lt;&gt;(depth);\r\n            this.addNode(rootNode._getPrintableNodeInfo(),0,0);\r\n            for (int i = 0;i&lt;chars_per_node;i++){\r\n                //sep += &quot; &quot;;\r\n            }\r\n        }\r\n    \r\n        private void setDepth(PrintableNode info, int depth){\r\n            if (depth &gt; this.depth){\r\n                this.depth = depth;\r\n            }\r\n            if (info._getLeftChild() != null){\r\n                this.setDepth(info._getLeftChild(),depth+1);\r\n            }\r\n            if (info._getRightChild() != null){\r\n                this.setDepth(info._getRightChild(),depth+1);\r\n            }\r\n        }\r\n    \r\n        private void addNode(PrintableNodeInfo node, int level, int position){\r\n            if (position &lt; 0 &amp;&amp; -position &gt; maxColumnsLeft){\r\n                maxColumnsLeft = -position;\r\n            }\r\n            if (position &gt; 0 &amp;&amp; position &gt; maxColumnsRight){\r\n                maxColumnsRight = position;\r\n            }\r\n            if (node.getTitleLength() &gt; maxTitleLength){\r\n               maxTitleLength = node.getTitleLength();\r\n            }\r\n            List&lt;PrintableNodePosition&gt; row = this.getRow(level);\r\n            row.add(new PrintableNodePosition(node, level, position));\r\n            level++;\r\n    \r\n            int depthToUse = Math.min(depth,6);\r\n            int levelToUse = Math.min(level,6);\r\n            int offset = depthToUse - levelToUse-1;\r\n            offset = (int)(Math.pow(offset,Math.log(depthToUse)*1.4));\r\n            offset = Math.max(offset,3);\r\n    \r\n    \r\n            PrintableNodeInfo leftChild = node.getLeftChildInfo();\r\n            PrintableNodeInfo rightChild = node.getRightChildInfo();\r\n            if (leftChild != null){\r\n                this.addNode(leftChild,level,position-offset);\r\n            }\r\n            if (rightChild != null){\r\n                this.addNode(rightChild,level,position+offset);\r\n            }\r\n        }\r\n    \r\n        private List&lt;PrintableNodePosition&gt; getRow(int row){\r\n            if (row &gt; nodesByRow.size() - 1){\r\n                nodesByRow.add(new LinkedList&lt;&gt;());\r\n            }\r\n            return nodesByRow.get(row);\r\n        }\r\n    \r\n        public void print(){\r\n            int max_chars = this.maxColumnsLeft+maxColumnsRight+1;\r\n            int level = 0;\r\n            String node_format = &quot;%-&quot;+this.maxTitleLength+&quot;s&quot;;\r\n            for (List&lt;PrintableNodePosition&gt; pos_arr : this.nodesByRow){\r\n                String[] chars = this.getCharactersArray(pos_arr,max_chars);\r\n                String line = &quot;&quot;;\r\n                int empty_chars = 0;\r\n                for (int i=0;i&lt;chars.length+1;i++){\r\n                    String value_i = i &lt; chars.length ? chars[i]:null;\r\n                    if (chars.length + 1 == i || value_i != null){\r\n                        if (empty_chars &gt; 0) {\r\n                            System.out.print(String.format(&quot;%-&quot; + empty_chars + &quot;s&quot;, &quot; &quot;));\r\n                        }\r\n                        if (value_i != null){\r\n                            System.out.print(String.format(node_format,value_i));\r\n                            empty_chars = -1;\r\n                        } else{\r\n                            empty_chars = 0;\r\n                        }\r\n                    } else {\r\n                        empty_chars++;\r\n                    }\r\n                }\r\n                System.out.print(&quot;\\n&quot;);\r\n    \r\n                int depthToUse = Math.min(6,depth);\r\n                int line_offset = depthToUse - level;\r\n                line_offset *= 0.5;\r\n                line_offset = Math.max(0,line_offset);\r\n    \r\n                for (int i=0;i&lt;line_offset;i++){\r\n                    System.out.println(&quot;&quot;);\r\n                }\r\n    \r\n    \r\n                level++;\r\n            }\r\n        }\r\n    \r\n        private String[] getCharactersArray(List&lt;PrintableNodePosition&gt; nodes, int max_chars){\r\n            String[] positions = new String[max_chars+1];\r\n            for (PrintableNodePosition a : nodes){\r\n                int pos_i = maxColumnsLeft + a.column;\r\n                String title_i = a.nodeInfo.getTitleFormatted(this.maxTitleLength);\r\n                positions[pos_i] = title_i;\r\n            }\r\n            return positions;\r\n        }\r\n    }\r\n\r\nNodeInfo class\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class PrintableNodeInfo {\r\n        public enum CLI_PRINT_COLOR {\r\n            RESET(&quot;\\u001B[0m&quot;),\r\n            BLACK(&quot;\\u001B[30m&quot;),\r\n            RED(&quot;\\u001B[31m&quot;),\r\n            GREEN(&quot;\\u001B[32m&quot;),\r\n            YELLOW(&quot;\\u001B[33m&quot;),\r\n            BLUE(&quot;\\u001B[34m&quot;),\r\n            PURPLE(&quot;\\u001B[35m&quot;),\r\n            CYAN(&quot;\\u001B[36m&quot;),\r\n            WHITE(&quot;\\u001B[37m&quot;);\r\n            \r\n            final String value;\r\n            CLI_PRINT_COLOR(String value){\r\n                this.value = value;\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return value;\r\n            }\r\n        }\r\n        private final String title;\r\n        private final PrintableNode leftChild;\r\n        private final PrintableNode rightChild;\r\n        private final CLI_PRINT_COLOR textColor;\r\n    \r\n        public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode rightChild){\r\n            this(title,leftChild,rightChild,CLI_PRINT_COLOR.BLACK);\r\n        }\r\n    \r\n        public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode righthild, CLI_PRINT_COLOR textColor){\r\n            this.title = title;\r\n            this.leftChild = leftChild;\r\n            this.rightChild = righthild;\r\n            this.textColor = textColor;\r\n        }\r\n    \r\n        public String getTitle(){\r\n            return title;\r\n        }\r\n    \r\n        public CLI_PRINT_COLOR getTextColor(){\r\n            return textColor;\r\n        }\r\n    \r\n        public String getTitleFormatted(int max_chars){\r\n            return this.textColor+title+CLI_PRINT_COLOR.RESET;\r\n            /*\r\n            String title = this.title.length() &gt; max_chars ? this.title.substring(0,max_chars+1):this.title;\r\n            boolean left = true;\r\n            while(title.length() &lt; max_chars){\r\n                if (left){\r\n                    title = &quot; &quot;+title;\r\n                } else {\r\n                    title = title + &quot; &quot;;\r\n                }\r\n            }\r\n            return this.textColor+title+CLI_PRINT_COLOR.RESET;*/\r\n        }\r\n    \r\n        public int getTitleLength(){\r\n            return title.length();\r\n        }\r\n    \r\n        public PrintableNodeInfo getLeftChildInfo(){\r\n            if (leftChild == null){\r\n                return null;\r\n            }\r\n            return leftChild._getPrintableNodeInfo();\r\n        }\r\n    \r\n        public PrintableNodeInfo getRightChildInfo(){\r\n            if (rightChild == null){\r\n                return null;\r\n            }\r\n            return rightChild._getPrintableNodeInfo();\r\n        }\r\n    }\r\n\r\nNodePosition class\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public class PrintableNodePosition implements Comparable&lt;PrintableNodePosition&gt; {\r\n        public final int row;\r\n        public final int column;\r\n        public final PrintableNodeInfo nodeInfo;\r\n        public PrintableNodePosition(PrintableNodeInfo nodeInfo, int row, int column){\r\n            this.row = row;\r\n            this.column = column;\r\n            this.nodeInfo = nodeInfo;\r\n        }\r\n    \r\n        @Override\r\n        public int compareTo(PrintableNodePosition o) {\r\n            return Integer.compare(this.column,o.column);\r\n        }\r\n    }\r\n\r\nAnd, finally, Node Interface\r\n\r\n    package com.tomac120.NodePrinter;\r\n    \r\n    /**\r\n     * Created by elijah on 6/28/16.\r\n     */\r\n    public interface PrintableNode {\r\n        PrintableNodeInfo _getPrintableNodeInfo();\r\n        PrintableNode _getLeftChild();\r\n        PrintableNode _getRightChild();\r\n    }\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/Glo7T.png","title":"How to print binary tree diagram in Java?","body":"<p>Here's a very versatile tree printer. Not the best looking, but it handles a lot of cases. Feel free to add slashes if you can figure that out.\n<a href=\"https://i.stack.imgur.com/Glo7T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Glo7T.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\nimport java.util.ArrayList;\nimport java.util.LinkedList;\nimport java.util.List;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class NodePrinter{\n    final private List&lt;List&lt;PrintableNodePosition&gt;&gt; nodesByRow;\n    int maxColumnsLeft = 0;\n    int maxColumnsRight = 0;\n    int maxTitleLength = 0;\n    String sep = \" \";\n    int depth = 0;\n\n    public NodePrinter(PrintableNode rootNode, int chars_per_node){\n        this.setDepth(rootNode,1);\n        nodesByRow = new ArrayList&lt;&gt;(depth);\n        this.addNode(rootNode._getPrintableNodeInfo(),0,0);\n        for (int i = 0;i&lt;chars_per_node;i++){\n            //sep += \" \";\n        }\n    }\n\n    private void setDepth(PrintableNode info, int depth){\n        if (depth &gt; this.depth){\n            this.depth = depth;\n        }\n        if (info._getLeftChild() != null){\n            this.setDepth(info._getLeftChild(),depth+1);\n        }\n        if (info._getRightChild() != null){\n            this.setDepth(info._getRightChild(),depth+1);\n        }\n    }\n\n    private void addNode(PrintableNodeInfo node, int level, int position){\n        if (position &lt; 0 &amp;&amp; -position &gt; maxColumnsLeft){\n            maxColumnsLeft = -position;\n        }\n        if (position &gt; 0 &amp;&amp; position &gt; maxColumnsRight){\n            maxColumnsRight = position;\n        }\n        if (node.getTitleLength() &gt; maxTitleLength){\n           maxTitleLength = node.getTitleLength();\n        }\n        List&lt;PrintableNodePosition&gt; row = this.getRow(level);\n        row.add(new PrintableNodePosition(node, level, position));\n        level++;\n\n        int depthToUse = Math.min(depth,6);\n        int levelToUse = Math.min(level,6);\n        int offset = depthToUse - levelToUse-1;\n        offset = (int)(Math.pow(offset,Math.log(depthToUse)*1.4));\n        offset = Math.max(offset,3);\n\n\n        PrintableNodeInfo leftChild = node.getLeftChildInfo();\n        PrintableNodeInfo rightChild = node.getRightChildInfo();\n        if (leftChild != null){\n            this.addNode(leftChild,level,position-offset);\n        }\n        if (rightChild != null){\n            this.addNode(rightChild,level,position+offset);\n        }\n    }\n\n    private List&lt;PrintableNodePosition&gt; getRow(int row){\n        if (row &gt; nodesByRow.size() - 1){\n            nodesByRow.add(new LinkedList&lt;&gt;());\n        }\n        return nodesByRow.get(row);\n    }\n\n    public void print(){\n        int max_chars = this.maxColumnsLeft+maxColumnsRight+1;\n        int level = 0;\n        String node_format = \"%-\"+this.maxTitleLength+\"s\";\n        for (List&lt;PrintableNodePosition&gt; pos_arr : this.nodesByRow){\n            String[] chars = this.getCharactersArray(pos_arr,max_chars);\n            String line = \"\";\n            int empty_chars = 0;\n            for (int i=0;i&lt;chars.length+1;i++){\n                String value_i = i &lt; chars.length ? chars[i]:null;\n                if (chars.length + 1 == i || value_i != null){\n                    if (empty_chars &gt; 0) {\n                        System.out.print(String.format(\"%-\" + empty_chars + \"s\", \" \"));\n                    }\n                    if (value_i != null){\n                        System.out.print(String.format(node_format,value_i));\n                        empty_chars = -1;\n                    } else{\n                        empty_chars = 0;\n                    }\n                } else {\n                    empty_chars++;\n                }\n            }\n            System.out.print(\"\\n\");\n\n            int depthToUse = Math.min(6,depth);\n            int line_offset = depthToUse - level;\n            line_offset *= 0.5;\n            line_offset = Math.max(0,line_offset);\n\n            for (int i=0;i&lt;line_offset;i++){\n                System.out.println(\"\");\n            }\n\n\n            level++;\n        }\n    }\n\n    private String[] getCharactersArray(List&lt;PrintableNodePosition&gt; nodes, int max_chars){\n        String[] positions = new String[max_chars+1];\n        for (PrintableNodePosition a : nodes){\n            int pos_i = maxColumnsLeft + a.column;\n            String title_i = a.nodeInfo.getTitleFormatted(this.maxTitleLength);\n            positions[pos_i] = title_i;\n        }\n        return positions;\n    }\n}\n</code></pre>\n\n<p>NodeInfo class</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class PrintableNodeInfo {\n    public enum CLI_PRINT_COLOR {\n        RESET(\"\\u001B[0m\"),\n        BLACK(\"\\u001B[30m\"),\n        RED(\"\\u001B[31m\"),\n        GREEN(\"\\u001B[32m\"),\n        YELLOW(\"\\u001B[33m\"),\n        BLUE(\"\\u001B[34m\"),\n        PURPLE(\"\\u001B[35m\"),\n        CYAN(\"\\u001B[36m\"),\n        WHITE(\"\\u001B[37m\");\n\n        final String value;\n        CLI_PRINT_COLOR(String value){\n            this.value = value;\n        }\n\n        @Override\n        public String toString() {\n            return value;\n        }\n    }\n    private final String title;\n    private final PrintableNode leftChild;\n    private final PrintableNode rightChild;\n    private final CLI_PRINT_COLOR textColor;\n\n    public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode rightChild){\n        this(title,leftChild,rightChild,CLI_PRINT_COLOR.BLACK);\n    }\n\n    public PrintableNodeInfo(String title, PrintableNode leftChild, PrintableNode righthild, CLI_PRINT_COLOR textColor){\n        this.title = title;\n        this.leftChild = leftChild;\n        this.rightChild = righthild;\n        this.textColor = textColor;\n    }\n\n    public String getTitle(){\n        return title;\n    }\n\n    public CLI_PRINT_COLOR getTextColor(){\n        return textColor;\n    }\n\n    public String getTitleFormatted(int max_chars){\n        return this.textColor+title+CLI_PRINT_COLOR.RESET;\n        /*\n        String title = this.title.length() &gt; max_chars ? this.title.substring(0,max_chars+1):this.title;\n        boolean left = true;\n        while(title.length() &lt; max_chars){\n            if (left){\n                title = \" \"+title;\n            } else {\n                title = title + \" \";\n            }\n        }\n        return this.textColor+title+CLI_PRINT_COLOR.RESET;*/\n    }\n\n    public int getTitleLength(){\n        return title.length();\n    }\n\n    public PrintableNodeInfo getLeftChildInfo(){\n        if (leftChild == null){\n            return null;\n        }\n        return leftChild._getPrintableNodeInfo();\n    }\n\n    public PrintableNodeInfo getRightChildInfo(){\n        if (rightChild == null){\n            return null;\n        }\n        return rightChild._getPrintableNodeInfo();\n    }\n}\n</code></pre>\n\n<p>NodePosition class</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic class PrintableNodePosition implements Comparable&lt;PrintableNodePosition&gt; {\n    public final int row;\n    public final int column;\n    public final PrintableNodeInfo nodeInfo;\n    public PrintableNodePosition(PrintableNodeInfo nodeInfo, int row, int column){\n        this.row = row;\n        this.column = column;\n        this.nodeInfo = nodeInfo;\n    }\n\n    @Override\n    public int compareTo(PrintableNodePosition o) {\n        return Integer.compare(this.column,o.column);\n    }\n}\n</code></pre>\n\n<p>And, finally, Node Interface</p>\n\n<pre><code>package com.tomac120.NodePrinter;\n\n/**\n * Created by elijah on 6/28/16.\n */\npublic interface PrintableNode {\n    PrintableNodeInfo _getPrintableNodeInfo();\n    PrintableNode _getLeftChild();\n    PrintableNode _getRightChild();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1098340,"reputation":9801,"user_id":1091436,"accept_rate":50,"display_name":"VasiliNovikov"},"score":0,"creation_date":1491921306,"post_id":39879646,"comment_id":73761215,"body_markdown":"BTW, I&#39;ve decided to post a Scala solution, too: http://stackoverflow.com/a/43348945/1091436","body":"BTW, I&#39;ve decided to post a Scala solution, too: <a href=\"http://stackoverflow.com/a/43348945/1091436\">stackoverflow.com/a/43348945/1091436</a>"}],"tags":[],"owner":{"account_id":323581,"reputation":1799,"user_id":643684,"accept_rate":67,"display_name":"Colin Woodbury"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1475686193,"creation_date":1475686193,"answer_id":39879646,"question_id":4965335,"body_markdown":"A Scala solution, adapted from Vasya Novikov&#39;s answer and specialized for binary trees:\r\n\r\n    /** An immutable Binary Tree. */\r\n    case class BTree[T](value: T, left: Option[BTree[T]], right: Option[BTree[T]]) {\r\n    \r\n      /* Adapted from: http://stackoverflow.com/a/8948691/643684 */\r\n      def pretty: String = {\r\n        def work(tree: BTree[T], prefix: String, isTail: Boolean): String = {\r\n          val (line, bar) = if (isTail) (&quot;└── &quot;, &quot; &quot;) else (&quot;├── &quot;, &quot;│&quot;)\r\n    \r\n          val curr = s&quot;${prefix}${line}${tree.value}&quot;\r\n    \r\n          val rights = tree.right match {\r\n            case None    =&gt; s&quot;${prefix}${bar}   ├── ∅&quot;\r\n            case Some(r) =&gt; work(r, s&quot;${prefix}${bar}   &quot;, false)\r\n          }\r\n    \r\n          val lefts = tree.left match {\r\n            case None    =&gt; s&quot;${prefix}${bar}   └── ∅&quot;\r\n            case Some(l) =&gt; work(l, s&quot;${prefix}${bar}   &quot;, true)\r\n          }\r\n    \r\n          s&quot;${curr}\\n${rights}\\n${lefts}&quot;\r\n    \r\n        }\r\n    \r\n        work(this, &quot;&quot;, true)\r\n      }\r\n    }","title":"How to print binary tree diagram in Java?","body":"<p>A Scala solution, adapted from Vasya Novikov's answer and specialized for binary trees:</p>\n\n<pre><code>/** An immutable Binary Tree. */\ncase class BTree[T](value: T, left: Option[BTree[T]], right: Option[BTree[T]]) {\n\n  /* Adapted from: http://stackoverflow.com/a/8948691/643684 */\n  def pretty: String = {\n    def work(tree: BTree[T], prefix: String, isTail: Boolean): String = {\n      val (line, bar) = if (isTail) (\"└── \", \" \") else (\"├── \", \"│\")\n\n      val curr = s\"${prefix}${line}${tree.value}\"\n\n      val rights = tree.right match {\n        case None    =&gt; s\"${prefix}${bar}   ├── ∅\"\n        case Some(r) =&gt; work(r, s\"${prefix}${bar}   \", false)\n      }\n\n      val lefts = tree.left match {\n        case None    =&gt; s\"${prefix}${bar}   └── ∅\"\n        case Some(l) =&gt; work(l, s\"${prefix}${bar}   \", true)\n      }\n\n      s\"${curr}\\n${rights}\\n${lefts}\"\n\n    }\n\n    work(this, \"\", true)\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10328940,"reputation":307,"user_id":7619515,"display_name":"Nitin K"},"comment_count":0,"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1487975453,"creation_date":1487975453,"answer_id":42449385,"question_id":4965335,"body_markdown":"I found VasyaNovikov&#39;s answer very useful for printing a large general tree, and modified it for a binary tree\r\n\r\nCode:\r\n\r\n    class TreeNode {\r\n        Integer data = null;\r\n        TreeNode left = null;\r\n        TreeNode right = null;\r\n        \r\n        TreeNode(Integer data) {this.data = data;}\r\n        \r\n        public void print() {\r\n            print(&quot;&quot;, this, false);\r\n        }\r\n        \r\n        public void print(String prefix, TreeNode n, boolean isLeft) {\r\n            if (n != null) {\r\n                System.out.println (prefix + (isLeft ? &quot;|-- &quot; : &quot;\\\\-- &quot;) + n.data);\r\n                print(prefix + (isLeft ? &quot;|   &quot; : &quot;    &quot;), n.left, true);\r\n                print(prefix + (isLeft ? &quot;|   &quot; : &quot;    &quot;), n.right, false);\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nSample output:\r\n\r\n    \\-- 7\r\n        |-- 3\r\n        |   |-- 1\r\n        |   |   \\-- 2\r\n        |   \\-- 5\r\n        |       |-- 4\r\n        |       \\-- 6\r\n        \\-- 11\r\n            |-- 9\r\n            |   |-- 8\r\n            |   \\-- 10\r\n            \\-- 13\r\n                |-- 12\r\n                \\-- 14","title":"How to print binary tree diagram in Java?","body":"<p>I found VasyaNovikov's answer very useful for printing a large general tree, and modified it for a binary tree</p>\n\n<p>Code:</p>\n\n<pre><code>class TreeNode {\n    Integer data = null;\n    TreeNode left = null;\n    TreeNode right = null;\n\n    TreeNode(Integer data) {this.data = data;}\n\n    public void print() {\n        print(\"\", this, false);\n    }\n\n    public void print(String prefix, TreeNode n, boolean isLeft) {\n        if (n != null) {\n            System.out.println (prefix + (isLeft ? \"|-- \" : \"\\\\-- \") + n.data);\n            print(prefix + (isLeft ? \"|   \" : \"    \"), n.left, true);\n            print(prefix + (isLeft ? \"|   \" : \"    \"), n.right, false);\n        }\n    }\n}\n</code></pre>\n\n<p>Sample output:</p>\n\n<pre><code>\\-- 7\n    |-- 3\n    |   |-- 1\n    |   |   \\-- 2\n    |   \\-- 5\n    |       |-- 4\n    |       \\-- 6\n    \\-- 11\n        |-- 9\n        |   |-- 8\n        |   \\-- 10\n        \\-- 13\n            |-- 12\n            \\-- 14\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5862786,"reputation":1367,"user_id":4617883,"accept_rate":0,"display_name":"user4617883"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520931122,"creation_date":1520930355,"answer_id":49251599,"question_id":4965335,"body_markdown":"Here is another way to visualize your tree:  save the nodes as an xml file and then let your browser show you the hierarchy:\r\n\r\n    class treeNode{\r\n        int key;\r\n        treeNode left;\r\n        treeNode right;\r\n    \r\n        public treeNode(int key){\r\n            this.key = key;\r\n            left = right = null;\r\n        }\r\n    \r\n        public void printNode(StringBuilder output, String dir){\r\n            output.append(&quot;&lt;node key=&#39;&quot; + key + &quot;&#39; dir=&#39;&quot; + dir + &quot;&#39;&gt;&quot;);\r\n            if(left != null)\r\n                left.printNode(output, &quot;l&quot;);\r\n            if(right != null)\r\n                right.printNode(output, &quot;r&quot;);\r\n            output.append(&quot;&lt;/node&gt;&quot;);\r\n        }\r\n    }\r\n\r\n    class tree{\r\n        private treeNode treeRoot;\r\n    \r\n        public tree(int key){\r\n            treeRoot = new treeNode(key);\r\n        }\r\n    \r\n        public void insert(int key){\r\n            insert(treeRoot, key);\r\n        }\r\n    \r\n        private treeNode insert(treeNode root, int key){\r\n            if(root == null){\r\n                treeNode child = new treeNode(key);\r\n                return child;\r\n            }\r\n    \r\n            if(key &lt; root.key)\r\n                root.left = insert(root.left, key);\r\n            else if(key &gt; root.key)\r\n                root.right = insert(root.right, key);\r\n    \r\n            return root;\r\n        }\r\n    \r\n        public void saveTreeAsXml(){\r\n            StringBuilder strOutput = new StringBuilder();\r\n            strOutput.append(&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;UTF-8\\&quot;?&gt;&quot;);\r\n            treeRoot.printNode(strOutput, &quot;root&quot;);\r\n            try {\r\n                PrintWriter writer = new PrintWriter(&quot;C:/tree.xml&quot;, &quot;UTF-8&quot;);\r\n                writer.write(strOutput.toString());\r\n                writer.close();\r\n            }\r\n            catch (FileNotFoundException e){\r\n    \r\n            }\r\n            catch(UnsupportedEncodingException e){\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\nHere is code to test it:\r\n\r\n        tree t = new tree(1);\r\n        t.insert(10);\r\n        t.insert(5);\r\n        t.insert(4);\r\n        t.insert(20);\r\n        t.insert(40);\r\n        t.insert(30);\r\n        t.insert(80);\r\n        t.insert(60);\r\n        t.insert(50);\r\n\r\n        t.saveTreeAsXml();\r\n\r\nAnd the output looks like this:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nbG70.png","title":"How to print binary tree diagram in Java?","body":"<p>Here is another way to visualize your tree:  save the nodes as an xml file and then let your browser show you the hierarchy:</p>\n\n<pre><code>class treeNode{\n    int key;\n    treeNode left;\n    treeNode right;\n\n    public treeNode(int key){\n        this.key = key;\n        left = right = null;\n    }\n\n    public void printNode(StringBuilder output, String dir){\n        output.append(\"&lt;node key='\" + key + \"' dir='\" + dir + \"'&gt;\");\n        if(left != null)\n            left.printNode(output, \"l\");\n        if(right != null)\n            right.printNode(output, \"r\");\n        output.append(\"&lt;/node&gt;\");\n    }\n}\n\nclass tree{\n    private treeNode treeRoot;\n\n    public tree(int key){\n        treeRoot = new treeNode(key);\n    }\n\n    public void insert(int key){\n        insert(treeRoot, key);\n    }\n\n    private treeNode insert(treeNode root, int key){\n        if(root == null){\n            treeNode child = new treeNode(key);\n            return child;\n        }\n\n        if(key &lt; root.key)\n            root.left = insert(root.left, key);\n        else if(key &gt; root.key)\n            root.right = insert(root.right, key);\n\n        return root;\n    }\n\n    public void saveTreeAsXml(){\n        StringBuilder strOutput = new StringBuilder();\n        strOutput.append(\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\");\n        treeRoot.printNode(strOutput, \"root\");\n        try {\n            PrintWriter writer = new PrintWriter(\"C:/tree.xml\", \"UTF-8\");\n            writer.write(strOutput.toString());\n            writer.close();\n        }\n        catch (FileNotFoundException e){\n\n        }\n        catch(UnsupportedEncodingException e){\n\n        }\n    }\n}\n</code></pre>\n\n<p>Here is code to test it:</p>\n\n<pre><code>    tree t = new tree(1);\n    t.insert(10);\n    t.insert(5);\n    t.insert(4);\n    t.insert(20);\n    t.insert(40);\n    t.insert(30);\n    t.insert(80);\n    t.insert(60);\n    t.insert(50);\n\n    t.saveTreeAsXml();\n</code></pre>\n\n<p>And the output looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/nbG70.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nbG70.png\" alt=\"enter image description here\"></a></p>\n"},{"comments":[{"owner":{"account_id":14101577,"reputation":9545,"user_id":10186808,"display_name":"Balu Vyamajala"},"score":0,"creation_date":1675695210,"post_id":53705889,"comment_id":132978732,"body_markdown":"took 10 seconds to use it! Great job!","body":"took 10 seconds to use it! Great job!"}],"tags":[],"owner":{"account_id":8114023,"reputation":1631,"user_id":6113110,"accept_rate":62,"display_name":"Robert"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1544454364,"creation_date":1544445708,"answer_id":53705889,"question_id":4965335,"body_markdown":"Based on VasyaNovikov answer. Improved with some Java magic: Generics and Functional interface.\r\n\r\n    /**\r\n\t * Print a tree structure in a pretty ASCII fromat.\r\n\t * @param prefix Currnet previx. Use &quot;&quot; in initial call!\r\n\t * @param node The current node. Pass the root node of your tree in initial call.\r\n\t * @param getChildrenFunc A {@link Function} that returns the children of a given node.\r\n\t * @param isTail Is node the last of its sibblings. Use true in initial call. (This is needed for pretty printing.)\r\n\t * @param &lt;T&gt; The type of your nodes. Anything that has a toString can be used.\r\n\t */\r\n\tprivate &lt;T&gt; void printTreeRec(String prefix, T node, Function&lt;T, List&lt;T&gt;&gt; getChildrenFunc, boolean isTail) {\r\n\t\tString nodeName = node.toString();\r\n\t\tString nodeConnection = isTail ? &quot;└── &quot; : &quot;├── &quot;;\r\n\t\tlog.debug(prefix + nodeConnection + nodeName);\r\n\t\tList&lt;T&gt; children = getChildrenFunc.apply(node);\r\n\t\tfor (int i = 0; i &lt; children.size(); i++) {\r\n\t\t\tString newPrefix = prefix + (isTail ? &quot;    &quot; : &quot;│   &quot;);\r\n\t\t\tprintTreeRec(newPrefix, children.get(i), getChildrenFunc, i == children.size()-1);\r\n\t\t}\r\n\t}\r\n\r\nExample initial call:\r\n\r\n    Function&lt;ChecksumModel, List&lt;ChecksumModel&gt;&gt; getChildrenFunc = node -&gt; getChildrenOf(node)\r\n    printTreeRec(&quot;&quot;, rootNode, getChildrenFunc, true);\r\n\r\nWill output something like\r\n\r\n    └── rootNode\r\n        ├── childNode1\r\n        ├── childNode2\r\n        │   ├── childNode2.1\r\n        │   ├── childNode2.2\r\n        │   └── childNode2.3\r\n        ├── childNode3\r\n        └── childNode4\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Based on VasyaNovikov answer. Improved with some Java magic: Generics and Functional interface.</p>\n\n<pre><code>/**\n * Print a tree structure in a pretty ASCII fromat.\n * @param prefix Currnet previx. Use \"\" in initial call!\n * @param node The current node. Pass the root node of your tree in initial call.\n * @param getChildrenFunc A {@link Function} that returns the children of a given node.\n * @param isTail Is node the last of its sibblings. Use true in initial call. (This is needed for pretty printing.)\n * @param &lt;T&gt; The type of your nodes. Anything that has a toString can be used.\n */\nprivate &lt;T&gt; void printTreeRec(String prefix, T node, Function&lt;T, List&lt;T&gt;&gt; getChildrenFunc, boolean isTail) {\n    String nodeName = node.toString();\n    String nodeConnection = isTail ? \"└── \" : \"├── \";\n    log.debug(prefix + nodeConnection + nodeName);\n    List&lt;T&gt; children = getChildrenFunc.apply(node);\n    for (int i = 0; i &lt; children.size(); i++) {\n        String newPrefix = prefix + (isTail ? \"    \" : \"│   \");\n        printTreeRec(newPrefix, children.get(i), getChildrenFunc, i == children.size()-1);\n    }\n}\n</code></pre>\n\n<p>Example initial call:</p>\n\n<pre><code>Function&lt;ChecksumModel, List&lt;ChecksumModel&gt;&gt; getChildrenFunc = node -&gt; getChildrenOf(node)\nprintTreeRec(\"\", rootNode, getChildrenFunc, true);\n</code></pre>\n\n<p>Will output something like</p>\n\n<pre><code>└── rootNode\n    ├── childNode1\n    ├── childNode2\n    │   ├── childNode2.1\n    │   ├── childNode2.2\n    │   └── childNode2.3\n    ├── childNode3\n    └── childNode4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1721101,"reputation":799,"user_id":1576929,"accept_rate":58,"display_name":"navderm"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1552528735,"creation_date":1552528735,"answer_id":55153851,"question_id":4965335,"body_markdown":"This was the simplest solution for horizontal view. Tried with bunch of examples. Works well for my purpose. Updated from @nitin-k &#39;s answer.\r\n\r\n\r\n    \r\n    public void print(String prefix, BTNode n, boolean isLeft) {\r\n        if (n != null) {\r\n            print(prefix + &quot;     &quot;, n.right, false);\r\n            System.out.println (prefix + (&quot;|-- &quot;) + n.data);\r\n            print(prefix + &quot;     &quot;, n.left, true);\r\n        }\r\n    }\r\n\r\nCall:\r\n\r\n    bst.print(&quot;&quot;, bst.root, false);\r\n\r\n\r\nSolution:\r\n\r\n                             |-- 80\r\n                        |-- 70\r\n                   |-- 60\r\n              |-- 50\r\n         |-- 40\r\n    |-- 30\r\n         |-- 20\r\n              |-- 10\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>This was the simplest solution for horizontal view. Tried with bunch of examples. Works well for my purpose. Updated from @nitin-k 's answer.</p>\n\n<pre><code>public void print(String prefix, BTNode n, boolean isLeft) {\n    if (n != null) {\n        print(prefix + \"     \", n.right, false);\n        System.out.println (prefix + (\"|-- \") + n.data);\n        print(prefix + \"     \", n.left, true);\n    }\n}\n</code></pre>\n\n<p>Call:</p>\n\n<pre><code>bst.print(\"\", bst.root, false);\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>                         |-- 80\n                    |-- 70\n               |-- 60\n          |-- 50\n     |-- 40\n|-- 30\n     |-- 20\n          |-- 10\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10048577,"reputation":21,"user_id":7429075,"display_name":"satish"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1552683106,"creation_date":1552683106,"answer_id":55190522,"question_id":4965335,"body_markdown":"    using map...\r\n    {\r\n    Map&lt;Integer,String&gt; m = new LinkedHashMap&lt;&gt;();\r\n    \t\t\r\n    \t\t tn.printNodeWithLvl(node,l,m);\r\n    \t\t\r\n    \t\tfor(Entry&lt;Integer, String&gt; map :m.entrySet()) {\r\n    \t\t\tSystem.out.println(map.getValue());\r\n    \t\t}\r\n    then....method\r\n    \r\n    \r\n       private  void printNodeWithLvl(Node node,int l,Map&lt;Integer,String&gt; m) {\r\n    \t   if(node==null) {\r\n    \t\t   return;\r\n    \t   }\r\n    \t  if(m.containsKey(l)) {\r\n    \t\t  m.put(l, new StringBuilder(m.get(l)).append(node.value).toString());\r\n    \t  }else {\r\n    \t\t  m.put(l, node.value+&quot;&quot;);\r\n    \t  }\r\n    \t  l++;\r\n    \t  printNodeWithLvl( node.left,l,m);\r\n    \t  printNodeWithLvl(node.right,l,m);\r\n    \t\t\r\n    \t}\r\n    }","title":"How to print binary tree diagram in Java?","body":"<pre><code>using map...\n{\nMap&lt;Integer,String&gt; m = new LinkedHashMap&lt;&gt;();\n\n         tn.printNodeWithLvl(node,l,m);\n\n        for(Entry&lt;Integer, String&gt; map :m.entrySet()) {\n            System.out.println(map.getValue());\n        }\nthen....method\n\n\n   private  void printNodeWithLvl(Node node,int l,Map&lt;Integer,String&gt; m) {\n       if(node==null) {\n           return;\n       }\n      if(m.containsKey(l)) {\n          m.put(l, new StringBuilder(m.get(l)).append(node.value).toString());\n      }else {\n          m.put(l, node.value+\"\");\n      }\n      l++;\n      printNodeWithLvl( node.left,l,m);\n      printNodeWithLvl(node.right,l,m);\n\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16567032,"reputation":785,"user_id":11971304,"display_name":"mahee96"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626990750,"creation_date":1626990750,"answer_id":68491892,"question_id":4965335,"body_markdown":"Horizontal representation is a little complex compared to vertical representation. Vertical printing is just plain RNL(Right-&gt;Node-&gt;left or mirror of inorder) traversal so that right subtree is printed first then left subtree.\r\n```python\r\ndef printFullTree(root, delim=&#39; &#39;, idnt=[], left=None):\r\n    if root:\r\n        idnt.append(delim)\r\n        x, y = setDelims(left)\r\n        printFullTree(root.right, x, idnt, False)\r\n        indent2(root.val, idnt)\r\n        printFullTree(root.left, y, idnt, True)\r\n        idnt.pop()\r\n\r\ndef setDelims(left):\r\n    x = &#39; &#39;; y=&#39;|&#39;\r\n    return (y,x) if (left == True) else (x,y) if (left == False) else (x,x)\r\n\r\ndef indent2(x, idnt, width=6):\r\n    for delim in idnt:\r\n        print(delim + &#39; &#39;*(width-1), end=&#39;&#39;)\r\n    print(&#39;|-&gt;&#39;, x)\r\n```\r\n\r\n```python\r\noutput:\r\n                        |-&gt; 15\r\n                  |-&gt; 14\r\n                  |     |-&gt; 13\r\n            |-&gt; 12\r\n            |     |     |-&gt; 11\r\n            |     |-&gt; 10\r\n            |           |-&gt; 9\r\n      |-&gt; 8\r\n            |           |-&gt; 7\r\n            |     |-&gt; 6\r\n            |     |     |-&gt; 4\r\n            |-&gt; 3\r\n                  |     |-&gt; 2\r\n                  |-&gt; 1\r\n                        |-&gt; 0\r\n```\r\nIn horizontal representation, the display is built by HashMap of TreeMap or `HashMap&lt;Integer, TreeMap&lt;Integer, Object&gt;&gt; xy;` where HashMap contains node&#39;s y-axis/level_no as Key and TreeMap as value. The Treemap interally holds all nodes in same level, sorted by their x axis value as key starting from leftmost -ve, root=0, rightmost=+ve.\r\n\r\nUsing HashMap makes algo work in O(1) lookup for each level and TreeMap for sorted order in O(logn) if self balancing tree/Treap is used.\r\n\r\nStill while doing so don&#39;t forget to store placeholders for null child such as &#39; &#39;/spaces so that the tree looks as intended.\r\n\r\nNow the only thing left is to calculate horizontal node distance, this can be done with some math calc,\r\n1. calc tree width and height.\r\n2. once done, when displaying the nodes, present them at a optimal distance based on calculated width, height, and skew info if any.","title":"How to print binary tree diagram in Java?","body":"<p>Horizontal representation is a little complex compared to vertical representation. Vertical printing is just plain RNL(Right-&gt;Node-&gt;left or mirror of inorder) traversal so that right subtree is printed first then left subtree.</p>\n<pre class=\"lang-py prettyprint-override\"><code>def printFullTree(root, delim=' ', idnt=[], left=None):\n    if root:\n        idnt.append(delim)\n        x, y = setDelims(left)\n        printFullTree(root.right, x, idnt, False)\n        indent2(root.val, idnt)\n        printFullTree(root.left, y, idnt, True)\n        idnt.pop()\n\ndef setDelims(left):\n    x = ' '; y='|'\n    return (y,x) if (left == True) else (x,y) if (left == False) else (x,x)\n\ndef indent2(x, idnt, width=6):\n    for delim in idnt:\n        print(delim + ' '*(width-1), end='')\n    print('|-&gt;', x)\n</code></pre>\n<pre class=\"lang-py prettyprint-override\"><code>output:\n                        |-&gt; 15\n                  |-&gt; 14\n                  |     |-&gt; 13\n            |-&gt; 12\n            |     |     |-&gt; 11\n            |     |-&gt; 10\n            |           |-&gt; 9\n      |-&gt; 8\n            |           |-&gt; 7\n            |     |-&gt; 6\n            |     |     |-&gt; 4\n            |-&gt; 3\n                  |     |-&gt; 2\n                  |-&gt; 1\n                        |-&gt; 0\n</code></pre>\n<p>In horizontal representation, the display is built by HashMap of TreeMap or <code>HashMap&lt;Integer, TreeMap&lt;Integer, Object&gt;&gt; xy;</code> where HashMap contains node's y-axis/level_no as Key and TreeMap as value. The Treemap interally holds all nodes in same level, sorted by their x axis value as key starting from leftmost -ve, root=0, rightmost=+ve.</p>\n<p>Using HashMap makes algo work in O(1) lookup for each level and TreeMap for sorted order in O(logn) if self balancing tree/Treap is used.</p>\n<p>Still while doing so don't forget to store placeholders for null child such as ' '/spaces so that the tree looks as intended.</p>\n<p>Now the only thing left is to calculate horizontal node distance, this can be done with some math calc,</p>\n<ol>\n<li>calc tree width and height.</li>\n<li>once done, when displaying the nodes, present them at a optimal distance based on calculated width, height, and skew info if any.</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":19687420,"reputation":167,"user_id":14413096,"display_name":"Aharon Sambol"},"score":2,"creation_date":1652949286,"post_id":72301195,"comment_id":127733075,"body_markdown":"BTW I made a Python version too: https://github.com/AharonSambol/PrettyPrintTree","body":"BTW I made a Python version too: <a href=\"https://github.com/AharonSambol/PrettyPrintTree\" rel=\"nofollow noreferrer\">github.com/AharonSambol/PrettyPrintTree</a>"}],"tags":[],"owner":{"account_id":19687420,"reputation":167,"user_id":14413096,"display_name":"Aharon Sambol"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1652949212,"creation_date":1652949212,"answer_id":72301195,"question_id":4965335,"body_markdown":"https://github.com/AharonSambol/PrettyPrintTreeJava\r\n\r\nI know I&#39;m late.. But I made this solution which works not only for simple trees but also for more complex ones (such as multi-lined strings)\r\n\r\nExample output:\r\n\r\n[![example output][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/3246o.png\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p><a href=\"https://github.com/AharonSambol/PrettyPrintTreeJava\" rel=\"nofollow noreferrer\">https://github.com/AharonSambol/PrettyPrintTreeJava</a></p>\n<p>I know I'm late.. But I made this solution which works not only for simple trees but also for more complex ones (such as multi-lined strings)</p>\n<p>Example output:</p>\n<p><a href=\"https://i.stack.imgur.com/3246o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3246o.png\" alt=\"example output\" /></a></p>\n"},{"tags":[],"owner":{"account_id":24794941,"reputation":1,"user_id":18677728,"display_name":"VWagen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1661493770,"creation_date":1661492705,"answer_id":73496548,"question_id":4965335,"body_markdown":"Try this:\r\n\r\n    public static void print(int[] minHeap, int minWidth) {\r\n\r\n        int size = minHeap.length;\r\n\r\n        int level = log2(size);\r\n        int maxLength = (int) Math.pow(2, level) * minWidth;\r\n        int currentLevel = -1 ;\r\n        int width = maxLength;\r\n\r\n        for (int i = 0; i &lt; size; i++) {\r\n            if (log2(i + 1) &gt; currentLevel) {\r\n                currentLevel++;\r\n                System.out.println();\r\n                width = maxLength / (int) Math.pow(2, currentLevel);\r\n            }\r\n            System.out.print(StringUtils.center(String.valueOf(minHeap[i]), width));\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\n    private static int log2(int n) {\r\n        return (int) (Math.log(n) / Math.log(2));\r\n    }\r\n\r\nThe idea of this code snippet is dividing the maxLength which is the length of bottom line by the number of elements of each line to get the block width. Then put the element in the middle of each block.\r\n\r\nThe parameter minWidth implys the length of blocks in the bottom line.\r\n\r\n[A picture to illustrate the idea and show the result.][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZOryX.png","title":"How to print binary tree diagram in Java?","body":"<p>Try this:</p>\n<pre><code>public static void print(int[] minHeap, int minWidth) {\n\n    int size = minHeap.length;\n\n    int level = log2(size);\n    int maxLength = (int) Math.pow(2, level) * minWidth;\n    int currentLevel = -1 ;\n    int width = maxLength;\n\n    for (int i = 0; i &lt; size; i++) {\n        if (log2(i + 1) &gt; currentLevel) {\n            currentLevel++;\n            System.out.println();\n            width = maxLength / (int) Math.pow(2, currentLevel);\n        }\n        System.out.print(StringUtils.center(String.valueOf(minHeap[i]), width));\n    }\n    System.out.println();\n}\n\nprivate static int log2(int n) {\n    return (int) (Math.log(n) / Math.log(2));\n}\n</code></pre>\n<p>The idea of this code snippet is dividing the maxLength which is the length of bottom line by the number of elements of each line to get the block width. Then put the element in the middle of each block.</p>\n<p>The parameter minWidth implys the length of blocks in the bottom line.</p>\n<p><a href=\"https://i.stack.imgur.com/ZOryX.png\" rel=\"nofollow noreferrer\">A picture to illustrate the idea and show the result.</a></p>\n"},{"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1691502894,"post_id":76763055,"comment_id":135498411,"body_markdown":"This is the only working answer +1","body":"This is the only working answer +1"},{"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"score":0,"creation_date":1691503149,"post_id":76763055,"comment_id":135498467,"body_markdown":"Thanks for this appreciation, @CardinalSystem!","body":"Thanks for this appreciation, @CardinalSystem!"}],"tags":[],"owner":{"account_id":7142980,"reputation":323263,"user_id":5459839,"display_name":"trincot"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690290556,"creation_date":1690290556,"answer_id":76763055,"question_id":4965335,"body_markdown":"Here is a class (&#177; 60 lines) that can produce a string like this:\r\n\r\n```\r\n       330\r\n ┌──────┴──────┐\r\n101          1738\r\n └─┐        ┌──┴──┐\r\n  198      467  1922\r\n ┌─┘        └─┐   └─┐\r\n154          648  1924\r\n └─┐    ┌─────┴──────┐\r\n  155  621         1524\r\n      ┌─┘       ┌────┴─────┐\r\n     576       987       1531\r\n      └─┐    ┌──┴──┐     ┌─┘\r\n       617  703  1079  1527\r\n                 ┌─┘\r\n               1066\r\n```\r\n\r\nThe code assumes a `Node` class with `left`, `right` and `data` fields. If for instance you have a `Node root`, the below `TreeFormatter` can be used as follows:\r\n\r\n```\r\n    TreeFormatter formatter = new TreeFormatter();\r\n    System.out.println(formatter.topDown(root));\r\n```\r\n\r\nThe class itself:\r\n\r\n```\r\nclass TreeFormatter {\r\n    int padding = 2; // minimum number of horizontal spaces between two node data\r\n\r\n    private int indent(List&lt;String&gt; lines, int margin) {\r\n        // If negative, prefix all lines with spaces and return 0\r\n        if (margin &gt;= 0) return margin;\r\n        String spaces = &quot; &quot;.repeat(-margin);\r\n        int i = 0;\r\n        for (var line : lines) {\r\n            lines.set(i++, spaces + line);\r\n        }\r\n        return 0;\r\n    }\r\n    \r\n    private List&lt;String&gt; merge(List&lt;String&gt; left, List&lt;String&gt; right) {\r\n        // Merge two arrays, where the right strings are indented so there is no overlap\r\n        int minSize = Math.min(left.size(), right.size());\r\n        int offset = 0;\r\n        for (int i = 0; i &lt; minSize; i++) {\r\n            offset = Math.max(offset, left.get(i).length() + padding - right.get(i).replaceAll(&quot;\\\\S.*&quot;, &quot;&quot;).length());\r\n        }\r\n        indent(right, -indent(left, offset));\r\n        for (int i = 0; i &lt; minSize; i++) {\r\n            left.set(i, left.get(i) + right.get(i).substring(left.get(i).length()));\r\n        }\r\n        if (right.size() &gt; minSize) {\r\n            left.addAll(right.subList(minSize, right.size()));\r\n        }\r\n        return left;\r\n    }\r\n\r\n    private List&lt;String&gt; buildLines(Node node) {\r\n        if (node == null) return new ArrayList&lt;&gt;();\r\n        List&lt;String&gt; lines = merge(buildLines(node.left), buildLines(node.right));\r\n        int half = String.valueOf(node.data).length() / 2;\r\n        int i = half;\r\n        if (lines.size() &gt; 0) {\r\n            String line;\r\n            i = lines.get(0).indexOf(&quot;*&quot;); // Find index of first subtree\r\n            if (node.right == null) {\r\n                line = &quot; &quot;.repeat(i) + &quot;┌─┘&quot;;\r\n                i += 2;\r\n            } else if (node.left == null) {\r\n                line = &quot; &quot;.repeat(i = indent(lines, i - 2)) + &quot;└─┐&quot;;\r\n            } else {\r\n                int dist = lines.get(0).length() - 1 - i; // Find distance between subtree roots\r\n                line = String.format(&quot;%s┌%s┴%s┐&quot;, &quot; &quot;.repeat(i), &quot;─&quot;.repeat(dist / 2 - 1), &quot;─&quot;.repeat((dist - 1) / 2));\r\n                i += dist / 2;\r\n            }\r\n            lines.set(0, line);\r\n        }\r\n        lines.add(0, &quot; &quot;.repeat(indent(lines, i - half)) + node.data);\r\n        lines.add(0, &quot; &quot;.repeat(i + Math.max(0, half - i)) + &quot;*&quot;); // Add a marker for caller\r\n        return lines;\r\n    }\r\n    \r\n    public String topDown(Node root) {\r\n        List&lt;String&gt; lines = buildLines(root);\r\n        return String.join(&quot;\\n&quot;, lines.subList(1, lines.size()));\r\n    }\r\n}\r\n```\r\n\r\n\r\n","title":"How to print binary tree diagram in Java?","body":"<p>Here is a class (± 60 lines) that can produce a string like this:</p>\n<pre><code>       330\n ┌──────┴──────┐\n101          1738\n └─┐        ┌──┴──┐\n  198      467  1922\n ┌─┘        └─┐   └─┐\n154          648  1924\n └─┐    ┌─────┴──────┐\n  155  621         1524\n      ┌─┘       ┌────┴─────┐\n     576       987       1531\n      └─┐    ┌──┴──┐     ┌─┘\n       617  703  1079  1527\n                 ┌─┘\n               1066\n</code></pre>\n<p>The code assumes a <code>Node</code> class with <code>left</code>, <code>right</code> and <code>data</code> fields. If for instance you have a <code>Node root</code>, the below <code>TreeFormatter</code> can be used as follows:</p>\n<pre><code>    TreeFormatter formatter = new TreeFormatter();\n    System.out.println(formatter.topDown(root));\n</code></pre>\n<p>The class itself:</p>\n<pre><code>class TreeFormatter {\n    int padding = 2; // minimum number of horizontal spaces between two node data\n\n    private int indent(List&lt;String&gt; lines, int margin) {\n        // If negative, prefix all lines with spaces and return 0\n        if (margin &gt;= 0) return margin;\n        String spaces = &quot; &quot;.repeat(-margin);\n        int i = 0;\n        for (var line : lines) {\n            lines.set(i++, spaces + line);\n        }\n        return 0;\n    }\n    \n    private List&lt;String&gt; merge(List&lt;String&gt; left, List&lt;String&gt; right) {\n        // Merge two arrays, where the right strings are indented so there is no overlap\n        int minSize = Math.min(left.size(), right.size());\n        int offset = 0;\n        for (int i = 0; i &lt; minSize; i++) {\n            offset = Math.max(offset, left.get(i).length() + padding - right.get(i).replaceAll(&quot;\\\\S.*&quot;, &quot;&quot;).length());\n        }\n        indent(right, -indent(left, offset));\n        for (int i = 0; i &lt; minSize; i++) {\n            left.set(i, left.get(i) + right.get(i).substring(left.get(i).length()));\n        }\n        if (right.size() &gt; minSize) {\n            left.addAll(right.subList(minSize, right.size()));\n        }\n        return left;\n    }\n\n    private List&lt;String&gt; buildLines(Node node) {\n        if (node == null) return new ArrayList&lt;&gt;();\n        List&lt;String&gt; lines = merge(buildLines(node.left), buildLines(node.right));\n        int half = String.valueOf(node.data).length() / 2;\n        int i = half;\n        if (lines.size() &gt; 0) {\n            String line;\n            i = lines.get(0).indexOf(&quot;*&quot;); // Find index of first subtree\n            if (node.right == null) {\n                line = &quot; &quot;.repeat(i) + &quot;┌─┘&quot;;\n                i += 2;\n            } else if (node.left == null) {\n                line = &quot; &quot;.repeat(i = indent(lines, i - 2)) + &quot;└─┐&quot;;\n            } else {\n                int dist = lines.get(0).length() - 1 - i; // Find distance between subtree roots\n                line = String.format(&quot;%s┌%s┴%s┐&quot;, &quot; &quot;.repeat(i), &quot;─&quot;.repeat(dist / 2 - 1), &quot;─&quot;.repeat((dist - 1) / 2));\n                i += dist / 2;\n            }\n            lines.set(0, line);\n        }\n        lines.add(0, &quot; &quot;.repeat(indent(lines, i - half)) + node.data);\n        lines.add(0, &quot; &quot;.repeat(i + Math.max(0, half - i)) + &quot;*&quot;); // Add a marker for caller\n        return lines;\n    }\n    \n    public String topDown(Node root) {\n        List&lt;String&gt; lines = buildLines(root);\n        return String.join(&quot;\\n&quot;, lines.subList(1, lines.size()));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":225593,"reputation":2473,"user_id":486158,"accept_rate":75,"display_name":"Tian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306433,"favorite_count":0,"down_vote_count":0,"up_vote_count":216,"accepted_answer_id":4973083,"answer_count":23,"score":216,"last_activity_date":1690290556,"creation_date":1297394913,"question_id":4965335,"body_markdown":"How can I print a binary tree in Java so that the output is like:\r\n\r\n       4 \r\n      / \\ \r\n     2   5 \r\n\r\nMy node:\r\n\r\n    public class Node&lt;A extends Comparable&gt; {\r\n        Node&lt;A&gt; left, right;\r\n        A data;\r\n\t\r\n        public Node(A data){\r\n            this.data = data;\r\n        }\r\n    }\r\n","title":"How to print binary tree diagram in Java?","body":"<p>How can I print a binary tree in Java so that the output is like:</p>\n\n<pre><code>   4 \n  / \\ \n 2   5 \n</code></pre>\n\n<p>My node:</p>\n\n<pre><code>public class Node&lt;A extends Comparable&gt; {\n    Node&lt;A&gt; left, right;\n    A data;\n\n    public Node(A data){\n        this.data = data;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","apache-camel"],"comments":[{"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"score":0,"creation_date":1690290691,"post_id":76754641,"comment_id":135330377,"body_markdown":"Greetings ! i provided an answers please consider to upvote or accept it if it address the solution otherwise feel free to leave comment, here to help.","body":"Greetings ! i provided an answers please consider to upvote or accept it if it address the solution otherwise feel free to leave comment, here to help."}],"answers":[{"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690290500,"creation_date":1690290500,"answer_id":76763038,"question_id":76754641,"body_markdown":"&gt; Apache camel component to consume messages from pravega ?`enter code here`\r\n\r\nYou can use the [Camel-Pravega][1] component, which provides a Camel endpoint for reading and writing data to Pravega streams,  you can do this in your Camel configuration file or in your Camel route definition.\r\n\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n    public class CamelRoute extends RouteBuilder {\r\n        \r\n        @Override\r\n        public void configure() throws Exception {\r\n            from(&quot;pravega://tcp://localhost:9090/scope-name/stream-name&quot;)\r\n                .process(e -&gt; {\r\n                    // Process the message\r\n                    ...\r\n                })\r\n                .to(&quot;log:my-logger&quot;);\r\n        }\r\n        \r\n        ...\r\n    }\r\n\r\n\r\nThis route consumes messages from the `scope-name/stream-name` stream in the Pravega cluster using the Pravega endpoint then processes the message in the process block, and logs the message using the Camel log component.\r\nAfterward you can start the Camel context and it will automatically consume messages from the Pravega stream, some thinglike\r\n\r\n\r\n\r\n    CamelContext context = new DefaultCamelContext();\r\n    context.addRoutes(new CamelRoute());\r\n    context.start();\r\n    Thread.sleep(5);\r\n    context.stop();\r\n\r\nWhich we configured the lifetime to 5 second.\r\n\r\n  [1]: https://doc.akka.io/docs/alpakka/current/external/apache-camel.html\r\n  [2]: https://cncf.pravega.io/docs/latest/connectors/","title":"apache camel component to consume messages from pravega","body":"<blockquote>\n<p>Apache camel component to consume messages from pravega ?<code>enter code here</code></p>\n</blockquote>\n<p>You can use the <a href=\"https://doc.akka.io/docs/alpakka/current/external/apache-camel.html\" rel=\"nofollow noreferrer\">Camel-Pravega</a> component, which provides a Camel endpoint for reading and writing data to Pravega streams,  you can do this in your Camel configuration file or in your Camel route definition.</p>\n\n<pre><code>public class CamelRoute extends RouteBuilder {\n    \n    @Override\n    public void configure() throws Exception {\n        from(&quot;pravega://tcp://localhost:9090/scope-name/stream-name&quot;)\n            .process(e -&gt; {\n                // Process the message\n                ...\n            })\n            .to(&quot;log:my-logger&quot;);\n    }\n    \n    ...\n}\n</code></pre>\n<p>This route consumes messages from the <code>scope-name/stream-name</code> stream in the Pravega cluster using the Pravega endpoint then processes the message in the process block, and logs the message using the Camel log component.\nAfterward you can start the Camel context and it will automatically consume messages from the Pravega stream, some thinglike</p>\n<pre><code>CamelContext context = new DefaultCamelContext();\ncontext.addRoutes(new CamelRoute());\ncontext.start();\nThread.sleep(5);\ncontext.stop();\n</code></pre>\n<p>Which we configured the lifetime to 5 second.</p>\n"}],"owner":{"account_id":3145385,"reputation":881,"user_id":2659962,"display_name":"Akhilesh Pandey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690290500,"creation_date":1690202714,"question_id":76754641,"body_markdown":"is there an any Apache Camel component, similar to the Kafka component, that allows me to consume messages from [Pravega][1].\r\n\r\n\r\n  [1]: https://github.com/pravega/pravega\r\n\r\n","title":"apache camel component to consume messages from pravega","body":"<p>is there an any Apache Camel component, similar to the Kafka component, that allows me to consume messages from <a href=\"https://github.com/pravega/pravega\" rel=\"nofollow noreferrer\">Pravega</a>.</p>\n"},{"tags":["java","guice"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690269809,"post_id":76756163,"comment_id":135325827,"body_markdown":"I don&#39;t understand what you&#39;re trying to do. Are you instantiating your `oven` *inside* the Guice module? That&#39;s really bad. Instead, just make a (singleton) binding that provides the `oven`, then`@Inject` it where needed. Provider functions in modules are allowed to have parameters, which are injected as anything else would be. If you want to make this clearer, provide the real Module code instead of the pseudo-code you have now.","body":"I don&#39;t understand what you&#39;re trying to do. Are you instantiating your <code>oven</code> <i>inside</i> the Guice module? That&#39;s really bad. Instead, just make a (singleton) binding that provides the <code>oven</code>, then<code>@Inject</code> it where needed. Provider functions in modules are allowed to have parameters, which are injected as anything else would be. If you want to make this clearer, provide the real Module code instead of the pseudo-code you have now."},{"owner":{"account_id":669808,"reputation":3053,"user_id":508459,"accept_rate":69,"display_name":"eshalev"},"score":0,"creation_date":1690287533,"post_id":76756163,"comment_id":135329553,"body_markdown":"Thanks, I&#39;ve edited the example. The intent of the question is to avoid repeated `@Inject` parameters throughout my providers. The first example (my current code) injects an oven in each provider method. (My real code has more then 3 providers, and more then 2 parameters). The seconds psuedocode example is what I would like to have: I don&#39;t want to `@Inject` the oven 20 times all over my provider parameters. I would like to inject it once, and use it for all the providers in the module","body":"Thanks, I&#39;ve edited the example. The intent of the question is to avoid repeated <code>@Inject</code> parameters throughout my providers. The first example (my current code) injects an oven in each provider method. (My real code has more then 3 providers, and more then 2 parameters). The seconds psuedocode example is what I would like to have: I don&#39;t want to <code>@Inject</code> the oven 20 times all over my provider parameters. I would like to inject it once, and use it for all the providers in the module"},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690288184,"post_id":76756163,"comment_id":135329710,"body_markdown":"I don&#39;t think you can do that. You are trying to mix setup (modules &amp; provider functions) with runtime (actual injected values), which is always a bad idea.","body":"I don&#39;t think you can do that. You are trying to mix setup (modules &amp; provider functions) with runtime (actual injected values), which is always a bad idea."}],"owner":{"account_id":669808,"reputation":3053,"user_id":508459,"accept_rate":69,"display_name":"eshalev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690290461,"creation_date":1690214048,"question_id":76756163,"body_markdown":"I am using Guice in java.\r\nFor some modules I have noticed that I have parameters which are repeated in every provider in my module. This can become very verbose if I have several of them per provider function.\r\n\r\nI am looking for a pattern where I can pass a shared dependency once into the module.\r\n\r\n```\r\nPizzasModule{\r\n  @Provides provideMushroomPizza ( oven ,mushrooms)  {oven.bakePizza(mushrooms)}\r\n  @Provides provideMOlivePizza   ( oven ,olives)     {oven.bakePizza(olives)}\r\n  @Provides provideMTomatoPizza  ( oven ,tomatoes)   {oven.bakePizza(tomatoes)}\r\n\r\n}\r\n```\r\nEvery pizza needs to be baked in the oven.\r\nI would like to provide it once for the module.\r\n**How do I inject `oven` in to the code below without repeating it?**\r\n\r\n```\r\nPizzasModule{\r\n  \r\n  Oven oven; //How do I get this injected into module only once? (as opposed to the example in the previous block)\r\n\r\n  bakePizzaInOven(topping) {oven.bakePizza(topping)}\r\n\r\n  @Provides provideMushroomPizza (mushrooms)  {bakePizzaInOven(mushrooms)}\r\n  @Provides provideMOlivePizza   (olives)     {bakePizzaInOven(olives)}\r\n  @Provides provideMTomatoPizza  (tomatoes)   {bakePizzaInOven(tomatoes)}\r\n\r\n}\r\n```\r\n\r\nI only want to specify `oven` once in my provider (the oven is not mine, and I only get it once I start injecting [I cannot pass it in the module constructor] ).\r\n\r\nI can probably add a helper provider, which will provide a `pizzeria` with an oven bound to it, and a `pizzeria.bakePizzaInOven(topping)` method. But I am wondering if GUICE has a built in pattern to save me the trouble? (Also my &quot;real code&quot; has more then just one shared parameter)","title":"Shared injections in Guice","body":"<p>I am using Guice in java.\nFor some modules I have noticed that I have parameters which are repeated in every provider in my module. This can become very verbose if I have several of them per provider function.</p>\n<p>I am looking for a pattern where I can pass a shared dependency once into the module.</p>\n<pre><code>PizzasModule{\n  @Provides provideMushroomPizza ( oven ,mushrooms)  {oven.bakePizza(mushrooms)}\n  @Provides provideMOlivePizza   ( oven ,olives)     {oven.bakePizza(olives)}\n  @Provides provideMTomatoPizza  ( oven ,tomatoes)   {oven.bakePizza(tomatoes)}\n\n}\n</code></pre>\n<p>Every pizza needs to be baked in the oven.\nI would like to provide it once for the module.\n<strong>How do I inject <code>oven</code> in to the code below without repeating it?</strong></p>\n<pre><code>PizzasModule{\n  \n  Oven oven; //How do I get this injected into module only once? (as opposed to the example in the previous block)\n\n  bakePizzaInOven(topping) {oven.bakePizza(topping)}\n\n  @Provides provideMushroomPizza (mushrooms)  {bakePizzaInOven(mushrooms)}\n  @Provides provideMOlivePizza   (olives)     {bakePizzaInOven(olives)}\n  @Provides provideMTomatoPizza  (tomatoes)   {bakePizzaInOven(tomatoes)}\n\n}\n</code></pre>\n<p>I only want to specify <code>oven</code> once in my provider (the oven is not mine, and I only get it once I start injecting [I cannot pass it in the module constructor] ).</p>\n<p>I can probably add a helper provider, which will provide a <code>pizzeria</code> with an oven bound to it, and a <code>pizzeria.bakePizzaInOven(topping)</code> method. But I am wondering if GUICE has a built in pattern to save me the trouble? (Also my &quot;real code&quot; has more then just one shared parameter)</p>\n"},{"tags":["java","spring-boot","websphere","cxf","cxf-client"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1688678606,"post_id":76628984,"comment_id":135110107,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":9651072,"reputation":1933,"user_id":7162232,"display_name":"Jarid"},"score":1,"creation_date":1688734558,"post_id":76628984,"comment_id":135117399,"body_markdown":"The ClassCastException message appears to indicate that you&#39;ve got a mix of objects from Axis2 (the server&#39;s built-in web services provider) and CXF. Are you intending to use CXF only for web services, or are you relying on the server&#39;s implementation at all? Bringing your own web services implementation requires some additional configuration steps.","body":"The ClassCastException message appears to indicate that you&#39;ve got a mix of objects from Axis2 (the server&#39;s built-in web services provider) and CXF. Are you intending to use CXF only for web services, or are you relying on the server&#39;s implementation at all? Bringing your own web services implementation requires some additional configuration steps."}],"owner":{"account_id":14237337,"reputation":1,"user_id":10284793,"display_name":"El Mehdi Es-safi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690290449,"creation_date":1688647549,"question_id":76628984,"body_markdown":"Hello I deploy spring boot app v1.5.22.RELEASE on Websphere 8.5.5.20 =&gt; OK\r\n\r\nI use java version 1.8 and cxf-rt-transports-http and cxf-rt-frontend-jaxws v3.5.5 \r\n\r\nThe problem is when i try to call the api I get this error : \r\n\r\n```json\r\n{\r\n    &quot;timestamp&quot;: 1688630892602,\r\n    &quot;status&quot;: 500,\r\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n    &quot;exception&quot;: &quot;java.lang.ClassCastException&quot;,\r\n    &quot;message&quot;: &quot;org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler incompatible with org.apache.cxf.frontend.ClientProxy&quot;,\r\n    &quot;path&quot;: &quot;/Api/test1&quot;\r\n}\r\n```\r\n\r\nPlease I need help after the good deployment of my application on WebSphere I try to make a call it doesn&#39;t work I get error 500 is someone else had this the same problem?\r\n\r\nI have already used the class loader parent first on WebSphere it does not work","title":"Deploy Springboot 1.5.22.RELEASE on Websphere 8.5.5.20","body":"<p>Hello I deploy spring boot app v1.5.22.RELEASE on Websphere 8.5.5.20 =&gt; OK</p>\n<p>I use java version 1.8 and cxf-rt-transports-http and cxf-rt-frontend-jaxws v3.5.5</p>\n<p>The problem is when i try to call the api I get this error :</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;timestamp&quot;: 1688630892602,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;exception&quot;: &quot;java.lang.ClassCastException&quot;,\n    &quot;message&quot;: &quot;org.apache.axis2.jaxws.client.proxy.JAXWSProxyHandler incompatible with org.apache.cxf.frontend.ClientProxy&quot;,\n    &quot;path&quot;: &quot;/Api/test1&quot;\n}\n</code></pre>\n<p>Please I need help after the good deployment of my application on WebSphere I try to make a call it doesn't work I get error 500 is someone else had this the same problem?</p>\n<p>I have already used the class loader parent first on WebSphere it does not work</p>\n"},{"tags":["java","testing","junit","mockito","stubbing"],"comments":[{"owner":{"account_id":1642932,"reputation":1379,"user_id":1515042,"accept_rate":54,"display_name":"Nadir"},"score":6,"creation_date":1444825418,"post_id":33124153,"comment_id":54062755,"body_markdown":"the object in when() must be a mock created by Mockito.mock(), it does not work for manually created real objects - not sure if that&#39;s your issue, since I&#39;m not really getting where your problem is...","body":"the object in when() must be a mock created by Mockito.mock(), it does not work for manually created real objects - not sure if that&#39;s your issue, since I&#39;m not really getting where your problem is..."},{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":1,"creation_date":1444825614,"post_id":33124153,"comment_id":54062906,"body_markdown":"It sounds like `classIwantToTest.object.get()` result is not a mock, or that `get()` is returning null. But please post your code, showing your test, and initialization of your mocks.","body":"It sounds like <code>classIwantToTest.object.get()</code> result is not a mock, or that <code>get()</code> is returning null. But please post your code, showing your test, and initialization of your mocks."},{"owner":{"account_id":7078298,"reputation":3226,"user_id":5417542,"accept_rate":36,"display_name":"user5417542"},"score":0,"creation_date":1444827611,"post_id":33124153,"comment_id":54064272,"body_markdown":"Added some code. Needed to change the variable-names, since it&#39;s from my company ;).","body":"Added some code. Needed to change the variable-names, since it&#39;s from my company ;)."},{"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"score":1,"creation_date":1600279451,"post_id":33124153,"comment_id":113040731,"body_markdown":"Help for visitors to this question: Make sure you haven&#39;t accidentally got `final` in your method signature. That&#39;s another hard to track down route cause of an NPE here","body":"Help for visitors to this question: Make sure you haven&#39;t accidentally got <code>final</code> in your method signature. That&#39;s another hard to track down route cause of an NPE here"},{"owner":{"account_id":170035,"reputation":6390,"user_id":396483,"accept_rate":68,"display_name":"john k"},"score":0,"creation_date":1627316863,"post_id":33124153,"comment_id":121118369,"body_markdown":"please create a minimal example\nhttps://stackoverflow.com/help/minimal-reproducible-example","body":"please create a minimal example <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"}],"answers":[{"comments":[{"owner":{"account_id":6497091,"reputation":82,"user_id":5029351,"display_name":"Avery Sturzl"},"score":0,"creation_date":1531857280,"post_id":33215620,"comment_id":89750514,"body_markdown":"Where can I find the specification/docs for the first sentence of the answer? Thanks!","body":"Where can I find the specification/docs for the first sentence of the answer? Thanks!"},{"owner":{"account_id":2385189,"reputation":1502,"user_id":2086307,"display_name":"ahu"},"score":3,"creation_date":1533032101,"post_id":33215620,"comment_id":90186480,"body_markdown":"https://static.javadoc.io/org.mockito/mockito-core/2.20.0/org/mockito/Mockito.html#RETURNS_DEFAULTS or have a look at the source: https://github.com/mockito/mockito/blob/v2.20.0/src/main/java/org/mockito/internal/stubbing/defaultanswers/ReturnsEmptyValues.java#L20-L49","body":"<a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.20.0/org/mockito/Mockito.html#RETURNS_DEFAULTS\" rel=\"nofollow noreferrer\">static.javadoc.io/org.mockito/mockito-core/2.20.0/org/mockit&zwnj;&#8203;o/&hellip;</a> or have a look at the source: <a href=\"https://github.com/mockito/mockito/blob/v2.20.0/src/main/java/org/mockito/internal/stubbing/defaultanswers/ReturnsEmptyValues.java#L20-L49\" rel=\"nofollow noreferrer\">github.com/mockito/mockito/blob/v2.20.0/src/main/java/org/&hellip;</a>"}],"tags":[],"owner":{"account_id":2385189,"reputation":1502,"user_id":2086307,"display_name":"ahu"},"comment_count":2,"down_vote_count":1,"up_vote_count":90,"is_accepted":true,"score":89,"last_activity_date":1503480196,"creation_date":1445261040,"answer_id":33215620,"question_id":33124153,"body_markdown":"The default return value of methods you haven&#39;t stubbed yet is `false` for boolean methods, an empty collection or map for methods returning collections or maps and `null` otherwise.\r\n\r\nThis also applies to method calls within `when(...)`. In you&#39;re example `when(myService.getListWithData(inputData).get())` will cause a NullPointerException because `myService.getListWithData(inputData)` is `null` - it has not been stubbed before.\r\n\r\nOne option is create mocks for all intermediate return values and stub them before use. For example:\r\n   \r\n    ListWithData listWithData = mock(ListWithData.class);\r\n    when(listWithData.get()).thenReturn(item1);\r\n    when(myService.getListWithData()).thenReturn(listWithData);\r\n\r\nOr alternatively, you can specify a different default answer when creating a mock, to make methods return a new mock instead of null: `RETURNS_DEEP_STUBS`\r\n\r\n    SomeService myService = mock(SomeService.class, Mockito.RETURNS_DEEP_STUBS);\r\n    when(myService.getListWithData().get()).thenReturn(item1);\r\n\r\nYou should read the Javadoc of [Mockito.RETURNS_DEEP_STUBS][1] which explains this in more detail and also has some warnings about its usage.\r\n\r\nI hope this helps. Just note that your example code seems to have more issues, such as missing assert or verify statements and calling setters on mocks (which does not have any effect).\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.2.9/org/mockito/Answers.html#RETURNS_DEEP_STUBS","title":"Mockito - NullpointerException when stubbing Method","body":"<p>The default return value of methods you haven't stubbed yet is <code>false</code> for boolean methods, an empty collection or map for methods returning collections or maps and <code>null</code> otherwise.</p>\n\n<p>This also applies to method calls within <code>when(...)</code>. In you're example <code>when(myService.getListWithData(inputData).get())</code> will cause a NullPointerException because <code>myService.getListWithData(inputData)</code> is <code>null</code> - it has not been stubbed before.</p>\n\n<p>One option is create mocks for all intermediate return values and stub them before use. For example:</p>\n\n<pre><code>ListWithData listWithData = mock(ListWithData.class);\nwhen(listWithData.get()).thenReturn(item1);\nwhen(myService.getListWithData()).thenReturn(listWithData);\n</code></pre>\n\n<p>Or alternatively, you can specify a different default answer when creating a mock, to make methods return a new mock instead of null: <code>RETURNS_DEEP_STUBS</code></p>\n\n<pre><code>SomeService myService = mock(SomeService.class, Mockito.RETURNS_DEEP_STUBS);\nwhen(myService.getListWithData().get()).thenReturn(item1);\n</code></pre>\n\n<p>You should read the Javadoc of <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.9/org/mockito/Answers.html#RETURNS_DEEP_STUBS\" rel=\"noreferrer\">Mockito.RETURNS_DEEP_STUBS</a> which explains this in more detail and also has some warnings about its usage.</p>\n\n<p>I hope this helps. Just note that your example code seems to have more issues, such as missing assert or verify statements and calling setters on mocks (which does not have any effect).</p>\n"},{"comments":[{"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"score":2,"creation_date":1509457008,"post_id":41169554,"comment_id":81019845,"body_markdown":"I got null pointer bcoz of \n@RunWith(PowerMockRunner.class),  instead of that I changed to @RunWith(MockitoJUnitRunner.class).","body":"I got null pointer bcoz of  @RunWith(PowerMockRunner.class),  instead of that I changed to @RunWith(MockitoJUnitRunner.class)."},{"owner":{"account_id":3778828,"reputation":2316,"user_id":3138859,"accept_rate":33,"display_name":"Ravi Yadav"},"score":0,"creation_date":1616754897,"post_id":41169554,"comment_id":118107894,"body_markdown":"For Kotlin : @RunWith(MockitoJUnitRunner::class)","body":"For Kotlin : @RunWith(MockitoJUnitRunner::class)"},{"owner":{"account_id":5433676,"reputation":645,"user_id":4323755,"accept_rate":68,"display_name":"Yacino"},"score":2,"creation_date":1630094363,"post_id":41169554,"comment_id":121871228,"body_markdown":"Having the same problem using Junit 5 , I resolve it using : @ExtendWith(MockitoExtension.class) instead of @RunWith(MockitoJUnitRunner.class)\n.","body":"Having the same problem using Junit 5 , I resolve it using : @ExtendWith(MockitoExtension.class) instead of @RunWith(MockitoJUnitRunner.class) ."}],"tags":[],"owner":{"account_id":476940,"reputation":871,"user_id":5524683,"display_name":"Ed Webb"},"comment_count":3,"down_vote_count":2,"up_vote_count":87,"is_accepted":false,"score":85,"last_activity_date":1481821244,"creation_date":1481821244,"answer_id":41169554,"question_id":33124153,"body_markdown":"I had the same problem and my issue was simply that I had not annotated the class properly using @RunWith. In your example, make sure that you have:\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n    public class Test {\r\n    ...\r\n\r\nOnce I did that, the NullPointerExceptions disappeared.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I had the same problem and my issue was simply that I had not annotated the class properly using @RunWith. In your example, make sure that you have:</p>\n\n<pre><code>@RunWith(MockitoJUnitRunner.class)\npublic class Test {\n...\n</code></pre>\n\n<p>Once I did that, the NullPointerExceptions disappeared.</p>\n"},{"comments":[{"owner":{"account_id":4888255,"reputation":4312,"user_id":3940047,"accept_rate":80,"display_name":"Pavan Kumar"},"score":94,"creation_date":1499770737,"post_id":43747523,"comment_id":77038719,"body_markdown":"This worked for me. Leaving this comment for the next poor soul.","body":"This worked for me. Leaving this comment for the next poor soul."},{"owner":{"account_id":2910392,"reputation":61,"user_id":2494777,"display_name":"micah"},"score":90,"creation_date":1500931179,"post_id":43747523,"comment_id":77542886,"body_markdown":"Matchers wont work for primitives, so if the argument is a primitive you will will need the anyChar/Int/Boolean etc.","body":"Matchers wont work for primitives, so if the argument is a primitive you will will need the anyChar/Int/Boolean etc."},{"owner":{"account_id":2144747,"reputation":1916,"user_id":1902625,"accept_rate":75,"display_name":"haventchecked"},"score":51,"creation_date":1546826493,"post_id":43747523,"comment_id":94968607,"body_markdown":"not allowing `any()` to work for all variables and having it manifest itself as a NPE is tantamount to a cyber warfare attack on dev teams.","body":"not allowing <code>any()</code> to work for all variables and having it manifest itself as a NPE is tantamount to a cyber warfare attack on dev teams."},{"owner":{"account_id":987841,"reputation":498,"user_id":1005926,"accept_rate":60,"display_name":"Edward"},"score":8,"creation_date":1559939714,"post_id":43747523,"comment_id":99591022,"body_markdown":"The reason why is that any() returns a generic object reference.  This object is unboxed to an integer, so the generic type is determined to be &#39;Integer&#39;. The object is null though, so the unboxing fails accessing a null pointer.  anyInt() provides a native integer, so it works.","body":"The reason why is that any() returns a generic object reference.  This object is unboxed to an integer, so the generic type is determined to be &#39;Integer&#39;. The object is null though, so the unboxing fails accessing a null pointer.  anyInt() provides a native integer, so it works."},{"owner":{"account_id":369490,"reputation":114,"user_id":716904,"display_name":"Maggnetix"},"score":0,"creation_date":1586862044,"post_id":43747523,"comment_id":108277681,"body_markdown":"changing any() to anyInt() solved it for me too - thanks! (my case involved java tests and kotlin classes)","body":"changing any() to anyInt() solved it for me too - thanks! (my case involved java tests and kotlin classes)"},{"owner":{"account_id":12536346,"reputation":980,"user_id":9122915,"accept_rate":50,"display_name":"Boudhayan Dev"},"score":0,"creation_date":1620286606,"post_id":43747523,"comment_id":119157013,"body_markdown":"Id suggest anyone reading this to try out this solution before going for the accepted answer.","body":"Id suggest anyone reading this to try out this solution before going for the accepted answer."},{"owner":{"account_id":8890450,"reputation":491,"user_id":6637228,"accept_rate":100,"display_name":"Marek Bern&#225;d"},"score":0,"creation_date":1627917041,"post_id":43747523,"comment_id":121277715,"body_markdown":"this answer should be at least close after the accepted answer, all ordered by answer upvotes","body":"this answer should be at least close after the accepted answer, all ordered by answer upvotes"},{"owner":{"account_id":451892,"reputation":7988,"user_id":848025,"accept_rate":100,"display_name":"Matej"},"score":0,"creation_date":1628779482,"post_id":43747523,"comment_id":121517813,"body_markdown":"I have this issue with a value class wrapping String","body":"I have this issue with a value class wrapping String"},{"owner":{"account_id":2700000,"reputation":1629,"user_id":2330913,"display_name":"Bing Ren"},"score":3,"creation_date":1659575959,"post_id":43747523,"comment_id":129329388,"body_markdown":"&quot;This worked for me. Leaving this comment for the next poor soul.&quot;\n...... 5 years passed......\nI&#39;m the next poor soul lol.","body":"&quot;This worked for me. Leaving this comment for the next poor soul.&quot; ...... 5 years passed...... I&#39;m the next poor soul lol."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1664546825,"post_id":43747523,"comment_id":130503414,"body_markdown":"Thank you this is indeed the solution. I initially had `anyInt()` and `anyLong()` along with `anyString()` but then my mock was not being invoked because one of the strings was `null`! So I moved them all to `any()` just to be safe, but then it started throwing NPE.","body":"Thank you this is indeed the solution. I initially had <code>anyInt()</code> and <code>anyLong()</code> along with <code>anyString()</code> but then my mock was not being invoked because one of the strings was <code>null</code>! So I moved them all to <code>any()</code> just to be safe, but then it started throwing NPE."},{"owner":{"account_id":3904494,"reputation":260,"user_id":3231510,"display_name":"Oscar Bravo"},"score":0,"creation_date":1677843963,"post_id":43747523,"comment_id":133421758,"body_markdown":"@BingRen ...and still we come.","body":"@BingRen ...and still we come."},{"owner":{"account_id":17610498,"reputation":94,"user_id":12778661,"display_name":"Ivan Polovyi"},"score":0,"creation_date":1689856836,"post_id":43747523,"comment_id":135274485,"body_markdown":"Works for boolean as well. Thanks!","body":"Works for boolean as well. Thanks!"}],"tags":[],"owner":{"account_id":228932,"reputation":23614,"user_id":491553,"accept_rate":45,"display_name":"Ryan Shillington"},"comment_count":12,"down_vote_count":0,"up_vote_count":361,"is_accepted":false,"score":361,"last_activity_date":1549272810,"creation_date":1493760458,"answer_id":43747523,"question_id":33124153,"body_markdown":"I had this issue and my problem was that I was calling my method with `any()` instead of `anyInt()`.  So I had:\r\n\r\n    doAnswer(...).with(myMockObject).thisFuncTakesAnInt(any())\r\n\r\nand I had to change it to:\r\n\r\n    doAnswer(...).with(myMockObject).thisFuncTakesAnInt(anyInt())\r\n\r\nI have no idea why that produced a NullPointerException.  Maybe this will help the next poor soul.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I had this issue and my problem was that I was calling my method with <code>any()</code> instead of <code>anyInt()</code>.  So I had:</p>\n\n<pre><code>doAnswer(...).with(myMockObject).thisFuncTakesAnInt(any())\n</code></pre>\n\n<p>and I had to change it to:</p>\n\n<pre><code>doAnswer(...).with(myMockObject).thisFuncTakesAnInt(anyInt())\n</code></pre>\n\n<p>I have no idea why that produced a NullPointerException.  Maybe this will help the next poor soul.</p>\n"},{"tags":[],"owner":{"account_id":2464379,"reputation":4305,"user_id":2147814,"accept_rate":62,"display_name":"anand krish"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1549272839,"creation_date":1509457851,"answer_id":47037078,"question_id":33124153,"body_markdown":"    \r\n    @RunWith(MockitoJUnitRunner.class) //(OR) PowerMockRunner.class\r\n\r\n    @PrepareForTest({UpdateUtil.class,Log.class,SharedPreferences.class,SharedPreferences.Editor.class})\r\n    public class InstallationTest extends TestCase{\r\n\r\n    @Mock\r\n    Context mockContext;\r\n    @Mock\r\n    SharedPreferences mSharedPreferences;\r\n    @Mock\r\n    SharedPreferences.Editor mSharedPreferenceEdtor;\r\n\r\n    @Before\r\n    public void setUp() throws Exception\r\n    {\r\n    //        mockContext = Mockito.mock(Context.class);\r\n    //        mSharedPreferences = Mockito.mock(SharedPreferences.class);\r\n    //        mSharedPreferenceEdtor = Mockito.mock(SharedPreferences.Editor.class);\r\n        when(mockContext.getSharedPreferences(Mockito.anyString(),Mockito.anyInt())).thenReturn(mSharedPreferences);\r\n        when(mSharedPreferences.edit()).thenReturn(mSharedPreferenceEdtor);\r\n        when(mSharedPreferenceEdtor.remove(Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\r\n        when(mSharedPreferenceEdtor.putString(Mockito.anyString(),Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\r\n    }\r\n\r\n    @Test\r\n    public void deletePreferencesTest() throws Exception {\r\n\r\n     }\r\n    }\r\n\r\nAll the above commented codes are not required \r\n{ `mockContext = Mockito.mock(Context.class);` },\r\nif you use **@Mock** Annotation to `Context mockContext;` \r\n\r\n    @Mock \r\n    Context mockContext; \r\n\r\nBut it will work if you use **@RunWith(MockitoJUnitRunner.class)** only. As per Mockito you can create mock object by either using *@Mock or Mockito.mock(Context.class);* ,\r\n\r\nI got NullpointerException because of using @RunWith(PowerMockRunner.class), instead of that I changed to @RunWith(MockitoJUnitRunner.class) it works fine","title":"Mockito - NullpointerException when stubbing Method","body":"<pre><code>@RunWith(MockitoJUnitRunner.class) //(OR) PowerMockRunner.class\n\n@PrepareForTest({UpdateUtil.class,Log.class,SharedPreferences.class,SharedPreferences.Editor.class})\npublic class InstallationTest extends TestCase{\n\n@Mock\nContext mockContext;\n@Mock\nSharedPreferences mSharedPreferences;\n@Mock\nSharedPreferences.Editor mSharedPreferenceEdtor;\n\n@Before\npublic void setUp() throws Exception\n{\n//        mockContext = Mockito.mock(Context.class);\n//        mSharedPreferences = Mockito.mock(SharedPreferences.class);\n//        mSharedPreferenceEdtor = Mockito.mock(SharedPreferences.Editor.class);\n    when(mockContext.getSharedPreferences(Mockito.anyString(),Mockito.anyInt())).thenReturn(mSharedPreferences);\n    when(mSharedPreferences.edit()).thenReturn(mSharedPreferenceEdtor);\n    when(mSharedPreferenceEdtor.remove(Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\n    when(mSharedPreferenceEdtor.putString(Mockito.anyString(),Mockito.anyString())).thenReturn(mSharedPreferenceEdtor);\n}\n\n@Test\npublic void deletePreferencesTest() throws Exception {\n\n }\n}\n</code></pre>\n\n<p>All the above commented codes are not required \n{ <code>mockContext = Mockito.mock(Context.class);</code> },\nif you use <strong>@Mock</strong> Annotation to <code>Context mockContext;</code> </p>\n\n<pre><code>@Mock \nContext mockContext; \n</code></pre>\n\n<p>But it will work if you use <strong>@RunWith(MockitoJUnitRunner.class)</strong> only. As per Mockito you can create mock object by either using <em>@Mock or Mockito.mock(Context.class);</em> ,</p>\n\n<p>I got NullpointerException because of using @RunWith(PowerMockRunner.class), instead of that I changed to @RunWith(MockitoJUnitRunner.class) it works fine</p>\n"},{"tags":[],"owner":{"account_id":2279339,"reputation":5596,"user_id":2004857,"accept_rate":43,"display_name":"Victor Basso"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1519035474,"creation_date":1518775341,"answer_id":48824254,"question_id":33124153,"body_markdown":"**Corner case:**  \r\nIf you&#39;re using **Scala** and you try to create an `any` matcher on a **value class**, you&#39;ll get an unhelpful NPE.\r\n\r\nSo given `case class ValueClass(value: Int) extends AnyVal`, what you want to do is `ValueClass(anyInt)` instead of `any[ValueClass]` \r\n\r\n    when(mock.someMethod(ValueClass(anyInt))).thenAnswer {\r\n       ...\r\n       val v  = ValueClass(invocation.getArguments()(0).asInstanceOf[Int])\r\n       ...\r\n    }\r\n\r\nThis other [SO question][1] is more specifically about that, but you&#39;d miss it when you don&#39;t know the issue is with value classes.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/27289757/mockito-matchers-scala-value-class-and-nullpointerexception","title":"Mockito - NullpointerException when stubbing Method","body":"<p><strong>Corner case:</strong><br>\nIf you're using <strong>Scala</strong> and you try to create an <code>any</code> matcher on a <strong>value class</strong>, you'll get an unhelpful NPE.</p>\n\n<p>So given <code>case class ValueClass(value: Int) extends AnyVal</code>, what you want to do is <code>ValueClass(anyInt)</code> instead of <code>any[ValueClass]</code> </p>\n\n<pre><code>when(mock.someMethod(ValueClass(anyInt))).thenAnswer {\n   ...\n   val v  = ValueClass(invocation.getArguments()(0).asInstanceOf[Int])\n   ...\n}\n</code></pre>\n\n<p>This other <a href=\"https://stackoverflow.com/questions/27289757/mockito-matchers-scala-value-class-and-nullpointerexception\">SO question</a> is more specifically about that, but you'd miss it when you don't know the issue is with value classes.</p>\n"},{"comments":[{"owner":{"account_id":3800517,"reputation":1923,"user_id":3154314,"display_name":"Aaron"},"score":2,"creation_date":1570743111,"post_id":49634323,"comment_id":103020514,"body_markdown":"THANK YOU!!!! I was getting errors that made no sense but using Mockito.anyInt() rather than Mockito.any() solved it. \n\nExample Error: `org.mockito.exceptions.misusing.InvalidUseOfMatchersException: Misplaced or misused argument matcher detected... You cannot use argument matchers outside of verification or stubbing.`","body":"THANK YOU!!!! I was getting errors that made no sense but using Mockito.anyInt() rather than Mockito.any() solved it.   Example Error: <code>org.mockito.exceptions.misusing.InvalidUseOfMatchersExceptio&zwnj;&#8203;n: Misplaced or misused argument matcher detected... You cannot use argument matchers outside of verification or stubbing.</code>"},{"owner":{"account_id":18290693,"reputation":446,"user_id":13466188,"display_name":"Prashant Singh"},"score":0,"creation_date":1673552833,"post_id":49634323,"comment_id":132531230,"body_markdown":"Thanks !!! I used anyString() and anyBoolean() instead of any() and test passed . Thank you so much .","body":"Thanks !!! I used anyString() and anyBoolean() instead of any() and test passed . Thank you so much ."}],"tags":[],"owner":{"account_id":2389551,"reputation":40481,"user_id":2089675,"accept_rate":80,"display_name":"smac89"},"comment_count":2,"down_vote_count":0,"up_vote_count":30,"is_accepted":false,"score":30,"last_activity_date":1549272756,"creation_date":1522770823,"answer_id":49634323,"question_id":33124153,"body_markdown":"For me the reason I was getting NPE is that I was using `Mockito.any()` when mocking primitives. I found that by switching to using the correct variant from mockito gets rid of the errors.\r\n\r\nFor example, to mock a function that takes a primitive `long` as parameter, instead of using `any()`, you should be more specific and replace that with `any(Long.class)` or `Mockito.anyLong()`.\r\n\r\nHope that helps someone.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For me the reason I was getting NPE is that I was using <code>Mockito.any()</code> when mocking primitives. I found that by switching to using the correct variant from mockito gets rid of the errors.</p>\n\n<p>For example, to mock a function that takes a primitive <code>long</code> as parameter, instead of using <code>any()</code>, you should be more specific and replace that with <code>any(Long.class)</code> or <code>Mockito.anyLong()</code>.</p>\n\n<p>Hope that helps someone.</p>\n"},{"comments":[{"owner":{"account_id":12543099,"reputation":1284,"user_id":9127397,"display_name":"Mateusz Gebroski"},"score":1,"creation_date":1574793947,"post_id":51160104,"comment_id":104354453,"body_markdown":"@BeforeEach helped me here but it always depends on execution context.","body":"@BeforeEach helped me here but it always depends on execution context."},{"owner":{"account_id":1987209,"reputation":140,"user_id":2253206,"display_name":"Sayadi"},"score":5,"creation_date":1580721600,"post_id":51160104,"comment_id":106176375,"body_markdown":"+1 for the &quot;make sure your are using JUnit for all annotations&quot;! Somehow, Intellij assumed I want to use `org.junit.jupiter.api.Test` instead of `import org.junit.Test` which caused the mocks to be null apparently.","body":"+1 for the &quot;make sure your are using JUnit for all annotations&quot;! Somehow, Intellij assumed I want to use <code>org.junit.jupiter.api.Test</code> instead of <code>import org.junit.Test</code> which caused the mocks to be null apparently."},{"owner":{"account_id":5576749,"reputation":120,"user_id":4419928,"display_name":"Ajay Kedare"},"score":0,"creation_date":1588757151,"post_id":51160104,"comment_id":109018405,"body_markdown":"I somehow missed this line &quot;MockitoAnnotations.initMocks(this); &quot;","body":"I somehow missed this line &quot;MockitoAnnotations.initMocks(this); &quot;"},{"owner":{"account_id":15799344,"reputation":51,"user_id":11400280,"display_name":"anonymous"},"score":0,"creation_date":1602601706,"post_id":51160104,"comment_id":113768797,"body_markdown":"In my case i forgot to initialize my variables effectively THANK YOU !!","body":"In my case i forgot to initialize my variables effectively THANK YOU !!"}],"tags":[],"owner":{"account_id":4117933,"reputation":5487,"user_id":3379058,"accept_rate":45,"display_name":"Tal Joffe"},"comment_count":4,"down_vote_count":1,"up_vote_count":35,"is_accepted":false,"score":34,"last_activity_date":1566370853,"creation_date":1530638986,"answer_id":51160104,"question_id":33124153,"body_markdown":"For future readers, another cause for NPE when using mocks is forgetting to initialize the mocks like so:\r\n\r\n    @Mock\r\n    SomeMock someMock;\r\n   \r\n    @InjectMocks\r\n    SomeService someService;\r\n\r\n    @Before\r\n    public void setup(){\r\n        MockitoAnnotations.initMocks(this); //without this you will get NPE\r\n    }\r\n    \r\n    @Test\r\n    public void someTest(){\r\n        Mockito.when(someMock.someMethod()).thenReturn(&quot;some result&quot;);\r\n       // ...\r\n    }\r\n\r\nAlso make sure you are using JUnit for all annotations.\r\nI once accidently created a test with @Test from testNG so the @Before didn&#39;t work with it (in testNG the annotation is @BeforeTest)","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For future readers, another cause for NPE when using mocks is forgetting to initialize the mocks like so:</p>\n\n<pre><code>@Mock\nSomeMock someMock;\n\n@InjectMocks\nSomeService someService;\n\n@Before\npublic void setup(){\n    MockitoAnnotations.initMocks(this); //without this you will get NPE\n}\n\n@Test\npublic void someTest(){\n    Mockito.when(someMock.someMethod()).thenReturn(\"some result\");\n   // ...\n}\n</code></pre>\n\n<p>Also make sure you are using JUnit for all annotations.\nI once accidently created a test with @Test from testNG so the @Before didn't work with it (in testNG the annotation is @BeforeTest)</p>\n"},{"tags":[],"owner":{"account_id":2367760,"reputation":2249,"user_id":2073130,"accept_rate":80,"display_name":"lcn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1532489727,"creation_date":1532489727,"answer_id":51510424,"question_id":33124153,"body_markdown":"Ed Webb&#39;s [answer][1] helped in my case. And instead, you can also try add \r\n\r\n      @Rule public Mocks mocks = new Mocks(this);\r\n\r\nif you `@RunWith(JUnit4.class)`.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/41169554/2073130","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Ed Webb's <a href=\"https://stackoverflow.com/a/41169554/2073130\">answer</a> helped in my case. And instead, you can also try add </p>\n\n<pre><code>  @Rule public Mocks mocks = new Mocks(this);\n</code></pre>\n\n<p>if you <code>@RunWith(JUnit4.class)</code>.</p>\n"},{"tags":[],"owner":{"account_id":1218420,"reputation":2261,"user_id":1185555,"accept_rate":44,"display_name":"Serhii Bohutskyi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1538142667,"creation_date":1538142667,"answer_id":52556863,"question_id":33124153,"body_markdown":"In my case, I missed add first \r\n\r\n    PowerMockito.spy(ClassWhichNeedToBeStaticMocked.class);\r\n\r\nso this can be helpful to somebody who see such error\r\n\r\n    java.lang.NullPointerException\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.addAnswersForStubbing(PowerMockitoStubberImpl.java:67)\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:42)\r\n    \tat org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:112)\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, I missed add first </p>\n\n<pre><code>PowerMockito.spy(ClassWhichNeedToBeStaticMocked.class);\n</code></pre>\n\n<p>so this can be helpful to somebody who see such error</p>\n\n<pre><code>java.lang.NullPointerException\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.addAnswersForStubbing(PowerMockitoStubberImpl.java:67)\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:42)\n    at org.powermock.api.mockito.internal.expectation.PowerMockitoStubberImpl.when(PowerMockitoStubberImpl.java:112)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1288279,"reputation":1763,"user_id":1240899,"accept_rate":68,"display_name":"mindreader"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1546630937,"creation_date":1546630937,"answer_id":54045078,"question_id":33124153,"body_markdown":"None of these answers worked for me. This answer doesn&#39;t solve OP&#39;s issue but since this post is the only one that shows up on googling this issue, I&#39;m sharing my answer here.\r\n\r\nI came across this issue while writing unit tests for Android. The issue was that the activity that I was testing extended `AppCompatActivity` instead of `Activity`. To fix this, I was able to just replace `AppCompatActivity` with `Activity` since I didn&#39;t really need it. This might not be a viable solution for everyone, but hopefully knowing the root cause will help someone. ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>None of these answers worked for me. This answer doesn't solve OP's issue but since this post is the only one that shows up on googling this issue, I'm sharing my answer here.</p>\n\n<p>I came across this issue while writing unit tests for Android. The issue was that the activity that I was testing extended <code>AppCompatActivity</code> instead of <code>Activity</code>. To fix this, I was able to just replace <code>AppCompatActivity</code> with <code>Activity</code> since I didn't really need it. This might not be a viable solution for everyone, but hopefully knowing the root cause will help someone. </p>\n"},{"tags":[],"owner":{"account_id":1088874,"reputation":61123,"user_id":1083957,"accept_rate":93,"display_name":"azizbekian"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1559723503,"creation_date":1559723503,"answer_id":56456834,"question_id":33124153,"body_markdown":"None of the above answers helped me. I was struggling to understand why code works in Java but **not** in Kotlin.\r\n\r\nThen I figured it out from [this thread][1].\r\n\r\nYou have to make class and member functions `open`, otherwise NPE was being thrown.\r\n\r\nAfter making function `open` tests started to pass.\r\n\r\nYou might as well consider using compiler&#39;s [&quot;all-open&quot; plugin][2]:\r\n\r\n&gt; Kotlin has classes and their members ***final by default***, which makes it inconvenient to use frameworks and libraries such as Spring AOP that require classes to be **open**. The `all-open` compiler plugin adapts Kotlin to the requirements of those frameworks and **makes classes annotated with a specific annotation and their members open** without the explicit open keyword.\r\n\r\n\r\n  [1]: https://github.com/nhaarman/mockito-kotlin/issues/255#issuecomment-395099869\r\n  [2]: https://kotlinlang.org/docs/reference/compiler-plugins.html","title":"Mockito - NullpointerException when stubbing Method","body":"<p>None of the above answers helped me. I was struggling to understand why code works in Java but <strong>not</strong> in Kotlin.</p>\n\n<p>Then I figured it out from <a href=\"https://github.com/nhaarman/mockito-kotlin/issues/255#issuecomment-395099869\" rel=\"nofollow noreferrer\">this thread</a>.</p>\n\n<p>You have to make class and member functions <code>open</code>, otherwise NPE was being thrown.</p>\n\n<p>After making function <code>open</code> tests started to pass.</p>\n\n<p>You might as well consider using compiler's <a href=\"https://kotlinlang.org/docs/reference/compiler-plugins.html\" rel=\"nofollow noreferrer\">\"all-open\" plugin</a>:</p>\n\n<blockquote>\n  <p>Kotlin has classes and their members <strong><em>final by default</em></strong>, which makes it inconvenient to use frameworks and libraries such as Spring AOP that require classes to be <strong>open</strong>. The <code>all-open</code> compiler plugin adapts Kotlin to the requirements of those frameworks and <strong>makes classes annotated with a specific annotation and their members open</strong> without the explicit open keyword.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":2965471,"reputation":923,"user_id":2518705,"display_name":"RAM237"},"score":0,"creation_date":1603893034,"post_id":57398128,"comment_id":114180000,"body_markdown":"Using `org.junit.jupiter.api.BeforeEach` insted of `@Before` helped me.","body":"Using <code>org.junit.jupiter.api.BeforeEach</code> insted of <code>@Before</code> helped me."}],"tags":[],"owner":{"account_id":6180392,"reputation":1028,"user_id":4816080,"accept_rate":100,"display_name":"يعقوب"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1565192857,"creation_date":1565192857,"answer_id":57398128,"question_id":33124153,"body_markdown":"you need to initialize MockitoAnnotations.initMocks(this) method has to called to initialize annotated fields.\r\n\r\n       @Before public void initMocks() {\r\n           MockitoAnnotations.initMocks(this);\r\n       }\r\n\r\nfor more details see [Doc][1]\r\n\r\n\r\n  [1]: https://static.javadoc.io/org.mockito/mockito-core/2.2.28/org/mockito/MockitoAnnotations.html","title":"Mockito - NullpointerException when stubbing Method","body":"<p>you need to initialize MockitoAnnotations.initMocks(this) method has to called to initialize annotated fields.</p>\n\n<pre><code>   @Before public void initMocks() {\n       MockitoAnnotations.initMocks(this);\n   }\n</code></pre>\n\n<p>for more details see <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.2.28/org/mockito/MockitoAnnotations.html\" rel=\"noreferrer\">Doc</a></p>\n"},{"tags":[],"owner":{"account_id":8640558,"reputation":666,"user_id":6469368,"accept_rate":100,"display_name":"Onome Sotu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579864471,"creation_date":1579864471,"answer_id":59895335,"question_id":33124153,"body_markdown":"When using JUnit 5 or above. You have to inject the class annotated with `@Mock`\r\nin an `@BeforeEach` setup. ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>When using JUnit 5 or above. You have to inject the class annotated with <code>@Mock</code>\nin an <code>@BeforeEach</code> setup. </p>\n"},{"comments":[{"owner":{"account_id":2653518,"reputation":129,"user_id":2294672,"display_name":"Duminda Wanninayake"},"score":0,"creation_date":1643692480,"post_id":61171946,"comment_id":125401346,"body_markdown":"initMocks is deprecated, use MockitoAnnotations.openMocks instead","body":"initMocks is deprecated, use MockitoAnnotations.openMocks instead"},{"owner":{"account_id":2923387,"reputation":393,"user_id":2505213,"accept_rate":88,"display_name":"Saurabh Gupta"},"score":0,"creation_date":1645739400,"post_id":61171946,"comment_id":125958236,"body_markdown":"I am using JUnit version 4 and i still needed &quot;@RunWith(MockitoJUnitRunner.class)&quot; annotation for &quot;when&quot; method to work properly.","body":"I am using JUnit version 4 and i still needed &quot;@RunWith(MockitoJUnitRunner.class)&quot; annotation for &quot;when&quot; method to work properly."},{"owner":{"account_id":4770498,"reputation":484,"user_id":4240261,"display_name":"Mika Feiler"},"score":0,"creation_date":1701877349,"post_id":61171946,"comment_id":136829750,"body_markdown":"The last note about jUnit5 is wrong since it actually regards jUnit4. Compare answers of @PoulamiPal https://stackoverflow.com/a/67142144/4240261 and of noobie2023 https://stackoverflow.com/a/73337513/4240261","body":"The last note about jUnit5 is wrong since it actually regards jUnit4. Compare answers of @PoulamiPal <a href=\"https://stackoverflow.com/a/67142144/4240261\">stackoverflow.com/a/67142144/4240261</a> and of noobie2023 <a href=\"https://stackoverflow.com/a/73337513/4240261\">stackoverflow.com/a/73337513/4240261</a>"}],"tags":[],"owner":{"account_id":3796499,"reputation":5874,"user_id":3151415,"accept_rate":65,"display_name":"garg10may"},"comment_count":3,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1586696788,"creation_date":1586696788,"answer_id":61171946,"question_id":33124153,"body_markdown":"Make sure you initialize your mocks. \r\n\r\n`JUnit4` use `@Before`\r\n\r\n\t@Before\r\n\tpublic void setup() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n\r\n`JUnit5` use `@BeforeEach`\r\n\r\n\t@BeforeEach\r\n\tpublic void setup() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n\r\nFor `JUnit5` check, you are using proper imports also. \r\n\r\n    import org.junit.runner.RunWith\r\n    import org.mockito.junit.MockitoJUnitRunner;\r\n\r\n    @RunWith(MockitoJUnitRunner.class)\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Make sure you initialize your mocks. </p>\n\n<p><code>JUnit4</code> use <code>@Before</code></p>\n\n<pre><code>@Before\npublic void setup() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></pre>\n\n<p><code>JUnit5</code> use <code>@BeforeEach</code></p>\n\n<pre><code>@BeforeEach\npublic void setup() {\n    MockitoAnnotations.initMocks(this);\n}\n</code></pre>\n\n<p>For <code>JUnit5</code> check, you are using proper imports also. </p>\n\n<pre><code>import org.junit.runner.RunWith\nimport org.mockito.junit.MockitoJUnitRunner;\n\n@RunWith(MockitoJUnitRunner.class)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1647402,"reputation":184,"user_id":1518677,"display_name":"brainchrist"},"score":0,"creation_date":1666910027,"post_id":63925670,"comment_id":131053172,"body_markdown":"This was my problem. If you don&#39;t control the source you&#39;re mocking, you can get around it using [an extension](https://www.baeldung.com/mockito-final)","body":"This was my problem. If you don&#39;t control the source you&#39;re mocking, you can get around it using <a href=\"https://www.baeldung.com/mockito-final\" rel=\"nofollow noreferrer\">an extension</a>"}],"tags":[],"owner":{"account_id":329906,"reputation":12901,"user_id":653708,"accept_rate":90,"display_name":"8bitjunkie"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1677329890,"creation_date":1600279699,"answer_id":63925670,"question_id":33124153,"body_markdown":"Check that the method signature **is not declared as** `final`\r\n\r\nThis one catches out a lot of people who work on codebases which are subjected to Checkstyle and have internalised the need to mark members as `final`.\r\n\r\n\r\ni.e. in the OP&#39;s example:\r\n\r\n`object.method()`\r\n\r\nMake sure that `method()` is not declared as `final`:\r\n\r\n```\r\npublic final Object method() {\r\n}\r\n```\r\n\r\nMockito cannot mock a final method and this will come up as a wrapped NPE:\r\n\r\n```\r\nSuppressed: org.mockito.exceptions.misusing.InvalidUseOfMatchersException:\r\n```\r\n\r\nBuried deep in the error message is the following:\r\n\r\n```\r\nAlso, this error might show up because you use argument matchers with methods that cannot be mocked.\r\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\r\nMocking methods declared on non-public parent classes is not supported.\r\n```\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Check that the method signature <strong>is not declared as</strong> <code>final</code></p>\n<p>This one catches out a lot of people who work on codebases which are subjected to Checkstyle and have internalised the need to mark members as <code>final</code>.</p>\n<p>i.e. in the OP's example:</p>\n<p><code>object.method()</code></p>\n<p>Make sure that <code>method()</code> is not declared as <code>final</code>:</p>\n<pre><code>public final Object method() {\n}\n</code></pre>\n<p>Mockito cannot mock a final method and this will come up as a wrapped NPE:</p>\n<pre><code>Suppressed: org.mockito.exceptions.misusing.InvalidUseOfMatchersException:\n</code></pre>\n<p>Buried deep in the error message is the following:</p>\n<pre><code>Also, this error might show up because you use argument matchers with methods that cannot be mocked.\nFollowing methods *cannot* be stubbed/verified: final/private/equals()/hashCode().\nMocking methods declared on non-public parent classes is not supported.\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11821692,"reputation":2574,"user_id":8650621,"display_name":"Felipe Desiderati"},"score":2,"creation_date":1618072984,"post_id":64368328,"comment_id":118494187,"body_markdown":"That was exactly what happened to me.","body":"That was exactly what happened to me."},{"owner":{"account_id":2923387,"reputation":393,"user_id":2505213,"accept_rate":88,"display_name":"Saurabh Gupta"},"score":1,"creation_date":1645738726,"post_id":64368328,"comment_id":125958044,"body_markdown":"For the find and the solution","body":"For the find and the solution"},{"owner":{"account_id":24216,"reputation":23448,"user_id":61479,"accept_rate":81,"display_name":"Ridcully"},"score":1,"creation_date":1656599230,"post_id":64368328,"comment_id":128616876,"body_markdown":"So to fix an error/bug in a test, you have to change production code? I don&#39;t think that&#39;s the correct approach. Actually, you just allow null as a value for switch, so you&#39; d now have to implement all the cases where switch is null as well, in your method.","body":"So to fix an error/bug in a test, you have to change production code? I don&#39;t think that&#39;s the correct approach. Actually, you just allow null as a value for switch, so you&#39; d now have to implement all the cases where switch is null as well, in your method."},{"owner":{"account_id":7335793,"reputation":1170,"user_id":5587233,"display_name":"Tanel"},"score":0,"creation_date":1656696841,"post_id":64368328,"comment_id":128643446,"body_markdown":"That&#39;s a good remark, Ridcully. I&#39;ll add that note. Thanks","body":"That&#39;s a good remark, Ridcully. I&#39;ll add that note. Thanks"},{"owner":{"account_id":6225989,"reputation":662,"user_id":4844216,"display_name":"Ilario"},"score":1,"creation_date":1691758991,"post_id":64368328,"comment_id":135538896,"body_markdown":"Or better you can replace any() with anyBoolean() and keep the primitive in your code...","body":"Or better you can replace any() with anyBoolean() and keep the primitive in your code..."},{"owner":{"account_id":7335793,"reputation":1170,"user_id":5587233,"display_name":"Tanel"},"score":0,"creation_date":1692030651,"post_id":64368328,"comment_id":135567597,"body_markdown":"That is better, upvoted :)","body":"That is better, upvoted :)"}],"tags":[],"owner":{"account_id":7335793,"reputation":1170,"user_id":5587233,"display_name":"Tanel"},"comment_count":6,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1656697104,"creation_date":1602753057,"answer_id":64368328,"question_id":33124153,"body_markdown":"As this is the closest I found to the issue I had, it&#39;s the first result that comes up and I didn&#39;t find an appropriate answer, I&#39;ll post the solution here for any future poor souls:\r\n\r\n`any()` doesn&#39;t work where mocked class method uses a primitive parameter. \r\n\r\n```\r\n public Boolean getResult(String identifier, boolean switch)\r\n```\r\nThe above will produce the same exact issue as OP.\r\n\r\nSolution, just wrap it:\r\n\r\n```\r\n public Boolean getResult(String identifier, Boolean switch)\r\n```\r\n\r\nThe latter solves the NPE.\r\n\r\n* _keep in mind if you choose this approach, now you might want to include a nullcheck for Boolean in production code_ (credit: brought up by Ridcully)","title":"Mockito - NullpointerException when stubbing Method","body":"<p>As this is the closest I found to the issue I had, it's the first result that comes up and I didn't find an appropriate answer, I'll post the solution here for any future poor souls:</p>\n<p><code>any()</code> doesn't work where mocked class method uses a primitive parameter.</p>\n<pre><code> public Boolean getResult(String identifier, boolean switch)\n</code></pre>\n<p>The above will produce the same exact issue as OP.</p>\n<p>Solution, just wrap it:</p>\n<pre><code> public Boolean getResult(String identifier, Boolean switch)\n</code></pre>\n<p>The latter solves the NPE.</p>\n<ul>\n<li><em>keep in mind if you choose this approach, now you might want to include a nullcheck for Boolean in production code</em> (credit: brought up by Ridcully)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19005995,"reputation":1,"user_id":13872739,"display_name":"Satya Samal"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1604947050,"creation_date":1604947050,"answer_id":64757402,"question_id":33124153,"body_markdown":"In my case it was due to wrong import of the @Test annotation \r\n\r\nMake sure you are using the following import\r\n\r\n    import org.junit.jupiter.api.Test;\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case it was due to wrong import of the @Test annotation</p>\n<p>Make sure you are using the following import</p>\n<pre><code>import org.junit.jupiter.api.Test;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21103523,"reputation":221,"user_id":15512979,"display_name":"Poulami Pal"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1618687396,"creation_date":1618687396,"answer_id":67142144,"question_id":33124153,"body_markdown":"For JUnit 5 the test class has to be annotated with:\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\n```\r\n\r\nimports:\r\n```\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.junit.jupiter.MockitoExtension;\r\n```\r\n\r\nMy issue was fixed with this addition.\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For JUnit 5 the test class has to be annotated with:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n</code></pre>\n<p>imports:</p>\n<pre><code>import org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.junit.jupiter.MockitoExtension;\n</code></pre>\n<p>My issue was fixed with this addition.</p>\n"},{"tags":[],"owner":{"account_id":20506220,"reputation":1455,"user_id":15048947,"display_name":"Md. Shahariar Hossen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625634555,"creation_date":1625634555,"answer_id":68280342,"question_id":33124153,"body_markdown":"Annotate the test class with: `@ExtendWith(MockitoExtension.class)`.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Annotate the test class with: <code>@ExtendWith(MockitoExtension.class)</code>.</p>\n"},{"tags":[],"owner":{"account_id":6914488,"reputation":21,"user_id":5309287,"display_name":"Yogeshwar Bagul"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628366450,"creation_date":1628333497,"answer_id":68691708,"question_id":33124153,"body_markdown":"For me, it was because I was stubbing the mock in the `@BeforeAll` method.\r\n\r\n`MockitoExtension` does not have a callback for `@BeforeAll`. \r\n\r\n    public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver\r\n\r\nI moved the stubbing inside the test method it worked!!","title":"Mockito - NullpointerException when stubbing Method","body":"<p>For me, it was because I was stubbing the mock in the <code>@BeforeAll</code> method.</p>\n<p><code>MockitoExtension</code> does not have a callback for <code>@BeforeAll</code>.</p>\n<pre><code>public class MockitoExtension implements BeforeEachCallback, AfterEachCallback, ParameterResolver\n</code></pre>\n<p>I moved the stubbing inside the test method it worked!!</p>\n"},{"tags":[],"owner":{"account_id":12924013,"reputation":95,"user_id":9345418,"display_name":"Abhishek P"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1628586784,"creation_date":1628586784,"answer_id":68724057,"question_id":33124153,"body_markdown":"Well in my case it was because of wrong annotation usage. I was using junit 4 for testing and used `@BeforeEach` instead of `@Before` while initializing.\r\n\r\nChanged it to `@Before` and it works like charm.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Well in my case it was because of wrong annotation usage. I was using junit 4 for testing and used <code>@BeforeEach</code> instead of <code>@Before</code> while initializing.</p>\n<p>Changed it to <code>@Before</code> and it works like charm.</p>\n"},{"tags":[],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1633432190,"creation_date":1633432190,"answer_id":69449353,"question_id":33124153,"body_markdown":"In my case, it was the wrong import for `when()`.\r\n\r\nI used `import static reactor.core.publisher.Mono.when` by accident.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, it was the wrong import for <code>when()</code>.</p>\n<p>I used <code>import static reactor.core.publisher.Mono.when</code> by accident.</p>\n"},{"comments":[{"owner":{"account_id":1877164,"reputation":1987,"user_id":1698143,"accept_rate":90,"display_name":"Failed Scientist"},"score":0,"creation_date":1634870090,"post_id":69668822,"comment_id":123148375,"body_markdown":"Hi Ives. Did you want to comment sharing your experience? Kindly use the relevant section for that.","body":"Hi Ives. Did you want to comment sharing your experience? Kindly use the relevant section for that."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1634891912,"post_id":69668822,"comment_id":123153572,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/69668822/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23046057,"reputation":1,"user_id":17203873,"display_name":"ives murillo"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1634891404,"creation_date":1634850519,"answer_id":69668822,"question_id":33124153,"body_markdown":"In my case i was missing the annotation `@mock` in the mapper declaration.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case i was missing the annotation <code>@mock</code> in the mapper declaration.</p>\n"},{"tags":[],"owner":{"account_id":12130994,"reputation":171,"user_id":9297322,"display_name":"Omar Ghazi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646556521,"creation_date":1646556200,"answer_id":71368825,"question_id":33124153,"body_markdown":"In my case, Intellij created Test with `org.junit.jupiter.api.Test` (Junit5) instead of import `org.junit.Test` of (Junit4) which caused all beans to be null apparently.\r\nalso, make sure the class and test method is public ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, Intellij created Test with <code>org.junit.jupiter.api.Test</code> (Junit5) instead of import <code>org.junit.Test</code> of (Junit4) which caused all beans to be null apparently.\nalso, make sure the class and test method is public</p>\n"},{"tags":[],"owner":{"account_id":142251,"reputation":2173,"user_id":349831,"accept_rate":89,"display_name":"Jack"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647572262,"creation_date":1647572262,"answer_id":71521998,"question_id":33124153,"body_markdown":"This is where google took me when I had the same `NullPointerException` with Junit 5, but was correctly using `@ExtendWith(MockitoExtension.class)` in my maven project.\r\n\r\nTurns out I hadn&#39;t included the `maven-surefire-plugin` in my pom.xml and that meant the `@ExtendWith` wasn&#39;t actually doing anything!\r\n\r\n```xml\r\n&lt;build&gt;\r\n  &lt;plugins&gt;\r\n    &lt;plugin&gt;\r\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n      &lt;version&gt;2.22.1&lt;/version&gt;\r\n    &lt;/plugin&gt;\r\n    ...\r\n```","title":"Mockito - NullpointerException when stubbing Method","body":"<p>This is where google took me when I had the same <code>NullPointerException</code> with Junit 5, but was correctly using <code>@ExtendWith(MockitoExtension.class)</code> in my maven project.</p>\n<p>Turns out I hadn't included the <code>maven-surefire-plugin</code> in my pom.xml and that meant the <code>@ExtendWith</code> wasn't actually doing anything!</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;build&gt;\n  &lt;plugins&gt;\n    &lt;plugin&gt;\n      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n      &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n      &lt;version&gt;2.22.1&lt;/version&gt;\n    &lt;/plugin&gt;\n    ...\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648207271,"creation_date":1648207271,"answer_id":71616114,"question_id":33124153,"body_markdown":"In my case a tested method called another method as a parameter:\r\n\r\n    Mockito.`when`(repository.getItems(prefs.getUser().id)).thenReturn(listOf())`\r\n\r\nWhile `repository` is mocked, `prefs.getUser().id)` will throw NPE. So, first we should mock a parameter, for instance,\r\n\r\n    Mockito.`when`(prefs.getUser()).thenReturn(User(id = 1, name = &quot;user&quot;))`\r\n\r\nAlso we should mock `prefs`. I didn&#39;t check it and changed a library, sorry.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case a tested method called another method as a parameter:</p>\n<pre><code>Mockito.`when`(repository.getItems(prefs.getUser().id)).thenReturn(listOf())`\n</code></pre>\n<p>While <code>repository</code> is mocked, <code>prefs.getUser().id)</code> will throw NPE. So, first we should mock a parameter, for instance,</p>\n<pre><code>Mockito.`when`(prefs.getUser()).thenReturn(User(id = 1, name = &quot;user&quot;))`\n</code></pre>\n<p>Also we should mock <code>prefs</code>. I didn't check it and changed a library, sorry.</p>\n"},{"tags":[],"owner":{"account_id":5786299,"reputation":3037,"user_id":4565405,"accept_rate":60,"display_name":"Spencer Sutton"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649095722,"creation_date":1649095722,"answer_id":71741870,"question_id":33124153,"body_markdown":"I was trying to mock a &quot;final&quot; method, which apparently was the problem.\r\n\r\nThe right way to handle this would be to use an interface and mock that interface however I couldn&#39;t control the library where the &quot;final&quot; method was. \r\n\r\nMockito 2 can handle mocking final method. Add a text file to the project&#39;s src/test/resources/mockito-extensions directory named org.mockito.plugins.MockMaker and add a single line of text:\r\n\r\n```\r\nmock-maker-inline\r\n```\r\n\r\nAfter that, mocking the final method should work just fine.\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I was trying to mock a &quot;final&quot; method, which apparently was the problem.</p>\n<p>The right way to handle this would be to use an interface and mock that interface however I couldn't control the library where the &quot;final&quot; method was.</p>\n<p>Mockito 2 can handle mocking final method. Add a text file to the project's src/test/resources/mockito-extensions directory named org.mockito.plugins.MockMaker and add a single line of text:</p>\n<pre><code>mock-maker-inline\n</code></pre>\n<p>After that, mocking the final method should work just fine.</p>\n"},{"tags":[],"owner":{"account_id":24860942,"reputation":1,"user_id":18736732,"display_name":"passive_programmer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649336088,"creation_date":1649336088,"answer_id":71782569,"question_id":33124153,"body_markdown":"Check which version of Junit you are using. In the Maven/Gradle build tool, if you set to use `testRuntimeOnly &#39;junit5&#39;`,then it might not take `@RunWith` since it is not available and it is replaced with `@ExtendWith` in Junit5. \r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>Check which version of Junit you are using. In the Maven/Gradle build tool, if you set to use <code>testRuntimeOnly 'junit5'</code>,then it might not take <code>@RunWith</code> since it is not available and it is replaced with <code>@ExtendWith</code> in Junit5.</p>\n"},{"tags":[],"owner":{"account_id":18164243,"reputation":223,"user_id":13215135,"display_name":"tommytucker7182"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658867532,"creation_date":1658866214,"answer_id":73129216,"question_id":33124153,"body_markdown":"This doesnt answer the OP&#39;s original query, but its here to try help others with Mockito null pointer exceptions (NPE). \r\n\r\nMy NPE was happening as I did not explicitly set the class under tests&#39; dependencies to be the classes I had mocked. So the class under test was unable to find its required dependencies, creating the NPE. I tend to not mock the class under test (i.e. use ```new``` keyword), to ensure im getting my native class behaviour for testing.\r\n\r\nIm still using Junit 4 for reasons outside my control. Worked example;\r\n\r\n**ClassUnderTest**\r\n```java\r\npublic class ClassUnderTest {\r\n    private DependantClassOne dependantClassOne; \r\n    private DependantClassTwo dependantClassTwo;\r\n\r\n    // remaining class, including setters\r\n}\r\n```\r\n\r\n**Test Class**\r\n```java\r\n@RunWith(MockitoJUnitRunner.class)\r\npublic class Test {\r\n    private ClassUnderTest classUnderTest;\r\n    private DependantClassOne dependantClassOne;\r\n    private DependantClassTwo dependantClassTwo;\r\n \r\n    @Before\r\n    public void setup() {\r\n        dependantClassOne = mock(DependantClassOne.class);\r\n        dependantClassTwo = mock(DependantClassTwo.class);\r\n        classUnderTest = new ClassUnderTest();\r\n\r\n        classUnderTest.setDependantClassOne(dependantClassOne); //added to prevent NPE\r\n        classUnderTest.setDependantClassTwo(dependantClassTwo); //added to prevent NPE\r\n    }\r\n\r\n    // tests\r\n}\r\n```","title":"Mockito - NullpointerException when stubbing Method","body":"<p>This doesnt answer the OP's original query, but its here to try help others with Mockito null pointer exceptions (NPE).</p>\n<p>My NPE was happening as I did not explicitly set the class under tests' dependencies to be the classes I had mocked. So the class under test was unable to find its required dependencies, creating the NPE. I tend to not mock the class under test (i.e. use <code>new</code> keyword), to ensure im getting my native class behaviour for testing.</p>\n<p>Im still using Junit 4 for reasons outside my control. Worked example;</p>\n<p><strong>ClassUnderTest</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClassUnderTest {\n    private DependantClassOne dependantClassOne; \n    private DependantClassTwo dependantClassTwo;\n\n    // remaining class, including setters\n}\n</code></pre>\n<p><strong>Test Class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@RunWith(MockitoJUnitRunner.class)\npublic class Test {\n    private ClassUnderTest classUnderTest;\n    private DependantClassOne dependantClassOne;\n    private DependantClassTwo dependantClassTwo;\n \n    @Before\n    public void setup() {\n        dependantClassOne = mock(DependantClassOne.class);\n        dependantClassTwo = mock(DependantClassTwo.class);\n        classUnderTest = new ClassUnderTest();\n\n        classUnderTest.setDependantClassOne(dependantClassOne); //added to prevent NPE\n        classUnderTest.setDependantClassTwo(dependantClassTwo); //added to prevent NPE\n    }\n\n    // tests\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9028118,"reputation":731,"user_id":8696281,"display_name":"noobie2023"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1660323396,"creation_date":1660323396,"answer_id":73337513,"question_id":33124153,"body_markdown":"In my case, my Mockito annotation didn&#39;t match the JUnit Version.\r\n\r\n1. When using `@ExtendWith(MockitoExtension.class)` make sure you&#39;re using JUnit 5: `import org.junit.jupiter.api.Test;`\r\n\r\n2. When using `@RunWith(MockitoJUnitRunner.class)` make sure you&#39;re using JUnit 4: `import org.junit.Test;`  ","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case, my Mockito annotation didn't match the JUnit Version.</p>\n<ol>\n<li><p>When using <code>@ExtendWith(MockitoExtension.class)</code> make sure you're using JUnit 5: <code>import org.junit.jupiter.api.Test;</code></p>\n</li>\n<li><p>When using <code>@RunWith(MockitoJUnitRunner.class)</code> make sure you're using JUnit 4: <code>import org.junit.Test;</code></p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":16021655,"reputation":1,"user_id":11563030,"display_name":"Shurion"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671041088,"creation_date":1671041065,"answer_id":74802530,"question_id":33124153,"body_markdown":"In my case UnderTest class has two kind of injections: via constructor(TheSecondService) and via setters(TheFirstService). \r\n\r\nAll injections via setters was null. This helps:\r\n\r\n    @Mock\r\n    private TheFirstService theFirstService;\r\n    @Mock\r\n    private TheSecondService theSecondService;\r\n    @InjectMocks\r\n    private TheThirdService underTest;\r\n      \r\n    @BeforeEach\r\n    public void setup() {\r\n        underTest.setTheFirstService(theFirstService);\r\n    }","title":"Mockito - NullpointerException when stubbing Method","body":"<p>In my case UnderTest class has two kind of injections: via constructor(TheSecondService) and via setters(TheFirstService).</p>\n<p>All injections via setters was null. This helps:</p>\n<pre><code>@Mock\nprivate TheFirstService theFirstService;\n@Mock\nprivate TheSecondService theSecondService;\n@InjectMocks\nprivate TheThirdService underTest;\n  \n@BeforeEach\npublic void setup() {\n    underTest.setTheFirstService(theFirstService);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16856943,"reputation":57,"user_id":12188660,"display_name":"mitesh keswani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675950416,"creation_date":1675682809,"answer_id":75360700,"question_id":33124153,"body_markdown":"I was using wrong annotation/import of Mock, so my object was not getting formed.\r\nI was using `org.evosuite.shaded.org.mockito.Mock` and I switched back to `org.mockito.Mock`. Then as if by magic, it started working for me.","title":"Mockito - NullpointerException when stubbing Method","body":"<p>I was using wrong annotation/import of Mock, so my object was not getting formed.\nI was using <code>org.evosuite.shaded.org.mockito.Mock</code> and I switched back to <code>org.mockito.Mock</code>. Then as if by magic, it started working for me.</p>\n"},{"comments":[{"owner":{"account_id":15398978,"reputation":316,"user_id":11109119,"display_name":"Guy_g23"},"score":0,"creation_date":1693053717,"post_id":76729066,"comment_id":135710845,"body_markdown":"This one worked for me and I knew I didn&#39;t pay attention as to what I was importing when I started to write the &quot;when&quot; statement. Thanks a bunch!","body":"This one worked for me and I knew I didn&#39;t pay attention as to what I was importing when I started to write the &quot;when&quot; statement. Thanks a bunch!"}],"tags":[],"owner":{"account_id":13597862,"reputation":67,"user_id":9809339,"display_name":"Assaduzzaman Assad"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690289973,"creation_date":1689849669,"answer_id":76729066,"question_id":33124153,"body_markdown":"&lt;h3&gt; Fix Static Import &lt;/h3&gt;\r\n\r\nPlease check the static import. It seems like this is the issue.\r\n\r\n**The correct import should be:**\r\n\r\n `import static org.mockito.Mockito.when`\r\n\r\n**Instead of:**\r\n\r\n `import static reactor.core.publisher.Mono.when`.","title":"Mockito - NullpointerException when stubbing Method","body":"<h3> Fix Static Import </h3>\n<p>Please check the static import. It seems like this is the issue.</p>\n<p><strong>The correct import should be:</strong></p>\n<p><code>import static org.mockito.Mockito.when</code></p>\n<p><strong>Instead of:</strong></p>\n<p><code>import static reactor.core.publisher.Mono.when</code>.</p>\n"}],"owner":{"account_id":7078298,"reputation":3226,"user_id":5417542,"accept_rate":36,"display_name":"user5417542"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":375675,"favorite_count":0,"down_vote_count":0,"up_vote_count":184,"accepted_answer_id":33215620,"answer_count":33,"score":184,"last_activity_date":1690289973,"creation_date":1444822213,"question_id":33124153,"body_markdown":"So I started writing tests for our Java-Spring-project. \r\n\r\nWhat I use is JUnit and Mockito. It&#39;s said, that when I use the when()...thenReturn() option I can mock services, without simulating them or so. So what I want to do is, to set:\r\n\r\n    when(classIwantToTest.object.get().methodWhichReturnsAList(input))thenReturn(ListcreatedInsideTheTestClass)  \r\n\r\nBut no matter which when-clause I do, I always get a NullpointerException, which of course makes sense, because input is null. \r\n\r\n\r\nAlso when I try to mock another method from an object: \r\n\r\n    when(object.method()).thenReturn(true)\r\n\r\nThere I also get a Nullpointer, because the method needs a variable, which isn&#39;t set. \r\n\r\n\r\nBut I want to use when()..thenReturn() to get around creating this variable and so on. I just want to make sure, that if any class calls this method, then no matter what, just return true or the list above.\r\n\r\nIs it a basically misunderstanding from my side, or is there something else wrong?\r\n\r\n\r\n**Code:**\r\n\r\n\r\n    public class classIWantToTest implements classIWantToTestFacade{\r\n    \t    @Autowired\r\n    \t    private SomeService myService;\r\n    \r\n    \t    @Override\r\n    \t    public Optional&lt;OutputData&gt; getInformations(final InputData inputData) {\r\n    \t        final Optional&lt;OutputData&gt; data = myService.getListWithData(inputData);\r\n    \t        if (data.isPresent()) {\r\n    \t            final List&lt;ItemData&gt; allData = data.get().getItemDatas();\r\n    \t            \t//do something with the data and allData\r\n    \t            return data;\r\n    \t        }\r\n    \r\n    \t        return Optional.absent();\r\n    \t    }\t\r\n    }\r\n\r\n\r\n\r\nAnd here is my test class:\r\n\r\n    public class Test {\r\n    \r\n        private InputData inputdata;\r\n    \r\n        private ClassUnderTest classUnderTest;\r\n    \r\n        final List&lt;ItemData&gt; allData = new ArrayList&lt;ItemData&gt;();\r\n    \r\n        @Mock\r\n        private DeliveryItemData item1;\r\n    \r\n        @Mock\r\n        private DeliveryItemData item2;\r\n    \r\n    \r\n    \r\n        @Mock\r\n        private SomeService myService;\r\n    \r\n     \r\n        @Before\r\n        public void setUp() throws Exception {\r\n            classUnderTest = new ClassUnderTest();\r\n            myService = mock(myService.class); \r\n            classUnderTest.setService(myService);\r\n            item1 = mock(DeliveryItemData.class);\r\n            item2 = mock(DeliveryItemData.class);\r\n    \r\n        }\r\n    \r\n    \r\n        @Test\r\n        public void test_sort() {\r\n            createData();\r\n            when(myService.getListWithData(inputdata).get().getItemDatas());\r\n    \r\n            when(item1.hasSomething()).thenReturn(true);\r\n            when(item2.hasSomething()).thenReturn(false);\r\n    \r\n        }\r\n    \r\n        public void createData() {\r\n        \titem1.setSomeValue(&quot;val&quot;);\r\n        \titem2.setSomeOtherValue(&quot;test&quot;);\r\n    \r\n            item2.setSomeValue(&quot;val&quot;);\r\n            item2.setSomeOtherValue(&quot;value&quot;);\r\n    \r\n            allData.add(item1);\r\n            allData.add(item2);\r\n    \r\n    \r\n    }\r\n\r\n","title":"Mockito - NullpointerException when stubbing Method","body":"<p>So I started writing tests for our Java-Spring-project. </p>\n\n<p>What I use is JUnit and Mockito. It's said, that when I use the when()...thenReturn() option I can mock services, without simulating them or so. So what I want to do is, to set:</p>\n\n<pre><code>when(classIwantToTest.object.get().methodWhichReturnsAList(input))thenReturn(ListcreatedInsideTheTestClass)  \n</code></pre>\n\n<p>But no matter which when-clause I do, I always get a NullpointerException, which of course makes sense, because input is null. </p>\n\n<p>Also when I try to mock another method from an object: </p>\n\n<pre><code>when(object.method()).thenReturn(true)\n</code></pre>\n\n<p>There I also get a Nullpointer, because the method needs a variable, which isn't set. </p>\n\n<p>But I want to use when()..thenReturn() to get around creating this variable and so on. I just want to make sure, that if any class calls this method, then no matter what, just return true or the list above.</p>\n\n<p>Is it a basically misunderstanding from my side, or is there something else wrong?</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>public class classIWantToTest implements classIWantToTestFacade{\n        @Autowired\n        private SomeService myService;\n\n        @Override\n        public Optional&lt;OutputData&gt; getInformations(final InputData inputData) {\n            final Optional&lt;OutputData&gt; data = myService.getListWithData(inputData);\n            if (data.isPresent()) {\n                final List&lt;ItemData&gt; allData = data.get().getItemDatas();\n                    //do something with the data and allData\n                return data;\n            }\n\n            return Optional.absent();\n        }   \n}\n</code></pre>\n\n<p>And here is my test class:</p>\n\n<pre><code>public class Test {\n\n    private InputData inputdata;\n\n    private ClassUnderTest classUnderTest;\n\n    final List&lt;ItemData&gt; allData = new ArrayList&lt;ItemData&gt;();\n\n    @Mock\n    private DeliveryItemData item1;\n\n    @Mock\n    private DeliveryItemData item2;\n\n\n\n    @Mock\n    private SomeService myService;\n\n\n    @Before\n    public void setUp() throws Exception {\n        classUnderTest = new ClassUnderTest();\n        myService = mock(myService.class); \n        classUnderTest.setService(myService);\n        item1 = mock(DeliveryItemData.class);\n        item2 = mock(DeliveryItemData.class);\n\n    }\n\n\n    @Test\n    public void test_sort() {\n        createData();\n        when(myService.getListWithData(inputdata).get().getItemDatas());\n\n        when(item1.hasSomething()).thenReturn(true);\n        when(item2.hasSomething()).thenReturn(false);\n\n    }\n\n    public void createData() {\n        item1.setSomeValue(\"val\");\n        item2.setSomeOtherValue(\"test\");\n\n        item2.setSomeValue(\"val\");\n        item2.setSomeOtherValue(\"value\");\n\n        allData.add(item1);\n        allData.add(item2);\n\n\n}\n</code></pre>\n"},{"tags":["java","apache-kafka","ibm-mq","apache-kafka-connect","jsonpath"],"answers":[{"comments":[{"owner":{"account_id":899936,"reputation":2034,"user_id":936329,"accept_rate":48,"display_name":"bluelabel"},"score":0,"creation_date":1690256792,"post_id":76756716,"comment_id":135324297,"body_markdown":"Thanks.  If I write custom code in Java, do I have to implement the `org.apache.kafka.connect.transforms.Transformation` interface? I am struggling to understand how, as the value doesn&#39;t have a schema, how do I make it work. Do you have any examples that I can refer to? I tried with HoistField transform, but not sure if that is the correct path to solve this.","body":"Thanks.  If I write custom code in Java, do I have to implement the <code>org.apache.kafka.connect.transforms.Transformation</code> interface? I am struggling to understand how, as the value doesn&#39;t have a schema, how do I make it work. Do you have any examples that I can refer to? I tried with HoistField transform, but not sure if that is the correct path to solve this."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690289276,"post_id":76756716,"comment_id":135330015,"body_markdown":"Struct/Schemas are not required for transforms, no. The Struct valueSchema would be null, or equal to String/Bytes schema, for example. The hoist transform won&#39;t help with string containment. Have you tried using the linked transform with something like `$[?(@ =~ &quot;ABC123&quot;)]` ...? Plain strings are still valid JSON","body":"Struct/Schemas are not required for transforms, no. The Struct valueSchema would be null, or equal to String/Bytes schema, for example. The hoist transform won&#39;t help with string containment. Have you tried using the linked transform with something like <code>$[?(@ =~ &quot;ABC123&quot;)]</code> ...? Plain strings are still valid JSON"},{"owner":{"account_id":899936,"reputation":2034,"user_id":936329,"accept_rate":48,"display_name":"bluelabel"},"score":0,"creation_date":1690377171,"post_id":76756716,"comment_id":135344892,"body_markdown":"Couldn&#39;t find much about the linked transformation. Let&#39;s say I want to write a custom transformation code to filter out the &#39;PQR123&#39; records by overriding the  `https://github.com/apache/kafka/blob/trunk/connect/transforms/src/main/java/org/apache/kafka/connect/transforms/Filter.java` class. How do I exclude the records in the R apply (R record)  method?  should I return null? Hope you got what I am trying to do here.","body":"Couldn&#39;t find much about the linked transformation. Let&#39;s say I want to write a custom transformation code to filter out the &#39;PQR123&#39; records by overriding the  <code>https:&#47;&#47;github.com&#47;apache&#47;kafka&#47;blob&#47;trunk&#47;connect&#47;transform&zwnj;&#8203;s&#47;src&#47;main&#47;java&#47;org&#47;&zwnj;&#8203;apache&#47;kafka&#47;connect&zwnj;&#8203;&#47;transforms&#47;Filter.j&zwnj;&#8203;ava</code> class. How do I exclude the records in the R apply (R record)  method?  should I return null? Hope you got what I am trying to do here."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690381761,"post_id":76756716,"comment_id":135345934,"body_markdown":"Yes, you can return null, or you can try `filter.type=exclude` option with `$[?(@ =~ &quot;PQR123&quot;)]` JSONPath query in the connector you mentioned (which is in a different repo)","body":"Yes, you can return null, or you can try <code>filter.type=exclude</code> option with <code>$[?(@ =~ &quot;PQR123&quot;)]</code> JSONPath query in the connector you mentioned (which is in a different repo)"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690218918,"creation_date":1690218918,"answer_id":76756716,"question_id":76750813,"body_markdown":"You will need to write custom code, or pre-process the data using tools like Kafka Streams, ksqlDB, Flink, Spark, etc.\r\n\r\nKafka Connect works best on structured data, not plain strings, and even if you have JSON, there is no &quot;String contains&quot; filter that is built-in. The linked transform from Confluent would have to be installed separately, and you can try using `=~` JSONPath operator.","title":"MQ to Kafka source connector filter","body":"<p>You will need to write custom code, or pre-process the data using tools like Kafka Streams, ksqlDB, Flink, Spark, etc.</p>\n<p>Kafka Connect works best on structured data, not plain strings, and even if you have JSON, there is no &quot;String contains&quot; filter that is built-in. The linked transform from Confluent would have to be installed separately, and you can try using <code>=~</code> JSONPath operator.</p>\n"}],"owner":{"account_id":899936,"reputation":2034,"user_id":936329,"accept_rate":48,"display_name":"bluelabel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":140,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76756716,"answer_count":1,"score":0,"last_activity_date":1690289465,"creation_date":1690158735,"question_id":76750813,"body_markdown":"I am trying to configure a Kafka source connector to read messages from IBMMQ and route those messages to a Kafka topic. I am getting 2 types of messages, and value of the both message is a string.\r\nEg: `AB ABC123 PQRZ 20220724 IJK BLA BLA-BLA` and\r\n`AB PQR123 1234 20220724 IJK BLA BLA-BLA XYZ`\r\n\r\nI want to filter out one of those messages based on the string content of the value. \r\n\r\nIf I take the above 2 messages as an example, I want the message which contains ABC123 to be produced to the Kafka topic and PQR123 to be dropped. [The examples shown in the confluent][1] are all based on JSON payload. Is there any way I can do this without writing a custom transform class (java)\r\n\r\n\r\n  [1]: https://docs.confluent.io/platform/current/connect/transforms/filter-confluent.html#confluent-filter","title":"MQ to Kafka source connector filter","body":"<p>I am trying to configure a Kafka source connector to read messages from IBMMQ and route those messages to a Kafka topic. I am getting 2 types of messages, and value of the both message is a string.\nEg: <code>AB ABC123 PQRZ 20220724 IJK BLA BLA-BLA</code> and\n<code>AB PQR123 1234 20220724 IJK BLA BLA-BLA XYZ</code></p>\n<p>I want to filter out one of those messages based on the string content of the value.</p>\n<p>If I take the above 2 messages as an example, I want the message which contains ABC123 to be produced to the Kafka topic and PQR123 to be dropped. <a href=\"https://docs.confluent.io/platform/current/connect/transforms/filter-confluent.html#confluent-filter\" rel=\"nofollow noreferrer\">The examples shown in the confluent</a> are all based on JSON payload. Is there any way I can do this without writing a custom transform class (java)</p>\n"},{"tags":["java","collections"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":0,"creation_date":1689779550,"post_id":76722163,"comment_id":135262541,"body_markdown":"Just out of curiosity, are these time units like days, weeks, months and years? If so, should not 12 days come after 1 week?","body":"Just out of curiosity, are these time units like days, weeks, months and years? If so, should not 12 days come after 1 week?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690289099,"post_id":76722241,"comment_id":135329952,"body_markdown":"Note that you [don’t need `substring` for parsing a part of a string](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.CharSequence,int,int,int)) since Java&#160;9, i.e. `Integer.parseInt(s, 0, s.length() - 1, 10)` for this use case.","body":"Note that you <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Integer.html#parseInt(java.lang.CharSequence,int,int,int)\" rel=\"nofollow noreferrer\">don’t need <code>substring</code> for parsing a part of a string</a> since Java 9, i.e. <code>Integer.parseInt(s, 0, s.length() - 1, 10)</code> for this use case."},{"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"score":0,"creation_date":1690289313,"post_id":76722241,"comment_id":135330025,"body_markdown":"@Holger Good point. I&#39;ve updated.","body":"@Holger Good point. I&#39;ve updated."}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690289301,"creation_date":1689775831,"answer_id":76722241,"question_id":76722163,"body_markdown":"First, you should sort by the index in `order`, then by the numeric value.\r\n\r\nMoreover, you should get the index of the last character in the string in `order`, instead of passing the whole `String` to `indexOf`.\r\n\r\n```java\r\nvar order = Arrays.asList(&#39;D&#39;, &#39;W&#39;, &#39;M&#39;,&#39;Y&#39;); // use chars instead of String\r\nlistNew.sort(Comparator.comparingInt((String s) -&gt; order.indexOf(s.charAt(s.length() - 1)))\r\n             .thenComparingInt(s -&gt; Integer.parseInt(s, 0, s.length() - 1, 10)));\r\n```","title":"Sorting list in a specific order","body":"<p>First, you should sort by the index in <code>order</code>, then by the numeric value.</p>\n<p>Moreover, you should get the index of the last character in the string in <code>order</code>, instead of passing the whole <code>String</code> to <code>indexOf</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var order = Arrays.asList('D', 'W', 'M','Y'); // use chars instead of String\nlistNew.sort(Comparator.comparingInt((String s) -&gt; order.indexOf(s.charAt(s.length() - 1)))\n             .thenComparingInt(s -&gt; Integer.parseInt(s, 0, s.length() - 1, 10)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689779238,"creation_date":1689779238,"answer_id":76722726,"question_id":76722163,"body_markdown":"This might be just an exercise, so the following might be overkill, but if this is an actual entity it might be worth to create a class/record and define a compare method. \r\n\r\nThis class would have a number and a period string (&#39;D&#39;, &#39;W&#39;, &#39;M&#39;, &#39;Y&#39;), then to compare them you create two instances and invoke the `compareTo` method:\r\n\r\n    import java.util.Comparator;\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    import java.util.Arrays;\r\n    \r\n    \r\n    public class MyClass {\r\n        public static void main(String args[]) {\r\n            List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\r\n            listNew.add(&quot;2D&quot;);\r\n            listNew.add(&quot;1D&quot;);\r\n            listNew.add(&quot;1Y&quot;);\r\n            listNew.add(&quot;12W&quot;);\r\n            listNew.add(&quot;1W&quot;);\r\n            listNew.add(&quot;23M&quot;);\r\n            listNew.add(&quot;4M&quot;);\r\n            listNew.add(&quot;2Y&quot;);\r\n            listNew.add(&quot;12D&quot;);\r\n            listNew.add(&quot;1W&quot;);;\r\n            \r\n            listNew.sort((s, t) -&gt; {\r\n                var a = new TimePeriod(Integer.parseInt(s.substring(0, s.length() - 1)), s.substring(s.length() - 1));\r\n                var b = new TimePeriod(Integer.parseInt(t.substring(0, t.length() - 1)), t.substring(t.length() - 1));\r\n                return a.compareTo(b);\r\n            });\r\n    \r\n            for (String element : listNew) {\r\n                System.out.println(element);\r\n            }\r\n        }\r\n    }\r\n    \r\n    record TimePeriod(int number, String period) {\r\n      private static final List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;, &quot;Y&quot;);\r\n    \r\n      public int compareTo (TimePeriod other){\r\n        int periodPart = Integer.compare( order.indexOf(this.period), order.indexOf(other.period));\r\n        return periodPart != 0 ? periodPart : Integer.compare(this.number, other.number);\r\n      }\r\n    }\r\n\r\nIt might not be as clever, but overtime might be easier to maintain. ","title":"Sorting list in a specific order","body":"<p>This might be just an exercise, so the following might be overkill, but if this is an actual entity it might be worth to create a class/record and define a compare method.</p>\n<p>This class would have a number and a period string ('D', 'W', 'M', 'Y'), then to compare them you create two instances and invoke the <code>compareTo</code> method:</p>\n<pre><code>import java.util.Comparator;\nimport java.util.List;\nimport java.util.ArrayList;\nimport java.util.Arrays;\n\n\npublic class MyClass {\n    public static void main(String args[]) {\n        List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\n        listNew.add(&quot;2D&quot;);\n        listNew.add(&quot;1D&quot;);\n        listNew.add(&quot;1Y&quot;);\n        listNew.add(&quot;12W&quot;);\n        listNew.add(&quot;1W&quot;);\n        listNew.add(&quot;23M&quot;);\n        listNew.add(&quot;4M&quot;);\n        listNew.add(&quot;2Y&quot;);\n        listNew.add(&quot;12D&quot;);\n        listNew.add(&quot;1W&quot;);;\n        \n        listNew.sort((s, t) -&gt; {\n            var a = new TimePeriod(Integer.parseInt(s.substring(0, s.length() - 1)), s.substring(s.length() - 1));\n            var b = new TimePeriod(Integer.parseInt(t.substring(0, t.length() - 1)), t.substring(t.length() - 1));\n            return a.compareTo(b);\n        });\n\n        for (String element : listNew) {\n            System.out.println(element);\n        }\n    }\n}\n\nrecord TimePeriod(int number, String period) {\n  private static final List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;, &quot;Y&quot;);\n\n  public int compareTo (TimePeriod other){\n    int periodPart = Integer.compare( order.indexOf(this.period), order.indexOf(other.period));\n    return periodPart != 0 ? periodPart : Integer.compare(this.number, other.number);\n  }\n}\n</code></pre>\n<p>It might not be as clever, but overtime might be easier to maintain.</p>\n"},{"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689798399,"creation_date":1689798399,"answer_id":76724963,"question_id":76722163,"body_markdown":"In case you use immutable list, you can use snippet like this:\r\n\r\n```java\r\npublic static List&lt;String&gt; sort(List&lt;String&gt; data, char... letters) {\r\n    Map&lt;Character, Queue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\r\n\r\n    for (String str : data) {\r\n        map.computeIfAbsent(str.charAt(str.length() - 1),\r\n                            PriorityQueue::new)\r\n                .add(Integer.parseInt(str.substring(0, str.length() - 1)));\r\n    }\r\n\r\n    return IntStream.range(0, letters.length)\r\n            .mapToObj(i -&gt; letters[i])\r\n            .filter(map::containsKey)\r\n            .flatMap((Function&lt;Character, Stream&lt;String&gt;&gt;) ch -&gt;\r\n                    map.get(ch).stream()\r\n                            .map(num -&gt; String.valueOf(num) + ch))\r\n            .collect(Collectors.toList());\r\n}\r\n```","title":"Sorting list in a specific order","body":"<p>In case you use immutable list, you can use snippet like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static List&lt;String&gt; sort(List&lt;String&gt; data, char... letters) {\n    Map&lt;Character, Queue&lt;Integer&gt;&gt; map = new HashMap&lt;&gt;();\n\n    for (String str : data) {\n        map.computeIfAbsent(str.charAt(str.length() - 1),\n                            PriorityQueue::new)\n                .add(Integer.parseInt(str.substring(0, str.length() - 1)));\n    }\n\n    return IntStream.range(0, letters.length)\n            .mapToObj(i -&gt; letters[i])\n            .filter(map::containsKey)\n            .flatMap((Function&lt;Character, Stream&lt;String&gt;&gt;) ch -&gt;\n                    map.get(ch).stream()\n                            .map(num -&gt; String.valueOf(num) + ch))\n            .collect(Collectors.toList());\n}\n</code></pre>\n"}],"owner":{"account_id":4708698,"reputation":1254,"user_id":3809938,"accept_rate":44,"display_name":"user3809938"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1690289301,"creation_date":1689775375,"question_id":76722163,"body_markdown":"I have a list as below\r\n\r\n(2D, 1D, 1Y, 12W, 1W, 23M, 4M, 2Y, 12D)\r\n\r\nI want to sort in the following order\r\n\r\n1) by the letters (D,W,M,Y)\r\n2) then numerically\r\n\r\nSo I should have output\r\n\r\n(1D, 2D, 12D, 1W, 12W, 4M, 23M, 1Y, 2Y)\r\n\r\nI have tried this\r\n\r\n    import java.util.List;\r\n    import java.util.ArrayList;\r\n    import java.util.Comparator;\r\n    import java.util.Collections;\r\n    import java.util.Arrays;\r\n\r\n\r\n    public class MyClass {\r\n    public static void main(String args[]) {\r\n      List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\r\n      listNew.add(&quot;2D&quot;);\r\n      listNew.add(&quot;1D&quot;);\r\n      listNew.add(&quot;1Y&quot;);\r\n      listNew.add(&quot;12W&quot;);\r\n      listNew.add(&quot;1W&quot;);\r\n      listNew.add(&quot;23M&quot;);\r\n      listNew.add(&quot;4M&quot;);\r\n      listNew.add(&quot;2Y&quot;);\r\n      listNew.add(&quot;12D&quot;);\r\n      listNew.add(&quot;1W&quot;);\r\n      List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;,&quot;Y&quot;);\r\n      listNew.sort(Comparator.comparingInt(s -&gt; Integer.parseInt(((String) s).substring(0, ((String) s).length() - 1))).thenComparing(Comparator.comparingInt(order::indexOf)));\r\n      for (String element : listNew) {\r\n            System.out.println(element);\r\n        }\r\n    }\r\n}\r\n\r\nHowever I get this output:\r\n\r\n1D\r\n1Y\r\n1W\r\n1W\r\n2D\r\n2Y\r\n4M\r\n12W\r\n12D\r\n23M\r\n\r\nWhat am I doing wrong?","title":"Sorting list in a specific order","body":"<p>I have a list as below</p>\n<p>(2D, 1D, 1Y, 12W, 1W, 23M, 4M, 2Y, 12D)</p>\n<p>I want to sort in the following order</p>\n<ol>\n<li>by the letters (D,W,M,Y)</li>\n<li>then numerically</li>\n</ol>\n<p>So I should have output</p>\n<p>(1D, 2D, 12D, 1W, 12W, 4M, 23M, 1Y, 2Y)</p>\n<p>I have tried this</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.Collections;\nimport java.util.Arrays;\n\n\npublic class MyClass {\npublic static void main(String args[]) {\n  List&lt;String&gt; listNew = new ArrayList&lt;&gt;();\n  listNew.add(&quot;2D&quot;);\n  listNew.add(&quot;1D&quot;);\n  listNew.add(&quot;1Y&quot;);\n  listNew.add(&quot;12W&quot;);\n  listNew.add(&quot;1W&quot;);\n  listNew.add(&quot;23M&quot;);\n  listNew.add(&quot;4M&quot;);\n  listNew.add(&quot;2Y&quot;);\n  listNew.add(&quot;12D&quot;);\n  listNew.add(&quot;1W&quot;);\n  List&lt;String&gt; order = Arrays.asList(&quot;D&quot;, &quot;W&quot;, &quot;M&quot;,&quot;Y&quot;);\n  listNew.sort(Comparator.comparingInt(s -&gt; Integer.parseInt(((String) s).substring(0, ((String) s).length() - 1))).thenComparing(Comparator.comparingInt(order::indexOf)));\n  for (String element : listNew) {\n        System.out.println(element);\n    }\n}\n</code></pre>\n<p>}</p>\n<p>However I get this output:</p>\n<p>1D\n1Y\n1W\n1W\n2D\n2Y\n4M\n12W\n12D\n23M</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["javascript","java","syncfusion"],"comments":[{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1688133843,"post_id":76588899,"comment_id":135037278,"body_markdown":"To solve the issue I use this","body":"To solve the issue I use this"}],"answers":[{"tags":[],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1688134123,"creation_date":1688134123,"answer_id":76589652,"question_id":76588899,"body_markdown":"To solve the issue I did this\r\n\r\n```java\r\npublic static String htmlToSfdt(String html) throws Exception {\r\n\t\thtml = ImageUtil.convertImagesToBase64(html);\r\n\t\tbyte[] bytes = html.getBytes(StandardCharsets.UTF_8);\r\n\t\tInputStream stream = new ByteArrayInputStream(bytes);\t\t\r\n\t\tString sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\r\n\t\tstream.close();\r\n\t\treturn sfdt;\r\n\t}\r\n```\r\n\r\n\r\n#ImageUtil.java\r\n```java\r\npublic static String convertImagesToBase64(String html) {\r\n        Pattern pattern = Pattern.compile(&quot;&lt;img\\\\s+src\\\\s*=\\\\s*\\&quot;(.*?)\\&quot;&quot;, Pattern.CASE_INSENSITIVE);\r\n        Matcher matcher = pattern.matcher(html);\r\n        StringBuffer sb = new StringBuffer();\r\n\r\n        while (matcher.find()) {\r\n            String imageUrl = matcher.group(1);\r\n            try {\r\n                String base64Image = imageToBase64(imageUrl);\r\n                matcher.appendReplacement(sb, &quot;&lt;img src=\\&quot;data:image/png;base64,&quot; + base64Image + &quot;\\&quot;&quot;);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n        matcher.appendTail(sb);\r\n        return sb.toString();\r\n    }\r\n\r\n    public static String imageToBase64(String imageUrl) throws IOException {\r\n    \t  URL url = new URL(imageUrl);\r\n          InputStream inputStream = url.openStream();\r\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\r\n          byte[] buffer = new byte[4096];\r\n          int bytesRead;\r\n\r\n          while ((bytesRead = inputStream.read(buffer)) != -1) \r\n              outputStream.write(buffer, 0, bytesRead);\r\n\r\n          byte[] imageBytes = outputStream.toByteArray();\r\n          String base64Image = Base64.getEncoder().encodeToString(imageBytes);\r\n\r\n          inputStream.close();\r\n          outputStream.close();\r\n\r\n          return base64Image;\r\n    }\r\n```\r\n\r\nhowever, I would expect that Syncfusion&#39;s Document Editor do this backstage. If somebody knows a better way it would be helpful.","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>To solve the issue I did this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String htmlToSfdt(String html) throws Exception {\n        html = ImageUtil.convertImagesToBase64(html);\n        byte[] bytes = html.getBytes(StandardCharsets.UTF_8);\n        InputStream stream = new ByteArrayInputStream(bytes);       \n        String sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\n        stream.close();\n        return sfdt;\n    }\n</code></pre>\n<p>#ImageUtil.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String convertImagesToBase64(String html) {\n        Pattern pattern = Pattern.compile(&quot;&lt;img\\\\s+src\\\\s*=\\\\s*\\&quot;(.*?)\\&quot;&quot;, Pattern.CASE_INSENSITIVE);\n        Matcher matcher = pattern.matcher(html);\n        StringBuffer sb = new StringBuffer();\n\n        while (matcher.find()) {\n            String imageUrl = matcher.group(1);\n            try {\n                String base64Image = imageToBase64(imageUrl);\n                matcher.appendReplacement(sb, &quot;&lt;img src=\\&quot;data:image/png;base64,&quot; + base64Image + &quot;\\&quot;&quot;);\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        matcher.appendTail(sb);\n        return sb.toString();\n    }\n\n    public static String imageToBase64(String imageUrl) throws IOException {\n          URL url = new URL(imageUrl);\n          InputStream inputStream = url.openStream();\n          ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n          byte[] buffer = new byte[4096];\n          int bytesRead;\n\n          while ((bytesRead = inputStream.read(buffer)) != -1) \n              outputStream.write(buffer, 0, bytesRead);\n\n          byte[] imageBytes = outputStream.toByteArray();\n          String base64Image = Base64.getEncoder().encodeToString(imageBytes);\n\n          inputStream.close();\n          outputStream.close();\n\n          return base64Image;\n    }\n</code></pre>\n<p>however, I would expect that Syncfusion's Document Editor do this backstage. If somebody knows a better way it would be helpful.</p>\n"},{"comments":[{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1688517539,"post_id":76611511,"comment_id":135083066,"body_markdown":"The problem is that I receive the html to render in syncfusion&#39;s Document Editor and not just the image.","body":"The problem is that I receive the html to render in syncfusion&#39;s Document Editor and not just the image."},{"owner":{"account_id":28947647,"reputation":1,"user_id":22172917,"display_name":"Selvaprakash K"},"score":0,"creation_date":1689081760,"post_id":76611511,"comment_id":135160388,"body_markdown":"You can use the insertImage API (client-side) to insert image from the web URL. Refer to the below code.\n\nthis.container.documentEditor.editor.insertImage(\n\n     &#39;https://media.istockphoto.com/id/1337232523/photo/high-angle-view-of-a-lake-and-forest.jpg?s=1024x1024&amp;w=is&amp;k=20&amp;c=EPh5_6vL4mywUc3AfLRKJCChgAs41oI9nMveOInep_0=&#39;\n\n   );\n\n \n\nUG Link: https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage","body":"You can use the insertImage API (client-side) to insert image from the web URL. Refer to the below code.  this.container.documentEditor.editor.insertImage(       &#39;<a href=\"https://media.istockphoto.com/id/1337232523/photo/high-angle-view-of-a-lake-and-forest.jpg?s=1024x1024&amp;w=is&amp;k=20&amp;c=EPh5_6vL4mywUc3AfLRKJCChgAs41oI9nMveOInep_0=\" rel=\"nofollow noreferrer\">media.istockphoto.com/id/1337232523/photo/&hellip;</a>&#39;     );     UG Link: <a href=\"https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage\" rel=\"nofollow noreferrer\">ej2.syncfusion.com/javascript/documentation/api/document-edi&zwnj;&#8203;tor/&hellip;</a>"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1689169285,"post_id":76611511,"comment_id":135175427,"body_markdown":"Thank you very much, your answer was very helpful; however, I need to process images at backend.","body":"Thank you very much, your answer was very helpful; however, I need to process images at backend."}],"tags":[],"owner":{"account_id":28947647,"reputation":1,"user_id":22172917,"display_name":"Selvaprakash K"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688465273,"creation_date":1688465151,"answer_id":76611511,"question_id":76588899,"body_markdown":"After examining your use case, we suggest that if you want to add an image from a web or file URL, you can use the insertImage API directly on the client side. For further information on this, you can refer to the UG documentation below.\r\n\r\nIf your use case is different than that of the above one, please share with us more details about it.\r\n\r\n[UG Link][1]\r\n\r\n\r\n  [1]: https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>After examining your use case, we suggest that if you want to add an image from a web or file URL, you can use the insertImage API directly on the client side. For further information on this, you can refer to the UG documentation below.</p>\n<p>If your use case is different than that of the above one, please share with us more details about it.</p>\n<p><a href=\"https://ej2.syncfusion.com/javascript/documentation/api/document-editor/editor/#insertimage\" rel=\"nofollow noreferrer\">UG Link</a></p>\n"},{"tags":[],"owner":{"account_id":28947647,"reputation":1,"user_id":22172917,"display_name":"Selvaprakash K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690289164,"creation_date":1689850893,"answer_id":76729192,"question_id":76588899,"body_markdown":"Regarding the query, &quot;however, I need to process images at backend.&quot; Please refer to the below code snippet.\r\n\r\nProcess flow:\r\n 1. Using the `DocIO` component, we are creating a Word document and inserting the image tag.\r\n 2. The created document is sent to `DocumentEditor` for opening.\r\n\r\n```csharp\r\npublic string OpenImage()\r\n{\r\n    //Loads the template document\r\n    WDocument document = new WDocument();\r\n    document.EnsureMinimal();\r\n    document.HTMLImportSettings.ImageNodeVisited += OpenImage;\r\n    //Html string to be inserted\r\n    string html = &quot;&lt;img src=\\&quot;https://www.w3schools.com/tags/img_girl.jpg\\&quot;/&gt;&quot;;\r\n    //Validates the Html string\r\n    bool isValidHtml = document.LastSection.Body.IsValidXHTML(html, Syncfusion.DocIO.DLS.XHTMLValidationType.None);\r\n    //When the Html string passes validation, it is inserted to the document\r\n    if (isValidHtml)\r\n    {\r\n\r\n        //Appends the Html string to first paragraph in the document\r\n        document.Sections[0].Body.Paragraphs[0].AppendHTML(html);\r\n    }\r\n    document.HTMLImportSettings.ImageNodeVisited -= OpenImage;\r\n    //Hooks MetafileImageParsed event.\r\n    WordDocument.MetafileImageParsed += OnMetafileImageParsed;\r\n    WordDocument document1 = WordDocument.Load(document);\r\n    document1.OptimizeSfdt = false;\r\n    //Unhooks MetafileImageParsed event.\r\n    WordDocument.MetafileImageParsed -= OnMetafileImageParsed;\r\n    string json = Newtonsoft.Json.JsonConvert.SerializeObject(document1);\r\n    document.Dispose();\r\n    return json;\r\n}\r\n\r\n/// &lt;summary&gt;\r\n/// Event handler to download the image from website.\r\n/// &lt;/summary&gt;\r\nprivate static void OpenImage(object sender, Syncfusion.DocIO.DLS.ImageNodeVisitedEventArgs args)\r\n{\r\n    //Check whether image src is mentioned as website URL.\r\n    if (args.Uri.StartsWith(&quot;https://&quot;))\r\n    {\r\n        WebClient client = new WebClient();\r\n        //Download the image as stream.\r\n        byte[] image = client.DownloadData(args.Uri);\r\n        Stream stream = new MemoryStream(image);\r\n        //Set the retrieved image from the input HTML.\r\n        args.ImageStream = stream;\r\n    }\r\n}\r\n\r\n//Converts Metafile to raster image.\r\nprivate static void OnMetafileImageParsed(object sender, MetafileImageParsedEventArgs args)\r\n{\r\n    System.Drawing.Image img = System.Drawing.Image.FromStream(args.MetafileStream);\r\n    //You can write your own method definition for converting metafile to raster image using any third-party image converter.\r\n    args.ImageStream = ConvertMetafileToRasterImage(args.MetafileStream);\r\n}\r\n\r\nprivate static Stream ConvertMetafileToRasterImage(Stream ImageStream)\r\n{\r\n    //Here we are loading a default raster image as fallback.\r\n    Stream imgStream = GetManifestResourceStream(&quot;ImageNotFound.jpg&quot;);\r\n    return imgStream;\r\n\r\n    //To do : Write your own logic for converting metafile to raster image using any third-party image converter(Syncfusion doesn&#39;t provide any image converter).\r\n}\r\n```\r\nOn the client side, you can call the above mentioned web action `OpenImage` and use the Open API.\r\n\r\n```javascript\r\n//Initialize Document Editor Container component.\r\nlet container: DocumentEditorContainer = new DocumentEditorContainer();\r\n\r\ncontainer.appendTo(&#39;#DocumentEditorContainer&#39;);\r\n\r\ndocument.getElementById(&#39;import&#39;).addEventListener(&#39;click&#39;, () =&gt; {\r\n    let http: XMLHttpRequest = new XMLHttpRequest();\r\n    //add your url in which you want to open document inside the &quot;&quot;\r\n    let content = { fileUrl: &quot;&quot; };\r\n    let baseurl: string = &quot;/api/documenteditor/OpenImage&quot;;\r\n    http.open(&quot;POST&quot;, baseurl, true);\r\n    http.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;);\r\n    http.onreadystatechange = () =&gt; {\r\n        if (http.readyState === 4) {\r\n            if (http.status === 200 || http.status === 304) {\r\n                //open the SFDT text in Document Editor\r\n                container.documentEditor.open(http.responseText);\r\n            }\r\n        }\r\n    };\r\n    http.send(JSON.stringify(content));\r\n});\r\n```","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>Regarding the query, &quot;however, I need to process images at backend.&quot; Please refer to the below code snippet.</p>\n<p>Process flow:</p>\n<ol>\n<li>Using the <code>DocIO</code> component, we are creating a Word document and inserting the image tag.</li>\n<li>The created document is sent to <code>DocumentEditor</code> for opening.</li>\n</ol>\n<pre class=\"lang-cs prettyprint-override\"><code>public string OpenImage()\n{\n    //Loads the template document\n    WDocument document = new WDocument();\n    document.EnsureMinimal();\n    document.HTMLImportSettings.ImageNodeVisited += OpenImage;\n    //Html string to be inserted\n    string html = &quot;&lt;img src=\\&quot;https://www.w3schools.com/tags/img_girl.jpg\\&quot;/&gt;&quot;;\n    //Validates the Html string\n    bool isValidHtml = document.LastSection.Body.IsValidXHTML(html, Syncfusion.DocIO.DLS.XHTMLValidationType.None);\n    //When the Html string passes validation, it is inserted to the document\n    if (isValidHtml)\n    {\n\n        //Appends the Html string to first paragraph in the document\n        document.Sections[0].Body.Paragraphs[0].AppendHTML(html);\n    }\n    document.HTMLImportSettings.ImageNodeVisited -= OpenImage;\n    //Hooks MetafileImageParsed event.\n    WordDocument.MetafileImageParsed += OnMetafileImageParsed;\n    WordDocument document1 = WordDocument.Load(document);\n    document1.OptimizeSfdt = false;\n    //Unhooks MetafileImageParsed event.\n    WordDocument.MetafileImageParsed -= OnMetafileImageParsed;\n    string json = Newtonsoft.Json.JsonConvert.SerializeObject(document1);\n    document.Dispose();\n    return json;\n}\n\n/// &lt;summary&gt;\n/// Event handler to download the image from website.\n/// &lt;/summary&gt;\nprivate static void OpenImage(object sender, Syncfusion.DocIO.DLS.ImageNodeVisitedEventArgs args)\n{\n    //Check whether image src is mentioned as website URL.\n    if (args.Uri.StartsWith(&quot;https://&quot;))\n    {\n        WebClient client = new WebClient();\n        //Download the image as stream.\n        byte[] image = client.DownloadData(args.Uri);\n        Stream stream = new MemoryStream(image);\n        //Set the retrieved image from the input HTML.\n        args.ImageStream = stream;\n    }\n}\n\n//Converts Metafile to raster image.\nprivate static void OnMetafileImageParsed(object sender, MetafileImageParsedEventArgs args)\n{\n    System.Drawing.Image img = System.Drawing.Image.FromStream(args.MetafileStream);\n    //You can write your own method definition for converting metafile to raster image using any third-party image converter.\n    args.ImageStream = ConvertMetafileToRasterImage(args.MetafileStream);\n}\n\nprivate static Stream ConvertMetafileToRasterImage(Stream ImageStream)\n{\n    //Here we are loading a default raster image as fallback.\n    Stream imgStream = GetManifestResourceStream(&quot;ImageNotFound.jpg&quot;);\n    return imgStream;\n\n    //To do : Write your own logic for converting metafile to raster image using any third-party image converter(Syncfusion doesn't provide any image converter).\n}\n</code></pre>\n<p>On the client side, you can call the above mentioned web action <code>OpenImage</code> and use the Open API.</p>\n<pre class=\"lang-js prettyprint-override\"><code>//Initialize Document Editor Container component.\nlet container: DocumentEditorContainer = new DocumentEditorContainer();\n\ncontainer.appendTo('#DocumentEditorContainer');\n\ndocument.getElementById('import').addEventListener('click', () =&gt; {\n    let http: XMLHttpRequest = new XMLHttpRequest();\n    //add your url in which you want to open document inside the &quot;&quot;\n    let content = { fileUrl: &quot;&quot; };\n    let baseurl: string = &quot;/api/documenteditor/OpenImage&quot;;\n    http.open(&quot;POST&quot;, baseurl, true);\n    http.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json;charset=UTF-8&quot;);\n    http.onreadystatechange = () =&gt; {\n        if (http.readyState === 4) {\n            if (http.status === 200 || http.status === 304) {\n                //open the SFDT text in Document Editor\n                container.documentEditor.open(http.responseText);\n            }\n        }\n    };\n    http.send(JSON.stringify(content));\n});\n</code></pre>\n"}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":383,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76589652,"answer_count":3,"score":0,"last_activity_date":1690289164,"creation_date":1688127923,"question_id":76588899,"body_markdown":"I am struggling with syncfusion Document Editor. If I serialize an image and its content is in format base64 I am able to see the image in the document. However if the source of the image\r\nis its URL the Document Editor show an image indicating that it was unable to render the image or just doesn&#39;t find it. This is the code that I am using to transform from html to sfdt:\r\n```java\r\n\tpublic static String htmlToSfdt(String html) throws Exception {\r\n\t\thtml = &quot;&lt;img src=\\&quot;http://localhost:8080/app/resources/rtf/1/test.001.png\\&quot;/&gt;&quot;;\r\n\t\tbyte[] bytes = html.getBytes(StandardCharsets.UTF_8);\r\n\t\tInputStream stream = new ByteArrayInputStream(bytes);\t\t\r\n\t\tString sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\r\n\t\tstream.close();\r\n\t\treturn sfdt;\r\n\t}\r\n```\r\nThen I pass this sfdt to the DocumentEditor and get \r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5frCc.png","title":"Does Syncfusion Document Editor support url as source of images?","body":"<p>I am struggling with syncfusion Document Editor. If I serialize an image and its content is in format base64 I am able to see the image in the document. However if the source of the image\nis its URL the Document Editor show an image indicating that it was unable to render the image or just doesn't find it. This is the code that I am using to transform from html to sfdt:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static String htmlToSfdt(String html) throws Exception {\n        html = &quot;&lt;img src=\\&quot;http://localhost:8080/app/resources/rtf/1/test.001.png\\&quot;/&gt;&quot;;\n        byte[] bytes = html.getBytes(StandardCharsets.UTF_8);\n        InputStream stream = new ByteArrayInputStream(bytes);       \n        String sfdt = WordProcessorHelper.load(stream, com.syncfusion.ej2.wordprocessor.FormatType.Html);\n        stream.close();\n        return sfdt;\n    }\n</code></pre>\n<p>Then I pass this sfdt to the DocumentEditor and get\n<a href=\"https://i.stack.imgur.com/5frCc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5frCc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","maven","maven-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1684758572,"post_id":76305897,"comment_id":134559062,"body_markdown":"That is an hint that you have a wrong configuration in your build... either inherited through parent or alike... Please check the log output ...because I suppose it will be executed at least two times... etc.  Reference: https://lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p Link to the appropriate issue: https://issues.apache.org/jira/browse/MSOURCES-121","body":"That is an hint that you have a wrong configuration in your build... either inherited through parent or alike... Please check the log output ...because I suppose it will be executed at least two times... etc.  Reference: <a href=\"https://lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p\" rel=\"nofollow noreferrer\">lists.apache.org/thread/clgkh4809octgrv3o0p9fm1nzfvs6l2p</a> Link to the appropriate issue: <a href=\"https://issues.apache.org/jira/browse/MSOURCES-121\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSOURCES-121</a>"},{"owner":{"account_id":4560293,"reputation":751,"user_id":3702839,"display_name":"Joao Esperancinha"},"score":0,"creation_date":1684787097,"post_id":76305897,"comment_id":134565184,"body_markdown":"I found exactly the same error: https://github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/5050076108/jobs/9060326828?pr=53. I have no idea even where to start.","body":"I found exactly the same error: <a href=\"https://github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/5050076108/jobs/9060326828?pr=53\" rel=\"nofollow noreferrer\">github.com/JEsperancinhaOrg/consolerizer-root/actions/runs/&hellip;</a>&zwnj;&#8203;. I have no idea even where to start."},{"owner":{"account_id":1531514,"reputation":26639,"user_id":1428606,"accept_rate":71,"display_name":"Harald K"},"score":0,"creation_date":1684957639,"post_id":76305897,"comment_id":134595188,"body_markdown":"I had the same error happening to me. Turns out I had specified both the `jar` and the `jar-no-fork` goals...","body":"I had the same error happening to me. Turns out I had specified both the <code>jar</code> and the <code>jar-no-fork</code> goals..."},{"owner":{"account_id":125910,"reputation":1106,"user_id":322017,"accept_rate":67,"display_name":"Nicolas"},"score":0,"creation_date":1685009972,"post_id":76305897,"comment_id":134602286,"body_markdown":"I&#39;m also encountering this issue which is a result of https://issues.apache.org/jira/browse/MSOURCES-121. Unfortuanately I don&#39;t have enough information to understand if that&#39;s a bug in my pom or in the plugin.","body":"I&#39;m also encountering this issue which is a result of <a href=\"https://issues.apache.org/jira/browse/MSOURCES-121\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MSOURCES-121</a>. Unfortuanately I don&#39;t have enough information to understand if that&#39;s a bug in my pom or in the plugin."},{"owner":{"account_id":5969893,"reputation":982,"user_id":4692517,"display_name":"rmbrad"},"score":0,"creation_date":1685073602,"post_id":76305897,"comment_id":134613314,"body_markdown":"Had same error, was due to `shade` plugin with `createSourcesJar` running before source plugin. Fixed by moving `maven-source-plugin:jar` to `package` phase ([Usage](https://maven.apache.org/plugins/maven-source-plugin/usage.html) docs has it set to `verify`.)","body":"Had same error, was due to <code>shade</code> plugin with <code>createSourcesJar</code> running before source plugin. Fixed by moving <code>maven-source-plugin:jar</code> to <code>package</code> phase (<a href=\"https://maven.apache.org/plugins/maven-source-plugin/usage.html\" rel=\"nofollow noreferrer\">Usage</a> docs has it set to <code>verify</code>.)"}],"answers":[{"comments":[{"owner":{"account_id":9665250,"reputation":421,"user_id":7171936,"display_name":"Timz"},"score":0,"creation_date":1699618526,"post_id":76332433,"comment_id":136557813,"body_markdown":"This post is not helpful. He asks regarding the problem when upgrading from 3.2.1 to 3.3.0.","body":"This post is not helpful. He asks regarding the problem when upgrading from 3.2.1 to 3.3.0."}],"tags":[],"owner":{"account_id":28678692,"reputation":1,"user_id":21960318,"display_name":"Jos&#233; Fernandes"},"comment_count":1,"down_vote_count":4,"up_vote_count":0,"is_accepted":false,"score":-4,"last_activity_date":1685018832,"creation_date":1685018832,"answer_id":76332433,"question_id":76305897,"body_markdown":"I had the same problem yesterday and I solved adding this in my pom.xml:\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n       &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;3.2.1&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;plugin&gt;\r\n       &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n       &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n       &lt;version&gt;3.2.1&lt;/version&gt;\t\t\t\t\r\n    &lt;/plugin&gt;","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>I had the same problem yesterday and I solved adding this in my pom.xml:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n   &lt;version&gt;3.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;plugin&gt;\n   &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n   &lt;version&gt;3.2.1&lt;/version&gt;             \n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1685599966,"creation_date":1685599966,"answer_id":76379125,"question_id":76305897,"body_markdown":"Had the same issue after upgrading from `3.2.1` to `3.3.0`.\r\n\r\nThe error was resolved after changing the `goal` from `jar` to `jar-no-fork`:\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\r\n    &lt;version&gt;3.3.0&lt;/version&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;attach-sources&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;jar-no-fork&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>Had the same issue after upgrading from <code>3.2.1</code> to <code>3.3.0</code>.</p>\n<p>The error was resolved after changing the <code>goal</code> from <code>jar</code> to <code>jar-no-fork</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-source-plugin&lt;/artifactId&gt;\n    &lt;version&gt;3.3.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;attach-sources&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jar-no-fork&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12073168,"reputation":1,"user_id":8827775,"display_name":"Zach"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1686165360,"creation_date":1686164622,"answer_id":76426353,"question_id":76305897,"body_markdown":"If you&#39;re encountering difficulties with your pom configuration and need a workaround, you can skip the maven-source-plugin (this will prevent &#39;artifact-sources.jar&#39; deployment) by utilizing the **&#39;-Dmaven.source.skip&#39;** parameter in your mvn command.\r\n\r\n mvn help:describe -Dplugin=org.apache.maven.plugins:maven-source-plugin\r\n  &gt;Available parameters:\r\n    &lt;br&gt;skipSource (Default: false)&lt;/br&gt;\r\n      &lt;br&gt;User property: maven.source.skip&lt;/br&gt;\r\nA flag used to disable the source procedure. &lt;br&gt;This is primarily intended\r\n      for usage from the command line to occasionally adjust the build.\r\n\r\n\r\nFor versions of the &#39;maven-source-plugin&#39; up to 2.4, you should use &#39;-Dsource.skip&#39;.&lt;br&gt;For version 3.0.0 and later, employ &#39;-Dmaven.source.skip&#39; instead.&lt;/br&gt;\r\n","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>If you're encountering difficulties with your pom configuration and need a workaround, you can skip the maven-source-plugin (this will prevent 'artifact-sources.jar' deployment) by utilizing the <strong>'-Dmaven.source.skip'</strong> parameter in your mvn command.</p>\n<p>mvn help:describe -Dplugin=org.apache.maven.plugins:maven-source-plugin</p>\n<blockquote>\n<p>Available parameters:\n<br>skipSource (Default: false)\n<br>User property: maven.source.skip\nA flag used to disable the source procedure. <br>This is primarily intended\nfor usage from the command line to occasionally adjust the build.</p>\n</blockquote>\n<p>For versions of the 'maven-source-plugin' up to 2.4, you should use '-Dsource.skip'.<br>For version 3.0.0 and later, employ '-Dmaven.source.skip' instead.</p>\n"},{"tags":[],"owner":{"account_id":4515229,"reputation":384,"user_id":3670285,"display_name":"user3670285"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1690289152,"creation_date":1690289152,"answer_id":76762846,"question_id":76305897,"body_markdown":"Since `3.3.0` the duplicate check will also fails build when multiple lifecycle phase which are bound to the `jar-no-fork` goal of the sources plugin are given on the command line. For example\r\n\r\n    # mvn package install\r\n    # mvn install deploy\r\n\r\nThe solution is to simply avoid the unnecessary lifecycle phase:\r\n\r\n    # mvn install\r\n    # mvn deploy\r\n\r\n\r\nHowever, upgrading to `maven-sources-plugin` **3.3.0** will break quite a number of build I presume.\r\n\r\n\r\n","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>Since <code>3.3.0</code> the duplicate check will also fails build when multiple lifecycle phase which are bound to the <code>jar-no-fork</code> goal of the sources plugin are given on the command line. For example</p>\n<pre><code># mvn package install\n# mvn install deploy\n</code></pre>\n<p>The solution is to simply avoid the unnecessary lifecycle phase:</p>\n<pre><code># mvn install\n# mvn deploy\n</code></pre>\n<p>However, upgrading to <code>maven-sources-plugin</code> <strong>3.3.0</strong> will break quite a number of build I presume.</p>\n"}],"owner":{"account_id":25686844,"reputation":189,"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3997,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"answer_count":4,"score":11,"last_activity_date":1690289152,"creation_date":1684756380,"question_id":76305897,"body_markdown":"I recently upgraded the maven-source-plugin version in my project from 3.2.1 to 3.3.0 and now I am encountering the following error during the build process:\r\n\r\n&gt; Failed to execute goal org.apache.maven.plugins:maven-source-plugin:3.3.0:jar (attach-sources) on project xxx: Presumably you have configured maven-source-plugn to execute twice times in your build. You have to configure a classifier for at least on of them. -&gt; [Help 1] \r\n\r\nIt seems that this error is related to the fact that the maven-source-plugin has changed its behavior in version 3.3.0 to prevent the attach-sources goal from being executed multiple times during the build. However, I can&#39;t find any doc or release note related to this feature that may cause this incompatibility problem.\r\n\r\nI want to know where I can find the official documentation and what the purpose of this new feature is? Thanks~","title":"Maven build fails after upgrading to maven-source-plugin from 3.2.1 to 3.3.0","body":"<p>I recently upgraded the maven-source-plugin version in my project from 3.2.1 to 3.3.0 and now I am encountering the following error during the build process:</p>\n<blockquote>\n<p>Failed to execute goal org.apache.maven.plugins:maven-source-plugin:3.3.0:jar (attach-sources) on project xxx: Presumably you have configured maven-source-plugn to execute twice times in your build. You have to configure a classifier for at least on of them. -&gt; [Help 1]</p>\n</blockquote>\n<p>It seems that this error is related to the fact that the maven-source-plugin has changed its behavior in version 3.3.0 to prevent the attach-sources goal from being executed multiple times during the build. However, I can't find any doc or release note related to this feature that may cause this incompatibility problem.</p>\n<p>I want to know where I can find the official documentation and what the purpose of this new feature is? Thanks~</p>\n"},{"tags":["java","android","kotlin","android-studio"],"comments":[{"owner":{"account_id":13654747,"reputation":38532,"user_id":9851608,"display_name":"Zain"},"score":0,"creation_date":1690292318,"post_id":76762833,"comment_id":135330813,"body_markdown":"Is that on the emulator? or do you feel that on real devices?","body":"Is that on the emulator? or do you feel that on real devices?"},{"owner":{"account_id":21165874,"reputation":681,"user_id":16342700,"display_name":"Abhishek Vashishtha_IBS"},"score":0,"creation_date":1690352023,"post_id":76762833,"comment_id":135339445,"body_markdown":"yes, I tested on the real device this happened when I used TextWatcher.","body":"yes, I tested on the real device this happened when I used TextWatcher."}],"owner":{"account_id":21165874,"reputation":681,"user_id":16342700,"display_name":"Abhishek Vashishtha_IBS"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690289038,"creation_date":1690289038,"question_id":76762833,"body_markdown":"I mentioned my bottom sheet edit text code and image please help me! I do not understand what&#39;s going wrong with my code!\r\n\r\nSoftkeypad not working but visible with black light shadow\r\n\r\nMY XML File\r\n\r\n``` \r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;\r\n    android:orientation=&quot;vertical&quot;\r\n    tools:context=&quot;.view.dashboard.home.FullPageBottomSheetFragment&quot;&gt;\r\n\r\n    &lt;LinearLayout\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        android:layout_margin=&quot;20dp&quot;\r\n        android:gravity=&quot;center_vertical&quot;\r\n        android:orientation=&quot;horizontal&quot;&gt;\r\n        &lt;EditText\r\n            android:id=&quot;@+id/textSearch&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:layout_weight=&quot;1&quot;\r\n            android:background=&quot;@drawable/black_border&quot;\r\n            android:gravity=&quot;top|start&quot;\r\n            android:focusable=&quot;true&quot;\r\n            android:hint=&quot;@string/search_friends&quot;\r\n            android:inputType=&quot;textMultiLine&quot;\r\n            android:lines=&quot;1&quot;\r\n            android:padding=&quot;10dp&quot;\r\n            android:scrollbars=&quot;vertical&quot;\r\n            android:textColor=&quot;@android:color/black&quot;\r\n            android:textSize=&quot;14sp&quot; /&gt;\r\n        &lt;ImageView\r\n            android:layout_width=&quot;35dp&quot;\r\n            android:layout_height=&quot;35dp&quot;\r\n            android:layout_marginStart=&quot;10dp&quot;\r\n            android:src=&quot;@drawable/search_icon&quot;/&gt;\r\n    &lt;/LinearLayout&gt;\r\n\r\n    &lt;androidx.recyclerview.widget.RecyclerView\r\n        android:id=&quot;@+id/recyclerViewFriends&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;700dp&quot; /&gt;\r\n\r\n&lt;/LinearLayout&gt;\r\n ```\r\n\r\nMy Fragment Code\r\n``` \r\npublic class FullPageBottomSheetFragment extends BottomSheetDialogFragment/* implements TextWatcher*/ {\r\n    private FragmentFullPageBottomSheetBinding binding;\r\n    private RecyclerView recyclerViewFriends; // Add this line \r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        binding = FragmentFullPageBottomSheetBinding.inflate(inflater, container, false);\r\n        \r\n\r\n        // Request focus to the EditText to show the soft keypad\r\n        binding.textSearch.setFocusableInTouchMode(true);\r\n        binding.textSearch.requestFocus();\r\n//        binding.textSearch.addTextChangedListener(this);\r\n\r\n        return binding.getRoot();\r\n    }\r\n}\r\n ```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/r0FJX.jpg\r\n\r\nThis type of error i seen first time in my carrer please help me for fix my code.","title":"In BottomSheetFragment When i clicked on EditText field then show disabled Softkeypad In android Java","body":"<p>I mentioned my bottom sheet edit text code and image please help me! I do not understand what's going wrong with my code!</p>\n<p>Softkeypad not working but visible with black light shadow</p>\n<p>MY XML File</p>\n<pre><code>&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.view.dashboard.home.FullPageBottomSheetFragment&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;20dp&quot;\n        android:gravity=&quot;center_vertical&quot;\n        android:orientation=&quot;horizontal&quot;&gt;\n        &lt;EditText\n            android:id=&quot;@+id/textSearch&quot;\n            android:layout_width=&quot;wrap_content&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_weight=&quot;1&quot;\n            android:background=&quot;@drawable/black_border&quot;\n            android:gravity=&quot;top|start&quot;\n            android:focusable=&quot;true&quot;\n            android:hint=&quot;@string/search_friends&quot;\n            android:inputType=&quot;textMultiLine&quot;\n            android:lines=&quot;1&quot;\n            android:padding=&quot;10dp&quot;\n            android:scrollbars=&quot;vertical&quot;\n            android:textColor=&quot;@android:color/black&quot;\n            android:textSize=&quot;14sp&quot; /&gt;\n        &lt;ImageView\n            android:layout_width=&quot;35dp&quot;\n            android:layout_height=&quot;35dp&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:src=&quot;@drawable/search_icon&quot;/&gt;\n    &lt;/LinearLayout&gt;\n\n    &lt;androidx.recyclerview.widget.RecyclerView\n        android:id=&quot;@+id/recyclerViewFriends&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;700dp&quot; /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>My Fragment Code</p>\n<pre><code>public class FullPageBottomSheetFragment extends BottomSheetDialogFragment/* implements TextWatcher*/ {\n    private FragmentFullPageBottomSheetBinding binding;\n    private RecyclerView recyclerViewFriends; // Add this line \n\n    @Nullable\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\n        binding = FragmentFullPageBottomSheetBinding.inflate(inflater, container, false);\n        \n\n        // Request focus to the EditText to show the soft keypad\n        binding.textSearch.setFocusableInTouchMode(true);\n        binding.textSearch.requestFocus();\n//        binding.textSearch.addTextChangedListener(this);\n\n        return binding.getRoot();\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/r0FJX.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/r0FJX.jpg\" alt=\"enter image description here\" /></a></p>\n<p>This type of error i seen first time in my carrer please help me for fix my code.</p>\n"},{"tags":["java","eclipse","swt","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690269643,"post_id":76759969,"comment_id":135325797,"body_markdown":"Looks like that list is shown by `org.eclipse.e4.ui.internal.workbench.renderers.swt.BasicPartList` which doesn&#39;t seem to have a simple way to change the font. For an RCP you could perhaps use a custom `StackRenderer` extending the standard one and override `showAvailableItems`","body":"Looks like that list is shown by <code>org.eclipse.e4.ui.internal.workbench.renderers.swt.BasicPart&zwnj;&#8203;List</code> which doesn&#39;t seem to have a simple way to change the font. For an RCP you could perhaps use a custom <code>StackRenderer</code> extending the standard one and override <code>showAvailableItems</code>"},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690277816,"post_id":76759969,"comment_id":135327568,"body_markdown":"@greg-449 i tried overriding showAvailableItems but from there I am still not able to access the font size. How can i do that ?","body":"@greg-449 i tried overriding showAvailableItems but from there I am still not able to access the font size. How can i do that ?"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690278459,"post_id":76759969,"comment_id":135327693,"body_markdown":"You use CSS classes and ids to specify the font of controls. You can use something like `StyledCellLabelProvider` in a table to deal with bold etc.","body":"You use CSS classes and ids to specify the font of controls. You can use something like <code>StyledCellLabelProvider</code> in a table to deal with bold etc."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690280469,"post_id":76759969,"comment_id":135328125,"body_markdown":"@greg-449 what to do with StyledCellLabelProvider?? i have tried with css as well but I am not able to figure out which table it is and what changes should i make","body":"@greg-449 what to do with StyledCellLabelProvider?? i have tried with css as well but I am not able to figure out which table it is and what changes should i make"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690281756,"post_id":76759969,"comment_id":135328342,"body_markdown":"You are going to have to write a replacement for BasicPartList and use all that stuff in the replacement","body":"You are going to have to write a replacement for BasicPartList and use all that stuff in the replacement"},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690283207,"post_id":76759969,"comment_id":135328635,"body_markdown":"@greg-449 which funtion of BasicPartList should i override to change the font size","body":"@greg-449 which funtion of BasicPartList should i override to change the font size"},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690285203,"post_id":76759969,"comment_id":135329049,"body_markdown":"No idea, study the source.","body":"No idea, study the source."},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690354179,"post_id":76759969,"comment_id":135339846,"body_markdown":"@greg-449 none of the functions of basicPartList is helping with the font size","body":"@greg-449 none of the functions of basicPartList is helping with the font size"}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690288882,"creation_date":1690266503,"question_id":76759969,"body_markdown":"![Image for your reference](https://i.stack.imgur.com/vMiXH.png)\r\n\r\nHow can I change the font size of this overflowed tabs drop down list present in eclipse ide.\r\nList is marked in the image.\r\n\r\nI want to change the font size of this drop-down list.\r\nI tried using PartImpl and stackRenderer files, but not able to find any approach.","title":"How to change font size for overflowed tabs drop down list of Eclipse IDE","body":"<p><img src=\"https://i.stack.imgur.com/vMiXH.png\" alt=\"Image for your reference\" /></p>\n<p>How can I change the font size of this overflowed tabs drop down list present in eclipse ide.\nList is marked in the image.</p>\n<p>I want to change the font size of this drop-down list.\nI tried using PartImpl and stackRenderer files, but not able to find any approach.</p>\n"},{"tags":["java","spring","spring-boot","gradle","build.gradle"],"comments":[{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672982703,"post_id":75027108,"comment_id":132400319,"body_markdown":"Spring Boot 3 need Java 17,  ( https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0 ) , `Upgrade to Java 17`","body":"Spring Boot 3 need Java 17,  ( <a href=\"https://spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0\" rel=\"nofollow noreferrer\">spring.io/blog/2022/05/24/preparing-for-spring-boot-3-0</a> ) , <code>Upgrade to Java 17</code>"},{"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"score":0,"creation_date":1672983630,"post_id":75027108,"comment_id":132400450,"body_markdown":"Yes, I know that... The project uses Java 11 and that&#39;s why I have springBootPluginVersion = &#39;2.7.6&#39;  in the build file.","body":"Yes, I know that... The project uses Java 11 and that&#39;s why I have springBootPluginVersion = &#39;2.7.6&#39;  in the build file."},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":0,"creation_date":1672984817,"post_id":75027108,"comment_id":132400643,"body_markdown":"Your Error Message is :`/repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!`","body":"Your Error Message is :<code>&#47;repository&#47;org&#47;springframework&#47;boot&#47;spring-boot&#47;3.0.1&#47;spri&zwnj;&#8203;ng-boot-3.0.1.jar!</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":2,"creation_date":1672984896,"post_id":75027108,"comment_id":132400652,"body_markdown":"Try `gradle clean`","body":"Try <code>gradle clean</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672985186,"post_id":75027108,"comment_id":132400693,"body_markdown":"In IntelliJ, Gradle Tab, select your project , popmenu `Reload Gradle Project`","body":"In IntelliJ, Gradle Tab, select your project , popmenu <code>Reload Gradle Project</code>"},{"owner":{"account_id":26698569,"reputation":875,"user_id":20306007,"display_name":"life888888"},"score":1,"creation_date":1672985605,"post_id":75027108,"comment_id":132400764,"body_markdown":"In IntelliJ, Gradle Tab, select your project , popup menu `Analyze Dependencies`, check your  Dependencies , spring boot version","body":"In IntelliJ, Gradle Tab, select your project , popup menu <code>Analyze Dependencies</code>, check your  Dependencies , spring boot version"},{"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"score":0,"creation_date":1673033930,"post_id":75027108,"comment_id":132414441,"body_markdown":"springboot plugin version (like other plugins) cannot be set from properties inside the `build.gradle` file AFAIK. can you share your build script section where you actually apply the springboot plugin ?  something like ` plugins {   id  &quot;org.springframework.boot&quot; version &quot;??????&quot; }","body":"springboot plugin version (like other plugins) cannot be set from properties inside the <code>build.gradle</code> file AFAIK. can you share your build script section where you actually apply the springboot plugin ?  something like ` plugins {   id  &quot;org.springframework.boot&quot; version &quot;??????&quot; }"},{"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"score":0,"creation_date":1673218465,"post_id":75027108,"comment_id":132443190,"body_markdown":"I have tried &#39;gradle clean&#39;, reloading the project, and analyzing dependencies many times. At some point. one of them worked and I dont get that error anymore .. Thank you @life888888","body":"I have tried &#39;gradle clean&#39;, reloading the project, and analyzing dependencies many times. At some point. one of them worked and I dont get that error anymore .. Thank you @life888888"}],"answers":[{"tags":[],"owner":{"account_id":12819605,"reputation":21,"user_id":9275036,"display_name":"Sujith Jeewantha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690288398,"creation_date":1690288398,"answer_id":76762747,"question_id":75027108,"body_markdown":"change the version as below\r\n\r\n    &lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;","title":"Java: cannot access org.springframework.boot.SpringApplication","body":"<p>change the version as below</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.2&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n</code></pre>\n"}],"owner":{"account_id":11623400,"reputation":503,"user_id":8513968,"accept_rate":83,"display_name":"ljs"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":963,"favorite_count":0,"down_vote_count":2,"up_vote_count":3,"answer_count":1,"score":1,"last_activity_date":1690288398,"creation_date":1672981389,"question_id":75027108,"body_markdown":"I am getting this error when I try to start the Spring Boot Application:\r\n\r\n**java: cannot access org.springframework.boot.SpringApplication   bad class file: /repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!/org/springframework/boot/SpringApplication.class**\r\n*class file has wrong version 61.0, should be 55.0* \r\n*Please remove or make sure it appears in the correct subdirectory of the classpath.*\r\n\r\nI had a look at the below SO question and it looks like this error happens when the Spring Boot version is 3.0.1. But I dont have that version mentioned in the build.gradle file.\r\n\r\nhttps://stackoverflow.com/questions/73679679/java-cannot-access-org-springframework-boot-springapplication-bad-class-file\r\n\r\nhere is the build.gradle file portion:\r\n\r\n        springCloudVersion = &#39;2021.0.3&#39;\r\n        springBootPluginVersion = &#39;2.7.6&#39;\r\n        sonarQubePluginVersion = &#39;3.3&#39;\r\n        gatlingPluginVersion = &#39;3.8.4&#39;\r\n        nebulaPublishingPluginVersion = &#39;18.4.0&#39;\r\n        nebulaReleasePluginVersion = &#39;16.0.0&#39;\r\n        jasyptSpringBootStarterVersion = &#39;3.0.4&#39;\r\n\r\nUsing Java 11.\r\n\r\nI can also see that every time I build the project in IntelliJ, a spring boot 3.0.1 jar and its folder are created under the repository mentioned above ( even if I delete it). I can&#39;t see where is that version coming from. Any pointers will be greatly appreciated.\r\n","title":"Java: cannot access org.springframework.boot.SpringApplication","body":"<p>I am getting this error when I try to start the Spring Boot Application:</p>\n<p><strong>java: cannot access org.springframework.boot.SpringApplication   bad class file: /repository/org/springframework/boot/spring-boot/3.0.1/spring-boot-3.0.1.jar!/org/springframework/boot/SpringApplication.class</strong>\n<em>class file has wrong version 61.0, should be 55.0</em>\n<em>Please remove or make sure it appears in the correct subdirectory of the classpath.</em></p>\n<p>I had a look at the below SO question and it looks like this error happens when the Spring Boot version is 3.0.1. But I dont have that version mentioned in the build.gradle file.</p>\n<p><a href=\"https://stackoverflow.com/questions/73679679/java-cannot-access-org-springframework-boot-springapplication-bad-class-file\">java: cannot access org.springframework.boot.SpringApplication bad class file</a></p>\n<p>here is the build.gradle file portion:</p>\n<pre><code>    springCloudVersion = '2021.0.3'\n    springBootPluginVersion = '2.7.6'\n    sonarQubePluginVersion = '3.3'\n    gatlingPluginVersion = '3.8.4'\n    nebulaPublishingPluginVersion = '18.4.0'\n    nebulaReleasePluginVersion = '16.0.0'\n    jasyptSpringBootStarterVersion = '3.0.4'\n</code></pre>\n<p>Using Java 11.</p>\n<p>I can also see that every time I build the project in IntelliJ, a spring boot 3.0.1 jar and its folder are created under the repository mentioned above ( even if I delete it). I can't see where is that version coming from. Any pointers will be greatly appreciated.</p>\n"},{"tags":["java","android","google-cloud-platform","google-drive-api"],"comments":[{"owner":{"account_id":2122531,"reputation":363,"user_id":2425668,"display_name":"Radiance Wei Qi Ong"},"score":0,"creation_date":1690251662,"post_id":76757498,"comment_id":135323906,"body_markdown":"1. Please show the code that you have tried (see https://stackoverflow.com/help/minimal-reproducible-example) 2. What you are expecting to happen if the code is right 3. What you are actually getting (show the error output as much as possible)","body":"1. Please show the code that you have tried (see <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>) 2. What you are expecting to happen if the code is right 3. What you are actually getting (show the error output as much as possible)"},{"owner":{"account_id":2803423,"reputation":1,"user_id":2411193,"display_name":"Edemir Santos de Paula"},"score":0,"creation_date":1690288302,"post_id":76757498,"comment_id":135329735,"body_markdown":"@RadianceWeiQiOng added my mainActivity code do the question. I only need to show user file list. After I get the data I will be able to deal with showing wherever I want. My problem is all auth, api and oauth.","body":"@RadianceWeiQiOng added my mainActivity code do the question. I only need to show user file list. After I get the data I will be able to deal with showing wherever I want. My problem is all auth, api and oauth."},{"owner":{"account_id":2122531,"reputation":363,"user_id":2425668,"display_name":"Radiance Wei Qi Ong"},"score":0,"creation_date":1690336630,"post_id":76757498,"comment_id":135338019,"body_markdown":"You should add the full stack trace (with the line numbers) so that we can tell where the problem originated. Anyway it is likely that you are making network calls on the main thread. You should do it in another thread using ExecutorService or similar (https://developer.android.com/reference/java/util/concurrent/ExecutorService). You can search android.os.NetworkOnMainThreadException for more info (but note that old answers would recommend old way of using another thread e.g. AsyncTask)","body":"You should add the full stack trace (with the line numbers) so that we can tell where the problem originated. Anyway it is likely that you are making network calls on the main thread. You should do it in another thread using ExecutorService or similar (<a href=\"https://developer.android.com/reference/java/util/concurrent/ExecutorService\" rel=\"nofollow noreferrer\">developer.android.com/reference/java/util/concurrent/&hellip;</a>). You can search android.os.NetworkOnMainThreadException for more info (but note that old answers would recommend old way of using another thread e.g. AsyncTask)"}],"owner":{"account_id":2803423,"reputation":1,"user_id":2411193,"display_name":"Edemir Santos de Paula"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690288253,"creation_date":1690226801,"question_id":76757498,"body_markdown":"I&#39;m having trouble fetching the user&#39;s Google Drive files to display them in my Android application. I&#39;ve been trying for about 5 days now, and I&#39;ve read a lot of documentation before asking for help here, but I just can&#39;t figure out how to get the authentication to fetch user data from Drive.\r\n\r\nI&#39;ve tried various methods, one of which involved creating an application on Google Cloud, enabling the Google Drive API, generating the credentials.json file in OAuth, and adding it to my project, but it didn&#39;t work.\r\n\r\nI also attempted the quickstart available on the website https://developers.google.com/drive/api/quickstart/java?hl=pt-br, but it doesn&#39;t seem to work for Android applications.\r\n\r\nI followed the documentation provided on this page without success: https://github.com/googleapis/google-auth-library-java\r\n\r\nAccording to the documentation above, it should be as simple as:\r\n\r\n```\r\nGoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(&quot;/path/to/credentials.json&quot;));\r\ncredentials.refreshIfExpired();\r\nAccessToken token = credentials.getAccessToken();\r\n```\r\n\r\nAlso tried this example without success: https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\r\n\r\nHowever, I&#39;m getting numerous errors that I honestly can&#39;t understand.\r\n\r\nDo I need to have a backend server to make these requests?\r\n\r\nMy application is already connecting to Firebase with Google authentication; all I want is to fetch the list of files from the Drive.\r\n\r\nSorry for being such a noob but I&#39;m just starting on android development.\r\n\r\nI appreciate the help.\r\n\r\nI also attempted the quickstart available on the website https://developers.google.com/drive/api/quickstart/java?hl=pt-br, but it doesn&#39;t seem to work for Android applications.\r\n\r\nI followed the documentation provided on this page without success: https://github.com/googleapis/google-auth-library-java\r\n\r\nAlso tried this example without success: https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\r\n\r\n\r\nI need my android app, after the user logged in, list his google drive files.\r\n\r\nHere&#39;s my mainActivity.java, only Firebase login is working.\r\n\r\n    package com.example.app;\r\n    \r\n    import static java.lang.System.in;\r\n    \r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.content.pm.PackageManager;\r\n    import android.os.Build;\r\n    import android.os.Bundle;\r\n    import android.provider.MediaStore;\r\n    import android.util.Log;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    import androidx.annotation.Nullable;\r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    import androidx.core.app.ActivityCompat;\r\n    \r\n    \r\n    import com.google.android.gms.common.api.internal.GoogleApiManager;\r\n    import com.google.api.client.auth.oauth2.Credential;\r\n    import com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\r\n    import com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\r\n    import com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\r\n    import com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\r\n    import com.google.api.client.http.javanet.NetHttpTransport;\r\n    import com.google.api.client.json.JsonFactory;\r\n    import com.google.api.client.json.gson.GsonFactory;\r\n    import com.google.api.client.util.store.FileDataStoreFactory;\r\n    import com.google.auth.oauth2.GoogleCredentials;\r\n    \r\n    import com.google.api.services.sheets.v4.Sheets;\r\n    import com.google.api.services.sheets.v4.SheetsScopes;\r\n    import com.google.api.services.sheets.v4.model.ValueRange;\r\n    \r\n    import java.io.File;\r\n    import java.io.FileNotFoundException;\r\n    import java.io.IOException;\r\n    import java.io.InputStream;\r\n    import java.io.InputStreamReader;\r\n    import java.security.GeneralSecurityException;\r\n    import java.util.Collections;\r\n    import java.util.List;\r\n    \r\n    /**\r\n     * Nothing actually happens here.  This is only here so I know it installed on the phone for\r\n     * to test with.  Normally there won&#39;t be one at all.\r\n     */\r\n    \r\n    public class mainActivity extends AppCompatActivity {\r\n    \r\n        private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\r\n        private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\r\n        \r\n        private static final String APPLICATION_NAME = &quot;Widget Sheet&quot;;\r\n    \r\n        private static File folder;\r\n    \r\n        private static final List&lt;String&gt; SCOPES =\r\n                Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\r\n    \r\n    \r\n        @Override\r\n        public void onCreate(Bundle savedInstanceState) {\r\n            //Abre a tela de in&#237;cio com as instru&#231;&#245;es\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.inicio);\r\n    \r\n            try {\r\n                  isStoragePermissionGranted();\r\n    \r\n                  folder = getDir(&quot;tokens&quot;, Context.MODE_PRIVATE);\r\n    \r\n                  listFiles();\r\n                  \r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (GeneralSecurityException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n    \r\n            // Iniciar o processo de login com Firebase\r\n            FirebaseLoginHelper.startFirebaseLogin(this);\r\n        }\r\n    \r\n        public static void listFiles() throws IOException, GeneralSecurityException {\r\n            // Build a new authorized API client service.\r\n            final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\r\n            final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\r\n            final String range = &quot;Class Data!A2:E&quot;;\r\n            Sheets service =\r\n                    new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\r\n                            .setApplicationName(APPLICATION_NAME)\r\n                            .build();\r\n            ValueRange response = service.spreadsheets().values()\r\n                    .get(spreadsheetId, range)\r\n                    .execute();\r\n            List&lt;List&lt;Object&gt;&gt; values = response.getValues();\r\n            if (values == null || values.isEmpty()) {\r\n                System.out.println(&quot;No data found.&quot;);\r\n            } else {\r\n                System.out.println(&quot;Name, Major&quot;);\r\n                for (List row : values) {\r\n                    // Print columns A and E, which correspond to indices 0 and 4.\r\n                    System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\r\n                }\r\n            }\r\n        }\r\n    \r\n        public  boolean isStoragePermissionGranted() {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                if (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                        == PackageManager.PERMISSION_GRANTED) {\r\n                    Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\r\n                    return true;\r\n                } else {\r\n                    Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is revoked&quot;);\r\n                    ActivityCompat.requestPermissions(this, new String[]{\r\n                            android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\r\n                    return false;\r\n                }\r\n            }\r\n            else { //permission is automatically granted on sdk&lt;23 upon installation\r\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\r\n                return true;\r\n            }\r\n        }\r\n    \r\n        private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\r\n                throws IOException {\r\n            // Load client secrets.\r\n            InputStream in = mainActivity.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\r\n            if (in == null) {\r\n                throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\r\n            }\r\n            GoogleClientSecrets clientSecrets =\r\n                    GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\r\n    \r\n    \r\n    \r\n            // Build flow and trigger user authorization request.\r\n            GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\r\n                    HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\r\n                    .setDataStoreFactory(new FileDataStoreFactory(folder))\r\n                    .setAccessType(&quot;offline&quot;)\r\n                    .build();\r\n    \r\n            LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\r\n            return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\r\n        }\r\n    \r\n        // Tratar o resultado do login usando Firebase\r\n        @Override\r\n        protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n            super.onActivityResult(requestCode, resultCode, data);\r\n            FirebaseLoginHelper.handleLoginResult(requestCode, resultCode, data);\r\n            \r\n        }\r\n    \r\n        // Tratar a resposta da solicita&#231;&#227;o de permiss&#227;o para o Google Drive\r\n        @Override\r\n        public void onRequestPermissionsResult(int requestCode,\r\n                                               @NonNull String[] permissions,\r\n                                               @NonNull int[] grantResults) {\r\n    \r\n            Log.w(&quot;Drive&quot;,&quot;Solicitado&quot;);\r\n            super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        }\r\n    }\r\n\r\n\r\nError presented: \r\n\r\n&gt; java.lang.RuntimeException: Unable to start activity\r\n&gt; ComponentInfo{com.example.app/com.example.app.mainActivity}:\r\n&gt; android.os.NetworkOnMainThreadException","title":"How to List files from user Google Drive in my android application?","body":"<p>I'm having trouble fetching the user's Google Drive files to display them in my Android application. I've been trying for about 5 days now, and I've read a lot of documentation before asking for help here, but I just can't figure out how to get the authentication to fetch user data from Drive.</p>\n<p>I've tried various methods, one of which involved creating an application on Google Cloud, enabling the Google Drive API, generating the credentials.json file in OAuth, and adding it to my project, but it didn't work.</p>\n<p>I also attempted the quickstart available on the website <a href=\"https://developers.google.com/drive/api/quickstart/java?hl=pt-br\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/quickstart/java?hl=pt-br</a>, but it doesn't seem to work for Android applications.</p>\n<p>I followed the documentation provided on this page without success: <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-auth-library-java</a></p>\n<p>According to the documentation above, it should be as simple as:</p>\n<pre><code>GoogleCredentials credentials = GoogleCredentials.fromStream(new FileInputStream(&quot;/path/to/credentials.json&quot;));\ncredentials.refreshIfExpired();\nAccessToken token = credentials.getAccessToken();\n</code></pre>\n<p>Also tried this example without success: <a href=\"https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\" rel=\"nofollow noreferrer\">https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation</a></p>\n<p>However, I'm getting numerous errors that I honestly can't understand.</p>\n<p>Do I need to have a backend server to make these requests?</p>\n<p>My application is already connecting to Firebase with Google authentication; all I want is to fetch the list of files from the Drive.</p>\n<p>Sorry for being such a noob but I'm just starting on android development.</p>\n<p>I appreciate the help.</p>\n<p>I also attempted the quickstart available on the website <a href=\"https://developers.google.com/drive/api/quickstart/java?hl=pt-br\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/api/quickstart/java?hl=pt-br</a>, but it doesn't seem to work for Android applications.</p>\n<p>I followed the documentation provided on this page without success: <a href=\"https://github.com/googleapis/google-auth-library-java\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-auth-library-java</a></p>\n<p>Also tried this example without success: <a href=\"https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation\" rel=\"nofollow noreferrer\">https://github.com/googleworkspace/android-samples/tree/master/drive/deprecation</a></p>\n<p>I need my android app, after the user logged in, list his google drive files.</p>\n<p>Here's my mainActivity.java, only Firebase login is working.</p>\n<pre><code>package com.example.app;\n\nimport static java.lang.System.in;\n\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.provider.MediaStore;\nimport android.util.Log;\n\nimport androidx.annotation.NonNull;\nimport androidx.annotation.Nullable;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.core.app.ActivityCompat;\n\n\nimport com.google.android.gms.common.api.internal.GoogleApiManager;\nimport com.google.api.client.auth.oauth2.Credential;\nimport com.google.api.client.extensions.java6.auth.oauth2.AuthorizationCodeInstalledApp;\nimport com.google.api.client.extensions.jetty.auth.oauth2.LocalServerReceiver;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleAuthorizationCodeFlow;\nimport com.google.api.client.googleapis.auth.oauth2.GoogleClientSecrets;\nimport com.google.api.client.googleapis.javanet.GoogleNetHttpTransport;\nimport com.google.api.client.http.javanet.NetHttpTransport;\nimport com.google.api.client.json.JsonFactory;\nimport com.google.api.client.json.gson.GsonFactory;\nimport com.google.api.client.util.store.FileDataStoreFactory;\nimport com.google.auth.oauth2.GoogleCredentials;\n\nimport com.google.api.services.sheets.v4.Sheets;\nimport com.google.api.services.sheets.v4.SheetsScopes;\nimport com.google.api.services.sheets.v4.model.ValueRange;\n\nimport java.io.File;\nimport java.io.FileNotFoundException;\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\nimport java.security.GeneralSecurityException;\nimport java.util.Collections;\nimport java.util.List;\n\n/**\n * Nothing actually happens here.  This is only here so I know it installed on the phone for\n * to test with.  Normally there won't be one at all.\n */\n\npublic class mainActivity extends AppCompatActivity {\n\n    private static final JsonFactory JSON_FACTORY = GsonFactory.getDefaultInstance();\n    private static final String CREDENTIALS_FILE_PATH = &quot;/credentials.json&quot;;\n    \n    private static final String APPLICATION_NAME = &quot;Widget Sheet&quot;;\n\n    private static File folder;\n\n    private static final List&lt;String&gt; SCOPES =\n            Collections.singletonList(SheetsScopes.SPREADSHEETS_READONLY);\n\n\n    @Override\n    public void onCreate(Bundle savedInstanceState) {\n        //Abre a tela de início com as instruções\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.inicio);\n\n        try {\n              isStoragePermissionGranted();\n\n              folder = getDir(&quot;tokens&quot;, Context.MODE_PRIVATE);\n\n              listFiles();\n              \n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (GeneralSecurityException e) {\n            throw new RuntimeException(e);\n        }\n\n        // Iniciar o processo de login com Firebase\n        FirebaseLoginHelper.startFirebaseLogin(this);\n    }\n\n    public static void listFiles() throws IOException, GeneralSecurityException {\n        // Build a new authorized API client service.\n        final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();\n        final String spreadsheetId = &quot;1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms&quot;;\n        final String range = &quot;Class Data!A2:E&quot;;\n        Sheets service =\n                new Sheets.Builder(HTTP_TRANSPORT, JSON_FACTORY, getCredentials(HTTP_TRANSPORT))\n                        .setApplicationName(APPLICATION_NAME)\n                        .build();\n        ValueRange response = service.spreadsheets().values()\n                .get(spreadsheetId, range)\n                .execute();\n        List&lt;List&lt;Object&gt;&gt; values = response.getValues();\n        if (values == null || values.isEmpty()) {\n            System.out.println(&quot;No data found.&quot;);\n        } else {\n            System.out.println(&quot;Name, Major&quot;);\n            for (List row : values) {\n                // Print columns A and E, which correspond to indices 0 and 4.\n                System.out.printf(&quot;%s, %s\\n&quot;, row.get(0), row.get(4));\n            }\n        }\n    }\n\n    public  boolean isStoragePermissionGranted() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if (checkSelfPermission(android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED) {\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\n                return true;\n            } else {\n                Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is revoked&quot;);\n                ActivityCompat.requestPermissions(this, new String[]{\n                        android.Manifest.permission.WRITE_EXTERNAL_STORAGE}, 1);\n                return false;\n            }\n        }\n        else { //permission is automatically granted on sdk&lt;23 upon installation\n            Log.println(Log.DEBUG, &quot;DEB&quot;,&quot;Permission is granted&quot;);\n            return true;\n        }\n    }\n\n    private static Credential getCredentials(final NetHttpTransport HTTP_TRANSPORT)\n            throws IOException {\n        // Load client secrets.\n        InputStream in = mainActivity.class.getResourceAsStream(CREDENTIALS_FILE_PATH);\n        if (in == null) {\n            throw new FileNotFoundException(&quot;Resource not found: &quot; + CREDENTIALS_FILE_PATH);\n        }\n        GoogleClientSecrets clientSecrets =\n                GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));\n\n\n\n        // Build flow and trigger user authorization request.\n        GoogleAuthorizationCodeFlow flow = new GoogleAuthorizationCodeFlow.Builder(\n                HTTP_TRANSPORT, JSON_FACTORY, clientSecrets, SCOPES)\n                .setDataStoreFactory(new FileDataStoreFactory(folder))\n                .setAccessType(&quot;offline&quot;)\n                .build();\n\n        LocalServerReceiver receiver = new LocalServerReceiver.Builder().setPort(8888).build();\n        return new AuthorizationCodeInstalledApp(flow, receiver).authorize(&quot;user&quot;);\n    }\n\n    // Tratar o resultado do login usando Firebase\n    @Override\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n        FirebaseLoginHelper.handleLoginResult(requestCode, resultCode, data);\n        \n    }\n\n    // Tratar a resposta da solicitação de permissão para o Google Drive\n    @Override\n    public void onRequestPermissionsResult(int requestCode,\n                                           @NonNull String[] permissions,\n                                           @NonNull int[] grantResults) {\n\n        Log.w(&quot;Drive&quot;,&quot;Solicitado&quot;);\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n    }\n}\n</code></pre>\n<p>Error presented:</p>\n<blockquote>\n<p>java.lang.RuntimeException: Unable to start activity\nComponentInfo{com.example.app/com.example.app.mainActivity}:\nandroid.os.NetworkOnMainThreadException</p>\n</blockquote>\n"},{"tags":["java","eclipse","egit","jgit","vcs-checkout"],"comments":[{"owner":{"account_id":74748,"reputation":3592,"user_id":214626,"accept_rate":82,"display_name":"panzerschreck"},"score":0,"creation_date":1410241006,"post_id":25737269,"comment_id":40240938,"body_markdown":"Conflict occurs when your changes cannot be merged with what is coming in because the changes are essentially on the same line. You have two options either to revert your change or manually merge the changes and commit it later.","body":"Conflict occurs when your changes cannot be merged with what is coming in because the changes are essentially on the same line. You have two options either to revert your change or manually merge the changes and commit it later."},{"owner":{"account_id":291009,"reputation":9437,"user_id":592898,"accept_rate":60,"display_name":"Frederic Close"},"score":0,"creation_date":1410242167,"post_id":25737269,"comment_id":40241330,"body_markdown":"http://wiki.eclipse.org/EGit/User_Guide : have a look at section &#39;Resolving a merge conflict&#39;","body":"<a href=\"http://wiki.eclipse.org/EGit/User_Guide\" rel=\"nofollow noreferrer\">wiki.eclipse.org/EGit/User_Guide</a> : have a look at section &#39;Resolving a merge conflict&#39;"}],"answers":[{"comments":[{"owner":{"account_id":1789513,"reputation":3781,"user_id":1630244,"accept_rate":55,"display_name":"chrisinmtown"},"score":0,"creation_date":1435333684,"post_id":25745409,"comment_id":50173146,"body_markdown":"Doing merge manually sounds right, but the EGit doc states the conflicted file should have &quot;&gt;&gt;&gt;&gt;&quot;, &quot;=====&quot; and &quot;&lt;&lt;&lt;&lt;&quot; markers in it showing where the merge failed.  I have hit this dialog when pulling, a single file is in conflict, but I find no such markers in the file.  Same problem or something slightly different?","body":"Doing merge manually sounds right, but the EGit doc states the conflicted file should have &quot;&gt;&gt;&gt;&gt;&quot;, &quot;=====&quot; and &quot;&lt;&lt;&lt;&lt;&quot; markers in it showing where the merge failed.  I have hit this dialog when pulling, a single file is in conflict, but I find no such markers in the file.  Same problem or something slightly different?"},{"owner":{"account_id":910393,"reputation":1619,"user_id":1384748,"display_name":"Breand&#225;n Dalton"},"score":0,"creation_date":1435573962,"post_id":25745409,"comment_id":50240246,"body_markdown":"That is puzzling. Perhaps the conflict is due to different end-of-line markers, or character encodings? I&#39;m guessing wildly here. All I can recommend is that you get the two copies (yours and the version in the repository) and go through them both line by line to see what the differences are.","body":"That is puzzling. Perhaps the conflict is due to different end-of-line markers, or character encodings? I&#39;m guessing wildly here. All I can recommend is that you get the two copies (yours and the version in the repository) and go through them both line by line to see what the differences are."}],"tags":[],"owner":{"account_id":910393,"reputation":1619,"user_id":1384748,"display_name":"Breand&#225;n Dalton"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1601504966,"creation_date":1410267862,"answer_id":25745409,"question_id":25737269,"body_markdown":"You must [manually resolve the conflict](http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution) by incorporating your partner&#39;s change into your code and committing the manually merged file.\r\n\r\nAlternatively, if your changes aren&#39;t too complex, you may revert (throw away) your changes to that file, update your code to pick up your partner&#39;s changes, and then redo your work. \r\n\r\n\r\nSee http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>You must <a href=\"http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\" rel=\"nofollow noreferrer\">manually resolve the conflict</a> by incorporating your partner's change into your code and committing the manually merged file.</p>\n<p>Alternatively, if your changes aren't too complex, you may revert (throw away) your changes to that file, update your code to pick up your partner's changes, and then redo your work.</p>\n<p>See <a href=\"http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution\" rel=\"nofollow noreferrer\">http://wiki.eclipse.org/EGit/User_Guide#Manual_conflict_resolution</a></p>\n"},{"comments":[{"owner":{"account_id":7703242,"reputation":2880,"user_id":5835002,"accept_rate":25,"display_name":"SendETHToThisAddress"},"score":0,"creation_date":1629148768,"post_id":31115392,"comment_id":121606000,"body_markdown":"Thanks for helping to diagnose what was, in my case, a horribly undescriptive error message! I looked at my changes and found that a file had been added when I published my app, which resulted in an uncommitted change and so I couldn&#39;t switch to the new branch I just created.","body":"Thanks for helping to diagnose what was, in my case, a horribly undescriptive error message! I looked at my changes and found that a file had been added when I published my app, which resulted in an uncommitted change and so I couldn&#39;t switch to the new branch I just created."}],"tags":[],"owner":{"account_id":1789513,"reputation":3781,"user_id":1630244,"accept_rate":55,"display_name":"chrisinmtown"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1435579911,"creation_date":1435579911,"answer_id":31115392,"question_id":25737269,"body_markdown":"Do you have uncommitted changes in the file that&#39;s in your working copy? Or is your working copy clean? The EGit documentation guides you thru the latter scenario.\r\n\r\nIn my experience, the error dialog posted by @lmray is what EGit shows when a local working copy has uncommitted changes.  EGit wishes to merge in information from the remote but I&#39;m told it will not modify a dirty working copy.  To proceed, you must first commit your changes locally, giving you a fallback point, then request merge again.  The merge should then produce a merged file, hopefully without any conflicts.\r\n\r\nThanks to @B. Dalton for trying to straighten me out - my dirty working copy file had uncommitted changes, and a local git wizard explained things.\r\n\r\nDigression: this is a mental adjustment if you (like me) were used to working with SVN, which would happily pull remote changes into a dirty local working file.  Not saying that was better, just that git works differently. I&#39;m still struggling to convert my SVN-trained intuition over to suitable expectations for Git.","title":"Checkout conflict with files. How do I proceed?","body":"<p>Do you have uncommitted changes in the file that's in your working copy? Or is your working copy clean? The EGit documentation guides you thru the latter scenario.</p>\n\n<p>In my experience, the error dialog posted by @lmray is what EGit shows when a local working copy has uncommitted changes.  EGit wishes to merge in information from the remote but I'm told it will not modify a dirty working copy.  To proceed, you must first commit your changes locally, giving you a fallback point, then request merge again.  The merge should then produce a merged file, hopefully without any conflicts.</p>\n\n<p>Thanks to @B. Dalton for trying to straighten me out - my dirty working copy file had uncommitted changes, and a local git wizard explained things.</p>\n\n<p>Digression: this is a mental adjustment if you (like me) were used to working with SVN, which would happily pull remote changes into a dirty local working file.  Not saying that was better, just that git works differently. I'm still struggling to convert my SVN-trained intuition over to suitable expectations for Git.</p>\n"},{"comments":[{"owner":{"account_id":910393,"reputation":1619,"user_id":1384748,"display_name":"Breand&#225;n Dalton"},"score":1,"creation_date":1601505229,"post_id":36449204,"comment_id":113432989,"body_markdown":"You resolved your conflict by effectively throwing away your changes and accepting the remote changes instead.","body":"You resolved your conflict by effectively throwing away your changes and accepting the remote changes instead."}],"tags":[],"owner":{"account_id":6152006,"reputation":534,"user_id":4796172,"accept_rate":86,"display_name":"Pushkin"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1526912843,"creation_date":1459940558,"answer_id":36449204,"question_id":25737269,"body_markdown":"I faced this issue today and below solution works for me.\r\n\r\n1. Do a git stash. This will consolidate all your local and conflicting changes. \r\n2. Do a git pull now\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>I faced this issue today and below solution works for me.</p>\n\n<ol>\n<li>Do a git stash. This will consolidate all your local and conflicting changes. </li>\n<li>Do a git pull now</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2735009,"reputation":4764,"user_id":2357869,"accept_rate":33,"display_name":"Vijay"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595247238,"creation_date":1595245653,"answer_id":62994728,"question_id":25737269,"body_markdown":"In Eclipse :-\r\n\r\n1) Right click -&gt; click on &#39;add to index&#39;\r\n\r\nAdd conflict file in staged area\r\n\r\n2) Right Click -&gt;click on commit \r\n\r\nAdd conflict file in local repository\r\n\r\n3) Pull\r\n\r\nYou will get all changes (change in remote repository and local repository)\r\n\r\nChanges mentioned as Head(**&lt;&lt;&lt;&lt;&lt;&lt; HEAD**) is your change, Changes mentioned in branch(**&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch**) is other person change, you can update file accordingly. \r\n\r\n4) Right click -&gt;click on add to index\r\n\r\n5) Right click -&gt; commit and push\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>In Eclipse :-</p>\n<ol>\n<li>Right click -&gt; click on 'add to index'</li>\n</ol>\n<p>Add conflict file in staged area</p>\n<ol start=\"2\">\n<li>Right Click -&gt;click on commit</li>\n</ol>\n<p>Add conflict file in local repository</p>\n<ol start=\"3\">\n<li>Pull</li>\n</ol>\n<p>You will get all changes (change in remote repository and local repository)</p>\n<p>Changes mentioned as Head(<strong>&lt;&lt;&lt;&lt;&lt;&lt; HEAD</strong>) is your change, Changes mentioned in branch(<strong>&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch</strong>) is other person change, you can update file accordingly.</p>\n<ol start=\"4\">\n<li><p>Right click -&gt;click on add to index</p>\n</li>\n<li><p>Right click -&gt; commit and push</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13770490,"reputation":107,"user_id":9938083,"display_name":"Sudhir Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287888,"creation_date":1690287888,"answer_id":76762682,"question_id":25737269,"body_markdown":"Follow this steps,\r\n**Step1:**\r\nIf you are using Windows OS, Use gitbash tool .\r\nIf you are using MAC OS, use terminal.\r\n**Step2:** Go to your git project location using \r\n#cd &lt;patch_of_project&gt;\r\n**Step3:** #git stash\r\n**step4:** #git pull\r\n**step5:** #git stash apply \r\n**Step6 :** resolve conflict manually by this ,\r\nChanges mentioned as Head(&lt;&lt;&lt;&lt;&lt;&lt; HEAD) is your change, Changes mentioned in branch(&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch) is other person change, you can update file accordingly.\r\n","title":"Checkout conflict with files. How do I proceed?","body":"<p>Follow this steps,\n<strong>Step1:</strong>\nIf you are using Windows OS, Use gitbash tool .\nIf you are using MAC OS, use terminal.\n<strong>Step2:</strong> Go to your git project location using\n#cd &lt;patch_of_project&gt;\n<strong>Step3:</strong> #git stash\n<strong>step4:</strong> #git pull\n<strong>step5:</strong> #git stash apply\n<strong>Step6 :</strong> resolve conflict manually by this ,\nChanges mentioned as Head(&lt;&lt;&lt;&lt;&lt;&lt; HEAD) is your change, Changes mentioned in branch(&gt;&gt;&gt;&gt;&gt;&gt;&gt; branch) is other person change, you can update file accordingly.</p>\n"}],"owner":{"account_id":1848986,"reputation":22324,"user_id":1675976,"accept_rate":59,"display_name":"CodyBugstein"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59400,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":5,"score":6,"last_activity_date":1690287888,"creation_date":1410240759,"question_id":25737269,"body_markdown":"I just pulled some changes from a remote repository holding my teams project.\r\n\r\nThis is the message I received on pull:\r\n\r\n![Checkout Conflict][1]\r\n\r\n\r\nApparently, one of my partners made changed to the same file as me. \r\n\r\nHow do I proceed from here? The message is very vague. Was there an error? Do I have to undo what I did? Does he have to? \r\n\r\n  [1]: http://i.stack.imgur.com/g8J24.jpg","title":"Checkout conflict with files. How do I proceed?","body":"<p>I just pulled some changes from a remote repository holding my teams project.</p>\n\n<p>This is the message I received on pull:</p>\n\n<p><img src=\"https://i.stack.imgur.com/g8J24.jpg\" alt=\"Checkout Conflict\"></p>\n\n<p>Apparently, one of my partners made changed to the same file as me. </p>\n\n<p>How do I proceed from here? The message is very vague. Was there an error? Do I have to undo what I did? Does he have to? </p>\n"},{"tags":["java","forms","authentication","vaadin","vaadin-flow"],"answers":[{"comments":[{"owner":{"account_id":28083954,"reputation":41,"user_id":21454599,"display_name":"bc_tom"},"score":1,"creation_date":1691062926,"post_id":76762655,"comment_id":135442427,"body_markdown":"We have created a custom View containing our login components but how do we trigger the Vaadin LoginEvent since we do not extend the LoginForm? Can you give us further information about this?","body":"We have created a custom View containing our login components but how do we trigger the Vaadin LoginEvent since we do not extend the LoginForm? Can you give us further information about this?"}],"tags":[],"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287653,"creation_date":1690287653,"answer_id":76762655,"question_id":76754954,"body_markdown":"&gt; public class LoginView extends LoginOverlay \r\n\r\nVaadin does **not** mandate that you need to extend `LoginOverlay` or `LoginForm` in your LoginView. These two components are basic implementations for such view, which can be used to reduce boiler plate when applicable. They are not meant to be applicable in 100% of the cases, but the common ones. You can compose your LoginView anyway you want using more elementary components and you can define it with template using TypeScript or fully compose the view with Java.\r\n","title":"Vaadin Custom Login Form","body":"<blockquote>\n<p>public class LoginView extends LoginOverlay</p>\n</blockquote>\n<p>Vaadin does <strong>not</strong> mandate that you need to extend <code>LoginOverlay</code> or <code>LoginForm</code> in your LoginView. These two components are basic implementations for such view, which can be used to reduce boiler plate when applicable. They are not meant to be applicable in 100% of the cases, but the common ones. You can compose your LoginView anyway you want using more elementary components and you can define it with template using TypeScript or fully compose the view with Java.</p>\n"}],"owner":{"account_id":28083954,"reputation":41,"user_id":21454599,"display_name":"bc_tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690287653,"creation_date":1690205094,"question_id":76754954,"body_markdown":"my colleagues and I have created a UI with Vaadin23 and it also contains the default Vaadin Login Form from the Tutorial/ Vaadin Starter Application:\r\n\r\n    public class LoginView extends LoginOverlay implements BeforeEnterObserver {\r\n\r\n    private final AuthenticatedUser authenticatedUser;\r\n\r\n    public LoginView(AuthenticatedUser authenticatedUser) {\r\n        this.authenticatedUser = authenticatedUser;\r\n        setAction(RouteUtil.getRoutePath(VaadinService.getCurrent().getContext(), getClass()));\r\n        LoginI18n i18n = LoginI18n.createDefault();\r\n        i18n.setHeader(new LoginI18n.Header());\r\n        i18n.setAdditionalInformation(null);\r\n        setI18n(i18n);\r\n        setForgotPasswordButtonVisible(false);\r\n        setOpened(true);\r\n      }\r\n      // ...\r\n    }\r\nSince we require a different way of logging in, we need to use a custom login form.\r\nThe problem is, that we cannot edit the Vaadin standard login form but we&#39;d like to keep the security mechanism for now. We also understand the basic process of the login mechanism. Filling out the form which starts the firing of a LoginEvent within the AbstractLogin class.\r\n\r\nOur login form should contain a *Select* field containing the users, a password field that only uses a NumPad to enter a pin code and a Login Button to submit the form.\r\nHow do we have to configure a custom login form in order to connect to the security functionality?\r\n\r\nPossible Vaadin LoginForm in Typescript (The styling attributes come from copy&amp;pasting and can be ignored). Help for implementing the TypeScript component as well as the connected Java View class is greatly appreciated.\r\n```\r\n    &lt;vaadin-vertical-layout style=&quot;width: 100%; height: 100%;&quot; class=&quot;content&quot;&gt;\r\n\t  &lt;vaadin-vertical-layout theme=&quot;spacing&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;\r\n\t    &lt;vaadin-form-layout id=&quot;login-form&quot;&gt;\r\n\t      &lt;vaadin-select label=&quot;User&quot; id=&quot;username-select&quot;&gt;&lt;/vaadin-select&gt;\r\n\t      &lt;vaadin-password-field label=&quot;Password&quot; id=&quot;password-field&quot;&gt;&lt;/vaadin-password-field&gt;\r\n\t      &lt;vaadin-button theme=&quot;primary error&quot; tabindex=&quot;0&quot; id=&quot;login-button&quot;&gt;\r\n      \t    Login \r\n          &lt;/vaadin-button&gt;\r\n\t    &lt;/vaadin-form-layout&gt;\r\n\t  &lt;/vaadin-vertical-layout&gt;\r\n\t&lt;/vaadin-vertical-layout&gt;\r\n```\r\n\r\nI can also provide additional information if needed.\r\n\r\nThis is the code of the Vaadin Tutorial. \r\n\r\nAuthenticatedUser.class\r\n  ```\r\n  @Component\r\n  public class AuthenticatedUser {\r\n    private final UserRepository userRepository;\r\n\r\n    private final AuthenticationContext authenticationContext;\r\n\r\n    public AuthenticatedUser(AuthenticationContext authenticationContext, UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n        this.authenticationContext = authenticationContext;\r\n    }\r\n\r\n    public Optional&lt;User&gt; get() {\r\n        return authenticationContext.getAuthenticatedUser(UserDetails.class)\r\n                .map(userDetails -&gt; userRepository.findByUsername(userDetails.getUsername()));\r\n    }\r\n\r\n    public void logout() {\r\n        authenticationContext.logout();\r\n    }\r\n\r\n  }\r\n```\r\n\r\nSecurityConfiguration.class\r\n```\r\n@EnableWebSecurity\r\n@Configuration\r\npublic class SecurityConfiguration extends VaadinWebSecurity {\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\r\n        http.authorizeRequests().requestMatchers(new AntPathRequestMatcher(&quot;/images/*.png&quot;)).permitAll();\r\n        super.configure(http);\r\n        setLoginView(http, LoginView.class);\r\n    }\r\n}\r\n```\r\n\r\nUserDetailsServiceImpl.class\r\n```\r\n@Service\r\npublic class UserDetailsServiceImpl implements UserDetailsService {\r\n\r\n    private final UserRepository userRepository;\r\n\r\n    public UserDetailsServiceImpl(UserRepository userRepository) {\r\n        this.userRepository = userRepository;\r\n    }\r\n\r\n    private static List&lt;GrantedAuthority&gt; getAuthorities(User user) {\r\n        return user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\r\n                .collect(Collectors.toList());\r\n\r\n    }\r\n\r\n    @Override\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n        User user = userRepository.findByUsername(username);\r\n        if (user == null) {\r\n            throw new UsernameNotFoundException(&quot;No user present with username: &quot; + username);\r\n        }\r\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getHashedPassword(),\r\n                getAuthorities(user));\r\n    }\r\n\r\n}\r\n```","title":"Vaadin Custom Login Form","body":"<p>my colleagues and I have created a UI with Vaadin23 and it also contains the default Vaadin Login Form from the Tutorial/ Vaadin Starter Application:</p>\n<pre><code>public class LoginView extends LoginOverlay implements BeforeEnterObserver {\n\nprivate final AuthenticatedUser authenticatedUser;\n\npublic LoginView(AuthenticatedUser authenticatedUser) {\n    this.authenticatedUser = authenticatedUser;\n    setAction(RouteUtil.getRoutePath(VaadinService.getCurrent().getContext(), getClass()));\n    LoginI18n i18n = LoginI18n.createDefault();\n    i18n.setHeader(new LoginI18n.Header());\n    i18n.setAdditionalInformation(null);\n    setI18n(i18n);\n    setForgotPasswordButtonVisible(false);\n    setOpened(true);\n  }\n  // ...\n}\n</code></pre>\n<p>Since we require a different way of logging in, we need to use a custom login form.\nThe problem is, that we cannot edit the Vaadin standard login form but we'd like to keep the security mechanism for now. We also understand the basic process of the login mechanism. Filling out the form which starts the firing of a LoginEvent within the AbstractLogin class.</p>\n<p>Our login form should contain a <em>Select</em> field containing the users, a password field that only uses a NumPad to enter a pin code and a Login Button to submit the form.\nHow do we have to configure a custom login form in order to connect to the security functionality?</p>\n<p>Possible Vaadin LoginForm in Typescript (The styling attributes come from copy&amp;pasting and can be ignored). Help for implementing the TypeScript component as well as the connected Java View class is greatly appreciated.</p>\n<pre><code>    &lt;vaadin-vertical-layout style=&quot;width: 100%; height: 100%;&quot; class=&quot;content&quot;&gt;\n      &lt;vaadin-vertical-layout theme=&quot;spacing&quot; style=&quot;width: 100%; height: 100%;&quot;&gt;\n        &lt;vaadin-form-layout id=&quot;login-form&quot;&gt;\n          &lt;vaadin-select label=&quot;User&quot; id=&quot;username-select&quot;&gt;&lt;/vaadin-select&gt;\n          &lt;vaadin-password-field label=&quot;Password&quot; id=&quot;password-field&quot;&gt;&lt;/vaadin-password-field&gt;\n          &lt;vaadin-button theme=&quot;primary error&quot; tabindex=&quot;0&quot; id=&quot;login-button&quot;&gt;\n            Login \n          &lt;/vaadin-button&gt;\n        &lt;/vaadin-form-layout&gt;\n      &lt;/vaadin-vertical-layout&gt;\n    &lt;/vaadin-vertical-layout&gt;\n</code></pre>\n<p>I can also provide additional information if needed.</p>\n<p>This is the code of the Vaadin Tutorial.</p>\n<p>AuthenticatedUser.class</p>\n<pre><code>@Component\npublic class AuthenticatedUser {\n  private final UserRepository userRepository;\n\n  private final AuthenticationContext authenticationContext;\n\n  public AuthenticatedUser(AuthenticationContext authenticationContext, UserRepository userRepository) {\n      this.userRepository = userRepository;\n      this.authenticationContext = authenticationContext;\n  }\n\n  public Optional&lt;User&gt; get() {\n      return authenticationContext.getAuthenticatedUser(UserDetails.class)\n              .map(userDetails -&gt; userRepository.findByUsername(userDetails.getUsername()));\n  }\n\n  public void logout() {\n      authenticationContext.logout();\n  }\n\n}\n</code></pre>\n<p>SecurityConfiguration.class</p>\n<pre><code>@EnableWebSecurity\n@Configuration\npublic class SecurityConfiguration extends VaadinWebSecurity {\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        http.authorizeRequests().requestMatchers(new AntPathRequestMatcher(&quot;/images/*.png&quot;)).permitAll();\n        super.configure(http);\n        setLoginView(http, LoginView.class);\n    }\n}\n</code></pre>\n<p>UserDetailsServiceImpl.class</p>\n<pre><code>@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    private final UserRepository userRepository;\n\n    public UserDetailsServiceImpl(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    private static List&lt;GrantedAuthority&gt; getAuthorities(User user) {\n        return user.getRoles().stream().map(role -&gt; new SimpleGrantedAuthority(&quot;ROLE_&quot; + role))\n                .collect(Collectors.toList());\n\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user = userRepository.findByUsername(username);\n        if (user == null) {\n            throw new UsernameNotFoundException(&quot;No user present with username: &quot; + username);\n        }\n        return new org.springframework.security.core.userdetails.User(user.getUsername(), user.getHashedPassword(),\n                getAuthorities(user));\n    }\n\n}\n</code></pre>\n"},{"tags":["java","compression","unzip","7zip"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690209823,"post_id":76755220,"comment_id":135317864,"body_markdown":"Try `char[] pass = password.toCharArray();`","body":"Try <code>char[] pass = password.toCharArray();</code>"},{"owner":{"account_id":29080944,"reputation":1,"user_id":22276987,"display_name":"Pintu"},"score":0,"creation_date":1690211668,"post_id":76755220,"comment_id":135318305,"body_markdown":"Only accepting byte for file","body":"Only accepting byte for file"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690212151,"post_id":76755220,"comment_id":135318417,"body_markdown":"Using an old version? That came in 1.17","body":"Using an old version? That came in 1.17"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690292225,"post_id":76762650,"comment_id":135330776,"body_markdown":"Err, except `transferTo` won&#39;t work on that class. It would have to be `sevenZFile.getInputStream(archive).transferTo(outputStream);` But the code will fail anyway with a tree depth of anything other than 1, as no directories are created anywhere. Having said that, the original problem seemed to be password-oriented. Using `getBytes` is far more potentially problematic from a character encoding point of view","body":"Err, except <code>transferTo</code> won&#39;t work on that class. It would have to be <code>sevenZFile.getInputStream(archive).transferTo(outputStream);</code> But the code will fail anyway with a tree depth of anything other than 1, as no directories are created anywhere. Having said that, the original problem seemed to be password-oriented. Using <code>getBytes</code> is far more potentially problematic from a character encoding point of view"},{"owner":{"account_id":29080944,"reputation":1,"user_id":22276987,"display_name":"Pintu"},"score":0,"creation_date":1690301815,"post_id":76762650,"comment_id":135333085,"body_markdown":"You guys know how to parse password only to the files inside the 7z folder and not to the 7z folder and do extraction? I am able to extract only if the 7z folder is password protected.. I am looking for a Java code that can accept the password to the files inside 7z folder.","body":"You guys know how to parse password only to the files inside the 7z folder and not to the 7z folder and do extraction? I am able to extract only if the 7z folder is password protected.. I am looking for a Java code that can accept the password to the files inside 7z folder."}],"tags":[],"owner":{"account_id":21395683,"reputation":1553,"user_id":15758781,"display_name":"Lunatic"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690287621,"creation_date":1690287621,"answer_id":76762650,"question_id":76755220,"body_markdown":"You asked for,\r\n&gt; Unzipping 7z files with password.\r\n\r\nOne practice to so is to use [Apache Compress Library][1], i recommand to use [try, catch with-resources][2] statement to automatically close streams.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n\r\n    public static void unzip(File file, String password) throws IOException {\r\n        try (SevenZFile sevenZFile = new SevenZFile(file, password.getBytes())) {\r\n            SevenZArchiveEntry archive = null;\r\n            while ((archive = sevenZFile.getNextEntry()) != null) {\r\n                if (archive.isDirectory()) continue;\r\n                File outputFile = new File(archive.getName());\r\n                try (OutputStream outputStream = new FileOutputStream(outputFile)) {\r\n                    sevenZFile.transferTo(outputStream);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\nFinally i used `transferTo()` method of the `SevenZFile` object to copy the contents of the entry directly to the output stream, instead of reading and writing the contents byte-by-byte, its more efficient and faster,\r\n\r\n  [1]: https://commons.apache.org/proper/commons-compress/\r\n  [2]: https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html","title":"Java code for unzip 7z file with password","body":"<p>You asked for,</p>\n<blockquote>\n<p>Unzipping 7z files with password.</p>\n</blockquote>\n<p>One practice to so is to use <a href=\"https://commons.apache.org/proper/commons-compress/\" rel=\"nofollow noreferrer\">Apache Compress Library</a>, i recommand to use <a href=\"https://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html\" rel=\"nofollow noreferrer\">try, catch with-resources</a> statement to automatically close streams.</p>\n\n<pre><code>public static void unzip(File file, String password) throws IOException {\n    try (SevenZFile sevenZFile = new SevenZFile(file, password.getBytes())) {\n        SevenZArchiveEntry archive = null;\n        while ((archive = sevenZFile.getNextEntry()) != null) {\n            if (archive.isDirectory()) continue;\n            File outputFile = new File(archive.getName());\n            try (OutputStream outputStream = new FileOutputStream(outputFile)) {\n                sevenZFile.transferTo(outputStream);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Finally i used <code>transferTo()</code> method of the <code>SevenZFile</code> object to copy the contents of the entry directly to the output stream, instead of reading and writing the contents byte-by-byte, its more efficient and faster,</p>\n"}],"owner":{"account_id":29080944,"reputation":1,"user_id":22276987,"display_name":"Pintu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690287621,"creation_date":1690207103,"question_id":76755220,"body_markdown":"I have tried to unzip the 7z file in Java code but I&#39;m getting &quot;Bad 7z signature&quot;\r\n\r\nAny suggestions would be helpful..\r\n\r\nI&#39;ve used UTF-16LE and UTF-16 both throwing same error\r\n\r\nBelow is the code that Ive tried \r\n_----_----+++-\r\n\r\npublic void SevenZFile(String directory, String encryptCompressFileName, String password) {\r\n\r\n        SevenZFile sevenZFile = null;\r\n        SevenZArchiveEntry entry = null;\r\n\r\n        try {\r\n\r\n            File file = new File(directory+encryptCompressFileName);\r\n            byte[] inputData = new byte[(int) file.length()];\r\n            FileInputStream fis = new FileInputStream(file);\r\n            fis.read(inputData);\r\n            fis.close();\r\n\r\n            // SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(inputData);\r\n            if(null != password){\r\n                byte[] pass = password.getBytes(&quot;UTF16&quot;);\r\n                sevenZFile = new SevenZFile(file, pass);\r\n            }else{\r\n                sevenZFile = new SevenZFile(file);\r\n            }\r\n\r\n            // Go through all entries\r\n            while (null != (entry = sevenZFile.getNextEntry())) {\r\n\r\n                // Maybe filter by name. Name can contain a path.\r\n                String processingFileName = entry.getName();\r\n                if (entry.isDirectory()) {\r\n                    System.out.println(String.format(&quot;Found directory entry %s&quot;, processingFileName));\r\n\r\n                } else {\r\n\r\n                    // If this is a file, we read the file content into a ByteArrayOutputStream ...\r\n                    System.out.println(String.format(&quot;Unpacking start %s ...&quot;, processingFileName));\r\n                    ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\r\n\r\n                    // ... using a small buffer byte array.\r\n                    byte[] buffer = new byte[2048];\r\n                    int bytesRead;\r\n\r\n                    while ((bytesRead = sevenZFile.read(buffer)) != -1) {\r\n                        contentBytes.write(buffer, 0, bytesRead);\r\n                    }\r\n\r\n\r\n                 FileOutputStream fileOut = new FileOutputStream(directory+processingFileName);\r\n                        fileOut.write(contentBytes.toByteArray());\r\n                        fileOut.flush();\r\n                        wb.write(fileOut);\r\n                        fileOut.close();\r\n                        wb.close();\r\n                    }else{ //regular file\r\n                        System.out.println(contentBytes.toString(&quot;UTF-8&quot;));\r\n                    }\r\n                    System.out.println(String.format(&quot;Unpacking finish %s ...&quot;, processingFileName));   \r\n                }\r\n            }\r\n\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            try {\r\n                sevenZFile.close();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n\r\n    }\r\n","title":"Java code for unzip 7z file with password","body":"<p>I have tried to unzip the 7z file in Java code but I'm getting &quot;Bad 7z signature&quot;</p>\n<p>Any suggestions would be helpful..</p>\n<p>I've used UTF-16LE and UTF-16 both throwing same error</p>\n<p>Below is the code that Ive tried\n<em>----</em>----+++-</p>\n<p>public void SevenZFile(String directory, String encryptCompressFileName, String password) {</p>\n<pre><code>    SevenZFile sevenZFile = null;\n    SevenZArchiveEntry entry = null;\n\n    try {\n\n        File file = new File(directory+encryptCompressFileName);\n        byte[] inputData = new byte[(int) file.length()];\n        FileInputStream fis = new FileInputStream(file);\n        fis.read(inputData);\n        fis.close();\n\n        // SeekableInMemoryByteChannel inMemoryByteChannel = new SeekableInMemoryByteChannel(inputData);\n        if(null != password){\n            byte[] pass = password.getBytes(&quot;UTF16&quot;);\n            sevenZFile = new SevenZFile(file, pass);\n        }else{\n            sevenZFile = new SevenZFile(file);\n        }\n\n        // Go through all entries\n        while (null != (entry = sevenZFile.getNextEntry())) {\n\n            // Maybe filter by name. Name can contain a path.\n            String processingFileName = entry.getName();\n            if (entry.isDirectory()) {\n                System.out.println(String.format(&quot;Found directory entry %s&quot;, processingFileName));\n\n            } else {\n\n                // If this is a file, we read the file content into a ByteArrayOutputStream ...\n                System.out.println(String.format(&quot;Unpacking start %s ...&quot;, processingFileName));\n                ByteArrayOutputStream contentBytes = new ByteArrayOutputStream();\n\n                // ... using a small buffer byte array.\n                byte[] buffer = new byte[2048];\n                int bytesRead;\n\n                while ((bytesRead = sevenZFile.read(buffer)) != -1) {\n                    contentBytes.write(buffer, 0, bytesRead);\n                }\n\n\n             FileOutputStream fileOut = new FileOutputStream(directory+processingFileName);\n                    fileOut.write(contentBytes.toByteArray());\n                    fileOut.flush();\n                    wb.write(fileOut);\n                    fileOut.close();\n                    wb.close();\n                }else{ //regular file\n                    System.out.println(contentBytes.toString(&quot;UTF-8&quot;));\n                }\n                System.out.println(String.format(&quot;Unpacking finish %s ...&quot;, processingFileName));   \n            }\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n        try {\n            sevenZFile.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":["java","windows","utf-8","character-encoding","console"],"comments":[{"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"score":0,"creation_date":1405602896,"post_id":24803733,"comment_id":38501101,"body_markdown":"`System.out` encodes bytes using the [default encoding](http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--). Sometimes this is even the encoding used by the console.","body":"<code>System.out</code> encodes bytes using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\" rel=\"nofollow noreferrer\">default encoding</a>. Sometimes this is even the encoding used by the console."},{"owner":{"account_id":2103510,"reputation":25631,"user_id":1870481,"accept_rate":56,"display_name":"michas"},"score":0,"creation_date":1405603391,"post_id":24803733,"comment_id":38501478,"body_markdown":"But why does `java Foo` output something different that `java Foo|cat`? - The default encoding should be the same.","body":"But why does <code>java Foo</code> output something different that <code>java Foo|cat</code>? - The default encoding should be the same."},{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1405783983,"post_id":24803733,"comment_id":38571584,"body_markdown":"did you ensure that you actually _saved_ the file using utf-8 encoding?  it&#39;s generally a bad idea to depend on source file encodings.  to be truly safe, define the string using `&quot;\\u&quot;` escapes.","body":"did you ensure that you actually <i>saved</i> the file using utf-8 encoding?  it&#39;s generally a bad idea to depend on source file encodings.  to be truly safe, define the string using <code>&quot;\\u&quot;</code> escapes."}],"answers":[{"comments":[{"owner":{"account_id":2103510,"reputation":25631,"user_id":1870481,"accept_rate":56,"display_name":"michas"},"score":0,"creation_date":1405797399,"post_id":24841904,"comment_id":38575429,"body_markdown":"Thanks a lot! I was sure `cat` simply copies bytes as they are. Obviously it indeed tries to &quot;fix&quot; encoding when writing to a terminal. I was also not aware that git-bash indeed uses the IBM850 cmd terminal. This answer was really helpful.","body":"Thanks a lot! I was sure <code>cat</code> simply copies bytes as they are. Obviously it indeed tries to &quot;fix&quot; encoding when writing to a terminal. I was also not aware that git-bash indeed uses the IBM850 cmd terminal. This answer was really helpful."}],"tags":[],"owner":{"account_id":246,"reputation":107913,"user_id":304,"accept_rate":40,"display_name":"McDowell"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1405783415,"creation_date":1405783415,"answer_id":24841904,"question_id":24803733,"body_markdown":"I&#39;m assuming that your console still runs under cmd.exe. I doubt your console is really expecting UTF-8 - I expect it is really an OEM DOS encoding (e.g. [850 or 437][1].)\r\n\r\nJava will encode bytes using the [default encoding][3] set during JVM initialization.\r\n\r\nReproducing on my PC:\r\n\r\n    java Foo\r\n\r\nJava encodes as windows-1252; console decodes as IBM850. Result: **Mojibake**\r\n\r\n    java -Dfile.encoding=UTF-8 Foo\r\n\r\nJava encodes as UTF-8; console decodes as IBM850. Result: **Mojibake**\r\n\r\n    cat test.txt\r\n\r\ncat decodes file as UTF-8; cat encodes as IBM850; console decodes as IBM850.\r\n\r\n    java Foo | cat\r\n\r\nJava encodes as windows-1252; cat decodes as windows-1252; cat encodes as IBM850; console decodes as IBM850\r\n\r\n    java -Dfile.encoding=UTF-8 Foo | cat\r\n\r\nJava encodes as UTF-8; cat decodes as UTF-8; cat encodes as IBM850; console decodes as IBM850\r\n\r\nThis implementation of _cat_ must use heuristics to determine if the character data is UTF-8 or not, then transcodes the data from either UTF-8 or ANSI (e.g. windows-1252) to the console encoding (e.g. IBM850.)\r\n\r\nThis can be confirmed with the following commands:\r\n\r\n    $ java HexDump utf8.txt\r\n    78 78 c3 a4 c3 b1 78 78\r\n    \r\n    $ cat utf8.txt\r\n    xx&#228;&#241;xx\r\n    \r\n    $ java HexDump ansi.txt\r\n    78 78 e4 f1 78 78\r\n    \r\n    $ cat ansi.txt\r\n    xx&#228;&#241;xx\r\n\r\nThe _cat_ command can make this determination because `e4 f1` is not a valid UTF-8 sequence.\r\n\r\nYou can correct the Java output by:\r\n\r\n - [Setting the console encoding][4] to the system ANSI value\r\n - Using the [Console][5] type\r\n - Using some [shiv layer][6] as you are doing with _cat_\r\n\r\n_HexDump_ is a trivial Java application:\r\n\r\n    import java.io.*;\r\n    class HexDump {\r\n      public static void main(String[] args) throws IOException {\r\n        try (InputStream in = new FileInputStream(args[0])) {\r\n    \t  int r;\r\n    \t  while((r = in.read()) != -1) {\r\n    \t    System.out.format(&quot;%02x &quot;, 0xFF &amp; r);\r\n    \t  }\r\n    \t  System.out.println();\r\n    \t}\r\n      }\r\n    }\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx\r\n  [2]: http://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html\r\n  [3]: http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\r\n  [4]: http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html#charsets_1252\r\n  [5]: http://docs.oracle.com/javase/8/docs/api/java/io/Console.html\r\n  [6]: http://illegalargumentexception.blogspot.co.uk/2013/06/go-unicode-on-windows-command-prompt.html#gou_java","title":"Default character encoding for java console output","body":"<p>I'm assuming that your console still runs under cmd.exe. I doubt your console is really expecting UTF-8 - I expect it is really an OEM DOS encoding (e.g. <a href=\"http://msdn.microsoft.com/en-us/library/dd317756(VS.85).aspx\">850 or 437</a>.)</p>\n\n<p>Java will encode bytes using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/nio/charset/Charset.html#defaultCharset--\">default encoding</a> set during JVM initialization.</p>\n\n<p>Reproducing on my PC:</p>\n\n<pre><code>java Foo\n</code></pre>\n\n<p>Java encodes as windows-1252; console decodes as IBM850. Result: <strong>Mojibake</strong></p>\n\n<pre><code>java -Dfile.encoding=UTF-8 Foo\n</code></pre>\n\n<p>Java encodes as UTF-8; console decodes as IBM850. Result: <strong>Mojibake</strong></p>\n\n<pre><code>cat test.txt\n</code></pre>\n\n<p>cat decodes file as UTF-8; cat encodes as IBM850; console decodes as IBM850.</p>\n\n<pre><code>java Foo | cat\n</code></pre>\n\n<p>Java encodes as windows-1252; cat decodes as windows-1252; cat encodes as IBM850; console decodes as IBM850</p>\n\n<pre><code>java -Dfile.encoding=UTF-8 Foo | cat\n</code></pre>\n\n<p>Java encodes as UTF-8; cat decodes as UTF-8; cat encodes as IBM850; console decodes as IBM850</p>\n\n<p>This implementation of <em>cat</em> must use heuristics to determine if the character data is UTF-8 or not, then transcodes the data from either UTF-8 or ANSI (e.g. windows-1252) to the console encoding (e.g. IBM850.)</p>\n\n<p>This can be confirmed with the following commands:</p>\n\n<pre><code>$ java HexDump utf8.txt\n78 78 c3 a4 c3 b1 78 78\n\n$ cat utf8.txt\nxxäñxx\n\n$ java HexDump ansi.txt\n78 78 e4 f1 78 78\n\n$ cat ansi.txt\nxxäñxx\n</code></pre>\n\n<p>The <em>cat</em> command can make this determination because <code>e4 f1</code> is not a valid UTF-8 sequence.</p>\n\n<p>You can correct the Java output by:</p>\n\n<ul>\n<li><a href=\"http://illegalargumentexception.blogspot.co.uk/2009/04/i18n-unicode-at-windows-command-prompt.html#charsets_1252\">Setting the console encoding</a> to the system ANSI value</li>\n<li>Using the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/io/Console.html\">Console</a> type</li>\n<li>Using some <a href=\"http://illegalargumentexception.blogspot.co.uk/2013/06/go-unicode-on-windows-command-prompt.html#gou_java\">shiv layer</a> as you are doing with <em>cat</em></li>\n</ul>\n\n<p><em>HexDump</em> is a trivial Java application:</p>\n\n<pre><code>import java.io.*;\nclass HexDump {\n  public static void main(String[] args) throws IOException {\n    try (InputStream in = new FileInputStream(args[0])) {\n      int r;\n      while((r = in.read()) != -1) {\n        System.out.format(\"%02x \", 0xFF &amp; r);\n      }\n      System.out.println();\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2103510,"reputation":25631,"user_id":1870481,"accept_rate":56,"display_name":"michas"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":27239,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":24841904,"answer_count":1,"score":10,"last_activity_date":1690286844,"creation_date":1405600438,"question_id":24803733,"body_markdown":"How does Java determine the encoding used for `System.out`?\r\n\r\nGiven the following class:\r\n\r\n    import java.io.File;\r\n    import java.io.PrintWriter;\r\n    \r\n    public class Foo\r\n    {\r\n        public static void main(String[] args) throws Exception\r\n        {\r\n            String s = &quot;xx&#228;&#241;xx&quot;;\r\n            System.out.println(s);\r\n            PrintWriter out = new PrintWriter(new File(&quot;test.txt&quot;), &quot;UTF-8&quot;);\r\n            out.println(s);\r\n            out.close();\r\n        }\r\n    }\r\n\r\nIt is saved as UTF-8 and compiled with `javac -encoding UTF-8 Foo.java` on a Windows system.\r\n\r\nAfterwards on a git-bash console (using UTF-8 charset) I do:\r\n\r\n    $ java Foo\r\n    xx&#245;&#177;xx\r\n    $ java -Dfile.encoding=UTF-8 Foo\r\n    xx├&#241;├▒xx\r\n    $ cat test.txt\r\n    xx&#228;&#241;xx\r\n    $ java Foo | cat\r\n    xx&#228;&#241;xx\r\n    $ java -Dfile.encoding=UTF-8 Foo | cat\r\n    xx&#228;&#241;xx\r\n\r\nWhat is going on here? \r\n\r\nObviously java checks if it is connected to a terminal and is changing its encoding in that case. Is there a way to force Java to simply output plain UTF-8?\r\n\r\n---\r\n\r\nI tried the same with the cmd console, too. Redirecting STDOUT does not seem to make any difference there. Without the file.encoding parameter it outputs ansi encoding with the parameter it outputs utf8 encoding.\r\n\r\n\r\n","title":"Default character encoding for java console output","body":"<p>How does Java determine the encoding used for <code>System.out</code>?</p>\n\n<p>Given the following class:</p>\n\n<pre><code>import java.io.File;\nimport java.io.PrintWriter;\n\npublic class Foo\n{\n    public static void main(String[] args) throws Exception\n    {\n        String s = \"xxäñxx\";\n        System.out.println(s);\n        PrintWriter out = new PrintWriter(new File(\"test.txt\"), \"UTF-8\");\n        out.println(s);\n        out.close();\n    }\n}\n</code></pre>\n\n<p>It is saved as UTF-8 and compiled with <code>javac -encoding UTF-8 Foo.java</code> on a Windows system.</p>\n\n<p>Afterwards on a git-bash console (using UTF-8 charset) I do:</p>\n\n<pre><code>$ java Foo\nxxõ±xx\n$ java -Dfile.encoding=UTF-8 Foo\nxx├ñ├▒xx\n$ cat test.txt\nxxäñxx\n$ java Foo | cat\nxxäñxx\n$ java -Dfile.encoding=UTF-8 Foo | cat\nxxäñxx\n</code></pre>\n\n<p>What is going on here? </p>\n\n<p>Obviously java checks if it is connected to a terminal and is changing its encoding in that case. Is there a way to force Java to simply output plain UTF-8?</p>\n\n<hr>\n\n<p>I tried the same with the cmd console, too. Redirecting STDOUT does not seem to make any difference there. Without the file.encoding parameter it outputs ansi encoding with the parameter it outputs utf8 encoding.</p>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"account_id":3509196,"reputation":16493,"user_id":2933977,"display_name":"stdunbar"},"score":1,"creation_date":1690208555,"post_id":76755375,"comment_id":135317588,"body_markdown":"In Java, `final` means you can&#39;t modify or override the method.  An interface is *designed* to be overridden.  It makes no sense.","body":"In Java, <code>final</code> means you can&#39;t modify or override the method.  An interface is <i>designed</i> to be overridden.  It makes no sense."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690208578,"post_id":76755375,"comment_id":135317592,"body_markdown":"Making private methods final makes no sense because they can&#39;t be overridden. It is allowed for historic reasons in classes, but when private methods were added to interfaces it was decided to simply not allow `final` for them.","body":"Making private methods final makes no sense because they can&#39;t be overridden. It is allowed for historic reasons in classes, but when private methods were added to interfaces it was decided to simply not allow <code>final</code> for them."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690208626,"post_id":76755375,"comment_id":135317607,"body_markdown":"@stdunbar You can&#39;t override private methods, and in Java you can define private methods in interfaces (e.g. for use in default methods).","body":"@stdunbar You can&#39;t override private methods, and in Java you can define private methods in interfaces (e.g. for use in default methods)."},{"owner":{"account_id":29081151,"reputation":3,"user_id":22277145,"display_name":"The Pondering Questioner"},"score":0,"creation_date":1690208734,"post_id":76755375,"comment_id":135317627,"body_markdown":"My question is, since private methods themselves cannot be overridden, why can private methods be declared in an interface but not private final methods","body":"My question is, since private methods themselves cannot be overridden, why can private methods be declared in an interface but not private final methods"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1690208894,"post_id":76755375,"comment_id":135317665,"body_markdown":"Why can&#39;t you? Because [the language spec forbids it](https://docs.oracle.com/javase/specs/jls/se20/html/jls-9.html#jls-9.4) &quot;Note that an interface method may not be declared with protected or package access, or with the modifiers final, synchronized, or native.&quot; Why is it forbidden? Because it&#39;s not useful.","body":"Why can&#39;t you? Because <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-9.html#jls-9.4\" rel=\"nofollow noreferrer\">the language spec forbids it</a> &quot;Note that an interface method may not be declared with protected or package access, or with the modifiers final, synchronized, or native.&quot; Why is it forbidden? Because it&#39;s not useful."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690208919,"post_id":76755375,"comment_id":135317674,"body_markdown":"@ThePonderingQuestioner See my comment. Declaring a private method as final is nonsensical, so it was disallowed when they introduced it for interfaces. The fact you can declare a private method final in a class is a historic mistake which can&#39;t be fixed without potentially breaking existing code.","body":"@ThePonderingQuestioner See my comment. Declaring a private method as final is nonsensical, so it was disallowed when they introduced it for interfaces. The fact you can declare a private method final in a class is a historic mistake which can&#39;t be fixed without potentially breaking existing code."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1690286640,"creation_date":1690208793,"answer_id":76755431,"question_id":76755375,"body_markdown":"It&#39;s not about interfaces. __All `private` methods are inherently final!__\r\n\r\nThis isn&#39;t just an observation - the JVM acts accordingly and e.g. hardcodes (skipping dynamic dispatch) when JITting calls to private methods the same way it does for `final` ones.\r\n\r\nA private method __cannot be extended__ because it is invisible to everything outside of the class.\r\n\r\nThere is one academic case where you _can_ extend a private method: `private` doesn&#39;t quite mean &#39;invisible to everything outside this class&#39;. It more closely means &#39;invisible to everything outside this source file&#39;, and in theory you can squeeze more than one class in a single source file. However, at the JVM level it doesn&#39;t work that way (if you squeeze more than 1 class into a source file, compiling that one `.java` file results in more than one `.class` file), and because of that, `javac` actually makes your method non-`private`, or makes non-private bridger synthetic methods instead. Allowing private methods to be `final` therefore makes no sense unless you know about that weirdness, which is probably not a good language feature.\r\n\r\n`javac` fails to compile `private final void foo() {}` in an interface because it&#39;s nonsense. `javac` generates a warning when you write: `int x = (int) 5;` for the same reason: That code is nonsense. It&#39;s either stating the obvious to a ridiculous degree, or, more likely, it indicates the coder is confused about a concept. Same here: Marking a `private` method as `final` is either ridiculous (all private methods inherently always are, you&#39;re stating the obvious), or indicative of misunderstanding. Or a typo.\r\n\r\nAssuming programmers aren&#39;t being ridiculous, it&#39;s correct to error (or possibly it is more correct to warn but that is a separate discussion).\r\n","title":"Why can’t a private method in an interface be declared as final in Java?","body":"<p>It's not about interfaces. <strong>All <code>private</code> methods are inherently final!</strong></p>\n<p>This isn't just an observation - the JVM acts accordingly and e.g. hardcodes (skipping dynamic dispatch) when JITting calls to private methods the same way it does for <code>final</code> ones.</p>\n<p>A private method <strong>cannot be extended</strong> because it is invisible to everything outside of the class.</p>\n<p>There is one academic case where you <em>can</em> extend a private method: <code>private</code> doesn't quite mean 'invisible to everything outside this class'. It more closely means 'invisible to everything outside this source file', and in theory you can squeeze more than one class in a single source file. However, at the JVM level it doesn't work that way (if you squeeze more than 1 class into a source file, compiling that one <code>.java</code> file results in more than one <code>.class</code> file), and because of that, <code>javac</code> actually makes your method non-<code>private</code>, or makes non-private bridger synthetic methods instead. Allowing private methods to be <code>final</code> therefore makes no sense unless you know about that weirdness, which is probably not a good language feature.</p>\n<p><code>javac</code> fails to compile <code>private final void foo() {}</code> in an interface because it's nonsense. <code>javac</code> generates a warning when you write: <code>int x = (int) 5;</code> for the same reason: That code is nonsense. It's either stating the obvious to a ridiculous degree, or, more likely, it indicates the coder is confused about a concept. Same here: Marking a <code>private</code> method as <code>final</code> is either ridiculous (all private methods inherently always are, you're stating the obvious), or indicative of misunderstanding. Or a typo.</p>\n<p>Assuming programmers aren't being ridiculous, it's correct to error (or possibly it is more correct to warn but that is a separate discussion).</p>\n"},{"comments":[{"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"score":0,"creation_date":1690210816,"post_id":76755507,"comment_id":135318112,"body_markdown":"@user16320675 - yes, but since there is no need ever to do that and it will not add anything to the code it makes sense that it is not allowed by the language so to reduce confusion. It is indeed not allowed, I tried to explain the reason why","body":"@user16320675 - yes, but since there is no need ever to do that and it will not add anything to the code it makes sense that it is not allowed by the language so to reduce confusion. It is indeed not allowed, I tried to explain the reason why"}],"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690209323,"creation_date":1690209323,"answer_id":76755507,"question_id":76755375,"body_markdown":"A private method by definition is final as it is not visible or accessible from any other class it can not be overridden which is the meaning of final. So, you don&#39;t need the ability to declare it final as it already is","title":"Why can’t a private method in an interface be declared as final in Java?","body":"<p>A private method by definition is final as it is not visible or accessible from any other class it can not be overridden which is the meaning of final. So, you don't need the ability to declare it final as it already is</p>\n"}],"owner":{"account_id":29081151,"reputation":3,"user_id":22277145,"display_name":"The Pondering Questioner"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":120,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76755431,"answer_count":2,"score":0,"last_activity_date":1690286640,"creation_date":1690208310,"question_id":76755375,"body_markdown":"In Java 9 and later, we can declare private methods in interfaces. These private methods have a body and are mainly used to implement other methods within the interface or to hide implementation details. This helps to reduce code duplication and encapsulate the implementation of the interface. However, I noticed that private methods in interfaces cannot be declared as final. Why is this the case? What is the reason behind this restriction?\r\n\r\nI asked GPT for an answer to this question, but it didn’t give me a clear answer.","title":"Why can’t a private method in an interface be declared as final in Java?","body":"<p>In Java 9 and later, we can declare private methods in interfaces. These private methods have a body and are mainly used to implement other methods within the interface or to hide implementation details. This helps to reduce code duplication and encapsulate the implementation of the interface. However, I noticed that private methods in interfaces cannot be declared as final. Why is this the case? What is the reason behind this restriction?</p>\n<p>I asked GPT for an answer to this question, but it didn’t give me a clear answer.</p>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690102733,"post_id":76747183,"comment_id":135303960,"body_markdown":"pretty sure spring boot does not have this function out of the box. Have to implement it by yourself by looking at hibernate source codes to see how they create the mapping data . happy to look into it for you if this question is provided with enough bounty.","body":"pretty sure spring boot does not have this function out of the box. Have to implement it by yourself by looking at hibernate source codes to see how they create the mapping data . happy to look into it for you if this question is provided with enough bounty."},{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1690128015,"post_id":76747183,"comment_id":135306904,"body_markdown":"You can do it with an orm.xml file to override the mapping. Map it how you want via annotations, and map it the other way (transient) in the orm.xml file, and then have your orm.xml file get picked up via properties (or just use a second persistence.xml and switch which one your application uses in spring config). Other providers (EclipseLink) allow dynamically modifying mappings though if you&#39;d like to take that approach (https://docs.oracle.com/middleware/1212/toplink/TLADG/metadatasource.htm#TLADG1122 ) which allows you to switch between persistence unit mappings at runtime.","body":"You can do it with an orm.xml file to override the mapping. Map it how you want via annotations, and map it the other way (transient) in the orm.xml file, and then have your orm.xml file get picked up via properties (or just use a second persistence.xml and switch which one your application uses in spring config). Other providers (EclipseLink) allow dynamically modifying mappings though if you&#39;d like to take that approach (<a href=\"https://docs.oracle.com/middleware/1212/toplink/TLADG/metadatasource.htm#TLADG1122\" rel=\"nofollow noreferrer\">docs.oracle.com/middleware/1212/toplink/TLADG/&hellip;</a> ) which allows you to switch between persistence unit mappings at runtime."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690287685,"post_id":76762524,"comment_id":135329587,"body_markdown":"That will definitly not work.","body":"That will definitly not work."},{"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"score":0,"creation_date":1690289616,"post_id":76762524,"comment_id":135330112,"body_markdown":"Ok, Thanks @Deinum","body":"Ok, Thanks @Deinum"}],"tags":[],"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690286606,"creation_date":1690286606,"answer_id":76762524,"question_id":76747183,"body_markdown":"I have seen an annotation ConditionalOnProperty, please check [here][1] once.\r\n```\r\n@Column\r\n@ConditionalOnProperty(name = &quot;Column&quot;, havingValue = &quot;true&quot;) \r\n```\r\n\r\n\r\n  [1]: https://www.baeldung.com/spring-conditionalonproperty","title":"Spring boot JPA enable or disable a column with property file","body":"<p>I have seen an annotation ConditionalOnProperty, please check <a href=\"https://www.baeldung.com/spring-conditionalonproperty\" rel=\"nofollow noreferrer\">here</a> once.</p>\n<pre><code>@Column\n@ConditionalOnProperty(name = &quot;Column&quot;, havingValue = &quot;true&quot;) \n</code></pre>\n"}],"owner":{"account_id":1937163,"reputation":1120,"user_id":1744334,"accept_rate":100,"display_name":"Muhammed K K"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":149,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690286606,"creation_date":1690098956,"question_id":76747183,"body_markdown":"I am working on a Spring Boot library project that uses JPA to persist data to a database. I have a column in my entity that I want to be able to enable or disable using property file.\r\n\r\nSomething like \r\n\r\n    lib.&lt;entity&gt;.&lt;column_name&gt;.enable=true\r\n\r\nIf I set this property to true, the column will be enabled. If I set it to false, the column will be transient.\r\n\r\n\r\nIs there any method to achive this functionality in spring boot jpa.\r\n\r\n\r\n","title":"Spring boot JPA enable or disable a column with property file","body":"<p>I am working on a Spring Boot library project that uses JPA to persist data to a database. I have a column in my entity that I want to be able to enable or disable using property file.</p>\n<p>Something like</p>\n<pre><code>lib.&lt;entity&gt;.&lt;column_name&gt;.enable=true\n</code></pre>\n<p>If I set this property to true, the column will be enabled. If I set it to false, the column will be transient.</p>\n<p>Is there any method to achive this functionality in spring boot jpa.</p>\n"},{"tags":["java","eclipse","eclipse-plugin","swt","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690285851,"post_id":76762201,"comment_id":135329183,"body_markdown":"To the best of my knowledge there is no mechanism for doing that.","body":"To the best of my knowledge there is no mechanism for doing that."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1690298967,"post_id":76762201,"comment_id":135332410,"body_markdown":"Do you mean the icons literally, or which wizards are shown in the menu?","body":"Do you mean the icons literally, or which wizards are shown in the menu?"},{"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"score":0,"creation_date":1690354066,"post_id":76762201,"comment_id":135339826,"body_markdown":"@nitind yes, I mean icons only","body":"@nitind yes, I mean icons only"}],"owner":{"account_id":28805956,"reputation":9,"user_id":22061831,"display_name":"Satya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690286596,"creation_date":1690284046,"question_id":76762201,"body_markdown":"[Image for your reference](https://i.stack.imgur.com/dY2sn.png)\r\n\r\nwhen we right click in project explorer, the list occurs which is also known as context menu. I want to replace these icons in this menu with other icons of my choice. How can i do this ? \r\n\r\nI want to replace the context menu icons of eclipse ide  with icons of my choice","title":"How to override and change context menu icon in Eclipse IDE","body":"<p><a href=\"https://i.stack.imgur.com/dY2sn.png\" rel=\"nofollow noreferrer\">Image for your reference</a></p>\n<p>when we right click in project explorer, the list occurs which is also known as context menu. I want to replace these icons in this menu with other icons of my choice. How can i do this ?</p>\n<p>I want to replace the context menu icons of eclipse ide  with icons of my choice</p>\n"},{"tags":["java","spring-boot","ssl","spring-webflux","client-certificates"],"comments":[{"owner":{"account_id":6840777,"reputation":473,"user_id":5261257,"accept_rate":12,"display_name":"stewchicken"},"score":0,"creation_date":1631818854,"post_id":69210302,"comment_id":122332609,"body_markdown":"send a request to an external endpoint, autenticating through a certificate. For me It means client certificate. the httpclient has private key in its&#39; keystore. the server side should import client certificate signed root CA into server&#39; truststore.  Could you use some debug option to print out more detailed error information ?","body":"send a request to an external endpoint, autenticating through a certificate. For me It means client certificate. the httpclient has private key in its&#39; keystore. the server side should import client certificate signed root CA into server&#39; truststore.  Could you use some debug option to print out more detailed error information ?"}],"answers":[{"tags":[],"owner":{"account_id":3161779,"reputation":11,"user_id":2672685,"display_name":"Ivan Slavka"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690286414,"creation_date":1690286414,"answer_id":76762500,"question_id":69210302,"body_markdown":"I know it&#39;s 2 years old, but this helped me:\r\n\r\n    private SslContext createSSLContext() {\r\n      try {\r\n          KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\r\n          keyStore.load(getClass().getClassLoader().getResourceAsStream(KEYSTORE_FILE), KEYSTORE_PASSWORD.toCharArray());\r\n    \r\n          KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\r\n          keyManagerFactory.init(keyStore, KEYSTORE_PASSWORD.toCharArray());\r\n    \r\n          return SslContextBuilder.forClient()\r\n                  .keyManager(keyManagerFactory)\r\n                  .build();\r\n    \r\n      } \r\n      catch (Exception e) {\r\n          throw new RuntimeException(&quot;Error creating SSL context.&quot;);\r\n      }\r\n    }\r\n    \r\n    private WebClient buildCustomWebClient(WebClient.Builder builder, String baseUrl){\r\n    \r\n      HttpClient client = HttpClient.create().secure(spec -&gt; spec.sslContext(createSSLContext()));\r\n      ClientHttpConnector connector = new ReactorClientHttpConnector(client);\r\n    \r\n      return builder\r\n              .baseUrl(baseUrl)\r\n              .clientConnector(connector)\r\n              .build();\r\n    }\r\n\r\nsource: https://gist.github.com/hsg/6152944726e46ababcf47398398b4140","title":"WebFlux WebClient not sending certificate","body":"<p>I know it's 2 years old, but this helped me:</p>\n<pre><code>private SslContext createSSLContext() {\n  try {\n      KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());\n      keyStore.load(getClass().getClassLoader().getResourceAsStream(KEYSTORE_FILE), KEYSTORE_PASSWORD.toCharArray());\n\n      KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n      keyManagerFactory.init(keyStore, KEYSTORE_PASSWORD.toCharArray());\n\n      return SslContextBuilder.forClient()\n              .keyManager(keyManagerFactory)\n              .build();\n\n  } \n  catch (Exception e) {\n      throw new RuntimeException(&quot;Error creating SSL context.&quot;);\n  }\n}\n\nprivate WebClient buildCustomWebClient(WebClient.Builder builder, String baseUrl){\n\n  HttpClient client = HttpClient.create().secure(spec -&gt; spec.sslContext(createSSLContext()));\n  ClientHttpConnector connector = new ReactorClientHttpConnector(client);\n\n  return builder\n          .baseUrl(baseUrl)\n          .clientConnector(connector)\n          .build();\n}\n</code></pre>\n<p>source: <a href=\"https://gist.github.com/hsg/6152944726e46ababcf47398398b4140\" rel=\"nofollow noreferrer\">https://gist.github.com/hsg/6152944726e46ababcf47398398b4140</a></p>\n"}],"owner":{"account_id":4271760,"reputation":706,"user_id":3493420,"accept_rate":56,"display_name":"Marco"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":883,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690286414,"creation_date":1631802454,"question_id":69210302,"body_markdown":"I&#39;m creating a Java client, based on Spring WebFlux, that should send a request to an external endpoint, autenticating through a certificate.\r\nI did a similar thing using the Spring&#39;s WebServiceTemplate, by specifying the certificate in the application.yaml file like the following:\r\n\r\n    client:\r\n      ssl:\r\n        enabled: true\r\n        key-store: /myapp/certificate/keystore.p12\r\n        key-store-password: SUPERSECRET\r\n\r\nThen by defining the SSLContext for HttpClient in order to generate the related bean to be used for the proper call.\r\nHere&#39;s an extract of the context configuration:\r\n\r\n    private SSLContext sslContext()\r\n      throws IOException, CertificateException, NoSuchAlgorithmException, KeyStoreException,\r\n      KeyManagementException, UnrecoverableKeyException {\r\n\r\n      return SSLContextBuilder.create()\r\n        .loadKeyMaterial(new File(keystore), keystorePassword.toCharArray(),\r\n            keystorePassword.toCharArray()).build();\r\n    }\r\n\r\nIt turns out that I&#39;m not able to perform the exact same thing by using the WebClient (from WebFlux).\r\nWhat I did, following various SO responses and guides, is the following:\r\n\r\nCreating the proper SSLContext by loading the same ```keystore.p12``` (I intentionally removed the try-catches from the following code to increase readability):\r\n\r\n    private WebClient getMtlsWebClient() {\r\n      HttpClient httpClient = HttpClient.create();\r\n\r\n      httpClient.secure(spec -&gt; {\r\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\r\n        keyStore.load(new FileInputStream(ResourceUtils.getFile(keyStorePath)), keyStorePass.toCharArray());\r\n\r\n        // Set up key manager factory to use key-store\r\n        KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\r\n        keyManagerFactory.init(keyStore, keyStorePass.toCharArray());\r\n        \r\n        spec.sslContext(SslContextBuilder.forClient()\r\n            .keyManager(keyManagerFactory)\r\n            .build());\r\n      });\r\n\r\n      return WebClient\r\n          .builder()\r\n          .clientConnector(new ReactorClientHttpConnector(httpClient))\r\n          .build();\r\n    }\r\n\r\nThen simply fire the call like the following:\r\n\r\n    return getMtlsWebClient()\r\n        .post()\r\n        .uri(externalServiceUrl)\r\n        .contentType(MediaType.TEXT_XML)\r\n        .accept(MediaType.TEXT_XML)\r\n        .acceptCharset(StandardCharsets.UTF_8)\r\n        .body(Mono.just(request), reqClazz)\r\n        .retrieve()\r\n        .bodyToMono(resClazz)\r\n        .retryWhen(\r\n            Retry\r\n                .fixedDelay(3, Duration.ofSeconds(1))\r\n                .filter(this::isAnyError)\r\n        ).\r\n        map(res -&gt; {\r\n          log.trace(&quot;Response payload: {}&quot;, res);\r\n          return res;\r\n        })\r\n        .onErrorMap(res -&gt; {\r\n          log.error(&quot;Error response payload: {}&quot;, res);\r\n          return res;\r\n        });\r\n\r\nUnfortunately what I get as a response is a 403 FORBIDDEN and indeed the handshake log shows the following message:\r\n\r\n    *** ServerHelloDone\r\n    [read] MD5 and SHA1 hashes:  len = 4\r\n    0000: 0E 00 00 00                                        ....\r\n    Warning: no suitable certificate found - continuing without client authentication\r\n    *** Certificate chain\r\n    &lt;Empty&gt;\r\n    ***\r\n\r\nWhile the previous WebServiceTemplate works as it should (I&#39;m omitting the certificate chain):\r\n\r\n    *** ServerHelloDone\r\n    [read] MD5 and SHA1 hashes:  len = 4\r\n    0000: 0E 00 00 00                                        ....\r\n    matching alias: myalias\r\n    *** Certificate chain\r\n    \r\nCan anyone suggest what am I missing in context configuration?\r\n\r\nThank you in advance for your help!\r\n\r\nPlease let me know if you need some more information...\r\n","title":"WebFlux WebClient not sending certificate","body":"<p>I'm creating a Java client, based on Spring WebFlux, that should send a request to an external endpoint, autenticating through a certificate.\nI did a similar thing using the Spring's WebServiceTemplate, by specifying the certificate in the application.yaml file like the following:</p>\n<pre><code>client:\n  ssl:\n    enabled: true\n    key-store: /myapp/certificate/keystore.p12\n    key-store-password: SUPERSECRET\n</code></pre>\n<p>Then by defining the SSLContext for HttpClient in order to generate the related bean to be used for the proper call.\nHere's an extract of the context configuration:</p>\n<pre><code>private SSLContext sslContext()\n  throws IOException, CertificateException, NoSuchAlgorithmException, KeyStoreException,\n  KeyManagementException, UnrecoverableKeyException {\n\n  return SSLContextBuilder.create()\n    .loadKeyMaterial(new File(keystore), keystorePassword.toCharArray(),\n        keystorePassword.toCharArray()).build();\n}\n</code></pre>\n<p>It turns out that I'm not able to perform the exact same thing by using the WebClient (from WebFlux).\nWhat I did, following various SO responses and guides, is the following:</p>\n<p>Creating the proper SSLContext by loading the same <code>keystore.p12</code> (I intentionally removed the try-catches from the following code to increase readability):</p>\n<pre><code>private WebClient getMtlsWebClient() {\n  HttpClient httpClient = HttpClient.create();\n\n  httpClient.secure(spec -&gt; {\n    KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n    keyStore.load(new FileInputStream(ResourceUtils.getFile(keyStorePath)), keyStorePass.toCharArray());\n\n    // Set up key manager factory to use key-store\n    KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());\n    keyManagerFactory.init(keyStore, keyStorePass.toCharArray());\n    \n    spec.sslContext(SslContextBuilder.forClient()\n        .keyManager(keyManagerFactory)\n        .build());\n  });\n\n  return WebClient\n      .builder()\n      .clientConnector(new ReactorClientHttpConnector(httpClient))\n      .build();\n}\n</code></pre>\n<p>Then simply fire the call like the following:</p>\n<pre><code>return getMtlsWebClient()\n    .post()\n    .uri(externalServiceUrl)\n    .contentType(MediaType.TEXT_XML)\n    .accept(MediaType.TEXT_XML)\n    .acceptCharset(StandardCharsets.UTF_8)\n    .body(Mono.just(request), reqClazz)\n    .retrieve()\n    .bodyToMono(resClazz)\n    .retryWhen(\n        Retry\n            .fixedDelay(3, Duration.ofSeconds(1))\n            .filter(this::isAnyError)\n    ).\n    map(res -&gt; {\n      log.trace(&quot;Response payload: {}&quot;, res);\n      return res;\n    })\n    .onErrorMap(res -&gt; {\n      log.error(&quot;Error response payload: {}&quot;, res);\n      return res;\n    });\n</code></pre>\n<p>Unfortunately what I get as a response is a 403 FORBIDDEN and indeed the handshake log shows the following message:</p>\n<pre><code>*** ServerHelloDone\n[read] MD5 and SHA1 hashes:  len = 4\n0000: 0E 00 00 00                                        ....\nWarning: no suitable certificate found - continuing without client authentication\n*** Certificate chain\n&lt;Empty&gt;\n***\n</code></pre>\n<p>While the previous WebServiceTemplate works as it should (I'm omitting the certificate chain):</p>\n<pre><code>*** ServerHelloDone\n[read] MD5 and SHA1 hashes:  len = 4\n0000: 0E 00 00 00                                        ....\nmatching alias: myalias\n*** Certificate chain\n</code></pre>\n<p>Can anyone suggest what am I missing in context configuration?</p>\n<p>Thank you in advance for your help!</p>\n<p>Please let me know if you need some more information...</p>\n"},{"tags":["java","android","json","retrofit"],"answers":[{"tags":[],"owner":{"account_id":17601943,"reputation":91,"user_id":12771724,"display_name":"Enes Birisik"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690286069,"creation_date":1690286069,"answer_id":76762444,"question_id":76759184,"body_markdown":"I think you can use Interceptor with spring boot. You can check all response with postHandle method.\r\n\r\n\r\nYou can visit this page https://www.tutorialspoint.com/spring_boot/spring_boot_interceptor.htm\r\n","title":"How to check response body value?","body":"<p>I think you can use Interceptor with spring boot. You can check all response with postHandle method.</p>\n<p>You can visit this page <a href=\"https://www.tutorialspoint.com/spring_boot/spring_boot_interceptor.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/spring_boot/spring_boot_interceptor.htm</a></p>\n"}],"owner":{"account_id":29037980,"reputation":13,"user_id":22243408,"display_name":"Pathumi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76762444,"answer_count":1,"score":1,"last_activity_date":1690286069,"creation_date":1690253841,"question_id":76759184,"body_markdown":"Hi i want to check json response id with user login id stored in share preference\r\nhere is my json response\r\n\r\n```\r\n{&quot;code&quot;:1,&quot;message&quot;:&quot;Success&quot;,&quot;result&quot;:[{&quot;id&quot;:&quot;1&quot;,&quot;name&quot;:&quot;Albert Einstein&quot;,&quot;description&quot;:&quot;Albert Einstein was a German-born theoretical physicist.&quot;,&quot;galaxy&quot;:&quot;Cartwheel&quot;,&quot;star&quot;:&quot;0008&quot;,&quot;dob&quot;:&quot;1905-05-13&quot;,&quot;died&quot;:&quot;1973-04-06&quot;}]}\r\n```\r\n\r\nAnd here is where i check response body empty or not\r\n\r\n```\r\n retrievedData.enqueue(new Callback&lt;ResponseModel&gt;() {\r\n            @Override\r\n            public void onResponse(Call&lt;ResponseModel&gt; call, Response&lt;ResponseModel&gt;\r\n                    response) {\r\n                if(response == null || response.body() == null){\r\n                    showInfoDialog(ScientistsActivity.this,&quot;ERROR&quot;,&quot;Response or Response Body is null. \\n Recheck Your PHP code.&quot;);\r\n                    return;\r\n                }\r\n                if(response == null || response.body() == null){\r\n                    showInfoDialog(ScientistsActivity.this,&quot;ERROR&quot;,&quot;Response or Response Body is null. \\n Recheck Your PHP code.&quot;);\r\n                    return;\r\n                }\r\n                List&lt;Scientist&gt; currentPageScientists = response.body().getResult();\r\n\r\n                if (currentPageScientists != null &amp;&amp; currentPageScientists.size() &gt; 0) {\r\n                    if (action.equalsIgnoreCase(&quot;GET_PAGINATED_SEARCH&quot;)) {\r\n                        allPagesScientists.clear();\r\n                    }\r\n                    allPagesScientists.addAll(currentPageScientists);\r\n                    // show(ScientistsActivity.this,currentPageScientists.size()+&quot; Scientists Found&quot;);\r\n                } else {\r\n                    if (action.equalsIgnoreCase(&quot;GET_PAGINATED_SEARCH&quot;)) {\r\n                        allPagesScientists.clear();\r\n                    }\r\n                    show(ScientistsActivity.this,&quot;Hey! Reached End. No more Found&quot;);\r\n                }\r\n                mAdapter.notifyDataSetChanged();\r\n                hideProgressBar(mProgressBar);\r\n            }\r\n```\r\n\r\n\r\nI dont have any idea about how to do it","title":"How to check response body value?","body":"<p>Hi i want to check json response id with user login id stored in share preference\nhere is my json response</p>\n<pre><code>{&quot;code&quot;:1,&quot;message&quot;:&quot;Success&quot;,&quot;result&quot;:[{&quot;id&quot;:&quot;1&quot;,&quot;name&quot;:&quot;Albert Einstein&quot;,&quot;description&quot;:&quot;Albert Einstein was a German-born theoretical physicist.&quot;,&quot;galaxy&quot;:&quot;Cartwheel&quot;,&quot;star&quot;:&quot;0008&quot;,&quot;dob&quot;:&quot;1905-05-13&quot;,&quot;died&quot;:&quot;1973-04-06&quot;}]}\n</code></pre>\n<p>And here is where i check response body empty or not</p>\n<pre><code> retrievedData.enqueue(new Callback&lt;ResponseModel&gt;() {\n            @Override\n            public void onResponse(Call&lt;ResponseModel&gt; call, Response&lt;ResponseModel&gt;\n                    response) {\n                if(response == null || response.body() == null){\n                    showInfoDialog(ScientistsActivity.this,&quot;ERROR&quot;,&quot;Response or Response Body is null. \\n Recheck Your PHP code.&quot;);\n                    return;\n                }\n                if(response == null || response.body() == null){\n                    showInfoDialog(ScientistsActivity.this,&quot;ERROR&quot;,&quot;Response or Response Body is null. \\n Recheck Your PHP code.&quot;);\n                    return;\n                }\n                List&lt;Scientist&gt; currentPageScientists = response.body().getResult();\n\n                if (currentPageScientists != null &amp;&amp; currentPageScientists.size() &gt; 0) {\n                    if (action.equalsIgnoreCase(&quot;GET_PAGINATED_SEARCH&quot;)) {\n                        allPagesScientists.clear();\n                    }\n                    allPagesScientists.addAll(currentPageScientists);\n                    // show(ScientistsActivity.this,currentPageScientists.size()+&quot; Scientists Found&quot;);\n                } else {\n                    if (action.equalsIgnoreCase(&quot;GET_PAGINATED_SEARCH&quot;)) {\n                        allPagesScientists.clear();\n                    }\n                    show(ScientistsActivity.this,&quot;Hey! Reached End. No more Found&quot;);\n                }\n                mAdapter.notifyDataSetChanged();\n                hideProgressBar(mProgressBar);\n            }\n</code></pre>\n<p>I dont have any idea about how to do it</p>\n"},{"tags":["java","jquery","postgresql","spring-boot"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1690284877,"post_id":76762026,"comment_id":135328985,"body_markdown":"Hello and welcome. As you are using Spring Boot and Hibernate already there is no need to implement SQL queries yourself. There is a Spring Boot framework called JPA. It allows to map the database tables to Java objects called entities. This entities can have relationships to each others. Just have a look to any tutorial or blog like Baeldung for details and examples.","body":"Hello and welcome. As you are using Spring Boot and Hibernate already there is no need to implement SQL queries yourself. There is a Spring Boot framework called JPA. It allows to map the database tables to Java objects called entities. This entities can have relationships to each others. Just have a look to any tutorial or blog like Baeldung for details and examples."}],"answers":[{"tags":[],"owner":{"account_id":18178272,"reputation":55,"user_id":13226583,"display_name":"Rishabh Kabra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690285671,"creation_date":1690285671,"answer_id":76762397,"question_id":76762026,"body_markdown":"Hopefully you have an experience with JPA. If not, then please follow below link.\r\n\r\n[https://spring.io/guides/gs/accessing-data-jpa/][1]\r\n\r\nAll you need to do is create a repository which will fetch data from Database. You will require to write query in Repository using @Query annotation. Below link will guide you on using Query with JPA.\r\n[https://www.baeldung.com/spring-data-jpa-query][2]\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/accessing-data-jpa/\r\n  [2]: https://www.baeldung.com/spring-data-jpa-query","title":"Query at Spring Boot Project when data base is PostgreSQL","body":"<p>Hopefully you have an experience with JPA. If not, then please follow below link.</p>\n<p><a href=\"https://spring.io/guides/gs/accessing-data-jpa/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/accessing-data-jpa/</a></p>\n<p>All you need to do is create a repository which will fetch data from Database. You will require to write query in Repository using @Query annotation. Below link will guide you on using Query with JPA.\n<a href=\"https://www.baeldung.com/spring-data-jpa-query\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-jpa-query</a></p>\n"}],"owner":{"account_id":25430473,"reputation":1,"user_id":19234975,"display_name":"Yakup &#214;zdemir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690285671,"creation_date":1690282702,"question_id":76762026,"body_markdown":"I am working on a beginner level Java Spring Boot project. My java application is connected to my database with hibernate which is PostgreSQL. `&quot;POST&quot;` and `&quot;GET&quot;` methods are working without any problem. Now I have to join some variables from `&quot;a&quot;` class to `&quot;b&quot;` class. Based on my researches, I saw that I have to use a method called inner join. In order to do that I have to write a query. Where should I write the query. \r\n\r\nShould I write the query at db query section or inside the controller class of Java Project?\r\n\r\nI wrote the necessary query for joining the tables but I don&#39;t know where to write it on the project.","title":"Query at Spring Boot Project when data base is PostgreSQL","body":"<p>I am working on a beginner level Java Spring Boot project. My java application is connected to my database with hibernate which is PostgreSQL. <code>&quot;POST&quot;</code> and <code>&quot;GET&quot;</code> methods are working without any problem. Now I have to join some variables from <code>&quot;a&quot;</code> class to <code>&quot;b&quot;</code> class. Based on my researches, I saw that I have to use a method called inner join. In order to do that I have to write a query. Where should I write the query.</p>\n<p>Should I write the query at db query section or inside the controller class of Java Project?</p>\n<p>I wrote the necessary query for joining the tables but I don't know where to write it on the project.</p>\n"},{"tags":["java","python","ubuntu","debian","operating-system"],"comments":[{"owner":{"account_id":70910,"reputation":22937,"user_id":205212,"accept_rate":40,"display_name":"ʇsәɹoɈ"},"score":8,"creation_date":1275851791,"post_id":2985426,"comment_id":3047628,"body_markdown":"I disagree with closing this as subjective and argumentative.  There are some real, objective (if subtle) differences between the two distributions, and none of the answers I&#39;ve read so far are argumentative.","body":"I disagree with closing this as subjective and argumentative.  There are some real, objective (if subtle) differences between the two distributions, and none of the answers I&#39;ve read so far are argumentative."},{"owner":{"account_id":29634,"reputation":12494,"user_id":80243,"accept_rate":46,"display_name":"L̲̳o̲̳̳n̲̳̳g̲̳̳p̲̳o̲̳̳k̲̳̳e̲̳̳"},"score":0,"creation_date":1275852207,"post_id":2985426,"comment_id":3047661,"body_markdown":"@Forest: no, every *nix distribution is almost exactly the same.","body":"@Forest: no, every *nix distribution is almost exactly the same."},{"owner":{"account_id":131131,"reputation":4248,"user_id":330913,"accept_rate":87,"display_name":"NoozNooz42"},"score":1,"creation_date":1275878478,"post_id":2985426,"comment_id":3049284,"body_markdown":"@Longpoke: I&#39;ve used Slackware in the mid-90s, then Debian, Corel Linux, Red Hat, Fedora, Ubuntu and now back to Debian.  There&#39;s **NO WAY** all Linux distribution are almost exactly the same.  Let alone every *nix distribution.  (OS X is fully POSIX compliant Un*x and you&#39;re smoking heavy stuff if you think OS X, Open Solaris, and all the Linux distros are *almost exactly the same*)","body":"@Longpoke: I&#39;ve used Slackware in the mid-90s, then Debian, Corel Linux, Red Hat, Fedora, Ubuntu and now back to Debian.  There&#39;s <b>NO WAY</b> all Linux distribution are almost exactly the same.  Let alone every <i>nix distribution.  (OS X is fully POSIX compliant Un</i>x and you&#39;re smoking heavy stuff if you think OS X, Open Solaris, and all the Linux distros are <i>almost exactly the same</i>)"},{"owner":{"account_id":131131,"reputation":4248,"user_id":330913,"accept_rate":87,"display_name":"NoozNooz42"},"score":0,"creation_date":1275878577,"post_id":2985426,"comment_id":3049289,"body_markdown":"@Longpoke: Read Forest&#39;s answer (+1 to Forest btw)","body":"@Longpoke: Read Forest&#39;s answer (+1 to Forest btw)"},{"owner":{"account_id":29634,"reputation":12494,"user_id":80243,"accept_rate":46,"display_name":"L̲̳o̲̳̳n̲̳̳g̲̳̳p̲̳o̲̳̳k̲̳̳e̲̳̳"},"score":0,"creation_date":1275880704,"post_id":2985426,"comment_id":3049378,"body_markdown":"nah, see Bryan Oakley&#39;s answer.","body":"nah, see Bryan Oakley&#39;s answer."},{"owner":{"account_id":3888822,"reputation":1032,"user_id":3351881,"display_name":"superUser"},"score":0,"creation_date":1473628989,"post_id":2985426,"comment_id":66203875,"body_markdown":"Debian is more stable... ubuntu not that much... if you are somebody who likes stability... then choose debian","body":"Debian is more stable... ubuntu not that much... if you are somebody who likes stability... then choose debian"}],"answers":[{"tags":[],"owner":{"account_id":5686,"reputation":8878,"user_id":9296,"accept_rate":81,"display_name":"Tzury Bar Yochay"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1275850168,"creation_date":1275850168,"answer_id":2985442,"question_id":2985426,"body_markdown":"java and python would most likely run the same on both.\r\n\r\nWith Ubuntu you get additional space of support and active community, and perhaps larger user base. \r\n\r\nSo if and when you face a particular problem, chances are with Ubuntu, the solution will appear faster. \r\n\r\n(although, whatever works on this should work on the other as well in theory) ","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>java and python would most likely run the same on both.</p>\n\n<p>With Ubuntu you get additional space of support and active community, and perhaps larger user base. </p>\n\n<p>So if and when you face a particular problem, chances are with Ubuntu, the solution will appear faster. </p>\n\n<p>(although, whatever works on this should work on the other as well in theory) </p>\n"},{"tags":[],"owner":{"account_id":147367,"reputation":43816,"user_id":358438,"accept_rate":73,"display_name":"Skizit"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1275850249,"creation_date":1275850249,"answer_id":2985450,"question_id":2985426,"body_markdown":"Both use Debian packages and Ubuntu is based on Debian but is more user friendly. Everything yo can do on one you can do on the other. I&#39;d recommend Ubuntu if your new to linux on a Desktop. Though when it comes to servers I&#39;d recommend Debian as it has less stuff &quot;taken out&quot; basically.","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>Both use Debian packages and Ubuntu is based on Debian but is more user friendly. Everything yo can do on one you can do on the other. I'd recommend Ubuntu if your new to linux on a Desktop. Though when it comes to servers I'd recommend Debian as it has less stuff \"taken out\" basically.</p>\n"},{"tags":[],"owner":{"account_id":145570,"reputation":3550,"user_id":355461,"display_name":"Marc"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1275850307,"creation_date":1275850307,"answer_id":2985456,"question_id":2985426,"body_markdown":"In Ubuntu it is a bit easier to install packages for Java development, but it doesn&#39;t really matter that much. Remember that Ubuntu is based on Debian, so it works the same. Ubuntu just adds more user-friendly GUI&#39;s.","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>In Ubuntu it is a bit easier to install packages for Java development, but it doesn't really matter that much. Remember that Ubuntu is based on Debian, so it works the same. Ubuntu just adds more user-friendly GUI's.</p>\n"},{"comments":[{"owner":{"account_id":5605185,"reputation":702,"user_id":4440053,"display_name":"mazunki"},"score":0,"creation_date":1616498242,"post_id":2985463,"comment_id":118014963,"body_markdown":"Eleven years later, I would like to introduce Mint (Ubuntu-based), Solus (independent), and arguably Manjaro (Arch-based) into the list of *the* most user-friendly systems.","body":"Eleven years later, I would like to introduce Mint (Ubuntu-based), Solus (independent), and arguably Manjaro (Arch-based) into the list of <i>the</i> most user-friendly systems."}],"tags":[],"owner":{"account_id":127804,"reputation":712,"user_id":325228,"accept_rate":89,"display_name":"mmirate"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1275850362,"creation_date":1275850362,"answer_id":2985463,"question_id":2985426,"body_markdown":"Ubuntu is the more user-friendly of the two (I think Ubuntu is actually one of **the** most newbie-friendly Linux distros), so if you are new to Linux, Ubuntu is the way to go.  Otherwise, the packages are mostly the same except for branding, so it&#39;s pretty much your choice.","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>Ubuntu is the more user-friendly of the two (I think Ubuntu is actually one of <strong>the</strong> most newbie-friendly Linux distros), so if you are new to Linux, Ubuntu is the way to go.  Otherwise, the packages are mostly the same except for branding, so it's pretty much your choice.</p>\n"},{"tags":[],"owner":{"account_id":4815,"reputation":374344,"user_id":7432,"accept_rate":94,"display_name":"Bryan Oakley"},"comment_count":0,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1275850421,"creation_date":1275850421,"answer_id":2985472,"question_id":2985426,"body_markdown":"Neither is better. They both support the same tools and libraries. They are both linux. Anything and everything you can do on one you can do on the other. \r\n","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>Neither is better. They both support the same tools and libraries. They are both linux. Anything and everything you can do on one you can do on the other. </p>\n"},{"tags":[],"owner":{"account_id":70910,"reputation":22937,"user_id":205212,"accept_rate":40,"display_name":"ʇsәɹoɈ"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1690285564,"creation_date":1275851442,"answer_id":2985533,"question_id":2985426,"body_markdown":"Since Ubuntu is based on Debian, development is almost exactly the same for both.  They&#39;re both quite suitable for server machines.  The fundamental difference is that Debian follows a Free software ideology, while Ubuntu sacrifices that purity for practicality when no Free equivalent exists for important proprietary software.\r\n\r\nIf you choose Debian, you will have a choice of distribution series (&quot;unstable&quot; / &quot;testing&quot;) that may get you newer releases of pre-packaged software a few months sooner than Ubuntu.  Unless your development projects require bleeding-edge kernel or support libraries, this probably won&#39;t matter to you at all.\r\n\r\nIf you choose Ubuntu, certain proprietary software might be easier to install because it will be available through package repositories.  For example, nVidia&#39;s proprietary video driver.  That&#39;s not to say you can&#39;t make such things work on Debian; they will simply be easier on Ubuntu.\r\n\r\nI used Ubuntu for years, for these reasons:\r\n\r\n- Ubuntu has a free multi-platform build farm and software hosting system called [Personal Package Archives][1].  (Only to be used for freely redistributable software, of course.)\r\n- The Ubuntu bug reporting/tracking system is far more user friendly than Debian&#39;s.\r\n- Software packages I develop are guaranteed to work (with no extra dependency testing) for Ubuntu users, of which there are many.\r\n\r\nAfter replacing my Nvidia GPU with an AMD (for better drivers) and finding package repository tools that fit my workflow, I eventually switched to Debian.\r\n\r\n  [1]: https://help.launchpad.net/Packaging/PPA\r\n","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>Since Ubuntu is based on Debian, development is almost exactly the same for both.  They're both quite suitable for server machines.  The fundamental difference is that Debian follows a Free software ideology, while Ubuntu sacrifices that purity for practicality when no Free equivalent exists for important proprietary software.</p>\n<p>If you choose Debian, you will have a choice of distribution series (&quot;unstable&quot; / &quot;testing&quot;) that may get you newer releases of pre-packaged software a few months sooner than Ubuntu.  Unless your development projects require bleeding-edge kernel or support libraries, this probably won't matter to you at all.</p>\n<p>If you choose Ubuntu, certain proprietary software might be easier to install because it will be available through package repositories.  For example, nVidia's proprietary video driver.  That's not to say you can't make such things work on Debian; they will simply be easier on Ubuntu.</p>\n<p>I used Ubuntu for years, for these reasons:</p>\n<ul>\n<li>Ubuntu has a free multi-platform build farm and software hosting system called <a href=\"https://help.launchpad.net/Packaging/PPA\" rel=\"nofollow noreferrer\">Personal Package Archives</a>.  (Only to be used for freely redistributable software, of course.)</li>\n<li>The Ubuntu bug reporting/tracking system is far more user friendly than Debian's.</li>\n<li>Software packages I develop are guaranteed to work (with no extra dependency testing) for Ubuntu users, of which there are many.</li>\n</ul>\n<p>After replacing my Nvidia GPU with an AMD (for better drivers) and finding package repository tools that fit my workflow, I eventually switched to Debian.</p>\n"}],"owner":{"account_id":109465,"reputation":7286,"user_id":290036,"accept_rate":89,"display_name":"Horatiu Jeflea"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24104,"favorite_count":0,"down_vote_count":1,"up_vote_count":12,"closed_date":1275850650,"accepted_answer_id":2985533,"answer_count":6,"score":11,"last_activity_date":1690285564,"creation_date":1275849898,"question_id":2985426,"body_markdown":"Are there any real differences between them?\r\n\r\nI want to program in java and python. And of corse be a normal user: internet, etc\r\n\r\nWhich one will give me less headaches/more satisfaction ? \r\n\r\nAnd which is better for a server machine ?\r\n\r\nThank you","title":"Which os is better for development : Debian or Ubuntu?","body":"<p>Are there any real differences between them?</p>\n\n<p>I want to program in java and python. And of corse be a normal user: internet, etc</p>\n\n<p>Which one will give me less headaches/more satisfaction ? </p>\n\n<p>And which is better for a server machine ?</p>\n\n<p>Thank you</p>\n"},{"tags":["java","sql","database","postgresql","hashmap"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1575537651,"post_id":59191605,"comment_id":104602483,"body_markdown":"Write a simple query, execute it via JDBC and create the `Map&lt;String, List&lt;String&gt;&gt;` from the `ResultSet` if you can&#39;t / mustn&#39;t use frameworks.","body":"Write a simple query, execute it via JDBC and create the <code>Map&lt;String, List&lt;String&gt;&gt;</code> from the <code>ResultSet</code> if you can&#39;t / mustn&#39;t use frameworks."}],"answers":[{"comments":[{"owner":{"account_id":8304691,"reputation":91,"user_id":6242206,"display_name":"sonan"},"score":0,"creation_date":1575537458,"post_id":59191652,"comment_id":104602395,"body_markdown":"I use java.sql package to handle database operations. I cant use JPA. I am trying to achieve this using only sql statements and java manipulation.","body":"I use java.sql package to handle database operations. I cant use JPA. I am trying to achieve this using only sql statements and java manipulation."}],"tags":[],"owner":{"account_id":11641764,"reputation":7,"user_id":8525935,"display_name":"Ivan Vishnyak"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575538018,"creation_date":1575536972,"answer_id":59191652,"question_id":59191605,"body_markdown":"you can use jdbc, example:\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n        try (Connection connection = DriverManager.getConnection(&quot;jdbc:postgresql://localhost:5432/example&quot;, &quot;postgres&quot;, &quot;postgres&quot;)) {\r\n\r\n            Statement statement = connection.createStatement();\r\n\r\n            ResultSet resultSet = statement.executeQuery(&quot;SELECT * FROM public.parentAndChildrens&quot;);\r\n            while (resultSet.next()) {\r\n                System.out.println(&quot;parent is: &quot; + resultSet.getString(&quot;ParentName&quot;) + &quot;childrenis: &quot; + resultSet.getString(&quot;ChildrenName&quot;));\r\n            }    \r\n        } catch (SQLException e) {\r\n            System.out.println(&quot;Connection failure.&quot;);\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nAnd than you can fill your map.","title":"Java + Postgresql : How to store Parent and List of all children in a HashMap&lt;String,ArrayList&lt;String&gt;&gt;","body":"<p>you can use jdbc, example:</p>\n\n<pre><code>public static void main(String[] args) {\n    Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n    try (Connection connection = DriverManager.getConnection(\"jdbc:postgresql://localhost:5432/example\", \"postgres\", \"postgres\")) {\n\n        Statement statement = connection.createStatement();\n\n        ResultSet resultSet = statement.executeQuery(\"SELECT * FROM public.parentAndChildrens\");\n        while (resultSet.next()) {\n            System.out.println(\"parent is: \" + resultSet.getString(\"ParentName\") + \"childrenis: \" + resultSet.getString(\"ChildrenName\"));\n        }    \n    } catch (SQLException e) {\n        System.out.println(\"Connection failure.\");\n        e.printStackTrace();\n    }\n}\n</code></pre>\n\n<p>And than you can fill your map.</p>\n"},{"comments":[{"owner":{"account_id":8304691,"reputation":91,"user_id":6242206,"display_name":"sonan"},"score":0,"creation_date":1575538319,"post_id":59191872,"comment_id":104602827,"body_markdown":"1) I am pretty sure that I wont have memory issues, as the input is a result of  UI elements selection by click. (wont reach even 100 in most cases). 2) I am trying to find out if it is more efficient to write a simple query and transform data using java loops, or using a more accurate query to bring data back formed as I want.","body":"1) I am pretty sure that I wont have memory issues, as the input is a result of  UI elements selection by click. (wont reach even 100 in most cases). 2) I am trying to find out if it is more efficient to write a simple query and transform data using java loops, or using a more accurate query to bring data back formed as I want."}],"tags":[],"owner":{"account_id":43555,"reputation":1891,"user_id":127400,"accept_rate":88,"display_name":"Augunrik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1575537845,"creation_date":1575537845,"answer_id":59191872,"question_id":59191605,"body_markdown":"So, in the end you always need to create the objects (if you are not using JPA mapping). Therefore there is not a real &quot;do it in java or sql&quot; difference here.\r\nYou should also be aware of how much data you are selecting, you can easily reach the memory limit of your laptop or server.\r\n\r\nI would suggest you select pages of data from the database and transform them in your needed object structure.\r\n\r\nThe select would something like this:\r\n\r\n    SELECT * FROM parent, child WHERE child.parent_id = parent.id ORDER BY parent.id LIMIT 0, 100\r\n\r\nYou would then have to write Java code with loops over the returned results and only stops, if there are no more results returned.\r\n\r\nIf you need more, then please ask. You are very vague with your question on how the result should look like. (Do you need for SQL or Java Code? Do you need help with the general algorithm? How much data do we speak of?)","title":"Java + Postgresql : How to store Parent and List of all children in a HashMap&lt;String,ArrayList&lt;String&gt;&gt;","body":"<p>So, in the end you always need to create the objects (if you are not using JPA mapping). Therefore there is not a real \"do it in java or sql\" difference here.\nYou should also be aware of how much data you are selecting, you can easily reach the memory limit of your laptop or server.</p>\n\n<p>I would suggest you select pages of data from the database and transform them in your needed object structure.</p>\n\n<p>The select would something like this:</p>\n\n<pre><code>SELECT * FROM parent, child WHERE child.parent_id = parent.id ORDER BY parent.id LIMIT 0, 100\n</code></pre>\n\n<p>You would then have to write Java code with loops over the returned results and only stops, if there are no more results returned.</p>\n\n<p>If you need more, then please ask. You are very vague with your question on how the result should look like. (Do you need for SQL or Java Code? Do you need help with the general algorithm? How much data do we speak of?)</p>\n"},{"comments":[{"owner":{"account_id":8304691,"reputation":91,"user_id":6242206,"display_name":"sonan"},"score":0,"creation_date":1575540726,"post_id":59192000,"comment_id":104604160,"body_markdown":"Thanks a lot for your help! Following this approach I managed to create the HashMap I needed. It seems that it is also efficient since .containsKey and .get Method have O(1) time complexity right?","body":"Thanks a lot for your help! Following this approach I managed to create the HashMap I needed. It seems that it is also efficient since .containsKey and .get Method have O(1) time complexity right?"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1575540872,"post_id":59192000,"comment_id":104604233,"body_markdown":"@leo.nanos The efficiency should be ok, but might be optimizable. Optimize your query, too, in order to achieve optimal efficiency. Glad this helped you...","body":"@leo.nanos The efficiency should be ok, but might be optimizable. Optimize your query, too, in order to achieve optimal efficiency. Glad this helped you..."}],"tags":[],"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1575540648,"creation_date":1575538298,"answer_id":59192000,"question_id":59191605,"body_markdown":"**Concerning your second option:  \r\nGet all data from the database with a simple query and map the data in Java**\r\n\r\nYou can do it like this (read the code comments):\r\n\r\n```Java\r\npublic static void main(String[] args) {\r\n\t// provide a query as String\r\n\tString query = &quot;SELECT ParentName, ChildName FROM some_table&quot;;\r\n\t// provide the data structure\r\n\tMap&lt;String, List&lt;String&gt;&gt; results = new HashMap&lt;&gt;();\r\n\t// connect to your database\r\n\tConnection connection; // this has to be created using a suitable JDBC implementation\r\n\t\r\n\ttry (PreparedStatement ps = connection.prepareStatement(query)) {\r\n\t\tResultSet rs = ps.executeQuery();\r\n\t\t\r\n\t\twhile (rs.next()) {\r\n\t\t\tString parentName = rs.getString(1);\r\n\t\t\tString childName = rs.getString(2);\r\n\t\t\t\r\n\t\t\t// add them to the map\r\n\t\t\tif (results.containsKey(parentName)) {\r\n\t\t\t\t/* \r\n\t\t\t\t * if the key already exists in the map, \r\n\t\t\t\t * just add the current name to its value(s)\r\n\t\t\t\t */\r\n\t\t\t\tresults.get(parentName).add(childName);\r\n\t\t\t} else {\r\n\t\t\t\t// create a new list as the value for the new key\r\n\t\t\t\tList&lt;String&gt; childNames = new ArrayList&lt;&gt;();\r\n\t\t\t\t// add the current child name to it\r\n\t\t\t\tchildNames.add(childName);\r\n\t\t\t\t// and put the new key and value in the map\r\n\t\t\t\tresults.put(parentName, childNames);\r\n\t\t\t}\r\n\t\t}\r\n\t} catch (SQLException e) {\r\n\t\te.printStackTrace();\r\n\t}\r\n\t\r\n\t// print the results\r\n\tresults.forEach((p, c) -&gt; System.out.println(p + &quot;: &quot; + String.join(&quot;, &quot;, c)));\r\n}\r\n```","title":"Java + Postgresql : How to store Parent and List of all children in a HashMap&lt;String,ArrayList&lt;String&gt;&gt;","body":"<p><strong>Concerning your second option:<br>\nGet all data from the database with a simple query and map the data in Java</strong></p>\n\n<p>You can do it like this (read the code comments):</p>\n\n<pre><code>public static void main(String[] args) {\n    // provide a query as String\n    String query = \"SELECT ParentName, ChildName FROM some_table\";\n    // provide the data structure\n    Map&lt;String, List&lt;String&gt;&gt; results = new HashMap&lt;&gt;();\n    // connect to your database\n    Connection connection; // this has to be created using a suitable JDBC implementation\n\n    try (PreparedStatement ps = connection.prepareStatement(query)) {\n        ResultSet rs = ps.executeQuery();\n\n        while (rs.next()) {\n            String parentName = rs.getString(1);\n            String childName = rs.getString(2);\n\n            // add them to the map\n            if (results.containsKey(parentName)) {\n                /* \n                 * if the key already exists in the map, \n                 * just add the current name to its value(s)\n                 */\n                results.get(parentName).add(childName);\n            } else {\n                // create a new list as the value for the new key\n                List&lt;String&gt; childNames = new ArrayList&lt;&gt;();\n                // add the current child name to it\n                childNames.add(childName);\n                // and put the new key and value in the map\n                results.put(parentName, childNames);\n            }\n        }\n    } catch (SQLException e) {\n        e.printStackTrace();\n    }\n\n    // print the results\n    results.forEach((p, c) -&gt; System.out.println(p + \": \" + String.join(\", \", c)));\n}\n</code></pre>\n"}],"owner":{"account_id":8304691,"reputation":91,"user_id":6242206,"display_name":"sonan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":763,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":59192000,"answer_count":3,"score":1,"last_activity_date":1690285560,"creation_date":1575536822,"question_id":59191605,"body_markdown":"I have an sql table Children :\r\n\r\n```lang-none\r\n| ParentName | ChildrenName |\r\n ———————————————————————————\r\n| parent 1   | child 1      |\r\n| parent 1   | child 2      |\r\n| parent 2   | child 3      |\r\n| parent 1   | child 4      |\r\n| ...        | ....         |\r\n```\r\n\r\nMy goal is to construct a java `HashMap&lt;String , ArrayList&lt;String&gt;&gt;` that contains ParentName as key and a list of `ChildrenName` as value.\r\n\r\nShould I perform the processing by using an sql query? Or select all data and process it via java?","title":"Java + Postgresql : How to store Parent and List of all children in a HashMap&lt;String,ArrayList&lt;String&gt;&gt;","body":"<p>I have an sql table Children :</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>| ParentName | ChildrenName |\n ———————————————————————————\n| parent 1   | child 1      |\n| parent 1   | child 2      |\n| parent 2   | child 3      |\n| parent 1   | child 4      |\n| ...        | ....         |\n</code></pre>\n\n<p>My goal is to construct a java <code>HashMap&lt;String , ArrayList&lt;String&gt;&gt;</code> that contains ParentName as key and a list of <code>ChildrenName</code> as value.</p>\n\n<p>Should I perform the processing by using an sql query? Or select all data and process it via java?</p>\n"},{"tags":["java","printing","dialog"],"answers":[{"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690285547,"creation_date":1690285547,"answer_id":76762382,"question_id":76760674,"body_markdown":"The following worked for me, since I have a printer called &quot;PDF&quot;. It would seem that I cannot choose its output file name, but that might not be the case for you, but it *does* save the file, and *without* showing a dialog:\r\n\r\n```\r\nimport java.awt.print.PrinterJob;\r\nimport javax.print.PrintService;\r\nimport javax.print.DocFlavor;\r\nimport javax.print.DocPrintJob;\r\nimport javax.print.Doc;\r\nimport javax.print.SimpleDoc;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.Arrays;\r\nimport java.io.InputStream;\r\nimport javax.print.attribute.PrintRequestAttributeSet;\r\nimport javax.print.attribute.HashPrintRequestAttributeSet;\r\nimport javax.print.attribute.standard.Copies;\r\nimport javax.print.attribute.standard.MediaSizeName;\r\nimport javax.print.attribute.Attribute;\r\n\r\npublic class PdfPrinter {\r\n    public static void main(String[] args) throws Exception {\r\n        final String PDF_SERVICE = &quot;PDF&quot;;\r\n        PrintService[] services = PrinterJob.lookupPrintServices();\r\n        PrintService pdfService = Arrays.stream(services).filter(s -&gt; PDF_SERVICE.equals(s.getName())).findFirst()\r\n                .orElseThrow();\r\n        /*\r\n         If you want some info\r\n        System.out.println(pdfService.getAttributes());\r\n        Attribute[] attrs = pdfService.getAttributes().toArray();\r\n        Arrays.stream(attrs).\r\n            forEach(a -&gt;System.out.printf(&quot;%s=%s%n&quot;, a.getName(), a));\r\n        */\r\n        try (InputStream fis = Files.newInputStream(Path.of(args[0]))) {\r\n            DocFlavor flavor = DocFlavor.INPUT_STREAM.PDF;\r\n            DocPrintJob job = pdfService.createPrintJob();\r\n            PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\r\n            aset.add(new Copies(1));\r\n            aset.add(MediaSizeName.ISO_A4);\r\n            Doc doc = new SimpleDoc(fis, flavor, null);\r\n            job.print(doc, aset);\r\n        }\r\n\r\n    }\r\n}\r\n```","title":"Virtual standard printer without dialog","body":"<p>The following worked for me, since I have a printer called &quot;PDF&quot;. It would seem that I cannot choose its output file name, but that might not be the case for you, but it <em>does</em> save the file, and <em>without</em> showing a dialog:</p>\n<pre><code>import java.awt.print.PrinterJob;\nimport javax.print.PrintService;\nimport javax.print.DocFlavor;\nimport javax.print.DocPrintJob;\nimport javax.print.Doc;\nimport javax.print.SimpleDoc;\nimport java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Arrays;\nimport java.io.InputStream;\nimport javax.print.attribute.PrintRequestAttributeSet;\nimport javax.print.attribute.HashPrintRequestAttributeSet;\nimport javax.print.attribute.standard.Copies;\nimport javax.print.attribute.standard.MediaSizeName;\nimport javax.print.attribute.Attribute;\n\npublic class PdfPrinter {\n    public static void main(String[] args) throws Exception {\n        final String PDF_SERVICE = &quot;PDF&quot;;\n        PrintService[] services = PrinterJob.lookupPrintServices();\n        PrintService pdfService = Arrays.stream(services).filter(s -&gt; PDF_SERVICE.equals(s.getName())).findFirst()\n                .orElseThrow();\n        /*\n         If you want some info\n        System.out.println(pdfService.getAttributes());\n        Attribute[] attrs = pdfService.getAttributes().toArray();\n        Arrays.stream(attrs).\n            forEach(a -&gt;System.out.printf(&quot;%s=%s%n&quot;, a.getName(), a));\n        */\n        try (InputStream fis = Files.newInputStream(Path.of(args[0]))) {\n            DocFlavor flavor = DocFlavor.INPUT_STREAM.PDF;\n            DocPrintJob job = pdfService.createPrintJob();\n            PrintRequestAttributeSet aset = new HashPrintRequestAttributeSet();\n            aset.add(new Copies(1));\n            aset.add(MediaSizeName.ISO_A4);\n            Doc doc = new SimpleDoc(fis, flavor, null);\n            job.print(doc, aset);\n        }\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18194209,"reputation":15,"user_id":13239577,"display_name":"ralle"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690285547,"creation_date":1690272618,"question_id":76760674,"body_markdown":"I would like to write a program that uses the default printer from the system (in this case a virtual PDF printer). The program should print one file (= inputFilePath).  After printing a new PDF file shall be created (= outputFilePath).\r\n\r\nWith all attempts I always get a dialog, which I don&#39;t want. Or printing with the virtual printer does not work.\r\n\r\nSo far I have experimented a lot with the class &quot;PrintJob&quot;, but have not been able to get anything usable. Currently the code below gives the best result (unfortunately also with dialog). \r\n\r\n  \r\n\r\n\r\n\r\n\r\n    \tpublic static void main(String[] args) throws Exception {\r\n\t\t\tString inputFilePath = &quot;C://TEST//test.msg&quot;;\r\n\t\t\tString outputFilePath =&quot;C://TEST//test.pdf&quot;;\r\n\t\t \tDesktop desktop = Desktop.getDesktop();\r\n \r\n\t\t \tdesktop.print(new File(inputFilePath));\r\n         \r\n         \tSystem.exit(0);\r\n\t\t}\r\n\r\nbest regards","title":"Virtual standard printer without dialog","body":"<p>I would like to write a program that uses the default printer from the system (in this case a virtual PDF printer). The program should print one file (= inputFilePath).  After printing a new PDF file shall be created (= outputFilePath).</p>\n<p>With all attempts I always get a dialog, which I don't want. Or printing with the virtual printer does not work.</p>\n<p>So far I have experimented a lot with the class &quot;PrintJob&quot;, but have not been able to get anything usable. Currently the code below gives the best result (unfortunately also with dialog).</p>\n<pre><code>    public static void main(String[] args) throws Exception {\n        String inputFilePath = &quot;C://TEST//test.msg&quot;;\n        String outputFilePath =&quot;C://TEST//test.pdf&quot;;\n        Desktop desktop = Desktop.getDesktop();\n\n        desktop.print(new File(inputFilePath));\n     \n        System.exit(0);\n    }\n</code></pre>\n<p>best regards</p>\n"},{"tags":["java","android","firebase","retrofit2"],"comments":[{"owner":{"account_id":6770336,"reputation":1873,"user_id":5213857,"display_name":"Swayangjit"},"score":0,"creation_date":1592149574,"post_id":62374704,"comment_id":110314940,"body_markdown":"Can you please let us know what is this Response and Pengirim class ?","body":"Can you please let us know what is this Response and Pengirim class ?"}],"answers":[{"tags":[],"owner":{"account_id":18803074,"reputation":55,"user_id":13712998,"display_name":"Azizah"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1592200999,"creation_date":1592200999,"answer_id":62382254,"question_id":62374704,"body_markdown":"my problem solved, I make mistake in the code\r\n\r\n    @Override\r\n    public void onResponse(Call&lt;Response&gt; call, Response&lt;Response&gt; response) {\r\n    Toast.makeText(ChatAct.this, &quot;&quot;+response.message(), Toast.LENGTH_SHORT).show();\r\n     }\r\n\r\nCall&lt;Response&gt; replace to Call&lt;Respon&gt; because the class named Respon not Response.","title":"java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)","body":"<p>my problem solved, I make mistake in the code</p>\n\n<pre><code>@Override\npublic void onResponse(Call&lt;Response&gt; call, Response&lt;Response&gt; response) {\nToast.makeText(ChatAct.this, \"\"+response.message(), Toast.LENGTH_SHORT).show();\n }\n</code></pre>\n\n<p>Call replace to Call because the class named Respon not Response.</p>\n"},{"tags":[],"owner":{"account_id":371835,"reputation":190,"user_id":720585,"display_name":"Daniel.W"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1689929147,"creation_date":1687344978,"answer_id":76522515,"question_id":62374704,"body_markdown":"This submit fixed the issue, proguard issue, added a proguard rule\r\n\r\nhttps://github.com/square/retrofit/pull/3910/files/9831d5c3f9d28c61d29078d89645bce8ea258366#diff-50d428633d98e235831f5f9b75d7aa48897d5edc2bed30c55c9bb9ec20b36f82","title":"java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)","body":"<p>This submit fixed the issue, proguard issue, added a proguard rule</p>\n<p><a href=\"https://github.com/square/retrofit/pull/3910/files/9831d5c3f9d28c61d29078d89645bce8ea258366#diff-50d428633d98e235831f5f9b75d7aa48897d5edc2bed30c55c9bb9ec20b36f82\" rel=\"nofollow noreferrer\">https://github.com/square/retrofit/pull/3910/files/9831d5c3f9d28c61d29078d89645bce8ea258366#diff-50d428633d98e235831f5f9b75d7aa48897d5edc2bed30c55c9bb9ec20b36f82</a></p>\n"},{"tags":[],"owner":{"account_id":19400960,"reputation":1653,"user_id":14187529,"display_name":"Kamal Nayan"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690285512,"creation_date":1689439598,"answer_id":76694828,"question_id":62374704,"body_markdown":"Extending the [Daniel.W answer][1],\r\n\r\n**This rule is not mentioned yet in the retrofit&#39;s [official proguard guide][2]. You must mention this in your proguard rules**\r\n\r\n    # R8 full mode strips generic signatures from return types if not kept.\r\n    -keep,allowobfuscation,allowshrinking class retrofit2.Response\r\n\r\n **Final proguard rules for retrofit is :**\r\n\r\n\r\n\r\n        \r\n    # Retrofit does reflection on method and parameter annotations.\r\n    -keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations\r\n    \r\n    # Keep annotation default values (e.g., retrofit2.http.Field.encoded).\r\n    -keepattributes AnnotationDefault\r\n    \r\n    # Retain service method parameters when optimizing.\r\n    -keepclassmembers,allowshrinking,allowobfuscation interface * {\r\n        @retrofit2.http.* &lt;methods&gt;;\r\n    }\r\n    \r\n    # Ignore annotation used for build tooling.\r\n    -dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\r\n    \r\n    # Ignore JSR 305 annotations for embedding nullability information.\r\n    -dontwarn javax.annotation.**\r\n    \r\n    # Guarded by a NoClassDefFoundError try/catch and only used when on the classpath.\r\n    -dontwarn kotlin.Unit\r\n    \r\n    # Top-level functions that can only be used by Kotlin.\r\n    -dontwarn retrofit2.KotlinExtensions\r\n    -dontwarn retrofit2.KotlinExtensions$*\r\n    \r\n    # With R8 full mode, it sees no subtypes of Retrofit interfaces since they are created with a Proxy\r\n    # and replaces all potential values with null. Explicitly keeping the interfaces prevents this.\r\n    -if interface * { @retrofit2.http.* &lt;methods&gt;; }\r\n    -keep,allowobfuscation interface &lt;1&gt;\r\n    \r\n    # Keep inherited services.\r\n    -if interface * { @retrofit2.http.* &lt;methods&gt;; }\r\n    -keep,allowobfuscation interface * extends &lt;1&gt;\r\n    \r\n    # With R8 full mode generic signatures are stripped for classes that are not\r\n    # kept. Suspend functions are wrapped in continuations where the type argument\r\n    # is used.\r\n    -keep,allowobfuscation,allowshrinking class kotlin.coroutines.Continuation\r\n    \r\n    # R8 full mode strips generic signatures from return types if not kept.\r\n    -if interface * { @retrofit2.http.* public *** *(...); }\r\n    -keep,allowoptimization,allowshrinking,allowobfuscation class &lt;3&gt;\r\n    \r\n    # R8 full mode strips generic signatures from return types if not kept.\r\n    -keep,allowobfuscation,allowshrinking class retrofit2.Response\r\n\r\n----------\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/76522515/14187529\r\n  [2]: https://github.com/square/retrofit/blob/master/retrofit/src/main/resources/META-INF/proguard/retrofit2.pro","title":"java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)","body":"<p>Extending the <a href=\"https://stackoverflow.com/a/76522515/14187529\">Daniel.W answer</a>,</p>\n<p><strong>This rule is not mentioned yet in the retrofit's <a href=\"https://github.com/square/retrofit/blob/master/retrofit/src/main/resources/META-INF/proguard/retrofit2.pro\" rel=\"nofollow noreferrer\">official proguard guide</a>. You must mention this in your proguard rules</strong></p>\n<pre><code># R8 full mode strips generic signatures from return types if not kept.\n-keep,allowobfuscation,allowshrinking class retrofit2.Response\n</code></pre>\n<p><strong>Final proguard rules for retrofit is :</strong></p>\n<pre><code># Retrofit does reflection on method and parameter annotations.\n-keepattributes RuntimeVisibleAnnotations, RuntimeVisibleParameterAnnotations\n\n# Keep annotation default values (e.g., retrofit2.http.Field.encoded).\n-keepattributes AnnotationDefault\n\n# Retain service method parameters when optimizing.\n-keepclassmembers,allowshrinking,allowobfuscation interface * {\n    @retrofit2.http.* &lt;methods&gt;;\n}\n\n# Ignore annotation used for build tooling.\n-dontwarn org.codehaus.mojo.animal_sniffer.IgnoreJRERequirement\n\n# Ignore JSR 305 annotations for embedding nullability information.\n-dontwarn javax.annotation.**\n\n# Guarded by a NoClassDefFoundError try/catch and only used when on the classpath.\n-dontwarn kotlin.Unit\n\n# Top-level functions that can only be used by Kotlin.\n-dontwarn retrofit2.KotlinExtensions\n-dontwarn retrofit2.KotlinExtensions$*\n\n# With R8 full mode, it sees no subtypes of Retrofit interfaces since they are created with a Proxy\n# and replaces all potential values with null. Explicitly keeping the interfaces prevents this.\n-if interface * { @retrofit2.http.* &lt;methods&gt;; }\n-keep,allowobfuscation interface &lt;1&gt;\n\n# Keep inherited services.\n-if interface * { @retrofit2.http.* &lt;methods&gt;; }\n-keep,allowobfuscation interface * extends &lt;1&gt;\n\n# With R8 full mode generic signatures are stripped for classes that are not\n# kept. Suspend functions are wrapped in continuations where the type argument\n# is used.\n-keep,allowobfuscation,allowshrinking class kotlin.coroutines.Continuation\n\n# R8 full mode strips generic signatures from return types if not kept.\n-if interface * { @retrofit2.http.* public *** *(...); }\n-keep,allowoptimization,allowshrinking,allowobfuscation class &lt;3&gt;\n\n# R8 full mode strips generic signatures from return types if not kept.\n-keep,allowobfuscation,allowshrinking class retrofit2.Response\n</code></pre>\n<hr />\n"}],"owner":{"account_id":18803074,"reputation":55,"user_id":13712998,"display_name":"Azizah"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1988,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1690285512,"creation_date":1592149156,"question_id":62374704,"body_markdown":"Error when I send a chat to others.\r\n\r\n   \r\n\r\n \r\n\r\n    java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)\r\n                for method APIService.sendnotif\r\n                \r\n    at retrofit2.Utils.methodError(Utils.java:54)\r\n    \r\n    at retrofit2.Utils.methodError(Utils.java:43)\r\n    \r\n    at retrofit2.HttpServiceMethod.parseAnnotations(HttpServiceMethod.java:77)\r\n    \r\n    at retrofit2.ServiceMethod.parseAnnotations(ServiceMethod.java:39)\r\n                at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:202)\r\n                at retrofit2.Retrofit$1.invoke(Retrofit.java:160)\r\n                at java.lang.reflect.Proxy.invoke(Proxy.java:1006)\r\n                at $Proxy0.sendnotif(Unknown Source)\r\n                at com.azizah.msocial.ChatAct$7.onDataChange(ChatAct.java:297)\r\n              \r\n\r\nclass interface ApiService\r\n\r\n   \r\n\r\n    public interface APIService {\r\n    \r\n    @Headers({\r\n            &quot;Content-Type:application/json&quot;,\r\n            &quot;Authorization:key=Lhghhkvhvhffgv&quot;\r\n    })\r\n    \r\n    @POST(&quot;fcm/send&quot;)\r\n    Call&lt;Response&gt; sendnotif(@Body Pengirim body);\r\n    }\r\n\r\nsendnotif.class\r\nERROR in line apiService.sendnotif\r\nmust include generic type in here. can u explain to me to make generic type retrofit?\r\n        \r\n    private void sendnotif(final String hisUid, final String name, final String pesan) {\r\n    \r\n    DatabaseReference alltoken = FirebaseDatabase.getInstance().getReference(&quot;Tokens&quot;);\r\n    Query query = alltoken.orderByKey().equalTo(hisUid);\r\n            query.addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\r\n    \r\n                    for(DataSnapshot ds: dataSnapshot.getChildren()){\r\n                        Tokenclass tokenclass = ds.getValue(Tokenclass.class);\r\n                        Datanotif data = new Datanotif(myUid, name+&quot;:&quot;+pesan, &quot;Pesan Baru&quot;, hisUid, R.drawable.ic_usr_name);\r\n                        Pengirim pengirim = new Pengirim(data, tokenclass.getToken());\r\n                         apiService.sendnotif(pengirim)\r\n                            .enqueue(new Callback&lt;Response&gt;() {\r\n                                @Override\r\n                                public void onResponse(Call&lt;Response&gt; call, Response&lt;Response&gt; response) {\r\n                                    Toast.makeText(ChatAct.this, &quot;&quot;+response.message(), Toast.LENGTH_SHORT).show();\r\n                                }\r\n\r\n                                @Override\r\n                                public void onFailure(Call&lt;Response&gt; call, Throwable t) {\r\n\r\n                                }\r\n                            });\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError databaseError) {\r\n\r\n            }\r\n        });\r\n\r\n    }\r\nerror in apiService.sendnotif(pengirim)\r\n\r\nplease help me, It makes app force close \r\n","title":"java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)","body":"<p>Error when I send a chat to others.</p>\n\n<pre><code>java.lang.IllegalArgumentException: Response must include generic type (e.g., Response&lt;String&gt;)\n            for method APIService.sendnotif\n\nat retrofit2.Utils.methodError(Utils.java:54)\n\nat retrofit2.Utils.methodError(Utils.java:43)\n\nat retrofit2.HttpServiceMethod.parseAnnotations(HttpServiceMethod.java:77)\n\nat retrofit2.ServiceMethod.parseAnnotations(ServiceMethod.java:39)\n            at retrofit2.Retrofit.loadServiceMethod(Retrofit.java:202)\n            at retrofit2.Retrofit$1.invoke(Retrofit.java:160)\n            at java.lang.reflect.Proxy.invoke(Proxy.java:1006)\n            at $Proxy0.sendnotif(Unknown Source)\n            at com.azizah.msocial.ChatAct$7.onDataChange(ChatAct.java:297)\n</code></pre>\n\n<p>class interface ApiService</p>\n\n<pre><code>public interface APIService {\n\n@Headers({\n        \"Content-Type:application/json\",\n        \"Authorization:key=Lhghhkvhvhffgv\"\n})\n\n@POST(\"fcm/send\")\nCall&lt;Response&gt; sendnotif(@Body Pengirim body);\n}\n</code></pre>\n\n<p>sendnotif.class\nERROR in line apiService.sendnotif\nmust include generic type in here. can u explain to me to make generic type retrofit?</p>\n\n<pre><code>private void sendnotif(final String hisUid, final String name, final String pesan) {\n\nDatabaseReference alltoken = FirebaseDatabase.getInstance().getReference(\"Tokens\");\nQuery query = alltoken.orderByKey().equalTo(hisUid);\n        query.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot dataSnapshot) {\n\n                for(DataSnapshot ds: dataSnapshot.getChildren()){\n                    Tokenclass tokenclass = ds.getValue(Tokenclass.class);\n                    Datanotif data = new Datanotif(myUid, name+\":\"+pesan, \"Pesan Baru\", hisUid, R.drawable.ic_usr_name);\n                    Pengirim pengirim = new Pengirim(data, tokenclass.getToken());\n                     apiService.sendnotif(pengirim)\n                        .enqueue(new Callback&lt;Response&gt;() {\n                            @Override\n                            public void onResponse(Call&lt;Response&gt; call, Response&lt;Response&gt; response) {\n                                Toast.makeText(ChatAct.this, \"\"+response.message(), Toast.LENGTH_SHORT).show();\n                            }\n\n                            @Override\n                            public void onFailure(Call&lt;Response&gt; call, Throwable t) {\n\n                            }\n                        });\n            }\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError databaseError) {\n\n        }\n    });\n\n}\n</code></pre>\n\n<p>error in apiService.sendnotif(pengirim)</p>\n\n<p>please help me, It makes app force close </p>\n"},{"tags":["java","hashmap","tuples"],"comments":[{"owner":{"account_id":6500168,"reputation":930,"user_id":5116356,"accept_rate":100,"display_name":"luca.vercelli"},"score":0,"creation_date":1553852481,"post_id":55414407,"comment_id":97547896,"body_markdown":"you are talking about javax.persistence.Tuple, aren&#39;t you?","body":"you are talking about javax.persistence.Tuple, aren&#39;t you?"},{"owner":{"account_id":15599599,"reputation":1,"user_id":11254076,"display_name":"rzz24118"},"score":0,"creation_date":1553852600,"post_id":55414407,"comment_id":97547965,"body_markdown":"@luca.vercelli yes","body":"@luca.vercelli yes"}],"answers":[{"comments":[{"owner":{"account_id":15599599,"reputation":1,"user_id":11254076,"display_name":"rzz24118"},"score":0,"creation_date":1553852963,"post_id":55414491,"comment_id":97548158,"body_markdown":"If I do it like that I get Incompatible type for tuple.get(element)","body":"If I do it like that I get Incompatible type for tuple.get(element)"},{"owner":{"account_id":6994397,"reputation":2809,"user_id":5362510,"accept_rate":50,"display_name":"Ondra K."},"score":0,"creation_date":1553853056,"post_id":55414491,"comment_id":97548227,"body_markdown":"Yes, you also need to create the collection you put the elements to - you changed the values in the map from `Object` to `Collection&lt;Object&gt;`","body":"Yes, you also need to create the collection you put the elements to - you changed the values in the map from <code>Object</code> to <code>Collection&lt;Object&gt;</code>"},{"owner":{"account_id":6994397,"reputation":2809,"user_id":5362510,"accept_rate":50,"display_name":"Ondra K."},"score":0,"creation_date":1553854437,"post_id":55414491,"comment_id":97549106,"body_markdown":"You can do that, of course, in that case you would have `List&lt;Map&lt;String, Object&gt;&gt;` instead of `Map&lt;String, List&lt;Object&gt;&gt;` - just keep in mind that map keys are unique, and it is up to you to ensure that you do not overwrite the existing mapping.","body":"You can do that, of course, in that case you would have <code>List&lt;Map&lt;String, Object&gt;&gt;</code> instead of <code>Map&lt;String, List&lt;Object&gt;&gt;</code> - just keep in mind that map keys are unique, and it is up to you to ensure that you do not overwrite the existing mapping."},{"owner":{"account_id":6500168,"reputation":930,"user_id":5116356,"accept_rate":100,"display_name":"luca.vercelli"},"score":0,"creation_date":1553866249,"post_id":55414491,"comment_id":97556012,"body_markdown":"I agree with @OndraK. I just underly that a ``List&lt;Tuple&gt;`` is, in fact, a matrix, or also a table. So it&#39;s not reasonable to transform it into a ``Map&lt;String, Object&gt;``, which is a single row of the table. It&#39;s more reasonable to transform it into a ``List&lt;Map&lt;String, Object&gt;&gt;``.","body":"I agree with @OndraK. I just underly that a <code>List&lt;Tuple&gt;</code> is, in fact, a matrix, or also a table. So it&#39;s not reasonable to transform it into a <code>Map&lt;String, Object&gt;</code>, which is a single row of the table. It&#39;s more reasonable to transform it into a <code>List&lt;Map&lt;String, Object&gt;&gt;</code>."}],"tags":[],"owner":{"account_id":6994397,"reputation":2809,"user_id":5362510,"accept_rate":50,"display_name":"Ondra K."},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1553853414,"creation_date":1553852508,"answer_id":55414491,"question_id":55414407,"body_markdown":"The `element.getAlias()` you&#39;re using as the key for the hashmap is probably same for some of the elements.\r\n\r\n`Map` keys are unique, meaning, if you insert entries (1, &quot;one&quot;) and then (1, &quot;two&quot;), the first value will be overridden by the latter. If you want to have multiple values mapped to one key, use `Map&lt;String, Collection&lt;Object&gt;&gt;`, or a `Multimap` from Guava, which is exactly the same thing.\r\n\r\nYou can insert into multimap with this function - if the key is not in the map, create a new `ArrayList` and add it to the map, otherwise return the existing one. Then, insert the value to the list:\r\n\r\n    values\r\n        .computeIfAbsent(element.getAlias, k -&gt; new ArrayList&lt;&gt;())\r\n        .add(tuple.get(element));","title":"Can&#39;t convert tuple list to hashmap java","body":"<p>The <code>element.getAlias()</code> you're using as the key for the hashmap is probably same for some of the elements.</p>\n\n<p><code>Map</code> keys are unique, meaning, if you insert entries (1, \"one\") and then (1, \"two\"), the first value will be overridden by the latter. If you want to have multiple values mapped to one key, use <code>Map&lt;String, Collection&lt;Object&gt;&gt;</code>, or a <code>Multimap</code> from Guava, which is exactly the same thing.</p>\n\n<p>You can insert into multimap with this function - if the key is not in the map, create a new <code>ArrayList</code> and add it to the map, otherwise return the existing one. Then, insert the value to the list:</p>\n\n<pre><code>values\n    .computeIfAbsent(element.getAlias, k -&gt; new ArrayList&lt;&gt;())\n    .add(tuple.get(element));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15043220,"reputation":195,"user_id":10857151,"display_name":"Michael Cauduro"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1592901206,"creation_date":1592899682,"answer_id":62530208,"question_id":55414407,"body_markdown":"with java 8 is simply :\r\n\r\n    return data.stream()\r\n        .collect(Collectors.toMap(\r\n            t -&gt; t.get(0, String.class),\r\n            t -&gt; t.get(1, Object.class)));","title":"Can&#39;t convert tuple list to hashmap java","body":"<p>with java 8 is simply :</p>\n<pre><code>return data.stream()\n    .collect(Collectors.toMap(\n        t -&gt; t.get(0, String.class),\n        t -&gt; t.get(1, Object.class)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22325547,"reputation":199,"user_id":16547619,"display_name":"user16547619"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1629972206,"creation_date":1629890271,"answer_id":68921902,"question_id":55414407,"body_markdown":"Seems to be working :\r\n\r\n```\r\npublic static List&lt;Map&lt;String/*UPPERCASE*/, Object&gt;&gt; jpaTuplesToMaps(\r\n  List&lt;javax.persistence.Tuple&gt; data\r\n){\r\n\treturn data.stream()\r\n\t\t.map(tuple -&gt; { // per each tuple of the input List\r\n            // creating a new HashMap\r\n\t\t\tMap&lt;String, Object&gt; resultItem =  new HashMap&lt;&gt;();\r\n\t\t\t// filling the created HashMap with values of\r\n\t\t\ttuple.getElements().forEach( // each column of the tuple\r\n\t\t\t\tcol -&gt; { resultItem.put(col.getAlias(), tuple.get(col)); } \r\n\t\t\t);\r\n            // returning the created HashMap instead of  the current Tuple\r\n\t\t\treturn resultItem;\r\n\t\t})\r\n         // collecting &amp; returning all the created HashMap-s as a List\r\n\t\t.collect(Collectors.toList());\r\n}\r\n```\r\n\r\nBut usualy both single &amp; list conversions are required, so let&#39;s combine them :\r\n\r\n```\r\npublic static Map&lt;String/*UPPERCASE*/, Object&gt; jpaTupleToMap(\r\n\tjavax.persistence.Tuple data /*CASE INSENSITIVE*/\r\n){\r\n\tMap&lt;String, Object&gt; result = \r\n\t\tnew HashMap&lt;&gt;(); // exactly HashMap since it can handle NULL keys &amp; values\r\n\tdata.getElements().forEach(\r\n\t\tcol -&gt; { result.put(col.getAlias(), data.get(col)); } \r\n\t);\r\n\treturn result;\r\n}\r\n\r\n//-------------------------\r\n\t\r\npublic static List&lt;Map&lt;String/*UPPERCASE*/, Object&gt;&gt; jpaTuplesToMaps(\r\n\tList&lt;javax.persistence.Tuple&gt; data /*CASE INSENSITIVE*/\r\n){\r\n\treturn data.stream() // List&lt;Tuple&gt; -&gt; Tuple1,..TupleN\r\n\t\t.map(tuple -&gt; jpaTupleToMap(tuple)) // Tuple1 -&gt; HashMap1,..TupleN -&gt; HashMapN\r\n\t\t.collect(Collectors.toList()); // HashMap1,..HashMapN -&gt; List\r\n}\r\n\r\n","title":"Can&#39;t convert tuple list to hashmap java","body":"<p>Seems to be working :</p>\n<pre><code>public static List&lt;Map&lt;String/*UPPERCASE*/, Object&gt;&gt; jpaTuplesToMaps(\n  List&lt;javax.persistence.Tuple&gt; data\n){\n    return data.stream()\n        .map(tuple -&gt; { // per each tuple of the input List\n            // creating a new HashMap\n            Map&lt;String, Object&gt; resultItem =  new HashMap&lt;&gt;();\n            // filling the created HashMap with values of\n            tuple.getElements().forEach( // each column of the tuple\n                col -&gt; { resultItem.put(col.getAlias(), tuple.get(col)); } \n            );\n            // returning the created HashMap instead of  the current Tuple\n            return resultItem;\n        })\n         // collecting &amp; returning all the created HashMap-s as a List\n        .collect(Collectors.toList());\n}\n</code></pre>\n<p>But usualy both single &amp; list conversions are required, so let's combine them :</p>\n<pre><code>public static Map&lt;String/*UPPERCASE*/, Object&gt; jpaTupleToMap(\n    javax.persistence.Tuple data /*CASE INSENSITIVE*/\n){\n    Map&lt;String, Object&gt; result = \n        new HashMap&lt;&gt;(); // exactly HashMap since it can handle NULL keys &amp; values\n    data.getElements().forEach(\n        col -&gt; { result.put(col.getAlias(), data.get(col)); } \n    );\n    return result;\n}\n\n//-------------------------\n    \npublic static List&lt;Map&lt;String/*UPPERCASE*/, Object&gt;&gt; jpaTuplesToMaps(\n    List&lt;javax.persistence.Tuple&gt; data /*CASE INSENSITIVE*/\n){\n    return data.stream() // List&lt;Tuple&gt; -&gt; Tuple1,..TupleN\n        .map(tuple -&gt; jpaTupleToMap(tuple)) // Tuple1 -&gt; HashMap1,..TupleN -&gt; HashMapN\n        .collect(Collectors.toList()); // HashMap1,..HashMapN -&gt; List\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14948971,"reputation":321,"user_id":10793332,"display_name":"Avinash Dewangan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690285346,"creation_date":1690285346,"answer_id":76762362,"question_id":55414407,"body_markdown":" \r\n**You can convert List of Tuple to HashMap**\r\n\r\nMap&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n            \r\nfor (TupleElement tupleElement: listOfObject.get(0).getElements()) {\r\n                 map.put(tupleElement.getAlias(),listOfObject.get(0).get(tupleElement.getAlias()));\r\n            }","title":"Can&#39;t convert tuple list to hashmap java","body":"<p><strong>You can convert List of Tuple to HashMap</strong></p>\n<p>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();</p>\n<p>for (TupleElement tupleElement: listOfObject.get(0).getElements()) {\nmap.put(tupleElement.getAlias(),listOfObject.get(0).get(tupleElement.getAlias()));\n}</p>\n"}],"owner":{"account_id":15599599,"reputation":1,"user_id":11254076,"display_name":"rzz24118"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":4,"score":0,"last_activity_date":1690285346,"creation_date":1553852236,"question_id":55414407,"body_markdown":"I want to convert a `javax.persistence.Tuple` into a `HashMap`, but like this, it inserts the last element of the tuple and takes also the alias and data type. How can I improve this method so it takes values of the tuple?\r\n    \r\n```\r\npublic Map&lt;String, Object&gt; tuplesToMap(List&lt;Tuple&gt; data){\r\n    Map&lt;String, Object&gt; values = new HashMap&lt;&gt;();\r\n    data.forEach(tuple -&gt; {\r\n        tuple.getElements().forEach(\r\n            element -&gt; {\r\n                values.put(element.getAlias(), tuple.get(element));\r\n            }\r\n        );\r\n    });\r\n    return values;\r\n}\r\n```","title":"Can&#39;t convert tuple list to hashmap java","body":"<p>I want to convert a <code>javax.persistence.Tuple</code> into a <code>HashMap</code>, but like this, it inserts the last element of the tuple and takes also the alias and data type. How can I improve this method so it takes values of the tuple?</p>\n\n<pre><code>public Map&lt;String, Object&gt; tuplesToMap(List&lt;Tuple&gt; data){\n    Map&lt;String, Object&gt; values = new HashMap&lt;&gt;();\n    data.forEach(tuple -&gt; {\n        tuple.getElements().forEach(\n            element -&gt; {\n                values.put(element.getAlias(), tuple.get(element));\n            }\n        );\n    });\n    return values;\n}\n</code></pre>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1690283860,"post_id":76762156,"comment_id":135328774,"body_markdown":"you are trying to access the first element of an empty list/array. First check whether or not there are elements to access","body":"you are trying to access the first element of an empty list/array. First check whether or not there are elements to access"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1690283928,"post_id":76762156,"comment_id":135328786,"body_markdown":"You cannot use the `set(int index, E element)` method of List to set Elements at indexes that don&#39;t yet exist. Lists don&#39;t work like that, you can&#39;t insert an element at index 0 in an empty list with that method. And your List is empty when you create it. You add new elements with the add method and use the set method to replace elements.","body":"You cannot use the <code>set(int index, E element)</code> method of List to set Elements at indexes that don&#39;t yet exist. Lists don&#39;t work like that, you can&#39;t insert an element at index 0 in an empty list with that method. And your List is empty when you create it. You add new elements with the add method and use the set method to replace elements."},{"owner":{"account_id":12256232,"reputation":617,"user_id":8945198,"display_name":"AP11"},"score":0,"creation_date":1690284395,"post_id":76762156,"comment_id":135328882,"body_markdown":"That `List` is empty, so instead of setting the elements on `index i`, just add them to the list.","body":"That <code>List</code> is empty, so instead of setting the elements on <code>index i</code>, just add them to the list."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1690284660,"post_id":76762156,"comment_id":135328944,"body_markdown":"You&#39;ve made the assumption that the parameter you pass to `new ArrayList` is the size of the list, as it would be with `new Boolean[size]`, but it isn&#39;t, it&#39;s the number of items you can add to the list before it resizes itself internally. The list is created empty.","body":"You&#39;ve made the assumption that the parameter you pass to <code>new ArrayList</code> is the size of the list, as it would be with <code>new Boolean[size]</code>, but it isn&#39;t, it&#39;s the number of items you can add to the list before it resizes itself internally. The list is created empty."}],"answers":[{"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690285061,"creation_date":1690285061,"answer_id":76762324,"question_id":76762156,"body_markdown":"You can&#39;t set elements of an empty `List` like that, you need to actually add the elements to populate an empty list. Here, you seem to be checking if each-value in the input array is within a threshold; use that as the value to add. And I would calculate the threshold once. Like,\r\n\r\n\tpublic List&lt;Boolean&gt; kidsWithCandies(int[] candies, int extraCandies) {\r\n\t\tArrays.sort(candies);\r\n\t\tint max = candies[candies.length - 1] - extraCandies;\r\n\t\tList&lt;Boolean&gt; res = new ArrayList&lt;&gt;(candies.length);\r\n\t\tfor (int v : candies) {\r\n\t\t\tres.add(v &gt; max);\r\n\t\t}\r\n\t\treturn res;\r\n\t}\r\n","title":"java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 when using lists","body":"<p>You can't set elements of an empty <code>List</code> like that, you need to actually add the elements to populate an empty list. Here, you seem to be checking if each-value in the input array is within a threshold; use that as the value to add. And I would calculate the threshold once. Like,</p>\n<pre><code>public List&lt;Boolean&gt; kidsWithCandies(int[] candies, int extraCandies) {\n    Arrays.sort(candies);\n    int max = candies[candies.length - 1] - extraCandies;\n    List&lt;Boolean&gt; res = new ArrayList&lt;&gt;(candies.length);\n    for (int v : candies) {\n        res.add(v &gt; max);\n    }\n    return res;\n}\n</code></pre>\n"}],"owner":{"display_name":"user21285927"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690285061,"creation_date":1690283752,"question_id":76762156,"body_markdown":"    class Solution {\r\n        public List&lt;Boolean&gt; kidsWithCandies(int[] candies, int extraCandies) {\r\n    \r\n        Arrays.sort(candies);\r\n            int max =candies[candies.length-1];\r\n            List &lt;Boolean&gt; res = new ArrayList&lt;Boolean&gt;(candies.length);\r\n            for(int i =0;i&lt;candies.length;i++){\r\n                if(candies[i]+extraCandies &gt; max){\r\n                    res.set(i, true);\r\n                }\r\n               else{\r\n                   res.set(i,false);\r\n                }\r\n            }\r\n        return res;\r\n        }            \r\n     }\r\n\r\n\r\n\r\nI am getting an error of java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0. Can anyone suggest me where i am going wrong.","title":"java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 when using lists","body":"<pre><code>class Solution {\n    public List&lt;Boolean&gt; kidsWithCandies(int[] candies, int extraCandies) {\n\n    Arrays.sort(candies);\n        int max =candies[candies.length-1];\n        List &lt;Boolean&gt; res = new ArrayList&lt;Boolean&gt;(candies.length);\n        for(int i =0;i&lt;candies.length;i++){\n            if(candies[i]+extraCandies &gt; max){\n                res.set(i, true);\n            }\n           else{\n               res.set(i,false);\n            }\n        }\n    return res;\n    }            \n }\n</code></pre>\n<p>I am getting an error of java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0. Can anyone suggest me where i am going wrong.</p>\n"},{"tags":["java","inheritance","openapi"],"owner":{"account_id":3366819,"reputation":2646,"user_id":2827181,"display_name":"Marc Le Bihan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690285008,"creation_date":1690259774,"question_id":76759484,"body_markdown":"To create a report of Financial Balances of Cities (shown at the bottom of the question), I&#39;m using classes that inherits each from the other:\r\n\r\n```java\r\n/** Comptes avec montant, montant par habitant, strate, taux vot&#233; et taux moyen strate. */\r\n@Schema(description = &quot;Comptes avec total, par habitant, moyenne strate, total r&#233;duction vot&#233;e, r&#233;duction par habitant, r&#233;duction moyenne strate&quot;, \r\n   allOf = ComptesAvecReductionVotee.class, \r\n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\r\npublic class ComptesAvecStrateEtTauxVoteEtStrate extends ComptesAvecTauxVote {\r\n   /** Moyenne de strate */\r\n   private Double moyenneStrate;\r\n\r\n   /** Taux de la strate */\r\n   private Double tauxStrate;\r\n   [...]\r\n```\r\n\r\nwith:\r\n\r\n```java\r\n/** Comptes avec montant, montant par habitant, taux vot&#233;. */\r\n@Schema(description = &quot;Comptes avec total, par habitant, total r&#233;duction vot&#233;e, r&#233;duction par habitant, r&#233;duction moyenne strate&quot;, \r\n   allOf = ComptesTotalOuBaseEtParHabitant.class,\r\n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\r\npublic class ComptesAvecTauxVote extends ComptesTotalOuBaseEtParHabitant {\r\n   /** Taux vot&#233; */\r\n   private Double tauxVote;\r\n   [...]\r\n```\r\n\r\nand:\r\n\r\n```java\r\n/** Forme de comptes individuels : comptes total ou base, et par habitant. */\r\n@Schema(description = &quot;Forme de comptes individuels : comptes total ou base, et par habitant&quot;,\r\n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\r\npublic class ComptesTotalOuBaseEtParHabitant implements Serializable {\r\n   /** Type de compte Individuel */\r\n   @Schema(description = &quot;Type de compte individuel&quot;, required = true)\r\n   private String typeCompteIndividuel = getClass().getSimpleName();\r\n\r\n   /** Montant total ou base */\r\n   private Double montant;\r\n\r\n   /** Montant par habitant */\r\n   private Double parHabitant;\r\n\r\n   /** Libell&#233; de l&#39;analyse apport&#233;e par cette ligne de comptes individuels. */\r\n   private String libelleAnalyse;\r\n\r\n   /**\r\n    * Renvoyer le type de compte Individuel\r\n    * @return Type de compte Individuel\r\n    */\r\n   public String getTypeCompteIndividuel() {\r\n      return this.typeCompteIndividuel;\r\n   }\r\n\r\n   /**\r\n    * Fixer le type de compte Individuel\r\n    * @param typeCompteIndividuel Type de compte Individuel\r\n    */\r\n   public void setTypeCompteIndividuel(String typeCompteIndividuel) {\r\n      this.typeCompteIndividuel = typeCompteIndividuel;\r\n   }\r\n   [...]\r\n```\r\n\r\nBecause an individual accounts of cities report have such repetitive structures, and individual accounts of local authorities, departments or regions also have them, sometimes with average calculations, sometimes not.  \r\n\r\nThese inherited classes make it convenient to do some calculations on the same basis.\r\n\r\nEverything is written in _Java_, as you can see. But, when I generate through `org.springdoc:springdoc-openapi-maven-plugin`, configured like this: \r\n\r\n```xml\r\n&lt;configuration&gt; \r\n   &lt;apiDocsUrl&gt;http://localhost:9090/v3/api-docs&lt;/apiDocsUrl&gt; \r\n   &lt;outputFileName&gt;openapi.json&lt;/outputFileName&gt; \r\n   &lt;outputDir&gt;target/openapi&lt;/outputDir&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nthe `openapi.json` file containing many classes of my application,\r\n\r\nand that a further project, being a client of it and written in _Java_ too, generates for its use the classes from that `openapi.json`, with `org.openapitools:openapi-generator-maven-plugin` configured this way:\r\n\r\n```xml\r\n&lt;configuration&gt;\r\n\t&lt;inputSpec&gt;${openapi}&lt;/inputSpec&gt;\r\n\t&lt;output&gt;target/generated-sources/swagger/java&lt;/output&gt;\r\n\r\n\t&lt;generatorName&gt;spring&lt;/generatorName&gt;\r\n\t&lt;modelPackage&gt;${client.base.package.name}.model&lt;/modelPackage&gt;\r\n\t&lt;apiPackage&gt;${client.base.package.name}.api&lt;/apiPackage&gt;\r\n\t&lt;invokerPackage&gt;${client.base.package.name}.invoker&lt;/invokerPackage&gt;\r\n\t&lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\r\n\r\n\t&lt;additionalProperties&gt;\r\n\t\t&lt;version&gt;1.0.0&lt;/version&gt;\r\n\t\t&lt;appVersion&gt;1.0.0&lt;/appVersion&gt;\r\n\t&lt;/additionalProperties&gt;\r\n\r\n\t&lt;configOptions&gt;\r\n\t\t&lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\r\n\t\t&lt;artifactVersion&gt;${project.version}&lt;/artifactVersion&gt;\r\n\t\t&lt;oas3&gt;true&lt;/oas3&gt;\r\n\t&lt;/configOptions&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nthe inheritance of these classes isn&#39;t respected. Here&#39;s what is generated:\r\n\r\n```java\r\n@Schema(\r\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;,\r\n   description = &quot;Comptes avec total, par habitant, moyenne strate, total r&#233;duction vot&#233;e, r&#233;duction par habitant, r&#233;duction moyenne strate&quot;\r\n)\r\npublic class ComptesAvecStrateEtReductionVotee extends ComptesAvecReductionVotee {\r\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\r\n   private String typeCompteIndividuel;\r\n   @JsonProperty(&quot;montant&quot;)\r\n   private Double montant;\r\n   @JsonProperty(&quot;parHabitant&quot;)\r\n   private Double parHabitant;\r\n   @JsonProperty(&quot;libelleAnalyse&quot;)\r\n   private String libelleAnalyse;\r\n   @JsonProperty(&quot;reductionVotee&quot;)\r\n   private Double reductionVotee;\r\n   @JsonProperty(&quot;moyenneStrate&quot;)\r\n   private Double moyenneStrate;\r\n   @JsonProperty(&quot;reductionVoteeParHabitant&quot;)\r\n   private Double reductionVoteeParHabitant;\r\n   @JsonProperty(&quot;reductionVoteeMoyenneStrate&quot;)\r\n   private Double reductionVoteeMoyenneStrate;\r\n   [...]\r\n``` \r\n\r\n```java\r\n@Schema(\r\n   name = &quot;ComptesAvecReductionVotee&quot;,\r\n   description = &quot;Comptes avec total, par habitant, total r&#233;duction vot&#233;e, r&#233;duction par habitant, r&#233;duction moyenne strate&quot;\r\n)\r\n@JsonIgnoreProperties(\r\n   value = {&quot;typeCompteIndividuel&quot;},\r\n   allowSetters = true\r\n)\r\n@JsonTypeInfo(\r\n   use = Id.NAME,\r\n   include = As.PROPERTY,\r\n   property = &quot;typeCompteIndividuel&quot;,\r\n   visible = true\r\n)\r\n@JsonSubTypes({@Type(\r\n   value = ComptesAvecStrateEtReductionVotee.class,\r\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;\r\n)})\r\npublic class ComptesAvecReductionVotee extends ComptesTotalOuBaseEtParHabitant {\r\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\r\n   private String typeCompteIndividuel;\r\n   @JsonProperty(&quot;montant&quot;)\r\n   private Double montant;\r\n   @JsonProperty(&quot;parHabitant&quot;)\r\n   private Double parHabitant;\r\n   @JsonProperty(&quot;libelleAnalyse&quot;)\r\n   private String libelleAnalyse;\r\n   @JsonProperty(&quot;reductionVotee&quot;)\r\n   private Double reductionVotee;\r\n   [...]\r\n```\r\n\r\n```java\r\n@Schema(\r\n   name = &quot;ComptesTotalOuBaseEtParHabitant&quot;,\r\n   description = &quot;Forme de comptes individuels : comptes total ou base, et par habitant&quot;\r\n)\r\n@JsonIgnoreProperties(\r\n   value = {&quot;typeCompteIndividuel&quot;},\r\n   allowSetters = true\r\n)\r\n@JsonTypeInfo(\r\n   use = Id.NAME,\r\n   include = As.PROPERTY,\r\n   property = &quot;typeCompteIndividuel&quot;,\r\n   visible = true\r\n)\r\n@JsonSubTypes({@Type(\r\n   value = ComptesAvecReductionVotee.class,\r\n   name = &quot;ComptesAvecReductionVotee&quot;\r\n), @Type(\r\n   value = ComptesAvecStrateEtReductionVotee.class,\r\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;\r\n)})\r\npublic class ComptesTotalOuBaseEtParHabitant {\r\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\r\n   private String typeCompteIndividuel;\r\n   @JsonProperty(&quot;montant&quot;)\r\n   private Double montant;\r\n   @JsonProperty(&quot;parHabitant&quot;)\r\n   private Double parHabitant;\r\n   @JsonProperty(&quot;libelleAnalyse&quot;)\r\n   private String libelleAnalyse;\r\n   [...]\r\n```\r\n\r\nIt does only a part of what it should...\r\n\r\nOpenAPI wrote few classes having some `extends`, yes, but subclasses still duplicate the fields `typeCompteIndividuel`, `montant`, `parHabitant`, for example. This client compiles, but it isn&#39;t the way I&#39;m looking for, and I&#39;m in the middle of things.\r\n\r\n1. How do I define such discriminator in my POJO classes?  \r\nI&#39;ve attempted it, but it doesn&#39;t really work.\r\n\r\n2. And... Am I required to?  \r\nCan OpenAPI do that as boilerplate generation, like: \r\n\r\n   - using the class name for discriminator on generation from server classes \r\n   - and using it too for client classes?\r\n\r\nwithout I have any change to do in my POJO classes? Because adding a field in each able to inherit is cumbersome.\r\n\r\n---\r\n\r\nThe report that the inherited classes help to create (on the _Java_ server):\r\n\r\n```txt\r\nLibell&#233; du budget : Douarnenez\r\nPopulation l&#233;gale en vigueur au 1er janvier de l&#39;exercice : 14520\tBudget principal seul\r\nStrate : Strate commune&#160;: communes de 10 000 &#224; 20 000 hab\t\tType groupement&#160;d&#39;appartenance : appartenant &#224; un groupement fiscalis&#233; (FPU)\r\nExercice&#160;: 2019\t\tN&#176; de d&#233;partement&#160;: 29\t\tN&#176; insee de la commune&#160;: 29046\t\tN&#176; de r&#233;gion&#160;: 53\r\n\r\n\r\nANALYSE DES EQUILIBRES FINANCIERS FONDAMENTAUX\r\n\r\nEn milliers d&#39;Euros\tEuros par habitant\tMoyenne de la strate\tOPERATIONS DE FONCTIONNEMENT\tRatios de structure\tMoyenne de la strate (en %% des produits)\r\n\r\n\r\n\t\t\t\t\t\tOPERATIONS DE FONCTIONNEMENT\r\n\r\n     21442\t      1477\t      1354\tTOTAL DES PRODUITS DE FONCTIONNEMENT = A\t\t\ten % des produits CAF\r\n     21240\t      1463\t      1303\t\tPRODUITS DE FONCTIONNEMENT CAF\r\n     12379\t       853\t       563\t\t\tdont : Imp&#244;ts Locaux\t\t\t     58,28\t     43,19\r\n      1418\t        98\t       115\t\t\tAutres imp&#244;ts et taxes\t\t\t        nu\t      8,82\r\n      1794\t       124\t       177\t\t\tDotation globale de fonctionnement\t      8,44\t     13,57\r\n\r\n     20000\t      1377\t      1213\tTOTAL DES CHARGES DE FONCTIONNEMENT = B\t\t\t\ten % des charges CAF\r\n     18156\t      1250\t      1107\t\tCharges de fonctionnement CAF\r\n     11226\t       773\t       655\t\t\tdont : Charges de personnel\t\t     61,83\t     59,18\r\n      4493\t       309\t       272\t\t\tachats et charges externes\t\t     24,75\t     24,58\r\n       911\t        63\t        24\t\t\tCharges financi&#232;res\t\t\t      5,02\t      2,14\r\n       229\t        16\t        33\t\t\tContingents\t\t\t\t      1,26\t      2,98\r\n      1024\t        71\t        89\t\t\tSubventions vers&#233;es\t\t\t      5,64\t      8,02\r\n      1442\t        99\t       141\tR&#233;sultat comptable = A - B = R\r\n\r\n\r\n\t\t\t\t\t\tOPERATIONS D&#39;INVESTISSEMENT\r\n\r\n      7099\t       489\t       482\tTOTAL DES RESSOURCES D&#39;INVESTISSEMENT = C\t\t\ten % des ressources\r\n      1800\t       124\t        79\t\tdont : Emprunts bancaires et dettes assimil&#233;es\t     25,36\t     16,33\r\n       526\t        36\t        72\t\tSubventions re&#231;ues\t\t\t\t      7,42\t     14,84\r\n       450\t        31\t        40\t\tFonds de compensation de la TVA (FCTVA)\t\t      6,34\t      8,28\r\n         0\t         0\t         0\t\tRetour de biens affect&#233;s, conc&#233;d&#233;s, ...\t\t      0,00\t      0,00\r\n\r\n      6481\t       446\t       500\tTOTAL DES EMPLOIS D&#39;INVESTISSEMENT = D\t\t\t\ten % des emplois\r\n      4515\t       311\t       376\t\tdont : D&#233;penses d&#39;&#233;quipement\t\t\t     69,66\t     75,37\r\n      1926\t       133\t        86\t\tRemboursement d&#39;emprunts et dettes assimil&#233;es\t     29,72\t     17,18\r\n         0\t         0\t         1\t\tCharges &#224; r&#233;partir\t\t\t\t      0,00\t      0,11\r\n         0\t         0\t         0\t\tImmobilisations affect&#233;es, conc&#233;d&#233;es, ...\t      0,00\t      0,00\r\n\r\n      -618\t       -43\t        17\tBesoin ou capacit&#233; de financement r&#233;siduel de la section d&#39;investissement = D - C\r\n         0\t         0\t         1\t+ Solde des op&#233;rations pour le compte de tiers\r\n      -617\t       -43\t        18\tBesoin ou capacit&#233; de financement de la section d&#39;investissement = E\r\n      2059\t       142\t       123\tR&#233;sultat d&#39;ensemble = R - E\r\n\r\n\r\n\t\t\t\t\t\tAUTOFINANCEMENT\t\t\t\t\t\t\ten % des produits CAF\r\n\r\n      3855\t       266\t       214\tExc&#233;dent brut de fonctionnement\t\t\t\t     18,15\t     16,43\r\n      3084\t       212\t       196\tCapacit&#233; d&#39;autofinancement = CAF\t\t\t     14,52\t     15,01\r\n      1158\t        80\t       110\tCAF nette du remboursement en capital des emprunts\t      5,45\t      8,43\r\n\r\n\t\t\t\t\t\tENDETTEMENT\t\t\t\t\t\t\ten % des produits CAF\r\n     25092\t      1728\t       850\tEncours total de la dette au 31 d&#233;cembre N\t\t    118,13\t     65,23\r\n     25092\t      1728\t       837\tEncours des dettes bancaires et assimil&#233;es\t\t    118,13\t     64,27\r\n     25064\t      1726\t       828\tEncours des dettes bancaires net de l&#39;aide du fonds de soutien pour la sortie des emprunts toxiques\t    118,00\t     63,52\r\n      2837\t       195\t       108\tAnnuit&#233; de la dette\t\t\t\t\t     13,36\t      8,28\r\n      1516\t       104\t       286\tFONDS DE ROULEMENT\r\n\r\n\r\n\t\t\t\t\t\tELEMENTS DE FISCALITE DIRECTE LOCALE\r\nLes bases impos&#233;es et les r&#233;ductions (exon&#233;rations, abattements) accord&#233;es sur d&#233;lib&#233;rations\r\nBases nettes impos&#233;es au profit de la commune               Taxe\t\t\t\t\tR&#233;ductions de base accord&#233;es sur d&#233;lib&#233;rations\r\nEn milliers d&#39;Euros  Euros par habitant\t\tMoyenne de la strate\t\t\tEn milliers d&#39;Euros     Euros par habitant   Moyenne de la strate\r\n     25249\t      1739\t      1441\tTaxe d&#39;habitation (y compris THLV)\t\t\t      2142\t       148\t       116\r\n     23211\t      1599\t      1384\tTaxe fonci&#232;re sur les propri&#233;t&#233;s b&#226;ties\t\t\t         0\t         0\t         1\r\n       177\t        12\t        11\tTaxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\t\t         0\t         0\t         0\r\n         0\t         0\t         0\tTaxe additionnelle &#224; la taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\r\n         0\t         0\t         0\tCotisation fonci&#232;re des entreprises\t\t\t         0\t         0\t         0\r\n\r\nLes taux et les produits de la fiscalit&#233; directe locale\r\nProduits des imp&#244;ts locaux            Taxe\t\t\t\t\t\t\t\tTaux vot&#233; (%)\tTaux moyen de la strate (%)\r\n      6133\t       422\t       240\tTaxe d&#39;habitation (y compris THLV)\t\t\t     24,27\t     16,66\r\n      6135\t       423\t       313\tTaxe fonci&#232;re sur les propri&#233;t&#233;s b&#226;ties\t\t\t     26,38\t     22,58\r\n       116\t         8\t         6\tTaxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\t\t     65,39\t     53,69\r\n         0\t         0\t         0\tTaxe additionnelle &#224; la taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\t\t      0,00\t      0,00\r\n         0\t         0\t         0\tCotisation fonci&#232;re des entreprises\t\t\t      0,00\t      0,00\r\n\r\nLes produits des imp&#244;ts de r&#233;partition\r\nProduits des imp&#244;ts de r&#233;partition      Taxe\r\n         0\t         0\t         0\tCotisation sur la valeur ajout&#233;e des entreprises\r\n         0\t         0\t         0\tImposition forfaitaire sur les entreprises de r&#233;seau\r\n         0\t         0\t         0\tTaxe sur les surfaces commerciales\r\n```\r\n\r\n---\r\n\r\nWhat _OpenAPI_ REST service call currently respond, if a client calls it:\r\n\r\n```json\r\n{\r\n  &quot;anneeExercice&quot;: 2019,\r\n  &quot;population&quot;: 14520,\r\n  &quot;siren&quot;: &quot;212900468&quot;,\r\n  &quot;code&quot;: &quot;29046&quot;,\r\n  &quot;nom&quot;: &quot;Douarnenez&quot;,\r\n  &quot;produitsDeFonctionnement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 21441.85,\r\n    &quot;parHabitant&quot;: 1476.71,\r\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES PRODUITS DE FONCTIONNEMENT = A\\t\\t\\ten % des produits CAF&quot;,\r\n    &quot;moyenneStrate&quot;: 1354.49\r\n  },\r\n  &quot;produitsDeFonctionnementCAF&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 21240.31,\r\n    &quot;parHabitant&quot;: 1462.83,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tPRODUITS DE FONCTIONNEMENT CAF&quot;,\r\n    &quot;moyenneStrate&quot;: 1302.89\r\n  },\r\n  &quot;produitsDeFonctionnementCAFImpotsLocaux&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 12378.83,\r\n    &quot;parHabitant&quot;: 852.54,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tdont : Imp&#244;ts Locaux\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 58.28,\r\n    &quot;moyenneStrate&quot;: 562.74,\r\n    &quot;ratioStrate&quot;: 43.19\r\n  },\r\n  &quot;produitsDeFonctionnementCAFAutresImpotsEtTaxes&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 1417.63,\r\n    &quot;parHabitant&quot;: 97.63,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tAutres imp&#244;ts et taxes\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: null,\r\n    &quot;moyenneStrate&quot;: 114.91,\r\n    &quot;ratioStrate&quot;: 8.82\r\n  },\r\n  &quot;produitsDeFonctionnementCAFDGF&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 1793.63,\r\n    &quot;parHabitant&quot;: 123.53,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tDotation globale de fonctionnement&quot;,\r\n    &quot;ratioStructure&quot;: 8.44,\r\n    &quot;moyenneStrate&quot;: 176.8,\r\n    &quot;ratioStrate&quot;: 13.57\r\n  },\r\n  &quot;chargesDeFonctionnement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 19999.67,\r\n    &quot;parHabitant&quot;: 1377.39,\r\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES CHARGES DE FONCTIONNEMENT = B\\t\\t\\t\\ten % des charges CAF&quot;,\r\n    &quot;moyenneStrate&quot;: 1213.14\r\n  },\r\n  &quot;chargesDeFonctionnementCAF&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 18156.46,\r\n    &quot;parHabitant&quot;: 1250.44,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tCharges de fonctionnement CAF&quot;,\r\n    &quot;moyenneStrate&quot;: 1107.32\r\n  },\r\n  &quot;chargesDeFonctionnementCAFChargesDePersonnel&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 11226.09,\r\n    &quot;parHabitant&quot;: 773.15,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tdont : Charges de personnel\\t&quot;,\r\n    &quot;ratioStructure&quot;: 61.83,\r\n    &quot;moyenneStrate&quot;: 655.33,\r\n    &quot;ratioStrate&quot;: 59.18\r\n  },\r\n  &quot;chargesDeFonctionnementCAFAchatsEtChargesExternes&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 4493.45,\r\n    &quot;parHabitant&quot;: 309.47,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tachats et charges externes\\t&quot;,\r\n    &quot;ratioStructure&quot;: 24.75,\r\n    &quot;moyenneStrate&quot;: 272.19,\r\n    &quot;ratioStrate&quot;: 24.58\r\n  },\r\n  &quot;chargesDeFonctionnementCAFChargesFinancieres&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 910.77,\r\n    &quot;parHabitant&quot;: 62.73,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tCharges financi&#232;res\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 5.02,\r\n    &quot;moyenneStrate&quot;: 23.73,\r\n    &quot;ratioStrate&quot;: 2.14\r\n  },\r\n  &quot;chargesDeFonctionnementCAFSubventionsVersees&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 1024.37,\r\n    &quot;parHabitant&quot;: 70.55,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tSubventions vers&#233;es\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 5.64,\r\n    &quot;moyenneStrate&quot;: 88.79,\r\n    &quot;ratioStrate&quot;: 8.02\r\n  },\r\n  &quot;resultatComptable&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 1442.19,\r\n    &quot;parHabitant&quot;: 99.32,\r\n    &quot;libelleAnalyse&quot;: &quot;R&#233;sultat comptable = A - B = R&quot;,\r\n    &quot;moyenneStrate&quot;: 141.35\r\n  },\r\n  &quot;ressourcesInvestissement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 7099.06,\r\n    &quot;parHabitant&quot;: 488.92,\r\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES RESSOURCES D&#39;INVESTISSEMENT = C\\t\\t\\ten % des ressources&quot;,\r\n    &quot;moyenneStrate&quot;: 482.4\r\n  },\r\n  &quot;ressourcesInvestissementEmpruntsBancairesDettesAssimilees&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 1800,\r\n    &quot;parHabitant&quot;: 123.97,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tdont : Emprunts bancaires et dettes assimil&#233;es&quot;,\r\n    &quot;ratioStructure&quot;: 25.36,\r\n    &quot;moyenneStrate&quot;: 78.77,\r\n    &quot;ratioStrate&quot;: 16.33\r\n  },\r\n  &quot;ressourcesInvestissementSubventionsRecues&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 526.43,\r\n    &quot;parHabitant&quot;: 36.26,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tSubventions re&#231;ues\\t\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 7.42,\r\n    &quot;moyenneStrate&quot;: 71.58,\r\n    &quot;ratioStrate&quot;: 14.84\r\n  },\r\n  &quot;ressourcesInvestissementFCTVA&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 450.22,\r\n    &quot;parHabitant&quot;: 31.01,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tFonds de compensation de la TVA (FCTVA)\\t&quot;,\r\n    &quot;ratioStructure&quot;: 6.34,\r\n    &quot;moyenneStrate&quot;: 39.93,\r\n    &quot;ratioStrate&quot;: 8.28\r\n  },\r\n  &quot;emploisInvestissement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 6481.48,\r\n    &quot;parHabitant&quot;: 446.38,\r\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES EMPLOIS D&#39;INVESTISSEMENT = D\\t\\t\\t\\ten % des emplois&quot;,\r\n    &quot;moyenneStrate&quot;: 499.52\r\n  },\r\n  &quot;emploisInvestissementDepensesEquipement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 4514.68,\r\n    &quot;parHabitant&quot;: 310.93,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tdont : D&#233;penses d&#39;&#233;quipement\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 69.66,\r\n    &quot;moyenneStrate&quot;: 376.48,\r\n    &quot;ratioStrate&quot;: 75.37\r\n  },\r\n  &quot;emploisInvestissementRemboursementEmpruntsDettesAssimilees&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 1926.02,\r\n    &quot;parHabitant&quot;: 132.65,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tRemboursement d&#39;emprunts et dettes assimil&#233;es&quot;,\r\n    &quot;ratioStructure&quot;: 29.72,\r\n    &quot;moyenneStrate&quot;: 85.8,\r\n    &quot;ratioStrate&quot;: 17.18\r\n  },\r\n  &quot;autoFinancementCAF&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 3083.85,\r\n    &quot;parHabitant&quot;: 212.39,\r\n    &quot;libelleAnalyse&quot;: &quot;Capacit&#233; d&#39;autofinancement = CAF\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 14.52,\r\n    &quot;moyenneStrate&quot;: 195.58,\r\n    &quot;ratioStrate&quot;: 15.01\r\n  },\r\n\r\n  &quot;endettementEncoursDetteBancaireNetteSoutienSortieEmpruntsToxiques&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 25064.14,\r\n    &quot;parHabitant&quot;: 1726.18,\r\n    &quot;libelleAnalyse&quot;: &quot;Encours des dettes bancaires net de l&#39;aide du fonds de soutien pour la sortie des emprunts toxiques&quot;,\r\n    &quot;ratioStructure&quot;: 118,\r\n    &quot;moyenneStrate&quot;: 827.62,\r\n    &quot;ratioStrate&quot;: 63.52\r\n  },\r\n  &quot;endettementAnnuiteDette&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 2836.79,\r\n    &quot;parHabitant&quot;: 195.37,\r\n    &quot;libelleAnalyse&quot;: &quot;Annuit&#233; de la dette\\t\\t\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 13.36,\r\n    &quot;moyenneStrate&quot;: 107.83,\r\n    &quot;ratioStrate&quot;: 8.28\r\n  },\r\n  &quot;fiscLocalBaseNetteTaxeHabitation&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\r\n    &quot;montant&quot;: 25248.77,\r\n    &quot;parHabitant&quot;: 1738.9,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe d&#39;habitation (y compris THLV)\\t\\t&quot;,\r\n    &quot;reductionVotee&quot;: 2142.17,\r\n    &quot;moyenneStrate&quot;: 1441.29,\r\n    &quot;reductionVoteeParHabitant&quot;: 147.53,\r\n    &quot;reductionVoteeMoyenneStrate&quot;: 116.45\r\n  },\r\n  &quot;fiscLocalBaseNetteTaxeFonciereProprietesBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\r\n    &quot;montant&quot;: 23211.43,\r\n    &quot;parHabitant&quot;: 1598.58,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe fonci&#232;re sur les propri&#233;t&#233;s b&#226;ties\\t\\t&quot;,\r\n    &quot;reductionVotee&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 1384.36,\r\n    &quot;reductionVoteeParHabitant&quot;: 0,\r\n    &quot;reductionVoteeMoyenneStrate&quot;: 0.86\r\n  },\r\n  &quot;fiscLocalBaseNetteTaxeFonciereProprietesNonBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\r\n    &quot;montant&quot;: 177.14,\r\n    &quot;parHabitant&quot;: 12.2,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\\t&quot;,\r\n    &quot;reductionVotee&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 10.59,\r\n    &quot;reductionVoteeParHabitant&quot;: 0,\r\n    &quot;reductionVoteeMoyenneStrate&quot;: 0.02\r\n  },\r\n  &quot;fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe additionnelle &#224; la taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties&quot;,\r\n    &quot;moyenneStrate&quot;: 0\r\n  },\r\n  &quot;fiscLocalBaseNetteCotisationFonciereEntreprises&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Cotisation fonci&#232;re des entreprises\\t\\t&quot;,\r\n    &quot;reductionVotee&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0,\r\n    &quot;reductionVoteeParHabitant&quot;: 0,\r\n    &quot;reductionVoteeMoyenneStrate&quot;: 0\r\n  },\r\n  &quot;impotsLocauxTaxeHabitation&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\r\n    &quot;montant&quot;: 6133.04,\r\n    &quot;parHabitant&quot;: 422.39,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe d&#39;habitation (y compris THLV)\\t\\t&quot;,\r\n    &quot;tauxVote&quot;: 24.27,\r\n    &quot;moyenneStrate&quot;: 240.18,\r\n    &quot;tauxStrate&quot;: 16.66\r\n  },\r\n  &quot;impotsLocauxTaxeFonciereProprietesBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\r\n    &quot;montant&quot;: 6135.35,\r\n    &quot;parHabitant&quot;: 422.54,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe fonci&#232;re sur les propri&#233;t&#233;s b&#226;ties\\t\\t&quot;,\r\n    &quot;tauxVote&quot;: 26.38,\r\n    &quot;moyenneStrate&quot;: 312.61,\r\n    &quot;tauxStrate&quot;: 22.58\r\n  },\r\n  &quot;impotsLocauxTaxeFonciereProprietesNonBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\r\n    &quot;montant&quot;: 115.92,\r\n    &quot;parHabitant&quot;: 7.98,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\\t&quot;,\r\n    &quot;tauxVote&quot;: 65.39,\r\n    &quot;moyenneStrate&quot;: 5.69,\r\n    &quot;tauxStrate&quot;: 53.69\r\n  },\r\n  &quot;impotsLocauxCotisationFonciereEntreprises&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Cotisation fonci&#232;re des entreprises\\t\\t&quot;,\r\n    &quot;tauxVote&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0,\r\n    &quot;tauxStrate&quot;: 0\r\n  },\r\n  &quot;impotsLocauxTaxeAdditionnelleFonciereProprietesNonBaties&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe additionnelle &#224; la taxe fonci&#232;re sur les propri&#233;t&#233;s non b&#226;ties\\t&quot;,\r\n    &quot;tauxVote&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0,\r\n    &quot;tauxStrate&quot;: 0\r\n  },\r\n  &quot;produitsImpotsRepartitionCotisationValeurAjouteeEntreprises&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Cotisation sur la valeur ajout&#233;e des entreprises&quot;,\r\n    &quot;moyenneStrate&quot;: 0\r\n  },\r\n  &quot;produitsImpotsRepartitionImpositionForfaitaireEntreprisesReseau&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Imposition forfaitaire sur les entreprises de r&#233;seau&quot;,\r\n    &quot;moyenneStrate&quot;: 0\r\n  },\r\n  &quot;produitsImpotsRepartitionTaxeSurfacesCommerciales&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;Taxe sur les surfaces commerciales&quot;,\r\n    &quot;moyenneStrate&quot;: 0\r\n  },\r\n  &quot;ratiosNiveauxEtStructure&quot;: {\r\n    &quot;annulationLogique&quot;: false,\r\n    &quot;capaciteDesendettement&quot;: 8.136469024109473,\r\n    &quot;depensesReellesFonctionnementSurPopulation&quot;: null\r\n  },\r\n  &quot;codeRegion&quot;: &quot;53&quot;,\r\n  &quot;codeDepartement&quot;: &quot;29&quot;,\r\n  &quot;typeGroupementAppartenance&quot;: &quot;appartenant &#224; un groupement fiscalis&#233; (FPU)&quot;,\r\n  &quot;libelleStrateCommune&quot;: &quot;communes de 10 000 &#224; 20 000 hab&quot;,\r\n  &quot;chargesDeFonctionnementCAFContingents&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 228.89,\r\n    &quot;parHabitant&quot;: 15.76,\r\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tContingents\\t\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 1.26,\r\n    &quot;moyenneStrate&quot;: 33.02,\r\n    &quot;ratioStrate&quot;: 2.98\r\n  },\r\n  &quot;ressourcesInvestissementRetourDeBiensAffectesConcedes&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tRetour de biens affect&#233;s, conc&#233;d&#233;s, ...\\t&quot;,\r\n    &quot;ratioStructure&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0,\r\n    &quot;ratioStrate&quot;: 0\r\n  },\r\n  &quot;emploisInvestissementChargesARepartir&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tCharges &#224; r&#233;partir\\t\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0.53,\r\n    &quot;ratioStrate&quot;: 0.11\r\n  },\r\n  &quot;emploisInvestissementImmobilisationsAffecteesConcedees&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 0,\r\n    &quot;parHabitant&quot;: 0,\r\n    &quot;libelleAnalyse&quot;: &quot;\\tImmobilisations affect&#233;es, conc&#233;d&#233;es, ...&quot;,\r\n    &quot;ratioStructure&quot;: 0,\r\n    &quot;moyenneStrate&quot;: 0,\r\n    &quot;ratioStrate&quot;: 0\r\n  },\r\n  &quot;autoFinancementExcedentBrutDeFonctionnement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\r\n    &quot;montant&quot;: 3855,\r\n    &quot;parHabitant&quot;: 265.5,\r\n    &quot;libelleAnalyse&quot;: &quot;Exc&#233;dent brut de fonctionnement\\t\\t\\t&quot;,\r\n    &quot;ratioStructure&quot;: 18.15,\r\n    &quot;moyenneStrate&quot;: 214.1,\r\n    &quot;ratioStrate&quot;: 16.43\r\n  },\r\n  &quot;endettementFondsDeRoulement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 1516.15,\r\n    &quot;parHabitant&quot;: 104.42,\r\n    &quot;libelleAnalyse&quot;: &quot;FONDS DE ROULEMENT&quot;,\r\n    &quot;moyenneStrate&quot;: 285.78\r\n  },\r\n  &quot;operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: -617.58,\r\n    &quot;parHabitant&quot;: -42.53,\r\n    &quot;libelleAnalyse&quot;: &quot;Besoin ou capacit&#233; de financement r&#233;siduel de la section d&#39;investissement = D - C&quot;,\r\n    &quot;moyenneStrate&quot;: 17.12\r\n  },\r\n  &quot;operationsInvestissementSoldeDesOperationsPourCompteDeTiers&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 0.28,\r\n    &quot;parHabitant&quot;: 0.02,\r\n    &quot;libelleAnalyse&quot;: &quot;+ Solde des op&#233;rations pour le compte de tiers&quot;,\r\n    &quot;moyenneStrate&quot;: 0.86\r\n  },\r\n  &quot;operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: -617.3,\r\n    &quot;parHabitant&quot;: -42.51,\r\n    &quot;libelleAnalyse&quot;: &quot;Besoin ou capacit&#233; de financement de la section d&#39;investissement = E&quot;,\r\n    &quot;moyenneStrate&quot;: 17.98\r\n  },\r\n  &quot;operationsInvestissementResultatEnsemble&quot;: {\r\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\r\n    &quot;montant&quot;: 2059.49,\r\n    &quot;parHabitant&quot;: 141.84,\r\n    &quot;libelleAnalyse&quot;: &quot;R&#233;sultat d&#39;ensemble = R - E&quot;,\r\n    &quot;moyenneStrate&quot;: 123.37\r\n  },\r\n  &quot;codeCommune&quot;: &quot;29046&quot;,\r\n  &quot;nomCommune&quot;: &quot;Douarnenez&quot;,\r\n  &quot;sirenCommune&quot;: &quot;212900468&quot;,\r\n  &quot;populationCommune&quot;: 14520\r\n}\r\n```\r\n\r\n(It&#39;s the output of a container class, `ComptesIndividuelsCommune`, holding the classes I&#39;ve described, and starting that way:\r\n\r\n```java\r\npublic class ComptesIndividuelsCommune {\r\n   @JsonProperty(&quot;anneeExercice&quot;)\r\n   private Integer anneeExercice;\r\n\r\n   @JsonProperty(&quot;population&quot;)\r\n   private Integer population;\r\n\r\n   @JsonProperty(&quot;siren&quot;)\r\n   private String siren;\r\n\r\n   @JsonProperty(&quot;code&quot;)\r\n   private String code;\r\n\r\n   @JsonProperty(&quot;nom&quot;)\r\n   private String nom;\r\n\r\n   @JsonProperty(&quot;produitsDeFonctionnement&quot;)\r\n   private ComptesAvecMoyenneStrate produitsDeFonctionnement;\r\n\r\n   [...]\r\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeHabitation&quot;)\r\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteTaxeHabitation;\r\n\r\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeFonciereProprietesBaties&quot;)\r\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteTaxeFonciereProprietesBaties;\r\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties&quot;)\r\n   private ComptesAvecMoyenneStrate fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties;\r\n\r\n   @JsonProperty(&quot;fiscLocalBaseNetteCotisationFonciereEntreprises&quot;)\r\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteCotisationFonciereEntreprises;\r\n   [...])\r\n```","title":"Java inheriting POJO classes -&gt; OpenAPI generator -&gt; openapi.json. Then: openapi.json -&gt; OpenAPI generation of Java client classes -&gt; inheritance lost","body":"<p>To create a report of Financial Balances of Cities (shown at the bottom of the question), I'm using classes that inherits each from the other:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Comptes avec montant, montant par habitant, strate, taux voté et taux moyen strate. */\n@Schema(description = &quot;Comptes avec total, par habitant, moyenne strate, total réduction votée, réduction par habitant, réduction moyenne strate&quot;, \n   allOf = ComptesAvecReductionVotee.class, \n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\npublic class ComptesAvecStrateEtTauxVoteEtStrate extends ComptesAvecTauxVote {\n   /** Moyenne de strate */\n   private Double moyenneStrate;\n\n   /** Taux de la strate */\n   private Double tauxStrate;\n   [...]\n</code></pre>\n<p>with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Comptes avec montant, montant par habitant, taux voté. */\n@Schema(description = &quot;Comptes avec total, par habitant, total réduction votée, réduction par habitant, réduction moyenne strate&quot;, \n   allOf = ComptesTotalOuBaseEtParHabitant.class,\n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\npublic class ComptesAvecTauxVote extends ComptesTotalOuBaseEtParHabitant {\n   /** Taux voté */\n   private Double tauxVote;\n   [...]\n</code></pre>\n<p>and:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/** Forme de comptes individuels : comptes total ou base, et par habitant. */\n@Schema(description = &quot;Forme de comptes individuels : comptes total ou base, et par habitant&quot;,\n   discriminatorProperty = &quot;typeCompteIndividuel&quot;)\npublic class ComptesTotalOuBaseEtParHabitant implements Serializable {\n   /** Type de compte Individuel */\n   @Schema(description = &quot;Type de compte individuel&quot;, required = true)\n   private String typeCompteIndividuel = getClass().getSimpleName();\n\n   /** Montant total ou base */\n   private Double montant;\n\n   /** Montant par habitant */\n   private Double parHabitant;\n\n   /** Libellé de l'analyse apportée par cette ligne de comptes individuels. */\n   private String libelleAnalyse;\n\n   /**\n    * Renvoyer le type de compte Individuel\n    * @return Type de compte Individuel\n    */\n   public String getTypeCompteIndividuel() {\n      return this.typeCompteIndividuel;\n   }\n\n   /**\n    * Fixer le type de compte Individuel\n    * @param typeCompteIndividuel Type de compte Individuel\n    */\n   public void setTypeCompteIndividuel(String typeCompteIndividuel) {\n      this.typeCompteIndividuel = typeCompteIndividuel;\n   }\n   [...]\n</code></pre>\n<p>Because an individual accounts of cities report have such repetitive structures, and individual accounts of local authorities, departments or regions also have them, sometimes with average calculations, sometimes not.</p>\n<p>These inherited classes make it convenient to do some calculations on the same basis.</p>\n<p>Everything is written in <em>Java</em>, as you can see. But, when I generate through <code>org.springdoc:springdoc-openapi-maven-plugin</code>, configured like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt; \n   &lt;apiDocsUrl&gt;http://localhost:9090/v3/api-docs&lt;/apiDocsUrl&gt; \n   &lt;outputFileName&gt;openapi.json&lt;/outputFileName&gt; \n   &lt;outputDir&gt;target/openapi&lt;/outputDir&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>the <code>openapi.json</code> file containing many classes of my application,</p>\n<p>and that a further project, being a client of it and written in <em>Java</em> too, generates for its use the classes from that <code>openapi.json</code>, with <code>org.openapitools:openapi-generator-maven-plugin</code> configured this way:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n    &lt;inputSpec&gt;${openapi}&lt;/inputSpec&gt;\n    &lt;output&gt;target/generated-sources/swagger/java&lt;/output&gt;\n\n    &lt;generatorName&gt;spring&lt;/generatorName&gt;\n    &lt;modelPackage&gt;${client.base.package.name}.model&lt;/modelPackage&gt;\n    &lt;apiPackage&gt;${client.base.package.name}.api&lt;/apiPackage&gt;\n    &lt;invokerPackage&gt;${client.base.package.name}.invoker&lt;/invokerPackage&gt;\n    &lt;skipValidateSpec&gt;true&lt;/skipValidateSpec&gt;\n\n    &lt;additionalProperties&gt;\n        &lt;version&gt;1.0.0&lt;/version&gt;\n        &lt;appVersion&gt;1.0.0&lt;/appVersion&gt;\n    &lt;/additionalProperties&gt;\n\n    &lt;configOptions&gt;\n        &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n        &lt;artifactId&gt;${project.artifactId}&lt;/artifactId&gt;\n        &lt;artifactVersion&gt;${project.version}&lt;/artifactVersion&gt;\n        &lt;oas3&gt;true&lt;/oas3&gt;\n    &lt;/configOptions&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>the inheritance of these classes isn't respected. Here's what is generated:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Schema(\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;,\n   description = &quot;Comptes avec total, par habitant, moyenne strate, total réduction votée, réduction par habitant, réduction moyenne strate&quot;\n)\npublic class ComptesAvecStrateEtReductionVotee extends ComptesAvecReductionVotee {\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\n   private String typeCompteIndividuel;\n   @JsonProperty(&quot;montant&quot;)\n   private Double montant;\n   @JsonProperty(&quot;parHabitant&quot;)\n   private Double parHabitant;\n   @JsonProperty(&quot;libelleAnalyse&quot;)\n   private String libelleAnalyse;\n   @JsonProperty(&quot;reductionVotee&quot;)\n   private Double reductionVotee;\n   @JsonProperty(&quot;moyenneStrate&quot;)\n   private Double moyenneStrate;\n   @JsonProperty(&quot;reductionVoteeParHabitant&quot;)\n   private Double reductionVoteeParHabitant;\n   @JsonProperty(&quot;reductionVoteeMoyenneStrate&quot;)\n   private Double reductionVoteeMoyenneStrate;\n   [...]\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Schema(\n   name = &quot;ComptesAvecReductionVotee&quot;,\n   description = &quot;Comptes avec total, par habitant, total réduction votée, réduction par habitant, réduction moyenne strate&quot;\n)\n@JsonIgnoreProperties(\n   value = {&quot;typeCompteIndividuel&quot;},\n   allowSetters = true\n)\n@JsonTypeInfo(\n   use = Id.NAME,\n   include = As.PROPERTY,\n   property = &quot;typeCompteIndividuel&quot;,\n   visible = true\n)\n@JsonSubTypes({@Type(\n   value = ComptesAvecStrateEtReductionVotee.class,\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;\n)})\npublic class ComptesAvecReductionVotee extends ComptesTotalOuBaseEtParHabitant {\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\n   private String typeCompteIndividuel;\n   @JsonProperty(&quot;montant&quot;)\n   private Double montant;\n   @JsonProperty(&quot;parHabitant&quot;)\n   private Double parHabitant;\n   @JsonProperty(&quot;libelleAnalyse&quot;)\n   private String libelleAnalyse;\n   @JsonProperty(&quot;reductionVotee&quot;)\n   private Double reductionVotee;\n   [...]\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Schema(\n   name = &quot;ComptesTotalOuBaseEtParHabitant&quot;,\n   description = &quot;Forme de comptes individuels : comptes total ou base, et par habitant&quot;\n)\n@JsonIgnoreProperties(\n   value = {&quot;typeCompteIndividuel&quot;},\n   allowSetters = true\n)\n@JsonTypeInfo(\n   use = Id.NAME,\n   include = As.PROPERTY,\n   property = &quot;typeCompteIndividuel&quot;,\n   visible = true\n)\n@JsonSubTypes({@Type(\n   value = ComptesAvecReductionVotee.class,\n   name = &quot;ComptesAvecReductionVotee&quot;\n), @Type(\n   value = ComptesAvecStrateEtReductionVotee.class,\n   name = &quot;ComptesAvecStrateEtReductionVotee&quot;\n)})\npublic class ComptesTotalOuBaseEtParHabitant {\n   @JsonProperty(&quot;typeCompteIndividuel&quot;)\n   private String typeCompteIndividuel;\n   @JsonProperty(&quot;montant&quot;)\n   private Double montant;\n   @JsonProperty(&quot;parHabitant&quot;)\n   private Double parHabitant;\n   @JsonProperty(&quot;libelleAnalyse&quot;)\n   private String libelleAnalyse;\n   [...]\n</code></pre>\n<p>It does only a part of what it should...</p>\n<p>OpenAPI wrote few classes having some <code>extends</code>, yes, but subclasses still duplicate the fields <code>typeCompteIndividuel</code>, <code>montant</code>, <code>parHabitant</code>, for example. This client compiles, but it isn't the way I'm looking for, and I'm in the middle of things.</p>\n<ol>\n<li><p>How do I define such discriminator in my POJO classes?<br />\nI've attempted it, but it doesn't really work.</p>\n</li>\n<li><p>And... Am I required to?<br />\nCan OpenAPI do that as boilerplate generation, like:</p>\n<ul>\n<li>using the class name for discriminator on generation from server classes</li>\n<li>and using it too for client classes?</li>\n</ul>\n</li>\n</ol>\n<p>without I have any change to do in my POJO classes? Because adding a field in each able to inherit is cumbersome.</p>\n<hr />\n<p>The report that the inherited classes help to create (on the <em>Java</em> server):</p>\n<pre><code>Libellé du budget : Douarnenez\nPopulation légale en vigueur au 1er janvier de l'exercice : 14520   Budget principal seul\nStrate : Strate commune : communes de 10 000 à 20 000 hab       Type groupement d'appartenance : appartenant à un groupement fiscalisé (FPU)\nExercice : 2019     N° de département : 29      N° insee de la commune : 29046      N° de région : 53\n\n\nANALYSE DES EQUILIBRES FINANCIERS FONDAMENTAUX\n\nEn milliers d'Euros Euros par habitant  Moyenne de la strate    OPERATIONS DE FONCTIONNEMENT    Ratios de structure Moyenne de la strate (en %% des produits)\n\n\n                        OPERATIONS DE FONCTIONNEMENT\n\n     21442        1477        1354  TOTAL DES PRODUITS DE FONCTIONNEMENT = A            en % des produits CAF\n     21240        1463        1303      PRODUITS DE FONCTIONNEMENT CAF\n     12379         853         563          dont : Impôts Locaux                 58,28       43,19\n      1418          98         115          Autres impôts et taxes                  nu        8,82\n      1794         124         177          Dotation globale de fonctionnement        8,44       13,57\n\n     20000        1377        1213  TOTAL DES CHARGES DE FONCTIONNEMENT = B             en % des charges CAF\n     18156        1250        1107      Charges de fonctionnement CAF\n     11226         773         655          dont : Charges de personnel          61,83       59,18\n      4493         309         272          achats et charges externes           24,75       24,58\n       911          63          24          Charges financières               5,02        2,14\n       229          16          33          Contingents                   1,26        2,98\n      1024          71          89          Subventions versées               5,64        8,02\n      1442          99         141  Résultat comptable = A - B = R\n\n\n                        OPERATIONS D'INVESTISSEMENT\n\n      7099         489         482  TOTAL DES RESSOURCES D'INVESTISSEMENT = C           en % des ressources\n      1800         124          79      dont : Emprunts bancaires et dettes assimilées       25,36       16,33\n       526          36          72      Subventions reçues                    7,42       14,84\n       450          31          40      Fonds de compensation de la TVA (FCTVA)           6,34        8,28\n         0           0           0      Retour de biens affectés, concédés, ...           0,00        0,00\n\n      6481         446         500  TOTAL DES EMPLOIS D'INVESTISSEMENT = D              en % des emplois\n      4515         311         376      dont : Dépenses d'équipement                 69,66       75,37\n      1926         133          86      Remboursement d'emprunts et dettes assimilées        29,72       17,18\n         0           0           1      Charges à répartir                    0,00        0,11\n         0           0           0      Immobilisations affectées, concédées, ...         0,00        0,00\n\n      -618         -43          17  Besoin ou capacité de financement résiduel de la section d'investissement = D - C\n         0           0           1  + Solde des opérations pour le compte de tiers\n      -617         -43          18  Besoin ou capacité de financement de la section d'investissement = E\n      2059         142         123  Résultat d'ensemble = R - E\n\n\n                        AUTOFINANCEMENT                         en % des produits CAF\n\n      3855         266         214  Excédent brut de fonctionnement                  18,15       16,43\n      3084         212         196  Capacité d'autofinancement = CAF                 14,52       15,01\n      1158          80         110  CAF nette du remboursement en capital des emprunts        5,45        8,43\n\n                        ENDETTEMENT                         en % des produits CAF\n     25092        1728         850  Encours total de la dette au 31 décembre N          118,13       65,23\n     25092        1728         837  Encours des dettes bancaires et assimilées          118,13       64,27\n     25064        1726         828  Encours des dettes bancaires net de l'aide du fonds de soutien pour la sortie des emprunts toxiques     118,00       63,52\n      2837         195         108  Annuité de la dette                      13,36        8,28\n      1516         104         286  FONDS DE ROULEMENT\n\n\n                        ELEMENTS DE FISCALITE DIRECTE LOCALE\nLes bases imposées et les réductions (exonérations, abattements) accordées sur délibérations\nBases nettes imposées au profit de la commune               Taxe                    Réductions de base accordées sur délibérations\nEn milliers d'Euros  Euros par habitant     Moyenne de la strate            En milliers d'Euros     Euros par habitant   Moyenne de la strate\n     25249        1739        1441  Taxe d'habitation (y compris THLV)                2142         148         116\n     23211        1599        1384  Taxe foncière sur les propriétés bâties                  0           0           1\n       177          12          11  Taxe foncière sur les propriétés non bâties              0           0           0\n         0           0           0  Taxe additionnelle à la taxe foncière sur les propriétés non bâties\n         0           0           0  Cotisation foncière des entreprises                  0           0           0\n\nLes taux et les produits de la fiscalité directe locale\nProduits des impôts locaux            Taxe                              Taux voté (%)   Taux moyen de la strate (%)\n      6133         422         240  Taxe d'habitation (y compris THLV)               24,27       16,66\n      6135         423         313  Taxe foncière sur les propriétés bâties              26,38       22,58\n       116           8           6  Taxe foncière sur les propriétés non bâties          65,39       53,69\n         0           0           0  Taxe additionnelle à la taxe foncière sur les propriétés non bâties           0,00        0,00\n         0           0           0  Cotisation foncière des entreprises               0,00        0,00\n\nLes produits des impôts de répartition\nProduits des impôts de répartition      Taxe\n         0           0           0  Cotisation sur la valeur ajoutée des entreprises\n         0           0           0  Imposition forfaitaire sur les entreprises de réseau\n         0           0           0  Taxe sur les surfaces commerciales\n</code></pre>\n<hr />\n<p>What <em>OpenAPI</em> REST service call currently respond, if a client calls it:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;anneeExercice&quot;: 2019,\n  &quot;population&quot;: 14520,\n  &quot;siren&quot;: &quot;212900468&quot;,\n  &quot;code&quot;: &quot;29046&quot;,\n  &quot;nom&quot;: &quot;Douarnenez&quot;,\n  &quot;produitsDeFonctionnement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 21441.85,\n    &quot;parHabitant&quot;: 1476.71,\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES PRODUITS DE FONCTIONNEMENT = A\\t\\t\\ten % des produits CAF&quot;,\n    &quot;moyenneStrate&quot;: 1354.49\n  },\n  &quot;produitsDeFonctionnementCAF&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 21240.31,\n    &quot;parHabitant&quot;: 1462.83,\n    &quot;libelleAnalyse&quot;: &quot;\\tPRODUITS DE FONCTIONNEMENT CAF&quot;,\n    &quot;moyenneStrate&quot;: 1302.89\n  },\n  &quot;produitsDeFonctionnementCAFImpotsLocaux&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 12378.83,\n    &quot;parHabitant&quot;: 852.54,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tdont : Impôts Locaux\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 58.28,\n    &quot;moyenneStrate&quot;: 562.74,\n    &quot;ratioStrate&quot;: 43.19\n  },\n  &quot;produitsDeFonctionnementCAFAutresImpotsEtTaxes&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 1417.63,\n    &quot;parHabitant&quot;: 97.63,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tAutres impôts et taxes\\t\\t&quot;,\n    &quot;ratioStructure&quot;: null,\n    &quot;moyenneStrate&quot;: 114.91,\n    &quot;ratioStrate&quot;: 8.82\n  },\n  &quot;produitsDeFonctionnementCAFDGF&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 1793.63,\n    &quot;parHabitant&quot;: 123.53,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tDotation globale de fonctionnement&quot;,\n    &quot;ratioStructure&quot;: 8.44,\n    &quot;moyenneStrate&quot;: 176.8,\n    &quot;ratioStrate&quot;: 13.57\n  },\n  &quot;chargesDeFonctionnement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 19999.67,\n    &quot;parHabitant&quot;: 1377.39,\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES CHARGES DE FONCTIONNEMENT = B\\t\\t\\t\\ten % des charges CAF&quot;,\n    &quot;moyenneStrate&quot;: 1213.14\n  },\n  &quot;chargesDeFonctionnementCAF&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 18156.46,\n    &quot;parHabitant&quot;: 1250.44,\n    &quot;libelleAnalyse&quot;: &quot;\\tCharges de fonctionnement CAF&quot;,\n    &quot;moyenneStrate&quot;: 1107.32\n  },\n  &quot;chargesDeFonctionnementCAFChargesDePersonnel&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 11226.09,\n    &quot;parHabitant&quot;: 773.15,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tdont : Charges de personnel\\t&quot;,\n    &quot;ratioStructure&quot;: 61.83,\n    &quot;moyenneStrate&quot;: 655.33,\n    &quot;ratioStrate&quot;: 59.18\n  },\n  &quot;chargesDeFonctionnementCAFAchatsEtChargesExternes&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 4493.45,\n    &quot;parHabitant&quot;: 309.47,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tachats et charges externes\\t&quot;,\n    &quot;ratioStructure&quot;: 24.75,\n    &quot;moyenneStrate&quot;: 272.19,\n    &quot;ratioStrate&quot;: 24.58\n  },\n  &quot;chargesDeFonctionnementCAFChargesFinancieres&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 910.77,\n    &quot;parHabitant&quot;: 62.73,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tCharges financières\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 5.02,\n    &quot;moyenneStrate&quot;: 23.73,\n    &quot;ratioStrate&quot;: 2.14\n  },\n  &quot;chargesDeFonctionnementCAFSubventionsVersees&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 1024.37,\n    &quot;parHabitant&quot;: 70.55,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tSubventions versées\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 5.64,\n    &quot;moyenneStrate&quot;: 88.79,\n    &quot;ratioStrate&quot;: 8.02\n  },\n  &quot;resultatComptable&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 1442.19,\n    &quot;parHabitant&quot;: 99.32,\n    &quot;libelleAnalyse&quot;: &quot;Résultat comptable = A - B = R&quot;,\n    &quot;moyenneStrate&quot;: 141.35\n  },\n  &quot;ressourcesInvestissement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 7099.06,\n    &quot;parHabitant&quot;: 488.92,\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES RESSOURCES D'INVESTISSEMENT = C\\t\\t\\ten % des ressources&quot;,\n    &quot;moyenneStrate&quot;: 482.4\n  },\n  &quot;ressourcesInvestissementEmpruntsBancairesDettesAssimilees&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 1800,\n    &quot;parHabitant&quot;: 123.97,\n    &quot;libelleAnalyse&quot;: &quot;\\tdont : Emprunts bancaires et dettes assimilées&quot;,\n    &quot;ratioStructure&quot;: 25.36,\n    &quot;moyenneStrate&quot;: 78.77,\n    &quot;ratioStrate&quot;: 16.33\n  },\n  &quot;ressourcesInvestissementSubventionsRecues&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 526.43,\n    &quot;parHabitant&quot;: 36.26,\n    &quot;libelleAnalyse&quot;: &quot;\\tSubventions reçues\\t\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 7.42,\n    &quot;moyenneStrate&quot;: 71.58,\n    &quot;ratioStrate&quot;: 14.84\n  },\n  &quot;ressourcesInvestissementFCTVA&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 450.22,\n    &quot;parHabitant&quot;: 31.01,\n    &quot;libelleAnalyse&quot;: &quot;\\tFonds de compensation de la TVA (FCTVA)\\t&quot;,\n    &quot;ratioStructure&quot;: 6.34,\n    &quot;moyenneStrate&quot;: 39.93,\n    &quot;ratioStrate&quot;: 8.28\n  },\n  &quot;emploisInvestissement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 6481.48,\n    &quot;parHabitant&quot;: 446.38,\n    &quot;libelleAnalyse&quot;: &quot;TOTAL DES EMPLOIS D'INVESTISSEMENT = D\\t\\t\\t\\ten % des emplois&quot;,\n    &quot;moyenneStrate&quot;: 499.52\n  },\n  &quot;emploisInvestissementDepensesEquipement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 4514.68,\n    &quot;parHabitant&quot;: 310.93,\n    &quot;libelleAnalyse&quot;: &quot;\\tdont : Dépenses d'équipement\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 69.66,\n    &quot;moyenneStrate&quot;: 376.48,\n    &quot;ratioStrate&quot;: 75.37\n  },\n  &quot;emploisInvestissementRemboursementEmpruntsDettesAssimilees&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 1926.02,\n    &quot;parHabitant&quot;: 132.65,\n    &quot;libelleAnalyse&quot;: &quot;\\tRemboursement d'emprunts et dettes assimilées&quot;,\n    &quot;ratioStructure&quot;: 29.72,\n    &quot;moyenneStrate&quot;: 85.8,\n    &quot;ratioStrate&quot;: 17.18\n  },\n  &quot;autoFinancementCAF&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 3083.85,\n    &quot;parHabitant&quot;: 212.39,\n    &quot;libelleAnalyse&quot;: &quot;Capacité d'autofinancement = CAF\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 14.52,\n    &quot;moyenneStrate&quot;: 195.58,\n    &quot;ratioStrate&quot;: 15.01\n  },\n\n  &quot;endettementEncoursDetteBancaireNetteSoutienSortieEmpruntsToxiques&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 25064.14,\n    &quot;parHabitant&quot;: 1726.18,\n    &quot;libelleAnalyse&quot;: &quot;Encours des dettes bancaires net de l'aide du fonds de soutien pour la sortie des emprunts toxiques&quot;,\n    &quot;ratioStructure&quot;: 118,\n    &quot;moyenneStrate&quot;: 827.62,\n    &quot;ratioStrate&quot;: 63.52\n  },\n  &quot;endettementAnnuiteDette&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 2836.79,\n    &quot;parHabitant&quot;: 195.37,\n    &quot;libelleAnalyse&quot;: &quot;Annuité de la dette\\t\\t\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 13.36,\n    &quot;moyenneStrate&quot;: 107.83,\n    &quot;ratioStrate&quot;: 8.28\n  },\n  &quot;fiscLocalBaseNetteTaxeHabitation&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\n    &quot;montant&quot;: 25248.77,\n    &quot;parHabitant&quot;: 1738.9,\n    &quot;libelleAnalyse&quot;: &quot;Taxe d'habitation (y compris THLV)\\t\\t&quot;,\n    &quot;reductionVotee&quot;: 2142.17,\n    &quot;moyenneStrate&quot;: 1441.29,\n    &quot;reductionVoteeParHabitant&quot;: 147.53,\n    &quot;reductionVoteeMoyenneStrate&quot;: 116.45\n  },\n  &quot;fiscLocalBaseNetteTaxeFonciereProprietesBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\n    &quot;montant&quot;: 23211.43,\n    &quot;parHabitant&quot;: 1598.58,\n    &quot;libelleAnalyse&quot;: &quot;Taxe foncière sur les propriétés bâties\\t\\t&quot;,\n    &quot;reductionVotee&quot;: 0,\n    &quot;moyenneStrate&quot;: 1384.36,\n    &quot;reductionVoteeParHabitant&quot;: 0,\n    &quot;reductionVoteeMoyenneStrate&quot;: 0.86\n  },\n  &quot;fiscLocalBaseNetteTaxeFonciereProprietesNonBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\n    &quot;montant&quot;: 177.14,\n    &quot;parHabitant&quot;: 12.2,\n    &quot;libelleAnalyse&quot;: &quot;Taxe foncière sur les propriétés non bâties\\t&quot;,\n    &quot;reductionVotee&quot;: 0,\n    &quot;moyenneStrate&quot;: 10.59,\n    &quot;reductionVoteeParHabitant&quot;: 0,\n    &quot;reductionVoteeMoyenneStrate&quot;: 0.02\n  },\n  &quot;fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Taxe additionnelle à la taxe foncière sur les propriétés non bâties&quot;,\n    &quot;moyenneStrate&quot;: 0\n  },\n  &quot;fiscLocalBaseNetteCotisationFonciereEntreprises&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtReductionVotee&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Cotisation foncière des entreprises\\t\\t&quot;,\n    &quot;reductionVotee&quot;: 0,\n    &quot;moyenneStrate&quot;: 0,\n    &quot;reductionVoteeParHabitant&quot;: 0,\n    &quot;reductionVoteeMoyenneStrate&quot;: 0\n  },\n  &quot;impotsLocauxTaxeHabitation&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\n    &quot;montant&quot;: 6133.04,\n    &quot;parHabitant&quot;: 422.39,\n    &quot;libelleAnalyse&quot;: &quot;Taxe d'habitation (y compris THLV)\\t\\t&quot;,\n    &quot;tauxVote&quot;: 24.27,\n    &quot;moyenneStrate&quot;: 240.18,\n    &quot;tauxStrate&quot;: 16.66\n  },\n  &quot;impotsLocauxTaxeFonciereProprietesBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\n    &quot;montant&quot;: 6135.35,\n    &quot;parHabitant&quot;: 422.54,\n    &quot;libelleAnalyse&quot;: &quot;Taxe foncière sur les propriétés bâties\\t\\t&quot;,\n    &quot;tauxVote&quot;: 26.38,\n    &quot;moyenneStrate&quot;: 312.61,\n    &quot;tauxStrate&quot;: 22.58\n  },\n  &quot;impotsLocauxTaxeFonciereProprietesNonBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\n    &quot;montant&quot;: 115.92,\n    &quot;parHabitant&quot;: 7.98,\n    &quot;libelleAnalyse&quot;: &quot;Taxe foncière sur les propriétés non bâties\\t&quot;,\n    &quot;tauxVote&quot;: 65.39,\n    &quot;moyenneStrate&quot;: 5.69,\n    &quot;tauxStrate&quot;: 53.69\n  },\n  &quot;impotsLocauxCotisationFonciereEntreprises&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Cotisation foncière des entreprises\\t\\t&quot;,\n    &quot;tauxVote&quot;: 0,\n    &quot;moyenneStrate&quot;: 0,\n    &quot;tauxStrate&quot;: 0\n  },\n  &quot;impotsLocauxTaxeAdditionnelleFonciereProprietesNonBaties&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtTauxVoteEtStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Taxe additionnelle à la taxe foncière sur les propriétés non bâties\\t&quot;,\n    &quot;tauxVote&quot;: 0,\n    &quot;moyenneStrate&quot;: 0,\n    &quot;tauxStrate&quot;: 0\n  },\n  &quot;produitsImpotsRepartitionCotisationValeurAjouteeEntreprises&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Cotisation sur la valeur ajoutée des entreprises&quot;,\n    &quot;moyenneStrate&quot;: 0\n  },\n  &quot;produitsImpotsRepartitionImpositionForfaitaireEntreprisesReseau&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Imposition forfaitaire sur les entreprises de réseau&quot;,\n    &quot;moyenneStrate&quot;: 0\n  },\n  &quot;produitsImpotsRepartitionTaxeSurfacesCommerciales&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;Taxe sur les surfaces commerciales&quot;,\n    &quot;moyenneStrate&quot;: 0\n  },\n  &quot;ratiosNiveauxEtStructure&quot;: {\n    &quot;annulationLogique&quot;: false,\n    &quot;capaciteDesendettement&quot;: 8.136469024109473,\n    &quot;depensesReellesFonctionnementSurPopulation&quot;: null\n  },\n  &quot;codeRegion&quot;: &quot;53&quot;,\n  &quot;codeDepartement&quot;: &quot;29&quot;,\n  &quot;typeGroupementAppartenance&quot;: &quot;appartenant à un groupement fiscalisé (FPU)&quot;,\n  &quot;libelleStrateCommune&quot;: &quot;communes de 10 000 à 20 000 hab&quot;,\n  &quot;chargesDeFonctionnementCAFContingents&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 228.89,\n    &quot;parHabitant&quot;: 15.76,\n    &quot;libelleAnalyse&quot;: &quot;\\t\\tContingents\\t\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 1.26,\n    &quot;moyenneStrate&quot;: 33.02,\n    &quot;ratioStrate&quot;: 2.98\n  },\n  &quot;ressourcesInvestissementRetourDeBiensAffectesConcedes&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;\\tRetour de biens affectés, concédés, ...\\t&quot;,\n    &quot;ratioStructure&quot;: 0,\n    &quot;moyenneStrate&quot;: 0,\n    &quot;ratioStrate&quot;: 0\n  },\n  &quot;emploisInvestissementChargesARepartir&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;\\tCharges à répartir\\t\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 0,\n    &quot;moyenneStrate&quot;: 0.53,\n    &quot;ratioStrate&quot;: 0.11\n  },\n  &quot;emploisInvestissementImmobilisationsAffecteesConcedees&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 0,\n    &quot;parHabitant&quot;: 0,\n    &quot;libelleAnalyse&quot;: &quot;\\tImmobilisations affectées, concédées, ...&quot;,\n    &quot;ratioStructure&quot;: 0,\n    &quot;moyenneStrate&quot;: 0,\n    &quot;ratioStrate&quot;: 0\n  },\n  &quot;autoFinancementExcedentBrutDeFonctionnement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecStrateEtRatioStructureEtStrate&quot;,\n    &quot;montant&quot;: 3855,\n    &quot;parHabitant&quot;: 265.5,\n    &quot;libelleAnalyse&quot;: &quot;Excédent brut de fonctionnement\\t\\t\\t&quot;,\n    &quot;ratioStructure&quot;: 18.15,\n    &quot;moyenneStrate&quot;: 214.1,\n    &quot;ratioStrate&quot;: 16.43\n  },\n  &quot;endettementFondsDeRoulement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 1516.15,\n    &quot;parHabitant&quot;: 104.42,\n    &quot;libelleAnalyse&quot;: &quot;FONDS DE ROULEMENT&quot;,\n    &quot;moyenneStrate&quot;: 285.78\n  },\n  &quot;operationsInvestissementBesoinOuCapaciteFinancementResiduelSectionInvestissement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: -617.58,\n    &quot;parHabitant&quot;: -42.53,\n    &quot;libelleAnalyse&quot;: &quot;Besoin ou capacité de financement résiduel de la section d'investissement = D - C&quot;,\n    &quot;moyenneStrate&quot;: 17.12\n  },\n  &quot;operationsInvestissementSoldeDesOperationsPourCompteDeTiers&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 0.28,\n    &quot;parHabitant&quot;: 0.02,\n    &quot;libelleAnalyse&quot;: &quot;+ Solde des opérations pour le compte de tiers&quot;,\n    &quot;moyenneStrate&quot;: 0.86\n  },\n  &quot;operationsInvestissementBesoinOuCapaciteFinancementSectionInvestissement&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: -617.3,\n    &quot;parHabitant&quot;: -42.51,\n    &quot;libelleAnalyse&quot;: &quot;Besoin ou capacité de financement de la section d'investissement = E&quot;,\n    &quot;moyenneStrate&quot;: 17.98\n  },\n  &quot;operationsInvestissementResultatEnsemble&quot;: {\n    &quot;typeCompteIndividuel&quot;: &quot;ComptesAvecMoyenneStrate&quot;,\n    &quot;montant&quot;: 2059.49,\n    &quot;parHabitant&quot;: 141.84,\n    &quot;libelleAnalyse&quot;: &quot;Résultat d'ensemble = R - E&quot;,\n    &quot;moyenneStrate&quot;: 123.37\n  },\n  &quot;codeCommune&quot;: &quot;29046&quot;,\n  &quot;nomCommune&quot;: &quot;Douarnenez&quot;,\n  &quot;sirenCommune&quot;: &quot;212900468&quot;,\n  &quot;populationCommune&quot;: 14520\n}\n</code></pre>\n<p>(It's the output of a container class, <code>ComptesIndividuelsCommune</code>, holding the classes I've described, and starting that way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ComptesIndividuelsCommune {\n   @JsonProperty(&quot;anneeExercice&quot;)\n   private Integer anneeExercice;\n\n   @JsonProperty(&quot;population&quot;)\n   private Integer population;\n\n   @JsonProperty(&quot;siren&quot;)\n   private String siren;\n\n   @JsonProperty(&quot;code&quot;)\n   private String code;\n\n   @JsonProperty(&quot;nom&quot;)\n   private String nom;\n\n   @JsonProperty(&quot;produitsDeFonctionnement&quot;)\n   private ComptesAvecMoyenneStrate produitsDeFonctionnement;\n\n   [...]\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeHabitation&quot;)\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteTaxeHabitation;\n\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeFonciereProprietesBaties&quot;)\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteTaxeFonciereProprietesBaties;\n   @JsonProperty(&quot;fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties&quot;)\n   private ComptesAvecMoyenneStrate fiscLocalBaseNetteTaxeAdditionnelleFonciereProprietesNonBaties;\n\n   @JsonProperty(&quot;fiscLocalBaseNetteCotisationFonciereEntreprises&quot;)\n   private ComptesAvecStrateEtReductionVotee fiscLocalBaseNetteCotisationFonciereEntreprises;\n   [...])\n</code></pre>\n"},{"tags":["java","selenium-webdriver","self-healing","healenium"],"owner":{"account_id":5505051,"reputation":31,"user_id":4373122,"display_name":"Neeraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690284894,"creation_date":1690280481,"question_id":76761725,"body_markdown":"**Healenium Web version**\r\n&lt;version&gt;3.3.1&lt;/version&gt;\r\n\r\n**Healenium Backend version**\r\nhealenium/hlm-backend:3.3.0\r\n\r\n**Selenium version**\r\n4.8.0\r\n\r\n**Platform**\r\nJava\r\n\r\n**healenium.properties file**\r\n\r\n    recovery-tries=1 \r\n    score-cap=0.7 \r\n    heal-enable=true \r\n    serverHost=localhost \r\n    serverPort=7878 \r\n    imitatePort=8000\r\n\r\n **Logs appeared during using Healenium**\r\n\r\nTrying to heal...\r\n[main] WARN com.epam.healenium.client.RestClient - Failed to make response of &#39;getLastHealingData&#39; request. \r\njava.io.IOException: unexpected end of stream on http://localhost:7878/...","title":"WARN com.epam.healenium.client.RestClient - Failed to make response of &#39;getLastHealingData&#39; request","body":"<p><strong>Healenium Web version</strong>\n3.3.1</p>\n<p><strong>Healenium Backend version</strong>\nhealenium/hlm-backend:3.3.0</p>\n<p><strong>Selenium version</strong>\n4.8.0</p>\n<p><strong>Platform</strong>\nJava</p>\n<p><strong>healenium.properties file</strong></p>\n<pre><code>recovery-tries=1 \nscore-cap=0.7 \nheal-enable=true \nserverHost=localhost \nserverPort=7878 \nimitatePort=8000\n</code></pre>\n<p><strong>Logs appeared during using Healenium</strong></p>\n<p>Trying to heal...\n[main] WARN com.epam.healenium.client.RestClient - Failed to make response of 'getLastHealingData' request.\njava.io.IOException: unexpected end of stream on http://localhost:7878/...</p>\n"},{"tags":["java","selenium","parallel-processing","execution"],"comments":[{"owner":{"account_id":3932036,"reputation":9944,"user_id":3250126,"accept_rate":93,"display_name":"loki"},"score":0,"creation_date":1508828701,"post_id":46904109,"comment_id":80754971,"body_markdown":"What have your tried so far?","body":"What have your tried so far?"},{"owner":{"account_id":7513612,"reputation":1945,"user_id":5707795,"accept_rate":48,"display_name":"Pradeep"},"score":0,"creation_date":1508828723,"post_id":46904109,"comment_id":80754983,"body_markdown":"I think u can go with setting priorities to test methods which returns values synchronously. https://www.guru99.com/test-case-priority-testng.html","body":"I think u can go with setting priorities to test methods which returns values synchronously. <a href=\"https://www.guru99.com/test-case-priority-testng.html\" rel=\"nofollow noreferrer\">guru99.com/test-case-priority-testng.html</a>"},{"owner":{"account_id":12066664,"reputation":61,"user_id":8823444,"display_name":"Kris"},"score":0,"creation_date":1508834988,"post_id":46904109,"comment_id":80758781,"body_markdown":"Thanks for your responses Pradeep &amp; Loki .. got the solution , actually in our scenario same test cases runs in 10 browsers , at run time we capture an id and pass to further execution , as quoted sequential working fine but at parallel execution id&#39;s variable getting overlapped with another one which is failing , but now with thread local variable this is fixed","body":"Thanks for your responses Pradeep &amp; Loki .. got the solution , actually in our scenario same test cases runs in 10 browsers , at run time we capture an id and pass to further execution , as quoted sequential working fine but at parallel execution id&#39;s variable getting overlapped with another one which is failing , but now with thread local variable this is fixed"}],"answers":[{"tags":[],"owner":{"account_id":12066664,"reputation":61,"user_id":8823444,"display_name":"Kris"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1508835051,"creation_date":1508834712,"answer_id":46905948,"question_id":46904109,"body_markdown":"Thanks ..! Got the solutions went with the  ThreadLocal variables concept \r\n\r\nMost of the environment specific values in my framework are defined as STATIC.\r\n\r\nIn Java, Static variables are used to share the data between the threads which means these variable are same across the threads. In that case, when second thread assigns a value to the static variable it overrides the value set by first thread. This causes the problem.\r\n\r\nTo overcome the above problem, there are two approaches we can consider.\r\n\r\n1) All the local variables in java are stored in Stack memory And each thread has it&#39;s own stack. So if you change the variables to local variables, it will solves the problem.\r\n\r\n2) with the above approach in the existing framework lot of dependencies will break. And it&#39;s always not easy to make variables to local. So we have to look for better solution. For this type of situations, we have ThreadLocal variables in java.\r\n\r\nhttp://learn-testing-urself.blogspot.in/2015/05/importance-of-threadlocal-in-parallel.html","title":"How to store runtime variables in parallel execution selenium java ?","body":"<p>Thanks ..! Got the solutions went with the  ThreadLocal variables concept </p>\n\n<p>Most of the environment specific values in my framework are defined as STATIC.</p>\n\n<p>In Java, Static variables are used to share the data between the threads which means these variable are same across the threads. In that case, when second thread assigns a value to the static variable it overrides the value set by first thread. This causes the problem.</p>\n\n<p>To overcome the above problem, there are two approaches we can consider.</p>\n\n<p>1) All the local variables in java are stored in Stack memory And each thread has it's own stack. So if you change the variables to local variables, it will solves the problem.</p>\n\n<p>2) with the above approach in the existing framework lot of dependencies will break. And it's always not easy to make variables to local. So we have to look for better solution. For this type of situations, we have ThreadLocal variables in java.</p>\n\n<p><a href=\"http://learn-testing-urself.blogspot.in/2015/05/importance-of-threadlocal-in-parallel.html\" rel=\"nofollow noreferrer\">http://learn-testing-urself.blogspot.in/2015/05/importance-of-threadlocal-in-parallel.html</a></p>\n"}],"owner":{"account_id":12066664,"reputation":61,"user_id":8823444,"display_name":"Kris"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1513,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1690284079,"creation_date":1508828423,"question_id":46904109,"body_markdown":"Actually i need to capture run time values and pass it over for the further execution. In sequentially execution its working perfectly but when i do remote executions  (in sauce labs) , at that juncture run time values are interchanged between the browser , which leads to failure.  (Because each browser will have to get separate value)\r\n\r\nCan you please throw me the light in this  ? \r\n\r\nThanks, Kris. ","title":"How to store runtime variables in parallel execution selenium java ?","body":"<p>Actually i need to capture run time values and pass it over for the further execution. In sequentially execution its working perfectly but when i do remote executions  (in sauce labs) , at that juncture run time values are interchanged between the browser , which leads to failure.  (Because each browser will have to get separate value)</p>\n\n<p>Can you please throw me the light in this  ? </p>\n\n<p>Thanks, Kris. </p>\n"},{"tags":["java","arrays","recursion"],"answers":[{"comments":[{"owner":{"account_id":6364023,"reputation":11,"user_id":4938544,"display_name":"EidA5"},"score":0,"creation_date":1458589413,"post_id":36140083,"comment_id":59918704,"body_markdown":"Holy shit I literally just made that same exact change before reading your comment. I added the count variable, and it worked, but I was curious is it possible to do it without the count variable?","body":"Holy shit I literally just made that same exact change before reading your comment. I added the count variable, and it worked, but I was curious is it possible to do it without the count variable?"},{"owner":{"account_id":3232181,"reputation":79,"user_id":2727182,"display_name":"ismaro3"},"score":0,"creation_date":1458589603,"post_id":36140083,"comment_id":59918802,"body_markdown":"It would be possible to do it with a global static &quot;count&quot; variable defined outside main() and smallest() methods... but I do not recommend using global variables. There is a way without using a count variable, that would imply removing the first element of the &quot;array&quot; array before every smallest() recursive call,... but it is easier and faster to use a &quot;count&quot; variable.","body":"It would be possible to do it with a global static &quot;count&quot; variable defined outside main() and smallest() methods... but I do not recommend using global variables. There is a way without using a count variable, that would imply removing the first element of the &quot;array&quot; array before every smallest() recursive call,... but it is easier and faster to use a &quot;count&quot; variable."}],"tags":[],"owner":{"account_id":3232181,"reputation":79,"user_id":2727182,"display_name":"ismaro3"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458589121,"creation_date":1458589121,"answer_id":36140083,"question_id":36139881,"body_markdown":"The problem is that one version of the variable &quot;count&quot; is created on every call of &quot;smallest&quot; and getting 0 assigned to it, so it doesn&#39;t matter you increase its value before calling &quot;smallest&quot; again.\r\nVariables created inside of a function are not shared between function calls.\r\n\r\nThe problem you has is caused because &quot;count&quot; is always 0 and the recursion never ends, so it ends in a stack overflow error.\r\n\r\nTo solve that you have to add another parameter, &quot;count&quot;, that will hold the iterations of the algorithm.\r\n\r\n    public static void main(String[] args) {\r\n\r\n\r\n    int[] array = {5,3,1,0,4,7};\r\n    int smallest = array[0];\r\n    System.out.println(smallest(array,smallest,0));\r\n\r\n\r\n\r\n    }\r\n\r\n\r\n    private static int smallest(int[] array, int smallest, int count){\r\n\r\n    if(array[count] &lt; smallest){\r\n        smallest = array[count];\r\n    }\r\n    else if(array[count] == array[array.length-1]){\r\n        return smallest;\r\n    }\r\n   \r\n    return smallest(array,smallest,count+1);\r\n\r\n    }\r\n\r\n","title":"Using recursion to find the smallest int an array?","body":"<p>The problem is that one version of the variable \"count\" is created on every call of \"smallest\" and getting 0 assigned to it, so it doesn't matter you increase its value before calling \"smallest\" again.\nVariables created inside of a function are not shared between function calls.</p>\n\n<p>The problem you has is caused because \"count\" is always 0 and the recursion never ends, so it ends in a stack overflow error.</p>\n\n<p>To solve that you have to add another parameter, \"count\", that will hold the iterations of the algorithm.</p>\n\n<pre><code>public static void main(String[] args) {\n\n\nint[] array = {5,3,1,0,4,7};\nint smallest = array[0];\nSystem.out.println(smallest(array,smallest,0));\n\n\n\n}\n\n\nprivate static int smallest(int[] array, int smallest, int count){\n\nif(array[count] &lt; smallest){\n    smallest = array[count];\n}\nelse if(array[count] == array[array.length-1]){\n    return smallest;\n}\n\nreturn smallest(array,smallest,count+1);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7562599,"reputation":6043,"user_id":6083675,"accept_rate":29,"display_name":"Laurel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458589220,"creation_date":1458589220,"answer_id":36140114,"question_id":36139881,"body_markdown":"Unless your code enters into the `if` or `else if` blocks, it will continue to go forward and call smallest, again. Since you are passing the exact same parameters, you are getting the exact same result. **Remember count is a local variable.** \r\n\r\n\r\nAlso, I think you may want `if` instead of `else if` because if the last number is smaller, you will likely get an exception.","title":"Using recursion to find the smallest int an array?","body":"<p>Unless your code enters into the <code>if</code> or <code>else if</code> blocks, it will continue to go forward and call smallest, again. Since you are passing the exact same parameters, you are getting the exact same result. <strong>Remember count is a local variable.</strong> </p>\n\n<p>Also, I think you may want <code>if</code> instead of <code>else if</code> because if the last number is smaller, you will likely get an exception.</p>\n"},{"tags":[],"owner":{"account_id":1504666,"reputation":302,"user_id":1408360,"display_name":"Peter L"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458589651,"creation_date":1458589651,"answer_id":36140233,"question_id":36139881,"body_markdown":"When you have two numbers, you just need to compare them to find the smallest. So, if you split your array into two, find a smallest in each half, then just compare the results to find the smallest. Here is the outline of your recursion (note: I did not compile or test it):\r\n\r\n`int getSmallest(ArrayList&lt;Integer&gt; numbers) {\r\n    if (numbers.size() == 1) return numbers.get(0);\r\n    int leftMin = getSmallest(numbers.subList(0, numbers.size()/2);\r\n    int rightMin = getSmallest(numbers.subList(numbers.size()/2, numbers.size());\r\n    return leftMin &lt; rightMin ? leftMin : rightMin;\r\n}`\r\n\r\nIf you need to use int[], you can still use the same approach, it just needs some tweaking :)","title":"Using recursion to find the smallest int an array?","body":"<p>When you have two numbers, you just need to compare them to find the smallest. So, if you split your array into two, find a smallest in each half, then just compare the results to find the smallest. Here is the outline of your recursion (note: I did not compile or test it):</p>\n\n<p><code>int getSmallest(ArrayList&lt;Integer&gt; numbers) {\n    if (numbers.size() == 1) return numbers.get(0);\n    int leftMin = getSmallest(numbers.subList(0, numbers.size()/2);\n    int rightMin = getSmallest(numbers.subList(numbers.size()/2, numbers.size());\n    return leftMin &lt; rightMin ? leftMin : rightMin;\n}</code></p>\n\n<p>If you need to use int[], you can still use the same approach, it just needs some tweaking :)</p>\n"}],"owner":{"account_id":6364023,"reputation":11,"user_id":4938544,"display_name":"EidA5"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":796,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1690283168,"creation_date":1458588445,"question_id":36139881,"body_markdown":"Here is my code.\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\t\r\n\t\tint[] array = {5,3,1,0,4,7};\r\n\t\tint smallest = array[0];\r\n\t\tSystem.out.println(smallest(array,smallest));\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t\r\n\tprivate static int smallest(int[] array, int smallest){\r\n\t\t\r\n\t\tint count = 0;\r\n\t\tif(array[count] &lt; smallest){\r\n\t\t\tsmallest = array[count];\r\n\t\t}\r\n\t\telse if(array[count] == array[array.length-1]){\r\n\t\t\treturn smallest;\r\n\t\t}\r\n\t\tcount++;\r\n\t\treturn smallest(array,smallest);\r\n\t\t\r\n\t}\r\n\t\r\n\r\n\r\nI need to use Java to find the smallest int in an array using RECURSION, I know how to use iteration to find it, but this is strictly recursion. Any help would be apperciated.. the error seems to me this line here.\r\n\r\n--&gt; return smallest(array,smallest);\r\n\r\n\r\n\t\t","title":"Using recursion to find the smallest int an array?","body":"<p>Here is my code.</p>\n<pre><code>public static void main(String[] args) {\n    \n    \n    int[] array = {5,3,1,0,4,7};\n    int smallest = array[0];\n    System.out.println(smallest(array,smallest));\n    \n    \n    \n}\n\n\nprivate static int smallest(int[] array, int smallest){\n    \n    int count = 0;\n    if(array[count] &lt; smallest){\n        smallest = array[count];\n    }\n    else if(array[count] == array[array.length-1]){\n        return smallest;\n    }\n    count++;\n    return smallest(array,smallest);\n    \n}\n</code></pre>\n<p>I need to use Java to find the smallest int in an array using RECURSION, I know how to use iteration to find it, but this is strictly recursion. Any help would be apperciated.. the error seems to me this line here.</p>\n<p>--&gt; return smallest(array,smallest);</p>\n"},{"tags":["java",".net","azure"],"answers":[{"comments":[{"owner":{"account_id":1133728,"reputation":5,"user_id":1119225,"display_name":"Xavier Casals"},"score":1,"creation_date":1690289468,"post_id":76762069,"comment_id":135330072,"body_markdown":"Sounds good. Thank you! Any chance I can do something similar without a Docker container? Just publishing my .NET app from DevOps embedding the Java SDK in the package?","body":"Sounds good. Thank you! Any chance I can do something similar without a Docker container? Just publishing my .NET app from DevOps embedding the Java SDK in the package?"},{"owner":{"account_id":26619036,"reputation":1003,"user_id":20238030,"display_name":"Suresh Chikkam"},"score":0,"creation_date":1690545359,"post_id":76762069,"comment_id":135372439,"body_markdown":"@XavierCasals, there is no other approach other than containerizing as I mentioned in the answer.","body":"@XavierCasals, there is no other approach other than containerizing as I mentioned in the answer."},{"owner":{"account_id":1133728,"reputation":5,"user_id":1119225,"display_name":"Xavier Casals"},"score":1,"creation_date":1690644465,"post_id":76762069,"comment_id":135383865,"body_markdown":"Thank you again. Then I&#39;ll go that way!","body":"Thank you again. Then I&#39;ll go that way!"}],"tags":[],"owner":{"account_id":26619036,"reputation":1003,"user_id":20238030,"display_name":"Suresh Chikkam"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690283009,"creation_date":1690283009,"answer_id":76762069,"question_id":76760718,"body_markdown":"- It is not possible to mix different runtime stacks in a single App Service instance directly.\r\n\r\n&gt;Creating a Java App Service is not a good solution for us.\r\n\r\n- As following to the condition without creating a separate app service we can containerize both the .NET Core and Java applications using Docker container. You can package the .NET Core 7 Mass Transit host and the Java executable (DoSomeThing.jar) into a single container, check the template below.\r\n\r\n```docker\r\n# Set the base image to a Linux distribution that supports both .NET Core and Java\r\nFROM mcr.microsoft.com/dotnet/aspnet:7.0-jdk11\r\n\r\n# Set the working directory inside the container\r\nWORKDIR /app\r\n\r\n# Copy the .NET Core project files to the container\r\nCOPY MyMassTransitHost.csproj .\r\n\r\n# Restore the .NET Core dependencies\r\nRUN dotnet restore\r\n\r\n# Copy the entire project to the container\r\nCOPY . .\r\n\r\n# Build the .NET Core application\r\nRUN dotnet publish -c Release -o out\r\n\r\n# Copy the Java application (DoSomeThing.jar) to the container\r\nCOPY DoSomeThing.jar .\r\n\r\n# Set the entry point to start both the .NET Core MassTransit Host and the Java application\r\nCMD [&quot;sh&quot;, &quot;-c&quot;, &quot;dotnet /app/out/MyMassTransitHost.dll &amp; java -jar /app/DoSomeThing.jar&quot;]\r\n```\r\n\r\n- Push the Docker Image to a Container Registry. while creating app service in the portal the runtime can be .Net and publish should be Docker container.\r\n\r\n![enter image description here](https://i.imgur.com/glEoIfz.png)\r\n\r\n- Deploy the .NET Core App Service using the custom Docker image.\r\n\r\n- Once your .NET Core App Service is running with the custom Docker image, update your MassTransit command handler to execute the Java command.\r\n\r\n```c#\r\nusing System.Diagnostics;\r\n\r\npublic class MyCommandHandler\r\n{\r\n    public void HandleCommand()\r\n    {\r\n        // Replace &quot;/path/to/java&quot; with the appropriate path to the Java executable in the container\r\n        string javaExecutable = &quot;/path/to/java&quot;;\r\n        \r\n        // Replace &quot;/app/DoSomeThing.jar&quot; with the actual path to the JAR file inside the container\r\n        string jarFile = &quot;/app/DoSomeThing.jar&quot;;\r\n        \r\n        // Replace &quot;YourJavaOptions&quot; with any additional Java options you want to pass\r\n        string javaOptions = &quot;YourJavaOptions&quot;;\r\n        \r\n        ProcessStartInfo startInfo = new ProcessStartInfo\r\n        {\r\n            FileName = javaExecutable,\r\n            Arguments = $&quot;{javaOptions} -jar {jarFile}&quot;,\r\n            RedirectStandardOutput = true,\r\n            RedirectStandardError = true,\r\n            UseShellExecute = false,\r\n            CreateNoWindow = true\r\n        };\r\n        \r\n        using (Process process = new Process())\r\n        {\r\n            process.StartInfo = startInfo;\r\n            process.Start();\r\n            \r\n            // You can optionally read the process output if needed\r\n            string output = process.StandardOutput.ReadToEnd();\r\n            string error = process.StandardError.ReadToEnd();\r\n            \r\n            process.WaitForExit();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nBy this we able to execute the Java JAR file directly within the same App Service.","title":"Windows Azure App Service running a NET Core 7 App with with MassTransit running a &quot;jar&quot; file, HOW?","body":"<ul>\n<li>It is not possible to mix different runtime stacks in a single App Service instance directly.</li>\n</ul>\n<blockquote>\n<p>Creating a Java App Service is not a good solution for us.</p>\n</blockquote>\n<ul>\n<li>As following to the condition without creating a separate app service we can containerize both the .NET Core and Java applications using Docker container. You can package the .NET Core 7 Mass Transit host and the Java executable (DoSomeThing.jar) into a single container, check the template below.</li>\n</ul>\n<pre><code># Set the base image to a Linux distribution that supports both .NET Core and Java\nFROM mcr.microsoft.com/dotnet/aspnet:7.0-jdk11\n\n# Set the working directory inside the container\nWORKDIR /app\n\n# Copy the .NET Core project files to the container\nCOPY MyMassTransitHost.csproj .\n\n# Restore the .NET Core dependencies\nRUN dotnet restore\n\n# Copy the entire project to the container\nCOPY . .\n\n# Build the .NET Core application\nRUN dotnet publish -c Release -o out\n\n# Copy the Java application (DoSomeThing.jar) to the container\nCOPY DoSomeThing.jar .\n\n# Set the entry point to start both the .NET Core MassTransit Host and the Java application\nCMD [&quot;sh&quot;, &quot;-c&quot;, &quot;dotnet /app/out/MyMassTransitHost.dll &amp; java -jar /app/DoSomeThing.jar&quot;]\n</code></pre>\n<ul>\n<li>Push the Docker Image to a Container Registry. while creating app service in the portal the runtime can be .Net and publish should be Docker container.</li>\n</ul>\n<p><img src=\"https://i.imgur.com/glEoIfz.png\" alt=\"enter image description here\" /></p>\n<ul>\n<li><p>Deploy the .NET Core App Service using the custom Docker image.</p>\n</li>\n<li><p>Once your .NET Core App Service is running with the custom Docker image, update your MassTransit command handler to execute the Java command.</p>\n</li>\n</ul>\n<pre class=\"lang-cs prettyprint-override\"><code>using System.Diagnostics;\n\npublic class MyCommandHandler\n{\n    public void HandleCommand()\n    {\n        // Replace &quot;/path/to/java&quot; with the appropriate path to the Java executable in the container\n        string javaExecutable = &quot;/path/to/java&quot;;\n        \n        // Replace &quot;/app/DoSomeThing.jar&quot; with the actual path to the JAR file inside the container\n        string jarFile = &quot;/app/DoSomeThing.jar&quot;;\n        \n        // Replace &quot;YourJavaOptions&quot; with any additional Java options you want to pass\n        string javaOptions = &quot;YourJavaOptions&quot;;\n        \n        ProcessStartInfo startInfo = new ProcessStartInfo\n        {\n            FileName = javaExecutable,\n            Arguments = $&quot;{javaOptions} -jar {jarFile}&quot;,\n            RedirectStandardOutput = true,\n            RedirectStandardError = true,\n            UseShellExecute = false,\n            CreateNoWindow = true\n        };\n        \n        using (Process process = new Process())\n        {\n            process.StartInfo = startInfo;\n            process.Start();\n            \n            // You can optionally read the process output if needed\n            string output = process.StandardOutput.ReadToEnd();\n            string error = process.StandardError.ReadToEnd();\n            \n            process.WaitForExit();\n        }\n    }\n}\n</code></pre>\n<p>By this we able to execute the Java JAR file directly within the same App Service.</p>\n"}],"owner":{"account_id":1133728,"reputation":5,"user_id":1119225,"display_name":"Xavier Casals"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76762069,"answer_count":1,"score":0,"last_activity_date":1690283009,"creation_date":1690272992,"question_id":76760718,"body_markdown":"So, we have a .NET Core 7 MassTransit host running in a Azure App Service and one of the command handlers should make a &quot;**java.exe -jar DoSomeThing.jar**&quot; call. Our question is, how can we make this work in the App Service?\r\n\r\n - Installing Java SDK somehow when deploying the app?\r\n - Copying the Java SDK as embedded files in a folder (as we do with the .jar)\r\n - Embedding the SDK with the .jar (don&#39;t really know if this is even possible)\r\n - Any other suggestion\r\n\r\nCreating a Java App Service is not a good solution for us, as MassTransit handlers are managing this calls and retrieving the results. Any suggestion will be really appreciated.\r\n\r\nThanks.\r\n\r\n\r\n","title":"Windows Azure App Service running a NET Core 7 App with with MassTransit running a &quot;jar&quot; file, HOW?","body":"<p>So, we have a .NET Core 7 MassTransit host running in a Azure App Service and one of the command handlers should make a &quot;<strong>java.exe -jar DoSomeThing.jar</strong>&quot; call. Our question is, how can we make this work in the App Service?</p>\n<ul>\n<li>Installing Java SDK somehow when deploying the app?</li>\n<li>Copying the Java SDK as embedded files in a folder (as we do with the .jar)</li>\n<li>Embedding the SDK with the .jar (don't really know if this is even possible)</li>\n<li>Any other suggestion</li>\n</ul>\n<p>Creating a Java App Service is not a good solution for us, as MassTransit handlers are managing this calls and retrieving the results. Any suggestion will be really appreciated.</p>\n<p>Thanks.</p>\n"},{"tags":["java","modelmapper"],"owner":{"account_id":21087910,"reputation":125,"user_id":15500553,"display_name":"CleanCodeOnline"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690282896,"creation_date":1690282896,"question_id":76762047,"body_markdown":"I have a source class to map as UserDao. I want to map this source class to UserViewModel destination class, there I need to skip the permissions property of RoleViewModel collection property in UserViewModel destination class. Is there any built in method possible. I tried with property map as well as converters and couldn&#39;t find a way. Helps would be appreciated.\r\n\r\n**UserViewModel**\r\n```\r\npublic class UserViewModel {\r\n    private int id;\r\n    private List&lt;RoleViewModel&gt; roles;\r\n}\r\n```\r\n\r\n**RoleViewModel**\r\n```\r\npublic class RoleViewModel {\r\n\r\n    private int id;\r\n    private String name;\r\n    private List&lt;PermissionViewModel&gt; permissions;\r\n}\r\n```\r\n\r\nThese are the corresponding source class objects.\r\n**UserDao**\r\n```\r\npublic class UserDao {\r\n    private int id;\r\n    private Set&lt;RoleDao&gt; roles;\r\n}\r\n```\r\n\r\n**RoleDao**\r\n```\r\npublic class RoleDao {\r\n    private int id;\r\n    private String roleName;\r\n    private Set&lt;PermissionDao&gt; permissions;\r\n}\r\n```","title":"Skipping properties of nested collections when mapping with model mapper","body":"<p>I have a source class to map as UserDao. I want to map this source class to UserViewModel destination class, there I need to skip the permissions property of RoleViewModel collection property in UserViewModel destination class. Is there any built in method possible. I tried with property map as well as converters and couldn't find a way. Helps would be appreciated.</p>\n<p><strong>UserViewModel</strong></p>\n<pre><code>public class UserViewModel {\n    private int id;\n    private List&lt;RoleViewModel&gt; roles;\n}\n</code></pre>\n<p><strong>RoleViewModel</strong></p>\n<pre><code>public class RoleViewModel {\n\n    private int id;\n    private String name;\n    private List&lt;PermissionViewModel&gt; permissions;\n}\n</code></pre>\n<p>These are the corresponding source class objects.\n<strong>UserDao</strong></p>\n<pre><code>public class UserDao {\n    private int id;\n    private Set&lt;RoleDao&gt; roles;\n}\n</code></pre>\n<p><strong>RoleDao</strong></p>\n<pre><code>public class RoleDao {\n    private int id;\n    private String roleName;\n    private Set&lt;PermissionDao&gt; permissions;\n}\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690282861,"creation_date":1523261847,"answer_id":49728363,"question_id":49728157,"body_markdown":"Although the Spring context initialization is performed in a single thread there could be other application threads that want to use it. For example the application thread could by calling `ConfigurableApplicationContext#getBeanFactory()` or `ConfigurableApplicationContext#close()` which are both implemented by `AbstractRefreshableApplicationContext`. Because of that it&#39;s important to synchronize the access to `beanFactory` field which state could be shared between threads.\r\n\r\n\r\nThis particular line [was committed in 2008][1] and maybe will be revisited as part of [SPR-8767 Parallel bean initialization during startup][2].\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blame/5f4d1a4628513ab34098fa3f92ba03aa20fc4204/spring-context/src/main/java/org/springframework/context/support/AbstractRefreshableApplicationContext.java#L132\r\n  [2]: https://jira.spring.io/browse/SPR-8767","title":"Why must this code line be in synchronized() in spring core?","body":"<p>Although the Spring context initialization is performed in a single thread there could be other application threads that want to use it. For example the application thread could by calling <code>ConfigurableApplicationContext#getBeanFactory()</code> or <code>ConfigurableApplicationContext#close()</code> which are both implemented by <code>AbstractRefreshableApplicationContext</code>. Because of that it's important to synchronize the access to <code>beanFactory</code> field which state could be shared between threads.</p>\n<p>This particular line <a href=\"https://github.com/spring-projects/spring-framework/blame/5f4d1a4628513ab34098fa3f92ba03aa20fc4204/spring-context/src/main/java/org/springframework/context/support/AbstractRefreshableApplicationContext.java#L132\" rel=\"nofollow noreferrer\">was committed in 2008</a> and maybe will be revisited as part of <a href=\"https://jira.spring.io/browse/SPR-8767\" rel=\"nofollow noreferrer\">SPR-8767 Parallel bean initialization during startup</a>.</p>\n"}],"owner":{"account_id":10198625,"reputation":13,"user_id":7529701,"display_name":"Young Chan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":49728363,"answer_count":1,"score":1,"last_activity_date":1690282861,"creation_date":1523261107,"question_id":49728157,"body_markdown":"    @Override\r\n\tprotected final void refreshBeanFactory() throws BeansException {\r\n\t\tif (hasBeanFactory()) {\r\n\t\t\tdestroyBeans();\r\n\t\t\tcloseBeanFactory();\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tDefaultListableBeanFactory beanFactory = createBeanFactory();\r\n\t\t\tbeanFactory.setSerializationId(getId());\r\n\t\t\tcustomizeBeanFactory(beanFactory);\r\n\t\t\tloadBeanDefinitions(beanFactory);\r\n\t\t\tsynchronized (this.beanFactoryMonitor) {\r\n\t\t\t\tthis.beanFactory = beanFactory;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (IOException ex) {\r\n\t\t\tthrow new ApplicationContextException(&quot;I/O error parsing bean definition source for &quot; + getDisplayName(), ex);\r\n\t\t}\r\n\t}\r\n\r\nThe code above is from spring-core (`AbstractRefreshableApplicationContext.refreshBeanFactory`). Why must the line\r\n\r\n    this.beanFactory = beanFactory;\r\n\r\nfrom the code above be in synchronized()?\r\n","title":"Why must this code line be in synchronized() in spring core?","body":"<pre><code>@Override\nprotected final void refreshBeanFactory() throws BeansException {\n    if (hasBeanFactory()) {\n        destroyBeans();\n        closeBeanFactory();\n    }\n    try {\n        DefaultListableBeanFactory beanFactory = createBeanFactory();\n        beanFactory.setSerializationId(getId());\n        customizeBeanFactory(beanFactory);\n        loadBeanDefinitions(beanFactory);\n        synchronized (this.beanFactoryMonitor) {\n            this.beanFactory = beanFactory;\n        }\n    }\n    catch (IOException ex) {\n        throw new ApplicationContextException(\"I/O error parsing bean definition source for \" + getDisplayName(), ex);\n    }\n}\n</code></pre>\n\n<p>The code above is from spring-core (<code>AbstractRefreshableApplicationContext.refreshBeanFactory</code>). Why must the line</p>\n\n<pre><code>this.beanFactory = beanFactory;\n</code></pre>\n\n<p>from the code above be in synchronized()?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1690282679,"post_id":76761998,"comment_id":135328528,"body_markdown":"On the login route you only allow POST.","body":"On the login route you only allow POST."},{"owner":{"account_id":17762638,"reputation":47,"user_id":12898286,"display_name":"TiKi"},"score":0,"creation_date":1690282798,"post_id":76761998,"comment_id":135328549,"body_markdown":"I didn&#39;t post the controller, but it&#39;s just the /login route...and it is in post: @RequestMapping(value = &quot;/login&quot; , method = RequestMethod.POST)\n    public void log(@RequestBody User user) {}","body":"I didn&#39;t post the controller, but it&#39;s just the /login route...and it is in post: @RequestMapping(value = &quot;/login&quot; , method = RequestMethod.POST)     public void log(@RequestBody User user) {}"},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1690282877,"post_id":76761998,"comment_id":135328565,"body_markdown":"Which version of Spring Boot are you using?","body":"Which version of Spring Boot are you using?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1690283641,"post_id":76761998,"comment_id":135328722,"body_markdown":"For starters your `InitialAuthenticationFilter` is breaking things. You are consuming the request meaning there is nothing left for others to read. You are reading the inputstream. I don&#39;t see why you need a custom authentication manager only a provider which works with your custom authentication. Looking at what your custom provider does I even doubt you need this one. Only your filter which checks if it needs to authenticate or not.","body":"For starters your <code>InitialAuthenticationFilter</code> is breaking things. You are consuming the request meaning there is nothing left for others to read. You are reading the inputstream. I don&#39;t see why you need a custom authentication manager only a provider which works with your custom authentication. Looking at what your custom provider does I even doubt you need this one. Only your filter which checks if it needs to authenticate or not."},{"owner":{"account_id":17762638,"reputation":47,"user_id":12898286,"display_name":"TiKi"},"score":0,"creation_date":1690287152,"post_id":76761998,"comment_id":135329460,"body_markdown":"@SimonMartinelli 3.1.2...@M. Deinum if I don&#39;t inject the authManager and call the authenticate method to delegate which provider to use, my custom provider is not picked up. What I wanna have essentially is two authentications(User/pass and User/otp). So in the custom filter I wanna check the body of the request and choose which authentication to use, then use the manager to deleger it&#39;s own provider.","body":"@SimonMartinelli 3.1.2...@M. Deinum if I don&#39;t inject the authManager and call the authenticate method to delegate which provider to use, my custom provider is not picked up. What I wanna have essentially is two authentications(User/pass and User/otp). So in the custom filter I wanna check the body of the request and choose which authentication to use, then use the manager to deleger it&#39;s own provider."},{"owner":{"account_id":6904832,"reputation":127,"user_id":5954437,"display_name":"ganeshram"},"score":1,"creation_date":1690293174,"post_id":76761998,"comment_id":135331030,"body_markdown":"I do not understand why you even need this filter  &quot;InitialAuthenticationFilter&quot;, just remove this and you will be fine","body":"I do not understand why you even need this filter  &quot;InitialAuthenticationFilter&quot;, just remove this and you will be fine"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1690296653,"post_id":76761998,"comment_id":135331901,"body_markdown":"if this is your first time using spring security, why are you not reading the spring security documentation?","body":"if this is your first time using spring security, why are you not reading the spring security documentation?"}],"owner":{"account_id":17762638,"reputation":47,"user_id":12898286,"display_name":"TiKi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690282457,"creation_date":1690282457,"question_id":76761998,"body_markdown":"Can someone explain to me why this authentication logic is not working? Ty\r\n\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@RequiredArgsConstructor\r\npublic class WebSecurityConfig {\r\n\r\n    private final InitialAuthenticationFilter initialAuthenticationFilter;\r\n    private final CustomAuthenticationProvider authenticationProvider;\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n        http.csrf(AbstractHttpConfigurer::disable);\r\n\r\n        http.authenticationProvider(authenticationProvider)\r\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\r\n                        .addFilterAt(initialAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n\r\n        http.authorizeHttpRequests(authorization -&gt;\r\n                authorization\r\n//                        .requestMatchers(HttpMethod.POST, &quot;/register&quot;).permitAll()\r\n                        .requestMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll()\r\n                        .anyRequest().authenticated());\r\n\r\n        return http.build();\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class InitialAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    @Override\r\n    protected void doFilterInternal(\r\n            HttpServletRequest request,\r\n            HttpServletResponse response,\r\n            FilterChain filterChain\r\n    ) throws ServletException, IOException {\r\n        byte[] body = StreamUtils.copyToByteArray(request.getInputStream());\r\n        Map&lt;String, Object&gt; jsonRequest = new ObjectMapper().readValue(body, Map.class);\r\n\r\n        String email = jsonRequest.get(&quot;email&quot;).toString();\r\n        String password = jsonRequest.get(&quot;password&quot;).toString();\r\n\r\n        UsernamePasswordAuthenticationToken authentication =\r\n                new UsernamePasswordAuthenticationToken(email, password);\r\n\r\n        authenticationManager.authenticate(authentication);\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    @Override\r\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\r\n        return !request.getServletPath().equals(&quot;/login&quot;);\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CustomAuthenticationManager implements AuthenticationManager {\r\n\r\n    private final CustomAuthenticationProvider authenticationProvider;\r\n\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n        return authenticationProvider.authenticate(authentication);\r\n    }\r\n}\r\n```\r\n\r\n\r\n```\r\n@Component\r\n@RequiredArgsConstructor\r\npublic class CustomAuthenticationProvider implements AuthenticationProvider {\r\n\r\n    private final UserDetailsService userDetailsService;\r\n    private final PasswordEncoder passwordEncoder;\r\n\r\n    @Override\r\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\r\n        String username = authentication.getName();\r\n        String password = String.valueOf(authentication.getCredentials());\r\n\r\n        UserDetails userDetails = userDetailsService.loadUserByUsername(username);\r\n\r\n        if(passwordEncoder.matches(password, userDetails.getPassword())) {\r\n            UsernamePasswordAuthenticationToken authenticationToken =\r\n                    new UsernamePasswordAuthenticationToken(\r\n                            userDetails,\r\n                            null,\r\n                            userDetails.getAuthorities());\r\n\r\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n\r\n            return authenticationToken;\r\n\r\n        } else {\r\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(Class&lt;?&gt; authentication) {\r\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nEverything that I came up with. I need this custom authentication filter because I wanna have 2 providers(1 for user/pass authentication and 1 for otp authentication).\r\n\r\nAfter I tried debugging, it seems like my user is being authenticated in the end, but I still get a 403 on the /login route. Can someone explain me why?","title":"Why is my authentication login not working?","body":"<p>Can someone explain to me why this authentication logic is not working? Ty</p>\n<pre><code>@Configuration\n@EnableWebSecurity\n@RequiredArgsConstructor\npublic class WebSecurityConfig {\n\n    private final InitialAuthenticationFilter initialAuthenticationFilter;\n    private final CustomAuthenticationProvider authenticationProvider;\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.csrf(AbstractHttpConfigurer::disable);\n\n        http.authenticationProvider(authenticationProvider)\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                        .addFilterAt(initialAuthenticationFilter, UsernamePasswordAuthenticationFilter.class);\n\n\n        http.authorizeHttpRequests(authorization -&gt;\n                authorization\n//                        .requestMatchers(HttpMethod.POST, &quot;/register&quot;).permitAll()\n                        .requestMatchers(HttpMethod.POST, &quot;/login&quot;).permitAll()\n                        .anyRequest().authenticated());\n\n        return http.build();\n    }\n}\n</code></pre>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class InitialAuthenticationFilter extends OncePerRequestFilter {\n\n    private final AuthenticationManager authenticationManager;\n\n    @Override\n    protected void doFilterInternal(\n            HttpServletRequest request,\n            HttpServletResponse response,\n            FilterChain filterChain\n    ) throws ServletException, IOException {\n        byte[] body = StreamUtils.copyToByteArray(request.getInputStream());\n        Map&lt;String, Object&gt; jsonRequest = new ObjectMapper().readValue(body, Map.class);\n\n        String email = jsonRequest.get(&quot;email&quot;).toString();\n        String password = jsonRequest.get(&quot;password&quot;).toString();\n\n        UsernamePasswordAuthenticationToken authentication =\n                new UsernamePasswordAuthenticationToken(email, password);\n\n        authenticationManager.authenticate(authentication);\n\n        filterChain.doFilter(request, response);\n    }\n\n    @Override\n    protected boolean shouldNotFilter(HttpServletRequest request) throws ServletException {\n        return !request.getServletPath().equals(&quot;/login&quot;);\n    }\n}\n</code></pre>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class CustomAuthenticationManager implements AuthenticationManager {\n\n    private final CustomAuthenticationProvider authenticationProvider;\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        return authenticationProvider.authenticate(authentication);\n    }\n}\n</code></pre>\n<pre><code>@Component\n@RequiredArgsConstructor\npublic class CustomAuthenticationProvider implements AuthenticationProvider {\n\n    private final UserDetailsService userDetailsService;\n    private final PasswordEncoder passwordEncoder;\n\n    @Override\n    public Authentication authenticate(Authentication authentication) throws AuthenticationException {\n        String username = authentication.getName();\n        String password = String.valueOf(authentication.getCredentials());\n\n        UserDetails userDetails = userDetailsService.loadUserByUsername(username);\n\n        if(passwordEncoder.matches(password, userDetails.getPassword())) {\n            UsernamePasswordAuthenticationToken authenticationToken =\n                    new UsernamePasswordAuthenticationToken(\n                            userDetails,\n                            null,\n                            userDetails.getAuthorities());\n\n            SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n\n            return authenticationToken;\n\n        } else {\n            throw new BadCredentialsException(&quot;Authentication failed&quot;);\n        }\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; authentication) {\n        return authentication.equals(UsernamePasswordAuthenticationToken.class);\n    }\n}\n</code></pre>\n<p>Everything that I came up with. I need this custom authentication filter because I wanna have 2 providers(1 for user/pass authentication and 1 for otp authentication).</p>\n<p>After I tried debugging, it seems like my user is being authenticated in the end, but I still get a 403 on the /login route. Can someone explain me why?</p>\n"},{"tags":["java","mysql"],"comments":[{"owner":{"account_id":430272,"reputation":4294,"user_id":813618,"accept_rate":82,"display_name":"Rakesh"},"score":0,"creation_date":1371714943,"post_id":17208146,"comment_id":24926196,"body_markdown":"can you show the stacktrace ?","body":"can you show the stacktrace ?"},{"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"score":0,"creation_date":1371719406,"post_id":17208146,"comment_id":24928552,"body_markdown":"i am getting like error: java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)","body":"i am getting like error: java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)"}],"answers":[{"tags":[],"owner":{"account_id":2023007,"reputation":2962,"user_id":1808743,"accept_rate":88,"display_name":"Joshua"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371715069,"creation_date":1371715069,"answer_id":17208235,"question_id":17208146,"body_markdown":"If it&#39;s really `password=&quot;&quot;` what stands in your properties file, then `&quot;&quot;` will be sent as password. Not an empty string but the two quote signs.","title":"Mysql Connection with out password using corejava program","body":"<p>If it's really <code>password=\"\"</code> what stands in your properties file, then <code>\"\"</code> will be sent as password. Not an empty string but the two quote signs.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371715961,"creation_date":1371715146,"answer_id":17208269,"question_id":17208146,"body_markdown":"Pass `null` as password instead of an empty String. That should make it work.\r\n\r\n    con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null);\r\n\r\nFrom what I see right now, you&#39;re actually not using the values from the properties file.","title":"Mysql Connection with out password using corejava program","body":"<p>Pass <code>null</code> as password instead of an empty String. That should make it work.</p>\n\n<pre><code>con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",null);\n</code></pre>\n\n<p>From what I see right now, you're actually not using the values from the properties file.</p>\n"},{"comments":[{"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"score":0,"creation_date":1371719342,"post_id":17208295,"comment_id":24928513,"body_markdown":"sorry i am stil geting this error : java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)","body":"sorry i am stil geting this error : java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)"}],"tags":[],"owner":{"account_id":2921966,"reputation":3572,"user_id":2504013,"accept_rate":86,"display_name":"JREN"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371715223,"creation_date":1371715223,"answer_id":17208295,"question_id":17208146,"body_markdown":"Remove the 2 quotes after password in your properties file.\r\nSo `password=&quot;&quot;`should be `password=`","title":"Mysql Connection with out password using corejava program","body":"<p>Remove the 2 quotes after password in your properties file.\nSo <code>password=\"\"</code>should be <code>password=</code></p>\n"},{"tags":[],"owner":{"account_id":1773932,"reputation":11088,"user_id":1618135,"accept_rate":78,"display_name":"blackpanther"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1371715323,"creation_date":1371715323,"answer_id":17208321,"question_id":17208146,"body_markdown":"The password argument should be set to `null` because even an empty String `&quot;&quot;` implies that there is a password.\r\n\r\n    DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null)","title":"Mysql Connection with out password using corejava program","body":"<p>The password argument should be set to <code>null</code> because even an empty String <code>\"\"</code> implies that there is a password.</p>\n\n<pre><code>DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",null)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"score":0,"creation_date":1371719902,"post_id":17208373,"comment_id":24928847,"body_markdown":"ya i did that but still i am getting like  java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)","body":"ya i did that but still i am getting like  java.sql.SQLException: Access denied for user &#39;root&#39;@&#39;192.168.1.37&#39; (using password: NO)"},{"owner":{"account_id":239222,"reputation":1447,"user_id":508662,"accept_rate":83,"display_name":"sachin"},"score":0,"creation_date":1371720915,"post_id":17208373,"comment_id":24929490,"body_markdown":"So, you won&#39;t be access of the that particular IP address. Check the grant of the mysql.  http://stackoverflow.com/questions/5016505/mysql-grant-all-privileges-on-database","body":"So, you won&#39;t be access of the that particular IP address. Check the grant of the mysql.  <a href=\"http://stackoverflow.com/questions/5016505/mysql-grant-all-privileges-on-database\" title=\"mysql grant all privileges on database\">stackoverflow.com/questions/5016505/&hellip;</a>"}],"tags":[],"owner":{"account_id":239222,"reputation":1447,"user_id":508662,"accept_rate":83,"display_name":"sachin"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1371715868,"creation_date":1371715483,"answer_id":17208373,"question_id":17208146,"body_markdown":"    URL=jdbc\\:mysql\\://192.168.1.51:3306/easylibdb1\r\n    USER=root\r\n    PASSWD=\r\n    DRIVER=com.mysql.jdbc.Driver\r\n\r\nPlease set ur PASSWORD Field as blank.. Don&#39;t put quote.","title":"Mysql Connection with out password using corejava program","body":"<pre><code>URL=jdbc\\:mysql\\://192.168.1.51:3306/easylibdb1\nUSER=root\nPASSWD=\nDRIVER=com.mysql.jdbc.Driver\n</code></pre>\n\n<p>Please set ur PASSWORD Field as blank.. Don't put quote.</p>\n"},{"tags":[],"owner":{"account_id":430272,"reputation":4294,"user_id":813618,"accept_rate":82,"display_name":"Rakesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1371721042,"creation_date":1371721042,"answer_id":17210278,"question_id":17208146,"body_markdown":"`using password: NO` - this means the program is **not** passing any password, in your case that is correct.\r\n\r\nSince you mention that you are reading the values from the properties file, I don&#39;t see you doing that in the code you have posted. If you are really **reading the values from the properties file in your actual code**, and the MySQL server is a **remote server**, then make sure that you **grant relevant permissions** on the remote MySQL server with the below statement\r\n\r\n`grant all privileges on easylibdb1.* to &#39;root&#39;@&#39;192.168.1.51&#39;` to allow connections originating from 192.168.1.51\r\n\r\nor \r\n\r\n`grant all privileges on easylibdb1.* to &#39;root&#39;@&#39;%&#39;` to allow connections originating from anywhere\r\n","title":"Mysql Connection with out password using corejava program","body":"<p><code>using password: NO</code> - this means the program is <strong>not</strong> passing any password, in your case that is correct.</p>\n\n<p>Since you mention that you are reading the values from the properties file, I don't see you doing that in the code you have posted. If you are really <strong>reading the values from the properties file in your actual code</strong>, and the MySQL server is a <strong>remote server</strong>, then make sure that you <strong>grant relevant permissions</strong> on the remote MySQL server with the below statement</p>\n\n<p><code>grant all privileges on easylibdb1.* to 'root'@'192.168.1.51'</code> to allow connections originating from 192.168.1.51</p>\n\n<p>or </p>\n\n<p><code>grant all privileges on easylibdb1.* to 'root'@'%'</code> to allow connections originating from anywhere</p>\n"},{"comments":[{"owner":{"account_id":3392345,"reputation":10946,"user_id":2846923,"accept_rate":100,"display_name":"The Guy with The Hat"},"score":2,"creation_date":1403795243,"post_id":24433631,"comment_id":37805493,"body_markdown":"This answer turned up in the low quality review queue, presumably because you didn&#39;t explain the code. If you do explain it (in your answer), you are far more likely to get more upvotes—and the questioner actually learns something!","body":"This answer turned up in the low quality review queue, presumably because you didn&#39;t explain the code. If you do explain it (in your answer), you are far more likely to get more upvotes—and the questioner actually learns something!"}],"tags":[],"owner":{"account_id":3870675,"reputation":472,"user_id":3206014,"accept_rate":100,"display_name":"Tilak Raj"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1403794150,"creation_date":1403794150,"answer_id":24433631,"question_id":17208146,"body_markdown":"    con = DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null);","title":"Mysql Connection with out password using corejava program","body":"<pre><code>con = DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",null);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15442966,"reputation":1,"user_id":11140924,"display_name":"Samaresh Maiti"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582694834,"creation_date":1581868206,"answer_id":60250244,"question_id":17208146,"body_markdown":"According to you, you are passing username as root and password as empty string.And your connection is established through\r\n\r\n    con=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,&quot;&quot;);\r\n\r\nSo change your function as \r\n\r\n    con=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null);\r\n\r\nThen it will work.\r\nOr change the password in the `application.properties` file as \r\n\r\n    password=","title":"Mysql Connection with out password using corejava program","body":"<p>According to you, you are passing username as root and password as empty string.And your connection is established through</p>\n\n<pre><code>con=DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",\"\");\n</code></pre>\n\n<p>So change your function as </p>\n\n<pre><code>con=DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",null);\n</code></pre>\n\n<p>Then it will work.\nOr change the password in the <code>application.properties</code> file as </p>\n\n<pre><code>password=\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1688047539,"post_id":76570155,"comment_id":135023751,"body_markdown":"Answers generated by ChatGPT are banned.","body":"Answers generated by ChatGPT are banned."}],"tags":[],"owner":{"account_id":14838134,"reputation":1,"user_id":10715592,"display_name":"Sujata R"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690282266,"creation_date":1687928184,"answer_id":76570155,"question_id":17208146,"body_markdown":"You have left the password field empty. However, for connecting to a MySQL database, you typically need to provide a valid password. \r\n\r\nIn your case, you can pass &quot;null&quot; as the password and it should do the trick.\r\n\r\n    con=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null)\r\n\r\nBut generally, having a password improves security. Hope this helps!\r\n\r\n","title":"Mysql Connection with out password using corejava program","body":"<p>You have left the password field empty. However, for connecting to a MySQL database, you typically need to provide a valid password.</p>\n<p>In your case, you can pass &quot;null&quot; as the password and it should do the trick.</p>\n<pre><code>con=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,null)\n</code></pre>\n<p>But generally, having a password improves security. Hope this helps!</p>\n"}],"owner":{"account_id":2545112,"reputation":1873,"user_id":2210064,"accept_rate":80,"display_name":"Rajesh Hatwar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7335,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":17210278,"answer_count":9,"score":4,"last_activity_date":1690282266,"creation_date":1371714814,"question_id":17208146,"body_markdown":"I want to connect to a MySQL database. While installing MySQL I did not give any password, so in my program I did the same but I am getting error on connection. I am using properties file to get the driver, URL, username and password. Help me pleas.\r\n\r\nThis is my code:\r\n\r\n  \ttry\r\n\t{\r\n\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n\t\tcon=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/easylibdb1&quot;,&quot;root&quot;,&quot;&quot;);\r\n\t} \r\n\tcatch (Exception e) \r\n\t{\r\n\t\tSystem.out.println(&quot;Got Error While Connecting To Database...!&quot;);\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nThis is my properties file content:\r\n\r\n    driver=com.mysql.jdbc.Driver\r\n    url=jdbc:mysql://192.168.1.51:3306/easylibdb1\r\n    user=root\r\n    password=&quot;&quot;","title":"Mysql Connection with out password using corejava program","body":"<p>I want to connect to a MySQL database. While installing MySQL I did not give any password, so in my program I did the same but I am getting error on connection. I am using properties file to get the driver, URL, username and password. Help me pleas.</p>\n\n<p>This is my code:</p>\n\n<pre><code>try\n{\n    Class.forName(\"com.mysql.jdbc.Driver\");\n    con=DriverManager.getConnection(\"jdbc:mysql://localhost:3306/easylibdb1\",\"root\",\"\");\n} \ncatch (Exception e) \n{\n    System.out.println(\"Got Error While Connecting To Database...!\");\n    e.printStackTrace();\n}\n</code></pre>\n\n<p>This is my properties file content:</p>\n\n<pre><code>driver=com.mysql.jdbc.Driver\nurl=jdbc:mysql://192.168.1.51:3306/easylibdb1\nuser=root\npassword=\"\"\n</code></pre>\n"},{"tags":["java","jdbc","cnosdb"],"comments":[{"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"score":0,"creation_date":1690289196,"post_id":76761954,"comment_id":135329983,"body_markdown":"You can set maxFieldSize if your current Statement Implementation supports that. For Instance here\n https://github.com/apache/calcite-avatica/blob/main/core/src/main/java/org/apache/calcite/avatica/AvaticaStatement.java#L286\nyou will get similar Exception","body":"You can set maxFieldSize if your current Statement Implementation supports that. For Instance here  <a href=\"https://github.com/apache/calcite-avatica/blob/main/core/src/main/java/org/apache/calcite/avatica/AvaticaStatement.java#L286\" rel=\"nofollow noreferrer\">github.com/apache/calcite-avatica/blob/main/core/src/main/ja&zwnj;&#8203;va/&hellip;</a> you will get similar Exception"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690296422,"post_id":76761954,"comment_id":135331853,"body_markdown":"This is the driver, because in the JDBC API, `Statement` is an interface, and `setMaxFieldSize` does not have a default implementation, so any errors are provided by the implementation (i.e. the JDBC driver). However, I&#39;d be curious to know **why** are you trying to set it? In general, there is no good reason to set it (and support between JDBC drivers is spotty at best).","body":"This is the driver, because in the JDBC API, <code>Statement</code> is an interface, and <code>setMaxFieldSize</code> does not have a default implementation, so any errors are provided by the implementation (i.e. the JDBC driver). However, I&#39;d be curious to know <b>why</b> are you trying to set it? In general, there is no good reason to set it (and support between JDBC drivers is spotty at best)."}],"owner":{"account_id":19518277,"reputation":143,"user_id":14280692,"display_name":"Baker X"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690282069,"creation_date":1690282069,"question_id":76761954,"body_markdown":"I am adding cnosdb jdbc use case, the code as follow\r\n\r\n```\r\n    @Test\r\n    public void test_Jdbc_field_size() throws SQLException {\r\n        String url = &quot;jdbc:arrow-flight-sql://localhost:8904&quot;;\r\n        final Properties properties = new Properties();\r\n        properties.put(&quot;user&quot;, &quot;root&quot;); //用户名\r\n        properties.put(&quot;password&quot;, &quot;&quot;);  //密码\r\n        properties.put(&quot;tenant&quot;, &quot;cnosdb&quot;);//租户\r\n        properties.put(&quot;db&quot;, &quot;public&quot;);// db\r\n        properties.put(&quot;useEncryption&quot;, false);\r\n        Connection conn = DriverManager.getConnection(url, properties);\r\n        Statement stmt = conn.createStatement();\r\n        int rs003 = stmt.getMaxFieldSize();\r\n        assertTrue(rs003 == 0);\r\n        stmt.setMaxFieldSize(1024);\r\n        \r\n        stmt.close();\r\n        conn.close();\r\n    }\r\n```\r\n\r\nthe result always, as follow\r\n\r\n```\r\nSQL illegal maxField value: 1024\r\n```\r\n\r\nI check the doc,as\r\n\r\n`The maxFieldSize limit (in bytes) is set to limit the size of data that can be returned for any column value; it only applies to BINARY, VARBINARY, LONGVARBINARY, CHAR, VARCHAR, and LONGVARCHAR fields. If the limit is exceeded, the excess data is silently discarded. For maximum portability use values greater than 256.`\r\n\r\nflight-sql-jdbc-driver:12.0.1, arrow-jdbc:12.0.1","title":"SQL illegal maxField value: 1024, Is it jdbc issue or cnosdb issue?","body":"<p>I am adding cnosdb jdbc use case, the code as follow</p>\n<pre><code>    @Test\n    public void test_Jdbc_field_size() throws SQLException {\n        String url = &quot;jdbc:arrow-flight-sql://localhost:8904&quot;;\n        final Properties properties = new Properties();\n        properties.put(&quot;user&quot;, &quot;root&quot;); //用户名\n        properties.put(&quot;password&quot;, &quot;&quot;);  //密码\n        properties.put(&quot;tenant&quot;, &quot;cnosdb&quot;);//租户\n        properties.put(&quot;db&quot;, &quot;public&quot;);// db\n        properties.put(&quot;useEncryption&quot;, false);\n        Connection conn = DriverManager.getConnection(url, properties);\n        Statement stmt = conn.createStatement();\n        int rs003 = stmt.getMaxFieldSize();\n        assertTrue(rs003 == 0);\n        stmt.setMaxFieldSize(1024);\n        \n        stmt.close();\n        conn.close();\n    }\n</code></pre>\n<p>the result always, as follow</p>\n<pre><code>SQL illegal maxField value: 1024\n</code></pre>\n<p>I check the doc,as</p>\n<p><code>The maxFieldSize limit (in bytes) is set to limit the size of data that can be returned for any column value; it only applies to BINARY, VARBINARY, LONGVARBINARY, CHAR, VARCHAR, and LONGVARCHAR fields. If the limit is exceeded, the excess data is silently discarded. For maximum portability use values greater than 256.</code></p>\n<p>flight-sql-jdbc-driver:12.0.1, arrow-jdbc:12.0.1</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":2,"creation_date":1313130325,"post_id":7036324,"comment_id":8407735,"body_markdown":"Do you want to accept, for example, `076`?","body":"Do you want to accept, for example, <code>076</code>?"},{"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"score":0,"creation_date":1313130841,"post_id":7036324,"comment_id":8407835,"body_markdown":"@Karl Knechtel: But I can sacrifice this feature for the sake of simplicity.","body":"@Karl Knechtel: But I can sacrifice this feature for the sake of simplicity."},{"owner":{"account_id":106337,"reputation":30941,"user_id":283311,"accept_rate":76,"display_name":"Ken"},"score":3,"creation_date":1398661386,"post_id":7036324,"comment_id":35728606,"body_markdown":"“Any positive integer, excluding 0” note that 0 is not a positive integer.","body":"“Any positive integer, excluding 0” note that 0 is not a positive integer."}],"answers":[{"comments":[{"owner":{"account_id":431053,"reputation":8829,"user_id":814849,"accept_rate":83,"display_name":"mmtauqir"},"score":1,"creation_date":1313130389,"post_id":7036361,"comment_id":8407749,"body_markdown":"Just out of curiosity, why do we need \\d+ at the end? Why wouldn&#39;t `^[1-9]+$` work?","body":"Just out of curiosity, why do we need \\d+ at the end? Why wouldn&#39;t <code>^[1-9]+$</code> work?"},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":24,"creation_date":1313130525,"post_id":7036361,"comment_id":8407772,"body_markdown":"@mtahmed: `^[1-9]+$` would not allow 10","body":"@mtahmed: <code>^[1-9]+$</code> would not allow 10"},{"owner":{"account_id":131478,"reputation":27678,"user_id":331515,"accept_rate":81,"display_name":"Daniel"},"score":1,"creation_date":1313130569,"post_id":7036361,"comment_id":8407780,"body_markdown":"It will allow 1. &quot;\\d*&quot; does also match the empty string.","body":"It will allow 1. &quot;\\d*&quot; does also match the empty string."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1313130592,"post_id":7036361,"comment_id":8407788,"body_markdown":"@mtahmed `^[1-9]+$` would not allow `10`. @Mulmoth the suggestion will allow `1`, since `\\d*` matches zero or more times. However, it will not allow `076`, as that doesn&#39;t start with a `[1-9]`.","body":"@mtahmed <code>^[1-9]+$</code> would not allow <code>10</code>. @Mulmoth the suggestion will allow <code>1</code>, since <code>\\d*</code> matches zero or more times. However, it will not allow <code>076</code>, as that doesn&#39;t start with a <code>[1-9]</code>."},{"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"score":0,"creation_date":1313130745,"post_id":7036361,"comment_id":8407816,"body_markdown":"@Karl Knechtel: He changed `^[1-9]\\d+$` to `^[1-9]\\d*$` after my comment, which I deleted afterwards.","body":"@Karl Knechtel: He changed <code>^[1-9]\\d+$</code> to <code>^[1-9]\\d*$</code> after my comment, which I deleted afterwards."},{"owner":{"account_id":438783,"reputation":6771,"user_id":827280,"accept_rate":93,"display_name":"Museful"},"score":4,"creation_date":1495958307,"post_id":7036361,"comment_id":75460133,"body_markdown":"But what about `01`?","body":"But what about <code>01</code>?"},{"owner":{"account_id":14468959,"reputation":1147,"user_id":10451543,"display_name":"G_real"},"score":0,"creation_date":1603135830,"post_id":7036361,"comment_id":113935416,"body_markdown":"Why `^[1-9]\\d?$` does not allow 100 and more? It&#39;s a question mark `?` sign after `\\d`","body":"Why <code>^[1-9]\\d?$</code> does not allow 100 and more? It&#39;s a question mark <code>?</code> sign after <code>\\d</code>"},{"owner":{"account_id":9950737,"reputation":875,"user_id":7827321,"display_name":"Donald Shahini"},"score":1,"creation_date":1622458684,"post_id":7036361,"comment_id":119790754,"body_markdown":"To allow 0, change the expression into `^[0-9]\\d*$` or `^\\d*[1-9]\\d*$` then it will accept 01 and 10.","body":"To allow 0, change the expression into <code>^[0-9]\\d*$</code> or <code>^\\d*[1-9]\\d*$</code> then it will accept 01 and 10."}],"tags":[],"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"comment_count":8,"down_vote_count":5,"up_vote_count":228,"is_accepted":true,"score":223,"last_activity_date":1564483513,"creation_date":1313130289,"answer_id":7036361,"question_id":7036324,"body_markdown":"Try this:\r\n\r\n    ^[1-9]\\d*$\r\n\r\n...and some padding to exceed 30 character SO answer limit :-).\r\n\r\n\r\n[Here is Demo\r\n][1]\r\n\r\n\r\n  [1]: https://regex101.com/r/BlHg0v/1","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Try this:</p>\n\n<pre><code>^[1-9]\\d*$\n</code></pre>\n\n<p>...and some padding to exceed 30 character SO answer limit :-).</p>\n\n<p><a href=\"https://regex101.com/r/BlHg0v/1\" rel=\"noreferrer\">Here is Demo\n</a></p>\n"},{"comments":[{"owner":{"account_id":312289,"reputation":91007,"user_id":626273,"accept_rate":92,"display_name":"stema"},"score":3,"creation_date":1313130777,"post_id":7036362,"comment_id":8407821,"body_markdown":"This would allow `00` Do you want this? And it will allow `1aaaaa` and `abcd01`. `^` belongs only to the first alternative and `$` only to the second, to solve this put brackets around it `^([1-9]|[0-9]{2,})$`","body":"This would allow <code>00</code> Do you want this? And it will allow <code>1aaaaa</code> and <code>abcd01</code>. <code>^</code> belongs only to the first alternative and <code>$</code> only to the second, to solve this put brackets around it <code>^([1-9]|[0-9]{2,})$</code>"},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1313130838,"post_id":7036362,"comment_id":8407834,"body_markdown":"Well, this accepts `000000000`.  You did say any integer _excluding zero_.","body":"Well, this accepts <code>000000000</code>.  You did say any integer <i>excluding zero</i>."}],"tags":[],"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313130309,"creation_date":1313130309,"answer_id":7036362,"question_id":7036324,"body_markdown":"Got this one:\r\n\r\n    ^[1-9]|[0-9]{2,}$\r\n\r\nSomeone beats it? :)","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Got this one:</p>\n\n<pre><code>^[1-9]|[0-9]{2,}$\n</code></pre>\n\n<p>Someone beats it? :)</p>\n"},{"comments":[{"owner":{"account_id":131478,"reputation":27678,"user_id":331515,"accept_rate":81,"display_name":"Daniel"},"score":1,"creation_date":1313130679,"post_id":7036391,"comment_id":8407803,"body_markdown":"Two problems: This also matches &quot;123abc&quot;, and returns 123, and this might throw a ParseException.","body":"Two problems: This also matches &quot;123abc&quot;, and returns 123, and this might throw a ParseException."},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":0,"creation_date":1313131030,"post_id":7036391,"comment_id":8407858,"body_markdown":"@Daniel: I guess this might be used inside a larger parsing scheme, therefore you would have a regex/BNF that captures digits only, and a java code to check that the captured digits are non-zero positive.","body":"@Daniel: I guess this might be used inside a larger parsing scheme, therefore you would have a regex/BNF that captures digits only, and a java code to check that the captured digits are non-zero positive."},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":0,"creation_date":1313143245,"post_id":7036391,"comment_id":8410686,"body_markdown":"@Daniel: in any case, you would still need the data as an integer and so sooner or later you would still need to call parseInt() or roll your own parseInt().","body":"@Daniel: in any case, you would still need the data as an integer and so sooner or later you would still need to call parseInt() or roll your own parseInt()."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1313145528,"post_id":7036391,"comment_id":8411232,"body_markdown":"@Daniel: `Integer.parseInt()` itself adds very little overhead. It&#39;s the throwing and catching of exceptions that&#39;s expensive.","body":"@Daniel: <code>Integer.parseInt()</code> itself adds very little overhead. It&#39;s the throwing and catching of exceptions that&#39;s expensive."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1313146255,"post_id":7036391,"comment_id":8411420,"body_markdown":"@Lie: what&#39;s the deal with the `\\\\+?` prefixes?  I&#39;m guessing that&#39;s supposed to be an escaped plus sign as it would appear in Java source code, but why?  If minus signs aren&#39;t allowed, I think it&#39;s safe to assume plus signs are out, too.","body":"@Lie: what&#39;s the deal with the <code>\\\\+?</code> prefixes?  I&#39;m guessing that&#39;s supposed to be an escaped plus sign as it would appear in Java source code, but why?  If minus signs aren&#39;t allowed, I think it&#39;s safe to assume plus signs are out, too."},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":0,"creation_date":1313153698,"post_id":7036391,"comment_id":8413254,"body_markdown":"@Alan Moore: +10 == 10 so if the OP want to have a lax matching, then he might want to allow an optional plus sign.","body":"@Alan Moore: +10 == 10 so if the OP want to have a lax matching, then he might want to allow an optional plus sign."},{"owner":{"account_id":10959,"reputation":74232,"user_id":20938,"display_name":"Alan Moore"},"score":0,"creation_date":1313194562,"post_id":7036391,"comment_id":8424451,"body_markdown":"I think lax *specifying* is our real problem. ;)  But @Daniel  is right about the error in your regex.  If you don&#39;t enclose the alternation in its own group, like so: `^\\+?(?:[1-9]|\\d+)$`, it will match any string that *starts* with `[1-9]` (like `1foo`) or *ends* with `[0-9]` (like `bar2`).  @Mulmoth&#39;s [self-answer](http://stackoverflow.com/questions/7036324/what-is-the-regex-for-any-positive-integer-excluding-0/7036362#7036362) has the same problem.","body":"I think lax <i>specifying</i> is our real problem. ;)  But @Daniel  is right about the error in your regex.  If you don&#39;t enclose the alternation in its own group, like so: <code>^\\+?(?:[1-9]|\\d+)$</code>, it will match any string that <i>starts</i> with <code>[1-9]</code> (like <code>1foo</code>) or <i>ends</i> with <code>[0-9]</code> (like <code>bar2</code>).  @Mulmoth&#39;s <a href=\"http://stackoverflow.com/questions/7036324/what-is-the-regex-for-any-positive-integer-excluding-0/7036362#7036362\">self-answer</a> has the same problem."},{"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"score":0,"creation_date":1313206750,"post_id":7036391,"comment_id":8425779,"body_markdown":"@Alan Moore,@Daniel: ah, I see what you meant, fixed.","body":"@Alan Moore,@Daniel: ah, I see what you meant, fixed."}],"tags":[],"owner":{"account_id":118410,"reputation":62929,"user_id":309412,"accept_rate":74,"display_name":"Lie Ryan"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313206689,"creation_date":1313130484,"answer_id":7036391,"question_id":7036324,"body_markdown":"You might want this (edit: allow number of the form `0123`):\r\n \r\n    ^\\\\+?[1-9]$|^\\\\+?\\d+$\r\n\r\nhowever, if it were me, I would instead do \r\n\r\n    int x = Integer.parseInt(s)\r\n    if (x &gt; 0) {...}","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>You might want this (edit: allow number of the form <code>0123</code>):</p>\n\n<pre><code>^\\\\+?[1-9]$|^\\\\+?\\d+$\n</code></pre>\n\n<p>however, if it were me, I would instead do </p>\n\n<pre><code>int x = Integer.parseInt(s)\nif (x &gt; 0) {...}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3647525,"reputation":1431,"user_id":3040381,"accept_rate":100,"display_name":"Honinbo Shusaku"},"score":0,"creation_date":1440596857,"post_id":7036407,"comment_id":52339320,"body_markdown":"This seems to fulfill what the OP wanted","body":"This seems to fulfill what the OP wanted"},{"owner":{"display_name":"user4853635"},"score":0,"creation_date":1446625694,"post_id":7036407,"comment_id":54815833,"body_markdown":"i want positive integer and positive decimal. you have any solution?","body":"i want positive integer and positive decimal. you have any solution?"},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1446696512,"post_id":7036407,"comment_id":54854073,"body_markdown":"You should ask that as a new question rather than as a comment. But spoiler: `^[0-9]*[1-9][0-9]*(\\.[0-9]+)$` but that is making an assumption about what you mean by &quot;decimal.&quot; Do you need exponent parts? This is pretty involved, so ask another question.","body":"You should ask that as a new question rather than as a comment. But spoiler: <code>^[0-9]*[1-9][0-9]*(\\.[0-9]+)$</code> but that is making an assumption about what you mean by &quot;decimal.&quot; Do you need exponent parts? This is pretty involved, so ask another question."},{"owner":{"account_id":52153,"reputation":2918,"user_id":155813,"accept_rate":50,"display_name":"mg007"},"score":4,"creation_date":1470717814,"post_id":7036407,"comment_id":65049662,"body_markdown":"+1 for considering corner case! BTW this pattern will work exactly the same: **`^0*[1-9]\\d*$`** since the first `[0-9]*` is active only until `[1-9]` finds first non-zero i.e. it&#39;s active only until there are initial zeros (`0*` ).","body":"+1 for considering corner case! BTW this pattern will work exactly the same: <b><code>^0*[1-9]\\d*$</code></b> since the first <code>[0-9]*</code> is active only until <code>[1-9]</code> finds first non-zero i.e. it&#39;s active only until there are initial zeros (<code>0*</code> )."},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1501099507,"post_id":7036407,"comment_id":77634847,"body_markdown":"Yes, that&#39;s the best one.","body":"Yes, that&#39;s the best one."},{"owner":{"account_id":298783,"reputation":2621,"user_id":604990,"accept_rate":97,"display_name":"Varun Sharma"},"score":1,"creation_date":1577735496,"post_id":7036407,"comment_id":105241812,"body_markdown":"This is the right answer. It accepts 00098 which is the correct behavior as per question.","body":"This is the right answer. It accepts 00098 which is the correct behavior as per question."}],"tags":[],"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"comment_count":6,"down_vote_count":0,"up_vote_count":82,"is_accepted":false,"score":82,"last_activity_date":1313130677,"creation_date":1313130677,"answer_id":7036407,"question_id":7036324,"body_markdown":"Sorry to come in late but the OP wants to allow `076` but probably does NOT want to allow `0000000000`.\r\n\r\nSo in this case we want a _string of one or more digits containing at least one non-zero_.  That is\r\n\r\n    ^[0-9]*[1-9][0-9]*$\r\n\r\n","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Sorry to come in late but the OP wants to allow <code>076</code> but probably does NOT want to allow <code>0000000000</code>.</p>\n\n<p>So in this case we want a <em>string of one or more digits containing at least one non-zero</em>.  That is</p>\n\n<pre><code>^[0-9]*[1-9][0-9]*$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6186,"reputation":30259,"user_id":10311,"display_name":"porges"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1313130768,"creation_date":1313130768,"answer_id":7036419,"question_id":7036324,"body_markdown":"Just for fun, another alternative using lookaheads:\r\n\r\n    ^(?=\\d*[1-9])\\d+$\r\n\r\nAs many digits as you want, but at least one must be `[1-9]`. ","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Just for fun, another alternative using lookaheads:</p>\n\n<pre><code>^(?=\\d*[1-9])\\d+$\n</code></pre>\n\n<p>As many digits as you want, but at least one must be <code>[1-9]</code>. </p>\n"},{"comments":[{"owner":{"account_id":31949,"reputation":3118,"user_id":88097,"display_name":"Matijs"},"score":1,"creation_date":1473075093,"post_id":7036420,"comment_id":65990666,"body_markdown":"This allows 01, 02, etc…","body":"This allows 01, 02, etc…"},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1695702312,"post_id":7036420,"comment_id":136055953,"body_markdown":"@Matijs the question was written such that this is okay and expected. To disallow any leading zeros, it should suffice to simplify the lookahead to `(?!0)`.","body":"@Matijs the question was written such that this is okay and expected. To disallow any leading zeros, it should suffice to simplify the lookahead to <code>(?!0)</code>."}],"tags":[],"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"comment_count":2,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1313130773,"creation_date":1313130773,"answer_id":7036420,"question_id":7036324,"body_markdown":"You might try a negative lookahead assertion:\r\n\r\n    ^(?!0+$)\\d+$","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>You might try a negative lookahead assertion:</p>\n\n<pre><code>^(?!0+$)\\d+$\n</code></pre>\n"},{"comments":[{"owner":{"account_id":223956,"reputation":16663,"user_id":483486,"accept_rate":96,"display_name":"OmnipotentEntity"},"score":0,"creation_date":1385507123,"post_id":20229343,"comment_id":30169778,"body_markdown":"This regular expression will erroneously fail to match numbers such as `10` and `29303`.  It will also match empty string.","body":"This regular expression will erroneously fail to match numbers such as <code>10</code> and <code>29303</code>.  It will also match empty string."}],"tags":[],"owner":{"display_name":"user3038487"},"comment_count":1,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1385504963,"creation_date":1385504963,"answer_id":20229343,"question_id":7036324,"body_markdown":"^[1-9]*$ is the simplest I can think of","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>^[1-9]*$ is the simplest I can think of</p>\n"},{"comments":[{"owner":{"account_id":4455231,"reputation":136,"user_id":3625752,"display_name":"rinilnath"},"score":0,"creation_date":1643255923,"post_id":32228415,"comment_id":125293149,"body_markdown":"For some reason this was not working in the pattern attribute of JSP page, the other pattern that helped , [0]*[1-9][0-9]*\nRef URL: https://www.toolbox.com/tech/programming/question/regular-expression-nonzero-values-083109/","body":"For some reason this was not working in the pattern attribute of JSP page, the other pattern that helped , [0]*[1-9][0-9]* Ref URL: <a href=\"https://www.toolbox.com/tech/programming/question/regular-expression-nonzero-values-083109/\" rel=\"nofollow noreferrer\">toolbox.com/tech/programming/question/&hellip;</a>"}],"tags":[],"owner":{"account_id":1770112,"reputation":3541,"user_id":1615100,"accept_rate":25,"display_name":"manoj"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1440596701,"creation_date":1440596701,"answer_id":32228415,"question_id":7036324,"body_markdown":"`^\\d*[1-9]\\d*$`   \r\n\r\nthis can include all positive values, even if it is padded by Zero in the front\r\n\r\nAllows\r\n\r\n1\r\n\r\n01\r\n\r\n10\r\n\r\n11  etc\r\n\r\ndo not allow\r\n\r\n0 \r\n\r\n00\r\n\r\n000 etc..\r\n","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p><code>^\\d*[1-9]\\d*$</code>   </p>\n\n<p>this can include all positive values, even if it is padded by Zero in the front</p>\n\n<p>Allows</p>\n\n<p>1</p>\n\n<p>01</p>\n\n<p>10</p>\n\n<p>11  etc</p>\n\n<p>do not allow</p>\n\n<p>0 </p>\n\n<p>00</p>\n\n<p>000 etc..</p>\n"},{"comments":[{"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"score":3,"creation_date":1457942962,"post_id":35980519,"comment_id":59617827,"body_markdown":"Thank you, but it doesn&#39;t add any value or elegance when compared to the accepted answer `[1-9]\\d*`.","body":"Thank you, but it doesn&#39;t add any value or elegance when compared to the accepted answer <code>[1-9]\\d*</code>."},{"owner":{"account_id":9611639,"reputation":461,"user_id":7135816,"display_name":"dummyDev"},"score":1,"creation_date":1580991559,"post_id":35980519,"comment_id":106284895,"body_markdown":"@Zeemee that is not correct as \\d might include numerals that are not 0-9. For example Arabic numerals like واحد in some libraries.","body":"@Zeemee that is not correct as \\d might include numerals that are not 0-9. For example Arabic numerals like واحد in some libraries."},{"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"score":0,"creation_date":1581081577,"post_id":35980519,"comment_id":106320827,"body_markdown":"@dummyDev I wasn&#39;t aware of that. Thank you for mentioning!","body":"@dummyDev I wasn&#39;t aware of that. Thank you for mentioning!"},{"owner":{"account_id":11901859,"reputation":4173,"user_id":8709603,"display_name":"Charith Jayasanka"},"score":0,"creation_date":1583924787,"post_id":35980519,"comment_id":107273567,"body_markdown":"Sadly this will return true for &quot;123abcd&quot;.","body":"Sadly this will return true for &quot;123abcd&quot;."},{"owner":{"account_id":3211356,"reputation":188,"user_id":2711300,"display_name":"Steve Baroti"},"score":0,"creation_date":1594388642,"post_id":35980519,"comment_id":111117244,"body_markdown":"Charith Jayasanka - yes, it still needs a ^ at the beginning and a &quot;$&quot; at the end :-)","body":"Charith Jayasanka - yes, it still needs a ^ at the beginning and a &quot;$&quot; at the end :-)"}],"tags":[],"owner":{"account_id":7312529,"reputation":376,"user_id":5571236,"display_name":"Palash Kanti Kundu"},"comment_count":5,"down_vote_count":2,"up_vote_count":21,"is_accepted":false,"score":19,"last_activity_date":1457935436,"creation_date":1457935436,"answer_id":35980519,"question_id":7036324,"body_markdown":"Try this one, this one works best to suffice the requiremnt.\r\n\r\n    [1-9][0-9]*\r\n\r\nHere is the sample output\r\n\r\n    String 0 matches regex: false\r\n    String 1 matches regex: true\r\n    String 2 matches regex: true\r\n    String 3 matches regex: true\r\n    String 4 matches regex: true\r\n    String 5 matches regex: true\r\n    String 6 matches regex: true\r\n    String 7 matches regex: true\r\n    String 8 matches regex: true\r\n    String 9 matches regex: true\r\n    String 10 matches regex: true\r\n    String 11 matches regex: true\r\n    String 12 matches regex: true\r\n    String 13 matches regex: true\r\n    String 14 matches regex: true\r\n    String 15 matches regex: true\r\n    String 16 matches regex: true\r\n    String 999 matches regex: true\r\n    String 2654 matches regex: true\r\n    String 25633 matches regex: true\r\n    String 254444 matches regex: true\r\n    String 0.1 matches regex: false\r\n    String 0.2 matches regex: false\r\n    String 0.3 matches regex: false\r\n    String -1 matches regex: false\r\n    String -2 matches regex: false\r\n    String -5 matches regex: false\r\n    String -6 matches regex: false\r\n    String -6.8 matches regex: false\r\n    String -9 matches regex: false\r\n    String -54 matches regex: false\r\n    String -29 matches regex: false\r\n    String 1000 matches regex: true\r\n    String 100000 matches regex: true\r\n\r\n","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Try this one, this one works best to suffice the requiremnt.</p>\n\n<pre><code>[1-9][0-9]*\n</code></pre>\n\n<p>Here is the sample output</p>\n\n<pre><code>String 0 matches regex: false\nString 1 matches regex: true\nString 2 matches regex: true\nString 3 matches regex: true\nString 4 matches regex: true\nString 5 matches regex: true\nString 6 matches regex: true\nString 7 matches regex: true\nString 8 matches regex: true\nString 9 matches regex: true\nString 10 matches regex: true\nString 11 matches regex: true\nString 12 matches regex: true\nString 13 matches regex: true\nString 14 matches regex: true\nString 15 matches regex: true\nString 16 matches regex: true\nString 999 matches regex: true\nString 2654 matches regex: true\nString 25633 matches regex: true\nString 254444 matches regex: true\nString 0.1 matches regex: false\nString 0.2 matches regex: false\nString 0.3 matches regex: false\nString -1 matches regex: false\nString -2 matches regex: false\nString -5 matches regex: false\nString -6 matches regex: false\nString -6.8 matches regex: false\nString -9 matches regex: false\nString -54 matches regex: false\nString -29 matches regex: false\nString 1000 matches regex: true\nString 100000 matches regex: true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":95220,"reputation":7,"user_id":259469,"display_name":"user259469"},"comment_count":0,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1483899865,"creation_date":1483899748,"answer_id":41536185,"question_id":7036324,"body_markdown":"This should only allow decimals &gt; 0 \r\n\r\n    ^([0-9]\\.\\d+)|([1-9]\\d*\\.?\\d*)$\r\n","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>This should only allow decimals > 0 </p>\n\n<pre><code>^([0-9]\\.\\d+)|([1-9]\\d*\\.?\\d*)$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15828994,"reputation":11,"user_id":11420950,"display_name":"Alexander Hammans"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1556398099,"creation_date":1556397943,"answer_id":55884738,"question_id":7036324,"body_markdown":"This RegEx matches any Integer positive out of 0: \r\n\r\n    (?&lt;!-)(?&lt;!\\d)[1-9][0-9]*\r\n\r\nIt works with two negative lookbehinds, which search for a minus before a number, which indicates it is a negative number. It also works for any negative number larger than -9 (e.g. -22).","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>This RegEx matches any Integer positive out of 0: </p>\n\n<pre><code>(?&lt;!-)(?&lt;!\\d)[1-9][0-9]*\n</code></pre>\n\n<p>It works with two negative lookbehinds, which search for a minus before a number, which indicates it is a negative number. It also works for any negative number larger than -9 (e.g. -22).</p>\n"},{"tags":[],"owner":{"account_id":15562122,"reputation":80,"user_id":11226973,"display_name":"OleksiiMLD"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556550512,"creation_date":1556550512,"answer_id":55906156,"question_id":7036324,"body_markdown":"My pattern is complicated, but it covers exactly &quot;Any positive integer, excluding 0&quot; (1 - 2147483647, not long). \r\nIt&#39;s for decimal numbers and doesn&#39;t allow leading zeros.\r\n\r\n    ^((1?[1-9][0-9]{0,8})|20[0-9]{8}|(21[0-3][0-9]{7})|(214[0-6][0-9]{6})\r\n    |(2147[0-3][0-9]{5})|(21474[0-7][0-9]{4})|(214748[0-2][0-9]{3})\r\n    |(2147483[0-5][0-9]{2})|(21474836[0-3][0-9])|(214748364[0-7]))$\r\n","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>My pattern is complicated, but it covers exactly \"Any positive integer, excluding 0\" (1 - 2147483647, not long). \nIt's for decimal numbers and doesn't allow leading zeros.</p>\n\n<pre><code>^((1?[1-9][0-9]{0,8})|20[0-9]{8}|(21[0-3][0-9]{7})|(214[0-6][0-9]{6})\n|(2147[0-3][0-9]{5})|(21474[0-7][0-9]{4})|(214748[0-2][0-9]{3})\n|(2147483[0-5][0-9]{2})|(21474836[0-3][0-9])|(214748364[0-7]))$\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16413717,"reputation":41,"user_id":11856357,"display_name":"user11856357"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1564477682,"creation_date":1564475196,"answer_id":57267358,"question_id":7036324,"body_markdown":"Any positive integer, excluding 0: `^\\+?[1-9]\\d*$`   &lt;br&gt;\r\nAny positive integer, including 0: `^(0|\\+?[1-9]\\d*)$`","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Any positive integer, excluding 0: <code>^\\+?[1-9]\\d*$</code>   <br>\nAny positive integer, including 0: <code>^(0|\\+?[1-9]\\d*)$</code></p>\n"},{"tags":[],"owner":{"account_id":15582606,"reputation":319,"user_id":11241975,"display_name":"Dima"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690282050,"creation_date":1690281527,"answer_id":76761872,"question_id":7036324,"body_markdown":"Ugly, but match the exact range 1..2147483647\r\n\r\n    ^(214748364[0-7]|21474836[0-3]\\d|2147483[0-5]\\d{2}|214748[0-2]\\d{3}|21474[0-7]\\d{4}|2147[0-3]\\d{5}|214[0-6]\\d{6}|21[0-3]\\d{7}|20\\d{8}|1\\d{9}|[1-9]\\d{0,8})$\r\n\r\nNote:\r\n - 2000000000 to 2147483647 -&gt; `214748364[0-7]|21474836[0-3]\\d|2147483[0-5]\\d{2}|214748[0-2]\\d{3}|21474[0-7]\\d{4}|2147[0-3]\\d{5}|214[0-6]\\d{6}|21[0-3]\\d{7}|20\\d{8}`\r\n - 1000000000 to 1999999999 -&gt; `1\\d{9}`\r\n - 1 to 999999999 -&gt; `[1-9]\\d{0,8}`","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>Ugly, but match the exact range 1..2147483647</p>\n<pre><code>^(214748364[0-7]|21474836[0-3]\\d|2147483[0-5]\\d{2}|214748[0-2]\\d{3}|21474[0-7]\\d{4}|2147[0-3]\\d{5}|214[0-6]\\d{6}|21[0-3]\\d{7}|20\\d{8}|1\\d{9}|[1-9]\\d{0,8})$\n</code></pre>\n<p>Note:</p>\n<ul>\n<li>2000000000 to 2147483647 -&gt; <code>214748364[0-7]|21474836[0-3]\\d|2147483[0-5]\\d{2}|214748[0-2]\\d{3}|21474[0-7]\\d{4}|2147[0-3]\\d{5}|214[0-6]\\d{6}|21[0-3]\\d{7}|20\\d{8}</code></li>\n<li>1000000000 to 1999999999 -&gt; <code>1\\d{9}</code></li>\n<li>1 to 999999999 -&gt; <code>[1-9]\\d{0,8}</code></li>\n</ul>\n"}],"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":208619,"favorite_count":0,"down_vote_count":0,"up_vote_count":117,"accepted_answer_id":7036361,"answer_count":14,"score":117,"last_activity_date":1690282050,"creation_date":1313130124,"question_id":7036324,"body_markdown":"How can `^\\d+$` be improved to disallow `0`?\r\n\r\nEDIT (Make it more concrete):  \r\n\r\n**Examples to allow:**  \r\n1  \r\n30  \r\n111  \r\n**Examples to disallow:**  \r\n0  \r\n00  \r\n-22\r\n\r\nIt doesn&#39;t matter if positive numbers with a leading zero are allowed or not (e.g. `022`).\r\n\r\nThis is for Java JDK Regex implementation.","title":"What is the regex for &quot;Any positive integer, excluding 0&quot;","body":"<p>How can <code>^\\d+$</code> be improved to disallow <code>0</code>?</p>\n\n<p>EDIT (Make it more concrete):  </p>\n\n<p><strong>Examples to allow:</strong><br>\n1<br>\n30<br>\n111<br>\n<strong>Examples to disallow:</strong><br>\n0<br>\n00<br>\n-22</p>\n\n<p>It doesn't matter if positive numbers with a leading zero are allowed or not (e.g. <code>022</code>).</p>\n\n<p>This is for Java JDK Regex implementation.</p>\n"},{"tags":["java","multithreading"],"answers":[{"tags":[],"owner":{"account_id":52827,"reputation":16482,"user_id":157921,"accept_rate":79,"display_name":"MarkPowell"},"comment_count":0,"down_vote_count":1,"up_vote_count":27,"is_accepted":false,"score":26,"last_activity_date":1261061989,"creation_date":1261061989,"answer_id":1922298,"question_id":1922290,"body_markdown":"There is a static method on the `Thread` Class that will return the number of active threads controlled by the JVM:\r\n\r\n`Thread.activeCount()`\r\n\r\n&gt; Returns the number of active threads in the current thread&#39;s thread group.\r\n\r\nAdditionally, external debuggers should list all active threads (and allow you to suspend any number of them) if you wish to monitor them in real-time.","title":"How to get the number of threads in a Java process","body":"<p>There is a static method on the <code>Thread</code> Class that will return the number of active threads controlled by the JVM:</p>\n\n<p><code>Thread.activeCount()</code></p>\n\n<blockquote>\n  <p>Returns the number of active threads in the current thread's thread group.</p>\n</blockquote>\n\n<p>Additionally, external debuggers should list all active threads (and allow you to suspend any number of them) if you wish to monitor them in real-time.</p>\n"},{"comments":[{"owner":{"account_id":959042,"reputation":1491,"user_id":983803,"accept_rate":65,"display_name":"3xCh1_23"},"score":3,"creation_date":1530821444,"post_id":1922300,"comment_id":89379995,"body_markdown":"It is only an estimate.","body":"It is only an estimate."}],"tags":[],"owner":{"account_id":32277,"reputation":183150,"user_id":89391,"accept_rate":79,"display_name":"miku"},"comment_count":1,"down_vote_count":1,"up_vote_count":98,"is_accepted":false,"score":97,"last_activity_date":1690281994,"creation_date":1261062001,"answer_id":1922300,"question_id":1922290,"body_markdown":"    java.lang.Thread.activeCount()\r\n\r\nIt will return the number of active threads in the **current thread&#39;s thread group**.\r\n\r\ndocs: http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#activeCount()\r\n\r\nNote from the docs:\r\n\r\n&gt; The value returned is only an **estimate** because the number of threads may change dynamically while this method traverses internal data structures, and might be affected by the presence of certain system threads. This method is intended primarily for debugging and monitoring purposes.","title":"How to get the number of threads in a Java process","body":"<pre><code>java.lang.Thread.activeCount()\n</code></pre>\n<p>It will return the number of active threads in the <strong>current thread's thread group</strong>.</p>\n<p>docs: <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#activeCount()\" rel=\"nofollow noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#activeCount()</a></p>\n<p>Note from the docs:</p>\n<blockquote>\n<p>The value returned is only an <strong>estimate</strong> because the number of threads may change dynamically while this method traverses internal data structures, and might be affected by the presence of certain system threads. This method is intended primarily for debugging and monitoring purposes.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":37139,"reputation":7302,"user_id":106114,"accept_rate":94,"display_name":"laura"},"comment_count":0,"down_vote_count":0,"up_vote_count":58,"is_accepted":true,"score":58,"last_activity_date":1261062062,"creation_date":1261062062,"answer_id":1922305,"question_id":1922290,"body_markdown":"Useful tool for debugging java programs, it gives the number of threads and other relevant info on them:\r\n\r\n`jconsole &lt;process-id&gt;`","title":"How to get the number of threads in a Java process","body":"<p>Useful tool for debugging java programs, it gives the number of threads and other relevant info on them:</p>\n\n<p><code>jconsole &lt;process-id&gt;</code></p>\n"},{"tags":[],"owner":{"account_id":23461,"reputation":5971,"user_id":58811,"accept_rate":100,"display_name":"Upul Bandara"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1397120028,"creation_date":1261062445,"answer_id":1922348,"question_id":1922290,"body_markdown":"        public class MainClass {\r\n\r\n    \t\tpublic static void main(String args[]) {\r\n\r\n      \t\t  Thread t = Thread.currentThread();\r\n      \t\t  t.setName(&quot;My Thread&quot;);\r\n\r\n      \t\t  t.setPriority(1);\r\n\r\n    \t\t  System.out.println(&quot;current thread: &quot; + t);\r\n\r\n    \t\t  int active = Thread.activeCount();\r\n    \t\t  System.out.println(&quot;currently active threads: &quot; + active);\r\n    \t\t  Thread all[] = new Thread[active];\r\n    \t\t  Thread.enumerate(all);\r\n\r\n    \t\t  for (int i = 0; i &lt; active; i++) {\r\n      \t\t     System.out.println(i + &quot;: &quot; + all[i]);\r\n   \t\t      }\r\n   \t\t   }\r\n\t   }\r\n","title":"How to get the number of threads in a Java process","body":"<pre><code>    public class MainClass {\n\n        public static void main(String args[]) {\n\n          Thread t = Thread.currentThread();\n          t.setName(\"My Thread\");\n\n          t.setPriority(1);\n\n          System.out.println(\"current thread: \" + t);\n\n          int active = Thread.activeCount();\n          System.out.println(\"currently active threads: \" + active);\n          Thread all[] = new Thread[active];\n          Thread.enumerate(all);\n\n          for (int i = 0; i &lt; active; i++) {\n             System.out.println(i + \": \" + all[i]);\n          }\n       }\n   }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1599384,"reputation":1684,"user_id":1480755,"accept_rate":38,"display_name":"Aruman"},"score":0,"creation_date":1362479959,"post_id":1922383,"comment_id":21455455,"body_markdown":"+1 For this. The amount of thread is exactly the same one i see on `top`. Although on the debug window, i only see 2 thread running instead of 5. :/","body":"+1 For this. The amount of thread is exactly the same one i see on <code>top</code>. Although on the debug window, i only see 2 thread running instead of 5. :/"},{"owner":{"account_id":1160785,"reputation":2555,"user_id":1140321,"accept_rate":53,"display_name":"Meher"},"score":0,"creation_date":1389293271,"post_id":1922383,"comment_id":31610874,"body_markdown":"ManagementFactory ? under which package ?","body":"ManagementFactory ? under which package ?"},{"owner":{"account_id":332245,"reputation":16487,"user_id":657427,"accept_rate":67,"display_name":"Christophe Roussy"},"score":0,"creation_date":1583404030,"post_id":1922383,"comment_id":107107977,"body_markdown":"`import java.lang.management.ManagementFactory;`\n\nhttps://docs.oracle.com/javase/8/docs/api/java/lang/management/ThreadMXBean.html#getThreadCount--\n\nAlso see `getPeakThreadCount()` and other methods before you start doing it yourself :)","body":"<code>import java.lang.management.ManagementFactory;</code>  <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/management/ThreadMXBean.html#getThreadCount--\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/management/&hellip;</a>  Also see <code>getPeakThreadCount()</code> and other methods before you start doing it yourself :)"}],"tags":[],"owner":{"account_id":23503,"reputation":28545,"user_id":58956,"accept_rate":91,"display_name":"gustafc"},"comment_count":3,"down_vote_count":0,"up_vote_count":86,"is_accepted":false,"score":86,"last_activity_date":1261062682,"creation_date":1261062682,"answer_id":1922383,"question_id":1922290,"body_markdown":"[`ManagementFactory.getThreadMXBean().getThreadCount()`][1] doesn&#39;t limit itself to thread groups as `Thread.activeCount()` does.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ManagementFactory.html#getThreadMXBean()","title":"How to get the number of threads in a Java process","body":"<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/management/ManagementFactory.html#getThreadMXBean()\" rel=\"noreferrer\"><code>ManagementFactory.getThreadMXBean().getThreadCount()</code></a> doesn't limit itself to thread groups as <code>Thread.activeCount()</code> does.</p>\n"},{"tags":[],"owner":{"account_id":6453072,"reputation":37996,"user_id":4999394,"accept_rate":98,"display_name":"Ravindra babu"},"comment_count":0,"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1469946235,"creation_date":1463831776,"answer_id":37362606,"question_id":1922290,"body_markdown":"I have written a program to iterate all `Threads` created and printing `getState()` of each `Thread`\r\n\r\n   \r\n    import java.util.Set;\r\n\r\n    public class ThreadStatus {\r\n        public static void main(String args[]) throws Exception{\r\n    \t\tfor ( int i=0; i&lt; 5; i++){\r\n    \t\t\tThread t = new Thread(new MyThread());\r\n    \t\t\tt.setName(&quot;MyThread:&quot;+i);\r\n    \t\t\tt.start();\r\n    \t\t}\r\n    \t\tint threadCount = 0;\r\n    \t\tSet&lt;Thread&gt; threadSet = Thread.getAllStackTraces().keySet();\r\n    \t\tfor ( Thread t : threadSet){\r\n    \t\t\tif ( t.getThreadGroup() == Thread.currentThread().getThreadGroup()){\r\n    \t\t\t\tSystem.out.println(&quot;Thread :&quot;+t+&quot;:&quot;+&quot;state:&quot;+t.getState());\r\n    \t\t\t\t++threadCount;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;Thread count started by Main thread:&quot;+threadCount);\r\n    \t}\r\n    }\r\n    \r\n    class MyThread implements Runnable{\r\n    \tpublic void run(){\r\n    \t\ttry{\r\n    \t\t\tThread.sleep(2000);\r\n    \t\t}catch(Exception err){\r\n    \t\t\terr.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\nOutput:\r\n\r\n    java ThreadStatus\r\n    \r\n    Thread :Thread[MyThread:0,5,main]:state:TIMED_WAITING\r\n    Thread :Thread[main,5,main]:state:RUNNABLE\r\n    Thread :Thread[MyThread:1,5,main]:state:TIMED_WAITING\r\n    Thread :Thread[MyThread:4,5,main]:state:TIMED_WAITING\r\n    Thread :Thread[MyThread:2,5,main]:state:TIMED_WAITING\r\n    Thread :Thread[MyThread:3,5,main]:state:TIMED_WAITING\r\n    Thread count started by Main thread:6\r\n\r\nIf you remove below condition\r\n\r\n    if ( t.getThreadGroup() == Thread.currentThread().getThreadGroup())\r\n\r\nYou will get below threads in output too, which have been started by system.\r\n\r\n   `Reference Handler, Signal Dispatcher,Attach Listener and Finalizer`. \r\n\r\n","title":"How to get the number of threads in a Java process","body":"<p>I have written a program to iterate all <code>Threads</code> created and printing <code>getState()</code> of each <code>Thread</code></p>\n\n<pre><code>import java.util.Set;\n\npublic class ThreadStatus {\n    public static void main(String args[]) throws Exception{\n        for ( int i=0; i&lt; 5; i++){\n            Thread t = new Thread(new MyThread());\n            t.setName(\"MyThread:\"+i);\n            t.start();\n        }\n        int threadCount = 0;\n        Set&lt;Thread&gt; threadSet = Thread.getAllStackTraces().keySet();\n        for ( Thread t : threadSet){\n            if ( t.getThreadGroup() == Thread.currentThread().getThreadGroup()){\n                System.out.println(\"Thread :\"+t+\":\"+\"state:\"+t.getState());\n                ++threadCount;\n            }\n        }\n        System.out.println(\"Thread count started by Main thread:\"+threadCount);\n    }\n}\n\nclass MyThread implements Runnable{\n    public void run(){\n        try{\n            Thread.sleep(2000);\n        }catch(Exception err){\n            err.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>java ThreadStatus\n\nThread :Thread[MyThread:0,5,main]:state:TIMED_WAITING\nThread :Thread[main,5,main]:state:RUNNABLE\nThread :Thread[MyThread:1,5,main]:state:TIMED_WAITING\nThread :Thread[MyThread:4,5,main]:state:TIMED_WAITING\nThread :Thread[MyThread:2,5,main]:state:TIMED_WAITING\nThread :Thread[MyThread:3,5,main]:state:TIMED_WAITING\nThread count started by Main thread:6\n</code></pre>\n\n<p>If you remove below condition</p>\n\n<pre><code>if ( t.getThreadGroup() == Thread.currentThread().getThreadGroup())\n</code></pre>\n\n<p>You will get below threads in output too, which have been started by system.</p>\n\n<p><code>Reference Handler, Signal Dispatcher,Attach Listener and Finalizer</code>. </p>\n"},{"tags":[],"owner":{"account_id":94740,"reputation":1041,"user_id":258489,"display_name":"Felipe Oliveira"},"comment_count":0,"down_vote_count":0,"up_vote_count":22,"is_accepted":false,"score":22,"last_activity_date":1487115556,"creation_date":1487115556,"answer_id":42238247,"question_id":1922290,"body_markdown":"Generic solution that doesn&#39;t require a GUI like jconsole (doesn&#39;t work on remote terminals), ps works for non-java processes, doesn&#39;t require a JVM installed. \r\n\r\n```ps -o nlwp &lt;pid&gt;```\r\n","title":"How to get the number of threads in a Java process","body":"<p>Generic solution that doesn't require a GUI like jconsole (doesn't work on remote terminals), ps works for non-java processes, doesn't require a JVM installed. </p>\n\n<p><code>ps -o nlwp &lt;pid&gt;</code></p>\n"},{"comments":[{"owner":{"account_id":75262,"reputation":362977,"user_id":215945,"accept_rate":100,"display_name":"Mark Rajcok"},"score":0,"creation_date":1643910806,"post_id":46521868,"comment_id":125471102,"body_markdown":"`top -H -p \\`pgrep -u &lt;userid here&gt; &lt;program name&gt;`\\`","body":"<code>top -H -p `pgrep -u &lt;userid here&gt; &lt;program name&gt;</code>`"}],"tags":[],"owner":{"account_id":4174610,"reputation":4104,"user_id":4460737,"display_name":"Alihossein shahabi"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1526663578,"creation_date":1506932448,"answer_id":46521868,"question_id":1922290,"body_markdown":"Using Linux `Top` command\r\n\r\n`top -H -p (process id)`\r\n\r\nyou could get process id of one program by this method :\r\n\r\n`ps aux | grep (your program name)`\r\n\r\nfor example : \r\n\r\n`ps aux | grep user.py`","title":"How to get the number of threads in a Java process","body":"<p>Using Linux <code>Top</code> command</p>\n\n<p><code>top -H -p (process id)</code></p>\n\n<p>you could get process id of one program by this method :</p>\n\n<p><code>ps aux | grep (your program name)</code></p>\n\n<p>for example : </p>\n\n<p><code>ps aux | grep user.py</code></p>\n"},{"tags":[],"owner":{"account_id":2161668,"reputation":632,"user_id":1915711,"display_name":"jpozorio"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1606738811,"creation_date":1601582436,"answer_id":64162421,"question_id":1922290,"body_markdown":"Get number of threads using jstack\r\n\r\n    jstack &lt;PID&gt; | grep &#39;java.lang.Thread.State&#39; | wc -l\r\n\r\nThe result of the above code is quite different from `top -H -p &lt;PID&gt;` or `ps -o nlwp &lt;PID&gt;` because jstack gets only threads from created by the application.\r\n\r\nIn other words, jstack will not get GC threads\r\n\r\n","title":"How to get the number of threads in a Java process","body":"<p>Get number of threads using jstack</p>\n<pre><code>jstack &lt;PID&gt; | grep 'java.lang.Thread.State' | wc -l\n</code></pre>\n<p>The result of the above code is quite different from <code>top -H -p &lt;PID&gt;</code> or <code>ps -o nlwp &lt;PID&gt;</code> because jstack gets only threads from created by the application.</p>\n<p>In other words, jstack will not get GC threads</p>\n"},{"tags":[],"owner":{"account_id":9860832,"reputation":408,"user_id":7303912,"display_name":"Jose1755"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614884641,"creation_date":1614884230,"answer_id":66481343,"question_id":1922290,"body_markdown":"   ` $ ps -p &lt;pid&gt; -lfT | wc -l `\r\n\r\nYou can get the pid using:\r\n\r\n   ` $ top  `\r\n    or \r\n    ` $ ps aux | grep (your program name) `\r\n\r\nTo get all threads, not only for one process\r\n\r\n   ` $ ps -elfT | wc -l  `\r\n\r\nThis is for centOS / Red Hat machines, it may or not work on other linux machines\r\n\r\n","title":"How to get the number of threads in a Java process","body":"<p><code>$ ps -p &lt;pid&gt; -lfT | wc -l</code></p>\n<p>You can get the pid using:</p>\n<p><code>$ top </code>\nor\n<code>$ ps aux | grep (your program name)</code></p>\n<p>To get all threads, not only for one process</p>\n<p><code>$ ps -elfT | wc -l </code></p>\n<p>This is for centOS / Red Hat machines, it may or not work on other linux machines</p>\n"},{"tags":[],"owner":{"account_id":9430455,"reputation":11,"user_id":16691224,"display_name":"Nachiketa"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1629227744,"creation_date":1629227744,"answer_id":68822891,"question_id":1922290,"body_markdown":"Another way:\r\nGet the process name using jps command and use that in below script snippet:\r\n\r\n```\r\n# Get the process id\r\nprocessPid=$(jps -l | grep &quot;Process Name&quot; | awk &#39;{print $1}&#39;); \r\n# Use process id to get number of threads using ps command \r\nps -M $processPid| wc -l\r\n```\r\nTested on macOS.","title":"How to get the number of threads in a Java process","body":"<p>Another way:\nGet the process name using jps command and use that in below script snippet:</p>\n<pre><code># Get the process id\nprocessPid=$(jps -l | grep &quot;Process Name&quot; | awk '{print $1}'); \n# Use process id to get number of threads using ps command \nps -M $processPid| wc -l\n</code></pre>\n<p>Tested on macOS.</p>\n"}],"owner":{"account_id":82582,"reputation":1881,"user_id":232089,"accept_rate":44,"display_name":"ndemir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":132464,"favorite_count":0,"down_vote_count":0,"up_vote_count":86,"accepted_answer_id":1922305,"answer_count":11,"score":86,"last_activity_date":1690281994,"creation_date":1261061861,"question_id":1922290,"body_markdown":"How can I see the number of threads in a Java process? ","title":"How to get the number of threads in a Java process","body":"<p>How can I see the number of threads in a Java process? </p>\n"},{"tags":["java","mysql","spring-boot"],"comments":[{"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"score":0,"creation_date":1690282232,"post_id":76761858,"comment_id":135328436,"body_markdown":"It is not clear your intentions either you want to store an user data to the db, or retrieve it. I. The first case you should use insert statement to add data. In the second case the db should already be filled up.","body":"It is not clear your intentions either you want to store an user data to the db, or retrieve it. I. The first case you should use insert statement to add data. In the second case the db should already be filled up."}],"answers":[{"tags":[],"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690281743,"creation_date":1690281743,"answer_id":76761912,"question_id":76761858,"body_markdown":"Seems that the form in your HTML is missing the name attribute in the input fields. The name attribute is crucial for sending the form data to the backend server. Without it, the form data will not be mapped correctly to the BookEntity class in your Spring Boot application.\r\n\r\nTo fix the issue, make sure to add the name attribute to each input field like\r\n\r\n```\r\n &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;author&quot; name=&quot;author&quot;&gt;\r\n```","title":"issue on database returning empty value , framework spring boot and MySQL , thymeleaf","body":"<p>Seems that the form in your HTML is missing the name attribute in the input fields. The name attribute is crucial for sending the form data to the backend server. Without it, the form data will not be mapped correctly to the BookEntity class in your Spring Boot application.</p>\n<p>To fix the issue, make sure to add the name attribute to each input field like</p>\n<pre><code> &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;author&quot; name=&quot;author&quot;&gt;\n</code></pre>\n"}],"owner":{"account_id":29086931,"reputation":1,"user_id":22281658,"display_name":"Kim kim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690281743,"creation_date":1690281434,"question_id":76761858,"body_markdown":"i im working on a simple bookstore web application, back-end with spring-boot  , major issues  , code  seem to  run well  with no error but  the  database is  unable  to  receive the input data from  the  forum  user ,  database only return empty value like (?,?,?), \r\ncode below &gt;&gt;\r\n\r\n my expected result i wanted  the  given  value  to  be  store at mysql database \r\n\r\n`\r\n\r\n```\r\n&lt;div class=&quot;container my-5 p-5&quot; style=&quot;border: 1px solid black;&quot;&gt;\r\n    &lt;h4 class=&quot;text-centre&quot;&gt;New Book Register&lt;/h4&gt;\r\n    &lt;form class=&quot;col-md-4 offset-md-4&quot; th:action=&quot;@{/save}&quot;  method=&quot;post&quot;&gt;\r\n        &lt;div class=&quot;mb-3&quot;&gt;\r\n            &lt;label for=&quot;author&quot; class=&quot;form-label&quot;&gt;Author&lt;/label&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;author&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;mb-3&quot;&gt;\r\n            &lt;label for=&quot;name&quot; class=&quot;form-label&quot;&gt;name&lt;/label&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot;&gt;\r\n        &lt;/div&gt;\r\n        &lt;div class=&quot;mb-3 form-check&quot;&gt;\r\n            &lt;label for=&quot;price&quot; class=&quot;form-label&quot;&gt;price&lt;/label&gt;\r\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;price&quot;&gt;\r\n        &lt;/div&gt;\r\n      &lt;div style=&quot;text-align: centre;&quot;&gt;&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;&lt;/div&gt;\r\n    &lt;/form&gt;\r\n\r\nback end---------------------\r\n@Entity\r\n\r\n@Table(name = &quot;Book&quot;)\r\npublic class BookEntity {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\r\n    private int id;\r\n    private String name;\r\n    private String author;\r\n    private String price;\r\n    public BookEntity(int id, String name, String author, String price) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.author = author;\r\n        this.price = price;\r\n    }\r\n    \r\n    public int getId() {\r\n        return id;\r\n    }\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public String getAuthor() {\r\n        return author;\r\n    }\r\n\r\n    public void setAuthor(String author) {\r\n        this.author = author;\r\n    }\r\n\r\n    public String getPrice() {\r\n        return price;\r\n    }\r\n\r\n    public void set Price(String price) {\r\n        this.price = price;\r\n    }\r\n    \r\n    public Book Entity() {\r\n\r\n    }\r\n------------------------------\r\n@Controller\r\n\r\npublic class BookController {\r\n\r\n    @Autowired\r\n    private BookService service;\r\n\r\n    @RequestMapping(&quot;/&quot;)\r\npublic   String home(){\r\n\r\n        return &quot;home&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/book_register&quot;)\r\n    public   String bookRegister(){\r\n\r\n        return &quot;bookRegister&quot;;\r\n    }\r\n\r\n    @Get Mapping(&quot;/Available_Book&quot;)\r\n    public String AvailableBook()\r\n    {\r\n\r\n        return &quot;AvailableBook&quot;;\r\n    }\r\n\r\n     @PostMapping(&quot;/save&quot;)\r\n    public  String addBook(@ModelAttribute BookEntity b){\r\n        service.save(b);\r\n        return &quot;redirect:/Available_Book&quot;;\r\n     }\r\n\r\n\r\n@Service\r\npublic class Book Service {\r\n    @Autowired\r\n    private Book Repository repository;\r\n\r\n    public void save(Book Entity b){\r\n        repository.save(b);\r\n\r\n    }\r\n```\r\n`","title":"issue on database returning empty value , framework spring boot and MySQL , thymeleaf","body":"<p>i im working on a simple bookstore web application, back-end with spring-boot  , major issues  , code  seem to  run well  with no error but  the  database is  unable  to  receive the input data from  the  forum  user ,  database only return empty value like (?,?,?),\ncode below &gt;&gt;</p>\n<p>my expected result i wanted  the  given  value  to  be  store at mysql database</p>\n<p>`</p>\n<pre><code>&lt;div class=&quot;container my-5 p-5&quot; style=&quot;border: 1px solid black;&quot;&gt;\n    &lt;h4 class=&quot;text-centre&quot;&gt;New Book Register&lt;/h4&gt;\n    &lt;form class=&quot;col-md-4 offset-md-4&quot; th:action=&quot;@{/save}&quot;  method=&quot;post&quot;&gt;\n        &lt;div class=&quot;mb-3&quot;&gt;\n            &lt;label for=&quot;author&quot; class=&quot;form-label&quot;&gt;Author&lt;/label&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;author&quot;&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;mb-3&quot;&gt;\n            &lt;label for=&quot;name&quot; class=&quot;form-label&quot;&gt;name&lt;/label&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;name&quot;&gt;\n        &lt;/div&gt;\n        &lt;div class=&quot;mb-3 form-check&quot;&gt;\n            &lt;label for=&quot;price&quot; class=&quot;form-label&quot;&gt;price&lt;/label&gt;\n            &lt;input type=&quot;text&quot; class=&quot;form-control&quot; id=&quot;price&quot;&gt;\n        &lt;/div&gt;\n      &lt;div style=&quot;text-align: centre;&quot;&gt;&lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Submit&lt;/button&gt;&lt;/div&gt;\n    &lt;/form&gt;\n\nback end---------------------\n@Entity\n\n@Table(name = &quot;Book&quot;)\npublic class BookEntity {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n\n    private int id;\n    private String name;\n    private String author;\n    private String price;\n    public BookEntity(int id, String name, String author, String price) {\n        this.id = id;\n        this.name = name;\n        this.author = author;\n        this.price = price;\n    }\n    \n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getAuthor() {\n        return author;\n    }\n\n    public void setAuthor(String author) {\n        this.author = author;\n    }\n\n    public String getPrice() {\n        return price;\n    }\n\n    public void set Price(String price) {\n        this.price = price;\n    }\n    \n    public Book Entity() {\n\n    }\n------------------------------\n@Controller\n\npublic class BookController {\n\n    @Autowired\n    private BookService service;\n\n    @RequestMapping(&quot;/&quot;)\npublic   String home(){\n\n        return &quot;home&quot;;\n    }\n\n    @GetMapping(&quot;/book_register&quot;)\n    public   String bookRegister(){\n\n        return &quot;bookRegister&quot;;\n    }\n\n    @Get Mapping(&quot;/Available_Book&quot;)\n    public String AvailableBook()\n    {\n\n        return &quot;AvailableBook&quot;;\n    }\n\n     @PostMapping(&quot;/save&quot;)\n    public  String addBook(@ModelAttribute BookEntity b){\n        service.save(b);\n        return &quot;redirect:/Available_Book&quot;;\n     }\n\n\n@Service\npublic class Book Service {\n    @Autowired\n    private Book Repository repository;\n\n    public void save(Book Entity b){\n        repository.save(b);\n\n    }\n</code></pre>\n<p>`</p>\n"},{"tags":["java","spring","unit-testing","authentication","lombok"],"comments":[{"owner":{"account_id":10235034,"reputation":10879,"user_id":7554328,"display_name":"Darren Forsythe"},"score":1,"creation_date":1603738595,"post_id":64543266,"comment_id":114126069,"body_markdown":"https://docs.spring.io/spring-security/site/docs/5.2.x/reference/html/test.html","body":"<a href=\"https://docs.spring.io/spring-security/site/docs/5.2.x/reference/html/test.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-security/site/docs/5.2.x/reference/htm&zwnj;&#8203;l/&hellip;</a>"},{"owner":{"account_id":8324875,"reputation":11755,"user_id":6413377,"accept_rate":25,"display_name":"pirho"},"score":1,"creation_date":1604347402,"post_id":64543266,"comment_id":114315161,"body_markdown":"Can you share the method to be tested and the test you want to perform? What and how to mock?","body":"Can you share the method to be tested and the test you want to perform? What and how to mock?"},{"owner":{"account_id":14401561,"reputation":582,"user_id":10403022,"display_name":"Sam"},"score":1,"creation_date":1604395190,"post_id":64543266,"comment_id":114327863,"body_markdown":"If you&#39;re using mockito you could do                                                                       \n\n    Authentication authentication = mock(Authentication.class);\n    SecurityContext securityContext = mock(SecurityContext.class);\n    when(securityContext.getAuthentication()).thenReturn(authentication);\n    SecurityContextHolder.setContext(securityContext);\n    when(SecurityContextHolder.getContext().getAuthentication().getPrincipal())\n        .thenReturn(currentUser()); \n\nwhere the currentUser() method returns the user object","body":"If you&#39;re using mockito you could do                                                                             Authentication authentication = mock(Authentication.class);     SecurityContext securityContext = mock(SecurityContext.class);     when(securityContext.getAuthentication()).thenReturn(authent&zwnj;&#8203;ication);     SecurityContextHolder.setContext(securityContext);     when(SecurityContextHolder.getContext().getAuthentication().&zwnj;&#8203;getPrincipal())         .thenReturn(currentUser());   where the currentUser() method returns the user object"}],"answers":[{"tags":[],"owner":{"account_id":3146381,"reputation":1657,"user_id":2660789,"display_name":"Aman"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1603992024,"creation_date":1603992024,"answer_id":64596161,"question_id":64543266,"body_markdown":"The easiest solution that comes to mind is `@WithMockUser`. It does what you asked for. But, in case you are not satisfied with it, you can create an annotation and tune it to your needs.\r\n\r\nI am assuming that you have tried `@WithMockUser` and it **really** didn&#39;t fit your needs.\r\n\r\nThere are three important tasks. The first is *creating an annotation* followed by creating a class that represents a *user* of your system and finally creating *SecurityContextFactory*.\r\n\r\n1. Let&#39;s start with the annotation\r\n```\r\nimport java.lang.annotation.Retention;\r\nimport java.lang.annotation.RetentionPolicy;\r\n\r\nimport org.springframework.security.test.context.support.WithSecurityContext;\r\n\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@WithSecurityContext(factory = WithMockAaronSecurityContextFactory.class)\r\npublic @interface WithAaronUser {\r\n\tString username() default &quot;TestUser&quot;;\r\n\tString[] roles() default { &quot;ROLE_ADMIN&quot; };\r\n}\r\n\r\n```\r\n2. A mock user class\r\n```\r\nimport java.util.Collection;\r\nimport java.util.stream.Collectors;\r\nimport java.util.stream.Stream;\r\n\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n\r\npublic class MockUserDetails {\r\n\r\n\tprivate String username;\r\n\tprivate Collection&lt;? extends GrantedAuthority&gt; authorities;\r\n\t\r\n\tpublic MockUserDetails(String username, String[] roles) {\r\n\t\tthis.username = username;\r\n\t\tthis.authorities = Stream.of(roles)\r\n\t\t\t\t.map(role -&gt; new SimpleGrantedAuthority(role)).collect(Collectors.toSet());\r\n\t}\r\n\r\n\tpublic String getUsername() {\r\n\t\treturn username;\r\n\t}\r\n\r\n\tpublic Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\r\n\t\treturn authorities;\r\n\t}\r\n}\r\n```\r\n\r\n3 Finally the *SecurityContextFactory*. Note that the implementation uses the same factory class (`WithSecurityContextFactory`) that `@WithMockUser` uses. \r\n```\r\nimport java.io.Serializable;\r\nimport java.util.Collections;\r\nimport java.util.HashMap;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.Set;\r\n\r\nimport org.springframework.mock.web.MockHttpServletRequest;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.GrantedAuthority;\r\nimport org.springframework.security.core.authority.AuthorityUtils;\r\nimport org.springframework.security.core.context.SecurityContext;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.security.oauth2.provider.OAuth2Authentication;\r\nimport org.springframework.security.oauth2.provider.OAuth2Request;\r\nimport org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationDetails;\r\nimport org.springframework.security.test.context.support.WithSecurityContextFactory;\r\n\r\npublic class WithMockAaronSecurityContextFactory implements WithSecurityContextFactory&lt;WithAaronUser&gt; {\r\n\r\n\t@Override\r\n\tpublic SecurityContext createSecurityContext(WithAaronUser user) {\r\n\r\n\t\tMockUserDetails principal = new MockUserDetails(user.username(), user.roles());\r\n\r\n\t\tMockHttpServletRequest request = new MockHttpServletRequest();\r\n\t    request.setServerName(&quot;www.example.com&quot;);\r\n\t    request.setRequestURI(&quot;/token&quot;);\r\n\t    request.setQueryString(&quot;param1=value1&amp;param&quot;);\r\n\t    request.setAttribute(OAuth2AuthenticationDetails.ACCESS_TOKEN_VALUE, &quot;mocked_token&quot;);\r\n\t    OAuth2AuthenticationDetails authDetails = new OAuth2AuthenticationDetails(request);\r\n\t\t\r\n\t    Map&lt;String, String&gt; decodedDetails = new HashMap&lt;&gt;();\r\n\t    decodedDetails.put(&quot;first_name&quot;, &quot;Jean-Claude&quot;);\r\n\t    decodedDetails.put(&quot;last_name&quot;, &quot;Van Damme&quot;);\r\n\t    authDetails.setDecodedDetails(decodedDetails);\r\n\t\t\r\n\t\t\r\n\t    UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(principal.getUsername(), &quot;password&quot;, principal.getAuthorities());\r\n\t\tauth.setDetails(authDetails);\r\n\t\t\r\n\t\t\r\n\t\tList&lt;GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList(&quot;ROLE_ADMIN&quot;);\r\n\t\tOAuth2Request oAuth2Request = new OAuth2Request(Collections.emptyMap(), &quot;&quot;, authorities, true, Collections.emptySet(), Collections.emptySet(), &quot;http://somethig.com&quot;, Collections.emptySet(), Collections.emptyMap());\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\tOAuth2Authentication oAuth = new OAuth2Authentication(getOauth2Request(), auth);\r\n\t    oAuth.setDetails(authDetails);\r\n\t        \r\n\t\tSecurityContext context = SecurityContextHolder.createEmptyContext();\r\n\t\tcontext.setAuthentication(oAuth);\r\n\t\treturn context;\r\n\t}\r\n}\r\n```\r\n ","title":"Mocking @AuthenticationPrincipal for a unit test","body":"<p>The easiest solution that comes to mind is <code>@WithMockUser</code>. It does what you asked for. But, in case you are not satisfied with it, you can create an annotation and tune it to your needs.</p>\n<p>I am assuming that you have tried <code>@WithMockUser</code> and it <strong>really</strong> didn't fit your needs.</p>\n<p>There are three important tasks. The first is <em>creating an annotation</em> followed by creating a class that represents a <em>user</em> of your system and finally creating <em>SecurityContextFactory</em>.</p>\n<ol>\n<li>Let's start with the annotation</li>\n</ol>\n<pre><code>import java.lang.annotation.Retention;\nimport java.lang.annotation.RetentionPolicy;\n\nimport org.springframework.security.test.context.support.WithSecurityContext;\n\n@Retention(RetentionPolicy.RUNTIME)\n@WithSecurityContext(factory = WithMockAaronSecurityContextFactory.class)\npublic @interface WithAaronUser {\n    String username() default &quot;TestUser&quot;;\n    String[] roles() default { &quot;ROLE_ADMIN&quot; };\n}\n\n</code></pre>\n<ol start=\"2\">\n<li>A mock user class</li>\n</ol>\n<pre><code>import java.util.Collection;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\n\npublic class MockUserDetails {\n\n    private String username;\n    private Collection&lt;? extends GrantedAuthority&gt; authorities;\n    \n    public MockUserDetails(String username, String[] roles) {\n        this.username = username;\n        this.authorities = Stream.of(roles)\n                .map(role -&gt; new SimpleGrantedAuthority(role)).collect(Collectors.toSet());\n    }\n\n    public String getUsername() {\n        return username;\n    }\n\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return authorities;\n    }\n}\n</code></pre>\n<p>3 Finally the <em>SecurityContextFactory</em>. Note that the implementation uses the same factory class (<code>WithSecurityContextFactory</code>) that <code>@WithMockUser</code> uses.</p>\n<pre><code>import java.io.Serializable;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\n\nimport org.springframework.mock.web.MockHttpServletRequest;\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.AuthorityUtils;\nimport org.springframework.security.core.context.SecurityContext;\nimport org.springframework.security.core.context.SecurityContextHolder;\nimport org.springframework.security.oauth2.provider.OAuth2Authentication;\nimport org.springframework.security.oauth2.provider.OAuth2Request;\nimport org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationDetails;\nimport org.springframework.security.test.context.support.WithSecurityContextFactory;\n\npublic class WithMockAaronSecurityContextFactory implements WithSecurityContextFactory&lt;WithAaronUser&gt; {\n\n    @Override\n    public SecurityContext createSecurityContext(WithAaronUser user) {\n\n        MockUserDetails principal = new MockUserDetails(user.username(), user.roles());\n\n        MockHttpServletRequest request = new MockHttpServletRequest();\n        request.setServerName(&quot;www.example.com&quot;);\n        request.setRequestURI(&quot;/token&quot;);\n        request.setQueryString(&quot;param1=value1&amp;param&quot;);\n        request.setAttribute(OAuth2AuthenticationDetails.ACCESS_TOKEN_VALUE, &quot;mocked_token&quot;);\n        OAuth2AuthenticationDetails authDetails = new OAuth2AuthenticationDetails(request);\n        \n        Map&lt;String, String&gt; decodedDetails = new HashMap&lt;&gt;();\n        decodedDetails.put(&quot;first_name&quot;, &quot;Jean-Claude&quot;);\n        decodedDetails.put(&quot;last_name&quot;, &quot;Van Damme&quot;);\n        authDetails.setDecodedDetails(decodedDetails);\n        \n        \n        UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(principal.getUsername(), &quot;password&quot;, principal.getAuthorities());\n        auth.setDetails(authDetails);\n        \n        \n        List&lt;GrantedAuthority&gt; authorities = AuthorityUtils.createAuthorityList(&quot;ROLE_ADMIN&quot;);\n        OAuth2Request oAuth2Request = new OAuth2Request(Collections.emptyMap(), &quot;&quot;, authorities, true, Collections.emptySet(), Collections.emptySet(), &quot;http://somethig.com&quot;, Collections.emptySet(), Collections.emptyMap());\n                    \n                    \n        OAuth2Authentication oAuth = new OAuth2Authentication(getOauth2Request(), auth);\n        oAuth.setDetails(authDetails);\n            \n        SecurityContext context = SecurityContextHolder.createEmptyContext();\n        context.setAuthentication(oAuth);\n        return context;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":364348,"reputation":4420,"user_id":708678,"accept_rate":81,"display_name":"Aaron"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1427,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":64596161,"answer_count":1,"score":2,"last_activity_date":1690281563,"creation_date":1603738320,"question_id":64543266,"body_markdown":"I am new to spring and lombok. I am working on a unit test for a controller where the method uses `@AuthenticationPrincipal`. From what I have read it passes the information of the authenticated user into the method.  Is there a way to mock this for the unit test?","title":"Mocking @AuthenticationPrincipal for a unit test","body":"<p>I am new to spring and lombok. I am working on a unit test for a controller where the method uses <code>@AuthenticationPrincipal</code>. From what I have read it passes the information of the authenticated user into the method.  Is there a way to mock this for the unit test?</p>\n"},{"tags":["java","mysql","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":3795830,"reputation":6437,"user_id":3150948,"accept_rate":70,"display_name":"Amer Qarabsa"},"score":0,"creation_date":1491466185,"post_id":43249308,"comment_id":73567778,"body_markdown":"Are you sure sampleDB is created?","body":"Are you sure sampleDB is created?"}],"answers":[{"comments":[{"owner":{"account_id":14676735,"reputation":139,"user_id":10599548,"display_name":"GioPoe"},"score":0,"creation_date":1591497586,"post_id":43249370,"comment_id":110077212,"body_markdown":"I got the same error and I created the database using the mysql workbench beforehand. Would you happen to know why this error still occurs? Or does creating the database using mysql on terminal change something as opposed to workbench","body":"I got the same error and I created the database using the mysql workbench beforehand. Would you happen to know why this error still occurs? Or does creating the database using mysql on terminal change something as opposed to workbench"}],"tags":[],"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1491466629,"creation_date":1491466154,"answer_id":43249370,"question_id":43249308,"body_markdown":"You connect to the database `sampleDB` which is not automatically created by mysql in contrast to h2.\r\n\r\n\r\nYou have to create it by yourself using `mysql -u &lt;user&gt; -p -e &quot;create database sampleDB&quot;`","title":"Cant create a mysql database using Spring Boot","body":"<p>You connect to the database <code>sampleDB</code> which is not automatically created by mysql in contrast to h2.</p>\n\n<p>You have to create it by yourself using <code>mysql -u &lt;user&gt; -p -e \"create database sampleDB\"</code></p>\n"},{"tags":[],"owner":{"account_id":2398734,"reputation":1036,"user_id":2096977,"accept_rate":60,"display_name":"Zubair Nabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1491466317,"creation_date":1491466317,"answer_id":43249435,"question_id":43249308,"body_markdown":"You need to create the database first. ","title":"Cant create a mysql database using Spring Boot","body":"<p>You need to create the database first. </p>\n"},{"comments":[{"owner":{"account_id":6014928,"reputation":822,"user_id":4724129,"display_name":"Clement Osei Tano"},"score":1,"creation_date":1627397907,"post_id":49681336,"comment_id":121142755,"body_markdown":"Best answer on this page","body":"Best answer on this page"}],"tags":[],"owner":{"account_id":4243102,"reputation":3047,"user_id":5784939,"display_name":"Eugene Maysyuk"},"comment_count":1,"down_vote_count":0,"up_vote_count":40,"is_accepted":false,"score":40,"last_activity_date":1668350110,"creation_date":1522961565,"answer_id":49681336,"question_id":43249308,"body_markdown":"Neither the Spring Boot nor the Hibernate will not create database instead of you.\r\n\r\n\r\nThe setting below just creates tables and expects that DB already exists:\r\n\r\n    spring.jpa.hibernate.ddl-auto=create\r\n\r\n\r\n\r\nHowever when you are using embedded DB (HSQLDB, H2 ...) the database will be created automatically. This is vendor specific behavior.\r\n\r\nFor MySQL you can use the following configuration to create DB automatically:\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?createDatabaseIfNotExist=true\r\n\r\nPay attention to the connection parameter.\r\n\r\nIn this case database will be created automatically during connection.\r\n\r\n\r\n\r\n","title":"Cant create a mysql database using Spring Boot","body":"<p>Neither the Spring Boot nor the Hibernate will not create database instead of you.</p>\n<p>The setting below just creates tables and expects that DB already exists:</p>\n<pre><code>spring.jpa.hibernate.ddl-auto=create\n</code></pre>\n<p>However when you are using embedded DB (HSQLDB, H2 ...) the database will be created automatically. This is vendor specific behavior.</p>\n<p>For MySQL you can use the following configuration to create DB automatically:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?createDatabaseIfNotExist=true\n</code></pre>\n<p>Pay attention to the connection parameter.</p>\n<p>In this case database will be created automatically during connection.</p>\n"},{"tags":[],"owner":{"account_id":7555169,"reputation":153,"user_id":5735113,"display_name":"Nail Khaled Beneloualid"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1632759516,"creation_date":1632759516,"answer_id":69349995,"question_id":43249308,"body_markdown":"you need to add this to your configuration :\r\n\r\nspring.datasource.url=jdbc:mysql://localhost:3306/yourDbName?createDatabaseIfNotExist=true\r\n\r\nWrite your database name and spring will create the database automatically ","title":"Cant create a mysql database using Spring Boot","body":"<p>you need to add this to your configuration :</p>\n<p>spring.datasource.url=jdbc:mysql://localhost:3306/yourDbName?createDatabaseIfNotExist=true</p>\n<p>Write your database name and spring will create the database automatically</p>\n"},{"tags":[],"owner":{"account_id":19542335,"reputation":1,"user_id":14299847,"display_name":"Nasser Benoudi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671495980,"creation_date":1671280140,"answer_id":74834074,"question_id":43249308,"body_markdown":"In your application.properties change the line : \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB  \r\n\r\nto \r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?use=sampleDB\r\n\r\nMfG.","title":"Cant create a mysql database using Spring Boot","body":"<p>In your application.properties change the line :</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB  \n</code></pre>\n<p>to</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?use=sampleDB\n</code></pre>\n<p>MfG.</p>\n"},{"tags":[],"owner":{"account_id":28761618,"reputation":71,"user_id":22027389,"display_name":"Thusitha Bandara"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686218344,"creation_date":1686218344,"answer_id":76430693,"question_id":43249308,"body_markdown":"Solution 1:\r\n\r\nIn your application.properties change the line :\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB\r\nto\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?createDatabaseIfNotExist=true\r\n\r\nSolution 2:\r\n\r\nYou need to create the database first.","title":"Cant create a mysql database using Spring Boot","body":"<p>Solution 1:</p>\n<p>In your application.properties change the line :</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB\n</code></pre>\n<p>to</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB?createDatabaseIfNotExist=true\n</code></pre>\n<p>Solution 2:</p>\n<p>You need to create the database first.</p>\n"},{"tags":[],"owner":{"account_id":24685526,"reputation":1,"user_id":18578768,"display_name":"Muzaffer Yenice"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690281123,"creation_date":1689854449,"answer_id":76729642,"question_id":43249308,"body_markdown":"If you use `.yml` file you should do like below.\r\n\r\n\tjpa:\r\n\t\thibernate:\r\n\t\tddl-auto: create\r\n\t\tshow-sql: true\r\n\t\tdatabase-platform: org.hibernate.dialect.MySQL8Dialect\r\n\t\tproperties:\r\n\t\t&#39;[hibernate.format_sql]&#39;: true  ","title":"Cant create a mysql database using Spring Boot","body":"<p>If you use <code>.yml</code> file you should do like below.</p>\n<pre><code>jpa:\n    hibernate:\n    ddl-auto: create\n    show-sql: true\n    database-platform: org.hibernate.dialect.MySQL8Dialect\n    properties:\n    '[hibernate.format_sql]': true  \n</code></pre>\n"}],"owner":{"account_id":10362590,"reputation":207,"user_id":7642616,"accept_rate":25,"display_name":"jon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15191,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":43249370,"answer_count":7,"score":13,"last_activity_date":1690281123,"creation_date":1491465989,"question_id":43249308,"body_markdown":"I was trying to implement Spring Boot without embedded database like h2 and derby but instead with mysql. I keep getting unknown database error.\r\n\r\npom.xml:\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!--\t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n                &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n                &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;--&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n            &lt;version&gt;5.1.38&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\napplication.properties:\r\n\r\n    #Database Configuration\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/sampleDB\r\n    spring.datasource.username=root\r\n    spring.datasource.password=root\r\n    spring.datasource.driverClassName=com.mysql.jdbc.Driver\r\n    spring.jpa.generate-ddl=true\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n\r\nerror:\r\n\r\n    com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database &#39;sampledb&#39;\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_111]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_111]\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_111]\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_111]\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:404) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.Util.getInstance(Util.java:387) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.SQLError.createSQLException(SQLError.java:939) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3878) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3814) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:871) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1215) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2255) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2286) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2085) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:795) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:44) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_111]\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_111]\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_111]\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_111]\r\n    \tat com.mysql.jdbc.Util.handleNewInstance(Util.java:404) ~[mysql-connector-java-5.1.38.jar:5.1.38]\r\n\r\nIf I use an embedded database like h2 then it is working without anything mentioned in the application.properties file but if I use MySQL I get this error. Please help.","title":"Cant create a mysql database using Spring Boot","body":"<p>I was trying to implement Spring Boot without embedded database like h2 and derby but instead with mysql. I keep getting unknown database error.</p>\n\n<p>pom.xml:</p>\n\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.2.RELEASE&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n    &lt;java.version&gt;1.8&lt;/java.version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!--        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;--&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n        &lt;version&gt;5.1.38&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>application.properties:</p>\n\n<pre><code>#Database Configuration\nspring.datasource.url=jdbc:mysql://localhost:3306/sampleDB\nspring.datasource.username=root\nspring.datasource.password=root\nspring.datasource.driverClassName=com.mysql.jdbc.Driver\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\n</code></pre>\n\n<p>error:</p>\n\n<pre><code>com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown database 'sampledb'\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_111]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_111]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_111]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_111]\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:404) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.Util.getInstance(Util.java:387) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:939) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3878) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3814) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:871) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.MysqlIO.proceedHandshakeWithPluggableAuthentication(MysqlIO.java:1694) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1215) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2255) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2286) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2085) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.ConnectionImpl.&lt;init&gt;(ConnectionImpl.java:795) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at com.mysql.jdbc.JDBC4Connection.&lt;init&gt;(JDBC4Connection.java:44) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) ~[na:1.8.0_111]\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62) ~[na:1.8.0_111]\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45) ~[na:1.8.0_111]\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423) ~[na:1.8.0_111]\n    at com.mysql.jdbc.Util.handleNewInstance(Util.java:404) ~[mysql-connector-java-5.1.38.jar:5.1.38]\n</code></pre>\n\n<p>If I use an embedded database like h2 then it is working without anything mentioned in the application.properties file but if I use MySQL I get this error. Please help.</p>\n"},{"tags":["java","selenium-webdriver","sendkeys"],"comments":[{"owner":{"account_id":16840055,"reputation":300,"user_id":12175652,"display_name":"Rolandas Ulevicius"},"score":0,"creation_date":1690192695,"post_id":76753118,"comment_id":135314187,"body_markdown":"Does this answer your question? [Selenium Java clear method will not clear the input field?](https://stackoverflow.com/questions/69666100/selenium-java-clear-method-will-not-clear-the-input-field)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/69666100/selenium-java-clear-method-will-not-clear-the-input-field\">Selenium Java clear method will not clear the input field?</a>"}],"answers":[{"tags":[],"owner":{"account_id":26682848,"reputation":3568,"user_id":20292589,"display_name":"Yaroslavm"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690195119,"creation_date":1690195119,"answer_id":76753659,"question_id":76753118,"body_markdown":"Try to use Actions.\r\n\r\nThis code should solve your problem:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    public void inputGross(String gross){\r\n      Actions actions = new Actions(driver);\r\n      inputGross.click();\r\n      for (char ch: gross.toCharArray()) {\r\n                actions.sendKeys(Keys.BACK_SPACE).perform();\r\n            }\r\n      actions.sendKeys(inputGross, gross).perform();\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Java Selenium delete default input field value and add own values","body":"<p>Try to use Actions.</p>\n<p>This code should solve your problem:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>public void inputGross(String gross){\n  Actions actions = new Actions(driver);\n  inputGross.click();\n  for (char ch: gross.toCharArray()) {\n            actions.sendKeys(Keys.BACK_SPACE).perform();\n        }\n  actions.sendKeys(inputGross, gross).perform();\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":23996527,"reputation":21,"user_id":17981983,"display_name":"Killig"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76753659,"answer_count":1,"score":0,"last_activity_date":1690281101,"creation_date":1690191080,"question_id":76753118,"body_markdown":"I&#39;m currently having to venture into Selenium due to a project. \r\nI&#39;m supposed to load a page automatically, log in, click and then fill in a table.\r\n\r\nEverything works until I fill out the table.\r\nMy Code:\r\n```\r\npublic void inputGross(String gross){\r\ninputGross.sendKeys(Keys.DELETE, gros);\r\n```\r\n\r\nThe problem is that the input field already contains the amount `&quot;0.00 €&quot;`. \r\nWith the Clear command, the field empties, but since it first leaves the cell and then enters again, the default value `&quot;0.00 €&quot;` is created again.\r\n\r\nWhat I have already tried:\r\n```\r\ninputGross.clear()\r\ninputGross.sendKeys(gross)\r\n\r\ninputGriss.sendKeys(Keys.chord(Keyes.CONTROLL, &quot;a&quot;), Keys.DELETE, gross));\r\n\r\ninputGriss.sendKeys(Keys.chord(Keys.CONTROLL, &quot;a&quot;), Keys.DELETE, gross, Keys.RETURN));\r\n\r\ninputGriss.sendKeys(Keys.DELETE, Keys.DELETE, Keys.DELETE, Keys.DELETE, gross, Keys.RETURN));\r\n```\r\nI have no more ideas.\r\n\r\nI also tried using `Keys.ARROW_LEFT` to go to the left side and then delete everything. But that doesn&#39;t work either.\r\n\r\nI really need help\r\n\r\n\r\n","title":"Java Selenium delete default input field value and add own values","body":"<p>I'm currently having to venture into Selenium due to a project.\nI'm supposed to load a page automatically, log in, click and then fill in a table.</p>\n<p>Everything works until I fill out the table.\nMy Code:</p>\n<pre><code>public void inputGross(String gross){\ninputGross.sendKeys(Keys.DELETE, gros);\n</code></pre>\n<p>The problem is that the input field already contains the amount <code>&quot;0.00 €&quot;</code>.\nWith the Clear command, the field empties, but since it first leaves the cell and then enters again, the default value <code>&quot;0.00 €&quot;</code> is created again.</p>\n<p>What I have already tried:</p>\n<pre><code>inputGross.clear()\ninputGross.sendKeys(gross)\n\ninputGriss.sendKeys(Keys.chord(Keyes.CONTROLL, &quot;a&quot;), Keys.DELETE, gross));\n\ninputGriss.sendKeys(Keys.chord(Keys.CONTROLL, &quot;a&quot;), Keys.DELETE, gross, Keys.RETURN));\n\ninputGriss.sendKeys(Keys.DELETE, Keys.DELETE, Keys.DELETE, Keys.DELETE, gross, Keys.RETURN));\n</code></pre>\n<p>I have no more ideas.</p>\n<p>I also tried using <code>Keys.ARROW_LEFT</code> to go to the left side and then delete everything. But that doesn't work either.</p>\n<p>I really need help</p>\n"},{"tags":["java","android-permissions","android-external-storage","android-storage","android-13"],"owner":{"account_id":28802482,"reputation":1,"user_id":22059025,"display_name":"Jaldeep Joshi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":249,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690281026,"creation_date":1687337952,"question_id":76521586,"body_markdown":"I am trying to store image bitmap to External Storage.\r\n\r\nAs per documentation we need only read media image permission but in real device it shows permission required to write into storage.\r\n\r\nI can read gallery images but not able to write to external storage.","title":"Android 13 read media image permission not working","body":"<p>I am trying to store image bitmap to External Storage.</p>\n<p>As per documentation we need only read media image permission but in real device it shows permission required to write into storage.</p>\n<p>I can read gallery images but not able to write to external storage.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1690249546,"post_id":76758956,"comment_id":135323730,"body_markdown":"Possible [XY Problem](https://xyproblem.info/). `getIcon` should probably not be static, but it&#39;s hard to say without more context.","body":"Possible <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. <code>getIcon</code> should probably not be static, but it&#39;s hard to say without more context."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1690250416,"post_id":76758956,"comment_id":135323794,"body_markdown":"Can you change `getIcon` to return an `Optional&lt;ImageIcon&gt;` instead?","body":"Can you change <code>getIcon</code> to return an <code>Optional&lt;ImageIcon&gt;</code> instead?"}],"answers":[{"tags":[],"owner":{"account_id":20520987,"reputation":11,"user_id":15060579,"display_name":"lonewolf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690280801,"creation_date":1690280801,"answer_id":76761775,"question_id":76758956,"body_markdown":"Have the functional references in a list and try with that.\r\nfor example:\r\n\r\n    List&lt;BiFunction&lt;String, Boolean, ImageIcon&gt;&gt; functions = List.of(EvolutionGallery::getIcon, BerryGallery::getIcon, EventItemGallery::getIcon, BattleItemGallery::getIcon);\r\n    ImageIcon imageIcon = null;\r\n    for(BiFunction&lt;String, Boolean, ImageIcon&gt; function: functions) {\r\n        try{\r\n            imageIcon = function.apply(item, false);\r\n        } catch(RuntimeException ignored){}\r\n    }\r\n    if(Objects.isNull(imageIcon)) {\r\n        // handle condition\r\n    }\r\n\r\nI can&#39;t comment on the logic inside the functions without the knowledge of the system, but if there are multiple cases where an exception is thrown in case of resource not being present, i.e., absent `imageIcon` try replacing the return value with an `Optional&lt;ImageIcon&gt;` or simply return `null`.\r\nThis is generally a better practice compared to throwing an exception and would help you debug in case any issue arises in the future.\r\n\r\nif you want to throw an exception, throw it in the **if block** written in the above example so that the source of the exception can be pinpointed better.\r\n\r\n----------------------------------------------------------------\r\n[BiFunction documentation][1]\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/function/BiFunction.html","title":"Cycle through class files with identical functions","body":"<p>Have the functional references in a list and try with that.\nfor example:</p>\n<pre><code>List&lt;BiFunction&lt;String, Boolean, ImageIcon&gt;&gt; functions = List.of(EvolutionGallery::getIcon, BerryGallery::getIcon, EventItemGallery::getIcon, BattleItemGallery::getIcon);\nImageIcon imageIcon = null;\nfor(BiFunction&lt;String, Boolean, ImageIcon&gt; function: functions) {\n    try{\n        imageIcon = function.apply(item, false);\n    } catch(RuntimeException ignored){}\n}\nif(Objects.isNull(imageIcon)) {\n    // handle condition\n}\n</code></pre>\n<p>I can't comment on the logic inside the functions without the knowledge of the system, but if there are multiple cases where an exception is thrown in case of resource not being present, i.e., absent <code>imageIcon</code> try replacing the return value with an <code>Optional&lt;ImageIcon&gt;</code> or simply return <code>null</code>.\nThis is generally a better practice compared to throwing an exception and would help you debug in case any issue arises in the future.</p>\n<p>if you want to throw an exception, throw it in the <strong>if block</strong> written in the above example so that the source of the exception can be pinpointed better.</p>\n<hr />\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/BiFunction.html\" rel=\"nofollow noreferrer\">BiFunction documentation</a></p>\n"}],"owner":{"account_id":25188076,"reputation":23,"user_id":19028647,"display_name":"GamingLegion"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690280801,"creation_date":1690249468,"question_id":76758956,"body_markdown":"I was wondering for a way to cycle through multiple different class files with identical functions and paramaters. I have a way of doing it below, but I was hoping for a better way of going about it.\r\n\r\n```\r\nString item = &quot;item&quot;;\r\nImageIcon ii = null;\r\n\t\t\ttry {\r\n\t\t\t\tii = BattleItemGallery.getIcon(item, false);\r\n\t\t\t} catch (Exception e1) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tii = BerryGallery.getIcon(item, false);\r\n\t\t\t\t} catch (Exception e2) {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tii = EventItemGallery.getIcon(item, false);\r\n\t\t\t\t\t} catch (Exception e3) {\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tii = EvolutionGallery.getIcon(item, false);\r\n\t\t\t\t\t\t} catch (Exception e4) {\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n```\r\nBasically the code is to try and look for an ImageIcon in the class file and if it throws an error, aka can&#39;t find it, then it will try the next file, so on so forth. I was thinking of maybe finding a way to put the class files in an ArrayList somehow without having to initialize an object for each.\r\n\r\nIf anyone has any better ideas that would be awesome.\r\n","title":"Cycle through class files with identical functions","body":"<p>I was wondering for a way to cycle through multiple different class files with identical functions and paramaters. I have a way of doing it below, but I was hoping for a better way of going about it.</p>\n<pre><code>String item = &quot;item&quot;;\nImageIcon ii = null;\n            try {\n                ii = BattleItemGallery.getIcon(item, false);\n            } catch (Exception e1) {\n                try {\n                    ii = BerryGallery.getIcon(item, false);\n                } catch (Exception e2) {\n                    try {\n                        ii = EventItemGallery.getIcon(item, false);\n                    } catch (Exception e3) {\n                        try {\n                            ii = EvolutionGallery.getIcon(item, false);\n                        } catch (Exception e4) {\n\n                        }\n                    }\n                }\n            }\n</code></pre>\n<p>Basically the code is to try and look for an ImageIcon in the class file and if it throws an error, aka can't find it, then it will try the next file, so on so forth. I was thinking of maybe finding a way to put the class files in an ArrayList somehow without having to initialize an object for each.</p>\n<p>If anyone has any better ideas that would be awesome.</p>\n"},{"tags":["java","jackson","objectmapper","jackson-databind","jackson2"],"comments":[{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":1,"creation_date":1636459360,"post_id":69896898,"comment_id":123557387,"body_markdown":"Probably putting `JsonCreator` over the new constructor can help, please include json examples  you cannot deserialize.","body":"Probably putting <code>JsonCreator</code> over the new constructor can help, please include json examples  you cannot deserialize."},{"owner":{"account_id":10084495,"reputation":167,"user_id":7453611,"display_name":"darth_vader"},"score":0,"creation_date":1636521133,"post_id":69896898,"comment_id":123576471,"body_markdown":"@dariosicily I have added the json in which issue was faced. I have tried `JsonCreator` with `JsonProperty` and it did not help faced the same issue .","body":"@dariosicily I have added the json in which issue was faced. I have tried <code>JsonCreator</code> with <code>JsonProperty</code> and it did not help faced the same issue ."},{"owner":{"account_id":7339562,"reputation":558,"user_id":5589683,"display_name":"pratap"},"score":0,"creation_date":1636525882,"post_id":69896898,"comment_id":123577344,"body_markdown":"value of &#39;b&#39; is of type Long. In the example JSON, its &#39;ex1&#39;. can you try changing that?","body":"value of &#39;b&#39; is of type Long. In the example JSON, its &#39;ex1&#39;. can you try changing that?"},{"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"score":0,"creation_date":1636539809,"post_id":69896898,"comment_id":123582027,"body_markdown":"I tried both jsons and they work fine.","body":"I tried both jsons and they work fine."}],"answers":[{"tags":[],"owner":{"account_id":4086375,"reputation":41,"user_id":3356874,"display_name":"Joao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690277845,"creation_date":1690274328,"answer_id":76760897,"question_id":69896898,"body_markdown":"I&#39;m probably late to the party, but this may help someone.\r\n\r\nAs of version 2.15.2, the `@JsonProperty` can be used in the constructor params as well as in random vars in your class, however, if you do use `@JsonCreator` on a constructor, then you **must** annotate the constructor params with `@JsonProperty` to deserialize (*unless you also create your custom deserializer, but that&#39;s outside the scope of the question*).\r\n\r\nAlso you don&#39;t need to use `TypeReference` in your case.\r\nYou would want to use `TypeReference` if your class was defined with generics like `ABC&lt;T&gt;`. Then you&#39;d use `TypeReference&lt;ABC&lt;T&gt;&gt;`.\r\n\r\nOtherwise you can just: `objectMapper.readValue(json, ABC.class)` ","title":"Unable to deserialize using ObjectMapper when Object has multiple constructors","body":"<p>I'm probably late to the party, but this may help someone.</p>\n<p>As of version 2.15.2, the <code>@JsonProperty</code> can be used in the constructor params as well as in random vars in your class, however, if you do use <code>@JsonCreator</code> on a constructor, then you <strong>must</strong> annotate the constructor params with <code>@JsonProperty</code> to deserialize (<em>unless you also create your custom deserializer, but that's outside the scope of the question</em>).</p>\n<p>Also you don't need to use <code>TypeReference</code> in your case.\nYou would want to use <code>TypeReference</code> if your class was defined with generics like <code>ABC&lt;T&gt;</code>. Then you'd use <code>TypeReference&lt;ABC&lt;T&gt;&gt;</code>.</p>\n<p>Otherwise you can just: <code>objectMapper.readValue(json, ABC.class)</code></p>\n"},{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690280338,"creation_date":1690280338,"answer_id":76761704,"question_id":69896898,"body_markdown":"I just ran your test with Jackson 2.15.2 and it worked fine. As is. I was able to deserialize your String `{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;ex2&quot;}` into your ABC class. Just small changes that I did - I don&#39;t use lomboc so I added to your class getters and setters and all args constructor and no args constructor and `toString()` method. Here is the code I ran:\r\n\r\n        ABC abc = JsonUtils.readObjectFromJsonString(&quot;{\\&quot;id\\&quot;:\\&quot;123\\&quot;,\\&quot;a\\&quot;:\\&quot;example\\&quot;,\\&quot;b\\&quot;:1,\\&quot;c\\&quot;:\\&quot;ex2\\&quot;}&quot;, ABC.class);\r\n        System.out.println(abc);\r\n\r\n\r\nHere is the output:\r\n\r\n    ABC{id=&#39;123&#39;, number=&#39;null&#39;, a=&#39;example&#39;, b=1, c=&#39;ex2&#39;}\r\nJust to clarify - class JsonUtils is a thin wrapper over ObjectMapper class. This class comes with Open Source MgntUtils library written and maintained by me. You can try it if you want. Here is [JsonUtils javadoc][1], and the library could be obtained as [maven artifact from Maven central][2] or from [Github][3] (including source code and javadoc)\r\n\r\n\r\n  [1]: http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\r\n  [2]: https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\r\n  [3]: https://github.com/michaelgantman/Mgnt/releases","title":"Unable to deserialize using ObjectMapper when Object has multiple constructors","body":"<p>I just ran your test with Jackson 2.15.2 and it worked fine. As is. I was able to deserialize your String <code>{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;ex2&quot;}</code> into your ABC class. Just small changes that I did - I don't use lomboc so I added to your class getters and setters and all args constructor and no args constructor and <code>toString()</code> method. Here is the code I ran:</p>\n<pre><code>    ABC abc = JsonUtils.readObjectFromJsonString(&quot;{\\&quot;id\\&quot;:\\&quot;123\\&quot;,\\&quot;a\\&quot;:\\&quot;example\\&quot;,\\&quot;b\\&quot;:1,\\&quot;c\\&quot;:\\&quot;ex2\\&quot;}&quot;, ABC.class);\n    System.out.println(abc);\n</code></pre>\n<p>Here is the output:</p>\n<pre><code>ABC{id='123', number='null', a='example', b=1, c='ex2'}\n</code></pre>\n<p>Just to clarify - class JsonUtils is a thin wrapper over ObjectMapper class. This class comes with Open Source MgntUtils library written and maintained by me. You can try it if you want. Here is <a href=\"http://michaelgantman.github.io/Mgnt/docs/com/mgnt/utils/JsonUtils.html\" rel=\"nofollow noreferrer\">JsonUtils javadoc</a>, and the library could be obtained as <a href=\"https://search.maven.org/artifact/com.github.michaelgantman/MgntUtils\" rel=\"nofollow noreferrer\">maven artifact from Maven central</a> or from <a href=\"https://github.com/michaelgantman/Mgnt/releases\" rel=\"nofollow noreferrer\">Github</a> (including source code and javadoc)</p>\n"}],"owner":{"account_id":10084495,"reputation":167,"user_id":7453611,"display_name":"darth_vader"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":540,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690280338,"creation_date":1636455376,"question_id":69896898,"body_markdown":"I am getting the following error while deserialising the object .\r\n\r\n    (no Creators, like default construct, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n\r\nMy Object Definition is \r\n\r\n        @Getter\r\n        @Setter\r\n        @ToString\r\n        @Document(collection = &quot;abc&quot;)\r\n        @NoArgsConstructor\r\n        @AllArgsConstructor\r\n        public class ABC implements Serializable {\r\n        \r\n          @Id\r\n          private String id;\r\n          @Indexed\r\n          private String number;\r\n          private String a;\r\n          private Long b;\r\n          //added later \r\n          private String c;\r\n          public ABC(Long b) {\r\n            this.b=b;\r\n          }\r\n          public ABC(String a,Long b) {\r\n            this.b=b;\r\n            this.a=a;\r\n          }\r\n          //added later\r\n          public ABC(String a,Long b,String c) {\r\n            this.b=b;\r\n            this.a=a;\r\n            this.c=c;\r\n         }\r\n      }\r\n\r\nI was using `objectMapper.readValue(json, new TypeReference&lt;ABC&gt;() {})` to convert json to ABC object . It was working fine before adding variable c and the new constructor. I have to add a new consturctor to maintain compatibility with exisiting code. After adding variable c it is throwing the above error. I was able to deserialize `{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1}`. I was unable to deserialize `{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;ex2&quot;}` . Does objectMapper in Jackson use custom constructor or default constructor with setters for deserialisations .\r\n","title":"Unable to deserialize using ObjectMapper when Object has multiple constructors","body":"<p>I am getting the following error while deserialising the object .</p>\n<pre><code>(no Creators, like default construct, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n</code></pre>\n<p>My Object Definition is</p>\n<pre><code>    @Getter\n    @Setter\n    @ToString\n    @Document(collection = &quot;abc&quot;)\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public class ABC implements Serializable {\n    \n      @Id\n      private String id;\n      @Indexed\n      private String number;\n      private String a;\n      private Long b;\n      //added later \n      private String c;\n      public ABC(Long b) {\n        this.b=b;\n      }\n      public ABC(String a,Long b) {\n        this.b=b;\n        this.a=a;\n      }\n      //added later\n      public ABC(String a,Long b,String c) {\n        this.b=b;\n        this.a=a;\n        this.c=c;\n     }\n  }\n</code></pre>\n<p>I was using <code>objectMapper.readValue(json, new TypeReference&lt;ABC&gt;() {})</code> to convert json to ABC object . It was working fine before adding variable c and the new constructor. I have to add a new consturctor to maintain compatibility with exisiting code. After adding variable c it is throwing the above error. I was able to deserialize <code>{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1}</code>. I was unable to deserialize <code>{&quot;id&quot;:&quot;123&quot;,&quot;a&quot;:&quot;example&quot;,&quot;b&quot;:1,&quot;c&quot;:&quot;ex2&quot;}</code> . Does objectMapper in Jackson use custom constructor or default constructor with setters for deserialisations .</p>\n"},{"tags":["java","junit","mockito","completable-future","mockstatic"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":3,"creation_date":1689169748,"post_id":76669455,"comment_id":135175566,"body_markdown":"It sounds like you should redesign the code you&#39;re testing to make it easier to test.","body":"It sounds like you should redesign the code you&#39;re testing to make it easier to test."}],"answers":[{"tags":[],"owner":{"account_id":3465142,"reputation":31,"user_id":2900930,"display_name":"Santiago Ordax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690280208,"creation_date":1690280208,"answer_id":76761695,"question_id":76669455,"body_markdown":"Assuming the class you want to test looks like this\r\n\r\n```\r\nclass ABCSupplier {\r\n\r\n\tvoid supply() {\r\n\r\n\t\tCompletableFuture.supplyAsync(XYZ::getFieldABC);\r\n\t}\r\n}\r\n```\r\n\r\nYou can mock statics with Mockito like this:\r\n\r\n```\r\n@ExtendWith(MockitoExtension.class)\r\nclass ABCSupplierTest {\r\n\r\n\t@InjectMocks\r\n\tABCSupplier abcSupplier;\r\n\r\n\t@Captor\r\n\tprivate ArgumentCaptor&lt;Supplier&lt;ABC&gt;&gt; supplierArgumentCaptor;\r\n\r\n\t@Test\r\n\tvoid it_should_supply_ABC_field() {\r\n\r\n\t\tfinal ABC abc = new ABC();\r\n\r\n\t\ttry (var completableFutureMockedStatic = Mockito.mockStatic(CompletableFuture.class);\r\n\t\t\tvar xyzMockedStatic = Mockito.mockStatic(XYZ.class)) {\r\n\r\n\t\t\txyzMockedStatic.when(XYZ::getFieldABC)\r\n\t\t\t\t.thenReturn(abc);\r\n\r\n\t\t\tthis.abcSupplier.supply();\r\n\r\n\t\t\tcompletableFutureMockedStatic.verify(() -&gt; CompletableFuture.supplyAsync(this.supplierArgumentCaptor.capture()));\r\n\r\n\t\t\tAssertions.assertThat(this.supplierArgumentCaptor.getValue().get())\r\n\t\t\t\t.isEqualTo(abc);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","title":"Mocking static objects under completable future supply async","body":"<p>Assuming the class you want to test looks like this</p>\n<pre><code>class ABCSupplier {\n\n    void supply() {\n\n        CompletableFuture.supplyAsync(XYZ::getFieldABC);\n    }\n}\n</code></pre>\n<p>You can mock statics with Mockito like this:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass ABCSupplierTest {\n\n    @InjectMocks\n    ABCSupplier abcSupplier;\n\n    @Captor\n    private ArgumentCaptor&lt;Supplier&lt;ABC&gt;&gt; supplierArgumentCaptor;\n\n    @Test\n    void it_should_supply_ABC_field() {\n\n        final ABC abc = new ABC();\n\n        try (var completableFutureMockedStatic = Mockito.mockStatic(CompletableFuture.class);\n            var xyzMockedStatic = Mockito.mockStatic(XYZ.class)) {\n\n            xyzMockedStatic.when(XYZ::getFieldABC)\n                .thenReturn(abc);\n\n            this.abcSupplier.supply();\n\n            completableFutureMockedStatic.verify(() -&gt; CompletableFuture.supplyAsync(this.supplierArgumentCaptor.capture()));\n\n            Assertions.assertThat(this.supplierArgumentCaptor.getValue().get())\n                .isEqualTo(abc);\n        }\n    }\n}\n\n</code></pre>\n"}],"owner":{"account_id":29001394,"reputation":21,"user_id":22214880,"display_name":"Jay Patel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690280208,"creation_date":1689156657,"question_id":76669455,"body_markdown":"Consider below code snippet:\r\n\r\n```\r\nclass XYZ {\r\n  public static getFieldABC(){\r\n    return new ABC();\r\n  }\r\n}\r\n\r\n...\r\nCompletableFuture.supplyAsync(() -&gt; XYZ.getFieldABC())\r\n...\r\n\r\n```\r\nI need to unit test this piece of code.\r\n\r\nI have a static method `getFieldABC` which returns an object of a particular class `ABC`. I want to mock this static method call using Mockito.mockStatic and then return mockObject using `when()`.\r\n\r\n\r\n\r\nThe catch here is that this method call is under CompletableFuture.supplyAsync. \r\nSince, its running in a different thread, the call to the static method, instead of calling the mock, its  invoking the actual method call.","title":"Mocking static objects under completable future supply async","body":"<p>Consider below code snippet:</p>\n<pre><code>class XYZ {\n  public static getFieldABC(){\n    return new ABC();\n  }\n}\n\n...\nCompletableFuture.supplyAsync(() -&gt; XYZ.getFieldABC())\n...\n\n</code></pre>\n<p>I need to unit test this piece of code.</p>\n<p>I have a static method <code>getFieldABC</code> which returns an object of a particular class <code>ABC</code>. I want to mock this static method call using Mockito.mockStatic and then return mockObject using <code>when()</code>.</p>\n<p>The catch here is that this method call is under CompletableFuture.supplyAsync.\nSince, its running in a different thread, the call to the static method, instead of calling the mock, its  invoking the actual method call.</p>\n"},{"tags":["java","java-stream","rx-java","reactive-programming"],"answers":[{"tags":[],"owner":{"account_id":26312379,"reputation":16,"user_id":19975712,"display_name":"C7K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690280165,"creation_date":1664896216,"answer_id":73949996,"question_id":73920331,"body_markdown":"It seems that you expect httpStatus.set(HttpStatus.NO_CONTENT) to be run, and after running, the status can be read with the correct statuscode. I&#39;m not very familiar with reactive, but by looking at Completable.java I don&#39;t think the Action that you provide in Completable::fromAction is run right away.  \r\n\r\nThere is probably a more reactive-like way to solve the problem, but I can&#39;t help you there. Instead, here&#39;s a solution that might work (or at least get you going in the right direction). Just set the value of the status explicitly yourself before returning your Flowable:\r\n    \r\n    public Flowable&lt;Person&gt; personList(AtomicReference&lt;HttpStatus&gt; reference) {\r\n        List&lt;Person&gt; repositoryList = List.of();\r\n\r\n        return repositoryList\r\n                .stream()\r\n                .collect(Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\r\n                    if (list.isEmpty()) {\r\n                        reference.set(HttpStatus.NO_CONTENT);\r\n                        return Flowable.empty();\r\n                    }\r\n                    return Flowable.fromIterable(list);\r\n                }));\r\n    }\r\n\r\n    public Maybe&lt;ResponseEntity&lt;Flowable&lt;Person&gt;&gt;&gt; controllerMethod() {\r\n        var httpStatus = new AtomicReference&lt;&gt;(HttpStatus.OK);\r\n\r\n        return Maybe.just(personList(httpStatus))\r\n                .map(person -&gt; ResponseEntity.status(httpStatus.get()))\r\n                .body(person));\r\n    }","title":"Always return HttpStatus 200 (OK)","body":"<p>It seems that you expect httpStatus.set(HttpStatus.NO_CONTENT) to be run, and after running, the status can be read with the correct statuscode. I'm not very familiar with reactive, but by looking at Completable.java I don't think the Action that you provide in Completable::fromAction is run right away.</p>\n<p>There is probably a more reactive-like way to solve the problem, but I can't help you there. Instead, here's a solution that might work (or at least get you going in the right direction). Just set the value of the status explicitly yourself before returning your Flowable:</p>\n<pre><code>public Flowable&lt;Person&gt; personList(AtomicReference&lt;HttpStatus&gt; reference) {\n    List&lt;Person&gt; repositoryList = List.of();\n\n    return repositoryList\n            .stream()\n            .collect(Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\n                if (list.isEmpty()) {\n                    reference.set(HttpStatus.NO_CONTENT);\n                    return Flowable.empty();\n                }\n                return Flowable.fromIterable(list);\n            }));\n}\n\npublic Maybe&lt;ResponseEntity&lt;Flowable&lt;Person&gt;&gt;&gt; controllerMethod() {\n    var httpStatus = new AtomicReference&lt;&gt;(HttpStatus.OK);\n\n    return Maybe.just(personList(httpStatus))\n            .map(person -&gt; ResponseEntity.status(httpStatus.get()))\n            .body(person));\n}\n</code></pre>\n"}],"owner":{"account_id":25328595,"reputation":17,"user_id":19148797,"display_name":"mclc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690280165,"creation_date":1664644701,"question_id":73920331,"body_markdown":"We obtain a list of data from a SQL Server database. I want to return the list when there is data, but when there is not, I want to return a &quot;No Content&quot; status. My code:\r\n\r\n\r\n    public class Main {\r\n      public static void main(String[] args) {\r\n        var main = new Main();\r\n        var result = main.controllerMethod();\r\n        System.out.println(&quot;Result: &quot; + result.blockingGet());\r\n      }\r\n  \r\n      public Flowable&lt;Person&gt; personList(){\r\n        List&lt;Person&gt; repositoryList = List.of();\r\n  \r\n        return repositoryList\r\n            .stream()\r\n            .collect(Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\r\n              if(list.isEmpty()) return Flowable.empty();\r\n              else return Flowable.fromIterable(list);\r\n            }));\r\n      }\r\n  \r\n      public Maybe&lt;ResponseEntity&lt;Flowable&lt;Person&gt;&gt;&gt; controllerMethod(){\r\n        var httpStatus =\r\n            new AtomicReference&lt;&gt;(HttpStatus.OK);\r\n  \r\n        return Maybe.just(personList()\r\n            .switchIfEmpty(subs -&gt; Completable.fromAction(() -&gt;\r\n                    httpStatus.set(HttpStatus.NO_CONTENT)).toFlowable()))\r\n            .map(person -&gt; ResponseEntity.status(httpStatus.get())\r\n                .body(person));\r\n      }\r\n    }\r\n\r\nresult:\r\n\r\n&gt; Result: &lt;200 OK OK,io.reactivex.rxjava3.internal.operators.flowable.FlowableSwitchIfEmpty@35f983a6,[]&gt;","title":"Always return HttpStatus 200 (OK)","body":"<p>We obtain a list of data from a SQL Server database. I want to return the list when there is data, but when there is not, I want to return a &quot;No Content&quot; status. My code:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    var main = new Main();\n    var result = main.controllerMethod();\n    System.out.println(&quot;Result: &quot; + result.blockingGet());\n  }\n\n  public Flowable&lt;Person&gt; personList(){\n    List&lt;Person&gt; repositoryList = List.of();\n\n    return repositoryList\n        .stream()\n        .collect(Collectors.collectingAndThen(Collectors.toList(), list -&gt; {\n          if(list.isEmpty()) return Flowable.empty();\n          else return Flowable.fromIterable(list);\n        }));\n  }\n\n  public Maybe&lt;ResponseEntity&lt;Flowable&lt;Person&gt;&gt;&gt; controllerMethod(){\n    var httpStatus =\n        new AtomicReference&lt;&gt;(HttpStatus.OK);\n\n    return Maybe.just(personList()\n        .switchIfEmpty(subs -&gt; Completable.fromAction(() -&gt;\n                httpStatus.set(HttpStatus.NO_CONTENT)).toFlowable()))\n        .map(person -&gt; ResponseEntity.status(httpStatus.get())\n            .body(person));\n  }\n}\n</code></pre>\n<p>result:</p>\n<blockquote>\n<p>Result: &lt;200 OK OK,io.reactivex.rxjava3.internal.operators.flowable.FlowableSwitchIfEmpty@35f983a6,[]&gt;</p>\n</blockquote>\n"},{"tags":["java","servlets","tomcat9","tomcat10","jakarta-migration"],"comments":[{"owner":{"account_id":1307115,"reputation":22745,"user_id":1255873,"accept_rate":86,"display_name":"Abion47"},"score":1,"creation_date":1621364096,"post_id":67592237,"comment_id":119472631,"body_markdown":"This might be answerable here, but I _think_ it would be more suited to [SuperUser](https://superuser.com/).","body":"This might be answerable here, but I <i>think</i> it would be more suited to <a href=\"https://superuser.com/\">SuperUser</a>."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1621368052,"post_id":67592237,"comment_id":119474203,"body_markdown":"Do you provide a library or an application? You can provide both `javax.*` and `jakarta.*` classes and use a `ServletContainerInitializer` to start up your application (actually two :-) ). How many of your classes use `javax.servlet.*` classes?","body":"Do you provide a library or an application? You can provide both <code>javax.*</code> and <code>jakarta.*</code> classes and use a <code>ServletContainerInitializer</code> to start up your application (actually two :-) ). How many of your classes use <code>javax.servlet.*</code> classes?"},{"owner":{"account_id":1168188,"reputation":307,"user_id":1145995,"accept_rate":14,"display_name":"Brian"},"score":0,"creation_date":1621368242,"post_id":67592237,"comment_id":119474264,"body_markdown":"Piotr it is a library.  That is my plan if no one can give me a better answer.\n\nI got 6 classes.","body":"Piotr it is a library.  That is my plan if no one can give me a better answer.  I got 6 classes."}],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1621369937,"creation_date":1621369937,"answer_id":67593553,"question_id":67592237,"body_markdown":"The behavior you describe can be achieved with a [`ClassFileTransformer`](https://docs.oracle.com/en/java/javase/11/docs/api/java.instrument/java/lang/instrument/Instrumentation.html) like the one provided by the [Tomcat Migration Tool](https://tomcat.apache.org/download-migration.cgi). Every copy of Tomcat 10 is bundled with the shaded version of the migration tool, so you don&#39;t need to distribute it independently.\r\n\r\nYou can create a `jakarta.servlet.ServletContainerInitializer` which will inject the `ClassFileTransformer` upon the web application startup:\r\n\r\n```lang-java\r\nimport java.util.Set;\r\nimport jakarta.servlet.ServletContext;\r\nimport jakarta.servlet.ServletException;\r\nimport org.apache.tomcat.InstrumentableClassLoader;\r\nimport org.apache.tomcat.jakartaee.ClassConverter;\r\n\r\npublic class JavaEEContainerInitializer implements javax.servlet.ServletContainerInitializer {\r\n\r\n    @Override\r\n    public void onStartup(Set&lt;Class&lt; ? &gt;&gt; c, ServletContext ctx) throws ServletException {\r\n        final ClassLoader cl = Thread.currentThread().getContextClassLoader();\r\n        if (cl instanceof InstrumentableClassLoader) {\r\n            final InstrumentableClassLoader instrumentableCl = (InstrumentableClassLoader) cl;\r\n            instrumentableCl.addTransformer(new ClassConverter());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nHowever in the case of a library I would rather distribute two versions of it, so the library does not have to mess with the class loader of the application. E.g. [`openwebbeans`](https://mvnrepository.com/artifact/org.apache.openwebbeans/openwebbeans-web/2.0.22) provides two versions of the same artifact: a Java EE version and a Jakarta EE version with the `jakarta` classifier.\r\n\r\nThe aforementioned Tomcat Migration Tool can automatically generate the Jakarta EE version of the jar.","title":"Create a jar file that supports javax.* and jakarta.*","body":"<p>The behavior you describe can be achieved with a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.instrument/java/lang/instrument/Instrumentation.html\" rel=\"nofollow noreferrer\"><code>ClassFileTransformer</code></a> like the one provided by the <a href=\"https://tomcat.apache.org/download-migration.cgi\" rel=\"nofollow noreferrer\">Tomcat Migration Tool</a>. Every copy of Tomcat 10 is bundled with the shaded version of the migration tool, so you don't need to distribute it independently.</p>\n<p>You can create a <code>jakarta.servlet.ServletContainerInitializer</code> which will inject the <code>ClassFileTransformer</code> upon the web application startup:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Set;\nimport jakarta.servlet.ServletContext;\nimport jakarta.servlet.ServletException;\nimport org.apache.tomcat.InstrumentableClassLoader;\nimport org.apache.tomcat.jakartaee.ClassConverter;\n\npublic class JavaEEContainerInitializer implements javax.servlet.ServletContainerInitializer {\n\n    @Override\n    public void onStartup(Set&lt;Class&lt; ? &gt;&gt; c, ServletContext ctx) throws ServletException {\n        final ClassLoader cl = Thread.currentThread().getContextClassLoader();\n        if (cl instanceof InstrumentableClassLoader) {\n            final InstrumentableClassLoader instrumentableCl = (InstrumentableClassLoader) cl;\n            instrumentableCl.addTransformer(new ClassConverter());\n        }\n    }\n}\n</code></pre>\n<p>However in the case of a library I would rather distribute two versions of it, so the library does not have to mess with the class loader of the application. E.g. <a href=\"https://mvnrepository.com/artifact/org.apache.openwebbeans/openwebbeans-web/2.0.22\" rel=\"nofollow noreferrer\"><code>openwebbeans</code></a> provides two versions of the same artifact: a Java EE version and a Jakarta EE version with the <code>jakarta</code> classifier.</p>\n<p>The aforementioned Tomcat Migration Tool can automatically generate the Jakarta EE version of the jar.</p>\n"}],"owner":{"account_id":1168188,"reputation":307,"user_id":1145995,"accept_rate":14,"display_name":"Brian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":914,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":67593553,"answer_count":1,"score":3,"last_activity_date":1690279597,"creation_date":1621363502,"question_id":67592237,"body_markdown":"As you probably know, javax had to change it&#39;s name to jakarta due to a trademark issue.  Right now my company has gives our customers two .jar files, one for those using Tomcat 9 or earlier (javax) and one for Tomcat 10 (jakarta).  \r\n\r\nIs it possible to create one jar file that can see which Tomcat is used and for every import choose either javax or jakarta?  This project does not use Spring.\r\n\r\nI already found how to tell which Tomcat version is used. \r\n\r\nI see JAVA does not have preprocessor directives like C++. Is there something similar that will allow me to swap the imports?\r\n\r\nI also see that I don&#39;t have to use imports and just call the class using the whole path.  This seems like a lot of work, but a possible solution.  I just want to know if there is a quicker easier solution.","title":"Create a jar file that supports javax.* and jakarta.*","body":"<p>As you probably know, javax had to change it's name to jakarta due to a trademark issue.  Right now my company has gives our customers two .jar files, one for those using Tomcat 9 or earlier (javax) and one for Tomcat 10 (jakarta).</p>\n<p>Is it possible to create one jar file that can see which Tomcat is used and for every import choose either javax or jakarta?  This project does not use Spring.</p>\n<p>I already found how to tell which Tomcat version is used.</p>\n<p>I see JAVA does not have preprocessor directives like C++. Is there something similar that will allow me to swap the imports?</p>\n<p>I also see that I don't have to use imports and just call the class using the whole path.  This seems like a lot of work, but a possible solution.  I just want to know if there is a quicker easier solution.</p>\n"},{"tags":["java","intellij-idea","nullable"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1690277204,"post_id":76761165,"comment_id":135327419,"body_markdown":"I don&#39;t think you can do much about this. How about making a new `propertyA` in the subclass? If you can&#39;t, please show some code illustrating why.","body":"I don&#39;t think you can do much about this. How about making a new <code>propertyA</code> in the subclass? If you can&#39;t, please show some code illustrating why."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1690278117,"post_id":76761165,"comment_id":135327632,"body_markdown":"You can suppress the inspection for the whole class by annotating the class with `@SuppressWarnings({&quot;DataFlowIssue&quot;})`. Is that a &quot;good&quot; way in your opinion?","body":"You can suppress the inspection for the whole class by annotating the class with <code>@SuppressWarnings({&quot;DataFlowIssue&quot;})</code>. Is that a &quot;good&quot; way in your opinion?"},{"owner":{"account_id":5860066,"reputation":13485,"user_id":4616087,"display_name":"Marvin"},"score":0,"creation_date":1690278244,"post_id":76761165,"comment_id":135327652,"body_markdown":"IntelliJ also accepts a `//noinspection DataFlowIssue` line just above your check. But IMHO an assertion feels easier to understand.","body":"IntelliJ also accepts a <code>&#47;&#47;noinspection DataFlowIssue</code> line just above your check. But IMHO an assertion feels easier to understand."}],"answers":[{"tags":[],"owner":{"account_id":15013161,"reputation":71,"user_id":10836980,"display_name":"Azn9"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690279359,"creation_date":1690279359,"answer_id":76761580,"question_id":76761165,"body_markdown":"The value you&#39;re getting by calling &quot;propertyA&quot; in your doSomething method is the property in the class A, which is annotated with @Nullable.\r\n\r\nIf you really want to avoid this, you can use a getter, and override it in the B class with a @NotNull annotaiton, but you would just duplicate your code.\r\n\r\nAnd be aware that the @NotNull annotation doesn&#39;t prevent a value from being nullable, it is only used for code warnings in IJ! You should add a check in your B constructor to validate that the value is really not null.","title":"How to supress nullpointer warning in IntelliJ","body":"<p>The value you're getting by calling &quot;propertyA&quot; in your doSomething method is the property in the class A, which is annotated with @Nullable.</p>\n<p>If you really want to avoid this, you can use a getter, and override it in the B class with a @NotNull annotaiton, but you would just duplicate your code.</p>\n<p>And be aware that the @NotNull annotation doesn't prevent a value from being nullable, it is only used for code warnings in IJ! You should add a check in your B constructor to validate that the value is really not null.</p>\n"}],"owner":{"account_id":450787,"reputation":1364,"user_id":846300,"accept_rate":50,"display_name":"Lukas Hanacek"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690279359,"creation_date":1690276213,"question_id":76761165,"body_markdown":"I have a parent class with final variable that can be null. It is annotated with Nullable.\r\nThe parent class is extended by multiple classes, some of them have this variable as Nullable but some of them as NonNull. Now when I am using the variable in the subclass I see the warning about NullPointerException. It seems redundant to enclose the variable with if/null when I know it cannot be null (in the subclass constructor it is annotated as NonNull). How to make it clear for anyone reading the code that it cannot be null and make it clear to IDE as well ? My take is to preceed the usage with assert property != null. But I wonder if that is a good way.\r\n\r\n    class A {\r\n\r\n      @Nullable\r\n      final String propertyA;\r\n\r\n      public A (@Nullable String propertyA) {\r\n          this.propertyA = propertyA;\r\n      }\r\n    }\r\n    \r\n      class B extends A {\r\n\r\n      public B (@NotNull String propertyA) {\r\n          super(propertyA);\r\n      }\r\n\r\n      public void doSomething() {\r\n          //Here is the warning from IntelliJ but I know it is not null.\r\n          propertyA.equals(null);\r\n      }\r\n    }","title":"How to supress nullpointer warning in IntelliJ","body":"<p>I have a parent class with final variable that can be null. It is annotated with Nullable.\nThe parent class is extended by multiple classes, some of them have this variable as Nullable but some of them as NonNull. Now when I am using the variable in the subclass I see the warning about NullPointerException. It seems redundant to enclose the variable with if/null when I know it cannot be null (in the subclass constructor it is annotated as NonNull). How to make it clear for anyone reading the code that it cannot be null and make it clear to IDE as well ? My take is to preceed the usage with assert property != null. But I wonder if that is a good way.</p>\n<pre><code>class A {\n\n  @Nullable\n  final String propertyA;\n\n  public A (@Nullable String propertyA) {\n      this.propertyA = propertyA;\n  }\n}\n\n  class B extends A {\n\n  public B (@NotNull String propertyA) {\n      super(propertyA);\n  }\n\n  public void doSomething() {\n      //Here is the warning from IntelliJ but I know it is not null.\n      propertyA.equals(null);\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":21815810,"reputation":55,"user_id":16112643,"display_name":"Fanny"},"score":0,"creation_date":1690268679,"post_id":76759515,"comment_id":135325618,"body_markdown":"&quot;JPA requires attribute converters to be stateless&quot; &lt;- According to this reason, should I declare all the attribute converters class as static even not an inner class?","body":"&quot;JPA requires attribute converters to be stateless&quot; &lt;- According to this reason, should I declare all the attribute converters class as static even not an inner class?"},{"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"score":0,"creation_date":1690279161,"post_id":76759515,"comment_id":135327852,"body_markdown":"I modified the code with auto=true for annotation. And Yes, according to the requirement that attribute converters in JPA should be stateless, it is recommended to declare them as static classes, even if they are not inner classes.","body":"I modified the code with auto=true for annotation. And Yes, according to the requirement that attribute converters in JPA should be stateless, it is recommended to declare them as static classes, even if they are not inner classes."}],"tags":[],"owner":{"account_id":8653469,"reputation":72,"user_id":6478449,"display_name":"Ranjan"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690279035,"creation_date":1690260268,"answer_id":76759515,"question_id":76759464,"body_markdown":"Yes, you can move the StatusConverter into the data class User as an inner class. However, when using inner classes as converters, you need to ensure that the inner class is declared as static. This is because JPA requires attribute converters to be stateless, and declaring the inner class as static ensures that it doesn&#39;t have a reference to the outer class instance.\r\n\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Column(name = &quot;ID&quot;, nullable = false)\r\n  private Long id;\r\n\r\n  @Enumerated(EnumType.STRING)\r\n  @Column(name = &quot;status&quot;, nullable = false)\r\n  private Status status;\r\n\r\n  @Getter\r\n  public enum Status {\r\n    Active(&quot;A&quot;),\r\n    Inactive(&quot;I&quot;),\r\n    ;\r\n\r\n    private String shortCode;\r\n\r\n    Status(String s){\r\n      this.shortCode= s;\r\n    }\r\n\r\n    public static Status of(String s) {\r\n       for (Status _enum: Status.values()) {\r\n         if (_enum.getType().equals(s.trim())) {\r\n           return _enum;\r\n         }\r\n       }\r\n       return null;\r\n    }\r\n  }\r\n\r\n  @Converter(autoApply = true)\r\n  public class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\r\n\r\n      @Override\r\n      public String convertToDatabaseColumn(User.Status status) {\r\n          return status.getType();\r\n      }\r\n\r\n      @Override\r\n      public User.Status convertToEntityAttribute(String s) {\r\n          return User.Status.of(s);\r\n      }\r\n  }\r\n}\r\n\r\n```\r\n","title":"Can I put AttributeConverter into data entity?","body":"<p>Yes, you can move the StatusConverter into the data class User as an inner class. However, when using inner classes as converters, you need to ensure that the inner class is declared as static. This is because JPA requires attribute converters to be stateless, and declaring the inner class as static ensures that it doesn't have a reference to the outer class instance.</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;ID&quot;, nullable = false)\n  private Long id;\n\n  @Enumerated(EnumType.STRING)\n  @Column(name = &quot;status&quot;, nullable = false)\n  private Status status;\n\n  @Getter\n  public enum Status {\n    Active(&quot;A&quot;),\n    Inactive(&quot;I&quot;),\n    ;\n\n    private String shortCode;\n\n    Status(String s){\n      this.shortCode= s;\n    }\n\n    public static Status of(String s) {\n       for (Status _enum: Status.values()) {\n         if (_enum.getType().equals(s.trim())) {\n           return _enum;\n         }\n       }\n       return null;\n    }\n  }\n\n  @Converter(autoApply = true)\n  public class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\n\n      @Override\n      public String convertToDatabaseColumn(User.Status status) {\n          return status.getType();\n      }\n\n      @Override\n      public User.Status convertToEntityAttribute(String s) {\n          return User.Status.of(s);\n      }\n  }\n}\n\n</code></pre>\n"}],"owner":{"account_id":21815810,"reputation":55,"user_id":16112643,"display_name":"Fanny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76759515,"answer_count":1,"score":0,"last_activity_date":1690279035,"creation_date":1690259524,"question_id":76759464,"body_markdown":"I am using AttributeConverter for converting enum short code in DB. Everything work fine. And the sample is here:\r\n\r\nData class(User):\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Column(name = &quot;ID&quot;, nullable = false)\r\n  private Long id;\r\n\r\n  @Enumerated(EnumType.STRING)\r\n  @Column(name = &quot;status&quot;, nullable = false)\r\n  @Convert(converter = StatusConverter.class)\r\n  private Status status;\r\n\r\n  @Getter\r\n  public enum Status {\r\n    Active(&quot;A&quot;),\r\n    Inactive(&quot;I&quot;),\r\n    ;\r\n\r\n    private String shortCode;\r\n\r\n    Status(String s){\r\n      this.shortCode= s;\r\n    }\r\n\r\n    public static Status of(String s) {\r\n       for (Status _enum: Status.values()) {\r\n         if (_enum.getType().equals(s.trim())) {\r\n           return _enum;\r\n         }\r\n       }\r\n       return null;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nUser&#39;s StatusConverter class(User):\r\n```\r\n@Converter\r\npublic class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(User.Status status) {\r\n        return status.getType();\r\n    }\r\n\r\n    @Override\r\n    public User.Status convertToEntityAttribute(String s) {\r\n        return User.Status.of(s);\r\n    }\r\n}\r\n```\r\n\r\nEverything is working fine.\r\n\r\nBut if I have another data class with its own status like this:\r\n```\r\n// Example Only\r\n@Data\r\n@Entity\r\n@Table(name = &quot;case&quot;)\r\npublic class Case {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Column(name = &quot;ID&quot;, nullable = false)\r\n  private Long id;\r\n\r\n  @Enumerated(EnumType.STRING)\r\n  @Column(name = &quot;status&quot;, nullable = false)\r\n  @Convert(converter = StatusConverter.class) // There should be fail to convert\r\n  private Case.Status status;\r\n\r\n  @Getter\r\n  public enum Status {\r\n    Waiting(&quot;W&quot;),\r\n    Processing(&quot;P&quot;),\r\n    Closed(&quot;C&quot;),\r\n    Cancelled(&quot;X&quot;),\r\n    ;\r\n\r\n    private String shortCode;\r\n\r\n    Status(String s){\r\n      this.shortCode= s;\r\n    }\r\n\r\n    public static Status of(String s) {\r\n       for (Status _enum: Status.values()) {\r\n         if (_enum.getType().equals(s.trim())) {\r\n           return _enum;\r\n         }\r\n       }\r\n       return null;\r\n    }\r\n  }\r\n}\r\n```\r\nAlthough the easiest solution is that create an AttributeConverter named &quot;CaseStatusConverter&quot; for Case Status, the User StatusConverter is used for User Status. So I think it should be moved into the User data class as an inner class like this:\r\n```\r\n@Data\r\n@Entity\r\n@Table(name = &quot;user&quot;)\r\npublic class User {\r\n\r\n  @Id\r\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\r\n  @Column(name = &quot;ID&quot;, nullable = false)\r\n  private Long id;\r\n\r\n  @Enumerated(EnumType.STRING)\r\n  @Column(name = &quot;status&quot;, nullable = false)\r\n  @Convert(converter = StatusConverter.class)\r\n  private Status status;\r\n\r\n  @Getter\r\n  public enum Status {\r\n    Active(&quot;A&quot;),\r\n    Inactive(&quot;I&quot;),\r\n    ;\r\n\r\n    private String shortCode;\r\n\r\n    Status(String s){\r\n      this.shortCode= s;\r\n    }\r\n\r\n    public static Status of(String s) {\r\n       for (Status _enum: Status.values()) {\r\n         if (_enum.getType().equals(s.trim())) {\r\n           return _enum;\r\n         }\r\n       }\r\n       return null;\r\n    }\r\n  }\r\n\r\n  @Converter\r\n  public class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\r\n\r\n      @Override\r\n      public String convertToDatabaseColumn(User.Status status) {\r\n          return status.getType();\r\n      }\r\n\r\n      @Override\r\n      public User.Status convertToEntityAttribute(String s) {\r\n          return User.Status.of(s);\r\n      }\r\n  }\r\n  \r\n}\r\n```\r\n\r\nAfter moving, the User StatusConverter is no longer working. Can I move the StatusConverter into the data class as a inner class?","title":"Can I put AttributeConverter into data entity?","body":"<p>I am using AttributeConverter for converting enum short code in DB. Everything work fine. And the sample is here:</p>\n<p>Data class(User):</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;ID&quot;, nullable = false)\n  private Long id;\n\n  @Enumerated(EnumType.STRING)\n  @Column(name = &quot;status&quot;, nullable = false)\n  @Convert(converter = StatusConverter.class)\n  private Status status;\n\n  @Getter\n  public enum Status {\n    Active(&quot;A&quot;),\n    Inactive(&quot;I&quot;),\n    ;\n\n    private String shortCode;\n\n    Status(String s){\n      this.shortCode= s;\n    }\n\n    public static Status of(String s) {\n       for (Status _enum: Status.values()) {\n         if (_enum.getType().equals(s.trim())) {\n           return _enum;\n         }\n       }\n       return null;\n    }\n  }\n}\n</code></pre>\n<p>User's StatusConverter class(User):</p>\n<pre><code>@Converter\npublic class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(User.Status status) {\n        return status.getType();\n    }\n\n    @Override\n    public User.Status convertToEntityAttribute(String s) {\n        return User.Status.of(s);\n    }\n}\n</code></pre>\n<p>Everything is working fine.</p>\n<p>But if I have another data class with its own status like this:</p>\n<pre><code>// Example Only\n@Data\n@Entity\n@Table(name = &quot;case&quot;)\npublic class Case {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;ID&quot;, nullable = false)\n  private Long id;\n\n  @Enumerated(EnumType.STRING)\n  @Column(name = &quot;status&quot;, nullable = false)\n  @Convert(converter = StatusConverter.class) // There should be fail to convert\n  private Case.Status status;\n\n  @Getter\n  public enum Status {\n    Waiting(&quot;W&quot;),\n    Processing(&quot;P&quot;),\n    Closed(&quot;C&quot;),\n    Cancelled(&quot;X&quot;),\n    ;\n\n    private String shortCode;\n\n    Status(String s){\n      this.shortCode= s;\n    }\n\n    public static Status of(String s) {\n       for (Status _enum: Status.values()) {\n         if (_enum.getType().equals(s.trim())) {\n           return _enum;\n         }\n       }\n       return null;\n    }\n  }\n}\n</code></pre>\n<p>Although the easiest solution is that create an AttributeConverter named &quot;CaseStatusConverter&quot; for Case Status, the User StatusConverter is used for User Status. So I think it should be moved into the User data class as an inner class like this:</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;user&quot;)\npublic class User {\n\n  @Id\n  @GeneratedValue(strategy = GenerationType.IDENTITY)\n  @Column(name = &quot;ID&quot;, nullable = false)\n  private Long id;\n\n  @Enumerated(EnumType.STRING)\n  @Column(name = &quot;status&quot;, nullable = false)\n  @Convert(converter = StatusConverter.class)\n  private Status status;\n\n  @Getter\n  public enum Status {\n    Active(&quot;A&quot;),\n    Inactive(&quot;I&quot;),\n    ;\n\n    private String shortCode;\n\n    Status(String s){\n      this.shortCode= s;\n    }\n\n    public static Status of(String s) {\n       for (Status _enum: Status.values()) {\n         if (_enum.getType().equals(s.trim())) {\n           return _enum;\n         }\n       }\n       return null;\n    }\n  }\n\n  @Converter\n  public class StatusConverter implements AttributeConverter&lt;User.Status, String&gt; {\n\n      @Override\n      public String convertToDatabaseColumn(User.Status status) {\n          return status.getType();\n      }\n\n      @Override\n      public User.Status convertToEntityAttribute(String s) {\n          return User.Status.of(s);\n      }\n  }\n  \n}\n</code></pre>\n<p>After moving, the User StatusConverter is no longer working. Can I move the StatusConverter into the data class as a inner class?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1690263003,"post_id":76759672,"comment_id":135324826,"body_markdown":"The crash is in CustomAdapter, which might be the only class you didn&#39;t post.","body":"The crash is in CustomAdapter, which might be the only class you didn&#39;t post."},{"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"score":0,"creation_date":1690263045,"post_id":76759672,"comment_id":135324830,"body_markdown":"Also-  ListView is deprecated and has been for a decade.  You should be using RecyclerView.","body":"Also-  ListView is deprecated and has been for a decade.  You should be using RecyclerView."},{"owner":{"account_id":29003332,"reputation":13,"user_id":22216464,"display_name":"CheeChunWaiGabriel"},"score":0,"creation_date":1690265108,"post_id":76759672,"comment_id":135325074,"body_markdown":"@GabeSechan\n\nOk, I&#39;ll put that in now.","body":"@GabeSechan  Ok, I&#39;ll put that in now."}],"owner":{"account_id":29003332,"reputation":13,"user_id":22216464,"display_name":"CheeChunWaiGabriel"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690278872,"answer_count":0,"score":0,"last_activity_date":1690278862,"creation_date":1690262815,"question_id":76759672,"body_markdown":"So this is actually an update to my previous (now deleted) subpar post about the custom adapter-for some reason it thinks I&#39;m generating null object references for it and won&#39;t work as a result.\r\n\r\nThese are the components of my project:\r\n\r\nDBHelper-supplementary section:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport android.content.ContentValues;\r\nimport android.content.Context;\r\nimport android.database.Cursor;\r\nimport android.database.sqlite.SQLiteDatabase;\r\nimport android.database.sqlite.SQLiteOpenHelper;\r\nimport android.util.Log;\r\n\r\nimport androidx.annotation.Nullable;\r\n\r\nimport java.util.ArrayList;\r\n\r\n\r\npublic class DBHelper extends SQLiteOpenHelper {    // Start version with 1\r\n    // increment by 1 whenever db schema changes.\r\n    private static final int DATABASE_VER = 1;\r\n    private static final String TABLE_SONG = &quot;song&quot;;\r\n    private static final String COLUMN_ID = &quot;id&quot;;\r\n    private static final String COLUMN_TITLE = &quot;title&quot;;\r\n    private static final String COLUMN_SINGERS = &quot;singers&quot;;\r\n    private static final String COLUMN_YEAR=&quot;year&quot;;\r\n    private static final String COLUMN_STARS=&quot;stars&quot;;\r\n    // Filename of the database\r\n    private static final String DATABASE_NAME = &quot;songs.db&quot;;\r\n\r\n    public DBHelper(@Nullable Context context) {\r\n        super(context, DATABASE_NAME, null, DATABASE_VER);\r\n    }\r\n\r\n    @Override\r\n    public void onCreate(SQLiteDatabase db) {\r\n        String dropTableSql = &quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG;\r\n        db.execSQL(dropTableSql);\r\n        String createTableSql = &quot;CREATE TABLE &quot; + TABLE_SONG +  &quot;(&quot;\r\n                + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\r\n                + COLUMN_TITLE + &quot; TEXT,&quot;\r\n                + COLUMN_SINGERS+ &quot; TEXT ,&quot;\r\n                + COLUMN_YEAR + &quot; INTEGER ,&quot;\r\n                + COLUMN_STARS+ &quot; INTEGER )&quot;;\r\n        db.execSQL(createTableSql);\r\n        Log.i(&quot;info&quot; ,&quot;created tables&quot;);\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n        // Drop older table if existed\r\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG);\r\n        // Create table(s) again\r\n        onCreate(db);\r\n\r\n\r\n    }\r\n    public void insertSong(String title, String singers, int year, int stars){\r\n\r\n        // Get an instance of the database for writing\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        // We use ContentValues object to store the values for\r\n        //  the db operation\r\n        ContentValues values = new ContentValues();\r\n        // Store the column name as key and the description as value\r\n        values.put(COLUMN_TITLE, title);\r\n        values.put(COLUMN_SINGERS, singers);\r\n        values.put(COLUMN_YEAR, year);\r\n        values.put(COLUMN_STARS, stars);\r\n\r\n        // Store the column name as key and the date as value\r\n\r\n        // Insert the row into the TABLE_TASK\r\n       db.insert(TABLE_SONG, null, values);\r\n        // Close the database connection\r\n        db.close();\r\n    }\r\n    public ArrayList&lt;song&gt; getAllSongs() {\r\n        ArrayList&lt;song&gt; songlist = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n\r\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\r\n\r\n        Cursor cursor = db.query(TABLE_SONG, columns, null, null,\r\n                null, null, null, null);\r\n\r\n        if (cursor.moveToFirst()) {\r\n            do {\r\n                int id = cursor.getInt(0);\r\n                String title=cursor.getString(1);\r\n                String singers = cursor.getString(2);\r\n                int year=cursor.getInt(3);\r\n                int stars=cursor.getInt(4);\r\n                song Song = new song(id,title,singers,year,stars);\r\n                songlist.add(Song);\r\n            } while (cursor.moveToNext());\r\n        }\r\n        cursor.close();\r\n        db.close();\r\n        return songlist;\r\n    }\r\n    public ArrayList&lt;song&gt; getBestSongs() {\r\n        ArrayList&lt;song&gt; bestsonglist = new ArrayList&lt;&gt;();\r\n\r\n        SQLiteDatabase db = this.getReadableDatabase();\r\n\r\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\r\n        String condition = COLUMN_STARS + &quot;= ?&quot;;\r\n        String[] args = {&quot;5&quot;};\r\n        Cursor cursor = db.query(TABLE_SONG, columns, condition, args,\r\n                null, null, null, null);\r\n\r\n        if (cursor.moveToFirst()) {\r\n            do {\r\n                int id = cursor.getInt(0);\r\n                String title=cursor.getString(1);\r\n                String singers = cursor.getString(2);\r\n                int year=cursor.getInt(3);\r\n                int stars=cursor.getInt(4);\r\n                song Song = new song(id,title,singers,year,stars);\r\n                bestsonglist.add(Song);\r\n            } while (cursor.moveToNext());\r\n        }\r\n        cursor.close();\r\n        db.close();\r\n        return bestsonglist;\r\n    }\r\n    public int updateSong(song Song) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        ContentValues values = new ContentValues();\r\n        values.put(COLUMN_TITLE, Song.getTitle());\r\n        values.put(COLUMN_SINGERS, Song.getSingers());\r\n        values.put(COLUMN_YEAR, Song.getYear());\r\n        values.put(COLUMN_STARS, Song.getStars());\r\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\r\n        String[] whereArgs = {String.valueOf(Song.getId())};\r\n        int result=db.update(TABLE_SONG, values, whereClause, whereArgs);\r\n\r\n        if (result &lt; 1) {\r\n            Log.d(&quot;DBHelper&quot;, &quot;Update failed&quot;);\r\n\r\n            db.close();\r\n            return result;\r\n        }\r\n\r\n\r\n        return result;\r\n    }\r\n    public void deleteSong(int songId) {\r\n        SQLiteDatabase db = this.getWritableDatabase();\r\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\r\n        String[] whereArgs = {String.valueOf(songId)};\r\n       db.delete(TABLE_SONG, whereClause, whereArgs);\r\n       db.close();\r\n    }}\r\n```\r\n\r\nMainActivity-where the initial processing is done:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ListView;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\nimport android.widget.TextView;\r\nimport android.widget.ToggleButton;\r\n\r\nimport java.util.ArrayList;\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    Button btnInsert, btnGetSongs;\r\n    TextView tvResults;\r\n\r\n    EditText YearInput;\r\n    EditText SongInput;\r\n    EditText SingerInput;\r\n    RadioGroup RadioGroupRating;\r\n\r\n\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        btnInsert = findViewById(R.id.btnInsert);\r\n        btnGetSongs = findViewById(R.id.btnGetTasks);\r\n        //List View-&gt;\r\n        YearInput=findViewById(R.id.insertYear);\r\n        SongInput=findViewById(R.id.insertTitle);\r\n        SingerInput=findViewById(R.id.insertSingers);\r\n        RadioGroupRating=findViewById(R.id.radio_group);\r\n\r\n\r\n        btnInsert.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                DBHelper db = new DBHelper(MainActivity.this);\r\n                String title=SongInput.getText().toString();\r\n                String singers=SingerInput.getText().toString();\r\n                int year=Integer.parseInt(YearInput.getText().toString());\r\n\r\n                int selectedRatingId=RadioGroupRating.getCheckedRadioButtonId();\r\n                RadioButton selectedRatingButton=findViewById(selectedRatingId);\r\n                int rating=Integer.parseInt(selectedRatingButton.getText().toString());\r\n                db.insertSong(title,singers,year,rating);\r\n\r\n                SongInput.setText(&quot;&quot;);\r\n                SingerInput.setText(&quot;&quot;);\r\n                YearInput.setText(&quot;&quot;);\r\n                RadioGroupRating.clearCheck();\r\n            }\r\n        });\r\n\r\n        btnGetSongs.setOnClickListener(new View.OnClickListener(){\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Create the DBHelper object, passing in the\r\n                // activity&#39;s Context\r\n\r\n                // Insert a task\r\n                Intent intent = new Intent(MainActivity.this, EditActivity.class);\r\n                //Label the actual editactivity EditActivity2\r\n                startActivity(intent);\r\n\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n}\r\n```\r\n\r\nEditActivity:Where the list is displayed:\r\n\r\n```\r\n{\r\n    ListView lv;\r\n    ArrayList&lt;song&gt; songsList;\r\n    //ArrayAdapter&lt;song&gt; adapter;\r\n    CustomAdapter adapter;\r\n    Button fivestarsongs;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit);\r\n\r\n        lv = findViewById(R.id.list_view);\r\n        fivestarsongs = findViewById(R.id.btnShow5starsongs);\r\n        DBHelper db = new DBHelper(EditActivity.this);\r\n        songsList = db.getAllSongs();\r\n\r\n        //ArrayAdapter&lt;song&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, songs);\r\n\r\n        if (songsList != null &amp;&amp; !songsList.isEmpty()) {\r\n            adapter = new CustomAdapter(this, android.R.layout.simple_list_item_1, songsList); // Remove the CustomAdapter declaration here\r\n            lv.setAdapter(adapter);\r\n        }\r\n\r\n        fivestarsongs.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                ArrayList&lt;song&gt; BestSongs = db.getBestSongs();\r\n                adapter.clear();\r\n                adapter.addAll(BestSongs);\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n        });\r\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int\r\n                    position, long id) {\r\n                song ClickedSong = songsList.get(position);\r\n                Intent i = new Intent(EditActivity.this,\r\n                        MainActivity2.class);\r\n                i.putExtra(&quot;song&quot;, ClickedSong);\r\n                startActivity(i);\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n```\r\n\r\nMainActivity2-supposed to handle delete/update:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.RadioButton;\r\nimport android.widget.RadioGroup;\r\n\r\n\r\npublic class MainActivity2 extends AppCompatActivity {\r\n\r\n    Button btnUpdate,btnCancel,btnDelete;\r\n    EditText YearInput;\r\n    EditText SongInput;\r\n    EditText SingerInput;\r\n    RadioGroup RadioGroupRating;\r\n\r\n    song selectedSong;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main2);\r\n        DBHelper db = new DBHelper(MainActivity2.this);\r\n        Intent intent = getIntent();\r\n        song clickedSong = (song) intent.getSerializableExtra(&quot;song&quot;);\r\n\r\n        btnUpdate=findViewById(R.id.btnupdate);\r\n        btnCancel=findViewById(R.id.btnCancel);\r\n        btnDelete=findViewById(R.id.btndelete);\r\n        YearInput=findViewById(R.id.insertYear);\r\n        SongInput=findViewById(R.id.insertTitle);\r\n        SingerInput=findViewById(R.id.insertSingers);\r\n\r\n        RadioGroupRating=findViewById(R.id.radio_group);\r\n\r\n        selectedSong = clickedSong;\r\n        YearInput.setText(String.valueOf(clickedSong.getYear()));\r\n        SongInput.setText(clickedSong.getTitle());\r\n        SingerInput.setText(clickedSong.getSingers());\r\n        setStarsSelection(selectedSong.getStars());\r\n\r\n\r\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                selectedSong.setTitle(SongInput.getText().toString());\r\n                selectedSong.setSingers(SingerInput.getText().toString());\r\n                selectedSong.setYear(Integer.parseInt(YearInput.getText().toString()));\r\n                selectedSong.setStars(getSelectedStars());\r\n                db.updateSong(selectedSong);\r\n                db.close();\r\n                finish();\r\n            }\r\n        });\r\n        btnDelete.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                db.deleteSong(selectedSong.getId());\r\n                db.close();\r\n                finish();\r\n            }\r\n        });\r\n        btnCancel.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(MainActivity2.this, MainActivity.class);\r\n                startActivity(intent);\r\n                finish();\r\n            }\r\n        });\r\n\r\n\r\n}\r\n\r\n    private int getSelectedStars() {\r\n        int selectedId = RadioGroupRating.getCheckedRadioButtonId();\r\n        RadioButton rbSelected = findViewById(selectedId);\r\n        return Integer.parseInt(rbSelected.getText().toString());\r\n    }\r\n    private void setStarsSelection(int stars) {\r\n        int radioButtonId = 0;\r\n        switch (stars) {\r\n            case 1:\r\n                radioButtonId = R.id.radio_1;\r\n                break;\r\n            case 2:\r\n                radioButtonId = R.id.radio_2;\r\n                break;\r\n            case 3:\r\n                radioButtonId = R.id.radio_3;\r\n                break;\r\n            case 4:\r\n                radioButtonId = R.id.radio_4;\r\n                break;\r\n            case 5:\r\n                radioButtonId = R.id.radio_5;\r\n                break;\r\n        }\r\n        RadioGroupRating.check(radioButtonId);\r\n    }\r\n\r\n\r\n    }\r\n```\r\n\r\nSong-class involved in all this:\r\n\r\n```\r\npackage com.myapplicationdev.android.songdbmanager;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class song implements Serializable {\r\n    private int id;\r\n    private String title;\r\n    private String singers;\r\n    private int year;\r\n    private int stars;\r\n\r\n\r\n    public void setSingers(String singers) {\r\n        this.singers = singers;\r\n    }\r\n\r\n    public void setStars(int stars) {\r\n        this.stars = stars;\r\n    }\r\n\r\n    public void setTitle(String title) {\r\n        this.title = title;\r\n    }\r\n\r\n    public void setYear(int year) {\r\n        this.year = year;\r\n    }\r\n\r\n    public song (\r\n                 String title,\r\n                 String singers,\r\n                 int year,\r\n                 int stars\r\n    ){\r\n        this.title=title;\r\n        this.singers=singers;\r\n        this.year=year;\r\n        this.stars=stars;\r\n    }\r\n    public song (\r\n            int id,\r\n            String title,\r\n            String singers,\r\n            int year,\r\n            int stars\r\n    ){\r\n        this.id=id;\r\n        this.title=title;\r\n        this.singers=singers;\r\n        this.year=year;\r\n        this.stars=stars;\r\n    }\r\n    public String getTitle() {\r\n        return title;\r\n    }\r\n    public int getId(){\r\n        return id;\r\n    }\r\n\r\n    public int getYear() {\r\n        return year;\r\n    }\r\n\r\n    public int getStars() {\r\n        return stars;\r\n    }\r\n\r\n    public String getSingers() {\r\n        return singers;\r\n    }\r\n\r\n\r\n    @NonNull\r\n    @Override\r\n    public String toString() {\r\n        return\r\n                &quot;title=&#39;&quot; + title + &#39;\\&#39;&#39; +\r\n                &quot;, singers=&#39;&quot; + singers + &#39;\\&#39;&#39; +\r\n                &quot;, year=&quot; + year +\r\n                &quot;, stars=&quot; + stars\r\n               ;\r\n    }\r\n}\r\n```\r\n\r\nCustomAdapter:\r\n```\r\npublic class CustomAdapter extends ArrayAdapter {\r\n    private Context context;\r\n    private int layoutResourceId;\r\n    private ArrayList&lt;song&gt; songList;\r\n\r\n    public CustomAdapter(Context context, int resource, ArrayList&lt;song&gt; objects) {\r\n        super(context, resource, objects);\r\n        this.context = context;\r\n        this.layoutResourceId = resource;\r\n        this.songList = objects;\r\n    }\r\n\r\n    @NonNull\r\n    @Override\r\n    public View getView(int position, View rowView, ViewGroup parent) {\r\n        if (rowView == null) {\r\n            LayoutInflater inflater = LayoutInflater.from(context);\r\n            rowView = inflater.inflate(layoutResourceId, parent, false);\r\n        }\r\n\r\n        song currentSong = songList.get(position);\r\n\r\n        TextView yearInput = rowView.findViewById(R.id.insertYear);\r\n        TextView singerInput = rowView.findViewById(R.id.insertSingers);\r\n        TextView titleInput = rowView.findViewById(R.id.insertTitle);\r\n        RadioGroup radioGroupRating =rowView.findViewById(R.id.radio_group);\r\n\r\n        titleInput.setText(currentSong.getTitle());\r\n        singerInput.setText(currentSong.getSingers());\r\n        yearInput.setText(String.valueOf(currentSong.getYear()));\r\n\r\n        int selectedValue = currentSong.getStars();\r\n        int radioButtonId = 0;\r\n        switch (selectedValue) {\r\n            case 1:\r\n                radioButtonId = R.id.radio_1;\r\n                break;\r\n            case 2:\r\n                radioButtonId = R.id.radio_2;\r\n                break;\r\n            case 3:\r\n                radioButtonId = R.id.radio_3;\r\n                break;\r\n            case 4:\r\n                radioButtonId = R.id.radio_4;\r\n                break;\r\n            case 5:\r\n                radioButtonId = R.id.radio_5;\r\n                break;\r\n        }\r\n        radioGroupRating.check(radioButtonId);\r\n\r\n        return rowView;\r\n\r\n\r\n}}\r\n```\r\n\r\nAnd here&#39;s the error message associated with these (I&#39;d share the full stack but the text limit likely won&#39;t allow me):\r\n\r\nIt refers to the line where I set the year in the adapter, which is otherwise working as intended.\r\n\r\n```\r\nFATAL EXCEPTION: main\r\n                                                                                                    Process: com.myapplicationdev.android.songdbmanager, PID: 27730\r\n                                                                                                    java.lang.NullPointerException: Attempt to invoke virtual method &#39;void android.widget.TextView.setText(java.lang.CharSequence)&#39; on a null object reference\r\n                                                                                                    \tat com.myapplicationdev.android.songdbmanager.CustomAdapter.getView(CustomAdapter.java:44)\r\n                                                                                                    \tat android.widget.AbsListView.obtainView(AbsListView.java:2387)\r\n                                                                                                    \tat android.widget.ListView.makeAndAddView(ListView.java:2067)\r\n                                                                                                    \tat android.widget.ListView.fillDown(ListView.java:793)\r\n                                                                                                    \tat android.widget.ListView.fillFromTop(ListView.java:855)\r\n                                                                                                    \tat android.widget.ListView.layoutChildren(ListView.java:1838)\r\n                                                                                                    \tat android.widget.AbsListView.onLayout(AbsListView.java:2184)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\r\n                                                                                                    \tat android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1818)\r\n                                                                                                    \tat android.widget.LinearLayout.onLayout(LinearLayout.java:1584)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n                                                                                                    \tat android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\r\n                                                                                                    \tat android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\r\n                                                                                                    \tat android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n                                                                                                    \tat android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\r\n                                                                                                    \tat android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\r\n                                                                                                    \tat android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\r\n                                                                                                    \tat android.widget.FrameLayout.onLayout(FrameLayout.java:270)\r\n                                                                                                    \tat com.android.internal.policy.DecorView.onLayout(DecorView.java:784)\r\n                                                                                                    \tat android.view.View.layout(View.java:22844)\r\n                                                                                                    \tat android.view.ViewGroup.layout(ViewGroup.java:6389)\r\n                                                                                                    \tat android.view.ViewRootImpl.performLayout(ViewRootImpl.java:3470)\r\n                                                                                                    \tat android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2938)\r\n                                                                                                    \tat android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1952)\r\n                                                                                                    \tat android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:8171)\r\n                                                                                                    \tat android.view.Choreographer$CallbackRecord.run(Choreographer.java:972)\r\n                                                                                                    \tat android.view.Choreographer.doCallbacks(Choreographer.java:796)\r\n                                                                                                    \tat android.view.Choreographer.doFrame(Choreographer.java:731)\r\n                                                                                                    \tat android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:957)\r\n                                                                                                    \tat android.os.Handler.handleCallback(Handler.java:938)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:99)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:223)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:7656)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n```\r\n\r\nI tried editing the code to check for nulls and even making an object just to check if that&#39;s causing the glitch.\r\n\r\nNeither of them had much of an effect.","title":"Custom Adapter generates Null Point Exceptions","body":"<p>So this is actually an update to my previous (now deleted) subpar post about the custom adapter-for some reason it thinks I'm generating null object references for it and won't work as a result.</p>\n<p>These are the components of my project:</p>\n<p>DBHelper-supplementary section:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport android.content.ContentValues;\nimport android.content.Context;\nimport android.database.Cursor;\nimport android.database.sqlite.SQLiteDatabase;\nimport android.database.sqlite.SQLiteOpenHelper;\nimport android.util.Log;\n\nimport androidx.annotation.Nullable;\n\nimport java.util.ArrayList;\n\n\npublic class DBHelper extends SQLiteOpenHelper {    // Start version with 1\n    // increment by 1 whenever db schema changes.\n    private static final int DATABASE_VER = 1;\n    private static final String TABLE_SONG = &quot;song&quot;;\n    private static final String COLUMN_ID = &quot;id&quot;;\n    private static final String COLUMN_TITLE = &quot;title&quot;;\n    private static final String COLUMN_SINGERS = &quot;singers&quot;;\n    private static final String COLUMN_YEAR=&quot;year&quot;;\n    private static final String COLUMN_STARS=&quot;stars&quot;;\n    // Filename of the database\n    private static final String DATABASE_NAME = &quot;songs.db&quot;;\n\n    public DBHelper(@Nullable Context context) {\n        super(context, DATABASE_NAME, null, DATABASE_VER);\n    }\n\n    @Override\n    public void onCreate(SQLiteDatabase db) {\n        String dropTableSql = &quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG;\n        db.execSQL(dropTableSql);\n        String createTableSql = &quot;CREATE TABLE &quot; + TABLE_SONG +  &quot;(&quot;\n                + COLUMN_ID + &quot; INTEGER PRIMARY KEY AUTOINCREMENT,&quot;\n                + COLUMN_TITLE + &quot; TEXT,&quot;\n                + COLUMN_SINGERS+ &quot; TEXT ,&quot;\n                + COLUMN_YEAR + &quot; INTEGER ,&quot;\n                + COLUMN_STARS+ &quot; INTEGER )&quot;;\n        db.execSQL(createTableSql);\n        Log.i(&quot;info&quot; ,&quot;created tables&quot;);\n\n\n    }\n\n    @Override\n    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n        // Drop older table if existed\n        db.execSQL(&quot;DROP TABLE IF EXISTS &quot; + TABLE_SONG);\n        // Create table(s) again\n        onCreate(db);\n\n\n    }\n    public void insertSong(String title, String singers, int year, int stars){\n\n        // Get an instance of the database for writing\n        SQLiteDatabase db = this.getWritableDatabase();\n        // We use ContentValues object to store the values for\n        //  the db operation\n        ContentValues values = new ContentValues();\n        // Store the column name as key and the description as value\n        values.put(COLUMN_TITLE, title);\n        values.put(COLUMN_SINGERS, singers);\n        values.put(COLUMN_YEAR, year);\n        values.put(COLUMN_STARS, stars);\n\n        // Store the column name as key and the date as value\n\n        // Insert the row into the TABLE_TASK\n       db.insert(TABLE_SONG, null, values);\n        // Close the database connection\n        db.close();\n    }\n    public ArrayList&lt;song&gt; getAllSongs() {\n        ArrayList&lt;song&gt; songlist = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase db = this.getReadableDatabase();\n\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\n\n        Cursor cursor = db.query(TABLE_SONG, columns, null, null,\n                null, null, null, null);\n\n        if (cursor.moveToFirst()) {\n            do {\n                int id = cursor.getInt(0);\n                String title=cursor.getString(1);\n                String singers = cursor.getString(2);\n                int year=cursor.getInt(3);\n                int stars=cursor.getInt(4);\n                song Song = new song(id,title,singers,year,stars);\n                songlist.add(Song);\n            } while (cursor.moveToNext());\n        }\n        cursor.close();\n        db.close();\n        return songlist;\n    }\n    public ArrayList&lt;song&gt; getBestSongs() {\n        ArrayList&lt;song&gt; bestsonglist = new ArrayList&lt;&gt;();\n\n        SQLiteDatabase db = this.getReadableDatabase();\n\n        String[] columns= {COLUMN_ID, COLUMN_TITLE, COLUMN_SINGERS,COLUMN_YEAR,COLUMN_STARS};\n        String condition = COLUMN_STARS + &quot;= ?&quot;;\n        String[] args = {&quot;5&quot;};\n        Cursor cursor = db.query(TABLE_SONG, columns, condition, args,\n                null, null, null, null);\n\n        if (cursor.moveToFirst()) {\n            do {\n                int id = cursor.getInt(0);\n                String title=cursor.getString(1);\n                String singers = cursor.getString(2);\n                int year=cursor.getInt(3);\n                int stars=cursor.getInt(4);\n                song Song = new song(id,title,singers,year,stars);\n                bestsonglist.add(Song);\n            } while (cursor.moveToNext());\n        }\n        cursor.close();\n        db.close();\n        return bestsonglist;\n    }\n    public int updateSong(song Song) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        ContentValues values = new ContentValues();\n        values.put(COLUMN_TITLE, Song.getTitle());\n        values.put(COLUMN_SINGERS, Song.getSingers());\n        values.put(COLUMN_YEAR, Song.getYear());\n        values.put(COLUMN_STARS, Song.getStars());\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\n        String[] whereArgs = {String.valueOf(Song.getId())};\n        int result=db.update(TABLE_SONG, values, whereClause, whereArgs);\n\n        if (result &lt; 1) {\n            Log.d(&quot;DBHelper&quot;, &quot;Update failed&quot;);\n\n            db.close();\n            return result;\n        }\n\n\n        return result;\n    }\n    public void deleteSong(int songId) {\n        SQLiteDatabase db = this.getWritableDatabase();\n        String whereClause = COLUMN_ID + &quot;=?&quot;;\n        String[] whereArgs = {String.valueOf(songId)};\n       db.delete(TABLE_SONG, whereClause, whereArgs);\n       db.close();\n    }}\n</code></pre>\n<p>MainActivity-where the initial processing is done:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.ArrayAdapter;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ListView;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\nimport android.widget.TextView;\nimport android.widget.ToggleButton;\n\nimport java.util.ArrayList;\npublic class MainActivity extends AppCompatActivity {\n\n    Button btnInsert, btnGetSongs;\n    TextView tvResults;\n\n    EditText YearInput;\n    EditText SongInput;\n    EditText SingerInput;\n    RadioGroup RadioGroupRating;\n\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        btnInsert = findViewById(R.id.btnInsert);\n        btnGetSongs = findViewById(R.id.btnGetTasks);\n        //List View-&gt;\n        YearInput=findViewById(R.id.insertYear);\n        SongInput=findViewById(R.id.insertTitle);\n        SingerInput=findViewById(R.id.insertSingers);\n        RadioGroupRating=findViewById(R.id.radio_group);\n\n\n        btnInsert.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                DBHelper db = new DBHelper(MainActivity.this);\n                String title=SongInput.getText().toString();\n                String singers=SingerInput.getText().toString();\n                int year=Integer.parseInt(YearInput.getText().toString());\n\n                int selectedRatingId=RadioGroupRating.getCheckedRadioButtonId();\n                RadioButton selectedRatingButton=findViewById(selectedRatingId);\n                int rating=Integer.parseInt(selectedRatingButton.getText().toString());\n                db.insertSong(title,singers,year,rating);\n\n                SongInput.setText(&quot;&quot;);\n                SingerInput.setText(&quot;&quot;);\n                YearInput.setText(&quot;&quot;);\n                RadioGroupRating.clearCheck();\n            }\n        });\n\n        btnGetSongs.setOnClickListener(new View.OnClickListener(){\n            @Override\n            public void onClick(View v) {\n                // Create the DBHelper object, passing in the\n                // activity's Context\n\n                // Insert a task\n                Intent intent = new Intent(MainActivity.this, EditActivity.class);\n                //Label the actual editactivity EditActivity2\n                startActivity(intent);\n\n\n            }\n        });\n    }\n\n\n\n}\n</code></pre>\n<p>EditActivity:Where the list is displayed:</p>\n<pre><code>{\n    ListView lv;\n    ArrayList&lt;song&gt; songsList;\n    //ArrayAdapter&lt;song&gt; adapter;\n    CustomAdapter adapter;\n    Button fivestarsongs;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_edit);\n\n        lv = findViewById(R.id.list_view);\n        fivestarsongs = findViewById(R.id.btnShow5starsongs);\n        DBHelper db = new DBHelper(EditActivity.this);\n        songsList = db.getAllSongs();\n\n        //ArrayAdapter&lt;song&gt; adapter = new ArrayAdapter&lt;&gt;(this, android.R.layout.simple_list_item_1, songs);\n\n        if (songsList != null &amp;&amp; !songsList.isEmpty()) {\n            adapter = new CustomAdapter(this, android.R.layout.simple_list_item_1, songsList); // Remove the CustomAdapter declaration here\n            lv.setAdapter(adapter);\n        }\n\n        fivestarsongs.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                ArrayList&lt;song&gt; BestSongs = db.getBestSongs();\n                adapter.clear();\n                adapter.addAll(BestSongs);\n                adapter.notifyDataSetChanged();\n            }\n        });\n        lv.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n            @Override\n            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int\n                    position, long id) {\n                song ClickedSong = songsList.get(position);\n                Intent i = new Intent(EditActivity.this,\n                        MainActivity2.class);\n                i.putExtra(&quot;song&quot;, ClickedSong);\n                startActivity(i);\n            }\n        });\n    }\n\n}\n</code></pre>\n<p>MainActivity2-supposed to handle delete/update:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.RadioButton;\nimport android.widget.RadioGroup;\n\n\npublic class MainActivity2 extends AppCompatActivity {\n\n    Button btnUpdate,btnCancel,btnDelete;\n    EditText YearInput;\n    EditText SongInput;\n    EditText SingerInput;\n    RadioGroup RadioGroupRating;\n\n    song selectedSong;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main2);\n        DBHelper db = new DBHelper(MainActivity2.this);\n        Intent intent = getIntent();\n        song clickedSong = (song) intent.getSerializableExtra(&quot;song&quot;);\n\n        btnUpdate=findViewById(R.id.btnupdate);\n        btnCancel=findViewById(R.id.btnCancel);\n        btnDelete=findViewById(R.id.btndelete);\n        YearInput=findViewById(R.id.insertYear);\n        SongInput=findViewById(R.id.insertTitle);\n        SingerInput=findViewById(R.id.insertSingers);\n\n        RadioGroupRating=findViewById(R.id.radio_group);\n\n        selectedSong = clickedSong;\n        YearInput.setText(String.valueOf(clickedSong.getYear()));\n        SongInput.setText(clickedSong.getTitle());\n        SingerInput.setText(clickedSong.getSingers());\n        setStarsSelection(selectedSong.getStars());\n\n\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                selectedSong.setTitle(SongInput.getText().toString());\n                selectedSong.setSingers(SingerInput.getText().toString());\n                selectedSong.setYear(Integer.parseInt(YearInput.getText().toString()));\n                selectedSong.setStars(getSelectedStars());\n                db.updateSong(selectedSong);\n                db.close();\n                finish();\n            }\n        });\n        btnDelete.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                db.deleteSong(selectedSong.getId());\n                db.close();\n                finish();\n            }\n        });\n        btnCancel.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(MainActivity2.this, MainActivity.class);\n                startActivity(intent);\n                finish();\n            }\n        });\n\n\n}\n\n    private int getSelectedStars() {\n        int selectedId = RadioGroupRating.getCheckedRadioButtonId();\n        RadioButton rbSelected = findViewById(selectedId);\n        return Integer.parseInt(rbSelected.getText().toString());\n    }\n    private void setStarsSelection(int stars) {\n        int radioButtonId = 0;\n        switch (stars) {\n            case 1:\n                radioButtonId = R.id.radio_1;\n                break;\n            case 2:\n                radioButtonId = R.id.radio_2;\n                break;\n            case 3:\n                radioButtonId = R.id.radio_3;\n                break;\n            case 4:\n                radioButtonId = R.id.radio_4;\n                break;\n            case 5:\n                radioButtonId = R.id.radio_5;\n                break;\n        }\n        RadioGroupRating.check(radioButtonId);\n    }\n\n\n    }\n</code></pre>\n<p>Song-class involved in all this:</p>\n<pre><code>package com.myapplicationdev.android.songdbmanager;\n\nimport androidx.annotation.NonNull;\n\nimport java.io.Serializable;\n\npublic class song implements Serializable {\n    private int id;\n    private String title;\n    private String singers;\n    private int year;\n    private int stars;\n\n\n    public void setSingers(String singers) {\n        this.singers = singers;\n    }\n\n    public void setStars(int stars) {\n        this.stars = stars;\n    }\n\n    public void setTitle(String title) {\n        this.title = title;\n    }\n\n    public void setYear(int year) {\n        this.year = year;\n    }\n\n    public song (\n                 String title,\n                 String singers,\n                 int year,\n                 int stars\n    ){\n        this.title=title;\n        this.singers=singers;\n        this.year=year;\n        this.stars=stars;\n    }\n    public song (\n            int id,\n            String title,\n            String singers,\n            int year,\n            int stars\n    ){\n        this.id=id;\n        this.title=title;\n        this.singers=singers;\n        this.year=year;\n        this.stars=stars;\n    }\n    public String getTitle() {\n        return title;\n    }\n    public int getId(){\n        return id;\n    }\n\n    public int getYear() {\n        return year;\n    }\n\n    public int getStars() {\n        return stars;\n    }\n\n    public String getSingers() {\n        return singers;\n    }\n\n\n    @NonNull\n    @Override\n    public String toString() {\n        return\n                &quot;title='&quot; + title + '\\'' +\n                &quot;, singers='&quot; + singers + '\\'' +\n                &quot;, year=&quot; + year +\n                &quot;, stars=&quot; + stars\n               ;\n    }\n}\n</code></pre>\n<p>CustomAdapter:</p>\n<pre><code>public class CustomAdapter extends ArrayAdapter {\n    private Context context;\n    private int layoutResourceId;\n    private ArrayList&lt;song&gt; songList;\n\n    public CustomAdapter(Context context, int resource, ArrayList&lt;song&gt; objects) {\n        super(context, resource, objects);\n        this.context = context;\n        this.layoutResourceId = resource;\n        this.songList = objects;\n    }\n\n    @NonNull\n    @Override\n    public View getView(int position, View rowView, ViewGroup parent) {\n        if (rowView == null) {\n            LayoutInflater inflater = LayoutInflater.from(context);\n            rowView = inflater.inflate(layoutResourceId, parent, false);\n        }\n\n        song currentSong = songList.get(position);\n\n        TextView yearInput = rowView.findViewById(R.id.insertYear);\n        TextView singerInput = rowView.findViewById(R.id.insertSingers);\n        TextView titleInput = rowView.findViewById(R.id.insertTitle);\n        RadioGroup radioGroupRating =rowView.findViewById(R.id.radio_group);\n\n        titleInput.setText(currentSong.getTitle());\n        singerInput.setText(currentSong.getSingers());\n        yearInput.setText(String.valueOf(currentSong.getYear()));\n\n        int selectedValue = currentSong.getStars();\n        int radioButtonId = 0;\n        switch (selectedValue) {\n            case 1:\n                radioButtonId = R.id.radio_1;\n                break;\n            case 2:\n                radioButtonId = R.id.radio_2;\n                break;\n            case 3:\n                radioButtonId = R.id.radio_3;\n                break;\n            case 4:\n                radioButtonId = R.id.radio_4;\n                break;\n            case 5:\n                radioButtonId = R.id.radio_5;\n                break;\n        }\n        radioGroupRating.check(radioButtonId);\n\n        return rowView;\n\n\n}}\n</code></pre>\n<p>And here's the error message associated with these (I'd share the full stack but the text limit likely won't allow me):</p>\n<p>It refers to the line where I set the year in the adapter, which is otherwise working as intended.</p>\n<pre><code>FATAL EXCEPTION: main\n                                                                                                    Process: com.myapplicationdev.android.songdbmanager, PID: 27730\n                                                                                                    java.lang.NullPointerException: Attempt to invoke virtual method 'void android.widget.TextView.setText(java.lang.CharSequence)' on a null object reference\n                                                                                                        at com.myapplicationdev.android.songdbmanager.CustomAdapter.getView(CustomAdapter.java:44)\n                                                                                                        at android.widget.AbsListView.obtainView(AbsListView.java:2387)\n                                                                                                        at android.widget.ListView.makeAndAddView(ListView.java:2067)\n                                                                                                        at android.widget.ListView.fillDown(ListView.java:793)\n                                                                                                        at android.widget.ListView.fillFromTop(ListView.java:855)\n                                                                                                        at android.widget.ListView.layoutChildren(ListView.java:1838)\n                                                                                                        at android.widget.AbsListView.onLayout(AbsListView.java:2184)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\n                                                                                                        at android.widget.LinearLayout.layoutHorizontal(LinearLayout.java:1818)\n                                                                                                        at android.widget.LinearLayout.onLayout(LinearLayout.java:1584)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n                                                                                                        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\n                                                                                                        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\n                                                                                                        at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n                                                                                                        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1829)\n                                                                                                        at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1673)\n                                                                                                        at android.widget.LinearLayout.onLayout(LinearLayout.java:1582)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.widget.FrameLayout.layoutChildren(FrameLayout.java:332)\n                                                                                                        at android.widget.FrameLayout.onLayout(FrameLayout.java:270)\n                                                                                                        at com.android.internal.policy.DecorView.onLayout(DecorView.java:784)\n                                                                                                        at android.view.View.layout(View.java:22844)\n                                                                                                        at android.view.ViewGroup.layout(ViewGroup.java:6389)\n                                                                                                        at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:3470)\n                                                                                                        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:2938)\n                                                                                                        at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1952)\n                                                                                                        at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:8171)\n                                                                                                        at android.view.Choreographer$CallbackRecord.run(Choreographer.java:972)\n                                                                                                        at android.view.Choreographer.doCallbacks(Choreographer.java:796)\n                                                                                                        at android.view.Choreographer.doFrame(Choreographer.java:731)\n                                                                                                        at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:957)\n                                                                                                        at android.os.Handler.handleCallback(Handler.java:938)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:99)\n                                                                                                        at android.os.Looper.loop(Looper.java:223)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:7656)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n</code></pre>\n<p>I tried editing the code to check for nulls and even making an object just to check if that's causing the glitch.</p>\n<p>Neither of them had much of an effect.</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-security"],"comments":[{"owner":{"account_id":11699537,"reputation":299,"user_id":8565131,"accept_rate":100,"display_name":"Joss MT"},"score":0,"creation_date":1529771986,"post_id":51002289,"comment_id":88999861,"body_markdown":"Perhaps there is some filter management required in my web.xml file?","body":"Perhaps there is some filter management required in my web.xml file?"}],"answers":[{"tags":[],"owner":{"account_id":11699537,"reputation":299,"user_id":8565131,"accept_rate":100,"display_name":"Joss MT"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":true,"score":0,"last_activity_date":1529772410,"creation_date":1529772410,"answer_id":51003195,"question_id":51002289,"body_markdown":"Found the problem.\r\n\r\nI had to include a reference to the filter in my web.xml file, this isn&#39;t picked up automatically using component scanner.\r\n\r\nsomething like:\r\n\r\n    &lt;filter&gt;\r\n        &lt;filter-name&gt;jwtFilter&lt;/filter-name&gt;\r\n        &lt;filter-class&gt;com.path.to.JwtFilter&lt;/filter-class&gt;\r\n    &lt;/filter&gt;\r\n\r\n    &lt;filter-mapping&gt;\r\n        &lt;filter-name&gt;jwtFilter&lt;/filter-name&gt;\r\n        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;/filter-mapping&gt;","title":"JWT authentication filter not being triggered in Spring Security","body":"<p>Found the problem.</p>\n\n<p>I had to include a reference to the filter in my web.xml file, this isn't picked up automatically using component scanner.</p>\n\n<p>something like:</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;jwtFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.path.to.JwtFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;jwtFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10131694,"reputation":1907,"user_id":7484853,"display_name":"Hasee Amarathunga"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690278398,"creation_date":1690278398,"answer_id":76761453,"question_id":51002289,"body_markdown":"This issue occurred due to adding some `additional filters` into the **web.xml** file in the tomcat **conf** path. After removing that filters the authentication will be worked. \r\n\r\n If you can&#39;t find the additional filters, better to try with a new tomcat or replace the web.xml file with **default** values.","title":"JWT authentication filter not being triggered in Spring Security","body":"<p>This issue occurred due to adding some <code>additional filters</code> into the <strong>web.xml</strong> file in the tomcat <strong>conf</strong> path. After removing that filters the authentication will be worked.</p>\n<p>If you can't find the additional filters, better to try with a new tomcat or replace the web.xml file with <strong>default</strong> values.</p>\n"}],"owner":{"account_id":11699537,"reputation":299,"user_id":8565131,"accept_rate":100,"display_name":"Joss MT"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5267,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":51003195,"answer_count":2,"score":1,"last_activity_date":1690278398,"creation_date":1529765393,"question_id":51002289,"body_markdown":"I have created a JWT authentication filter for my Spring Rest backend. Creating a JWT doesn&#39;t appear to be an issue, however with my current setup, any request is authenticated, no request triggers a 401 despite the fact that the client is not passing any tokens in the header.\r\n\r\nMy WebSecurityConfig:\r\n\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(securedEnabled = true,\r\n        jsr250Enabled = true, prePostEnabled = true)\r\n    public class WebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\r\n\r\n    private CustomUserDetailsService customUserDetailsService;\r\n\r\n    @Autowired\r\n    public WebSecurityConfig(final JwtAuthenticationEntryPoint unauthorizedHandler,\r\n                             final CustomUserDetailsService customUserDetailsService) {\r\n        this.unauthorizedHandler = unauthorizedHandler;\r\n        this.customUserDetailsService = customUserDetailsService;\r\n    }\r\n\r\n    @Bean\r\n    public JwtAuthenticationFilter jwtAuthenticationFilter() {\r\n        return new JwtAuthenticationFilter();\r\n    }\r\n\r\n    @Bean\r\n    public JwtAuthenticationSuccessHandler jwtAuthenticationSuccessHandler() {\r\n        return new JwtAuthenticationSuccessHandler();\r\n    }\r\n\r\n    @Override\r\n    public void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n        authenticationManagerBuilder\r\n                .userDetailsService(customUserDetailsService)\r\n                .passwordEncoder(passwordEncoder());\r\n    }\r\n\r\n    @Bean(BeanIds.AUTHENTICATION_MANAGER)\r\n    @Override\r\n    public AuthenticationManager authenticationManagerBean() throws Exception {\r\n        return super.authenticationManagerBean();\r\n    }\r\n\r\n    @Bean\r\n    public PasswordEncoder passwordEncoder() {\r\n        return new BCryptPasswordEncoder();\r\n    }\r\n\r\n    /**\r\n     * {@inheritDoc}\r\n     */\r\n    @Override\r\n    protected void configure(final HttpSecurity http) throws Exception {\r\n\r\n        http\r\n                .csrf()\r\n                .disable()\r\n                .cors()\r\n                .and()\r\n                .exceptionHandling()\r\n                .authenticationEntryPoint(unauthorizedHandler)\r\n                .and()\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .antMatcher(&quot;/api&quot;)\r\n                .authorizeRequests()\r\n                .anyRequest()\r\n                .authenticated()\r\n\r\n                .and()\r\n                .addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    }\r\n\r\n    /**\r\n     * Sets security evaluation context.\r\n     *\r\n     * @return {@link SecurityEvaluationContextExtension}\r\n     */\r\n    @Bean\r\n    public SecurityEvaluationContextExtension securityEvaluationContextExtension() {\r\n        return new SecurityEvaluationContextExtension();\r\n    }\r\n    }\r\n\r\n\r\nI have set this up such that all requests require authorisation. My JwtAuthenticationEntryPoint is as expected: a generic 401 error being thrown.\r\n\r\nMy  JwtAuthenticationFilter:\r\n\r\n\r\n    @Component\r\n    public class JwtAuthenticationFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private JwtTokenProvider tokenProvider;\r\n\r\n    @Autowired\r\n    private CustomUserDetailsService customUserDetailsService;\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(JwtAuthenticationFilter.class);\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain\r\n            filterChain) throws ServletException, IOException {\r\n\r\n        logger.debug(&quot;Filtering request for JWT header verification&quot;);\r\n\r\n        try {\r\n            String jwt = getJwtFromRequest(request);\r\n\r\n            if (StringUtils.hasText(jwt) &amp;&amp; tokenProvider.validateToken(jwt)) {\r\n                String username = tokenProvider.getUserIdFromJWT(jwt);\r\n\r\n                UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n                UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken\r\n                        (userDetails, null, userDetails.getAuthorities());\r\n                authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\r\n                SecurityContextHolder.getContext().setAuthentication(authentication);\r\n            }\r\n        } catch (Exception ex) {\r\n            logger.error(&quot;Could not set user authentication in security context&quot;, ex);\r\n        }\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n\r\n    private String getJwtFromRequest(HttpServletRequest request) {\r\n\r\n        logger.debug(&quot;Attempting to get token from request header&quot;);\r\n\r\n        String bearerToken = request.getHeader(&quot;Authorization&quot;);\r\n        if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(&quot;Bearer &quot;)) {\r\n            return bearerToken.substring(7, bearerToken.length());\r\n        }\r\n        return null;\r\n    }\r\n     }\r\n\r\n","title":"JWT authentication filter not being triggered in Spring Security","body":"<p>I have created a JWT authentication filter for my Spring Rest backend. Creating a JWT doesn't appear to be an issue, however with my current setup, any request is authenticated, no request triggers a 401 despite the fact that the client is not passing any tokens in the header.</p>\n\n<p>My WebSecurityConfig:</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(securedEnabled = true,\n    jsr250Enabled = true, prePostEnabled = true)\npublic class WebSecurityConfig extends WebSecurityConfigurerAdapter {\n\nprivate JwtAuthenticationEntryPoint unauthorizedHandler;\n\nprivate CustomUserDetailsService customUserDetailsService;\n\n@Autowired\npublic WebSecurityConfig(final JwtAuthenticationEntryPoint unauthorizedHandler,\n                         final CustomUserDetailsService customUserDetailsService) {\n    this.unauthorizedHandler = unauthorizedHandler;\n    this.customUserDetailsService = customUserDetailsService;\n}\n\n@Bean\npublic JwtAuthenticationFilter jwtAuthenticationFilter() {\n    return new JwtAuthenticationFilter();\n}\n\n@Bean\npublic JwtAuthenticationSuccessHandler jwtAuthenticationSuccessHandler() {\n    return new JwtAuthenticationSuccessHandler();\n}\n\n@Override\npublic void configure(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n    authenticationManagerBuilder\n            .userDetailsService(customUserDetailsService)\n            .passwordEncoder(passwordEncoder());\n}\n\n@Bean(BeanIds.AUTHENTICATION_MANAGER)\n@Override\npublic AuthenticationManager authenticationManagerBean() throws Exception {\n    return super.authenticationManagerBean();\n}\n\n@Bean\npublic PasswordEncoder passwordEncoder() {\n    return new BCryptPasswordEncoder();\n}\n\n/**\n * {@inheritDoc}\n */\n@Override\nprotected void configure(final HttpSecurity http) throws Exception {\n\n    http\n            .csrf()\n            .disable()\n            .cors()\n            .and()\n            .exceptionHandling()\n            .authenticationEntryPoint(unauthorizedHandler)\n            .and()\n            .sessionManagement()\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n            .and()\n            .antMatcher(\"/api\")\n            .authorizeRequests()\n            .anyRequest()\n            .authenticated()\n\n            .and()\n            .addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n}\n\n/**\n * Sets security evaluation context.\n *\n * @return {@link SecurityEvaluationContextExtension}\n */\n@Bean\npublic SecurityEvaluationContextExtension securityEvaluationContextExtension() {\n    return new SecurityEvaluationContextExtension();\n}\n}\n</code></pre>\n\n<p>I have set this up such that all requests require authorisation. My JwtAuthenticationEntryPoint is as expected: a generic 401 error being thrown.</p>\n\n<p>My  JwtAuthenticationFilter:</p>\n\n<pre><code>@Component\npublic class JwtAuthenticationFilter extends OncePerRequestFilter {\n\n@Autowired\nprivate JwtTokenProvider tokenProvider;\n\n@Autowired\nprivate CustomUserDetailsService customUserDetailsService;\n\nprivate static final Logger logger = LoggerFactory.getLogger(JwtAuthenticationFilter.class);\n\n@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain\n        filterChain) throws ServletException, IOException {\n\n    logger.debug(\"Filtering request for JWT header verification\");\n\n    try {\n        String jwt = getJwtFromRequest(request);\n\n        if (StringUtils.hasText(jwt) &amp;&amp; tokenProvider.validateToken(jwt)) {\n            String username = tokenProvider.getUserIdFromJWT(jwt);\n\n            UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken\n                    (userDetails, null, userDetails.getAuthorities());\n            authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n        }\n    } catch (Exception ex) {\n        logger.error(\"Could not set user authentication in security context\", ex);\n    }\n\n    filterChain.doFilter(request, response);\n}\n\nprivate String getJwtFromRequest(HttpServletRequest request) {\n\n    logger.debug(\"Attempting to get token from request header\");\n\n    String bearerToken = request.getHeader(\"Authorization\");\n    if (StringUtils.hasText(bearerToken) &amp;&amp; bearerToken.startsWith(\"Bearer \")) {\n        return bearerToken.substring(7, bearerToken.length());\n    }\n    return null;\n}\n }\n</code></pre>\n"},{"tags":["java","amazon-s3","aws-sdk","aws-ssm"],"answers":[{"comments":[{"owner":{"account_id":27242816,"reputation":11,"user_id":20768684,"display_name":"Lebo Mccallum"},"score":0,"creation_date":1670953962,"post_id":74788866,"comment_id":131990764,"body_markdown":"I cant exclude one of the dependencies since I need both in my application. power tools provides a caching feature for my SSM client so cannot get rid of it. Is there a way to explicitly create the clients so that conflicts can be resolved?","body":"I cant exclude one of the dependencies since I need both in my application. power tools provides a caching feature for my SSM client so cannot get rid of it. Is there a way to explicitly create the clients so that conflicts can be resolved?"},{"owner":{"account_id":2438972,"reputation":1330,"user_id":2128047,"accept_rate":50,"display_name":"nLee"},"score":0,"creation_date":1671465016,"post_id":74788866,"comment_id":132099367,"body_markdown":"you wouldnt be excluding the entire dependency, just the transitive http-client which you dont need both of on your classpath","body":"you wouldnt be excluding the entire dependency, just the transitive http-client which you dont need both of on your classpath"}],"tags":[],"owner":{"account_id":2438972,"reputation":1330,"user_id":2128047,"accept_rate":50,"display_name":"nLee"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1670953149,"creation_date":1670953149,"answer_id":74788866,"question_id":74788773,"body_markdown":"Looks like you will have to exclude one of the versions of ``http-client`` in your ``pom``\r\n\r\n    implementation(&#39;&lt;dependency&gt;&#39;) {\r\n        exclude group: &#39;&lt;group&gt;&#39;, module: &#39;&lt;module&gt;&#39;\r\n    }\r\n\r\nwhere ``dependency`` is one of:\r\n\r\n    &#39;software.amazon.lambda:powertools-parameters:1.12.3&#39;\r\n    &#39;software.amazon.awssdk:sns:2.15.0&#39;\r\n\r\nYou can run `` gradle dependencies `` to see the dependency tree to figure out which one you want to exclude from","title":"How can I resolve this runtime error &quot;Multiple HTTP implementations were found on the classpath&quot; using software.amazon.awssdk.http.service.impl","body":"<p>Looks like you will have to exclude one of the versions of <code>http-client</code> in your <code>pom</code></p>\n<pre><code>implementation('&lt;dependency&gt;') {\n    exclude group: '&lt;group&gt;', module: '&lt;module&gt;'\n}\n</code></pre>\n<p>where <code>dependency</code> is one of:</p>\n<pre><code>'software.amazon.lambda:powertools-parameters:1.12.3'\n'software.amazon.awssdk:sns:2.15.0'\n</code></pre>\n<p>You can run <code>gradle dependencies</code> to see the dependency tree to figure out which one you want to exclude from</p>\n"},{"tags":[],"owner":{"account_id":24581810,"reputation":1,"user_id":18486820,"display_name":"Mr.OPK"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683645935,"creation_date":1683645841,"answer_id":76210959,"question_id":74788773,"body_markdown":"Can you try explicitly setting below to ensure specific http is used.\r\n\r\n    System.setProperty(&quot;software.amazon.awssdk.http.service.impl&quot;, &quot;software.amazon.awssdk.http.apache.ApacheSdkHttpService&quot;);","title":"How can I resolve this runtime error &quot;Multiple HTTP implementations were found on the classpath&quot; using software.amazon.awssdk.http.service.impl","body":"<p>Can you try explicitly setting below to ensure specific http is used.</p>\n<pre><code>System.setProperty(&quot;software.amazon.awssdk.http.service.impl&quot;, &quot;software.amazon.awssdk.http.apache.ApacheSdkHttpService&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5600200,"reputation":11,"user_id":4436692,"display_name":"rako"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690278126,"creation_date":1690278126,"answer_id":76761408,"question_id":74788773,"body_markdown":"I have experienced the same problem. \r\nThe blog post about AWS SDK turned out to be useful: \r\n&lt;https://aws.amazon.com/blogs/developer/aws-sdk-for-java-2-x-released/&gt;\r\n\r\nThe following one was best in my use case:\r\n\r\n    System.setProperty(&quot;software.amazon.awssdk.http.service.impl&quot;,&quot;software.amazon.awssdk.http.urlconnection.UrlConnectionSdkHttpService&quot;);","title":"How can I resolve this runtime error &quot;Multiple HTTP implementations were found on the classpath&quot; using software.amazon.awssdk.http.service.impl","body":"<p>I have experienced the same problem.\nThe blog post about AWS SDK turned out to be useful:\n<a href=\"https://aws.amazon.com/blogs/developer/aws-sdk-for-java-2-x-released/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/developer/aws-sdk-for-java-2-x-released/</a></p>\n<p>The following one was best in my use case:</p>\n<pre><code>System.setProperty(&quot;software.amazon.awssdk.http.service.impl&quot;,&quot;software.amazon.awssdk.http.urlconnection.UrlConnectionSdkHttpService&quot;);\n</code></pre>\n"}],"owner":{"account_id":27242816,"reputation":11,"user_id":20768684,"display_name":"Lebo Mccallum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2139,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1690278126,"creation_date":1670952696,"question_id":74788773,"body_markdown":"Im having trouble resolving the following runtime error: &quot;Multiple HTTP implementations were found on the classpath. To avoid non-deterministic loading implementations, please explicitly provide an HTTP client via the client builders, set the software.amazon.awssdk.http.service.impl system property with the FQCN of the HTTP service to use as the default, or remove all but one HTTP implementation from the classpath&quot;\r\n\r\nI have the following two dependencies in my gradle.build : \r\n```\r\nimplementation &#39;software.amazon.lambda:powertools-parameters:1.12.3&#39;\r\nimplementation &#39;software.amazon.awssdk:sns:2.15.0&#39;\r\n```\r\nThey both seem to use the default HTTP client and compiler cannot determine which one to use. See below the declaration and use of them in code:\r\n\r\n```\r\n\r\nprivate static SsmClient = SsmClient.builder().region(Region.of((region == null) ? Regions.US_EAST_1.getName() : region)).build();\r\n\r\nprivate static SSMProvider ssmProvider = ParamManager.getSsmProvider(client);\r\n\r\nstatic SnsClient sns = SnsClient.builder().credentialsProvider(DefaultCredentialsProvider.builder().build())\r\n      .region((region == null) ? Region.US_EAST_1 : Region.of(region)).build();\r\n```\r\n\r\n\r\nI cannot remove one from the class path since I need both for my application and I have not succesfully been able to define an awssdk client via the builders.\r\n\r\n\r\n\r\nI tried this but still got same runtime error:\r\n\r\n\r\n```\r\nclient = SsmClient.builder().httpClientBuilder(new SdkHttpClient() {\r\n   @Override\r\n   public void close() {\r\n\r\n   }\r\n\r\n   @Override\r\n   public ExecutableHttpRequest prepareRequest(HttpExecuteRequest request) {\r\n      return null;\r\n   }\r\n})\r\n```\r\n","title":"How can I resolve this runtime error &quot;Multiple HTTP implementations were found on the classpath&quot; using software.amazon.awssdk.http.service.impl","body":"<p>Im having trouble resolving the following runtime error: &quot;Multiple HTTP implementations were found on the classpath. To avoid non-deterministic loading implementations, please explicitly provide an HTTP client via the client builders, set the software.amazon.awssdk.http.service.impl system property with the FQCN of the HTTP service to use as the default, or remove all but one HTTP implementation from the classpath&quot;</p>\n<p>I have the following two dependencies in my gradle.build :</p>\n<pre><code>implementation 'software.amazon.lambda:powertools-parameters:1.12.3'\nimplementation 'software.amazon.awssdk:sns:2.15.0'\n</code></pre>\n<p>They both seem to use the default HTTP client and compiler cannot determine which one to use. See below the declaration and use of them in code:</p>\n<pre><code>\nprivate static SsmClient = SsmClient.builder().region(Region.of((region == null) ? Regions.US_EAST_1.getName() : region)).build();\n\nprivate static SSMProvider ssmProvider = ParamManager.getSsmProvider(client);\n\nstatic SnsClient sns = SnsClient.builder().credentialsProvider(DefaultCredentialsProvider.builder().build())\n      .region((region == null) ? Region.US_EAST_1 : Region.of(region)).build();\n</code></pre>\n<p>I cannot remove one from the class path since I need both for my application and I have not succesfully been able to define an awssdk client via the builders.</p>\n<p>I tried this but still got same runtime error:</p>\n<pre><code>client = SsmClient.builder().httpClientBuilder(new SdkHttpClient() {\n   @Override\n   public void close() {\n\n   }\n\n   @Override\n   public ExecutableHttpRequest prepareRequest(HttpExecuteRequest request) {\n      return null;\n   }\n})\n</code></pre>\n"},{"tags":["java","mysql","hibernate","jdbc"],"comments":[{"owner":{"account_id":19279659,"reputation":332,"user_id":14091920,"display_name":"Fran Na Jaya"},"score":0,"creation_date":1670444381,"post_id":72565479,"comment_id":131880388,"body_markdown":"is there any update related to this question, I facing the same problem but with different constraint","body":"is there any update related to this question, I facing the same problem but with different constraint"}],"answers":[{"tags":[],"owner":{"account_id":7108067,"reputation":732,"user_id":5437055,"accept_rate":100,"display_name":"Ruslan  Gabbazov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1665410816,"creation_date":1665410224,"answer_id":74016049,"question_id":72565479,"body_markdown":"It seems your &quot;OBSOLETE&quot; is passed as Serealized instead of as String cause it&#39;s an Object, which saved as String in the Database. Try to use simple &quot;toString()&quot; by passing this parameter.","title":"Cannot convert string &#39;\\xAC\\xED\\x00\\x05~r...&#39; from binary to utf8mb3","body":"<p>It seems your &quot;OBSOLETE&quot; is passed as Serealized instead of as String cause it's an Object, which saved as String in the Database. Try to use simple &quot;toString()&quot; by passing this parameter.</p>\n"}],"owner":{"account_id":19064371,"reputation":441,"user_id":13919748,"display_name":"javaistaucheineinsel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4556,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1690277785,"creation_date":1654801943,"question_id":72565479,"body_markdown":"I am getting an exception whenever I run this piece of code :\r\n\r\n    StringBuilder sqlQuery = new StringBuilder(&quot;SELECT this_.id as id, this_.number_of_hours as number_of_hours, this_.date_start as date_start, this_.date_end as date_end, this_.date_created as date_created, this_.obsolete as obsolete FROM (&quot;);\r\n    sqlQuery.append(&quot; select tt.* from employee_tracking tt &quot;)\r\n            .append(&quot; inner join contract c on tt.contract_id=c.id &quot;)\r\n            .append(&quot; where tt.obsolete = :OBSOLETE &quot;);\r\n        \r\n    // UNION\r\n    sqlQuery.append(&quot; UNION &quot;);\r\n\r\n    sqlQuery.append(&quot; select tt_.* from employee_tracking tt_ &quot;)\r\n            .append(&quot; inner join contract_extension ce_ on tt_.contract_extension_id=ce_.id &quot;)\r\n            .append(&quot; where tt_.obsolete = :OBSOLETE &quot;);\r\n        \r\n    sqlQuery.append(&quot;) AS this_ ORDER BY id ASC &quot;);\r\n    \r\n    \r\n    SQLQuery query = getSessionFactory().getCurrentSession().createSQLQuery(sqlQuery.toString());\r\n    query.setParameter(&quot;OBSOLETE&quot;, 0);\r\n        \r\n    query.addEntity(EmployeeTracking.class);\r\n    \r\n    List lst = query.list();\r\n\r\nThe exception stack trace :\r\n\r\n    WARN  SqlExceptionHelper - SQL Error: 3854, SQLState: HY000\r\n    ERROR SqlExceptionHelper - Cannot convert string &#39;\\xAC\\xED\\x00\\x05~r...&#39; from binary to utf8mb3\r\n\r\nThis is my server character set config :\r\n\r\n    mysql&gt; use lambda;\r\n    Reading table information for completion of table and column names\r\n    You can turn off this feature to get a quicker startup with -A\r\n    \r\n    Database changed\r\n\r\n    mysql&gt; SHOW VARIABLES WHERE Variable_name LIKE &#39;character\\_set\\_%&#39; OR Variable_name LIKE &#39;collation%&#39;;\r\n    +--------------------------+--------------------+\r\n    | Variable_name            | Value              |\r\n    +--------------------------+--------------------+\r\n    | character_set_client     | utf8mb4            |\r\n    | character_set_connection | utf8mb4            |\r\n    | character_set_database   | utf8mb3            |\r\n    | character_set_filesystem | binary             |\r\n    | character_set_results    | utf8mb4            |\r\n    | character_set_server     | utf8mb4            |\r\n    | character_set_system     | utf8mb3            |\r\n    | collation_connection     | utf8mb4_0900_ai_ci |\r\n    | collation_database       | utf8_danish_ci     |\r\n    | collation_server         | utf8mb4_0900_ai_ci |\r\n    +--------------------------+--------------------+\r\n    10 rows in set (0,00 sec)\r\n\r\n    mysql&gt; SELECT CCSA.character_set_name FROM information_schema.`TABLES` T, information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA\r\n        -&gt; WHERE CCSA.collation_name = T.table_collation AND T.table_schema = &quot;lambda&quot; AND T.table_name = &quot;employee_tracking&quot;;\r\n    +--------------------+\r\n    | CHARACTER_SET_NAME |\r\n    +--------------------+\r\n    | utf8mb4            |\r\n    +--------------------+\r\n    1 row in set (0,01 sec)\r\n\r\nMy jdbcUrl :\r\n\r\n    jdbc:mysql://localhost:3306/lambda?jdbcCompliantTruncation=false&amp;serverTimezone=Europe/Berlin&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;zeroDateTimeBehavior=round\r\n\r\nI am using the following MySQL Server version : \r\n\r\n    ~ % /usr/local/mysql/bin/mysql --version   \r\n    /usr/local/mysql/bin/mysql  Ver 8.0.27 for macos11 on x86_64 (MySQL Community Server - GPL)\r\n\r\nAny help please will be more than appreciated.","title":"Cannot convert string &#39;\\xAC\\xED\\x00\\x05~r...&#39; from binary to utf8mb3","body":"<p>I am getting an exception whenever I run this piece of code :</p>\n<pre><code>StringBuilder sqlQuery = new StringBuilder(&quot;SELECT this_.id as id, this_.number_of_hours as number_of_hours, this_.date_start as date_start, this_.date_end as date_end, this_.date_created as date_created, this_.obsolete as obsolete FROM (&quot;);\nsqlQuery.append(&quot; select tt.* from employee_tracking tt &quot;)\n        .append(&quot; inner join contract c on tt.contract_id=c.id &quot;)\n        .append(&quot; where tt.obsolete = :OBSOLETE &quot;);\n    \n// UNION\nsqlQuery.append(&quot; UNION &quot;);\n\nsqlQuery.append(&quot; select tt_.* from employee_tracking tt_ &quot;)\n        .append(&quot; inner join contract_extension ce_ on tt_.contract_extension_id=ce_.id &quot;)\n        .append(&quot; where tt_.obsolete = :OBSOLETE &quot;);\n    \nsqlQuery.append(&quot;) AS this_ ORDER BY id ASC &quot;);\n\n\nSQLQuery query = getSessionFactory().getCurrentSession().createSQLQuery(sqlQuery.toString());\nquery.setParameter(&quot;OBSOLETE&quot;, 0);\n    \nquery.addEntity(EmployeeTracking.class);\n\nList lst = query.list();\n</code></pre>\n<p>The exception stack trace :</p>\n<pre><code>WARN  SqlExceptionHelper - SQL Error: 3854, SQLState: HY000\nERROR SqlExceptionHelper - Cannot convert string '\\xAC\\xED\\x00\\x05~r...' from binary to utf8mb3\n</code></pre>\n<p>This is my server character set config :</p>\n<pre><code>mysql&gt; use lambda;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\n\nmysql&gt; SHOW VARIABLES WHERE Variable_name LIKE 'character\\_set\\_%' OR Variable_name LIKE 'collation%';\n+--------------------------+--------------------+\n| Variable_name            | Value              |\n+--------------------------+--------------------+\n| character_set_client     | utf8mb4            |\n| character_set_connection | utf8mb4            |\n| character_set_database   | utf8mb3            |\n| character_set_filesystem | binary             |\n| character_set_results    | utf8mb4            |\n| character_set_server     | utf8mb4            |\n| character_set_system     | utf8mb3            |\n| collation_connection     | utf8mb4_0900_ai_ci |\n| collation_database       | utf8_danish_ci     |\n| collation_server         | utf8mb4_0900_ai_ci |\n+--------------------------+--------------------+\n10 rows in set (0,00 sec)\n\nmysql&gt; SELECT CCSA.character_set_name FROM information_schema.`TABLES` T, information_schema.`COLLATION_CHARACTER_SET_APPLICABILITY` CCSA\n    -&gt; WHERE CCSA.collation_name = T.table_collation AND T.table_schema = &quot;lambda&quot; AND T.table_name = &quot;employee_tracking&quot;;\n+--------------------+\n| CHARACTER_SET_NAME |\n+--------------------+\n| utf8mb4            |\n+--------------------+\n1 row in set (0,01 sec)\n</code></pre>\n<p>My jdbcUrl :</p>\n<pre><code>jdbc:mysql://localhost:3306/lambda?jdbcCompliantTruncation=false&amp;serverTimezone=Europe/Berlin&amp;allowPublicKeyRetrieval=true&amp;useSSL=false&amp;zeroDateTimeBehavior=round\n</code></pre>\n<p>I am using the following MySQL Server version :</p>\n<pre><code>~ % /usr/local/mysql/bin/mysql --version   \n/usr/local/mysql/bin/mysql  Ver 8.0.27 for macos11 on x86_64 (MySQL Community Server - GPL)\n</code></pre>\n<p>Any help please will be more than appreciated.</p>\n"},{"tags":["java","maven","continuous-integration","cicd","circleci"],"answers":[{"comments":[{"owner":{"account_id":7856545,"reputation":1696,"user_id":5938195,"accept_rate":73,"display_name":"Kuldeep Yadav"},"score":0,"creation_date":1689895332,"post_id":76729710,"comment_id":135281744,"body_markdown":"it shows following lint errors:\n```\nError calling workflow: &#39;maven&#39;\nError calling job: &#39;maven/test&#39;\nUnexpected executor invocation format\nThe value of `name` must be a string\nExamples of correct executor invocation:\n  executor: string-executor-name\n  executor: {name: string-executor-name}\n  executor: &lt;&lt; parameters.executor-type-parameter &gt;&gt;\n\n```","body":"it shows following lint errors: ``` Error calling workflow: &#39;maven&#39; Error calling job: &#39;maven/test&#39; Unexpected executor invocation format The value of <code>name</code> must be a string Examples of correct executor invocation:   executor: string-executor-name   executor: {name: string-executor-name}   executor: &lt;&lt; parameters.executor-type-parameter &gt;&gt;  ```"},{"owner":{"account_id":323478,"reputation":605,"user_id":643516,"display_name":"zmarkan"},"score":0,"creation_date":1690277188,"post_id":76729710,"comment_id":135327414,"body_markdown":"I believe the original config around executor definition was wrong - I updated it now so it should work","body":"I believe the original config around executor definition was wrong - I updated it now so it should work"}],"tags":[],"owner":{"account_id":323478,"reputation":605,"user_id":643516,"display_name":"zmarkan"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690277157,"creation_date":1689855040,"answer_id":76729710,"question_id":76717216,"body_markdown":"Looks like the project expects JDK 17, which isn&#39;t available in the executor.\r\n\r\nAs per the [docs in the maven orb for CircleCI][1], you can pass in an executor which can specify JDK version, you should specify JDK 17.\r\n\r\n \r\n\r\n    version: 2.1\r\n    orbs:\r\n      maven: circleci/maven@1.4.1\r\n      slack: circleci/slack@4.4.4\r\n      docker: circleci/docker@2.2.0\r\n    \r\n    workflows:\r\n      maven:\r\n        jobs:\r\n          - maven/test:\r\n              executor: \r\n                name: maven/default\r\n                tag: &#39;17.0&#39;\r\n              maven_command: mvn\r\n              command: clean install\r\n              settings_file: settings.xml\r\n              verify_dependencies: false\r\n\r\n\r\nWhere the maven/default executor is the cimg/openjdj convenience Docker image, with these available tags: https://circleci.com/developer/images/image/cimg/openjdk\r\n\r\nHope this helps!\r\n\r\n  [1]: https://circleci.com/developer/orbs/orb/circleci/maven\r\n\r\n","title":"Maven clean install in CircleCI","body":"<p>Looks like the project expects JDK 17, which isn't available in the executor.</p>\n<p>As per the <a href=\"https://circleci.com/developer/orbs/orb/circleci/maven\" rel=\"nofollow noreferrer\">docs in the maven orb for CircleCI</a>, you can pass in an executor which can specify JDK version, you should specify JDK 17.</p>\n<pre><code>version: 2.1\norbs:\n  maven: circleci/maven@1.4.1\n  slack: circleci/slack@4.4.4\n  docker: circleci/docker@2.2.0\n\nworkflows:\n  maven:\n    jobs:\n      - maven/test:\n          executor: \n            name: maven/default\n            tag: '17.0'\n          maven_command: mvn\n          command: clean install\n          settings_file: settings.xml\n          verify_dependencies: false\n</code></pre>\n<p>Where the maven/default executor is the cimg/openjdj convenience Docker image, with these available tags: <a href=\"https://circleci.com/developer/images/image/cimg/openjdk\" rel=\"nofollow noreferrer\">https://circleci.com/developer/images/image/cimg/openjdk</a></p>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":7856545,"reputation":1696,"user_id":5938195,"accept_rate":73,"display_name":"Kuldeep Yadav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690277157,"creation_date":1689725670,"question_id":76717216,"body_markdown":"I am trying CircleCI to set build pipeline for my maven project.\r\nThe intent is to run `mvn clean install -s settings.xml`\r\n\r\n\r\n\r\nmy config.yml looks like following\r\n\r\n```\r\nversion: 2.1\r\norbs:\r\n  maven: circleci/maven@1.4.1\r\n  slack: circleci/slack@4.4.4\r\n  docker: circleci/docker@2.2.0\r\n\r\nworkflows:\r\n  maven:\r\n    jobs:\r\n      - maven/test:\r\n          maven_command: mvn\r\n          command: clean install\r\n          settings_file: settings.xml\r\n          verify_dependencies: false\r\n```\r\n\r\nBut it is failing because of wrong target version 17\r\n\r\n```\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 334 source files to /home/circleci/project/target/classes\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  04:30 min\r\n[INFO] Finished at: 2023-07-19T00:11:16Z\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project *****: Fatal error compiling: error: invalid target release: 17 -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n```\r\n\r\nWhat should I change into my config to use java17?","title":"Maven clean install in CircleCI","body":"<p>I am trying CircleCI to set build pipeline for my maven project.\nThe intent is to run <code>mvn clean install -s settings.xml</code></p>\n<p>my config.yml looks like following</p>\n<pre><code>version: 2.1\norbs:\n  maven: circleci/maven@1.4.1\n  slack: circleci/slack@4.4.4\n  docker: circleci/docker@2.2.0\n\nworkflows:\n  maven:\n    jobs:\n      - maven/test:\n          maven_command: mvn\n          command: clean install\n          settings_file: settings.xml\n          verify_dependencies: false\n</code></pre>\n<p>But it is failing because of wrong target version 17</p>\n<pre><code>[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 334 source files to /home/circleci/project/target/classes\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  04:30 min\n[INFO] Finished at: 2023-07-19T00:11:16Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project *****: Fatal error compiling: error: invalid target release: 17 -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n</code></pre>\n<p>What should I change into my config to use java17?</p>\n"},{"tags":["javascript","java","amazon-web-services","spring-mvc","amazon-ec2"],"comments":[{"owner":{"account_id":13055830,"reputation":173,"user_id":9434729,"display_name":"Jelmen"},"score":0,"creation_date":1690272024,"post_id":76760163,"comment_id":135326279,"body_markdown":"do the alert need to be fired from inside the JVM application? An OFM exception indicates that the application is not running as expected any more - so the altering system should be outside the ecosystem of the JVM. You can use for example the ELK-Stack from Elastic: https://www.elastic.co/what-is/elk-stack","body":"do the alert need to be fired from inside the JVM application? An OFM exception indicates that the application is not running as expected any more - so the altering system should be outside the ecosystem of the JVM. You can use for example the ELK-Stack from Elastic: <a href=\"https://www.elastic.co/what-is/elk-stack\" rel=\"nofollow noreferrer\">elastic.co/what-is/elk-stack</a>"},{"owner":{"account_id":17634420,"reputation":89,"user_id":12797947,"display_name":"bateda"},"score":0,"creation_date":1690273582,"post_id":76760163,"comment_id":135326612,"body_markdown":"No for the alert i have to use Cloudwatch Metrics so when i will get the error in logs i have to put that on Cloudwatch Metrics.","body":"No for the alert i have to use Cloudwatch Metrics so when i will get the error in logs i have to put that on Cloudwatch Metrics."},{"owner":{"account_id":13055830,"reputation":173,"user_id":9434729,"display_name":"Jelmen"},"score":0,"creation_date":1690273735,"post_id":76760163,"comment_id":135326647,"body_markdown":"than you should add this context information to the question. I can not help you with Cloudwatch","body":"than you should add this context information to the question. I can not help you with Cloudwatch"},{"owner":{"account_id":17634420,"reputation":89,"user_id":12797947,"display_name":"bateda"},"score":0,"creation_date":1690274163,"post_id":76760163,"comment_id":135326727,"body_markdown":"Alert work i can do that, my doubt is how i can catch the Out of Memory in java class as it can be throw from any class in the project i can&#39;t update each class with Out of Memory check.","body":"Alert work i can do that, my doubt is how i can catch the Out of Memory in java class as it can be throw from any class in the project i can&#39;t update each class with Out of Memory check."}],"owner":{"account_id":17634420,"reputation":89,"user_id":12797947,"display_name":"bateda"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690277086,"creation_date":1690268434,"question_id":76760163,"body_markdown":"We have one requirement where if we get the Out of Memory from JVM then we have to create the Alert. now my issue is Out of Memory error we can get from any java class and my requirement is when we get Out of Memory in console logs i have to create the alert.\r\nis there any way to read the run time logs and found specific error and create a alert. \r\n\r\nBasically In my project I want to put global try catch for Out of Memory check.","title":"How to read runtime log file and create a alert","body":"<p>We have one requirement where if we get the Out of Memory from JVM then we have to create the Alert. now my issue is Out of Memory error we can get from any java class and my requirement is when we get Out of Memory in console logs i have to create the alert.\nis there any way to read the run time logs and found specific error and create a alert.</p>\n<p>Basically In my project I want to put global try catch for Out of Memory check.</p>\n"},{"tags":["java","spring-boot","sdk","open-telemetry","jaeger"],"comments":[{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":1,"creation_date":1687530607,"post_id":76538610,"comment_id":134954520,"body_markdown":"Not sure why you&#39;re getting more spans.\nHowever, have you tried using existing instrumentation libraries, like https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/kafka/kafka-clients/kafka-clients-2.6/library for kafka?","body":"Not sure why you&#39;re getting more spans. However, have you tried using existing instrumentation libraries, like <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation/tree/main/instrumentation/kafka/kafka-clients/kafka-clients-2.6/library\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java-instrumentation&zwnj;&#8203;/&hellip;</a> for kafka?"}],"answers":[{"tags":[],"owner":{"display_name":"user20174493"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1688476868,"creation_date":1688476868,"answer_id":76613082,"question_id":76538610,"body_markdown":"Late but i solved: I stupidly setted the exporter as receiver so it stucks itself into a loop! :(","title":"Continuosly making spans until shutdown","body":"<p>Late but i solved: I stupidly setted the exporter as receiver so it stucks itself into a loop! :(</p>\n"}],"owner":{"display_name":"user20174493"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76613082,"answer_count":1,"score":0,"last_activity_date":1690276778,"creation_date":1687511150,"question_id":76538610,"body_markdown":"Hi I&#39;m learning Opentelemtry using Java SpringBoot, I faced an issue when generating spans and exporting them to JaegerUI.\r\nThis is my service:\r\n\r\n    \r\n        // Iterates with a cursor a list of documents and returns them in json\r\n        // then produces a message with kafka and exports telemetry datas.\r\n        @Override\r\n        public List&lt;InsaccatiModel&gt; findAll() {\r\n    \r\n            List&lt;InsaccatiModel&gt; insaccatiModels = new ArrayList&lt;&gt;();\r\n            MongoCursor&lt;Document&gt; cursor = null;\r\n    \r\n            try {\r\n                cursor = mongoCollection.find().iterator();\r\n    \r\n                while (cursor.hasNext()) {\r\n                    Document document = cursor.next();\r\n                    insaccatiModels.add(mapper.readValue(document.toJson(), InsaccatiModel.class));\r\n                }\r\n            } catch (JsonProcessingException e) {\r\n                throw new RuntimeException(e);\r\n            } finally {\r\n                cursor.close();\r\n            }\r\n    \r\n            // kafka producer\r\n            Producer producer = new Producer();\r\n            producer.producerMethod(kafkaServer, message);\r\n    \r\n            // instrumentation: spans\r\n            Span span = tracer.spanBuilder(&quot;GET span&quot;).setSpanKind(SpanKind.PRODUCER).startSpan()\r\n            .setAttribute(&quot;http.method&quot;, &quot;GET&quot;)\r\n            .setAttribute(&quot;http.url&quot;, &quot;http://localhost:8080/app/all&quot;);\r\n            span.end();\r\n    \r\n            // instrumentation: metrics\r\n            LongCounter counter = meter\r\n                    .counterBuilder(&quot;processed&quot;)\r\n                    .setDescription(&quot;Description&quot;)\r\n                    .setUnit(&quot;1&quot;)\r\n                    .build();\r\n    \r\n            Attributes attributes = Attributes.of(AttributeKey.stringKey(&quot;Key&quot;), &quot;qualcosa&quot;);\r\n            counter.add(123, attributes);\r\n    \r\n            return insaccatiModels;\r\n        }\r\n\r\nAnd this is my OpenTelemetryConfig:\r\n\r\n\r\n\r\n\r\n        @Bean\r\n        public OpenTelemetry openTelemetry() {\r\n            Resource resource = Resource.getDefault()\r\n                    .merge(Resource.create(Attributes.of(ResourceAttributes.SERVICE_NAME, &quot;insaccati&quot;)));\r\n    \r\n            SdkTracerProvider sdkTracerProvider = SdkTracerProvider.builder()\r\n                    .addSpanProcessor(BatchSpanProcessor.builder(OtlpGrpcSpanExporter.builder().build()).build())\r\n                    .setResource(resource)\r\n                    .build();\r\n    \r\n            SdkMeterProvider sdkMeterProvider = SdkMeterProvider.builder()\r\n                    .registerMetricReader(PeriodicMetricReader.builder(OtlpGrpcMetricExporter.builder().build()).build())\r\n                    .setResource(resource)\r\n                    .build();\r\n    \r\n            OpenTelemetry openTelemetry = OpenTelemetrySdk.builder()\r\n                    .setTracerProvider(sdkTracerProvider)\r\n                    .setMeterProvider(sdkMeterProvider)\r\n                    .setPropagators(ContextPropagators.create(W3CTraceContextPropagator.getInstance()))\r\n                    .buildAndRegisterGlobal();\r\n    \r\n            return openTelemetry;\r\n        }\r\n    }\r\n\r\nThe issue is that every time I make a GET request using Insomnia the code generates continuosly spans into JaegerUI until i shutdown my service.\r\nI tried to shutdown my SdkTracerProvider using:\r\n\r\n    SdkTracerProvider.shutdown();\r\n\r\nBut it makes my service not generating spans, where can it be the problem? Sorry for my English. :)","title":"Continuosly making spans until shutdown","body":"<p>Hi I'm learning Opentelemtry using Java SpringBoot, I faced an issue when generating spans and exporting them to JaegerUI.\nThis is my service:</p>\n<pre><code>    // Iterates with a cursor a list of documents and returns them in json\n    // then produces a message with kafka and exports telemetry datas.\n    @Override\n    public List&lt;InsaccatiModel&gt; findAll() {\n\n        List&lt;InsaccatiModel&gt; insaccatiModels = new ArrayList&lt;&gt;();\n        MongoCursor&lt;Document&gt; cursor = null;\n\n        try {\n            cursor = mongoCollection.find().iterator();\n\n            while (cursor.hasNext()) {\n                Document document = cursor.next();\n                insaccatiModels.add(mapper.readValue(document.toJson(), InsaccatiModel.class));\n            }\n        } catch (JsonProcessingException e) {\n            throw new RuntimeException(e);\n        } finally {\n            cursor.close();\n        }\n\n        // kafka producer\n        Producer producer = new Producer();\n        producer.producerMethod(kafkaServer, message);\n\n        // instrumentation: spans\n        Span span = tracer.spanBuilder(&quot;GET span&quot;).setSpanKind(SpanKind.PRODUCER).startSpan()\n        .setAttribute(&quot;http.method&quot;, &quot;GET&quot;)\n        .setAttribute(&quot;http.url&quot;, &quot;http://localhost:8080/app/all&quot;);\n        span.end();\n\n        // instrumentation: metrics\n        LongCounter counter = meter\n                .counterBuilder(&quot;processed&quot;)\n                .setDescription(&quot;Description&quot;)\n                .setUnit(&quot;1&quot;)\n                .build();\n\n        Attributes attributes = Attributes.of(AttributeKey.stringKey(&quot;Key&quot;), &quot;qualcosa&quot;);\n        counter.add(123, attributes);\n\n        return insaccatiModels;\n    }\n</code></pre>\n<p>And this is my OpenTelemetryConfig:</p>\n<pre><code>    @Bean\n    public OpenTelemetry openTelemetry() {\n        Resource resource = Resource.getDefault()\n                .merge(Resource.create(Attributes.of(ResourceAttributes.SERVICE_NAME, &quot;insaccati&quot;)));\n\n        SdkTracerProvider sdkTracerProvider = SdkTracerProvider.builder()\n                .addSpanProcessor(BatchSpanProcessor.builder(OtlpGrpcSpanExporter.builder().build()).build())\n                .setResource(resource)\n                .build();\n\n        SdkMeterProvider sdkMeterProvider = SdkMeterProvider.builder()\n                .registerMetricReader(PeriodicMetricReader.builder(OtlpGrpcMetricExporter.builder().build()).build())\n                .setResource(resource)\n                .build();\n\n        OpenTelemetry openTelemetry = OpenTelemetrySdk.builder()\n                .setTracerProvider(sdkTracerProvider)\n                .setMeterProvider(sdkMeterProvider)\n                .setPropagators(ContextPropagators.create(W3CTraceContextPropagator.getInstance()))\n                .buildAndRegisterGlobal();\n\n        return openTelemetry;\n    }\n}\n</code></pre>\n<p>The issue is that every time I make a GET request using Insomnia the code generates continuosly spans into JaegerUI until i shutdown my service.\nI tried to shutdown my SdkTracerProvider using:</p>\n<pre><code>SdkTracerProvider.shutdown();\n</code></pre>\n<p>But it makes my service not generating spans, where can it be the problem? Sorry for my English. :)</p>\n"},{"tags":["java","android","unity-game-engine","java-home"],"comments":[{"owner":{"account_id":19259266,"reputation":1853,"user_id":14075508,"display_name":"Alex Vergara"},"score":0,"creation_date":1689849057,"post_id":76720878,"comment_id":135272841,"body_markdown":"check if some of your paths contains white spaces (I am assuming that you&#39;re talking about Windows), that they typically are found in the username. P.ej: `C:/Users/Slim Hidri/...` sometimes Windows struggles with those paths, so be careful to correctly scape them","body":"check if some of your paths contains white spaces (I am assuming that you&#39;re talking about Windows), that they typically are found in the username. P.ej: <code>C:&#47;Users&#47;Slim Hidri&#47;...</code> sometimes Windows struggles with those paths, so be careful to correctly scape them"}],"answers":[{"tags":[],"owner":{"account_id":9476185,"reputation":1,"user_id":7045470,"display_name":"Slim Hidri"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690276760,"creation_date":1689767982,"answer_id":76721070,"question_id":76720878,"body_markdown":"I just did the poorest solution, just copy the new editor&#39;s OpenJDK and create a fake directory exact same as the problem pointing to it, and just paste it there. If there&#39;s any better solutions just let me know !","title":"Unity, Android Resovler, JDK Path won&#39;t update to new directory","body":"<p>I just did the poorest solution, just copy the new editor's OpenJDK and create a fake directory exact same as the problem pointing to it, and just paste it there. If there's any better solutions just let me know !</p>\n"}],"owner":{"account_id":9476185,"reputation":1,"user_id":7045470,"display_name":"Slim Hidri"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690276760,"creation_date":1689766557,"question_id":76720878,"body_markdown":"I know this question was asked a couple of times before, but I just cant get it to work for a couple of days now.\r\n\r\nI just opened a project with a different version of Unity, (my fault), the JDK still pointing at the old directory and it just won&#39;t update no matter what i do !\r\n\r\n[Here&#39;s an idea of what&#39;s going on](https://i.stack.imgur.com/Uf5VT.png)\r\n\r\n\r\n\r\nI&#39;ve tried installing the JDK from their website and pointing to it, nope\r\n\r\nI&#39;ve updated the environment variables pointing to the Unity OpenJDK, nothing new.\r\n\r\nI&#39;ve followed some threads suggesting to uncheck then check again the JDK part in &quot;External tools&quot;, nothing new.\r\n\r\nCmd `echo %JAVA_HOME%` is pointing to the right location\r\n\r\nI&#39;ve even deleted UnityHub and UnityEditor and reinstalled them, nothing has changed.\r\n\r\nIs there like a temp file somewhere storing the information of the location of JDK somewhere maybe i can change it manually?\r\n\r\nor what else can I try?\r\n\r\nI assume if i install the same version of the currently pointed location,\r\nand put it in the same path it might work, but there must be a different way!","title":"Unity, Android Resovler, JDK Path won&#39;t update to new directory","body":"<p>I know this question was asked a couple of times before, but I just cant get it to work for a couple of days now.</p>\n<p>I just opened a project with a different version of Unity, (my fault), the JDK still pointing at the old directory and it just won't update no matter what i do !</p>\n<p><a href=\"https://i.stack.imgur.com/Uf5VT.png\" rel=\"nofollow noreferrer\">Here's an idea of what's going on</a></p>\n<p>I've tried installing the JDK from their website and pointing to it, nope</p>\n<p>I've updated the environment variables pointing to the Unity OpenJDK, nothing new.</p>\n<p>I've followed some threads suggesting to uncheck then check again the JDK part in &quot;External tools&quot;, nothing new.</p>\n<p>Cmd <code>echo %JAVA_HOME%</code> is pointing to the right location</p>\n<p>I've even deleted UnityHub and UnityEditor and reinstalled them, nothing has changed.</p>\n<p>Is there like a temp file somewhere storing the information of the location of JDK somewhere maybe i can change it manually?</p>\n<p>or what else can I try?</p>\n<p>I assume if i install the same version of the currently pointed location,\nand put it in the same path it might work, but there must be a different way!</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"account_id":2242741,"reputation":6993,"user_id":1976843,"display_name":"JEY"},"score":0,"creation_date":1603285942,"post_id":64463733,"comment_id":113988508,"body_markdown":"did you add mockito-inline as dependencies ?","body":"did you add mockito-inline as dependencies ?"},{"owner":{"account_id":17294609,"reputation":257,"user_id":12525549,"display_name":"Ehrakis"},"score":0,"creation_date":1603285999,"post_id":64463733,"comment_id":113988536,"body_markdown":"Yes I did, I will edit my question to add my POM.xml file.","body":"Yes I did, I will edit my question to add my POM.xml file."}],"answers":[{"comments":[{"owner":{"account_id":17294609,"reputation":257,"user_id":12525549,"display_name":"Ehrakis"},"score":0,"creation_date":1603288864,"post_id":64464855,"comment_id":113990131,"body_markdown":"Thank you so much for this answer! I knew that mocking static method was not a good practice but I didn&#39;t know it was that slow. Thanks for explaining the proper way to do it, I will implement it.","body":"Thank you so much for this answer! I knew that mocking static method was not a good practice but I didn&#39;t know it was that slow. Thanks for explaining the proper way to do it, I will implement it."}],"tags":[],"owner":{"account_id":3345492,"reputation":4077,"user_id":2810730,"display_name":"Oleksii Zghurskyi"},"comment_count":1,"down_vote_count":0,"up_vote_count":23,"is_accepted":true,"score":23,"last_activity_date":1603300750,"creation_date":1603287672,"answer_id":64464855,"question_id":64463733,"body_markdown":"In general mocking static calls is the last resort, that is not supposed to be used as default approach. \r\n\r\nFor example, for testing the code, that works with file system, there are better means. E.g. depending on the `junit` version either use [`TemporaryFolder` rule](https://junit.org/junit4/javadoc/4.13/org/junit/rules/TemporaryFolder.html) or [`@TempDir` annotation](https://junit.org/junit5/docs/5.4.0/api/org/junit/jupiter/api/io/TempDir.html).\r\n\r\nAlso, please note, that `Mockito.mockStatic` might significantly slow down your tests (e.g. look at the notes below).\r\n\r\nHaving said the caution above, find the snippet below, that shows how to test, that file got removed.\r\n\r\n```\r\nclass FileRemover {\r\n    public static void deleteFile(Path filePath) throws IOException {\r\n        Files.delete(filePath);\r\n    }\r\n}\r\n\r\nclass FileRemoverTest {\r\n\r\n    @TempDir\r\n    Path directory;\r\n\r\n    @Test\r\n    void fileIsRemovedWithTemporaryDirectory() throws IOException {\r\n        Path fileToDelete = directory.resolve(&quot;fileToDelete&quot;);\r\n        Files.createFile(fileToDelete);\r\n\r\n        FileRemover.deleteFile(fileToDelete);\r\n\r\n        assertFalse(Files.exists(fileToDelete));\r\n    }\r\n\r\n    @Test\r\n    void fileIsRemovedWithMockStatic() throws IOException {\r\n        Path fileToDelete = Paths.get(&quot;fileToDelete&quot;);\r\n        try (MockedStatic&lt;Files&gt; removerMock = Mockito.mockStatic(Files.class)) {\r\n            removerMock.when(() -&gt; Files.delete(fileToDelete)).thenAnswer((Answer&lt;Void&gt;) invocation -&gt; null);\r\n            // alternatively\r\n            // removerMock.when(() -&gt; Files.delete(fileToDelete)).thenAnswer(Answers.RETURNS_DEFAULTS);\r\n\r\n            FileRemover.deleteFile(fileToDelete);\r\n\r\n            removerMock.verify(() -&gt; Files.delete(fileToDelete));\r\n        }\r\n    }\r\n}\r\n```\r\n**Notes:**\r\n\r\n1. `Mockito.mockStatic` is available in Mockito 3.4 and above, so check you&#39;re using correct version.\r\n\r\n2. The snippet deliberatly shows two approaches: `@TempDir` and `Mockito.mockStatic`. When run both tests you&#39;ll notice that `Mockito.mockStatic` is much slower. E.g. on my system test with `Mockito.mockStatic` runs around 900 msec vs 10 msec for `@TempDir`.\r\n","title":"Mockito Mock a static void method with Mockito.mockStatic()","body":"<p>In general mocking static calls is the last resort, that is not supposed to be used as default approach.</p>\n<p>For example, for testing the code, that works with file system, there are better means. E.g. depending on the <code>junit</code> version either use <a href=\"https://junit.org/junit4/javadoc/4.13/org/junit/rules/TemporaryFolder.html\" rel=\"noreferrer\"><code>TemporaryFolder</code> rule</a> or <a href=\"https://junit.org/junit5/docs/5.4.0/api/org/junit/jupiter/api/io/TempDir.html\" rel=\"noreferrer\"><code>@TempDir</code> annotation</a>.</p>\n<p>Also, please note, that <code>Mockito.mockStatic</code> might significantly slow down your tests (e.g. look at the notes below).</p>\n<p>Having said the caution above, find the snippet below, that shows how to test, that file got removed.</p>\n<pre><code>class FileRemover {\n    public static void deleteFile(Path filePath) throws IOException {\n        Files.delete(filePath);\n    }\n}\n\nclass FileRemoverTest {\n\n    @TempDir\n    Path directory;\n\n    @Test\n    void fileIsRemovedWithTemporaryDirectory() throws IOException {\n        Path fileToDelete = directory.resolve(&quot;fileToDelete&quot;);\n        Files.createFile(fileToDelete);\n\n        FileRemover.deleteFile(fileToDelete);\n\n        assertFalse(Files.exists(fileToDelete));\n    }\n\n    @Test\n    void fileIsRemovedWithMockStatic() throws IOException {\n        Path fileToDelete = Paths.get(&quot;fileToDelete&quot;);\n        try (MockedStatic&lt;Files&gt; removerMock = Mockito.mockStatic(Files.class)) {\n            removerMock.when(() -&gt; Files.delete(fileToDelete)).thenAnswer((Answer&lt;Void&gt;) invocation -&gt; null);\n            // alternatively\n            // removerMock.when(() -&gt; Files.delete(fileToDelete)).thenAnswer(Answers.RETURNS_DEFAULTS);\n\n            FileRemover.deleteFile(fileToDelete);\n\n            removerMock.verify(() -&gt; Files.delete(fileToDelete));\n        }\n    }\n}\n</code></pre>\n<p><strong>Notes:</strong></p>\n<ol>\n<li><p><code>Mockito.mockStatic</code> is available in Mockito 3.4 and above, so check you're using correct version.</p>\n</li>\n<li><p>The snippet deliberatly shows two approaches: <code>@TempDir</code> and <code>Mockito.mockStatic</code>. When run both tests you'll notice that <code>Mockito.mockStatic</code> is much slower. E.g. on my system test with <code>Mockito.mockStatic</code> runs around 900 msec vs 10 msec for <code>@TempDir</code>.</p>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":5705595,"reputation":6905,"user_id":4509268,"accept_rate":94,"display_name":"Jad Chahine"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690276716,"creation_date":1690276716,"answer_id":76761225,"question_id":64463733,"body_markdown":"Use mockStatic and then specify the mock in the returned instance.\r\n\r\n```\r\ntry (MockedStatic&lt;Files&gt; mockFiles = Mockito.mockStatic(Files.class)) {\r\n    mockFiles.when(() -&gt; Files.delete(anyString()))\r\n                     .then(invocationOnMock -&gt; null);\r\n}\r\n```\r\n","title":"Mockito Mock a static void method with Mockito.mockStatic()","body":"<p>Use mockStatic and then specify the mock in the returned instance.</p>\n<pre><code>try (MockedStatic&lt;Files&gt; mockFiles = Mockito.mockStatic(Files.class)) {\n    mockFiles.when(() -&gt; Files.delete(anyString()))\n                     .then(invocationOnMock -&gt; null);\n}\n</code></pre>\n"}],"owner":{"account_id":17294609,"reputation":257,"user_id":12525549,"display_name":"Ehrakis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29278,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":64464855,"answer_count":2,"score":16,"last_activity_date":1690276716,"creation_date":1603283953,"question_id":64463733,"body_markdown":"I&#39;m using Spring Boot and in one of my unit test, I need to mock the `Files.delete(somePath)` function. Which is a static void method.\r\n\r\nI know that with Mockito it is possible to mock void method:\r\n```Java\r\ndoNothing().when(MyClass.class).myVoidMethod()\r\n```\r\n\r\nAnd since July 10th 2020, it is possible to mock static method:\r\n```Java\r\ntry (MockedStatic&lt;MyStaticClass&gt; mockedStaticClass = Mockito.mockStatic(MyStaticClass.class)) {\r\n    mockedStaticClass.when(MyStaticClass::giveMeANumber).thenReturn(1L);\r\n    assertThat(MyStaticClass.giveMeANumber()).isEqualTo(1L);\r\n  }\r\n```\r\n\r\nBut I can&#39;t manage to mock a static void mehtod such as `Files.delete(somePath)`.\r\n\r\nThis is my pom.xml file (only test related dependencies):\r\n```yml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.5.15&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;3.5.15&lt;/version&gt;\r\n\t&lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n    &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\r\n    &lt;version&gt;3.5.15&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nIs there a way to mock static void methods without using PowerMockito ?  \r\nIf it is possible, what is the correct syntax to do so ?","title":"Mockito Mock a static void method with Mockito.mockStatic()","body":"<p>I'm using Spring Boot and in one of my unit test, I need to mock the <code>Files.delete(somePath)</code> function. Which is a static void method.</p>\n<p>I know that with Mockito it is possible to mock void method:</p>\n<pre><code>doNothing().when(MyClass.class).myVoidMethod()\n</code></pre>\n<p>And since July 10th 2020, it is possible to mock static method:</p>\n<pre><code>try (MockedStatic&lt;MyStaticClass&gt; mockedStaticClass = Mockito.mockStatic(MyStaticClass.class)) {\n    mockedStaticClass.when(MyStaticClass::giveMeANumber).thenReturn(1L);\n    assertThat(MyStaticClass.giveMeANumber()).isEqualTo(1L);\n  }\n</code></pre>\n<p>But I can't manage to mock a static void mehtod such as <code>Files.delete(somePath)</code>.</p>\n<p>This is my pom.xml file (only test related dependencies):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-inline&lt;/artifactId&gt;\n    &lt;version&gt;3.5.15&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n    &lt;version&gt;3.5.15&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n    &lt;artifactId&gt;mockito-junit-jupiter&lt;/artifactId&gt;\n    &lt;version&gt;3.5.15&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;version&gt;2.2.6.RELEASE&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Is there a way to mock static void methods without using PowerMockito ?<br />\nIf it is possible, what is the correct syntax to do so ?</p>\n"},{"tags":["java","stream"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1679386001,"post_id":75798141,"comment_id":133707801,"body_markdown":"I don’t see any point in forcing stream operations into this code. It’s just fine as it was. If you want, you may replace the inner loop with `order.getProducts(),forEach(product -&gt; product.setOrderDate(order.getCreated()));`.","body":"I don’t see any point in forcing stream operations into this code. It’s just fine as it was. If you want, you may replace the inner loop with <code>order.getProducts(),forEach(product -&gt; product.setOrderDate(order.getCreated()));</code>."}],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690276457,"creation_date":1690276457,"answer_id":76761193,"question_id":75798141,"body_markdown":"Extracting the required value which needs to be mapped and holding it for all sub-records and then flattening the sub-records works out.For holding the common required value you could use apache utilities like [this](https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Pair.html) or use inbuilt jdk entry\r\n```\r\n        orders.stream()\r\n                .flatMap(order-&gt;order.getProducts()\r\n                                        .stream()\r\n                                        .map(product-&gt;new AbstractMap.SimpleEntry&lt;String, Product&gt;(order.getOrderDate(),product)))\r\n                .forEach(entry-&gt;entry.getValue().setOrderDate(entry.getKey()));\r\n```","title":"Set the order date of a product from an order","body":"<p>Extracting the required value which needs to be mapped and holding it for all sub-records and then flattening the sub-records works out.For holding the common required value you could use apache utilities like <a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/tuple/Pair.html\" rel=\"nofollow noreferrer\">this</a> or use inbuilt jdk entry</p>\n<pre><code>        orders.stream()\n                .flatMap(order-&gt;order.getProducts()\n                                        .stream()\n                                        .map(product-&gt;new AbstractMap.SimpleEntry&lt;String, Product&gt;(order.getOrderDate(),product)))\n                .forEach(entry-&gt;entry.getValue().setOrderDate(entry.getKey()));\n</code></pre>\n"}],"owner":{"display_name":"user12312852"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690276457,"creation_date":1679382132,"question_id":75798141,"body_markdown":"I got a list with orders and each order has a list of products. What I try to do is to set the &quot;orderDate&quot; attribute of the product with the &quot;created&quot; attribute of the order. I done this using a for loop but I want to do this by using a stream and I don&#39;t know how to access the previous elements from the stream. \r\n\r\nHere is my code:\r\n\r\n    //FOR EVERY PRODUCT SET THE ORDER CREATE DATE\r\n        for(Order order:orders){\r\n            for(Product product : order.getProducts()){\r\n                product.setOrderDate(order.getCreated());\r\n            }\r\n        }\r\n\r\n        orders.stream()\r\n                .map(Order::getProducts)\r\n                .flatMap(Collection::stream)\r\n                .map(product -&gt; {product.setOrderDate(Order::getCreated)}\r\n\r\n","title":"Set the order date of a product from an order","body":"<p>I got a list with orders and each order has a list of products. What I try to do is to set the &quot;orderDate&quot; attribute of the product with the &quot;created&quot; attribute of the order. I done this using a for loop but I want to do this by using a stream and I don't know how to access the previous elements from the stream.</p>\n<p>Here is my code:</p>\n<pre><code>//FOR EVERY PRODUCT SET THE ORDER CREATE DATE\n    for(Order order:orders){\n        for(Product product : order.getProducts()){\n            product.setOrderDate(order.getCreated());\n        }\n    }\n\n    orders.stream()\n            .map(Order::getProducts)\n            .flatMap(Collection::stream)\n            .map(product -&gt; {product.setOrderDate(Order::getCreated)}\n</code></pre>\n"},{"tags":["java","quarkus","content-type","rest-client","microprofile"],"comments":[{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":0,"creation_date":1659439649,"post_id":73206353,"comment_id":129290352,"body_markdown":"Have you tried using a `ClientRequestFilter`?","body":"Have you tried using a <code>ClientRequestFilter</code>?"},{"owner":{"account_id":25956606,"reputation":21,"user_id":19673856,"display_name":"Sevenby7"},"score":0,"creation_date":1659511741,"post_id":73206353,"comment_id":129309408,"body_markdown":"@geonand have you a suggestion how this could work?I have worked with ClientRequestFilters in the past to overwrite HTTP Headers but in this case I need to set a specific Content-Type per method call. I could add an Header like &quot;ContentType&quot; use this in ClientRequestFilter and set the value afterwards to &quot;Content-Type&quot; Header but this seems to be hacky.","body":"@geonand have you a suggestion how this could work?I have worked with ClientRequestFilters in the past to overwrite HTTP Headers but in this case I need to set a specific Content-Type per method call. I could add an Header like &quot;ContentType&quot; use this in ClientRequestFilter and set the value afterwards to &quot;Content-Type&quot; Header but this seems to be hacky."},{"owner":{"account_id":25956606,"reputation":21,"user_id":19673856,"display_name":"Sevenby7"},"score":0,"creation_date":1659689459,"post_id":73206353,"comment_id":129358771,"body_markdown":"@geoand have tried, Content-Type will be still overwritten. Have tried is as following:","body":"@geoand have tried, Content-Type will be still overwritten. Have tried is as following:"},{"owner":{"account_id":25956606,"reputation":21,"user_id":19673856,"display_name":"Sevenby7"},"score":0,"creation_date":1659689524,"post_id":73206353,"comment_id":129358791,"body_markdown":"&#39;&#39;&#39;\nimport javax.inject.Inject;\nimport javax.ws.rs.client.ClientRequestContext;\nimport javax.ws.rs.client.ClientRequestFilter;\nimport javax.ws.rs.ext.Provider;\n\nimport io.vertx.core.http.HttpServerRequest;\n\n@ Provider\npublic class MyFilter implements ClientRequestFilter {\n    \n    @ Inject\n    HttpServerRequest httpServerRequest;\n\n    @ Override\n    public void filter(ClientRequestContext requestContext)  {\n        httpServerRequest.headers().remove(&quot;Content-Type&quot;);\n        httpServerRequest.headers().set(&quot;Content-Type&quot;, &quot;image/jpg&quot;);\n    }\n}\n&#39;&#39;&#39;","body":"&#39;&#39;&#39; import javax.inject.Inject; import javax.ws.rs.client.ClientRequestContext; import javax.ws.rs.client.ClientRequestFilter; import javax.ws.rs.ext.Provider;  import io.vertx.core.http.HttpServerRequest;  @ Provider public class MyFilter implements ClientRequestFilter {          @ Inject     HttpServerRequest httpServerRequest;      @ Override     public void filter(ClientRequestContext requestContext)  {         httpServerRequest.headers().remove(&quot;Content-Type&quot;);         httpServerRequest.headers().set(&quot;Content-Type&quot;, &quot;image/jpg&quot;);     } } &#39;&#39;&#39;"},{"owner":{"account_id":25956606,"reputation":21,"user_id":19673856,"display_name":"Sevenby7"},"score":0,"creation_date":1659689563,"post_id":73206353,"comment_id":129358802,"body_markdown":"If I set an other http header like &quot;sample&quot; it will be added to the request","body":"If I set an other http header like &quot;sample&quot; it will be added to the request"},{"owner":{"account_id":6859918,"reputation":1134,"user_id":5274291,"accept_rate":75,"display_name":"Jo&#227;o Pedro Schmitt"},"score":0,"creation_date":1665665763,"post_id":73206353,"comment_id":130756058,"body_markdown":"@geoand do you have any other idea how to solve this problem?","body":"@geoand do you have any other idea how to solve this problem?"}],"answers":[{"tags":[],"owner":{"account_id":235169,"reputation":19,"user_id":3369593,"display_name":"HermanW"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690275809,"creation_date":1690275809,"answer_id":76761103,"question_id":73206353,"body_markdown":"i just found the solution for this question.\r\n\r\nYou need to set annotation `@Consumes(MediaType.MEDIA_TYPE_WILDCARD)`\r\n\r\n    @POST\r\n    @Consumes(MediaType.MEDIA_TYPE_WILDCARD)\r\n    Response post(@Nullable Object bodyRq);\r\n\r\nthen set the Content-Type while register header\r\n\r\n     var call = RestClientBuilder.newBuilder()\r\n                .baseUri(new URI(uri))\r\n                .register(new HeaderAddingFilter(headersRq)) // Content-Type: Application/xml for example\r\n                .build(GenericOperation.class);\r\n\r\nso then the resteasy-client will sent the `content-type` header following the value set on `headerRq`.\r\n\r\n\r\nhope this help other who facing same usecase.","title":"How to set Content-Type Header in Java MicroProfile RestClient during method call","body":"<p>i just found the solution for this question.</p>\n<p>You need to set annotation <code>@Consumes(MediaType.MEDIA_TYPE_WILDCARD)</code></p>\n<pre><code>@POST\n@Consumes(MediaType.MEDIA_TYPE_WILDCARD)\nResponse post(@Nullable Object bodyRq);\n</code></pre>\n<p>then set the Content-Type while register header</p>\n<pre><code> var call = RestClientBuilder.newBuilder()\n            .baseUri(new URI(uri))\n            .register(new HeaderAddingFilter(headersRq)) // Content-Type: Application/xml for example\n            .build(GenericOperation.class);\n</code></pre>\n<p>so then the resteasy-client will sent the <code>content-type</code> header following the value set on <code>headerRq</code>.</p>\n<p>hope this help other who facing same usecase.</p>\n"}],"owner":{"account_id":25956606,"reputation":21,"user_id":19673856,"display_name":"Sevenby7"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1814,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690275809,"creation_date":1659437786,"question_id":73206353,"body_markdown":"I am currently using the Java MicroProfile RestClient and have following problem:\r\n- Backend provides an api to receive binary files\r\n- Backend would be happy to receive a Content-Type header containing the Mime-Type of the binary file\r\n- I am not able to set Content-Type per method parameter\r\n\r\nI have following code on client-side:\r\n\r\n```\r\nimport javax.ws.rs.HeaderParam;\r\nimport javax.ws.rs.POST;\r\nimport javax.ws.rs.Path;\r\n\r\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\r\n\r\nimport io.smallrye.mutiny.Uni;\r\n\r\n@RegisterRestClient\r\npublic interface RestClient {\r\n    @POST\r\n    @Path(&quot;/api/path/v1&quot;)\r\n    Uni&lt;String&gt; createResource(@HeaderParam(&quot;Content-Type&quot;) String contentType, byte[] body);\r\n}\r\n```\r\n\r\nThe @HeaderParam(&quot;Content-Type&quot;) will always be overwritten with &quot;application/json&quot;.\r\n\r\nIf I set the @Consumes Property the Content-Type would always be the same but I want to set it during the method call. (byte[] could contain image, video, text ...)\r\n\r\nHas anyone an idea how I could archive this?\r\nMay there is a better option instead of using a simple byte[] as body?\r\n\r\nBest thanks!","title":"How to set Content-Type Header in Java MicroProfile RestClient during method call","body":"<p>I am currently using the Java MicroProfile RestClient and have following problem:</p>\n<ul>\n<li>Backend provides an api to receive binary files</li>\n<li>Backend would be happy to receive a Content-Type header containing the Mime-Type of the binary file</li>\n<li>I am not able to set Content-Type per method parameter</li>\n</ul>\n<p>I have following code on client-side:</p>\n<pre><code>import javax.ws.rs.HeaderParam;\nimport javax.ws.rs.POST;\nimport javax.ws.rs.Path;\n\nimport org.eclipse.microprofile.rest.client.inject.RegisterRestClient;\n\nimport io.smallrye.mutiny.Uni;\n\n@RegisterRestClient\npublic interface RestClient {\n    @POST\n    @Path(&quot;/api/path/v1&quot;)\n    Uni&lt;String&gt; createResource(@HeaderParam(&quot;Content-Type&quot;) String contentType, byte[] body);\n}\n</code></pre>\n<p>The @HeaderParam(&quot;Content-Type&quot;) will always be overwritten with &quot;application/json&quot;.</p>\n<p>If I set the @Consumes Property the Content-Type would always be the same but I want to set it during the method call. (byte[] could contain image, video, text ...)</p>\n<p>Has anyone an idea how I could archive this?\nMay there is a better option instead of using a simple byte[] as body?</p>\n<p>Best thanks!</p>\n"},{"tags":["java","continuous-integration","devops","fortify"],"answers":[{"comments":[{"owner":{"account_id":27943354,"reputation":1,"user_id":21884827,"display_name":"llrichardll"},"score":0,"creation_date":1690290927,"post_id":76761060,"comment_id":135330431,"body_markdown":"it was a test I did, but what happens is that with each execution that makes the pipeline creates a version in fortify, if the pipeline goes in the execution 10 creates a version 10 within fortify and so on, then when I remove the vulnerability within the project in version 10 when I resend the analysis and see the version 11 still shows me the vulnerability.","body":"it was a test I did, but what happens is that with each execution that makes the pipeline creates a version in fortify, if the pipeline goes in the execution 10 creates a version 10 within fortify and so on, then when I remove the vulnerability within the project in version 10 when I resend the analysis and see the version 11 still shows me the vulnerability."}],"tags":[],"owner":{"account_id":29085282,"reputation":9,"user_id":22280286,"display_name":"Parag Mehta"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690275463,"creation_date":1690275463,"answer_id":76761060,"question_id":76758503,"body_markdown":"Add the vulnerability to the Fortify suppression list.\r\n\r\nIt will be done within Fortify itself by editing the scan project settings.\r\n\r\nAny vulnerability with an ID on the suppression list will be ignored during scanning.","title":"How to exclude warnings in Fortify","body":"<p>Add the vulnerability to the Fortify suppression list.</p>\n<p>It will be done within Fortify itself by editing the scan project settings.</p>\n<p>Any vulnerability with an ID on the suppression list will be ignored during scanning.</p>\n"}],"owner":{"account_id":27943354,"reputation":1,"user_id":21884827,"display_name":"llrichardll"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690275463,"creation_date":1690239755,"question_id":76758503,"body_markdown":"good day, I have the following question I need fortify not to detect a vulnerability in this case an example that I have in java\r\n\r\n```\r\n// suppresses validation in sonar \r\n@SuppresWarnings({&quot;squid:S6654&quot;})\r\npublic static String decryptCbc(String key){\r\n..\r\n..\r\n}\r\n```\r\n\r\neffectively in sonar I don&#39;t get the warning but when I pass the analysis in fortify it shows me the vulnerability is there any way to suppress the validation in fortify as it does in sonar from the code or I have to do something from the pipeline that deploys the application or from fortify itself.\r\n\r\nI hope you can give me some idea of how I can solve this problem.","title":"How to exclude warnings in Fortify","body":"<p>good day, I have the following question I need fortify not to detect a vulnerability in this case an example that I have in java</p>\n<pre><code>// suppresses validation in sonar \n@SuppresWarnings({&quot;squid:S6654&quot;})\npublic static String decryptCbc(String key){\n..\n..\n}\n</code></pre>\n<p>effectively in sonar I don't get the warning but when I pass the analysis in fortify it shows me the vulnerability is there any way to suppress the validation in fortify as it does in sonar from the code or I have to do something from the pipeline that deploys the application or from fortify itself.</p>\n<p>I hope you can give me some idea of how I can solve this problem.</p>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690274817,"post_id":76760937,"comment_id":135326872,"body_markdown":"Your regex already doesn&#39;t match those characters.","body":"Your regex already doesn&#39;t match those characters."}],"answers":[{"comments":[{"owner":{"account_id":4828806,"reputation":889,"user_id":3897544,"accept_rate":25,"display_name":"Renz Manacmol"},"score":1,"creation_date":1690275521,"post_id":76760989,"comment_id":135327058,"body_markdown":"works well thanks","body":"works well thanks"},{"owner":{"account_id":4828806,"reputation":889,"user_id":3897544,"accept_rate":25,"display_name":"Renz Manacmol"},"score":0,"creation_date":1690276711,"post_id":76760989,"comment_id":135327320,"body_markdown":"is it possible to add \\ backslash in the detection","body":"is it possible to add \\ backslash in the detection"},{"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"score":1,"creation_date":1690277259,"post_id":76760989,"comment_id":135327432,"body_markdown":"Yes you can add it, `&quot;[^a-z\\\\d &#39;/\\&quot;\\\\\\\\]&quot;` you need to escape it as it is used as an escape character in regular expressions","body":"Yes you can add it, <code>&quot;[^a-z\\\\d &#39;&#47;\\&quot;\\\\\\\\]&quot;</code> you need to escape it as it is used as an escape character in regular expressions"}],"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690274955,"creation_date":1690274955,"answer_id":76760989,"question_id":76760937,"body_markdown":"You can exclude specific characters from the detection by adding them to your regex, like this:\r\n\r\n    &quot;[^a-z\\\\d &#39;/\\&quot;]&quot;","title":"Exclude double quote and single quote from detecting as special character","body":"<p>You can exclude specific characters from the detection by adding them to your regex, like this:</p>\n<pre><code>&quot;[^a-z\\\\d '/\\&quot;]&quot;\n</code></pre>\n"}],"owner":{"account_id":4828806,"reputation":889,"user_id":3897544,"accept_rate":25,"display_name":"Renz Manacmol"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76760989,"answer_count":1,"score":0,"last_activity_date":1690274955,"creation_date":1690274633,"question_id":76760937,"body_markdown":"Currently im detecting special character using the code below\r\n\r\n\r\n     val specialChars: Pattern = Pattern.compile(&quot;[^a-z\\\\d ]&quot;, Pattern.CASE_INSENSITIVE)\r\n                val specialCharMatcher: Matcher = specialChars.matcher(text)\r\n                val hasSpecialChar = specialCharMatcher.find()\r\n\r\n\r\nIs there a way to exclude quote `&quot; &quot;` , single quote `&#39;` , and slash `/` from the detection?","title":"Exclude double quote and single quote from detecting as special character","body":"<p>Currently im detecting special character using the code below</p>\n<pre><code> val specialChars: Pattern = Pattern.compile(&quot;[^a-z\\\\d ]&quot;, Pattern.CASE_INSENSITIVE)\n            val specialCharMatcher: Matcher = specialChars.matcher(text)\n            val hasSpecialChar = specialCharMatcher.find()\n</code></pre>\n<p>Is there a way to exclude quote <code>&quot; &quot;</code> , single quote <code>'</code> , and slash <code>/</code> from the detection?</p>\n"},{"tags":["java","kotlin","visual-studio-code","github-codespaces"],"comments":[{"owner":{"account_id":1187233,"reputation":2871,"user_id":1160959,"display_name":"asm0dey"},"score":0,"creation_date":1690200188,"post_id":76753552,"comment_id":135315676,"body_markdown":"I&#39;m afraid it&#39;s not something you can fix; it&#39;s more of an issue in the mixed Java-Kotlin projects in VSCode (and codespaces). You should report it in their issue tracker.","body":"I&#39;m afraid it&#39;s not something you can fix; it&#39;s more of an issue in the mixed Java-Kotlin projects in VSCode (and codespaces). You should report it in their issue tracker."}],"answers":[{"comments":[{"owner":{"account_id":16729952,"reputation":1,"user_id":12092589,"display_name":"Adam Kaźmierczak"},"score":0,"creation_date":1691064666,"post_id":76760974,"comment_id":135442770,"body_markdown":"I&#39;ve reviewed both JDK and classpath configuration several times, restarting/cleaning does not really help.","body":"I&#39;ve reviewed both JDK and classpath configuration several times, restarting/cleaning does not really help."}],"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690274848,"creation_date":1690274848,"answer_id":76760974,"question_id":76753552,"body_markdown":"Make sure the correct **JDK** path is set, you can clean and rebuild the project with the following commands.\r\n\r\n```\r\n./gradlew clean\r\n./gradlew build\r\n```\r\n\r\nAlso try &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;P&lt;/kbd&gt; --&gt; `Java: Clean Java Language Server Workspace` and restart vscode.","title":"Java and Kotlin interoperability in github codespaces","body":"<p>Make sure the correct <strong>JDK</strong> path is set, you can clean and rebuild the project with the following commands.</p>\n<pre><code>./gradlew clean\n./gradlew build\n</code></pre>\n<p>Also try <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> --&gt; <code>Java: Clean Java Language Server Workspace</code> and restart vscode.</p>\n"}],"owner":{"account_id":16729952,"reputation":1,"user_id":12092589,"display_name":"Adam Kaźmierczak"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690274848,"creation_date":1690194298,"question_id":76753552,"body_markdown":"I&#39;m running a gradle project with Kotlin and Java source code. I need to configure the testing environment in GitHub codespaces with VS code, I cannot use JetBrains Gateway. Even though the Gradle tasks are running successfully, the project is being built, etc. Whenever I try to run a test or work in the IDE, I receive errors.\r\n\r\n```\r\nimport something.from.kotlin.KotlinCode;\r\nimport something.from.java.JavaCodeTwo;\r\n\r\nclass JavaCode {\r\n\r\n    public void method() {\r\n        KotlinCode kc = new KotlinCode(); // this line does not work\r\n    }\r\n\r\n}\r\n```\r\n\r\n* \r\n\r\nOn the first line vs code shows the red error: The import something.from.kotlin.KotlinCode cannot be resolved\\*\r\n\r\nAny ideas on how can I make it up and running? Right now I can only run tests using ./gradlew test I would like to be able to run and debug them using vs co\r\n\r\nI have the following extensions installed:\r\n\r\n- Extension Pack for Java - &lt;https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack&gt;\r\n\r\n- Gradle for Java - &lt;https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle&gt;\r\n\r\n- Java Kotlin integration *-* &lt;https://marketplace.visualstudio.com/items?itemName=MarkNefedov.vscode-java-kotlin-mn-fork&gt;\r\n\r\n- *Kotlin -* &lt;https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin&gt;\r\n\r\n- *Kotlin Language -* &lt;https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin&gt;\r\n\r\nNone of those solved my issue.  \r\n  \r\nIn order to at least run some test with the debugger I&#39;ve prepared a script:\r\n\r\n```\r\n#!/bin/bash\r\nexport GRADLE_OPTS=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=*:5005&quot;\r\necho &#39;here&#39;\r\n ../gradlew -p .. clean test --tests &#39;*SomeTest*&#39;\r\n```\r\n\r\n[enter image description here](https://i.stack.imgur.com/oK99f.png)\r\n\r\nTest runs in the debug mode on 5005, later I&#39;m attaching a debugger using vs code and this launch.json config:\r\n\r\n```\r\n{\r\n            &quot;type&quot;: &quot;java&quot;,\r\n            &quot;name&quot;: &quot;Attach to Remote Program&quot;,\r\n            &quot;request&quot;: &quot;attach&quot;,\r\n            &quot;projectName&quot;: &quot;projectName&quot;, // the name is correct\r\n            &quot;hostName&quot;: &quot;localhost&quot;,\r\n            &quot;port&quot;: &quot;5005&quot;        \r\n        },\r\n```\r\n\r\nand even though I can stop the program from the debug panel, none of my breakpoints work:  \r\n[enter image description here](https://i.stack.imgur.com/qcENW.png)  \r\n  \r\nany idea how could I fix the kotlin + java interoperability in the github codespace running vs code, or at least configure the debugger so I could set up the breakpoints ?","title":"Java and Kotlin interoperability in github codespaces","body":"<p>I'm running a gradle project with Kotlin and Java source code. I need to configure the testing environment in GitHub codespaces with VS code, I cannot use JetBrains Gateway. Even though the Gradle tasks are running successfully, the project is being built, etc. Whenever I try to run a test or work in the IDE, I receive errors.</p>\n<pre><code>import something.from.kotlin.KotlinCode;\nimport something.from.java.JavaCodeTwo;\n\nclass JavaCode {\n\n    public void method() {\n        KotlinCode kc = new KotlinCode(); // this line does not work\n    }\n\n}\n</code></pre>\n<ul>\n<li></li>\n</ul>\n<p>On the first line vs code shows the red error: The import something.from.kotlin.KotlinCode cannot be resolved*</p>\n<p>Any ideas on how can I make it up and running? Right now I can only run tests using ./gradlew test I would like to be able to run and debug them using vs co</p>\n<p>I have the following extensions installed:</p>\n<ul>\n<li><p>Extension Pack for Java - <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack</a></p>\n</li>\n<li><p>Gradle for Java - <a href=\"https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-gradle</a></p>\n</li>\n<li><p>Java Kotlin integration <em>-</em> <a href=\"https://marketplace.visualstudio.com/items?itemName=MarkNefedov.vscode-java-kotlin-mn-fork\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=MarkNefedov.vscode-java-kotlin-mn-fork</a></p>\n</li>\n<li><p><em>Kotlin -</em> <a href=\"https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=fwcd.kotlin</a></p>\n</li>\n<li><p><em>Kotlin Language -</em> <a href=\"https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin\" rel=\"nofollow noreferrer\">https://marketplace.visualstudio.com/items?itemName=mathiasfrohlich.Kotlin</a></p>\n</li>\n</ul>\n<p>None of those solved my issue.</p>\n<p>In order to at least run some test with the debugger I've prepared a script:</p>\n<pre><code>#!/bin/bash\nexport GRADLE_OPTS=&quot;-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,address=*:5005&quot;\necho 'here'\n ../gradlew -p .. clean test --tests '*SomeTest*'\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/oK99f.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Test runs in the debug mode on 5005, later I'm attaching a debugger using vs code and this launch.json config:</p>\n<pre><code>{\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;Attach to Remote Program&quot;,\n            &quot;request&quot;: &quot;attach&quot;,\n            &quot;projectName&quot;: &quot;projectName&quot;, // the name is correct\n            &quot;hostName&quot;: &quot;localhost&quot;,\n            &quot;port&quot;: &quot;5005&quot;        \n        },\n</code></pre>\n<p>and even though I can stop the program from the debug panel, none of my breakpoints work:<br />\n<a href=\"https://i.stack.imgur.com/qcENW.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>any idea how could I fix the kotlin + java interoperability in the github codespace running vs code, or at least configure the debugger so I could set up the breakpoints ?</p>\n"},{"tags":["java","multithreading","jvm"],"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1689847701,"post_id":76728746,"comment_id":135272567,"body_markdown":"Why would you be creating a lot of Thread objects without starting them? That doesn&#39;t make sense, unless you&#39;re making the classic mistake of extending `Thread` instead of implementing `Runnable`.","body":"Why would you be creating a lot of Thread objects without starting them? That doesn&#39;t make sense, unless you&#39;re making the classic mistake of extending <code>Thread</code> instead of implementing <code>Runnable</code>."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1689847840,"post_id":76728746,"comment_id":135272590,"body_markdown":"Sounds like you need a scalable thread pool","body":"Sounds like you need a scalable thread pool"},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689848452,"post_id":76728746,"comment_id":135272712,"body_markdown":"@MarkRotteveel it&#39;s due to an API that is beyond my control. I do totally agree that this sucks, but that&#39;s what I have to deal with... :(","body":"@MarkRotteveel it&#39;s due to an API that is beyond my control. I do totally agree that this sucks, but that&#39;s what I have to deal with... :("},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689849058,"post_id":76728746,"comment_id":135272842,"body_markdown":"@MarkRotteveel only if I can prove to my client that this will scale much worse (for example due to such special JVM/OS resources being pre-allocated), then **MAYBE** they will consider changing it, hence this question (but I&#39;m afraid they will actually say &quot;don&#39;t worry, we will buy more server resources&quot;, because it will be easier for them due to their corporate politics...)","body":"@MarkRotteveel only if I can prove to my client that this will scale much worse (for example due to such special JVM/OS resources being pre-allocated), then <b>MAYBE</b> they will consider changing it, hence this question (but I&#39;m afraid they will actually say &quot;don&#39;t worry, we will buy more server resources&quot;, because it will be easier for them due to their corporate politics...)"}],"answers":[{"comments":[{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689852252,"post_id":76729036,"comment_id":135273398,"body_markdown":"how about JVM-thread&#39;s stack memory? I&#39;m concerned due to [this part of JVM spec](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2) Please see my update to the question for details. Many thanks!! :)","body":"how about JVM-thread&#39;s stack memory? I&#39;m concerned due to <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2\" rel=\"nofollow noreferrer\">this part of JVM spec</a> Please see my update to the question for details. Many thanks!! :)"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1689859052,"post_id":76729036,"comment_id":135275033,"body_markdown":"@morgwai - the stack is allocated when the `Thread` is started, and discarded when the thread terminates.","body":"@morgwai - the stack is allocated when the <code>Thread</code> is started, and discarded when the thread terminates."},{"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"score":0,"creation_date":1689861267,"post_id":76729036,"comment_id":135275580,"body_markdown":"@StephenC thanks for the answer :) is it stated somewhere in the JVM spec/javadocs or is it just a common (sole?) implementation? I was trying to find some source regarding this, but no luck :(  Thanks again!","body":"@StephenC thanks for the answer :) is it stated somewhere in the JVM spec/javadocs or is it just a common (sole?) implementation? I was trying to find some source regarding this, but no luck :(  Thanks again!"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":2,"creation_date":1689864758,"post_id":76729036,"comment_id":135276476,"body_markdown":"It is not stated in the specifications.  This is just how (all) HotSpot JVMs work.  The OpenJDK source code is the ultimate source for this information.  So that means that *in theory* a JVM *could* manage the stack in some other way.  But I&#39;m not aware of any existing JVM implementation that does that.","body":"It is not stated in the specifications.  This is just how (all) HotSpot JVMs work.  The OpenJDK source code is the ultimate source for this information.  So that means that <i>in theory</i> a JVM <i>could</i> manage the stack in some other way.  But I&#39;m not aware of any existing JVM implementation that does that."},{"owner":{"account_id":1217449,"reputation":4099,"user_id":1184752,"accept_rate":43,"display_name":"Juraj Martinka"},"score":0,"creation_date":1690177202,"post_id":76729036,"comment_id":135311350,"body_markdown":"Btw. even then, thread stacks are usually allocated lazily, so in most cases, the won&#39;t occupy as much space either - see https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438 and https://github.com/apangin/jstackmem/blob/master/jstackmem.py","body":"Btw. even then, thread stacks are usually allocated lazily, so in most cases, the won&#39;t occupy as much space either - see <a href=\"https://stackoverflow.com/questions/53451103/java-using-much-more-memory-than-heap-size-or-size-correctly-docker-memory-limi/53624438#53624438\" title=\"java using much more memory than heap size or size correctly docker memory limi\">stackoverflow.com/questions/53451103/&hellip;</a> and <a href=\"https://github.com/apangin/jstackmem/blob/master/jstackmem.py\" rel=\"nofollow noreferrer\">github.com/apangin/jstackmem/blob/master/jstackmem.py</a>"}],"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":5,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690274748,"creation_date":1689849422,"answer_id":76729036,"question_id":76728746,"body_markdown":"Although the `Thread` constructor does quite some checks and initialization, it will not bind the `Thread` instance to a native OS thread. That will only happen on `Thread.start()`, so in that sense an unstarted Thread is not a &quot;heavy&quot; object (by which I mean, it doesn&#39;t have a native peer).\r\n\r\nProbably the most expensive part is if the `Thread` is constructed with `inheritThreadLocals` set to `true` (which happens in a lot of the usual constructors of `Thread`), and the creating thread has a lot of thread local values in its map.\r\n\r\nThat said, and reiterating the point of my comment on the question, creating a lot of threads without starting them is unusual, and generally indicates you&#39;re doing something wrong (e.g. extending `Thread` instead of implementing `Runnable`), you may want to look for alternatives.","title":"how heavy are Thread objects before they are started?","body":"<p>Although the <code>Thread</code> constructor does quite some checks and initialization, it will not bind the <code>Thread</code> instance to a native OS thread. That will only happen on <code>Thread.start()</code>, so in that sense an unstarted Thread is not a &quot;heavy&quot; object (by which I mean, it doesn't have a native peer).</p>\n<p>Probably the most expensive part is if the <code>Thread</code> is constructed with <code>inheritThreadLocals</code> set to <code>true</code> (which happens in a lot of the usual constructors of <code>Thread</code>), and the creating thread has a lot of thread local values in its map.</p>\n<p>That said, and reiterating the point of my comment on the question, creating a lot of threads without starting them is unusual, and generally indicates you're doing something wrong (e.g. extending <code>Thread</code> instead of implementing <code>Runnable</code>), you may want to look for alternatives.</p>\n"}],"owner":{"account_id":1262646,"reputation":2597,"user_id":1220560,"display_name":"morgwai"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":102,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690274748,"creation_date":1689847242,"question_id":76728746,"body_markdown":"I&#39;m wondering whether before `start()` method is called, instances of `Thread` are merely a standard Java objects or if some special JVM/OS level resources are allocated right from the moment they are created (like for example pre-allocated memory for their stack etc). Based on a preliminary research, they seem like ordinary objects, but it would be awesome if some JVM experts could confirm this.\r\n\r\nI&#39;m mostly concerned regarding previously mentioned thread&#39;s stack memory, as [the JVM spec](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2) states *&quot;Each Java Virtual Machine thread has a private Java Virtual Machine stack, created at the same time as the thread&quot;*. I wonder if *&quot;created&quot;* here refers to a call to `start()` method or a `Thread` instance being constructed (I&#39;m honestly not up2date with the exact relation between OS threads, JVM threads and `Thread` objects, hence my confusion. Also I think I might have heard it changed a bit during last few years, but I can&#39;t recall exactly). Furthermore, I&#39;m **guessing**, that even in the case some OS virtual memory is allocated at the moment a `Thread` instance is constructed, actual physical memory pages for its stack will be allocated only after the thread starts to use, which, I guess again, is only after it is `start()`-ed.\r\n\r\nThis is the &quot;change I might have heard about&quot;: [jep-425](https://openjdk.org/jeps/425) introduced in java-19. It changes the mapping between OS threads and JVM threads to M:N. I&#39;m however still not sure about the mapping between `Thread` objects and JVM threads (I&#39;m **almost** sure that mapping between `start()`-ed `Thread` objects and JVM threads is 1:1, but not sure if a JVM thread is created on `Thread` instance creation or on `start()`. I&#39;ve asked  [another question regarding this](https://stackoverflow.com/questions/76729903/relation-between-jvm-threads-and-thread-instances))","title":"how heavy are Thread objects before they are started?","body":"<p>I'm wondering whether before <code>start()</code> method is called, instances of <code>Thread</code> are merely a standard Java objects or if some special JVM/OS level resources are allocated right from the moment they are created (like for example pre-allocated memory for their stack etc). Based on a preliminary research, they seem like ordinary objects, but it would be awesome if some JVM experts could confirm this.</p>\n<p>I'm mostly concerned regarding previously mentioned thread's stack memory, as <a href=\"https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html#jvms-2.5.2\" rel=\"nofollow noreferrer\">the JVM spec</a> states <em>&quot;Each Java Virtual Machine thread has a private Java Virtual Machine stack, created at the same time as the thread&quot;</em>. I wonder if <em>&quot;created&quot;</em> here refers to a call to <code>start()</code> method or a <code>Thread</code> instance being constructed (I'm honestly not up2date with the exact relation between OS threads, JVM threads and <code>Thread</code> objects, hence my confusion. Also I think I might have heard it changed a bit during last few years, but I can't recall exactly). Furthermore, I'm <strong>guessing</strong>, that even in the case some OS virtual memory is allocated at the moment a <code>Thread</code> instance is constructed, actual physical memory pages for its stack will be allocated only after the thread starts to use, which, I guess again, is only after it is <code>start()</code>-ed.</p>\n<p>This is the &quot;change I might have heard about&quot;: <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">jep-425</a> introduced in java-19. It changes the mapping between OS threads and JVM threads to M:N. I'm however still not sure about the mapping between <code>Thread</code> objects and JVM threads (I'm <strong>almost</strong> sure that mapping between <code>start()</code>-ed <code>Thread</code> objects and JVM threads is 1:1, but not sure if a JVM thread is created on <code>Thread</code> instance creation or on <code>start()</code>. I've asked  <a href=\"https://stackoverflow.com/questions/76729903/relation-between-jvm-threads-and-thread-instances\">another question regarding this</a>)</p>\n"},{"tags":["java","eclipse","vert.x","vertx-verticle","vert.x-webclient"],"comments":[{"owner":{"account_id":2446461,"reputation":8725,"user_id":2133695,"display_name":"tsegismont"},"score":0,"creation_date":1689838871,"post_id":76722937,"comment_id":135270816,"body_markdown":"What&#39;s in the logs?","body":"What&#39;s in the logs?"}],"answers":[{"comments":[{"owner":{"account_id":15990006,"reputation":3,"user_id":11539449,"display_name":"Dominator_007"},"score":0,"creation_date":1690469493,"post_id":76760918,"comment_id":135361151,"body_markdown":"You are right. I replaced the main class from io.vertx.core.Launcher to client.ProxyClient[JAVA main class] and it worked. Thanks.","body":"You are right. I replaced the main class from io.vertx.core.Launcher to client.ProxyClient[JAVA main class] and it worked. Thanks."}],"tags":[],"owner":{"account_id":175525,"reputation":1174,"user_id":405613,"display_name":"Oliver Marienfeld"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690274493,"creation_date":1690274493,"answer_id":76760918,"question_id":76722937,"body_markdown":"What you run in Eclipse is very likely your own main class you showed above, which also closes Vert.x.\r\n\r\nWhen you run the jar however, the `Main-Class` might be `io.vertx.core.Launcher` - depending on how you set up your build. Take a look in the jar&#39;s `META-INF/MANIFEST.MF` file. \r\n\r\nIf you see an entry there like `Main-Class: io.vertx.core.Launcher`, then the jar is run with Vert.x launcher. \r\n\r\nAnd then your `MainVerticle` just sends a request and logs the response but does not close Vert.x - and that&#39;s what you coded.","title":"Vert.x application closes when run with Eclipse but does not close when run as a jar","body":"<p>What you run in Eclipse is very likely your own main class you showed above, which also closes Vert.x.</p>\n<p>When you run the jar however, the <code>Main-Class</code> might be <code>io.vertx.core.Launcher</code> - depending on how you set up your build. Take a look in the jar's <code>META-INF/MANIFEST.MF</code> file.</p>\n<p>If you see an entry there like <code>Main-Class: io.vertx.core.Launcher</code>, then the jar is run with Vert.x launcher.</p>\n<p>And then your <code>MainVerticle</code> just sends a request and logs the response but does not close Vert.x - and that's what you coded.</p>\n"}],"owner":{"account_id":15990006,"reputation":3,"user_id":11539449,"display_name":"Dominator_007"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76760918,"answer_count":1,"score":0,"last_activity_date":1690274493,"creation_date":1689780641,"question_id":76722937,"body_markdown":"Here is my code for main class:\r\n\r\n```\r\n\tpublic static void main(String[] args) {\r\n\t\tVertx vertx = Vertx.vertx();\r\n\t\tvertx.deployVerticle(new MainVerticle(), whenDeployed -&gt; {\r\n\t\t\t\tvertx.close();\r\n//\t\t\t\tSystem.exit(0);\r\n\t\t\t});\r\n\t}\r\n```\r\n\r\nBelow is the code for main verticle:\r\n```\r\npublic class MainVerticle extends AbstractVerticle {\r\n\r\n\tprivate static final ObjectMapper mapper = new ObjectMapper();\r\n\tprivate static final Logger log = LoggerFactory.getLogger(MainVerticle.class);\r\n\t\r\n\t@Override\r\n\tpublic void start(Promise&lt;Void&gt; startPromise) throws Exception {\r\n\t\t\r\n\t\tConfiguration config = null;\r\n\t\t\r\n\t\ttry(FileInputStream fin = new FileInputStream(&quot;/opt/vertex-proxy/config.json&quot;)){\r\n\t\t\tconfig = mapper.readValue(fin, Configuration.class);\r\n\t\t\t\r\n\t\t} catch(Exception e) {\r\n\t\t\tlog.error(&quot;Invalid configuration\\n{}&quot;, e.getCause());\r\n\t\t}\r\n\t\t\r\n\t\tlog.info(&quot;Started application\\n&quot;);\r\n\t\t\r\n\t\tProxyOptions proxyOptions = new ProxyOptions()\r\n\t\t        .setHost(config.getProxy().getIp())\r\n\t\t        .setPort(config.getProxy().getPort());\r\n\t\t        \r\n        WebClientOptions options = new WebClientOptions().setUserAgent(&quot;Yash client&quot;)\r\n\t\t\t\t.setProtocolVersion(HttpVersion.HTTP_2).setHttp2ClearTextUpgrade(false)\r\n\t\t\t\t.setConnectTimeout(config.getTarget().getConnectionTimeout())\r\n\t\t\t\t.setProxyOptions(proxyOptions);\r\n\t\t\r\n        WebClient client = WebClient.create(vertx, options);\r\n\r\n\t\t\r\n\t\tHttpRequest&lt;Buffer&gt; req = client.get(config.getTarget().getPort(), config.getTarget().getIp(), config.getTarget().getUri());\r\n\t\t\r\n\t\treq.send().onSuccess(response -&gt; {\r\n\t\t\tlog.info(&quot;Received response with status code: &quot; + response.statusCode());\r\n\t\t\tlog.info(&quot;Response:\\n&quot; + response.bodyAsString());\r\n\t\t\tstartPromise.complete();\r\n\t\t\t\r\n\t\t}).onFailure(err -&gt; {\r\n\t\t\tlog.error(&quot;Something went wrong\\n&quot; + err.getCause());\r\n\t\t\tstartPromise.complete();\r\n\t\t});\r\n\t\t\r\n\t}\r\n\t\r\n\t@Override\r\n\tpublic void stop() throws Exception {\r\n\t\tSystem.out.println(&quot;\\nStopping application&quot;);\r\n\t}\r\n\r\n}\r\n```\r\nWhen I run the above code in Eclipse it performs perfectly fine and the program shuts down after execution. But when I build a maven jar out of this and try to run the jar using the command `java -jar application.jar` then the program executes and shows the response but it does not exits unless interupted manually.\r\n\r\nCould anyone suggest a proper way to resolve this so it behaves the same in Eclipse as well as a jar?\r\n\r\n\r\nI even tried using java.lang.System.exit() in the onSuccess and onFailure blocks and also in whenDeployed block in the main class and inside the stop() method too but still observed similar behaviour.","title":"Vert.x application closes when run with Eclipse but does not close when run as a jar","body":"<p>Here is my code for main class:</p>\n<pre><code>    public static void main(String[] args) {\n        Vertx vertx = Vertx.vertx();\n        vertx.deployVerticle(new MainVerticle(), whenDeployed -&gt; {\n                vertx.close();\n//              System.exit(0);\n            });\n    }\n</code></pre>\n<p>Below is the code for main verticle:</p>\n<pre><code>public class MainVerticle extends AbstractVerticle {\n\n    private static final ObjectMapper mapper = new ObjectMapper();\n    private static final Logger log = LoggerFactory.getLogger(MainVerticle.class);\n    \n    @Override\n    public void start(Promise&lt;Void&gt; startPromise) throws Exception {\n        \n        Configuration config = null;\n        \n        try(FileInputStream fin = new FileInputStream(&quot;/opt/vertex-proxy/config.json&quot;)){\n            config = mapper.readValue(fin, Configuration.class);\n            \n        } catch(Exception e) {\n            log.error(&quot;Invalid configuration\\n{}&quot;, e.getCause());\n        }\n        \n        log.info(&quot;Started application\\n&quot;);\n        \n        ProxyOptions proxyOptions = new ProxyOptions()\n                .setHost(config.getProxy().getIp())\n                .setPort(config.getProxy().getPort());\n                \n        WebClientOptions options = new WebClientOptions().setUserAgent(&quot;Yash client&quot;)\n                .setProtocolVersion(HttpVersion.HTTP_2).setHttp2ClearTextUpgrade(false)\n                .setConnectTimeout(config.getTarget().getConnectionTimeout())\n                .setProxyOptions(proxyOptions);\n        \n        WebClient client = WebClient.create(vertx, options);\n\n        \n        HttpRequest&lt;Buffer&gt; req = client.get(config.getTarget().getPort(), config.getTarget().getIp(), config.getTarget().getUri());\n        \n        req.send().onSuccess(response -&gt; {\n            log.info(&quot;Received response with status code: &quot; + response.statusCode());\n            log.info(&quot;Response:\\n&quot; + response.bodyAsString());\n            startPromise.complete();\n            \n        }).onFailure(err -&gt; {\n            log.error(&quot;Something went wrong\\n&quot; + err.getCause());\n            startPromise.complete();\n        });\n        \n    }\n    \n    @Override\n    public void stop() throws Exception {\n        System.out.println(&quot;\\nStopping application&quot;);\n    }\n\n}\n</code></pre>\n<p>When I run the above code in Eclipse it performs perfectly fine and the program shuts down after execution. But when I build a maven jar out of this and try to run the jar using the command <code>java -jar application.jar</code> then the program executes and shows the response but it does not exits unless interupted manually.</p>\n<p>Could anyone suggest a proper way to resolve this so it behaves the same in Eclipse as well as a jar?</p>\n<p>I even tried using java.lang.System.exit() in the onSuccess and onFailure blocks and also in whenDeployed block in the main class and inside the stop() method too but still observed similar behaviour.</p>\n"},{"tags":["java","sonarqube","sonarscanner"],"owner":{"account_id":29085566,"reputation":9,"user_id":22280522,"display_name":"Anusha jesuraj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690274019,"creation_date":1690269094,"question_id":76760233,"body_markdown":"While analysing test files using junit pre-defined rules. Except this rule “TestCases should contain tests” , none of the junit rule is getting applied to the Junit test files. Why?\r\n\r\n```\r\ncommand = [&#39;java&#39;, \r\n          &#39;-jar&#39;, \r\n          sonar_scanner_jar, \r\n          &#39;-Dsonar.projectKey={}&#39;.format(project_name), \r\n          &#39;-Dsonar.host.url=http://localhost:9000&#39;,\r\n          &#39;-Dsonar.sources={}&#39;.format(src_directory),\r\n          &#39;-Dsonar.tests={}&#39;.format(test_directory),\r\n          &#39;-Dsonar.language=java&#39;, \r\n          &#39;-Dsonar.sourceEncoding=UTF-8&#39;, \r\n          &#39;-Dsonar.java.binaries={}&#39;.format(binfile), \r\n          &#39;-Dsonar.java.tests.binaries={}&#39;.format(test_binfile),\r\n          &#39;-Dsonar.login=admin&#39;, \r\n          &#39;-Dsonar.password=****&#39;, \r\n          &#39;-Dsonar.inclusions={}&#39;.format(&#39;,&#39;.join(srcfiles)),\r\n          &#39;-Dsonar.test.inclusions={}&#39;.format(&#39;,&#39;.join(junitfiles)),\r\n          &#39;-Dsonar.projectBaseDir={}&#39;.format(source_directory),\r\n          &#39;-Dsonar.java.libraries={}&#39;.format(cur_dir+&quot;/sonaranalysis/lib&quot;),\r\n          &#39;-Dsonar.java.test.libraries={}&#39;.format(cur_dir+&quot;/sonaranalysis/test_lib&quot;)\r\n          ]\r\n```\r\n\r\n\r\nThis is the command that I’m using. Pre-defined rules are working perfectly for the source files but not for the junit files.\r\n\r\n- Sonarqube server version : 8.x\r\n- Sonar-scanner-cli : 4.8\r\n- Java version to run the server : 17\r\n- Java version to run the files : 8","title":"While analysing test files , junit pre-defined rules are not getting applied","body":"<p>While analysing test files using junit pre-defined rules. Except this rule “TestCases should contain tests” , none of the junit rule is getting applied to the Junit test files. Why?</p>\n<pre><code>command = ['java', \n          '-jar', \n          sonar_scanner_jar, \n          '-Dsonar.projectKey={}'.format(project_name), \n          '-Dsonar.host.url=http://localhost:9000',\n          '-Dsonar.sources={}'.format(src_directory),\n          '-Dsonar.tests={}'.format(test_directory),\n          '-Dsonar.language=java', \n          '-Dsonar.sourceEncoding=UTF-8', \n          '-Dsonar.java.binaries={}'.format(binfile), \n          '-Dsonar.java.tests.binaries={}'.format(test_binfile),\n          '-Dsonar.login=admin', \n          '-Dsonar.password=****', \n          '-Dsonar.inclusions={}'.format(','.join(srcfiles)),\n          '-Dsonar.test.inclusions={}'.format(','.join(junitfiles)),\n          '-Dsonar.projectBaseDir={}'.format(source_directory),\n          '-Dsonar.java.libraries={}'.format(cur_dir+&quot;/sonaranalysis/lib&quot;),\n          '-Dsonar.java.test.libraries={}'.format(cur_dir+&quot;/sonaranalysis/test_lib&quot;)\n          ]\n</code></pre>\n<p>This is the command that I’m using. Pre-defined rules are working perfectly for the source files but not for the junit files.</p>\n<ul>\n<li>Sonarqube server version : 8.x</li>\n<li>Sonar-scanner-cli : 4.8</li>\n<li>Java version to run the server : 17</li>\n<li>Java version to run the files : 8</li>\n</ul>\n"},{"tags":["java","mysql","spring","jdbc"],"owner":{"account_id":28480293,"reputation":95,"user_id":21794356,"display_name":"Emiya Elien"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690273851,"creation_date":1690273851,"question_id":76760823,"body_markdown":"I have already finish dlock by wrapping redisson, and I&#39;m trying to impl it on database, exactly on mysql.\r\n\r\nI&#39;m using JdbcTemplate And DataSourceTransactionManager to start a tx, my plans can be show in 3 parts:\r\n\r\n 1. using `select ... for update` to query the record and lock\r\n 2. if the record is not exist, then `insert into values` add a record\r\n 3. do bussiness, and finally `delete from where` remove this record and release lock\r\n\r\nit work well in single-thread, but when comes to a concurrent enviroment, exceptions occurs:\r\n\r\n&gt; org.springframework.dao.DeadlockLoserDataAccessException: PreparedStatementCallback; SQL [ insert into lock1 ( lock_key, holder, created_time, expired_time )  values ( ?, ?, ?, ? ); ]; Deadlock found when trying to get lock; try restarting transaction; nested exception is com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction\r\n\r\nI realized that there is no need to excute `select ... for update` for `lock()` method, so I removed it and directly using `insert into values` with `try catch`.\r\n\r\nBut anoter problem occurs, I also had a `tryLock(time, unit)` method, and I&#39;m using `select ... for update skip locked` to do fast-check. However, if record wasn&#39;t exist in the begin, it also would be trapped in `deadlock`\r\n\r\n\r\nSo, how to design the distribute lock in database, at least achieve `lock(), unlock(), tryLock(), tryLock(time, unit)`?\r\n","title":"How to make the Distributed-Lock on Database ( mainly on mysql )","body":"<p>I have already finish dlock by wrapping redisson, and I'm trying to impl it on database, exactly on mysql.</p>\n<p>I'm using JdbcTemplate And DataSourceTransactionManager to start a tx, my plans can be show in 3 parts:</p>\n<ol>\n<li>using <code>select ... for update</code> to query the record and lock</li>\n<li>if the record is not exist, then <code>insert into values</code> add a record</li>\n<li>do bussiness, and finally <code>delete from where</code> remove this record and release lock</li>\n</ol>\n<p>it work well in single-thread, but when comes to a concurrent enviroment, exceptions occurs:</p>\n<blockquote>\n<p>org.springframework.dao.DeadlockLoserDataAccessException: PreparedStatementCallback; SQL [ insert into lock1 ( lock_key, holder, created_time, expired_time )  values ( ?, ?, ?, ? ); ]; Deadlock found when trying to get lock; try restarting transaction; nested exception is com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction</p>\n</blockquote>\n<p>I realized that there is no need to excute <code>select ... for update</code> for <code>lock()</code> method, so I removed it and directly using <code>insert into values</code> with <code>try catch</code>.</p>\n<p>But anoter problem occurs, I also had a <code>tryLock(time, unit)</code> method, and I'm using <code>select ... for update skip locked</code> to do fast-check. However, if record wasn't exist in the begin, it also would be trapped in <code>deadlock</code></p>\n<p>So, how to design the distribute lock in database, at least achieve <code>lock(), unlock(), tryLock(), tryLock(time, unit)</code>?</p>\n"},{"tags":["java","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":14751517,"reputation":27,"user_id":10653484,"display_name":"Sany"},"score":0,"creation_date":1689861191,"post_id":76729061,"comment_id":135275555,"body_markdown":"no Exeption on IntelliJ, but on the browser I have \n\nWhitelabel Error Page\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.","body":"no Exeption on IntelliJ, but on the browser I have   Whitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback."},{"owner":{"account_id":13039762,"reputation":294,"user_id":9423518,"display_name":"Black Bear"},"score":0,"creation_date":1689877954,"post_id":76729061,"comment_id":135279339,"body_markdown":"this article might be helpful to you \n https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error","body":"this article might be helpful to you   <a href=\"https://stackoverflow.com/questions/31134333/this-application-has-no-explicit-mapping-for-error\" title=\"this application has no explicit mapping for error\">stackoverflow.com/questions/31134333/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":15454059,"reputation":228,"user_id":11148688,"display_name":"Avinash Gupta"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1689860849,"creation_date":1689860849,"answer_id":76730555,"question_id":76729061,"body_markdown":"Make sure that your main class is in a root package above other classes.\r\n\r\nWhen you run a Spring Boot Application, (i.e. a class annotated with @SpringBootApplication), Spring will only scan the classes below your main class package.\r\n\r\n```\r\ncom\r\n   +- APP\r\n         +- Application.java  &lt;--- your main class should be here, above your controller classes\r\n         |\r\n         +- model\r\n         |   +- user.java\r\n         +- controller\r\n             +- UserController.java\r\n```","title":"Create an object inserting his parentID from the table of the same object","body":"<p>Make sure that your main class is in a root package above other classes.</p>\n<p>When you run a Spring Boot Application, (i.e. a class annotated with @SpringBootApplication), Spring will only scan the classes below your main class package.</p>\n<pre><code>com\n   +- APP\n         +- Application.java  &lt;--- your main class should be here, above your controller classes\n         |\n         +- model\n         |   +- user.java\n         +- controller\n             +- UserController.java\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14751517,"reputation":27,"user_id":10653484,"display_name":"Sany"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690273814,"creation_date":1690273814,"answer_id":76760816,"question_id":76729061,"body_markdown":"Sorry If I took a lot of time to answer, for this code, I was doing something showing me that I didn&#39;t understand the concept of injection.\r\n\r\nfinally, this was the code I was suppose to put in my Controller, something very simple:\r\n\r\n\r\n    @PostMapping(&quot;/savingx/{parentId}&quot;)\r\n    public String savingxx(@ModelAttribute(&quot;section&quot;) SectionDTO sectionDTO, @PathVariable Long parentId, BindingResult bindingResult, Model model){\r\n        sectionService.addSectionByParent(sectionDTO, parentId);\r\n            returnValue= &quot;redirect:/product/detail/by/parent/{parentId}&quot;;\r\n    }\r\n\r\nThanks a lot for your contributions","title":"Create an object inserting his parentID from the table of the same object","body":"<p>Sorry If I took a lot of time to answer, for this code, I was doing something showing me that I didn't understand the concept of injection.</p>\n<p>finally, this was the code I was suppose to put in my Controller, something very simple:</p>\n<pre><code>@PostMapping(&quot;/savingx/{parentId}&quot;)\npublic String savingxx(@ModelAttribute(&quot;section&quot;) SectionDTO sectionDTO, @PathVariable Long parentId, BindingResult bindingResult, Model model){\n    sectionService.addSectionByParent(sectionDTO, parentId);\n        returnValue= &quot;redirect:/product/detail/by/parent/{parentId}&quot;;\n}\n</code></pre>\n<p>Thanks a lot for your contributions</p>\n"}],"owner":{"account_id":14751517,"reputation":27,"user_id":10653484,"display_name":"Sany"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690273814,"creation_date":1689849616,"question_id":76729061,"body_markdown":"I&#39;m new on Java environment (Spring Boot), and try to manipulate the injections.\r\nI have a table Section, a Section can have a ***parent*** or not, but if a Section Object is ***parent*** we have to be able to list of its childrenSection.\r\n\r\n\r\n\r\nThis is my Service\r\n\r\n&gt; \r\n```\r\n@Override\r\n    public SectionDTO addSectionByParent(SectionDTO sectionDTO, Long parentId) {\r\n        log.warn(&quot; Checking the theParentSectionId:={}&quot;,parentId);\r\n        Section parent = sectionRepository.findById(parentId).orElseThrow(() -&gt; new RuntimeException(&quot;SectionParent not found exception&quot;));\r\n        Section section = sectionMapper.fromSectionDTO(sectionDTO);\r\n        section.setParentSection(parent);\r\n        Section addSection = sectionRepository.save(section);\r\n        return sectionMapper.fromSection(addSection);\r\n    }\r\n```\r\n\r\n\r\nThis is my Controller\r\n\r\n\r\n```\r\n@GetMapping(&quot;/newa/{varId}&quot;)\r\n    public ModelAndView newSectionByParentId(@PathVariable Long varId){\r\n        ModelAndView mav = new ModelAndView(&quot;detail/forma&quot;);\r\n        SectionDTO sectionDTO = new SectionDTO();\r\n        SectionDTO sectionParent = sectionService.showSection(varId);\r\n\r\n        mav.addObject(&quot;detail&quot;,sectionDTO);\r\n        mav.addObject(&quot;pro&quot;,sectionParent);\r\n        return mav;\r\n    }\r\n```\r\n\r\n\r\n```\r\n@PostMapping(&quot;/savingx&quot;)\r\n    public String savingx(@ModelAttribute(&quot;section&quot;) @Valid SectionDTO sectionDTO, BindingResult bindingResult, @RequestParam(value = &quot;parentId&quot;, required = false) Long parentId){\r\n        SectionDTO sectionParent = sectionService.showSection(parentId);\r\n      \r\n        String returnValue;\r\n        if (bindingResult.hasErrors()) {\r\n            return &quot;project/forma&quot;;\r\n        }\r\n        System.out.println(&quot;******************* parentId : &quot;+ parentId);\r\n        if (sectionParent != null) {\r\n            sectionDTO.setParentId(sectionParent.getParentId());\r\n            sectionService.addSectionByParent(sectionDTO, sectionParent.getProductId());\r\n        } \r\n\r\n        returnValue = &quot;redirect:/product/detail/by/parent/{sectionId}&quot;;\r\n\r\n        return returnValue;\r\n    }\r\n```\r\n\r\n\r\nWhen running this Controller, this is the error I have\r\n\r\n`Whitelabel Error Page\r\nThis application has no explicit mapping for /error, so you are seeing this as a fallback.`\r\n\r\nnothing explicit\r\n\r\nPlease may u explain me what&#39;s going wrong ??","title":"Create an object inserting his parentID from the table of the same object","body":"<p>I'm new on Java environment (Spring Boot), and try to manipulate the injections.\nI have a table Section, a Section can have a <em><strong>parent</strong></em> or not, but if a Section Object is <em><strong>parent</strong></em> we have to be able to list of its childrenSection.</p>\n<p>This is my Service</p>\n<blockquote>\n</blockquote>\n<pre><code>@Override\n    public SectionDTO addSectionByParent(SectionDTO sectionDTO, Long parentId) {\n        log.warn(&quot; Checking the theParentSectionId:={}&quot;,parentId);\n        Section parent = sectionRepository.findById(parentId).orElseThrow(() -&gt; new RuntimeException(&quot;SectionParent not found exception&quot;));\n        Section section = sectionMapper.fromSectionDTO(sectionDTO);\n        section.setParentSection(parent);\n        Section addSection = sectionRepository.save(section);\n        return sectionMapper.fromSection(addSection);\n    }\n</code></pre>\n<p>This is my Controller</p>\n<pre><code>@GetMapping(&quot;/newa/{varId}&quot;)\n    public ModelAndView newSectionByParentId(@PathVariable Long varId){\n        ModelAndView mav = new ModelAndView(&quot;detail/forma&quot;);\n        SectionDTO sectionDTO = new SectionDTO();\n        SectionDTO sectionParent = sectionService.showSection(varId);\n\n        mav.addObject(&quot;detail&quot;,sectionDTO);\n        mav.addObject(&quot;pro&quot;,sectionParent);\n        return mav;\n    }\n</code></pre>\n<pre><code>@PostMapping(&quot;/savingx&quot;)\n    public String savingx(@ModelAttribute(&quot;section&quot;) @Valid SectionDTO sectionDTO, BindingResult bindingResult, @RequestParam(value = &quot;parentId&quot;, required = false) Long parentId){\n        SectionDTO sectionParent = sectionService.showSection(parentId);\n      \n        String returnValue;\n        if (bindingResult.hasErrors()) {\n            return &quot;project/forma&quot;;\n        }\n        System.out.println(&quot;******************* parentId : &quot;+ parentId);\n        if (sectionParent != null) {\n            sectionDTO.setParentId(sectionParent.getParentId());\n            sectionService.addSectionByParent(sectionDTO, sectionParent.getProductId());\n        } \n\n        returnValue = &quot;redirect:/product/detail/by/parent/{sectionId}&quot;;\n\n        return returnValue;\n    }\n</code></pre>\n<p>When running this Controller, this is the error I have</p>\n<p><code>Whitelabel Error Page This application has no explicit mapping for /error, so you are seeing this as a fallback.</code></p>\n<p>nothing explicit</p>\n<p>Please may u explain me what's going wrong ??</p>\n"},{"tags":["java","linux","jacoco","tomcat9"],"comments":[{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689937248,"post_id":76736755,"comment_id":135287057,"body_markdown":"rt.jar contains the &#39;bootstrap&#39; Core SE classes in the JRE runtime , However , first point is the class name $JaCoCo probably should not start with &quot;$&quot; its usually the start of a nested subclass name!    $JaCoCo is the &quot;target&quot;   InvocationTargetException    ,  too if it needs to be placed amongst the java.base/ in the Core classes then the name should be changed and java.base configuration for the add in should be notified to the bootstrap on startup.","body":"rt.jar contains the &#39;bootstrap&#39; Core SE classes in the JRE runtime , However , first point is the class name $JaCoCo probably should not start with &quot;$&quot; its usually the start of a nested subclass name!    $JaCoCo is the &quot;target&quot;   InvocationTargetException    ,  too if it needs to be placed amongst the java.base/ in the Core classes then the name should be changed and java.base configuration for the add in should be notified to the bootstrap on startup."},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1689938324,"post_id":76736755,"comment_id":135287257,"body_markdown":"java.lang.LinkageError , it failed to copy the class file for $JaCoCo from the java.lang folder after rt.jar was expanded , perhaps after jvm startup put the class in before calling the main class or put it to the head of the jar list on the command line to extract it before it is called for use. Appears more the first thought ffor the LinkageError","body":"java.lang.LinkageError , it failed to copy the class file for $JaCoCo from the java.lang folder after rt.jar was expanded , perhaps after jvm startup put the class in before calling the main class or put it to the head of the jar list on the command line to extract it before it is called for use. Appears more the first thought ffor the LinkageError"}],"answers":[{"tags":[],"owner":{"account_id":88629,"reputation":9961,"user_id":244993,"display_name":"Godin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690014650,"creation_date":1690014650,"answer_id":76742927,"question_id":76736755,"body_markdown":"Usage of more than one JaCoCo agent in one JVM is not allowed.\r\n\r\nFor example execution of\r\n\r\n```\r\njava -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -version\r\n```\r\n\r\nleads to\r\n\r\n```\r\nopenjdk version &quot;11.0.17&quot; 2022-10-18\r\nOpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)\r\nOpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)\r\n```\r\n\r\nwhereas execution of\r\n\r\n```\r\njava -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -version\r\n```\r\n\r\nleads to exactly the same error that you see\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513)\r\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime$Lookup.defineClass(InjectedClassRuntime.java:134)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime.startup(InjectedClassRuntime.java:54)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.PreMain.premain(PreMain.java:50)\r\n        ... 6 more\r\nCaused by: java.lang.LinkageError: loader &#39;bootstrap&#39; attempted duplicate class definition for java.lang.$JaCoCo. (java.lang.$JaCoCo is in module java.base of loader &#39;bootstrap&#39;)\r\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n        at java.base/java.lang.System$2.defineClass(System.java:2131)\r\n        at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:962)\r\n        ... 13 more\r\n*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message agent load/premain call failed at ./src/java.instrument/share/native/libinstrument/JPLISAgent.c line: 422\r\nFATAL ERROR in native method: processing of -javaagent failed, processJavaStart failed\r\n```\r\n\r\nThus search what in your configuration leads to several `-javaagent`","title":"Jacoco agent faild to start on tomcat9: java.lang.LinkageError: loader &#39;bootstrap&#39; attempted duplicate class definition for java.lang.$JaCoCo","body":"<p>Usage of more than one JaCoCo agent in one JVM is not allowed.</p>\n<p>For example execution of</p>\n<pre><code>java -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -version\n</code></pre>\n<p>leads to</p>\n<pre><code>openjdk version &quot;11.0.17&quot; 2022-10-18\nOpenJDK Runtime Environment Temurin-11.0.17+8 (build 11.0.17+8)\nOpenJDK 64-Bit Server VM Temurin-11.0.17+8 (build 11.0.17+8, mixed mode)\n</code></pre>\n<p>whereas execution of</p>\n<pre><code>java -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -javaagent:jacoco-0.8.10/lib/jacocoagent.jar -version\n</code></pre>\n<p>leads to exactly the same error that you see</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513)\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\nCaused by: java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime$Lookup.defineClass(InjectedClassRuntime.java:134)\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime.startup(InjectedClassRuntime.java:54)\n        at org.jacoco.agent.rt.internal_4a7f17c.PreMain.premain(PreMain.java:50)\n        ... 6 more\nCaused by: java.lang.LinkageError: loader 'bootstrap' attempted duplicate class definition for java.lang.$JaCoCo. (java.lang.$JaCoCo is in module java.base of loader 'bootstrap')\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.System$2.defineClass(System.java:2131)\n        at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:962)\n        ... 13 more\n*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message agent load/premain call failed at ./src/java.instrument/share/native/libinstrument/JPLISAgent.c line: 422\nFATAL ERROR in native method: processing of -javaagent failed, processJavaStart failed\n</code></pre>\n<p>Thus search what in your configuration leads to several <code>-javaagent</code></p>\n"},{"tags":[],"owner":{"account_id":29062852,"reputation":1,"user_id":22263121,"display_name":"Mathieu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690273023,"creation_date":1690273023,"answer_id":76760723,"question_id":76736755,"body_markdown":"Thanks for your help. I solved my problem by changing:\r\n\r\n    export JAVA_OPTS=&quot;$JAVA_OPTS -Dlogback.ContextSelector=JNDI -Xms2G -Xmx16G -javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=com.worldline.*,address=localhost,append=false&quot;\r\n\r\nBy:\r\n\r\n    export CATALINA_OPTS=&quot;-Dlogback.ContextSelector=JNDI -Xms2G -Xmx16G -javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=com.worldline.*,address=localhost,append=false","title":"Jacoco agent faild to start on tomcat9: java.lang.LinkageError: loader &#39;bootstrap&#39; attempted duplicate class definition for java.lang.$JaCoCo","body":"<p>Thanks for your help. I solved my problem by changing:</p>\n<pre><code>export JAVA_OPTS=&quot;$JAVA_OPTS -Dlogback.ContextSelector=JNDI -Xms2G -Xmx16G -javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=com.worldline.*,address=localhost,append=false&quot;\n</code></pre>\n<p>By:</p>\n<pre><code>export CATALINA_OPTS=&quot;-Dlogback.ContextSelector=JNDI -Xms2G -Xmx16G -javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=com.worldline.*,address=localhost,append=false\n</code></pre>\n"}],"owner":{"account_id":29062852,"reputation":1,"user_id":22263121,"display_name":"Mathieu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":157,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76760723,"answer_count":2,"score":0,"last_activity_date":1690273023,"creation_date":1689931965,"question_id":76736755,"body_markdown":"When I try to start my tomcat 9 server on linux I have this error:\r\n\r\n```\r\nNOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\r\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513)\r\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime$Lookup.defineClass(InjectedClassRuntime.java:134)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime.startup(InjectedClassRuntime.java:54)\r\n        at org.jacoco.agent.rt.internal_4a7f17c.PreMain.premain(PreMain.java:50)\r\n        ... 6 more\r\nCaused by: java.lang.LinkageError: loader &#39;bootstrap&#39; attempted duplicate class definition for java.lang.$JaCoCo. (java.lang.$JaCoCo is in module java.base of loader &#39;bootstrap&#39;)\r\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\r\n        at java.base/java.lang.System$2.defineClass(System.java:2131)\r\n        at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:962)\r\n        ... 13 more\r\n*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message agent load/premain call failed at src/java.instrument/share/native/libinstrument/JPLISAgent.c line: 422\r\nFATAL ERROR in native method: processing of -javaagent failed, processJavaStart failed\r\n```\r\n\r\nI use this command line:\r\n`-javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=myPackage.*,append=false`\r\n\r\nI am using OpenJDK 64-Bit Server VM Corretto-11.0.19.7.1, the latest version of tomcat9 and jacoco 0.8.10. \r\n\r\nI have the same configuration on windows and it works fine. My application is a war buit with maven and I don&#39;t have any problems on windows. \r\n\r\nI tried to change my tomcat version and my JDK version but I still have the same problem. I don&#39;t find any solutions on the web.\r\nI have no Jacoco dependencies in my pom.xml","title":"Jacoco agent faild to start on tomcat9: java.lang.LinkageError: loader &#39;bootstrap&#39; attempted duplicate class definition for java.lang.$JaCoCo","body":"<p>When I try to start my tomcat 9 server on linux I have this error:</p>\n<pre><code>NOTE: Picked up JDK_JAVA_OPTIONS:  --add-opens=java.base/java.lang=ALL-UNNAMED --add-opens=java.base/java.io=ALL-UNNAMED --add-opens=java.base/java.util=ALL-UNNAMED --add-opens=java.base/java.util.concurrent=ALL-UNNAMED --add-opens=java.rmi/sun.rmi.transport=ALL-UNNAMED\nException in thread &quot;main&quot; java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:513)\n        at java.instrument/sun.instrument.InstrumentationImpl.loadClassAndCallPremain(InstrumentationImpl.java:525)\nCaused by: java.lang.reflect.InvocationTargetException\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime$Lookup.defineClass(InjectedClassRuntime.java:134)\n        at org.jacoco.agent.rt.internal_4a7f17c.core.runtime.InjectedClassRuntime.startup(InjectedClassRuntime.java:54)\n        at org.jacoco.agent.rt.internal_4a7f17c.PreMain.premain(PreMain.java:50)\n        ... 6 more\nCaused by: java.lang.LinkageError: loader 'bootstrap' attempted duplicate class definition for java.lang.$JaCoCo. (java.lang.$JaCoCo is in module java.base of loader 'bootstrap')\n        at java.base/java.lang.ClassLoader.defineClass1(Native Method)\n        at java.base/java.lang.System$2.defineClass(System.java:2131)\n        at java.base/java.lang.invoke.MethodHandles$Lookup.defineClass(MethodHandles.java:962)\n        ... 13 more\n*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message agent load/premain call failed at src/java.instrument/share/native/libinstrument/JPLISAgent.c line: 422\nFATAL ERROR in native method: processing of -javaagent failed, processJavaStart failed\n</code></pre>\n<p>I use this command line:\n<code>-javaagent:/home/jenkins/tools/jacoco/lib/jacocoagent.jar=port=6300,destfile=/home/jenkins/jacoco/jacoco.exec,output=tcpserver,includes=myPackage.*,append=false</code></p>\n<p>I am using OpenJDK 64-Bit Server VM Corretto-11.0.19.7.1, the latest version of tomcat9 and jacoco 0.8.10.</p>\n<p>I have the same configuration on windows and it works fine. My application is a war buit with maven and I don't have any problems on windows.</p>\n<p>I tried to change my tomcat version and my JDK version but I still have the same problem. I don't find any solutions on the web.\nI have no Jacoco dependencies in my pom.xml</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2360785,"reputation":11123,"user_id":2067492,"display_name":"matt"},"score":1,"creation_date":1675164389,"post_id":75296179,"comment_id":132865242,"body_markdown":"It sounds like you should look at the `msedge.exe` options when you start it from the command line. Maybe there is an option to have it start a new window? What you&#39;re currently doing, you should probably use [Desktop.browse](https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Desktop.html#browse(java.net.URI)) Although I don&#39;t think it will create a new window. It will also use your default browser and not necessarily edge.","body":"It sounds like you should look at the <code>msedge.exe</code> options when you start it from the command line. Maybe there is an option to have it start a new window? What you&#39;re currently doing, you should probably use <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.desktop/java/awt/Desktop.html#browse(java.net.URI)\" rel=\"nofollow noreferrer\">Desktop.browse</a> Although I don&#39;t think it will create a new window. It will also use your default browser and not necessarily edge."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1675164994,"creation_date":1675164994,"answer_id":75296545,"question_id":75296179,"body_markdown":"[ProcessBuilder][1] is not a terminal emulator. You don&#39;t need `cmd.exe`. You can run `msedge.exe` directly.\r\n\r\nI first searched Google for **microsoft edge command line options** which led me to:\r\n\r\n[Get list of Edge command line switches][2]\r\n\r\nand that led me to:\r\n\r\n[List of Chromium Command Line Switches][3]\r\n\r\nand that contained:\r\n```none\r\n--new-window\r\n```\r\nSo the minimal code required is:\r\n```java\r\nProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files (x86)\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe&quot;,\r\n                                       &quot;--new-window&quot;,\r\n                                       &quot;C:\\\\MyView.html&quot;); \r\ntry {\r\n    pb.start();\r\n}\r\ncatch (IOException xIo) {\r\n    xIo.printStackTrace();\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ProcessBuilder.html\r\n  [2]: https://answers.microsoft.com/en-us/microsoftedge/forum/all/get-list-of-edge-command-line-switches/519d9efd-03df-4815-9cc7-b8f51d1bc932\r\n  [3]: https://peter.sh/experiments/chromium-command-line-switches/","title":"Open a local HTML File in a new window in Edge using Java","body":"<p><a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">ProcessBuilder</a> is not a terminal emulator. You don't need <code>cmd.exe</code>. You can run <code>msedge.exe</code> directly.</p>\n<p>I first searched Google for <strong>microsoft edge command line options</strong> which led me to:</p>\n<p><a href=\"https://answers.microsoft.com/en-us/microsoftedge/forum/all/get-list-of-edge-command-line-switches/519d9efd-03df-4815-9cc7-b8f51d1bc932\" rel=\"nofollow noreferrer\">Get list of Edge command line switches</a></p>\n<p>and that led me to:</p>\n<p><a href=\"https://peter.sh/experiments/chromium-command-line-switches/\" rel=\"nofollow noreferrer\">List of Chromium Command Line Switches</a></p>\n<p>and that contained:</p>\n<pre class=\"lang-none prettyprint-override\"><code>--new-window\n</code></pre>\n<p>So the minimal code required is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ProcessBuilder pb = new ProcessBuilder(&quot;C:\\\\Program Files (x86)\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe&quot;,\n                                       &quot;--new-window&quot;,\n                                       &quot;C:\\\\MyView.html&quot;); \ntry {\n    pb.start();\n}\ncatch (IOException xIo) {\n    xIo.printStackTrace();\n}\n</code></pre>\n"}],"owner":{"account_id":23781564,"reputation":7,"user_id":17794172,"display_name":"Mahesh M"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":325,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":75296545,"answer_count":1,"score":-1,"last_activity_date":1690272460,"creation_date":1675163105,"question_id":75296179,"body_markdown":"How to open a local HTML file in a new window in Edge? I tried the code below, but the HTML file opened in the same window in a different tab. I need to open the HTML file in a separate window. please do the needful\r\n\r\n    Process p = rt.exec(&quot;cmd.exe /C start \\&quot;C:\\\\Program Files (x86)\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe&quot; C:\\\\MyView.html&quot;);\r\n\t\t\t","title":"Open a local HTML File in a new window in Edge using Java","body":"<p>How to open a local HTML file in a new window in Edge? I tried the code below, but the HTML file opened in the same window in a different tab. I need to open the HTML file in a separate window. please do the needful</p>\n<pre><code>Process p = rt.exec(&quot;cmd.exe /C start \\&quot;C:\\\\Program Files (x86)\\\\Microsoft\\\\Edge\\\\Application\\\\msedge.exe&quot; C:\\\\MyView.html&quot;);\n        \n</code></pre>\n"},{"tags":["java","caching","comparator","treemap","kryo"],"owner":{"account_id":2453858,"reputation":307,"user_id":2139509,"accept_rate":35,"display_name":"nahid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690272376,"creation_date":1690272376,"question_id":76760633,"body_markdown":"I&#39;m using Kryo 5.2 to serialize the following TreeMap with Comparator:\r\n```\r\npublic class Library {\r\n    NavigableMap&lt;Book, String&gt; books = new TreeMap(Book.getComparator());\r\n}\r\n\r\n@Getter\r\n@Setter\r\nclass Book {\r\n    int date;\r\n    String author;\r\n\r\n    public static Comparator&lt;Book&gt; getComparator() {\r\n        return Comparator.comparingInt(Book::getDate)\r\n                .thenComparing(Book::getAuthor);\r\n    }\r\n}\r\n```\r\nI have tried registering the Library class and using the following Serialization ways, but still get the error\r\n\r\n`\r\nKryo Serializer\r\n`\r\n```\r\npublic class Library implements KryoSerializable {\r\n    NavigableMap&lt;Book, String&gt; books = new TreeMap(Book.getComparator());\r\n\r\n    @Override\r\n    public void write(Kryo kryo, Output output) {\r\n        kryo.writeClassAndObject(output, books);\r\n    }\r\n\r\n    @Override\r\n    public void read(Kryo kryo, Input input) {\r\n        books = (NavigableMap&lt;Book, String&gt;)kryo.readClassAndObject(input);\r\n    }\r\n}\r\n\r\nkryo.register(Library.class);\r\n```\r\n\r\n`Custom Serializer`\r\n\r\n```\r\nclass LibrarySerializer extends Serializer&lt;Library&gt; {\r\n    @Override\r\n    public void write(Kryo kryo, Output output, Library library) {\r\n        kryo.writeClassAndObject(output, library.books);\r\n    }\r\n\r\n    @Override\r\n    public Library read(Kryo kryo, Input input, Class&lt;Library&gt; type) {\r\n        Library library = new Library();\r\n        library.books = (NavigableMap&lt;Book, String&gt;)kryo.readClassAndObjcet(input);\r\n        return library;\r\n    }\r\n}\r\n\r\nkryo.register(Library.class, new LibrarySerializer());\r\n```\r\n\r\nP.S. Since I need to cache this object I can&#39;t use transient on the Map.\r\n\r\n","title":"Kryo - Serialization of TreeMap with a Comparator - InaccessibleObjectException: Unable to make field private final java.util.Comparator","body":"<p>I'm using Kryo 5.2 to serialize the following TreeMap with Comparator:</p>\n<pre><code>public class Library {\n    NavigableMap&lt;Book, String&gt; books = new TreeMap(Book.getComparator());\n}\n\n@Getter\n@Setter\nclass Book {\n    int date;\n    String author;\n\n    public static Comparator&lt;Book&gt; getComparator() {\n        return Comparator.comparingInt(Book::getDate)\n                .thenComparing(Book::getAuthor);\n    }\n}\n</code></pre>\n<p>I have tried registering the Library class and using the following Serialization ways, but still get the error</p>\n<p><code>Kryo Serializer</code></p>\n<pre><code>public class Library implements KryoSerializable {\n    NavigableMap&lt;Book, String&gt; books = new TreeMap(Book.getComparator());\n\n    @Override\n    public void write(Kryo kryo, Output output) {\n        kryo.writeClassAndObject(output, books);\n    }\n\n    @Override\n    public void read(Kryo kryo, Input input) {\n        books = (NavigableMap&lt;Book, String&gt;)kryo.readClassAndObject(input);\n    }\n}\n\nkryo.register(Library.class);\n</code></pre>\n<p><code>Custom Serializer</code></p>\n<pre><code>class LibrarySerializer extends Serializer&lt;Library&gt; {\n    @Override\n    public void write(Kryo kryo, Output output, Library library) {\n        kryo.writeClassAndObject(output, library.books);\n    }\n\n    @Override\n    public Library read(Kryo kryo, Input input, Class&lt;Library&gt; type) {\n        Library library = new Library();\n        library.books = (NavigableMap&lt;Book, String&gt;)kryo.readClassAndObjcet(input);\n        return library;\n    }\n}\n\nkryo.register(Library.class, new LibrarySerializer());\n</code></pre>\n<p>P.S. Since I need to cache this object I can't use transient on the Map.</p>\n"},{"tags":["java","spring-boot","hibernate","jpa"],"answers":[{"comments":[{"owner":{"account_id":22257965,"reputation":59,"user_id":16489856,"display_name":"Centuri0n"},"score":0,"creation_date":1676375593,"post_id":75446339,"comment_id":133120502,"body_markdown":"It is still giving me the same error..","body":"It is still giving me the same error.."},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1676375923,"post_id":75446339,"comment_id":133120591,"body_markdown":"What is the state of the `user_info` object when you call `save` for it?","body":"What is the state of the <code>user_info</code> object when you call <code>save</code> for it?"},{"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"score":0,"creation_date":1676376183,"post_id":75446339,"comment_id":133120674,"body_markdown":"There is a test in Hibernate that does something very similar which I tried to adapt to what you presented here. It works when the id is assigned to an empty object. Try it out yourself, and if you can reproduce your issue in that test case, let me know: https://github.com/hibernate/hibernate-orm/blob/main/hibernate-core/src/test/java/org/hibernate/orm/test/ecid/EmbeddedIdWithMapsIdTargetingDerivedEntityTest.java","body":"There is a test in Hibernate that does something very similar which I tried to adapt to what you presented here. It works when the id is assigned to an empty object. Try it out yourself, and if you can reproduce your issue in that test case, let me know: <a href=\"https://github.com/hibernate/hibernate-orm/blob/main/hibernate-core/src/test/java/org/hibernate/orm/test/ecid/EmbeddedIdWithMapsIdTargetingDerivedEntityTest.java\" rel=\"nofollow noreferrer\">github.com/hibernate/hibernate-orm/blob/main/hibernate-core/&zwnj;&#8203;src/&hellip;</a>"}],"tags":[],"owner":{"account_id":179640,"reputation":15442,"user_id":412446,"accept_rate":41,"display_name":"Christian Beikov"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1676369638,"creation_date":1676369638,"answer_id":75446339,"question_id":75435550,"body_markdown":"It looks like `WorkstationUserInfo#id` is null. Initialize it to an empty embeddable object and then this should work e.g. like this:\r\n\r\n        @EmbeddedId\r\n        private WorkstationUserInfoKey id = new WorkstationUserInfoKey();","title":"Insert in many to many JPA table fails with : Could not set value of type [java.lang.String]","body":"<p>It looks like <code>WorkstationUserInfo#id</code> is null. Initialize it to an empty embeddable object and then this should work e.g. like this:</p>\n<pre><code>    @EmbeddedId\n    private WorkstationUserInfoKey id = new WorkstationUserInfoKey();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4257006,"reputation":694,"user_id":3482424,"accept_rate":80,"display_name":"Morten"},"score":0,"creation_date":1690476775,"post_id":76760622,"comment_id":135362712,"body_markdown":"It is unclear if this is a solution proposal to the problem.","body":"It is unclear if this is a solution proposal to the problem."}],"tags":[],"owner":{"account_id":28248018,"reputation":1,"user_id":21594731,"display_name":"Ho&#224;ng Vũ văn"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690272308,"creation_date":1690272308,"answer_id":76760622,"question_id":75435550,"body_markdown":"I also got the same error as you, can I suggest you that you can drop the `@Builder` in the WorkStationUserInfor class and add `WorkStationUserInfoKey id = new WorkStationUserInfoKey();`","title":"Insert in many to many JPA table fails with : Could not set value of type [java.lang.String]","body":"<p>I also got the same error as you, can I suggest you that you can drop the <code>@Builder</code> in the WorkStationUserInfor class and add <code>WorkStationUserInfoKey id = new WorkStationUserInfoKey();</code></p>\n"}],"owner":{"account_id":22257965,"reputation":59,"user_id":16489856,"display_name":"Centuri0n"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":639,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690272308,"creation_date":1676289287,"question_id":75435550,"body_markdown":"I have a many to many association implemented in JPA, between class User and Workstation.\r\n\r\nWorkstation Class:\r\n```\r\n@RequiredArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Entity\r\npublic class Workstation {\r\n\r\n    @Id\r\n    private String name;\r\n    private String ipv4;\r\n    private String operating_system;\r\n\r\n    \r\n\r\n    @OneToMany(mappedBy = &quot;workstation&quot;, cascade = CascadeType.ALL)\r\n    @JsonIgnore\r\n    @ToString.Exclude\r\n    private List&lt;WorkstationUserInfo&gt; registered_users;\r\n    \r\n\r\n}\r\n```\r\n\r\nUser class:\r\n```\r\n@RequiredArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@Getter\r\n@Setter\r\n\r\n@Entity\r\n@Table(name=&quot;user_&quot;)\r\npublic class User {\r\n\r\n    @Id\r\n    private String email;\r\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;WorkstationUserInfo&gt; workstations;\r\n\r\n\r\n}\r\n\r\n```\r\nMany to many class:\r\n```\r\n@RequiredArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@Getter\r\n@Setter\r\n@ToString\r\n\r\n\r\n@Entity\r\n@Table(uniqueConstraints = {\r\n        @UniqueConstraint(name = &quot;UniqueUsernameOnWorkstation&quot;, columnNames = {&quot;workstation_name&quot;, &quot;username&quot;})})\r\npublic class WorkstationUserInfo {\r\n        @EmbeddedId\r\n        private WorkstationUserInfoKey id;\r\n\r\n        @ManyToOne\r\n        @MapsId(&quot;workstation_name&quot;)\r\n        @JoinColumn(name = &quot;workstation_name&quot;)\r\n        private Workstation workstation;\r\n\r\n        @ManyToOne\r\n        @MapsId(&quot;user_email&quot;)\r\n        @JoinColumn(name = &quot;user_email&quot;)\r\n        private User user;\r\n\r\n        private String username;\r\n\r\n}\r\n```\r\n\r\nEmbeddable class:\r\n```\r\n@RequiredArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\n@Data\r\n\r\n@Embeddable\r\npublic class WorkstationUserInfoKey implements Serializable {\r\n    private String workstation_name;\r\n\r\n    private String user_email;\r\n\r\n}\r\n```\r\nWorkstationUserInfoRepository class:\r\n```\r\npublic interface WorkstationUserInfoRepository extends JpaRepository&lt;WorkstationUserInfo, WorkstationUserInfoKey&gt; {\r\n}\r\n\r\n```\r\nI am new to hibernate, perhaps I have misconfigured something. The problem is that when I call:\r\n```\r\nuser_info_repository.save(user_info);\r\n```\r\nIt fails with:\r\n```\r\n2023-02-13T12:29:02.425+01:00 ERROR 25140 --- [nio-6970-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Could not set value of type [java.lang.String] : `com.cinicolo.workstationreservationservice.model.WorkstationUserInfoKey.user_email` (setter)] with root cause\r\n\r\njava.lang.NullPointerException: Cannot invoke &quot;Object.getClass()&quot; because &quot;o&quot; is null\r\n\tat java.base/jdk.internal.reflect.MethodHandleFieldAccessorImpl.ensureObj(MethodHandleFieldAccessorImpl.java:62) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.MethodHandleObjectFieldAccessorImpl.set(MethodHandleObjectFieldAccessorImpl.java:101) ~[na:na]\r\n\tat java.base/java.lang.reflect.Field.set(Field.java:820) ~[na:na]\r\n\tat org.hibernate.property.access.spi.SetterFieldImpl.set(SetterFieldImpl.java:53) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.mapping.Component$ValueGenerationPlan.execute(Component.java:538) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.id.CompositeNestedGeneratedValueGenerator.generate(CompositeNestedGeneratedValueGenerator.java:113) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:114) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:737) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat org.hibernate.internal.SessionImpl.persist(SessionImpl.java:721) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.3.jar:6.0.3]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy119.persist(Unknown Source) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307) ~[spring-orm-6.0.3.jar:6.0.3]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy119.persist(Unknown Source) ~[na:na]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610) ~[spring-data-jpa-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.0.0.jar:3.0.0]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.0.0.jar:3.0.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163) ~[spring-data-jpa-3.0.0.jar:3.0.0]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat jdk.proxy2/jdk.proxy2.$Proxy128.saveAll(Unknown Source) ~[na:na]\r\n\tat com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl.lambda$saveUsersOnWorkstations$1(WorkstationServiceImpl.java:65) ~[classes/:na]\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\r\n\tat com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl.saveUsersOnWorkstations(WorkstationServiceImpl.java:58) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-6.0.3.jar:6.0.3]\r\n\tat com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl$$SpringCGLIB$$0.saveUsersOnWorkstations(&lt;generated&gt;) ~[classes/:na]\r\n\tat com.cinicolo.workstationreservationservice.controller.WorkstationController.saveUsersOnWorkstations(WorkstationController.java:46) ~[classes/:na]\r\n\tat java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1010) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:913) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) ~[tomcat-embed-core-10.1.4.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:884) ~[spring-webmvc-6.0.3.jar:6.0.3]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.4.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.0.1.jar:6.0.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\r\n```\r\nCan anyone help?\r\n\r\n","title":"Insert in many to many JPA table fails with : Could not set value of type [java.lang.String]","body":"<p>I have a many to many association implemented in JPA, between class User and Workstation.</p>\n<p>Workstation Class:</p>\n<pre><code>@RequiredArgsConstructor\n@AllArgsConstructor\n@Builder\n@Getter\n@Setter\n@ToString\n@Entity\npublic class Workstation {\n\n    @Id\n    private String name;\n    private String ipv4;\n    private String operating_system;\n\n    \n\n    @OneToMany(mappedBy = &quot;workstation&quot;, cascade = CascadeType.ALL)\n    @JsonIgnore\n    @ToString.Exclude\n    private List&lt;WorkstationUserInfo&gt; registered_users;\n    \n\n}\n</code></pre>\n<p>User class:</p>\n<pre><code>@RequiredArgsConstructor\n@AllArgsConstructor\n@Builder\n@Getter\n@Setter\n\n@Entity\n@Table(name=&quot;user_&quot;)\npublic class User {\n\n    @Id\n    private String email;\n    @OneToMany(mappedBy = &quot;user&quot;, cascade = CascadeType.ALL)\n    private List&lt;WorkstationUserInfo&gt; workstations;\n\n\n}\n\n</code></pre>\n<p>Many to many class:</p>\n<pre><code>@RequiredArgsConstructor\n@AllArgsConstructor\n@Builder\n@Getter\n@Setter\n@ToString\n\n\n@Entity\n@Table(uniqueConstraints = {\n        @UniqueConstraint(name = &quot;UniqueUsernameOnWorkstation&quot;, columnNames = {&quot;workstation_name&quot;, &quot;username&quot;})})\npublic class WorkstationUserInfo {\n        @EmbeddedId\n        private WorkstationUserInfoKey id;\n\n        @ManyToOne\n        @MapsId(&quot;workstation_name&quot;)\n        @JoinColumn(name = &quot;workstation_name&quot;)\n        private Workstation workstation;\n\n        @ManyToOne\n        @MapsId(&quot;user_email&quot;)\n        @JoinColumn(name = &quot;user_email&quot;)\n        private User user;\n\n        private String username;\n\n}\n</code></pre>\n<p>Embeddable class:</p>\n<pre><code>@RequiredArgsConstructor\n@AllArgsConstructor\n@Builder\n@Data\n\n@Embeddable\npublic class WorkstationUserInfoKey implements Serializable {\n    private String workstation_name;\n\n    private String user_email;\n\n}\n</code></pre>\n<p>WorkstationUserInfoRepository class:</p>\n<pre><code>public interface WorkstationUserInfoRepository extends JpaRepository&lt;WorkstationUserInfo, WorkstationUserInfoKey&gt; {\n}\n\n</code></pre>\n<p>I am new to hibernate, perhaps I have misconfigured something. The problem is that when I call:</p>\n<pre><code>user_info_repository.save(user_info);\n</code></pre>\n<p>It fails with:</p>\n<pre><code>2023-02-13T12:29:02.425+01:00 ERROR 25140 --- [nio-6970-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.orm.jpa.JpaSystemException: Could not set value of type [java.lang.String] : `com.cinicolo.workstationreservationservice.model.WorkstationUserInfoKey.user_email` (setter)] with root cause\n\njava.lang.NullPointerException: Cannot invoke &quot;Object.getClass()&quot; because &quot;o&quot; is null\n    at java.base/jdk.internal.reflect.MethodHandleFieldAccessorImpl.ensureObj(MethodHandleFieldAccessorImpl.java:62) ~[na:na]\n    at java.base/jdk.internal.reflect.MethodHandleObjectFieldAccessorImpl.set(MethodHandleObjectFieldAccessorImpl.java:101) ~[na:na]\n    at java.base/java.lang.reflect.Field.set(Field.java:820) ~[na:na]\n    at org.hibernate.property.access.spi.SetterFieldImpl.set(SetterFieldImpl.java:53) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.mapping.Component$ValueGenerationPlan.execute(Component.java:538) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.id.CompositeNestedGeneratedValueGenerator.generate(CompositeNestedGeneratedValueGenerator.java:113) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:114) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:737) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:721) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.3.jar:6.0.3]\n    at jdk.proxy2/jdk.proxy2.$Proxy119.persist(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307) ~[spring-orm-6.0.3.jar:6.0.3]\n    at jdk.proxy2/jdk.proxy2.$Proxy119.persist(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610) ~[spring-data-jpa-3.0.0.jar:3.0.0]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.saveAll(SimpleJpaRepository.java:636) ~[spring-data-jpa-3.0.0.jar:3.0.0]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.0.0.jar:3.0.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163) ~[spring-data-jpa-3.0.0.jar:3.0.0]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218) ~[spring-aop-6.0.3.jar:6.0.3]\n    at jdk.proxy2/jdk.proxy2.$Proxy128.saveAll(Unknown Source) ~[na:na]\n    at com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl.lambda$saveUsersOnWorkstations$1(WorkstationServiceImpl.java:65) ~[classes/:na]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl.saveUsersOnWorkstations(WorkstationServiceImpl.java:58) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) ~[spring-aop-6.0.3.jar:6.0.3]\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) ~[spring-aop-6.0.3.jar:6.0.3]\n    at com.cinicolo.workstationreservationservice.service.WorkstationServiceImpl$$SpringCGLIB$$0.saveUsersOnWorkstations(&lt;generated&gt;) ~[classes/:na]\n    at com.cinicolo.workstationreservationservice.controller.WorkstationController.saveUsersOnWorkstations(WorkstationController.java:46) ~[classes/:na]\n    at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1010) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:913) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) ~[tomcat-embed-core-10.1.4.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:884) ~[spring-webmvc-6.0.3.jar:6.0.3]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.4.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145) ~[spring-security-oauth2-resource-server-6.0.1.jar:6.0.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.1.jar:6.0.1]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.3.jar:6.0.3]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.4.jar:10.1.4]\n    at java.base/java.lang.Thread.run(Thread.java:1589) ~[na:na]\n</code></pre>\n<p>Can anyone help?</p>\n"},{"tags":["java","json","rest","pojo","payload"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1690242999,"post_id":76758228,"comment_id":135323167,"body_markdown":"How are you &quot;logging&quot; it? Also, please delete as much code as possible from your question unless it&#39;s absolutely required to describe your problem. For example, all the `toString()` methods can be deleted because they are irrelevant. Please make an effort to curate the code you share to so the community doesn&#39;t have to wade through reams of irrelevant code to help you.","body":"How are you &quot;logging&quot; it? Also, please delete as much code as possible from your question unless it&#39;s absolutely required to describe your problem. For example, all the <code>toString()</code> methods can be deleted because they are irrelevant. Please make an effort to curate the code you share to so the community doesn&#39;t have to wade through reams of irrelevant code to help you."}],"answers":[{"tags":[],"owner":{"account_id":7975532,"reputation":103,"user_id":6018837,"display_name":"Daniel Matev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690271735,"creation_date":1690271735,"answer_id":76760550,"question_id":76758228,"body_markdown":"The default naming strategy that Jackson uses is `LOWER_CAMEL_CASE` which would explain why chaning the name of the object properties is not reflected in the output json. Also it&#39;s not a very good practice to have all uppercase properties unless they&#39;re constants so in your case I&#39;d suggest using the `@JsonProperty(value=&lt;your-value&gt;)` annotation.","title":"Changes in POJO are not reflecting in JSON payload in java","body":"<p>The default naming strategy that Jackson uses is <code>LOWER_CAMEL_CASE</code> which would explain why chaning the name of the object properties is not reflected in the output json. Also it's not a very good practice to have all uppercase properties unless they're constants so in your case I'd suggest using the <code>@JsonProperty(value=&lt;your-value&gt;)</code> annotation.</p>\n"}],"owner":{"account_id":25027286,"reputation":23,"user_id":18885373,"display_name":"Muazzam"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690271735,"creation_date":1690235385,"question_id":76758228,"body_markdown":"I am using POJO to create a JSON message for API input. Some of the fields from the JSON message were in lower case and I changed them to upper case but when I log the payload it the fields are still in lower case. Changes are not applied somehow. \r\n\r\nI tried rebuilding , invalidating cache, deleting older builds and removing target file. \r\n\r\n\r\nThe fields in question are , DED, MOP,MPP,LFE and SCR. \r\nWhat am I missing ? \r\n\r\nBelow is the child POJO\r\n\r\n    package com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite;\r\n    \r\n    \r\n    public class AccumCopayDetails {\r\n    \r\n    \r\n       private DED DED;\r\n       private MOP MOP;\r\n       private MPP MPP;\r\n       private LFE LFE;\r\n       private SCR SCR;\r\n    \r\n  \r\n    \r\n       public AccumCopayDetails(com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED DED, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.MOP MOP, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.MPP MPP, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.LFE LFE, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.SCR SCR) {\r\n           this.DED = DED;\r\n           this.MOP = MOP;\r\n           this.MPP = MPP;\r\n           this.LFE = LFE;\r\n           this.SCR = SCR;\r\n       }\r\n    \r\n    \r\n       @Override\r\n       public String toString() {\r\n           return &quot;AccumCopayDetails{&quot; +\r\n                   &quot;DED=&quot; + DED +\r\n                   &quot;, MOP=&quot; + MOP +\r\n                   &quot;, MPP=&quot; + MPP +\r\n                   &quot;, LFE=&quot; + LFE +\r\n                   &quot;, SCR=&quot; + SCR +\r\n                   &#39;}&#39;;\r\n       }\r\n    \r\n    \r\n       public com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED getDED() {\r\n           return DED;\r\n       }\r\n    \r\n    \r\n       public void setDED(com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED DED) {\r\n           this.DED = DED;\r\n       }\r\n\r\n\r\nParent/Main POJO\r\n\r\n    package com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite;\r\n    \r\n    \r\n    import com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.CSR.HimClaimPricingDetails;\r\n    \r\n    \r\n    public class AccumWriteInput {\r\n       private ClaimCore claimCore;\r\n       private PricingSegment pricingSegment;\r\n       private ClaimPricingDetails claimPricingDetails;\r\n       private AccumCopayDetails accumCopayDetails;\r\n       private InsuranceSegment insuranceSegment;\r\n       private String schema;\r\n       private String caseId;\r\n       private String medicalRxIndicator;\r\n       private String networkIndicator;\r\n       private String retailMailOrderIndicator;\r\n       private String brandGenericIndicator;\r\n    \r\n    \r\n    \r\n    \r\n       @Override\r\n       public String toString() {\r\n           return &quot;AccumWriteInput{&quot; +\r\n                   &quot;claimCore=&quot; + claimCore +\r\n                   &quot;, pricingSegment=&quot; + pricingSegment +\r\n                   &quot;, claimPricingDetails=&quot; + claimPricingDetails +\r\n                   &quot;, accumCopayDetails=&quot; + accumCopayDetails +\r\n                   &quot;, insuranceSegment=&quot; + insuranceSegment +\r\n                   &quot;, schema=&#39;&quot; + schema + &#39;\\&#39;&#39; +\r\n                   &quot;, caseId=&#39;&quot; + caseId + &#39;\\&#39;&#39; +\r\n                   &quot;, medicalRxIndicator=&#39;&quot; + medicalRxIndicator + &#39;\\&#39;&#39; +\r\n                   &quot;, networkIndicator=&#39;&quot; + networkIndicator + &#39;\\&#39;&#39; +\r\n                   &quot;, retailMailOrderIndicator=&#39;&quot; + retailMailOrderIndicator + &#39;\\&#39;&#39; +\r\n                   &quot;, brandGenericIndicator=&#39;&quot; + brandGenericIndicator + &#39;\\&#39;&#39; +\r\n                   &#39;}&#39;;\r\n       }\r\n\r\nThis is where the POJO is called and used as payload \r\n\r\n    ClaimCore claimCore = new ClaimCore(1625, 1, 33, 779, 659, &quot;2016-01-10&quot;, &quot;000000021284450100&quot;);\r\n       InsuranceSegment insuranceSegment = new InsuranceSegment(\r\n               &quot;21284450100&quot;, &quot;GLORIA&quot;, &quot;DELGADO&quot;, &quot;P1234567&quot;, 1,\r\n               &quot;33&quot;, &quot;00&quot;, 1, &quot;MO&quot;, &quot;Y&quot;);\r\n    \r\n    \r\n       DED DED = new DED(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\r\n       MOP MOP = new MOP(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\r\n       MPP MPP = new MPP(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\r\n       LFE LFE = new LFE(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\r\n       SCR SCR = new SCR(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\r\n    \r\n    \r\n       AccumCopayDetails accumCopayDetails = new AccumCopayDetails(DED, MOP, MPP, LFE, SCR);\r\n    \r\n    \r\n       PricingSegment pricingSegment = new PricingSegment(300.00, 0, 300.00);\r\n       com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.ClaimPricingDetails claimPricingDetails = new com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.ClaimPricingDetails(\r\n               100.00, 100.00, 0.00,\r\n               200.00, 0.00,\r\n               0.00, 0.00,\r\n               0.00, 0.00,\r\n               0.16, 100.00, &quot;B&quot;,\r\n               0.00, 0.00);\r\n    \r\n    \r\n       AccumWriteInput accumWriteInput = new AccumWriteInput(claimCore, pricingSegment, claimPricingDetails, accumCopayDetails, insuranceSegment,\r\n               &quot; &quot;, &quot;000000000212844501&quot;, &quot;P&quot;, &quot;I&quot;, &quot;R&quot;, &quot;G&quot;);\r\n    \r\n    \r\n       S68_1Response = SerenityRest.given().auth().oauth2(DomaniRx_RestAssuredOAuth2.access_token_code)\r\n               .header(&quot;platform&quot;, &quot;DR2&quot;)\r\n               .contentType(&quot;application/json&quot;)\r\n               .header(&quot;Accept&quot;, &quot;application/json&quot;)\r\n               .log().body()\r\n               .body(accumWriteInput)\r\n               .post(accumWrite)\r\n               .then()\r\n               .statusCode(200)\r\n               .extract().response();\r\n    \r\n    \r\n    }\r\n\r\n\r\nBelow is the product/payload that is logged and the words in question are still lower case: MOP,MPP,DED,LFE,SCR\r\n\r\n \r\n\r\n    &quot;accumCopayDetails&quot;: {\r\n            &quot;mop&quot;: {\r\n                &quot;copayUsedType&quot;: &quot;D&quot;,\r\n                &quot;accumulatorMetCopay&quot;: 0,\r\n                &quot;accumulatorMetCoinsurance&quot;: 0,\r\n                &quot;accumulatorMetMinimumCopay&quot;: 0,\r\n                &quot;accumulatorMetMaximumCopay&quot;: 0,\r\n                &quot;accumulatorMetCopayType&quot;: &quot; &quot;\r\n            },\r\n            &quot;mpp&quot;: {\r\n                &quot;copayUsedType&quot;: &quot;D&quot;,\r\n                &quot;accumulatorMetCopay&quot;: 0,\r\n                &quot;accumulatorMetCoinsurance&quot;: 0,\r\n                &quot;accumulatorMetMinimumCopay&quot;: 0,\r\n                &quot;accumulatorMetMaximumCopay&quot;: 0,\r\n                &quot;accumulatorMetCopayType&quot;: &quot; &quot;\r\n            },\r\n            &quot;ded&quot;: {\r\n                &quot;copayUsedType&quot;: &quot;D&quot;,\r\n                &quot;accumulatorMetCopay&quot;: 0,\r\n                &quot;accumulatorMetCoinsurance&quot;: 0,\r\n                &quot;accumulatorMetMinimumCopay&quot;: 0,\r\n                &quot;accumulatorMetMaximumCopay&quot;: 0,\r\n                &quot;accumulatorMetCopayType&quot;: &quot; &quot;\r\n            },\r\n            &quot;scr&quot;: {\r\n                &quot;copayUsedType&quot;: &quot;D&quot;,\r\n                &quot;accumulatorMetCopay&quot;: 0,\r\n                &quot;accumulatorMetCoinsurance&quot;: 0,\r\n                &quot;accumulatorMetMinimumCopay&quot;: 0,\r\n                &quot;accumulatorMetMaximumCopay&quot;: 0,\r\n                &quot;accumulatorMetCopayType&quot;: &quot; &quot;\r\n            },\r\n            &quot;lfe&quot;: {\r\n                &quot;copayUsedType&quot;: &quot;D&quot;,\r\n                &quot;accumulatorMetCopay&quot;: 0,\r\n                &quot;accumulatorMetCoinsurance&quot;: 0,\r\n                &quot;accumulatorMetMinimumCopay&quot;: 0,\r\n                &quot;accumulatorMetMaximumCopay&quot;: 0,\r\n                &quot;accumulatorMetCopayType&quot;: &quot; &quot;\r\n            }\r\n        },\r\n\r\n\r\n\r\n\r\n","title":"Changes in POJO are not reflecting in JSON payload in java","body":"<p>I am using POJO to create a JSON message for API input. Some of the fields from the JSON message were in lower case and I changed them to upper case but when I log the payload it the fields are still in lower case. Changes are not applied somehow.</p>\n<p>I tried rebuilding , invalidating cache, deleting older builds and removing target file.</p>\n<p>The fields in question are , DED, MOP,MPP,LFE and SCR.\nWhat am I missing ?</p>\n<p>Below is the child POJO</p>\n<pre><code>package com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite;\n\n\npublic class AccumCopayDetails {\n\n\n   private DED DED;\n   private MOP MOP;\n   private MPP MPP;\n   private LFE LFE;\n   private SCR SCR;\n\n\n\n   public AccumCopayDetails(com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED DED, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.MOP MOP, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.MPP MPP, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.LFE LFE, com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.SCR SCR) {\n       this.DED = DED;\n       this.MOP = MOP;\n       this.MPP = MPP;\n       this.LFE = LFE;\n       this.SCR = SCR;\n   }\n\n\n   @Override\n   public String toString() {\n       return &quot;AccumCopayDetails{&quot; +\n               &quot;DED=&quot; + DED +\n               &quot;, MOP=&quot; + MOP +\n               &quot;, MPP=&quot; + MPP +\n               &quot;, LFE=&quot; + LFE +\n               &quot;, SCR=&quot; + SCR +\n               '}';\n   }\n\n\n   public com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED getDED() {\n       return DED;\n   }\n\n\n   public void setDED(com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.DED DED) {\n       this.DED = DED;\n   }\n</code></pre>\n<p>Parent/Main POJO</p>\n<pre><code>package com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite;\n\n\nimport com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.CSR.HimClaimPricingDetails;\n\n\npublic class AccumWriteInput {\n   private ClaimCore claimCore;\n   private PricingSegment pricingSegment;\n   private ClaimPricingDetails claimPricingDetails;\n   private AccumCopayDetails accumCopayDetails;\n   private InsuranceSegment insuranceSegment;\n   private String schema;\n   private String caseId;\n   private String medicalRxIndicator;\n   private String networkIndicator;\n   private String retailMailOrderIndicator;\n   private String brandGenericIndicator;\n\n\n\n\n   @Override\n   public String toString() {\n       return &quot;AccumWriteInput{&quot; +\n               &quot;claimCore=&quot; + claimCore +\n               &quot;, pricingSegment=&quot; + pricingSegment +\n               &quot;, claimPricingDetails=&quot; + claimPricingDetails +\n               &quot;, accumCopayDetails=&quot; + accumCopayDetails +\n               &quot;, insuranceSegment=&quot; + insuranceSegment +\n               &quot;, schema='&quot; + schema + '\\'' +\n               &quot;, caseId='&quot; + caseId + '\\'' +\n               &quot;, medicalRxIndicator='&quot; + medicalRxIndicator + '\\'' +\n               &quot;, networkIndicator='&quot; + networkIndicator + '\\'' +\n               &quot;, retailMailOrderIndicator='&quot; + retailMailOrderIndicator + '\\'' +\n               &quot;, brandGenericIndicator='&quot; + brandGenericIndicator + '\\'' +\n               '}';\n   }\n</code></pre>\n<p>This is where the POJO is called and used as payload</p>\n<pre><code>ClaimCore claimCore = new ClaimCore(1625, 1, 33, 779, 659, &quot;2016-01-10&quot;, &quot;000000021284450100&quot;);\n   InsuranceSegment insuranceSegment = new InsuranceSegment(\n           &quot;21284450100&quot;, &quot;GLORIA&quot;, &quot;DELGADO&quot;, &quot;P1234567&quot;, 1,\n           &quot;33&quot;, &quot;00&quot;, 1, &quot;MO&quot;, &quot;Y&quot;);\n\n\n   DED DED = new DED(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\n   MOP MOP = new MOP(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\n   MPP MPP = new MPP(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\n   LFE LFE = new LFE(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\n   SCR SCR = new SCR(&quot;D&quot;, 0, 0, 0, 0, &quot; &quot;);\n\n\n   AccumCopayDetails accumCopayDetails = new AccumCopayDetails(DED, MOP, MPP, LFE, SCR);\n\n\n   PricingSegment pricingSegment = new PricingSegment(300.00, 0, 300.00);\n   com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.ClaimPricingDetails claimPricingDetails = new com.domanirx.automation.adjudication.adjcpe.commerc.accum.pojos.AccumCalcWrite.ClaimPricingDetails(\n           100.00, 100.00, 0.00,\n           200.00, 0.00,\n           0.00, 0.00,\n           0.00, 0.00,\n           0.16, 100.00, &quot;B&quot;,\n           0.00, 0.00);\n\n\n   AccumWriteInput accumWriteInput = new AccumWriteInput(claimCore, pricingSegment, claimPricingDetails, accumCopayDetails, insuranceSegment,\n           &quot; &quot;, &quot;000000000212844501&quot;, &quot;P&quot;, &quot;I&quot;, &quot;R&quot;, &quot;G&quot;);\n\n\n   S68_1Response = SerenityRest.given().auth().oauth2(DomaniRx_RestAssuredOAuth2.access_token_code)\n           .header(&quot;platform&quot;, &quot;DR2&quot;)\n           .contentType(&quot;application/json&quot;)\n           .header(&quot;Accept&quot;, &quot;application/json&quot;)\n           .log().body()\n           .body(accumWriteInput)\n           .post(accumWrite)\n           .then()\n           .statusCode(200)\n           .extract().response();\n\n\n}\n</code></pre>\n<p>Below is the product/payload that is logged and the words in question are still lower case: MOP,MPP,DED,LFE,SCR</p>\n<pre><code>&quot;accumCopayDetails&quot;: {\n        &quot;mop&quot;: {\n            &quot;copayUsedType&quot;: &quot;D&quot;,\n            &quot;accumulatorMetCopay&quot;: 0,\n            &quot;accumulatorMetCoinsurance&quot;: 0,\n            &quot;accumulatorMetMinimumCopay&quot;: 0,\n            &quot;accumulatorMetMaximumCopay&quot;: 0,\n            &quot;accumulatorMetCopayType&quot;: &quot; &quot;\n        },\n        &quot;mpp&quot;: {\n            &quot;copayUsedType&quot;: &quot;D&quot;,\n            &quot;accumulatorMetCopay&quot;: 0,\n            &quot;accumulatorMetCoinsurance&quot;: 0,\n            &quot;accumulatorMetMinimumCopay&quot;: 0,\n            &quot;accumulatorMetMaximumCopay&quot;: 0,\n            &quot;accumulatorMetCopayType&quot;: &quot; &quot;\n        },\n        &quot;ded&quot;: {\n            &quot;copayUsedType&quot;: &quot;D&quot;,\n            &quot;accumulatorMetCopay&quot;: 0,\n            &quot;accumulatorMetCoinsurance&quot;: 0,\n            &quot;accumulatorMetMinimumCopay&quot;: 0,\n            &quot;accumulatorMetMaximumCopay&quot;: 0,\n            &quot;accumulatorMetCopayType&quot;: &quot; &quot;\n        },\n        &quot;scr&quot;: {\n            &quot;copayUsedType&quot;: &quot;D&quot;,\n            &quot;accumulatorMetCopay&quot;: 0,\n            &quot;accumulatorMetCoinsurance&quot;: 0,\n            &quot;accumulatorMetMinimumCopay&quot;: 0,\n            &quot;accumulatorMetMaximumCopay&quot;: 0,\n            &quot;accumulatorMetCopayType&quot;: &quot; &quot;\n        },\n        &quot;lfe&quot;: {\n            &quot;copayUsedType&quot;: &quot;D&quot;,\n            &quot;accumulatorMetCopay&quot;: 0,\n            &quot;accumulatorMetCoinsurance&quot;: 0,\n            &quot;accumulatorMetMinimumCopay&quot;: 0,\n            &quot;accumulatorMetMaximumCopay&quot;: 0,\n            &quot;accumulatorMetCopayType&quot;: &quot; &quot;\n        }\n    },\n</code></pre>\n"},{"tags":["java","telegram-bot"],"owner":{"account_id":24487300,"reputation":21,"user_id":18404816,"display_name":"Kim jon stack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690270780,"creation_date":1690270780,"question_id":76760433,"body_markdown":" I&#39;m Trying build my APK using  \r\n&gt;implementation &#39;com.github.rubenlagus:TelegramBots:6.7.0&#39;\r\n\r\n**this is my dependency**\r\n```\r\ndependencies {\r\n    implementation &#39;com.android.support:support-compat:28.0.0&#39;\r\n    implementation &#39;com.github.rubenlagus:TelegramBots:6.7.0&#39;\r\n\r\n}\r\n```\r\nand i got error like this \r\n\r\n\r\n\r\n./gradlew assembleRelease\r\n\r\nStarting a Gradle Daemon, 2 incompatible and 1 stopped Daemons could not be reused, use --status for details\r\n\r\nConfiguration on demand is an incubating feature.\r\n\r\n&gt; Configure project :app\r\n\r\nWARNING:The option setting &#39;android.aapt2FromMavenOverride=/data/data/com.termux/files/usr/share/android-sdk/build-tools/33.0.0/aapt2&#39; is experimental.\r\n\r\n&gt; Task :app:preBuild UP-TO-DATE\r\n\r\n&gt; Task :app:preReleaseBuild UP-TO-DATE\r\n\r\n&gt; Task :app:mergeReleaseJniLibFolders UP-TO-DATE\r\n\r\n&gt; Task :app:mergeReleaseNativeLibs NO-SOURCE\r\n\r\n&gt; Task :app:stripReleaseDebugSymbols NO-SOURCE\r\n\r\n&gt; Task :app:extractReleaseNativeSymbolTables NO-SOURCE\r\n\r\n&gt; Task :app:mergeReleaseNativeDebugMetadata NO-SOURCE\r\n\r\n&gt; Task :app:mergeReleaseArtProfile UP-TO-DATE\r\n\r\n&gt; Task :app:compileReleaseAidl NO-SOURCE\r\n\r\n&gt; Task :app:compileReleaseRenderscript NO-SOURCE\r\n\r\n&gt; Task :app:generateReleaseBuildConfig UP-TO-DATE\r\n\r\n&gt; Task :app:javaPreCompileRelease UP-TO-DATE\r\n\r\n&gt; Task :app:checkReleaseAarMetadata UP-TO-DATE\r\n\r\n&gt; Task :app:checkReleaseDuplicateClasses FAILED\r\n\r\n&gt; Task :app:generateReleaseResValues FROM-CACHE\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\n\r\nExecution failed for task &#39;:app:checkReleaseDuplicateClasses&#39;.\r\n\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\r\n\r\n   &gt; Duplicate class org.aopalliance.aop.Advice found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.aop.AspectException found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.ConstructorInterceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.ConstructorInvocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.Interceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.Invocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.Joinpoint found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.MethodInterceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.aopalliance.intercept.MethodInvocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\r\n\r\n     Duplicate class org.apache.commons.logging.Log found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\r\n\r\n     Duplicate class org.apache.commons.logging.LogFactory found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\r\n\r\n     Duplicate class org.apache.commons.logging.LogFactory$1 found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\r\n\r\n     Duplicate class org.apache.commons.logging.impl.NoOpLog found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\r\n\r\n     Duplicate class org.apache.commons.logging.impl.SimpleLog found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\r\n\r\n     Duplicate class org.apache.shiro.ShiroException found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.AbstractCacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.Cache found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.CacheException found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.CacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.CacheManagerAware found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.MapCache found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.MemoryConstrainedCacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.cache.package-info found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.Base64 found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.CodecException found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.CodecSupport found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.H64 found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.Hex found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.codec.package-info found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.CommonsInterpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ConfigurationException found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.DefaultInterpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.Ini found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.Ini$1 found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.Ini$Section found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.Interpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder$1 found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder$AssignmentStatement found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder$BeanConfiguration found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder$BeanConfigurationProcessor found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\r\n\r\n     Duplicate class org.apache.shiro.config.ReflectionBuilder$InstantiationStatement found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10. 0)\r\n.\r\n.\r\n.\r\n\r\n\r\nDuplicate class org.telegram.telegrambots.util.WebhookUtils found in modules jetified-telegrambots-6.7.0 (com.github.rubenlagus.TelegramBots:telegrambots:6.7.0) and jetified-telegrambots-6.7.0 (org.telegram:telegrambots:6.7.0)\r\n\r\n     Go to the documentation to learn how to &lt;a href=&quot;d.android.com/r/tools/classpath-sync-errors&quot;&gt;Fix dependency resolution errors&lt;/a&gt;.\r\n\r\n* Try:\r\n\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n\r\n&gt; Run with --info or --debug option to get more log output.\r\n\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\r\n\r\nYou can use &#39;--warning-mode all&#39; to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\r\n\r\nSee https://docs.gradle.org/7.4.2/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 6s\r\n\r\n\r\n\r\nWhats wrong ?","title":"implementation &#39;com.github.rubenlagus:TelegramBots:6.7.0&#39; Build APK getting Error","body":"<p>I'm Trying build my APK using</p>\n<blockquote>\n<p>implementation 'com.github.rubenlagus:TelegramBots:6.7.0'</p>\n</blockquote>\n<p><strong>this is my dependency</strong></p>\n<pre><code>dependencies {\n    implementation 'com.android.support:support-compat:28.0.0'\n    implementation 'com.github.rubenlagus:TelegramBots:6.7.0'\n\n}\n</code></pre>\n<p>and i got error like this</p>\n<p>./gradlew assembleRelease</p>\n<p>Starting a Gradle Daemon, 2 incompatible and 1 stopped Daemons could not be reused, use --status for details</p>\n<p>Configuration on demand is an incubating feature.</p>\n<blockquote>\n<p>Configure project :app</p>\n</blockquote>\n<p>WARNING:The option setting 'android.aapt2FromMavenOverride=/data/data/com.termux/files/usr/share/android-sdk/build-tools/33.0.0/aapt2' is experimental.</p>\n<blockquote>\n<p>Task :app:preBuild UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:preReleaseBuild UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:mergeReleaseJniLibFolders UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:mergeReleaseNativeLibs NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:stripReleaseDebugSymbols NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:extractReleaseNativeSymbolTables NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:mergeReleaseNativeDebugMetadata NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:mergeReleaseArtProfile UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:compileReleaseAidl NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:compileReleaseRenderscript NO-SOURCE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:generateReleaseBuildConfig UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:javaPreCompileRelease UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:checkReleaseAarMetadata UP-TO-DATE</p>\n</blockquote>\n<blockquote>\n<p>Task :app:checkReleaseDuplicateClasses FAILED</p>\n</blockquote>\n<blockquote>\n<p>Task :app:generateReleaseResValues FROM-CACHE</p>\n</blockquote>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:</li>\n</ul>\n<p>Execution failed for task ':app:checkReleaseDuplicateClasses'.</p>\n<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable</p>\n</blockquote>\n<blockquote>\n<p>Duplicate class org.aopalliance.aop.Advice found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)</p>\n</blockquote>\n<pre><code> Duplicate class org.aopalliance.aop.AspectException found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.ConstructorInterceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.ConstructorInvocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.Interceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.Invocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.Joinpoint found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.MethodInterceptor found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.aopalliance.intercept.MethodInvocation found in modules jetified-aopalliance-repackaged-2.6.1 (org.glassfish.hk2.external:aopalliance-repackaged:2.6.1) and jetified-spring-aop-5.3.27 (org.springframework:spring-aop:5.3.27)\n\n Duplicate class org.apache.commons.logging.Log found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\n\n Duplicate class org.apache.commons.logging.LogFactory found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\n\n Duplicate class org.apache.commons.logging.LogFactory$1 found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\n\n Duplicate class org.apache.commons.logging.impl.NoOpLog found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\n\n Duplicate class org.apache.commons.logging.impl.SimpleLog found in modules jetified-commons-logging-1.2 (commons-logging:commons-logging:1.2) and jetified-spring-jcl-5.3.27 (org.springframework:spring-jcl:5.3.27)\n\n Duplicate class org.apache.shiro.ShiroException found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.cache.AbstractCacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.Cache found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.CacheException found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.CacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.CacheManagerAware found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.MapCache found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.MemoryConstrainedCacheManager found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.cache.package-info found in modules jetified-shiro-cache-1.10.0 (org.apache.shiro:shiro-cache:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.codec.Base64 found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.codec.CodecException found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.codec.CodecSupport found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.codec.H64 found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.codec.Hex found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.codec.package-info found in modules jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0) and jetified-shiro-lang-1.10.0 (org.apache.shiro:shiro-lang:1.10.0)\n\n Duplicate class org.apache.shiro.config.CommonsInterpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ConfigurationException found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.DefaultInterpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.Ini found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.Ini$1 found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.Ini$Section found in the following modules: jetified-shiro-config-core-1.10.0 (org.apache.shiro:shiro-config-core:1.10.0), jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.Interpolator found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder$1 found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder$AssignmentStatement found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder$BeanConfiguration found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder$BeanConfigurationProcessor found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10.0)\n\n Duplicate class org.apache.shiro.config.ReflectionBuilder$InstantiationStatement found in modules jetified-shiro-config-ogdl-1.10.0 (org.apache.shiro:shiro-config-ogdl:1.10.0) and jetified-shiro-core-1.10.0 (org.apache.shiro:shiro-core:1.10. 0)\n</code></pre>\n<p>.\n.\n.</p>\n<p>Duplicate class org.telegram.telegrambots.util.WebhookUtils found in modules jetified-telegrambots-6.7.0 (com.github.rubenlagus.TelegramBots:telegrambots:6.7.0) and jetified-telegrambots-6.7.0 (org.telegram:telegrambots:6.7.0)</p>\n<pre><code> Go to the documentation to learn how to &lt;a href=&quot;d.android.com/r/tools/classpath-sync-errors&quot;&gt;Fix dependency resolution errors&lt;/a&gt;.\n</code></pre>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --stacktrace option to get the stack trace.</p>\n</blockquote>\n<blockquote>\n<p>Run with --info or --debug option to get more log output.</p>\n</blockquote>\n<blockquote>\n<p>Run with --scan to get full insights.</p>\n</blockquote>\n<ul>\n<li>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></li>\n</ul>\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.</p>\n<p>You can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.</p>\n<p>See <a href=\"https://docs.gradle.org/7.4.2/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/7.4.2/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n<p>BUILD FAILED in 6s</p>\n<p>Whats wrong ?</p>\n"},{"tags":["java","android","retrofit"],"answers":[{"tags":[],"owner":{"account_id":26267089,"reputation":49,"user_id":19937474,"display_name":"viswareddy"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690270720,"creation_date":1690270720,"answer_id":76760424,"question_id":76760167,"body_markdown":"Retrieve the user ID from SharedPreferences:\r\n\r\n \r\n\r\n       SharedPreferences sharedPreferences = getSharedPreferences(&quot;YOUR_PREF_NAME&quot;, Context.MODE_PRIVATE);\r\n    String userId = sharedPreferences.getString(&quot;user_id&quot;, &quot;&quot;);\r\n\r\nUpdate your API interface to use @Path instead of @Field for the user ID:\r\n\r\n    @FormUrlEncoded\r\n    @POST(&quot;user.php/**{user_id}**&quot;)\r\n    Call&lt;UpdateUserResponse&gt; sentUserUpdateddata(\r\n            @Field(&quot;first_name&quot;) String first_name,\r\n            @Field(&quot;last_name&quot;) String last_name,\r\n            @Field(&quot;email&quot;) String email,\r\n            @Field(&quot;password&quot;) String password,\r\n            @path(&quot;user_id&quot;) String user_id\r\n    );\r\n\r\nWhen making the API call, pass the retrieved user ID as an argument:\r\n\r\n        Call&lt;UpdateUserResponse&gt; call = yourApiService.sentUserUpdatedData(firstName, lastName, email, password, userId);\r\n    call.enqueue(new Callback&lt;UpdateUserResponse&gt;() {\r\n        // Handle the response\r\n        // ...\r\n    });","title":"How to pass sharedpreferences value with url?","body":"<p>Retrieve the user ID from SharedPreferences:</p>\n<pre><code>   SharedPreferences sharedPreferences = getSharedPreferences(&quot;YOUR_PREF_NAME&quot;, Context.MODE_PRIVATE);\nString userId = sharedPreferences.getString(&quot;user_id&quot;, &quot;&quot;);\n</code></pre>\n<p>Update your API interface to use @Path instead of @Field for the user ID:</p>\n<pre><code>@FormUrlEncoded\n@POST(&quot;user.php/**{user_id}**&quot;)\nCall&lt;UpdateUserResponse&gt; sentUserUpdateddata(\n        @Field(&quot;first_name&quot;) String first_name,\n        @Field(&quot;last_name&quot;) String last_name,\n        @Field(&quot;email&quot;) String email,\n        @Field(&quot;password&quot;) String password,\n        @path(&quot;user_id&quot;) String user_id\n);\n</code></pre>\n<p>When making the API call, pass the retrieved user ID as an argument:</p>\n<pre><code>    Call&lt;UpdateUserResponse&gt; call = yourApiService.sentUserUpdatedData(firstName, lastName, email, password, userId);\ncall.enqueue(new Callback&lt;UpdateUserResponse&gt;() {\n    // Handle the response\n    // ...\n});\n</code></pre>\n"}],"owner":{"account_id":29031748,"reputation":13,"user_id":22238473,"display_name":"Pasindu Hettiarachchi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76760424,"answer_count":1,"score":1,"last_activity_date":1690270720,"creation_date":1690268479,"question_id":76760167,"body_markdown":"Hi i want to pass sharedpreferences value (ex:user id saved in shared pref)URL in api interface android or is there any way to do that.i am new to programming \r\n\r\n \r\n```\r\n @FormUrlEncoded\r\n    @POST(&quot;user.php/**{user_id}**&quot;)\r\n    Call&lt;UpdateUserResponse&gt; sentUserUpdateddata(\r\n            @Field(&quot;first_name&quot;) String first_name,\r\n            @Field(&quot;last_name&quot;) String last_name,\r\n            @Field(&quot;email&quot;) String email,\r\n            @Field(&quot;password&quot;) String password,\r\n            @Field(&quot;user_id&quot;) String user_id\r\n    );\r\n```\r\n\r\nI dont have any idea about how to do this","title":"How to pass sharedpreferences value with url?","body":"<p>Hi i want to pass sharedpreferences value (ex:user id saved in shared pref)URL in api interface android or is there any way to do that.i am new to programming</p>\n<pre><code> @FormUrlEncoded\n    @POST(&quot;user.php/**{user_id}**&quot;)\n    Call&lt;UpdateUserResponse&gt; sentUserUpdateddata(\n            @Field(&quot;first_name&quot;) String first_name,\n            @Field(&quot;last_name&quot;) String last_name,\n            @Field(&quot;email&quot;) String email,\n            @Field(&quot;password&quot;) String password,\n            @Field(&quot;user_id&quot;) String user_id\n    );\n</code></pre>\n<p>I dont have any idea about how to do this</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":7879,"page":289,"page_size":100}
