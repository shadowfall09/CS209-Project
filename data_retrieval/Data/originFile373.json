{"items":[{"tags":["java","jpa","filter","jpql","optional-parameters"],"answers":[{"tags":[],"owner":{"account_id":203353,"reputation":4509,"user_id":450951,"display_name":"Ilya Dyoshin"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1527520940,"creation_date":1527520940,"answer_id":50569466,"question_id":50569238,"body_markdown":"JPQL doesn&#39;t supports optional parameters. \r\n\r\nActually you should think that not parameters are optional but rather conditions are optional.  This idea will lead you to creating &quot;dynamic&quot; queries. And this in place will lead you next to switch from JPQL to Criteria API.  And this will lead you to writting something like this: \r\n\r\n\r\n        // Actually can be generated during build, and thus can be ommited\r\n        @StaticMetamodel(Moneda.class)\r\n        abstract class Moneda_ {\r\n            public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; cantidad;\r\n            public static volatile SingularAttribute&lt;Moneda, Divisia&gt; divisia;\r\n            public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; ano;\r\n        }\r\n\r\n        final CriteriaBuilder cb = em.getCriteriaBuilder();\r\n        \r\n        final CriteriaQuery&lt;Moneda&gt; cq = cb.createQuery(Moneda.class);\r\n        final Root&lt;Moneda&gt; root = cq.from(Moneda.class);\r\n        \r\n        Set&lt;Predicate&gt; predicates = new HashSet&lt;&gt;(3);\r\n        if (cantidad != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.cantidad), cantidad));\r\n        }\r\n        \r\n        if (ano != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.ano), ano));\r\n        }\r\n        \r\n        if (divisia != null) {\r\n            predicates.add(cb.equal(root.get(Moneda_.divisia), divisia));\r\n        }\r\n        \r\n        cq.where(predicates.toArray(new Predicate[predicates.size()]));\r\n        \r\n        em.createQuery(cq).getResultList();\r\n\r\n        // and do whatever you want ","title":"Set optional parameters in JPQL Query","body":"<p>JPQL doesn't supports optional parameters. </p>\n\n<p>Actually you should think that not parameters are optional but rather conditions are optional.  This idea will lead you to creating \"dynamic\" queries. And this in place will lead you next to switch from JPQL to Criteria API.  And this will lead you to writting something like this: </p>\n\n<pre><code>    // Actually can be generated during build, and thus can be ommited\n    @StaticMetamodel(Moneda.class)\n    abstract class Moneda_ {\n        public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; cantidad;\n        public static volatile SingularAttribute&lt;Moneda, Divisia&gt; divisia;\n        public static volatile SingularAttribute&lt;Moneda, BigDecimal&gt; ano;\n    }\n\n    final CriteriaBuilder cb = em.getCriteriaBuilder();\n\n    final CriteriaQuery&lt;Moneda&gt; cq = cb.createQuery(Moneda.class);\n    final Root&lt;Moneda&gt; root = cq.from(Moneda.class);\n\n    Set&lt;Predicate&gt; predicates = new HashSet&lt;&gt;(3);\n    if (cantidad != null) {\n        predicates.add(cb.equal(root.get(Moneda_.cantidad), cantidad));\n    }\n\n    if (ano != null) {\n        predicates.add(cb.equal(root.get(Moneda_.ano), ano));\n    }\n\n    if (divisia != null) {\n        predicates.add(cb.equal(root.get(Moneda_.divisia), divisia));\n    }\n\n    cq.where(predicates.toArray(new Predicate[predicates.size()]));\n\n    em.createQuery(cq).getResultList();\n\n    // and do whatever you want \n</code></pre>\n"},{"tags":[],"owner":{"account_id":3861308,"reputation":10880,"user_id":3198983,"display_name":"Jesus Iniesta"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1572711200,"creation_date":1572711200,"answer_id":58672871,"question_id":50569238,"body_markdown":"After reading Ilya Dyoshin&#39;s comment, and the smart thinking behind *&quot;you should think that not parameters are optional but rather conditions are optional&quot;* I decided to go my own way by using JPQL with @Query annotation, and creating one dynamic SQL query which works beautifully.\r\n\r\nThe key is to apply some SQL logic to make the conditions optional rather than the parameters:\r\n\r\n```java\r\n    @Query(&quot;SELECT a &quot; +\r\n           &quot;FROM amazing &quot; +\r\n           &quot;WHERE (:filterSuperAwesome IS NULL &quot; +\r\n                        &quot;OR a.filterSuperAwesome = :filterSuperAwesome)&quot;); \r\n\r\n    List&lt;FilterSuperAwesome&gt; filterAwesomeORSuperAwesome(\r\n                    @Param(&quot;filterSuperAwesome &quot;) FilterSuperAwesome filterSuperAwesome);\r\n\r\n```\r\nNote how here ☝️,  I use an OR statement based on the fact that my parameter can present two forms, an instance of FilterSuperAwesome or NULL. When NULL, the condition is always True, as if it wasn&#39;t there.\r\n\r\nThis works just fine inside a JpaRepository class of a JHipster project.\r\n","title":"Set optional parameters in JPQL Query","body":"<p>After reading Ilya Dyoshin's comment, and the smart thinking behind <em>\"you should think that not parameters are optional but rather conditions are optional\"</em> I decided to go my own way by using JPQL with @Query annotation, and creating one dynamic SQL query which works beautifully.</p>\n\n<p>The key is to apply some SQL logic to make the conditions optional rather than the parameters:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Query(\"SELECT a \" +\n           \"FROM amazing \" +\n           \"WHERE (:filterSuperAwesome IS NULL \" +\n                        \"OR a.filterSuperAwesome = :filterSuperAwesome)\"); \n\n    List&lt;FilterSuperAwesome&gt; filterAwesomeORSuperAwesome(\n                    @Param(\"filterSuperAwesome \") FilterSuperAwesome filterSuperAwesome);\n\n</code></pre>\n\n<p>Note how here ☝️,  I use an OR statement based on the fact that my parameter can present two forms, an instance of FilterSuperAwesome or NULL. When NULL, the condition is always True, as if it wasn't there.</p>\n\n<p>This works just fine inside a JpaRepository class of a JHipster project.</p>\n"},{"tags":[],"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1636127645,"creation_date":1636127645,"answer_id":69855937,"question_id":50569238,"body_markdown":"In my case I had the problem that my optional parameter was a ```List&lt;String&gt;``` and the solution was the following:\r\n\r\n```\r\n@Query(value = &quot;SELECT *\r\n                FROM ...\r\n                 WHERE (COLUMN_X IN :categories OR COALESCE(:categories, null) IS NULL)&quot;\r\n, nativeQuery = true)\r\nList&lt;Archive&gt; findByCustomCriteria1(@Param(&quot;categories&quot;) List&lt;String&gt; categories);\r\n```\r\n\r\nThis way:\r\n\r\n - If the **parameter** **has *one or more values*** it is selected by the **left side** of the *OR* operator\r\n - If the **parameter** *categories* **is *null***, meaning that i have to select all values for *COLUMN_X*, will always return TRUE by the **right side** of the *OR* operator\r\n\r\n# Why `COALESCE` and why a *null* value inside of it?\r\n## Let&#39;s explore the `WHERE` clause in all conditions:\r\n\r\n**Case 1:** `categories = null`\r\n\r\n```\r\n(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\r\n```\r\nThe left part of the *OR* will return false, while the right part of the *OR* will always return true, in fact [`COALESCE`][1] will return the first non-null value if present and returns null if all arguments are null.\r\n\r\n**Case 2:** `categories = ()`\r\n\r\n```\r\n(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\r\n```\r\n\r\nJPA will automatically identify an empty list as a null value, hence same result of Case 1.\r\n\r\n**Case 3:** `categories = (&#39;ONE_VALUE&#39;)`\r\n\r\n```\r\n(COLUMN_X IN (&#39;ONE_VALUE&#39;) OR COALESCE(&#39;ONE_VALUE&#39;, null) IS NULL)\r\n```\r\nThe left part of the *OR* will return true only for those values for which `COLUMN_X = &#39;ONE_VALUE&#39;` while the right part of the *OR* will never return true, because it is equals to `&#39;ONE_VALUE&#39; IS NULL` (that is false).\r\n\r\nWhy the null as second parameter? Well, that&#39;s because `COALESCE` needs at least two parameters.\r\n\r\n**Case 4:** `categories = (&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;)`\r\n\r\n```\r\n(COLUMN_X IN (&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;) OR COALESCE(&#39;ONE_VALUE&#39;, &#39;TWO_VALUE&#39;, null) IS NULL)\r\n```\r\n\r\nAs in Case 3, the left part of the *OR* operator will select only the rows for which `COLUMN_X` is equale to `&#39;ONE_VALUE&#39;` or  `&#39;TWO_VALUE&#39;`.\r\n\r\n\r\n\r\n\r\n  [1]: https://docs.oracle.com/javadb/10.8.3.0/ref/rreffunccoalesce.html","title":"Set optional parameters in JPQL Query","body":"<p>In my case I had the problem that my optional parameter was a <code>List&lt;String&gt;</code> and the solution was the following:</p>\n<pre><code>@Query(value = &quot;SELECT *\n                FROM ...\n                 WHERE (COLUMN_X IN :categories OR COALESCE(:categories, null) IS NULL)&quot;\n, nativeQuery = true)\nList&lt;Archive&gt; findByCustomCriteria1(@Param(&quot;categories&quot;) List&lt;String&gt; categories);\n</code></pre>\n<p>This way:</p>\n<ul>\n<li>If the <strong>parameter</strong> <strong>has <em>one or more values</em></strong> it is selected by the <strong>left side</strong> of the <em>OR</em> operator</li>\n<li>If the <strong>parameter</strong> <em>categories</em> <strong>is <em>null</em></strong>, meaning that i have to select all values for <em>COLUMN_X</em>, will always return TRUE by the <strong>right side</strong> of the <em>OR</em> operator</li>\n</ul>\n<h1>Why <code>COALESCE</code> and why a <em>null</em> value inside of it?</h1>\n<h2>Let's explore the <code>WHERE</code> clause in all conditions:</h2>\n<p><strong>Case 1:</strong> <code>categories = null</code></p>\n<pre><code>(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\n</code></pre>\n<p>The left part of the <em>OR</em> will return false, while the right part of the <em>OR</em> will always return true, in fact <a href=\"https://docs.oracle.com/javadb/10.8.3.0/ref/rreffunccoalesce.html\" rel=\"nofollow noreferrer\"><code>COALESCE</code></a> will return the first non-null value if present and returns null if all arguments are null.</p>\n<p><strong>Case 2:</strong> <code>categories = ()</code></p>\n<pre><code>(COLUMN_X IN null OR COALESCE(null, null) IS NULL)\n</code></pre>\n<p>JPA will automatically identify an empty list as a null value, hence same result of Case 1.</p>\n<p><strong>Case 3:</strong> <code>categories = ('ONE_VALUE')</code></p>\n<pre><code>(COLUMN_X IN ('ONE_VALUE') OR COALESCE('ONE_VALUE', null) IS NULL)\n</code></pre>\n<p>The left part of the <em>OR</em> will return true only for those values for which <code>COLUMN_X = 'ONE_VALUE'</code> while the right part of the <em>OR</em> will never return true, because it is equals to <code>'ONE_VALUE' IS NULL</code> (that is false).</p>\n<p>Why the null as second parameter? Well, that's because <code>COALESCE</code> needs at least two parameters.</p>\n<p><strong>Case 4:</strong> <code>categories = ('ONE_VALUE', 'TWO_VALUE')</code></p>\n<pre><code>(COLUMN_X IN ('ONE_VALUE', 'TWO_VALUE') OR COALESCE('ONE_VALUE', 'TWO_VALUE', null) IS NULL)\n</code></pre>\n<p>As in Case 3, the left part of the <em>OR</em> operator will select only the rows for which <code>COLUMN_X</code> is equale to <code>'ONE_VALUE'</code> or  <code>'TWO_VALUE'</code>.</p>\n"},{"tags":[],"owner":{"account_id":22415841,"reputation":31,"user_id":16623933,"display_name":"Tiran"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658234,"creation_date":1686658234,"answer_id":76464793,"question_id":50569238,"body_markdown":"this for native queries, \r\nSimply pass null values when parameter values need to be optional.\r\ncheck whether the parameter is null or not in the query.\r\n\r\n    &quot;SELECT m FROM Moneda m WHERE&quot;\r\n    + &quot;(:divisa is null || m.divisa = :divisa) &quot;\r\n    + &quot;AND (:cantidad is null || m.cantidad= :cantidad) &quot;\r\n    + &quot;AND (:ano is null || m.ano = :ano)&quot;","title":"Set optional parameters in JPQL Query","body":"<p>this for native queries,\nSimply pass null values when parameter values need to be optional.\ncheck whether the parameter is null or not in the query.</p>\n<pre><code>&quot;SELECT m FROM Moneda m WHERE&quot;\n+ &quot;(:divisa is null || m.divisa = :divisa) &quot;\n+ &quot;AND (:cantidad is null || m.cantidad= :cantidad) &quot;\n+ &quot;AND (:ano is null || m.ano = :ano)&quot;\n</code></pre>\n"}],"owner":{"account_id":13293002,"reputation":131,"user_id":9596931,"display_name":"Nacho Martin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26484,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"answer_count":4,"score":13,"last_activity_date":1686658234,"creation_date":1527520029,"question_id":50569238,"body_markdown":"[I got this list of coins that i want to filter with that 3 optional parameters(Currency, quantity and year)][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/GFudY.png\r\n\r\nHow can I set parameters in JPQL as optional? I dont want to do 9 &quot;if else&quot; for checking if its null\r\n\r\nI got the function filtradoMonedas (filterCoins) that filter the object Moneda(coin) using that 3 OPTIONAL parameters but its not working if there&#180;s a null parameter.\r\n\r\nThis just work well if dont set empty parameters, if cantidad or ano is &quot;&quot; returns exception of bad query. Just want it as an optional. Heres the method:\r\n\r\n  \r\n    public List&lt;Moneda&gt; filtradoMonedas(Divisa divisa, BigDecimal cantidad, \r\n\t\t\tBigDecimal ano){\r\n\r\n\t\tEntityManager em = getEntityManager();\r\n\t\t\r\n\t\tQuery consulta = em.createQuery(&quot;SELECT m FROM Moneda m &quot;\r\n\t\t\t\t+ &quot;WHERE m.divisa = :divisa &quot;\r\n\t\t\t\t+ &quot;AND m.cantidad= :cantidad &quot;\r\n\t\t\t\t+ &quot;AND m.ano = :ano&quot;);\r\n\r\n\t\tconsulta.setParameter(&quot;divisa&quot;, divisa);\r\n\t\tconsulta.setParameter(&quot;cantidad&quot;, cantidad);\r\n\t\tconsulta.setParameter(&quot;ano&quot;, ano);\r\n\t\t\r\n\t\tList&lt;Moneda&gt; filtradoMonedas = (List&lt;Moneda&gt;) consulta.getResultList();\r\n\t\t// sincronizar los objetos devueltos con la base de datos\r\n\t\tfor (Moneda m : filtradoMonedas) {\r\n\t\t\tem.refresh(m);\r\n\t\t}\r\n\r\n\t\tem.close();\r\n\t\treturn filtradoMonedas;\r\n\t}\r\n","title":"Set optional parameters in JPQL Query","body":"<p><a href=\"https://i.stack.imgur.com/GFudY.png\" rel=\"noreferrer\">I got this list of coins that i want to filter with that 3 optional parameters(Currency, quantity and year)</a></p>\n\n<p>How can I set parameters in JPQL as optional? I dont want to do 9 \"if else\" for checking if its null</p>\n\n<p>I got the function filtradoMonedas (filterCoins) that filter the object Moneda(coin) using that 3 OPTIONAL parameters but its not working if there´s a null parameter.</p>\n\n<p>This just work well if dont set empty parameters, if cantidad or ano is \"\" returns exception of bad query. Just want it as an optional. Heres the method:</p>\n\n<pre><code>public List&lt;Moneda&gt; filtradoMonedas(Divisa divisa, BigDecimal cantidad, \n        BigDecimal ano){\n\n    EntityManager em = getEntityManager();\n\n    Query consulta = em.createQuery(\"SELECT m FROM Moneda m \"\n            + \"WHERE m.divisa = :divisa \"\n            + \"AND m.cantidad= :cantidad \"\n            + \"AND m.ano = :ano\");\n\n    consulta.setParameter(\"divisa\", divisa);\n    consulta.setParameter(\"cantidad\", cantidad);\n    consulta.setParameter(\"ano\", ano);\n\n    List&lt;Moneda&gt; filtradoMonedas = (List&lt;Moneda&gt;) consulta.getResultList();\n    // sincronizar los objetos devueltos con la base de datos\n    for (Moneda m : filtradoMonedas) {\n        em.refresh(m);\n    }\n\n    em.close();\n    return filtradoMonedas;\n}\n</code></pre>\n"},{"tags":["javascript","java"],"answers":[{"tags":[],"owner":{"account_id":18885497,"reputation":102,"user_id":13777039,"display_name":"Adityan.P"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608299572,"creation_date":1608261362,"answer_id":65351354,"question_id":60201722,"body_markdown":"***Hi***, i think you need to generate an actual ```order_id``` from server side as it is mentioned in their docs [here][1]. Instead of the sample ```order id```.\r\n\r\n\r\n  [1]: https://razorpay.com/docs/payment-gateway/web-integration/standard/","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p><em><strong>Hi</strong></em>, i think you need to generate an actual <code>order_id</code> from server side as it is mentioned in their docs <a href=\"https://razorpay.com/docs/payment-gateway/web-integration/standard/\" rel=\"nofollow noreferrer\">here</a>. Instead of the sample <code>order id</code>.</p>\n"},{"tags":[],"owner":{"account_id":26792337,"reputation":1,"user_id":20385551,"display_name":"brijesh revella"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686658210,"creation_date":1686658210,"answer_id":76464789,"question_id":60201722,"body_markdown":"The Below Code Works.\r\n```\r\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\r\n    pageEncoding=&quot;UTF-8&quot;%&gt;\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\r\n&lt;head&gt;\r\n&lt;meta charset=&quot;UTF-8&quot;&gt;\r\n&lt;title&gt;PaymentGateway&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\r\n&lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;\r\n&lt;script&gt;\r\n$(document).ready(function() {\r\n  // Single instance on page.\r\n  var razorpay = new Razorpay({\r\n    key: &#39;rzp_test_tCLhPLootU4w3M&#39;,\r\n    // logo, displayed in the payment processing popup\r\n    image: &#39;https://i.imgur.com/n5tjHFD.png&#39;,\r\n  });\r\n\r\n  // Fetching the payment.\r\n  razorpay.once(&#39;ready&#39;, function(response) {\r\n    console.log(response.methods);\r\n  });\r\n\r\n  // Submitting the data.\r\n  var data = {\r\n    amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\r\n    currency: &quot;INR&quot;, // Default is INR. We support more than 90 currencies.\r\n    email: &#39;test.appmomos@gmail.com&#39;,\r\n    contact: &#39;9123456780&#39;,\r\n    notes: {\r\n      address: &#39;Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru&#39;,\r\n    },\r\n    // order_id: &#39;123&#39;,\r\n    method: &#39;netbanking&#39;,\r\n    // method specific fields\r\n    bank: &#39;HDFC&#39;\r\n  };\r\n\r\n  $(&quot;#razorGateway&quot;).click(function() {\r\n    alert(&quot;Payment clicked&quot;);\r\n    // has to be placed within a user-initiated context, such as click, in order for popup to open.\r\n    razorpay.createPayment(data);\r\n\r\n    razorpay.on(&#39;payment.success&#39;, function(resp) {\r\n      alert(&quot;Payment success.&quot;);\r\n      alert(resp.razorpay_payment_id);\r\n      alert(resp.razorpay_order_id);\r\n      alert(resp.razorpay_signature);\r\n    }); // will pass payment ID, order ID, and Razorpay signature to success handler.\r\n\r\n    razorpay.on(&#39;payment.error&#39;, function(resp) {\r\n      alert(resp.error.description);\r\n    }); // will pass error object to error handler\r\n  });\r\n});\r\n&lt;/script&gt;\r\n&lt;body&gt;\r\n  &lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot; value=&quot;Pay&quot; /&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p>The Below Code Works.</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;PaymentGateway&lt;/title&gt;\n&lt;/head&gt;\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\n&lt;script src=&quot;https://code.jquery.com/jquery-3.6.0.min.js&quot;&gt;&lt;/script&gt;\n&lt;script&gt;\n$(document).ready(function() {\n  // Single instance on page.\n  var razorpay = new Razorpay({\n    key: 'rzp_test_tCLhPLootU4w3M',\n    // logo, displayed in the payment processing popup\n    image: 'https://i.imgur.com/n5tjHFD.png',\n  });\n\n  // Fetching the payment.\n  razorpay.once('ready', function(response) {\n    console.log(response.methods);\n  });\n\n  // Submitting the data.\n  var data = {\n    amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\n    currency: &quot;INR&quot;, // Default is INR. We support more than 90 currencies.\n    email: 'test.appmomos@gmail.com',\n    contact: '9123456780',\n    notes: {\n      address: 'Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru',\n    },\n    // order_id: '123',\n    method: 'netbanking',\n    // method specific fields\n    bank: 'HDFC'\n  };\n\n  $(&quot;#razorGateway&quot;).click(function() {\n    alert(&quot;Payment clicked&quot;);\n    // has to be placed within a user-initiated context, such as click, in order for popup to open.\n    razorpay.createPayment(data);\n\n    razorpay.on('payment.success', function(resp) {\n      alert(&quot;Payment success.&quot;);\n      alert(resp.razorpay_payment_id);\n      alert(resp.razorpay_order_id);\n      alert(resp.razorpay_signature);\n    }); // will pass payment ID, order ID, and Razorpay signature to success handler.\n\n    razorpay.on('payment.error', function(resp) {\n      alert(resp.error.description);\n    }); // will pass error object to error handler\n  });\n});\n&lt;/script&gt;\n&lt;body&gt;\n  &lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot; value=&quot;Pay&quot; /&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}],"owner":{"account_id":7888325,"reputation":1,"user_id":5959496,"display_name":"Akshay Gautam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":5210,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686658210,"creation_date":1581575521,"question_id":60201722,"body_markdown":"I am totally a beginner in payment gateway no idea how to approach it. But I went through Razorpay side and all the other stackoverflow questions and from 2 days I am struggling to integrate the Razorpay gateway in my project. Now I am approaching the payment gateway by using JavaScript.\r\nMy project is a online shopping website which is based on java but I used JavaScript for giving the functionality in the website.\r\n\r\n1. I don&#39;t have any idea about Reactjs and I am trying to integrate the gateway using basic Js.\r\n   directly into the jsp .\r\n\r\n```&lt;head&gt;\r\n&lt;script type=&quot;text/javascript&quot; src=&quot;https://checkout.razorpay.com/v1/razorpay.js&quot;&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;input type=&quot;button&quot; id=&quot;razorGateway&quot; name=&quot;submit&quot; class=&quot;submit action-button&quot;\r\n\t\t\t\t\t\t\t\t\tvalue=&quot;Pay&quot; /&gt;\r\n&lt;script type=&quot;text/javascript&quot;&gt;\t\r\n\t        var options = {\r\n\t\t    &quot;key&quot;: &quot;rzp_test_1234567UHGSssj&quot;, // Enter the Key ID generated from the Dashboard\r\n\t\t    &quot;amount&quot;: &quot;50000&quot;, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise or INR 500.\r\n\t\t    &quot;currency&quot;: &quot;INR&quot;,\r\n\t\t    &quot;name&quot;: &quot;Acme Corp&quot;,\r\n\t\t    &quot;description&quot;: &quot;Ecommerce&quot;,\r\n\t\t    &quot;image&quot;: &quot;image&quot;,\r\n\t\t    &quot;order_id&quot;: &quot;order_9A33XWu170gUtm&quot;,//This is a sample Order ID. Create an Order using Orders API. (https://razorpay.com/docs/payment-gateway/orders/integration/#step-1-create-an-order). Refer the Checkout form table given below\r\n\t\t    &quot;handler&quot;: function (response){\r\n\t\t        alert(response.razorpay_payment_id);\r\n\t\t    },\r\n\t\t    &quot;prefill&quot;: {\r\n\t\t        &quot;name&quot;: &quot;Gaurav Kumar&quot;,\r\n\t\t        &quot;email&quot;: &quot;gaurav.kumar@example.com&quot;,\r\n\t\t        &quot;contact&quot;: &quot;9999999999&quot;\r\n\t\t    },\r\n\t\t    &quot;notes&quot;: {\r\n\t\t        &quot;address&quot;: &quot;note value&quot;\r\n\t\t    },\r\n\t\t    &quot;theme&quot;: {\r\n\t\t        &quot;color&quot;: &quot;#EA5B29&quot;\r\n\t\t    }\r\n\t\t};\r\n\t    var rzp1 = new window.Razorpay(options);\r\n\t\tdocument.getElementById(&#39;razorGateway&#39;).onclick = function(e){\r\n\t\t    rzp1.open();\r\n\t\t    e.preventDefault();\r\n\t\t}\r\n&lt;/script&gt;\r\n```\r\n\r\nAfter debugging I am getting an error message. rzp1.open().\r\n[Screenshot][1]\r\n\r\n\r\n----------\r\n\r\n\r\nWhen I am not able to integrate with above method I went with another way.\r\n\r\n```\r\n&lt;script&gt;\r\n\t// Single instance on page.\r\n      var razorpay = new Razorpay({\r\n\t  key: &#39;rzp_test_1234567UHGSssj&#39;,\r\n\t    // logo, displayed in the payment processing popup\r\n\t  image: &#39;https://i.imgur.com/n5tjHFD.png&#39;,\r\n\t  });\r\n\t\r\n    //Fetching the payment.\r\n      razorpay.once(&#39;ready&#39;, function(response) {\r\n\t  console.log(response.methods);\r\n\t  })\r\n\t\r\n\t //Submitting the data.\r\n     var data = {\r\n\t\t\t  amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\r\n\t\t\t  currency: &quot;INR&quot;,// Default is INR. We support more than 90 currencies.\r\n\t\t\t  email: &#39;test.appmomos@gmail.com&#39;,\r\n\t\t\t  contact: &#39;9123456780&#39;,\r\n\t\t\t  notes: {\r\n\t\t\t    address: &#39;Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru&#39;,\r\n\t\t\t  },\r\n\t\t\t // order_id: &#39;123&#39;,\r\n\t\t\t  method: &#39;netbanking&#39;,\r\n\t\t\t  // method specific fields\r\n\t\t\t  bank: &#39;HDFC&#39;\r\n     };\r\n\r\n    $(&quot;#razorGateway&quot;).click (function(){\r\n    \talert(&quot;payment clicked&quot;);\r\n  // has to be placed within user initiated context, such as click, in order for popup to open.\r\n     razorpay.createPayment(data);\r\n\r\n\t\t  razorpay.on(&#39;payment.success&#39;, function(resp) {\r\n\t\t\t  alert(&quot;payment checking.&quot;);\r\n\t\t    alert(resp.razorpay_payment_id),\r\n\t\t    alert(resp.razorpay_order_id),\r\n\t\t    alert(resp.razorpay_signature)}); // will pass payment ID, order ID, and Razorpay signature to success handler.\r\n\t\t\r\n\t\t  razorpay.on(&#39;payment.error&#39;, function(resp){alert(resp.error.description)}); // will pass error object to error handler\r\n\r\n})\r\n&lt;/script&gt;\r\n```\r\nHere I am able to hit the razorpay and pop-up is also visible but as it is hard coded I am not able to get the various options of payment method as it is shown in the demo. Directly it is giving me success and fail message(last page of gateway).\r\nhttps://razorpay.com/demo\r\n\r\nThis option I am not getting it.[Different payment methods][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/AU3an.png\r\n  [2]: https://i.stack.imgur.com/rnH0b.png\r\n\r\nI will be at cloud no.9 if I get the answer or I am able to integrate it in either way or any other way. If options of integrating in Java is also welcomed. ","title":"How I can integrate Razorpay in website using JavaScript or Java?","body":"<p>I am totally a beginner in payment gateway no idea how to approach it. But I went through Razorpay side and all the other stackoverflow questions and from 2 days I am struggling to integrate the Razorpay gateway in my project. Now I am approaching the payment gateway by using JavaScript.\nMy project is a online shopping website which is based on java but I used JavaScript for giving the functionality in the website.</p>\n\n<ol>\n<li>I don't have any idea about Reactjs and I am trying to integrate the gateway using basic Js.\ndirectly into the jsp .</li>\n</ol>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://checkout.razorpay.com/v1/razorpay.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;input type=\"button\" id=\"razorGateway\" name=\"submit\" class=\"submit action-button\"\n                                    value=\"Pay\" /&gt;\n&lt;script type=\"text/javascript\"&gt; \n            var options = {\n            \"key\": \"rzp_test_1234567UHGSssj\", // Enter the Key ID generated from the Dashboard\n            \"amount\": \"50000\", // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise or INR 500.\n            \"currency\": \"INR\",\n            \"name\": \"Acme Corp\",\n            \"description\": \"Ecommerce\",\n            \"image\": \"image\",\n            \"order_id\": \"order_9A33XWu170gUtm\",//This is a sample Order ID. Create an Order using Orders API. (https://razorpay.com/docs/payment-gateway/orders/integration/#step-1-create-an-order). Refer the Checkout form table given below\n            \"handler\": function (response){\n                alert(response.razorpay_payment_id);\n            },\n            \"prefill\": {\n                \"name\": \"Gaurav Kumar\",\n                \"email\": \"gaurav.kumar@example.com\",\n                \"contact\": \"9999999999\"\n            },\n            \"notes\": {\n                \"address\": \"note value\"\n            },\n            \"theme\": {\n                \"color\": \"#EA5B29\"\n            }\n        };\n        var rzp1 = new window.Razorpay(options);\n        document.getElementById('razorGateway').onclick = function(e){\n            rzp1.open();\n            e.preventDefault();\n        }\n&lt;/script&gt;\n</code></pre>\n\n<p>After debugging I am getting an error message. rzp1.open().\n<a href=\"https://i.stack.imgur.com/AU3an.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<hr>\n\n<p>When I am not able to integrate with above method I went with another way.</p>\n\n<pre><code>&lt;script&gt;\n    // Single instance on page.\n      var razorpay = new Razorpay({\n      key: 'rzp_test_1234567UHGSssj',\n        // logo, displayed in the payment processing popup\n      image: 'https://i.imgur.com/n5tjHFD.png',\n      });\n\n    //Fetching the payment.\n      razorpay.once('ready', function(response) {\n      console.log(response.methods);\n      })\n\n     //Submitting the data.\n     var data = {\n              amount: 1000, // in currency subunits. Here 1000 = 1000 paise, which equals to ₹10\n              currency: \"INR\",// Default is INR. We support more than 90 currencies.\n              email: 'test.appmomos@gmail.com',\n              contact: '9123456780',\n              notes: {\n                address: 'Ground Floor, SJR Cyber, Laskar Hosur Road, Bengaluru',\n              },\n             // order_id: '123',\n              method: 'netbanking',\n              // method specific fields\n              bank: 'HDFC'\n     };\n\n    $(\"#razorGateway\").click (function(){\n        alert(\"payment clicked\");\n  // has to be placed within user initiated context, such as click, in order for popup to open.\n     razorpay.createPayment(data);\n\n          razorpay.on('payment.success', function(resp) {\n              alert(\"payment checking.\");\n            alert(resp.razorpay_payment_id),\n            alert(resp.razorpay_order_id),\n            alert(resp.razorpay_signature)}); // will pass payment ID, order ID, and Razorpay signature to success handler.\n\n          razorpay.on('payment.error', function(resp){alert(resp.error.description)}); // will pass error object to error handler\n\n})\n&lt;/script&gt;\n</code></pre>\n\n<p>Here I am able to hit the razorpay and pop-up is also visible but as it is hard coded I am not able to get the various options of payment method as it is shown in the demo. Directly it is giving me success and fail message(last page of gateway).\n<a href=\"https://razorpay.com/demo\" rel=\"nofollow noreferrer\">https://razorpay.com/demo</a></p>\n\n<p>This option I am not getting it.<a href=\"https://i.stack.imgur.com/rnH0b.png\" rel=\"nofollow noreferrer\">Different payment methods</a></p>\n\n<p>I will be at cloud no.9 if I get the answer or I am able to integrate it in either way or any other way. If options of integrating in Java is also welcomed. </p>\n"},{"tags":["java","groovy","gremlin","gremlin-java"],"answers":[{"tags":[],"owner":{"account_id":2053237,"reputation":45626,"user_id":1831717,"display_name":"stephen mallette"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1686658025,"creation_date":1686658025,"answer_id":76464762,"question_id":76463183,"body_markdown":"I think you are running into a variation of this problem: [TINKERPOP-2953](https://issues.apache.org/jira/browse/TINKERPOP-2953)\r\n\r\nBasically, the upgrade that was done to Groovy seemed to change the way that certain imports were loaded and so your `and()` step is being treated like `Operator.and`. This issue should only affect script submission. Bytecode-based requests should not have this problem as they don&#39;t rely on Groovy.\r\n\r\nThe workaround as noted in the issue is to explicitly use the step by using the anonymous traversal class of `__`, as in `__.and(...)`.","title":"No signature of method exception after upgrading Apache Gremlin 3.6.2 to any newer version","body":"<p>I think you are running into a variation of this problem: <a href=\"https://issues.apache.org/jira/browse/TINKERPOP-2953\" rel=\"nofollow noreferrer\">TINKERPOP-2953</a></p>\n<p>Basically, the upgrade that was done to Groovy seemed to change the way that certain imports were loaded and so your <code>and()</code> step is being treated like <code>Operator.and</code>. This issue should only affect script submission. Bytecode-based requests should not have this problem as they don't rely on Groovy.</p>\n<p>The workaround as noted in the issue is to explicitly use the step by using the anonymous traversal class of <code>__</code>, as in <code>__.and(...)</code>.</p>\n"}],"owner":{"account_id":2786645,"reputation":577,"user_id":2397966,"display_name":"Rostislav Krasny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":141,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686658025,"creation_date":1686646128,"question_id":76463183,"body_markdown":"This is an existing project that works properly with Apache Gremlin 3.6.2 but fails to pass unit tests after upgrading to any newer version of Gremlin - 3.6.3 or 3.6.4:\r\n```java\r\n[2023-06-13T11:34:57,445][Warning] [{}] [o.a.t.g.s.o.AbstractEvalOpProcessor]: Exception processing a script on request [RequestMessage{, requestId=31af5d9f-f623-4091-b915-9ff86be97a09, op=&#39;eval&#39;, processor=&#39;&#39;, args={gremlin=g.V(&#39;89885718930341148618906941499288497180&#39;).outE(&#39;related-account&#39;).or(and(has(&#39;effectiveDate&#39;, lte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;))), has(&#39;expirationDate&#39;, gte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;)))),  and(has(&#39;effectiveDate&#39;, lte(datetime(&#39;2023-09-13T11:34:56.951Z&#39;))), hasNot(&#39;expirationDate&#39;))).project(&#39;effectiveDate&#39;, &#39;expirationDate&#39;, &#39;accountId&#39;, &#39;relationTypeCd&#39;, &#39;status&#39;).by(&#39;effectiveDate&#39;).by(coalesce(values(&#39;expirationDate&#39;),constant(null))).by(inV().coalesce(values(&#39;accountId&#39;),constant(null))).by(&#39;relationTypeCd&#39;).by(coalesce(values(&#39;status&#39;),constant(null))).limit(10), batchSize=64}}].\r\ngroovy.lang.MissingMethodException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:70) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135) ~[groovy-2.5.22-indy.jar:2.5.22]\r\n        at Script5.run(Script5.groovy:1) ~[?:?]\r\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:679) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:381) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:233) ~[java.scripting:?]\r\n        at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$0(GremlinExecutor.java:272) ~[gremlin-groovy-3.6.4.jar:3.6.4]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\r\n        at java.lang.Thread.run(Thread.java:834) ~[?:?]\r\n[2023-06-13T11:34:57,467][Error] [{LogCorrelationId=6d9a746e-c465-447e-a6ec-5a9dbf05c253, TenantId=5e9e47c6-9158-4386-b631-29b48da0a7c8}] [c.a.x.p.g.c.NeptuneDbProvider]: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\njava.util.concurrent.ExecutionException: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395) ~[?:?]\r\n        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999) ~[?:?]\r\n...\r\nCaused by: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\r\nPossible solutions: wait(), name(), any(), values(), find(), dump()\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:245) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:200) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:126) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:68) ~[gremlin-driver-3.6.4.jar:3.6.4]\r\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\r\n```\r\nHow to fix that `No signature of method` exception?","title":"No signature of method exception after upgrading Apache Gremlin 3.6.2 to any newer version","body":"<p>This is an existing project that works properly with Apache Gremlin 3.6.2 but fails to pass unit tests after upgrading to any newer version of Gremlin - 3.6.3 or 3.6.4:</p>\n<pre class=\"lang-java prettyprint-override\"><code>[2023-06-13T11:34:57,445][Warning] [{}] [o.a.t.g.s.o.AbstractEvalOpProcessor]: Exception processing a script on request [RequestMessage{, requestId=31af5d9f-f623-4091-b915-9ff86be97a09, op='eval', processor='', args={gremlin=g.V('89885718930341148618906941499288497180').outE('related-account').or(and(has('effectiveDate', lte(datetime('2023-09-13T11:34:56.951Z'))), has('expirationDate', gte(datetime('2023-09-13T11:34:56.951Z')))),  and(has('effectiveDate', lte(datetime('2023-09-13T11:34:56.951Z'))), hasNot('expirationDate'))).project('effectiveDate', 'expirationDate', 'accountId', 'relationTypeCd', 'status').by('effectiveDate').by(coalesce(values('expirationDate'),constant(null))).by(inV().coalesce(values('accountId'),constant(null))).by('relationTypeCd').by(coalesce(values('status'),constant(null))).limit(10), batchSize=64}}].\ngroovy.lang.MissingMethodException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at org.codehaus.groovy.runtime.ScriptBytecodeAdapter.unwrap(ScriptBytecodeAdapter.java:70) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.PojoMetaClassSite.call(PojoMetaClassSite.java:46) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.CallSiteArray.defaultCall(CallSiteArray.java:47) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:115) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at org.codehaus.groovy.runtime.callsite.AbstractCallSite.call(AbstractCallSite.java:135) ~[groovy-2.5.22-indy.jar:2.5.22]\n        at Script5.run(Script5.groovy:1) ~[?:?]\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:679) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.groovy.jsr223.GremlinGroovyScriptEngine.eval(GremlinGroovyScriptEngine.java:381) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at javax.script.AbstractScriptEngine.eval(AbstractScriptEngine.java:233) ~[java.scripting:?]\n        at org.apache.tinkerpop.gremlin.groovy.engine.GremlinExecutor.lambda$eval$0(GremlinExecutor.java:272) ~[gremlin-groovy-3.6.4.jar:3.6.4]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]\n        at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]\n        at java.lang.Thread.run(Thread.java:834) ~[?:?]\n[2023-06-13T11:34:57,467][Error] [{LogCorrelationId=6d9a746e-c465-447e-a6ec-5a9dbf05c253, TenantId=5e9e47c6-9158-4386-b631-29b48da0a7c8}] [c.a.x.p.g.c.NeptuneDbProvider]: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\\nPossible solutions: wait(), name(), any(), values(), find(), dump()\njava.util.concurrent.ExecutionException: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:395) ~[?:?]\n        at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1999) ~[?:?]\n...\nCaused by: org.apache.tinkerpop.gremlin.driver.exception.ResponseException: No signature of method: org.apache.tinkerpop.gremlin.process.traversal.Operator$8.call() is applicable for argument types: (org.apache.tinkerpop.gremlin.process.traversal.dsl.graph.DefaultGraphTraversal...) values: [[HasStep([effectiveDate.lte(Wed Sep 13 14:34:56 IDT 2023)])], ...]\nPossible solutions: wait(), name(), any(), values(), find(), dump()\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:245) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinResponseHandler.channelRead0(Handler.java:200) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:126) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at org.apache.tinkerpop.gremlin.driver.Handler$GremlinSaslAuthenticationHandler.channelRead0(Handler.java:68) ~[gremlin-driver-3.6.4.jar:3.6.4]\n        at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n        at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.90.Final.jar:4.1.90.Final]\n</code></pre>\n<p>How to fix that <code>No signature of method</code> exception?</p>\n"},{"tags":["java","unit-testing","enums","togglz"],"answers":[{"tags":[],"owner":{"account_id":169224,"reputation":5608,"user_id":395181,"display_name":"chkal"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1468527532,"creation_date":1468527532,"answer_id":38383556,"question_id":38380837,"body_markdown":"You don&#39;t need to mock anything. Togglz ships with a special module for unit testing feature toggles. Have a look here:\r\n\r\nhttp://www.togglz.org/documentation/testing.html\r\n\r\nThere is for example a JUnit rule which provides a simple way to toggle features:\r\n\r\n    public class SomeJunitTest {\r\n    \r\n      @Rule\r\n      public TogglzRule togglzRule = TogglzRule.allEnabled(MyFeatures.class);\r\n    \r\n      @Test\r\n      public void testToggleFeature() {\r\n    \r\n        // all features are active by default  \r\n        assertTrue(MyFeatures.FEATURE_ONE.isActive());\r\n    \r\n        // you can easily modify the feature state using the TogglzRule\r\n        togglzRule.disable(MyFeatures.FEATURE_ONE);\r\n        assertFalse(MyFeatures.FEATURE_ONE.isActive());\r\n    \r\n      }\r\n    \r\n    }","title":"Unit test for togglz feature on and off","body":"<p>You don't need to mock anything. Togglz ships with a special module for unit testing feature toggles. Have a look here:</p>\n\n<p><a href=\"http://www.togglz.org/documentation/testing.html\" rel=\"noreferrer\">http://www.togglz.org/documentation/testing.html</a></p>\n\n<p>There is for example a JUnit rule which provides a simple way to toggle features:</p>\n\n<pre><code>public class SomeJunitTest {\n\n  @Rule\n  public TogglzRule togglzRule = TogglzRule.allEnabled(MyFeatures.class);\n\n  @Test\n  public void testToggleFeature() {\n\n    // all features are active by default  \n    assertTrue(MyFeatures.FEATURE_ONE.isActive());\n\n    // you can easily modify the feature state using the TogglzRule\n    togglzRule.disable(MyFeatures.FEATURE_ONE);\n    assertFalse(MyFeatures.FEATURE_ONE.isActive());\n\n  }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12633381,"reputation":449,"user_id":9183844,"display_name":"dos4dev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1621461086,"creation_date":1621461086,"answer_id":67611373,"question_id":38380837,"body_markdown":"    featureManager.setFeatureState(new FeatureState(MyFeatures.FOO, true))\r\n\r\n[FeatureManager][1] \r\n\r\n\r\n  [1]: https://github.com/togglz/togglz/blob/1008527c088ba857cfc4371342aee6ebfd410fbf/core/src/main/java/org/togglz/core/manager/FeatureManager.java#L23","title":"Unit test for togglz feature on and off","body":"<pre><code>featureManager.setFeatureState(new FeatureState(MyFeatures.FOO, true))\n</code></pre>\n<p><a href=\"https://github.com/togglz/togglz/blob/1008527c088ba857cfc4371342aee6ebfd410fbf/core/src/main/java/org/togglz/core/manager/FeatureManager.java#L23\" rel=\"nofollow noreferrer\">FeatureManager</a></p>\n"},{"tags":[],"owner":{"account_id":2136170,"reputation":112,"user_id":1895900,"display_name":"Daan Callaert"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654693408,"creation_date":1647433963,"answer_id":71497148,"question_id":38380837,"body_markdown":"Since the JUnit5 implementation of the Togglz test library, it is even easier to perform this by using an annotation.\r\n\r\n**maven dependency**\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.togglz&lt;/groupId&gt;\r\n        &lt;artifactId&gt;togglz-junit&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n**JUnit 5 test code using the Togglz annotations**\r\n\r\n    @Test\r\n    @AllEnabled(MyFeature.class)\r\n    void isActive_whenEnabled() {\r\n        Assertions.assertThat(MyFeature.ONE.isActive()).isTrue();\r\n    }\r\n\r\n    @Test\r\n    @AllDisabled(MyFeature.class)\r\n    void isActive_whenDisabled() {\r\n        Assertions.assertThat(MyFeature.ONE.isActive()).isFalse();\r\n    }\r\n\r\n","title":"Unit test for togglz feature on and off","body":"<p>Since the JUnit5 implementation of the Togglz test library, it is even easier to perform this by using an annotation.</p>\n<p><strong>maven dependency</strong></p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.togglz&lt;/groupId&gt;\n    &lt;artifactId&gt;togglz-junit&lt;/artifactId&gt;\n    &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p><strong>JUnit 5 test code using the Togglz annotations</strong></p>\n<pre><code>@Test\n@AllEnabled(MyFeature.class)\nvoid isActive_whenEnabled() {\n    Assertions.assertThat(MyFeature.ONE.isActive()).isTrue();\n}\n\n@Test\n@AllDisabled(MyFeature.class)\nvoid isActive_whenDisabled() {\n    Assertions.assertThat(MyFeature.ONE.isActive()).isFalse();\n}\n</code></pre>\n"}],"owner":{"account_id":2415940,"reputation":539,"user_id":2109943,"accept_rate":44,"display_name":"dunfa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6568,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":38383556,"answer_count":3,"score":7,"last_activity_date":1686657660,"creation_date":1468518250,"question_id":38380837,"body_markdown":"We are using Togglz to turn functionalities on and off in our project. The following TogglzFeature Enum is implementing org.togglz.core.Feature interface\r\n\r\n    public enum TogglzFeature implements Feature {\r\n    \r\n        @EnabledByDefault\r\n        @Label(&quot;Current XSLT code&quot;)\r\n        FEATURE_XSLT,\r\n    \r\n        @Label(&quot;NEW JAXB code&quot;)\r\n        FEATURE_JAXB;\r\n    \r\n        public boolean isActive() {\r\n            FeatureManager manager = FeatureContext.getFeatureManager();\r\n            return manager.isActive(this);\r\n        }\r\n    \r\n    }\r\n\r\nThen one of the methods under test (say `mut_1(params)`) is checking the enum, something like \r\n  \r\n\r\n    if(TogglzFeature.FEATURE_JAXB.isActive()) { dothings();}\r\n\r\nNote that togglz feature is not in the params of mut_1. The mut_1 just picks it up from context in runtime.\r\n\r\nSo what is the best way to let the mut_1() know that I want `TogglzFeature.FEATURE_JAXB.isActive()` to return true?\r\n\r\nI tried this with Mockito/PowerMock\r\n\r\n    @RunWith(PowerMockRunner.class)\r\n    @PrepareForTest({TogglzFeature.class})\r\n    public class myTestClass {\r\n    \r\n    \t//private members and set up\r\n    \r\n    \t@Test\r\n    \tpublic void testTogglz(){\r\n    \t\tPowerMockito.mockStatic(TogglzFeature.class);\r\n    \t\tBDDMockito.given(TogglzFeature.FEATURE_JAXB.isActive()).willReturn(true);\r\n    \t\t\r\n    \t\t//execution and verification\r\n    \t}\r\n    }\r\n\r\nAnd the system spits all these on me\r\n\r\n    java.lang.VerifyError: Inconsistent stackmap frames at branch target 128\r\n    Exception Details:\r\n      Location:\r\n        com/lmig/ci/rate/togglz/TogglzFeature.values()[Lcom/lmig/ci/rate/togglz/TogglzFeature; @128: ldc\r\n      Reason:\r\n        Type &#39;java/lang/Object&#39; (current frame, locals[1]) is not assignable to &#39;[Lcom/lmig/ci/rate/togglz/TogglzFeature;&#39; (stack map, locals[1])\r\n      Current Frame:\r\n        bci: @120\r\n        flags: { }\r\n        locals: { top, &#39;java/lang/Object&#39;, null, null }\r\n        stack: { &#39;java/lang/Object&#39;, null }\r\n      Stackmap Frame:\r\n        bci: @128\r\n        flags: { }\r\n        locals: { top, &#39;[Lcom/lmig/ci/rate/togglz/TogglzFeature;&#39; }\r\n        stack: { }\r\n      Bytecode:\r\n        0x0000000: 1248 b800 4e12 4f03 bd00 5112 53b8 0057\r\n        0x0000010: 1259 b800 5f4b 2a01 4c01 4d2b 127e b800\r\n        0x0000020: 8012 8112 82b8 0085 b800 894e 2db2 0063\r\n        0x0000030: a600 0ab2 0063 4da7 0008 2dc0 008a 4d2c\r\n        0x0000040: a500 082a c000 64b0 014c 014d 2b12 8bb8\r\n        0x0000050: 0080 128c 128d b800 85b8 0089 4e2d b200\r\n        0x0000060: 63a6 000a b200 014d a700 082d c000 644d\r\n        0x0000070: 2c4c 014d 014e 2b01 a500 082b 4ea7 0009\r\n        0x0000080: 128f b800 804e 2d12 9003 bd00 5112 91b8\r\n        0x0000090: 0093 1295 b800 963a 0419 04b2 0063 a600\r\n        0x00000a0: 0b2b b600 984d a700 0919 04c0 008a 4d2c\r\n        0x00000b0: c000 03b0                              \r\n      Stackmap Table:\r\n        full_frame(@58,{Object[#81],Top,Top,Object[#81]},{Object[#81]})\r\n        full_frame(@63,{Object[#81],Top,Object[#81]},{Object[#81]})\r\n        chop_frame(@72,3)\r\n        full_frame(@107,{Top,Top,Top,Object[#81]},{})\r\n        full_frame(@112,{Top,Top,Object[#81]},{})\r\n        full_frame(@128,{Top,Object[#50]},{})\r\n        append_frame(@134,Top,Object[#81])\r\n        full_frame(@169,{Top,Top,Top,Top,Object[#81]},{})\r\n        full_frame(@175,{Top,Top,Object[#81]},{})\r\n    \r\n    \tat java.lang.Class.getDeclaredConstructors0(Native Method)\r\n    \tat java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\r\n    \tat java.lang.Class.getDeclaredConstructors(Class.java:2020)\r\n    \tat org.powermock.api.mockito.repackaged.ClassImposterizer.setConstructorsAccessible(ClassImposterizer.java:86)\r\n    \tat org.powermock.api.mockito.repackaged.ClassImposterizer.imposterise(ClassImposterizer.java:72)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:122)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.createMock(MockCreator.java:70)\r\n    \tat org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:47)\r\n    \tat org.powermock.api.mockito.PowerMockito.mockStatic(PowerMockito.java:71)\r\n    \tat com.lmig.ci.rate.orchestration.OrchestratorTest.workerCompShouldGoThroughSteppedAudit(OrchestratorTest.java:97)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\r\n    \tat org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\r\n    \tat org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\r\n    \tat org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\r\n    \tat org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\r\n    \tat org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n    \tat org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n    \tat org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\r\n    \tat org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\r\n    \tat org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\r\n    \tat org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\r\n\r\n","title":"Unit test for togglz feature on and off","body":"<p>We are using Togglz to turn functionalities on and off in our project. The following TogglzFeature Enum is implementing org.togglz.core.Feature interface</p>\n\n<pre><code>public enum TogglzFeature implements Feature {\n\n    @EnabledByDefault\n    @Label(\"Current XSLT code\")\n    FEATURE_XSLT,\n\n    @Label(\"NEW JAXB code\")\n    FEATURE_JAXB;\n\n    public boolean isActive() {\n        FeatureManager manager = FeatureContext.getFeatureManager();\n        return manager.isActive(this);\n    }\n\n}\n</code></pre>\n\n<p>Then one of the methods under test (say <code>mut_1(params)</code>) is checking the enum, something like </p>\n\n<pre><code>if(TogglzFeature.FEATURE_JAXB.isActive()) { dothings();}\n</code></pre>\n\n<p>Note that togglz feature is not in the params of mut_1. The mut_1 just picks it up from context in runtime.</p>\n\n<p>So what is the best way to let the mut_1() know that I want <code>TogglzFeature.FEATURE_JAXB.isActive()</code> to return true?</p>\n\n<p>I tried this with Mockito/PowerMock</p>\n\n<pre><code>@RunWith(PowerMockRunner.class)\n@PrepareForTest({TogglzFeature.class})\npublic class myTestClass {\n\n    //private members and set up\n\n    @Test\n    public void testTogglz(){\n        PowerMockito.mockStatic(TogglzFeature.class);\n        BDDMockito.given(TogglzFeature.FEATURE_JAXB.isActive()).willReturn(true);\n\n        //execution and verification\n    }\n}\n</code></pre>\n\n<p>And the system spits all these on me</p>\n\n<pre><code>java.lang.VerifyError: Inconsistent stackmap frames at branch target 128\nException Details:\n  Location:\n    com/lmig/ci/rate/togglz/TogglzFeature.values()[Lcom/lmig/ci/rate/togglz/TogglzFeature; @128: ldc\n  Reason:\n    Type 'java/lang/Object' (current frame, locals[1]) is not assignable to '[Lcom/lmig/ci/rate/togglz/TogglzFeature;' (stack map, locals[1])\n  Current Frame:\n    bci: @120\n    flags: { }\n    locals: { top, 'java/lang/Object', null, null }\n    stack: { 'java/lang/Object', null }\n  Stackmap Frame:\n    bci: @128\n    flags: { }\n    locals: { top, '[Lcom/lmig/ci/rate/togglz/TogglzFeature;' }\n    stack: { }\n  Bytecode:\n    0x0000000: 1248 b800 4e12 4f03 bd00 5112 53b8 0057\n    0x0000010: 1259 b800 5f4b 2a01 4c01 4d2b 127e b800\n    0x0000020: 8012 8112 82b8 0085 b800 894e 2db2 0063\n    0x0000030: a600 0ab2 0063 4da7 0008 2dc0 008a 4d2c\n    0x0000040: a500 082a c000 64b0 014c 014d 2b12 8bb8\n    0x0000050: 0080 128c 128d b800 85b8 0089 4e2d b200\n    0x0000060: 63a6 000a b200 014d a700 082d c000 644d\n    0x0000070: 2c4c 014d 014e 2b01 a500 082b 4ea7 0009\n    0x0000080: 128f b800 804e 2d12 9003 bd00 5112 91b8\n    0x0000090: 0093 1295 b800 963a 0419 04b2 0063 a600\n    0x00000a0: 0b2b b600 984d a700 0919 04c0 008a 4d2c\n    0x00000b0: c000 03b0                              \n  Stackmap Table:\n    full_frame(@58,{Object[#81],Top,Top,Object[#81]},{Object[#81]})\n    full_frame(@63,{Object[#81],Top,Object[#81]},{Object[#81]})\n    chop_frame(@72,3)\n    full_frame(@107,{Top,Top,Top,Object[#81]},{})\n    full_frame(@112,{Top,Top,Object[#81]},{})\n    full_frame(@128,{Top,Object[#50]},{})\n    append_frame(@134,Top,Object[#81])\n    full_frame(@169,{Top,Top,Top,Top,Object[#81]},{})\n    full_frame(@175,{Top,Top,Object[#81]},{})\n\n    at java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\n    at java.lang.Class.getDeclaredConstructors(Class.java:2020)\n    at org.powermock.api.mockito.repackaged.ClassImposterizer.setConstructorsAccessible(ClassImposterizer.java:86)\n    at org.powermock.api.mockito.repackaged.ClassImposterizer.imposterise(ClassImposterizer.java:72)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMethodInvocationControl(MockCreator.java:122)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.createMock(MockCreator.java:70)\n    at org.powermock.api.mockito.internal.mockcreation.MockCreator.mock(MockCreator.java:47)\n    at org.powermock.api.mockito.PowerMockito.mockStatic(PowerMockito.java:71)\n    at com.lmig.ci.rate.orchestration.OrchestratorTest.workerCompShouldGoThroughSteppedAudit(OrchestratorTest.java:97)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.internal.runners.TestMethod.invoke(TestMethod.java:68)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:316)\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:89)\n    at org.junit.internal.runners.MethodRoadie.runBeforesThenTestThenAfters(MethodRoadie.java:97)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.executeTest(PowerMockJUnit44RunnerDelegateImpl.java:300)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTestInSuper(PowerMockJUnit47RunnerDelegateImpl.java:131)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.access$100(PowerMockJUnit47RunnerDelegateImpl.java:59)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner$TestExecutorStatement.evaluate(PowerMockJUnit47RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.evaluateStatement(PowerMockJUnit47RunnerDelegateImpl.java:107)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit47RunnerDelegateImpl$PowerMockJUnit47MethodRunner.executeTest(PowerMockJUnit47RunnerDelegateImpl.java:82)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$PowerMockJUnit44MethodRunner.runBeforesThenTestThenAfters(PowerMockJUnit44RunnerDelegateImpl.java:288)\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:87)\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:50)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.invokeTestMethod(PowerMockJUnit44RunnerDelegateImpl.java:208)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.runMethods(PowerMockJUnit44RunnerDelegateImpl.java:147)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl$1.run(PowerMockJUnit44RunnerDelegateImpl.java:121)\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\n    at org.powermock.modules.junit4.internal.impl.PowerMockJUnit44RunnerDelegateImpl.run(PowerMockJUnit44RunnerDelegateImpl.java:123)\n    at org.powermock.modules.junit4.common.internal.impl.JUnit4TestSuiteChunkerImpl.run(JUnit4TestSuiteChunkerImpl.java:121)\n    at org.powermock.modules.junit4.common.internal.impl.AbstractCommonPowerMockRunner.run(AbstractCommonPowerMockRunner.java:53)\n    at org.powermock.modules.junit4.PowerMockRunner.run(PowerMockRunner.java:59)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:86)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)\n</code></pre>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":25838667,"reputation":312,"user_id":19574650,"display_name":"I.sh."},"score":1,"creation_date":1686519304,"post_id":76451803,"comment_id":134805772,"body_markdown":"First of all it sounds like you didn&#39;t tried to debug it. sec, share with us the website link if you can.","body":"First of all it sounds like you didn&#39;t tried to debug it. sec, share with us the website link if you can."},{"owner":{"account_id":23420907,"reputation":64,"user_id":17481130,"display_name":"VondeTaconadis"},"score":0,"creation_date":1686657706,"post_id":76451803,"comment_id":134826412,"body_markdown":"@I.sh. I updated the post with the link","body":"@I.sh. I updated the post with the link"}],"owner":{"account_id":23420907,"reputation":64,"user_id":17481130,"display_name":"VondeTaconadis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686657653,"creation_date":1686506520,"question_id":76451803,"body_markdown":"I&#39;m trying to get the html code from a page.\r\nThe page has javascript, but if I try to disable it in my broswer I see in the HTML source code that the elements I&#39;m searching exists (but there are not in the String that I get in return from Selenium)\r\nI tried also doing a GET request with postman and the html that I get back is correct (and also different from the one I get from Selenium)\r\n\r\nWhen running the code, Selenium succesful opens the broswer and show me the page, if I do f12 and copy the html, the html code is corrected, but if I try to get it from the code with driver.getSourcePage() the string i get back is not correct.\r\n\r\n    System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Program Files\\\\chromedriver\\\\chromedriver.exe&quot;);\r\n                ChromeOptions options = new ChromeOptions();\r\n               // options.addArguments(&quot;--headless=new&quot;);\r\n                WebDriver driver = new ChromeDriver(options);\r\n    \r\n                driver.get(link);\r\n                Thread.sleep(5000);\r\n                WebElement acceptButton = driver.findElement(By.className(&quot;cookie-alert-extended-button&quot;));\r\n                acceptButton.click();\r\n                System.out.println(driver.getPageSource());\r\n\r\nEverything works fine, even the accept cookie button, but on the System.out.println the html page that I get doesen&#39;t have the thing I need \r\n(The page is fully loaded, because between the time of thread sleep if I copy the html code before the cookie button is clicked, I can see that the html code is full and correct, but when the code resume and the button is clicked, if I check my console the html code that I get is not correct.\r\n\r\n\r\nVERSION OF MY CHROME: 114.0.5735.110\r\n\r\nVERSION OF CHROMEDRIVER: 114.0.5735.90 (the latest avaiable on the chromedriver website)\r\n\r\nWebsite I&#39;m trying to get: https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week\r\n(the products that are in sales)","title":"Java selenium getPageSource() doesen&#39;t return full page","body":"<p>I'm trying to get the html code from a page.\nThe page has javascript, but if I try to disable it in my broswer I see in the HTML source code that the elements I'm searching exists (but there are not in the String that I get in return from Selenium)\nI tried also doing a GET request with postman and the html that I get back is correct (and also different from the one I get from Selenium)</p>\n<p>When running the code, Selenium succesful opens the broswer and show me the page, if I do f12 and copy the html, the html code is corrected, but if I try to get it from the code with driver.getSourcePage() the string i get back is not correct.</p>\n<pre><code>System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;C:\\\\Program Files\\\\chromedriver\\\\chromedriver.exe&quot;);\n            ChromeOptions options = new ChromeOptions();\n           // options.addArguments(&quot;--headless=new&quot;);\n            WebDriver driver = new ChromeDriver(options);\n\n            driver.get(link);\n            Thread.sleep(5000);\n            WebElement acceptButton = driver.findElement(By.className(&quot;cookie-alert-extended-button&quot;));\n            acceptButton.click();\n            System.out.println(driver.getPageSource());\n</code></pre>\n<p>Everything works fine, even the accept cookie button, but on the System.out.println the html page that I get doesen't have the thing I need\n(The page is fully loaded, because between the time of thread sleep if I copy the html code before the cookie button is clicked, I can see that the html code is full and correct, but when the code resume and the button is clicked, if I check my console the html code that I get is not correct.</p>\n<p>VERSION OF MY CHROME: 114.0.5735.110</p>\n<p>VERSION OF CHROMEDRIVER: 114.0.5735.90 (the latest avaiable on the chromedriver website)</p>\n<p>Website I'm trying to get: <a href=\"https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week\" rel=\"nofollow noreferrer\">https://www.lidl.it/c/le-offerte-per-la-tua-spesa/a10019307?tabCode=Current_Sales_Week</a>\n(the products that are in sales)</p>\n"},{"tags":["java","virtual-reality","oculusquest"],"owner":{"account_id":2806607,"reputation":6517,"user_id":2413722,"accept_rate":91,"display_name":"Enijar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686657617,"creation_date":1686657617,"question_id":76464713,"body_markdown":"I have a web app that I am trying to wrap inside an SDK. I already have the app wrapped in the [official APK wrapper](https://developer.oculus.com/documentation/web/pwa-packaging/), which just loads the web app remotely. \r\n\r\nI&#39;m now building my own APK wrapper using a WebView. The app works fine, but when I add the required AndroidManifest.xml settings of `&lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;`, the app loads with a black screen and three animating dots. [This is the only relevant resource](https://communityforums.atmeta.com/t5/Get-Help/Black-screen-with-3-dots-FIX-maybe/m-p/988297/highlight/true#M152106) on the community forum, but isn&#39;t helpful as the HTML I&#39;m loading is just `&lt;h1&gt;Test&lt;/h1&gt;` from a local HTML file in the assets folder.\r\n\r\nDoes anyone know if this is a bug on Oculus Quest 2 devices or something I&#39;m doing wrong?\r\n\r\nRelevant code:\r\n\r\n**AndroidManifest.xml**\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.enijar.test&quot;\r\n    android:excludeFromRecents=&quot;true&quot; android:installLocation=&quot;auto&quot;&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-feature android:name=&quot;android.hardware.vr.headtracking&quot; android:required=&quot;true&quot;\r\n        android:version=&quot;1&quot; /&gt;\r\n    &lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar.FullScreen&quot;\r\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot; android:exported=&quot;true&quot;\r\n            android:screenOrientation=&quot;landscape&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                &lt;!-- This is the line that causes the infinite loading screen --&gt;\r\n                &lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n&lt;/manifest&gt;\r\n```\r\n\r\n**MainActivity.java**\r\n\r\n```java\r\npackage com.enijar.test;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.os.Bundle;\r\nimport android.webkit.WebSettings;\r\nimport android.webkit.WebView;\r\nimport android.webkit.WebViewClient;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    WebView webView;\r\n\r\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        webView = findViewById(R.id.myWebView);\r\n        WebSettings webSettings = webView.getSettings();\r\n        webSettings.setBuiltInZoomControls(true);\r\n        webSettings.setJavaScriptEnabled(true);\r\n        webView.setWebViewClient(new Callback());\r\n        webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\r\n    }\r\n\r\n    private static class Callback extends WebViewClient {\r\n        @Override\r\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onBackPressed() {\r\n        if (webView != null &amp;&amp; webView.canGoBack()) {\r\n            webView.goBack();\r\n        } else {\r\n            super.onBackPressed();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n**assets/index.html**\r\n\r\n```html\r\n&lt;h1&gt;Test&lt;/h1&gt;\r\n```","title":"Load a web app inside a WebView on the Oculus Quest 2 VR headset","body":"<p>I have a web app that I am trying to wrap inside an SDK. I already have the app wrapped in the <a href=\"https://developer.oculus.com/documentation/web/pwa-packaging/\" rel=\"nofollow noreferrer\">official APK wrapper</a>, which just loads the web app remotely.</p>\n<p>I'm now building my own APK wrapper using a WebView. The app works fine, but when I add the required AndroidManifest.xml settings of <code>&lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;</code>, the app loads with a black screen and three animating dots. <a href=\"https://communityforums.atmeta.com/t5/Get-Help/Black-screen-with-3-dots-FIX-maybe/m-p/988297/highlight/true#M152106\" rel=\"nofollow noreferrer\">This is the only relevant resource</a> on the community forum, but isn't helpful as the HTML I'm loading is just <code>&lt;h1&gt;Test&lt;/h1&gt;</code> from a local HTML file in the assets folder.</p>\n<p>Does anyone know if this is a bug on Oculus Quest 2 devices or something I'm doing wrong?</p>\n<p>Relevant code:</p>\n<p><strong>AndroidManifest.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; package=&quot;com.enijar.test&quot;\n    android:excludeFromRecents=&quot;true&quot; android:installLocation=&quot;auto&quot;&gt;\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-feature android:name=&quot;android.hardware.vr.headtracking&quot; android:required=&quot;true&quot;\n        android:version=&quot;1&quot; /&gt;\n    &lt;application android:allowBackup=&quot;true&quot; android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot; android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.AppCompat.Light.NoActionBar.FullScreen&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot; android:exported=&quot;true&quot;\n            android:screenOrientation=&quot;landscape&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;!-- This is the line that causes the infinite loading screen --&gt;\n                &lt;category android:name=&quot;com.oculus.intent.category.VR&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;\n</code></pre>\n<p><strong>MainActivity.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.enijar.test;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.annotation.SuppressLint;\nimport android.os.Bundle;\nimport android.webkit.WebSettings;\nimport android.webkit.WebView;\nimport android.webkit.WebViewClient;\n\npublic class MainActivity extends AppCompatActivity {\n    WebView webView;\n\n    @SuppressLint(&quot;SetJavaScriptEnabled&quot;)\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        webView = findViewById(R.id.myWebView);\n        WebSettings webSettings = webView.getSettings();\n        webSettings.setBuiltInZoomControls(true);\n        webSettings.setJavaScriptEnabled(true);\n        webView.setWebViewClient(new Callback());\n        webView.loadUrl(&quot;file:///android_asset/index.html&quot;);\n    }\n\n    private static class Callback extends WebViewClient {\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, String url) {\n            return false;\n        }\n    }\n\n    @Override\n    public void onBackPressed() {\n        if (webView != null &amp;&amp; webView.canGoBack()) {\n            webView.goBack();\n        } else {\n            super.onBackPressed();\n        }\n    }\n}\n</code></pre>\n<p><strong>assets/index.html</strong></p>\n<pre class=\"lang-html prettyprint-override\"><code>&lt;h1&gt;Test&lt;/h1&gt;\n</code></pre>\n"},{"tags":["java","spring-webflux","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686657535,"creation_date":1686657535,"answer_id":76464704,"question_id":76456241,"body_markdown":"There is one way to do so by creating `ExchangeFilterFunction` to handle server error, and there define retry strategy. Although, it sounds great there are some kickbacks. Finally, I came up with solution based on https://stackoverflow.com/questions/50752021/adding-a-retry-all-requests-of-webclient \r\n","title":"Reactor HttpClient with retry strategy","body":"<p>There is one way to do so by creating <code>ExchangeFilterFunction</code> to handle server error, and there define retry strategy. Although, it sounds great there are some kickbacks. Finally, I came up with solution based on <a href=\"https://stackoverflow.com/questions/50752021/adding-a-retry-all-requests-of-webclient\">Adding a retry all requests of WebClient</a></p>\n"}],"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":206,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686657535,"creation_date":1686569462,"question_id":76456241,"body_markdown":"Right now I define retry strategy for each webClient call (like below) \r\n```\r\n    public ModelResponse exampleMethod() {\r\n\r\n        return webClient\r\n                .get()\r\n                .uri(&quot;/example&quot;)\r\n                .retrieve()\r\n                .bodyToMono(ModelResponse.class)\r\n                .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))\r\n                        .filter(throwable -&gt; throwable instanceof WebClientResponseException\r\n                                &amp;&amp; ((WebClientResponseException) throwable).getStatusCode().is5xxServerError()))\r\n                .block();\r\n    }\r\n```\r\n\r\nI&#39;d like to share the same retry strategy among all WebClients calls (for different methods and http requests).  \r\n\r\nIs it possible to set retry strategy on `reactor.netty.http.client.HttpClient` and then use it to create `WebClient` ? \r\n","title":"Reactor HttpClient with retry strategy","body":"<p>Right now I define retry strategy for each webClient call (like below)</p>\n<pre><code>    public ModelResponse exampleMethod() {\n\n        return webClient\n                .get()\n                .uri(&quot;/example&quot;)\n                .retrieve()\n                .bodyToMono(ModelResponse.class)\n                .retryWhen(Retry.backoff(3, Duration.ofSeconds(1))\n                        .filter(throwable -&gt; throwable instanceof WebClientResponseException\n                                &amp;&amp; ((WebClientResponseException) throwable).getStatusCode().is5xxServerError()))\n                .block();\n    }\n</code></pre>\n<p>I'd like to share the same retry strategy among all WebClients calls (for different methods and http requests).</p>\n<p>Is it possible to set retry strategy on <code>reactor.netty.http.client.HttpClient</code> and then use it to create <code>WebClient</code> ?</p>\n"},{"tags":["java","android","broadcastreceiver","android-wifi","android-networking"],"comments":[{"owner":{"account_id":99491,"reputation":9093,"user_id":713789,"accept_rate":90,"display_name":"Anirudha Gupta"},"score":1,"creation_date":1364540922,"post_id":15698790,"comment_id":22292350,"body_markdown":"Please check http://stackoverflow.com/questions/10273614/why-is-my-broadcastreceiver-receiving-action-user-present-twice","body":"Please check <a href=\"http://stackoverflow.com/questions/10273614/why-is-my-broadcastreceiver-receiving-action-user-present-twice\" title=\"why is my broadcastreceiver receiving action user present twice\">stackoverflow.com/questions/10273614/&hellip;</a>"},{"owner":{"account_id":2922622,"reputation":1030,"user_id":2504569,"accept_rate":20,"display_name":"Lucky Rana"},"score":0,"creation_date":1561318035,"post_id":15698790,"comment_id":100014104,"body_markdown":"Try this library, all works so smoothly. https://github.com/andrefio/Rx.Network","body":"Try this library, all works so smoothly. <a href=\"https://github.com/andrefio/Rx.Network\" rel=\"nofollow noreferrer\">github.com/andrefio/Rx.Network</a>"}],"answers":[{"tags":[],"owner":{"display_name":"user1381827"},"down_vote_count":1,"up_vote_count":256,"is_accepted":true,"score":255,"last_activity_date":1686654484,"creation_date":1364549975,"answer_id":15700728,"question_id":15698790,"body_markdown":"**Answer to your first question**: Your broadcast receiver is being called two times because \r\n\r\nYou have added two `&lt;intent-filter&gt;` \r\n\r\n1. Change in network connection :  \r\n`&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;`\r\n\r\n2. Change in WiFi state:  \r\n`&lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;`\r\n\r\nJust use one:  \r\n `&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;`.\r\n\r\nIt will respond to only one action instead of two. See [here][1] for more information.\r\n\r\n\r\n**Answer to your second question** (you want the receiver to call only one time if an internet connection is available):\r\n\r\nYour code is perfect; you notify only when the internet is available.\r\n\r\n**UPDATE**\r\n\r\nYou can use this method to check your connectivity if you want just to check whether your mobile is connected to the internet or not.\r\n\r\n    public boolean isOnline(Context context) {\r\n      \r\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n        //should check null because in airplane mode it will be a null\r\n        return (netInfo != null &amp;&amp; netInfo.isConnected());\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/15546897/1168654","title":"Broadcast receiver for checking internet connection in android app","body":"<p><strong>Answer to your first question</strong>: Your broadcast receiver is being called two times because</p>\n<p>You have added two <code>&lt;intent-filter&gt;</code></p>\n<ol>\n<li><p>Change in network connection :<br />\n<code>&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;</code></p>\n</li>\n<li><p>Change in WiFi state:<br />\n<code>&lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;</code></p>\n</li>\n</ol>\n<p>Just use one:<br />\n<code>&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;</code>.</p>\n<p>It will respond to only one action instead of two. See <a href=\"https://stackoverflow.com/a/15546897/1168654\">here</a> for more information.</p>\n<p><strong>Answer to your second question</strong> (you want the receiver to call only one time if an internet connection is available):</p>\n<p>Your code is perfect; you notify only when the internet is available.</p>\n<p><strong>UPDATE</strong></p>\n<p>You can use this method to check your connectivity if you want just to check whether your mobile is connected to the internet or not.</p>\n<pre><code>public boolean isOnline(Context context) {\n  \n    ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo netInfo = cm.getActiveNetworkInfo();\n    //should check null because in airplane mode it will be a null\n    return (netInfo != null &amp;&amp; netInfo.isConnected());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3643526,"reputation":158,"user_id":3037126,"display_name":"Ani"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1445011093,"creation_date":1385537357,"answer_id":20236314,"question_id":15698790,"body_markdown":"    public static boolean isNetworkAvailable(Context context) {\r\n    \t\tboolean isMobile = false, isWifi = false;\r\n    \r\n    \t\tNetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(\r\n    \t\t\t\tcontext).getAllNetworkInfo();\r\n    \r\n    \t\tif (infoAvailableNetworks != null) {\r\n    \t\t\tfor (NetworkInfo network : infoAvailableNetworks) {\r\n    \r\n    \t\t\t\tif (network.getType() == ConnectivityManager.TYPE_WIFI) {\r\n    \t\t\t\t\tif (network.isConnected() &amp;&amp; network.isAvailable())\r\n    \t\t\t\t\t\tisWifi = true;\r\n    \t\t\t\t}\r\n    \t\t\t\tif (network.getType() == ConnectivityManager.TYPE_MOBILE) {\r\n    \t\t\t\t\tif (network.isConnected() &amp;&amp; network.isAvailable())\r\n    \t\t\t\t\t\tisMobile = true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn isMobile || isWifi;\r\n    \t}\r\n    \r\n    /* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */\r\n    public class NetworkChangedReceiver extends BroadcastReceiver \r\n    {\r\n    @Override\r\n    \tpublic void onReceive(Context context, Intent intent) {\r\n    \r\n    \t\tif (isNetworkAvailable(context)) \r\n                    {\r\n    \t\t     Toast.makeText(context, &quot;Network Available Do operations&quot;,Toast.LENGTH_LONG).show(); \r\n    \r\n    \t\t\t\r\n    \t}\r\n        }\r\n    }\r\nThis above broadcast receiver will be called only when Network state change to connected and not on disconnected.\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public static boolean isNetworkAvailable(Context context) {\n        boolean isMobile = false, isWifi = false;\n\n        NetworkInfo[] infoAvailableNetworks = getConnectivityManagerInstance(\n                context).getAllNetworkInfo();\n\n        if (infoAvailableNetworks != null) {\n            for (NetworkInfo network : infoAvailableNetworks) {\n\n                if (network.getType() == ConnectivityManager.TYPE_WIFI) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isWifi = true;\n                }\n                if (network.getType() == ConnectivityManager.TYPE_MOBILE) {\n                    if (network.isConnected() &amp;&amp; network.isAvailable())\n                        isMobile = true;\n                }\n            }\n        }\n\n        return isMobile || isWifi;\n    }\n\n/* You can write such method somewhere in utility class and call it NetworkChangeReceiver like below */\npublic class NetworkChangedReceiver extends BroadcastReceiver \n{\n@Override\n    public void onReceive(Context context, Intent intent) {\n\n        if (isNetworkAvailable(context)) \n                {\n             Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n\n\n    }\n    }\n}\n</code></pre>\n\n<p>This above broadcast receiver will be called only when Network state change to connected and not on disconnected.</p>\n"},{"tags":[],"owner":{"account_id":1688051,"reputation":1121,"user_id":1550939,"accept_rate":0,"display_name":"ayesh don"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1572455667,"creation_date":1411641974,"answer_id":26036628,"question_id":15698790,"body_markdown":"Try with this \r\n\r\n    public class ConnectionBroadcastReceiver extends BroadcastReceiver {\r\n    @Override\r\n    public void onReceive(Context context, Intent intent) {\r\n\r\n        \r\n        if (&lt;Check internet connection available &gt;) { \r\n        \tToast.makeText(context, &quot;connect to the internet&quot;, Toast.LENGTH_LONG).show();\r\n        \t\r\n        \t/*upload background upload service*/\r\n        \tIntent serviceIntent = new Intent(context,&lt;your service class&gt;);\r\n            context.startService(serviceIntent);\r\n        \t\r\n        \t\r\n\t\t}else{\r\n\t\t\tToast.makeText(context, &quot;Connection failed&quot;, Toast.LENGTH_LONG).show();\r\n\t\t\t\r\n\t\t}\r\n        }\r\n    }\r\n\r\nAs soon as internet connection trigger, this (BroadcastReciever) will be loaded\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Try with this </p>\n\n<pre><code>public class ConnectionBroadcastReceiver extends BroadcastReceiver {\n@Override\npublic void onReceive(Context context, Intent intent) {\n\n\n    if (&lt;Check internet connection available &gt;) { \n        Toast.makeText(context, \"connect to the internet\", Toast.LENGTH_LONG).show();\n\n        /*upload background upload service*/\n        Intent serviceIntent = new Intent(context,&lt;your service class&gt;);\n        context.startService(serviceIntent);\n\n\n    }else{\n        Toast.makeText(context, \"Connection failed\", Toast.LENGTH_LONG).show();\n\n    }\n    }\n}\n</code></pre>\n\n<p>As soon as internet connection trigger, this (BroadcastReciever) will be loaded</p>\n"},{"tags":[],"owner":{"account_id":3766062,"reputation":5113,"user_id":3129572,"display_name":"Vaishali Sutariya"},"down_vote_count":2,"up_vote_count":92,"is_accepted":false,"score":90,"last_activity_date":1612283251,"creation_date":1412059016,"answer_id":26114247,"question_id":15698790,"body_markdown":"    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n            if (checkInternet(context)) {\r\n                Toast.makeText(context, &quot;Network Available Do operations&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n        }\r\n    \r\n        boolean checkInternet(Context context) {\r\n            ServiceManager serviceManager = new ServiceManager(context);\r\n            return serviceManager.isNetworkAvailable()\r\n        }\r\n    }\r\n\r\nServiceManager.java\r\n\r\n    public class ServiceManager {\r\n    \r\n        Context context;\r\n    \r\n        public ServiceManager(Context base) {\r\n            context = base;\r\n        }\r\n    \r\n        public boolean isNetworkAvailable() {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = cm.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n        }\r\n    }\r\n    \r\npermissions:\r\n\r\n     &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n     &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        if (checkInternet(context)) {\n            Toast.makeText(context, &quot;Network Available Do operations&quot;, Toast.LENGTH_LONG).show();\n        }\n    }\n\n    boolean checkInternet(Context context) {\n        ServiceManager serviceManager = new ServiceManager(context);\n        return serviceManager.isNetworkAvailable()\n    }\n}\n</code></pre>\n<p>ServiceManager.java</p>\n<pre><code>public class ServiceManager {\n\n    Context context;\n\n    public ServiceManager(Context base) {\n        context = base;\n    }\n\n    public boolean isNetworkAvailable() {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = cm.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n    }\n}\n</code></pre>\n<p>permissions:</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5563660,"reputation":2326,"user_id":4519859,"display_name":"Aj 27"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1441344775,"creation_date":1441344775,"answer_id":32390749,"question_id":15698790,"body_markdown":"Use this method to check the network state:\r\n\r\n    private void checkInternetConnection() {\r\n\r\n        if (br == null) {\r\n\r\n            br = new BroadcastReceiver() {\r\n\r\n                @Override\r\n                public void onReceive(Context context, Intent intent) {\r\n\r\n                    Bundle extras = intent.getExtras();\r\n\r\n                    NetworkInfo info = (NetworkInfo) extras\r\n                            .getParcelable(&quot;networkInfo&quot;);\r\n\r\n                    State state = info.getState();\r\n                    Log.d(&quot;TEST Internet&quot;, info.toString() + &quot; &quot;\r\n                            + state.toString());\r\n\r\n                    if (state == State.CONNECTED) {\r\n                          Toast.makeText(getApplicationContext(), &quot;Internet connection is on&quot;, Toast.LENGTH_LONG).show();\r\n\r\n                    } else {\r\n                           Toast.makeText(getApplicationContext(), &quot;Internet connection is Off&quot;, Toast.LENGTH_LONG).show();\r\n                    }\r\n\r\n                }\r\n            };\r\n\r\n            final IntentFilter intentFilter = new IntentFilter();\r\n            intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\r\n            registerReceiver((BroadcastReceiver) br, intentFilter);\r\n        }\r\n    }\r\n\r\nremember to unregister service in onDestroy.\r\n\r\nCheers!!","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Use this method to check the network state:</p>\n\n<pre><code>private void checkInternetConnection() {\n\n    if (br == null) {\n\n        br = new BroadcastReceiver() {\n\n            @Override\n            public void onReceive(Context context, Intent intent) {\n\n                Bundle extras = intent.getExtras();\n\n                NetworkInfo info = (NetworkInfo) extras\n                        .getParcelable(\"networkInfo\");\n\n                State state = info.getState();\n                Log.d(\"TEST Internet\", info.toString() + \" \"\n                        + state.toString());\n\n                if (state == State.CONNECTED) {\n                      Toast.makeText(getApplicationContext(), \"Internet connection is on\", Toast.LENGTH_LONG).show();\n\n                } else {\n                       Toast.makeText(getApplicationContext(), \"Internet connection is Off\", Toast.LENGTH_LONG).show();\n                }\n\n            }\n        };\n\n        final IntentFilter intentFilter = new IntentFilter();\n        intentFilter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n        registerReceiver((BroadcastReceiver) br, intentFilter);\n    }\n}\n</code></pre>\n\n<p>remember to unregister service in onDestroy.</p>\n\n<p>Cheers!!</p>\n"},{"tags":[],"owner":{"account_id":3993466,"reputation":49,"user_id":3291641,"display_name":"Farzad Rohani"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1450950702,"creation_date":1450950702,"answer_id":34450770,"question_id":15698790,"body_markdown":"    public class AsyncCheckInternet extends AsyncTask&lt;String, Void, Boolean&gt; {\r\n\r\n\tpublic static final int TIME_OUT = 10 * 1000;\r\n\r\n\tprivate OnCallBack listener;\r\n\r\n\tpublic interface OnCallBack {\r\n\r\n\t\tpublic void onBack(Boolean value);\r\n\t}\r\n\r\n\tpublic AsyncCheckInternet(OnCallBack listener) {\r\n\t\tthis.listener = listener;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void onPreExecute() {\r\n\t}\r\n\r\n\t@Override\r\n\tprotected Boolean doInBackground(String... params) {\r\n\r\n\t\tConnectivityManager connectivityManager = (ConnectivityManager) General.context\r\n\t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n\t\tNetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n\r\n\t\tif ((networkInfo != null &amp;&amp; networkInfo.isConnected())\r\n\t\t\t\t&amp;&amp; ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo\r\n\t\t\t\t\t\t.getType() == ConnectivityManager.TYPE_MOBILE))) {\r\n\t\t\tHttpURLConnection urlc;\r\n\t\t\ttry {\r\n\t\t\t\turlc = (HttpURLConnection) (new URL(&quot;http://www.google.com&quot;)\r\n\t\t\t\t\t\t.openConnection());\r\n\t\t\t\turlc.setConnectTimeout(TIME_OUT);\r\n\t\t\t\turlc.connect();\r\n\t\t\t\tif (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} catch (MalformedURLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t\treturn false;\r\n\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void onPostExecute(Boolean result) {\r\n\t\tif (listener != null) {\r\n\t\t\tlistener.onBack(result);\r\n\t\t}\r\n\t}\r\n}\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<pre><code>public class AsyncCheckInternet extends AsyncTask&lt;String, Void, Boolean&gt; {\n\npublic static final int TIME_OUT = 10 * 1000;\n\nprivate OnCallBack listener;\n\npublic interface OnCallBack {\n\n    public void onBack(Boolean value);\n}\n\npublic AsyncCheckInternet(OnCallBack listener) {\n    this.listener = listener;\n}\n\n@Override\nprotected void onPreExecute() {\n}\n\n@Override\nprotected Boolean doInBackground(String... params) {\n\n    ConnectivityManager connectivityManager = (ConnectivityManager) General.context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n\n    if ((networkInfo != null &amp;&amp; networkInfo.isConnected())\n            &amp;&amp; ((networkInfo.getType() == ConnectivityManager.TYPE_WIFI) || (networkInfo\n                    .getType() == ConnectivityManager.TYPE_MOBILE))) {\n        HttpURLConnection urlc;\n        try {\n            urlc = (HttpURLConnection) (new URL(\"http://www.google.com\")\n                    .openConnection());\n            urlc.setConnectTimeout(TIME_OUT);\n            urlc.connect();\n            if (urlc.getResponseCode() == HttpURLConnection.HTTP_OK) {\n                return true;\n            } else {\n                return false;\n            }\n        } catch (MalformedURLException e) {\n            e.printStackTrace();\n            return false;\n\n        } catch (IOException e) {\n            e.printStackTrace();\n            return false;\n\n        }\n    } else {\n        return false;\n    }\n}\n\n@Override\nprotected void onPostExecute(Boolean result) {\n    if (listener != null) {\n        listener.onBack(result);\n    }\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":1616629,"reputation":3102,"user_id":1494133,"accept_rate":71,"display_name":"Nativ"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1466438013,"creation_date":1465205665,"answer_id":37654006,"question_id":15698790,"body_markdown":"I know this thread is old and fully answered but I feel that the following might help some people.\r\n\r\nThe code in the body of the question contains a bug which no one here addressed.\r\n@Nikhil is checking whether the wifi/mobile is available and not if it&#39;s connected.\r\n\r\nThe fix is here:\r\n\r\n    \r\n\r\n    @Override\r\n    public void onReceive(final Context context, final Intent intent) {\r\n        final ConnectivityManager connMgr = (ConnectivityManager) context\r\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\r\n        final android.net.NetworkInfo wifi = connMgr\r\n                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n\r\n        final android.net.NetworkInfo mobile = connMgr\r\n                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n\r\n        if (wifi.isConnected() || mobile.isConnected()) {\r\n          // do stuff\r\n        }\r\n    }\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>I know this thread is old and fully answered but I feel that the following might help some people.</p>\n\n<p>The code in the body of the question contains a bug which no one here addressed.\n@Nikhil is checking whether the wifi/mobile is available and not if it's connected.</p>\n\n<p>The fix is here:</p>\n\n<pre><code>@Override\npublic void onReceive(final Context context, final Intent intent) {\n    final ConnectivityManager connMgr = (ConnectivityManager) context\n            .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n    final android.net.NetworkInfo wifi = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n    final android.net.NetworkInfo mobile = connMgr\n            .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n    if (wifi.isConnected() || mobile.isConnected()) {\n      // do stuff\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6230966,"reputation":6483,"user_id":4847767,"display_name":"Alex Zaraos"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1470958868,"creation_date":1470958303,"answer_id":38907643,"question_id":15698790,"body_markdown":"manifest:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n    &lt;receiver android:name=&quot;.your.namepackage.here.ConnectivityReceiver&quot;&gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;/&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n\r\nclass for receiver:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ConnectivityReceiver extends BroadcastReceiver{\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            final String action = intent.getAction();\r\n            switch (action) {\r\n                case ConnectivityManager.CONNECTIVITY_ACTION:\r\n                    DebugUtils.logDebug(&quot;BROADCAST&quot;, &quot;network change&quot;);\r\n                    if(NetworkUtils.isConnect()){\r\n                        //do action here\r\n                    }\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\nand classs utils like example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class NetworkUtils {\r\n    \r\n        public static boolean isConnect() {\r\n            ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                Network[] netArray = connectivityManager.getAllNetworks();\r\n                NetworkInfo netInfo;\r\n                for (Network net : netArray) {\r\n                    netInfo = connectivityManager.getNetworkInfo(net);\r\n                    if ((netInfo.getTypeName().equalsIgnoreCase(&quot;WIFI&quot;) || netInfo.getTypeName().equalsIgnoreCase(&quot;MOBILE&quot;)) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\r\n                        //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {\r\n                        Log.d(&quot;Network&quot;, &quot;NETWORKNAME: &quot; + netInfo.getTypeName());\r\n                        return true;\r\n                    }\r\n                }\r\n            } else {\r\n                if (connectivityManager != null) {\r\n                    @SuppressWarnings(&quot;deprecation&quot;)\r\n                    NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();\r\n                    if (netInfoArray != null) {\r\n                        for (NetworkInfo netInfo : netInfoArray) {\r\n                            if ((netInfo.getTypeName().equalsIgnoreCase(&quot;WIFI&quot;) || netInfo.getTypeName().equalsIgnoreCase(&quot;MOBILE&quot;)) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\r\n                                //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {\r\n                                Log.d(&quot;Network&quot;, &quot;NETWORKNAME: &quot; + netInfo.getTypeName());\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>manifest:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;receiver android:name=\".your.namepackage.here.ConnectivityReceiver\"&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\"/&gt;\n    &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p>class for receiver:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ConnectivityReceiver extends BroadcastReceiver{\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        final String action = intent.getAction();\n        switch (action) {\n            case ConnectivityManager.CONNECTIVITY_ACTION:\n                DebugUtils.logDebug(\"BROADCAST\", \"network change\");\n                if(NetworkUtils.isConnect()){\n                    //do action here\n                }\n            break;\n        }\n    }\n}\n</code></pre>\n\n<p>and classs utils like example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class NetworkUtils {\n\n    public static boolean isConnect() {\n        ConnectivityManager connectivityManager = (ConnectivityManager) Application.getInstance().getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            Network[] netArray = connectivityManager.getAllNetworks();\n            NetworkInfo netInfo;\n            for (Network net : netArray) {\n                netInfo = connectivityManager.getNetworkInfo(net);\n                if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                    //if (netInfo.getState().equals(NetworkInfo.State.CONNECTED)) {\n                    Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                    return true;\n                }\n            }\n        } else {\n            if (connectivityManager != null) {\n                @SuppressWarnings(\"deprecation\")\n                NetworkInfo[] netInfoArray = connectivityManager.getAllNetworkInfo();\n                if (netInfoArray != null) {\n                    for (NetworkInfo netInfo : netInfoArray) {\n                        if ((netInfo.getTypeName().equalsIgnoreCase(\"WIFI\") || netInfo.getTypeName().equalsIgnoreCase(\"MOBILE\")) &amp;&amp; netInfo.isConnected() &amp;&amp; netInfo.isAvailable()) {\n                            //if (netInfo.getState() == NetworkInfo.State.CONNECTED) {\n                            Log.d(\"Network\", \"NETWORKNAME: \" + netInfo.getTypeName());\n                            return true;\n                        }\n                    }\n                }\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2675746,"reputation":2464,"user_id":2334534,"accept_rate":50,"display_name":"Ajit Singh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1477666194,"creation_date":1477666194,"answer_id":40307672,"question_id":15698790,"body_markdown":"Add a broadcast receiver which can listen to network connectivity change. Then check wether device is connected to internet or not using ConnectivityManager. Refer to this [post][1] or [video][2] for detailed understanding. Below is the code:\r\n\r\n    public class NetworkStateChangeReceiver extends BroadcastReceiver {\r\n      public static final String NETWORK_AVAILABLE_ACTION = &quot;com.ajit.singh.NetworkAvailable&quot;;\r\n      public static final String IS_NETWORK_AVAILABLE = &quot;isNetworkAvailable&quot;;\r\n     \r\n      @Override\r\n      public void onReceive(Context context, Intent intent) {\r\n        Intent networkStateIntent = new Intent(NETWORK_AVAILABLE_ACTION);\r\n        networkStateIntent.putExtra(IS_NETWORK_AVAILABLE,  isConnectedToInternet(context));\r\n        LocalBroadcastManager.getInstance(context).sendBroadcast(networkStateIntent);\r\n      }\r\n     \r\n      private boolean isConnectedToInternet(Context context) {\r\n        try {\r\n          if (context != null) {\r\n            ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n          }\r\n          return false;\r\n        } catch (Exception e) {\r\n          Log.e(NetworkStateChangeReceiver.class.getName(), e.getMessage());\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\nI wrote this receiver to show a notification on the Screen, that&#39;s why you see a local broadcast with the network status. Here is the code to show the notification.\r\n\r\n    public class MainActivity extends AppCompatActivity {\r\n     \r\n      @Override\r\n      protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n     \r\n        IntentFilter intentFilter = new IntentFilter(NetworkStateChangeReceiver.NETWORK_AVAILABLE_ACTION);\r\n        LocalBroadcastManager.getInstance(this).registerReceiver(new BroadcastReceiver() {\r\n          @Override\r\n          public void onReceive(Context context, Intent intent) {\r\n            boolean isNetworkAvailable = intent.getBooleanExtra(IS_NETWORK_AVAILABLE, false);\r\n            String networkStatus = isNetworkAvailable ? &quot;connected&quot; : &quot;disconnected&quot;;\r\n     \r\n            Snackbar.make(findViewById(R.id.activity_main), &quot;Network Status: &quot; + networkStatus, Snackbar.LENGTH_LONG).show();\r\n          }\r\n        }, intentFilter);\r\n      }\r\n    }\r\n\r\nActivity listens to the intent broadcasted by the network receiver and shows the notification on the screen.\r\n\r\n\r\n  [1]: http://www.singhajit.com/notify-android-device-network-status-changes/\r\n  [2]: https://www.youtube.com/watch?v=ubvWRlFnr74","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Add a broadcast receiver which can listen to network connectivity change. Then check wether device is connected to internet or not using ConnectivityManager. Refer to this <a href=\"http://www.singhajit.com/notify-android-device-network-status-changes/\" rel=\"nofollow\">post</a> or <a href=\"https://www.youtube.com/watch?v=ubvWRlFnr74\" rel=\"nofollow\">video</a> for detailed understanding. Below is the code:</p>\n\n<pre><code>public class NetworkStateChangeReceiver extends BroadcastReceiver {\n  public static final String NETWORK_AVAILABLE_ACTION = \"com.ajit.singh.NetworkAvailable\";\n  public static final String IS_NETWORK_AVAILABLE = \"isNetworkAvailable\";\n\n  @Override\n  public void onReceive(Context context, Intent intent) {\n    Intent networkStateIntent = new Intent(NETWORK_AVAILABLE_ACTION);\n    networkStateIntent.putExtra(IS_NETWORK_AVAILABLE,  isConnectedToInternet(context));\n    LocalBroadcastManager.getInstance(context).sendBroadcast(networkStateIntent);\n  }\n\n  private boolean isConnectedToInternet(Context context) {\n    try {\n      if (context != null) {\n        ConnectivityManager connectivityManager = (ConnectivityManager) context.getSystemService(CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n      }\n      return false;\n    } catch (Exception e) {\n      Log.e(NetworkStateChangeReceiver.class.getName(), e.getMessage());\n      return false;\n    }\n  }\n}\n</code></pre>\n\n<p>I wrote this receiver to show a notification on the Screen, that's why you see a local broadcast with the network status. Here is the code to show the notification.</p>\n\n<pre><code>public class MainActivity extends AppCompatActivity {\n\n  @Override\n  protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_main);\n\n    IntentFilter intentFilter = new IntentFilter(NetworkStateChangeReceiver.NETWORK_AVAILABLE_ACTION);\n    LocalBroadcastManager.getInstance(this).registerReceiver(new BroadcastReceiver() {\n      @Override\n      public void onReceive(Context context, Intent intent) {\n        boolean isNetworkAvailable = intent.getBooleanExtra(IS_NETWORK_AVAILABLE, false);\n        String networkStatus = isNetworkAvailable ? \"connected\" : \"disconnected\";\n\n        Snackbar.make(findViewById(R.id.activity_main), \"Network Status: \" + networkStatus, Snackbar.LENGTH_LONG).show();\n      }\n    }, intentFilter);\n  }\n}\n</code></pre>\n\n<p>Activity listens to the intent broadcasted by the network receiver and shows the notification on the screen.</p>\n"},{"tags":[],"owner":{"account_id":3225868,"reputation":1863,"user_id":2722270,"display_name":"Weiyi"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1490938469,"creation_date":1490938469,"answer_id":43133106,"question_id":15698790,"body_markdown":"just for someone else who wanna register a broadcast dynamicly:\r\n\r\n    BroadcastReceiver mWifiReceiver = new BroadcastReceiver() {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            if (checkWifiConnect()) {\r\n                Log.d(TAG, &quot;wifi has connected&quot;);\r\n                // TODO\r\n            }\r\n        }\r\n    };\r\n\r\n    private void registerWifiReceiver() {\r\n        IntentFilter filter = new IntentFilter();\r\n        filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);\r\n        filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);\r\n        filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\r\n        mContext.registerReceiver(mWifiReceiver, filter);\r\n    }\r\n\r\n    private void unregisterWifiReceiver() {\r\n        mContext.unregisterReceiver(mWifiReceiver);\r\n    }\r\n\r\n    private boolean checkWifiConnect() {\r\n        ConnectivityManager manager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n        NetworkInfo networkInfo = manager.getActiveNetworkInfo();\r\n        if (networkInfo != null\r\n                &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI\r\n                &amp;&amp; networkInfo.isConnected()) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }","title":"Broadcast receiver for checking internet connection in android app","body":"<p>just for someone else who wanna register a broadcast dynamicly:</p>\n\n<pre><code>BroadcastReceiver mWifiReceiver = new BroadcastReceiver() {\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (checkWifiConnect()) {\n            Log.d(TAG, \"wifi has connected\");\n            // TODO\n        }\n    }\n};\n\nprivate void registerWifiReceiver() {\n    IntentFilter filter = new IntentFilter();\n    filter.addAction(WifiManager.NETWORK_STATE_CHANGED_ACTION);\n    filter.addAction(WifiManager.WIFI_STATE_CHANGED_ACTION);\n    filter.addAction(ConnectivityManager.CONNECTIVITY_ACTION);\n    mContext.registerReceiver(mWifiReceiver, filter);\n}\n\nprivate void unregisterWifiReceiver() {\n    mContext.unregisterReceiver(mWifiReceiver);\n}\n\nprivate boolean checkWifiConnect() {\n    ConnectivityManager manager = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);\n    NetworkInfo networkInfo = manager.getActiveNetworkInfo();\n    if (networkInfo != null\n            &amp;&amp; networkInfo.getType() == ConnectivityManager.TYPE_WIFI\n            &amp;&amp; networkInfo.isConnected()) {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6925725,"reputation":10963,"user_id":5316872,"display_name":"Keshav Gera"},"down_vote_count":1,"up_vote_count":66,"is_accepted":false,"score":65,"last_activity_date":1548089075,"creation_date":1499072520,"answer_id":44881551,"question_id":15698790,"body_markdown":"Checking internet status every time using Broadcast Receiver:\r\n    \r\n[![internet status implementation][1]][1]\r\n\r\n[Full source code available on Google Drive](https://drive.google.com/open?id=0BzBKpZ4nzNzUYjhZamFIZTh6VTQ).\r\n\r\n**AndroidManifest.xml**\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;receiver android:name=&quot;.receivers.NetworkChangeReceiver&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n    \r\n**BroadcastReciever**\r\n\r\n    package com.keshav.networkchangereceiverexample.receivers;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkInfo;\r\n    import android.util.Log;\r\n    \r\n    import static com.keshav.networkchangereceiverexample.MainActivity.dialog;\r\n    \r\n    public class NetworkChangeReceiver extends BroadcastReceiver\r\n    {\r\n        @Override\r\n        public void onReceive(Context context, Intent intent)\r\n        {\r\n            try\r\n            {\r\n                if (isOnline(context)) {\r\n                    dialog(true);\r\n                    Log.e(&quot;keshav&quot;, &quot;Online Connect Intenet &quot;);\r\n                } else {\r\n                    dialog(false);\r\n                    Log.e(&quot;keshav&quot;, &quot;Conectivity Failure !!! &quot;);\r\n                }\r\n            } catch (NullPointerException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private boolean isOnline(Context context) {\r\n            try {\r\n                ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n                NetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n                //should check null because in airplane mode it will be null\r\n                return (netInfo != null &amp;&amp; netInfo.isConnected());\r\n            } catch (NullPointerException e) {\r\n                e.printStackTrace();\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n\r\n**MainActivity.java**\r\n\r\n    package com.keshav.networkchangereceiverexample;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Intent;\r\n    import android.content.IntentFilter;\r\n    import android.graphics.Color;\r\n    import android.net.ConnectivityManager;\r\n    import android.os.Build;\r\n    import android.os.Handler;\r\n    import android.os.Looper;\r\n    import android.support.v7.app.AppCompatActivity;\r\n    import android.os.Bundle;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.view.animation.Animation;\r\n    import android.view.animation.AnimationUtils;\r\n    import android.widget.TextView;\r\n    \r\n    import com.keshav.networkchangereceiverexample.receivers.NetworkChangeReceiver;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        private BroadcastReceiver mNetworkReceiver;\r\n        static TextView tv_check_connection;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n            tv_check_connection=(TextView) findViewById(R.id.tv_check_connection);\r\n            mNetworkReceiver = new NetworkChangeReceiver();\r\n            registerNetworkBroadcastForNougat();\r\n    \r\n        }\r\n    \r\n        public static void dialog(boolean value){\r\n    \r\n            if(value){\r\n                tv_check_connection.setText(&quot;We are back !!!&quot;);\r\n                tv_check_connection.setBackgroundColor(Color.GREEN);\r\n                tv_check_connection.setTextColor(Color.WHITE);\r\n    \r\n                Handler handler = new Handler();\r\n                Runnable delayrunnable = new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n                        tv_check_connection.setVisibility(View.GONE);\r\n                    }\r\n                };\r\n                handler.postDelayed(delayrunnable, 3000);\r\n            }else {\r\n                tv_check_connection.setVisibility(View.VISIBLE);\r\n                tv_check_connection.setText(&quot;Could not Connect to internet&quot;);\r\n                tv_check_connection.setBackgroundColor(Color.RED);\r\n                tv_check_connection.setTextColor(Color.WHITE);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void registerNetworkBroadcastForNougat() {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\r\n                registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\r\n            }\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\r\n            }\r\n        }\r\n    \r\n        protected void unregisterNetworkChanges() {\r\n            try {\r\n                unregisterReceiver(mNetworkReceiver);\r\n            } catch (IllegalArgumentException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onDestroy() {\r\n            super.onDestroy();\r\n            unregisterNetworkChanges();\r\n        }\r\n    }\r\n    \r\n**activity_main.xml**\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n        xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;\r\n        tools:context=&quot;com.keshav.networkchangereceiverexample.MainActivity&quot;&gt;\r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/tv_check_connection&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;wrap_content&quot;\r\n            android:text=&quot;Connection establised !&quot;\r\n            android:padding=&quot;25dp&quot;\r\n            app:layout_constraintBottom_toBottomOf=&quot;parent&quot;\r\n            android:gravity=&quot;center&quot;\r\n            app:layout_constraintLeft_toLeftOf=&quot;parent&quot;\r\n            app:layout_constraintRight_toRightOf=&quot;parent&quot;\r\n            app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;\r\n    \r\n    &lt;/LinearLayout&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DoOg3.png","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Checking internet status every time using Broadcast Receiver:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DoOg3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DoOg3.png\" alt=\"internet status implementation\"></a></p>\n\n<p><a href=\"https://drive.google.com/open?id=0BzBKpZ4nzNzUYjhZamFIZTh6VTQ\" rel=\"noreferrer\">Full source code available on Google Drive</a>.</p>\n\n<p><strong>AndroidManifest.xml</strong></p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;receiver android:name=\".receivers.NetworkChangeReceiver\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p><strong>BroadcastReciever</strong></p>\n\n<pre><code>package com.keshav.networkchangereceiverexample.receivers;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.util.Log;\n\nimport static com.keshav.networkchangereceiverexample.MainActivity.dialog;\n\npublic class NetworkChangeReceiver extends BroadcastReceiver\n{\n    @Override\n    public void onReceive(Context context, Intent intent)\n    {\n        try\n        {\n            if (isOnline(context)) {\n                dialog(true);\n                Log.e(\"keshav\", \"Online Connect Intenet \");\n            } else {\n                dialog(false);\n                Log.e(\"keshav\", \"Conectivity Failure !!! \");\n            }\n        } catch (NullPointerException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private boolean isOnline(Context context) {\n        try {\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n            NetworkInfo netInfo = cm.getActiveNetworkInfo();\n            //should check null because in airplane mode it will be null\n            return (netInfo != null &amp;&amp; netInfo.isConnected());\n        } catch (NullPointerException e) {\n            e.printStackTrace();\n            return false;\n        }\n    }\n}\n</code></pre>\n\n<p><strong>MainActivity.java</strong></p>\n\n<pre><code>package com.keshav.networkchangereceiverexample;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.graphics.Color;\nimport android.net.ConnectivityManager;\nimport android.os.Build;\nimport android.os.Handler;\nimport android.os.Looper;\nimport android.support.v7.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.view.View;\nimport android.view.animation.Animation;\nimport android.view.animation.AnimationUtils;\nimport android.widget.TextView;\n\nimport com.keshav.networkchangereceiverexample.receivers.NetworkChangeReceiver;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private BroadcastReceiver mNetworkReceiver;\n    static TextView tv_check_connection;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        tv_check_connection=(TextView) findViewById(R.id.tv_check_connection);\n        mNetworkReceiver = new NetworkChangeReceiver();\n        registerNetworkBroadcastForNougat();\n\n    }\n\n    public static void dialog(boolean value){\n\n        if(value){\n            tv_check_connection.setText(\"We are back !!!\");\n            tv_check_connection.setBackgroundColor(Color.GREEN);\n            tv_check_connection.setTextColor(Color.WHITE);\n\n            Handler handler = new Handler();\n            Runnable delayrunnable = new Runnable() {\n                @Override\n                public void run() {\n                    tv_check_connection.setVisibility(View.GONE);\n                }\n            };\n            handler.postDelayed(delayrunnable, 3000);\n        }else {\n            tv_check_connection.setVisibility(View.VISIBLE);\n            tv_check_connection.setText(\"Could not Connect to internet\");\n            tv_check_connection.setBackgroundColor(Color.RED);\n            tv_check_connection.setTextColor(Color.WHITE);\n        }\n    }\n\n\n    private void registerNetworkBroadcastForNougat() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        }\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            registerReceiver(mNetworkReceiver, new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));\n        }\n    }\n\n    protected void unregisterNetworkChanges() {\n        try {\n            unregisterReceiver(mNetworkReceiver);\n        } catch (IllegalArgumentException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void onDestroy() {\n        super.onDestroy();\n        unregisterNetworkChanges();\n    }\n}\n</code></pre>\n\n<p><strong>activity_main.xml</strong></p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    tools:context=\"com.keshav.networkchangereceiverexample.MainActivity\"&gt;\n\n    &lt;TextView\n        android:id=\"@+id/tv_check_connection\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"wrap_content\"\n        android:text=\"Connection establised !\"\n        android:padding=\"25dp\"\n        app:layout_constraintBottom_toBottomOf=\"parent\"\n        android:gravity=\"center\"\n        app:layout_constraintLeft_toLeftOf=\"parent\"\n        app:layout_constraintRight_toRightOf=\"parent\"\n        app:layout_constraintTop_toTopOf=\"parent\" /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2049063,"reputation":101,"user_id":1828452,"display_name":"BJDM"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1499226917,"creation_date":1499225558,"answer_id":44916596,"question_id":15698790,"body_markdown":"[CONNECTIVITY_ACTION docs](https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION):\r\n\r\n&gt;Apps targeting Android 7.0 (API level 24) and higher do not receive this broadcast if they declare the broadcast receiver in their manifest. Apps will still receive broadcasts if they register their BroadcastReceiver with Context.registerReceiver() and that context is still valid.\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p><a href=\"https://developer.android.google.cn/reference/android/net/ConnectivityManager.html?hl=zh-cn#CONNECTIVITY_ACTION\" rel=\"noreferrer\">CONNECTIVITY_ACTION docs</a>:</p>\n\n<blockquote>\n  <p>Apps targeting Android 7.0 (API level 24) and higher do not receive this broadcast if they declare the broadcast receiver in their manifest. Apps will still receive broadcasts if they register their BroadcastReceiver with Context.registerReceiver() and that context is still valid.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7376361,"reputation":839,"user_id":5614815,"display_name":"Bapusaheb Shinde"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1505458172,"creation_date":1505458172,"answer_id":46233405,"question_id":15698790,"body_markdown":"Broadcast receiver code to check internet connectivity change:\r\n\r\n    public class BroadCastDetecter extends BroadcastReceiver {\r\n        public static boolean internet_status = false;\r\n        public static void checkInternetConenction(Context context) {\r\n            internet_status = false;\r\n            ConnectivityManager check = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            if (check != null) {\r\n                NetworkInfo[] info = check.getAllNetworkInfo();\r\n                if (info != null)\r\n                    for (int i = 0; i &lt; info.length; i++)\r\n                    {\r\n                        if (info[i].getState() == NetworkInfo.State.CONNECTED) {\r\n                            internet_status = true;\r\n                        }\r\n                    }\r\n                if(internet_status)\r\n                {\r\n                   //do what you want to if internet connection is available\r\n                }\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent)\r\n        {\r\n            try {\r\n                checkInternetConenction(context);\r\n            }catch(Exception e){\r\n    \r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\nadd this in manifest file:\r\n\r\n     &lt;receiver android:name=&quot;.BroadCastDetecter&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Broadcast receiver code to check internet connectivity change:</p>\n\n<pre><code>public class BroadCastDetecter extends BroadcastReceiver {\n    public static boolean internet_status = false;\n    public static void checkInternetConenction(Context context) {\n        internet_status = false;\n        ConnectivityManager check = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        if (check != null) {\n            NetworkInfo[] info = check.getAllNetworkInfo();\n            if (info != null)\n                for (int i = 0; i &lt; info.length; i++)\n                {\n                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {\n                        internet_status = true;\n                    }\n                }\n            if(internet_status)\n            {\n               //do what you want to if internet connection is available\n            }\n        }\n    }\n\n    @Override\n    public void onReceive(Context context, Intent intent)\n    {\n        try {\n            checkInternetConenction(context);\n        }catch(Exception e){\n\n        }\n    }\n}\n</code></pre>\n\n<p>add this in manifest file:</p>\n\n<pre><code> &lt;receiver android:name=\".BroadCastDetecter\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1523528416,"creation_date":1523448456,"answer_id":49774730,"question_id":15698790,"body_markdown":"Here&#39;s a comfortable way to do it for activity, fragment or context. It will also auto-unregister if you do it for activity/fragment (in onDestroy), if you wish:\r\n\r\n    abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {\r\n        companion object {\r\n            @JvmStatic\r\n            fun registerWithoutAutoUnregister(context: Context, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                context.registerReceiver(connectionBroadcastReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))\r\n            }\r\n\r\n            @JvmStatic\r\n            fun registerToFragmentAndAutoUnregister(context: Context, fragment: Fragment, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                val applicationContext = context.applicationContext\r\n                registerWithoutAutoUnregister(applicationContext, connectionBroadcastReceiver)\r\n                fragment.lifecycle.addObserver(object : LifecycleObserver {\r\n                    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\r\n                    fun onDestroy() {\r\n                        applicationContext.unregisterReceiver(connectionBroadcastReceiver)\r\n                    }\r\n                })\r\n            }\r\n\r\n            @JvmStatic\r\n            fun registerToActivityAndAutoUnregister(activity: AppCompatActivity, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\r\n                registerWithoutAutoUnregister(activity, connectionBroadcastReceiver)\r\n                activity.lifecycle.addObserver(object : LifecycleObserver {\r\n                    @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\r\n                    fun onDestroy() {\r\n                        activity.unregisterReceiver(connectionBroadcastReceiver)\r\n                    }\r\n                })\r\n            }\r\n\r\n            @JvmStatic\r\n            fun hasInternetConnection(context: Context): Boolean {\r\n                val info = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\r\n                return !(info == null || !info.isConnectedOrConnecting)\r\n            }\r\n        }\r\n\r\n        override fun onReceive(context: Context, intent: Intent) {\r\n            val hasConnection = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false)\r\n    //        Log.d(&quot;AppLog&quot;, &quot;conenctivity changed. hasConnection? $hasConnection&quot;)\r\n            onConnectionChanged(hasConnection)\r\n        }\r\n\r\n        abstract fun onConnectionChanged(hasConnection: Boolean)\r\n    }\r\n\r\nUsage in fragment:\r\n\r\n        ConnectionBroadcastReceiver.registerToFragmentAndAutoUnregister(activity!!, this, object : ConnectionBroadcastReceiver() {\r\n            override fun onConnectionChanged(hasConnection: Boolean) {\r\n                // Log.d(&quot;AppLog&quot;, &quot;onConnectionChanged:&quot; + hasConnection)\r\n            }\r\n        })\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Here's a comfortable way to do it for activity, fragment or context. It will also auto-unregister if you do it for activity/fragment (in onDestroy), if you wish:</p>\n\n<pre><code>abstract class ConnectionBroadcastReceiver : BroadcastReceiver() {\n    companion object {\n        @JvmStatic\n        fun registerWithoutAutoUnregister(context: Context, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            context.registerReceiver(connectionBroadcastReceiver, IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION))\n        }\n\n        @JvmStatic\n        fun registerToFragmentAndAutoUnregister(context: Context, fragment: Fragment, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            val applicationContext = context.applicationContext\n            registerWithoutAutoUnregister(applicationContext, connectionBroadcastReceiver)\n            fragment.lifecycle.addObserver(object : LifecycleObserver {\n                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n                fun onDestroy() {\n                    applicationContext.unregisterReceiver(connectionBroadcastReceiver)\n                }\n            })\n        }\n\n        @JvmStatic\n        fun registerToActivityAndAutoUnregister(activity: AppCompatActivity, connectionBroadcastReceiver: ConnectionBroadcastReceiver) {\n            registerWithoutAutoUnregister(activity, connectionBroadcastReceiver)\n            activity.lifecycle.addObserver(object : LifecycleObserver {\n                @OnLifecycleEvent(Lifecycle.Event.ON_DESTROY)\n                fun onDestroy() {\n                    activity.unregisterReceiver(connectionBroadcastReceiver)\n                }\n            })\n        }\n\n        @JvmStatic\n        fun hasInternetConnection(context: Context): Boolean {\n            val info = (context.getSystemService(Context.CONNECTIVITY_SERVICE) as ConnectivityManager).activeNetworkInfo\n            return !(info == null || !info.isConnectedOrConnecting)\n        }\n    }\n\n    override fun onReceive(context: Context, intent: Intent) {\n        val hasConnection = !intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false)\n//        Log.d(\"AppLog\", \"conenctivity changed. hasConnection? $hasConnection\")\n        onConnectionChanged(hasConnection)\n    }\n\n    abstract fun onConnectionChanged(hasConnection: Boolean)\n}\n</code></pre>\n\n<p>Usage in fragment:</p>\n\n<pre><code>    ConnectionBroadcastReceiver.registerToFragmentAndAutoUnregister(activity!!, this, object : ConnectionBroadcastReceiver() {\n        override fun onConnectionChanged(hasConnection: Boolean) {\n            // Log.d(\"AppLog\", \"onConnectionChanged:\" + hasConnection)\n        }\n    })\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10603585,"reputation":3549,"user_id":7809801,"display_name":"Job M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550869836,"creation_date":1550869836,"answer_id":54835233,"question_id":15698790,"body_markdown":"It&#39;s easier to use https://github.com/JobGetabu/DroidNet\r\n\r\n     @Override\r\n        public void onInternetConnectivityChanged(boolean isConnected) {\r\n          \r\n            if (isConnected) {\r\n                //do Stuff with internet\r\n                netIsOn();\r\n            } else {\r\n                //no internet\r\n                netIsOff();\r\n            }\r\n        }\r\n    \r\n        private void netIsOn(){...}\r\n    \r\n        private void netIsOff(){...}","title":"Broadcast receiver for checking internet connection in android app","body":"<p>It's easier to use <a href=\"https://github.com/JobGetabu/DroidNet\" rel=\"nofollow noreferrer\">https://github.com/JobGetabu/DroidNet</a></p>\n\n<pre><code> @Override\n    public void onInternetConnectivityChanged(boolean isConnected) {\n\n        if (isConnected) {\n            //do Stuff with internet\n            netIsOn();\n        } else {\n            //no internet\n            netIsOff();\n        }\n    }\n\n    private void netIsOn(){...}\n\n    private void netIsOff(){...}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8061212,"reputation":2593,"user_id":6076692,"accept_rate":100,"display_name":"Mohamed AbdelraZek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558215005,"creation_date":1558215005,"answer_id":56202992,"question_id":15698790,"body_markdown":"This only checks if the network interface is available, doesn&#39;t guarantee a particular network service is available, for example, there could be low signal or server downtime\r\n\r\n      private boolean isNetworkInterfaceAvailable(Context context) {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n        }\r\nif you want to make a real connection to make sure your connection can gather data from a server or any url:\r\n  \r\n\r\n      private boolean isAbleToConnect(String url, int timeout) {\r\n            try {\r\n                URL myUrl = new URL(url);\r\n                URLConnection connection = myUrl.openConnection();\r\n                connection.setConnectTimeout(timeout);\r\n                connection.connect();\r\n                return true;\r\n            } catch (Exception e) {\r\n                Log.i(&quot;exception&quot;, &quot;&quot; + e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n\r\nThis function needs to be wrapped in a background thread :\r\n\r\n    final String action = intent.getAction();\r\n            if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\r\n                checkConnectivity(context);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void checkConnectivity(final Context context) {\r\n            if (!isNetworkInterfaceAvailable(context)) {\r\n                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n    \r\n            final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    final boolean isConnected = isAbleToConnect(&quot;http://www.google.com&quot;, 1000);\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            if (isConnected)\r\n                                Toast.makeText(context, &quot;You are ONLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                            else\r\n                                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n    \r\n                }\r\n            }).start();\r\n    \r\n        }\r\nAdd required permissions:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n            &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n\r\n\r\n\r\n Add this line under application in manifest file: \r\n\r\n    android:usesCleartextTraffic=&quot;true&quot;\r\n\r\nAdd receiver to manifest file:\r\n \r\n\r\n    &lt;receiver android:name=&quot;.ConnectivityChangeReceiver&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n    \r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;    \r\n\r\nRegister/Unregister the BR in you Activity:\r\n\r\n    @Override\r\n        protected void onStart() {\r\n            super.onStart();\r\n            IntentFilter filter = new IntentFilter(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;);\r\n            registerReceiver(connectivityChangeReceiver, filter);\r\n        }\r\n    \r\n        @Override\r\n        protected void onDestroy() {\r\n            super.onDestroy();\r\n            unregisterReceiver(connectivityChangeReceiver);\r\n        }\r\nthis is the entire Broadcast class : \r\n\r\n\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.net.ConnectivityManager;\r\n    import android.net.NetworkInfo;\r\n    import android.os.Handler;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    import java.net.URL;\r\n    import java.net.URLConnection;\r\n    \r\n    public class ConnectivityChangeReceiver extends BroadcastReceiver {\r\n    \r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n    \r\n            final String action = intent.getAction();\r\n            if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\r\n                checkConnectivity(context);\r\n            }\r\n        }\r\n    \r\n    \r\n        private void checkConnectivity(final Context context) {\r\n            if (!isNetworkInterfaceAvailable(context)) {\r\n                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                return;\r\n            }\r\n    \r\n            final Handler handler = new Handler();\r\n            new Thread(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    final boolean isConnected = isAbleToConnect(&quot;http://www.google.com&quot;, 1000);\r\n                    handler.post(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            if (isConnected)\r\n                                Toast.makeText(context, &quot;You are ONLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                            else\r\n                                Toast.makeText(context, &quot;You are OFFLINE!&quot;, Toast.LENGTH_SHORT).show();\r\n                        }\r\n                    });\r\n    \r\n                }\r\n            }).start();\r\n    \r\n        }\r\n    \r\n        //This only checks if the network interface is available, doesn&#39;t guarantee a particular network service is available, for example, there could be low signal or server downtime\r\n        private boolean isNetworkInterfaceAvailable(Context context) {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\r\n            return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\r\n        }\r\n    \r\n        //This makes a real connection to an url and checks if you can connect to this url, this needs to be wrapped in a background thread\r\n        private boolean isAbleToConnect(String url, int timeout) {\r\n            try {\r\n                URL myUrl = new URL(url);\r\n                URLConnection connection = myUrl.openConnection();\r\n                connection.setConnectTimeout(timeout);\r\n                connection.connect();\r\n                return true;\r\n            } catch (Exception e) {\r\n                Log.i(&quot;exception&quot;, &quot;&quot; + e.getMessage());\r\n                return false;\r\n            }\r\n        }\r\n    } \r\n\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>This only checks if the network interface is available, doesn't guarantee a particular network service is available, for example, there could be low signal or server downtime</p>\n\n<pre><code>  private boolean isNetworkInterfaceAvailable(Context context) {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\n    }\n</code></pre>\n\n<p>if you want to make a real connection to make sure your connection can gather data from a server or any url:</p>\n\n<pre><code>  private boolean isAbleToConnect(String url, int timeout) {\n        try {\n            URL myUrl = new URL(url);\n            URLConnection connection = myUrl.openConnection();\n            connection.setConnectTimeout(timeout);\n            connection.connect();\n            return true;\n        } catch (Exception e) {\n            Log.i(\"exception\", \"\" + e.getMessage());\n            return false;\n        }\n    }\n</code></pre>\n\n<p>This function needs to be wrapped in a background thread :</p>\n\n<pre><code>final String action = intent.getAction();\n        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\n            checkConnectivity(context);\n        }\n    }\n\n\n    private void checkConnectivity(final Context context) {\n        if (!isNetworkInterfaceAvailable(context)) {\n            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                final boolean isConnected = isAbleToConnect(\"http://www.google.com\", 1000);\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n                        if (isConnected)\n                            Toast.makeText(context, \"You are ONLINE!\", Toast.LENGTH_SHORT).show();\n                        else\n                            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n            }\n        }).start();\n\n    }\n</code></pre>\n\n<p>Add required permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n        &lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n</code></pre>\n\n<p>Add this line under application in manifest file: </p>\n\n<pre><code>android:usesCleartextTraffic=\"true\"\n</code></pre>\n\n<p>Add receiver to manifest file:</p>\n\n<pre><code>&lt;receiver android:name=\".ConnectivityChangeReceiver\" &gt;\n            &lt;intent-filter&gt;\n\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;    \n</code></pre>\n\n<p>Register/Unregister the BR in you Activity:</p>\n\n<pre><code>@Override\n    protected void onStart() {\n        super.onStart();\n        IntentFilter filter = new IntentFilter(\"android.net.conn.CONNECTIVITY_CHANGE\");\n        registerReceiver(connectivityChangeReceiver, filter);\n    }\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        unregisterReceiver(connectivityChangeReceiver);\n    }\n</code></pre>\n\n<p>this is the entire Broadcast class : </p>\n\n<pre><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.os.Handler;\nimport android.util.Log;\nimport android.widget.Toast;\n\nimport java.net.URL;\nimport java.net.URLConnection;\n\npublic class ConnectivityChangeReceiver extends BroadcastReceiver {\n\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n\n        final String action = intent.getAction();\n        if (intent.getAction().equals(ConnectivityManager.CONNECTIVITY_ACTION)) {\n            checkConnectivity(context);\n        }\n    }\n\n\n    private void checkConnectivity(final Context context) {\n        if (!isNetworkInterfaceAvailable(context)) {\n            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n            return;\n        }\n\n        final Handler handler = new Handler();\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                final boolean isConnected = isAbleToConnect(\"http://www.google.com\", 1000);\n                handler.post(new Runnable() {\n                    @Override\n                    public void run() {\n                        if (isConnected)\n                            Toast.makeText(context, \"You are ONLINE!\", Toast.LENGTH_SHORT).show();\n                        else\n                            Toast.makeText(context, \"You are OFFLINE!\", Toast.LENGTH_SHORT).show();\n                    }\n                });\n\n            }\n        }).start();\n\n    }\n\n    //This only checks if the network interface is available, doesn't guarantee a particular network service is available, for example, there could be low signal or server downtime\n    private boolean isNetworkInterfaceAvailable(Context context) {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo activeNetwork = cm.getActiveNetworkInfo();\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnectedOrConnecting();\n    }\n\n    //This makes a real connection to an url and checks if you can connect to this url, this needs to be wrapped in a background thread\n    private boolean isAbleToConnect(String url, int timeout) {\n        try {\n            URL myUrl = new URL(url);\n            URLConnection connection = myUrl.openConnection();\n            connection.setConnectTimeout(timeout);\n            connection.connect();\n            return true;\n        } catch (Exception e) {\n            Log.i(\"exception\", \"\" + e.getMessage());\n            return false;\n        }\n    }\n} \n</code></pre>\n"},{"tags":[],"owner":{"account_id":8152269,"reputation":3283,"user_id":6138892,"accept_rate":40,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1581415595,"creation_date":1581415595,"answer_id":60166367,"question_id":15698790,"body_markdown":"Add permissions:\r\n\r\n \r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n     &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nCreate Receiver to check for connection\r\n\r\n    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n        @Override\r\n        public void onReceive(final Context context, final Intent intent) {\r\n    \r\n            if(checkInternet(context))\r\n            {\r\n                Toast.makeText(context, &quot;Network Available Do operations&quot;,Toast.LENGTH_LONG).show(); \r\n            }\r\n    \r\n        }\r\n    \r\n        boolean checkInternet(Context context) {\r\n            ServiceManager serviceManager = new ServiceManager(context);\r\n            if (serviceManager.isNetworkAvailable()) {\r\n                return true;\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nServiceManager.java\r\n\r\n    public class ServiceManager {\r\n    \r\n        Context context;\r\n    \r\n        public ServiceManager(Context base) {\r\n            context = base;\r\n        }\r\n    \r\n        public boolean isNetworkAvailable() {\r\n            ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n            NetworkInfo networkInfo = cm.getActiveNetworkInfo();\r\n            return networkInfo != null &amp;&amp; networkInfo.isConnected();\r\n        }\r\n    }","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Add permissions:</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n</code></pre>\n\n<p>Create Receiver to check for connection</p>\n\n<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n\n        if(checkInternet(context))\n        {\n            Toast.makeText(context, \"Network Available Do operations\",Toast.LENGTH_LONG).show(); \n        }\n\n    }\n\n    boolean checkInternet(Context context) {\n        ServiceManager serviceManager = new ServiceManager(context);\n        if (serviceManager.isNetworkAvailable()) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n\n}\n</code></pre>\n\n<p>ServiceManager.java</p>\n\n<pre><code>public class ServiceManager {\n\n    Context context;\n\n    public ServiceManager(Context base) {\n        context = base;\n    }\n\n    public boolean isNetworkAvailable() {\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        NetworkInfo networkInfo = cm.getActiveNetworkInfo();\n        return networkInfo != null &amp;&amp; networkInfo.isConnected();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11628583,"reputation":195,"user_id":8517602,"display_name":"safal bhatia"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1582291668,"creation_date":1582285065,"answer_id":60337913,"question_id":15698790,"body_markdown":"1) In manifest : - call receiver like below code\r\n\r\n\t&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\t&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n\t\txmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n\t\tpackage=&quot;com.safal.checkinternet&quot;&gt;\r\n\t\r\n\t\t&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\t\t&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n\t\r\n\t\t&lt;application\r\n\t\t\tandroid:allowBackup=&quot;true&quot;\r\n\t\t\tandroid:icon=&quot;@mipmap/ic_launcher&quot;\r\n\t\t\tandroid:label=&quot;@string/app_name&quot;\r\n\t\t\tandroid:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n\t\t\tandroid:supportsRtl=&quot;true&quot;\r\n\t\t\tandroid:theme=&quot;@style/AppTheme&quot;\r\n\t\t\ttools:ignore=&quot;AllowBackup,GoogleAppIndexingWarning&quot;&gt;\r\n\t\t\t&lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/receiver&gt;\r\n\t\t\t&lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n\t\t\t\t&lt;intent-filter&gt;\r\n\t\t\t\t\t&lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\t\r\n\t\t\t\t\t&lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n\t\t\t\t&lt;/intent-filter&gt;\r\n\t\t\t&lt;/activity&gt;\r\n\t\t&lt;/application&gt;\r\n\t\r\n\t&lt;/manifest&gt;\r\n\t\r\n\t\r\n2) Make one Broad Cast Receiver Class: - In This class add code of Network Check\r\n\r\n\tpackage com.safal.checkinternet;\r\n\t\r\n\timport android.content.BroadcastReceiver;\r\n\timport android.content.Context;\r\n\timport android.content.Intent;\r\n\timport android.net.ConnectivityManager;\r\n\timport android.net.NetworkInfo;\r\n\timport android.util.Log;\r\n\timport android.widget.Toast;\r\n\t\r\n\tpublic class NetworkChangeReceiver extends BroadcastReceiver {\r\n\t\r\n\t\t@Override\r\n\t\tpublic void onReceive(final Context context, final Intent intent) {\r\n\t\t\tif (isOnline(context)){\r\n\t\t\t\tToast.makeText(context, &quot;Available&quot;, Toast.LENGTH_SHORT).show();\r\n\t\t\t}else {\r\n\t\t\t\tToast.makeText(context, &quot;Not Available&quot;, Toast.LENGTH_SHORT).show();\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic boolean isOnline(Context context) {\r\n\t\r\n\t\t\tConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n\t\t\tassert cm != null;\r\n\t\t\tNetworkInfo netInfo = cm.getActiveNetworkInfo();\r\n\t\t\treturn (netInfo != null &amp;&amp; netInfo.isConnected());\r\n\t\t}    \r\n\t} \r\n\t\r\n3) In your Activity call to Broad Cast Receiver : -\r\n\r\n\tpackage com.safal.checkinternet;\r\n\t\r\n\timport androidx.appcompat.app.AppCompatActivity;\r\n\t\r\n\timport android.content.Intent;\r\n\timport android.content.IntentFilter;\r\n\timport android.os.Bundle;\r\n\t\r\n\tpublic class MainActivity extends AppCompatActivity {\r\n\t\r\n\t\t@Override\r\n\t\tprotected void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\t\t\tsetContentView(R.layout.activity_main);\r\n    //Call Broad cast Receiver \r\n\t\t\tIntentFilter filter = new IntentFilter();\r\n\t\t\tfilter.addAction(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;);\r\n\t\t\tregisterReceiver(new NetworkChangeReceiver(), filter);\r\n\t\t}\r\n\t}","title":"Broadcast receiver for checking internet connection in android app","body":"<p>1) In manifest : - call receiver like below code</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    xmlns:tools=\"http://schemas.android.com/tools\"\n    package=\"com.safal.checkinternet\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.INTERNET\" /&gt;\n    &lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\n        android:supportsRtl=\"true\"\n        android:theme=\"@style/AppTheme\"\n        tools:ignore=\"AllowBackup,GoogleAppIndexingWarning\"&gt;\n        &lt;receiver android:name=\".NetworkChangeReceiver\" &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>2) Make one Broad Cast Receiver Class: - In This class add code of Network Check</p>\n\n<pre><code>package com.safal.checkinternet;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.net.ConnectivityManager;\nimport android.net.NetworkInfo;\nimport android.util.Log;\nimport android.widget.Toast;\n\npublic class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        if (isOnline(context)){\n            Toast.makeText(context, \"Available\", Toast.LENGTH_SHORT).show();\n        }else {\n            Toast.makeText(context, \"Not Available\", Toast.LENGTH_SHORT).show();\n        }\n    }\n    public boolean isOnline(Context context) {\n\n        ConnectivityManager cm = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);\n        assert cm != null;\n        NetworkInfo netInfo = cm.getActiveNetworkInfo();\n        return (netInfo != null &amp;&amp; netInfo.isConnected());\n    }    \n} \n</code></pre>\n\n<p>3) In your Activity call to Broad Cast Receiver : -</p>\n\n<pre><code>package com.safal.checkinternet;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.content.IntentFilter;\nimport android.os.Bundle;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n//Call Broad cast Receiver \n        IntentFilter filter = new IntentFilter();\n        filter.addAction(\"android.net.conn.CONNECTIVITY_CHANGE\");\n        registerReceiver(new NetworkChangeReceiver(), filter);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11234005,"reputation":1120,"user_id":8240915,"display_name":"Sumit Jain"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1586270352,"creation_date":1586269763,"answer_id":61082387,"question_id":15698790,"body_markdown":"Warning: ``` Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.```\r\n\r\nAs `CONNECTIVITY_CHANGE` is deprecated then we should use another way of doing the same stuff \r\n\r\nFollowing `NetworkConnectionLiveData` will handle all the OS Version till now and also if target SDK is less than `Build.VERSION_CODES.LOLLIPOP` then only we can use `broadcastReceiver`\r\n\r\nBest Part is this class uses `LiveData` so no need to register any receiver use `LiveData` and it will handle all the things\r\n\r\n    class NetworkConnectionLiveData(val context: Context) : LiveData&lt;Boolean&gt;() {\r\n    \r\n        private var connectivityManager: ConnectivityManager = context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager\r\n    \r\n        private lateinit var connectivityManagerCallback: ConnectivityManager.NetworkCallback\r\n    \r\n        override fun onActive() {\r\n            super.onActive()\r\n            updateConnection()\r\n            when {\r\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N -&gt; connectivityManager.registerDefaultNetworkCallback(getConnectivityManagerCallback())\r\n                Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP -&gt; lollipopNetworkAvailableRequest()\r\n                else -&gt; {\r\n                    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\r\n                        context.registerReceiver(networkReceiver, IntentFilter(&quot;android.net.conn.CONNECTIVITY_CHANGE&quot;))\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        override fun onInactive() {\r\n            super.onInactive()\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n                connectivityManager.unregisterNetworkCallback(connectivityManagerCallback)\r\n            } else {\r\n                context.unregisterReceiver(networkReceiver)\r\n            }\r\n        }\r\n    \r\n        @TargetApi(Build.VERSION_CODES.LOLLIPOP)\r\n        private fun lollipopNetworkAvailableRequest() {\r\n            val builder = NetworkRequest.Builder()\r\n                    .addTransportType(android.net.NetworkCapabilities.TRANSPORT_CELLULAR)\r\n                    .addTransportType(android.net.NetworkCapabilities.TRANSPORT_WIFI)\r\n            connectivityManager.registerNetworkCallback(builder.build(), getConnectivityManagerCallback())\r\n        }\r\n    \r\n        private fun getConnectivityManagerCallback(): ConnectivityManager.NetworkCallback {\r\n            if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\r\n    \r\n                connectivityManagerCallback = object : ConnectivityManager.NetworkCallback() {\r\n                    override fun onAvailable(network: Network?) {\r\n                        postValue(true)\r\n                    }\r\n    \r\n                    override fun onLost(network: Network?) {\r\n                        postValue(false)\r\n                    }\r\n                }\r\n                return connectivityManagerCallback\r\n            } else {\r\n                throw IllegalAccessError(&quot;Should not happened&quot;)\r\n            }\r\n        }\r\n    \r\n        private val networkReceiver = object : BroadcastReceiver() {\r\n            override fun onReceive(context: Context, intent: Intent) {\r\n                updateConnection()\r\n            }\r\n        }\r\n    \r\n        private fun updateConnection() {\r\n            val activeNetwork: NetworkInfo? = connectivityManager.activeNetworkInfo\r\n            postValue(activeNetwork?.isConnected == true)\r\n        }\r\n    } \r\n\r\nUse of the LiveData into any class:\r\n\r\n    NetworkConnectionLiveData(context ?: return)\r\n        .observe(viewLifecycleOwner, Observer { isConnected -&gt;\r\n            if (!isConnected) {\r\n                // Internet Not Available\r\n                return@Observer\r\n            }\r\n            // Internet Available\r\n    })\r\n","title":"Broadcast receiver for checking internet connection in android app","body":"<p>Warning: <code>Declaring a broadcastreceiver for android.net.conn.CONNECTIVITY_CHANGE is deprecated for apps targeting N and higher. In general, apps should not rely on this broadcast and instead use JobScheduler or GCMNetworkManager.</code></p>\n\n<p>As <code>CONNECTIVITY_CHANGE</code> is deprecated then we should use another way of doing the same stuff </p>\n\n<p>Following <code>NetworkConnectionLiveData</code> will handle all the OS Version till now and also if target SDK is less than <code>Build.VERSION_CODES.LOLLIPOP</code> then only we can use <code>broadcastReceiver</code></p>\n\n<p>Best Part is this class uses <code>LiveData</code> so no need to register any receiver use <code>LiveData</code> and it will handle all the things</p>\n\n<pre><code>class NetworkConnectionLiveData(val context: Context) : LiveData&lt;Boolean&gt;() {\n\n    private var connectivityManager: ConnectivityManager = context.getSystemService(CONNECTIVITY_SERVICE) as ConnectivityManager\n\n    private lateinit var connectivityManagerCallback: ConnectivityManager.NetworkCallback\n\n    override fun onActive() {\n        super.onActive()\n        updateConnection()\n        when {\n            Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.N -&gt; connectivityManager.registerDefaultNetworkCallback(getConnectivityManagerCallback())\n            Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP -&gt; lollipopNetworkAvailableRequest()\n            else -&gt; {\n                if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP) {\n                    context.registerReceiver(networkReceiver, IntentFilter(\"android.net.conn.CONNECTIVITY_CHANGE\"))\n                }\n            }\n        }\n    }\n\n    override fun onInactive() {\n        super.onInactive()\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n            connectivityManager.unregisterNetworkCallback(connectivityManagerCallback)\n        } else {\n            context.unregisterReceiver(networkReceiver)\n        }\n    }\n\n    @TargetApi(Build.VERSION_CODES.LOLLIPOP)\n    private fun lollipopNetworkAvailableRequest() {\n        val builder = NetworkRequest.Builder()\n                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_CELLULAR)\n                .addTransportType(android.net.NetworkCapabilities.TRANSPORT_WIFI)\n        connectivityManager.registerNetworkCallback(builder.build(), getConnectivityManagerCallback())\n    }\n\n    private fun getConnectivityManagerCallback(): ConnectivityManager.NetworkCallback {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) {\n\n            connectivityManagerCallback = object : ConnectivityManager.NetworkCallback() {\n                override fun onAvailable(network: Network?) {\n                    postValue(true)\n                }\n\n                override fun onLost(network: Network?) {\n                    postValue(false)\n                }\n            }\n            return connectivityManagerCallback\n        } else {\n            throw IllegalAccessError(\"Should not happened\")\n        }\n    }\n\n    private val networkReceiver = object : BroadcastReceiver() {\n        override fun onReceive(context: Context, intent: Intent) {\n            updateConnection()\n        }\n    }\n\n    private fun updateConnection() {\n        val activeNetwork: NetworkInfo? = connectivityManager.activeNetworkInfo\n        postValue(activeNetwork?.isConnected == true)\n    }\n} \n</code></pre>\n\n<p>Use of the LiveData into any class:</p>\n\n<pre><code>NetworkConnectionLiveData(context ?: return)\n    .observe(viewLifecycleOwner, Observer { isConnected -&gt;\n        if (!isConnected) {\n            // Internet Not Available\n            return@Observer\n        }\n        // Internet Available\n})\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13117480,"reputation":371,"user_id":9476147,"display_name":"Syed Faizan Ali"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1655477668,"creation_date":1655477668,"answer_id":72661263,"question_id":15698790,"body_markdown":"As of 2022 none of the above BroadcastReceiver approaches will work. The BroadcastReceiver method will not work anymore due to the restrictions imposed on Android 7.0. The latest and easiest way of checking whether the internet is available or not is using the following code. ***(Working on Android 12 tested)***\r\n\r\n    val networkRequest = NetworkRequest.Builder()\r\n            .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\r\n            .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\r\n            .addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR)\r\n            .build()\r\n    \r\n    private val networkCallback = object : ConnectivityManager.NetworkCallback() {\r\n        // network is available for use\r\n        override fun onAvailable(network: Network) {\r\n            super.onAvailable(network)\r\n        }\r\n    \r\n        // Network capabilities have changed for the network\r\n        override fun onCapabilitiesChanged(\r\n                network: Network,\r\n                networkCapabilities: NetworkCapabilities\r\n        ) {\r\n            super.onCapabilitiesChanged(network, networkCapabilities)\r\n            val unmetered = networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED)\r\n        }\r\n    \r\n        // lost network connection\r\n        override fun onLost(network: Network) {\r\n            super.onLost(network)\r\n        }\r\n    }\r\n    \r\n    val connectivityManager = getSystemService(ConnectivityManager::class.java) as ConnectivityManager\r\n    connectivityManager.requestNetwork(networkRequest, networkCallback\r\n\r\nPlace this piece of code in a function and call this in **onCreate()** of your activity/fragment. You will be notified everytime when internet is connected or disconnected in **onAvailable()** and **onLost()** functions. Along with this, you can use liveData or whatever you like to broadcast these updates in other activities/fragments. \r\nThe official docs link: https://developer.android.com/training/monitoring-device-state/connectivity-status-type","title":"Broadcast receiver for checking internet connection in android app","body":"<p>As of 2022 none of the above BroadcastReceiver approaches will work. The BroadcastReceiver method will not work anymore due to the restrictions imposed on Android 7.0. The latest and easiest way of checking whether the internet is available or not is using the following code. <em><strong>(Working on Android 12 tested)</strong></em></p>\n<pre><code>val networkRequest = NetworkRequest.Builder()\n        .addCapability(NetworkCapabilities.NET_CAPABILITY_INTERNET)\n        .addTransportType(NetworkCapabilities.TRANSPORT_WIFI)\n        .addTransportType(NetworkCapabilities.TRANSPORT_CELLULAR)\n        .build()\n\nprivate val networkCallback = object : ConnectivityManager.NetworkCallback() {\n    // network is available for use\n    override fun onAvailable(network: Network) {\n        super.onAvailable(network)\n    }\n\n    // Network capabilities have changed for the network\n    override fun onCapabilitiesChanged(\n            network: Network,\n            networkCapabilities: NetworkCapabilities\n    ) {\n        super.onCapabilitiesChanged(network, networkCapabilities)\n        val unmetered = networkCapabilities.hasCapability(NetworkCapabilities.NET_CAPABILITY_NOT_METERED)\n    }\n\n    // lost network connection\n    override fun onLost(network: Network) {\n        super.onLost(network)\n    }\n}\n\nval connectivityManager = getSystemService(ConnectivityManager::class.java) as ConnectivityManager\nconnectivityManager.requestNetwork(networkRequest, networkCallback\n</code></pre>\n<p>Place this piece of code in a function and call this in <strong>onCreate()</strong> of your activity/fragment. You will be notified everytime when internet is connected or disconnected in <strong>onAvailable()</strong> and <strong>onLost()</strong> functions. Along with this, you can use liveData or whatever you like to broadcast these updates in other activities/fragments.\nThe official docs link: <a href=\"https://developer.android.com/training/monitoring-device-state/connectivity-status-type\" rel=\"nofollow noreferrer\">https://developer.android.com/training/monitoring-device-state/connectivity-status-type</a></p>\n"},{"tags":[],"owner":{"account_id":1087775,"reputation":42376,"user_id":1083093,"accept_rate":67,"display_name":"Devrath"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1677679878,"creation_date":1677679878,"answer_id":75604825,"question_id":15698790,"body_markdown":" - Now you don&#39;t need a broadcast receiver to observe the network\r\n   changes\r\n - We can achieve this using the flow\r\n\r\n***[Here is a better working solution with source code and demo implemented in my github][1]***\r\n\r\n\r\n  [1]: https://github.com/devrath/droid-network-observer","title":"Broadcast receiver for checking internet connection in android app","body":"<ul>\n<li>Now you don't need a broadcast receiver to observe the network\nchanges</li>\n<li>We can achieve this using the flow</li>\n</ul>\n<p><em><strong><a href=\"https://github.com/devrath/droid-network-observer\" rel=\"nofollow noreferrer\">Here is a better working solution with source code and demo implemented in my github</a></strong></em></p>\n"}],"owner":{"account_id":1299099,"reputation":26248,"user_id":2218452,"accept_rate":36,"display_name":"Nikhil Agrawal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":331063,"favorite_count":0,"down_vote_count":0,"up_vote_count":273,"accepted_answer_id":15700728,"answer_count":21,"score":273,"last_activity_date":1686656855,"creation_date":1364540075,"question_id":15698790,"body_markdown":"I am developing an Android broadcast receiver for checking the internet connection.\r\n\r\nThe problem is that my broadcast receiver is being called two times. I want it to get called only when the network is available. If it is unavailable, I don&#39;t want to be notified.\r\n\r\nThis is the broadcast receiver\r\n\r\n    public class NetworkChangeReceiver extends BroadcastReceiver {\r\n    \r\n    \t@Override\r\n    \tpublic void onReceive(final Context context, final Intent intent) {\r\n    \t\tfinal ConnectivityManager connMgr = (ConnectivityManager) context\r\n    \t\t\t\t.getSystemService(Context.CONNECTIVITY_SERVICE);\r\n    \r\n    \t\tfinal android.net.NetworkInfo wifi = connMgr\r\n    \t\t\t\t.getNetworkInfo(ConnectivityManager.TYPE_WIFI);\r\n    \r\n    \t\tfinal android.net.NetworkInfo mobile = connMgr\r\n    \t\t\t\t.getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\r\n    \r\n    \t\tif (wifi.isAvailable() || mobile.isAvailable()) {\r\n    \t\t\t// Do something\r\n    \r\n    \t\t\tLog.d(&quot;Network Available &quot;, &quot;Flag No 1&quot;);\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\n\r\n\r\nThis is the manifest.xml\r\n\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.broadcastreceiverforinternetconnection&quot;\r\n        android:versionCode=&quot;1&quot;\r\n        android:versionName=&quot;1.0&quot; &gt;\r\n    \r\n        &lt;uses-sdk\r\n            android:minSdkVersion=&quot;8&quot;\r\n            android:targetSdkVersion=&quot;17&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:icon=&quot;@drawable/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/AppTheme&quot; &gt;\r\n            &lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\r\n                    &lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;","title":"Broadcast receiver for checking internet connection in android app","body":"<p>I am developing an Android broadcast receiver for checking the internet connection.</p>\n<p>The problem is that my broadcast receiver is being called two times. I want it to get called only when the network is available. If it is unavailable, I don't want to be notified.</p>\n<p>This is the broadcast receiver</p>\n<pre><code>public class NetworkChangeReceiver extends BroadcastReceiver {\n\n    @Override\n    public void onReceive(final Context context, final Intent intent) {\n        final ConnectivityManager connMgr = (ConnectivityManager) context\n                .getSystemService(Context.CONNECTIVITY_SERVICE);\n\n        final android.net.NetworkInfo wifi = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_WIFI);\n\n        final android.net.NetworkInfo mobile = connMgr\n                .getNetworkInfo(ConnectivityManager.TYPE_MOBILE);\n\n        if (wifi.isAvailable() || mobile.isAvailable()) {\n            // Do something\n\n            Log.d(&quot;Network Available &quot;, &quot;Flag No 1&quot;);\n        }\n    }\n}\n</code></pre>\n<p>This is the manifest.xml</p>\n<pre><code>&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.broadcastreceiverforinternetconnection&quot;\n    android:versionCode=&quot;1&quot;\n    android:versionName=&quot;1.0&quot; &gt;\n\n    &lt;uses-sdk\n        android:minSdkVersion=&quot;8&quot;\n        android:targetSdkVersion=&quot;17&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@drawable/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:theme=&quot;@style/AppTheme&quot; &gt;\n        &lt;receiver android:name=&quot;.NetworkChangeReceiver&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.net.conn.CONNECTIVITY_CHANGE&quot; /&gt;\n                &lt;action android:name=&quot;android.net.wifi.WIFI_STATE_CHANGED&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","gzipinputstream"],"comments":[{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":0,"creation_date":1686651098,"post_id":76463730,"comment_id":134824978,"body_markdown":"So which command did you use to unzip the compressed file on console?","body":"So which command did you use to unzip the compressed file on console?"},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686651280,"post_id":76463730,"comment_id":134825023,"body_markdown":"gzip -d application.log.gz","body":"gzip -d application.log.gz"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686651471,"post_id":76463730,"comment_id":134825063,"body_markdown":"IIRC, `gzip -d` does this same as `gunzip`, which does _&quot;gunzip can currently decompress files created by gzip, zip, compress, compress -H or pack. The detection of the input format is automatic.&quot;_, so maybe your file isn&#39;t actually gzip compressed, but using a different format.","body":"IIRC, <code>gzip -d</code> does this same as <code>gunzip</code>, which does <i>&quot;gunzip can currently decompress files created by gzip, zip, compress, compress -H or pack. The detection of the input format is automatic.&quot;</i>, so maybe your file isn&#39;t actually gzip compressed, but using a different format."},{"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"score":0,"creation_date":1686652201,"post_id":76463730,"comment_id":134825208,"body_markdown":"But if i check the validity of the file $ gzip -v -t application.2.log.gz . I get this reponse - \napplication.2.log.gz:     OK","body":"But if i check the validity of the file $ gzip -v -t application.2.log.gz . I get this reponse -  application.2.log.gz:     OK"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1686652682,"post_id":76463730,"comment_id":134825304,"body_markdown":"If `-d` decompress various formats, why do you assume that `-t` wouldn&#39;t be able to test those various formats? What are the first two bytes of the file? If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip.","body":"If <code>-d</code> decompress various formats, why do you assume that <code>-t</code> wouldn&#39;t be able to test those various formats? What are the first two bytes of the file? If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686656231,"post_id":76463730,"comment_id":134826111,"body_markdown":"*If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip* And setting those two leading bytes to zero on a valid gzipped file will give you exactly that exception","body":"<i>If they aren&#39;t 0x1f 0x8b, then it isn&#39;t gzip</i> And setting those two leading bytes to zero on a valid gzipped file will give you exactly that exception"}],"answers":[{"tags":[],"owner":{"account_id":7655262,"reputation":7506,"user_id":5802417,"display_name":"Michael Gantman"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656644,"creation_date":1686654307,"answer_id":76464257,"question_id":76463730,"body_markdown":"Your code looks correct I think that your file may be compressed in format that is not GZIP and that format is supported gzip command line utility but not by `GZIPInputStream` class. If this is the case one of the workarounds would be is to invoke command line utility from Java using [ProcessBuilder][1] class. This is definitely not ideal as your immediately becomes operating system dependent, but it will work. Other options would be to request that your log files provided to you be compressed in GZIP (but that depends on who is your log files supplier and if they can and willing to co-operate with you) or look for 3d party java library that supports the format in which your files are compressed \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>Your code looks correct I think that your file may be compressed in format that is not GZIP and that format is supported gzip command line utility but not by <code>GZIPInputStream</code> class. If this is the case one of the workarounds would be is to invoke command line utility from Java using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ProcessBuilder.html\" rel=\"nofollow noreferrer\">ProcessBuilder</a> class. This is definitely not ideal as your immediately becomes operating system dependent, but it will work. Other options would be to request that your log files provided to you be compressed in GZIP (but that depends on who is your log files supplier and if they can and willing to co-operate with you) or look for 3d party java library that supports the format in which your files are compressed</p>\n"},{"tags":[],"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686655593,"creation_date":1686655593,"answer_id":76464449,"question_id":76463730,"body_markdown":"Ok, so it&#39;s not GZip but it could be ZIP right?\r\n\r\n```\r\n        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\r\n        File destDir = new File(&quot;src/main/resources/unzipTest&quot;);\r\n\r\n        byte[] buffer = new byte[1024];\r\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(fileZip));\r\n        ZipEntry zipEntry = zis.getNextEntry();\r\n        \r\n\t\twhile (zipEntry != null) {\r\n\t\t\tFile newFile = newFile(destDir, zipEntry);\r\n\t\t\tif (zipEntry.isDirectory()) {\r\n\t\t\t\tif (!newFile.isDirectory() &amp;&amp; !newFile.mkdirs()) {\r\n\t\t\t\t\tthrow new IOException(&quot;Failed to create directory &quot; + newFile);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// fix for Windows-created archives\r\n\t\t\t\tFile parent = newFile.getParentFile();\r\n\t\t\t\tif (!parent.isDirectory() &amp;&amp; !parent.mkdirs()) {\r\n\t\t\t\t\tthrow new IOException(&quot;Failed to create directory &quot; + parent);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// write file content\r\n\t\t\t\tFileOutputStream fos = new FileOutputStream(newFile);\r\n\t\t\t\tint len;\r\n\t\t\t\twhile ((len = zis.read(buffer)) &gt; 0) {\r\n\t\t\t\t\tfos.write(buffer, 0, len);\r\n\t\t\t\t}\r\n\t\t\t\tfos.close();\r\n\t\t\t}\r\n\t\t\tzipEntry = zis.getNextEntry();\r\n\t\t}\r\n\r\n        zis.closeEntry();\r\n        zis.close();\r\n```\r\n\r\nas well as this:\r\n```\r\npublic static File newFile(File destinationDir, ZipEntry zipEntry) throws IOException {\r\n    File destFile = new File(destinationDir, zipEntry.getName());\r\n\r\n    String destDirPath = destinationDir.getCanonicalPath();\r\n    String destFilePath = destFile.getCanonicalPath();\r\n\r\n    if (!destFilePath.startsWith(destDirPath + File.separator)) {\r\n        throw new IOException(&quot;Entry is outside of the target dir: &quot; + zipEntry.getName());\r\n    }\r\n\r\n    return destFile;\r\n}\r\n```\r\n\r\ngive that a shot.","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>Ok, so it's not GZip but it could be ZIP right?</p>\n<pre><code>        String fileZip = &quot;src/main/resources/unzipTest/compressed.zip&quot;;\n        File destDir = new File(&quot;src/main/resources/unzipTest&quot;);\n\n        byte[] buffer = new byte[1024];\n        ZipInputStream zis = new ZipInputStream(new FileInputStream(fileZip));\n        ZipEntry zipEntry = zis.getNextEntry();\n        \n        while (zipEntry != null) {\n            File newFile = newFile(destDir, zipEntry);\n            if (zipEntry.isDirectory()) {\n                if (!newFile.isDirectory() &amp;&amp; !newFile.mkdirs()) {\n                    throw new IOException(&quot;Failed to create directory &quot; + newFile);\n                }\n            } else {\n                // fix for Windows-created archives\n                File parent = newFile.getParentFile();\n                if (!parent.isDirectory() &amp;&amp; !parent.mkdirs()) {\n                    throw new IOException(&quot;Failed to create directory &quot; + parent);\n                }\n\n                // write file content\n                FileOutputStream fos = new FileOutputStream(newFile);\n                int len;\n                while ((len = zis.read(buffer)) &gt; 0) {\n                    fos.write(buffer, 0, len);\n                }\n                fos.close();\n            }\n            zipEntry = zis.getNextEntry();\n        }\n\n        zis.closeEntry();\n        zis.close();\n</code></pre>\n<p>as well as this:</p>\n<pre><code>public static File newFile(File destinationDir, ZipEntry zipEntry) throws IOException {\n    File destFile = new File(destinationDir, zipEntry.getName());\n\n    String destDirPath = destinationDir.getCanonicalPath();\n    String destFilePath = destFile.getCanonicalPath();\n\n    if (!destFilePath.startsWith(destDirPath + File.separator)) {\n        throw new IOException(&quot;Entry is outside of the target dir: &quot; + zipEntry.getName());\n    }\n\n    return destFile;\n}\n</code></pre>\n<p>give that a shot.</p>\n"}],"owner":{"account_id":16500982,"reputation":84,"user_id":13749786,"display_name":"Watermelon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686656644,"creation_date":1686650273,"question_id":76463730,"body_markdown":"my requirement is to unzip a log file dynamically and write it in the console. But I am getting an exception \r\n\r\n```\r\njava.util.zip.ZipException: Not in GZIP format\r\n\tat java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166) ~[?:?]\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80) ~[?:?]\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92) ~[?:?]\r\n```\r\n\r\nhere is my code \r\n\r\n``` java\r\n\r\n private static void readLogFile(File f) {\r\n        try(BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(f)), &quot;UTF-8&quot;))) {\r\n            String  nextLine;\r\n            while ((nextLine = reader.readLine()) != null) {\r\n                System.out.println(nextLine);\r\n            }\r\n        } catch (FileNotFoundException e) {\r\n            logger.error(&quot;file doesn&#39;t exist.&quot; );\r\n        } catch (IOException e) {\r\n            logger.error(&quot;Error reading the file&quot;, e);\r\n        }\r\n    }\r\n\r\n```\r\n\r\nThe size of my file is around 50 MB\r\nThe size of my .gz file is 2.4 MB\r\n\r\nI have already tried unzipping the file in the terminal and it works so the file is not corrupt as well\r\n\r\ncan someone help me with what is going wrong here?\r\n","title":"Not in GZIP format java while reading the zip dynamically","body":"<p>my requirement is to unzip a log file dynamically and write it in the console. But I am getting an exception</p>\n<pre><code>java.util.zip.ZipException: Not in GZIP format\n    at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:166) ~[?:?]\n    at java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:80) ~[?:?]\n    at java.util.zip.GZIPInputStream.&lt;init&gt;(GZIPInputStream.java:92) ~[?:?]\n</code></pre>\n<p>here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n private static void readLogFile(File f) {\n        try(BufferedReader reader = new BufferedReader(new InputStreamReader(new GZIPInputStream(new FileInputStream(f)), &quot;UTF-8&quot;))) {\n            String  nextLine;\n            while ((nextLine = reader.readLine()) != null) {\n                System.out.println(nextLine);\n            }\n        } catch (FileNotFoundException e) {\n            logger.error(&quot;file doesn't exist.&quot; );\n        } catch (IOException e) {\n            logger.error(&quot;Error reading the file&quot;, e);\n        }\n    }\n\n</code></pre>\n<p>The size of my file is around 50 MB\nThe size of my .gz file is 2.4 MB</p>\n<p>I have already tried unzipping the file in the terminal and it works so the file is not corrupt as well</p>\n<p>can someone help me with what is going wrong here?</p>\n"},{"tags":["java","gradle","cucumber"],"comments":[{"owner":{"account_id":288740,"reputation":36420,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":0,"creation_date":1498559973,"post_id":44776319,"comment_id":76536818,"body_markdown":"I just tested and it works fine here. Can you provide an [MCVE](http://stackoverflow.com/help/mcve)?","body":"I just tested and it works fine here. Can you provide an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>?"}],"answers":[{"tags":[],"owner":{"account_id":11197635,"reputation":82,"user_id":8215796,"display_name":"codespawner"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1498555520,"creation_date":1498555520,"answer_id":44776664,"question_id":44776319,"body_markdown":"gradle is having -P or --project-prop option. Try this one and see.\r\n\r\n-P, --project-prop      Set project property for the build script","title":"Passing jvm arguments to Gradle test task","body":"<p>gradle is having -P or --project-prop option. Try this one and see.</p>\n\n<p>-P, --project-prop      Set project property for the build script</p>\n"}],"owner":{"account_id":3239543,"reputation":173,"user_id":2732921,"accept_rate":20,"display_name":"Softengilker"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3744,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1686656259,"creation_date":1498554535,"question_id":44776319,"body_markdown":"I would like to pass JVM parameters to my Gradle test task. I use the parameters in a Cucumber feature file: `${app.url}`. In the `build.gradle` file, I put those lines:\r\n\r\n    test {\r\n        testLogging.showStandardStreams = true\r\n        systemProperties System.getProperties()\r\n    }\r\n\r\nWhen I execute `gradle test -Dapp.url=http://.....`, I don&#39;t see the parameter was passed to the application. I also tried the below, but the result is the same:\r\n\r\n    test {\r\n        testLogging.showStandardStreams = true\r\n        systemProperty &quot;app.url&quot;, System.getProperty(&quot;app.url&quot;)\r\n    }\r\n\r\nWhen I use Maven and pass the same parameters as Jvm arguments, it works fine. Now I would like to switch to the Gradle, but I am stuck with passing parameters.\r\n\r\n","title":"Passing jvm arguments to Gradle test task","body":"<p>I would like to pass JVM parameters to my Gradle test task. I use the parameters in a Cucumber feature file: <code>${app.url}</code>. In the <code>build.gradle</code> file, I put those lines:</p>\n\n<pre><code>test {\n    testLogging.showStandardStreams = true\n    systemProperties System.getProperties()\n}\n</code></pre>\n\n<p>When I execute <code>gradle test -Dapp.url=http://.....</code>, I don't see the parameter was passed to the application. I also tried the below, but the result is the same:</p>\n\n<pre><code>test {\n    testLogging.showStandardStreams = true\n    systemProperty \"app.url\", System.getProperty(\"app.url\")\n}\n</code></pre>\n\n<p>When I use Maven and pass the same parameters as Jvm arguments, it works fine. Now I would like to switch to the Gradle, but I am stuck with passing parameters.</p>\n"},{"tags":["java","junit"],"answers":[{"tags":[],"owner":{"account_id":6645863,"reputation":687,"user_id":5129997,"accept_rate":75,"display_name":"THe_strOX"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1633235623,"creation_date":1633235623,"answer_id":69422096,"question_id":69422083,"body_markdown":"You are using same `appointmentService` instance for your 2 test and adding the appointment with same id (&quot;123456&quot;) in your 2 test. So, when tests are ran together, you next test will always fail as you are assuming that the id &quot;123456&quot; is not present in second test, but it is.\r\n\r\nYou should create a new `appointmentService` for each test as unit test = test in isolation, especially when your testing instance has some states.","title":"Junit Tests pass individually but fail when run together","body":"<p>You are using same <code>appointmentService</code> instance for your 2 test and adding the appointment with same id (&quot;123456&quot;) in your 2 test. So, when tests are ran together, you next test will always fail as you are assuming that the id &quot;123456&quot; is not present in second test, but it is.</p>\n<p>You should create a new <code>appointmentService</code> for each test as unit test = test in isolation, especially when your testing instance has some states.</p>\n"},{"tags":[],"owner":{"account_id":11890894,"reputation":143,"user_id":8701784,"display_name":"Yakim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633260754,"creation_date":1633239045,"answer_id":69422316,"question_id":69422083,"body_markdown":"Remove static in here \r\n\r\n    private static AppointmentService appointmentService;\\\r\n\r\nAnd fot setUp method too. Also change @BeforeAll to @BeforeEach it will make create new appointmentService for each test to isolate test cases. \r\n\r\nAlso if there is no any reason to have reference as static then class itself it&#39;s better to refactor (get rid of static reference) self-made singleton is kind of anti-pattern. \r\nNow when code calls getReference it returns always the same instance, that&#39;s why it does not work while running all tests.\r\n\r\nSee also https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\r\nI hope it helps","title":"Junit Tests pass individually but fail when run together","body":"<p>Remove static in here</p>\n<pre><code>private static AppointmentService appointmentService;\\\n</code></pre>\n<p>And fot setUp method too. Also change @BeforeAll to @BeforeEach it will make create new appointmentService for each test to isolate test cases.</p>\n<p>Also if there is no any reason to have reference as static then class itself it's better to refactor (get rid of static reference) self-made singleton is kind of anti-pattern.\nNow when code calls getReference it returns always the same instance, that's why it does not work while running all tests.</p>\n<p>See also <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html</a>\nI hope it helps</p>\n"},{"tags":[],"owner":{"account_id":12632991,"reputation":1,"user_id":9183605,"display_name":"Th3Arock"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686656022,"creation_date":1686656022,"answer_id":76464505,"question_id":69422083,"body_markdown":"Use @beforeEach instead @beforeAll \r\n\r\n \r\n\r\n    @BeforeAll\r\n        static void setUp() {\r\n            appointmentService = AppointmentService.getService();\r\n        }","title":"Junit Tests pass individually but fail when run together","body":"<p>Use @beforeEach instead @beforeAll</p>\n<pre><code>@BeforeAll\n    static void setUp() {\n        appointmentService = AppointmentService.getService();\n    }\n</code></pre>\n"}],"owner":{"account_id":19552430,"reputation":31,"user_id":14307685,"display_name":"EEngvall"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11847,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1686656022,"creation_date":1633235340,"question_id":69422083,"body_markdown":"I&#39;m currently working on an assignment for school and I&#39;m struggling with the testing portion.  For some reason the unit tests run fine when run individually but not when run together.  I know this has something to do with me sharing the object between them when I shouldn&#39;t be based on my prior searches, but I can not for the life of me figure out what needs to be changed to remedy this problem.  The code is below for both the AppointmentService class as well as the AppointmentServiceTest class.  Any help would be greatly appreciated as I&#39;ve been stuck on this for some time now and know it&#39;s probably something that someone else will see immediately. \r\n\r\nThe AppointmentServiceTest class\r\n\r\n```package test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.*;\r\n\r\nimport java.text.ParseException;\r\n\r\nimport org.junit.jupiter.api.AfterEach;\r\nimport org.junit.jupiter.api.BeforeAll;\r\nimport org.junit.jupiter.api.BeforeEach;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport main.Appointment;\r\nimport main.AppointmentService;\r\n\r\nclass AppointmentServiceTest {\r\n\r\n\tprivate static AppointmentService appointmentService;\r\n\t\r\n\t@BeforeAll\r\n\tstatic void setUp() {\r\n\t\tappointmentService = AppointmentService.getService();\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddAppointmentSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tAppointment cachedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment != null);\r\n\t\tassertTrue(cachedAppointment.getAppointmentId().equals(&quot;123456&quot;));\r\n\t\tassertTrue(cachedAppointment.getAppointmentDate().equals(&quot;2022-10-01&quot;));\r\n\t\tassertTrue(cachedAppointment.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddMultipleAppointmentsSuccess() throws ParseException {\r\n\t\tAppointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tAppointment appointment2 = new Appointment(&quot;1234567&quot;, &quot;2022-10-02&quot;, &quot;Appointment Description String2&quot;);\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment1));\r\n\t\tAppointment cachedAppointment1 = appointmentService.getAppointment(appointment1.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment1 != null);\r\n\t\tassertTrue(cachedAppointment1.getAppointmentId().equals(&quot;123456&quot;));\r\n\t\tassertTrue(cachedAppointment1.getAppointmentDate().equals(&quot;2022-10-01&quot;));\r\n\t\tassertTrue(cachedAppointment1.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));\t\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment2));\r\n\t\tAppointment cachedAppointment2 = appointmentService.getAppointment(appointment1.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(cachedAppointment2 != null);\r\n\t\tassertTrue(cachedAppointment2.getAppointmentId().equals(&quot;1234567&quot;));\r\n\t\tassertTrue(cachedAppointment2.getAppointmentDate().equals(&quot;2022-10-02&quot;));\r\n\t\tassertTrue(cachedAppointment2.getAppointmentDescription().equals(&quot;Appointment Description String2&quot;));\r\n\t\t\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testAddAppoitnmentDuplicateIdFail() throws ParseException {\r\n\t\tAppointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tAppointment appointment2 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\r\n\r\n\t\tassertTrue(appointmentService.addAppointment(appointment1));\r\n\t\tassertFalse(appointmentService.addAppointment(appointment2));\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testGetAppointmentAndUpdateSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tAppointment updatedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\tupdatedAppointment.setAppointmentDate(&quot;2022-10-02&quot;);\r\n\t\tupdatedAppointment.setAppointmentDescription(&quot;New Description&quot;);\r\n\t\t\r\n\t\tupdatedAppointment = appointmentService.getAppointment(updatedAppointment.getAppointmentId());\r\n\t\t\r\n\t\tassertTrue(updatedAppointment.getAppointmentDescription().equals(&quot;New Description&quot;));\r\n\t\tassertTrue(updatedAppointment.getAppointmentDate().equals(&quot;2022-10-02&quot;));\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testGetAppointmentAndDeleteSuccess() throws ParseException {\r\n\t\tAppointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\r\n\t\t\r\n\t\tassertTrue(appointmentService.addAppointment(appointment));\r\n\t\t\r\n\t\tappointment = appointmentService.getAppointment(appointment.getAppointmentId());\r\n\t\tassertTrue(appointment != null);\r\n\t\t\r\n\t\tassertTrue(appointmentService.deleteAppointment(appointment.getAppointmentId()));\r\n\t\tassertTrue(appointmentService.getAppointment(appointment.getAppointmentId()) == null);\r\n\t}\r\n\t\r\n\t@Test\r\n\tvoid testDeleteInvalidAppointmentFail() {\r\n\t\tString invalidAppointmentIdString = &quot;123&quot;;\r\n\t\t\r\n\t\tassertFalse(appointmentService.deleteAppointment(invalidAppointmentIdString));\r\n\t}\r\n```\r\n\r\nAnd the AppointmentService Class\r\n```package main;\r\n\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\npublic class AppointmentService {\r\n\r\n\tprivate static AppointmentService reference = new AppointmentService();\r\n\tprivate final Map&lt;String, Appointment&gt; appointmentList;\r\n\t\r\n\tAppointmentService() {\r\n\t\tthis.appointmentList = new HashMap&lt;String, Appointment&gt;();\r\n\t}\r\n\t\r\n\tpublic static AppointmentService getService() {\r\n\t\treturn reference;\r\n\t}\r\n\t\r\n\tpublic boolean addAppointment(Appointment appointment) {\r\n\t\tboolean isSuccess = false;\r\n\t\t\r\n\t\tif(!appointmentList.containsKey(appointment.getAppointmentId())) {\r\n\t\t\tappointmentList.put(appointment.getAppointmentId(), appointment);\r\n\t\t\tisSuccess = true;\r\n\t\t}\r\n\t\treturn isSuccess;\r\n\t}\r\n\t\r\n\tpublic boolean deleteAppointment(String appointmentId) {\r\n\t\treturn appointmentList.remove(appointmentId) != null;\r\n\t}\r\n\t\r\n\tpublic Appointment getAppointment(String appointmentId) {\r\n\t\treturn appointmentList.get(appointmentId);\r\n\t}\r\n\t\r\n}\r\n\r\n\r\n ","title":"Junit Tests pass individually but fail when run together","body":"<p>I'm currently working on an assignment for school and I'm struggling with the testing portion.  For some reason the unit tests run fine when run individually but not when run together.  I know this has something to do with me sharing the object between them when I shouldn't be based on my prior searches, but I can not for the life of me figure out what needs to be changed to remedy this problem.  The code is below for both the AppointmentService class as well as the AppointmentServiceTest class.  Any help would be greatly appreciated as I've been stuck on this for some time now and know it's probably something that someone else will see immediately.</p>\n<p>The AppointmentServiceTest class</p>\n<pre><code>\nimport static org.junit.jupiter.api.Assertions.*;\n\nimport java.text.ParseException;\n\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.BeforeAll;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\n\nimport main.Appointment;\nimport main.AppointmentService;\n\nclass AppointmentServiceTest {\n\n    private static AppointmentService appointmentService;\n    \n    @BeforeAll\n    static void setUp() {\n        appointmentService = AppointmentService.getService();\n    }\n    \n    @Test\n    void testAddAppointmentSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        Appointment cachedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        \n        assertTrue(cachedAppointment != null);\n        assertTrue(cachedAppointment.getAppointmentId().equals(&quot;123456&quot;));\n        assertTrue(cachedAppointment.getAppointmentDate().equals(&quot;2022-10-01&quot;));\n        assertTrue(cachedAppointment.getAppointmentDescription().equals(&quot;Appointment Description String&quot;)); \n    }\n    \n    @Test\n    void testAddMultipleAppointmentsSuccess() throws ParseException {\n        Appointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        Appointment appointment2 = new Appointment(&quot;1234567&quot;, &quot;2022-10-02&quot;, &quot;Appointment Description String2&quot;);\n        \n        assertTrue(appointmentService.addAppointment(appointment1));\n        Appointment cachedAppointment1 = appointmentService.getAppointment(appointment1.getAppointmentId());\n        \n        assertTrue(cachedAppointment1 != null);\n        assertTrue(cachedAppointment1.getAppointmentId().equals(&quot;123456&quot;));\n        assertTrue(cachedAppointment1.getAppointmentDate().equals(&quot;2022-10-01&quot;));\n        assertTrue(cachedAppointment1.getAppointmentDescription().equals(&quot;Appointment Description String&quot;));    \n        \n        assertTrue(appointmentService.addAppointment(appointment2));\n        Appointment cachedAppointment2 = appointmentService.getAppointment(appointment1.getAppointmentId());\n        \n        assertTrue(cachedAppointment2 != null);\n        assertTrue(cachedAppointment2.getAppointmentId().equals(&quot;1234567&quot;));\n        assertTrue(cachedAppointment2.getAppointmentDate().equals(&quot;2022-10-02&quot;));\n        assertTrue(cachedAppointment2.getAppointmentDescription().equals(&quot;Appointment Description String2&quot;));\n        \n    }\n    \n    @Test\n    void testAddAppoitnmentDuplicateIdFail() throws ParseException {\n        Appointment appointment1 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        Appointment appointment2 = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n\n\n        assertTrue(appointmentService.addAppointment(appointment1));\n        assertFalse(appointmentService.addAppointment(appointment2));\n    }\n    \n    @Test\n    void testGetAppointmentAndUpdateSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        Appointment updatedAppointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        updatedAppointment.setAppointmentDate(&quot;2022-10-02&quot;);\n        updatedAppointment.setAppointmentDescription(&quot;New Description&quot;);\n        \n        updatedAppointment = appointmentService.getAppointment(updatedAppointment.getAppointmentId());\n        \n        assertTrue(updatedAppointment.getAppointmentDescription().equals(&quot;New Description&quot;));\n        assertTrue(updatedAppointment.getAppointmentDate().equals(&quot;2022-10-02&quot;));\n    }\n    \n    @Test\n    void testGetAppointmentAndDeleteSuccess() throws ParseException {\n        Appointment appointment = new Appointment(&quot;123456&quot;, &quot;2022-10-01&quot;, &quot;Appointment Description String&quot;);\n        \n        assertTrue(appointmentService.addAppointment(appointment));\n        \n        appointment = appointmentService.getAppointment(appointment.getAppointmentId());\n        assertTrue(appointment != null);\n        \n        assertTrue(appointmentService.deleteAppointment(appointment.getAppointmentId()));\n        assertTrue(appointmentService.getAppointment(appointment.getAppointmentId()) == null);\n    }\n    \n    @Test\n    void testDeleteInvalidAppointmentFail() {\n        String invalidAppointmentIdString = &quot;123&quot;;\n        \n        assertFalse(appointmentService.deleteAppointment(invalidAppointmentIdString));\n    }\n</code></pre>\n<p>And the AppointmentService Class</p>\n<pre><code>\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class AppointmentService {\n\n    private static AppointmentService reference = new AppointmentService();\n    private final Map&lt;String, Appointment&gt; appointmentList;\n    \n    AppointmentService() {\n        this.appointmentList = new HashMap&lt;String, Appointment&gt;();\n    }\n    \n    public static AppointmentService getService() {\n        return reference;\n    }\n    \n    public boolean addAppointment(Appointment appointment) {\n        boolean isSuccess = false;\n        \n        if(!appointmentList.containsKey(appointment.getAppointmentId())) {\n            appointmentList.put(appointment.getAppointmentId(), appointment);\n            isSuccess = true;\n        }\n        return isSuccess;\n    }\n    \n    public boolean deleteAppointment(String appointmentId) {\n        return appointmentList.remove(appointmentId) != null;\n    }\n    \n    public Appointment getAppointment(String appointmentId) {\n        return appointmentList.get(appointmentId);\n    }\n    \n}\n\n\n \n</code></pre>\n"},{"tags":["java","gradle","intellij-idea","build","java-home"],"comments":[{"owner":{"account_id":13474768,"reputation":3872,"user_id":9722122,"display_name":"Mustahsan"},"score":0,"creation_date":1686578642,"post_id":76457418,"comment_id":134813898,"body_markdown":"did you try changing SDK in intelliJ config in File &gt; Project Structure &gt; Project and also on File &gt; Project Structure &gt; Modules","body":"did you try changing SDK in intelliJ config in File &gt; Project Structure &gt; Project and also on File &gt; Project Structure &gt; Modules"},{"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"score":0,"creation_date":1686579866,"post_id":76457418,"comment_id":134814209,"body_markdown":"Oh yeah I tried. I really tried everything I found on internet. (btw i&#39;m using Intelij 2021.2.4)","body":"Oh yeah I tried. I really tried everything I found on internet. (btw i&#39;m using Intelij 2021.2.4)"}],"answers":[{"tags":[],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686655900,"creation_date":1686655862,"answer_id":76464488,"question_id":76457418,"body_markdown":"OK actually to fix this I just unistalled all java instalations (even in programfiles/java) and re install intellij/java and it worked. ","title":"&quot;Java home is different.&quot; when building gradle project on Intelij","body":"<p>OK actually to fix this I just unistalled all java instalations (even in programfiles/java) and re install intellij/java and it worked.</p>\n"}],"owner":{"account_id":28728255,"reputation":1,"user_id":22000707,"display_name":"Florian"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76464488,"answer_count":1,"score":0,"last_activity_date":1686655900,"creation_date":1686578462,"question_id":76457418,"body_markdown":"I tried to import a gradle project on InteliJ but I get this error when it&#39;s building :\r\n\r\n&gt; `Java home is different. Expecting: &#39;C:\\Program Files\\Java\\jdk-1.8&#39;\r\n&gt; but was: &#39;C:\\Program Files\\Java\\jdk-1.8\\jre&#39;.\r\n&gt; \r\n&gt; Please configure the JDK to match the expected one.\r\n&gt; \r\n&gt; Open JDK Settings`\r\n\r\nI understand this error BUT, when i change my JAVA_HOME nothing happened !!! Even if I use SDK 17, the error still &quot; jdk-1.8......&quot;. Each time I change JAVA_HOME I check my &quot;java -version&quot;.\r\n\r\nIn case, I give my parameters:\r\n\r\nJAVA_HOME:\r\n`echo %JAVA_HOME%\r\nC:\\Program Files\\Java\\jdk-1.8`\r\n\r\nMy Path : \r\n`echo %Path%\r\nC:\\Program Files\\Java\\jdk-1.8\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\TNC Client Plugin\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Users\\a904778\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\a904778\\Downloads\\gradle-3.0-bin\\gradle-3.0\\bin;`\r\n\r\nPS: I even tried to unistall/ install InteliJ but same error.\r\n\r\n\r\n\r\nI checked ALL the forum before and nothing worked. ","title":"&quot;Java home is different.&quot; when building gradle project on Intelij","body":"<p>I tried to import a gradle project on InteliJ but I get this error when it's building :</p>\n<blockquote>\n<p>`Java home is different. Expecting: 'C:\\Program Files\\Java\\jdk-1.8'\nbut was: 'C:\\Program Files\\Java\\jdk-1.8\\jre'.</p>\n<p>Please configure the JDK to match the expected one.</p>\n<p>Open JDK Settings`</p>\n</blockquote>\n<p>I understand this error BUT, when i change my JAVA_HOME nothing happened !!! Even if I use SDK 17, the error still &quot; jdk-1.8......&quot;. Each time I change JAVA_HOME I check my &quot;java -version&quot;.</p>\n<p>In case, I give my parameters:</p>\n<p>JAVA_HOME:\n<code>echo %JAVA_HOME% C:\\Program Files\\Java\\jdk-1.8</code></p>\n<p>My Path :\n<code>echo %Path% C:\\Program Files\\Java\\jdk-1.8\\bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\TNC Client Plugin\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X64\\;C:\\Program Files (x86)\\Common Files\\Pulse Secure\\VC142.CRT\\X86\\;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;C:\\Users\\a904778\\Downloads\\apache-ant-1.9.16-bin\\apache-ant-1.9.16\\bin;c:\\Program Files (x86)\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\Tools\\Binn\\;c:\\Program Files\\Microsoft SQL Server\\110\\DTS\\Binn\\;C:\\Users\\a904778\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\a904778\\Downloads\\gradle-3.0-bin\\gradle-3.0\\bin;</code></p>\n<p>PS: I even tried to unistall/ install InteliJ but same error.</p>\n<p>I checked ALL the forum before and nothing worked.</p>\n"},{"tags":["java","kotlin","pdfbox","pdfa"],"comments":[{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":2,"creation_date":1686649509,"post_id":76461368,"comment_id":134824689,"body_markdown":"PDFBox can&#39;t do it, there are so many flaws in PDFs in the wild. You&#39;ll need a commercial product, unless the PDFs are all of the same kind and you can correct the flaws easily (e.g. just set the XMP and the OutputIntent). Use PDFBox Preflight or VeraPDF to check what flaws you have in your PDFs.","body":"PDFBox can&#39;t do it, there are so many flaws in PDFs in the wild. You&#39;ll need a commercial product, unless the PDFs are all of the same kind and you can correct the flaws easily (e.g. just set the XMP and the OutputIntent). Use PDFBox Preflight or VeraPDF to check what flaws you have in your PDFs."}],"owner":{"account_id":28808825,"reputation":21,"user_id":22064033,"display_name":"screwedDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":415,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1686654546,"creation_date":1686623536,"question_id":76461368,"body_markdown":"How to convert PDF to PDF/A using free and open source library?\r\n\r\nThis is my code which convert word to pdf, I want to generate PDFA format pdf (A-4 standard is preferrable)\r\n\r\n\r\ncode:\r\n\r\n```\r\n@GetMapping(value = [&quot;/generate-pdf&quot;], produces = [MediaType.APPLICATION_PDF_VALUE])\r\n    fun generatePdf(): ResponseEntity&lt;FileSystemResource&gt; {\r\n        // Load the Word template\r\n        val initialFile = File(&quot;src/main/resources/template.docx&quot;)\r\n        val templateFile = FileInputStream(initialFile)\r\n        val document = XWPFDocument(templateFile)\r\n\r\n        // Modify the document as needed\r\n        val paragraphs: List&lt;XWPFParagraph&gt; = document.paragraphs\r\n        for (paragraph in paragraphs) {\r\n            val runs: List&lt;XWPFRun&gt; = paragraph.runs\r\n            for (run in runs) {\r\n                val text = run.getText(0)\r\n                if (text != null) {\r\n                    val replacedText = text.replace(&quot;{{name}}&quot;, &quot;John Doe&quot;).replace(&quot;{{product}}&quot;, &quot;Sample Product&quot;)\r\n                    run.setText(replacedText, 0)\r\n                }\r\n            }\r\n        }\r\n        val out: OutputStream = FileOutputStream(&quot;outputfile.pdf&quot;)\r\n        val options: PdfOptions? = null\r\n        PdfConverter.getInstance().convert(document, out, options)\r\n\r\n        val file = FileSystemResource(&quot;outputfile.pdf&quot;)\r\n\r\n        val responseHeaders = HttpHeaders()\r\n        responseHeaders.contentType = MediaType.APPLICATION_PDF\r\n        responseHeaders.contentLength = file.contentLength()\r\n        responseHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=outputfile.pdf&quot;)\r\n\r\n        // Load the converted PDF\r\n        val pdfFile = File(&quot;outputfile.pdf&quot;)\r\n        val pdfDocument = PDDocument.load(pdfFile)\r\n\r\n        return ResponseEntity.ok().headers(responseHeaders).body(file)\r\n\r\n    }```\r\n\r\n\r\nHow can i convert from PDF to PDF/A \r\nI want free and open source library. Spire pdf i have seen. it adds some warning text on top. \r\n\r\nOther IText and aspose are paid and come with some licence","title":"How to convert PDF to PDF/A using free and open source library?","body":"<p>How to convert PDF to PDF/A using free and open source library?</p>\n<p>This is my code which convert word to pdf, I want to generate PDFA format pdf (A-4 standard is preferrable)</p>\n<p>code:</p>\n<pre><code>@GetMapping(value = [&quot;/generate-pdf&quot;], produces = [MediaType.APPLICATION_PDF_VALUE])\n    fun generatePdf(): ResponseEntity&lt;FileSystemResource&gt; {\n        // Load the Word template\n        val initialFile = File(&quot;src/main/resources/template.docx&quot;)\n        val templateFile = FileInputStream(initialFile)\n        val document = XWPFDocument(templateFile)\n\n        // Modify the document as needed\n        val paragraphs: List&lt;XWPFParagraph&gt; = document.paragraphs\n        for (paragraph in paragraphs) {\n            val runs: List&lt;XWPFRun&gt; = paragraph.runs\n            for (run in runs) {\n                val text = run.getText(0)\n                if (text != null) {\n                    val replacedText = text.replace(&quot;{{name}}&quot;, &quot;John Doe&quot;).replace(&quot;{{product}}&quot;, &quot;Sample Product&quot;)\n                    run.setText(replacedText, 0)\n                }\n            }\n        }\n        val out: OutputStream = FileOutputStream(&quot;outputfile.pdf&quot;)\n        val options: PdfOptions? = null\n        PdfConverter.getInstance().convert(document, out, options)\n\n        val file = FileSystemResource(&quot;outputfile.pdf&quot;)\n\n        val responseHeaders = HttpHeaders()\n        responseHeaders.contentType = MediaType.APPLICATION_PDF\n        responseHeaders.contentLength = file.contentLength()\n        responseHeaders.add(&quot;Content-Disposition&quot;, &quot;attachment; filename=outputfile.pdf&quot;)\n\n        // Load the converted PDF\n        val pdfFile = File(&quot;outputfile.pdf&quot;)\n        val pdfDocument = PDDocument.load(pdfFile)\n\n        return ResponseEntity.ok().headers(responseHeaders).body(file)\n\n    }```\n\n\nHow can i convert from PDF to PDF/A \nI want free and open source library. Spire pdf i have seen. it adds some warning text on top. \n\nOther IText and aspose are paid and come with some licence\n</code></pre>\n"},{"tags":["java","spring","exception","spring-restcontroller"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1686645149,"post_id":76462994,"comment_id":134823720,"body_markdown":"You can do whatever java let you. In particular, catch an exception an throw another one. However, random exception with end with 500 response code by default. What&#39;s the final goal, response with specific code/body??","body":"You can do whatever java let you. In particular, catch an exception an throw another one. However, random exception with end with 500 response code by default. What&#39;s the final goal, response with specific code/body??"},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":1,"creation_date":1686645461,"post_id":76462994,"comment_id":134823768,"body_markdown":"you should be use multiple catch statements and then in your specific exception send email https://www.javatpoint.com/multiple-catch-block-in-java","body":"you should be use multiple catch statements and then in your specific exception send email <a href=\"https://www.javatpoint.com/multiple-catch-block-in-java\" rel=\"nofollow noreferrer\">javatpoint.com/multiple-catch-block-in-java</a>"}],"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686654518,"creation_date":1686644615,"question_id":76462994,"body_markdown":"I&#39;m working on a Spring Boot project at the Rest Controller, and I need some help regarding how to send an exception to the client in a REST API.\r\n\r\nSo, I have this type of code:\r\n\r\n    @GetMapping(value = &quot;/users&quot;)\r\n    public Users getUsers() { \r\n       service.getUsers();\r\n    }\r\n\r\nI want to do an implementation and if there is an error send an email to an admin. I can&#39;t use ResponseEntity or ControllerAdvice. I just want to use a try-catch, can I catch the Exception and then inside the catch to find the exact exception and throw it, or should I catch the exact exception and how can I make it?\r\n\r\n    try {\r\n       service.getUsers();\r\n    } catch (Exception ex) {\r\n       // implementation to send the email\r\n       throw new NotFoundException or BadException, etc\r\n    }\r\n\r\nAny feedback will be appreciated!\r\n","title":"How to find the exact exception without ControllerAdvice in Spring Boot?","body":"<p>I'm working on a Spring Boot project at the Rest Controller, and I need some help regarding how to send an exception to the client in a REST API.</p>\n<p>So, I have this type of code:</p>\n<pre><code>@GetMapping(value = &quot;/users&quot;)\npublic Users getUsers() { \n   service.getUsers();\n}\n</code></pre>\n<p>I want to do an implementation and if there is an error send an email to an admin. I can't use ResponseEntity or ControllerAdvice. I just want to use a try-catch, can I catch the Exception and then inside the catch to find the exact exception and throw it, or should I catch the exact exception and how can I make it?</p>\n<pre><code>try {\n   service.getUsers();\n} catch (Exception ex) {\n   // implementation to send the email\n   throw new NotFoundException or BadException, etc\n}\n</code></pre>\n<p>Any feedback will be appreciated!</p>\n"},{"tags":["java","rmi"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686655429,"post_id":76464133,"comment_id":134825908,"body_markdown":"The client becomes unreferenced when the server releases the client stub, which depends on the DGC interval.  When that happens you can unexport it. You don&#39;t need a list. NB (1) The result of `LocateRegistry.createRegistry()` should be stored in a static variable. NB (2) The result of `exportObject()` is not a skeleton but a stub.","body":"The client becomes unreferenced when the server releases the client stub, which depends on the DGC interval.  When that happens you can unexport it. You don&#39;t need a list. NB (1) The result of <code>LocateRegistry.createRegistry()</code> should be stored in a static variable. NB (2) The result of <code>exportObject()</code> is not a skeleton but a stub."},{"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"score":0,"creation_date":1686656833,"post_id":76464133,"comment_id":134826239,"body_markdown":"thank you for your answer. Suppose my approach to implement 2 way communication is correct: how would a clean client application shut down look like? how can I instruct the server to release the stub on my exported object since I am about to shut down the application?","body":"thank you for your answer. Suppose my approach to implement 2 way communication is correct: how would a clean client application shut down look like? how can I instruct the server to release the stub on my exported object since I am about to shut down the application?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1686708602,"post_id":76464133,"comment_id":134835135,"body_markdown":"Add a remote method, `logout()` for example, that causes the server to do that. Then either wait for `unreferenced()` to fire and forcibly unexport the object then, or unexport it immediately after the logout call if you trust the server not to be about to make another callback.","body":"Add a remote method, <code>logout()</code> for example, that causes the server to do that. Then either wait for <code>unreferenced()</code> to fire and forcibly unexport the object then, or unexport it immediately after the logout call if you trust the server not to be about to make another callback."},{"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"score":0,"creation_date":1686929519,"post_id":76464133,"comment_id":134870718,"body_markdown":"I am not sure what the `logout()` method shall do. in above example, the server does not hold any reference (variable) to the client object - it is just a method argument which the server invokes a method on.","body":"I am not sure what the <code>logout()</code> method shall do. in above example, the server does not hold any reference (variable) to the client object - it is just a method argument which the server invokes a method on."}],"owner":{"account_id":13432952,"reputation":171,"user_id":9692251,"display_name":"MichaelS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653746,"creation_date":1686653410,"question_id":76464133,"body_markdown":"I am currently trying to understand how to work with Java RMI and `UnicastRemoteObject` to enable 2-way communication (Client invokes Server-Methods and Server invokes Client-Methods).  \r\n\r\nI have a RMI Server application creating a registry and binding a service. A client extending `UnicastRemoteObject` and implementing `Remote` can be passed as a reference to the server. The server can then also invoke methods on the client object.\r\n\r\nMinimal working example:\r\n\r\n# Server #\r\n## Server Main ##\r\n```java\r\npublic class Server {\r\n    public static void main(String[] args) throws RemoteException, MalformedURLException {\r\n        LocateRegistry.createRegistry(1099);\r\n        var service = new ServiceImpl();\r\n        var serviceSkel = (Service) UnicastRemoteObject.exportObject(service, 0);\r\n        var url = String.format(&quot;rmi://%s%s&quot;, &quot;localhost:1099&quot;, &quot;/Service&quot;);\r\n        Naming.rebind(url, serviceSkel);\r\n    }\r\n}\r\n```\r\n\r\n## Service Interface ##\r\n```java\r\npublic interface Service extends Remote {\r\n    void WriteOnServer(Client c) throws RemoteException;\r\n}\r\n```\r\n\r\n## Service Implementation ##\r\n```java\r\npublic class ServiceImpl implements Service{\r\n    @Override\r\n    public void WriteOnServer(Client c) throws RemoteException {\r\n        System.out.println(&quot;client executed this method&quot;);\r\n        c.WriteOnClient();\r\n    }\r\n}\r\n```\r\n\r\n# Client #\r\n\r\n## Client Interface ##\r\n\r\n```java\r\npublic interface Client extends Remote {\r\n    void WriteOnClient() throws RemoteException;\r\n}\r\n```\r\n\r\n## Client Implementation + Main ##\r\n\r\n```java\r\npublic class ClientImpl extends UnicastRemoteObject implements Client {\r\n    protected ClientImpl() throws RemoteException {\r\n        super();\r\n    }\r\n\r\n    @Override\r\n    public void WriteOnClient() throws RemoteException {\r\n        System.out.println(&quot;server executed this method&quot;);\r\n    }\r\n\r\n    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {\r\n        var client = new ClientImpl();\r\n        var service = (Service) Naming.lookup(&quot;rmi://localhost:1099/Service&quot;);\r\n        service.WriteOnServer(client);\r\n\r\n        // with following line: client application exits cleanly\r\n        // without following line: client application never exits\r\n        UnicastRemoteObject.unexportObject(client, false);\r\n    }\r\n}\r\n```\r\n\r\n## Problem / Question ##\r\n\r\nEverything works as expected meaning...\r\n\r\n 1. Server starts and binds service to registry\r\n 2. Client starts, retrieves service object from registry\r\n 3. Client invokes the service remote method and passes itself as argument\r\n 4. Server prints to console and then invokes the remote method on the client reference\r\n 5. Client prints to console\r\n\r\n... but the client application never exits the JVM if I do not manually unexport the client object because (i guess) RMI is keeping a non-daemon thread alive waiting for further remote invocations.\r\n\r\nIs this expected?  \r\nDo I have to store a list of all exported Objects and call `UnicastRemoteObject.unexportObject(Object, Boolean)` on all of them manually?  \r\n\r\nI also tried to implement `Unreferenced` in `ClientImpl` but the method `unreferenced()` is never called:\r\n\r\n```java\r\n\r\npublic class ClientImpl extends UnicastRemoteObject implements Client, Unreferenced {\r\n\r\n.\r\n.\r\n.\r\n\r\n    @Override\r\n    public void unreferenced() {\r\n        try {\r\n            UnicastRemoteObject.unexportObject(this, true);\r\n        } catch (NoSuchObjectException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n}\r\n```","title":"Java RMI - Object of Class extending UnicastRemoteObject keeps JVM alive","body":"<p>I am currently trying to understand how to work with Java RMI and <code>UnicastRemoteObject</code> to enable 2-way communication (Client invokes Server-Methods and Server invokes Client-Methods).</p>\n<p>I have a RMI Server application creating a registry and binding a service. A client extending <code>UnicastRemoteObject</code> and implementing <code>Remote</code> can be passed as a reference to the server. The server can then also invoke methods on the client object.</p>\n<p>Minimal working example:</p>\n<h1>Server</h1>\n<h2>Server Main</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class Server {\n    public static void main(String[] args) throws RemoteException, MalformedURLException {\n        LocateRegistry.createRegistry(1099);\n        var service = new ServiceImpl();\n        var serviceSkel = (Service) UnicastRemoteObject.exportObject(service, 0);\n        var url = String.format(&quot;rmi://%s%s&quot;, &quot;localhost:1099&quot;, &quot;/Service&quot;);\n        Naming.rebind(url, serviceSkel);\n    }\n}\n</code></pre>\n<h2>Service Interface</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Service extends Remote {\n    void WriteOnServer(Client c) throws RemoteException;\n}\n</code></pre>\n<h2>Service Implementation</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class ServiceImpl implements Service{\n    @Override\n    public void WriteOnServer(Client c) throws RemoteException {\n        System.out.println(&quot;client executed this method&quot;);\n        c.WriteOnClient();\n    }\n}\n</code></pre>\n<h1>Client</h1>\n<h2>Client Interface</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Client extends Remote {\n    void WriteOnClient() throws RemoteException;\n}\n</code></pre>\n<h2>Client Implementation + Main</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public class ClientImpl extends UnicastRemoteObject implements Client {\n    protected ClientImpl() throws RemoteException {\n        super();\n    }\n\n    @Override\n    public void WriteOnClient() throws RemoteException {\n        System.out.println(&quot;server executed this method&quot;);\n    }\n\n    public static void main(String[] args) throws RemoteException, MalformedURLException, NotBoundException {\n        var client = new ClientImpl();\n        var service = (Service) Naming.lookup(&quot;rmi://localhost:1099/Service&quot;);\n        service.WriteOnServer(client);\n\n        // with following line: client application exits cleanly\n        // without following line: client application never exits\n        UnicastRemoteObject.unexportObject(client, false);\n    }\n}\n</code></pre>\n<h2>Problem / Question</h2>\n<p>Everything works as expected meaning...</p>\n<ol>\n<li>Server starts and binds service to registry</li>\n<li>Client starts, retrieves service object from registry</li>\n<li>Client invokes the service remote method and passes itself as argument</li>\n<li>Server prints to console and then invokes the remote method on the client reference</li>\n<li>Client prints to console</li>\n</ol>\n<p>... but the client application never exits the JVM if I do not manually unexport the client object because (i guess) RMI is keeping a non-daemon thread alive waiting for further remote invocations.</p>\n<p>Is this expected?<br />\nDo I have to store a list of all exported Objects and call <code>UnicastRemoteObject.unexportObject(Object, Boolean)</code> on all of them manually?</p>\n<p>I also tried to implement <code>Unreferenced</code> in <code>ClientImpl</code> but the method <code>unreferenced()</code> is never called:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npublic class ClientImpl extends UnicastRemoteObject implements Client, Unreferenced {\n\n.\n.\n.\n\n    @Override\n    public void unreferenced() {\n        try {\n            UnicastRemoteObject.unexportObject(this, true);\n        } catch (NoSuchObjectException e) {\n            throw new RuntimeException(e);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","gradle","groovy","import","jar"],"comments":[{"owner":{"account_id":1857554,"reputation":20310,"user_id":1682820,"accept_rate":70,"display_name":"injecteer"},"score":0,"creation_date":1686663028,"post_id":76464150,"comment_id":134827709,"body_markdown":"check the output of `gradlew dependencies` -&gt; do you see jackson there?","body":"check the output of <code>gradlew dependencies</code> -&gt; do you see jackson there?"},{"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"score":0,"creation_date":1686709470,"post_id":76464150,"comment_id":134835211,"body_markdown":"I executed the above command and I am able to see it under compile classpath section.","body":"I executed the above command and I am able to see it under compile classpath section."}],"owner":{"account_id":11449092,"reputation":19,"user_id":8391938,"display_name":"Partha Debnath"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653501,"creation_date":1686653501,"question_id":76464150,"body_markdown":"I am new to the Gradle and Groovy worlds. I have created a sample gradle-groovy project where I have added a dependency, and I want to make calls to those dependency classes and methods from my groovy file.\r\nBut unfortunately, I am not able to build the project due to imported classes not being identified by my Groovy file, and I am getting an error message.\r\n\r\n```\r\nunable to resolve class com.fasterxml.jackson.databind.ObjectMapper\r\n @ line 3, column 1.\r\n   import com.fasterxml.jackson.databind.ObjectMapper\r\n```\r\n\r\nBelow added my project structure and build.gradle file\r\n\r\n\r\n\r\n[![enter image description here](https://i.stack.imgur.com/7Xon8.png)](https://i.stack.imgur.com/7Xon8.png)\r\n\r\n[![enter image description here](https://i.stack.imgur.com/SLjdc.png)](https://i.stack.imgur.com/SLjdc.png)\r\n\r\n\r\nI am trying to import com.fasterxml.jackson.core:jackson-databind:2.15.1 jar from maven central repository and trying to create an object of ObjectMapper class.\r\n\r\nFor checking whether I am doing it correctly or not, I have created a gradle-java project, and from it I have added the same com.fasterxml.jackson.core:jackson-databind:2.15.1 dependency, and as expected, I was able to create an object of the ObjectMapper class provided by com.fasterxml.jackson.core:jackson-databind:2.15.1 and build the project.\r\nWhat am I doing wrong here?","title":"Dependency jar file classes are not importing in Gradle Groovy project","body":"<p>I am new to the Gradle and Groovy worlds. I have created a sample gradle-groovy project where I have added a dependency, and I want to make calls to those dependency classes and methods from my groovy file.\nBut unfortunately, I am not able to build the project due to imported classes not being identified by my Groovy file, and I am getting an error message.</p>\n<pre><code>unable to resolve class com.fasterxml.jackson.databind.ObjectMapper\n @ line 3, column 1.\n   import com.fasterxml.jackson.databind.ObjectMapper\n</code></pre>\n<p>Below added my project structure and build.gradle file</p>\n<p><a href=\"https://i.stack.imgur.com/7Xon8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Xon8.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/SLjdc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SLjdc.png\" alt=\"enter image description here\" /></a></p>\n<p>I am trying to import com.fasterxml.jackson.core:jackson-databind:2.15.1 jar from maven central repository and trying to create an object of ObjectMapper class.</p>\n<p>For checking whether I am doing it correctly or not, I have created a gradle-java project, and from it I have added the same com.fasterxml.jackson.core:jackson-databind:2.15.1 dependency, and as expected, I was able to create an object of the ObjectMapper class provided by com.fasterxml.jackson.core:jackson-databind:2.15.1 and build the project.\nWhat am I doing wrong here?</p>\n"},{"tags":["java","selenium-webdriver","groovy","katalon-studio"],"comments":[{"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"score":0,"creation_date":1686657598,"post_id":76464037,"comment_id":134826394,"body_markdown":"i think problem is in the If part but i cant fix it","body":"i think problem is in the If part but i cant fix it"},{"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"score":0,"creation_date":1686730439,"post_id":76464037,"comment_id":134837796,"body_markdown":"`for (int i = 1; i &lt; rows.size(); i++) {\n    WebElement row = rows.get(i)\n    WebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field=&#39;nameSurname&#39;]&quot;))\n    String user = firstCell.getText()\n\tprintln &quot;&gt;${user}&lt;&quot;\n\n    if (user.contains(&quot;QA Tester&quot;)) {\n        WebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label=&#39;Delete&#39;]&quot;))\n        deleteIcon.click()\n        WebUI.click(findTestObject(&#39;Object Repository/Users Page Objects/Add Patient Details/deleteButton&#39;))\n\t\tbreak\n    }\n}`\ni used contains instead of equals its working now","body":"<code>for (int i = 1; i &lt; rows.size(); i++) {     WebElement row = rows.get(i)     WebElement firstCell = row.findElement(By.xpath(&quot;.&#47;&#47;div[@data-field=&#39;nameSurname&#39;]&quot;&zwnj;&#8203;))     String user = firstCell.getText() \tprintln &quot;&gt;${user}&lt;&quot;      if (user.contains(&quot;QA Tester&quot;)) {         WebElement deleteIcon = row.findElement(By.xpath(&quot;&#47;&#47;a[@aria-label=&#39;Delete&#39;]&quot;))         deleteIcon.click()         WebUI.click(findTestObject(&#39;Object Repository&#47;Users Page Objects&#47;Add Patient Details&#47;deleteButton&#39;)) \t\tbreak     } }</code> i used contains instead of equals its working now"}],"owner":{"account_id":28104311,"reputation":1,"user_id":21473140,"display_name":"Mert Sert&#246;z"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653306,"creation_date":1686652739,"question_id":76464037,"body_markdown":"```WebUI.callTestCase(findTestCase(&#39;Login Page/*********&#39;), [:], FailureHandling.STOP_ON_FAILURE)\r\nWebUI.waitForPageLoad(3)\r\nCustomKeywords.&#39;userTable.sidebar.sidebarUsersClick&#39;()\r\n\r\nWebUI.setText(findTestObject(&#39;Object Repository/Overview Page Objects/overview searchbar&#39;), &quot;Tester&quot;) //Search for the user.\r\n\r\nList&lt;WebElement&gt; rows = WebUI.findWebElements(findTestObject(&#39;Object Repository/Overview Page Objects/patientList_Row&#39;), 10) //create list from user results after search\r\n\r\nfor(int i = 1 ; i &lt; rows.size() ; i++) {\r\n\tWebElement row = rows.get(i) //get the current row element\r\n\tWebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field=&#39;nameSurname&#39;]&quot;)) // get the text of the first cell (username and surname)\r\n\tString user = firstCell.getText()\r\n\tprintln user\r\n\t\tif(user.equals(&quot;QA Tester&quot;)) {\r\n\t\t\tWebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label=&#39;Delete&#39;]&quot;))\r\n\t\t\tdeleteIcon.click()\r\n\t\t\tWebUI.click(findTestObject(&#39;Object Repository/Users Page Objects/Add Patient Details/deleteButton&#39;))\r\n\t\t}\r\n}\r\n```\r\n\r\n\r\n[Username xpath][1]\r\n\r\n[deleteicon xpath][2]\r\n\r\nBasicly in this code block. Firstly im searching a user name in searchbox, then make a List&lt;WebElement&gt; for the results of users, and creating loop for to find the user i want (QA Tester), then when loop finds the user i want, i want it to click the Delete Icon.\r\nwhen i run this code. The loop ends successfully, but does not click the delete icon.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xxGEi.png\r\n  [2]: https://i.stack.imgur.com/QOM9W.png","title":"katalon studio, can&#39;t click a icon in a loop","body":"<pre><code>WebUI.waitForPageLoad(3)\nCustomKeywords.'userTable.sidebar.sidebarUsersClick'()\n\nWebUI.setText(findTestObject('Object Repository/Overview Page Objects/overview searchbar'), &quot;Tester&quot;) //Search for the user.\n\nList&lt;WebElement&gt; rows = WebUI.findWebElements(findTestObject('Object Repository/Overview Page Objects/patientList_Row'), 10) //create list from user results after search\n\nfor(int i = 1 ; i &lt; rows.size() ; i++) {\n    WebElement row = rows.get(i) //get the current row element\n    WebElement firstCell = row.findElement(By.xpath(&quot;.//div[@data-field='nameSurname']&quot;)) // get the text of the first cell (username and surname)\n    String user = firstCell.getText()\n    println user\n        if(user.equals(&quot;QA Tester&quot;)) {\n            WebElement deleteIcon = row.findElement(By.xpath(&quot;//a[@aria-label='Delete']&quot;))\n            deleteIcon.click()\n            WebUI.click(findTestObject('Object Repository/Users Page Objects/Add Patient Details/deleteButton'))\n        }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/xxGEi.png\" rel=\"nofollow noreferrer\">Username xpath</a></p>\n<p><a href=\"https://i.stack.imgur.com/QOM9W.png\" rel=\"nofollow noreferrer\">deleteicon xpath</a></p>\n<p>Basicly in this code block. Firstly im searching a user name in searchbox, then make a List for the results of users, and creating loop for to find the user i want (QA Tester), then when loop finds the user i want, i want it to click the Delete Icon.\nwhen i run this code. The loop ends successfully, but does not click the delete icon.</p>\n"},{"tags":["java","rmi"],"comments":[{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686655573,"post_id":76464105,"comment_id":134825964,"body_markdown":"Are you trying to unexport stubs? Unexporting the result of a lookup looks very like that. You can&#39;t unexport a stub, only the actual remote object, which you don&#39;t normally get from a `Registry` lookup.","body":"Are you trying to unexport stubs? Unexporting the result of a lookup looks very like that. You can&#39;t unexport a stub, only the actual remote object, which you don&#39;t normally get from a <code>Registry</code> lookup."},{"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"score":0,"creation_date":1686658792,"post_id":76464105,"comment_id":134826663,"body_markdown":"So I can&#39;t get the remote object via lookup and have to supply it via argument? No problem doing that, but, again: that exact process works for the database service, no issues at all. What&#39;s making me crazy is *why* does it work on one service but not the others.","body":"So I can&#39;t get the remote object via lookup and have to supply it via argument? No problem doing that, but, again: that exact process works for the database service, no issues at all. What&#39;s making me crazy is <i>why</i> does it work on one service but not the others."},{"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"score":0,"creation_date":1686659114,"post_id":76464105,"comment_id":134826756,"body_markdown":"Jesus Christ it worked. This is black magic and I absolutely HATE that it works without knowing why. A million thanks, but could you please elaborate a little on the reason this works inconsistently and why am I able to unexport the database stub?","body":"Jesus Christ it worked. This is black magic and I absolutely HATE that it works without knowing why. A million thanks, but could you please elaborate a little on the reason this works inconsistently and why am I able to unexport the database stub?"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1686708383,"post_id":76464105,"comment_id":134835113,"body_markdown":"The reason is that you didn&#39;t get a remote object from the Regsitry,  as I said. You get the stub, and you can&#39;t unexport that. If however you created the Registry yourself with `createRegistry()` *and* you use the result of that method to call `bind()`, instead of using `getRegistry()` or `Naming`, you aren&#39;t doing RMI to the registry, you are doing local method invocation: so the RMI stub substitution doesn&#39;t occur.","body":"The reason is that you didn&#39;t get a remote object from the Regsitry,  as I said. You get the stub, and you can&#39;t unexport that. If however you created the Registry yourself with <code>createRegistry()</code> <i>and</i> you use the result of that method to call <code>bind()</code>, instead of using <code>getRegistry()</code> or <code>Naming</code>, you aren&#39;t doing RMI to the registry, you are doing local method invocation: so the RMI stub substitution doesn&#39;t occur."}],"owner":{"account_id":22060220,"reputation":19,"user_id":16323042,"display_name":"jack"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653305,"creation_date":1686653305,"question_id":76464105,"body_markdown":"I&#39;m building a simple program for an assignment, which consists of:\r\n- A .jar file that launches a registry and a database service.\r\n- Another .jar file that connects to the registry and launches another two services (auth and management), both connecting via registry to the database service.\r\n- A third .jar file that can be executed several times, each launching a separate user client that connects to both auth and management services, and also launches its callback. \r\n\r\nThe services and callback inherit from UnicastRemoteObject so I don&#39;t needd to export them when initializing everything. Everything works flawlessly until the time comes to shut everything down. For reference, this is the code for launching, getting and stopping the services. It&#39;s the same for all three, since the URL are defined when the registry is created. The closeCallback method receives its own URL, that&#39;s all.\r\n\r\n\r\n```\r\npublic String launchDataServ(ServicioDatosInterface dataServ) throws RegException {\r\n\ttry {\r\n\t\tthis.reg.bind(this.dataServURL, dataServ);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (AlreadyBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n\t\r\n\treturn this.dataServURL;\r\n}\r\n\r\n\r\npublic ServicioDatosInterface getDataServ() throws RegException {\r\n\ttry {\r\n\t\treturn (ServicioDatosInterface) this.reg.lookup(this.dataServURL);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (NotBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n}\r\n\r\n\r\npublic void closeDataServ() throws RegException {\r\n\ttry {\r\n\t\tUnicastRemoteObject.unexportObject(this.getDataServ(), true);\r\n\t\t this.reg.unbind(this.dataServURL);\r\n\t} catch (RemoteException e) {\r\n\t\tthrow new RegException(&quot;error message 1&quot;);\r\n\t} catch (NotBoundException e) {\r\n\t\tthrow new RegException(&quot;error message 2&quot;);\r\n\t}\r\n}\r\n```\r\n\r\nWhen I exit the user clients, they throw a NoSuchObjectException when invoking unexportObject() on their callbacks. When I exit the &quot;server&quot;, it throws a NoSuchObjectException when invoking unexportObject() on either the auth or the management service. But when I exit the database, it doesn&#39;t throw any exception.\r\n\r\nNeedless to say, I don&#39;t call the close() methods anywhere in the code except for the final part, when the program ends, and everything works perfectly up until that point.\r\n\r\nCommenting unexportObject() makes the program hang up instead of making a clean exit because I haven&#39;t unexported the services, so apparently they are exported just until the moment I need to unexport them. Also, I don&#39;t understand why this issue doesn&#39;t happen with the database service.","title":"Issue unexporting remote object in Java","body":"<p>I'm building a simple program for an assignment, which consists of:</p>\n<ul>\n<li>A .jar file that launches a registry and a database service.</li>\n<li>Another .jar file that connects to the registry and launches another two services (auth and management), both connecting via registry to the database service.</li>\n<li>A third .jar file that can be executed several times, each launching a separate user client that connects to both auth and management services, and also launches its callback.</li>\n</ul>\n<p>The services and callback inherit from UnicastRemoteObject so I don't needd to export them when initializing everything. Everything works flawlessly until the time comes to shut everything down. For reference, this is the code for launching, getting and stopping the services. It's the same for all three, since the URL are defined when the registry is created. The closeCallback method receives its own URL, that's all.</p>\n<pre><code>public String launchDataServ(ServicioDatosInterface dataServ) throws RegException {\n    try {\n        this.reg.bind(this.dataServURL, dataServ);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (AlreadyBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n    \n    return this.dataServURL;\n}\n\n\npublic ServicioDatosInterface getDataServ() throws RegException {\n    try {\n        return (ServicioDatosInterface) this.reg.lookup(this.dataServURL);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (NotBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n}\n\n\npublic void closeDataServ() throws RegException {\n    try {\n        UnicastRemoteObject.unexportObject(this.getDataServ(), true);\n         this.reg.unbind(this.dataServURL);\n    } catch (RemoteException e) {\n        throw new RegException(&quot;error message 1&quot;);\n    } catch (NotBoundException e) {\n        throw new RegException(&quot;error message 2&quot;);\n    }\n}\n</code></pre>\n<p>When I exit the user clients, they throw a NoSuchObjectException when invoking unexportObject() on their callbacks. When I exit the &quot;server&quot;, it throws a NoSuchObjectException when invoking unexportObject() on either the auth or the management service. But when I exit the database, it doesn't throw any exception.</p>\n<p>Needless to say, I don't call the close() methods anywhere in the code except for the final part, when the program ends, and everything works perfectly up until that point.</p>\n<p>Commenting unexportObject() makes the program hang up instead of making a clean exit because I haven't unexported the services, so apparently they are exported just until the moment I need to unexport them. Also, I don't understand why this issue doesn't happen with the database service.</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":10500252,"reputation":878,"user_id":7739171,"accept_rate":88,"display_name":"Sivvie Lim"},"down_vote_count":0,"up_vote_count":28,"is_accepted":true,"score":28,"last_activity_date":1673401685,"creation_date":1673400197,"answer_id":75077454,"question_id":75077401,"body_markdown":"You don&#39;t have to add jakarta servlet api 6.0 into the `pom.xml`.\r\nAccording to documentation [here][1], it is already included.\r\n\r\nIn your code whichever is using `javax.servlet.http.HttpServletRequest`, you need to change the `javax` to `jakarta`. \r\n\r\nSo the whole line will be something like this:\r\n`import jakarta.servlet.http.HttpServletRequest`\r\n\r\nI faced this error before when I upgrade my service as well and I solved it using this way. Maybe you can try it. \r\n\r\n[EDIT]\r\n\r\nI see that one of your dependency is using the `javax.servlet`: \r\nhttps://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\r\n\r\nAnd following this github, it seems this packages is no longer actively maintained and being archived, so it is likely they do not upgrade for Spring Boot 3. \r\n\r\nI would recommend find other ways to work on the social login for Facebook, maybe you can try this way?\r\n\r\nhttps://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example\r\n\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#Jakarta-EE","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>You don't have to add jakarta servlet api 6.0 into the <code>pom.xml</code>.\nAccording to documentation <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide#Jakarta-EE\" rel=\"noreferrer\">here</a>, it is already included.</p>\n<p>In your code whichever is using <code>javax.servlet.http.HttpServletRequest</code>, you need to change the <code>javax</code> to <code>jakarta</code>.</p>\n<p>So the whole line will be something like this:\n<code>import jakarta.servlet.http.HttpServletRequest</code></p>\n<p>I faced this error before when I upgrade my service as well and I solved it using this way. Maybe you can try it.</p>\n<p>[EDIT]</p>\n<p>I see that one of your dependency is using the <code>javax.servlet</code>:\n<a href=\"https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE\" rel=\"noreferrer\">https://mvnrepository.com/artifact/org.springframework.social/spring-social-facebook/2.0.3.RELEASE</a></p>\n<p>And following this github, it seems this packages is no longer actively maintained and being archived, so it is likely they do not upgrade for Spring Boot 3.</p>\n<p>I would recommend find other ways to work on the social login for Facebook, maybe you can try this way?</p>\n<p><a href=\"https://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example\" rel=\"noreferrer\">https://www.codejava.net/frameworks/spring-boot/social-login-with-facebook-example</a></p>\n"},{"tags":[],"owner":{"account_id":2518622,"reputation":753,"user_id":2189421,"display_name":"Aparna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681732733,"creation_date":1681732733,"answer_id":76034931,"question_id":75077401,"body_markdown":"You can also try adding new dependencies as follows. With the below dependencies I was able to retain javax.servlet class.\r\n\r\n     &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.annotation&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;1.3.2&lt;/version&gt;\r\n      &lt;/dependency&gt; \r\n      &lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.2.12&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n    \t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t&lt;/dependency&gt; ","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>You can also try adding new dependencies as follows. With the below dependencies I was able to retain javax.servlet class.</p>\n<pre><code> &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n  &lt;/dependency&gt; \n  &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.2.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686653244,"creation_date":1686653244,"answer_id":76464093,"question_id":75077401,"body_markdown":"In my case I had the following dependencies:\r\n```\r\nimplementation &quot;io.springfox:springfox-swagger2&quot;\r\nimplementation &quot;io.springfox:springfox-swagger-ui&quot;\r\n```\r\n\r\nWhich apparently somehow depended on the old api, because commenting them solved the issue. ","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>In my case I had the following dependencies:</p>\n<pre><code>implementation &quot;io.springfox:springfox-swagger2&quot;\nimplementation &quot;io.springfox:springfox-swagger-ui&quot;\n</code></pre>\n<p>Which apparently somehow depended on the old api, because commenting them solved the issue.</p>\n"}],"owner":{"account_id":22489106,"reputation":179,"user_id":16687077,"display_name":"Jason Chuang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24393,"favorite_count":0,"down_vote_count":1,"up_vote_count":19,"accepted_answer_id":75077454,"answer_count":3,"score":18,"last_activity_date":1686653244,"creation_date":1673399355,"question_id":75077401,"body_markdown":"When I ran spring-boot-2.7, there is no issue. However when I changed code and tailored it to spring-boot-3.0, there is java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest\r\n\r\nCould someone help me to download the source code and run on your computer? After run it, and you click &quot;Login using Facebook&quot;, you will see the exception.\r\nhttps://github.com/chuangtc/spring-boot-3.0-security-social-login\r\n\r\nI tried adding jarkarta servlet api 6.0, but the exception is still there.","title":"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException","body":"<p>When I ran spring-boot-2.7, there is no issue. However when I changed code and tailored it to spring-boot-3.0, there is java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest</p>\n<p>Could someone help me to download the source code and run on your computer? After run it, and you click &quot;Login using Facebook&quot;, you will see the exception.\n<a href=\"https://github.com/chuangtc/spring-boot-3.0-security-social-login\" rel=\"noreferrer\">https://github.com/chuangtc/spring-boot-3.0-security-social-login</a></p>\n<p>I tried adding jarkarta servlet api 6.0, but the exception is still there.</p>\n"},{"tags":["java","cassandra"],"comments":[{"owner":{"account_id":4819783,"reputation":1505,"user_id":3890779,"display_name":"clunven"},"score":1,"creation_date":1686656239,"post_id":76464079,"comment_id":134826113,"body_markdown":"We would need the full error stack. You expressed here the symptom, not the root cause.  Also, where is cassandra running .. in a docker container close to the application ?","body":"We would need the full error stack. You expressed here the symptom, not the root cause.  Also, where is cassandra running .. in a docker container close to the application ?"}],"owner":{"account_id":28811650,"reputation":1,"user_id":22066225,"display_name":"dynamic dude"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686653149,"creation_date":1686653149,"question_id":76464079,"body_markdown":"`[INFO] BUILD FAILURE Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.0:run \r\n(default-cli)`your text` on project myproject: Process terminated with exit code: 1 -&gt; [Help 1]\r\n\r\n \r\n To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n\r\n Re-run Maven using the -X switch to enable full debug logging.\r\n For more information about the errors and possible solutions, please read the following \r\narticles\r\n [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\r\n\r\n\r\ni was exepecting it to run on localhost`","title":"i am trying to run my web application (java springboot ) has a cassandra db and i keep getting this error","body":"<p><code>[INFO] BUILD FAILURE Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.0:run  (default-cli)</code>your text` on project myproject: Process terminated with exit code: 1 -&gt; [Help 1]</p>\n<p>To see the full stack trace of the errors, re-run Maven with the -e switch.</p>\n<p>Re-run Maven using the -X switch to enable full debug logging.\nFor more information about the errors and possible solutions, please read the following\narticles\n[Help 1] <a href=\"http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\" rel=\"nofollow noreferrer\">http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException</a></p>\n<p>i was exepecting it to run on localhost`</p>\n"},{"tags":["java","spring","spring-boot","jackson","springdoc"],"answers":[{"tags":[],"owner":{"account_id":6745083,"reputation":11,"user_id":7333091,"display_name":"Andrew Barhatov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686653066,"creation_date":1686653066,"answer_id":76464071,"question_id":76287717,"body_markdown":"My nearest solution after many tests — add wrapper class and a number of annotations:\r\n\r\n```\r\npackage test.controllers;\r\n\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\nimport lombok.RequiredArgsConstructor;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport javax.xml.bind.annotation.XmlRootElement;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n    @XmlRootElement(name = &quot;Person&quot;)\r\n    public static class Person {\r\n        public String fullName;\r\n\r\n        public Person(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n    }\r\n\r\n    @RequiredArgsConstructor\r\n    @JacksonXmlRootElement(localName = &quot;Persons&quot;)\r\n    @XmlRootElement(name = &quot;Persons&quot;)\r\n    public static class PersonsList {\r\n        private final List&lt;Person&gt; persons;\r\n\r\n        @JacksonXmlElementWrapper(useWrapping = false)\r\n        @JacksonXmlProperty(localName = &quot;Person&quot;)\r\n        public List&lt;Person&gt; getPersons() {\r\n            return persons;\r\n        }\r\n    }\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\r\n    public PersonsList getPeople() {\r\n        return new PersonsList(Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;)));\r\n    }\r\n}\r\n```\r\n\r\nBut JSON structure has changed: the list is now in a field `Persons`.\r\n","title":"springdoc: Incorrect XML schema for a REST-method that returns a list","body":"<p>My nearest solution after many tests — add wrapper class and a number of annotations:</p>\n<pre><code>package test.controllers;\n\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\nimport lombok.RequiredArgsConstructor;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport javax.xml.bind.annotation.XmlRootElement;\nimport java.util.Arrays;\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n    @XmlRootElement(name = &quot;Person&quot;)\n    public static class Person {\n        public String fullName;\n\n        public Person(String fullName) {\n            this.fullName = fullName;\n        }\n    }\n\n    @RequiredArgsConstructor\n    @JacksonXmlRootElement(localName = &quot;Persons&quot;)\n    @XmlRootElement(name = &quot;Persons&quot;)\n    public static class PersonsList {\n        private final List&lt;Person&gt; persons;\n\n        @JacksonXmlElementWrapper(useWrapping = false)\n        @JacksonXmlProperty(localName = &quot;Person&quot;)\n        public List&lt;Person&gt; getPersons() {\n            return persons;\n        }\n    }\n\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\n    public PersonsList getPeople() {\n        return new PersonsList(Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;)));\n    }\n}\n</code></pre>\n<p>But JSON structure has changed: the list is now in a field <code>Persons</code>.</p>\n"}],"owner":{"account_id":6745083,"reputation":11,"user_id":7333091,"display_name":"Andrew Barhatov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":186,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686653066,"creation_date":1684488138,"question_id":76287717,"body_markdown":"I have such @RestController in my Spring Boot application:\r\n\r\n```\r\npackage test.controllers;\r\n\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n    public static class Person {\r\n        public String fullName;\r\n\r\n        public Person(String fullName) {\r\n            this.fullName = fullName;\r\n        }\r\n    }\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\r\n    public List&lt;Person&gt; getPeople() {\r\n        return Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;));\r\n    }\r\n}\r\n```\r\n\r\nIt returns such XML:\r\n\r\n```\r\n&lt;List&gt;\r\n  &lt;item&gt;\r\n    &lt;FullName&gt;Name1&lt;/FullName&gt;\r\n  &lt;/item&gt;\r\n  &lt;item&gt;\r\n    &lt;FullName&gt;Name2&lt;/FullName&gt;\r\n  &lt;/item&gt;\r\n&lt;/List&gt;\r\n```\r\n\r\nAnd such JSON:\r\n\r\n```\r\n[{&quot;FullName&quot;:&quot;Name1&quot;},{&quot;FullName&quot;:&quot;Name2&quot;}]\r\n```\r\n\r\nThis structure almost suits me.\r\n\r\nspringdoc generate such openapi code:\r\n\r\n```\r\n{\r\n\t&quot;/test&quot; : {\r\n\t\t&quot;get&quot; : {\r\n\t\t\t&quot;tags&quot; : [\r\n\t\t\t\t&quot;test-controller&quot;\r\n\t\t\t],\r\n\t\t\t&quot;operationId&quot; : &quot;getPeople&quot;,\r\n\t\t\t&quot;responses&quot; : {\r\n\t\t\t\t&quot;200&quot; : {\r\n\t\t\t\t\t&quot;description&quot; : &quot;OK&quot;,\r\n\t\t\t\t\t&quot;content&quot; : {\r\n\t\t\t\t\t\t&quot;application/json&quot; : {\r\n\t\t\t\t\t\t\t&quot;schema&quot; : {\r\n\t\t\t\t\t\t\t\t&quot;type&quot; : &quot;array&quot;,\r\n\t\t\t\t\t\t\t\t&quot;items&quot; : {\r\n\t\t\t\t\t\t\t\t\t&quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t&quot;application/xml&quot; : {\r\n\t\t\t\t\t\t\t&quot;schema&quot; : {\r\n\t\t\t\t\t\t\t\t&quot;type&quot; : &quot;array&quot;,\r\n\t\t\t\t\t\t\t\t&quot;items&quot; : {\r\n\t\t\t\t\t\t\t\t\t&quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t&quot;components&quot; : {\r\n\t\t&quot;schemas&quot; : {\r\n\t\t\t&quot;Person&quot; : {\r\n\t\t\t\t&quot;type&quot; : &quot;object&quot;,\r\n\t\t\t\t&quot;properties&quot; : {\r\n\t\t\t\t\t&quot;fullName&quot; : {\r\n\t\t\t\t\t\t&quot;type&quot; : &quot;string&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t&quot;description&quot; : &quot;&quot;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\n1) There is no problems with JSON, but for XML format there are no mentions of *List*/*item* tags and error in swagger-ui for XML example &quot;XML example cannot be generated; root element name is undefined&quot;. What is the right thing to do if the REST-method must return a list and openapi documentation is needed?\r\n\r\n2) How to change the names of the *List* and *item* XML tags?\r\n\r\nI tried to extend ArrayList, make the List\\&lt;Person\\&gt; a field of my class, use various annotations, but did not achieve the desired effect (subject to saving the desired response structure).","title":"springdoc: Incorrect XML schema for a REST-method that returns a list","body":"<p>I have such @RestController in my Spring Boot application:</p>\n<pre><code>package test.controllers;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.util.Arrays;\nimport java.util.List;\n\n@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n    public static class Person {\n        public String fullName;\n\n        public Person(String fullName) {\n            this.fullName = fullName;\n        }\n    }\n\n    @GetMapping(value = &quot;&quot;, produces = {&quot;application/json&quot;, &quot;application/xml&quot;})\n    public List&lt;Person&gt; getPeople() {\n        return Arrays.asList(new Person(&quot;Name1&quot;), new Person(&quot;Name2&quot;));\n    }\n}\n</code></pre>\n<p>It returns such XML:</p>\n<pre><code>&lt;List&gt;\n  &lt;item&gt;\n    &lt;FullName&gt;Name1&lt;/FullName&gt;\n  &lt;/item&gt;\n  &lt;item&gt;\n    &lt;FullName&gt;Name2&lt;/FullName&gt;\n  &lt;/item&gt;\n&lt;/List&gt;\n</code></pre>\n<p>And such JSON:</p>\n<pre><code>[{&quot;FullName&quot;:&quot;Name1&quot;},{&quot;FullName&quot;:&quot;Name2&quot;}]\n</code></pre>\n<p>This structure almost suits me.</p>\n<p>springdoc generate such openapi code:</p>\n<pre><code>{\n    &quot;/test&quot; : {\n        &quot;get&quot; : {\n            &quot;tags&quot; : [\n                &quot;test-controller&quot;\n            ],\n            &quot;operationId&quot; : &quot;getPeople&quot;,\n            &quot;responses&quot; : {\n                &quot;200&quot; : {\n                    &quot;description&quot; : &quot;OK&quot;,\n                    &quot;content&quot; : {\n                        &quot;application/json&quot; : {\n                            &quot;schema&quot; : {\n                                &quot;type&quot; : &quot;array&quot;,\n                                &quot;items&quot; : {\n                                    &quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\n                                }\n                            }\n                        },\n                        &quot;application/xml&quot; : {\n                            &quot;schema&quot; : {\n                                &quot;type&quot; : &quot;array&quot;,\n                                &quot;items&quot; : {\n                                    &quot;$ref&quot; : &quot;#/components/schemas/Person&quot;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    },\n    &quot;components&quot; : {\n        &quot;schemas&quot; : {\n            &quot;Person&quot; : {\n                &quot;type&quot; : &quot;object&quot;,\n                &quot;properties&quot; : {\n                    &quot;fullName&quot; : {\n                        &quot;type&quot; : &quot;string&quot;\n                    }\n                },\n                &quot;description&quot; : &quot;&quot;\n            }\n        }\n    }\n}\n</code></pre>\n<ol>\n<li><p>There is no problems with JSON, but for XML format there are no mentions of <em>List</em>/<em>item</em> tags and error in swagger-ui for XML example &quot;XML example cannot be generated; root element name is undefined&quot;. What is the right thing to do if the REST-method must return a list and openapi documentation is needed?</p>\n</li>\n<li><p>How to change the names of the <em>List</em> and <em>item</em> XML tags?</p>\n</li>\n</ol>\n<p>I tried to extend ArrayList, make the List&lt;Person&gt; a field of my class, use various annotations, but did not achieve the desired effect (subject to saving the desired response structure).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":3438670,"reputation":812,"user_id":2881114,"accept_rate":83,"display_name":"tourniquet_grab"},"score":0,"creation_date":1427174017,"post_id":29225415,"comment_id":46658751,"body_markdown":"You could use `\\t` if the numbers are not too big.","body":"You could use <code>\\t</code> if the numbers are not too big."}],"answers":[{"tags":[],"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1427174538,"creation_date":1427174110,"answer_id":29225476,"question_id":29225415,"body_markdown":"Use [`format`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format(java.lang.String,%20java.lang.Object...)) like this:\r\n\r\n    System.out.format(&quot;%4d&quot;, table[t][i]);\r\n\r\nThe output then looks like this:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n       1   2   3   4   5   6\r\n       7   8   9  10  11  12\r\n      13  14  15  16  17  18\r\n      19  20  21  22  23  24\r\n      25  26  27  28  29  30\r\n\r\nOr if you prefer to have the numbers aligned to the left:\r\n\r\n    System.out.format(&quot;%-4d&quot;, table[t][i]);\r\n\r\nWhich results in this output:\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    1   2   3   4   5   6   \r\n    7   8   9   10  11  12  \r\n    13  14  15  16  17  18  \r\n    19  20  21  22  23  24  \r\n    25  26  27  28  29  30  ","title":"Java 2d array formatting?","body":"<p>Use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#format(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>format</code></a> like this:</p>\n\n<pre><code>System.out.format(\"%4d\", table[t][i]);\n</code></pre>\n\n<p>The output then looks like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>   1   2   3   4   5   6\n   7   8   9  10  11  12\n  13  14  15  16  17  18\n  19  20  21  22  23  24\n  25  26  27  28  29  30\n</code></pre>\n\n<p>Or if you prefer to have the numbers aligned to the left:</p>\n\n<pre><code>System.out.format(\"%-4d\", table[t][i]);\n</code></pre>\n\n<p>Which results in this output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1   2   3   4   5   6   \n7   8   9   10  11  12  \n13  14  15  16  17  18  \n19  20  21  22  23  24  \n25  26  27  28  29  30  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1319573,"reputation":21851,"user_id":1265660,"accept_rate":75,"display_name":"Masudul"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427174124,"creation_date":1427174124,"answer_id":29225483,"question_id":29225415,"body_markdown":"You should use `printf` instead of `print`\r\n\r\n    System.out.printf(&quot;%3d&quot;, table[t][i]);","title":"Java 2d array formatting?","body":"<p>You should use <code>printf</code> instead of <code>print</code></p>\n\n<pre><code>System.out.printf(\"%3d\", table[t][i]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1427174160,"creation_date":1427174160,"answer_id":29225491,"question_id":29225415,"body_markdown":"Take a look at [`PrintStream#printf`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)) and [`String#format`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)) and [Formatted Strings](http://www.homeandlearn.co.uk/java/java_formatted_strings.html)\r\n\r\nBasically, for each row, each column needs to be formated to allow for a minimum of two spaces...\r\n\r\n    System.printf(&quot;%2d&quot;, table[t][i])\r\n\r\nThe next problem comes from the fact that the proceeding columns need extra space inbetween them ;)\r\n\r\n    System.printf(&quot;%2d%4s&quot;, table[t][i], &quot;&quot;)\r\n\r\nWhich can result in something like...\r\n\r\n     1     2     3     4     5     6    \r\n     7     8     9    10    11    12    \r\n    13    14    15    16    17    18    \r\n    19    20    21    22    23    24    \r\n    25    26    27    28    29    30    ","title":"Java 2d array formatting?","body":"<p>Take a look at <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#printf(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>PrintStream#printf</code></a> and <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...)\" rel=\"nofollow\"><code>String#format</code></a> and <a href=\"http://www.homeandlearn.co.uk/java/java_formatted_strings.html\" rel=\"nofollow\">Formatted Strings</a></p>\n\n<p>Basically, for each row, each column needs to be formated to allow for a minimum of two spaces...</p>\n\n<pre><code>System.printf(\"%2d\", table[t][i])\n</code></pre>\n\n<p>The next problem comes from the fact that the proceeding columns need extra space inbetween them ;)</p>\n\n<pre><code>System.printf(\"%2d%4s\", table[t][i], \"\")\n</code></pre>\n\n<p>Which can result in something like...</p>\n\n<pre><code> 1     2     3     4     5     6    \n 7     8     9    10    11    12    \n13    14    15    16    17    18    \n19    20    21    22    23    24    \n25    26    27    28    29    30    \n</code></pre>\n"},{"tags":[],"owner":{"account_id":28801485,"reputation":1,"user_id":22058287,"display_name":"Omar Alnhdi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686652732,"creation_date":1686539145,"answer_id":76453423,"question_id":29225415,"body_markdown":"You can take my handle\r\n\r\n```\r\nfor (t = 0; t &lt; 5; t++) {\r\n  for (i=0;i &lt; 6; i++) {\r\n    table[t][i] = (t*6)+i+1;\r\n    if (table[t][i] &gt; 9)\r\n      System.out.print(table[t][i] + &quot; &quot;);\r\n    else\r\n      System.out.print(table[t][i] + &quot;  &quot;);\r\n  }\r\n  System.out.println();\r\n}\r\n```","title":"Java 2d array formatting?","body":"<p>You can take my handle</p>\n<pre><code>for (t = 0; t &lt; 5; t++) {\n  for (i=0;i &lt; 6; i++) {\n    table[t][i] = (t*6)+i+1;\n    if (table[t][i] &gt; 9)\n      System.out.print(table[t][i] + &quot; &quot;);\n    else\n      System.out.print(table[t][i] + &quot;  &quot;);\n  }\n  System.out.println();\n}\n</code></pre>\n"}],"owner":{"account_id":5377561,"reputation":61,"user_id":4283897,"accept_rate":100,"display_name":"madauewo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4557,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":29225476,"answer_count":4,"score":1,"last_activity_date":1686652732,"creation_date":1427173839,"question_id":29225415,"body_markdown":"I there, I am having problems formatting this 2d array. I was thinking about doing system.out.printf, but every time I do something like maybe %2f or something like that it doesn&#39;t work.\r\n\r\n\r\n      public static void main(String[] args) {\r\n        int t,i;\r\n        int[][] table = new int[5][6];\r\n        \r\n        for (t = 0; t &lt; 5; t++) {\r\n            for (i=0;i &lt; 6; i++) {\r\n                table[t][i] = (t*6)+i+1;\r\n                System.out.print(table[t][i] + &quot;  &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        \r\n    }\r\n}\r\n\r\n    This is the output:\r\n    \r\n    1  2  3  4  5  6  \r\n    7  8  9  10  11  12  \r\n    13  14  15  16  17  18  \r\n    19  20  21  22  23  24  \r\n    25  26  27  28  29  30  \r\n\r\nThe output should have the spaces perfectly aligned like this : http://prntscr.com/6kn2pq","title":"Java 2d array formatting?","body":"<p>I there, I am having problems formatting this 2d array. I was thinking about doing system.out.printf, but every time I do something like maybe %2f or something like that it doesn't work.</p>\n\n<pre><code>  public static void main(String[] args) {\n    int t,i;\n    int[][] table = new int[5][6];\n\n    for (t = 0; t &lt; 5; t++) {\n        for (i=0;i &lt; 6; i++) {\n            table[t][i] = (t*6)+i+1;\n            System.out.print(table[t][i] + \"  \");\n        }\n        System.out.println();\n    }\n\n}\n</code></pre>\n\n<p>}</p>\n\n<pre><code>This is the output:\n\n1  2  3  4  5  6  \n7  8  9  10  11  12  \n13  14  15  16  17  18  \n19  20  21  22  23  24  \n25  26  27  28  29  30  \n</code></pre>\n\n<p>The output should have the spaces perfectly aligned like this : <a href=\"http://prntscr.com/6kn2pq\" rel=\"nofollow\">http://prntscr.com/6kn2pq</a></p>\n"},{"tags":["java","api","automation","serenity-bdd"],"comments":[{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1686653348,"post_id":76463536,"comment_id":134825462,"body_markdown":"Where is your second request? Don&#39;t see it. Pls provide full code to reproduce this.","body":"Where is your second request? Don&#39;t see it. Pls provide full code to reproduce this."},{"owner":{"account_id":28490665,"reputation":66,"user_id":21803364,"display_name":"Tamas Demeny"},"score":0,"creation_date":1686655225,"post_id":76463536,"comment_id":134825858,"body_markdown":"@lucas-nguyen-17 I can&#39;t provide second request due to company policy. But any request should produce the same result","body":"@lucas-nguyen-17 I can&#39;t provide second request due to company policy. But any request should produce the same result"},{"owner":{"account_id":10263942,"reputation":5676,"user_id":7574461,"display_name":"lucas-nguyen-17"},"score":0,"creation_date":1686707451,"post_id":76463536,"comment_id":134835055,"body_markdown":"Why don&#39;t you add a random request to demonstrate your problem?","body":"Why don&#39;t you add a random request to demonstrate your problem?"}],"owner":{"account_id":28490665,"reputation":66,"user_id":21803364,"display_name":"Tamas Demeny"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686652532,"creation_date":1686648945,"question_id":76463536,"body_markdown":"So basically in some cases my `lastresponse()` method gets stuck with a previous response and won&#39;t update to a real &#39;last&#39; response.\r\nFor example if I execute this request\r\n`SerenityRest.given() .accept(&quot;*/*&quot;) .header(&quot;X-Api-Key&quot;, &quot;api key&quot;) .when() .get(&quot;https://randommer.io/api/Finance/Iban/&quot;.concat(countryUri)).getBody().as(String.class);`\r\nI get back a random IBAN from the given country. When I make another request after this, and after the second request I call `restAssuredThat( lastResponse -&gt; lastResponse.body(containsString(message)));`\r\nThe `lastResponse` will contain the first requests IBAN, instead of the second requests body. I have encountered this issue with post requests, when I use multipart to upload a file.\r\n\r\nI have tried adding `Thread.sleep()` delays, executing two requests in the same step.\r\n\r\nSo has anyone encountered this? Is there a fix or a workaround?","title":"SerenityRest lastResponse() method returns response from previous response","body":"<p>So basically in some cases my <code>lastresponse()</code> method gets stuck with a previous response and won't update to a real 'last' response.\nFor example if I execute this request\n<code>SerenityRest.given() .accept(&quot;*/*&quot;) .header(&quot;X-Api-Key&quot;, &quot;api key&quot;) .when() .get(&quot;https://randommer.io/api/Finance/Iban/&quot;.concat(countryUri)).getBody().as(String.class);</code>\nI get back a random IBAN from the given country. When I make another request after this, and after the second request I call <code>restAssuredThat( lastResponse -&gt; lastResponse.body(containsString(message)));</code>\nThe <code>lastResponse</code> will contain the first requests IBAN, instead of the second requests body. I have encountered this issue with post requests, when I use multipart to upload a file.</p>\n<p>I have tried adding <code>Thread.sleep()</code> delays, executing two requests in the same step.</p>\n<p>So has anyone encountered this? Is there a fix or a workaround?</p>\n"},{"tags":["java","android","nfc","smartcard","android-anr-dialog"],"comments":[{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686652688,"post_id":76464000,"comment_id":134825307,"body_markdown":"Are you performing the NFC reading on a background thread, or the activity thread? Performing it on the Activity thread would explain the ANRs.","body":"Are you performing the NFC reading on a background thread, or the activity thread? Performing it on the Activity thread would explain the ANRs."},{"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"score":0,"creation_date":1686652838,"post_id":76464000,"comment_id":134825344,"body_markdown":"It uses an NfcAdapter.ReaderCallback and calls a new thread in handler.","body":"It uses an NfcAdapter.ReaderCallback and calls a new thread in handler."},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686653194,"post_id":76464000,"comment_id":134825431,"body_markdown":"And what are you using for the Handler&#39;s backing thead? By &quot;backing thread&quot; i mean - which `Looper` is it using? Are you sure it&#39;s not using the UI thread, since I just see the `new Handler()` - i know it **shouldn&#39;t** default to the UI thread, however try looking at [this answer](https://stackoverflow.com/a/29389627/1101692) and fix your Handler initialization to make sure it&#39;s running on a background thread.","body":"And what are you using for the Handler&#39;s backing thead? By &quot;backing thread&quot; i mean - which <code>Looper</code> is it using? Are you sure it&#39;s not using the UI thread, since I just see the <code>new Handler()</code> - i know it <b>shouldn&#39;t</b> default to the UI thread, however try looking at <a href=\"https://stackoverflow.com/a/29389627/1101692\">this answer</a> and fix your Handler initialization to make sure it&#39;s running on a background thread."},{"owner":{"account_id":2755641,"reputation":8688,"user_id":2373819,"display_name":"Andrew"},"score":0,"creation_date":1686656191,"post_id":76464000,"comment_id":134826101,"body_markdown":"Not sure why you are using both `enableForegroundDispatch` and `enableReaderMode` as really `enableReaderMode` is a newer and better replacement for `enableForegroundDispatch`. Also not sure why you are creating a new thread in `onTagDiscovered` as that is already in it&#39;s own thread. Possibly with all the extra threading you have added, it&#39;s got back to the UI Thread as normally in `onTagDiscovered` you cannot interact with the UI thread and do things like show a dialog.","body":"Not sure why you are using both <code>enableForegroundDispatch</code> and <code>enableReaderMode</code> as really <code>enableReaderMode</code> is a newer and better replacement for <code>enableForegroundDispatch</code>. Also not sure why you are creating a new thread in <code>onTagDiscovered</code> as that is already in it&#39;s own thread. Possibly with all the extra threading you have added, it&#39;s got back to the UI Thread as normally in <code>onTagDiscovered</code> you cannot interact with the UI thread and do things like show a dialog."}],"owner":{"account_id":219520,"reputation":7090,"user_id":476467,"accept_rate":65,"display_name":"thotheolh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686652474,"creation_date":1686652474,"question_id":76464000,"body_markdown":"I am trying to access an ISO-14443-4 NFC tag to read a rather substantial amount of data from the NFC tag and I am getting ANR frequently.\r\n\r\nMy Activity Code:\r\n```\r\npublic class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener, AlertCallbackDialog.AlertDialogListener {\r\n\r\n    private static String username = &quot;&quot;;\r\n    private static String password = &quot;&quot;;\r\n    private static final byte role = Constants.USER_KEYMAN;\r\n    private NfcAdapter nfcAdapter = null;\r\n    private IntentFilter[] intentFiltersArray = null;\r\n    private String[][] techListsArray = null;\r\n    private PendingIntent pendingIntent = null;\r\n    private APDUResult apduRes = null;\r\n    private static Handler handler = new Handler();\r\n    private static Runnable runnable = null;\r\n    private static Context myContext = null;\r\n    private static IsoDep iso14443 = null;\r\n    private static Intent _intent = null;\r\n    public static int READER_FLAGS = NfcAdapter.FLAG_READER_NFC_A | NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK;\r\n    private static PairingCallBack callBack = null;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_card_pairing);\r\n\r\n        myContext = this;\r\n        callBack = new PairingCallBack();\r\n        callBack.setContext(myContext);\r\n\r\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\r\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\r\n        nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\r\n\r\n        if (nfcManager != null) {\r\n            System.out.println(&quot;NFC Manager ready ...&quot;);\r\n        }\r\n\r\n        if (nfcAdapter != null) {\r\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\r\n        }\r\n\r\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\r\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\r\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\r\n\r\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\r\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\r\n            StrictMode.setThreadPolicy(policy);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        Intent intent = new Intent();\r\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\r\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\r\n        if (nfcAdapter != null) {\r\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\r\n            nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\r\n        }\r\n    }\r\n\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        if (nfcAdapter != null) {\r\n            try {\r\n                nfcAdapter.disableForegroundDispatch(this);\r\n                nfcAdapter.disableReaderMode(this);\r\n            } catch (IllegalStateException ex) {\r\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\r\n            }\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void infoDialogCopyDialog() {\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    public static void continueExec() throws InvalidAlgorithmParameterException, InvalidSizeException, NoSuchPaddingException, IllegalBlockSizeException, IOException, NoSuchAlgorithmException, BadPaddingException, InvalidKeyException, ShortBufferException, InvalidParameterSpecException, InvalidKeySpecException, NoSuchProviderException, IllegalFormatException {\r\n        handler.post(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                System.out.println(&quot;Authenticating to card ...&quot;);\r\n                System.out.println(&quot;Card User Role: &quot; + (int) role);\r\n                System.out.println(&quot;Card Username: &quot; + username);\r\n                System.out.println(&quot;Card Secret: &quot; + password);\r\n\r\n                try {\r\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\r\n                        // Login success\r\n                        // DO VERY LONG CARD READING\r\n                        API.readAndStoreNFCUserProfileData();\r\n                    } else {\r\n                        // Login fail\r\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\r\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\r\n                        if (tries != -1) {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, myContext, MainActivity.class);\r\n                        } else {\r\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, myContext, MainActivity.class);\r\n                        }\r\n                    }\r\n//                    SharedResource.getIsoDep().close();\r\n//                    SharedResource.setIsoDep(null);\r\n                } catch (InvalidAlgorithmParameterException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidSizeException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchPaddingException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (ShortBufferException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IllegalBlockSizeException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IOException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchAlgorithmException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidParameterSpecException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidKeySpecException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (BadPaddingException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (InvalidKeyException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (NoSuchProviderException e) {\r\n                    throw new RuntimeException(e);\r\n                } catch (IllegalFormatException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void alertCallbackDialog() {\r\n        System.out.println(&quot;AlertCallbackDialog runs ...&quot;);\r\n    }\r\n}\r\n```\r\n\r\nNFC Callback\r\n\r\n```\r\npublic class PairingCallBack implements NfcAdapter.ReaderCallback {\r\n    Context myContext = null;\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void onTagDiscovered(Tag tag) {\r\n        new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                boolean hasIsoDep = false;\r\n\r\n                if (tag != null) {\r\n                    System.out.println(&quot;New tag found !!!&quot;);\r\n                    System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\r\n                    System.out.println(&quot;\\r\\n&quot;);\r\n                    for (String tagTech : tag.getTechList()) {\r\n                        System.out.println(&quot;Tech: &quot; + tagTech);\r\n                        if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\r\n                            hasIsoDep = true;\r\n                        }\r\n                    }\r\n                } else {\r\n                    System.out.println(&quot;No new tag found !!!&quot;);\r\n                }\r\n\r\n                if (hasIsoDep) {\r\n                    try {\r\n                        IsoDep iso14443 = IsoDep.get(tag);\r\n                        iso14443.connect();\r\n                        iso14443.setTimeout(120000);\r\n                        SharedResource.setIsoDep(iso14443);\r\n                        System.out.println(&quot;Selecting KeyVault applet ...&quot;);\r\n\r\n                        boolean isSuccess = API.adminInit();\r\n                        boolean isContinue = true;\r\n\r\n                        System.out.println(&quot;-- PairingCallBack :: IsSuccess: &quot; + isSuccess);\r\n                        System.out.println(&quot;-- PairingCallBack :: IsContinue: &quot; + isContinue);\r\n\r\n                        if (isSuccess) {\r\n                            if (isContinue) {\r\n\r\n\r\n                                if ((byte) (SharedResource.getHwInfo().getInteractiveCapabilities() &amp; Constants.INTERACT_SCREEN) == Constants.INTERACT_SCREEN) {\r\n                                    System.out.println(&quot;[INF] Found interactive card ...&quot;);\r\n                                    String toShow = &quot;Please verify OTP Code:\\n&quot; + SharedResource.getSessionData().getOtpCode();\r\n                                    String title = &quot;Secure Card Session&quot;;\r\n                                    AlertCallbackDialog dialog = new AlertCallbackDialog(title, toShow, myContext);\r\n                                    dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;aldialog&quot;);\r\n                                } else {\r\n                                    System.out.println(&quot;[INF] Not interactive card ...&quot;);\r\n                                    CardPairingActivity.continueExec();\r\n                                }\r\n\r\n                            }\r\n                        } else {\r\n                            System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\r\n                        }\r\n                    } catch (IOException | InvalidSizeException | InvalidAlgorithmParameterException |\r\n                             NoSuchPaddingException | ShortBufferException | IllegalBlockSizeException |\r\n                             NoSuchAlgorithmException | InvalidParameterSpecException |\r\n                             InvalidKeySpecException | BadPaddingException | InvalidKeyException |\r\n                             NoSuchProviderException ex) {\r\n                        Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\r\n                    } catch (IllegalFormatException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                }\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public void setContext(Context context) {\r\n        myContext = context;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAlert dialog box to display an OTP secure channel code before downloading user profile from card\r\n```\r\npublic class AlertCallbackDialog extends AppCompatDialogFragment {\r\n\r\n    private AlertCallbackDialog.AlertDialogListener listener;\r\n    private String title = &quot;&quot;;\r\n    private String message = &quot;&quot;;\r\n    private View view = null;\r\n\r\n    public AlertCallbackDialog(String title, String message, Context context) {\r\n        this.title = title;\r\n        this.message = message;\r\n    }\r\n\r\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\r\n        System.out.println(&quot;[INF] Creating AlertCallbackDialog ...&quot;);\r\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\r\n        builder.setTitle(title);\r\n        builder.setMessage(message);\r\n        return builder.create();\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.O)\r\n    @Override\r\n    public void onDismiss(@NonNull DialogInterface dialog) {\r\n        super.onDismiss(dialog);\r\n        System.out.println(&quot;[INF] Dismissed AlertCallbackDialog ...&quot;);\r\n        try {\r\n            CardPairingActivity.continueExec();\r\n        } catch (InvalidAlgorithmParameterException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidSizeException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchPaddingException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalBlockSizeException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IOException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchAlgorithmException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (BadPaddingException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidKeyException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (ShortBufferException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidParameterSpecException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (InvalidKeySpecException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (NoSuchProviderException e) {\r\n            throw new RuntimeException(e);\r\n        } catch (IllegalFormatException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onAttach(Context context) {\r\n        super.onAttach(context);\r\n        try {\r\n            System.out.println(&quot;[INF] Attaching AlertCallbackDialog ...&quot;);\r\n            listener = (AlertCallbackDialog.AlertDialogListener) context;\r\n        } catch (ClassCastException e) {\r\n            throw new ClassCastException(context.toString() + &quot; must implement AlertDialogListener&quot;);\r\n        }\r\n    }\r\n\r\n    public interface AlertDialogListener {\r\n        void alertCallbackDialog();\r\n    }\r\n}\r\n```\r\n\r\nI am wondering if there&#39;s something that is causing the ANR to as I have attempted to spawn off a new thread in handler and tried to remove as many things in the activity.","title":"Getting ANR while performing long NFC routines","body":"<p>I am trying to access an ISO-14443-4 NFC tag to read a rather substantial amount of data from the NFC tag and I am getting ANR frequently.</p>\n<p>My Activity Code:</p>\n<pre><code>public class CardPairingActivity extends AppCompatActivity implements InfoDialogCopyDialog.InfoDialogCopyDialogListener, AlertCallbackDialog.AlertDialogListener {\n\n    private static String username = &quot;&quot;;\n    private static String password = &quot;&quot;;\n    private static final byte role = Constants.USER_KEYMAN;\n    private NfcAdapter nfcAdapter = null;\n    private IntentFilter[] intentFiltersArray = null;\n    private String[][] techListsArray = null;\n    private PendingIntent pendingIntent = null;\n    private APDUResult apduRes = null;\n    private static Handler handler = new Handler();\n    private static Runnable runnable = null;\n    private static Context myContext = null;\n    private static IsoDep iso14443 = null;\n    private static Intent _intent = null;\n    public static int READER_FLAGS = NfcAdapter.FLAG_READER_NFC_A | NfcAdapter.FLAG_READER_SKIP_NDEF_CHECK;\n    private static PairingCallBack callBack = null;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_card_pairing);\n\n        myContext = this;\n        callBack = new PairingCallBack();\n        callBack.setContext(myContext);\n\n        NfcManager nfcManager = (NfcManager) getSystemService(Context.NFC_SERVICE);\n        nfcAdapter = NfcAdapter.getDefaultAdapter(this);\n        nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\n\n        if (nfcManager != null) {\n            System.out.println(&quot;NFC Manager ready ...&quot;);\n        }\n\n        if (nfcAdapter != null) {\n            System.out.println(&quot;NFC Adapter ready ...&quot;);\n        }\n\n        pendingIntent = PendingIntent.getActivity(this, 0, new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), PendingIntent.FLAG_MUTABLE);\n        intentFiltersArray = new IntentFilter[]{new IntentFilter(NfcAdapter.ACTION_TECH_DISCOVERED)};\n        techListsArray = new String[][]{new String[]{NfcA.class.getName()}, new String[]{NfcB.class.getName()}, new String[]{IsoDep.class.getName()}};\n\n        if (android.os.Build.VERSION.SDK_INT &gt; 9) {\n            StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();\n            StrictMode.setThreadPolicy(policy);\n        }\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        Intent intent = new Intent();\n        intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);\n        PendingIntent nfcPendingIntent = PendingIntent.getActivity(this, 0, intent, PendingIntent.FLAG_MUTABLE);\n        if (nfcAdapter != null) {\n            nfcAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray, techListsArray);\n            nfcAdapter.enableReaderMode(this, callBack, READER_FLAGS, null);\n        }\n    }\n\n    protected void onPause() {\n        super.onPause();\n\n        if (nfcAdapter != null) {\n            try {\n                nfcAdapter.disableForegroundDispatch(this);\n                nfcAdapter.disableReaderMode(this);\n            } catch (IllegalStateException ex) {\n                Log.e(&quot;ATHTAG&quot;, &quot;Error disabling NFC foreground dispatch&quot;, ex);\n            }\n        }\n    }\n\n    @Override\n    public void infoDialogCopyDialog() {\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    public static void continueExec() throws InvalidAlgorithmParameterException, InvalidSizeException, NoSuchPaddingException, IllegalBlockSizeException, IOException, NoSuchAlgorithmException, BadPaddingException, InvalidKeyException, ShortBufferException, InvalidParameterSpecException, InvalidKeySpecException, NoSuchProviderException, IllegalFormatException {\n        handler.post(new Runnable() {\n            @Override\n            public void run() {\n                System.out.println(&quot;Authenticating to card ...&quot;);\n                System.out.println(&quot;Card User Role: &quot; + (int) role);\n                System.out.println(&quot;Card Username: &quot; + username);\n                System.out.println(&quot;Card Secret: &quot; + password);\n\n                try {\n                    if (API.cardAuthenticate(Constants.USER_KEYMAN, username, password.toCharArray())) {\n                        // Login success\n                        // DO VERY LONG CARD READING\n                        API.readAndStoreNFCUserProfileData();\n                    } else {\n                        // Login fail\n                        System.out.println(&quot;[ERR] Card Login FAILED ...&quot;);\n                        int tries = API.adminCardLoginTriesRemaining(role, null);\n                        if (tries != -1) {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed. \\r\\nLogin Retries Left: &quot; + tries, &quot;OK&quot;, myContext, MainActivity.class);\n                        } else {\n                            SharedResource.showNotificationDialog(&quot;Card Pairing Failed&quot;, &quot;Card Login Failed.&quot;, &quot;OK&quot;, myContext, MainActivity.class);\n                        }\n                    }\n//                    SharedResource.getIsoDep().close();\n//                    SharedResource.setIsoDep(null);\n                } catch (InvalidAlgorithmParameterException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidSizeException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchPaddingException e) {\n                    throw new RuntimeException(e);\n                } catch (ShortBufferException e) {\n                    throw new RuntimeException(e);\n                } catch (IllegalBlockSizeException e) {\n                    throw new RuntimeException(e);\n                } catch (IOException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchAlgorithmException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidParameterSpecException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidKeySpecException e) {\n                    throw new RuntimeException(e);\n                } catch (BadPaddingException e) {\n                    throw new RuntimeException(e);\n                } catch (InvalidKeyException e) {\n                    throw new RuntimeException(e);\n                } catch (NoSuchProviderException e) {\n                    throw new RuntimeException(e);\n                } catch (IllegalFormatException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        });\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void alertCallbackDialog() {\n        System.out.println(&quot;AlertCallbackDialog runs ...&quot;);\n    }\n}\n</code></pre>\n<p>NFC Callback</p>\n<pre><code>public class PairingCallBack implements NfcAdapter.ReaderCallback {\n    Context myContext = null;\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void onTagDiscovered(Tag tag) {\n        new Thread(new Runnable() {\n            @Override\n            public void run() {\n                boolean hasIsoDep = false;\n\n                if (tag != null) {\n                    System.out.println(&quot;New tag found !!!&quot;);\n                    System.out.println(&quot;Tag ID: &quot; + BinUtils.toHexString(tag.getId()));\n                    System.out.println(&quot;\\r\\n&quot;);\n                    for (String tagTech : tag.getTechList()) {\n                        System.out.println(&quot;Tech: &quot; + tagTech);\n                        if (tagTech.equals(&quot;android.nfc.tech.IsoDep&quot;)) {\n                            hasIsoDep = true;\n                        }\n                    }\n                } else {\n                    System.out.println(&quot;No new tag found !!!&quot;);\n                }\n\n                if (hasIsoDep) {\n                    try {\n                        IsoDep iso14443 = IsoDep.get(tag);\n                        iso14443.connect();\n                        iso14443.setTimeout(120000);\n                        SharedResource.setIsoDep(iso14443);\n                        System.out.println(&quot;Selecting KeyVault applet ...&quot;);\n\n                        boolean isSuccess = API.adminInit();\n                        boolean isContinue = true;\n\n                        System.out.println(&quot;-- PairingCallBack :: IsSuccess: &quot; + isSuccess);\n                        System.out.println(&quot;-- PairingCallBack :: IsContinue: &quot; + isContinue);\n\n                        if (isSuccess) {\n                            if (isContinue) {\n\n\n                                if ((byte) (SharedResource.getHwInfo().getInteractiveCapabilities() &amp; Constants.INTERACT_SCREEN) == Constants.INTERACT_SCREEN) {\n                                    System.out.println(&quot;[INF] Found interactive card ...&quot;);\n                                    String toShow = &quot;Please verify OTP Code:\\n&quot; + SharedResource.getSessionData().getOtpCode();\n                                    String title = &quot;Secure Card Session&quot;;\n                                    AlertCallbackDialog dialog = new AlertCallbackDialog(title, toShow, myContext);\n                                    dialog.show(((AppCompatActivity) myContext).getSupportFragmentManager(), &quot;aldialog&quot;);\n                                } else {\n                                    System.out.println(&quot;[INF] Not interactive card ...&quot;);\n                                    CardPairingActivity.continueExec();\n                                }\n\n                            }\n                        } else {\n                            System.out.println(&quot;[ERR] Failed to select applet !!!&quot;);\n                        }\n                    } catch (IOException | InvalidSizeException | InvalidAlgorithmParameterException |\n                             NoSuchPaddingException | ShortBufferException | IllegalBlockSizeException |\n                             NoSuchAlgorithmException | InvalidParameterSpecException |\n                             InvalidKeySpecException | BadPaddingException | InvalidKeyException |\n                             NoSuchProviderException ex) {\n                        Log.e(&quot;ATHTAG&quot;, &quot;Error found during tag comms&quot;, ex);\n                    } catch (IllegalFormatException e) {\n                        throw new RuntimeException(e);\n                    }\n                }\n            }\n        }).start();\n    }\n\n    public void setContext(Context context) {\n        myContext = context;\n    }\n\n}\n</code></pre>\n<p>Alert dialog box to display an OTP secure channel code before downloading user profile from card</p>\n<pre><code>public class AlertCallbackDialog extends AppCompatDialogFragment {\n\n    private AlertCallbackDialog.AlertDialogListener listener;\n    private String title = &quot;&quot;;\n    private String message = &quot;&quot;;\n    private View view = null;\n\n    public AlertCallbackDialog(String title, String message, Context context) {\n        this.title = title;\n        this.message = message;\n    }\n\n    public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {\n        System.out.println(&quot;[INF] Creating AlertCallbackDialog ...&quot;);\n        AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());\n        builder.setTitle(title);\n        builder.setMessage(message);\n        return builder.create();\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.O)\n    @Override\n    public void onDismiss(@NonNull DialogInterface dialog) {\n        super.onDismiss(dialog);\n        System.out.println(&quot;[INF] Dismissed AlertCallbackDialog ...&quot;);\n        try {\n            CardPairingActivity.continueExec();\n        } catch (InvalidAlgorithmParameterException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidSizeException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchPaddingException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalBlockSizeException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(e);\n        } catch (BadPaddingException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidKeyException e) {\n            throw new RuntimeException(e);\n        } catch (ShortBufferException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidParameterSpecException e) {\n            throw new RuntimeException(e);\n        } catch (InvalidKeySpecException e) {\n            throw new RuntimeException(e);\n        } catch (NoSuchProviderException e) {\n            throw new RuntimeException(e);\n        } catch (IllegalFormatException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Override\n    public void onAttach(Context context) {\n        super.onAttach(context);\n        try {\n            System.out.println(&quot;[INF] Attaching AlertCallbackDialog ...&quot;);\n            listener = (AlertCallbackDialog.AlertDialogListener) context;\n        } catch (ClassCastException e) {\n            throw new ClassCastException(context.toString() + &quot; must implement AlertDialogListener&quot;);\n        }\n    }\n\n    public interface AlertDialogListener {\n        void alertCallbackDialog();\n    }\n}\n</code></pre>\n<p>I am wondering if there's something that is causing the ANR to as I have attempted to spawn off a new thread in handler and tried to remove as many things in the activity.</p>\n"},{"tags":["java","apache-spark","spark-streaming","spark-structured-streaming"],"answers":[{"tags":[],"owner":{"account_id":21426549,"reputation":423,"user_id":15783777,"display_name":"catGPT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686652013,"creation_date":1686652013,"answer_id":76463938,"question_id":76463396,"body_markdown":"Write groupby in this way\r\n\r\n```\r\n.groupBy(\r\n     window(col(&quot;timestamp&quot;),&quot;5 minutes&quot;),\r\n     col(&quot;value&quot;)\r\n).count();","title":"Watermark not showing correct output in spark","body":"<p>Write groupby in this way</p>\n<pre><code>.groupBy(\n     window(col(&quot;timestamp&quot;),&quot;5 minutes&quot;),\n     col(&quot;value&quot;)\n).count();\n</code></pre>\n"}],"owner":{"account_id":21426549,"reputation":423,"user_id":15783777,"display_name":"catGPT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76463938,"answer_count":1,"score":1,"last_activity_date":1686652013,"creation_date":1686647861,"question_id":76463396,"body_markdown":"I am sending streaming data to spark using netcat server:\r\n```\r\nnc -lk 9999\r\n```\r\nI am sending data in following format:\r\n```\r\nTime,number\r\n```\r\nIn spark, I am splitting them and performing a groupby operation. Here is my code:\r\n```\r\npackage org.example;\r\n\r\nimport org.apache.spark.sql.Dataset;\r\nimport org.apache.spark.sql.Row;\r\nimport org.apache.spark.sql.SparkSession;\r\nimport org.apache.spark.sql.*;\r\nimport org.apache.spark.sql.streaming.StreamingQuery;\r\nimport org.apache.spark.sql.streaming.StreamingQueryException;\r\n\r\nimport java.util.concurrent.TimeoutException;\r\nimport static org.apache.spark.sql.functions.*;\r\nimport org.apache.spark.sql.streaming.Trigger;\r\n\r\n\r\npublic class SampleProgram {\r\n    public static void main(String args[]) {\r\n        SparkSession spark = SparkSession\r\n                .builder()\r\n                .appName(&quot;Spark-Kafka-Integration&quot;)\r\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\r\n                .getOrCreate();\r\n\r\n        spark.sparkContext().setLogLevel(&quot;ERROR&quot;);\r\n\r\n        Dataset&lt;Row&gt; lines = spark\r\n                .readStream()\r\n                .format(&quot;socket&quot;)\r\n                .option(&quot;host&quot;, &quot;localhost&quot;)\r\n                .option(&quot;port&quot;, 9999)\r\n                .load();\r\n\r\n        lines.printSchema();\r\n\r\n       Dataset&lt;Row&gt; temp_data = lines.selectExpr(&quot;split(value,&#39;,&#39;)[0] as timestamp&quot;,&quot;split(value,&#39;,&#39;)[1] as value&quot;);\r\n       Dataset&lt;Row&gt; data = temp_data.selectExpr(&quot;CAST(timestamp AS TIMESTAMP)&quot;, &quot;CAST(value AS INT)&quot;);\r\n\r\n        Dataset&lt;Row&gt; windowedCounts = data\r\n                .withWatermark(&quot;timestamp&quot;, &quot;10 minutes&quot;)\r\n                .groupBy(\r\n                    functions.window(data.col(&quot;timestamp&quot;), &quot;5 minutes&quot;),\r\n                        col(&quot;value&quot;)\r\n                ) .count();\r\n\r\n        StreamingQuery query = null;\r\n        try {\r\n            query = windowedCounts.writeStream()\r\n                    .outputMode(&quot;update&quot;)\r\n                    .option(&quot;truncate&quot;, &quot;false&quot;)\r\n                    .format(&quot;console&quot;)\r\n                    .trigger(Trigger.ProcessingTime(&quot; 45 seconds&quot;))\r\n                    .start();\r\n        } catch (TimeoutException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n        try {\r\n            query.awaitTermination();\r\n        } catch (StreamingQueryException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n\r\n\r\n    }\r\n}\r\n\r\n```\r\nThe issue which I am facing is this -\r\n\r\nWhen I give the input, say, 10:00:00,5 it gives this output.\r\n\r\n[![Output given][1]][1]\r\n\r\n\r\nNow, at this point of time, max event time is 10:00:00 and I have specified watermark as 10 minutes, so any event before (10:00:00-00:10:00) i.e. 09:50:00 should be rejected. However, when I give input say 09:48:00,10 it gives this output - \r\n\r\n[![output given][2]][2]\r\n\r\n\r\nWhich seems incorrect to me because the data is already too late, it should be rejected by spark, but spark is considering it. What am I missing here ?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nrwoT.png\r\n  [2]: https://i.stack.imgur.com/0q5nI.png","title":"Watermark not showing correct output in spark","body":"<p>I am sending streaming data to spark using netcat server:</p>\n<pre><code>nc -lk 9999\n</code></pre>\n<p>I am sending data in following format:</p>\n<pre><code>Time,number\n</code></pre>\n<p>In spark, I am splitting them and performing a groupby operation. Here is my code:</p>\n<pre><code>package org.example;\n\nimport org.apache.spark.sql.Dataset;\nimport org.apache.spark.sql.Row;\nimport org.apache.spark.sql.SparkSession;\nimport org.apache.spark.sql.*;\nimport org.apache.spark.sql.streaming.StreamingQuery;\nimport org.apache.spark.sql.streaming.StreamingQueryException;\n\nimport java.util.concurrent.TimeoutException;\nimport static org.apache.spark.sql.functions.*;\nimport org.apache.spark.sql.streaming.Trigger;\n\n\npublic class SampleProgram {\n    public static void main(String args[]) {\n        SparkSession spark = SparkSession\n                .builder()\n                .appName(&quot;Spark-Kafka-Integration&quot;)\n                .config(&quot;spark.master&quot;, &quot;local&quot;)\n                .getOrCreate();\n\n        spark.sparkContext().setLogLevel(&quot;ERROR&quot;);\n\n        Dataset&lt;Row&gt; lines = spark\n                .readStream()\n                .format(&quot;socket&quot;)\n                .option(&quot;host&quot;, &quot;localhost&quot;)\n                .option(&quot;port&quot;, 9999)\n                .load();\n\n        lines.printSchema();\n\n       Dataset&lt;Row&gt; temp_data = lines.selectExpr(&quot;split(value,',')[0] as timestamp&quot;,&quot;split(value,',')[1] as value&quot;);\n       Dataset&lt;Row&gt; data = temp_data.selectExpr(&quot;CAST(timestamp AS TIMESTAMP)&quot;, &quot;CAST(value AS INT)&quot;);\n\n        Dataset&lt;Row&gt; windowedCounts = data\n                .withWatermark(&quot;timestamp&quot;, &quot;10 minutes&quot;)\n                .groupBy(\n                    functions.window(data.col(&quot;timestamp&quot;), &quot;5 minutes&quot;),\n                        col(&quot;value&quot;)\n                ) .count();\n\n        StreamingQuery query = null;\n        try {\n            query = windowedCounts.writeStream()\n                    .outputMode(&quot;update&quot;)\n                    .option(&quot;truncate&quot;, &quot;false&quot;)\n                    .format(&quot;console&quot;)\n                    .trigger(Trigger.ProcessingTime(&quot; 45 seconds&quot;))\n                    .start();\n        } catch (TimeoutException e) {\n            throw new RuntimeException(e);\n        }\n\n        try {\n            query.awaitTermination();\n        } catch (StreamingQueryException e) {\n            throw new RuntimeException(e);\n        }\n\n\n    }\n}\n\n</code></pre>\n<p>The issue which I am facing is this -</p>\n<p>When I give the input, say, 10:00:00,5 it gives this output.</p>\n<p><a href=\"https://i.stack.imgur.com/nrwoT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nrwoT.png\" alt=\"Output given\" /></a></p>\n<p>Now, at this point of time, max event time is 10:00:00 and I have specified watermark as 10 minutes, so any event before (10:00:00-00:10:00) i.e. 09:50:00 should be rejected. However, when I give input say 09:48:00,10 it gives this output -</p>\n<p><a href=\"https://i.stack.imgur.com/0q5nI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0q5nI.png\" alt=\"output given\" /></a></p>\n<p>Which seems incorrect to me because the data is already too late, it should be rejected by spark, but spark is considering it. What am I missing here ?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686336369,"post_id":76442835,"comment_id":134790068,"body_markdown":"What about `javac -version`?","body":"What about <code>javac -version</code>?"},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1686336628,"post_id":76442835,"comment_id":134790113,"body_markdown":"@g00se I have updated answer: 17.0.6","body":"@g00se I have updated answer: 17.0.6"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686341250,"post_id":76442835,"comment_id":134790839,"body_markdown":"Strange. Personally I don&#39;t do Gradle but somehow it *seems* a compiler (or runtime) &lt; 17 is being used","body":"Strange. Personally I don&#39;t do Gradle but somehow it <i>seems</i> a compiler (or runtime) &lt; 17 is being used"},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":3,"creation_date":1686356697,"post_id":76442835,"comment_id":134792359,"body_markdown":"Your problem is that you are using Spring Boot 2.2.4 with Java 17. Either downgrade your Java version, or upgrade your Spring Boot version. [From this accepted SO answer](https://stackoverflow.com/a/75503865/2985643): _&quot;Spring Boot 2.5 is minimal version that supports JRE 17.&quot;_ There is probably a helpful matrix documenting the JDKs supported/required for each Spring Boot version somewhere, but I can&#39;t find it.","body":"Your problem is that you are using Spring Boot 2.2.4 with Java 17. Either downgrade your Java version, or upgrade your Spring Boot version. <a href=\"https://stackoverflow.com/a/75503865/2985643\">From this accepted SO answer</a>: <i>&quot;Spring Boot 2.5 is minimal version that supports JRE 17.&quot;</i> There is probably a helpful matrix documenting the JDKs supported/required for each Spring Boot version somewhere, but I can&#39;t find it."},{"owner":{"account_id":3576533,"reputation":16716,"user_id":2985643,"accept_rate":40,"display_name":"skomisa"},"score":2,"creation_date":1686357188,"post_id":76442835,"comment_id":134792389,"body_markdown":"...Also, I couldn&#39;t find release notes specific to release 2.2.4, but I did find this in [the Spring Boot documentation for 2.2.x](https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/getting-started.html#getting-started.system-requirements): _&quot;Spring Boot 2.2.13.RELEASE requires Java 8 and is compatible up to Java 15 (included).&quot;_ So you definitely can&#39;t use a JDK &gt;= 15 with 2.2.4, and it might even be lower than 15.","body":"...Also, I couldn&#39;t find release notes specific to release 2.2.4, but I did find this in <a href=\"https://docs.spring.io/spring-boot/docs/2.2.x/reference/html/getting-started.html#getting-started.system-requirements\" rel=\"nofollow noreferrer\">the Spring Boot documentation for 2.2.x</a>: <i>&quot;Spring Boot 2.2.13.RELEASE requires Java 8 and is compatible up to Java 15 (included).&quot;</i> So you definitely can&#39;t use a JDK &gt;= 15 with 2.2.4, and it might even be lower than 15."},{"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"score":0,"creation_date":1686572482,"post_id":76442835,"comment_id":134812380,"body_markdown":"@skomisa You are right. I had updated spring-framework version to 2.7.3 and now all works well.","body":"@skomisa You are right. I had updated spring-framework version to 2.7.3 and now all works well."},{"owner":{"account_id":371244,"reputation":443,"user_id":17825391,"display_name":"user213769"},"score":0,"creation_date":1689796595,"post_id":76442835,"comment_id":135266090,"body_markdown":"Does this answer your question? [What minimal Spring Boot 2.x version can run for sure on Java 17?](https://stackoverflow.com/questions/75503517/what-minimal-spring-boot-2-x-version-can-run-for-sure-on-java-17)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75503517/what-minimal-spring-boot-2-x-version-can-run-for-sure-on-java-17\">What minimal Spring Boot 2.x version can run for sure on Java 17?</a>"}],"answers":[{"tags":[],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686651979,"creation_date":1686651979,"answer_id":76463935,"question_id":76442835,"body_markdown":"Since I used an example to investigate the node and npm integration to the spring project I used the same spring-framework version as in their repository (2.2.4). But I didn&#39;t consider that this version isn&#39;t compatible with Java 17. Thanks to @skomisa tip I only updated the spring version to 2.7.3 and it all. \r\n\r\n```\r\nplugins {\r\n    id &#39;org.springframework.boot&#39; version &#39;2.7.3&#39;\r\n    id &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n    id &#39;java&#39;\r\n}\r\n```","title":"Unsupported class file major version 61 with Java 17 and spring-framework 2.2.4","body":"<p>Since I used an example to investigate the node and npm integration to the spring project I used the same spring-framework version as in their repository (2.2.4). But I didn't consider that this version isn't compatible with Java 17. Thanks to @skomisa tip I only updated the spring version to 2.7.3 and it all.</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.3'\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'java'\n}\n</code></pre>\n"}],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1103,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76463935,"answer_count":1,"score":-2,"last_activity_date":1686651979,"creation_date":1686335195,"question_id":76442835,"body_markdown":"I am developing a spring-boot project.\r\nThis project should be integrated with React, so, from any reasons I have to use exactly 2.2.4 spring-boot. But in this case, I can&#39;t build project because I am receiving error Unsupported class file major version 61.\r\n\r\nSo, my gradle.build:\r\n\r\n```groovy\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.2.4.RELEASE&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.1.0&#39;\r\n}\r\n\r\ntasks.withType(JavaCompile) {\r\n\tsourceCompatibility = &#39;17&#39;\r\n\ttargetCompatibility = &#39;17&#39;\r\n}\r\n\r\ngroup = &#39;com.hrzc&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\next {\r\n\tlombok_version = &#39;1.18.24&#39;\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\truntimeOnly &#39;com.h2database:h2&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\r\n\t//lombok\r\n\tcompileOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n\truntimeOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n\tannotationProcessor &quot;org.projectlombok:lombok:${lombok_version}&quot;\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n\r\n```\r\n\r\nI use java 17:\r\n`java --version`:\r\n\r\n&gt; openjdk 17.0.6 2023-01-17 LTS OpenJDK Runtime Environment  \r\n&gt; Corretto-17.0.6.10.1 (build 17.0.6+10-LTS) OpenJDK 64-Bit Server VM  \r\n&gt; Corretto-17.0.6.10.1 (build 17.0.6+10-LTS, mixed mode, sharing)\r\n\r\n`javac --version`:\r\n\r\n&gt; javac 17.0.6\r\n\r\nAnd gradle 7.5:\r\n\r\n`gradle --version`:\r\n\r\n&gt; Gradle 7.5\r\n&gt; \r\n&gt; \r\n&gt; Build time:   2022-07-14 12:48:15 UTC Revision:    \r\n&gt; c7db7b958189ad2b0c1472b6fe663e6d654a5103  \r\n&gt;   \r\n&gt; Kotlin:       1.6.21 Groovy:       3.0.10 Ant:          Apache Ant(TM)  \r\n&gt; version 1.10.11 compiled on July 10 2021 JVM:          17.0.6  \r\n&gt; (Amazon.com Inc. 17.0.6+10-LTS) OS:           Windows 10 10.0 amd64  \r\n\r\n----\r\n\r\nWhy do I am receiving error:\r\n\r\nUnsupported class file major version 61\r\n\r\n","title":"Unsupported class file major version 61 with Java 17 and spring-framework 2.2.4","body":"<p>I am developing a spring-boot project.\nThis project should be integrated with React, so, from any reasons I have to use exactly 2.2.4 spring-boot. But in this case, I can't build project because I am receiving error Unsupported class file major version 61.</p>\n<p>So, my gradle.build:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.2.4.RELEASE'\n    id 'io.spring.dependency-management' version '1.1.0'\n}\n\ntasks.withType(JavaCompile) {\n    sourceCompatibility = '17'\n    targetCompatibility = '17'\n}\n\ngroup = 'com.hrzc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    lombok_version = '1.18.24'\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-rest'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    runtimeOnly 'com.h2database:h2'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n\n    //lombok\n    compileOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\n    runtimeOnly &quot;org.projectlombok:lombok:${lombok_version}&quot;\n    annotationProcessor &quot;org.projectlombok:lombok:${lombok_version}&quot;\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\n</code></pre>\n<p>I use java 17:\n<code>java --version</code>:</p>\n<blockquote>\n<p>openjdk 17.0.6 2023-01-17 LTS OpenJDK Runtime Environment<br />\nCorretto-17.0.6.10.1 (build 17.0.6+10-LTS) OpenJDK 64-Bit Server VM<br />\nCorretto-17.0.6.10.1 (build 17.0.6+10-LTS, mixed mode, sharing)</p>\n</blockquote>\n<p><code>javac --version</code>:</p>\n<blockquote>\n<p>javac 17.0.6</p>\n</blockquote>\n<p>And gradle 7.5:</p>\n<p><code>gradle --version</code>:</p>\n<blockquote>\n<p>Gradle 7.5</p>\n<p>Build time:   2022-07-14 12:48:15 UTC Revision:<br />\nc7db7b958189ad2b0c1472b6fe663e6d654a5103</p>\n<p>Kotlin:       1.6.21 Groovy:       3.0.10 Ant:          Apache Ant(TM)<br />\nversion 1.10.11 compiled on July 10 2021 JVM:          17.0.6<br />\n(Amazon.com Inc. 17.0.6+10-LTS) OS:           Windows 10 10.0 amd64</p>\n</blockquote>\n<hr />\n<p>Why do I am receiving error:</p>\n<p>Unsupported class file major version 61</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2006972,"reputation":43182,"user_id":1796579,"display_name":"Henry"},"score":0,"creation_date":1618995809,"post_id":67192456,"comment_id":118768666,"body_markdown":"You can, but it will most likely be slower than a native library.","body":"You can, but it will most likely be slower than a native library."},{"owner":{"account_id":2139538,"reputation":42501,"user_id":1898563,"accept_rate":78,"display_name":"Michael"},"score":0,"creation_date":1618996416,"post_id":67192456,"comment_id":118768905,"body_markdown":"You can do anything in any programming language, given sufficient effort. Are you willing to write your own codec? Probably not","body":"You can do anything in any programming language, given sufficient effort. Are you willing to write your own codec? Probably not"}],"answers":[{"tags":[],"owner":{"account_id":12869869,"reputation":1426,"user_id":9308731,"display_name":"CrackerKSR"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686651939,"creation_date":1664014936,"answer_id":73836456,"question_id":67192456,"body_markdown":"There is a [git repo][1] which encode decodes webp with animation support but It does not support the transparent background yet. I had to set image background as solid color to use those image for encode decode.\r\n\r\n\r\nTo make changes in this project or add alpha channel support (transparency) you should learn about [googl&#39;s webp container specifications][2]\r\n\r\nPS: I have fixed the alpha channel issue and published to github and jitpack/maven. https://github.com/KishorJena/Webp_Transcoder\r\n\r\n\r\n  [1]: https://github.com/b4rtaz/android-webp-encoder\r\n  [2]: https://developers.google.com/speed/webp/docs/riff_container","title":"Can you encode/decode image into WebP in Pure Java without any native library?","body":"<p>There is a <a href=\"https://github.com/b4rtaz/android-webp-encoder\" rel=\"nofollow noreferrer\">git repo</a> which encode decodes webp with animation support but It does not support the transparent background yet. I had to set image background as solid color to use those image for encode decode.</p>\n<p>To make changes in this project or add alpha channel support (transparency) you should learn about <a href=\"https://developers.google.com/speed/webp/docs/riff_container\" rel=\"nofollow noreferrer\">googl's webp container specifications</a></p>\n<p>PS: I have fixed the alpha channel issue and published to github and jitpack/maven. <a href=\"https://github.com/KishorJena/Webp_Transcoder\" rel=\"nofollow noreferrer\">https://github.com/KishorJena/Webp_Transcoder</a></p>\n"}],"owner":{"account_id":18436169,"reputation":991,"user_id":13429959,"display_name":"Fireburn"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1686651939,"creation_date":1618995242,"question_id":67192456,"body_markdown":"Can you encode/decode image into WebP in Pure Java without any native library? \r\n\r\nWhat I&#39;ve seen are implementations that use external library, either embedded or otherwise to the library. \r\n","title":"Can you encode/decode image into WebP in Pure Java without any native library?","body":"<p>Can you encode/decode image into WebP in Pure Java without any native library?</p>\n<p>What I've seen are implementations that use external library, either embedded or otherwise to the library.</p>\n"},{"tags":["java","android","android-service","android-permissions"],"comments":[{"owner":{"account_id":10239293,"reputation":702,"user_id":7557205,"display_name":"Aswin P Ashok"},"score":1,"creation_date":1578906016,"post_id":59645936,"comment_id":105577692,"body_markdown":"https://stackoverflow.com/a/40355440/7557205 Check this answer","body":"<a href=\"https://stackoverflow.com/a/40355440/7557205\">stackoverflow.com/a/40355440/7557205</a> Check this answer"},{"owner":{"account_id":10239293,"reputation":702,"user_id":7557205,"display_name":"Aswin P Ashok"},"score":1,"creation_date":1578906204,"post_id":59645936,"comment_id":105577778,"body_markdown":"Does this answer your question? [How to programmatically grant the &quot;draw over other apps&quot; permission in android?](https://stackoverflow.com/questions/40355344/how-to-programmatically-grant-the-draw-over-other-apps-permission-in-android)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40355344/how-to-programmatically-grant-the-draw-over-other-apps-permission-in-android\">How to programmatically grant the &quot;draw over other apps&quot; permission in android?</a>"},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1578989303,"post_id":59645936,"comment_id":105608754,"body_markdown":"Sorry @AswinPAshok, I am using the above solution already, but that is not what I am looking for. Any how thank you so much for the reply. :) I have edited the question with an image for better clarity.","body":"Sorry @AswinPAshok, I am using the above solution already, but that is not what I am looking for. Any how thank you so much for the reply. :) I have edited the question with an image for better clarity."},{"owner":{"account_id":3045053,"reputation":11928,"user_id":2580975,"accept_rate":71,"display_name":"Shayan Pourvatan"},"score":0,"creation_date":1580636222,"post_id":59645936,"comment_id":106156328,"body_markdown":"@SidharthMA Did you got any solution for it?","body":"@SidharthMA Did you got any solution for it?"},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1580724645,"post_id":59645936,"comment_id":106178027,"body_markdown":"Hi @ShayanPourvatan, Sorry to say this, I am still finding a solution!. Do you have any clue?","body":"Hi @ShayanPourvatan, Sorry to say this, I am still finding a solution!. Do you have any clue?"},{"owner":{"account_id":3045053,"reputation":11928,"user_id":2580975,"accept_rate":71,"display_name":"Shayan Pourvatan"},"score":1,"creation_date":1580725203,"post_id":59645936,"comment_id":106178347,"body_markdown":"@SidharthMA No, as I&#39;ve searched we cannot to change permission in runtime, only solution is show headsUp notification to user and ask him to enable it, but we need another permission to show headsUp notification for those user that we can&#39;t permit it unfortunately ( show floating notification )","body":"@SidharthMA No, as I&#39;ve searched we cannot to change permission in runtime, only solution is show headsUp notification to user and ask him to enable it, but we need another permission to show headsUp notification for those user that we can&#39;t permit it unfortunately ( show floating notification )"},{"owner":{"account_id":796053,"reputation":115361,"user_id":878126,"accept_rate":51,"display_name":"android developer"},"score":0,"creation_date":1583229543,"post_id":59645936,"comment_id":107037058,"body_markdown":"Does Android 10 fix this, removing this weird setting? I noticed that now it&#39;s on the docs, that some cases will be excluded for Android 10 : https://developer.android.com/guide/components/activities/background-starts#exceptions , but I think it&#39;s still turned off by default.","body":"Does Android 10 fix this, removing this weird setting? I noticed that now it&#39;s on the docs, that some cases will be excluded for Android 10 : <a href=\"https://developer.android.com/guide/components/activities/background-starts#exceptions\" rel=\"nofollow noreferrer\">developer.android.com/guide/components/activities/&hellip;</a> , but I think it&#39;s still turned off by default."},{"owner":{"account_id":2004398,"reputation":1950,"user_id":1866771,"accept_rate":65,"display_name":"Bhavin Chauhan"},"score":0,"creation_date":1589299121,"post_id":59645936,"comment_id":109235617,"body_markdown":"@SidharthMA interesting question. Is there any solution?  I&#39;ve seen that Facebook auto on this permission.","body":"@SidharthMA interesting question. Is there any solution?  I&#39;ve seen that Facebook auto on this permission."},{"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"score":0,"creation_date":1599550574,"post_id":59645936,"comment_id":112799926,"body_markdown":"@BhavinChauhan, unfortunately no. But I did check the Facebook settings page and found that this permission was turned ON by default. Dont know how!!","body":"@BhavinChauhan, unfortunately no. But I did check the Facebook settings page and found that this permission was turned ON by default. Dont know how!!"},{"owner":{"account_id":2004398,"reputation":1950,"user_id":1866771,"accept_rate":65,"display_name":"Bhavin Chauhan"},"score":3,"creation_date":1599570411,"post_id":59645936,"comment_id":112809426,"body_markdown":"@SidharthMA also I know its default on for white listed all like Uber, Facebook etc","body":"@SidharthMA also I know its default on for white listed all like Uber, Facebook etc"}],"answers":[{"tags":[],"owner":{"account_id":5585595,"reputation":720,"user_id":4426063,"display_name":"littlebear333"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1578904744,"creation_date":1578904744,"answer_id":59713041,"question_id":59645936,"body_markdown":"Try the following code.\r\n\r\n     Intent rIntent = context.getPackageManager()\r\n                        .getLaunchIntentForPackage(context.getPackageName() );\r\n                PendingIntent intent = PendingIntent.getActivity(\r\n                        context, 0,\r\n                        rIntent, PendingIntent.FLAG_CANCEL_CURRENT);\r\n                AlarmManager manager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n                manager.set(AlarmManager.RTC, System.currentTimeMillis(), intent);\r\n                System.exit(2);","title":"Displaying popup windows while running in the background?","body":"<p>Try the following code.</p>\n\n<pre><code> Intent rIntent = context.getPackageManager()\n                    .getLaunchIntentForPackage(context.getPackageName() );\n            PendingIntent intent = PendingIntent.getActivity(\n                    context, 0,\n                    rIntent, PendingIntent.FLAG_CANCEL_CURRENT);\n            AlarmManager manager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n            manager.set(AlarmManager.RTC, System.currentTimeMillis(), intent);\n            System.exit(2);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8630696,"reputation":969,"user_id":6462382,"display_name":"elhoucine ayoub"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1609412399,"creation_date":1601817776,"answer_id":64195154,"question_id":59645936,"body_markdown":"This is common problem in Xiaomi devices for developers,\r\n\r\nthe solution we have for the moment is to redirect users to `other permissions` screen and let the users give the permission manually :\r\n\r\n    if (&quot;xiaomi&quot; == Build.MANUFACTURER.toLowerCase(Locale.ROOT)) {\r\n        val intent = Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;)\r\n        intent.setClassName(&quot;com.miui.securitycenter&quot;,\r\n                &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;)\r\n        intent.putExtra(&quot;extra_pkgname&quot;, getPackageName())\r\n        startActivity(intent)\r\n    }\r\n\r\nYou can use `Settings.canDrawOverlays(this)` to test only if the user has given the **Display pop-up windows** which means the app can draw over the system ui.\r\n \r\nThe other two permissions can not be verified if the user has given them or not :\r\n\r\n 1. **Display pop-up windows while running in the background** : this one means to allow the app to draw over the system ui while the app is running in the background like `services` and `broadcast` \r\n 2. **Show on lock screen** : this one gives the app the permission to run even when the screen is locked like social apps (whatsApp , Viber , Messnger ...)\r\n\r\n \r\n\r\n","title":"Displaying popup windows while running in the background?","body":"<p>This is common problem in Xiaomi devices for developers,</p>\n<p>the solution we have for the moment is to redirect users to <code>other permissions</code> screen and let the users give the permission manually :</p>\n<pre><code>if (&quot;xiaomi&quot; == Build.MANUFACTURER.toLowerCase(Locale.ROOT)) {\n    val intent = Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;)\n    intent.setClassName(&quot;com.miui.securitycenter&quot;,\n            &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;)\n    intent.putExtra(&quot;extra_pkgname&quot;, getPackageName())\n    startActivity(intent)\n}\n</code></pre>\n<p>You can use <code>Settings.canDrawOverlays(this)</code> to test only if the user has given the <strong>Display pop-up windows</strong> which means the app can draw over the system ui.</p>\n<p>The other two permissions can not be verified if the user has given them or not :</p>\n<ol>\n<li><strong>Display pop-up windows while running in the background</strong> : this one means to allow the app to draw over the system ui while the app is running in the background like <code>services</code> and <code>broadcast</code></li>\n<li><strong>Show on lock screen</strong> : this one gives the app the permission to run even when the screen is locked like social apps (whatsApp , Viber , Messnger ...)</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":10626790,"reputation":1563,"user_id":7826205,"display_name":"Kasun Thilina"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1605852507,"creation_date":1605852507,"answer_id":64924622,"question_id":59645936,"body_markdown":"Since there is no official way to check the &quot;Display pop-up windows while running in the background&quot; permission, \r\nI used a little trick to check the permissions.\r\n\r\nCheck if the app can draw overlays like below and then if the device is xiaomi navigate the user to the specific settings screen like below.\r\n&lt;br&gt; \r\n\r\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n                if (!Settings.canDrawOverlays(this)) {\r\n                    if (&quot;xiaomi&quot;.equals(Build.MANUFACTURER.toLowerCase(Locale.ROOT))) {\r\n                        final Intent intent =new Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;);\r\n                        intent.setClassName(&quot;com.miui.securitycenter&quot;,\r\n                                &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;);\r\n                        intent.putExtra(&quot;extra_pkgname&quot;, getPackageName());\r\n                        new AlertDialog.Builder(this)\r\n                                .setTitle(&quot;Please Enable the additional permissions&quot;)\r\n                                .setMessage(&quot;You will not receive notifications while the app is in background if you disable these permissions&quot;)\r\n                                .setPositiveButton(&quot;Go to Settings&quot;, new DialogInterface.OnClickListener() {\r\n                                    public void onClick(DialogInterface dialog, int which) {\r\n                                        startActivity(intent);\r\n                                    }\r\n                                })\r\n                                .setIcon(android.R.drawable.ic_dialog_info)\r\n                                .setCancelable(false)\r\n                                .show();\r\n                    }else {\r\n                        Intent overlaySettings = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName()));\r\n                        startActivityForResult(overlaySettings, OVERLAY_REQUEST_CODE);\r\n                    }\r\n                }\r\n            }","title":"Displaying popup windows while running in the background?","body":"<p>Since there is no official way to check the &quot;Display pop-up windows while running in the background&quot; permission,\nI used a little trick to check the permissions.</p>\n<p>Check if the app can draw overlays like below and then if the device is xiaomi navigate the user to the specific settings screen like below.\n<br></p>\n<pre><code>if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            if (!Settings.canDrawOverlays(this)) {\n                if (&quot;xiaomi&quot;.equals(Build.MANUFACTURER.toLowerCase(Locale.ROOT))) {\n                    final Intent intent =new Intent(&quot;miui.intent.action.APP_PERM_EDITOR&quot;);\n                    intent.setClassName(&quot;com.miui.securitycenter&quot;,\n                            &quot;com.miui.permcenter.permissions.PermissionsEditorActivity&quot;);\n                    intent.putExtra(&quot;extra_pkgname&quot;, getPackageName());\n                    new AlertDialog.Builder(this)\n                            .setTitle(&quot;Please Enable the additional permissions&quot;)\n                            .setMessage(&quot;You will not receive notifications while the app is in background if you disable these permissions&quot;)\n                            .setPositiveButton(&quot;Go to Settings&quot;, new DialogInterface.OnClickListener() {\n                                public void onClick(DialogInterface dialog, int which) {\n                                    startActivity(intent);\n                                }\n                            })\n                            .setIcon(android.R.drawable.ic_dialog_info)\n                            .setCancelable(false)\n                            .show();\n                }else {\n                    Intent overlaySettings = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION, Uri.parse(&quot;package:&quot; + getPackageName()));\n                    startActivityForResult(overlaySettings, OVERLAY_REQUEST_CODE);\n                }\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26781455,"reputation":26,"user_id":20376238,"display_name":"asdf"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686651388,"creation_date":1686651388,"answer_id":76463865,"question_id":59645936,"body_markdown":"I manage to work around my project by following this gist https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522\r\n\r\n```\r\n@ReactMethod()\r\n    public void isMiuiCanDisplayOverlay(Promise ps){\r\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\r\n        boolean isGranted = XiaomiUtilities.isPermissionGranted(reactContext,XiaomiUtilities.OP_BACKGROUND_START_ACTIVITY);\r\n        if(isXiaomi){\r\n            ps.resolve(isGranted);\r\n        }else{\r\n            ps.resolve(true);\r\n        }\r\n    }\r\n    @ReactMethod()\r\n    public void openMiuiDisplayOverlayPermission(Promise ps){\r\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\r\n        try{\r\n            if(isXiaomi){\r\n                XiaomiUtilities.goToMiuiPermissionActivity_V8(reactContext);\r\n                ps.resolve(true);\r\n            }else{\r\n                ps.resolve(false);\r\n            }\r\n        }catch (Exception e){\r\n            String version = XiaomiUtilities.getMiuiVersion();\r\n            Log.d(LOG_TAG,&quot;Cannot open Miui Display Pop-up window while running in background&quot; + version + e.toString());\r\n        }\r\n    }\r\n\r\n    \r\n\r\ncode above I created in react native to bridge to javascript","title":"Displaying popup windows while running in the background?","body":"<p>I manage to work around my project by following this gist <a href=\"https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522\" rel=\"nofollow noreferrer\">https://gist.github.com/0awawa0/65bf88e43159750f596da194ed923522</a></p>\n<pre><code>@ReactMethod()\n    public void isMiuiCanDisplayOverlay(Promise ps){\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\n        boolean isGranted = XiaomiUtilities.isPermissionGranted(reactContext,XiaomiUtilities.OP_BACKGROUND_START_ACTIVITY);\n        if(isXiaomi){\n            ps.resolve(isGranted);\n        }else{\n            ps.resolve(true);\n        }\n    }\n    @ReactMethod()\n    public void openMiuiDisplayOverlayPermission(Promise ps){\n        boolean isXiaomi = XiaomiUtilities.isMIUI();\n        try{\n            if(isXiaomi){\n                XiaomiUtilities.goToMiuiPermissionActivity_V8(reactContext);\n                ps.resolve(true);\n            }else{\n                ps.resolve(false);\n            }\n        }catch (Exception e){\n            String version = XiaomiUtilities.getMiuiVersion();\n            Log.d(LOG_TAG,&quot;Cannot open Miui Display Pop-up window while running in background&quot; + version + e.toString());\n        }\n    }\n\n    \n\ncode above I created in react native to bridge to javascript\n</code></pre>\n"}],"owner":{"account_id":15000395,"reputation":251,"user_id":10828249,"display_name":"Sidharth MA"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22666,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"answer_count":4,"score":27,"last_activity_date":1686651388,"creation_date":1578486620,"question_id":59645936,"body_markdown":"I am trying to open an activity from a class that extends Service. I am performing this task when the app is not in foreground/not being used. I can see in the logs that my service class triggered start activity with Intent.FLAG_ACTIVITY_NEW_TASK flag. But the activity does not open. But when the service triggers the same activity when the app is in foreground/being used, the activity opens. \r\n\r\nAfter few searches I found out that I need to manually give the permission &quot;display popup windows while running in the background android&quot; in the other permissions section in the app settings. \r\n\r\nThe display over other apps permission SYSTEM_ALERT_WINDOW only gives access to &quot;Display popup window&quot;.\r\n\r\n[![Other permissions][1]][1]\r\n\r\nIn the image above, SYSTEM_ALERT_WINDOW will only grant you access to &quot;Display popup window&quot; and this works fine if the app is in foreground/being used but the permission marked in red if granted will give you access to open any activity directly from a class extending Service.\r\n\r\nHow do I check or ask the user to give &quot;Display popup windows while running in the background&quot; permission? or Is this permission restricted?\r\n\r\nI see apps like Whatsapp have this checked by default.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0iyn7.png","title":"Displaying popup windows while running in the background?","body":"<p>I am trying to open an activity from a class that extends Service. I am performing this task when the app is not in foreground/not being used. I can see in the logs that my service class triggered start activity with Intent.FLAG_ACTIVITY_NEW_TASK flag. But the activity does not open. But when the service triggers the same activity when the app is in foreground/being used, the activity opens.</p>\n<p>After few searches I found out that I need to manually give the permission &quot;display popup windows while running in the background android&quot; in the other permissions section in the app settings.</p>\n<p>The display over other apps permission SYSTEM_ALERT_WINDOW only gives access to &quot;Display popup window&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/0iyn7.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/0iyn7.png\" alt=\"Other permissions\" /></a></p>\n<p>In the image above, SYSTEM_ALERT_WINDOW will only grant you access to &quot;Display popup window&quot; and this works fine if the app is in foreground/being used but the permission marked in red if granted will give you access to open any activity directly from a class extending Service.</p>\n<p>How do I check or ask the user to give &quot;Display popup windows while running in the background&quot; permission? or Is this permission restricted?</p>\n<p>I see apps like Whatsapp have this checked by default.</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":11474570,"reputation":79,"user_id":8410413,"display_name":"hammad"},"down_vote_count":2,"up_vote_count":1,"is_accepted":true,"score":-1,"last_activity_date":1686650991,"creation_date":1686650991,"answer_id":76463814,"question_id":76463613,"body_markdown":"In Android 11 and above, the concept of scoped storage was introduced, which provides more secure and controlled access to app-specific files and directories. To save a PDF file from your app-specific directory to Android shared storage, you need to follow these steps:\r\n\r\n 1. Request the necessary permissions: Add the following permission to your AndroidManifest.xml file:\r\n    \r\n    `&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;`\r\n\r\n 2. Check for the runtime permission: Request the **WRITE_EXTERNAL_STORAGE** permission from the user at runtime. You can use the **checkSelfPermission()** method to check if the permission is already granted, and if not, request it using the **requestPermissions()** method.\r\n\r\n 3. Use the MediaStore API to copy the file: Android 11 introduced the MediaStore API, which allows you to interact with shared media files. You can use this API to copy the PDF file from your app-specific directory to a location in shared storage.\r\n\r\nHere&#39;s an example code snippet that demonstrates how to save a PDF file from your app-specific directory to shared storage:\r\n\r\n```\r\nimport android.content.ContentResolver;\r\nimport android.content.ContentValues;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.provider.MediaStore;\r\n\r\n// Get the PDF file from your app-specific directory\r\nFile pdfFile = new File(getFilesDir(), &quot;example.pdf&quot;);\r\n\r\n// Prepare the content values for the new file\r\nContentValues values = new ContentValues();\r\nvalues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;example.pdf&quot;);\r\nvalues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;application/pdf&quot;);\r\n\r\n// Determine the appropriate content URI based on the device&#39;s API level\r\nUri uri;\r\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\r\n    // For Android 10 and above, use MediaStore API with MediaStore.Downloads\r\n    values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\r\n    uri = MediaStore.Downloads.EXTERNAL_CONTENT_URI;\r\n} else {\r\n    // For Android 9 and below, use the deprecated MediaStore API with MediaStore.Files\r\n    uri = MediaStore.Files.getContentUri(&quot;external&quot;);\r\n}\r\n\r\n// Insert the file into the media store\r\nContentResolver resolver = getContentResolver();\r\nUri newUri = resolver.insert(uri, values);\r\n\r\n// Copy the file content from the app-specific directory to the shared storage\r\ntry {\r\n    OutputStream outputStream = resolver.openOutputStream(newUri);\r\n    FileInputStream inputStream = new FileInputStream(pdfFile);\r\n    byte[] buffer = new byte[4096];\r\n    int bytesRead;\r\n    while ((bytesRead = inputStream.read(buffer)) != -1) {\r\n        outputStream.write(buffer, 0, bytesRead);\r\n    }\r\n    outputStream.close();\r\n    inputStream.close();\r\n} catch (IOException e) {\r\n    e.printStackTrace();\r\n}\r\n```\r\n\r\nIn this code snippet, the **example.pdf** file is retrieved from the app-specific directory using **getFilesDir()**. Then, ContentValues are created to store the metadata of the new file, including its display name and MIME type. The appropriate content URI is determined based on the device&#39;s API level, and the file is inserted into the media store using **insert()**.\r\n\r\nFinally, the file content is copied from the app-specific directory to the shared storage by opening an output stream to the **newUri** and reading the content from the input stream obtained from the app-specific file.\r\n","title":"Saving file on Android 11+","body":"<p>In Android 11 and above, the concept of scoped storage was introduced, which provides more secure and controlled access to app-specific files and directories. To save a PDF file from your app-specific directory to Android shared storage, you need to follow these steps:</p>\n<ol>\n<li><p>Request the necessary permissions: Add the following permission to your AndroidManifest.xml file:</p>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;</code></p>\n</li>\n<li><p>Check for the runtime permission: Request the <strong>WRITE_EXTERNAL_STORAGE</strong> permission from the user at runtime. You can use the <strong>checkSelfPermission()</strong> method to check if the permission is already granted, and if not, request it using the <strong>requestPermissions()</strong> method.</p>\n</li>\n<li><p>Use the MediaStore API to copy the file: Android 11 introduced the MediaStore API, which allows you to interact with shared media files. You can use this API to copy the PDF file from your app-specific directory to a location in shared storage.</p>\n</li>\n</ol>\n<p>Here's an example code snippet that demonstrates how to save a PDF file from your app-specific directory to shared storage:</p>\n<pre><code>import android.content.ContentResolver;\nimport android.content.ContentValues;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.provider.MediaStore;\n\n// Get the PDF file from your app-specific directory\nFile pdfFile = new File(getFilesDir(), &quot;example.pdf&quot;);\n\n// Prepare the content values for the new file\nContentValues values = new ContentValues();\nvalues.put(MediaStore.MediaColumns.DISPLAY_NAME, &quot;example.pdf&quot;);\nvalues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;application/pdf&quot;);\n\n// Determine the appropriate content URI based on the device's API level\nUri uri;\nif (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.Q) {\n    // For Android 10 and above, use MediaStore API with MediaStore.Downloads\n    values.put(MediaStore.MediaColumns.RELATIVE_PATH, Environment.DIRECTORY_DOWNLOADS);\n    uri = MediaStore.Downloads.EXTERNAL_CONTENT_URI;\n} else {\n    // For Android 9 and below, use the deprecated MediaStore API with MediaStore.Files\n    uri = MediaStore.Files.getContentUri(&quot;external&quot;);\n}\n\n// Insert the file into the media store\nContentResolver resolver = getContentResolver();\nUri newUri = resolver.insert(uri, values);\n\n// Copy the file content from the app-specific directory to the shared storage\ntry {\n    OutputStream outputStream = resolver.openOutputStream(newUri);\n    FileInputStream inputStream = new FileInputStream(pdfFile);\n    byte[] buffer = new byte[4096];\n    int bytesRead;\n    while ((bytesRead = inputStream.read(buffer)) != -1) {\n        outputStream.write(buffer, 0, bytesRead);\n    }\n    outputStream.close();\n    inputStream.close();\n} catch (IOException e) {\n    e.printStackTrace();\n}\n</code></pre>\n<p>In this code snippet, the <strong>example.pdf</strong> file is retrieved from the app-specific directory using <strong>getFilesDir()</strong>. Then, ContentValues are created to store the metadata of the new file, including its display name and MIME type. The appropriate content URI is determined based on the device's API level, and the file is inserted into the media store using <strong>insert()</strong>.</p>\n<p>Finally, the file content is copied from the app-specific directory to the shared storage by opening an output stream to the <strong>newUri</strong> and reading the content from the input stream obtained from the app-specific file.</p>\n"}],"owner":{"account_id":20096189,"reputation":15,"user_id":22065887,"display_name":"T LABS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":248,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76463814,"answer_count":1,"score":0,"last_activity_date":1686650991,"creation_date":1686649464,"question_id":76463613,"body_markdown":"I want to save cache pdf file from my app-specific directory to Android shared storage for Android 11+ devices. How can I do this\r\n\r\nI tried to understand concept of scoped storage but unable to implement. I&#39;m developing application in java","title":"Saving file on Android 11+","body":"<p>I want to save cache pdf file from my app-specific directory to Android shared storage for Android 11+ devices. How can I do this</p>\n<p>I tried to understand concept of scoped storage but unable to implement. I'm developing application in java</p>\n"},{"tags":["java","android","ios","reactjs","react-native"],"comments":[{"owner":{"account_id":6426353,"reputation":435,"user_id":4981359,"display_name":"Mayank Pandav"},"score":0,"creation_date":1580726610,"post_id":60037559,"comment_id":106179052,"body_markdown":"do you have linked your module using react-native link and builded through Android studio?","body":"do you have linked your module using react-native link and builded through Android studio?"},{"owner":{"account_id":16582079,"reputation":2545,"user_id":11982418,"display_name":"Prakash Karena"},"score":0,"creation_date":1580726859,"post_id":60037559,"comment_id":106179181,"body_markdown":"add your package.json file as well","body":"add your package.json file as well"}],"answers":[{"tags":[],"owner":{"account_id":15736516,"reputation":11500,"user_id":11355303,"display_name":"Gaurav Roy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1580726998,"creation_date":1580726998,"answer_id":60037701,"question_id":60037559,"body_markdown":"Try running this command in the android folde, and it hsoould solve it:\r\n\r\n\r\n    ./gradlew assembleRelease -x bundleReleaseJsAndAssets \r\n\r\nHope it helps.","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>Try running this command in the android folde, and it hsoould solve it:</p>\n\n<pre><code>./gradlew assembleRelease -x bundleReleaseJsAndAssets \n</code></pre>\n\n<p>Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":14929863,"reputation":51,"user_id":10779554,"display_name":"Mark Roger Cabadsan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1581049789,"creation_date":1581049789,"answer_id":60107103,"question_id":60037559,"body_markdown":"This problem is already solved. Also, Thanks [Mayank Pandav][1] for pointing that out. As you thought, I forgot to run `react-native link @react-native-community/viewpager` since auto-linking is not done on react native versions &lt; 0.60. After linking, I still had some problem, the usual error with Nullable thingy in react native android but I was able to solve it by migrating to AndroidX thru following this [link][2] and adding the following lines in my **gradle.properties** file:\r\n\r\n&gt; android.useAndroidX=true;\r\n&gt; \r\n&gt; android.enableJetifier=true;\r\n\r\nAnd after re-running, the error is gone. Thanks everyone.\r\n\r\n  [1]: https://stackoverflow.com/users/4981359/mayank-pandav\r\n  [2]: https://developer.android.com/jetpack/androidx/migrate\r\n","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>This problem is already solved. Also, Thanks <a href=\"https://stackoverflow.com/users/4981359/mayank-pandav\">Mayank Pandav</a> for pointing that out. As you thought, I forgot to run <code>react-native link @react-native-community/viewpager</code> since auto-linking is not done on react native versions &lt; 0.60. After linking, I still had some problem, the usual error with Nullable thingy in react native android but I was able to solve it by migrating to AndroidX thru following this <a href=\"https://developer.android.com/jetpack/androidx/migrate\" rel=\"nofollow noreferrer\">link</a> and adding the following lines in my <strong>gradle.properties</strong> file:</p>\n\n<blockquote>\n  <p>android.useAndroidX=true;</p>\n  \n  <p>android.enableJetifier=true;</p>\n</blockquote>\n\n<p>And after re-running, the error is gone. Thanks everyone.</p>\n"},{"tags":[],"owner":{"account_id":28811454,"reputation":1,"user_id":22066067,"display_name":"Nivesh Nadarajan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650724,"creation_date":1686650724,"answer_id":76463781,"question_id":60037559,"body_markdown":"Downgrade the  react-native-gesture-handler version to 1.10.3\r\n\r\n","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>Downgrade the  react-native-gesture-handler version to 1.10.3</p>\n"}],"owner":{"account_id":14929863,"reputation":51,"user_id":10779554,"display_name":"Mark Roger Cabadsan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3921,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":60107103,"answer_count":3,"score":0,"last_activity_date":1686650724,"creation_date":1580726524,"question_id":60037559,"body_markdown":"I need to use react-native-scrollable-tab-view and accompanying that, I also installed/setup react-native-viewpager following this [link][1]. This error suddenly appeared and currently, I still can&#39;t find a way to solve it. I hope someone encountered it already and help me. I just started working with React Native 1 wk ago but this project I&#39;ve been working on have been existing for more than a year so not all dependencies are updated including react-native which version is 0.59.10. I&#39;ve already tried using react-native-scrollable-tab-view with a sample project using latest version of react-native and it works fine but unfortunately I don&#39;t think I can upgrade this project cause there are just so many dependencies that will be affected that complicates things. I hope there is a way to resolve it without having to affect other dependencies. Here is the error part of the log:\r\n\r\n&gt; Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\r\nmansion/gesturehandler/react/RNGestureHandlerEvent.java:3: error: package android.support.v4.util does not exist\r\nimport android.support.v4.util.Pools;\r\n                              ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\r\nmansion/gesturehandler/react/RNGestureHandlerEvent.java:19: error: package Pools does not exist\r\n  private static final Pools.SynchronizedPool&lt;RNGestureHandlerEvent&gt; EVENTS_POOL =\r\n                            ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:3: error: package android.support.v4.util does not exist\r\nimport android.support.v4.util.Pools;\r\n                              ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:19: error: package Pools does not exist\r\n  private static final Pools.SynchronizedPool&lt;RNGestureHandlerStateChangeEvent&gt; EVENTS_POOL =\r\n                            ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerEvent.java:20: error: package Pools does not exist\r\n          new Pools.SynchronizedPool&lt;&gt;(TOUCH_EVENTS_POOL_SIZE);\r\n                   ^\r\n/Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:20: error: package Pools does not exist\r\n          new Pools.SynchronizedPool&lt;&gt;(TOUCH_EVENTS_POOL_SIZE);\r\n                   ^\r\nNote: /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerButtonViewManager.java uses or overrides a deprecated API.\r\nNote: Recompile with -Xlint:deprecation for details.\r\nNote: Some input files use unchecked or unsafe operations.\r\nNote: Recompile with -Xlint:unchecked for details.\r\n6 errors\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:react-native-gesture-handler:compileDebugJavaWithJavac&#39;.\r\n&gt; Compilation failed; see the compiler error output for details.\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\r\nUse &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 24s\r\n251 actionable tasks: 27 executed, 224 up-to-date\r\nerror Could not install the app on the device, read the error above for details.\r\nMake sure you have an Android emulator running or a device connected and have\r\nset up your Android development environment:\r\nhttps://facebook.github.io/react-native/docs/getting-started.html\r\nerror Command failed: ./gradlew app:installDebug. Run CLI with --verbose flag for more details.\r\nMarks-MacBook-Pro:endless-aisle-hybrid markrogercabadsan$ \r\n\r\n\r\n  [1]: https://github.com/react-native-community/react-native-viewpager/blob/master/README.md#mostly-automatic","title":"Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED","body":"<p>I need to use react-native-scrollable-tab-view and accompanying that, I also installed/setup react-native-viewpager following this <a href=\"https://github.com/react-native-community/react-native-viewpager/blob/master/README.md#mostly-automatic\" rel=\"nofollow noreferrer\">link</a>. This error suddenly appeared and currently, I still can't find a way to solve it. I hope someone encountered it already and help me. I just started working with React Native 1 wk ago but this project I've been working on have been existing for more than a year so not all dependencies are updated including react-native which version is 0.59.10. I've already tried using react-native-scrollable-tab-view with a sample project using latest version of react-native and it works fine but unfortunately I don't think I can upgrade this project cause there are just so many dependencies that will be affected that complicates things. I hope there is a way to resolve it without having to affect other dependencies. Here is the error part of the log:</p>\n\n<blockquote>\n  <p>Task :react-native-gesture-handler:compileDebugJavaWithJavac FAILED\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\n  mansion/gesturehandler/react/RNGestureHandlerEvent.java:3: error: package android.support.v4.util does not exist\n  import android.support.v4.util.Pools;\n                                ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/sw\n  mansion/gesturehandler/react/RNGestureHandlerEvent.java:19: error: package Pools does not exist\n    private static final Pools.SynchronizedPool EVENTS_POOL =\n                              ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:3: error: package android.support.v4.util does not exist\n  import android.support.v4.util.Pools;\n                                ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:19: error: package Pools does not exist\n    private static final Pools.SynchronizedPool EVENTS_POOL =\n                              ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerEvent.java:20: error: package Pools does not exist\n            new Pools.SynchronizedPool&lt;>(TOUCH_EVENTS_POOL_SIZE);\n                     ^\n  /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerStateChangeEvent.java:20: error: package Pools does not exist\n            new Pools.SynchronizedPool&lt;>(TOUCH_EVENTS_POOL_SIZE);\n                     ^\n  Note: /Users/markrogercabadsan/ReactNativeProjects/endless-aisle-hybrid/node_modules/react-native-gesture-handler/android/src/main/java/com/swmansion/gesturehandler/react/RNGestureHandlerButtonViewManager.java uses or overrides a deprecated API.\n  Note: Recompile with -Xlint:deprecation for details.\n  Note: Some input files use unchecked or unsafe operations.\n  Note: Recompile with -Xlint:unchecked for details.\n  6 errors</p>\n</blockquote>\n\n<p>FAILURE: Build failed with an exception.</p>\n\n<ul>\n<li><p>What went wrong:\nExecution failed for task ':react-native-gesture-handler:compileDebugJavaWithJavac'.</p>\n\n<blockquote>\n  <p>Compilation failed; see the compiler error output for details.</p>\n</blockquote></li>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p></li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p></li>\n</ul>\n\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee <a href=\"https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"nofollow noreferrer\">https://docs.gradle.org/4.10.1/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n\n<p>BUILD FAILED in 24s\n251 actionable tasks: 27 executed, 224 up-to-date\nerror Could not install the app on the device, read the error above for details.\nMake sure you have an Android emulator running or a device connected and have\nset up your Android development environment:\n<a href=\"https://facebook.github.io/react-native/docs/getting-started.html\" rel=\"nofollow noreferrer\">https://facebook.github.io/react-native/docs/getting-started.html</a>\nerror Command failed: ./gradlew app:installDebug. Run CLI with --verbose flag for more details.\nMarks-MacBook-Pro:endless-aisle-hybrid markrogercabadsan$ </p>\n"},{"tags":["java","resteasy"],"answers":[{"tags":[],"owner":{"account_id":219080,"reputation":589,"user_id":475756,"accept_rate":100,"display_name":"tveon"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1329385409,"creation_date":1329385409,"answer_id":9308838,"question_id":9099790,"body_markdown":"In RESTeasy processing headers are supported by using interceptors, which are described in the [Reference Guide](http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html-single/RESTEasy_Reference_Guide/index.html#Interceptors).\r\n\r\nWhat you want, is probably a PreProcessInterceptor which intercepts the call, looks for the header and changes the method string/redirects as necessary.\r\n","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>In RESTeasy processing headers are supported by using interceptors, which are described in the <a href=\"http://docs.redhat.com/docs/en-US/JBoss_Enterprise_Web_Platform/5/html-single/RESTEasy_Reference_Guide/index.html#Interceptors\" rel=\"nofollow\">Reference Guide</a>.</p>\n\n<p>What you want, is probably a PreProcessInterceptor which intercepts the call, looks for the header and changes the method string/redirects as necessary.</p>\n"},{"tags":[],"owner":{"account_id":2453287,"reputation":3192,"user_id":2139038,"accept_rate":67,"display_name":"rand0m86"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1686650516,"creation_date":1385729289,"answer_id":20286225,"question_id":9099790,"body_markdown":"Recently I had the same problem and the best solution I&#39;ve found is:\r\n\r\n    @Provider\r\n    @PreMatching\r\n    public class OverrideHttpMethodFilter implements ContainerRequestFilter {\r\n\r\n\t@Override\r\n\tpublic void filter(ContainerRequestContext requestContext)\r\n\t\t\tthrows IOException {\t\t\r\n\t\tString receivedMethod = requestContext.getMethod();\r\n\t\tString methodFromHeader = requestContext.getHeaderString(&quot;X-HTTP-Method-Override&quot;);\r\n\t\tif (methodFromHeader != null &amp;&amp; !methodFromHeader.equals(receivedMethod)) {\r\n\t\t\trequestContext.setMethod(methodFromHeader);\r\n\t\t}\r\n\t  }\r\n    }","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>Recently I had the same problem and the best solution I've found is:</p>\n<pre><code>@Provider\n@PreMatching\npublic class OverrideHttpMethodFilter implements ContainerRequestFilter {\n\n@Override\npublic void filter(ContainerRequestContext requestContext)\n        throws IOException {        \n    String receivedMethod = requestContext.getMethod();\n    String methodFromHeader = requestContext.getHeaderString(&quot;X-HTTP-Method-Override&quot;);\n    if (methodFromHeader != null &amp;&amp; !methodFromHeader.equals(receivedMethod)) {\n        requestContext.setMethod(methodFromHeader);\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":141866,"reputation":1635,"user_id":349206,"accept_rate":36,"display_name":"A_J"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2664,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":9308838,"answer_count":2,"score":5,"last_activity_date":1686650516,"creation_date":1328115099,"question_id":9099790,"body_markdown":"Are there any way that support the X-HTTP-Method-Override request header\r\n(automatically/transparently) in RESTeasy? \r\n\r\nThis would\r\nmake it much easier to support clients that cannot send PUT/DELETE requests.\r\n\r\nYes, overriding POST is less than ideal but I think the Google convention of\r\nusing X-HTTP-Method-Override is a reasonable/convenient work-around. \r\n\r\nIf RESTeasy\r\ncould dispatch POST requests with the X-HTTP-Method-Override header\r\nautomatically it would be a big time saver. I think Jersey just added something\r\nlike this via a filtering approach, but I&#39;d prefer to stick with RESTeasy.","title":"RESTeasy and X-HTTP-Method-Override","body":"<p>Are there any way that support the X-HTTP-Method-Override request header\n(automatically/transparently) in RESTeasy? </p>\n\n<p>This would\nmake it much easier to support clients that cannot send PUT/DELETE requests.</p>\n\n<p>Yes, overriding POST is less than ideal but I think the Google convention of\nusing X-HTTP-Method-Override is a reasonable/convenient work-around. </p>\n\n<p>If RESTeasy\ncould dispatch POST requests with the X-HTTP-Method-Override header\nautomatically it would be a big time saver. I think Jersey just added something\nlike this via a filtering approach, but I'd prefer to stick with RESTeasy.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2116606,"reputation":923,"user_id":1880761,"accept_rate":60,"display_name":"trebor"},"score":1,"creation_date":1659403667,"post_id":30889478,"comment_id":129281311,"body_markdown":"Note that you are wanting to read a property at runtime, not an environment (`System.getProperty(&quot;xxx&quot;)` vs `System.getenv(&quot;xxx&quot;)`).","body":"Note that you are wanting to read a property at runtime, not an environment (<code>System.getProperty(&quot;xxx&quot;)</code> vs <code>System.getenv(&quot;xxx&quot;)</code>)."}],"answers":[{"tags":[],"owner":{"account_id":5903825,"reputation":5005,"user_id":4646346,"accept_rate":83,"display_name":"Sathish"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1686650507,"creation_date":1434538635,"answer_id":30889558,"question_id":30889478,"body_markdown":"Try giving following command,\r\n\r\n    java -DconfigDir=/etc/myconfig-config/ -cp test-tool.jar service.ScriptGenerator $clinic_count $client_files_count \r\n\r\nNote that the given parameters should be accessed from code as follow:\r\n\r\n    System.getProperty(&quot;configDir&quot;)","title":"passing environment variable to a java class in command line","body":"<p>Try giving following command,</p>\n<pre><code>java -DconfigDir=/etc/myconfig-config/ -cp test-tool.jar service.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n<p>Note that the given parameters should be accessed from code as follow:</p>\n<pre><code>System.getProperty(&quot;configDir&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":447545,"reputation":2029,"user_id":841221,"accept_rate":75,"display_name":"Aakash"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1434538673,"creation_date":1434538673,"answer_id":30889575,"question_id":30889478,"body_markdown":"Your command should be like\r\n\r\n    java  -cp test-tool.jar -DconfigDir=/etc/myconfig-config/ service.ScriptGenerator $clinic_count $client_files_count ","title":"passing environment variable to a java class in command line","body":"<p>Your command should be like</p>\n\n<pre><code>java  -cp test-tool.jar -DconfigDir=/etc/myconfig-config/ service.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n"},{"tags":[],"owner":{"account_id":4685065,"reputation":485,"user_id":3792674,"display_name":"Asif"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1606129261,"creation_date":1606129261,"answer_id":64967140,"question_id":30889478,"body_markdown":"Try this command\r\n\r\n**`export VARNAME=&#39;variable-value&#39;`**\r\n\r\nThen run your Java main class from the same command line.","title":"passing environment variable to a java class in command line","body":"<p>Try this command</p>\n<p><strong><code>export VARNAME='variable-value'</code></strong></p>\n<p>Then run your Java main class from the same command line.</p>\n"}],"owner":{"account_id":3746661,"reputation":1429,"user_id":3115189,"accept_rate":100,"display_name":"Dilan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50556,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"accepted_answer_id":30889558,"answer_count":3,"score":14,"last_activity_date":1686650507,"creation_date":1434538418,"question_id":30889478,"body_markdown":"I have a necessity to read some properties from a file located in local `etc/myconfig-config/` folder. I need to give this file path in the command line. I have given it as mentioned below. But there is an error and it displays like \r\n\r\n    Error: Could not find or load main class test-tool.jar. \r\n\r\nthe command given is\r\n\r\n    java  -cp -DconfigDir=/etc/myconfig-config/ test-tool.jar \r\n    service.ScriptGenerator $clinic_count $client_files_count \r\n\r\n\r\ncan anybody please help me to resolve this.\r\n\r\nthanks","title":"passing environment variable to a java class in command line","body":"<p>I have a necessity to read some properties from a file located in local <code>etc/myconfig-config/</code> folder. I need to give this file path in the command line. I have given it as mentioned below. But there is an error and it displays like </p>\n\n<pre><code>Error: Could not find or load main class test-tool.jar. \n</code></pre>\n\n<p>the command given is</p>\n\n<pre><code>java  -cp -DconfigDir=/etc/myconfig-config/ test-tool.jar \nservice.ScriptGenerator $clinic_count $client_files_count \n</code></pre>\n\n<p>can anybody please help me to resolve this.</p>\n\n<p>thanks</p>\n"},{"tags":["java","spring-boot","maven","model-view-controller","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686650776,"post_id":76463749,"comment_id":134824928,"body_markdown":"What have you tried so far, what errors are you getting? Have you read the (migration) documentation? Which dependencies are you using. So in short too little information to answer this.","body":"What have you tried so far, what errors are you getting? Have you read the (migration) documentation? Which dependencies are you using. So in short too little information to answer this."},{"owner":{"account_id":28811384,"reputation":1,"user_id":22066003,"display_name":"user22066003"},"score":0,"creation_date":1686893436,"post_id":76463749,"comment_id":134863449,"body_markdown":"Actually i created bean and methods according to the spring security 6 documentation but still I get unsatisfied dependency exception","body":"Actually i created bean and methods according to the spring security 6 documentation but still I get unsatisfied dependency exception"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686898163,"post_id":76463749,"comment_id":134864132,"body_markdown":"Please **show** what you have done so far, don&#39;t describe. Show your configuration **and** the error stacktrace (the **full stacktrace**) that you get.","body":"Please <b>show</b> what you have done so far, don&#39;t describe. Show your configuration <b>and</b> the error stacktrace (the <b>full stacktrace</b>) that you get."}],"owner":{"account_id":28811384,"reputation":1,"user_id":22066003,"display_name":"user22066003"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686650451,"creation_date":1686650451,"question_id":76463749,"body_markdown":"I am getting error while doing with all the existing methods for creating ldap authentication server using spring security 6\r\n\r\nAnd cant even verify the data using the .ldif file given and grant authentication .I have an .ldif file and need the credentials authenticate against this file.","title":"How to do ldap authentication in spring security 6","body":"<p>I am getting error while doing with all the existing methods for creating ldap authentication server using spring security 6</p>\n<p>And cant even verify the data using the .ldif file given and grant authentication .I have an .ldif file and need the credentials authenticate against this file.</p>\n"},{"tags":["java","lambda","java-8","java-stream"],"answers":[{"tags":[],"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"down_vote_count":2,"up_vote_count":1511,"is_accepted":true,"score":1509,"last_activity_date":1426087031,"creation_date":1386113458,"answer_id":20363874,"question_id":20363719,"body_markdown":"Based on [`Collectors` documentation](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-) it&#39;s as simple as:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n        choices.stream().collect(Collectors.toMap(Choice::getName,\r\n                                                  Function.identity()));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Based on <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#toMap-java.util.function.Function-java.util.function.Function-\" rel=\"noreferrer\"><code>Collectors</code> documentation</a> it's as simple as:</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n    choices.stream().collect(Collectors.toMap(Choice::getName,\n                                              Function.identity()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2453502,"reputation":9195,"user_id":2139222,"display_name":"Ulises"},"down_vote_count":19,"up_vote_count":378,"is_accepted":false,"score":359,"last_activity_date":1496102759,"creation_date":1408731622,"answer_id":25453317,"question_id":20363719,"body_markdown":"If your key is **NOT** guaranteed to be unique for all elements in the list, you should convert it to a `Map&lt;String, List&lt;Choice&gt;&gt;` instead of a `Map&lt;String, Choice&gt;`\r\n\r\n    Map&lt;String, List&lt;Choice&gt;&gt; result =\r\n     choices.stream().collect(Collectors.groupingBy(Choice::getName));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If your key is <strong>NOT</strong> guaranteed to be unique for all elements in the list, you should convert it to a <code>Map&lt;String, List&lt;Choice&gt;&gt;</code> instead of a <code>Map&lt;String, Choice&gt;</code></p>\n\n<pre><code>Map&lt;String, List&lt;Choice&gt;&gt; result =\n choices.stream().collect(Collectors.groupingBy(Choice::getName));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1859358,"reputation":42879,"user_id":1684269,"accept_rate":91,"display_name":"Ole"},"down_vote_count":0,"up_vote_count":180,"is_accepted":false,"score":180,"last_activity_date":1559501651,"creation_date":1425107895,"answer_id":28779227,"question_id":20363719,"body_markdown":"Use `getName()` as the key and `Choice` itself as the value of the map:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n        choices.stream().collect(Collectors.toMap(Choice::getName, c -&gt; c));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Use <code>getName()</code> as the key and <code>Choice</code> itself as the value of the map:</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n    choices.stream().collect(Collectors.toMap(Choice::getName, c -&gt; c));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2363527,"reputation":167,"user_id":2069723,"display_name":"user2069723"},"down_vote_count":2,"up_vote_count":10,"is_accepted":false,"score":8,"last_activity_date":1429903865,"creation_date":1429903865,"answer_id":29855930,"question_id":20363719,"body_markdown":"I use this syntax\r\n\r\n    Map&lt;Integer, List&lt;Choice&gt;&gt; choiceMap = \r\n    choices.stream().collect(Collectors.groupingBy(choice -&gt; choice.getName()));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I use this syntax</p>\n\n<pre><code>Map&lt;Integer, List&lt;Choice&gt;&gt; choiceMap = \nchoices.stream().collect(Collectors.groupingBy(choice -&gt; choice.getName()));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7482232,"reputation":353,"user_id":5686651,"display_name":"iZian"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1452249835,"creation_date":1452249835,"answer_id":34675066,"question_id":20363719,"body_markdown":"I was trying to do this and found that, using the answers above, when using `Functions.identity()` for the key to the Map, then I had issues with using a local method like `this::localMethodName` to actually work because of typing issues.\r\n\r\n`Functions.identity()` actually does something to the typing in this case so the method would only work by returning `Object` and accepting a param of `Object`\r\n\r\nTo solve this, I ended up ditching `Functions.identity()` and using `s-&gt;s` instead.\r\n\r\nSo my code, in my case to list all directories inside a directory, and for each one use the name of the directory as the key to the map and then call a method with the directory name and return a collection of items, looks like:\r\n\r\n    Map&lt;String, Collection&lt;ItemType&gt;&gt; items = Arrays.stream(itemFilesDir.listFiles(File::isDirectory))\r\n    .map(File::getName)\r\n    .collect(Collectors.toMap(s-&gt;s, this::retrieveBrandItems));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I was trying to do this and found that, using the answers above, when using <code>Functions.identity()</code> for the key to the Map, then I had issues with using a local method like <code>this::localMethodName</code> to actually work because of typing issues.</p>\n\n<p><code>Functions.identity()</code> actually does something to the typing in this case so the method would only work by returning <code>Object</code> and accepting a param of <code>Object</code></p>\n\n<p>To solve this, I ended up ditching <code>Functions.identity()</code> and using <code>s-&gt;s</code> instead.</p>\n\n<p>So my code, in my case to list all directories inside a directory, and for each one use the name of the directory as the key to the map and then call a method with the directory name and return a collection of items, looks like:</p>\n\n<pre><code>Map&lt;String, Collection&lt;ItemType&gt;&gt; items = Arrays.stream(itemFilesDir.listFiles(File::isDirectory))\n.map(File::getName)\n.collect(Collectors.toMap(s-&gt;s, this::retrieveBrandItems));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2987511,"reputation":3024,"user_id":5772982,"display_name":"Kumar Abhishek"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1453654543,"creation_date":1453653831,"answer_id":34978466,"question_id":20363719,"body_markdown":"    Map&lt;String, Set&lt;String&gt;&gt; collect = Arrays.asList(Locale.getAvailableLocales()).stream().collect(Collectors\r\n    \t\t\t\t.toMap(l -&gt; l.getDisplayCountry(), l -&gt; Collections.singleton(l.getDisplayLanguage())));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>Map&lt;String, Set&lt;String&gt;&gt; collect = Arrays.asList(Locale.getAvailableLocales()).stream().collect(Collectors\n                .toMap(l -&gt; l.getDisplayCountry(), l -&gt; Collections.singleton(l.getDisplayLanguage())));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5914036,"reputation":5245,"user_id":4653367,"display_name":"John McClean"},"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1456335907,"creation_date":1456335907,"answer_id":35609333,"question_id":20363719,"body_markdown":"If you don&#39;t mind using 3rd party libraries, AOL&#39;s [cyclops-react][1] lib (disclosure I am a contributor) has extensions for all [JDK Collection][2] types, including [List][3] and [Map][4].\r\n\r\n    ListX&lt;Choices&gt; choices;\r\n    Map&lt;String, Choice&gt; map = choices.toMap(c-&gt; c.getName(),c-&gt;c);\r\n\r\n\r\n [1]: https://github.com/aol/cyclops-react\r\n [2]: https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze\r\n [3]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/ListX.html\r\n [4]: http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/MapX.html","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If you don't mind using 3rd party libraries, AOL's <a href=\"https://github.com/aol/cyclops-react\">cyclops-react</a> lib (disclosure I am a contributor) has extensions for all <a href=\"https://medium.com/@johnmcclean/extending-jdk-8-collections-8ae8d43dd75e#.j5lxtrqze\">JDK Collection</a> types, including <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/ListX.html\">List</a> and <a href=\"http://static.javadoc.io/com.aol.simplereact/cyclops-react/1.0.0-RC1/com/aol/cyclops/data/collections/extensions/standard/MapX.html\">Map</a>.</p>\n\n<pre><code>ListX&lt;Choices&gt; choices;\nMap&lt;String, Choice&gt; map = choices.toMap(c-&gt; c.getName(),c-&gt;c);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2379289,"reputation":814,"user_id":2081702,"accept_rate":50,"display_name":"Emre Colak"},"down_vote_count":0,"up_vote_count":32,"is_accepted":false,"score":32,"last_activity_date":1461091117,"creation_date":1461091117,"answer_id":36726795,"question_id":20363719,"body_markdown":"Here&#39;s another one in case you don&#39;t want to use Collectors.toMap()\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n       choices.stream().collect(HashMap&lt;String, Choice&gt;::new, \r\n                               (m, c) -&gt; m.put(c.getName(), c),\r\n                               (m, u) -&gt; {});","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Here's another one in case you don't want to use Collectors.toMap()</p>\n\n<pre><code>Map&lt;String, Choice&gt; result =\n   choices.stream().collect(HashMap&lt;String, Choice&gt;::new, \n                           (m, c) -&gt; m.put(c.getName(), c),\n                           (m, u) -&gt; {});\n</code></pre>\n"},{"tags":[],"owner":{"account_id":474223,"reputation":567,"user_id":883770,"accept_rate":0,"display_name":"Renukeswar"},"down_vote_count":4,"up_vote_count":27,"is_accepted":false,"score":23,"last_activity_date":1491548560,"creation_date":1491548560,"answer_id":43271662,"question_id":20363719,"body_markdown":"    \r\n\r\n&gt; One more option in simple way\r\n\r\n    Map&lt;String,Choice&gt; map = new HashMap&lt;&gt;();\r\n    choices.forEach(e-&gt;map.put(e.getName(),e));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<blockquote>\n  <p>One more option in simple way</p>\n</blockquote>\n\n<pre><code>Map&lt;String,Choice&gt; map = new HashMap&lt;&gt;();\nchoices.forEach(e-&gt;map.put(e.getName(),e));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4120139,"reputation":1,"user_id":3380739,"display_name":"user_3380739"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1496980287,"creation_date":1496980287,"answer_id":44449016,"question_id":20363719,"body_markdown":"Here is solution by [StreamEx][1]\r\n\r\n    StreamEx.of(choices).toMap(Choice::getName, c -&gt; c);\r\n\r\n\r\n  [1]: https://github.com/amaembo/streamex","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Here is solution by <a href=\"https://github.com/amaembo/streamex\" rel=\"nofollow noreferrer\">StreamEx</a></p>\n\n<pre><code>StreamEx.of(choices).toMap(Choice::getName, c -&gt; c);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10160323,"reputation":522,"user_id":7504001,"accept_rate":40,"display_name":"Vikas Suryawanshi"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1496986391,"creation_date":1496986391,"answer_id":44449953,"question_id":20363719,"body_markdown":"You can create a Stream of the indices using an IntStream and then convert them to a Map :\r\n\r\n    Map&lt;Integer,Item&gt; map = \r\n    IntStream.range(0,items.size())\r\n             .boxed()\r\n             .collect(Collectors.toMap (i -&gt; i, i -&gt; items.get(i)));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>You can create a Stream of the indices using an IntStream and then convert them to a Map :</p>\n\n<pre><code>Map&lt;Integer,Item&gt; map = \nIntStream.range(0,items.size())\n         .boxed()\n         .collect(Collectors.toMap (i -&gt; i, i -&gt; items.get(i)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2125197,"reputation":1387,"user_id":1887560,"accept_rate":3,"display_name":"Rajeev Akotkar"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1501033936,"creation_date":1499832264,"answer_id":45048226,"question_id":20363719,"body_markdown":"    Map&lt;String,Choice&gt; map=list.stream().collect(Collectors.toMap(Choice::getName, s-&gt;s));\r\n\r\nEven  serves this purpose for me,\r\n\r\n    Map&lt;String,Choice&gt; map=  list1.stream().collect(()-&gt; new HashMap&lt;String,Choice&gt;(), \r\n        \t\t(r,s) -&gt; r.put(s.getString(),s),(r,s) -&gt; r.putAll(s));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>Map&lt;String,Choice&gt; map=list.stream().collect(Collectors.toMap(Choice::getName, s-&gt;s));\n</code></pre>\n\n<p>Even  serves this purpose for me,</p>\n\n<pre><code>Map&lt;String,Choice&gt; map=  list1.stream().collect(()-&gt; new HashMap&lt;String,Choice&gt;(), \n            (r,s) -&gt; r.put(s.getString(),s),(r,s) -&gt; r.putAll(s));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4670913,"reputation":3692,"user_id":3782729,"display_name":"Piotr Rogowski"},"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1541411210,"creation_date":1508504767,"answer_id":46849728,"question_id":20363719,"body_markdown":"For example, if you want convert object fields to map:\r\n\r\nExample object:\r\n\r\n    class Item{\r\n            private String code;\r\n            private String name;\r\n            \r\n            public Item(String code, String name) {\r\n                this.code = code;\r\n                this.name = name;\r\n            }\r\n\r\n            //getters and setters\r\n        }\r\n\r\nAnd operation convert List To Map:\r\n\r\n    List&lt;Item&gt; list = new ArrayList&lt;&gt;();\r\n    list.add(new Item(&quot;code1&quot;, &quot;name1&quot;));\r\n    list.add(new Item(&quot;code2&quot;, &quot;name2&quot;));\r\n            \r\n    Map&lt;String,String&gt; map = list.stream()\r\n         .collect(Collectors.toMap(Item::getCode, Item::getName));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>For example, if you want convert object fields to map:</p>\n\n<p>Example object:</p>\n\n<pre><code>class Item{\n        private String code;\n        private String name;\n\n        public Item(String code, String name) {\n            this.code = code;\n            this.name = name;\n        }\n\n        //getters and setters\n    }\n</code></pre>\n\n<p>And operation convert List To Map:</p>\n\n<pre><code>List&lt;Item&gt; list = new ArrayList&lt;&gt;();\nlist.add(new Item(\"code1\", \"name1\"));\nlist.add(new Item(\"code2\", \"name2\"));\n\nMap&lt;String,String&gt; map = list.stream()\n     .collect(Collectors.toMap(Item::getCode, Item::getName));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8802416,"reputation":171,"user_id":6578100,"display_name":"raja emani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1528109105,"creation_date":1528109105,"answer_id":50678791,"question_id":20363719,"body_markdown":"This can be done in 2 ways. Let person be the class we are going to use to demonstrate it.\r\n\r\n    public class Person {\r\n    \r\n        private String name;\r\n        private int age;\r\n    \r\n        public String getAge() {\r\n            return age;\r\n        }\r\n    }\r\nLet **persons** be the list of Persons to be converted to the map\r\n\r\n1.Using Simple foreach and a Lambda Expression on the List\r\n\r\n    Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;&gt;();\r\n    persons.forEach(p-&gt;mapPersons.put(p.getAge(),p));\r\n\r\n2.Using Collectors on Stream defined on the given List.\r\n\r\n   \r\n\r\n     Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = \r\n               persons.stream().collect(Collectors.groupingBy(Person::getAge));\r\n\r\n \r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>This can be done in 2 ways. Let person be the class we are going to use to demonstrate it.</p>\n\n<pre><code>public class Person {\n\n    private String name;\n    private int age;\n\n    public String getAge() {\n        return age;\n    }\n}\n</code></pre>\n\n<p>Let <strong>persons</strong> be the list of Persons to be converted to the map</p>\n\n<p>1.Using Simple foreach and a Lambda Expression on the List</p>\n\n<pre><code>Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = new HashMap&lt;&gt;();\npersons.forEach(p-&gt;mapPersons.put(p.getAge(),p));\n</code></pre>\n\n<p>2.Using Collectors on Stream defined on the given List.</p>\n\n<pre><code> Map&lt;Integer,List&lt;Person&gt;&gt; mapPersons = \n           persons.stream().collect(Collectors.groupingBy(Person::getAge));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":381422,"reputation":11633,"user_id":736054,"accept_rate":80,"display_name":"Kamila Borowska"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1530533136,"creation_date":1530533136,"answer_id":51135842,"question_id":20363719,"body_markdown":"It&#39;s possible to use streams to do this. To remove the need to explicitly use `Collectors`, it&#39;s possible to import `toMap` statically (as recommended by Effective Java, third edition).\r\n\r\n    import static java.util.stream.Collectors.toMap;\r\n\r\n    private static Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return choices.stream().collect(toMap(Choice::getName, it -&gt; it));\r\n    }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>It's possible to use streams to do this. To remove the need to explicitly use <code>Collectors</code>, it's possible to import <code>toMap</code> statically (as recommended by Effective Java, third edition).</p>\n\n<pre><code>import static java.util.stream.Collectors.toMap;\n\nprivate static Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return choices.stream().collect(toMap(Choice::getName, it -&gt; it));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3057654,"reputation":5535,"user_id":2590960,"accept_rate":54,"display_name":"grep"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1531529977,"creation_date":1531528167,"answer_id":51334242,"question_id":20363719,"body_markdown":"I will write how to convert list to map using **generics** and **inversion of control**. Just **universal method!**\r\n\r\n**Maybe** we have **list of Integers** or list of **objects.** So the question is the following: what should be **key of the map?**\r\n\r\ncreate interface\r\n\r\n    public interface KeyFinder&lt;K, E&gt; {\r\n        K getKey(E e);\r\n    }\r\n\r\n\r\n\r\nnow using inversion of control:\r\n\r\n      static &lt;K, E&gt; Map&lt;K, E&gt; listToMap(List&lt;E&gt; list, KeyFinder&lt;K, E&gt; finder) {\r\n            return  list.stream().collect(Collectors.toMap(e -&gt; finder.getKey(e) , e -&gt; e));\r\n        }\r\n\r\n\r\nFor example, if we have objects of book , this class is to choose key for the map  \r\n\r\n    public class BookKeyFinder implements KeyFinder&lt;Long, Book&gt; {\r\n        @Override\r\n        public Long getKey(Book e) {\r\n            return e.getPrice()\r\n        }\r\n    }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I will write how to convert list to map using <strong>generics</strong> and <strong>inversion of control</strong>. Just <strong>universal method!</strong></p>\n\n<p><strong>Maybe</strong> we have <strong>list of Integers</strong> or list of <strong>objects.</strong> So the question is the following: what should be <strong>key of the map?</strong></p>\n\n<p>create interface</p>\n\n<pre><code>public interface KeyFinder&lt;K, E&gt; {\n    K getKey(E e);\n}\n</code></pre>\n\n<p>now using inversion of control:</p>\n\n<pre><code>  static &lt;K, E&gt; Map&lt;K, E&gt; listToMap(List&lt;E&gt; list, KeyFinder&lt;K, E&gt; finder) {\n        return  list.stream().collect(Collectors.toMap(e -&gt; finder.getKey(e) , e -&gt; e));\n    }\n</code></pre>\n\n<p>For example, if we have objects of book , this class is to choose key for the map  </p>\n\n<pre><code>public class BookKeyFinder implements KeyFinder&lt;Long, Book&gt; {\n    @Override\n    public Long getKey(Book e) {\n        return e.getPrice()\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1575780,"reputation":10830,"user_id":1462282,"accept_rate":100,"display_name":"Sahil Chhabra"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1686650442,"creation_date":1534488335,"answer_id":51889780,"question_id":20363719,"body_markdown":"Most of the answers listed miss a case when the **list has duplicate items**. In that case, their answer will throw `IllegalStateException`. Refer to the below code **to handle list duplicates** as well:\r\n\r\n    public Map&lt;String, Choice&gt; convertListToMap(List&lt;Choice&gt; choices) {\r\n        return choices.stream()\r\n            .collect(Collectors.toMap(Choice::getName, choice -&gt; choice,\r\n                (oldValue, newValue) -&gt; newValue));\r\n      }","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Most of the answers listed miss a case when the <strong>list has duplicate items</strong>. In that case, their answer will throw <code>IllegalStateException</code>. Refer to the below code <strong>to handle list duplicates</strong> as well:</p>\n<pre><code>public Map&lt;String, Choice&gt; convertListToMap(List&lt;Choice&gt; choices) {\n    return choices.stream()\n        .collect(Collectors.toMap(Choice::getName, choice -&gt; choice,\n            (oldValue, newValue) -&gt; newValue));\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8279939,"reputation":272,"user_id":6224955,"display_name":"Rajeev Ranjan"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1538571566,"creation_date":1538571566,"answer_id":52627607,"question_id":20363719,"body_markdown":"    List&lt;Integer&gt; listA = new ArrayList&lt;&gt;();\r\n\t\tlistA.add(1);\r\n\t\tlistA.add(5);\r\n\t\tlistA.add(3);\r\n\t\tlistA.add(4);\t\t\r\n\t\t\r\n\t\t\r\n\t\tSystem.out.println(listA.stream().collect(Collectors.toMap(x -&gt;x, x-&gt;x)));","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>List&lt;Integer&gt; listA = new ArrayList&lt;&gt;();\n    listA.add(1);\n    listA.add(5);\n    listA.add(3);\n    listA.add(4);       \n\n\n    System.out.println(listA.stream().collect(Collectors.toMap(x -&gt;x, x-&gt;x)));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5660675,"reputation":575,"user_id":4478439,"display_name":"Vaneet Kataria"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1565790797,"creation_date":1548181707,"answer_id":54314411,"question_id":20363719,"body_markdown":"If every new value for the same key name has to be overridden:\r\n\r\n```java\r\npublic Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\r\n    return choices.stream()\r\n        .collect(Collectors.toMap(Choice::getName,\r\n            Function.identity(),\r\n            (oldValue, newValue) - &gt; newValue));\r\n}\r\n```\r\n    \r\nIf all choices have to be grouped in a list for a name:\r\n    \r\n```java\r\npublic Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\r\n    return choices.stream().collect(Collectors.groupingBy(Choice::getName));\r\n}\r\n```","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>If every new value for the same key name has to be overridden:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\n    return choices.stream()\n        .collect(Collectors.toMap(Choice::getName,\n            Function.identity(),\n            (oldValue, newValue) - &gt; newValue));\n}\n</code></pre>\n\n<p>If all choices have to be grouped in a list for a name:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public Map &lt; String, Choice &gt; convertListToMap(List &lt; Choice &gt; choices) {\n    return choices.stream().collect(Collectors.groupingBy(Choice::getName));\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3178228,"reputation":4974,"user_id":2685581,"display_name":"Ajay Kumar"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1626003523,"creation_date":1548436118,"answer_id":54369850,"question_id":20363719,"body_markdown":"    String array[] = {&quot;ASDFASDFASDF&quot;,&quot;AA&quot;, &quot;BBB&quot;, &quot;CCCC&quot;, &quot;DD&quot;, &quot;EEDDDAD&quot;};\r\n        List&lt;String&gt; list = Arrays.asList(array);\r\n        Map&lt;Integer, String&gt; map = list.stream()\r\n                .collect(Collectors.toMap(s -&gt; s.length(), s -&gt; s, (x, y) -&gt; {\r\n                    System.out.println(&quot;Dublicate key&quot; + x);\r\n                    return x;\r\n                },()-&gt; new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo(s1))));\r\n        System.out.println(map);\r\n\r\n\r\nDublicate key AA\r\n\r\n```\r\n{12=ASDFASDFASDF, 7=EEDDDAD, 4=CCCC, 3=BBB, 2=AA}\r\n```","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>String array[] = {&quot;ASDFASDFASDF&quot;,&quot;AA&quot;, &quot;BBB&quot;, &quot;CCCC&quot;, &quot;DD&quot;, &quot;EEDDDAD&quot;};\n    List&lt;String&gt; list = Arrays.asList(array);\n    Map&lt;Integer, String&gt; map = list.stream()\n            .collect(Collectors.toMap(s -&gt; s.length(), s -&gt; s, (x, y) -&gt; {\n                System.out.println(&quot;Dublicate key&quot; + x);\n                return x;\n            },()-&gt; new TreeMap&lt;&gt;((s1,s2)-&gt;s2.compareTo(s1))));\n    System.out.println(map);\n</code></pre>\n<p>Dublicate key AA</p>\n<pre><code>{12=ASDFASDFASDF, 7=EEDDDAD, 4=CCCC, 3=BBB, 2=AA}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3726112,"reputation":61,"user_id":3099977,"display_name":"vaibhav"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566541737,"creation_date":1566530193,"answer_id":57619468,"question_id":20363719,"body_markdown":"    List&lt;V&gt; choices; // your list\r\n    Map&lt;K,V&gt; result = choices.stream().collect(Collectors.toMap(choice::getKey(),choice));\r\n    //assuming class &quot;V&quot; has a method to get the key, this method must handle case of duplicates too and provide a unique key.\r\n\r\n\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<pre><code>List&lt;V&gt; choices; // your list\nMap&lt;K,V&gt; result = choices.stream().collect(Collectors.toMap(choice::getKey(),choice));\n//assuming class \"V\" has a method to get the key, this method must handle case of duplicates too and provide a unique key.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6120309,"reputation":3055,"user_id":4774054,"accept_rate":0,"display_name":"Frank Neblung"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1574675753,"creation_date":1574675753,"answer_id":59029166,"question_id":20363719,"body_markdown":"As an alternative to `guava` one can use [kotlin-stdlib](https://search.maven.org/artifact/org.jetbrains.kotlin/kotlin-stdlib)\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return CollectionsKt.associateBy(choices, Choice::getName);\r\n    }\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>As an alternative to <code>guava</code> one can use <a href=\"https://search.maven.org/artifact/org.jetbrains.kotlin/kotlin-stdlib\" rel=\"nofollow noreferrer\">kotlin-stdlib</a></p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return CollectionsKt.associateBy(choices, Choice::getName);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":479050,"reputation":9672,"user_id":891479,"accept_rate":79,"display_name":"L. G."},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1603294580,"creation_date":1603294580,"answer_id":64467028,"question_id":20363719,"body_markdown":"Another possibility only present in comments yet:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n    choices.stream().collect(Collectors.toMap(c -&gt; c.getName(), c -&gt; c)));\r\n\r\n\r\nUseful if you want to use a parameter of a sub-object as Key:\r\n\r\n    Map&lt;String, Choice&gt; result =\r\n    choices.stream().collect(Collectors.toMap(c -&gt; c.getUser().getName(), c -&gt; c)));\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>Another possibility only present in comments yet:</p>\n<pre><code>Map&lt;String, Choice&gt; result =\nchoices.stream().collect(Collectors.toMap(c -&gt; c.getName(), c -&gt; c)));\n</code></pre>\n<p>Useful if you want to use a parameter of a sub-object as Key:</p>\n<pre><code>Map&lt;String, Choice&gt; result =\nchoices.stream().collect(Collectors.toMap(c -&gt; c.getUser().getName(), c -&gt; c)));\n</code></pre>\n"}],"owner":{"account_id":1834770,"reputation":15878,"user_id":1665365,"accept_rate":78,"display_name":"Tom"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":749514,"favorite_count":0,"down_vote_count":1,"up_vote_count":1048,"accepted_answer_id":20363874,"answer_count":23,"score":1047,"last_activity_date":1686650442,"creation_date":1386112729,"question_id":20363719,"body_markdown":"I want to translate a List of objects into a Map using Java 8&#39;s streams and lambdas.\r\n\r\nThis is how I would write it in Java 7 and below.\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n            final Map&lt;String, Choice&gt; hashMap = new HashMap&lt;&gt;();\r\n            for (final Choice choice : choices) {\r\n                hashMap.put(choice.getName(), choice);\r\n            }\r\n            return hashMap;\r\n    }\r\n\r\nI can accomplish this easily using Java 8 and Guava but I would like to know how to do this without Guava.\r\n\r\nIn Guava:\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return Maps.uniqueIndex(choices, new Function&lt;Choice, String&gt;() {\r\n    \r\n            @Override\r\n            public String apply(final Choice input) {\r\n                return input.getName();\r\n            }\r\n        });\r\n    }\r\n    \r\n\r\nAnd Guava with Java 8 lambdas.\r\n\r\n    private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\r\n        return Maps.uniqueIndex(choices, Choice::getName);\r\n    }\r\n\r\n","title":"Java 8 List&lt;V&gt; into Map&lt;K, V&gt;","body":"<p>I want to translate a List of objects into a Map using Java 8's streams and lambdas.</p>\n\n<p>This is how I would write it in Java 7 and below.</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n        final Map&lt;String, Choice&gt; hashMap = new HashMap&lt;&gt;();\n        for (final Choice choice : choices) {\n            hashMap.put(choice.getName(), choice);\n        }\n        return hashMap;\n}\n</code></pre>\n\n<p>I can accomplish this easily using Java 8 and Guava but I would like to know how to do this without Guava.</p>\n\n<p>In Guava:</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return Maps.uniqueIndex(choices, new Function&lt;Choice, String&gt;() {\n\n        @Override\n        public String apply(final Choice input) {\n            return input.getName();\n        }\n    });\n}\n</code></pre>\n\n<p>And Guava with Java 8 lambdas.</p>\n\n<pre><code>private Map&lt;String, Choice&gt; nameMap(List&lt;Choice&gt; choices) {\n    return Maps.uniqueIndex(choices, Choice::getName);\n}\n</code></pre>\n"},{"tags":["java","hibernate","jdbc","aspectj","aspectj-maven-plugin"],"comments":[{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686506567,"post_id":76450431,"comment_id":134804459,"body_markdown":"Weaving should work, but the woven Hibernate classes will be part of your application JAR. If you still have the original Hibernate library on the classpath, you might get conflicts with duplicate classes. This can be solved, but it strongly depends on your actual POM or set of POMs. I cannot answer that in one sentence. Maybe instead of post-compile weaving, load-time weaving would make life simpler for you. I can help you, but I need more than a POM snippet. Please publish an [MCVE](https://stackoverflow.com/help/mcve) reproducing the problem on GitHub","body":"Weaving should work, but the woven Hibernate classes will be part of your application JAR. If you still have the original Hibernate library on the classpath, you might get conflicts with duplicate classes. This can be solved, but it strongly depends on your actual POM or set of POMs. I cannot answer that in one sentence. Maybe instead of post-compile weaving, load-time weaving would make life simpler for you. I can help you, but I need more than a POM snippet. Please publish an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> reproducing the problem on GitHub"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686507198,"post_id":76450431,"comment_id":134804557,"body_markdown":"You also seem to be using Lombok, which can lead to problems during compile time in connection with AspectJ. But I do not want to speculate. I need to see a minimal version of your project, as small as possible, just big enough to reproduce the compilation problems. Then I can analyse it and suggest a solution.","body":"You also seem to be using Lombok, which can lead to problems during compile time in connection with AspectJ. But I do not want to speculate. I need to see a minimal version of your project, as small as possible, just big enough to reproduce the compilation problems. Then I can analyse it and suggest a solution."},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686578179,"post_id":76450431,"comment_id":134813780,"body_markdown":"The library with aspect https://github.com/niallrox/db-analyzer\nApplication with aspect dependency https://github.com/niallrox/djidjya-java-kubernetes-template","body":"The library with aspect <a href=\"https://github.com/niallrox/db-analyzer\" rel=\"nofollow noreferrer\">github.com/niallrox/db-analyzer</a> Application with aspect dependency <a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template\" rel=\"nofollow noreferrer\">github.com/niallrox/djidjya-java-kubernetes-template</a>"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1686580037,"post_id":76450431,"comment_id":134814268,"body_markdown":"&quot;The POM for com.djidjya.team:djidjya-boot-starter:jar:2.10 is missing, no dependency information available&quot;. Besides, your project has a weave dependency not on Hibernate but on Spring JDBC. Your question describes it differently.","body":"&quot;The POM for com.djidjya.team:djidjya-boot-starter:jar:2.10 is missing, no dependency information available&quot;. Besides, your project has a weave dependency not on Hibernate but on Spring JDBC. Your question describes it differently."},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686594232,"post_id":76450431,"comment_id":134817377,"body_markdown":"djidjya-boot-starter is private library and it has not any db libs inside. I wrote about spring jdbc at start of question. For causing error u have to switch jdbc starter dependency to jpa starter and weave another lib as I wrote in description. I will remove my starter from dependencies fort easily reproducing","body":"djidjya-boot-starter is private library and it has not any db libs inside. I wrote about spring jdbc at start of question. For causing error u have to switch jdbc starter dependency to jpa starter and weave another lib as I wrote in description. I will remove my starter from dependencies fort easily reproducing"},{"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"score":0,"creation_date":1686599783,"post_id":76450431,"comment_id":134818301,"body_markdown":"@kriegaex I update app(remove starter and include hibernate lib to weave config in pom) https://github.com/niallrox/djidjya-java-kubernetes-template","body":"@kriegaex I update app(remove starter and include hibernate lib to weave config in pom) <a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template\" rel=\"nofollow noreferrer\">github.com/niallrox/djidjya-java-kubernetes-template</a>"}],"answers":[{"tags":[],"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686650383,"creation_date":1686641555,"answer_id":76462610,"question_id":76450431,"body_markdown":"Thanks for the two [MCVE](https://stackoverflow.com/help/mcve) projects. They helped me to reproduce the problem, and it is actually an AspectJ problem. There are missing null checks for a certain method call in the weaver, which subsequently leads to errors in case of parsing method signatures in pointcuts, pointing to methods unavailable during weaving. Imagine that a `call()` pointcut is woven into a class, but then a dependency class is unavailable or is present in a different version with different methods. It is an edge case, but you bumped into it.\r\n\r\nI am in the process of fixing the problem, see [AspectJ issue #243](https://github.com/eclipse-aspectj/aspectj/issues/243).\r\n\r\nFurthermore, I sent you two PRs for your projects:\r\n  * https://github.com/niallrox/db-analyzer/pull/1\r\n  * https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1\r\n\r\nYou are using Java 17 in one of them, so you should use the AspectJ.dev version of AspectJ Maven Plugin, because the Mojohaus version still does not support Java 17 in version 1.14.0. The AspectJ.dev version is also the version recommended by the AspectJ project, because it is better maintained and has a few more features. In the PRs, I also updated the AspectJ version to the latest snapshot containing the fix for your problem, so you can easily retest. _Not important here, but FYI, the snapshot also has Java 20 compilation support, while the latest release 1.9.19 only supports Java 19._\r\n\r\n---\r\n\r\n**Update:** In order to use an AspectJ snapshot, you need this repository:\r\n\r\n```xml\r\n&lt;repositories&gt;\r\n    &lt;repository&gt;\r\n        &lt;id&gt;ossrh-snapshots&lt;/id&gt;\r\n        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\r\n        &lt;releases&gt;\r\n            &lt;enabled&gt;false&lt;/enabled&gt;\r\n        &lt;/releases&gt;\r\n        &lt;snapshots&gt;\r\n            &lt;enabled&gt;true&lt;/enabled&gt;\r\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\r\n        &lt;/snapshots&gt;\r\n    &lt;/repository&gt;\r\n&lt;/repositories&gt;\r\n```\r\n","title":"How to weave hibernate by aspectj?","body":"<p>Thanks for the two <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> projects. They helped me to reproduce the problem, and it is actually an AspectJ problem. There are missing null checks for a certain method call in the weaver, which subsequently leads to errors in case of parsing method signatures in pointcuts, pointing to methods unavailable during weaving. Imagine that a <code>call()</code> pointcut is woven into a class, but then a dependency class is unavailable or is present in a different version with different methods. It is an edge case, but you bumped into it.</p>\n<p>I am in the process of fixing the problem, see <a href=\"https://github.com/eclipse-aspectj/aspectj/issues/243\" rel=\"nofollow noreferrer\">AspectJ issue #243</a>.</p>\n<p>Furthermore, I sent you two PRs for your projects:</p>\n<ul>\n<li><a href=\"https://github.com/niallrox/db-analyzer/pull/1\" rel=\"nofollow noreferrer\">https://github.com/niallrox/db-analyzer/pull/1</a></li>\n<li><a href=\"https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1\" rel=\"nofollow noreferrer\">https://github.com/niallrox/djidjya-java-kubernetes-template/pull/1</a></li>\n</ul>\n<p>You are using Java 17 in one of them, so you should use the AspectJ.dev version of AspectJ Maven Plugin, because the Mojohaus version still does not support Java 17 in version 1.14.0. The AspectJ.dev version is also the version recommended by the AspectJ project, because it is better maintained and has a few more features. In the PRs, I also updated the AspectJ version to the latest snapshot containing the fix for your problem, so you can easily retest. <em>Not important here, but FYI, the snapshot also has Java 20 compilation support, while the latest release 1.9.19 only supports Java 19.</em></p>\n<hr />\n<p><strong>Update:</strong> In order to use an AspectJ snapshot, you need this repository:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;ossrh-snapshots&lt;/id&gt;\n        &lt;url&gt;https://oss.sonatype.org/content/repositories/snapshots&lt;/url&gt;\n        &lt;releases&gt;\n            &lt;enabled&gt;false&lt;/enabled&gt;\n        &lt;/releases&gt;\n        &lt;snapshots&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;updatePolicy&gt;always&lt;/updatePolicy&gt;\n        &lt;/snapshots&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n</code></pre>\n"}],"owner":{"account_id":28798075,"reputation":3,"user_id":22055749,"display_name":"Maxim Rybalchenko"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462610,"answer_count":1,"score":0,"last_activity_date":1686650383,"creation_date":1686485646,"question_id":76450431,"body_markdown":"I have a library with aspect which scan all statement executions and doing some logic with sql sentence.\r\n```java\r\n@Pointcut(&quot;target(java.sql.Statement)&quot;)\r\npublic void statement() {}\r\n\r\n@AfterReturning(&quot;!within(AnalyzerAspect) &amp;&amp; statement() &amp;&amp; args(sql)&quot;)\r\npublic void after(JoinPoint jp, String sql) throws Throwable {\r\n  // some logic\r\n}\r\n```\r\n\r\nWhen I use it for jdbc operations it works fine. I also used it with spring-jdbc like that\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;weaveDependencies&gt;\r\n      &lt;weaveDependency&gt;\r\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n      &lt;/weaveDependency&gt;\r\n    &lt;/weaveDependencies&gt;\r\n    &lt;aspectLibraries&gt;\r\n      &lt;aspectLibrary&gt;\r\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\r\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\r\n      &lt;/aspectLibrary&gt;\r\n    &lt;/aspectLibraries&gt;\r\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;compile&lt;/goal&gt;\r\n        &lt;goal&gt;test-compile&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nBut when I try to weave hibernate core dependency the same way\r\n\r\n```xml\r\n&lt;plugin&gt;\r\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\r\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\r\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\r\n  &lt;configuration&gt;\r\n    &lt;weaveDependencies&gt;\r\n      &lt;weaveDependency&gt;\r\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\r\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\r\n      &lt;/weaveDependency&gt;\r\n    &lt;/weaveDependencies&gt;\r\n    &lt;aspectLibraries&gt;\r\n      &lt;aspectLibrary&gt;\r\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\r\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\r\n      &lt;/aspectLibrary&gt;\r\n    &lt;/aspectLibraries&gt;\r\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\r\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\r\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\r\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n  &lt;/configuration&gt;\r\n  &lt;executions&gt;\r\n    &lt;execution&gt;\r\n      &lt;goals&gt;\r\n        &lt;goal&gt;compile&lt;/goal&gt;\r\n        &lt;goal&gt;test-compile&lt;/goal&gt;\r\n      &lt;/goals&gt;\r\n    &lt;/execution&gt;\r\n  &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nI have an error on aspectj compile task.\r\n\r\nIn logs I found a lot of NPE&#39;s(264) like that\r\n\r\n```none\r\nend public class org.hibernate.metamodel.mapping.ordering.ast.ParseTreeVisitor\r\n -- (NullPointerException) Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\nCannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\njava.lang.NullPointerException: Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\r\n```\r\n\r\nHow to resolve that? Maybe aspectj plugin has an option to skip some weaves if they causes an error or maybe I have to put some properties to resolve that generic parameter types?\r\n\r\n[Full aspectj compiler log](https://storage.yandexcloud.net/hack-bucket/reports/ajcore.20230611.144650.527.txt)\r\n\r\nI don&#39;t find any links with same problem in weaving, but there is one with closest exception: [link](https://stackoverflow.com/questions/8859987/aspectj-methodsignature-returning-null-for-getparameternames)","title":"How to weave hibernate by aspectj?","body":"<p>I have a library with aspect which scan all statement executions and doing some logic with sql sentence.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Pointcut(&quot;target(java.sql.Statement)&quot;)\npublic void statement() {}\n\n@AfterReturning(&quot;!within(AnalyzerAspect) &amp;&amp; statement() &amp;&amp; args(sql)&quot;)\npublic void after(JoinPoint jp, String sql) throws Throwable {\n  // some logic\n}\n</code></pre>\n<p>When I use it for jdbc operations it works fine. I also used it with spring-jdbc like that</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;weaveDependencies&gt;\n      &lt;weaveDependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n      &lt;/weaveDependency&gt;\n    &lt;/weaveDependencies&gt;\n    &lt;aspectLibraries&gt;\n      &lt;aspectLibrary&gt;\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\n      &lt;/aspectLibrary&gt;\n    &lt;/aspectLibraries&gt;\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;goal&gt;test-compile&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>But when I try to weave hibernate core dependency the same way</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;\n  &lt;artifactId&gt;aspectj-maven-plugin&lt;/artifactId&gt;\n  &lt;version&gt;${aspect.compiler.plugin.version}&lt;/version&gt;\n  &lt;configuration&gt;\n    &lt;weaveDependencies&gt;\n      &lt;weaveDependency&gt;\n        &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n      &lt;/weaveDependency&gt;\n    &lt;/weaveDependencies&gt;\n    &lt;aspectLibraries&gt;\n      &lt;aspectLibrary&gt;\n        &lt;groupId&gt;edu.ifmo.diploma&lt;/groupId&gt; &lt;!-- My library --&gt;\n        &lt;artifactId&gt;db-analyzer&lt;/artifactId&gt;\n      &lt;/aspectLibrary&gt;\n    &lt;/aspectLibraries&gt;\n    &lt;complianceLevel&gt;11&lt;/complianceLevel&gt;\n    &lt;showWeaveInfo&gt;true&lt;/showWeaveInfo&gt;\n    &lt;Xlint&gt;ignore&lt;/Xlint&gt;\n    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n  &lt;/configuration&gt;\n  &lt;executions&gt;\n    &lt;execution&gt;\n      &lt;goals&gt;\n        &lt;goal&gt;compile&lt;/goal&gt;\n        &lt;goal&gt;test-compile&lt;/goal&gt;\n      &lt;/goals&gt;\n    &lt;/execution&gt;\n  &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>I have an error on aspectj compile task.</p>\n<p>In logs I found a lot of NPE's(264) like that</p>\n<pre class=\"lang-none prettyprint-override\"><code>end public class org.hibernate.metamodel.mapping.ordering.ast.ParseTreeVisitor\n -- (NullPointerException) Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\nCannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\njava.lang.NullPointerException: Cannot invoke &quot;org.aspectj.weaver.ResolvedMember.getGenericParameterTypes()&quot; because the return value of &quot;org.aspectj.weaver.Shadow.getResolvedSignature()&quot; is null\n</code></pre>\n<p>How to resolve that? Maybe aspectj plugin has an option to skip some weaves if they causes an error or maybe I have to put some properties to resolve that generic parameter types?</p>\n<p><a href=\"https://storage.yandexcloud.net/hack-bucket/reports/ajcore.20230611.144650.527.txt\" rel=\"nofollow noreferrer\">Full aspectj compiler log</a></p>\n<p>I don't find any links with same problem in weaving, but there is one with closest exception: <a href=\"https://stackoverflow.com/questions/8859987/aspectj-methodsignature-returning-null-for-getparameternames\">link</a></p>\n"},{"tags":["java","difference"],"comments":[{"owner":{"account_id":2079767,"reputation":6300,"user_id":1852033,"accept_rate":77,"display_name":"Leo Ufimtsev"},"score":4,"creation_date":1541804929,"post_id":22358071,"comment_id":93355507,"body_markdown":"This might also be relevant if you&#39;re planning on moving from Oracle to OpenJDK since Oracle isn&#39;t free anymore. https://developers.redhat.com/blog/2018/11/05/migrating-from-oracle-jdk-to-openjdk-on-red-hat-enterprise-linux-what-you-need-to-know/","body":"This might also be relevant if you&#39;re planning on moving from Oracle to OpenJDK since Oracle isn&#39;t free anymore. <a href=\"https://developers.redhat.com/blog/2018/11/05/migrating-from-oracle-jdk-to-openjdk-on-red-hat-enterprise-linux-what-you-need-to-know/\" rel=\"nofollow noreferrer\">developers.redhat.com/blog/2018/11/05/&hellip;</a>"},{"owner":{"account_id":90378,"reputation":2824,"user_id":248847,"accept_rate":85,"display_name":"KrishPrabakar"},"score":3,"creation_date":1595492763,"post_id":22358071,"comment_id":111495144,"body_markdown":"Found a better answer: https://stackoverflow.com/a/59041992/248847","body":"Found a better answer: <a href=\"https://stackoverflow.com/a/59041992/248847\">stackoverflow.com/a/59041992/248847</a>"}],"answers":[{"tags":[],"owner":{"account_id":96393,"reputation":23995,"user_id":262022,"accept_rate":87,"display_name":"radai"},"down_vote_count":1,"up_vote_count":347,"is_accepted":false,"score":346,"last_activity_date":1686650302,"creation_date":1394642590,"answer_id":22358234,"question_id":22358071,"body_markdown":"For **Java 7**, nothing crucial. The OpenJDK project is mostly based on [HotSpot][1] source code donated by Sun.\r\n\r\nMoreover, OpenJDK was selected to be the [reference implementation for Java 7][2] and is maintained by Oracle engineers.\r\n\r\nThere&#39;s a more detailed answer from 2012 on [difference between JVM, JDK, JRE &amp; OpenJDK][3], which links to [an Oracle blog post][4]:\r\n\r\n&gt; **Q**: What is the difference between the source code found in the OpenJDK\r\n&gt; repository, and the code you use to build the Oracle JDK?\r\n&gt;\r\n&gt; **A**: It is very close - our build process for Oracle JDK releases builds\r\n&gt; on OpenJDK 7 by adding just a couple of pieces, like the deployment code,\r\n&gt; which includes Oracle&#39;s implementation of the Java Plugin and Java\r\n&gt; WebStart, as well as some closed source third party components like a\r\n&gt; graphics rasterizer, some open source third party components, like\r\n&gt; Rhino, and a few bits and pieces here and there, like additional\r\n&gt; documentation or third party fonts. Moving forward, our intent is to\r\n&gt; open source all pieces of the Oracle JDK except those that we consider\r\n&gt; commercial features such as JRockit Mission Control (not yet available\r\n&gt; in Oracle JDK), and replace encumbered third party components with\r\n&gt; open source alternatives to achieve closer parity between the code\r\n&gt; bases.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/HotSpot_(virtual_machine)\r\n  [2]: https://web.archive.org/web/20160413162542/https://blogs.oracle.com/henrik/entry/moving_to_openjdk_as_the\r\n  [3]: https://stackoverflow.com/questions/11547458/what-is-differences-between-jvm-jdk-jre-openjdk\r\n  [4]: https://web.archive.org/web/20150629214653/https://blogs.oracle.com/henrik/entry/java_7_questions_answers","title":"Differences between Oracle JDK and OpenJDK","body":"<p>For <strong>Java 7</strong>, nothing crucial. The OpenJDK project is mostly based on <a href=\"https://en.wikipedia.org/wiki/HotSpot_(virtual_machine)\" rel=\"nofollow noreferrer\">HotSpot</a> source code donated by Sun.</p>\n<p>Moreover, OpenJDK was selected to be the <a href=\"https://web.archive.org/web/20160413162542/https://blogs.oracle.com/henrik/entry/moving_to_openjdk_as_the\" rel=\"nofollow noreferrer\">reference implementation for Java 7</a> and is maintained by Oracle engineers.</p>\n<p>There's a more detailed answer from 2012 on <a href=\"https://stackoverflow.com/questions/11547458/what-is-differences-between-jvm-jdk-jre-openjdk\">difference between JVM, JDK, JRE &amp; OpenJDK</a>, which links to <a href=\"https://web.archive.org/web/20150629214653/https://blogs.oracle.com/henrik/entry/java_7_questions_answers\" rel=\"nofollow noreferrer\">an Oracle blog post</a>:</p>\n<blockquote>\n<p><strong>Q</strong>: What is the difference between the source code found in the OpenJDK\nrepository, and the code you use to build the Oracle JDK?</p>\n<p><strong>A</strong>: It is very close - our build process for Oracle JDK releases builds\non OpenJDK 7 by adding just a couple of pieces, like the deployment code,\nwhich includes Oracle's implementation of the Java Plugin and Java\nWebStart, as well as some closed source third party components like a\ngraphics rasterizer, some open source third party components, like\nRhino, and a few bits and pieces here and there, like additional\ndocumentation or third party fonts. Moving forward, our intent is to\nopen source all pieces of the Oracle JDK except those that we consider\ncommercial features such as JRockit Mission Control (not yet available\nin Oracle JDK), and replace encumbered third party components with\nopen source alternatives to achieve closer parity between the code\nbases.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":4070522,"reputation":5252,"user_id":3343801,"display_name":"Venkateswara Rao"},"down_vote_count":2,"up_vote_count":427,"is_accepted":true,"score":425,"last_activity_date":1539486508,"creation_date":1469981501,"answer_id":38685948,"question_id":22358071,"body_markdown":"Both OpenJDK and Oracle JDK are created and maintained currently by Oracle only.\r\n\r\nOpenJDK and Oracle JDK are implementations of the same Java specification passed the TCK (Java Technology Certification Kit).\r\n\r\nMost of the vendors of JDK are written on top of OpenJDK by doing a few tweaks to [mostly to replace licensed proprietary parts / replace with more high-performance items that only work on specific OS] components without breaking the TCK compatibility.\r\n\r\nMany vendors implemented the Java specification and got TCK passed. For example, IBM J9, Azul Zulu, Azul Zing, and Oracle JDK.\r\n\r\nAlmost every existing JDK is derived from OpenJDK.\r\n\r\nAs suggested by many, licensing is a change between JDKs.  \r\n\r\nStarting with JDK 11 accessing the long time support Oracle JDK/Java SE will now require a commercial license. You should now pay attention to which JDK you&#39;re installing as Oracle JDK without subscription could stop working. [source](https://www.infoworld.com/article/3284164/java/oracle-now-requires-a-subscription-to-use-java-se.html)\r\n\r\nRef: *[List of Java virtual machines][1]*\r\n\r\n  [1]: https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations\r\n\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Both OpenJDK and Oracle JDK are created and maintained currently by Oracle only.</p>\n\n<p>OpenJDK and Oracle JDK are implementations of the same Java specification passed the TCK (Java Technology Certification Kit).</p>\n\n<p>Most of the vendors of JDK are written on top of OpenJDK by doing a few tweaks to [mostly to replace licensed proprietary parts / replace with more high-performance items that only work on specific OS] components without breaking the TCK compatibility.</p>\n\n<p>Many vendors implemented the Java specification and got TCK passed. For example, IBM J9, Azul Zulu, Azul Zing, and Oracle JDK.</p>\n\n<p>Almost every existing JDK is derived from OpenJDK.</p>\n\n<p>As suggested by many, licensing is a change between JDKs.  </p>\n\n<p>Starting with JDK 11 accessing the long time support Oracle JDK/Java SE will now require a commercial license. You should now pay attention to which JDK you're installing as Oracle JDK without subscription could stop working. <a href=\"https://www.infoworld.com/article/3284164/java/oracle-now-requires-a-subscription-to-use-java-se.html\" rel=\"noreferrer\">source</a></p>\n\n<p>Ref: <em><a href=\"https://en.wikipedia.org/wiki/List_of_Java_virtual_machines#Proprietary_implementations\" rel=\"noreferrer\">List of Java virtual machines</a></em></p>\n"},{"tags":[],"owner":{"account_id":7002959,"reputation":581,"user_id":6640190,"display_name":"45hook"},"down_vote_count":0,"up_vote_count":48,"is_accepted":false,"score":48,"last_activity_date":1545861353,"creation_date":1499943526,"answer_id":45078661,"question_id":22358071,"body_markdown":"For **Java 8**, Oracle JDK vs. OpenJDK my take of key differences:\r\n\r\n - OpenJDK is an open source implementation of the Java Standard Edition platform with contribution from Oracle and the open Java community.\r\n\r\n - OpenJDK is released under license GPL v2 wherein Oracle JDK is licensed under Oracle Binary Code License Agreement.\r\n\r\n - Actually, Oracle JDK’s build process builds from OpenJDK source code. So there is no major technical difference between Oracle JDK and OpenJDK.\r\nApart from the base code, Oracle JDK includes, Oracle’s implementation of Java Plugin and Java WebStart. It also includes third-party closed source and open source components like graphics rasterizer and [Rhino][1] respectively.\r\nOpenJDK Font Renderer and Oracle JDK Flight Recorder are the noticeable major differences between Oracle JDK and OpenJDK.\r\n - Rockit was the Oracle’s JVM and from Java SE 7, HotSpot and JRockit merged into a single JVM. So now we have only the merged HotSpot JVM available.\r\n - There are instances where people claim that they had issues while running OpenJDK and that got solved when switched over to Oracle JDK.\r\n - Twitter has its own JDK.\r\n - Software like Minecraft expects Oracle JDK to be used. In fact, warns.\r\n\r\nFor a full list of differences please see the source article: [Oracle JDK vs OpenJDK and Java JDK Development Process][2]\r\n\r\n  [1]: http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29\r\n  [2]: http://javapapers.com/java/oracle-jdk-vs-openjdk-and-java-jdk-development-process/\r\n\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<p>For <strong>Java 8</strong>, Oracle JDK vs. OpenJDK my take of key differences:</p>\n\n<ul>\n<li><p>OpenJDK is an open source implementation of the Java Standard Edition platform with contribution from Oracle and the open Java community.</p></li>\n<li><p>OpenJDK is released under license GPL v2 wherein Oracle JDK is licensed under Oracle Binary Code License Agreement.</p></li>\n<li><p>Actually, Oracle JDK’s build process builds from OpenJDK source code. So there is no major technical difference between Oracle JDK and OpenJDK.\nApart from the base code, Oracle JDK includes, Oracle’s implementation of Java Plugin and Java WebStart. It also includes third-party closed source and open source components like graphics rasterizer and <a href=\"http://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29\" rel=\"noreferrer\">Rhino</a> respectively.\nOpenJDK Font Renderer and Oracle JDK Flight Recorder are the noticeable major differences between Oracle JDK and OpenJDK.</p></li>\n<li>Rockit was the Oracle’s JVM and from Java SE 7, HotSpot and JRockit merged into a single JVM. So now we have only the merged HotSpot JVM available.</li>\n<li>There are instances where people claim that they had issues while running OpenJDK and that got solved when switched over to Oracle JDK.</li>\n<li>Twitter has its own JDK.</li>\n<li>Software like Minecraft expects Oracle JDK to be used. In fact, warns.</li>\n</ul>\n\n<p>For a full list of differences please see the source article: <a href=\"http://javapapers.com/java/oracle-jdk-vs-openjdk-and-java-jdk-development-process/\" rel=\"noreferrer\">Oracle JDK vs OpenJDK and Java JDK Development Process</a></p>\n"},{"tags":[],"owner":{"account_id":3410182,"reputation":12151,"user_id":2860319,"accept_rate":75,"display_name":"The Gilbert Arenas Dagger"},"down_vote_count":0,"up_vote_count":113,"is_accepted":false,"score":113,"last_activity_date":1518210445,"creation_date":1518210445,"answer_id":48714102,"question_id":22358071,"body_markdown":"A key difference going forward is the release schedule and support policy.  \r\n\r\nOpenJDK\r\n-------\r\n\r\nOpenJDK will have a feature release every 6 months which is only supported until the next feature release. It&#39;s essentially a continuous stream of releases targeted to developers.  \r\n\r\nOracle JDK\r\n----------\r\n\r\nThe Oracle JDK is targeted more towards an enterprise audience which values stability.  It&#39;s based on one of the OpenJDK releases but\r\n is then given long term support (LTS).  The Oracle JDK has releases planned every 3 years. \r\n\r\n[![enter image description here][1]][1]\r\n\r\nSource: https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/mmVJs.png","title":"Differences between Oracle JDK and OpenJDK","body":"<p>A key difference going forward is the release schedule and support policy.  </p>\n\n<h2>OpenJDK</h2>\n\n<p>OpenJDK will have a feature release every 6 months which is only supported until the next feature release. It's essentially a continuous stream of releases targeted to developers.  </p>\n\n<h2>Oracle JDK</h2>\n\n<p>The Oracle JDK is targeted more towards an enterprise audience which values stability.  It's based on one of the OpenJDK releases but\n is then given long term support (LTS).  The Oracle JDK has releases planned every 3 years. </p>\n\n<p><a href=\"https://i.stack.imgur.com/mmVJs.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mmVJs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Source: <a href=\"https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events\" rel=\"noreferrer\">https://www.oracle.com/java/java9-screencasts.html?bcid=5582439790001&amp;playerType=single-social&amp;size=events</a></p>\n"},{"tags":[],"owner":{"account_id":14161964,"reputation":471,"user_id":10231012,"display_name":"mars"},"down_vote_count":0,"up_vote_count":37,"is_accepted":false,"score":37,"last_activity_date":1534362596,"creation_date":1534362596,"answer_id":51865483,"question_id":22358071,"body_markdown":"The Oracle and OpenJDK JVMs are the same and have the same GC features (as of the latest versions 10+). Prior to Oracle managing the OpenJDK JVM there were concrete differences that made that old Openjdk JVM almost unusable in many environments. The JVMs are now the same.\r\n\r\nThe JDKs which include the JVM as part of the Kit, differ by licensing, release and maintenance schedule, and the software libraries included in the JDK. Crucial differences to me also mean things that would make code not run if not present.  Not only licensing. \r\n\r\n    diff --brief -r openjdk oraclejdk\r\n\r\nCrucially the following files are missing in addition to a bunch of others on the linux JDK (So if you &#39;claimed&#39; that code didn&#39;t work on OpenJDK and did so on OracleJDK while you were using javafx then you were correct):\r\n\r\n\r\n    Only in jdk-10.0.1/bin: javapackager\r\n    Only in jdk-10.0.1/bin: javaws\r\n    Only in jdk-10.0.1/bin: jcontrol\r\n    Only in jdk-10.0.1/bin: jmc\r\n    Only in jdk-10.0.1/bin: jweblauncher\r\n    Only in jdk-10.0.1/lib: ant-javafx.jar\r\n    Only in jdk-10.0.1/lib: deploy\r\n    Only in jdk-10.0.1/lib: deploy.jar\r\n    Only in jdk-10.0.1/lib: desktop\r\n    Only in jdk-10.0.1/lib: fontconfig.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.properties.src\r\n    Only in jdk-10.0.1/lib: fontconfig.RedHat.6.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.RedHat.6.properties.src\r\n    Only in jdk-10.0.1/lib: fontconfig.SuSE.11.bfc\r\n    Only in jdk-10.0.1/lib: fontconfig.SuSE.11.properties.src\r\n    Only in jdk-10.0.1/lib: fonts\r\n    Only in jdk-10.0.1/lib: javafx.properties\r\n    Only in jdk-10.0.1/lib: javafx-swt.jar\r\n    Only in jdk-10.0.1/lib: java.jnlp.jar\r\n    Only in jdk-10.0.1/lib: javaws.jar\r\n    Only in jdk-10.0.1/lib: jdk.deploy.jar\r\n    Only in jdk-10.0.1/lib: jdk.javaws.jar\r\n    Only in jdk-10.0.1/lib: jdk.plugin.jar\r\n    Only in jdk-10.0.1/lib: jfr\r\n    Only in jdk-10.0.1/lib: libavplugin-53.so\r\n    Only in jdk-10.0.1/lib: libavplugin-54.so\r\n    Only in jdk-10.0.1/lib: libavplugin-55.so\r\n    Only in jdk-10.0.1/lib: libavplugin-56.so\r\n    Only in jdk-10.0.1/lib: libavplugin-57.so\r\n    Only in jdk-10.0.1/lib: libavplugin-ffmpeg-56.so\r\n    Only in jdk-10.0.1/lib: libavplugin-ffmpeg-57.so\r\n    Only in jdk-10.0.1/lib: libbci.so\r\n    Only in jdk-10.0.1/lib: libcmm.so\r\n    Only in jdk-10.0.1/lib: libdecora_sse.so\r\n    Only in jdk-10.0.1/lib: libdeploy.so\r\n    Only in jdk-10.0.1/lib: libfxplugins.so\r\n    Only in jdk-10.0.1/lib: libglassgtk2.so\r\n    Only in jdk-10.0.1/lib: libglassgtk3.so\r\n    Only in jdk-10.0.1/lib: libglass.so\r\n    Only in jdk-10.0.1/lib: libgstreamer-lite.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font_freetype.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font_pango.so\r\n    Only in jdk-10.0.1/lib: libjavafx_font.so\r\n    Only in jdk-10.0.1/lib: libjavafx_iio.so\r\n    Only in jdk-10.0.1/lib: libjfxmedia.so\r\n    Only in jdk-10.0.1/lib: libjfxwebkit.so\r\n    Only in jdk-10.0.1/lib: libnpjp2.so\r\n    Only in jdk-10.0.1/lib: libprism_common.so\r\n    Only in jdk-10.0.1/lib: libprism_es2.so\r\n    Only in jdk-10.0.1/lib: libprism_sw.so\r\n    Only in jdk-10.0.1/lib: librm.so\r\n    Only in jdk-10.0.1/lib: libt2k.so\r\n    Only in jdk-10.0.1/lib: locale\r\n    Only in jdk-10.0.1/lib: missioncontrol\r\n    Only in jdk-10.0.1/lib: oblique-fonts\r\n    Only in jdk-10.0.1/lib: plugin.jar\r\n    Only in jdk-10.0.1/lib: plugin-legacy.jar\r\n    Only in jdk-10.0.1/lib/security: blacklist\r\n    Only in jdk-10.0.1/lib/security: public_suffix_list.dat\r\n    Only in jdk-10.0.1/lib/security: trusted.libraries\r\n    Only in openjdk-10.0.1: man`","title":"Differences between Oracle JDK and OpenJDK","body":"<p>The Oracle and OpenJDK JVMs are the same and have the same GC features (as of the latest versions 10+). Prior to Oracle managing the OpenJDK JVM there were concrete differences that made that old Openjdk JVM almost unusable in many environments. The JVMs are now the same.</p>\n\n<p>The JDKs which include the JVM as part of the Kit, differ by licensing, release and maintenance schedule, and the software libraries included in the JDK. Crucial differences to me also mean things that would make code not run if not present.  Not only licensing. </p>\n\n<pre><code>diff --brief -r openjdk oraclejdk\n</code></pre>\n\n<p>Crucially the following files are missing in addition to a bunch of others on the linux JDK (So if you 'claimed' that code didn't work on OpenJDK and did so on OracleJDK while you were using javafx then you were correct):</p>\n\n<pre><code>Only in jdk-10.0.1/bin: javapackager\nOnly in jdk-10.0.1/bin: javaws\nOnly in jdk-10.0.1/bin: jcontrol\nOnly in jdk-10.0.1/bin: jmc\nOnly in jdk-10.0.1/bin: jweblauncher\nOnly in jdk-10.0.1/lib: ant-javafx.jar\nOnly in jdk-10.0.1/lib: deploy\nOnly in jdk-10.0.1/lib: deploy.jar\nOnly in jdk-10.0.1/lib: desktop\nOnly in jdk-10.0.1/lib: fontconfig.bfc\nOnly in jdk-10.0.1/lib: fontconfig.properties.src\nOnly in jdk-10.0.1/lib: fontconfig.RedHat.6.bfc\nOnly in jdk-10.0.1/lib: fontconfig.RedHat.6.properties.src\nOnly in jdk-10.0.1/lib: fontconfig.SuSE.11.bfc\nOnly in jdk-10.0.1/lib: fontconfig.SuSE.11.properties.src\nOnly in jdk-10.0.1/lib: fonts\nOnly in jdk-10.0.1/lib: javafx.properties\nOnly in jdk-10.0.1/lib: javafx-swt.jar\nOnly in jdk-10.0.1/lib: java.jnlp.jar\nOnly in jdk-10.0.1/lib: javaws.jar\nOnly in jdk-10.0.1/lib: jdk.deploy.jar\nOnly in jdk-10.0.1/lib: jdk.javaws.jar\nOnly in jdk-10.0.1/lib: jdk.plugin.jar\nOnly in jdk-10.0.1/lib: jfr\nOnly in jdk-10.0.1/lib: libavplugin-53.so\nOnly in jdk-10.0.1/lib: libavplugin-54.so\nOnly in jdk-10.0.1/lib: libavplugin-55.so\nOnly in jdk-10.0.1/lib: libavplugin-56.so\nOnly in jdk-10.0.1/lib: libavplugin-57.so\nOnly in jdk-10.0.1/lib: libavplugin-ffmpeg-56.so\nOnly in jdk-10.0.1/lib: libavplugin-ffmpeg-57.so\nOnly in jdk-10.0.1/lib: libbci.so\nOnly in jdk-10.0.1/lib: libcmm.so\nOnly in jdk-10.0.1/lib: libdecora_sse.so\nOnly in jdk-10.0.1/lib: libdeploy.so\nOnly in jdk-10.0.1/lib: libfxplugins.so\nOnly in jdk-10.0.1/lib: libglassgtk2.so\nOnly in jdk-10.0.1/lib: libglassgtk3.so\nOnly in jdk-10.0.1/lib: libglass.so\nOnly in jdk-10.0.1/lib: libgstreamer-lite.so\nOnly in jdk-10.0.1/lib: libjavafx_font_freetype.so\nOnly in jdk-10.0.1/lib: libjavafx_font_pango.so\nOnly in jdk-10.0.1/lib: libjavafx_font.so\nOnly in jdk-10.0.1/lib: libjavafx_iio.so\nOnly in jdk-10.0.1/lib: libjfxmedia.so\nOnly in jdk-10.0.1/lib: libjfxwebkit.so\nOnly in jdk-10.0.1/lib: libnpjp2.so\nOnly in jdk-10.0.1/lib: libprism_common.so\nOnly in jdk-10.0.1/lib: libprism_es2.so\nOnly in jdk-10.0.1/lib: libprism_sw.so\nOnly in jdk-10.0.1/lib: librm.so\nOnly in jdk-10.0.1/lib: libt2k.so\nOnly in jdk-10.0.1/lib: locale\nOnly in jdk-10.0.1/lib: missioncontrol\nOnly in jdk-10.0.1/lib: oblique-fonts\nOnly in jdk-10.0.1/lib: plugin.jar\nOnly in jdk-10.0.1/lib: plugin-legacy.jar\nOnly in jdk-10.0.1/lib/security: blacklist\nOnly in jdk-10.0.1/lib/security: public_suffix_list.dat\nOnly in jdk-10.0.1/lib/security: trusted.libraries\nOnly in openjdk-10.0.1: man`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11380205,"reputation":667,"user_id":8343290,"display_name":"Dalibor Topic"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1536924407,"creation_date":1536832123,"answer_id":52311057,"question_id":22358071,"body_markdown":"A list of the few remaining cosmetic and packaging differences between Oracle JDK 11 and OpenJDK 11 can be found in this blog post:\r\n\r\nhttps://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\r\n\r\nIn short:\r\n\r\n - Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option,\r\n - it can be configured to provide usage log data to the “Advanced Management Console” tool, \r\n - it has always required third party cryptographic providers to be signed by a known certificate, \r\n - it will continue to include installers, branding and JRE packaging,\r\n - while the javac --release command behaves slightly differently for the Java 9 and Java 10 targets, and \r\n - the output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>A list of the few remaining cosmetic and packaging differences between Oracle JDK 11 and OpenJDK 11 can be found in this blog post:</p>\n\n<p><a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\" rel=\"noreferrer\">https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later</a></p>\n\n<p>In short:</p>\n\n<ul>\n<li>Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option,</li>\n<li>it can be configured to provide usage log data to the “Advanced Management Console” tool, </li>\n<li>it has always required third party cryptographic providers to be signed by a known certificate, </li>\n<li>it will continue to include installers, branding and JRE packaging,</li>\n<li>while the javac --release command behaves slightly differently for the Java 9 and Java 10 targets, and </li>\n<li>the output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2374287,"reputation":4246,"user_id":2078093,"accept_rate":62,"display_name":"Naresh Joshi"},"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1545553924,"creation_date":1544639302,"answer_id":53749226,"question_id":22358071,"body_markdown":"According to the oracle blog, [Oracle JDK Releases for Java 11 and Later][1]\r\n\r\nStarting with Java 11, Oracle will provide JDK releases under the open source [GNU General Public License v2, with the Classpath Exception (GPLv2+CPE)](http://openjdk.java.net/legal/gplv2+ce.html), and under a commercial license for those using the Oracle JDK as part of an Oracle product or service, or who do not wish to use open source software.  This combination of using an open source license and a commercial license replaces the historical “[BCL](https://java.com/license)” license, which had a combination of free and paid commercial terms.\r\n\r\nDifferent builds will be provided for each license, but these builds are functionally identical aside from some cosmetic and packaging differences, described in detail below.\r\n\r\n**From the BCL to the GPL**\r\n\r\nThe [Binary Code License for Oracle Java SE technologies (“BCL”)](https://java.com/license) has been the primary license for Oracle Java SE technologies for well over a decade. The BCL permits use without license fees under certain conditions.  To simplify things going forward, Oracle started [providing open source licensed OpenJDK builds](http://jdk.java.net/) as of Java 9, using the same license model as the Linux platform. If you are used to getting Oracle Java SE binaries for free, you can simply continue doing so with Oracle’s OpenJDK builds available at [jdk.java.net](http://jdk.java.net/).  If you are used to getting Oracle Java SE binaries as part of a commercial product or service from Oracle, then you can continue to get Oracle JDK releases through [My Oracle Support](https://support.oracle.com/epmos/faces/MosIndex.jspx) (MOS), and other locations.\r\n\r\n**Functionally identical and interchangeable...**\r\n\r\nOracle’s BCL-licensed JDK historically contained “commercial features” that were not available in OpenJDK builds. [As promised](http://mail.openjdk.java.net/pipermail/discuss/2017-September/004281.html), however, over the past year Oracle has contributed these features to the OpenJDK Community, including:\r\n\r\n- [Java Flight Recorder](http://openjdk.java.net/jeps/328),\r\n- [Java Mission Control](http://openjdk.java.net/projects/jmc/),\r\n- [Application Class-Data Sharing](http://openjdk.java.net/jeps/310), and\r\n- [ZGC](http://openjdk.java.net/jeps/333).\r\n\r\nFrom Java 11 forward, therefore, Oracle JDK builds and [OpenJDK builds](http://jdk.java.net/) will be essentially identical.\r\n\r\n**...yet with some cosmetic and packaging differences**\r\n\r\nThere do remain a small number of differences, some intentional and cosmetic, and some simply because more time to discuss with OpenJDK contributors is warranted.\r\n\r\n- Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds this option results in an error. This option was never part of OpenJDK and it would not make sense to add it now, since there are no commercial features in OpenJDK. This difference remains in order to make it easier for users of Oracle JDK 10 and earlier releases to migrate to Oracle JDK 11 and later. \r\n- Oracle JDK 11 can be configured to provide usage log data to the “[Advanced Management Console](https://www.oracle.com/technetwork/java/javaseproducts/advanced-mgmt/advancedmanagementconsole-2254207.html)” tool, which is a separate commercial Oracle product.  We will work with other OpenJDK contributors to discuss how such usage data may be useful in OpenJDK in future releases, if at all.   This difference remains primarily to provide a consistent experience to Oracle customers until such decisions are made.\r\n- The javac --release command behaves differently for the Java 9 and Java 10 targets, since in those releases the Oracle JDK contained some additional modules that were not part of corresponding OpenJDK releases:\r\n  - javafx.base\r\n  - javafx.controls\r\n  - javafx.fxml\r\n  - javafx.graphics\r\n  - javafx.media\r\n  - javafx.web\r\n  - java.jnlp\r\n  - jdk.jfr\r\n  - jdk.management.cmm\r\n  - jdk.management.jfr\r\n  - jdk.management.resource\r\n  - jdk.packager.services\r\n  - jdk.snmp\r\n\r\nThis difference remains in order to provide a consistent experience for specific kinds of legacy use. These modules are either now available separately as part of [OpenJFX](http://openjdk.java.net/projects/openjfx/), are now in both OpenJDK and the Oracle JDK because they were commercial features which Oracle contributed to OpenJDK (e.g., Flight Recorder), or were removed from Oracle JDK 11 (e.g., JNLP).\r\n\r\n- The output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds, so that support teams can diagnose any issues that may exist.  Specifically, running java --version with an Oracle JDK 11 build results in:\r\n\r\njava 11 2018-09-25\r\n\r\nJava(TM) SE Runtime Environment 18.9 (build 11+28)\r\n\r\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\nAnd for an OpenJDK 11 build:\r\n\r\nopenjdk version &quot;11&quot; 2018-09-25\r\n\r\nOpenJDK Runtime Environment 18.9 (build 11+28)\r\n\r\nOpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)\r\n\r\n- The Oracle JDK has always required third party cryptographic providers to be signed by a known certificate.  The cryptography framework in OpenJDK has an open cryptographic interface, meaning it does not restrict which providers can be used.  Oracle JDK 11 will continue to [require](https://docs.oracle.com/javase/10/security/howtoimplaprovider.htm#JSSEC-GUID-2D4432F9-1C3C-4A91-8612-2B2840188B36) a valid signature, and Oracle OpenJDK builds will continue to allow the use of either a valid signature or unsigned third party crypto provider. \r\n- Oracle JDK 11 will continue to include installers, branding and JRE packaging for an experience consistent with legacy desktop uses.  Oracle OpenJDK builds are currently available as zip and tar.gz files, while alternative distribution formats are being considered.\r\n\r\n\r\n  [1]: https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later","title":"Differences between Oracle JDK and OpenJDK","body":"<p>According to the oracle blog, <a href=\"https://blogs.oracle.com/java-platform-group/oracle-jdk-releases-for-java-11-and-later\" rel=\"noreferrer\">Oracle JDK Releases for Java 11 and Later</a></p>\n\n<p>Starting with Java 11, Oracle will provide JDK releases under the open source <a href=\"http://openjdk.java.net/legal/gplv2+ce.html\" rel=\"noreferrer\">GNU General Public License v2, with the Classpath Exception (GPLv2+CPE)</a>, and under a commercial license for those using the Oracle JDK as part of an Oracle product or service, or who do not wish to use open source software.  This combination of using an open source license and a commercial license replaces the historical “<a href=\"https://java.com/license\" rel=\"noreferrer\">BCL</a>” license, which had a combination of free and paid commercial terms.</p>\n\n<p>Different builds will be provided for each license, but these builds are functionally identical aside from some cosmetic and packaging differences, described in detail below.</p>\n\n<p><strong>From the BCL to the GPL</strong></p>\n\n<p>The <a href=\"https://java.com/license\" rel=\"noreferrer\">Binary Code License for Oracle Java SE technologies (“BCL”)</a> has been the primary license for Oracle Java SE technologies for well over a decade. The BCL permits use without license fees under certain conditions.  To simplify things going forward, Oracle started <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">providing open source licensed OpenJDK builds</a> as of Java 9, using the same license model as the Linux platform. If you are used to getting Oracle Java SE binaries for free, you can simply continue doing so with Oracle’s OpenJDK builds available at <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">jdk.java.net</a>.  If you are used to getting Oracle Java SE binaries as part of a commercial product or service from Oracle, then you can continue to get Oracle JDK releases through <a href=\"https://support.oracle.com/epmos/faces/MosIndex.jspx\" rel=\"noreferrer\">My Oracle Support</a> (MOS), and other locations.</p>\n\n<p><strong>Functionally identical and interchangeable...</strong></p>\n\n<p>Oracle’s BCL-licensed JDK historically contained “commercial features” that were not available in OpenJDK builds. <a href=\"http://mail.openjdk.java.net/pipermail/discuss/2017-September/004281.html\" rel=\"noreferrer\">As promised</a>, however, over the past year Oracle has contributed these features to the OpenJDK Community, including:</p>\n\n<ul>\n<li><a href=\"http://openjdk.java.net/jeps/328\" rel=\"noreferrer\">Java Flight Recorder</a>,</li>\n<li><a href=\"http://openjdk.java.net/projects/jmc/\" rel=\"noreferrer\">Java Mission Control</a>,</li>\n<li><a href=\"http://openjdk.java.net/jeps/310\" rel=\"noreferrer\">Application Class-Data Sharing</a>, and</li>\n<li><a href=\"http://openjdk.java.net/jeps/333\" rel=\"noreferrer\">ZGC</a>.</li>\n</ul>\n\n<p>From Java 11 forward, therefore, Oracle JDK builds and <a href=\"http://jdk.java.net/\" rel=\"noreferrer\">OpenJDK builds</a> will be essentially identical.</p>\n\n<p><strong>...yet with some cosmetic and packaging differences</strong></p>\n\n<p>There do remain a small number of differences, some intentional and cosmetic, and some simply because more time to discuss with OpenJDK contributors is warranted.</p>\n\n<ul>\n<li>Oracle JDK 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds this option results in an error. This option was never part of OpenJDK and it would not make sense to add it now, since there are no commercial features in OpenJDK. This difference remains in order to make it easier for users of Oracle JDK 10 and earlier releases to migrate to Oracle JDK 11 and later. </li>\n<li>Oracle JDK 11 can be configured to provide usage log data to the “<a href=\"https://www.oracle.com/technetwork/java/javaseproducts/advanced-mgmt/advancedmanagementconsole-2254207.html\" rel=\"noreferrer\">Advanced Management Console</a>” tool, which is a separate commercial Oracle product.  We will work with other OpenJDK contributors to discuss how such usage data may be useful in OpenJDK in future releases, if at all.   This difference remains primarily to provide a consistent experience to Oracle customers until such decisions are made.</li>\n<li>The javac --release command behaves differently for the Java 9 and Java 10 targets, since in those releases the Oracle JDK contained some additional modules that were not part of corresponding OpenJDK releases:\n\n<ul>\n<li>javafx.base</li>\n<li>javafx.controls</li>\n<li>javafx.fxml</li>\n<li>javafx.graphics</li>\n<li>javafx.media</li>\n<li>javafx.web</li>\n<li>java.jnlp</li>\n<li>jdk.jfr</li>\n<li>jdk.management.cmm</li>\n<li>jdk.management.jfr</li>\n<li>jdk.management.resource</li>\n<li>jdk.packager.services</li>\n<li>jdk.snmp</li>\n</ul></li>\n</ul>\n\n<p>This difference remains in order to provide a consistent experience for specific kinds of legacy use. These modules are either now available separately as part of <a href=\"http://openjdk.java.net/projects/openjfx/\" rel=\"noreferrer\">OpenJFX</a>, are now in both OpenJDK and the Oracle JDK because they were commercial features which Oracle contributed to OpenJDK (e.g., Flight Recorder), or were removed from Oracle JDK 11 (e.g., JNLP).</p>\n\n<ul>\n<li>The output of the java --version and java -fullversion commands will distinguish Oracle JDK builds from OpenJDK builds, so that support teams can diagnose any issues that may exist.  Specifically, running java --version with an Oracle JDK 11 build results in:</li>\n</ul>\n\n<p>java 11 2018-09-25</p>\n\n<p>Java(TM) SE Runtime Environment 18.9 (build 11+28)</p>\n\n<p>Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n\n<p>And for an OpenJDK 11 build:</p>\n\n<p>openjdk version \"11\" 2018-09-25</p>\n\n<p>OpenJDK Runtime Environment 18.9 (build 11+28)</p>\n\n<p>OpenJDK 64-Bit Server VM 18.9 (build 11+28, mixed mode)</p>\n\n<ul>\n<li>The Oracle JDK has always required third party cryptographic providers to be signed by a known certificate.  The cryptography framework in OpenJDK has an open cryptographic interface, meaning it does not restrict which providers can be used.  Oracle JDK 11 will continue to <a href=\"https://docs.oracle.com/javase/10/security/howtoimplaprovider.htm#JSSEC-GUID-2D4432F9-1C3C-4A91-8612-2B2840188B36\" rel=\"noreferrer\">require</a> a valid signature, and Oracle OpenJDK builds will continue to allow the use of either a valid signature or unsigned third party crypto provider. </li>\n<li>Oracle JDK 11 will continue to include installers, branding and JRE packaging for an experience consistent with legacy desktop uses.  Oracle OpenJDK builds are currently available as zip and tar.gz files, while alternative distribution formats are being considered.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":502326,"reputation":6232,"user_id":2693875,"accept_rate":67,"display_name":"Greg Dubicki"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1545511592,"creation_date":1545511592,"answer_id":53899189,"question_id":22358071,"body_markdown":"Also for **Java 8** an [interesting performance benchmark for reactive (non-blocking) Spring Boot REST application being hosted on various JVMs by AMIS Technology Blog has been published in Nov 2018][1] showing that, among other differences:\r\n\r\n* OpenJDK has higher CPU usage than OracleJDK,\r\n* OpenJDK has slightly lower response time than OracleJDK,\r\n* OpenJDK has higher memory usage than OracleJDK,\r\n\r\nFor details please see the source article.\r\n\r\nOf course YMMV, this is just one of the benchmarks.\r\n\r\n  [1]: https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Also for <strong>Java 8</strong> an <a href=\"https://technology.amis.nl/2018/11/23/comparing-jvm-performance-zulu-openjdk-openjdk-oracle-jdk-graalvm-ce/\" rel=\"noreferrer\">interesting performance benchmark for reactive (non-blocking) Spring Boot REST application being hosted on various JVMs by AMIS Technology Blog has been published in Nov 2018</a> showing that, among other differences:</p>\n\n<ul>\n<li>OpenJDK has higher CPU usage than OracleJDK,</li>\n<li>OpenJDK has slightly lower response time than OracleJDK,</li>\n<li>OpenJDK has higher memory usage than OracleJDK,</li>\n</ul>\n\n<p>For details please see the source article.</p>\n\n<p>Of course YMMV, this is just one of the benchmarks.</p>\n"},{"tags":[],"owner":{"account_id":8235,"reputation":87010,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1547041069,"creation_date":1546016596,"answer_id":53961911,"question_id":22358071,"body_markdown":"Aside from the obvious licensing difference, the major difference between OpenJDK and OracleJDK 11 are stability and performance updates.\r\n\r\nSource: https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385\r\n\r\nEvery 6 months the two codebases will be in-sync. But during the 6 month window OpenJDK will only receive security updates while OracleJDK will receive additional stability and performance updates.\r\n\r\nGiven that update releases only occur every 3 months for both OpenJDK and OracleJDK this means that you are missing out on (at most) 3 months worth of fixes until the next major release comes out and you upgrade. However, if you choose to stick to LTS releases then a commercial license begins to make more sense.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>Aside from the obvious licensing difference, the major difference between OpenJDK and OracleJDK 11 are stability and performance updates.</p>\n\n<p>Source: <a href=\"https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385\" rel=\"noreferrer\">https://www.youtube.com/watch?v=Adv9--6IcQI&amp;t=385</a></p>\n\n<p>Every 6 months the two codebases will be in-sync. But during the 6 month window OpenJDK will only receive security updates while OracleJDK will receive additional stability and performance updates.</p>\n\n<p>Given that update releases only occur every 3 months for both OpenJDK and OracleJDK this means that you are missing out on (at most) 3 months worth of fixes until the next major release comes out and you upgrade. However, if you choose to stick to LTS releases then a commercial license begins to make more sense.</p>\n"},{"tags":[],"owner":{"account_id":8868539,"reputation":2197,"user_id":6622913,"display_name":"Istiaque Hossain"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1566711702,"creation_date":1563777143,"answer_id":57140286,"question_id":22358071,"body_markdown":" 1.  Oracle will deliver releases every three years, while OpenJDK will be released  every six months.\r\n 2. Oracle provides long term support for its releases. On the other\r\n    hand, OpenJDK supports the changes to a release only until the next\r\n    version is released.\r\n 3. Oracle JDK was licensed under Oracle Binary Code License Agreement,\r\n    whereas OpenJDK has the GNU General Public License (GNU GPL) version\r\n    2 with a linking exception.\r\n 4. Oracle product has Flight Recorder, Java Mission Control, and\r\n    Application Class-Data Sharing features, while OpenJDK has the Font\r\n    Renderer feature.Also, Oracle has more Garbage Collection options\r\n    and better renderers,\r\n 5. Oracle JDK is fully developed by Oracle Corporation whereas the\r\n    OpenJDK is developed by Oracle, OpenJDK, and the Java Community.\r\n    However, the top-notch companies like Red Hat, Azul Systems, IBM,\r\n    Apple Inc., SAP AG also take an active part in its development.\r\n\r\n\r\n----------\r\nFrom Java 11 turn to a big change \r\n\r\nOracle will change its historical “BCL” license with a combination of an open source  and commercial license\r\n\r\n   - Oracle’s kit for Java 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds, this option results in an error\r\n   - Oracle JDK offers a configuration to provide usage log data to the “Advanced Management Console” tool\r\n   - Oracle has always required third party cryptographic providers to be signed by a known certificate, while cryptography framework in OpenJDK has an open cryptographic interface, which means there is no restriction as to which providers can be used\r\n   - Oracle JDK 11 will continue to include installers, branding, and JRE packaging, whereas OpenJDK builds are currently available as zip and tar.gz files\r\n   - The javac –release command behaves differently for the Java 9 and Java 10 targets due to the presence of some additional modules in Oracle’s release\r\n   - The output of the java –version and java -fullversion commands will distinguish Oracle’s builds from OpenJDK builds\r\n\r\n\r\n----------\r\n\r\n\r\n----------\r\nUpdate  : **25-Aug-2019**\r\n\r\n\r\n----------\r\n\r\n\r\n----------\r\n[![enter image description here][1]][1]\r\n\r\nfor more details [oracle-vs-openjdk][2]\r\n\r\n  \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/nLJUc.jpg\r\n  [2]: https://www.educba.com/oracle-vs-openjdk/","title":"Differences between Oracle JDK and OpenJDK","body":"<ol>\n<li>Oracle will deliver releases every three years, while OpenJDK will be released  every six months.</li>\n<li>Oracle provides long term support for its releases. On the other\nhand, OpenJDK supports the changes to a release only until the next\nversion is released.</li>\n<li>Oracle JDK was licensed under Oracle Binary Code License Agreement,\nwhereas OpenJDK has the GNU General Public License (GNU GPL) version\n2 with a linking exception.</li>\n<li>Oracle product has Flight Recorder, Java Mission Control, and\nApplication Class-Data Sharing features, while OpenJDK has the Font\nRenderer feature.Also, Oracle has more Garbage Collection options\nand better renderers,</li>\n<li>Oracle JDK is fully developed by Oracle Corporation whereas the\nOpenJDK is developed by Oracle, OpenJDK, and the Java Community.\nHowever, the top-notch companies like Red Hat, Azul Systems, IBM,\nApple Inc., SAP AG also take an active part in its development.</li>\n</ol>\n\n<hr>\n\n<p>From Java 11 turn to a big change </p>\n\n<p>Oracle will change its historical “BCL” license with a combination of an open source  and commercial license</p>\n\n<ul>\n<li>Oracle’s kit for Java 11 emits a warning when using the -XX:+UnlockCommercialFeatures option, whereas in OpenJDK builds, this option results in an error</li>\n<li>Oracle JDK offers a configuration to provide usage log data to the “Advanced Management Console” tool</li>\n<li>Oracle has always required third party cryptographic providers to be signed by a known certificate, while cryptography framework in OpenJDK has an open cryptographic interface, which means there is no restriction as to which providers can be used</li>\n<li>Oracle JDK 11 will continue to include installers, branding, and JRE packaging, whereas OpenJDK builds are currently available as zip and tar.gz files</li>\n<li>The javac –release command behaves differently for the Java 9 and Java 10 targets due to the presence of some additional modules in Oracle’s release</li>\n<li>The output of the java –version and java -fullversion commands will distinguish Oracle’s builds from OpenJDK builds</li>\n</ul>\n\n<hr>\n\n<hr>\n\n<p>Update  : <strong>25-Aug-2019</strong></p>\n\n<hr>\n\n<hr>\n\n<p><a href=\"https://i.stack.imgur.com/nLJUc.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/nLJUc.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>for more details <a href=\"https://www.educba.com/oracle-vs-openjdk/\" rel=\"noreferrer\">oracle-vs-openjdk</a></p>\n"},{"tags":[],"owner":{"account_id":1535526,"reputation":628,"user_id":1431690,"accept_rate":60,"display_name":"nettie"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1568128609,"creation_date":1568128088,"answer_id":57873644,"question_id":22358071,"body_markdown":"My understanding is that Oracle JDK can&#39;t be used in production, therefore I cannot legally use it (without paying), for the web application I am building for my company. I have to use OpenJDK. Please correct me if I am wrong! From [this article][1].\r\n\r\n&gt; Starting with Java 11, the Oracle JDK is restricted to development and\r\n&gt; testing environments. Oracle JDKs may only be used in production if\r\n&gt; you buy the commercial support. Instead, Oracle will provide Java\r\n&gt; builds based on OpenJDK for free which can be used in production. But\r\n&gt; for the official Oracle JDK the real roadmap will look like this:\r\n\r\n**UPDATE:** I&#39;m wrong. I can use Oracle JDK for free but won&#39;t get security updates after 6 mos and we&#39;ll have to assume the risk. Look at the above linked article section &quot;What does the new release train mean to my company?&quot;.\r\n\r\n\r\n  [1]: https://dev.karakun.com/java/2018/06/25/java-releases.html","title":"Differences between Oracle JDK and OpenJDK","body":"<p>My understanding is that Oracle JDK can't be used in production, therefore I cannot legally use it (without paying), for the web application I am building for my company. I have to use OpenJDK. Please correct me if I am wrong! From <a href=\"https://dev.karakun.com/java/2018/06/25/java-releases.html\" rel=\"nofollow noreferrer\">this article</a>.</p>\n\n<blockquote>\n  <p>Starting with Java 11, the Oracle JDK is restricted to development and\n  testing environments. Oracle JDKs may only be used in production if\n  you buy the commercial support. Instead, Oracle will provide Java\n  builds based on OpenJDK for free which can be used in production. But\n  for the official Oracle JDK the real roadmap will look like this:</p>\n</blockquote>\n\n<p><strong>UPDATE:</strong> I'm wrong. I can use Oracle JDK for free but won't get security updates after 6 mos and we'll have to assume the risk. Look at the above linked article section \"What does the new release train mean to my company?\".</p>\n"},{"tags":[],"owner":{"account_id":19442866,"reputation":1,"user_id":14221171,"display_name":"Cyberradar academy"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1607938328,"creation_date":1607938328,"answer_id":65286556,"question_id":22358071,"body_markdown":"It is very close - our build process for Oracle JDK releases builds on OpenJDK 7 by adding just a couple of pieces, like the deployment code, which includes Oracle&#39;s implementation of the Java Plugin and Java WebStart, as well as some closed source third-party components like a graphics rasterizer, some open-source third party components, like Rhino, and a few bits and pieces here and there, like additional documentation or third-party fonts. Moving forward, we intend to open source all pieces of the Oracle JDK except those that we consider commercial features such as JRockit Mission Control (not yet available in Oracle JDK) and replace encumbered third-party components with open source alternatives to achieve closer parity between the codebases.\r\n\r\n&#183;         Yes, the garbage collection and other JVM parameters are the same.\r\n\r\n&#183;         The performance of GC is the same in both.","title":"Differences between Oracle JDK and OpenJDK","body":"<p>It is very close - our build process for Oracle JDK releases builds on OpenJDK 7 by adding just a couple of pieces, like the deployment code, which includes Oracle's implementation of the Java Plugin and Java WebStart, as well as some closed source third-party components like a graphics rasterizer, some open-source third party components, like Rhino, and a few bits and pieces here and there, like additional documentation or third-party fonts. Moving forward, we intend to open source all pieces of the Oracle JDK except those that we consider commercial features such as JRockit Mission Control (not yet available in Oracle JDK) and replace encumbered third-party components with open source alternatives to achieve closer parity between the codebases.</p>\n<p>·         Yes, the garbage collection and other JVM parameters are the same.</p>\n<p>·         The performance of GC is the same in both.</p>\n"},{"tags":[],"owner":{"account_id":14387497,"reputation":1756,"user_id":10393067,"display_name":"logbasex"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1624699273,"creation_date":1624699273,"answer_id":68140942,"question_id":22358071,"body_markdown":"**OpenJDK**\r\n\r\n- OpenJDK is opened source code, it is maintained and developed by Oracle, but allows communities and other companies to participate in this development, such as Red Hat, Azul Systems, IBM, Apple Inc, etc. OpenJDK is both a JDK product and a specification, any company or organization that wants to use OpenJDK to create a new variant must comply with those specifications.\r\nOpenJDK is developed by Oracle and the community contributions. We sometimes have issues on its stability; however, based on user feedback, it will be upgraded to perform better. OpenJDK is regularly updated, around every 6 months.\r\n\r\n**Oracle JDK**\r\n- Oracle JDK is maintained and developed by Oracle. It complies with OpenJDK specifications, but it is not opened source code. Oracle JDK is much better in terms of the JVM responsiveness and productivity. It focuses more on the stability due to its importance to the corporate customers.\r\n\r\nSource: https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk","title":"Differences between Oracle JDK and OpenJDK","body":"<p><strong>OpenJDK</strong></p>\n<ul>\n<li>OpenJDK is opened source code, it is maintained and developed by Oracle, but allows communities and other companies to participate in this development, such as Red Hat, Azul Systems, IBM, Apple Inc, etc. OpenJDK is both a JDK product and a specification, any company or organization that wants to use OpenJDK to create a new variant must comply with those specifications.\nOpenJDK is developed by Oracle and the community contributions. We sometimes have issues on its stability; however, based on user feedback, it will be upgraded to perform better. OpenJDK is regularly updated, around every 6 months.</li>\n</ul>\n<p><strong>Oracle JDK</strong></p>\n<ul>\n<li>Oracle JDK is maintained and developed by Oracle. It complies with OpenJDK specifications, but it is not opened source code. Oracle JDK is much better in terms of the JVM responsiveness and productivity. It focuses more on the stability due to its importance to the corporate customers.</li>\n</ul>\n<p>Source: <a href=\"https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk\" rel=\"noreferrer\">https://o7planning.org/12571/history-of-java-and-the-difference-between-oracle-jdk-and-openjdk</a></p>\n"}],"owner":{"account_id":1414701,"reputation":19249,"user_id":1340582,"accept_rate":53,"display_name":"user1340582"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":658733,"favorite_count":0,"down_vote_count":1,"up_vote_count":820,"accepted_answer_id":38685948,"answer_count":13,"score":819,"last_activity_date":1686650302,"creation_date":1394642192,"question_id":22358071,"body_markdown":"&gt; NOTE:  This question is from 2014.  As of Java 11 OpenJDK and Oracle\r\n&gt; JDK are converging.\r\n\r\nAre there any crucial differences between Oracle and OpenJDK?\r\n\r\nFor example, are the garbage collection and other JVM parameters the same?\r\n\r\nDoes GC work differently between the two?\r\n","title":"Differences between Oracle JDK and OpenJDK","body":"<blockquote>\n  <p>NOTE:  This question is from 2014.  As of Java 11 OpenJDK and Oracle\n  JDK are converging.</p>\n</blockquote>\n\n<p>Are there any crucial differences between Oracle and OpenJDK?</p>\n\n<p>For example, are the garbage collection and other JVM parameters the same?</p>\n\n<p>Does GC work differently between the two?</p>\n"},{"tags":["java","jgit","apache-sshd"],"answers":[{"tags":[],"owner":{"account_id":1970837,"reputation":1438,"user_id":1769835,"accept_rate":69,"display_name":"J&#246;rn Guy S&#252;&#223;"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1622765164,"creation_date":1622765164,"answer_id":67830006,"question_id":67767455,"body_markdown":"I do not think you are missing anything. There is a callback hook that can be used on the commands, where you can insert the configuration code. I never got that to work with MINA. I  [asked a similar question][1], but never got an answer here. Please post if you find out how to do it, as this is a particularly challenging subject.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66592989/jgit-transportconfigcallback-implementation-with-apache-mina","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I do not think you are missing anything. There is a callback hook that can be used on the commands, where you can insert the configuration code. I never got that to work with MINA. I  <a href=\"https://stackoverflow.com/questions/66592989/jgit-transportconfigcallback-implementation-with-apache-mina\">asked a similar question</a>, but never got an answer here. Please post if you find out how to do it, as this is a particularly challenging subject.</p>\n"},{"tags":[],"owner":{"account_id":6086349,"reputation":46,"user_id":4750243,"display_name":"Pratik Shende"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1659515907,"creation_date":1632298924,"answer_id":69280603,"question_id":67767455,"body_markdown":"```\r\nFile sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\r\nSshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\r\n\t\t.setPreferredAuthentications(&quot;publickey&quot;)\r\n\t\t.setHomeDirectory(FS.DETECTED.userHome())\r\n\t\t.setSshDirectory(sshDir)\r\n\t\t.build(null);\r\n```\r\nThe above code worked for me, just need to have the `id_rsa` file in the `.ssh` folder.\r\nand the key has to be without a passphrase.\r\nStill looking for a way to pass a passphrase with a key.\r\n\r\nYou can use this link for better understanding: \r\nhttps://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<pre><code>File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\nSshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder()\n        .setPreferredAuthentications(&quot;publickey&quot;)\n        .setHomeDirectory(FS.DETECTED.userHome())\n        .setSshDirectory(sshDir)\n        .build(null);\n</code></pre>\n<p>The above code worked for me, just need to have the <code>id_rsa</code> file in the <code>.ssh</code> folder.\nand the key has to be without a passphrase.\nStill looking for a way to pass a passphrase with a key.</p>\n<p>You can use this link for better understanding:\n<a href=\"https://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5\" rel=\"nofollow noreferrer\">https://medium.com/@pratikshende99/how-to-clone-git-repo-with-ssh-url-by-executing-command-through-java-using-processbuilder-e162010266f5</a></p>\n"},{"tags":[],"owner":{"account_id":1548429,"reputation":3528,"user_id":1441374,"accept_rate":68,"display_name":"Omkar Shetkar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1641793759,"creation_date":1641782031,"answer_id":70647202,"question_id":67767455,"body_markdown":"With the JGit version 6.0.0.202111291000-r, I am able to execute a transport command using Apache MINA SSHD.\r\nFor this,\r\n\r\n - Set `CustomSshSessionFactory` in the callback for `TransportCommand`.\r\n\r\n```\r\ncmd.setTransportConfigCallback(\r\ntransport -&gt; {\r\n  if(transport instanceOf SshTransport) {\r\n    SshTransport sshTransport = (SshTransport) transport;\r\n    // Set passphrase using a CustomCredentialsProvider\r\n    sshTransport.setCredentialsProvider(new CustomCredentialProvider(passphrase));\r\n    // Provide private key to `CustomSshSessionFactory`\r\n    SshSessionFactory sshFactory = new CustomSshSessionFactory(privatekey);\r\n\tsshTransport.setSshSessionFactory(sshFactory);\r\n\r\n  }\r\n});\r\n\r\n```\r\n\r\n - Created implementation of `SshdSessionFactory`. You can use `SshdSessionFactoryBuilder` as well. \r\n\r\n```\r\npublic final class CustomSshSessionFactory extends SshdSessionFactory {\r\n\r\n\r\n    public static final Path SSH_DIR = Path.of(&quot;some-path&quot;);\r\n\r\n    private final Path privateKeyFile;\r\n    private final byte[] sshKey;\r\n\r\n    public CustomSshSessionFactory(byte[] sshKey) {\r\n        this.sshKey = sshKey;\r\n        privateKeyFile = Path.of(&quot;some-name&quot;, SSH_DIR.toString());\r\n    }\r\n\r\n    @Override\r\n    public File getSshDirectory() {\r\n        try {\r\n            return Files.createDirectories(SSH_DIR).toFile();\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\n// Return paths to private key files\r\n    @Override\r\n    protected List&lt;Path&gt; getDefaultIdentities(File sshDir) {\r\n        try {\r\n            Files.write(privateKeyFile, sshKey);\r\n            return Collections.singletonList(privateKeyFile);\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return Collections.emptyList();\r\n    }\r\n\r\n}\r\n```\r\n\r\n- Created custom implementation of `CredentialsProvider`\r\n\r\n```\r\npublic class CustomCredentialProvider extends CredentialsProvider {\r\n\r\n    private final List&lt;String&gt; stringStore;\r\n\r\n    private final String passphrase;\r\n\r\n    public CustomCredentialProvider(String passphrase) {\r\n        this.passphrase = passphrase;\r\n    }\r\n\r\n    @Override\r\n    public boolean isInteractive() {\r\n        // Set this according to your requirement\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean supports(CredentialItem... items) {\r\n        // Set this according to your requirement\r\n        return true;\r\n    }\r\n\r\n    @Override\r\n    public boolean get(URIish uri, CredentialItem... items)\r\n            throws UnsupportedCredentialItem {\r\n\r\n        for (CredentialItem item : items) {\r\n            if (item instanceof CredentialItem.InformationalMessage) {\r\n                continue;\r\n            }\r\n            if (item instanceof CredentialItem.YesNoType) {\r\n                // Set this according to your requirement\r\n                ((CredentialItem.YesNoType) item).setValue(true);\r\n            } else if (item instanceof CredentialItem.CharArrayType) {\r\n                if (passphrase != null) {\r\n                    ((CredentialItem.CharArrayType) item)\r\n                            .setValue(passphrase.toCharArray());\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else if (item instanceof CredentialItem.StringType) {\r\n                if (passphrase != null) {\r\n                    ((CredentialItem.StringType) item)\r\n                            .setValue(passphrase);\r\n                } else {\r\n                    return false;\r\n                }\r\n            } else {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere, important things to note are \r\n\r\n- setting passphrase through custom implementations of `CredentialsProvider`\r\n- private key is provided as a file input to `SshSessionFactory`\r\n","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>With the JGit version 6.0.0.202111291000-r, I am able to execute a transport command using Apache MINA SSHD.\nFor this,</p>\n<ul>\n<li>Set <code>CustomSshSessionFactory</code> in the callback for <code>TransportCommand</code>.</li>\n</ul>\n<pre><code>cmd.setTransportConfigCallback(\ntransport -&gt; {\n  if(transport instanceOf SshTransport) {\n    SshTransport sshTransport = (SshTransport) transport;\n    // Set passphrase using a CustomCredentialsProvider\n    sshTransport.setCredentialsProvider(new CustomCredentialProvider(passphrase));\n    // Provide private key to `CustomSshSessionFactory`\n    SshSessionFactory sshFactory = new CustomSshSessionFactory(privatekey);\n    sshTransport.setSshSessionFactory(sshFactory);\n\n  }\n});\n\n</code></pre>\n<ul>\n<li>Created implementation of <code>SshdSessionFactory</code>. You can use <code>SshdSessionFactoryBuilder</code> as well.</li>\n</ul>\n<pre><code>public final class CustomSshSessionFactory extends SshdSessionFactory {\n\n\n    public static final Path SSH_DIR = Path.of(&quot;some-path&quot;);\n\n    private final Path privateKeyFile;\n    private final byte[] sshKey;\n\n    public CustomSshSessionFactory(byte[] sshKey) {\n        this.sshKey = sshKey;\n        privateKeyFile = Path.of(&quot;some-name&quot;, SSH_DIR.toString());\n    }\n\n    @Override\n    public File getSshDirectory() {\n        try {\n            return Files.createDirectories(SSH_DIR).toFile();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n// Return paths to private key files\n    @Override\n    protected List&lt;Path&gt; getDefaultIdentities(File sshDir) {\n        try {\n            Files.write(privateKeyFile, sshKey);\n            return Collections.singletonList(privateKeyFile);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return Collections.emptyList();\n    }\n\n}\n</code></pre>\n<ul>\n<li>Created custom implementation of <code>CredentialsProvider</code></li>\n</ul>\n<pre><code>public class CustomCredentialProvider extends CredentialsProvider {\n\n    private final List&lt;String&gt; stringStore;\n\n    private final String passphrase;\n\n    public CustomCredentialProvider(String passphrase) {\n        this.passphrase = passphrase;\n    }\n\n    @Override\n    public boolean isInteractive() {\n        // Set this according to your requirement\n        return false;\n    }\n\n    @Override\n    public boolean supports(CredentialItem... items) {\n        // Set this according to your requirement\n        return true;\n    }\n\n    @Override\n    public boolean get(URIish uri, CredentialItem... items)\n            throws UnsupportedCredentialItem {\n\n        for (CredentialItem item : items) {\n            if (item instanceof CredentialItem.InformationalMessage) {\n                continue;\n            }\n            if (item instanceof CredentialItem.YesNoType) {\n                // Set this according to your requirement\n                ((CredentialItem.YesNoType) item).setValue(true);\n            } else if (item instanceof CredentialItem.CharArrayType) {\n                if (passphrase != null) {\n                    ((CredentialItem.CharArrayType) item)\n                            .setValue(passphrase.toCharArray());\n                } else {\n                    return false;\n                }\n            } else if (item instanceof CredentialItem.StringType) {\n                if (passphrase != null) {\n                    ((CredentialItem.StringType) item)\n                            .setValue(passphrase);\n                } else {\n                    return false;\n                }\n            } else {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\n</code></pre>\n<p>Here, important things to note are</p>\n<ul>\n<li>setting passphrase through custom implementations of <code>CredentialsProvider</code></li>\n<li>private key is provided as a file input to <code>SshSessionFactory</code></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":24619926,"reputation":1,"user_id":18520441,"display_name":"Vakhtang Donadze"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1647782435,"creation_date":1647782435,"answer_id":71547112,"question_id":67767455,"body_markdown":"I&#39;ve been facing the same problem for several days. For me the solution was adding `known_hosts` file to my custom directory for ssh keys. Also make sure that your keys have default names.","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I've been facing the same problem for several days. For me the solution was adding <code>known_hosts</code> file to my custom directory for ssh keys. Also make sure that your keys have default names.</p>\n"},{"tags":[],"owner":{"account_id":11761764,"reputation":11,"user_id":8607566,"display_name":"JMCui"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650223,"creation_date":1659511061,"answer_id":73217697,"question_id":67767455,"body_markdown":"With following one can set the passphrase for the private key while building the `SshdSessionFactory`.\r\n\r\n      File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\r\n      SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder().setPreferredAuthentications(&quot;publickey&quot;)\r\n        .setHomeDirectory(FS.DETECTED.userHome()).setSshDirectory(sshDir)\r\n        .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)\r\n        {\r\n          @Override\r\n          protected char[] getPassword(URIish uri, String message)\r\n          {\r\n            return passphrase.toCharArray();\r\n          }\r\n        }).build(null);\r\n-------------------------------------\r\nHow to set the KeyPasswordProvider with Kotlin (Original content before edit)\r\n\r\n    sshdSessionFactoryBuilder.setKeyPasswordProvider {\r\n                            object : IdentityPasswordProvider(it) {\r\n                                override fun getPassword(uri: URIish?, message: String?): CharArray {\r\n                                    return sshPassword.toCharArray()\r\n                                }\r\n\r\n                            }\r\n                        }","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>With following one can set the passphrase for the private key while building the <code>SshdSessionFactory</code>.</p>\n<pre><code>  File sshDir = new File(FS.DETECTED.userHome(), &quot;/.ssh&quot;);\n  SshdSessionFactory sshSessionFactory = new SshdSessionFactoryBuilder().setPreferredAuthentications(&quot;publickey&quot;)\n    .setHomeDirectory(FS.DETECTED.userHome()).setSshDirectory(sshDir)\n    .setKeyPasswordProvider(cp -&gt; new IdentityPasswordProvider(cp)\n    {\n      @Override\n      protected char[] getPassword(URIish uri, String message)\n      {\n        return passphrase.toCharArray();\n      }\n    }).build(null);\n</code></pre>\n<hr />\n<p>How to set the KeyPasswordProvider with Kotlin (Original content before edit)</p>\n<pre><code>sshdSessionFactoryBuilder.setKeyPasswordProvider {\n                        object : IdentityPasswordProvider(it) {\n                            override fun getPassword(uri: URIish?, message: String?): CharArray {\n                                return sshPassword.toCharArray()\n                            }\n\n                        }\n                    }\n</code></pre>\n"}],"owner":{"account_id":121799,"reputation":825,"user_id":315152,"accept_rate":71,"display_name":"juhanic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5868,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69280603,"answer_count":5,"score":3,"last_activity_date":1686650223,"creation_date":1622430119,"question_id":67767455,"body_markdown":"I&#39;m running git commands using jgit from a java application running in a kubernetes container, so I want to allow customizing the ssh key storage location and the like.\r\n\r\nMy first approach was with ssh supported with the jsch implementation but ran into troubles(I checked the methodology here https://stackoverflow.com/questions/13686643/using-keys-with-jgit-to-access-a-git-repository-securely and have had no luck with it) so I&#39;m adding the ssh support via the org.eclipse.jgit.ssh.apache artifact. Using an external ssh app isn&#39;t really an option due to the way this is being packaged/distributed.\r\n\r\nI haven&#39;t had much luck finding information but assume that I just want to be emulating the jsch approach and replacing the session factory used in calls. Initially the approach I took was setting up a session factory with the desired ssh path\r\n\r\n```\r\n        final SshdSessionFactoryBuilder builder = new SshdSessionFactoryBuilder();\r\n        builder.setHomeDirectory(new File(homeDir))\r\n                .setConfigFile((f)-&gt; new File(f, &quot;config&quot;))\r\n                .setSshDirectory(new File(sshDir));\r\n\r\n        return builder.build(null);\r\n```\r\n\r\nand passing this factory to the various commands.\r\n\r\n```\r\nfinal CloneCommand cmd = Git.cloneRepository().setDirectory(new File(basePath))\r\n                            .setURI(remotePath);\r\n                    if (sshSessionFactory != null) {\r\n                        cmd.setTransportConfigCallback(new TransportConfigCallback() {\r\n                            @Override\r\n                            public void configure(Transport transport) {\r\n                                final SshTransport sshTransport = (SshTransport)transport;\r\n                                ((SshTransport) transport).setSshSessionFactory(sshSessionFactory);\r\n                            }\r\n                        });\r\n                    }\r\n                    git = cmd.call();\r\n```\r\n\r\nHowever with this approach, commands like clone would fail to auth with the git repo, attempting to use the default ssh keys. On following this in the debugger I found that inside the clone command, it&#39;s generating a fetch command but isn&#39;t passing the session factory or session to it, so the fetch simply builds a default config and fails to auth.\r\n\r\n```\r\n2021-05-31 11:48:09,793 INFO  GitChainRepository.java:114 - Couldn&#39;t find git dir, creating it\r\n2021-05-31 11:48:10,748 INFO  AbstractSecurityProviderRegistrar.java:112 - getOrCreateProvider(EdDSA) created instance of net.i2p.crypto.eddsa.EdDSASecurityProvider\r\n2021-05-31 11:48:10,970 INFO  DefaultIoServiceFactoryFactory.java:67 - No detected/configured IoServiceFactoryFactory using Nio2ServiceFactoryFactory\r\n2021-05-31 11:48:12,206 INFO  GitChainRepository.java:133 - Initialized by clone of remote\r\n2021-05-31 11:48:12,207 INFO  GitChainRepository.java:159 - Prepping remote repo git@ghe.snip/gitchainstore-synctest.git\r\n2021-05-31 11:48:12,318 WARN  LoggingUtils.java:634 - exceptionCaught(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22])[state=Opened] SshException: Server key did not validate\r\norg.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n\tat org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38) ~[sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat java.security.AccessController.doPrivileged(Native Method) ~[?:?]\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37) [sshd-osgi-2.6.0.jar:2.6.0]\r\n\tat sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127) [?:?]\r\n\tat sun.nio.ch.Invoker$2.run(Invoker.java:219) [?:?]\r\n\tat sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n\tat java.lang.Thread.run(Thread.java:834) [?:?]\r\n2021-05-31 11:48:12,331 INFO  SessionHelper.java:1034 - Disconnecting(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22]): SSH2_DISCONNECT_HOST_KEY_NOT_VERIFIABLE - Server key did not validate\r\n\r\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\r\n\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224)\r\n\tat org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263)\r\n\tat snip.GitChainRepository.setupRemote(GitChainRepository.java:173)\r\n\tat snip.GitChainRepository.start(GitChainRepository.java:144)\r\n\tat snip.GitChainRepositoryTest.setupGit(GitChainRepositoryTest.java:59)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n\tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\r\n\tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n\tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\r\n\tat org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\r\n\tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\r\n\tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\r\n\tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\r\n\tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\r\n\tat org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\r\n\tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\r\n\tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\r\n\tat org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\r\n\tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\r\n\tat org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\r\n\tat org.junit.runners.ParentRunner.run(ParentRunner.java:413)\r\n\tat org.junit.runner.JUnitCore.run(JUnitCore.java:137)\r\n\tat com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\r\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1)\r\n\tat org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107)\r\n\tat org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281)\r\n\tat org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153)\r\n\tat org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142)\r\n\tat org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94)\r\n\tat org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309)\r\n\tat org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213)\r\n\t... 31 more\r\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:126)\r\n\tat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39)\r\n\tat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32)\r\n\tat org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:164)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99)\r\n\tat org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235)\r\n\t... 39 more\r\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\r\n\tat org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388)\r\n\tat org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197)\r\n\tat org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335)\r\n\tat org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332)\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38)\r\n\tat java.base/java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37)\r\n\tat java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)\r\n\tat java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)\r\n\tat java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n\tat java.base/java.lang.Thread.run(Thread.java:834)\r\n\r\n\r\nProcess finished with exit code -1\r\n\r\n```\r\n\r\nEventually I settled to just overriding the default session factory, which sort of works, but not really.\r\n\r\n```\r\nSshSessionFactory.setInstance(sshSessionFactory);\r\n```\r\n\r\nThis ends up working for a bit but then falls apart unable to create new sessions from the factory(I haven&#39;t figured why but I&#39;d prefer not to be overriding the default instance anyway hence posting this question)\r\n\r\n```\r\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at snip.GitChainRepository.updateRemote(GitChainRepository.java:190) ~[core-0.1.0-28.jar:?]\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\r\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]\r\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\r\n        at java.lang.Thread.run(Thread.java:829) [?:?]\r\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        ... 8 more\r\nCaused by: java.io.IOException: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.register(SshdSessionFactory.java:272) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:234) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\r\n        ... 8 more\r\n```\r\n\r\nSo in conclusion: *What is the correct way to customize ssh session creation and make sure it persists through porcelain commands that call other commands*? Is this a bug with jgit? Am I missing something, or doing something here wrong?","title":"Setting ssh keys to use with jgit with ssh from apache sshd","body":"<p>I'm running git commands using jgit from a java application running in a kubernetes container, so I want to allow customizing the ssh key storage location and the like.</p>\n<p>My first approach was with ssh supported with the jsch implementation but ran into troubles(I checked the methodology here <a href=\"https://stackoverflow.com/questions/13686643/using-keys-with-jgit-to-access-a-git-repository-securely\">Using Keys with JGit to Access a Git Repository Securely</a> and have had no luck with it) so I'm adding the ssh support via the org.eclipse.jgit.ssh.apache artifact. Using an external ssh app isn't really an option due to the way this is being packaged/distributed.</p>\n<p>I haven't had much luck finding information but assume that I just want to be emulating the jsch approach and replacing the session factory used in calls. Initially the approach I took was setting up a session factory with the desired ssh path</p>\n<pre><code>        final SshdSessionFactoryBuilder builder = new SshdSessionFactoryBuilder();\n        builder.setHomeDirectory(new File(homeDir))\n                .setConfigFile((f)-&gt; new File(f, &quot;config&quot;))\n                .setSshDirectory(new File(sshDir));\n\n        return builder.build(null);\n</code></pre>\n<p>and passing this factory to the various commands.</p>\n<pre><code>final CloneCommand cmd = Git.cloneRepository().setDirectory(new File(basePath))\n                            .setURI(remotePath);\n                    if (sshSessionFactory != null) {\n                        cmd.setTransportConfigCallback(new TransportConfigCallback() {\n                            @Override\n                            public void configure(Transport transport) {\n                                final SshTransport sshTransport = (SshTransport)transport;\n                                ((SshTransport) transport).setSshSessionFactory(sshSessionFactory);\n                            }\n                        });\n                    }\n                    git = cmd.call();\n</code></pre>\n<p>However with this approach, commands like clone would fail to auth with the git repo, attempting to use the default ssh keys. On following this in the debugger I found that inside the clone command, it's generating a fetch command but isn't passing the session factory or session to it, so the fetch simply builds a default config and fails to auth.</p>\n<pre><code>2021-05-31 11:48:09,793 INFO  GitChainRepository.java:114 - Couldn't find git dir, creating it\n2021-05-31 11:48:10,748 INFO  AbstractSecurityProviderRegistrar.java:112 - getOrCreateProvider(EdDSA) created instance of net.i2p.crypto.eddsa.EdDSASecurityProvider\n2021-05-31 11:48:10,970 INFO  DefaultIoServiceFactoryFactory.java:67 - No detected/configured IoServiceFactoryFactory using Nio2ServiceFactoryFactory\n2021-05-31 11:48:12,206 INFO  GitChainRepository.java:133 - Initialized by clone of remote\n2021-05-31 11:48:12,207 INFO  GitChainRepository.java:159 - Prepping remote repo git@ghe.snip/gitchainstore-synctest.git\n2021-05-31 11:48:12,318 WARN  LoggingUtils.java:634 - exceptionCaught(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22])[state=Opened] SshException: Server key did not validate\norg.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n    at org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38) ~[sshd-osgi-2.6.0.jar:2.6.0]\n    at java.security.AccessController.doPrivileged(Native Method) ~[?:?]\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37) [sshd-osgi-2.6.0.jar:2.6.0]\n    at sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127) [?:?]\n    at sun.nio.ch.Invoker$2.run(Invoker.java:219) [?:?]\n    at sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n    at java.lang.Thread.run(Thread.java:834) [?:?]\n2021-05-31 11:48:12,331 INFO  SessionHelper.java:1034 - Disconnecting(JGitClientSession[git@ghe.ca-tools.org/52.69.168.141:22]): SSH2_DISCONNECT_HOST_KEY_NOT_VERIFIABLE - Server key did not validate\n\norg.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\n\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224)\n    at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263)\n    at snip.GitChainRepository.setupRemote(GitChainRepository.java:173)\n    at snip.GitChainRepository.start(GitChainRepository.java:144)\n    at snip.GitChainRepositoryTest.setupGit(GitChainRepositoryTest.java:59)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:59)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:56)\n    at org.junit.internal.runners.statements.RunBefores.invokeMethod(RunBefores.java:33)\n    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:24)\n    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.BlockJUnit4ClassRunner$1.evaluate(BlockJUnit4ClassRunner.java:100)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:366)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:103)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:63)\n    at org.junit.runners.ParentRunner$4.run(ParentRunner.java:331)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:79)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:329)\n    at org.junit.runners.ParentRunner.access$100(ParentRunner.java:66)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:293)\n    at org.junit.runners.ParentRunner$3.evaluate(ParentRunner.java:306)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:413)\n    at org.junit.runner.JUnitCore.run(JUnitCore.java:137)\n    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Server key did not validate\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248)\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1)\n    at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107)\n    at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281)\n    at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153)\n    at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142)\n    at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94)\n    at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309)\n    at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213)\n    ... 31 more\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:126)\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39)\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32)\n    at org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68)\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:164)\n    at org.eclipse.jgit.transport.sshd.SshdSession.connect(SshdSession.java:99)\n    at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:235)\n    ... 39 more\nCaused by: org.apache.sshd.common.SshException: Server key did not validate\n    at org.apache.sshd.client.session.AbstractClientSession.checkKeys(AbstractClientSession.java:583)\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleKexMessage(AbstractSession.java:611)\n    at org.apache.sshd.common.session.helpers.AbstractSession.doHandleMessage(AbstractSession.java:500)\n    at org.apache.sshd.common.session.helpers.AbstractSession.handleMessage(AbstractSession.java:428)\n    at org.apache.sshd.common.session.helpers.AbstractSession.decode(AbstractSession.java:1463)\n    at org.apache.sshd.common.session.helpers.AbstractSession.messageReceived(AbstractSession.java:388)\n    at org.eclipse.jgit.internal.transport.sshd.JGitClientSession.messageReceived(JGitClientSession.java:197)\n    at org.apache.sshd.common.session.helpers.AbstractSessionIoHandler.messageReceived(AbstractSessionIoHandler.java:64)\n    at org.apache.sshd.common.io.nio2.Nio2Session.handleReadCycleCompletion(Nio2Session.java:358)\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:335)\n    at org.apache.sshd.common.io.nio2.Nio2Session$1.onCompleted(Nio2Session.java:332)\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.lambda$completed$0(Nio2CompletionHandler.java:38)\n    at java.base/java.security.AccessController.doPrivileged(Native Method)\n    at org.apache.sshd.common.io.nio2.Nio2CompletionHandler.completed(Nio2CompletionHandler.java:37)\n    at java.base/sun.nio.ch.Invoker.invokeUnchecked(Invoker.java:127)\n    at java.base/sun.nio.ch.Invoker$2.run(Invoker.java:219)\n    at java.base/sun.nio.ch.AsynchronousChannelGroupImpl$1.run(AsynchronousChannelGroupImpl.java:112)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:834)\n\n\nProcess finished with exit code -1\n\n</code></pre>\n<p>Eventually I settled to just overriding the default session factory, which sort of works, but not really.</p>\n<pre><code>SshSessionFactory.setInstance(sshSessionFactory);\n</code></pre>\n<p>This ends up working for a bit but then falls apart unable to create new sessions from the factory(I haven't figured why but I'd prefer not to be overriding the default instance anyway hence posting this question)</p>\n<pre><code>org.eclipse.jgit.api.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:224) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.PullCommand.call(PullCommand.java:263) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at snip.GitChainRepository.updateRemote(GitChainRepository.java:190) ~[core-0.1.0-28.jar:?]\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) [?:?]\n        at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:305) [?:?]\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:305) [?:?]\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]\n        at java.lang.Thread.run(Thread.java:829) [?:?]\nCaused by: org.eclipse.jgit.errors.TransportException: git@ghe.snip/gitchainstore-synctest.git: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:248) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        ... 8 more\nCaused by: java.io.IOException: Apache MINA sshd session factory is closing down; cannot create new ssh sessions on this factory\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.register(SshdSessionFactory.java:272) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:234) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.sshd.SshdSessionFactory.getSession(SshdSessionFactory.java:1) ~[org.eclipse.jgit.ssh.apache-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.SshTransport.getSession(SshTransport.java:107) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh$SshFetchConnection.&lt;init&gt;(TransportGitSsh.java:281) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.TransportGitSsh.openFetch(TransportGitSsh.java:153) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.executeImp(FetchProcess.java:142) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.FetchProcess.execute(FetchProcess.java:94) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.transport.Transport.fetch(Transport.java:1309) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        at org.eclipse.jgit.api.FetchCommand.call(FetchCommand.java:213) ~[org.eclipse.jgit-5.11.0.202103091610-r.jar:5.11.0.202103091610-r]\n        ... 8 more\n</code></pre>\n<p>So in conclusion: <em>What is the correct way to customize ssh session creation and make sure it persists through porcelain commands that call other commands</em>? Is this a bug with jgit? Am I missing something, or doing something here wrong?</p>\n"},{"tags":["java","apache-commons-cli"],"answers":[{"tags":[],"owner":{"account_id":9297011,"reputation":797,"user_id":6903610,"display_name":"Jay Prakash"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1476701949,"creation_date":1476695608,"answer_id":40082497,"question_id":40082191,"body_markdown":"Yes you can , you have to create custom Exception like:\r\n\r\n    public class ParseException extends Exception{\r\n            ParseException(String msg){\r\n                 super(msg);  \r\n            }\r\n    }\r\n\r\nAnd into code :\r\n\r\n   \r\n\r\n    CommandLineParser parser = new BasicParser();\r\n        try {\r\n            CommandLine line = parser.parse(getOptions(), args);\r\n        }\r\n        catch( Exception exp ) {\r\n           throw new ParseException(&quot;Invalid Arguments&quot;);\r\n        }       \r\n        return true;\r\nAnd above method should throw \r\n\r\n \r\n\r\n    throws ParseException\r\n\r\nSo its caller if pass invalid argument will get ParseException \r\n\r\n","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Yes you can , you have to create custom Exception like:</p>\n\n<pre><code>public class ParseException extends Exception{\n        ParseException(String msg){\n             super(msg);  \n        }\n}\n</code></pre>\n\n<p>And into code :</p>\n\n<pre><code>CommandLineParser parser = new BasicParser();\n    try {\n        CommandLine line = parser.parse(getOptions(), args);\n    }\n    catch( Exception exp ) {\n       throw new ParseException(\"Invalid Arguments\");\n    }       \n    return true;\n</code></pre>\n\n<p>And above method should throw </p>\n\n<pre><code>throws ParseException\n</code></pre>\n\n<p>So its caller if pass invalid argument will get ParseException </p>\n"},{"tags":[],"owner":{"account_id":8784377,"reputation":376,"user_id":6566965,"display_name":"adamreeve"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1476716858,"creation_date":1476716858,"answer_id":40089868,"question_id":40082191,"body_markdown":"Command lines have two types of entry other than the program name, Options (which are specified with a `-` or `--`) and what I will call parameters (which probably have a better name but I don&#39;t know what it is!) which don&#39;t have a prefix. For example, for `ls`:\r\n\r\n`ls -la foo`\r\n\r\nThe options are `-l` and `-a`, and parameter is `foo` (the directory to list). When you parse a command line with commons-cli it _only_ cares about the options, it ignores everything else. Which is why it doesn&#39;t fail if you add `Test` (not an option) but does if you add `-Test`. ","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Command lines have two types of entry other than the program name, Options (which are specified with a <code>-</code> or <code>--</code>) and what I will call parameters (which probably have a better name but I don't know what it is!) which don't have a prefix. For example, for <code>ls</code>:</p>\n\n<p><code>ls -la foo</code></p>\n\n<p>The options are <code>-l</code> and <code>-a</code>, and parameter is <code>foo</code> (the directory to list). When you parse a command line with commons-cli it <em>only</em> cares about the options, it ignores everything else. Which is why it doesn't fail if you add <code>Test</code> (not an option) but does if you add <code>-Test</code>. </p>\n"},{"tags":[],"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1478159765,"creation_date":1478159765,"answer_id":40396355,"question_id":40082191,"body_markdown":"Although answer provided by [adamreeve][1] is really fine and I accept it, I&#39;ve decided to extend default parser capabilities to prevent typing invalid option even without &#39;-&#39; or &#39;--&#39; symbols. I made my own custom parser :\r\n\r\n    public class StrictParser extends Parser {\r\n    \r\n    \t@Override\r\n    \tprotected String[] flatten(Options opts, String[] arguments, boolean stopAtNonOption) {\r\n    \t\treturn arguments;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic CommandLine parse(Options options, String[] arguments, boolean stopAtNonOption) throws ParseException {\r\n    \r\n    \t\tCommandLine cmd = null;\r\n    \t\tList&lt;String&gt; tokenList = Arrays.asList(flatten(getOptions(), arguments, stopAtNonOption));\r\n    \t\tListIterator&lt;String&gt; iterator = tokenList.listIterator();\r\n    \r\n    \t\tboolean eatTheRest = false;\r\n    \t\tsetOptions(options);\r\n    \t\tcmd = super.parse(options, arguments, stopAtNonOption);\r\n    \r\n    \t\twhile (iterator.hasNext()) {\r\n    \t\t\tString token = (String) iterator.next();\r\n    \t\t\tif (!token.startsWith(&quot;--&quot;) &amp;&amp; !token.startsWith(&quot;-&quot;)) {\r\n    \t\t\t\tif (stopAtNonOption) {\r\n    \t\t\t            throw new UnrecognizedOptionException(&quot;Unrecognized option: &quot; + token +&quot;. Every option must start with &#39;--&#39; or &#39;-&#39;&quot;, token);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\teatTheRest = true;\r\n    \t\t\t}\r\n    \r\n    \t\t\tif (eatTheRest) {\r\n    \t\t\t\titerator.next();\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn cmd;\r\n    \t}\r\n    }\r\n\r\nIn this solution any cli parameters typed without &#39;--&#39; or &#39;-&#39; throw UnrecognizedOptionException. This is no perfect solution, but it show how it can be done, and can be a good starting point to other solutions. For instance we could accept options without &#39;--&#39; and &#39;-&#39; but check if that option is correct. Then we need to change \r\n\r\n            if (stopAtNonOption) {\r\n                    throw new UnrecognizedOptionException(&quot;Unrecognized option: &quot; + token +&quot;. Every option must start with &#39;--&#39; or &#39;-&#39;&quot;, token);\r\n            }\r\n\r\nto \r\n\r\n\t\t\tif (stopAtNonOption) {\t\t\t\t\t\r\n\t\t\t\tif(!getOptions().hasOption(token)){\t\t\t\t\t\t\r\n\t\t\t\t\tthrow new UnrecognizedOptionException(\r\n\t\t\t\t\t\t\t&quot;Unrecognized option: &quot; + token, token);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n(ignore this ugly three nested ifs ;))\r\nThis also accepts only one argument per option,but as I&#39;ve mentioned it&#39;s only starting point to implement other modifications to default parser\r\n\r\n  [1]: https://stackoverflow.com/users/6566965/adamreeve","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>Although answer provided by <a href=\"https://stackoverflow.com/users/6566965/adamreeve\">adamreeve</a> is really fine and I accept it, I've decided to extend default parser capabilities to prevent typing invalid option even without '-' or '--' symbols. I made my own custom parser :</p>\n\n<pre><code>public class StrictParser extends Parser {\n\n    @Override\n    protected String[] flatten(Options opts, String[] arguments, boolean stopAtNonOption) {\n        return arguments;\n    }\n\n    @Override\n    public CommandLine parse(Options options, String[] arguments, boolean stopAtNonOption) throws ParseException {\n\n        CommandLine cmd = null;\n        List&lt;String&gt; tokenList = Arrays.asList(flatten(getOptions(), arguments, stopAtNonOption));\n        ListIterator&lt;String&gt; iterator = tokenList.listIterator();\n\n        boolean eatTheRest = false;\n        setOptions(options);\n        cmd = super.parse(options, arguments, stopAtNonOption);\n\n        while (iterator.hasNext()) {\n            String token = (String) iterator.next();\n            if (!token.startsWith(\"--\") &amp;&amp; !token.startsWith(\"-\")) {\n                if (stopAtNonOption) {\n                        throw new UnrecognizedOptionException(\"Unrecognized option: \" + token +\". Every option must start with '--' or '-'\", token);\n                }\n            } else {\n                eatTheRest = true;\n            }\n\n            if (eatTheRest) {\n                iterator.next();\n            }\n        }\n        return cmd;\n    }\n}\n</code></pre>\n\n<p>In this solution any cli parameters typed without '--' or '-' throw UnrecognizedOptionException. This is no perfect solution, but it show how it can be done, and can be a good starting point to other solutions. For instance we could accept options without '--' and '-' but check if that option is correct. Then we need to change </p>\n\n<pre><code>        if (stopAtNonOption) {\n                throw new UnrecognizedOptionException(\"Unrecognized option: \" + token +\". Every option must start with '--' or '-'\", token);\n        }\n</code></pre>\n\n<p>to </p>\n\n<pre><code>        if (stopAtNonOption) {                  \n            if(!getOptions().hasOption(token)){                     \n                throw new UnrecognizedOptionException(\n                        \"Unrecognized option: \" + token, token);\n            }\n        }\n</code></pre>\n\n<p>(ignore this ugly three nested ifs ;))\nThis also accepts only one argument per option,but as I've mentioned it's only starting point to implement other modifications to default parser</p>\n"}],"owner":{"account_id":3799812,"reputation":1135,"user_id":3153769,"accept_rate":67,"display_name":"Artur Skrzydło"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2554,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":40089868,"answer_count":3,"score":2,"last_activity_date":1686650198,"creation_date":1476694652,"question_id":40082191,"body_markdown":"I would like to have a printed usage help message, when an option which is specified as a program argument is not valid (not available in the predefined options list).\r\n\r\n    \t  CommandLineParser parser = new BasicParser();\r\n\t    try {\r\n\t        CommandLine line = parser.parse(getOptions(), args);\r\n\t    }\r\n\t    catch( ParseException exp ) {\r\n\t\t\tgetLogger().info(&quot;Invalid command line option name. &quot;+exp.getMessage());\r\n\t        HelpFormatter hf = new HelpFormatter();\r\n\t        hf.printHelp(&quot;destDir&quot;, getOptions());\r\n\t        return false;\r\n\t    }\t    \r\n\t    return true;\r\n\r\nI type as a parameter the &#39;Test&#39; string. I was thinking, that invalid options cause the parser to throw ParseException, however they do not. How can I achieve that behaviour? Is it possible with this library at all? Now it just omits parameters which are not valid.  \r\n\r\n**UPDATE**\r\nActually it throws exception when option has a &#39;-&#39; prefix. So &#39;-Test&#39; cause throwing an exception, but &#39;Test&#39; does not. My question anyway is still valid, how to force parser to throw an exception on an invalid parameter.","title":"Why default parser (using commons-cli) does not throw exception when option is not recognized?","body":"<p>I would like to have a printed usage help message, when an option which is specified as a program argument is not valid (not available in the predefined options list).</p>\n<pre><code>      CommandLineParser parser = new BasicParser();\n    try {\n        CommandLine line = parser.parse(getOptions(), args);\n    }\n    catch( ParseException exp ) {\n        getLogger().info(&quot;Invalid command line option name. &quot;+exp.getMessage());\n        HelpFormatter hf = new HelpFormatter();\n        hf.printHelp(&quot;destDir&quot;, getOptions());\n        return false;\n    }       \n    return true;\n</code></pre>\n<p>I type as a parameter the 'Test' string. I was thinking, that invalid options cause the parser to throw ParseException, however they do not. How can I achieve that behaviour? Is it possible with this library at all? Now it just omits parameters which are not valid.</p>\n<p><strong>UPDATE</strong>\nActually it throws exception when option has a '-' prefix. So '-Test' cause throwing an exception, but 'Test' does not. My question anyway is still valid, how to force parser to throw an exception on an invalid parameter.</p>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686644383,"post_id":76462938,"comment_id":134823577,"body_markdown":"It depends on the library. Some, like jOOQ, support properly parameterized queries and return types. Some do not. I&#39;m not sure if JPA does, in this case. So if your library doesn&#39;t allow you to write this in a type-safe way, a cast is indeed the way to go.","body":"It depends on the library. Some, like jOOQ, support properly parameterized queries and return types. Some do not. I&#39;m not sure if JPA does, in this case. So if your library doesn&#39;t allow you to write this in a type-safe way, a cast is indeed the way to go."}],"answers":[{"tags":[],"owner":{"account_id":8517137,"reputation":835,"user_id":6385232,"display_name":"geanakuch"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686646653,"creation_date":1686646653,"answer_id":76463250,"question_id":76462938,"body_markdown":"There really isn&#39;t another good way to solve this. You can&#39;t do an ```instanceof``` check because of the type erasure and the signature of ```Criteria#list()``` uses a raw type.\r\nThe only thing you could do is to run an ```instanceof``` check on every item in the resulting list but it&#39;s reasonable to trust the framework to only return objects that match your criteria in this case. Also checking every item will still not get rid of the ```unchecked``` warning.\r\nSo ```@SuppressWarnings``` is the right thing to do here.","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>There really isn't another good way to solve this. You can't do an <code>instanceof</code> check because of the type erasure and the signature of <code>Criteria#list()</code> uses a raw type.\nThe only thing you could do is to run an <code>instanceof</code> check on every item in the resulting list but it's reasonable to trust the framework to only return objects that match your criteria in this case. Also checking every item will still not get rid of the <code>unchecked</code> warning.\nSo <code>@SuppressWarnings</code> is the right thing to do here.</p>\n"},{"tags":[],"owner":{"account_id":4354234,"reputation":845,"user_id":3553434,"display_name":"alalalala"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686650027,"creation_date":1686648992,"answer_id":76463541,"question_id":76462938,"body_markdown":"Please think for 5 minutes and tell me, is the following code type safe?\r\n\r\n\r\n    public class Stackoverflow {\r\n        public static void main(String[] args) {\r\n            Stackoverflow sof = new Stackoverflow();\r\n            Cage cage = sof.getCage();\r\n            // are the dogs safe???????\r\n            List&lt;Dog&gt; dogs = (List&lt;Dog&gt;) cage.list();\r\n        }\r\n        public Cage getCage() {\r\n            List cage = new ArrayList&lt;&gt;();\r\n            cage.add(new Lion());\r\n            cage.add(new Dog());\r\n            return new Cage(cage);\r\n        }\r\n    \r\n        class Cage {\r\n            List cage;\r\n            public Cage(List cage) {\r\n                this.cage = cage;\r\n            }\r\n            public List list() {\r\n                return cage;\r\n            }\r\n        }\r\n    \r\n        class Animal {\r\n            public void eat() {}\r\n        }\r\n        class Lion extends Animal {\r\n            public void eat() {\r\n                System.out.println(&quot;eat the animals around&quot;);\r\n            }\r\n        }\r\n        class Dog extends Animal {\r\n            public void eat() {\r\n                System.out.println(&quot;eat bones&quot;);\r\n            }\r\n        }\r\n    }\r\n\r\n5 minutes later. \r\n\r\nDogs are not safe because of lions in cages.\r\n\r\nBecause the original type (`List`) is used, the generic feature is lost, and it cannot be checked at compile time. The error will be left in the code and leaked at runtime (that is, the dog was eaten by a lion)\r\n\r\nWhen you can ensure that the data in your collection is safe, then you can use `@SupressWarnings` to ignore compile-time checks.\r\n\r\nFor example, if your `getCage` method is written like this, you can guarantee type safety\r\n\r\n    public Cage getCage() {\r\n        List cage = new ArrayList&lt;&gt;();\r\n        cage.add(new Dog()); // Here, instead of putting a lion in a cage, a dog is put in a cage\r\n        cage.add(new Dog());\r\n        return new Cage(cage);\r\n    }\r\n\r\n\r\nFor your code, I think it is safe. just use `@SupressWarnings` to ignore compile-time checks.\r\n\r\nThis should be guaranteed for the `createCriteria(getPersistentClass())` method. \r\nThe premise is that the return value of `getPersistentClass()` is `HealthEntity.class`","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>Please think for 5 minutes and tell me, is the following code type safe?</p>\n<pre><code>public class Stackoverflow {\n    public static void main(String[] args) {\n        Stackoverflow sof = new Stackoverflow();\n        Cage cage = sof.getCage();\n        // are the dogs safe???????\n        List&lt;Dog&gt; dogs = (List&lt;Dog&gt;) cage.list();\n    }\n    public Cage getCage() {\n        List cage = new ArrayList&lt;&gt;();\n        cage.add(new Lion());\n        cage.add(new Dog());\n        return new Cage(cage);\n    }\n\n    class Cage {\n        List cage;\n        public Cage(List cage) {\n            this.cage = cage;\n        }\n        public List list() {\n            return cage;\n        }\n    }\n\n    class Animal {\n        public void eat() {}\n    }\n    class Lion extends Animal {\n        public void eat() {\n            System.out.println(&quot;eat the animals around&quot;);\n        }\n    }\n    class Dog extends Animal {\n        public void eat() {\n            System.out.println(&quot;eat bones&quot;);\n        }\n    }\n}\n</code></pre>\n<p>5 minutes later.</p>\n<p>Dogs are not safe because of lions in cages.</p>\n<p>Because the original type (<code>List</code>) is used, the generic feature is lost, and it cannot be checked at compile time. The error will be left in the code and leaked at runtime (that is, the dog was eaten by a lion)</p>\n<p>When you can ensure that the data in your collection is safe, then you can use <code>@SupressWarnings</code> to ignore compile-time checks.</p>\n<p>For example, if your <code>getCage</code> method is written like this, you can guarantee type safety</p>\n<pre><code>public Cage getCage() {\n    List cage = new ArrayList&lt;&gt;();\n    cage.add(new Dog()); // Here, instead of putting a lion in a cage, a dog is put in a cage\n    cage.add(new Dog());\n    return new Cage(cage);\n}\n</code></pre>\n<p>For your code, I think it is safe. just use <code>@SupressWarnings</code> to ignore compile-time checks.</p>\n<p>This should be guaranteed for the <code>createCriteria(getPersistentClass())</code> method.\nThe premise is that the return value of <code>getPersistentClass()</code> is <code>HealthEntity.class</code></p>\n"}],"owner":{"account_id":18067214,"reputation":51,"user_id":13132740,"display_name":"Abhishikth"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686650027,"creation_date":1686644175,"question_id":76462938,"body_markdown":"\t\r\n\r\n  I am a getting yellow line under the line:\r\n\r\n    return (List&lt;HealthEntity&gt;) criteria.list();\r\nin the following code samle. The warning says:\r\n\r\n&gt; Type safety: Unchecked cast from List to List&lt;HealthEntity&gt;\r\n\r\nand suggests me to use @SupressWarnings &#39;unchecked&#39; to the method.\r\n\r\n    public List&lt;HealthEntity&gt; findByCustomerIds(List&lt;Long&gt; customerId) {\r\n\t\tCriteria criteria = getSession().createCriteria(getPersistentClass());\r\n\t\tcriteria.add(Restrictions.in(&quot;customerId&quot;, customerId));\r\n\t\tif (customerId != null &amp;&amp; !customerId.isEmpty()) {\r\n\t\t\treturn (List&lt;HealthEntity&gt;) criteria.list();\r\n\t\t} else {\r\n\t\t\treturn new ArrayList&lt;&gt;(1);\r\n\t\t}\r\n\t}\r\n\r\nIs this the correct way to return my list of entities or am I making any mistake? Should I just use @SuppressWarnings?","title":"Getting warning for casting list, Type safety: Unchecked cast from List, Is this wrong way of writing query?","body":"<p>I am a getting yellow line under the line:</p>\n<pre><code>return (List&lt;HealthEntity&gt;) criteria.list();\n</code></pre>\n<p>in the following code samle. The warning says:</p>\n<blockquote>\n<p>Type safety: Unchecked cast from List to List</p>\n</blockquote>\n<p>and suggests me to use @SupressWarnings 'unchecked' to the method.</p>\n<pre><code>public List&lt;HealthEntity&gt; findByCustomerIds(List&lt;Long&gt; customerId) {\n    Criteria criteria = getSession().createCriteria(getPersistentClass());\n    criteria.add(Restrictions.in(&quot;customerId&quot;, customerId));\n    if (customerId != null &amp;&amp; !customerId.isEmpty()) {\n        return (List&lt;HealthEntity&gt;) criteria.list();\n    } else {\n        return new ArrayList&lt;&gt;(1);\n    }\n}\n</code></pre>\n<p>Is this the correct way to return my list of entities or am I making any mistake? Should I just use @SuppressWarnings?</p>\n"},{"tags":["java","swing","jtable","abstracttablemodel","jtableheader"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686666093,"post_id":76463655,"comment_id":134828402,"body_markdown":"What does PopulateData do? Does it recreate the TableModel? I think when you recreate the model you need to reset the sorter.","body":"What does PopulateData do? Does it recreate the TableModel? I think when you recreate the model you need to reset the sorter."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686672369,"post_id":76463655,"comment_id":134830049,"body_markdown":"If you&#39;re updating the table every 4 seconds, the user doesn&#39;t have time to do anything with the table.","body":"If you&#39;re updating the table every 4 seconds, the user doesn&#39;t have time to do anything with the table."},{"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"score":0,"creation_date":1686734232,"post_id":76463655,"comment_id":134838572,"body_markdown":"@camickr the populateData function sets the values in the cells","body":"@camickr the populateData function sets the values in the cells"},{"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"score":0,"creation_date":1686734451,"post_id":76463655,"comment_id":134838615,"body_markdown":"@GilbertLeBlanc This table is to show some data of the devices we got, so the only thing user going to do is Start/Stop the device by right clicking the rows. It&#39;ll be helpful if they can select multiple row and do Start/Stop. Also need sorting of table by clicking the headers.","body":"@GilbertLeBlanc This table is to show some data of the devices we got, so the only thing user going to do is Start/Stop the device by right clicking the rows. It&#39;ll be helpful if they can select multiple row and do Start/Stop. Also need sorting of table by clicking the headers."},{"owner":{"account_id":114128,"reputation":50422,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1686736079,"post_id":76463655,"comment_id":134838954,"body_markdown":"Fine.  There&#39;s no need to update the table every 4 seconds.  Oracle has a helpful tutorial, [Creating a GUI With Swing](https://docs.oracle.com/javase/tutorial/uiswing/index.html).  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the [How to Use Tables](https://docs.oracle.com/javase/tutorial/uiswing/components/table.html) section.","body":"Fine.  There&#39;s no need to update the table every 4 seconds.  Oracle has a helpful tutorial, <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/index.html\" rel=\"nofollow noreferrer\">Creating a GUI With Swing</a>.  Skip the Learning Swing with the NetBeans IDE section.  Pay particular attention to the <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/table.html\" rel=\"nofollow noreferrer\">How to Use Tables</a> section."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1686749873,"post_id":76463655,"comment_id":134842035,"body_markdown":"Post an [mre] demonstrating the problem.","body":"Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem."}],"owner":{"account_id":26105703,"reputation":1,"user_id":19800439,"display_name":"Muthu0044"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649767,"creation_date":1686649767,"question_id":76463655,"body_markdown":"I&#39;m using AbstractTableModel, enabled sorting and multiple row selection. the cells are being updated for every 4 secs, when I enable this populating services, sorting is not working and the selected rows gets unselected.\r\n\r\n\r\n**This is the TableModel I&#39;m using.**\r\n\r\n```\r\npublic class TableModel extends AbstractTableModel {\r\n    private static final long serialVersionUID = 1L;\r\n    private final String[] columnNames = {null, null, null, null, null, null, null, null, null, null}; //length = 10\r\n    public Object[][] RowData = new Object[TableProperties.row][TableProperties.column];\r\n\r\n    public TableModel() {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Class&lt;?&gt; getColumnClass(int columnIndex) {\r\n        return columnIndex == 0 ? Date.class : Integer.class;\r\n    }\r\n\r\n    @Override\r\n    public String getColumnName(int col) {\r\n        return columnNames[col];\r\n    }\r\n\r\n    @Override\r\n    public int getColumnCount() {\r\n        return columnNames.length;\r\n    }\r\n\r\n    public boolean isCellEditable(int row, int column) {\r\n        return false;// Added for disable the table cell Edit.\r\n    }\r\n\r\n    public int getRowCount() {\r\n        return RowData.length;\r\n    }\r\n\r\n    public void setValueAt(Object value, int row, int col) {\r\n        RowData[row][col] = value;\r\n        fireTableCellUpdated(row, col);\r\n    }\r\n    public void removeRow(int row) {\r\n        // remove a row from your internal data structure\r\n        fireTableRowsDeleted(row, row);\r\n    }\r\n\r\n    @Override\r\n    public Object getValueAt(int rowIndex, int columnIndex) {\r\n        return RowData[rowIndex][columnIndex];\r\n    }\r\n\r\n\r\n}\r\n```\r\n\r\n**This is how I enabled row selection and column sorting.\r\n**\r\n```\r\nmod = new TableModel();\r\n        mainTable = new TableView(mod);\r\n        //tr = new ColorRenderer();\r\n        mainTable.setCellSelectionEnabled(false);\r\n        mainTable.setRowSelectionAllowed(true);\r\n        mainTable.setRowHeight(cellHeight);\r\n        mainTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\r\n        //mainTable.setAutoCreateRowSorter(true);  //enables sorting for all columns\r\n\r\n        //Enables sorting for custom columns\r\n        TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;TableModel&gt;(mod) {\r\n            @Override\r\n            public boolean isSortable(int column) {\r\n                // Define which columns are sortable\r\n                List&lt;Integer&gt; sortableColumns = new ArrayList&lt;&gt;();\r\n                sortableColumns.add(0); // Column 0 (Dev)\r\n                sortableColumns.add(1); // Column 1 (Type)\r\n                sortableColumns.add(3); // Column 3 (Active)\r\n                sortableColumns.add(5); // Column 5 (Status)\r\n                sortableColumns.add(9); // Column 9 (Location)\r\n\r\n                return sortableColumns.contains(column);\r\n            }\r\n        };\r\n        mainTable.setRowSorter(sorter);\r\n```\r\n\r\n**This is how I&#39;m running service codes.**\r\n\r\n```\r\n  public void serviceMethod() {\r\n        scheduler = Executors.newScheduledThreadPool(1);\r\n        scheduler.scheduleAtFixedRate(new PopulateData(), 0, 4, TimeUnit.SECONDS);\r\n        //PopulateData sd = new PopulateData();\r\n        //sd.run();\r\n    }\r\n```\r\n\r\n\r\n","title":"How to keep selections and make sorting to work on AbstractTableModel in java when the cells are updating frequently?","body":"<p>I'm using AbstractTableModel, enabled sorting and multiple row selection. the cells are being updated for every 4 secs, when I enable this populating services, sorting is not working and the selected rows gets unselected.</p>\n<p><strong>This is the TableModel I'm using.</strong></p>\n<pre><code>public class TableModel extends AbstractTableModel {\n    private static final long serialVersionUID = 1L;\n    private final String[] columnNames = {null, null, null, null, null, null, null, null, null, null}; //length = 10\n    public Object[][] RowData = new Object[TableProperties.row][TableProperties.column];\n\n    public TableModel() {\n\n    }\n\n    @Override\n    public Class&lt;?&gt; getColumnClass(int columnIndex) {\n        return columnIndex == 0 ? Date.class : Integer.class;\n    }\n\n    @Override\n    public String getColumnName(int col) {\n        return columnNames[col];\n    }\n\n    @Override\n    public int getColumnCount() {\n        return columnNames.length;\n    }\n\n    public boolean isCellEditable(int row, int column) {\n        return false;// Added for disable the table cell Edit.\n    }\n\n    public int getRowCount() {\n        return RowData.length;\n    }\n\n    public void setValueAt(Object value, int row, int col) {\n        RowData[row][col] = value;\n        fireTableCellUpdated(row, col);\n    }\n    public void removeRow(int row) {\n        // remove a row from your internal data structure\n        fireTableRowsDeleted(row, row);\n    }\n\n    @Override\n    public Object getValueAt(int rowIndex, int columnIndex) {\n        return RowData[rowIndex][columnIndex];\n    }\n\n\n}\n</code></pre>\n<p>**This is how I enabled row selection and column sorting.\n**</p>\n<pre><code>mod = new TableModel();\n        mainTable = new TableView(mod);\n        //tr = new ColorRenderer();\n        mainTable.setCellSelectionEnabled(false);\n        mainTable.setRowSelectionAllowed(true);\n        mainTable.setRowHeight(cellHeight);\n        mainTable.setSelectionMode(ListSelectionModel.MULTIPLE_INTERVAL_SELECTION);\n        //mainTable.setAutoCreateRowSorter(true);  //enables sorting for all columns\n\n        //Enables sorting for custom columns\n        TableRowSorter&lt;TableModel&gt; sorter = new TableRowSorter&lt;TableModel&gt;(mod) {\n            @Override\n            public boolean isSortable(int column) {\n                // Define which columns are sortable\n                List&lt;Integer&gt; sortableColumns = new ArrayList&lt;&gt;();\n                sortableColumns.add(0); // Column 0 (Dev)\n                sortableColumns.add(1); // Column 1 (Type)\n                sortableColumns.add(3); // Column 3 (Active)\n                sortableColumns.add(5); // Column 5 (Status)\n                sortableColumns.add(9); // Column 9 (Location)\n\n                return sortableColumns.contains(column);\n            }\n        };\n        mainTable.setRowSorter(sorter);\n</code></pre>\n<p><strong>This is how I'm running service codes.</strong></p>\n<pre><code>  public void serviceMethod() {\n        scheduler = Executors.newScheduledThreadPool(1);\n        scheduler.scheduleAtFixedRate(new PopulateData(), 0, 4, TimeUnit.SECONDS);\n        //PopulateData sd = new PopulateData();\n        //sd.run();\n    }\n</code></pre>\n"},{"tags":["java","log4j2"],"owner":{"account_id":1900514,"reputation":331,"user_id":1716464,"accept_rate":50,"display_name":"Suyash"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649631,"creation_date":1686649631,"question_id":76463633,"body_markdown":"I have a requirement where I need to zip log files everyday, but this is not for application log files. In my application there are various feeder directories where input files are placed and processed and at same place this logs are generated for individual input files. there are many feeder directories I want to use Log4j utilities to create zip for this log files on everyday basis. \r\nThe bad way will be to write appenders for all this directory locations, can anyone suggest if there is any generic approach ?","title":"can we set log4j Appenders in subfiolders","body":"<p>I have a requirement where I need to zip log files everyday, but this is not for application log files. In my application there are various feeder directories where input files are placed and processed and at same place this logs are generated for individual input files. there are many feeder directories I want to use Log4j utilities to create zip for this log files on everyday basis.\nThe bad way will be to write appenders for all this directory locations, can anyone suggest if there is any generic approach ?</p>\n"},{"tags":["java","android","kotlin"],"answers":[{"tags":[],"owner":{"account_id":1790714,"reputation":91128,"user_id":1631193,"accept_rate":71,"display_name":"Gabe Sechan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1681022379,"creation_date":1681022379,"answer_id":75969120,"question_id":75969076,"body_markdown":"Are you a privlidged system app signed with the system&#39;s key?  Because you can&#39;t get READ_PRIVLIEGED_PHONE_STATE as a normal app, or as anything from the play store.","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>Are you a privlidged system app signed with the system's key?  Because you can't get READ_PRIVLIEGED_PHONE_STATE as a normal app, or as anything from the play store.</p>\n"},{"tags":[],"owner":{"account_id":13681938,"reputation":191,"user_id":9872069,"display_name":"Javad Zobeidi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686649584,"creation_date":1686649584,"answer_id":76463626,"question_id":75969076,"body_markdown":"you need to get the imsi from ``` telephonyManager.subscriberId ``` \r\n\r\n\r\n\r\n```\r\n\r\n\r\n    private var carrierName: String? = null\r\n    private var displayName: String? = null\r\n    private var slotIndex = 0\r\n    private var number: String? = null\r\n    private var countryIso: String? = null\r\n    private var imsi: String? = null\r\n    private var simId: String? = null\r\n\r\n    init {\r\n        carrierName = &quot;&quot;\r\n        displayName = &quot;&quot;\r\n        slotIndex = 0\r\n        number = &quot;&quot;\r\n        countryIso = &quot;&quot;\r\n        imsi = &quot;&quot;\r\n        simId = &quot;&quot;\r\n\r\n        imsi = telephonyManager.subscriberId\r\n        number = telephonyManager.line1Number\r\n\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\r\n            carrierName = subscriptionInfo.carrierName.toString()\r\n            displayName = subscriptionInfo.displayName.toString()\r\n            slotIndex = subscriptionInfo.simSlotIndex\r\n            \r\n            simId = subscriptionInfo.iccId\r\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\r\n                countryIso = subscriptionInfo.countryIso\r\n            } else if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n        }else {\r\n            if (telephonyManager.simOperator != null) {\r\n                carrierName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simOperator != null) {\r\n                displayName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n\r\n            if (telephonyManager.simSerialNumber != null) {\r\n                simId = telephonyManager.simSerialNumber\r\n            }\r\n\r\n        }\r\n\r\n```","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>you need to get the imsi from <code>telephonyManager.subscriberId</code></p>\n<pre><code>\n\n    private var carrierName: String? = null\n    private var displayName: String? = null\n    private var slotIndex = 0\n    private var number: String? = null\n    private var countryIso: String? = null\n    private var imsi: String? = null\n    private var simId: String? = null\n\n    init {\n        carrierName = &quot;&quot;\n        displayName = &quot;&quot;\n        slotIndex = 0\n        number = &quot;&quot;\n        countryIso = &quot;&quot;\n        imsi = &quot;&quot;\n        simId = &quot;&quot;\n\n        imsi = telephonyManager.subscriberId\n        number = telephonyManager.line1Number\n\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\n            carrierName = subscriptionInfo.carrierName.toString()\n            displayName = subscriptionInfo.displayName.toString()\n            slotIndex = subscriptionInfo.simSlotIndex\n            \n            simId = subscriptionInfo.iccId\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\n                countryIso = subscriptionInfo.countryIso\n            } else if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n        }else {\n            if (telephonyManager.simOperator != null) {\n                carrierName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simOperator != null) {\n                displayName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n\n            if (telephonyManager.simSerialNumber != null) {\n                simId = telephonyManager.simSerialNumber\n            }\n\n        }\n\n</code></pre>\n"}],"owner":{"account_id":27597592,"reputation":3,"user_id":21063492,"display_name":"php fox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76463626,"answer_count":2,"score":0,"last_activity_date":1686649584,"creation_date":1681021427,"question_id":75969076,"body_markdown":"I tried to retrieve the SIM phone number and IMSI number using Kotlin. However, it&#39;s not working on real devices with Android API 29 or above. The code works fine on emulators and Android 7.\r\n\r\nI have included the required permissions in the manifest file. Here is my Kotlin code. Can anyone suggest a solution to this issue?\r\n\r\n\r\n\r\n```\r\n\r\n    private var carrierName: String? = null\r\n    private var displayName: String? = null\r\n    private var slotIndex = 0\r\n    private var number: String? = null\r\n    private var countryIso: String? = null\r\n    private var imsi: String? = null\r\n    private var simId: String? = null\r\n\r\n\r\n\r\n\r\n    init {\r\n        carrierName = &quot;&quot;\r\n        displayName = &quot;&quot;\r\n        slotIndex = 0\r\n        number = &quot;&quot;\r\n        countryIso = &quot;&quot;\r\n        imsi = &quot;&quot;\r\n        simId = &quot;&quot;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\r\n            carrierName = subscriptionInfo.carrierName.toString()\r\n            displayName = subscriptionInfo.displayName.toString()\r\n            slotIndex = subscriptionInfo.simSlotIndex\r\n            number = subscriptionInfo.number\r\n            imsi = subscriptionInfo.subscriptionId.toString()\r\n            simId = subscriptionInfo.iccId\r\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\r\n                countryIso = subscriptionInfo.countryIso\r\n            } else if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n        }else {\r\n            if (telephonyManager.simOperator != null) {\r\n                carrierName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simOperator != null) {\r\n                displayName = telephonyManager.simOperatorName\r\n            }\r\n            if (telephonyManager.simCountryIso != null) {\r\n                countryIso = telephonyManager.simCountryIso\r\n            }\r\n            if (telephonyManager.subscriberId != null) {\r\n                imsi = telephonyManager.subscriberId\r\n            }\r\n\r\n            if (telephonyManager.simSerialNumber != null) {\r\n                simId = telephonyManager.simSerialNumber\r\n            }\r\n\r\n            if (telephonyManager.line1Number != null &amp;&amp; telephonyManager.line1Number.isNotEmpty()) {\r\n                number = telephonyManager.line1Number\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\n\r\nManifest\r\n\r\n```\r\n &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot; /&gt;\r\n &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\r\n\r\n```","title":"Unable to Retrieve SIM Phone Number and IMSI Number in Real Devices with Android API 29 and Above Using Kotlin Code","body":"<p>I tried to retrieve the SIM phone number and IMSI number using Kotlin. However, it's not working on real devices with Android API 29 or above. The code works fine on emulators and Android 7.</p>\n<p>I have included the required permissions in the manifest file. Here is my Kotlin code. Can anyone suggest a solution to this issue?</p>\n<pre><code>\n    private var carrierName: String? = null\n    private var displayName: String? = null\n    private var slotIndex = 0\n    private var number: String? = null\n    private var countryIso: String? = null\n    private var imsi: String? = null\n    private var simId: String? = null\n\n\n\n\n    init {\n        carrierName = &quot;&quot;\n        displayName = &quot;&quot;\n        slotIndex = 0\n        number = &quot;&quot;\n        countryIso = &quot;&quot;\n        imsi = &quot;&quot;\n        simId = &quot;&quot;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP_MR1 &amp;&amp; subscriptionInfo!=null) {\n            carrierName = subscriptionInfo.carrierName.toString()\n            displayName = subscriptionInfo.displayName.toString()\n            slotIndex = subscriptionInfo.simSlotIndex\n            number = subscriptionInfo.number\n            imsi = subscriptionInfo.subscriptionId.toString()\n            simId = subscriptionInfo.iccId\n            if (subscriptionInfo.countryIso != null &amp;&amp; subscriptionInfo.countryIso.isNotEmpty()) {\n                countryIso = subscriptionInfo.countryIso\n            } else if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n        }else {\n            if (telephonyManager.simOperator != null) {\n                carrierName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simOperator != null) {\n                displayName = telephonyManager.simOperatorName\n            }\n            if (telephonyManager.simCountryIso != null) {\n                countryIso = telephonyManager.simCountryIso\n            }\n            if (telephonyManager.subscriberId != null) {\n                imsi = telephonyManager.subscriberId\n            }\n\n            if (telephonyManager.simSerialNumber != null) {\n                simId = telephonyManager.simSerialNumber\n            }\n\n            if (telephonyManager.line1Number != null &amp;&amp; telephonyManager.line1Number.isNotEmpty()) {\n                number = telephonyManager.line1Number\n            }\n        }\n    }\n\n</code></pre>\n<p>Manifest</p>\n<pre><code> &lt;uses-permission android:name=&quot;android.permission.READ_PRIVILEGED_PHONE_STATE&quot; /&gt;\n &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot;/&gt;\n\n</code></pre>\n"},{"tags":["java","logback","slf4j"],"comments":[{"owner":{"account_id":9330948,"reputation":2699,"user_id":7179509,"accept_rate":78,"display_name":"Maksym"},"score":3,"creation_date":1563981130,"post_id":41255503,"comment_id":100882586,"body_markdown":"SLF4J has already implemented it in their latest version slf4j-api-2.0.0-alpha0 https://www.slf4j.org/manual.html#fluent","body":"SLF4J has already implemented it in their latest version slf4j-api-2.0.0-alpha0 <a href=\"https://www.slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">slf4j.org/manual.html#fluent</a>"},{"owner":{"account_id":372736,"reputation":2561,"user_id":721956,"accept_rate":54,"display_name":"Askar Kalykov"},"score":0,"creation_date":1686649249,"post_id":41255503,"comment_id":134824635,"body_markdown":"The case when simple comment is much more helpful than the top voted answer.","body":"The case when simple comment is much more helpful than the top voted answer."}],"answers":[{"tags":[],"owner":{"account_id":562,"reputation":3657,"user_id":728,"accept_rate":91,"display_name":"TJR"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1490725941,"creation_date":1490725941,"answer_id":43077306,"question_id":41255503,"body_markdown":"Maybe something like this would work. You&#39;ll need to determine if the cost of `new`&#39;ing instances is better than doing it another way.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    logger.debug(&quot;This {} and {} with {} &quot;,\r\n        defer(() -&gt; this),\r\n        defer(() -&gt; that),\r\n        defer(() -&gt; compute()));\r\n\r\nThen with this...\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import lombok.NonNull;\r\n    import lombok.RequiredArgsConstructor;\r\n    \r\n    @RequiredArgsConstructor(staticName = &quot;defer&quot;)\r\n    public class LogString {\r\n        @NonNull private final StringGenerator generator;\r\n    \r\n        @Override\r\n        public String toString() {\r\n            return generator.createString();\r\n        }\r\n    \r\n        public interface StringGenerator {\r\n            String createString();\r\n        }\r\n    }\r\n\r\n","title":"Lambda support for SLF4J API","body":"<p>Maybe something like this would work. You'll need to determine if the cost of <code>new</code>'ing instances is better than doing it another way.</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>logger.debug(\"This {} and {} with {} \",\n    defer(() -&gt; this),\n    defer(() -&gt; that),\n    defer(() -&gt; compute()));\n</code></pre>\n\n<p>Then with this...</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.NonNull;\nimport lombok.RequiredArgsConstructor;\n\n@RequiredArgsConstructor(staticName = \"defer\")\npublic class LogString {\n    @NonNull private final StringGenerator generator;\n\n    @Override\n    public String toString() {\n        return generator.createString();\n    }\n\n    public interface StringGenerator {\n        String createString();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":236329,"reputation":4384,"user_id":503743,"accept_rate":67,"display_name":"Mariano Ruiz"},"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1493386830,"creation_date":1493386830,"answer_id":43681657,"question_id":41255503,"body_markdown":"Unfortunately, this is not supported yet: https://jira.qos.ch/browse/SLF4J-371","title":"Lambda support for SLF4J API","body":"<p>Unfortunately, this is not supported yet: <a href=\"https://jira.qos.ch/browse/SLF4J-371\" rel=\"noreferrer\">https://jira.qos.ch/browse/SLF4J-371</a></p>\n"},{"tags":[],"owner":{"account_id":467725,"reputation":19389,"user_id":873282,"accept_rate":55,"display_name":"koppor"},"down_vote_count":2,"up_vote_count":11,"is_accepted":false,"score":9,"last_activity_date":1522309622,"creation_date":1518294154,"answer_id":48725206,"question_id":41255503,"body_markdown":"[slf4j-lambda](https://github.com/kwon37xi/slf4j-lambda) supports that:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    import kr.pe.kwonnam.slf4jlambda.LambdaLogger;\r\n    import kr.pe.kwonnam.slf4jlambda.LambdaLoggerFactory;\r\n\r\n    LambdaLogger log = LambdaLoggerFactory.getLogger(YourClass.class);\r\n\r\n    // lambda for message itself\r\n    log.debug(() -&gt; createMessage(&quot;debug level&quot;));\r\n\r\n    // lambda for message format&#39;s arguments\r\n    log.info(&quot;info lambda formatter number {}, string {}&quot;, () -&gt; 123, () -&gt; &quot;Hello LambdaLogger&quot;);\r\n\r\n    // method reference\r\n    public String longRunnigMethod() {\r\n        return &quot;some long running method&quot;;\r\n    }\r\n\r\n    log.debug(&quot;Long running method logging {}&quot;, this::longRunnigMethod);\r\n\r\n    // exception logging\r\n    log.error(() -&gt; &quot;error lambda exception msg - &quot; + ex.getMessage(), ex);","title":"Lambda support for SLF4J API","body":"<p><a href=\"https://github.com/kwon37xi/slf4j-lambda\" rel=\"noreferrer\">slf4j-lambda</a> supports that:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>import kr.pe.kwonnam.slf4jlambda.LambdaLogger;\nimport kr.pe.kwonnam.slf4jlambda.LambdaLoggerFactory;\n\nLambdaLogger log = LambdaLoggerFactory.getLogger(YourClass.class);\n\n// lambda for message itself\nlog.debug(() -&gt; createMessage(\"debug level\"));\n\n// lambda for message format's arguments\nlog.info(\"info lambda formatter number {}, string {}\", () -&gt; 123, () -&gt; \"Hello LambdaLogger\");\n\n// method reference\npublic String longRunnigMethod() {\n    return \"some long running method\";\n}\n\nlog.debug(\"Long running method logging {}\", this::longRunnigMethod);\n\n// exception logging\nlog.error(() -&gt; \"error lambda exception msg - \" + ex.getMessage(), ex);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":1,"up_vote_count":20,"is_accepted":false,"score":19,"last_activity_date":1686649444,"creation_date":1575255741,"answer_id":59132131,"question_id":41255503,"body_markdown":"# SLF4J – version 2\r\n\r\n\r\nVersion 2 of [SLF4J][1] has [support][5] for lambda syntax. This new version also brings a [fluent API][2]. \r\n\r\nVersion 2 is now the current generation of SLF4J. Latest release is 2.0.6 as of 2023-01. Requires [Java 8][3] or later.\r\n\r\nMaven POM setting:\r\n\r\n```xml\r\n&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n    &lt;version&gt;2.0.6&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nSee the [*Download*](http://www.slf4j.org/download.html) page. See [this repository][4]. \r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/SLF4J\r\n  [2]: https://en.wikipedia.org/wiki/Fluent_interface\r\n  [3]: https://en.m.wikipedia.org/wiki/Java_version_history#Java_8\r\n  [4]: https://mvnrepository.com/artifact/org.slf4j/slf4j-api\r\n  [5]: https://slf4j.org/manual.html#fluent","title":"Lambda support for SLF4J API","body":"<h1>SLF4J – version 2</h1>\n<p>Version 2 of <a href=\"https://en.wikipedia.org/wiki/SLF4J\" rel=\"nofollow noreferrer\">SLF4J</a> has <a href=\"https://slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">support</a> for lambda syntax. This new version also brings a <a href=\"https://en.wikipedia.org/wiki/Fluent_interface\" rel=\"nofollow noreferrer\">fluent API</a>.</p>\n<p>Version 2 is now the current generation of SLF4J. Latest release is 2.0.6 as of 2023-01. Requires <a href=\"https://en.m.wikipedia.org/wiki/Java_version_history#Java_8\" rel=\"nofollow noreferrer\">Java 8</a> or later.</p>\n<p>Maven POM setting:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n    &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n    &lt;version&gt;2.0.6&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>See the <a href=\"http://www.slf4j.org/download.html\" rel=\"nofollow noreferrer\"><em>Download</em></a> page. See <a href=\"https://mvnrepository.com/artifact/org.slf4j/slf4j-api\" rel=\"nofollow noreferrer\">this repository</a>.</p>\n"},{"tags":[],"owner":{"account_id":11875805,"reputation":45,"user_id":8690885,"display_name":"Zhnz"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661265341,"creation_date":1661265341,"answer_id":73460629,"question_id":41255503,"body_markdown":"**As of August 20th SLF4j version 2.0 was released with support for lambdas.**\r\n\r\nCurrently only the newly added optional fluent API supports lambdas. They can also be combined with traditional variable parameters. See the following example:\r\n\r\n    logger.atDebug().setMessage(&quot;Temperature set to {}. Old value was {}.&quot;).addArgument(() -&gt; someSupplier()).addArgument(oldT).log();\r\n\r\nReference: [SLF4J Manual - Fluent][1]\r\n\r\n\r\n  [1]: https://www.slf4j.org/manual.html#fluent","title":"Lambda support for SLF4J API","body":"<p><strong>As of August 20th SLF4j version 2.0 was released with support for lambdas.</strong></p>\n<p>Currently only the newly added optional fluent API supports lambdas. They can also be combined with traditional variable parameters. See the following example:</p>\n<pre><code>logger.atDebug().setMessage(&quot;Temperature set to {}. Old value was {}.&quot;).addArgument(() -&gt; someSupplier()).addArgument(oldT).log();\n</code></pre>\n<p>Reference: <a href=\"https://www.slf4j.org/manual.html#fluent\" rel=\"nofollow noreferrer\">SLF4J Manual - Fluent</a></p>\n"}],"owner":{"account_id":1240801,"reputation":1229,"user_id":1203446,"accept_rate":55,"display_name":"Souvik"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":22618,"favorite_count":0,"down_vote_count":0,"up_vote_count":48,"answer_count":5,"score":48,"last_activity_date":1686649444,"creation_date":1482296947,"question_id":41255503,"body_markdown":"In Log4j latest API we have Lambda support where I can manage the Debug option easily.\r\n\r\nExample: \r\n\r\n    logger.debug(&quot;This {} and {} with {} &quot;, \r\n      () -&gt; this, () -&gt; that, () -&gt; compute());\r\n\r\nBut for slf4j/logback is there any option to have lambda enabled as mentioned above. Please let me know the syntax then.","title":"Lambda support for SLF4J API","body":"<p>In Log4j latest API we have Lambda support where I can manage the Debug option easily.</p>\n\n<p>Example: </p>\n\n<pre><code>logger.debug(\"This {} and {} with {} \", \n  () -&gt; this, () -&gt; that, () -&gt; compute());\n</code></pre>\n\n<p>But for slf4j/logback is there any option to have lambda enabled as mentioned above. Please let me know the syntax then.</p>\n"},{"tags":["java","spring","zipkin"],"owner":{"account_id":25101814,"reputation":1,"user_id":18952452,"display_name":"petergram"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686649328,"creation_date":1686649328,"question_id":76463593,"body_markdown":"I would like to know how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.\r\n\r\nIn the code below, the trace_id is not propagated, and each client ends up having an individual trace_id.\r\n\r\n\r\n```java\r\nTestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\r\nSpan span = tracer.nextSpan(tracer.currentSpan());\r\n\r\ntestForkJoinPool.submit(() -&gt; {\r\n    try (SpanInScope ignored = tracer.withSpan(span)) {\r\n        IntStream.range(1, 20).parallel().forEach(idx -&gt; {\r\n            client.get(1000L);\r\n        });\r\n    } finally {\r\n        span.end();\r\n    }\r\n}).get();\r\n```\r\n\r\nHowever, if we modify the above code as shown below, the trace_id is propagated.\r\n\r\n```java\r\nTestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\r\nSpan span = tracer.nextSpan(tracer.currentSpan());\r\n\r\ntestForkJoinPool.submit(() -&gt; {\r\n    IntStream.range(1, 20).parallel().forEach(idx -&gt; {\r\n        try (SpanInScope ignored = tracer.withSpan(span)) {\r\n            client.get(1000L);\r\n        } finally {\r\n            span.end();\r\n        }\r\n    });\r\n}).get();\r\n```\r\n\r\nUnfortunately, applying SpanInScope to all existing Stream API code as mentioned above has its limitations. Is there a way to inject SpanInScope with minimal modifications to the existing Stream API code?\r\n\r\nThank you.\r\n\r\n\r\npropagate the trace_id within the Java Stream API in Spring Cloud Zipkin.","title":"how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin","body":"<p>I would like to know how to propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.</p>\n<p>In the code below, the trace_id is not propagated, and each client ends up having an individual trace_id.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\nSpan span = tracer.nextSpan(tracer.currentSpan());\n\ntestForkJoinPool.submit(() -&gt; {\n    try (SpanInScope ignored = tracer.withSpan(span)) {\n        IntStream.range(1, 20).parallel().forEach(idx -&gt; {\n            client.get(1000L);\n        });\n    } finally {\n        span.end();\n    }\n}).get();\n</code></pre>\n<p>However, if we modify the above code as shown below, the trace_id is propagated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TestForkJoinPool testForkJoinPool = new TestForkJoinPool(10);\nSpan span = tracer.nextSpan(tracer.currentSpan());\n\ntestForkJoinPool.submit(() -&gt; {\n    IntStream.range(1, 20).parallel().forEach(idx -&gt; {\n        try (SpanInScope ignored = tracer.withSpan(span)) {\n            client.get(1000L);\n        } finally {\n            span.end();\n        }\n    });\n}).get();\n</code></pre>\n<p>Unfortunately, applying SpanInScope to all existing Stream API code as mentioned above has its limitations. Is there a way to inject SpanInScope with minimal modifications to the existing Stream API code?</p>\n<p>Thank you.</p>\n<p>propagate the trace_id within the Java Stream API in Spring Cloud Zipkin.</p>\n"},{"tags":["java","picocli","javalin"],"answers":[{"tags":[],"owner":{"account_id":105534,"reputation":833,"user_id":281570,"accept_rate":83,"display_name":"Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686649149,"creation_date":1686649149,"answer_id":76463562,"question_id":76461848,"body_markdown":"I think I found a solution. I just had to not exit the app after starting the `Runnable`/`Callable`. Like so: \r\n\r\n```java\r\npublic static void main(String... args) {\r\n    new CommandLine(new Main()).execute(args);\r\n}\r\n\r\n```","title":"Picocli with long running Javalin Thread","body":"<p>I think I found a solution. I just had to not exit the app after starting the <code>Runnable</code>/<code>Callable</code>. Like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String... args) {\n    new CommandLine(new Main()).execute(args);\n}\n\n</code></pre>\n"}],"owner":{"account_id":105534,"reputation":833,"user_id":281570,"accept_rate":83,"display_name":"Thomas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686649149,"creation_date":1686633113,"question_id":76461848,"body_markdown":"I want to build a simple [Javalin](https://javalin.io/) API and configure the HTTP port with a command line arg with [Picocli](https://picocli.info/). It looks a bit like this:\r\n\r\n```java\r\npublic class Main implements Runnable {\r\n\r\n    @CommandLine.Option(names = {&quot;-p&quot;, &quot;--port&quot;})\r\n    int httpPort = 9080;\r\n\r\n    public static void main(String... args) {\r\n        int exitCode = new CommandLine(new Main()).execute(args);\r\n        System.exit(exitCode);\r\n    }\r\n\r\n    @Override\r\n    public void run() {\r\n        Javalin.create()\r\n            .get(&quot;/some/endpoint&quot;, new EndpointHandler())\r\n            .start(&quot;0.0.0.0&quot;, httpPort);\r\n    }\r\n}\r\n```\r\n\r\nThe problem is, that Picocli seems to start the Javalin thread and returns or exits immediatly. How can I either get Picocli to wait for Javalin or have Javalin block in such a way that my app does not exit instantly?\r\n","title":"Picocli with long running Javalin Thread","body":"<p>I want to build a simple <a href=\"https://javalin.io/\" rel=\"nofollow noreferrer\">Javalin</a> API and configure the HTTP port with a command line arg with <a href=\"https://picocli.info/\" rel=\"nofollow noreferrer\">Picocli</a>. It looks a bit like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main implements Runnable {\n\n    @CommandLine.Option(names = {&quot;-p&quot;, &quot;--port&quot;})\n    int httpPort = 9080;\n\n    public static void main(String... args) {\n        int exitCode = new CommandLine(new Main()).execute(args);\n        System.exit(exitCode);\n    }\n\n    @Override\n    public void run() {\n        Javalin.create()\n            .get(&quot;/some/endpoint&quot;, new EndpointHandler())\n            .start(&quot;0.0.0.0&quot;, httpPort);\n    }\n}\n</code></pre>\n<p>The problem is, that Picocli seems to start the Javalin thread and returns or exits immediatly. How can I either get Picocli to wait for Javalin or have Javalin block in such a way that my app does not exit instantly?</p>\n"},{"tags":["java","flask","apache-kafka","apache-flink","flink-streaming"],"answers":[{"tags":[],"owner":{"account_id":19778321,"reputation":41,"user_id":14483834,"display_name":"hilmialf"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686617576,"creation_date":1686617576,"answer_id":76461096,"question_id":76456079,"body_markdown":"Well, there are multiple ways to achieve this which might be really opinionated.\r\n\r\nWhen running multiple jobs (`execute()` call) under the same application, it actually blocks. So your call to another `execute()` will wait the previous execute() call to complete. See [here][1].\r\n\r\n&gt; Compared to the Per-Job (deprecated) mode, the Application Mode allows the submission of applications consisting of multiple jobs. The order of job execution is not affected by the deployment mode but by the call used to launch the job. Using execute(), which is blocking, establishes an order and it will lead to the execution of the “next” job being postponed until “this” job finishes. Using executeAsync(), which is non-blocking, will lead to the “next” job starting before “this” job finishes.\r\n\r\n&gt;The Application Mode allows for multi-execute() applications but High-Availability is not supported in these cases. High-Availability in Application Mode is only supported for single-execute() applications.\r\n\r\n&gt;Additionally, when any of multiple running jobs in Application Mode (submitted for example using executeAsync()) gets cancelled, all jobs will be stopped and the JobManager will shut down. Regular job completions (by the sources shutting down) are supported.\r\n\r\nApart of the above, I am not fan of running multiple job inside one application since it [does not offer high-availability][1]. So I would normally do either:\r\n\r\n 1. I am thinking you can use [side outputs][2] here. The rough idea would be to put splitted records into different side output. Then from each independent side output, you can do your further processing.\r\n\r\n 2. In your main app, just split the records and produce back to different kafka topic for each job type. Then you can create another job that consume from that particular topic and do the processing.\r\n\r\n\r\n  [1]: https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\r\n  [2]: https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/datastream/side_output/","title":"Can I use a flink job to split and send data to multiple jobs according to the incoming data via kafka?","body":"<p>Well, there are multiple ways to achieve this which might be really opinionated.</p>\n<p>When running multiple jobs (<code>execute()</code> call) under the same application, it actually blocks. So your call to another <code>execute()</code> will wait the previous execute() call to complete. See <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\" rel=\"nofollow noreferrer\">here</a>.</p>\n<blockquote>\n<p>Compared to the Per-Job (deprecated) mode, the Application Mode allows the submission of applications consisting of multiple jobs. The order of job execution is not affected by the deployment mode but by the call used to launch the job. Using execute(), which is blocking, establishes an order and it will lead to the execution of the “next” job being postponed until “this” job finishes. Using executeAsync(), which is non-blocking, will lead to the “next” job starting before “this” job finishes.</p>\n</blockquote>\n<blockquote>\n<p>The Application Mode allows for multi-execute() applications but High-Availability is not supported in these cases. High-Availability in Application Mode is only supported for single-execute() applications.</p>\n</blockquote>\n<blockquote>\n<p>Additionally, when any of multiple running jobs in Application Mode (submitted for example using executeAsync()) gets cancelled, all jobs will be stopped and the JobManager will shut down. Regular job completions (by the sources shutting down) are supported.</p>\n</blockquote>\n<p>Apart of the above, I am not fan of running multiple job inside one application since it <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/deployment/overview/#application-mode\" rel=\"nofollow noreferrer\">does not offer high-availability</a>. So I would normally do either:</p>\n<ol>\n<li><p>I am thinking you can use <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/datastream/side_output/\" rel=\"nofollow noreferrer\">side outputs</a> here. The rough idea would be to put splitted records into different side output. Then from each independent side output, you can do your further processing.</p>\n</li>\n<li><p>In your main app, just split the records and produce back to different kafka topic for each job type. Then you can create another job that consume from that particular topic and do the processing.</p>\n</li>\n</ol>\n"}],"owner":{"account_id":26959396,"reputation":11,"user_id":20527272,"display_name":"Arjun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":285,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686649122,"creation_date":1686568217,"question_id":76456079,"body_markdown":"I&#39;m new to `Flink`. So, this is a flink job which consumes data from kafka and split the data according to some keys and values.\r\n\r\n\r\nThis is the SplitJob Class\r\n\r\n\r\n    public class SplitJob {\r\n        public static void main(String[] args) throws Exception {   \r\n    StreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\r\n    ObjectMapper mapper = new ObjectMapper();\r\n    long startTime = System.currentTimeMillis();\r\n    \r\n    //For recieving data from kafka\r\n    //        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder().setBootstrapServers(&quot;localhost:9092&quot;).setTopics(&quot;input-topic&quot;).setGroupId(&quot;my-group&quot;).setStartingOffsets(OffsetsInitializer.latest()).setValueOnlyDeserializer(new SimpleStringSchema()).build();\r\n    \r\n    //        DataStream&lt;String&gt; sourceStream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\r\n    \r\n    \r\n            DataStream&lt;String&gt; sourceStream = env.fromElements(&quot;{\\&quot;deviceId\\&quot;:\\&quot;0\\&quot;,\\&quot;sessionId\\&quot;:\\&quot;0\\&quot;,\\&quot;component\\&quot;:[DATAS....}]}&quot;);\r\n            DataStream&lt;ObjectNode&gt; jsonStream = sourceStream.map(value -&gt; mapper.readTree(value).deepCopy());\r\n    \r\n            DataStream&lt;String&gt; data1 = processComponentTwo(jsonStream, &quot;data1&quot;, &quot;hr&quot;);\r\n            DataStream&lt;String&gt; data2 = processComponentTwo(jsonStream, &quot;data2&quot;, &quot;hr&quot;);\r\n            DataStream&lt;String&gt; data3 = processComponentTwo(jsonStream, &quot;data3&quot;, &quot;value&quot;);\r\n            \r\n    \r\n            Job1.consumeDataStream(data1, data3);\r\n            Job2.consumeDataStream(data2, data3);\r\n    \r\n    \r\n            long endTime = System.currentTimeMillis();\r\n            long elapsedTime = endTime - startTime;\r\n            System.out.println(&quot;Elapsed time in splitjob:::::: &quot; + elapsedTime + &quot;ms&quot;);\r\n    \r\n    \r\n            env.execute(&quot;SplitJob&quot;);\r\n    \r\n    \r\n    \r\n        }\r\n    \r\n        private static void processComponent(ObjectNode jsonNodes, String code, String field, Collector&lt;String&gt; collector) {\r\n            List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\r\n            for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\r\n                String componentCode = component.get(&quot;code&quot;).asText();\r\n                if (componentCode.equals(code)) {\r\n                    resultList.add(component.get(field).toString());\r\n                }\r\n            }\r\n            collector.collect(resultList.toString());\r\n    \r\n        }\r\n    \r\n    \r\n        private static DataStream&lt;String&gt; processComponentTwo(DataStream&lt;ObjectNode&gt; jsonStream, String componentCode, String field) {\r\n            return jsonStream.flatMap(new FlatMapFunction&lt;ObjectNode, String&gt;() {\r\n                @Override\r\n                public void flatMap(ObjectNode jsonNodes, Collector&lt;String&gt; collector) throws Exception {\r\n                    List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\r\n                    for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\r\n                        String code = component.get(&quot;code&quot;).asText();\r\n                        if (code.equals(componentCode)) {\r\n                            resultList.add(component.get(field).toString());\r\n                        }\r\n                    }\r\n                    collector.collect(resultList.toString());\r\n                }\r\n            });\r\n        }\r\n    }\r\n    }\r\n\r\n\r\n&gt; This is the job1 class\r\n\r\n    public class Job1 {\r\n        public static DataStream&lt;String&gt; consumeDataStream(DataStream&lt;String&gt; data, DataStream&lt;String&gt; pdata) throws Exception {\r\n    \r\n            StreamExecutionEnvironment env2 = StreamExecutionEnvironment.getExecutionEnvironment();\r\n            env2.setParallelism(2);\r\n    \r\n    \r\n            ArrayList&lt;String&gt; cdata = new ArrayList&lt;&gt;();\r\n            Iterator&lt;String&gt; cOutput = DataStreamUtils.collect(data);\r\n            while (cOutput.hasNext())\r\n                cdata.add(cOutput.next());\r\n    \r\n            ArrayList&lt;String&gt; pList = new ArrayList&lt;&gt;();\r\n            Iterator&lt;String&gt; pOutput = DataStreamUtils.collect(pdata);\r\n            while (parentOutput.hasNext())\r\n                pList.add(pOutput.next());\r\n    \r\n            HashMap&lt;String, ArrayList&lt;String&gt;&gt; mergedData = new HashMap&lt;&gt;();\r\n            mergedData.put(&quot;fhr1&quot;, cdata);\r\n            mergedData.put(&quot;utrine&quot;, pList);\r\n    \r\n            DataStream&lt;String&gt; streams = env2.fromElements(mergedData.toString());\r\n            DataStream&lt;String&gt; processedStream = streams.map(new MapFunction&lt;String, String&gt;() {\r\n                @Override\r\n                public String map(String value) throws Exception {\r\n                    RequestSpecification request = RestAssured.given();\r\n                    request.header(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n                    request.body(mergedData.toString());\r\n                    request.post(&quot;http://localhost:5002/fhr1&quot;);\r\n                    return value.concat(&quot; job 1&quot;);\r\n    \r\n                }\r\n            });\r\n    \r\n    \r\n            env2.execute(&quot;Job 1&quot;);\r\n    \r\n    \r\n            return fhr;\r\n    \r\n    \r\n    \r\n    \r\n        }\r\n    \r\n    \r\n    }\r\n\r\nSimilar to this we have job2 class. Not familiar with flink so I don&#39;t know if this is the correct way to use it. Anyway what I&#39;m trying to do is, Get data from kafka, split it and send to multiple jobs like job1, and I want to send the data from job1 to a flask api. This sending data to flask API should be on every other jobs created.  so this is taking way too much time, the methods used here are scrapped from internet.\r\nAlso we need to scale up the jobs like job1 according to the data splitting.\r\n\r\nThe flink version using is : `1.17.0`\r\n\r\n\r\nI have tried multithreading in splitjob class, I don&#39;t think it worked.\r\nCurrently using a hardcoded data other that data from kafka.\r\nThe overall structure is working but the performance is very poor, and it is taking way too much time to complete. I need to reduce the time to below 10ms, currently its taking 10s.\r\nIs it even possible or should I try any other methods.\r\n\r\n\r\n\r\n","title":"Can I use a flink job to split and send data to multiple jobs according to the incoming data via kafka?","body":"<p>I'm new to <code>Flink</code>. So, this is a flink job which consumes data from kafka and split the data according to some keys and values.</p>\n<p>This is the SplitJob Class</p>\n<pre><code>public class SplitJob {\n    public static void main(String[] args) throws Exception {   \nStreamExecutionEnvironment env = StreamExecutionEnvironment.getExecutionEnvironment();\nObjectMapper mapper = new ObjectMapper();\nlong startTime = System.currentTimeMillis();\n\n//For recieving data from kafka\n//        KafkaSource&lt;String&gt; source = KafkaSource.&lt;String&gt;builder().setBootstrapServers(&quot;localhost:9092&quot;).setTopics(&quot;input-topic&quot;).setGroupId(&quot;my-group&quot;).setStartingOffsets(OffsetsInitializer.latest()).setValueOnlyDeserializer(new SimpleStringSchema()).build();\n\n//        DataStream&lt;String&gt; sourceStream = env.fromSource(source, WatermarkStrategy.noWatermarks(), &quot;Kafka Source&quot;);\n\n\n        DataStream&lt;String&gt; sourceStream = env.fromElements(&quot;{\\&quot;deviceId\\&quot;:\\&quot;0\\&quot;,\\&quot;sessionId\\&quot;:\\&quot;0\\&quot;,\\&quot;component\\&quot;:[DATAS....}]}&quot;);\n        DataStream&lt;ObjectNode&gt; jsonStream = sourceStream.map(value -&gt; mapper.readTree(value).deepCopy());\n\n        DataStream&lt;String&gt; data1 = processComponentTwo(jsonStream, &quot;data1&quot;, &quot;hr&quot;);\n        DataStream&lt;String&gt; data2 = processComponentTwo(jsonStream, &quot;data2&quot;, &quot;hr&quot;);\n        DataStream&lt;String&gt; data3 = processComponentTwo(jsonStream, &quot;data3&quot;, &quot;value&quot;);\n        \n\n        Job1.consumeDataStream(data1, data3);\n        Job2.consumeDataStream(data2, data3);\n\n\n        long endTime = System.currentTimeMillis();\n        long elapsedTime = endTime - startTime;\n        System.out.println(&quot;Elapsed time in splitjob:::::: &quot; + elapsedTime + &quot;ms&quot;);\n\n\n        env.execute(&quot;SplitJob&quot;);\n\n\n\n    }\n\n    private static void processComponent(ObjectNode jsonNodes, String code, String field, Collector&lt;String&gt; collector) {\n        List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\n        for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\n            String componentCode = component.get(&quot;code&quot;).asText();\n            if (componentCode.equals(code)) {\n                resultList.add(component.get(field).toString());\n            }\n        }\n        collector.collect(resultList.toString());\n\n    }\n\n\n    private static DataStream&lt;String&gt; processComponentTwo(DataStream&lt;ObjectNode&gt; jsonStream, String componentCode, String field) {\n        return jsonStream.flatMap(new FlatMapFunction&lt;ObjectNode, String&gt;() {\n            @Override\n            public void flatMap(ObjectNode jsonNodes, Collector&lt;String&gt; collector) throws Exception {\n                List&lt;String&gt; resultList = new ArrayList&lt;&gt;();\n                for (JsonNode component : jsonNodes.get(&quot;component&quot;)) {\n                    String code = component.get(&quot;code&quot;).asText();\n                    if (code.equals(componentCode)) {\n                        resultList.add(component.get(field).toString());\n                    }\n                }\n                collector.collect(resultList.toString());\n            }\n        });\n    }\n}\n}\n</code></pre>\n<blockquote>\n<p>This is the job1 class</p>\n</blockquote>\n<pre><code>public class Job1 {\n    public static DataStream&lt;String&gt; consumeDataStream(DataStream&lt;String&gt; data, DataStream&lt;String&gt; pdata) throws Exception {\n\n        StreamExecutionEnvironment env2 = StreamExecutionEnvironment.getExecutionEnvironment();\n        env2.setParallelism(2);\n\n\n        ArrayList&lt;String&gt; cdata = new ArrayList&lt;&gt;();\n        Iterator&lt;String&gt; cOutput = DataStreamUtils.collect(data);\n        while (cOutput.hasNext())\n            cdata.add(cOutput.next());\n\n        ArrayList&lt;String&gt; pList = new ArrayList&lt;&gt;();\n        Iterator&lt;String&gt; pOutput = DataStreamUtils.collect(pdata);\n        while (parentOutput.hasNext())\n            pList.add(pOutput.next());\n\n        HashMap&lt;String, ArrayList&lt;String&gt;&gt; mergedData = new HashMap&lt;&gt;();\n        mergedData.put(&quot;fhr1&quot;, cdata);\n        mergedData.put(&quot;utrine&quot;, pList);\n\n        DataStream&lt;String&gt; streams = env2.fromElements(mergedData.toString());\n        DataStream&lt;String&gt; processedStream = streams.map(new MapFunction&lt;String, String&gt;() {\n            @Override\n            public String map(String value) throws Exception {\n                RequestSpecification request = RestAssured.given();\n                request.header(&quot;Content-Type&quot;, &quot;application/json&quot;);\n                request.body(mergedData.toString());\n                request.post(&quot;http://localhost:5002/fhr1&quot;);\n                return value.concat(&quot; job 1&quot;);\n\n            }\n        });\n\n\n        env2.execute(&quot;Job 1&quot;);\n\n\n        return fhr;\n\n\n\n\n    }\n\n\n}\n</code></pre>\n<p>Similar to this we have job2 class. Not familiar with flink so I don't know if this is the correct way to use it. Anyway what I'm trying to do is, Get data from kafka, split it and send to multiple jobs like job1, and I want to send the data from job1 to a flask api. This sending data to flask API should be on every other jobs created.  so this is taking way too much time, the methods used here are scrapped from internet.\nAlso we need to scale up the jobs like job1 according to the data splitting.</p>\n<p>The flink version using is : <code>1.17.0</code></p>\n<p>I have tried multithreading in splitjob class, I don't think it worked.\nCurrently using a hardcoded data other that data from kafka.\nThe overall structure is working but the performance is very poor, and it is taking way too much time to complete. I need to reduce the time to below 10ms, currently its taking 10s.\nIs it even possible or should I try any other methods.</p>\n"},{"tags":["java","spring","spring-boot","swagger","springfox"],"comments":[{"owner":{"account_id":159637,"reputation":2203,"user_id":379173,"display_name":"Enrico Giurin"},"score":0,"creation_date":1678988586,"post_id":74649600,"comment_id":133644163,"body_markdown":"I added the same issue and I sorted it by adding: management.server.port=8082","body":"I added the same issue and I sorted it by adding: management.server.port=8082"}],"answers":[{"tags":[],"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1672494466,"creation_date":1672494466,"answer_id":74969944,"question_id":74649600,"body_markdown":"Springfox has not been maintained for quite some time now. Getting it to work with Spring Boot 2.7 is possible by disabling more recent Spring Boot features but probably not worth your time. It&#39;s unlikely to work at all with Spring Boot 3.\r\n\r\nYou can use Springdoc instead. The migration is usually not much work: https://springdoc.org/migrating-from-springfox.html","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>Springfox has not been maintained for quite some time now. Getting it to work with Spring Boot 2.7 is possible by disabling more recent Spring Boot features but probably not worth your time. It's unlikely to work at all with Spring Boot 3.</p>\n<p>You can use Springdoc instead. The migration is usually not much work: <a href=\"https://springdoc.org/migrating-from-springfox.html\" rel=\"nofollow noreferrer\">https://springdoc.org/migrating-from-springfox.html</a></p>\n"},{"tags":[],"owner":{"account_id":24269568,"reputation":21,"user_id":18217883,"display_name":"Ali"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686648831,"creation_date":1686229883,"answer_id":76432214,"question_id":74649600,"body_markdown":"this also work for me  by using the below property at my bootstrap.properties\r\nmanagement.server.port=0","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>this also work for me  by using the below property at my bootstrap.properties\nmanagement.server.port=0</p>\n"}],"owner":{"account_id":20511311,"reputation":597,"user_id":15053014,"display_name":"ima.technophyle"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":834,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686648831,"creation_date":1669940544,"question_id":74649600,"body_markdown":"I have upgraded my Spring Boot project to 2.7.4 &amp; Springfox to 3.0.0. \r\nBut this resulted in the exception,\r\n\r\n&gt; **Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerException**\r\n\r\n\r\nAfter doing some research, I added the following config in the `application.properties`, but the issue was still not fixed.\r\n\r\n    spring.mvc.pathmatch.matching-strategy=ant-path-matcher\r\n\r\nThen I found out that, **Spring Actuator** is causing this issue, and setting the following property fixed the issue.\r\n\r\n    management.server.port=8082\r\n\r\nI don&#39;t want to define a custom management port, instead I want it to take the default server port. \r\n\r\nWhy is Actuator conflicting with Springfox? How do I fix this issue?\r\n\r\n\r\n**pom.xml**\r\n\r\n    &lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.4&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t\t&lt;spring.cloud-version&gt;2021.0.4&lt;/spring.cloud-version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencies&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    \t&lt;/dependency&gt;\r\n    \t&lt;dependency&gt;\r\n    \t\t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.0.0&lt;/version&gt;\r\n    \t&lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n**Springfox Swagger Config**\r\n\r\n    @Configuration\r\n    @EnableSwagger2\r\n    public class SwaggerConfig {\r\n    \r\n        @Bean\r\n    \tpublic Docket productApi() {\r\n    \t\treturn new Docket(DocumentationType.SWAGGER_2).select()\r\n    \t\t\t\t.apis(RequestHandlerSelectors.basePackage(&quot;com.swagger.io&quot;)).paths(PathSelectors.any()).build();\r\n    \t}\r\n    }\r\n\r\n","title":"Spring Actuator conflicting with Springfox: &#39;documentationPluginsBootstrapper&#39; exception","body":"<p>I have upgraded my Spring Boot project to 2.7.4 &amp; Springfox to 3.0.0.\nBut this resulted in the exception,</p>\n<blockquote>\n<p><strong>Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerException</strong></p>\n</blockquote>\n<p>After doing some research, I added the following config in the <code>application.properties</code>, but the issue was still not fixed.</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy=ant-path-matcher\n</code></pre>\n<p>Then I found out that, <strong>Spring Actuator</strong> is causing this issue, and setting the following property fixed the issue.</p>\n<pre><code>management.server.port=8082\n</code></pre>\n<p>I don't want to define a custom management port, instead I want it to take the default server port.</p>\n<p>Why is Actuator conflicting with Springfox? How do I fix this issue?</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.4&lt;/version&gt;\n        &lt;relativePath /&gt;\n&lt;/parent&gt;\n\n&lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n        &lt;spring.cloud-version&gt;2021.0.4&lt;/spring.cloud-version&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n        &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;\n        &lt;version&gt;3.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p><strong>Springfox Swagger Config</strong></p>\n<pre><code>@Configuration\n@EnableSwagger2\npublic class SwaggerConfig {\n\n    @Bean\n    public Docket productApi() {\n        return new Docket(DocumentationType.SWAGGER_2).select()\n                .apis(RequestHandlerSelectors.basePackage(&quot;com.swagger.io&quot;)).paths(PathSelectors.any()).build();\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","hibernate","spring-data","spring-data-jpa"],"comments":[{"owner":{"account_id":10212015,"reputation":1812,"user_id":7538821,"accept_rate":100,"display_name":"sam"},"score":0,"creation_date":1526472931,"post_id":50370376,"comment_id":87757220,"body_markdown":"Post your hibernate `Entity` and `service`, `DAO` class","body":"Post your hibernate <code>Entity</code> and <code>service</code>, <code>DAO</code> class"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1526477326,"post_id":50370376,"comment_id":87760366,"body_markdown":"It is a single transaction and thus atomic either everything succeeds or everything fails. If that isn&#39;t happening with plain SQL then it isn&#39;t transactional and each statement is executed in its own transaction. So I would say the error is on your plain sql side and not the Spring side (as it adhere&#39;s to the ACID principles of the transaction whereas the SQL one isn&#39;t).","body":"It is a single transaction and thus atomic either everything succeeds or everything fails. If that isn&#39;t happening with plain SQL then it isn&#39;t transactional and each statement is executed in its own transaction. So I would say the error is on your plain sql side and not the Spring side (as it adhere&#39;s to the ACID principles of the transaction whereas the SQL one isn&#39;t)."},{"owner":{"account_id":2563377,"reputation":7174,"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"score":0,"creation_date":1593436383,"post_id":50370376,"comment_id":110772450,"body_markdown":"Make sure that transactions are even enabled in Spring. It&#39;s usually done with `@EnableTransactionManagement` annotation on application class or any included `@Configuration` class","body":"Make sure that transactions are even enabled in Spring. It&#39;s usually done with <code>@EnableTransactionManagement</code> annotation on application class or any included <code>@Configuration</code> class"}],"answers":[{"tags":[],"owner":{"account_id":7268607,"reputation":174,"user_id":5542464,"display_name":"RKT"},"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1526472311,"creation_date":1526472311,"answer_id":50370469,"question_id":50370376,"body_markdown":"Use flush between deleteall and save.","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Use flush between deleteall and save.</p>\n"},{"tags":[],"owner":{"account_id":16342236,"reputation":111,"user_id":11802878,"display_name":"runtime_expection"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1593432781,"creation_date":1593432781,"answer_id":62637878,"question_id":50370376,"body_markdown":"Anyone else stumbling upon this problem. I managed to get it work with writing own deleteAll Method in RepositoryInterface and setting annotation like this:\r\n\r\n    @Modifying(flushAutomatically = true)\r\n    @Query(&quot;delete from MyEntity&quot;)\r\n    void deleteAllCustom()\r\n\r\n","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Anyone else stumbling upon this problem. I managed to get it work with writing own deleteAll Method in RepositoryInterface and setting annotation like this:</p>\n<pre><code>@Modifying(flushAutomatically = true)\n@Query(&quot;delete from MyEntity&quot;)\nvoid deleteAllCustom()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13291674,"reputation":865,"user_id":11423910,"display_name":"soufiane ELAMMARI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650541520,"creation_date":1650541520,"answer_id":71953907,"question_id":50370376,"body_markdown":"  Heey Warriors,finally this works for me.\r\n  \r\n    @Modifying(flushAutomatically = true)\r\n    @Transactional\r\n    void deleteByProjet(Projet projet);\r\n\r\n  Good Luck ;) ","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>Heey Warriors,finally this works for me.</p>\n<pre><code>@Modifying(flushAutomatically = true)\n@Transactional\nvoid deleteByProjet(Projet projet);\n</code></pre>\n<p>Good Luck ;)</p>\n"},{"tags":[],"owner":{"account_id":3378723,"reputation":948,"user_id":2836301,"display_name":"Tonsic"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1654021988,"creation_date":1654021988,"answer_id":72452608,"question_id":50370376,"body_markdown":"I just changed from `deleteAll` to `deleteAllInBatch` (`JpaRepository` interface) and it worked.\r\n\r\n`deleteAllInBatch` results in Hibernate registering a prepared statement `delete from yourtable` right when `deleteAllInBatch` is called.\r\n\r\nWith `deleteAll`, Hibernate\r\n1. select all your data into memory, as entities\r\n1. for each entity, it calls EntityManager.delete\r\n1. each delete generates a `EntityDeleteAction` which will be called when transaction ends and session flushes. But for whatever reason, the actions for the inserts end up being called before the deletes (maybe the order is unpredictable, I&#39;m not sure).","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>I just changed from <code>deleteAll</code> to <code>deleteAllInBatch</code> (<code>JpaRepository</code> interface) and it worked.</p>\n<p><code>deleteAllInBatch</code> results in Hibernate registering a prepared statement <code>delete from yourtable</code> right when <code>deleteAllInBatch</code> is called.</p>\n<p>With <code>deleteAll</code>, Hibernate</p>\n<ol>\n<li>select all your data into memory, as entities</li>\n<li>for each entity, it calls EntityManager.delete</li>\n<li>each delete generates a <code>EntityDeleteAction</code> which will be called when transaction ends and session flushes. But for whatever reason, the actions for the inserts end up being called before the deletes (maybe the order is unpredictable, I'm not sure).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1711539,"reputation":154,"user_id":1569502,"display_name":"Shaolin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686648797,"creation_date":1686648797,"answer_id":76463510,"question_id":50370376,"body_markdown":"It&#39;s important to understand why it happens. There is a defined order of actions performed while flushing the transaction:\r\n\r\n\r\n    OrphanRemovalAction\r\n    AbstractEntityInsertAction\r\n    EntityUpdateAction\r\n    QueuedOperationCollectionAction\r\n    CollectionRemoveAction\r\n    CollectionUpdateAction\r\n    CollectionRecreateAction\r\n    EntityDeleteAction\r\n\r\nAs you can see. The deletion actions are performed after insert actions.\r\n\r\nTo avoid possible constraint problems you need to flush between deleteAll and inserts.","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>It's important to understand why it happens. There is a defined order of actions performed while flushing the transaction:</p>\n<pre><code>OrphanRemovalAction\nAbstractEntityInsertAction\nEntityUpdateAction\nQueuedOperationCollectionAction\nCollectionRemoveAction\nCollectionUpdateAction\nCollectionRecreateAction\nEntityDeleteAction\n</code></pre>\n<p>As you can see. The deletion actions are performed after insert actions.</p>\n<p>To avoid possible constraint problems you need to flush between deleteAll and inserts.</p>\n"}],"owner":{"account_id":186428,"reputation":51,"user_id":9799756,"display_name":"Shameer"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12069,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1686648797,"creation_date":1526472015,"question_id":50370376,"body_markdown":"I am trying to achieve below native query logic using hibernate (Spring JPA). But save(Iterable) throws exception and rollback the entire transaction if one of the record fails to persist. Is there any way to do to catch the record error and proceed with insertion on other records.\r\n\r\neg:- \r\n\r\nNative Sql Query\r\n\r\n    set autocommit=false\r\n    delete from EMPLOYEE;\r\n    insert into EMPLOYEE(id, name, sal) values(2, ‘Roy’, ‘rt’); —-stmt1\r\n    insert into EMPLOYEE(id, name, sal) values(2, ‘Joe’, 3000);\r\n    commit;\r\n\r\nNote: sal column is numeric in EMPLOYEE table. Execution continues eventhough stmt1 failed.\r\n\r\nHibernate (CrudRepository)\r\n\r\n    \r\n    @Autowired\r\n    CrudRepository employeeRepository;\r\n\r\n    @Transactional\r\n    public void saveToDB(List dataList) {\r\n       employeeRepository.deleteAll();\r\n       employeeRepository.save(dataList);\r\n    }\r\n\r\n\r\n\r\n","title":"Spring data: DeleteAll and Insert in same transaction","body":"<p>I am trying to achieve below native query logic using hibernate (Spring JPA). But save(Iterable) throws exception and rollback the entire transaction if one of the record fails to persist. Is there any way to do to catch the record error and proceed with insertion on other records.</p>\n\n<p>eg:- </p>\n\n<p>Native Sql Query</p>\n\n<pre><code>set autocommit=false\ndelete from EMPLOYEE;\ninsert into EMPLOYEE(id, name, sal) values(2, ‘Roy’, ‘rt’); —-stmt1\ninsert into EMPLOYEE(id, name, sal) values(2, ‘Joe’, 3000);\ncommit;\n</code></pre>\n\n<p>Note: sal column is numeric in EMPLOYEE table. Execution continues eventhough stmt1 failed.</p>\n\n<p>Hibernate (CrudRepository)</p>\n\n<pre><code>@Autowired\nCrudRepository employeeRepository;\n\n@Transactional\npublic void saveToDB(List dataList) {\n   employeeRepository.deleteAll();\n   employeeRepository.save(dataList);\n}\n</code></pre>\n"},{"tags":["java","jms","messaging","spring-messaging"],"owner":{"account_id":28810991,"reputation":1,"user_id":22065694,"display_name":"Praneeth Kukunuru"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686647242,"creation_date":1686647242,"question_id":76463315,"body_markdown":"I am new to JMS and APIs. I started working on a messaging platform to try and connect the Glassfish local server to start sending and receiving messages through the server. \r\nHowever, I don&#39;t understand how to set up the Initial Context to recognize where the server is, and what to connect to. \r\nWhen I run this, I get a NoInitialContextException.\r\n\r\n\r\n```\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\nimport javax.naming.*;\r\nimport javax.jms.*;\r\n\r\npublic class Sender {\r\n    public static void main(String[] args) {\r\n        try {\r\n            InitialContext ctx = new InitialContext();\r\n            QueueConnectionFactory f = (QueueConnectionFactory)ctx.lookup(&quot;java:comp/DefaultJMSConnectionFactory&quot;);\r\n            QueueConnection con = f.createQueueConnection();\r\n            con.start();\r\n            QueueSession ses=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\r\n            //3) get the Queue object\r\n            Queue t=(Queue)ctx.lookup(&quot;PTPQueue&quot;);\r\n            //4)create QueueSender object\r\n            QueueSender sender=ses.createSender(t);\r\n            //5) create TextMessage object\r\n            TextMessage msg=ses.createTextMessage();\r\n\r\n            //6) write message\r\n            BufferedReader b=new BufferedReader(new InputStreamReader(System.in));\r\n            while (true) {\r\n                System.out.println(&quot;Enter Msg, end to terminate:&quot;);\r\n                String s=b.readLine();\r\n                if (s.equals(&quot;end&quot;)) {\r\n                    break;\r\n                }\r\n                msg.setText(s);\r\n                //7) send message\r\n                sender.send(msg);\r\n                System.out.println(&quot;Message successfully sent.&quot;);\r\n            }\r\n            //8) connection close\r\n            con.close();\r\n        } catch(Exception e){\r\n            System.out.println(e);\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI expected it to try to connect with the server, but nothing happened. How do I change this so that I can access the server? I have heard of a jndi.properties file but I am not sure how to use that here.\r\nI am using Intellij, so is there an easy fix to connect the server there and work from there?\r\n","title":"JMS: How do I connect my localhost glassfish server to the project I am working on?","body":"<p>I am new to JMS and APIs. I started working on a messaging platform to try and connect the Glassfish local server to start sending and receiving messages through the server.\nHowever, I don't understand how to set up the Initial Context to recognize where the server is, and what to connect to.\nWhen I run this, I get a NoInitialContextException.</p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport javax.naming.*;\nimport javax.jms.*;\n\npublic class Sender {\n    public static void main(String[] args) {\n        try {\n            InitialContext ctx = new InitialContext();\n            QueueConnectionFactory f = (QueueConnectionFactory)ctx.lookup(&quot;java:comp/DefaultJMSConnectionFactory&quot;);\n            QueueConnection con = f.createQueueConnection();\n            con.start();\n            QueueSession ses=con.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);\n            //3) get the Queue object\n            Queue t=(Queue)ctx.lookup(&quot;PTPQueue&quot;);\n            //4)create QueueSender object\n            QueueSender sender=ses.createSender(t);\n            //5) create TextMessage object\n            TextMessage msg=ses.createTextMessage();\n\n            //6) write message\n            BufferedReader b=new BufferedReader(new InputStreamReader(System.in));\n            while (true) {\n                System.out.println(&quot;Enter Msg, end to terminate:&quot;);\n                String s=b.readLine();\n                if (s.equals(&quot;end&quot;)) {\n                    break;\n                }\n                msg.setText(s);\n                //7) send message\n                sender.send(msg);\n                System.out.println(&quot;Message successfully sent.&quot;);\n            }\n            //8) connection close\n            con.close();\n        } catch(Exception e){\n            System.out.println(e);\n        }\n    }\n}\n\n</code></pre>\n<p>I expected it to try to connect with the server, but nothing happened. How do I change this so that I can access the server? I have heard of a jndi.properties file but I am not sure how to use that here.\nI am using Intellij, so is there an easy fix to connect the server there and work from there?</p>\n"},{"tags":["java","spring-boot","graalvm-native-image","jasypt","spring-native"],"comments":[{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1685549289,"post_id":76366216,"comment_id":134676832,"body_markdown":"The file should be named `reflect-config.json`. Also, its location is important. What&#39;s its path relative to the root of your project?","body":"The file should be named <code>reflect-config.json</code>. Also, its location is important. What&#39;s its path relative to the root of your project?"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685634229,"post_id":76366216,"comment_id":134691037,"body_markdown":"I use the graalvmNative plugin from gradle with the configuration option &#39;ReflectionConfigurationFiles&#39;. The value points to the file &#39;./../../src/main/resources/reflect-config.json&#39;.","body":"I use the graalvmNative plugin from gradle with the configuration option &#39;ReflectionConfigurationFiles&#39;. The value points to the file &#39;./../../src/main/resources/reflect-config.json&#39;."},{"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":0,"creation_date":1685648882,"post_id":76366216,"comment_id":134693973,"body_markdown":"Why does the path begin `../../../`? Have you verified that Graal is finding and using it when building the image?","body":"Why does the path begin <code>..&#47;..&#47;..&#47;</code>? Have you verified that Graal is finding and using it when building the image?"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685655784,"post_id":76366216,"comment_id":134695209,"body_markdown":"Without the trailing &#39;../../../&#39; the reflect-config.json cannot be found and the build fails with an appropriate error message.\n\nWhen I search for the &quot;com.ibm.icu.text.Normalizer&quot; value in the target image, the following files are present:\n./src/main/resources/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n./src/main/resources/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,\n./build/resources/main/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n./build/resources/main/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,","body":"Without the trailing &#39;../../../&#39; the reflect-config.json cannot be found and the build fails with an appropriate error message.  When I search for the &quot;com.ibm.icu.text.Normalizer&quot; value in the target image, the following files are present: ./src/main/resources/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;, ./src/main/resources/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;, ./build/resources/main/reflect-config.json:157: &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;, ./build/resources/main/reflect-config.json:168: &quot;name&quot;: &quot;java.text.Normalizer&quot;,"},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685694122,"post_id":76366216,"comment_id":134699723,"body_markdown":"Of course, I didn&#39;t mean &#39;trailing&#39; but prefixed.","body":"Of course, I didn&#39;t mean &#39;trailing&#39; but prefixed."},{"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"score":0,"creation_date":1685702224,"post_id":76366216,"comment_id":134701366,"body_markdown":"I have added a small demo repository to demonstrate the problem, I hope this is helpful (https://github.com/benocms/spring-native.test.git).","body":"I have added a small demo repository to demonstrate the problem, I hope this is helpful (<a href=\"https://github.com/benocms/spring-native.test.git\" rel=\"nofollow noreferrer\">github.com/benocms/spring-native.test.git</a>)."}],"answers":[{"tags":[],"owner":{"account_id":1473276,"reputation":110999,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1685466187,"creation_date":1685466187,"answer_id":76367090,"question_id":76366216,"body_markdown":"Jasypt [uses reflection](https://github.com/jasypt/jasypt/blob/d384f9a755af2938bc142f7575365bee42ba5f22/jasypt/src/main/java/org/jasypt/normalization/Normalizer.java) to load the normalizer classes. It tries `com.ibm.icu.text.Normalizer` first and then, if that doesn&#39;t work, it tries `java.text.Normalizer`.\r\n\r\nGraalVM can&#39;t tell that these classes are required so they aren&#39;t included in the native image and aren&#39;t, therefore, available to be loaded via reflection. You can correct this by [providing some hints to GraalVM](https://docs.spring.io/spring-framework/reference/core/aot.html#aot.hints).","title":"Spring Boot Native: Error withe the &#39; jasypt-spring-boot&#39; module","body":"<p>Jasypt <a href=\"https://github.com/jasypt/jasypt/blob/d384f9a755af2938bc142f7575365bee42ba5f22/jasypt/src/main/java/org/jasypt/normalization/Normalizer.java\" rel=\"nofollow noreferrer\">uses reflection</a> to load the normalizer classes. It tries <code>com.ibm.icu.text.Normalizer</code> first and then, if that doesn't work, it tries <code>java.text.Normalizer</code>.</p>\n<p>GraalVM can't tell that these classes are required so they aren't included in the native image and aren't, therefore, available to be loaded via reflection. You can correct this by <a href=\"https://docs.spring.io/spring-framework/reference/core/aot.html#aot.hints\" rel=\"nofollow noreferrer\">providing some hints to GraalVM</a>.</p>\n"}],"owner":{"account_id":3399031,"reputation":319,"user_id":2851799,"display_name":"Ben"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686646315,"creation_date":1685459218,"question_id":76366216,"body_markdown":"I am trying to create a native executable from my Spring Boot 3.0.7 app (Java 17) using GraalVM. I am using GraalVM in a Docker build to create the native executable. I am using the &quot;jasypt-spring-boot&quot; (3.0.5) library to store the required app passwords in encrypted form.\r\n\r\nThe compilation of the app also seems to work from my point of view. However, the following error occurs when starting the app:\r\n\r\n&gt; *************************** \r\n&gt; APPLICATION FAILED TO START\r\n&gt; ***************************\r\n&gt; \r\n&gt; Description:\r\n&gt; \r\n&gt; Failed to bind properties under &#39;bla.passwd&#39; to java.lang.String:\r\n&gt; \r\n&gt; Reason: org.jasypt.exceptions.EncryptionInitializationException:\r\n&gt; Cannot find a valid UNICODE normalizer: neither java.text.Normalizer\r\n&gt; nor com.ibm.icu.text.Normalizer have been found at the classpath. If\r\n&gt; you are using a version of the JDK older than JavaSE 6, you should\r\n&gt; include the icu4j library in your classpath.\r\n\r\nThe encrypted passwords contain only ASCII characters. \r\n\r\n**Update:**\r\nI tried adding some reflection hints in my reflection-config.json, unfortunately without success:\r\n\r\n      {\r\n        &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\r\n        &quot;allDeclaredConstructors&quot;: true,\r\n        &quot;allPublicConstructors&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allPublicMethods&quot;: true,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allPublicFields&quot;: true,\r\n        &quot;allDeclaredClasses&quot;: true,\r\n        &quot;allPublicClasses&quot;: true\r\n      },\r\n      {\r\n        &quot;name&quot;: &quot;java.text.Normalizer&quot;,\r\n        &quot;allDeclaredConstructors&quot;: true,\r\n        &quot;allPublicConstructors&quot;: true,\r\n        &quot;allDeclaredMethods&quot;: true,\r\n        &quot;allPublicMethods&quot;: true,\r\n        &quot;allDeclaredFields&quot;: true,\r\n        &quot;allPublicFields&quot;: true,\r\n        &quot;allDeclaredClasses&quot;: true,\r\n        &quot;allPublicClasses&quot;: true\r\n      }\r\n\r\nIn my gradle script I have set the following configuration:\r\n\r\n    graalvmNative {\r\n        binaries {\r\n            all {\r\n                resources.autodetect()\r\n            }\r\n            main {\r\n                imageName.set(&#39;my-service&#39;)\r\n                buildArgs.add(&#39;--verbose&#39;)\r\n                buildArgs.add(&#39;-H:ReflectionConfigurationFiles=../../../src/main/resources/reflect-config.json&#39;)\r\n            }\r\n        }\r\n    }\r\n\r\nI have added a small demo repository to demonstrate the issue:\r\nhttps://github.com/benocms/spring-native.test.git\r\n\r\nHas anyone here had similar experiences and can possibly give me a hint? \r\n\r\nThank you very much.\r\n","title":"Spring Boot Native: Error withe the &#39; jasypt-spring-boot&#39; module","body":"<p>I am trying to create a native executable from my Spring Boot 3.0.7 app (Java 17) using GraalVM. I am using GraalVM in a Docker build to create the native executable. I am using the &quot;jasypt-spring-boot&quot; (3.0.5) library to store the required app passwords in encrypted form.</p>\n<p>The compilation of the app also seems to work from my point of view. However, the following error occurs when starting the app:</p>\n<blockquote>\n<hr />\n<p>APPLICATION FAILED TO START</p>\n<hr />\n<p>Description:</p>\n<p>Failed to bind properties under 'bla.passwd' to java.lang.String:</p>\n<p>Reason: org.jasypt.exceptions.EncryptionInitializationException:\nCannot find a valid UNICODE normalizer: neither java.text.Normalizer\nnor com.ibm.icu.text.Normalizer have been found at the classpath. If\nyou are using a version of the JDK older than JavaSE 6, you should\ninclude the icu4j library in your classpath.</p>\n</blockquote>\n<p>The encrypted passwords contain only ASCII characters.</p>\n<p><strong>Update:</strong>\nI tried adding some reflection hints in my reflection-config.json, unfortunately without success:</p>\n<pre><code>  {\n    &quot;name&quot;: &quot;com.ibm.icu.text.Normalizer&quot;,\n    &quot;allDeclaredConstructors&quot;: true,\n    &quot;allPublicConstructors&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allPublicMethods&quot;: true,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allPublicFields&quot;: true,\n    &quot;allDeclaredClasses&quot;: true,\n    &quot;allPublicClasses&quot;: true\n  },\n  {\n    &quot;name&quot;: &quot;java.text.Normalizer&quot;,\n    &quot;allDeclaredConstructors&quot;: true,\n    &quot;allPublicConstructors&quot;: true,\n    &quot;allDeclaredMethods&quot;: true,\n    &quot;allPublicMethods&quot;: true,\n    &quot;allDeclaredFields&quot;: true,\n    &quot;allPublicFields&quot;: true,\n    &quot;allDeclaredClasses&quot;: true,\n    &quot;allPublicClasses&quot;: true\n  }\n</code></pre>\n<p>In my gradle script I have set the following configuration:</p>\n<pre><code>graalvmNative {\n    binaries {\n        all {\n            resources.autodetect()\n        }\n        main {\n            imageName.set('my-service')\n            buildArgs.add('--verbose')\n            buildArgs.add('-H:ReflectionConfigurationFiles=../../../src/main/resources/reflect-config.json')\n        }\n    }\n}\n</code></pre>\n<p>I have added a small demo repository to demonstrate the issue:\n<a href=\"https://github.com/benocms/spring-native.test.git\" rel=\"nofollow noreferrer\">https://github.com/benocms/spring-native.test.git</a></p>\n<p>Has anyone here had similar experiences and can possibly give me a hint?</p>\n<p>Thank you very much.</p>\n"},{"tags":["java","file-io","xls"],"comments":[{"owner":{"account_id":11683,"reputation":1438179,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1337945236,"post_id":10753562,"comment_id":13975216,"body_markdown":"You&#39;ve given us a lot of code - please show which exact line throws the exception. (Print the exception stack trace to find it out - not just the message...)","body":"You&#39;ve given us a lot of code - please show which exact line throws the exception. (Print the exception stack trace to find it out - not just the message...)"},{"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"score":0,"creation_date":1337945535,"post_id":10753562,"comment_id":13975340,"body_markdown":"i didnt debug the code.problem is when i am giving less numbers in contacts.txt file i am not getting this error. when i am running with 36000 numbers in contacts.txt file its giving the invalid row number error","body":"i didnt debug the code.problem is when i am giving less numbers in contacts.txt file i am not getting this error. when i am running with 36000 numbers in contacts.txt file its giving the invalid row number error"},{"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"score":0,"creation_date":1337945641,"post_id":10753562,"comment_id":13975377,"body_markdown":"I would try running with a subset of your file and examining the output. It&#39;s possible that you&#39;re creating multiple rows per contact.","body":"I would try running with a subset of your file and examining the output. It&#39;s possible that you&#39;re creating multiple rows per contact."},{"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"score":0,"creation_date":1337946347,"post_id":10753562,"comment_id":13975642,"body_markdown":"yes i am creating multiple rows per contact .. i want the output  in that way only","body":"yes i am creating multiple rows per contact .. i want the output  in that way only"}],"answers":[{"tags":[],"owner":{"account_id":232474,"reputation":5506,"user_id":497339,"display_name":"brain"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337945243,"creation_date":1337945243,"answer_id":10753591,"question_id":10753562,"body_markdown":"Excel (perhaps only older versions) only allow 65535 rows.\r\n\r\nHere&#39;s a [link][1]to the Excel 2003 limits, which is indeed 65535 rows. It got increased for 2010 to [1,048,576][2]. \r\n\r\n\r\n  [1]: http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx\r\n  [2]: http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&amp;origin=HP005199291","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>Excel (perhaps only older versions) only allow 65535 rows.</p>\n\n<p>Here's a <a href=\"http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP005199291.aspx\" rel=\"nofollow\">link</a>to the Excel 2003 limits, which is indeed 65535 rows. It got increased for 2010 to <a href=\"http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=5&amp;origin=HP005199291\" rel=\"nofollow\">1,048,576</a>. </p>\n"},{"tags":[],"owner":{"account_id":3284,"reputation":42459,"user_id":4728,"accept_rate":86,"display_name":"Simon Nickerson"},"down_vote_count":0,"up_vote_count":44,"is_accepted":true,"score":44,"last_activity_date":1337947037,"creation_date":1337945481,"answer_id":10753655,"question_id":10753562,"body_markdown":"HSSF targets a version of Excel (Excel 2003) which only supports a maximum of 65536 rows.\r\n\r\nYou could try using the newer [XSSF][1] API instead, which supports later versions of Excel which have a more generous row limit.\r\n\r\nThere is a [conversion guide][2] which will help you convert between the two APIs.\r\n\r\n  [1]: http://poi.apache.org/spreadsheet/index.html\r\n  [2]: http://poi.apache.org/spreadsheet/converting.html","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>HSSF targets a version of Excel (Excel 2003) which only supports a maximum of 65536 rows.</p>\n\n<p>You could try using the newer <a href=\"http://poi.apache.org/spreadsheet/index.html\" rel=\"noreferrer\">XSSF</a> API instead, which supports later versions of Excel which have a more generous row limit.</p>\n\n<p>There is a <a href=\"http://poi.apache.org/spreadsheet/converting.html\" rel=\"noreferrer\">conversion guide</a> which will help you convert between the two APIs.</p>\n"},{"tags":[],"owner":{"account_id":968470,"reputation":5711,"user_id":991479,"display_name":"Ewald"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1337945657,"creation_date":1337945657,"answer_id":10753703,"question_id":10753562,"body_markdown":"If you only have 36000 items in the text file, something else must be wrong.\r\n\r\nCreate a small sample, of let&#39;s say, 100 entries, and test with that.\r\n\r\nTake a careful look at the resulting Excel file, if you can. It looks as if the following piece of code is your problem:\r\n\r\n    while(rs.next()){                   \r\n\r\n            external_person_org_id = rs.getInt(1);\r\n\r\n            HSSFRow row = sheet.createRow(index);\r\n                row.createCell(0).setCellValue(person_org_id);\r\n                row.createCell(1).setCellValue(external_person_org_id);\r\n                index++;\r\n            }       \r\n\r\nI&#39;m just guessing, but won&#39;t the fact that the index++ is in the WHILE cause it to create a new row each time for EVERY entry in a record set? ","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>If you only have 36000 items in the text file, something else must be wrong.</p>\n\n<p>Create a small sample, of let's say, 100 entries, and test with that.</p>\n\n<p>Take a careful look at the resulting Excel file, if you can. It looks as if the following piece of code is your problem:</p>\n\n<pre><code>while(rs.next()){                   \n\n        external_person_org_id = rs.getInt(1);\n\n        HSSFRow row = sheet.createRow(index);\n            row.createCell(0).setCellValue(person_org_id);\n            row.createCell(1).setCellValue(external_person_org_id);\n            index++;\n        }       \n</code></pre>\n\n<p>I'm just guessing, but won't the fact that the index++ is in the WHILE cause it to create a new row each time for EVERY entry in a record set? </p>\n"},{"tags":[],"owner":{"account_id":9807620,"reputation":1,"user_id":7266847,"display_name":"Zechreich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1481195255,"creation_date":1481190089,"answer_id":41036175,"question_id":10753562,"body_markdown":"&lt;!-- language: c++ --&gt;\r\n\r\n    int person_org_id, external_person_org_id;\r\n\r\nyou need to change int variable become Integer, there are limit from primitive and cannot more than `-32767` to `32767`","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<pre class=\"lang-cpp prettyprint-override\"><code>int person_org_id, external_person_org_id;\n</code></pre>\n\n<p>you need to change int variable become Integer, there are limit from primitive and cannot more than <code>-32767</code> to <code>32767</code></p>\n"},{"tags":[],"owner":{"account_id":28801825,"reputation":1,"user_id":22058521,"display_name":"ravi kumar p"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686644599,"creation_date":1686547228,"answer_id":76453801,"question_id":10753562,"body_markdown":"    &lt;h:commandButton styleClass=&quot;dataExporter&quot;\r\n      value=&quot;#{o:translate(&#39;Export As Excel&#39;)}&quot; style=&quot;margin-left:5px&quot;&gt;\r\n    \t&lt;p:dataExporter type=&quot;**xls**&quot; target=&quot;deviceAuditTable&quot; fileName=&quot;DeviceAudit&quot;/&gt;\r\n    &lt;/h:commandButton&gt;\r\n\r\nWhen you `new HSSFWorkbook()` with `new XSSFWorkbook()`, and removing references to HSSF from method calls and also make sure file extension also, for `new XSSFWorkBook()` here the file type **xlsx** \r\n\t\r\n    &lt;h:commandButton styleClass=&quot;dataExporter&quot;\r\n    \t\t\t\t\t\t\tvalue=&quot;#{o:translate(&#39;Export As Excel&#39;)}&quot; style=&quot;margin-left:5px&quot;&gt;\r\n    \t&lt;p:dataExporter type=&quot;xlsx&quot; target=&quot;deviceAuditTable&quot;\r\n    \t\t\t\t\t\t\t\tfileName=&quot;DeviceAudit&quot; /&gt;\r\n    &lt;/h:commandButton&gt;\r\n\r\n","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<pre><code>&lt;h:commandButton styleClass=&quot;dataExporter&quot;\n  value=&quot;#{o:translate('Export As Excel')}&quot; style=&quot;margin-left:5px&quot;&gt;\n    &lt;p:dataExporter type=&quot;**xls**&quot; target=&quot;deviceAuditTable&quot; fileName=&quot;DeviceAudit&quot;/&gt;\n&lt;/h:commandButton&gt;\n</code></pre>\n<p>When you <code>new HSSFWorkbook()</code> with <code>new XSSFWorkbook()</code>, and removing references to HSSF from method calls and also make sure file extension also, for <code>new XSSFWorkBook()</code> here the file type <strong>xlsx</strong></p>\n<pre><code>&lt;h:commandButton styleClass=&quot;dataExporter&quot;\n                            value=&quot;#{o:translate('Export As Excel')}&quot; style=&quot;margin-left:5px&quot;&gt;\n    &lt;p:dataExporter type=&quot;xlsx&quot; target=&quot;deviceAuditTable&quot;\n                                fileName=&quot;DeviceAudit&quot; /&gt;\n&lt;/h:commandButton&gt;\n</code></pre>\n"}],"owner":{"account_id":1430764,"reputation":1681,"user_id":1353232,"accept_rate":80,"display_name":"Cindrella"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61219,"favorite_count":0,"down_vote_count":0,"up_vote_count":29,"accepted_answer_id":10753655,"answer_count":5,"score":29,"last_activity_date":1686644599,"creation_date":1337945148,"question_id":10753562,"body_markdown":"I am reading integers from a text file, giving them as input to a query and getting the query output and writing to an xls file.\r\n\r\n    ResultSet rs;\r\n    Connection con = null;\r\n    PreparedStatement ps = null;\r\n    int person_org_id, external_person_org_id;\r\n    File f = null;\r\n    Scanner scan = null;\r\n\t\t\t\t\r\n    try {\r\n        System.out.println(&quot;----------checkpoint-----------&quot;);\r\n        Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);\r\n        System.out.println(&quot;----------checkpoint 1-----------&quot;);\r\n        con = DriverManager.getConnection(&quot;jdbc:oracle:thin:@ksdjf.kjdlk.jkd.com:2222:edb&quot;, &quot;aaaaa&quot;, &quot;aaaa&quot;);\r\n        System.out.println(&quot;----------checkpoint 2 ----------&quot;);\r\n        if (con == null) {\r\n            System.out.println(&quot;unable to connect to database&quot;);\r\n        }\r\n        System.out.println(&quot;----------checkpoint 3::connected to database---------&quot;);\r\n        StringBuffer sql = new StringBuffer();\r\n        sql.append(&quot;select abd from edb.abd where customer_id=510 and person_org_id =? &quot;);\r\n        ps = con.prepareStatement(sql.toString());\r\n\r\n        HSSFWorkbook wb = new HSSFWorkbook();\r\n        HSSFSheet sheet = wb.createSheet(&quot;Excel Sheet&quot;);\r\n        HSSFRow rowhead = sheet.createRow(0);\r\n        rowhead.createCell(0).setCellValue(&quot;ABC&quot;);\r\n        rowhead.createCell(1).setCellValue(&quot;DEF&quot;);\r\n\t\t\t\r\n        f = new File(&quot;/tmp/contacts.txt&quot;);\r\n        scan = new Scanner(f);\r\n        int index=1;\r\n\t\t\t\r\n        while (scan.hasNextInt()) {\r\n\r\n            person_org_id = scan.nextInt();\r\n\t\t\t\t\r\n            ps.setInt(1,person_org_id);\r\n            rs= ps.executeQuery();\r\n\t\t\t\t\t\t\t\r\n            while (rs.next()) {\t\t\t\t\t\r\n\t\t\t\t\r\n                external_person_org_id = rs.getInt(1);\r\n\t\t\t\t\t\t\t\t\r\n                HSSFRow row = sheet.createRow(index);\r\n                row.createCell(0).setCellValue(person_org_id);\r\n                row.createCell(1).setCellValue(external_person_org_id);\r\n                index++;\r\n            }\t\t\t\r\n\t\t\t\r\n        }\t\r\n        FileOutputStream fileOut = new FileOutputStream(new File(&quot;/tmp/External_contact_id.xls&quot;));\r\n        wb.write(fileOut);\r\n        fileOut.close();\r\n        System.out.println(&quot;--------checkpoint 4:: writing data to xls completed------------&quot;);\r\n    }\r\n    catch (Exception e) {\r\n        System.out.println(e.getMessage());\r\n    }\r\n\t\r\nI am getting error `Invalid row number (65536) outside allowable range (0..65535)` \r\n\r\nMy `contacts.txt` file has around 36000 numbers.","title":"Invalid row number (65536) outside allowable range (0..65535)","body":"<p>I am reading integers from a text file, giving them as input to a query and getting the query output and writing to an xls file.</p>\n\n<pre><code>ResultSet rs;\nConnection con = null;\nPreparedStatement ps = null;\nint person_org_id, external_person_org_id;\nFile f = null;\nScanner scan = null;\n\ntry {\n    System.out.println(\"----------checkpoint-----------\");\n    Class.forName(\"oracle.jdbc.driver.OracleDriver\");\n    System.out.println(\"----------checkpoint 1-----------\");\n    con = DriverManager.getConnection(\"jdbc:oracle:thin:@ksdjf.kjdlk.jkd.com:2222:edb\", \"aaaaa\", \"aaaa\");\n    System.out.println(\"----------checkpoint 2 ----------\");\n    if (con == null) {\n        System.out.println(\"unable to connect to database\");\n    }\n    System.out.println(\"----------checkpoint 3::connected to database---------\");\n    StringBuffer sql = new StringBuffer();\n    sql.append(\"select abd from edb.abd where customer_id=510 and person_org_id =? \");\n    ps = con.prepareStatement(sql.toString());\n\n    HSSFWorkbook wb = new HSSFWorkbook();\n    HSSFSheet sheet = wb.createSheet(\"Excel Sheet\");\n    HSSFRow rowhead = sheet.createRow(0);\n    rowhead.createCell(0).setCellValue(\"ABC\");\n    rowhead.createCell(1).setCellValue(\"DEF\");\n\n    f = new File(\"/tmp/contacts.txt\");\n    scan = new Scanner(f);\n    int index=1;\n\n    while (scan.hasNextInt()) {\n\n        person_org_id = scan.nextInt();\n\n        ps.setInt(1,person_org_id);\n        rs= ps.executeQuery();\n\n        while (rs.next()) {                 \n\n            external_person_org_id = rs.getInt(1);\n\n            HSSFRow row = sheet.createRow(index);\n            row.createCell(0).setCellValue(person_org_id);\n            row.createCell(1).setCellValue(external_person_org_id);\n            index++;\n        }           \n\n    }   \n    FileOutputStream fileOut = new FileOutputStream(new File(\"/tmp/External_contact_id.xls\"));\n    wb.write(fileOut);\n    fileOut.close();\n    System.out.println(\"--------checkpoint 4:: writing data to xls completed------------\");\n}\ncatch (Exception e) {\n    System.out.println(e.getMessage());\n}\n</code></pre>\n\n<p>I am getting error <code>Invalid row number (65536) outside allowable range (0..65535)</code> </p>\n\n<p>My <code>contacts.txt</code> file has around 36000 numbers.</p>\n"},{"tags":["java","spring-boot","api","spring-webflux"],"owner":{"account_id":7454325,"reputation":131,"user_id":5668022,"display_name":"igarciadev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":171,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686643997,"creation_date":1686643997,"question_id":76462917,"body_markdown":"In a Spring project, where I&#39;m using the following library:\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nand using the following code snippet to make a request:\r\n\r\n    return webClient.get()\r\n                    .uri(&quot;/user/&quot; + userId+ &quot;/address&quot;)\r\n                    .headers(headers())\r\n                    .retrieve()\r\n                    .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; {\r\n                        throw new BadRequestException(&quot;API Client Error&quot;);})\r\n                    .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; {\r\n                        throw new InternalServerException(&quot;API Internal Server Exception&quot;);})\r\n                    .onStatus(HttpStatus.NO_CONTENT::equals, clientResponse -&gt; Mono.empty())\r\n                    .bodyToMono(new ParameterizedTypeReference&lt;List&lt;UserAddressResponse&gt;&gt;() {})\r\n                    .block();\r\n\r\nwhen making a request that returns an HTTP status code 204 NO CONTENT, I&#39;m receiving the following exception:\r\n\r\n    2023-06-13 09:54:23.965 DEBUG 16168 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;text/plain;charset=UTF-8&#39; not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;\r\n    2023-06-13 09:54:23.975 ERROR 16168 --- [nio-8081-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type &#39;text/plain;charset=UTF-8&#39; not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;] with root cause\r\n\r\n\r\nHow can I improve my code to avoid this exception?","title":"Spring Webflux exception making a request that returns an HTTP status code 204 NO CONTENT","body":"<p>In a Spring project, where I'm using the following library:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>and using the following code snippet to make a request:</p>\n<pre><code>return webClient.get()\n                .uri(&quot;/user/&quot; + userId+ &quot;/address&quot;)\n                .headers(headers())\n                .retrieve()\n                .onStatus(HttpStatus::is4xxClientError, clientResponse -&gt; {\n                    throw new BadRequestException(&quot;API Client Error&quot;);})\n                .onStatus(HttpStatus::is5xxServerError, clientResponse -&gt; {\n                    throw new InternalServerException(&quot;API Internal Server Exception&quot;);})\n                .onStatus(HttpStatus.NO_CONTENT::equals, clientResponse -&gt; Mono.empty())\n                .bodyToMono(new ParameterizedTypeReference&lt;List&lt;UserAddressResponse&gt;&gt;() {})\n                .block();\n</code></pre>\n<p>when making a request that returns an HTTP status code 204 NO CONTENT, I'm receiving the following exception:</p>\n<pre><code>2023-06-13 09:54:23.965 DEBUG 16168 --- [nio-8081-exec-2] o.s.web.servlet.DispatcherServlet        : Failed to complete request: org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'text/plain;charset=UTF-8' not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;\n2023-06-13 09:54:23.975 ERROR 16168 --- [nio-8081-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.web.reactive.function.UnsupportedMediaTypeException: Content type 'text/plain;charset=UTF-8' not supported for bodyType=java.util.List&lt;com.test.pr.domain.source.UserAddressResponse&gt;] with root cause\n</code></pre>\n<p>How can I improve my code to avoid this exception?</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":4,"creation_date":1686642426,"post_id":76462687,"comment_id":134823204,"body_markdown":"This is one of many reasons why you don&#39;t use `public static` variables. Instead, encapsulate them and make a method to access them.","body":"This is one of many reasons why you don&#39;t use <code>public static</code> variables. Instead, encapsulate them and make a method to access them."}],"answers":[{"tags":[],"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686643772,"creation_date":1686642570,"answer_id":76462735,"question_id":76462687,"body_markdown":"You can initialise `static final` fields in a `static` block.\r\n\r\nSo remove the `ini` method, and replace it with:\r\n\r\n    static {\r\n       // the code that used to be in the ini method here...\r\n    }\r\n\r\nNote that a `static` block cannot throw checked exceptions, so you need to handle the exception when creating a `Scanner`:\r\n\r\n```\r\ntry {\r\n    Scanner lineScanner = new Scanner(f);\r\n    // the rest of your code...\r\n} catch (FileNotFoundException e) {\r\n    // handle the exception here...\r\n    // perhaps set the fields to something default\r\n}\r\n```\r\n\r\nI would also recommend making the fields private add getters for them. Also consider not having them `static` at all, and instead have a static `currentConfig` field that can be set with a public setter. It would look something like this:\r\n\r\n```\r\nclass Config {\r\n\r\n    private final int n = 4;\r\n    private String[] values = new String[n];\r\n    private final String MUSIC_PATH;\r\n    private final String SAVE_PATH;\r\n    private final int WIDTH;\r\n    private final int HEIGHT;\r\n\r\n    // getters for the private fields...\r\n\r\n    private static Config currentConfig;\r\n\r\n    public static Config getCurrentConfig() {\r\n        return currentConfig;\r\n    }\r\n\r\n    public static void setCurrentConfig(Config currentConfig) {\r\n        Config.currentConfig = currentConfig;\r\n    }\r\n\r\n    private Config(File configFile) throws FileNotFoundException {\r\n        // initialise the final fields using the configFile&#39;s contents...\r\n    }\r\n}\r\n```\r\n\r\nAt the start of your program you&#39;d then do something like this:\r\n\r\n```\r\nConfig.setCurrentConfig(new Config(new File(&quot;config.txt&quot;)));\r\n```","title":"Cannot assign value to static final variable","body":"<p>You can initialise <code>static final</code> fields in a <code>static</code> block.</p>\n<p>So remove the <code>ini</code> method, and replace it with:</p>\n<pre><code>static {\n   // the code that used to be in the ini method here...\n}\n</code></pre>\n<p>Note that a <code>static</code> block cannot throw checked exceptions, so you need to handle the exception when creating a <code>Scanner</code>:</p>\n<pre><code>try {\n    Scanner lineScanner = new Scanner(f);\n    // the rest of your code...\n} catch (FileNotFoundException e) {\n    // handle the exception here...\n    // perhaps set the fields to something default\n}\n</code></pre>\n<p>I would also recommend making the fields private add getters for them. Also consider not having them <code>static</code> at all, and instead have a static <code>currentConfig</code> field that can be set with a public setter. It would look something like this:</p>\n<pre><code>class Config {\n\n    private final int n = 4;\n    private String[] values = new String[n];\n    private final String MUSIC_PATH;\n    private final String SAVE_PATH;\n    private final int WIDTH;\n    private final int HEIGHT;\n\n    // getters for the private fields...\n\n    private static Config currentConfig;\n\n    public static Config getCurrentConfig() {\n        return currentConfig;\n    }\n\n    public static void setCurrentConfig(Config currentConfig) {\n        Config.currentConfig = currentConfig;\n    }\n\n    private Config(File configFile) throws FileNotFoundException {\n        // initialise the final fields using the configFile's contents...\n    }\n}\n</code></pre>\n<p>At the start of your program you'd then do something like this:</p>\n<pre><code>Config.setCurrentConfig(new Config(new File(&quot;config.txt&quot;)));\n</code></pre>\n"}],"owner":{"account_id":27313298,"reputation":29,"user_id":21749640,"display_name":"user21749640"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76462735,"answer_count":1,"score":-1,"last_activity_date":1686643772,"creation_date":1686642180,"question_id":76462687,"body_markdown":"I am trying to create a config file system for my game, and I want the config info from the user to be stored as public static final variables in a Config class, so all classes within the game can access the config data safely. Here is the code I have written so far:\r\n```\r\nimport java.io.*;\r\nimport java.util.Scanner;\r\n\r\npublic class Config {\r\n\r\n\tprivate static final int n = 4;\r\n\tprivate static String[] values = new String[n];\r\n\tpublic static final String MUSIC_PATH;\r\n\tpublic static final String SAVE_PATH;\r\n\tpublic static final int WIDTH;\r\n\tpublic static final int HEIGHT;\r\n\r\n\tpublic static void ini() throws FileNotFoundException, IOException  {\r\n\t\tFile f = new File(&quot;config.txt&quot;);\r\n\t\tScanner lineScanner = new Scanner(f);\r\n\t\tfor (int i = 0; i&lt;n; i++) {\r\n\t\t\tScanner valueGetter = new Scanner(lineScanner.nextLine());\r\n\t\t\tvalueGetter.useDelimiter(&quot;: &quot;);\r\n\t\t\tvalueGetter.next();\r\n\t\t\tvalues[i] = valueGetter.next();\r\n\t\t}\r\n\t\tWIDTH = Integer.parseInt(values[0]);\r\n\t\tHEIGHT = Integer.parseInt(values[1]);\r\n\t\tSAVE_PATH = values[2];\r\n\t\tMUSIC_PATH = values[3];\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\nWhen I try to compile the code I get the error &quot;cannot assign a value to final variable&quot;. I am able to get the code working if I remove the final, however I would prefer not to do this as they are public variables I don&#39;t want them getting messed up or anything.\r\n\r\nI figure there is no easy way to get around this issue with the way I have currently done it, but if anyone can look at this and tell me a way to accomplish what I want then I would appreciate :)","title":"Cannot assign value to static final variable","body":"<p>I am trying to create a config file system for my game, and I want the config info from the user to be stored as public static final variables in a Config class, so all classes within the game can access the config data safely. Here is the code I have written so far:</p>\n<pre><code>import java.io.*;\nimport java.util.Scanner;\n\npublic class Config {\n\n    private static final int n = 4;\n    private static String[] values = new String[n];\n    public static final String MUSIC_PATH;\n    public static final String SAVE_PATH;\n    public static final int WIDTH;\n    public static final int HEIGHT;\n\n    public static void ini() throws FileNotFoundException, IOException  {\n        File f = new File(&quot;config.txt&quot;);\n        Scanner lineScanner = new Scanner(f);\n        for (int i = 0; i&lt;n; i++) {\n            Scanner valueGetter = new Scanner(lineScanner.nextLine());\n            valueGetter.useDelimiter(&quot;: &quot;);\n            valueGetter.next();\n            values[i] = valueGetter.next();\n        }\n        WIDTH = Integer.parseInt(values[0]);\n        HEIGHT = Integer.parseInt(values[1]);\n        SAVE_PATH = values[2];\n        MUSIC_PATH = values[3];\n\n    }\n\n}\n</code></pre>\n<p>When I try to compile the code I get the error &quot;cannot assign a value to final variable&quot;. I am able to get the code working if I remove the final, however I would prefer not to do this as they are public variables I don't want them getting messed up or anything.</p>\n<p>I figure there is no easy way to get around this issue with the way I have currently done it, but if anyone can look at this and tell me a way to accomplish what I want then I would appreciate :)</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":483434,"reputation":25487,"user_id":898478,"accept_rate":86,"display_name":"m0skit0"},"score":1,"creation_date":1683105184,"post_id":76162154,"comment_id":134314069,"body_markdown":"You really don&#39;t need the ifs, just set all attributes from DTO into the `Products` instance. Also I would consider a function like `updateProductsFromDTO()` that returns the updated `Products` instance instead of having that here.","body":"You really don&#39;t need the ifs, just set all attributes from DTO into the <code>Products</code> instance. Also I would consider a function like <code>updateProductsFromDTO()</code> that returns the updated <code>Products</code> instance instead of having that here."},{"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"score":1,"creation_date":1683105730,"post_id":76162154,"comment_id":134314189,"body_markdown":"I believe the dto is a different class so that can&#39;t easily be swapped like this","body":"I believe the dto is a different class so that can&#39;t easily be swapped like this"},{"owner":{"account_id":16871523,"reputation":706,"user_id":12199915,"display_name":"Alex"},"score":0,"creation_date":1686645528,"post_id":76162154,"comment_id":134823784,"body_markdown":"You don&#39;t need to check equality of fields because in any case nothing will be changed in your entity even if set field which are equal. So your `if` are redundant","body":"You don&#39;t need to check equality of fields because in any case nothing will be changed in your entity even if set field which are equal. So your <code>if</code> are redundant"}],"answers":[{"tags":[],"owner":{"account_id":17520379,"reputation":1536,"user_id":12706564,"display_name":"Emanuel Trandafir"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683106153,"creation_date":1683106153,"answer_id":76162336,"question_id":76162154,"body_markdown":"Do you want to copy all the fields? or just a part of them? is your `dto` a different class (ProductDto) or is it an instance of Product? One option would be to use something like this:\r\n\r\n```java\r\nProduct update = mapToProduct(dto);\r\nProduct product = oldProduct.get(); \r\nproduct.update(update);\r\n```\r\nAnd, add the update method in the Product class:\r\n```java\r\nclass Product {\r\n\tString name;\r\n\tString price;\r\n\tString quantity;\r\n\r\n\tpublic void update(Product other) {\r\n\t\tname = other.name;\r\n\t\tprice = other.price;\r\n\t\tquantity = other.quantity;\r\n\t}\r\n}\r\n```\r\nOr, you can also use BeanUtils like this:\r\n```\r\npublic void update(Product other) {\r\n    BeanUtils.copyProperties(other, this);\r\n}\r\n```\r\n\r\nIt even allows you to ignore some of the fields, for example, the &quot;id&quot;:\r\n\r\n    BeanUtils.copyProperties(other, this, &quot;id&quot;);\r\n\r\nPS: I am not a big fan of `BeanUtils` and I would advise you not to use it on objects from different classes.","title":"Update only few fields of an entity whitout using multiple if","body":"<p>Do you want to copy all the fields? or just a part of them? is your <code>dto</code> a different class (ProductDto) or is it an instance of Product? One option would be to use something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Product update = mapToProduct(dto);\nProduct product = oldProduct.get(); \nproduct.update(update);\n</code></pre>\n<p>And, add the update method in the Product class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Product {\n    String name;\n    String price;\n    String quantity;\n\n    public void update(Product other) {\n        name = other.name;\n        price = other.price;\n        quantity = other.quantity;\n    }\n}\n</code></pre>\n<p>Or, you can also use BeanUtils like this:</p>\n<pre><code>public void update(Product other) {\n    BeanUtils.copyProperties(other, this);\n}\n</code></pre>\n<p>It even allows you to ignore some of the fields, for example, the &quot;id&quot;:</p>\n<pre><code>BeanUtils.copyProperties(other, this, &quot;id&quot;);\n</code></pre>\n<p>PS: I am not a big fan of <code>BeanUtils</code> and I would advise you not to use it on objects from different classes.</p>\n"},{"tags":[],"owner":{"account_id":13975980,"reputation":1,"user_id":10093403,"display_name":"Alvaro G&#243;mez"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683115530,"creation_date":1683115530,"answer_id":76163617,"question_id":76162154,"body_markdown":"If you are willing to use [MapStruct][1] you can use this aproach\r\n\r\nThis will be the equivalent to your &quot;Products&quot; class\r\n\r\n    import com.google.api.client.util.DateTime;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n\r\n    @AllArgsConstructor\r\n    @Data\r\n    public class Entity {\r\n      private int id;\r\n      \r\n      private String name;\r\n      \r\n      private double price;\r\n      \r\n      private int quantity;\r\n      \r\n      private DateTime availableFrom;\r\n      \r\n      private DateTime availableUntil;\r\n    \r\n      private List&lt;String&gt; references;\r\n      \r\n      private boolean moreVariables;\r\n    }\r\n\r\nThis the equivalent of the DTO example you gave to us\r\n\r\n    import com.google.api.client.util.DateTime;\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Data;\r\n    \r\n    @AllArgsConstructor\r\n    @Data\r\n    public class EntityDto {\r\n      private Integer id;\r\n      \r\n      private String name;\r\n      \r\n      private Double price;\r\n      \r\n      private Integer quantity;\r\n      \r\n      private DateTime availableFrom;\r\n      \r\n      private DateTime availableUntil;\r\n    }\r\n\r\nThis is the approach to overwrite only the given parameters (not null) to the old product entity\r\n\r\n    import org.mapstruct.Mapper;\r\n    import org.mapstruct.MappingTarget;\r\n    import org.mapstruct.NullValuePropertyMappingStrategy;\r\n    import org.mapstruct.factory.Mappers;\r\n    \r\n    @Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\r\n    public interface MapperExample {\r\n\r\n      void updateEntity(@MappingTarget Entity entity, final EntityDto dto);\r\n      \r\n    }\r\n\r\nThen when you compile the project is as easy as this to call the mapper \r\n\r\n    public class YourClass {\r\n      @Autowired\r\n      private MapperExample mapper;\r\n    \r\n      ...\r\n    \r\n      public ResponseEntity&lt;?&gt; editProduct(EntityDto dto) { \r\n        Optional&lt;Entity&gt; entity = productsRepository.findById(dto.getId());\r\n        mapper.updateEntity(entity.get(), dto);\r\n        productsRepository.save(entity.get());\r\n\r\n      ...\r\n\r\n      }\r\n    }\r\n\r\nPD: @AllArgsConstructor and @Data are [Lombok annotations][2] that helps to avoid writing extra code like constructors or all getters and setters.\r\n\r\nHere you have some links to the documentation of MapStruct if you need more info about [@Mapper][3] or [@MappingTarget][4] annotations\r\n\r\n\r\n  [1]: https://mapstruct.org/\r\n  [2]: https://projectlombok.org/features/\r\n  [3]: https://mapstruct.org/documentation/stable/api/org/mapstruct/Mapper.html\r\n  [4]: https://mapstruct.org/documentation/stable/api/org/mapstruct/MappingTarget.html\r\n","title":"Update only few fields of an entity whitout using multiple if","body":"<p>If you are willing to use <a href=\"https://mapstruct.org/\" rel=\"nofollow noreferrer\">MapStruct</a> you can use this aproach</p>\n<p>This will be the equivalent to your &quot;Products&quot; class</p>\n<pre><code>import com.google.api.client.util.DateTime;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@AllArgsConstructor\n@Data\npublic class Entity {\n  private int id;\n  \n  private String name;\n  \n  private double price;\n  \n  private int quantity;\n  \n  private DateTime availableFrom;\n  \n  private DateTime availableUntil;\n\n  private List&lt;String&gt; references;\n  \n  private boolean moreVariables;\n}\n</code></pre>\n<p>This the equivalent of the DTO example you gave to us</p>\n<pre><code>import com.google.api.client.util.DateTime;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\n\n@AllArgsConstructor\n@Data\npublic class EntityDto {\n  private Integer id;\n  \n  private String name;\n  \n  private Double price;\n  \n  private Integer quantity;\n  \n  private DateTime availableFrom;\n  \n  private DateTime availableUntil;\n}\n</code></pre>\n<p>This is the approach to overwrite only the given parameters (not null) to the old product entity</p>\n<pre><code>import org.mapstruct.Mapper;\nimport org.mapstruct.MappingTarget;\nimport org.mapstruct.NullValuePropertyMappingStrategy;\nimport org.mapstruct.factory.Mappers;\n\n@Mapper(nullValuePropertyMappingStrategy = NullValuePropertyMappingStrategy.IGNORE)\npublic interface MapperExample {\n\n  void updateEntity(@MappingTarget Entity entity, final EntityDto dto);\n  \n}\n</code></pre>\n<p>Then when you compile the project is as easy as this to call the mapper</p>\n<pre><code>public class YourClass {\n  @Autowired\n  private MapperExample mapper;\n\n  ...\n\n  public ResponseEntity&lt;?&gt; editProduct(EntityDto dto) { \n    Optional&lt;Entity&gt; entity = productsRepository.findById(dto.getId());\n    mapper.updateEntity(entity.get(), dto);\n    productsRepository.save(entity.get());\n\n  ...\n\n  }\n}\n</code></pre>\n<p>PD: @AllArgsConstructor and @Data are <a href=\"https://projectlombok.org/features/\" rel=\"nofollow noreferrer\">Lombok annotations</a> that helps to avoid writing extra code like constructors or all getters and setters.</p>\n<p>Here you have some links to the documentation of MapStruct if you need more info about <a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/Mapper.html\" rel=\"nofollow noreferrer\">@Mapper</a> or <a href=\"https://mapstruct.org/documentation/stable/api/org/mapstruct/MappingTarget.html\" rel=\"nofollow noreferrer\">@MappingTarget</a> annotations</p>\n"},{"tags":[],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686643267,"creation_date":1686643267,"answer_id":76462829,"question_id":76162154,"body_markdown":"I found out that the simplest solition may be the following.\r\n\r\nIf someone needs to edit a product or anything, it should get all the attribute first. From a front end point of wiew i have to do a GET request to get the fields value to be displaied, then i need to submit the infos to the backend\r\nInstead of submitting just the edited attributes, the front end will submit evrything, old values + the new values\r\n\r\nOf course in the backend there will be some checks to prevent changing attribute such as the primary key ecc.\r\n\r\nI don&#39;t think this is the best practice, for sure there is soething better, but it works and I think it&#39;s saving a lot of useless code","title":"Update only few fields of an entity whitout using multiple if","body":"<p>I found out that the simplest solition may be the following.</p>\n<p>If someone needs to edit a product or anything, it should get all the attribute first. From a front end point of wiew i have to do a GET request to get the fields value to be displaied, then i need to submit the infos to the backend\nInstead of submitting just the edited attributes, the front end will submit evrything, old values + the new values</p>\n<p>Of course in the backend there will be some checks to prevent changing attribute such as the primary key ecc.</p>\n<p>I don't think this is the best practice, for sure there is soething better, but it works and I think it's saving a lot of useless code</p>\n"}],"owner":{"account_id":25629488,"reputation":49,"user_id":19400075,"display_name":"asdrubalo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462829,"answer_count":3,"score":0,"last_activity_date":1686643267,"creation_date":1683104907,"question_id":76162154,"body_markdown":"I&#39;m building an e-shop as an excercise to practice new things, I&#39;m now at the point were i should made the service to edit the products, but i think it can be optimized somehow \r\n\r\nI want to be able to change an undefined number of attributes.\r\n\r\nExample: i may want to change the name on a product, then i may want to change the price and the availability status on another product\r\n\r\nI managed to do such thing using multiple if statements for each attribute of the Product class \r\n\r\npublic ResponseEntity&lt;?&gt; editProduct(ProductsDto productDto){\r\n\r\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy HH:mm:ss&quot;);\r\n        try {\r\n            Optional&lt;Products&gt; oldProduct = productsRepository.findById(productDto.getId());\r\n\r\n            if (oldProduct.isEmpty()){\r\n                return ResponseEntity.badRequest().body(&quot;Product with id: &quot;+productDto.getId()+&quot; not found.&quot;);\r\n            }\r\n            \r\n            if (!oldProduct.get().getName().equals(productDto.getName())){\r\n                oldProduct.get().setName(productDto.getName());\r\n            }\r\n            if (!oldProduct.get().getPrice().equals(productDto.getPrice())){\r\n                oldProduct.get().setPrice(productDto.getPrice());\r\n            }\r\n            if (!oldProduct.get().getQuantity().equals(productDto.getQuantity())){\r\n                oldProduct.get().setQuantity(productDto.getQuantity());\r\n            }\r\n\r\n        /* n if statements for each attribute in the object */\r\n\r\n            productsRepository.save(oldProduct.get());\r\n        }catch(Exception e){\r\n            return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());\r\n        }\r\n\r\n        return ResponseEntity.ok().body(&quot;New Product added correctly&quot;);\r\n    }\r\n\r\n\r\n\r\nThere is a way i can make it more efficient, and maybe in a way that if i add an attribute in the object i don&#39;t need to add another if ?\r\n\r\nThanks\r\n\r\nJava version 17\r\n\r\n**---- EDIT ----**\r\n\r\nThe ProductDto class is not the same as the Products class, they have different attributes, for example Products references the user who created it\r\n\r\nIn the case where the productDto is a reflection of the Product class i could just update the product like this : `productsRepository.save(productDto);`\r\n\r\nBut what should i do in the case where the dto has only few of the fields valorized. I can&#39;t just save it, otherwise i&#39;ll lose some data\r\n\r\nFor example:\r\n\r\n    {\r\n        &quot;id&quot;:  &quot;6&quot;,\r\n        &quot;name&quot; : &quot;Brioche&quot;,\r\n        &quot;price&quot; : &quot;&quot;,\r\n        &quot;quantity&quot; : 10,\r\n        &quot;availableFrom&quot; : &quot;&quot;,\r\n        &quot;availableUntil&quot; : &quot;13/06/2023 10:00:00&quot;\r\n    }\r\n\r\nin this case im only changing the name, quantity and availableUntil\r\n","title":"Update only few fields of an entity whitout using multiple if","body":"<p>I'm building an e-shop as an excercise to practice new things, I'm now at the point were i should made the service to edit the products, but i think it can be optimized somehow</p>\n<p>I want to be able to change an undefined number of attributes.</p>\n<p>Example: i may want to change the name on a product, then i may want to change the price and the availability status on another product</p>\n<p>I managed to do such thing using multiple if statements for each attribute of the Product class</p>\n<p>public ResponseEntity&lt;?&gt; editProduct(ProductsDto productDto){</p>\n<pre><code>    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy HH:mm:ss&quot;);\n    try {\n        Optional&lt;Products&gt; oldProduct = productsRepository.findById(productDto.getId());\n\n        if (oldProduct.isEmpty()){\n            return ResponseEntity.badRequest().body(&quot;Product with id: &quot;+productDto.getId()+&quot; not found.&quot;);\n        }\n        \n        if (!oldProduct.get().getName().equals(productDto.getName())){\n            oldProduct.get().setName(productDto.getName());\n        }\n        if (!oldProduct.get().getPrice().equals(productDto.getPrice())){\n            oldProduct.get().setPrice(productDto.getPrice());\n        }\n        if (!oldProduct.get().getQuantity().equals(productDto.getQuantity())){\n            oldProduct.get().setQuantity(productDto.getQuantity());\n        }\n\n    /* n if statements for each attribute in the object */\n\n        productsRepository.save(oldProduct.get());\n    }catch(Exception e){\n        return ResponseEntity.status(HttpStatus.BAD_REQUEST).body(e.getMessage());\n    }\n\n    return ResponseEntity.ok().body(&quot;New Product added correctly&quot;);\n}\n</code></pre>\n<p>There is a way i can make it more efficient, and maybe in a way that if i add an attribute in the object i don't need to add another if ?</p>\n<p>Thanks</p>\n<p>Java version 17</p>\n<p><strong>---- EDIT ----</strong></p>\n<p>The ProductDto class is not the same as the Products class, they have different attributes, for example Products references the user who created it</p>\n<p>In the case where the productDto is a reflection of the Product class i could just update the product like this : <code>productsRepository.save(productDto);</code></p>\n<p>But what should i do in the case where the dto has only few of the fields valorized. I can't just save it, otherwise i'll lose some data</p>\n<p>For example:</p>\n<pre><code>{\n    &quot;id&quot;:  &quot;6&quot;,\n    &quot;name&quot; : &quot;Brioche&quot;,\n    &quot;price&quot; : &quot;&quot;,\n    &quot;quantity&quot; : 10,\n    &quot;availableFrom&quot; : &quot;&quot;,\n    &quot;availableUntil&quot; : &quot;13/06/2023 10:00:00&quot;\n}\n</code></pre>\n<p>in this case im only changing the name, quantity and availableUntil</p>\n"},{"tags":["java","spring","hibernate","boot","graalvm"],"comments":[{"owner":{"account_id":20732441,"reputation":1553,"user_id":15224052,"display_name":"Oliver"},"score":0,"creation_date":1686413139,"post_id":76447003,"comment_id":134796682,"body_markdown":"What version of Spring Native?","body":"What version of Spring Native?"},{"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"score":0,"creation_date":1686413300,"post_id":76447003,"comment_id":134796698,"body_markdown":"id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.20&#39;\n id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;","body":"id &#39;org.graalvm.buildtools.native&#39; version &#39;0.9.20&#39;  id &#39;org.springframework.boot&#39; version &#39;3.1.0&#39;"}],"answers":[{"tags":[],"owner":{"account_id":28810384,"reputation":31,"user_id":22065211,"display_name":"dpittori"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686643262,"creation_date":1686643262,"answer_id":76462827,"question_id":76447003,"body_markdown":"As described in [this Spring issue][1], you need to provide bytecode enhancement at build time through *hibernate-enhance-maven-plugin*\r\n\r\ngradle\r\n\r\n    plugins {\r\n        id &quot;org.hibernate.orm&quot; version &quot;&lt;version-to-use&gt;&quot;\r\n    }\r\n\r\n    hibernate {\r\n        enhancement {\r\n            lazyInitialization true\r\n        }\r\n    }\r\n\r\nmaven\r\n\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.hibernate.orm.tooling&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hibernate-enhance-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;$currentHibernateVersion&lt;/version&gt;\r\n            &lt;executions&gt;\r\n                &lt;execution&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;failOnError&gt;true&lt;/failOnError&gt;\r\n                        &lt;enableLazyInitialization&gt;true&lt;/enableLazyInitialization&gt;\r\n                    &lt;/configuration&gt;\r\n                    &lt;goals&gt;\r\n                        &lt;goal&gt;enhance&lt;/goal&gt;\r\n                    &lt;/goals&gt;\r\n                &lt;/execution&gt;\r\n            &lt;/executions&gt;\r\n        &lt;/plugin&gt;\r\n\r\nAlso consider that in latest Hibernate version 6.2, *enableLazyInitialization* param used in the plugin has been deprecated and enabled by default :\r\n[HHH-15641][2]\r\n\r\nFor more information about bytecode enhancement see [Hibernate docs][3]\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/29779\r\n  [2]: https://hibernate.atlassian.net/browse/HHH-15641\r\n  [3]: https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#tooling-enhancement","title":"In Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider","body":"<p>As described in <a href=\"https://github.com/spring-projects/spring-framework/issues/29779\" rel=\"nofollow noreferrer\">this Spring issue</a>, you need to provide bytecode enhancement at build time through <em>hibernate-enhance-maven-plugin</em></p>\n<p>gradle</p>\n<pre><code>plugins {\n    id &quot;org.hibernate.orm&quot; version &quot;&lt;version-to-use&gt;&quot;\n}\n\nhibernate {\n    enhancement {\n        lazyInitialization true\n    }\n}\n</code></pre>\n<p>maven</p>\n<pre><code>    &lt;plugin&gt;\n        &lt;groupId&gt;org.hibernate.orm.tooling&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-enhance-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;$currentHibernateVersion&lt;/version&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;configuration&gt;\n                    &lt;failOnError&gt;true&lt;/failOnError&gt;\n                    &lt;enableLazyInitialization&gt;true&lt;/enableLazyInitialization&gt;\n                &lt;/configuration&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;enhance&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>Also consider that in latest Hibernate version 6.2, <em>enableLazyInitialization</em> param used in the plugin has been deprecated and enabled by default :\n<a href=\"https://hibernate.atlassian.net/browse/HHH-15641\" rel=\"nofollow noreferrer\">HHH-15641</a></p>\n<p>For more information about bytecode enhancement see <a href=\"https://docs.jboss.org/hibernate/orm/6.2/userguide/html_single/Hibernate_User_Guide.html#tooling-enhancement\" rel=\"nofollow noreferrer\">Hibernate docs</a></p>\n"}],"owner":{"account_id":13938264,"reputation":45,"user_id":10064799,"display_name":"Денис Анд"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":330,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686643262,"creation_date":1686412715,"question_id":76447003,"body_markdown":"I have a User entity that has Lazy relations \r\n\r\n     @JoinTable(name = &quot;user_identities&quot;, joinColumns = {\r\n                @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\r\n                @JoinColumn(name = &quot;user_identity_id&quot;)})\r\n        @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true)\r\n        private Set&lt;Identity&gt; identities;\r\n    \r\n        @JoinTable(name = &quot;user_roles&quot;, joinColumns = {\r\n                @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\r\n                @JoinColumn(name = &quot;role_id&quot;)})\r\n        @OneToMany(fetch = FetchType.LAZY)\r\n        private Set&lt;Role&gt; roles;\r\n\r\nI execute hibernate\r\n\r\n    @Query(&quot;SELECT u FROM User u JOIN u.identities i JOIN FETCH u.roles r WHERE i.sub = :sub AND i.issuer = :issuer&quot;)\r\n    Optional&lt;User&gt; findByIdentitySubAndIssuer(String sub, String issuer);\r\n\r\nIn jvm mode (not native) everything works fine, but in native image, i am getting the following error:\r\n\r\n*Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider is &#39;none&#39;; your model requires a more advanced BytecodeProvider to be enabled..*\r\n\r\nI am using spring boot 3.1.0\r\n\r\nHibernate version 6.2.2 Final\r\n\r\n\r\nI was trying to enable hibernate enhancer, adding to properties\r\n jpa:\r\n    properties:\r\n      hibernate:\r\n        enhancer:\r\n          enable: true\r\n\r\nwhich resulted in another exception on application startup in native mode\r\n*Failed to initialize JPA EntityManagerFactory: Default-resolver threw exception*\r\n*Could not instantiate named strategy class [org.hibernate.boot.model.relational.ColumnOrderingStrategyStandard]*\r\n\r\nUPDATE:\r\nwith\r\nid &#39;org.springframework.boot&#39; version &#39;3.0.7&#39;\r\nand\r\nid &#39;org.hibernate.orm&#39; version &quot;6.1.7.Final\r\n\r\nstill getting \r\nIn Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider\r\n\r\nPlease help.\r\ntnx\r\n","title":"In Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider","body":"<p>I have a User entity that has Lazy relations</p>\n<pre><code> @JoinTable(name = &quot;user_identities&quot;, joinColumns = {\n            @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\n            @JoinColumn(name = &quot;user_identity_id&quot;)})\n    @OneToMany(fetch = FetchType.LAZY, orphanRemoval = true)\n    private Set&lt;Identity&gt; identities;\n\n    @JoinTable(name = &quot;user_roles&quot;, joinColumns = {\n            @JoinColumn(name = &quot;user_id&quot;)}, inverseJoinColumns = {\n            @JoinColumn(name = &quot;role_id&quot;)})\n    @OneToMany(fetch = FetchType.LAZY)\n    private Set&lt;Role&gt; roles;\n</code></pre>\n<p>I execute hibernate</p>\n<pre><code>@Query(&quot;SELECT u FROM User u JOIN u.identities i JOIN FETCH u.roles r WHERE i.sub = :sub AND i.issuer = :issuer&quot;)\nOptional&lt;User&gt; findByIdentitySubAndIssuer(String sub, String issuer);\n</code></pre>\n<p>In jvm mode (not native) everything works fine, but in native image, i am getting the following error:</p>\n<p><em>Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider is 'none'; your model requires a more advanced BytecodeProvider to be enabled..</em></p>\n<p>I am using spring boot 3.1.0</p>\n<p>Hibernate version 6.2.2 Final</p>\n<p>I was trying to enable hibernate enhancer, adding to properties\njpa:\nproperties:\nhibernate:\nenhancer:\nenable: true</p>\n<p>which resulted in another exception on application startup in native mode\n<em>Failed to initialize JPA EntityManagerFactory: Default-resolver threw exception</em>\n<em>Could not instantiate named strategy class [org.hibernate.boot.model.relational.ColumnOrderingStrategyStandard]</em></p>\n<p>UPDATE:\nwith\nid 'org.springframework.boot' version '3.0.7'\nand\nid 'org.hibernate.orm' version &quot;6.1.7.Final</p>\n<p>still getting\nIn Spring native: Generation of HibernateProxy instances at runtime is not allowed when the configured BytecodeProvider</p>\n<p>Please help.\ntnx</p>\n"},{"tags":["java","error-handling","web.xml"],"answers":[{"tags":[],"owner":{"account_id":1275953,"reputation":26182,"user_id":1231230,"accept_rate":76,"display_name":"Ankur Singhal"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1510814408,"creation_date":1510814408,"answer_id":47323184,"question_id":47323154,"body_markdown":"This should be sufficient, along with few customer error related pages, you can add default page. So all error other than **404**, **500** , will be redirected to generic page `error.html`\r\n\r\n    &lt;error-page&gt;\r\n        &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nor more customized, using **Exception** class, can be your custom exception class as well.\r\n \r\n\r\n    &lt;error-page&gt;\r\n      &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\r\n      &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nSo code becomes,\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;404&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;500&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    &lt;error-page&gt;\r\n        &lt;location&gt;/error.html&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p>This should be sufficient, along with few customer error related pages, you can add default page. So all error other than <strong>404</strong>, <strong>500</strong> , will be redirected to generic page <code>error.html</code></p>\n\n<pre><code>&lt;error-page&gt;\n    &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>or more customized, using <strong>Exception</strong> class, can be your custom exception class as well.</p>\n\n<pre><code>&lt;error-page&gt;\n  &lt;exception-type&gt;java.lang.Throwable&lt;/exception-type&gt;\n  &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n\n<p>So code becomes,</p>\n\n<pre><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n&lt;error-page&gt;\n    &lt;error-code&gt;500&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n&lt;error-page&gt;\n    &lt;location&gt;/error.html&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3723758,"reputation":11894,"user_id":3600553,"accept_rate":71,"display_name":"Du-Lacoste"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686643105,"creation_date":1686643105,"answer_id":76462801,"question_id":47323154,"body_markdown":"You could do the following to tackle 400 and 500 `status error` codes. \r\n\r\nAdd the below lines in `web.xml` files\r\n\r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;404&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n    \r\n    &lt;error-page&gt;\r\n        &lt;error-code&gt;500&lt;/error-code&gt;\r\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\nIn addition to above, you can also use the `Exception` type: See below:\r\n\r\n    &lt;error-page&gt;\r\n        &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;\r\n        &lt;location&gt;/WEB-INF/error/exception.jsp&lt;/location&gt;\r\n    &lt;/error-page&gt;\r\n\r\n\r\nThe difference is: `&lt;error-code&gt;` and `&lt;exception-type&gt;` depends on which is used. \r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p>You could do the following to tackle 400 and 500 <code>status error</code> codes.</p>\n<p>Add the below lines in <code>web.xml</code> files</p>\n<pre><code>&lt;error-page&gt;\n    &lt;error-code&gt;404&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n\n&lt;error-page&gt;\n    &lt;error-code&gt;500&lt;/error-code&gt;\n    &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>In addition to above, you can also use the <code>Exception</code> type: See below:</p>\n<pre><code>&lt;error-page&gt;\n    &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;\n    &lt;location&gt;/WEB-INF/error/exception.jsp&lt;/location&gt;\n&lt;/error-page&gt;\n</code></pre>\n<p>The difference is: <code>&lt;error-code&gt;</code> and <code>&lt;exception-type&gt;</code> depends on which is used.</p>\n"}],"owner":{"account_id":5206598,"reputation":2016,"user_id":4164297,"accept_rate":89,"display_name":"Dil."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2885,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47323184,"answer_count":2,"score":0,"last_activity_date":1686643105,"creation_date":1510814222,"question_id":47323154,"body_markdown":"&lt;br/&gt;\r\nI already have two web pages designed for 404 and 500 error pages in web.xml\r\n&lt;br/&gt;\r\n\r\n\r\n\r\n     &lt;error-page&gt;\r\n            &lt;error-code&gt;404&lt;/error-code&gt;\r\n            &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\r\n        &lt;/error-page&gt;\r\n        &lt;error-page&gt;\r\n            &lt;error-code&gt;500&lt;/error-code&gt;\r\n            &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\r\n        &lt;/error-page&gt;\r\nI want to redirect to a predesignated page for all the other errors.\r\n&lt;br/&gt;\r\nPlease help.\r\nThank you\r\n\r\n","title":"How to specify common error page excluding 404 and 500 in web.xml","body":"<p><br/>\nI already have two web pages designed for 404 and 500 error pages in web.xml\n<br/></p>\n\n<pre><code> &lt;error-page&gt;\n        &lt;error-code&gt;404&lt;/error-code&gt;\n        &lt;location&gt;/WEB-INF/error/404.jsp&lt;/location&gt;\n    &lt;/error-page&gt;\n    &lt;error-page&gt;\n        &lt;error-code&gt;500&lt;/error-code&gt;\n        &lt;location&gt;/WEB-INF/error/500.jsp&lt;/location&gt;\n    &lt;/error-page&gt;\n</code></pre>\n\n<p>I want to redirect to a predesignated page for all the other errors.\n<br/>\nPlease help.\nThank you</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":1,"creation_date":1686578823,"post_id":76457337,"comment_id":134813943,"body_markdown":"What does &quot;block&quot; mean? Your server should respond somehow to the request anyway. It responds with &quot;400 - bad request&quot; which looks appropriate","body":"What does &quot;block&quot; mean? Your server should respond somehow to the request anyway. It responds with &quot;400 - bad request&quot; which looks appropriate"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686579473,"post_id":76457337,"comment_id":134814098,"body_markdown":"Wouldn&#39;t you be better off getting rid of that at the client?","body":"Wouldn&#39;t you be better off getting rid of that at the client?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1686580344,"post_id":76457337,"comment_id":134814354,"body_markdown":"@g00se No, at least not *just* in the client. Always design your API to be resilient to bad actors which are not your own client.","body":"@g00se No, at least not <i>just</i> in the client. Always design your API to be resilient to bad actors which are not your own client."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686580861,"post_id":76457337,"comment_id":134814466,"body_markdown":"Well, as @gdomo said, it seems the server is already responding properly","body":"Well, as @gdomo said, it seems the server is already responding properly"},{"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"score":0,"creation_date":1686582268,"post_id":76457337,"comment_id":134814842,"body_markdown":"Well, my tester demand it should show &quot;our error code&quot; for incorrect input parameter, but not `400 - bad request`. sigh","body":"Well, my tester demand it should show &quot;our error code&quot; for incorrect input parameter, but not <code>400 - bad request</code>. sigh"}],"answers":[{"tags":[],"owner":{"account_id":22633544,"reputation":588,"user_id":16810646,"display_name":"Ananta"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686642947,"creation_date":1686578768,"answer_id":76457461,"question_id":76457337,"body_markdown":"You can create custom deserializer to handle invalid value:\r\n```\r\npublic class BigIntegerDeserializer extends StdDeserializer&lt;BigInteger&gt; {\r\n\r\n    protected BigIntegerDeserializer() {\r\n        super(BigInteger.class);\r\n    }\r\n    @Override\r\n    public BigInteger deserialize(final JsonParser jsonParser, final DeserializationContext deserializationContext) throws IOException, JacksonException {\r\n        final String input = jsonParser.getText();\r\n        try {\r\n            return BigInteger.valueOf(Long.parseLong(input));\r\n        } catch (final NumberFormatException e) {\r\n            throw new IllegalArgumentException(&quot;Value must be a number.&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\nThen annotate that deserializer to your field:\r\n```\r\n@Getter\r\n@Setter\r\npublic class InputRequest {\r\n\r\n\r\n    @JsonDeserialize(using = BigIntegerDeserializer.class) // Here\r\n    private BigInteger num;\r\n}\r\n\r\n```\r\nIn case you want to return the message &quot;Value must a number&quot; back to tester. You can handle the exception using ExceptionHandler:\r\n```\r\n    @ExceptionHandler(HttpMessageNotReadableException.class)\r\n    public static ResponseEntity&lt;String&gt; handleHttpMessageNotReadableException(\r\n        @NonNull final HttpMessageNotReadableException exception\r\n    ) {\r\n        // Since Jackson wrap your IllegalArgumentException exception before throwing. You have to find the cause exception inside it.\r\n        Throwable rootCause = org.apache.commons.lang3.exception.ExceptionUtils.getRootCause(exception);\r\n        final String message = rootCause.getMessage(); // Value must be a number.\r\n        return ...;\r\n    }\r\n```","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>You can create custom deserializer to handle invalid value:</p>\n<pre><code>public class BigIntegerDeserializer extends StdDeserializer&lt;BigInteger&gt; {\n\n    protected BigIntegerDeserializer() {\n        super(BigInteger.class);\n    }\n    @Override\n    public BigInteger deserialize(final JsonParser jsonParser, final DeserializationContext deserializationContext) throws IOException, JacksonException {\n        final String input = jsonParser.getText();\n        try {\n            return BigInteger.valueOf(Long.parseLong(input));\n        } catch (final NumberFormatException e) {\n            throw new IllegalArgumentException(&quot;Value must be a number.&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Then annotate that deserializer to your field:</p>\n<pre><code>@Getter\n@Setter\npublic class InputRequest {\n\n\n    @JsonDeserialize(using = BigIntegerDeserializer.class) // Here\n    private BigInteger num;\n}\n\n</code></pre>\n<p>In case you want to return the message &quot;Value must a number&quot; back to tester. You can handle the exception using ExceptionHandler:</p>\n<pre><code>    @ExceptionHandler(HttpMessageNotReadableException.class)\n    public static ResponseEntity&lt;String&gt; handleHttpMessageNotReadableException(\n        @NonNull final HttpMessageNotReadableException exception\n    ) {\n        // Since Jackson wrap your IllegalArgumentException exception before throwing. You have to find the cause exception inside it.\n        Throwable rootCause = org.apache.commons.lang3.exception.ExceptionUtils.getRootCause(exception);\n        final String message = rootCause.getMessage(); // Value must be a number.\n        return ...;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1437483,"reputation":1908,"user_id":1358551,"display_name":"charybr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686580525,"creation_date":1686580525,"answer_id":76457706,"question_id":76457337,"body_markdown":"Validation of request body can be done using Validation \r\nFor example - https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>Validation of request body can be done using Validation\nFor example - <a href=\"https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/\" rel=\"nofollow noreferrer\">https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/</a></p>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686583380,"creation_date":1686583380,"answer_id":76458102,"question_id":76457337,"body_markdown":"The functionality you see is the expected functionality.\r\n\r\nIf you want to handle non-number values,\r\nconsider changing the handler method to receive a String value and then parse\r\nit yourself.\r\n\r\nHere is some sample code:\r\n```Java\r\nimport org.apache.commons.lang3.math.NumberUtils;\r\n\r\n@RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\r\npublic String test(@RequestBody String requestBody) throws Exception\r\n{\r\n\tString returnValue;\r\n\t\r\n\tif (StringUtils.isNotEmpty(requestBody)))\r\n\t{\r\n\t\tfinal InputRequest inputRequest;\r\n\t\t\r\n\t\ttry\r\n\t\t{\r\n\t\t\tinputRequest = objectMapper.readValue(requestBody, InputRequest.class);\r\n\t\t\t\r\n\t\t\treturnValue = &quot;blam&quot;;  // handle success\r\n\t\t}\r\n\t\tcatch (some exception type)\r\n\t\t{\r\n\t\t\treturnValue = &quot;kapow&quot;; // handle parse error.\r\n\t\t\t// handle parse exceptions here.\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\treturnValue = &quot;blam&quot;; // handle no request body here.\r\n\t}\r\n\t\r\n\treturn returnValue;\r\n}\r\n\r\n\r\n// The dependency for commons lang3\r\n//      &lt;dependency&gt;\r\n//        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n//        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n//        &lt;version&gt;3.5&lt;/version&gt;\r\n//      &lt;/dependency&gt;\r\n```","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>The functionality you see is the expected functionality.</p>\n<p>If you want to handle non-number values,\nconsider changing the handler method to receive a String value and then parse\nit yourself.</p>\n<p>Here is some sample code:</p>\n<pre><code>import org.apache.commons.lang3.math.NumberUtils;\n\n@RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\npublic String test(@RequestBody String requestBody) throws Exception\n{\n    String returnValue;\n    \n    if (StringUtils.isNotEmpty(requestBody)))\n    {\n        final InputRequest inputRequest;\n        \n        try\n        {\n            inputRequest = objectMapper.readValue(requestBody, InputRequest.class);\n            \n            returnValue = &quot;blam&quot;;  // handle success\n        }\n        catch (some exception type)\n        {\n            returnValue = &quot;kapow&quot;; // handle parse error.\n            // handle parse exceptions here.\n        }\n    }\n    else\n    {\n        returnValue = &quot;blam&quot;; // handle no request body here.\n    }\n    \n    return returnValue;\n}\n\n\n// The dependency for commons lang3\n//      &lt;dependency&gt;\n//        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n//        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n//        &lt;version&gt;3.5&lt;/version&gt;\n//      &lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14162458,"reputation":3900,"user_id":10231374,"display_name":"Toni"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686585135,"creation_date":1686583787,"answer_id":76458153,"question_id":76457337,"body_markdown":"You can simply define an [@ExceptionHandler][1] annotated method in your controller:\r\n```java\r\n@ExceptionHandler\r\nResponseEntity&lt;String&gt; handleMessageNotReadable(HttpMessageNotReadableException e) {\r\n  // change the status below according to requirements\r\n  return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_ACCEPTABLE);\r\n}\r\n```\r\nFor handling exceptions globally use [@ControllerAdvice][2], for more details about exception handling check [the blog post][3]. \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html\r\n  [2]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\r\n  [3]: https://reflectoring.io/spring-boot-exception-handling/","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>You can simply define an <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ExceptionHandler.html\" rel=\"nofollow noreferrer\">@ExceptionHandler</a> annotated method in your controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExceptionHandler\nResponseEntity&lt;String&gt; handleMessageNotReadable(HttpMessageNotReadableException e) {\n  // change the status below according to requirements\n  return new ResponseEntity&lt;&gt;(e.getMessage(), HttpStatus.NOT_ACCEPTABLE);\n}\n</code></pre>\n<p>For handling exceptions globally use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/bind/annotation/ControllerAdvice.html\" rel=\"nofollow noreferrer\">@ControllerAdvice</a>, for more details about exception handling check <a href=\"https://reflectoring.io/spring-boot-exception-handling/\" rel=\"nofollow noreferrer\">the blog post</a>.</p>\n"}],"owner":{"account_id":1662902,"reputation":455,"user_id":1530836,"accept_rate":93,"display_name":"Kaninchen"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":283,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76458102,"answer_count":4,"score":0,"last_activity_date":1686642947,"creation_date":1686577826,"question_id":76457337,"body_markdown":"I have a API like below, it receive and process a number that is given by user\r\n\r\n    @RestController\r\n    @RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public class MainController {\r\n    \r\n        @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\r\n        public String test(@Validated @RequestBody InputRequest input) throws Exception {\r\n    \t\treturn &quot;{\\&quot;num\\&quot;:&quot; + String.valueOf(input.getNum()) +&quot;}&quot;;\r\n    \t}\r\n    }\r\n    \r\n    \r\n    @Getter\r\n    @Setter\r\n    public class InputRequest{\r\n    \tprivate BigInteger num;\r\n    }\r\n\r\nAnd then my tester sent a string of junk like `&quot;!@#$^!&amp;*&quot;` to `num` field, my API show Http 400 and a line of exception pop up\r\n\r\n    Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from String &quot;!@#$%^&amp;*()_+&lt;&gt;?~!&quot;: not a valid representation; ...\r\n\r\nIs there any way to block such junk input or handle this exception by my own? Without change the data type of `num`?","title":"Cannot deserialize value of type `java.math.BigInteger` from String","body":"<p>I have a API like below, it receive and process a number that is given by user</p>\n<pre><code>@RestController\n@RequestMapping(produces = MediaType.APPLICATION_JSON_VALUE)\npublic class MainController {\n\n    @RequestMapping(value = &quot;/test&quot;, method = RequestMethod.POST, produces = &quot;application/json;charset=UTF-8&quot;)\n    public String test(@Validated @RequestBody InputRequest input) throws Exception {\n        return &quot;{\\&quot;num\\&quot;:&quot; + String.valueOf(input.getNum()) +&quot;}&quot;;\n    }\n}\n\n\n@Getter\n@Setter\npublic class InputRequest{\n    private BigInteger num;\n}\n</code></pre>\n<p>And then my tester sent a string of junk like <code>&quot;!@#$^!&amp;*&quot;</code> to <code>num</code> field, my API show Http 400 and a line of exception pop up</p>\n<pre><code>Resolved [org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Cannot deserialize value of type `java.math.BigInteger` from String &quot;!@#$%^&amp;*()_+&lt;&gt;?~!&quot;: not a valid representation; ...\n</code></pre>\n<p>Is there any way to block such junk input or handle this exception by my own? Without change the data type of <code>num</code>?</p>\n"},{"tags":["java","spring","mongodb","spring-boot","maven"],"answers":[{"tags":[],"owner":{"account_id":12644481,"reputation":71,"user_id":9190721,"display_name":"BadassBilal"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1685085185,"creation_date":1685085185,"answer_id":76338428,"question_id":76335121,"body_markdown":"Just your fellow learner here, following the same tutorial.\r\n\r\nI jumped to the documentation and it seems you just have to add `/movie-api-db` at the end of your URI, to get access to the database collection:\r\n\r\n`spring.data.mongodb.uri=mongodb+srv://&lt;username&gt;:&lt;pwd&gt;@&lt;cluster&gt;.mongodb.net/movie-api-db`\r\n\r\nHope, it&#39;ll help! \r\n","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p>Just your fellow learner here, following the same tutorial.</p>\n<p>I jumped to the documentation and it seems you just have to add <code>/movie-api-db</code> at the end of your URI, to get access to the database collection:</p>\n<p><code>spring.data.mongodb.uri=mongodb+srv://&lt;username&gt;:&lt;pwd&gt;@&lt;cluster&gt;.mongodb.net/movie-api-db</code></p>\n<p>Hope, it'll help!</p>\n"},{"tags":[],"owner":{"account_id":18646085,"reputation":81,"user_id":13590693,"display_name":"Max"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1686642322,"creation_date":1686642322,"answer_id":76462697,"question_id":76335121,"body_markdown":"For anyone else using Springboot 3.1.0 specifically, there is a solution offered in the github issue [here](https://github.com/spring-projects/spring-boot/issues/35566#issuecomment-1561295798).\r\n\r\nBasically, `spring.data.mongodb.database` is ignored if you&#39;ve set `spring.data.mongodb.uri`, which causes the error seen in the post. Adding the string template into the uri solves the issue.\r\n\r\nThis has been [fixed](https://github.com/spring-projects/spring-boot/commit/593fa1dc42177cc33b076643bd2ba6c66e84a3db) for version 3.1.1 which will be released at a later date.","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p>For anyone else using Springboot 3.1.0 specifically, there is a solution offered in the github issue <a href=\"https://github.com/spring-projects/spring-boot/issues/35566#issuecomment-1561295798\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Basically, <code>spring.data.mongodb.database</code> is ignored if you've set <code>spring.data.mongodb.uri</code>, which causes the error seen in the post. Adding the string template into the uri solves the issue.</p>\n<p>This has been <a href=\"https://github.com/spring-projects/spring-boot/commit/593fa1dc42177cc33b076643bd2ba6c66e84a3db\" rel=\"nofollow noreferrer\">fixed</a> for version 3.1.1 which will be released at a later date.</p>\n"}],"owner":{"account_id":28680765,"reputation":41,"user_id":21962009,"display_name":"smlksmth"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2983,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"answer_count":2,"score":3,"last_activity_date":1686642322,"creation_date":1685038023,"question_id":76335121,"body_markdown":"`Error creating bean with name &#39;mongoDatabaseFactory&#39; defined in class path resource. Failed to instantiate [org.springframework.data.mongodb.core.MongoDatabaseFactorySupport]: Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty`\r\n\r\nI&#39;m not sure what I&#39;m doing wrong here. \r\n\r\n*error message*\r\n![](https://i.stack.imgur.com/jLOGD.jpg)\r\n\r\n*application.properties*\r\n![](https://i.stack.imgur.com/HHItT.png)\r\n\r\nI can&#39;t seem to figure out how to get rid of this message. I have a DB name set in the application.properties. I have MongoDB running and I&#39;m still getting this every time I try to start my server. ","title":"How to resolve the &#39;Factory method &#39;mongoDatabaseFactory&#39; threw exception with message: Database name must not be empty&#39; error in Spring Boot?","body":"<p><code>Error creating bean with name 'mongoDatabaseFactory' defined in class path resource. Failed to instantiate [org.springframework.data.mongodb.core.MongoDatabaseFactorySupport]: Factory method 'mongoDatabaseFactory' threw exception with message: Database name must not be empty</code></p>\n<p>I'm not sure what I'm doing wrong here.</p>\n<p><em>error message</em>\n<img src=\"https://i.stack.imgur.com/jLOGD.jpg\" alt=\"\" /></p>\n<p><em>application.properties</em>\n<img src=\"https://i.stack.imgur.com/HHItT.png\" alt=\"\" /></p>\n<p>I can't seem to figure out how to get rid of this message. I have a DB name set in the application.properties. I have MongoDB running and I'm still getting this every time I try to start my server.</p>\n"},{"tags":["java","spring","spring-mvc","spring-security","roles"],"comments":[{"owner":{"account_id":1176426,"reputation":709,"user_id":1152335,"display_name":"Bruno"},"score":0,"creation_date":1445259836,"post_id":33205236,"comment_id":54234208,"body_markdown":"Possible duplicate of [Spring Security Role Prefix and Custom User Details Service](http://stackoverflow.com/questions/4951832/spring-security-role-prefix-and-custom-user-details-service)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/4951832/spring-security-role-prefix-and-custom-user-details-service\">Spring Security Role Prefix and Custom User Details Service</a>"}],"answers":[{"tags":[],"owner":{"account_id":5670123,"reputation":1547,"user_id":4485032,"accept_rate":100,"display_name":"jmcg"},"down_vote_count":0,"up_vote_count":36,"is_accepted":true,"score":36,"last_activity_date":1568878602,"creation_date":1445224822,"answer_id":33206127,"question_id":33205236,"body_markdown":"Spring security adds the prefix &quot;**ROLE_**&quot; by default.\r\n\r\nIf you want this removed or changed, take a look at \r\n\r\n[How to change role from interceptor-url?][1]\r\n\r\nEDIT: found this as well:\r\n[Spring Security remove RoleVoter prefix][2]\r\n\r\n[1]: https://web.archive.org/web/20180201001929/http://forum.spring.io/forum/spring-projects/security/51066-how-to-change-role-from-interceptor-url\r\n\r\n[2]: https://stackoverflow.com/questions/21620076/spring-security-remove-rolevoter-prefix","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>Spring security adds the prefix \"<strong>ROLE_</strong>\" by default.</p>\n\n<p>If you want this removed or changed, take a look at </p>\n\n<p><a href=\"https://web.archive.org/web/20180201001929/http://forum.spring.io/forum/spring-projects/security/51066-how-to-change-role-from-interceptor-url\" rel=\"noreferrer\">How to change role from interceptor-url?</a></p>\n\n<p>EDIT: found this as well:\n<a href=\"https://stackoverflow.com/questions/21620076/spring-security-remove-rolevoter-prefix\">Spring Security remove RoleVoter prefix</a></p>\n"},{"tags":[],"owner":{"account_id":306491,"reputation":1448,"user_id":617271,"accept_rate":94,"display_name":"olyanren"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1472581622,"creation_date":1472581622,"answer_id":39234629,"question_id":33205236,"body_markdown":"In Spring 4, there are two methods `hasAuthority()` and `hasAnyAuthority()` defined in `org.springframework.security.access.expression.SecurityExpressionRoot` class. These two methods checks only your custom role name **without** adding `ROLE_` prefix. Definition as follows:\r\n\r\n\tpublic final boolean hasAuthority(String authority) {\r\n\t\treturn hasAnyAuthority(authority);\r\n\t}\r\n    public final boolean hasAnyAuthority(String... authorities) {\r\n\t\treturn hasAnyAuthorityName(null, authorities);\r\n\t}\r\n\tprivate boolean hasAnyAuthorityName(String prefix, String... roles) {\r\n\t\tSet&lt;String&gt; roleSet = getAuthoritySet();\r\n\r\n\t\tfor (String role : roles) {\r\n\t\t\tString defaultedRole = getRoleWithDefaultPrefix(prefix, role);\r\n\t\t\tif (roleSet.contains(defaultedRole)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\tprivate static String getRoleWithDefaultPrefix(String defaultRolePrefix, String role) {\r\n\t\tif (role == null) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\tif (defaultRolePrefix == null || defaultRolePrefix.length() == 0) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\tif (role.startsWith(defaultRolePrefix)) {\r\n\t\t\treturn role;\r\n\t\t}\r\n\t\treturn defaultRolePrefix + role;\r\n\t}\r\n\r\n\r\nExample usage:\r\n  \r\n&gt;     &lt;http auto-config=&quot;false&quot; use-expressions=&quot;true&quot; pattern=&quot;/user/**&quot;\r\n&gt;           entry-point-ref=&quot;loginUrlAuthenticationEntryPoint&quot;&gt;\r\n&gt;         &lt;!--If we use hasAnyAuthority, we can remove ROLE_ prefix--&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/yoneticiler&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/addUser&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/addUserGroup&quot; access=&quot;hasAuthority(&#39;FULL_ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/deleteUserGroup&quot; access=&quot;hasAuthority(&#39;FULL_ADMIN&#39;)&quot;/&gt;\r\n&gt;         &lt;intercept-url pattern=&quot;/user/home/**&quot; access=&quot;hasAnyAuthority(&#39;FULL_ADMIN&#39;,&#39;ADMIN&#39;,&#39;EDITOR&#39;,&#39;NORMAL&#39;)&quot;/&gt;\r\n&gt;         &lt;access-denied-handler error-page=&quot;/403&quot;/&gt;\r\n&gt;         &lt;custom-filter position=&quot;FORM_LOGIN_FILTER&quot; ref=&quot;customUsernamePasswordAuthenticationFilter&quot;/&gt;\r\n&gt;         &lt;logout logout-url=&quot;/user/logout&quot;\r\n&gt;                 invalidate-session=&quot;true&quot;\r\n&gt;                 logout-success-url=&quot;/user/index?logout&quot;/&gt;\r\n&gt;         &lt;!-- enable csrf protection --&gt;\r\n&gt;         &lt;csrf/&gt;\r\n&gt;     &lt;/http&gt;   &lt;beans:bean id=&quot;loginUrlAuthenticationEntryPoint&quot;\r\n&gt;                 class=&quot;org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint&quot;&gt;\r\n&gt;         &lt;beans:constructor-arg value=&quot;/user&quot;/&gt;\r\n&gt;     &lt;/beans:bean&gt;","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>In Spring 4, there are two methods <code>hasAuthority()</code> and <code>hasAnyAuthority()</code> defined in <code>org.springframework.security.access.expression.SecurityExpressionRoot</code> class. These two methods checks only your custom role name <strong>without</strong> adding <code>ROLE_</code> prefix. Definition as follows:</p>\n\n<pre><code>public final boolean hasAuthority(String authority) {\n    return hasAnyAuthority(authority);\n}\npublic final boolean hasAnyAuthority(String... authorities) {\n    return hasAnyAuthorityName(null, authorities);\n}\nprivate boolean hasAnyAuthorityName(String prefix, String... roles) {\n    Set&lt;String&gt; roleSet = getAuthoritySet();\n\n    for (String role : roles) {\n        String defaultedRole = getRoleWithDefaultPrefix(prefix, role);\n        if (roleSet.contains(defaultedRole)) {\n            return true;\n        }\n    }\n\n    return false;\n}\nprivate static String getRoleWithDefaultPrefix(String defaultRolePrefix, String role) {\n    if (role == null) {\n        return role;\n    }\n    if (defaultRolePrefix == null || defaultRolePrefix.length() == 0) {\n        return role;\n    }\n    if (role.startsWith(defaultRolePrefix)) {\n        return role;\n    }\n    return defaultRolePrefix + role;\n}\n</code></pre>\n\n<p>Example usage:</p>\n\n<blockquote>\n<pre><code>&lt;http auto-config=\"false\" use-expressions=\"true\" pattern=\"/user/**\"\n      entry-point-ref=\"loginUrlAuthenticationEntryPoint\"&gt;\n    &lt;!--If we use hasAnyAuthority, we can remove ROLE_ prefix--&gt;\n    &lt;intercept-url pattern=\"/user/home/yoneticiler\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/addUser\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/addUserGroup\" access=\"hasAuthority('FULL_ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/deleteUserGroup\" access=\"hasAuthority('FULL_ADMIN')\"/&gt;\n    &lt;intercept-url pattern=\"/user/home/**\" access=\"hasAnyAuthority('FULL_ADMIN','ADMIN','EDITOR','NORMAL')\"/&gt;\n    &lt;access-denied-handler error-page=\"/403\"/&gt;\n    &lt;custom-filter position=\"FORM_LOGIN_FILTER\" ref=\"customUsernamePasswordAuthenticationFilter\"/&gt;\n    &lt;logout logout-url=\"/user/logout\"\n            invalidate-session=\"true\"\n            logout-success-url=\"/user/index?logout\"/&gt;\n    &lt;!-- enable csrf protection --&gt;\n    &lt;csrf/&gt;\n&lt;/http&gt;   &lt;beans:bean id=\"loginUrlAuthenticationEntryPoint\"\n            class=\"org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint\"&gt;\n    &lt;beans:constructor-arg value=\"/user\"/&gt;\n&lt;/beans:bean&gt;\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":5534377,"reputation":284,"user_id":6078959,"accept_rate":80,"display_name":"Svitlana  Onish"},"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1675243951,"creation_date":1497614392,"answer_id":44588758,"question_id":33205236,"body_markdown":"As @olyanren said, you can use `hasAuthority()` method in Spring 4 instead of `hasRole()`. I am adding JavaConfig example:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n\t    .authorizeRequests()\r\n        .antMatchers(&quot;/api/**&quot;)\r\n        .access(&quot;hasAuthority(&#39;ADMIN&#39;)&quot;)\r\n        .and()\r\n        .httpBasic().and().csrf().disable();\r\n    }","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>As @olyanren said, you can use <code>hasAuthority()</code> method in Spring 4 instead of <code>hasRole()</code>. I am adding JavaConfig example:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    .authorizeRequests()\n    .antMatchers(&quot;/api/**&quot;)\n    .access(&quot;hasAuthority('ADMIN')&quot;)\n    .and()\n    .httpBasic().and().csrf().disable();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1895890,"reputation":4097,"user_id":1712880,"accept_rate":27,"display_name":"Hamid Mohayeji"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1614346855,"creation_date":1539893843,"answer_id":52881899,"question_id":33205236,"body_markdown":"You can create a mapper to add `ROLE_` at the beginning of all of your roles:\r\n\r\n    @Bean\r\n    public GrantedAuthoritiesMapper authoritiesMapper() {\r\n        SimpleAuthorityMapper mapper = new SimpleAuthorityMapper();\r\n        mapper.setPrefix(&quot;ROLE_&quot;); // this line is not required \r\n        mapper.setConvertToUpperCase(true); // convert your roles to uppercase\r\n        mapper.setDefaultAuthority(&quot;USER&quot;); // set a default role\r\n    \r\n        return mapper;\r\n    }\r\n\r\nThe you should add the mapper to your provider:\r\n\r\n    @Bean\r\n    public DaoAuthenticationProvider authenticationProvider() {\r\n        DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\r\n        // your config ...\r\n        provider.setAuthoritiesMapper(authoritiesMapper());\r\n    \r\n        return provider;\r\n    }","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>You can create a mapper to add <code>ROLE_</code> at the beginning of all of your roles:</p>\n<pre><code>@Bean\npublic GrantedAuthoritiesMapper authoritiesMapper() {\n    SimpleAuthorityMapper mapper = new SimpleAuthorityMapper();\n    mapper.setPrefix(&quot;ROLE_&quot;); // this line is not required \n    mapper.setConvertToUpperCase(true); // convert your roles to uppercase\n    mapper.setDefaultAuthority(&quot;USER&quot;); // set a default role\n\n    return mapper;\n}\n</code></pre>\n<p>The you should add the mapper to your provider:</p>\n<pre><code>@Bean\npublic DaoAuthenticationProvider authenticationProvider() {\n    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();\n    // your config ...\n    provider.setAuthoritiesMapper(authoritiesMapper());\n\n    return provider;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16652565,"reputation":103,"user_id":12034987,"display_name":"Hashan Mahesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1587838552,"creation_date":1587838552,"answer_id":61430390,"question_id":33205236,"body_markdown":"_ROLE prefix is used by spring security, to identify that it is as a role. A role has a set of privileges a.k.a Authorities, these authorities define varies permissions for a role.\r\n    ex:-  EDIT_PROFILE, DELETE_PROFILE\r\n\r\nYou can define both the roles and authorities, if you are defining a role then it must be prefixed with &quot;ROLE_&quot;\r\n\r\nIn your case you are looking for a role, so by default spring security looks for a string that is prefixed with &quot;ROLE_&quot;.\r\n\r\n\r\n","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>_ROLE prefix is used by spring security, to identify that it is as a role. A role has a set of privileges a.k.a Authorities, these authorities define varies permissions for a role.\n    ex:-  EDIT_PROFILE, DELETE_PROFILE</p>\n\n<p>You can define both the roles and authorities, if you are defining a role then it must be prefixed with \"ROLE_\"</p>\n\n<p>In your case you are looking for a role, so by default spring security looks for a string that is prefixed with \"ROLE_\".</p>\n"}],"owner":{"account_id":2587562,"reputation":1080,"user_id":2242903,"accept_rate":89,"display_name":"Gustavo Rozolin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48058,"favorite_count":0,"down_vote_count":0,"up_vote_count":39,"accepted_answer_id":33206127,"answer_count":5,"score":39,"last_activity_date":1686641626,"creation_date":1445217938,"question_id":33205236,"body_markdown":"I have this code in my Web Security Config:\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/api/**&quot;)\r\n                .hasRole(&quot;ADMIN&quot;)\r\n                .and()\r\n                .httpBasic().and().csrf().disable();\r\n\r\n    }\r\n\r\nSo I added an user with &quot;ADMIN&quot; role in my database and I always get 403 error when I tryed loggin with this user, then I enabled log for spring and I found this line:\r\n\r\n    2015-10-18 23:13:24.112 DEBUG 4899 --- [nio-8080-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /api/user/login; Attributes: [hasRole(&#39;ROLE_ADMIN&#39;)]\r\n\r\nWhy Spring Security is looking for &quot;ROLE_ADMIN&quot; instead &quot;ADMIN&quot;? ","title":"Spring security added prefix &quot;ROLE_&quot; to all roles name?","body":"<p>I have this code in my Web Security Config:</p>\n<pre><code>@Override\nprotected void configure(HttpSecurity http) throws Exception {\n    http\n            .authorizeRequests()\n            .antMatchers(&quot;/api/**&quot;)\n            .hasRole(&quot;ADMIN&quot;)\n            .and()\n            .httpBasic().and().csrf().disable();\n\n}\n</code></pre>\n<p>So I added an user with &quot;ADMIN&quot; role in my database and I always get 403 error when I tryed loggin with this user, then I enabled log for spring and I found this line:</p>\n<pre><code>2015-10-18 23:13:24.112 DEBUG 4899 --- [nio-8080-exec-1] o.s.s.w.a.i.FilterSecurityInterceptor    : Secure object: FilterInvocation: URL: /api/user/login; Attributes: [hasRole('ROLE_ADMIN')]\n</code></pre>\n<p>Why Spring Security is looking for &quot;ROLE_ADMIN&quot; instead &quot;ADMIN&quot;?</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":46972,"reputation":356179,"user_id":139010,"accept_rate":81,"display_name":"Matt Ball"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1299863598,"creation_date":1299863598,"answer_id":5276056,"question_id":5276031,"body_markdown":"Just use:\r\n\r\n- [`Collections#singletonList()`](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList%28T%29), which returns a [`List`][1], or\r\n- [`Collections#singleton()`](http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singleton%28T%29), which returns a [`Set`][2].\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/6/docs/api/java/util/List.html\r\n  [2]: http://download.oracle.com/javase/6/docs/api/java/util/Set.html","title":"java one element list","body":"<p>Just use:</p>\n\n<ul>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList%28T%29\" rel=\"noreferrer\"><code>Collections#singletonList()</code></a>, which returns a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/List.html\" rel=\"noreferrer\"><code>List</code></a>, or</li>\n<li><a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singleton%28T%29\" rel=\"noreferrer\"><code>Collections#singleton()</code></a>, which returns a <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Set.html\" rel=\"noreferrer\"><code>Set</code></a>.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37539,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1299863772,"creation_date":1299863772,"answer_id":5276086,"question_id":5276031,"body_markdown":"Consider &lt;a href=&quot;http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList(T)&quot;&gt;Collections.singletonList()&lt;/a&gt; for a list of 1 element.","title":"java one element list","body":"<p>Consider <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Collections.html#singletonList(T)\" rel=\"nofollow\">Collections.singletonList()</a> for a list of 1 element.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686641340,"creation_date":1686641340,"answer_id":76462590,"question_id":5276031,"body_markdown":"As an alternative to [`Collections.singletonList(T o)`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#singletonList(T)) mentioned in other answers, there&#39;s [`List.of(E e1)`](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)).  This is the single-element overload of the [unmodifiable lists](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#unmodifiable) static factory methods, which create unmodifiable lists of arbitrary sizes.\r\n\r\nWhile the current implementation has a small bit of additional overhead compared to `singletonList`, it is likely to be similarly performant to `singletonList` in practice.","title":"java one element list","body":"<p>As an alternative to <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Collections.html#singletonList(T)\" rel=\"nofollow noreferrer\"><code>Collections.singletonList(T o)</code></a> mentioned in other answers, there's <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#of(E)\" rel=\"nofollow noreferrer\"><code>List.of(E e1)</code></a>.  This is the single-element overload of the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/List.html#unmodifiable\" rel=\"nofollow noreferrer\">unmodifiable lists</a> static factory methods, which create unmodifiable lists of arbitrary sizes.</p>\n<p>While the current implementation has a small bit of additional overhead compared to <code>singletonList</code>, it is likely to be similarly performant to <code>singletonList</code> in practice.</p>\n"}],"owner":{"account_id":20044,"reputation":4699,"user_id":47508,"accept_rate":62,"display_name":"richs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":198,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":5276056,"answer_count":3,"score":6,"last_activity_date":1686641340,"creation_date":1299863461,"question_id":5276031,"body_markdown":"What is the most efficient (performant) way to create a list with just one element? ","title":"java one element list","body":"<p>What is the most efficient (performant) way to create a list with just one element? </p>\n"},{"tags":["java","android","android-intent","uri"],"owner":{"account_id":26577568,"reputation":1,"user_id":20202690,"display_name":"Allan Walks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686640602,"creation_date":1686635809,"question_id":76462023,"body_markdown":"here is the code where i&#39;m picking image from gallry &amp; its sucssesfuly picking image from gallry but when im picking image from google photos application crashed again and again \r\n\r\n**OnClickListener**\r\n```\r\n\r\n      binding.cameraButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openTools = 1;\r\n                age = &quot;&quot;;\r\n                gender = &quot;&quot;;\r\n                emotion = &quot;&quot;;\r\n                if (checkPermission()) {\r\n                    openCamera();\r\n                } else {\r\n                    requestPermission();\r\n                }\r\n\r\n            }\r\n        });\r\n        binding.galleryButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                openTools = 2;\r\n                age = &quot;&quot;;\r\n                gender = &quot;&quot;;\r\n                emotion = &quot;&quot;;\r\n                if (checkPermission()) {\r\n                    openGallery();\r\n                } else {\r\n                    requestPermission();\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n```\r\n\r\n**Permissions**\r\n\r\n\r\n \r\n```\r\npublic static String[] storge_permissions = {\r\n            Manifest.permission.WRITE_EXTERNAL_STORAGE,\r\n            Manifest.permission.READ_EXTERNAL_STORAGE,\r\n            Manifest.permission.CAMERA\r\n    };\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\r\n    public static String[] storge_permissions_33 = {\r\n            Manifest.permission.CAMERA,\r\n            Manifest.permission.READ_MEDIA_IMAGES\r\n    };\r\n\r\n    public static String[] permissions() {\r\n        String[] p;\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\r\n            p = storge_permissions_33;\r\n        } else {\r\n            p = storge_permissions;\r\n        }\r\n        return p;\r\n    }\r\n\r\n    private boolean checkPermission() {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\r\n            return checkPermissionAboveQ();\r\n        } else {\r\n            return checkPermissionBelowQ();\r\n        }\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\r\n    private boolean checkPermissionAboveQ() {\r\n        for (String permission : storge_permissions_33) {\r\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private boolean checkPermissionBelowQ() {\r\n        for (String permission : storge_permissions) {\r\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private void requestPermission() {\r\n        ActivityCompat.requestPermissions(this, permissions(), PERMISSION_REQUEST_CODE);\r\n    }\r\n\r\n    @Override\r\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\r\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\r\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.TIRAMISU) {\r\n            if (requestCode == PERMISSION_REQUEST_CODE) {\r\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED\r\n                        &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) {\r\n                    if (openTools == 1) {\r\n                        if (checkPermission()) {\r\n                            openCamera();\r\n                        } else {\r\n                            requestPermission();\r\n                        }\r\n                    } else if (openTools == 2) {\r\n                        if (checkPermission()) {\r\n                            openGallery();\r\n                        } else {\r\n                            requestPermission();\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (!checkPermission()) {\r\n                        AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n                        builder.setTitle(R.string.permission_recuierd)\r\n                                .setMessage(R.string.this_app_requires)\r\n                                .setPositiveButton(R.string.go_to_settings, (dialog, which) -&gt; openAppSettings())\r\n                                .setNegativeButton(R.string.cancel, (dialog, which) -&gt; {\r\n                                    dialog.dismiss();\r\n                                })\r\n                                .show();\r\n                    }\r\n                }\r\n            }\r\n        } else if (checkPermission()) {\r\n            if (openTools == 1) {\r\n                openCamera();\r\n            } else if (openTools == 2) {\r\n                openGallery();\r\n            }\r\n        } else {\r\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\r\n            builder.setTitle(R.string.permission_recuierd)\r\n                    .setMessage(R.string.this_app_requires)\r\n                    .setPositiveButton(R.string.go_to_settings, (dialog, which) -&gt; openAppSettings())\r\n                    .setNegativeButton(R.string.cancel, (dialog, which) -&gt; {\r\n                        dialog.dismiss();\r\n                    })\r\n                    .show();\r\n        }\r\n    }\r\n\r\n```\r\n\r\n**Intents For Pick Image**\r\n\r\n```\r\n private void openAppSettings() {\r\n        Intent intent = new Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\r\n        Uri uri = Uri.fromParts(&quot;package&quot;, getPackageName(), null);\r\n        intent.setData(uri);\r\n        startActivityForResult(intent, SETTINGS_REQUEST_CODE);\r\n    }\r\n\r\n    private void openGallery() {\r\n        Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\r\n        intent.setType(&quot;image/*&quot;);\r\n        startActivityForResult(intent, PICK_IMAGE_REQUEST);\r\n    }\r\n\r\n    private void openCamera() {\r\n        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\r\n        startActivityForResult(intent, REQUEST_CAMERA);\r\n    }\r\n```\r\n\r\n\r\n\r\n**Other Functions**\r\n\r\n \r\n```\r\n@Override\r\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n\r\n        // if (resultCode == RESULT_OK) {\r\n        if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; data != null &amp;&amp; data.getData() != null) {\r\n            Uri uri = data.getData();\r\n            String mimeType = getContentResolver().getType(uri);\r\n            if (mimeType != null &amp;&amp; mimeType.startsWith(&quot;image/&quot;)) {\r\n                // Selected item is an image\r\n                file = new File(getFullPathFromUri(uri));\r\n                try {\r\n                    compFile = compressImage(file, 800, 800);\r\n                    System.out.println(&quot;compFile Gallery: &quot; + compFile);\r\n                    uploadImage();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            } else {\r\n                // Selected item is not an image (e.g., video)\r\n                Toast.makeText(this, R.string.pleas_select_an_image, Toast.LENGTH_SHORT).show();\r\n            }\r\n        } else if (requestCode == REQUEST_CAMERA &amp;&amp; data != null &amp;&amp; data.getExtras() != null) {\r\n            Bitmap imageBitmap = (Bitmap) data.getExtras().get(&quot;data&quot;);\r\n            // Save the captured image to a file\r\n            FileOutputStream outputStream = null;\r\n            try {\r\n                File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\r\n                File imageFile = File.createTempFile(&quot;image&quot;, &quot;.jpg&quot;, storageDir);\r\n                outputStream = new FileOutputStream(imageFile);\r\n                imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\r\n                outputStream.flush();\r\n                outputStream.close();\r\n\r\n                file = imageFile;\r\n                compFile = compressImage(file, 800, 800);\r\n                System.out.println(&quot;compFileCam: &quot; + compFile);\r\n\r\n\r\n                uploadImage();\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    private String getFullPathFromUri(Uri uri) {\r\n        String fullPath = null;\r\n        String[] projection = {MediaStore.Images.Media.DATA};\r\n        Cursor cursor = null;\r\n        try {\r\n            ContentResolver contentResolver = getContentResolver();\r\n            cursor = contentResolver.query(uri, projection, null, null, null);\r\n\r\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\r\n                int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\r\n                fullPath = cursor.getString(columnIndex);\r\n            }\r\n        } finally {\r\n            if (cursor != null) {\r\n                cursor.close();\r\n            }\r\n        }\r\n\r\n        return fullPath;\r\n    }\r\n\r\n    private File compressImage(File originalFile, int maxWidth, int maxHeight) throws IOException {\r\n        // Load the original image into a Bitmap\r\n        Bitmap originalBitmap = BitmapFactory.decodeFile(originalFile.getAbsolutePath());\r\n\r\n        // Calculate the new dimensions for the compressed image\r\n        int originalWidth = originalBitmap.getWidth();\r\n        int originalHeight = originalBitmap.getHeight();\r\n        int newWidth, newHeight;\r\n        if (originalWidth &gt; originalHeight) {\r\n            newWidth = maxWidth;\r\n            newHeight = (int) (originalHeight * ((float) maxWidth / originalWidth));\r\n        } else {\r\n            newHeight = maxHeight;\r\n            newWidth = (int) (originalWidth * ((float) maxHeight / originalHeight));\r\n        }\r\n\r\n        // Create a scaled bitmap with the new dimensions\r\n        Bitmap compressedBitmap = Bitmap.createScaledBitmap(originalBitmap, newWidth, newHeight, true);\r\n\r\n        // Create a new file for the compressed image\r\n        File compressedFile = new File(getCacheDir(), &quot;compressed_image.jpg&quot;);\r\n\r\n        // Compress the bitmap and save it to the new file\r\n        OutputStream outputStream = new FileOutputStream(compressedFile);\r\n        compressedBitmap.compress(Bitmap.CompressFormat.JPEG, 80, outputStream);\r\n        outputStream.flush();\r\n        outputStream.close();\r\n\r\n        // Recycle the original and compressed bitmaps to free up memory\r\n        originalBitmap.recycle();\r\n        compressedBitmap.recycle();\r\n\r\n        return compressedFile;\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n**ERORS**\r\n\r\n```\r\nuri Result content://com.google.android.apps.photos.contentprovider/0/1/mediakey%3A%2Flocal%253A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image%2Fjpeg/2047781671\r\nAndroidRuntime  E  FATAL EXCEPTION: main\r\njava.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.google.android.apps.photos.contentprovider/0/1/mediakey:/local%3A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image/jpeg/2047781671 flg=0x1 clip={text/uri-list U:content://com.google.android.apps.photos.contentprovider/0/1/mediakey%3A%2Flocal%253A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image%2Fjpeg/2047781671} }} to activity {com.face.scanner.age.calculator.detector/com.face.age.detector.FaceAgeDetectionActivity}: java.lang.NullPointerException\r\n                                                                                                    \tat android.app.ActivityThread.deliverResults(ActivityThread.java:4491)\r\n                                                                                                    \tat android.app.ActivityThread.handleSendResult(ActivityThread.java:4533)\r\n                                                                                                    \tat android.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:49)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\r\n                                                                                                    \tat android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\r\n                                                                                                    \tat android.app.ActivityThread$H.handleMessage(ActivityThread.java:1861)\r\n                                                                                                    \tat android.os.Handler.dispatchMessage(Handler.java:106)\r\n                                                                                                    \tat android.os.Looper.loop(Looper.java:193)\r\n                                                                                                    \tat android.app.ActivityThread.main(ActivityThread.java:6819)\r\n                                                                                                    \tat java.lang.reflect.Method.invoke(Native Method)\r\n                                                                                                    \tat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:497)\r\n                                                                                                    \tat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:912)\r\n                                                                                                    Caused by: java.lang.NullPointerException\r\n                                                                                                    \tat java.io.File.&lt;init&gt;(File.java:283)\r\n                                                                                                    \tat com.face.age.detector.FaceAgeDetectionActivity.onActivityResult(FaceAgeDetectionActivity.java:292)\r\n                                                                                                    \tat android.app.Activity.dispatchActivityResult(Activity.java:7454)\r\n```\r\n\r\n\r\ni want to pick image from Google Photos also but giving crashes with this code but picking image from gallery and camera sucessfully. when we chose image from photos it gives null poitnter Exception.\r\n\r\n","title":"pick Image from Google Photos crashing","body":"<p>here is the code where i'm picking image from gallry &amp; its sucssesfuly picking image from gallry but when im picking image from google photos application crashed again and again</p>\n<p><strong>OnClickListener</strong></p>\n<pre><code>\n      binding.cameraButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                openTools = 1;\n                age = &quot;&quot;;\n                gender = &quot;&quot;;\n                emotion = &quot;&quot;;\n                if (checkPermission()) {\n                    openCamera();\n                } else {\n                    requestPermission();\n                }\n\n            }\n        });\n        binding.galleryButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                openTools = 2;\n                age = &quot;&quot;;\n                gender = &quot;&quot;;\n                emotion = &quot;&quot;;\n                if (checkPermission()) {\n                    openGallery();\n                } else {\n                    requestPermission();\n                }\n            }\n\n        });\n\n</code></pre>\n<p><strong>Permissions</strong></p>\n<pre><code>public static String[] storge_permissions = {\n            Manifest.permission.WRITE_EXTERNAL_STORAGE,\n            Manifest.permission.READ_EXTERNAL_STORAGE,\n            Manifest.permission.CAMERA\n    };\n\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\n    public static String[] storge_permissions_33 = {\n            Manifest.permission.CAMERA,\n            Manifest.permission.READ_MEDIA_IMAGES\n    };\n\n    public static String[] permissions() {\n        String[] p;\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\n            p = storge_permissions_33;\n        } else {\n            p = storge_permissions;\n        }\n        return p;\n    }\n\n    private boolean checkPermission() {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) {\n            return checkPermissionAboveQ();\n        } else {\n            return checkPermissionBelowQ();\n        }\n    }\n\n    @RequiresApi(api = Build.VERSION_CODES.TIRAMISU)\n    private boolean checkPermissionAboveQ() {\n        for (String permission : storge_permissions_33) {\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private boolean checkPermissionBelowQ() {\n        for (String permission : storge_permissions) {\n            if (ContextCompat.checkSelfPermission(this, permission) != PackageManager.PERMISSION_GRANTED) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private void requestPermission() {\n        ActivityCompat.requestPermissions(this, permissions(), PERMISSION_REQUEST_CODE);\n    }\n\n    @Override\n    public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n        super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.TIRAMISU) {\n            if (requestCode == PERMISSION_REQUEST_CODE) {\n                if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED\n                        &amp;&amp; grantResults[1] == PackageManager.PERMISSION_GRANTED) {\n                    if (openTools == 1) {\n                        if (checkPermission()) {\n                            openCamera();\n                        } else {\n                            requestPermission();\n                        }\n                    } else if (openTools == 2) {\n                        if (checkPermission()) {\n                            openGallery();\n                        } else {\n                            requestPermission();\n                        }\n                    }\n                } else {\n                    if (!checkPermission()) {\n                        AlertDialog.Builder builder = new AlertDialog.Builder(this);\n                        builder.setTitle(R.string.permission_recuierd)\n                                .setMessage(R.string.this_app_requires)\n                                .setPositiveButton(R.string.go_to_settings, (dialog, which) -&gt; openAppSettings())\n                                .setNegativeButton(R.string.cancel, (dialog, which) -&gt; {\n                                    dialog.dismiss();\n                                })\n                                .show();\n                    }\n                }\n            }\n        } else if (checkPermission()) {\n            if (openTools == 1) {\n                openCamera();\n            } else if (openTools == 2) {\n                openGallery();\n            }\n        } else {\n            AlertDialog.Builder builder = new AlertDialog.Builder(this);\n            builder.setTitle(R.string.permission_recuierd)\n                    .setMessage(R.string.this_app_requires)\n                    .setPositiveButton(R.string.go_to_settings, (dialog, which) -&gt; openAppSettings())\n                    .setNegativeButton(R.string.cancel, (dialog, which) -&gt; {\n                        dialog.dismiss();\n                    })\n                    .show();\n        }\n    }\n\n</code></pre>\n<p><strong>Intents For Pick Image</strong></p>\n<pre><code> private void openAppSettings() {\n        Intent intent = new Intent(Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\n        Uri uri = Uri.fromParts(&quot;package&quot;, getPackageName(), null);\n        intent.setData(uri);\n        startActivityForResult(intent, SETTINGS_REQUEST_CODE);\n    }\n\n    private void openGallery() {\n        Intent intent = new Intent(Intent.ACTION_PICK, MediaStore.Images.Media.EXTERNAL_CONTENT_URI);\n        intent.setType(&quot;image/*&quot;);\n        startActivityForResult(intent, PICK_IMAGE_REQUEST);\n    }\n\n    private void openCamera() {\n        Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);\n        startActivityForResult(intent, REQUEST_CAMERA);\n    }\n</code></pre>\n<p><strong>Other Functions</strong></p>\n<pre><code>@Override\n    protected void onActivityResult(int requestCode, int resultCode, Intent data) {\n        super.onActivityResult(requestCode, resultCode, data);\n\n        // if (resultCode == RESULT_OK) {\n        if (requestCode == PICK_IMAGE_REQUEST &amp;&amp; data != null &amp;&amp; data.getData() != null) {\n            Uri uri = data.getData();\n            String mimeType = getContentResolver().getType(uri);\n            if (mimeType != null &amp;&amp; mimeType.startsWith(&quot;image/&quot;)) {\n                // Selected item is an image\n                file = new File(getFullPathFromUri(uri));\n                try {\n                    compFile = compressImage(file, 800, 800);\n                    System.out.println(&quot;compFile Gallery: &quot; + compFile);\n                    uploadImage();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n            } else {\n                // Selected item is not an image (e.g., video)\n                Toast.makeText(this, R.string.pleas_select_an_image, Toast.LENGTH_SHORT).show();\n            }\n        } else if (requestCode == REQUEST_CAMERA &amp;&amp; data != null &amp;&amp; data.getExtras() != null) {\n            Bitmap imageBitmap = (Bitmap) data.getExtras().get(&quot;data&quot;);\n            // Save the captured image to a file\n            FileOutputStream outputStream = null;\n            try {\n                File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);\n                File imageFile = File.createTempFile(&quot;image&quot;, &quot;.jpg&quot;, storageDir);\n                outputStream = new FileOutputStream(imageFile);\n                imageBitmap.compress(Bitmap.CompressFormat.JPEG, 100, outputStream);\n                outputStream.flush();\n                outputStream.close();\n\n                file = imageFile;\n                compFile = compressImage(file, 800, 800);\n                System.out.println(&quot;compFileCam: &quot; + compFile);\n\n\n                uploadImage();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n\n    private String getFullPathFromUri(Uri uri) {\n        String fullPath = null;\n        String[] projection = {MediaStore.Images.Media.DATA};\n        Cursor cursor = null;\n        try {\n            ContentResolver contentResolver = getContentResolver();\n            cursor = contentResolver.query(uri, projection, null, null, null);\n\n            if (cursor != null &amp;&amp; cursor.moveToFirst()) {\n                int columnIndex = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);\n                fullPath = cursor.getString(columnIndex);\n            }\n        } finally {\n            if (cursor != null) {\n                cursor.close();\n            }\n        }\n\n        return fullPath;\n    }\n\n    private File compressImage(File originalFile, int maxWidth, int maxHeight) throws IOException {\n        // Load the original image into a Bitmap\n        Bitmap originalBitmap = BitmapFactory.decodeFile(originalFile.getAbsolutePath());\n\n        // Calculate the new dimensions for the compressed image\n        int originalWidth = originalBitmap.getWidth();\n        int originalHeight = originalBitmap.getHeight();\n        int newWidth, newHeight;\n        if (originalWidth &gt; originalHeight) {\n            newWidth = maxWidth;\n            newHeight = (int) (originalHeight * ((float) maxWidth / originalWidth));\n        } else {\n            newHeight = maxHeight;\n            newWidth = (int) (originalWidth * ((float) maxHeight / originalHeight));\n        }\n\n        // Create a scaled bitmap with the new dimensions\n        Bitmap compressedBitmap = Bitmap.createScaledBitmap(originalBitmap, newWidth, newHeight, true);\n\n        // Create a new file for the compressed image\n        File compressedFile = new File(getCacheDir(), &quot;compressed_image.jpg&quot;);\n\n        // Compress the bitmap and save it to the new file\n        OutputStream outputStream = new FileOutputStream(compressedFile);\n        compressedBitmap.compress(Bitmap.CompressFormat.JPEG, 80, outputStream);\n        outputStream.flush();\n        outputStream.close();\n\n        // Recycle the original and compressed bitmaps to free up memory\n        originalBitmap.recycle();\n        compressedBitmap.recycle();\n\n        return compressedFile;\n    }\n</code></pre>\n<p><strong>ERORS</strong></p>\n<pre><code>uri Result content://com.google.android.apps.photos.contentprovider/0/1/mediakey%3A%2Flocal%253A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image%2Fjpeg/2047781671\nAndroidRuntime  E  FATAL EXCEPTION: main\njava.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=1, result=-1, data=Intent { dat=content://com.google.android.apps.photos.contentprovider/0/1/mediakey:/local%3A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image/jpeg/2047781671 flg=0x1 clip={text/uri-list U:content://com.google.android.apps.photos.contentprovider/0/1/mediakey%3A%2Flocal%253A847dc8ca-ba93-419d-9529-c1b50b72e932/ORIGINAL/NONE/image%2Fjpeg/2047781671} }} to activity {com.face.scanner.age.calculator.detector/com.face.age.detector.FaceAgeDetectionActivity}: java.lang.NullPointerException\n                                                                                                        at android.app.ActivityThread.deliverResults(ActivityThread.java:4491)\n                                                                                                        at android.app.ActivityThread.handleSendResult(ActivityThread.java:4533)\n                                                                                                        at android.app.servertransaction.ActivityResultItem.execute(ActivityResultItem.java:49)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:108)\n                                                                                                        at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:68)\n                                                                                                        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1861)\n                                                                                                        at android.os.Handler.dispatchMessage(Handler.java:106)\n                                                                                                        at android.os.Looper.loop(Looper.java:193)\n                                                                                                        at android.app.ActivityThread.main(ActivityThread.java:6819)\n                                                                                                        at java.lang.reflect.Method.invoke(Native Method)\n                                                                                                        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:497)\n                                                                                                        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:912)\n                                                                                                    Caused by: java.lang.NullPointerException\n                                                                                                        at java.io.File.&lt;init&gt;(File.java:283)\n                                                                                                        at com.face.age.detector.FaceAgeDetectionActivity.onActivityResult(FaceAgeDetectionActivity.java:292)\n                                                                                                        at android.app.Activity.dispatchActivityResult(Activity.java:7454)\n</code></pre>\n<p>i want to pick image from Google Photos also but giving crashes with this code but picking image from gallery and camera sucessfully. when we chose image from photos it gives null poitnter Exception.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":0,"creation_date":1611617170,"post_id":65893765,"comment_id":116505245,"body_markdown":"If I read this it seems you are trying to run your code from REPL or possibly a shell prompt. Why not try and create a `main` method to call your static `secondHalfLetters` method?","body":"If I read this it seems you are trying to run your code from REPL or possibly a shell prompt. Why not try and create a <code>main</code> method to call your static <code>secondHalfLetters</code> method?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1611622637,"post_id":65893765,"comment_id":116506389,"body_markdown":"Well, the code looks good to me. Are you sure your file is named `alphabet.java` and it is recompiled?","body":"Well, the code looks good to me. Are you sure your file is named <code>alphabet.java</code> and it is recompiled?"}],"answers":[{"tags":[],"owner":{"account_id":20274667,"reputation":25,"user_id":14870013,"display_name":"Glenn Antony Sheen"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686639929,"creation_date":1686639929,"answer_id":76462412,"question_id":65893765,"body_markdown":"The code you provided seems correct, and the issue you&#39;re facing is likely related to how you are trying to call the secondHalfLetters method. Here&#39;s an example of how you can call the method and retrieve the count:\r\n\r\n    public class Alphabet {\r\n        public static void main(String[] args) {\r\n            String word = &quot;Beaver&quot;;\r\n            int count = secondHalfLetters(word);\r\n            System.out.println(&quot;Number of letters past &#39;n&#39; in the word: &quot; + count);\r\n        }\r\n    \r\n        public static int secondHalfLetters(String letter) {\r\n            int count = 0;\r\n            for (int i = 0; i &lt; letter.length(); i++) {\r\n                if (Character.toLowerCase(letter.charAt(i)) &gt;= &#39;n&#39;) {\r\n                    count++;\r\n                }\r\n            }\r\n            return count;\r\n        }\r\n    }\r\n\r\n\r\nIn the above example, the main method is called, and a string variable word is initialized with the value &quot;Beaver&quot;. The secondHalfLetters method is then called, passing the word variable as an argument. The returned count is stored in the count variable.\r\n\r\nFinally, the result is printed using System.out.println, displaying the number of letters past &#39;n&#39; in the word.\r\n\r\nMake sure you have a main method in your code to run it as a standalone program. Additionally, ensure that your code is properly formatted and follow Java naming conventions","title":"BlueJ comes up with error message &quot;Error: &#39;;&#39; expected&quot; when I try and run my Java program","body":"<p>The code you provided seems correct, and the issue you're facing is likely related to how you are trying to call the secondHalfLetters method. Here's an example of how you can call the method and retrieve the count:</p>\n<pre><code>public class Alphabet {\n    public static void main(String[] args) {\n        String word = &quot;Beaver&quot;;\n        int count = secondHalfLetters(word);\n        System.out.println(&quot;Number of letters past 'n' in the word: &quot; + count);\n    }\n\n    public static int secondHalfLetters(String letter) {\n        int count = 0;\n        for (int i = 0; i &lt; letter.length(); i++) {\n            if (Character.toLowerCase(letter.charAt(i)) &gt;= 'n') {\n                count++;\n            }\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>In the above example, the main method is called, and a string variable word is initialized with the value &quot;Beaver&quot;. The secondHalfLetters method is then called, passing the word variable as an argument. The returned count is stored in the count variable.</p>\n<p>Finally, the result is printed using System.out.println, displaying the number of letters past 'n' in the word.</p>\n<p>Make sure you have a main method in your code to run it as a standalone program. Additionally, ensure that your code is properly formatted and follow Java naming conventions</p>\n"}],"owner":{"account_id":20546725,"reputation":1,"user_id":15080360,"display_name":"mbdtf11111"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686639929,"creation_date":1611616773,"question_id":65893765,"body_markdown":"I am trying to make a program that returns the number of letters in a word past the letter &#39;n&#39; in the alphabet (&quot;Beaver&quot; would return 2, &quot;v&quot; and &quot;r&quot; being the two letters it counted). After I compile and go to do the method call it tells me to enter &#39;String letter&#39;.\r\n\r\nIf I enter &quot;String _____&quot; it says &quot;Error: cannot find symbol- variable ____ (whatever word I entered)&quot;.\r\n\r\nIf I put exactly &quot;String letter&quot; it says &quot;Error: &#39;;&#39; expected&quot;.\r\n\r\nHere is my code below:\r\n\r\n```\r\npublic class alphabet{\r\n    public static int secondHalfLetters(String letter) {\r\n        int count = 0;\r\n        for (int i = 0; i &lt; letter.length(); i++) {\r\n            if (Character.toLowerCase(letter.charAt(i)) &gt;= &#39;n&#39;) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n}\r\n```\r\n\r\nI feel stuck. What is wrong with my code and how can I fix it?","title":"BlueJ comes up with error message &quot;Error: &#39;;&#39; expected&quot; when I try and run my Java program","body":"<p>I am trying to make a program that returns the number of letters in a word past the letter 'n' in the alphabet (&quot;Beaver&quot; would return 2, &quot;v&quot; and &quot;r&quot; being the two letters it counted). After I compile and go to do the method call it tells me to enter 'String letter'.</p>\n<p>If I enter &quot;String _____&quot; it says &quot;Error: cannot find symbol- variable ____ (whatever word I entered)&quot;.</p>\n<p>If I put exactly &quot;String letter&quot; it says &quot;Error: ';' expected&quot;.</p>\n<p>Here is my code below:</p>\n<pre><code>public class alphabet{\n    public static int secondHalfLetters(String letter) {\n        int count = 0;\n        for (int i = 0; i &lt; letter.length(); i++) {\n            if (Character.toLowerCase(letter.charAt(i)) &gt;= 'n') {\n                count++;\n            }\n        }\n        return count;\n    }\n}\n</code></pre>\n<p>I feel stuck. What is wrong with my code and how can I fix it?</p>\n"},{"tags":["java","pdf","processing","pdfbox"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686591033,"post_id":76458772,"comment_id":134816729,"body_markdown":"fwiw I just used your code on a libreoffice Writer doc that I exported to pdf. It printed out the targets of the links just fine","body":"fwiw I just used your code on a libreoffice Writer doc that I exported to pdf. It printed out the targets of the links just fine"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686591350,"post_id":76458772,"comment_id":134816809,"body_markdown":"Oh right. I think I might have misunderstood. If they are not &#39;proper&#39; links then surely that code can&#39;t possibly work?","body":"Oh right. I think I might have misunderstood. If they are not &#39;proper&#39; links then surely that code can&#39;t possibly work?"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686599591,"post_id":76458772,"comment_id":134818276,"body_markdown":"I have bad space somewhere, and some place i have normal string but that is link @KJ","body":"I have bad space somewhere, and some place i have normal string but that is link @KJ"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686599674,"post_id":76458772,"comment_id":134818287,"body_markdown":"You can check this pdf for example https://drive.google.com/file/d/1OqLjSUXpJ1Z3Ap5uDhSXMr0IdG9R6hCO/view?usp=drivesdk","body":"You can check this pdf for example <a href=\"https://drive.google.com/file/d/1OqLjSUXpJ1Z3Ap5uDhSXMr0IdG9R6hCO/view?usp=drivesdk\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1OqLjSUXpJ1Z3Ap5uDhSXMr0IdG9R6hCO/&hellip;</a>"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686601404,"post_id":76458772,"comment_id":134818588,"body_markdown":"I am ok with any language, but i have thousands of pdf that i need to convert, via pattern i am able to detect that but unable to update in pdf, because not aware about the location, if someone from pdfbox give some info then it would be great","body":"I am ok with any language, but i have thousands of pdf that i need to convert, via pattern i am able to detect that but unable to update in pdf, because not aware about the location, if someone from pdfbox give some info then it would be great"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686605061,"post_id":76458772,"comment_id":134819230,"body_markdown":"As @KJ said, the linked document simply contains links in the footnote plain text. Those are going to be quite tricky to parse out with regex such that they will be valid links because they cross line boundaries","body":"As @KJ said, the linked document simply contains links in the footnote plain text. Those are going to be quite tricky to parse out with regex such that they will be valid links because they cross line boundaries"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686627137,"post_id":76458772,"comment_id":134821310,"body_markdown":"@KJ Manual changes is not possible, I have lot of pdf with me. Whatever you edited that i expect from coding","body":"@KJ Manual changes is not possible, I have lot of pdf with me. Whatever you edited that i expect from coding"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686647102,"post_id":76458772,"comment_id":134824178,"body_markdown":"This is the sort of problem you face: `https://$www.sec.gov/news/speech/spch120604rjc.htm$3` where I mark the line breaks by `$`. Multiline matching will give you the www joined correctly, but will *in* correctly give you the &#39;3&#39; (which is there to denote a new bulletpoint in the footnotes) joined on to the url. Endings of urls are super-arbitrary and can contain mostly anything apart from the space character","body":"This is the sort of problem you face: <code>https:&#47;&#47;$www.sec.gov&#47;news&#47;speech&#47;spch120604rjc.htm$3</code> where I mark the line breaks by <code>$</code>. Multiline matching will give you the www joined correctly, but will <i>in</i> correctly give you the &#39;3&#39; (which is there to denote a new bulletpoint in the footnotes) joined on to the url. Endings of urls are super-arbitrary and can contain mostly anything apart from the space character"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686656566,"post_id":76458772,"comment_id":134826179,"body_markdown":"*but I think that specific was not a great problem that actual entry works as www.sec.gov/news/speech/spch120604rjc.htm* Well, you and I know what the link *should* be, but the machine doesn&#39;t and the fact is that it *is broken*. That just happens to be the first one I noticed as problematic. Then you&#39;ve got the problem (especially with old documents) that even when the machine gets it right, some links will be broken","body":"<i>but I think that specific was not a great problem that actual entry works as www.sec.gov/news/speech/spch120604rjc.htm</i> Well, you and I know what the link <i>should</i> be, but the machine doesn&#39;t and the fact is that it <i>is broken</i>. That just happens to be the first one I noticed as problematic. Then you&#39;ve got the problem (especially with old documents) that even when the machine gets it right, some links will be broken"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686661648,"post_id":76458772,"comment_id":134827358,"body_markdown":"I am worried about accoutingresearchmanger.com related urls @KJ","body":"I am worried about accoutingresearchmanger.com related urls @KJ"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686661714,"post_id":76458772,"comment_id":134827369,"body_markdown":"I have lot of links, I just shared one pdf, mostly you can focus on accounting* related urls @g00se","body":"I have lot of links, I just shared one pdf, mostly you can focus on accounting* related urls @g00se"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686661839,"post_id":76458772,"comment_id":134827394,"body_markdown":"Can we read para to para and can able to replace para to para? if Yes then we can add custom logic, Somehow to achieve this task, But i dont want to loose formatting and images","body":"Can we read para to para and can able to replace para to para? if Yes then we can add custom logic, Somehow to achieve this task, But i dont want to loose formatting and images"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1686661966,"post_id":76458772,"comment_id":134827437,"body_markdown":"This task can only be partially automated. All the broken links are going to have to be given to a *person* to sort out","body":"This task can only be partially automated. All the broken links are going to have to be given to a <i>person</i> to sort out"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686664159,"post_id":76458772,"comment_id":134827990,"body_markdown":"There will undoubtedly be lots of application-specific ops related to urls. The relevant thing here is that specific api sees *no links* in that document so effectively they are plain text. No automation would be necessary at all, presumably, if they all worked","body":"There will undoubtedly be lots of application-specific ops related to urls. The relevant thing here is that specific api sees <i>no links</i> in that document so effectively they are plain text. No automation would be necessary at all, presumably, if they all worked"},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686684173,"post_id":76458772,"comment_id":134832379,"body_markdown":"I dont have common same url at one place, based on url, I want to caluclate id and new domain have different id, so that id i can pick from server and create new url","body":"I dont have common same url at one place, based on url, I want to caluclate id and new domain have different id, so that id i can pick from server and create new url"},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1686733139,"post_id":76458772,"comment_id":134838353,"body_markdown":"I just had a look at the document and have to confirm what KJ and g00se  already said - the URLs are not marked as such in any way, neither using tags nor by special styles. There is no clear way to automatically determine where the URL ends. But I think it would be possible to implement an URL editor working for this and very similar documents (as long as the replacement URLs are not longer in print than the current ones). But you say you have thousands of documents to edit. If they are similar (not only on screen but also internally) to your example, creating such an editor may make sense.","body":"I just had a look at the document and have to confirm what KJ and g00se  already said - the URLs are not marked as such in any way, neither using tags nor by special styles. There is no clear way to automatically determine where the URL ends. But I think it would be possible to implement an URL editor working for this and very similar documents (as long as the replacement URLs are not longer in print than the current ones). But you say you have thousands of documents to edit. If they are similar (not only on screen but also internally) to your example, creating such an editor may make sense."},{"owner":{"account_id":1916831,"reputation":91511,"user_id":1729265,"display_name":"mkl"},"score":1,"creation_date":1686733507,"post_id":76458772,"comment_id":134838433,"body_markdown":"But even then you should have someone verifying the outputs unless a certain error rate is acceptable.","body":"But even then you should have someone verifying the outputs unless a certain error rate is acceptable."},{"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"score":0,"creation_date":1686744875,"post_id":76458772,"comment_id":134840813,"body_markdown":"and I saw above code not work for footer link replacement","body":"and I saw above code not work for footer link replacement"}],"owner":{"account_id":6597633,"reputation":6391,"user_id":5096868,"accept_rate":18,"display_name":"Yogesh Rathi"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":86,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686639655,"creation_date":1686588813,"question_id":76458772,"body_markdown":"I have one pdf file that have lot of links inside pdf, But those not annoted properly, And my organization going to release new website, So I want to collect all links from old domain and want to replace with new domain\r\n\r\nTried this code to collect all links from pdf\r\n\r\n    public void parsePdf(final Path path) {\r\n\t\ttry (PDDocument document = PDDocument.load(Files.newInputStream(path))) {\r\n\t\t\tfor (PDPage pdPage : document.getPages()) {\r\n\t\t\t\tpdPage.getAnnotations()\r\n\t\t\t\t\t.stream()\r\n\t\t\t\t\t.filter(annotation -&gt; annotation instanceof PDAnnotationLink)\r\n\t\t\t\t\t.map(annotation -&gt; (PDAnnotationLink) annotation)\r\n\t\t\t\t\t.map(PDAnnotationLink::getAction)\r\n\t\t\t\t\t.filter(action -&gt; action instanceof PDActionURI)\r\n\t\t\t\t\t.forEach(action -&gt; {\r\n\t\t\t\t\t\tSystem.out.println(((PDActionURI) action).getURI());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t}\r\n\t\t\tdocument.setAllSecurityToBeRemoved(true);\r\n\t\t\tdocument.save(path.toFile());\r\n\t\t}\r\n\t}\r\n\r\nI am unable to collect any link, I tried with TextStrip it works to retrieve link\r\n\r\n            PDDocument document = PDDocument.load(Path.of(path.toString()).toFile());\r\n\t\t\tPDFTextStripper textStripper = new PDFTextStripper();\r\n\t\t\ttextStripper.setLineSeparator(&quot;\\n&quot;);\r\n\r\n\t\t\tString textContent = textStripper.getText(document);\r\n\r\n\t\t\t// Use regular expression to find URLs in the text content, accounting for multi-line URLs\r\n\t\t\tString urlRegex = &quot;(?:http[s]?://|www\\\\.)[\\\\S\\\\n]+&quot;;\r\n\t\t\tPattern pattern = Pattern.compile(urlRegex);\r\n\t\t\tMatcher matcher = pattern.matcher(textContent);\r\n\r\n\t\t\twhile (matcher.find()) {\r\n\t\t\t\tString url = matcher.group().replaceAll(&quot;\\\\n&quot;, &quot;&quot;); // Remove line breaks from the matched URL\r\n\t\t\t\tSystem.out.println(url);\r\n\t\t\t\ttextContent.replaceAll(url,&quot;test.com&quot;);\r\n\t\t\t}\r\nBut not able to update that location. Some of the links pattern to detect because somewhere added &#39;\\n&#39; or space.\r\n\r\nMy pdf contains images as well, So I dont want to loose anything, So is there any way to detect and repalce the link which is not annoted.\r\n\r\nMaven Dependency\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n       &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n       &lt;version&gt;${pdfbox.version}&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nFeel free to comment any input required from my side and ofcourse thank you !","title":"Unable to replace url from string content org.apache.pdfbox","body":"<p>I have one pdf file that have lot of links inside pdf, But those not annoted properly, And my organization going to release new website, So I want to collect all links from old domain and want to replace with new domain</p>\n<p>Tried this code to collect all links from pdf</p>\n<pre><code>public void parsePdf(final Path path) {\n    try (PDDocument document = PDDocument.load(Files.newInputStream(path))) {\n        for (PDPage pdPage : document.getPages()) {\n            pdPage.getAnnotations()\n                .stream()\n                .filter(annotation -&gt; annotation instanceof PDAnnotationLink)\n                .map(annotation -&gt; (PDAnnotationLink) annotation)\n                .map(PDAnnotationLink::getAction)\n                .filter(action -&gt; action instanceof PDActionURI)\n                .forEach(action -&gt; {\n                    System.out.println(((PDActionURI) action).getURI());\n                    }\n                );\n        }\n        document.setAllSecurityToBeRemoved(true);\n        document.save(path.toFile());\n    }\n}\n</code></pre>\n<p>I am unable to collect any link, I tried with TextStrip it works to retrieve link</p>\n<pre><code>        PDDocument document = PDDocument.load(Path.of(path.toString()).toFile());\n        PDFTextStripper textStripper = new PDFTextStripper();\n        textStripper.setLineSeparator(&quot;\\n&quot;);\n\n        String textContent = textStripper.getText(document);\n\n        // Use regular expression to find URLs in the text content, accounting for multi-line URLs\n        String urlRegex = &quot;(?:http[s]?://|www\\\\.)[\\\\S\\\\n]+&quot;;\n        Pattern pattern = Pattern.compile(urlRegex);\n        Matcher matcher = pattern.matcher(textContent);\n\n        while (matcher.find()) {\n            String url = matcher.group().replaceAll(&quot;\\\\n&quot;, &quot;&quot;); // Remove line breaks from the matched URL\n            System.out.println(url);\n            textContent.replaceAll(url,&quot;test.com&quot;);\n        }\n</code></pre>\n<p>But not able to update that location. Some of the links pattern to detect because somewhere added '\\n' or space.</p>\n<p>My pdf contains images as well, So I dont want to loose anything, So is there any way to detect and repalce the link which is not annoted.</p>\n<p>Maven Dependency</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n   &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n   &lt;version&gt;${pdfbox.version}&lt;/version&gt;\n&lt;/dependency&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Feel free to comment any input required from my side and ofcourse thank you !</p>\n"},{"tags":["java","android","android-studio","bluetooth","bluetooth-lowenergy"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1686810062,"post_id":76459289,"comment_id":134850887,"body_markdown":"Looks like you are confusing things. It is not the device object itself which is null but its name property. When you detect a device which has no name or an empty string just display it as *Unknown* or *Unnamed*.","body":"Looks like you are confusing things. It is not the device object itself which is null but its name property. When you detect a device which has no name or an empty string just display it as <i>Unknown</i> or <i>Unnamed</i>."},{"owner":{"account_id":21973697,"reputation":336,"user_id":16249829,"display_name":"TheBestPlayer"},"score":0,"creation_date":1686814549,"post_id":76459289,"comment_id":134851725,"body_markdown":"You are right. Thanks","body":"You are right. Thanks"}],"answers":[{"tags":[],"owner":{"account_id":11064381,"reputation":1063,"user_id":8124605,"display_name":"Risto"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686639592,"creation_date":1686639592,"answer_id":76462368,"question_id":76459289,"body_markdown":"A Bluetooth LE device can transmit its name in the advertisement message, but it does not have to. If &quot;DEVICE NAME&quot; is null, use &quot;DEVICE MAC&quot; instead.","title":"BA.startDiscovery() returns &quot;null&quot; for some device names","body":"<p>A Bluetooth LE device can transmit its name in the advertisement message, but it does not have to. If &quot;DEVICE NAME&quot; is null, use &quot;DEVICE MAC&quot; instead.</p>\n"}],"owner":{"account_id":21973697,"reputation":336,"user_id":16249829,"display_name":"TheBestPlayer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462368,"answer_count":1,"score":0,"last_activity_date":1686639592,"creation_date":1686593718,"question_id":76459289,"body_markdown":"I am a beginner Android App programmer and I am working on BLE app to communicate with the microcontroller (ESP32).\r\n\r\nI have managed to get the APP going (enabling the BLE and Location permissions) and got to the point where I am able to scan nearby BLE devices.\r\n\r\nI have noticed that when I start discovering nearby BLE devices, some devices are detected as &quot;null&quot;\r\n\r\nThe debug logs when I click &quot;SCAN&quot; button:\r\n```\r\nE/SCAN&#160;BUTTON: Clicked \r\nE/CHECK: CHECKING LOCATION PERMISSION \r\nE/INFO: LOCATION PERMISSION ALREADY GRANTED: \r\nE/INFO: LOCATION PERMISSION IS OK, START BLE DISCOVERY \r\nI/BluetoothAdapter: startDiscovery\r\nE/CALLBACK: onReceive\r\nE/BroadcastReceiver: SCANNING IN PROGRESS\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = DESKTOP-KPO80BS\r\nI/System.out: DEVICE MAC FOUND = 64:6E:69:78:B9:54\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = null\r\nI/System.out: DEVICE MAC FOUND = 5E:52:CD:CD:EB:EA\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = [LG] webOS TV UP75003LF\r\nI/System.out: DEVICE MAC FOUND = 4C:BC:E9:4E:62:17\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = null\r\nI/System.out: DEVICE MAC FOUND = 7F:CA:0B:28:8E:86\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = CGATES-DV8947\r\nI/System.out: DEVICE MAC FOUND = 10:76:36:B5:7C:A4\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = [LG] webOS TV UP75003LF\r\nI/System.out: DEVICE MAC FOUND = 7C:5E:DC:65:EB:E9\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = JBL Bar 5.1_5883\r\nI/System.out: DEVICE MAC FOUND = 7E:96:FC:6A:9F:A9\r\nE/CALLBACK: onReceive\r\nI/System.out: DEVICE NAME FOUND = null\r\nI/System.out: DEVICE MAC FOUND = 4E:AE:EC:2B:D9:52\r\nE/CALLBACK: onReceive\r\nE/BroadcastReceiver: DISCOVERY FINISHED \r\n```\r\n\r\nHow it looks on my phone (Simulating on my Physical Samsung Flip 2).\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/pQFWE.png\r\n\r\n\r\n\r\nMy build. gradle (Here you can see the target SDK and minSDK:\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.location_test_v2&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.location_test_v2&quot;\r\n        minSdk 25\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &quot;androidx.fragment:fragment:1.5.6&quot;\r\n    implementation &quot;androidx.activity:activity:1.7.0&quot;\r\n    implementation &#39;androidx.appcompat:appcompat:1.6.1&#39;\r\n    implementation &#39;com.google.android.material:material:1.8.0&#39;\r\n    implementation &#39;androidx.constraintlayout:constraintlayout:2.1.4&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.ext:junit:1.1.5&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n}\r\n\r\nconfigurations.implementation {\r\n    exclude group: &#39;org.jetbrains.kotlin&#39;, module: &#39;kotlin-stdlib-jdk8&#39;\r\n}\r\n``` \r\n\r\n\r\nThe callback function that is being executed when I call BA.startDiscovery() : \r\n```\r\n    private final BroadcastReceiver devicesFoundReceiver = new BroadcastReceiver() {\r\n        public void onReceive(Context context, Intent intent) {\r\n            Log.e(&quot;CALLBACK&quot;, &quot;onReceive&quot;);\r\n            String action = intent.getAction();\r\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n\r\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                String deviceName = device.getName();\r\n                String deviceHardwareAddress = device.getAddress(); // MAC address\r\n\r\n                //Log.e(&quot;BroadcastReceiver&quot;, &quot;DEVICE FOUND: &quot;,deviceName);\r\n                System.out.print(&quot;DEVICE NAME FOUND = &quot;);\r\n                System.out.println(deviceName);\r\n                System.out.print(&quot;DEVICE MAC FOUND = &quot;);\r\n                System.out.println(deviceHardwareAddress);\r\n                list.add(deviceName);\r\n                \r\n            }\r\n            else if(BA.ACTION_DISCOVERY_FINISHED.equals(action)){\r\n                Log.e(&quot;BroadcastReceiver&quot;, &quot;DISCOVERY FINISHED &quot;);\r\n                ArrayAdapter adapter = new ArrayAdapter(MainActivity.this, android.R.layout.simple_list_item_1,list);\r\n                listview.setAdapter(adapter);\r\n            }\r\n            else if(BA.ACTION_DISCOVERY_STARTED.equals(action)){\r\n                listview.setAdapter(null);\r\n                Log.e(&quot;BroadcastReceiver&quot;, &quot;SCANNING IN PROGRESS&quot;);\r\n            }\r\n        }\r\n    };\r\n```\r\n\r\n\r\n\r\n\r\nI have found some other people complaining about this but no clear solution has been provided:\r\nhttps://issuetracker.google.com/issues/240485116\r\n\r\nI hope to get some advice regarding how to handle this. Thanks in advance.","title":"BA.startDiscovery() returns &quot;null&quot; for some device names","body":"<p>I am a beginner Android App programmer and I am working on BLE app to communicate with the microcontroller (ESP32).</p>\n<p>I have managed to get the APP going (enabling the BLE and Location permissions) and got to the point where I am able to scan nearby BLE devices.</p>\n<p>I have noticed that when I start discovering nearby BLE devices, some devices are detected as &quot;null&quot;</p>\n<p>The debug logs when I click &quot;SCAN&quot; button:</p>\n<pre><code>E/SCAN BUTTON: Clicked \nE/CHECK: CHECKING LOCATION PERMISSION \nE/INFO: LOCATION PERMISSION ALREADY GRANTED: \nE/INFO: LOCATION PERMISSION IS OK, START BLE DISCOVERY \nI/BluetoothAdapter: startDiscovery\nE/CALLBACK: onReceive\nE/BroadcastReceiver: SCANNING IN PROGRESS\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = DESKTOP-KPO80BS\nI/System.out: DEVICE MAC FOUND = 64:6E:69:78:B9:54\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = null\nI/System.out: DEVICE MAC FOUND = 5E:52:CD:CD:EB:EA\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = [LG] webOS TV UP75003LF\nI/System.out: DEVICE MAC FOUND = 4C:BC:E9:4E:62:17\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = null\nI/System.out: DEVICE MAC FOUND = 7F:CA:0B:28:8E:86\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = CGATES-DV8947\nI/System.out: DEVICE MAC FOUND = 10:76:36:B5:7C:A4\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = [LG] webOS TV UP75003LF\nI/System.out: DEVICE MAC FOUND = 7C:5E:DC:65:EB:E9\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = JBL Bar 5.1_5883\nI/System.out: DEVICE MAC FOUND = 7E:96:FC:6A:9F:A9\nE/CALLBACK: onReceive\nI/System.out: DEVICE NAME FOUND = null\nI/System.out: DEVICE MAC FOUND = 4E:AE:EC:2B:D9:52\nE/CALLBACK: onReceive\nE/BroadcastReceiver: DISCOVERY FINISHED \n</code></pre>\n<p>How it looks on my phone (Simulating on my Physical Samsung Flip 2).\n<a href=\"https://i.stack.imgur.com/pQFWE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pQFWE.png\" alt=\"enter image description here\" /></a></p>\n<p>My build. gradle (Here you can see the target SDK and minSDK:</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example.location_test_v2'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.location_test_v2&quot;\n        minSdk 25\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation &quot;androidx.fragment:fragment:1.5.6&quot;\n    implementation &quot;androidx.activity:activity:1.7.0&quot;\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n\nconfigurations.implementation {\n    exclude group: 'org.jetbrains.kotlin', module: 'kotlin-stdlib-jdk8'\n}\n</code></pre>\n<p>The callback function that is being executed when I call BA.startDiscovery() :</p>\n<pre><code>    private final BroadcastReceiver devicesFoundReceiver = new BroadcastReceiver() {\n        public void onReceive(Context context, Intent intent) {\n            Log.e(&quot;CALLBACK&quot;, &quot;onReceive&quot;);\n            String action = intent.getAction();\n            if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n\n                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                String deviceName = device.getName();\n                String deviceHardwareAddress = device.getAddress(); // MAC address\n\n                //Log.e(&quot;BroadcastReceiver&quot;, &quot;DEVICE FOUND: &quot;,deviceName);\n                System.out.print(&quot;DEVICE NAME FOUND = &quot;);\n                System.out.println(deviceName);\n                System.out.print(&quot;DEVICE MAC FOUND = &quot;);\n                System.out.println(deviceHardwareAddress);\n                list.add(deviceName);\n                \n            }\n            else if(BA.ACTION_DISCOVERY_FINISHED.equals(action)){\n                Log.e(&quot;BroadcastReceiver&quot;, &quot;DISCOVERY FINISHED &quot;);\n                ArrayAdapter adapter = new ArrayAdapter(MainActivity.this, android.R.layout.simple_list_item_1,list);\n                listview.setAdapter(adapter);\n            }\n            else if(BA.ACTION_DISCOVERY_STARTED.equals(action)){\n                listview.setAdapter(null);\n                Log.e(&quot;BroadcastReceiver&quot;, &quot;SCANNING IN PROGRESS&quot;);\n            }\n        }\n    };\n</code></pre>\n<p>I have found some other people complaining about this but no clear solution has been provided:\n<a href=\"https://issuetracker.google.com/issues/240485116\" rel=\"nofollow noreferrer\">https://issuetracker.google.com/issues/240485116</a></p>\n<p>I hope to get some advice regarding how to handle this. Thanks in advance.</p>\n"},{"tags":["java","database","oracle","jdbc","metadata"],"answers":[{"tags":[],"owner":{"account_id":1001733,"reputation":34918,"user_id":1016435,"display_name":"xQbert"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1322575717,"creation_date":1322575717,"answer_id":8312108,"question_id":8311898,"body_markdown":"Oracle:\r\n\r\n    Select * from dictionary \r\n\r\nReturns many system tables/functions you have access to which contain valuable structure information.\r\n\r\nin that list you will see\r\n\r\n`Select * from ALL_Views` (which contains the source SQL for the view) which could be parsed for table names.\r\n\r\nThough I think there&#39;s an all_Dependencies or all_References view that will contain required references to tables in seperate fields which would be easier to parse I&#39;m looking for that now...\r\n\r\n`Select * from All_dependencies WHERE Name = &#39;YOUR_VIEWNAME&#39; and Referenced_Type=&#39;TABLE&#39;` will return all referenced tables.\r\n\r\nThough I&#39;m not sure how those features work with Linked tables. so if you&#39;re referencing external tables though a linked server... those features may not work.","title":"How to get VIEW references (base tables) through JDBC?","body":"<p>Oracle:</p>\n\n<pre><code>Select * from dictionary \n</code></pre>\n\n<p>Returns many system tables/functions you have access to which contain valuable structure information.</p>\n\n<p>in that list you will see</p>\n\n<p><code>Select * from ALL_Views</code> (which contains the source SQL for the view) which could be parsed for table names.</p>\n\n<p>Though I think there's an all_Dependencies or all_References view that will contain required references to tables in seperate fields which would be easier to parse I'm looking for that now...</p>\n\n<p><code>Select * from All_dependencies WHERE Name = 'YOUR_VIEWNAME' and Referenced_Type='TABLE'</code> will return all referenced tables.</p>\n\n<p>Though I'm not sure how those features work with Linked tables. so if you're referencing external tables though a linked server... those features may not work.</p>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1686639424,"creation_date":1322577138,"answer_id":8312491,"question_id":8311898,"body_markdown":"As far as I know there is no JDBC specific way to retrieve this information: you will need to dive into your database specific system tables and see if that information is available.\r\n\r\nThe rest of this answer describes how to retrieves view and does not answer the question:\r\n\r\n[DatabaseMetaData#getTables()][1] with type &quot;VIEW&quot;\r\n\r\nFor example\r\n\r\n    dmd.getTables(catalog, schema, &quot;%&quot;, new String[] {&quot;VIEW&quot;});\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29","title":"How to get VIEW references (base tables) through JDBC?","body":"<p>As far as I know there is no JDBC specific way to retrieve this information: you will need to dive into your database specific system tables and see if that information is available.</p>\n<p>The rest of this answer describes how to retrieves view and does not answer the question:</p>\n<p><a href=\"http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29\" rel=\"nofollow noreferrer\">DatabaseMetaData#getTables()</a> with type &quot;VIEW&quot;</p>\n<p>For example</p>\n<pre><code>dmd.getTables(catalog, schema, &quot;%&quot;, new String[] {&quot;VIEW&quot;});\n</code></pre>\n"}],"owner":{"account_id":297284,"reputation":1700,"user_id":602719,"accept_rate":100,"display_name":"lunicon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6429,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":8312108,"answer_count":2,"score":3,"last_activity_date":1686639424,"creation_date":1322574807,"question_id":8311898,"body_markdown":"When I create VIEW, database engine pases my query and store it some how. Can I then find out what tables are used by one view? I understand that different databases may be differently. May have some sort of level of abstraction throw JDBC.\r\n\r\nSomething tells me that this is done through getTables(?):\r\n\r\n    Connection con = DriverManager.getConnection(DBURL, DBUSER, DBPASS);\t\t\r\n    DatabaseMetaData md = con.getMetaData();\r\n    md.getTables(null, null, null, null);\r\n\r\nIf it can not be. Are there solution in particular for Oracle database (like view/referenses in plsql developer)?","title":"How to get VIEW references (base tables) through JDBC?","body":"<p>When I create VIEW, database engine pases my query and store it some how. Can I then find out what tables are used by one view? I understand that different databases may be differently. May have some sort of level of abstraction throw JDBC.</p>\n\n<p>Something tells me that this is done through getTables(?):</p>\n\n<pre><code>Connection con = DriverManager.getConnection(DBURL, DBUSER, DBPASS);        \nDatabaseMetaData md = con.getMetaData();\nmd.getTables(null, null, null, null);\n</code></pre>\n\n<p>If it can not be. Are there solution in particular for Oracle database (like view/referenses in plsql developer)?</p>\n"},{"tags":["java","android","twilio","sms","api-gateway"],"answers":[{"tags":[],"owner":{"account_id":4723783,"reputation":2524,"user_id":3821022,"display_name":"IObert"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686639335,"creation_date":1686639335,"answer_id":76462341,"question_id":76460237,"body_markdown":"No, this is not possible. If you wish to use the number that was previous &quot;on&quot; your SIM card, you can request to [port this number to Twilio](https://support.twilio.com/hc/en-us/articles/223179348-Porting-a-Phone-Number-to-Twilio).\r\n\r\nWhile it&#39;s possible to make calls from [verified numbers](https://support.twilio.com/hc/en-us/articles/223135427-What-s-the-Difference-Between-a-Verified-Phone-Number-and-a-Twilio-Phone-Number-#:~:text=Capabilities%3A%20Verified%20phone%20numbers%20can,route%20through%20your%20original%20provider.), it&#39;s not possible to send SMS from these sender IDs.","title":"Use Twilio as a SMS gateway to SIM on a phone?","body":"<p>No, this is not possible. If you wish to use the number that was previous &quot;on&quot; your SIM card, you can request to <a href=\"https://support.twilio.com/hc/en-us/articles/223179348-Porting-a-Phone-Number-to-Twilio\" rel=\"nofollow noreferrer\">port this number to Twilio</a>.</p>\n<p>While it's possible to make calls from <a href=\"https://support.twilio.com/hc/en-us/articles/223135427-What-s-the-Difference-Between-a-Verified-Phone-Number-and-a-Twilio-Phone-Number-#:%7E:text=Capabilities%3A%20Verified%20phone%20numbers%20can,route%20through%20your%20original%20provider.\" rel=\"nofollow noreferrer\">verified numbers</a>, it's not possible to send SMS from these sender IDs.</p>\n"}],"owner":{"account_id":28775096,"reputation":5,"user_id":22063140,"display_name":"Nicholas Saunders"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76462341,"answer_count":1,"score":0,"last_activity_date":1686639335,"creation_date":1686602977,"question_id":76460237,"body_markdown":"In the [broader context](https://stackoverflow.com/q/2570410/22063140) of sending SMS with Java, can Twilio be used to send messages from the same phone number as is on the SIM chip on a physical phone?\r\n\r\nSomething along the lines of https://sms.ilpostino.com.ar/ in SMS functionality, where there&#39;s a corresponding app so that the phone itself is used as a gateway.\r\n\r\n\r\n\r\n\r\nTwilio seems to be [strictly ](https://stackoverflow.com/q/26011313/22063140)an API.","title":"Use Twilio as a SMS gateway to SIM on a phone?","body":"<p>In the <a href=\"https://stackoverflow.com/q/2570410/22063140\">broader context</a> of sending SMS with Java, can Twilio be used to send messages from the same phone number as is on the SIM chip on a physical phone?</p>\n<p>Something along the lines of <a href=\"https://sms.ilpostino.com.ar/\" rel=\"nofollow noreferrer\">https://sms.ilpostino.com.ar/</a> in SMS functionality, where there's a corresponding app so that the phone itself is used as a gateway.</p>\n<p>Twilio seems to be <a href=\"https://stackoverflow.com/q/26011313/22063140\">strictly </a>an API.</p>\n"},{"tags":["java","mysql","swing","jdbc","mssql-jdbc"],"comments":[{"owner":{"account_id":969721,"reputation":344508,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1686639464,"post_id":76462222,"comment_id":134822636,"body_markdown":"Make sure the mysql driver jar file is available to in your &quot;referenced libraries&quot; - [for example](https://stackoverflow.com/questions/50232557/visual-studio-code-java-extension-how-to-add-a-jar-to-classpath)","body":"Make sure the mysql driver jar file is available to in your &quot;referenced libraries&quot; - <a href=\"https://stackoverflow.com/questions/50232557/visual-studio-code-java-extension-how-to-add-a-jar-to-classpath\">for example</a>"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686639717,"post_id":76462222,"comment_id":134822672,"body_markdown":"If you&#39;re using [tag:mysql], why did you also tag [tag:mssql-jdbc] which is for the JDBC driver of Microsoft SQL Server, an entirely different DBMS?","body":"If you&#39;re using <a href=\"https://stackoverflow.com/questions/tagged/mysql\">mysql</a>, why did you also tag <a href=\"https://stackoverflow.com/questions/tagged/mssql-jdbc\">mssql-jdbc</a> which is for the JDBC driver of Microsoft SQL Server, an entirely different DBMS?"},{"owner":{"account_id":5075297,"reputation":1212,"user_id":4072831,"accept_rate":62,"display_name":"Sandeep"},"score":0,"creation_date":1686639719,"post_id":76462222,"comment_id":134822673,"body_markdown":"Are you sure you are using correct tables? you query is `insert into student` and table in screenshot which you included is named studentDetails","body":"Are you sure you are using correct tables? you query is <code>insert into student</code> and table in screenshot which you included is named studentDetails"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1686640057,"post_id":76462222,"comment_id":134822735,"body_markdown":"Wait, what? Title: &quot;*despite no errors*&quot; but in very first sentence: &quot;*`java.lang.ClassNotFoundException` error with the message `com.mysql.cj.jdbc.Driver` when attempting to run*&quot;, on next sentence &quot;*runs without any errors*&quot;, later on &quot;***Error and excception while I run the code***&quot; with stack trace ??!!","body":"Wait, what? Title: &quot;<i>despite no errors</i>&quot; but in very first sentence: &quot;<i><code>java.lang.ClassNotFoundException</code> error with the message <code>com.mysql.cj.jdbc.Driver</code> when attempting to run</i>&quot;, on next sentence &quot;<i>runs without any errors</i>&quot;, later on &quot;<b><i>Error and excception while I run the code</i></b>&quot; with stack trace ??!!"},{"owner":{"account_id":20922168,"reputation":1,"user_id":15370507,"display_name":"Nil65"},"score":0,"creation_date":1686640682,"post_id":76462222,"comment_id":134822873,"body_markdown":"I&#39;m glad to inform you that I have resolved the issue I was facing with my Java code for data insertion into a MySQL database. It turns out that the problem was due to a mistake in specifying the table name.","body":"I&#39;m glad to inform you that I have resolved the issue I was facing with my Java code for data insertion into a MySQL database. It turns out that the problem was due to a mistake in specifying the table name."},{"owner":{"account_id":20922168,"reputation":1,"user_id":15370507,"display_name":"Nil65"},"score":0,"creation_date":1686640888,"post_id":76462222,"comment_id":134822914,"body_markdown":"I&#39;m still experiencing the java.lang.ClassNotFoundException error with the message &quot;com.mysql.cj.jdbc.Driver&quot; when running my Java code using the VS Code Code Runner extension. Despite resolving the issue related to the incorrect table name, the driver class error persists. \n\nThe code compiles and runs without any issues when executed through the regular &quot;Run Java&quot; command.\nHowever, when I try to run the code using the Code Runner extension, I encounter the ClassNotFoundException for the com.mysql.cj.jdbc.Driver class.","body":"I&#39;m still experiencing the java.lang.ClassNotFoundException error with the message &quot;com.mysql.cj.jdbc.Driver&quot; when running my Java code using the VS Code Code Runner extension. Despite resolving the issue related to the incorrect table name, the driver class error persists.   The code compiles and runs without any issues when executed through the regular &quot;Run Java&quot; command. However, when I try to run the code using the Code Runner extension, I encounter the ClassNotFoundException for the com.mysql.cj.jdbc.Driver class."},{"owner":{"account_id":18991005,"reputation":1312,"user_id":13860286,"display_name":"Shila Mosammami"},"score":0,"creation_date":1686641710,"post_id":76462222,"comment_id":134823070,"body_markdown":"Are you using the correct classpath?","body":"Are you using the correct classpath?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686646489,"post_id":76462222,"comment_id":134824030,"body_markdown":"You [don&#39;t need](https://www.baeldung.com/java-jdbc-loading-drivers) `Class.forName` unless you have a dated version of your driver. Strangely (I think) that&#39;s not the right class name anyway. Also [avoid null layouts](https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing)","body":"You <a href=\"https://www.baeldung.com/java-jdbc-loading-drivers\" rel=\"nofollow noreferrer\">don&#39;t need</a> <code>Class.forName</code> unless you have a dated version of your driver. Strangely (I think) that&#39;s not the right class name anyway. Also <a href=\"https://technojeeves.com/index.php/aliasjava1/114-avoid-null-layouts-in-swing\" rel=\"nofollow noreferrer\">avoid null layouts</a>"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686647245,"post_id":76462222,"comment_id":134824209,"body_markdown":"@g00se Since MySQL Connector/J 8, `com.mysql.cj.jdbc.Driver` is the correct class name (it still supports loading `com.mysql.jdbc.Driver` for backwards compatibility).","body":"@g00se Since MySQL Connector/J 8, <code>com.mysql.cj.jdbc.Driver</code> is the correct class name (it still supports loading <code>com.mysql.jdbc.Driver</code> for backwards compatibility)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686647734,"post_id":76462222,"comment_id":134824314,"body_markdown":"My memory could be playing tricks here, but I seem to remember having had errors trying to load that class (unnecessarily like the OP) despite it being present and I *had* to load `com.mysql.jdbc.Driver`","body":"My memory could be playing tricks here, but I seem to remember having had errors trying to load that class (unnecessarily like the OP) despite it being present and I <i>had</i> to load <code>com.mysql.jdbc.Driver</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686648301,"post_id":76462222,"comment_id":134824446,"body_markdown":"Update: with connector-j 8.0.29 ... *Loading class `com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is `com.mysql.cj.jdbc.Driver&#39;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.* So it does work. Curiously, loading `com.mysql.cj.jdbc.Driver` produces no message telling you it&#39;s unnecessary ;)","body":"Update: with connector-j 8.0.29 ... <i>Loading class <code>com.mysql.jdbc.Driver&#39;. This is deprecated. The new driver class is </code>com.mysql.cj.jdbc.Driver&#39;. The driver is automatically registered via the SPI and manual loading of the driver class is generally unnecessary.</i> So it does work. Curiously, loading <code>com.mysql.cj.jdbc.Driver</code> produces no message telling you it&#39;s unnecessary ;)"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686656251,"post_id":76462222,"comment_id":134826115,"body_markdown":"@g00se The warning means that loading or using `com.mysql.jdbc.Driver` is deprecated (it is a subclass of `com.mysql.cj.jdbc.Driver` and the parent doesn&#39;t produce that warning); in addition it explains that manual loading is usually not necessary, because most code using `Class.forName(&quot;com.mysql.jdbc.Driver&quot;)` is likely cargo-culting it, so telling them they don&#39;t need to is a good thing. However, the SPI loader (ServiceLoader) **also** uses `Class.forName`, so writing a warning then is a bad idea and could lead to confusion.","body":"@g00se The warning means that loading or using <code>com.mysql.jdbc.Driver</code> is deprecated (it is a subclass of <code>com.mysql.cj.jdbc.Driver</code> and the parent doesn&#39;t produce that warning); in addition it explains that manual loading is usually not necessary, because most code using <code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;)</code> is likely cargo-culting it, so telling them they don&#39;t need to is a good thing. However, the SPI loader (ServiceLoader) <b>also</b> uses <code>Class.forName</code>, so writing a warning then is a bad idea and could lead to confusion."},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1686656314,"post_id":76462222,"comment_id":134826133,"body_markdown":"The service definition file for MySQL Connector/J 8 references com.mysql.cj.jdbc.Driver, which is why that class doesn&#39;t trigger the warning.","body":"The service definition file for MySQL Connector/J 8 references com.mysql.cj.jdbc.Driver, which is why that class doesn&#39;t trigger the warning."}],"answers":[{"tags":[],"owner":{"account_id":16588824,"reputation":1,"user_id":11987473,"display_name":"xiaoalex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686639162,"creation_date":1686639162,"answer_id":76462319,"question_id":76462222,"body_markdown":"make sure you have add the mysql Driver jar. Since you use reflection to load class Driver, it won&#39;t prompt errors when compiling.Only when the code is running to the process of loading class Driver, errors merge.","title":"Java code not inserting data into MySQL database despite no errors","body":"<p>make sure you have add the mysql Driver jar. Since you use reflection to load class Driver, it won't prompt errors when compiling.Only when the code is running to the process of loading class Driver, errors merge.</p>\n"}],"owner":{"account_id":20922168,"reputation":1,"user_id":15370507,"display_name":"Nil65"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686639162,"creation_date":1686638182,"question_id":76462222,"body_markdown":"I am facing a `java.lang.ClassNotFoundException` error with the message `com.mysql.cj.jdbc.Driver` when attempting to run my Java code for data insertion into a MySQL database. Surprisingly, the code compiles and runs without any errors, but the data is not being inserted into the database. Here&#39;s an overview of the issue:\r\n\r\n- I&#39;m using Java and JDBC to connect to a MySQL database and insert data into a table.\r\n- I have made sure to include the MySQL JDBC driver JAR file in my project&#39;s classpath.\r\n- When I run the code, I encounter the mentioned ClassNotFoundException error for the `com.mysql.cj.jdbc.Driver` class.\r\n- However, if I only compile the code without running it, there are no errors.\r\n- Despite the successful compilation, the data is not getting inserted into the database.\r\n\r\n## **Here&#39;s a snippet of the code where I connect the JDBC:**\r\n\r\n```\r\nimport java.sql.*;\r\npublic class Conn {\r\n    /*\r\n     * JDBC Connection has 4 Stages\r\n     *  (1)-Register the Driver Class\r\n     *  (2)-Creating Connection String\r\n     *  (3)-Creating Statement\r\n     *  (4)-Executing MySQL Queries\r\n     *  (5)-Closing the Connection\r\n     */\r\n\r\n    Connection c; //reference variable\r\n    Statement s; //\r\n    Conn(){\r\n\r\n        try{\r\n            // (1)-Register the Driver Class\r\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\r\n            //Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\r\n            System.out.println(&quot;Driver Loaded&quot;);\r\n            // (2)-Creating Connection String\r\n            /*\r\n             * Connection String provides the information in which database you have connect\r\n             */\r\n            c= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/universitymanagementsystem&quot;,&quot;root&quot;, &quot;123456789&quot;);\r\n            System.out.println(&quot;Connection Established&quot;);\r\n            // (3)\r\n            s= c.createStatement();\r\n\r\n        }catch(Exception e){\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n    /*public static java.beans.Statement createStatement() {\r\n        return null;\r\n    }*/\r\n}\r\n\r\n```\r\n## **Here is the snippet of the code of AddStudent.java file**\r\n\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.util.*;\r\nimport java.awt.event.*;\r\nimport java.sql.*;\r\n//import com.toedter.calendar.JDateChooser;\r\n\r\npublic class AddStudent extends JFrame implements ActionListener {\r\n    JTextField tfname, tffname, tffaddress, tfphone, tfemail, tfX, tfXII, tfAdhar, tfdob;\r\n    JLabel labelrollno;\r\n    JComboBox&lt;String&gt; cbCourse, cbBranch;\r\n    JButton btnSubmit, btnCancel;\r\n    // JDateChooser dobChooser;\r\n    /*\r\n     * create a object for random class\r\n     * which create some random number for roll number\r\n     */\r\n\r\n    Random ran = new Random();\r\n    long first4 = Math.abs((ran.nextLong() % 9000L) + 1000L);\r\n\r\n    AddStudent() {\r\n\r\n        // for layout\r\n        setSize(900, 700);\r\n        setLocation(350, 50);\r\n        setLayout(null); // cause we want our own layout\r\n\r\n        // for heading\r\n        JLabel heading = new JLabel(&quot;New student Details&quot;);\r\n        heading.setBounds(310, 30, 500, 50);\r\n        heading.setFont(new Font(&quot;serif&quot;, Font.BOLD, 30));\r\n        add(heading);\r\n\r\n        // name label\r\n        JLabel labelName = new JLabel(&quot;Name&quot;);\r\n        labelName.setBounds(50, 150, 100, 30);\r\n        labelName.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelName);\r\n        // name input box\r\n        tfname = new JTextField();\r\n        tfname.setBounds(200, 150, 150, 30);\r\n        add(tfname);\r\n\r\n        // father name label\r\n        JLabel labelFName = new JLabel(&quot;Fathers Name&quot;);\r\n        labelFName.setBounds(400, 150, 200, 30);\r\n        labelFName.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelFName);\r\n        // father name input box\r\n        tffname = new JTextField();\r\n        tffname.setBounds(600, 150, 150, 30);\r\n        add(tffname);\r\n\r\n        // roll name label\r\n        JLabel lblRollNo = new JLabel(&quot;Roll Number&quot;);\r\n        lblRollNo.setBounds(50, 200, 200, 30);\r\n        lblRollNo.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(lblRollNo);\r\n        setVisible(true);\r\n\r\n        // roll nameinput box\r\n        labelrollno = new JLabel(&quot;1533&quot; + first4);\r\n        labelrollno.setBounds(200, 200, 200, 30);\r\n        labelrollno.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelrollno);\r\n        setVisible(true);\r\n\r\n        // date of birth\r\n        JLabel lblDob = new JLabel(&quot;Date of Birth&quot;);\r\n        lblDob.setBounds(400, 200, 200, 30);\r\n        lblDob.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(lblDob);\r\n\r\n        // date of birth input box\r\n        tfdob = new JTextField();\r\n        tfdob.setBounds(600, 200, 150, 30);\r\n        add(tfdob);\r\n\r\n        // date of birth input box\r\n        /*\r\n         * dobChooser = new JDateChooser();\r\n         * dobChooser.setBounds(600, 200, 150, 30);\r\n         * add(dobChooser);\r\n         */\r\n\r\n        // address label\r\n        JLabel labeladdress = new JLabel(&quot;Address Name&quot;);\r\n        labeladdress.setBounds(50, 250, 200, 30);\r\n        labeladdress.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labeladdress);\r\n        // address name input box\r\n        tffaddress = new JTextField();\r\n        tffaddress.setBounds(200, 250, 150, 30);\r\n        add(tffaddress);\r\n\r\n        // phone number label\r\n        JLabel labelPhone = new JLabel(&quot;Phone Number&quot;);\r\n        labelPhone.setBounds(400, 250, 200, 30);\r\n        labelPhone.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelPhone);\r\n        // phone number input box\r\n        tfphone = new JTextField();\r\n        tfphone.setBounds(600, 250, 150, 30);\r\n        add(tfphone);\r\n\r\n        // Email Id\r\n        JLabel labelemail = new JLabel(&quot;Email Id&quot;);\r\n        labelemail.setBounds(50, 300, 200, 30);\r\n        labelemail.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelemail);\r\n        // Email Id input box\r\n        tfemail = new JTextField();\r\n        tfemail.setBounds(200, 300, 150, 30);\r\n        add(tfemail);\r\n\r\n        // Class X label\r\n        JLabel labelX = new JLabel(&quot;Class X(%)&quot;);\r\n        labelX.setBounds(400, 300, 200, 30);\r\n        labelX.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelX);\r\n        // Class X input box\r\n        tfX = new JTextField();\r\n        tfX.setBounds(600, 300, 150, 30);\r\n        add(tfX);\r\n\r\n        // Class XII label\r\n        JLabel labelXII = new JLabel(&quot;Class XII(%)&quot;);\r\n        labelXII.setBounds(50, 350, 200, 30);\r\n        labelXII.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelXII);\r\n        // Class XII input box\r\n        tfXII = new JTextField();\r\n        tfXII.setBounds(200, 350, 150, 30);\r\n        add(tfXII);\r\n\r\n        // Adhar Number label\r\n        JLabel labelAdhar = new JLabel(&quot;Adhar Number&quot;);\r\n        labelAdhar.setBounds(400, 350, 200, 30);\r\n        labelAdhar.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelAdhar);\r\n        // Adhar Number input box\r\n        tfAdhar = new JTextField();\r\n        tfAdhar.setBounds(600, 350, 150, 30);\r\n        add(tfAdhar);\r\n\r\n        // dropdown for course\r\n        /*\r\n         * JLabel labelCourse = new JLabel(&quot;Course&quot;);\r\n         * labelCourse.setBounds(50, 400, 200, 30);\r\n         * labelCourse.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n         * add(labelCourse);\r\n         * String course[] = { &quot;B.Tech&quot;, &quot;M.Tech&quot;, &quot;BBA&quot;, &quot;MBA&quot;, &quot;BCA&quot;, &quot;MCA&quot; };\r\n         * cbCourse = new JComboBox(course);\r\n         * cbCourse.setBounds(200, 400, 150, 30);\r\n         * cbCourse.setBackground(Color.WHITE);\r\n         * add(cbCourse);\r\n         */\r\n\r\n        // dropdown for course\r\n        JLabel labelCourse = new JLabel(&quot;Course&quot;);\r\n        labelCourse.setBounds(50, 400, 200, 30);\r\n        labelCourse.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelCourse);\r\n\r\n        String course[] = { &quot;B.Tech&quot;, &quot;M.Tech&quot;, &quot;BBA&quot;, &quot;MBA&quot;, &quot;BCA&quot;, &quot;MCA&quot; };\r\n        cbCourse = new JComboBox&lt;&gt;(course);\r\n        cbCourse.setBounds(200, 400, 150, 30);\r\n        cbCourse.setBackground(Color.WHITE);\r\n        add(cbCourse);\r\n\r\n        // dropdown for branch\r\n        JLabel labelBranch = new JLabel(&quot;Branch&quot;);\r\n        labelBranch.setBounds(400, 400, 200, 30);\r\n        labelBranch.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\r\n        add(labelBranch);\r\n\r\n        String[] branch = { &quot;CSE&quot;, &quot;ECE&quot;, &quot;EEE&quot;, &quot;ME&quot;, &quot;CE&quot;, &quot;IT&quot;, &quot;Not Applicable&quot; };\r\n        cbBranch = new JComboBox&lt;&gt;(branch);\r\n        cbBranch.setBounds(600, 400, 150, 30);\r\n        cbBranch.setBackground(Color.WHITE);\r\n        add(cbBranch);\r\n\r\n        // submit button\r\n        btnSubmit = new JButton(&quot;Submit&quot;);\r\n        btnSubmit.setBounds(200, 450, 150, 30);\r\n        btnSubmit.setBackground(Color.BLACK);\r\n        btnSubmit.setForeground(Color.WHITE);\r\n        btnSubmit.addActionListener(this);\r\n        add(btnSubmit);\r\n\r\n        // cancel button\r\n        btnCancel = new JButton(&quot;Cancel&quot;);\r\n        btnCancel.setBounds(400, 450, 150, 30);\r\n        btnCancel.setBackground(Color.BLACK);\r\n        btnCancel.setForeground(Color.WHITE);\r\n        btnCancel.addActionListener(this);\r\n        add(btnCancel);\r\n\r\n        setVisible(true);\r\n\r\n    }\r\n\r\n    public void actionPerformed(ActionEvent ae) {\r\n        if (ae.getSource() == btnSubmit) {\r\n            // taking all the values\r\n            String fname = tfname.getText();\r\n            String ffname = tffname.getText();\r\n            String rollno = labelrollno.getText();\r\n            String dob = tfdob.getText();\r\n            String address = tffaddress.getText();\r\n            String phone = tfphone.getText();\r\n            String email = tfemail.getText();\r\n            String class_x = tfX.getText();\r\n            String class_xii = tfXII.getText();\r\n            String adhar = tfAdhar.getText();\r\n            String course = (String) cbCourse.getSelectedItem();\r\n            String branch = (String) cbBranch.getSelectedItem();\r\n\r\n            // inserting into database\r\n\r\n            try {\r\n                String query = &quot;insert into student values(&#39;&quot;+fname+&quot;&#39;, &#39;&quot;+ffname+&quot;&#39;, &#39;&quot;+rollno+&quot;&#39;, &#39;&quot;+dob+&quot;&#39;, &#39;&quot;+address+&quot;&#39;, &#39;&quot;+phone+&quot;&#39;, &#39;&quot;+email+&quot;&#39;, &#39;&quot;+class_x+&quot;&#39;, &#39;&quot;+class_xii+&quot;&#39;, &#39;&quot;+adhar+&quot;&#39;, &#39;&quot;+course+&quot;&#39;, &#39;&quot;+branch+&quot;&#39;)&quot;;\r\n\r\n                Conn con = new Conn();\r\n                con.s.executeUpdate(query);\r\n                \r\n                JOptionPane.showMessageDialog(null, &quot;Student Details Inserted Successfully&quot;);\r\n                setVisible(false);\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n\r\n    \r\n        } else {\r\n            setVisible(false);\r\n\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        new AddStudent();\r\n    }\r\n}\r\n\r\n```\r\n\r\nHere is the proof that I already include the mysql-Connector jar file \r\n[![enter image description here][1]][1]\r\n\r\n## **Error and excception while I run the code**\r\n\r\n```\r\njava.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver\r\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)     \r\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)  \r\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n        at java.base/java.lang.Class.forName0(Native Method)\r\n        at java.base/java.lang.Class.forName(Class.java:375)\r\n        at Conn.&lt;init&gt;(Conn.java:19)\r\n        at AddStudent.actionPerformed(AddStudent.java:225)\r\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)       \r\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)   \r\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\r\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\r\n        at java.desktop/java.awt.Component.processEvent(Component.java:6391)\r\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\njava.lang.NullPointerException: Cannot invoke &quot;java.sql.Statement.executeUpdate(String)&quot; because &quot;&lt;local15&gt;.s&quot; is null\r\n        at AddStudent.actionPerformed(AddStudent.java:226)\r\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\r\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\r\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\r\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\r\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\r\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\r\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\r\n        at java.desktop/java.awt.Component.processEvent(Component.java:6391)\r\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\r\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\r\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\r\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\r\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\r\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\r\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\r\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\r\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\r\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\r\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\r\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\r\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\r\n```\r\n\r\n## **But when I hit Run Java that time no problem but the data is not inserted into database**\r\n[![enter image description here][2]][2]\r\n\r\n## **Data is not insert image**\r\n[![enter image description here][3]][3]\r\n\r\n\r\nI have been working on a Java code snippet to insert data into a MySQL database table, but I&#39;m encountering unexpected behavior. Here&#39;s a summary of what I&#39;ve tried and the expected outcome:\r\n\r\nI have established a JDBC connection to the MySQL database using the appropriate connection parameters (URL, username, and password).\r\nAfter successfully establishing the connection, I attempted to insert data into the table using an SQL insert statement.\r\nHowever, despite running the code without any errors, the data is not being stored in the database table as expected.\r\n\r\nI was expecting the code to insert the provided data into the specified table, but it seems to complete without any errors, yet the data is not being stored. I have verified that the connection parameters and SQL query are correct.\r\n\r\nAny guidance or suggestions regarding this issue would be greatly appreciated. Thank you in advance for your help!\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DMrmw.png\r\n  [2]: https://i.stack.imgur.com/CEqlg.png\r\n  [3]: https://i.stack.imgur.com/NKcHl.png","title":"Java code not inserting data into MySQL database despite no errors","body":"<p>I am facing a <code>java.lang.ClassNotFoundException</code> error with the message <code>com.mysql.cj.jdbc.Driver</code> when attempting to run my Java code for data insertion into a MySQL database. Surprisingly, the code compiles and runs without any errors, but the data is not being inserted into the database. Here's an overview of the issue:</p>\n<ul>\n<li>I'm using Java and JDBC to connect to a MySQL database and insert data into a table.</li>\n<li>I have made sure to include the MySQL JDBC driver JAR file in my project's classpath.</li>\n<li>When I run the code, I encounter the mentioned ClassNotFoundException error for the <code>com.mysql.cj.jdbc.Driver</code> class.</li>\n<li>However, if I only compile the code without running it, there are no errors.</li>\n<li>Despite the successful compilation, the data is not getting inserted into the database.</li>\n</ul>\n<h2><strong>Here's a snippet of the code where I connect the JDBC:</strong></h2>\n<pre><code>import java.sql.*;\npublic class Conn {\n    /*\n     * JDBC Connection has 4 Stages\n     *  (1)-Register the Driver Class\n     *  (2)-Creating Connection String\n     *  (3)-Creating Statement\n     *  (4)-Executing MySQL Queries\n     *  (5)-Closing the Connection\n     */\n\n    Connection c; //reference variable\n    Statement s; //\n    Conn(){\n\n        try{\n            // (1)-Register the Driver Class\n            Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;);\n            //Class.forName(&quot;com.mysql.cj.jdbc.Driver&quot;).newInstance();\n            System.out.println(&quot;Driver Loaded&quot;);\n            // (2)-Creating Connection String\n            /*\n             * Connection String provides the information in which database you have connect\n             */\n            c= DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/universitymanagementsystem&quot;,&quot;root&quot;, &quot;123456789&quot;);\n            System.out.println(&quot;Connection Established&quot;);\n            // (3)\n            s= c.createStatement();\n\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n    }\n    /*public static java.beans.Statement createStatement() {\n        return null;\n    }*/\n}\n\n</code></pre>\n<h2><strong>Here is the snippet of the code of AddStudent.java file</strong></h2>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.util.*;\nimport java.awt.event.*;\nimport java.sql.*;\n//import com.toedter.calendar.JDateChooser;\n\npublic class AddStudent extends JFrame implements ActionListener {\n    JTextField tfname, tffname, tffaddress, tfphone, tfemail, tfX, tfXII, tfAdhar, tfdob;\n    JLabel labelrollno;\n    JComboBox&lt;String&gt; cbCourse, cbBranch;\n    JButton btnSubmit, btnCancel;\n    // JDateChooser dobChooser;\n    /*\n     * create a object for random class\n     * which create some random number for roll number\n     */\n\n    Random ran = new Random();\n    long first4 = Math.abs((ran.nextLong() % 9000L) + 1000L);\n\n    AddStudent() {\n\n        // for layout\n        setSize(900, 700);\n        setLocation(350, 50);\n        setLayout(null); // cause we want our own layout\n\n        // for heading\n        JLabel heading = new JLabel(&quot;New student Details&quot;);\n        heading.setBounds(310, 30, 500, 50);\n        heading.setFont(new Font(&quot;serif&quot;, Font.BOLD, 30));\n        add(heading);\n\n        // name label\n        JLabel labelName = new JLabel(&quot;Name&quot;);\n        labelName.setBounds(50, 150, 100, 30);\n        labelName.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelName);\n        // name input box\n        tfname = new JTextField();\n        tfname.setBounds(200, 150, 150, 30);\n        add(tfname);\n\n        // father name label\n        JLabel labelFName = new JLabel(&quot;Fathers Name&quot;);\n        labelFName.setBounds(400, 150, 200, 30);\n        labelFName.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelFName);\n        // father name input box\n        tffname = new JTextField();\n        tffname.setBounds(600, 150, 150, 30);\n        add(tffname);\n\n        // roll name label\n        JLabel lblRollNo = new JLabel(&quot;Roll Number&quot;);\n        lblRollNo.setBounds(50, 200, 200, 30);\n        lblRollNo.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(lblRollNo);\n        setVisible(true);\n\n        // roll nameinput box\n        labelrollno = new JLabel(&quot;1533&quot; + first4);\n        labelrollno.setBounds(200, 200, 200, 30);\n        labelrollno.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelrollno);\n        setVisible(true);\n\n        // date of birth\n        JLabel lblDob = new JLabel(&quot;Date of Birth&quot;);\n        lblDob.setBounds(400, 200, 200, 30);\n        lblDob.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(lblDob);\n\n        // date of birth input box\n        tfdob = new JTextField();\n        tfdob.setBounds(600, 200, 150, 30);\n        add(tfdob);\n\n        // date of birth input box\n        /*\n         * dobChooser = new JDateChooser();\n         * dobChooser.setBounds(600, 200, 150, 30);\n         * add(dobChooser);\n         */\n\n        // address label\n        JLabel labeladdress = new JLabel(&quot;Address Name&quot;);\n        labeladdress.setBounds(50, 250, 200, 30);\n        labeladdress.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labeladdress);\n        // address name input box\n        tffaddress = new JTextField();\n        tffaddress.setBounds(200, 250, 150, 30);\n        add(tffaddress);\n\n        // phone number label\n        JLabel labelPhone = new JLabel(&quot;Phone Number&quot;);\n        labelPhone.setBounds(400, 250, 200, 30);\n        labelPhone.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelPhone);\n        // phone number input box\n        tfphone = new JTextField();\n        tfphone.setBounds(600, 250, 150, 30);\n        add(tfphone);\n\n        // Email Id\n        JLabel labelemail = new JLabel(&quot;Email Id&quot;);\n        labelemail.setBounds(50, 300, 200, 30);\n        labelemail.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelemail);\n        // Email Id input box\n        tfemail = new JTextField();\n        tfemail.setBounds(200, 300, 150, 30);\n        add(tfemail);\n\n        // Class X label\n        JLabel labelX = new JLabel(&quot;Class X(%)&quot;);\n        labelX.setBounds(400, 300, 200, 30);\n        labelX.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelX);\n        // Class X input box\n        tfX = new JTextField();\n        tfX.setBounds(600, 300, 150, 30);\n        add(tfX);\n\n        // Class XII label\n        JLabel labelXII = new JLabel(&quot;Class XII(%)&quot;);\n        labelXII.setBounds(50, 350, 200, 30);\n        labelXII.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelXII);\n        // Class XII input box\n        tfXII = new JTextField();\n        tfXII.setBounds(200, 350, 150, 30);\n        add(tfXII);\n\n        // Adhar Number label\n        JLabel labelAdhar = new JLabel(&quot;Adhar Number&quot;);\n        labelAdhar.setBounds(400, 350, 200, 30);\n        labelAdhar.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelAdhar);\n        // Adhar Number input box\n        tfAdhar = new JTextField();\n        tfAdhar.setBounds(600, 350, 150, 30);\n        add(tfAdhar);\n\n        // dropdown for course\n        /*\n         * JLabel labelCourse = new JLabel(&quot;Course&quot;);\n         * labelCourse.setBounds(50, 400, 200, 30);\n         * labelCourse.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n         * add(labelCourse);\n         * String course[] = { &quot;B.Tech&quot;, &quot;M.Tech&quot;, &quot;BBA&quot;, &quot;MBA&quot;, &quot;BCA&quot;, &quot;MCA&quot; };\n         * cbCourse = new JComboBox(course);\n         * cbCourse.setBounds(200, 400, 150, 30);\n         * cbCourse.setBackground(Color.WHITE);\n         * add(cbCourse);\n         */\n\n        // dropdown for course\n        JLabel labelCourse = new JLabel(&quot;Course&quot;);\n        labelCourse.setBounds(50, 400, 200, 30);\n        labelCourse.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelCourse);\n\n        String course[] = { &quot;B.Tech&quot;, &quot;M.Tech&quot;, &quot;BBA&quot;, &quot;MBA&quot;, &quot;BCA&quot;, &quot;MCA&quot; };\n        cbCourse = new JComboBox&lt;&gt;(course);\n        cbCourse.setBounds(200, 400, 150, 30);\n        cbCourse.setBackground(Color.WHITE);\n        add(cbCourse);\n\n        // dropdown for branch\n        JLabel labelBranch = new JLabel(&quot;Branch&quot;);\n        labelBranch.setBounds(400, 400, 200, 30);\n        labelBranch.setFont(new Font(&quot;serif&quot;, Font.BOLD, 20));\n        add(labelBranch);\n\n        String[] branch = { &quot;CSE&quot;, &quot;ECE&quot;, &quot;EEE&quot;, &quot;ME&quot;, &quot;CE&quot;, &quot;IT&quot;, &quot;Not Applicable&quot; };\n        cbBranch = new JComboBox&lt;&gt;(branch);\n        cbBranch.setBounds(600, 400, 150, 30);\n        cbBranch.setBackground(Color.WHITE);\n        add(cbBranch);\n\n        // submit button\n        btnSubmit = new JButton(&quot;Submit&quot;);\n        btnSubmit.setBounds(200, 450, 150, 30);\n        btnSubmit.setBackground(Color.BLACK);\n        btnSubmit.setForeground(Color.WHITE);\n        btnSubmit.addActionListener(this);\n        add(btnSubmit);\n\n        // cancel button\n        btnCancel = new JButton(&quot;Cancel&quot;);\n        btnCancel.setBounds(400, 450, 150, 30);\n        btnCancel.setBackground(Color.BLACK);\n        btnCancel.setForeground(Color.WHITE);\n        btnCancel.addActionListener(this);\n        add(btnCancel);\n\n        setVisible(true);\n\n    }\n\n    public void actionPerformed(ActionEvent ae) {\n        if (ae.getSource() == btnSubmit) {\n            // taking all the values\n            String fname = tfname.getText();\n            String ffname = tffname.getText();\n            String rollno = labelrollno.getText();\n            String dob = tfdob.getText();\n            String address = tffaddress.getText();\n            String phone = tfphone.getText();\n            String email = tfemail.getText();\n            String class_x = tfX.getText();\n            String class_xii = tfXII.getText();\n            String adhar = tfAdhar.getText();\n            String course = (String) cbCourse.getSelectedItem();\n            String branch = (String) cbBranch.getSelectedItem();\n\n            // inserting into database\n\n            try {\n                String query = &quot;insert into student values('&quot;+fname+&quot;', '&quot;+ffname+&quot;', '&quot;+rollno+&quot;', '&quot;+dob+&quot;', '&quot;+address+&quot;', '&quot;+phone+&quot;', '&quot;+email+&quot;', '&quot;+class_x+&quot;', '&quot;+class_xii+&quot;', '&quot;+adhar+&quot;', '&quot;+course+&quot;', '&quot;+branch+&quot;')&quot;;\n\n                Conn con = new Conn();\n                con.s.executeUpdate(query);\n                \n                JOptionPane.showMessageDialog(null, &quot;Student Details Inserted Successfully&quot;);\n                setVisible(false);\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n\n    \n        } else {\n            setVisible(false);\n\n        }\n    }\n\n    public static void main(String[] args) {\n        new AddStudent();\n    }\n}\n\n</code></pre>\n<p>Here is the proof that I already include the mysql-Connector jar file\n<a href=\"https://i.stack.imgur.com/DMrmw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DMrmw.png\" alt=\"enter image description here\" /></a></p>\n<h2><strong>Error and excception while I run the code</strong></h2>\n<pre><code>java.lang.ClassNotFoundException: com.mysql.cj.jdbc.Driver\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)     \n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)  \n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:375)\n        at Conn.&lt;init&gt;(Conn.java:19)\n        at AddStudent.actionPerformed(AddStudent.java:225)\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)       \n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)   \n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6391)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\njava.lang.NullPointerException: Cannot invoke &quot;java.sql.Statement.executeUpdate(String)&quot; because &quot;&lt;local15&gt;.s&quot; is null\n        at AddStudent.actionPerformed(AddStudent.java:226)\n        at java.desktop/javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1972)\n        at java.desktop/javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2313)\n        at java.desktop/javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:405)\n        at java.desktop/javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:262)\n        at java.desktop/javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:279)\n        at java.desktop/java.awt.Component.processMouseEvent(Component.java:6626)\n        at java.desktop/javax.swing.JComponent.processMouseEvent(JComponent.java:3389)\n        at java.desktop/java.awt.Component.processEvent(Component.java:6391)\n        at java.desktop/java.awt.Container.processEvent(Container.java:2266)\n        at java.desktop/java.awt.Component.dispatchEventImpl(Component.java:5001)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2324)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4948)\n        at java.desktop/java.awt.LightweightDispatcher.processMouseEvent(Container.java:4575)\n        at java.desktop/java.awt.LightweightDispatcher.dispatchEvent(Container.java:4516)\n        at java.desktop/java.awt.Container.dispatchEventImpl(Container.java:2310)\n        at java.desktop/java.awt.Window.dispatchEventImpl(Window.java:2780)\n        at java.desktop/java.awt.Component.dispatchEvent(Component.java:4833)\n        at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:722)\n        at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:716)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:97)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:746)\n        at java.desktop/java.awt.EventQueue$5.run(EventQueue.java:744)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n        at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86)\n        at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:743)\n        at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124)\n        at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109)\n        at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n        at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90)\n</code></pre>\n<h2><strong>But when I hit Run Java that time no problem but the data is not inserted into database</strong></h2>\n<p><a href=\"https://i.stack.imgur.com/CEqlg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CEqlg.png\" alt=\"enter image description here\" /></a></p>\n<h2><strong>Data is not insert image</strong></h2>\n<p><a href=\"https://i.stack.imgur.com/NKcHl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NKcHl.png\" alt=\"enter image description here\" /></a></p>\n<p>I have been working on a Java code snippet to insert data into a MySQL database table, but I'm encountering unexpected behavior. Here's a summary of what I've tried and the expected outcome:</p>\n<p>I have established a JDBC connection to the MySQL database using the appropriate connection parameters (URL, username, and password).\nAfter successfully establishing the connection, I attempted to insert data into the table using an SQL insert statement.\nHowever, despite running the code without any errors, the data is not being stored in the database table as expected.</p>\n<p>I was expecting the code to insert the provided data into the specified table, but it seems to complete without any errors, yet the data is not being stored. I have verified that the connection parameters and SQL query are correct.</p>\n<p>Any guidance or suggestions regarding this issue would be greatly appreciated. Thank you in advance for your help!</p>\n"},{"tags":["java","class","generics","interface"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686626528,"post_id":76461491,"comment_id":134821258,"body_markdown":"What&#39;s wrong with `Recipe.build(...)`?","body":"What&#39;s wrong with <code>Recipe.build(...)</code>?"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1686626631,"post_id":76461491,"comment_id":134821263,"body_markdown":"Wait, what&#39;s `T.build`? You can&#39;t call static methods on type parameters like that. You should probably write a `RecipeBuilder&lt;T extends Recipe&gt;`, or something like that.","body":"Wait, what&#39;s <code>T.build</code>? You can&#39;t call static methods on type parameters like that. You should probably write a <code>RecipeBuilder&lt;T extends Recipe&gt;</code>, or something like that."}],"answers":[{"tags":[],"owner":{"account_id":16215668,"reputation":9,"user_id":11708570,"display_name":"Vladmix6"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686639120,"creation_date":1686639120,"answer_id":76462316,"question_id":76461491,"body_markdown":"I think you are trying to call the interface static method in a wrong way (I may be wrong by not understanding your exact expectation). But the idea with Java 8 static methods in interfaces is that the static method doesn&#39;t belong to a specific object. These methods are not part of a class (that implements that interface) available APIs. To use static methods from an interface **you don&#39;t have to create any object**, that is the may idea behind them. In order to call your static methods you have to do it something like this:\r\n\r\n    Sub-Recipe recipe = Builder.build((new File(&quot;/path/to/file&quot;));\r\n\r\nThere is no need to create any object when calling static methods from an interface, you can think of that interface just as an &quot;utility library&quot; with general methods that have an implementation defined in interface and that cannot be overridden in the classes that are implementing that interface. ","title":"can&#39;t use static method in class that implements a interface (Java 17)","body":"<p>I think you are trying to call the interface static method in a wrong way (I may be wrong by not understanding your exact expectation). But the idea with Java 8 static methods in interfaces is that the static method doesn't belong to a specific object. These methods are not part of a class (that implements that interface) available APIs. To use static methods from an interface <strong>you don't have to create any object</strong>, that is the may idea behind them. In order to call your static methods you have to do it something like this:</p>\n<pre><code>Sub-Recipe recipe = Builder.build((new File(&quot;/path/to/file&quot;));\n</code></pre>\n<p>There is no need to create any object when calling static methods from an interface, you can think of that interface just as an &quot;utility library&quot; with general methods that have an implementation defined in interface and that cannot be overridden in the classes that are implementing that interface.</p>\n"}],"owner":{"account_id":20585180,"reputation":1,"user_id":15110212,"display_name":"Xaxurro"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686639120,"creation_date":1686626332,"question_id":76461491,"body_markdown":"I have a class `Recipe` that has multiple children classes, i want to make two `static` methods, one that takes a JSON file and returns an object of the child class already casted, and other that returns a List of the child class, and all inside an interface like this:\r\n```java\r\npublic interface Builder {\r\n    static &lt;T extends Recipe&gt; T build(File file) throws IOException {\r\n        String json = new String(Files.readAllBytes(Paths.get(file.getPath())));\r\n        return (T) T.build(new JSONObject(json));\r\n    }\r\n\r\n    static &lt;T extends Recipe&gt; List&lt;T&gt; build(File[] files) throws IOException {\r\n        List&lt;T&gt; recipeList = new ArrayList&lt;&gt;();\r\n\r\n        for (File file : files) {\r\n            T r = build(file);\r\n\r\n            if (r != null) recipeList.add(r);\r\n        }\r\n        return recipeList;\r\n    }\r\n}\r\n```\r\n\r\nHowever when i implement the interface in the sub-class (i.e. `Sub-Recipe`) i can&#39;t use the `static` methods created on the interface\r\n\r\n```\r\nSub-Recipe recipe = Sub-Recipe.build(new File(&quot;/path/to/file&quot;));\r\n```\r\n\r\nI tried using a `default` method on the interface, but if i do that i wouldn&#39;t be able to make a `static` method.","title":"can&#39;t use static method in class that implements a interface (Java 17)","body":"<p>I have a class <code>Recipe</code> that has multiple children classes, i want to make two <code>static</code> methods, one that takes a JSON file and returns an object of the child class already casted, and other that returns a List of the child class, and all inside an interface like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Builder {\n    static &lt;T extends Recipe&gt; T build(File file) throws IOException {\n        String json = new String(Files.readAllBytes(Paths.get(file.getPath())));\n        return (T) T.build(new JSONObject(json));\n    }\n\n    static &lt;T extends Recipe&gt; List&lt;T&gt; build(File[] files) throws IOException {\n        List&lt;T&gt; recipeList = new ArrayList&lt;&gt;();\n\n        for (File file : files) {\n            T r = build(file);\n\n            if (r != null) recipeList.add(r);\n        }\n        return recipeList;\n    }\n}\n</code></pre>\n<p>However when i implement the interface in the sub-class (i.e. <code>Sub-Recipe</code>) i can't use the <code>static</code> methods created on the interface</p>\n<pre><code>Sub-Recipe recipe = Sub-Recipe.build(new File(&quot;/path/to/file&quot;));\n</code></pre>\n<p>I tried using a <code>default</code> method on the interface, but if i do that i wouldn't be able to make a <code>static</code> method.</p>\n"},{"tags":["java","ios","swift","cryptography","elliptic-curve"],"answers":[{"tags":[],"owner":{"account_id":208697,"reputation":526,"user_id":459349,"accept_rate":50,"display_name":"mahler"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1604052914,"creation_date":1604052914,"answer_id":64606418,"question_id":64606417,"body_markdown":"Notice in the Apple documentation how the first 65-bytes are the uncompressed public key (`04 || X || Y`) concatenated with the private scalar (`|| K`). Take these bytes off and you can create the private key. I hope this helps somebody.\r\n\r\n```java\r\n/*\r\n *  For an elliptic curve private key, the output is formatted as the public key\r\n * concatenated with the big endian encoding of the secret scalar, or 04 || X || Y || K.\r\n */\r\nprivate PrivateKey createECPrivateKey(byte[] rawBytes) throws NoSuchAlgorithmException, InvalidKeySpecException, InvalidParameterSpecException {\r\n    KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\r\n    BigInteger s = new BigInteger(Arrays.copyOfRange(rawBytes, 65, rawBytes.length));\r\n    return kf.generatePrivate(new ECPrivateKeySpec(s, ecParameterSpecForCurve(&quot;secp256r1&quot;)));\r\n}\r\n```","title":"Importing ANSI X9.63 formatted key pair in Java","body":"<p>Notice in the Apple documentation how the first 65-bytes are the uncompressed public key (<code>04 || X || Y</code>) concatenated with the private scalar (<code>|| K</code>). Take these bytes off and you can create the private key. I hope this helps somebody.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n *  For an elliptic curve private key, the output is formatted as the public key\n * concatenated with the big endian encoding of the secret scalar, or 04 || X || Y || K.\n */\nprivate PrivateKey createECPrivateKey(byte[] rawBytes) throws NoSuchAlgorithmException, InvalidKeySpecException, InvalidParameterSpecException {\n    KeyFactory kf = KeyFactory.getInstance(&quot;EC&quot;);\n    BigInteger s = new BigInteger(Arrays.copyOfRange(rawBytes, 65, rawBytes.length));\n    return kf.generatePrivate(new ECPrivateKeySpec(s, ecParameterSpecForCurve(&quot;secp256r1&quot;)));\n}\n</code></pre>\n"}],"owner":{"account_id":208697,"reputation":526,"user_id":459349,"accept_rate":50,"display_name":"mahler"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1281,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":64606418,"answer_count":1,"score":0,"last_activity_date":1686639102,"creation_date":1604052914,"question_id":64606417,"body_markdown":"I have generated a key pair on iOS and created a data representation using the following code:\r\n\r\n```swift\r\nvar publicKey, privateKey: SecKey?\r\nlet keyattribute = [\r\n    kSecAttrKeyType as String: kSecAttrKeyTypeECSECPrimeRandom,\r\n    kSecAttrKeySizeInBits as String : 256\r\n    ] as CFDictionary\r\nSecKeyGeneratePair(keyattribute, &amp;publicKey, &amp;privateKey)\r\n\r\nvar error: Unmanaged&lt;CFError&gt;?\r\nlet pubkeyRep = SecKeyCopyExternalRepresentation(publicKey!, &amp;error) as Data?\r\nlet prikeyRep = SecKeyCopyExternalRepresentation(privateKey!, &amp;error) as Data?\r\n```\r\n\r\nAccording to the documentation from Apple, the [SecKeyCopyExternalRepresentation][1] function encodes these keys using uncompressed *[ANSI X9.63 format][2]*\r\n\r\nI want to transform these byte arrays into `PublicKey` and `PrivateKey` objects in Java. \r\n\r\nA few examples that I&#39;ve found [here][3] (using SunJCE) and [here][4] (using BouncyCastle) work for the public key, but they don&#39;t describe a way to import the private key.\r\n\r\n\r\n  [1]: https://developer.apple.com/documentation/security/1643698-seckeycopyexternalrepresentation\r\n  [2]: https://standards.globalspec.com/std/26827/X9.63\r\n  [3]: https://stackoverflow.com/a/56170785/459349\r\n  [4]: https://stackoverflow.com/a/36033552/459349","title":"Importing ANSI X9.63 formatted key pair in Java","body":"<p>I have generated a key pair on iOS and created a data representation using the following code:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>var publicKey, privateKey: SecKey?\nlet keyattribute = [\n    kSecAttrKeyType as String: kSecAttrKeyTypeECSECPrimeRandom,\n    kSecAttrKeySizeInBits as String : 256\n    ] as CFDictionary\nSecKeyGeneratePair(keyattribute, &amp;publicKey, &amp;privateKey)\n\nvar error: Unmanaged&lt;CFError&gt;?\nlet pubkeyRep = SecKeyCopyExternalRepresentation(publicKey!, &amp;error) as Data?\nlet prikeyRep = SecKeyCopyExternalRepresentation(privateKey!, &amp;error) as Data?\n</code></pre>\n<p>According to the documentation from Apple, the <a href=\"https://developer.apple.com/documentation/security/1643698-seckeycopyexternalrepresentation\" rel=\"nofollow noreferrer\">SecKeyCopyExternalRepresentation</a> function encodes these keys using uncompressed <em><a href=\"https://standards.globalspec.com/std/26827/X9.63\" rel=\"nofollow noreferrer\">ANSI X9.63 format</a></em></p>\n<p>I want to transform these byte arrays into <code>PublicKey</code> and <code>PrivateKey</code> objects in Java.</p>\n<p>A few examples that I've found <a href=\"https://stackoverflow.com/a/56170785/459349\">here</a> (using SunJCE) and <a href=\"https://stackoverflow.com/a/36033552/459349\">here</a> (using BouncyCastle) work for the public key, but they don't describe a way to import the private key.</p>\n"},{"tags":["java","sockets","data-structures","stream"],"comments":[{"owner":{"account_id":2880367,"reputation":6588,"user_id":2471439,"display_name":"kiheru"},"score":5,"creation_date":1380888456,"post_id":19180728,"comment_id":28377385,"body_markdown":"You&#39;re silently ignoring the exceptions from `setupStream()`. Add at minimum `e.printStackTrace()` in the catch blocks.","body":"You&#39;re silently ignoring the exceptions from <code>setupStream()</code>. Add at minimum <code>e.printStackTrace()</code> in the catch blocks."},{"owner":{"account_id":801225,"reputation":7522,"user_id":878732,"accept_rate":60,"display_name":"harsh"},"score":1,"creation_date":1380889047,"post_id":19180728,"comment_id":28377701,"body_markdown":"@VinceEmigh you should worry about error handling, `Stream` constructor is always failing but since exception is suppressed nothing get noticed. Further `setupStream` throws NPE due to `null` `Socket` as there is nothing listening on it!","body":"@VinceEmigh you should worry about error handling, <code>Stream</code> constructor is always failing but since exception is suppressed nothing get noticed. Further <code>setupStream</code> throws NPE due to <code>null</code> <code>Socket</code> as there is nothing listening on it!"},{"owner":{"account_id":2880367,"reputation":6588,"user_id":2471439,"display_name":"kiheru"},"score":1,"creation_date":1380889739,"post_id":19180728,"comment_id":28378043,"body_markdown":"There are not all that many ways to not reach the line below `setupStreams()` (locking up, or an exception gets thrown). How do you know an exception does not get thrown if you never check that? You say you don&#39;t get any errors, but the code you have pasted is not capable of detecting that.","body":"There are not all that many ways to not reach the line below <code>setupStreams()</code> (locking up, or an exception gets thrown). How do you know an exception does not get thrown if you never check that? You say you don&#39;t get any errors, but the code you have pasted is not capable of detecting that."},{"owner":{"account_id":910172,"reputation":2622,"user_id":944201,"accept_rate":60,"display_name":"xmoex"},"score":1,"creation_date":1380891345,"post_id":19180728,"comment_id":28378916,"body_markdown":"if you omit those stacktraces, how could people possibly know that you already know that there&#39;s no error? you diddn&#39;t talk about a server in the first place, and so it seems likely that you forgot about it and didn&#39;t realize it because of missing stacktraces...","body":"if you omit those stacktraces, how could people possibly know that you already know that there&#39;s no error? you diddn&#39;t talk about a server in the first place, and so it seems likely that you forgot about it and didn&#39;t realize it because of missing stacktraces..."}],"answers":[{"tags":[],"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686638801,"creation_date":1380890239,"answer_id":19181351,"question_id":19180728,"body_markdown":"I suspect that your server does not create an `ObjectOutputStream`, so when the client constructs its `ObjectInputStream`, it blocks waiting for the object stream header, which never arrives.","title":"Program won&#39;t continue after initializing input/output streams?","body":"<p>I suspect that your server does not create an <code>ObjectOutputStream</code>, so when the client constructs its <code>ObjectInputStream</code>, it blocks waiting for the object stream header, which never arrives.</p>\n"}],"owner":{"account_id":2787344,"reputation":14687,"user_id":2398375,"accept_rate":75,"display_name":"Vince"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":558,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":1,"score":-4,"last_activity_date":1686638801,"creation_date":1380888170,"question_id":19180728,"body_markdown":"Before people suspect that I have no idea what I&#39;m doing at all (and end up voting this down for no reason at all), please read this:\r\n\r\nIt connects to my server just fine! I&#39;m getting no errors (from the client OR server), and my server is recognizing the connection. It works with my friend&#39;s client that he made, but I wanted to make my own client, and apparently I&#39;m doing something wrong. PLEASE STAY ON TOPIC! Thanks :)\r\n__________________________\r\n\r\nTitle basically says it all. I&#39;ve tested with `println` messages above and below the `setupStream()` in my Client.java `run()`, but only the message above the `setupStream()` prints. I&#39;m not sure how I&#39;m supposed to initialize my stream without making my program come to a halt.\r\n\r\nClient.java\r\n\r\n    import java.io.IOException;\r\n    \r\n    \r\n    public class Client extends Stream implements Runnable {\r\n    \tpublic boolean running = false;\r\n    \tprivate Thread clientThread;\r\n    \t\r\n    \tFrame frame;\r\n    \tpublic Client() {\r\n    \t\tsuper(&quot;localhost&quot;, 43594);\r\n    \t\t\r\n    \t\tframe = new ClientFrame(500, 500);\r\n    \t\tstart();\r\n    \t}\r\n    \t\r\n    \tpublic synchronized void start() {\r\n    \t\tif(running) return;\r\n    \t\trunning = true;\r\n    \t\t\r\n    \t\tclientThread = new Thread(this);\r\n    \t\tclientThread.start();\r\n    \t}\r\n    \tpublic synchronized void stop() {\r\n    \t\tif(!running) return;\r\n    \t\trunning = false;\r\n    \t\t\r\n    \t\tclientThread.interrupt();\r\n    \t\ttry {\r\n    \t\t\tclientThread.join();\r\n    \t\t} catch (InterruptedException e) {e.printStackTrace();}\r\n    \t}\r\n    \t\r\n    \tpublic void run() {\r\n    \t\ttry{\r\n    \t\tsetupStream();\r\n    \t\t\r\n    \t\twhile(running) {\r\n    \t\t\tSystem.out.println(&quot;running&quot;);\r\n    \t\t}\r\n    \t\t}catch(IOException e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}finally {\r\n    \t\t\ttry{\r\n    \t\t\tout.close();\r\n    \t\t\tin.close();\r\n    \t\t\tsocket.close();\r\n    \t\t\tclientThread.join();\r\n    \t\t\t}catch(IOException | InterruptedException e) { e.printStackTrace(); }\r\n    \t\t}\r\n    \t}\r\n    \tpublic static void main(String[] args) {\r\n    \t\tnew Client();\r\n    \t}\r\n    }\r\n\r\nStream.java\r\n\r\n    import java.io.IOException;\r\n    import java.io.ObjectInputStream;\r\n    import java.io.ObjectOutputStream;\r\n    import java.net.Socket;\r\n    \r\n    \r\n    public class Stream {\r\n    \t\r\n    \tSocket socket;\r\n    \tObjectOutputStream out;\r\n    \tObjectInputStream in;\r\n    \tString data;\r\n    \t\r\n    \tpublic Stream(String host, int port) {\r\n    \t\ttry {\r\n    \t\t\tsocket = new Socket(host, port);\r\n    \t\t} catch (IOException e) { \r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n    \t\r\n    \tprotected void setupStream() throws IOException {\r\n    \t\tout = new ObjectOutputStream(socket.getOutputStream());\r\n    \t\tout.flush();\r\n    \t\tin = new ObjectInputStream(socket.getInputStream());\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nMy Server Thread:\r\n\r\n    package Server;\r\n    \r\n    import java.io.DataInputStream;\r\n    import java.io.DataOutputStream;\r\n    import java.io.IOException;\r\n    import java.net.Socket;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.ArrayList;\r\n    import java.util.Calendar;\r\n    \r\n    public class User extends Thread {\r\n    \tpublic static int users = 0;\r\n    \tpublic int ID;\r\n    \tpublic String username;\r\n    \tboolean online = false;\r\n    \t\r\n    \tpublic static ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\r\n    \t\r\n    \tSocket socket;\r\n    \r\n    \tDataOutputStream out;\r\n    \tDataInputStream in;\r\n    \tString input;\r\n    \t\r\n    \tpublic User(Socket socket) {\r\n    \t\tthis.socket = socket;\r\n    \t\t\r\n    \t}\r\n    \t\r\n    \tpublic String decode(String input) {\r\n    \t\tString[] split = input.split(&quot; &quot;);\r\n    \t\t\r\n    \t\tif(input.startsWith(&quot;::&quot;)) {\r\n    \t\t\ttry {\r\n    \t\t\t\tswitch(split[0].substring(2, split[0].length()).toLowerCase()) {\r\n    \t\t\t\tcase &quot;setname&quot;: \r\n    \t\t\t\tcase &quot;changename&quot;:\r\n    \t\t\t\tcase &quot;newname&quot;:\r\n    \t\t\t\t\tif(usernames.contains(split[1].toLowerCase())) {\r\n    \t\t\t\t\t\tout.writeUTF(&quot;This name is already taken! Please choose a different one.&quot;);\r\n    \t\t\t\t\t\tout.flush();\r\n    \t\t\t\t\t\treturn null;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif(username == null) {\r\n    \t\t\t\t\t\tusername = split[1].substring(0, 1).toUpperCase() + split[1].substring(1, split[1].length());\r\n    \t\t\t\t\t\tServer.users.put(split[1].toLowerCase(), Server.user[ID]);\r\n    \t\t\t\t\t\tusernames.add(split[1].toLowerCase());\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\tusernames.remove(username.toLowerCase());\r\n    \t\t\t\t\t\tusername = split[1].substring(0, 1).toUpperCase() + split[1].substring(1, split[1].length());\r\n    \t\t\t\t\t\tusernames.add(split[1].toLowerCase());\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\t\treturn null;\r\n    \t\t\t\tcase &quot;rank+&quot;:\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\tcase &quot;[sm]=&quot;:\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\t}\r\n    \t\t\t}catch(IOException e) { }\r\n    \t\t}\r\n    \t\treturn input;\r\n    \t}\r\n    \t\r\n    \tString timeStamp;\r\n    \tpublic void run() {\r\n    \t\ttry {\r\n    \t\t\t\r\n    \t\t\tout = new DataOutputStream(socket.getOutputStream());\r\n    \t\t\tout.flush();\r\n    \t\t\tin = new DataInputStream(socket.getInputStream());\r\n    \t\t\t\r\n    \t\t\twhile((input = in.readUTF()) != null) {\r\n    \t\t\t\tinput = decode(input);\r\n    \t\t\t\t\r\n    \t\t\t\tif(input != null) {\r\n    \t\t\t\t\tif(username != null) {\r\n    \t\t\t\t\t\ttimeStamp = new SimpleDateFormat(&quot;[h:mm:ss] &quot;).format(Calendar.getInstance().getTime());\r\n    \t\t\t\t\t\tServer.sendGlobalMessage(timeStamp + username +&quot;: &quot;+input);\r\n    \t\t\t\t\t} else {\r\n    \t\t\t\t\t\ttimeStamp = new SimpleDateFormat(&quot;[h:mm:ss] &quot;).format(Calendar.getInstance().getTime());\r\n    \t\t\t\t\t\tServer.sendGlobalMessage(timeStamp + &quot;Guest &quot;+ID+&quot;: &quot;+input);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}catch(IOException e) { e.printStackTrace(); } finally { \r\n    \t\t\ttry{\r\n    \t\t\t\tout.close();\r\n    \t\t\t\tin.close();\r\n    \t\t\t\tsocket.close();\r\n    \t\t\t} catch(IOException e) { e.printStackTrace(); }\r\n    \t\t}\r\n    \t\t\r\n    \t}\r\n    \r\n    }\r\n\r\nI haven&#39;t touched the code of my Server Thread for a while, since it has always worked up until I made my new client.","title":"Program won&#39;t continue after initializing input/output streams?","body":"<p>Before people suspect that I have no idea what I'm doing at all (and end up voting this down for no reason at all), please read this:</p>\n\n<p>It connects to my server just fine! I'm getting no errors (from the client OR server), and my server is recognizing the connection. It works with my friend's client that he made, but I wanted to make my own client, and apparently I'm doing something wrong. PLEASE STAY ON TOPIC! Thanks :)</p>\n\n<hr>\n\n<p>Title basically says it all. I've tested with <code>println</code> messages above and below the <code>setupStream()</code> in my Client.java <code>run()</code>, but only the message above the <code>setupStream()</code> prints. I'm not sure how I'm supposed to initialize my stream without making my program come to a halt.</p>\n\n<p>Client.java</p>\n\n<pre><code>import java.io.IOException;\n\n\npublic class Client extends Stream implements Runnable {\n    public boolean running = false;\n    private Thread clientThread;\n\n    Frame frame;\n    public Client() {\n        super(\"localhost\", 43594);\n\n        frame = new ClientFrame(500, 500);\n        start();\n    }\n\n    public synchronized void start() {\n        if(running) return;\n        running = true;\n\n        clientThread = new Thread(this);\n        clientThread.start();\n    }\n    public synchronized void stop() {\n        if(!running) return;\n        running = false;\n\n        clientThread.interrupt();\n        try {\n            clientThread.join();\n        } catch (InterruptedException e) {e.printStackTrace();}\n    }\n\n    public void run() {\n        try{\n        setupStream();\n\n        while(running) {\n            System.out.println(\"running\");\n        }\n        }catch(IOException e) {\n            e.printStackTrace();\n        }finally {\n            try{\n            out.close();\n            in.close();\n            socket.close();\n            clientThread.join();\n            }catch(IOException | InterruptedException e) { e.printStackTrace(); }\n        }\n    }\n    public static void main(String[] args) {\n        new Client();\n    }\n}\n</code></pre>\n\n<p>Stream.java</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.ObjectInputStream;\nimport java.io.ObjectOutputStream;\nimport java.net.Socket;\n\n\npublic class Stream {\n\n    Socket socket;\n    ObjectOutputStream out;\n    ObjectInputStream in;\n    String data;\n\n    public Stream(String host, int port) {\n        try {\n            socket = new Socket(host, port);\n        } catch (IOException e) { \n            e.printStackTrace();\n        }\n    }\n\n    protected void setupStream() throws IOException {\n        out = new ObjectOutputStream(socket.getOutputStream());\n        out.flush();\n        in = new ObjectInputStream(socket.getInputStream());\n    }\n\n}\n</code></pre>\n\n<p>My Server Thread:</p>\n\n<pre><code>package Server;\n\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.net.Socket;\nimport java.text.SimpleDateFormat;\nimport java.util.ArrayList;\nimport java.util.Calendar;\n\npublic class User extends Thread {\n    public static int users = 0;\n    public int ID;\n    public String username;\n    boolean online = false;\n\n    public static ArrayList&lt;String&gt; usernames = new ArrayList&lt;String&gt;();\n\n    Socket socket;\n\n    DataOutputStream out;\n    DataInputStream in;\n    String input;\n\n    public User(Socket socket) {\n        this.socket = socket;\n\n    }\n\n    public String decode(String input) {\n        String[] split = input.split(\" \");\n\n        if(input.startsWith(\"::\")) {\n            try {\n                switch(split[0].substring(2, split[0].length()).toLowerCase()) {\n                case \"setname\": \n                case \"changename\":\n                case \"newname\":\n                    if(usernames.contains(split[1].toLowerCase())) {\n                        out.writeUTF(\"This name is already taken! Please choose a different one.\");\n                        out.flush();\n                        return null;\n                    }\n                    if(username == null) {\n                        username = split[1].substring(0, 1).toUpperCase() + split[1].substring(1, split[1].length());\n                        Server.users.put(split[1].toLowerCase(), Server.user[ID]);\n                        usernames.add(split[1].toLowerCase());\n                    } else {\n                        usernames.remove(username.toLowerCase());\n                        username = split[1].substring(0, 1).toUpperCase() + split[1].substring(1, split[1].length());\n                        usernames.add(split[1].toLowerCase());\n                    }\n                        return null;\n                case \"rank+\":\n                    return null;\n                case \"[sm]=\":\n                    return null;\n                }\n            }catch(IOException e) { }\n        }\n        return input;\n    }\n\n    String timeStamp;\n    public void run() {\n        try {\n\n            out = new DataOutputStream(socket.getOutputStream());\n            out.flush();\n            in = new DataInputStream(socket.getInputStream());\n\n            while((input = in.readUTF()) != null) {\n                input = decode(input);\n\n                if(input != null) {\n                    if(username != null) {\n                        timeStamp = new SimpleDateFormat(\"[h:mm:ss] \").format(Calendar.getInstance().getTime());\n                        Server.sendGlobalMessage(timeStamp + username +\": \"+input);\n                    } else {\n                        timeStamp = new SimpleDateFormat(\"[h:mm:ss] \").format(Calendar.getInstance().getTime());\n                        Server.sendGlobalMessage(timeStamp + \"Guest \"+ID+\": \"+input);\n                    }\n                }\n            }\n\n        }catch(IOException e) { e.printStackTrace(); } finally { \n            try{\n                out.close();\n                in.close();\n                socket.close();\n            } catch(IOException e) { e.printStackTrace(); }\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>I haven't touched the code of my Server Thread for a while, since it has always worked up until I made my new client.</p>\n"},{"tags":["java","twilio","sms","twilio-twiml","bulksms"],"answers":[{"tags":[],"owner":{"account_id":4723783,"reputation":2524,"user_id":3821022,"display_name":"IObert"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686638673,"creation_date":1686553532,"answer_id":76454274,"question_id":76446754,"body_markdown":"I&#39;m not sure if I understand this question. This sample code seems to show two different things:\r\n\r\n 1. How to use cookies to keep track of an individual conversation without handling phone numbers. It will use different cookies for different conversations within a certain time window. See:\r\n   &gt; This means you can use server-side sessions to keep track of application state between requests. How cool is that? Twilio will expire the cookies for that conversation after four hours of inactivity, as if the user &quot;closed the browser.&quot;\r\n&gt;\r\n&gt; [Source](https://www.twilio.com/docs/sms/tutorials/how-to-create-sms-conversations-java)\r\n\r\n\r\n 2. How to parse a phone number from an incoming request to do whatever you want programmatically (in this case, reading names from a HashMap).","title":"How to receive and reply to SMS messages with Twilio?","body":"<p>I'm not sure if I understand this question. This sample code seems to show two different things:</p>\n<ol>\n<li>How to use cookies to keep track of an individual conversation without handling phone numbers. It will use different cookies for different conversations within a certain time window. See:</li>\n</ol>\n<blockquote>\n<p>This means you can use server-side sessions to keep track of application state between requests. How cool is that? Twilio will expire the cookies for that conversation after four hours of inactivity, as if the user &quot;closed the browser.&quot;</p>\n<p><a href=\"https://www.twilio.com/docs/sms/tutorials/how-to-create-sms-conversations-java\" rel=\"nofollow noreferrer\">Source</a></p>\n</blockquote>\n<ol start=\"2\">\n<li>How to parse a phone number from an incoming request to do whatever you want programmatically (in this case, reading names from a HashMap).</li>\n</ol>\n"}],"owner":{"account_id":5737580,"reputation":724,"user_id":4531180,"display_name":"Nicholas Saunders"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686638673,"creation_date":1686409022,"question_id":76446754,"body_markdown":"Example [code][1]:\r\n\r\n\r\n    import java.util.Arrays;\r\n    import java.util.List;\r\n    import com.twilio.Twilio;\r\n    import com.twilio.rest.notify.v1.service.Notification;\r\n    \r\n    public class Example {\r\n      // Find your Account Sid and Token at twilio.com/user/account\r\n      public static final String ACCOUNT_SID = &quot;ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;;\r\n      public static final String AUTH_TOKEN = &quot;your_auth_token&quot;;\r\n    \r\n      public static final String SERVICE_SID = &quot;ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;;\r\n    \r\n      public static void main(String[] args) {\r\n        // Initialize the client\r\n        Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\r\n    \r\n        List&lt;String&gt; toBindings = Arrays.asList(\r\n        &quot;{\\&quot;binding_type\\&quot;:\\&quot;sms\\&quot;,\\&quot;address\\&quot;:\\&quot;+15555555555\\&quot;}&quot;,\r\n        &quot;{\\&quot;binding_type\\&quot;:\\&quot;facebook-messenger\\&quot;,\\&quot;address\\&quot;:\\&quot;123456789123\\&quot;}&quot;);\r\n    \r\n        Notification notification = Notification\r\n            .creator(SERVICE_SID)\r\n            .setBody(&quot;Hello Bob&quot;)\r\n            .setToBinding(toBindings)\r\n            .create();\r\n    \r\n        System.out.println(notification.getSid());\r\n      }\r\n    }\r\n\r\n\r\nWhich is all well and good.  How are message replies [received][2] and tracked?  Furthermore,how are those replies replied to?\r\n\r\nNot looking to make a chat bot but just to send and receive messages in a somewhat threaded fashion.  *Looking to use TwiML and Java.*\r\n\r\n-------------------\r\n\r\nfurther [reading][3] shows:\r\n\r\n\r\n\r\n\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    \r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import javax.servlet.http.HttpSession;\r\n    \r\n    import com.twilio.twiml.messaging.Body;\r\n    import com.twilio.twiml.messaging.Message;\r\n    import com.twilio.twiml.MessagingResponse;\r\n    import com.twilio.twiml.TwiMLException;\r\n    \r\n    public class TwilioServlet extends HttpServlet {\r\n      public void service(HttpServletRequest request, HttpServletResponse response) throws IOException {\r\n        HttpSession session = request.getSession(true);\r\n        Integer counter = (Integer) session.getAttribute(&quot;counter&quot;);\r\n        if (counter == null) {\r\n          counter = new Integer(0);\r\n        }\r\n    \r\n        /* Increment the counter by one, and store the count in the session. */\r\n        int count = counter.intValue();\r\n        count++;\r\n        session.setAttribute(&quot;counter&quot;, new Integer(count));\r\n    \r\n        // Create a dict of people we know.\r\n        HashMap&lt;String, String&gt; callers = new HashMap&lt;String, String&gt;();\r\n        callers.put(&quot;+14158675308&quot;, &quot;Rey&quot;);\r\n        callers.put(&quot;+12349013030&quot;, &quot;Finn&quot;);\r\n        callers.put(&quot;+12348134522&quot;, &quot;Chewy&quot;);\r\n    \r\n        String fromNumber = request.getParameter(&quot;From&quot;);\r\n        String toNumber = request.getParameter(&quot;To&quot;);\r\n        String fromName = callers.get(fromNumber);\r\n        if (fromName == null) {\r\n          // Use the caller&#39;s name\r\n          fromName = &quot;Friend&quot;;\r\n        }\r\n    \r\n        String message =\r\n            fromName + &quot; has messaged &quot; + toNumber + &quot; &quot; + String.valueOf(count) + &quot; times.&quot;;\r\n    \r\n        // Create a TwiML response and add our friendly message.\r\n        Message sms = new Message.Builder().body(new Body(message)).build();\r\n        MessagingResponse twimlResponse = new MessagingResponse.Builder().message(sms).build();\r\n    \r\n        response.setContentType(&quot;application/xml&quot;);\r\n    \r\n        try {\r\n          response.getWriter().print(twimlResponse.toXml());\r\n        } catch (TwiMLException e) {\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n    }\r\n\r\n\r\nWhich is all well and good...but why use cookies at all?  Because each SMS comes from a specific number why not track messages by their phone number?\r\n\r\nI must be asking the wrong question, or asking the question the wrong way, because the above code isn&#39;t using phone numbers to track conversations.\r\n\r\nWith e-mail, for example, conversations or threads aren&#39;t tracked or managed with cookies but by who sent the message.  The header.  With SMS the equivalent would be the phone number.\r\n\r\nLooking for a high level explanation for why cookies are being used and why phone numbers **aren&#39;t** being used.\r\n\r\n\r\n  [1]: https://stackoverflow.com/q/66482220/4531180\r\n  [2]: https://stackoverflow.com/q/73638256/4531180\r\n  [3]: https://%20https://www.twilio.com/docs/sms/tutorials/how-to-create-sms-conversations-java","title":"How to receive and reply to SMS messages with Twilio?","body":"<p>Example <a href=\"https://stackoverflow.com/q/66482220/4531180\">code</a>:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport com.twilio.Twilio;\nimport com.twilio.rest.notify.v1.service.Notification;\n\npublic class Example {\n  // Find your Account Sid and Token at twilio.com/user/account\n  public static final String ACCOUNT_SID = &quot;ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;;\n  public static final String AUTH_TOKEN = &quot;your_auth_token&quot;;\n\n  public static final String SERVICE_SID = &quot;ISXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;;\n\n  public static void main(String[] args) {\n    // Initialize the client\n    Twilio.init(ACCOUNT_SID, AUTH_TOKEN);\n\n    List&lt;String&gt; toBindings = Arrays.asList(\n    &quot;{\\&quot;binding_type\\&quot;:\\&quot;sms\\&quot;,\\&quot;address\\&quot;:\\&quot;+15555555555\\&quot;}&quot;,\n    &quot;{\\&quot;binding_type\\&quot;:\\&quot;facebook-messenger\\&quot;,\\&quot;address\\&quot;:\\&quot;123456789123\\&quot;}&quot;);\n\n    Notification notification = Notification\n        .creator(SERVICE_SID)\n        .setBody(&quot;Hello Bob&quot;)\n        .setToBinding(toBindings)\n        .create();\n\n    System.out.println(notification.getSid());\n  }\n}\n</code></pre>\n<p>Which is all well and good.  How are message replies <a href=\"https://stackoverflow.com/q/73638256/4531180\">received</a> and tracked?  Furthermore,how are those replies replied to?</p>\n<p>Not looking to make a chat bot but just to send and receive messages in a somewhat threaded fashion.  <em>Looking to use TwiML and Java.</em></p>\n<hr />\n<p>further <a href=\"https://%20https://www.twilio.com/docs/sms/tutorials/how-to-create-sms-conversations-java\" rel=\"nofollow noreferrer\">reading</a> shows:</p>\n<pre><code>import java.io.IOException;\nimport java.util.HashMap;\n\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport javax.servlet.http.HttpSession;\n\nimport com.twilio.twiml.messaging.Body;\nimport com.twilio.twiml.messaging.Message;\nimport com.twilio.twiml.MessagingResponse;\nimport com.twilio.twiml.TwiMLException;\n\npublic class TwilioServlet extends HttpServlet {\n  public void service(HttpServletRequest request, HttpServletResponse response) throws IOException {\n    HttpSession session = request.getSession(true);\n    Integer counter = (Integer) session.getAttribute(&quot;counter&quot;);\n    if (counter == null) {\n      counter = new Integer(0);\n    }\n\n    /* Increment the counter by one, and store the count in the session. */\n    int count = counter.intValue();\n    count++;\n    session.setAttribute(&quot;counter&quot;, new Integer(count));\n\n    // Create a dict of people we know.\n    HashMap&lt;String, String&gt; callers = new HashMap&lt;String, String&gt;();\n    callers.put(&quot;+14158675308&quot;, &quot;Rey&quot;);\n    callers.put(&quot;+12349013030&quot;, &quot;Finn&quot;);\n    callers.put(&quot;+12348134522&quot;, &quot;Chewy&quot;);\n\n    String fromNumber = request.getParameter(&quot;From&quot;);\n    String toNumber = request.getParameter(&quot;To&quot;);\n    String fromName = callers.get(fromNumber);\n    if (fromName == null) {\n      // Use the caller's name\n      fromName = &quot;Friend&quot;;\n    }\n\n    String message =\n        fromName + &quot; has messaged &quot; + toNumber + &quot; &quot; + String.valueOf(count) + &quot; times.&quot;;\n\n    // Create a TwiML response and add our friendly message.\n    Message sms = new Message.Builder().body(new Body(message)).build();\n    MessagingResponse twimlResponse = new MessagingResponse.Builder().message(sms).build();\n\n    response.setContentType(&quot;application/xml&quot;);\n\n    try {\n      response.getWriter().print(twimlResponse.toXml());\n    } catch (TwiMLException e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Which is all well and good...but why use cookies at all?  Because each SMS comes from a specific number why not track messages by their phone number?</p>\n<p>I must be asking the wrong question, or asking the question the wrong way, because the above code isn't using phone numbers to track conversations.</p>\n<p>With e-mail, for example, conversations or threads aren't tracked or managed with cookies but by who sent the message.  The header.  With SMS the equivalent would be the phone number.</p>\n<p>Looking for a high level explanation for why cookies are being used and why phone numbers <strong>aren't</strong> being used.</p>\n"},{"tags":["java","spring","spring-mvc","hashmap"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1686555732,"post_id":76454368,"comment_id":134808903,"body_markdown":"`if (ids == null || ids.isEmpty()) ids = Map.of(&quot;foo&quot;, &quot;bar&quot;); return ids; `!?","body":"<code>if (ids == null || ids.isEmpty()) ids = Map.of(&quot;foo&quot;, &quot;bar&quot;); return ids; </code>!?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1686555822,"post_id":76454368,"comment_id":134808918,"body_markdown":"but +1 for (ease&amp;pragmatism) doing &quot;(sort of) json in properties&quot; ! :)","body":"but +1 for (ease&amp;pragmatism) doing &quot;(sort of) json in properties&quot; ! :)"}],"answers":[{"tags":[],"owner":{"account_id":27780880,"reputation":47,"user_id":21209255,"display_name":"Muhammadqodir Muhsinov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686555211,"creation_date":1686555211,"answer_id":76454463,"question_id":76454368,"body_markdown":"**1. This is how you can define map in .properties file**\r\n\r\n    myMap.key1 = value1\r\n\r\n    myMap.key2 = value2\r\n\r\n    myMap.key3 = value3\r\n\r\n**2. And how to deal with nested map:**\r\n\r\n    nestedMap.key1.nestedKey1=nestedValue1\r\n\r\n    nestedMap.key1.nestedKey2=nestedValue2\r\n\r\n    nestedMap.key2.nestedKey3=nestedValue3\r\n\r\n    nestedMap.key2.nestedKey4=nestedValue4","title":"How to set default value for Map in spring @Value?","body":"<p><strong>1. This is how you can define map in .properties file</strong></p>\n<pre><code>myMap.key1 = value1\n\nmyMap.key2 = value2\n\nmyMap.key3 = value3\n</code></pre>\n<p><strong>2. And how to deal with nested map:</strong></p>\n<pre><code>nestedMap.key1.nestedKey1=nestedValue1\n\nnestedMap.key1.nestedKey2=nestedValue2\n\nnestedMap.key2.nestedKey3=nestedValue3\n\nnestedMap.key2.nestedKey4=nestedValue4\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10624733,"reputation":11,"user_id":7824699,"display_name":"邱勇伟"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686638558,"creation_date":1686555608,"answer_id":76454495,"question_id":76454368,"body_markdown":"   If the map is not empty, it can be written as follows:\r\n\r\n    @Value(&quot;#{${populate.map:{&#39;k1&#39;:&#39;v1&#39;,&#39;k2&#39;:&#39;v2&#39;}}}&quot;)  // result is {&quot;k1&quot;:&quot;v1&quot;,&quot;k2&quot;:&quot;v2&quot;}\r\n    private Map&lt;String, String&gt; map3;\r\n\r\nor:\r\n\r\n    @Value(&quot;#{${test.feature:{k1:{nk1:&#39;v1&#39;}}}}&quot;) Map&lt;String,Map&lt;String,String&gt;&gt; map\r\n\r\notherwise:\r\n\r\n    @Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;) Map&lt;String, String&gt; map3\r\n\r\n","title":"How to set default value for Map in spring @Value?","body":"<p>If the map is not empty, it can be written as follows:</p>\n<pre><code>@Value(&quot;#{${populate.map:{'k1':'v1','k2':'v2'}}}&quot;)  // result is {&quot;k1&quot;:&quot;v1&quot;,&quot;k2&quot;:&quot;v2&quot;}\nprivate Map&lt;String, String&gt; map3;\n</code></pre>\n<p>or:</p>\n<pre><code>@Value(&quot;#{${test.feature:{k1:{nk1:'v1'}}}}&quot;) Map&lt;String,Map&lt;String,String&gt;&gt; map\n</code></pre>\n<p>otherwise:</p>\n<pre><code>@Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;) Map&lt;String, String&gt; map3\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686558593,"creation_date":1686558593,"answer_id":76454813,"question_id":76454368,"body_markdown":"I have tested and this works as you wanted it:\r\n\r\n    @Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;)\r\n    Map&lt;String, Map&lt;String, String&gt;&gt; ids) {\r\n    return ids;\r\n","title":"How to set default value for Map in spring @Value?","body":"<p>I have tested and this works as you wanted it:</p>\n<pre><code>@Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;)\nMap&lt;String, Map&lt;String, String&gt;&gt; ids) {\nreturn ids;\n</code></pre>\n"}],"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":515,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1686638558,"creation_date":1686554500,"question_id":76454368,"body_markdown":"I am having below property in properties file \r\n\r\n```\r\ntest.feature={UPPER:{id:&#39;54&#39;}}\r\n```\r\nBelow is the bean I am tying to get the value from properties file.\r\n```\r\n    @Bean\r\n    public Map&lt;String, Map&lt;String, String&gt;&gt; test(\r\n        @Value(&quot;#{${test.feature}}&quot;)\r\n        Map&lt;String, Map&lt;String, String&gt;&gt; ids) {\r\n\r\n        return ids;\r\n    }\r\n```\r\n\r\nIt&#39;s working fine. But if we not configure the property, want to set the default value.\r\n\r\nI tried in different ways but nothing helps.\r\n\r\n```\r\n@Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;)\r\ngetting IllegalStateException: Cannot convert value of type &#39;java.util.ArrayList&#39; to required type &#39;java.util.Map&#39;: no matching editors or conversion strategy found. \r\n\r\n@Value(&quot;#{${test.feature} ?: { : }}&quot;)\r\n\r\n@Value(&quot;#{${test.feature:}}&quot;)\r\n```\r\nI have tried above ways but nothing helps.\r\n\r\nNote: I&#39;m using spring 5.x and not in spring boot.\r\n\r\nHow to fix this?","title":"How to set default value for Map in spring @Value?","body":"<p>I am having below property in properties file</p>\n<pre><code>test.feature={UPPER:{id:'54'}}\n</code></pre>\n<p>Below is the bean I am tying to get the value from properties file.</p>\n<pre><code>    @Bean\n    public Map&lt;String, Map&lt;String, String&gt;&gt; test(\n        @Value(&quot;#{${test.feature}}&quot;)\n        Map&lt;String, Map&lt;String, String&gt;&gt; ids) {\n\n        return ids;\n    }\n</code></pre>\n<p>It's working fine. But if we not configure the property, want to set the default value.</p>\n<p>I tried in different ways but nothing helps.</p>\n<pre><code>@Value(&quot;#{${test.feature:{T(java.util.Collections).emptyMap()}}}&quot;)\ngetting IllegalStateException: Cannot convert value of type 'java.util.ArrayList' to required type 'java.util.Map': no matching editors or conversion strategy found. \n\n@Value(&quot;#{${test.feature} ?: { : }}&quot;)\n\n@Value(&quot;#{${test.feature:}}&quot;)\n</code></pre>\n<p>I have tried above ways but nothing helps.</p>\n<p>Note: I'm using spring 5.x and not in spring boot.</p>\n<p>How to fix this?</p>\n"},{"tags":["java","vaadin","crud"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1686577261,"post_id":76457133,"comment_id":134813575,"body_markdown":"Please provide\na [MRE](https://stackoverflow.com/help/minimal-reproducible-example)","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">MRE</a>"},{"owner":{"account_id":12280349,"reputation":10212,"user_id":8962195,"display_name":"Tatu Lund"},"score":0,"creation_date":1686636548,"post_id":76457133,"comment_id":134822148,"body_markdown":"Are you using Binder to validate the form? If so, the saving should not be possible if there is a validation error.","body":"Are you using Binder to validate the form? If so, the saving should not be possible if there is a validation error."},{"owner":{"account_id":8619641,"reputation":23,"user_id":6455058,"display_name":"Muhammet Kurt"},"score":0,"creation_date":1686638655,"post_id":76457133,"comment_id":134822459,"body_markdown":"I&#39;ve added my createEditor method which includes binder. I want to show a warning message if carrierDragDrop has no value. carrierDragDrop is a custom-made class and I&#39;m checking its value in crud&#39;s saveListener.","body":"I&#39;ve added my createEditor method which includes binder. I want to show a warning message if carrierDragDrop has no value. carrierDragDrop is a custom-made class and I&#39;m checking its value in crud&#39;s saveListener."}],"owner":{"account_id":8619641,"reputation":23,"user_id":6455058,"display_name":"Muhammet Kurt"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686638462,"creation_date":1686576328,"question_id":76457133,"body_markdown":"I created vaadin crud component and its editor. When user clicks the row, editor opens automatically. Then if user makes change and clicks save, editor window closes automatically. Everything is fine until now, but if user makes some wrong changes, I&#39;m showing vaadins warning message and editor still closes automatically. I just want to make crud editor remain on screen only if warning message created. \r\n\r\nI couldn&#39;t find any solution on vaadin&#39;s documentation. By the way, I have created my own enhanced crud object which extends crud object.\r\nMy crud&#39;s save listener runs a method and the method doesn&#39;t return any value. Editor always closes once the below method is run. \r\n\r\nMy vaadin version: 14\r\n\r\n    private BinderCrudEditor&lt;Account&gt; createEditor() {\r\n    \tTextField nameField = new TextField(&quot;Test textfield&quot;);\r\n    \tnameField.setWidth(&quot;300px&quot;);\r\n    \tCheckbox disableField = new Checkbox(&quot;Disable&quot;);\r\n    \tcarrierDragDrop = new CarrierDragDrop(getParameters());\r\n    \tcarrierDragDrop.setReadOnly(isReadOnly());\r\n    \r\n    \tBinder&lt;Account&gt; binder = new Binder&lt;&gt;(Account.class);\r\n    \tbinder.forField(nameField).asRequired(&quot;message1&quot;).withValidator(this::validateForSameNameCarrier, &quot;message2&quot;)\r\n    \t\t\t.withValidator(this::validateForSameNameRoutingClass, &quot;message3&quot;)\r\n    \t\t\t.withValidator(this::validateForSameNameAccounts, &quot;message4&quot;).bind(Account::getName, Account::setName);\r\n    \tbinder.forField(disableField).bind(account -&gt; !account.isActive(), (account, disable) -&gt; account.setActive(!disable));\r\n    \tcarrierDragDrop.setValueChangeListener(event -&gt; {\r\n    \t\tif (event.isFromClient()) {\r\n    \t\t\tcrud.setDirty(true);\r\n    \t\t}\r\n    \t});\r\n    \r\n    \tMixedVerticalLayout layout = new MixedVerticalLayout();\r\n    \tlayout.getRoot(false).add(nameField, carrierDragDrop, disableField);\r\n    \treturn new BinderCrudEditor&lt;&gt;(binder, layout);\r\n    }\r\n\r\n","title":"How to make Vaadin Crud Editor window remain on screen once save is clicked?","body":"<p>I created vaadin crud component and its editor. When user clicks the row, editor opens automatically. Then if user makes change and clicks save, editor window closes automatically. Everything is fine until now, but if user makes some wrong changes, I'm showing vaadins warning message and editor still closes automatically. I just want to make crud editor remain on screen only if warning message created.</p>\n<p>I couldn't find any solution on vaadin's documentation. By the way, I have created my own enhanced crud object which extends crud object.\nMy crud's save listener runs a method and the method doesn't return any value. Editor always closes once the below method is run.</p>\n<p>My vaadin version: 14</p>\n<pre><code>private BinderCrudEditor&lt;Account&gt; createEditor() {\n    TextField nameField = new TextField(&quot;Test textfield&quot;);\n    nameField.setWidth(&quot;300px&quot;);\n    Checkbox disableField = new Checkbox(&quot;Disable&quot;);\n    carrierDragDrop = new CarrierDragDrop(getParameters());\n    carrierDragDrop.setReadOnly(isReadOnly());\n\n    Binder&lt;Account&gt; binder = new Binder&lt;&gt;(Account.class);\n    binder.forField(nameField).asRequired(&quot;message1&quot;).withValidator(this::validateForSameNameCarrier, &quot;message2&quot;)\n            .withValidator(this::validateForSameNameRoutingClass, &quot;message3&quot;)\n            .withValidator(this::validateForSameNameAccounts, &quot;message4&quot;).bind(Account::getName, Account::setName);\n    binder.forField(disableField).bind(account -&gt; !account.isActive(), (account, disable) -&gt; account.setActive(!disable));\n    carrierDragDrop.setValueChangeListener(event -&gt; {\n        if (event.isFromClient()) {\n            crud.setDirty(true);\n        }\n    });\n\n    MixedVerticalLayout layout = new MixedVerticalLayout();\n    layout.getRoot(false).add(nameField, carrierDragDrop, disableField);\n    return new BinderCrudEditor&lt;&gt;(binder, layout);\n}\n</code></pre>\n"},{"tags":["java","java-8","java-stream","map-function"],"comments":[{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1435303341,"post_id":31058755,"comment_id":50154064,"body_markdown":"or `.map(this::maybeReturnsNull).map(Optional::ofNullable).map(o -&gt; o.orElse(defaultValue))`","body":"or <code>.map(this::maybeReturnsNull).map(Optional::ofNullable).map(o -&gt; o.orElse(defaultValue))</code>"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1435310185,"post_id":31058755,"comment_id":50157979,"body_markdown":"@assylias: even if it doesn’t make a difference in performance, I think a single `.map(x -&gt; Optional.ofNullable(maybeReturnsNull(x)).orElse(defaultValue))` should be preferred over three mapping steps here. But well, it’s still a matter of taste…","body":"@assylias: even if it doesn’t make a difference in performance, I think a single <code>.map(x -&gt; Optional.ofNullable(maybeReturnsNull(x)).orElse(defaultValue&zwnj;&#8203;))</code> should be preferred over three mapping steps here. But well, it’s still a matter of taste…"}],"answers":[{"tags":[],"owner":{"account_id":1416522,"reputation":91354,"user_id":3553087,"display_name":"Brian Goetz"},"down_vote_count":0,"up_vote_count":29,"is_accepted":true,"score":29,"last_activity_date":1435260164,"creation_date":1435260164,"answer_id":31059039,"question_id":31058755,"body_markdown":"Either is fine.  Pick the one that seems more readable to you.  If the calculation naturally decomposes, as this one does, then the multiple maps is probably more readable.  Some calculations won&#39;t naturally decompose, in which case you&#39;re stuck at the former.  In neither case should you be worrying that one is significantly more performant than the other; that&#39;s largely a non-consideration.","title":"Using multiple map functions vs. a block statement in a map in a java stream","body":"<p>Either is fine.  Pick the one that seems more readable to you.  If the calculation naturally decomposes, as this one does, then the multiple maps is probably more readable.  Some calculations won't naturally decompose, in which case you're stuck at the former.  In neither case should you be worrying that one is significantly more performant than the other; that's largely a non-consideration.</p>\n"},{"tags":[],"owner":{"account_id":2444028,"reputation":3478,"user_id":2131816,"display_name":"Arun Pratap Singh"},"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1435286559,"creation_date":1435286559,"answer_id":31064004,"question_id":31058755,"body_markdown":"java has provided a dedicated API to handle with &quot;null&quot;.\r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\r\n\r\n","title":"Using multiple map functions vs. a block statement in a map in a java stream","body":"<p>java has provided a dedicated API to handle with \"null\".</p>\n\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html\" rel=\"nofollow\">https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html</a></p>\n"},{"tags":[],"owner":{"account_id":27532212,"reputation":1,"user_id":21010529,"display_name":"Mohammed Yaseen M"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686637649,"creation_date":1686637649,"answer_id":76462178,"question_id":31058755,"body_markdown":"use filter before map.\r\n\r\n    data.stream().filter(Objects::nonNull).\r\n        .map(x -&gt; x*x)\r\n    \r\n    filter(Objects::nonNull) try this instead .","title":"Using multiple map functions vs. a block statement in a map in a java stream","body":"<p>use filter before map.</p>\n<pre><code>data.stream().filter(Objects::nonNull).\n    .map(x -&gt; x*x)\n\nfilter(Objects::nonNull) try this instead .\n</code></pre>\n"}],"owner":{"account_id":1484336,"reputation":2037,"user_id":1392894,"accept_rate":61,"display_name":"Brian Ecker"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30806,"favorite_count":0,"down_vote_count":0,"up_vote_count":35,"accepted_answer_id":31059039,"answer_count":3,"score":35,"last_activity_date":1686637649,"creation_date":1435259207,"question_id":31058755,"body_markdown":"Say I have the following code\r\n\r\n    data.stream()\r\n        .map(x -&gt; {\r\n            Object a = maybeReturnsNull(x);\r\n            return a == null ? defaultValue : a;\r\n        })\r\n\r\nI have some function that might be returning `null`, and I&#39;m applying it to an element of the stream. I then want to make sure that any `null` results get changed to some default value instead. Is there any significant difference between using two maps as in the following example, as compared to using the previous example that defines a helper variable `a` and uses a code block in the lambda expression? \r\n\r\n    data.stream()\r\n        .map(x -&gt; maybeReturnsNull(x))\r\n        .map(x -&gt; x == null ? defaultValue : x)\r\n\r\nIs there a standard on where or not to avoid using block statements with lambda functions? ","title":"Using multiple map functions vs. a block statement in a map in a java stream","body":"<p>Say I have the following code</p>\n\n<pre><code>data.stream()\n    .map(x -&gt; {\n        Object a = maybeReturnsNull(x);\n        return a == null ? defaultValue : a;\n    })\n</code></pre>\n\n<p>I have some function that might be returning <code>null</code>, and I'm applying it to an element of the stream. I then want to make sure that any <code>null</code> results get changed to some default value instead. Is there any significant difference between using two maps as in the following example, as compared to using the previous example that defines a helper variable <code>a</code> and uses a code block in the lambda expression? </p>\n\n<pre><code>data.stream()\n    .map(x -&gt; maybeReturnsNull(x))\n    .map(x -&gt; x == null ? defaultValue : x)\n</code></pre>\n\n<p>Is there a standard on where or not to avoid using block statements with lambda functions? </p>\n"},{"tags":["java","json","string"],"comments":[{"owner":{"account_id":20374110,"reputation":4203,"user_id":14945696,"display_name":"Ghost"},"score":0,"creation_date":1686626242,"post_id":76461479,"comment_id":134821239,"body_markdown":"Do you want `body=registration, done, successful` using Java?","body":"Do you want <code>body=registration, done, successful</code> using Java?"},{"owner":{"account_id":372682,"reputation":22426,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1686626526,"post_id":76461479,"comment_id":134821257,"body_markdown":"The string doesn&#39;t contain a valid JSON document. The syntax is wrong.","body":"The string doesn&#39;t contain a valid JSON document. The syntax is wrong."},{"owner":{"account_id":9108841,"reputation":189,"user_id":6778300,"display_name":"DeepakVerma"},"score":0,"creation_date":1686627545,"post_id":76461479,"comment_id":134821341,"body_markdown":"@KevinM.Mansour, Instead of this output: {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful&quot;,&quot;click on this to know more, serviceCenter&quot;:&quot;+910000000000&quot;}],\nI want  {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful,click on this to know more&quot;, &quot;serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}","body":"@KevinM.Mansour, Instead of this output: {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;&zwnj;&#8203;:1686616249817,&quot;read&zwnj;&#8203;&quot;:0,&quot;status&quot;:-1,&quot;typ&zwnj;&#8203;e&quot;:1,&quot;subject&quot;:null,&zwnj;&#8203;&quot;body&quot;:&quot;registration done successful&quot;,&quot;click on this to know more, serviceCenter&quot;:&quot;+910000000000&quot;}], I want  {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;&zwnj;&#8203;:1686616249817,&quot;read&zwnj;&#8203;&quot;:0,&quot;status&quot;:-1,&quot;typ&zwnj;&#8203;e&quot;:1,&quot;subject&quot;:null,&zwnj;&#8203;&quot;body&quot;:&quot;registration done successful,click on this to know more&quot;, &quot;serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}"}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1166,"user_id":16048914,"display_name":"David Weber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686637606,"creation_date":1686637292,"answer_id":76462147,"question_id":76461479,"body_markdown":"You could try this:\r\n\r\n    String strJSON = &quot;{items=[\r\n    {id=1647, \r\n    address=sample, \r\n    person=null, \r\n    date=1686616249817, \r\n    read=0, \r\n    status=-1, \r\n    type=1, \r\n    subject=null, \r\n    body=\\&quot;registration done successful, click on this to know more\\&quot;, \r\n    serviceCenter=+910000000000}], \r\n    total=1570}&quot;\r\n    .replaceAll(&quot;=&quot;,&quot;:&quot;);\r\n\r\n \r\n\r\n    System.out.println(JsonPath.parse(strJSON).jsonString())\r\n\r\nYou need to escape the double quotes. \r\nPersonal Tip: Check Out the json Syntax, this Takes ~60 minutes. :)\r\nHere is a nice short article:\r\nhttps://www.tutorialspoint.com/json/json_syntax.htm\r\n\r\nIn general, you must put Strings between doublequotes in Json. The comma is used to split the member fields, like parameters in Java methods. \r\nAnd because you are in a String already, you need to escape the doublequotes.","title":"how to convert string to json having comma in value","body":"<p>You could try this:</p>\n<pre><code>String strJSON = &quot;{items=[\n{id=1647, \naddress=sample, \nperson=null, \ndate=1686616249817, \nread=0, \nstatus=-1, \ntype=1, \nsubject=null, \nbody=\\&quot;registration done successful, click on this to know more\\&quot;, \nserviceCenter=+910000000000}], \ntotal=1570}&quot;\n.replaceAll(&quot;=&quot;,&quot;:&quot;);\n\n\n\nSystem.out.println(JsonPath.parse(strJSON).jsonString())\n</code></pre>\n<p>You need to escape the double quotes.\nPersonal Tip: Check Out the json Syntax, this Takes ~60 minutes. :)\nHere is a nice short article:\n<a href=\"https://www.tutorialspoint.com/json/json_syntax.htm\" rel=\"nofollow noreferrer\">https://www.tutorialspoint.com/json/json_syntax.htm</a></p>\n<p>In general, you must put Strings between doublequotes in Json. The comma is used to split the member fields, like parameters in Java methods.\nAnd because you are in a String already, you need to escape the doublequotes.</p>\n"}],"owner":{"account_id":9108841,"reputation":189,"user_id":6778300,"display_name":"DeepakVerma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686637606,"creation_date":1686626040,"question_id":76461479,"body_markdown":"    import com.jayway.jsonpath.JsonPath;\r\n    \r\n     String strJSON = &quot;{items=[{id=1647, address=sample, person=null, date=1686616249817, read=0, status=-1, type=1, subject=null, body=registration done successful, click on this to know more, serviceCenter=+910000000000}], total=1570}&quot;.replaceAll(&quot;=&quot;,&quot;:&quot;);\r\n     System.out.println(JsonPath.parse(strJSON).jsonString());\r\n\r\nIn above sample key &quot;body &quot; value have comma\r\n\r\nInstead of this output: \r\n\r\n    {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful&quot;,&quot;click on this to know more, serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}\r\n\r\nI want output to be \r\n\r\n    {&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful,click on this to know more&quot;, &quot;serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}","title":"how to convert string to json having comma in value","body":"<pre><code>import com.jayway.jsonpath.JsonPath;\n\n String strJSON = &quot;{items=[{id=1647, address=sample, person=null, date=1686616249817, read=0, status=-1, type=1, subject=null, body=registration done successful, click on this to know more, serviceCenter=+910000000000}], total=1570}&quot;.replaceAll(&quot;=&quot;,&quot;:&quot;);\n System.out.println(JsonPath.parse(strJSON).jsonString());\n</code></pre>\n<p>In above sample key &quot;body &quot; value have comma</p>\n<p>Instead of this output:</p>\n<pre><code>{&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful&quot;,&quot;click on this to know more, serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}\n</code></pre>\n<p>I want output to be</p>\n<pre><code>{&quot;items&quot;:[{&quot;id&quot;:1647,&quot;address&quot;:&quot;sample&quot;,&quot;person&quot;:null,&quot;date&quot;:1686616249817,&quot;read&quot;:0,&quot;status&quot;:-1,&quot;type&quot;:1,&quot;subject&quot;:null,&quot;body&quot;:&quot;registration done successful,click on this to know more&quot;, &quot;serviceCenter&quot;:&quot;+910000000000&quot;}],&quot;total&quot;:1570}\n</code></pre>\n"},{"tags":["java","mysql","spring-boot","date"],"comments":[{"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"score":0,"creation_date":1686637130,"post_id":76462029,"comment_id":134822230,"body_markdown":"Can you provide the entity? Are you using any custom Serializer/Deserializer class?","body":"Can you provide the entity? Are you using any custom Serializer/Deserializer class?"},{"owner":{"account_id":28189145,"reputation":1,"user_id":21544824,"display_name":"Kalaiselvan K"},"score":1,"creation_date":1686637482,"post_id":76462029,"comment_id":134822276,"body_markdown":"@mahfujasif edited the question and added entity class","body":"@mahfujasif edited the question and added entity class"},{"owner":{"account_id":1674328,"reputation":2652,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1686722720,"post_id":76462029,"comment_id":134836298,"body_markdown":"Date without time is a mess when timezone is involved as a date is assume to be at a fixed time of day (midnight I believe). And a UTC date is actually not the same date in Australia as it is in California. You already have the datetime so I would remove the date and use datetime to get the correct date.","body":"Date without time is a mess when timezone is involved as a date is assume to be at a fixed time of day (midnight I believe). And a UTC date is actually not the same date in Australia as it is in California. You already have the datetime so I would remove the date and use datetime to get the correct date."}],"owner":{"account_id":28189145,"reputation":1,"user_id":21544824,"display_name":"Kalaiselvan K"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686637451,"creation_date":1686635857,"question_id":76462029,"body_markdown":"I am developing application, which will have different timezone users data.\r\nSo I planned to store the date and datetime in UTC (MYSQL)\r\n\r\nIn application level I have set the timezone as UTC using below lines of code at the start time application startup,\r\n\r\n```\r\n`@PostConstruct\r\n    public void init(){\r\n        TimeZone.setDefault(TimeZone.getTimeZone(&quot;UTC&quot;));   // It will set UTC timezone\r\n        System.out.println(&quot;Spring boot application running in UTC timezone :&quot;+ new Date());   // It will print UTC timezone\r\n    }`\r\n```\r\n\r\n\r\nWhile storing the date&#39;s and datetimes its stored properly in the database.\r\n\r\nBut when I retrieve the data from the database its always coming less than one day.\r\n\r\nFor eg.\r\n\r\nI have two columns (created_date and created_datetime) in the table called users\r\ncreated_date -&gt; stores only date - 2023-06-13\r\ncreated_datetime -&gt; stores date and time - 2023-06-13 10:49:09\r\n\r\nwhen I retrieve the data using JPA created_datetime column value is coming as it is, but created_date column value is coming as 2023-06-12 (-1 day)\r\n\r\nIn the entity level i have used LocalDate for created_date and LocalDateTime for created_datetime,\r\n\r\nBelow is my mysql timezone details\r\n\r\n```\r\n`SELECT @@global.time_zone, @@session.time_zone;`\r\n```\r\n\r\n[Mysql TimeZone Info](https://i.stack.imgur.com/UhUPg.png) \r\n\r\napplication.properties file i am using below values\r\n\r\n*spring.datasource.url=jdbc:mysql://localhost:3306/**********?connectionTimeZone=UTC\r\nspring.jpa.properties.hibernate.jdbc.time_zone=UTC*\r\n\r\nI am using *mysql-connector-j-8.0.31.jar.*\r\n\r\nMy entity class\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Entity\r\n    @Table(name = &quot;user&quot;)\r\n    @Getter\r\n    @Setter\r\n    public class User {\r\n\r\n    \t@Id\r\n    \t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n    \tprivate Long id;\r\n\r\n    \t@Column(name = &quot;created_date&quot;)\r\n    \tprivate LocalDate createdDate;\r\n\r\n    \t@Column(name = &quot;created_datetime&quot;)\r\n    \tprivate LocalDateTime createdDateTime;\r\n\r\n    \t@Column(name = &quot;updated_date&quot;)\r\n    \tprivate LocalDate updatedDate;\r\n\r\n    \t@Column(name = &quot;updated_datetime&quot;)\r\n    \tprivate LocalDateTime updatedDateTime;\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nI have tried so many things, but nothing resolved my issue.\r\nPlease give your solutions/suggestions","title":"springboot switched one day back (-1) after reading from db (mysql)","body":"<p>I am developing application, which will have different timezone users data.\nSo I planned to store the date and datetime in UTC (MYSQL)</p>\n<p>In application level I have set the timezone as UTC using below lines of code at the start time application startup,</p>\n<pre><code>`@PostConstruct\n    public void init(){\n        TimeZone.setDefault(TimeZone.getTimeZone(&quot;UTC&quot;));   // It will set UTC timezone\n        System.out.println(&quot;Spring boot application running in UTC timezone :&quot;+ new Date());   // It will print UTC timezone\n    }`\n</code></pre>\n<p>While storing the date's and datetimes its stored properly in the database.</p>\n<p>But when I retrieve the data from the database its always coming less than one day.</p>\n<p>For eg.</p>\n<p>I have two columns (created_date and created_datetime) in the table called users\ncreated_date -&gt; stores only date - 2023-06-13\ncreated_datetime -&gt; stores date and time - 2023-06-13 10:49:09</p>\n<p>when I retrieve the data using JPA created_datetime column value is coming as it is, but created_date column value is coming as 2023-06-12 (-1 day)</p>\n<p>In the entity level i have used LocalDate for created_date and LocalDateTime for created_datetime,</p>\n<p>Below is my mysql timezone details</p>\n<pre><code>`SELECT @@global.time_zone, @@session.time_zone;`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/UhUPg.png\" rel=\"nofollow noreferrer\">Mysql TimeZone Info</a></p>\n<p>application.properties file i am using below values</p>\n<p><em>spring.datasource.url=jdbc:mysql://localhost:3306/</em>********<em>?connectionTimeZone=UTC\nspring.jpa.properties.hibernate.jdbc.time_zone=UTC</em></p>\n<p>I am using <em>mysql-connector-j-8.0.31.jar.</em></p>\n<p>My entity class</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Entity\n@Table(name = \"user\")\n@Getter\n@Setter\npublic class User {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = \"created_date\")\n    private LocalDate createdDate;\n\n    @Column(name = \"created_datetime\")\n    private LocalDateTime createdDateTime;\n\n    @Column(name = \"updated_date\")\n    private LocalDate updatedDate;\n\n    @Column(name = \"updated_datetime\")\n    private LocalDateTime updatedDateTime;\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I have tried so many things, but nothing resolved my issue.\nPlease give your solutions/suggestions</p>\n"},{"tags":["java","excel","csv"],"comments":[{"owner":{"account_id":6520078,"reputation":823,"user_id":5044592,"accept_rate":47,"display_name":"Murali krishna"},"score":1,"creation_date":1450936013,"post_id":34447832,"comment_id":56637668,"body_markdown":"This link gives you so many answers choose the best. http://stackoverflow.com/questions/3571223/how-do-i-get-the-file-extension-of-a-file-in-java","body":"This link gives you so many answers choose the best. <a href=\"http://stackoverflow.com/questions/3571223/how-do-i-get-the-file-extension-of-a-file-in-java\" title=\"how do i get the file extension of a file in java\">stackoverflow.com/questions/3571223/&hellip;</a>"},{"owner":{"account_id":1085259,"reputation":78314,"user_id":1081110,"display_name":"Dawood ibn Kareem"},"score":0,"creation_date":1450936845,"post_id":34447832,"comment_id":56637927,"body_markdown":"`if( filename.endsWith(&quot;.xlsx&quot;)) { ...`","body":"<code>if( filename.endsWith(&quot;.xlsx&quot;)) { ...</code>"}],"answers":[{"tags":[],"owner":{"account_id":6947199,"reputation":2802,"user_id":5331198,"display_name":"thegauravmahawar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1450936149,"creation_date":1450936149,"answer_id":34447916,"question_id":34447832,"body_markdown":"You can use [`probeContentType(Path path)`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType%28java.nio.file.Path%29) for this.\r\n\r\n&gt; Probes the content type of a file.\r\n\r\nIf the `content-type` is `text/csv` it is a `.csv` file. If the `content-type` is `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet` it is a `.xlsx` file.\r\n\r\nYou should try something like:\r\n\r\n    File file = new File(&quot;some path&quot;);\r\n    Path filePath = file.toPath();\r\n    String contentType = probeContentType(filePath);\r\n    if(&quot;text/csv&quot;.equals(contentType)) { \r\n      ...\r\n    }","title":"Checking type of a file (csv or excel file(xlsx)) in java","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#probeContentType%28java.nio.file.Path%29\" rel=\"nofollow\"><code>probeContentType(Path path)</code></a> for this.</p>\n\n<blockquote>\n  <p>Probes the content type of a file.</p>\n</blockquote>\n\n<p>If the <code>content-type</code> is <code>text/csv</code> it is a <code>.csv</code> file. If the <code>content-type</code> is <code>application/vnd.openxmlformats-officedocument.spreadsheetml.sheet</code> it is a <code>.xlsx</code> file.</p>\n\n<p>You should try something like:</p>\n\n<pre><code>File file = new File(\"some path\");\nPath filePath = file.toPath();\nString contentType = probeContentType(filePath);\nif(\"text/csv\".equals(contentType)) { \n  ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4523415,"reputation":1,"user_id":3675957,"display_name":"banarsiamin"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1686637234,"creation_date":1505124007,"answer_id":46152949,"question_id":34447832,"body_markdown":"      &lt;?php\r\n      $mimes = array(&#39;application/vnd.ms-excel&#39;,&#39;text/plain&#39;,&#39;text/csv&#39;,&#39;text/tsv&#39;);\r\n        if(in_array($_FILES[&#39;file&#39;][&#39;type&#39;],$mimes)){\r\n          // do something\r\n        } else {\r\n          die(&quot;Sorry, mime type not allowed&quot;);\r\n        }\r\n    \r\n    ?&gt;","title":"Checking type of a file (csv or excel file(xlsx)) in java","body":"<pre><code>  &lt;?php\n  $mimes = array('application/vnd.ms-excel','text/plain','text/csv','text/tsv');\n    if(in_array($_FILES['file']['type'],$mimes)){\n      // do something\n    } else {\n      die(&quot;Sorry, mime type not allowed&quot;);\n    }\n\n?&gt;\n</code></pre>\n"}],"owner":{"account_id":7390124,"reputation":73,"user_id":5623794,"accept_rate":17,"display_name":"R.Y.H"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8483,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1686637234,"creation_date":1450935639,"question_id":34447832,"body_markdown":"I need to upload a file. Before I upload it, I need to know if the file is either csv or excel file(xlsx). If it is csv or excel file I will continue else exit.\r\nHow can I know the type of a file in java by using its path.","title":"Checking type of a file (csv or excel file(xlsx)) in java","body":"<p>I need to upload a file. Before I upload it, I need to know if the file is either csv or excel file(xlsx). If it is csv or excel file I will continue else exit.\nHow can I know the type of a file in java by using its path.</p>\n"},{"tags":["java","android","firebase","firebase-authentication"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1686657771,"post_id":76462057,"comment_id":134826425,"body_markdown":"What is the exact line of code that produces that error?","body":"What is the exact line of code that produces that error?"},{"owner":{"account_id":26831827,"reputation":1,"user_id":20419673,"display_name":"Deepak Sharma"},"score":0,"creation_date":1686727055,"post_id":76462057,"comment_id":134837104,"body_markdown":"it does not say where the problem is, in log cat","body":"it does not say where the problem is, in log cat"}],"owner":{"account_id":26831827,"reputation":1,"user_id":20419673,"display_name":"Deepak Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686637030,"creation_date":1686636161,"question_id":76462057,"body_markdown":"I am getting \r\n\r\n&gt; &quot;E/AndroidRuntime: FATAL EXCEPTION: main&quot; and &quot; \r\n&gt; android.app.RemoteServiceException: Context.startForegroundService()\r\n&gt; did not then call Service.startForeground(): ServiceRecord&quot; as error\r\n&gt; when OTP arrives from firebase or after some specific time.\r\n\r\nMy code.\r\n\r\n \r\n\r\n    PhoneAuthProvider.getInstance().verifyPhoneNumber(\r\n                    &quot;+91&quot; + phone.getText().toString(),\r\n                    30,\r\n                    TimeUnit.SECONDS,\r\n                    LoginUser.this,\r\n                    new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\r\n                        @Override\r\n                        public void onVerificationCompleted(@NonNull PhoneAuthCredential phoneAuthCredential) {\r\n                            progressDialog.dismiss();\r\n                            getOtp.setVisibility(View.VISIBLE);\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onVerificationFailed(@NonNull FirebaseException e) {\r\n                            progressDialog.dismiss();\r\n                            getOtp.setVisibility(View.VISIBLE);\r\n                            Toast.makeText(getApplicationContext(),e.getMessage(), Toast.LENGTH_SHORT).show();\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onCodeSent(@NonNull String s, @NonNull PhoneAuthProvider.ForceResendingToken forceResendingToken) {\r\n                            super.onCodeSent(s, forceResendingToken);\r\n    \r\n                            Intent intent = new Intent(LoginUser.this, EnterOtp.class);\r\n                            intent.putExtra(&quot;backEndOtp&quot;, s);\r\n                            intent.putExtra(&quot;mobile&quot;, phone.getText().toString());\r\n                            startActivity(intent);\r\n                            progressDialog.dismiss();\r\n                            getOtp.setVisibility(View.VISIBLE);\r\n                            finish();\r\n    \r\n                        }\r\n                    }\r\n            );\r\n\r\n\r\n\r\nI tried using try/catch in my code but it did&#39;nt work","title":"Getting &quot;E/AndroidRuntime: FATAL EXCEPTION: main&quot; when OTP arrives from firebase","body":"<p>I am getting</p>\n<blockquote>\n<p>&quot;E/AndroidRuntime: FATAL EXCEPTION: main&quot; and &quot;\nandroid.app.RemoteServiceException: Context.startForegroundService()\ndid not then call Service.startForeground(): ServiceRecord&quot; as error\nwhen OTP arrives from firebase or after some specific time.</p>\n</blockquote>\n<p>My code.</p>\n<pre><code>PhoneAuthProvider.getInstance().verifyPhoneNumber(\n                &quot;+91&quot; + phone.getText().toString(),\n                30,\n                TimeUnit.SECONDS,\n                LoginUser.this,\n                new PhoneAuthProvider.OnVerificationStateChangedCallbacks() {\n                    @Override\n                    public void onVerificationCompleted(@NonNull PhoneAuthCredential phoneAuthCredential) {\n                        progressDialog.dismiss();\n                        getOtp.setVisibility(View.VISIBLE);\n                    }\n\n                    @Override\n                    public void onVerificationFailed(@NonNull FirebaseException e) {\n                        progressDialog.dismiss();\n                        getOtp.setVisibility(View.VISIBLE);\n                        Toast.makeText(getApplicationContext(),e.getMessage(), Toast.LENGTH_SHORT).show();\n                    }\n\n                    @Override\n                    public void onCodeSent(@NonNull String s, @NonNull PhoneAuthProvider.ForceResendingToken forceResendingToken) {\n                        super.onCodeSent(s, forceResendingToken);\n\n                        Intent intent = new Intent(LoginUser.this, EnterOtp.class);\n                        intent.putExtra(&quot;backEndOtp&quot;, s);\n                        intent.putExtra(&quot;mobile&quot;, phone.getText().toString());\n                        startActivity(intent);\n                        progressDialog.dismiss();\n                        getOtp.setVisibility(View.VISIBLE);\n                        finish();\n\n                    }\n                }\n        );\n</code></pre>\n<p>I tried using try/catch in my code but it did'nt work</p>\n"},{"tags":["java","json","file","import","unzip"],"comments":[{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1685955871,"post_id":76404731,"comment_id":134727848,"body_markdown":"Your question is quite broad, and feels kinda like a [&quot;Do my work for me&quot;](https://meta.stackoverflow.com/questions/274630/should-we-add-a-do-my-work-for-me-close-reason) question to me. Can you show us what you&#39;ve tried so far? TIP: If you have no idea how to start, you can just paste the above question into ChatGPT (I got a decent answer just by using the above question, with the mention you are using Spring Boot).","body":"Your question is quite broad, and feels kinda like a <a href=\"https://meta.stackoverflow.com/questions/274630/should-we-add-a-do-my-work-for-me-close-reason\">&quot;Do my work for me&quot;</a> question to me. Can you show us what you&#39;ve tried so far? TIP: If you have no idea how to start, you can just paste the above question into ChatGPT (I got a decent answer just by using the above question, with the mention you are using Spring Boot)."},{"owner":{"account_id":28196096,"reputation":11,"user_id":21550705,"display_name":"hemanth reddy m"},"score":0,"creation_date":1686035374,"post_id":76404731,"comment_id":134740072,"body_markdown":"As client confidentiality, I will not be able to share the code snipets. I tried to write the file to a /tmp/Path and read the file using fileinputSteam and converted it into String and casted it to org.json.jsonObject. It is providing me a hashmap. How can it be used to cast to DTO&#39;s . As map&#39;s cannot be casted.","body":"As client confidentiality, I will not be able to share the code snipets. I tried to write the file to a /tmp/Path and read the file using fileinputSteam and converted it into String and casted it to org.json.jsonObject. It is providing me a hashmap. How can it be used to cast to DTO&#39;s . As map&#39;s cannot be casted."},{"owner":{"account_id":2338104,"reputation":9101,"user_id":2049986,"accept_rate":89,"display_name":"Jacob van Lingen"},"score":0,"creation_date":1686119158,"post_id":76404731,"comment_id":134753504,"body_markdown":"Ah owkee, so probably [Convert a Map&lt;String, String&gt; to a POJO](https://stackoverflow.com/questions/16428817/convert-a-mapstring-string-to-a-pojo) is all you need. Good luck!","body":"Ah owkee, so probably <a href=\"https://stackoverflow.com/questions/16428817/convert-a-mapstring-string-to-a-pojo\">Convert a Map&lt;String, String&gt; to a POJO</a> is all you need. Good luck!"},{"owner":{"account_id":28196096,"reputation":11,"user_id":21550705,"display_name":"hemanth reddy m"},"score":0,"creation_date":1686639035,"post_id":76404731,"comment_id":134822541,"body_markdown":"I tried this approach, it did not work. after mapping the POJO was still null, I was able to map using GSON","body":"I tried this approach, it did not work. after mapping the POJO was still null, I was able to map using GSON"}],"answers":[{"tags":[],"owner":{"account_id":28196096,"reputation":11,"user_id":21550705,"display_name":"hemanth reddy m"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686636101,"creation_date":1686636101,"answer_id":76462046,"question_id":76404731,"body_markdown":"Initially, I tried to map the JSONObject to the POJO, using ObjectMapper&#39;s writeValue and convertValue. Though the mapping was successful in runtime without any expection, the POJO was still null.(JSON Properties were enabled to identify the JSONObjects)\r\n\r\nI tried mapping using GSON and JSONObjects. I am able to map successfully with the below approach:\r\n\r\n    Map&lt;String, Object&gt; userData =\r\n              mapper.readValue(fileData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\r\n          JSONObject json = new JSONObject((Map&lt;String, ?&gt;) userData.get(&quot;fundusFile&quot;));\r\n    \r\n          FundusFile fundusFile = new Gson().fromJson(json.toString(), FundusFile.class);\r\n\r\n ","title":"Data conversion to DTO&#39;s dynamically from the JSON File which is part of a zipped File(Request Param)","body":"<p>Initially, I tried to map the JSONObject to the POJO, using ObjectMapper's writeValue and convertValue. Though the mapping was successful in runtime without any expection, the POJO was still null.(JSON Properties were enabled to identify the JSONObjects)</p>\n<p>I tried mapping using GSON and JSONObjects. I am able to map successfully with the below approach:</p>\n<pre><code>Map&lt;String, Object&gt; userData =\n          mapper.readValue(fileData, new TypeReference&lt;Map&lt;String, Object&gt;&gt;() {});\n      JSONObject json = new JSONObject((Map&lt;String, ?&gt;) userData.get(&quot;fundusFile&quot;));\n\n      FundusFile fundusFile = new Gson().fromJson(json.toString(), FundusFile.class);\n</code></pre>\n"}],"owner":{"account_id":28196096,"reputation":11,"user_id":21550705,"display_name":"hemanth reddy m"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686636101,"creation_date":1685954248,"question_id":76404731,"body_markdown":"I am trying to upload a zipfile and load the json data from json file which is in the zipFile to respective DTO&#39;s. \r\n\r\nupload part (following annotations are referred to spring boot annotation):\r\n```\r\n@ApiOperation(value = &quot;Imports one or more files&quot;)\r\n@PostMapping(&quot;/fileExchange/import&quot;)\r\npublic ResponseEntity Import(@RequestParam MultipartFile file)\r\n```\r\n\r\nPlease suggest possible approaches to load json file data dynamically into respective DTO&#39;s without reading the jsonFile manually and as jsonFile length and data may vary.","title":"Data conversion to DTO&#39;s dynamically from the JSON File which is part of a zipped File(Request Param)","body":"<p>I am trying to upload a zipfile and load the json data from json file which is in the zipFile to respective DTO's.</p>\n<p>upload part (following annotations are referred to spring boot annotation):</p>\n<pre><code>@ApiOperation(value = &quot;Imports one or more files&quot;)\n@PostMapping(&quot;/fileExchange/import&quot;)\npublic ResponseEntity Import(@RequestParam MultipartFile file)\n</code></pre>\n<p>Please suggest possible approaches to load json file data dynamically into respective DTO's without reading the jsonFile manually and as jsonFile length and data may vary.</p>\n"},{"tags":["java","spring-boot","spring-integration","sftp","polling"],"comments":[{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675693337,"post_id":75359354,"comment_id":132978080,"body_markdown":"Would you mind to reformat the code and stacktrace in your question to make them readable: https://stackoverflow.com/help/how-to-ask, https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks ?","body":"Would you mind to reformat the code and stacktrace in your question to make them readable: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>, <a href=\"https://meta.stackoverflow.com/questions/251361/how-do-i-format-my-code-blocks\" title=\"how do i format my code blocks\">meta.stackoverflow.com/questions/251361/&hellip;</a> ?"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675695444,"post_id":75359354,"comment_id":132978832,"body_markdown":"See this one for more info: https://issues.apache.org/jira/browse/SSHD-945. You probably don&#39;t have some SSH algorithm provider lib against your server security.","body":"See this one for more info: <a href=\"https://issues.apache.org/jira/browse/SSHD-945\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/SSHD-945</a>. You probably don&#39;t have some SSH algorithm provider lib against your server security."},{"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"score":0,"creation_date":1675746452,"post_id":75359354,"comment_id":132990058,"body_markdown":"Sorry i have updated the question. I just changed Java version from 17 to 11. In Java 11 same code base with same key and same server is still working.","body":"Sorry i have updated the question. I just changed Java version from 17 to 11. In Java 11 same code base with same key and same server is still working."},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675776712,"post_id":75359354,"comment_id":132998117,"body_markdown":"Spring Integration `6.0.x` doesn&#39;t work with Java 11. So, you probably did something else, like downgraded Spring Integration.","body":"Spring Integration <code>6.0.x</code> doesn&#39;t work with Java 11. So, you probably did something else, like downgraded Spring Integration."},{"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"score":0,"creation_date":1675831508,"post_id":75359354,"comment_id":133010880,"body_markdown":"With Java 11 i was using  5.5.15, with Java 17 i am using 6.0.1. Only change in code i did was as above.","body":"With Java 11 i was using  5.5.15, with Java 17 i am using 6.0.1. Only change in code i did was as above."},{"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"score":0,"creation_date":1675831622,"post_id":75359354,"comment_id":133010898,"body_markdown":"Also instead of LsEntry i am using DirEntry because LsEntry is no longer supported with Spring Integration 6.0.1","body":"Also instead of LsEntry i am using DirEntry because LsEntry is no longer supported with Spring Integration 6.0.1"},{"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"score":0,"creation_date":1675846686,"post_id":75359354,"comment_id":133013843,"body_markdown":"I got the issue with this, with JSCH you can ppk file in putty ssh-rsa. But in Apache we need to have our key starting with -----BEGIN OPENSSH PRIVATE KEY-----. Because inside code this is the beginner apache has in order to load.","body":"I got the issue with this, with JSCH you can ppk file in putty ssh-rsa. But in Apache we need to have our key starting with -----BEGIN OPENSSH PRIVATE KEY-----. Because inside code this is the beginner apache has in order to load."},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1675865791,"post_id":75359354,"comment_id":133019795,"body_markdown":"Did it work when you fixed the key?","body":"Did it work when you fixed the key?"},{"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"score":1,"creation_date":1686053658,"post_id":75359354,"comment_id":134743742,"body_markdown":"Yes Artem, sorry for late response","body":"Yes Artem, sorry for late response"},{"owner":{"account_id":3273937,"reputation":114855,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1686060864,"post_id":75359354,"comment_id":134745449,"body_markdown":"Good. I guess you can form it into an answer and add it to your own question here.","body":"Good. I guess you can form it into an answer and add it to your own question here."}],"answers":[{"tags":[],"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686635854,"creation_date":1686195666,"answer_id":76428470,"question_id":75359354,"body_markdown":"I got the issue, with Java 17 changes we have to use DirEntry from Apache instead of LsEntry.\r\nWith JSCH you can ppk file in putty ssh-rsa. But in Apache we need to have our key starting with\r\n `-----BEGIN OPENSSH PRIVATE KEY-----`. Because inside code this is the beginner apache has in order to load.\r\n\r\nSo we can convert our key to OPENSSH private key and it will work as expected.\r\n\r\n&gt;ssh-keygen -p -N &quot;&quot; -f /path/to/key","title":"SFTP polling is not working with Spring Integration 6.0.1","body":"<p>I got the issue, with Java 17 changes we have to use DirEntry from Apache instead of LsEntry.\nWith JSCH you can ppk file in putty ssh-rsa. But in Apache we need to have our key starting with\n<code>-----BEGIN OPENSSH PRIVATE KEY-----</code>. Because inside code this is the beginner apache has in order to load.</p>\n<p>So we can convert our key to OPENSSH private key and it will work as expected.</p>\n<blockquote>\n<p>ssh-keygen -p -N &quot;&quot; -f /path/to/key</p>\n</blockquote>\n"}],"owner":{"account_id":13192155,"reputation":43,"user_id":9528166,"display_name":"Rishabh"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":745,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686635854,"creation_date":1675674973,"question_id":75359354,"body_markdown":"Hello I am using file poller with Spring Integration and we have recently migrated to Java 17. Spring Integration moved from 5.5.15 to 6.0.1\r\n\r\nMy old bean was:\r\n\r\n    @Bean  \r\n    public SessionFactory&lt;LsEntry&gt; sftpSessionFactory(){ \r\n       DefaultSftpSessionFactory sf = new DefaultSftpSessionFactory();  \r\n       sf.setHost(serverhost);  \r\n       sf.setPort(portname); \r\n       sf.setUser(username);\r\n       Resource resource = resourceLoader.getResource(sftpKeyPrivateKey); \r\n       sf.setPrivateKey(resource); \r\n       sf.setPrivateKeyPassphrase(sftpKeyPrivateKeyPassword); \r\n       sf.setAllowUnknownKeys(true); \r\n       return new CachingSessionFactory&lt;LsEntry&gt; (sf); \r\n    }\r\n\r\nMy new code for Session Factory looked like:\r\n\r\n    @Bean \r\n    public SessionFactory&lt;org.apache.sshd.sftp.client.SftpClient.DirEntry&gt; sftpSessionFactory() \r\n    { \r\n        DefaultSftpSessionFactory sf = new DefaultSftpSessionFactory();  \r\n        sf.setHost(serverhost); \r\n        sf.setPort(portname);\r\n        sf.setUser(username); \r\n        Resource resource = resourceLoader.getResource(sftpKeyPrivateKey); \r\n        sf.setPrivateKey(resource); \r\n        sf.setPrivateKeyPassphrase(sftpKeyPrivateKeyPassword); \r\n        sf.setAllowUnknownKeys(true); \r\n        return new  CachingSessionFactory&lt;org.apache.sshd.sftp.client.SftpClient.DirEntry(sf); \r\n    }\r\n\r\nEverything else remains same. Old code was working as expected but in new code when i start my service i get below exception:\r\n\r\n    Caused by: java.lang.IllegalStateException: failed to create SFTP Session \r\n    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:291) \r\n    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:67) \r\n    at org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:85) \r\n    at org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:82) \r\n    at org.springframework.integration.util.SimplePool.doGetItem(SimplePool.java:206) \r\n    at org.springframework.integration.util.SimplePool.getItem(SimplePool.java:187) ... 23 more Caused by: org.apache.sshd.common.SshException: No more authentication methods available \r\n    at org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:127) \r\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39) \r\n    at org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32) \r\n    at org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:43) \r\n    at org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68) \r\n    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.initClientSession(DefaultSftpSessionFactory.java:318) \r\n    at org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:281) ... 28 more \r\n    Caused by: org.apache.sshd.common.SshException: No more authentication methods available","title":"SFTP polling is not working with Spring Integration 6.0.1","body":"<p>Hello I am using file poller with Spring Integration and we have recently migrated to Java 17. Spring Integration moved from 5.5.15 to 6.0.1</p>\n<p>My old bean was:</p>\n<pre><code>@Bean  \npublic SessionFactory&lt;LsEntry&gt; sftpSessionFactory(){ \n   DefaultSftpSessionFactory sf = new DefaultSftpSessionFactory();  \n   sf.setHost(serverhost);  \n   sf.setPort(portname); \n   sf.setUser(username);\n   Resource resource = resourceLoader.getResource(sftpKeyPrivateKey); \n   sf.setPrivateKey(resource); \n   sf.setPrivateKeyPassphrase(sftpKeyPrivateKeyPassword); \n   sf.setAllowUnknownKeys(true); \n   return new CachingSessionFactory&lt;LsEntry&gt; (sf); \n}\n</code></pre>\n<p>My new code for Session Factory looked like:</p>\n<pre><code>@Bean \npublic SessionFactory&lt;org.apache.sshd.sftp.client.SftpClient.DirEntry&gt; sftpSessionFactory() \n{ \n    DefaultSftpSessionFactory sf = new DefaultSftpSessionFactory();  \n    sf.setHost(serverhost); \n    sf.setPort(portname);\n    sf.setUser(username); \n    Resource resource = resourceLoader.getResource(sftpKeyPrivateKey); \n    sf.setPrivateKey(resource); \n    sf.setPrivateKeyPassphrase(sftpKeyPrivateKeyPassword); \n    sf.setAllowUnknownKeys(true); \n    return new  CachingSessionFactory&lt;org.apache.sshd.sftp.client.SftpClient.DirEntry(sf); \n}\n</code></pre>\n<p>Everything else remains same. Old code was working as expected but in new code when i start my service i get below exception:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: failed to create SFTP Session \nat org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:291) \nat org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:67) \nat org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:85) \nat org.springframework.integration.file.remote.session.CachingSessionFactory$1.createForPool(CachingSessionFactory.java:82) \nat org.springframework.integration.util.SimplePool.doGetItem(SimplePool.java:206) \nat org.springframework.integration.util.SimplePool.getItem(SimplePool.java:187) ... 23 more Caused by: org.apache.sshd.common.SshException: No more authentication methods available \nat org.apache.sshd.common.future.AbstractSshFuture.verifyResult(AbstractSshFuture.java:127) \nat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:39) \nat org.apache.sshd.client.future.DefaultAuthFuture.verify(DefaultAuthFuture.java:32) \nat org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:43) \nat org.apache.sshd.common.future.VerifiableFuture.verify(VerifiableFuture.java:68) \nat org.springframework.integration.sftp.session.DefaultSftpSessionFactory.initClientSession(DefaultSftpSessionFactory.java:318) \nat org.springframework.integration.sftp.session.DefaultSftpSessionFactory.getSession(DefaultSftpSessionFactory.java:281) ... 28 more \nCaused by: org.apache.sshd.common.SshException: No more authentication methods available\n</code></pre>\n"},{"tags":["java","postgresql"],"answers":[{"tags":[],"owner":{"account_id":176171,"reputation":43029,"user_id":406691,"display_name":"Pavel Stehule"},"down_vote_count":1,"up_vote_count":39,"is_accepted":true,"score":38,"last_activity_date":1686635256,"creation_date":1503633804,"answer_id":45874274,"question_id":45873514,"body_markdown":"You are using Prepared Statements - PostgreSQL gets info from client side, so parameter is `varchar` because you are using `setString` method. You should inform Postgres with explicit cast, so that input datatype is different.\r\n\r\n    PreparedStatement stmt = conn.prepareStatement(\r\n      &quot;INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName)\r\n                   VALUES (?, ?, ?, ?, ?, ?, ?::date, ?::date, ?::status, ?)&quot;);\r\n\r\nAll data is passed in text form (it is default) - so that is not a problem with passed values. PostgreSQL uses strict type system - and without explicit casting doesn&#39;t allow cast from `varchar` to `date`, `enum`, `int`, ...","title":"PostgreSQL Hint: You will need to rewrite or cast the expression. column &quot;state&quot; is of type status but expression is of type character varying","body":"<p>You are using Prepared Statements - PostgreSQL gets info from client side, so parameter is <code>varchar</code> because you are using <code>setString</code> method. You should inform Postgres with explicit cast, so that input datatype is different.</p>\n<pre><code>PreparedStatement stmt = conn.prepareStatement(\n  &quot;INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName)\n               VALUES (?, ?, ?, ?, ?, ?, ?::date, ?::date, ?::status, ?)&quot;);\n</code></pre>\n<p>All data is passed in text form (it is default) - so that is not a problem with passed values. PostgreSQL uses strict type system - and without explicit casting doesn't allow cast from <code>varchar</code> to <code>date</code>, <code>enum</code>, <code>int</code>, ...</p>\n"},{"tags":[],"owner":{"account_id":10006521,"reputation":631,"user_id":7400808,"display_name":"MrNinjamannn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1569593951,"creation_date":1569593951,"answer_id":58136403,"question_id":45873514,"body_markdown":"you must will be have same problem if you use DBeaver.\r\n\r\ntry: \r\n\r\n1.right click on your postgres db\r\n\r\n2.edit connection/general/database\r\n\r\n3.change database to the base in the context of which you want to make changes\r\n","title":"PostgreSQL Hint: You will need to rewrite or cast the expression. column &quot;state&quot; is of type status but expression is of type character varying","body":"<p>you must will be have same problem if you use DBeaver.</p>\n\n<p>try: </p>\n\n<p>1.right click on your postgres db</p>\n\n<p>2.edit connection/general/database</p>\n\n<p>3.change database to the base in the context of which you want to make changes</p>\n"},{"tags":[],"owner":{"account_id":2109967,"reputation":6673,"user_id":1875434,"accept_rate":67,"display_name":"abbas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1647593716,"creation_date":1584460477,"answer_id":60725872,"question_id":45873514,"body_markdown":"You cannot store a String in a Enum type field. You need to use the setObject method and also provide the type like this\r\n     \r\n    stmt.setObject(9, ev.getState().status(), Types.OTHER);","title":"PostgreSQL Hint: You will need to rewrite or cast the expression. column &quot;state&quot; is of type status but expression is of type character varying","body":"<p>You cannot store a String in a Enum type field. You need to use the setObject method and also provide the type like this</p>\n<pre><code>stmt.setObject(9, ev.getState().status(), Types.OTHER);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11250661,"reputation":1,"user_id":8251861,"display_name":"Selim &#199;EKAL"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596631810,"creation_date":1596629357,"answer_id":63264882,"question_id":45873514,"body_markdown":"Thanks, Pavel Stehule,\r\n\r\nIf we want to add the date with time, we should use the following expression.\r\n\r\n    PreparedStatement stmt = conn.prepareStatement(\r\n      &quot;INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName)\r\n                   VALUES (?, ?, ?, ?, ?, ?, ?::timestamp, ?, ?, ?)&quot;);","title":"PostgreSQL Hint: You will need to rewrite or cast the expression. column &quot;state&quot; is of type status but expression is of type character varying","body":"<p>Thanks, Pavel Stehule,</p>\n<p>If we want to add the date with time, we should use the following expression.</p>\n<pre><code>PreparedStatement stmt = conn.prepareStatement(\n  &quot;INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName)\n               VALUES (?, ?, ?, ?, ?, ?, ?::timestamp, ?, ?, ?)&quot;);\n</code></pre>\n"}],"owner":{"account_id":8892236,"reputation":476,"user_id":6638412,"display_name":"Gatiivs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101578,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":45874274,"answer_count":4,"score":36,"last_activity_date":1686635256,"creation_date":1503627942,"question_id":45873514,"body_markdown":"I am trying to create a SQL statement using java. The problem is I am using\r\n\r\n\r\n\r\n     stmt.setString(9, ev.getState().status());\r\n\r\n\r\n\r\n\r\nfor a variable I am trying to insert into a SQL column of type status \r\n\r\n     CREATE TYPE STATUS AS ENUM (&#39;APPROVED&#39;, &#39;CLOSED&#39;,&#39;STARTED&#39;, &#39;WAITING&#39;);\r\n\r\nIt is throwing me an exception of \r\n\r\n    column &quot;state&quot; is of type status but expression is of type character varying\r\n    Hint: You will need to rewrite or cast the expression.\r\nDid I make a mistake or do I actually need to cast the value in sql? If yes, how does one cast in this situation?\r\n\r\nFull Statement:\r\n\r\n         PreparedStatement stmt = conn.prepareStatement(&quot;INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName) VALUES (?, ?, ?, ?, ?, ?, ?::date, ?::date, ?, ?)&quot;);\r\n\r\n\r\n         \r\n         \r\n         stmt.setInt(1, ev.getEventNum());\r\n         stmt.setString(2, ev.getName());\r\n         stmt.setInt(3, ev.getStartHour());\r\n         stmt.setInt(4, ev.getEndHour());\r\n         stmt.setInt(5, ev.getStartMinute());\r\n         stmt.setInt(6, ev.getEndMinute());\r\n         stmt.setString(7, ev.getStartYear() + &quot;-&quot; + ev.getStartMonth() + &quot;-&quot; + ev.getStartDate());\r\n         stmt.setString(8, ev.getEndYear() + &quot;-&quot; + ev.getEndMonth() + &quot;-&quot; + ev.getEndDate());\r\n         stmt.setString(9, ev.getState().status());\r\n         stmt.setString(10, ev.getDepartment());\r\n         \r\n\r\n         \r\n         stmt.executeUpdate();\r\n\r\n\r\n\r\n","title":"PostgreSQL Hint: You will need to rewrite or cast the expression. column &quot;state&quot; is of type status but expression is of type character varying","body":"<p>I am trying to create a SQL statement using java. The problem is I am using</p>\n\n<pre><code> stmt.setString(9, ev.getState().status());\n</code></pre>\n\n<p>for a variable I am trying to insert into a SQL column of type status </p>\n\n<pre><code> CREATE TYPE STATUS AS ENUM ('APPROVED', 'CLOSED','STARTED', 'WAITING');\n</code></pre>\n\n<p>It is throwing me an exception of </p>\n\n<pre><code>column \"state\" is of type status but expression is of type character varying\nHint: You will need to rewrite or cast the expression.\n</code></pre>\n\n<p>Did I make a mistake or do I actually need to cast the value in sql? If yes, how does one cast in this situation?</p>\n\n<p>Full Statement:</p>\n\n<pre><code>     PreparedStatement stmt = conn.prepareStatement(\"INSERT INTO Event (EventNum, EventName, startHour, endHour, startMin, endMin, startDate, endDate, State, depName) VALUES (?, ?, ?, ?, ?, ?, ?::date, ?::date, ?, ?)\");\n\n\n\n\n     stmt.setInt(1, ev.getEventNum());\n     stmt.setString(2, ev.getName());\n     stmt.setInt(3, ev.getStartHour());\n     stmt.setInt(4, ev.getEndHour());\n     stmt.setInt(5, ev.getStartMinute());\n     stmt.setInt(6, ev.getEndMinute());\n     stmt.setString(7, ev.getStartYear() + \"-\" + ev.getStartMonth() + \"-\" + ev.getStartDate());\n     stmt.setString(8, ev.getEndYear() + \"-\" + ev.getEndMonth() + \"-\" + ev.getEndDate());\n     stmt.setString(9, ev.getState().status());\n     stmt.setString(10, ev.getDepartment());\n\n\n\n     stmt.executeUpdate();\n</code></pre>\n"},{"tags":["java","maven"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686567398,"post_id":76454330,"comment_id":134811332,"body_markdown":"If you could create an full example project because there seemed to be a configuration which is not given in your post...","body":"If you could create an full example project because there seemed to be a configuration which is not given in your post..."},{"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"score":0,"creation_date":1686631986,"post_id":76454330,"comment_id":134821707,"body_markdown":"@khmarbaise The full example was added to the question.","body":"@khmarbaise The full example was added to the question."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1686633774,"post_id":76454330,"comment_id":134821847,"body_markdown":"@banterCZ did I understand properly that the main idea is following: setting `&lt;scope&gt;test&lt;/scope&gt;` for `&lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;` cause `maven` to enforce `test` scope for transitive dependencies (there is related issue in maven&#39;s jira), you expect that since maven (mistakenly?) enforces `test` scope for `tomcat-embed-el`, `maven-enforcer-plugin` should follow the same logic. Is it correct?","body":"@banterCZ did I understand properly that the main idea is following: setting <code>&lt;scope&gt;test&lt;&#47;scope&gt;</code> for <code>&lt;artifactId&gt;tomcat-embed-el&lt;&#47;artifactId&gt;</code> cause <code>maven</code> to enforce <code>test</code> scope for transitive dependencies (there is related issue in maven&#39;s jira), you expect that since maven (mistakenly?) enforces <code>test</code> scope for <code>tomcat-embed-el</code>, <code>maven-enforcer-plugin</code> should follow the same logic. Is it correct?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686634850,"post_id":76454330,"comment_id":134821947,"body_markdown":"I already wrote . you have blocked the dependencies in your enforcer rule which denies dependencies in compile scope... but you keep the definition of the dependencies in the compile scope... Based on the enforcer rule you have to change the scope if you don&#39;t change it will continue to fail...apart from that I don&#39;t understand why you are trying to deny the dependency to tomcat.embed in a spring boot project... if you require reactive you should change to the appropriate reactive components.","body":"I already wrote . you have blocked the dependencies in your enforcer rule which denies dependencies in compile scope... but you keep the definition of the dependencies in the compile scope... Based on the enforcer rule you have to change the scope if you don&#39;t change it will continue to fail...apart from that I don&#39;t understand why you are trying to deny the dependency to tomcat.embed in a spring boot project... if you require reactive you should change to the appropriate reactive components."},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686635097,"post_id":76454330,"comment_id":134821973,"body_markdown":"Furthermore you have to exclude the appropriate dependencies via pom (because it&#39;s coming into your tree via `org.springframework.boot:spring-boot-starter-validation:jar:3.1.0`...)...Check my updated answer...","body":"Furthermore you have to exclude the appropriate dependencies via pom (because it&#39;s coming into your tree via <code>org.springframework.boot:spring-boot-starter-validation:jar:&zwnj;&#8203;3.1.0</code>...)...Check my updated answer..."},{"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"score":0,"creation_date":1686637871,"post_id":76454330,"comment_id":134822325,"body_markdown":"The reason why I exclude tomcat-embed is that I prepare a build also for application servers. I changed the scoped to test, which used to work for the older enforcer-plugin. I know I may use exclusion, but it means declaring it at each possible dependency. Anyway, the dependencyManagement fixed it, thanks.","body":"The reason why I exclude tomcat-embed is that I prepare a build also for application servers. I changed the scoped to test, which used to work for the older enforcer-plugin. I know I may use exclusion, but it means declaring it at each possible dependency. Anyway, the dependencyManagement fixed it, thanks."},{"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"score":0,"creation_date":1686638253,"post_id":76454330,"comment_id":134822389,"body_markdown":"@AndreyB.Panfilov May you please link the jira issues? This is not maven misbehavior, but expected work with scopes. I suspect the enforcer-plugin from misevaluation that.","body":"@AndreyB.Panfilov May you please link the jira issues? This is not maven misbehavior, but expected work with scopes. I suspect the enforcer-plugin from misevaluation that."},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":1,"creation_date":1686666494,"post_id":76454330,"comment_id":134828526,"body_markdown":"https://issues.apache.org/jira/browse/MNG-6058 - and a lot of outgoing links","body":"<a href=\"https://issues.apache.org/jira/browse/MNG-6058\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MNG-6058</a> - and a lot of outgoing links"}],"answers":[{"tags":[],"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686635200,"creation_date":1686567379,"answer_id":76455962,"question_id":76454330,"body_markdown":"First maven-enforcer-plugin with the given rule is exactly doing what it should be doing means breaking the build based on the given dependencies which are not allowed based on the rules... tried both version exactly the same behaviour ... only the output looks a bit different... \r\n\r\nUsing the maven-enforcer-plugin version 3.1.0 produces the same failure like this:\r\n\r\n    [INFO] -----------------&lt; com.soebes.spring.example:employee &gt;-----------------\r\n    [INFO] Building Employee Demo Application 0.0.1-SNAPSHOT\r\n    [INFO]   from pom.xml\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ employee ---\r\n    [INFO] \r\n    [INFO] --- maven-enforcer-plugin:3.1.0:enforce (enforce-banned-dependencies) @ employee ---\r\n    [ERROR] Rule 0: org.apache.maven.plugins.enforcer.BannedDependencies failed with message:\r\n    Found Banned Dependency: org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8\r\n    Found Banned Dependency: org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8\r\n    Found Banned Dependency: org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8\r\n    Use &#39;mvn dependency:tree&#39; to locate the source of the banned dependencies.\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  0.447 s\r\n    [INFO] Finished at: 2023-06-12T12:53:26+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.1.0:enforce (enforce-banned-dependencies) on project employee: Some Enforcer rules have failed. Look above for specific messages explaining why the rule failed. -&gt; [Help 1]\r\n\r\nAs the maven-enforcer-plugin version 3.3.0  does:\r\n\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ employee ---\r\n    [INFO] \r\n    [INFO] --- maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) @ employee ---\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  0.405 s\r\n    [INFO] Finished at: 2023-06-12T12:55:35+02:00\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project employee: \r\n    [ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\r\n    [ERROR] com.soebes.spring.example:employee:jar:0.0.1-SNAPSHOT\r\n    [ERROR]    org.springframework.boot:spring-boot-starter-web:jar:3.1.0\r\n    [ERROR]       org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.0\r\n    [ERROR]          org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8 &lt;--- banned via the exclude/include list\r\n    [ERROR]          org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8 &lt;--- banned via the exclude/include list\r\n    [ERROR]          org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8 &lt;--- banned via the exclude/include list\r\n    [ERROR] \r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n\r\nUpdate:\r\n\r\nIf you exclude the tomcat dependency via:\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\nBut you must be careful because you need something else which supports servlet etc. \r\n\r\nIf you need to overwrite the sope of dependency (which means change the scope) you have to do that in a dependencyManagement section...\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n        &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n        &lt;scope&gt;import&lt;/scope&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n      &lt;/dependency&gt;\r\n      &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n        &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n        &lt;!--  Overriding scope of transitive dependency from spring-boot-starter-validation but new enforcer plugin does NOT respect that  --&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\nThat needed to done with each dependency you want to change the scope for... ","title":"maven-enforcer-plugin 3.3.0 breaking behavior for scope","body":"<p>First maven-enforcer-plugin with the given rule is exactly doing what it should be doing means breaking the build based on the given dependencies which are not allowed based on the rules... tried both version exactly the same behaviour ... only the output looks a bit different...</p>\n<p>Using the maven-enforcer-plugin version 3.1.0 produces the same failure like this:</p>\n<pre><code>[INFO] -----------------&lt; com.soebes.spring.example:employee &gt;-----------------\n[INFO] Building Employee Demo Application 0.0.1-SNAPSHOT\n[INFO]   from pom.xml\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ employee ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:3.1.0:enforce (enforce-banned-dependencies) @ employee ---\n[ERROR] Rule 0: org.apache.maven.plugins.enforcer.BannedDependencies failed with message:\nFound Banned Dependency: org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8\nFound Banned Dependency: org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8\nFound Banned Dependency: org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8\nUse 'mvn dependency:tree' to locate the source of the banned dependencies.\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.447 s\n[INFO] Finished at: 2023-06-12T12:53:26+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.1.0:enforce (enforce-banned-dependencies) on project employee: Some Enforcer rules have failed. Look above for specific messages explaining why the rule failed. -&gt; [Help 1]\n</code></pre>\n<p>As the maven-enforcer-plugin version 3.3.0  does:</p>\n<pre><code>[INFO] \n[INFO] --- maven-clean-plugin:3.2.0:clean (default-clean) @ employee ---\n[INFO] \n[INFO] --- maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) @ employee ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.405 s\n[INFO] Finished at: 2023-06-12T12:55:35+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project employee: \n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\n[ERROR] com.soebes.spring.example:employee:jar:0.0.1-SNAPSHOT\n[ERROR]    org.springframework.boot:spring-boot-starter-web:jar:3.1.0\n[ERROR]       org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.0\n[ERROR]          org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.8 &lt;--- banned via the exclude/include list\n[ERROR]          org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8 &lt;--- banned via the exclude/include list\n[ERROR]          org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.8 &lt;--- banned via the exclude/include list\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n</code></pre>\n<p>Update:</p>\n<p>If you exclude the tomcat dependency via:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n  &lt;exclusions&gt;\n    &lt;exclusion&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n  &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But you must be careful because you need something else which supports servlet etc.</p>\n<p>If you need to overwrite the sope of dependency (which means change the scope) you have to do that in a dependencyManagement section...</p>\n\n<pre><code>  &lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n    &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n    &lt;scope&gt;import&lt;/scope&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n  &lt;/dependency&gt;\n  &lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n    &lt;!--  Overriding scope of transitive dependency from spring-boot-starter-validation but new enforcer plugin does NOT respect that  --&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n</code></pre>\n<p>That needed to done with each dependency you want to change the scope for...</p>\n"}],"owner":{"account_id":70791,"reputation":1619,"user_id":204950,"accept_rate":92,"display_name":"banterCZ"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76455962,"answer_count":1,"score":3,"last_activity_date":1686635200,"creation_date":1686554091,"question_id":76454330,"body_markdown":"When upgrading Spring Boot to 3.1 I got a transitive upgrade of `maven-enforcer-plugin` **3.3.0**, breaking my build. The configuration of scopes for transitive dependencies behaves strangely.\r\n\r\nCurrent configuration\r\n```xml\r\n&lt;plugin&gt;\r\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\r\n    &lt;executions&gt;\r\n        &lt;execution&gt;\r\n            &lt;id&gt;enforce-banned-dependencies&lt;/id&gt;\r\n            &lt;goals&gt;\r\n                &lt;goal&gt;enforce&lt;/goal&gt;\r\n            &lt;/goals&gt;\r\n            &lt;configuration&gt;\r\n                &lt;rules&gt;\r\n                    &lt;bannedDependencies&gt;\r\n                        &lt;excludes&gt;\r\n                            &lt;exclude&gt;org.apache.tomcat.embed:*:*:*:compile&lt;/exclude&gt;\r\n                    &lt;/bannedDependencies&gt;\r\n                &lt;/rules&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/execution&gt;\r\n    &lt;/executions&gt;\r\n&lt;/plugin&gt;\r\n```\r\n\r\nDependencies\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nError\r\n```\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project enrollment-server: \r\n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\r\n[ERROR] com.example:test:war:1.0.0-SNAPSHOT\r\n[ERROR]    org.springframework.boot:spring-boot-starter-validation:jar:3.1.0\r\n[ERROR]       org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8 &lt;--- banned via the exclude/include list\r\n```\r\n\r\nI have noticed, that there is an option `&lt;searchTransitive&gt;false&lt;/searchTransitive&gt;` but it seems to me, that it ignores transitive dependencies completely. So the dependency is not checked but is attached. IMHO the main goal of this plugin was to control the content of the final artifact.\r\n\r\nDowngrading to `maven-enforcer-plugin` **3.1.0** so far.\r\n\r\nFull example:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;test&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.1.0&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\r\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\r\n            &lt;!--  Overriding scope of transitive dependency from spring-boot-starter-validation but new enforcer plugin does NOT respect that  --&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\r\n                &lt;!--  Working with 3.1.0 --&gt;\r\n                &lt;!--  &lt;version&gt;3.1.0&lt;/version&gt; --&gt;\r\n                &lt;!--  Implicit version 3.3.0 breaks the build  --&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;enforce-banned-dependencies&lt;/id&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;enforce&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;rules&gt;\r\n                                &lt;bannedDependencies&gt;\r\n                                    &lt;excludes&gt;\r\n                                        &lt;exclude&gt;org.apache.tomcat.embed:*:*:*:compile&lt;/exclude&gt;\r\n                                    &lt;/excludes&gt;\r\n                                &lt;/bannedDependencies&gt;\r\n                            &lt;/rules&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```","title":"maven-enforcer-plugin 3.3.0 breaking behavior for scope","body":"<p>When upgrading Spring Boot to 3.1 I got a transitive upgrade of <code>maven-enforcer-plugin</code> <strong>3.3.0</strong>, breaking my build. The configuration of scopes for transitive dependencies behaves strangely.</p>\n<p>Current configuration</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;enforce-banned-dependencies&lt;/id&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;enforce&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;rules&gt;\n                    &lt;bannedDependencies&gt;\n                        &lt;excludes&gt;\n                            &lt;exclude&gt;org.apache.tomcat.embed:*:*:*:compile&lt;/exclude&gt;\n                    &lt;/bannedDependencies&gt;\n                &lt;/rules&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Dependencies</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n    &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Error</p>\n<pre><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-enforcer-plugin:3.3.0:enforce (enforce-banned-dependencies) on project enrollment-server: \n[ERROR] Rule 0: org.apache.maven.enforcer.rules.dependency.BannedDependencies failed with message:\n[ERROR] com.example:test:war:1.0.0-SNAPSHOT\n[ERROR]    org.springframework.boot:spring-boot-starter-validation:jar:3.1.0\n[ERROR]       org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.8 &lt;--- banned via the exclude/include list\n</code></pre>\n<p>I have noticed, that there is an option <code>&lt;searchTransitive&gt;false&lt;/searchTransitive&gt;</code> but it seems to me, that it ignores transitive dependencies completely. So the dependency is not checked but is attached. IMHO the main goal of this plugin was to control the content of the final artifact.</p>\n<p>Downgrading to <code>maven-enforcer-plugin</code> <strong>3.1.0</strong> so far.</p>\n<p>Full example:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat.embed&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-embed-el&lt;/artifactId&gt;\n            &lt;!--  Overriding scope of transitive dependency from spring-boot-starter-validation but new enforcer plugin does NOT respect that  --&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-enforcer-plugin&lt;/artifactId&gt;\n                &lt;!--  Working with 3.1.0 --&gt;\n                &lt;!--  &lt;version&gt;3.1.0&lt;/version&gt; --&gt;\n                &lt;!--  Implicit version 3.3.0 breaks the build  --&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;enforce-banned-dependencies&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;enforce&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;rules&gt;\n                                &lt;bannedDependencies&gt;\n                                    &lt;excludes&gt;\n                                        &lt;exclude&gt;org.apache.tomcat.embed:*:*:*:compile&lt;/exclude&gt;\n                                    &lt;/excludes&gt;\n                                &lt;/bannedDependencies&gt;\n                            &lt;/rules&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","spring","hashmap"],"answers":[{"tags":[],"owner":{"account_id":10595663,"reputation":4835,"user_id":7804477,"display_name":"Gautham M"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1619348161,"creation_date":1619348161,"answer_id":67252578,"question_id":67252485,"body_markdown":"For each iteration you are replacing the same key. So only the data in the last iteration would be available.\r\n\r\nReplace the code as follows:\r\n\r\n    List&lt;Map&lt;String, String&gt;&gt; myhash = new ArrayList&lt;&gt;();       \r\n    for (Applicant applicant : users) {\r\n        Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\r\n        map.put(&quot;fathername&quot;, applicant.getFather_name());\r\n        map.put(&quot;name&quot;, applicant.getFirst_name());\r\n        myhash.add(map);\r\n        System.out.println(applicant.getFirst_name());\r\n    }\r\n\r\n    return myhash;\r\n","title":"create dynamic objects using spring boot hashmap","body":"<p>For each iteration you are replacing the same key. So only the data in the last iteration would be available.</p>\n<p>Replace the code as follows:</p>\n<pre><code>List&lt;Map&lt;String, String&gt;&gt; myhash = new ArrayList&lt;&gt;();       \nfor (Applicant applicant : users) {\n    Map&lt;String, String&gt; map = new HashMap&lt;&gt;();\n    map.put(&quot;fathername&quot;, applicant.getFather_name());\n    map.put(&quot;name&quot;, applicant.getFirst_name());\n    myhash.add(map);\n    System.out.println(applicant.getFirst_name());\n}\n\nreturn myhash;\n</code></pre>\n"}],"owner":{"account_id":12526641,"reputation":21,"user_id":9325557,"display_name":"Kalai Selvan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":4,"up_vote_count":1,"accepted_answer_id":67252578,"answer_count":1,"score":-3,"last_activity_date":1686634911,"creation_date":1619347520,"question_id":67252485,"body_markdown":"i wrote the below code to form custom objects. but its returning only single object. like below\r\n\r\n**{&quot;fathername&quot;:null,&quot;name&quot;:&quot;ks&quot;}**\r\n\r\nbut i want like below(array object)\r\n\r\n**[{&quot;name&quot;:&quot;test&quot;,&quot;fathername&quot;:&quot;test123&quot;},{&quot;name&quot;:&quot;ks&quot;,&quot;fathername&quot;:null}]**\r\n\r\nbut it is returning single object. what i am missing here, please pour your suggestions\r\n\r\n\r\n    public HashMap&lt;String, String&gt; applicantlistv2() {\t\t\r\n    \tList&lt;Applicant&gt; users = repository.findAll();\r\n    \t\r\n        HashMap&lt;String, String&gt; myhash = new HashMap&lt;String, String&gt;();\r\n       \r\n        \r\n    \tfor (Applicant applicant : users) {\r\n    \t\tmyhash.put(&quot;fathername&quot;, applicant.getFather_name());\r\n    \t\tmyhash.put(&quot;name&quot;, applicant.getFirst_name());\r\n    \t\t\r\n    \t\tSystem.out.println(applicant.getFirst_name());\r\n    \r\n    \t}\r\n    \r\n     //return repository.findAll();\r\n    \treturn myhash;\r\n    }","title":"create dynamic objects using spring boot hashmap","body":"<p>i wrote the below code to form custom objects. but its returning only single object. like below</p>\n<p><strong>{&quot;fathername&quot;:null,&quot;name&quot;:&quot;ks&quot;}</strong></p>\n<p>but i want like below(array object)</p>\n<p><strong>[{&quot;name&quot;:&quot;test&quot;,&quot;fathername&quot;:&quot;test123&quot;},{&quot;name&quot;:&quot;ks&quot;,&quot;fathername&quot;:null}]</strong></p>\n<p>but it is returning single object. what i am missing here, please pour your suggestions</p>\n<pre><code>public HashMap&lt;String, String&gt; applicantlistv2() {      \n    List&lt;Applicant&gt; users = repository.findAll();\n    \n    HashMap&lt;String, String&gt; myhash = new HashMap&lt;String, String&gt;();\n   \n    \n    for (Applicant applicant : users) {\n        myhash.put(&quot;fathername&quot;, applicant.getFather_name());\n        myhash.put(&quot;name&quot;, applicant.getFirst_name());\n        \n        System.out.println(applicant.getFirst_name());\n\n    }\n\n //return repository.findAll();\n    return myhash;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":1979094,"reputation":3912,"user_id":1776132,"display_name":"Smile"},"score":0,"creation_date":1574073683,"post_id":58912672,"comment_id":104087383,"body_markdown":"Please add more details to your question. Is the jar included in another web application? If yes, have you tried including the controller as a bean in the web app?","body":"Please add more details to your question. Is the jar included in another web application? If yes, have you tried including the controller as a bean in the web app?"},{"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"score":0,"creation_date":1574073801,"post_id":58912672,"comment_id":104087458,"body_markdown":"@Smile Yes, the jar is included in another Spring BOOT Application which I have run and trying to access the API present in the jar.","body":"@Smile Yes, the jar is included in another Spring BOOT Application which I have run and trying to access the API present in the jar."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1574074073,"post_id":58912672,"comment_id":104087598,"body_markdown":"So, access it. What happens when you do it? As long as the controller is a Spring bean registered (scanned, typically) in the Boot application, it doesn&#39;t matter whether it&#39;s in a jar or in another jar.","body":"So, access it. What happens when you do it? As long as the controller is a Spring bean registered (scanned, typically) in the Boot application, it doesn&#39;t matter whether it&#39;s in a jar or in another jar."},{"owner":{"account_id":1979094,"reputation":3912,"user_id":1776132,"display_name":"Smile"},"score":0,"creation_date":1574074220,"post_id":58912672,"comment_id":104087697,"body_markdown":"Then, make sure the controller class is configured as bean. for eg. `@ComponentScan(basePackages = &quot;your.controller.package&quot;)` is added to spring boot config. It will help if you edit your question and add code of controller as well as spring boot main class.","body":"Then, make sure the controller class is configured as bean. for eg. <code>@ComponentScan(basePackages = &quot;your.controller.package&quot;)</code> is added to spring boot config. It will help if you edit your question and add code of controller as well as spring boot main class."},{"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"score":0,"creation_date":1574076762,"post_id":58912672,"comment_id":104089173,"body_markdown":"@Smile I have added the Controller as well as Spring Boot main class please check.","body":"@Smile I have added the Controller as well as Spring Boot main class please check."},{"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"score":0,"creation_date":1574076773,"post_id":58912672,"comment_id":104089179,"body_markdown":"Accessing http://localhost:8080/v1/supportedDeviceTypes but getting - &#39;This application has no explicit mapping..&#39; in browser.\n\nBut I have printed the loaded beans in Application Context and could see BasicRestController bean is loaded while starting the app.","body":"Accessing <a href=\"http://localhost:8080/v1/supportedDeviceTypes\" rel=\"nofollow noreferrer\">localhost:8080/v1/supportedDeviceTypes</a> but getting - &#39;This application has no explicit mapping..&#39; in browser.  But I have printed the loaded beans in Application Context and could see BasicRestController bean is loaded while starting the app."},{"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":1,"creation_date":1574078069,"post_id":58912672,"comment_id":104089879,"body_markdown":"It should be `@RestController @RequestMapping(&quot;/v1&quot;)`. In your code, `/v1`is the name of the bean.","body":"It should be <code>@RestController @RequestMapping(&quot;&#47;v1&quot;)</code>. In your code, <code>&#47;v1</code>is the name of the bean."}],"answers":[{"tags":[],"owner":{"account_id":1979094,"reputation":3912,"user_id":1776132,"display_name":"Smile"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1574134350,"creation_date":1574134350,"answer_id":58926224,"question_id":58912672,"body_markdown":"Try removing following bean from `CommonControllerConfig`\r\n```java\r\n        @Bean\r\n        public BasicRestController basicRestController() {\r\n            return new BasicRestController();\r\n        }\r\n```\r\nAnd instead add `@ComponentScan(basePackages = &quot;your.controller.package&quot;)`\r\nAlso, as JB Nizet mentioned, it should be `@RestController @RequestMapping(&quot;/v1&quot;)` in `BasicRestController`.","title":"How to access Rest APIs mentioned in Controller class of a Jar file in my Spring Boot Application","body":"<p>Try removing following bean from <code>CommonControllerConfig</code></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>        @Bean\n        public BasicRestController basicRestController() {\n            return new BasicRestController();\n        }\n</code></pre>\n\n<p>And instead add <code>@ComponentScan(basePackages = \"your.controller.package\")</code>\nAlso, as JB Nizet mentioned, it should be <code>@RestController @RequestMapping(\"/v1\")</code> in <code>BasicRestController</code>.</p>\n"}],"owner":{"account_id":11129218,"reputation":654,"user_id":8169680,"display_name":"Surya"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":959,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":58926224,"answer_count":1,"score":-1,"last_activity_date":1686634655,"creation_date":1574073491,"question_id":58912672,"body_markdown":"I am new to Spring / Spring Boot.\r\n\r\nIn my Spring Boot Application, I have a **JAR** file which has a Controller class and corresponding Service Interface (not class). I have implemented the Service interface and created a Service class with some logic. Now I want to access the APIs (/v1/getDetails) present in Controller class of JAR file.\r\n\r\nCan we access the REST APIs present in Controller class of JAR file? If so then please guide me.\r\n\r\nPS: I have tried to search on internet but didn&#39;t get a clear answer.\r\n\r\n**Controller class in Jar:**\r\n```java\r\n    @RestController(&quot;/v1&quot;)  \r\n    public class BasicRestController {  \r\n    \t@Autowired  \r\n    \tBasicServiceInterface basicService;  \r\n    \t\r\n    \t@GetMapping(&quot;/supportedDeviceTypes&quot;)\r\n    \tpublic NameValuePair&lt;?&gt; getSupportedDeviceTypes() {\r\n    \t\treturn basicService.getSupportedDeviceTypes();\r\n    \t}\r\n    }\r\n```\r\n**Spring Boot Main Class:** \r\n```java\r\n    @SpringBootApplication  \r\n    public class XXXProjectApplication{\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(XXXProjectApplication.class, args);\r\n    \t}\r\n    }\r\n```\r\n**Configuration Class:**\r\n```java \r\n    @Configuration  \r\n    public class CommonControllerConfig {  \r\n    \r\n    \t@Bean\r\n    \tpublic BasicRestController basicRestController() {\r\n    \t\treturn new BasicRestController();\r\n    \t}\r\n    }\r\n```\r\n\r\nAccessing http://localhost:8080/v1/supportedDeviceTypes but getting - &#39;This application has no explicit mapping..&#39; in browser.\r\n\r\nBut I have printed the loaded beans in Application Context and could see BasicRestController bean is loaded while starting the app.","title":"How to access Rest APIs mentioned in Controller class of a Jar file in my Spring Boot Application","body":"<p>I am new to Spring / Spring Boot.</p>\n\n<p>In my Spring Boot Application, I have a <strong>JAR</strong> file which has a Controller class and corresponding Service Interface (not class). I have implemented the Service interface and created a Service class with some logic. Now I want to access the APIs (/v1/getDetails) present in Controller class of JAR file.</p>\n\n<p>Can we access the REST APIs present in Controller class of JAR file? If so then please guide me.</p>\n\n<p>PS: I have tried to search on internet but didn't get a clear answer.</p>\n\n<p><strong>Controller class in Jar:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @RestController(\"/v1\")  \n    public class BasicRestController {  \n        @Autowired  \n        BasicServiceInterface basicService;  \n\n        @GetMapping(\"/supportedDeviceTypes\")\n        public NameValuePair&lt;?&gt; getSupportedDeviceTypes() {\n            return basicService.getSupportedDeviceTypes();\n        }\n    }\n</code></pre>\n\n<p><strong>Spring Boot Main Class:</strong> </p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @SpringBootApplication  \n    public class XXXProjectApplication{\n\n        public static void main(String[] args) {\n            SpringApplication.run(XXXProjectApplication.class, args);\n        }\n    }\n</code></pre>\n\n<p><strong>Configuration Class:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Configuration  \n    public class CommonControllerConfig {  \n\n        @Bean\n        public BasicRestController basicRestController() {\n            return new BasicRestController();\n        }\n    }\n</code></pre>\n\n<p>Accessing <a href=\"http://localhost:8080/v1/supportedDeviceTypes\" rel=\"nofollow noreferrer\">http://localhost:8080/v1/supportedDeviceTypes</a> but getting - 'This application has no explicit mapping..' in browser.</p>\n\n<p>But I have printed the loaded beans in Application Context and could see BasicRestController bean is loaded while starting the app.</p>\n"},{"tags":["java","anylogic","systemdynamics"],"answers":[{"tags":[],"owner":{"account_id":2486375,"reputation":11083,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686633978,"creation_date":1686633978,"answer_id":76461901,"question_id":76461036,"body_markdown":"Use conditional operators, you can only write 1 line of code in those fields:\r\n\r\n`Police&lt;7500 ? 10 : 5`\r\n\r\n","title":"Writing an AnyLogic if-then statements - System Dynamics (stocks + flows)","body":"<p>Use conditional operators, you can only write 1 line of code in those fields:</p>\n<p><code>Police&lt;7500 ? 10 : 5</code></p>\n"},{"tags":[],"owner":{"account_id":4196914,"reputation":8751,"user_id":3438111,"accept_rate":100,"display_name":"Felipe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686634039,"creation_date":1686634039,"answer_id":76461906,"question_id":76461036,"body_markdown":"you have to use the following format:\r\n\r\n    Police&lt;7500 ? 10 : 5\r\n\r\nor you can use a function that returns a double\r\n\r\n    function(Police)\r\n\r\nand the function would have the following\r\n\r\n    if(Police&lt;7500) return 10.0;\r\n    else return 5.0;","title":"Writing an AnyLogic if-then statements - System Dynamics (stocks + flows)","body":"<p>you have to use the following format:</p>\n<pre><code>Police&lt;7500 ? 10 : 5\n</code></pre>\n<p>or you can use a function that returns a double</p>\n<pre><code>function(Police)\n</code></pre>\n<p>and the function would have the following</p>\n<pre><code>if(Police&lt;7500) return 10.0;\nelse return 5.0;\n</code></pre>\n"}],"owner":{"account_id":28808392,"reputation":33,"user_id":22063691,"display_name":"Alex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76461906,"answer_count":2,"score":1,"last_activity_date":1686634039,"creation_date":1686616304,"question_id":76461036,"body_markdown":"New to AnyLogic and trying to create conditional, if-then equations within flow elements.\r\n\r\nFor example, I would like the flow of ‘police_graduates’ to be 10, on the condition that the stock of ‘Police’ is less than 7500; if the stock surpasses 7500, I would like the flow of ‘police_graduates’ to be 5. \r\n\r\nI entered the following equation into the equation field of the flow properties:\r\n\r\n```\r\nif( Police&lt;7500 )\r\n  10\r\n  else \r\n  5\r\n```\r\n\r\n[See here](https://i.stack.imgur.com/YL87L.jpg)\r\n\r\nBut the model does not run and I get the following error message:\r\n\r\n```\r\nError during model creation:\r\nERROR during variable generation:\r\nCouldn&#39;t parse expression for police_graduates - Flow: syntax error.\r\nPlease check expressions of this variable.\r\njava.lang.RuntimeException: ERROR during variable generation:\r\nCouldn&#39;t parse expression for police_graduates - Flow: syntax error.\r\nPlease check expressions of this variable.\r\n\tat model2.Main.&lt;init&gt;(Main.java:162)\r\n\tat model2.Simulation.createRoot(Simulation.java:158)\r\n\tat model2.Simulation.createRoot(Simulation.java:1)\r\n```\r\n\r\n\r\nIs there something wrong with the syntax in which I’ve written the equation?","title":"Writing an AnyLogic if-then statements - System Dynamics (stocks + flows)","body":"<p>New to AnyLogic and trying to create conditional, if-then equations within flow elements.</p>\n<p>For example, I would like the flow of ‘police_graduates’ to be 10, on the condition that the stock of ‘Police’ is less than 7500; if the stock surpasses 7500, I would like the flow of ‘police_graduates’ to be 5.</p>\n<p>I entered the following equation into the equation field of the flow properties:</p>\n<pre><code>if( Police&lt;7500 )\n  10\n  else \n  5\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/YL87L.jpg\" rel=\"nofollow noreferrer\">See here</a></p>\n<p>But the model does not run and I get the following error message:</p>\n<pre><code>Error during model creation:\nERROR during variable generation:\nCouldn't parse expression for police_graduates - Flow: syntax error.\nPlease check expressions of this variable.\njava.lang.RuntimeException: ERROR during variable generation:\nCouldn't parse expression for police_graduates - Flow: syntax error.\nPlease check expressions of this variable.\n    at model2.Main.&lt;init&gt;(Main.java:162)\n    at model2.Simulation.createRoot(Simulation.java:158)\n    at model2.Simulation.createRoot(Simulation.java:1)\n</code></pre>\n<p>Is there something wrong with the syntax in which I’ve written the equation?</p>\n"},{"tags":["java","spring-boot","spring-security","spring-data-jpa"],"comments":[{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1686632502,"post_id":76461749,"comment_id":134821749,"body_markdown":"I would say JPA somewhere else saves client entity and overrides the value of `locked` property stored by `lockClientAccount` method, and believe that marking `locked`  property as non-updatable (i.e. `@Column(... updatable = false ...)`) should help. FYI, that is extremely hard to read your code due to reverse logic of `locked` property.","body":"I would say JPA somewhere else saves client entity and overrides the value of <code>locked</code> property stored by <code>lockClientAccount</code> method, and believe that marking <code>locked</code>  property as non-updatable (i.e. <code>@Column(... updatable = false ...)</code>) should help. FYI, that is extremely hard to read your code due to reverse logic of <code>locked</code> property."},{"owner":{"account_id":25502779,"reputation":109,"user_id":19295685,"display_name":"seju"},"score":0,"creation_date":1686633338,"post_id":76461749,"comment_id":134821806,"body_markdown":"@AndreyB.Panfilov sorry can you rephrase? You think JPA is overriding the property but I should try setting `accountNoneLocked` column property to `updateable = false`? And I refactored to make it less confusing","body":"@AndreyB.Panfilov sorry can you rephrase? You think JPA is overriding the property but I should try setting <code>accountNoneLocked</code> column property to <code>updateable = false</code>? And I refactored to make it less confusing"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1686634286,"post_id":76461749,"comment_id":134821899,"body_markdown":"there are two ways how `accountNoneLocked` property could be updated in DB: 1) via direct JPQL update (your `lockClientAccount` method), 2) via explicit or implicit save of  `Clientz` entity. Since you are facing concurrency issues that is good idea to get a single point of truth of `accountNoneLocked` property state, i.e. disable updating `accountNoneLocked` property via saving entity.","body":"there are two ways how <code>accountNoneLocked</code> property could be updated in DB: 1) via direct JPQL update (your <code>lockClientAccount</code> method), 2) via explicit or implicit save of  <code>Clientz</code> entity. Since you are facing concurrency issues that is good idea to get a single point of truth of <code>accountNoneLocked</code> property state, i.e. disable updating <code>accountNoneLocked</code> property via saving entity."},{"owner":{"account_id":25502779,"reputation":109,"user_id":19295685,"display_name":"seju"},"score":0,"creation_date":1686634786,"post_id":76461749,"comment_id":134821944,"body_markdown":"@AndreyB.Panfilov sorry it is still not clear to me. Are you suggesting I instead set `accountNoneLocked` column to updateable false via -&gt; `@Column(name = &quot;account_none_locked&quot;, nullable = false, updatable = false)\nprivate boolean accountNoneLocked;` and save the entire entity object via `this.clientRepository.save(clientz)` because I am facing concurrency issues?","body":"@AndreyB.Panfilov sorry it is still not clear to me. Are you suggesting I instead set <code>accountNoneLocked</code> column to updateable false via -&gt; <code>@Column(name = &quot;account_none_locked&quot;, nullable = false, updatable = false) private boolean accountNoneLocked;</code> and save the entire entity object via <code>this.clientRepository.save(clientz)</code> because I am facing concurrency issues?"},{"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"score":0,"creation_date":1686634875,"post_id":76461749,"comment_id":134821952,"body_markdown":"No, just set `updatable` to `false` and do not change anything else.","body":"No, just set <code>updatable</code> to <code>false</code> and do not change anything else."},{"owner":{"account_id":25502779,"reputation":109,"user_id":19295685,"display_name":"seju"},"score":0,"creation_date":1686635016,"post_id":76461749,"comment_id":134821966,"body_markdown":"@AndreyB.Panfilov ok just a moment. I&#39;ll make these changes and run integration tests","body":"@AndreyB.Panfilov ok just a moment. I&#39;ll make these changes and run integration tests"},{"owner":{"account_id":25502779,"reputation":109,"user_id":19295685,"display_name":"seju"},"score":0,"creation_date":1686635954,"post_id":76461749,"comment_id":134822085,"body_markdown":"@AndreyB.Panfilov unfortunately, still the same issue.","body":"@AndreyB.Panfilov unfortunately, still the same issue."}],"owner":{"account_id":25502779,"reputation":109,"user_id":19295685,"display_name":"seju"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686633807,"creation_date":1686631440,"question_id":76461749,"body_markdown":"I am trying to build a brute force attack prevention mechanics for a mini project. The issue I&#39;m facing involves the method `registerLoginFailure` method, which is triggered by a BadCredentials Exception using the @EventListener annotation. The problem is that despite marking the method as @Transactional and attempting to update the locked property of the Clientz entity, the update is not persisted, even though the object is successfully found using findByPrincipal.\r\n\r\nMethod Structure: The registerLoginFailure method follows a structured approach to handle login failures. It checks the client&#39;s status, tracks login attempts, and updates the property accordingly. However, the issue lies within the update step.\r\n\r\nBruteForceService\r\n\r\n```\r\nimport org.springframework.transaction.annotation.Transactional;\r\n    /**\r\n     * Method to register every login failure of type BadCredentials for a Clientz.\r\n     * this.bruteForceRepo stores in redis for caching and concurrency\r\n     * @param auth of type Spring Core Authentication\r\n     */\r\n    @Transactional\r\n    public void registerLoginFailure(Authentication auth) {\r\n        var clientz = this.clientRepository.findByPrincipal(auth.getName()).orElse(null);\r\n\r\n        if (clientz == null || !clientz.accountNoneLocked()) {\r\n            return;\r\n        }\r\n\r\n        // Using redis for caching and concurrency\r\n        var bruteEntity = this.bruteForceRepo.findByPrincipal(auth.getName());\r\n\r\n        if (bruteEntity.isEmpty()) {\r\n            this.bruteForceRepo.save(new BruteForceEntity(0, auth.getName()));\r\n            return;\r\n        }\r\n\r\n        if (bruteEntity.get().getFailedAttempt() &lt; this.MAX) {\r\n            bruteEntity.get().setFailedAttempt(bruteEntity.get().getFailedAttempt() + 1);\r\n            this.bruteForceRepo.update(bruteEntity.get());\r\n            return;\r\n        }\r\n\r\n        this.clientRepository.lockClientAccount(false, clientz.getClientId());\r\n        // TODO send client email to change password\r\n    }\r\n```\r\nQuery method `lockClientAccount` is responsible for updating the boolean property locked of the `Clientz` entity. It is defined using the `@Modifying` annotation, indicating that it performs a modification query. The query uses the JPQL syntax to update the entity. The flushAutomatically and clearAutomatically properties are set to true in the annotation, ensuring that the persistence context is cleared and flushed automatically before and after the query execution.\r\n\r\n```\r\nimport org.springframework.data.jpa.repository.Modifying;\r\nimport org.springframework.transaction.annotation.Transactional;\r\n\r\n@Modifying(flushAutomatically = true, clearAutomatically = true)\r\n@Transactional\r\n@Query(value = &quot;UPDATE Clientz c SET c.accountNoneLocked = ?1 WHERE c.clientId = ?2&quot;)\r\nvoid lockClientAccount(@Param(value = &quot;bool&quot;) boolean bool, @Param(value = &quot;id&quot;) Long id);\r\n```\r\n\r\n\r\nAuthentication Events which triggers `registerLoginFailure`\r\n\r\n```\r\n@Component\r\npublic class AuthenticationEvents {\r\n\r\n  @EventListener\r\n  public void onFailure(AbstractAuthenticationFailureEvent failures) {\r\n     bruteForceService.registerLoginFailure(failures.getAuthentication());\r\n  }\r\n\r\n}\r\n```\r\n\r\nI should also say `lockClientAccount` query method functions correctly when invoked through a PUT RESTful call. However, it fails to work as expected when multiple or concurrent POST HTTP calls (login attempts) with incorrect credentials are made.","title":"Using @Modifying annotation on an @EventListener in Spring Security/JPA data modifications are not persisted in the database","body":"<p>I am trying to build a brute force attack prevention mechanics for a mini project. The issue I'm facing involves the method <code>registerLoginFailure</code> method, which is triggered by a BadCredentials Exception using the @EventListener annotation. The problem is that despite marking the method as @Transactional and attempting to update the locked property of the Clientz entity, the update is not persisted, even though the object is successfully found using findByPrincipal.</p>\n<p>Method Structure: The registerLoginFailure method follows a structured approach to handle login failures. It checks the client's status, tracks login attempts, and updates the property accordingly. However, the issue lies within the update step.</p>\n<p>BruteForceService</p>\n<pre><code>import org.springframework.transaction.annotation.Transactional;\n    /**\n     * Method to register every login failure of type BadCredentials for a Clientz.\n     * this.bruteForceRepo stores in redis for caching and concurrency\n     * @param auth of type Spring Core Authentication\n     */\n    @Transactional\n    public void registerLoginFailure(Authentication auth) {\n        var clientz = this.clientRepository.findByPrincipal(auth.getName()).orElse(null);\n\n        if (clientz == null || !clientz.accountNoneLocked()) {\n            return;\n        }\n\n        // Using redis for caching and concurrency\n        var bruteEntity = this.bruteForceRepo.findByPrincipal(auth.getName());\n\n        if (bruteEntity.isEmpty()) {\n            this.bruteForceRepo.save(new BruteForceEntity(0, auth.getName()));\n            return;\n        }\n\n        if (bruteEntity.get().getFailedAttempt() &lt; this.MAX) {\n            bruteEntity.get().setFailedAttempt(bruteEntity.get().getFailedAttempt() + 1);\n            this.bruteForceRepo.update(bruteEntity.get());\n            return;\n        }\n\n        this.clientRepository.lockClientAccount(false, clientz.getClientId());\n        // TODO send client email to change password\n    }\n</code></pre>\n<p>Query method <code>lockClientAccount</code> is responsible for updating the boolean property locked of the <code>Clientz</code> entity. It is defined using the <code>@Modifying</code> annotation, indicating that it performs a modification query. The query uses the JPQL syntax to update the entity. The flushAutomatically and clearAutomatically properties are set to true in the annotation, ensuring that the persistence context is cleared and flushed automatically before and after the query execution.</p>\n<pre><code>import org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Modifying(flushAutomatically = true, clearAutomatically = true)\n@Transactional\n@Query(value = &quot;UPDATE Clientz c SET c.accountNoneLocked = ?1 WHERE c.clientId = ?2&quot;)\nvoid lockClientAccount(@Param(value = &quot;bool&quot;) boolean bool, @Param(value = &quot;id&quot;) Long id);\n</code></pre>\n<p>Authentication Events which triggers <code>registerLoginFailure</code></p>\n<pre><code>@Component\npublic class AuthenticationEvents {\n\n  @EventListener\n  public void onFailure(AbstractAuthenticationFailureEvent failures) {\n     bruteForceService.registerLoginFailure(failures.getAuthentication());\n  }\n\n}\n</code></pre>\n<p>I should also say <code>lockClientAccount</code> query method functions correctly when invoked through a PUT RESTful call. However, it fails to work as expected when multiple or concurrent POST HTTP calls (login attempts) with incorrect credentials are made.</p>\n"},{"tags":["java","intellij-idea","libgdx"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686648823,"post_id":76461825,"comment_id":134824548,"body_markdown":"Yes, there is a question open on this. Please post a link to it. Also, [please never post images of text](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557). They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.\nYou should have posted the output of `echo %JAVA_HOME%` *as code-formatted text*. That is showing you that your Java home is in quite a different place from the Java that&#39;s being used to run. You need to *pre*pend `%JAVA_HOME%\\bin;` to `PATH`","body":"Yes, there is a question open on this. Please post a link to it. Also, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors/285557#285557\">please never post images of text</a>. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. You should have posted the output of <code>echo %JAVA_HOME%</code> <i>as code-formatted text</i>. That is showing you that your Java home is in quite a different place from the Java that&#39;s being used to run. You need to <i>pre</i>pend <code>%JAVA_HOME%\\bin;</code> to <code>PATH</code>"}],"owner":{"account_id":26661153,"reputation":1,"user_id":20273960,"display_name":"Yesto"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686632889,"creation_date":1686632708,"question_id":76461825,"body_markdown":"I know there is already a question to this, but I&#39;m a beginner and all the links I&#39;ve read didn&#39;t really help me so this is kind of my last resort of the night\r\n\r\nso I&#39;m trying to create a game on libgdx, at the start when I run the default badlogic game it seems normal and runs just fine.\r\n\r\nbut when I add my own codes (I know maybe there&#39;s an mistake on my code), but instead of displaying my errors it says this:\r\nExecution failed for task &#39;:desktop:DesktopLauncher.main()&#39;.\r\n&gt; Process &#39;command &#39;C:/Users/RAKITAN/.jdks/jdk-18.0.2.1/bin/java.exe&#39;&#39; finished with non-zero exit value 1\r\n\r\n\r\nI&#39;ve tried:\r\n- I checked and echoing the java version on cmd and it seems right (jdk 18):\r\n[cmd](https://i.stack.imgur.com/t0WsU.png)\r\n\r\n- I also already tried the &#39;invalidate cache and restart&#39; method as the top comment said on https://stackoverflow.com/questions/60651244/process-command-c-program-files-java-jdk-bin-java-exe-finished-with-non-zer\r\n\r\n- Create an env VAR JAVA_HOME and configure the enviroment variables\r\n\r\n- Tried re-installing IntelliJ\r\n\r\nWhat is actually the problem here? Do I have to delete and re-download the JDKs? \r\nIf I need to post something related to the question feel free to let me know. Thanks","title":"Process &#39;command &#39;C:/Users/RAKITAN/.jdks/jdk-18.0.2.1/bin/java.exe&#39;&#39; finished with non-zero exit value 1 for LIBGDX","body":"<p>I know there is already a question to this, but I'm a beginner and all the links I've read didn't really help me so this is kind of my last resort of the night</p>\n<p>so I'm trying to create a game on libgdx, at the start when I run the default badlogic game it seems normal and runs just fine.</p>\n<p>but when I add my own codes (I know maybe there's an mistake on my code), but instead of displaying my errors it says this:\nExecution failed for task ':desktop:DesktopLauncher.main()'.</p>\n<blockquote>\n<p>Process 'command 'C:/Users/RAKITAN/.jdks/jdk-18.0.2.1/bin/java.exe'' finished with non-zero exit value 1</p>\n</blockquote>\n<p>I've tried:</p>\n<ul>\n<li><p>I checked and echoing the java version on cmd and it seems right (jdk 18):\n<a href=\"https://i.stack.imgur.com/t0WsU.png\" rel=\"nofollow noreferrer\">cmd</a></p>\n</li>\n<li><p>I also already tried the 'invalidate cache and restart' method as the top comment said on <a href=\"https://stackoverflow.com/questions/60651244/process-command-c-program-files-java-jdk-bin-java-exe-finished-with-non-zer\">Process &#39;command &#39;C:\\Program Files\\Java\\jdk\\bin\\java.exe&#39;&#39; finished with non-zero exit value 1 eclipse</a></p>\n</li>\n<li><p>Create an env VAR JAVA_HOME and configure the enviroment variables</p>\n</li>\n<li><p>Tried re-installing IntelliJ</p>\n</li>\n</ul>\n<p>What is actually the problem here? Do I have to delete and re-download the JDKs?\nIf I need to post something related to the question feel free to let me know. Thanks</p>\n"},{"tags":["java","testing","integration-testing","jmx"],"answers":[{"tags":[],"owner":{"account_id":557644,"reputation":11713,"user_id":920173,"accept_rate":79,"display_name":"Salvatorelab"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1516874100,"creation_date":1516874100,"answer_id":48440028,"question_id":48440027,"body_markdown":"The error is pretty clear, there is an instance already and someone is trying to create another one. And it fails. \r\n\r\nOne way to solve this, when the problem is only showing on tests, is to ignore registration of duplicated mBeans:\r\n\r\n    &lt;context:mbean-export registration=&quot;ignoreExisting&quot;/&gt;\r\n\r\nOr if you prefer the annotation way:\r\n\r\n    @Autowired\r\n    MBeanExporter mBeanExporter;\r\n\r\nAnd then set the policy to **ignore**:\r\n\r\n    mBeanExporter.setRegistrationPolicy(RegistrationPolicy.IGNORE_EXISTING);\r\n\r\nBy default the policy is set to **FAIL_ON_EXISTING**. You can also set it to **REPLACE_EXISTING**.","title":"Testing: Unable to register MBean instance already exists","body":"<p>The error is pretty clear, there is an instance already and someone is trying to create another one. And it fails. </p>\n\n<p>One way to solve this, when the problem is only showing on tests, is to ignore registration of duplicated mBeans:</p>\n\n<pre><code>&lt;context:mbean-export registration=\"ignoreExisting\"/&gt;\n</code></pre>\n\n<p>Or if you prefer the annotation way:</p>\n\n<pre><code>@Autowired\nMBeanExporter mBeanExporter;\n</code></pre>\n\n<p>And then set the policy to <strong>ignore</strong>:</p>\n\n<pre><code>mBeanExporter.setRegistrationPolicy(RegistrationPolicy.IGNORE_EXISTING);\n</code></pre>\n\n<p>By default the policy is set to <strong>FAIL_ON_EXISTING</strong>. You can also set it to <strong>REPLACE_EXISTING</strong>.</p>\n"},{"tags":[],"owner":{"account_id":12560057,"reputation":66,"user_id":9138174,"display_name":"surajtekchandani"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1523260251,"creation_date":1523259950,"answer_id":49727876,"question_id":48440027,"body_markdown":"If you are using java based configuration you only need to add this \r\n\r\n@EnableMBeanExport(registration=RegistrationPolicy.REPLACE_EXISTING)\r\nOR\r\n@EnableMBeanExport(registration=RegistrationPolicy.IGNORE_EXISTING)\r\n\r\nSo it will replace or use already existing bean (according to your configuration) and it will not give any kind of error","title":"Testing: Unable to register MBean instance already exists","body":"<p>If you are using java based configuration you only need to add this </p>\n\n<p>@EnableMBeanExport(registration=RegistrationPolicy.REPLACE_EXISTING)\nOR\n@EnableMBeanExport(registration=RegistrationPolicy.IGNORE_EXISTING)</p>\n\n<p>So it will replace or use already existing bean (according to your configuration) and it will not give any kind of error</p>\n"},{"tags":[],"owner":{"display_name":"user10389661"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1549285717,"creation_date":1549285717,"answer_id":54516844,"question_id":48440027,"body_markdown":"If you have the @EnableAutoConfiguration annotation above your test, consider it to remove it. That helped me.  ","title":"Testing: Unable to register MBean instance already exists","body":"<p>If you have the @EnableAutoConfiguration annotation above your test, consider it to remove it. That helped me.  </p>\n"},{"tags":[],"owner":{"account_id":27996,"reputation":3020,"user_id":74343,"accept_rate":62,"display_name":"Brimstedt"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686632840,"creation_date":1686632840,"answer_id":76461832,"question_id":48440027,"body_markdown":"\r\nIn my case this occurred during tests, a second configuration that enables jmx (and scheduling in my case) that is not enabled for integration tests solved the issue. \r\n\r\n    @Configuration\r\n    @EnableScheduling\r\n    @EnableMBeanExport\r\n    @Profile(&quot;!integrationtest&quot;) // Do not run for the integrationtest profile \r\n    public class SchedulingConfiguration {\r\n    \r\n    }\r\n\r\nYou also need to annotate your tests so they use the integrationtest profile:\r\n\r\n    @SpringBootTest\r\n    @ActiveProfiles(&quot;integrationtest&quot;)\r\n    class XServiceTest {\r\n\r\n","title":"Testing: Unable to register MBean instance already exists","body":"<p>In my case this occurred during tests, a second configuration that enables jmx (and scheduling in my case) that is not enabled for integration tests solved the issue.</p>\n<pre><code>@Configuration\n@EnableScheduling\n@EnableMBeanExport\n@Profile(&quot;!integrationtest&quot;) // Do not run for the integrationtest profile \npublic class SchedulingConfiguration {\n\n}\n</code></pre>\n<p>You also need to annotate your tests so they use the integrationtest profile:</p>\n<pre><code>@SpringBootTest\n@ActiveProfiles(&quot;integrationtest&quot;)\nclass XServiceTest {\n</code></pre>\n"}],"owner":{"account_id":557644,"reputation":11713,"user_id":920173,"accept_rate":79,"display_name":"Salvatorelab"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8791,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":49727876,"answer_count":4,"score":3,"last_activity_date":1686632840,"creation_date":1516874100,"question_id":48440027,"body_markdown":"We have a few integration tests but recently we have faced a problem when a **@ManagedResource** is in the way:\r\n\r\n    Unable to register MBean [com.api.configuration.ApiConfiguration@63fde7ca] with key &#39;apiConfiguration&#39;; nested exception is javax.management.InstanceAlreadyExistsException: api:name=ApiConfiguration\r\n\r\nAnd the offending bean looks like this:\r\n\r\n    @Component\r\n    @ManagedResource(objectName = &quot;api:name=ApiConfiguration&quot;)\r\n    public class ApiConfiguration {\r\n    \r\n        @ManagedOperation\t\r\n    \tpublic void reloadConfiguration() {\r\n            // do something\r\n        }\r\n        \r\n    }\r\n\r\nWe have tried adding a `@DirtiesContext` on every integration test without success.\r\nThe error only appears when running all tests from Maven or IntelliJ. If we run only one of the failing tests it works.","title":"Testing: Unable to register MBean instance already exists","body":"<p>We have a few integration tests but recently we have faced a problem when a <strong>@ManagedResource</strong> is in the way:</p>\n\n<pre><code>Unable to register MBean [com.api.configuration.ApiConfiguration@63fde7ca] with key 'apiConfiguration'; nested exception is javax.management.InstanceAlreadyExistsException: api:name=ApiConfiguration\n</code></pre>\n\n<p>And the offending bean looks like this:</p>\n\n<pre><code>@Component\n@ManagedResource(objectName = \"api:name=ApiConfiguration\")\npublic class ApiConfiguration {\n\n    @ManagedOperation   \n    public void reloadConfiguration() {\n        // do something\n    }\n\n}\n</code></pre>\n\n<p>We have tried adding a <code>@DirtiesContext</code> on every integration test without success.\nThe error only appears when running all tests from Maven or IntelliJ. If we run only one of the failing tests it works.</p>\n"},{"tags":["java","websphere","websphere-commerce"],"owner":{"account_id":18802560,"reputation":639,"user_id":13712583,"display_name":"KUNAL HIRANI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686632703,"creation_date":1686563365,"question_id":76455445,"body_markdown":"I want to add extra data into response entity of out of box handler method. \r\n\r\nThere is a out of box handler named **CartHandler** Which has below method\r\n\r\n```\r\n @Path(&quot;@self/usable_payment_info&quot;)\r\n public Response getUsablePaymentInfo(@PathParam(&quot;storeId&quot;) @ParameterDescription(description=&quot;The store identifier.&quot;, valueProviderClass=StoreIdProvider.class, required=true) String storeId, @QueryParam(&quot;responseFormat&quot;) @ParameterDescription(description=&quot;The response format. If the request has an input body, that body must also use the format specified in \\&quot;responseFormat\\&quot;. Valid values include \\&quot;json\\&quot; and \\&quot;xml\\&quot; without the quotes. If the responseFormat isn&#39;t specified, the \\&quot;accept\\&quot; HTTP header shall be used to determine the format of the response. If the \\&quot;accept\\&quot; HTTP header isn&#39;t specified as well, the default response format shall be in json.&quot;, valueProviderClass=ResponseType.class) String responseFormat, @QueryParam(&quot;pageNumber&quot;) @ParameterDescription(description=&quot;Page number, starting at 1. Valid values include positive integers of 1 and above. The \\&quot;pageSize\\&quot; must be specified for paging to work.&quot;) int pageNumber, @QueryParam(&quot;pageSize&quot;) @ParameterDescription(description=&quot;Page size. Used to limit the amount of data returned by a query. Valid values include positive integers of 1 and above. The \\&quot;pageNumber\\&quot; must be specified for paging to work.&quot;) int pageSize)\r\n  {\r\n\r\n  }\r\n\r\n```\r\n\r\nNow, i want to add extra fields to the existing json data which is generated in response of this above method.\r\n\r\n\r\nSo i tried to extend the CartHandler with in new handler which overrides the above method.\r\n\r\n\r\n```\r\n\r\npublic class UsablePaymentInfoHandler extends CartHandler {\r\n\r\n @override\r\n public Response getUsablePaymentInfo(@PathParam(&quot;storeId&quot;) @ParameterDescription(description=&quot;The store identifier.&quot;, valueProviderClass=StoreIdProvider.class, required=true) String storeId, @QueryParam(&quot;responseFormat&quot;) @ParameterDescription(description=&quot;The response format. If the request has an input body, that body must also use the format specified in \\&quot;responseFormat\\&quot;. Valid values include \\&quot;json\\&quot; and \\&quot;xml\\&quot; without the quotes. If the responseFormat isn&#39;t specified, the \\&quot;accept\\&quot; HTTP header shall be used to determine the format of the response. If the \\&quot;accept\\&quot; HTTP header isn&#39;t specified as well, the default response format shall be in json.&quot;, valueProviderClass=ResponseType.class) String responseFormat, @QueryParam(&quot;pageNumber&quot;) @ParameterDescription(description=&quot;Page number, starting at 1. Valid values include positive integers of 1 and above. The \\&quot;pageSize\\&quot; must be specified for paging to work.&quot;) int pageNumber, @QueryParam(&quot;pageSize&quot;) @ParameterDescription(description=&quot;Page size. Used to limit the amount of data returned by a query. Valid values include positive integers of 1 and above. The \\&quot;pageNumber\\&quot; must be specified for paging to work.&quot;) int pageSize)\r\n  {\r\n\t  super.getUsablePaymentInfo(storeId, responseFormat, pageNumber, pageSize);\r\n\t  return null;\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nBut when i checked in debug mode, i found that control is not passed here as it is passing control to old out-of-box method only.\r\n\r\n\r\nCan anyone suggest solution for this?\r\n\r\n","title":"Can we override existing method of out-of-box handler in websphere commerce?","body":"<p>I want to add extra data into response entity of out of box handler method.</p>\n<p>There is a out of box handler named <strong>CartHandler</strong> Which has below method</p>\n<pre><code> @Path(&quot;@self/usable_payment_info&quot;)\n public Response getUsablePaymentInfo(@PathParam(&quot;storeId&quot;) @ParameterDescription(description=&quot;The store identifier.&quot;, valueProviderClass=StoreIdProvider.class, required=true) String storeId, @QueryParam(&quot;responseFormat&quot;) @ParameterDescription(description=&quot;The response format. If the request has an input body, that body must also use the format specified in \\&quot;responseFormat\\&quot;. Valid values include \\&quot;json\\&quot; and \\&quot;xml\\&quot; without the quotes. If the responseFormat isn't specified, the \\&quot;accept\\&quot; HTTP header shall be used to determine the format of the response. If the \\&quot;accept\\&quot; HTTP header isn't specified as well, the default response format shall be in json.&quot;, valueProviderClass=ResponseType.class) String responseFormat, @QueryParam(&quot;pageNumber&quot;) @ParameterDescription(description=&quot;Page number, starting at 1. Valid values include positive integers of 1 and above. The \\&quot;pageSize\\&quot; must be specified for paging to work.&quot;) int pageNumber, @QueryParam(&quot;pageSize&quot;) @ParameterDescription(description=&quot;Page size. Used to limit the amount of data returned by a query. Valid values include positive integers of 1 and above. The \\&quot;pageNumber\\&quot; must be specified for paging to work.&quot;) int pageSize)\n  {\n\n  }\n\n</code></pre>\n<p>Now, i want to add extra fields to the existing json data which is generated in response of this above method.</p>\n<p>So i tried to extend the CartHandler with in new handler which overrides the above method.</p>\n<pre><code>\npublic class UsablePaymentInfoHandler extends CartHandler {\n\n @override\n public Response getUsablePaymentInfo(@PathParam(&quot;storeId&quot;) @ParameterDescription(description=&quot;The store identifier.&quot;, valueProviderClass=StoreIdProvider.class, required=true) String storeId, @QueryParam(&quot;responseFormat&quot;) @ParameterDescription(description=&quot;The response format. If the request has an input body, that body must also use the format specified in \\&quot;responseFormat\\&quot;. Valid values include \\&quot;json\\&quot; and \\&quot;xml\\&quot; without the quotes. If the responseFormat isn't specified, the \\&quot;accept\\&quot; HTTP header shall be used to determine the format of the response. If the \\&quot;accept\\&quot; HTTP header isn't specified as well, the default response format shall be in json.&quot;, valueProviderClass=ResponseType.class) String responseFormat, @QueryParam(&quot;pageNumber&quot;) @ParameterDescription(description=&quot;Page number, starting at 1. Valid values include positive integers of 1 and above. The \\&quot;pageSize\\&quot; must be specified for paging to work.&quot;) int pageNumber, @QueryParam(&quot;pageSize&quot;) @ParameterDescription(description=&quot;Page size. Used to limit the amount of data returned by a query. Valid values include positive integers of 1 and above. The \\&quot;pageNumber\\&quot; must be specified for paging to work.&quot;) int pageSize)\n  {\n      super.getUsablePaymentInfo(storeId, responseFormat, pageNumber, pageSize);\n      return null;\n  }\n\n}\n\n</code></pre>\n<p>But when i checked in debug mode, i found that control is not passed here as it is passing control to old out-of-box method only.</p>\n<p>Can anyone suggest solution for this?</p>\n"},{"tags":["java","bitwise-operators","comparison-operators","bitwise-and"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":1,"creation_date":1686512427,"post_id":76452225,"comment_id":134805099,"body_markdown":"It&#39;s binary multiplication. Usually for validating bit flags.","body":"It&#39;s binary multiplication. Usually for validating bit flags."},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":1,"creation_date":1686512899,"post_id":76452225,"comment_id":134805146,"body_markdown":"It may be a mis-reference.  If I&#39;m not mistaken, I believe originally, in some old programming languages from the early 70s, that&#39;s what the single _&amp;_ would accomplish.  And, they redacted it due to inconsistencies with general programming logic, and design.  The modern approach for the single _&amp;_ is what the other posters here are explaining; the _bitwise_ operation.","body":"It may be a mis-reference.  If I&#39;m not mistaken, I believe originally, in some old programming languages from the early 70s, that&#39;s what the single <i>&amp;</i> would accomplish.  And, they redacted it due to inconsistencies with general programming logic, and design.  The modern approach for the single <i>&amp;</i> is what the other posters here are explaining; the <i>bitwise</i> operation."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":4,"creation_date":1686535131,"post_id":76452225,"comment_id":134806916,"body_markdown":"*&quot;It&#39;s binary multiplication&quot;* - I have never heard it called that before ... and it is very misleading.","body":"<i>&quot;It&#39;s binary multiplication&quot;</i> - I have never heard it called that before ... and it is very misleading."}],"answers":[{"tags":[],"owner":{"account_id":1475,"reputation":533754,"user_id":1968,"accept_rate":83,"display_name":"Konrad Rudolph"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1686512413,"creation_date":1686512413,"answer_id":76452242,"question_id":76452225,"body_markdown":"[`&amp;` performs *bitwise “and”*](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html).\r\n\r\nThus, `ch &amp; 15` checks whether any of the first four lowest bits are set (because 15 is 1111 in binary). The result of the operation is a number with all other bits set to 0, and only those of the four low-level bits set to 1 which were also set to 1 in `ch`.","title":"What&#39;s the purpose of &amp; in Java?","body":"<p><a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html\" rel=\"noreferrer\"><code>&amp;</code> performs <em>bitwise “and”</em></a>.</p>\n<p>Thus, <code>ch &amp; 15</code> checks whether any of the first four lowest bits are set (because 15 is 1111 in binary). The result of the operation is a number with all other bits set to 0, and only those of the four low-level bits set to 1 which were also set to 1 in <code>ch</code>.</p>\n"},{"tags":[],"owner":{"account_id":21212970,"reputation":86,"user_id":15601177,"display_name":"berry.11"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686512458,"creation_date":1686512458,"answer_id":76452244,"question_id":76452225,"body_markdown":"The &amp; operator used in the code is the bitwise AND operator. This operator checks the corresponding bits of the two operands at the bit level and generates its result.\r\n\r\nIn the code snippet, the second bit (corresponding to 16) of the variable ch is checked using the ch &amp; 16 expression. If the second bit is 1 (not 0), the last 4 bits of ch (the corresponding bits 15) are assigned to the screenData[pos] array.\r\nThis usage is used to control certain bits of ch and act accordingly. \r\n\r\nFor example, the expression ch &amp; 16 is used to check the second bit of the variable ch, while the expression ch &amp; 15 is used to get the last 4 bits of ch.\r\nHence, the &amp; operator is used to control or manipulate certain bits in bitwise operations.","title":"What&#39;s the purpose of &amp; in Java?","body":"<p>The &amp; operator used in the code is the bitwise AND operator. This operator checks the corresponding bits of the two operands at the bit level and generates its result.</p>\n<p>In the code snippet, the second bit (corresponding to 16) of the variable ch is checked using the ch &amp; 16 expression. If the second bit is 1 (not 0), the last 4 bits of ch (the corresponding bits 15) are assigned to the screenData[pos] array.\nThis usage is used to control certain bits of ch and act accordingly.</p>\n<p>For example, the expression ch &amp; 16 is used to check the second bit of the variable ch, while the expression ch &amp; 15 is used to get the last 4 bits of ch.\nHence, the &amp; operator is used to control or manipulate certain bits in bitwise operations.</p>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686514956,"creation_date":1686513790,"answer_id":76452314,"question_id":76452225,"body_markdown":"&gt;What&#39;s the purpose of &amp; in Java?\r\n\r\nThere are two uses for the `&amp;` (AND) operator\r\n- the most common is as a bit masking operation in combination with other bit manipulation operators `(e.g ~, |, ^)` to check for certain bits or to mask off certain bits.\r\n- the other is for logical comparisons.\r\n  - `&amp;&amp;` for short circuiting conditionals\r\n  - `&amp;`  for non-short circuiting conditionals\r\n\r\n**Bit Masking, etc**\r\n```\r\nint v = 0xFF;\r\nv = v &amp; 0xF0; //now v = 0xF0\r\n```\r\n**In Conditionals**\r\n```\r\nint v = 10;\r\nint k = 1;\r\nif (v == 11 &amp;&amp; k++ == 4) {\r\n   // do something\r\n}\r\nSystem.out.println(k); // prints 1\r\n```\r\nsince `v` is false, there was no reason to check if `k++ == 4` so `k` is not incremented.  In other words it efficiently short circuits the evaluation.  This is because, when a series of `&amp;&amp;` separates various logical tests, if one fails, the whole expression is evaluated as false.  Unlike the `||` (OR operator), if a all the expressions are OR&#39;s and evaluate `false` except for one, the expression is `true`.\r\n```\r\nint v = 10;\r\nint k = 1;\r\nif (v == 11 &amp; k++ == 4) {\r\n   // do something\r\n}\r\nSystem.out.println(k); // prints 2\r\n```\r\nWith a single `&amp;` `k` is tested regardless of the outcome of the first or even the second part of the conditional.  This is, imho, less used and can induce bugs that are hard to find.\r\n\r\nIn your example, here is what is going on.\r\n```\r\nint ch = 0, pos = 0;\r\nif((ch &amp; 16) != 0) { //16 is 10000 in binary so it checks to see if that \r\n                     //bit is set, if `not ==  0`, it is set, so the \r\n                     //conditional succeeds\r\n                \r\n      screenData[pos] = (int) (ch &amp; 15); // 15 is 1111 in binary to it \r\n                                         // masks off the high order bits\r\n                                         // keeping the low   \r\n                                         // order four bits of ch and \r\n                                         // assigns the result to the array.\r\n```\r\nThe above example would be more interesting if `ch` wasn&#39;t `0` to start.\r\n    \r\n\r\n\r\n\r\n\r\n ","title":"What&#39;s the purpose of &amp; in Java?","body":"<blockquote>\n<p>What's the purpose of &amp; in Java?</p>\n</blockquote>\n<p>There are two uses for the <code>&amp;</code> (AND) operator</p>\n<ul>\n<li>the most common is as a bit masking operation in combination with other bit manipulation operators <code>(e.g ~, |, ^)</code> to check for certain bits or to mask off certain bits.</li>\n<li>the other is for logical comparisons.\n<ul>\n<li><code>&amp;&amp;</code> for short circuiting conditionals</li>\n<li><code>&amp;</code>  for non-short circuiting conditionals</li>\n</ul>\n</li>\n</ul>\n<p><strong>Bit Masking, etc</strong></p>\n<pre><code>int v = 0xFF;\nv = v &amp; 0xF0; //now v = 0xF0\n</code></pre>\n<p><strong>In Conditionals</strong></p>\n<pre><code>int v = 10;\nint k = 1;\nif (v == 11 &amp;&amp; k++ == 4) {\n   // do something\n}\nSystem.out.println(k); // prints 1\n</code></pre>\n<p>since <code>v</code> is false, there was no reason to check if <code>k++ == 4</code> so <code>k</code> is not incremented.  In other words it efficiently short circuits the evaluation.  This is because, when a series of <code>&amp;&amp;</code> separates various logical tests, if one fails, the whole expression is evaluated as false.  Unlike the <code>||</code> (OR operator), if a all the expressions are OR's and evaluate <code>false</code> except for one, the expression is <code>true</code>.</p>\n<pre><code>int v = 10;\nint k = 1;\nif (v == 11 &amp; k++ == 4) {\n   // do something\n}\nSystem.out.println(k); // prints 2\n</code></pre>\n<p>With a single <code>&amp;</code> <code>k</code> is tested regardless of the outcome of the first or even the second part of the conditional.  This is, imho, less used and can induce bugs that are hard to find.</p>\n<p>In your example, here is what is going on.</p>\n<pre><code>int ch = 0, pos = 0;\nif((ch &amp; 16) != 0) { //16 is 10000 in binary so it checks to see if that \n                     //bit is set, if `not ==  0`, it is set, so the \n                     //conditional succeeds\n                \n      screenData[pos] = (int) (ch &amp; 15); // 15 is 1111 in binary to it \n                                         // masks off the high order bits\n                                         // keeping the low   \n                                         // order four bits of ch and \n                                         // assigns the result to the array.\n</code></pre>\n<p>The above example would be more interesting if <code>ch</code> wasn't <code>0</code> to start.</p>\n"}],"owner":{"account_id":28654856,"reputation":33,"user_id":21941130,"display_name":"Smile D"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"accepted_answer_id":76452244,"answer_count":3,"score":-3,"last_activity_date":1686632411,"creation_date":1686512171,"question_id":76452225,"body_markdown":"So, I was following a pacman tutorial and the coder uses &amp; not  &amp;&amp;. He doesn&#39;t explain what it does though. I searched it up and it says that unlike &amp;&amp;, &amp; checks both statements. That makes sense. But the coder doesn&#39;t use it in a comparison context. This is his code. \r\n\r\nscreenData[] is an 255 element int array. \r\n\r\n```\r\nint ch = 0, pos = 0;\r\nif((ch &amp; 16) != 0) {\r\n      screenData[pos] = (int) (ch &amp; 15);\r\n\t}\r\n```\r\n\r\n\r\nPlease tell me why he did that and what&#39;s the use of &amp; in this context.","title":"What&#39;s the purpose of &amp; in Java?","body":"<p>So, I was following a pacman tutorial and the coder uses &amp; not  &amp;&amp;. He doesn't explain what it does though. I searched it up and it says that unlike &amp;&amp;, &amp; checks both statements. That makes sense. But the coder doesn't use it in a comparison context. This is his code.</p>\n<p>screenData[] is an 255 element int array.</p>\n<pre><code>int ch = 0, pos = 0;\nif((ch &amp; 16) != 0) {\n      screenData[pos] = (int) (ch &amp; 15);\n    }\n</code></pre>\n<p>Please tell me why he did that and what's the use of &amp; in this context.</p>\n"},{"tags":["java","database","caching","jooq","change-data-capture"],"answers":[{"tags":[],"owner":{"account_id":1012936,"reputation":145168,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686564344,"creation_date":1686564344,"answer_id":76455566,"question_id":76379832,"body_markdown":"The solution in the article is meant to be called every N seconds to synchronize the cache.\r\n\r\nThe Web Sockets push is more useful for the UI than for backend services. If you want to make this synchronously, you could use PostgreSQL [NOTIFY](https://www.postgresql.org/docs/current/sql-notify.html).","title":"Realtime Database Change Capture in Java Application","body":"<p>The solution in the article is meant to be called every N seconds to synchronize the cache.</p>\n<p>The Web Sockets push is more useful for the UI than for backend services. If you want to make this synchronously, you could use PostgreSQL <a href=\"https://www.postgresql.org/docs/current/sql-notify.html\" rel=\"nofollow noreferrer\">NOTIFY</a>.</p>\n"}],"owner":{"account_id":1661646,"reputation":813,"user_id":1529822,"accept_rate":42,"display_name":"vvekselva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686632228,"creation_date":1685606507,"question_id":76379832,"body_markdown":"I&#39;ve read the following article about cache synchronization and database.\r\nHere the author uses JOOQ for cache synchronization.\r\n\r\nhttps://vladmihalcea.com/cache-synchronization-jooq-postgresql-functions/\r\n\r\n\r\nAfter reading the article I found that to know the database changes, we need to call the API manually.\r\nIs there any pattern to get real-time notifications of the database changes to the Java application like web socket push?","title":"Realtime Database Change Capture in Java Application","body":"<p>I've read the following article about cache synchronization and database.\nHere the author uses JOOQ for cache synchronization.</p>\n<p><a href=\"https://vladmihalcea.com/cache-synchronization-jooq-postgresql-functions/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/cache-synchronization-jooq-postgresql-functions/</a></p>\n<p>After reading the article I found that to know the database changes, we need to call the API manually.\nIs there any pattern to get real-time notifications of the database changes to the Java application like web socket push?</p>\n"},{"tags":["java","arrays","double","average"],"comments":[{"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"score":2,"creation_date":1345192291,"post_id":12002332,"comment_id":16008306,"body_markdown":"@DanglingPiyush No need to. The question is clear.","body":"@DanglingPiyush No need to. The question is clear."},{"owner":{"account_id":19462,"reputation":102762,"user_id":45664,"accept_rate":91,"display_name":"Andrzej Doyle"},"score":2,"creation_date":1345192471,"post_id":12002332,"comment_id":16008365,"body_markdown":"Your whitespace is quite misleading.  It&#39;s usually considered good practice to use braces around for/while loops for clarity, whereas what you have now is misleading.  See [this pastebin](http://pastebin.com/HLpFv8zw) for an example of what I mean.","body":"Your whitespace is quite misleading.  It&#39;s usually considered good practice to use braces around for/while loops for clarity, whereas what you have now is misleading.  See <a href=\"http://pastebin.com/HLpFv8zw\" rel=\"nofollow noreferrer\">this pastebin</a> for an example of what I mean."}],"answers":[{"tags":[],"owner":{"account_id":243785,"reputation":14615,"user_id":516165,"display_name":"CyberDem0n"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1345192125,"creation_date":1345192125,"answer_id":12002349,"question_id":12002332,"body_markdown":"    -while(int i=0; i &lt; data.length; i++) \r\n    +for(int i=0; i &lt; data.length; i++) \r\n","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<pre><code>-while(int i=0; i &lt; data.length; i++) \n+for(int i=0; i &lt; data.length; i++) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1114067,"reputation":196781,"user_id":1103872,"accept_rate":82,"display_name":"Marko Topolnik"},"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1345192613,"creation_date":1345192221,"answer_id":12002374,"question_id":12002332,"body_markdown":"Using an enhanced for would be even nicer:\r\n\r\n    int sum = 0;\r\n    for (int d : data) sum += d;\r\n\r\nAnother thing that will probably give you a big surprise is the wrong result that you will obtain from\r\n\r\n    double average = sum / data.length;\r\n\r\nReason: on the right-hand side you have integer division and Java will not automatically promote it to floating-point division. It will calculate the integer quotient of `sum/data.length` and only then promote that integer to a `double`. A solution would be\r\n\r\n    double average = 1.0d * sum / data.length;\r\n\r\nThis will force the dividend into a `double`, which will automatically propagate to the divisor.","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>Using an enhanced for would be even nicer:</p>\n\n<pre><code>int sum = 0;\nfor (int d : data) sum += d;\n</code></pre>\n\n<p>Another thing that will probably give you a big surprise is the wrong result that you will obtain from</p>\n\n<pre><code>double average = sum / data.length;\n</code></pre>\n\n<p>Reason: on the right-hand side you have integer division and Java will not automatically promote it to floating-point division. It will calculate the integer quotient of <code>sum/data.length</code> and only then promote that integer to a <code>double</code>. A solution would be</p>\n\n<pre><code>double average = 1.0d * sum / data.length;\n</code></pre>\n\n<p>This will force the dividend into a <code>double</code>, which will automatically propagate to the divisor.</p>\n"},{"tags":[],"owner":{"account_id":543284,"reputation":2492,"user_id":912318,"accept_rate":92,"display_name":"James"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1345192404,"creation_date":1345192404,"answer_id":12002421,"question_id":12002332,"body_markdown":"Couple of problems:\r\n\r\nThe `while` should be a `for`\r\nYou are not returning a value but you have declared a return type of double\r\n\r\n    double average = sum / data.length;;\r\nsum and data.length are both ints so the division will return an int - check your types\r\n\r\ndouble semi-colon, probably won&#39;t break it, just looks odd.\r\n","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>Couple of problems:</p>\n\n<p>The <code>while</code> should be a <code>for</code>\nYou are not returning a value but you have declared a return type of double</p>\n\n<pre><code>double average = sum / data.length;;\n</code></pre>\n\n<p>sum and data.length are both ints so the division will return an int - check your types</p>\n\n<p>double semi-colon, probably won't break it, just looks odd.</p>\n"},{"tags":[],"owner":{"account_id":1393712,"reputation":878,"user_id":1559445,"accept_rate":89,"display_name":"mssb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1345198148,"creation_date":1345198148,"answer_id":12003793,"question_id":12002332,"body_markdown":"Try this way\r\n\r\n    public void average(int[] data) {  \r\n        int sum = 0;\r\n        double average;\r\n\r\n        for(int i=0; i &lt; data.length; i++){\r\n            sum = sum + data[i];\r\n        }\r\n        average = (double)sum/data.length;\r\n        System.out.println(&quot;Average value of array element is &quot; + average);    \r\n    }\r\n\r\nif you need to return average value you need to use **double** key word Instead of the **void** key word and need to return value **return average**.\r\n\r\n    public double average(int[] data) {  \r\n        int sum = 0;\r\n        double average;\r\n\r\n        for(int i=0; i &lt; data.length; i++){\r\n            sum = sum + data[i];\r\n        }\r\n        average = (double)sum/data.length;\r\n        return average;    \r\n    }","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>Try this way</p>\n\n<pre><code>public void average(int[] data) {  \n    int sum = 0;\n    double average;\n\n    for(int i=0; i &lt; data.length; i++){\n        sum = sum + data[i];\n    }\n    average = (double)sum/data.length;\n    System.out.println(\"Average value of array element is \" + average);    \n}\n</code></pre>\n\n<p>if you need to return average value you need to use <strong>double</strong> key word Instead of the <strong>void</strong> key word and need to return value <strong>return average</strong>.</p>\n\n<pre><code>public double average(int[] data) {  \n    int sum = 0;\n    double average;\n\n    for(int i=0; i &lt; data.length; i++){\n        sum = sum + data[i];\n    }\n    average = (double)sum/data.length;\n    return average;    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6403368,"reputation":1,"user_id":4965357,"display_name":"Kastriot Rexhepi"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1433251376,"creation_date":1433250330,"answer_id":30596989,"question_id":12002332,"body_markdown":"If we want to add numbers of an Array and find the average of them follow this easy way! .....\r\n\r\n\tpublic class Array {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\t\r\n\t\t\tint[]array = {1,3,5,7,9,6,3};\r\n\t\t\tint i=0;\r\n\t\t\tint sum=0;\r\n\t\t\tdouble average=0;\r\n\t\t\tfor( i=0;i&lt;array.length;i++){\r\n\t\t\t\tSystem.out.println(array[i]);\r\n\t\t\t\tsum=sum+array[i];\r\n\t\t\t}\r\n\t\t\tSystem.out.println(&quot;sum is:&quot;+sum);\r\n\t\t\tSystem.out.println(&quot;average is: &quot;+(double)sum/vargu.length);\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t}\r\n\r\n\t}","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>If we want to add numbers of an Array and find the average of them follow this easy way! .....</p>\n\n<pre><code>public class Array {\n\n    public static void main(String[] args) {\n\n        int[]array = {1,3,5,7,9,6,3};\n        int i=0;\n        int sum=0;\n        double average=0;\n        for( i=0;i&lt;array.length;i++){\n            System.out.println(array[i]);\n            sum=sum+array[i];\n        }\n        System.out.println(\"sum is:\"+sum);\n        System.out.println(\"average is: \"+(double)sum/vargu.length);\n\n\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6403368,"reputation":1,"user_id":4965357,"display_name":"Kastriot Rexhepi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1433261697,"creation_date":1433261697,"answer_id":30601302,"question_id":12002332,"body_markdown":"Best way to find the average of some numbers is  trying  **Classes** ......\r\n\r\n\r\n\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\taverage(1,2,5,4);\r\n\t\r\n\t}\r\n\t\r\n\tpublic static void average(int...numbers){\r\n\t\tint total = 0;\r\n\t\tfor(int x: numbers){\r\n\t\t\ttotal+=x;\r\n\t\t}\r\n\t\tSystem.out.println(&quot;Average is: &quot;+(double)total/numbers.length);\r\n\t\t\r\n\t}","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>Best way to find the average of some numbers is  trying  <strong>Classes</strong> ......</p>\n\n<pre><code>public static void main(String[] args) {\n    average(1,2,5,4);\n\n}\n\npublic static void average(int...numbers){\n    int total = 0;\n    for(int x: numbers){\n        total+=x;\n    }\n    System.out.println(\"Average is: \"+(double)total/numbers.length);\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5665550,"reputation":1596,"user_id":4481818,"display_name":"skubski"},"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1507205495,"creation_date":1507205495,"answer_id":46585325,"question_id":12002332,"body_markdown":"The Java 8 streaming api offers an elegant alternative:\r\n\r\n    public static void main(String[] args) {\r\n        double avg = Arrays.stream(new int[]{1,3,2,5,8}).average().getAsDouble();\r\n    \r\n        System.out.println(&quot;avg: &quot; + avg);\r\n    }","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>The Java 8 streaming api offers an elegant alternative:</p>\n\n<pre><code>public static void main(String[] args) {\n    double avg = Arrays.stream(new int[]{1,3,2,5,8}).average().getAsDouble();\n\n    System.out.println(\"avg: \" + avg);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28338811,"reputation":1,"user_id":21672153,"display_name":"Susikumar Pitchaimuthu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686631677,"creation_date":1686631677,"answer_id":76461767,"question_id":12002332,"body_markdown":"      double[] numArray = { 45.3, 67.5, -45.6, 20.34, 33.0, 45.6 };\r\n        double sum = 0.0;\r\n\r\n        for (double num: numArray) {\r\n           sum += num;\r\n        }\r\n\r\n        double average = sum / numArray.length;\r\n        System.out.format(&quot;The average is: %.2f&quot;, average);","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<pre><code>  double[] numArray = { 45.3, 67.5, -45.6, 20.34, 33.0, 45.6 };\n    double sum = 0.0;\n\n    for (double num: numArray) {\n       sum += num;\n    }\n\n    double average = sum / numArray.length;\n    System.out.format(&quot;The average is: %.2f&quot;, average);\n</code></pre>\n"}],"owner":{"account_id":1758006,"reputation":111,"user_id":1605782,"accept_rate":0,"display_name":"user1605782"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":144281,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"answer_count":8,"score":9,"last_activity_date":1686631677,"creation_date":1345192037,"question_id":12002332,"body_markdown":"I have a homework assignment and I was wondering if anyone could help me as I am new to Java and programming and am stuck on a question. The question is: \r\n\r\nThe first method finds the average of the elements of an integer array:\r\n\r\n    public double average(int[] data)\r\n\r\nThat is, given an integer array, data, calculate the average of its elements are return the average value. For example, the average of {1, 3, 2, 5, 8} is 3.8. \r\n\r\nHere is what I have done so far: \r\n\r\n    public double average(int[] data) {  \r\n        int sum = 0;\r\n        \r\n        while(int i=0; i &lt; data.length; i++) \r\n        \r\n        sum = sum + data[i]; \r\n        double average = sum / data.length;; \r\n        \r\n        System.out.println(&quot;Average value of array element is &quot; &quot; + average);\r\n    }\r\n\r\nWhen compiling it I get an error message at the `int i=0` part saying &#39;.class expected&#39;. Any help would be appreciated. ","title":"How to manipulate arrays. Find the average. Beginner Java","body":"<p>I have a homework assignment and I was wondering if anyone could help me as I am new to Java and programming and am stuck on a question. The question is: </p>\n\n<p>The first method finds the average of the elements of an integer array:</p>\n\n<pre><code>public double average(int[] data)\n</code></pre>\n\n<p>That is, given an integer array, data, calculate the average of its elements are return the average value. For example, the average of {1, 3, 2, 5, 8} is 3.8. </p>\n\n<p>Here is what I have done so far: </p>\n\n<pre><code>public double average(int[] data) {  \n    int sum = 0;\n\n    while(int i=0; i &lt; data.length; i++) \n\n    sum = sum + data[i]; \n    double average = sum / data.length;; \n\n    System.out.println(\"Average value of array element is \" \" + average);\n}\n</code></pre>\n\n<p>When compiling it I get an error message at the <code>int i=0</code> part saying '.class expected'. Any help would be appreciated. </p>\n"},{"tags":["java","spring","spring-boot","javabeans","spring-bean"],"comments":[{"owner":{"account_id":8136328,"reputation":1561,"user_id":6127820,"accept_rate":33,"display_name":"Vaibs"},"score":0,"creation_date":1686305107,"post_id":76428648,"comment_id":134783809,"body_markdown":"could you please add code?","body":"could you please add code?"},{"owner":{"account_id":8489777,"reputation":91,"user_id":6366515,"display_name":"vishal jagdale"},"score":0,"creation_date":1686630023,"post_id":76428648,"comment_id":134821533,"body_markdown":"@Vaibs I have added the code please check,","body":"@Vaibs I have added the code please check,"}],"owner":{"account_id":8489777,"reputation":91,"user_id":6366515,"display_name":"vishal jagdale"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686631281,"creation_date":1686198820,"question_id":76428648,"body_markdown":"I have a bean annotated with @Scope(&quot;prototype&quot;). It worked well with Spring boot  2.1.7 RELEASE. Spring created this bean only when requested from application context, but after upgrading to spring boot version 2.7.11 RELEASE the spring is trying to create bean even before it is requested(spring tries to create a bean at start up). I have tried @Lookup @Lazy and @Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.INTERFACES) but nothings works. It seems prototype bean is not at all working.\r\n\r\n        @Scope(&quot;prototype&quot;)\r\n        @Bean\r\n        public MyClass myBeanLoader(final DataSource ds){\r\n           // some code\r\n            return myclass;\r\n        }\r\n\r\n    //trying to load bean at runtime,but bean is created even before below code. Ideally the bean should be created after below code.\r\n\r\n    DataSource ds=new DataSource();\r\n    appContext.getBean(MyClass.class,ds);\r\n\r\n","title":"@Scope(&quot;prototype&quot;) is not working in spring boot upgrade from version 2.1.7 RELEASE to 2.7.11 RELEASE","body":"<p>I have a bean annotated with @Scope(&quot;prototype&quot;). It worked well with Spring boot  2.1.7 RELEASE. Spring created this bean only when requested from application context, but after upgrading to spring boot version 2.7.11 RELEASE the spring is trying to create bean even before it is requested(spring tries to create a bean at start up). I have tried @Lookup @Lazy and @Scope(value = &quot;prototype&quot;, proxyMode = ScopedProxyMode.INTERFACES) but nothings works. It seems prototype bean is not at all working.</p>\n<pre><code>    @Scope(&quot;prototype&quot;)\n    @Bean\n    public MyClass myBeanLoader(final DataSource ds){\n       // some code\n        return myclass;\n    }\n\n//trying to load bean at runtime,but bean is created even before below code. Ideally the bean should be created after below code.\n\nDataSource ds=new DataSource();\nappContext.getBean(MyClass.class,ds);\n</code></pre>\n"},{"tags":["java","implementation","rate-limiting","resilience4j"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1686644595,"post_id":76461722,"comment_id":134823637,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":17753578,"reputation":1,"user_id":12891118,"display_name":"SIvaji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":76,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686631046,"creation_date":1686631046,"question_id":76461722,"body_markdown":"I was surfing internet on implementing IP address based ratelimiter using Resilience-4j in java programming language.  But, i didn&#39;t find any relevant articles or information on this.\r\n\r\nCan somebody share your thoughts/suggestions?","title":"Is it possible to implement IP based Ratelimiter using Resilience 4j in java?","body":"<p>I was surfing internet on implementing IP address based ratelimiter using Resilience-4j in java programming language.  But, i didn't find any relevant articles or information on this.</p>\n<p>Can somebody share your thoughts/suggestions?</p>\n"},{"tags":["java","primefaces","primefaces-datatable"],"comments":[{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1686747582,"post_id":76461686,"comment_id":134841497,"body_markdown":"you want to print numbers in headerRow as well? header 1, header 2, header 3?","body":"you want to print numbers in headerRow as well? header 1, header 2, header 3?"},{"owner":{"account_id":1073348,"reputation":571,"user_id":1072089,"accept_rate":75,"display_name":"Nikola"},"score":0,"creation_date":1686747661,"post_id":76461686,"comment_id":134841531,"body_markdown":"or you want to print inside 1st header &quot;rows 2,3,6&quot;, 2nd header &quot;rows 1,5&quot;","body":"or you want to print inside 1st header &quot;rows 2,3,6&quot;, 2nd header &quot;rows 1,5&quot;"}],"owner":{"account_id":28809186,"reputation":1,"user_id":22064313,"display_name":"Edgard Moreno"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686630353,"creation_date":1686630353,"question_id":76461686,"body_markdown":"I have a primefaces datatable that allows grouping by rows and I want print on backing bean the rowgroups and the rows index that each rowgroup contains\r\n\r\nhere is the xhtml\r\n\r\n```\r\n&lt;p:dataTable \r\n\tid=&quot;tblPartidas&quot;\r\n\tvar=&quot;item&quot;                                     \r\n\tdraggableRows=&quot;true&quot;\r\n\trowKey=&quot;#{item.objProd.idProd}&quot;\r\n\tbinding=&quot;#{cotizacionController.dtPartidasSelec}&quot;\r\n\tvalue=&quot;#{cotizacionController.lstPartidasSelec}&quot;&gt;\t\r\n\t&lt;p:headerRow field=&quot;desGrupo&quot;&gt;\r\n\t\t&lt;p:column colspan=&quot;5&quot; style=&quot;background-color: #BFBFBF&quot;&gt;\r\n\t\t\t&lt;div class=&quot;inline-flex align-items-center&quot; \r\n\t\t\t\t style=&quot;vertical-align: middle&quot;&gt;\r\n\t\t\t\t&lt;h:outputText class=&quot;p-3 text-dark&quot; value=&quot;#{item.desGrupo}&quot;/&gt;\r\n\t\t\t&lt;/div&gt;\r\n\t\t&lt;/p:column&gt;\r\n\t&lt;/p:headerRow&gt;\r\n\t&lt;p:column headerText=&quot;No.&quot; width=&quot;20&quot; style=&quot;padding: 1px;text-align: center&quot; class=&quot;d-none&quot;&gt;\r\n\t\t&lt;h:outputLabel value=&quot;#{cotizacionController.lstPartidasSelec.indexOf(item) + 1}&quot; /&gt;\r\n\t&lt;/p:column&gt;\r\n\t&lt;p:column headerText=&quot;Partida&quot; width=&quot;200&quot; sortBy=&quot;#{item.objProd.desProd}&quot;&gt;\r\n\t\t&lt;h:outputText class=&quot;fw-bold text-uppercase&quot; value=&quot;#{item.objProd.desProd}&quot;/&gt;&lt;br/&gt;\t\t\r\n\t&lt;/p:column&gt;\r\n&lt;/p:dataTable&gt;\r\n```\r\n\r\n\r\nIn backing bean i created a binding but i dont know how to access to the rowgroups detail\r\n\r\n```\r\nprivate DataTable dtPartidasSelec;\r\n```","title":"how to access details of rowgroups of primefaces datatable","body":"<p>I have a primefaces datatable that allows grouping by rows and I want print on backing bean the rowgroups and the rows index that each rowgroup contains</p>\n<p>here is the xhtml</p>\n<pre><code>&lt;p:dataTable \n    id=&quot;tblPartidas&quot;\n    var=&quot;item&quot;                                     \n    draggableRows=&quot;true&quot;\n    rowKey=&quot;#{item.objProd.idProd}&quot;\n    binding=&quot;#{cotizacionController.dtPartidasSelec}&quot;\n    value=&quot;#{cotizacionController.lstPartidasSelec}&quot;&gt;   \n    &lt;p:headerRow field=&quot;desGrupo&quot;&gt;\n        &lt;p:column colspan=&quot;5&quot; style=&quot;background-color: #BFBFBF&quot;&gt;\n            &lt;div class=&quot;inline-flex align-items-center&quot; \n                 style=&quot;vertical-align: middle&quot;&gt;\n                &lt;h:outputText class=&quot;p-3 text-dark&quot; value=&quot;#{item.desGrupo}&quot;/&gt;\n            &lt;/div&gt;\n        &lt;/p:column&gt;\n    &lt;/p:headerRow&gt;\n    &lt;p:column headerText=&quot;No.&quot; width=&quot;20&quot; style=&quot;padding: 1px;text-align: center&quot; class=&quot;d-none&quot;&gt;\n        &lt;h:outputLabel value=&quot;#{cotizacionController.lstPartidasSelec.indexOf(item) + 1}&quot; /&gt;\n    &lt;/p:column&gt;\n    &lt;p:column headerText=&quot;Partida&quot; width=&quot;200&quot; sortBy=&quot;#{item.objProd.desProd}&quot;&gt;\n        &lt;h:outputText class=&quot;fw-bold text-uppercase&quot; value=&quot;#{item.objProd.desProd}&quot;/&gt;&lt;br/&gt;     \n    &lt;/p:column&gt;\n&lt;/p:dataTable&gt;\n</code></pre>\n<p>In backing bean i created a binding but i dont know how to access to the rowgroups detail</p>\n<pre><code>private DataTable dtPartidasSelec;\n</code></pre>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"score":0,"creation_date":1583444994,"post_id":60554377,"comment_id":107129499,"body_markdown":"Please make sure to use the release JDK version, not ea and update to the latest IntelliJ IDEA version: http://www.jetbrains.com/idea/download/index.html .","body":"Please make sure to use the release JDK version, not ea and update to the latest IntelliJ IDEA version: <a href=\"http://www.jetbrains.com/idea/download/index.html\" rel=\"nofollow noreferrer\">jetbrains.com/idea/download/index.html</a> ."},{"owner":{"account_id":4475363,"reputation":141,"user_id":3640616,"accept_rate":83,"display_name":"Mahdir"},"score":0,"creation_date":1583448043,"post_id":60554377,"comment_id":107130591,"body_markdown":"@CrazyCoder Thanks buddy, if you answered it as an answer and not comment, I would&#39;ve gratefully marked it as answer.","body":"@CrazyCoder Thanks buddy, if you answered it as an answer and not comment, I would&#39;ve gratefully marked it as answer."}],"answers":[{"tags":[],"owner":{"account_id":36734,"reputation":392117,"user_id":104891,"display_name":"CrazyCoder"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1583449269,"creation_date":1583449269,"answer_id":60555220,"question_id":60554377,"body_markdown":"Please make sure to use the release JDK version, not `ea` and update to the [latest IntelliJ IDEA version](http://www.jetbrains.com/idea/download/index.html).","title":"Cannot run a HelloWorld on Intellij Idea (java.lang.IllegalAccessError)","body":"<p>Please make sure to use the release JDK version, not <code>ea</code> and update to the <a href=\"http://www.jetbrains.com/idea/download/index.html\" rel=\"noreferrer\">latest IntelliJ IDEA version</a>.</p>\n"},{"tags":[],"owner":{"account_id":4222765,"reputation":43,"user_id":3457130,"display_name":"andre.obueno"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1640349222,"creation_date":1640349222,"answer_id":70472949,"question_id":60554377,"body_markdown":"I had the same error and the solution I&#39;ve found was to downgrade my Java version (JDK) from 16 to 11. Then, it worked :)","title":"Cannot run a HelloWorld on Intellij Idea (java.lang.IllegalAccessError)","body":"<p>I had the same error and the solution I've found was to downgrade my Java version (JDK) from 16 to 11. Then, it worked :)</p>\n"},{"tags":[],"owner":{"account_id":17328411,"reputation":21,"user_id":12552118,"display_name":"Shreyash Karandikar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686629624,"creation_date":1686629624,"answer_id":76461649,"question_id":60554377,"body_markdown":"In my case, Language Level was not matching with JDK version i.e. 17. After [downloading latest IntelliJ][1] I got language levels to 20.\r\n&lt;br&gt;\r\nFile &gt; Project Structure \r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://www.jetbrains.com/idea/download/other.html?utm_source=product&amp;utm_medium=link&amp;utm_campaign=IC&amp;utm_content=2019.3#version20193\r\n  [2]: https://i.stack.imgur.com/1RfdJ.png","title":"Cannot run a HelloWorld on Intellij Idea (java.lang.IllegalAccessError)","body":"<p>In my case, Language Level was not matching with JDK version i.e. 17. After <a href=\"https://www.jetbrains.com/idea/download/other.html?utm_source=product&amp;utm_medium=link&amp;utm_campaign=IC&amp;utm_content=2019.3#version20193\" rel=\"nofollow noreferrer\">downloading latest IntelliJ</a> I got language levels to 20.\n<br>\nFile &gt; Project Structure\n<a href=\"https://i.stack.imgur.com/1RfdJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1RfdJ.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":4475363,"reputation":141,"user_id":3640616,"accept_rate":83,"display_name":"Mahdir"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13210,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":60555220,"answer_count":3,"score":6,"last_activity_date":1686629624,"creation_date":1583444548,"question_id":60554377,"body_markdown":"I wanted to just run HelloWorld on Intellij Idea which is failed.\r\nJava Version is &quot;9-ea&quot; in my macOS.\r\n\r\n    Error:Internal error: (java.lang.IllegalAccessError) class com.intellij.util.io.FileChannelUtil (in unnamed module @0x6ecc4cd7) cannot access class sun.nio.ch.FileChannelImpl (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6ecc4cd7\r\n    java.lang.IllegalAccessError: class com.intellij.util.io.FileChannelUtil (in unnamed module @0x6ecc4cd7) cannot access class sun.nio.ch.FileChannelImpl (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6ecc4cd7\r\n    \tat com.intellij.util.io.FileChannelUtil.setupUnInterruptibleHandle(FileChannelUtil.java:26)\r\n    \t......\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/MDLVl.png","title":"Cannot run a HelloWorld on Intellij Idea (java.lang.IllegalAccessError)","body":"<p>I wanted to just run HelloWorld on Intellij Idea which is failed.\nJava Version is \"9-ea\" in my macOS.</p>\n\n<pre><code>Error:Internal error: (java.lang.IllegalAccessError) class com.intellij.util.io.FileChannelUtil (in unnamed module @0x6ecc4cd7) cannot access class sun.nio.ch.FileChannelImpl (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6ecc4cd7\njava.lang.IllegalAccessError: class com.intellij.util.io.FileChannelUtil (in unnamed module @0x6ecc4cd7) cannot access class sun.nio.ch.FileChannelImpl (in module java.base) because module java.base does not export sun.nio.ch to unnamed module @0x6ecc4cd7\n    at com.intellij.util.io.FileChannelUtil.setupUnInterruptibleHandle(FileChannelUtil.java:26)\n    ......\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MDLVl.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/MDLVl.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","mysql","concurrency","hbase"],"comments":[{"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1686628764,"post_id":76461506,"comment_id":134821433,"body_markdown":"Be aware that the Javadoc of ConcurrentHashMap specifies that the size may be inaccurate: &quot;Bear in mind that the results of aggregate status methods including size, isEmpty, and containsValue are typically useful only when a map is not undergoing concurrent updates in other threads. Otherwise the results of these methods reflect transient states that may be adequate for monitoring or estimation purposes, but not for program control.&quot;","body":"Be aware that the Javadoc of ConcurrentHashMap specifies that the size may be inaccurate: &quot;Bear in mind that the results of aggregate status methods including size, isEmpty, and containsValue are typically useful only when a map is not undergoing concurrent updates in other threads. Otherwise the results of these methods reflect transient states that may be adequate for monitoring or estimation purposes, but not for program control.&quot;"},{"owner":{"account_id":2891308,"reputation":12354,"user_id":2480047,"display_name":"varocarbas"},"score":1,"creation_date":1686628793,"post_id":76461506,"comment_id":134821440,"body_markdown":"Just the words &quot;unique&quot;, &quot;concurrent&quot; and &quot;duplicates&quot; by themselves seem to tell a whole story, not exactly a nice one. Many queries might be returning unique values concurrently and the resulting data might not be unique. But I see a much bigger problem here: 884979 records for a HashMap?! When you are using a DB, the resource precisely meant to deal with big sizes?! Why do you do that? Could you please explain what you are trying to accomplish?","body":"Just the words &quot;unique&quot;, &quot;concurrent&quot; and &quot;duplicates&quot; by themselves seem to tell a whole story, not exactly a nice one. Many queries might be returning unique values concurrently and the resulting data might not be unique. But I see a much bigger problem here: 884979 records for a HashMap?! When you are using a DB, the resource precisely meant to deal with big sizes?! Why do you do that? Could you please explain what you are trying to accomplish?"},{"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"score":0,"creation_date":1687850190,"post_id":76461506,"comment_id":134990367,"body_markdown":"@varocarbas I need to write the latest version of the unique ID from the daily data into the DB. There are approximately one million records of data each day, and many of them have different version numbers but duplicate IDs. I use multiple threads to handle batch processing in the form of separate pagination. Therefore, I use ConcurrentHashMap. Even if I don&#39;t use the size property of ConcurrentHashMap to print logs, the elements in ConcurrentHashMap can still have the same ID due to the excessive amount of data.","body":"@varocarbas I need to write the latest version of the unique ID from the daily data into the DB. There are approximately one million records of data each day, and many of them have different version numbers but duplicate IDs. I use multiple threads to handle batch processing in the form of separate pagination. Therefore, I use ConcurrentHashMap. Even if I don&#39;t use the size property of ConcurrentHashMap to print logs, the elements in ConcurrentHashMap can still have the same ID due to the excessive amount of data."},{"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"score":0,"creation_date":1687850402,"post_id":76461506,"comment_id":134990405,"body_markdown":"@LouisWasserman In fact, when the data volume is large (1 million records with duplicate keys), ConcurrentHashMap does exhibit the issue of having duplicate keys and loses its deduplication functionality. However, in cases of smaller data volumes (several thousand to tens of thousands of records), I have not encountered this problem.","body":"@LouisWasserman In fact, when the data volume is large (1 million records with duplicate keys), ConcurrentHashMap does exhibit the issue of having duplicate keys and loses its deduplication functionality. However, in cases of smaller data volumes (several thousand to tens of thousands of records), I have not encountered this problem."},{"owner":{"account_id":2891308,"reputation":12354,"user_id":2480047,"display_name":"varocarbas"},"score":0,"creation_date":1687864086,"post_id":76461506,"comment_id":134993239,"body_markdown":"@william But why using HashMaps (concurrent or not) at all? When dealing with so much information, the best format is precisely a DB. Why don&#39;t you create a temporary table or something like that and store all the information being managed by those HashMaps there? When dealing with so many records, I seriously doubt that relying on memory can make things faster than a DB, mainly with as heavy elements as HashMaps. And, of course, the memory usage would drop drastically. To not mention that with a DB you don&#39;t have to worry about all the concurrency issues.","body":"@william But why using HashMaps (concurrent or not) at all? When dealing with so much information, the best format is precisely a DB. Why don&#39;t you create a temporary table or something like that and store all the information being managed by those HashMaps there? When dealing with so many records, I seriously doubt that relying on memory can make things faster than a DB, mainly with as heavy elements as HashMaps. And, of course, the memory usage would drop drastically. To not mention that with a DB you don&#39;t have to worry about all the concurrency issues."}],"owner":{"account_id":20100957,"reputation":285,"user_id":14739428,"display_name":"william"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686626676,"creation_date":1686626676,"question_id":76461506,"body_markdown":"I have 975,641 rows of pure string data as rowkeys for HBase, where the lengths of the strings vary. After using distinct in MySQL to remove duplicates, there are 884,508 unique data entries.\r\n\r\nWhen I use multiple threads to read data from the database in batches and write them to HBase, I encounter the following issue:\r\nI start 50 threads in a loop, and each thread reads 1,000 rows of data in batches. I use a ConcurrentHashMap to deduplicate the rowkeys within each thread.\r\n\r\nAfter completing all the loops, an AtomicInteger shows that 975,641 rows of data were processed correctly.\r\nAt this point, the size of the ConcurrentHashMap is 884,979, which is 471 more entries than expected.\r\n\r\nWhen I store the keySet of the ConcurrentHashMap in MySQL and deduplicate the rowkeys, I find that there are 471 duplicate entries. The correct number of unique rowkeys is indeed 884,508.\r\n\r\nAfter multiple tests, I have observed that the specific duplicate entries stored in MySQL vary each time. However, the occurrence of 471 duplicate entries can be consistently reproduced. Furthermore, the keySet of the ConcurrentHashMap always has 471 extra entries, even when the original data remains unchanged.\r\n\r\nThis issue does not occur when the original number of rowkeys is relatively small.\r\n\r\nBelow is my code:\r\n\r\n```\r\n@Service\r\n@Slf4j\r\npublic class HbaseSupportServiceImplV2 extends HbaseSupportServiceImpl implements HbaseMigrationService {\r\n    @Resource\r\n    protected MPRawDataService rawDataSourceMybatisPlus;\r\n\r\n    protected ThreadPoolExecutor executor;\r\n\r\n    protected CountDownLatch processCountDownLatch;\r\n\r\n    protected volatile ConcurrentHashMap&lt;String, String&gt; rowKeyMap = new ConcurrentHashMap&lt;&gt;();\r\n\r\n    protected final static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\r\n\r\n    private static final Integer pageSize = 1000;\r\n\r\n    @PostConstruct\r\n    public void initializeExecutor() {\r\n        int cpuCoreNum = Runtime.getRuntime().availableProcessors();\r\n        executor = new ThreadPoolExecutor(\r\n                50,\r\n                100,\r\n                60,\r\n                TimeUnit.SECONDS,\r\n                new ArrayBlockingQueue&lt;&gt;(1000),\r\n                new ThreadFactoryBuilder().setNameFormat(&quot;hbase-migration-%d&quot;).build(),\r\n                new RejectFreeDiscardPolicy());\r\n    }\r\n\r\n\r\n    @Override\r\n    public List&lt;JSONObject&gt; migrateMysql2Hbase(Mysql2HbaseMigrationForm reqForm) throws Exception {\r\n        LocalDate startDate = LocalDate.parse(reqForm.getStartDate(), DATE_TIME_FORMATTER);\r\n        LocalDate endDate = LocalDate.parse(reqForm.getEndDate(), DATE_TIME_FORMATTER);\r\n        String tableName = reqForm.getTableName();\r\n\r\n\r\n        //return log\r\n        List&lt;JSONObject&gt; result = new ArrayList&lt;&gt;();\r\n\r\n        //process one day each time\r\n        LocalDate thatDate = startDate;\r\n\r\n        while (!thatDate.isAfter(endDate)) {\r\n            long startTime = System.currentTimeMillis();\r\n\r\n            //total row from raw data\r\n            long totalCount = rawDataSourceMybatisPlus.count(new LambdaQueryWrapper&lt;RawData&gt;()\r\n                    .eq(RawData::getDate, thatDate));\r\n\r\n            //calculate total page\r\n            long totalPage = totalCount / pageSize + (totalCount % pageSize == 0 ? 0 : 1);\r\n\r\n            //start a new count down latch to ensure 50 threads(pages) running at the same time\r\n            if (totalPage &gt; 50) {\r\n                processCountDownLatch = new CountDownLatch(50);\r\n            } else {\r\n                processCountDownLatch = new CountDownLatch((int) (totalPage));\r\n            }\r\n\r\n            List&lt;Future&lt;Set&lt;String&gt;&gt;&gt; taskList = new ArrayList&lt;&gt;();\r\n\r\n            //loop to get paged data then send to HBase\r\n            for (Long currentPage = 1L; currentPage &lt;= totalPage; currentPage++) {\r\n                Long limitOffset = (currentPage - 1) * pageSize;\r\n                Long limitCount = pageSize.longValue();\r\n\r\n                //submit task to thread pool\r\n                Future&lt;Set&lt;String&gt;&gt; submit = executor.submit(new BatchProcess(limitOffset, limitCount, thatDate, tableName, currentPage));\r\n                taskList.add(submit);\r\n\r\n                if (currentPage % 50 == 0) {\r\n                    //when reach to 50 pages, wait for all 50 pages to finish\r\n                    try {\r\n                        processCountDownLatch.await();\r\n                        //print log when each 50 pages finished\r\n                        log.info(&quot;thatDate={},currentPage={},taotalPage={},remainPage={}&quot;,\r\n                                thatDate.format(DATE_TIME_FORMATTER),\r\n                                currentPage,\r\n                                totalPage,\r\n                                totalPage - currentPage);\r\n                    } catch (InterruptedException e) {\r\n                        NotifiableLog.ERROR.print(&quot;countDown wait error&quot;, e);\r\n                    }\r\n\r\n                    //reset count down latch \r\n                    if (totalPage - currentPage &gt; 50) {\r\n                        //for next 50 pages\r\n                        processCountDownLatch = new CountDownLatch(50);\r\n                    } else {\r\n                        //for remain pages less equal than 50\r\n                        processCountDownLatch = new CountDownLatch((int) (totalPage - currentPage));\r\n                    }\r\n                } else if (currentPage == totalPage) {\r\n                    // when reach to last page, wait for all pages to finish\r\n                    try {\r\n                        processCountDownLatch.await();\r\n                        //print log when each 50 pages finished\r\n                        log.info(&quot;thatDate={},currentPage={},taotalPage={},remainPage={}&quot;,\r\n                                thatDate.format(DATE_TIME_FORMATTER),\r\n                                currentPage,\r\n                                totalPage,\r\n                                totalPage - currentPage);\r\n                    } catch (InterruptedException e) {\r\n                        NotifiableLog.ERROR.print(&quot;countDown waiting error&quot;, e);\r\n                    }\r\n                }\r\n            }\r\n\r\n            //analyze result\r\n            Long totalSuccessCount = 0L;\r\n            for (Future&lt;Set&lt;String&gt;&gt; future : taskList) {\r\n                try {\r\n                    totalSuccessCount += future.get().size();\r\n                } catch (Exception e) {\r\n                    //just email me and continue\r\n                    NotifiableLog.ERROR.print(&quot;async has error&quot;, e);\r\n                }\r\n            }\r\n\r\n            try {\r\n                log.info(&quot;succeed，now date={},total MySQL rows={},rowkey count={}&quot;,\r\n                        thatDate.format(DATE_TIME_FORMATTER),\r\n                        totalCount,\r\n                        rowKeyMap.size()\r\n                );\r\n                JSONObjectBuilder currentProcessLog = new JSONObjectBuilder()\r\n                        .put(&quot;date&quot;, thatDate.format(DATE_TIME_FORMATTER))\r\n                        .put(&quot;totalCount&quot;, totalCount)\r\n                        .put(&quot;totalSuccessCount&quot;, totalSuccessCount)\r\n                        .put(&quot;processTimeUsageMillis&quot;, System.currentTimeMillis() - startTime);\r\n                result.add(currentProcessLog.build());\r\n\r\n            } catch (RuntimeException e) {\r\n                throw e;\r\n            }\r\n\r\n            thatDate = thatDate.plusDays(1);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    class BatchProcess implements Callable&lt;Set&lt;String&gt;&gt; {\r\n        private final long limitOffset;\r\n        private final long limitCount;\r\n        private final LocalDate thatDate;\r\n        private final String tableName;\r\n        private final Long order;\r\n\r\n        public BatchProcess(long limitOffset, long limitCount, LocalDate thatDate, String tableName, Long order) {\r\n            this.limitOffset = limitOffset;\r\n            this.limitCount = limitCount;\r\n            this.thatDate = thatDate;\r\n            this.tableName = tableName;\r\n            this.order = order;\r\n        }\r\n\r\n        @Override\r\n        public Set&lt;String&gt; call() throws Exception {\r\n            try {\r\n                return actualProcess();\r\n            } catch (Exception e) {\r\n                NotifiableLog.ERROR.print(&quot;async task error&quot;, e);\r\n                throw e;\r\n            } finally {\r\n                processCountDownLatch.countDown();\r\n            }\r\n        }\r\n\r\n        private Set&lt;String&gt; actualProcess() throws Exception {\r\n            // query data from MySQL\r\n            // this will perform a select below:\r\n            // SELECT rowkey FROM tableName WHERE date = #{thatDate} LIMIT #{limitOffset}, #{limitCount}\r\n            List&lt;RawData&gt; page = rawDataSourceMybatisPlus.multithreadDirectList(\r\n                    limitOffset,\r\n                    limitCount,\r\n                    thatDate);\r\n\r\n            if (page.isEmpty()) {\r\n                //skip when query result is empty\r\n                NotifiableLog.ERROR.print(&quot;query result is empty offset={},date={}&quot;, limitOffset, thatDate);\r\n                return new HashSet&lt;&gt;();\r\n            }\r\n\r\n            //construct rowkey and HBase data from query result\r\n            List&lt;SaveHbaseDetailForm&gt; dataList = new ArrayList&lt;&gt;();\r\n            Set&lt;String&gt; rowkeyInThisBatch = new HashSet&lt;&gt;();\r\n            page.stream()\r\n                    .forEach(e -&gt; {\r\n                        //construct rowkey from query result\r\n                        String rowkey = String.format(&quot;%s-%s-%s-%s-%s&quot;,\r\n                                e.getMarketId() == null ? &quot;null&quot; : e.getMarketId(),\r\n                                e.getSku() == null ? &quot;null&quot; : e.getSku(),\r\n                                e.getUseAdv() == null ? &quot;null&quot; : e.getUseAdv(),\r\n                                e.getFetchDate() == null ? &quot;null&quot; : e.getFetchDate().format(DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)),\r\n                                e.getName() == null ? &quot;null&quot; : e.getName());\r\n                        List&lt;SaveHbaseDetailForm&gt; rowDataList = new ArrayList&lt;&gt;();\r\n                        JSONObject jsonObject = JSONObject.parseObject(JSONObject.toJSONString(e));\r\n                        jsonObject.forEach((k, v) -&gt; {\r\n                            SaveHbaseDetailForm data = new SaveHbaseDetailForm();\r\n                            data.setColumn(k);\r\n                            data.setCf(&quot;rank&quot;);\r\n                            data.setValue(v.toString());\r\n                            data.setRowkey(rowkey);\r\n                            rowDataList.add(data);\r\n                        });\r\n\r\n                        rowkeyInThisBatch.add(rowkey);\r\n                        rowKeyMap.putIfAbsent(rowkey, rowkey);\r\n\r\n                        dataList.addAll(rowDataList);\r\n                    });\r\n\r\n            //save to hbase\r\n            saveData(tableName, dataList, null);\r\n            return rowkeyInThisBatch;\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nI didn&#39;t give the saving code of ConcurrentHashMap&#39;s keySet, it just shows a size of 884,979 at end of the process.\r\n\r\n\r\nWhat could be causing this situation?","title":"ConcurrentHasnMap has duplicate key when size are big","body":"<p>I have 975,641 rows of pure string data as rowkeys for HBase, where the lengths of the strings vary. After using distinct in MySQL to remove duplicates, there are 884,508 unique data entries.</p>\n<p>When I use multiple threads to read data from the database in batches and write them to HBase, I encounter the following issue:\nI start 50 threads in a loop, and each thread reads 1,000 rows of data in batches. I use a ConcurrentHashMap to deduplicate the rowkeys within each thread.</p>\n<p>After completing all the loops, an AtomicInteger shows that 975,641 rows of data were processed correctly.\nAt this point, the size of the ConcurrentHashMap is 884,979, which is 471 more entries than expected.</p>\n<p>When I store the keySet of the ConcurrentHashMap in MySQL and deduplicate the rowkeys, I find that there are 471 duplicate entries. The correct number of unique rowkeys is indeed 884,508.</p>\n<p>After multiple tests, I have observed that the specific duplicate entries stored in MySQL vary each time. However, the occurrence of 471 duplicate entries can be consistently reproduced. Furthermore, the keySet of the ConcurrentHashMap always has 471 extra entries, even when the original data remains unchanged.</p>\n<p>This issue does not occur when the original number of rowkeys is relatively small.</p>\n<p>Below is my code:</p>\n<pre><code>@Service\n@Slf4j\npublic class HbaseSupportServiceImplV2 extends HbaseSupportServiceImpl implements HbaseMigrationService {\n    @Resource\n    protected MPRawDataService rawDataSourceMybatisPlus;\n\n    protected ThreadPoolExecutor executor;\n\n    protected CountDownLatch processCountDownLatch;\n\n    protected volatile ConcurrentHashMap&lt;String, String&gt; rowKeyMap = new ConcurrentHashMap&lt;&gt;();\n\n    protected final static DateTimeFormatter DATE_TIME_FORMATTER = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&quot;);\n\n    private static final Integer pageSize = 1000;\n\n    @PostConstruct\n    public void initializeExecutor() {\n        int cpuCoreNum = Runtime.getRuntime().availableProcessors();\n        executor = new ThreadPoolExecutor(\n                50,\n                100,\n                60,\n                TimeUnit.SECONDS,\n                new ArrayBlockingQueue&lt;&gt;(1000),\n                new ThreadFactoryBuilder().setNameFormat(&quot;hbase-migration-%d&quot;).build(),\n                new RejectFreeDiscardPolicy());\n    }\n\n\n    @Override\n    public List&lt;JSONObject&gt; migrateMysql2Hbase(Mysql2HbaseMigrationForm reqForm) throws Exception {\n        LocalDate startDate = LocalDate.parse(reqForm.getStartDate(), DATE_TIME_FORMATTER);\n        LocalDate endDate = LocalDate.parse(reqForm.getEndDate(), DATE_TIME_FORMATTER);\n        String tableName = reqForm.getTableName();\n\n\n        //return log\n        List&lt;JSONObject&gt; result = new ArrayList&lt;&gt;();\n\n        //process one day each time\n        LocalDate thatDate = startDate;\n\n        while (!thatDate.isAfter(endDate)) {\n            long startTime = System.currentTimeMillis();\n\n            //total row from raw data\n            long totalCount = rawDataSourceMybatisPlus.count(new LambdaQueryWrapper&lt;RawData&gt;()\n                    .eq(RawData::getDate, thatDate));\n\n            //calculate total page\n            long totalPage = totalCount / pageSize + (totalCount % pageSize == 0 ? 0 : 1);\n\n            //start a new count down latch to ensure 50 threads(pages) running at the same time\n            if (totalPage &gt; 50) {\n                processCountDownLatch = new CountDownLatch(50);\n            } else {\n                processCountDownLatch = new CountDownLatch((int) (totalPage));\n            }\n\n            List&lt;Future&lt;Set&lt;String&gt;&gt;&gt; taskList = new ArrayList&lt;&gt;();\n\n            //loop to get paged data then send to HBase\n            for (Long currentPage = 1L; currentPage &lt;= totalPage; currentPage++) {\n                Long limitOffset = (currentPage - 1) * pageSize;\n                Long limitCount = pageSize.longValue();\n\n                //submit task to thread pool\n                Future&lt;Set&lt;String&gt;&gt; submit = executor.submit(new BatchProcess(limitOffset, limitCount, thatDate, tableName, currentPage));\n                taskList.add(submit);\n\n                if (currentPage % 50 == 0) {\n                    //when reach to 50 pages, wait for all 50 pages to finish\n                    try {\n                        processCountDownLatch.await();\n                        //print log when each 50 pages finished\n                        log.info(&quot;thatDate={},currentPage={},taotalPage={},remainPage={}&quot;,\n                                thatDate.format(DATE_TIME_FORMATTER),\n                                currentPage,\n                                totalPage,\n                                totalPage - currentPage);\n                    } catch (InterruptedException e) {\n                        NotifiableLog.ERROR.print(&quot;countDown wait error&quot;, e);\n                    }\n\n                    //reset count down latch \n                    if (totalPage - currentPage &gt; 50) {\n                        //for next 50 pages\n                        processCountDownLatch = new CountDownLatch(50);\n                    } else {\n                        //for remain pages less equal than 50\n                        processCountDownLatch = new CountDownLatch((int) (totalPage - currentPage));\n                    }\n                } else if (currentPage == totalPage) {\n                    // when reach to last page, wait for all pages to finish\n                    try {\n                        processCountDownLatch.await();\n                        //print log when each 50 pages finished\n                        log.info(&quot;thatDate={},currentPage={},taotalPage={},remainPage={}&quot;,\n                                thatDate.format(DATE_TIME_FORMATTER),\n                                currentPage,\n                                totalPage,\n                                totalPage - currentPage);\n                    } catch (InterruptedException e) {\n                        NotifiableLog.ERROR.print(&quot;countDown waiting error&quot;, e);\n                    }\n                }\n            }\n\n            //analyze result\n            Long totalSuccessCount = 0L;\n            for (Future&lt;Set&lt;String&gt;&gt; future : taskList) {\n                try {\n                    totalSuccessCount += future.get().size();\n                } catch (Exception e) {\n                    //just email me and continue\n                    NotifiableLog.ERROR.print(&quot;async has error&quot;, e);\n                }\n            }\n\n            try {\n                log.info(&quot;succeed，now date={},total MySQL rows={},rowkey count={}&quot;,\n                        thatDate.format(DATE_TIME_FORMATTER),\n                        totalCount,\n                        rowKeyMap.size()\n                );\n                JSONObjectBuilder currentProcessLog = new JSONObjectBuilder()\n                        .put(&quot;date&quot;, thatDate.format(DATE_TIME_FORMATTER))\n                        .put(&quot;totalCount&quot;, totalCount)\n                        .put(&quot;totalSuccessCount&quot;, totalSuccessCount)\n                        .put(&quot;processTimeUsageMillis&quot;, System.currentTimeMillis() - startTime);\n                result.add(currentProcessLog.build());\n\n            } catch (RuntimeException e) {\n                throw e;\n            }\n\n            thatDate = thatDate.plusDays(1);\n        }\n\n        return result;\n    }\n\n    class BatchProcess implements Callable&lt;Set&lt;String&gt;&gt; {\n        private final long limitOffset;\n        private final long limitCount;\n        private final LocalDate thatDate;\n        private final String tableName;\n        private final Long order;\n\n        public BatchProcess(long limitOffset, long limitCount, LocalDate thatDate, String tableName, Long order) {\n            this.limitOffset = limitOffset;\n            this.limitCount = limitCount;\n            this.thatDate = thatDate;\n            this.tableName = tableName;\n            this.order = order;\n        }\n\n        @Override\n        public Set&lt;String&gt; call() throws Exception {\n            try {\n                return actualProcess();\n            } catch (Exception e) {\n                NotifiableLog.ERROR.print(&quot;async task error&quot;, e);\n                throw e;\n            } finally {\n                processCountDownLatch.countDown();\n            }\n        }\n\n        private Set&lt;String&gt; actualProcess() throws Exception {\n            // query data from MySQL\n            // this will perform a select below:\n            // SELECT rowkey FROM tableName WHERE date = #{thatDate} LIMIT #{limitOffset}, #{limitCount}\n            List&lt;RawData&gt; page = rawDataSourceMybatisPlus.multithreadDirectList(\n                    limitOffset,\n                    limitCount,\n                    thatDate);\n\n            if (page.isEmpty()) {\n                //skip when query result is empty\n                NotifiableLog.ERROR.print(&quot;query result is empty offset={},date={}&quot;, limitOffset, thatDate);\n                return new HashSet&lt;&gt;();\n            }\n\n            //construct rowkey and HBase data from query result\n            List&lt;SaveHbaseDetailForm&gt; dataList = new ArrayList&lt;&gt;();\n            Set&lt;String&gt; rowkeyInThisBatch = new HashSet&lt;&gt;();\n            page.stream()\n                    .forEach(e -&gt; {\n                        //construct rowkey from query result\n                        String rowkey = String.format(&quot;%s-%s-%s-%s-%s&quot;,\n                                e.getMarketId() == null ? &quot;null&quot; : e.getMarketId(),\n                                e.getSku() == null ? &quot;null&quot; : e.getSku(),\n                                e.getUseAdv() == null ? &quot;null&quot; : e.getUseAdv(),\n                                e.getFetchDate() == null ? &quot;null&quot; : e.getFetchDate().format(DateTimeFormatter.ofPattern(&quot;yyyyMMdd&quot;)),\n                                e.getName() == null ? &quot;null&quot; : e.getName());\n                        List&lt;SaveHbaseDetailForm&gt; rowDataList = new ArrayList&lt;&gt;();\n                        JSONObject jsonObject = JSONObject.parseObject(JSONObject.toJSONString(e));\n                        jsonObject.forEach((k, v) -&gt; {\n                            SaveHbaseDetailForm data = new SaveHbaseDetailForm();\n                            data.setColumn(k);\n                            data.setCf(&quot;rank&quot;);\n                            data.setValue(v.toString());\n                            data.setRowkey(rowkey);\n                            rowDataList.add(data);\n                        });\n\n                        rowkeyInThisBatch.add(rowkey);\n                        rowKeyMap.putIfAbsent(rowkey, rowkey);\n\n                        dataList.addAll(rowDataList);\n                    });\n\n            //save to hbase\n            saveData(tableName, dataList, null);\n            return rowkeyInThisBatch;\n        }\n    }\n}\n\n</code></pre>\n<p>I didn't give the saving code of ConcurrentHashMap's keySet, it just shows a size of 884,979 at end of the process.</p>\n<p>What could be causing this situation?</p>\n"},{"tags":["java","algorithm","backtracking"],"comments":[{"owner":{"account_id":3700957,"reputation":13521,"user_id":3080723,"display_name":"Stef"},"score":0,"creation_date":1686645707,"post_id":76461499,"comment_id":134823829,"body_markdown":"The basic idea is to have a variable `numberOfSolutions`, and replace almost all your `return ...;` statements with `numberOfSolutions += ...;`","body":"The basic idea is to have a variable <code>numberOfSolutions</code>, and replace almost all your <code>return ...;</code> statements with <code>numberOfSolutions += ...;</code>"}],"owner":{"account_id":28678923,"reputation":1,"user_id":21960507,"display_name":"Patryk Figiel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686626520,"creation_date":1686626520,"question_id":76461499,"body_markdown":"I&#39;ve made backtracking algorithm which solves given kakuro board and in the other class I&#39;ve got a board generator, which before give board to user checks them by using solver whether this board has a solution or not. The problem is that kakuro can only have one unique solution and sometimes my game generates boards with multiple solutions. How can I change that? I&#39;ve tried adding changes to solver and also generator, but it&#39;s still not working properly. I&#39;d be very grateful for your help\r\n\r\nThat&#39;s my solver algorithm:\r\n```\r\npackage Game;\r\n\r\nimport java.util.HashSet;\r\nimport java.util.Set;\r\n\r\npublic class GameSolver {\r\n\r\n    public static boolean isValid(int[][] board, int column, int row, int value){\r\n\r\n        int sumRow = 0;\r\n        for (int c = column; c &gt; 0; c--) {\r\n            sumRow += board[row][c];\r\n        }\r\n\r\n        int sumColumn = 0;\r\n        for (int r = row; r &gt; 0; r--) {\r\n            sumColumn += board[r][column];\r\n        }\r\n\r\n        if (sumRow + value &gt; board[row][0] || sumColumn + value &gt; board[0][column]) {\r\n            return false;\r\n        }\r\n\r\n        for (int r = 0; r &lt; row; r++) {\r\n            if (board[r][column] == value) {\r\n                return false;\r\n            }\r\n        }\r\n        for (int c = 0; c &lt; column; c++) {\r\n            if (board[row][c] == value) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean isCorrect(int[][] board, int size){\r\n        for(int i=1; i &lt; size; ++i){\r\n            int sum = 0;\r\n            Set&lt;Integer&gt; valuesSet = new HashSet&lt;&gt;();\r\n            for (int j = 1; j &lt; size; ++j) {\r\n                int value = board[i][j];\r\n                if (value != 0) {\r\n                    if (valuesSet.contains(value)) {\r\n                        return false;\r\n                    }\r\n                    valuesSet.add(value);\r\n                }\r\n                sum += value;\r\n            }\r\n            if(board[i][0] != sum){\r\n                return false;\r\n            }\r\n        }\r\n\r\n        for(int j=1; j &lt; size; ++j){\r\n            int sum = 0;\r\n            Set&lt;Integer&gt; valuesSet = new HashSet&lt;&gt;();\r\n            for (int i = 1; i &lt; size; ++i) {\r\n                int value = board[i][j];\r\n                if(value != 0){\r\n                    if(valuesSet.contains(value)){\r\n                        return false;\r\n                    }\r\n                    valuesSet.add(value);\r\n                }\r\n                sum += value;\r\n            }\r\n            if(board[0][j] != sum){\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean solve(int[][] board, int column, int row, int size){\r\n\r\n        if(row == size){\r\n            printBoard(board);\r\n            return true;\r\n        }\r\n        else if(column == size){\r\n            return solve(board, 1, row + 1, size);\r\n        }\r\n        else if(board[row][column] != 0){\r\n            return solve(board, column + 1, row, size);\r\n        }\r\n        else{\r\n            for(int k=1; k&lt;10; k++){\r\n                if(isValid(board, column, row, k)){\r\n                    board[row][column] = k;\r\n                    if(solve(board, column + 1, row, size)){\r\n                        if(isCorrect(board, size)){\r\n                            return true;\r\n                        }\r\n                    }\r\n                    board[row][column] = 0;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static void printBoard(int[][] board) {\r\n        for (int[] row : board) {\r\n            for (int cell : row) {\r\n                System.out.print(cell + &quot; &quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n        System.out.println(&quot;=============&quot;);\r\n    }\r\n}\r\n\r\n\r\n```\r\nAnd here class which generate boards:\r\n\r\n```\r\npackage Game;\r\n\r\nimport java.util.Arrays;\r\nimport java.util.Random;\r\n\r\npublic class Board {\r\n    public static int[][] board;\r\n    public static int[][] solvedBoard;\r\n\r\n    public static void generateBoard(int size, boolean hardLevel) {\r\n        board = new int[size][size];\r\n        solvedBoard = new int[size][size];\r\n        int sumR;\r\n        int sumC;\r\n\r\n        do {\r\n            resetBoard(board);\r\n            sumC = 0;\r\n            sumR = 0;\r\n\r\n            for (int i = 0; i &lt; size; i++) {\r\n                for (int j = 0; j &lt; size; j++) {\r\n                    if (i == 0) {\r\n                        if (j == 0) {\r\n                            board[i][j] = 0;\r\n                        } else if (size &lt;= 4 &amp;&amp; !hardLevel) {\r\n                            board[i][j] = new Random().nextInt(12) + 3;\r\n                        } else if (hardLevel){\r\n                            board[i][j] = new Random().nextInt(18) + 7;\r\n                        }\r\n                    } else if (j == 0) {\r\n                        if (hardLevel) {\r\n                            board[i][j] = new Random().nextInt(18) + 7;\r\n                        } else if(size &lt;=4){\r\n                            board[i][j] = new Random().nextInt(12) + 3;\r\n                        }\r\n                    } else {\r\n                        board[i][j] = 0;\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (int i = 0; i &lt; size; i++) {\r\n                sumR += board[0][i];\r\n                sumC += board[i][0];\r\n            }\r\n\r\n            if (sumC == sumR) {\r\n                if (GameSolver.solve(board, 1, 1, size)) {\r\n                    copyBoard(board, solvedBoard);\r\n                    resetForUser(board, size);\r\n                    break;\r\n                }\r\n            }\r\n        } while(true);\r\n    }\r\n    public static boolean isBoardSolved() {\r\n            for (int i = 0; i &lt; board.length; i++) {\r\n                for (int j = 0; j &lt; board[i].length; j++) {\r\n                    if (board[i][j] != solvedBoard[i][j]) {\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n        return true;\r\n        }\r\n\r\n    public static void resetBoard(int[][] board) {\r\n        for (int[] ints : board) {\r\n            Arrays.fill(ints, 0);\r\n        }\r\n    }\r\n\r\n    public static void copyBoard(int[][] source, int[][] destination) {\r\n        for (int i = 0; i &lt; source.length; i++) {\r\n            System.arraycopy(source[i], 0, destination[i], 0, source[i].length);\r\n        }\r\n    }\r\n\r\n    public static void resetForUser(int[][] board, int size){\r\n        for (int i = 1; i &lt; size; i++) {\r\n            for (int j = 1; j &lt; size; j++) {\r\n                board[i][j] =0;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n```\r\n\r\n","title":"How to check if kakuro board has more than one solution?","body":"<p>I've made backtracking algorithm which solves given kakuro board and in the other class I've got a board generator, which before give board to user checks them by using solver whether this board has a solution or not. The problem is that kakuro can only have one unique solution and sometimes my game generates boards with multiple solutions. How can I change that? I've tried adding changes to solver and also generator, but it's still not working properly. I'd be very grateful for your help</p>\n<p>That's my solver algorithm:</p>\n<pre><code>package Game;\n\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class GameSolver {\n\n    public static boolean isValid(int[][] board, int column, int row, int value){\n\n        int sumRow = 0;\n        for (int c = column; c &gt; 0; c--) {\n            sumRow += board[row][c];\n        }\n\n        int sumColumn = 0;\n        for (int r = row; r &gt; 0; r--) {\n            sumColumn += board[r][column];\n        }\n\n        if (sumRow + value &gt; board[row][0] || sumColumn + value &gt; board[0][column]) {\n            return false;\n        }\n\n        for (int r = 0; r &lt; row; r++) {\n            if (board[r][column] == value) {\n                return false;\n            }\n        }\n        for (int c = 0; c &lt; column; c++) {\n            if (board[row][c] == value) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static boolean isCorrect(int[][] board, int size){\n        for(int i=1; i &lt; size; ++i){\n            int sum = 0;\n            Set&lt;Integer&gt; valuesSet = new HashSet&lt;&gt;();\n            for (int j = 1; j &lt; size; ++j) {\n                int value = board[i][j];\n                if (value != 0) {\n                    if (valuesSet.contains(value)) {\n                        return false;\n                    }\n                    valuesSet.add(value);\n                }\n                sum += value;\n            }\n            if(board[i][0] != sum){\n                return false;\n            }\n        }\n\n        for(int j=1; j &lt; size; ++j){\n            int sum = 0;\n            Set&lt;Integer&gt; valuesSet = new HashSet&lt;&gt;();\n            for (int i = 1; i &lt; size; ++i) {\n                int value = board[i][j];\n                if(value != 0){\n                    if(valuesSet.contains(value)){\n                        return false;\n                    }\n                    valuesSet.add(value);\n                }\n                sum += value;\n            }\n            if(board[0][j] != sum){\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public static boolean solve(int[][] board, int column, int row, int size){\n\n        if(row == size){\n            printBoard(board);\n            return true;\n        }\n        else if(column == size){\n            return solve(board, 1, row + 1, size);\n        }\n        else if(board[row][column] != 0){\n            return solve(board, column + 1, row, size);\n        }\n        else{\n            for(int k=1; k&lt;10; k++){\n                if(isValid(board, column, row, k)){\n                    board[row][column] = k;\n                    if(solve(board, column + 1, row, size)){\n                        if(isCorrect(board, size)){\n                            return true;\n                        }\n                    }\n                    board[row][column] = 0;\n                }\n            }\n            return false;\n        }\n    }\n\n    public static void printBoard(int[][] board) {\n        for (int[] row : board) {\n            for (int cell : row) {\n                System.out.print(cell + &quot; &quot;);\n            }\n            System.out.println();\n        }\n        System.out.println(&quot;=============&quot;);\n    }\n}\n\n\n</code></pre>\n<p>And here class which generate boards:</p>\n<pre><code>package Game;\n\nimport java.util.Arrays;\nimport java.util.Random;\n\npublic class Board {\n    public static int[][] board;\n    public static int[][] solvedBoard;\n\n    public static void generateBoard(int size, boolean hardLevel) {\n        board = new int[size][size];\n        solvedBoard = new int[size][size];\n        int sumR;\n        int sumC;\n\n        do {\n            resetBoard(board);\n            sumC = 0;\n            sumR = 0;\n\n            for (int i = 0; i &lt; size; i++) {\n                for (int j = 0; j &lt; size; j++) {\n                    if (i == 0) {\n                        if (j == 0) {\n                            board[i][j] = 0;\n                        } else if (size &lt;= 4 &amp;&amp; !hardLevel) {\n                            board[i][j] = new Random().nextInt(12) + 3;\n                        } else if (hardLevel){\n                            board[i][j] = new Random().nextInt(18) + 7;\n                        }\n                    } else if (j == 0) {\n                        if (hardLevel) {\n                            board[i][j] = new Random().nextInt(18) + 7;\n                        } else if(size &lt;=4){\n                            board[i][j] = new Random().nextInt(12) + 3;\n                        }\n                    } else {\n                        board[i][j] = 0;\n                    }\n                }\n            }\n\n            for (int i = 0; i &lt; size; i++) {\n                sumR += board[0][i];\n                sumC += board[i][0];\n            }\n\n            if (sumC == sumR) {\n                if (GameSolver.solve(board, 1, 1, size)) {\n                    copyBoard(board, solvedBoard);\n                    resetForUser(board, size);\n                    break;\n                }\n            }\n        } while(true);\n    }\n    public static boolean isBoardSolved() {\n            for (int i = 0; i &lt; board.length; i++) {\n                for (int j = 0; j &lt; board[i].length; j++) {\n                    if (board[i][j] != solvedBoard[i][j]) {\n                        return false;\n                    }\n                }\n            }\n        return true;\n        }\n\n    public static void resetBoard(int[][] board) {\n        for (int[] ints : board) {\n            Arrays.fill(ints, 0);\n        }\n    }\n\n    public static void copyBoard(int[][] source, int[][] destination) {\n        for (int i = 0; i &lt; source.length; i++) {\n            System.arraycopy(source[i], 0, destination[i], 0, source[i].length);\n        }\n    }\n\n    public static void resetForUser(int[][] board, int size){\n        for (int i = 1; i &lt; size; i++) {\n            for (int j = 1; j &lt; size; j++) {\n                board[i][j] =0;\n            }\n        }\n    }\n}\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","apache-kafka","spring-kafka"],"answers":[{"tags":[],"owner":{"account_id":9120249,"reputation":15521,"user_id":6785908,"accept_rate":70,"display_name":"so-random-dude"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686626489,"creation_date":1672252833,"answer_id":74943872,"question_id":74943770,"body_markdown":"This is an interesting question, I have come across this scenario more times than I think I would. This is how I went about it\r\n\r\n 1. Use console-consumer with `--group new-CG-name`, `--from-beginning` and `--max-messages 1` so that it consumes just one message and the consumer group is registered with the broker/zookeeper\r\n 2. Stop the current consumer app and find out the offset for each of the partition for the given topic-current consumer group\r\n 3. Using consumer-group.sh, Change the new-CG-name&#39;s offset for all of the partitions to the same number as the current CG&#39;s offset\r\n 4. Change the consumer group name in your listener app to new name and start the app\r\n\r\nStep 1 may not be necessary. You can experiment without it","title":"Change the group.id of spring-kafka listeners without re-processing processed or losing unprocessed messages","body":"<p>This is an interesting question, I have come across this scenario more times than I think I would. This is how I went about it</p>\n<ol>\n<li>Use console-consumer with <code>--group new-CG-name</code>, <code>--from-beginning</code> and <code>--max-messages 1</code> so that it consumes just one message and the consumer group is registered with the broker/zookeeper</li>\n<li>Stop the current consumer app and find out the offset for each of the partition for the given topic-current consumer group</li>\n<li>Using consumer-group.sh, Change the new-CG-name's offset for all of the partitions to the same number as the current CG's offset</li>\n<li>Change the consumer group name in your listener app to new name and start the app</li>\n</ol>\n<p>Step 1 may not be necessary. You can experiment without it</p>\n"},{"tags":[],"owner":{"account_id":8191586,"reputation":81,"user_id":12195379,"display_name":"Rajesh Rai"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1678262639,"creation_date":1678262639,"answer_id":75670576,"question_id":74943770,"body_markdown":"You can use consumer with seek option. can store the last processed offset for a consumer group to a journal store(which is accessible to all the consumers of a group) and in case of restart they can seek from last offset, check the documentation [here][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-kafka/docs/current/reference/html/#seek","title":"Change the group.id of spring-kafka listeners without re-processing processed or losing unprocessed messages","body":"<p>You can use consumer with seek option. can store the last processed offset for a consumer group to a journal store(which is accessible to all the consumers of a group) and in case of restart they can seek from last offset, check the documentation <a href=\"https://docs.spring.io/spring-kafka/docs/current/reference/html/#seek\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":12875245,"reputation":547,"user_id":9312181,"display_name":"tusharRawat"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":645,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1686626489,"creation_date":1672252069,"question_id":74943770,"body_markdown":"We have few **`Kafka listeners`** consuming from different `topics` but they are under a same consumer group - `group-1`. (legacy-code.)\r\n\r\nAs it&#39;s not a good practice to keep the listeners consuming from different topics in the same group. \r\n\r\n\r\nWe want to separate the consumer groups for each listener, i.e. listener consuming from `topic-1` would be in a separate group than the listener consuming from `topic-2`. \r\n\r\n\r\nAs per the docs, we could mention the `groupId` property over each `@KafkaListener`, but what we are afraid of is:-\r\n\r\n 1. If we set the `auto.offset.reset` for new consumer groups as\r\n    `latest`, then we will be losing on some messages, as when our old\r\n    common consumer group dies, due to consumer `LAG` some messages must not have been processed by it, and the new consumer group will not be processing those messages and just starts reading from the latest offset.\r\n2. If we set the `auto.offset.reset` for new consumer groups as\r\n    `earliest`, then we will be processing the same messages again, as new consumers starts reading from the topic&#39;s earliest offset present on broker.\r\n\r\n\r\n&gt; We want to eliminate both the above cases. Is there a way to do this\r\n&gt; safely in spring-kafka.","title":"Change the group.id of spring-kafka listeners without re-processing processed or losing unprocessed messages","body":"<p>We have few <strong><code>Kafka listeners</code></strong> consuming from different <code>topics</code> but they are under a same consumer group - <code>group-1</code>. (legacy-code.)</p>\n<p>As it's not a good practice to keep the listeners consuming from different topics in the same group.</p>\n<p>We want to separate the consumer groups for each listener, i.e. listener consuming from <code>topic-1</code> would be in a separate group than the listener consuming from <code>topic-2</code>.</p>\n<p>As per the docs, we could mention the <code>groupId</code> property over each <code>@KafkaListener</code>, but what we are afraid of is:-</p>\n<ol>\n<li>If we set the <code>auto.offset.reset</code> for new consumer groups as\n<code>latest</code>, then we will be losing on some messages, as when our old\ncommon consumer group dies, due to consumer <code>LAG</code> some messages must not have been processed by it, and the new consumer group will not be processing those messages and just starts reading from the latest offset.</li>\n<li>If we set the <code>auto.offset.reset</code> for new consumer groups as\n<code>earliest</code>, then we will be processing the same messages again, as new consumers starts reading from the topic's earliest offset present on broker.</li>\n</ol>\n<blockquote>\n<p>We want to eliminate both the above cases. Is there a way to do this\nsafely in spring-kafka.</p>\n</blockquote>\n"},{"tags":["java","android","gps","broadcastreceiver","locationmanager"],"comments":[{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459418223,"post_id":36325088,"comment_id":60282235,"body_markdown":"So how exactly would I implement that? It sounded like the GpsStatusListener was a better option since it only needs 1 method, while the LocationListener has like 4.. But in any case, what would the steps be for where to put everything? Since it&#39;s already a Listener on its own (I think), should I simply run it within a Service (rather than in a BroadcastListener) or what?","body":"So how exactly would I implement that? It sounded like the GpsStatusListener was a better option since it only needs 1 method, while the LocationListener has like 4.. But in any case, what would the steps be for where to put everything? Since it&#39;s already a Listener on its own (I think), should I simply run it within a Service (rather than in a BroadcastListener) or what?"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459497748,"post_id":36325088,"comment_id":60322570,"body_markdown":"@DanielNugent So a couple questions.. If I use the LocationListener in order to determine the exact moment the user switches the Location Setting to &quot;ON&quot; (and thus only using onProviderEnabled), would I still need to get the latitude and longitude, etc like in the example? And question 2 is, do I need to use a Handler like in the example as well? If I&#39;m not mistaken, it&#39;s hard-coded into the LocationListener already right? As is the function of a BroadcastListener, meaning I don&#39;t need that either, and can simply run the code within a Service (or Activity with no Layout) correct? or no? Thanks","body":"@DanielNugent So a couple questions.. If I use the LocationListener in order to determine the exact moment the user switches the Location Setting to &quot;ON&quot; (and thus only using onProviderEnabled), would I still need to get the latitude and longitude, etc like in the example? And question 2 is, do I need to use a Handler like in the example as well? If I&#39;m not mistaken, it&#39;s hard-coded into the LocationListener already right? As is the function of a BroadcastListener, meaning I don&#39;t need that either, and can simply run the code within a Service (or Activity with no Layout) correct? or no? Thanks"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459500878,"post_id":36325088,"comment_id":60324319,"body_markdown":"@DanielNugent Again, I don&#39;t even need the actual location whatsoever.. I literally ONLY need my App to essentially listen for when &quot;Location&quot; gets turned on, and then start a new activity. That&#39;s it. But other than that, my App doesn&#39;t have ANYTHING to do with using the Location or anything whatsoever (aside from running in the background and firing up my next activity as soon as the Location SETTING gets turned on).. Does that change anything, as far as the best option?","body":"@DanielNugent Again, I don&#39;t even need the actual location whatsoever.. I literally ONLY need my App to essentially listen for when &quot;Location&quot; gets turned on, and then start a new activity. That&#39;s it. But other than that, my App doesn&#39;t have ANYTHING to do with using the Location or anything whatsoever (aside from running in the background and firing up my next activity as soon as the Location SETTING gets turned on).. Does that change anything, as far as the best option?"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459563457,"post_id":36325088,"comment_id":60356079,"body_markdown":"@DanielNugent When you say &quot;use the BroadcastReceiver for android. location.PROVIDERS_CHANGED&quot;, are you still referring to using the LocationListener (within a Service), OR are you saying to implement some kind of &quot; If/Else&quot; statement containing PROVIDERS_CHANGED somehow, from within an actual BroadcastListener?","body":"@DanielNugent When you say &quot;use the BroadcastReceiver for android. location.PROVIDERS_CHANGED&quot;, are you still referring to using the LocationListener (within a Service), OR are you saying to implement some kind of &quot; If/Else&quot; statement containing PROVIDERS_CHANGED somehow, from within an actual BroadcastListener?"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459563807,"post_id":36325088,"comment_id":60356133,"body_markdown":"@DanielNugent I wish there was a way for us to communicate more easily.. I have a few more questions about it that are pretty basic, but I don&#39;t want to make this post/thread too long.. Would you mind if I emailed you? If I could get your email that would be super helpful in achieving my goals. I really appreciate your help.","body":"@DanielNugent I wish there was a way for us to communicate more easily.. I have a few more questions about it that are pretty basic, but I don&#39;t want to make this post/thread too long.. Would you mind if I emailed you? If I could get your email that would be super helpful in achieving my goals. I really appreciate your help."},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459722138,"post_id":36325088,"comment_id":60400761,"body_markdown":"@DanielNugent I took a look at the link you gave me, and it seems to make sense.. However, you mention some kind of &quot;Library&quot; on a few occasions in that post.. Do I need to utilize some kind of Library as well? Or can I simply put that code into a receiver, and have a button in my main app start the receiver up and close itself?","body":"@DanielNugent I took a look at the link you gave me, and it seems to make sense.. However, you mention some kind of &quot;Library&quot; on a few occasions in that post.. Do I need to utilize some kind of Library as well? Or can I simply put that code into a receiver, and have a button in my main app start the receiver up and close itself?"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459723002,"post_id":36325088,"comment_id":60400994,"body_markdown":"@DanielNugent Awesome I&#39;ll try it out and get back to you with any further questions.. However just curious, whats the difference between running a BroadcastReceiver using an Intent, vs running a Service using the LocationListener? Isnt it basically the same? Remember I need it to be running at all times, even when my App isn&#39;t. And also start listening automatically when the system starts etc. So how would the 2 methods differ?","body":"@DanielNugent Awesome I&#39;ll try it out and get back to you with any further questions.. However just curious, whats the difference between running a BroadcastReceiver using an Intent, vs running a Service using the LocationListener? Isnt it basically the same? Remember I need it to be running at all times, even when my App isn&#39;t. And also start listening automatically when the system starts etc. So how would the 2 methods differ?"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459729970,"post_id":36325088,"comment_id":60402638,"body_markdown":"@DanielNugent For example, in my MainActivity, I have to use an Intent to actually Start my Service when they press a Button.. But do I need to do this for my Receiver in a similar way? Or how does the Receiver get started?","body":"@DanielNugent For example, in my MainActivity, I have to use an Intent to actually Start my Service when they press a Button.. But do I need to do this for my Receiver in a similar way? Or how does the Receiver get started?"},{"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"score":0,"creation_date":1459735849,"post_id":36325088,"comment_id":60403995,"body_markdown":"I just added an answer, I really think it&#39;s as simple as that.  Let me know if it works for you!","body":"I just added an answer, I really think it&#39;s as simple as that.  Let me know if it works for you!"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459736598,"post_id":36325088,"comment_id":60404140,"body_markdown":"@DanielNugent I now have the entire Receiver coded, as well as the Manifest, both as you described.. My only remaining questions are: How to make sure the Receiver stays active, in the event that the user turns off the Location Service and then turns it back ON again.. Essentially I want it to be listening at ALL times for it to be turned ON, even after the initial receipt of the Broadcast.. Make sense? Just want to make sure the Receiver doesnt get killed.. And thank you again for all the help..","body":"@DanielNugent I now have the entire Receiver coded, as well as the Manifest, both as you described.. My only remaining questions are: How to make sure the Receiver stays active, in the event that the user turns off the Location Service and then turns it back ON again.. Essentially I want it to be listening at ALL times for it to be turned ON, even after the initial receipt of the Broadcast.. Make sense? Just want to make sure the Receiver doesnt get killed.. And thank you again for all the help.."},{"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"score":0,"creation_date":1459737121,"post_id":36325088,"comment_id":60404216,"body_markdown":"You should read the documentation on BroadcastReceivers, the beauty of them is that they are not always running (so your app is not eating up battery life), but when the provider change happens, the OS starts your app and executes the BroadcastReceiver&#39;s onReceive.  Go ahead and test it, and make sure that it works for your needs!","body":"You should read the documentation on BroadcastReceivers, the beauty of them is that they are not always running (so your app is not eating up battery life), but when the provider change happens, the OS starts your app and executes the BroadcastReceiver&#39;s onReceive.  Go ahead and test it, and make sure that it works for your needs!"},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459737419,"post_id":36325088,"comment_id":60404261,"body_markdown":"@DanielNugent Awesome, I will try it out, and thanks again.. I actually have the documentation up as we speak.. The only issue is, I want the &quot;Launch my next Activity upon receipt of the Broadcast&quot; to be an Option the user can set to On or Off. But it sounds like the Receiver will always be running. I also need to make sure it doesn&#39;t get killed after it receives the initial Broadcast, so it will continue to respond to it. Is there a code needed to reinitialize the Receiver after the onReceive code, or does it automatically reinstate it?","body":"@DanielNugent Awesome, I will try it out, and thanks again.. I actually have the documentation up as we speak.. The only issue is, I want the &quot;Launch my next Activity upon receipt of the Broadcast&quot; to be an Option the user can set to On or Off. But it sounds like the Receiver will always be running. I also need to make sure it doesn&#39;t get killed after it receives the initial Broadcast, so it will continue to respond to it. Is there a code needed to reinitialize the Receiver after the onReceive code, or does it automatically reinstate it?"},{"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"score":0,"creation_date":1459737678,"post_id":36325088,"comment_id":60404315,"body_markdown":"Just use a SharedPreference value to store what the user has chosen, and check the value of the SharedPreference in the BroadcastReceiver.  If the user has disabled it, don&#39;t start the Activity in onReceive() in the BroadcastReceiver.","body":"Just use a SharedPreference value to store what the user has chosen, and check the value of the SharedPreference in the BroadcastReceiver.  If the user has disabled it, don&#39;t start the Activity in onReceive() in the BroadcastReceiver."},{"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"score":0,"creation_date":1459814617,"post_id":36325088,"comment_id":60445238,"body_markdown":"@DanielNugent OK So I just edited my original post and added all the Code I&#39;ve got so far.. Could you take a look at my Edit above, and the questions under it? Thanks Daniel!","body":"@DanielNugent OK So I just edited my original post and added all the Code I&#39;ve got so far.. Could you take a look at my Edit above, and the questions under it? Thanks Daniel!"}],"answers":[{"tags":[],"owner":{"account_id":5559444,"reputation":43202,"user_id":4409409,"display_name":"Daniel Nugent"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1573366516,"creation_date":1459500396,"answer_id":36351850,"question_id":36325088,"body_markdown":"Since you don&#39;t need to actually get a Location, the best implementation for your needs would be a BroadcastReceiver.\r\n\r\nThis is the best option because you wouldn&#39;t need to have a Service running at all times (resulting in extra batter drain), and you would be able to start your Activity from the BroadcastReceiver.\r\n\r\nWith the intent filter and BroadcastReceiver, your app will be started by the OS whenever the Location setting has changed (enabled or disabled), and in the case that it is enabled, you can start your Activity from the BroadcastReceiver.\r\n\r\nFirst add the intent filter, which will be captured when the OS sends out the implicit Intent that the setting has changed.\r\n\r\n\r\n&lt;!--language: xml--&gt;\r\n\r\n    &lt;receiver\r\n        android:name=&quot;.LocationProviderChangedReceiver&quot;\r\n        android:exported=&quot;false&quot; &gt;\r\n        &lt;intent-filter&gt;\r\n            &lt;action android:name=&quot;android.location.PROVIDERS_CHANGED&quot; /&gt;\r\n            &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n        &lt;/intent-filter&gt;\r\n    &lt;/receiver&gt;\r\n\r\nNote that for this to work on Android Oreo and above, you&#39;ll need to register the broadcast receiver at runtime, see here: https://developer.android.com/guide/components/broadcasts#context-registered-receivers\r\n\r\nThen, in LocationProviderChangedReceiver.java, your implementation would be something like this:\r\n&lt;!--language: java--&gt;\r\n\r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Context;\r\n    import android.content.Intent;\r\n    import android.location.LocationManager;\r\n    import android.util.Log;\r\n    import android.widget.Toast;\r\n    \r\n    public class LocationProviderChangedReceiver extends BroadcastReceiver {\r\n        private final static String TAG = &quot;LocationProviderChanged&quot;;\r\n    \r\n        boolean isGpsEnabled;\r\n        boolean isNetworkEnabled;\r\n    \r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n            if (intent.getAction().matches(&quot;android.location.PROVIDERS_CHANGED&quot;))\r\n            {\r\n                Log.i(TAG, &quot;Location Providers changed&quot;);\r\n    \r\n                LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n                isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n    \r\n                //Start your Activity if location was enabled:\r\n                if (isGpsEnabled || isNetworkEnabled) {\r\n                      Intent i = new Intent(context, YourActivity.class);\r\n                      context.startActivity(i);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n**Edit**\r\n\r\nUpdated solution with Kotlin and registering receiver at runtime for Android 9.\r\n\r\nThe BroadcastReceiver class in Kotlin:\r\n\r\n\r\n&lt;!-- language: kotlin --&gt;\r\n\r\n    class LocationProviderChangedReceiver : BroadcastReceiver() {\r\n    \r\n        internal var isGpsEnabled: Boolean = false\r\n        internal var isNetworkEnabled: Boolean = false\r\n    \r\n        override fun onReceive(context: Context, intent: Intent) {\r\n            intent.action?.let { act -&gt;\r\n                if (act.matches(&quot;android.location.PROVIDERS_CHANGED&quot;.toRegex())) {\r\n                    val locationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager\r\n                    isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)\r\n                    isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)\r\n    \r\n                    Log.i(TAG, &quot;Location Providers changed, is GPS Enabled: &quot; + isGpsEnabled)\r\n    \r\n                    //Start your Activity if location was enabled:\r\n                    if (isGpsEnabled || isNetworkEnabled) {\r\n                        val i = Intent(context, YourActivity::class.java)\r\n                        context.startActivity(i)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    \r\n        companion object {\r\n            private val TAG = &quot;LocationProviderChanged&quot;\r\n        }\r\n    }\r\n\r\n\r\nRegister at runtime, for example in onCreate() of your app&#39;s MainActivity:\r\n\r\n&lt;!-- language: kotlin --&gt;\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_main)\r\n\r\n        val br: BroadcastReceiver = LocationProviderChangedReceiver()\r\n        val filter = IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION)\r\n        registerReceiver(br, filter)\r\n    }\r\n","title":"How to? Listen for Location Setting being turned ON (Android App)","body":"<p>Since you don't need to actually get a Location, the best implementation for your needs would be a BroadcastReceiver.</p>\n\n<p>This is the best option because you wouldn't need to have a Service running at all times (resulting in extra batter drain), and you would be able to start your Activity from the BroadcastReceiver.</p>\n\n<p>With the intent filter and BroadcastReceiver, your app will be started by the OS whenever the Location setting has changed (enabled or disabled), and in the case that it is enabled, you can start your Activity from the BroadcastReceiver.</p>\n\n<p>First add the intent filter, which will be captured when the OS sends out the implicit Intent that the setting has changed.</p>\n\n\n\n<pre><code>&lt;receiver\n    android:name=\".LocationProviderChangedReceiver\"\n    android:exported=\"false\" &gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=\"android.location.PROVIDERS_CHANGED\" /&gt;\n        &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n    &lt;/intent-filter&gt;\n&lt;/receiver&gt;\n</code></pre>\n\n<p>Note that for this to work on Android Oreo and above, you'll need to register the broadcast receiver at runtime, see here: <a href=\"https://developer.android.com/guide/components/broadcasts#context-registered-receivers\" rel=\"noreferrer\">https://developer.android.com/guide/components/broadcasts#context-registered-receivers</a></p>\n\n<p>Then, in LocationProviderChangedReceiver.java, your implementation would be something like this:\n</p>\n\n<pre><code>import android.content.BroadcastReceiver;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.location.LocationManager;\nimport android.util.Log;\nimport android.widget.Toast;\n\npublic class LocationProviderChangedReceiver extends BroadcastReceiver {\n    private final static String TAG = \"LocationProviderChanged\";\n\n    boolean isGpsEnabled;\n    boolean isNetworkEnabled;\n\n    @Override\n    public void onReceive(Context context, Intent intent) {\n        if (intent.getAction().matches(\"android.location.PROVIDERS_CHANGED\"))\n        {\n            Log.i(TAG, \"Location Providers changed\");\n\n            LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n            isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n            isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n\n            //Start your Activity if location was enabled:\n            if (isGpsEnabled || isNetworkEnabled) {\n                  Intent i = new Intent(context, YourActivity.class);\n                  context.startActivity(i);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Updated solution with Kotlin and registering receiver at runtime for Android 9.</p>\n\n<p>The BroadcastReceiver class in Kotlin:</p>\n\n<pre><code>class LocationProviderChangedReceiver : BroadcastReceiver() {\n\n    internal var isGpsEnabled: Boolean = false\n    internal var isNetworkEnabled: Boolean = false\n\n    override fun onReceive(context: Context, intent: Intent) {\n        intent.action?.let { act -&gt;\n            if (act.matches(\"android.location.PROVIDERS_CHANGED\".toRegex())) {\n                val locationManager = context.getSystemService(Context.LOCATION_SERVICE) as LocationManager\n                isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)\n                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER)\n\n                Log.i(TAG, \"Location Providers changed, is GPS Enabled: \" + isGpsEnabled)\n\n                //Start your Activity if location was enabled:\n                if (isGpsEnabled || isNetworkEnabled) {\n                    val i = Intent(context, YourActivity::class.java)\n                    context.startActivity(i)\n                }\n            }\n        }\n    }\n\n    companion object {\n        private val TAG = \"LocationProviderChanged\"\n    }\n}\n</code></pre>\n\n<p>Register at runtime, for example in onCreate() of your app's MainActivity:</p>\n\n<pre><code>override fun onCreate(savedInstanceState: Bundle?) {\n    super.onCreate(savedInstanceState)\n    setContentView(R.layout.activity_main)\n\n    val br: BroadcastReceiver = LocationProviderChangedReceiver()\n    val filter = IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION)\n    registerReceiver(br, filter)\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2362295,"reputation":4187,"user_id":2068732,"accept_rate":67,"display_name":"matdev"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1551973102,"creation_date":1551973102,"answer_id":55047578,"question_id":36325088,"body_markdown":"Here is a solution using dynamic registration:\r\n\r\nIn your fragment or activity&#39;s onResume() method, listen to changes in `LocationManager.PROVIDERS_CHANGED_ACTION`\r\n\r\n    IntentFilter filter = new IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION);\r\n    filter.addAction(Intent.ACTION_PROVIDER_CHANGED);\r\n    mActivity.registerReceiver(gpsSwitchStateReceiver, filter);\r\n\r\nHere is a code sample for the `gpsSwitchStateReceiver` object:\r\n\r\n\r\n    private BroadcastReceiver gpsSwitchStateReceiver = new BroadcastReceiver() {\r\n            @Override\r\n            public void onReceive(Context context, Intent intent) {\r\n    \r\n    \r\n                if (LocationManager.PROVIDERS_CHANGED_ACTION.equals(intent.getAction())) {\r\n                    // Make an action or refresh an already managed state.\r\n    \r\n                    LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n                    boolean isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n                    boolean isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n    \r\n                    if (isGpsEnabled || isNetworkEnabled) {\r\n                        Log.i(this.getClass().getName(), &quot;gpsSwitchStateReceiver.onReceive() location is enabled : isGpsEnabled = &quot; + isGpsEnabled + &quot; isNetworkEnabled = &quot; + isNetworkEnabled);\r\n                    } else {\r\n                        Log.w(this.getClass().getName(), &quot;gpsSwitchStateReceiver.onReceive() location disabled &quot;);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\nIn your onPause() method, unregister the receiver\r\n\r\n    mActivity.unregisterReceiver(gpsSwitchStateReceiver);","title":"How to? Listen for Location Setting being turned ON (Android App)","body":"<p>Here is a solution using dynamic registration:</p>\n\n<p>In your fragment or activity's onResume() method, listen to changes in <code>LocationManager.PROVIDERS_CHANGED_ACTION</code></p>\n\n<pre><code>IntentFilter filter = new IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION);\nfilter.addAction(Intent.ACTION_PROVIDER_CHANGED);\nmActivity.registerReceiver(gpsSwitchStateReceiver, filter);\n</code></pre>\n\n<p>Here is a code sample for the <code>gpsSwitchStateReceiver</code> object:</p>\n\n<pre><code>private BroadcastReceiver gpsSwitchStateReceiver = new BroadcastReceiver() {\n        @Override\n        public void onReceive(Context context, Intent intent) {\n\n\n            if (LocationManager.PROVIDERS_CHANGED_ACTION.equals(intent.getAction())) {\n                // Make an action or refresh an already managed state.\n\n                LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n                boolean isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n                boolean isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n\n                if (isGpsEnabled || isNetworkEnabled) {\n                    Log.i(this.getClass().getName(), \"gpsSwitchStateReceiver.onReceive() location is enabled : isGpsEnabled = \" + isGpsEnabled + \" isNetworkEnabled = \" + isNetworkEnabled);\n                } else {\n                    Log.w(this.getClass().getName(), \"gpsSwitchStateReceiver.onReceive() location disabled \");\n                }\n            }\n        }\n    };\n</code></pre>\n\n<p>In your onPause() method, unregister the receiver</p>\n\n<pre><code>mActivity.unregisterReceiver(gpsSwitchStateReceiver);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8978416,"reputation":148,"user_id":6694413,"display_name":"Mohanakrrishna"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559732850,"creation_date":1559063223,"answer_id":56347083,"question_id":36325088,"body_markdown":"LocationListeners&#39;s `onProvideEnabled()` method will work instantly. When you call this remember if you are doing `LocationManager.removeUpdates()` in between `onProviderEnabled()` won&#39;t work.\r\n\r\nAnd this is pretty much simple when you are reading locations from Location API&#39;s of Android. You don&#39;t need the broadcast receivers listening and communication further\r\n\r\nBut when you are using `FusedLocationProviderClient` from google API and if you use LocationListener&#39;s `onProviderEnabled` and `onProviderDisabled` methods you will be having two services running in parallel, checking for the provider changes. So using `BroadcastReceiver` is better","title":"How to? Listen for Location Setting being turned ON (Android App)","body":"<p>LocationListeners's <code>onProvideEnabled()</code> method will work instantly. When you call this remember if you are doing <code>LocationManager.removeUpdates()</code> in between <code>onProviderEnabled()</code> won't work.</p>\n\n<p>And this is pretty much simple when you are reading locations from Location API's of Android. You don't need the broadcast receivers listening and communication further</p>\n\n<p>But when you are using <code>FusedLocationProviderClient</code> from google API and if you use LocationListener's <code>onProviderEnabled</code> and <code>onProviderDisabled</code> methods you will be having two services running in parallel, checking for the provider changes. So using <code>BroadcastReceiver</code> is better</p>\n"},{"tags":[],"owner":{"account_id":231436,"reputation":2174,"user_id":495673,"accept_rate":60,"display_name":"argenkiwi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686626394,"creation_date":1686626394,"answer_id":76461493,"question_id":36325088,"body_markdown":"Here is an extension property that produces a flow from a Broadcast receiver:\r\n```\r\nval Context.locationEnabledFlow\r\n    get() = callbackFlow {\r\n        val receiver = object : BroadcastReceiver() {\r\n            override fun onReceive(context: Context?, intent: Intent?) {\r\n                trySend(LocationManagerCompat.isLocationEnabled(locationManager))\r\n            }\r\n        }\r\n\r\n        registerReceiver(receiver, IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION))\r\n        awaitClose { unregisterReceiver(receiver) }\r\n    }\r\n```\r\nFor example, this is how you could use it with Jetpack Compose:\r\n```\r\nval isLocationEnabled by LocalContext.current.locationEnabledFlow\r\n    .collectAsStateWithLifecycle(initialValue = false)\r\n\r\nText(text = when(isLocationEnabled){\r\n    true -&gt; &quot;Location enabled.&quot;\r\n    false -&gt; &quot;Location disabled.&quot;\r\n})\r\n```","title":"How to? Listen for Location Setting being turned ON (Android App)","body":"<p>Here is an extension property that produces a flow from a Broadcast receiver:</p>\n<pre><code>val Context.locationEnabledFlow\n    get() = callbackFlow {\n        val receiver = object : BroadcastReceiver() {\n            override fun onReceive(context: Context?, intent: Intent?) {\n                trySend(LocationManagerCompat.isLocationEnabled(locationManager))\n            }\n        }\n\n        registerReceiver(receiver, IntentFilter(LocationManager.PROVIDERS_CHANGED_ACTION))\n        awaitClose { unregisterReceiver(receiver) }\n    }\n</code></pre>\n<p>For example, this is how you could use it with Jetpack Compose:</p>\n<pre><code>val isLocationEnabled by LocalContext.current.locationEnabledFlow\n    .collectAsStateWithLifecycle(initialValue = false)\n\nText(text = when(isLocationEnabled){\n    true -&gt; &quot;Location enabled.&quot;\n    false -&gt; &quot;Location disabled.&quot;\n})\n</code></pre>\n"}],"owner":{"account_id":4490260,"reputation":181,"user_id":3651520,"accept_rate":0,"display_name":"Ender87"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15118,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":4,"score":14,"last_activity_date":1686626394,"creation_date":1459403155,"question_id":36325088,"body_markdown":"So I&#39;ve spent the past few weeks working on my Android App and looking into the best way of implementing what I need to do, but still can&#39;t quite get it right.. Any/all help is greatly appreciated, as I am still getting the hang of things..\r\n\r\n\r\nTask: \r\n------------\r\n(Assuming the &quot;Location&quot;/GPS Setting is currently off), I need to have my App constantly be listening for the &quot;Location&quot; Setting to be turned ON.. At this point, simply start an Activity.\r\n\r\n\r\nIdeas:\r\n------------\r\nThese are all the different ways I think it could possibly work:\r\n\r\n- LocationListener using &quot;onProviderEnabled&quot;\r\n\r\n- GpsStatusListener using &quot;onGpsStatusChanged&quot; with &quot;GPS_EVENT_STARTED&quot;\r\n\r\n- GpsProvider requiresSatellite (to determine if it starts), or somehow use the GpsProvider&#39;s &quot;AVAILABLE&quot; Constant/int\r\n\r\n- SettingInjectorService using &quot;ACTION_SERVICE_INTENT&quot; (and/or) &quot;ACTION_INJECTED_SETTING_CHANGED&quot; with &quot;onGetEnabled&quot; or &quot;isEnabled&quot;\r\n\r\n- Settings.Secure using &quot;LOCATION_MODE&quot; != &quot;LOCATION_MODE_OFF&quot;\r\n\r\n- a ContentObserver/ContentResolver\r\n\r\n- Intent getAction (...)\r\n\r\n- An &quot;if/else&quot; of some kind\r\n\r\n\r\nQuestions:\r\n------------\r\nAny kind of advice or answers for any of the following questions are very much appreciated..\r\n\r\n- Which of the Ideas above would be the best way of accomplishing the Task? The simpler the better, but most importantly it needs to be listening at all times, and respond instantly when the Location Setting is turned On.\r\n\r\n- For whichever one of the Ideas  above works best, how would I implement it? (For example, would I need a BroadcastListener? or a Service? and how would it all piece together?\r\n\r\n\r\nI truly appreciate any advice or help that you can provide me with.. I&#39;m still getting the hang of all this, but confident enough to do it, and eager to   publish my first App.. So thank you, it means a lot and will greatly help me along.&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\nEDIT:&lt;br&gt;\r\n&lt;br&gt;\r\nOK So here&#39;s what I&#39;ve got so far...\r\n&lt;br&gt;\r\nHeres my Receiver:\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nMyReceiver.Java    \r\n&lt;!--language: java --&gt;\r\n\r\n    public class MyReceiver extends BroadcastReceiver {\r\n        \r\n        private final static String TAG = &quot;LocationProviderChanged&quot;;\r\n        \r\n        boolean isGpsEnabled;\r\n        boolean isNetworkEnabled;\r\n        \r\n        \r\n        \r\n        public MyReceiver() {\r\n        // EMPTY\r\n        \r\n        // MyReceiver Close Bracket\r\n        }\r\n        \r\n        \r\n        \r\n        // START OF onReceive\r\n        @Override\r\n        public void onReceive(Context context, Intent intent) {\r\n        \r\n        \r\n            // PRIMARY RECEIVER\r\n            if (intent.getAction().matches(&quot;android.location.PROVIDERS_CHANGED&quot;)) {\r\n                \r\n                Log.i(TAG, &quot;Location Providers Changed&quot;);\r\n        \r\n                LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n                isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n        \r\n                Toast.makeText(context, &quot;GPS Enabled: &quot; + isGpsEnabled + &quot; Network Location Enabled: &quot; + isNetworkEnabled, Toast.LENGTH_LONG).show();\r\n        \r\n                // START DIALOG ACTIVITY\r\n                if (isGpsEnabled || isNetworkEnabled) {\r\n                    Intent runDialogActivity = new Intent(context, DialogActivity.class);\r\n                    context.startActivity(runDialogActivity);\r\n        \r\n                }\r\n        \r\n            }\r\n        \r\n        \r\n        \r\n            // BOOT COMPLETED (REPLICA OF PRIMARY RECEIVER CODE FOR WHEN BOOT_COMPLETED)\r\n            if (intent.getAction().matches(&quot;android.intent.action.BOOT_COMPLETED&quot;)) {\r\n                \r\n                Log.i(TAG, &quot;Location Providers Changed Boot&quot;);\r\n        \r\n                LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\r\n                isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\r\n                isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\r\n        \r\n                Toast.makeText(context, &quot;GPS Enabled Boot: &quot; + isGpsEnabled + &quot; Network Location Enabled Boot: &quot; + isNetworkEnabled, Toast.LENGTH_LONG).show();\r\n        \r\n                // START DIALOG ACTIVITY\r\n                if (isGpsEnabled || isNetworkEnabled) {\r\n                    Intent runDialogActivity = new Intent(context, DialogActivity.class);\r\n                    context.startActivity(runDialogActivity);\r\n        \r\n                }\r\n                \r\n            }\r\n        \r\n        \r\n        \r\n        // onReceive CLOSE BRACKET\r\n        }\r\n        \r\n        \r\n        \r\n    // CLOSE OF FULL CLASS\r\n    }\r\n    \r\n\r\n\r\nAnd heres what the Manifest looks like:\r\n \r\nManifest.XML\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    \r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.ender.projects.receivertest&quot;&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;\r\n    \r\n        &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n    \r\n        &lt;application\r\n            android:allowBackup=&quot;true&quot;\r\n            android:fullBackupContent=&quot;true&quot;\r\n            android:icon=&quot;@mipmap/ic_launcher&quot;\r\n            android:label=&quot;@string/app_name&quot;\r\n            android:theme=&quot;@style/AppTheme&quot;&gt;\r\n    \r\n            &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/activity&gt;\r\n\r\n            &lt;activity android:name=&quot;.DialogActivity&quot;&gt;\r\n            &lt;/activity&gt;\r\n    \r\n            &lt;receiver\r\n                android:name=&quot;.MyReceiver&quot;\r\n                android:enabled=&quot;true&quot;\r\n                android:exported=&quot;true&quot;&gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;android.location.PROVIDERS_CHANGED&quot; /&gt;\r\n    \r\n                    &lt;action android:name=&quot;android.intent.action.BOOT_COMPLETED&quot; /&gt;\r\n    \r\n                    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n            \r\n        &lt;/application&gt;\r\n    \r\n    &lt;/manifest&gt;\r\n\r\n\r\nAside from these files, I have the following files:&lt;br&gt;\r\n`MainActivity.Java` and `DialogActivity.Java`, both with Layout files,&lt;br&gt;\r\n`activity_main.xml` and `activity_dialog.xml` to match with them.&lt;br&gt;\r\n&lt;br&gt;\r\nSo if I understand correctly, when the user downloads the App and opens it, my `MainActivity.Java` and corresponding layout will launch. But I am only going to use this simply as a preferences screen. So once they open the App for the first time, the Broadcast Receiver should automatically start listening for the LOCATION setting to be turned on, correct? I also want the Broadcast Listener to remain listening, even after it receives the initial Broadcast (so that my `onReceive` still fires if they turn the LOCATION setting off, and then later they turn it ON again..&lt;br&gt;\r\n&lt;br&gt;\r\nSo (A) How does my code look thus far?&lt;br&gt;\r\nand (B) To accomplish what I just described, what would need to be added?&lt;br&gt;\r\nand (C) Running it throws this error when I turn the LOCATION setting ON.&lt;br&gt;\r\n..How can I fix it?:&lt;br&gt;\r\n`java.lang.RuntimeException: Unable to start receiver com.bryce.projects.servicesthreadsetc.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?`&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\nThanks again for all the help!&lt;br&gt;","title":"How to? Listen for Location Setting being turned ON (Android App)","body":"<p>So I've spent the past few weeks working on my Android App and looking into the best way of implementing what I need to do, but still can't quite get it right.. Any/all help is greatly appreciated, as I am still getting the hang of things..</p>\n\n<h2>Task:</h2>\n\n<p>(Assuming the \"Location\"/GPS Setting is currently off), I need to have my App constantly be listening for the \"Location\" Setting to be turned ON.. At this point, simply start an Activity.</p>\n\n<h2>Ideas:</h2>\n\n<p>These are all the different ways I think it could possibly work:</p>\n\n<ul>\n<li><p>LocationListener using \"onProviderEnabled\"</p></li>\n<li><p>GpsStatusListener using \"onGpsStatusChanged\" with \"GPS_EVENT_STARTED\"</p></li>\n<li><p>GpsProvider requiresSatellite (to determine if it starts), or somehow use the GpsProvider's \"AVAILABLE\" Constant/int</p></li>\n<li><p>SettingInjectorService using \"ACTION_SERVICE_INTENT\" (and/or) \"ACTION_INJECTED_SETTING_CHANGED\" with \"onGetEnabled\" or \"isEnabled\"</p></li>\n<li><p>Settings.Secure using \"LOCATION_MODE\" != \"LOCATION_MODE_OFF\"</p></li>\n<li><p>a ContentObserver/ContentResolver</p></li>\n<li><p>Intent getAction (...)</p></li>\n<li><p>An \"if/else\" of some kind</p></li>\n</ul>\n\n<h2>Questions:</h2>\n\n<p>Any kind of advice or answers for any of the following questions are very much appreciated..</p>\n\n<ul>\n<li><p>Which of the Ideas above would be the best way of accomplishing the Task? The simpler the better, but most importantly it needs to be listening at all times, and respond instantly when the Location Setting is turned On.</p></li>\n<li><p>For whichever one of the Ideas  above works best, how would I implement it? (For example, would I need a BroadcastListener? or a Service? and how would it all piece together?</p></li>\n</ul>\n\n<p>I truly appreciate any advice or help that you can provide me with.. I'm still getting the hang of all this, but confident enough to do it, and eager to   publish my first App.. So thank you, it means a lot and will greatly help me along.<br>\n<br>\n<br></p>\n\n<p>EDIT:<br>\n<br>\nOK So here's what I've got so far...\n<br>\nHeres my Receiver:\n<br>\n<br>\nMyReceiver.Java<br>\n</p>\n\n<pre><code>public class MyReceiver extends BroadcastReceiver {\n\n    private final static String TAG = \"LocationProviderChanged\";\n\n    boolean isGpsEnabled;\n    boolean isNetworkEnabled;\n\n\n\n    public MyReceiver() {\n    // EMPTY\n\n    // MyReceiver Close Bracket\n    }\n\n\n\n    // START OF onReceive\n    @Override\n    public void onReceive(Context context, Intent intent) {\n\n\n        // PRIMARY RECEIVER\n        if (intent.getAction().matches(\"android.location.PROVIDERS_CHANGED\")) {\n\n            Log.i(TAG, \"Location Providers Changed\");\n\n            LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n            isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n            isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n\n            Toast.makeText(context, \"GPS Enabled: \" + isGpsEnabled + \" Network Location Enabled: \" + isNetworkEnabled, Toast.LENGTH_LONG).show();\n\n            // START DIALOG ACTIVITY\n            if (isGpsEnabled || isNetworkEnabled) {\n                Intent runDialogActivity = new Intent(context, DialogActivity.class);\n                context.startActivity(runDialogActivity);\n\n            }\n\n        }\n\n\n\n        // BOOT COMPLETED (REPLICA OF PRIMARY RECEIVER CODE FOR WHEN BOOT_COMPLETED)\n        if (intent.getAction().matches(\"android.intent.action.BOOT_COMPLETED\")) {\n\n            Log.i(TAG, \"Location Providers Changed Boot\");\n\n            LocationManager locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);\n            isGpsEnabled = locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);\n            isNetworkEnabled = locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);\n\n            Toast.makeText(context, \"GPS Enabled Boot: \" + isGpsEnabled + \" Network Location Enabled Boot: \" + isNetworkEnabled, Toast.LENGTH_LONG).show();\n\n            // START DIALOG ACTIVITY\n            if (isGpsEnabled || isNetworkEnabled) {\n                Intent runDialogActivity = new Intent(context, DialogActivity.class);\n                context.startActivity(runDialogActivity);\n\n            }\n\n        }\n\n\n\n    // onReceive CLOSE BRACKET\n    }\n\n\n\n// CLOSE OF FULL CLASS\n}\n</code></pre>\n\n<p>And heres what the Manifest looks like:</p>\n\n<p>Manifest.XML</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n\n&lt;manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    package=\"com.ender.projects.receivertest\"&gt;\n\n    &lt;uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" /&gt;\n\n    &lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\" /&gt;\n\n    &lt;application\n        android:allowBackup=\"true\"\n        android:fullBackupContent=\"true\"\n        android:icon=\"@mipmap/ic_launcher\"\n        android:label=\"@string/app_name\"\n        android:theme=\"@style/AppTheme\"&gt;\n\n        &lt;activity android:name=\".MainActivity\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.intent.action.MAIN\" /&gt;\n                &lt;category android:name=\"android.intent.category.LAUNCHER\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity android:name=\".DialogActivity\"&gt;\n        &lt;/activity&gt;\n\n        &lt;receiver\n            android:name=\".MyReceiver\"\n            android:enabled=\"true\"\n            android:exported=\"true\"&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=\"android.location.PROVIDERS_CHANGED\" /&gt;\n\n                &lt;action android:name=\"android.intent.action.BOOT_COMPLETED\" /&gt;\n\n                &lt;category android:name=\"android.intent.category.DEFAULT\" /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n\n<p>Aside from these files, I have the following files:<br>\n<code>MainActivity.Java</code> and <code>DialogActivity.Java</code>, both with Layout files,<br>\n<code>activity_main.xml</code> and <code>activity_dialog.xml</code> to match with them.<br>\n<br>\nSo if I understand correctly, when the user downloads the App and opens it, my <code>MainActivity.Java</code> and corresponding layout will launch. But I am only going to use this simply as a preferences screen. So once they open the App for the first time, the Broadcast Receiver should automatically start listening for the LOCATION setting to be turned on, correct? I also want the Broadcast Listener to remain listening, even after it receives the initial Broadcast (so that my <code>onReceive</code> still fires if they turn the LOCATION setting off, and then later they turn it ON again..<br>\n<br>\nSo (A) How does my code look thus far?<br>\nand (B) To accomplish what I just described, what would need to be added?<br>\nand (C) Running it throws this error when I turn the LOCATION setting ON.<br>\n..How can I fix it?:<br>\n<code>java.lang.RuntimeException: Unable to start receiver com.bryce.projects.servicesthreadsetc.MyReceiver: android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want?</code><br>\n<br>\n<br>\nThanks again for all the help!<br></p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9619,"page":373,"page_size":100}
