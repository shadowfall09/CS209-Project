{"items":[{"tags":["java","csv","filereader","trie","opencsv"],"comments":[{"owner":{"account_id":16370655,"reputation":1878,"user_id":11983046,"display_name":"Ryan Zhang"},"score":0,"creation_date":1686017005,"post_id":76410978,"comment_id":134738343,"body_markdown":"`The issue starts when I try to reference the first word on the line trie.search(&quot;abacus&quot;)`. How? Can you show us how you tried to do it other than hard-coding &quot;abacus&quot;?","body":"<code>The issue starts when I try to reference the first word on the line trie.search(&quot;abacus&quot;)</code>. How? Can you show us how you tried to do it other than hard-coding &quot;abacus&quot;?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686039970,"post_id":76410978,"comment_id":134740907,"body_markdown":"Why are most of your fields empty? Splitting like that will still leave you with all the fields, empty or not, as array elements so the array will always be of length nine. That&#39;s just how CSV works","body":"Why are most of your fields empty? Splitting like that will still leave you with all the fields, empty or not, as array elements so the array will always be of length nine. That&#39;s just how CSV works"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686018472,"creation_date":1686018472,"answer_id":76411077,"question_id":76410978,"body_markdown":"In your code, you have the following _if-conditional_.\r\n\r\n```java\r\nif (words.length == 2)\r\n```\r\n\r\nYour _split_ method call is going to return _9_ elements.\r\n\r\nI believe what you are intending to use is a _&quot;,+&quot;_, as you&#39;re _split_ parameter.  \r\nThe _[split](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String))_ parameter is evaluated as a _[regular expression pattern](https://en.wikipedia.org/wiki/Regular_expression)_.\r\n\r\nWhich, in this case, a plus character is going to assimilate 1 or more of the character which precedes it.\r\n\r\nFor example, here are the array elements when a single comma is used.\r\n\r\n```none\r\n0 abacus\r\n1 \r\n2 \r\n3 \r\n4 \r\n5 \r\n6 \r\n7 \r\n8  trust\r\n```\r\n\r\nAnd, here are the elements when a _&quot;,+&quot;_ is used.\r\n\r\n```none\r\n0 abacus\r\n1  trust\r\n```","title":"Can&#39;t figure out why my CSV file is not converting to a string when adding to trie node","body":"<p>In your code, you have the following <em>if-conditional</em>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (words.length == 2)\n</code></pre>\n<p>Your <em>split</em> method call is going to return <em>9</em> elements.</p>\n<p>I believe what you are intending to use is a <em>&quot;,+&quot;</em>, as you're <em>split</em> parameter.<br />\nThe <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#split(java.lang.String)\" rel=\"nofollow noreferrer\">split</a></em> parameter is evaluated as a <em><a href=\"https://en.wikipedia.org/wiki/Regular_expression\" rel=\"nofollow noreferrer\">regular expression pattern</a></em>.</p>\n<p>Which, in this case, a plus character is going to assimilate 1 or more of the character which precedes it.</p>\n<p>For example, here are the array elements when a single comma is used.</p>\n<pre class=\"lang-none prettyprint-override\"><code>0 abacus\n1 \n2 \n3 \n4 \n5 \n6 \n7 \n8  trust\n</code></pre>\n<p>And, here are the elements when a <em>&quot;,+&quot;</em> is used.</p>\n<pre class=\"lang-none prettyprint-override\"><code>0 abacus\n1  trust\n</code></pre>\n"}],"owner":{"account_id":28761181,"reputation":1,"user_id":22027042,"display_name":"Tate"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686703410,"creation_date":1686016783,"question_id":76410978,"body_markdown":"Reading in a basic csv file, the first line,(csv), is &quot;abacus,,,,,,,, trust,,&quot;. Trying to take out the commas and add the two words to some sort of list or array. The issue starts when I try to reference the first word on the line trie.search(&quot;abacus&quot;). Still very new to coding but this one has me stuck.\r\n```\r\ntry {\r\n\twhile ((csv = br.readLine()) != null) {\r\n        String[] words = csv.split(&quot;,&quot;);\r\n        System.out.println(csv);\r\n        if (words.length == 2) {\r\n            String word = words[0].trim();\r\n            int code = 0;\r\n            trie.insert(word, code);\r\n        }\r\n\t}\r\n} catch(FileNotFoundException e) {\r\n\te.printStackTrace();\r\n}\r\n\t\t\r\nSystem.out.println(trie.search(&quot;abacus&quot;));\r\n```\r\n\r\n\r\nI tried inserting the word in several different ways within the word parameter but each time it does not work unless I type &quot;abacus&quot; as the parameter.","title":"Can&#39;t figure out why my CSV file is not converting to a string when adding to trie node","body":"<p>Reading in a basic csv file, the first line,(csv), is &quot;abacus,,,,,,,, trust,,&quot;. Trying to take out the commas and add the two words to some sort of list or array. The issue starts when I try to reference the first word on the line trie.search(&quot;abacus&quot;). Still very new to coding but this one has me stuck.</p>\n<pre><code>try {\n    while ((csv = br.readLine()) != null) {\n        String[] words = csv.split(&quot;,&quot;);\n        System.out.println(csv);\n        if (words.length == 2) {\n            String word = words[0].trim();\n            int code = 0;\n            trie.insert(word, code);\n        }\n    }\n} catch(FileNotFoundException e) {\n    e.printStackTrace();\n}\n        \nSystem.out.println(trie.search(&quot;abacus&quot;));\n</code></pre>\n<p>I tried inserting the word in several different ways within the word parameter but each time it does not work unless I type &quot;abacus&quot; as the parameter.</p>\n"},{"tags":["java","spring-boot","jvm","garbage-collection"],"comments":[{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":1,"creation_date":1686702643,"post_id":76469325,"comment_id":134834710,"body_markdown":"The problem has nothing to do with GC. The process didn&#39;t receive CPU time slice, presumably because of I/O or memory issues.","body":"The problem has nothing to do with GC. The process didn&#39;t receive CPU time slice, presumably because of I/O or memory issues."},{"owner":{"account_id":15692733,"reputation":35,"user_id":11323245,"display_name":"sweet_summer_child"},"score":0,"creation_date":1686703605,"post_id":76469325,"comment_id":134834777,"body_markdown":"This is what I was suspecting as well. But looking at the logs, Object copy has taken most of the time that should mean that the problem is related to GC right?","body":"This is what I was suspecting as well. But looking at the logs, Object copy has taken most of the time that should mean that the problem is related to GC right?"},{"owner":{"account_id":4210603,"reputation":94386,"user_id":3448419,"display_name":"apangin"},"score":2,"creation_date":1686705770,"post_id":76469325,"comment_id":134834930,"body_markdown":"No, it&#39;s a typical [survival bias](https://en.wikipedia.org/wiki/Survivorship_bias): GC activity is covered with stats and logs pretty well, while other operations are not. That said, GC may provoke the issue by doing memory intensive operations, but it&#39;s unlikely to be the root cause.","body":"No, it&#39;s a typical <a href=\"https://en.wikipedia.org/wiki/Survivorship_bias\" rel=\"nofollow noreferrer\">survival bias</a>: GC activity is covered with stats and logs pretty well, while other operations are not. That said, GC may provoke the issue by doing memory intensive operations, but it&#39;s unlikely to be the root cause."}],"answers":[{"tags":[],"owner":{"account_id":17089178,"reputation":21,"user_id":12365707,"display_name":"BoboTheKnight"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686702470,"creation_date":1686702470,"answer_id":76469443,"question_id":76469325,"body_markdown":"&lt;h5&gt;1. Check CPU usage&lt;/h5&gt;\r\nAs you mentioned, real-time is very large. For this, try looking at CPU usage.\r\n\r\n&gt;Another situation to look out for is real time being a lot larger than the sum of the others this may indicate that the VM did not get enough CPU time on a possibly overloaded machine.\r\n\r\n\r\n&lt;h5&gt;2. Decrease -XX:G1NewSizePercent&lt;/h5&gt;\r\nAlso, from the logs, we can see that the Object Copy is taking a lot of time.\r\n\r\n&gt; [Object Copy (ms): Min: 8854.5, Avg: 8904.6, Max: 8954.6, Diff: 100.1, Sum: 35618.3]\r\n\r\nYou can try the following options from [HotSpot Virtual Machine Garbage Collection Tuning Guide][2].\r\n\r\n\r\n&gt;If the Evacuate Collection Set phase takes too long, in particular, the Object Copy sub-phase, decrease -XX:G1NewSizePercent. This decreases the minimum size of the young generation, allowing for potentially shorter pauses.\r\n\r\n&lt;h5&gt;3. Adjust -XX:MaxGCPauseMillis&lt;/h5&gt;\r\n\r\nYou can also specify the desired maximum pause time with `-XX:MaxGCPauseMillis` .\r\n\r\n&gt; If you prefer high throughput, then relax the pause-time goal by using -XX:MaxGCPauseMillis or provide a larger heap. If latency is the main requirement, then modify the pause-time target. \r\n\r\n  [2]: https://docs.oracle.com/en/java/javase/11/gctuning/garbage-first-garbage-collector-tuning.html#GUID-90E30ACA-8040-432E-B3A0-1E0440AB556A","title":"How to understand cause of G1 GC running for too long","body":"<h5>1. Check CPU usage</h5>\nAs you mentioned, real-time is very large. For this, try looking at CPU usage.\n<blockquote>\n<p>Another situation to look out for is real time being a lot larger than the sum of the others this may indicate that the VM did not get enough CPU time on a possibly overloaded machine.</p>\n</blockquote>\n<h5>2. Decrease -XX:G1NewSizePercent</h5>\nAlso, from the logs, we can see that the Object Copy is taking a lot of time.\n<blockquote>\n<p>[Object Copy (ms): Min: 8854.5, Avg: 8904.6, Max: 8954.6, Diff: 100.1, Sum: 35618.3]</p>\n</blockquote>\n<p>You can try the following options from <a href=\"https://docs.oracle.com/en/java/javase/11/gctuning/garbage-first-garbage-collector-tuning.html#GUID-90E30ACA-8040-432E-B3A0-1E0440AB556A\" rel=\"nofollow noreferrer\">HotSpot Virtual Machine Garbage Collection Tuning Guide</a>.</p>\n<blockquote>\n<p>If the Evacuate Collection Set phase takes too long, in particular, the Object Copy sub-phase, decrease -XX:G1NewSizePercent. This decreases the minimum size of the young generation, allowing for potentially shorter pauses.</p>\n</blockquote>\n<h5>3. Adjust -XX:MaxGCPauseMillis</h5>\n<p>You can also specify the desired maximum pause time with <code>-XX:MaxGCPauseMillis</code> .</p>\n<blockquote>\n<p>If you prefer high throughput, then relax the pause-time goal by using -XX:MaxGCPauseMillis or provide a larger heap. If latency is the main requirement, then modify the pause-time target.</p>\n</blockquote>\n"}],"owner":{"account_id":15692733,"reputation":35,"user_id":11323245,"display_name":"sweet_summer_child"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686702470,"creation_date":1686699491,"question_id":76469325,"body_markdown":"I&#39;m trying to figure out cause of the GC running for 10-15 seconds at times. Most of the pause GCs are small but at times there&#39;s a sudden spike in pause GC time. I was trying to analyse GC logs.\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    2023-06-08T05:32:10.709+0000: 593903.305: [GC pause (G1 Evacuation Pause) (young), 8.9649309 secs]\r\n       [Parallel Time: 8963.5 ms, GC Workers: 4]\r\n          [GC Worker Start (ms): Min: 593903305.3, Avg: 593903306.2, Max: 593903308.9, Diff: 3.6]\r\n          [Ext Root Scanning (ms): Min: 0.0, Avg: 2.4, Max: 3.3, Diff: 3.2, Sum: 9.6]\r\n          [Update RS (ms): Min: 5.3, Avg: 5.6, Max: 6.0, Diff: 0.7, Sum: 22.3]\r\n             [Processed Buffers: Min: 9, Avg: 62.8, Max: 84, Diff: 75, Sum: 251]\r\n          [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]\r\n          [Code Root Scanning (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]\r\n          [Object Copy (ms): Min: 8854.5, Avg: 8904.6, Max: 8954.6, Diff: 100.1, Sum: 35618.3]\r\n          [Termination (ms): Min: 0.0, Avg: 49.9, Max: 100.4, Diff: 100.4, Sum: 199.8]\r\n             [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]\r\n          [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]\r\n          [GC Worker Total (ms): Min: 8959.9, Avg: 8962.5, Max: 8963.5, Diff: 3.6, Sum: 35850.2]\r\n          [GC Worker End (ms): Min: 593912268.7, Avg: 593912268.7, Max: 593912268.8, Diff: 0.1]\r\n       [Code Root Fixup: 0.0 ms]\r\n       [Code Root Purge: 0.0 ms]\r\n       [Clear CT: 0.1 ms]\r\n       [Other: 1.3 ms]\r\n          [Choose CSet: 0.0 ms]\r\n          [Ref Proc: 0.5 ms]\r\n          [Ref Enq: 0.0 ms]\r\n          [Redirty Cards: 0.1 ms]\r\n          [Humongous Register: 0.1 ms]\r\n          [Humongous Reclaim: 0.0 ms]\r\n          [Free CSet: 0.1 ms]\r\n       [Eden: 132.0M(132.0M)-&gt;0.0B(145.0M) Survivors: 21.0M-&gt;8192.0K Heap: 690.6M(3072.0M)-&gt;559.1M(3072.0M)]\r\n     [Times: user=0.27 sys=0.01, real=8.97 secs] \r\n    2023-06-08T05:32:19.674+0000: 593912.270: Total time for which application threads were stopped: 8.9664744 seconds, Stopping threads took: 0.0001051 seconds\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\nI can see here that the real GC time is significantly higher than user and sys times, can anyone help me figure out what the problem might be?","title":"How to understand cause of G1 GC running for too long","body":"<p>I'm trying to figure out cause of the GC running for 10-15 seconds at times. Most of the pause GCs are small but at times there's a sudden spike in pause GC time. I was trying to analyse GC logs.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>2023-06-08T05:32:10.709+0000: 593903.305: [GC pause (G1 Evacuation Pause) (young), 8.9649309 secs]\n   [Parallel Time: 8963.5 ms, GC Workers: 4]\n      [GC Worker Start (ms): Min: 593903305.3, Avg: 593903306.2, Max: 593903308.9, Diff: 3.6]\n      [Ext Root Scanning (ms): Min: 0.0, Avg: 2.4, Max: 3.3, Diff: 3.2, Sum: 9.6]\n      [Update RS (ms): Min: 5.3, Avg: 5.6, Max: 6.0, Diff: 0.7, Sum: 22.3]\n         [Processed Buffers: Min: 9, Avg: 62.8, Max: 84, Diff: 75, Sum: 251]\n      [Scan RS (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]\n      [Code Root Scanning (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.0]\n      [Object Copy (ms): Min: 8854.5, Avg: 8904.6, Max: 8954.6, Diff: 100.1, Sum: 35618.3]\n      [Termination (ms): Min: 0.0, Avg: 49.9, Max: 100.4, Diff: 100.4, Sum: 199.8]\n         [Termination Attempts: Min: 1, Avg: 1.0, Max: 1, Diff: 0, Sum: 4]\n      [GC Worker Other (ms): Min: 0.0, Avg: 0.0, Max: 0.0, Diff: 0.0, Sum: 0.1]\n      [GC Worker Total (ms): Min: 8959.9, Avg: 8962.5, Max: 8963.5, Diff: 3.6, Sum: 35850.2]\n      [GC Worker End (ms): Min: 593912268.7, Avg: 593912268.7, Max: 593912268.8, Diff: 0.1]\n   [Code Root Fixup: 0.0 ms]\n   [Code Root Purge: 0.0 ms]\n   [Clear CT: 0.1 ms]\n   [Other: 1.3 ms]\n      [Choose CSet: 0.0 ms]\n      [Ref Proc: 0.5 ms]\n      [Ref Enq: 0.0 ms]\n      [Redirty Cards: 0.1 ms]\n      [Humongous Register: 0.1 ms]\n      [Humongous Reclaim: 0.0 ms]\n      [Free CSet: 0.1 ms]\n   [Eden: 132.0M(132.0M)-&gt;0.0B(145.0M) Survivors: 21.0M-&gt;8192.0K Heap: 690.6M(3072.0M)-&gt;559.1M(3072.0M)]\n [Times: user=0.27 sys=0.01, real=8.97 secs] \n2023-06-08T05:32:19.674+0000: 593912.270: Total time for which application threads were stopped: 8.9664744 seconds, Stopping threads took: 0.0001051 seconds</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>I can see here that the real GC time is significantly higher than user and sys times, can anyone help me figure out what the problem might be?</p>\n"},{"tags":["java","reflection"],"answers":[{"comments":[{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":2,"creation_date":1416600585,"post_id":27069423,"comment_id":42651844,"body_markdown":"Shouldn&#39;t it be `getType` instead of `getClass`? If I am not mistaken `getClass` invoked on `Field` instance will return us `Field.class` which is definitely not an array. What we want to do is check if *type* of variable is array.","body":"Shouldn&#39;t it be <code>getType</code> instead of <code>getClass</code>? If I am not mistaken <code>getClass</code> invoked on <code>Field</code> instance will return us <code>Field.class</code> which is definitely not an array. What we want to do is check if <i>type</i> of variable is array."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1416600748,"creation_date":1416600395,"answer_id":27069423,"question_id":27069361,"body_markdown":"If I understand your question, you might use [`java.lang.reflect.Array`](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html) and something like\r\n\r\n\tif (field.getType().isArray()) { // &lt;-- should be getType(), thx @Pshemo\r\n\t\tObject array = field.get(obj);\r\n\t\tint len = Array.getLength(array);\r\n\t\tfor (int i = 0; i &lt; len; i++) {\r\n\t\t\tObject v = Array.get(array, i);\r\n\t\t\tSystem.out.println(v);\r\n\t\t}\r\n\t} // ...","title":"java going through array field without creating new instance","body":"<p>If I understand your question, you might use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Array.html\" rel=\"nofollow\"><code>java.lang.reflect.Array</code></a> and something like</p>\n\n<pre><code>if (field.getType().isArray()) { // &lt;-- should be getType(), thx @Pshemo\n    Object array = field.get(obj);\n    int len = Array.getLength(array);\n    for (int i = 0; i &lt; len; i++) {\n        Object v = Array.get(array, i);\n        System.out.println(v);\n    }\n} // ...\n</code></pre>\n"}],"owner":{"account_id":4512390,"reputation":4458,"user_id":3668129,"accept_rate":49,"display_name":"user3668129"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":27069423,"answer_count":1,"score":1,"last_activity_date":1686702457,"creation_date":1416600134,"question_id":27069361,"body_markdown":"I&#39;m trying to write a method which gets an `Object` and does some logic with the `Object`&#39;s fields.\r\n\r\nMy method looks like:\r\n\r\n&lt;!-- language-all: java --&gt;\r\n    public void exampleCast(Object obj) {\r\n    \tField[] fields = obj.getClass().getFields();\r\n    \tfor (Field field : fields) {\t\t\t\t\t\r\n    \t\tif (field.getClass().isArray()) {\r\n    \t\t\r\n    \t\t/*\r\n    \t\t\tHOW CAN I GO OVER THE ARRAY FIELDS , WITHOUT CREATING NEW INSATCNE ?\r\n    \t\t\tSOMETHING LIKE:\r\n    \t\t\tfor (int i = 0; i &lt; array.length; i++) {\r\n    \t\t\t   array[i] ...\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t*/\t\r\n    \t\t} else {\r\n    \t\t\t...\r\n    \t\t\t...\r\n    \t\t}\r\n    \t}\r\n    }\t\r\n\r\n\r\nAnd an example of objects:\r\n\r\n    class TBD1 {\r\n        public int x;\r\n        public int y;\r\n        public int[] arrInt = new int[10];\r\n        public byte[] arrByte = new byte[10];\r\n    }\r\n\r\nAnd the call to my method:\r\n\r\n    TBD1 tbd1 = new TBD1();\r\n    exampleCast(tbd1);\r\n\r\nIn my method, I don&#39;t know how can I get the array values without create new instance (using the `newInstance` method)\r\nIs it possible?  (please see the comment I wrote in my example)\r\n\r\nI have read those 2 websites:\r\n- http://jroller.com/eyallupu/entry/two_side_notes_about_arrays\r\n- http://tutorials.jenkov.com/java-reflection/arrays.html\r\n\r\n... but I didn&#39;t get what I wanted to.","title":"java going through array field without creating new instance","body":"<p>I'm trying to write a method which gets an <code>Object</code> and does some logic with the <code>Object</code>'s fields.</p>\n<p>My method looks like:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public void exampleCast(Object obj) {\n    Field[] fields = obj.getClass().getFields();\n    for (Field field : fields) {                    \n        if (field.getClass().isArray()) {\n        \n        /*\n            HOW CAN I GO OVER THE ARRAY FIELDS , WITHOUT CREATING NEW INSATCNE ?\n            SOMETHING LIKE:\n            for (int i = 0; i &lt; array.length; i++) {\n               array[i] ...\n            }\n            \n        */  \n        } else {\n            ...\n            ...\n        }\n    }\n}   \n</code></pre>\n<p>And an example of objects:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class TBD1 {\n    public int x;\n    public int y;\n    public int[] arrInt = new int[10];\n    public byte[] arrByte = new byte[10];\n}\n</code></pre>\n<p>And the call to my method:</p>\n<pre class=\"lang-java prettyprint-override\"><code>TBD1 tbd1 = new TBD1();\nexampleCast(tbd1);\n</code></pre>\n<p>In my method, I don't know how can I get the array values without create new instance (using the <code>newInstance</code> method)\nIs it possible?  (please see the comment I wrote in my example)</p>\n<p>I have read those 2 websites:</p>\n<ul>\n<li><a href=\"http://jroller.com/eyallupu/entry/two_side_notes_about_arrays\" rel=\"nofollow noreferrer\">http://jroller.com/eyallupu/entry/two_side_notes_about_arrays</a></li>\n<li><a href=\"http://tutorials.jenkov.com/java-reflection/arrays.html\" rel=\"nofollow noreferrer\">http://tutorials.jenkov.com/java-reflection/arrays.html</a></li>\n</ul>\n<p>... but I didn't get what I wanted to.</p>\n"},{"tags":["java","eclipse"],"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1683762203,"post_id":76223251,"comment_id":134417999,"body_markdown":"Similar: [*Why Eclipse 2018-12 says &quot;No JREs found&quot; in JDK-11?*](https://stackoverflow.com/q/54629793/642706)","body":"Similar: <a href=\"https://stackoverflow.com/q/54629793/642706\"><i>Why Eclipse 2018-12 says &quot;No JREs found&quot; in JDK-11?</i></a>"},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1683762644,"post_id":76223251,"comment_id":134418035,"body_markdown":"Don&#39;t specify the bin folder, try pointing to the root folder (that contains the bin folder).","body":"Don&#39;t specify the bin folder, try pointing to the root folder (that contains the bin folder)."},{"owner":{"account_id":22667771,"reputation":11,"user_id":16839875,"display_name":"Juancito1201"},"score":0,"creation_date":1683764286,"post_id":76223251,"comment_id":134418182,"body_markdown":"@MaartenBodewes When I pointed to &quot;C:\\Program Files\\Java\\jdk-20&quot; it gave me the same error message","body":"@MaartenBodewes When I pointed to &quot;C:\\Program Files\\Java\\jdk-20&quot; it gave me the same error message"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683767302,"post_id":76223251,"comment_id":134418426,"body_markdown":"Which search function? Please be more specific to describe the steps you are following.","body":"Which search function? Please be more specific to describe the steps you are following."},{"owner":{"account_id":22667771,"reputation":11,"user_id":16839875,"display_name":"Juancito1201"},"score":0,"creation_date":1683768850,"post_id":76223251,"comment_id":134418547,"body_markdown":"@aled I click on Properties &lt; Java Build Path &lt; Libraries &lt; Modulepath &lt; Edit &lt; Installed JREs &lt; Search","body":"@aled I click on Properties &lt; Java Build Path &lt; Libraries &lt; Modulepath &lt; Edit &lt; Installed JREs &lt; Search"},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1683769280,"post_id":76223251,"comment_id":134418596,"body_markdown":"Have you tried the solution suggested in the link that @BasilBourque shared?","body":"Have you tried the solution suggested in the link that @BasilBourque shared?"},{"owner":{"account_id":22667771,"reputation":11,"user_id":16839875,"display_name":"Juancito1201"},"score":0,"creation_date":1683769474,"post_id":76223251,"comment_id":134418617,"body_markdown":"I haven&#39;t, I will try and notify if it worked or not.  I mistook it for an automatic post as I&#39;m pretty new to this website.","body":"I haven&#39;t, I will try and notify if it worked or not.  I mistook it for an automatic post as I&#39;m pretty new to this website."},{"owner":{"account_id":22667771,"reputation":11,"user_id":16839875,"display_name":"Juancito1201"},"score":0,"creation_date":1683769943,"post_id":76223251,"comment_id":134418649,"body_markdown":"Yes, it worked. The solution was to use Properties &lt; Java Build Path &lt; Libraries &lt; Modulepath &lt; Edit &lt; Installed JREs &lt; Add and go to &quot;C:\\Program Files\\Java\\jdk-20&quot;, thank you.","body":"Yes, it worked. The solution was to use Properties &lt; Java Build Path &lt; Libraries &lt; Modulepath &lt; Edit &lt; Installed JREs &lt; Add and go to &quot;C:\\Program Files\\Java\\jdk-20&quot;, thank you."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1683776614,"post_id":76223251,"comment_id":134419291,"body_markdown":"Which version of Eclipse is it? One that was released when Java 20 was out?","body":"Which version of Eclipse is it? One that was released when Java 20 was out?"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1683789443,"post_id":76223251,"comment_id":134421014,"body_markdown":"Java 20 was released after the current Eclipse version 2023-03. So you need to install [Java 20 Support for Eclipse 2023-03 (4.27)](https://marketplace.eclipse.org/content/java-20-support-eclipse-2023-03-427) (in Eclipse via _Help &gt; Eclipse Marketplace..._). Java 20 has no long time support (LTS), which means it will become obsolete with the Java 21 release in September. As Java beginner, better use the Java 17 that is shipped with Eclipse.","body":"Java 20 was released after the current Eclipse version 2023-03. So you need to install <a href=\"https://marketplace.eclipse.org/content/java-20-support-eclipse-2023-03-427\" rel=\"nofollow noreferrer\">Java 20 Support for Eclipse 2023-03 (4.27)</a> (in Eclipse via <i>Help &gt; Eclipse Marketplace...</i>). Java 20 has no long time support (LTS), which means it will become obsolete with the Java 21 release in September. As Java beginner, better use the Java 17 that is shipped with Eclipse."}],"answers":[{"tags":[],"owner":{"account_id":16331633,"reputation":21,"user_id":13097800,"display_name":"PROX"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686702163,"creation_date":1686702163,"answer_id":76469435,"question_id":76223251,"body_markdown":"howlger was right. You need to download the Java 20 Support for Eclipse 2023-03 through MarketPlace in Eclipse, install it and then restart Eclipse, once did that you only have to change the configuration once you are creating a new project.\r\n\r\n 1. Go to Help -&gt; Eclipse MarketPlace\r\n 2. Search Java 20 Support for Eclipse 2023-03\r\n 3. Install\r\n 4. Let Eclipse Restart itself\r\n 5. Use create project to change the JavaSE and Java JDK\r\n 6. And you are ready to go\r\n\r\n","title":"How to install Java SE-20 in Eclipse?","body":"<p>howlger was right. You need to download the Java 20 Support for Eclipse 2023-03 through MarketPlace in Eclipse, install it and then restart Eclipse, once did that you only have to change the configuration once you are creating a new project.</p>\n<ol>\n<li>Go to Help -&gt; Eclipse MarketPlace</li>\n<li>Search Java 20 Support for Eclipse 2023-03</li>\n<li>Install</li>\n<li>Let Eclipse Restart itself</li>\n<li>Use create project to change the JavaSE and Java JDK</li>\n<li>And you are ready to go</li>\n</ol>\n"}],"owner":{"account_id":22667771,"reputation":11,"user_id":16839875,"display_name":"Juancito1201"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1805,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686702163,"creation_date":1683762109,"question_id":76223251,"body_markdown":"I&#39;m new to Java and I&#39;m using Eclipse for the first time. I installed JDK 20 manually, but Eclipse didn&#39;t find it.\r\n\r\nI&#39;ve tried:\r\n1- Installing Java SE-20 from the marketplace. JRE 20 is still unbound.\r\n2- Using the search function \r\n`(C:\\Program Files\\Java\\jdk-20\\bin)`\r\n\r\nand it says \r\n\r\n`No JREs found in C:\\Program Files\\Java\\jdk-20\\bin`\r\n\r\nHow would I solve this?","title":"How to install Java SE-20 in Eclipse?","body":"<p>I'm new to Java and I'm using Eclipse for the first time. I installed JDK 20 manually, but Eclipse didn't find it.</p>\n<p>I've tried:\n1- Installing Java SE-20 from the marketplace. JRE 20 is still unbound.\n2- Using the search function\n<code>(C:\\Program Files\\Java\\jdk-20\\bin)</code></p>\n<p>and it says</p>\n<p><code>No JREs found in C:\\Program Files\\Java\\jdk-20\\bin</code></p>\n<p>How would I solve this?</p>\n"},{"tags":["java","spring","mjpeg"],"owner":{"account_id":1449355,"reputation":140,"user_id":2941173,"display_name":"tommynicoletti"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":289,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1686702054,"creation_date":1570643945,"question_id":58309784,"body_markdown":"I need to expose a local Motion JPEG endpoint (ex. &quot;http://192.168.1.10/video.mjpg&quot;) passing from an endpoint in a RestController of my Application Server (jhipster gateway), because I need to gurantee grants and authorization to stream it.\r\n\r\nI already tried [this](https://stackoverflow.com/questions/41856005/spring-resttemplate-streaming-response-into-another-request) solution\r\n\r\n```java\r\n@GetMapping(&quot;/video&quot;)\r\n@Timed\r\npublic void stream(@RequestParam(name = &quot;url&quot;) String url, HttpServletResponse response) throws IOException {\r\n        log.debug(&quot;REST request to stream : {}&quot;, url);\r\n        response.setStatus(HttpStatus.OK.value());\r\n        response.setHeader(HttpHeaders.CONTENT_TYPE, &quot;multipart/x-mixed-replace&quot;);\r\n        response.setHeader(HttpHeaders.CACHE_CONTROL, &quot;no-cache&quot;);\r\n        response.setHeader(&quot;Pragma&quot;, &quot;no-cache&quot;);\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        restTemplate.execute(\r\n            url,\r\n            HttpMethod.GET,\r\n            (ClientHttpRequest requestCallback) -&gt; {},\r\n            responseExtractor -&gt; {\r\n                IOUtils.copy(responseExtractor.getBody(), response.getOutputStream());\r\n                return null;\r\n            });\r\n    }\r\n```\r\n\r\nBut it didn&#39;t work.\r\nAny suggestion?","title":"How to proxy internal mjpeg endpoint via RestController","body":"<p>I need to expose a local Motion JPEG endpoint (ex. \"<a href=\"http://192.168.1.10/video.mjpg\" rel=\"nofollow noreferrer\">http://192.168.1.10/video.mjpg</a>\") passing from an endpoint in a RestController of my Application Server (jhipster gateway), because I need to gurantee grants and authorization to stream it.</p>\n\n<p>I already tried <a href=\"https://stackoverflow.com/questions/41856005/spring-resttemplate-streaming-response-into-another-request\">this</a> solution</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(\"/video\")\n@Timed\npublic void stream(@RequestParam(name = \"url\") String url, HttpServletResponse response) throws IOException {\n        log.debug(\"REST request to stream : {}\", url);\n        response.setStatus(HttpStatus.OK.value());\n        response.setHeader(HttpHeaders.CONTENT_TYPE, \"multipart/x-mixed-replace\");\n        response.setHeader(HttpHeaders.CACHE_CONTROL, \"no-cache\");\n        response.setHeader(\"Pragma\", \"no-cache\");\n        RestTemplate restTemplate = new RestTemplate();\n        restTemplate.execute(\n            url,\n            HttpMethod.GET,\n            (ClientHttpRequest requestCallback) -&gt; {},\n            responseExtractor -&gt; {\n                IOUtils.copy(responseExtractor.getBody(), response.getOutputStream());\n                return null;\n            });\n    }\n</code></pre>\n\n<p>But it didn't work.\nAny suggestion?</p>\n"},{"tags":["java","mysql","multithreading","spring"],"comments":[{"owner":{"account_id":1051387,"reputation":14943,"user_id":1055241,"accept_rate":86,"display_name":"gprathour"},"score":0,"creation_date":1328339939,"post_id":9139128,"comment_id":11488041,"body_markdown":"You need to provide some source code of your program, then we can see what is going on there.","body":"You need to provide some source code of your program, then we can see what is going on there."},{"owner":{"account_id":334402,"reputation":1621,"user_id":660833,"accept_rate":51,"display_name":"Anupam Gupta"},"score":0,"creation_date":1328340669,"post_id":9139128,"comment_id":11488135,"body_markdown":"Hi GPS I am still trying to figure out which part of code is causing this thread interruption and what scenario is causing this interruption. This interruption is very sporadic.. I am not getting this error always..hence not sure about code will put the code as soon as i will figure out what code is throwing this exception","body":"Hi GPS I am still trying to figure out which part of code is causing this thread interruption and what scenario is causing this interruption. This interruption is very sporadic.. I am not getting this error always..hence not sure about code will put the code as soon as i will figure out what code is throwing this exception"}],"answers":[{"tags":[],"owner":{"account_id":372293,"reputation":180467,"user_id":721269,"accept_rate":100,"display_name":"David Schwartz"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1328339891,"creation_date":1328339891,"answer_id":9139139,"question_id":9139128,"body_markdown":"A thread cannot process an interrupt while it&#39;s sleeping. So you need to catch the exception when the thread comes out of sleep and then process the interrupt. The method is explained well in [this answer](https://stackoverflow.com/a/1024719/721269). Usually it looks like this:\r\n\r\n      try\r\n      {\r\n          Thread.sleep(whatever);\r\n      }\r\n      catch (InterruptedException e)\r\n      {\r\n           Thread.currentThread().interrupt(); // restore interrupted status\r\n      }\r\n","title":"a sleeping Thread is getting interrupted causing loss of connection to db","body":"<p>A thread cannot process an interrupt while it's sleeping. So you need to catch the exception when the thread comes out of sleep and then process the interrupt. The method is explained well in <a href=\"https://stackoverflow.com/a/1024719/721269\">this answer</a>. Usually it looks like this:</p>\n\n<pre><code>  try\n  {\n      Thread.sleep(whatever);\n  }\n  catch (InterruptedException e)\n  {\n       Thread.currentThread().interrupt(); // restore interrupted status\n  }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":334402,"reputation":1621,"user_id":660833,"accept_rate":51,"display_name":"Anupam Gupta"},"score":0,"creation_date":1328362707,"post_id":9139377,"comment_id":11491096,"body_markdown":"hi Eugene I have updated the question with run method and also updated my understanding ...can you plz help","body":"hi Eugene I have updated the question with run method and also updated my understanding ...can you plz help"}],"tags":[],"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1328342338,"creation_date":1328342338,"answer_id":9139377,"question_id":9139128,"body_markdown":"Are you throwing an interrupted Exception somewhere in your code may be to signal that a Thread should stop? Can you provide the code for this method:\r\n\r\n    com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run","title":"a sleeping Thread is getting interrupted causing loss of connection to db","body":"<p>Are you throwing an interrupted Exception somewhere in your code may be to signal that a Thread should stop? Can you provide the code for this method:</p>\n\n<pre><code>com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3319340,"reputation":884,"user_id":2790894,"accept_rate":0,"display_name":"Milan Sheth"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1583262009,"creation_date":1583262009,"answer_id":60513899,"question_id":9139128,"body_markdown":"Let&#39;s understand with your code:\r\n\r\n    while (true) {\r\n      // Your logic code\r\n    }\r\n\r\nWhat does it do? Nothing, it just spins the CPU endlessly. Can we terminate it? Not in Java. It will only stop when the entire **JVM stops**, when you hit **Ctrl-C**. There is no way in Java to terminate a thread unless the thread exits by itself. That’s the principle we have to have in mind, and everything else will just be obvious.\r\n\r\nSo, how do we stop a thread when we need it to stop?\r\n\r\nHere is how it is designed in Java. There is a flag in every thread that we can set from the outside. And the thread may check it occasionally and stop its execution. Voluntarily! Here is how:\r\n\r\n    Thread loop = new Thread(\r\n      new Runnable() {\r\n        @Override\r\n        public void run() {\r\n          while (true) {\r\n            if (Thread.interrupted()) {\r\n              break;\r\n            }\r\n            // Your logic code\r\n          }\r\n        }\r\n      }\r\n    );\r\n    loop.start();\r\n\r\n","title":"a sleeping Thread is getting interrupted causing loss of connection to db","body":"<p>Let's understand with your code:</p>\n\n<pre><code>while (true) {\n  // Your logic code\n}\n</code></pre>\n\n<p>What does it do? Nothing, it just spins the CPU endlessly. Can we terminate it? Not in Java. It will only stop when the entire <strong>JVM stops</strong>, when you hit <strong>Ctrl-C</strong>. There is no way in Java to terminate a thread unless the thread exits by itself. That’s the principle we have to have in mind, and everything else will just be obvious.</p>\n\n<p>So, how do we stop a thread when we need it to stop?</p>\n\n<p>Here is how it is designed in Java. There is a flag in every thread that we can set from the outside. And the thread may check it occasionally and stop its execution. Voluntarily! Here is how:</p>\n\n<pre><code>Thread loop = new Thread(\n  new Runnable() {\n    @Override\n    public void run() {\n      while (true) {\n        if (Thread.interrupted()) {\n          break;\n        }\n        // Your logic code\n      }\n    }\n  }\n);\nloop.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20928407,"reputation":1,"user_id":15375340,"display_name":"Hritik Shinde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686701467,"creation_date":1686642467,"answer_id":76462721,"question_id":9139128,"body_markdown":"You may check whether the h2 database lock file survived the server shutdown. The file’s name is `&lt;keycloak_dir&gt;/data/h2/keycloakdb.lock.db`.\r\n\r\nRemove the file and start the server.","title":"a sleeping Thread is getting interrupted causing loss of connection to db","body":"<p>You may check whether the h2 database lock file survived the server shutdown. The file’s name is <code>&lt;keycloak_dir&gt;/data/h2/keycloakdb.lock.db</code>.</p>\n<p>Remove the file and start the server.</p>\n"}],"owner":{"account_id":334402,"reputation":1621,"user_id":660833,"accept_rate":51,"display_name":"Anupam Gupta"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44902,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":9139139,"answer_count":4,"score":4,"last_activity_date":1686701467,"creation_date":1328339701,"question_id":9139128,"body_markdown":"I am new to Multi-threading in JAVA and am facing a problem. I am getting an exception which says that \r\n\r\n&gt; java.lang.InterruptedException: sleep interrupted\r\n\r\nthis follows a loss to connection to db. I am clueless regarding what is going wrong there. It looks like after thread is interrupted, they are being re-initialized but are not getting started.. \r\n\r\nfollowing is my run method\r\n\r\n    public void run() {\r\n            LOG.info(&quot;Started&quot;);\r\n            running = true;\r\n            while (running) {\r\n                Lock readLock = readWriteLock.readLock();\r\n                readLock.lock();\r\n                long loopDelay;\r\n                try {\r\n                    loopDelay = executor.execute();\r\n                    if (loopDelay &gt; 0) {\r\n                        Thread.sleep(loopDelay);\r\n                    }\r\n                } catch (Exception e) {\r\n                    LOG.info(&quot;Executor Interrupted&quot;, e);\r\n                    break;\r\n                } finally {\r\n                    readLock.unlock();\r\n                }\r\n            }\r\n            LOG.info(&quot;Stopped&quot;);\r\n        }\r\n\r\n**possible solution:** after going through the link suggested by david I feel the problem here is the same mentioned by David i.e **&quot;A thread cannot process an interrupt while it&#39;s sleeping.&quot;** so to fix this I should handle the Interrrupted Exception in a better way i.e as suggesteb by david.\r\n\r\nFollowing is my stack trace.. Can Some one please help me in understanding the issue\r\n\r\n        2012-02-03 10:38:09,260   150696427 [taskDiscoveryCallExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\r\n        java.lang.InterruptedException: sleep interrupted\r\n        \tat java.lang.Thread.sleep(Native Method)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\r\n        2012-02-03 10:38:09,261   150696428 [taskDiscoveryCallExecutorThread] INFO  (TaskExecutorThread.java:95) - Stopped\r\n        2012-02-03 10:38:09,261   150696428 [main] INFO  (TaskExecutorThread.java:69) - shutdown\r\n        2012-02-03 10:38:09,262   150696429 [taskRuleExecutorThread] ERROR (JDBCExceptionReporter.java:101) - Cannot get a connection, general error\r\n        2012-02-03 10:38:09,262   150696429 [taskRuleExecutorThread] ERROR (JDBCExceptionReporter.java:101) - Cannot get a connection, general error\r\n        2012-02-03 10:38:09,294   150696461 [taskRuleExecutorThread] DEBUG (EventScope.java:107) - Destroy scope for customer c02c5ac7-8dee-42aa-b344-ff7f7f6894f5\r\n        2012-02-03 10:38:09,294   150696461 [taskRuleExecutorThread] ERROR (TaskExecutor.java:205) - Catch exception\r\n        org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; uncategorized SQLException for SQL [???]; SQL state [null]; error code [0]; Cannot get a connection, general error; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, general error\r\n        \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)\r\n        \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\r\n        \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\r\n        \tat org.springframework.orm.hibernate3.HibernateAccessor.convertJdbcAccessException(HibernateAccessor.java:424)\r\n        \tat org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:410)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1046)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1039)\r\n        \tat com.xyz.abc.web.dao.RuleDao.loadActive(RuleDao.java:53)\r\n        \tat com.xyz.abc.web.service.RuleServiceImpl.createRulesByTemplate(RuleServiceImpl.java:39)\r\n        \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n        \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n        \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n        \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\r\n        \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\r\n        \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\r\n        \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\r\n        \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\r\n        \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\r\n        \tat $Proxy60.createRulesByTemplate(Unknown Source)\r\n        \tat com.xyz.abc.rules.RulesInvoker.checkIsInitialized(RulesInvoker.java:97)\r\n        \tat com.xyz.abc.rules.RulesInvoker.invokeForEvent(RulesInvoker.java:73)\r\n        \tat com.xyz.abc.mdp.RabbitMqMessageProcessor.processMessage(RabbitMqMessageProcessor.java:53)\r\n        \tat sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)\r\n        \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n        \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n        \tat org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:186)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.invokeMethod(TaskExecutor.java:156)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.invokeBean(TaskExecutor.java:139)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.doExecute(TaskExecutor.java:116)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.executeTask(TaskExecutor.java:104)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.access$200(TaskExecutor.java:39)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor$1.doInTransaction(TaskExecutor.java:85)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor$1.doInTransaction(TaskExecutor.java:79)\r\n        \tat org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutor.execute(TaskExecutor.java:79)\r\n        \tat com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:84)\r\n        Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, general error\r\n        \tat org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:118)\r\n        \tat org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\r\n        \tat org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)\r\n        \tat org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\r\n        \tat org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\r\n        \tat org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)\r\n        \tat org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1596)\r\n        \tat org.hibernate.loader.Loader.doQuery(Loader.java:717)\r\n        \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)\r\n        \tat org.hibernate.loader.Loader.doList(Loader.java:2294)\r\n        \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)\r\n        \tat org.hibernate.loader.Loader.list(Loader.java:2167)\r\n        \tat org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)\r\n        \tat org.hibernate.impl.SessionImpl.list(SessionImpl.java:1706)\r\n        \tat org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate$36.doInHibernate(HibernateTemplate.java:1056)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate$36.doInHibernate(HibernateTemplate.java:1)\r\n        \tat org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)\r\n        \t... 33 more\r\n        Caused by: java.lang.InterruptedException\r\n        \tat java.lang.Object.wait(Native Method)\r\n        \tat java.lang.Object.wait(Object.java:485)\r\n        \tat org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)\r\n        \tat org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)\r\n        \t... 50 more\r\n        2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutor.java:93) - org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\r\n    2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\r\n    java.lang.InterruptedException: sleep interrupted\r\n    \tat java.lang.Thread.sleep(Native Method)\r\n    \tat com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\r\n    2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutorThread.java:95) - Stopped\r\n    2012-02-03 10:38:09,400   150696567 [main] INFO  (TaskExecutorThread.java:69) - shutdown\r\n    2012-02-03 10:38:09,400   150696567 [taskParatureExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\r\n    java.lang.InterruptedException: sleep interrupted\r\n    \tat java.lang.Thread.sleep(Native Method)\r\n    \tat com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\r\n    2012-02-03 10:38:09,400   150696567 [taskParatureExecutorThread] INFO  \r\n\r\n    (TaskExecutorThread.java:95) - Stopped\r\n    2012-02-03 10:38:09,400   150696567 [main] INFO  (TaskExecutorThread.java:69) - shutdown","title":"a sleeping Thread is getting interrupted causing loss of connection to db","body":"<p>I am new to Multi-threading in JAVA and am facing a problem. I am getting an exception which says that </p>\n\n<blockquote>\n  <p>java.lang.InterruptedException: sleep interrupted</p>\n</blockquote>\n\n<p>this follows a loss to connection to db. I am clueless regarding what is going wrong there. It looks like after thread is interrupted, they are being re-initialized but are not getting started.. </p>\n\n<p>following is my run method</p>\n\n<pre><code>public void run() {\n        LOG.info(\"Started\");\n        running = true;\n        while (running) {\n            Lock readLock = readWriteLock.readLock();\n            readLock.lock();\n            long loopDelay;\n            try {\n                loopDelay = executor.execute();\n                if (loopDelay &gt; 0) {\n                    Thread.sleep(loopDelay);\n                }\n            } catch (Exception e) {\n                LOG.info(\"Executor Interrupted\", e);\n                break;\n            } finally {\n                readLock.unlock();\n            }\n        }\n        LOG.info(\"Stopped\");\n    }\n</code></pre>\n\n<p><strong>possible solution:</strong> after going through the link suggested by david I feel the problem here is the same mentioned by David i.e <strong>\"A thread cannot process an interrupt while it's sleeping.\"</strong> so to fix this I should handle the Interrrupted Exception in a better way i.e as suggesteb by david.</p>\n\n<p>Following is my stack trace.. Can Some one please help me in understanding the issue</p>\n\n<pre><code>    2012-02-03 10:38:09,260   150696427 [taskDiscoveryCallExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\n    java.lang.InterruptedException: sleep interrupted\n        at java.lang.Thread.sleep(Native Method)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\n    2012-02-03 10:38:09,261   150696428 [taskDiscoveryCallExecutorThread] INFO  (TaskExecutorThread.java:95) - Stopped\n    2012-02-03 10:38:09,261   150696428 [main] INFO  (TaskExecutorThread.java:69) - shutdown\n    2012-02-03 10:38:09,262   150696429 [taskRuleExecutorThread] ERROR (JDBCExceptionReporter.java:101) - Cannot get a connection, general error\n    2012-02-03 10:38:09,262   150696429 [taskRuleExecutorThread] ERROR (JDBCExceptionReporter.java:101) - Cannot get a connection, general error\n    2012-02-03 10:38:09,294   150696461 [taskRuleExecutorThread] DEBUG (EventScope.java:107) - Destroy scope for customer c02c5ac7-8dee-42aa-b344-ff7f7f6894f5\n    2012-02-03 10:38:09,294   150696461 [taskRuleExecutorThread] ERROR (TaskExecutor.java:205) - Catch exception\n    org.springframework.jdbc.UncategorizedSQLException: Hibernate operation: Cannot open connection; uncategorized SQLException for SQL [???]; SQL state [null]; error code [0]; Cannot get a connection, general error; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, general error\n        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)\n        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)\n        at org.springframework.orm.hibernate3.HibernateAccessor.convertJdbcAccessException(HibernateAccessor.java:424)\n        at org.springframework.orm.hibernate3.HibernateAccessor.convertHibernateAccessException(HibernateAccessor.java:410)\n        at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:411)\n        at org.springframework.orm.hibernate3.HibernateTemplate.executeWithNativeSession(HibernateTemplate.java:374)\n        at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1046)\n        at org.springframework.orm.hibernate3.HibernateTemplate.findByCriteria(HibernateTemplate.java:1039)\n        at com.xyz.abc.web.dao.RuleDao.loadActive(RuleDao.java:53)\n        at com.xyz.abc.web.service.RuleServiceImpl.createRulesByTemplate(RuleServiceImpl.java:39)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:309)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)\n        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)\n        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)\n        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)\n        at $Proxy60.createRulesByTemplate(Unknown Source)\n        at com.xyz.abc.rules.RulesInvoker.checkIsInitialized(RulesInvoker.java:97)\n        at com.xyz.abc.rules.RulesInvoker.invokeForEvent(RulesInvoker.java:73)\n        at com.xyz.abc.mdp.RabbitMqMessageProcessor.processMessage(RabbitMqMessageProcessor.java:53)\n        at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.springframework.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:186)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.invokeMethod(TaskExecutor.java:156)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.invokeBean(TaskExecutor.java:139)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.doExecute(TaskExecutor.java:116)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.executeTask(TaskExecutor.java:104)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.access$200(TaskExecutor.java:39)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor$1.doInTransaction(TaskExecutor.java:85)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor$1.doInTransaction(TaskExecutor.java:79)\n        at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutor.execute(TaskExecutor.java:79)\n        at com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:84)\n    Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot get a connection, general error\n        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:118)\n        at org.apache.commons.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)\n        at org.springframework.orm.hibernate3.LocalDataSourceConnectionProvider.getConnection(LocalDataSourceConnectionProvider.java:81)\n        at org.hibernate.jdbc.ConnectionManager.openConnection(ConnectionManager.java:446)\n        at org.hibernate.jdbc.ConnectionManager.getConnection(ConnectionManager.java:167)\n        at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)\n        at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1596)\n        at org.hibernate.loader.Loader.doQuery(Loader.java:717)\n        at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:270)\n        at org.hibernate.loader.Loader.doList(Loader.java:2294)\n        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2172)\n        at org.hibernate.loader.Loader.list(Loader.java:2167)\n        at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)\n        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1706)\n        at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)\n        at org.springframework.orm.hibernate3.HibernateTemplate$36.doInHibernate(HibernateTemplate.java:1056)\n        at org.springframework.orm.hibernate3.HibernateTemplate$36.doInHibernate(HibernateTemplate.java:1)\n        at org.springframework.orm.hibernate3.HibernateTemplate.doExecute(HibernateTemplate.java:406)\n        ... 33 more\n    Caused by: java.lang.InterruptedException\n        at java.lang.Object.wait(Native Method)\n        at java.lang.Object.wait(Object.java:485)\n        at org.apache.commons.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1104)\n        at org.apache.commons.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)\n        ... 50 more\n    2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutor.java:93) - org.springframework.transaction.UnexpectedRollbackException: Transaction rolled back because it has been marked as rollback-only\n2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\njava.lang.InterruptedException: sleep interrupted\n    at java.lang.Thread.sleep(Native Method)\n    at com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\n2012-02-03 10:38:09,399   150696566 [taskRuleExecutorThread] INFO  (TaskExecutorThread.java:95) - Stopped\n2012-02-03 10:38:09,400   150696567 [main] INFO  (TaskExecutorThread.java:69) - shutdown\n2012-02-03 10:38:09,400   150696567 [taskParatureExecutorThread] INFO  (TaskExecutorThread.java:89) - Executor Interrupted\njava.lang.InterruptedException: sleep interrupted\n    at java.lang.Thread.sleep(Native Method)\n    at com.xyz.abc.backgroundtask.impl.TaskExecutorThread.run(TaskExecutorThread.java:86)\n2012-02-03 10:38:09,400   150696567 [taskParatureExecutorThread] INFO  \n\n(TaskExecutorThread.java:95) - Stopped\n2012-02-03 10:38:09,400   150696567 [main] INFO  (TaskExecutorThread.java:69) - shutdown\n</code></pre>\n"},{"tags":["java","java-bytecode-asm"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1686645725,"post_id":76463005,"comment_id":134823834,"body_markdown":"I think this would be easier to do if you use the visitor API... Anyway, I don&#39;t get where you are stuck at. What do you want as output? Overwrite the old class file with the new one?","body":"I think this would be easier to do if you use the visitor API... Anyway, I don&#39;t get where you are stuck at. What do you want as output? Overwrite the old class file with the new one?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686645822,"post_id":76463005,"comment_id":134823857,"body_markdown":"There’s no sense in trying to calculate `mergedMethod.maxStack` and `mergedMethod.maxLocals` when you use `COMPUTE_MAXS`. When this code contains branches, this will not be enough; you would have to use `COMPUTE_FRAMES` then (which still implies calculating max). Further, this approach won’t work with appending to the end, as you’re placing the code after the last `return` or `throw` which has no effect. While putting a complete method’s code at the beginning effectively replaces the entire code with the other method.","body":"There’s no sense in trying to calculate <code>mergedMethod.maxStack</code> and <code>mergedMethod.maxLocals</code> when you use <code>COMPUTE_MAXS</code>. When this code contains branches, this will not be enough; you would have to use <code>COMPUTE_FRAMES</code> then (which still implies calculating max). Further, this approach won’t work with appending to the end, as you’re placing the code after the last <code>return</code> or <code>throw</code> which has no effect. While putting a complete method’s code at the beginning effectively replaces the entire code with the other method."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1686646050,"post_id":76463005,"comment_id":134823917,"body_markdown":"There is no way to “write the bytecode back to the original method” in the Reflection API. You can a) use the modified code to produce a new runtime class b) overwrite the persistent class files, to affect the next run, c) write a Java Agent using the Instrumentation API, or d) write a debugger using the debugging API.","body":"There is no way to “write the bytecode back to the original method” in the Reflection API. You can a) use the modified code to produce a new runtime class b) overwrite the persistent class files, to affect the next run, c) write a Java Agent using the Instrumentation API, or d) write a debugger using the debugging API."}],"owner":{"account_id":25716295,"reputation":46,"user_id":19474029,"display_name":"Qweru"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686701196,"creation_date":1686644714,"question_id":76463005,"body_markdown":"I am trying to make something similar to Mixins (from the Minecraft mod loader Fabric)\r\nand what I made so far seems to work (doesn&#39;t throw any errors, I don&#39;t know how else to check), but I got stuck now that I need to write the bytecode back to the original method.\r\n\r\nHow do I do this?\r\n\r\nMy code; \r\n```\r\n/**\r\n     * @param method1 The base method\r\n     * @param method2 The code that should be added\r\n     * @param descriptor The descriptor for both of the methods\r\n     * @param access_level The access level for both of the methods (private, public, etc.)\r\n     * @param pos The position to inject to\r\n     * @param method1Class The base methods source class\r\n     * @param method The base method as a Method object\r\n     * @throws Exception when something went wrong\r\n     */\r\n    public static void mixin(MethodNode method1, MethodNode method2, String descriptor, int access_level, String pos, Class&lt;?&gt; method1Class, Method method) throws Exception {\r\n        // Create a new method with merged characteristics\r\n        MethodNode mergedMethod = new MethodNode(\r\n                access_level,\r\n                &quot;mergedMethod&quot;,\r\n                descriptor,\r\n                null,\r\n                null\r\n        );\r\n\r\n        // Merge the instructions from both methods into the merged method\r\n        switch (pos){\r\n            case &quot;HEAD&quot; -&gt; {\r\n                mergedMethod.instructions.add(method2.instructions);\r\n                mergedMethod.instructions.add(method1.instructions);\r\n            }\r\n            case &quot;TAIL&quot; -&gt; {\r\n                mergedMethod.instructions.add(method1.instructions);\r\n                mergedMethod.instructions.add(method2.instructions);\r\n            }\r\n            default -&gt; {\r\n                throw new IllegalArgumentException(&quot;Invalid mixin point provided!&quot;);\r\n            }\r\n        }\r\n\r\n        // Recalculate the stack size and max locals\r\n        mergedMethod.maxStack = Math.max(method1.maxStack, method2.maxStack);\r\n        mergedMethod.maxLocals = Math.max(method1.maxLocals, method2.maxLocals);\r\n\r\n        // Generate the bytecode for the merged method\r\n        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);\r\n        mergedMethod.accept(cw);\r\n\r\n        byte[] bytecode = cw.toByteArray();\r\n\r\n        method.setAccessible(true);\r\n    }\r\n```","title":"Write bytecode to a method with ASM in java","body":"<p>I am trying to make something similar to Mixins (from the Minecraft mod loader Fabric)\nand what I made so far seems to work (doesn't throw any errors, I don't know how else to check), but I got stuck now that I need to write the bytecode back to the original method.</p>\n<p>How do I do this?</p>\n<p>My code;</p>\n<pre><code>/**\n     * @param method1 The base method\n     * @param method2 The code that should be added\n     * @param descriptor The descriptor for both of the methods\n     * @param access_level The access level for both of the methods (private, public, etc.)\n     * @param pos The position to inject to\n     * @param method1Class The base methods source class\n     * @param method The base method as a Method object\n     * @throws Exception when something went wrong\n     */\n    public static void mixin(MethodNode method1, MethodNode method2, String descriptor, int access_level, String pos, Class&lt;?&gt; method1Class, Method method) throws Exception {\n        // Create a new method with merged characteristics\n        MethodNode mergedMethod = new MethodNode(\n                access_level,\n                &quot;mergedMethod&quot;,\n                descriptor,\n                null,\n                null\n        );\n\n        // Merge the instructions from both methods into the merged method\n        switch (pos){\n            case &quot;HEAD&quot; -&gt; {\n                mergedMethod.instructions.add(method2.instructions);\n                mergedMethod.instructions.add(method1.instructions);\n            }\n            case &quot;TAIL&quot; -&gt; {\n                mergedMethod.instructions.add(method1.instructions);\n                mergedMethod.instructions.add(method2.instructions);\n            }\n            default -&gt; {\n                throw new IllegalArgumentException(&quot;Invalid mixin point provided!&quot;);\n            }\n        }\n\n        // Recalculate the stack size and max locals\n        mergedMethod.maxStack = Math.max(method1.maxStack, method2.maxStack);\n        mergedMethod.maxLocals = Math.max(method1.maxLocals, method2.maxLocals);\n\n        // Generate the bytecode for the merged method\n        ClassWriter cw = new ClassWriter(ClassWriter.COMPUTE_MAXS);\n        mergedMethod.accept(cw);\n\n        byte[] bytecode = cw.toByteArray();\n\n        method.setAccessible(true);\n    }\n</code></pre>\n"},{"tags":["java","minecraft","g1gc"],"answers":[{"comments":[{"owner":{"account_id":26855220,"reputation":1,"user_id":20439621,"display_name":"Pedro Pagani"},"score":0,"creation_date":1677533131,"post_id":75573293,"comment_id":133353261,"body_markdown":"Hey stephen, Im gonna be taking a look and adapting to what you said + the suggested articles, thanks.","body":"Hey stephen, Im gonna be taking a look and adapting to what you said + the suggested articles, thanks."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686700172,"creation_date":1677427977,"answer_id":75573293,"question_id":75573017,"body_markdown":"If it was me, I would get rid of all of these options:\r\n\r\n    -XX:G1NewSizePercent=40 -XX:G1MaxNewSizePercent=50 \r\n    -XX:G1HeapRegionSize=16M -XX:G1ReservePercent=15 \r\n    -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 \r\n    -XX:InitiatingHeapOccupancyPercent=20\r\n    -XX:G1MixedGCLiveThresholdPercent=90\r\n    -XX:G1RSetUpdatingPauseTimePercent=5 \r\n    -XX:SurvivorRatio=32 -XX:MaxTenuringThreshold=1\r\n\r\nThen tell the G1GC what pause time to aim for, and let it work things out for itself.\r\n\r\nIn particular, the options that set sizes or ratios for the new space will override G1GC&#39;s self-tuning that is intended to meet your specified pause time goals.  The new space collection is stop-the-world, so a collection of a large new space is going to *inevitably* lead to long pauses.\r\n\r\nFor more advice, read:\r\n\r\n  - [Garbage First Garbage Collector Tuning](https://www.oracle.com/technical-resources/articles/java/g1gc.html) by Monica Beckwith\r\n  - [10 - Garbage-First Garbage Collector Tuning](https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm)","title":"Application freezing on g1 old run","body":"<p>If it was me, I would get rid of all of these options:</p>\n<pre><code>-XX:G1NewSizePercent=40 -XX:G1MaxNewSizePercent=50 \n-XX:G1HeapRegionSize=16M -XX:G1ReservePercent=15 \n-XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 \n-XX:InitiatingHeapOccupancyPercent=20\n-XX:G1MixedGCLiveThresholdPercent=90\n-XX:G1RSetUpdatingPauseTimePercent=5 \n-XX:SurvivorRatio=32 -XX:MaxTenuringThreshold=1\n</code></pre>\n<p>Then tell the G1GC what pause time to aim for, and let it work things out for itself.</p>\n<p>In particular, the options that set sizes or ratios for the new space will override G1GC's self-tuning that is intended to meet your specified pause time goals.  The new space collection is stop-the-world, so a collection of a large new space is going to <em>inevitably</em> lead to long pauses.</p>\n<p>For more advice, read:</p>\n<ul>\n<li><a href=\"https://www.oracle.com/technical-resources/articles/java/g1gc.html\" rel=\"nofollow noreferrer\">Garbage First Garbage Collector Tuning</a> by Monica Beckwith</li>\n<li><a href=\"https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector-tuning.htm\" rel=\"nofollow noreferrer\">10 - Garbage-First Garbage Collector Tuning</a></li>\n</ul>\n"}],"owner":{"account_id":26855220,"reputation":1,"user_id":20439621,"display_name":"Pedro Pagani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":96,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1678130634,"accepted_answer_id":75573293,"answer_count":1,"score":-2,"last_activity_date":1686700172,"creation_date":1677425389,"question_id":75573017,"body_markdown":"we currently run DonutSMP.net, a minecraft server that handles concurrently more than 4000 players online every day and it runs a survival gamemode, chunk-intensive, currently we have been experiencing some G1 OLD issues, every time the g1 old runs the server freezes, and mainly we would avoid the G1 old running since its not a cheap process at all.\r\nIs there anything I can do to investigate what would be causing it to run, not only once but its consitent.\r\n\r\nHere is the startup flags of all the applications, we run about 30 mc boxes &amp; all of them seem to be having the same issue.\r\n\r\n-Xms16G -Xmx16G -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=40 -XX:G1MaxNewSizePercent=50 -XX:G1HeapRegionSize=16M -XX:G1ReservePercent=15 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=20 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 --add-modules=jdk.incubator.vector -Dusing.aikars.flags=https://mcflags.emc.gs/ -Daikars.new.flags=true\r\n\r\nI have heap dumps of the most intensive memory usage moments, I just dont know exactly what to be looking for.\r\n\r\nI already tried analyzing the heapdump but there doesnt seem to be a memory leak that&#39;s visible fast, the instances arent really crashing for now. \r\nIve already tried reducing memory usage by lowering the view distance etc, so far some things havent worked.\r\nI have also tried to change hte startup flag parameters, but if they are the cause, i havent achieved the good values one yet.\r\nI am expecting the G1 old not to run because every time it does the server freezes, these instances run about 90 players survival and everything is really tunnned tweaked, it shouldnt be happening.","title":"Application freezing on g1 old run","body":"<p>we currently run DonutSMP.net, a minecraft server that handles concurrently more than 4000 players online every day and it runs a survival gamemode, chunk-intensive, currently we have been experiencing some G1 OLD issues, every time the g1 old runs the server freezes, and mainly we would avoid the G1 old running since its not a cheap process at all.\nIs there anything I can do to investigate what would be causing it to run, not only once but its consitent.</p>\n<p>Here is the startup flags of all the applications, we run about 30 mc boxes &amp; all of them seem to be having the same issue.</p>\n<p>-Xms16G -Xmx16G -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:MaxGCPauseMillis=200 -XX:+UnlockExperimentalVMOptions -XX:+DisableExplicitGC -XX:+AlwaysPreTouch -XX:G1NewSizePercent=40 -XX:G1MaxNewSizePercent=50 -XX:G1HeapRegionSize=16M -XX:G1ReservePercent=15 -XX:G1HeapWastePercent=5 -XX:G1MixedGCCountTarget=4 -XX:InitiatingHeapOccupancyPercent=20 -XX:G1MixedGCLiveThresholdPercent=90 -XX:G1RSetUpdatingPauseTimePercent=5 -XX:SurvivorRatio=32 -XX:+PerfDisableSharedMem -XX:MaxTenuringThreshold=1 --add-modules=jdk.incubator.vector -Dusing.aikars.flags=https://mcflags.emc.gs/ -Daikars.new.flags=true</p>\n<p>I have heap dumps of the most intensive memory usage moments, I just dont know exactly what to be looking for.</p>\n<p>I already tried analyzing the heapdump but there doesnt seem to be a memory leak that's visible fast, the instances arent really crashing for now.\nIve already tried reducing memory usage by lowering the view distance etc, so far some things havent worked.\nI have also tried to change hte startup flag parameters, but if they are the cause, i havent achieved the good values one yet.\nI am expecting the G1 old not to run because every time it does the server freezes, these instances run about 90 players survival and everything is really tunnned tweaked, it shouldnt be happening.</p>\n"},{"tags":["java","spring-boot","api"],"answers":[{"comments":[{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1686697389,"post_id":76469076,"comment_id":134834330,"body_markdown":"If I experience inconsistent results where sometimes you get all values from `doc.select(&quot;tr&quot;)`, while other times you get 0 values, it could be due to dynamic loading of the table data using JavaScript. In such cases, you can try executing the JavaScript code on the page to ensure that the necessary data is loaded before parsing the HTML. This is my issue. Can you revise your answer if possible?","body":"If I experience inconsistent results where sometimes you get all values from <code>doc.select(&quot;tr&quot;)</code>, while other times you get 0 values, it could be due to dynamic loading of the table data using JavaScript. In such cases, you can try executing the JavaScript code on the page to ensure that the necessary data is loaded before parsing the HTML. This is my issue. Can you revise your answer if possible?"},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1686698282,"post_id":76469076,"comment_id":134834406,"body_markdown":"@S.N i&#39;ve updated the answer, please check if it helps.","body":"@S.N i&#39;ve updated the answer, please check if it helps."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1686700206,"post_id":76469076,"comment_id":134834531,"body_markdown":"I also used it but nothing changed I still got the same issue.","body":"I also used it but nothing changed I still got the same issue."}],"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686698237,"creation_date":1686695218,"answer_id":76469076,"question_id":76468904,"body_markdown":"Well the exception clearly states the reason of 500: `IndexOutOfBoundsException` in `EarthQuakeDataParser.getEarthQuakeDataFromAfad`, line 93.\r\n\r\nAccording to code above that line, your `Jsoup.connect(Constants.AFAD_LINK).get()` fetches a response with no `tr` html tag in it.\r\n\r\nIf requested page uses javascript to load data dynamically, you might need [HTML Unit][1] library to get page as it looks in a browser. [Here][2] is a brief example.\r\n\r\n\r\n  [1]: https://htmlunit.sourceforge.io\r\n  [2]: https://riptutorial.com/jsoup/example/16274/parsing-javascript-generated-page-with-jsoup-and-htmunit","title":"Spring Boot Jsoup Get values from website (load values through javascript (Dynamic Loading)) - Sometimes 500 error , Sometimes 200 Ok","body":"<p>Well the exception clearly states the reason of 500: <code>IndexOutOfBoundsException</code> in <code>EarthQuakeDataParser.getEarthQuakeDataFromAfad</code>, line 93.</p>\n<p>According to code above that line, your <code>Jsoup.connect(Constants.AFAD_LINK).get()</code> fetches a response with no <code>tr</code> html tag in it.</p>\n<p>If requested page uses javascript to load data dynamically, you might need <a href=\"https://htmlunit.sourceforge.io\" rel=\"nofollow noreferrer\">HTML Unit</a> library to get page as it looks in a browser. <a href=\"https://riptutorial.com/jsoup/example/16274/parsing-javascript-generated-page-with-jsoup-and-htmunit\" rel=\"nofollow noreferrer\">Here</a> is a brief example.</p>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686700161,"creation_date":1686692550,"question_id":76468904,"body_markdown":"I created a spring boot web API to get earthquake values from the website.\r\n\r\nI have a problem in `getEarthQuakeDataFromAfad` method. After sending a request to `http://localhost:8080/api/v1/earthquakes/afad` , I got sometimes two results (500 and 200) shown below . It could be due to network latency or other factors but I couldn&#39;t solve it.\r\n\r\n**500 Internal Error**\r\n    \r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-06-13T21:35:37.408+00:00&quot;,\r\n        &quot;status&quot;: 500,\r\n        &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n        &quot;path&quot;: &quot;/api/v1/earthquakes/afad&quot;\r\n    }\r\n    \r\n    java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\r\n    \tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100) ~[na:na]\r\n    \tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106) ~[na:na]\r\n    \tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302) ~[na:na]\r\n    \tat java.base/java.util.Objects.checkIndex(Objects.java:385) ~[na:na]\r\n    \tat java.base/java.util.ArrayList.remove(ArrayList.java:504) ~[na:na]\r\n    \tat com.deprem.depremapi.utils.EarthQuakeDataParser.getEarthQuakeDataFromAfad(EarthQuakeDataParser.java:93) ~[classes/:na]\r\n    \tat com.deprem.depremapi.service.EarthQuakeService.getEarthQuakeDataFromAfad(EarthQuakeService.java:31) ~[classes/:na]\r\n    \tat com.deprem.depremapi.api.EarthquakeController.getAllEarthquakesForAfad(EarthquakeController.java:39)\r\n\r\n**200 OK**\r\n\r\n    [\r\n        {\r\n            &quot;id&quot;: 1,\r\n            &quot;date&quot;: &quot;2023-06-14 00:10:03&quot;,\r\n            &quot;timestamp&quot;: -1231544328,\r\n            &quot;latitude&quot;: 38.421,\r\n            &quot;longitude&quot;: 36.639,\r\n            &quot;depth&quot;: 7.0,\r\n            &quot;size&quot;: {\r\n                &quot;md&quot;: 0.0,\r\n                &quot;ml&quot;: 2.8,\r\n                &quot;mw&quot;: 0.0\r\n            },\r\n            &quot;location&quot;: &quot;Localtion Value&quot;,\r\n            &quot;afadId&quot;: &quot;590282&quot;,\r\n            &quot;attribute&quot;: &quot;ML&quot;\r\n        },\r\n        ...\r\n    \r\n    }\r\n\r\nHere is the method shown below\r\n\r\n    public List&lt;EarthquakeAfad&gt; getEarthQuakeDataFromAfad() throws IOException, ParseException {\r\n    \r\n            log.info(&quot;EarthQuakeDataParser | getEarthQuakeDataFromAfad is working&quot;);\r\n    \r\n            List&lt;EarthquakeAfad&gt; earthquakeList = new ArrayList&lt;&gt;();\r\n    \r\n            Document doc = Jsoup.connect(Constants.AFAD_LINK).get();\r\n    \r\n            Elements trs = doc.select(&quot;tr&quot;);\r\n    \r\n            trs.remove(0);\r\n    \r\n            log.info(&quot;EarthQuakeDataParser | getEarthQuakeDataFromAfad | trs size : &quot; + trs.size());\r\n    \r\n            for (int i = 0; i &lt; trs.size(); i++) {\r\n    \r\n                Element tr = trs.get(i);\r\n                Elements tds = tr.select(&quot;td&quot;);\r\n    \r\n                String earthquakeType = tds.get(4).text();\r\n    \r\n                EarthquakeAfad earthquake = EarthquakeAfad.builder()\r\n                        .id((i+1))\r\n                        .date(tds.get(0).text())\r\n                        .timestamp((int) LocalDateTime.parse(tds.get(0).text(), DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;))\r\n                                .atZone(ZoneId.systemDefault()).toInstant().toEpochMilli())\r\n                        .latitude(Double.parseDouble(tds.get(1).text()))\r\n                        .longitude(Double.parseDouble(tds.get(2).text()))\r\n                        .depth(Double.parseDouble(tds.get(3).text()))\r\n                        .size(Size.builder()\r\n                                .md(earthquakeType.equals(&quot;MD&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\r\n                                .ml(earthquakeType.equals(&quot;ML&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\r\n                                .mw(earthquakeType.equals(&quot;MW&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\r\n                                .build())\r\n                        .location(tds.get(6).text())\r\n                        .afadId(tds.get(7).text())\r\n                        .attribute(earthquakeType)\r\n                        .build();\r\n    \r\n                earthquakeList.add(earthquake);\r\n            }\r\n    \r\n            return earthquakeList;\r\n        }\r\n\r\nHow can I fix the issue?\r\n\r\n**Editted**\r\n\r\nI also use httputil but it still got the same error.\r\n\r\nHere is the dependency\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;net.sourceforge.htmlunit&lt;/groupId&gt;\r\n        &lt;artifactId&gt;htmlunit&lt;/artifactId&gt;\r\n        &lt;version&gt;2.57.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nHere is the code shown below\r\n\r\n    // Create a WebClient instance (headless browser)\r\n    WebClient webClient = new WebClient(BrowserVersion.CHROME);\r\n\r\n    // Enable JavaScript execution\r\n    webClient.getOptions().setJavaScriptEnabled(true);\r\n\r\n    // Disable CSS to improve performance (optional)\r\n    webClient.getOptions().setCssEnabled(false);\r\n\r\n    // Load the AFAD link in HtmlUnit\r\n    HtmlPage page = webClient.getPage(Constants.AFAD_LINK);\r\n\r\n    // Wait for the page to finish loading JavaScript and rendering\r\n    webClient.waitForBackgroundJavaScript(5000);\r\n\r\n    // Get the updated HTML content from HtmlUnit\r\n    String html = page.asXml();\r\n\r\n    // Close the WebClient to free up resources\r\n    webClient.close();\r\n\r\n    // Parse the HTML using Jsoup\r\n    Document doc = Jsoup.parse(html);\r\n\r\n    Elements trs = doc.select(&quot;tr&quot;);\r\n\r\nHere is the link : [Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/DepremApi","title":"Spring Boot Jsoup Get values from website (load values through javascript (Dynamic Loading)) - Sometimes 500 error , Sometimes 200 Ok","body":"<p>I created a spring boot web API to get earthquake values from the website.</p>\n<p>I have a problem in <code>getEarthQuakeDataFromAfad</code> method. After sending a request to <code>http://localhost:8080/api/v1/earthquakes/afad</code> , I got sometimes two results (500 and 200) shown below . It could be due to network latency or other factors but I couldn't solve it.</p>\n<p><strong>500 Internal Error</strong></p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-06-13T21:35:37.408+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;path&quot;: &quot;/api/v1/earthquakes/afad&quot;\n}\n\njava.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:100) ~[na:na]\n    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106) ~[na:na]\n    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302) ~[na:na]\n    at java.base/java.util.Objects.checkIndex(Objects.java:385) ~[na:na]\n    at java.base/java.util.ArrayList.remove(ArrayList.java:504) ~[na:na]\n    at com.deprem.depremapi.utils.EarthQuakeDataParser.getEarthQuakeDataFromAfad(EarthQuakeDataParser.java:93) ~[classes/:na]\n    at com.deprem.depremapi.service.EarthQuakeService.getEarthQuakeDataFromAfad(EarthQuakeService.java:31) ~[classes/:na]\n    at com.deprem.depremapi.api.EarthquakeController.getAllEarthquakesForAfad(EarthquakeController.java:39)\n</code></pre>\n<p><strong>200 OK</strong></p>\n<pre><code>[\n    {\n        &quot;id&quot;: 1,\n        &quot;date&quot;: &quot;2023-06-14 00:10:03&quot;,\n        &quot;timestamp&quot;: -1231544328,\n        &quot;latitude&quot;: 38.421,\n        &quot;longitude&quot;: 36.639,\n        &quot;depth&quot;: 7.0,\n        &quot;size&quot;: {\n            &quot;md&quot;: 0.0,\n            &quot;ml&quot;: 2.8,\n            &quot;mw&quot;: 0.0\n        },\n        &quot;location&quot;: &quot;Localtion Value&quot;,\n        &quot;afadId&quot;: &quot;590282&quot;,\n        &quot;attribute&quot;: &quot;ML&quot;\n    },\n    ...\n\n}\n</code></pre>\n<p>Here is the method shown below</p>\n<pre><code>public List&lt;EarthquakeAfad&gt; getEarthQuakeDataFromAfad() throws IOException, ParseException {\n\n        log.info(&quot;EarthQuakeDataParser | getEarthQuakeDataFromAfad is working&quot;);\n\n        List&lt;EarthquakeAfad&gt; earthquakeList = new ArrayList&lt;&gt;();\n\n        Document doc = Jsoup.connect(Constants.AFAD_LINK).get();\n\n        Elements trs = doc.select(&quot;tr&quot;);\n\n        trs.remove(0);\n\n        log.info(&quot;EarthQuakeDataParser | getEarthQuakeDataFromAfad | trs size : &quot; + trs.size());\n\n        for (int i = 0; i &lt; trs.size(); i++) {\n\n            Element tr = trs.get(i);\n            Elements tds = tr.select(&quot;td&quot;);\n\n            String earthquakeType = tds.get(4).text();\n\n            EarthquakeAfad earthquake = EarthquakeAfad.builder()\n                    .id((i+1))\n                    .date(tds.get(0).text())\n                    .timestamp((int) LocalDateTime.parse(tds.get(0).text(), DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss&quot;))\n                            .atZone(ZoneId.systemDefault()).toInstant().toEpochMilli())\n                    .latitude(Double.parseDouble(tds.get(1).text()))\n                    .longitude(Double.parseDouble(tds.get(2).text()))\n                    .depth(Double.parseDouble(tds.get(3).text()))\n                    .size(Size.builder()\n                            .md(earthquakeType.equals(&quot;MD&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\n                            .ml(earthquakeType.equals(&quot;ML&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\n                            .mw(earthquakeType.equals(&quot;MW&quot;) ? Double.parseDouble(tds.get(5).text()) : 0)\n                            .build())\n                    .location(tds.get(6).text())\n                    .afadId(tds.get(7).text())\n                    .attribute(earthquakeType)\n                    .build();\n\n            earthquakeList.add(earthquake);\n        }\n\n        return earthquakeList;\n    }\n</code></pre>\n<p>How can I fix the issue?</p>\n<p><strong>Editted</strong></p>\n<p>I also use httputil but it still got the same error.</p>\n<p>Here is the dependency</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;net.sourceforge.htmlunit&lt;/groupId&gt;\n    &lt;artifactId&gt;htmlunit&lt;/artifactId&gt;\n    &lt;version&gt;2.57.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Here is the code shown below</p>\n<pre><code>// Create a WebClient instance (headless browser)\nWebClient webClient = new WebClient(BrowserVersion.CHROME);\n\n// Enable JavaScript execution\nwebClient.getOptions().setJavaScriptEnabled(true);\n\n// Disable CSS to improve performance (optional)\nwebClient.getOptions().setCssEnabled(false);\n\n// Load the AFAD link in HtmlUnit\nHtmlPage page = webClient.getPage(Constants.AFAD_LINK);\n\n// Wait for the page to finish loading JavaScript and rendering\nwebClient.waitForBackgroundJavaScript(5000);\n\n// Get the updated HTML content from HtmlUnit\nString html = page.asXml();\n\n// Close the WebClient to free up resources\nwebClient.close();\n\n// Parse the HTML using Jsoup\nDocument doc = Jsoup.parse(html);\n\nElements trs = doc.select(&quot;tr&quot;);\n</code></pre>\n<p>Here is the link : <a href=\"https://github.com/Rapter1990/DepremApi\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","android","jsp","pdf","webview"],"owner":{"account_id":28815798,"reputation":1,"user_id":22069455,"display_name":"Jhilik Kundu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686696351,"creation_date":1686696351,"question_id":76469138,"body_markdown":"In my JSP file - \r\n\r\n```\r\nwindows.open(&quot;pdflink.pdf&quot;,&quot;_self&quot;);\r\n```\r\n\r\nI am calling the JSP file inside webview.After performing some operation,there will be a button.On button click it should open the above url.Does not matter inside webview or not.\r\nI have tried modifying the with **Google PDF viewer** in .jsp and .java file both.But it is not working.\r\n\r\nAny solution on this?\r\nI am thinking of getting out of the webview and then open the pdf. But as a newbie don&#39;t have much idea.\r\nA little help with link/code is much much appreciated.\r\n\r\nTried using Google pdf viewer.But not sure about windows.open() method.","title":"Opening outside pdf link inside Android webview(Java)","body":"<p>In my JSP file -</p>\n<pre><code>windows.open(&quot;pdflink.pdf&quot;,&quot;_self&quot;);\n</code></pre>\n<p>I am calling the JSP file inside webview.After performing some operation,there will be a button.On button click it should open the above url.Does not matter inside webview or not.\nI have tried modifying the with <strong>Google PDF viewer</strong> in .jsp and .java file both.But it is not working.</p>\n<p>Any solution on this?\nI am thinking of getting out of the webview and then open the pdf. But as a newbie don't have much idea.\nA little help with link/code is much much appreciated.</p>\n<p>Tried using Google pdf viewer.But not sure about windows.open() method.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1686685320,"post_id":76468221,"comment_id":134832579,"body_markdown":"Have you tried to multiply and modulo by 100?","body":"Have you tried to multiply and modulo by 100?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1686685379,"post_id":76468221,"comment_id":134832592,"body_markdown":"Or, read the data as a string then check `endsWith(&quot;.20&quot;)` for example?","body":"Or, read the data as a string then check <code>endsWith(&quot;.20&quot;)</code> for example?"},{"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"score":2,"creation_date":1686685380,"post_id":76468221,"comment_id":134832593,"body_markdown":"Normally, do/while is used for that, not for.  You could also just read the input as String.","body":"Normally, do/while is used for that, not for.  You could also just read the input as String."}],"answers":[{"comments":[{"owner":{"account_id":953149,"reputation":177303,"user_id":978917,"accept_rate":86,"display_name":"ruakh"},"score":1,"creation_date":1686686454,"post_id":76468283,"comment_id":134832772,"body_markdown":"This code has compile-errors and basic bugs. And even if those were fixed . . . this is really the wrong approach. This check should be performed before converting the input to a `double`, rather than trying to convert the `double` back to a String to perform the check, because the conversion to `double` is a lossy one: the values of interest can&#39;t be represented exactly as floating-point numbers, and also, floating-point numbers don&#39;t care about trailing zeros (since those don&#39;t affect the numeric value).","body":"This code has compile-errors and basic bugs. And even if those were fixed . . . this is really the wrong approach. This check should be performed before converting the input to a <code>double</code>, rather than trying to convert the <code>double</code> back to a String to perform the check, because the conversion to <code>double</code> is a lossy one: the values of interest can&#39;t be represented exactly as floating-point numbers, and also, floating-point numbers don&#39;t care about trailing zeros (since those don&#39;t affect the numeric value)."}],"tags":[],"owner":{"account_id":27653278,"reputation":395,"user_id":21107707,"display_name":"vs07"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1686685953,"creation_date":1686685953,"answer_id":76468283,"question_id":76468221,"body_markdown":"You convert the decimal to a String.\r\n\r\n```java\r\nSystem.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\r\ndouble x = input.nextDouble();\r\nString x_str = String.valueOf(x);\r\nString x_last3digs = x.substring(len(x_str)-3);\r\nboolean xPos = x &gt; 0;\r\nboolean x20 = x_last3digs.equals(&quot;.20&quot;);\r\nboolean x45 = x_last3digs.equals(&quot;.45&quot;);\r\n```\r\n\r\nTo make this loop until you get a valid answer, do this: \r\n\r\n```java\r\ndo {\r\n    double x = input.nextDouble();\r\n    String x_str = String.valueOf(x);\r\n    String x_last3digs = x.substring(len(x_str)-3);\r\n    boolean xPos = x &gt; 0;\r\n    boolean x20 = x_last3digs.equals(&quot;.20&quot;);\r\n    boolean x45 = x_last3digs.equals(&quot;.45&quot;);\r\n} while (!x20 &amp;&amp; !x45)","title":"How to prompt the user for a number that ends in a specific decimal?","body":"<p>You convert the decimal to a String.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\ndouble x = input.nextDouble();\nString x_str = String.valueOf(x);\nString x_last3digs = x.substring(len(x_str)-3);\nboolean xPos = x &gt; 0;\nboolean x20 = x_last3digs.equals(&quot;.20&quot;);\nboolean x45 = x_last3digs.equals(&quot;.45&quot;);\n</code></pre>\n<p>To make this loop until you get a valid answer, do this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>do {\n    double x = input.nextDouble();\n    String x_str = String.valueOf(x);\n    String x_last3digs = x.substring(len(x_str)-3);\n    boolean xPos = x &gt; 0;\n    boolean x20 = x_last3digs.equals(&quot;.20&quot;);\n    boolean x45 = x_last3digs.equals(&quot;.45&quot;);\n} while (!x20 &amp;&amp; !x45)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686694231,"post_id":76468386,"comment_id":134833962,"body_markdown":"Definitely test `String`s, not `double`s, yes. But `if ((string.indexOf(&#39;-&#39;) &lt; 0) &amp;&amp; (string.endsWith(&quot;.20&quot;) || string.endsWith(&quot;.45&quot;))`","body":"Definitely test <code>String</code>s, not <code>double</code>s, yes. But <code>if ((string.indexOf(&#39;-&#39;) &lt; 0) &amp;&amp; (string.endsWith(&quot;.20&quot;) || string.endsWith(&quot;.45&quot;))</code>"}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686695636,"creation_date":1686686849,"answer_id":76468386,"question_id":76468221,"body_markdown":"Instead of capturing the input as a numeric value, utilize the _String_ object.\r\n\r\nThe _[String#endsWith](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#endsWith(java.lang.String))_ method will allow you to equate a suffix value.  \r\n\r\nAnd, the _[Double#parseDouble](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Double.html#parseDouble(java.lang.String))_ will return the _double_ value, of a given _String_ value.\r\n\r\n```java\r\nSystem.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\r\nString string = input.nextLine();\r\nif (string.endsWith(&quot;.20&quot;) || string.endsWith(&quot;.45&quot;)) {\r\n    double x = Double.parseDouble(string);\r\n    \r\n}\r\n```","title":"How to prompt the user for a number that ends in a specific decimal?","body":"<p>Instead of capturing the input as a numeric value, utilize the <em>String</em> object.</p>\n<p>The <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#endsWith(java.lang.String)\" rel=\"nofollow noreferrer\">String#endsWith</a></em> method will allow you to equate a suffix value.</p>\n<p>And, the <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Double.html#parseDouble(java.lang.String)\" rel=\"nofollow noreferrer\">Double#parseDouble</a></em> will return the <em>double</em> value, of a given <em>String</em> value.</p>\n<pre class=\"lang-java prettyprint-override\"><code>System.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\nString string = input.nextLine();\nif (string.endsWith(&quot;.20&quot;) || string.endsWith(&quot;.45&quot;)) {\n    double x = Double.parseDouble(string);\n    \n}\n</code></pre>\n"}],"owner":{"account_id":28815086,"reputation":1,"user_id":22068896,"display_name":"Qurqoise"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1686695636,"creation_date":1686685235,"question_id":76468221,"body_markdown":"I need an input that ends in .20 or .45, and is also positive. Until the user enters a value that satisfies those conditions, it will keep prompting for a value. I know I need a for loop, but how do I write that specific decimal condition?\r\n\r\n\r\n        System.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\r\n        double x = input.nextDouble();\r\n        boolean xPos = x&gt;0;\r\n        boolean x20 = // This is what I don&#39;t understand","title":"How to prompt the user for a number that ends in a specific decimal?","body":"<p>I need an input that ends in .20 or .45, and is also positive. Until the user enters a value that satisfies those conditions, it will keep prompting for a value. I know I need a for loop, but how do I write that specific decimal condition?</p>\n<pre><code>    System.out.println(&quot;Enter a positive value ending in .20 or .45)&quot;);\n    double x = input.nextDouble();\n    boolean xPos = x&gt;0;\n    boolean x20 = // This is what I don't understand\n</code></pre>\n"},{"tags":["java","eclipse","maven","java-11","annotation-processing"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1686605497,"post_id":76460037,"comment_id":134819290,"body_markdown":"Why have you change `&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;`? Keep the defaults. Also why using soo much spring framework... why not directly using spring boot and packaging to WAR file... etc.?","body":"Why have you change <code>&lt;sourceDirectory&gt;src&lt;&#47;sourceDirectory&gt;</code>? Keep the defaults. Also why using soo much spring framework... why not directly using spring boot and packaging to WAR file... etc.?"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1686619707,"post_id":76460037,"comment_id":134820718,"body_markdown":"Hmm, what version of Eclipse was this? And of Maven? And the M2Eclipse plug-ins?","body":"Hmm, what version of Eclipse was this? And of Maven? And the M2Eclipse plug-ins?"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":2,"creation_date":1686637269,"post_id":76460037,"comment_id":134822248,"body_markdown":"You know that Java 17 supports multi line strings directly in code? This is called text blocks. I would suggest refactor your code to these instead.","body":"You know that Java 17 supports multi line strings directly in code? This is called text blocks. I would suggest refactor your code to these instead."},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":0,"creation_date":1686639159,"post_id":76460037,"comment_id":134822569,"body_markdown":"@Thorbj&#248;rnRavnAndersen this is great news, I don&#39;t know if we are able to refactor, but I would absolutely consider it!","body":"@Thorbj&#248;rnRavnAndersen this is great news, I don&#39;t know if we are able to refactor, but I would absolutely consider it!"},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":0,"creation_date":1686639183,"post_id":76460037,"comment_id":134822576,"body_markdown":"@nitind thanks for your notice, I&#39;m updating the question with versions.","body":"@nitind thanks for your notice, I&#39;m updating the question with versions."},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":0,"creation_date":1686639619,"post_id":76460037,"comment_id":134822659,"body_markdown":"@khmarbaise thanks for your tips, this project has a long history and was started when SpringBoot did not exist. To be honest we don&#39;t need an embedded application server so I don&#39;t know how much advantages will bring a migration to Boot. BTW I think this is a useful discussion but a bit offtopic, because for sure annotations processing is not spring dependent.","body":"@khmarbaise thanks for your tips, this project has a long history and was started when SpringBoot did not exist. To be honest we don&#39;t need an embedded application server so I don&#39;t know how much advantages will bring a migration to Boot. BTW I think this is a useful discussion but a bit offtopic, because for sure annotations processing is not spring dependent."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":3,"creation_date":1686641888,"post_id":76460037,"comment_id":134823100,"body_markdown":"Annotation processors are not supposed to modify the source code. The standard API doesn’t offer such features. Hence, this annotation processor can only work by accessing compiler internals which can change between versions.","body":"Annotation processors are not supposed to modify the source code. The standard API doesn’t offer such features. Hence, this annotation processor can only work by accessing compiler internals which can change between versions."},{"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"score":0,"creation_date":1686655726,"post_id":76460037,"comment_id":134825996,"body_markdown":"Finally I could refactor to java native multi line string. I was faster than find a solution. Thanks everybody","body":"Finally I could refactor to java native multi line string. I was faster than find a solution. Thanks everybody"}],"answers":[{"tags":[],"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686695327,"creation_date":1686661128,"answer_id":76465210,"question_id":76460037,"body_markdown":"Java 17 supports multi line strings directly in code (so-called *text blocks*). \r\n\r\nInstead of making some ancient hack work again, just refactor to modern Java.","title":"Why annotation processor doesn&#39;t work with Maven and java11?","body":"<p>Java 17 supports multi line strings directly in code (so-called <em>text blocks</em>).</p>\n<p>Instead of making some ancient hack work again, just refactor to modern Java.</p>\n"}],"owner":{"account_id":460510,"reputation":9305,"user_id":861646,"accept_rate":54,"display_name":"Tobia"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76465210,"answer_count":1,"score":0,"last_activity_date":1686695327,"creation_date":1686600929,"question_id":76460037,"body_markdown":"I&#39;m migrating a Java webapp from Java8 to Java17.\r\nThis project uses this very nice solution to embed strings (ex. SQL queries) in constanst:\r\nhttps://github.com/adrianwalker/multiline-string  \r\nThis library requires the annotation processor.\r\n\r\nWith the old version I could run &quot;mvn clean install&quot; to get the war file of my application, this process correctly processed annotations. I had just to add the library in the pom dependencies.\r\n\r\nNow using java17 the annotation doesn&#39;t work. Then I tried to use in my Eclipse IDE and here the compilation doesn&#39;t work too.  \r\n\r\nThen I tried to downgrade to Java11 and I could start the project from Eclipse, setting the library as annotation processor in java compile option of Eclipse.  \r\nFinally I tried the maven install, it completed successfully but the annotations are not processed.\r\n\r\nThis is my pom.xml\r\n\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;groupId&gt;MyApp&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;MyApp&lt;/artifactId&gt;\r\n    \t&lt;version&gt;1.1.0&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;build&gt;\r\n    \t\t&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    \t\t&lt;finalName&gt;ROOT&lt;/finalName&gt;\r\n    \t\t&lt;resources&gt;\r\n    \t\t\t&lt;resource&gt;\r\n    \t\t\t\t&lt;directory&gt;src&lt;/directory&gt;\r\n    \t\t\t\t&lt;includes&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/*.so&lt;/include&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/*.dll&lt;/include&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/*.xml&lt;/include&gt;\r\n    \t\t\t\t\t&lt;include&gt;**/*.jrxml&lt;/include&gt;\r\n    \t\t\t&lt;/includes&gt;\r\n    \t\t\t&lt;/resource&gt;\r\n    \t\t&lt;/resources&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t        &lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t\t\t  &lt;configuration&gt;\r\n    \t\t\t\t\t&lt;source&gt;11&lt;/source&gt;\r\n    \t\t\t\t\t&lt;target&gt;11&lt;/target&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\r\n    \t\t\t    &lt;version&gt;3.3.1&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;\r\n    \t\t\t\t    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\r\n    \t\t\t    &lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.5.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jna&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.2.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.1.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.6.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.60&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.13&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.7.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-net&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-net&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-context&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.11.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.11.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.11.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-web&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.9&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-io&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-io&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;commons-codec&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.11&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.60&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.2&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;commons-text&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.validation&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;validation-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.0.1.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.2.Final&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.barcode4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;barcode4j&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.zxing&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;javase&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.3.3&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.10&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.lyncode&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jtwig-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;3.1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.activation&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;activation&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;1.1.1&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;8.5.38&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;5.1.15&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.3.0&lt;/version&gt;\r\n    \t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;junit&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;4.12&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;json-path&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.4.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.adrianwalker&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;multiline-string&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;0.1.2&lt;/version&gt;\r\n    \t\t    &lt;scope&gt;system&lt;/scope&gt;\r\n    \t        &lt;systemPath&gt;${projectPath}\\WebContent\\WEB-INF\\lib\\multilineo-string-0.1.2b.jar&lt;/systemPath&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t   &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;reactor-core&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.5.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;1.1.7&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.w3c&lt;/groupId&gt;\r\n    \t\t    &lt;artifactId&gt;dom&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;2.3.0-jaxb-1.0.6&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\t\t\r\n            &lt;dependency&gt;\r\n    \t\t    &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n    \t        &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\r\n    \t\t    &lt;version&gt;3.0.4&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    &lt;/project&gt;\r\n\r\nI also tried to add this option in maven compilter plugin settings of pom.xml\r\n \r\n\r\n    &lt;configuration&gt;\r\n              &lt;annotationProcessors&gt;\r\n                &lt;annotationProcessor&gt;\r\n                  org.adrianwalker.multilinestring.MultilineProcessor&lt;/annotationProcessor&gt;\r\n              &lt;/annotationProcessors&gt;\r\n      &lt;/configuration&gt;\r\n\r\nI cannot understand why Eclipse can compile and run the application with annotations, it can also **export** valid ROOT.war, but Maven ignores (without errors) completely the annotations.\r\n\r\nDo you have any idea why maven doesnt run the annotation processor?  \r\nDo you know how can I get the eclipse command called when I export WAR file from a project?\r\n\r\nEDIT\r\n\r\nThese are the versions:\r\nApache Maven 3.8.7 \r\nJava version: 17.0.7\r\nEclipse Version: 2023-03 (4.27.0)\r\nM2E Maven Integration for Eclipse: 2.2.1.20230307-1553","title":"Why annotation processor doesn&#39;t work with Maven and java11?","body":"<p>I'm migrating a Java webapp from Java8 to Java17.\nThis project uses this very nice solution to embed strings (ex. SQL queries) in constanst:\n<a href=\"https://github.com/adrianwalker/multiline-string\" rel=\"nofollow noreferrer\">https://github.com/adrianwalker/multiline-string</a><br />\nThis library requires the annotation processor.</p>\n<p>With the old version I could run &quot;mvn clean install&quot; to get the war file of my application, this process correctly processed annotations. I had just to add the library in the pom dependencies.</p>\n<p>Now using java17 the annotation doesn't work. Then I tried to use in my Eclipse IDE and here the compilation doesn't work too.</p>\n<p>Then I tried to downgrade to Java11 and I could start the project from Eclipse, setting the library as annotation processor in java compile option of Eclipse.<br />\nFinally I tried the maven install, it completed successfully but the annotations are not processed.</p>\n<p>This is my pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;MyApp&lt;/groupId&gt;\n    &lt;artifactId&gt;MyApp&lt;/artifactId&gt;\n    &lt;version&gt;1.1.0&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n        &lt;finalName&gt;ROOT&lt;/finalName&gt;\n        &lt;resources&gt;\n            &lt;resource&gt;\n                &lt;directory&gt;src&lt;/directory&gt;\n                &lt;includes&gt;\n                    &lt;include&gt;**/*.so&lt;/include&gt;\n                    &lt;include&gt;**/*.dll&lt;/include&gt;\n                    &lt;include&gt;**/*.xml&lt;/include&gt;\n                    &lt;include&gt;**/*.jrxml&lt;/include&gt;\n            &lt;/includes&gt;\n            &lt;/resource&gt;\n        &lt;/resources&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                  &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                  &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.3.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;warSourceDirectory&gt;WebContent&lt;/warSourceDirectory&gt;\n                    &lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mariadb.jdbc&lt;/groupId&gt;\n            &lt;artifactId&gt;mariadb-java-client&lt;/artifactId&gt;\n            &lt;version&gt;2.5.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.java.dev.jna&lt;/groupId&gt;\n            &lt;artifactId&gt;jna&lt;/artifactId&gt;\n            &lt;version&gt;5.2.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-websocket&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-messaging&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n            &lt;version&gt;6.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n            &lt;version&gt;1.6.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcprov-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.60&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.pdfbox&lt;/groupId&gt;\n            &lt;artifactId&gt;pdfbox&lt;/artifactId&gt;\n            &lt;version&gt;2.0.13&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports&lt;/artifactId&gt;\n            &lt;version&gt;6.7.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-net&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-net&lt;/artifactId&gt;\n            &lt;version&gt;3.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.11.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-web&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n            &lt;version&gt;6.0.9&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-io&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-codec&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;\n            &lt;version&gt;1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bouncycastle&lt;/groupId&gt;\n            &lt;artifactId&gt;bcpkix-jdk15on&lt;/artifactId&gt;\n            &lt;version&gt;1.60&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n            &lt;version&gt;4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n            &lt;version&gt;1.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.validation&lt;/groupId&gt;\n            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.1.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;6.0.2.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.barcode4j&lt;/groupId&gt;\n            &lt;artifactId&gt;barcode4j&lt;/artifactId&gt;\n            &lt;version&gt;2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.zxing&lt;/groupId&gt;\n            &lt;artifactId&gt;javase&lt;/artifactId&gt;\n            &lt;version&gt;3.3.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.xmlgraphics&lt;/groupId&gt;\n            &lt;artifactId&gt;batik-bridge&lt;/artifactId&gt;\n            &lt;version&gt;1.10&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;net.sf.jasperreports&lt;/groupId&gt;\n            &lt;artifactId&gt;jasperreports-fonts&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.lyncode&lt;/groupId&gt;\n            &lt;artifactId&gt;jtwig-core&lt;/artifactId&gt;\n            &lt;version&gt;3.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.activation&lt;/groupId&gt;\n            &lt;artifactId&gt;activation&lt;/artifactId&gt;\n            &lt;version&gt;1.1.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.tomcat&lt;/groupId&gt;\n            &lt;artifactId&gt;tomcat-jdbc&lt;/artifactId&gt;\n            &lt;version&gt;8.5.38&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;version&gt;5.1.15&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.sun.xml.ws&lt;/groupId&gt;\n            &lt;artifactId&gt;jaxws-ri&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;version&gt;4.12&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.jayway.jsonpath&lt;/groupId&gt;\n            &lt;artifactId&gt;json-path&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.adrianwalker&lt;/groupId&gt;\n            &lt;artifactId&gt;multiline-string&lt;/artifactId&gt;\n            &lt;version&gt;0.1.2&lt;/version&gt;\n            &lt;scope&gt;system&lt;/scope&gt;\n            &lt;systemPath&gt;${projectPath}\\WebContent\\WEB-INF\\lib\\multilineo-string-0.1.2b.jar&lt;/systemPath&gt;\n        &lt;/dependency&gt;\n       &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-core&lt;/artifactId&gt;\n            &lt;version&gt;3.5.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor.netty&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-netty&lt;/artifactId&gt;\n            &lt;version&gt;1.1.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.w3c&lt;/groupId&gt;\n            &lt;artifactId&gt;dom&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0-jaxb-1.0.6&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n            &lt;version&gt;3.0.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I also tried to add this option in maven compilter plugin settings of pom.xml</p>\n<pre><code>&lt;configuration&gt;\n          &lt;annotationProcessors&gt;\n            &lt;annotationProcessor&gt;\n              org.adrianwalker.multilinestring.MultilineProcessor&lt;/annotationProcessor&gt;\n          &lt;/annotationProcessors&gt;\n  &lt;/configuration&gt;\n</code></pre>\n<p>I cannot understand why Eclipse can compile and run the application with annotations, it can also <strong>export</strong> valid ROOT.war, but Maven ignores (without errors) completely the annotations.</p>\n<p>Do you have any idea why maven doesnt run the annotation processor?<br />\nDo you know how can I get the eclipse command called when I export WAR file from a project?</p>\n<p>EDIT</p>\n<p>These are the versions:\nApache Maven 3.8.7\nJava version: 17.0.7\nEclipse Version: 2023-03 (4.27.0)\nM2E Maven Integration for Eclipse: 2.2.1.20230307-1553</p>\n"},{"tags":["java","android","kotlin","gradle","build.gradle"],"owner":{"account_id":25260933,"reputation":11,"user_id":19091849,"display_name":"Jo&#227;o manoel "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686693728,"creation_date":1686693728,"question_id":76468988,"body_markdown":"&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable\r\n\r\nDuplicate class kotlin.collections.jdk8.CollectionsJDK8Kt found in modules kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and kotlin-stdlib-jdk8-1.7.0 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.0)\r\n\r\n**Build.gradle**\r\n```\r\nbuildscript {\r\n    ext {\r\n        compose_ui_version = &#39;1.4.3&#39;\r\n    }\r\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;org.jetbrains.kotlin.android&#39; version &#39;1.7.0&#39; apply false\r\n    id &#39;com.google.dagger.hilt.android&#39; version &#39;2.44&#39; apply false\r\n}\r\n```\r\n\r\n**Build.gradle:app**\r\n```\r\nplugins {\r\n    id &#39;com.android.application&#39;\r\n    id &#39;kotlin-android&#39;\r\n    id &#39;kotlin-kapt&#39;\r\n    id &#39;dagger.hilt.android.plugin&#39;\r\n    id &#39;kotlin-parcelize&#39;\r\n}\r\n\r\nandroid {\r\n    namespace &#39;com.example.denuncieagora&#39;\r\n    compileSdk 33\r\n\r\n    defaultConfig {\r\n        applicationId &quot;com.example.denuncieagora&quot;\r\n        minSdk 24\r\n        targetSdk 33\r\n        versionCode 1\r\n        versionName &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n        vectorDrawables {\r\n            useSupportLibrary true\r\n        }\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            minifyEnabled false\r\n            proguardFiles getDefaultProguardFile(&#39;proguard-android-optimize.txt&#39;), &#39;proguard-rules.pro&#39;\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n    kotlinOptions {\r\n        jvmTarget = &#39;1.8&#39;\r\n    }\r\n    buildFeatures {\r\n        compose true\r\n    }\r\n    composeOptions {\r\n        kotlinCompilerExtensionVersion &#39;1.2.0&#39;\r\n    }\r\n    packagingOptions {\r\n        resources {\r\n            excludes += &#39;/META-INF/{AL2.0,LGPL2.1}&#39;\r\n        }\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation &#39;androidx.core:core-ktx:1.10.1&#39;\r\n    implementation &#39;androidx.activity:activity-compose:1.7.2&#39;\r\n    implementation &quot;androidx.compose.ui:ui:$compose_ui_version&quot;\r\n    implementation &quot;androidx.compose.ui:ui-tooling-preview:$compose_ui_version&quot;\r\n    implementation &#39;androidx.compose.material:material:1.4.3&#39;\r\n    testImplementation &#39;junit:junit:4.13.2&#39;\r\n    androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.5.1&#39;\r\n    androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4:$compose_ui_version&quot;\r\n    debugImplementation &quot;androidx.compose.ui:ui-tooling:$compose_ui_version&quot;\r\n    debugImplementation &quot;androidx.compose.ui:ui-test-manifest:$compose_ui_version&quot;\r\n\r\n    // Dagger - Hilt\r\n    implementation &#39;com.google.dagger:hilt-android:2.46.1&#39;\r\n    kapt &#39;com.google.dagger:hilt-compiler:2.46.1&#39;\r\n    implementation &#39;androidx.hilt:hilt-navigation-compose:1.0.0&#39;\r\n\r\n    // Retrofit\r\n    implementation &#39;com.squareup.retrofit2:retrofit:2.9.0&#39;\r\n    implementation &#39;com.squareup.retrofit2:converter-gson:2.9.0&#39;\r\n    implementation &quot;com.squareup.okhttp3:okhttp:5.0.0-alpha.2&quot;\r\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.2&quot;\r\n}\r\n```","title":"Class Duplicate on Android","body":"<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.CheckDuplicatesRunnable</p>\n</blockquote>\n<p>Duplicate class kotlin.collections.jdk8.CollectionsJDK8Kt found in modules kotlin-stdlib-1.8.10 (org.jetbrains.kotlin:kotlin-stdlib:1.8.10) and kotlin-stdlib-jdk8-1.7.0 (org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.7.0)</p>\n<p><strong>Build.gradle</strong></p>\n<pre><code>buildscript {\n    ext {\n        compose_ui_version = '1.4.3'\n    }\n}// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n    id 'org.jetbrains.kotlin.android' version '1.7.0' apply false\n    id 'com.google.dagger.hilt.android' version '2.44' apply false\n}\n</code></pre>\n<p><strong>Build.gradle:app</strong></p>\n<pre><code>plugins {\n    id 'com.android.application'\n    id 'kotlin-android'\n    id 'kotlin-kapt'\n    id 'dagger.hilt.android.plugin'\n    id 'kotlin-parcelize'\n}\n\nandroid {\n    namespace 'com.example.denuncieagora'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.denuncieagora&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        vectorDrawables {\n            useSupportLibrary true\n        }\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n    kotlinOptions {\n        jvmTarget = '1.8'\n    }\n    buildFeatures {\n        compose true\n    }\n    composeOptions {\n        kotlinCompilerExtensionVersion '1.2.0'\n    }\n    packagingOptions {\n        resources {\n            excludes += '/META-INF/{AL2.0,LGPL2.1}'\n        }\n    }\n}\n\ndependencies {\n\n    implementation 'androidx.core:core-ktx:1.10.1'\n    implementation 'androidx.activity:activity-compose:1.7.2'\n    implementation &quot;androidx.compose.ui:ui:$compose_ui_version&quot;\n    implementation &quot;androidx.compose.ui:ui-tooling-preview:$compose_ui_version&quot;\n    implementation 'androidx.compose.material:material:1.4.3'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4:$compose_ui_version&quot;\n    debugImplementation &quot;androidx.compose.ui:ui-tooling:$compose_ui_version&quot;\n    debugImplementation &quot;androidx.compose.ui:ui-test-manifest:$compose_ui_version&quot;\n\n    // Dagger - Hilt\n    implementation 'com.google.dagger:hilt-android:2.46.1'\n    kapt 'com.google.dagger:hilt-compiler:2.46.1'\n    implementation 'androidx.hilt:hilt-navigation-compose:1.0.0'\n\n    // Retrofit\n    implementation 'com.squareup.retrofit2:retrofit:2.9.0'\n    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'\n    implementation &quot;com.squareup.okhttp3:okhttp:5.0.0-alpha.2&quot;\n    implementation &quot;com.squareup.okhttp3:logging-interceptor:5.0.0-alpha.2&quot;\n}\n</code></pre>\n"},{"tags":["java","php","cryptography","public-key-encryption","phpseclib"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1686694230,"post_id":76468618,"comment_id":134833961,"body_markdown":"For quick-and-dirty purposes implement the Java decryptor with MGF1ParameterSpec.SHA1 OAEP parameterization and see if it works.","body":"For quick-and-dirty purposes implement the Java decryptor with MGF1ParameterSpec.SHA1 OAEP parameterization and see if it works."},{"owner":{"account_id":12359353,"reputation":42442,"user_id":9014097,"display_name":"Topaco"},"score":2,"creation_date":1686724515,"post_id":76468618,"comment_id":134836626,"body_markdown":"The code looks OK. I can&#39;t reproduce the problem either, i.e. for me a ciphertext created with the PHP code can be decrypted with the Java code. Possibly a problem with the data (inconsistent keys, etc.) or a problem in the code portions not posted. Post non-productive sample data (key pair, plaintext, ciphertext) and complete the Java code (Base64url decoding, key import).","body":"The code looks OK. I can&#39;t reproduce the problem either, i.e. for me a ciphertext created with the PHP code can be decrypted with the Java code. Possibly a problem with the data (inconsistent keys, etc.) or a problem in the code portions not posted. Post non-productive sample data (key pair, plaintext, ciphertext) and complete the Java code (Base64url decoding, key import)."}],"owner":{"account_id":8712207,"reputation":131,"user_id":6518059,"display_name":"Morpheus.47"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686693162,"creation_date":1686689352,"question_id":76468618,"body_markdown":"I have PHP code that encrypts some plaintext, it looks something like the following\r\n\r\n    function encryptSecretKeyWithCertificate($plainKey, $certFilePath) {\r\n        $certContent = file_get_contents($certFilePath);\r\n        if (!$certContent) {\r\n            throw new Exception(&quot;can&#39;t load certificate: $certFilePath&quot;);\r\n        }\r\n        \r\n        $rsa = PublicKeyLoader::load($certContent)\r\n        -&gt;withHash(&#39;sha256&#39;)\r\n        -&gt;withMGFHash(&#39;sha256&#39;)\r\n        -&gt;withPadding(RSA::ENCRYPTION_OAEP);\r\n        return rtrim(strtr(base64_encode($rsa-&gt;encrypt($plainKey)), &#39;+/&#39;, &#39;-_&#39;), &#39;=&#39;);\r\n    }\r\n\r\nI used phpseclib3. It returns a base64urlsafe encoded string. This string will be sent to another application (implemented using java) and is decrypted by the following function.\r\n\r\n        private static byte[] decryptSecretKey(PrivateKey privKey, byte[] encKey)  {\r\n        try {\r\n            Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING&quot;);\r\n            OAEPParameterSpec oaepParams = new OAEPParameterSpec(&quot;SHA-256&quot;, &quot;MGF1&quot;, MGF1ParameterSpec.SHA256,\r\n                    PSource.PSpecified.DEFAULT);\r\n            cipher.init(Cipher.DECRYPT_MODE, privKey, oaepParams);\r\n            return cipher.doFinal(encKey, 0, encKey.length);\r\n        }catch (Exception ex){\r\n            ex.printStackTrace();\r\n            return  null;\r\n        }\r\n    }\r\n    \r\nI have verified that both encoding and decoding are done correctly (base64) but trying to decrypt the data throws the following exception. \r\n\r\n    javax.crypto.BadPaddingException: Decryption error\r\n\tat java.base/sun.security.rsa.RSAPadding.unpadOAEP(RSAPadding.java:488)\r\n\tat java.base/sun.security.rsa.RSAPadding.unpad(RSAPadding.java:284)\r\n\tat java.base/com.sun.crypto.provider.RSACipher.doFinal(RSACipher.java:366)\r\n\tat java.base/com.sun.crypto.provider.RSACipher.engineDoFinal(RSACipher.java:400)\r\n\tat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2303)\r\n\tat org.example.CryptoUtil.decryptSecretKey(CryptoUtil.java:264)\r\n\tat org.example.CryptoUtil.symmetricDecryptResponse(CryptoUtil.java:224)\r\n\tat org.example.Main.main(Main.java:40)\r\n\r\nJust for testing I implemented the encryption function in Java (which works) and it looks like this\r\n\r\n    public static String encryptSecretKeyAsymmetric(byte[] key, PublicKey publicKey) throws Exception {\r\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING&quot;);\r\n        final OAEPParameterSpec oaepParams = new OAEPParameterSpec(&quot;SHA-256&quot;, &quot;MGF1&quot;, MGF1ParameterSpec.SHA256,\r\n                PSource.PSpecified.DEFAULT);\r\n        cipher.init(Cipher.ENCRYPT_MODE, publicKey, oaepParams);\r\n        byte[] cipherText = cipher.doFinal(key);\r\n        String encodedCipher =  doEncode(cipherText);\r\n        return encodedCipher;\r\n    }\r\n\r\nI would appreciate any help. Is it even possible to implement this type of encryption with the RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING transform and the various specs in PHP? ","title":"Ciphertext generated using PHP fails to be decrypted by a java backend with &quot;RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING&quot; transformation","body":"<p>I have PHP code that encrypts some plaintext, it looks something like the following</p>\n<pre><code>function encryptSecretKeyWithCertificate($plainKey, $certFilePath) {\n    $certContent = file_get_contents($certFilePath);\n    if (!$certContent) {\n        throw new Exception(&quot;can't load certificate: $certFilePath&quot;);\n    }\n    \n    $rsa = PublicKeyLoader::load($certContent)\n    -&gt;withHash('sha256')\n    -&gt;withMGFHash('sha256')\n    -&gt;withPadding(RSA::ENCRYPTION_OAEP);\n    return rtrim(strtr(base64_encode($rsa-&gt;encrypt($plainKey)), '+/', '-_'), '=');\n}\n</code></pre>\n<p>I used phpseclib3. It returns a base64urlsafe encoded string. This string will be sent to another application (implemented using java) and is decrypted by the following function.</p>\n<pre><code>    private static byte[] decryptSecretKey(PrivateKey privKey, byte[] encKey)  {\n    try {\n        Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING&quot;);\n        OAEPParameterSpec oaepParams = new OAEPParameterSpec(&quot;SHA-256&quot;, &quot;MGF1&quot;, MGF1ParameterSpec.SHA256,\n                PSource.PSpecified.DEFAULT);\n        cipher.init(Cipher.DECRYPT_MODE, privKey, oaepParams);\n        return cipher.doFinal(encKey, 0, encKey.length);\n    }catch (Exception ex){\n        ex.printStackTrace();\n        return  null;\n    }\n}\n</code></pre>\n<p>I have verified that both encoding and decoding are done correctly (base64) but trying to decrypt the data throws the following exception.</p>\n<pre><code>javax.crypto.BadPaddingException: Decryption error\nat java.base/sun.security.rsa.RSAPadding.unpadOAEP(RSAPadding.java:488)\nat java.base/sun.security.rsa.RSAPadding.unpad(RSAPadding.java:284)\nat java.base/com.sun.crypto.provider.RSACipher.doFinal(RSACipher.java:366)\nat java.base/com.sun.crypto.provider.RSACipher.engineDoFinal(RSACipher.java:400)\nat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2303)\nat org.example.CryptoUtil.decryptSecretKey(CryptoUtil.java:264)\nat org.example.CryptoUtil.symmetricDecryptResponse(CryptoUtil.java:224)\nat org.example.Main.main(Main.java:40)\n</code></pre>\n<p>Just for testing I implemented the encryption function in Java (which works) and it looks like this</p>\n<pre><code>public static String encryptSecretKeyAsymmetric(byte[] key, PublicKey publicKey) throws Exception {\n    Cipher cipher = Cipher.getInstance(&quot;RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING&quot;);\n    final OAEPParameterSpec oaepParams = new OAEPParameterSpec(&quot;SHA-256&quot;, &quot;MGF1&quot;, MGF1ParameterSpec.SHA256,\n            PSource.PSpecified.DEFAULT);\n    cipher.init(Cipher.ENCRYPT_MODE, publicKey, oaepParams);\n    byte[] cipherText = cipher.doFinal(key);\n    String encodedCipher =  doEncode(cipherText);\n    return encodedCipher;\n}\n</code></pre>\n<p>I would appreciate any help. Is it even possible to implement this type of encryption with the RSA/ECB/OAEPWITHSHA-256ANDMGF1PADDING transform and the various specs in PHP?</p>\n"},{"tags":["java","stripe-payments"],"answers":[{"tags":[],"owner":{"account_id":24455181,"reputation":669,"user_id":18376867,"display_name":"LauraT"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686693146,"creation_date":1686693146,"answer_id":76468951,"question_id":76468772,"body_markdown":"Looks like Stripe requires you to send the current and any/all future phases so using params is the right way to go about it: https://stripe.com/docs/billing/subscriptions/subscription-schedules#updating","title":"Updating a subscription schedule with Stripe java APIs","body":"<p>Looks like Stripe requires you to send the current and any/all future phases so using params is the right way to go about it: <a href=\"https://stripe.com/docs/billing/subscriptions/subscription-schedules#updating\" rel=\"nofollow noreferrer\">https://stripe.com/docs/billing/subscriptions/subscription-schedules#updating</a></p>\n"}],"owner":{"account_id":317225,"reputation":1,"user_id":21310236,"display_name":"Franck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":105,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686693146,"creation_date":1686690726,"question_id":76468772,"body_markdown":"After a completed check session that contains recurring prices I have attached a schedule to the subscription created by Stripe.\r\n\r\nI am now trying to update that schedule to set the iteration count on its single phase, and the API is making this extremely clumsy... am I missing something?\r\n\r\n\r\n\r\nThe method below is a webhook handler that receives the current schedule; the update request seems to require SubscriptionScheduleUpdateParams inner classes, meaning I have to manually reconstruct the phases, their items, their prices and so on using Params classes: is there any better way??\r\n\r\n```\r\n // case &quot;subscription_schedule.created&quot; -&gt; configureSchedule(event, (SubscriptionSchedule) stripeObject);\r\n private void configureSchedule(Event event, SubscriptionSchedule schedule)\r\n {\r\n    Phase phase = schedule.getPhases().get(0);\r\n\r\n    // All I need is to set that phase&#39;s iteration count, but:\r\n    SubscriptionScheduleUpdateParams params =\r\n                SubscriptionScheduleUpdateParams.builder().\r\n                        setApplicationFeePercent(phase.getApplicationFeePercent()).\r\n                        // ... set 10 other properties :( \r\n                        addPhase(SubscriptionScheduleUpdateParams.Phase.builder().\r\n                                addAllItem(SubscriptionScheduleUpdateParams.Phase.Item.builder().\r\n                                             // again manual transfer of each item property\r\n }\r\n```\r\n\r\nAm I missing something about those APIs? I can&#39;t find any bridge between the objects/classes sent by webhooks and the ones required in update requests.","title":"Updating a subscription schedule with Stripe java APIs","body":"<p>After a completed check session that contains recurring prices I have attached a schedule to the subscription created by Stripe.</p>\n<p>I am now trying to update that schedule to set the iteration count on its single phase, and the API is making this extremely clumsy... am I missing something?</p>\n<p>The method below is a webhook handler that receives the current schedule; the update request seems to require SubscriptionScheduleUpdateParams inner classes, meaning I have to manually reconstruct the phases, their items, their prices and so on using Params classes: is there any better way??</p>\n<pre><code> // case &quot;subscription_schedule.created&quot; -&gt; configureSchedule(event, (SubscriptionSchedule) stripeObject);\n private void configureSchedule(Event event, SubscriptionSchedule schedule)\n {\n    Phase phase = schedule.getPhases().get(0);\n\n    // All I need is to set that phase's iteration count, but:\n    SubscriptionScheduleUpdateParams params =\n                SubscriptionScheduleUpdateParams.builder().\n                        setApplicationFeePercent(phase.getApplicationFeePercent()).\n                        // ... set 10 other properties :( \n                        addPhase(SubscriptionScheduleUpdateParams.Phase.builder().\n                                addAllItem(SubscriptionScheduleUpdateParams.Phase.Item.builder().\n                                             // again manual transfer of each item property\n }\n</code></pre>\n<p>Am I missing something about those APIs? I can't find any bridge between the objects/classes sent by webhooks and the ones required in update requests.</p>\n"},{"tags":["java","scope"],"owner":{"account_id":28815601,"reputation":1,"user_id":22069299,"display_name":"Gustavo Garc&#237;a Novo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686693137,"creation_date":1686693137,"question_id":76468949,"body_markdown":"I have the following problem:\r\nA class called &quot;PanelPrincipal&quot; which extends &quot;JPanel&quot; and implements &quot;Externalizable&quot;.\r\n\r\nRun the methods:\r\n\r\n\tpublic PanelPrincipal() {\r\n\t\r\n \t}\r\n\tpublic void writeExternal(ObjectOutput out) throws IOException {\r\n\t\tout.writeObject(vectorControles);\r\n\t\t...\r\n\t}\r\n\tpublic void readExternal(ObjectInput in) throws IOException,  ClassNotFoundException {\r\n\t\tvectorControles.clear();\r\n\t\tvectorControles = (Vector&lt;Control&gt;)in.readObject();\r\n\t\t...\r\n\t\tSystem.out.println(&quot;PanelPrincipal.readExternal(ObjectInput in).vectorControles: &quot; + vectorControles  );\r\n\t}\r\n\r\nWhere it saves and retrieves the vector &quot;vectorControles&quot;, which is a global variable of a &quot;Vector&quot; containing graphics.\r\nIt happens that when I save the project, modify the vector and reload it, the dump of the last line of &quot;readExternal()&quot; tells me that the modifications have been retrieved correctly, however, the modifications have no scope to &quot;paintComponent()&quot;:\r\n\r\n\tpublic void paintComponent(Graphics g){\t\r\n\t\tsuper.paintComponent(g);\r\n\t\tg2 = (Graphics2D) g; \t\t\r\n\r\n\t\tSystem.out.println(&quot;PanelPrincipal.paintComponent(Graphics g).vectorControles: &quot; + vectorControles  );\r\n\r\n\t\tfor(int i=0; i &lt; vectorControles.size(); i++){\r\n\t\t\tif(vectorControles.get(i).getIdPanelContenedor() == 0) {\t\r\n\t\t\t\tvectorControles.get(i).dibujar(g2);\r\n\t\t\t}\r\n\t\t} \r\n\t}\r\n\r\n\r\nThe terminal output and the &quot;paintComponent()&quot; method do not show the changes. In the middle, nothing should modify the vector.\r\nThe code is abbreviated for clarity.\r\nI&#39;ve been kicking this code around for weeks. \r\nI would appreciate any help.\r\nThanks.\r\n\r\nI need the variable &quot;vectorControles&quot; to be updated for the &quot;paintComponent()&quot; method, which is not happening.","title":"Why is my global variable &quot;vectorControles&quot; not updated after externalization?","body":"<p>I have the following problem:\nA class called &quot;PanelPrincipal&quot; which extends &quot;JPanel&quot; and implements &quot;Externalizable&quot;.</p>\n<p>Run the methods:</p>\n<pre><code>public PanelPrincipal() {\n\n}\npublic void writeExternal(ObjectOutput out) throws IOException {\n    out.writeObject(vectorControles);\n    ...\n}\npublic void readExternal(ObjectInput in) throws IOException,  ClassNotFoundException {\n    vectorControles.clear();\n    vectorControles = (Vector&lt;Control&gt;)in.readObject();\n    ...\n    System.out.println(&quot;PanelPrincipal.readExternal(ObjectInput in).vectorControles: &quot; + vectorControles  );\n}\n</code></pre>\n<p>Where it saves and retrieves the vector &quot;vectorControles&quot;, which is a global variable of a &quot;Vector&quot; containing graphics.\nIt happens that when I save the project, modify the vector and reload it, the dump of the last line of &quot;readExternal()&quot; tells me that the modifications have been retrieved correctly, however, the modifications have no scope to &quot;paintComponent()&quot;:</p>\n<pre><code>public void paintComponent(Graphics g){ \n    super.paintComponent(g);\n    g2 = (Graphics2D) g;        \n\n    System.out.println(&quot;PanelPrincipal.paintComponent(Graphics g).vectorControles: &quot; + vectorControles  );\n\n    for(int i=0; i &lt; vectorControles.size(); i++){\n        if(vectorControles.get(i).getIdPanelContenedor() == 0) {    \n            vectorControles.get(i).dibujar(g2);\n        }\n    } \n}\n</code></pre>\n<p>The terminal output and the &quot;paintComponent()&quot; method do not show the changes. In the middle, nothing should modify the vector.\nThe code is abbreviated for clarity.\nI've been kicking this code around for weeks.\nI would appreciate any help.\nThanks.</p>\n<p>I need the variable &quot;vectorControles&quot; to be updated for the &quot;paintComponent()&quot; method, which is not happening.</p>\n"},{"tags":["java","stream","iterator"],"comments":[{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":0,"creation_date":1686689056,"post_id":76468560,"comment_id":134833230,"body_markdown":"You forgot to ask a question.","body":"You forgot to ask a question."},{"owner":{"account_id":4183630,"reputation":79,"user_id":3427898,"display_name":"almegdadi"},"score":0,"creation_date":1686689228,"post_id":76468560,"comment_id":134833267,"body_markdown":"@talex I updated the question .. I was exaplaning the problem","body":"@talex I updated the question .. I was exaplaning the problem"},{"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"score":2,"creation_date":1686689477,"post_id":76468560,"comment_id":134833306,"body_markdown":"`scanner.nextLine()` wait for input. You have to pres enter for it to complete.","body":"<code>scanner.nextLine()</code> wait for input. You have to pres enter for it to complete."},{"owner":{"account_id":4183630,"reputation":79,"user_id":3427898,"display_name":"almegdadi"},"score":0,"creation_date":1686691963,"post_id":76468560,"comment_id":134833670,"body_markdown":"@talex ..you are right .. the problem was at `scanner.nextline()` I updated the code .. now it creates observations, but not stopping when I press &quot;s&quot;","body":"@talex ..you are right .. the problem was at <code>scanner.nextline()</code> I updated the code .. now it creates observations, but not stopping when I press &quot;s&quot;"},{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":1,"creation_date":1686692372,"post_id":76468560,"comment_id":134833716,"body_markdown":"You should use `scanner.hasNextLine()` to see if there&#39;s any input and if there is, check if it&#39;s &quot;s&quot;. But read [Open letter to students with homework problems](https://softwareengineering.meta.stackexchange.com/q/6166).","body":"You should use <code>scanner.hasNextLine()</code> to see if there&#39;s any input and if there is, check if it&#39;s &quot;s&quot;. But read <a href=\"https://softwareengineering.meta.stackexchange.com/q/6166\">Open letter to students with homework problems</a>."}],"answers":[{"tags":[],"owner":{"account_id":4183630,"reputation":79,"user_id":3427898,"display_name":"almegdadi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686693122,"creation_date":1686693122,"answer_id":76468947,"question_id":76468560,"body_markdown":"I added a listener to stop when I press &quot;s&quot;, and added a time frame to control the time of observations creation\r\n\r\n    import java.awt.event.KeyEvent;\r\n    import java.awt.event.KeyListener;\r\n    import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.util.Iterator;\r\n    import java.util.Random;\r\n    import java.util.Scanner;\r\n    import javax.swing.JFrame;\r\n    \r\n    public class RandomStreamMatrix {\r\n        private static final int MATRIX_SIZE = 4;\r\n        private static final int MAX_VALUE = 999;\r\n        private static final long SEED = 1234; // Seed value for random number generation\r\n        private static boolean generateObservations = true;\r\n        private static int observationCount = 0;\r\n        private static final int TIME_FRAME_MS = 10; // Time frame in milliseconds (adjust as needed)\r\n    \r\n        public static void main(String[] args) {\r\n            RandomStreamMatrix generator = new RandomStreamMatrix();\r\n            Iterator&lt;int[]&gt; iterator = generator.new RandomMatrixIterator();\r\n    \r\n            // Create a file to write the observations\r\n            String filePath = &quot;observations.txt&quot;;\r\n            try {\r\n                FileWriter fileWriter = new FileWriter(filePath);\r\n    \r\n                // Create a JFrame to capture key events\r\n                JFrame frame = new JFrame();\r\n                frame.addKeyListener(new KeyListener() {\r\n                    @Override\r\n                    public void keyPressed(KeyEvent e) {\r\n                        if (e.getKeyChar() == &#39;s&#39;) {\r\n                            generateObservations = false;\r\n                            System.out.println(&quot;Generation stopped by user.&quot;);\r\n                            System.out.println(&quot;Total observations created: &quot; + observationCount);\r\n                        }\r\n                    }\r\n    \r\n                    @Override\r\n                    public void keyTyped(KeyEvent e) {}\r\n    \r\n                    @Override\r\n                    public void keyReleased(KeyEvent e) {}\r\n                });\r\n    \r\n                frame.setSize(200, 200);\r\n                frame.setVisible(true);\r\n                frame.setFocusable(true);\r\n                frame.requestFocus();\r\n    \r\n                while (generateObservations) {\r\n                    int[] observation = iterator.next();\r\n                    System.out.println(&quot;Observation: &quot; + java.util.Arrays.toString(observation));\r\n                    observationCount++;\r\n    \r\n                    // Write the observation to the file\r\n                    for (int value : observation) {\r\n                        fileWriter.write(Integer.toString(value) + &quot; &quot;);\r\n                    }\r\n                    fileWriter.write(&quot;\\n&quot;);\r\n                    fileWriter.flush();\r\n    \r\n                    try {\r\n                        Thread.sleep(TIME_FRAME_MS); // Pause execution for the specified time frame\r\n                    } catch (InterruptedException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n                }\r\n    \r\n                fileWriter.close();\r\n                System.out.println(&quot;Observations written to &quot; + filePath);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private class RandomMatrixIterator implements Iterator&lt;int[]&gt; {\r\n            private Random random;\r\n    \r\n            public RandomMatrixIterator() {\r\n                random = new Random(SEED); // Use the seed value for random number generation\r\n            }\r\n    \r\n            @Override\r\n            public boolean hasNext() {\r\n                return true; // Always have next element\r\n            }\r\n    \r\n            @Override\r\n            public int[] next() {\r\n                int[] observation = new int[MATRIX_SIZE];\r\n                for (int i = 0; i &lt; MATRIX_SIZE; i++) {\r\n                    observation[i] = random.nextInt(MAX_VALUE + 1);\r\n                }\r\n                return observation;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Creating random stream in java and stop at event","body":"<p>I added a listener to stop when I press &quot;s&quot;, and added a time frame to control the time of observations creation</p>\n<pre><code>import java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Iterator;\nimport java.util.Random;\nimport java.util.Scanner;\nimport javax.swing.JFrame;\n\npublic class RandomStreamMatrix {\n    private static final int MATRIX_SIZE = 4;\n    private static final int MAX_VALUE = 999;\n    private static final long SEED = 1234; // Seed value for random number generation\n    private static boolean generateObservations = true;\n    private static int observationCount = 0;\n    private static final int TIME_FRAME_MS = 10; // Time frame in milliseconds (adjust as needed)\n\n    public static void main(String[] args) {\n        RandomStreamMatrix generator = new RandomStreamMatrix();\n        Iterator&lt;int[]&gt; iterator = generator.new RandomMatrixIterator();\n\n        // Create a file to write the observations\n        String filePath = &quot;observations.txt&quot;;\n        try {\n            FileWriter fileWriter = new FileWriter(filePath);\n\n            // Create a JFrame to capture key events\n            JFrame frame = new JFrame();\n            frame.addKeyListener(new KeyListener() {\n                @Override\n                public void keyPressed(KeyEvent e) {\n                    if (e.getKeyChar() == 's') {\n                        generateObservations = false;\n                        System.out.println(&quot;Generation stopped by user.&quot;);\n                        System.out.println(&quot;Total observations created: &quot; + observationCount);\n                    }\n                }\n\n                @Override\n                public void keyTyped(KeyEvent e) {}\n\n                @Override\n                public void keyReleased(KeyEvent e) {}\n            });\n\n            frame.setSize(200, 200);\n            frame.setVisible(true);\n            frame.setFocusable(true);\n            frame.requestFocus();\n\n            while (generateObservations) {\n                int[] observation = iterator.next();\n                System.out.println(&quot;Observation: &quot; + java.util.Arrays.toString(observation));\n                observationCount++;\n\n                // Write the observation to the file\n                for (int value : observation) {\n                    fileWriter.write(Integer.toString(value) + &quot; &quot;);\n                }\n                fileWriter.write(&quot;\\n&quot;);\n                fileWriter.flush();\n\n                try {\n                    Thread.sleep(TIME_FRAME_MS); // Pause execution for the specified time frame\n                } catch (InterruptedException e) {\n                    e.printStackTrace();\n                }\n            }\n\n            fileWriter.close();\n            System.out.println(&quot;Observations written to &quot; + filePath);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private class RandomMatrixIterator implements Iterator&lt;int[]&gt; {\n        private Random random;\n\n        public RandomMatrixIterator() {\n            random = new Random(SEED); // Use the seed value for random number generation\n        }\n\n        @Override\n        public boolean hasNext() {\n            return true; // Always have next element\n        }\n\n        @Override\n        public int[] next() {\n            int[] observation = new int[MATRIX_SIZE];\n            for (int i = 0; i &lt; MATRIX_SIZE; i++) {\n                observation[i] = random.nextInt(MAX_VALUE + 1);\n            }\n            return observation;\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":4183630,"reputation":79,"user_id":3427898,"display_name":"almegdadi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1686693122,"creation_date":1686688720,"question_id":76468560,"body_markdown":"Update the code: \r\nThis is a java code .. it should create stream of random observations, each observation contains 4 cloumns, each one is an integer from 0 to 999 ... The code should keep generationg the values and append the observation values to a text file until i press the &quot;s&quot; from the keyboard ..  note that the created observations should only be kept temporarily, and each observation will be deleted after it wrote at the consol and append on the file ..  \r\nQuestion: How to modify the code to create a stream of continous observations  stopped when I press &quot;s&quot;\r\n\r\n\r\nHere is the code\r\n\r\n        import java.io.FileWriter;\r\n    import java.io.IOException;\r\n    import java.util.Iterator;\r\n    import java.util.Random;\r\n    import java.util.concurrent.atomic.AtomicBoolean;\r\n    import java.util.Scanner;\r\n    \r\n    public class RandomStreamMatrix {\r\n        private static final int MATRIX_SIZE = 4;\r\n        private static final int MAX_VALUE = 999;\r\n        private static final long SEED = 1234L; // Seed value for random number generation\r\n    \r\n        public static void main(String[] args) {\r\n            RandomStreamMatrix generator = new RandomStreamMatrix();\r\n            Iterator&lt;int[]&gt; iterator = generator.new RandomMatrixIterator();\r\n    \r\n            // Create a file to write the observations\r\n            String filePath = &quot;observations.txt&quot;;\r\n            try {\r\n                FileWriter fileWriter = new FileWriter(filePath);\r\n                AtomicBoolean generateObservations = new AtomicBoolean(true);\r\n    \r\n                // Create a separate thread for user input\r\n                Thread userInputThread = new Thread(() -&gt; {\r\n                    System.out.println(&quot;Press &#39;s&#39; to stop the generation...&quot;);\r\n                    Scanner scanner = new Scanner(System.in);\r\n                    while (generateObservations.get()) {\r\n                        String input = scanner.nextLine();\r\n                        if (input.trim().equalsIgnoreCase(&quot;s&quot;)) {\r\n                            generateObservations.set(false);\r\n                            System.out.println(&quot;Generation stopped by user.&quot;);\r\n                            break;\r\n                        }\r\n                    }\r\n                    scanner.close();\r\n                });\r\n                userInputThread.start();\r\n    \r\n                while (generateObservations.get()) {\r\n                    int[] observation = iterator.next();\r\n                    System.out.println(&quot;Observation: &quot; + java.util.Arrays.toString(observation));\r\n    \r\n                    // Write the observation to the file\r\n                    for (int value : observation) {\r\n                        fileWriter.write(Integer.toString(value) + &quot; &quot;);\r\n                    }\r\n                    fileWriter.write(&quot;\\n&quot;);\r\n                    fileWriter.flush();\r\n                }\r\n                fileWriter.close();\r\n                System.out.println(&quot;Observations written to &quot; + filePath);\r\n            } catch (IOException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    \r\n        private class RandomMatrixIterator implements Iterator&lt;int[]&gt; {\r\n            private Random random;\r\n    \r\n            public RandomMatrixIterator() {\r\n                random = new Random(SEED); // Use the seed value for random number generation\r\n            }\r\n    \r\n            @Override\r\n            public boolean hasNext() {\r\n                return true;  // Always have next element\r\n            }\r\n    \r\n            @Override\r\n            public int[] next() {\r\n                int[] observation = new int[MATRIX_SIZE];\r\n                for (int i = 0; i &lt; MATRIX_SIZE; i++) {\r\n                    observation[i] = random.nextInt(MAX_VALUE + 1);\r\n                }\r\n                return observation;\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"Creating random stream in java and stop at event","body":"<p>Update the code:\nThis is a java code .. it should create stream of random observations, each observation contains 4 cloumns, each one is an integer from 0 to 999 ... The code should keep generationg the values and append the observation values to a text file until i press the &quot;s&quot; from the keyboard ..  note that the created observations should only be kept temporarily, and each observation will be deleted after it wrote at the consol and append on the file ..<br />\nQuestion: How to modify the code to create a stream of continous observations  stopped when I press &quot;s&quot;</p>\n<p>Here is the code</p>\n<pre><code>    import java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Iterator;\nimport java.util.Random;\nimport java.util.concurrent.atomic.AtomicBoolean;\nimport java.util.Scanner;\n\npublic class RandomStreamMatrix {\n    private static final int MATRIX_SIZE = 4;\n    private static final int MAX_VALUE = 999;\n    private static final long SEED = 1234L; // Seed value for random number generation\n\n    public static void main(String[] args) {\n        RandomStreamMatrix generator = new RandomStreamMatrix();\n        Iterator&lt;int[]&gt; iterator = generator.new RandomMatrixIterator();\n\n        // Create a file to write the observations\n        String filePath = &quot;observations.txt&quot;;\n        try {\n            FileWriter fileWriter = new FileWriter(filePath);\n            AtomicBoolean generateObservations = new AtomicBoolean(true);\n\n            // Create a separate thread for user input\n            Thread userInputThread = new Thread(() -&gt; {\n                System.out.println(&quot;Press 's' to stop the generation...&quot;);\n                Scanner scanner = new Scanner(System.in);\n                while (generateObservations.get()) {\n                    String input = scanner.nextLine();\n                    if (input.trim().equalsIgnoreCase(&quot;s&quot;)) {\n                        generateObservations.set(false);\n                        System.out.println(&quot;Generation stopped by user.&quot;);\n                        break;\n                    }\n                }\n                scanner.close();\n            });\n            userInputThread.start();\n\n            while (generateObservations.get()) {\n                int[] observation = iterator.next();\n                System.out.println(&quot;Observation: &quot; + java.util.Arrays.toString(observation));\n\n                // Write the observation to the file\n                for (int value : observation) {\n                    fileWriter.write(Integer.toString(value) + &quot; &quot;);\n                }\n                fileWriter.write(&quot;\\n&quot;);\n                fileWriter.flush();\n            }\n            fileWriter.close();\n            System.out.println(&quot;Observations written to &quot; + filePath);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private class RandomMatrixIterator implements Iterator&lt;int[]&gt; {\n        private Random random;\n\n        public RandomMatrixIterator() {\n            random = new Random(SEED); // Use the seed value for random number generation\n        }\n\n        @Override\n        public boolean hasNext() {\n            return true;  // Always have next element\n        }\n\n        @Override\n        public int[] next() {\n            int[] observation = new int[MATRIX_SIZE];\n            for (int i = 0; i &lt; MATRIX_SIZE; i++) {\n                observation[i] = random.nextInt(MAX_VALUE + 1);\n            }\n            return observation;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":7574015,"reputation":2216,"user_id":5746918,"accept_rate":100,"display_name":"Ishita Sinha"},"score":0,"creation_date":1471373861,"post_id":38982361,"comment_id":65317851,"body_markdown":"Go to the `.java` files in the lib directory and delete all the imports like `android.support.design.R`.","body":"Go to the <code>.java</code> files in the lib directory and delete all the imports like <code>android.support.design.R</code>."},{"owner":{"account_id":8513827,"reputation":2445,"user_id":6383029,"accept_rate":42,"display_name":"Mustansir"},"score":0,"creation_date":1471374052,"post_id":38982361,"comment_id":65317947,"body_markdown":"Try clean project, see if it helps.","body":"Try clean project, see if it helps."},{"owner":{"account_id":6982738,"reputation":11,"user_id":5354959,"accept_rate":0,"display_name":"MustafaTaj"},"score":0,"creation_date":1471377820,"post_id":38982361,"comment_id":65319856,"body_markdown":"I tried to delete &quot;import com.mikepepnz.materialdrawe.R&quot;,\nTried clean project, Tried rebuild project, Tried sync project with gradle\n\nNon of above worked","body":"I tried to delete &quot;import com.mikepepnz.materialdrawe.R&quot;, Tried clean project, Tried rebuild project, Tried sync project with gradle  Non of above worked"},{"owner":{"account_id":127956,"reputation":12758,"user_id":325479,"accept_rate":92,"display_name":"mikepenz"},"score":0,"creation_date":1474628287,"post_id":38982361,"comment_id":66619925,"body_markdown":"Normally such issues come up when there are resource errors. or similar. what did you do prior to getting this error?","body":"Normally such issues come up when there are resource errors. or similar. what did you do prior to getting this error?"}],"answers":[{"tags":[],"owner":{"account_id":6982738,"reputation":11,"user_id":5354959,"accept_rate":0,"display_name":"MustafaTaj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1471377867,"creation_date":1471377867,"answer_id":38983527,"question_id":38982361,"body_markdown":"I tried to delete &quot;import com.mikepepnz.materialdrawe.R&quot;\nTried clean project,\nTried rebuild project,\nTried sync project with gradle,\n\nNon of above worked\nThe app run version work but gralde release versiom don&#39;t work","title":"Android Studio &quot;mikepenz materialdrawer&quot; cannot find symbol class R [ release apk ]","body":"<p>I tried to delete \"import com.mikepepnz.materialdrawe.R\"\nTried clean project,\nTried rebuild project,\nTried sync project with gradle,</p>\n\n<p>Non of above worked\nThe app run version work but gralde release versiom don't work</p>\n"},{"tags":[],"owner":{"account_id":28779899,"reputation":61,"user_id":22041725,"display_name":"Shejan Mahamud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686690844,"creation_date":1686690844,"answer_id":76468779,"question_id":38982361,"body_markdown":"Hover or Click on old package name in android studio.\r\n\r\nFollow Steps: \r\n\r\n&gt; Ctrl + Shift + R \r\n\r\n&gt; Replace your new package name with old package name.\r\n\r\n&gt; File &gt; Invalidate cache\r\n\r\nDone!","title":"Android Studio &quot;mikepenz materialdrawer&quot; cannot find symbol class R [ release apk ]","body":"<p>Hover or Click on old package name in android studio.</p>\n<p>Follow Steps:</p>\n<blockquote>\n<p>Ctrl + Shift + R</p>\n</blockquote>\n<blockquote>\n<p>Replace your new package name with old package name.</p>\n</blockquote>\n<blockquote>\n<p>File &gt; Invalidate cache</p>\n</blockquote>\n<p>Done!</p>\n"}],"owner":{"account_id":6982738,"reputation":11,"user_id":5354959,"accept_rate":0,"display_name":"MustafaTaj"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":690,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1686690844,"creation_date":1471373254,"question_id":38982361,"body_markdown":"so am working with mikepenz materialdrawer in my project and everything was fine and i was able to get Release apk from android studio\r\n\r\nsuddenly i have this error [ cannot find symbol class R ] when i try to get the release APK\r\n\r\ngradle file \r\n\r\n    apply plugin: &#39;com.android.application&#39;\r\n    \r\n    android {\r\n        compileSdkVersion 24\r\n        buildToolsVersion &quot;24.0.1&quot;\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;sd.edu.oiu.medicine.mustafa&quot;\r\n            minSdkVersion 15\r\n            targetSdkVersion 24\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n        }\r\n        packagingOptions {\r\n            exclude &#39;META-INF/LICENSE&#39;\r\n            exclude &#39;META-INF/LICENSE-FIREBASE.txt&#39;\r\n            exclude &#39;META-INF/NOTICE&#39;\r\n        }\r\n        buildTypes {\r\n            release {\r\n                minifyEnabled false\r\n                proguardFiles getDefaultProguardFile(&#39;proguard-android.txt&#39;), &#39;proguard-rules.pro&#39;\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n        compile fileTree(dir: &#39;libs&#39;, include: [&#39;*.jar&#39;])\r\n        testCompile &#39;junit:junit:4.12&#39;\r\n        compile &#39;com.android.support:appcompat-v7:24.1.1&#39;\r\n        //compile &#39;com.android.support:design:24.0.1&#39;\r\n        // Firebase\r\n        compile &#39;com.firebase:firebase-client-android:2.5.1+&#39;\r\n        compile &#39;com.mcxiaoke.volley:library:1.0.19&#39;\r\n    \r\n        compile project(&quot;:libs:MikepenzMaterialDrawer&quot;)\r\n        // used to showcase how to load images\r\n        //compile &#39;com.squareup.picasso:picasso:2.5.2&#39;\r\n        compile &#39;com.github.bumptech.glide:glide:3.7.0&#39;\r\n    \r\n        // used to generate the Open Source section\r\n        // https://github.com/mikepenz/AboutLibraries\r\n        compile(&#39;com.mikepenz:aboutlibraries:5.7.0@aar&#39;) {\r\n            transitive = true\r\n            exclude module: &quot;fastadapter&quot;\r\n        }\r\n        //used to provide different itemAnimators for the RecyclerView\r\n        //https://github.com/mikepenz/ItemAnimators\r\n        compile &#39;com.mikepenz:itemanimators:0.2.4@aar&#39;\r\n        // used to provide the MiniDrawer to normal Drawer crossfade effect via a SlidingPane layout\r\n        // --&gt; https://github.com/mikepenz/MaterialDrawer/blob/develop/app/src/main/java/com/mikepenz/materialdrawer/app/MiniDrawerActivity.java\r\n        // https://github.com/mikepenz/Crossfader\r\n        compile &#39;com.mikepenz:crossfader:1.3.7@aar&#39;\r\n        // used to provide the two step crossfade DrawerLayout. Which allows to have a mini layout which transforms to a normal layout within the drawer\r\n        // --&gt; https://github.com/mikepenz/MaterialDrawer/blob/develop/app/src/main/java/com/mikepenz/materialdrawer/app/CrossfadeDrawerLayoutActvitiy.java\r\n        // https://github.com/mikepenz/CrossfadeDrawerLayout\r\n        compile(&#39;com.mikepenz:crossfadedrawerlayout:0.3.4@aar&#39;)\r\n    \r\n        // icon fonts used inside the sample\r\n        // https://github.com/mikepenz/Android-Iconics\r\n        compile &#39;com.mikepenz:google-material-typeface:2.2.0.1@aar&#39;\r\n        compile &#39;com.mikepenz:fontawesome-typeface:4.4.0.1@aar&#39;\r\n        compile &#39;com.mikepenz:octicons-typeface:3.0.0.1@aar&#39;\r\n    \r\n        // Charts\r\n        compile &#39;com.github.blackfizz:eazegraph:1.0.10-SNAPSHOT@aar&#39;\r\n        //compile project(&quot;:libs:EazeGraph&quot;)\r\n        //compile &#39;com.github.blackfizz:eazegraph:1.2.2@aar&#39;\r\n        //compile &#39;com.nineoldandroids:library:2.4.0&#39;\r\n    }\r\n\r\n\r\nError log\r\n\r\n    Information:Gradle tasks [assemble]\r\n    Observed package id &#39;add-ons;addon-google_apis-google-23&#39; in inconsistent location &#39;E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23-1&#39; (Expected &#39;E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23&#39;)\r\n    Already observed package id &#39;add-ons;addon-google_apis-google-23&#39; in &#39;E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23&#39;. Skipping duplicate at &#39;E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23-1&#39;\r\n    :app:preBuild UP-TO-DATE\r\n    :app:preDebugBuild UP-TO-DATE\r\n    :app:checkDebugManifest\r\n    :app:preReleaseBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:preBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:preReleaseBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileReleaseNdk UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileLint\r\n    :libs:MikepenzMaterialDrawer:copyReleaseLint UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:checkReleaseManifest\r\n    :libs:MikepenzMaterialDrawer:preDebugAndroidTestBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:preDebugBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:preDebugUnitTestBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:preReleaseUnitTestBuild UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportAnimatedVectorDrawable2411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportAppcompatV72411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportDesign2411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportRecyclerviewV72411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportSupportV42411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComAndroidSupportSupportVectorDrawable2411Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComMikepenzFastadapter160Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComMikepenzIconicsCore267Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareComMikepenzMaterialize090Library UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:prepareReleaseDependencies\r\n    :libs:MikepenzMaterialDrawer:compileReleaseAidl UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileReleaseRenderscript UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateReleaseBuildConfig UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeReleaseShaders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileReleaseShaders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateReleaseAssets UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeReleaseAssets UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateReleaseResValues UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateReleaseResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeReleaseResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processReleaseManifest UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processReleaseResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateReleaseSources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:incrementalReleaseJavaCompilationSafeguard UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileReleaseJavaWithJavac UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:extractReleaseAnnotations UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeReleaseProguardFiles UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:packageReleaseRenderscript UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:packageReleaseResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processReleaseJavaRes UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformResourcesWithMergeJavaResForRelease UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformClassesAndResourcesWithSyncLibJarsForRelease UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeReleaseJniLibFolders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformNative_libsWithMergeJniLibsForRelease UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformNative_libsWithSyncJniLibsForRelease UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:bundleRelease UP-TO-DATE\r\n    :app:prepareComAndroidSupportAnimatedVectorDrawable2411Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportAppcompatV72411Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportCardviewV72400Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportDesign2411Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportRecyclerviewV72411Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportSupportV42411Library UP-TO-DATE\r\n    :app:prepareComAndroidSupportSupportVectorDrawable2411Library UP-TO-DATE\r\n    :app:prepareComGithubBlackfizzEazegraph1010SNAPSHOTLibrary UP-TO-DATE\r\n    :app:prepareComMikepenzAboutlibraries570Library UP-TO-DATE\r\n    :app:prepareComMikepenzCrossfadedrawerlayout034Library UP-TO-DATE\r\n    :app:prepareComMikepenzCrossfader137Library UP-TO-DATE\r\n    :app:prepareComMikepenzFastadapter160Library UP-TO-DATE\r\n    :app:prepareComMikepenzFontawesomeTypeface4401Library UP-TO-DATE\r\n    :app:prepareComMikepenzGoogleMaterialTypeface2201Library UP-TO-DATE\r\n    :app:prepareComMikepenzIconicsCore267Library UP-TO-DATE\r\n    :app:prepareComMikepenzItemanimators024Library UP-TO-DATE\r\n    :app:prepareComMikepenzMaterialize090Library UP-TO-DATE\r\n    :app:prepareComMikepenzOcticonsTypeface3001Library UP-TO-DATE\r\n    :app:prepareOIU_with_API_FinalLibsMikepenzMaterialDrawerUnspecifiedLibrary UP-TO-DATE\r\n    :app:prepareDebugDependencies\r\n    :app:compileDebugAidl UP-TO-DATE\r\n    :app:compileDebugRenderscript UP-TO-DATE\r\n    :app:generateDebugBuildConfig UP-TO-DATE\r\n    :app:mergeDebugShaders UP-TO-DATE\r\n    :app:compileDebugShaders UP-TO-DATE\r\n    :app:generateDebugAssets UP-TO-DATE\r\n    :app:mergeDebugAssets UP-TO-DATE\r\n    :app:generateDebugResValues UP-TO-DATE\r\n    :app:generateDebugResources UP-TO-DATE\r\n    :app:mergeDebugResources UP-TO-DATE\r\n    :app:processDebugManifest UP-TO-DATE\r\n    :app:processDebugResources UP-TO-DATE\r\n    :app:generateDebugSources UP-TO-DATE\r\n    :app:incrementalDebugJavaCompilationSafeguard\r\n    :app:compileDebugJavaWithJavac\r\n    :app:compileDebugJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\r\n    Note: E:\\Projects\\Android\\OIU_with_API_Final\\app\\src\\main\\java\\sd\\edu\\oiu\\medicine\\mustafa\\RobotNoor.java uses or overrides a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    :app:compileDebugNdk UP-TO-DATE\r\n    :app:compileDebugSources\r\n    :app:prePackageMarkerForDebug\r\n    :app:transformClassesWithDexForDebug\r\n    To run dex in process, the Gradle daemon needs a larger heap.\r\n    It currently has approximately 910 MB.\r\n    For faster builds, increase the maximum heap size for the Gradle daemon to more than 2048 MB.\r\n    To do this set org.gradle.jvmargs=-Xmx2048M in the project gradle.properties.\r\n    For more information see https://docs.gradle.org/current/userguide/build_environment.html\r\n    :app:mergeDebugJniLibFolders\r\n    :app:transformNative_libsWithMergeJniLibsForDebug\r\n    :app:processDebugJavaRes UP-TO-DATE\r\n    :app:transformResourcesWithMergeJavaResForDebug\r\n    :app:validateDebugSigning\r\n    :app:packageDebug\r\n    :app:zipalignDebug\r\n    :app:assembleDebug\r\n    :app:checkReleaseManifest\r\n    :app:prepareReleaseDependencies\r\n    :app:compileReleaseAidl\r\n    :app:compileReleaseRenderscript\r\n    :app:generateReleaseBuildConfig\r\n    :app:mergeReleaseShaders\r\n    :app:compileReleaseShaders\r\n    :app:generateReleaseAssets\r\n    :app:mergeReleaseAssets\r\n    :app:generateReleaseResValues UP-TO-DATE\r\n    :app:generateReleaseResources\r\n    :app:mergeReleaseResources\r\n    :app:processReleaseManifest\r\n    :app:processReleaseResources\r\n    :app:generateReleaseSources\r\n    :app:incrementalReleaseJavaCompilationSafeguard\r\n    :app:compileReleaseJavaWithJavac\r\n    :app:compileReleaseJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\r\n    Note: E:\\Projects\\Android\\OIU_with_API_Final\\app\\src\\main\\java\\sd\\edu\\oiu\\medicine\\mustafa\\RobotNoor.java uses or overrides a deprecated API.\r\n    Note: Recompile with -Xlint:deprecation for details.\r\n    :app:compileReleaseNdk UP-TO-DATE\r\n    :app:compileReleaseSources\r\n    :app:lintVitalRelease\r\n    :app:prePackageMarkerForRelease\r\n    :app:transformClassesWithDexForRelease\r\n    :app:mergeReleaseJniLibFolders\r\n    :app:transformNative_libsWithMergeJniLibsForRelease\r\n    :app:processReleaseJavaRes UP-TO-DATE\r\n    :app:transformResourcesWithMergeJavaResForRelease\r\n    :app:packageRelease\r\n    :app:assembleRelease\r\n    :app:assemble\r\n    :libs:MikepenzMaterialDrawer:compileDebugNdk UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:copyDebugLint UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:checkDebugManifest\r\n    :libs:MikepenzMaterialDrawer:prepareDebugDependencies\r\n    :libs:MikepenzMaterialDrawer:compileDebugAidl UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileDebugRenderscript UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugBuildConfig UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeDebugShaders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileDebugShaders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugAssets UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeDebugAssets UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugResValues UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeDebugResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processDebugManifest UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processDebugResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugSources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:incrementalDebugJavaCompilationSafeguard UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileDebugJavaWithJavac UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:extractDebugAnnotations UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeDebugProguardFiles UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:packageDebugRenderscript UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:packageDebugResources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:processDebugJavaRes UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformResourcesWithMergeJavaResForDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformClassesAndResourcesWithSyncLibJarsForDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:mergeDebugJniLibFolders UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformNative_libsWithMergeJniLibsForDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:transformNative_libsWithSyncJniLibsForDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:bundleDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileDebugSources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:assembleDebug UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:compileReleaseSources UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:assembleRelease UP-TO-DATE\r\n    :libs:MikepenzMaterialDrawer:generateDebugJavadoc\r\n    100 warnings\r\n    :libs:MikepenzMaterialDrawer:jarDebugJavadoc\r\n    :libs:MikepenzMaterialDrawer:jarDebugSources\r\n    :libs:MikepenzMaterialDrawer:generateReleaseJavadoc\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\view\\BezelImageView.java\r\n    Error:(50, 35) error: cannot find symbol class R\r\n    Error:(50, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\holder\\BadgeStyle.java\r\n    Error:(11, 35) error: cannot find symbol class R\r\n    Error:(11, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BaseViewHolder.java\r\n    Error:(8, 35) error: cannot find symbol class R\r\n    Error:(8, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ContainerDrawerItem.java\r\n    Error:(11, 35) error: cannot find symbol class R\r\n    Error:(11, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\DividerDrawerItem.java\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ExpandableDrawerItem.java\r\n    Error:(15, 35) error: cannot find symbol class R\r\n    Error:(15, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\MiniDrawerItem.java\r\n    Error:(13, 35) error: cannot find symbol class R\r\n    Error:(13, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\PrimaryDrawerItem.java\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\MiniProfileDrawerItem.java\r\n    Error:(15, 35) error: cannot find symbol class R\r\n    Error:(15, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ProfileSettingDrawerItem.java\r\n    Error:(19, 35) error: cannot find symbol class R\r\n    Error:(19, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SwitchDrawerItem.java\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ToggleDrawerItem.java\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    Error:(10, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SectionDrawerItem.java\r\n    Error:(12, 35) error: cannot find symbol class R\r\n    Error:(12, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\util\\DrawerItemViewHelper.java\r\n    Error:(8, 35) error: cannot find symbol class R\r\n    Error:(8, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\util\\DrawerUIUtils.java\r\n    Error:(16, 35) error: cannot find symbol class R\r\n    Error:(16, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\AbstractDrawerItem.java\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BaseDrawerItem.java\r\n    Error:(16, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BasePrimaryDrawerItem.java\r\n    Warning:(54, 8) no description for @param\r\n    Warning:(54, 8) no description for @param\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ProfileDrawerItem.java\r\n    Error:(21, 35) error: cannot find symbol class R\r\n    Error:(21, 35) error: cannot find symbol class R\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondaryDrawerItem.java\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondarySwitchDrawerItem.java\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondaryToggleDrawerItem.java\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    Error:(6, 35) error: cannot find symbol class R\r\n    Warning:(29, 8) no description for @param\r\n    Warning:(30, 8) no description for @return\r\n    E:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\AccountHeader.java\r\n\r\n","title":"Android Studio &quot;mikepenz materialdrawer&quot; cannot find symbol class R [ release apk ]","body":"<p>so am working with mikepenz materialdrawer in my project and everything was fine and i was able to get Release apk from android studio</p>\n\n<p>suddenly i have this error [ cannot find symbol class R ] when i try to get the release APK</p>\n\n<p>gradle file </p>\n\n<pre><code>apply plugin: 'com.android.application'\n\nandroid {\n    compileSdkVersion 24\n    buildToolsVersion \"24.0.1\"\n\n    defaultConfig {\n        applicationId \"sd.edu.oiu.medicine.mustafa\"\n        minSdkVersion 15\n        targetSdkVersion 24\n        versionCode 1\n        versionName \"1.0\"\n    }\n    packagingOptions {\n        exclude 'META-INF/LICENSE'\n        exclude 'META-INF/LICENSE-FIREBASE.txt'\n        exclude 'META-INF/NOTICE'\n    }\n    buildTypes {\n        release {\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'\n        }\n    }\n}\n\ndependencies {\n    compile fileTree(dir: 'libs', include: ['*.jar'])\n    testCompile 'junit:junit:4.12'\n    compile 'com.android.support:appcompat-v7:24.1.1'\n    //compile 'com.android.support:design:24.0.1'\n    // Firebase\n    compile 'com.firebase:firebase-client-android:2.5.1+'\n    compile 'com.mcxiaoke.volley:library:1.0.19'\n\n    compile project(\":libs:MikepenzMaterialDrawer\")\n    // used to showcase how to load images\n    //compile 'com.squareup.picasso:picasso:2.5.2'\n    compile 'com.github.bumptech.glide:glide:3.7.0'\n\n    // used to generate the Open Source section\n    // https://github.com/mikepenz/AboutLibraries\n    compile('com.mikepenz:aboutlibraries:5.7.0@aar') {\n        transitive = true\n        exclude module: \"fastadapter\"\n    }\n    //used to provide different itemAnimators for the RecyclerView\n    //https://github.com/mikepenz/ItemAnimators\n    compile 'com.mikepenz:itemanimators:0.2.4@aar'\n    // used to provide the MiniDrawer to normal Drawer crossfade effect via a SlidingPane layout\n    // --&gt; https://github.com/mikepenz/MaterialDrawer/blob/develop/app/src/main/java/com/mikepenz/materialdrawer/app/MiniDrawerActivity.java\n    // https://github.com/mikepenz/Crossfader\n    compile 'com.mikepenz:crossfader:1.3.7@aar'\n    // used to provide the two step crossfade DrawerLayout. Which allows to have a mini layout which transforms to a normal layout within the drawer\n    // --&gt; https://github.com/mikepenz/MaterialDrawer/blob/develop/app/src/main/java/com/mikepenz/materialdrawer/app/CrossfadeDrawerLayoutActvitiy.java\n    // https://github.com/mikepenz/CrossfadeDrawerLayout\n    compile('com.mikepenz:crossfadedrawerlayout:0.3.4@aar')\n\n    // icon fonts used inside the sample\n    // https://github.com/mikepenz/Android-Iconics\n    compile 'com.mikepenz:google-material-typeface:2.2.0.1@aar'\n    compile 'com.mikepenz:fontawesome-typeface:4.4.0.1@aar'\n    compile 'com.mikepenz:octicons-typeface:3.0.0.1@aar'\n\n    // Charts\n    compile 'com.github.blackfizz:eazegraph:1.0.10-SNAPSHOT@aar'\n    //compile project(\":libs:EazeGraph\")\n    //compile 'com.github.blackfizz:eazegraph:1.2.2@aar'\n    //compile 'com.nineoldandroids:library:2.4.0'\n}\n</code></pre>\n\n<p>Error log</p>\n\n<pre><code>Information:Gradle tasks [assemble]\nObserved package id 'add-ons;addon-google_apis-google-23' in inconsistent location 'E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23-1' (Expected 'E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23')\nAlready observed package id 'add-ons;addon-google_apis-google-23' in 'E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23'. Skipping duplicate at 'E:\\Android\\sdk\\add-ons\\addon-google_apis-google-23-1'\n:app:preBuild UP-TO-DATE\n:app:preDebugBuild UP-TO-DATE\n:app:checkDebugManifest\n:app:preReleaseBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:preBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:preReleaseBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileReleaseNdk UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileLint\n:libs:MikepenzMaterialDrawer:copyReleaseLint UP-TO-DATE\n:libs:MikepenzMaterialDrawer:checkReleaseManifest\n:libs:MikepenzMaterialDrawer:preDebugAndroidTestBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:preDebugBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:preDebugUnitTestBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:preReleaseUnitTestBuild UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportAnimatedVectorDrawable2411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportAppcompatV72411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportDesign2411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportRecyclerviewV72411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportSupportV42411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComAndroidSupportSupportVectorDrawable2411Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComMikepenzFastadapter160Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComMikepenzIconicsCore267Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareComMikepenzMaterialize090Library UP-TO-DATE\n:libs:MikepenzMaterialDrawer:prepareReleaseDependencies\n:libs:MikepenzMaterialDrawer:compileReleaseAidl UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileReleaseRenderscript UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateReleaseBuildConfig UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeReleaseShaders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileReleaseShaders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateReleaseAssets UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeReleaseAssets UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateReleaseResValues UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateReleaseResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeReleaseResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processReleaseManifest UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processReleaseResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateReleaseSources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:incrementalReleaseJavaCompilationSafeguard UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileReleaseJavaWithJavac UP-TO-DATE\n:libs:MikepenzMaterialDrawer:extractReleaseAnnotations UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeReleaseProguardFiles UP-TO-DATE\n:libs:MikepenzMaterialDrawer:packageReleaseRenderscript UP-TO-DATE\n:libs:MikepenzMaterialDrawer:packageReleaseResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processReleaseJavaRes UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformResourcesWithMergeJavaResForRelease UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformClassesAndResourcesWithSyncLibJarsForRelease UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeReleaseJniLibFolders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformNative_libsWithMergeJniLibsForRelease UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformNative_libsWithSyncJniLibsForRelease UP-TO-DATE\n:libs:MikepenzMaterialDrawer:bundleRelease UP-TO-DATE\n:app:prepareComAndroidSupportAnimatedVectorDrawable2411Library UP-TO-DATE\n:app:prepareComAndroidSupportAppcompatV72411Library UP-TO-DATE\n:app:prepareComAndroidSupportCardviewV72400Library UP-TO-DATE\n:app:prepareComAndroidSupportDesign2411Library UP-TO-DATE\n:app:prepareComAndroidSupportRecyclerviewV72411Library UP-TO-DATE\n:app:prepareComAndroidSupportSupportV42411Library UP-TO-DATE\n:app:prepareComAndroidSupportSupportVectorDrawable2411Library UP-TO-DATE\n:app:prepareComGithubBlackfizzEazegraph1010SNAPSHOTLibrary UP-TO-DATE\n:app:prepareComMikepenzAboutlibraries570Library UP-TO-DATE\n:app:prepareComMikepenzCrossfadedrawerlayout034Library UP-TO-DATE\n:app:prepareComMikepenzCrossfader137Library UP-TO-DATE\n:app:prepareComMikepenzFastadapter160Library UP-TO-DATE\n:app:prepareComMikepenzFontawesomeTypeface4401Library UP-TO-DATE\n:app:prepareComMikepenzGoogleMaterialTypeface2201Library UP-TO-DATE\n:app:prepareComMikepenzIconicsCore267Library UP-TO-DATE\n:app:prepareComMikepenzItemanimators024Library UP-TO-DATE\n:app:prepareComMikepenzMaterialize090Library UP-TO-DATE\n:app:prepareComMikepenzOcticonsTypeface3001Library UP-TO-DATE\n:app:prepareOIU_with_API_FinalLibsMikepenzMaterialDrawerUnspecifiedLibrary UP-TO-DATE\n:app:prepareDebugDependencies\n:app:compileDebugAidl UP-TO-DATE\n:app:compileDebugRenderscript UP-TO-DATE\n:app:generateDebugBuildConfig UP-TO-DATE\n:app:mergeDebugShaders UP-TO-DATE\n:app:compileDebugShaders UP-TO-DATE\n:app:generateDebugAssets UP-TO-DATE\n:app:mergeDebugAssets UP-TO-DATE\n:app:generateDebugResValues UP-TO-DATE\n:app:generateDebugResources UP-TO-DATE\n:app:mergeDebugResources UP-TO-DATE\n:app:processDebugManifest UP-TO-DATE\n:app:processDebugResources UP-TO-DATE\n:app:generateDebugSources UP-TO-DATE\n:app:incrementalDebugJavaCompilationSafeguard\n:app:compileDebugJavaWithJavac\n:app:compileDebugJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\nNote: E:\\Projects\\Android\\OIU_with_API_Final\\app\\src\\main\\java\\sd\\edu\\oiu\\medicine\\mustafa\\RobotNoor.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\n:app:compileDebugNdk UP-TO-DATE\n:app:compileDebugSources\n:app:prePackageMarkerForDebug\n:app:transformClassesWithDexForDebug\nTo run dex in process, the Gradle daemon needs a larger heap.\nIt currently has approximately 910 MB.\nFor faster builds, increase the maximum heap size for the Gradle daemon to more than 2048 MB.\nTo do this set org.gradle.jvmargs=-Xmx2048M in the project gradle.properties.\nFor more information see https://docs.gradle.org/current/userguide/build_environment.html\n:app:mergeDebugJniLibFolders\n:app:transformNative_libsWithMergeJniLibsForDebug\n:app:processDebugJavaRes UP-TO-DATE\n:app:transformResourcesWithMergeJavaResForDebug\n:app:validateDebugSigning\n:app:packageDebug\n:app:zipalignDebug\n:app:assembleDebug\n:app:checkReleaseManifest\n:app:prepareReleaseDependencies\n:app:compileReleaseAidl\n:app:compileReleaseRenderscript\n:app:generateReleaseBuildConfig\n:app:mergeReleaseShaders\n:app:compileReleaseShaders\n:app:generateReleaseAssets\n:app:mergeReleaseAssets\n:app:generateReleaseResValues UP-TO-DATE\n:app:generateReleaseResources\n:app:mergeReleaseResources\n:app:processReleaseManifest\n:app:processReleaseResources\n:app:generateReleaseSources\n:app:incrementalReleaseJavaCompilationSafeguard\n:app:compileReleaseJavaWithJavac\n:app:compileReleaseJavaWithJavac - is not incremental (e.g. outputs have changed, no previous execution, etc.).\nNote: E:\\Projects\\Android\\OIU_with_API_Final\\app\\src\\main\\java\\sd\\edu\\oiu\\medicine\\mustafa\\RobotNoor.java uses or overrides a deprecated API.\nNote: Recompile with -Xlint:deprecation for details.\n:app:compileReleaseNdk UP-TO-DATE\n:app:compileReleaseSources\n:app:lintVitalRelease\n:app:prePackageMarkerForRelease\n:app:transformClassesWithDexForRelease\n:app:mergeReleaseJniLibFolders\n:app:transformNative_libsWithMergeJniLibsForRelease\n:app:processReleaseJavaRes UP-TO-DATE\n:app:transformResourcesWithMergeJavaResForRelease\n:app:packageRelease\n:app:assembleRelease\n:app:assemble\n:libs:MikepenzMaterialDrawer:compileDebugNdk UP-TO-DATE\n:libs:MikepenzMaterialDrawer:copyDebugLint UP-TO-DATE\n:libs:MikepenzMaterialDrawer:checkDebugManifest\n:libs:MikepenzMaterialDrawer:prepareDebugDependencies\n:libs:MikepenzMaterialDrawer:compileDebugAidl UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileDebugRenderscript UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugBuildConfig UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeDebugShaders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileDebugShaders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugAssets UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeDebugAssets UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugResValues UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeDebugResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processDebugManifest UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processDebugResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugSources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:incrementalDebugJavaCompilationSafeguard UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileDebugJavaWithJavac UP-TO-DATE\n:libs:MikepenzMaterialDrawer:extractDebugAnnotations UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeDebugProguardFiles UP-TO-DATE\n:libs:MikepenzMaterialDrawer:packageDebugRenderscript UP-TO-DATE\n:libs:MikepenzMaterialDrawer:packageDebugResources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:processDebugJavaRes UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformResourcesWithMergeJavaResForDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformClassesAndResourcesWithSyncLibJarsForDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:mergeDebugJniLibFolders UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformNative_libsWithMergeJniLibsForDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:transformNative_libsWithSyncJniLibsForDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:bundleDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileDebugSources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:assembleDebug UP-TO-DATE\n:libs:MikepenzMaterialDrawer:compileReleaseSources UP-TO-DATE\n:libs:MikepenzMaterialDrawer:assembleRelease UP-TO-DATE\n:libs:MikepenzMaterialDrawer:generateDebugJavadoc\n100 warnings\n:libs:MikepenzMaterialDrawer:jarDebugJavadoc\n:libs:MikepenzMaterialDrawer:jarDebugSources\n:libs:MikepenzMaterialDrawer:generateReleaseJavadoc\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\view\\BezelImageView.java\nError:(50, 35) error: cannot find symbol class R\nError:(50, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\holder\\BadgeStyle.java\nError:(11, 35) error: cannot find symbol class R\nError:(11, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BaseViewHolder.java\nError:(8, 35) error: cannot find symbol class R\nError:(8, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ContainerDrawerItem.java\nError:(11, 35) error: cannot find symbol class R\nError:(11, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\DividerDrawerItem.java\nError:(10, 35) error: cannot find symbol class R\nError:(10, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ExpandableDrawerItem.java\nError:(15, 35) error: cannot find symbol class R\nError:(15, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\MiniDrawerItem.java\nError:(13, 35) error: cannot find symbol class R\nError:(13, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\PrimaryDrawerItem.java\nError:(10, 35) error: cannot find symbol class R\nError:(10, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\MiniProfileDrawerItem.java\nError:(15, 35) error: cannot find symbol class R\nError:(15, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ProfileSettingDrawerItem.java\nError:(19, 35) error: cannot find symbol class R\nError:(19, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SwitchDrawerItem.java\nError:(10, 35) error: cannot find symbol class R\nError:(10, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ToggleDrawerItem.java\nError:(10, 35) error: cannot find symbol class R\nError:(10, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SectionDrawerItem.java\nError:(12, 35) error: cannot find symbol class R\nError:(12, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\util\\DrawerItemViewHelper.java\nError:(8, 35) error: cannot find symbol class R\nError:(8, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\util\\DrawerUIUtils.java\nError:(16, 35) error: cannot find symbol class R\nError:(16, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\AbstractDrawerItem.java\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BaseDrawerItem.java\nError:(16, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\BasePrimaryDrawerItem.java\nWarning:(54, 8) no description for @param\nWarning:(54, 8) no description for @param\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\ProfileDrawerItem.java\nError:(21, 35) error: cannot find symbol class R\nError:(21, 35) error: cannot find symbol class R\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondaryDrawerItem.java\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondarySwitchDrawerItem.java\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\model\\SecondaryToggleDrawerItem.java\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nError:(6, 35) error: cannot find symbol class R\nWarning:(29, 8) no description for @param\nWarning:(30, 8) no description for @return\nE:\\Projects\\Android\\OIU_with_API_Final\\libs\\MikepenzMaterialDrawer\\src\\main\\java\\com\\mikepenz\\materialdrawer\\AccountHeader.java\n</code></pre>\n"},{"tags":["java","loops","methods"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":6,"creation_date":1686676211,"post_id":76467237,"comment_id":134830835,"body_markdown":"what is `exit(0)` expected to do, after the &quot;...Try Again&quot; message? [documentation of exit](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#exit(int)): &quot;Initiates the shutdown sequence of the Java Virtual Machine. This method always blocks indefinitely.&quot;","body":"what is <code>exit(0)</code> expected to do, after the &quot;...Try Again&quot; message? <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/System.html#exit(int)\" rel=\"nofollow noreferrer\">documentation of exit</a>: &quot;Initiates the shutdown sequence of the Java Virtual Machine. This method always blocks indefinitely.&quot;"},{"owner":{"account_id":155770,"reputation":120153,"user_id":372643,"accept_rate":88,"display_name":"Bruno"},"score":0,"creation_date":1686676300,"post_id":76467237,"comment_id":134830853,"body_markdown":"You&#39;re only reading the input once, outside your loop. Your `password` method is also only ever running once.","body":"You&#39;re only reading the input once, outside your loop. Your <code>password</code> method is also only ever running once."},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1686676885,"post_id":76467237,"comment_id":134830978,"body_markdown":"`while (true) System.exit(0);` is not a loop for the same reason.","body":"<code>while (true) System.exit(0);</code> is not a loop for the same reason."}],"answers":[{"comments":[{"owner":{"account_id":27288435,"reputation":1,"user_id":20807242,"display_name":"Puneet Sharma"},"score":0,"creation_date":1686762207,"post_id":76468752,"comment_id":134844944,"body_markdown":"Thankyou Very Much","body":"Thankyou Very Much"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686775528,"post_id":76468752,"comment_id":134847307,"body_markdown":"No problem, glad it helped.","body":"No problem, glad it helped."}],"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686690538,"creation_date":1686690538,"answer_id":76468752,"question_id":76467237,"body_markdown":"The reason it is not looping 3 times is because your 3rd condition contains an _exit_ call.\r\n\r\n```java\r\nelse if (!passkey.equals(&quot;TerrorX&quot;)) {\r\n    System.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\r\n    exit(0);\r\n}\r\n```\r\n\r\nThus, if I enter the wrong password, it will exit the program.\r\n\r\nFurthermore, it will simply loop 3 times on an incorrect _passkey_ value, and exit.  \r\nIt will not have been provided with an updated user input.\r\n\r\n```none\r\nWelcome to Self Taught AI\r\nCreator Puneet Sharma\r\nTo Proceed further Please enter your passkey\r\nabc\r\nInvalid Passphrase \r\n Kindly Try Again\r\nInvalid Passphrase \r\n Kindly Try Again\r\nYou have exceeded multiple attempts\r\nInvalid Passphrase \r\n Kindly Try Again\r\n```\r\n\r\nHere is how to resolve the issue.\r\n\r\nIncrease the scope of the _Scanner_ object, and place it as a class variable.&amp;nbsp; So, outside of a method.  \r\nAdditionally, it must be declared as _static_, since your method is static.\r\n\r\nYou can then access it from within the _password_ method, in order to capture a new input value from the user.\r\n\r\nOn a final note, the _while-loop_ conditional statement should be checking for an _i_ value lesser-than _3_, and not equal-to it.\r\n\r\n```none\r\nWelcome to Self Taught AI\r\nCreator Puneet Sharma\r\nTo Proceed further Please enter your passkey\r\nabc\r\nInvalid Passphrase \r\n Kindly Try Again\r\nPlease enter your passkey\r\nabc\r\nInvalid Passphrase \r\n Kindly Try Again\r\nPlease enter your passkey\r\nabc\r\nYou have exceeded multiple attempts\r\n```\r\n\r\nHere is the re-factored code.\r\n\r\n```java\r\nstatic Scanner input = new Scanner(System.in);\r\n\r\npublic static void password(String passkey, int i) {\r\n    while (i &lt; 3) {\r\n        //Switch can be used too!\r\n        i++;\r\n        if (passkey.equals(&quot;TerrorX&quot;)) {\r\n            System.out.println(&quot;Welcome Master Puneet \\nI am really happy to see you here&quot;);\r\n            exit(0);\r\n        } else if (i == 3) {\r\n            System.out.println(&quot;You have exceeded multiple attempts&quot;);\r\n        } else if (!passkey.equals(&quot;TerrorX&quot;)) {\r\n            System.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\r\n            System.out.println(&quot;Please enter your passkey&quot;);\r\n            passkey = input.next();\r\n        }\r\n\r\n\r\n    }\r\n\r\n}\r\n\r\npublic static void main(String[] args) {\r\n    System.out.println(&quot;Welcome to Self Taught AI&quot;);\r\n    System.out.println(&quot;Creator Puneet Sharma&quot;);\r\n    System.out.println(&quot;To Proceed further Please enter your passkey&quot;);\r\n\r\n    String passkey1 = input.next();\r\n    // Taking Commands here\r\n    password(passkey1,0);\r\n}\r\n```","title":"why loop is not working in my given method","body":"<p>The reason it is not looping 3 times is because your 3rd condition contains an <em>exit</em> call.</p>\n<pre class=\"lang-java prettyprint-override\"><code>else if (!passkey.equals(&quot;TerrorX&quot;)) {\n    System.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\n    exit(0);\n}\n</code></pre>\n<p>Thus, if I enter the wrong password, it will exit the program.</p>\n<p>Furthermore, it will simply loop 3 times on an incorrect <em>passkey</em> value, and exit.<br />\nIt will not have been provided with an updated user input.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Welcome to Self Taught AI\nCreator Puneet Sharma\nTo Proceed further Please enter your passkey\nabc\nInvalid Passphrase \n Kindly Try Again\nInvalid Passphrase \n Kindly Try Again\nYou have exceeded multiple attempts\nInvalid Passphrase \n Kindly Try Again\n</code></pre>\n<p>Here is how to resolve the issue.</p>\n<p>Increase the scope of the <em>Scanner</em> object, and place it as a class variable.  So, outside of a method.<br />\nAdditionally, it must be declared as <em>static</em>, since your method is static.</p>\n<p>You can then access it from within the <em>password</em> method, in order to capture a new input value from the user.</p>\n<p>On a final note, the <em>while-loop</em> conditional statement should be checking for an <em>i</em> value lesser-than <em>3</em>, and not equal-to it.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Welcome to Self Taught AI\nCreator Puneet Sharma\nTo Proceed further Please enter your passkey\nabc\nInvalid Passphrase \n Kindly Try Again\nPlease enter your passkey\nabc\nInvalid Passphrase \n Kindly Try Again\nPlease enter your passkey\nabc\nYou have exceeded multiple attempts\n</code></pre>\n<p>Here is the re-factored code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Scanner input = new Scanner(System.in);\n\npublic static void password(String passkey, int i) {\n    while (i &lt; 3) {\n        //Switch can be used too!\n        i++;\n        if (passkey.equals(&quot;TerrorX&quot;)) {\n            System.out.println(&quot;Welcome Master Puneet \\nI am really happy to see you here&quot;);\n            exit(0);\n        } else if (i == 3) {\n            System.out.println(&quot;You have exceeded multiple attempts&quot;);\n        } else if (!passkey.equals(&quot;TerrorX&quot;)) {\n            System.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\n            System.out.println(&quot;Please enter your passkey&quot;);\n            passkey = input.next();\n        }\n\n\n    }\n\n}\n\npublic static void main(String[] args) {\n    System.out.println(&quot;Welcome to Self Taught AI&quot;);\n    System.out.println(&quot;Creator Puneet Sharma&quot;);\n    System.out.println(&quot;To Proceed further Please enter your passkey&quot;);\n\n    String passkey1 = input.next();\n    // Taking Commands here\n    password(passkey1,0);\n}\n</code></pre>\n"}],"owner":{"account_id":27288435,"reputation":1,"user_id":20807242,"display_name":"Puneet Sharma"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686690538,"creation_date":1686676034,"question_id":76467237,"body_markdown":"I am trying to create a method by which if a wrong passkey is entered, then a loop will run saying invalid passkey and on the 3rd turn it will exit.\r\nbut loop is not working why i am creating it in a method.\r\n\r\n\timport java.util.*;\r\n\r\n\timport static java.lang.System.exit;\r\n\r\n\tpublic class Main {\r\n\r\n\t\tpublic static void password(String passkey, int i) {\r\n\t\t\twhile (i &lt;= 3) {\r\n\t\t\t\t//Switch can be used too!\r\n\t\t\t\ti++;\r\n\t\t\t\tif (passkey.equals(&quot;TerrorX&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;Welcome Master Puneet \\nI am really happy to see you here&quot;);\r\n\t\t\t\t\texit(0);\r\n\t\t\t\t} else if (i == 3) {\r\n\t\t\t\t\tSystem.out.println(&quot;You have exceeded multiple attempts&quot;);\r\n\t\t\t\t} else if (!passkey.equals(&quot;TerrorX&quot;)) {\r\n\t\t\t\t\tSystem.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\r\n\t\t\t\t\texit(0);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSystem.out.println(&quot;Welcome to Self Taught AI&quot;);\r\n\t\t\tSystem.out.println(&quot;Creator Puneet Sharma&quot;);\r\n\t\t\tSystem.out.println(&quot;To Proceed further Please enter your passkey&quot;);\r\n\r\n\t\t\tScanner input = new Scanner(System.in);\r\n\t\t\tString passkey1 = input.next();\r\n\t\t\t// Taking Commands here\r\n\t\t\tpassword(passkey1,0);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\nI was expecting a loop to run but it not, only while i created it in a method.","title":"why loop is not working in my given method","body":"<p>I am trying to create a method by which if a wrong passkey is entered, then a loop will run saying invalid passkey and on the 3rd turn it will exit.\nbut loop is not working why i am creating it in a method.</p>\n<pre><code>import java.util.*;\n\nimport static java.lang.System.exit;\n\npublic class Main {\n\n    public static void password(String passkey, int i) {\n        while (i &lt;= 3) {\n            //Switch can be used too!\n            i++;\n            if (passkey.equals(&quot;TerrorX&quot;)) {\n                System.out.println(&quot;Welcome Master Puneet \\nI am really happy to see you here&quot;);\n                exit(0);\n            } else if (i == 3) {\n                System.out.println(&quot;You have exceeded multiple attempts&quot;);\n            } else if (!passkey.equals(&quot;TerrorX&quot;)) {\n                System.out.println(&quot;Invalid Passphrase \\n Kindly Try Again&quot;);\n                exit(0);\n            }\n\n\n        }\n\n    }\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Welcome to Self Taught AI&quot;);\n        System.out.println(&quot;Creator Puneet Sharma&quot;);\n        System.out.println(&quot;To Proceed further Please enter your passkey&quot;);\n\n        Scanner input = new Scanner(System.in);\n        String passkey1 = input.next();\n        // Taking Commands here\n        password(passkey1,0);\n    }\n}\n</code></pre>\n<p>I was expecting a loop to run but it not, only while i created it in a method.</p>\n"},{"tags":["java","bindy"],"owner":{"account_id":26009715,"reputation":1,"user_id":19718981,"display_name":"Aruna"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686690048,"creation_date":1686679466,"question_id":76467597,"body_markdown":"Camel Bindy FixedLengthRecord paddingChar and delimiter not working in DataField.\r\n\r\nExample:\r\n\r\n    @DataField(pos = 1, length = 5, paddingChar = &#39;0&#39;, delimiter = &quot;|&quot;)\r\n\r\nFor fixed length, when I use paddingChar separately its working and delimiter separately its working.\r\nWhen i use both, paddingChar not working. only delimiter working. Is there option to use both?\r\n\r\nthis worked fine:\r\n\r\n    @DataField(pos = 1, length = 5, paddingChar = &#39;0&#39;)\r\n\r\nthis also worked fine:\r\n\r\n    @DataField(pos = 1, length = 5, delimiter = &quot;|&quot;)\r\n\r\n","title":"Camel Bindy FixedLengthRecord paddingChar and delimiter not working in DataField","body":"<p>Camel Bindy FixedLengthRecord paddingChar and delimiter not working in DataField.</p>\n<p>Example:</p>\n<pre><code>@DataField(pos = 1, length = 5, paddingChar = '0', delimiter = &quot;|&quot;)\n</code></pre>\n<p>For fixed length, when I use paddingChar separately its working and delimiter separately its working.\nWhen i use both, paddingChar not working. only delimiter working. Is there option to use both?</p>\n<p>this worked fine:</p>\n<pre><code>@DataField(pos = 1, length = 5, paddingChar = '0')\n</code></pre>\n<p>this also worked fine:</p>\n<pre><code>@DataField(pos = 1, length = 5, delimiter = &quot;|&quot;)\n</code></pre>\n"},{"tags":["java","python-3.x","pyinstaller","executable","tabula-py"],"answers":[{"comments":[{"owner":{"account_id":12605043,"reputation":121,"user_id":9166295,"display_name":"paul"},"score":1,"creation_date":1561420108,"post_id":56582124,"comment_id":100049123,"body_markdown":"Sorry for the late reply, I created a stand alone executable using &quot;--onefile&quot; option. I think in this case you would not need to have a tabula folder within dist folder, how would I fix for stand alone executable? Do I need to specify hooks?","body":"Sorry for the late reply, I created a stand alone executable using &quot;--onefile&quot; option. I think in this case you would not need to have a tabula folder within dist folder, how would I fix for stand alone executable? Do I need to specify hooks?"}],"tags":[],"owner":{"account_id":15042846,"reputation":852,"user_id":10856873,"display_name":"EcSync"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1560434153,"creation_date":1560434153,"answer_id":56582124,"question_id":56550410,"body_markdown":"It looks like the tabula module hasn&#39;t been copied to the dist folder of your executable, in my experience this is a common problem with pyinstaller it can often miss packages in the python directory.\r\n\r\nGo to the dist folder and check if the tabula folder is there, if it&#39;s not then you&#39;ll need to copy it over.\r\n\r\nGo to your python directory, it should be somewhere like this:\r\n`C:\\Users\\&lt;user_name&gt;\\AppData\\Local\\Programs\\Python\\Python37-32\\Lib\\site-packages`\r\n\r\nCopy over any packages from here that need to be in the dist folder","title":"Unable to execute my script when converting it to exe","body":"<p>It looks like the tabula module hasn't been copied to the dist folder of your executable, in my experience this is a common problem with pyinstaller it can often miss packages in the python directory.</p>\n\n<p>Go to the dist folder and check if the tabula folder is there, if it's not then you'll need to copy it over.</p>\n\n<p>Go to your python directory, it should be somewhere like this:\n<code>C:\\Users\\&lt;user_name&gt;\\AppData\\Local\\Programs\\Python\\Python37-32\\Lib\\site-packages</code></p>\n\n<p>Copy over any packages from here that need to be in the dist folder</p>\n"},{"comments":[{"owner":{"account_id":11102236,"reputation":123,"user_id":8150584,"display_name":"Deepak Harish"},"score":0,"creation_date":1631796234,"post_id":57718558,"comment_id":122322905,"body_markdown":"I was using GUI version of pyinstaller called as &quot;auto-py-to-exe&quot;. I too faced same issue. The above solution worked. thanks @alleycat10","body":"I was using GUI version of pyinstaller called as &quot;auto-py-to-exe&quot;. I too faced same issue. The above solution worked. thanks @alleycat10"}],"tags":[],"owner":{"account_id":11390446,"reputation":76,"user_id":8350710,"display_name":"alleycat10"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1567119058,"creation_date":1567119058,"answer_id":57718558,"question_id":56550410,"body_markdown":"I had a similar problem, and I was able to solve it using the solution at this link: https://stackoverflow.com/questions/50544515/unable-to-access-jarfile-tabula-1-0-2-jar-with-dependencies-jar\r\n\r\nI built my app within a virtual environment, so I added a ```tabula``` folder with the ````tabula-1.0.2-jar-with-dependencies.jar```` file to my ````site-packages```` folder. Running the command ````pyinstaller --add-data apps\\Lib\\site-packages\\tabula\\tabula-1.0.2-jar-with-dependencies.jar;tabula --onefile Table_OCR.py```` builds the executable correctly for me.\r\n","title":"Unable to execute my script when converting it to exe","body":"<p>I had a similar problem, and I was able to solve it using the solution at this link: <a href=\"https://stackoverflow.com/questions/50544515/unable-to-access-jarfile-tabula-1-0-2-jar-with-dependencies-jar\">Unable to access jarfile &#39;tabula-1.0.2-jar-with-dependencies.jar&#39;</a></p>\n\n<p>I built my app within a virtual environment, so I added a <code>tabula</code> folder with the <code>tabula-1.0.2-jar-with-dependencies.jar</code> file to my <code>site-packages</code> folder. Running the command <code>pyinstaller --add-data apps\\Lib\\site-packages\\tabula\\tabula-1.0.2-jar-with-dependencies.jar;tabula --onefile Table_OCR.py</code> builds the executable correctly for me.</p>\n"},{"tags":[],"owner":{"account_id":10433926,"reputation":6736,"user_id":7692859,"display_name":"Anis R."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686689583,"creation_date":1686689583,"answer_id":76468639,"question_id":56550410,"body_markdown":"I found [this GitHub post][1] to be helpful.\r\n\r\nEssentially:\r\n\r\n1- Locate the tabula jar file on your system. The path may look something like this:\r\n\r\n    C:\\ProgramData\\Miniconda3\\Lib\\site-packages\\tabula\\tabula-1.0.5-jar-with-dependencies.jar\r\n\r\n2- Use the --add-file option when running pyinstaller:\r\n\r\n    pyinstaller your_file.py --add-data &quot;C:\\ProgramData\\Miniconda3\\Lib\\site-packages\\tabula\\tabula-1.0.5-jar-with-dependencies.jar;tabula&quot;\r\n\r\n(Notice the `;tabula` appended to the path. It is `;tabula` for Windows, `:tabula` for Linux).\r\n\r\n  [1]: https://github.com/chezou/tabula-py/issues/198#issuecomment-1198839621","title":"Unable to execute my script when converting it to exe","body":"<p>I found <a href=\"https://github.com/chezou/tabula-py/issues/198#issuecomment-1198839621\" rel=\"nofollow noreferrer\">this GitHub post</a> to be helpful.</p>\n<p>Essentially:</p>\n<p>1- Locate the tabula jar file on your system. The path may look something like this:</p>\n<pre><code>C:\\ProgramData\\Miniconda3\\Lib\\site-packages\\tabula\\tabula-1.0.5-jar-with-dependencies.jar\n</code></pre>\n<p>2- Use the --add-file option when running pyinstaller:</p>\n<pre><code>pyinstaller your_file.py --add-data &quot;C:\\ProgramData\\Miniconda3\\Lib\\site-packages\\tabula\\tabula-1.0.5-jar-with-dependencies.jar;tabula&quot;\n</code></pre>\n<p>(Notice the <code>;tabula</code> appended to the path. It is <code>;tabula</code> for Windows, <code>:tabula</code> for Linux).</p>\n"}],"owner":{"account_id":12605043,"reputation":121,"user_id":9166295,"display_name":"paul"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1561,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":57718558,"answer_count":3,"score":3,"last_activity_date":1686689583,"creation_date":1560280575,"question_id":56550410,"body_markdown":"I created a script to extract data from a pdf using tabula-py and PyPDF2. When I run my program through Jupyter-notebook and from the cmd, it works perfectly. After converting it to executable with pyinstaller, I get this error:\r\n\r\n    Error: Unable to access jarfile \r\n    E:\\Users\\paulhong\\AppData\\Local\\Temp\\_MEI175522\\tabula\\tabula-1.0.2-jar-with-dependencies.jar\r\n    Error:\r\n    Traceback (most recent call last):\r\n    File &quot;test.py&quot;, line 115, in &lt;module&gt;\r\n\r\n    File &quot;test.py&quot;, line 32, in extractDataDik\r\n    tempDf = tabula.read_pdf(file, area = (72, 252, 115.2, 352.8), guess=False, pages=&#39;1&#39;)\r\n    File &quot;site-packages\\tabula\\wrapper.py&quot;, line 108, in read_pdf\r\n    File &quot;subprocess.py&quot;, line 395, in check_output\r\n    File &quot;subprocess.py&quot;, line 487, in run\r\n    subprocess.CalledProcessError: Command &#39;[&#39;java&#39;, &#39;-Dfile.encoding=UTF8&#39;, &#39;-jar&#39;, \r\n    &#39;E:\\\\Users\\\\paulhong\\\\AppData\\\\Local\\\\Temp\\\\_MEI175522\\\\tabula\\\\tabula-1.0.2-jar-with-dependencies.jar&#39;, &#39;--pages&#39;, &#39;1&#39;, &#39;--area&#39;, \r\n    &#39;72,252,115.2,352.8&#39;, &#39;E:\\\\Users\\\\paulhong\\\\Desktop\\\\Purchase Order \r\n    2\\\\SKM_C45819060508450 (003).pdf&#39;]&#39; returned non-zero exit status 1. [47140] Failed to execute script test\r\n\r\nI also couldn&#39;t find the folder _MEI175522 on the specified path.\r\n\r\nMy python version is 3.7.1\r\nJava version is 1.8\r\npyinstaller version is 3.4\r\nTabula-py is the latest version\r\n\r\nHow can I fix this issue?","title":"Unable to execute my script when converting it to exe","body":"<p>I created a script to extract data from a pdf using tabula-py and PyPDF2. When I run my program through Jupyter-notebook and from the cmd, it works perfectly. After converting it to executable with pyinstaller, I get this error:</p>\n\n<pre><code>Error: Unable to access jarfile \nE:\\Users\\paulhong\\AppData\\Local\\Temp\\_MEI175522\\tabula\\tabula-1.0.2-jar-with-dependencies.jar\nError:\nTraceback (most recent call last):\nFile \"test.py\", line 115, in &lt;module&gt;\n\nFile \"test.py\", line 32, in extractDataDik\ntempDf = tabula.read_pdf(file, area = (72, 252, 115.2, 352.8), guess=False, pages='1')\nFile \"site-packages\\tabula\\wrapper.py\", line 108, in read_pdf\nFile \"subprocess.py\", line 395, in check_output\nFile \"subprocess.py\", line 487, in run\nsubprocess.CalledProcessError: Command '['java', '-Dfile.encoding=UTF8', '-jar', \n'E:\\\\Users\\\\paulhong\\\\AppData\\\\Local\\\\Temp\\\\_MEI175522\\\\tabula\\\\tabula-1.0.2-jar-with-dependencies.jar', '--pages', '1', '--area', \n'72,252,115.2,352.8', 'E:\\\\Users\\\\paulhong\\\\Desktop\\\\Purchase Order \n2\\\\SKM_C45819060508450 (003).pdf']' returned non-zero exit status 1. [47140] Failed to execute script test\n</code></pre>\n\n<p>I also couldn't find the folder _MEI175522 on the specified path.</p>\n\n<p>My python version is 3.7.1\nJava version is 1.8\npyinstaller version is 3.4\nTabula-py is the latest version</p>\n\n<p>How can I fix this issue?</p>\n"},{"tags":["java","eclipse","jvm","jvm-arguments"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686691899,"post_id":76468606,"comment_id":134833660,"body_markdown":"What is the task doing exactly? Please provide a https://stackoverflow.com/help/minimal-reproducible-example","body":"What is the task doing exactly? Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686692183,"post_id":76468606,"comment_id":134833694,"body_markdown":"I can&#39;t explain why that happens but why not simply copy those props from the ini file into build.xml?. Incidentally, key-&gt;value pairs in an ini file are not really the same as system properties as they are taken from a file and generally don&#39;t use the shell","body":"I can&#39;t explain why that happens but why not simply copy those props from the ini file into build.xml?. Incidentally, key-&gt;value pairs in an ini file are not really the same as system properties as they are taken from a file and generally don&#39;t use the shell"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1686836054,"post_id":76468606,"comment_id":134856385,"body_markdown":"The purpose of `eclipse.ini` is to configure Eclipse itself, not for providing properties to some other software. Why would anyone even want to make an Ant build dependent on an Eclipse configuration?","body":"The purpose of <code>eclipse.ini</code> is to configure Eclipse itself, not for providing properties to some other software. Why would anyone even want to make an Ant build dependent on an Eclipse configuration?"}],"owner":{"account_id":11283898,"reputation":27,"user_id":8275264,"display_name":"jrao"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686689291,"creation_date":1686689291,"question_id":76468606,"body_markdown":"I have a build.xml containing an ANT task(which is an eclipse plugin) which does import operations. During this import I want to read some system properties which are specified in eclipse.ini. For example -Dmyprop=value.\r\n\r\nWhen I execute build.xml in my local, system properties are accessible and everything works fine. When the build.xml is triggered from Azure pipeline the java system properties are not available to the JVM. No matter where the build.xml is triggered from it always starts the eclipse runtime and uses the same eclipse.ini file but why is the system properties accessible in first case and not the other?","title":"Java System Properties defined in eclipse.ini is not accessible in Java runtime","body":"<p>I have a build.xml containing an ANT task(which is an eclipse plugin) which does import operations. During this import I want to read some system properties which are specified in eclipse.ini. For example -Dmyprop=value.</p>\n<p>When I execute build.xml in my local, system properties are accessible and everything works fine. When the build.xml is triggered from Azure pipeline the java system properties are not available to the JVM. No matter where the build.xml is triggered from it always starts the eclipse runtime and uses the same eclipse.ini file but why is the system properties accessible in first case and not the other?</p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"score":0,"creation_date":1686323231,"post_id":76425404,"comment_id":134787613,"body_markdown":"Are you looking for [`assertThrows`](https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertThrows(java.lang.Class,org.junit.jupiter.api.function.Executable))? Given your example, you can use it like `var ex = assertThrows(RetryExhaustedException.class, () -&gt; exampleService.exampleMethod());`.","body":"Are you looking for <a href=\"https://junit.org/junit5/docs/current/api/org.junit.jupiter.api/org/junit/jupiter/api/Assertions.html#assertThrows(java.lang.Class,org.junit.jupiter.api.function.Executable)\" rel=\"nofollow noreferrer\"><code>assertThrows</code></a>? Given your example, you can use it like <code>var ex = assertThrows(RetryExhaustedException.class, () -&gt; exampleService.exampleMethod());</code>."},{"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"score":0,"creation_date":1686568151,"post_id":76425404,"comment_id":134811489,"body_markdown":"It&#39;s good answer but I can&#39;t access RetryExhaustedException (private). The only way is to access it with reflection and I do not know how (if possible).","body":"It&#39;s good answer but I can&#39;t access RetryExhaustedException (private). The only way is to access it with reflection and I do not know how (if possible)."},{"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"score":0,"creation_date":1686684192,"post_id":76425404,"comment_id":134832385,"body_markdown":"OK, I see. Check out [this answer](https://stackoverflow.com/a/76468109/3429133).","body":"OK, I see. Check out <a href=\"https://stackoverflow.com/a/76468109/3429133\">this answer</a>."}],"answers":[{"comments":[{"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"score":0,"creation_date":1686735178,"post_id":76468109,"comment_id":134838774,"body_markdown":"It works. Thanks. It feels bad I didn&#39;t think of super type","body":"It works. Thanks. It feels bad I didn&#39;t think of super type"}],"tags":[],"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686689105,"creation_date":1686684137,"answer_id":76468109,"question_id":76425404,"body_markdown":"Given your example code, I assume you use AssertJ:\r\n\r\n```java\r\n@Test\r\nvoid exampleTest() {\r\n\tstubToForce5xxResponse();\r\n\r\n\tassertThatThrownBy(() -&gt; exampleService.exampleMethod())\r\n\t\t.isInstanceOfSatisfying(IllegalStateException.class, ex -&gt; {\r\n\t\t\tassertThat(ex.getClass().getName()).isEqualTo(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;);\r\n\t\t\tassertThat(ex).hasMessage(&quot;Retries exhausted: 3/3&quot;);\r\n\t\t});\r\n}\r\n```\r\n\r\nIf you want to stick to JUnit Jupiter assertions:\r\n\r\n```java\r\n@Test\r\nvoid exampleTest() {\r\n\tstubToForce5xxResponse();\r\n\r\n\tvar ex = assertThrows(IllegalStateException.class, () -&gt; exampleService.exampleMethod());\r\n\r\n\tassertEquals(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;, ex.getClass().getName());\r\n\tassertEquals(&quot;Retries exhausted: 3/3&quot;, ex.getMessage());\r\n}\r\n```\r\n\r\n(Note that AssertJ is `asserThat(actual).isEqualTo(expected)`, whereas JUnit Jupiter is `assertEquals(expected, actual)`.)","title":"Intercept and assert private exception using junit","body":"<p>Given your example code, I assume you use AssertJ:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid exampleTest() {\n    stubToForce5xxResponse();\n\n    assertThatThrownBy(() -&gt; exampleService.exampleMethod())\n        .isInstanceOfSatisfying(IllegalStateException.class, ex -&gt; {\n            assertThat(ex.getClass().getName()).isEqualTo(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;);\n            assertThat(ex).hasMessage(&quot;Retries exhausted: 3/3&quot;);\n        });\n}\n</code></pre>\n<p>If you want to stick to JUnit Jupiter assertions:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid exampleTest() {\n    stubToForce5xxResponse();\n\n    var ex = assertThrows(IllegalStateException.class, () -&gt; exampleService.exampleMethod());\n\n    assertEquals(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;, ex.getClass().getName());\n    assertEquals(&quot;Retries exhausted: 3/3&quot;, ex.getMessage());\n}\n</code></pre>\n<p>(Note that AssertJ is <code>asserThat(actual).isEqualTo(expected)</code>, whereas JUnit Jupiter is <code>assertEquals(expected, actual)</code>.)</p>\n"}],"owner":{"account_id":22074911,"reputation":39,"user_id":16335386,"display_name":"Tchorzyksen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76468109,"answer_count":1,"score":0,"last_activity_date":1686689105,"creation_date":1686155483,"question_id":76425404,"body_markdown":"There are multiple question similar to mine with a small difference I want to catch private inner exception (if that&#39;s accurate definition), and then assert it. I come up with test below. I&#39;m looking for similar method to one is Spock `thrown()`. Thanks for your help in advance. I do not have much experience with junit, if that&#39;s trivial for you just answer or link page that might help me understand.\r\n\r\nThanks for your help and support! :D\r\n\r\nThe Exception `reactor.core.Exceptions$RetryExhaustedException`\r\n```\r\npublic abstract class Exceptions {\r\n\r\n\tstatic final class RetryExhaustedException extends IllegalStateException {\r\n\r\n\t\tRetryExhaustedException(String message) {\r\n\t\t\tsuper(message);\r\n\t\t}\r\n\r\n\t\tRetryExhaustedException(String message, Throwable cause) {\r\n\t\t\tsuper(message, cause);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nMy test \r\n```\r\n    @Test\r\n    void exampleTest() {\r\n        // given:\r\n        stubToForce5xxResponse();\r\n\r\n        // when:\r\n        var ex = getExceptionThrown(() -&gt; exampleService.exampleMethod());\r\n\r\n        // then:\r\n        Assertions.assertThat(ex).isNotNull();\r\n        Assertions.assertThat(ex.getClass().getName()).isEqualTo(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;);\r\n        Assertions.assertThat(ex.getMessage()).isEqualTo(&quot;Retries exhausted: 3/3&quot;);\r\n    }\r\n\r\n    private Throwable getExceptionThrown(Runnable runnable) {\r\n        try {\r\n            runnable.run();\r\n            return null;\r\n        } catch (Exception ex) {\r\n            return ex;\r\n        }\r\n    }\r\n```","title":"Intercept and assert private exception using junit","body":"<p>There are multiple question similar to mine with a small difference I want to catch private inner exception (if that's accurate definition), and then assert it. I come up with test below. I'm looking for similar method to one is Spock <code>thrown()</code>. Thanks for your help in advance. I do not have much experience with junit, if that's trivial for you just answer or link page that might help me understand.</p>\n<p>Thanks for your help and support! :D</p>\n<p>The Exception <code>reactor.core.Exceptions$RetryExhaustedException</code></p>\n<pre><code>public abstract class Exceptions {\n\n    static final class RetryExhaustedException extends IllegalStateException {\n\n        RetryExhaustedException(String message) {\n            super(message);\n        }\n\n        RetryExhaustedException(String message, Throwable cause) {\n            super(message, cause);\n        }\n    }\n}\n</code></pre>\n<p>My test</p>\n<pre><code>    @Test\n    void exampleTest() {\n        // given:\n        stubToForce5xxResponse();\n\n        // when:\n        var ex = getExceptionThrown(() -&gt; exampleService.exampleMethod());\n\n        // then:\n        Assertions.assertThat(ex).isNotNull();\n        Assertions.assertThat(ex.getClass().getName()).isEqualTo(&quot;reactor.core.Exceptions$RetryExhaustedException&quot;);\n        Assertions.assertThat(ex.getMessage()).isEqualTo(&quot;Retries exhausted: 3/3&quot;);\n    }\n\n    private Throwable getExceptionThrown(Runnable runnable) {\n        try {\n            runnable.run();\n            return null;\n        } catch (Exception ex) {\n            return ex;\n        }\n    }\n</code></pre>\n"},{"tags":["java","android","android-studio","gradle"],"answers":[{"tags":[],"owner":{"account_id":14466713,"reputation":1409,"user_id":10449848,"display_name":"Real Noob"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1677509914,"creation_date":1677509914,"answer_id":75582056,"question_id":75581976,"body_markdown":"I figured it out. The Gradle version has to be changed to 7.6 for it to be compatible with Java 19.0.2.","title":"Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>I figured it out. The Gradle version has to be changed to 7.6 for it to be compatible with Java 19.0.2.</p>\n"},{"tags":[],"owner":{"account_id":20947447,"reputation":264,"user_id":15389957,"display_name":"Dilshod Sh"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681825484,"creation_date":1681825484,"answer_id":76045372,"question_id":75581976,"body_markdown":"In My case I upgraded gradle to 8.1,and its working now","title":"Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>In My case I upgraded gradle to 8.1,and its working now</p>\n"},{"tags":[],"owner":{"account_id":2128309,"reputation":6169,"user_id":1889825,"accept_rate":38,"display_name":"Somnath Kadam"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1682766154,"creation_date":1682766154,"answer_id":76135863,"question_id":75581976,"body_markdown":"For Java 19, need to set gradle version as 7.6 and above.\r\nAlso check below compatibility matrix \r\n\r\nhttps://docs.gradle.org/current/userguide/compatibility.html ","title":"Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>For Java 19, need to set gradle version as 7.6 and above.\nAlso check below compatibility matrix</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/compatibility.html\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html</a></p>\n"}],"owner":{"account_id":14466713,"reputation":1409,"user_id":10449848,"display_name":"Real Noob"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9333,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":75582056,"answer_count":3,"score":5,"last_activity_date":1686689038,"creation_date":1677509436,"question_id":75581976,"body_markdown":"I am getting this error when building my project:\r\n\r\n```\r\nUnsupported Java. \r\nYour build is currently configured to use Java 19.0.2 and Gradle 7.5.\r\n\r\nPossible solution:\r\n - Open Gradle wrapper settings, change `distributionUrl` property to use compatible Gradle version and reload the project\r\n```\r\n\r\nMy `gradle-wrapper.properties` file looks like this:\r\n\r\n```\r\n#Mon Feb 27 20:08:12 IST 2023\r\ndistributionBase=GRADLE_USER_HOME\r\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip\r\ndistributionPath=wrapper/dists\r\nzipStorePath=wrapper/dists\r\nzipStoreBase=GRADLE_USER_HOME\r\n```\r\n\r\nSo, the Gradle value is already 7.5. What other change do I need to make here?\r\n\r\nThanks.","title":"Your build is currently configured to use Java 19.0.2 and Gradle 7.5","body":"<p>I am getting this error when building my project:</p>\n<pre><code>Unsupported Java. \nYour build is currently configured to use Java 19.0.2 and Gradle 7.5.\n\nPossible solution:\n - Open Gradle wrapper settings, change `distributionUrl` property to use compatible Gradle version and reload the project\n</code></pre>\n<p>My <code>gradle-wrapper.properties</code> file looks like this:</p>\n<pre><code>#Mon Feb 27 20:08:12 IST 2023\ndistributionBase=GRADLE_USER_HOME\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-7.5-bin.zip\ndistributionPath=wrapper/dists\nzipStorePath=wrapper/dists\nzipStoreBase=GRADLE_USER_HOME\n</code></pre>\n<p>So, the Gradle value is already 7.5. What other change do I need to make here?</p>\n<p>Thanks.</p>\n"},{"tags":["java","spring","spring-boot","spring-context"],"comments":[{"owner":{"account_id":3101358,"reputation":962,"user_id":2625393,"display_name":"Numichi"},"score":0,"creation_date":1686658049,"post_id":76464347,"comment_id":134826482,"body_markdown":"replace `com.example.TopLevelConfiguration` by `com.example. TopLevelAutoConfiguration`","body":"replace <code>com.example.TopLevelConfiguration</code> by <code>com.example. TopLevelAutoConfiguration</code>"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1686688568,"post_id":76464347,"comment_id":134833129,"body_markdown":"@Numichi this was just a typo, fixed","body":"@Numichi this was just a typo, fixed"}],"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686688544,"creation_date":1686654911,"question_id":76464347,"body_markdown":"I am trying to create a SB3 library that exports auto-configurations. \r\n\r\nHere is the simplified scenario: \r\n\r\n```\r\n@AutoConfiguration\r\n@ConditionalOnWebApplication\r\n// some other conditions\r\npublic class TopLevelAutoConfiguration {}\r\n\r\n@Configuration\r\n@ConditionalOnBean(DataSource.class)\r\npublic class AdditionalConfiguration {}\r\n```\r\n\r\n*META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports*: \r\n\r\n```\r\ncom.example.TopLevelAutoConfiguration\r\n```\r\n\r\n**Question**: How to import `AdditionalConfiguration` into `TopLevelConfiguration`, so that `@ConditionalOnBean(DataSource.class)` is respected?\r\n\r\nA simple `@Import` does not respect the condition put on top of `AdditionalConfiguration`, and `@ImportAutoConfiguration` does not seem to have any effect. \r\n\r\nAppending `AdditionalConfiguration` to *org.springframework.boot.autoconfigure.AutoConfiguration.imports* works, of course, but I would need to duplicate the conditions from `TopLevelAutoConfiguration` in `AdditionalConfiguration` *in addition to specifying `@ConditionalOnBean`*, which I really don&#39;t like. ","title":"Spring Boot import one autoconfiguration into another","body":"<p>I am trying to create a SB3 library that exports auto-configurations.</p>\n<p>Here is the simplified scenario:</p>\n<pre><code>@AutoConfiguration\n@ConditionalOnWebApplication\n// some other conditions\npublic class TopLevelAutoConfiguration {}\n\n@Configuration\n@ConditionalOnBean(DataSource.class)\npublic class AdditionalConfiguration {}\n</code></pre>\n<p><em>META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports</em>:</p>\n<pre><code>com.example.TopLevelAutoConfiguration\n</code></pre>\n<p><strong>Question</strong>: How to import <code>AdditionalConfiguration</code> into <code>TopLevelConfiguration</code>, so that <code>@ConditionalOnBean(DataSource.class)</code> is respected?</p>\n<p>A simple <code>@Import</code> does not respect the condition put on top of <code>AdditionalConfiguration</code>, and <code>@ImportAutoConfiguration</code> does not seem to have any effect.</p>\n<p>Appending <code>AdditionalConfiguration</code> to <em>org.springframework.boot.autoconfigure.AutoConfiguration.imports</em> works, of course, but I would need to duplicate the conditions from <code>TopLevelAutoConfiguration</code> in <code>AdditionalConfiguration</code> <em>in addition to specifying <code>@ConditionalOnBean</code></em>, which I really don't like.</p>\n"},{"tags":["java","sorting","java-8","java-stream","comparator"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686687436,"creation_date":1686687436,"answer_id":76468436,"question_id":76468328,"body_markdown":"I do not believe it is possible to use a standard sorting algorithm to solve this issue.  \r\n\r\nI see that you are trying to just make these elements compare as zero to everything else, but the sorting algorithms available in Java make assumptions like transitivity of ordering that won&#39;t just take that and  treat it as &quot;don&#39;t move these elements.&quot;","title":"Custom ordering using Java Comparator - Retain the position for objects with certain value","body":"<p>I do not believe it is possible to use a standard sorting algorithm to solve this issue.</p>\n<p>I see that you are trying to just make these elements compare as zero to everything else, but the sorting algorithms available in Java make assumptions like transitivity of ordering that won't just take that and  treat it as &quot;don't move these elements.&quot;</p>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686687703,"creation_date":1686687703,"answer_id":76468462,"question_id":76468328,"body_markdown":"There is no solution using a single `Comparator` (or at least I failed to find it so). Here is a working solution requiring two steps:\r\n\r\n1. Sort all the values in the descending (`reversed()`) order **without** the specific value and collect it as a mutable list:\r\n\r\n   ```java\r\n   List&lt;Candidate&gt; sorted = inputCandidates.stream()\r\n\t\t.filter(candidate -&gt; candidate.getValue() != -1.0)\r\n\t\t.sorted(Comparator.comparing(Candidate::getValue).reversed())\r\n\t\t.collect(Collectors.toCollection(ArrayList::new));\r\n   ```\r\n\r\n2. Iterate through the **former** collection and add the candidates **with** the specific value (`-1.0`) to its original index position in the newly sorted list:\r\n\r\n   ```java\r\n   for (int i=0; i&lt;inputCandidates.size(); i++) {\r\n\t\tCandidate candidate = inputCandidates.get(i);\r\n\t\tif (candidate.getValue() == -1.0) {\r\n\t\t\tsorted.add(i, candidate);\r\n\t\t}\r\n\t}\r\n   ```\r\n\r\n_____\r\nExample input:\r\n&gt; ```\r\n&gt; Candidate candidate1 = new Candidate(&quot;id1&quot;,  0.4);\r\n&gt; Candidate candidate2 = new Candidate(&quot;id2&quot;, -1.0); // fixed position\r\n&gt; Candidate candidate3 = new Candidate(&quot;id3&quot;, -1.0); // fixed position\r\n&gt; Candidate candidate4 = new Candidate(&quot;id4&quot;,  0.8); \r\n&gt; Candidate candidate5 = new Candidate(&quot;id5&quot;, -1.0); // fixed position\r\n&gt; Candidate candidate6 = new Candidate(&quot;id6&quot;,  0.5);\r\n&gt; ```\r\nExample output:\r\n```java\r\nsorted.forEach(c -&gt; System.out.println(c.getId() + &quot; : &quot; + c.getValue()));\r\n```\r\n&gt; ```\r\n&gt; id4 : 0.8\r\n&gt; id2 : -1.0  // fixed position    \r\n&gt; id3 : -1.0  // fixed position\r\n&gt; id6 : 0.5 \r\n&gt; id5 : -1.0  // fixed position\r\n&gt; id1 : 0.4\r\n&gt;","title":"Custom ordering using Java Comparator - Retain the position for objects with certain value","body":"<p>There is no solution using a single <code>Comparator</code> (or at least I failed to find it so). Here is a working solution requiring two steps:</p>\n<ol>\n<li><p>Sort all the values in the descending (<code>reversed()</code>) order <strong>without</strong> the specific value and collect it as a mutable list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Candidate&gt; sorted = inputCandidates.stream()\n     .filter(candidate -&gt; candidate.getValue() != -1.0)\n     .sorted(Comparator.comparing(Candidate::getValue).reversed())\n     .collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n</li>\n<li><p>Iterate through the <strong>former</strong> collection and add the candidates <strong>with</strong> the specific value (<code>-1.0</code>) to its original index position in the newly sorted list:</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (int i=0; i&lt;inputCandidates.size(); i++) {\n     Candidate candidate = inputCandidates.get(i);\n     if (candidate.getValue() == -1.0) {\n         sorted.add(i, candidate);\n     }\n }\n</code></pre>\n</li>\n</ol>\n<hr />\n<p>Example input:</p>\n<blockquote>\n<pre><code>Candidate candidate1 = new Candidate(&quot;id1&quot;,  0.4);\nCandidate candidate2 = new Candidate(&quot;id2&quot;, -1.0); // fixed position\nCandidate candidate3 = new Candidate(&quot;id3&quot;, -1.0); // fixed position\nCandidate candidate4 = new Candidate(&quot;id4&quot;,  0.8); \nCandidate candidate5 = new Candidate(&quot;id5&quot;, -1.0); // fixed position\nCandidate candidate6 = new Candidate(&quot;id6&quot;,  0.5);\n</code></pre>\n</blockquote>\n<p>Example output:</p>\n<pre class=\"lang-java prettyprint-override\"><code>sorted.forEach(c -&gt; System.out.println(c.getId() + &quot; : &quot; + c.getValue()));\n</code></pre>\n<blockquote>\n<pre><code>id4 : 0.8\nid2 : -1.0  // fixed position    \nid3 : -1.0  // fixed position\nid6 : 0.5 \nid5 : -1.0  // fixed position\nid1 : 0.4\n\n</code></pre>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686688537,"creation_date":1686688537,"answer_id":76468545,"question_id":76468328,"body_markdown":"Great question.\r\n\r\nI don&#39;t believe there is any functionality that allows you to do this.  \r\nFor example, with _[streams](https://docs.oracle.com/javase/tutorial/collections/streams/index.html)_.\r\n\r\nHere is a concept you can use.  \r\n\r\nFirst, identify the indices that you&#39;d like to preserve, and create a _[Map](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html)_ to hold the data.\r\n\r\nUsing the _map_, remove each of the identified values, from the original list.\r\n\r\nSort the list collection, and then add, back in, the identified values.\r\n\r\n```java\r\n/* original content */\r\nList&lt;Character&gt; list = new ArrayList&lt;&gt;(List.of(&#39;d&#39;, &#39;e&#39;, &#39;f&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;));\r\n\r\n/* identified, preserved values */\r\nchar[] values = { &#39;e&#39;, &#39;b&#39; };\r\n\r\n/* map each identified value */\r\nMap&lt;Integer, Character&gt; map = new HashMap&lt;&gt;();\r\nfor (char value : values) map.put(list.indexOf(value), value);\r\n\r\n/* remove identified indices, from list */\r\nfor (int index = list.size() - 1; index &gt;= 0; index--) {\r\n    if (map.containsKey(index)) list.remove(index);\r\n}\r\n\r\n/* sort the list */\r\nCollections.sort(list);\r\n\r\n/* add in the identified values */\r\nfor (Map.Entry&lt;Integer, Character&gt; entry : map.entrySet())\r\n    list.add(entry.getKey(), entry.getValue());\r\n```\r\n\r\nHere is the original list, before sorting.\r\n\r\n```none\r\n[d, e, f, a, b, c]\r\n```\r\n\r\nAnd, here it is after.\r\n\r\n```none\r\n[a, e, c, d, b, f]\r\n```","title":"Custom ordering using Java Comparator - Retain the position for objects with certain value","body":"<p>Great question.</p>\n<p>I don't believe there is any functionality that allows you to do this.<br />\nFor example, with <em><a href=\"https://docs.oracle.com/javase/tutorial/collections/streams/index.html\" rel=\"nofollow noreferrer\">streams</a></em>.</p>\n<p>Here is a concept you can use.</p>\n<p>First, identify the indices that you'd like to preserve, and create a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/Map.html\" rel=\"nofollow noreferrer\">Map</a></em> to hold the data.</p>\n<p>Using the <em>map</em>, remove each of the identified values, from the original list.</p>\n<p>Sort the list collection, and then add, back in, the identified values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/* original content */\nList&lt;Character&gt; list = new ArrayList&lt;&gt;(List.of('d', 'e', 'f', 'a', 'b', 'c'));\n\n/* identified, preserved values */\nchar[] values = { 'e', 'b' };\n\n/* map each identified value */\nMap&lt;Integer, Character&gt; map = new HashMap&lt;&gt;();\nfor (char value : values) map.put(list.indexOf(value), value);\n\n/* remove identified indices, from list */\nfor (int index = list.size() - 1; index &gt;= 0; index--) {\n    if (map.containsKey(index)) list.remove(index);\n}\n\n/* sort the list */\nCollections.sort(list);\n\n/* add in the identified values */\nfor (Map.Entry&lt;Integer, Character&gt; entry : map.entrySet())\n    list.add(entry.getKey(), entry.getValue());\n</code></pre>\n<p>Here is the original list, before sorting.</p>\n<pre class=\"lang-none prettyprint-override\"><code>[d, e, f, a, b, c]\n</code></pre>\n<p>And, here it is after.</p>\n<pre class=\"lang-none prettyprint-override\"><code>[a, e, c, d, b, f]\n</code></pre>\n"}],"owner":{"account_id":12490535,"reputation":115,"user_id":9092223,"display_name":"Prathamesh Mahankal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76468462,"answer_count":3,"score":2,"last_activity_date":1686688537,"creation_date":1686686477,"question_id":76468328,"body_markdown":"I am trying to implement a custom comparator that sorts a list of objects in descending order, but while doing so, it ignores when the object has a specific value (-1 in my case). Thus, the objects with that value retain their original position, but all the objects around them will be sorted in descending order. For example, if the list is :\r\n\r\n    Candidate candidate1 = new Candidate(&quot;id1&quot;,  0.4);\r\n    Candidate candidate2 = new Candidate(&quot;id2&quot;, -1.0);\r\n    Candidate candidate3 = new Candidate(&quot;id3&quot;, 0.8);\r\n    List&lt;Candidate&gt; inputCandidates = ImmutableList.of(candidate1, candidate2, candidate3)\r\n\r\nThe resulting order should be \r\n\r\n    [\r\n        Candidate(super=Candidate(id=id3), value=0.8), \r\n        Candidate(super=Candidate(id=id2), value=-1.0), \r\n        Candidate(super=Candidate(id=id1), value=0.4)\r\n    ]\r\n\r\nCurrently, I am trying something like this:\r\n\r\n    public final Comparator&lt;Candidate&gt; customComparator() {\r\n        return (Candidate one, Candidate two) -&gt; {\r\n            double scoreOne =  one.getValue() != null ? one.getValue() : 0d;\r\n            double scoreTwo =  two.getValue() != null ? two.getValue() : 0d;\r\n            if (scoreOne == scoreTwo) return 0;\r\n            if (scoreOne == -1.0d) return 1;\r\n            if (scoreTwo == -1.0d) return -1;\r\n            return Double.compare(scoreTwo, scoreOne);\r\n        };\r\n    }\r\n\r\nHowever, this instead gives me:\r\n\r\n    [\r\n        Candidate(super=Candidate(id=id3), value=0.8), \r\n        Candidate(super=Candidate(id=id1), value=0.4), \r\n        Candidate(super=Candidate(id=id2), value=-1.0)\r\n    ]\r\n\r\nCould someone please help me figure out where I am going wrong?","title":"Custom ordering using Java Comparator - Retain the position for objects with certain value","body":"<p>I am trying to implement a custom comparator that sorts a list of objects in descending order, but while doing so, it ignores when the object has a specific value (-1 in my case). Thus, the objects with that value retain their original position, but all the objects around them will be sorted in descending order. For example, if the list is :</p>\n<pre><code>Candidate candidate1 = new Candidate(&quot;id1&quot;,  0.4);\nCandidate candidate2 = new Candidate(&quot;id2&quot;, -1.0);\nCandidate candidate3 = new Candidate(&quot;id3&quot;, 0.8);\nList&lt;Candidate&gt; inputCandidates = ImmutableList.of(candidate1, candidate2, candidate3)\n</code></pre>\n<p>The resulting order should be</p>\n<pre><code>[\n    Candidate(super=Candidate(id=id3), value=0.8), \n    Candidate(super=Candidate(id=id2), value=-1.0), \n    Candidate(super=Candidate(id=id1), value=0.4)\n]\n</code></pre>\n<p>Currently, I am trying something like this:</p>\n<pre><code>public final Comparator&lt;Candidate&gt; customComparator() {\n    return (Candidate one, Candidate two) -&gt; {\n        double scoreOne =  one.getValue() != null ? one.getValue() : 0d;\n        double scoreTwo =  two.getValue() != null ? two.getValue() : 0d;\n        if (scoreOne == scoreTwo) return 0;\n        if (scoreOne == -1.0d) return 1;\n        if (scoreTwo == -1.0d) return -1;\n        return Double.compare(scoreTwo, scoreOne);\n    };\n}\n</code></pre>\n<p>However, this instead gives me:</p>\n<pre><code>[\n    Candidate(super=Candidate(id=id3), value=0.8), \n    Candidate(super=Candidate(id=id1), value=0.4), \n    Candidate(super=Candidate(id=id2), value=-1.0)\n]\n</code></pre>\n<p>Could someone please help me figure out where I am going wrong?</p>\n"},{"tags":["java","list","lambda","java-stream"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1686251399,"post_id":76434888,"comment_id":134777179,"body_markdown":"It might be possible, but it&#39;ll be much simpler and probably just as efficient to just do two streams.  Your code as written is what I would write every time.","body":"It might be possible, but it&#39;ll be much simpler and probably just as efficient to just do two streams.  Your code as written is what I would write every time."}],"answers":[{"tags":[],"owner":{"account_id":3593904,"reputation":129,"user_id":2999226,"display_name":"user2999226"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686254154,"creation_date":1686253827,"answer_id":76435267,"question_id":76434888,"body_markdown":"I would use two streams or rewrite it as a loop.\r\n\r\nHowever, if you really want to use a (and one) stream, here is what you could do (but **not recommended**, in my opinion **streams should not have side effects**).\r\n```java\r\nvar count = new AtomicInteger(0);\r\n\r\nvar filteredClasses = myClasses.stream()\r\n    .peek(clazz-&gt; {\r\n        if (!clazz.isX() &amp;&amp; clazz.isZ()) {\r\n            count.incrementAndGet();\r\n        }\r\n    })\r\n    .filter(clazz -&gt; class.isX() &amp;&amp; clazz.isY())\r\n    .toList();\r\n```\r\nBut this would probably take longer to execute and has more compelexity than the solution you already have.","title":"Filtering list of Objects on condition while counting on different condition","body":"<p>I would use two streams or rewrite it as a loop.</p>\n<p>However, if you really want to use a (and one) stream, here is what you could do (but <strong>not recommended</strong>, in my opinion <strong>streams should not have side effects</strong>).</p>\n<pre class=\"lang-java prettyprint-override\"><code>var count = new AtomicInteger(0);\n\nvar filteredClasses = myClasses.stream()\n    .peek(clazz-&gt; {\n        if (!clazz.isX() &amp;&amp; clazz.isZ()) {\n            count.incrementAndGet();\n        }\n    })\n    .filter(clazz -&gt; class.isX() &amp;&amp; clazz.isY())\n    .toList();\n</code></pre>\n<p>But this would probably take longer to execute and has more compelexity than the solution you already have.</p>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686688526,"creation_date":1686688526,"answer_id":76468540,"question_id":76434888,"body_markdown":"&gt; Is it possible to do it inside one stream without having to loop though my list twice?\r\n\r\nYes, use the for-cycle where you perform all the operations required at once. Then you will not need to loop through the list twice or more...\r\n\r\n```java\r\nmyClasses.forEach(myClass -&gt; {\r\n\tif (myClass.isX()) {\r\n\t\tif (myClass.isY()) {\r\n\t\t\tfilteredClasses.add(myClass);   // x &amp;&amp; y\r\n\t\t}\r\n\t} else {\r\n\t\tif (myClass.isZ()) {\r\n\t\t\tisNotXandZCounter++;            // !x &amp;&amp; z\r\n\t\t}\r\n\t}\r\n});\r\n```\r\n\r\n____\r\n\r\nBy the way, none of your lambda expressions are compilable.\r\n\r\nWrong:\r\n- `MyClass::isX() &amp;&amp; MyClass::isY()`\r\n- `!MyClass::isX() &amp;&amp; MyClass::isZ()`\r\n\r\nCorrect:\r\n- `myClass -&gt; myClass.isX() &amp;&amp; myClass.isY()`\r\n- `myClass -&gt; !myClass.isX() &amp;&amp; myClass.isZ()`\r\n\r\nAnd collecting into a list is done via `.collect(Collectors.toList())` and not `.Collectors.toList()`.","title":"Filtering list of Objects on condition while counting on different condition","body":"<blockquote>\n<p>Is it possible to do it inside one stream without having to loop though my list twice?</p>\n</blockquote>\n<p>Yes, use the for-cycle where you perform all the operations required at once. Then you will not need to loop through the list twice or more...</p>\n<pre class=\"lang-java prettyprint-override\"><code>myClasses.forEach(myClass -&gt; {\n    if (myClass.isX()) {\n        if (myClass.isY()) {\n            filteredClasses.add(myClass);   // x &amp;&amp; y\n        }\n    } else {\n        if (myClass.isZ()) {\n            isNotXandZCounter++;            // !x &amp;&amp; z\n        }\n    }\n});\n</code></pre>\n<hr />\n<p>By the way, none of your lambda expressions are compilable.</p>\n<p>Wrong:</p>\n<ul>\n<li><code>MyClass::isX() &amp;&amp; MyClass::isY()</code></li>\n<li><code>!MyClass::isX() &amp;&amp; MyClass::isZ()</code></li>\n</ul>\n<p>Correct:</p>\n<ul>\n<li><code>myClass -&gt; myClass.isX() &amp;&amp; myClass.isY()</code></li>\n<li><code>myClass -&gt; !myClass.isX() &amp;&amp; myClass.isZ()</code></li>\n</ul>\n<p>And collecting into a list is done via <code>.collect(Collectors.toList())</code> and not <code>.Collectors.toList()</code>.</p>\n"}],"owner":{"account_id":18704506,"reputation":21,"user_id":13635986,"display_name":"artificialdeathinthewest"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":162,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686688526,"creation_date":1686250185,"question_id":76434888,"body_markdown":"Let&#39;s say I have a list of Objects that I would like to filter on condition (x &amp;&amp; y) but I&#39;d also want to count the occurences of a different condition while it&#39;s streaming, let&#39;s say (!x and z), I don&#39;t want to filter on this last condition I just want to count the occurences of it for whatever reason.\r\n\r\nIs it possible to do it inside one stream without having to loop though my list twice?\r\n\r\nBecause at the moment I&#39;d have to do something like this:\r\n\r\n        List&lt;MyClass&gt; myClasses = ... //initialization of list of MyClass\r\n\r\n        //filtering the objects that I need\r\n        List&lt;MyClass&gt; filteredClasses = myClasses.stream().filter(MyClass::isX() &amp;&amp; MyClass::isY()).Collectors.toList();\r\n\r\n        //counting to store in a variable\r\n        int isNotXandZCounter = myClasses.stream().filter(!MyClass::isX() &amp;&amp; MyClass::isZ()).count();\r\n\r\n ","title":"Filtering list of Objects on condition while counting on different condition","body":"<p>Let's say I have a list of Objects that I would like to filter on condition (x &amp;&amp; y) but I'd also want to count the occurences of a different condition while it's streaming, let's say (!x and z), I don't want to filter on this last condition I just want to count the occurences of it for whatever reason.</p>\n<p>Is it possible to do it inside one stream without having to loop though my list twice?</p>\n<p>Because at the moment I'd have to do something like this:</p>\n<pre><code>    List&lt;MyClass&gt; myClasses = ... //initialization of list of MyClass\n\n    //filtering the objects that I need\n    List&lt;MyClass&gt; filteredClasses = myClasses.stream().filter(MyClass::isX() &amp;&amp; MyClass::isY()).Collectors.toList();\n\n    //counting to store in a variable\n    int isNotXandZCounter = myClasses.stream().filter(!MyClass::isX() &amp;&amp; MyClass::isZ()).count();\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":8362258,"reputation":1639,"user_id":6280135,"display_name":"Maninder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686602562,"creation_date":1686602562,"answer_id":76460199,"question_id":76460087,"body_markdown":"You are getting error because the query is returning multiple rows.\r\n\r\nSo to fix this, you can create a list of Map instead of passing the Map.\r\n\r\n    @Query(&quot;SELECT u.id AS id, u.name AS name FROM User u WHERE u.role = :role&quot;)\r\n    List&lt;Map&lt;String, Object&gt;&gt; findIdAndNameByRole(String role);\r\n\r\n\r\nAnd for iterating this list of map, you can create a method like below:\r\n\r\n    public Map&lt;Long, String&gt; getIdAndNameMapByRole(String role) {\r\n        List&lt;Map&lt;String, Object&gt;&gt; resultList = userRepository.findIdAndNameByRole(role);\r\n        Map&lt;Long, String&gt; idAndNameMap = new HashMap&lt;&gt;();\r\n    \r\n        \r\n        for (Map&lt;String, Object&gt; result : resultList) {\r\n            Long id = (Long) result.get(&quot;id&quot;);\r\n            String name = (String) result.get(&quot;name&quot;);\r\n            idAndNameMap.put(id, name);\r\n        }\r\n    \r\n        return idAndNameMap;\r\n    }\r\n\r\n","title":"Return Map&lt;Long, String&gt; directly from CrudRepository","body":"<p>You are getting error because the query is returning multiple rows.</p>\n<p>So to fix this, you can create a list of Map instead of passing the Map.</p>\n<pre><code>@Query(&quot;SELECT u.id AS id, u.name AS name FROM User u WHERE u.role = :role&quot;)\nList&lt;Map&lt;String, Object&gt;&gt; findIdAndNameByRole(String role);\n</code></pre>\n<p>And for iterating this list of map, you can create a method like below:</p>\n<pre><code>public Map&lt;Long, String&gt; getIdAndNameMapByRole(String role) {\n    List&lt;Map&lt;String, Object&gt;&gt; resultList = userRepository.findIdAndNameByRole(role);\n    Map&lt;Long, String&gt; idAndNameMap = new HashMap&lt;&gt;();\n\n    \n    for (Map&lt;String, Object&gt; result : resultList) {\n        Long id = (Long) result.get(&quot;id&quot;);\n        String name = (String) result.get(&quot;name&quot;);\n        idAndNameMap.put(id, name);\n    }\n\n    return idAndNameMap;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7966981,"reputation":6819,"user_id":6012939,"accept_rate":100,"display_name":"htshame"},"score":0,"creation_date":1686669110,"post_id":76466283,"comment_id":134829248,"body_markdown":"It&#39;s more of an out of curiosity/theoretical question. In practice I will use an entity or some projection. Thanks for that documentation link, it&#39;s helpful!","body":"It&#39;s more of an out of curiosity/theoretical question. In practice I will use an entity or some projection. Thanks for that documentation link, it&#39;s helpful!"}],"tags":[],"owner":{"account_id":123802,"reputation":37785,"user_id":318493,"accept_rate":67,"display_name":"RoToRa"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1686688166,"creation_date":1686668569,"answer_id":76466283,"question_id":76460087,"body_markdown":"According to the [documentation][1] repository methods basically only can single primitive values, a single objects of the repository type (`User` in your case) or various collections of it.\r\n\r\nYou will have to use a conversion method of some type in any case. Can you elaborate why you can&#39;t use any &quot;projections or other conversions&quot;? It&#39;s generally good practice for your business logic classes not to access repositories directly anyway, but use an intermediate service class that do exactly such conversions, since it&#39;s not an uncommon scenario.\r\n\r\nThe only alternative I can think of is to use a `default` method in the repository interface that does the conversion, but that may not work.\r\n\r\nExample:\r\n\r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt; {\r\n        // Normal repository method. No @Query needed.\r\n        Stream&lt;User&gt; findByRole(String role);\r\n\r\n        default Map&lt;Long, String&gt; findIdAndNameByRole(String role) {\r\n             return findByRole(role).collect(toMap(User::getId, User::getName));\r\n        }\r\n    }\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-return-types\r\n","title":"Return Map&lt;Long, String&gt; directly from CrudRepository","body":"<p>According to the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#repository-query-return-types\" rel=\"nofollow noreferrer\">documentation</a> repository methods basically only can single primitive values, a single objects of the repository type (<code>User</code> in your case) or various collections of it.</p>\n<p>You will have to use a conversion method of some type in any case. Can you elaborate why you can't use any &quot;projections or other conversions&quot;? It's generally good practice for your business logic classes not to access repositories directly anyway, but use an intermediate service class that do exactly such conversions, since it's not an uncommon scenario.</p>\n<p>The only alternative I can think of is to use a <code>default</code> method in the repository interface that does the conversion, but that may not work.</p>\n<p>Example:</p>\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, Long&gt; {\n    // Normal repository method. No @Query needed.\n    Stream&lt;User&gt; findByRole(String role);\n\n    default Map&lt;Long, String&gt; findIdAndNameByRole(String role) {\n         return findByRole(role).collect(toMap(User::getId, User::getName));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":7966981,"reputation":6819,"user_id":6012939,"accept_rate":100,"display_name":"htshame"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76466283,"answer_count":2,"score":1,"last_activity_date":1686688166,"creation_date":1686601478,"question_id":76460087,"body_markdown":"Say I have a table `users` with columns `id`, `role`, `name` etc.\r\n\r\nThere&#39;s `UserRepository` defined as:\r\n\r\n    public interface UserRepository extends CrudRepository&lt;User, Long&gt; {\r\n        ...\r\n    }\r\n\r\nI need to return all ids and names of users with role=&#39;ADMIN&#39; as `Map&lt;Long, String&gt;` e.g.:\r\n\r\n    @Query(&quot;SELECT u.id, u.name FROM User u WHERE u.role = :role&quot;)\r\n    Map&lt;Long, String&gt; findIdAndNameByRole(String role);\r\n\r\nBut this call returns an error:\r\n\r\n&gt; javax.persistence.NonUniqueResultException: query did not return a unique result\r\n\r\nQuestion: how (if possible at all) to map the response from CrudRepository **directly** to Map&lt;Long, String&gt; **without** using projections or other conversions? Perhaps using `nativeQuery=true` somehow?\r\n","title":"Return Map&lt;Long, String&gt; directly from CrudRepository","body":"<p>Say I have a table <code>users</code> with columns <code>id</code>, <code>role</code>, <code>name</code> etc.</p>\n<p>There's <code>UserRepository</code> defined as:</p>\n<pre><code>public interface UserRepository extends CrudRepository&lt;User, Long&gt; {\n    ...\n}\n</code></pre>\n<p>I need to return all ids and names of users with role='ADMIN' as <code>Map&lt;Long, String&gt;</code> e.g.:</p>\n<pre><code>@Query(&quot;SELECT u.id, u.name FROM User u WHERE u.role = :role&quot;)\nMap&lt;Long, String&gt; findIdAndNameByRole(String role);\n</code></pre>\n<p>But this call returns an error:</p>\n<blockquote>\n<p>javax.persistence.NonUniqueResultException: query did not return a unique result</p>\n</blockquote>\n<p>Question: how (if possible at all) to map the response from CrudRepository <strong>directly</strong> to Map&lt;Long, String&gt; <strong>without</strong> using projections or other conversions? Perhaps using <code>nativeQuery=true</code> somehow?</p>\n"},{"tags":["java","spring","spring-boot","cglib"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686635351,"post_id":76460642,"comment_id":134822008,"body_markdown":"Is this **really** your dao or is there something else on there like `@Transactional` or some other aspect in your library that leads to proxy creation? Something triggers the need for a proxy which won&#39;t work with a `final` method.","body":"Is this <b>really</b> your dao or is there something else on there like <code>@Transactional</code> or some other aspect in your library that leads to proxy creation? Something triggers the need for a proxy which won&#39;t work with a <code>final</code> method."},{"owner":{"account_id":2969956,"reputation":486,"user_id":2522234,"display_name":"RMSD"},"score":0,"creation_date":1686680324,"post_id":76460642,"comment_id":134831667,"body_markdown":"I forgot to add the `@Repository`, good catch. Edited the question.","body":"I forgot to add the <code>@Repository</code>, good catch. Edited the question."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686680397,"post_id":76460642,"comment_id":134831684,"body_markdown":"`@Repository` will lead to proxy creation, as that is needed to intercept the methods and do the exception translation.","body":"<code>@Repository</code> will lead to proxy creation, as that is needed to intercept the methods and do the exception translation."},{"owner":{"account_id":2969956,"reputation":486,"user_id":2522234,"display_name":"RMSD"},"score":0,"creation_date":1686688038,"post_id":76460642,"comment_id":134833053,"body_markdown":"I&#39;m aware, but I&#39;m hoping there was a way to disable CGLIB as the `@Configuration` seems to have a way to do so.\n\nIs there a better pattern I should consider if there&#39;s no work around in that case?","body":"I&#39;m aware, but I&#39;m hoping there was a way to disable CGLIB as the <code>@Configuration</code> seems to have a way to do so.  Is there a better pattern I should consider if there&#39;s no work around in that case?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686723172,"post_id":76460642,"comment_id":134836360,"body_markdown":"No there isn&#39;t, you need a proxy as there are no interfaces on this class this will automatically be a cglib proxy. There is no way around that. `@Configuration` classes are processed differently as regular components.","body":"No there isn&#39;t, you need a proxy as there are no interfaces on this class this will automatically be a cglib proxy. There is no way around that. <code>@Configuration</code> classes are processed differently as regular components."}],"owner":{"account_id":2969956,"reputation":486,"user_id":2522234,"display_name":"RMSD"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686688115,"creation_date":1686608108,"question_id":76460642,"body_markdown":"I have a pretty simple use-case in spring boot (currently 2.7, we do have plans to upgrade down the line) around a DAO:\r\n\r\n```java\r\n@Repository\r\npublic class Dao {\r\n\r\n   private final DbMapper mapper;\r\n\r\n    @Autowired\r\n    public Dao(DbMapper mapper) {\r\n        this.mapper = mapper;\r\n    }\r\n\r\n   @SafeVarargs\r\n   public final Flux&lt;Dto&gt; getAll(Consumer&lt;Dto&gt;... filters) {\r\n      return Flux.fromIterable(LibraryQueryBuilder. builder()\r\n              .filters(filters)\r\n              .build()\r\n              .execute(mapper)\r\n              .getAll());\r\n   }\r\n}\r\n```\r\n\r\nThis is perfectly valid java, but during runtime I see that mapper is null. During my investigation, I ran into: https://stackoverflow.com/questions/44386068/spring-accessing-field-from-final-method-returning-null which lead me to https://stackoverflow.com/questions/55853108/spring-boot-2-forces-cglib-proxy-even-with-proxytargetclass-false and [GitHub Issue 12194](https://github.com/spring-projects/spring-boot/issues/12194) which were both disappointing responses in the context of this issue.\r\n\r\nConsidering `@SafeVarargs` is a Java core language feature to stop compiler warnings and requires the method to be final, and I don&#39;t want to see warnings all over my usage code when I&#39;m using the varags safely is there any way to get `@SafeVarargs` to play nice with spring boot?","title":"Using @SafeVarags in a spring boot @Autowired class","body":"<p>I have a pretty simple use-case in spring boot (currently 2.7, we do have plans to upgrade down the line) around a DAO:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic class Dao {\n\n   private final DbMapper mapper;\n\n    @Autowired\n    public Dao(DbMapper mapper) {\n        this.mapper = mapper;\n    }\n\n   @SafeVarargs\n   public final Flux&lt;Dto&gt; getAll(Consumer&lt;Dto&gt;... filters) {\n      return Flux.fromIterable(LibraryQueryBuilder. builder()\n              .filters(filters)\n              .build()\n              .execute(mapper)\n              .getAll());\n   }\n}\n</code></pre>\n<p>This is perfectly valid java, but during runtime I see that mapper is null. During my investigation, I ran into: <a href=\"https://stackoverflow.com/questions/44386068/spring-accessing-field-from-final-method-returning-null\">Spring: Accessing field from final method returning null</a> which lead me to <a href=\"https://stackoverflow.com/questions/55853108/spring-boot-2-forces-cglib-proxy-even-with-proxytargetclass-false\">Spring-Boot 2+ forces CGLIB proxy even with proxyTargetClass = false</a> and <a href=\"https://github.com/spring-projects/spring-boot/issues/12194\" rel=\"nofollow noreferrer\">GitHub Issue 12194</a> which were both disappointing responses in the context of this issue.</p>\n<p>Considering <code>@SafeVarargs</code> is a Java core language feature to stop compiler warnings and requires the method to be final, and I don't want to see warnings all over my usage code when I'm using the varags safely is there any way to get <code>@SafeVarargs</code> to play nice with spring boot?</p>\n"},{"tags":["java","spring","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"score":0,"creation_date":1686686863,"post_id":76467890,"comment_id":134832849,"body_markdown":"Consider adding `@EntityScan` to a Configuration class, in it include the package that contains your BaseEntity as well as the package that contains your application entities.   Something like this, `@EntityScan(basePackages = {&quot;com.myapp.entities&quot;, &quot;com.mysharedlibrary.sharedentities&quot;})`","body":"Consider adding <code>@EntityScan</code> to a Configuration class, in it include the package that contains your BaseEntity as well as the package that contains your application entities.   Something like this, <code>@EntityScan(basePackages = {&quot;com.myapp.entities&quot;, &quot;com.mysharedlibrary.sharedentities&quot;})</code>"},{"owner":{"account_id":19921098,"reputation":1,"user_id":14596931,"display_name":"javanator"},"score":0,"creation_date":1686687879,"post_id":76467890,"comment_id":134833033,"body_markdown":"Still the same problem, additionally I noticed that no field is added to the child class - I manually added @Id to &#39;Test&#39; class - application started but created table consist only of two columns: &#39;id&#39; and &#39;a&#39; - both columns: &#39;modified&#39; and &#39;created&#39; are missing.","body":"Still the same problem, additionally I noticed that no field is added to the child class - I manually added @Id to &#39;Test&#39; class - application started but created table consist only of two columns: &#39;id&#39; and &#39;a&#39; - both columns: &#39;modified&#39; and &#39;created&#39; are missing."}],"owner":{"account_id":19921098,"reputation":1,"user_id":14596931,"display_name":"javanator"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686688073,"creation_date":1686682028,"question_id":76467890,"body_markdown":"I would like to create a library that includes all the basic operations and models that I can use in other applications. Therefore, I created a JAR library in which I added a class called **BaseEntity**, which is intended to be the base class for other classes. I built the JAR and added it to another project using Maven. I created a class **Test** that extends BaseEntity, but unfortunately, the @Id annotation was not inherited from the base class. \r\n\r\nIn IntelliJ, an error is displayed: &quot;Persistent entity &#39;Test&#39; should have a primary key.&quot; \r\n\r\nWhen I run the application, I receive an error: &quot;Entity &#39;Test&#39; has no identifier (every &#39;@Entity&#39; class must declare or inherit at least one &#39;@Id&#39; or &#39;@EmbeddedId&#39; property)&quot;\r\n\r\n\r\nBaseEntity:\r\n```\r\n@MappedSuperclass\r\npublic class BaseEntity {\r\n    @Id\r\n    @GeneratedValue\r\n    protected UUID id;\r\n    @LastModifiedDate\r\n    protected LocalDateTime modified;\r\n    @CreatedDate\r\n    protected LocalDateTime created;\r\n    //getters, setters\r\n}\r\n```\r\n\r\n\r\nTest:\r\n```\r\n@Entity\r\npublic class Test extends BaseEntity {\r\n    private String a;\r\n    //getters, setters\r\n}\r\n```\r\n\r\nThe problem only occurs when BaseEntity is in an another JAR, if I create BaseEntity in the same project application works fine.\r\n\r\nHow to make it work?\r\n\r\n\\\\Update:\r\nI noticed that no field is added to the child class - I manually added @Id to &#39;Test&#39; class - application started but created table consist only of two columns: &#39;id&#39; and &#39;a&#39; - both columns: &#39;modified&#39; and &#39;created&#39; are missing.\r\n","title":"Unable to inherit @Id from @MappedSuperclass from another JAR","body":"<p>I would like to create a library that includes all the basic operations and models that I can use in other applications. Therefore, I created a JAR library in which I added a class called <strong>BaseEntity</strong>, which is intended to be the base class for other classes. I built the JAR and added it to another project using Maven. I created a class <strong>Test</strong> that extends BaseEntity, but unfortunately, the @Id annotation was not inherited from the base class.</p>\n<p>In IntelliJ, an error is displayed: &quot;Persistent entity 'Test' should have a primary key.&quot;</p>\n<p>When I run the application, I receive an error: &quot;Entity 'Test' has no identifier (every '@Entity' class must declare or inherit at least one '@Id' or '@EmbeddedId' property)&quot;</p>\n<p>BaseEntity:</p>\n<pre><code>@MappedSuperclass\npublic class BaseEntity {\n    @Id\n    @GeneratedValue\n    protected UUID id;\n    @LastModifiedDate\n    protected LocalDateTime modified;\n    @CreatedDate\n    protected LocalDateTime created;\n    //getters, setters\n}\n</code></pre>\n<p>Test:</p>\n<pre><code>@Entity\npublic class Test extends BaseEntity {\n    private String a;\n    //getters, setters\n}\n</code></pre>\n<p>The problem only occurs when BaseEntity is in an another JAR, if I create BaseEntity in the same project application works fine.</p>\n<p>How to make it work?</p>\n<p>\\Update:\nI noticed that no field is added to the child class - I manually added @Id to 'Test' class - application started but created table consist only of two columns: 'id' and 'a' - both columns: 'modified' and 'created' are missing.</p>\n"},{"tags":["java","spring","spring-boot","autowired"],"answers":[{"tags":[],"owner":{"account_id":6814970,"reputation":1416,"user_id":5243983,"display_name":"Felix"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686687014,"creation_date":1686687014,"answer_id":76468404,"question_id":76468371,"body_markdown":"`Print` should also be an `@Component`.","title":"@Autowired function don&#39;t work with @SpringBootApplication","body":"<p><code>Print</code> should also be an <code>@Component</code>.</p>\n"},{"tags":[],"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686687935,"creation_date":1686687935,"answer_id":76468484,"question_id":76468371,"body_markdown":"At this point\r\n\r\n    Print print = new Print();\r\n\r\nThe Spring framework is not aware at all of the object creation and it won&#39;t inject anything, anywhere in the object tree.\r\n\r\nIf you want to use Spring DI at this point `main()`, then `run()` gives back a Spring context:\r\n\r\n    ApplicationContext ctx = SpringApplication.run(DbApplication.class, args);\r\n    Print print = ctx.getBean(Print.class);\r\n\r\n","title":"@Autowired function don&#39;t work with @SpringBootApplication","body":"<p>At this point</p>\n<pre><code>Print print = new Print();\n</code></pre>\n<p>The Spring framework is not aware at all of the object creation and it won't inject anything, anywhere in the object tree.</p>\n<p>If you want to use Spring DI at this point <code>main()</code>, then <code>run()</code> gives back a Spring context:</p>\n<pre><code>ApplicationContext ctx = SpringApplication.run(DbApplication.class, args);\nPrint print = ctx.getBean(Print.class);\n</code></pre>\n"}],"owner":{"account_id":28807295,"reputation":1,"user_id":22062872,"display_name":"overloewner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686723506,"answer_count":2,"score":0,"last_activity_date":1686687935,"creation_date":1686686690,"question_id":76468371,"body_markdown":"I&#39;m a beginner\r\nwhen I used the usual config and context everything was fine.\r\nhow to fix it with @SpringBootApplication\r\n\r\nHere is the code of the simplest program:\r\n\r\n\r\n```\r\npackage com.example;\r\n\r\nimport com.example.domain.Print;\r\nimport org.springframework.boot.SpringApplication;\r\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\r\n@SpringBootApplication\r\npublic class DbApplication {\r\n\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(DbApplication.class, args);\r\n    Print print = new Print();\r\n    print.testSayHello();\r\n  }\r\n}\r\n```\r\n\r\n\r\n```\r\npackage com.example.domain;\r\n\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class Test {\r\n    public void sayHello(){\r\n        System.out.println(&quot;Hello&quot;);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npackage com.example.domain;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\n\r\npublic class Print {\r\n\r\n    @Autowired\r\n    public Test test;\r\n\r\n    public void testSayHello(){\r\n        test.sayHello();\r\n    }\r\n}\r\n```\r\n\r\nreturns the following Exception:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;com.example.domain.Test.sayHello()&quot; because &quot;this.test&quot; is null\r\n  at com.example.domain.Print.testSayHello(Print.java:11)\r\n  at com.example.DbApplication.main(DbApplication.java:14)\r\n```\r\n\r\nI tried to replace everything with the usual сontext and config, everything worked, but now I need @SpringBootApplication, help pls","title":"@Autowired function don&#39;t work with @SpringBootApplication","body":"<p>I'm a beginner\nwhen I used the usual config and context everything was fine.\nhow to fix it with @SpringBootApplication</p>\n<p>Here is the code of the simplest program:</p>\n<pre><code>package com.example;\n\nimport com.example.domain.Print;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class DbApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DbApplication.class, args);\n    Print print = new Print();\n    print.testSayHello();\n  }\n}\n</code></pre>\n<pre><code>package com.example.domain;\n\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class Test {\n    public void sayHello(){\n        System.out.println(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n<pre><code>package com.example.domain;\n\nimport org.springframework.beans.factory.annotation.Autowired;\n\npublic class Print {\n\n    @Autowired\n    public Test test;\n\n    public void testSayHello(){\n        test.sayHello();\n    }\n}\n</code></pre>\n<p>returns the following Exception:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException: Cannot invoke &quot;com.example.domain.Test.sayHello()&quot; because &quot;this.test&quot; is null\n  at com.example.domain.Print.testSayHello(Print.java:11)\n  at com.example.DbApplication.main(DbApplication.java:14)\n</code></pre>\n<p>I tried to replace everything with the usual сontext and config, everything worked, but now I need @SpringBootApplication, help pls</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","jpa"],"comments":[{"owner":{"account_id":14226667,"reputation":523,"user_id":10277150,"display_name":"gurkan"},"score":0,"creation_date":1686689514,"post_id":76468470,"comment_id":134833309,"body_markdown":"did you try  `org.hibernate.dialect.MySQL8Dialect` ?","body":"did you try  <code>org.hibernate.dialect.MySQL8Dialect</code> ?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686724413,"post_id":76468470,"comment_id":134836606,"body_markdown":"It has nothing to do with versions etc. you simply cannot connect to the database. Make sure it is active and accesible. Also is this at startup or after some time of running your application?","body":"It has nothing to do with versions etc. you simply cannot connect to the database. Make sure it is active and accesible. Also is this at startup or after some time of running your application?"},{"owner":{"account_id":7916297,"reputation":1632,"user_id":5978625,"display_name":"DevAnuragGarg"},"score":0,"creation_date":1687184127,"post_id":76468470,"comment_id":134897479,"body_markdown":"Got the solution, running the latest version of mysql with spring is not working. I just downgraded the spring version and it worked. Voila..!!! I wasted 2 days on this..","body":"Got the solution, running the latest version of mysql with spring is not working. I just downgraded the spring version and it worked. Voila..!!! I wasted 2 days on this.."}],"owner":{"account_id":7916297,"reputation":1632,"user_id":5978625,"display_name":"DevAnuragGarg"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":182,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686687781,"creation_date":1686687781,"question_id":76468470,"body_markdown":"I am trying to connect to mysql server, but unable to. There is some weird error coming up. Logs are present as below\r\n\r\n```\r\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\ncurrency_exchange  | 2023-06-13T20:06:18.957Z DEBUG 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Cannot acquire connection from data source\r\ncurrency_exchange  |\r\ncurrency_exchange  | com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\r\ncurrency_exchange  |\r\ncurrency_exchange  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\ncurrency_exchange  |    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\r\n```\r\n\r\nI am using the latest version of Spring boot 3.1.0, mysql connector of 8.0.32 in pom.xml, mysql as 8.0, and below is the configuration for application.yaml\r\n```\r\n  database configuration\r\n  datasource:\r\n    url: jdbc:mysql://mysqldb-service:3306/currency_exchange_db?autoReconnect=true&amp;useSSL=false\r\n    username: root\r\n    password: root\r\n    driverClassName: com.mysql.cj.jdbc.Driver\r\n\r\n  # jpa configuration\r\n  jpa:\r\n    show-sql: true\r\n    generate-ddl: true\r\n    hibernate.ddl-auto: update\r\n    database-platform: org.hibernate.dialect.MySQLDialect \r\n```\r\n\r\nI know issue is with the versions of these, which versions would work perfect, please let me know. Stuck from 2 days.","title":"Version for mysql connector, Dialect and mysql server version are not being compatible for mysql 8.0 version","body":"<p>I am trying to connect to mysql server, but unable to. There is some weird error coming up. Logs are present as below</p>\n<pre><code>The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\ncurrency_exchange  | 2023-06-13T20:06:18.957Z DEBUG 1 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Cannot acquire connection from data source\ncurrency_exchange  |\ncurrency_exchange  | com.mysql.cj.jdbc.exceptions.CommunicationsException: Communications link failure\ncurrency_exchange  |\ncurrency_exchange  | The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\ncurrency_exchange  |    at com.mysql.cj.jdbc.exceptions.SQLError.createCommunicationsException(SQLError.java:174) ~[mysql-connector-j-8.0.32.jar!/:8.0.32]\n</code></pre>\n<p>I am using the latest version of Spring boot 3.1.0, mysql connector of 8.0.32 in pom.xml, mysql as 8.0, and below is the configuration for application.yaml</p>\n<pre><code>  database configuration\n  datasource:\n    url: jdbc:mysql://mysqldb-service:3306/currency_exchange_db?autoReconnect=true&amp;useSSL=false\n    username: root\n    password: root\n    driverClassName: com.mysql.cj.jdbc.Driver\n\n  # jpa configuration\n  jpa:\n    show-sql: true\n    generate-ddl: true\n    hibernate.ddl-auto: update\n    database-platform: org.hibernate.dialect.MySQLDialect \n</code></pre>\n<p>I know issue is with the versions of these, which versions would work perfect, please let me know. Stuck from 2 days.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":7373320,"reputation":17364,"user_id":5612858,"display_name":"Arnaud"},"score":18,"creation_date":1516958437,"post_id":48458528,"comment_id":83909804,"body_markdown":"Don&#39;t call your class `String` .","body":"Don&#39;t call your class <code>String</code> ."},{"owner":{"account_id":5156654,"reputation":10601,"user_id":4129726,"display_name":"Sergii Lagutin"},"score":2,"creation_date":1516958477,"post_id":48458528,"comment_id":83909825,"body_markdown":"rename your `public class String` to something else","body":"rename your <code>public class String</code> to something else"}],"answers":[{"tags":[],"owner":{"account_id":7007079,"reputation":12271,"user_id":5375403,"display_name":"Jiri Tousek"},"comment_count":0,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1535356380,"creation_date":1516958507,"answer_id":48458546,"question_id":48458528,"body_markdown":"Since your class is named `String`, unqualified type reference in `String city` is taken as reference to your own class.\r\n\r\nEither rename the class to some other name, or you&#39;ll have to write `java.lang.String` wherever you reference the &quot;built-in&quot; Java `String` class.","title":"error: incompatible types: java.lang.String cannot be converted to String","body":"<p>Since your class is named <code>String</code>, unqualified type reference in <code>String city</code> is taken as reference to your own class.</p>\n\n<p>Either rename the class to some other name, or you'll have to write <code>java.lang.String</code> wherever you reference the \"built-in\" Java <code>String</code> class.</p>\n"},{"tags":[],"owner":{"account_id":426601,"reputation":961,"user_id":807890,"display_name":"Anton Tupy"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1535389522,"creation_date":1516959458,"answer_id":48458744,"question_id":48458528,"body_markdown":"It is conflict between system class java.lang.String and your class named String. Rename your class String to say MyString, i.e. replace line:\r\n\r\n    public class String\r\n\r\nwith\r\n\r\n    public class MyString\r\n\r\nAnd rename file String.java containing this class to MyString.java.","title":"error: incompatible types: java.lang.String cannot be converted to String","body":"<p>It is conflict between system class java.lang.String and your class named String. Rename your class String to say MyString, i.e. replace line:</p>\n\n<pre><code>public class String\n</code></pre>\n\n<p>with</p>\n\n<pre><code>public class MyString\n</code></pre>\n\n<p>And rename file String.java containing this class to MyString.java.</p>\n"},{"tags":[],"owner":{"account_id":18534248,"reputation":1,"user_id":13504307,"display_name":"Shubham kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1679659113,"creation_date":1679659113,"answer_id":75833372,"question_id":48458528,"body_markdown":"write one statement java.lang.String.*;\r\nimport java.lang.String; your problem will be solved","title":"error: incompatible types: java.lang.String cannot be converted to String","body":"<p>write one statement java.lang.String.*;\nimport java.lang.String; your problem will be solved</p>\n"},{"comments":[{"owner":{"account_id":413689,"reputation":40197,"user_id":787480,"accept_rate":69,"display_name":"Sneftel"},"score":1,"creation_date":1686687776,"post_id":76468379,"comment_id":134833016,"body_markdown":"Wasn’t that already covered by the other answers?","body":"Wasn’t that already covered by the other answers?"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":1,"creation_date":1687258282,"post_id":76468379,"comment_id":134908282,"body_markdown":"`String` is not a keyword.","body":"<code>String</code> is not a keyword."}],"tags":[],"owner":{"account_id":12523194,"reputation":1,"user_id":9113901,"display_name":"Vijay Krishnamoorthy"},"comment_count":2,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1686686793,"creation_date":1686686793,"answer_id":76468379,"question_id":48458528,"body_markdown":"String is a reserved key word in Java, Please refer to the reserved keywords in java [Java Reserved Keywords][1].\r\n\r\nRenaming the class to something other than these keywords would be the solution to your problem. Or you can follow the import statement solution above.\r\n\r\nBTW, Please use a good IDE to develop java programs, it seems that your IDE is not showing or linting basic rules.\r\n\r\n\r\n  [1]: https://www.javatpoint.com/java-keywords#:~:text=A%20list%20of%20Java%20keywords%20or%20reserved%20words,that%20can%20hold%208-bit%20data%20values.%20More%20items","title":"error: incompatible types: java.lang.String cannot be converted to String","body":"<p>String is a reserved key word in Java, Please refer to the reserved keywords in java <a href=\"https://www.javatpoint.com/java-keywords#:%7E:text=A%20list%20of%20Java%20keywords%20or%20reserved%20words,that%20can%20hold%208-bit%20data%20values.%20More%20items\" rel=\"nofollow noreferrer\">Java Reserved Keywords</a>.</p>\n<p>Renaming the class to something other than these keywords would be the solution to your problem. Or you can follow the import statement solution above.</p>\n<p>BTW, Please use a good IDE to develop java programs, it seems that your IDE is not showing or linting basic rules.</p>\n"}],"owner":{"display_name":"user9271508"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23621,"favorite_count":0,"down_vote_count":3,"up_vote_count":3,"answer_count":4,"score":0,"last_activity_date":1686686793,"creation_date":1516958397,"question_id":48458528,"body_markdown":"I&#39;m taking a Java class for college, and was working on some given tasks. This is the code I wrote for it.\r\n\r\n    public class String\r\n    {\r\n     public static void main(String[] args)\r\n     {\r\n      String city = &quot;San Francisco&quot;;\r\n      int stringLength = city.length();\r\n      char oneChar = city.charAt(0);\r\n      String upperCity = city.toUpperCase();\r\n      String lowerCity = city.toLowerCase();\r\n  \r\n      System.out.println(city);\r\n      System.out.println(stringLength);\r\n      System.out.println(oneChar);\r\n      System.out.println(upperCity);\r\n      System.out.println();\r\n      }\r\n     }\r\n\r\nwhich yielded these results\r\n\r\n    C:\\Users\\sam\\Documents\\Java&gt;javac String.java\r\n    String.java:8: error: incompatible types: java.lang.String cannot be \r\n    converted to String\r\n              String city = &quot;San Franciso&quot;;\r\n                            ^\r\n    String.java:9: error: cannot find symbol\r\n                int stringLength = city.length();\r\n                                       ^\r\n    symbol:   method length()\r\n    location: variable city of type String\r\n    String.java:10: error: cannot find symbol\r\n                char oneChar = city.charAt(0);\r\n                                   ^\r\n    symbol:   method charAt(int)\r\n    location: variable city of type String\r\n    String.java:11: error: cannot find symbol\r\n                String upperCity = city.toUpperCase();\r\n                                       ^\r\n    symbol:   method toUpperCase()\r\n    location: variable city of type String\r\n    String.java:12: error: cannot find symbol\r\n                String lowerCity = city.toLowerCase();\r\n                                       ^\r\n    symbol:   method toLowerCase()\r\n    location: variable city of type String\r\n    5 errors\r\n\r\nI&#39;ve tried searching for an answer but I didn&#39;t really find anything that helps. Any help is appreciated, thanks.","title":"error: incompatible types: java.lang.String cannot be converted to String","body":"<p>I'm taking a Java class for college, and was working on some given tasks. This is the code I wrote for it.</p>\n\n<pre><code>public class String\n{\n public static void main(String[] args)\n {\n  String city = \"San Francisco\";\n  int stringLength = city.length();\n  char oneChar = city.charAt(0);\n  String upperCity = city.toUpperCase();\n  String lowerCity = city.toLowerCase();\n\n  System.out.println(city);\n  System.out.println(stringLength);\n  System.out.println(oneChar);\n  System.out.println(upperCity);\n  System.out.println();\n  }\n }\n</code></pre>\n\n<p>which yielded these results</p>\n\n<pre><code>C:\\Users\\sam\\Documents\\Java&gt;javac String.java\nString.java:8: error: incompatible types: java.lang.String cannot be \nconverted to String\n          String city = \"San Franciso\";\n                        ^\nString.java:9: error: cannot find symbol\n            int stringLength = city.length();\n                                   ^\nsymbol:   method length()\nlocation: variable city of type String\nString.java:10: error: cannot find symbol\n            char oneChar = city.charAt(0);\n                               ^\nsymbol:   method charAt(int)\nlocation: variable city of type String\nString.java:11: error: cannot find symbol\n            String upperCity = city.toUpperCase();\n                                   ^\nsymbol:   method toUpperCase()\nlocation: variable city of type String\nString.java:12: error: cannot find symbol\n            String lowerCity = city.toLowerCase();\n                                   ^\nsymbol:   method toLowerCase()\nlocation: variable city of type String\n5 errors\n</code></pre>\n\n<p>I've tried searching for an answer but I didn't really find anything that helps. Any help is appreciated, thanks.</p>\n"},{"tags":["java","performance","directory-walk"],"comments":[{"owner":{"account_id":369,"reputation":47061,"user_id":462,"display_name":"Greg Case"},"score":0,"creation_date":1228868434,"post_id":354703,"comment_id":186644,"body_markdown":"What&#39;s your target architecture?  Do you need to maintain cross-platform execution?","body":"What&#39;s your target architecture?  Do you need to maintain cross-platform execution?"},{"owner":{"account_id":5807,"reputation":392471,"user_id":9530,"accept_rate":78,"display_name":"Adam Rosenfield"},"score":8,"creation_date":1389222762,"post_id":354703,"comment_id":31575006,"body_markdown":"I realize that this is a very old question, but for anyone using the latest JDK7, this functionality is now available via the [`Files.newDirectoryStream()`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newDirectoryStream%28java.nio.file.Path%29) API in the `java.nio.file` package.","body":"I realize that this is a very old question, but for anyone using the latest JDK7, this functionality is now available via the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html#newDirectoryStream%28java.nio.file.Path%29\" rel=\"nofollow noreferrer\"><code>Files.newDirectoryStream()</code></a> API in the <code>java.nio.file</code> package."},{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":0,"creation_date":1571258695,"post_id":354703,"comment_id":103185076,"body_markdown":"On a side note, we were able to speed up performance dramatically by using subdirectories extensively to limit the number of files/directories in any one single directory. Made certain file operations like file checking and writing much much faster but certain things like `du` and `rm -rf` did take longer. It&#39;s a trade off, depending on what is more important for your use case.","body":"On a side note, we were able to speed up performance dramatically by using subdirectories extensively to limit the number of files/directories in any one single directory. Made certain file operations like file checking and writing much much faster but certain things like <code>du</code> and <code>rm -rf</code> did take longer. It&#39;s a trade off, depending on what is more important for your use case."}],"answers":[{"comments":[{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":0,"creation_date":1228870906,"post_id":354721,"comment_id":186714,"body_markdown":"for now, would agree that you might want to wrap FFF/FNF as suggested here.","body":"for now, would agree that you might want to wrap FFF/FNF as suggested here."},{"owner":{"account_id":6508,"reputation":16117,"user_id":10973,"accept_rate":94,"display_name":"Kevin Day"},"score":0,"creation_date":1228884278,"post_id":354721,"comment_id":186952,"body_markdown":"Bear in mind that bridging the native barrier will have performance impacts itself.  If you take this approach, you might want to consider batching several FNF results per JNI call (or possibly use a DirectByteBuffer for the data transfer)","body":"Bear in mind that bridging the native barrier will have performance impacts itself.  If you take this approach, you might want to consider batching several FNF results per JNI call (or possibly use a DirectByteBuffer for the data transfer)"},{"owner":{"account_id":407393,"reputation":1182,"user_id":777443,"accept_rate":89,"display_name":"Peter"},"score":0,"creation_date":1359308376,"post_id":354721,"comment_id":20297120,"body_markdown":"+1 for suggesting FFF/FNF. I have posted a working example below.","body":"+1 for suggesting FFF/FNF. I have posted a working example below."}],"tags":[],"owner":{"account_id":8101,"reputation":5979,"user_id":14388,"display_name":"grepsedawk"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1228868563,"creation_date":1228868563,"answer_id":354721,"question_id":354703,"body_markdown":"A non-portable solution would be to make native calls to the operating system and stream the results.\n\n**For Linux**\n\n  You can look at something like &lt;a href=&quot;http://linux.die.net/man/3/readdir&quot;&gt;readdir&lt;/a&gt;. You can walk the directory structure like a linked list and return results in batches or individually.\n\n**For Windows**\n\n  In windows the behavior would be fairly similar using &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/aa364418(VS.85).aspx&quot;&gt;FindFirstFile&lt;/a&gt; and &lt;a href=&quot;http://msdn.microsoft.com/en-us/library/aa364428(VS.85).aspx&quot;&gt;FindNextFile&lt;/a&gt; apis.","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>A non-portable solution would be to make native calls to the operating system and stream the results.</p>\n<p><strong>For Linux</strong></p>\n<p>You can look at something like <a href=\"http://linux.die.net/man/3/readdir\" rel=\"nofollow noreferrer\">readdir</a>. You can walk the directory structure like a linked list and return results in batches or individually.</p>\n<p><strong>For Windows</strong></p>\n<p>In windows the behavior would be fairly similar using <a href=\"http://msdn.microsoft.com/en-us/library/aa364418(VS.85).aspx\" rel=\"nofollow noreferrer\">FindFirstFile</a> and <a href=\"http://msdn.microsoft.com/en-us/library/aa364428(VS.85).aspx\" rel=\"nofollow noreferrer\">FindNextFile</a> apis.</p>\n"},{"comments":[{"owner":{"account_id":7808,"reputation":24390,"user_id":13687,"display_name":"John Gardner"},"score":0,"creation_date":1228870741,"post_id":354743,"comment_id":186708,"body_markdown":"that implies a lot of things though: a webserver, implementing some kind of security that SMB/etc already have, and so on.","body":"that implies a lot of things though: a webserver, implementing some kind of security that SMB/etc already have, and so on."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1228871695,"post_id":354743,"comment_id":186739,"body_markdown":"Not really. Is like have a LAN website isn&#39;t? I think this is an already solved issue. Although now that you mention it, I have no idea how to setup a website that could be visible only in the LAN. I&#39;m pretty sure a .exe that server files and uses Windows authentication already exists.","body":"Not really. Is like have a LAN website isn&#39;t? I think this is an already solved issue. Although now that you mention it, I have no idea how to setup a website that could be visible only in the LAN. I&#39;m pretty sure a .exe that server files and uses Windows authentication already exists."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1228871840,"post_id":354743,"comment_id":186741,"body_markdown":"Isn&#39;t IIS support this kind of functionality?... I think it can authenticate window users very easily. But I agree, It is not transparent. However I find it far easier / faster than wrap native code via JNI and still using SMB as the protocol.","body":"Isn&#39;t IIS support this kind of functionality?... I think it can authenticate window users very easily. But I agree, It is not transparent. However I find it far easier / faster than wrap native code via JNI and still using SMB as the protocol."}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1228869402,"creation_date":1228869402,"answer_id":354743,"question_id":354703,"body_markdown":"An alternative is to have the files served over a different protocol. As I understand you&#39;re using SMB for that and java is just trying to list them as a regular file.\r\n\r\n\r\nThe problem here might not be java alone ( how does it behaves when you open that directory with Microsoft Explorer  x:\\shared )  In my experience it also take a considerably amount of time.\r\n\r\n\r\n\r\nYou can change the protocol to something like HTTP, only to fetch the file names. This way you can retrieve the list of files over http ( 10k lines should&#39;t be too much ) and let the server deal with file listing. This would be very fast, since it will run with local resources ( those in the server ) \r\n\r\n\r\nThen when you have the list, you can process them one by exactly the way you&#39;re doing right now.\r\n\r\n\r\nThe keypoint is to have an aid mechanism in the other side of the node.\r\n\r\n\r\nIs this feasible?\r\n\r\nToday:\r\n\r\n    File [] content = new File(&quot;X:\\\\remote\\\\dir&quot;).listFiles();\r\n\r\n    for ( File f : content ) {\r\n        process( f );\r\n    }\r\n  \r\nProposed:\r\n\r\n    String [] content = fetchViaHttpTheListNameOf(&quot;x:\\\\remote\\\\dir&quot;);\r\n\r\n    for ( String fileName : content ) {\r\n        process( new File( fileName ) );\r\n    }\r\n\r\nThe http server could be a very small small and simple file.\r\n\r\nIf this is the way you have it right now, what you&#39;re doing is to fetch all the 10k files information to your client machine ( I don&#39;t know how much of that info ) when you only need the file name for later processing. \r\n\r\nIf the processing is very fast right now it may be slowed down a bit. This is because the information prefetched is no longer available.\r\n\r\nGive it a try.\r\n\r\n\r\n","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>An alternative is to have the files served over a different protocol. As I understand you're using SMB for that and java is just trying to list them as a regular file.</p>\n\n<p>The problem here might not be java alone ( how does it behaves when you open that directory with Microsoft Explorer  x:\\shared )  In my experience it also take a considerably amount of time.</p>\n\n<p>You can change the protocol to something like HTTP, only to fetch the file names. This way you can retrieve the list of files over http ( 10k lines should't be too much ) and let the server deal with file listing. This would be very fast, since it will run with local resources ( those in the server ) </p>\n\n<p>Then when you have the list, you can process them one by exactly the way you're doing right now.</p>\n\n<p>The keypoint is to have an aid mechanism in the other side of the node.</p>\n\n<p>Is this feasible?</p>\n\n<p>Today:</p>\n\n<pre><code>File [] content = new File(\"X:\\\\remote\\\\dir\").listFiles();\n\nfor ( File f : content ) {\n    process( f );\n}\n</code></pre>\n\n<p>Proposed:</p>\n\n<pre><code>String [] content = fetchViaHttpTheListNameOf(\"x:\\\\remote\\\\dir\");\n\nfor ( String fileName : content ) {\n    process( new File( fileName ) );\n}\n</code></pre>\n\n<p>The http server could be a very small small and simple file.</p>\n\n<p>If this is the way you have it right now, what you're doing is to fetch all the 10k files information to your client machine ( I don't know how much of that info ) when you only need the file name for later processing. </p>\n\n<p>If the processing is very fast right now it may be slowed down a bit. This is because the information prefetched is no longer available.</p>\n\n<p>Give it a try.</p>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1228872800,"post_id":354779,"comment_id":186757,"body_markdown":"this is a good solution for static trees or trees that don&#39;t change often, but you need to transverse it often","body":"this is a good solution for static trees or trees that don&#39;t change often, but you need to transverse it often"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1228932276,"post_id":354779,"comment_id":188321,"body_markdown":"Yeah, I used it for cases where it was a run-once batch type of program.  If you did it often, well I&#39;m not sure that using exec() to recreate that file wouldn&#39;t work--but regardless it&#39;s an inelegant, error-prone solution.","body":"Yeah, I used it for cases where it was a run-once batch type of program.  If you did it often, well I&#39;m not sure that using exec() to recreate that file wouldn&#39;t work--but regardless it&#39;s an inelegant, error-prone solution."},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":1,"creation_date":1228945893,"post_id":354779,"comment_id":189005,"body_markdown":"I just tried this and a &quot;dir /B /S ...&quot; took about 30 mins to collect over 200MB of paths, while it took about 3.5 hours to transverse the same tree using File.list()","body":"I just tried this and a &quot;dir /B /S ...&quot; took about 30 mins to collect over 200MB of paths, while it took about 3.5 hours to transverse the same tree using File.list()"},{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1228945952,"post_id":354779,"comment_id":189010,"body_markdown":"I am going to accept this solution, as it will probably solve the issue most of the time.","body":"I am going to accept this solution, as it will probably solve the issue most of the time."},{"owner":{"account_id":15903,"reputation":323443,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1233823249,"post_id":354779,"comment_id":328720,"body_markdown":"Bill: Mention that you must use a flag which tells dir/ls *not* to sort the results (so start getting names immediately): &quot;ls -U&quot;. There doesn&#39;t seem to be such an option for &quot;dir&quot; :/","body":"Bill: Mention that you must use a flag which tells dir/ls <i>not</i> to sort the results (so start getting names immediately): &quot;ls -U&quot;. There doesn&#39;t seem to be such an option for &quot;dir&quot; :/"},{"owner":{"account_id":324587,"reputation":18477,"user_id":645226,"accept_rate":74,"display_name":"Bhushan"},"score":0,"creation_date":1361903452,"post_id":354779,"comment_id":21237114,"body_markdown":"@BillK: the link in your answer is dead. Any way you can add some details in the answer?","body":"@BillK: the link in your answer is dead. Any way you can add some details in the answer?"},{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1361936052,"post_id":354779,"comment_id":21249991,"body_markdown":"Okay, now I officially hate Oracle.","body":"Okay, now I officially hate Oracle."},{"owner":{"account_id":217270,"reputation":2444,"user_id":472992,"display_name":"J&#246;rg"},"score":0,"creation_date":1389093573,"post_id":354779,"comment_id":31503366,"body_markdown":"@BillK there is a backup of your broken link available using the wayback machine here: http://web.archive.org/web/20080912133319/http://java.sun.com/developer/JDCTechTips/2003/tt0304.html","body":"@BillK there is a backup of your broken link available using the wayback machine here: <a href=\"http://web.archive.org/web/20080912133319/http://java.sun.com/developer/JDCTechTips/2003/tt0304.html\" rel=\"nofollow noreferrer\">web.archive.org/web/20080912133319/http://java.sun.com/&hellip;</a>"},{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":0,"creation_date":1397138494,"post_id":354779,"comment_id":35110278,"body_markdown":"@AaronDigulla `dir /b` does the trick (under Windows 7, in 2014 though)","body":"@AaronDigulla <code>dir &#47;b</code> does the trick (under Windows 7, in 2014 though)"}],"tags":[],"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"comment_count":9,"down_vote_count":1,"up_vote_count":10,"is_accepted":true,"score":9,"last_activity_date":1389219845,"creation_date":1228870637,"answer_id":354779,"question_id":354703,"body_markdown":"Although it&#39;s not pretty, I solved this kind of problem once by piping the output of dir/ls to a file before starting my app, and passing in the filename.\r\n\r\nIf you needed to do it within the app, you could just use system.exec(), but it would create some nastiness.\r\n\r\nYou asked.  The first form is going to be blazingly fast, the second should be pretty fast as well.\r\n\r\nBe sure to do the one item per line (bare, no decoration, no graphics), full path and recurse options of your selected command.\r\n\r\nEDIT: \r\n\r\n30 minutes just to get a directory listing, wow.\r\n\r\nIt just struck me that if you use exec(), you can get it&#39;s stdout redirected into a pipe instead of writing it to a file.\r\n\r\nIf you did that, you should start getting the files immediately and be able to begin processing before the command has completed.\r\n\r\nThe interaction may actually slow things down, but maybe not--you might give it a try.\r\n\r\nWow, I just went to find the syntax of the .exec command for you and came across this, possibly exactly what you want (it lists a directory using exec and &quot;ls&quot; and pipes the result into your program for processing):  [good link in wayback][2] (J&#246;rg provided in a comment to replace [this one][1] from sun that Oracle broke)\r\n\r\nAnyway, the idea is straightforward but getting the code right is annoying. I&#39;ll go steal some codes from the internets and hack them up--brb\r\n\r\n&lt;pre&gt;\r\n\r\n/**\r\n * Note: Only use this as a last resort!  It&#39;s specific to windows and even\r\n * at that it&#39;s not a good solution, but it should be fast.\r\n * \r\n * to use it, extend FileProcessor and call processFiles(&quot;...&quot;) with a list\r\n * of options if you want them like /s... I highly recommend /b\r\n * \r\n * override processFile and it will be called once for each line of output.\r\n */\r\nimport java.io.*;\r\n \r\npublic abstract class FileProcessor\r\n{\r\n   public void processFiles(String dirOptions)\r\n   {\r\n      Process theProcess = null;\r\n      BufferedReader inStream = null;\r\n \r\n      // call the Hello class\r\n      try\r\n      {\r\n          theProcess = Runtime.getRuntime().exec(&quot;cmd /c dir &quot; + dirOptions);\r\n      }\r\n      catch(IOException e)\r\n      {\r\n         System.err.println(&quot;Error on exec() method&quot;);\r\n         e.printStackTrace();  \r\n      }\r\n        \r\n      // read from the called program&#39;s standard output stream\r\n      try\r\n      {\r\n         inStream = new BufferedReader(\r\n                                new InputStreamReader( theProcess.getInputStream() ));  \r\n         processFile(inStream.readLine());\r\n      }\r\n      catch(IOException e)\r\n      {\r\n         System.err.println(&quot;Error on inStream.readLine()&quot;);\r\n         e.printStackTrace();  \r\n      }\r\n \r\n   } // end method\r\n   /** Override this method--it will be called once for each file */\r\n   public abstract void processFile(String filename);\r\n   \r\n\r\n} // end class\r\n&lt;/pre&gt;\r\n\r\nAnd thank you code donor at [IBM][3]\r\n\r\n\r\n  [1]: http://java.sun.com/developer/JDCTechTips/2003/tt0304.html &quot;this broken link here&quot;\r\n  [2]: http://web.archive.org/web/20080912133319/http://java.sun.com/developer/JDCTechTips/2003/tt0304.html\r\n  [3]: http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzaha/jvlngex1.htm &quot;IBM&quot;","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>Although it's not pretty, I solved this kind of problem once by piping the output of dir/ls to a file before starting my app, and passing in the filename.</p>\n\n<p>If you needed to do it within the app, you could just use system.exec(), but it would create some nastiness.</p>\n\n<p>You asked.  The first form is going to be blazingly fast, the second should be pretty fast as well.</p>\n\n<p>Be sure to do the one item per line (bare, no decoration, no graphics), full path and recurse options of your selected command.</p>\n\n<p>EDIT: </p>\n\n<p>30 minutes just to get a directory listing, wow.</p>\n\n<p>It just struck me that if you use exec(), you can get it's stdout redirected into a pipe instead of writing it to a file.</p>\n\n<p>If you did that, you should start getting the files immediately and be able to begin processing before the command has completed.</p>\n\n<p>The interaction may actually slow things down, but maybe not--you might give it a try.</p>\n\n<p>Wow, I just went to find the syntax of the .exec command for you and came across this, possibly exactly what you want (it lists a directory using exec and \"ls\" and pipes the result into your program for processing):  <a href=\"http://web.archive.org/web/20080912133319/http://java.sun.com/developer/JDCTechTips/2003/tt0304.html\" rel=\"nofollow noreferrer\">good link in wayback</a> (Jörg provided in a comment to replace <a href=\"http://java.sun.com/developer/JDCTechTips/2003/tt0304.html\" rel=\"nofollow noreferrer\" title=\"this broken link here\">this one</a> from sun that Oracle broke)</p>\n\n<p>Anyway, the idea is straightforward but getting the code right is annoying. I'll go steal some codes from the internets and hack them up--brb</p>\n\n<pre>\n\n/**\n * Note: Only use this as a last resort!  It's specific to windows and even\n * at that it's not a good solution, but it should be fast.\n * \n * to use it, extend FileProcessor and call processFiles(\"...\") with a list\n * of options if you want them like /s... I highly recommend /b\n * \n * override processFile and it will be called once for each line of output.\n */\nimport java.io.*;\n\npublic abstract class FileProcessor\n{\n   public void processFiles(String dirOptions)\n   {\n      Process theProcess = null;\n      BufferedReader inStream = null;\n\n      // call the Hello class\n      try\n      {\n          theProcess = Runtime.getRuntime().exec(\"cmd /c dir \" + dirOptions);\n      }\n      catch(IOException e)\n      {\n         System.err.println(\"Error on exec() method\");\n         e.printStackTrace();  \n      }\n\n      // read from the called program's standard output stream\n      try\n      {\n         inStream = new BufferedReader(\n                                new InputStreamReader( theProcess.getInputStream() ));  \n         processFile(inStream.readLine());\n      }\n      catch(IOException e)\n      {\n         System.err.println(\"Error on inStream.readLine()\");\n         e.printStackTrace();  \n      }\n\n   } // end method\n   /** Override this method--it will be called once for each file */\n   public abstract void processFile(String filename);\n\n\n} // end class\n</pre>\n\n<p>And thank you code donor at <a href=\"http://publib.boulder.ibm.com/infocenter/iseries/v5r3/index.jsp?topic=/rzaha/jvlngex1.htm\" rel=\"nofollow noreferrer\" title=\"IBM\">IBM</a></p>\n"},{"tags":[],"owner":{"account_id":13068,"reputation":2596,"user_id":26056,"accept_rate":0,"display_name":"kohlerm"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1228898975,"creation_date":1228898975,"answer_id":355448,"question_id":354703,"body_markdown":"I doubt the problem is relate to the bug report you referenced. \r\nThe issue there is &quot;only&quot; memory usage, but not necessarily speed. \r\nIf you have enough memory the bug is not relevant for your problem. \r\n\r\nYou should measure whether your problem is memory related or not. Turn on your Garbage Collector log and use for example [gcviewer][1] to analyze your memory usage.\r\n\r\n\r\nI suspect that it has to do with the SMB protocol causing the problem. \r\nYou can try to write a test in another language and see if it&#39;s faster, or you can try to get the list of filenames through some other method, such as described here in another post. \r\n \r\n\r\n\r\n  [1]: http://www.tagtraum.com/gcviewer.html ","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>I doubt the problem is relate to the bug report you referenced. \nThe issue there is \"only\" memory usage, but not necessarily speed. \nIf you have enough memory the bug is not relevant for your problem. </p>\n\n<p>You should measure whether your problem is memory related or not. Turn on your Garbage Collector log and use for example <a href=\"http://www.tagtraum.com/gcviewer.html\" rel=\"nofollow noreferrer\">gcviewer</a> to analyze your memory usage.</p>\n\n<p>I suspect that it has to do with the SMB protocol causing the problem. \nYou can try to write a test in another language and see if it's faster, or you can try to get the list of filenames through some other method, such as described here in another post. </p>\n"},{"comments":[{"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"score":0,"creation_date":1228931907,"post_id":355867,"comment_id":188307,"body_markdown":"?\n\nYou use listFiles() anyways, which would end up with the same performance.\n\nYou code does a whole lot of nothing.  listFiles().iterator() would have been the same.","body":"?  You use listFiles() anyways, which would end up with the same performance.  You code does a whole lot of nothing.  listFiles().iterator() would have been the same."},{"owner":{"account_id":15137,"reputation":7882,"user_id":1356709,"accept_rate":53,"display_name":"user2427"},"score":0,"creation_date":1228937990,"post_id":355867,"comment_id":188624,"body_markdown":"If you want to walk recursively through 5 levels of subdirectory with 10.000 files per directory listFiles.iterator() it kill your memory.\nFor several files in the same directory it&#39;s the same.","body":"If you want to walk recursively through 5 levels of subdirectory with 10.000 files per directory listFiles.iterator() it kill your memory. For several files in the same directory it&#39;s the same."}],"tags":[],"owner":{"account_id":15137,"reputation":7882,"user_id":1356709,"accept_rate":53,"display_name":"user2427"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1228943444,"creation_date":1228911496,"answer_id":355867,"question_id":354703,"body_markdown":"I wonder why there are 10k files in a directory. Some file systems do not work well with so many files. There are specifics limitations for file systems like max amount of files per directory and max amount of levels of subdirectory.\r\n\r\nI solve a similar problem with an iterator solution.  \r\n\r\nI needed to walk across huge directorys and several levels of directory tree recursively.\r\n\r\nI try FileUtils.iterateFiles() of Apache commons io. But it implement the iterator by adding all the files in a List and then returning List.iterator(). It&#39;s very bad for memory.\r\n\r\nSo I prefer to write something like this:\r\n\r\n    private static class SequentialIterator implements Iterator&lt;File&gt; {\r\n    \tprivate DirectoryStack dir = null;\r\n    \tprivate File current = null;\r\n    \tprivate long limit;\r\n    \tprivate FileFilter filter = null;\r\n    \r\n    \tpublic SequentialIterator(String path, long limit, FileFilter ff) {\r\n    \t\tcurrent = new File(path);\r\n    \t\tthis.limit = limit;\r\n    \t\tfilter = ff;\r\n    \t\tdir = DirectoryStack.getNewStack(current);\r\n    \t}\r\n    \r\n    \tpublic boolean hasNext() {\r\n    \t\twhile(walkOver());\r\n    \t\treturn isMore &amp;&amp; (limit &gt; count || limit &lt; 0) &amp;&amp; dir.getCurrent() != null;\r\n    \t}\r\n    \r\n    \tprivate long count = 0;\r\n    \r\n    \tpublic File next() {\r\n    \t\tFile aux = dir.getCurrent();\r\n    \t\tdir.advancePostition();\r\n    \t\tcount++;\r\n    \t\treturn aux;\r\n    \t}\r\n    \r\n    \tprivate boolean walkOver() {\r\n    \t\tif (dir.isOutOfDirListRange()) {\r\n    \t\t\tif (dir.isCantGoParent()) {\r\n    \t\t\t\tisMore = false;\r\n    \t\t\t\treturn false;\r\n    \t\t\t} else {\r\n    \t\t\t\tdir.goToParent();\r\n    \t\t\t\tdir.advancePostition();\r\n    \t\t\t\treturn true;\r\n    \t\t\t}\r\n    \t\t} else {\r\n    \t\t\tif (dir.isCurrentDirectory()) {\r\n    \t\t\t\tif (dir.isDirectoryEmpty()) {\r\n    \t\t\t\t\tdir.advancePostition();\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tdir.goIntoDir();\r\n    \t\t\t\t}\r\n    \t\t\t\treturn true;\r\n    \t\t\t} else {\r\n    \t\t\t\tif (filter.accept(dir.getCurrent())) {\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t} else {\r\n    \t\t\t\t\tdir.advancePostition();\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    \tprivate boolean isMore = true;\r\n    \r\n    \tpublic void remove() {\r\n    \t\tthrow new UnsupportedOperationException();\r\n    \t}\r\n    \r\n    }\r\n\r\nNote that the iterator stop by an amount of files iterateds and it has a FileFilter also.\r\n\r\nAnd DirectoryStack is:\r\n\r\n    public class DirectoryStack {\r\n    \tprivate class Element{\r\n    \t\tprivate File files[] = null;\r\n    \t\tprivate int currentPointer;\r\n    \t\tpublic Element(File current) {\r\n    \t\t\tcurrentPointer = 0;\r\n    \t\t\tif (current.exists()) {\r\n    \t\t\t\tif(current.isDirectory()){\r\n    \t\t\t\t\tfiles = current.listFiles();\r\n    \t\t\t\t\tSet&lt;File&gt; set = new TreeSet&lt;File&gt;();\r\n    \t\t\t\t\tfor (int i = 0; i &lt; files.length; i++) {\r\n    \t\t\t\t\t\tFile file = files[i];\r\n    \t\t\t\t\t\tset.add(file);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tset.toArray(files);\r\n    \t\t\t\t}else{\r\n    \t\t\t\t\tthrow new IllegalArgumentException(&quot;File current must be directory&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t} else {\r\n    \t\t\t\tthrow new IllegalArgumentException(&quot;File current not exist&quot;);\r\n    \t\t\t}\r\n    \r\n    \t\t}\r\n    \t\tpublic String toString(){\r\n    \t\t\treturn &quot;current=&quot;+getCurrent().toString();\r\n    \t\t}\r\n    \t\tpublic int getCurrentPointer() {\r\n    \t\t\treturn currentPointer;\r\n    \t\t}\r\n    \t\tpublic void setCurrentPointer(int currentPointer) {\r\n    \t\t\tthis.currentPointer = currentPointer;\r\n    \t\t}\r\n    \t\tpublic File[] getFiles() {\r\n    \t\t\treturn files;\r\n    \t\t}\r\n    \t\tpublic File getCurrent(){\r\n    \t\t\tFile ret = null;\r\n    \t\t\ttry{\r\n    \t\t\t\tret = getFiles()[getCurrentPointer()];\r\n    \t\t\t}catch (Exception e){\r\n    \t\t\t}\r\n    \t\t\treturn ret;\r\n    \t\t}\r\n    \t\tpublic boolean isDirectoryEmpty(){\r\n    \t\t\treturn !(getFiles().length&gt;0);\r\n    \t\t}\r\n    \t\tpublic Element advancePointer(){\r\n    \t\t\tsetCurrentPointer(getCurrentPointer()+1);\r\n    \t\t\treturn this;\r\n    \t\t}\r\n    \t}\r\n    \tprivate DirectoryStack(File first){\r\n    \t\tgetStack().push(new Element(first));\r\n    \t}\r\n    \tpublic static DirectoryStack getNewStack(File first){\r\n    \t\treturn new DirectoryStack(first);\r\n    \t}\r\n    \tpublic String toString(){\r\n    \t\tString ret = &quot;stack:\\n&quot;;\r\n    \t\tint i = 0;\r\n    \t\tfor (Element elem : stack) {\r\n    \t\t\tret += &quot;nivel &quot; + i++ + elem.toString()+&quot;\\n&quot;;\r\n    \t\t}\r\n    \t\treturn ret;\r\n    \t}\r\n    \tprivate Stack&lt;Element&gt; stack=null;\r\n    \tprivate Stack&lt;Element&gt; getStack(){\r\n    \t\tif(stack==null){\r\n    \t\t\tstack = new Stack&lt;Element&gt;();\r\n    \t\t}\r\n    \t\treturn stack;\r\n    \t}\r\n    \tpublic File getCurrent(){\r\n    \t\treturn getStack().peek().getCurrent();\r\n    \t}\r\n    \tpublic boolean isDirectoryEmpty(){\r\n    \t\treturn getStack().peek().isDirectoryEmpty();\r\n    \t}\r\n    \tpublic DirectoryStack downLevel(){\r\n    \t\tgetStack().pop();\r\n    \t\treturn this;\r\n    \t}\r\n    \tpublic DirectoryStack goToParent(){\r\n    \t\treturn downLevel();\r\n    \t}\r\n    \tpublic DirectoryStack goIntoDir(){\r\n    \t\treturn upLevel();\r\n    \t}\r\n    \tpublic DirectoryStack upLevel(){\r\n    \t\tif(isCurrentNotNull())\r\n    \t\t\tgetStack().push(new Element(getCurrent()));\r\n    \t\treturn this;\r\n    \t}\r\n    \tpublic DirectoryStack advancePostition(){\r\n    \t\tgetStack().peek().advancePointer();\r\n    \t\treturn this;\r\n    \t}\r\n    \tpublic File[] peekDirectory(){\r\n    \t\treturn getStack().peek().getFiles();\r\n    \t}\r\n    \tpublic boolean isLastFileOfDirectory(){\r\n    \t\treturn getStack().peek().getFiles().length &lt;= getStack().peek().getCurrentPointer();\r\n    \t}\r\n    \tpublic boolean gotMoreLevels() {\r\n    \t\treturn getStack().size()&gt;0;\r\n    \t}\r\n    \tpublic boolean gotMoreInCurrentLevel() {\r\n    \t\treturn getStack().peek().getFiles().length &gt; getStack().peek().getCurrentPointer()+1;\r\n    \t}\r\n    \tpublic boolean isRoot() {\r\n    \t\treturn !(getStack().size()&gt;1);\r\n    \t}\r\n    \tpublic boolean isCurrentNotNull() {\r\n    \t\tif(!getStack().isEmpty()){\r\n    \t\t\tint currentPointer = getStack().peek().getCurrentPointer();\r\n    \t\t\tint maxFiles = getStack().peek().getFiles().length;\r\n    \t\t\treturn currentPointer &lt; maxFiles;\r\n    \t\t}else{\r\n    \t\t\treturn false;\r\n    \t\t}\r\n    \t}\r\n    \tpublic boolean isCurrentDirectory() {\r\n    \t\treturn getStack().peek().getCurrent().isDirectory();\r\n    \t}\r\n    \tpublic boolean isLastFromDirList() {\r\n    \t\treturn getStack().peek().getCurrentPointer() == (getStack().peek().getFiles().length-1);\r\n    \t}\r\n    \tpublic boolean isCantGoParent() {\r\n    \t\treturn !(getStack().size()&gt;1);\r\n    \t}\r\n    \tpublic boolean isOutOfDirListRange() {\r\n    \t\treturn getStack().peek().getFiles().length &lt;= getStack().peek().getCurrentPointer();\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>I wonder why there are 10k files in a directory. Some file systems do not work well with so many files. There are specifics limitations for file systems like max amount of files per directory and max amount of levels of subdirectory.</p>\n\n<p>I solve a similar problem with an iterator solution.  </p>\n\n<p>I needed to walk across huge directorys and several levels of directory tree recursively.</p>\n\n<p>I try FileUtils.iterateFiles() of Apache commons io. But it implement the iterator by adding all the files in a List and then returning List.iterator(). It's very bad for memory.</p>\n\n<p>So I prefer to write something like this:</p>\n\n<pre><code>private static class SequentialIterator implements Iterator&lt;File&gt; {\n    private DirectoryStack dir = null;\n    private File current = null;\n    private long limit;\n    private FileFilter filter = null;\n\n    public SequentialIterator(String path, long limit, FileFilter ff) {\n        current = new File(path);\n        this.limit = limit;\n        filter = ff;\n        dir = DirectoryStack.getNewStack(current);\n    }\n\n    public boolean hasNext() {\n        while(walkOver());\n        return isMore &amp;&amp; (limit &gt; count || limit &lt; 0) &amp;&amp; dir.getCurrent() != null;\n    }\n\n    private long count = 0;\n\n    public File next() {\n        File aux = dir.getCurrent();\n        dir.advancePostition();\n        count++;\n        return aux;\n    }\n\n    private boolean walkOver() {\n        if (dir.isOutOfDirListRange()) {\n            if (dir.isCantGoParent()) {\n                isMore = false;\n                return false;\n            } else {\n                dir.goToParent();\n                dir.advancePostition();\n                return true;\n            }\n        } else {\n            if (dir.isCurrentDirectory()) {\n                if (dir.isDirectoryEmpty()) {\n                    dir.advancePostition();\n                } else {\n                    dir.goIntoDir();\n                }\n                return true;\n            } else {\n                if (filter.accept(dir.getCurrent())) {\n                    return false;\n                } else {\n                    dir.advancePostition();\n                    return true;\n                }\n            }\n        }\n    }\n\n    private boolean isMore = true;\n\n    public void remove() {\n        throw new UnsupportedOperationException();\n    }\n\n}\n</code></pre>\n\n<p>Note that the iterator stop by an amount of files iterateds and it has a FileFilter also.</p>\n\n<p>And DirectoryStack is:</p>\n\n<pre><code>public class DirectoryStack {\n    private class Element{\n        private File files[] = null;\n        private int currentPointer;\n        public Element(File current) {\n            currentPointer = 0;\n            if (current.exists()) {\n                if(current.isDirectory()){\n                    files = current.listFiles();\n                    Set&lt;File&gt; set = new TreeSet&lt;File&gt;();\n                    for (int i = 0; i &lt; files.length; i++) {\n                        File file = files[i];\n                        set.add(file);\n                    }\n                    set.toArray(files);\n                }else{\n                    throw new IllegalArgumentException(\"File current must be directory\");\n                }\n            } else {\n                throw new IllegalArgumentException(\"File current not exist\");\n            }\n\n        }\n        public String toString(){\n            return \"current=\"+getCurrent().toString();\n        }\n        public int getCurrentPointer() {\n            return currentPointer;\n        }\n        public void setCurrentPointer(int currentPointer) {\n            this.currentPointer = currentPointer;\n        }\n        public File[] getFiles() {\n            return files;\n        }\n        public File getCurrent(){\n            File ret = null;\n            try{\n                ret = getFiles()[getCurrentPointer()];\n            }catch (Exception e){\n            }\n            return ret;\n        }\n        public boolean isDirectoryEmpty(){\n            return !(getFiles().length&gt;0);\n        }\n        public Element advancePointer(){\n            setCurrentPointer(getCurrentPointer()+1);\n            return this;\n        }\n    }\n    private DirectoryStack(File first){\n        getStack().push(new Element(first));\n    }\n    public static DirectoryStack getNewStack(File first){\n        return new DirectoryStack(first);\n    }\n    public String toString(){\n        String ret = \"stack:\\n\";\n        int i = 0;\n        for (Element elem : stack) {\n            ret += \"nivel \" + i++ + elem.toString()+\"\\n\";\n        }\n        return ret;\n    }\n    private Stack&lt;Element&gt; stack=null;\n    private Stack&lt;Element&gt; getStack(){\n        if(stack==null){\n            stack = new Stack&lt;Element&gt;();\n        }\n        return stack;\n    }\n    public File getCurrent(){\n        return getStack().peek().getCurrent();\n    }\n    public boolean isDirectoryEmpty(){\n        return getStack().peek().isDirectoryEmpty();\n    }\n    public DirectoryStack downLevel(){\n        getStack().pop();\n        return this;\n    }\n    public DirectoryStack goToParent(){\n        return downLevel();\n    }\n    public DirectoryStack goIntoDir(){\n        return upLevel();\n    }\n    public DirectoryStack upLevel(){\n        if(isCurrentNotNull())\n            getStack().push(new Element(getCurrent()));\n        return this;\n    }\n    public DirectoryStack advancePostition(){\n        getStack().peek().advancePointer();\n        return this;\n    }\n    public File[] peekDirectory(){\n        return getStack().peek().getFiles();\n    }\n    public boolean isLastFileOfDirectory(){\n        return getStack().peek().getFiles().length &lt;= getStack().peek().getCurrentPointer();\n    }\n    public boolean gotMoreLevels() {\n        return getStack().size()&gt;0;\n    }\n    public boolean gotMoreInCurrentLevel() {\n        return getStack().peek().getFiles().length &gt; getStack().peek().getCurrentPointer()+1;\n    }\n    public boolean isRoot() {\n        return !(getStack().size()&gt;1);\n    }\n    public boolean isCurrentNotNull() {\n        if(!getStack().isEmpty()){\n            int currentPointer = getStack().peek().getCurrentPointer();\n            int maxFiles = getStack().peek().getFiles().length;\n            return currentPointer &lt; maxFiles;\n        }else{\n            return false;\n        }\n    }\n    public boolean isCurrentDirectory() {\n        return getStack().peek().getCurrent().isDirectory();\n    }\n    public boolean isLastFromDirList() {\n        return getStack().peek().getCurrentPointer() == (getStack().peek().getFiles().length-1);\n    }\n    public boolean isCantGoParent() {\n        return !(getStack().size()&gt;1);\n    }\n    public boolean isOutOfDirListRange() {\n        return getStack().peek().getFiles().length &lt;= getStack().peek().getCurrentPointer();\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15923,"reputation":28380,"user_id":34161,"accept_rate":83,"display_name":"Yoni Roit"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1228911969,"creation_date":1228911969,"answer_id":355884,"question_id":354703,"body_markdown":"If you need to eventually process all files, then having Iterable over String[] won&#39;t give you any advantage, as you&#39;ll still have to go and fetch the whole list of files.","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>If you need to eventually process all files, then having Iterable over String[] won't give you any advantage, as you'll still have to go and fetch the whole list of files.</p>\n"},{"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1235894191,"creation_date":1235894191,"answer_id":599458,"question_id":354703,"body_markdown":"Using an Iterable doesn&#39;t imply that the Files will be streamed to you. In fact its usually the opposite.  So an array is typically faster than an Iterable.","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>Using an Iterable doesn't imply that the Files will be streamed to you. In fact its usually the opposite.  So an array is typically faster than an Iterable.</p>\n"},{"tags":[],"owner":{"account_id":7823,"reputation":62812,"user_id":13724,"accept_rate":29,"display_name":"MarkR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1235894801,"creation_date":1235894801,"answer_id":599469,"question_id":354703,"body_markdown":"Are you sure it&#39;s due to Java, not just a general problem with having 10k entries in one directory, particularly over the network?\r\n\r\nHave you tried writing a proof-of-concept program to do the same thing in C using the win32 findfirst/findnext functions to see whether it&#39;s any faster?\r\n\r\nI don&#39;t know the ins and outs of SMB, but I strongly suspect that it needs a round trip for every file in the list - which is not going to be fast, particularly over a network with moderate latency.\r\n\r\nHaving 10k strings in an array sounds like something which should not tax the modern Java VM too much either.","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>Are you sure it's due to Java, not just a general problem with having 10k entries in one directory, particularly over the network?</p>\n\n<p>Have you tried writing a proof-of-concept program to do the same thing in C using the win32 findfirst/findnext functions to see whether it's any faster?</p>\n\n<p>I don't know the ins and outs of SMB, but I strongly suspect that it needs a round trip for every file in the list - which is not going to be fast, particularly over a network with moderate latency.</p>\n\n<p>Having 10k strings in an array sounds like something which should not tax the modern Java VM too much either.</p>\n"},{"tags":[],"owner":{"account_id":407393,"reputation":1182,"user_id":777443,"accept_rate":89,"display_name":"Peter"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359307810,"creation_date":1359307810,"answer_id":14550059,"question_id":354703,"body_markdown":"If you&#39;re on Java 1.5 or 1.6, shelling out &quot;dir&quot; commands and parsing the standard output stream on Windows is a perfectly acceptable approach. I&#39;ve used this approach in the past for processing network drives and it has generally been a lot faster than waiting for the native java.io.File listFiles() method to return. \r\n\r\nOf course, a JNI call should be faster and potentially safer than shelling out &quot;dir&quot; commands. The following JNI code can be used to retrieve a list of files/directories using the Windows API. This function can be easily refactored into a new class so the caller can retrieve file paths incrementally (i.e. get one path at a time). For example, you can refactor the code so that FindFirstFileW is called in a constructor and have a seperate method to call FindNextFileW.\r\n\r\n    JNIEXPORT jstring JNICALL Java_javaxt_io_File_GetFiles(JNIEnv *env, jclass, jstring directory)\r\n    {\r\n        HANDLE hFind;\r\n        try {\r\n\r\n          //Convert jstring to wstring\r\n            const jchar *_directory = env-&gt;GetStringChars(directory, 0);\r\n            jsize x = env-&gt;GetStringLength(directory);\r\n            wstring path;  //L&quot;C:\\\\temp\\\\*&quot;;\r\n            path.assign(_directory, _directory + x);\r\n            env-&gt;ReleaseStringChars(directory, _directory);\r\n\r\n            if (x&lt;2){\r\n                jclass exceptionClass = env-&gt;FindClass(&quot;java/lang/Exception&quot;);\r\n                env-&gt;ThrowNew(exceptionClass, &quot;Invalid path, less than 2 characters long.&quot;);\r\n            }\r\n\r\n            wstringstream ss;\r\n            BOOL bContinue = TRUE;\r\n            WIN32_FIND_DATAW data;\r\n            hFind = FindFirstFileW(path.c_str(), &amp;data);\r\n            if (INVALID_HANDLE_VALUE == hFind){\r\n                jclass exceptionClass = env-&gt;FindClass(&quot;java/lang/Exception&quot;);\r\n                env-&gt;ThrowNew(exceptionClass, &quot;FindFirstFileW returned invalid handle.&quot;);\r\n            }\r\n\r\n\r\n            //HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\r\n            //DWORD dwBytesWritten;\r\n\r\n\r\n            // If we have no error, loop thru the files in this dir\r\n            while (hFind &amp;&amp; bContinue){\r\n\r\n              /*\r\n              //Debug Print Statment. DO NOT DELETE! cout and wcout do not print unicode correctly.\r\n                WriteConsole(hStdOut, data.cFileName, (DWORD)_tcslen(data.cFileName), &amp;dwBytesWritten, NULL);\r\n                WriteConsole(hStdOut, L&quot;\\n&quot;, 1, &amp;dwBytesWritten, NULL);\r\n                */\r\n\r\n              //Check if this entry is a directory\r\n                if (data.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY){\r\n                    // Make sure this dir is not . or ..\r\n                    if (wstring(data.cFileName) != L&quot;.&quot; &amp;&amp;\r\n                        wstring(data.cFileName) != L&quot;..&quot;)\r\n                    {   \r\n                        ss &lt;&lt; wstring(data.cFileName) &lt;&lt; L&quot;\\\\&quot; &lt;&lt; L&quot;\\n&quot;;\r\n                    }\r\n                }\r\n                else{\r\n                    ss &lt;&lt; wstring(data.cFileName) &lt;&lt; L&quot;\\n&quot;;\r\n                }\r\n                bContinue = FindNextFileW(hFind, &amp;data);\r\n            }   \r\n            FindClose(hFind); // Free the dir structure\r\n\r\n\r\n\r\n            wstring cstr = ss.str();\r\n            int len = cstr.size();\r\n            //WriteConsole(hStdOut, cstr.c_str(), len, &amp;dwBytesWritten, NULL);\r\n            //WriteConsole(hStdOut, L&quot;\\n&quot;, 1, &amp;dwBytesWritten, NULL);\r\n            jchar* raw = new jchar[len];\r\n            memcpy(raw, cstr.c_str(), len*sizeof(wchar_t));\r\n            jstring result = env-&gt;NewString(raw, len);\r\n            delete[] raw;\r\n            return result;\r\n        }\r\n        catch(...){\r\n            FindClose(hFind);\r\n            jclass exceptionClass = env-&gt;FindClass(&quot;java/lang/Exception&quot;);\r\n            env-&gt;ThrowNew(exceptionClass, &quot;Exception occured.&quot;);\r\n        }\r\n\r\n        return NULL;\r\n    }\r\nCredit:\r\n https://sites.google.com/site/jozsefbekes/Home/windows-programming/miscellaneous-functions\r\n\r\n\r\nEven with this approach, there are still efficiencies to be gained. If you serialize the path to a java.io.File, there is a huge performance hit - especially if the path represents a file on a network drive. I have no idea what Sun/Oracle is doing under the hood but if you need additional file attributes other than the file path (e.g. size, mod date, etc), I have found that the following JNI function is much faster than instantiating a java.io.File object on a network the path.\r\n\r\n\r\n    JNIEXPORT jlongArray JNICALL Java_javaxt_io_File_GetFileAttributesEx(JNIEnv *env, jclass, jstring filename)\r\n    {   \r\n\r\n      //Convert jstring to wstring\r\n        const jchar *_filename = env-&gt;GetStringChars(filename, 0);\r\n        jsize len = env-&gt;GetStringLength(filename);\r\n        wstring path;\r\n        path.assign(_filename, _filename + len);\r\n        env-&gt;ReleaseStringChars(filename, _filename);\r\n\r\n\r\n      //Get attributes\r\n        WIN32_FILE_ATTRIBUTE_DATA fileAttrs;\r\n        BOOL result = GetFileAttributesExW(path.c_str(), GetFileExInfoStandard, &amp;fileAttrs);\r\n        if (!result) {\r\n            jclass exceptionClass = env-&gt;FindClass(&quot;java/lang/Exception&quot;);\r\n            env-&gt;ThrowNew(exceptionClass, &quot;Exception Occurred&quot;);\r\n        }\r\n\r\n      //Create an array to store the WIN32_FILE_ATTRIBUTE_DATA\r\n        jlong buffer[6];\r\n        buffer[0] = fileAttrs.dwFileAttributes;\r\n        buffer[1] = date2int(fileAttrs.ftCreationTime);\r\n        buffer[2] = date2int(fileAttrs.ftLastAccessTime);\r\n        buffer[3] = date2int(fileAttrs.ftLastWriteTime);\r\n        buffer[4] = fileAttrs.nFileSizeHigh;\r\n        buffer[5] = fileAttrs.nFileSizeLow;\r\n\r\n        jlongArray jLongArray = env-&gt;NewLongArray(6);\r\n        env-&gt;SetLongArrayRegion(jLongArray, 0, 6, buffer);\r\n        return jLongArray;\r\n    }\r\n\r\n\r\nYou can find a full working example of this JNI-based approach in the [javaxt-core][1] library. In my tests using Java 1.6.0_38 with a Windows host hitting a Windows share, I have found this JNI approach approximately 10x faster then calling java.io.File listFiles() or shelling out &quot;dir&quot; commands.\r\n\r\n\r\n  [1]: http://www.javaxt.com/","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>If you're on Java 1.5 or 1.6, shelling out \"dir\" commands and parsing the standard output stream on Windows is a perfectly acceptable approach. I've used this approach in the past for processing network drives and it has generally been a lot faster than waiting for the native java.io.File listFiles() method to return. </p>\n\n<p>Of course, a JNI call should be faster and potentially safer than shelling out \"dir\" commands. The following JNI code can be used to retrieve a list of files/directories using the Windows API. This function can be easily refactored into a new class so the caller can retrieve file paths incrementally (i.e. get one path at a time). For example, you can refactor the code so that FindFirstFileW is called in a constructor and have a seperate method to call FindNextFileW.</p>\n\n<pre><code>JNIEXPORT jstring JNICALL Java_javaxt_io_File_GetFiles(JNIEnv *env, jclass, jstring directory)\n{\n    HANDLE hFind;\n    try {\n\n      //Convert jstring to wstring\n        const jchar *_directory = env-&gt;GetStringChars(directory, 0);\n        jsize x = env-&gt;GetStringLength(directory);\n        wstring path;  //L\"C:\\\\temp\\\\*\";\n        path.assign(_directory, _directory + x);\n        env-&gt;ReleaseStringChars(directory, _directory);\n\n        if (x&lt;2){\n            jclass exceptionClass = env-&gt;FindClass(\"java/lang/Exception\");\n            env-&gt;ThrowNew(exceptionClass, \"Invalid path, less than 2 characters long.\");\n        }\n\n        wstringstream ss;\n        BOOL bContinue = TRUE;\n        WIN32_FIND_DATAW data;\n        hFind = FindFirstFileW(path.c_str(), &amp;data);\n        if (INVALID_HANDLE_VALUE == hFind){\n            jclass exceptionClass = env-&gt;FindClass(\"java/lang/Exception\");\n            env-&gt;ThrowNew(exceptionClass, \"FindFirstFileW returned invalid handle.\");\n        }\n\n\n        //HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);\n        //DWORD dwBytesWritten;\n\n\n        // If we have no error, loop thru the files in this dir\n        while (hFind &amp;&amp; bContinue){\n\n          /*\n          //Debug Print Statment. DO NOT DELETE! cout and wcout do not print unicode correctly.\n            WriteConsole(hStdOut, data.cFileName, (DWORD)_tcslen(data.cFileName), &amp;dwBytesWritten, NULL);\n            WriteConsole(hStdOut, L\"\\n\", 1, &amp;dwBytesWritten, NULL);\n            */\n\n          //Check if this entry is a directory\n            if (data.dwFileAttributes &amp; FILE_ATTRIBUTE_DIRECTORY){\n                // Make sure this dir is not . or ..\n                if (wstring(data.cFileName) != L\".\" &amp;&amp;\n                    wstring(data.cFileName) != L\"..\")\n                {   \n                    ss &lt;&lt; wstring(data.cFileName) &lt;&lt; L\"\\\\\" &lt;&lt; L\"\\n\";\n                }\n            }\n            else{\n                ss &lt;&lt; wstring(data.cFileName) &lt;&lt; L\"\\n\";\n            }\n            bContinue = FindNextFileW(hFind, &amp;data);\n        }   \n        FindClose(hFind); // Free the dir structure\n\n\n\n        wstring cstr = ss.str();\n        int len = cstr.size();\n        //WriteConsole(hStdOut, cstr.c_str(), len, &amp;dwBytesWritten, NULL);\n        //WriteConsole(hStdOut, L\"\\n\", 1, &amp;dwBytesWritten, NULL);\n        jchar* raw = new jchar[len];\n        memcpy(raw, cstr.c_str(), len*sizeof(wchar_t));\n        jstring result = env-&gt;NewString(raw, len);\n        delete[] raw;\n        return result;\n    }\n    catch(...){\n        FindClose(hFind);\n        jclass exceptionClass = env-&gt;FindClass(\"java/lang/Exception\");\n        env-&gt;ThrowNew(exceptionClass, \"Exception occured.\");\n    }\n\n    return NULL;\n}\n</code></pre>\n\n<p>Credit:\n <a href=\"https://sites.google.com/site/jozsefbekes/Home/windows-programming/miscellaneous-functions\" rel=\"nofollow\">https://sites.google.com/site/jozsefbekes/Home/windows-programming/miscellaneous-functions</a></p>\n\n<p>Even with this approach, there are still efficiencies to be gained. If you serialize the path to a java.io.File, there is a huge performance hit - especially if the path represents a file on a network drive. I have no idea what Sun/Oracle is doing under the hood but if you need additional file attributes other than the file path (e.g. size, mod date, etc), I have found that the following JNI function is much faster than instantiating a java.io.File object on a network the path.</p>\n\n<pre><code>JNIEXPORT jlongArray JNICALL Java_javaxt_io_File_GetFileAttributesEx(JNIEnv *env, jclass, jstring filename)\n{   \n\n  //Convert jstring to wstring\n    const jchar *_filename = env-&gt;GetStringChars(filename, 0);\n    jsize len = env-&gt;GetStringLength(filename);\n    wstring path;\n    path.assign(_filename, _filename + len);\n    env-&gt;ReleaseStringChars(filename, _filename);\n\n\n  //Get attributes\n    WIN32_FILE_ATTRIBUTE_DATA fileAttrs;\n    BOOL result = GetFileAttributesExW(path.c_str(), GetFileExInfoStandard, &amp;fileAttrs);\n    if (!result) {\n        jclass exceptionClass = env-&gt;FindClass(\"java/lang/Exception\");\n        env-&gt;ThrowNew(exceptionClass, \"Exception Occurred\");\n    }\n\n  //Create an array to store the WIN32_FILE_ATTRIBUTE_DATA\n    jlong buffer[6];\n    buffer[0] = fileAttrs.dwFileAttributes;\n    buffer[1] = date2int(fileAttrs.ftCreationTime);\n    buffer[2] = date2int(fileAttrs.ftLastAccessTime);\n    buffer[3] = date2int(fileAttrs.ftLastWriteTime);\n    buffer[4] = fileAttrs.nFileSizeHigh;\n    buffer[5] = fileAttrs.nFileSizeLow;\n\n    jlongArray jLongArray = env-&gt;NewLongArray(6);\n    env-&gt;SetLongArrayRegion(jLongArray, 0, 6, buffer);\n    return jLongArray;\n}\n</code></pre>\n\n<p>You can find a full working example of this JNI-based approach in the <a href=\"http://www.javaxt.com/\" rel=\"nofollow\">javaxt-core</a> library. In my tests using Java 1.6.0_38 with a Windows host hitting a Windows share, I have found this JNI approach approximately 10x faster then calling java.io.File listFiles() or shelling out \"dir\" commands.</p>\n"},{"comments":[{"owner":{"account_id":1838753,"reputation":2269,"user_id":1668605,"accept_rate":89,"display_name":"Lesto"},"score":1,"creation_date":1389622104,"post_id":19520486,"comment_id":31728940,"body_markdown":"in windows, listing a remote folder form &gt;20 seconds went to 500ms... +1","body":"in windows, listing a remote folder form &gt;20 seconds went to 500ms... +1"}],"tags":[],"owner":{"account_id":207587,"reputation":1022,"user_id":457541,"accept_rate":73,"display_name":"NiTiN"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1382451645,"creation_date":1382451645,"answer_id":19520486,"question_id":354703,"body_markdown":"How about using File.list(FilenameFilter filter) method and implementing FilenameFilter.accept(File dir, String name) to process each file and return false.\r\n\r\nI ran this on Linux vm for directory with 10K+ files and it took &lt;10 seconds.\r\n\r\n    import java.io.File;  \r\n    import java.io.FilenameFilter;\r\n    \r\n    public class Temp {\r\n        private static void processFile(File dir, String name) {\r\n            File file = new File(dir, name);\r\n            System.out.println(&quot;processing file &quot; + file.getName());\r\n        }\r\n    \r\n        private static void forEachFile(File dir) {\r\n            String [] ignore = dir.list(new FilenameFilter() {\r\n                public boolean accept(File dir, String name) {\r\n                    processFile(dir, name);\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            long before, after;\r\n            File dot = new File(&quot;.&quot;);\r\n            before = System.currentTimeMillis();\r\n            forEachFile(dot);\r\n            after = System.currentTimeMillis();\r\n            System.out.println(&quot;after call, delta is &quot; + (after - before));\r\n        }  \r\n    }\r\n\r\n","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>How about using File.list(FilenameFilter filter) method and implementing FilenameFilter.accept(File dir, String name) to process each file and return false.</p>\n\n<p>I ran this on Linux vm for directory with 10K+ files and it took &lt;10 seconds.</p>\n\n<pre><code>import java.io.File;  \nimport java.io.FilenameFilter;\n\npublic class Temp {\n    private static void processFile(File dir, String name) {\n        File file = new File(dir, name);\n        System.out.println(\"processing file \" + file.getName());\n    }\n\n    private static void forEachFile(File dir) {\n        String [] ignore = dir.list(new FilenameFilter() {\n            public boolean accept(File dir, String name) {\n                processFile(dir, name);\n                return false;\n            }\n        });\n    }\n\n    public static void main(String[] args) {\n        long before, after;\n        File dot = new File(\".\");\n        before = System.currentTimeMillis();\n        forEachFile(dot);\n        after = System.currentTimeMillis();\n        System.out.println(\"after call, delta is \" + (after - before));\n    }  \n}\n</code></pre>\n"}],"owner":{"account_id":11354,"reputation":27694,"user_id":21838,"accept_rate":82,"display_name":"Pyrolistical"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18972,"favorite_count":0,"down_vote_count":0,"up_vote_count":24,"accepted_answer_id":354779,"answer_count":10,"score":24,"last_activity_date":1686686537,"creation_date":1228868074,"question_id":354703,"body_markdown":"I am trying to process files one at a time that are stored over a network.  Reading the files is fast due to buffering is not the issue.  The problem I have is just listing the directories in a folder.  I have at least 10k files per folder over many folders.\r\n\r\nPerformance is super slow since File.list() returns an array instead of an iterable.  Java goes off and collects all the names in a folder and packs it into an array before returning.\r\n\r\nThe bug entry for this is &lt;https://bugs.java.com/bugdatabase/view_bug;jsessionid=db7fcf25bcce13541c4289edeb4?bug_id=4285834&gt; and doesn&#39;t have a work around.  They just say this has been fixed for JDK7.\r\n\r\nA few questions:\r\n\r\n1. Does anybody have a workaround to this performance bottleneck?\r\n2. Am I trying to achieve the impossible?  Is performance still going to be poor even if it just iterates over the directories?\r\n3. Could I use the beta JDK7 builds that have this functionality without having to build my entire project on it?\r\n\r\n","title":"Is there a workaround for Java&#39;s poor performance on walking huge directories?","body":"<p>I am trying to process files one at a time that are stored over a network.  Reading the files is fast due to buffering is not the issue.  The problem I have is just listing the directories in a folder.  I have at least 10k files per folder over many folders.</p>\n<p>Performance is super slow since File.list() returns an array instead of an iterable.  Java goes off and collects all the names in a folder and packs it into an array before returning.</p>\n<p>The bug entry for this is <a href=\"https://bugs.java.com/bugdatabase/view_bug;jsessionid=db7fcf25bcce13541c4289edeb4?bug_id=4285834\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug;jsessionid=db7fcf25bcce13541c4289edeb4?bug_id=4285834</a> and doesn't have a work around.  They just say this has been fixed for JDK7.</p>\n<p>A few questions:</p>\n<ol>\n<li>Does anybody have a workaround to this performance bottleneck?</li>\n<li>Am I trying to achieve the impossible?  Is performance still going to be poor even if it just iterates over the directories?</li>\n<li>Could I use the beta JDK7 builds that have this functionality without having to build my entire project on it?</li>\n</ol>\n"},{"tags":["java","jackson"],"comments":[{"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"score":0,"creation_date":1686671346,"post_id":76448516,"comment_id":134829800,"body_markdown":"Shouldn&#39;t your `countMap` key be a `String` type?","body":"Shouldn&#39;t your <code>countMap</code> key be a <code>String</code> type?"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1686671532,"post_id":76448516,"comment_id":134829837,"body_markdown":"No, after deserialization, I need the key to be of type `MyType`.","body":"No, after deserialization, I need the key to be of type <code>MyType</code>."},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1686671538,"post_id":76448516,"comment_id":134829841,"body_markdown":"Duplicates https://stackoverflow.com/questions/54187982/deserialize-map-key-as-pojo-reference","body":"Duplicates <a href=\"https://stackoverflow.com/questions/54187982/deserialize-map-key-as-pojo-reference\" title=\"deserialize map key as pojo reference\">stackoverflow.com/questions/54187982/&hellip;</a>"},{"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"score":0,"creation_date":1686672373,"post_id":76448516,"comment_id":134830052,"body_markdown":"Created an issue in Jackson: https://github.com/FasterXML/jackson-annotations/issues/231","body":"Created an issue in Jackson: <a href=\"https://github.com/FasterXML/jackson-annotations/issues/231\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-annotations/issues/231</a>"}],"answers":[{"tags":[],"owner":{"account_id":7774964,"reputation":91,"user_id":5883358,"display_name":"Andreea Frincu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686680886,"creation_date":1686680886,"answer_id":76467744,"question_id":76448516,"body_markdown":"The only way I was able to deserialize was using a custom deserializer.\r\nSo having the class\r\n\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class,\r\n        property = &quot;id&quot;)\r\n    @JsonIdentityReference(alwaysAsId = true)\r\n    public class MyType {\r\n    \r\n      String id;\r\n      String longText;\r\n    \r\n      public MyType() {\r\n      }\r\n    \r\n      public MyType(String id) {\r\n        this.id = id;\r\n      }\r\n    //getter&amp;setters\r\n    }\r\nand\r\n\r\n    public class MyData {\r\n    \r\n      List&lt;MyType&gt; types;\r\n      // Does not work\r\n      @JsonDeserialize(keyUsing = MyTypeDeserializer.class)\r\n      Map&lt;MyType, Integer&gt; countMap;\r\n    //getters&amp;setters\r\n    }\r\n\r\n    public class MyTypeDeserializer extends KeyDeserializer {\r\n      @Override\r\n      public Object deserializeKey(String key, DeserializationContext deserializationContext) throws IOException {\r\n        return new MyType(key);\r\n      }\r\n    }\r\n\r\nRunning the test below I was able to see the json properly deserialized.\r\n \r\n\r\n    @Test\r\n      public void testDeserialize() throws IOException {\r\n        final String testData = &quot;{\\n&quot; +\r\n            &quot;  \\&quot;types\\&quot;: [\\n&quot; +\r\n            &quot;    {\\n&quot; +\r\n            &quot;      \\&quot;id\\&quot;: \\&quot;123\\&quot;,\\n&quot; +\r\n            &quot;      \\&quot;longText\\&quot;: \\&quot;very long text 1 ...\\&quot;\\n&quot; +\r\n            &quot;    },\\n&quot; +\r\n            &quot;    {\\n&quot; +\r\n            &quot;      \\&quot;id\\&quot;: \\&quot;456\\&quot;,\\n&quot; +\r\n            &quot;      \\&quot;longText\\&quot;: \\&quot;very long text 2 ...\\&quot;\\n&quot; +\r\n            &quot;    }\\n&quot; +\r\n            &quot;  ],\\n&quot; +\r\n            &quot;  \\&quot;countMap\\&quot;: {\\n&quot; +\r\n            &quot;    \\&quot;123\\&quot;: 100,\\n&quot; +\r\n            &quot;    \\&quot;456\\&quot;: 200\\n&quot; +\r\n            &quot;  }\\n&quot; +\r\n            &quot;}\\n&quot;;\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        MyData myData = mapper.readValue(testData, MyData.class);\r\n      }\r\n","title":"Jackson: deserialize a Map&lt;MyType, String&gt; which uses @JsonIdentityInfo on MyType","body":"<p>The only way I was able to deserialize was using a custom deserializer.\nSo having the class</p>\n<pre><code>@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class,\n    property = &quot;id&quot;)\n@JsonIdentityReference(alwaysAsId = true)\npublic class MyType {\n\n  String id;\n  String longText;\n\n  public MyType() {\n  }\n\n  public MyType(String id) {\n    this.id = id;\n  }\n//getter&amp;setters\n}\n</code></pre>\n<p>and</p>\n<pre><code>public class MyData {\n\n  List&lt;MyType&gt; types;\n  // Does not work\n  @JsonDeserialize(keyUsing = MyTypeDeserializer.class)\n  Map&lt;MyType, Integer&gt; countMap;\n//getters&amp;setters\n}\n\npublic class MyTypeDeserializer extends KeyDeserializer {\n  @Override\n  public Object deserializeKey(String key, DeserializationContext deserializationContext) throws IOException {\n    return new MyType(key);\n  }\n}\n</code></pre>\n<p>Running the test below I was able to see the json properly deserialized.</p>\n<pre><code>@Test\n  public void testDeserialize() throws IOException {\n    final String testData = &quot;{\\n&quot; +\n        &quot;  \\&quot;types\\&quot;: [\\n&quot; +\n        &quot;    {\\n&quot; +\n        &quot;      \\&quot;id\\&quot;: \\&quot;123\\&quot;,\\n&quot; +\n        &quot;      \\&quot;longText\\&quot;: \\&quot;very long text 1 ...\\&quot;\\n&quot; +\n        &quot;    },\\n&quot; +\n        &quot;    {\\n&quot; +\n        &quot;      \\&quot;id\\&quot;: \\&quot;456\\&quot;,\\n&quot; +\n        &quot;      \\&quot;longText\\&quot;: \\&quot;very long text 2 ...\\&quot;\\n&quot; +\n        &quot;    }\\n&quot; +\n        &quot;  ],\\n&quot; +\n        &quot;  \\&quot;countMap\\&quot;: {\\n&quot; +\n        &quot;    \\&quot;123\\&quot;: 100,\\n&quot; +\n        &quot;    \\&quot;456\\&quot;: 200\\n&quot; +\n        &quot;  }\\n&quot; +\n        &quot;}\\n&quot;;\n    ObjectMapper mapper = new ObjectMapper();\n    MyData myData = mapper.readValue(testData, MyData.class);\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16211352,"reputation":4324,"user_id":11713777,"display_name":"dariosicily"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686685857,"creation_date":1686685857,"answer_id":76468274,"question_id":76448516,"body_markdown":"Using references you provided in your comment it is possible to deserialize the provided json with a class extending the [KeyDeserializer](https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/KeyDeserializer.html) class. Starting from a simplified version of classes you defined in the question like below:\r\n\r\n~~~\r\n@Data\r\npublic class MyType {\r\n    String id;\r\n    String longText;\r\n}\r\n\r\n@Data\r\npublic class MyData {\r\n\r\n    private List&lt;MyType&gt; types;\r\n\r\n    //added annotation to the original class\r\n    @JsonDeserialize(keyUsing = MyKeyDeserializer.class)\r\n    private Map&lt;MyType, Integer&gt; countMap;\r\n}\r\n~~~\r\n\r\nWith the assumption that *types* field is always present you can create a custom class extending the `KeyDeserializer`:\r\n\r\n~~~\r\npublic class MyKeyDeserializer extends KeyDeserializer {\r\n\r\n    @Override\r\n    public MyType deserializeKey(String id, DeserializationContext dc) throws IOException {\r\n        \r\n        MyType myType = new MyType();\r\n        myType.setId(id);\r\n        MyData myData = (MyData) dc.getParser()\r\n                                .getParsingContext()\r\n                                .getParent()\r\n                                .getCurrentValue();\r\n        \r\n        MyType elem = myData.getTypes()\r\n                                .stream()\r\n                                .filter(el -&gt; el.id.equals(id))\r\n                                .findFirst()\r\n                                .orElse(null);\r\n        \r\n        if (elem != null) { myType.setLongText(elem.getLongText()); }\r\n        return myType;\r\n    }\r\n\r\n}\r\n~~~\r\n\r\n\r\n\r\nBasically in the code for every key of your `CountMap` map the json will be parsed to a `MyData` instance and then the *types* element will be searched to extract the type element with the same *id* returning the new *MyType* key completed with the *longText* field. ","title":"Jackson: deserialize a Map&lt;MyType, String&gt; which uses @JsonIdentityInfo on MyType","body":"<p>Using references you provided in your comment it is possible to deserialize the provided json with a class extending the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/KeyDeserializer.html\" rel=\"nofollow noreferrer\">KeyDeserializer</a> class. Starting from a simplified version of classes you defined in the question like below:</p>\n<pre><code>@Data\npublic class MyType {\n    String id;\n    String longText;\n}\n\n@Data\npublic class MyData {\n\n    private List&lt;MyType&gt; types;\n\n    //added annotation to the original class\n    @JsonDeserialize(keyUsing = MyKeyDeserializer.class)\n    private Map&lt;MyType, Integer&gt; countMap;\n}\n</code></pre>\n<p>With the assumption that <em>types</em> field is always present you can create a custom class extending the <code>KeyDeserializer</code>:</p>\n<pre><code>public class MyKeyDeserializer extends KeyDeserializer {\n\n    @Override\n    public MyType deserializeKey(String id, DeserializationContext dc) throws IOException {\n        \n        MyType myType = new MyType();\n        myType.setId(id);\n        MyData myData = (MyData) dc.getParser()\n                                .getParsingContext()\n                                .getParent()\n                                .getCurrentValue();\n        \n        MyType elem = myData.getTypes()\n                                .stream()\n                                .filter(el -&gt; el.id.equals(id))\n                                .findFirst()\n                                .orElse(null);\n        \n        if (elem != null) { myType.setLongText(elem.getLongText()); }\n        return myType;\n    }\n\n}\n</code></pre>\n<p>Basically in the code for every key of your <code>CountMap</code> map the json will be parsed to a <code>MyData</code> instance and then the <em>types</em> element will be searched to extract the type element with the same <em>id</em> returning the new <em>MyType</em> key completed with the <em>longText</em> field.</p>\n"}],"owner":{"account_id":216698,"reputation":26495,"user_id":472109,"accept_rate":85,"display_name":"Geoffrey De Smet"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":150,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76468274,"answer_count":2,"score":1,"last_activity_date":1686685857,"creation_date":1686439236,"question_id":76448516,"body_markdown":"How do I deserialize a `Map` with a `MyType` key that uses only the id of `MyType` in the json format?\r\n\r\nFor example, given \r\n\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class,\r\n            property = &quot;id&quot;)\r\n    public class MyType {\r\n    \r\n       String id;\r\n       ... // Getters and setters for id\r\n    \r\n       String longText;\r\n    }\r\n    \r\n    public class MyData {\r\n    \r\n       List&lt;MyType&gt; types;\r\n    \r\n       @JsonIdentityReference(alwaysAsId = true) // Does not work\r\n       Map&lt;MyType, Integer&gt; countMap;\r\n    }\r\n\r\nit properly serializes `MyData` in:\r\n\r\n    {\r\n      &quot;types&quot;: [\r\n        {\r\n          &quot;id&quot;: &quot;123&quot;,\r\n          &quot;longText&quot;: &quot;very long text 1 ...&quot;\r\n        },\r\n        {\r\n          &quot;id&quot;: &quot;456&quot;,\r\n          &quot;longText&quot;: &quot;very long text 2 ...&quot;\r\n        }\r\n      ],\r\n      &quot;countMap&quot;: {\r\n        &quot;123&quot;: 100,\r\n        &quot;456&quot;: 200\r\n      }\r\n    }\r\n\r\nBut when I deserialize that, I get an error:\r\n\r\n    com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot find a (Map) Key deserializer for type [simple type, class MyType]\r\n\r\nHow do I get Jackson to deserialize it correctly?","title":"Jackson: deserialize a Map&lt;MyType, String&gt; which uses @JsonIdentityInfo on MyType","body":"<p>How do I deserialize a <code>Map</code> with a <code>MyType</code> key that uses only the id of <code>MyType</code> in the json format?</p>\n<p>For example, given</p>\n<pre><code>@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class MyType {\n\n   String id;\n   ... // Getters and setters for id\n\n   String longText;\n}\n\npublic class MyData {\n\n   List&lt;MyType&gt; types;\n\n   @JsonIdentityReference(alwaysAsId = true) // Does not work\n   Map&lt;MyType, Integer&gt; countMap;\n}\n</code></pre>\n<p>it properly serializes <code>MyData</code> in:</p>\n<pre><code>{\n  &quot;types&quot;: [\n    {\n      &quot;id&quot;: &quot;123&quot;,\n      &quot;longText&quot;: &quot;very long text 1 ...&quot;\n    },\n    {\n      &quot;id&quot;: &quot;456&quot;,\n      &quot;longText&quot;: &quot;very long text 2 ...&quot;\n    }\n  ],\n  &quot;countMap&quot;: {\n    &quot;123&quot;: 100,\n    &quot;456&quot;: 200\n  }\n}\n</code></pre>\n<p>But when I deserialize that, I get an error:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot find a (Map) Key deserializer for type [simple type, class MyType]\n</code></pre>\n<p>How do I get Jackson to deserialize it correctly?</p>\n"},{"tags":["java","spring","apache-kafka","spring-integration","spring-integration-dsl"],"answers":[{"comments":[{"owner":{"account_id":7715174,"reputation":31,"user_id":20444450,"display_name":"Beez"},"score":0,"creation_date":1686688035,"post_id":76468250,"comment_id":134833052,"body_markdown":"I did define a Transformer on the two channels &quot;inboundFilesMessageChannel&quot; and &quot;kafkaPojoMessageChannel&quot; - I&#39;m just not sure if that is getting picked up, also that makes sense about the split. I will move to a FileSplitter and see if that helps. Thanks!","body":"I did define a Transformer on the two channels &quot;inboundFilesMessageChannel&quot; and &quot;kafkaPojoMessageChannel&quot; - I&#39;m just not sure if that is getting picked up, also that makes sense about the split. I will move to a FileSplitter and see if that helps. Thanks!"},{"owner":{"account_id":7715174,"reputation":31,"user_id":20444450,"display_name":"Beez"},"score":0,"creation_date":1686688904,"post_id":76468250,"comment_id":134833206,"body_markdown":"Do you suggest I get rid of the inboundStreamingAdapter(), because The FileSplitter seems like it is expecting a directory from me. Adding in the FileSplitter in place of the split with the delimiter and reading from the inboundFilesMessageChannel I get the same exception.","body":"Do you suggest I get rid of the inboundStreamingAdapter(), because The FileSplitter seems like it is expecting a directory from me. Adding in the FileSplitter in place of the split with the delimiter and reading from the inboundFilesMessageChannel I get the same exception."},{"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"score":0,"creation_date":1686691253,"post_id":76468250,"comment_id":134833568,"body_markdown":"Why do you say it is expecting a directory? Did we say that in the doc? I really pointed there for you because `Sftp.inboundStreamingAdapter()` produces for an `InputStream` to the remote file and `FileSplitter` is able to iterate of lines of the file content from that `InputStream`. Instead of `.split(s -&gt; s.delimiters(&quot;\\n&quot;))` it has to be `.split(Files.splitter())`.","body":"Why do you say it is expecting a directory? Did we say that in the doc? I really pointed there for you because <code>Sftp.inboundStreamingAdapter()</code> produces for an <code>InputStream</code> to the remote file and <code>FileSplitter</code> is able to iterate of lines of the file content from that <code>InputStream</code>. Instead of <code>.split(s -&gt; s.delimiters(&quot;\\n&quot;))</code> it has to be <code>.split(Files.splitter())</code>."},{"owner":{"account_id":7715174,"reputation":31,"user_id":20444450,"display_name":"Beez"},"score":0,"creation_date":1686692520,"post_id":76468250,"comment_id":134833734,"body_markdown":"No you are correct, I am sorry. I am running into a problem Transforming the CSV into a JSON string now. That is a separate issue, that I will work through thank you very much for you answer.","body":"No you are correct, I am sorry. I am running into a problem Transforming the CSV into a JSON string now. That is a separate issue, that I will work through thank you very much for you answer."}],"tags":[],"owner":{"account_id":3273937,"reputation":114870,"user_id":2756547,"accept_rate":75,"display_name":"Artem Bilan"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686685570,"creation_date":1686685570,"answer_id":76468250,"question_id":76468124,"body_markdown":"Your problem is here `Sftp.inboundStreamingAdapter()` and here `.split(s -&gt; s.delimiters(&quot;\\n&quot;))`. You are asking for an `InputStream` for a file, but then you try to split this `InputStream` by line delimiter. Since splitter cannot do find anything like that for us in the `InputStream`, it produces an input as is. And now you don&#39;t have any transformers and just dump that payload into Kafka producer.\r\n\r\nSee a `FileSplitter` instead. It supports an `InputStream` as a payload and it really was designed to emit line by line from a file.\r\n\r\nDocs are here: https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-splitter","title":"Can&#39;t convert .csv file to Json object and send to kafka due to cast exception","body":"<p>Your problem is here <code>Sftp.inboundStreamingAdapter()</code> and here <code>.split(s -&gt; s.delimiters(&quot;\\n&quot;))</code>. You are asking for an <code>InputStream</code> for a file, but then you try to split this <code>InputStream</code> by line delimiter. Since splitter cannot do find anything like that for us in the <code>InputStream</code>, it produces an input as is. And now you don't have any transformers and just dump that payload into Kafka producer.</p>\n<p>See a <code>FileSplitter</code> instead. It supports an <code>InputStream</code> as a payload and it really was designed to emit line by line from a file.</p>\n<p>Docs are here: <a href=\"https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-splitter\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-integration/docs/current/reference/html/file.html#file-splitter</a></p>\n"}],"owner":{"account_id":7715174,"reputation":31,"user_id":20444450,"display_name":"Beez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76468250,"answer_count":1,"score":0,"last_activity_date":1686685570,"creation_date":1686684249,"question_id":76468124,"body_markdown":"I am trying to SFTP into a server grab all the .csv files, split them into single line objects and transform to json. Once transformed to json I would like to send them to a kafka topic. However I am seeing a casting exception: \r\n\r\n`Can&#39;t convert value of class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync to class org.apache.kafka.common.serialization.StringSerializer specified in value.serializer`\r\n\r\nFull Stack Trace: \r\n\r\n```\r\n023-06-13T14:15:44.196-05:00 ERROR 71399 --- [   scheduling-1] o.s.integration.handler.LoggingHandler   : org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean &#39;publishToKafkaFlow.kafka:outbound-channel-adapter#0&#39; for component &#39;EngageKafkaProducer&#39;; defined in: &#39;class path resource [com/thrivent/enterprisemarketingchannelactivation/engage/config/AcousticEngageDataSftpToKafkaIntegrationFlow.class]&#39;; from source: &#39;bean method publishToKafkaFlow&#39;], failedMessage=GenericMessage [payload=SftpInputStreamAsync[ClientSessionImpl[cp.api@engage.thrivent@transfer-campaign-us-2.goacoustic.com/54.88.73.172:22]][/download/email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv], headers={file_remoteHostPort=transfer-campaign-us-2.goacoustic.com:22, file_remoteFileInfo={&quot;directory&quot;:false,&quot;filename&quot;:&quot;email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv&quot;,&quot;link&quot;:false,&quot;modified&quot;:1686258599000,&quot;permissions&quot;:&quot;rw-rw-r--&quot;,&quot;remoteDirectory&quot;:&quot;/download&quot;,&quot;size&quot;:7358023}, sequenceNumber=1, file_remoteDirectory=/download, sequenceSize=1, correlationId=79dc50e4-5bb3-8ff6-9edc-1c9ec8f9e88f, id=fa20238f-c641-a407-f8c9-8d318238b4c2, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@64b375da, file_remoteFile=email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv, timestamp=1686683743081}]\r\n\tat org.springframework.integration.support.utils.IntegrationUtils.wrapInHandlingExceptionIfNecessary(IntegrationUtils.java:191)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.doHandleMessage(AbstractMessageHandler.java:108)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleWithMetrics(AbstractMessageHandler.java:90)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:70)\r\n\tat org.springframework.integration.endpoint.PollingConsumer.handleMessage(PollingConsumer.java:158)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:348)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\r\n\tat org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\r\n\tat org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:341)\r\n\tat org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\r\n\tat org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)\r\n\tat java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\r\n\tat java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)\r\n\tat java.base/java.util.concurrent.FutureTask.run(FutureTask.java)\r\n\tat java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.apache.kafka.common.errors.SerializationException: Can&#39;t convert value of class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync to class org.apache.kafka.common.serialization.StringSerializer specified in value.serializer\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1008)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\r\n\tat org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\r\n\tat org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:783)\r\n\tat org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:754)\r\n\tat org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:564)\r\n\tat org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:528)\r\n\tat org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136)\r\n\tat org.springframework.integration.handler.AbstractMessageHandler.doHandleMessage(AbstractMessageHandler.java:105)\r\n\t... 20 more\r\nCaused by: java.lang.ClassCastException: class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync cannot be cast to class java.lang.String (org.apache.sshd.sftp.client.impl.SftpInputStreamAsync is in unnamed module of loader &#39;app&#39;; java.lang.String is in module java.base of loader &#39;bootstrap&#39;)\r\n\tat org.apache.kafka.common.serialization.StringSerializer.serialize(StringSerializer.java:29)\r\n\tat org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62)\r\n\tat org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\r\n\t... 28 more\r\n```\r\n\r\nHere is my full Integration flow - \r\n```\r\n@Configuration\r\n@RequiredArgsConstructor\r\n@Slf4j\r\npublic class AcousticEngageDataSftpToKafkaIntegrationFlow {\r\n\r\n    private static final String KAFKA_TOPIC = &quot;my-topic&quot;;\r\n\r\n    @Bean\r\n    public QueueChannel inboundFilesMessageChannel() {\r\n        return MessageChannels.queue().get();\r\n    }\r\n\r\n    @Bean\r\n    public QueueChannel kafkaPojoMessageChannel() {\r\n        return MessageChannels.queue().get();\r\n    }\r\n\r\n    @Bean\r\n    public MessageChannel kafkaProducerErrorRecordChannel() {\r\n        return MessageChannels.direct().get();\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow sftpFileTransferFlow(SessionFactory&lt;SftpClient.DirEntry&gt; engageSftpSessionFactory,\r\n                                                IntegrationFlowProperties engageProperties,\r\n                                                MessageChannel inboundFilesMessageChannel) {\r\n\r\n        return IntegrationFlow\r\n                .from(Sftp.inboundStreamingAdapter(new RemoteFileTemplate&lt;&gt;(engageSftpSessionFactory))\r\n                          .filter(new SftpRegexPatternFileListFilter(engageProperties.getRemoteFilePattern()))\r\n                              .remoteDirectory(engageProperties.getRemoteDirectory()),\r\n                e -&gt; e.id(&quot;sftpInboundAdapter&quot;)\r\n                        .autoStartup(true)\r\n                        .poller(Pollers.fixedRate(5000)))\r\n                .log(LoggingHandler.Level.DEBUG, &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;,\r\n                     &quot;headers[&#39;file_remoteDirectory&#39;] + + T(java.io.File).separator  + headers[&#39;file_remoteFile&#39;]&quot;)\r\n                .channel(inboundFilesMessageChannel)\r\n                              .get();\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow readCsvFileFlow(MessageChannel inboundFilesMessageChannel,\r\n                                           QueueChannel kafkaPojoMessageChannel) {\r\n\r\n        return IntegrationFlow.from(inboundFilesMessageChannel)\r\n                              .split(s -&gt; s.delimiters(&quot;\\n&quot;))\r\n                              .log(LoggingHandler.Level.DEBUG,\r\n                                   &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;,\r\n                                   m -&gt; &quot;Payload: &quot; + m.getPayload())\r\n                              .channel(kafkaPojoMessageChannel)\r\n                              .get();\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow publishToKafkaFlow(KafkaTemplate&lt;String, String&gt; kafkaTemplate,\r\n                                              MessageChannel kafkaProducerErrorRecordChannel,\r\n                                              QueueChannel kafkaPojoMessageChannel) {\r\n\r\n        return IntegrationFlow.from(kafkaPojoMessageChannel)\r\n                .log(LoggingHandler.Level.DEBUG,\r\n                     &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;, e -&gt; &quot;Payload: &quot; + e.getPayload())\r\n                              .handle(Kafka.outboundChannelAdapter(kafkaTemplate)\r\n                                           .topic(KAFKA_TOPIC),\r\n                                      e -&gt; e.id(&quot;EngageKafkaProducer&quot;))\r\n                              .routeByException(r -&gt; r\r\n                                      .channelMapping(KafkaProducerException.class, kafkaProducerErrorRecordChannel)\r\n                                      .defaultOutputChannel(&quot;errorChannel&quot;))\r\n                              .get();\r\n    }\r\n\r\n    @Bean\r\n    @Transformer(inputChannel=&quot;inboundFilesMessageChannel&quot;, outputChannel=&quot;kafkaPojoMessageChannel&quot;)\r\n    ObjectToJsonTransformer objectToJsonTransformer() {\r\n        return new ObjectToJsonTransformer();\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow logErrorsInErrorQueue() {\r\n        return IntegrationFlow.from(&quot;errorChannel&quot;)\r\n                              .wireTap(f -&gt; f.handle(m -&gt; log.error(&quot;Error occurred in AcousticEngageDataSftpToKafkaIntegrationFlow: {}&quot;, m)))\r\n                              .channel(&quot;kafkaProducerErrorRecordChannel&quot;)\r\n                              .get();\r\n    }\r\n\r\n    @Bean\r\n    public IntegrationFlow kafkaProducerErrorFlow(\r\n            final MessageChannel kafkaProducerErrorRecordChannel) {\r\n\r\n        return IntegrationFlow.from(kafkaProducerErrorRecordChannel)\r\n                               .handle(&quot;KafkaExceptionHandler&quot;,\r\n                                       &quot;kafkaProducerErrorChannel&quot;)\r\n                               .get();\r\n    }\r\n}\r\n```\r\n\r\n\r\nI have tried using different transformers and a custom transformer.  As of right now my value and key serializers are set to Spring. I feel like the problem is in my transformer, but could also be in my serializing. The goal is to move it to a json schema, however as of right now I just want to see some data on the topic. Any help would be appreciated, thanks. \r\n","title":"Can&#39;t convert .csv file to Json object and send to kafka due to cast exception","body":"<p>I am trying to SFTP into a server grab all the .csv files, split them into single line objects and transform to json. Once transformed to json I would like to send them to a kafka topic. However I am seeing a casting exception:</p>\n<p><code>Can't convert value of class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync to class org.apache.kafka.common.serialization.StringSerializer specified in value.serializer</code></p>\n<p>Full Stack Trace:</p>\n<pre><code>023-06-13T14:15:44.196-05:00 ERROR 71399 --- [   scheduling-1] o.s.integration.handler.LoggingHandler   : org.springframework.messaging.MessageHandlingException: error occurred in message handler [bean 'publishToKafkaFlow.kafka:outbound-channel-adapter#0' for component 'EngageKafkaProducer'; defined in: 'class path resource [com/thrivent/enterprisemarketingchannelactivation/engage/config/AcousticEngageDataSftpToKafkaIntegrationFlow.class]'; from source: 'bean method publishToKafkaFlow'], failedMessage=GenericMessage [payload=SftpInputStreamAsync[ClientSessionImpl[cp.api@engage.thrivent@transfer-campaign-us-2.goacoustic.com/54.88.73.172:22]][/download/email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv], headers={file_remoteHostPort=transfer-campaign-us-2.goacoustic.com:22, file_remoteFileInfo={&quot;directory&quot;:false,&quot;filename&quot;:&quot;email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv&quot;,&quot;link&quot;:false,&quot;modified&quot;:1686258599000,&quot;permissions&quot;:&quot;rw-rw-r--&quot;,&quot;remoteDirectory&quot;:&quot;/download&quot;,&quot;size&quot;:7358023}, sequenceNumber=1, file_remoteDirectory=/download, sequenceSize=1, correlationId=79dc50e4-5bb3-8ff6-9edc-1c9ec8f9e88f, id=fa20238f-c641-a407-f8c9-8d318238b4c2, closeableResource=org.springframework.integration.file.remote.session.CachingSessionFactory$CachedSession@64b375da, file_remoteFile=email_metadata_UNICA_CUSTID_Recipient-Event-Bulk-Export_6748469_Email_Jun-08-2023-20-10-00_20-21.csv, timestamp=1686683743081}]\n    at org.springframework.integration.support.utils.IntegrationUtils.wrapInHandlingExceptionIfNecessary(IntegrationUtils.java:191)\n    at org.springframework.integration.handler.AbstractMessageHandler.doHandleMessage(AbstractMessageHandler.java:108)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleWithMetrics(AbstractMessageHandler.java:90)\n    at org.springframework.integration.handler.AbstractMessageHandler.handleMessage(AbstractMessageHandler.java:70)\n    at org.springframework.integration.endpoint.PollingConsumer.handleMessage(PollingConsumer.java:158)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.messageReceived(AbstractPollingEndpoint.java:474)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.doPoll(AbstractPollingEndpoint.java:460)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.pollForMessage(AbstractPollingEndpoint.java:412)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$4(AbstractPollingEndpoint.java:348)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.lambda$execute$0(ErrorHandlingTaskExecutor.java:57)\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)\n    at org.springframework.integration.util.ErrorHandlingTaskExecutor.execute(ErrorHandlingTaskExecutor.java:55)\n    at org.springframework.integration.endpoint.AbstractPollingEndpoint.lambda$createPoller$5(AbstractPollingEndpoint.java:341)\n    at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)\n    at org.springframework.scheduling.concurrent.ReschedulingRunnable.run(ReschedulingRunnable.java:96)\n    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)\n    at java.base/java.util.concurrent.FutureTask.run$$$capture(FutureTask.java:264)\n    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java)\n    at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: org.apache.kafka.common.errors.SerializationException: Can't convert value of class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync to class org.apache.kafka.common.serialization.StringSerializer specified in value.serializer\n    at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1008)\n    at org.apache.kafka.clients.producer.KafkaProducer.send(KafkaProducer.java:952)\n    at org.springframework.kafka.core.DefaultKafkaProducerFactory$CloseSafeProducer.send(DefaultKafkaProducerFactory.java:1022)\n    at org.springframework.kafka.core.KafkaTemplate.doSend(KafkaTemplate.java:783)\n    at org.springframework.kafka.core.KafkaTemplate.observeSend(KafkaTemplate.java:754)\n    at org.springframework.kafka.core.KafkaTemplate.send(KafkaTemplate.java:564)\n    at org.springframework.integration.kafka.outbound.KafkaProducerMessageHandler.handleRequestMessage(KafkaProducerMessageHandler.java:528)\n    at org.springframework.integration.handler.AbstractReplyProducingMessageHandler.handleMessageInternal(AbstractReplyProducingMessageHandler.java:136)\n    at org.springframework.integration.handler.AbstractMessageHandler.doHandleMessage(AbstractMessageHandler.java:105)\n    ... 20 more\nCaused by: java.lang.ClassCastException: class org.apache.sshd.sftp.client.impl.SftpInputStreamAsync cannot be cast to class java.lang.String (org.apache.sshd.sftp.client.impl.SftpInputStreamAsync is in unnamed module of loader 'app'; java.lang.String is in module java.base of loader 'bootstrap')\n    at org.apache.kafka.common.serialization.StringSerializer.serialize(StringSerializer.java:29)\n    at org.apache.kafka.common.serialization.Serializer.serialize(Serializer.java:62)\n    at org.apache.kafka.clients.producer.KafkaProducer.doSend(KafkaProducer.java:1005)\n    ... 28 more\n</code></pre>\n<p>Here is my full Integration flow -</p>\n<pre><code>@Configuration\n@RequiredArgsConstructor\n@Slf4j\npublic class AcousticEngageDataSftpToKafkaIntegrationFlow {\n\n    private static final String KAFKA_TOPIC = &quot;my-topic&quot;;\n\n    @Bean\n    public QueueChannel inboundFilesMessageChannel() {\n        return MessageChannels.queue().get();\n    }\n\n    @Bean\n    public QueueChannel kafkaPojoMessageChannel() {\n        return MessageChannels.queue().get();\n    }\n\n    @Bean\n    public MessageChannel kafkaProducerErrorRecordChannel() {\n        return MessageChannels.direct().get();\n    }\n\n    @Bean\n    public IntegrationFlow sftpFileTransferFlow(SessionFactory&lt;SftpClient.DirEntry&gt; engageSftpSessionFactory,\n                                                IntegrationFlowProperties engageProperties,\n                                                MessageChannel inboundFilesMessageChannel) {\n\n        return IntegrationFlow\n                .from(Sftp.inboundStreamingAdapter(new RemoteFileTemplate&lt;&gt;(engageSftpSessionFactory))\n                          .filter(new SftpRegexPatternFileListFilter(engageProperties.getRemoteFilePattern()))\n                              .remoteDirectory(engageProperties.getRemoteDirectory()),\n                e -&gt; e.id(&quot;sftpInboundAdapter&quot;)\n                        .autoStartup(true)\n                        .poller(Pollers.fixedRate(5000)))\n                .log(LoggingHandler.Level.DEBUG, &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;,\n                     &quot;headers['file_remoteDirectory'] + + T(java.io.File).separator  + headers['file_remoteFile']&quot;)\n                .channel(inboundFilesMessageChannel)\n                              .get();\n    }\n\n    @Bean\n    public IntegrationFlow readCsvFileFlow(MessageChannel inboundFilesMessageChannel,\n                                           QueueChannel kafkaPojoMessageChannel) {\n\n        return IntegrationFlow.from(inboundFilesMessageChannel)\n                              .split(s -&gt; s.delimiters(&quot;\\n&quot;))\n                              .log(LoggingHandler.Level.DEBUG,\n                                   &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;,\n                                   m -&gt; &quot;Payload: &quot; + m.getPayload())\n                              .channel(kafkaPojoMessageChannel)\n                              .get();\n    }\n\n    @Bean\n    public IntegrationFlow publishToKafkaFlow(KafkaTemplate&lt;String, String&gt; kafkaTemplate,\n                                              MessageChannel kafkaProducerErrorRecordChannel,\n                                              QueueChannel kafkaPojoMessageChannel) {\n\n        return IntegrationFlow.from(kafkaPojoMessageChannel)\n                .log(LoggingHandler.Level.DEBUG,\n                     &quot;AcousticEngageDataSftpToKafkaIntegrationFlow&quot;, e -&gt; &quot;Payload: &quot; + e.getPayload())\n                              .handle(Kafka.outboundChannelAdapter(kafkaTemplate)\n                                           .topic(KAFKA_TOPIC),\n                                      e -&gt; e.id(&quot;EngageKafkaProducer&quot;))\n                              .routeByException(r -&gt; r\n                                      .channelMapping(KafkaProducerException.class, kafkaProducerErrorRecordChannel)\n                                      .defaultOutputChannel(&quot;errorChannel&quot;))\n                              .get();\n    }\n\n    @Bean\n    @Transformer(inputChannel=&quot;inboundFilesMessageChannel&quot;, outputChannel=&quot;kafkaPojoMessageChannel&quot;)\n    ObjectToJsonTransformer objectToJsonTransformer() {\n        return new ObjectToJsonTransformer();\n    }\n\n    @Bean\n    public IntegrationFlow logErrorsInErrorQueue() {\n        return IntegrationFlow.from(&quot;errorChannel&quot;)\n                              .wireTap(f -&gt; f.handle(m -&gt; log.error(&quot;Error occurred in AcousticEngageDataSftpToKafkaIntegrationFlow: {}&quot;, m)))\n                              .channel(&quot;kafkaProducerErrorRecordChannel&quot;)\n                              .get();\n    }\n\n    @Bean\n    public IntegrationFlow kafkaProducerErrorFlow(\n            final MessageChannel kafkaProducerErrorRecordChannel) {\n\n        return IntegrationFlow.from(kafkaProducerErrorRecordChannel)\n                               .handle(&quot;KafkaExceptionHandler&quot;,\n                                       &quot;kafkaProducerErrorChannel&quot;)\n                               .get();\n    }\n}\n</code></pre>\n<p>I have tried using different transformers and a custom transformer.  As of right now my value and key serializers are set to Spring. I feel like the problem is in my transformer, but could also be in my serializing. The goal is to move it to a json schema, however as of right now I just want to see some data on the topic. Any help would be appreciated, thanks.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","spring-data-jpa"],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686685293,"creation_date":1686684681,"question_id":76468169,"body_markdown":"I&#39;m using Spring Boot with Hibernate to implement card game stats and I want to optimize my query for loading duels from the database.\r\n\r\nMy entity relations are setup as follows:  \r\nA `duel` contains `player` 1 and `player` 2, each `player` contains a list of `duel card`s in the main `deck` and extra `deck`. Each `duel card` has a rarity and a `card`. Each `card` can have an `archetype` (or not).\r\n\r\nHibernate generates the following query for resolving the cards in player&#39;s decks:\r\n\r\n```\r\nselect m1_0.deck_id,m1_1.id,c1_0.id,a1_0.id,a1_0.name,c1_0.card_id,c1_0.name,m1_1.rarity from deck_main_deck m1_0 join deck_card m1_1 on m1_1.id=m1_0.main_deck_id left join card c1_0 on c1_0.id=m1_1.card_id left join archetype a1_0 on a1_0.id=c1_0.archetype_id where m1_0.deck_id in(1207,58,59,110,111,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,402,403,404,405,406,407,408,409,410,411,412,413,414,415,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,552,553,554,555,556,557,558,559,560,561,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,752,753,754,755,802,803,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1202,1203,1204,1205,1206)\r\n```\r\n\r\nThe issue with this query is that with a longer id list and a bigger duel table (which can have 1000s of rows), the query will become very, very slow. But, only on the Java side, running the query on PgAdmin 4 is pretty fast, however, around 21,000 rows are returned. This query does not fetch all decks at once, I&#39;m already customizing the batch fetching sizes via `@BatchSize(size = XXX)` in my entity definitions for the deck lists.\r\n\r\nWhen I run this query with `explain (analyze, buffers)` in PgAdmin 4, I get the following query plan:\r\n\r\n    &quot;Gather  (cost=9928.27..23382.21 rows=21632 width=72) (actual time=215.012..510.135 rows=21427 loops=1)&quot;\r\n    &quot;  Workers Planned: 2&quot;\r\n    &quot;  Workers Launched: 2&quot;\r\n    &quot;  Buffers: shared hit=10546&quot;\r\n    &quot;  -&gt;  Hash Left Join  (cost=8928.27..20219.01 rows=9013 width=72) (actual time=130.749..402.611 rows=7142 loops=3)&quot;\r\n    &quot;        Hash Cond: (c1_0.archetype_id = a1_0.id)&quot;\r\n    &quot;        Buffers: shared hit=10546&quot;\r\n    &quot;        -&gt;  Hash Left Join  (cost=8915.22..20182.14 rows=9013 width=62) (actual time=129.414..395.421 rows=7142 loops=3)&quot;\r\n    &quot;              Hash Cond: (m1_1.card_id = c1_0.id)&quot;\r\n    &quot;              Buffers: shared hit=10537&quot;\r\n    &quot;              -&gt;  Parallel Hash Join  (cost=8658.20..19901.45 rows=9013 width=26) (actual time=122.704..380.588 rows=7142 loops=3)&quot;\r\n    &quot;                    Hash Cond: (m1_1.id = m1_0.main_deck_id)&quot;\r\n    &quot;                    Buffers: shared hit=10315&quot;\r\n    &quot;                    -&gt;  Parallel Seq Scan on deck_card m1_1  (cost=0.00..10185.92 rows=402792 width=18) (actual time=0.013..81.695 rows=322234 loops=3)&quot;\r\n    &quot;                          Buffers: shared hit=6158&quot;\r\n    &quot;                    -&gt;  Parallel Hash  (cost=8545.54..8545.54 rows=9013 width=16) (actual time=121.051..121.053 rows=7142 loops=3)&quot;\r\n    &quot;                          Buckets: 32768  Batches: 1  Memory Usage: 1280kB&quot;\r\n    &quot;                          Buffers: shared hit=3963&quot;\r\n    &quot;                          -&gt;  Parallel Seq Scan on deck_main_deck m1_0  (cost=1.25..8545.54 rows=9013 width=16) (actual time=52.449..117.443 rows=7142 loops=3)&quot;\r\n    &quot;                                Filter: (deck_id = ANY (&#39;{1207,58,59,110,111,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,402,403,404,405,406,407,408,409,410,411,412,413,414,415,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,552,553,554,555,556,557,558,559,560,561,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,752,753,754,755,802,803,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1202,1203,1204,1205,1206}&#39;::bigint[]))&quot;\r\n    &quot;                                Rows Removed by Filter: 237193&quot;\r\n    &quot;                                Buffers: shared hit=3963&quot;\r\n    &quot;              -&gt;  Hash  (cost=155.34..155.34 rows=8134 width=44) (actual time=6.636..6.637 rows=8134 loops=3)&quot;\r\n    &quot;                    Buckets: 8192  Batches: 1  Memory Usage: 672kB&quot;\r\n    &quot;                    Buffers: shared hit=222&quot;\r\n    &quot;                    -&gt;  Seq Scan on card c1_0  (cost=0.00..155.34 rows=8134 width=44) (actual time=0.864..2.636 rows=8134 loops=3)&quot;\r\n    &quot;                          Buffers: shared hit=222&quot;\r\n    &quot;        -&gt;  Hash  (cost=7.47..7.47 rows=447 width=18) (actual time=1.310..1.311 rows=447 loops=3)&quot;\r\n    &quot;              Buckets: 1024  Batches: 1  Memory Usage: 30kB&quot;\r\n    &quot;              Buffers: shared hit=9&quot;\r\n    &quot;              -&gt;  Seq Scan on archetype a1_0  (cost=0.00..7.47 rows=447 width=18) (actual time=1.012..1.109 rows=447 loops=3)&quot;\r\n    &quot;                    Buffers: shared hit=9&quot;\r\n    &quot;Planning:&quot;\r\n    &quot;  Buffers: shared hit=44&quot;\r\n    &quot;Planning Time: 4.240 ms&quot;\r\n    &quot;Execution Time: 513.047 ms&quot;\r\n\r\nIt seems like PostgreSQL does a good job at optimizing the query. I&#39;m still wondering if I can add any additional optimizations such as indexes? PostgreSQL indexes primary keys by default so that&#39;s already taken care of.\r\n\r\n**Why does Hibernate parse the result rows so slowly?**  \r\nIf I reduce the duel count fetched per query (e.g. working with [`Pageable`][1]s and looping manually), the row parsing time seems to decrease significantly but the performance is still not great, reading 1000s of duels will take minutes. I was hoping to reduce this time to seconds since performance and a reasonably low memory footprint are both crucial for my use case. Note that I&#39;m using standard CRUD repository methods such as\r\n\r\n    @EntityGraph(value = &quot;Duel.withPlayers&quot;, type = EntityGraph.EntityGraphType.LOAD)\r\n    List&lt;Duel&gt; findAllByGameMode(final GameMode gameMode, final Pageable pageable);\r\n\r\nIt&#39;s also strange that just fetching all is way faster:  \r\n\r\n    @EntityGraph(value = &quot;Duel.withPlayers&quot;, type = EntityGraph.EntityGraphType.LOAD)\r\n    List&lt;Duel&gt; findAll(final Pageable pageable);\r\n\r\nFiltering out rows by e.g. game mode is enormously slower. How does that make sense? The returned row count is even higher than in the previous query but Hibernate processes it way faster anyway.\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html","title":"Filtering rows is way slower in Hibernate than returning all rows","body":"<p>I'm using Spring Boot with Hibernate to implement card game stats and I want to optimize my query for loading duels from the database.</p>\n<p>My entity relations are setup as follows:<br />\nA <code>duel</code> contains <code>player</code> 1 and <code>player</code> 2, each <code>player</code> contains a list of <code>duel card</code>s in the main <code>deck</code> and extra <code>deck</code>. Each <code>duel card</code> has a rarity and a <code>card</code>. Each <code>card</code> can have an <code>archetype</code> (or not).</p>\n<p>Hibernate generates the following query for resolving the cards in player's decks:</p>\n<pre><code>select m1_0.deck_id,m1_1.id,c1_0.id,a1_0.id,a1_0.name,c1_0.card_id,c1_0.name,m1_1.rarity from deck_main_deck m1_0 join deck_card m1_1 on m1_1.id=m1_0.main_deck_id left join card c1_0 on c1_0.id=m1_1.card_id left join archetype a1_0 on a1_0.id=c1_0.archetype_id where m1_0.deck_id in(1207,58,59,110,111,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,402,403,404,405,406,407,408,409,410,411,412,413,414,415,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,552,553,554,555,556,557,558,559,560,561,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,752,753,754,755,802,803,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1202,1203,1204,1205,1206)\n</code></pre>\n<p>The issue with this query is that with a longer id list and a bigger duel table (which can have 1000s of rows), the query will become very, very slow. But, only on the Java side, running the query on PgAdmin 4 is pretty fast, however, around 21,000 rows are returned. This query does not fetch all decks at once, I'm already customizing the batch fetching sizes via <code>@BatchSize(size = XXX)</code> in my entity definitions for the deck lists.</p>\n<p>When I run this query with <code>explain (analyze, buffers)</code> in PgAdmin 4, I get the following query plan:</p>\n<pre><code>&quot;Gather  (cost=9928.27..23382.21 rows=21632 width=72) (actual time=215.012..510.135 rows=21427 loops=1)&quot;\n&quot;  Workers Planned: 2&quot;\n&quot;  Workers Launched: 2&quot;\n&quot;  Buffers: shared hit=10546&quot;\n&quot;  -&gt;  Hash Left Join  (cost=8928.27..20219.01 rows=9013 width=72) (actual time=130.749..402.611 rows=7142 loops=3)&quot;\n&quot;        Hash Cond: (c1_0.archetype_id = a1_0.id)&quot;\n&quot;        Buffers: shared hit=10546&quot;\n&quot;        -&gt;  Hash Left Join  (cost=8915.22..20182.14 rows=9013 width=62) (actual time=129.414..395.421 rows=7142 loops=3)&quot;\n&quot;              Hash Cond: (m1_1.card_id = c1_0.id)&quot;\n&quot;              Buffers: shared hit=10537&quot;\n&quot;              -&gt;  Parallel Hash Join  (cost=8658.20..19901.45 rows=9013 width=26) (actual time=122.704..380.588 rows=7142 loops=3)&quot;\n&quot;                    Hash Cond: (m1_1.id = m1_0.main_deck_id)&quot;\n&quot;                    Buffers: shared hit=10315&quot;\n&quot;                    -&gt;  Parallel Seq Scan on deck_card m1_1  (cost=0.00..10185.92 rows=402792 width=18) (actual time=0.013..81.695 rows=322234 loops=3)&quot;\n&quot;                          Buffers: shared hit=6158&quot;\n&quot;                    -&gt;  Parallel Hash  (cost=8545.54..8545.54 rows=9013 width=16) (actual time=121.051..121.053 rows=7142 loops=3)&quot;\n&quot;                          Buckets: 32768  Batches: 1  Memory Usage: 1280kB&quot;\n&quot;                          Buffers: shared hit=3963&quot;\n&quot;                          -&gt;  Parallel Seq Scan on deck_main_deck m1_0  (cost=1.25..8545.54 rows=9013 width=16) (actual time=52.449..117.443 rows=7142 loops=3)&quot;\n&quot;                                Filter: (deck_id = ANY ('{1207,58,59,110,111,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,402,403,404,405,406,407,408,409,410,411,412,413,414,415,452,453,454,455,456,457,458,459,460,461,462,463,464,465,466,467,468,469,470,471,502,503,504,505,506,507,508,509,510,511,512,513,514,515,516,517,518,519,520,521,552,553,554,555,556,557,558,559,560,561,602,603,604,605,606,607,608,609,610,611,612,613,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,629,630,631,632,633,634,635,636,637,638,639,640,641,642,643,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,659,660,661,662,663,664,665,666,667,668,669,702,703,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,752,753,754,755,802,803,852,853,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,869,870,871,872,873,874,875,876,877,878,879,880,881,882,883,884,885,886,887,902,903,904,905,906,907,908,909,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,930,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,1002,1003,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1152,1153,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,1169,1170,1171,1172,1173,1174,1175,1176,1177,1202,1203,1204,1205,1206}'::bigint[]))&quot;\n&quot;                                Rows Removed by Filter: 237193&quot;\n&quot;                                Buffers: shared hit=3963&quot;\n&quot;              -&gt;  Hash  (cost=155.34..155.34 rows=8134 width=44) (actual time=6.636..6.637 rows=8134 loops=3)&quot;\n&quot;                    Buckets: 8192  Batches: 1  Memory Usage: 672kB&quot;\n&quot;                    Buffers: shared hit=222&quot;\n&quot;                    -&gt;  Seq Scan on card c1_0  (cost=0.00..155.34 rows=8134 width=44) (actual time=0.864..2.636 rows=8134 loops=3)&quot;\n&quot;                          Buffers: shared hit=222&quot;\n&quot;        -&gt;  Hash  (cost=7.47..7.47 rows=447 width=18) (actual time=1.310..1.311 rows=447 loops=3)&quot;\n&quot;              Buckets: 1024  Batches: 1  Memory Usage: 30kB&quot;\n&quot;              Buffers: shared hit=9&quot;\n&quot;              -&gt;  Seq Scan on archetype a1_0  (cost=0.00..7.47 rows=447 width=18) (actual time=1.012..1.109 rows=447 loops=3)&quot;\n&quot;                    Buffers: shared hit=9&quot;\n&quot;Planning:&quot;\n&quot;  Buffers: shared hit=44&quot;\n&quot;Planning Time: 4.240 ms&quot;\n&quot;Execution Time: 513.047 ms&quot;\n</code></pre>\n<p>It seems like PostgreSQL does a good job at optimizing the query. I'm still wondering if I can add any additional optimizations such as indexes? PostgreSQL indexes primary keys by default so that's already taken care of.</p>\n<p><strong>Why does Hibernate parse the result rows so slowly?</strong><br />\nIf I reduce the duel count fetched per query (e.g. working with <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/domain/Pageable.html\" rel=\"nofollow noreferrer\"><code>Pageable</code></a>s and looping manually), the row parsing time seems to decrease significantly but the performance is still not great, reading 1000s of duels will take minutes. I was hoping to reduce this time to seconds since performance and a reasonably low memory footprint are both crucial for my use case. Note that I'm using standard CRUD repository methods such as</p>\n<pre><code>@EntityGraph(value = &quot;Duel.withPlayers&quot;, type = EntityGraph.EntityGraphType.LOAD)\nList&lt;Duel&gt; findAllByGameMode(final GameMode gameMode, final Pageable pageable);\n</code></pre>\n<p>It's also strange that just fetching all is way faster:</p>\n<pre><code>@EntityGraph(value = &quot;Duel.withPlayers&quot;, type = EntityGraph.EntityGraphType.LOAD)\nList&lt;Duel&gt; findAll(final Pageable pageable);\n</code></pre>\n<p>Filtering out rows by e.g. game mode is enormously slower. How does that make sense? The returned row count is even higher than in the previous query but Hibernate processes it way faster anyway.</p>\n"},{"tags":["java","gradle","dependency-management","jdb"],"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":3,"creation_date":1686607967,"post_id":76442534,"comment_id":134819588,"body_markdown":"The Spring dependency management plugin has nothing to do with source code. It only allows to control dependency versions coming from BOMs. Actually, it is a relict from times when Gradle had no built-in BOM support. Even the maintainer of that plugin recommends to not use it anymore, but instead use the built-in BOM support. But anyway this has nothing to do with your actual question either way.","body":"The Spring dependency management plugin has nothing to do with source code. It only allows to control dependency versions coming from BOMs. Actually, it is a relict from times when Gradle had no built-in BOM support. Even the maintainer of that plugin recommends to not use it anymore, but instead use the built-in BOM support. But anyway this has nothing to do with your actual question either way."}],"answers":[{"comments":[{"owner":{"account_id":288740,"reputation":36435,"user_id":589329,"accept_rate":40,"display_name":"Vampire"},"score":1,"creation_date":1686843600,"post_id":76468138,"comment_id":134856953,"body_markdown":"Be very careful when doing this. Artifact resolution queries for example are not variant / attribute aware. There is unfortunately not yet a proper replacement that is which is the main reason it is still in there and not deprecated, but it should be used with caution.","body":"Be very careful when doing this. Artifact resolution queries for example are not variant / attribute aware. There is unfortunately not yet a proper replacement that is which is the main reason it is still in there and not deprecated, but it should be used with caution."}],"tags":[],"owner":{"account_id":26780105,"reputation":294,"user_id":20375079,"display_name":"Seb Perp"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686684388,"creation_date":1686684388,"answer_id":76468138,"question_id":76442534,"body_markdown":"See this answer to download the sources of your dependencies : https://stackoverflow.com/questions/39975780/how-can-i-use-gradle-to-download-dependencies-and-their-source-files-and-place-t/39981143#39981143\r\n\r\nThen, use the sourcepath jdb option to let him know where the sources are:\r\n`jdb -sourcepath &quot;.:/path/to/download&quot;`.","title":"Gradle: How to debug a source code of a dependency","body":"<p>See this answer to download the sources of your dependencies : <a href=\"https://stackoverflow.com/questions/39975780/how-can-i-use-gradle-to-download-dependencies-and-their-source-files-and-place-t/39981143#39981143\">How can I use Gradle to download dependencies and their source files and place them all in one directory?</a></p>\n<p>Then, use the sourcepath jdb option to let him know where the sources are:\n<code>jdb -sourcepath &quot;.:/path/to/download&quot;</code>.</p>\n"}],"owner":{"account_id":329709,"reputation":3234,"user_id":653379,"accept_rate":90,"display_name":"xralf"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76468138,"answer_count":1,"score":1,"last_activity_date":1686684388,"creation_date":1686332036,"question_id":76442534,"body_markdown":"I&#39;m using `jdb` debugger and I&#39;d like to step into the dependency code. I&#39;m using `gradle` as well.\r\nHere is my `build.gradle`\r\n\r\n    plugins {\r\n        id &#39;java&#39;\r\n        id &quot;io.spring.dependency-management&quot; version &quot;1.1.0&quot;\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;com.squareup.okhttp3:okhttp:4.9.0&#39;\r\n    }\r\n    \r\n    task runApp(type: JavaExec) {\r\n        main = &#39;App&#39;\r\n        classpath = sourceSets.main.runtimeClasspath\r\n    }\r\n\r\nI&#39;m using a plugin, that should automatically download and manage the source code for my dependencies (`io.spring.dependency-management`). I&#39;m not sure, if this is the right plugin.\r\n\r\nBut when I run\r\n\r\n    $ gradle clean\r\n    $ gradle build\r\n\r\nand then I run `jdb` I can view my source code file but I can&#39;t view (list) the source code of a dependency.\r\n\r\nWhat I&#39;d like to achieve?\r\n\r\n 1. step into the code of a dependency\r\n 2. list the source code with the `list` command\r\n\r\nHow can I do it?\r\n\r\n","title":"Gradle: How to debug a source code of a dependency","body":"<p>I'm using <code>jdb</code> debugger and I'd like to step into the dependency code. I'm using <code>gradle</code> as well.\nHere is my <code>build.gradle</code></p>\n<pre><code>plugins {\n    id 'java'\n    id &quot;io.spring.dependency-management&quot; version &quot;1.1.0&quot;\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'com.squareup.okhttp3:okhttp:4.9.0'\n}\n\ntask runApp(type: JavaExec) {\n    main = 'App'\n    classpath = sourceSets.main.runtimeClasspath\n}\n</code></pre>\n<p>I'm using a plugin, that should automatically download and manage the source code for my dependencies (<code>io.spring.dependency-management</code>). I'm not sure, if this is the right plugin.</p>\n<p>But when I run</p>\n<pre><code>$ gradle clean\n$ gradle build\n</code></pre>\n<p>and then I run <code>jdb</code> I can view my source code file but I can't view (list) the source code of a dependency.</p>\n<p>What I'd like to achieve?</p>\n<ol>\n<li>step into the code of a dependency</li>\n<li>list the source code with the <code>list</code> command</li>\n</ol>\n<p>How can I do it?</p>\n"},{"tags":["java","junit","mockito","mapper"],"comments":[{"owner":{"account_id":22577442,"reputation":758,"user_id":16775102,"display_name":"Feel free"},"score":0,"creation_date":1686121210,"post_id":76419674,"comment_id":134753864,"body_markdown":"Manually instantiate mapper like\nprivate UserToUserDTOMapper mapper = new UserToUserDTOMapperImpl();\nAnd remove &#39;@beforeEach&#39; method and @RequiredArgConstructor. you do not need it","body":"Manually instantiate mapper like private UserToUserDTOMapper mapper = new UserToUserDTOMapperImpl(); And remove &#39;@beforeEach&#39; method and @RequiredArgConstructor. you do not need it"},{"owner":{"account_id":1466631,"reputation":283,"user_id":3652852,"accept_rate":60,"display_name":"user1379280"},"score":0,"creation_date":1686164197,"post_id":76419674,"comment_id":134763153,"body_markdown":"@Feelfree : I dont think thats a good idea , DI is already injecting the mapper instance.","body":"@Feelfree : I dont think thats a good idea , DI is already injecting the mapper instance."},{"owner":{"account_id":329138,"reputation":8059,"user_id":652497,"accept_rate":91,"display_name":"Jonathan S. Fisher"},"score":0,"creation_date":1686311182,"post_id":76419674,"comment_id":134784867,"body_markdown":"can you post your entire stack track?","body":"can you post your entire stack track?"}],"answers":[{"tags":[],"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686684224,"creation_date":1686322930,"answer_id":76441436,"question_id":76419674,"body_markdown":"Since `mapper` is `final`, `@RequiredArgsConstructor` is creating a constructor like:\r\n\r\n```java\r\nUserToUserDTOMapperTest(UserToUserDTOMapper mapper) {\r\n    this.mapper = mapper;\r\n}\r\n```\r\n\r\nNow, when JUnit tries to instantiate the test class, it cannot resolve that constructor parameter – hence the `ParameterResolutionException`.\r\n\r\nYou are using MapStruct, so you can change the test as follows:\r\n\r\n```java\r\n// No @RequiredArgsConstructor / Lombok needed.\r\nclass UserToUserDTOMapperTest {\r\n\r\n    UserToUserDTOMapper classUnderTest = Mappers.getMapper(UserToUserDTOMapper.class);\r\n\r\n    String NAME = &quot;asd&quot;;\r\n    String EMAIL = &quot;asd@gmail.com&quot;;\r\n\r\n    @Test\r\n    void testMapUserToUserDTO() {\r\n        User user = User.builder()\r\n                .name(NAME)\r\n                .email(EMAIL)\r\n                .build();\r\n\r\n        UserDTO userDTO = classUnderTest.mapUserToUserDTO(user);\r\n\r\n        assertNotNull(userDTO);\r\n        assertEquals(NAME, userDTO.getName());\r\n        assertEquals(EMAIL, userDTO.getEmail());\r\n    }\r\n}\r\n```\r\n\r\nSee also:\r\n\r\nhttps://mapstruct.org/documentation/stable/reference/html/#mappers-factory","title":"Getting Exception in mappers test &#39;ParameterResolutionException&#39;","body":"<p>Since <code>mapper</code> is <code>final</code>, <code>@RequiredArgsConstructor</code> is creating a constructor like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>UserToUserDTOMapperTest(UserToUserDTOMapper mapper) {\n    this.mapper = mapper;\n}\n</code></pre>\n<p>Now, when JUnit tries to instantiate the test class, it cannot resolve that constructor parameter – hence the <code>ParameterResolutionException</code>.</p>\n<p>You are using MapStruct, so you can change the test as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// No @RequiredArgsConstructor / Lombok needed.\nclass UserToUserDTOMapperTest {\n\n    UserToUserDTOMapper classUnderTest = Mappers.getMapper(UserToUserDTOMapper.class);\n\n    String NAME = &quot;asd&quot;;\n    String EMAIL = &quot;asd@gmail.com&quot;;\n\n    @Test\n    void testMapUserToUserDTO() {\n        User user = User.builder()\n                .name(NAME)\n                .email(EMAIL)\n                .build();\n\n        UserDTO userDTO = classUnderTest.mapUserToUserDTO(user);\n\n        assertNotNull(userDTO);\n        assertEquals(NAME, userDTO.getName());\n        assertEquals(EMAIL, userDTO.getEmail());\n    }\n}\n</code></pre>\n<p>See also:</p>\n<p><a href=\"https://mapstruct.org/documentation/stable/reference/html/#mappers-factory\" rel=\"nofollow noreferrer\">https://mapstruct.org/documentation/stable/reference/html/#mappers-factory</a></p>\n"}],"owner":{"account_id":1466631,"reputation":283,"user_id":3652852,"accept_rate":60,"display_name":"user1379280"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686684224,"creation_date":1686107531,"question_id":76419674,"body_markdown":"I have two domain classes User and UserDTO\r\n\r\n    @Data\r\n    @Builder\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class User {\r\n        private String name;\r\n        private String email;\r\n    }\r\n\r\n    @Data\r\n    @Builder\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class UserDTO {\r\n        private String name;\r\n        private String email;\r\n    }\r\n\r\nand I have configured a Mapper class\r\n\r\n    import org.mapstruct.Builder;\r\n    import org.mapstruct.Mapper;\r\n    \r\n    import java.time.LocalDateTime;\r\n    \r\n    @Mapper\r\n            (\r\n                    componentModel = &quot;spring&quot;,\r\n                    builder = @Builder(disableBuilder = true),\r\n                    imports = {LocalDateTime.class}\r\n            )\r\n    public abstract class UserToUserDTOMapper {\r\n        public abstract UserDTO mapUserToUserDTO(User user);\r\n    \r\n        public abstract User mapUserDTOToUser(UserDTO userDTO);\r\n    }\r\n\r\nI can see the Mapper class generated in the generated source\r\n\r\nI have written a Unit Test For it\r\n\r\n    import lombok.RequiredArgsConstructor;\r\n    import org.junit.jupiter.api.Test;\r\n    \r\n    import static org.junit.jupiter.api.Assertions.*;\r\n    \r\n    import org.junit.jupiter.api.BeforeEach;\r\n    \r\n    @RequiredArgsConstructor\r\n    class UserToUserDTOMapperTest {\r\n        private final UserToUserDTOMapper mapper;\r\n    \r\n        String NAME = &quot;asd&quot;;\r\n        String EMAIL = &quot;asd@gmail.com&quot;;\r\n    \r\n        @BeforeEach\r\n        public void setUp() {\r\n        }\r\n    \r\n        @Test\r\n        public void testMapUserToUserDTO() {\r\n            User user = User.builder().name(NAME).email(EMAIL).build();\r\n            UserDTO userDTO = mapper.mapUserToUserDTO(user);\r\n    \t\tassertNotNull(userDTO);\r\n            assertEquals(NAME, userDTO.getName());\r\n            assertEquals(EMAIL, userDTO.getEmail());\r\n        }\r\n    }\r\n\r\nBut When I try to execute the test , It Fails with the error message\r\n**org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.asd.mapper.UserToUserDTOMapper mapper] in constructor [public com.asd.mapper.UserToUserDTOMapperTest(com.asd.mapper.UserToUserDTOMapper)]**\r\n\r\n\r\n\r\n","title":"Getting Exception in mappers test &#39;ParameterResolutionException&#39;","body":"<p>I have two domain classes User and UserDTO</p>\n<pre><code>@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\npublic class User {\n    private String name;\n    private String email;\n}\n\n@Data\n@Builder\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UserDTO {\n    private String name;\n    private String email;\n}\n</code></pre>\n<p>and I have configured a Mapper class</p>\n<pre><code>import org.mapstruct.Builder;\nimport org.mapstruct.Mapper;\n\nimport java.time.LocalDateTime;\n\n@Mapper\n        (\n                componentModel = &quot;spring&quot;,\n                builder = @Builder(disableBuilder = true),\n                imports = {LocalDateTime.class}\n        )\npublic abstract class UserToUserDTOMapper {\n    public abstract UserDTO mapUserToUserDTO(User user);\n\n    public abstract User mapUserDTOToUser(UserDTO userDTO);\n}\n</code></pre>\n<p>I can see the Mapper class generated in the generated source</p>\n<p>I have written a Unit Test For it</p>\n<pre><code>import lombok.RequiredArgsConstructor;\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.*;\n\nimport org.junit.jupiter.api.BeforeEach;\n\n@RequiredArgsConstructor\nclass UserToUserDTOMapperTest {\n    private final UserToUserDTOMapper mapper;\n\n    String NAME = &quot;asd&quot;;\n    String EMAIL = &quot;asd@gmail.com&quot;;\n\n    @BeforeEach\n    public void setUp() {\n    }\n\n    @Test\n    public void testMapUserToUserDTO() {\n        User user = User.builder().name(NAME).email(EMAIL).build();\n        UserDTO userDTO = mapper.mapUserToUserDTO(user);\n        assertNotNull(userDTO);\n        assertEquals(NAME, userDTO.getName());\n        assertEquals(EMAIL, userDTO.getEmail());\n    }\n}\n</code></pre>\n<p>But When I try to execute the test , It Fails with the error message\n<strong>org.junit.jupiter.api.extension.ParameterResolutionException: No ParameterResolver registered for parameter [final com.asd.mapper.UserToUserDTOMapper mapper] in constructor [public com.asd.mapper.UserToUserDTOMapperTest(com.asd.mapper.UserToUserDTOMapper)]</strong></p>\n"},{"tags":["java","hibernate"],"answers":[{"tags":[],"owner":{"account_id":24307437,"reputation":61,"user_id":18249973,"display_name":"herman2lv"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686684187,"creation_date":1686684187,"answer_id":76468117,"question_id":76467103,"body_markdown":"Hibernate saves your objects precisely as they are configured.\r\n\r\nYou have one parent Item that has a link to children, and some of them have links to their children, but none of them have links to their parents.\r\n\r\nIf you introduced bi-directional dependencies between entities you should build objects with circular links.\r\nFor example, this code will produce the expected result in the database if we persist the `Item parent` object. \r\n\r\n\r\n```\r\nItem parent = new Item();\r\n\r\nItem child1 = new Item();\r\nItem child2 = new Item();\r\n\r\nList&lt;Item&gt; children = List.of(child1, child2);\r\nparent.setChildren(children);\r\nchild1.setParent(parent);\r\nchild2.setParent(parent);\r\n```\r\n\r\n| id | parent\\_id | cart\\_id |\r\n| :--- | :--- | :--- |\r\n| 1 | null | null |\r\n| 2 | 1 | null |\r\n| 3 | 1 | null |\r\n\r\n\r\nBut if we comment out the last two lines in this code snippet - we will have something that could seem unexpected in the database table.\r\n```\r\nItem parent = new Item();\r\n\r\nItem child1 = new Item();\r\nItem child2 = new Item();\r\n\r\nList&lt;Item&gt; children = List.of(child1, child2);\r\nparent.setChildren(children);\r\n//child1.setParent(parent); - wrong! you should assign circular links manually!\r\n//child2.setParent(parent);\r\n```\r\n\r\nThe result is `null` values in column `parent_id`. Obviously, the reason is that the `parent` field of these `Item` objects is `null`.\r\n\r\n| id | parent\\_id | cart\\_id |\r\n| :--- | :--- | :--- |\r\n| 1 | null | null |\r\n| 2 | null | null |\r\n| 3 | null | null |\r\n\r\n\r\nBecause the object that is defined in JSON has only unidirectional links it will be saved as shown in the second code snippet.\r\n\r\nYou have two options to fight this problem:\r\n1. Ensure that objects with circular bidirectional dependencies have been configured correctly before saving\r\n2. Remove unnecessary bidirectional dependencies from your entity definitions.\r\n\r\nI&#39;d prefer the latter. You rarely need bidirectional associations between objects. Moreover - it doesn&#39;t suites the concept of an object in Object Oriented Programming. For example, a car consists of an engine and wheels and if we create such an object we will try to reflect real-life relationships in our abstraction: class `Car` will have a link to the `Engine` instance and collection of `Wheel` objects. But if you try to add a link that leads to `Car` to the `Engine` it will be in contradiction with the real-life object that you are trying to describe. The engine doesn&#39;t consist of a car, that&#39;s why `Engine` shouldn&#39;t have a link to its &quot;parent&quot;.\r\n\r\nThe root of the problem with the `cart_id` is the same. If we look at your JSON - your `Cart` consists of only one `Item`, and if we persist such an object to the database - only one item will have the cart_id. You have some kind of hierarchical structure of the order, but you want to save it in a database as a flat object. Hibernate helps to save your objects to the storage, it can&#39;t save some other objects only based on your entities&#39; definitions.\r\nFrom this point of view - the expected behavior - is that only one `Item` should be persisted with `cart_id` because only one `Item` object has a direct link to the `Cart`. The others have this link set to `null`.","title":"Self-reference @ManyToOne and @OneToMany","body":"<p>Hibernate saves your objects precisely as they are configured.</p>\n<p>You have one parent Item that has a link to children, and some of them have links to their children, but none of them have links to their parents.</p>\n<p>If you introduced bi-directional dependencies between entities you should build objects with circular links.\nFor example, this code will produce the expected result in the database if we persist the <code>Item parent</code> object.</p>\n<pre><code>Item parent = new Item();\n\nItem child1 = new Item();\nItem child2 = new Item();\n\nList&lt;Item&gt; children = List.of(child1, child2);\nparent.setChildren(children);\nchild1.setParent(parent);\nchild2.setParent(parent);\n</code></pre>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: left;\">parent_id</th>\n<th style=\"text-align: left;\">cart_id</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">null</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>But if we comment out the last two lines in this code snippet - we will have something that could seem unexpected in the database table.</p>\n<pre><code>Item parent = new Item();\n\nItem child1 = new Item();\nItem child2 = new Item();\n\nList&lt;Item&gt; children = List.of(child1, child2);\nparent.setChildren(children);\n//child1.setParent(parent); - wrong! you should assign circular links manually!\n//child2.setParent(parent);\n</code></pre>\n<p>The result is <code>null</code> values in column <code>parent_id</code>. Obviously, the reason is that the <code>parent</code> field of these <code>Item</code> objects is <code>null</code>.</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">id</th>\n<th style=\"text-align: left;\">parent_id</th>\n<th style=\"text-align: left;\">cart_id</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1</td>\n<td style=\"text-align: left;\">null</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">2</td>\n<td style=\"text-align: left;\">null</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">3</td>\n<td style=\"text-align: left;\">null</td>\n<td style=\"text-align: left;\">null</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Because the object that is defined in JSON has only unidirectional links it will be saved as shown in the second code snippet.</p>\n<p>You have two options to fight this problem:</p>\n<ol>\n<li>Ensure that objects with circular bidirectional dependencies have been configured correctly before saving</li>\n<li>Remove unnecessary bidirectional dependencies from your entity definitions.</li>\n</ol>\n<p>I'd prefer the latter. You rarely need bidirectional associations between objects. Moreover - it doesn't suites the concept of an object in Object Oriented Programming. For example, a car consists of an engine and wheels and if we create such an object we will try to reflect real-life relationships in our abstraction: class <code>Car</code> will have a link to the <code>Engine</code> instance and collection of <code>Wheel</code> objects. But if you try to add a link that leads to <code>Car</code> to the <code>Engine</code> it will be in contradiction with the real-life object that you are trying to describe. The engine doesn't consist of a car, that's why <code>Engine</code> shouldn't have a link to its &quot;parent&quot;.</p>\n<p>The root of the problem with the <code>cart_id</code> is the same. If we look at your JSON - your <code>Cart</code> consists of only one <code>Item</code>, and if we persist such an object to the database - only one item will have the cart_id. You have some kind of hierarchical structure of the order, but you want to save it in a database as a flat object. Hibernate helps to save your objects to the storage, it can't save some other objects only based on your entities' definitions.\nFrom this point of view - the expected behavior - is that only one <code>Item</code> should be persisted with <code>cart_id</code> because only one <code>Item</code> object has a direct link to the <code>Cart</code>. The others have this link set to <code>null</code>.</p>\n"}],"owner":{"account_id":18084577,"reputation":119,"user_id":13693042,"display_name":"Denis Murashko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76468117,"answer_count":1,"score":1,"last_activity_date":1686684187,"creation_date":1686674935,"question_id":76467103,"body_markdown":"I am sending Cart\r\n\r\n    {\r\n    &quot;otherId&quot;: &quot;12345&quot;,\r\n    &quot;items&quot;: [\r\n        {\r\n            &quot;children&quot;: [\r\n                {\r\n                    &quot;name&quot;: &quot;1&quot;,\r\n                    &quot;description&quot;: &quot;Nested Description&quot;,\r\n                    &quot;children&quot;: [\r\n                        {\r\n                            &quot;name&quot;: &quot;1.1&quot;,\r\n                            &quot;description&quot;: &quot;Nested Description&quot;\r\n                        },\r\n                        {\r\n                            &quot;name&quot;: &quot;1.2&quot;,\r\n                            &quot;description&quot;: &quot;Another Nested Description&quot;\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    &quot;name&quot;: &quot;2&quot;,\r\n                    &quot;description&quot;: &quot;Another Nested Description&quot;\r\n                }\r\n            ]\r\n        }\r\n    ]\r\n}\r\n\r\nMy entity:\r\n  \r\n    @Entity\r\n    @Table(name = &quot;cart&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class Cart {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private String id;\r\n\r\n    @Column(name = &quot;other_id&quot;)\r\n    private String otherId;\r\n\r\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH}/*, mappedBy=&quot;cart&quot;*/)\r\n    @JoinColumn(name = &quot;cart_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    private List&lt;Item&gt; items;\r\n\r\n}\r\n\r\n    @Entity\r\n    @Table(name = &quot;item&quot;)\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    public class Item {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.UUID)\r\n    private String id;\r\n\r\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\r\n    @JoinColumn(name = &quot;parent_id&quot;,referencedColumnName =&quot;id&quot;)\r\n    private Item parent;\r\n\r\n    @OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL,fetch = FetchType.LAZY)\r\n    private List&lt;Item&gt; children = new ArrayList&lt;&gt;();\r\n\r\nAll objects are saved, but cart_id is added in only one item, and parent_id is not filled in items.\r\nThe problem is in the connections between entity, but I do not understand which ones. As far as I understand hibernate should automatically add id in child items\r\n\r\n\r\n","title":"Self-reference @ManyToOne and @OneToMany","body":"<p>I am sending Cart</p>\n<pre><code>{\n&quot;otherId&quot;: &quot;12345&quot;,\n&quot;items&quot;: [\n    {\n        &quot;children&quot;: [\n            {\n                &quot;name&quot;: &quot;1&quot;,\n                &quot;description&quot;: &quot;Nested Description&quot;,\n                &quot;children&quot;: [\n                    {\n                        &quot;name&quot;: &quot;1.1&quot;,\n                        &quot;description&quot;: &quot;Nested Description&quot;\n                    },\n                    {\n                        &quot;name&quot;: &quot;1.2&quot;,\n                        &quot;description&quot;: &quot;Another Nested Description&quot;\n                    }\n                ]\n            },\n            {\n                &quot;name&quot;: &quot;2&quot;,\n                &quot;description&quot;: &quot;Another Nested Description&quot;\n            }\n        ]\n    }\n]\n</code></pre>\n<p>}</p>\n<p>My entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;cart&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Cart {\n@Id\n@GeneratedValue(strategy = GenerationType.UUID)\nprivate String id;\n\n@Column(name = &quot;other_id&quot;)\nprivate String otherId;\n\n@OneToMany(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH}/*, mappedBy=&quot;cart&quot;*/)\n@JoinColumn(name = &quot;cart_id&quot;, referencedColumnName = &quot;id&quot;)\nprivate List&lt;Item&gt; items;\n</code></pre>\n<p>}</p>\n<pre><code>@Entity\n@Table(name = &quot;item&quot;)\n@Getter\n@Setter\n@NoArgsConstructor\npublic class Item {\n@Id\n@GeneratedValue(strategy = GenerationType.UUID)\nprivate String id;\n\n@ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.MERGE, CascadeType.REFRESH, CascadeType.DETACH})\n@JoinColumn(name = &quot;parent_id&quot;,referencedColumnName =&quot;id&quot;)\nprivate Item parent;\n\n@OneToMany(mappedBy = &quot;parent&quot;, cascade = CascadeType.ALL,fetch = FetchType.LAZY)\nprivate List&lt;Item&gt; children = new ArrayList&lt;&gt;();\n</code></pre>\n<p>All objects are saved, but cart_id is added in only one item, and parent_id is not filled in items.\nThe problem is in the connections between entity, but I do not understand which ones. As far as I understand hibernate should automatically add id in child items</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1686684051,"post_id":76461446,"comment_id":134832359,"body_markdown":"Lag is already available as a JMX Metric. Why loop partitions? Also, as the error says, you need to loop over the assignment for the current consumer, not lookup all topic partitions.","body":"Lag is already available as a JMX Metric. Why loop partitions? Also, as the error says, you need to loop over the assignment for the current consumer, not lookup all topic partitions."},{"owner":{"account_id":23822186,"reputation":13,"user_id":17829722,"display_name":"ewainchoi"},"score":1,"creation_date":1687749204,"post_id":76461446,"comment_id":134974909,"body_markdown":"@OneCricketeer  Oh oh oh oh, I understand now. Thank you.","body":"@OneCricketeer  Oh oh oh oh, I understand now. Thank you."}],"owner":{"account_id":23822186,"reputation":13,"user_id":17829722,"display_name":"ewainchoi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686684160,"creation_date":1686625166,"question_id":76461446,"body_markdown":"I want to use the currentLag() function in kafka-clients APIs 3.2.x to get the lag, but it gives an error\r\n\r\nAPI\r\n```\r\npublic OptionalLong currentLag(TopicPartition topicPartition) {\r\n```\r\n\r\n\r\n```\r\nKafkaConsumer&lt;String, byte[]&gt; consumer = ConsumerConstructor.getInstance().buildOffsetConsumer(&quot;group_check_msg_cnt&quot;);\r\n        List&lt;PartitionInfo&gt; partitionsFor = consumer.partitionsFor(&quot;test_topic&quot;);\r\n        for (PartitionInfo partitionInfo : partitionsFor) {\r\n            TopicPartition topicPartition = new TopicPartition(partitionInfo.topic(), partitionInfo.partition());\r\n            OptionalLong optionalLong = consumer.currentLag(topicPartition);\r\n            if (optionalLong.isPresent()) {\r\n                long asLong = optionalLong.getAsLong();\r\n                System.out.println( &quot;partition-&quot; + topicPartition.partition() + &quot;, lag: &quot;+asLong);\r\n            }else {\r\n                System.out.println(&quot;---&quot;);\r\n            }\r\n        }\r\n        consumer.close();\r\n```\r\n\r\n\r\n\r\n```\r\njava.lang.IllegalStateException: No current assignment for partition test_topic-5\r\n        at org.apache.kafka.clients.consumer.internals.SubscriptionState.assignedState(SubscriptionState.java:370)\r\n        at org.apache.kafka.clients.consumer.internals.SubscriptionState.partitionLag(SubscriptionState.java:542)\r\n        at org.apache.kafka.clients.consumer.KafkaConsumer.currentLag(KafkaConsumer.java:2260)\r\n        at seoclarity.actonia_competitor_summary.ri.test.Test.process8(Test.java:47)\r\n        at seoclarity.actonia_competitor_summary.ri.test.Test.main(Test.java:36)\r\n        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:254)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n```\r\n\r\n\r\n\r\nThis function does not to return the correct value.","title":"Get currentLag() from consumer API","body":"<p>I want to use the currentLag() function in kafka-clients APIs 3.2.x to get the lag, but it gives an error</p>\n<p>API</p>\n<pre><code>public OptionalLong currentLag(TopicPartition topicPartition) {\n</code></pre>\n<pre><code>KafkaConsumer&lt;String, byte[]&gt; consumer = ConsumerConstructor.getInstance().buildOffsetConsumer(&quot;group_check_msg_cnt&quot;);\n        List&lt;PartitionInfo&gt; partitionsFor = consumer.partitionsFor(&quot;test_topic&quot;);\n        for (PartitionInfo partitionInfo : partitionsFor) {\n            TopicPartition topicPartition = new TopicPartition(partitionInfo.topic(), partitionInfo.partition());\n            OptionalLong optionalLong = consumer.currentLag(topicPartition);\n            if (optionalLong.isPresent()) {\n                long asLong = optionalLong.getAsLong();\n                System.out.println( &quot;partition-&quot; + topicPartition.partition() + &quot;, lag: &quot;+asLong);\n            }else {\n                System.out.println(&quot;---&quot;);\n            }\n        }\n        consumer.close();\n</code></pre>\n<pre><code>java.lang.IllegalStateException: No current assignment for partition test_topic-5\n        at org.apache.kafka.clients.consumer.internals.SubscriptionState.assignedState(SubscriptionState.java:370)\n        at org.apache.kafka.clients.consumer.internals.SubscriptionState.partitionLag(SubscriptionState.java:542)\n        at org.apache.kafka.clients.consumer.KafkaConsumer.currentLag(KafkaConsumer.java:2260)\n        at seoclarity.actonia_competitor_summary.ri.test.Test.process8(Test.java:47)\n        at seoclarity.actonia_competitor_summary.ri.test.Test.main(Test.java:36)\n        at org.codehaus.mojo.exec.ExecJavaMojo$1.run(ExecJavaMojo.java:254)\n        at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n<p>This function does not to return the correct value.</p>\n"},{"tags":["java","azure","azure-cosmosdb"],"comments":[{"owner":{"account_id":101080,"reputation":69720,"user_id":272109,"display_name":"David Makogon"},"score":1,"creation_date":1659699891,"post_id":73247977,"comment_id":129362277,"body_markdown":"Please edit to add more details, such as an example payload you&#39;re trying to add within a transactional batch, how you set up the container (e.g. partition key), typical size of the batch, etc. Are all documents within the same partition key value? Is your batch size within the limit? Etc.","body":"Please edit to add more details, such as an example payload you&#39;re trying to add within a transactional batch, how you set up the container (e.g. partition key), typical size of the batch, etc. Are all documents within the same partition key value? Is your batch size within the limit? Etc."},{"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1659707172,"post_id":73247977,"comment_id":129365076,"body_markdown":"The same messages when I am trying to store via only create call are getting saved , getting issue while saving them in batch only .","body":"The same messages when I am trying to store via only create call are getting saved , getting issue while saving them in batch only ."},{"owner":{"account_id":101080,"reputation":69720,"user_id":272109,"display_name":"David Makogon"},"score":2,"creation_date":1659707406,"post_id":73247977,"comment_id":129365174,"body_markdown":"Ok, but you haven&#39;t answered what I was asking (e.g. are they all with the same partition key value?). And please *edit your question* - these details really need to be in your question.","body":"Ok, but you haven&#39;t answered what I was asking (e.g. are they all with the same partition key value?). And please <i>edit your question</i> - these details really need to be in your question."},{"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1659708150,"post_id":73247977,"comment_id":129365486,"body_markdown":"@DavidMakogon yes partition key is same .","body":"@DavidMakogon yes partition key is same ."},{"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1659709139,"post_id":73247977,"comment_id":129365895,"body_markdown":"@DavidMakogon I have checked in CosmosBatchResponse all objects have same PK.","body":"@DavidMakogon I have checked in CosmosBatchResponse all objects have same PK."},{"owner":{"account_id":7092116,"reputation":14335,"user_id":5641598,"accept_rate":50,"display_name":"Matias Quaranta"},"score":0,"creation_date":1660669221,"post_id":73247977,"comment_id":129584907,"body_markdown":"What is the SubStatus of the one that has 400?","body":"What is the SubStatus of the one that has 400?"},{"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"score":0,"creation_date":1663577963,"post_id":73247977,"comment_id":130264395,"body_markdown":"@MatiasQuaranta It is 0","body":"@MatiasQuaranta It is 0"}],"answers":[{"tags":[],"owner":{"account_id":10790781,"reputation":1,"user_id":7938364,"display_name":"LimboRock"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686683933,"creation_date":1686683933,"answer_id":76468088,"question_id":73247977,"body_markdown":"I have ran into exact same issue where the cosmos createItemOperation worked with stored procedure but failed with cosmos batch when writing exact same set of items. Cosmos batch returned 400 with subStatus code 0, and null error message.\r\n\r\nIn my case I found the cosmos batch only works if I set a valid &quot;ttl&quot; value at the item level, whereas the stored procedure does not require a &quot;ttl&quot; set at the item level no matter how the &quot;ttl&quot; is configured at container level. \r\n\r\nI didn&#39;t find any documentation saying that the &quot;ttl&quot; is required for the cosmos batch operation and I haven&#39;t found the actual solution aside the workaround that I mentioned above yet, looking for more updates in this post. ","title":"Getting 400 as status code in cosmo DB batch Operation","body":"<p>I have ran into exact same issue where the cosmos createItemOperation worked with stored procedure but failed with cosmos batch when writing exact same set of items. Cosmos batch returned 400 with subStatus code 0, and null error message.</p>\n<p>In my case I found the cosmos batch only works if I set a valid &quot;ttl&quot; value at the item level, whereas the stored procedure does not require a &quot;ttl&quot; set at the item level no matter how the &quot;ttl&quot; is configured at container level.</p>\n<p>I didn't find any documentation saying that the &quot;ttl&quot; is required for the cosmos batch operation and I haven't found the actual solution aside the workaround that I mentioned above yet, looking for more updates in this post.</p>\n"}],"owner":{"account_id":5137581,"reputation":300,"user_id":4115835,"accept_rate":15,"display_name":"Loren"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":407,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686683933,"creation_date":1659693623,"question_id":73247977,"body_markdown":"I am trying to store multiple types of Records in Cosmo DB using batch operation. But I am getting 400 status in CosmoBatchResponse object and errorMessage is null. Internally , one item is giving 400 , all the other operations have a 424 status code (failed dependency). From this [document] &lt;https://learn.microsoft.com/en-us/rest/api/cosmos-db/http-status-codes-for-cosmosdb&gt; I can see there could be many reason of 400 , but if errorMessage is null then how to find what went wrong . Also , same msg is getting stored via create call ,facing issue while batch save only. \r\n\r\n    PartitionKey partitionKey = new PartitionKey(&quot;customerNo&quot;);\r\n    CosmosBatch batch = CosmosBatch.createCosmosBatch(partitionKey);\r\n    batch.createItemOperation(customer);\r\n\r\nI have tried to store via create method only looping on CosmosItemOperation and it is getting stored. \r\n\r\n   \t  CosmosBatchResponse response=paymentRepository.createBatch(cosmosBatch);\r\n    for(CosmosItemOperation itemOp:cosmosBatch.getOperations()) {\r\n    \tSystem.out.println(paymentRepository.create(itemOp.getItem(),&quot;&quot;));// Here it is getting stored. \r\n    }\r\n\r\n\r\n    public CosmosBatchResponse createBatch(CosmosBatch cosmosBatch) {\r\n    CosmosBatchResponse response = null;\r\n    try {\r\n      response = container.executeCosmosBatch(cosmosBatch);\r\n      System.out.println(response.isSuccessStatusCode());  -- returns false\r\n      System.out.println(response.getErrorMessage());      -- returns null\r\n      return response;\r\n    } catch (final Exception e) {                          \r\n      int statusCode = CosmosUtils.getCosmosStatusCode(e);\r\n      if (CONFLICT_RESOURCE == statusCode) {\r\n        log.error(\r\n            &quot;CosmosCreateDocumentException: Resource already exists for Document : {}&quot;,\r\n            response.getErrorMessage());\r\n      }\r\n      shouldRetryOnException(e);\r\n      log.error(\r\n          &quot;CosmosCreateDocumentException for Document {} - {}, {}&quot;, cosmosBatch, e.getMessage(), e);\r\n      throw new GenericRepositoryException(e.getMessage(), e);\r\n    }\r\n  }\r\n    ","title":"Getting 400 as status code in cosmo DB batch Operation","body":"<p>I am trying to store multiple types of Records in Cosmo DB using batch operation. But I am getting 400 status in CosmoBatchResponse object and errorMessage is null. Internally , one item is giving 400 , all the other operations have a 424 status code (failed dependency). From this [document] <a href=\"https://learn.microsoft.com/en-us/rest/api/cosmos-db/http-status-codes-for-cosmosdb\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/rest/api/cosmos-db/http-status-codes-for-cosmosdb</a> I can see there could be many reason of 400 , but if errorMessage is null then how to find what went wrong . Also , same msg is getting stored via create call ,facing issue while batch save only.</p>\n<pre><code>PartitionKey partitionKey = new PartitionKey(&quot;customerNo&quot;);\nCosmosBatch batch = CosmosBatch.createCosmosBatch(partitionKey);\nbatch.createItemOperation(customer);\n</code></pre>\n<p>I have tried to store via create method only looping on CosmosItemOperation and it is getting stored.</p>\n<pre><code>  CosmosBatchResponse response=paymentRepository.createBatch(cosmosBatch);\nfor(CosmosItemOperation itemOp:cosmosBatch.getOperations()) {\n    System.out.println(paymentRepository.create(itemOp.getItem(),&quot;&quot;));// Here it is getting stored. \n}\n\n\npublic CosmosBatchResponse createBatch(CosmosBatch cosmosBatch) {\nCosmosBatchResponse response = null;\ntry {\n  response = container.executeCosmosBatch(cosmosBatch);\n  System.out.println(response.isSuccessStatusCode());  -- returns false\n  System.out.println(response.getErrorMessage());      -- returns null\n  return response;\n} catch (final Exception e) {                          \n  int statusCode = CosmosUtils.getCosmosStatusCode(e);\n  if (CONFLICT_RESOURCE == statusCode) {\n    log.error(\n        &quot;CosmosCreateDocumentException: Resource already exists for Document : {}&quot;,\n        response.getErrorMessage());\n  }\n  shouldRetryOnException(e);\n  log.error(\n      &quot;CosmosCreateDocumentException for Document {} - {}, {}&quot;, cosmosBatch, e.getMessage(), e);\n  throw new GenericRepositoryException(e.getMessage(), e);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","spring-boot","apache-kafka","spring-kafka","spring-kafka-test"],"comments":[{"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"score":0,"creation_date":1686652026,"post_id":76463848,"comment_id":134825179,"body_markdown":"In EmbeddedKafka I see auto.create.topics.enable=true","body":"In EmbeddedKafka I see auto.create.topics.enable=true"},{"owner":{"account_id":13421051,"reputation":147,"user_id":9683786,"display_name":"xiaoli"},"score":0,"creation_date":1686652865,"post_id":76463848,"comment_id":134825349,"body_markdown":"Hi @Mar-Z, I set it to true to test the allow.auto.create.topics flag on Consumer level. If consumer flag set to false, the topic shouldn&#39;t be auto created.\n\nBy the way, I realised the issue seems caused by Producer side. When the producer send a request to the broker, the topic will get auto created. I&#39;ve updated the ticket description with my latest finding.","body":"Hi @Mar-Z, I set it to true to test the allow.auto.create.topics flag on Consumer level. If consumer flag set to false, the topic shouldn&#39;t be auto created.  By the way, I realised the issue seems caused by Producer side. When the producer send a request to the broker, the topic will get auto created. I&#39;ve updated the ticket description with my latest finding."}],"answers":[{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686683923,"creation_date":1686683923,"answer_id":76468084,"question_id":76463848,"body_markdown":"&gt; how do I disable the topic auto creation on producer?\r\n\r\nYou would disable auto creation on the broker. \r\n\r\nIdeally, you&#39;d also disallow from the consumer. Otherwise, you&#39;d be making empty topics with no active producer (for example, you mistype the topic name, and you&#39;d get no messages or warning since the topic would be created empty). \r\n\r\nUse AdminClient on your own to actually create topics before other tests run. ","title":"ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG = false is not working","body":"<blockquote>\n<p>how do I disable the topic auto creation on producer?</p>\n</blockquote>\n<p>You would disable auto creation on the broker.</p>\n<p>Ideally, you'd also disallow from the consumer. Otherwise, you'd be making empty topics with no active producer (for example, you mistype the topic name, and you'd get no messages or warning since the topic would be created empty).</p>\n<p>Use AdminClient on your own to actually create topics before other tests run.</p>\n"}],"owner":{"account_id":13421051,"reputation":147,"user_id":9683786,"display_name":"xiaoli"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":260,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686683923,"creation_date":1686651250,"question_id":76463848,"body_markdown":"SpringBoot2\r\nSpringKafka\r\n\r\nI&#39;m currently facing an issue where the ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG = false is not working properly. I&#39;ve set the allow.auto.create.topics to false, but the Topic still auto created during the runtime.\r\n\r\nHere is the code changes that I&#39;ve made.\r\n\r\nEmbeddedKafkaIntegrationTest.java (Unit Test class)\r\n```\r\npackage com.mbag.kafka;\r\n\r\nimport org.apache.kafka.clients.admin.AdminClientConfig;\r\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\r\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\r\nimport org.apache.kafka.clients.producer.ProducerConfig;\r\nimport org.apache.kafka.common.serialization.StringDeserializer;\r\nimport org.apache.kafka.common.serialization.StringSerializer;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.context.annotation.Import;\r\nimport org.springframework.kafka.annotation.EnableKafka;\r\nimport org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;\r\nimport org.springframework.kafka.core.ConsumerFactory;\r\nimport org.springframework.kafka.core.DefaultKafkaConsumerFactory;\r\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\r\nimport org.springframework.kafka.core.KafkaAdmin;\r\nimport org.springframework.kafka.core.KafkaTemplate;\r\nimport org.springframework.kafka.core.ProducerFactory;\r\nimport org.springframework.kafka.test.context.EmbeddedKafka;\r\nimport org.springframework.test.annotation.DirtiesContext;\r\nimport org.springframework.test.context.ContextConfiguration;\r\nimport org.springframework.util.StringUtils;\r\n\r\nimport java.time.Duration;\r\nimport java.util.Collections;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.Properties;\r\nimport java.util.concurrent.TimeUnit;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertTrue;\r\n\r\n@SpringBootTest(classes = {KafkaConsumerService.class, KafkaProducerService.class})\r\n@Import(com.mbag.kafka.EmbeddedKafkaIntegrationTest.KafkaConfigurationTest.class)\r\n@DirtiesContext\r\n@EmbeddedKafka(partitions = 1, brokerProperties = {\r\n        &quot;listeners=PLAINTEXT://localhost:9092&quot;,\r\n        &quot;port=9092&quot;,\r\n        &quot;auto.create.topics.enable=true&quot;\r\n})\r\npublic class EmbeddedKafkaIntegrationTest {\r\n\r\n    @Autowired\r\n    private KafkaConsumerService consumer;\r\n\r\n    @Autowired\r\n    private KafkaProducerService producer;\r\n\r\n    @Value(&quot;${test.topic}&quot;)\r\n    private String topic;\r\n\r\n    @Test\r\n    public void givenEmbeddedKafkaBroker_whenSendingWithSimpleProducer_thenMessageReceived() throws Exception {\r\n        String data = &quot;Sending with our own simple KafkaProducer&quot;;\r\n\r\n        producer.send(topic, data);\r\n\r\n        boolean messageConsumed = consumer.getLatch().await(3, TimeUnit.SECONDS);\r\n\r\n        assertTrue(messageConsumed);\r\n        assertTrue(consumer.getPayload().contains(data));\r\n    }\r\n\r\n    @Configuration\r\n    @EnableKafka\r\n    static class KafkaConfigurationTest {\r\n\r\n        @Bean\r\n        public KafkaAdmin admin() {\r\n            Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;();\r\n            configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n            return new KafkaAdmin(configs);\r\n        }\r\n\r\n        @Bean(&quot;kafkaListenerContainerFactory&quot;)\r\n        ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; kafkaListenerContainerFactory() {\r\n            ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n            factory.setConsumerFactory(consumerFactory());\r\n            factory.setRecordFilterStrategy(record -&gt; record.value().contains(&quot;test&quot;));\r\n            return factory;\r\n        }\r\n\r\n        @Bean\r\n        public ConsumerFactory&lt;Integer, String&gt; consumerFactory() {\r\n            return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs());\r\n        }\r\n\r\n        @Bean\r\n        public Map&lt;String, Object&gt; consumerConfigs() {\r\n            Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n            props.put(ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG, &quot;false&quot;);\r\n            props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n            props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;); // earliest latest\r\n            props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;localtest&quot;);\r\n            props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\r\n            return props;\r\n        }\r\n\r\n        @Bean\r\n        public ProducerFactory&lt;String, String&gt; producerFactory() {\r\n            Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\r\n            configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n            configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n            configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n            return new DefaultKafkaProducerFactory&lt;&gt;(configProps);\r\n        }\r\n\r\n        @Bean\r\n        public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\r\n            return new KafkaTemplate&lt;&gt;(producerFactory());\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nKafkaConsumerService.java\r\n```\r\npackage com.mbag.kafka;\r\n\r\nimport lombok.Data;\r\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\r\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.kafka.annotation.KafkaListener;\r\nimport org.springframework.kafka.annotation.RetryableTopic;\r\nimport org.springframework.kafka.retrytopic.FixedDelayStrategy;\r\nimport org.springframework.retry.annotation.Backoff;\r\nimport org.springframework.stereotype.Component;\r\n\r\nimport java.util.concurrent.CountDownLatch;\r\n\r\n@Component\r\n@Data\r\npublic class KafkaConsumerService {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(KafkaConsumer.class);\r\n\r\n    private CountDownLatch latch = new CountDownLatch(1);\r\n    private String payload;\r\n\r\n    @KafkaListener(topics = &quot;${test.topic}&quot;, groupId = &quot;localtest&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\r\n    public void receive(ConsumerRecord&lt;?, ?&gt; consumerRecord) {\r\n        LOGGER.info(&quot;Received payload=&#39;{}&#39;&quot;, consumerRecord.toString());\r\n        payload = consumerRecord.toString();\r\n        latch.countDown();\r\n    }\r\n\r\n    public void resetLatch() {\r\n        latch = new CountDownLatch(1);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nKafkaProducerService.java\r\n```\r\npackage com.mbag.kafka;\r\n\r\nimport org.apache.kafka.clients.producer.KafkaProducer;\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.kafka.core.KafkaTemplate;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class KafkaProducerService {\r\n\r\n    private static final Logger LOGGER = LoggerFactory.getLogger(KafkaProducer.class);\r\n\r\n    @Autowired\r\n    private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\r\n\r\n    public void send(String topic, String payload) {\r\n        LOGGER.info(&quot;sending payload=&#39;{}&#39; to topic=&#39;{}&#39;&quot;, payload, topic);\r\n        kafkaTemplate.send(topic, payload);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\napplication.yml\r\n```\r\nspring:\r\n  kafka:\r\n    consumer:\r\n      auto-offset-reset: earliest\r\n      group-id: localtest\r\n      properties:\r\n        allow.auto.create.topics: false\r\ntest:\r\n  topic: embedded-test-topic\r\n  topic-test: testing-only\r\n```\r\n\r\nBased on above code changes, I did some testing by changing the flag between broker and consumer.\r\n1. If I changed the auto.create.topics.enable=false on broker level, the test case will failed due to unable to subscribe the topic. This is fine since expected the behavior.\r\n2. If I enable the auto.create.topics.enable=true, but I disabled the allow.auto.create.topics=false, the topic still auto created. This is not fine as unexpected behavior.\r\n\r\nI&#39;ve checked the logs in console and debug mode, the property is indeed set to false. But things just don&#39;t work as expected.\r\n\r\nAbove testing is using @EmbeddedKafka. I did tried to use TestContainers Kafka, and the result still the same. Not working.\r\n\r\nCan someone please advise if I make any incorrect changes here?\r\n\r\n**UPDATE:**\r\nAfter some testing, it seems like the topic was created during the Producer part.\r\nI created a simple test cases for consume (without produce code), the topic didn&#39;t get created.\r\nI created another simple test cases for produce (without consume code), I saw the topic being created automatically.\r\n\r\nDoes anyone know how do I disable the topic auto creation on producer? Or if this is intended feature?\r\n\r\nI&#39;m understand I can disable the topic auto creation on broker level (auto.create.topics.enable=false). However, sometimes we may not allow to modify the properties on infra level. ","title":"ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG = false is not working","body":"<p>SpringBoot2\nSpringKafka</p>\n<p>I'm currently facing an issue where the ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG = false is not working properly. I've set the allow.auto.create.topics to false, but the Topic still auto created during the runtime.</p>\n<p>Here is the code changes that I've made.</p>\n<p>EmbeddedKafkaIntegrationTest.java (Unit Test class)</p>\n<pre><code>package com.mbag.kafka;\n\nimport org.apache.kafka.clients.admin.AdminClientConfig;\nimport org.apache.kafka.clients.consumer.ConsumerConfig;\nimport org.apache.kafka.clients.consumer.ConsumerRecords;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.apache.kafka.clients.producer.ProducerConfig;\nimport org.apache.kafka.common.serialization.StringDeserializer;\nimport org.apache.kafka.common.serialization.StringSerializer;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Import;\nimport org.springframework.kafka.annotation.EnableKafka;\nimport org.springframework.kafka.config.ConcurrentKafkaListenerContainerFactory;\nimport org.springframework.kafka.core.ConsumerFactory;\nimport org.springframework.kafka.core.DefaultKafkaConsumerFactory;\nimport org.springframework.kafka.core.DefaultKafkaProducerFactory;\nimport org.springframework.kafka.core.KafkaAdmin;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.kafka.core.ProducerFactory;\nimport org.springframework.kafka.test.context.EmbeddedKafka;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.util.StringUtils;\n\nimport java.time.Duration;\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\nimport java.util.concurrent.TimeUnit;\n\nimport static org.junit.jupiter.api.Assertions.assertTrue;\n\n@SpringBootTest(classes = {KafkaConsumerService.class, KafkaProducerService.class})\n@Import(com.mbag.kafka.EmbeddedKafkaIntegrationTest.KafkaConfigurationTest.class)\n@DirtiesContext\n@EmbeddedKafka(partitions = 1, brokerProperties = {\n        &quot;listeners=PLAINTEXT://localhost:9092&quot;,\n        &quot;port=9092&quot;,\n        &quot;auto.create.topics.enable=true&quot;\n})\npublic class EmbeddedKafkaIntegrationTest {\n\n    @Autowired\n    private KafkaConsumerService consumer;\n\n    @Autowired\n    private KafkaProducerService producer;\n\n    @Value(&quot;${test.topic}&quot;)\n    private String topic;\n\n    @Test\n    public void givenEmbeddedKafkaBroker_whenSendingWithSimpleProducer_thenMessageReceived() throws Exception {\n        String data = &quot;Sending with our own simple KafkaProducer&quot;;\n\n        producer.send(topic, data);\n\n        boolean messageConsumed = consumer.getLatch().await(3, TimeUnit.SECONDS);\n\n        assertTrue(messageConsumed);\n        assertTrue(consumer.getPayload().contains(data));\n    }\n\n    @Configuration\n    @EnableKafka\n    static class KafkaConfigurationTest {\n\n        @Bean\n        public KafkaAdmin admin() {\n            Map&lt;String, Object&gt; configs = new HashMap&lt;&gt;();\n            configs.put(AdminClientConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n            return new KafkaAdmin(configs);\n        }\n\n        @Bean(&quot;kafkaListenerContainerFactory&quot;)\n        ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; kafkaListenerContainerFactory() {\n            ConcurrentKafkaListenerContainerFactory&lt;Integer, String&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n            factory.setConsumerFactory(consumerFactory());\n            factory.setRecordFilterStrategy(record -&gt; record.value().contains(&quot;test&quot;));\n            return factory;\n        }\n\n        @Bean\n        public ConsumerFactory&lt;Integer, String&gt; consumerFactory() {\n            return new DefaultKafkaConsumerFactory&lt;&gt;(consumerConfigs());\n        }\n\n        @Bean\n        public Map&lt;String, Object&gt; consumerConfigs() {\n            Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n            props.put(ConsumerConfig.ALLOW_AUTO_CREATE_TOPICS_CONFIG, &quot;false&quot;);\n            props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n            props.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;); // earliest latest\n            props.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;localtest&quot;);\n            props.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n            props.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class);\n            return props;\n        }\n\n        @Bean\n        public ProducerFactory&lt;String, String&gt; producerFactory() {\n            Map&lt;String, Object&gt; configProps = new HashMap&lt;&gt;();\n            configProps.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n            configProps.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n            configProps.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n            return new DefaultKafkaProducerFactory&lt;&gt;(configProps);\n        }\n\n        @Bean\n        public KafkaTemplate&lt;String, String&gt; kafkaTemplate() {\n            return new KafkaTemplate&lt;&gt;(producerFactory());\n        }\n\n    }\n\n}\n\n</code></pre>\n<p>KafkaConsumerService.java</p>\n<pre><code>package com.mbag.kafka;\n\nimport lombok.Data;\nimport org.apache.kafka.clients.consumer.ConsumerRecord;\nimport org.apache.kafka.clients.consumer.KafkaConsumer;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.kafka.annotation.KafkaListener;\nimport org.springframework.kafka.annotation.RetryableTopic;\nimport org.springframework.kafka.retrytopic.FixedDelayStrategy;\nimport org.springframework.retry.annotation.Backoff;\nimport org.springframework.stereotype.Component;\n\nimport java.util.concurrent.CountDownLatch;\n\n@Component\n@Data\npublic class KafkaConsumerService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(KafkaConsumer.class);\n\n    private CountDownLatch latch = new CountDownLatch(1);\n    private String payload;\n\n    @KafkaListener(topics = &quot;${test.topic}&quot;, groupId = &quot;localtest&quot;, containerFactory = &quot;kafkaListenerContainerFactory&quot;)\n    public void receive(ConsumerRecord&lt;?, ?&gt; consumerRecord) {\n        LOGGER.info(&quot;Received payload='{}'&quot;, consumerRecord.toString());\n        payload = consumerRecord.toString();\n        latch.countDown();\n    }\n\n    public void resetLatch() {\n        latch = new CountDownLatch(1);\n    }\n\n}\n\n</code></pre>\n<p>KafkaProducerService.java</p>\n<pre><code>package com.mbag.kafka;\n\nimport org.apache.kafka.clients.producer.KafkaProducer;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.kafka.core.KafkaTemplate;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class KafkaProducerService {\n\n    private static final Logger LOGGER = LoggerFactory.getLogger(KafkaProducer.class);\n\n    @Autowired\n    private KafkaTemplate&lt;String, String&gt; kafkaTemplate;\n\n    public void send(String topic, String payload) {\n        LOGGER.info(&quot;sending payload='{}' to topic='{}'&quot;, payload, topic);\n        kafkaTemplate.send(topic, payload);\n    }\n\n}\n\n</code></pre>\n<p>application.yml</p>\n<pre><code>spring:\n  kafka:\n    consumer:\n      auto-offset-reset: earliest\n      group-id: localtest\n      properties:\n        allow.auto.create.topics: false\ntest:\n  topic: embedded-test-topic\n  topic-test: testing-only\n</code></pre>\n<p>Based on above code changes, I did some testing by changing the flag between broker and consumer.</p>\n<ol>\n<li>If I changed the auto.create.topics.enable=false on broker level, the test case will failed due to unable to subscribe the topic. This is fine since expected the behavior.</li>\n<li>If I enable the auto.create.topics.enable=true, but I disabled the allow.auto.create.topics=false, the topic still auto created. This is not fine as unexpected behavior.</li>\n</ol>\n<p>I've checked the logs in console and debug mode, the property is indeed set to false. But things just don't work as expected.</p>\n<p>Above testing is using @EmbeddedKafka. I did tried to use TestContainers Kafka, and the result still the same. Not working.</p>\n<p>Can someone please advise if I make any incorrect changes here?</p>\n<p><strong>UPDATE:</strong>\nAfter some testing, it seems like the topic was created during the Producer part.\nI created a simple test cases for consume (without produce code), the topic didn't get created.\nI created another simple test cases for produce (without consume code), I saw the topic being created automatically.</p>\n<p>Does anyone know how do I disable the topic auto creation on producer? Or if this is intended feature?</p>\n<p>I'm understand I can disable the topic auto creation on broker level (auto.create.topics.enable=false). However, sometimes we may not allow to modify the properties on infra level.</p>\n"},{"tags":["java","plugins","minecraft","spigot"],"comments":[{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1686674543,"post_id":76465893,"comment_id":134830503,"body_markdown":"Use `custom` instead of `Custom`","body":"Use <code>custom</code> instead of <code>Custom</code>"},{"owner":{"account_id":28520537,"reputation":11,"user_id":21829297,"display_name":"Entropire"},"score":0,"creation_date":1686675432,"post_id":76465893,"comment_id":134830681,"body_markdown":"witch Custom do i need to change?","body":"witch Custom do i need to change?"},{"owner":{"account_id":15178500,"reputation":4190,"user_id":10952503,"display_name":"Elikill58"},"score":0,"creation_date":1686676129,"post_id":76465893,"comment_id":134830818,"body_markdown":"You should set it as lower case (the namespace key on your onEnable)","body":"You should set it as lower case (the namespace key on your onEnable)"},{"owner":{"account_id":28520537,"reputation":11,"user_id":21829297,"display_name":"Entropire"},"score":0,"creation_date":1686676782,"post_id":76465893,"comment_id":134830954,"body_markdown":"it worked but now the items don&#39;t go in the inventory if a file is saved with the same Id","body":"it worked but now the items don&#39;t go in the inventory if a file is saved with the same Id"}],"answers":[{"tags":[],"owner":{"account_id":17089178,"reputation":21,"user_id":12365707,"display_name":"BoboTheKnight"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686683858,"creation_date":1686683858,"answer_id":76468072,"question_id":76465893,"body_markdown":"This error info comes from here (NamespacedKey.java:84).\r\n```\r\nPreconditions.checkArgument(key != null &amp;&amp; isValidKey(key), &quot;Invalid key. Must be [a-z0-9/._-]: %s&quot;, key);\r\n```\r\n\r\nAnd there is a snippet of code that may be the reason. \r\n```\r\nprivate static boolean isValidKeyChar(char c) {\r\n    return isValidNamespaceChar(c) || c == &#39;/&#39;;\r\n}\r\n```\r\n\r\nTry to confirm your custom `OnEnable` methods in the custom file &quot;**CustomEntropireServer.java**&quot; with whether the parameter has &#39;/&#39; or it follows the `[a-z0-9/._-]` rule.","title":"java.lang.IllegalArgumentException: Invalid key. Must be [a-z0-9/._-]:","body":"<p>This error info comes from here (NamespacedKey.java:84).</p>\n<pre><code>Preconditions.checkArgument(key != null &amp;&amp; isValidKey(key), &quot;Invalid key. Must be [a-z0-9/._-]: %s&quot;, key);\n</code></pre>\n<p>And there is a snippet of code that may be the reason.</p>\n<pre><code>private static boolean isValidKeyChar(char c) {\n    return isValidNamespaceChar(c) || c == '/';\n}\n</code></pre>\n<p>Try to confirm your custom <code>OnEnable</code> methods in the custom file &quot;<strong>CustomEntropireServer.java</strong>&quot; with whether the parameter has '/' or it follows the <code>[a-z0-9/._-]</code> rule.</p>\n"}],"owner":{"account_id":28520537,"reputation":11,"user_id":21829297,"display_name":"Entropire"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686683858,"creation_date":1686665854,"question_id":76465893,"body_markdown":"I&#39;m making a plugin but when a start the server it gives this error massage\r\n\r\n\r\nError:\r\n\r\n```\r\n[16:43:41] [Server thread/ERROR]: Error occurred while enabling CustomServer v1.0-SNAPSHOT (Is it up to date?)\r\njava.lang.IllegalArgumentException: Invalid key. Must be [a-z0-9/._-]: Custom\r\n        at com.google.common.base.Preconditions.checkArgument(Preconditions.java:220) ~[guava-31.1-jre.jar:?]\r\n        at org.bukkit.NamespacedKey.&lt;init&gt;(NamespacedKey.java:84) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.NamespacedKey.minecraft(NamespacedKey.java:175) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at me.entropire.customserver.CustomServer.onEnable(CustomEntropireServer.java:30) ~[?:?]\r\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:266) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:342) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:480) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.enablePlugin(CraftServer.java:540) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.enablePlugins(CraftServer.java:454) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.reload(CraftServer.java:962) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at org.bukkit.Bukkit.reload(Bukkit.java:832) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:27) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:149) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.dispatchCommand(CraftServer.java:871) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at org.bukkit.craftbukkit.v1_20_R1.command.BukkitCommandWrapper.run(BukkitCommandWrapper.java:50) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:265) ~[spigot-1.20-R0.1-SNAPSHOT.jar:?]\r\n        at net.minecraft.commands.CommandDispatcher.performCommand(CommandDispatcher.java:314) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.commands.CommandDispatcher.a(CommandDispatcher.java:298) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.network.PlayerConnection.a(PlayerConnection.java:1960) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.network.PlayerConnection.lambda$18(PlayerConnection.java:1922) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.util.thread.IAsyncTaskHandler.b(SourceFile:67) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[?:?]\r\n        at net.minecraft.server.TickTask.run(SourceFile:18) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.util.thread.IAsyncTaskHandler.d(SourceFile:156) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.util.thread.IAsyncTaskHandlerReentrant.d(SourceFile:23) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.b(MinecraftServer.java:1152) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.d(MinecraftServer.java:1) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.util.thread.IAsyncTaskHandler.x(SourceFile:130) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.bg(MinecraftServer.java:1131) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.x(MinecraftServer.java:1124) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.util.thread.IAsyncTaskHandler.c(SourceFile:139) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.p_(MinecraftServer.java:1108) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:1019) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:304) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\r\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\r\n```\r\n\r\nCode:\r\n\r\n```\r\npackage me.user.customserver;\r\n\r\nimport org.bukkit.Bukkit;\r\nimport org.bukkit.Material;\r\nimport org.bukkit.configuration.file.FileConfiguration;\r\nimport org.bukkit.configuration.file.YamlConfiguration;\r\nimport org.bukkit.entity.Player;\r\nimport org.bukkit.event.EventHandler;\r\nimport org.bukkit.event.Listener;\r\nimport org.bukkit.event.inventory.InventoryCloseEvent;\r\nimport org.bukkit.event.player.PlayerInteractEvent;\r\nimport org.bukkit.inventory.Inventory;\r\nimport org.bukkit.inventory.ItemStack;\r\nimport org.bukkit.inventory.meta.ItemMeta;\r\n\r\nimport java.io.*;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\n\r\n\r\npublic class CoinBag implements Listener {\r\n    @EventHandler\r\n    public void OnPlayerInterect(PlayerInteractEvent event) {\r\n        Player player = event.getPlayer();\r\n\r\n        if (player.getInventory().getItemInMainHand().getType() == Material.LEATHER_HORSE_ARMOR){\r\n            if (player.getInventory().getItemInMainHand().getItemMeta().getCustomModelData() == 1015) {\r\n                ItemMeta meta = player.getInventory().getItemInMainHand().getItemMeta();\r\n                if (player.getInventory().getItemInMainHand().getItemMeta().hasLore()) {\r\n                    String id = meta.getLore().toString();\r\n                    id = id.replaceAll(&quot;C&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;i&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;o&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;n&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;b&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;a&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot;g&quot;, &quot;&quot;);\r\n                    id = id.replaceAll(&quot; &quot;, &quot;&quot;);\r\n                    String fileName = id + &quot;.yml&quot;;\r\n                        Inventory inv = Bukkit.createInventory(player, 18, &quot;CoinBag &quot; + id);\r\n\r\n                        File file = new File(&quot;plugins/CustomServer/&quot; + fileName);\r\n                        FileConfiguration config = YamlConfiguration.loadConfiguration(file);\r\n\r\n                        if (file.exists()){\r\n                            ItemStack[] contents = ((List&lt;ItemStack&gt;) config.get(&quot;CoinBag.contents&quot;)).toArray(new ItemStack[0]);\r\n                            inv.setContents(contents);\r\n                        }\r\n                    player.openInventory(inv);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    @EventHandler\r\n    private void onPlayerExitInv(InventoryCloseEvent e) throws IOException {\r\n        if (e.getView().getTitle().contains(&quot;CoinBag&quot;)){\r\n\r\n            String name_inv = e.getView().getTitle();\r\n            name_inv = name_inv.replaceAll(&quot;C&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;i&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;o&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;n&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;B&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;a&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot;g&quot;, &quot;&quot;);\r\n            name_inv = name_inv.replaceAll(&quot; &quot;, &quot;&quot;);\r\n            ItemStack[] contants = e.getInventory().getContents();\r\n\r\n            String fileName = name_inv + &quot;.yml&quot;;\r\n\r\n            File file = new File(&quot;plugins/CustomServer/&quot; + fileName);\r\n            FileConfiguration c = YamlConfiguration.loadConfiguration(file);\r\n            c.set(&quot;CoinBag.contents&quot;, contants);\r\n            c.save(file);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nthe Error is because of this part of the code:\r\n\r\n```\r\nid = id.replaceAll(&quot; &quot;, &quot;&quot;);\r\nname_inv = name_inv.replaceAll(&quot; &quot;, &quot;&quot;);\r\n```\r\n\r\nI have tried several ways to change special characters to nothing but the error does not go away.\r\nand if i remove this part of code and then the error goas away but my code breaks.\r\ncan anyone tell me why this Error comes.","title":"java.lang.IllegalArgumentException: Invalid key. Must be [a-z0-9/._-]:","body":"<p>I'm making a plugin but when a start the server it gives this error massage</p>\n<p>Error:</p>\n<pre><code>[16:43:41] [Server thread/ERROR]: Error occurred while enabling CustomServer v1.0-SNAPSHOT (Is it up to date?)\njava.lang.IllegalArgumentException: Invalid key. Must be [a-z0-9/._-]: Custom\n        at com.google.common.base.Preconditions.checkArgument(Preconditions.java:220) ~[guava-31.1-jre.jar:?]\n        at org.bukkit.NamespacedKey.&lt;init&gt;(NamespacedKey.java:84) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.NamespacedKey.minecraft(NamespacedKey.java:175) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at me.entropire.customserver.CustomServer.onEnable(CustomEntropireServer.java:30) ~[?:?]\n        at org.bukkit.plugin.java.JavaPlugin.setEnabled(JavaPlugin.java:266) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.plugin.java.JavaPluginLoader.enablePlugin(JavaPluginLoader.java:342) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.plugin.SimplePluginManager.enablePlugin(SimplePluginManager.java:480) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.enablePlugin(CraftServer.java:540) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.enablePlugins(CraftServer.java:454) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.reload(CraftServer.java:962) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at org.bukkit.Bukkit.reload(Bukkit.java:832) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.command.defaults.ReloadCommand.execute(ReloadCommand.java:27) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.command.SimpleCommandMap.dispatch(SimpleCommandMap.java:149) ~[spigot-api-1.20-R0.1-SNAPSHOT.jar:?]\n        at org.bukkit.craftbukkit.v1_20_R1.CraftServer.dispatchCommand(CraftServer.java:871) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at org.bukkit.craftbukkit.v1_20_R1.command.BukkitCommandWrapper.run(BukkitCommandWrapper.java:50) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at com.mojang.brigadier.CommandDispatcher.execute(CommandDispatcher.java:265) ~[spigot-1.20-R0.1-SNAPSHOT.jar:?]\n        at net.minecraft.commands.CommandDispatcher.performCommand(CommandDispatcher.java:314) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.commands.CommandDispatcher.a(CommandDispatcher.java:298) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.network.PlayerConnection.a(PlayerConnection.java:1960) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.network.PlayerConnection.lambda$18(PlayerConnection.java:1922) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.util.thread.IAsyncTaskHandler.b(SourceFile:67) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1768) ~[?:?]\n        at net.minecraft.server.TickTask.run(SourceFile:18) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.util.thread.IAsyncTaskHandler.d(SourceFile:156) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.util.thread.IAsyncTaskHandlerReentrant.d(SourceFile:23) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.b(MinecraftServer.java:1152) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.d(MinecraftServer.java:1) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.util.thread.IAsyncTaskHandler.x(SourceFile:130) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.bg(MinecraftServer.java:1131) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.x(MinecraftServer.java:1124) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.util.thread.IAsyncTaskHandler.c(SourceFile:139) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.p_(MinecraftServer.java:1108) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.w(MinecraftServer.java:1019) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at net.minecraft.server.MinecraftServer.lambda$0(MinecraftServer.java:304) ~[spigot-1.20-R0.1-SNAPSHOT.jar:3797-Spigot-7e2af8b-091027a]\n        at java.lang.Thread.run(Thread.java:833) ~[?:?]\n</code></pre>\n<p>Code:</p>\n<pre><code>package me.user.customserver;\n\nimport org.bukkit.Bukkit;\nimport org.bukkit.Material;\nimport org.bukkit.configuration.file.FileConfiguration;\nimport org.bukkit.configuration.file.YamlConfiguration;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.inventory.InventoryCloseEvent;\nimport org.bukkit.event.player.PlayerInteractEvent;\nimport org.bukkit.inventory.Inventory;\nimport org.bukkit.inventory.ItemStack;\nimport org.bukkit.inventory.meta.ItemMeta;\n\nimport java.io.*;\nimport java.util.Arrays;\nimport java.util.List;\n\n\npublic class CoinBag implements Listener {\n    @EventHandler\n    public void OnPlayerInterect(PlayerInteractEvent event) {\n        Player player = event.getPlayer();\n\n        if (player.getInventory().getItemInMainHand().getType() == Material.LEATHER_HORSE_ARMOR){\n            if (player.getInventory().getItemInMainHand().getItemMeta().getCustomModelData() == 1015) {\n                ItemMeta meta = player.getInventory().getItemInMainHand().getItemMeta();\n                if (player.getInventory().getItemInMainHand().getItemMeta().hasLore()) {\n                    String id = meta.getLore().toString();\n                    id = id.replaceAll(&quot;C&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;i&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;o&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;n&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;b&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;a&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot;g&quot;, &quot;&quot;);\n                    id = id.replaceAll(&quot; &quot;, &quot;&quot;);\n                    String fileName = id + &quot;.yml&quot;;\n                        Inventory inv = Bukkit.createInventory(player, 18, &quot;CoinBag &quot; + id);\n\n                        File file = new File(&quot;plugins/CustomServer/&quot; + fileName);\n                        FileConfiguration config = YamlConfiguration.loadConfiguration(file);\n\n                        if (file.exists()){\n                            ItemStack[] contents = ((List&lt;ItemStack&gt;) config.get(&quot;CoinBag.contents&quot;)).toArray(new ItemStack[0]);\n                            inv.setContents(contents);\n                        }\n                    player.openInventory(inv);\n\n                }\n            }\n        }\n    }\n\n    @EventHandler\n    private void onPlayerExitInv(InventoryCloseEvent e) throws IOException {\n        if (e.getView().getTitle().contains(&quot;CoinBag&quot;)){\n\n            String name_inv = e.getView().getTitle();\n            name_inv = name_inv.replaceAll(&quot;C&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;i&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;o&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;n&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;B&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;a&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot;g&quot;, &quot;&quot;);\n            name_inv = name_inv.replaceAll(&quot; &quot;, &quot;&quot;);\n            ItemStack[] contants = e.getInventory().getContents();\n\n            String fileName = name_inv + &quot;.yml&quot;;\n\n            File file = new File(&quot;plugins/CustomServer/&quot; + fileName);\n            FileConfiguration c = YamlConfiguration.loadConfiguration(file);\n            c.set(&quot;CoinBag.contents&quot;, contants);\n            c.save(file);\n        }\n    }\n}\n</code></pre>\n<p>the Error is because of this part of the code:</p>\n<pre><code>id = id.replaceAll(&quot; &quot;, &quot;&quot;);\nname_inv = name_inv.replaceAll(&quot; &quot;, &quot;&quot;);\n</code></pre>\n<p>I have tried several ways to change special characters to nothing but the error does not go away.\nand if i remove this part of code and then the error goas away but my code breaks.\ncan anyone tell me why this Error comes.</p>\n"},{"tags":["java","servlets","junit","mockito"],"comments":[{"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"score":0,"creation_date":1580113333,"post_id":59927146,"comment_id":105976828,"body_markdown":"What version of mocktio are you using? and also what version of the bytebuddy? bytebuddy library only added support for Java 13 class files June 2019 - https://github.com/raphw/byte-buddy/commit/9a23e6728cce3b38f0deccfc07e03d50e2fd3816","body":"What version of mocktio are you using? and also what version of the bytebuddy? bytebuddy library only added support for Java 13 class files June 2019 - <a href=\"https://github.com/raphw/byte-buddy/commit/9a23e6728cce3b38f0deccfc07e03d50e2fd3816\" rel=\"nofollow noreferrer\">github.com/raphw/byte-buddy/commit/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":16309793,"reputation":157,"user_id":11778766,"display_name":"Christine Shaji"},"score":0,"creation_date":1580120825,"post_id":59927478,"comment_id":105980523,"body_markdown":"Thanks for the answer...the corresponding error disappeared after updating the mockito version in the POM file.","body":"Thanks for the answer...the corresponding error disappeared after updating the mockito version in the POM file."}],"tags":[],"owner":{"account_id":483323,"reputation":36115,"user_id":898289,"accept_rate":92,"display_name":"Adam"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1580160261,"creation_date":1580114138,"answer_id":59927478,"question_id":59927146,"body_markdown":"This is almost certainly due to you using a version of Mockito which does not yet support Java 13 because of this error \r\n\r\n    Caused by: java.lang.IllegalArgumentException: Unknown Java version: 13\r\n\r\nIt is worth noting it is not Mockito itself that does not support Java 13 but an underlying library [byte-buddy][1] that is used for bytecode manipulation.\r\n\r\nOfficial bytebuddy/Mockito documentation doesn&#39;t appear to indicate exactly which version adds Java 13 support but it appears to have been added in [bytebuddy 1.9.7][2]\r\n\r\nMockito [3.2.2][3] updates the byte-buddy dependency to 1.10.5 so this should be sufficient.\r\n\r\n\r\n  [1]: https://bytebuddy.net/\r\n  [2]: https://javadoc.io/doc/net.bytebuddy/byte-buddy/1.9.7/net/bytebuddy/ClassFileVersion.html\r\n  [3]: https://github.com/mockito/mockito/releases/tag/v3.2.2","title":"Mockito cannot mock into this class","body":"<p>This is almost certainly due to you using a version of Mockito which does not yet support Java 13 because of this error </p>\n\n<pre><code>Caused by: java.lang.IllegalArgumentException: Unknown Java version: 13\n</code></pre>\n\n<p>It is worth noting it is not Mockito itself that does not support Java 13 but an underlying library <a href=\"https://bytebuddy.net/\" rel=\"nofollow noreferrer\">byte-buddy</a> that is used for bytecode manipulation.</p>\n\n<p>Official bytebuddy/Mockito documentation doesn't appear to indicate exactly which version adds Java 13 support but it appears to have been added in <a href=\"https://javadoc.io/doc/net.bytebuddy/byte-buddy/1.9.7/net/bytebuddy/ClassFileVersion.html\" rel=\"nofollow noreferrer\">bytebuddy 1.9.7</a></p>\n\n<p>Mockito <a href=\"https://github.com/mockito/mockito/releases/tag/v3.2.2\" rel=\"nofollow noreferrer\">3.2.2</a> updates the byte-buddy dependency to 1.10.5 so this should be sufficient.</p>\n"},{"tags":[],"owner":{"account_id":74886,"reputation":26643,"user_id":214977,"accept_rate":69,"display_name":"granadaCoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686683803,"creation_date":1686683803,"answer_id":76468064,"question_id":59927146,"body_markdown":"You might get error with a &quot;transitive dependency&quot;.\r\n\r\nMyJar1.jar\r\n\r\n    public interface ICooler\r\n    {\r\n      public CoolerThing makeACooler(String x);\r\n    \r\n    }\r\n\r\n..\r\n\r\nMyJar2.jar\r\n\r\n    public class CoolerThing\r\n    {\r\n    }\r\n\r\n\r\nIf your unit-test library tries to mock ICooler, it needs a reference to MyJar2.jar to be able to mock the method &quot;makeACooler&quot; because of the return type (or not shown input object type) of CoolerThing.\r\n\r\n\r\nNote, your MyJar1 and MyJar2 may be &quot;groupid/artifactid&quot; items from public maven, (or private maven, or &quot;jfrog&quot;, etc, etc).\r\n\r\n","title":"Mockito cannot mock into this class","body":"<p>You might get error with a &quot;transitive dependency&quot;.</p>\n<p>MyJar1.jar</p>\n<pre><code>public interface ICooler\n{\n  public CoolerThing makeACooler(String x);\n\n}\n</code></pre>\n<p>..</p>\n<p>MyJar2.jar</p>\n<pre><code>public class CoolerThing\n{\n}\n</code></pre>\n<p>If your unit-test library tries to mock ICooler, it needs a reference to MyJar2.jar to be able to mock the method &quot;makeACooler&quot; because of the return type (or not shown input object type) of CoolerThing.</p>\n<p>Note, your MyJar1 and MyJar2 may be &quot;groupid/artifactid&quot; items from public maven, (or private maven, or &quot;jfrog&quot;, etc, etc).</p>\n"}],"owner":{"account_id":16309793,"reputation":157,"user_id":11778766,"display_name":"Christine Shaji"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12837,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":59927478,"answer_count":2,"score":6,"last_activity_date":1686683803,"creation_date":1580112499,"question_id":59927146,"body_markdown":"I am trying to test my database project with unit test case with Junit and Mockito. But when i do it i am getting an error.. posting my code and stack trace. I am entirely new to testing . Kindly help \r\n\r\nNote * - I am not using any framework\r\n\r\n**Testing code**\r\n\r\n*patientTest.java*\r\n\r\n    package com.test;\r\n    \r\n    import static org.junit.Assert.*;\r\n    import static org.mockito.Mockito.*;\r\n    import java.io.*;\r\n    import javax.servlet.http.*;\r\n    import org.apache.commons.io.FileUtils;\r\n    import org.junit.Test;\r\n    import org.mockito.Mockito;\r\n    \r\n    import com.consentServlets.SaveServlet;\r\n    \r\n    public class patientTest extends Mockito{\r\n    \r\n        @Test\r\n        public void testServlet() throws Exception {\r\n            HttpServletRequest request = mock(HttpServletRequest.class);       \r\n            HttpServletResponse response = mock(HttpServletResponse.class);    \r\n    \r\n            when(request.getParameter(&quot;fname&quot;)).thenReturn(&quot;Rahul&quot;);\r\n            when(request.getParameter(&quot;lname&quot;)).thenReturn(&quot;Sen&quot;);\r\n    \r\n            StringWriter stringWriter = new StringWriter();\r\n            PrintWriter writer = new PrintWriter(stringWriter);\r\n            when(response.getWriter()).thenReturn(writer);\r\n    \r\n            new SaveServlet().doPost(request, response);\r\n    \r\n            verify(request, atLeast(1)).getParameter(&quot;fname&quot;); \r\n            writer.flush(); // it may not have been flushed yet...\r\n            assertTrue(stringWriter.toString().contains(&quot;My expected string&quot;));\r\n        }\r\n    }\r\n\r\n*SaveServlet.java*\r\n\r\n    package com.consentServlets;\r\n    \r\n    \r\n    import java.io.IOException;\r\n    import java.io.PrintWriter;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.annotation.WebServlet;\r\n    import javax.servlet.http.HttpServlet;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    @WebServlet(&quot;/SaveServlet&quot;)\r\n    public class SaveServlet extends HttpServlet {\r\n    \tpublic void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n    \t\tresponse.setContentType(&quot;text/html&quot;);\r\n    \t\tPrintWriter out=response.getWriter();\r\n    \t\t//Getting the attributes from the UI\r\n    \t\tString first_Name = request.getParameter(&quot;fname&quot;);\r\n    \t\tString last_Name = request.getParameter(&quot;lname&quot;);\r\n    \t\tString gender = request.getParameter(&quot;gender&quot;);\r\n    \t\tString age = request.getParameter(&quot;age&quot;);\r\n    \t\tString dob = request.getParameter(&quot;dob&quot;);\r\n    \t\t\r\n    \t\t//Setting the objects to insert the achieved attributes to corresponding the columns of the table\r\n    \t\tpatient addPatient = new patient();\r\n    \t\taddPatient.setLastName(last_Name);\r\n    \t\taddPatient.setFirstName(first_Name);\r\n    \t\taddPatient.setGender(gender);\r\n    \t\taddPatient.setAge(age);\r\n    \t\taddPatient.setDoB(dob);\r\n    \r\n    \t\tout.print(&quot; &lt;link rel=\\&quot;stylesheet\\&quot; href=\\&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css\\&quot;&gt;&quot;);\r\n    \t\t//calling the save function from the patientDao class to execute the query\r\n    \t\tint status=patientDao.save(addPatient);\r\n    \t\tif(status&gt;0){\r\n    \t\t\tout.print(&quot;&lt;p&gt;Patient Record saved successfully!&lt;/p&gt;&quot;);\r\n    \t\t\trequest.getRequestDispatcher(&quot;index.html&quot;).include(request, response);\r\n    \t\t}else{\r\n    \t\t\tout.println(&quot;Sorry! unable to save record&quot;);\r\n    \t\t}\r\n    \r\n    \t\tout.close();\r\n    \t}\r\n    \r\n    }\r\n\r\n*PatientDao.java*\r\n\r\n    package com.consentServlets;\r\n    import java.sql.Connection;\r\n    import java.sql.DriverManager;\r\n    import java.sql.PreparedStatement;\r\n    import java.sql.ResultSet;\r\n    import java.util.ArrayList;\r\n    import java.util.List; \r\n    \r\n    public class patientDao {\r\n    \t//establishing the connection with the database\r\n    \tpublic static Connection getConnection(){  \r\n    \t\tConnection con=null;  \r\n    \t\ttry{  \r\n    \t\t\tClass.forName(&quot;com.mysql.jdbc.Driver&quot;);\r\n    \t\t\tcon=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/consent_share&quot;,&quot;root&quot;,&quot;&quot;);\r\n    \t\t}catch(Exception e){System.out.println(e);}  \r\n    \t\treturn con;  \r\n    \t}  \r\n    \tpublic static int save(patient addPatient){  \r\n    \t\tint status = 0;  \r\n    \t\t//Inserting patient details from UI to Database\r\n    \t\ttry{  \t\t\t\t\t\t\t\r\n    \t\t\tConnection con = patientDao.getConnection();  \r\n    \t\t\tPreparedStatement ps = con.prepareStatement(  \r\n    \t\t\t\t\t&quot;insert into patient(last_name,first_name,gender,age,dob) values (?,?,?,?,?)&quot;);  \r\n    \t\t\tps.setString(1,addPatient.getLastName());  \r\n    \t\t\tps.setString(2,addPatient.getFirstName());  \r\n    \t\t\tps.setString(3,addPatient.getGender());  \r\n    \t\t\tps.setString(4,addPatient.getAge());\r\n    \t\t\tps.setString(5,addPatient.getDoB());\r\n    \r\n    \t\t\tstatus = ps.executeUpdate();  \r\n    \r\n    \t\t\tcon.close();  \r\n    \t\t}catch(Exception ex){ex.printStackTrace();}  \r\n    \r\n    \t\treturn status;  \r\n    \t}  \r\n    \r\n    \tpublic static patient getPatientbyId(int id){  \r\n    \t\tpatient getPatient = new patient();  \r\n    \t\t//selecting a patient record by matching the patient_ID \r\n    \t\ttry{ \r\n    \t\t\tConnection con = patientDao.getConnection();  \r\n    \t\t\tPreparedStatement ps = con.prepareStatement(&quot;select * from patient where patient_id=?&quot;);  \r\n    \t\t\tps.setInt(1,id);  \r\n    \t\t\tResultSet rs = ps.executeQuery();  \r\n    \t\t\tif(rs.next()){  \r\n    \t\t\t\tgetPatient.setId(rs.getInt(1));  \r\n    \t\t\t\tgetPatient.setLastName(rs.getString(2));  \r\n    \t\t\t\tgetPatient.setFirstName(rs.getString(3));  \r\n    \t\t\t\tgetPatient.setGender(rs.getString(4));  \r\n    \t\t\t\tgetPatient.setAge(rs.getString(5));\r\n    \t\t\t\tgetPatient.setDoB(rs.getString(6)); \r\n    \t\t\t}  \r\n    \t\t\tcon.close();  \r\n    \t\t}catch(Exception ex){ex.printStackTrace();}  \r\n    \r\n    \t\treturn getPatient;\r\n    \t}  \r\n    \t// Fetching all the records from table\r\n    \tpublic static List&lt;patient&gt; getAllPatients(){  \r\n    \t\tList&lt;patient&gt; list = new ArrayList&lt;patient&gt;();  \r\n    \r\n    \t\ttry{  \r\n    \t\t\tConnection con = patientDao.getConnection();  \r\n    \t\t\tPreparedStatement ps = con.prepareStatement(&quot;select * from patient&quot;);  \r\n    \t\t\tResultSet rs = ps.executeQuery();  \r\n    \t\t\twhile(rs.next()){  \r\n    \t\t\t\tpatient getAllPatients=new patient();  \r\n    \t\t\t\tgetAllPatients.setId(rs.getInt(1));  \r\n    \t\t\t\tgetAllPatients.setFirstName(rs.getString(3));  \r\n    \t\t\t\tgetAllPatients.setLastName(rs.getString(2));  \r\n    \t\t\t\tgetAllPatients.setGender(rs.getString(4));  \r\n    \t\t\t\tgetAllPatients.setAge(rs.getString(5));\r\n    \t\t\t\tgetAllPatients.setDoB(rs.getString(6));   \r\n    \t\t\t\tlist.add(getAllPatients);  \r\n    \t\t\t}  \r\n    \t\t\tcon.close();  \r\n    \t\t}catch(Exception e){e.printStackTrace();}  \r\n    \r\n    \t\treturn list;  \r\n    \t}  \r\n    }  \r\n\r\n**Stacktrace**\r\n\r\n        org.mockito.exceptions.base.MockitoException: \r\n    Mockito cannot mock this class: interface javax.servlet.http.HttpServletRequest.\r\n    \r\n    Mockito can only mock non-private &amp; non-final classes.\r\n    If you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.\r\n    \r\n    \r\n    Java               : 13\r\n    JVM vendor name    : Oracle Corporation\r\n    JVM vendor version : 13.0.1+9\r\n    JVM name           : Java HotSpot(TM) 64-Bit Server VM\r\n    JVM version        : 13.0.1+9\r\n    JVM info           : mixed mode, sharing\r\n    OS name            : Windows 10\r\n    OS version         : 10.0\r\n    \r\n    \r\n    Underlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection\r\n    \tat com.test.patientTest.testServlet(patientTest.java:17)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:567)\r\n    \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\r\n    \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\r\n    \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\r\n    \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\r\n    \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\r\n    \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\r\n    \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\r\n    \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\r\n    \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\r\n    \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\r\n    \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\r\n    \tat org.junit.runners.ParentRunner.run(ParentRunner.java:363)\r\n    \tat org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\r\n    \tat org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\r\n    \tat org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\r\n    Caused by: java.lang.UnsupportedOperationException: Cannot define class using reflection\r\n    \tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$Unavailable.defineClass(ClassInjector.java:821)\r\n    \tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.inject(ClassInjector.java:185)\r\n    \tat net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:187)\r\n    \tat net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:79)\r\n    \tat net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:4376)\r\n    \tat org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:94)\r\n    \tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:37)\r\n    \tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:34)\r\n    \tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:138)\r\n    \tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:346)\r\n    \tat net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:161)\r\n    \tat net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:355)\r\n    \tat org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:32)\r\n    \tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:71)\r\n    \tat org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:42)\r\n    \tat org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\r\n    \tat org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\r\n    \tat org.mockito.internal.MockitoCore.mock(MockitoCore.java:63)\r\n    \tat org.mockito.Mockito.mock(Mockito.java:1729)\r\n    \tat org.mockito.Mockito.mock(Mockito.java:1642)\r\n    \t... 24 more\r\n    Caused by: java.lang.IllegalArgumentException: Unknown Java version: 13\r\n    \tat net.bytebuddy.ClassFileVersion.ofJavaVersion(ClassFileVersion.java:135)\r\n    \tat net.bytebuddy.ClassFileVersion$VersionLocator$ForJava9CapableVm.locate(ClassFileVersion.java:337)\r\n    \tat net.bytebuddy.ClassFileVersion.ofThisVm(ClassFileVersion.java:147)\r\n    \tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$CreationAction.run(ClassInjector.java:301)\r\n    \tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$CreationAction.run(ClassInjector.java:290)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:312)\r\n    \tat net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.&lt;clinit&gt;(ClassInjector.java:70)\r\n    \tat net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:184)\r\n    \t... 41 more\r\n\r\n","title":"Mockito cannot mock into this class","body":"<p>I am trying to test my database project with unit test case with Junit and Mockito. But when i do it i am getting an error.. posting my code and stack trace. I am entirely new to testing . Kindly help </p>\n\n<p>Note * - I am not using any framework</p>\n\n<p><strong>Testing code</strong></p>\n\n<p><em>patientTest.java</em></p>\n\n<pre><code>package com.test;\n\nimport static org.junit.Assert.*;\nimport static org.mockito.Mockito.*;\nimport java.io.*;\nimport javax.servlet.http.*;\nimport org.apache.commons.io.FileUtils;\nimport org.junit.Test;\nimport org.mockito.Mockito;\n\nimport com.consentServlets.SaveServlet;\n\npublic class patientTest extends Mockito{\n\n    @Test\n    public void testServlet() throws Exception {\n        HttpServletRequest request = mock(HttpServletRequest.class);       \n        HttpServletResponse response = mock(HttpServletResponse.class);    \n\n        when(request.getParameter(\"fname\")).thenReturn(\"Rahul\");\n        when(request.getParameter(\"lname\")).thenReturn(\"Sen\");\n\n        StringWriter stringWriter = new StringWriter();\n        PrintWriter writer = new PrintWriter(stringWriter);\n        when(response.getWriter()).thenReturn(writer);\n\n        new SaveServlet().doPost(request, response);\n\n        verify(request, atLeast(1)).getParameter(\"fname\"); \n        writer.flush(); // it may not have been flushed yet...\n        assertTrue(stringWriter.toString().contains(\"My expected string\"));\n    }\n}\n</code></pre>\n\n<p><em>SaveServlet.java</em></p>\n\n<pre><code>package com.consentServlets;\n\n\nimport java.io.IOException;\nimport java.io.PrintWriter;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.annotation.WebServlet;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n@WebServlet(\"/SaveServlet\")\npublic class SaveServlet extends HttpServlet {\n    public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        response.setContentType(\"text/html\");\n        PrintWriter out=response.getWriter();\n        //Getting the attributes from the UI\n        String first_Name = request.getParameter(\"fname\");\n        String last_Name = request.getParameter(\"lname\");\n        String gender = request.getParameter(\"gender\");\n        String age = request.getParameter(\"age\");\n        String dob = request.getParameter(\"dob\");\n\n        //Setting the objects to insert the achieved attributes to corresponding the columns of the table\n        patient addPatient = new patient();\n        addPatient.setLastName(last_Name);\n        addPatient.setFirstName(first_Name);\n        addPatient.setGender(gender);\n        addPatient.setAge(age);\n        addPatient.setDoB(dob);\n\n        out.print(\" &lt;link rel=\\\"stylesheet\\\" href=\\\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.css\\\"&gt;\");\n        //calling the save function from the patientDao class to execute the query\n        int status=patientDao.save(addPatient);\n        if(status&gt;0){\n            out.print(\"&lt;p&gt;Patient Record saved successfully!&lt;/p&gt;\");\n            request.getRequestDispatcher(\"index.html\").include(request, response);\n        }else{\n            out.println(\"Sorry! unable to save record\");\n        }\n\n        out.close();\n    }\n\n}\n</code></pre>\n\n<p><em>PatientDao.java</em></p>\n\n<pre><code>package com.consentServlets;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.util.ArrayList;\nimport java.util.List; \n\npublic class patientDao {\n    //establishing the connection with the database\n    public static Connection getConnection(){  \n        Connection con=null;  \n        try{  \n            Class.forName(\"com.mysql.jdbc.Driver\");\n            con=DriverManager.getConnection(\"jdbc:mysql://localhost:3306/consent_share\",\"root\",\"\");\n        }catch(Exception e){System.out.println(e);}  \n        return con;  \n    }  \n    public static int save(patient addPatient){  \n        int status = 0;  \n        //Inserting patient details from UI to Database\n        try{                            \n            Connection con = patientDao.getConnection();  \n            PreparedStatement ps = con.prepareStatement(  \n                    \"insert into patient(last_name,first_name,gender,age,dob) values (?,?,?,?,?)\");  \n            ps.setString(1,addPatient.getLastName());  \n            ps.setString(2,addPatient.getFirstName());  \n            ps.setString(3,addPatient.getGender());  \n            ps.setString(4,addPatient.getAge());\n            ps.setString(5,addPatient.getDoB());\n\n            status = ps.executeUpdate();  \n\n            con.close();  \n        }catch(Exception ex){ex.printStackTrace();}  \n\n        return status;  \n    }  \n\n    public static patient getPatientbyId(int id){  \n        patient getPatient = new patient();  \n        //selecting a patient record by matching the patient_ID \n        try{ \n            Connection con = patientDao.getConnection();  \n            PreparedStatement ps = con.prepareStatement(\"select * from patient where patient_id=?\");  \n            ps.setInt(1,id);  \n            ResultSet rs = ps.executeQuery();  \n            if(rs.next()){  \n                getPatient.setId(rs.getInt(1));  \n                getPatient.setLastName(rs.getString(2));  \n                getPatient.setFirstName(rs.getString(3));  \n                getPatient.setGender(rs.getString(4));  \n                getPatient.setAge(rs.getString(5));\n                getPatient.setDoB(rs.getString(6)); \n            }  \n            con.close();  \n        }catch(Exception ex){ex.printStackTrace();}  \n\n        return getPatient;\n    }  \n    // Fetching all the records from table\n    public static List&lt;patient&gt; getAllPatients(){  \n        List&lt;patient&gt; list = new ArrayList&lt;patient&gt;();  \n\n        try{  \n            Connection con = patientDao.getConnection();  \n            PreparedStatement ps = con.prepareStatement(\"select * from patient\");  \n            ResultSet rs = ps.executeQuery();  \n            while(rs.next()){  \n                patient getAllPatients=new patient();  \n                getAllPatients.setId(rs.getInt(1));  \n                getAllPatients.setFirstName(rs.getString(3));  \n                getAllPatients.setLastName(rs.getString(2));  \n                getAllPatients.setGender(rs.getString(4));  \n                getAllPatients.setAge(rs.getString(5));\n                getAllPatients.setDoB(rs.getString(6));   \n                list.add(getAllPatients);  \n            }  \n            con.close();  \n        }catch(Exception e){e.printStackTrace();}  \n\n        return list;  \n    }  \n}  \n</code></pre>\n\n<p><strong>Stacktrace</strong></p>\n\n<pre><code>    org.mockito.exceptions.base.MockitoException: \nMockito cannot mock this class: interface javax.servlet.http.HttpServletRequest.\n\nMockito can only mock non-private &amp; non-final classes.\nIf you're not sure why you're getting this error, please report to the mailing list.\n\n\nJava               : 13\nJVM vendor name    : Oracle Corporation\nJVM vendor version : 13.0.1+9\nJVM name           : Java HotSpot(TM) 64-Bit Server VM\nJVM version        : 13.0.1+9\nJVM info           : mixed mode, sharing\nOS name            : Windows 10\nOS version         : 10.0\n\n\nUnderlying exception : java.lang.UnsupportedOperationException: Cannot define class using reflection\n    at com.test.patientTest.testServlet(patientTest.java:17)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:567)\n    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)\n    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)\n    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)\n    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)\n    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)\n    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)\n    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)\n    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)\n    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)\n    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)\n    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)\n    at org.junit.runners.ParentRunner.run(ParentRunner.java:363)\n    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:89)\n    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:41)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:541)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:763)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:463)\n    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:209)\nCaused by: java.lang.UnsupportedOperationException: Cannot define class using reflection\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$Unavailable.defineClass(ClassInjector.java:821)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.inject(ClassInjector.java:185)\n    at net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:187)\n    at net.bytebuddy.dynamic.TypeResolutionStrategy$Passive.initialize(TypeResolutionStrategy.java:79)\n    at net.bytebuddy.dynamic.DynamicType$Default$Unloaded.load(DynamicType.java:4376)\n    at org.mockito.internal.creation.bytebuddy.SubclassBytecodeGenerator.mockClass(SubclassBytecodeGenerator.java:94)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:37)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator$1.call(TypeCachingBytecodeGenerator.java:34)\n    at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:138)\n    at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:346)\n    at net.bytebuddy.TypeCache.findOrInsert(TypeCache.java:161)\n    at net.bytebuddy.TypeCache$WithInlineExpunction.findOrInsert(TypeCache.java:355)\n    at org.mockito.internal.creation.bytebuddy.TypeCachingBytecodeGenerator.mockClass(TypeCachingBytecodeGenerator.java:32)\n    at org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMockType(SubclassByteBuddyMockMaker.java:71)\n    at org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker.createMock(SubclassByteBuddyMockMaker.java:42)\n    at org.mockito.internal.creation.bytebuddy.ByteBuddyMockMaker.createMock(ByteBuddyMockMaker.java:25)\n    at org.mockito.internal.util.MockUtil.createMock(MockUtil.java:35)\n    at org.mockito.internal.MockitoCore.mock(MockitoCore.java:63)\n    at org.mockito.Mockito.mock(Mockito.java:1729)\n    at org.mockito.Mockito.mock(Mockito.java:1642)\n    ... 24 more\nCaused by: java.lang.IllegalArgumentException: Unknown Java version: 13\n    at net.bytebuddy.ClassFileVersion.ofJavaVersion(ClassFileVersion.java:135)\n    at net.bytebuddy.ClassFileVersion$VersionLocator$ForJava9CapableVm.locate(ClassFileVersion.java:337)\n    at net.bytebuddy.ClassFileVersion.ofThisVm(ClassFileVersion.java:147)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$CreationAction.run(ClassInjector.java:301)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection$Dispatcher$CreationAction.run(ClassInjector.java:290)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:312)\n    at net.bytebuddy.dynamic.loading.ClassInjector$UsingReflection.&lt;clinit&gt;(ClassInjector.java:70)\n    at net.bytebuddy.dynamic.loading.ClassLoadingStrategy$Default$InjectionDispatcher.load(ClassLoadingStrategy.java:184)\n    ... 41 more\n</code></pre>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"account_id":964210,"reputation":1018,"user_id":987959,"display_name":"PJ Fanning"},"score":0,"creation_date":1686784127,"post_id":76467978,"comment_id":134848489,"body_markdown":"cellIterator only returns cells that have values so it can skip empty cells. Try using a for loop to loop from 0 to row.getLastCellNum(). Inside the loop, call row.getCell(index, MissingCellPolicy.RETURN_BLANK_AS_NULL). If this returns null, you have an empty cell.","body":"cellIterator only returns cells that have values so it can skip empty cells. Try using a for loop to loop from 0 to row.getLastCellNum(). Inside the loop, call row.getCell(index, MissingCellPolicy.RETURN_BLANK_AS_NULL). If this returns null, you have an empty cell."}],"owner":{"account_id":27345585,"reputation":1,"user_id":20855533,"display_name":"Krish Savla"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686683616,"creation_date":1686682875,"question_id":76467978,"body_markdown":"I am trying to convert an excel sheet to a sql server database using apache poi on java, but I&#39;m running into a bug in doing this.\r\n\r\n```\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: The value is not set for the parameter number 2. \r\n```\r\n\r\nI am able to see the database on the sql server, but it is empty.\r\n\r\nI added debug statements to see where it was getting to and it gets through quite a bit of the excel sheet before throwing this error.\r\n\r\nAssume that the data is only strings or ints\r\n\r\nAny help would be appreciated\r\n\r\nhere is my code\r\n\r\n```\r\nString sql = &quot;INSERT INTO Purge_Temp ([Issue ID], [Service Order ID], [Service Order Status], [Service Order Priority], &quot;\r\n                    + &quot; [WH Order Number], [Region Network], [Asset Type], [Product Line], [Product ID], [Product Name], &quot;\r\n                    + &quot; [Product Part Number], [Server Generation], [Server Type], [Asset Serial Number], [Source Location Name], &quot;\r\n                    + &quot; [POP Name], [Destination Territory], [Destination Country], [Pop Id], [Logistics Coordinator], &quot;\r\n                    + &quot; [Day of Item Booked Date], [Day of Item Shipped Date], [Measure Names], [Service Order Age]) VALUES (?, ?, ?, &quot;\r\n                    + &quot; ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;;\r\n            PreparedStatement inputStatement = con.prepareStatement(sql); \r\n            \r\n            rowIterator.next(); // skip the header row\r\n            \r\n            while (rowIterator.hasNext()) {\r\n                Row nextRow = rowIterator.next();\r\n                Iterator&lt;Cell&gt; cellIterator = nextRow.cellIterator();\r\n                int count = 0;\r\n                while (cellIterator.hasNext()) {\r\n                    count++;\r\n                    \r\n                    Cell nextCell = cellIterator.next();\r\n                    int columnIndex = nextCell.getColumnIndex();\r\n                    \r\n                    if (nextCell.getCellType() == CellType.BLANK || nextCell.toString().isEmpty()) {\r\n                       inputStatement.setNull(columnIndex + 1, java.sql.Types.NULL);\r\n                    }\r\n                    else {\r\n                        try {\r\n                            if (nextCell.getCellType() == CellType.STRING) {\r\n                                String toInsert = nextCell.getStringCellValue();\r\n                                inputStatement.setString(columnIndex + 1, toInsert);\r\n                                 System.out.println(&quot;Cell Value: &quot; + nextCell.toString());\r\n                                    System.out.println(&quot;Column Index: &quot; + columnIndex);\r\n                            }\r\n                            else if (nextCell.getCellType() == CellType.NUMERIC) {\r\n                                double numericValue = nextCell.getNumericCellValue();\r\n                                int intValue = (int) numericValue;\r\n                                inputStatement.setInt(columnIndex + 1, intValue);\r\n                            }\r\n                        }\r\n                        catch(SQLException e) {\r\n                            int val = (int) nextCell.getNumericCellValue();\r\n                            String toInsert = Integer.toString(val);\r\n                            inputStatement.setString(columnIndex + 1, toInsert);\r\n                            System.out.println(e);\r\n                        }\r\n\r\n                    }\r\n                    inputStatement.addBatch();\r\n                 \r\n                    if (count % batchSize == 0) {\r\n                        inputStatement.executeBatch();\r\n                    } \r\n                    \r\n \r\n                }\r\n          \r\n                \r\n            }\r\n            workbook.close();\r\n             \r\n            // execute the remaining queries\r\n            inputStatement.executeBatch();\r\n```","title":"Converting excel file to SQL server database ERROR: com.microsoft.sqlserver.jdbc.SQLServerException: The value is not set for the parameter number 2","body":"<p>I am trying to convert an excel sheet to a sql server database using apache poi on java, but I'm running into a bug in doing this.</p>\n<pre><code>com.microsoft.sqlserver.jdbc.SQLServerException: The value is not set for the parameter number 2. \n</code></pre>\n<p>I am able to see the database on the sql server, but it is empty.</p>\n<p>I added debug statements to see where it was getting to and it gets through quite a bit of the excel sheet before throwing this error.</p>\n<p>Assume that the data is only strings or ints</p>\n<p>Any help would be appreciated</p>\n<p>here is my code</p>\n<pre><code>String sql = &quot;INSERT INTO Purge_Temp ([Issue ID], [Service Order ID], [Service Order Status], [Service Order Priority], &quot;\n                    + &quot; [WH Order Number], [Region Network], [Asset Type], [Product Line], [Product ID], [Product Name], &quot;\n                    + &quot; [Product Part Number], [Server Generation], [Server Type], [Asset Serial Number], [Source Location Name], &quot;\n                    + &quot; [POP Name], [Destination Territory], [Destination Country], [Pop Id], [Logistics Coordinator], &quot;\n                    + &quot; [Day of Item Booked Date], [Day of Item Shipped Date], [Measure Names], [Service Order Age]) VALUES (?, ?, ?, &quot;\n                    + &quot; ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)&quot;;\n            PreparedStatement inputStatement = con.prepareStatement(sql); \n            \n            rowIterator.next(); // skip the header row\n            \n            while (rowIterator.hasNext()) {\n                Row nextRow = rowIterator.next();\n                Iterator&lt;Cell&gt; cellIterator = nextRow.cellIterator();\n                int count = 0;\n                while (cellIterator.hasNext()) {\n                    count++;\n                    \n                    Cell nextCell = cellIterator.next();\n                    int columnIndex = nextCell.getColumnIndex();\n                    \n                    if (nextCell.getCellType() == CellType.BLANK || nextCell.toString().isEmpty()) {\n                       inputStatement.setNull(columnIndex + 1, java.sql.Types.NULL);\n                    }\n                    else {\n                        try {\n                            if (nextCell.getCellType() == CellType.STRING) {\n                                String toInsert = nextCell.getStringCellValue();\n                                inputStatement.setString(columnIndex + 1, toInsert);\n                                 System.out.println(&quot;Cell Value: &quot; + nextCell.toString());\n                                    System.out.println(&quot;Column Index: &quot; + columnIndex);\n                            }\n                            else if (nextCell.getCellType() == CellType.NUMERIC) {\n                                double numericValue = nextCell.getNumericCellValue();\n                                int intValue = (int) numericValue;\n                                inputStatement.setInt(columnIndex + 1, intValue);\n                            }\n                        }\n                        catch(SQLException e) {\n                            int val = (int) nextCell.getNumericCellValue();\n                            String toInsert = Integer.toString(val);\n                            inputStatement.setString(columnIndex + 1, toInsert);\n                            System.out.println(e);\n                        }\n\n                    }\n                    inputStatement.addBatch();\n                 \n                    if (count % batchSize == 0) {\n                        inputStatement.executeBatch();\n                    } \n                    \n \n                }\n          \n                \n            }\n            workbook.close();\n             \n            // execute the remaining queries\n            inputStatement.executeBatch();\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","kafka-producer-api","opensearch"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1686683502,"post_id":76465939,"comment_id":134832269,"body_markdown":"https://idownvotedbecau.se/noattempt","body":"<a href=\"https://idownvotedbecau.se/noattempt\" rel=\"nofollow noreferrer\">idownvotedbecau.se/noattempt</a>"},{"owner":{"display_name":"user20174493"},"score":0,"creation_date":1686733532,"post_id":76465939,"comment_id":134838436,"body_markdown":"You&#39;re right mate but it&#39;s been like 2 days of search and i found nothing, except for this i build the project so a little bit of work it&#39;s done, however i appreciate your time, blessings!","body":"You&#39;re right mate but it&#39;s been like 2 days of search and i found nothing, except for this i build the project so a little bit of work it&#39;s done, however i appreciate your time, blessings!"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1686748151,"post_id":76465939,"comment_id":134841659,"body_markdown":"So, searching &quot;opensearch Kafka Connector&quot; returns zero results? Or how about &quot;write document to opensearch with Java&quot;?","body":"So, searching &quot;opensearch Kafka Connector&quot; returns zero results? Or how about &quot;write document to opensearch with Java&quot;?"}],"answers":[{"comments":[{"owner":{"display_name":"user20174493"},"score":0,"creation_date":1686733682,"post_id":76468031,"comment_id":134838468,"body_markdown":"In the Git repo it says to place &quot;opensearch-connector-for-kafka&quot; into &quot;/kafka-connect-plugins&quot;, but how am i supposed to do if in my kafka folder ther aren&#39;t any references about &quot;kafka-connect-plugins? Sorry but i&#39;m newbie, thx 4 ur time!","body":"In the Git repo it says to place &quot;opensearch-connector-for-kafka&quot; into &quot;/kafka-connect-plugins&quot;, but how am i supposed to do if in my kafka folder ther aren&#39;t any references about &quot;kafka-connect-plugins? Sorry but i&#39;m newbie, thx 4 ur time!"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1686748049,"post_id":76468031,"comment_id":134841628,"body_markdown":"You can create any folder name you want for `plugin.path` kafka connect config","body":"You can create any folder name you want for <code>plugin.path</code> kafka connect config"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1686683477,"creation_date":1686683477,"answer_id":76468031,"question_id":76465939,"body_markdown":"There exists a Kafka Connector for OpenSearch. You do not need to write code for this (nor should you). \r\n\r\nhttps://github.com/aiven/opensearch-connector-for-apache-kafka\r\n\r\nKafka Connect is a Java Framework... \r\n\r\nRegarding Docker, see https://docs.confluent.io/platform/current/connect/extending.html\r\n\r\nOtherwise, Opensearch has a REST API, so you&#39;d write a Kafka Consumer process to write data to it rather than just printing to the console","title":"Is it possible to send messages from Kafka to Open Search?","body":"<p>There exists a Kafka Connector for OpenSearch. You do not need to write code for this (nor should you).</p>\n<p><a href=\"https://github.com/aiven/opensearch-connector-for-apache-kafka\" rel=\"nofollow noreferrer\">https://github.com/aiven/opensearch-connector-for-apache-kafka</a></p>\n<p>Kafka Connect is a Java Framework...</p>\n<p>Regarding Docker, see <a href=\"https://docs.confluent.io/platform/current/connect/extending.html\" rel=\"nofollow noreferrer\">https://docs.confluent.io/platform/current/connect/extending.html</a></p>\n<p>Otherwise, Opensearch has a REST API, so you'd write a Kafka Consumer process to write data to it rather than just printing to the console</p>\n"}],"owner":{"display_name":"user20174493"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":472,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76468031,"answer_count":1,"score":-1,"last_activity_date":1686683477,"creation_date":1686666116,"question_id":76465939,"body_markdown":"i&#39;m writing a service using Java, i&#39;m learning so it is for study purpose.\r\nI wrote my rest app and it&#39;s working fine, then i added kafka that&#39;s sending a message to a consumer every time i do a request through insomnia and it&#39;s working.\r\nNow the problem is that i have to store the message from the consumer to Open Search running inside Docker, (only using Java, without Spring Boot ecc...) is there a way to do it? I can&#39;t find anything.\r\n\r\nThat&#39;s my Consumer:\r\n\r\n    String servers = &quot;localhost:9092&quot;;\r\n        String groupId = &quot;id&quot;;\r\n        String topic = &quot;mytopic&quot;;\r\n\r\n        Properties properties = new Properties();\r\n        properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\r\n        properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);\r\n        properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\r\n        KafkaConsumer&lt;String, String&gt; kafkaConsumer = new KafkaConsumer&lt;&gt;(properties);\r\n        kafkaConsumer.subscribe(Arrays.asList(topic));\r\n\r\n        Logger logger = LoggerFactory.getLogger(Main.class.getName());\r\n\r\n        while (true) {\r\n            ConsumerRecords&lt;String, String&gt; records = kafkaConsumer.poll(Duration.ofMillis(3000));\r\n            for (ConsumerRecord&lt;String, String&gt; record : records) {\r\n                logger.info(&quot;Key:&quot; + record.key() + &quot;, Value:&quot; + record.value());\r\n                logger.info(&quot;Partition:&quot; + record.partition() + &quot;, Offset:&quot; + record.offset());\r\n            }\r\n        }\r\n\r\nAnd that&#39;s my producer:\r\n\r\n    Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer);\r\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\r\n\r\n        KafkaProducer&lt;String, String&gt; kafkaProducer = new KafkaProducer&lt;&gt;(properties);\r\n\r\n        ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(&quot;mytopic&quot;, null, message);\r\n        kafkaProducer.send(record);\r\n        kafkaProducer.flush();\r\n        kafkaProducer.close();\r\n\r\nEDIT: I forgot to tell that i already have Open Search up on Docker and already created an index, i have to insert the message i&#39;m going mad.. ","title":"Is it possible to send messages from Kafka to Open Search?","body":"<p>i'm writing a service using Java, i'm learning so it is for study purpose.\nI wrote my rest app and it's working fine, then i added kafka that's sending a message to a consumer every time i do a request through insomnia and it's working.\nNow the problem is that i have to store the message from the consumer to Open Search running inside Docker, (only using Java, without Spring Boot ecc...) is there a way to do it? I can't find anything.</p>\n<p>That's my Consumer:</p>\n<pre><code>String servers = &quot;localhost:9092&quot;;\n    String groupId = &quot;id&quot;;\n    String topic = &quot;mytopic&quot;;\n\n    Properties properties = new Properties();\n    properties.setProperty(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, servers);\n    properties.setProperty(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    properties.setProperty(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    properties.setProperty(ConsumerConfig.GROUP_ID_CONFIG, groupId);\n    properties.setProperty(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n\n    KafkaConsumer&lt;String, String&gt; kafkaConsumer = new KafkaConsumer&lt;&gt;(properties);\n    kafkaConsumer.subscribe(Arrays.asList(topic));\n\n    Logger logger = LoggerFactory.getLogger(Main.class.getName());\n\n    while (true) {\n        ConsumerRecords&lt;String, String&gt; records = kafkaConsumer.poll(Duration.ofMillis(3000));\n        for (ConsumerRecord&lt;String, String&gt; record : records) {\n            logger.info(&quot;Key:&quot; + record.key() + &quot;, Value:&quot; + record.value());\n            logger.info(&quot;Partition:&quot; + record.partition() + &quot;, Offset:&quot; + record.offset());\n        }\n    }\n</code></pre>\n<p>And that's my producer:</p>\n<pre><code>Properties properties = new Properties();\n    properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaServer);\n    properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n    properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, StringSerializer.class.getName());\n\n    KafkaProducer&lt;String, String&gt; kafkaProducer = new KafkaProducer&lt;&gt;(properties);\n\n    ProducerRecord&lt;String, String&gt; record = new ProducerRecord&lt;&gt;(&quot;mytopic&quot;, null, message);\n    kafkaProducer.send(record);\n    kafkaProducer.flush();\n    kafkaProducer.close();\n</code></pre>\n<p>EDIT: I forgot to tell that i already have Open Search up on Docker and already created an index, i have to insert the message i'm going mad..</p>\n"},{"tags":["java","android","firebase","android-studio","kotlin"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1686624208,"post_id":76461080,"comment_id":134821098,"body_markdown":"Did you even read the error message?","body":"Did you even read the error message?"}],"answers":[{"comments":[{"owner":{"account_id":8483271,"reputation":624,"user_id":6362346,"accept_rate":50,"display_name":"marlonpya"},"score":0,"creation_date":1694549191,"post_id":76467950,"comment_id":135905170,"body_markdown":"the news projects in A.S. they come with only plugins","body":"the news projects in A.S. they come with only plugins"}],"tags":[],"owner":{"account_id":11474570,"reputation":79,"user_id":8410413,"display_name":"hammad"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686682654,"creation_date":1686682654,"answer_id":76467950,"question_id":76461080,"body_markdown":"Simply remove the buildscript{} block and add it on top of plugins{} block, Like this:\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    repositories {\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n    dependencies {// Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\nallprojects {\r\n    repositories {// Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n```\r\nAlways remember that buildscript{} block should be on top of plugins{} block.\r\n","title":"all buildscript {} blocks must appear before any plugins {} blocks in the script :8 ~ Android Studio","body":"<p>Simply remove the buildscript{} block and add it on top of plugins{} block, Like this:</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n    dependencies {// Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\n\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\nallprojects {\n    repositories {// Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n}\n</code></pre>\n<p>Always remember that buildscript{} block should be on top of plugins{} block.</p>\n"}],"owner":{"account_id":28808432,"reputation":1,"user_id":22063719,"display_name":"Niru 15"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":287,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1686682654,"creation_date":1686617171,"question_id":76461080,"body_markdown":"I am creating an application using Java and connecting the database to Firebase. I am getting this error in the build file. Please help me to solve this error.\r\nI can&#39;t understand the error message please explain me to solve it.\r\nError &#128071;&#128071;&#128071;\r\n```\r\nBuild file &#39;D:\\MyWeb\\build.gradle&#39; line: 7\r\n\r\nCould not compile build file &#39;D:\\MyWeb\\build.gradle&#39;.\r\n&gt; startup failed:\r\n  build file &#39;D:\\MyWeb\\build.gradle&#39;: 7: all buildscript {} blocks must appear before any plugins {} blocks in the script\r\n\r\n\r\nbuild.grable(My Web)\r\n\r\n```\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\nbuildscript {\r\n    repositories {\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n    dependencies {// Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\nallprojects {\r\n    repositories {// Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n\r\n```\r\n\r\nbuild.gradle (:app)\r\n\r\n```\r\n// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nplugins {\r\n    id &#39;com.android.application&#39; version &#39;8.0.2&#39; apply false\r\n    id &#39;com.android.library&#39; version &#39;8.0.2&#39; apply false\r\n}\r\n\r\nbuildscript {\r\n    repositories {\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n    dependencies {// Add the dependency for the Google services Gradle plugin\r\n        classpath &#39;com.google.gms:google-services:4.3.15&#39;\r\n    }\r\n}\r\nallprojects {\r\n    repositories {// Make sure that you have the following two repositories\r\n        google()  // Google&#39;s Maven repository\r\n        mavenCentral()  // Maven Central repository\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nI&#39;m trying to connect my Android Studio project to Firebase, but I get an error with the build.gradle. Not sure how to fix it.","title":"all buildscript {} blocks must appear before any plugins {} blocks in the script :8 ~ Android Studio","body":"<p>I am creating an application using Java and connecting the database to Firebase. I am getting this error in the build file. Please help me to solve this error.\nI can't understand the error message please explain me to solve it.\nError 👇👇👇</p>\n<pre><code>Build file 'D:\\MyWeb\\build.gradle' line: 7\n\nCould not compile build file 'D:\\MyWeb\\build.gradle'.\n&gt; startup failed:\n  build file 'D:\\MyWeb\\build.gradle': 7: all buildscript {} blocks must appear before any plugins {} blocks in the script\n\n\nbuild.grable(My Web)\n\n</code></pre>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\nbuildscript {\n    repositories {\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n    dependencies {// Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\nallprojects {\n    repositories {// Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n}\n\n</code></pre>\n<p>build.gradle (:app)</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nplugins {\n    id 'com.android.application' version '8.0.2' apply false\n    id 'com.android.library' version '8.0.2' apply false\n}\n\nbuildscript {\n    repositories {\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n    dependencies {// Add the dependency for the Google services Gradle plugin\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\nallprojects {\n    repositories {// Make sure that you have the following two repositories\n        google()  // Google's Maven repository\n        mavenCentral()  // Maven Central repository\n    }\n}\n</code></pre>\n<p>I'm trying to connect my Android Studio project to Firebase, but I get an error with the build.gradle. Not sure how to fix it.</p>\n"},{"tags":["javascript","java","angularjs","spring","spring-mvc"],"answers":[{"comments":[{"owner":{"account_id":2188107,"reputation":3196,"user_id":1935987,"accept_rate":63,"display_name":"user1935987"},"score":2,"creation_date":1472057259,"post_id":39128028,"comment_id":65603240,"body_markdown":"sorry, but my question was about the separation. I know, what it will be better to separate on this stage. further - more mess. Your answer is not answering the question at all.","body":"sorry, but my question was about the separation. I know, what it will be better to separate on this stage. further - more mess. Your answer is not answering the question at all."},{"owner":{"account_id":2188107,"reputation":3196,"user_id":1935987,"accept_rate":63,"display_name":"user1935987"},"score":0,"creation_date":1472312541,"post_id":39128028,"comment_id":65707269,"body_markdown":"Seriously, you&#39;re just talking about making Spring + AngularJS app. And this is not the question. You can just remove your answer then.","body":"Seriously, you&#39;re just talking about making Spring + AngularJS app. And this is not the question. You can just remove your answer then."},{"owner":{"account_id":8458653,"reputation":99,"user_id":6345100,"accept_rate":80,"display_name":"javaGirl243"},"score":0,"creation_date":1472317917,"post_id":39128028,"comment_id":65708812,"body_markdown":"Wow, @user1935987.  So much for trying to help. I&#39;ll still leave my answer there.","body":"Wow, @user1935987.  So much for trying to help. I&#39;ll still leave my answer there."},{"owner":{"account_id":2188107,"reputation":3196,"user_id":1935987,"accept_rate":63,"display_name":"user1935987"},"score":1,"creation_date":1472354171,"post_id":39128028,"comment_id":65716456,"body_markdown":"Thank you for help, but your answer is really not relevant.","body":"Thank you for help, but your answer is really not relevant."}],"tags":[],"owner":{"account_id":8458653,"reputation":99,"user_id":6345100,"accept_rate":80,"display_name":"javaGirl243"},"comment_count":4,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1472279605,"creation_date":1472054409,"answer_id":39128028,"question_id":39121156,"body_markdown":"The &quot;MVC&quot; is Spring MVC stands for Model View Controller. The &quot;view&quot; could be html or jsp (you would specify the view details in your servlet). You would not need to deploy them separately. How are you building your project? Maven is a good idea. It will wrap all your front-end and back-end code into a war/jar file and then you&#39;d jus have to deploy it on a server.\r\n\r\nYour AngularJS code would be incorporated in your spring &quot;views&quot; and the JS part of it would sit in your app.js. So there is no need to keep them separate. Your front-end guy could write the front-end code and you&#39;d just have to integrate it into your project before building and deploying.\r\n\r\nHowever, if you absolutely must separate them, there&#39;s only one option I can think of. Place all your UI code(HTML, CSS, JS) in a folder(let&#39;s call it &#39;**project**&#39;) in the &quot;webapp&quot; folder in Tomcat along with the war file(let&#39;s call it **project-war.war**). When deployed, you just have to ensure that your URLs are correctly mapped. For example, if app.js(residing in project/js/app.js) wants to call the Java service for `/controller/action`, the URL must be `../../../project-war/controller/action`.","title":"Spring MVC AngularJS separate front-end with back-end","body":"<p>The \"MVC\" is Spring MVC stands for Model View Controller. The \"view\" could be html or jsp (you would specify the view details in your servlet). You would not need to deploy them separately. How are you building your project? Maven is a good idea. It will wrap all your front-end and back-end code into a war/jar file and then you'd jus have to deploy it on a server.</p>\n\n<p>Your AngularJS code would be incorporated in your spring \"views\" and the JS part of it would sit in your app.js. So there is no need to keep them separate. Your front-end guy could write the front-end code and you'd just have to integrate it into your project before building and deploying.</p>\n\n<p>However, if you absolutely must separate them, there's only one option I can think of. Place all your UI code(HTML, CSS, JS) in a folder(let's call it '<strong>project</strong>') in the \"webapp\" folder in Tomcat along with the war file(let's call it <strong>project-war.war</strong>). When deployed, you just have to ensure that your URLs are correctly mapped. For example, if app.js(residing in project/js/app.js) wants to call the Java service for <code>/controller/action</code>, the URL must be <code>../../../project-war/controller/action</code>.</p>\n"},{"comments":[{"owner":{"account_id":2188107,"reputation":3196,"user_id":1935987,"accept_rate":63,"display_name":"user1935987"},"score":0,"creation_date":1472181310,"post_id":39146071,"comment_id":65659047,"body_markdown":"also not a complete answer.","body":"also not a complete answer."}],"tags":[],"owner":{"account_id":7505273,"reputation":1,"user_id":5702013,"display_name":"Song Chang"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472130059,"creation_date":1472130059,"answer_id":39146071,"question_id":39121156,"body_markdown":"\byou can deploy frontend project on node or lite server or apache, get/post data from tomcat which run the Spring MVC, you may\b have cross-domain problems, You can use\r\n\r\n`\t&lt;mvc:cors&gt;\r\n\t\t&lt;mvc:mapping path=&quot;/**&quot; /&gt;\r\n\t&lt;/mvc:cors&gt;`\r\n\r\nto solve the cross-domain problems.","title":"Spring MVC AngularJS separate front-end with back-end","body":"<p>you can deploy frontend project on node or lite server or apache, get/post data from tomcat which run the Spring MVC, you may have cross-domain problems, You can use</p>\n\n<p><code>&lt;mvc:cors&gt;\n        &lt;mvc:mapping path=\"/**\" /&gt;\n    &lt;/mvc:cors&gt;</code></p>\n\n<p>to solve the cross-domain problems.</p>\n"},{"tags":[],"owner":{"account_id":905829,"reputation":528,"user_id":940759,"display_name":"sedrakpc"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686682536,"creation_date":1472563933,"answer_id":39228951,"question_id":39121156,"body_markdown":"I think the only reason to separate angularJS app and deploy separately if your application is very large and backend build takes a lot of time(10+ mins), or you do not want to rebuild entire application every time for any good reason. Putting angularJS application under spring MVC even if it&#39;s only main page gives you a lot of advantages: you can use spring ecosystem, centralized security, login and access control, SSO, lot of integrations, spring social etc..\r\nNot sure why you really need to separate them into 2 apps. But anyway.\r\n\r\n1) If you want to separate angularJS app you need to move any logic about routing from controllers or jsp files to angularjs app. Implement token base auth/login. Then you can define **REST_BASE_URL** constant in constant block of angular and use everywhere($http, $resource) to generate request url. If you work basically on angular part you can setup backend on remote server and run only angular application locally using nginx or any tiny server, and work on Google Chrome(make sure you run chrome using this agruments: **--args --disable-web-security --user-data-dir ~/**). Unfortunately you can&#39;t disable CSRF check in Firefox.\r\n\r\n2) You can build and deploy 2 apps separately which is nice.\r\n\r\n3) You also need to create your own **AuthenticationEntryPoint** and return **SC_UNAUTHORIZED**(401) instead of login page in spring rest. If angular side you can add global interceptor to catch 401 and show login page or dialog like this:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    .factory(&#39;authHttpResponseInterceptor&#39;,[&#39;$q&#39;,&#39;$location&#39;,function($q,$location){\r\n            return {\r\n                response: function(response){\r\n                    if (response.status === 401) {\r\n                        console.log(&quot;Response 401&quot;);\r\n                    }\r\n                    return response || $q.when(response);\r\n                },\r\n                responseError: function(rejection) {\r\n                    if (rejection.status === 401) {\r\n                        window.location.reload();\r\n                    }\r\n                    return $q.reject(rejection);\r\n                }\r\n            }\r\n        }])\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Spring MVC AngularJS separate front-end with back-end","body":"<p>I think the only reason to separate angularJS app and deploy separately if your application is very large and backend build takes a lot of time(10+ mins), or you do not want to rebuild entire application every time for any good reason. Putting angularJS application under spring MVC even if it's only main page gives you a lot of advantages: you can use spring ecosystem, centralized security, login and access control, SSO, lot of integrations, spring social etc..\nNot sure why you really need to separate them into 2 apps. But anyway.</p>\n<ol>\n<li><p>If you want to separate angularJS app you need to move any logic about routing from controllers or jsp files to angularjs app. Implement token base auth/login. Then you can define <strong>REST_BASE_URL</strong> constant in constant block of angular and use everywhere($http, $resource) to generate request url. If you work basically on angular part you can setup backend on remote server and run only angular application locally using nginx or any tiny server, and work on Google Chrome(make sure you run chrome using this agruments: <strong>--args --disable-web-security --user-data-dir ~/</strong>). Unfortunately you can't disable CSRF check in Firefox.</p>\n</li>\n<li><p>You can build and deploy 2 apps separately which is nice.</p>\n</li>\n<li><p>You also need to create your own <strong>AuthenticationEntryPoint</strong> and return <strong>SC_UNAUTHORIZED</strong>(401) instead of login page in spring rest. If angular side you can add global interceptor to catch 401 and show login page or dialog like this:</p>\n</li>\n</ol>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>.factory('authHttpResponseInterceptor',['$q','$location',function($q,$location){\n        return {\n            response: function(response){\n                if (response.status === 401) {\n                    console.log(\"Response 401\");\n                }\n                return response || $q.when(response);\n            },\n            responseError: function(rejection) {\n                if (rejection.status === 401) {\n                    window.location.reload();\n                }\n                return $q.reject(rejection);\n            }\n        }\n    }])</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":2188107,"reputation":3196,"user_id":1935987,"accept_rate":63,"display_name":"user1935987"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2529,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"answer_count":3,"score":2,"last_activity_date":1686682536,"creation_date":1472035521,"question_id":39121156,"body_markdown":"I have a pretty big Spring MVC + AngularJS app. Spring MVC mostly work as the REST API, but not completely (security, some routing, Wro4j resources packing)\r\nat the time i started it&#39;s development, wasn&#39;t experienced much in Web Projects.\r\n\r\nApp is deployed on Amazon Elasticbeanstalk.\r\n\r\nThe Front-end guy joins me and we have to separate the dev process somehow.\r\n\r\n**The Qeustions are:**\r\n\r\n 1. What is the basic steps i have do to separate them into the 2 apps?\r\n\r\n 2. What is the deployment process? are the front-end/back-end must be deployed as separate apps?\r\n 3. Any advises on best practices in general ?","title":"Spring MVC AngularJS separate front-end with back-end","body":"<p>I have a pretty big Spring MVC + AngularJS app. Spring MVC mostly work as the REST API, but not completely (security, some routing, Wro4j resources packing)\nat the time i started it's development, wasn't experienced much in Web Projects.</p>\n\n<p>App is deployed on Amazon Elasticbeanstalk.</p>\n\n<p>The Front-end guy joins me and we have to separate the dev process somehow.</p>\n\n<p><strong>The Qeustions are:</strong></p>\n\n<ol>\n<li><p>What is the basic steps i have do to separate them into the 2 apps?</p></li>\n<li><p>What is the deployment process? are the front-end/back-end must be deployed as separate apps?</p></li>\n<li>Any advises on best practices in general ?</li>\n</ol>\n"},{"tags":["java","spring-boot","yaml","jackson-databind","jackson-dataformat-xml"],"comments":[{"owner":{"display_name":"user3456014"},"score":0,"creation_date":1529487549,"post_id":50943977,"comment_id":88887340,"body_markdown":"Potentially, something else is including Jackson as well, so there are multiple Jackson jars on the classpath. Can you run `gradle dependencies` to see where and when Jackson is being included?","body":"Potentially, something else is including Jackson as well, so there are multiple Jackson jars on the classpath. Can you run <code>gradle dependencies</code> to see where and when Jackson is being included?"}],"answers":[{"tags":[],"owner":{"account_id":433818,"reputation":355,"user_id":819377,"display_name":"mario"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686682332,"creation_date":1686682332,"answer_id":76467924,"question_id":50943977,"body_markdown":"I was using a `pom.xml` file and was getting the same error.\r\n\r\n[THIS][1] worked for me\r\n\r\n\r\n  [1]: https://springframework.guru/jackson-dependency-issue-spring-boot-maven/\r\n\r\n**TLTR**: Use `&lt;exclusion&gt;`\r\n\r\n\r\n    . . .\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n        &lt;exclusions&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n            &lt;exclusion&gt;\r\n                &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n                &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n            &lt;/exclusion&gt;\r\n        &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\r\n        &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\r\n        &lt;version&gt;2.7.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n    . . .\r\n\r\n\r\n","title":"Could not initialize class com.fasterxml.jackson.databind.ObjectMapper","body":"<p>I was using a <code>pom.xml</code> file and was getting the same error.</p>\n<p><a href=\"https://springframework.guru/jackson-dependency-issue-spring-boot-maven/\" rel=\"nofollow noreferrer\">THIS</a> worked for me</p>\n<p><strong>TLTR</strong>: Use <code>&lt;exclusion&gt;</code></p>\n<pre><code>. . .\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-annotations&lt;/artifactId&gt;\n    &lt;version&gt;2.7.4&lt;/version&gt;\n&lt;/dependency&gt;\n. . .\n</code></pre>\n"}],"owner":{"account_id":8018246,"reputation":761,"user_id":6172578,"accept_rate":25,"display_name":"smruti ranjan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8579,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1686682332,"creation_date":1529484373,"question_id":50943977,"body_markdown":"I have a spring boot app and have this below code to read from a configuration file:\r\n\r\n    private static void loadConfig(String[] args) throws Exception {\r\n\t\tif(args!=null ) {\r\n\t\t\tFile configFile = new File(args[0]);\r\n\t\t\tif(configFile.exists()) {\r\n\t\t\t\tInputStream in = DevProxyUtils.class.getResourceAsStream(args[0]);\r\n\t\t       \r\n\t\t            ObjectMapper mapper = new ObjectMapper(new YAMLFactory());\r\n\t\t            try {\r\n\t\t            \tdevProxyConfig = mapper.readValue(in, DevProxyConfig.class);\r\n\t\t            } catch (Exception e) {\r\n\t\t                LOGGER.error(&quot;Unable to read Devproxy config file&quot;);\r\n\t\t            }\r\n\t\t        \r\n\t\t\t}else {\r\n\t\t\t\tLOGGER.error(&quot;Config file location is incorrect.&quot;);\r\n\t\t\t\tthrow new Exception(&quot;Config file location is incorrect.&quot;);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nFor this I am using below dependencies in build.gradle\r\n\r\n    dependencies {\r\n    compile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-web&#39;, version:&#39;1.5.10.RELEASE&#39;\r\n\tcompile group: &#39;com.fasterxml.jackson.core&#39;, name: &#39;jackson-databind&#39;, version: &#39;2.9.6&#39;\r\n    compile group: &#39;com.fasterxml.jackson.dataformat&#39;, name: &#39;jackson-dataformat-yaml&#39;, version: &#39;2.9.6&#39;\r\n    }\r\nI am using \r\n\r\n&gt; springBootVersion = &#39;1.5.10.RELEASE&#39;\r\n\r\nAt time of starting the spring boot app I am getting the below error:\r\n\r\n    \r\n\torg.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:537) ~[spring-context-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:303) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1118) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1107) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat com.siemens.mindsphere.devproxy.DevproxyApplication.main(DevproxyApplication.java:39) [main/:na]\r\n\tCaused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\r\n\t\tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\t... 8 common frames omitted\r\n\tCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;httpPutFormContentFilter&#39; defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\r\n\t\tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\r\n\t\tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\r\n\t\tat java.util.concurrent.FutureTask.run(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat java.lang.Thread.run(Unknown Source) ~[na:1.8.0_161]\r\n\tCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method &#39;httpPutFormContentFilter&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\r\n\t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\t... 26 common frames omitted\r\n\tCaused by: java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\r\n\t\tat org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build(Jackson2ObjectMapperBuilder.java:588) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt;(MappingJackson2HttpMessageConverter.java:57) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:66) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1$$FastClassBySpringCGLIB$$5bd1f4de.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\tat org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_161]\r\n\t\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_161]\r\n\t\tat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\r\n\t\t... 27 common frames omitted\r\n\r\nI ahve tried changing versions of jackson-databind and jackson-dataformat-yaml to 2.9.0 and even tried removing the version it self. however still I am getting the same issue. Is it due to spring boot and jackson compatibility issue or i am missing something else ?\r\n\r\n","title":"Could not initialize class com.fasterxml.jackson.databind.ObjectMapper","body":"<p>I have a spring boot app and have this below code to read from a configuration file:</p>\n\n<pre><code>private static void loadConfig(String[] args) throws Exception {\n    if(args!=null ) {\n        File configFile = new File(args[0]);\n        if(configFile.exists()) {\n            InputStream in = DevProxyUtils.class.getResourceAsStream(args[0]);\n\n                ObjectMapper mapper = new ObjectMapper(new YAMLFactory());\n                try {\n                    devProxyConfig = mapper.readValue(in, DevProxyConfig.class);\n                } catch (Exception e) {\n                    LOGGER.error(\"Unable to read Devproxy config file\");\n                }\n\n        }else {\n            LOGGER.error(\"Config file location is incorrect.\");\n            throw new Exception(\"Config file location is incorrect.\");\n        }\n    }\n\n}\n</code></pre>\n\n<p>For this I am using below dependencies in build.gradle</p>\n\n<pre><code>dependencies {\ncompile group: 'org.springframework.boot', name: 'spring-boot-starter-web', version:'1.5.10.RELEASE'\ncompile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.6'\ncompile group: 'com.fasterxml.jackson.dataformat', name: 'jackson-dataformat-yaml', version: '2.9.6'\n}\n</code></pre>\n\n<p>I am using </p>\n\n<blockquote>\n  <p>springBootVersion = '1.5.10.RELEASE'</p>\n</blockquote>\n\n<p>At time of starting the spring boot app I am getting the below error:</p>\n\n<pre><code>org.springframework.context.ApplicationContextException: Unable to start embedded container; nested exception is org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:137) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:537) ~[spring-context-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.refresh(EmbeddedWebApplicationContext.java:122) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:693) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:360) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:303) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1118) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1107) [spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at com.siemens.mindsphere.devproxy.DevproxyApplication.main(DevproxyApplication.java:39) [main/:na]\nCaused by: org.springframework.boot.context.embedded.EmbeddedServletContainerException: Unable to start embedded Tomcat\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.initialize(TomcatEmbeddedServletContainer.java:123) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainer.&lt;init&gt;(TomcatEmbeddedServletContainer.java:84) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getTomcatEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:554) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatEmbeddedServletContainerFactory.getEmbeddedServletContainer(TomcatEmbeddedServletContainerFactory.java:179) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.createEmbeddedServletContainer(EmbeddedWebApplicationContext.java:164) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.onRefresh(EmbeddedWebApplicationContext.java:134) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    ... 8 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'httpPutFormContentFilter' defined in class path resource [org/springframework/boot/autoconfigure/web/WebMvcAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:599) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1173) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1067) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:513) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:483) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.getOrderedBeansOfType(ServletContextInitializerBeans.java:234) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:182) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAsRegistrationBean(ServletContextInitializerBeans.java:177) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.addAdaptableBeans(ServletContextInitializerBeans.java:159) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.web.servlet.ServletContextInitializerBeans.&lt;init&gt;(ServletContextInitializerBeans.java:80) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.getServletContextInitializerBeans(EmbeddedWebApplicationContext.java:241) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.selfInitialize(EmbeddedWebApplicationContext.java:228) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext.access$000(EmbeddedWebApplicationContext.java:89) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.EmbeddedWebApplicationContext$1.onStartup(EmbeddedWebApplicationContext.java:213) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.context.embedded.tomcat.TomcatStarter.onStartup(TomcatStarter.java:55) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5196) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1419) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409) ~[tomcat-embed-core-8.5.27.jar:8.5.27]\n    at java.util.concurrent.FutureTask.run(Unknown Source) ~[na:1.8.0_161]\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) ~[na:1.8.0_161]\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) ~[na:1.8.0_161]\n    at java.lang.Thread.run(Unknown Source) ~[na:1.8.0_161]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter]: Factory method 'httpPutFormContentFilter' threw exception; nested exception is java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:189) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:588) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    ... 26 common frames omitted\nCaused by: java.lang.NoClassDefFoundError: Could not initialize class com.fasterxml.jackson.databind.ObjectMapper\n    at org.springframework.http.converter.json.Jackson2ObjectMapperBuilder.build(Jackson2ObjectMapperBuilder.java:588) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.http.converter.json.MappingJackson2HttpMessageConverter.&lt;init&gt;(MappingJackson2HttpMessageConverter.java:57) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.http.converter.support.AllEncompassingFormHttpMessageConverter.&lt;init&gt;(AllEncompassingFormHttpMessageConverter.java:66) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.web.filter.HttpPutFormContentFilter.&lt;init&gt;(HttpPutFormContentFilter.java:63) ~[spring-web-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.boot.web.filter.OrderedHttpPutFormContentFilter.&lt;init&gt;(OrderedHttpPutFormContentFilter.java:29) ~[spring-boot-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration.httpPutFormContentFilter(WebMvcAutoConfiguration.java:149) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1.CGLIB$httpPutFormContentFilter$1(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1$$FastClassBySpringCGLIB$$5bd1f4de.invoke(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:228) ~[spring-core-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:358) ~[spring-context-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    at org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration$$EnhancerBySpringCGLIB$$d4a7e2d1.httpPutFormContentFilter(&lt;generated&gt;) ~[spring-boot-autoconfigure-1.5.10.RELEASE.jar:1.5.10.RELEASE]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_161]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.8.0_161]\n    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.8.0_161]\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:162) ~[spring-beans-4.3.14.RELEASE.jar:4.3.14.RELEASE]\n    ... 27 common frames omitted\n</code></pre>\n\n<p>I ahve tried changing versions of jackson-databind and jackson-dataformat-yaml to 2.9.0 and even tried removing the version it self. however still I am getting the same issue. Is it due to spring boot and jackson compatibility issue or i am missing something else ?</p>\n"},{"tags":["java","arrays"],"owner":{"account_id":23517856,"reputation":125,"user_id":17565490,"display_name":"Ryan Day"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686682272,"answer_count":0,"score":0,"last_activity_date":1686681906,"creation_date":1686681906,"question_id":76467871,"body_markdown":"In python I have such a dictionary and I would like to achieve something very similar with java.\r\n\r\n    eva_mp = {&quot;M&quot;: &quot;11-14:30&quot;, &quot;G&quot;: &quot;11-14:30&quot;, &quot;E&quot;: &quot;11-14:30&quot;, &quot;A&quot;: &quot;11-14:30&quot;, &quot;Z&quot;: &quot;11-14:30&quot;}\r\n\r\nI tried with:\r\n\r\n    public static Hashtable&lt;String,String&gt; convertMonth=new Hashtable&lt;String,String&gt;();\r\n\r\nand/or\r\n\r\n    public static  String pippo = [&quot;MONDAY&quot;:&quot;Lunedi&quot;,]; \r\n\r\nIn the first example, googling, I only found how to populate it via `put` and that&#39;s not what I want.\r\n\r\nIn the second example I just get `syntax errors` whatever I do.\r\nSince I will need several &quot;`dictionaries`&quot; I would need to know how to do it\r\n\r\n","title":"Populate manually a HasMap just like a dictionary in pyhton","body":"<p>In python I have such a dictionary and I would like to achieve something very similar with java.</p>\n<pre><code>eva_mp = {&quot;M&quot;: &quot;11-14:30&quot;, &quot;G&quot;: &quot;11-14:30&quot;, &quot;E&quot;: &quot;11-14:30&quot;, &quot;A&quot;: &quot;11-14:30&quot;, &quot;Z&quot;: &quot;11-14:30&quot;}\n</code></pre>\n<p>I tried with:</p>\n<pre><code>public static Hashtable&lt;String,String&gt; convertMonth=new Hashtable&lt;String,String&gt;();\n</code></pre>\n<p>and/or</p>\n<pre><code>public static  String pippo = [&quot;MONDAY&quot;:&quot;Lunedi&quot;,]; \n</code></pre>\n<p>In the first example, googling, I only found how to populate it via <code>put</code> and that's not what I want.</p>\n<p>In the second example I just get <code>syntax errors</code> whatever I do.\nSince I will need several &quot;<code>dictionaries</code>&quot; I would need to know how to do it</p>\n"},{"tags":["java","spring","spring-boot","oauth-2.0","google-oauth"],"answers":[{"comments":[{"owner":{"account_id":23126238,"reputation":63,"user_id":17231999,"display_name":"Sahil Sahu"},"score":0,"creation_date":1686797285,"post_id":76467865,"comment_id":134849646,"body_markdown":"Wow! that&#39;s helpful, thank you. I&#39;ll look into the resources you provided. I was just wondering if I wanted to do authentication using Gmail and also make rest APIs that my frontend will call, would that be possible?","body":"Wow! that&#39;s helpful, thank you. I&#39;ll look into the resources you provided. I was just wondering if I wanted to do authentication using Gmail and also make rest APIs that my frontend will call, would that be possible?"},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1686808973,"post_id":76467865,"comment_id":134850726,"body_markdown":"You cannot use Google authorization server for your own resource servers (at least not easily and efficiently). The best option is to use another authorization server with identity federation (aka &quot;Login With...&quot;), there are plenty of OpenID Providers which do it either &quot;from the shelf&quot; (like Keycloak), in the cloud (Auth0, Cognito, ...) or &quot;do it yourself&quot; (Spring Authorization-Server). Again, refer to my tutorials for samples.","body":"You cannot use Google authorization server for your own resource servers (at least not easily and efficiently). The best option is to use another authorization server with identity federation (aka &quot;Login With...&quot;), there are plenty of OpenID Providers which do it either &quot;from the shelf&quot; (like Keycloak), in the cloud (Auth0, Cognito, ...) or &quot;do it yourself&quot; (Spring Authorization-Server). Again, refer to my tutorials for samples."}],"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686681880,"creation_date":1686681880,"answer_id":76467865,"question_id":76466304,"body_markdown":"You are using `oauth2Login` (and defined the required client configuration for OAuth2 login to work). For this reason, **your requests are secured with sessions, not Bearer access tokens** =&gt; you have to send a valid session cookie with your requests for it to be authorized.\r\n\r\nYou might go through the OAuth2 login process using your browser as normal and use the Postman interceptor to capture the session cookies. Sample tutorial [in this video][1].\r\n\r\nBut, if you are using Postman, you are probably writing a REST API. As you are using OAuth2 for security, this API would probably better be configured as an OAuth2 resource server rather than an OAuth2 client. See [my tutorials][2] for some OAuth2 background and the various configuration options.\r\n\r\n\r\n  [1]: https://www.youtube.com/watch?v=rNDSEZF5IpA\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials","title":"How do I use postman when I am using sign-in with google for authentication in spring-boot?","body":"<p>You are using <code>oauth2Login</code> (and defined the required client configuration for OAuth2 login to work). For this reason, <strong>your requests are secured with sessions, not Bearer access tokens</strong> =&gt; you have to send a valid session cookie with your requests for it to be authorized.</p>\n<p>You might go through the OAuth2 login process using your browser as normal and use the Postman interceptor to capture the session cookies. Sample tutorial <a href=\"https://www.youtube.com/watch?v=rNDSEZF5IpA\" rel=\"nofollow noreferrer\">in this video</a>.</p>\n<p>But, if you are using Postman, you are probably writing a REST API. As you are using OAuth2 for security, this API would probably better be configured as an OAuth2 resource server rather than an OAuth2 client. See <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials\" rel=\"nofollow noreferrer\">my tutorials</a> for some OAuth2 background and the various configuration options.</p>\n"}],"owner":{"account_id":23126238,"reputation":63,"user_id":17231999,"display_name":"Sahil Sahu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":342,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686681880,"creation_date":1686668777,"question_id":76466304,"body_markdown":"I am making a spring-boot application. In the app, I need to perform sign-in with Google. To do that, I am using oauth2. It&#39;s working when I request a hello world api from the web browser. But how do I set-up post man so that I can make api calls from it?\r\n\r\n##### Security Config\r\n```\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration {\r\n\r\n    @Bean\r\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\r\n\r\n        httpSecurity\r\n                .csrf()\r\n                .disable()\r\n                .authorizeHttpRequests()\r\n                .anyRequest()\r\n                .authenticated()\r\n                .and()\r\n                .oauth2Login();\r\n\r\n        return httpSecurity.build();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n##### Test Controller\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/test&quot;)\r\npublic class TestController {\r\n    @GetMapping(&quot;/&quot;)\r\n    ResponseEntity&lt;String&gt; test() {\r\n        return new ResponseEntity&lt;&gt;(&quot;Hellooo&quot;, HttpStatus.OK);\r\n    }\r\n}\r\n```\r\n##### application.yml\r\n\r\n```\r\nspring:\r\n  security:\r\n    oauth2:\r\n      client:\r\n        registration:\r\n          google:\r\n            clientId: 193483047691-jumfh7674bg1cjmqgfe3v3qfm827cjpt.apps.googleusercontent.com\r\n            clientSecret: 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\r\n  datasource:\r\n    url: jdbc:mysql://localhost:3306/ZoomOptimize\r\n    username: root\r\n    password: aabbffaabb\r\n    driver-class-name: com.mysql.cj.jdbc.Driver\r\n\r\n  jpa:\r\n    hibernate:\r\n      ddl-auto: update\r\n    show-sql: true\r\n\r\nserver:\r\n  port: 8081\r\n```","title":"How do I use postman when I am using sign-in with google for authentication in spring-boot?","body":"<p>I am making a spring-boot application. In the app, I need to perform sign-in with Google. To do that, I am using oauth2. It's working when I request a hello world api from the web browser. But how do I set-up post man so that I can make api calls from it?</p>\n<h5>Security Config</h5>\n<pre><code>\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {\n\n        httpSecurity\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .oauth2Login();\n\n        return httpSecurity.build();\n\n    }\n\n}\n</code></pre>\n<h5>Test Controller</h5>\n<pre><code>@RestController\n@RequestMapping(&quot;/test&quot;)\npublic class TestController {\n    @GetMapping(&quot;/&quot;)\n    ResponseEntity&lt;String&gt; test() {\n        return new ResponseEntity&lt;&gt;(&quot;Hellooo&quot;, HttpStatus.OK);\n    }\n}\n</code></pre>\n<h5>application.yml</h5>\n<pre><code>spring:\n  security:\n    oauth2:\n      client:\n        registration:\n          google:\n            clientId: 193483047691-jumfh7674bg1cjmqgfe3v3qfm827cjpt.apps.googleusercontent.com\n            clientSecret: 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\n  datasource:\n    url: jdbc:mysql://localhost:3306/ZoomOptimize\n    username: root\n    password: aabbffaabb\n    driver-class-name: com.mysql.cj.jdbc.Driver\n\n  jpa:\n    hibernate:\n      ddl-auto: update\n    show-sql: true\n\nserver:\n  port: 8081\n</code></pre>\n"},{"tags":["java","jenkins","jenkins-plugins","heap-memory","sast"],"owner":{"account_id":3840763,"reputation":4517,"user_id":3183924,"accept_rate":89,"display_name":"Paradox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686681629,"creation_date":1686588168,"question_id":76458697,"body_markdown":"My Jenkins build is failing after retrieving the SAST scan results from the [Checkmarx Plugin][1].\r\n\r\n    [Cx-Info]: Waiting for SAST scan results. Elapsed time: 00:43:26. 99% processed. Status: Finished.  \r\n    [Cx-Info]: SAST scan finished successfully.  \r\n    [Cx-Info]: Retrieving SAST scan results  \r\n    FATAL: Java heap space  \r\n    java.lang.OutOfMemoryError: Java heap space  \r\n    \tat org.apache.commons.io.IOUtils.byteArray(IOUtils.java:338)\r\n\r\nI have already tried increasing the xmx significantly up to `-Xmx2g`.  UPDATE: I have also tried 3GB:\r\n\r\n    Checking if Java is installed by asking for version.  \r\n    Java Source: DETECT_JAVA_PATH=C:\\Program Files (x86)\\Jenkins\\jre\\bin\\java.exe  \r\n    Java Standard Output: Error occurred during initialization of VM  \r\n    Could not reserve enough space for 2097152KB object heap  \r\n    \r\n    Java Error Output: Picked up JAVA_TOOL_OPTIONS: -Xms256m -Xmx2g  \r\n\r\nI rebooted Jenkins by appending /safeRestart to the URL.  All of this continued to result in the error persisting.  Are there any other solutions to this or do I need to add even more memory?\r\n\r\n\r\n  [1]: https://www.jenkins.io/doc/pipeline/steps/checkmarx/","title":"Jenkins build failing due to Checkmarx despite increasing Java heap space","body":"<p>My Jenkins build is failing after retrieving the SAST scan results from the <a href=\"https://www.jenkins.io/doc/pipeline/steps/checkmarx/\" rel=\"nofollow noreferrer\">Checkmarx Plugin</a>.</p>\n<pre><code>[Cx-Info]: Waiting for SAST scan results. Elapsed time: 00:43:26. 99% processed. Status: Finished.  \n[Cx-Info]: SAST scan finished successfully.  \n[Cx-Info]: Retrieving SAST scan results  \nFATAL: Java heap space  \njava.lang.OutOfMemoryError: Java heap space  \n    at org.apache.commons.io.IOUtils.byteArray(IOUtils.java:338)\n</code></pre>\n<p>I have already tried increasing the xmx significantly up to <code>-Xmx2g</code>.  UPDATE: I have also tried 3GB:</p>\n<pre><code>Checking if Java is installed by asking for version.  \nJava Source: DETECT_JAVA_PATH=C:\\Program Files (x86)\\Jenkins\\jre\\bin\\java.exe  \nJava Standard Output: Error occurred during initialization of VM  \nCould not reserve enough space for 2097152KB object heap  \n\nJava Error Output: Picked up JAVA_TOOL_OPTIONS: -Xms256m -Xmx2g  \n</code></pre>\n<p>I rebooted Jenkins by appending /safeRestart to the URL.  All of this continued to result in the error persisting.  Are there any other solutions to this or do I need to add even more memory?</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"account_id":1475399,"reputation":21277,"user_id":1385896,"accept_rate":100,"display_name":"Filipe Silva"},"score":3,"creation_date":1382132256,"post_id":19459197,"comment_id":28856251,"body_markdown":"You should put your problem in your question, otherwise if that link goes down, this question becomes useless.","body":"You should put your problem in your question, otherwise if that link goes down, this question becomes useless."},{"owner":{"account_id":4159482,"reputation":105,"user_id":3409888,"accept_rate":54,"display_name":"Shrivatsan"},"score":0,"creation_date":1426333778,"post_id":19459197,"comment_id":46335332,"body_markdown":"For example, given X = 7 and array A such that:\n\n  A[0] = 1\n  A[1] = 3\n  A[2] = 1\n  A[3] = 4\n  A[4] = 2\n  A[5] = 5 \nthe function should return 3, could you explain as well ?","body":"For example, given X = 7 and array A such that:    A[0] = 1   A[1] = 3   A[2] = 1   A[3] = 4   A[4] = 2   A[5] = 5  the function should return 3, could you explain as well ?"},{"owner":{"account_id":9639549,"reputation":1087,"user_id":7154311,"accept_rate":88,"display_name":"Ch3shire"},"score":0,"creation_date":1499853901,"post_id":19459197,"comment_id":77082390,"body_markdown":"Wow, and I thought that using set is a cheating...","body":"Wow, and I thought that using set is a cheating..."},{"owner":{"account_id":8981690,"reputation":2757,"user_id":6696684,"display_name":"Sumer"},"score":0,"creation_date":1551104265,"post_id":19459197,"comment_id":96506746,"body_markdown":"Can someone explain this question? Sorry but I didn&#39;t get the question","body":"Can someone explain this question? Sorry but I didn&#39;t get the question"}],"answers":[{"comments":[{"owner":{"account_id":1581224,"reputation":1369,"user_id":1466580,"accept_rate":89,"display_name":"pshemek"},"score":2,"creation_date":1382185693,"post_id":19460553,"comment_id":28866873,"body_markdown":"It gives 100/100, But when I have int A[] = {6,4,3,2,1,5}; int steps = 5; \nI get Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 6  \nI believe you have to omit values that A[i] &gt; X;","body":"It gives 100/100, But when I have int A[] = {6,4,3,2,1,5}; int steps = 5;  I get Exception in thread &quot;main&quot; java.lang.ArrayIndexOutOfBoundsException: 6   I believe you have to omit values that A[i] &gt; X;"},{"owner":{"account_id":457025,"reputation":3918,"user_id":856079,"accept_rate":75,"display_name":"rafalio"},"score":1,"creation_date":1382274407,"post_id":19460553,"comment_id":28886517,"body_markdown":"The spec said that array A only contains elements in range [1,X] so the code is valid I think. Always read the spec very carefully, sometimes some constraint can lead you to solve a problem in a way you wouldn&#39;t have thought of without it. You should also accept answers if you think they helped you.","body":"The spec said that array A only contains elements in range [1,X] so the code is valid I think. Always read the spec very carefully, sometimes some constraint can lead you to solve a problem in a way you wouldn&#39;t have thought of without it. You should also accept answers if you think they helped you."},{"owner":{"account_id":4159482,"reputation":105,"user_id":3409888,"accept_rate":54,"display_name":"Shrivatsan"},"score":0,"creation_date":1426333743,"post_id":19460553,"comment_id":46335321,"body_markdown":"For example, given X = 7 and array A such that:\n\n  A[0] = 1\n  A[1] = 3\n  A[2] = 1\n  A[3] = 4\n  A[4] = 2\n  A[5] = 5 \nthe function should return 3, could you explain as well ?","body":"For example, given X = 7 and array A such that:    A[0] = 1   A[1] = 3   A[2] = 1   A[3] = 4   A[4] = 2   A[5] = 5  the function should return 3, could you explain as well ?"},{"owner":{"account_id":1220080,"reputation":8332,"user_id":1186878,"accept_rate":95,"display_name":"Quest Monger"},"score":0,"creation_date":1429427563,"post_id":19460553,"comment_id":47587681,"body_markdown":"modified this code a bit to make it 100/100 solution. added a &#39;if&#39; condition that filters out the invalid input case of A.length&lt;X - \n\n\tpublic int solution(int X, int[] A) {\n\t\tif (A.length &gt;= X) {\n\t\t\tlong total = X;\n\t\t\tboolean[] bitmap = new boolean[A.length+1];\n\n\t\t\tfor (int i = 0; i &lt; A.length; i++) {\n\t\t\t\tif (!bitmap[A[i]]) {\n\t\t\t\t\tbitmap[A[i]] = true;\n\t\t\t\t\ttotal--;\n\t\t\t\t\tif (total == 0)\n\t\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}","body":"modified this code a bit to make it 100/100 solution. added a &#39;if&#39; condition that filters out the invalid input case of A.length&lt;X -   \tpublic int solution(int X, int[] A) { \t\tif (A.length &gt;= X) { \t\t\tlong total = X; \t\t\tboolean[] bitmap = new boolean[A.length+1];  \t\t\tfor (int i = 0; i &lt; A.length; i++) { \t\t\t\tif (!bitmap[A[i]]) { \t\t\t\t\tbitmap[A[i]] = true; \t\t\t\t\ttotal--; \t\t\t\t\tif (total == 0) \t\t\t\t\t\treturn i; \t\t\t\t} \t\t\t} \t\t} \t\treturn -1; \t}"},{"owner":{"account_id":457025,"reputation":3918,"user_id":856079,"accept_rate":75,"display_name":"rafalio"},"score":0,"creation_date":1429631415,"post_id":19460553,"comment_id":47684500,"body_markdown":"@QuestMonger is my code no longer 100/100 without that check? It was before, but maybe the test cases were updated. I would be surprised if it didn&#39;t pass though since the array has at most 100k elements, not that many.","body":"@QuestMonger is my code no longer 100/100 without that check? It was before, but maybe the test cases were updated. I would be surprised if it didn&#39;t pass though since the array has at most 100k elements, not that many."},{"owner":{"account_id":1220080,"reputation":8332,"user_id":1186878,"accept_rate":95,"display_name":"Quest Monger"},"score":0,"creation_date":1429645149,"post_id":19460553,"comment_id":47693234,"body_markdown":"@rafalio - It wasnt a few days ago, but i ran it again today and it now says 100/100. https://codility.com/demo/results/demoGAUPBB-KCA/\n\nmaybe i am seeing things :).","body":"@rafalio - It wasnt a few days ago, but i ran it again today and it now says 100/100. <a href=\"https://codility.com/demo/results/demoGAUPBB-KCA/\" rel=\"nofollow noreferrer\">codility.com/demo/results/demoGAUPBB-KCA</a>  maybe i am seeing things :)."},{"owner":{"account_id":7044519,"reputation":137,"user_id":5395752,"display_name":"Janath"},"score":0,"creation_date":1452232347,"post_id":19460553,"comment_id":57086196,"body_markdown":"@rafalio, Space complexity is not correct in your answer. &quot;expected worst-case space complexity is O(X)&quot; but you have define a array of X+1.","body":"@rafalio, Space complexity is not correct in your answer. &quot;expected worst-case space complexity is O(X)&quot; but you have define a array of X+1."}],"tags":[],"owner":{"account_id":457025,"reputation":3918,"user_id":856079,"accept_rate":75,"display_name":"rafalio"},"comment_count":7,"down_vote_count":0,"up_vote_count":49,"is_accepted":true,"score":49,"last_activity_date":1582693175,"creation_date":1382138936,"answer_id":19460553,"question_id":19459197,"body_markdown":"You are using `arrayList.contains` inside a loop, which will traverse the whole list unnecessarily.\r\n\r\nHere is my solution (I wrote it some time ago, but I believe it scores 100/100):\r\n\r\n\t    public int frog(int X, int[] A) {\r\n\t        int steps = X;\r\n\t        boolean[] bitmap = new boolean[steps+1];\r\n\t        for(int i = 0; i &lt; A.length; i++){\r\n\t            if(!bitmap[A[i]]){\r\n\t                bitmap[A[i]] = true;\r\n\t                steps--;\r\n                    if(steps == 0) return i;\r\n\t            }\r\n\t            \r\n\t        }\r\n\t        return -1;\r\n\t    }\r\n\r\n","title":"java codility Frog-River-One","body":"<p>You are using <code>arrayList.contains</code> inside a loop, which will traverse the whole list unnecessarily.</p>\n\n<p>Here is my solution (I wrote it some time ago, but I believe it scores 100/100):</p>\n\n<pre><code>    public int frog(int X, int[] A) {\n        int steps = X;\n        boolean[] bitmap = new boolean[steps+1];\n        for(int i = 0; i &lt; A.length; i++){\n            if(!bitmap[A[i]]){\n                bitmap[A[i]] = true;\n                steps--;\n                if(steps == 0) return i;\n            }\n\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1260663,"reputation":326,"user_id":1219037,"display_name":"Ariel Voskov"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1387173098,"creation_date":1387173098,"answer_id":20604329,"question_id":19459197,"body_markdown":"Here&#39;s my solution.\r\nIt isn&#39;t perfect, but it&#39;s good enough to score 100/100.\r\n(I think that it shouldn&#39;t have passed a test with a big A and small X)\r\n\r\nAnyway, it fills a new `counter` array with each leaf that falls\r\n\r\ncounter has the size of X because I don&#39;t care for leafs that fall farther than X, therefore the try-catch block.\r\n\r\nAFTER X leafs fell (because it&#39;s the minimum amount of leafs) I begin checking whether I have a complete way - I&#39;m checking that every int in count is greater than 0.\r\nIf so, I return i, else I break and try again.\r\n\r\n\r\n\r\n    public static int solution(int X, int[] A){\r\n        int[] count = new int[X];\r\n        for (int i = 0; i &lt; A.length; i++){\r\n            try{\r\n                count[A[i]-1]++;\r\n            } catch (ArrayIndexOutOfBoundsException e){ }\r\n            if (i &gt;= X - 1){\r\n                for (int j = 0; j&lt; count.length; j++){\r\n                    if (count[j] == 0){\r\n                        break;\r\n                    }\r\n                    if (j == count.length - 1){\r\n                        return i;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }","title":"java codility Frog-River-One","body":"<p>Here's my solution.\nIt isn't perfect, but it's good enough to score 100/100.\n(I think that it shouldn't have passed a test with a big A and small X)</p>\n\n<p>Anyway, it fills a new <code>counter</code> array with each leaf that falls</p>\n\n<p>counter has the size of X because I don't care for leafs that fall farther than X, therefore the try-catch block.</p>\n\n<p>AFTER X leafs fell (because it's the minimum amount of leafs) I begin checking whether I have a complete way - I'm checking that every int in count is greater than 0.\nIf so, I return i, else I break and try again.</p>\n\n<pre><code>public static int solution(int X, int[] A){\n    int[] count = new int[X];\n    for (int i = 0; i &lt; A.length; i++){\n        try{\n            count[A[i]-1]++;\n        } catch (ArrayIndexOutOfBoundsException e){ }\n        if (i &gt;= X - 1){\n            for (int j = 0; j&lt; count.length; j++){\n                if (count[j] == 0){\n                    break;\n                }\n                if (j == count.length - 1){\n                    return i;\n                }\n            }\n        }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3760554,"reputation":69,"user_id":3125686,"display_name":"makki"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1388099479,"creation_date":1388049114,"answer_id":20782126,"question_id":19459197,"body_markdown":"Just tried this problem as well and here is my solution. Basically, I just declared an array whose size is equal to position X. Then, I declared a counter to monitor if the necessary leaves have fallen at the particular spots. The loop exits when these leaves have been met and if not, returns -1 as instructed.\r\n\r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            int size = A.length;\r\n            int[] check = new int[X];\r\n            int cmp = 0;\r\n            int time = -1;\r\n            \r\n            for (int x = 0; x &lt; size; x++) {\r\n                int temp = A[x];\r\n                if (temp &lt;= X) {\r\n                    if (check[temp-1] &gt; 0) {\r\n                        continue;\r\n                    }\r\n                    check[temp - 1]++;\r\n                    cmp++;\r\n                }\r\n                \r\n                if ( cmp == X) {\r\n                    time = x;\r\n                    break;\r\n                }\r\n            }\r\n            \r\n            return time;\r\n        }\r\n    }\r\n\r\nIt got a 100/100 on the evaluation but I&#39;m not too sure of its performance. I am still a beginner when it comes to programming so if anybody can critique the code, I would be grateful. ","title":"java codility Frog-River-One","body":"<p>Just tried this problem as well and here is my solution. Basically, I just declared an array whose size is equal to position X. Then, I declared a counter to monitor if the necessary leaves have fallen at the particular spots. The loop exits when these leaves have been met and if not, returns -1 as instructed.</p>\n\n<pre><code>class Solution {\n    public int solution(int X, int[] A) {\n        int size = A.length;\n        int[] check = new int[X];\n        int cmp = 0;\n        int time = -1;\n\n        for (int x = 0; x &lt; size; x++) {\n            int temp = A[x];\n            if (temp &lt;= X) {\n                if (check[temp-1] &gt; 0) {\n                    continue;\n                }\n                check[temp - 1]++;\n                cmp++;\n            }\n\n            if ( cmp == X) {\n                time = x;\n                break;\n            }\n        }\n\n        return time;\n    }\n}\n</code></pre>\n\n<p>It got a 100/100 on the evaluation but I'm not too sure of its performance. I am still a beginner when it comes to programming so if anybody can critique the code, I would be grateful. </p>\n"},{"tags":[],"owner":{"account_id":2657023,"reputation":21,"user_id":3100801,"display_name":"Gali"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1398481830,"creation_date":1398480697,"answer_id":23306063,"question_id":19459197,"body_markdown":"This is my solution. It uses 3 loops but is constant time and gets 100/100 on codibility.\r\n\r\n\r\n\r\n\r\n\r\n    class FrogLeap\r\n    {\r\n        internal int solution(int X, int[] A)\r\n        {\r\n            int result = -1;\r\n            long max = -1;\r\n            var B = new int[X + 1];\r\n            \r\n            //initialize all entries in B array with -1\r\n            for (int i = 0; i &lt;= X; i++)\r\n            {\r\n                B[i] = -1;\r\n            }\r\n\r\n            //Go through A and update B with the location where that value appeared\r\n            for (int i = 0; i &lt; A.Length; i++)\r\n            {\r\n               if( B[A[i]] ==-1)//only update if still -1\r\n                B[A[i]] = i;\r\n            }\r\n\r\n            //start from 1 because 0 is not valid\r\n            for (int i = 1; i &lt;= X; i++)\r\n            {\r\n                if (B[i] == -1)\r\n                    return -1;\r\n                //The maxValue here is the earliest time we can jump over\r\n                if (max &lt; B[i])\r\n                    max = B[i];\r\n            }\r\n\r\n            result = (int)max;\r\n            return result;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<p>This is my solution. It uses 3 loops but is constant time and gets 100/100 on codibility.</p>\n\n<pre><code>class FrogLeap\n{\n    internal int solution(int X, int[] A)\n    {\n        int result = -1;\n        long max = -1;\n        var B = new int[X + 1];\n\n        //initialize all entries in B array with -1\n        for (int i = 0; i &lt;= X; i++)\n        {\n            B[i] = -1;\n        }\n\n        //Go through A and update B with the location where that value appeared\n        for (int i = 0; i &lt; A.Length; i++)\n        {\n           if( B[A[i]] ==-1)//only update if still -1\n            B[A[i]] = i;\n        }\n\n        //start from 1 because 0 is not valid\n        for (int i = 1; i &lt;= X; i++)\n        {\n            if (B[i] == -1)\n                return -1;\n            //The maxValue here is the earliest time we can jump over\n            if (max &lt; B[i])\n                max = B[i];\n        }\n\n        result = (int)max;\n        return result;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3556591,"reputation":111,"user_id":2970209,"display_name":"Cesar Alvarado"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1403281897,"creation_date":1403281897,"answer_id":24331835,"question_id":19459197,"body_markdown":"Maybe it is not perfect but its straightforward. Just made a counter Array to track the needed &quot;leaves&quot; and verified on each iteration if the path was complete. Got me 100/100 and O(N).\r\n\r\n        public static int frogRiver(int X, int[] A)\r\n        {\r\n            int leaves = A.Length;\r\n            int[] counter = new int[X + 1];\r\n            int stepsAvailForTravel = 0;\r\n\r\n            for(int i = 0; i &lt; leaves; i++)\r\n            {\r\n                //we won&#39;t get to that leaf anyway so we shouldnt count it,\r\n                if (A[i] &gt; X)\r\n                {\r\n                    continue;\r\n                } \r\n                else\r\n                {\r\n                    //first hit!, keep a count of the available leaves to jump\r\n                    if (counter[A[i]] == 0)\r\n                        stepsAvailForTravel++;\r\n\r\n                    counter[A[i]]++;\r\n\r\n                }\r\n                //We did it!!\r\n                if (stepsAvailForTravel == X)\r\n                {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n            return -1;\r\n            \r\n        }\r\n","title":"java codility Frog-River-One","body":"<p>Maybe it is not perfect but its straightforward. Just made a counter Array to track the needed \"leaves\" and verified on each iteration if the path was complete. Got me 100/100 and O(N).</p>\n\n<pre><code>    public static int frogRiver(int X, int[] A)\n    {\n        int leaves = A.Length;\n        int[] counter = new int[X + 1];\n        int stepsAvailForTravel = 0;\n\n        for(int i = 0; i &lt; leaves; i++)\n        {\n            //we won't get to that leaf anyway so we shouldnt count it,\n            if (A[i] &gt; X)\n            {\n                continue;\n            } \n            else\n            {\n                //first hit!, keep a count of the available leaves to jump\n                if (counter[A[i]] == 0)\n                    stepsAvailForTravel++;\n\n                counter[A[i]]++;\n\n            }\n            //We did it!!\n            if (stepsAvailForTravel == X)\n            {\n                return i;\n            }\n        }\n\n        return -1;\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4278261,"reputation":1055,"user_id":3498366,"accept_rate":54,"display_name":"Koin Arab"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1409140257,"creation_date":1409140257,"answer_id":25526428,"question_id":19459197,"body_markdown":"This is my solution. I think it&#39;s very simple. It gets 100/100 on codibility.\r\nset.contains() let me eliminate duplicate position from table. \r\nThe result of first loop get us expected sum. In the second loop we get sum of input values.\r\n\r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            \r\n            Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\r\n            int sum1 = 0, sum2 = 0;\r\n            \r\n            for (int i = 0; i &lt;= X; i++){\r\n                sum1 += i;       \r\n            }\r\n            \r\n            for (int i = 0; i &lt; A.length; i++){\r\n                if (set.contains(A[i])) continue;\r\n                set.add(A[i]);\r\n                sum2 += A[i];\r\n                if (sum1 == sum2) return i;\r\n            }        \r\n            return -1;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<p>This is my solution. I think it's very simple. It gets 100/100 on codibility.\nset.contains() let me eliminate duplicate position from table. \nThe result of first loop get us expected sum. In the second loop we get sum of input values.</p>\n\n<pre><code>class Solution {\n    public int solution(int X, int[] A) {\n\n        Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\n        int sum1 = 0, sum2 = 0;\n\n        for (int i = 0; i &lt;= X; i++){\n            sum1 += i;       \n        }\n\n        for (int i = 0; i &lt; A.length; i++){\n            if (set.contains(A[i])) continue;\n            set.add(A[i]);\n            sum2 += A[i];\n            if (sum1 == sum2) return i;\n        }        \n        return -1;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15246149,"reputation":89,"user_id":11000969,"display_name":"victor yao"},"score":0,"creation_date":1610018831,"post_id":25860700,"comment_id":116003157,"body_markdown":"This code does not even compile. Is it in Java?","body":"This code does not even compile. Is it in Java?"},{"owner":{"account_id":10056359,"reputation":97,"user_id":7434428,"accept_rate":75,"display_name":"Nedim Kurbegović"},"score":0,"creation_date":1632225407,"post_id":25860700,"comment_id":122429925,"body_markdown":"This is C#, don&#39;t forget to add\n`using System.Linq;`\nat the top","body":"This is C#, don&#39;t forget to add <code>using System.Linq;</code> at the top"}],"tags":[],"owner":{"account_id":5036157,"reputation":329,"user_id":4044856,"display_name":"Kamlesh Shewani"},"comment_count":2,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1410841997,"creation_date":1410841997,"answer_id":25860700,"question_id":19459197,"body_markdown":"Here is my solution. It got me 100/100:\r\n\r\n    public int solution(int X, int[] A)\r\n    {\r\n         int[] B = A.Distinct().ToArray();\r\n         return (B.Length != X) ? -1 : Array.IndexOf&lt;int&gt;(A, B[B.Length - 1]);\r\n    }","title":"java codility Frog-River-One","body":"<p>Here is my solution. It got me 100/100:</p>\n\n<pre><code>public int solution(int X, int[] A)\n{\n     int[] B = A.Distinct().ToArray();\n     return (B.Length != X) ? -1 : Array.IndexOf&lt;int&gt;(A, B[B.Length - 1]);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":266703,"reputation":18305,"user_id":1149423,"accept_rate":83,"display_name":"Sufiyan Ghori"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1422893148,"creation_date":1422877147,"answer_id":28276952,"question_id":19459197,"body_markdown":"Better approach would be to use `Set`, because it only adds unique values to the list. Just add values to the `Set` and decrement `X` every time a new value is added, (`Set#add()` returns `true` if value is added, `false` otherwise);\r\nhave a look,\r\n\r\n    public static int solution(int X, int[] A) {\r\n    \tSet&lt;Integer&gt; values = new HashSet&lt;Integer&gt;();\r\n    \tfor (int i = 0; i &lt; A.length; i++) {\r\n    \t\tif (values.add(A[i])) X--; \r\n    \t\tif (X == 0) return i;\r\n    \t}\r\n    \treturn -1;\r\n    }\r\n\r\ndo not forget to import,\r\n\r\n    import java.util.HashSet;\r\n    import java.util.Set;","title":"java codility Frog-River-One","body":"<p>Better approach would be to use <code>Set</code>, because it only adds unique values to the list. Just add values to the <code>Set</code> and decrement <code>X</code> every time a new value is added, (<code>Set#add()</code> returns <code>true</code> if value is added, <code>false</code> otherwise);\nhave a look,</p>\n\n<pre><code>public static int solution(int X, int[] A) {\n    Set&lt;Integer&gt; values = new HashSet&lt;Integer&gt;();\n    for (int i = 0; i &lt; A.length; i++) {\n        if (values.add(A[i])) X--; \n        if (X == 0) return i;\n    }\n    return -1;\n}\n</code></pre>\n\n<p>do not forget to import,</p>\n\n<pre><code>import java.util.HashSet;\nimport java.util.Set;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5782521,"reputation":89,"user_id":4562713,"display_name":"Andrzej Krzyszycha"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1423817219,"creation_date":1423817219,"answer_id":28495603,"question_id":19459197,"body_markdown":"100/100\r\n\r\n    public static int solution (int X, int[] A){\r\n        \r\n        int[]counter = new int[X+1];\r\n        int ans = -1;\r\n        int x = 0;\r\n        \r\n        for (int i=0; i&lt;A.length; i++){\r\n            if (counter[A[i]] == 0){\r\n                counter[A[i]] = A[i];\r\n                x += 1;\r\n                if (x == X){\r\n                    return i;\r\n                }\r\n            } \r\n        }\r\n        \r\n        return ans;\r\n    }","title":"java codility Frog-River-One","body":"<p>100/100</p>\n\n<pre><code>public static int solution (int X, int[] A){\n\n    int[]counter = new int[X+1];\n    int ans = -1;\n    int x = 0;\n\n    for (int i=0; i&lt;A.length; i++){\n        if (counter[A[i]] == 0){\n            counter[A[i]] = A[i];\n            x += 1;\n            if (x == X){\n                return i;\n            }\n        } \n    }\n\n    return ans;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6337365,"reputation":59,"user_id":4920380,"display_name":"Shwetha Shenoy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1432128735,"creation_date":1432128735,"answer_id":30351219,"question_id":19459197,"body_markdown":"Here&#39;s my solution with 100 / 100.\r\n\r\n    public int solution(int X, int[] A) {\r\n\t\tint len = A.length;\r\n\t\tif (X &gt; len) {\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t\tint[] isFilled = new int[X];\r\n\t\tint jumped = 0;\r\n\t\tArrays.fill(isFilled, 0);\r\n\t\tfor (int i = 0; i &lt; len; i++) {\r\n\t\t\tint x = A[i];\r\n\t\t\tif (x &lt;= X) {\r\n\t\t\t\tif (isFilled[x - 1] == 0) {\r\n\t\t\t\t\tisFilled[x - 1] = 1;\r\n\t\t\t\t\tjumped += 1;\r\n\t\t\t\t\tif (jumped == X) {\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}","title":"java codility Frog-River-One","body":"<p>Here's my solution with 100 / 100.</p>\n\n<pre><code>public int solution(int X, int[] A) {\n    int len = A.length;\n    if (X &gt; len) {\n        return -1;\n    }\n    int[] isFilled = new int[X];\n    int jumped = 0;\n    Arrays.fill(isFilled, 0);\n    for (int i = 0; i &lt; len; i++) {\n        int x = A[i];\n        if (x &lt;= X) {\n            if (isFilled[x - 1] == 0) {\n                isFilled[x - 1] = 1;\n                jumped += 1;\n                if (jumped == X) {\n                    return i;\n                }\n            }\n        }\n    }\n\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2122933,"reputation":684,"user_id":1885812,"display_name":"joaoprudencio"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1437839990,"creation_date":1437839990,"answer_id":31628373,"question_id":19459197,"body_markdown":"Here&#39;s my solution, scored 100/100:\r\n\r\n    import java.util.HashSet;\r\n    \r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            HashSet&lt;Integer&gt; hset = new HashSet&lt;Integer&gt;();\r\n                   \r\n            for (int i = 0 ; i &lt; A.length; i++) {\r\n                if (A[i] &lt;= X)\r\n                   hset.add(A[i]);   \r\n                if (hset.size() == X)\r\n                   return i;\r\n            }\r\n            \r\n            return -1;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<p>Here's my solution, scored 100/100:</p>\n\n<pre><code>import java.util.HashSet;\n\nclass Solution {\n    public int solution(int X, int[] A) {\n        HashSet&lt;Integer&gt; hset = new HashSet&lt;Integer&gt;();\n\n        for (int i = 0 ; i &lt; A.length; i++) {\n            if (A[i] &lt;= X)\n               hset.add(A[i]);   \n            if (hset.size() == X)\n               return i;\n        }\n\n        return -1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2387356,"reputation":935,"user_id":2088038,"display_name":"Bikey"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1448303509,"creation_date":1448303509,"answer_id":33878066,"question_id":19459197,"body_markdown":"Here&#39;s what I have in C#. It can probably still be refactored.\r\nWe throw away numbers greater than X, which is where we want to stop, and then we add numbers to an array if they haven&#39;t already been added.\r\nWhen the count of the list has reached the expected number, X, then return the result. 100%\r\n\r\n            var tempArray = new int[X+1];\r\n            var totalNumbers = 0;\r\n            for (int i = 0; i &lt; A.Length; i++)\r\n            {\r\n                if (A[i] &gt; X || tempArray.ElementAt(A[i]) != 0)\r\n                    continue;\r\n                tempArray[A[i]] = A[i];\r\n                totalNumbers++;\r\n                \r\n                if (totalNumbers == X)\r\n                    return i;\r\n            }\r\n\r\n            return -1;","title":"java codility Frog-River-One","body":"<p>Here's what I have in C#. It can probably still be refactored.\nWe throw away numbers greater than X, which is where we want to stop, and then we add numbers to an array if they haven't already been added.\nWhen the count of the list has reached the expected number, X, then return the result. 100%</p>\n\n<pre><code>        var tempArray = new int[X+1];\n        var totalNumbers = 0;\n        for (int i = 0; i &lt; A.Length; i++)\n        {\n            if (A[i] &gt; X || tempArray.ElementAt(A[i]) != 0)\n                continue;\n            tempArray[A[i]] = A[i];\n            totalNumbers++;\n\n            if (totalNumbers == X)\n                return i;\n        }\n\n        return -1;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1020930,"reputation":10844,"user_id":1031297,"accept_rate":55,"display_name":"OWADVL"},"score":0,"creation_date":1581183351,"post_id":34960195,"comment_id":106348546,"body_markdown":"you don&#39;t need to break. just return immediate after you find the steps","body":"you don&#39;t need to break. just return immediate after you find the steps"}],"tags":[],"owner":{"account_id":3305788,"reputation":101,"user_id":2780655,"display_name":"CraUmm"},"comment_count":1,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1453528856,"creation_date":1453528856,"answer_id":34960195,"question_id":19459197,"body_markdown":"A Java solution using Sets (Collections Framework) Got a 100%\r\n\r\n\r\n   \r\n\r\n    import java.util.Set;\r\n    import java.util.TreeSet;\r\n    public class Froggy {\r\n    \tpublic static int solution(int X, int[] A){\r\n    \tint steps=-1;\r\n    \tSet&lt;Integer&gt; values = new TreeSet&lt;Integer&gt;();\r\n    \tfor(int i=0; i&lt;A.length;i++){\r\n    \t\tif(A[i]&lt;=X){\r\n    \t\t\tvalues.add(A[i]);\r\n    \t\t}\r\n    \t\tif(values.size()==X){\r\n    \t\t\tsteps=i;\r\n    \t\t\tbreak;\r\n    \t\t}\r\n    \t}\r\n    \t\treturn steps;\r\n    \t}","title":"java codility Frog-River-One","body":"<p>A Java solution using Sets (Collections Framework) Got a 100%</p>\n\n<pre><code>import java.util.Set;\nimport java.util.TreeSet;\npublic class Froggy {\n    public static int solution(int X, int[] A){\n    int steps=-1;\n    Set&lt;Integer&gt; values = new TreeSet&lt;Integer&gt;();\n    for(int i=0; i&lt;A.length;i++){\n        if(A[i]&lt;=X){\n            values.add(A[i]);\n        }\n        if(values.size()==X){\n            steps=i;\n            break;\n        }\n    }\n        return steps;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9019162,"reputation":11,"user_id":6720791,"display_name":"ani"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1471334287,"creation_date":1471334287,"answer_id":38969470,"question_id":19459197,"body_markdown":"Your algorithm is perfect except below code\r\nYour code returns value only if list[iii] matches with searchedValue.\r\n\r\nThe algorithm must be corrected in such a way that, it returns the value if sum == n * ( n + 1) / 2. \r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            int list[] = A;\r\n            int sum = 0;\r\n            int searchedValue = X;\r\n            int sumV = searchedValue * (searchedValue + 1) / 2;   \r\n            List&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\r\n            for (int iii = 0; iii &lt; list.length; iii++) {\r\n                if (list[iii] &lt;= searchedValue &amp;&amp; !arrayList.contains(list[iii])) {\r\n                    sum += list[iii];\r\n                    if (sum == sumV) {\r\n                        return iii;\r\n                    }\r\n                    arrayList.add(list[iii]);\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n\r\n\r\nI think you need to check the performance as well. I just ensured the output only\r\n\r\n\r\n","title":"java codility Frog-River-One","body":"<p>Your algorithm is perfect except below code\nYour code returns value only if list[iii] matches with searchedValue.</p>\n\n<p>The algorithm must be corrected in such a way that, it returns the value if sum == n * ( n + 1) / 2. </p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nclass Solution {\n    public int solution(int X, int[] A) {\n        int list[] = A;\n        int sum = 0;\n        int searchedValue = X;\n        int sumV = searchedValue * (searchedValue + 1) / 2;   \n        List&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\n        for (int iii = 0; iii &lt; list.length; iii++) {\n            if (list[iii] &lt;= searchedValue &amp;&amp; !arrayList.contains(list[iii])) {\n                sum += list[iii];\n                if (sum == sumV) {\n                    return iii;\n                }\n                arrayList.add(list[iii]);\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>\n\n<p>I think you need to check the performance as well. I just ensured the output only</p>\n"},{"tags":[],"owner":{"account_id":1035914,"reputation":561,"user_id":1043220,"accept_rate":0,"display_name":"Egor"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1475180910,"creation_date":1475180910,"answer_id":39779422,"question_id":19459197,"body_markdown":"This solution I&#39;ve posted today gave 100% on codility, but respectivly @rafalio &#39;s answer it requires K times less memory\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class Solution {\r\n\r\n    \tprivate static final int ARRAY_SIZE_LOWER = 1;\r\n    \tprivate static final int ARRAY_SIZE_UPPER = 100000;\r\n    \tprivate static final int NUMBER_LOWER = ARRAY_SIZE_LOWER;\r\n    \tprivate static final int NUMBER_UPPER = ARRAY_SIZE_UPPER;\r\n\r\n    \tpublic static class Set {\r\n    \t\t\r\n    \t\tfinal long[] buckets;\r\n    \t\t\r\n    \t\tpublic Set(int size) {\r\n    \t\t\tthis.buckets = new long[(size % 64 == 0 ? (size/64) : (size/64) + 1)];\r\n    \t\t}\r\n    \t\t\r\n    \t\t/**\r\n    \t\t * number should be greater than zero\r\n    \t\t * @param number\r\n    \t\t */\r\n    \t\tpublic void put(int number) {\r\n    \t\t\tbuckets[getBucketindex(number)] |= getFlag(number); \r\n    \t\t}\r\n    \t\t\r\n    \t\tpublic boolean contains(int number) {\r\n    \t\t\tlong flag = getFlag(number);\r\n    \t\t\t// check if flag is stored\r\n    \t\t\treturn (buckets[getBucketindex(number)] &amp; flag) == flag;\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate int getBucketindex(int number) {\r\n    \t\t\tif (number &lt;= 64) {\r\n    \t\t\t\treturn 0;\r\n    \t\t\t} else if (number &lt;= 128) {\r\n    \t\t\t\treturn 1;\r\n    \t\t\t} else if (number &lt;= 192) {\r\n    \t\t\t\treturn 2;\r\n    \t\t\t} else if (number &lt;= 256) {\r\n    \t\t\t\treturn 3;\r\n    \t\t\t} else if (number &lt;= 320) {\r\n    \t\t\t\treturn 4;\r\n    \t\t\t} else if (number &lt;= 384) {\r\n    \t\t\t\treturn 5;\r\n    \t\t\t} else \r\n    \t\t\t\treturn (number % 64 == 0 ? (number/64) : (number/64) + 1) - 1;\r\n    \t\t}\r\n    \t\t\r\n    \t\tprivate long getFlag(int number) {\r\n    \t\t\tif (number &lt;= 64) {\r\n    \t\t\t\treturn 1L &lt;&lt; number;\r\n    \t\t\t} else\r\n    \t\t\t\treturn 1L &lt;&lt; (number % 64);\r\n    \t\t}\r\n    \t}\r\n\r\n    \tpublic static final int solution(final int X, final int[] A) {\r\n    \t\tif (A.length &lt; ARRAY_SIZE_LOWER || A.length &gt; ARRAY_SIZE_UPPER) {\r\n    \t\t\tthrow new RuntimeException(&quot;Array size out of bounds&quot;);\r\n    \t\t}\r\n    \t\tSet set = new Set(X);\r\n    \t\tint ai;\r\n    \t\tint counter = X;\r\n    \t\tfinal int NUMBER_REAL_UPPER = min(NUMBER_UPPER, X);\r\n    \t\tfor (int i = 0 ; i &lt; A.length; i++) {\r\n    \t\t\tif ((ai = A[i]) &lt; NUMBER_LOWER || ai &gt; NUMBER_REAL_UPPER) {\r\n    \t\t\t\tthrow new RuntimeException(&quot;Number out of bounds&quot;);\r\n    \t\t\t} else if (ai &lt;= X &amp;&amp; !set.contains(ai)) {\r\n    \t\t\t\tcounter--;\r\n    \t\t\t\tif (counter == 0) {\r\n    \t\t\t\t\treturn i;\r\n    \t\t\t\t}\r\n    \t\t\t\tset.put(ai);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn -1;\r\n    \t}\r\n    \t\r\n    \tprivate static int min(int x, int y) {\r\n    \t\treturn (x &lt; y ? x : y);\r\n    \t}\r\n    }\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"java codility Frog-River-One","body":"<p>This solution I've posted today gave 100% on codility, but respectivly @rafalio 's answer it requires K times less memory</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class Solution {\n\n    private static final int ARRAY_SIZE_LOWER = 1;\n    private static final int ARRAY_SIZE_UPPER = 100000;\n    private static final int NUMBER_LOWER = ARRAY_SIZE_LOWER;\n    private static final int NUMBER_UPPER = ARRAY_SIZE_UPPER;\n\n    public static class Set {\n\n        final long[] buckets;\n\n        public Set(int size) {\n            this.buckets = new long[(size % 64 == 0 ? (size/64) : (size/64) + 1)];\n        }\n\n        /**\n         * number should be greater than zero\n         * @param number\n         */\n        public void put(int number) {\n            buckets[getBucketindex(number)] |= getFlag(number); \n        }\n\n        public boolean contains(int number) {\n            long flag = getFlag(number);\n            // check if flag is stored\n            return (buckets[getBucketindex(number)] &amp; flag) == flag;\n        }\n\n        private int getBucketindex(int number) {\n            if (number &lt;= 64) {\n                return 0;\n            } else if (number &lt;= 128) {\n                return 1;\n            } else if (number &lt;= 192) {\n                return 2;\n            } else if (number &lt;= 256) {\n                return 3;\n            } else if (number &lt;= 320) {\n                return 4;\n            } else if (number &lt;= 384) {\n                return 5;\n            } else \n                return (number % 64 == 0 ? (number/64) : (number/64) + 1) - 1;\n        }\n\n        private long getFlag(int number) {\n            if (number &lt;= 64) {\n                return 1L &lt;&lt; number;\n            } else\n                return 1L &lt;&lt; (number % 64);\n        }\n    }\n\n    public static final int solution(final int X, final int[] A) {\n        if (A.length &lt; ARRAY_SIZE_LOWER || A.length &gt; ARRAY_SIZE_UPPER) {\n            throw new RuntimeException(\"Array size out of bounds\");\n        }\n        Set set = new Set(X);\n        int ai;\n        int counter = X;\n        final int NUMBER_REAL_UPPER = min(NUMBER_UPPER, X);\n        for (int i = 0 ; i &lt; A.length; i++) {\n            if ((ai = A[i]) &lt; NUMBER_LOWER || ai &gt; NUMBER_REAL_UPPER) {\n                throw new RuntimeException(\"Number out of bounds\");\n            } else if (ai &lt;= X &amp;&amp; !set.contains(ai)) {\n                counter--;\n                if (counter == 0) {\n                    return i;\n                }\n                set.put(ai);\n            }\n        }\n        return -1;\n    }\n\n    private static int min(int x, int y) {\n        return (x &lt; y ? x : y);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":159605,"reputation":2778,"user_id":379119,"accept_rate":79,"display_name":"Bartzilla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1498241621,"creation_date":1498241621,"answer_id":44727637,"question_id":19459197,"body_markdown":"This is my solution it got me 100/100 and O(N).\r\n\r\n    public int solution(int X, int[] A) {\r\n        Map&lt;Integer, Integer&gt; leaves = new HashMap&lt;&gt;();\r\n\r\n        for (int i = A.length - 1; i &gt;= 0 ; i--)\r\n        {\r\n            leaves.put(A[i] - 1, i);\r\n        }\r\n\r\n        return leaves.size() != X ? -1 : Collections.max(leaves.values());\r\n    }","title":"java codility Frog-River-One","body":"<p>This is my solution it got me 100/100 and O(N).</p>\n\n<pre><code>public int solution(int X, int[] A) {\n    Map&lt;Integer, Integer&gt; leaves = new HashMap&lt;&gt;();\n\n    for (int i = A.length - 1; i &gt;= 0 ; i--)\n    {\n        leaves.put(A[i] - 1, i);\n    }\n\n    return leaves.size() != X ? -1 : Collections.max(leaves.values());\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":423966,"reputation":2299,"user_id":803687,"accept_rate":91,"display_name":"Anand"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1501840939,"creation_date":1501840060,"answer_id":45503552,"question_id":19459197,"body_markdown":"Simple solution 100%\r\n\r\n    public int solution(final int X, final int[] A) {\r\n\r\n    Set&lt;Integer&gt; emptyPosition = new HashSet&lt;Integer&gt;();\r\n\r\n    for (int i = 1; i &lt;= X; i++) {\r\n      emptyPosition.add(i);\r\n    }\r\n    // Once all the numbers are covered for position, that would be the\r\n    // moment when the frog will jump\r\n    for (int i = 0; i &lt; A.length; i++) {\r\n      emptyPosition.remove(A[i]);\r\n      if (emptyPosition.size() == 0) {\r\n        return i;\r\n      }\r\n    }\r\n    return -1;\r\n    }","title":"java codility Frog-River-One","body":"<p>Simple solution 100%</p>\n\n<pre><code>public int solution(final int X, final int[] A) {\n\nSet&lt;Integer&gt; emptyPosition = new HashSet&lt;Integer&gt;();\n\nfor (int i = 1; i &lt;= X; i++) {\n  emptyPosition.add(i);\n}\n// Once all the numbers are covered for position, that would be the\n// moment when the frog will jump\nfor (int i = 0; i &lt; A.length; i++) {\n  emptyPosition.remove(A[i]);\n  if (emptyPosition.size() == 0) {\n    return i;\n  }\n}\nreturn -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8346196,"reputation":333,"user_id":6269836,"accept_rate":75,"display_name":"T&#252;rkmen Mustafa Demirci"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1509349815,"creation_date":1509349815,"answer_id":47010267,"question_id":19459197,"body_markdown":"below is my solution. I  basically created a set which allows uniques only and then go through the array and add every element to set and keep a counter to get the sum of the set and then using the sum formula of consecutive numbers then I got 100% . Note : if you add up the set using java 8 stream api the solution is becoming  quadratic and you get %56 .\r\n\r\n    public static int solution2(int X, int[] A) {\r\n\r\n\t\tlong sum = X * (X + 1) / 2;\r\n\t\tSet&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\r\n\t\tint setSum = 0;\r\n\r\n\t\tfor (int i = 0; i &lt; A.length; i++) {\r\n\t\t\tif (set.add(A[i]))\r\n\t\t\t\tsetSum += A[i];\r\n\r\n\t\t\tif (setSum == sum) {\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn -1;\r\n\t}","title":"java codility Frog-River-One","body":"<p>below is my solution. I  basically created a set which allows uniques only and then go through the array and add every element to set and keep a counter to get the sum of the set and then using the sum formula of consecutive numbers then I got 100% . Note : if you add up the set using java 8 stream api the solution is becoming  quadratic and you get %56 .</p>\n\n<pre><code>public static int solution2(int X, int[] A) {\n\n    long sum = X * (X + 1) / 2;\n    Set&lt;Integer&gt; set = new HashSet&lt;Integer&gt;();\n    int setSum = 0;\n\n    for (int i = 0; i &lt; A.length; i++) {\n        if (set.add(A[i]))\n            setSum += A[i];\n\n        if (setSum == sum) {\n            return i;\n        }\n\n    }\n\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5569866,"reputation":11002,"user_id":4415642,"accept_rate":30,"display_name":"Michał Ziobro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1517346832,"creation_date":1517346832,"answer_id":48530613,"question_id":19459197,"body_markdown":"This is my solution\r\n\r\n    public func FrogRiverOne(_ X : Int, _ A : inout [Int]) -&gt; Int {\r\n        \r\n        var B = [Int](repeating: 0, count: X+1)\r\n        \r\n        for i in 0..&lt;A.count {\r\n            if B[A[i]] == 0 {\r\n                B[A[i]] = i+1\r\n            }\r\n        }\r\n        \r\n        var time = 0\r\n        \r\n        for i in 1...X {\r\n            if( B[i] == 0 ) {\r\n                return -1\r\n            } else {\r\n                time = max(time, B[i])\r\n            }\r\n        }\r\n        \r\n        return time-1\r\n    }\r\n    \r\n    A = [1,2,1,4,2,3,5,4]\r\n    print(&quot;FrogRiverOne: &quot;, FrogRiverOne(5, &amp;A))","title":"java codility Frog-River-One","body":"<p>This is my solution</p>\n\n<pre><code>public func FrogRiverOne(_ X : Int, _ A : inout [Int]) -&gt; Int {\n\n    var B = [Int](repeating: 0, count: X+1)\n\n    for i in 0..&lt;A.count {\n        if B[A[i]] == 0 {\n            B[A[i]] = i+1\n        }\n    }\n\n    var time = 0\n\n    for i in 1...X {\n        if( B[i] == 0 ) {\n            return -1\n        } else {\n            time = max(time, B[i])\n        }\n    }\n\n    return time-1\n}\n\nA = [1,2,1,4,2,3,5,4]\nprint(\"FrogRiverOne: \", FrogRiverOne(5, &amp;A))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":159605,"reputation":2778,"user_id":379119,"accept_rate":79,"display_name":"Bartzilla"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521727333,"creation_date":1521727333,"answer_id":49430674,"question_id":19459197,"body_markdown":"Actually I re-wrote this exercise without seeing my last answer and came up with another solution 100/100 and O(N).\r\n\r\n    public int solution(int X, int[] A) {\r\n        Set&lt;Integer&gt; leaves = new HashSet&lt;&gt;();\r\n            \r\n        for(int i=0; i &lt; A.length; i++) {\r\n            leaves.add(A[i]);\r\n                \r\n            if (leaves.contains(X) &amp;&amp; leaves.size() == X)  return i; \r\n        }\r\n    \r\n        return -1;\r\n    }\r\n\r\nI like this one better because it is even simpler.","title":"java codility Frog-River-One","body":"<p>Actually I re-wrote this exercise without seeing my last answer and came up with another solution 100/100 and O(N).</p>\n\n<pre><code>public int solution(int X, int[] A) {\n    Set&lt;Integer&gt; leaves = new HashSet&lt;&gt;();\n\n    for(int i=0; i &lt; A.length; i++) {\n        leaves.add(A[i]);\n\n        if (leaves.contains(X) &amp;&amp; leaves.size() == X)  return i; \n    }\n\n    return -1;\n}\n</code></pre>\n\n<p>I like this one better because it is even simpler.</p>\n"},{"tags":[],"owner":{"account_id":1811316,"reputation":9110,"user_id":1647320,"accept_rate":85,"display_name":"sapy"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1528152689,"creation_date":1528152689,"answer_id":50689811,"question_id":19459197,"body_markdown":"Short and sweet C++ code. Gets perfect 100%... Drum roll ... [![enter image description here][1]][1]\r\n\r\n    #include &lt;set&gt;\r\n    int solution(int X, vector&lt;int&gt; &amp;A) {\r\n        set&lt;int&gt; final;\r\n        for(unsigned int i =0; i&lt; A.size(); i++){\r\n            final.insert(A[i]);\r\n            if(final.size() == X) return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/1Cw9F.png","title":"java codility Frog-River-One","body":"<p>Short and sweet C++ code. Gets perfect 100%... Drum roll ... <a href=\"https://i.stack.imgur.com/1Cw9F.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Cw9F.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>#include &lt;set&gt;\nint solution(int X, vector&lt;int&gt; &amp;A) {\n    set&lt;int&gt; final;\n    for(unsigned int i =0; i&lt; A.size(); i++){\n        final.insert(A[i]);\n        if(final.size() == X) return i;\n    }\n    return -1;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1626038,"reputation":4046,"user_id":1501582,"accept_rate":54,"display_name":"Stefano Maglione"},"score":1,"creation_date":1540245826,"post_id":52937968,"comment_id":92785825,"body_markdown":"Provide also a text description to your solution","body":"Provide also a text description to your solution"}],"tags":[],"owner":{"account_id":14597785,"reputation":1,"user_id":10542956,"display_name":"Mohamed.Emad"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1540243525,"creation_date":1540243525,"answer_id":52937968,"question_id":19459197,"body_markdown":"     private static int FrogRiverOne(int X, int[] A)\r\n            {\r\n                HashSet&lt;int&gt; occ = new HashSet&lt;int&gt;();\r\n                for (int i = 0; i &lt; A.Length; i++)\r\n                {\r\n                    if (A[i] &lt;= X)\r\n                    {\r\n                        occ.Add(A[i]);\r\n                    }\r\n                    if (occ.Count == X)\r\n                        return i;\r\n                }\r\n                return -1;}","title":"java codility Frog-River-One","body":"<pre><code> private static int FrogRiverOne(int X, int[] A)\n        {\n            HashSet&lt;int&gt; occ = new HashSet&lt;int&gt;();\n            for (int i = 0; i &lt; A.Length; i++)\n            {\n                if (A[i] &lt;= X)\n                {\n                    occ.Add(A[i]);\n                }\n                if (occ.Count == X)\n                    return i;\n            }\n            return -1;}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2994630,"reputation":105,"user_id":4999631,"display_name":"faizal khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545199657,"creation_date":1545199657,"answer_id":53845448,"question_id":19459197,"body_markdown":"    import java.util.Set;\r\n    import java.util.HashSet;\r\n    // you can write to stdout for debugging purposes, e.g.\r\n    // System.out.println(&quot;this is a debug message&quot;);\r\n    \r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n         Set&lt;Integer&gt; positionsCovered = new HashSet&lt;Integer&gt;(); \r\n    //Set covering the leaves fallen to keep track of the distance to destination   \r\n    \t    \r\n    \t    if(X == 1)\r\n    \t\t     return 0 ;\r\n    \t   int position = 0;\t \r\n    \t   for(int i = 0; i &lt; A.length -1 ;i++ ) {\t\t \r\n    \t\t   if(A[i] &lt;= X &amp;&amp; A[i] &gt; 1 &amp;&amp; positionsCovered.size() &lt; (X-1)) { \r\n          //X-1 as we start from 1\r\n    \t\t\t   positionsCovered.add(A[i]);\r\n    \t\t   }\r\n    \t\t   if(positionsCovered.size()== (X-1)) {\r\n    \t\t\t   position = i ;\r\n    \t\t    break;\r\n    \t\t   }\r\n    \t   }\t\t \r\n    \t\treturn position != 0 ? position : -1;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<pre><code>import java.util.Set;\nimport java.util.HashSet;\n// you can write to stdout for debugging purposes, e.g.\n// System.out.println(\"this is a debug message\");\n\nclass Solution {\n    public int solution(int X, int[] A) {\n     Set&lt;Integer&gt; positionsCovered = new HashSet&lt;Integer&gt;(); \n//Set covering the leaves fallen to keep track of the distance to destination   \n\n        if(X == 1)\n             return 0 ;\n       int position = 0;     \n       for(int i = 0; i &lt; A.length -1 ;i++ ) {       \n           if(A[i] &lt;= X &amp;&amp; A[i] &gt; 1 &amp;&amp; positionsCovered.size() &lt; (X-1)) { \n      //X-1 as we start from 1\n               positionsCovered.add(A[i]);\n           }\n           if(positionsCovered.size()== (X-1)) {\n               position = i ;\n            break;\n           }\n       }         \n        return position != 0 ? position : -1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2699693,"reputation":447,"user_id":2330683,"display_name":"Nick"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1557619409,"creation_date":1557619409,"answer_id":56095188,"question_id":19459197,"body_markdown":"My JavaScript solution that got 100 across the board. Since the numbers are assumed to be in the range of the river width, simply storing booleans in a temporary array that can be checked against duplicates will do. Then, once you have amassed as many numbers as the quantity X, you know you have all the leaves necessary to cross.\r\n\r\n    function solution(X, A) {\r\n        covered = 0;\r\n        tempArray = [];\r\n        for (let i = 0; i &lt; A.length; i++) {\r\n            if (!tempArray[A[i]]) {\r\n                tempArray[A[i]] = true;\r\n                covered++\r\n                if(covered === X) return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }","title":"java codility Frog-River-One","body":"<p>My JavaScript solution that got 100 across the board. Since the numbers are assumed to be in the range of the river width, simply storing booleans in a temporary array that can be checked against duplicates will do. Then, once you have amassed as many numbers as the quantity X, you know you have all the leaves necessary to cross.</p>\n\n<pre><code>function solution(X, A) {\n    covered = 0;\n    tempArray = [];\n    for (let i = 0; i &lt; A.length; i++) {\n        if (!tempArray[A[i]]) {\n            tempArray[A[i]] = true;\n            covered++\n            if(covered === X) return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9733324,"reputation":11,"user_id":7217526,"display_name":"Yolisa Ennocent"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1561464871,"creation_date":1561464528,"answer_id":56753730,"question_id":19459197,"body_markdown":"This loops array A and inserts data to array B (1) to every position that the content in A points to..\r\n\r\nIf A[0] = 4, then at B[4-1] = 1, do this until var = X. \r\n\r\n    public static int bestSolution(int X, int[] A) {\r\n            int[] B = new int[X];\r\n            int var = 0;\r\n            for (int i = 0; i &lt; A.length; i++) {\r\n                int content = A[i];\r\n                if (B[content - 1] == 0) {\r\n                    B[content - 1] = 1;\r\n                    var++;\r\n                }\r\n                if(var == X){\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }","title":"java codility Frog-River-One","body":"<p>This loops array A and inserts data to array B (1) to every position that the content in A points to..</p>\n\n<p>If A[0] = 4, then at B[4-1] = 1, do this until var = X. </p>\n\n<pre><code>public static int bestSolution(int X, int[] A) {\n        int[] B = new int[X];\n        int var = 0;\n        for (int i = 0; i &lt; A.length; i++) {\n            int content = A[i];\n            if (B[content - 1] == 0) {\n                B[content - 1] = 1;\n                var++;\n            }\n            if(var == X){\n                return i;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16312574,"reputation":11,"user_id":11780752,"display_name":"Luke Samad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1563919650,"creation_date":1563919650,"answer_id":57172832,"question_id":19459197,"body_markdown":"This one works good on codality 100% out of 100%. It&#39;s very similar to the marker array above but uses a map:\r\n```\r\n\r\n  public int solution(int X, int[] A) {\r\n    int index = -1;\r\n\r\n    Map&lt;Integer, Integer&gt; map = new HashMap();\r\n    for (int i = 0; i &lt; A.length; i++) {\r\n      if (!map.containsKey(A[i])) {\r\n        map.put(A[i], A[i]);\r\n        X--;\r\n        if (X == 0) {index = i;break;}\r\n      }\r\n    }\r\n\r\n    return index;\r\n  }\r\n```","title":"java codility Frog-River-One","body":"<p>This one works good on codality 100% out of 100%. It's very similar to the marker array above but uses a map:</p>\n\n<pre><code>\n  public int solution(int X, int[] A) {\n    int index = -1;\n\n    Map&lt;Integer, Integer&gt; map = new HashMap();\n    for (int i = 0; i &lt; A.length; i++) {\n      if (!map.containsKey(A[i])) {\n        map.put(A[i], A[i]);\n        X--;\n        if (X == 0) {index = i;break;}\n      }\n    }\n\n    return index;\n  }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1026081,"reputation":1655,"user_id":2474922,"display_name":"Flavio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1574349973,"creation_date":1574349973,"answer_id":58978321,"question_id":19459197,"body_markdown":"Yet another 100% Score whith Java:\r\n\r\n\r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            int leafs[] = new int[X];\r\n            int count = X;\r\n            for (int i = 0; i &lt; A.length; i++)\r\n            {   \r\n                if (leafs[A[i]-1] != 1)\r\n                {\r\n                    leafs[A[i]-1] = 1;\r\n                    count--;\r\n                }\r\n                if (count == 0)\r\n                    return i;\r\n            }\r\n            return -1;\r\n        }\r\n    }\r\n","title":"java codility Frog-River-One","body":"<p>Yet another 100% Score whith Java:</p>\n\n<pre><code>class Solution {\n    public int solution(int X, int[] A) {\n        int leafs[] = new int[X];\n        int count = X;\n        for (int i = 0; i &lt; A.length; i++)\n        {   \n            if (leafs[A[i]-1] != 1)\n            {\n                leafs[A[i]-1] = 1;\n                count--;\n            }\n            if (count == 0)\n                return i;\n        }\n        return -1;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2769605,"reputation":371,"user_id":2384464,"display_name":"Dinakar Prasad Maurya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1575445688,"creation_date":1575445688,"answer_id":59171211,"question_id":19459197,"body_markdown":"[Frogt Reiver One Codility 10%][1]\r\n\r\nWith little explanation in python codility 100 %\r\n\r\n    def solution(X, A):\r\n    &quot;&quot;&quot;\r\n    https://app.codility.com/demo/results/trainingQ28RU6-FFE/\r\n    100%\r\n    idea is use array item as K_index in covered time array\r\n    covered time array set the value to be covered as soon as it finds some value\r\n    if position is already covered it checks for all items in array until any of the item in array can be covered\r\n    :param X:\r\n    :param A:\r\n    :return:\r\n    &quot;&quot;&quot;\r\n    # assume all position is covered\r\n    covered_time = [-1] * X\r\n    for K_index in range(0, len(A)):\r\n        print(&quot;Covered position count &quot; + str(X))\r\n        print(X)\r\n        print(covered_time)\r\n        if covered_time[A[K_index] - 1] != -1:\r\n            # A[K] represents the position where one leaf falls at time K\r\n            # position is already covered\r\n            # time is being spent\r\n            continue\r\n        else:\r\n            # This position is to be covered\r\n            # cover this position ie. make array element with marker(array value)\r\n            covered_time[A[K_index] - 1] = K_index\r\n            # reduce position to be cover\r\n            X -= 1\r\n            # as soon as positions are covered return\r\n            if X == 0:\r\n                # now all positions are covered\r\n                return K_index\r\n    # if we are here it means time spent but we can not cover all positions\r\n    return -1\r\n\r\n\r\n    result = solution(5, [1, 3, 1, 4, 2, 3, 5, 4])\r\n    print(&quot;Sol &quot; + str(result))\r\n\r\n\r\n  [1]: https://app.codility.com/demo/results/trainingQ28RU6-FFE/","title":"java codility Frog-River-One","body":"<p><a href=\"https://app.codility.com/demo/results/trainingQ28RU6-FFE/\" rel=\"nofollow noreferrer\">Frogt Reiver One Codility 10%</a></p>\n\n<p>With little explanation in python codility 100 %</p>\n\n<pre><code>def solution(X, A):\n\"\"\"\nhttps://app.codility.com/demo/results/trainingQ28RU6-FFE/\n100%\nidea is use array item as K_index in covered time array\ncovered time array set the value to be covered as soon as it finds some value\nif position is already covered it checks for all items in array until any of the item in array can be covered\n:param X:\n:param A:\n:return:\n\"\"\"\n# assume all position is covered\ncovered_time = [-1] * X\nfor K_index in range(0, len(A)):\n    print(\"Covered position count \" + str(X))\n    print(X)\n    print(covered_time)\n    if covered_time[A[K_index] - 1] != -1:\n        # A[K] represents the position where one leaf falls at time K\n        # position is already covered\n        # time is being spent\n        continue\n    else:\n        # This position is to be covered\n        # cover this position ie. make array element with marker(array value)\n        covered_time[A[K_index] - 1] = K_index\n        # reduce position to be cover\n        X -= 1\n        # as soon as positions are covered return\n        if X == 0:\n            # now all positions are covered\n            return K_index\n# if we are here it means time spent but we can not cover all positions\nreturn -1\n\n\nresult = solution(5, [1, 3, 1, 4, 2, 3, 5, 4])\nprint(\"Sol \" + str(result))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10381368,"reputation":11,"user_id":7656039,"display_name":"saygin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1579560970,"creation_date":1579560970,"answer_id":59831965,"question_id":19459197,"body_markdown":"%100 with js\r\n\r\n\r\n    function solution(X, A) {\r\n        \r\n      let leafSet = new Set();\r\n      \r\n      for (let i = 0; i &lt; A.length; i += 1) {\r\n          \r\n        if(A[i] &lt;= 0) \r\n            continue;\r\n          \r\n        if (A[i] &lt;= X )\r\n            leafSet.add(A[i]); \r\n\r\n\r\n        if (leafSet.size == X)\r\n          return i;\r\n\r\n      }\r\n\r\n      return -1;\r\n    }\r\n\r\n\r\n","title":"java codility Frog-River-One","body":"<p>%100 with js</p>\n\n<pre><code>function solution(X, A) {\n\n  let leafSet = new Set();\n\n  for (let i = 0; i &lt; A.length; i += 1) {\n\n    if(A[i] &lt;= 0) \n        continue;\n\n    if (A[i] &lt;= X )\n        leafSet.add(A[i]); \n\n\n    if (leafSet.size == X)\n      return i;\n\n  }\n\n  return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3340837,"reputation":847,"user_id":2807165,"display_name":"AbdurrahmanY"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1580294224,"creation_date":1580294224,"answer_id":59965256,"question_id":19459197,"body_markdown":"With JavaScript following solution got 100/100.\r\n\r\nDetected time complexity: O(N)\r\n\r\n```\r\nfunction solution(X, A) {\r\n    let leaves = new Set();\r\n\r\n    for (let i = 0; i &lt; A.length; i++) {\r\n        if (A[i] &lt;= X) {\r\n            leaves.add(A[i])\r\n            if (leaves.size == X) {\r\n                return i;\r\n            }\r\n        }\r\n    }\r\n    return -1;    \r\n}\r\n```","title":"java codility Frog-River-One","body":"<p>With JavaScript following solution got 100/100.</p>\n\n<p>Detected time complexity: O(N)</p>\n\n<pre><code>function solution(X, A) {\n    let leaves = new Set();\n\n    for (let i = 0; i &lt; A.length; i++) {\n        if (A[i] &lt;= X) {\n            leaves.add(A[i])\n            if (leaves.size == X) {\n                return i;\n            }\n        }\n    }\n    return -1;    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7904283,"reputation":668,"user_id":5970319,"display_name":"remacr"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1584997892,"creation_date":1584997892,"answer_id":60821591,"question_id":19459197,"body_markdown":"100% Solution using Javascript.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n    function solution(X, A) {\r\n        if (A.length === 0) return -1\r\n        if (A.length &lt; X) return -1\r\n        \r\n        \r\n        let steps = X\r\n        const leaves = {}\r\n        for (let i = 0; i &lt; A.length; i++) {\r\n            if (!leaves[A[i]]) {\r\n                leaves[A[i]] = true\r\n                steps--\r\n            }\r\n            \r\n            if (steps === 0) {\r\n                return i\r\n            }\r\n        }\r\n    \r\n        return -1\r\n    }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Vip0Z.png","title":"java codility Frog-River-One","body":"<p>100% Solution using Javascript.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vip0Z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vip0Z.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>function solution(X, A) {\n    if (A.length === 0) return -1\n    if (A.length &lt; X) return -1\n\n\n    let steps = X\n    const leaves = {}\n    for (let i = 0; i &lt; A.length; i++) {\n        if (!leaves[A[i]]) {\n            leaves[A[i]] = true\n            steps--\n        }\n\n        if (steps === 0) {\n            return i\n        }\n    }\n\n    return -1\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9518424,"reputation":21,"user_id":7074018,"display_name":"Ravi Ranjan Kumar Jha"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1591645450,"creation_date":1591641609,"answer_id":62269050,"question_id":19459197,"body_markdown":"Here is my answer in Python:\r\n\r\n```python\r\ndef solution(X, A):\r\n    # write your code in Python 3.6\r\n    values = set()\r\n    for i in range (len(A)):\r\n        if A[i]&lt;=X :\r\n            values.add(A[i])\r\n        if len(values)==X:\r\n            return i\r\n    return -1\r\n```","title":"java codility Frog-River-One","body":"<p>Here is my answer in Python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def solution(X, A):\n    # write your code in Python 3.6\n    values = set()\n    for i in range (len(A)):\n        if A[i]&lt;=X :\n            values.add(A[i])\n        if len(values)==X:\n            return i\n    return -1\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2536164,"reputation":369,"user_id":2203223,"display_name":"yi.han"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592066686,"creation_date":1592066686,"answer_id":62362855,"question_id":19459197,"body_markdown":"C# Solution with 100% score:\r\n\r\n    using System;\r\n    using System.Collections.Generic;\r\n\r\n    class Solution {\r\n        public int solution(int X, int[] A) {\r\n            // go through the array\r\n            // fill a hashset, until the size of hashset is X\r\n            var set = new HashSet&lt;int&gt;();\r\n            int i = 0;\r\n            foreach (var a in A)\r\n            {\r\n                if (a &lt;= X)\r\n                {\r\n                    set.Add(a);\r\n                }\r\n                if (set.Count == X)\r\n                {\r\n                    return i;\r\n                }\r\n                i++;\r\n            }\r\n            return -1;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<p>C# Solution with 100% score:</p>\n\n<pre><code>using System;\nusing System.Collections.Generic;\n\nclass Solution {\n    public int solution(int X, int[] A) {\n        // go through the array\n        // fill a hashset, until the size of hashset is X\n        var set = new HashSet&lt;int&gt;();\n        int i = 0;\n        foreach (var a in A)\n        {\n            if (a &lt;= X)\n            {\n                set.Add(a);\n            }\n            if (set.Count == X)\n            {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":991929,"reputation":1432,"user_id":1008966,"display_name":"Dan R"},"score":0,"creation_date":1592864159,"post_id":62523714,"comment_id":110572673,"body_markdown":"The question asks about Java specifically, so your solution seems off-topic.","body":"The question asks about Java specifically, so your solution seems off-topic."}],"tags":[],"owner":{"account_id":8959807,"reputation":11,"user_id":6682899,"display_name":"Wisdom Adzorgenu"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1592861051,"creation_date":1592861051,"answer_id":62523714,"question_id":19459197,"body_markdown":"Javascript solution\r\n\r\n```\r\nfunction solution(X, A) {\r\n    // write your code in JavaScript (Node.js 8.9.4)\r\n    let minTime = -1;\r\n    \r\n    //initial positions with leafs\r\n    let posFilled = Array(X+1).fill(false);\r\n    let totalFilled = 0;\r\n\r\n    for(let i=0; i&lt;A.length; i++){\r\n        let step = A[i];\r\n        \r\n        //if already filled, don&#39;t add to total filled\r\n        if(step &lt;= X &amp;&amp; !posFilled[step]) {\r\n            posFilled[step] = true;\r\n            \r\n            //increment total filled\r\n            totalFilled += 1;\r\n        }\r\n\r\n        //if all have been filled, set min time and break        \r\n        if(totalFilled === X){\r\n            minTime = i;\r\n            \r\n            break;\r\n        }\r\n    }\r\n    \r\n    return minTime;\r\n}\r\n```","title":"java codility Frog-River-One","body":"<p>Javascript solution</p>\n<pre><code>function solution(X, A) {\n    // write your code in JavaScript (Node.js 8.9.4)\n    let minTime = -1;\n    \n    //initial positions with leafs\n    let posFilled = Array(X+1).fill(false);\n    let totalFilled = 0;\n\n    for(let i=0; i&lt;A.length; i++){\n        let step = A[i];\n        \n        //if already filled, don't add to total filled\n        if(step &lt;= X &amp;&amp; !posFilled[step]) {\n            posFilled[step] = true;\n            \n            //increment total filled\n            totalFilled += 1;\n        }\n\n        //if all have been filled, set min time and break        \n        if(totalFilled === X){\n            minTime = i;\n            \n            break;\n        }\n    }\n    \n    return minTime;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11087564,"reputation":405,"user_id":8140685,"accept_rate":0,"display_name":"Anand Kulkarni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596333964,"creation_date":1596333964,"answer_id":63211687,"question_id":19459197,"body_markdown":"Here is a unique solution [ already not listed in above using multi map  in C++].\r\nThis scores 100% on codility and detected big(O) complexity is O(N). Esentially build a multi map of position and list of times [ i.e seconds ] at which leaves fall at that position. \r\n\r\n    int solution(int targetPos, vector&lt;int&gt;&amp; A)\r\n    {\r\n      if(!A.size())\r\n        return(-1);\r\n    \r\n      multimap&lt;int, int&gt; positionMap;\r\n      bool insertStatus=false;\r\n      for(size_t i=0;i&lt;A.size();++i)\r\n      {\r\n        positionMap.insert(pair&lt;int, int&gt;(A[i], i));\r\n        if(targetPos==A[i])\r\n          insertStatus=true;\r\n      }\r\n    \r\n      if(!insertStatus)\r\n        return(-1);\r\n    \r\n      int currMax=-1;\r\n      for(int i=1; i&lt;=targetPos;++i)\r\n      {\r\n        auto iter=positionMap.equal_range(i);\r\n        if(!distance(iter.first, iter.second))\r\n          return(-1);\r\n    \r\n        int currMin=INT_MAX;\r\n        for(auto it=iter.first; it!=iter.second; ++it)\r\n        {\r\n          if(it-&gt;second&lt;currMin)\r\n            currMin=it-&gt;second;\r\n        }\r\n        if(currMin&gt;currMax)\r\n          currMax=currMin;\r\n      }\r\n    \r\n      return(currMax);\r\n    }\r\n\r\n","title":"java codility Frog-River-One","body":"<p>Here is a unique solution [ already not listed in above using multi map  in C++].\nThis scores 100% on codility and detected big(O) complexity is O(N). Esentially build a multi map of position and list of times [ i.e seconds ] at which leaves fall at that position.</p>\n<pre><code>int solution(int targetPos, vector&lt;int&gt;&amp; A)\n{\n  if(!A.size())\n    return(-1);\n\n  multimap&lt;int, int&gt; positionMap;\n  bool insertStatus=false;\n  for(size_t i=0;i&lt;A.size();++i)\n  {\n    positionMap.insert(pair&lt;int, int&gt;(A[i], i));\n    if(targetPos==A[i])\n      insertStatus=true;\n  }\n\n  if(!insertStatus)\n    return(-1);\n\n  int currMax=-1;\n  for(int i=1; i&lt;=targetPos;++i)\n  {\n    auto iter=positionMap.equal_range(i);\n    if(!distance(iter.first, iter.second))\n      return(-1);\n\n    int currMin=INT_MAX;\n    for(auto it=iter.first; it!=iter.second; ++it)\n    {\n      if(it-&gt;second&lt;currMin)\n        currMin=it-&gt;second;\n    }\n    if(currMin&gt;currMax)\n      currMax=currMin;\n  }\n\n  return(currMax);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6781219,"reputation":390,"user_id":5221387,"display_name":"amirul"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600575199,"creation_date":1600575199,"answer_id":63975430,"question_id":19459197,"body_markdown":"I think this solution would be easy to understand. \r\nIf you need to know elaborate . Please let me know which part do you want to know. \r\n\r\n\r\n        static int solution(int x, int[]a){\r\n\r\n        int currentPosition = 0;//The frog is initially located on one bank of the river (position 0) \r\n        int[] opositPostion = new int[x+1];//wants to get to the opposite bank (position X+1). \r\n\r\n        for(int i = 0; i &lt; a.length; i++){\r\n\r\n            if (opositPostion[a[i]]== 0){\r\n                opositPostion[i] = a[i];\r\n                currentPosition += 1;\r\n            }\r\n            if (currentPosition == x){//The goal is to find the earliest time when the frog can jump to the other side of the river.\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n\r\n    }","title":"java codility Frog-River-One","body":"<p>I think this solution would be easy to understand.\nIf you need to know elaborate . Please let me know which part do you want to know.</p>\n<pre><code>    static int solution(int x, int[]a){\n\n    int currentPosition = 0;//The frog is initially located on one bank of the river (position 0) \n    int[] opositPostion = new int[x+1];//wants to get to the opposite bank (position X+1). \n\n    for(int i = 0; i &lt; a.length; i++){\n\n        if (opositPostion[a[i]]== 0){\n            opositPostion[i] = a[i];\n            currentPosition += 1;\n        }\n        if (currentPosition == x){//The goal is to find the earliest time when the frog can jump to the other side of the river.\n            return i;\n        }\n    }\n\n    return -1;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17782731,"reputation":7,"user_id":12913575,"display_name":"Ayesha"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1600680227,"creation_date":1600678462,"answer_id":63989045,"question_id":19459197,"body_markdown":"    HashSet&lt;Integer&gt; _hashset = new HashSet&lt;Integer&gt;();\r\n            int occupiedPositions = 0;\r\n    \r\n            for (int i = 0; i &lt; A.length; i++)\r\n            {\r\n                if(A[i] &lt;= X &amp;&amp; _hashset.add(A[i]))\r\n                {\r\n                    occupiedPositions++;\r\n                }\r\n    \r\n                if (occupiedPositions == X)\r\n                    return i;\r\n            }\r\n    \r\n            return -1;\r\n    \r\n    }","title":"java codility Frog-River-One","body":"<pre><code>HashSet&lt;Integer&gt; _hashset = new HashSet&lt;Integer&gt;();\n        int occupiedPositions = 0;\n\n        for (int i = 0; i &lt; A.length; i++)\n        {\n            if(A[i] &lt;= X &amp;&amp; _hashset.add(A[i]))\n            {\n                occupiedPositions++;\n            }\n\n            if (occupiedPositions == X)\n                return i;\n        }\n\n        return -1;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21039619,"reputation":11,"user_id":15462314,"display_name":"Marcin Kowalczyk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1616514095,"creation_date":1616514095,"answer_id":66766476,"question_id":19459197,"body_markdown":"[https://app.codility.com/demo/results/trainingXE7QFJ-TZ7/][1]\r\n\r\n\r\nI have a very simple solution (100% / 100%) using HashSet. Lots of people check unnecessarily whether the Value is less than or equal to X. This task cannot be otherwise.\r\n\r\n    public static int solution(int X, int[] A) {\r\n        Set&lt;Integer&gt; availableFields = new HashSet&lt;&gt;();\r\n\r\n        for (int i = 0; i &lt; A.length; i++) {\r\n            availableFields.add(A[i]);\r\n            if (availableFields.size() == X){\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n\r\n  [1]: https://app.codility.com/demo/results/trainingXE7QFJ-TZ7/","title":"java codility Frog-River-One","body":"<p><a href=\"https://app.codility.com/demo/results/trainingXE7QFJ-TZ7/\" rel=\"nofollow noreferrer\">https://app.codility.com/demo/results/trainingXE7QFJ-TZ7/</a></p>\n<p>I have a very simple solution (100% / 100%) using HashSet. Lots of people check unnecessarily whether the Value is less than or equal to X. This task cannot be otherwise.</p>\n<pre><code>public static int solution(int X, int[] A) {\n    Set&lt;Integer&gt; availableFields = new HashSet&lt;&gt;();\n\n    for (int i = 0; i &lt; A.length; i++) {\n        availableFields.add(A[i]);\n        if (availableFields.size() == X){\n            return i;\n        }\n    }\n\n    return -1;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":16058888,"reputation":51,"user_id":11590404,"display_name":"Kunal"},"score":1,"creation_date":1623040711,"post_id":67866012,"comment_id":119954922,"body_markdown":"Understanding this problem took a while for me, I would like to explain in simple words\n\n1. We can only take a unique step, no step can be repeated.\n2. Consider only the unique step because duplicate should not count, therefore I am increasing the steps counter by 1 if and only if I have not considered it once.\n3. Now since we have reached on the actual value, we have to add by 1 so as to cross the hurdle.","body":"Understanding this problem took a while for me, I would like to explain in simple words  1. We can only take a unique step, no step can be repeated. 2. Consider only the unique step because duplicate should not count, therefore I am increasing the steps counter by 1 if and only if I have not considered it once. 3. Now since we have reached on the actual value, we have to add by 1 so as to cross the hurdle."}],"tags":[],"owner":{"account_id":16058888,"reputation":51,"user_id":11590404,"display_name":"Kunal"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1623040681,"creation_date":1623040681,"answer_id":67866012,"question_id":19459197,"body_markdown":"\r\n\r\n\t public static int solutions(int X, int[] A) {\r\n\t\t    Set&lt;Integer&gt; values = new HashSet&lt;Integer&gt;();\r\n\r\n\t\t    for (int i = 0; i &lt; A.length; i++) {\r\n\t\t        if (values.add(A[i])) {\r\n\t\t        \tX--; \r\n\t\t        }\r\n\t\t        if (X == 0) {\r\n\t\t        \treturn i;\r\n\t\t        }\r\n\t\t    }\r\n\t\t    return -1;\r\n\t\t}","title":"java codility Frog-River-One","body":"<pre><code> public static int solutions(int X, int[] A) {\n        Set&lt;Integer&gt; values = new HashSet&lt;Integer&gt;();\n\n        for (int i = 0; i &lt; A.length; i++) {\n            if (values.add(A[i])) {\n                X--; \n            }\n            if (X == 0) {\n                return i;\n            }\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18008594,"reputation":61,"user_id":13088810,"display_name":"Jeff W"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1624292856,"creation_date":1624292856,"answer_id":68071539,"question_id":19459197,"body_markdown":"Another C# approach (similar to that used by Kamlesh Shewani):\r\n```\r\nusing System;\r\nusing System.Collections.Generic;\r\n\r\nclass Solution {\r\n        public int solution(int X, int[] A)\r\n        {\r\n            var set = new HashSet&lt;int&gt;(A);\r\n            return set.Count != X ? -1 : Array.IndexOf&lt;int&gt;(A, new List&lt;int&gt;(set)[new List&lt;int&gt;(set).Count-1]);\r\n        }\r\n}\r\n```\r\n\r\n\r\n","title":"java codility Frog-River-One","body":"<p>Another C# approach (similar to that used by Kamlesh Shewani):</p>\n<pre><code>using System;\nusing System.Collections.Generic;\n\nclass Solution {\n        public int solution(int X, int[] A)\n        {\n            var set = new HashSet&lt;int&gt;(A);\n            return set.Count != X ? -1 : Array.IndexOf&lt;int&gt;(A, new List&lt;int&gt;(set)[new List&lt;int&gt;(set).Count-1]);\n        }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":511926,"reputation":582,"user_id":1764409,"accept_rate":33,"display_name":"shaikh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627366045,"creation_date":1627366045,"answer_id":68539740,"question_id":19459197,"body_markdown":"Just another answer using hashsets in Java with 100/100 score.\r\n\r\n    &#160;&#160;&#160;&#160;public&#160;int&#160;solution(int&#160;X,&#160;int[]&#160;A)&#160;{    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;Set&lt;Integer&gt;&#160;positions&#160;=&#160;new&#160;HashSet&lt;&gt;();\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for(int&#160;i&#160;=&#160;0;&#160;i&#160;&lt;&#160;A.length;&#160;i++){\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if(A[i]&#160;&lt;=&#160;X)\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;positions.add(A[i]);\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if(positions.size()&#160;==&#160;X)\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;i;\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;}\r\n    &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return&#160;-1;\r\n    &#160;&#160;&#160;&#160;}\r\n\r\n","title":"java codility Frog-River-One","body":"<p>Just another answer using hashsets in Java with 100/100 score.</p>\n<pre><code>    public int solution(int X, int[] A) {            \n        Set&lt;Integer&gt; positions = new HashSet&lt;&gt;();\n        for(int i = 0; i &lt; A.length; i++){\n            if(A[i] &lt;= X)\n                positions.add(A[i]);\n            if(positions.size() == X)\n                return i;\n        }\n        return -1;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18005173,"reputation":11716,"user_id":13086128,"display_name":"Goku - stands with Palestine"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636825695,"creation_date":1636825695,"answer_id":69956793,"question_id":19459197,"body_markdown":"Python #\r\n\r\nI am using OrderedDict from collections and sum of first n numbers to check whether the frog will be able to cross or not.\r\n\r\n    def solution(X, A):\r\n        from collections import OrderedDict as od\r\n        if sum(set(A))!=(X*(X+1))//2:\r\n            return -1\r\n        k=list(od.fromkeys(A).keys())[-1]\r\n        for x,y in enumerate(A):\r\n            if y==k:\r\n                return x","title":"java codility Frog-River-One","body":"<p>Python #</p>\n<p>I am using OrderedDict from collections and sum of first n numbers to check whether the frog will be able to cross or not.</p>\n<pre><code>def solution(X, A):\n    from collections import OrderedDict as od\n    if sum(set(A))!=(X*(X+1))//2:\n        return -1\n    k=list(od.fromkeys(A).keys())[-1]\n    for x,y in enumerate(A):\n        if y==k:\n            return x\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1861368,"reputation":1819,"user_id":1685914,"display_name":"Sumith Ekanayake"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644136467,"creation_date":1644136467,"answer_id":71005456,"question_id":19459197,"body_markdown":"in C#\r\n\r\n    public static int solution(int X, int[] A)\r\n    {\r\n        HashSet&lt;int&gt; hash = new HashSet&lt;int&gt;();\r\n    \r\n        for (int i = 0; i &lt; A.Length; i++)\r\n        {\r\n            if (A[i] &lt;= X)\r\n            {\r\n                hash.Add(A[i]);\r\n    \r\n                if (hash.Count == X)\r\n                    return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }","title":"java codility Frog-River-One","body":"<p>in C#</p>\n<pre><code>public static int solution(int X, int[] A)\n{\n    HashSet&lt;int&gt; hash = new HashSet&lt;int&gt;();\n\n    for (int i = 0; i &lt; A.Length; i++)\n    {\n        if (A[i] &lt;= X)\n        {\n            hash.Add(A[i]);\n\n            if (hash.Count == X)\n                return i;\n        }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19832404,"reputation":51,"user_id":14526649,"display_name":"ayu.sheee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1649396708,"creation_date":1649396708,"answer_id":71792168,"question_id":19459197,"body_markdown":"For Javascript to gain 100% score follow this solution!! I have used Set()\r\n\r\n        function solution(X, A) {\r\n        \r\n            let Position = new Set();\r\n            let n = A.length;\r\n            for(let i=0;i&lt;n;i++){\r\n                 Position.add(A[i]);\r\n                 if(Position.size==X)\r\n        \t       return i;\r\n            }\r\n           if(Position.size!=X){\r\n             return -1;  \r\n           }\r\n        }","title":"java codility Frog-River-One","body":"<p>For Javascript to gain 100% score follow this solution!! I have used Set()</p>\n<pre><code>    function solution(X, A) {\n    \n        let Position = new Set();\n        let n = A.length;\n        for(let i=0;i&lt;n;i++){\n             Position.add(A[i]);\n             if(Position.size==X)\n               return i;\n        }\n       if(Position.size!=X){\n         return -1;  \n       }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1419264,"reputation":3066,"user_id":1344237,"accept_rate":75,"display_name":"iosMentalist"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650136437,"creation_date":1650136437,"answer_id":71896775,"question_id":19459197,"body_markdown":"for swift 100% \r\n\r\n\r\n    public func solution(_ X : Int, _ A : inout [Int]) -&gt; Int {\r\n            var main = Set(1...X)\r\n            for (index,item) in A.enumerated(){\r\n                if let _ = main.remove(item){\r\n                    if main.count == 0{\r\n                        return index\r\n                    }\r\n                }\r\n            }\r\n            return -1\r\n        }\r\n\r\n","title":"java codility Frog-River-One","body":"<p>for swift 100%</p>\n<pre><code>public func solution(_ X : Int, _ A : inout [Int]) -&gt; Int {\n        var main = Set(1...X)\n        for (index,item) in A.enumerated(){\n            if let _ = main.remove(item){\n                if main.count == 0{\n                    return index\n                }\n            }\n        }\n        return -1\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7066006,"reputation":1,"user_id":5409305,"display_name":"Amit Dhawan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658005722,"creation_date":1658005679,"answer_id":73007659,"question_id":19459197,"body_markdown":"Java solution. 100% success on codility\r\n```\r\n public int solution(int X, int[] A) {\r\n\r\n        boolean[] counter = new boolean[X + 1];\r\n        int count = 0;\r\n        for (int i = 0; i &lt; A.length; i++) {\r\n\r\n            if (counter[A[i]] == false) {\r\n                counter[A[i]] = true;\r\n                count++;\r\n                if (count == X) {\r\n                    return i;\r\n                }\r\n            }\r\n\r\n\r\n        }\r\n        \r\n        return -1;\r\n\r\n\r\n    }\r\n````\r\n","title":"java codility Frog-River-One","body":"<p>Java solution. 100% success on codility</p>\n<pre><code> public int solution(int X, int[] A) {\n\n        boolean[] counter = new boolean[X + 1];\n        int count = 0;\n        for (int i = 0; i &lt; A.length; i++) {\n\n            if (counter[A[i]] == false) {\n                counter[A[i]] = true;\n                count++;\n                if (count == X) {\n                    return i;\n                }\n            }\n\n\n        }\n        \n        return -1;\n\n\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27359655,"reputation":1,"user_id":20867473,"display_name":"Vladimir D&#237;az"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672324652,"creation_date":1672324652,"answer_id":74952452,"question_id":19459197,"body_markdown":"Here the solution with C++:\r\n\r\n    #include &lt;algorithm&gt;\r\n    int solution(int X, vector&lt;int&gt; &amp;A) \r\n    {\r\n        vector&lt;bool&gt; boolVec (X,false);\r\n        if(A.size()&gt;0)\r\n        {\r\n           for(unsigned int i=0; i&lt;=A.size()-1; i++)\r\n           {\r\n              // Find in boolean vector\r\n              if (boolVec[A[i]-1] != true)\r\n              {\r\n                 boolVec[A[i]-1] = true;\r\n              }\r\n              // All steps done?\r\n              if (all_of(boolVec.begin(), boolVec.end(), [](bool i){return i; }))\r\n              {\r\n                 return i;\r\n              }\r\n           }\r\n        }\r\n        return -1;\r\n    }","title":"java codility Frog-River-One","body":"<p>Here the solution with C++:</p>\n<pre><code>#include &lt;algorithm&gt;\nint solution(int X, vector&lt;int&gt; &amp;A) \n{\n    vector&lt;bool&gt; boolVec (X,false);\n    if(A.size()&gt;0)\n    {\n       for(unsigned int i=0; i&lt;=A.size()-1; i++)\n       {\n          // Find in boolean vector\n          if (boolVec[A[i]-1] != true)\n          {\n             boolVec[A[i]-1] = true;\n          }\n          // All steps done?\n          if (all_of(boolVec.begin(), boolVec.end(), [](bool i){return i; }))\n          {\n             return i;\n          }\n       }\n    }\n    return -1;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28814739,"reputation":1,"user_id":22068630,"display_name":"Joe Alex Kimani"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686681555,"creation_date":1686681555,"answer_id":76467828,"question_id":19459197,"body_markdown":"This solution utilizes 2 Sets to compute the solution. Time complexity **O(N)**\r\n\r\n    public int solution(int[] A, int X) {\r\n        Set&lt;Integer&gt; requiredLeavesSet = new HashSet&lt;&gt;();\r\n        for (int i = 1; i &lt;= X; i++) {\r\n            requiredLeavesSet.add(i);\r\n        }\r\n        Set&lt;Integer&gt; currentLeavesSet = new HashSet&lt;&gt;();\r\n        for (int i = 0; i &lt; A.length; i++) {\r\n            currentLeavesSet.add(A[i]);\r\n            if (currentLeavesSet.size() &lt; requiredLeavesSet.size()) continue;\r\n\r\n            if (currentLeavesSet.containsAll(requiredLeavesSet)) return i;\r\n        }\r\n        return -1;\r\n    }\r\n\r\nJUnit5 Test Case:\r\n\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;createData&quot;)\r\n    void solutionTest(int numberOfSteps, int[] testInputArray, int expectedValue) {\r\n        assertEquals(expectedValue, frogRiverOne.solution(testInputArray, numberOfSteps));\r\n    }\r\n\r\n    public static Object [][] createData() {\r\n        return new Object [][] {\r\n                new Object [] { 5, new int [] {             1, 3, 1, 4, 2, 3, 5, 4 },  6 },\r\n                new Object [] { 3, new int [] {                               1, 3 }, -1 }, //never gets across\r\n                new Object [] { 2, new int [] {                         1, 1, 1, 1 }, -1 }, //never gets across\r\n                new Object [] { 3, new int [] {                         1, 4, 2, 3 },  3 },\r\n                new Object [] { 2, new int [] {                         1, 4, 2, 3 },  2 },\r\n                new Object [] { 4, new int [] { 1, 2, 3, 2, 3, 3, 1, 2, 2, 4, 2, 1 },  9 },\r\n                new Object [] { 4, new int [] { 1, 2, 3, 2, 3, 3, 1, 2, 4, 4, 2, 1 },  8 },\r\n                new Object [] { 4, new int [] { 1, 2, 3, 4, 3, 3, 1, 2, 4, 4, 2, 1 },  3 },\r\n        };\r\n    }\r\n\r\nAnalysis:\r\n[Codility Analysis Report][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/utwBn.png","title":"java codility Frog-River-One","body":"<p>This solution utilizes 2 Sets to compute the solution. Time complexity <strong>O(N)</strong></p>\n<pre><code>public int solution(int[] A, int X) {\n    Set&lt;Integer&gt; requiredLeavesSet = new HashSet&lt;&gt;();\n    for (int i = 1; i &lt;= X; i++) {\n        requiredLeavesSet.add(i);\n    }\n    Set&lt;Integer&gt; currentLeavesSet = new HashSet&lt;&gt;();\n    for (int i = 0; i &lt; A.length; i++) {\n        currentLeavesSet.add(A[i]);\n        if (currentLeavesSet.size() &lt; requiredLeavesSet.size()) continue;\n\n        if (currentLeavesSet.containsAll(requiredLeavesSet)) return i;\n    }\n    return -1;\n}\n</code></pre>\n<p>JUnit5 Test Case:</p>\n<pre><code>@ParameterizedTest\n@MethodSource(&quot;createData&quot;)\nvoid solutionTest(int numberOfSteps, int[] testInputArray, int expectedValue) {\n    assertEquals(expectedValue, frogRiverOne.solution(testInputArray, numberOfSteps));\n}\n\npublic static Object [][] createData() {\n    return new Object [][] {\n            new Object [] { 5, new int [] {             1, 3, 1, 4, 2, 3, 5, 4 },  6 },\n            new Object [] { 3, new int [] {                               1, 3 }, -1 }, //never gets across\n            new Object [] { 2, new int [] {                         1, 1, 1, 1 }, -1 }, //never gets across\n            new Object [] { 3, new int [] {                         1, 4, 2, 3 },  3 },\n            new Object [] { 2, new int [] {                         1, 4, 2, 3 },  2 },\n            new Object [] { 4, new int [] { 1, 2, 3, 2, 3, 3, 1, 2, 2, 4, 2, 1 },  9 },\n            new Object [] { 4, new int [] { 1, 2, 3, 2, 3, 3, 1, 2, 4, 4, 2, 1 },  8 },\n            new Object [] { 4, new int [] { 1, 2, 3, 4, 3, 3, 1, 2, 4, 4, 2, 1 },  3 },\n    };\n}\n</code></pre>\n<p>Analysis:\n<a href=\"https://i.stack.imgur.com/utwBn.png\" rel=\"nofollow noreferrer\">Codility Analysis Report</a></p>\n"}],"owner":{"account_id":1581224,"reputation":1369,"user_id":1466580,"accept_rate":89,"display_name":"pshemek"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53474,"favorite_count":0,"down_vote_count":1,"up_vote_count":16,"accepted_answer_id":19460553,"answer_count":48,"score":15,"last_activity_date":1686681555,"creation_date":1382131051,"question_id":19459197,"body_markdown":"I have been trying to solve a Java exercise on a Codility web page.\r\n\r\nBelow is the link to the mentioned exercise and my solution.\r\n\r\nhttps://codility.com/demo/results/demoH5GMV3-PV8\r\n\r\nCan anyone tell what can I correct in my code in order to improve the score?\r\n\r\n\r\n**Just in case here is the task description:**\r\n\r\nA small frog wants to get to the other side of a river. The frog is currently located at position 0, and wants to get to position X. Leaves fall from a tree onto the surface of the river.\r\n\r\nYou are given a non-empty zero-indexed array A consisting of N integers representing the falling leaves. A[K] represents the position where one leaf falls at time K, measured in minutes.\r\n\r\nThe goal is to find the earliest time when the frog can jump to the other side of the river. The frog can cross only when leaves appear at every position across the river from 1 to X.\r\n\r\nFor example, you are given integer X = 5 and array A such that:\r\n\r\n      A[0] = 1\r\n      A[1] = 3\r\n      A[2] = 1\r\n      A[3] = 4\r\n      A[4] = 2\r\n      A[5] = 3\r\n      A[6] = 5\r\n      A[7] = 4\r\n\r\nIn minute 6, a leaf falls into position 5. This is the earliest time when leaves appear in every position across the river.\r\n\r\nWrite a function:\r\n\r\n    class Solution { public int solution(int X, int[] A); } \r\n\r\nthat, given a non-empty zero-indexed array A consisting of N integers and integer X, returns the earliest time when the frog can jump to the other side of the river.\r\n\r\nIf the frog is never able to jump to the other side of the river, the function should return −1.\r\n\r\nFor example, given X = 5 and array A such that:\r\n\r\n      A[0] = 1\r\n      A[1] = 3\r\n      A[2] = 1\r\n      A[3] = 4\r\n      A[4] = 2\r\n      A[5] = 3\r\n      A[6] = 5\r\n      A[7] = 4\r\n\r\nthe function should return 6, as explained above. Assume that:\r\n\r\n    N and X are integers within the range [1..100,000];\r\n    each element of array A is an integer within the range [1..X].\r\n\r\nComplexity:\r\n\r\n    expected worst-case time complexity is O(N);\r\n    expected worst-case space complexity is O(X), beyond input storage (not counting the storage required for input arguments).\r\n\r\nElements of input arrays can be modified.\r\n\r\n**And here is my solution:**\r\n\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    class Solution {\r\n    \r\n        public int solution(int X, int[] A) {\r\n            int list[] = A;\r\n            int sum = 0;\r\n            int searchedValue = X;\r\n    \r\n            List&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\r\n    \r\n            for (int iii = 0; iii &lt; list.length; iii++) {\r\n    \r\n                if (list[iii] &lt;= searchedValue &amp;&amp; !arrayList.contains(list[iii])) {\r\n                    sum += list[iii];\r\n                    arrayList.add(list[iii]);\r\n                }\r\n                if (list[iii] == searchedValue) {\r\n                    if (sum == searchedValue * (searchedValue + 1) / 2) {\r\n                        return iii;\r\n                    }\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n    }","title":"java codility Frog-River-One","body":"<p>I have been trying to solve a Java exercise on a Codility web page.</p>\n\n<p>Below is the link to the mentioned exercise and my solution.</p>\n\n<p><a href=\"https://codility.com/demo/results/demoH5GMV3-PV8\" rel=\"noreferrer\">https://codility.com/demo/results/demoH5GMV3-PV8</a></p>\n\n<p>Can anyone tell what can I correct in my code in order to improve the score?</p>\n\n<p><strong>Just in case here is the task description:</strong></p>\n\n<p>A small frog wants to get to the other side of a river. The frog is currently located at position 0, and wants to get to position X. Leaves fall from a tree onto the surface of the river.</p>\n\n<p>You are given a non-empty zero-indexed array A consisting of N integers representing the falling leaves. A[K] represents the position where one leaf falls at time K, measured in minutes.</p>\n\n<p>The goal is to find the earliest time when the frog can jump to the other side of the river. The frog can cross only when leaves appear at every position across the river from 1 to X.</p>\n\n<p>For example, you are given integer X = 5 and array A such that:</p>\n\n<pre><code>  A[0] = 1\n  A[1] = 3\n  A[2] = 1\n  A[3] = 4\n  A[4] = 2\n  A[5] = 3\n  A[6] = 5\n  A[7] = 4\n</code></pre>\n\n<p>In minute 6, a leaf falls into position 5. This is the earliest time when leaves appear in every position across the river.</p>\n\n<p>Write a function:</p>\n\n<pre><code>class Solution { public int solution(int X, int[] A); } \n</code></pre>\n\n<p>that, given a non-empty zero-indexed array A consisting of N integers and integer X, returns the earliest time when the frog can jump to the other side of the river.</p>\n\n<p>If the frog is never able to jump to the other side of the river, the function should return −1.</p>\n\n<p>For example, given X = 5 and array A such that:</p>\n\n<pre><code>  A[0] = 1\n  A[1] = 3\n  A[2] = 1\n  A[3] = 4\n  A[4] = 2\n  A[5] = 3\n  A[6] = 5\n  A[7] = 4\n</code></pre>\n\n<p>the function should return 6, as explained above. Assume that:</p>\n\n<pre><code>N and X are integers within the range [1..100,000];\neach element of array A is an integer within the range [1..X].\n</code></pre>\n\n<p>Complexity:</p>\n\n<pre><code>expected worst-case time complexity is O(N);\nexpected worst-case space complexity is O(X), beyond input storage (not counting the storage required for input arguments).\n</code></pre>\n\n<p>Elements of input arrays can be modified.</p>\n\n<p><strong>And here is my solution:</strong></p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\n\nclass Solution {\n\n    public int solution(int X, int[] A) {\n        int list[] = A;\n        int sum = 0;\n        int searchedValue = X;\n\n        List&lt;Integer&gt; arrayList = new ArrayList&lt;Integer&gt;();\n\n        for (int iii = 0; iii &lt; list.length; iii++) {\n\n            if (list[iii] &lt;= searchedValue &amp;&amp; !arrayList.contains(list[iii])) {\n                sum += list[iii];\n                arrayList.add(list[iii]);\n            }\n            if (list[iii] == searchedValue) {\n                if (sum == searchedValue * (searchedValue + 1) / 2) {\n                    return iii;\n                }\n            }\n        }\n        return -1;\n    }\n}\n</code></pre>\n"},{"tags":["java","mysql","apk"],"owner":{"account_id":28814653,"reputation":1,"user_id":22068573,"display_name":"GrimthereapeR"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1686680637,"answer_count":0,"score":0,"last_activity_date":1686680672,"creation_date":1686680429,"question_id":76467701,"body_markdown":"\r\nIm not quite sure why it&#39;s not working I tried it in IntelliJ it worked out fine using it Android Studio&#39;s while developing my app it just straight up not works and gives me following.\r\n\r\n```\r\njava.sql.SQLException: No suitable driver found for jdbc:mysql://IP(I put an IP(there im not stupid)/BBM\r\nat java.sql.DriverManager.getConnection(DriverManager.java:605)\r\nat java.sql.DriverManager.getConnection(DriverManager.java:218)\r\nat xyz.tton.BBMuisc.MainActivity.authenticate(MainActivity.java:46)\r\nat xyz.tton.BBMuisc.MainActivity.onLogin(MainActivity.java:78)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468)\r\nat android.view.View.performClick(View.java:7506)\r\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1211)\r\nat android.view.View.performClickInternal(View.java:7483)\r\nat android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\r\nat android.view.View$PerformClick.run(View.java:29334)\r\nat android.os.Handler.handleCallback(Handler.java:942)\r\nat android.os.Handler.dispatchMessage(Handler.java:99)\r\nat android.os.Looper.loopOnce(Looper.java:201)\r\nat android.os.Looper.loop(Looper.java:288)\r\nat android.app.ActivityThread.main(ActivityThread.java:7872)\r\nat java.lang.reflect.Method.invoke(Native Method)\r\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\r\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\r\n```\r\n\r\n```\r\npublic static boolean authenticate(String username, String password) {\r\n        try {\r\n            System.out.println(username);\r\n            System.out.println(password);\r\n            Connection conn = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD)\r\n            String query = &quot;SELECT * FROM user_accounts WHERE username = ? AND password = ?&quot;;\r\n            PreparedStatement statement = conn.prepareStatement(query);\r\n            statement.setString(1, username);\r\n            statement.setString(2, password);\r\n            ResultSet resultSet = statement.executeQuery();\r\n\r\n            boolean isValid = resultSet.next();\r\n\r\n            resultSet.close();\r\n            statement.close();\r\n            conn.close();\r\n\r\n            return isValid;\r\n        } catch (SQLException e) {\r\n            System.out.println(&quot;Time Out!&quot;);\r\n        }\r\n\r\n        return false;\r\n    }\r\n```","title":"How would I get this to work mysql JDBC apk","body":"<p>Im not quite sure why it's not working I tried it in IntelliJ it worked out fine using it Android Studio's while developing my app it just straight up not works and gives me following.</p>\n<pre><code>java.sql.SQLException: No suitable driver found for jdbc:mysql://IP(I put an IP(there im not stupid)/BBM\nat java.sql.DriverManager.getConnection(DriverManager.java:605)\nat java.sql.DriverManager.getConnection(DriverManager.java:218)\nat xyz.tton.BBMuisc.MainActivity.authenticate(MainActivity.java:46)\nat xyz.tton.BBMuisc.MainActivity.onLogin(MainActivity.java:78)\nat java.lang.reflect.Method.invoke(Native Method)\nat androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:468)\nat android.view.View.performClick(View.java:7506)\nat com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1211)\nat android.view.View.performClickInternal(View.java:7483)\nat android.view.View.-$$Nest$mperformClickInternal(Unknown Source:0)\nat android.view.View$PerformClick.run(View.java:29334)\nat android.os.Handler.handleCallback(Handler.java:942)\nat android.os.Handler.dispatchMessage(Handler.java:99)\nat android.os.Looper.loopOnce(Looper.java:201)\nat android.os.Looper.loop(Looper.java:288)\nat android.app.ActivityThread.main(ActivityThread.java:7872)\nat java.lang.reflect.Method.invoke(Native Method)\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\nat com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)\n</code></pre>\n<pre><code>public static boolean authenticate(String username, String password) {\n        try {\n            System.out.println(username);\n            System.out.println(password);\n            Connection conn = DriverManager.getConnection(DB_URL, DB_USER, DB_PASSWORD)\n            String query = &quot;SELECT * FROM user_accounts WHERE username = ? AND password = ?&quot;;\n            PreparedStatement statement = conn.prepareStatement(query);\n            statement.setString(1, username);\n            statement.setString(2, password);\n            ResultSet resultSet = statement.executeQuery();\n\n            boolean isValid = resultSet.next();\n\n            resultSet.close();\n            statement.close();\n            conn.close();\n\n            return isValid;\n        } catch (SQLException e) {\n            System.out.println(&quot;Time Out!&quot;);\n        }\n\n        return false;\n    }\n</code></pre>\n"},{"tags":["java","jar"],"comments":[{"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"score":0,"creation_date":1686493152,"post_id":76450896,"comment_id":134802937,"body_markdown":"according javadoc, -1 means size is unknown","body":"according javadoc, -1 means size is unknown"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686495082,"post_id":76450896,"comment_id":134803192,"body_markdown":"`bb` would have to contain a *valid and complete* jar file","body":"<code>bb</code> would have to contain a <i>valid and complete</i> jar file"},{"owner":{"account_id":2919557,"reputation":7353,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"score":0,"creation_date":1686496960,"post_id":76450896,"comment_id":134803410,"body_markdown":"@g00se  It does.   If I add\n`            java.nio.file.Files.write(java.nio.file.Paths.get(&quot;XX2.jar&quot;), bb); `\nthen a valid jar file is produce.   `jar tvf XX2.jar` works, `unzip -l XX2.jar` works, etc.","body":"@g00se  It does.   If I add `            java.nio.file.Files.write(java.nio.file.Paths.get(&quot;XX2.jar&quot;)&zwnj;&#8203;, bb); ` then a valid jar file is produce.   <code>jar tvf XX2.jar</code> works, <code>unzip -l XX2.jar</code> works, etc."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686497257,"post_id":76450896,"comment_id":134803437,"body_markdown":"I don&#39;t see any code making use of those length variables. Can you put that in the question?","body":"I don&#39;t see any code making use of those length variables. Can you put that in the question?"},{"owner":{"account_id":2919557,"reputation":7353,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"score":0,"creation_date":1686497855,"post_id":76450896,"comment_id":134803489,"body_markdown":"@g00se  Done.   I am continuing to tinker with this.","body":"@g00se  Done.   I am continuing to tinker with this."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686499465,"post_id":76450896,"comment_id":134803683,"body_markdown":"Yes, but you gave the *output* from the file but not from the stream","body":"Yes, but you gave the <i>output</i> from the file but not from the stream"}],"answers":[{"comments":[{"owner":{"account_id":2919557,"reputation":7353,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"score":0,"creation_date":1686497066,"post_id":76451103,"comment_id":134803419,"body_markdown":"See comment above.   Writing the `byte[] bb` back out yields a well-formed jar.   All the correct bytes are there.","body":"See comment above.   Writing the <code>byte[] bb</code> back out yields a well-formed jar.   All the correct bytes are there."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686496871,"creation_date":1686496246,"answer_id":76451103,"question_id":76450896,"body_markdown":"According to the javadoc, -1 means that the respective size is unknown.\r\n\r\nAccording to the source code, the values of a ZipEntry / JarEntry&#39;s  size fields are read from the ZIP or JAR file itself.  The logic is a bit complicated&lt;sup&gt;1&lt;/sup&gt;, but immediate explanation for getting a -1 is that the code was unable to extract sizes from the LOC header, or because the sizes were -1 in the LOC header.\r\n\r\nTo figure out what is actually going on in *your* case, you will need to decode the JAR file&#39;s headers by hand.  Note that a JAR file is actually a ZIP file with a manifest, so you can use the format description in the [ZIP file format][1] Wikipedia page as a reference.\r\n\r\nAs suggested by [@g00se&#39;s][2] comment, the problem *could* be that the JAR file you are trying to read is incomplete or malformed.  So another alternative would be to write the bytes to a file and see if a ZIP tool or the `jar` command can read the file.\r\n\r\n-------------------\r\n\r\n&lt;sup&gt;1 - Classic ZIP and ZIP64 represent the sizes differently in the LOC headers.  The `ZipEntry` code has to unpick this.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ZIP_(file_format)\r\n  [2]: https://stackoverflow.com/users/16376827/g00se","title":"java JarEntry getSize() returns -1","body":"<p>According to the javadoc, -1 means that the respective size is unknown.</p>\n<p>According to the source code, the values of a ZipEntry / JarEntry's  size fields are read from the ZIP or JAR file itself.  The logic is a bit complicated<sup>1</sup>, but immediate explanation for getting a -1 is that the code was unable to extract sizes from the LOC header, or because the sizes were -1 in the LOC header.</p>\n<p>To figure out what is actually going on in <em>your</em> case, you will need to decode the JAR file's headers by hand.  Note that a JAR file is actually a ZIP file with a manifest, so you can use the format description in the <a href=\"https://en.wikipedia.org/wiki/ZIP_(file_format)\" rel=\"nofollow noreferrer\">ZIP file format</a> Wikipedia page as a reference.</p>\n<p>As suggested by <a href=\"https://stackoverflow.com/users/16376827/g00se\">@g00se's</a> comment, the problem <em>could</em> be that the JAR file you are trying to read is incomplete or malformed.  So another alternative would be to write the bytes to a file and see if a ZIP tool or the <code>jar</code> command can read the file.</p>\n<hr />\n<p><sup>1 - Classic ZIP and ZIP64 represent the sizes differently in the LOC headers.  The <code>ZipEntry</code> code has to unpick this.</sup></p>\n"}],"owner":{"account_id":2919557,"reputation":7353,"user_id":2502126,"accept_rate":20,"display_name":"Buzz Moschetti"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686680621,"creation_date":1686492945,"question_id":76450896,"body_markdown":"## EDIT 3 ##\r\nIt turns out some jar files will properly report `entry.getSize()`  with `JarStreamInput` and some don&#39;t.  All the jar files I created going back to 2013 (on OSX Java 8 and higher) work and various others like `mongo-spark-connector-10.0.0.jar` work.  Others like `antlr-runtime-4.7.2.jar`, `mongodb-driver-core-4.9.0.jar`, and `hadoop-azure-3.2.0.jar` do not.  But all files properly report size when accessed via `JarFile`.\r\n\r\n\r\n\r\nI have a valid `JarInputStream js` sourced from a database (i.e. not using files on filesystem).  In case there are some nuances to `byte[]`, streams, and unzipping, this is how the `JarInputStream` is set up:\r\n```\r\nbyte[] bb = get complete set of bytes; // print bb.length is 14523 so OK\r\nByteArrayInputStream bas = new ByteArrayInputStream(bb);\r\nJarInputStream js = new JarInputStream(bas);\r\n```\r\n\r\n\r\nI iterate it in this way:\r\n\r\n```\r\n        JarEntry entry;\r\n        while ((entry = js.getNextJarEntry()) != null) {\r\n            if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\r\n                String className = entry.getName().replace(&#39;/&#39;, &#39;.&#39;).substring(0, entry\\\r\n.getName().length() - 6);\r\n                                \r\n                long len = entry.getSize();\r\n                long zlen = entry.getCompressedSize();\r\n\r\n                System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + zlen + &quot;; unZ &quot; + len);\r\n\r\n                if(len &gt; 0) {\r\n                    byte[] classBytes = new byte[len];\r\n                    js.read(classBytes);\r\n\r\n                    System.out.println(&quot;captured [&quot; + className + &quot;]&quot;);\r\n                    classBytesMap.put(className, classBytes);\r\n\t\t       }\r\n\r\n        ...\r\n```\r\nThe loop &quot;works&quot; because it correctly pulls all the class names out so it is clearly walking the input stream properly.  However, both `entry.getSize()` and `entry.getCompressedSize` are always -1.  This is openjdk version &quot;17.0.7&quot; 2023-04-18.\r\n\r\nThe javadoc states that -1 means the size is unknown but there must be a size or some other means by which to process just this entry before moving further down the stream.\r\n\r\nI am not wed to this approach; the ultimate goal is to walk a `JarInputStream` and extract classname-classbyte entries. \r\n\r\n## EDIT\r\nAs a test, the `byte[] bb` array is written back to file `XX2.jar` and then examined using regular `JarFile` classes.  This *works*:\r\n```\r\n        JarFile jf = new JarFile(&quot;XX2.jar&quot;);\r\n        for (java.util.Enumeration&lt;JarEntry&gt; e = jf.entries(); e.hasMoreElements();) {\r\n            entry = e.nextElement();\r\n            if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\r\n                String className = entry.getName().replace(&#39;/&#39;, &#39;.&#39;).substring(0, entry\\\r\n.getName().length() - 6);\r\n                int x = (int)entry.getSize();\r\n                int cx = (int)entry.getCompressedSize();\r\n                System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + cx + &quot;; unZ &quot; + \\\r\nx);\r\n            }\r\n        }\r\n\r\n  class [org.bson.AbstractBsonReader$1]: Z 506; unZ 792\r\n  class [org.bson.AbstractBsonReader$Context]: Z 497; unZ 1227\r\n  class [org.bson.AbstractBsonReader$Mark]: Z 813; unZ 2201\r\n\r\n```\r\nHowever, trying to read that file using a regular `FileInputStream` as we see in many other SO examples does **not work**:\r\n```\r\n      JarInputStream jarInputStream = new JarInputStream(new FileInputStream(&quot;XX2.jar&quot;));\r\n\r\n      loop runs but size and compressedSize are STILL -1.\r\n```\r\n\r\n## EDIT 2\r\nHere is a complete example that demos the problem:\r\n```\r\nimport java.util.jar.JarEntry;\r\nimport java.util.jar.JarInputStream;\r\nimport java.util.jar.JarFile;\r\n\r\nimport java.io.FileInputStream;\r\n\r\nclass jartest {\r\n    public static void showEntry(JarEntry entry) {\r\n        if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\r\n            String className = entry.getName().replace(&#39;/&#39;, &#39;.&#39;).substring(0, entry.get\\\r\nName().length() - 6);\r\n            int x = (int)entry.getSize();\r\n            int cx = (int)entry.getCompressedSize();\r\n            System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + cx + &quot;; unZ &quot; + x);\r\n        }\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        try {\r\n            JarEntry entry;\r\n\r\n            String fname = &quot;XX2.jar&quot;;\r\n\r\n            // THIS WORKS                                                               \r\n            JarFile jf = new JarFile(fname);\r\n            for (java.util.Enumeration&lt;JarEntry&gt; e = jf.entries(); e.hasMoreElements();\\\r\n) {\r\n\t\tentry =\te.nextElement();\r\n                showEntry(entry);\r\n            }\r\n\r\n            // THIS DOES NOT WORK                                                       \r\n            JarInputStream js = new JarInputStream(new FileInputStream(fname));\r\n            while ((entry = js.getNextJarEntry()) != null) {\r\n\t\tshowEntry(entry);\r\n            }\r\n\r\n\t} catch(Exception e) {\r\n            System.out.println(&quot;fail: &quot; + e);\r\n        }\r\n    }\r\n}\r\n\r\n$ java jartest\r\n  class [grun$ExecutionContextImpl]: Z 706; unZ 1245\r\n  class [grun]: Z 3210; unZ 6476\r\n  class [grun$ExecutionContextImpl]: Z -1; unZ -1\r\n  class [grun]: Z -1; unZ -1\r\n```\r\n\r\nAny clues?  Overall it looks like streams are not working but filename based logic does work.","title":"java JarEntry getSize() returns -1","body":"<h2>EDIT 3</h2>\n<p>It turns out some jar files will properly report <code>entry.getSize()</code>  with <code>JarStreamInput</code> and some don't.  All the jar files I created going back to 2013 (on OSX Java 8 and higher) work and various others like <code>mongo-spark-connector-10.0.0.jar</code> work.  Others like <code>antlr-runtime-4.7.2.jar</code>, <code>mongodb-driver-core-4.9.0.jar</code>, and <code>hadoop-azure-3.2.0.jar</code> do not.  But all files properly report size when accessed via <code>JarFile</code>.</p>\n<p>I have a valid <code>JarInputStream js</code> sourced from a database (i.e. not using files on filesystem).  In case there are some nuances to <code>byte[]</code>, streams, and unzipping, this is how the <code>JarInputStream</code> is set up:</p>\n<pre><code>byte[] bb = get complete set of bytes; // print bb.length is 14523 so OK\nByteArrayInputStream bas = new ByteArrayInputStream(bb);\nJarInputStream js = new JarInputStream(bas);\n</code></pre>\n<p>I iterate it in this way:</p>\n<pre><code>        JarEntry entry;\n        while ((entry = js.getNextJarEntry()) != null) {\n            if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\n                String className = entry.getName().replace('/', '.').substring(0, entry\\\n.getName().length() - 6);\n                                \n                long len = entry.getSize();\n                long zlen = entry.getCompressedSize();\n\n                System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + zlen + &quot;; unZ &quot; + len);\n\n                if(len &gt; 0) {\n                    byte[] classBytes = new byte[len];\n                    js.read(classBytes);\n\n                    System.out.println(&quot;captured [&quot; + className + &quot;]&quot;);\n                    classBytesMap.put(className, classBytes);\n               }\n\n        ...\n</code></pre>\n<p>The loop &quot;works&quot; because it correctly pulls all the class names out so it is clearly walking the input stream properly.  However, both <code>entry.getSize()</code> and <code>entry.getCompressedSize</code> are always -1.  This is openjdk version &quot;17.0.7&quot; 2023-04-18.</p>\n<p>The javadoc states that -1 means the size is unknown but there must be a size or some other means by which to process just this entry before moving further down the stream.</p>\n<p>I am not wed to this approach; the ultimate goal is to walk a <code>JarInputStream</code> and extract classname-classbyte entries.</p>\n<h2>EDIT</h2>\n<p>As a test, the <code>byte[] bb</code> array is written back to file <code>XX2.jar</code> and then examined using regular <code>JarFile</code> classes.  This <em>works</em>:</p>\n<pre><code>        JarFile jf = new JarFile(&quot;XX2.jar&quot;);\n        for (java.util.Enumeration&lt;JarEntry&gt; e = jf.entries(); e.hasMoreElements();) {\n            entry = e.nextElement();\n            if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\n                String className = entry.getName().replace('/', '.').substring(0, entry\\\n.getName().length() - 6);\n                int x = (int)entry.getSize();\n                int cx = (int)entry.getCompressedSize();\n                System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + cx + &quot;; unZ &quot; + \\\nx);\n            }\n        }\n\n  class [org.bson.AbstractBsonReader$1]: Z 506; unZ 792\n  class [org.bson.AbstractBsonReader$Context]: Z 497; unZ 1227\n  class [org.bson.AbstractBsonReader$Mark]: Z 813; unZ 2201\n\n</code></pre>\n<p>However, trying to read that file using a regular <code>FileInputStream</code> as we see in many other SO examples does <strong>not work</strong>:</p>\n<pre><code>      JarInputStream jarInputStream = new JarInputStream(new FileInputStream(&quot;XX2.jar&quot;));\n\n      loop runs but size and compressedSize are STILL -1.\n</code></pre>\n<h2>EDIT 2</h2>\n<p>Here is a complete example that demos the problem:</p>\n<pre><code>import java.util.jar.JarEntry;\nimport java.util.jar.JarInputStream;\nimport java.util.jar.JarFile;\n\nimport java.io.FileInputStream;\n\nclass jartest {\n    public static void showEntry(JarEntry entry) {\n        if (!entry.isDirectory() &amp;&amp; entry.getName().endsWith(&quot;.class&quot;)) {\n            String className = entry.getName().replace('/', '.').substring(0, entry.get\\\nName().length() - 6);\n            int x = (int)entry.getSize();\n            int cx = (int)entry.getCompressedSize();\n            System.out.println(&quot;  class [&quot; + className + &quot;]: Z &quot; + cx + &quot;; unZ &quot; + x);\n        }\n    }\n\n    public static void main(String[] args) {\n        try {\n            JarEntry entry;\n\n            String fname = &quot;XX2.jar&quot;;\n\n            // THIS WORKS                                                               \n            JarFile jf = new JarFile(fname);\n            for (java.util.Enumeration&lt;JarEntry&gt; e = jf.entries(); e.hasMoreElements();\\\n) {\n        entry = e.nextElement();\n                showEntry(entry);\n            }\n\n            // THIS DOES NOT WORK                                                       \n            JarInputStream js = new JarInputStream(new FileInputStream(fname));\n            while ((entry = js.getNextJarEntry()) != null) {\n        showEntry(entry);\n            }\n\n    } catch(Exception e) {\n            System.out.println(&quot;fail: &quot; + e);\n        }\n    }\n}\n\n$ java jartest\n  class [grun$ExecutionContextImpl]: Z 706; unZ 1245\n  class [grun]: Z 3210; unZ 6476\n  class [grun$ExecutionContextImpl]: Z -1; unZ -1\n  class [grun]: Z -1; unZ -1\n</code></pre>\n<p>Any clues?  Overall it looks like streams are not working but filename based logic does work.</p>\n"},{"tags":["java","anylogic"],"comments":[{"owner":{"account_id":2486375,"reputation":11068,"user_id":2164728,"accept_rate":62,"display_name":"Benjamin"},"score":0,"creation_date":1686680406,"post_id":76467683,"comment_id":134831686,"body_markdown":"Hey, welcome to SOF. Please add a screenshot of the error and (more importantly) the code that triggers the error. Very hard to help &quot;blindly&quot;. Some tips for asking great questions here for AnyLogic users see https://benjamin-schumann.com/blog/anylogic-stackoverflow","body":"Hey, welcome to SOF. Please add a screenshot of the error and (more importantly) the code that triggers the error. Very hard to help &quot;blindly&quot;. Some tips for asking great questions here for AnyLogic users see <a href=\"https://benjamin-schumann.com/blog/anylogic-stackoverflow\" rel=\"nofollow noreferrer\">benjamin-schumann.com/blog/anylogic-stackoverflow</a>"}],"owner":{"account_id":28814686,"reputation":1,"user_id":22068593,"display_name":"Reem Tourky"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686680238,"creation_date":1686680238,"question_id":76467683,"body_markdown":"i was trying to build a small text comunication model following the steps from &quot;the big book of simulation&quot; chapter 11 and i got an erorr: Description: The method printIn(String) is undefined for the type TextFile. Location: textconnection1/Main/writeToLog - Function\r\nand i would not let me modifiy the java file to fix it.\r\n","title":"AnyLogice Text communication","body":"<p>i was trying to build a small text comunication model following the steps from &quot;the big book of simulation&quot; chapter 11 and i got an erorr: Description: The method printIn(String) is undefined for the type TextFile. Location: textconnection1/Main/writeToLog - Function\nand i would not let me modifiy the java file to fix it.</p>\n"},{"tags":["java","event-handling","anonymous-class"],"comments":[{"owner":{"account_id":259071,"reputation":206364,"user_id":541686,"accept_rate":81,"display_name":"user541686"},"score":1,"creation_date":1295420430,"post_id":4732544,"comment_id":5229719,"body_markdown":"I don&#39;t think that Java anonymous classes provide the kind of lambda closure that you&#39;d expect, but someone please correct me if I&#39;m wrong...","body":"I don&#39;t think that Java anonymous classes provide the kind of lambda closure that you&#39;d expect, but someone please correct me if I&#39;m wrong..."},{"owner":{"account_id":14947,"reputation":4778,"user_id":31118,"accept_rate":63,"display_name":"Ivan Dubrov"},"score":5,"creation_date":1295420538,"post_id":4732544,"comment_id":5229734,"body_markdown":"What are you trying to achieve? Click handler could be executed when &quot;f&quot; is finished.","body":"What are you trying to achieve? Click handler could be executed when &quot;f&quot; is finished."},{"owner":{"display_name":"user467871"},"score":0,"creation_date":1295420882,"post_id":4732544,"comment_id":5229764,"body_markdown":"@Lambert if you want to use a in the onClick method it have to be final @Ivan how can f() method behaves like onClick() method return int when clicked","body":"@Lambert if you want to use a in the onClick method it have to be final @Ivan how can f() method behaves like onClick() method return int when clicked"},{"owner":{"account_id":259071,"reputation":206364,"user_id":541686,"accept_rate":81,"display_name":"user541686"},"score":2,"creation_date":1295421008,"post_id":4732544,"comment_id":5229777,"body_markdown":"That&#39;s what I mean -- it doesn&#39;t support full closure because it doesn&#39;t allow access to non-final variables.","body":"That&#39;s what I mean -- it doesn&#39;t support full closure because it doesn&#39;t allow access to non-final variables."},{"owner":{"account_id":261142,"reputation":47118,"user_id":545127,"accept_rate":69,"display_name":"Raedwald"},"score":0,"creation_date":1374320560,"post_id":4732544,"comment_id":25902260,"body_markdown":"possible duplicate of [Why inner classes require &quot;final&quot; outer instance variables \\[Java\\]?](http://stackoverflow.com/questions/3910324/why-inner-classes-require-final-outer-instance-variables-java)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/3910324/why-inner-classes-require-final-outer-instance-variables-java\">Why inner classes require &quot;final&quot; outer instance variables &#91;Java&#93;?</a>"},{"owner":{"account_id":2367760,"reputation":2249,"user_id":2073130,"accept_rate":80,"display_name":"lcn"},"score":0,"creation_date":1449617164,"post_id":4732544,"comment_id":56083392,"body_markdown":"http://stackoverflow.com/q/12830611/2073130 has a good discussion on the why.","body":"<a href=\"http://stackoverflow.com/q/12830611/2073130\">stackoverflow.com/q/12830611/2073130</a> has a good discussion on the why."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":4,"creation_date":1456317710,"post_id":4732544,"comment_id":58889539,"body_markdown":"Note: as of Java 8, your variable only needs to be *effectively final*","body":"Note: as of Java 8, your variable only needs to be <i>effectively final</i>"},{"owner":{"account_id":3802879,"reputation":1641,"user_id":3156006,"accept_rate":86,"display_name":"Mateen"},"score":0,"creation_date":1527408193,"post_id":4732544,"comment_id":88111285,"body_markdown":"Studied the whole oracle documentation from here https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html still did not find the why answer","body":"Studied the whole oracle documentation from here <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/java/javaOO/&hellip;</a> still did not find the why answer"}],"answers":[{"comments":[{"owner":{"display_name":"user467871"},"score":2,"creation_date":1295421006,"post_id":4732586,"comment_id":5229776,"body_markdown":"thanks for your answer. I know all of this and my solution is better than this. my question is &quot;why only final&quot; ?","body":"thanks for your answer. I know all of this and my solution is better than this. my question is &quot;why only final&quot; ?"},{"owner":{"account_id":14947,"reputation":4778,"user_id":31118,"accept_rate":63,"display_name":"Ivan Dubrov"},"score":6,"creation_date":1295421168,"post_id":4732586,"comment_id":5229796,"body_markdown":"The answer then is that is how they are implemented :)","body":"The answer then is that is how they are implemented :)"},{"owner":{"account_id":8695,"reputation":1603,"user_id":15789,"accept_rate":75,"display_name":"RuntimeException"},"score":1,"creation_date":1446206068,"post_id":4732586,"comment_id":54658762,"body_markdown":"Thanks. I had used the trick above on my own. I was not sure if it is a good idea. If Java does not allow it, there might be a good reason. Your answer clarifies that my `List.forEach` code is safe.","body":"Thanks. I had used the trick above on my own. I was not sure if it is a good idea. If Java does not allow it, there might be a good reason. Your answer clarifies that my <code>List.forEach</code> code is safe."},{"owner":{"account_id":2367760,"reputation":2249,"user_id":2073130,"accept_rate":80,"display_name":"lcn"},"score":0,"creation_date":1449617095,"post_id":4732586,"comment_id":56083359,"body_markdown":"Read http://stackoverflow.com/q/12830611/2073130 for a good discussion of the rationale behind &quot;why only final&quot;.","body":"Read <a href=\"http://stackoverflow.com/q/12830611/2073130\">stackoverflow.com/q/12830611/2073130</a> for a good discussion of the rationale behind &quot;why only final&quot;."},{"owner":{"account_id":251709,"reputation":2827,"user_id":529286,"accept_rate":84,"display_name":"zakmck"},"score":0,"creation_date":1511977059,"post_id":4732586,"comment_id":82074800,"body_markdown":"there are several workarounds. Mine is: final int resf = res; Initially I used the array approach, but I find it to have too a cumbersome syntax. AtomicReference is maybe a little slower (allocates an object).","body":"there are several workarounds. Mine is: final int resf = res; Initially I used the array approach, but I find it to have too a cumbersome syntax. AtomicReference is maybe a little slower (allocates an object)."}],"tags":[],"owner":{"account_id":14947,"reputation":4778,"user_id":31118,"accept_rate":63,"display_name":"Ivan Dubrov"},"comment_count":5,"down_vote_count":3,"up_vote_count":48,"is_accepted":false,"score":45,"last_activity_date":1500024576,"creation_date":1295420771,"answer_id":4732586,"question_id":4732544,"body_markdown":"There is a trick that allows anonymous class to update data in the outer scope.\r\n\r\n    private void f(Button b, final int a) {\r\n        final int[] res = new int[1];\r\n        b.addClickHandler(new ClickHandler() {\r\n            @Override\r\n            public void onClick(ClickEvent event) {\r\n                res[0] = a * 5;\r\n            }\r\n        });\r\n\r\n        // But at this point handler is most likely not executed yet!\r\n        // How should we now res[0] is ready?\r\n    }\r\n\r\nHowever, this trick is not very good due to the synchronization issues. If handler is invoked later, you need to 1) synchronize access to res if handler was invoked from the different thread 2) need to have some sort of flag or indication that res was updated\r\n\r\nThis trick works OK, though, if anonymous class is invoked in the same thread immediately. Like:\r\n\r\n    // ...\r\n\r\n    final int[] res = new int[1];\r\n    Runnable r = new Runnable() { public void run() { res[0] = 123; } };\r\n    r.run();\r\n    System.out.println(res[0]);\r\n\r\n    // ...","title":"Why are only final variables accessible in anonymous class?","body":"<p>There is a trick that allows anonymous class to update data in the outer scope.</p>\n\n<pre><code>private void f(Button b, final int a) {\n    final int[] res = new int[1];\n    b.addClickHandler(new ClickHandler() {\n        @Override\n        public void onClick(ClickEvent event) {\n            res[0] = a * 5;\n        }\n    });\n\n    // But at this point handler is most likely not executed yet!\n    // How should we now res[0] is ready?\n}\n</code></pre>\n\n<p>However, this trick is not very good due to the synchronization issues. If handler is invoked later, you need to 1) synchronize access to res if handler was invoked from the different thread 2) need to have some sort of flag or indication that res was updated</p>\n\n<p>This trick works OK, though, if anonymous class is invoked in the same thread immediately. Like:</p>\n\n<pre><code>// ...\n\nfinal int[] res = new int[1];\nRunnable r = new Runnable() { public void run() { res[0] = 123; } };\nr.run();\nSystem.out.println(res[0]);\n\n// ...\n</code></pre>\n"},{"comments":[{"owner":{"display_name":"user467871"},"score":0,"creation_date":1295421111,"post_id":4732616,"comment_id":5229786,"body_markdown":"I mentioned that &quot;without keeping it as private member&quot;","body":"I mentioned that &quot;without keeping it as private member&quot;"},{"owner":{"account_id":17998813,"reputation":107,"user_id":13081187,"display_name":"chandu_reddim"},"score":0,"creation_date":1613264625,"post_id":4732616,"comment_id":117022600,"body_markdown":"sir Can you atleast briefly what you mean by \n&quot; even if the variable has gone out of scope &quot; sir.","body":"sir Can you atleast briefly what you mean by  &quot; even if the variable has gone out of scope &quot; sir."}],"tags":[],"owner":{"account_id":73935,"reputation":1879,"user_id":212678,"accept_rate":92,"display_name":"Ashfak Balooch"},"comment_count":2,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1500024613,"creation_date":1295420995,"answer_id":4732616,"question_id":4732544,"body_markdown":"You can create a class level variable to get returned value. I mean\r\n\r\n    class A {\r\n        int k = 0;\r\n        private void f(Button b, int a){\r\n            b.addClickHandler(new ClickHandler() {\r\n    \t\t@Override\r\n    \t\tpublic void onClick(ClickEvent event) {\r\n    \t\t\tk = a * 5;\r\n    \t    }\r\n        });\r\n    }\r\n\r\nnow you can get value of K and use it where you want.\r\n\r\n**Answer of your why is :** \r\n\r\nA local inner class instance is tied to Main class and can access the final local variables of its containing method. When the instance uses a final local of its containing method, the variable retains the value it held at the time of the instance&#39;s creation, even if the variable has gone out of scope (this is effectively Java&#39;s crude, limited version of closures).\r\n\r\nBecause a local inner class is neither the member of a class or package, it is not declared with an access level. (Be clear, however, that its own members have access levels like in a normal class.)","title":"Why are only final variables accessible in anonymous class?","body":"<p>You can create a class level variable to get returned value. I mean</p>\n\n<pre><code>class A {\n    int k = 0;\n    private void f(Button b, int a){\n        b.addClickHandler(new ClickHandler() {\n        @Override\n        public void onClick(ClickEvent event) {\n            k = a * 5;\n        }\n    });\n}\n</code></pre>\n\n<p>now you can get value of K and use it where you want.</p>\n\n<p><strong>Answer of your why is :</strong> </p>\n\n<p>A local inner class instance is tied to Main class and can access the final local variables of its containing method. When the instance uses a final local of its containing method, the variable retains the value it held at the time of the instance's creation, even if the variable has gone out of scope (this is effectively Java's crude, limited version of closures).</p>\n\n<p>Because a local inner class is neither the member of a class or package, it is not declared with an access level. (Be clear, however, that its own members have access levels like in a normal class.)</p>\n"},{"comments":[{"owner":{"account_id":14947,"reputation":4778,"user_id":31118,"accept_rate":63,"display_name":"Ivan Dubrov"},"score":3,"creation_date":1295421257,"post_id":4732617,"comment_id":5229806,"body_markdown":"Yeah. Basically, full closures support could be implemented by moving all variables that are referenced in a special auto-generated class.","body":"Yeah. Basically, full closures support could be implemented by moving all variables that are referenced in a special auto-generated class."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1295421335,"post_id":4732617,"comment_id":5229814,"body_markdown":"@Ivan: Like C#, basically. It comes with a fair degree of complexity though, if you want the same sort of functionality as C# where variables from different scopes can be &quot;instantiated&quot; different numbers of times.","body":"@Ivan: Like C#, basically. It comes with a fair degree of complexity though, if you want the same sort of functionality as C# where variables from different scopes can be &quot;instantiated&quot; different numbers of times."},{"owner":{"account_id":198193,"reputation":1515,"user_id":442716,"accept_rate":68,"display_name":"Ustaman Sangat"},"score":1,"creation_date":1316205731,"post_id":4732617,"comment_id":9011110,"body_markdown":"This auto-generated constructor, why can&#39;t I see it using reflection though?","body":"This auto-generated constructor, why can&#39;t I see it using reflection though?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1316207249,"post_id":4732617,"comment_id":9011486,"body_markdown":"@Ustaman: I suspect you could - but it&#39;s a bit too much to go into in comments. I suggest you ask a new question with some sample code.","body":"@Ustaman: I suspect you could - but it&#39;s a bit too much to go into in comments. I suggest you ask a new question with some sample code."},{"owner":{"account_id":198193,"reputation":1515,"user_id":442716,"accept_rate":68,"display_name":"Ustaman Sangat"},"score":3,"creation_date":1316441094,"post_id":4732617,"comment_id":9041817,"body_markdown":"http://stackoverflow.com/questions/7472195/passing-final-variables-to-anonymous-classes","body":"<a href=\"http://stackoverflow.com/questions/7472195/passing-final-variables-to-anonymous-classes\" title=\"passing final variables to anonymous classes\">stackoverflow.com/questions/7472195/&hellip;</a>"},{"owner":{"account_id":446514,"reputation":6210,"user_id":839601,"display_name":"gnat"},"score":1,"creation_date":1374655981,"post_id":4732617,"comment_id":26021495,"body_markdown":"in turn, the reasons _why_ they choose to implement closures that way are discussed in [another question](http://stackoverflow.com/q/17736620/839601). In particular, one of the answers quotes Guy Steele that &quot;prototype implementation *did* allow non-final variables to be referenced from within inner classes...&quot;","body":"in turn, the reasons <i>why</i> they choose to implement closures that way are discussed in <a href=\"http://stackoverflow.com/q/17736620/839601\">another question</a>. In particular, one of the answers quotes Guy Steele that &quot;prototype implementation <i>did</i> allow non-final variables to be referenced from within inner classes...&quot;"},{"owner":{"account_id":1634731,"reputation":3637,"user_id":1508529,"accept_rate":82,"display_name":"Mathias Bader"},"score":12,"creation_date":1414161677,"post_id":4732617,"comment_id":41722707,"body_markdown":"This was all true for Java 7, keep in mind that with Java 8, closures have been introduced and now it is indeed possible to access a non-final field of a class from its inner class.","body":"This was all true for Java 7, keep in mind that with Java 8, closures have been introduced and now it is indeed possible to access a non-final field of a class from its inner class."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1414161726,"post_id":4732617,"comment_id":41722744,"body_markdown":"@mbader: Yup - added a note at the top of the answer.","body":"@mbader: Yup - added a note at the top of the answer."},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":24,"creation_date":1457078186,"post_id":4732617,"comment_id":59251696,"body_markdown":"@MathiasBader: Really? I thought it is still essentially the same mechanism, the compiler is now just clever enough to infer `final` (but it still needs to be effectively final).","body":"@MathiasBader: Really? I thought it is still essentially the same mechanism, the compiler is now just clever enough to infer <code>final</code> (but it still needs to be effectively final)."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1464892021,"post_id":4732617,"comment_id":62683776,"body_markdown":"@Mathias Bader: you could always access non-final *fields*, which are not to be confused with *local* variables, which had to be final and still have to be effectively final, so Java&#160;8 doesn’t change the semantics.","body":"@Mathias Bader: you could always access non-final <i>fields</i>, which are not to be confused with <i>local</i> variables, which had to be final and still have to be effectively final, so Java 8 doesn’t change the semantics."},{"owner":{"account_id":3134196,"reputation":1890,"user_id":2651081,"accept_rate":60,"display_name":"Piyush Kukadiya"},"score":3,"creation_date":1483342023,"post_id":4732617,"comment_id":70051061,"body_markdown":"If anyone is dumb like me and if you are beating your head against the wall just to know What the hack is this Closure....then here you go.. https://www.youtube.com/watch?v=Nj3_DMUXEbE","body":"If anyone is dumb like me and if you are beating your head against the wall just to know What the hack is this Closure....then here you go.. <a href=\"https://www.youtube.com/watch?v=Nj3_DMUXEbE\" rel=\"nofollow noreferrer\">youtube.com/watch?v=Nj3_DMUXEbE</a>"},{"owner":{"account_id":5240236,"reputation":3531,"user_id":4187541,"accept_rate":80,"display_name":"Peter Chaula"},"score":0,"creation_date":1485876622,"post_id":4732617,"comment_id":71101426,"body_markdown":"&quot;..any variables which are used within that class have their values copied in..&quot;. @JonSkeet, is it the values or the references that are copied in?","body":"&quot;..any variables which are used within that class have their values copied in..&quot;. @JonSkeet, is it the values or the references that are copied in?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":1,"creation_date":1485876939,"post_id":4732617,"comment_id":71101675,"body_markdown":"@peter: The values *are* references, assuming the variables are reference type variables. It&#39;s the same kind of &quot;value copy&quot; as assignment to another variable.","body":"@peter: The values <i>are</i> references, assuming the variables are reference type variables. It&#39;s the same kind of &quot;value copy&quot; as assignment to another variable."},{"owner":{"account_id":138791,"reputation":8013,"user_id":343957,"accept_rate":81,"display_name":"mathk"},"score":0,"creation_date":1488538755,"post_id":4732617,"comment_id":72286946,"body_markdown":"Aliasing the activation record could have done the job. The only difficult part that is solvable is to optimised the call stack reification only when you detect that the closure can escape the current call stack. So no final could be needed.I wonder if C# is able to optimise the way they copy the environment.","body":"Aliasing the activation record could have done the job. The only difficult part that is solvable is to optimised the call stack reification only when you detect that the closure can escape the current call stack. So no final could be needed.I wonder if C# is able to optimise the way they copy the environment."},{"owner":{"account_id":1630071,"reputation":1032,"user_id":1515111,"accept_rate":50,"display_name":"rd22"},"score":0,"creation_date":1490429954,"post_id":4732617,"comment_id":73117114,"body_markdown":"@JonSkeet I understand this reasoning for making the local variables final, but then how can non-final instance variables be accessed inside an anonymous inner class? are implicitly referred by a `this`?","body":"@JonSkeet I understand this reasoning for making the local variables final, but then how can non-final instance variables be accessed inside an anonymous inner class? are implicitly referred by a <code>this</code>?"},{"owner":{"account_id":178358,"reputation":25369,"user_id":410289,"accept_rate":0,"display_name":"Jackie"},"score":0,"creation_date":1500478339,"post_id":4732617,"comment_id":77357541,"body_markdown":"is there any specs saying the variable is copied over. if it&#39;s on another mem location, then java probably should leave the original variable mutable, as anyway the copied over variable is on another mem location, and any changes on the new variable should be immune to original ?","body":"is there any specs saying the variable is copied over. if it&#39;s on another mem location, then java probably should leave the original variable mutable, as anyway the copied over variable is on another mem location, and any changes on the new variable should be immune to original ?"},{"owner":{"account_id":6803779,"reputation":711,"user_id":5236247,"accept_rate":100,"display_name":"Adowrath"},"score":0,"creation_date":1505460227,"post_id":4732617,"comment_id":79431222,"body_markdown":"@Iwpro2 You seem to confuse the semantics of &#39;copy&#39; in the Java sense: The inner/anonymous class gets a new reference to the variable/the object behind it. The object itself doesn&#39;t change its memory location in any way. Writes to the original variable could still be allowed, but may confuse developers thinking that the anonymous class could then use the new value.","body":"@Iwpro2 You seem to confuse the semantics of &#39;copy&#39; in the Java sense: The inner/anonymous class gets a new reference to the variable/the object behind it. The object itself doesn&#39;t change its memory location in any way. Writes to the original variable could still be allowed, but may confuse developers thinking that the anonymous class could then use the new value."},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":1,"creation_date":1561079965,"post_id":4732617,"comment_id":99956401,"body_markdown":"@JonSkeet I tried to comprehend your statement - This avoids the compiler...of the &quot;local variables&quot;, but I&#39;m not able to fathom it. I tried to follow other related answers, but fail to get an idea. Please let know as to why local variables have to be copied? Thanks!","body":"@JonSkeet I tried to comprehend your statement - This avoids the compiler...of the &quot;local variables&quot;, but I&#39;m not able to fathom it. I tried to follow other related answers, but fail to get an idea. Please let know as to why local variables have to be copied? Thanks!"},{"owner":{"account_id":86060,"reputation":8056,"user_id":239582,"accept_rate":81,"display_name":"lupchiazoem"},"score":0,"creation_date":1561098468,"post_id":4732617,"comment_id":99960166,"body_markdown":"@JonSkeet As a followup to my earlier comment, if local variables are final or effectively final, why make a copy rather than use them directly?","body":"@JonSkeet As a followup to my earlier comment, if local variables are final or effectively final, why make a copy rather than use them directly?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":2,"creation_date":1561099035,"post_id":4732617,"comment_id":99960369,"body_markdown":"@lupchiazoem: Suppose you return an anonymous inner class instance from a method. The local variables were on the stack - where are they now? How would you expect the instance to refer to them? I&#39;m afraid the topic of &quot;what the C# compiler does with delegates&quot; is far too big to go into in detail in comments, and likewise &quot;what the Java compiler does with anonymous inner classes&quot;.","body":"@lupchiazoem: Suppose you return an anonymous inner class instance from a method. The local variables were on the stack - where are they now? How would you expect the instance to refer to them? I&#39;m afraid the topic of &quot;what the C# compiler does with delegates&quot; is far too big to go into in detail in comments, and likewise &quot;what the Java compiler does with anonymous inner classes&quot;."},{"owner":{"account_id":6622525,"reputation":1314,"user_id":5113701,"accept_rate":80,"display_name":"tom"},"score":0,"creation_date":1599891922,"post_id":4732617,"comment_id":112921286,"body_markdown":"I also have trouble understanding the answer. Is it possible to illustrate with code example that what happens/problems created if non final augments could be used?","body":"I also have trouble understanding the answer. Is it possible to illustrate with code example that what happens/problems created if non final augments could be used?"},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1599893303,"post_id":4732617,"comment_id":112921557,"body_markdown":"@tom: I don&#39;t have time to do that at the moment, I&#39;m afraid.","body":"@tom: I don&#39;t have time to do that at the moment, I&#39;m afraid."},{"owner":{"account_id":12111183,"reputation":130,"user_id":8847871,"display_name":"ParSal"},"score":0,"creation_date":1688368975,"post_id":4732617,"comment_id":135059746,"body_markdown":"If you didn&#39;t understand this at first (like me), read [this answer](https://stackoverflow.com/a/7423059/8847871) first, then come back.","body":"If you didn&#39;t understand this at first (like me), read <a href=\"https://stackoverflow.com/a/7423059/8847871\">this answer</a> first, then come back."}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":23,"down_vote_count":1,"up_vote_count":527,"is_accepted":true,"score":526,"last_activity_date":1457078459,"creation_date":1295421010,"answer_id":4732617,"question_id":4732544,"body_markdown":"As noted in comments, some of this becomes irrelevant in Java 8, where `final` can be implicit. Only an *effectively* final variable can be used in an anonymous inner class or lambda expression though.\r\n\r\n----\r\n\r\nIt&#39;s basically due to the way Java manages [closures](http://en.wikipedia.org/wiki/Closure_%28computer_science%29).\r\n\r\nWhen you create an instance of an anonymous inner class, any variables which are used within that class have their *values* copied in via the autogenerated constructor. This avoids the compiler having to autogenerate various extra types to hold the logical state of the &quot;local variables&quot;, as for example the C# compiler does... (When C# captures a variable in an anonymous function, it really captures the variable - the closure can update the variable in a way which is seen by the main body of the method, and vice versa.)\r\n\r\nAs the value has been copied into the instance of the anonymous inner class, it would look odd if the variable could be modified by the rest of the method - you could have code which appeared to be working with an out-of-date variable (because that&#39;s effectively what *would* be happening... you&#39;d be working with a copy taken at a different time). Likewise if you could make changes within the anonymous inner class, developers might expect those changes to be visible within the body of the enclosing method.\r\n\r\nMaking the variable final removes all these possibilities - as the value can&#39;t be changed  at all, you don&#39;t need to worry about whether such changes will be visible. The only ways to allow the method and the anonymous inner class see each other&#39;s changes is to use a mutable type of some description. This could be the enclosing class itself, an array, a mutable wrapper type... anything like that. Basically it&#39;s a bit like communicating between one method and another: changes made to the *parameters* of one method aren&#39;t seen by its caller, but changes made to the objects *referred to* by the parameters are seen.\r\n\r\nIf you&#39;re interested in a more detailed comparison between Java and C# closures, I have an [article][1] which goes into it further. I wanted to focus on the Java side in this answer :)\r\n\r\n\r\n  [1]: http://csharpindepth.com/Articles/Chapter5/Closures.aspx","title":"Why are only final variables accessible in anonymous class?","body":"<p>As noted in comments, some of this becomes irrelevant in Java 8, where <code>final</code> can be implicit. Only an <em>effectively</em> final variable can be used in an anonymous inner class or lambda expression though.</p>\n\n<hr>\n\n<p>It's basically due to the way Java manages <a href=\"http://en.wikipedia.org/wiki/Closure_%28computer_science%29\" rel=\"noreferrer\">closures</a>.</p>\n\n<p>When you create an instance of an anonymous inner class, any variables which are used within that class have their <em>values</em> copied in via the autogenerated constructor. This avoids the compiler having to autogenerate various extra types to hold the logical state of the \"local variables\", as for example the C# compiler does... (When C# captures a variable in an anonymous function, it really captures the variable - the closure can update the variable in a way which is seen by the main body of the method, and vice versa.)</p>\n\n<p>As the value has been copied into the instance of the anonymous inner class, it would look odd if the variable could be modified by the rest of the method - you could have code which appeared to be working with an out-of-date variable (because that's effectively what <em>would</em> be happening... you'd be working with a copy taken at a different time). Likewise if you could make changes within the anonymous inner class, developers might expect those changes to be visible within the body of the enclosing method.</p>\n\n<p>Making the variable final removes all these possibilities - as the value can't be changed  at all, you don't need to worry about whether such changes will be visible. The only ways to allow the method and the anonymous inner class see each other's changes is to use a mutable type of some description. This could be the enclosing class itself, an array, a mutable wrapper type... anything like that. Basically it's a bit like communicating between one method and another: changes made to the <em>parameters</em> of one method aren't seen by its caller, but changes made to the objects <em>referred to</em> by the parameters are seen.</p>\n\n<p>If you're interested in a more detailed comparison between Java and C# closures, I have an <a href=\"http://csharpindepth.com/Articles/Chapter5/Closures.aspx\" rel=\"noreferrer\">article</a> which goes into it further. I wanted to focus on the Java side in this answer :)</p>\n"},{"tags":[],"owner":{"account_id":36553,"reputation":2661,"user_id":104302,"accept_rate":81,"display_name":"S73417H"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1295421173,"creation_date":1295421173,"answer_id":4732638,"question_id":4732544,"body_markdown":"Methods within an anonomyous inner class may be invoked well after the thread that spawned it has terminated. In your example, the inner class will be invoked on the event dispatch thread and not in the same thread as that which created it. Hence, the scope of the variables will be different. So to protect such variable assignment scope issues you must declare them final.","title":"Why are only final variables accessible in anonymous class?","body":"<p>Methods within an anonomyous inner class may be invoked well after the thread that spawned it has terminated. In your example, the inner class will be invoked on the event dispatch thread and not in the same thread as that which created it. Hence, the scope of the variables will be different. So to protect such variable assignment scope issues you must declare them final.</p>\n"},{"comments":[{"owner":{"account_id":14630,"reputation":16827,"user_id":30316,"accept_rate":82,"display_name":"eljenso"},"score":3,"creation_date":1295439803,"post_id":4732711,"comment_id":5232852,"body_markdown":"I associate &quot;class-level variable&quot; with  `static`. Maybe it is more clear if you use &quot;instance variable&quot; instead.","body":"I associate &quot;class-level variable&quot; with  <code>static</code>. Maybe it is more clear if you use &quot;instance variable&quot; instead."},{"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"score":1,"creation_date":1295456518,"post_id":4732711,"comment_id":5236914,"body_markdown":"well, I used class-level because the technique would work with both instance and static variables.","body":"well, I used class-level because the technique would work with both instance and static variables."},{"owner":{"account_id":8295956,"reputation":169,"user_id":6236211,"accept_rate":20,"display_name":"Saurabh Oza"},"score":0,"creation_date":1548765856,"post_id":4732711,"comment_id":95652355,"body_markdown":"we already know that final are accessible but we want to know why? can you please add some more explanation on why side?","body":"we already know that final are accessible but we want to know why? can you please add some more explanation on why side?"}],"tags":[],"owner":{"account_id":275502,"reputation":16152,"user_id":568406,"display_name":"Zach L"},"comment_count":3,"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1295421753,"creation_date":1295421753,"answer_id":4732711,"question_id":4732544,"body_markdown":"Well, in Java, a variable can be final not just as a parameter, but as a class-level field, like\r\n\r\n    public class Test\r\n    {\r\n     public final int a = 3;\r\n\r\n\r\nor as a local variable, like\r\n\r\n    public static void main(String[] args)\r\n    {\r\n     final int a = 3;\r\nIf you want to access and modify a variable from an anonymous class, you might want to make the variable a **class-level** variable in the **enclosing** class.\r\n\r\n    public class Test\r\n    {\r\n     public int a;\r\n     public void doSomething()\r\n     {\r\n      Runnable runnable =\r\n       new Runnable()\r\n       {\r\n        public void run()\r\n        {\r\n         System.out.println(a);\r\n         a = a+1;\r\n        }\r\n       };\r\n     }\r\n    }\r\n\r\n\r\nYou can&#39;t have a variable as final **and** give it a new value. `final` means just that: the value is unchangeable and final.\r\n\r\nAnd since it&#39;s final, Java can safely **copy** it to local anonymous classes. You&#39;re not getting some *reference* to the int (especially since you can&#39;t have references to primitives like int in Java, just references to **Objects**).\r\n\r\n It just copies over the value of a into an implicit int called a in your anonymous class.\r\n","title":"Why are only final variables accessible in anonymous class?","body":"<p>Well, in Java, a variable can be final not just as a parameter, but as a class-level field, like</p>\n\n<pre><code>public class Test\n{\n public final int a = 3;\n</code></pre>\n\n<p>or as a local variable, like</p>\n\n<pre><code>public static void main(String[] args)\n{\n final int a = 3;\n</code></pre>\n\n<p>If you want to access and modify a variable from an anonymous class, you might want to make the variable a <strong>class-level</strong> variable in the <strong>enclosing</strong> class.</p>\n\n<pre><code>public class Test\n{\n public int a;\n public void doSomething()\n {\n  Runnable runnable =\n   new Runnable()\n   {\n    public void run()\n    {\n     System.out.println(a);\n     a = a+1;\n    }\n   };\n }\n}\n</code></pre>\n\n<p>You can't have a variable as final <strong>and</strong> give it a new value. <code>final</code> means just that: the value is unchangeable and final.</p>\n\n<p>And since it's final, Java can safely <strong>copy</strong> it to local anonymous classes. You're not getting some <em>reference</em> to the int (especially since you can't have references to primitives like int in Java, just references to <strong>Objects</strong>).</p>\n\n<p>It just copies over the value of a into an implicit int called a in your anonymous class.</p>\n"},{"tags":[],"owner":{"account_id":36858,"reputation":113744,"user_id":105224,"accept_rate":73,"display_name":"Andreas Dolk"},"comment_count":0,"down_vote_count":0,"up_vote_count":18,"is_accepted":false,"score":18,"last_activity_date":1295422183,"creation_date":1295422183,"answer_id":4732762,"question_id":4732544,"body_markdown":"An anonymous class is an *inner class* and the strict rule applies to *inner classes* [(JLS 8.1.3)][1]:\r\n\r\n&gt; Any local variable, formal method parameter or exception handler parameter used but not declared in an inner class **must be declared final**. Any local variable, used but not declared in an inner class **must be definitely assigned before the body of the inner class**.\r\n\r\nI haven&#39;t found a reason or an explanation on the jls or jvms yet, but we do know, that the compiler creates a separate class file for each inner class and it has to make sure, that the methods declared on this class file (on byte code level) at least have access to the values of local variables.\r\n\r\n([Jon has the complete answer][2] - I keep this one undeleted because one might interested in the JLS rule)\r\n\r\n\r\n  [1]: http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.1.3\r\n  [2]: https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class/4732617#4732617","title":"Why are only final variables accessible in anonymous class?","body":"<p>An anonymous class is an <em>inner class</em> and the strict rule applies to <em>inner classes</em> <a href=\"http://java.sun.com/docs/books/jls/third_edition/html/classes.html#8.1.3\" rel=\"noreferrer\">(JLS 8.1.3)</a>:</p>\n\n<blockquote>\n  <p>Any local variable, formal method parameter or exception handler parameter used but not declared in an inner class <strong>must be declared final</strong>. Any local variable, used but not declared in an inner class <strong>must be definitely assigned before the body of the inner class</strong>.</p>\n</blockquote>\n\n<p>I haven't found a reason or an explanation on the jls or jvms yet, but we do know, that the compiler creates a separate class file for each inner class and it has to make sure, that the methods declared on this class file (on byte code level) at least have access to the values of local variables.</p>\n\n<p>(<a href=\"https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class/4732617#4732617\">Jon has the complete answer</a> - I keep this one undeleted because one might interested in the JLS rule)</p>\n"},{"tags":[],"owner":{"account_id":544312,"reputation":507,"user_id":913717,"accept_rate":80,"display_name":"Bruce Zu"},"comment_count":0,"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1314560314,"creation_date":1314518867,"answer_id":7219749,"question_id":4732544,"body_markdown":"    private void f(Button b, final int a[]) {\r\n\r\n\t\tb.addClickHandler(new ClickHandler() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void onClick(ClickEvent event) {\r\n\t\t\t\ta[0] = a[0] * 5;\r\n\r\n\t\t\t}\r\n\t\t});\r\n\t}","title":"Why are only final variables accessible in anonymous class?","body":"<pre><code>private void f(Button b, final int a[]) {\n\n    b.addClickHandler(new ClickHandler() {\n\n        @Override\n        public void onClick(ClickEvent event) {\n            a[0] = a[0] * 5;\n\n        }\n    });\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1429890,"reputation":6439,"user_id":1352530,"accept_rate":75,"display_name":"Whimusical"},"comment_count":0,"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1343439464,"creation_date":1343439464,"answer_id":11697533,"question_id":4732544,"body_markdown":"Maybe this trick gives u an idea\r\n\r\n    Boolean var= new anonymousClass(){\r\n\t    private String myVar; //String for example\r\n        @Overriden public Boolean method(int i){\r\n              //use myVar and i\r\n        }\r\n        public String setVar(String var){myVar=var; return this;} //Returns self instane\r\n    }.setVar(&quot;Hello&quot;).method(3);","title":"Why are only final variables accessible in anonymous class?","body":"<p>Maybe this trick gives u an idea</p>\n\n<pre><code>Boolean var= new anonymousClass(){\n    private String myVar; //String for example\n    @Overriden public Boolean method(int i){\n          //use myVar and i\n    }\n    public String setVar(String var){myVar=var; return this;} //Returns self instane\n}.setVar(\"Hello\").method(3);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6718247,"reputation":909,"user_id":5179352,"accept_rate":42,"display_name":"Mike76"},"score":0,"creation_date":1472303619,"post_id":18555594,"comment_id":65704491,"body_markdown":"This is not how it is implemented in languages like C# that support this feature. In fact, the compiler changes the variable from a local variable to an instance variable, or it creates an extra data structure for these variables that can outlife the scope of the outer class. However, there are no &quot;multiple copies of local variables&quot;","body":"This is not how it is implemented in languages like C# that support this feature. In fact, the compiler changes the variable from a local variable to an instance variable, or it creates an extra data structure for these variables that can outlife the scope of the outer class. However, there are no &quot;multiple copies of local variables&quot;"},{"owner":{"account_id":6803779,"reputation":711,"user_id":5236247,"accept_rate":100,"display_name":"Adowrath"},"score":0,"creation_date":1505460613,"post_id":18555594,"comment_id":79431438,"body_markdown":"Mike76 I haven&#39;t had a look at C#&#39;s implementation, but Scala does the second thing you mentioned I think: If an `Int` is being reassigned to inside a closure, change that variable to an instance of `IntRef` (essentially a mutable `Integer` wrapper). Every variable access is then rewritten accordingly.","body":"Mike76 I haven&#39;t had a look at C#&#39;s implementation, but Scala does the second thing you mentioned I think: If an <code>Int</code> is being reassigned to inside a closure, change that variable to an instance of <code>IntRef</code> (essentially a mutable <code>Integer</code> wrapper). Every variable access is then rewritten accordingly."}],"tags":[],"owner":{"account_id":2606443,"reputation":464,"user_id":2257531,"display_name":"Swapnil Gangrade"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1378014063,"creation_date":1378014063,"answer_id":18555594,"question_id":4732544,"body_markdown":"The reason why the access has been restricted only to the local final variables is that if all the local variables would be made accessible then they would first required to be copied to a separate section where inner classes can have access to them and maintaining multiple copies of mutable local variables may lead to inconsistent data. Whereas final variables are immutable and hence any number of copies to them will not have any impact on the consistency of data.","title":"Why are only final variables accessible in anonymous class?","body":"<p>The reason why the access has been restricted only to the local final variables is that if all the local variables would be made accessible then they would first required to be copied to a separate section where inner classes can have access to them and maintaining multiple copies of mutable local variables may lead to inconsistent data. Whereas final variables are immutable and hence any number of copies to them will not have any impact on the consistency of data.</p>\n"},{"tags":[],"owner":{"account_id":5801307,"reputation":31,"user_id":4575395,"display_name":"ola_star"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1424175606,"creation_date":1424175606,"answer_id":28561328,"question_id":4732544,"body_markdown":"When an anonymous inner class is defined within the body of a method, all variables declared final in the scope of that method are accessible from within the inner class. For scalar values, once it has been assigned, the value of the final variable cannot change. For object values, the reference cannot change. This allows the Java compiler to &quot;capture&quot; the value of the variable at run-time and store a copy as a field in the inner class. Once the outer method has terminated and its stack frame has been removed, the original variable is gone but the inner class&#39;s private copy persists in the class&#39;s own memory.\r\n\r\n(http://en.wikipedia.org/wiki/Final_%28Java%29)","title":"Why are only final variables accessible in anonymous class?","body":"<p>When an anonymous inner class is defined within the body of a method, all variables declared final in the scope of that method are accessible from within the inner class. For scalar values, once it has been assigned, the value of the final variable cannot change. For object values, the reference cannot change. This allows the Java compiler to \"capture\" the value of the variable at run-time and store a copy as a field in the inner class. Once the outer method has terminated and its stack frame has been removed, the original variable is gone but the inner class's private copy persists in the class's own memory.</p>\n\n<p>(<a href=\"http://en.wikipedia.org/wiki/Final_%28Java%29\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Final_%28Java%29</a>)</p>\n"},{"tags":[],"owner":{"account_id":138791,"reputation":8013,"user_id":343957,"accept_rate":81,"display_name":"mathk"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1500903715,"creation_date":1500903715,"answer_id":45282241,"question_id":4732544,"body_markdown":"As [Jon][1] has the implementation details answer an other possible answer would be that the JVM doesn&#39;t want to handle write in record that have ended his activation.\r\n\r\nConsider the use case where your lambdas instead of being apply, is stored in some place and run later.\r\n\r\nI remember that in Smalltalk you would get an illegal store raised when you do such modification.\r\n\r\n  [1]: https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class/4732617#4732617","title":"Why are only final variables accessible in anonymous class?","body":"<p>As <a href=\"https://stackoverflow.com/questions/4732544/why-are-only-final-variables-accessible-in-anonymous-class/4732617#4732617\">Jon</a> has the implementation details answer an other possible answer would be that the JVM doesn't want to handle write in record that have ended his activation.</p>\n\n<p>Consider the use case where your lambdas instead of being apply, is stored in some place and run later.</p>\n\n<p>I remember that in Smalltalk you would get an illegal store raised when you do such modification.</p>\n"},{"comments":[{"owner":{"account_id":9143065,"reputation":2029,"user_id":6800303,"display_name":"NitinSingh"},"score":0,"creation_date":1531909285,"post_id":51398846,"comment_id":89769818,"body_markdown":"OP is asking for reasons as to why something is required. Hence you should point out how your code is addressing it","body":"OP is asking for reasons as to why something is required. Hence you should point out how your code is addressing it"}],"tags":[],"owner":{"account_id":13983004,"reputation":1,"user_id":10098761,"display_name":"Wasim"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531911655,"creation_date":1531907284,"answer_id":51398846,"question_id":4732544,"body_markdown":"Try this code,\r\n\r\nCreate Array List and put value inside that and return it :\r\n    \r\n    private ArrayList f(Button b, final int a)\r\n    {\r\n        final ArrayList al = new ArrayList();\r\n        b.addClickHandler(new ClickHandler() {\r\n        \r\n             @Override\r\n            public void onClick(ClickEvent event) {\r\n                 int b = a*5;\r\n                 al.add(b);\r\n            }\r\n        });\r\n        return al;\r\n    }","title":"Why are only final variables accessible in anonymous class?","body":"<p>Try this code,</p>\n\n<p>Create Array List and put value inside that and return it :</p>\n\n<pre><code>private ArrayList f(Button b, final int a)\n{\n    final ArrayList al = new ArrayList();\n    b.addClickHandler(new ClickHandler() {\n\n         @Override\n        public void onClick(ClickEvent event) {\n             int b = a*5;\n             al.add(b);\n        }\n    });\n    return al;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3032275,"reputation":210,"user_id":2571045,"display_name":"Benjamin Curtis Drake"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1544699960,"creation_date":1541877293,"answer_id":53242527,"question_id":4732544,"body_markdown":"To understand the rationale for this restriction, consider the following program:\r\n\r\n    public class Program {\r\n\t\r\n\t    interface Interface {\r\n\t\t    public void printInteger();\r\n\t    }\r\n\t    static Interface interfaceInstance = null;\r\n\r\n\t    static void initialize(int val) {\r\n\t\t    class Impl implements Interface {\r\n\t\t\t    @Override\r\n\t\t\t    public void printInteger() {\r\n\t\t\t\t    System.out.println(val);\r\n\t\t\t    }\r\n\t\t    }\r\n\t\t    interfaceInstance = new Impl();\r\n\t    }\r\n\r\n\t    public static void main(String[] args) {\r\n\t\t    initialize(12345);\r\n\t\t    interfaceInstance.printInteger();\r\n\t    }\r\n    }\r\n\r\nThe *interfaceInstance* remains in memory after the *initialize* method returns, but the parameter *val* does not.  The JVM can’t access a local variable outside its scope, so Java makes the subsequent call to *printInteger* work by copying the value of *val* to an implicit field of the same name within *interfaceInstance*.  The *interfaceInstance* is said to have **captured** the value of the local parameter.  If the parameter weren’t final (or effectively final) its value could change, becoming out of sync with the captured value, potentially causing unintuitive behavior.","title":"Why are only final variables accessible in anonymous class?","body":"<p>To understand the rationale for this restriction, consider the following program:</p>\n\n<pre><code>public class Program {\n\n    interface Interface {\n        public void printInteger();\n    }\n    static Interface interfaceInstance = null;\n\n    static void initialize(int val) {\n        class Impl implements Interface {\n            @Override\n            public void printInteger() {\n                System.out.println(val);\n            }\n        }\n        interfaceInstance = new Impl();\n    }\n\n    public static void main(String[] args) {\n        initialize(12345);\n        interfaceInstance.printInteger();\n    }\n}\n</code></pre>\n\n<p>The <em>interfaceInstance</em> remains in memory after the <em>initialize</em> method returns, but the parameter <em>val</em> does not.  The JVM can’t access a local variable outside its scope, so Java makes the subsequent call to <em>printInteger</em> work by copying the value of <em>val</em> to an implicit field of the same name within <em>interfaceInstance</em>.  The <em>interfaceInstance</em> is said to have <strong>captured</strong> the value of the local parameter.  If the parameter weren’t final (or effectively final) its value could change, becoming out of sync with the captured value, potentially causing unintuitive behavior.</p>\n"},{"tags":[],"owner":{"account_id":1677099,"reputation":10905,"user_id":1542363,"accept_rate":92,"display_name":"Sam YC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579666049,"creation_date":1579666049,"answer_id":59852473,"question_id":4732544,"body_markdown":"Java anonymous class is very similar to Javascript closure, but Java implement that in different way. (check Andersen&#39;s answer)\r\n\r\nSo in order not to confuse the Java Developer with the strange behavior that might occur for those coming from Javascript background. I guess that&#39;s why they force us to use `final`, this is not the JVM limitation.\r\n\r\nLet&#39;s look at the Javascript example below:\r\n\r\n    var add = (function () {\r\n      var counter = 0;\r\n      \r\n      var func = function () {\r\n    \tconsole.log(&quot;counter now = &quot; + counter);\r\n    \tcounter += 1; \r\n      };\r\n      \r\n      counter = 100; // line 1, this one need to be final in Java\r\n      \r\n      return func;\r\n      \r\n    })();\r\n    \r\n    \r\n    add(); // this will print out 100 in Javascript but 0 in Java\r\n\r\n\r\n\r\nIn Javascript, the `counter` value will be 100, because there is only one `counter` variable from the beginning to end.\r\n\r\nBut in Java, if there is no `final`, it will print out `0`, because while the inner object is being created, the `0` value is copied to the inner class object&#39;s hidden properties. (there are two integer variable here, one in the local method, another one in inner class hidden properties)\r\n\r\nSo any changes after the inner object creation (like line 1), it will not affect the inner object. So it will make confusion between two different outcome and behaviour (between Java and Javascript).\r\n\r\nI believe that&#39;s why, Java decide to force it to be final, so the data is &#39;consistent&#39; from the beginning to end. ","title":"Why are only final variables accessible in anonymous class?","body":"<p>Java anonymous class is very similar to Javascript closure, but Java implement that in different way. (check Andersen's answer)</p>\n\n<p>So in order not to confuse the Java Developer with the strange behavior that might occur for those coming from Javascript background. I guess that's why they force us to use <code>final</code>, this is not the JVM limitation.</p>\n\n<p>Let's look at the Javascript example below:</p>\n\n<pre><code>var add = (function () {\n  var counter = 0;\n\n  var func = function () {\n    console.log(\"counter now = \" + counter);\n    counter += 1; \n  };\n\n  counter = 100; // line 1, this one need to be final in Java\n\n  return func;\n\n})();\n\n\nadd(); // this will print out 100 in Javascript but 0 in Java\n</code></pre>\n\n<p>In Javascript, the <code>counter</code> value will be 100, because there is only one <code>counter</code> variable from the beginning to end.</p>\n\n<p>But in Java, if there is no <code>final</code>, it will print out <code>0</code>, because while the inner object is being created, the <code>0</code> value is copied to the inner class object's hidden properties. (there are two integer variable here, one in the local method, another one in inner class hidden properties)</p>\n\n<p>So any changes after the inner object creation (like line 1), it will not affect the inner object. So it will make confusion between two different outcome and behaviour (between Java and Javascript).</p>\n\n<p>I believe that's why, Java decide to force it to be final, so the data is 'consistent' from the beginning to end. </p>\n"},{"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615927318,"creation_date":1591724086,"answer_id":62288580,"question_id":4732544,"body_markdown":"Java `final` variable inside an `inner class`[&lt;sup&gt;[About]&lt;/sup&gt;][1]\r\n\r\ninner class can use only\r\n\r\n1. reference from outer class\r\n2. final local variables from out of scope which are a reference type (e.g. `Object`...) \r\n3. value(primitive) (e.g. `int`...) type can be **wrapped** by a final reference type. `IntelliJ IDEA` can help you covert it to one element **array**\r\n\r\nWhen a `non static nested` (`inner class`) is generated by compiler - a new class - `&lt;OuterClass&gt;$&lt;InnerClass&gt;.class` is created and **bounded** parameters are passed into **constructor**[&lt;sup&gt;[Local variable on stack]&lt;/sup&gt;][2] It is similar to closure[&lt;sup&gt;\\[Swift about\\]&lt;/sup&gt;][3]\r\n\r\nfinal variable is a variable which can not be reassign. final reference variable still can be changed by modifying a state\r\n\r\nIf it was be possible it would be weird because as a programmer you could make like this\r\n\r\n``` Java\r\n//Not possible \r\nprivate void foo() {\r\n\r\n    MyClass myClass = new MyClass(); //Case 1: myClass address is 1\r\n    int a = 5;                       //Case 2: a = 5\r\n\r\n    //just as an example\r\n    new Button().addClickHandler(new ClickHandler() {\r\n        \r\n        @Override\r\n        public void onClick(ClickEvent event) {\r\n\r\n            /*\r\n            myClass.something(); //&lt;- what is the address - 1 or 2?\r\n            int b = a; //&lt;- what is the value - 5 or 10 ?\r\n\r\n            //illusion that next changes are visible for Outer class\r\n            myClass = new MyClass();\r\n            a = 15;\r\n            */\r\n        }\r\n    });\r\n\r\n    myClass = new MyClass(); //Case 1: myClass address is 2\r\n    int a = 10; //Case 2: a = 10\r\n}\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/59220181/4770877\r\n  [2]: https://stackoverflow.com/a/59521281/4770877\r\n  [3]: https://stackoverflow.com/a/60988242/4770877","title":"Why are only final variables accessible in anonymous class?","body":"<p>Java <code>final</code> variable inside an <code>inner class</code><a href=\"https://stackoverflow.com/a/59220181/4770877\"><sup>[About]</sup></a></p>\n<p>inner class can use only</p>\n<ol>\n<li>reference from outer class</li>\n<li>final local variables from out of scope which are a reference type (e.g. <code>Object</code>...)</li>\n<li>value(primitive) (e.g. <code>int</code>...) type can be <strong>wrapped</strong> by a final reference type. <code>IntelliJ IDEA</code> can help you covert it to one element <strong>array</strong></li>\n</ol>\n<p>When a <code>non static nested</code> (<code>inner class</code>) is generated by compiler - a new class - <code>&lt;OuterClass&gt;$&lt;InnerClass&gt;.class</code> is created and <strong>bounded</strong> parameters are passed into <strong>constructor</strong><a href=\"https://stackoverflow.com/a/59521281/4770877\"><sup>[Local variable on stack]</sup></a> It is similar to closure<a href=\"https://stackoverflow.com/a/60988242/4770877\"><sup>[Swift about]</sup></a></p>\n<p>final variable is a variable which can not be reassign. final reference variable still can be changed by modifying a state</p>\n<p>If it was be possible it would be weird because as a programmer you could make like this</p>\n<pre><code>//Not possible \nprivate void foo() {\n\n    MyClass myClass = new MyClass(); //Case 1: myClass address is 1\n    int a = 5;                       //Case 2: a = 5\n\n    //just as an example\n    new Button().addClickHandler(new ClickHandler() {\n        \n        @Override\n        public void onClick(ClickEvent event) {\n\n            /*\n            myClass.something(); //&lt;- what is the address - 1 or 2?\n            int b = a; //&lt;- what is the value - 5 or 10 ?\n\n            //illusion that next changes are visible for Outer class\n            myClass = new MyClass();\n            a = 15;\n            */\n        }\n    });\n\n    myClass = new MyClass(); //Case 1: myClass address is 2\n    int a = 10; //Case 2: a = 10\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6187275,"reputation":952,"user_id":4821027,"display_name":"Gautam Tadigoppula"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686680219,"creation_date":1686680219,"answer_id":76467680,"question_id":4732544,"body_markdown":"     public class Closure {\r\n      public void publicMethod() {\r\n        Integer localVariable1 = 10;\r\n    \r\n        Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;() {\r\n          {\r\n            put(&quot;a&quot;, localVariable1);\r\n          }\r\n        };\r\n    \r\n        Thread t = new Thread(new Runnable() {\r\n          public void run() {\r\n            System.out.println(localVariable1);\r\n          }\r\n        });\r\n    \r\n        List&lt;String&gt; list = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\r\n    \r\n        Collections.sort(list, new Comparator&lt;String&gt;() {\r\n          public int compare(String p1, String p2) {\r\n            return p1.compareTo(p2);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n 1. After compilation, the above would result in 4 classes (3 AIC and 1 parent class)\r\n 2. During runtime if Java would have allowed to update localVariable1 or list, it would make the compiled classes invalid and the map would contain outdated data\r\n 3. To avoid such inconsistent behaviour java forces it to be final or effectively final","title":"Why are only final variables accessible in anonymous class?","body":"<pre><code> public class Closure {\n  public void publicMethod() {\n    Integer localVariable1 = 10;\n\n    Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;() {\n      {\n        put(&quot;a&quot;, localVariable1);\n      }\n    };\n\n    Thread t = new Thread(new Runnable() {\n      public void run() {\n        System.out.println(localVariable1);\n      }\n    });\n\n    List&lt;String&gt; list = Arrays.asList(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;);\n\n    Collections.sort(list, new Comparator&lt;String&gt;() {\n      public int compare(String p1, String p2) {\n        return p1.compareTo(p2);\n      }\n    });\n  }\n}\n</code></pre>\n<ol>\n<li>After compilation, the above would result in 4 classes (3 AIC and 1 parent class)</li>\n<li>During runtime if Java would have allowed to update localVariable1 or list, it would make the compiled classes invalid and the map would contain outdated data</li>\n<li>To avoid such inconsistent behaviour java forces it to be final or effectively final</li>\n</ol>\n"}],"owner":{"display_name":"user467871"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130271,"favorite_count":0,"down_vote_count":3,"up_vote_count":391,"accepted_answer_id":4732617,"answer_count":16,"score":388,"last_activity_date":1686680219,"creation_date":1295420322,"question_id":4732544,"body_markdown":" 1. \r\n\r\n  `a` can only be final here.  Why?  How can I reassign `a` in `onClick()` method without keeping it as private member?\r\n\r\n        private void f(Button b, final int a){\r\n\t        b.addClickHandler(new ClickHandler() {\r\n\t\t\r\n\t\t        @Override\r\n\t\t        public void onClick(ClickEvent event) {\r\n\t\t\t        int b = a*5;\r\n\t\t\t\r\n\t\t        }\r\n\t        });\r\n\t    }\r\n\r\n 2. How can I return the `5 * a` when it clicked? I mean,\r\n\r\n        private void f(Button b, final int a){\r\n\t        b.addClickHandler(new ClickHandler() {\r\n\t\t\r\n\t\t        @Override\r\n\t\t        public void onClick(ClickEvent event) {\r\n\t\t\t         int b = a*5;\r\n\t\t\t         return b; // but return type is void \r\n\t\t        }\r\n\t        });\r\n\t    }","title":"Why are only final variables accessible in anonymous class?","body":"<ol>\n<li><p><code>a</code> can only be final here.  Why?  How can I reassign <code>a</code> in <code>onClick()</code> method without keeping it as private member?</p>\n\n<pre><code>private void f(Button b, final int a){\n    b.addClickHandler(new ClickHandler() {\n\n        @Override\n        public void onClick(ClickEvent event) {\n            int b = a*5;\n\n        }\n    });\n}\n</code></pre></li>\n<li><p>How can I return the <code>5 * a</code> when it clicked? I mean,</p>\n\n<pre><code>private void f(Button b, final int a){\n    b.addClickHandler(new ClickHandler() {\n\n        @Override\n        public void onClick(ClickEvent event) {\n             int b = a*5;\n             return b; // but return type is void \n        }\n    });\n}\n</code></pre></li>\n</ol>\n"},{"tags":["java","notnull"],"comments":[{"owner":{"account_id":108033,"reputation":17201,"user_id":286934,"display_name":"Progman"},"score":0,"creation_date":1686679799,"post_id":76466950,"comment_id":134831557,"body_markdown":"Welcome to Stack Overflow.\nPlease take the [tour] to learn how Stack Overflow works and read [ask] on how to improve the quality of your question.\nThen check the [help/on-topic] to see which questions are on-topic on this site.\nPlease see: [How do I ask and answer homework questions?](https://meta.stackoverflow.com/q/334822)\nYou might want to delete this question and ask it on https://cs.stackexchange.com/ instead, but check the help pages there first.","body":"Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> to learn how Stack Overflow works and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> on how to improve the quality of your question. Then check the <a href=\"https://stackoverflow.com/help/on-topic\">help center</a> to see which questions are on-topic on this site. Please see: <a href=\"https://meta.stackoverflow.com/q/334822\">How do I ask and answer homework questions?</a> You might want to delete this question and ask it on <a href=\"https://cs.stackexchange.com/\">cs.stackexchange.com</a> instead, but check the help pages there first."}],"answers":[{"tags":[],"owner":{"account_id":18664773,"reputation":1033,"user_id":13605044,"display_name":"Md. Faisal Habib"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686680151,"creation_date":1686680151,"answer_id":76467668,"question_id":76466950,"body_markdown":"Include Apache Commons Lang library (`org.apache.commons.lang3.StringUtils`) in your build configuration.\r\n\r\nIf you are using Gradle, you can add the Apache Commons Lang dependency to your project&#39;s `build.gradle` file as follows:\r\n\r\n```groovy\r\ndependencies {\r\n    implementation &#39;org.apache.commons:commons-lang3:3.12.0&#39;\r\n}\r\n```\r\n\r\nSave the ```build.gradle``` file after adding the dependency.\r\nGradle will automatically download the Apache Commons Lang library and include it in your project.\r\nSync your project with the latest gradle file.\r\n\r\nThen you can try to use `StringUtils.isNotBlank()` method.\r\n\r\nHere&#39;s a sample code: \r\n\r\n```\r\nimport org.apache.commons.lang3.StringUtils;\r\n\r\npublic WfccApplicationEntity constructApplicationEntity(UpdateWfccApplicationDecisionRequest request, WfccApplicationEntity entity) {\r\n    return entity.toBuilder()\r\n            .statusCode(request.getStatusCode())\r\n            .caseNumber(request.getCaseNumber())\r\n            .updatedBy(request.getUpdatedBy())\r\n            .apr(StringUtils.isNotBlank(request.getApr()) ? request.getApr() : entity.getApr())\r\n            .aprType(StringUtils.isNotBlank(request.getAprType()) ? request.getAprType() : entity.getAprType())\r\n            .statusCodeUpdatedDate(now())\r\n            .customerId(request.getCustomerId())\r\n            .statusCodeUpdatedDate(now())\r\n            .build();\r\n}\r\n```","title":"I am trying check 2 of the below fields apr and aprType int he return statement , if they are non empty","body":"<p>Include Apache Commons Lang library (<code>org.apache.commons.lang3.StringUtils</code>) in your build configuration.</p>\n<p>If you are using Gradle, you can add the Apache Commons Lang dependency to your project's <code>build.gradle</code> file as follows:</p>\n<pre><code>dependencies {\n    implementation 'org.apache.commons:commons-lang3:3.12.0'\n}\n</code></pre>\n<p>Save the <code>build.gradle</code> file after adding the dependency.\nGradle will automatically download the Apache Commons Lang library and include it in your project.\nSync your project with the latest gradle file.</p>\n<p>Then you can try to use <code>StringUtils.isNotBlank()</code> method.</p>\n<p>Here's a sample code:</p>\n<pre><code>import org.apache.commons.lang3.StringUtils;\n\npublic WfccApplicationEntity constructApplicationEntity(UpdateWfccApplicationDecisionRequest request, WfccApplicationEntity entity) {\n    return entity.toBuilder()\n            .statusCode(request.getStatusCode())\n            .caseNumber(request.getCaseNumber())\n            .updatedBy(request.getUpdatedBy())\n            .apr(StringUtils.isNotBlank(request.getApr()) ? request.getApr() : entity.getApr())\n            .aprType(StringUtils.isNotBlank(request.getAprType()) ? request.getAprType() : entity.getAprType())\n            .statusCodeUpdatedDate(now())\n            .customerId(request.getCustomerId())\n            .statusCodeUpdatedDate(now())\n            .build();\n}\n</code></pre>\n"}],"owner":{"account_id":28813962,"reputation":1,"user_id":22068035,"display_name":"Varsha Jadhav"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1686680151,"creation_date":1686673631,"question_id":76466950,"body_markdown":"I am trying check 2 of the below fields apr and aprType , if they are non empty.\r\nBelow is the method:\r\n\r\n\r\n```\r\n&gt; public WfccApplicationEntity constructApplicationEntity(\r\nUpdateWfccApplicationDecisionRequest request,\r\nWfccApplicationEntity entity) {\r\nreturn entity.toBuilder()\r\n&gt;         .statusCode(request.getStatusCode())\r\n&gt;         .caseNumber(request.getCaseNumber())\r\n&gt;         .updatedBy(request.getUpdatedBy())\r\n&gt;         .apr(request.getApr())\r\n&gt;         .aprType(request.getAprType())\r\n&gt;         .statusCodeUpdatedDate(now())\r\n&gt;         .customerId(request.getCustomerId())\r\n&gt;         .statusCodeUpdatedDate(now())\r\n&gt;         .build();\r\n&gt;   }\r\n\r\n```\r\n\r\nI want to use org.apache.commons.lang3.StringUtils.isNotBlank() to check the fields\r\n\r\nI am not able to use if statement in the return statement","title":"I am trying check 2 of the below fields apr and aprType int he return statement , if they are non empty","body":"<p>I am trying check 2 of the below fields apr and aprType , if they are non empty.\nBelow is the method:</p>\n<pre><code>&gt; public WfccApplicationEntity constructApplicationEntity(\nUpdateWfccApplicationDecisionRequest request,\nWfccApplicationEntity entity) {\nreturn entity.toBuilder()\n&gt;         .statusCode(request.getStatusCode())\n&gt;         .caseNumber(request.getCaseNumber())\n&gt;         .updatedBy(request.getUpdatedBy())\n&gt;         .apr(request.getApr())\n&gt;         .aprType(request.getAprType())\n&gt;         .statusCodeUpdatedDate(now())\n&gt;         .customerId(request.getCustomerId())\n&gt;         .statusCodeUpdatedDate(now())\n&gt;         .build();\n&gt;   }\n\n</code></pre>\n<p>I want to use org.apache.commons.lang3.StringUtils.isNotBlank() to check the fields</p>\n<p>I am not able to use if statement in the return statement</p>\n"},{"tags":["java","spring","spring-boot","micrometer","spring-micrometer"],"answers":[{"comments":[{"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"score":0,"creation_date":1686632662,"post_id":76460419,"comment_id":134821760,"body_markdown":"The interesting part is that if I restart the docker container multiple times, sometimes I read non 0 values. Feels like it’s a “race condition” during initialisation and depending on who runs first I will have 0 as result or something different then 0.","body":"The interesting part is that if I restart the docker container multiple times, sometimes I read non 0 values. Feels like it’s a “race condition” during initialisation and depending on who runs first I will have 0 as result or something different then 0."},{"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"score":0,"creation_date":1686638903,"post_id":76460419,"comment_id":134822514,"body_markdown":"I added a later edit. Seems to me that this behavior is more towards a bug. I saw also that the implementation of the `getProcessCpuLoad` method is native. Should I raise a bug on Java on this? What do you think?","body":"I added a later edit. Seems to me that this behavior is more towards a bug. I saw also that the implementation of the <code>getProcessCpuLoad</code> method is native. Should I raise a bug on Java on this? What do you think?"},{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1686680188,"post_id":76460419,"comment_id":134831638,"body_markdown":"I edited my answer, please check the currently reported bugs first.","body":"I edited my answer, please check the currently reported bugs first."},{"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"score":0,"creation_date":1686732713,"post_id":76460419,"comment_id":134838270,"body_markdown":"After reviewing the bugs I still tend to believe that the behavior I see is not a bug in jdk but a bug in micrometer spring boot integration. I created an rest endpoint in which I use the same call to OperatingSystemMXBean. I tried both: created every time and also as a class member. By doing this I don&#39;t see  the same behavior as when calling the /actuator/prometheus endpoint: when calling the custom EP I see non 0 values. I don&#39;t know the correctness but still. The actuator endpoint is created by spring.","body":"After reviewing the bugs I still tend to believe that the behavior I see is not a bug in jdk but a bug in micrometer spring boot integration. I created an rest endpoint in which I use the same call to OperatingSystemMXBean. I tried both: created every time and also as a class member. By doing this I don&#39;t see  the same behavior as when calling the /actuator/prometheus endpoint: when calling the custom EP I see non 0 values. I don&#39;t know the correctness but still. The actuator endpoint is created by spring."},{"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"score":0,"creation_date":1686756589,"post_id":76460419,"comment_id":134843667,"body_markdown":"Further, today I changed the implementation (I copied from what you said at 1). On my local machine, running inside docker container and querying the prometheus endpoint I received non 0 values. Once I deployed the same code on another environment, the prometheus endpoint returned only 0. So same code, the same OS, the same JDK, run in 2 different environments (one as docker on local machine and one deployed as pod) behave in 2 different ways.","body":"Further, today I changed the implementation (I copied from what you said at 1). On my local machine, running inside docker container and querying the prometheus endpoint I received non 0 values. Once I deployed the same code on another environment, the prometheus endpoint returned only 0. So same code, the same OS, the same JDK, run in 2 different environments (one as docker on local machine and one deployed as pod) behave in 2 different ways."},{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1686759012,"post_id":76460419,"comment_id":134844262,"body_markdown":"I have a hard time to understand how this can be a Micrometer bug when `logger.info(&quot;Value {}&quot;, metricValue);` also returns zero value. Not using Gauge properly in Micrometer ([see docs](https://micrometer.io/docs/concepts#_why_is_my_gauge_reporting_nan_or_disappearing)) can cause similar issues but as far as I understand, this is not the case and you get 0 from `OperatingSystemMXBean` which Micrometer should nothing to do with.","body":"I have a hard time to understand how this can be a Micrometer bug when <code>logger.info(&quot;Value {}&quot;, metricValue);</code> also returns zero value. Not using Gauge properly in Micrometer (<a href=\"https://micrometer.io/docs/concepts#_why_is_my_gauge_reporting_nan_or_disappearing\" rel=\"nofollow noreferrer\">see docs</a>) can cause similar issues but as far as I understand, this is not the case and you get 0 from <code>OperatingSystemMXBean</code> which Micrometer should nothing to do with."},{"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"score":0,"creation_date":1686759414,"post_id":76460419,"comment_id":134844356,"body_markdown":"I understand your point. But then how do you explain the fact that when creating a custom endpoint in which the same call to `OperatingSystemMXBean` is done then I see non 0 values ?","body":"I understand your point. But then how do you explain the fact that when creating a custom endpoint in which the same call to <code>OperatingSystemMXBean</code> is done then I see non 0 values ?"},{"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"score":0,"creation_date":1686760622,"post_id":76460419,"comment_id":134844609,"body_markdown":"What a custom endpoint has to do with Micrometer? Do you get the same behavior if Micrometer is disabled?","body":"What a custom endpoint has to do with Micrometer? Do you get the same behavior if Micrometer is disabled?"}],"tags":[],"owner":{"account_id":944144,"reputation":5341,"user_id":971735,"display_name":"Jonatan Ivanov"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686680116,"creation_date":1686604999,"answer_id":76460419,"question_id":76460280,"body_markdown":"That seems more like a Java/JVM issue than Micrometer since `OperatingSystemMXBean#getProcessCpuLoad()` gives you zero value. I assume you would see the same behavior without Micrometer.\r\n\r\nA few ideas to fix/troubleshoot this:\r\n1. Micrometer has this functionality (see [`ProcessorMetrics`](https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/system/ProcessorMetrics.java)), I would use this instead your implementation since it does a few other tricks.\r\n2. I would not do this `ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);` every single time, you can move this to a static/member variable.\r\n3. Are you sure you should see CPU load? [`OperatingSystemMXBean#getProcessCpuLoad()`](https://docs.oracle.com/en/java/javase/17/docs/api/jdk.management/com/sun/management/OperatingSystemMXBean.html#getProcessCpuLoad()) says:\r\n&gt;Returns the &quot;recent cpu usage&quot;\r\n\r\nWhere &quot;recent&quot; is not really defined, what if you put your CPU up to some load? I have a service that can create resource utilization based on http requests, you might be able to reuse things from it: https://github.com/jonatan-ivanov/resourceater/blob/main/src/main/java/resourceater/model/resource/cpu/CpuResource.java\r\n\r\n\r\n**Edit:**\r\nIt seems there are quite a few issues around this in the OpenJDK bug tracker: https://bugs.openjdk.org/browse/JDK-8269851?jql=text%20~%20%22getProcessCpuLoad%22\r\n\r\nPlease make sure you use a version where these are fixed (I would try latest Java 20 today).","title":"Micrometer custom metric mostly returns 0","body":"<p>That seems more like a Java/JVM issue than Micrometer since <code>OperatingSystemMXBean#getProcessCpuLoad()</code> gives you zero value. I assume you would see the same behavior without Micrometer.</p>\n<p>A few ideas to fix/troubleshoot this:</p>\n<ol>\n<li>Micrometer has this functionality (see <a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/system/ProcessorMetrics.java\" rel=\"nofollow noreferrer\"><code>ProcessorMetrics</code></a>), I would use this instead your implementation since it does a few other tricks.</li>\n<li>I would not do this <code>ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);</code> every single time, you can move this to a static/member variable.</li>\n<li>Are you sure you should see CPU load? <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/jdk.management/com/sun/management/OperatingSystemMXBean.html#getProcessCpuLoad()\" rel=\"nofollow noreferrer\"><code>OperatingSystemMXBean#getProcessCpuLoad()</code></a> says:</li>\n</ol>\n<blockquote>\n<p>Returns the &quot;recent cpu usage&quot;</p>\n</blockquote>\n<p>Where &quot;recent&quot; is not really defined, what if you put your CPU up to some load? I have a service that can create resource utilization based on http requests, you might be able to reuse things from it: <a href=\"https://github.com/jonatan-ivanov/resourceater/blob/main/src/main/java/resourceater/model/resource/cpu/CpuResource.java\" rel=\"nofollow noreferrer\">https://github.com/jonatan-ivanov/resourceater/blob/main/src/main/java/resourceater/model/resource/cpu/CpuResource.java</a></p>\n<p><strong>Edit:</strong>\nIt seems there are quite a few issues around this in the OpenJDK bug tracker: <a href=\"https://bugs.openjdk.org/browse/JDK-8269851?jql=text%20%7E%20%22getProcessCpuLoad%22\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8269851?jql=text%20~%20%22getProcessCpuLoad%22</a></p>\n<p>Please make sure you use a version where these are fixed (I would try latest Java 20 today).</p>\n"}],"owner":{"account_id":6532054,"reputation":739,"user_id":5291708,"accept_rate":83,"display_name":"florin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686680116,"creation_date":1686603385,"question_id":76460280,"body_markdown":"I want to add a custom metric and expose it to on the /actuator/prometheus path. \r\n\r\n```\r\n@SpringBootApplication\r\npublic class CustomMetricsApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(CustomMetricsApplication.class, args);\r\n\t}\r\n\r\n\t@RestController\r\n\tstatic class MyController {\r\n\r\n\t\t@GetMapping(&quot;/metrics&quot;)\r\n\t\tpublic List&lt;Double&gt; getMetrics() {\r\n\t\t\tList&lt;Double&gt; result = new ArrayList&lt;&gt;();\r\n\t\t\tfor (int i = 0; i &lt; 10; i++) {\r\n\t\t\t\tresult.add(Math.random() * 100);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n@Configuration\r\npublic class MetricsConfig {\r\n\r\n\t@Bean\r\n\tMeterBinder getLoadMeter() {\r\n\t\treturn new LoadMetric();\r\n\t}\r\n}\r\n\r\npublic class LoadMetric implements MeterBinder {\r\n\r\n\tprivate static final Logger logger = LoggerFactory.getLogger(LoadMetric.class);\r\n\r\n\t@Override\r\n\tpublic void bindTo(MeterRegistry meterRegistry) {\r\n\t\tTags tags = Tags.of(&quot;application&quot;, &quot;panda&quot;);\r\n\t\tmeterRegistry.gauge(&quot;my_load&quot;, tags, this, LoadMetric::calculateMetricValue);\r\n\t}\r\n\r\n\tprivate double calculateMetricValue() {\r\n\t\tOperatingSystemMXBean osBean = ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);\r\n\t\tdouble metricValue = osBean.getProcessCpuLoad() * 100.0;\r\n\t\tlogger.info(&quot;Value {}&quot;, metricValue);\r\n\t\treturn metricValue;\r\n\t}\r\n}\r\n```\r\n\r\nIf I start the app in debug mode everything is ok. If I put it in container then most of the result of the custom metric are 0.0\r\n\r\nAnyone has an idee why this happens?\r\n\r\nDockerfile\r\n```\r\nFROM eclipse-temurin:17.0.7_7-jre-alpine\r\n\r\nRUN mkdir -p /services/\r\n\r\nCOPY target/custom-metrics-1.0.0.jar /services\r\n\r\nCMD java -XX:MinRAMPercentage=40.0 -XX:MaxRAMPercentage=80.0 -XX:+HeapDumpOnOutOfMemoryError   -jar /services/custom-metrics-1.0.0.jar\r\n```\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yaoXR.png\r\n\r\n**Later edit**\r\n\r\nIf I restart the docker container several times, sometimes I read non 0 values. Feels like it’s a “race condition” during initialization and depending on who runs first I will have 0 as result or something different then 0.\r\nFor example, as per Jonatan recommendation, I made the `OperatingSystemMXBean` a class member. Running the app inside container shows values different then 0\r\n\r\n```\r\n2023-06-13T06:33:31.370Z  INFO 1 --- [nio-8080-exec-1] c.happypanda.custommetrics.LoadMetric    : Value 0.0\r\n2023-06-13T06:33:32.683Z  INFO 1 --- [nio-8080-exec-3] c.happypanda.custommetrics.LoadMetric    : Value 3.2380952380952377\r\n2023-06-13T06:33:36.347Z  INFO 1 --- [nio-8080-exec-4] c.happypanda.custommetrics.LoadMetric    : Value 0.25\r\n2023-06-13T06:33:38.673Z  INFO 1 --- [nio-8080-exec-5] c.happypanda.custommetrics.LoadMetric    : Value 0.07171029042667623\r\n2023-06-13T06:33:41.188Z  INFO 1 --- [nio-8080-exec-6] c.happypanda.custommetrics.LoadMetric    : Value 0.09953550099535502\r\n2023-06-13T06:33:43.564Z  INFO 1 --- [nio-8080-exec-7] c.happypanda.custommetrics.LoadMetric    : Value 0.14020329477742727\r\n2023-06-13T06:33:48.971Z  INFO 1 --- [nio-8080-exec-8] c.happypanda.custommetrics.LoadMetric    : Value 0.046289152908501774\r\n2023-06-13T06:34:04.070Z  INFO 1 --- [nio-8080-exec-9] c.happypanda.custommetrics.LoadMetric    : Value 0.022086025067638453\r\n2023-06-13T06:34:05.289Z  INFO 1 --- [io-8080-exec-10] c.happypanda.custommetrics.LoadMetric    : Value 0.06839945280437756\r\n2023-06-13T06:34:08.793Z  INFO 1 --- [nio-8080-exec-2] c.happypanda.custommetrics.LoadMetric    : Value 0.07137758743754462\r\n2023-06-13T06:34:11.564Z  INFO 1 --- [nio-8080-exec-1] c.happypanda.custommetrics.LoadMetric    : Value 0.060168471720818295\r\n2023-06-13T06:34:16.481Z  INFO 1 --- [nio-8080-exec-3] c.happypanda.custommetrics.LoadMetric    : Value 0.05089058524173028\r\n2023-06-13T06:34:17.761Z  INFO 1 --- [nio-8080-exec-4] c.happypanda.custommetrics.LoadMetric    : Value 0.13063357282821686\r\n2023-06-13T06:34:19.803Z  INFO 1 --- [nio-8080-exec-5] c.happypanda.custommetrics.LoadMetric    : Value 0.12239902080783352\r\n2023-06-13T06:34:20.936Z  INFO 1 --- [nio-8080-exec-6] c.happypanda.custommetrics.LoadMetric    : Value 0.14705882352941177\r\n2023-06-13T06:34:21.901Z  INFO 1 --- [nio-8080-exec-7] c.happypanda.custommetrics.LoadMetric    : Value 0.17286084701815038\r\n2023-06-13T06:40:00.641Z  INFO 1 --- [io-8080-exec-10] c.happypanda.custommetrics.LoadMetric    : Value 0.011319510406567285\r\n```","title":"Micrometer custom metric mostly returns 0","body":"<p>I want to add a custom metric and expose it to on the /actuator/prometheus path.</p>\n<pre><code>@SpringBootApplication\npublic class CustomMetricsApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(CustomMetricsApplication.class, args);\n    }\n\n    @RestController\n    static class MyController {\n\n        @GetMapping(&quot;/metrics&quot;)\n        public List&lt;Double&gt; getMetrics() {\n            List&lt;Double&gt; result = new ArrayList&lt;&gt;();\n            for (int i = 0; i &lt; 10; i++) {\n                result.add(Math.random() * 100);\n            }\n            return result;\n        }\n    }\n}\n\n@Configuration\npublic class MetricsConfig {\n\n    @Bean\n    MeterBinder getLoadMeter() {\n        return new LoadMetric();\n    }\n}\n\npublic class LoadMetric implements MeterBinder {\n\n    private static final Logger logger = LoggerFactory.getLogger(LoadMetric.class);\n\n    @Override\n    public void bindTo(MeterRegistry meterRegistry) {\n        Tags tags = Tags.of(&quot;application&quot;, &quot;panda&quot;);\n        meterRegistry.gauge(&quot;my_load&quot;, tags, this, LoadMetric::calculateMetricValue);\n    }\n\n    private double calculateMetricValue() {\n        OperatingSystemMXBean osBean = ManagementFactory.getPlatformMXBean(OperatingSystemMXBean.class);\n        double metricValue = osBean.getProcessCpuLoad() * 100.0;\n        logger.info(&quot;Value {}&quot;, metricValue);\n        return metricValue;\n    }\n}\n</code></pre>\n<p>If I start the app in debug mode everything is ok. If I put it in container then most of the result of the custom metric are 0.0</p>\n<p>Anyone has an idee why this happens?</p>\n<p>Dockerfile</p>\n<pre><code>FROM eclipse-temurin:17.0.7_7-jre-alpine\n\nRUN mkdir -p /services/\n\nCOPY target/custom-metrics-1.0.0.jar /services\n\nCMD java -XX:MinRAMPercentage=40.0 -XX:MaxRAMPercentage=80.0 -XX:+HeapDumpOnOutOfMemoryError   -jar /services/custom-metrics-1.0.0.jar\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/yaoXR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yaoXR.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Later edit</strong></p>\n<p>If I restart the docker container several times, sometimes I read non 0 values. Feels like it’s a “race condition” during initialization and depending on who runs first I will have 0 as result or something different then 0.\nFor example, as per Jonatan recommendation, I made the <code>OperatingSystemMXBean</code> a class member. Running the app inside container shows values different then 0</p>\n<pre><code>2023-06-13T06:33:31.370Z  INFO 1 --- [nio-8080-exec-1] c.happypanda.custommetrics.LoadMetric    : Value 0.0\n2023-06-13T06:33:32.683Z  INFO 1 --- [nio-8080-exec-3] c.happypanda.custommetrics.LoadMetric    : Value 3.2380952380952377\n2023-06-13T06:33:36.347Z  INFO 1 --- [nio-8080-exec-4] c.happypanda.custommetrics.LoadMetric    : Value 0.25\n2023-06-13T06:33:38.673Z  INFO 1 --- [nio-8080-exec-5] c.happypanda.custommetrics.LoadMetric    : Value 0.07171029042667623\n2023-06-13T06:33:41.188Z  INFO 1 --- [nio-8080-exec-6] c.happypanda.custommetrics.LoadMetric    : Value 0.09953550099535502\n2023-06-13T06:33:43.564Z  INFO 1 --- [nio-8080-exec-7] c.happypanda.custommetrics.LoadMetric    : Value 0.14020329477742727\n2023-06-13T06:33:48.971Z  INFO 1 --- [nio-8080-exec-8] c.happypanda.custommetrics.LoadMetric    : Value 0.046289152908501774\n2023-06-13T06:34:04.070Z  INFO 1 --- [nio-8080-exec-9] c.happypanda.custommetrics.LoadMetric    : Value 0.022086025067638453\n2023-06-13T06:34:05.289Z  INFO 1 --- [io-8080-exec-10] c.happypanda.custommetrics.LoadMetric    : Value 0.06839945280437756\n2023-06-13T06:34:08.793Z  INFO 1 --- [nio-8080-exec-2] c.happypanda.custommetrics.LoadMetric    : Value 0.07137758743754462\n2023-06-13T06:34:11.564Z  INFO 1 --- [nio-8080-exec-1] c.happypanda.custommetrics.LoadMetric    : Value 0.060168471720818295\n2023-06-13T06:34:16.481Z  INFO 1 --- [nio-8080-exec-3] c.happypanda.custommetrics.LoadMetric    : Value 0.05089058524173028\n2023-06-13T06:34:17.761Z  INFO 1 --- [nio-8080-exec-4] c.happypanda.custommetrics.LoadMetric    : Value 0.13063357282821686\n2023-06-13T06:34:19.803Z  INFO 1 --- [nio-8080-exec-5] c.happypanda.custommetrics.LoadMetric    : Value 0.12239902080783352\n2023-06-13T06:34:20.936Z  INFO 1 --- [nio-8080-exec-6] c.happypanda.custommetrics.LoadMetric    : Value 0.14705882352941177\n2023-06-13T06:34:21.901Z  INFO 1 --- [nio-8080-exec-7] c.happypanda.custommetrics.LoadMetric    : Value 0.17286084701815038\n2023-06-13T06:40:00.641Z  INFO 1 --- [io-8080-exec-10] c.happypanda.custommetrics.LoadMetric    : Value 0.011319510406567285\n</code></pre>\n"},{"tags":["java","exception","java.util.scanner"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686672231,"post_id":76466676,"comment_id":134830015,"body_markdown":"The outer `if` is meaningless and should be deleted. If iteration is occurring at all, it&#39;s going to return true for every file in that folder. Your code assumes that your sought file should be in that directory *and not a subdirectory*. It seems rather odd to be searching at all tbh, but to be complete, you need to recurse. A lot easier to use `Files.find`","body":"The outer <code>if</code> is meaningless and should be deleted. If iteration is occurring at all, it&#39;s going to return true for every file in that folder. Your code assumes that your sought file should be in that directory <i>and not a subdirectory</i>. It seems rather odd to be searching at all tbh, but to be complete, you need to recurse. A lot easier to use <code>Files.find</code>"},{"owner":{"account_id":2450346,"reputation":5181,"user_id":2136795,"display_name":"Gyro Gearless"},"score":1,"creation_date":1686673567,"post_id":76466676,"comment_id":134830321,"body_markdown":"Or just `new File(folder, &quot;Tabelle.csv&quot;).isFile()`","body":"Or just <code>new File(folder, &quot;Tabelle.csv&quot;).isFile()</code>"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1686690937,"post_id":76466676,"comment_id":134833515,"body_markdown":"I am unable to duplicate the problem.  Make sure you&#39;re running this code and not something else.","body":"I am unable to duplicate the problem.  Make sure you&#39;re running this code and not something else."}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686675346,"post_id":76467006,"comment_id":134830667,"body_markdown":"*use double slash // to separate folders or files if you are in windows.* A single forward slash will suffice for any OS","body":"<i>use double slash // to separate folders or files if you are in windows.</i> A single forward slash will suffice for any OS"},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":0,"creation_date":1686677512,"post_id":76467006,"comment_id":134831114,"body_markdown":"_&quot;into the File constructor using escape sequence?&quot;_ — The escape character is **back**-slash (&#39;\\&#39;), not a (forward) slash (`/`). Using _backslashes_ in windows is when they need to be doubled, because you need to escape the _escape character_. [This answer](https://stackoverflow.com/a/51057519/17300) about regex explains it pretty well.","body":"<i>&quot;into the File constructor using escape sequence?&quot;</i> — The escape character is <b>back</b>-slash (&#39;\\&#39;), not a (forward) slash (<code>&#47;</code>). Using <i>backslashes</i> in windows is when they need to be doubled, because you need to escape the <i>escape character</i>. <a href=\"https://stackoverflow.com/a/51057519/17300\">This answer</a> about regex explains it pretty well."},{"owner":{"account_id":27958793,"reputation":11,"user_id":21351079,"display_name":"RyuunAkasaka"},"score":0,"creation_date":1686679506,"post_id":76467006,"comment_id":134831498,"body_markdown":"Hey Stephen Thanks for mentioning that buddy.I made my correction.The mistake was made as I was really too focused on the output path address on my computer.","body":"Hey Stephen Thanks for mentioning that buddy.I made my correction.The mistake was made as I was really too focused on the output path address on my computer."},{"owner":{"account_id":27958793,"reputation":11,"user_id":21351079,"display_name":"RyuunAkasaka"},"score":0,"creation_date":1686679961,"post_id":76467006,"comment_id":134831593,"body_markdown":"Hey @g00se thanks for a better suggestion.Both works.I was just suggesting the traditional way.","body":"Hey @g00se thanks for a better suggestion.Both works.I was just suggesting the traditional way."}],"tags":[],"owner":{"account_id":27958793,"reputation":11,"user_id":21351079,"display_name":"RyuunAkasaka"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686679593,"creation_date":1686674092,"answer_id":76467006,"question_id":76466676,"body_markdown":"Check for the folder path you specified here...\r\n\r\n**if (folder.isDirectory()){\r\n}**\r\n\r\ndid you correctly put the path into the File constructor using escape sequence?\r\nlike this...\r\n\r\n File folder=new File(**&quot;C:\\\\\\Parent folder\\\\\\child folder&quot;**);\r\n\r\n***use double  slash \\\\\\ to separate folders or files if you are in windows.***\r\n\r\nJust check that out.\r\n\r\n**Put your scanner creation into try catch block to handle error.**\r\n\r\nand clear the   **if (file.exists()){** block because listfiles already gives you the list of files and directories that exists if you are looking for a simple way to filter out only files just use **if(!file.isDirectory())** inspite of **file.exists()** and this will give you a condition to run the code only with files you can also use **if(!file.isDirectory() &amp;&amp; file.getName().equals(ta))** to kill two birds with one stone...first the code will check if your file is a file and then go for the fact if the name matches...\r\n\r\nHope it helps buddy.\r\n\r\nyour new code should look like this.\r\n\r\n\r\n \r\n\r\n       if (folder.isDirectory()){\r\n                    File[] files = folder.listFiles();\r\n                    \r\n                    String ta = &quot;Tabelle.csv&quot;;\r\n                    \r\n                    for (File file: files){\r\n    \r\n                        if (file.isDirectory() &amp;&amp; file.getName().equals(ta)){\r\n                               \r\n                                System.out.println(&quot;PATH: &quot; + file);\r\n                                //*\r\n    \r\n                              try{\r\n    \r\n                                Scanner sc = new Scanner (file);\r\n                                sc.useDelimiter(&quot;;&quot;);\r\n    \r\n                                while(sc.hasNext()){\r\n                                    System.out.println(sc.next());\r\n                                }\r\n                                sc.close();//*/\r\n    \r\n                                }catch(Exception error){\r\n\r\n                                System.out.println(&quot;Error occurred! Reason&gt;&gt;&gt;&quot;+error);\r\n                                   }\r\n           \r\n                                  }\r\n             \r\n                              }\r\n                 \r\n                            \r\n                        } \r\n                   \r\n\r\n","title":"Scanner construction fails because FileNotFoundException","body":"<p>Check for the folder path you specified here...</p>\n<p><strong>if (folder.isDirectory()){\n}</strong></p>\n<p>did you correctly put the path into the File constructor using escape sequence?\nlike this...</p>\n<p>File folder=new File(<strong>&quot;C:\\\\Parent folder\\\\child folder&quot;</strong>);</p>\n<p><em><strong>use double  slash \\\\ to separate folders or files if you are in windows.</strong></em></p>\n<p>Just check that out.</p>\n<p><strong>Put your scanner creation into try catch block to handle error.</strong></p>\n<p>and clear the   <strong>if (file.exists()){</strong> block because listfiles already gives you the list of files and directories that exists if you are looking for a simple way to filter out only files just use <strong>if(!file.isDirectory())</strong> inspite of <strong>file.exists()</strong> and this will give you a condition to run the code only with files you can also use <strong>if(!file.isDirectory() &amp;&amp; file.getName().equals(ta))</strong> to kill two birds with one stone...first the code will check if your file is a file and then go for the fact if the name matches...</p>\n<p>Hope it helps buddy.</p>\n<p>your new code should look like this.</p>\n<pre><code>   if (folder.isDirectory()){\n                File[] files = folder.listFiles();\n                \n                String ta = &quot;Tabelle.csv&quot;;\n                \n                for (File file: files){\n\n                    if (file.isDirectory() &amp;&amp; file.getName().equals(ta)){\n                           \n                            System.out.println(&quot;PATH: &quot; + file);\n                            //*\n\n                          try{\n\n                            Scanner sc = new Scanner (file);\n                            sc.useDelimiter(&quot;;&quot;);\n\n                            while(sc.hasNext()){\n                                System.out.println(sc.next());\n                            }\n                            sc.close();//*/\n\n                            }catch(Exception error){\n\n                            System.out.println(&quot;Error occurred! Reason&gt;&gt;&gt;&quot;+error);\n                               }\n       \n                              }\n         \n                          }\n             \n                        \n                    } \n               \n</code></pre>\n"}],"owner":{"account_id":24562394,"reputation":1,"user_id":20002266,"display_name":"Kralkaz -.-"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686679593,"creation_date":1686671504,"question_id":76466676,"body_markdown":"The following piece of code gts a directory and if there is a file in it, that is called &quot;Tabelle.csv&quot; a scanner should be created and show its contents.\r\n\r\n```\r\nif (folder.isDirectory()){\r\n            File[] files = folder.listFiles();\r\n            \r\n            String ta = &quot;Tabelle.csv&quot;;\r\n            \r\n            for (File file: files){\r\n                if (file.exists()){\r\n                    if (file.getName().equals(ta)){\r\n\r\n                        System.out.println(&quot;PATH: &quot; + file);\r\n                        //*\r\n                        Scanner sc = new Scanner (file);\r\n                        sc.useDelimiter(&quot;;&quot;);\r\n                        while(sc.hasNext()){\r\n                            System.out.println(sc.next());\r\n                        }\r\n                        sc.close();//*/\r\n\r\n                    }\r\n                } \r\n            }\r\n        }\r\n```\r\nThis however throws a FileNotFoundExcepion, which baffles me, since i doublecheked for its existence with both ifs.\r\n\r\nPlease help me with as easily understandable solutions as possible, since I am still learning.\r\nThanks in advance :D\r\n\r\n\r\nChatGPT told be to do that:\r\n\r\n```\r\nFileInputStream fis = new FileInputStream(file);\r\nScanner sc = new Scanner(fis);\r\n```\r\nwhich also ended up in the same error, but in the FIS construction.\r\n\r\nI also dont want a trycatch, since this NEEDS to work, I dont care about the console telling me: &quot;File does not exist&quot; or something\r\n\r\n\r\nedit:\r\n\r\nI started with &#39;Scanner sc = new Scanner(THEACTUALPATH);&#39; but that got me the error, so I am backwards engineering from there. This is also the reason for the outer if. I know it is meaningless, but its kind of a sanity check that the file is there... I dont know why I am getting the error, and how to avoid it","title":"Scanner construction fails because FileNotFoundException","body":"<p>The following piece of code gts a directory and if there is a file in it, that is called &quot;Tabelle.csv&quot; a scanner should be created and show its contents.</p>\n<pre><code>if (folder.isDirectory()){\n            File[] files = folder.listFiles();\n            \n            String ta = &quot;Tabelle.csv&quot;;\n            \n            for (File file: files){\n                if (file.exists()){\n                    if (file.getName().equals(ta)){\n\n                        System.out.println(&quot;PATH: &quot; + file);\n                        //*\n                        Scanner sc = new Scanner (file);\n                        sc.useDelimiter(&quot;;&quot;);\n                        while(sc.hasNext()){\n                            System.out.println(sc.next());\n                        }\n                        sc.close();//*/\n\n                    }\n                } \n            }\n        }\n</code></pre>\n<p>This however throws a FileNotFoundExcepion, which baffles me, since i doublecheked for its existence with both ifs.</p>\n<p>Please help me with as easily understandable solutions as possible, since I am still learning.\nThanks in advance :D</p>\n<p>ChatGPT told be to do that:</p>\n<pre><code>FileInputStream fis = new FileInputStream(file);\nScanner sc = new Scanner(fis);\n</code></pre>\n<p>which also ended up in the same error, but in the FIS construction.</p>\n<p>I also dont want a trycatch, since this NEEDS to work, I dont care about the console telling me: &quot;File does not exist&quot; or something</p>\n<p>edit:</p>\n<p>I started with 'Scanner sc = new Scanner(THEACTUALPATH);' but that got me the error, so I am backwards engineering from there. This is also the reason for the outer if. I know it is meaningless, but its kind of a sanity check that the file is there... I dont know why I am getting the error, and how to avoid it</p>\n"},{"tags":["java","java-8","jwt","azure-ad-msal","kusto-java-sdk"],"comments":[{"owner":{"account_id":4226212,"reputation":87,"user_id":3459685,"display_name":"user3459685"},"score":0,"creation_date":1686662727,"post_id":76460867,"comment_id":134827639,"body_markdown":"1. What version of the SDK are you using? &quot;resourceUri&quot;&#39;s param name was changed in 2021\n2. I don&#39;t see the problem with the flow. You provided a resource url in the ctor, why would &quot;host&quot; and &quot;auth&quot; return null? What did you give to the original ConnectionStringBuilder?","body":"1. What version of the SDK are you using? &quot;resourceUri&quot;&#39;s param name was changed in 2021 2. I don&#39;t see the problem with the flow. You provided a resource url in the ctor, why would &quot;host&quot; and &quot;auth&quot; return null? What did you give to the original ConnectionStringBuilder?"}],"answers":[{"tags":[],"owner":{"account_id":6812312,"reputation":61,"user_id":5242056,"display_name":"Yochai Gilad"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686661845,"creation_date":1686661845,"answer_id":76465330,"question_id":76460867,"body_markdown":"Which version of the Kusto SDK are you using?\r\nCan you use any of the other AuthN options provided by the SDK itself, instead of acquiring the token manually and passing it&#39;s value to the SDK?\r\nIt&#39;s generally more recommanded (less prone to long running errors due to token expiration)\r\n\r\nP.S. It common to report such issues in the repo for the source code. :)\r\nhttps://github.com/Azure/azure-kusto-java/issues","title":"Unable to authenticate Kusto Client using JWTToken","body":"<p>Which version of the Kusto SDK are you using?\nCan you use any of the other AuthN options provided by the SDK itself, instead of acquiring the token manually and passing it's value to the SDK?\nIt's generally more recommanded (less prone to long running errors due to token expiration)</p>\n<p>P.S. It common to report such issues in the repo for the source code. :)\n<a href=\"https://github.com/Azure/azure-kusto-java/issues\" rel=\"nofollow noreferrer\">https://github.com/Azure/azure-kusto-java/issues</a></p>\n"},{"tags":[],"owner":{"account_id":6495574,"reputation":495,"user_id":5028293,"display_name":"Ohad Bitton"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686679375,"creation_date":1686679375,"answer_id":76467590,"question_id":76460867,"body_markdown":"After talking F2F we found the issue is with the value passed in the resourceUri param, while this expects a url of the cluster (&quot;https://cluster.region.kusto.windows.net&quot;) the provided uri was the ARM resource uri hence no host and no auth sections of the URL were parsed by the call to new URI().","title":"Unable to authenticate Kusto Client using JWTToken","body":"<p>After talking F2F we found the issue is with the value passed in the resourceUri param, while this expects a url of the cluster (&quot;https://cluster.region.kusto.windows.net&quot;) the provided uri was the ARM resource uri hence no host and no auth sections of the URL were parsed by the call to new URI().</p>\n"}],"owner":{"account_id":12892506,"reputation":3238,"user_id":9324000,"accept_rate":100,"display_name":"superninja"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76467590,"answer_count":2,"score":0,"last_activity_date":1686679375,"creation_date":1686612823,"question_id":76460867,"body_markdown":"We use `Java 8` and `msal4j` version `0.6.0-preview`. To connect to Kusto, we use JWT Token:\r\n\r\n    ConnectionStringBuilder csb = ConnectionStringBuilder.createWithAadAccessTokenAuthentication(resourceUri, accessToken);\r\n    Client kustoClient = ClientFactory.createClient(csb);\r\n\r\n\r\nInside then`createWithAadAccessTokenAuthentication()`, it is calling this `ConnectionStringBuilder` constructor:\r\n\r\n    public static ConnectionStringBuilder createWithAadAccessTokenAuthentication(String resourceUri, String token) {\r\n            if (StringUtils.isEmpty(resourceUri)) {\r\n                throw new IllegalArgumentException(&quot;resourceUri cannot be null or empty&quot;);\r\n            } else if (StringUtils.isEmpty(token)) {\r\n                throw new IllegalArgumentException(&quot;token cannot be null or empty&quot;);\r\n            } else {\r\n                ConnectionStringBuilder csb = new ConnectionStringBuilder(resourceUri);\r\n                csb.accessToken = token;\r\n                return csb;\r\n            }\r\n        }\r\n\r\nit is setting every field to `null` except for `clusterUri`. \r\n\r\n \r\n\r\n    private ConnectionStringBuilder(String resourceUri) {\r\n            this.clusterUri = resourceUri;\r\n            this.usernameHint = null;\r\n            this.applicationClientId = null;\r\n            this.applicationKey = null;\r\n            this.aadAuthorityId = null;\r\n            this.x509Certificate = null;\r\n            this.privateKey = null;\r\n            this.accessToken = null;\r\n            this.tokenProvider = null;\r\n        }\r\n\r\nThus we got an error from `createClient()` method. Because it is calling `ClientImpl(csb)`. `host` and `auth` are returning null, which triggers null pointer exception in this line: String auth = clusterUri.getAuthority().toLowerCase();\r\n\r\n    public static Client createClient(ConnectionStringBuilder csb) throws URISyntaxException {\r\n            return new ClientImpl(csb);\r\n        }\r\n\r\n     public ClientImpl(ConnectionStringBuilder csb) throws URISyntaxException {\r\n            String url = csb.getClusterUrl();\r\n            URI clusterUri = new URI(url);\r\n            String host = clusterUri.getHost();\r\n            String auth = clusterUri.getAuthority().toLowerCase();\r\n            if (host == null &amp;&amp; auth.endsWith(&quot;;fed=true&quot;)) {\r\n                url = (new URIBuilder()).setScheme(clusterUri.getScheme()).setHost(auth.substring(0, clusterUri.getAuthority().indexOf(&quot;;fed=true&quot;))).toString();\r\n                csb.setClusterUrl(url);\r\n            }\r\n    \r\n            this.clusterUrl = url;\r\n            this.aadAuthenticationHelper = TokenProviderFactory.createTokenProvider(csb);\r\n            this.clientVersionForTracing = &quot;Kusto.Java.Client&quot;;\r\n            String version = Utils.getPackageVersion();\r\n            if (StringUtils.isNotBlank(version)) {\r\n                this.clientVersionForTracing = this.clientVersionForTracing + &quot;:&quot; + version;\r\n            }\r\n    \r\n            if (StringUtils.isNotBlank(csb.getClientVersionForTracing())) {\r\n                this.clientVersionForTracing = this.clientVersionForTracing + &quot;[&quot; + csb.getClientVersionForTracing() + &quot;]&quot;;\r\n            }\r\n    \r\n            this.applicationNameForTracing = csb.getApplicationNameForTracing();\r\n        }\r\n\r\nWhat are the other alternatives here?","title":"Unable to authenticate Kusto Client using JWTToken","body":"<p>We use <code>Java 8</code> and <code>msal4j</code> version <code>0.6.0-preview</code>. To connect to Kusto, we use JWT Token:</p>\n<pre><code>ConnectionStringBuilder csb = ConnectionStringBuilder.createWithAadAccessTokenAuthentication(resourceUri, accessToken);\nClient kustoClient = ClientFactory.createClient(csb);\n</code></pre>\n<p>Inside then<code>createWithAadAccessTokenAuthentication()</code>, it is calling this <code>ConnectionStringBuilder</code> constructor:</p>\n<pre><code>public static ConnectionStringBuilder createWithAadAccessTokenAuthentication(String resourceUri, String token) {\n        if (StringUtils.isEmpty(resourceUri)) {\n            throw new IllegalArgumentException(&quot;resourceUri cannot be null or empty&quot;);\n        } else if (StringUtils.isEmpty(token)) {\n            throw new IllegalArgumentException(&quot;token cannot be null or empty&quot;);\n        } else {\n            ConnectionStringBuilder csb = new ConnectionStringBuilder(resourceUri);\n            csb.accessToken = token;\n            return csb;\n        }\n    }\n</code></pre>\n<p>it is setting every field to <code>null</code> except for <code>clusterUri</code>.</p>\n<pre><code>private ConnectionStringBuilder(String resourceUri) {\n        this.clusterUri = resourceUri;\n        this.usernameHint = null;\n        this.applicationClientId = null;\n        this.applicationKey = null;\n        this.aadAuthorityId = null;\n        this.x509Certificate = null;\n        this.privateKey = null;\n        this.accessToken = null;\n        this.tokenProvider = null;\n    }\n</code></pre>\n<p>Thus we got an error from <code>createClient()</code> method. Because it is calling <code>ClientImpl(csb)</code>. <code>host</code> and <code>auth</code> are returning null, which triggers null pointer exception in this line: String auth = clusterUri.getAuthority().toLowerCase();</p>\n<pre><code>public static Client createClient(ConnectionStringBuilder csb) throws URISyntaxException {\n        return new ClientImpl(csb);\n    }\n\n public ClientImpl(ConnectionStringBuilder csb) throws URISyntaxException {\n        String url = csb.getClusterUrl();\n        URI clusterUri = new URI(url);\n        String host = clusterUri.getHost();\n        String auth = clusterUri.getAuthority().toLowerCase();\n        if (host == null &amp;&amp; auth.endsWith(&quot;;fed=true&quot;)) {\n            url = (new URIBuilder()).setScheme(clusterUri.getScheme()).setHost(auth.substring(0, clusterUri.getAuthority().indexOf(&quot;;fed=true&quot;))).toString();\n            csb.setClusterUrl(url);\n        }\n\n        this.clusterUrl = url;\n        this.aadAuthenticationHelper = TokenProviderFactory.createTokenProvider(csb);\n        this.clientVersionForTracing = &quot;Kusto.Java.Client&quot;;\n        String version = Utils.getPackageVersion();\n        if (StringUtils.isNotBlank(version)) {\n            this.clientVersionForTracing = this.clientVersionForTracing + &quot;:&quot; + version;\n        }\n\n        if (StringUtils.isNotBlank(csb.getClientVersionForTracing())) {\n            this.clientVersionForTracing = this.clientVersionForTracing + &quot;[&quot; + csb.getClientVersionForTracing() + &quot;]&quot;;\n        }\n\n        this.applicationNameForTracing = csb.getApplicationNameForTracing();\n    }\n</code></pre>\n<p>What are the other alternatives here?</p>\n"},{"tags":["java","spring","postman"],"comments":[{"owner":{"account_id":308517,"reputation":478,"user_id":2467774,"display_name":"DeadSpock"},"score":0,"creation_date":1686676604,"post_id":76467178,"comment_id":134830917,"body_markdown":"It&#180;s not related to the postman_id nor the exporter_id values, it seems more like an issue when the app started, could you share the logs when the app starts?","body":"It&#180;s not related to the postman_id nor the exporter_id values, it seems more like an issue when the app started, could you share the logs when the app starts?"},{"owner":{"account_id":28141342,"reputation":1,"user_id":22068221,"display_name":"Display_name"},"score":0,"creation_date":1686677896,"post_id":76467178,"comment_id":134831204,"body_markdown":"@DeadSpock, \nConnected to server\n[2023-06-13 07:46:17,567] Artifact CurrencyExchanger:war exploded: Artifact is being deployed, please wait...\n13-Jun-2023 19:46:23.753 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time.\nSLF4J: No SLF4J providers were found.","body":"@DeadSpock,  Connected to server [2023-06-13 07:46:17,567] Artifact CurrencyExchanger:war exploded: Artifact is being deployed, please wait... 13-Jun-2023 19:46:23.753 INFO [RMI TCP Connection(2)-127.0.0.1] org.apache.jasper.servlet.TldScanner.scanJars At least one JAR was scanned for TLDs yet contained no TLDs. Enable debug logging for this logger for a complete list of JARs that were scanned but no TLDs were found in them. Skipping unneeded JARs during scanning can improve startup time and JSP compilation time. SLF4J: No SLF4J providers were found."},{"owner":{"account_id":28141342,"reputation":1,"user_id":22068221,"display_name":"Display_name"},"score":0,"creation_date":1686677909,"post_id":76467178,"comment_id":134831212,"body_markdown":"@DeadSpock  SLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#noProviders for further details.\n[2023-06-13 07:46:24,220] Artifact CurrencyExchanger:war exploded: Artifact is deployed successfully\n[2023-06-13 07:46:24,220] Artifact CurrencyExchanger:war exploded: Deploy took 6,654 milliseconds","body":"@DeadSpock  SLF4J: Defaulting to no-operation (NOP) logger implementation SLF4J: See <a href=\"http://www.slf4j.org/codes.html#noProviders\" rel=\"nofollow noreferrer\">slf4j.org/codes.html#noProviders</a> for further details. [2023-06-13 07:46:24,220] Artifact CurrencyExchanger:war exploded: Artifact is deployed successfully [2023-06-13 07:46:24,220] Artifact CurrencyExchanger:war exploded: Deploy took 6,654 milliseconds"},{"owner":{"account_id":28141342,"reputation":1,"user_id":22068221,"display_name":"Display_name"},"score":0,"creation_date":1686677922,"post_id":76467178,"comment_id":134831214,"body_markdown":"13-Jun-2023 19:46:27.192 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployDirectory РЈСЃС‚Р&#176;РЅРѕРІРєР&#176; РІР&#181;Р&#177; РїСЂРёР&#187;РѕР&#182;Р&#181;РЅРёСЏ РІ РїР&#176;РїРєСѓ [D:\\Scene\\tomcat9version\\apache-tomcat-9.0.73\\webapps\\manager]\n13-Jun-2023 19:46:27.861 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [D:\\Scene\\tomcat9version\\apache-tomcat-9.0.73\\webapps\\manager] has finished in [670] ms","body":"13-Jun-2023 19:46:27.192 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployDirectory РЈСЃС‚Р&#176;РЅРѕРІРєР&#176; РІР&#181;Р&#177; РїСЂРёР&#187;РѕР&#182;Р&#181;РЅРёСЏ РІ РїР&#176;РїРєСѓ [D:\\Scene\\tomcat9version\\apache-tomcat-9.0.73\\webapps\\manage&zwnj;&#8203;r] 13-Jun-2023 19:46:27.861 INFO [Catalina-utility-1] org.apache.catalina.startup.HostConfig.deployDirectory Deployment of web application directory [D:\\Scene\\tomcat9version\\apache-tomcat-9.0.73\\webapps\\manage&zwnj;&#8203;r] has finished in [670] ms"}],"owner":{"account_id":28141342,"reputation":1,"user_id":22068221,"display_name":"Display_name"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686678878,"creation_date":1686675543,"question_id":76467178,"body_markdown":"I&#39;m trying to write a currency exchanger project, I&#39;m trying to test it in Postman, but error 404 comes out. There may be such a problem there is not correctly specified postman_id and exporter_id, it&#39;s just my guesses\r\n\r\n```\r\n{\r\n\t&quot;info&quot;: {\r\n\t\t&quot;_postman_id&quot;: &quot;27454191-473..........&quot;,\r\n\t\t&quot;name&quot;: &quot;CurrencyExchanger&quot;,\r\n\t\t&quot;schema&quot;: &quot;https://schema.getpostman.com/json/collection/v2.1.0/collection.json&quot;,\r\n\t\t&quot;_exporter_id&quot;: &quot;........&quot;\r\n\t},\r\n\t&quot;item&quot;: [\r\n\t\t{\r\n\t\t\t&quot;name&quot;: &quot;/currencies&quot;,\r\n\t\t\t&quot;protocolProfileBehavior&quot;: {\r\n\t\t\t\t&quot;disableBodyPruning&quot;: true\r\n\t\t\t},\r\n\t\t\t&quot;request&quot;: {\r\n\t\t\t\t&quot;method&quot;: &quot;GET&quot;,\r\n\t\t\t\t&quot;header&quot;: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;Date&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;multipart/form-data&quot;,\r\n\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;Date&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;multipart/form-data&quot;,\r\n\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t&quot;key&quot;: &quot;Da&quot;,\r\n\t\t\t\t\t\t&quot;value&quot;: &quot;multipart/form-data&quot;,\r\n\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t}\r\n\t\t\t\t],\r\n\t\t\t\t&quot;body&quot;: {\r\n\t\t\t\t\t&quot;mode&quot;: &quot;formdata&quot;,\r\n\t\t\t\t\t&quot;formdata&quot;: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t&quot;key&quot;: &quot;name&quot;,\r\n\t\t\t\t\t\t\t&quot;value&quot;: &quot;zxc&quot;,\r\n\t\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t&quot;key&quot;: &quot;code&quot;,\r\n\t\t\t\t\t\t\t&quot;value&quot;: &quot;Dead inside&quot;,\r\n\t\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t&quot;key&quot;: &quot;sign&quot;,\r\n\t\t\t\t\t\t\t&quot;value&quot;: &quot;z&quot;,\r\n\t\t\t\t\t\t\t&quot;type&quot;: &quot;default&quot;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t&quot;url&quot;: {\r\n\t\t\t\t\t&quot;raw&quot;: &quot;http://localhost:8080/currencies&quot;,\r\n\t\t\t\t\t&quot;protocol&quot;: &quot;http&quot;,\r\n\t\t\t\t\t&quot;host&quot;: [\r\n\t\t\t\t\t\t&quot;localhost&quot;\r\n\t\t\t\t\t],\r\n\t\t\t\t\t&quot;port&quot;: &quot;8080&quot;,\r\n\t\t\t\t\t&quot;path&quot;: [\r\n\t\t\t\t\t\t&quot;currencies&quot;\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t&quot;response&quot;: []\r\n\t\t},\r\n```\r\n\r\n```\r\n@MultipartConfig\r\n@WebServlet(name = &quot;indexCurrenciesServlet&quot;, value = &quot;/currencies&quot;)\r\npublic class CurrenciesServlet extends HttpServlet {\r\n    private CurrencyRepository currencyRepository;\r\n    @Override\r\n    public void init(ServletConfig config) throws ServletException {\r\n        currencyRepository = (CurrencyRepository) config.getServletContext().getAttribute(&quot;currencyRepository&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        new ObjectMapper().writeValue(resp.getWriter(), currencyRepository.findAll());\r\n    }\r\n\r\n    @Override\r\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\r\n        String code = Utils.getStringFromPartName(req, &quot;code&quot;);\r\n        String name = Utils.getStringFromPartName(req, &quot;name&quot;);\r\n        String sign = Utils.getStringFromPartName(req, &quot;sign&quot;);\r\n\r\n        if (Utils.isNotValidCurrenciesArgs(code, name, sign)) {\r\n            resp.sendError(HttpServletResponse.SC_BAD_REQUEST, &quot;Не правильно введены данные. Пример: code = &#39;USD&#39;, name = &#39;US Dollar&#39;, sign = &#39;$&#39;&quot;);\r\n            return;\r\n        }\r\n\r\n        if (currencyRepository.findByName(code).isPresent()) {\r\n            resp.sendError(HttpServletResponse.SC_CONFLICT, &quot;Валюта с таким кодом уже существует&quot;);\r\n            return;\r\n        }\r\n\r\n        currencyRepository.save(new Currency(code, name, sign));\r\n\r\n        doGet(req, resp);\r\n    }\r\n}\r\n```\r\n[enter image description here](https://i.stack.imgur.com/0hyu6.jpg)\r\n\r\n\r\n\r\nI tried to reinstall tomcat, at first I thought there were problems with it","title":"when starting the application, Postman throws a 404 error","body":"<p>I'm trying to write a currency exchanger project, I'm trying to test it in Postman, but error 404 comes out. There may be such a problem there is not correctly specified postman_id and exporter_id, it's just my guesses</p>\n<pre><code>{\n    &quot;info&quot;: {\n        &quot;_postman_id&quot;: &quot;27454191-473..........&quot;,\n        &quot;name&quot;: &quot;CurrencyExchanger&quot;,\n        &quot;schema&quot;: &quot;https://schema.getpostman.com/json/collection/v2.1.0/collection.json&quot;,\n        &quot;_exporter_id&quot;: &quot;........&quot;\n    },\n    &quot;item&quot;: [\n        {\n            &quot;name&quot;: &quot;/currencies&quot;,\n            &quot;protocolProfileBehavior&quot;: {\n                &quot;disableBodyPruning&quot;: true\n            },\n            &quot;request&quot;: {\n                &quot;method&quot;: &quot;GET&quot;,\n                &quot;header&quot;: [\n                    {\n                        &quot;key&quot;: &quot;Date&quot;,\n                        &quot;value&quot;: &quot;multipart/form-data&quot;,\n                        &quot;type&quot;: &quot;default&quot;\n                    },\n                    {\n                        &quot;key&quot;: &quot;Date&quot;,\n                        &quot;value&quot;: &quot;multipart/form-data&quot;,\n                        &quot;type&quot;: &quot;default&quot;\n                    },\n                    {\n                        &quot;key&quot;: &quot;Da&quot;,\n                        &quot;value&quot;: &quot;multipart/form-data&quot;,\n                        &quot;type&quot;: &quot;default&quot;\n                    }\n                ],\n                &quot;body&quot;: {\n                    &quot;mode&quot;: &quot;formdata&quot;,\n                    &quot;formdata&quot;: [\n                        {\n                            &quot;key&quot;: &quot;name&quot;,\n                            &quot;value&quot;: &quot;zxc&quot;,\n                            &quot;type&quot;: &quot;default&quot;\n                        },\n                        {\n                            &quot;key&quot;: &quot;code&quot;,\n                            &quot;value&quot;: &quot;Dead inside&quot;,\n                            &quot;type&quot;: &quot;default&quot;\n                        },\n                        {\n                            &quot;key&quot;: &quot;sign&quot;,\n                            &quot;value&quot;: &quot;z&quot;,\n                            &quot;type&quot;: &quot;default&quot;\n                        }\n                    ]\n                },\n                &quot;url&quot;: {\n                    &quot;raw&quot;: &quot;http://localhost:8080/currencies&quot;,\n                    &quot;protocol&quot;: &quot;http&quot;,\n                    &quot;host&quot;: [\n                        &quot;localhost&quot;\n                    ],\n                    &quot;port&quot;: &quot;8080&quot;,\n                    &quot;path&quot;: [\n                        &quot;currencies&quot;\n                    ]\n                }\n            },\n            &quot;response&quot;: []\n        },\n</code></pre>\n<pre><code>@MultipartConfig\n@WebServlet(name = &quot;indexCurrenciesServlet&quot;, value = &quot;/currencies&quot;)\npublic class CurrenciesServlet extends HttpServlet {\n    private CurrencyRepository currencyRepository;\n    @Override\n    public void init(ServletConfig config) throws ServletException {\n        currencyRepository = (CurrencyRepository) config.getServletContext().getAttribute(&quot;currencyRepository&quot;);\n    }\n\n    @Override\n    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        new ObjectMapper().writeValue(resp.getWriter(), currencyRepository.findAll());\n    }\n\n    @Override\n    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {\n        String code = Utils.getStringFromPartName(req, &quot;code&quot;);\n        String name = Utils.getStringFromPartName(req, &quot;name&quot;);\n        String sign = Utils.getStringFromPartName(req, &quot;sign&quot;);\n\n        if (Utils.isNotValidCurrenciesArgs(code, name, sign)) {\n            resp.sendError(HttpServletResponse.SC_BAD_REQUEST, &quot;Не правильно введены данные. Пример: code = 'USD', name = 'US Dollar', sign = '$'&quot;);\n            return;\n        }\n\n        if (currencyRepository.findByName(code).isPresent()) {\n            resp.sendError(HttpServletResponse.SC_CONFLICT, &quot;Валюта с таким кодом уже существует&quot;);\n            return;\n        }\n\n        currencyRepository.save(new Currency(code, name, sign));\n\n        doGet(req, resp);\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/0hyu6.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried to reinstall tomcat, at first I thought there were problems with it</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686642535,"post_id":76462600,"comment_id":134823218,"body_markdown":"Use an aspect instead of a `BeanPostProcessor`, yours might even lead to creating a proxy of a proxy. That and if these are interfaces from Spring Data which have an `@Repository` those won&#39;t be beans (the `@Repository` on that is pretty much useless on a spring data repository interface).","body":"Use an aspect instead of a <code>BeanPostProcessor</code>, yours might even lead to creating a proxy of a proxy. That and if these are interfaces from Spring Data which have an <code>@Repository</code> those won&#39;t be beans (the <code>@Repository</code> on that is pretty much useless on a spring data repository interface)."},{"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"score":0,"creation_date":1686662509,"post_id":76462600,"comment_id":134827580,"body_markdown":"Thanks, it is indeed much easer with an aspect. If you want to write an answer I&#39;ll accept it. The `@Repoistory` annotations I&#39;m trying to catch are my own repositories with a `JdbcTemplate` inside.","body":"Thanks, it is indeed much easer with an aspect. If you want to write an answer I&#39;ll accept it. The <code>@Repoistory</code> annotations I&#39;m trying to catch are my own repositories with a <code>JdbcTemplate</code> inside."}],"answers":[{"tags":[],"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686678853,"creation_date":1686678853,"answer_id":76467542,"question_id":76462600,"body_markdown":"Instead of using a `BeanPostProcessor` use an aspect with a pointcut expression. Using a `BeanPostProcessor` can be problematic especially in the way you wrote it, yours might lead to proxying a proxy. Next to that just writing an Aspect is probably easier and will delegate the proxy creation to Spring. \r\n\r\n```java\r\n@Component\r\n@Aspect\r\npublic class RepositoryInvocationMetricsAspect {\r\n\r\n  private final ApplicationContext context;\r\n  private final MeterRegistry meterRegistry;\r\n\r\n  public RepositoryInvocationMetricsAspect(ApplicationContext ctx, MeterRegistry meterRegistry) {\r\n    this.context=context;\r\n    this.meterRegistry=meterRegistry;\r\n  }\r\n\r\n  @Pointcut(@within(@org.springframework.stereotype.Repository))\r\n  public void repositories() {}\r\n\r\n  @Around(&quot;repositories()&quot;)\r\n  public Object recordMetrics(ProceedingJoinPoint pjp) {\r\n    try {\r\n      // start metrics\r\n      return pjp.proceed();\r\n    } finally {\r\n      //end metrics\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nSomething along those lines should do the trick. ","title":"SpringBoot BeanPostProcessor is not scanning @Repository beans on start up","body":"<p>Instead of using a <code>BeanPostProcessor</code> use an aspect with a pointcut expression. Using a <code>BeanPostProcessor</code> can be problematic especially in the way you wrote it, yours might lead to proxying a proxy. Next to that just writing an Aspect is probably easier and will delegate the proxy creation to Spring.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@Aspect\npublic class RepositoryInvocationMetricsAspect {\n\n  private final ApplicationContext context;\n  private final MeterRegistry meterRegistry;\n\n  public RepositoryInvocationMetricsAspect(ApplicationContext ctx, MeterRegistry meterRegistry) {\n    this.context=context;\n    this.meterRegistry=meterRegistry;\n  }\n\n  @Pointcut(@within(@org.springframework.stereotype.Repository))\n  public void repositories() {}\n\n  @Around(&quot;repositories()&quot;)\n  public Object recordMetrics(ProceedingJoinPoint pjp) {\n    try {\n      // start metrics\n      return pjp.proceed();\n    } finally {\n      //end metrics\n    }\n  }\n}\n</code></pre>\n<p>Something along those lines should do the trick.</p>\n"}],"owner":{"account_id":277724,"reputation":3090,"user_id":571875,"accept_rate":93,"display_name":"mal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76467542,"answer_count":1,"score":0,"last_activity_date":1686678853,"creation_date":1686641436,"question_id":76462600,"body_markdown":"I&#39;ve built the following `BeanPostProcessor` Implementation:   \r\n\r\n```\r\n@Component\r\n@Order(Ordered.HIGHEST_PRECEDENCE)\r\npublic class InterceptRepositoryBeanPostProcessor implements BeanPostProcessor {\r\n\r\n    public static final Logger logger = LoggerFactory.getLogger(InterceptRepositoryBeanPostProcessor.class);\r\n    private final ApplicationContext context;\r\n    private final MeterRegistry meterRegistry;\r\n\r\n    @Autowired\r\n    public InterceptRepositoryBeanPostProcessor(ApplicationContext context, MeterRegistry meterRegistry) {\r\n        this.context = context;\r\n        this.meterRegistry = meterRegistry;\r\n        logger.info(&quot;Starting InterceptRepositoryBeanPostProcessor&quot;);\r\n    }\r\n\r\n    @Override\r\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\r\n        logger.info(&quot;post processing BEFORE initialization: {}&quot;, beanName);\r\n        return bean;\r\n\r\n    }\r\n\r\n    @Override\r\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\r\n        logger.info(&quot;post processing AFTER initialization: {}&quot;, beanName);\r\n\r\n        // If the bean is annotated with @Repository, wrap it in a proxy\r\n        if (bean.getClass().isAnnotationPresent(Repository.class)) {\r\n            logger.info(&quot;CREATING proxy with RepositoryInvocationMetricsHandler for {}&quot;,\r\n                        beanName);\r\n            return createRepositoryProxy(bean);\r\n        }\r\n\r\n        return bean;\r\n    }\r\n\r\n    /**\r\n     * Create a proxy by wrapping the Repository implementation in a RepositoryInvocationMetricsHandler\r\n     *\r\n     * @param bean The Repository to create a proxy for\r\n     * @return A new  proxy - RepositoryInvocationMetricsHandler\r\n     */\r\n    private Object createRepositoryProxy(Object bean) {\r\n        logger.info(&quot;Creating repository proxy for bean: {}&quot;, bean.getClass().getSimpleName());\r\n        Class&lt;?&gt; target = bean.getClass();\r\n        ClassLoader classLoader = target.getClassLoader();\r\n        Class&lt;?&gt;[] interfaces = target.getInterfaces();\r\n\r\n        return Proxy.newProxyInstance(classLoader,\r\n                                      interfaces,\r\n                                      new RepositoryInvocationMetricsHandler(target, context, meterRegistry));\r\n    }\r\n}\r\n```\r\nIt works well, and with the log messages I can see a lot of stuff being intercepted, however I&#39;m interested in intercepting classes annotated with `@Repository`, and when I examine the log files, none of those components appear to be handled by the Processor at all.   \r\nWhat am I missing? It seems like they are handled in a different way perhaps?    \r\n\r\nThis class is part of a separate package that is imported into my current project with maven, in case that is important. But it works as I said, and scans lots of objects, just not Repository objects. ","title":"SpringBoot BeanPostProcessor is not scanning @Repository beans on start up","body":"<p>I've built the following <code>BeanPostProcessor</code> Implementation:</p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class InterceptRepositoryBeanPostProcessor implements BeanPostProcessor {\n\n    public static final Logger logger = LoggerFactory.getLogger(InterceptRepositoryBeanPostProcessor.class);\n    private final ApplicationContext context;\n    private final MeterRegistry meterRegistry;\n\n    @Autowired\n    public InterceptRepositoryBeanPostProcessor(ApplicationContext context, MeterRegistry meterRegistry) {\n        this.context = context;\n        this.meterRegistry = meterRegistry;\n        logger.info(&quot;Starting InterceptRepositoryBeanPostProcessor&quot;);\n    }\n\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        logger.info(&quot;post processing BEFORE initialization: {}&quot;, beanName);\n        return bean;\n\n    }\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        logger.info(&quot;post processing AFTER initialization: {}&quot;, beanName);\n\n        // If the bean is annotated with @Repository, wrap it in a proxy\n        if (bean.getClass().isAnnotationPresent(Repository.class)) {\n            logger.info(&quot;CREATING proxy with RepositoryInvocationMetricsHandler for {}&quot;,\n                        beanName);\n            return createRepositoryProxy(bean);\n        }\n\n        return bean;\n    }\n\n    /**\n     * Create a proxy by wrapping the Repository implementation in a RepositoryInvocationMetricsHandler\n     *\n     * @param bean The Repository to create a proxy for\n     * @return A new  proxy - RepositoryInvocationMetricsHandler\n     */\n    private Object createRepositoryProxy(Object bean) {\n        logger.info(&quot;Creating repository proxy for bean: {}&quot;, bean.getClass().getSimpleName());\n        Class&lt;?&gt; target = bean.getClass();\n        ClassLoader classLoader = target.getClassLoader();\n        Class&lt;?&gt;[] interfaces = target.getInterfaces();\n\n        return Proxy.newProxyInstance(classLoader,\n                                      interfaces,\n                                      new RepositoryInvocationMetricsHandler(target, context, meterRegistry));\n    }\n}\n</code></pre>\n<p>It works well, and with the log messages I can see a lot of stuff being intercepted, however I'm interested in intercepting classes annotated with <code>@Repository</code>, and when I examine the log files, none of those components appear to be handled by the Processor at all.<br />\nWhat am I missing? It seems like they are handled in a different way perhaps?</p>\n<p>This class is part of a separate package that is imported into my current project with maven, in case that is important. But it works as I said, and scans lots of objects, just not Repository objects.</p>\n"},{"tags":["java","spring-boot","testcontainers"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686679833,"post_id":76467457,"comment_id":134831562,"body_markdown":"Do you have the `spring-boot-testcontainers` dependency added as a dependency? Else the needed auto configuration classes aren&#39;t present. That being said could you provide a sample that reproduces this and please add your build file as well.","body":"Do you have the <code>spring-boot-testcontainers</code> dependency added as a dependency? Else the needed auto configuration classes aren&#39;t present. That being said could you provide a sample that reproduces this and please add your build file as well."},{"owner":{"account_id":2567430,"reputation":43,"user_id":2227095,"display_name":"Jack Beaken"},"score":1,"creation_date":1686680774,"post_id":76467457,"comment_id":134831758,"body_markdown":"Thanks for the response. I have found the issue\n\nIt is due to the project using spring cloud kubernetes\n\n`implementation &#39;org.springframework.cloud:spring-cloud-starter-kubernetes-client-config&#39;\nimplementation &#39;org.springframework.cloud:spring-cloud-starter-bootstrap&#39; \t`\n\nThe introduction of the bootstrap for some reason prevents TestcontainersPropertySourceAutoConfiguration from kicking in.","body":"Thanks for the response. I have found the issue  It is due to the project using spring cloud kubernetes  <code>implementation &#39;org.springframework.cloud:spring-cloud-starter-kubernetes-c&zwnj;&#8203;lient-config&#39; implementation &#39;org.springframework.cloud:spring-cloud-starter-bootstrap&#39; \t</code>  The introduction of the bootstrap for some reason prevents TestcontainersPropertySourceAutoConfiguration from kicking in."}],"owner":{"account_id":2567430,"reputation":43,"user_id":2227095,"display_name":"Jack Beaken"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":119,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686677976,"creation_date":1686677976,"question_id":76467457,"body_markdown":"Using Testcontainers at Development Time I have\r\n\r\n```\r\n@TestConfiguration(proxyBeanMethods = false)\r\npublic class ContainersConfiguration {\r\n\r\n    @Bean\r\n    public KeycloakContainer keycloakContainer(DynamicPropertyRegistry registry) {\r\n        KeycloakContainer keycloakContainer = new KeycloakContainer()...\r\n        keycloakContainer.start();\r\n\r\n        registry.add(&quot;keycloak.server.external-url&quot;, () -&gt; keycloakContainer.getAuthServerUrl());\r\n        registry.add(&quot;keycloak.server.internal-url&quot;, () -&gt; keycloakContainer.getAuthServerUrl());\r\n        registry.add(&quot;keycloak.dev-portal-realm&quot;, () -&gt; &quot;master&quot;);\r\n\r\n        return keycloakContainer;\r\n    }\r\n}\r\n```\r\n\r\nwith\r\n\r\n```java\r\npublic class DMATestApplication {\r\n        public static void main(String[] args) {\r\n            SpringApplication.from(DeveloperManagerApplication::main).with(ContainersConfiguration.class).run(args);;\r\n        }\r\n```\r\n\r\n----\r\n\r\nUpon running\r\n`gradle bootTestRun` it throws\r\n`No qualifying bean of type &#39;org.springframework.test.context.DynamicPropertyRegistry&#39; available:`\r\n\r\n```Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;org.springframework.test.context.DynamicPropertyRegistry&#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\r\n\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\r\n```\r\n\r\nWhile reading the docs it suggests it is possible, when @ServiceConnection isn&#39;t supported\r\n\r\n``` \r\nUsing a @ServiceConnection is recommended whenever possible, however, dynamic properties can be a useful fallback for technologies that don’t yet have @ServiceConnection support. \r\n```\r\nsee https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/#features.testing.testcontainers.at-development-time\r\n\r\nDoes anyone know if dynamic properties are supported?","title":"Using Testcontainers at Development Time doesnt support DynamicPropertyRegistry","body":"<p>Using Testcontainers at Development Time I have</p>\n<pre><code>@TestConfiguration(proxyBeanMethods = false)\npublic class ContainersConfiguration {\n\n    @Bean\n    public KeycloakContainer keycloakContainer(DynamicPropertyRegistry registry) {\n        KeycloakContainer keycloakContainer = new KeycloakContainer()...\n        keycloakContainer.start();\n\n        registry.add(&quot;keycloak.server.external-url&quot;, () -&gt; keycloakContainer.getAuthServerUrl());\n        registry.add(&quot;keycloak.server.internal-url&quot;, () -&gt; keycloakContainer.getAuthServerUrl());\n        registry.add(&quot;keycloak.dev-portal-realm&quot;, () -&gt; &quot;master&quot;);\n\n        return keycloakContainer;\n    }\n}\n</code></pre>\n<p>with</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class DMATestApplication {\n        public static void main(String[] args) {\n            SpringApplication.from(DeveloperManagerApplication::main).with(ContainersConfiguration.class).run(args);;\n        }\n</code></pre>\n<hr />\n<p>Upon running\n<code>gradle bootTestRun</code> it throws\n<code>No qualifying bean of type 'org.springframework.test.context.DynamicPropertyRegistry' available:</code></p>\n<pre><code>    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1824)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1383)\n</code></pre>\n<p>While reading the docs it suggests it is possible, when @ServiceConnection isn't supported</p>\n<pre><code>Using a @ServiceConnection is recommended whenever possible, however, dynamic properties can be a useful fallback for technologies that don’t yet have @ServiceConnection support. \n</code></pre>\n<p>see <a href=\"https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/#features.testing.testcontainers.at-development-time\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/3.1.0/reference/htmlsingle/#features.testing.testcontainers.at-development-time</a></p>\n<p>Does anyone know if dynamic properties are supported?</p>\n"},{"tags":["java","scala","open-telemetry"],"comments":[{"owner":{"account_id":3908845,"reputation":11548,"user_id":3314107,"accept_rate":80,"display_name":"stefanobaghino"},"score":0,"creation_date":1686665983,"post_id":76465622,"comment_id":134828368,"body_markdown":"This might be an instrument being registered multiple times. Could it be that you should instantiate instruments statically in an `object` (possibly a companion) instead of a `class`?","body":"This might be an instrument being registered multiple times. Could it be that you should instantiate instruments statically in an <code>object</code> (possibly a companion) instead of a <code>class</code>?"},{"owner":{"account_id":21941457,"reputation":73,"user_id":16221948,"display_name":"oy121"},"score":0,"creation_date":1686668453,"post_id":76465622,"comment_id":134829078,"body_markdown":"@stefanobaghino I don&#39;t think so. According to the logs, it&#39;s related to &quot;db.client.connections.usage&quot; which I didn&#39;t manually instrument at all.","body":"@stefanobaghino I don&#39;t think so. According to the logs, it&#39;s related to &quot;db.client.connections.usage&quot; which I didn&#39;t manually instrument at all."},{"owner":{"account_id":21372668,"reputation":156,"user_id":15739953,"display_name":"Mateusz Rzeszutek"},"score":0,"creation_date":1686669382,"post_id":76465622,"comment_id":134829320,"body_markdown":"The db.client.connections.usage metric is emitted by the connection pool instrumentations in the javaagent. Are you using connection pools (e.g. Hikari) in your applications? Do you define more than one of them?","body":"The db.client.connections.usage metric is emitted by the connection pool instrumentations in the javaagent. Are you using connection pools (e.g. Hikari) in your applications? Do you define more than one of them?"},{"owner":{"account_id":21941457,"reputation":73,"user_id":16221948,"display_name":"oy121"},"score":0,"creation_date":1686672830,"post_id":76465622,"comment_id":134830157,"body_markdown":"@MateuszRzeszutek Yes I use connection pools in order to connect to Mongo but there is just one.","body":"@MateuszRzeszutek Yes I use connection pools in order to connect to Mongo but there is just one."},{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":0,"creation_date":1686839952,"post_id":76465622,"comment_id":134856862,"body_markdown":"I&#39;ve checked the source code - but can&#39;t make out what could be causing the issue. I did create a PR to improve the log output, so hopefully you can re-test when the new version has been released: https://github.com/open-telemetry/opentelemetry-java/pull/5542","body":"I&#39;ve checked the source code - but can&#39;t make out what could be causing the issue. I did create a PR to improve the log output, so hopefully you can re-test when the new version has been released: <a href=\"https://github.com/open-telemetry/opentelemetry-java/pull/5542\" rel=\"nofollow noreferrer\">github.com/open-telemetry/opentelemetry-java/pull/5542</a>"},{"owner":{"account_id":21941457,"reputation":73,"user_id":16221948,"display_name":"oy121"},"score":0,"creation_date":1688294662,"post_id":76465622,"comment_id":135052335,"body_markdown":"@GregorZeitlinger I&#39;m still not able to understand why I get this. Is there any way to disable this instrumentation to avoid this log?","body":"@GregorZeitlinger I&#39;m still not able to understand why I get this. Is there any way to disable this instrumentation to avoid this log?"},{"owner":{"account_id":3528320,"reputation":301,"user_id":2948740,"display_name":"Gregor Zeitlinger"},"score":0,"creation_date":1688456988,"post_id":76465622,"comment_id":135072977,"body_markdown":"@oy121 yes, you can disable modules. First, check which modules are actually being used with https://github.com/open-telemetry/opentelemetry-java-instrumentation#troubleshooting - look for something with jdbc or connection pool. Then, disable the instrumentation: https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation. It can take a bit of trial and error.","body":"@oy121 yes, you can disable modules. First, check which modules are actually being used with <a href=\"https://github.com/open-telemetry/opentelemetry-java-instrumentation#troubleshooting\" rel=\"nofollow noreferrer\">github.com/open-telemetry/&hellip;</a> - look for something with jdbc or connection pool. Then, disable the instrumentation: <a href=\"https://opentelemetry.io/docs/instrumentation/java/automatic/agent-config/#suppressing-specific-agent-instrumentation\" rel=\"nofollow noreferrer\">opentelemetry.io/docs/instrumentation/java/automatic/&hellip;</a>. It can take a bit of trial and error."}],"owner":{"account_id":21941457,"reputation":73,"user_id":16221948,"display_name":"oy121"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":231,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686677517,"creation_date":1686664066,"question_id":76465622,"body_markdown":"I&#39;m currently using the OpenTelemetry Java agent in my Scala application and am encountering some issues. \r\n\r\nThe error I&#39;m experiencing is as follows:\r\n```text\r\n[otel.javaagent 2023-06-13 13:02:12:461 +0000] [PeriodicMetricReader-1] WARN io.opentelemetry.sdk.metrics.internal.state.AsynchronousMetricStorage - Instrument db.client.connections.usage has recorded multiple values for the same attributes.\r\n```\r\n\r\nI&#39;m not sure why this is happening or how to fix it. I&#39;ve considered a few potential issues:\r\n\r\nConcurrency: I do have multiple threads that might be recording measurements simultaneously, but I believed this was handled by the OpenTelemetry SDK.\r\nMisuse of Instruments: I&#39;m not certain if I&#39;m using the right type of instrument for my use case, but db.client.connections.usage seems to be the best fit.\r\n\r\nI&#39;m also using version 1.25.1 of the OpenTelemetry Java agent SDK.\r\n\r\nIf anyone has encountered a similar issue or has any suggestions on what might be causing this and how to fix it, I would appreciate your help. Thank you.\r\n","title":"OpenTelemetry Java Agent Warning - Multiple Values for Same Attributes in Scala Application","body":"<p>I'm currently using the OpenTelemetry Java agent in my Scala application and am encountering some issues.</p>\n<p>The error I'm experiencing is as follows:</p>\n<pre><code>[otel.javaagent 2023-06-13 13:02:12:461 +0000] [PeriodicMetricReader-1] WARN io.opentelemetry.sdk.metrics.internal.state.AsynchronousMetricStorage - Instrument db.client.connections.usage has recorded multiple values for the same attributes.\n</code></pre>\n<p>I'm not sure why this is happening or how to fix it. I've considered a few potential issues:</p>\n<p>Concurrency: I do have multiple threads that might be recording measurements simultaneously, but I believed this was handled by the OpenTelemetry SDK.\nMisuse of Instruments: I'm not certain if I'm using the right type of instrument for my use case, but db.client.connections.usage seems to be the best fit.</p>\n<p>I'm also using version 1.25.1 of the OpenTelemetry Java agent SDK.</p>\n<p>If anyone has encountered a similar issue or has any suggestions on what might be causing this and how to fix it, I would appreciate your help. Thank you.</p>\n"},{"tags":["java","android-studio"],"owner":{"account_id":28814330,"reputation":1,"user_id":22068315,"display_name":"Someswaran"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":27,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686677320,"creation_date":1686677320,"question_id":76467380,"body_markdown":"Facing failed to notify project evaluation listener error in Android studio in Mac. \r\n\r\nLibrary/java/javavirtual machines/jdk-13.0.1.jdk/contents/home\r\n\r\n\r\n\r\nTried Run a project in Android studio in Mac\r\n\r\nTried updating to latest version of Android studio\r\n\r\nTried setting up java path in Environment variable. ","title":"Failed to notify project evaluation listener :Library/java/javavirtual machines/jdk-13.0.1.jdk/contents/home","body":"<p>Facing failed to notify project evaluation listener error in Android studio in Mac.</p>\n<p>Library/java/javavirtual machines/jdk-13.0.1.jdk/contents/home</p>\n<p>Tried Run a project in Android studio in Mac</p>\n<p>Tried updating to latest version of Android studio</p>\n<p>Tried setting up java path in Environment variable.</p>\n"},{"tags":["java","android","socket.io-java-client"],"owner":{"account_id":10825131,"reputation":57,"user_id":18971475,"display_name":"userVani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686676444,"creation_date":1686673086,"question_id":76466882,"body_markdown":"This is my code of Socket Service. I want to use  rejectUnauthorized: false, but this is available only for node, after findings I used TrustManager class to achieve this but it not working I am not able to connect to server, It always gives error\r\n\r\n&gt; io.socket.engineio.client.EngineIOException: xhr poll error\r\n\r\n  \r\n\r\n     private void connectToSocket() {\r\n        try {\r\n            TrustManager[] trustAllCerts = new TrustManager[]{\r\n                    new X509TrustManager() {\r\n                        public X509Certificate[] getAcceptedIssuers() {\r\n                            return new X509Certificate[]{};\r\n                        }\r\n                        public void checkClientTrusted(X509Certificate[] certs, String authType) throws CertificateException {}\r\n\r\n                        public void checkServerTrusted(X509Certificate[] certs, String authType) throws CertificateException {}\r\n                    }\r\n            };\r\n\r\n            // Create an SSL context with the custom trust manager\r\n            SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n            sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\r\n\r\n\r\n            // Set the SSL context on the OkHttpClient\r\n            OkHttpClient client = new OkHttpClient.Builder()\r\n                    .sslSocketFactory(sslContext.getSocketFactory(), (X509TrustManager) trustAllCerts[0])\r\n                    .hostnameVerifier((hostname, session) -&gt; true)\r\n                    .build();\r\n\r\n            // Create Socket.IO options\r\n            IO.Options options = new IO.Options();\r\n            options.callFactory = (Call.Factory) client;\r\n            options.webSocketFactory = (WebSocket.Factory) client;\r\n\r\n            mSocket = IO.socket(&quot;https://127.0.0.1:5000&quot;, options);\r\n            mSocket.on(Socket.EVENT_CONNECT, onConnect);\r\n            mSocket.on(Socket.EVENT_DISCONNECT, onDisconnect);\r\n            mSocket.on(Socket.EVENT_CONNECT_ERROR, onConnectError);\r\n            mSocket.on(Constants.SOCKET_RECEIVE_COMMAND, onMessageReceived);\r\n            mSocket.connect();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"Disable SSL/TSL certificate using Socket.IO in android","body":"<p>This is my code of Socket Service. I want to use  rejectUnauthorized: false, but this is available only for node, after findings I used TrustManager class to achieve this but it not working I am not able to connect to server, It always gives error</p>\n<blockquote>\n<p>io.socket.engineio.client.EngineIOException: xhr poll error</p>\n</blockquote>\n<pre><code> private void connectToSocket() {\n    try {\n        TrustManager[] trustAllCerts = new TrustManager[]{\n                new X509TrustManager() {\n                    public X509Certificate[] getAcceptedIssuers() {\n                        return new X509Certificate[]{};\n                    }\n                    public void checkClientTrusted(X509Certificate[] certs, String authType) throws CertificateException {}\n\n                    public void checkServerTrusted(X509Certificate[] certs, String authType) throws CertificateException {}\n                }\n        };\n\n        // Create an SSL context with the custom trust manager\n        SSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\n        sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n\n\n        // Set the SSL context on the OkHttpClient\n        OkHttpClient client = new OkHttpClient.Builder()\n                .sslSocketFactory(sslContext.getSocketFactory(), (X509TrustManager) trustAllCerts[0])\n                .hostnameVerifier((hostname, session) -&gt; true)\n                .build();\n\n        // Create Socket.IO options\n        IO.Options options = new IO.Options();\n        options.callFactory = (Call.Factory) client;\n        options.webSocketFactory = (WebSocket.Factory) client;\n\n        mSocket = IO.socket(&quot;https://127.0.0.1:5000&quot;, options);\n        mSocket.on(Socket.EVENT_CONNECT, onConnect);\n        mSocket.on(Socket.EVENT_DISCONNECT, onDisconnect);\n        mSocket.on(Socket.EVENT_CONNECT_ERROR, onConnectError);\n        mSocket.on(Constants.SOCKET_RECEIVE_COMMAND, onMessageReceived);\n        mSocket.connect();\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","macos","extjs","sencha-cmd"],"answers":[{"comments":[{"owner":{"account_id":8341024,"reputation":1015,"user_id":6266336,"accept_rate":38,"display_name":"Diana"},"score":1,"creation_date":1639407021,"post_id":70274930,"comment_id":124333934,"body_markdown":"That worked for me!\nWish I found this earlier today. So many hours down the drain.\nThanks!!!","body":"That worked for me! Wish I found this earlier today. So many hours down the drain. Thanks!!!"},{"owner":{"account_id":1800430,"reputation":188,"user_id":1638928,"display_name":"Lippai Zoltan"},"score":0,"creation_date":1639410710,"post_id":70274930,"comment_id":124335553,"body_markdown":"That also seems to solve the issue for me. Cheers!","body":"That also seems to solve the issue for me. Cheers!"},{"owner":{"account_id":3830911,"reputation":61,"user_id":3176462,"display_name":"RW-Fairport"},"score":0,"creation_date":1642406545,"post_id":70274930,"comment_id":125052971,"body_markdown":"That solution worked for a few weeks and today the issues are back again.","body":"That solution worked for a few weeks and today the issues are back again."},{"owner":{"account_id":7020443,"reputation":411,"user_id":5389369,"display_name":"Keller Kichel"},"score":5,"creation_date":1642613787,"post_id":70274930,"comment_id":125120040,"body_markdown":"Update on Sencha CMD ticket SKDTOOLS-2139: &quot;As per the latest from our Engineering team that in an order to resolve this issue. Please update app.json as below&quot;\n\n&quot;bypass_lp&quot;: true","body":"Update on Sencha CMD ticket SKDTOOLS-2139: &quot;As per the latest from our Engineering team that in an order to resolve this issue. Please update app.json as below&quot;  &quot;bypass_lp&quot;: true"},{"owner":{"account_id":6377937,"reputation":475,"user_id":4948309,"display_name":"Andre"},"score":2,"creation_date":1644247789,"post_id":70274930,"comment_id":125547970,"body_markdown":"With MacOS 12.2 the issue came back, which was fixed by deleting the app.properties. Adding bypass_lp helps with that. Thanks Keller... Maybe you can update your answer an also add this information.","body":"With MacOS 12.2 the issue came back, which was fixed by deleting the app.properties. Adding bypass_lp helps with that. Thanks Keller... Maybe you can update your answer an also add this information."},{"owner":{"account_id":15152269,"reputation":101,"user_id":10934287,"display_name":"budvic"},"score":0,"creation_date":1666079343,"post_id":70274930,"comment_id":130844305,"body_markdown":"macOS Monterey 12.6 - your decision helped, thank you!","body":"macOS Monterey 12.6 - your decision helped, thank you!"}],"tags":[],"owner":{"account_id":7020443,"reputation":411,"user_id":5389369,"display_name":"Keller Kichel"},"comment_count":6,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1644858435,"creation_date":1638966096,"answer_id":70274930,"question_id":70266708,"body_markdown":"After talking with some sencha MVP at discord.... have received the following tip:\r\n\r\n&gt; You must delete the following file:\r\n&gt; /Users/user/Library/Application Support/Sencha/Cmd/Update/app.properties\r\n\r\nAfter that workaround, the system works again.\r\nI hope these answer can help someone !!\r\n\r\nUpdate!!!\r\n\r\nAfter some mac os updates deleting the app.properties stop working.\r\nSo sencha report to add `bypass_lp:true` to the `app.json`","title":"Sencha CMD problem after macOS Monterrey update","body":"<p>After talking with some sencha MVP at discord.... have received the following tip:</p>\n<blockquote>\n<p>You must delete the following file:\n/Users/user/Library/Application Support/Sencha/Cmd/Update/app.properties</p>\n</blockquote>\n<p>After that workaround, the system works again.\nI hope these answer can help someone !!</p>\n<p>Update!!!</p>\n<p>After some mac os updates deleting the app.properties stop working.\nSo sencha report to add <code>bypass_lp:true</code> to the <code>app.json</code></p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1642414626,"post_id":70739289,"comment_id":125055801,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/70739289/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":16516590,"reputation":1,"user_id":11933863,"display_name":"Power Liu"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1642412589,"creation_date":1642412589,"answer_id":70739289,"question_id":70266708,"body_markdown":"1. Download JRE 8(support apple sillicon neccessary, ex:zulu/bellsoft), and unzip it.\r\n2. Edit path in &quot;{your_senchacmd_path}/.install4j/inst_jre.cfg&quot; and &quot;{your_senchacmd_path}/.install4j/pref_jre.cfg&quot; to new JRE path.\r\n\r\nReason: Sencha CMD&#39;s included JRE is not compiled for the ARM architecture and even with Rosetta 2.\r\n","title":"Sencha CMD problem after macOS Monterrey update","body":"<ol>\n<li>Download JRE 8(support apple sillicon neccessary, ex:zulu/bellsoft), and unzip it.</li>\n<li>Edit path in &quot;{your_senchacmd_path}/.install4j/inst_jre.cfg&quot; and &quot;{your_senchacmd_path}/.install4j/pref_jre.cfg&quot; to new JRE path.</li>\n</ol>\n<p>Reason: Sencha CMD's included JRE is not compiled for the ARM architecture and even with Rosetta 2.</p>\n"},{"tags":[],"owner":{"account_id":28814288,"reputation":1,"user_id":22068284,"display_name":"Richard Hasting"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686676190,"creation_date":1686676190,"answer_id":76467256,"question_id":70266708,"body_markdown":"vi \\`find . -name &quot;app.json&quot; -print\\`\r\n\r\nafter the line  \r\n\r\n**&quot;framework&quot; : &quot;ext&quot;,**\r\n\r\nplace the line: \r\n\r\n**&quot;bypass_lp&quot; : &quot;true&quot;,**\r\n\r\nInto each file, save the files, and rerun.\r\n","title":"Sencha CMD problem after macOS Monterrey update","body":"<p>vi `find . -name &quot;app.json&quot; -print`</p>\n<p>after the line</p>\n<p><strong>&quot;framework&quot; : &quot;ext&quot;,</strong></p>\n<p>place the line:</p>\n<p><strong>&quot;bypass_lp&quot; : &quot;true&quot;,</strong></p>\n<p>Into each file, save the files, and rerun.</p>\n"}],"owner":{"account_id":7020443,"reputation":411,"user_id":5389369,"display_name":"Keller Kichel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3580,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":3,"score":6,"last_activity_date":1686676190,"creation_date":1638909742,"question_id":70266708,"body_markdown":"# Problem\r\nAfter update my macOS to Monterrey (12.0.1),  I&#39;m with a big problem to start my local projects with ExtJS.\r\n\r\nWhen I execute:\r\n```\r\nsencha app watch\r\n```\r\n\r\nGet the error:\r\n```\r\nSencha Cmd v7.5.0.5\r\n#\r\n# A fatal error has been detected by the Java Runtime Environment:\r\n#\r\n#  SIGSEGV (0xb) at pc=0x00007ff813dcb6f2, pid=18621, tid=0x000000000000a707\r\n#\r\n# JRE version: OpenJDK Runtime Environment (8.0_242-b08) (build 1.8.0_242-b08)\r\n# Java VM: OpenJDK 64-Bit Server VM (25.242-b08 mixed mode bsd-amd64 compressed oops)\r\n# Problematic frame:\r\n# C  [libsystem_platform.dylib+0x16f2]  _platform_strlen+0x12\r\n#\r\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\r\n#\r\n# An error report file with more information is saved as:\r\n# [my app folder]/hs_err_pid18621.log\r\n#\r\n# If you would like to submit a bug report, please visit:\r\n#   http://bugreport.java.com/bugreport/crash.jsp\r\n# The crash happened outside the Java Virtual Machine in native code.\r\n# See problematic frame for where to report the bug.\r\n#\r\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 18621 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\r\n```\r\n\r\nThe funny thing is... if run again... the same command (`sencha app watch`), the error change:\r\n\r\n```\r\n2021-12-06 22:10:28.229 java[17909:173895] *** Terminating app due to uncaught exception &#39;NSInvalidArgumentException&#39;, reason: &#39;*** -[NSPlaceholderString initWithFormat:locale:arguments:]: nil argument&#39;\r\n*** First throw call stack:\r\n(\r\n    0   CoreFoundation                      0x00007ff813efae5b __exceptionPreprocess + 242\r\n    1   libobjc.A.dylib                     0x00007ff813c5bb9d objc_exception_throw + 48\r\n    2   Foundation                          0x00007ff814c9126d -[NSPlaceholderString initWithFormat:locale:arguments:] + 295\r\n    3   Foundation                          0x00007ff814c9ff2f +[NSString stringWithFormat:] + 153\r\n    4   Update1478821341979869630.dylib     0x00000001218897a9 wuusgJAD + 553\r\n    5   Update1478821341979869630.dylib     0x0000000121874319 pGgFelzv + 9\r\n    6   Update1478821341979869630.dylib     0x0000000121888ab2 MKNXgAzM + 562\r\n    7   Update1478821341979869630.dylib     0x000000012188795d tyRtaPXr + 61\r\n    8   Update1478821341979869630.dylib     0x00000001218877bb ZWwnJFGw + 283\r\n    9   Update1478821341979869630.dylib     0x0000000121880dc6 Phdl_SDOTFG + 246\r\n    10  Update1478821341979869630.dylib     0x0000000121880e49 Phdl_SDOTF + 25\r\n    11  Update1478821341979869630.dylib     0x000000012186e505 Java_phdl_Phdl_SDOTF + 21\r\n    12  ???                                 0x000000010e0e3407 0x0 + 4530779143\r\n)\r\nlibc++abi: terminating with uncaught exception of type NSException\r\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 17909 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\r\n```\r\n\r\nAnd again (`sencha app watch`)... another one:\r\n```\r\njava(18084,0x7000041c5000) malloc: Heap corruption detected, free list is damaged at 0x6000005f3330\r\n*** Incorrect guard value: 105553126503408\r\njava(18084,0x7000041c5000) malloc: *** set a breakpoint in malloc_error_break to debug\r\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 18084 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\r\n```\r\n\r\nAnd after each execution, the error keep alternating between those above... \r\n\r\n# Attempts\r\n1 - JAVA\r\nFirst, I thinked is something with **JAVA** version, so I removed all **JAVA** installed, including **brew** installed versions.\r\n\r\nAlso removed all references to **JAVA_HOME**, and a fresh install of **JAVA 8** was maked. No sucess... did it again with **JAVA 11**, and **JAVA 17**, without sucess.\r\n\r\nObs. At JAVA 17 the problem changed, but this is because **JAVA 17**  dont have the javascript processor (`javax`) anymore.\r\n\r\n2 - SENCHA CMD\r\nAfter the JAVA, have checked **Sencha cmd**, if has any update or something... my **Sencha cmd** versio is 7.4.0.39, and for my surprise have a new version (7.5.0.5), but also after update still not working.\r\n\r\nAny sugestions?","title":"Sencha CMD problem after macOS Monterrey update","body":"<h1>Problem</h1>\n<p>After update my macOS to Monterrey (12.0.1),  I'm with a big problem to start my local projects with ExtJS.</p>\n<p>When I execute:</p>\n<pre><code>sencha app watch\n</code></pre>\n<p>Get the error:</p>\n<pre><code>Sencha Cmd v7.5.0.5\n#\n# A fatal error has been detected by the Java Runtime Environment:\n#\n#  SIGSEGV (0xb) at pc=0x00007ff813dcb6f2, pid=18621, tid=0x000000000000a707\n#\n# JRE version: OpenJDK Runtime Environment (8.0_242-b08) (build 1.8.0_242-b08)\n# Java VM: OpenJDK 64-Bit Server VM (25.242-b08 mixed mode bsd-amd64 compressed oops)\n# Problematic frame:\n# C  [libsystem_platform.dylib+0x16f2]  _platform_strlen+0x12\n#\n# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try &quot;ulimit -c unlimited&quot; before starting Java again\n#\n# An error report file with more information is saved as:\n# [my app folder]/hs_err_pid18621.log\n#\n# If you would like to submit a bug report, please visit:\n#   http://bugreport.java.com/bugreport/crash.jsp\n# The crash happened outside the Java Virtual Machine in native code.\n# See problematic frame for where to report the bug.\n#\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 18621 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\n</code></pre>\n<p>The funny thing is... if run again... the same command (<code>sencha app watch</code>), the error change:</p>\n<pre><code>2021-12-06 22:10:28.229 java[17909:173895] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSPlaceholderString initWithFormat:locale:arguments:]: nil argument'\n*** First throw call stack:\n(\n    0   CoreFoundation                      0x00007ff813efae5b __exceptionPreprocess + 242\n    1   libobjc.A.dylib                     0x00007ff813c5bb9d objc_exception_throw + 48\n    2   Foundation                          0x00007ff814c9126d -[NSPlaceholderString initWithFormat:locale:arguments:] + 295\n    3   Foundation                          0x00007ff814c9ff2f +[NSString stringWithFormat:] + 153\n    4   Update1478821341979869630.dylib     0x00000001218897a9 wuusgJAD + 553\n    5   Update1478821341979869630.dylib     0x0000000121874319 pGgFelzv + 9\n    6   Update1478821341979869630.dylib     0x0000000121888ab2 MKNXgAzM + 562\n    7   Update1478821341979869630.dylib     0x000000012188795d tyRtaPXr + 61\n    8   Update1478821341979869630.dylib     0x00000001218877bb ZWwnJFGw + 283\n    9   Update1478821341979869630.dylib     0x0000000121880dc6 Phdl_SDOTFG + 246\n    10  Update1478821341979869630.dylib     0x0000000121880e49 Phdl_SDOTF + 25\n    11  Update1478821341979869630.dylib     0x000000012186e505 Java_phdl_Phdl_SDOTF + 21\n    12  ???                                 0x000000010e0e3407 0x0 + 4530779143\n)\nlibc++abi: terminating with uncaught exception of type NSException\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 17909 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\n</code></pre>\n<p>And again (<code>sencha app watch</code>)... another one:</p>\n<pre><code>java(18084,0x7000041c5000) malloc: Heap corruption detected, free list is damaged at 0x6000005f3330\n*** Incorrect guard value: 105553126503408\njava(18084,0x7000041c5000) malloc: *** set a breakpoint in malloc_error_break to debug\n/Users/kellerkichel/bin/Sencha/Cmd/sencha: line 167: 18084 Abort trap: 6           $BASEDIR/$VER/sencha &quot;$@&quot;\n</code></pre>\n<p>And after each execution, the error keep alternating between those above...</p>\n<h1>Attempts</h1>\n<p>1 - JAVA\nFirst, I thinked is something with <strong>JAVA</strong> version, so I removed all <strong>JAVA</strong> installed, including <strong>brew</strong> installed versions.</p>\n<p>Also removed all references to <strong>JAVA_HOME</strong>, and a fresh install of <strong>JAVA 8</strong> was maked. No sucess... did it again with <strong>JAVA 11</strong>, and <strong>JAVA 17</strong>, without sucess.</p>\n<p>Obs. At JAVA 17 the problem changed, but this is because <strong>JAVA 17</strong>  dont have the javascript processor (<code>javax</code>) anymore.</p>\n<p>2 - SENCHA CMD\nAfter the JAVA, have checked <strong>Sencha cmd</strong>, if has any update or something... my <strong>Sencha cmd</strong> versio is 7.4.0.39, and for my surprise have a new version (7.5.0.5), but also after update still not working.</p>\n<p>Any sugestions?</p>\n"},{"tags":["java","xml","xslt","saxon"],"comments":[{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1526467621,"post_id":50367584,"comment_id":87753622,"body_markdown":"Do you have two questions here, how to use Saxon 9 with Java to perform an XSLT transformation and how to write an XSLT stylesheet for your particular task? As for the XSLT task, does the second `address` element not contain any child elements but only the text &quot;....&quot;? What defines the order for the CSV?","body":"Do you have two questions here, how to use Saxon 9 with Java to perform an XSLT transformation and how to write an XSLT stylesheet for your particular task? As for the XSLT task, does the second <code>address</code> element not contain any child elements but only the text &quot;....&quot;? What defines the order for the CSV?"},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1526467915,"post_id":50367584,"comment_id":87753816,"body_markdown":"Both &lt;details&gt; and &lt;address&gt; don&#39;t contain further child elements. The order should be set by the order of `&lt;xsl:value-of select...&gt;` attributes.","body":"Both &lt;details&gt; and &lt;address&gt; don&#39;t contain further child elements. The order should be set by the order of <code>&lt;xsl:value-of select...&gt;</code> attributes."},{"owner":{"account_id":91947,"reputation":161829,"user_id":252228,"accept_rate":80,"display_name":"Martin Honnen"},"score":0,"creation_date":1526470464,"post_id":50367584,"comment_id":87755441,"body_markdown":"Is `&lt;address&gt;....&lt;/address&gt;` an example of real data or just lazyness to show the structure of the element twice? And it is still not clear whether you need help writing the XSLT (you have now posted one) and writing Java code to execute the XSLT or both? As for writing Java code to execute XSLT, see http://saxonica.com/html/documentation/using-xsl/embedding/s9api-transformation.html and http://saxonica.com/html/documentation/samples/s9api.html.","body":"Is <code>&lt;address&gt;....&lt;&#47;address&gt;</code> an example of real data or just lazyness to show the structure of the element twice? And it is still not clear whether you need help writing the XSLT (you have now posted one) and writing Java code to execute the XSLT or both? As for writing Java code to execute XSLT, see <a href=\"http://saxonica.com/html/documentation/using-xsl/embedding/s9api-transformation.html\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation/using-xsl/embedding/&hellip;</a> and <a href=\"http://saxonica.com/html/documentation/samples/s9api.html\" rel=\"nofollow noreferrer\">saxonica.com/html/documentation/samples/s9api.html</a>."},{"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"score":0,"creation_date":1526472585,"post_id":50367584,"comment_id":87756966,"body_markdown":"I was just lazy not copying the address details again. And preferably I need assistance in how to properly transform the xml to string (java code), when using an existing xslt.","body":"I was just lazy not copying the address details again. And preferably I need assistance in how to properly transform the xml to string (java code), when using an existing xslt."}],"answers":[{"comments":[{"owner":{"account_id":2616282,"reputation":188,"user_id":2265270,"display_name":"Tiemo Vorsch&#252;tz"},"score":0,"creation_date":1673950482,"post_id":50383549,"comment_id":132605868,"body_markdown":"IMHO, StringWriter should must be closed. It implements Closable, hence you can use try-with-resource here.","body":"IMHO, StringWriter should must be closed. It implements Closable, hence you can use try-with-resource here."}],"tags":[],"owner":{"account_id":2544600,"reputation":3213,"user_id":2209666,"accept_rate":62,"display_name":"Aniket V"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1686676172,"creation_date":1526532773,"answer_id":50383549,"question_id":50367584,"body_markdown":"The XSLT template can be modified as below. The elements can be selected according to the required sequence.\r\n\r\n\t&lt;xsl:template match=&quot;employee&quot;&gt;\r\n\t\t&lt;xsl:value-of select=&quot;ancestor::employees/@stage, details/name, details/age, address/street, address/nr&quot; separator=&quot;, &quot; /&gt;\r\n\t\t&lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\r\n\t&lt;/xsl:template&gt;\r\n\r\nAfter replacing the `...` with some dummy values in the `&lt;address&gt;` element the following output is generated using the above template.\r\n\r\n    test, Joe, 34, test, 12\r\n    test, Sam, 24, test1, 123\r\n\r\nFor transforming the XML (using XSLT) in Java, I use the following code snippet most of the time. This method returns the transformed XML as a `String`. The required library is `saxon9he.jar`. You may have to upgrade the library version for using with XSLT 3.0\r\n\r\n\tpublic static String transformXML(String xml, InputStream xslFile) {\r\n\t\tString outputXML = null;\r\n\t\ttry {\r\n\t\t\tSystem.setProperty(&quot;javax.xml.transform.TransformerFactory&quot;, &quot;net.sf.saxon.TransformerFactoryImpl&quot;);\r\n\t\t\tTransformerFactory factory = TransformerFactory.newInstance();\r\n\t\t\tTransformer transformer = factory.newTransformer(new StreamSource(xslFile));\r\n\t\t\tSource xmlStream = new StreamSource(new StringReader(xml));\r\n\t\t\tStringWriter writer = new StringWriter();\r\n\t\t\tResult result = new StreamResult(writer);\r\n\t\t\ttransformer.transform(xmlStream, result);\r\n\t\t\toutputXML = writer.getBuffer().toString();\r\n            writer.close();\r\n\t\t} catch (TransformerConfigurationException tce) {\r\n\t\t\ttce.printStackTrace();\r\n\t\t} catch (TransformerException te) {\r\n\t\t\tte.printStackTrace();\r\n\t\t}\r\n\t\treturn outputXML;\r\n\t}","title":"How to transform each xml node with Saxon XSLT?","body":"<p>The XSLT template can be modified as below. The elements can be selected according to the required sequence.</p>\n<pre><code>&lt;xsl:template match=&quot;employee&quot;&gt;\n    &lt;xsl:value-of select=&quot;ancestor::employees/@stage, details/name, details/age, address/street, address/nr&quot; separator=&quot;, &quot; /&gt;\n    &lt;xsl:text&gt;&amp;#xA;&lt;/xsl:text&gt;\n&lt;/xsl:template&gt;\n</code></pre>\n<p>After replacing the <code>...</code> with some dummy values in the <code>&lt;address&gt;</code> element the following output is generated using the above template.</p>\n<pre><code>test, Joe, 34, test, 12\ntest, Sam, 24, test1, 123\n</code></pre>\n<p>For transforming the XML (using XSLT) in Java, I use the following code snippet most of the time. This method returns the transformed XML as a <code>String</code>. The required library is <code>saxon9he.jar</code>. You may have to upgrade the library version for using with XSLT 3.0</p>\n<pre><code>public static String transformXML(String xml, InputStream xslFile) {\n    String outputXML = null;\n    try {\n        System.setProperty(&quot;javax.xml.transform.TransformerFactory&quot;, &quot;net.sf.saxon.TransformerFactoryImpl&quot;);\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Transformer transformer = factory.newTransformer(new StreamSource(xslFile));\n        Source xmlStream = new StreamSource(new StringReader(xml));\n        StringWriter writer = new StringWriter();\n        Result result = new StreamResult(writer);\n        transformer.transform(xmlStream, result);\n        outputXML = writer.getBuffer().toString();\n        writer.close();\n    } catch (TransformerConfigurationException tce) {\n        tce.printStackTrace();\n    } catch (TransformerException te) {\n        te.printStackTrace();\n    }\n    return outputXML;\n}\n</code></pre>\n"}],"owner":{"account_id":1229539,"reputation":82701,"user_id":1194415,"accept_rate":76,"display_name":"membersound"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2135,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":50383549,"answer_count":1,"score":0,"last_activity_date":1686676172,"creation_date":1526464123,"question_id":50367584,"body_markdown":"How can I use `Saxon` xslt transformation library to convert an xml file that contains many nodes to a plain csv string? Means, I want Saxon to concatenate each `employee` entry as csv, and put them all together.\r\n\r\nThis is the saxon setup, but I don&#39;t know how I could not transform an input xml file with it:\r\n\r\n\t\t//false = does not required a feature from a licensed version of Saxon.\r\n\t\tProcessor processor = new Processor(false);\r\n\t\t\r\n\t\tXsltCompiler compiler = processor.newXsltCompiler();\r\n\t\tcompiler.compile(new StreamSource(&quot;transformation.xslt&quot;));\r\n\r\n        Serializer serializer = processor.newSerializer();\r\n        serializer.setOutputProperty(Serializer.Property.OMIT_XML_DECLARATION, &quot;yes&quot;);\r\n\r\n        //TODO \r\n        //String result = serializer...serializeNodeToString();\r\n\r\nI want to transform the following xml:\r\n\r\n    &lt;employees stage=&quot;test&quot;&gt;\r\n       &lt;employee&gt;\r\n          &lt;details&gt;\r\n             &lt;name&gt;Joe&lt;/name&gt;\r\n             &lt;age&gt;34&lt;/age&gt;\r\n          &lt;/details&gt;\r\n          &lt;address&gt;\r\n             &lt;street&gt;test&lt;/street&gt;\r\n             &lt;nr&gt;12&lt;/nr&gt;\r\n          &lt;/address&gt;\r\n       &lt;/employee&gt;\r\n       &lt;employee&gt;\r\n          &lt;address&gt;....&lt;/address&gt;\r\n          &lt;details&gt;\r\n             &lt;!-- note the changed order of elements! --&gt;\r\n             &lt;age&gt;24&lt;/age&gt;\r\n             &lt;name&gt;Sam&lt;/name&gt;\r\n          &lt;/details&gt;\r\n       &lt;/employee&gt;\r\n    &lt;/employees&gt;\r\n\r\nThe `result` string should contain the following (one big string with linebreak separated csv lines):\r\n\r\n    test,Joe,34,test,12\\n\r\n    test,Sam,24,...\\n\r\n\r\nXslt might be similar to:\r\n\r\n    &lt;xsl:transform version=&quot;3.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&gt;\r\n      &lt;xsl:output method=&quot;text&quot;/&gt;\r\n      &lt;xsl:template match=&quot;employee&quot;&gt;\r\n        &lt;xsl:value-of select=&quot;name&quot;/&gt;\r\n        &lt;xsl:value-of select=&quot;age&quot;/&gt;\r\n      &lt;/xsl:template&gt;\r\n    &lt;/xsl:transform&gt;","title":"How to transform each xml node with Saxon XSLT?","body":"<p>How can I use <code>Saxon</code> xslt transformation library to convert an xml file that contains many nodes to a plain csv string? Means, I want Saxon to concatenate each <code>employee</code> entry as csv, and put them all together.</p>\n\n<p>This is the saxon setup, but I don't know how I could not transform an input xml file with it:</p>\n\n<pre><code>    //false = does not required a feature from a licensed version of Saxon.\n    Processor processor = new Processor(false);\n\n    XsltCompiler compiler = processor.newXsltCompiler();\n    compiler.compile(new StreamSource(\"transformation.xslt\"));\n\n    Serializer serializer = processor.newSerializer();\n    serializer.setOutputProperty(Serializer.Property.OMIT_XML_DECLARATION, \"yes\");\n\n    //TODO \n    //String result = serializer...serializeNodeToString();\n</code></pre>\n\n<p>I want to transform the following xml:</p>\n\n<pre><code>&lt;employees stage=\"test\"&gt;\n   &lt;employee&gt;\n      &lt;details&gt;\n         &lt;name&gt;Joe&lt;/name&gt;\n         &lt;age&gt;34&lt;/age&gt;\n      &lt;/details&gt;\n      &lt;address&gt;\n         &lt;street&gt;test&lt;/street&gt;\n         &lt;nr&gt;12&lt;/nr&gt;\n      &lt;/address&gt;\n   &lt;/employee&gt;\n   &lt;employee&gt;\n      &lt;address&gt;....&lt;/address&gt;\n      &lt;details&gt;\n         &lt;!-- note the changed order of elements! --&gt;\n         &lt;age&gt;24&lt;/age&gt;\n         &lt;name&gt;Sam&lt;/name&gt;\n      &lt;/details&gt;\n   &lt;/employee&gt;\n&lt;/employees&gt;\n</code></pre>\n\n<p>The <code>result</code> string should contain the following (one big string with linebreak separated csv lines):</p>\n\n<pre><code>test,Joe,34,test,12\\n\ntest,Sam,24,...\\n\n</code></pre>\n\n<p>Xslt might be similar to:</p>\n\n<pre><code>&lt;xsl:transform version=\"3.0\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\"&gt;\n  &lt;xsl:output method=\"text\"/&gt;\n  &lt;xsl:template match=\"employee\"&gt;\n    &lt;xsl:value-of select=\"name\"/&gt;\n    &lt;xsl:value-of select=\"age\"/&gt;\n  &lt;/xsl:template&gt;\n&lt;/xsl:transform&gt;\n</code></pre>\n"},{"tags":["java","append","apache-flink","log4j2"],"owner":{"account_id":15163625,"reputation":35,"user_id":10941865,"display_name":"Alexey Lvov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686675119,"creation_date":1686424014,"question_id":76447771,"body_markdown":"In every specific Flink app I can use whatever logger (logback, log4j2, etc.) with appropriate configuration.\r\n\r\nBut in standalone mode, the actual configuration used is not the one in my `jar` file because Flink has it own configuration files (log4j2 by default), which take precedence over my own.\r\n\r\nThe goal is to pass job name (not jobId) to my logs like this:\r\n\r\n`10/06/2023 21:05:22.527[my-flink-application-0.1.3]  INFO [org.example.service.MainSourceFunction] : Hello world`\r\n\r\nIs there any best way to do this?","title":"Append Flink job name to every log statement","body":"<p>In every specific Flink app I can use whatever logger (logback, log4j2, etc.) with appropriate configuration.</p>\n<p>But in standalone mode, the actual configuration used is not the one in my <code>jar</code> file because Flink has it own configuration files (log4j2 by default), which take precedence over my own.</p>\n<p>The goal is to pass job name (not jobId) to my logs like this:</p>\n<p><code>10/06/2023 21:05:22.527[my-flink-application-0.1.3]  INFO [org.example.service.MainSourceFunction] : Hello world</code></p>\n<p>Is there any best way to do this?</p>\n"},{"tags":["java","spring","spring-boot","docker","keycloak"],"comments":[{"owner":{"account_id":15094317,"reputation":383,"user_id":10893210,"display_name":"F. Salvini"},"score":0,"creation_date":1658646825,"post_id":73094533,"comment_id":129099566,"body_markdown":"`keycloak.auth-server-url=http://localhost:8080/auth` in `user-service` should be `keycloak.auth-server-url=http://localhost:8181/`","body":"<code>keycloak.auth-server-url=http:&#47;&#47;localhost:8080&#47;auth</code> in <code>user-service</code> should be <code>keycloak.auth-server-url=http:&#47;&#47;localhost:8181&#47;</code>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1658831892,"post_id":73094533,"comment_id":129144278,"body_markdown":"@F.Salvini I updated my repository again but the issue cannot disappear","body":"@F.Salvini I updated my repository again but the issue cannot disappear"}],"answers":[{"tags":[],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1659683762,"creation_date":1659683762,"answer_id":73246030,"question_id":73094533,"body_markdown":"Here is my answer shown below.\r\n\r\n`keycloak.auth-server-url=http://localhost:8080/auth` in `user-service` should be `keycloak.auth-server-url=http://localhost:8181/`","title":"Spring Boot Microservice Keycloak javax.ws.rs.NotFoundException: HTTP 404 Not Found (Cannot Create User with Role)","body":"<p>Here is my answer shown below.</p>\n<p><code>keycloak.auth-server-url=http://localhost:8080/auth</code> in <code>user-service</code> should be <code>keycloak.auth-server-url=http://localhost:8181/</code></p>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1519,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73246030,"answer_count":1,"score":-1,"last_activity_date":1686675078,"creation_date":1658614104,"question_id":73094533,"body_markdown":"I have a problem about implementing the process of signup through Keycloak running on docker container through this command \r\n\r\n    docker run -p 8181:8080 -e KEYCLOAK_ADMIN=admin -e KEYCLOAK_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:18.0.2 start-dev\r\n\r\nin my Spring Boot Microservice example.\r\n\r\nI already created realm , roles in Keycloak running in Docker.\r\n\r\nWhen I call signup of UserController in userservice, I got this error.\r\n\r\njavax.ws.rs.NotFoundException: HTTP 404 Not Found.\r\n\r\nI think there is a problem in createUserWithKeycloak method in KeycloakServiceImpl \r\n\r\n    Response response = keycloak.realm(realm).users().create(userRepresentation);\r\n\r\nHere is my project link : [Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/SpringBootMicroservices\r\n\r\nEdited 1 (I just updated my repository but nothing changed.)\r\n\r\n1 ) Open Keycloak\r\n\r\n2 ) Create Realm\r\n\r\n3 ) Create Role\r\n\r\n4 ) Make a request to `http://localhost:9000/api/v1/users/signup`\r\nHere is my body shown below.\r\n\r\n    {\r\n        &quot;username&quot; : &quot;springbootmicroserviceuser&quot;,\r\n        &quot;password&quot; : &quot;user123456&quot;,\r\n        &quot;name&quot; : &quot;Micro User&quot;,\r\n        &quot;surname&quot; : &quot;User Surname&quot;,\r\n        &quot;phone&quot; : &quot;123456789&quot;,\r\n        &quot;email&quot; : &quot;springbootmicroserviceuser@user.com&quot;,\r\n        &quot;role&quot; : &quot;ROLE_USER&quot;\r\n    }\r\n\r\n5 ) I got javax.ws.rs.NotFoundException: HTTP 404 Not Found","title":"Spring Boot Microservice Keycloak javax.ws.rs.NotFoundException: HTTP 404 Not Found (Cannot Create User with Role)","body":"<p>I have a problem about implementing the process of signup through Keycloak running on docker container through this command</p>\n<pre><code>docker run -p 8181:8080 -e KEYCLOAK_ADMIN=admin -e KEYCLOAK_ADMIN_PASSWORD=admin quay.io/keycloak/keycloak:18.0.2 start-dev\n</code></pre>\n<p>in my Spring Boot Microservice example.</p>\n<p>I already created realm , roles in Keycloak running in Docker.</p>\n<p>When I call signup of UserController in userservice, I got this error.</p>\n<p>javax.ws.rs.NotFoundException: HTTP 404 Not Found.</p>\n<p>I think there is a problem in createUserWithKeycloak method in KeycloakServiceImpl</p>\n<pre><code>Response response = keycloak.realm(realm).users().create(userRepresentation);\n</code></pre>\n<p>Here is my project link : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Edited 1 (I just updated my repository but nothing changed.)</p>\n<p>1 ) Open Keycloak</p>\n<p>2 ) Create Realm</p>\n<p>3 ) Create Role</p>\n<p>4 ) Make a request to <code>http://localhost:9000/api/v1/users/signup</code>\nHere is my body shown below.</p>\n<pre><code>{\n    &quot;username&quot; : &quot;springbootmicroserviceuser&quot;,\n    &quot;password&quot; : &quot;user123456&quot;,\n    &quot;name&quot; : &quot;Micro User&quot;,\n    &quot;surname&quot; : &quot;User Surname&quot;,\n    &quot;phone&quot; : &quot;123456789&quot;,\n    &quot;email&quot; : &quot;springbootmicroserviceuser@user.com&quot;,\n    &quot;role&quot; : &quot;ROLE_USER&quot;\n}\n</code></pre>\n<p>5 ) I got javax.ws.rs.NotFoundException: HTTP 404 Not Found</p>\n"},{"tags":["java","android","android-layout","android-notifications"],"owner":{"account_id":27761018,"reputation":71,"user_id":21193451,"display_name":"user21193451"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686674569,"creation_date":1686673409,"question_id":76466918,"body_markdown":"I want to make some change in android notification layout. (I&#39;ve checked all MO posts.) It seams that it is hard to do this. So I tried to include that layout in a custom layout as follow:\r\n\r\n    &lt;include layout=&quot;@android:layout/notification_template_material_messaging&quot;/&gt;\r\n\r\nBut this gives \r\n\r\n    android.databinding.tool.processing.ScopedException: [databinding]\r\n    {&quot;msg&quot;:&quot;included value (@android:layout/notification_template_material_messaging) must start with @layout/.&quot;\r\n\r\nerror. Is there a way to use `notification_template_material_messaging`?\r\n\r\nIf not, in source code of `notification_template_material_messaging` there are some private and protected views like\r\n\r\n - `&lt;com.android.internal.widget.MessagingLayout`\r\n - `&lt;com.android.internal.widget.NotificationMaxHeightFrameLayout`\r\n\r\n that I am not sure what is their appropriate replacement.","title":"Is there a way to replicate android notification layout?","body":"<p>I want to make some change in android notification layout. (I've checked all MO posts.) It seams that it is hard to do this. So I tried to include that layout in a custom layout as follow:</p>\n<pre><code>&lt;include layout=&quot;@android:layout/notification_template_material_messaging&quot;/&gt;\n</code></pre>\n<p>But this gives</p>\n<pre><code>android.databinding.tool.processing.ScopedException: [databinding]\n{&quot;msg&quot;:&quot;included value (@android:layout/notification_template_material_messaging) must start with @layout/.&quot;\n</code></pre>\n<p>error. Is there a way to use <code>notification_template_material_messaging</code>?</p>\n<p>If not, in source code of <code>notification_template_material_messaging</code> there are some private and protected views like</p>\n<ul>\n<li><code>&lt;com.android.internal.widget.MessagingLayout</code></li>\n<li><code>&lt;com.android.internal.widget.NotificationMaxHeightFrameLayout</code></li>\n</ul>\n<p>that I am not sure what is their appropriate replacement.</p>\n"},{"tags":["java","gradle","javac"],"owner":{"account_id":201208,"reputation":3985,"user_id":447503,"accept_rate":61,"display_name":"basin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686674458,"creation_date":1686672715,"question_id":76466835,"body_markdown":"Modern Gradle does not discover annotation processors by default. The 3rd-party low-code solution we use calls Gradle internally and to compile our java classes and we want it to discover the annotation processor in a jar with known path.\r\n\r\nUnfortunately, `build.gradle` is generated and we can&#39;t make changes to it, but we can set environment variables and java system properties.\r\n\r\nThe generated `build.gradle` calls `JavaCompile` with some options, but it does not allow custom options.\r\n\r\nI was hoping there&#39;s some environment variable like `JAVA_TOOL_OPTIONS`, but recognized by `javac`. Or a system property, something like `javax.annotation.processing.ProcessorPath`. Or a gradle variable like `ORG_GRADLE_PROJECT_compile_annotationProcessorPath`. Or hook `objectFactory.newInstance(CompileOptions.class)`\r\n\r\nThe generated task looks like this: \r\n```\r\ntasks.register(&quot;compile&quot;, JavaCompile) {\r\n    source = ...\r\n    classpath = ...\r\n    destinationDirectory.set(...)\r\n}\r\n```","title":"pass javac -processorpath or gradle annotationProcessorPath via environment variable or system property","body":"<p>Modern Gradle does not discover annotation processors by default. The 3rd-party low-code solution we use calls Gradle internally and to compile our java classes and we want it to discover the annotation processor in a jar with known path.</p>\n<p>Unfortunately, <code>build.gradle</code> is generated and we can't make changes to it, but we can set environment variables and java system properties.</p>\n<p>The generated <code>build.gradle</code> calls <code>JavaCompile</code> with some options, but it does not allow custom options.</p>\n<p>I was hoping there's some environment variable like <code>JAVA_TOOL_OPTIONS</code>, but recognized by <code>javac</code>. Or a system property, something like <code>javax.annotation.processing.ProcessorPath</code>. Or a gradle variable like <code>ORG_GRADLE_PROJECT_compile_annotationProcessorPath</code>. Or hook <code>objectFactory.newInstance(CompileOptions.class)</code></p>\n<p>The generated task looks like this:</p>\n<pre><code>tasks.register(&quot;compile&quot;, JavaCompile) {\n    source = ...\n    classpath = ...\n    destinationDirectory.set(...)\n}\n</code></pre>\n"},{"tags":["java","mysql","hibernate"],"answers":[{"comments":[{"owner":{"account_id":2979658,"reputation":4791,"user_id":2529921,"accept_rate":72,"display_name":"chiperortiz"},"score":0,"creation_date":1434049904,"post_id":30783511,"comment_id":49628438,"body_markdown":"I have follow your link your code `@javax.persistence.AssociationOverrides({@javax.persistence.AssociationOverride(name=&quot;student&quot;,joinColumns=@JoinColumn(&quot;c02&quot;))})` but it netbeans it throws a compilation error. `symbol:   method value()\n  location: @interface JoinColumn` what i am doing wrong.","body":"I have follow your link your code <code>@javax.persistence.AssociationOverrides({@javax.persistence.&zwnj;&#8203;AssociationOverride(&zwnj;&#8203;name=&quot;student&quot;,joinC&zwnj;&#8203;olumns=@JoinColumn(&quot;&zwnj;&#8203;c02&quot;))})</code> but it netbeans it throws a compilation error. <code>symbol:   method value()   location: @interface JoinColumn</code> what i am doing wrong."}],"tags":[],"owner":{"account_id":2163786,"reputation":1231,"user_id":1917327,"display_name":"codedabbler"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1434032428,"creation_date":1434032428,"answer_id":30783511,"question_id":30770140,"body_markdown":"You can use the AssociationOverride annotation to accomplish this:\r\n\r\nhttp://www.objectdb.com/api/java/jpa/AssociationOverrides","title":"Java Hibernate Hierachy Different JoinColumn in Child class Column &#39;C01&#39; specified twice","body":"<p>You can use the AssociationOverride annotation to accomplish this:</p>\n\n<p><a href=\"http://www.objectdb.com/api/java/jpa/AssociationOverrides\" rel=\"nofollow\">http://www.objectdb.com/api/java/jpa/AssociationOverrides</a></p>\n"}],"owner":{"account_id":2979658,"reputation":4791,"user_id":2529921,"accept_rate":72,"display_name":"chiperortiz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":328,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":30783511,"answer_count":1,"score":2,"last_activity_date":1686674375,"creation_date":1433986567,"question_id":30770140,"body_markdown":"I have several Entitys in my models but some of them share a same property namely `Student`. I have created a abstract class like this.\r\n\r\n    @javax.persistence.MappedSuperclass\r\n    public abstract class StudentImpl \r\n    {\r\n       private Student student;\r\n       @ManyToOne(fetch=FetchType.LAZY)@JoinColumn(name=&quot;c01&quot;)    \r\n       public Student getStudent(){return student;}\r\n       @Override\r\n       public void setStudent(final Student student){this.student=student;return;}\r\n    }\r\n\r\nThis is working like a charm. See that the 95% of them have mapped to `C01` column in my MySQL table.\r\n\r\nI have use this abstract class extending each of my Models with share the same property.\r\n\r\n    public class Teammate extends StudentImpl\r\n\r\nThe problem arise in some classes the Student property is mapped to a different column name in their table\r\n\r\nExample\r\n\r\n    create table myTable \r\n    (\r\n       c02 int(11) NOT NULL, //student entity is mapped to c02 column instead of c01\r\n    )\r\n\r\nAs you can see they mismatch c01 and c02 and their column c01 column is mapped to a simple `String` instead of a Student. \r\n\r\nI have try\r\n    \r\n    @javax.persistence.AttributeOverride(name=&quot;student&quot;,column=@Column(name=&quot;c02&quot;))\r\n\r\nWishing Hibernate could understand student property is mapped to column c02 in this Entity.\r\n\r\n    @javax.persistence.AttributeOverride(name=&quot;student&quot;,column=@Column(name=&quot;c02&quot;))\r\n    public class AnotherClass extends StudentImpl\r\n    {\r\n        private String c01;\r\n        private String getC01(){return this.c01;} //Column c01 is mapped to a String \r\n    }\r\n\r\nBut seems not working because it Throws \r\n\r\n    Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Column &#39;C01&#39; specified twice.\r\n\r\nThis problem arise when I try to insert a new AnotherClass registry.\r\n\r\nWhat am I doing wrong? Is it not possible to accomplish it?\r\n\r\nSolved\r\n---\r\n\r\nI have found the solution thanks to @ddalton. I used this and this is working:\r\n\r\n    @javax.persistence.AssociationOverride(name=&quot;student&quot;,joinColumns=@JoinColumn(name=&quot;c02&quot;))","title":"Java Hibernate Hierachy Different JoinColumn in Child class Column &#39;C01&#39; specified twice","body":"<p>I have several Entitys in my models but some of them share a same property namely <code>Student</code>. I have created a abstract class like this.</p>\n<pre><code>@javax.persistence.MappedSuperclass\npublic abstract class StudentImpl \n{\n   private Student student;\n   @ManyToOne(fetch=FetchType.LAZY)@JoinColumn(name=&quot;c01&quot;)    \n   public Student getStudent(){return student;}\n   @Override\n   public void setStudent(final Student student){this.student=student;return;}\n}\n</code></pre>\n<p>This is working like a charm. See that the 95% of them have mapped to <code>C01</code> column in my MySQL table.</p>\n<p>I have use this abstract class extending each of my Models with share the same property.</p>\n<pre><code>public class Teammate extends StudentImpl\n</code></pre>\n<p>The problem arise in some classes the Student property is mapped to a different column name in their table</p>\n<p>Example</p>\n<pre><code>create table myTable \n(\n   c02 int(11) NOT NULL, //student entity is mapped to c02 column instead of c01\n)\n</code></pre>\n<p>As you can see they mismatch c01 and c02 and their column c01 column is mapped to a simple <code>String</code> instead of a Student.</p>\n<p>I have try</p>\n<pre><code>@javax.persistence.AttributeOverride(name=&quot;student&quot;,column=@Column(name=&quot;c02&quot;))\n</code></pre>\n<p>Wishing Hibernate could understand student property is mapped to column c02 in this Entity.</p>\n<pre><code>@javax.persistence.AttributeOverride(name=&quot;student&quot;,column=@Column(name=&quot;c02&quot;))\npublic class AnotherClass extends StudentImpl\n{\n    private String c01;\n    private String getC01(){return this.c01;} //Column c01 is mapped to a String \n}\n</code></pre>\n<p>But seems not working because it Throws</p>\n<pre><code>Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Column 'C01' specified twice.\n</code></pre>\n<p>This problem arise when I try to insert a new AnotherClass registry.</p>\n<p>What am I doing wrong? Is it not possible to accomplish it?</p>\n<h2>Solved</h2>\n<p>I have found the solution thanks to @ddalton. I used this and this is working:</p>\n<pre><code>@javax.persistence.AssociationOverride(name=&quot;student&quot;,joinColumns=@JoinColumn(name=&quot;c02&quot;))\n</code></pre>\n"},{"tags":["java","android","swift","kotlin"],"comments":[{"owner":{"account_id":18132716,"reputation":397,"user_id":13187633,"display_name":"yan sam"},"score":0,"creation_date":1638533949,"post_id":70214140,"comment_id":124120156,"body_markdown":"Maybe [kotlin-constructors](https://www.deadcoderising.com/kotlin-how-to-use-default-parameters-in-functions-and-constructors/)","body":"Maybe <a href=\"https://www.deadcoderising.com/kotlin-how-to-use-default-parameters-in-functions-and-constructors/\" rel=\"nofollow noreferrer\">kotlin-constructors</a>"}],"answers":[{"comments":[{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638536963,"post_id":70214243,"comment_id":124121315,"body_markdown":"Thank you! I was already aware of this approach, but will nonetheless mark it correct. I was more looking for a way to not have to use a get() call, since Swift don&#39;t use get {...} in their example.","body":"Thank you! I was already aware of this approach, but will nonetheless mark it correct. I was more looking for a way to not have to use a get() call, since Swift don&#39;t use get {...} in their example."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":1,"creation_date":1638537150,"post_id":70214243,"comment_id":124121393,"body_markdown":"@Linus First of all I believe this answer does a totally different thing than the Swift code you provided. Documentation you provided says that this Swift code only initializes the property with an initial value. Providing a getter (above Kotlin code) is a totally different thing.","body":"@Linus First of all I believe this answer does a totally different thing than the Swift code you provided. Documentation you provided says that this Swift code only initializes the property with an initial value. Providing a getter (above Kotlin code) is a totally different thing."},{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638537511,"post_id":70214243,"comment_id":124121536,"body_markdown":"It&#39;s not &quot;totally&quot; different as in using a return function, but it is not quite there either.","body":"It&#39;s not &quot;totally&quot; different as in using a return function, but it is not quite there either."}],"tags":[],"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1638534067,"creation_date":1638534067,"answer_id":70214243,"question_id":70214140,"body_markdown":"I think a custom getter is maybe what you are looking for?\r\n\r\n    val someProperty: SomeType\r\n        get() {\r\n            // create a default value for someProperty inside this closure\r\n            // someValue must be of the same type as SomeType\r\n            return someValue\r\n        }","title":"Property with return value in Java/Kotlin?","body":"<p>I think a custom getter is maybe what you are looking for?</p>\n<pre><code>val someProperty: SomeType\n    get() {\n        // create a default value for someProperty inside this closure\n        // someValue must be of the same type as SomeType\n        return someValue\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638537173,"post_id":70214807,"comment_id":124121405,"body_markdown":"Can I edit this?","body":"Can I edit this?"},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1638537211,"post_id":70214807,"comment_id":124121422,"body_markdown":"You mean `someProperty`? Yes.","body":"You mean <code>someProperty</code>? Yes."},{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638537435,"post_id":70214807,"comment_id":124121512,"body_markdown":"The edit would kind of be correct, but it&#39;s still not quite there as it doesn&#39;t initialise the property. I guess there isn&#39;t a direct conversion from Swift to Kotlin all the time.","body":"The edit would kind of be correct, but it&#39;s still not quite there as it doesn&#39;t initialise the property. I guess there isn&#39;t a direct conversion from Swift to Kotlin all the time."},{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638537701,"post_id":70214807,"comment_id":124121613,"body_markdown":"I should say I might as well have marked this one as the correct answer too...","body":"I should say I might as well have marked this one as the correct answer too..."},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":1,"creation_date":1638537839,"post_id":70214807,"comment_id":124121663,"body_markdown":"@Linus it does in fact initialize the property. I&#39;m not sure what exactly would be different from Swift now. Feel free to mark this one correct","body":"@Linus it does in fact initialize the property. I&#39;m not sure what exactly would be different from Swift now. Feel free to mark this one correct"},{"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"score":0,"creation_date":1638538344,"post_id":70214807,"comment_id":124121874,"body_markdown":"@IvoBeckers, ok, however it doesn&#39;t contain an empty constructor () though? As I&#39;ve understood it &quot;... = run { return@run ... } is not quite the same thing, right? Although I can find any good documentation right now...","body":"@IvoBeckers, ok, however it doesn&#39;t contain an empty constructor () though? As I&#39;ve understood it &quot;... = run { return@run ... } is not quite the same thing, right? Although I can find any good documentation right now..."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":0,"creation_date":1638538373,"post_id":70214807,"comment_id":124121887,"body_markdown":"@Linus ahh, sorry, I missed the fact that you provided the edit ;-) Assuming `someValue` is of type `SomeType` we don&#39;t really need to type the property if we don&#39;t want to. My original answer was correct. Of course we often prefer to provide the type explicitly for code clarity.","body":"@Linus ahh, sorry, I missed the fact that you provided the edit ;-) Assuming <code>someValue</code> is of type <code>SomeType</code> we don&#39;t really need to type the property if we don&#39;t want to. My original answer was correct. Of course we often prefer to provide the type explicitly for code clarity."},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":0,"creation_date":1638538390,"post_id":70214807,"comment_id":124121895,"body_markdown":"@Linus adding `return@run` is unnecessary because it automatically returns the last expression in a lambda","body":"@Linus adding <code>return@run</code> is unnecessary because it automatically returns the last expression in a lambda"},{"owner":{"account_id":1642711,"reputation":19842,"user_id":1514861,"accept_rate":86,"display_name":"Ivo"},"score":0,"creation_date":1638538516,"post_id":70214807,"comment_id":124121939,"body_markdown":"@Linus i don&#39;t understand what you mean with empty contructor here.","body":"@Linus i don&#39;t understand what you mean with empty contructor here."},{"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"score":1,"creation_date":1638538585,"post_id":70214807,"comment_id":124121957,"body_markdown":"@Linus This code runs the code inside `run { }`, it performs some kind of calculations to acquire `someValue` and then sets `someProperty` to `someValue` as its initial value. Then you can change `someProperty` to some other value. I guess this is what the provided Swift code does. Both `: SomeType` and `return@run` are not required - the code does the same thing with or without them.","body":"@Linus This code runs the code inside <code>run { }</code>, it performs some kind of calculations to acquire <code>someValue</code> and then sets <code>someProperty</code> to <code>someValue</code> as its initial value. Then you can change <code>someProperty</code> to some other value. I guess this is what the provided Swift code does. Both <code>: SomeType</code> and <code>return@run</code> are not required - the code does the same thing with or without them."}],"tags":[],"owner":{"account_id":202054,"reputation":23899,"user_id":448875,"display_name":"broot"},"comment_count":10,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1638541511,"creation_date":1638536827,"answer_id":70214807,"question_id":70214140,"body_markdown":"I&#39;m not familiar with Swift, but if I understand correctly that the closure/lambda is invoked immediately to set an initial value to the property, then this is as simple as:\r\n\r\n```kotlin\r\nvar someProperty = someValue\r\n```\r\nAnd if `someValue` is a result of a more complicated logic that can&#39;t be represented as a simple expression, then:\r\n\r\n```kotlin\r\nvar someProperty: SomeType = run {\r\n    ...\r\n    someValue\r\n}\r\n```\r\n\r\nAs a fact, the provided Swift code is almost a valid Kotlin code as well. We don&#39;t have to use `run()`, we can create a lambda and invoke it immediately, as in Swift:\r\n\r\n```kotlin\r\nvar someProperty: SomeType = {\r\n    ...\r\n    someValue\r\n}()\r\n```\r\n\r\nHowever, this is not considered &quot;the Kotlin way&quot; and IntelliJ IDE even suggest to replace it with `run()`.","title":"Property with return value in Java/Kotlin?","body":"<p>I'm not familiar with Swift, but if I understand correctly that the closure/lambda is invoked immediately to set an initial value to the property, then this is as simple as:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var someProperty = someValue\n</code></pre>\n<p>And if <code>someValue</code> is a result of a more complicated logic that can't be represented as a simple expression, then:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var someProperty: SomeType = run {\n    ...\n    someValue\n}\n</code></pre>\n<p>As a fact, the provided Swift code is almost a valid Kotlin code as well. We don't have to use <code>run()</code>, we can create a lambda and invoke it immediately, as in Swift:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>var someProperty: SomeType = {\n    ...\n    someValue\n}()\n</code></pre>\n<p>However, this is not considered &quot;the Kotlin way&quot; and IntelliJ IDE even suggest to replace it with <code>run()</code>.</p>\n"},{"comments":[{"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"score":1,"creation_date":1650120643,"post_id":71893730,"comment_id":127043837,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/71893730/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":23672027,"reputation":41,"user_id":17698659,"display_name":"Vraj Shah"},"score":0,"creation_date":1686674379,"post_id":71893730,"comment_id":134830455,"body_markdown":"@Dan Got it. Thanks.","body":"@Dan Got it. Thanks."}],"tags":[],"owner":{"account_id":23672027,"reputation":41,"user_id":17698659,"display_name":"Vraj Shah"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686674339,"creation_date":1650110688,"answer_id":71893730,"question_id":70214140,"body_markdown":"What example you are providing of swift is actually similar to custom getter in kotlin.\r\nYou can also use custom getter in kotlin for achieving the same result.\r\n```\r\nval someProperty: SomeType\r\n    get() {\r\n        //preform some operations\r\n        return sometype\r\n    }\r\n```","title":"Property with return value in Java/Kotlin?","body":"<p>What example you are providing of swift is actually similar to custom getter in kotlin.\nYou can also use custom getter in kotlin for achieving the same result.</p>\n<pre><code>val someProperty: SomeType\n    get() {\n        //preform some operations\n        return sometype\n    }\n</code></pre>\n"}],"owner":{"account_id":11757948,"reputation":453,"user_id":8605037,"display_name":"Linus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70214807,"answer_count":3,"score":0,"last_activity_date":1686674339,"creation_date":1638533628,"question_id":70214140,"body_markdown":"This is a pretty basic question, but I haven&#39;t been able to find any answer on SO yet. \r\n\r\nI&#39;m just curious, is there a corresponding way in Java or Kotlin to write a property with a return value, such as there is in Swift: \r\n\r\n```swift\r\nclass SomeClass {\r\n    let someProperty: SomeType = {\r\n        // create a default value for someProperty inside this closure\r\n        // someValue must be of the same type as SomeType\r\n        return someValue\r\n    }()\r\n}\r\n```\r\nDocumentation link: https://docs.swift.org/swift-book/LanguageGuide/Initialization.html#ID232\r\n\r\nMany thanks in advance!","title":"Property with return value in Java/Kotlin?","body":"<p>This is a pretty basic question, but I haven't been able to find any answer on SO yet.</p>\n<p>I'm just curious, is there a corresponding way in Java or Kotlin to write a property with a return value, such as there is in Swift:</p>\n<pre class=\"lang-swift prettyprint-override\"><code>class SomeClass {\n    let someProperty: SomeType = {\n        // create a default value for someProperty inside this closure\n        // someValue must be of the same type as SomeType\n        return someValue\n    }()\n}\n</code></pre>\n<p>Documentation link: <a href=\"https://docs.swift.org/swift-book/LanguageGuide/Initialization.html#ID232\" rel=\"nofollow noreferrer\">https://docs.swift.org/swift-book/LanguageGuide/Initialization.html#ID232</a></p>\n<p>Many thanks in advance!</p>\n"},{"tags":["java","eclipse","eclipse-rcp","rcp","tycho"],"comments":[{"owner":{"account_id":1334069,"reputation":4343,"user_id":1277259,"accept_rate":75,"display_name":"KevinO"},"score":0,"creation_date":1542521337,"post_id":53358263,"comment_id":93593849,"body_markdown":"The Eclipse RCP can be added to any Eclipse installation through the Add Software.","body":"The Eclipse RCP can be added to any Eclipse installation through the Add Software."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1542527567,"post_id":53358263,"comment_id":93594730,"body_markdown":"Eclipse RCP means more or less _built on Eclipse_ or _Eclipse-based_. To develop Eclipse RCP applications use the [Plug-in Development Environment (PDE)](http://www.eclipse.org/pde/) which is included by default (otherwise you have to install it) in the _Eclipse IDE for Eclipse Committers_ and _Eclipse IDE for RCP and RAP Developers_. Answers to your first three questions will be found in the help/documentation of [Eclipse](https://help.eclipse.org/2018-09/index.jsp) and of [Tycho](http://www.eclipse.org/tycho/documentation.php) (including a demo project).","body":"Eclipse RCP means more or less <i>built on Eclipse</i> or <i>Eclipse-based</i>. To develop Eclipse RCP applications use the <a href=\"http://www.eclipse.org/pde/\" rel=\"nofollow noreferrer\">Plug-in Development Environment (PDE)</a> which is included by default (otherwise you have to install it) in the <i>Eclipse IDE for Eclipse Committers</i> and <i>Eclipse IDE for RCP and RAP Developers</i>. Answers to your first three questions will be found in the help/documentation of <a href=\"https://help.eclipse.org/2018-09/index.jsp\" rel=\"nofollow noreferrer\">Eclipse</a> and of <a href=\"http://www.eclipse.org/tycho/documentation.php\" rel=\"nofollow noreferrer\">Tycho</a> (including a demo project)."},{"owner":{"account_id":3159259,"reputation":109678,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1542528483,"post_id":53358263,"comment_id":93594851,"body_markdown":"An Eclipse RCP is a standalone program composed of plug-ins and the core Eclipse code. Sorry, but this question is far too broad for SO, try reading the references in the other comments and come back with more specific questions.","body":"An Eclipse RCP is a standalone program composed of plug-ins and the core Eclipse code. Sorry, but this question is far too broad for SO, try reading the references in the other comments and come back with more specific questions."}],"answers":[{"tags":[],"owner":{"account_id":27349334,"reputation":1,"user_id":22067080,"display_name":"Milanium"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686674152,"creation_date":1686674152,"answer_id":76467014,"question_id":53358263,"body_markdown":"https://github.com/eclipse/chemclipse uses the latest version of Eclipse Tycho. It also features unit tests https://github.com/eclipse/chemclipse/tree/develop/chemclipse/tests I suggest https://www.vogella.com/tutorials/EclipseTycho/article.html as an alternative to the sparse official documentation. I use https://www.eclipse.org/downloads/packages/release/2023-03/r/eclipse-ide-rcp-and-rap-developers personally which ships everything you need, but you can also install the necessary plugins afterward from a slimmer edition.","title":"Eclipse RCP and Tycho","body":"<p><a href=\"https://github.com/eclipse/chemclipse\" rel=\"nofollow noreferrer\">https://github.com/eclipse/chemclipse</a> uses the latest version of Eclipse Tycho. It also features unit tests <a href=\"https://github.com/eclipse/chemclipse/tree/develop/chemclipse/tests\" rel=\"nofollow noreferrer\">https://github.com/eclipse/chemclipse/tree/develop/chemclipse/tests</a> I suggest <a href=\"https://www.vogella.com/tutorials/EclipseTycho/article.html\" rel=\"nofollow noreferrer\">https://www.vogella.com/tutorials/EclipseTycho/article.html</a> as an alternative to the sparse official documentation. I use <a href=\"https://www.eclipse.org/downloads/packages/release/2023-03/r/eclipse-ide-rcp-and-rap-developers\" rel=\"nofollow noreferrer\">https://www.eclipse.org/downloads/packages/release/2023-03/r/eclipse-ide-rcp-and-rap-developers</a> personally which ships everything you need, but you can also install the necessary plugins afterward from a slimmer edition.</p>\n"}],"owner":{"account_id":49789,"reputation":1549,"user_id":148397,"accept_rate":36,"display_name":"Gadi"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686674152,"creation_date":1542520153,"question_id":53358263,"body_markdown":"I am new to eclipse platform and RCP.\r\n\r\nI was assigned with a task to migrate an eclipse RCP project to Tycho and adding backend communication to pull live data.\r\n\r\nmy questions are:\r\n\r\n1. where can I find up to date documentation on RCP?\r\n\r\n2. where can I find up to date documentation on Tycho?\r\n\r\n3. sample application for both Tycho and RCP working together with unit tests and application?\r\n\r\n4. Can I install RCP on top of standard eclipse IDE or do I have to use the specific IDE for RCP?\r\n\r\n\r\nMany thanks in advance.\r\n\r\nGadi.","title":"Eclipse RCP and Tycho","body":"<p>I am new to eclipse platform and RCP.</p>\n\n<p>I was assigned with a task to migrate an eclipse RCP project to Tycho and adding backend communication to pull live data.</p>\n\n<p>my questions are:</p>\n\n<ol>\n<li><p>where can I find up to date documentation on RCP?</p></li>\n<li><p>where can I find up to date documentation on Tycho?</p></li>\n<li><p>sample application for both Tycho and RCP working together with unit tests and application?</p></li>\n<li><p>Can I install RCP on top of standard eclipse IDE or do I have to use the specific IDE for RCP?</p></li>\n</ol>\n\n<p>Many thanks in advance.</p>\n\n<p>Gadi.</p>\n"},{"tags":["java","file","file-upload","byte","inputstream"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1686675640,"post_id":76467005,"comment_id":134830727,"body_markdown":"Not quite sure why you&#39;re using 3rd party io apis - Java can do all that quite easily, but as far as your point 3. is concerned, then that is simply a multipart container for the upload. Whatever has downloaded the attached has probably got it wrong, if it was uploaded as multipart","body":"Not quite sure why you&#39;re using 3rd party io apis - Java can do all that quite easily, but as far as your point 3. is concerned, then that is simply a multipart container for the upload. Whatever has downloaded the attached has probably got it wrong, if it was uploaded as multipart"},{"owner":{"account_id":14567700,"reputation":31,"user_id":10521878,"display_name":"Veronica"},"score":0,"creation_date":1686703661,"post_id":76467005,"comment_id":134834781,"body_markdown":"@KJ thanks for replying..can you help me with how to achieve this &quot;ou need to inspect exactly what baggage is added by transportation, and remove it from all transfers by only transfer binary content without text&quot;","body":"@KJ thanks for replying..can you help me with how to achieve this &quot;ou need to inspect exactly what baggage is added by transportation, and remove it from all transfers by only transfer binary content without text&quot;"}],"owner":{"account_id":14567700,"reputation":31,"user_id":10521878,"display_name":"Veronica"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686674087,"creation_date":1686674087,"question_id":76467005,"body_markdown":"We have a tool where files can be uploaded.\r\nThe tool takes the following as input to upload a file:\r\n\r\nMethod signature:\r\n\r\n```\r\nuploadAttachmentOnXyz(&lt;irrelevant&gt; , byte[] attachmentData, ContentType contentType, String fileName) \r\n```\r\n\r\nIn our code, we are trying to upload the files to that tool using that API. Behaviour:\r\n1. PDF uploaded successfully and can be downloaded from tool.\r\n2. docx uploaded successfully and can be downloaded.\r\n3. For txt file, it gets uploaded successfully. But when I download file from tool it has additional characters:\r\n\r\n```\r\n----------------------------754900090813043831886410\r\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;upload.txt&quot;\r\nContent-Type: text/plain\r\n\r\nupload on sim test\r\n----------------------------754900090813043831886410--\r\n```\r\n4. For image, the API uploads file on tool without error. But when I go on tool to download the image, it cannot be viewed or downloaded with the following message `The image cannot be displayed because it contains errors`\r\n\r\nI suspect it is something to do with File/inputstream conversion to byte[]. NOTE: verified content type and it is right. I tried multiple approaches but still facing issue with image upload.. need help with this. Let me share the approaches:\r\n\r\n1. File as input and used  FileUtils.readFileToByteArray to convert:\r\n\r\n public boolean uploadAttachment(File file) throws Exception {\r\n \r\n            byte[] filebytes = FileUtils.readFileToByteArray(file);\r\n\r\n2. InputSteam and IOUtils.toByteArray\r\n\r\n```\r\nbyte[] filebytes = IOUtils.toByteArray(fileInputStream);\r\n```\r\n\r\nI tried 3/4 other approaches as well but with all these, behaviour is that image gets uploaded without error but when accessing it - it displays `The image cannot be displayed because it contains errors`\r\n\r\nNeed your inputs and help as I am stuck with this.\r\n\r\nThanks a ton.\r\n\r\n\r\nExpecting: Image file should be uploaded with errors and should not display `The image cannot be displayed because it contains errors`","title":"Java file upload : The image cannot be displayed because it contains errors","body":"<p>We have a tool where files can be uploaded.\nThe tool takes the following as input to upload a file:</p>\n<p>Method signature:</p>\n<pre><code>uploadAttachmentOnXyz(&lt;irrelevant&gt; , byte[] attachmentData, ContentType contentType, String fileName) \n</code></pre>\n<p>In our code, we are trying to upload the files to that tool using that API. Behaviour:</p>\n<ol>\n<li>PDF uploaded successfully and can be downloaded from tool.</li>\n<li>docx uploaded successfully and can be downloaded.</li>\n<li>For txt file, it gets uploaded successfully. But when I download file from tool it has additional characters:</li>\n</ol>\n<pre><code>----------------------------754900090813043831886410\nContent-Disposition: form-data; name=&quot;file&quot;; filename=&quot;upload.txt&quot;\nContent-Type: text/plain\n\nupload on sim test\n----------------------------754900090813043831886410--\n</code></pre>\n<ol start=\"4\">\n<li>For image, the API uploads file on tool without error. But when I go on tool to download the image, it cannot be viewed or downloaded with the following message <code>The image cannot be displayed because it contains errors</code></li>\n</ol>\n<p>I suspect it is something to do with File/inputstream conversion to byte[]. NOTE: verified content type and it is right. I tried multiple approaches but still facing issue with image upload.. need help with this. Let me share the approaches:</p>\n<ol>\n<li>File as input and used  FileUtils.readFileToByteArray to convert:</li>\n</ol>\n<p>public boolean uploadAttachment(File file) throws Exception {</p>\n<pre><code>        byte[] filebytes = FileUtils.readFileToByteArray(file);\n</code></pre>\n<ol start=\"2\">\n<li>InputSteam and IOUtils.toByteArray</li>\n</ol>\n<pre><code>byte[] filebytes = IOUtils.toByteArray(fileInputStream);\n</code></pre>\n<p>I tried 3/4 other approaches as well but with all these, behaviour is that image gets uploaded without error but when accessing it - it displays <code>The image cannot be displayed because it contains errors</code></p>\n<p>Need your inputs and help as I am stuck with this.</p>\n<p>Thanks a ton.</p>\n<p>Expecting: Image file should be uploaded with errors and should not display <code>The image cannot be displayed because it contains errors</code></p>\n"},{"tags":["java","graphql","graphql-java"],"owner":{"account_id":28813971,"reputation":1,"user_id":22068044,"display_name":"m w"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686673817,"creation_date":1686673817,"question_id":76466973,"body_markdown":"I am new to graphQL and opencti. I am trying to connect using java to openctigraphql by the link: http://@ip:8080/graphql to retrieve data. Is it the correct api link for opencti?\r\n\r\nI am getting the page styling as a result, not the query data from the graphQL server.\r\n\r\nPlease can anyone tell me what&#39;s wrong with my code and how to fix it?\r\n\r\nThank you!\r\n\r\nI am using the following code.\r\n\r\n```\r\npublic class OpenCti {\r\n\r\n\tstatic String requestQuery = &quot;query{stixCyberObservables{edges{node{entity_typeobservable_value}}}}&quot;;\r\n\t\r\n\tpublic static final String KEY = &quot;Bearer ###############&quot;;\r\n\tpublic static final String URL = &quot;http://#######:8080/graphql&quot;;\r\n\r\n\tpublic static void main(String[] args) throws Exception {\r\n\r\n\t\tURL url = new URL(URL + &quot;?query=&quot; + requestQuery);\r\n\t\tHttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\r\n\t\tconn.setRequestProperty(&quot;Authorization&quot;, KEY);\r\n\t\tconn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\r\n\t\tconn.setRequestMethod(&quot;GET&quot;);\r\n\r\n\t\tBufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\r\n\t\tString output;\r\n\r\n\t\tStringBuffer response = new StringBuffer();\r\n\t\twhile ((output = in.readLine()) != null) {\r\n\t\t\tresponse.append(output + &#39;\\n&#39;);\r\n\t\t}\r\n\r\n\t\tin.close();\r\n\t\t// printing result from response\r\n\t\tSystem.out.println(&quot;Response:-&quot; + response.toString());\r\n\r\n\t}\r\n```\r\n","title":"I am trying to connect using java to openctigraphql by the link: http://#########:8080/graphql to retrieve data","body":"<p>I am new to graphQL and opencti. I am trying to connect using java to openctigraphql by the link: http://@ip:8080/graphql to retrieve data. Is it the correct api link for opencti?</p>\n<p>I am getting the page styling as a result, not the query data from the graphQL server.</p>\n<p>Please can anyone tell me what's wrong with my code and how to fix it?</p>\n<p>Thank you!</p>\n<p>I am using the following code.</p>\n<pre><code>public class OpenCti {\n\n    static String requestQuery = &quot;query{stixCyberObservables{edges{node{entity_typeobservable_value}}}}&quot;;\n    \n    public static final String KEY = &quot;Bearer ###############&quot;;\n    public static final String URL = &quot;http://#######:8080/graphql&quot;;\n\n    public static void main(String[] args) throws Exception {\n\n        URL url = new URL(URL + &quot;?query=&quot; + requestQuery);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n\n        conn.setRequestProperty(&quot;Authorization&quot;, KEY);\n        conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/json&quot;);\n        conn.setRequestMethod(&quot;GET&quot;);\n\n        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));\n        String output;\n\n        StringBuffer response = new StringBuffer();\n        while ((output = in.readLine()) != null) {\n            response.append(output + '\\n');\n        }\n\n        in.close();\n        // printing result from response\n        System.out.println(&quot;Response:-&quot; + response.toString());\n\n    }\n</code></pre>\n"},{"tags":["java","json","jackson"],"answers":[{"comments":[{"owner":{"account_id":2352763,"reputation":11,"user_id":2061237,"display_name":"stavang"},"score":1,"creation_date":1680523031,"post_id":75918068,"comment_id":133907447,"body_markdown":"Say I have also a class Company with ListOfNumbers phoneNumbers. How can I both deserialize phoneNumbers for Company and favoriteNumbers for Person? In your suggestion favoriteNumbers is now fixed to ListOfNumbers class, but I want it dynamic and depending on the field referencing ListOfNumbers.","body":"Say I have also a class Company with ListOfNumbers phoneNumbers. How can I both deserialize phoneNumbers for Company and favoriteNumbers for Person? In your suggestion favoriteNumbers is now fixed to ListOfNumbers class, but I want it dynamic and depending on the field referencing ListOfNumbers."}],"tags":[],"owner":{"account_id":27868102,"reputation":34,"user_id":21279235,"display_name":"LQF-developer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680515198,"creation_date":1680515198,"answer_id":75918068,"question_id":75917713,"body_markdown":" `@JsonUnwrapped` is used to unwrap values of objects during serialization.So use this annotation will make attribute `favoriteNumbers` -&gt; `List`. Just like your post outcome. \r\nSo the simple way is :\r\n\r\n    class ListOfNumbers {\r\n    //private List&lt;String&gt; list; -&gt;//private List&lt;String&gt; favoriteNumbers;\r\n\r\n    public List&lt;String&gt; getList() {\r\n        return list;\r\n    }\r\n\r\n    public void setList(List&lt;String&gt; list) {\r\n        this.list = list;\r\n    }","title":"Rename the field of a JsonUnwrapped field","body":"<p><code>@JsonUnwrapped</code> is used to unwrap values of objects during serialization.So use this annotation will make attribute <code>favoriteNumbers</code> -&gt; <code>List</code>. Just like your post outcome.\nSo the simple way is :</p>\n<pre><code>class ListOfNumbers {\n//private List&lt;String&gt; list; -&gt;//private List&lt;String&gt; favoriteNumbers;\n\npublic List&lt;String&gt; getList() {\n    return list;\n}\n\npublic void setList(List&lt;String&gt; list) {\n    this.list = list;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4012480,"reputation":557,"user_id":3305489,"accept_rate":100,"display_name":"Daniel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686673802,"creation_date":1686673306,"answer_id":76466909,"question_id":75917713,"body_markdown":"You could use @JsonProperty directly with an extra method in the same class. Does is not solve ur problem?\r\n\r\ntl;dr\r\n\r\n    @JsonIgnore\r\n    private ListOfNumbers companyNumbers;\r\n    \r\n    @JsonProperty(&quot;phoneNumbers&quot;)\r\n    public List&lt;String&gt; getPhoneNumbers() {\r\n      return companyNumbers.getList();\r\n    }\r\n    \r\n    @JsonProperty(&quot;phoneNumbers&quot;)\r\n    public void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\r\n      this.companyNumbers = new ListOfNumbers(phoneNumbers);\r\n    }\r\n\r\nFull example\r\n\r\n    package org.json.example;\r\n    \r\n    import com.fasterxml.jackson.annotation.JsonIgnore;\r\n    import com.fasterxml.jackson.annotation.JsonProperty;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.ObjectMapper;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class App {\r\n    \r\n      public static class Person {\r\n        private String name;\r\n    \r\n        @JsonIgnore\r\n        private ListOfNumbers favoriteNumbers;\r\n    \r\n        public Person() {\r\n          favoriteNumbers = new ListOfNumbers(new ArrayList&lt;&gt;());\r\n        }\r\n    \r\n        @JsonProperty(&quot;favoriteNumbers&quot;)\r\n        public List&lt;String&gt; getPhoneNumbers() {\r\n          return favoriteNumbers.getList();\r\n        }\r\n    \r\n        @JsonProperty(&quot;favoriteNumbers&quot;)\r\n        public void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\r\n          this.favoriteNumbers = new ListOfNumbers(phoneNumbers);\r\n        }\r\n    \r\n        public String getName() {\r\n          return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n          this.name = name;\r\n        }\r\n    \r\n        public ListOfNumbers getFavoriteNumbers() {\r\n          return favoriteNumbers;\r\n        }\r\n    \r\n        public void setFavoriteNumbers(ListOfNumbers favoriteNumbers) {\r\n          this.favoriteNumbers = favoriteNumbers;\r\n        }\r\n      }\r\n    \r\n      public static class Company {\r\n        private String name;\r\n    \r\n        @JsonIgnore\r\n        private ListOfNumbers companyNumbers;\r\n    \r\n        public Company() {\r\n          companyNumbers = new ListOfNumbers(new ArrayList&lt;&gt;());\r\n        }\r\n    \r\n        @JsonProperty(&quot;phoneNumbers&quot;)\r\n        public List&lt;String&gt; getPhoneNumbers() {\r\n          return companyNumbers.getList();\r\n        }\r\n    \r\n        @JsonProperty(&quot;phoneNumbers&quot;)\r\n        public void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\r\n          this.companyNumbers = new ListOfNumbers(phoneNumbers);\r\n        }\r\n    \r\n        public String getName() {\r\n          return name;\r\n        }\r\n    \r\n        public void setName(String name) {\r\n          this.name = name;\r\n        }\r\n    \r\n        public ListOfNumbers getCompanyNumbers() {\r\n          return companyNumbers;\r\n        }\r\n    \r\n        public void setCompanyNumbers(ListOfNumbers companyNumbers) {\r\n          this.companyNumbers = companyNumbers;\r\n        }\r\n      }\r\n    \r\n    \r\n      public static class ListOfNumbers {\r\n        private List&lt;String&gt; list;\r\n    \r\n        ListOfNumbers(List&lt;String&gt; list) {\r\n          this.list = list;\r\n        }\r\n    \r\n        public List&lt;String&gt; getList() {\r\n          return list;\r\n        }\r\n    \r\n        public void setList(List&lt;String&gt; list) {\r\n          this.list = list;\r\n        }\r\n      }\r\n    \r\n      public static void main(String[] args) throws JsonProcessingException {\r\n        doPersonSample();\r\n        doCompanySample();\r\n      }\r\n    \r\n      private static void doCompanySample() throws JsonProcessingException {\r\n        var mapper = new ObjectMapper();\r\n    \r\n        var person = new Company();\r\n        person.name = &quot;stavang Ltd.&quot;;\r\n        person.getCompanyNumbers().getList().add(&quot;26&quot;);\r\n        person.getCompanyNumbers().getList().add(&quot;4&quot;);\r\n    \r\n        var toJson = mapper.writeValueAsString(person);\r\n        System.out.println(toJson);\r\n    \r\n        var fromJson = &quot;{\\n&quot; +\r\n            &quot;  \\&quot;name\\&quot; : \\&quot;stavang Ltd.\\&quot;,\\n&quot; +\r\n            &quot;  \\&quot;phoneNumbers\\&quot; : [\\&quot;26\\&quot;, \\&quot;4\\&quot;]\\n&quot; +\r\n            &quot;}&quot;;\r\n    \r\n        var deserializedCompany = mapper.readValue(fromJson, Company.class);\r\n    \r\n        System.out.println(deserializedCompany.getCompanyNumbers().getList());\r\n      }\r\n    \r\n      private static void doPersonSample() throws JsonProcessingException {\r\n        var mapper = new ObjectMapper();\r\n    \r\n        var person = new Person();\r\n        person.name = &quot;Alex&quot;;\r\n        person.getFavoriteNumbers().getList().add(&quot;42&quot;);\r\n        person.getFavoriteNumbers().getList().add(&quot;9&quot;);\r\n    \r\n        var toJson = mapper.writeValueAsString(person);\r\n        System.out.println(toJson);\r\n    \r\n        var fromJson = &quot;{\\n&quot; +\r\n            &quot;  \\&quot;name\\&quot; : \\&quot;Alex\\&quot;,\\n&quot; +\r\n            &quot;  \\&quot;favoriteNumbers\\&quot; : [\\&quot;42\\&quot;, \\&quot;9\\&quot;]\\n&quot; +\r\n            &quot;}&quot;;\r\n    \r\n        var deserializedPerson = mapper.readValue(fromJson, Person.class);\r\n    \r\n        System.out.println(deserializedPerson.favoriteNumbers.getList());\r\n      }\r\n    }\r\n\r\n\r\n","title":"Rename the field of a JsonUnwrapped field","body":"<p>You could use @JsonProperty directly with an extra method in the same class. Does is not solve ur problem?</p>\n<p>tl;dr</p>\n<pre><code>@JsonIgnore\nprivate ListOfNumbers companyNumbers;\n\n@JsonProperty(&quot;phoneNumbers&quot;)\npublic List&lt;String&gt; getPhoneNumbers() {\n  return companyNumbers.getList();\n}\n\n@JsonProperty(&quot;phoneNumbers&quot;)\npublic void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\n  this.companyNumbers = new ListOfNumbers(phoneNumbers);\n}\n</code></pre>\n<p>Full example</p>\n<pre><code>package org.json.example;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class App {\n\n  public static class Person {\n    private String name;\n\n    @JsonIgnore\n    private ListOfNumbers favoriteNumbers;\n\n    public Person() {\n      favoriteNumbers = new ListOfNumbers(new ArrayList&lt;&gt;());\n    }\n\n    @JsonProperty(&quot;favoriteNumbers&quot;)\n    public List&lt;String&gt; getPhoneNumbers() {\n      return favoriteNumbers.getList();\n    }\n\n    @JsonProperty(&quot;favoriteNumbers&quot;)\n    public void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\n      this.favoriteNumbers = new ListOfNumbers(phoneNumbers);\n    }\n\n    public String getName() {\n      return name;\n    }\n\n    public void setName(String name) {\n      this.name = name;\n    }\n\n    public ListOfNumbers getFavoriteNumbers() {\n      return favoriteNumbers;\n    }\n\n    public void setFavoriteNumbers(ListOfNumbers favoriteNumbers) {\n      this.favoriteNumbers = favoriteNumbers;\n    }\n  }\n\n  public static class Company {\n    private String name;\n\n    @JsonIgnore\n    private ListOfNumbers companyNumbers;\n\n    public Company() {\n      companyNumbers = new ListOfNumbers(new ArrayList&lt;&gt;());\n    }\n\n    @JsonProperty(&quot;phoneNumbers&quot;)\n    public List&lt;String&gt; getPhoneNumbers() {\n      return companyNumbers.getList();\n    }\n\n    @JsonProperty(&quot;phoneNumbers&quot;)\n    public void setPhoneNumbers(List&lt;String&gt; phoneNumbers) {\n      this.companyNumbers = new ListOfNumbers(phoneNumbers);\n    }\n\n    public String getName() {\n      return name;\n    }\n\n    public void setName(String name) {\n      this.name = name;\n    }\n\n    public ListOfNumbers getCompanyNumbers() {\n      return companyNumbers;\n    }\n\n    public void setCompanyNumbers(ListOfNumbers companyNumbers) {\n      this.companyNumbers = companyNumbers;\n    }\n  }\n\n\n  public static class ListOfNumbers {\n    private List&lt;String&gt; list;\n\n    ListOfNumbers(List&lt;String&gt; list) {\n      this.list = list;\n    }\n\n    public List&lt;String&gt; getList() {\n      return list;\n    }\n\n    public void setList(List&lt;String&gt; list) {\n      this.list = list;\n    }\n  }\n\n  public static void main(String[] args) throws JsonProcessingException {\n    doPersonSample();\n    doCompanySample();\n  }\n\n  private static void doCompanySample() throws JsonProcessingException {\n    var mapper = new ObjectMapper();\n\n    var person = new Company();\n    person.name = &quot;stavang Ltd.&quot;;\n    person.getCompanyNumbers().getList().add(&quot;26&quot;);\n    person.getCompanyNumbers().getList().add(&quot;4&quot;);\n\n    var toJson = mapper.writeValueAsString(person);\n    System.out.println(toJson);\n\n    var fromJson = &quot;{\\n&quot; +\n        &quot;  \\&quot;name\\&quot; : \\&quot;stavang Ltd.\\&quot;,\\n&quot; +\n        &quot;  \\&quot;phoneNumbers\\&quot; : [\\&quot;26\\&quot;, \\&quot;4\\&quot;]\\n&quot; +\n        &quot;}&quot;;\n\n    var deserializedCompany = mapper.readValue(fromJson, Company.class);\n\n    System.out.println(deserializedCompany.getCompanyNumbers().getList());\n  }\n\n  private static void doPersonSample() throws JsonProcessingException {\n    var mapper = new ObjectMapper();\n\n    var person = new Person();\n    person.name = &quot;Alex&quot;;\n    person.getFavoriteNumbers().getList().add(&quot;42&quot;);\n    person.getFavoriteNumbers().getList().add(&quot;9&quot;);\n\n    var toJson = mapper.writeValueAsString(person);\n    System.out.println(toJson);\n\n    var fromJson = &quot;{\\n&quot; +\n        &quot;  \\&quot;name\\&quot; : \\&quot;Alex\\&quot;,\\n&quot; +\n        &quot;  \\&quot;favoriteNumbers\\&quot; : [\\&quot;42\\&quot;, \\&quot;9\\&quot;]\\n&quot; +\n        &quot;}&quot;;\n\n    var deserializedPerson = mapper.readValue(fromJson, Person.class);\n\n    System.out.println(deserializedPerson.favoriteNumbers.getList());\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":2352763,"reputation":11,"user_id":2061237,"display_name":"stavang"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":114,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1686673802,"creation_date":1680512544,"question_id":75917713,"body_markdown":"I want to use Jackson to deserialize the following json structure\r\n\r\n```\r\n{\r\n  &quot;name&quot; : &quot;Alex&quot;,\r\n  &quot;favoriteNumbers&quot; : [&quot;42&quot;, &quot;9&quot;]\r\n}\r\n```\r\ninto the following class structure\r\n\r\n```\r\npublic class Person {\r\n  private String name;\r\n  private ListOfNumbers favoriteNumbers;\r\n\r\n\tpublic String getName() {\r\n\t\treturn name;\r\n\t}\r\n\r\n\tpublic void setName(String name) {\r\n\t\tthis.name = name;\r\n\t}\r\n\r\n\tpublic ListOfNumbers getFavoriteNumbers() {\r\n\t\treturn favoriteNumbers;\r\n\t}\r\n\r\n\tpublic void setFavoriteNumbers(ListOfNumbers favoriteNumbers) {\r\n\t\tthis.favoriteNumbers = favoriteNumbers;\r\n\t}\r\n}\r\n\r\nclass ListOfNumbers {\r\n\tprivate List&lt;String&gt; list;\r\n\r\n\tpublic List&lt;String&gt; getList() {\r\n\t\treturn list;\r\n\t}\r\n\r\n\tpublic void setList(List&lt;String&gt; list) {\r\n\t\tthis.list = list;\r\n\t}\r\n}\r\n```\r\nIf I use @JsonUnwrapped on Person.favoriteNumbers, I can only deserialize the following:\r\n\r\n```\r\n{\r\n  &quot;name&quot; : &quot;Alex&quot;,\r\n  &quot;list&quot; : [&quot;42&quot;, &quot;9&quot;]\r\n}\r\n```\r\nIs there a simple way to accomplish this? I do not want add @JsonProperty to ListOfNumbers.list, because I need to use a different name depending on the field referencing ListOfNumbers. E.g. a class Company with ListOfNumbers phoneNumbers should be able to deserialize the following:\r\n\r\n```\r\n{\r\n  &quot;companyName&quot; : &quot;MyCompany&quot;,\r\n  &quot;phoneNumbers&quot; : [&quot;42343243&quot;, &quot;234235239&quot;]\r\n}\r\n```","title":"Rename the field of a JsonUnwrapped field","body":"<p>I want to use Jackson to deserialize the following json structure</p>\n<pre><code>{\n  &quot;name&quot; : &quot;Alex&quot;,\n  &quot;favoriteNumbers&quot; : [&quot;42&quot;, &quot;9&quot;]\n}\n</code></pre>\n<p>into the following class structure</p>\n<pre><code>public class Person {\n  private String name;\n  private ListOfNumbers favoriteNumbers;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public ListOfNumbers getFavoriteNumbers() {\n        return favoriteNumbers;\n    }\n\n    public void setFavoriteNumbers(ListOfNumbers favoriteNumbers) {\n        this.favoriteNumbers = favoriteNumbers;\n    }\n}\n\nclass ListOfNumbers {\n    private List&lt;String&gt; list;\n\n    public List&lt;String&gt; getList() {\n        return list;\n    }\n\n    public void setList(List&lt;String&gt; list) {\n        this.list = list;\n    }\n}\n</code></pre>\n<p>If I use @JsonUnwrapped on Person.favoriteNumbers, I can only deserialize the following:</p>\n<pre><code>{\n  &quot;name&quot; : &quot;Alex&quot;,\n  &quot;list&quot; : [&quot;42&quot;, &quot;9&quot;]\n}\n</code></pre>\n<p>Is there a simple way to accomplish this? I do not want add @JsonProperty to ListOfNumbers.list, because I need to use a different name depending on the field referencing ListOfNumbers. E.g. a class Company with ListOfNumbers phoneNumbers should be able to deserialize the following:</p>\n<pre><code>{\n  &quot;companyName&quot; : &quot;MyCompany&quot;,\n  &quot;phoneNumbers&quot; : [&quot;42343243&quot;, &quot;234235239&quot;]\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","thymeleaf"],"comments":[{"owner":{"account_id":13033096,"reputation":775,"user_id":9418902,"display_name":"Csisanyi"},"score":0,"creation_date":1686668082,"post_id":76465992,"comment_id":134828967,"body_markdown":"Has the sale.payment.returnCode ever been set?","body":"Has the sale.payment.returnCode ever been set?"},{"owner":{"account_id":28497109,"reputation":13,"user_id":21808843,"display_name":"Rafael Sampaio Moura"},"score":0,"creation_date":1686682789,"post_id":76465992,"comment_id":134832160,"body_markdown":"Yes, you see the line &quot;sale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);&quot;? \n\nIt returns the JSON object described above as a Java POJO, that&#39;s where the ReturnCode is found.","body":"Yes, you see the line &quot;sale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);&quot;?   It returns the JSON object described above as a Java POJO, that&#39;s where the ReturnCode is found."}],"answers":[{"comments":[{"owner":{"account_id":28497109,"reputation":13,"user_id":21808843,"display_name":"Rafael Sampaio Moura"},"score":0,"creation_date":1686682866,"post_id":76466927,"comment_id":134832176,"body_markdown":"I shows a different error: EL1007E: Property or field &#39;returnCode&#39; cannot be found on null\n\nThe problem, I think, is that in that code above there&#39;s a new object and payment being setup but both of the lack the information added in the PostController.","body":"I shows a different error: EL1007E: Property or field &#39;returnCode&#39; cannot be found on null  The problem, I think, is that in that code above there&#39;s a new object and payment being setup but both of the lack the information added in the PostController."},{"owner":{"account_id":7774964,"reputation":91,"user_id":5883358,"display_name":"Andreea Frincu"},"score":0,"creation_date":1686683297,"post_id":76466927,"comment_id":134832243,"body_markdown":"Did you tried the way I added it in the controller TestFrontend? I ran this with java 17, spring-boot 3.0.0, thymeleaf-spring6 (3.1.0.RELEASE). If you get that error I would say that the payment is not set to the sale.","body":"Did you tried the way I added it in the controller TestFrontend? I ran this with java 17, spring-boot 3.0.0, thymeleaf-spring6 (3.1.0.RELEASE). If you get that error I would say that the payment is not set to the sale."}],"tags":[],"owner":{"account_id":7774964,"reputation":91,"user_id":5883358,"display_name":"Andreea Frincu"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1686673463,"creation_date":1686673463,"answer_id":76466927,"question_id":76465992,"body_markdown":"I changed a little the your code controller because according to the documentation from https://www.thymeleaf.org/doc/articles/springmvcaccessdata.html it is not quite correct the @ModelAttribute usage.\r\nThe controller is like:\r\n\r\n    @Controller\r\n    public class TestFrontend {\r\n    \r\n      @GetMapping(value = &quot;/**&quot;)\r\n      public String result( final Model model) {\r\n        Sale sale = new Sale(&quot;ID do pagamento&quot;);\r\n        Payment payment = new Payment(&quot;300&quot;);\r\n        sale.setPayment(payment);\r\n        model.addAttribute(&quot;sale&quot;,sale);\r\n        return &quot;index&quot;;\r\n      }\r\n    }\r\nAnd also the html I changed as below:\r\n\r\n    &lt;!DOCTYPE HTML&gt;\r\n    \r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n    \r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\r\n        &lt;title&gt;Pessoa - Cadastro&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    \r\n    &lt;body&gt;\r\n    &lt;h1&gt;Dados enviados pelo usu&#225;rio:&lt;/h1&gt;\r\n    \r\n    &lt;p&gt;C&#243;digo: &lt;b th:text=&quot;${sale.payment.returnCode}&quot;/&gt;&lt;/p&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\nDoing this changes I get printed the returnCode.\r\n\r\nMore about you can find https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html#model-attributes \r\n\r\n","title":"How to display the contents of an Java Object on a Thymeleaf page","body":"<p>I changed a little the your code controller because according to the documentation from <a href=\"https://www.thymeleaf.org/doc/articles/springmvcaccessdata.html\" rel=\"nofollow noreferrer\">https://www.thymeleaf.org/doc/articles/springmvcaccessdata.html</a> it is not quite correct the @ModelAttribute usage.\nThe controller is like:</p>\n<pre><code>@Controller\npublic class TestFrontend {\n\n  @GetMapping(value = &quot;/**&quot;)\n  public String result( final Model model) {\n    Sale sale = new Sale(&quot;ID do pagamento&quot;);\n    Payment payment = new Payment(&quot;300&quot;);\n    sale.setPayment(payment);\n    model.addAttribute(&quot;sale&quot;,sale);\n    return &quot;index&quot;;\n  }\n}\n</code></pre>\n<p>And also the html I changed as below:</p>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\n    &lt;title&gt;Pessoa - Cadastro&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n&lt;h1&gt;Dados enviados pelo usuário:&lt;/h1&gt;\n\n&lt;p&gt;Código: &lt;b th:text=&quot;${sale.payment.returnCode}&quot;/&gt;&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Doing this changes I get printed the returnCode.</p>\n<p>More about you can find <a href=\"https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html#model-attributes\" rel=\"nofollow noreferrer\">https://www.thymeleaf.org/doc/tutorials/3.0/thymeleafspring.html#model-attributes</a></p>\n"}],"owner":{"account_id":28497109,"reputation":13,"user_id":21808843,"display_name":"Rafael Sampaio Moura"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1686673463,"creation_date":1686666549,"question_id":76465992,"body_markdown":"I&#39;m creating a payment page that integrates the Cielo E-commerce SDK, the controller looks like this:\r\n\r\n\r\n```\r\npublic String result(@ModelAttribute CreditCard creditCard, @ModelAttribute Sale sale) {\r\n\r\n\t\t// Crie uma inst&#226;ncia de Sale informando o ID do pagamento\r\n\t\tsale = new Sale(&quot;ID do pagamento&quot;);\r\n\r\n\t\t// Crie uma inst&#226;ncia de Customer informando o nome do cliente\r\n\t\tCustomer customer = sale.customer(creditCard.getHolder());\r\n\r\n\t\t// Crie uma inst&#226;ncia de Payment informando o valor do pagamento\r\n\t\tPayment payment = new Payment(20000).setProvider(Provider.BancoDoBrasil).setType(Type.CreditCard);\r\n\t\t\r\n\r\n\t\tif (creditCard.isSaveCard()) {\r\n\t\t\t\r\n\t\t\tString correctDate = Formatter.formatExpirationDate(creditCard.getExpirationDate());\r\n\t\t\t\r\n\t\t\tcreditCard = new CreditCard()\r\n\t\t\t\t\t\t.setExpirationDate(correctDate)\r\n\t\t\t\t\t\t.setBrand(creditCard.getBrand())\r\n\t\t\t\t\t\t.setCardNumber(Formatter.formatCardNumber(creditCard.getCardNumber()))\r\n\t\t\t\t\t\t.setHolder(creditCard.getHolder())\r\n\t\t\t\t\t\t.setSecurityCode(creditCard.getSecurityCode()).setSaveCard(true);\r\n\t\t\t\r\n\r\n\t\t\tpayment.setCreditCard(creditCard);\r\n\r\n\t\t\tsale.setPayment(payment);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tsale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);\r\n\r\n\t\t\t\tCardTokenDatabase cardToken = new CardTokenDatabase();\r\n\t\t\t\tcardToken.setClientName(creditCard.getHolder());\r\n\t\t\t\tcardToken.setCardToken(sale.getPayment().getCreditCard().getCardToken());\r\n\t\t\t\tcardToken.setCardBrand(creditCard.getBrand());\r\n\t\t\t\tcardToken.setSecurityCode(creditCard.getSecurityCode());\r\n\t\t\t\t\r\n\t\t\t\tSystem.out.println(sale.getPayment().getReturnCode());\r\n\t\t\t\t\r\n\t\t\t\tpayment = sale.getPayment();\r\n\r\n\t\t\t\tthis.cardTokenService.save(cardToken);\r\n\r\n\t\t\t\treturn resultPage(sale);\r\n\t\t\t} catch (CieloRequestException e) {\r\n\t\t\t\tCieloError error = e.getError();\r\n\t\t\t} catch (IOException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\ttry {\r\n\t\t\t// Configure o SDK com seu merchant e o ambiente apropriado para criar a venda\r\n\t\t\tsale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);\r\n\r\n\t\t\tString paymentId = sale.getPayment().getPaymentId();\r\n\t\t} catch (CieloRequestException e) {\r\n\t\t\t// Em caso de erros de integra&#231;&#227;o, podemos tratar o erro aqui.\r\n\t\t\t// os c&#243;digos de erro est&#227;o todos dispon&#237;veis no manual de integra&#231;&#227;o.\r\n\t\t\tCieloError error = e.getError();\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t\tpayment.setCreditCard(creditCard);\r\n\r\n\t\tsale.setPayment(payment);\r\n\r\n\t\treturn &quot;result&quot;;\r\n\r\n\t}\r\n```\r\n\r\nThe returning response follows the format below:\r\n```\r\n{\r\n    &quot;MerchantOrderId&quot;: &quot;ID do pagamento&quot;,\r\n    &quot;AcquirerOrderId&quot;: &quot;202306121605391B664B&quot;,\r\n    &quot;Customer&quot;: {\r\n        &quot;Name&quot;: &quot;Dr. Gregory Heathcote&quot;,\r\n        &quot;Address&quot;: {}\r\n    },\r\n    &quot;Payment&quot;: {\r\n        &quot;ServiceTaxAmount&quot;: 0,\r\n        &quot;Installments&quot;: 1,\r\n        &quot;Interest&quot;: &quot;ByMerchant&quot;,\r\n        &quot;Capture&quot;: false,\r\n        &quot;Authenticate&quot;: false,\r\n        &quot;Recurrent&quot;: false,\r\n        &quot;CreditCard&quot;: {\r\n            &quot;CardNumber&quot;: &quot;453875******3829&quot;,\r\n            &quot;Holder&quot;: &quot;Dr. Gregory Heathcote&quot;,\r\n            &quot;ExpirationDate&quot;: &quot;09/2024&quot;,\r\n            &quot;Brand&quot;: &quot;Visa&quot;\r\n        },\r\n        &quot;Tid&quot;: &quot;0612040540131&quot;,\r\n        &quot;PaymentId&quot;: &quot;48835b7d-e3af-45a2-9d85-2f7365415f5e&quot;,\r\n        &quot;Type&quot;: &quot;CreditCard&quot;,\r\n        &quot;Amount&quot;: 20000,\r\n        &quot;ReceivedDate&quot;: &quot;2023-06-12 16:05:39&quot;,\r\n        &quot;Currency&quot;: &quot;BRL&quot;,\r\n        &quot;Country&quot;: &quot;BRA&quot;,\r\n        &quot;Provider&quot;: &quot;Simulado&quot;,\r\n        &quot;ReturnCode&quot;: &quot;99&quot;,\r\n        &quot;ReturnMessage&quot;: &quot;Timeout&quot;,\r\n        &quot;Status&quot;: 0,\r\n        &quot;Links&quot;: [\r\n            {\r\n                &quot;Method&quot;: &quot;GET&quot;,\r\n                &quot;Rel&quot;: &quot;self&quot;,\r\n                &quot;Href&quot;: &quot;https://apiquerysandbox.cieloecommerce.cielo.com.br/1/sales/48835b7d-e3af-45a2-9d85-2f7365415f5e&quot;\r\n            }\r\n        ]\r\n    }\r\n}\r\n```\r\n\r\nAnd the controller returns the following HTML file:\r\n```\r\n&lt;!DOCTYPE HTML&gt;\r\n\r\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n\r\n    &lt;head&gt;\r\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\r\n        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\r\n        &lt;title&gt;Pessoa - Cadastro&lt;/title&gt;\r\n    &lt;/head&gt;\r\n\r\n    &lt;body&gt;\r\n        &lt;h1&gt;Dados enviados pelo usu&#225;rio:&lt;/h1&gt;\r\n\r\n        &lt;p&gt;C&#243;digo: &lt;b th:text=&quot;${sale.getPayment().getReturnCode()}&quot;/&gt;&lt;/p&gt;\r\n    &lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n\r\nSo what I want is to get the returning Java POJO &quot;sale&quot; and display the content of the &quot;ReturnCode&quot; onscreen.\r\n\r\nHowever the object that is sent to the View is from the parameter &quot;sale&quot;, which has has it all as null, so it throws the following error:\r\n\r\n`EL1011E: Method call: Attempted to call method getReturnCode() on null context object`\r\n\r\nSo how am I supposed to proceed from here?","title":"How to display the contents of an Java Object on a Thymeleaf page","body":"<p>I'm creating a payment page that integrates the Cielo E-commerce SDK, the controller looks like this:</p>\n<pre><code>public String result(@ModelAttribute CreditCard creditCard, @ModelAttribute Sale sale) {\n\n        // Crie uma instância de Sale informando o ID do pagamento\n        sale = new Sale(&quot;ID do pagamento&quot;);\n\n        // Crie uma instância de Customer informando o nome do cliente\n        Customer customer = sale.customer(creditCard.getHolder());\n\n        // Crie uma instância de Payment informando o valor do pagamento\n        Payment payment = new Payment(20000).setProvider(Provider.BancoDoBrasil).setType(Type.CreditCard);\n        \n\n        if (creditCard.isSaveCard()) {\n            \n            String correctDate = Formatter.formatExpirationDate(creditCard.getExpirationDate());\n            \n            creditCard = new CreditCard()\n                        .setExpirationDate(correctDate)\n                        .setBrand(creditCard.getBrand())\n                        .setCardNumber(Formatter.formatCardNumber(creditCard.getCardNumber()))\n                        .setHolder(creditCard.getHolder())\n                        .setSecurityCode(creditCard.getSecurityCode()).setSaveCard(true);\n            \n\n            payment.setCreditCard(creditCard);\n\n            sale.setPayment(payment);\n\n            try {\n                sale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);\n\n                CardTokenDatabase cardToken = new CardTokenDatabase();\n                cardToken.setClientName(creditCard.getHolder());\n                cardToken.setCardToken(sale.getPayment().getCreditCard().getCardToken());\n                cardToken.setCardBrand(creditCard.getBrand());\n                cardToken.setSecurityCode(creditCard.getSecurityCode());\n                \n                System.out.println(sale.getPayment().getReturnCode());\n                \n                payment = sale.getPayment();\n\n                this.cardTokenService.save(cardToken);\n\n                return resultPage(sale);\n            } catch (CieloRequestException e) {\n                CieloError error = e.getError();\n            } catch (IOException e) {\n                e.printStackTrace();\n            }\n        }\n\n        try {\n            // Configure o SDK com seu merchant e o ambiente apropriado para criar a venda\n            sale = new CieloEcommerce(merchant, Environment.SANDBOX).createSale(sale);\n\n            String paymentId = sale.getPayment().getPaymentId();\n        } catch (CieloRequestException e) {\n            // Em caso de erros de integração, podemos tratar o erro aqui.\n            // os códigos de erro estão todos disponíveis no manual de integração.\n            CieloError error = e.getError();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n        payment.setCreditCard(creditCard);\n\n        sale.setPayment(payment);\n\n        return &quot;result&quot;;\n\n    }\n</code></pre>\n<p>The returning response follows the format below:</p>\n<pre><code>{\n    &quot;MerchantOrderId&quot;: &quot;ID do pagamento&quot;,\n    &quot;AcquirerOrderId&quot;: &quot;202306121605391B664B&quot;,\n    &quot;Customer&quot;: {\n        &quot;Name&quot;: &quot;Dr. Gregory Heathcote&quot;,\n        &quot;Address&quot;: {}\n    },\n    &quot;Payment&quot;: {\n        &quot;ServiceTaxAmount&quot;: 0,\n        &quot;Installments&quot;: 1,\n        &quot;Interest&quot;: &quot;ByMerchant&quot;,\n        &quot;Capture&quot;: false,\n        &quot;Authenticate&quot;: false,\n        &quot;Recurrent&quot;: false,\n        &quot;CreditCard&quot;: {\n            &quot;CardNumber&quot;: &quot;453875******3829&quot;,\n            &quot;Holder&quot;: &quot;Dr. Gregory Heathcote&quot;,\n            &quot;ExpirationDate&quot;: &quot;09/2024&quot;,\n            &quot;Brand&quot;: &quot;Visa&quot;\n        },\n        &quot;Tid&quot;: &quot;0612040540131&quot;,\n        &quot;PaymentId&quot;: &quot;48835b7d-e3af-45a2-9d85-2f7365415f5e&quot;,\n        &quot;Type&quot;: &quot;CreditCard&quot;,\n        &quot;Amount&quot;: 20000,\n        &quot;ReceivedDate&quot;: &quot;2023-06-12 16:05:39&quot;,\n        &quot;Currency&quot;: &quot;BRL&quot;,\n        &quot;Country&quot;: &quot;BRA&quot;,\n        &quot;Provider&quot;: &quot;Simulado&quot;,\n        &quot;ReturnCode&quot;: &quot;99&quot;,\n        &quot;ReturnMessage&quot;: &quot;Timeout&quot;,\n        &quot;Status&quot;: 0,\n        &quot;Links&quot;: [\n            {\n                &quot;Method&quot;: &quot;GET&quot;,\n                &quot;Rel&quot;: &quot;self&quot;,\n                &quot;Href&quot;: &quot;https://apiquerysandbox.cieloecommerce.cielo.com.br/1/sales/48835b7d-e3af-45a2-9d85-2f7365415f5e&quot;\n            }\n        ]\n    }\n}\n</code></pre>\n<p>And the controller returns the following HTML file:</p>\n<pre><code>&lt;!DOCTYPE HTML&gt;\n\n&lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n\n    &lt;head&gt;\n        &lt;meta charset=&quot;UTF-8&quot;&gt;\n        &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n        &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;\n        &lt;title&gt;Pessoa - Cadastro&lt;/title&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;h1&gt;Dados enviados pelo usuário:&lt;/h1&gt;\n\n        &lt;p&gt;Código: &lt;b th:text=&quot;${sale.getPayment().getReturnCode()}&quot;/&gt;&lt;/p&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>So what I want is to get the returning Java POJO &quot;sale&quot; and display the content of the &quot;ReturnCode&quot; onscreen.</p>\n<p>However the object that is sent to the View is from the parameter &quot;sale&quot;, which has has it all as null, so it throws the following error:</p>\n<p><code>EL1011E: Method call: Attempted to call method getReturnCode() on null context object</code></p>\n<p>So how am I supposed to proceed from here?</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":2321321,"reputation":2169,"user_id":2036983,"display_name":"Jonathan Rosenne"},"score":2,"creation_date":1470767887,"post_id":6708085,"comment_id":65080376,"body_markdown":"When you do not specify ORDER BY you get an arbitrary result.","body":"When you do not specify ORDER BY you get an arbitrary result."}],"answers":[{"comments":[{"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"score":0,"creation_date":1310738641,"post_id":6708151,"comment_id":7941214,"body_markdown":"I didn&#39;t want to make query.getResultList().get(0).. is it the only way?","body":"I didn&#39;t want to make query.getResultList().get(0).. is it the only way?"},{"owner":{"account_id":482890,"reputation":307,"user_id":897596,"accept_rate":75,"display_name":"KirEvse"},"score":0,"creation_date":1464286639,"post_id":6708151,"comment_id":62435124,"body_markdown":"To get a single object back, you can try: `Object object = query.setMaxResults(1).uniqueResult();`","body":"To get a single object back, you can try: <code>Object object = query.setMaxResults(1).uniqueResult();</code>"},{"owner":{"account_id":165044,"reputation":4235,"user_id":388185,"accept_rate":84,"display_name":"Alkanshel"},"score":0,"creation_date":1487383131,"post_id":6708151,"comment_id":71775241,"body_markdown":"uniqueResult() is hibernate specific, so it isn&#39;t usable if they&#39;re just sticking to pure JPA.","body":"uniqueResult() is hibernate specific, so it isn&#39;t usable if they&#39;re just sticking to pure JPA."}],"tags":[],"owner":{"account_id":161503,"reputation":18031,"user_id":382307,"accept_rate":96,"display_name":"Jorge"},"comment_count":3,"down_vote_count":1,"up_vote_count":67,"is_accepted":true,"score":66,"last_activity_date":1493893238,"creation_date":1310738537,"answer_id":6708151,"question_id":6708085,"body_markdown":"Try like this\r\n\r\n    String sql = &quot;SELECT t FROM table t&quot;;\r\n    Query query = em.createQuery(sql);\r\n    query.setFirstResult(firstPosition);\r\n    query.setMaxResults(numberOfRecords);\r\n    List result = query.getResultList();\r\n\r\nIt should work\r\n\r\n**UPDATE***\r\n\r\nYou can also try like this\r\n    \r\n    query.setMaxResults(1).getResultList();\r\n","title":"Select top 1 result using JPA","body":"<p>Try like this</p>\n\n<pre><code>String sql = \"SELECT t FROM table t\";\nQuery query = em.createQuery(sql);\nquery.setFirstResult(firstPosition);\nquery.setMaxResults(numberOfRecords);\nList result = query.getResultList();\n</code></pre>\n\n<p>It should work</p>\n\n<p><strong>UPDATE*</strong></p>\n\n<p>You can also try like this</p>\n\n<pre><code>query.setMaxResults(1).getResultList();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"score":0,"creation_date":1310738793,"post_id":6708159,"comment_id":7941261,"body_markdown":"Can you please give me an example? I&#39;ve never used that.","body":"Can you please give me an example? I&#39;ve never used that."},{"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"score":0,"creation_date":1310739074,"post_id":6708159,"comment_id":7941373,"body_markdown":"@pringlesinn, take a look at the example at [java2s.com](http://www.java2s.com/Code/Java/JPA/UsingNamedNativeQuery.htm). You will need to modify the query in the `@NamedNativeQuery` annotation to the one you desire, and also change the attribute value of resultClass to the one that represents the result.","body":"@pringlesinn, take a look at the example at <a href=\"http://www.java2s.com/Code/Java/JPA/UsingNamedNativeQuery.htm\" rel=\"nofollow noreferrer\">java2s.com</a>. You will need to modify the query in the <code>@NamedNativeQuery</code> annotation to the one you desire, and also change the attribute value of resultClass to the one that represents the result."}],"tags":[],"owner":{"account_id":2785,"reputation":76174,"user_id":3916,"accept_rate":100,"display_name":"Vineet Reynolds"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1310739112,"creation_date":1310738587,"answer_id":6708159,"question_id":6708085,"body_markdown":"Use a native SQL query by specifying a [`@NamedNativeQuery`][1] annotation on the entity class, or by using the [`EntityManager.createNativeQuery`][2] method. You will need to specify the type of the ResultSet using an appropriate class, or use a ResultSet mapping.\r\n\r\n\r\n  [1]: http://download.oracle.com/javaee/6/api/javax/persistence/NamedNativeQuery.html\r\n  [2]: http://download.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String,%20java.lang.Class%29","title":"Select top 1 result using JPA","body":"<p>Use a native SQL query by specifying a <a href=\"http://download.oracle.com/javaee/6/api/javax/persistence/NamedNativeQuery.html\" rel=\"nofollow\"><code>@NamedNativeQuery</code></a> annotation on the entity class, or by using the <a href=\"http://download.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#createNativeQuery%28java.lang.String,%20java.lang.Class%29\" rel=\"nofollow\"><code>EntityManager.createNativeQuery</code></a> method. You will need to specify the type of the ResultSet using an appropriate class, or use a ResultSet mapping.</p>\n"},{"comments":[{"owner":{"account_id":1489715,"reputation":2281,"user_id":1397115,"accept_rate":67,"display_name":"Krystian"},"score":6,"creation_date":1519912204,"post_id":18974399,"comment_id":85106615,"body_markdown":"Is there a need to use setFirstResult(0)?","body":"Is there a need to use setFirstResult(0)?"},{"owner":{"account_id":3165133,"reputation":158,"user_id":2675335,"display_name":"Super Fighting Robot"},"score":1,"creation_date":1553199878,"post_id":18974399,"comment_id":97306760,"body_markdown":"@Krystian No, there isn&#39;t. It actually throws an error for me. \n(I&#39;m using Amdatu)","body":"@Krystian No, there isn&#39;t. It actually throws an error for me.  (I&#39;m using Amdatu)"}],"tags":[],"owner":{"account_id":3344321,"reputation":231,"user_id":2809766,"display_name":"pinguinjesse"},"comment_count":2,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1380003997,"creation_date":1380003997,"answer_id":18974399,"question_id":6708085,"body_markdown":"To use getSingleResult on a TypedQuery you can use\r\n\r\n    query.setFirstResult(0);\r\n    query.setMaxResults(1);\r\n    result = query.getSingleResult();","title":"Select top 1 result using JPA","body":"<p>To use getSingleResult on a TypedQuery you can use</p>\n\n<pre><code>query.setFirstResult(0);\nquery.setMaxResults(1);\nresult = query.getSingleResult();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3193004,"reputation":2220,"user_id":2696865,"accept_rate":86,"display_name":"Laurent B"},"score":31,"creation_date":1495551494,"post_id":34079562,"comment_id":75295140,"body_markdown":"Does not answer the question. It was asked in JPA. This will for instance not work on Oracle","body":"Does not answer the question. It was asked in JPA. This will for instance not work on Oracle"},{"owner":{"account_id":1854815,"reputation":2720,"user_id":1680637,"display_name":"Ayman Al-Absi"},"score":2,"creation_date":1495662421,"post_id":34079562,"comment_id":75353976,"body_markdown":"You can change the query to match Oracle.","body":"You can change the query to match Oracle."},{"owner":{"account_id":330384,"reputation":1345,"user_id":654471,"display_name":"cabaji99"},"score":0,"creation_date":1513777109,"post_id":34079562,"comment_id":82781678,"body_markdown":"this worked for me, cause i have a very complex query and i was obtaining a lot of top row selects. In jpa i didnt find anything to help me. I was using db2 and the selects had FETCH FIRST ROW ONLY","body":"this worked for me, cause i have a very complex query and i was obtaining a lot of top row selects. In jpa i didnt find anything to help me. I was using db2 and the selects had FETCH FIRST ROW ONLY"},{"owner":{"account_id":4061724,"reputation":352,"user_id":3338091,"display_name":"Sergio A."},"score":0,"creation_date":1560339587,"post_id":34079562,"comment_id":99702085,"body_markdown":"positive vote for giving useful information, but it does not answer the question about JPA","body":"positive vote for giving useful information, but it does not answer the question about JPA"}],"tags":[],"owner":{"account_id":1854815,"reputation":2720,"user_id":1680637,"display_name":"Ayman Al-Absi"},"comment_count":4,"down_vote_count":16,"up_vote_count":26,"is_accepted":false,"score":10,"last_activity_date":1449193525,"creation_date":1449193525,"answer_id":34079562,"question_id":6708085,"body_markdown":"The easiest way is by using **@Query with NativeQuery option** like below:\r\n\r\n    @Query(value=&quot;SELECT 1 * FROM table ORDER BY anyField DESC LIMIT 1&quot;, nativeQuery = true)","title":"Select top 1 result using JPA","body":"<p>The easiest way is by using <strong>@Query with NativeQuery option</strong> like below:</p>\n\n<pre><code>@Query(value=\"SELECT 1 * FROM table ORDER BY anyField DESC LIMIT 1\", nativeQuery = true)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13330803,"reputation":321,"user_id":12388549,"display_name":"Rodrigo R"},"comment_count":0,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1635278898,"creation_date":1629382815,"answer_id":68849635,"question_id":6708085,"body_markdown":"2021 att: you can use TOP or FIRST in Spring Data JPA\r\n\r\nexample:\r\n\r\n    User findFirstByOrderByLastnameAsc();\r\n    \r\n    User findTopByOrderByAgeDesc();\r\n    \r\n    Page&lt;User&gt; queryFirst10ByLastname(String lastname, Pageable pageable);\r\n    \r\n    Slice&lt;User&gt; findTop3ByLastname(String lastname, Pageable pageable);\r\n    \r\n    List&lt;User&gt; findFirst10ByLastname(String lastname, Sort sort);\r\n    \r\n    List&lt;User&gt; findTop10ByLastname(String lastname, Pageable pageable);\r\n\r\ndoc: https://docs.spring.io/spring-data/jpa/docs/2.5.4/reference/html/#repositories.limit-query-result","title":"Select top 1 result using JPA","body":"<p>2021 att: you can use TOP or FIRST in Spring Data JPA</p>\n<p>example:</p>\n<pre><code>User findFirstByOrderByLastnameAsc();\n\nUser findTopByOrderByAgeDesc();\n\nPage&lt;User&gt; queryFirst10ByLastname(String lastname, Pageable pageable);\n\nSlice&lt;User&gt; findTop3ByLastname(String lastname, Pageable pageable);\n\nList&lt;User&gt; findFirst10ByLastname(String lastname, Sort sort);\n\nList&lt;User&gt; findTop10ByLastname(String lastname, Pageable pageable);\n</code></pre>\n<p>doc: <a href=\"https://docs.spring.io/spring-data/jpa/docs/2.5.4/reference/html/#repositories.limit-query-result\" rel=\"noreferrer\">https://docs.spring.io/spring-data/jpa/docs/2.5.4/reference/html/#repositories.limit-query-result</a></p>\n"},{"tags":[],"owner":{"account_id":6324081,"reputation":11,"user_id":4911040,"display_name":"Luong Thanh Tung"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686673345,"creation_date":1686408275,"answer_id":76446707,"question_id":6708085,"body_markdown":"Use Pageable with size is 1 and sort by the field you want it should work\r\n```\r\n  @Query(&quot;from Cat t order by t.name desc&quot;)\r\n  Page&lt;Cat&gt; findCats(Pageable page);\r\n```\r\nthe page should be use is \r\n```\r\nPageable page = PageRequest.of(0, 1, Sort.by(Sort.Direction.DESC, &quot;name&quot;));\r\n```","title":"Select top 1 result using JPA","body":"<p>Use Pageable with size is 1 and sort by the field you want it should work</p>\n<pre><code>  @Query(&quot;from Cat t order by t.name desc&quot;)\n  Page&lt;Cat&gt; findCats(Pageable page);\n</code></pre>\n<p>the page should be use is</p>\n<pre><code>Pageable page = PageRequest.of(0, 1, Sort.by(Sort.Direction.DESC, &quot;name&quot;));\n</code></pre>\n"}],"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":178287,"favorite_count":0,"down_vote_count":1,"up_vote_count":57,"accepted_answer_id":6708151,"answer_count":6,"score":56,"last_activity_date":1686673345,"creation_date":1310738265,"question_id":6708085,"body_markdown":"I need to bring from DB only one single result. How can I do that with JPA?\r\n\r\n    Select top 1 * from table\r\n\r\nI tried \r\n\r\n&gt; &quot;select t from table t&quot;\r\n\r\n    query.setMaxResults(1);\r\n    \r\n    query.getSingleResult();\r\n\r\nbut didn&#39;t work. Any other ideas?","title":"Select top 1 result using JPA","body":"<p>I need to bring from DB only one single result. How can I do that with JPA?</p>\n\n<pre><code>Select top 1 * from table\n</code></pre>\n\n<p>I tried </p>\n\n<blockquote>\n  <p>\"select t from table t\"</p>\n</blockquote>\n\n<pre><code>query.setMaxResults(1);\n\nquery.getSingleResult();\n</code></pre>\n\n<p>but didn't work. Any other ideas?</p>\n"},{"tags":["java","database","netbeans","h2","ioexception"],"answers":[{"tags":[],"owner":{"account_id":16247179,"reputation":7205,"user_id":11731987,"display_name":"Evgenij Ryazanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686625235,"creation_date":1686625235,"answer_id":76461450,"question_id":76461349,"body_markdown":"You cannot create databases by creation of files.\r\n\r\nYou need to use something like that:\r\n```lang-java\r\nConnection c = DriverManager.getConnection(&quot;jdbc:h2:C:/Users/lopes/teste3&quot;,\r\n    username, password);\r\n// ...\r\nc.close();\r\n```","title":"IO Exception [90028-214] using H2 DB after creating the Data Base File","body":"<p>You cannot create databases by creation of files.</p>\n<p>You need to use something like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Connection c = DriverManager.getConnection(&quot;jdbc:h2:C:/Users/lopes/teste3&quot;,\n    username, password);\n// ...\nc.close();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":28808702,"reputation":1,"user_id":22063927,"display_name":"Rafael Lopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686672426,"creation_date":1686672426,"answer_id":76466807,"question_id":76461349,"body_markdown":"Problem solved.\r\nThe file must be blank, and I was writing on it as you can see inside the &#39;try&#39;","title":"IO Exception [90028-214] using H2 DB after creating the Data Base File","body":"<p>Problem solved.\nThe file must be blank, and I was writing on it as you can see inside the 'try'</p>\n"}],"owner":{"account_id":28808702,"reputation":1,"user_id":22063927,"display_name":"Rafael Lopes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":462,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686672426,"creation_date":1686622965,"question_id":76461349,"body_markdown":"I tried to create the database file from inside the program I&#39;m developing:\r\n\r\n\r\n```\r\nif (!nome.getText().isEmpty()) {\r\n    if (disco.getSelectedIndex() == 2) {\r\n        if (!outroDisco.getText().isEmpty() &amp;&amp; outroDisco.getText().length() == 1) {\r\n            nomeDiretorio = outroDisco.getText() + &quot;:/&quot; + &quot;Users/&quot; + System.getProperty(&quot;user.name&quot;) + &quot;/&quot;;\r\n        } else {\r\n            JOptionPane.showMessageDialog(null, &quot;Informar disco onde H2 foi instalado, somente a letra&quot;);\r\n        }\r\n    } else {\r\n         nomeDiretorio = (String) disco.getSelectedItem() + &quot;/Users/&quot; + System.getProperty(&quot;user.name&quot;) + &quot;/&quot;;\r\n     }\r\n     nomeArquivo = nome.getText() + &quot;.mv.db&quot;;\r\n     File diretorio = new File(nomeDiretorio);\r\n     if (!diretorio.exists()) {\r\n        diretorio.mkdirs();\r\n     }\r\n     File arquivo = new File(diretorio, nomeArquivo);\r\n\r\n     try {\r\n                \r\n        arquivo.createNewFile();\r\n        String conteudo = &quot;Este &#233; o conte&#250;do do arquivo.&quot;;\r\n        FileOutputStream fos = new FileOutputStream(arquivo);\r\n        fos.write(conteudo.getBytes());\r\n        fos.close();\r\n        System.out.println(&quot;Arquivo criado com sucesso em: &quot; + arquivo.getAbsolutePath());\r\n     } catch (IOException e) {\r\n        System.out.println(&quot;Erro ao criar o arquivo: &quot; + e.getMessage());\r\n     }\r\n}    \r\n```\r\n\r\n\r\nthe file is successfully created in the correct path, but as I try to connect in the H2 console I get the following exceptions:\r\n   \r\n\r\n```    \r\nIO Exception: &quot;C:/Users/lopes/teste3.mv.db&quot; [90028-214] 90028/90028 (Help)\r\norg.h2.jdbc.JdbcSQLNonTransientException: IO Exception: &quot;C:/Users/lopes/teste3.mv.db&quot; [90028-214]\r\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:554)\r\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\r\n    at org.h2.message.DbException.get(DbException.java:212)\r\n    at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:171)\r\n    at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:145)\r\n    at org.h2.engine.Database.&lt;init&gt;(Database.java:324)\r\n    at org.h2.engine.Engine.openSession(Engine.java:92)\r\n    at org.h2.engine.Engine.openSession(Engine.java:222)\r\n    at org.h2.engine.Engine.createSession(Engine.java:201)\r\n    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:338)\r\n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:122)\r\n    at org.h2.util.JdbcUtils.getConnection(JdbcUtils.java:288)\r\n    at org.h2.server.web.WebServer.getConnection(WebServer.java:808)\r\n    at org.h2.server.web.WebApp.test(WebApp.java:972)\r\n    at org.h2.server.web.WebApp.process(WebApp.java:241)\r\n    at org.h2.server.web.WebApp.processRequest(WebApp.java:176)\r\n    at org.h2.server.web.WebThread.process(WebThread.java:152)\r\n    at org.h2.server.web.WebThread.run(WebThread.java:101)\r\n    at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: org.h2.mvstore.MVStoreException: Reading from file sun.nio.ch.FileChannelImpl@790020ad failed at 31 (length 31), read 31, remaining 8161 [2.1.214/1]\r\n    at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)\r\n    at org.h2.mvstore.DataUtils.readFully(DataUtils.java:470)\r\n    at org.h2.mvstore.FileStore.readFully(FileStore.java:98)\r\n    at org.h2.mvstore.MVStore.readStoreHeader(MVStore.java:837)\r\n    at org.h2.mvstore.MVStore.&lt;init&gt;(MVStore.java:463)\r\n    at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4082)\r\n    at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:136)\r\n    ... 14 more\r\nCaused by: java.io.EOFException\r\n    at org.h2.mvstore.DataUtils.readFully(DataUtils.java:458)\r\n    ... 19 more    \r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\nThe curious thing, is that if I create the file manually the console connects, but creating by using the program this problem happens\r\n\r\nThe H2 console cannot connect the database after my program running on Netbeans creates the .mv.db file in the correct path with the correct name, but it works if I create the file manually, but that&#39;s not what I need since I want the user to create his own DB","title":"IO Exception [90028-214] using H2 DB after creating the Data Base File","body":"<p>I tried to create the database file from inside the program I'm developing:</p>\n<pre><code>if (!nome.getText().isEmpty()) {\n    if (disco.getSelectedIndex() == 2) {\n        if (!outroDisco.getText().isEmpty() &amp;&amp; outroDisco.getText().length() == 1) {\n            nomeDiretorio = outroDisco.getText() + &quot;:/&quot; + &quot;Users/&quot; + System.getProperty(&quot;user.name&quot;) + &quot;/&quot;;\n        } else {\n            JOptionPane.showMessageDialog(null, &quot;Informar disco onde H2 foi instalado, somente a letra&quot;);\n        }\n    } else {\n         nomeDiretorio = (String) disco.getSelectedItem() + &quot;/Users/&quot; + System.getProperty(&quot;user.name&quot;) + &quot;/&quot;;\n     }\n     nomeArquivo = nome.getText() + &quot;.mv.db&quot;;\n     File diretorio = new File(nomeDiretorio);\n     if (!diretorio.exists()) {\n        diretorio.mkdirs();\n     }\n     File arquivo = new File(diretorio, nomeArquivo);\n\n     try {\n                \n        arquivo.createNewFile();\n        String conteudo = &quot;Este é o conteúdo do arquivo.&quot;;\n        FileOutputStream fos = new FileOutputStream(arquivo);\n        fos.write(conteudo.getBytes());\n        fos.close();\n        System.out.println(&quot;Arquivo criado com sucesso em: &quot; + arquivo.getAbsolutePath());\n     } catch (IOException e) {\n        System.out.println(&quot;Erro ao criar o arquivo: &quot; + e.getMessage());\n     }\n}    \n</code></pre>\n<p>the file is successfully created in the correct path, but as I try to connect in the H2 console I get the following exceptions:</p>\n<pre><code>IO Exception: &quot;C:/Users/lopes/teste3.mv.db&quot; [90028-214] 90028/90028 (Help)\norg.h2.jdbc.JdbcSQLNonTransientException: IO Exception: &quot;C:/Users/lopes/teste3.mv.db&quot; [90028-214]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:554)\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:477)\n    at org.h2.message.DbException.get(DbException.java:212)\n    at org.h2.mvstore.db.Store.convertMVStoreException(Store.java:171)\n    at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:145)\n    at org.h2.engine.Database.&lt;init&gt;(Database.java:324)\n    at org.h2.engine.Engine.openSession(Engine.java:92)\n    at org.h2.engine.Engine.openSession(Engine.java:222)\n    at org.h2.engine.Engine.createSession(Engine.java:201)\n    at org.h2.engine.SessionRemote.connectEmbeddedOrServer(SessionRemote.java:338)\n    at org.h2.jdbc.JdbcConnection.&lt;init&gt;(JdbcConnection.java:122)\n    at org.h2.util.JdbcUtils.getConnection(JdbcUtils.java:288)\n    at org.h2.server.web.WebServer.getConnection(WebServer.java:808)\n    at org.h2.server.web.WebApp.test(WebApp.java:972)\n    at org.h2.server.web.WebApp.process(WebApp.java:241)\n    at org.h2.server.web.WebApp.processRequest(WebApp.java:176)\n    at org.h2.server.web.WebThread.process(WebThread.java:152)\n    at org.h2.server.web.WebThread.run(WebThread.java:101)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: org.h2.mvstore.MVStoreException: Reading from file sun.nio.ch.FileChannelImpl@790020ad failed at 31 (length 31), read 31, remaining 8161 [2.1.214/1]\n    at org.h2.mvstore.DataUtils.newMVStoreException(DataUtils.java:1004)\n    at org.h2.mvstore.DataUtils.readFully(DataUtils.java:470)\n    at org.h2.mvstore.FileStore.readFully(FileStore.java:98)\n    at org.h2.mvstore.MVStore.readStoreHeader(MVStore.java:837)\n    at org.h2.mvstore.MVStore.&lt;init&gt;(MVStore.java:463)\n    at org.h2.mvstore.MVStore$Builder.open(MVStore.java:4082)\n    at org.h2.mvstore.db.Store.&lt;init&gt;(Store.java:136)\n    ... 14 more\nCaused by: java.io.EOFException\n    at org.h2.mvstore.DataUtils.readFully(DataUtils.java:458)\n    ... 19 more    \n\n\n\n\n</code></pre>\n<p>The curious thing, is that if I create the file manually the console connects, but creating by using the program this problem happens</p>\n<p>The H2 console cannot connect the database after my program running on Netbeans creates the .mv.db file in the correct path with the correct name, but it works if I create the file manually, but that's not what I need since I want the user to create his own DB</p>\n"},{"tags":["java","html","css","parsing","itext7"],"owner":{"account_id":28813748,"reputation":1,"user_id":22067879,"display_name":"Byou Ptube"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686672164,"creation_date":1686671790,"question_id":76466714,"body_markdown":"I have a OL\\&gt;Li which has a custom counter for lower alpha followed by ).\r\nWhen I run HtmlConverter.convertToPdf it converts but below error is printed for every \\&lt;li\\&gt; under \\&lt;ol\\&gt;\r\nError :  The &quot;Property.Font&quot; property must be a PdfFont object in this context\r\n\r\nCould some one help with this ?\r\n\r\n    ol {\r\n        counter-reset: list;\r\n    }\r\n    ol &gt; li {\r\n        list-style: none;\r\n        position: relative;\r\n    }\r\n    ol &gt; li:before {\r\n        counter-increment: list;\r\n        content: counter(list, lower-alpha) &quot;) &quot;;\r\n        position: absolute;\r\n        left: -1.4em;\r\n    }\r\n    &lt;ol&gt;\r\n        &lt;li&gt;Number 1&lt;/li&gt;\r\n        &lt;li&gt;Number 2&lt;/li&gt;\r\n        &lt;li&gt;Number 3&lt;/li&gt;\r\n    &lt;/ol&gt;\r\n\r\n\r\n    HtmlConverter.convertToPdf(htmlfilepath,pdfdestination)\r\n\r\nI tried adding font using ConverterProperties but error still persist","title":"issue using itext7 htmltopdf converter The &quot;Property.Font&quot; property must be a PdfFont object in this context","body":"<p>I have a OL&gt;Li which has a custom counter for lower alpha followed by ).\nWhen I run HtmlConverter.convertToPdf it converts but below error is printed for every &lt;li&gt; under &lt;ol&gt;\nError :  The &quot;Property.Font&quot; property must be a PdfFont object in this context</p>\n<p>Could some one help with this ?</p>\n<pre><code>ol {\n    counter-reset: list;\n}\nol &gt; li {\n    list-style: none;\n    position: relative;\n}\nol &gt; li:before {\n    counter-increment: list;\n    content: counter(list, lower-alpha) &quot;) &quot;;\n    position: absolute;\n    left: -1.4em;\n}\n&lt;ol&gt;\n    &lt;li&gt;Number 1&lt;/li&gt;\n    &lt;li&gt;Number 2&lt;/li&gt;\n    &lt;li&gt;Number 3&lt;/li&gt;\n&lt;/ol&gt;\n\n\nHtmlConverter.convertToPdf(htmlfilepath,pdfdestination)\n</code></pre>\n<p>I tried adding font using ConverterProperties but error still persist</p>\n"},{"tags":["java","solr","solrj"],"comments":[{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1686690019,"post_id":76466565,"comment_id":134833380,"body_markdown":"Are you referring to the &quot;max token length of 32178 bytes exceeded&quot; error? In that case, don&#39;t use a keyword tokenizer for your field - but use a regular tokenizer Having an exact match for a whole file isn&#39;t really suitable for Solr.","body":"Are you referring to the &quot;max token length of 32178 bytes exceeded&quot; error? In that case, don&#39;t use a keyword tokenizer for your field - but use a regular tokenizer Having an exact match for a whole file isn&#39;t really suitable for Solr."},{"owner":{"account_id":22058507,"reputation":183,"user_id":16321600,"display_name":"Snoz3f"},"score":0,"creation_date":1686690850,"post_id":76466565,"comment_id":134833502,"body_markdown":"Ok how can i add exact match then?","body":"Ok how can i add exact match then?"},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1686692441,"post_id":76466565,"comment_id":134833723,"body_markdown":"You can add a hash of the file instead of the actual content - depending on the hash algorithm these are 32-50 bytes. If you need to retrieve a file from its content that would be far more effective (not sure how you&#39;d send the extracted text to query for the file in the first place if you didn&#39;t already know what the extracted content was). Do you have an example of your exact use case? An exact match would mean that what you&#39;re using in the query is the _exact same text, whitespace, casing, newlines, and all_, as what Tika extracted).","body":"You can add a hash of the file instead of the actual content - depending on the hash algorithm these are 32-50 bytes. If you need to retrieve a file from its content that would be far more effective (not sure how you&#39;d send the extracted text to query for the file in the first place if you didn&#39;t already know what the extracted content was). Do you have an example of your exact use case? An exact match would mean that what you&#39;re using in the query is the <i>exact same text, whitespace, casing, newlines, and all</i>, as what Tika extracted)."},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1686733066,"post_id":76466565,"comment_id":134838333,"body_markdown":"If you want to keep the _words_ exact, use a whitespace tokenizer without any stemming/etc. - that way you can match the terms in the document exactly, without having to match the whole document.","body":"If you want to keep the <i>words</i> exact, use a whitespace tokenizer without any stemming/etc. - that way you can match the terms in the document exactly, without having to match the whole document."},{"owner":{"account_id":22058507,"reputation":183,"user_id":16321600,"display_name":"Snoz3f"},"score":0,"creation_date":1686740176,"post_id":76466565,"comment_id":134839786,"body_markdown":"then i can just add:\n    &lt;analyzer type=&quot;query&quot;&gt;\n        &lt;tokenizer name=&quot;whitespace&quot;/&gt;\n      &lt;/analyzer&gt; ? And will it work for field with big text value?","body":"then i can just add:     &lt;analyzer type=&quot;query&quot;&gt;         &lt;tokenizer name=&quot;whitespace&quot;/&gt;       &lt;/analyzer&gt; ? And will it work for field with big text value?"},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1686741489,"post_id":76466565,"comment_id":134840010,"body_markdown":"no, not if you only do it for queries - the error is an indexing error usually. But whether it behaves as you want depends on _how you want it to behave_ (which is why I asked about what you&#39;re actually trying to do). You will also want to have a lowercase filter if you want your matches to be case insensitive.","body":"no, not if you only do it for queries - the error is an indexing error usually. But whether it behaves as you want depends on <i>how you want it to behave</i> (which is why I asked about what you&#39;re actually trying to do). You will also want to have a lowercase filter if you want your matches to be case insensitive."},{"owner":{"account_id":22058507,"reputation":183,"user_id":16321600,"display_name":"Snoz3f"},"score":0,"creation_date":1686750077,"post_id":76466565,"comment_id":134842082,"body_markdown":"I have a text field with big text value and i need to get document which this value contains specific word or phrase. Currently if i write some word it returning documents which may contain similar word but i need exact result","body":"I have a text field with big text value and i need to get document which this value contains specific word or phrase. Currently if i write some word it returning documents which may contain similar word but i need exact result"},{"owner":{"account_id":22058507,"reputation":183,"user_id":16321600,"display_name":"Snoz3f"},"score":0,"creation_date":1686754933,"post_id":76466565,"comment_id":134843306,"body_markdown":"Thank you for your help. Looks like i solved this issue","body":"Thank you for your help. Looks like i solved this issue"},{"owner":{"account_id":46578,"reputation":50301,"user_id":137650,"display_name":"MatsLindh"},"score":0,"creation_date":1686767329,"post_id":76466565,"comment_id":134845924,"body_markdown":"Great, then you&#39;re not looking for exact search - that means that a field would match exactly with its complete value (not parts of the field). A whitespace tokenizer without further processing is probably sufficient in that case.","body":"Great, then you&#39;re not looking for exact search - that means that a field would match exactly with its complete value (not parts of the field). A whitespace tokenizer without further processing is probably sufficient in that case."}],"owner":{"account_id":22058507,"reputation":183,"user_id":16321600,"display_name":"Snoz3f"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686670723,"creation_date":1686670723,"question_id":76466565,"body_markdown":"I have this xml:\r\n\r\n        &lt;field name=&quot;text&quot; type=&quot;text_en&quot; default=&quot;&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt; \r\n      &lt;field name=&quot;text&quot; type=&quot;keyword_content&quot; default=&quot;&quot; indexed=&quot;true&quot; stored=&quot;true&quot; /&gt;\r\n       &lt;fieldType name=&quot;keyword_content&quot; class=&quot;solr.TextField&quot; omitNorms=&quot;true&quot; positionIncrementGap=&quot;100&quot;&gt;\r\n          &lt;analyzer type=&quot;index&quot;&gt;\r\n            &lt;tokenizer name=&quot;keyword&quot;/&gt;\r\n          &lt;/analyzer&gt;\r\n          &lt;analyzer type=&quot;query&quot;&gt;\r\n            &lt;tokenizer name=&quot;keyword&quot;/&gt;\r\n          &lt;/analyzer&gt;    \r\n       &lt;/fieldType&gt;\r\n    \r\n       &lt;copyField source=&quot;text&quot; dest=&quot;text_exact&quot; /&gt;\r\n\r\nAnd on reindex i&#39;m getting error with large documents. Is it possible to fix that?","title":"Are there way to overcome field max length barrier in Solr?","body":"<p>I have this xml:</p>\n<pre><code>    &lt;field name=&quot;text&quot; type=&quot;text_en&quot; default=&quot;&quot; indexed=&quot;true&quot; stored=&quot;true&quot;/&gt; \n  &lt;field name=&quot;text&quot; type=&quot;keyword_content&quot; default=&quot;&quot; indexed=&quot;true&quot; stored=&quot;true&quot; /&gt;\n   &lt;fieldType name=&quot;keyword_content&quot; class=&quot;solr.TextField&quot; omitNorms=&quot;true&quot; positionIncrementGap=&quot;100&quot;&gt;\n      &lt;analyzer type=&quot;index&quot;&gt;\n        &lt;tokenizer name=&quot;keyword&quot;/&gt;\n      &lt;/analyzer&gt;\n      &lt;analyzer type=&quot;query&quot;&gt;\n        &lt;tokenizer name=&quot;keyword&quot;/&gt;\n      &lt;/analyzer&gt;    \n   &lt;/fieldType&gt;\n\n   &lt;copyField source=&quot;text&quot; dest=&quot;text_exact&quot; /&gt;\n</code></pre>\n<p>And on reindex i'm getting error with large documents. Is it possible to fix that?</p>\n"},{"tags":["java","database","spring-boot","apache-kafka","concurrency"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686680071,"post_id":76466448,"comment_id":134831622,"body_markdown":"This code wouldn&#39;t even compile. As long as there is no state being held at the instance level there is no issue, however that is not clear from the pseudo code you have written here.","body":"This code wouldn&#39;t even compile. As long as there is no state being held at the instance level there is no issue, however that is not clear from the pseudo code you have written here."}],"owner":{"account_id":2407690,"reputation":1,"user_id":2103667,"display_name":"ray.10may"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686669875,"creation_date":1686669875,"question_id":76466448,"body_markdown":"I have two services Regular and Adhoc and they both can be invoked concurrently, later it will process method will get the corresponding objects for DB and Kafka using mapstruct mapper and save them to DB/push to kafka. \r\n\r\n\r\n\r\n\r\n```\r\nAdhocService{\r\n    @Autowired\r\n    ProcessPayload processPayload;\r\n\r\n    processPayload.process(payload);    \r\n}\r\n```\r\n\r\n```\r\nRegularService{\r\n    @Autowired\r\n    ProcessPayload processPayload;\r\n\r\n    processPayload.process(payload);    \r\n}\r\n\r\n```\r\n\r\n\r\n\r\n```\r\nProcessPayload{\r\n\r\n    process(Payload payload){\r\n        dbObject = payload -&gt; dbObjectMapper\r\n        DBopertion(dbObject);\r\n\r\n        kafkaObject = payload -&gt; kafkaObjectMapper\r\n        KAFKAopertion(kafkaObject);\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\nCan Springboot&#39;s singleton bean support this concurrent execution without any issue? If not then what is the alternative? - creating two beans of ProcessPayload and inject them using @Qualifier?\r\nI checked [this](https://stackoverflow.com/questions/25617962/how-does-the-singleton-bean-serve-the-concurrent-request) but not able to interpret it specifically. \r\n","title":"Springboot singleton bean in concurrent execution","body":"<p>I have two services Regular and Adhoc and they both can be invoked concurrently, later it will process method will get the corresponding objects for DB and Kafka using mapstruct mapper and save them to DB/push to kafka.</p>\n<pre><code>AdhocService{\n    @Autowired\n    ProcessPayload processPayload;\n\n    processPayload.process(payload);    \n}\n</code></pre>\n<pre><code>RegularService{\n    @Autowired\n    ProcessPayload processPayload;\n\n    processPayload.process(payload);    \n}\n\n</code></pre>\n<pre><code>ProcessPayload{\n\n    process(Payload payload){\n        dbObject = payload -&gt; dbObjectMapper\n        DBopertion(dbObject);\n\n        kafkaObject = payload -&gt; kafkaObjectMapper\n        KAFKAopertion(kafkaObject);\n    }\n\n}\n</code></pre>\n<p>Can Springboot's singleton bean support this concurrent execution without any issue? If not then what is the alternative? - creating two beans of ProcessPayload and inject them using @Qualifier?\nI checked <a href=\"https://stackoverflow.com/questions/25617962/how-does-the-singleton-bean-serve-the-concurrent-request\">this</a> but not able to interpret it specifically.</p>\n"},{"tags":["java","selenium-webdriver","iframe","selenium-chromedriver"],"owner":{"account_id":28813500,"reputation":1,"user_id":22067688,"display_name":"Jess"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686669719,"creation_date":1686669625,"question_id":76466413,"body_markdown":"I am currently scripting an automation test suite for a client and trying to interact with a third party iFrame (Plaid) and select web elements within the iFrame. When I run the tests, the chromedriver just times out and is unable to find the iframe by id or xpath and the elements within it.\r\nNote that this QA shard is also in Sandbox mode, so I was wondering if that might be affecting it from being located. \r\n\r\nAttached is the code im using and the inspected source code screentshot below:\r\n\r\n    public void selectPlaidFrame(){\r\n        WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(120));\r\n        wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(plaidHappyFrame));\r\n        driver.switchTo().frame(plaidHappyFrame);\r\n        wait.until(ExpectedConditions.elementToBeClickable(plaidHappyFrameContinueButton));\r\n        plaidHappyFrameContinueButton.click();\r\n    }\r\n Please help\r\n[Screenshot of source code](https://i.stack.imgur.com/YNP0u.png)\r\n\r\n\r\n   \r\n    @FindBy(id = &quot;plaid-link-iframe-1&quot;)\r\n    private WebElement plaidHappyFrame;\r\n    @FindBy(id = &quot;aut-button&quot;)\r\n    private WebElement plaidHappyFrameContinueButton;","title":"How to interact with web elements within a Plaid iFrame using Selenium Webdriver with Java","body":"<p>I am currently scripting an automation test suite for a client and trying to interact with a third party iFrame (Plaid) and select web elements within the iFrame. When I run the tests, the chromedriver just times out and is unable to find the iframe by id or xpath and the elements within it.\nNote that this QA shard is also in Sandbox mode, so I was wondering if that might be affecting it from being located.</p>\n<p>Attached is the code im using and the inspected source code screentshot below:</p>\n<pre><code>public void selectPlaidFrame(){\n    WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(120));\n    wait.until(ExpectedConditions.frameToBeAvailableAndSwitchToIt(plaidHappyFrame));\n    driver.switchTo().frame(plaidHappyFrame);\n    wait.until(ExpectedConditions.elementToBeClickable(plaidHappyFrameContinueButton));\n    plaidHappyFrameContinueButton.click();\n}\n</code></pre>\n<p>Please help\n<a href=\"https://i.stack.imgur.com/YNP0u.png\" rel=\"nofollow noreferrer\">Screenshot of source code</a></p>\n<pre><code>@FindBy(id = &quot;plaid-link-iframe-1&quot;)\nprivate WebElement plaidHappyFrame;\n@FindBy(id = &quot;aut-button&quot;)\nprivate WebElement plaidHappyFrameContinueButton;\n</code></pre>\n"},{"tags":["java","android","android-activity","singleton"],"comments":[{"owner":{"account_id":4663157,"reputation":15229,"user_id":3776927,"display_name":"derpirscher"},"score":0,"creation_date":1686670517,"post_id":76466416,"comment_id":134829591,"body_markdown":"Does this answer your question? [Android : Static Fields and Memory Leaks](https://stackoverflow.com/questions/11908039/android-static-fields-and-memory-leaks)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/11908039/android-static-fields-and-memory-leaks\">Android : Static Fields and Memory Leaks</a>"},{"owner":{"account_id":20242344,"reputation":1,"user_id":14845843,"display_name":"Yiğitcan G&#252;ler"},"score":0,"creation_date":1686671652,"post_id":76466416,"comment_id":134829865,"body_markdown":"@derpirscher i think it doesn&#39;t answer but thanks","body":"@derpirscher i think it doesn&#39;t answer but thanks"}],"owner":{"account_id":20242344,"reputation":1,"user_id":14845843,"display_name":"Yiğitcan G&#252;ler"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686669659,"creation_date":1686669659,"question_id":76466416,"body_markdown":"I want to use my main activity as a singleton. My app has single activity architecture. I searched the internet and everyone tells don&#39;t use singleton main activity because it leaks memory but i don&#39;t understand the drawback if my app is single activity.\r\n\r\nIf someone can clarify this i would be super thankful.\r\n\r\nI profiled my app before and after implementing singleton activity and results are same. Do you think is there a problem?","title":"Singleton usage in android single activity architecture","body":"<p>I want to use my main activity as a singleton. My app has single activity architecture. I searched the internet and everyone tells don't use singleton main activity because it leaks memory but i don't understand the drawback if my app is single activity.</p>\n<p>If someone can clarify this i would be super thankful.</p>\n<p>I profiled my app before and after implementing singleton activity and results are same. Do you think is there a problem?</p>\n"},{"tags":["java","spring-boot","validation"],"comments":[{"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"score":0,"creation_date":1686669254,"post_id":76466216,"comment_id":134829291,"body_markdown":"Try `${validatedValue}` as mentioned in this answer: https://stackoverflow.com/questions/74735952/include-variable-value-in-validation-message","body":"Try <code>${validatedValue}</code> as mentioned in this answer: <a href=\"https://stackoverflow.com/questions/74735952/include-variable-value-in-validation-message\" title=\"include variable value in validation message\">stackoverflow.com/questions/74735952/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1686669548,"creation_date":1686669548,"answer_id":76466406,"question_id":76466216,"body_markdown":"This can be done with the Unified Expression Language. Example based on your sample code:\r\n\r\n    @Max(value = 16, message = &quot;Forecast days is invalid. Allowed maximum of {value}. Given ${validatedValue}.&quot;)","title":"Customize spring boot starter validation error message with the given value","body":"<p>This can be done with the Unified Expression Language. Example based on your sample code:</p>\n<pre><code>@Max(value = 16, message = &quot;Forecast days is invalid. Allowed maximum of {value}. Given ${validatedValue}.&quot;)\n</code></pre>\n"}],"owner":{"account_id":1615315,"reputation":7242,"user_id":1493192,"accept_rate":65,"display_name":"Gianni Spear"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76466406,"answer_count":1,"score":0,"last_activity_date":1686669548,"creation_date":1686668082,"question_id":76466216,"body_markdown":"I wrote a DTO class to pass certain values to an endpoint. To sanitize the passed parameters I am using spring boot starter validation but I would like the error message handled by a Handler to return a message containing the value that was used as input.\r\n\r\nCan this be done directly or do I have to implement special methods?\r\n\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Getter\r\n    @Setter\r\n    @Builder\r\n    public class ForecastWeatherParametersDTO {\r\n    \r\n        @NotNull\r\n        @Max(value = 90, message = &quot;Latitude must be in range of -90 to 90&#176;. Given: {INSERT_GIVEN_VALUE}.&quot;)\r\n        @Min(value = -90, message = &quot;Latitude must be in range of -90 to 90&#176;. Given: {INSERT_GIVEN_VALUE}.&quot;)\r\n        private Double latitude;\r\n    \r\n        @NotNull\r\n        @Max(value = 180, message = &quot;Longitude must be in range of -180 to 180&#176;. Given: {INSERT_GIVEN_VALUE}.&quot;)\r\n        @Min(value = -180, message = &quot;Longitude must be in range of -180 to 180&#176;. Given: {INSERT_GIVEN_VALUE}.&quot;)\r\n        private Double longitude;\r\n    \r\n        @Builder.Default\r\n        private List&lt;HourlyForecastVariablesEnum&gt; hourly = new ArrayList&lt;&gt;();\r\n        @Builder.Default\r\n        private List&lt;DailyForecastVariablesEnum&gt; daily = new ArrayList&lt;&gt;();\r\n        @Builder.Default\r\n        private List&lt;ModelsForecastEnum&gt; models = List.of(ModelsForecastEnum.BEST_MATCH);\r\n    \r\n        // setting\r\n        @JsonProperty(&quot;past_days&quot;)\r\n        @Builder.Default\r\n        @Max(value = 92, message = &quot;Past days is invalid. Allowed range 0 to 92. Given {INSERT_GIVEN_VALUE}.&quot;)\r\n        @Min(value = 0, message = &quot;Past days is invalid. Allowed range 0 to 92. Given {INSERT_GIVEN_VALUE}.&quot;)\r\n        private Integer pastDays = 0;\r\n    \r\n        @JsonProperty(&quot;future_days&quot;)\r\n        @Builder.Default\r\n        @Max(value = 16, message = &quot;Forecast days is invalid. Allowed range 0 to 16. Given {INSERT_GIVEN_VALUE}.&quot;)\r\n        @Min(value = 0, message = &quot;Forecast days is invalid. Allowed range 0 to 16. Given {INSERT_GIVEN_VALUE}.&quot;)\r\n        private Integer futureDays = 7;\r\n    \r\n        @JsonProperty(&quot;temperature_unit&quot;)\r\n        @Builder.Default\r\n        private TemperatureUnitEnum temperatureUnit = TemperatureUnitEnum.CELSIUS;\r\n    \r\n        @JsonProperty(&quot;windspeed_unit&quot;)\r\n        @Builder.Default\r\n        private WindSpeedUnitEnum windSpeedUnit = WindSpeedUnitEnum.KMH;\r\n    \r\n        @JsonProperty(&quot;precipitation_unit&quot;)\r\n        @Builder.Default\r\n        private PrecipitationUnitEnum precipitationUnit = PrecipitationUnitEnum.MM;\r\n    \r\n        @JsonProperty(&quot;time_format&quot;)\r\n        @Builder.Default\r\n        private TimeFormatEnum timeFormat = TimeFormatEnum.ISO8601;\r\n    \r\n        @Builder.Default\r\n        @JsonProperty(&quot;time_zone&quot;)\r\n        private TimeZoneEnum timeZone = TimeZoneEnum.GMT0;\r\n    \r\n    }\r\n\r\n","title":"Customize spring boot starter validation error message with the given value","body":"<p>I wrote a DTO class to pass certain values to an endpoint. To sanitize the passed parameters I am using spring boot starter validation but I would like the error message handled by a Handler to return a message containing the value that was used as input.</p>\n<p>Can this be done directly or do I have to implement special methods?</p>\n<pre><code>@AllArgsConstructor\n@NoArgsConstructor\n@Getter\n@Setter\n@Builder\npublic class ForecastWeatherParametersDTO {\n\n    @NotNull\n    @Max(value = 90, message = &quot;Latitude must be in range of -90 to 90°. Given: {INSERT_GIVEN_VALUE}.&quot;)\n    @Min(value = -90, message = &quot;Latitude must be in range of -90 to 90°. Given: {INSERT_GIVEN_VALUE}.&quot;)\n    private Double latitude;\n\n    @NotNull\n    @Max(value = 180, message = &quot;Longitude must be in range of -180 to 180°. Given: {INSERT_GIVEN_VALUE}.&quot;)\n    @Min(value = -180, message = &quot;Longitude must be in range of -180 to 180°. Given: {INSERT_GIVEN_VALUE}.&quot;)\n    private Double longitude;\n\n    @Builder.Default\n    private List&lt;HourlyForecastVariablesEnum&gt; hourly = new ArrayList&lt;&gt;();\n    @Builder.Default\n    private List&lt;DailyForecastVariablesEnum&gt; daily = new ArrayList&lt;&gt;();\n    @Builder.Default\n    private List&lt;ModelsForecastEnum&gt; models = List.of(ModelsForecastEnum.BEST_MATCH);\n\n    // setting\n    @JsonProperty(&quot;past_days&quot;)\n    @Builder.Default\n    @Max(value = 92, message = &quot;Past days is invalid. Allowed range 0 to 92. Given {INSERT_GIVEN_VALUE}.&quot;)\n    @Min(value = 0, message = &quot;Past days is invalid. Allowed range 0 to 92. Given {INSERT_GIVEN_VALUE}.&quot;)\n    private Integer pastDays = 0;\n\n    @JsonProperty(&quot;future_days&quot;)\n    @Builder.Default\n    @Max(value = 16, message = &quot;Forecast days is invalid. Allowed range 0 to 16. Given {INSERT_GIVEN_VALUE}.&quot;)\n    @Min(value = 0, message = &quot;Forecast days is invalid. Allowed range 0 to 16. Given {INSERT_GIVEN_VALUE}.&quot;)\n    private Integer futureDays = 7;\n\n    @JsonProperty(&quot;temperature_unit&quot;)\n    @Builder.Default\n    private TemperatureUnitEnum temperatureUnit = TemperatureUnitEnum.CELSIUS;\n\n    @JsonProperty(&quot;windspeed_unit&quot;)\n    @Builder.Default\n    private WindSpeedUnitEnum windSpeedUnit = WindSpeedUnitEnum.KMH;\n\n    @JsonProperty(&quot;precipitation_unit&quot;)\n    @Builder.Default\n    private PrecipitationUnitEnum precipitationUnit = PrecipitationUnitEnum.MM;\n\n    @JsonProperty(&quot;time_format&quot;)\n    @Builder.Default\n    private TimeFormatEnum timeFormat = TimeFormatEnum.ISO8601;\n\n    @Builder.Default\n    @JsonProperty(&quot;time_zone&quot;)\n    private TimeZoneEnum timeZone = TimeZoneEnum.GMT0;\n\n}\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1686669537,"post_id":62029430,"comment_id":134829367,"body_markdown":"`String newStr = str.substring(str.lastIndexOf(&quot; - &quot;) + 3);` if you just have to have a regex try `String newStr = str.replaceAll(&quot;(.*)(\\\\s+-\\\\s+)(.*)$&quot;, &quot;$3&quot;);`","body":"<code>String newStr = str.substring(str.lastIndexOf(&quot; - &quot;) + 3);</code> if you just have to have a regex try <code>String newStr = str.replaceAll(&quot;(.*)(\\\\s+-\\\\s+)(.*)$&quot;, &quot;$3&quot;);</code>"},{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1686669624,"post_id":62029430,"comment_id":134829397,"body_markdown":"Heck, even `#split` takes a regex that would be the same simplicity: `String[] parts = str.split(&quot; - &quot;); String newStr = parts[1];`","body":"Heck, even <code>#split</code> takes a regex that would be the same simplicity: <code>String[] parts = str.split(&quot; - &quot;); String newStr = parts[1];</code>"},{"owner":{"account_id":1111280,"reputation":6531,"user_id":1101692,"accept_rate":89,"display_name":"Shark"},"score":0,"creation_date":1686669644,"post_id":62029430,"comment_id":134829402,"body_markdown":"What if there is more than one `-` in the string? For example `String test = &quot;what do i do - now? - blablabla&quot;`","body":"What if there is more than one <code>-</code> in the string? For example <code>String test = &quot;what do i do - now? - blablabla&quot;</code>"}],"owner":{"account_id":16578978,"reputation":23,"user_id":11980063,"display_name":"Arpit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686669311,"creation_date":1590519600,"question_id":62029430,"body_markdown":"    String str = &quot;FirstName LastName - 1234xx&quot;\r\nIn above case, want to replace above string with everything after &quot; - &quot; substring. In the above example it would mean changing `str` to `1234xx`\r\n\r\nThe length of string after &quot; - &quot; is not fixed, hence cannot just capture last certain no. of characters\r\n\r\nThis approach gives `FirstName LastName -  -` instead of desired output `1234xx`\r\n\r\n    public class StringExample \r\n    {\r\n        public static void main(String[] args) \r\n        {\r\n            String str = &quot;FirstName LastName - 1234xx&quot;;\r\n            String newStr = str.replaceAll(&quot;(?&lt;=( - )).*&quot;, &quot;$1&quot;);\r\n             \r\n            System.out.println(newStr);\r\n        }\r\n    }","title":"Capture portion of string after specific characters using Regex","body":"<pre><code>String str = \"FirstName LastName - 1234xx\"\n</code></pre>\n\n<p>In above case, want to replace above string with everything after \" - \" substring. In the above example it would mean changing <code>str</code> to <code>1234xx</code></p>\n\n<p>The length of string after \" - \" is not fixed, hence cannot just capture last certain no. of characters</p>\n\n<p>This approach gives <code>FirstName LastName -  -</code> instead of desired output <code>1234xx</code></p>\n\n<pre><code>public class StringExample \n{\n    public static void main(String[] args) \n    {\n        String str = \"FirstName LastName - 1234xx\";\n        String newStr = str.replaceAll(\"(?&lt;=( - )).*\", \"$1\");\n\n        System.out.println(newStr);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","jpa"],"comments":[{"owner":{"account_id":2795364,"reputation":7571,"user_id":2404683,"display_name":"Davide D&#39;Alto"},"score":0,"creation_date":1656002447,"post_id":72733215,"comment_id":128471533,"body_markdown":"Maybe something is wrong with you dependencies? What do you have on the classpath related to JPA (Spring, Hibernate...)","body":"Maybe something is wrong with you dependencies? What do you have on the classpath related to JPA (Spring, Hibernate...)"},{"owner":{"account_id":174361,"reputation":516,"user_id":403675,"accept_rate":62,"display_name":"Petr Kostroun"},"score":0,"creation_date":1656003296,"post_id":72733215,"comment_id":128471838,"body_markdown":"I add mvn dependency:tree","body":"I add mvn dependency:tree"}],"answers":[{"tags":[],"owner":{"account_id":14338836,"reputation":1,"user_id":10357531,"display_name":"sbo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686668526,"creation_date":1686666437,"answer_id":76465975,"question_id":72733215,"body_markdown":"Spring 5.3 is not compatible with jpa 2.1. See this [compatibility matrix][1] (sorry, it&#39;s in French).\r\n\r\nA solution is to upgrade to hibernate 5.3.\r\n\r\n\r\n[1]: https://github.com/ghusta/matrice-versions-spring-hibernate","title":"java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory","body":"<p>Spring 5.3 is not compatible with jpa 2.1. See this <a href=\"https://github.com/ghusta/matrice-versions-spring-hibernate\" rel=\"nofollow noreferrer\">compatibility matrix</a> (sorry, it's in French).</p>\n<p>A solution is to upgrade to hibernate 5.3.</p>\n"}],"owner":{"account_id":174361,"reputation":516,"user_id":403675,"accept_rate":62,"display_name":"Petr Kostroun"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1686668526,"creation_date":1655999859,"question_id":72733215,"body_markdown":"I have strange error with Spring configuration and javax.persistence.EntityManagerFactory. It throws me java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory\r\n\r\nMy configuration is here:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;\r\n    \txmlns:task=&quot;http://www.springframework.org/schema/task&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n    \txsi:schemaLocation=&quot;\r\n    \thttp://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\r\n           http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd\r\n           http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd\r\n           http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd\r\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd&quot;&gt;\r\n    \r\n       &lt;context:annotation-config /&gt;\r\n       &lt;context:component-scan base-package=&quot;com.dhl.cas&quot; /&gt;\r\n       &lt;tx:annotation-driven/&gt;\r\n    \r\n    \t&lt;bean id=&quot;umDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\r\n    \t\tdestroy-method=&quot;close&quot;&gt;\r\n    \t\t&lt;property name=&quot;driverClassName&quot; value=&quot;${db.um.driver:oracle.jdbc.OracleDriver}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;url&quot; value=&quot;${db.um.url}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;username&quot; value=&quot;${db.um.username}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;password&quot; value=&quot;${db.um.password}&quot; /&gt;\r\n            &lt;property name=&quot;initialSize&quot; value=&quot;${db.connection.initialSize:10}&quot; /&gt;\r\n            &lt;property name=&quot;maxIdle&quot; value=&quot;-1&quot; /&gt;\r\n            &lt;property name=&quot;maxActive&quot; value=&quot;${db.connection.maxActive:100}&quot; /&gt;\r\n            &lt;property name=&quot;maxWait&quot; value=&quot;-1&quot; /&gt;\r\n            &lt;property name=&quot;validationQuery&quot; value=&quot;${db.validation.query:select 1 from dual}&quot; /&gt;\r\n            &lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot; /&gt;\r\n            &lt;property name=&quot;validationQueryTimeout&quot; value=&quot;5&quot; /&gt;\r\n            &lt;property name=&quot;connectionProperties&quot; value=&quot;oracle.jdbc.ReadTimeout=${db.read.timeout:60000};oracle.net.READ_TIMEOUT=${db.net.timeout:60000}&quot; /&gt;\r\n    \t\t\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean id=&quot;umJdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;\r\n    \t\t&lt;property name=&quot;dataSource&quot; ref=&quot;umDataSource&quot;&gt;\r\n    \r\n    \t\t&lt;/property&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;umNamedJdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate&quot;&gt;\r\n    \t\t&lt;constructor-arg ref=&quot;umJdbcTemplate&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean class=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot;/&gt;\r\n        \r\n        \r\n       &lt;bean id=&quot;entityManagerFactory&quot;\r\n        class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\r\n        &lt;property name=&quot;dataSource&quot; ref=&quot;umDataSource&quot;/&gt;\r\n        &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\r\n          &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\r\n            &lt;property name=&quot;generateDdl&quot; value=&quot;false&quot;/&gt;\r\n            &lt;property name=&quot;showSql&quot; value=&quot;false&quot; /&gt;\r\n          &lt;/bean&gt;\r\n        &lt;/property&gt;\r\n        &lt;property name=&quot;jpaProperties&quot;&gt;\r\n          &lt;props&gt;\r\n    \t\t&lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\r\n          &lt;/props&gt;\r\n        &lt;/property&gt;\r\n      &lt;/bean&gt;\r\n     \r\n      &lt;bean id=&quot;transactionManager&quot;\r\n        class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;\r\n        p:entityManagerFactory-ref=&quot;entityManagerFactory&quot; /&gt;\r\n     \r\n    \t\r\n    \r\n    \t&lt;bean name=&quot;internalLdapBean&quot; class=&quot;com.dhl.resp.authentication.LDAP&quot;&gt;\r\n    \t\t&lt;property name=&quot;ldapUrl&quot; value=&quot;${ldap.url}&quot; /&gt;\r\n    \t\t&lt;property name=&quot;ldapPrincipalSuffix&quot; value=&quot;${ldap.principalsuffix}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \r\n    \t&lt;bean name=&quot;externalLdapBean&quot; class=&quot;com.dhl.resp.authentication.LDAPAD&quot;&gt;\r\n    \t\t&lt;property name=&quot;ldapUrl&quot; value=&quot;${ldap_uag.url}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean name=&quot;umDao&quot; class=&quot;com.dhl.resp.authentication.dao.UmDaoImpl&quot;&gt;\r\n    \t\t&lt;property name=&quot;umNamedJdbcTemplate&quot; ref=&quot;umNamedJdbcTemplate&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean name=&quot;umAuthenticationHandler&quot; class=&quot;com.dhl.resp.authentication.UmAuthenticationHandlerImpl&quot; &gt;\r\n    \t\t&lt;property name=&quot;umDao&quot; ref=&quot;umDao&quot; /&gt;\r\n    \t\t&lt;property name=&quot;internalLdap&quot; ref=&quot;internalLdapBean&quot; /&gt;\r\n    \t\t&lt;property name=&quot;externalLdap&quot; ref=&quot;externalLdapBean&quot; /&gt;\r\n    \t\t&lt;property name=&quot;skipLockedUsers&quot; value=&quot;${skip.locked.users.during.login:true}&quot; /&gt;\r\n    \t&lt;/bean&gt;\r\n    \t\r\n    \t&lt;bean id=&quot;SDCFilter&quot;\r\n    \tclass=&quot;com.dhl.cas.support.SDCFilter&quot;/&gt;\r\n    &lt;/beans&gt;\r\n\r\n\r\nError which it throws is : \r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in file [/appl/dev_cas/webapps/cas/WEB-INF/classes/META-INF/applicationContext-beans.xml]: Invocation of init method failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n            at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n            at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401)\r\n            at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292)\r\n            at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\r\n            at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody0(SafeContextLoaderListener.java:75)\r\n            at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody1$advice(SafeContextLoaderListener.java:57)\r\n            at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized(SafeContextLoaderListener.java:1)\r\n            at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4678)\r\n            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5139)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)\r\n            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690)\r\n            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705)\r\n            at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:978)\r\n            at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1848)\r\n            at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n            at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:773)\r\n            at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:427)\r\n            at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1576)\r\n            at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:309)\r\n            at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n            at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n            at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:936)\r\n            at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384)\r\n            at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374)\r\n            at java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n            at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n            at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n            at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909)\r\n            at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:633)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at java.lang.reflect.Method.invoke(Method.java:498)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)\r\n    Caused by: java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.createEntityManagerFactoryProxy(AbstractEntityManagerFactoryBean.java:464)\r\n            at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:403)\r\n            at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\r\n            ... 56 more\r\n\r\nCan someone plese give me a tip how to solve this issue? Thanks\r\n\r\nMy mvn dependency:tree\r\n\r\n       com.dhl.cas:cas:war:3.0.10.0\r\n    [INFO] +- com.dhl.resp:authentication-core:jar:1.0.9.0:compile\r\n    [INFO] |  +- org.springframework:spring-jdbc:jar:5.3.18:compile\r\n    [INFO] |  +- org.springframework.ldap:spring-ldap-core:jar:1.3.2.RELEASE:compile\r\n    [INFO] |  +- org.json:json:jar:20090211:compile\r\n    [INFO] |  \\- com.microsoft.azure:adal4j:jar:1.1.1:compile\r\n    [INFO] |     +- com.nimbusds:oauth2-oidc-sdk:jar:4.5:compile\r\n    [INFO] |     |  +- javax.mail:mail:jar:1.4.1:compile\r\n    [INFO] |     |  |  \\- javax.activation:activation:jar:1.1:compile\r\n    [INFO] |     |  +- net.jcip:jcip-annotations:jar:1.0:compile\r\n    [INFO] |     |  +- net.minidev:json-smart:jar:1.1.1:compile\r\n    [INFO] |     |  +- com.nimbusds:lang-tag:jar:1.4:compile\r\n    [INFO] |     |  \\- com.nimbusds:nimbus-jose-jwt:jar:3.1.2:compile\r\n    [INFO] |     \\- com.google.code.gson:gson:jar:2.2.4:compile\r\n    [INFO] +- junit:junit:jar:4.8.2:test\r\n    [INFO] +- org.hibernate:hibernate-core:jar:5.1.4.Final:compile\r\n    [INFO] |  +- org.jboss.logging:jboss-logging:jar:3.3.0.Final:compile\r\n    [INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\r\n    [INFO] |  +- org.javassist:javassist:jar:3.20.0-GA:compile\r\n    [INFO] |  +- antlr:antlr:jar:2.7.7:compile\r\n    [INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\r\n    [INFO] |  +- org.jboss:jandex:jar:2.0.3.Final:compile\r\n    [INFO] |  +- com.fasterxml:classmate:jar:1.3.0:compile\r\n    [INFO] |  +- dom4j:dom4j:jar:1.6.1:compile\r\n    [INFO] |  \\- org.hibernate.common:hibernate-commons-annotations:jar:5.0.1.Final:compile\r\n    [INFO] +- org.hibernate:hibernate-entitymanager:jar:5.1.4.Final:compile\r\n    [INFO] +- org.jasig.cas:cas-server-webapp:war:3.5.0:compile\r\n    [INFO] +- com.github.inspektr:inspektr-audit:jar:1.0.7.GA:compile\r\n    [INFO] |  \\- org.aspectj:aspectjrt:jar:1.6.9:compile\r\n    [INFO] +- com.github.inspektr:inspektr-common:jar:1.0.7.GA:compile\r\n    [INFO] +- com.github.inspektr:inspektr-support-spring:jar:1.0.7.GA:compile\r\n    [INFO] |  \\- com.github.inspektr:inspektr-error:jar:1.0.7.GA:compile\r\n    [INFO] +- org.springframework.security:spring-security-cas:jar:4.2.3.RELEASE:compile\r\n    [INFO] |  +- org.jasig.cas.client:cas-client-core:jar:3.4.1:compile\r\n    [INFO] |  +- org.springframework.security:spring-security-core:jar:4.2.3.RELEASE:compile\r\n    [INFO] |  \\- org.springframework.security:spring-security-web:jar:4.2.3.RELEASE:compile\r\n    [INFO] +- javax.servlet:servlet-api:jar:2.5:provided\r\n    [INFO] +- jstl:jstl:jar:1.2:compile\r\n    [INFO] +- commons-dbcp:commons-dbcp:jar:1.4:runtime\r\n    [INFO] |  \\- commons-pool:commons-pool:jar:1.5.4:runtime\r\n    [INFO] +- javax.validation:validation-api:jar:1.0.0.GA:compile\r\n    [INFO] +- com.oracle:ojdbc7:jar:12.1.0.1.0:runtime\r\n    [INFO] +- org.hsqldb:hsqldb:jar:2.2.9:test\r\n    [INFO] +- net.sf.opencsv:opencsv:jar:2.0:compile\r\n    [INFO] +- org.jasig.cas:cas-server-core:jar:3.5.0:provided\r\n    [INFO] |  +- org.jasig.service:person-directory-impl:jar:1.5.0-RC6:provided\r\n    [INFO] |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.1.12:provided\r\n    [INFO] |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.1:provided\r\n    [INFO] |  |  |     \\- javax.xml.stream:stax-api:jar:1.0-2:provided\r\n    [INFO] |  |  +- commons-collections:commons-collections:jar:3.2.1:compile\r\n    [INFO] |  |  \\- org.jasig.service:person-directory-api:jar:1.5.0-RC6:provided\r\n    [INFO] |  +- commons-codec:commons-codec:jar:1.4:compile\r\n    [INFO] |  +- jdom:jdom:jar:1.0:provided\r\n    [INFO] |  +- org.apache.santuario:xmlsec:jar:1.4.3:compile\r\n    [INFO] |  +- javax.xml:xmldsig:jar:1.0:provided\r\n    [INFO] |  +- org.perf4j:perf4j:jar:log4jonly:0.9.14:provided\r\n    [INFO] |  +- org.springframework.webflow:spring-webflow:jar:2.3.0.RELEASE:provided\r\n    [INFO] |  |  +- org.springframework.webflow:spring-binding:jar:2.3.0.RELEASE:provided\r\n    [INFO] |  |  \\- org.springframework.webflow:spring-js:jar:2.3.0.RELEASE:provided\r\n    [INFO] |  |     \\- org.springframework.webflow:spring-js-resources:jar:2.3.0.RELEASE:provided\r\n    [INFO] |  +- commons-jexl:commons-jexl:jar:1.1:provided\r\n    [INFO] |  +- commons-io:commons-io:jar:2.0:compile\r\n    [INFO] |  \\- org.aspectj:aspectjweaver:jar:1.6.9:compile\r\n    [INFO] +- org.springframework:spring-tx:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-webmvc:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-core:jar:5.3.18:compile\r\n    [INFO] |  \\- org.springframework:spring-jcl:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-orm:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-web:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-expression:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-aop:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-aspects:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-test:jar:5.3.18:test\r\n    [INFO] +- org.springframework:spring-jms:jar:5.3.18:compile\r\n    [INFO] |  \\- org.springframework:spring-messaging:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-context:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-context-support:jar:5.3.18:compile\r\n    [INFO] +- org.springframework:spring-beans:jar:5.3.18:compile\r\n    [INFO] +- org.springframework.security:spring-security-config:jar:4.2.3.RELEASE:compile\r\n    [INFO] |  \\- aopalliance:aopalliance:jar:1.0:compile\r\n    [INFO] +- org.springframework.security.extensions:spring-security-saml2-core:jar:1.0.10.RELEASE:compile\r\n    [INFO] |  +- com.narupley:not-going-to-be-commons-ssl:jar:0.3.20:compile\r\n    [INFO] |  |  +- org.bouncycastle:bcprov-ext-jdk15on:jar:1.60:compile\r\n    [INFO] |  |  \\- commons-httpclient:commons-httpclient:jar:3.1:compile\r\n    [INFO] |  +- org.apache.velocity:velocity-engine-core:jar:2.0:compile\r\n    [INFO] |  |  \\- org.apache.commons:commons-lang3:jar:3.5:compile\r\n    [INFO] |  +- org.bouncycastle:bcpkix-jdk15on:jar:1.64:compile\r\n    [INFO] |  +- org.bouncycastle:bcprov-jdk15on:jar:1.64:compile\r\n    [INFO] |  +- org.opensaml:opensaml:jar:2.6.6:compile\r\n    [INFO] |  |  \\- org.opensaml:openws:jar:1.5.6:compile\r\n    [INFO] |  |     \\- org.opensaml:xmltooling:jar:1.4.6:compile\r\n    [INFO] |  +- org.owasp.esapi:esapi:jar:2.2.0.0:compile\r\n    [INFO] |  |  +- com.io7m.xom:xom:jar:1.2.10:compile\r\n    [INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.3:compile\r\n    [INFO] |  |  +- org.apache.commons:commons-collections4:jar:4.2:compile\r\n    [INFO] |  |  +- org.apache-extras.beanshell:bsh:jar:2.0b6:compile\r\n    [INFO] |  |  \\- xerces:xercesImpl:jar:2.12.0:compile\r\n    [INFO] |  +- xalan:xalan:jar:2.7.2:compile\r\n    [INFO] |  |  \\- xalan:serializer:jar:2.7.2:compile\r\n    [INFO] |  \\- xml-apis:xml-apis:jar:1.4.01:compile\r\n    [INFO] +- org.apache.httpcomponents:httpclient:jar:4.4:compile\r\n    [INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.4:compile\r\n    [INFO] |  \\- commons-logging:commons-logging:jar:1.2:compile\r\n    [INFO] +- javax.persistence:javax.persistence-api:jar:2.2:compile\r\n    [INFO] +- commons-lang:commons-lang:jar:2.5:compile\r\n    [INFO] +- com.google.guava:guava:jar:r07:compile\r\n    [INFO] +- joda-time:joda-time:jar:1.6.2:compile\r\n    [INFO] +- org.slf4j:slf4j-api:jar:1.5.8:compile\r\n    [INFO] +- org.slf4j:slf4j-log4j12:jar:1.5.8:runtime\r\n    [INFO] +- log4j:log4j:jar:1.2.16:compile\r\n    [INFO] +- org.slf4j:jcl-over-slf4j:jar:1.5.8:runtime\r\n    [INFO] +- org.slf4j:jul-to-slf4j:jar:1.5.8:runtime\r\n    [INFO] \\- com.google.code.findbugs:jsr305:jar:1.3.9:compile\r\n\r\n","title":"java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory","body":"<p>I have strange error with Spring configuration and javax.persistence.EntityManagerFactory. It throws me java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory</p>\n<p>My configuration is here:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:lang=&quot;http://www.springframework.org/schema/lang&quot;\n    xmlns:task=&quot;http://www.springframework.org/schema/task&quot; xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\n    xsi:schemaLocation=&quot;\n    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd\n       http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd\n       http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd\n       http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.5.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd&quot;&gt;\n\n   &lt;context:annotation-config /&gt;\n   &lt;context:component-scan base-package=&quot;com.dhl.cas&quot; /&gt;\n   &lt;tx:annotation-driven/&gt;\n\n    &lt;bean id=&quot;umDataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\n        destroy-method=&quot;close&quot;&gt;\n        &lt;property name=&quot;driverClassName&quot; value=&quot;${db.um.driver:oracle.jdbc.OracleDriver}&quot; /&gt;\n        &lt;property name=&quot;url&quot; value=&quot;${db.um.url}&quot; /&gt;\n        &lt;property name=&quot;username&quot; value=&quot;${db.um.username}&quot; /&gt;\n        &lt;property name=&quot;password&quot; value=&quot;${db.um.password}&quot; /&gt;\n        &lt;property name=&quot;initialSize&quot; value=&quot;${db.connection.initialSize:10}&quot; /&gt;\n        &lt;property name=&quot;maxIdle&quot; value=&quot;-1&quot; /&gt;\n        &lt;property name=&quot;maxActive&quot; value=&quot;${db.connection.maxActive:100}&quot; /&gt;\n        &lt;property name=&quot;maxWait&quot; value=&quot;-1&quot; /&gt;\n        &lt;property name=&quot;validationQuery&quot; value=&quot;${db.validation.query:select 1 from dual}&quot; /&gt;\n        &lt;property name=&quot;testOnBorrow&quot; value=&quot;true&quot; /&gt;\n        &lt;property name=&quot;validationQueryTimeout&quot; value=&quot;5&quot; /&gt;\n        &lt;property name=&quot;connectionProperties&quot; value=&quot;oracle.jdbc.ReadTimeout=${db.read.timeout:60000};oracle.net.READ_TIMEOUT=${db.net.timeout:60000}&quot; /&gt;\n        \n    &lt;/bean&gt;\n\n    &lt;bean id=&quot;umJdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;\n        &lt;property name=&quot;dataSource&quot; ref=&quot;umDataSource&quot;&gt;\n\n        &lt;/property&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;umNamedJdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate&quot;&gt;\n        &lt;constructor-arg ref=&quot;umJdbcTemplate&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean class=&quot;org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor&quot;/&gt;\n    \n    \n   &lt;bean id=&quot;entityManagerFactory&quot;\n    class=&quot;org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean&quot;&gt;\n    &lt;property name=&quot;dataSource&quot; ref=&quot;umDataSource&quot;/&gt;\n    &lt;property name=&quot;jpaVendorAdapter&quot;&gt;\n      &lt;bean class=&quot;org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter&quot;&gt;\n        &lt;property name=&quot;generateDdl&quot; value=&quot;false&quot;/&gt;\n        &lt;property name=&quot;showSql&quot; value=&quot;false&quot; /&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n    &lt;property name=&quot;jpaProperties&quot;&gt;\n      &lt;props&gt;\n        &lt;prop key=&quot;hibernate.dialect&quot;&gt;org.hibernate.dialect.Oracle10gDialect&lt;/prop&gt;\n      &lt;/props&gt;\n    &lt;/property&gt;\n  &lt;/bean&gt;\n \n  &lt;bean id=&quot;transactionManager&quot;\n    class=&quot;org.springframework.orm.jpa.JpaTransactionManager&quot;\n    p:entityManagerFactory-ref=&quot;entityManagerFactory&quot; /&gt;\n \n    \n\n    &lt;bean name=&quot;internalLdapBean&quot; class=&quot;com.dhl.resp.authentication.LDAP&quot;&gt;\n        &lt;property name=&quot;ldapUrl&quot; value=&quot;${ldap.url}&quot; /&gt;\n        &lt;property name=&quot;ldapPrincipalSuffix&quot; value=&quot;${ldap.principalsuffix}&quot; /&gt;\n    &lt;/bean&gt;\n\n    &lt;bean name=&quot;externalLdapBean&quot; class=&quot;com.dhl.resp.authentication.LDAPAD&quot;&gt;\n        &lt;property name=&quot;ldapUrl&quot; value=&quot;${ldap_uag.url}&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean name=&quot;umDao&quot; class=&quot;com.dhl.resp.authentication.dao.UmDaoImpl&quot;&gt;\n        &lt;property name=&quot;umNamedJdbcTemplate&quot; ref=&quot;umNamedJdbcTemplate&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean name=&quot;umAuthenticationHandler&quot; class=&quot;com.dhl.resp.authentication.UmAuthenticationHandlerImpl&quot; &gt;\n        &lt;property name=&quot;umDao&quot; ref=&quot;umDao&quot; /&gt;\n        &lt;property name=&quot;internalLdap&quot; ref=&quot;internalLdapBean&quot; /&gt;\n        &lt;property name=&quot;externalLdap&quot; ref=&quot;externalLdapBean&quot; /&gt;\n        &lt;property name=&quot;skipLockedUsers&quot; value=&quot;${skip.locked.users.during.login:true}&quot; /&gt;\n    &lt;/bean&gt;\n    \n    &lt;bean id=&quot;SDCFilter&quot;\n    class=&quot;com.dhl.cas.support.SDCFilter&quot;/&gt;\n&lt;/beans&gt;\n</code></pre>\n<p>Error which it throws is :</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in file [/appl/dev_cas/webapps/cas/WEB-INF/classes/META-INF/applicationContext-beans.xml]: Invocation of init method failed; nested exception is java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1154)\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:908)\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:401)\n        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:292)\n        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:103)\n        at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody0(SafeContextLoaderListener.java:75)\n        at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized_aroundBody1$advice(SafeContextLoaderListener.java:57)\n        at org.jasig.cas.web.init.SafeContextLoaderListener.contextInitialized(SafeContextLoaderListener.java:1)\n        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4678)\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5139)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:717)\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:690)\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:705)\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:978)\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1848)\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:773)\n        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:427)\n        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1576)\n        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:309)\n        at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n        at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n        at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:936)\n        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:841)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1384)\n        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1374)\n        at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n        at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n        at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:909)\n        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:262)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:421)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:633)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.lang.reflect.Method.invoke(Method.java:498)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:343)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:474)\nCaused by: java.lang.ClassCastException: com.sun.proxy.$Proxy40 cannot be cast to javax.persistence.EntityManagerFactory\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.createEntityManagerFactoryProxy(AbstractEntityManagerFactoryBean.java:464)\n        at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:403)\n        at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:341)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n        ... 56 more\n</code></pre>\n<p>Can someone plese give me a tip how to solve this issue? Thanks</p>\n<p>My mvn dependency:tree</p>\n<pre><code>   com.dhl.cas:cas:war:3.0.10.0\n[INFO] +- com.dhl.resp:authentication-core:jar:1.0.9.0:compile\n[INFO] |  +- org.springframework:spring-jdbc:jar:5.3.18:compile\n[INFO] |  +- org.springframework.ldap:spring-ldap-core:jar:1.3.2.RELEASE:compile\n[INFO] |  +- org.json:json:jar:20090211:compile\n[INFO] |  \\- com.microsoft.azure:adal4j:jar:1.1.1:compile\n[INFO] |     +- com.nimbusds:oauth2-oidc-sdk:jar:4.5:compile\n[INFO] |     |  +- javax.mail:mail:jar:1.4.1:compile\n[INFO] |     |  |  \\- javax.activation:activation:jar:1.1:compile\n[INFO] |     |  +- net.jcip:jcip-annotations:jar:1.0:compile\n[INFO] |     |  +- net.minidev:json-smart:jar:1.1.1:compile\n[INFO] |     |  +- com.nimbusds:lang-tag:jar:1.4:compile\n[INFO] |     |  \\- com.nimbusds:nimbus-jose-jwt:jar:3.1.2:compile\n[INFO] |     \\- com.google.code.gson:gson:jar:2.2.4:compile\n[INFO] +- junit:junit:jar:4.8.2:test\n[INFO] +- org.hibernate:hibernate-core:jar:5.1.4.Final:compile\n[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.3.0.Final:compile\n[INFO] |  +- org.hibernate.javax.persistence:hibernate-jpa-2.1-api:jar:1.0.0.Final:compile\n[INFO] |  +- org.javassist:javassist:jar:3.20.0-GA:compile\n[INFO] |  +- antlr:antlr:jar:2.7.7:compile\n[INFO] |  +- org.apache.geronimo.specs:geronimo-jta_1.1_spec:jar:1.1.1:compile\n[INFO] |  +- org.jboss:jandex:jar:2.0.3.Final:compile\n[INFO] |  +- com.fasterxml:classmate:jar:1.3.0:compile\n[INFO] |  +- dom4j:dom4j:jar:1.6.1:compile\n[INFO] |  \\- org.hibernate.common:hibernate-commons-annotations:jar:5.0.1.Final:compile\n[INFO] +- org.hibernate:hibernate-entitymanager:jar:5.1.4.Final:compile\n[INFO] +- org.jasig.cas:cas-server-webapp:war:3.5.0:compile\n[INFO] +- com.github.inspektr:inspektr-audit:jar:1.0.7.GA:compile\n[INFO] |  \\- org.aspectj:aspectjrt:jar:1.6.9:compile\n[INFO] +- com.github.inspektr:inspektr-common:jar:1.0.7.GA:compile\n[INFO] +- com.github.inspektr:inspektr-support-spring:jar:1.0.7.GA:compile\n[INFO] |  \\- com.github.inspektr:inspektr-error:jar:1.0.7.GA:compile\n[INFO] +- org.springframework.security:spring-security-cas:jar:4.2.3.RELEASE:compile\n[INFO] |  +- org.jasig.cas.client:cas-client-core:jar:3.4.1:compile\n[INFO] |  +- org.springframework.security:spring-security-core:jar:4.2.3.RELEASE:compile\n[INFO] |  \\- org.springframework.security:spring-security-web:jar:4.2.3.RELEASE:compile\n[INFO] +- javax.servlet:servlet-api:jar:2.5:provided\n[INFO] +- jstl:jstl:jar:1.2:compile\n[INFO] +- commons-dbcp:commons-dbcp:jar:1.4:runtime\n[INFO] |  \\- commons-pool:commons-pool:jar:1.5.4:runtime\n[INFO] +- javax.validation:validation-api:jar:1.0.0.GA:compile\n[INFO] +- com.oracle:ojdbc7:jar:12.1.0.1.0:runtime\n[INFO] +- org.hsqldb:hsqldb:jar:2.2.9:test\n[INFO] +- net.sf.opencsv:opencsv:jar:2.0:compile\n[INFO] +- org.jasig.cas:cas-server-core:jar:3.5.0:provided\n[INFO] |  +- org.jasig.service:person-directory-impl:jar:1.5.0-RC6:provided\n[INFO] |  |  +- com.sun.xml.bind:jaxb-impl:jar:2.1.12:provided\n[INFO] |  |  |  \\- javax.xml.bind:jaxb-api:jar:2.1:provided\n[INFO] |  |  |     \\- javax.xml.stream:stax-api:jar:1.0-2:provided\n[INFO] |  |  +- commons-collections:commons-collections:jar:3.2.1:compile\n[INFO] |  |  \\- org.jasig.service:person-directory-api:jar:1.5.0-RC6:provided\n[INFO] |  +- commons-codec:commons-codec:jar:1.4:compile\n[INFO] |  +- jdom:jdom:jar:1.0:provided\n[INFO] |  +- org.apache.santuario:xmlsec:jar:1.4.3:compile\n[INFO] |  +- javax.xml:xmldsig:jar:1.0:provided\n[INFO] |  +- org.perf4j:perf4j:jar:log4jonly:0.9.14:provided\n[INFO] |  +- org.springframework.webflow:spring-webflow:jar:2.3.0.RELEASE:provided\n[INFO] |  |  +- org.springframework.webflow:spring-binding:jar:2.3.0.RELEASE:provided\n[INFO] |  |  \\- org.springframework.webflow:spring-js:jar:2.3.0.RELEASE:provided\n[INFO] |  |     \\- org.springframework.webflow:spring-js-resources:jar:2.3.0.RELEASE:provided\n[INFO] |  +- commons-jexl:commons-jexl:jar:1.1:provided\n[INFO] |  +- commons-io:commons-io:jar:2.0:compile\n[INFO] |  \\- org.aspectj:aspectjweaver:jar:1.6.9:compile\n[INFO] +- org.springframework:spring-tx:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-webmvc:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-core:jar:5.3.18:compile\n[INFO] |  \\- org.springframework:spring-jcl:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-orm:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-web:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-expression:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-aop:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-aspects:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-test:jar:5.3.18:test\n[INFO] +- org.springframework:spring-jms:jar:5.3.18:compile\n[INFO] |  \\- org.springframework:spring-messaging:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-context:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-context-support:jar:5.3.18:compile\n[INFO] +- org.springframework:spring-beans:jar:5.3.18:compile\n[INFO] +- org.springframework.security:spring-security-config:jar:4.2.3.RELEASE:compile\n[INFO] |  \\- aopalliance:aopalliance:jar:1.0:compile\n[INFO] +- org.springframework.security.extensions:spring-security-saml2-core:jar:1.0.10.RELEASE:compile\n[INFO] |  +- com.narupley:not-going-to-be-commons-ssl:jar:0.3.20:compile\n[INFO] |  |  +- org.bouncycastle:bcprov-ext-jdk15on:jar:1.60:compile\n[INFO] |  |  \\- commons-httpclient:commons-httpclient:jar:3.1:compile\n[INFO] |  +- org.apache.velocity:velocity-engine-core:jar:2.0:compile\n[INFO] |  |  \\- org.apache.commons:commons-lang3:jar:3.5:compile\n[INFO] |  +- org.bouncycastle:bcpkix-jdk15on:jar:1.64:compile\n[INFO] |  +- org.bouncycastle:bcprov-jdk15on:jar:1.64:compile\n[INFO] |  +- org.opensaml:opensaml:jar:2.6.6:compile\n[INFO] |  |  \\- org.opensaml:openws:jar:1.5.6:compile\n[INFO] |  |     \\- org.opensaml:xmltooling:jar:1.4.6:compile\n[INFO] |  +- org.owasp.esapi:esapi:jar:2.2.0.0:compile\n[INFO] |  |  +- com.io7m.xom:xom:jar:1.2.10:compile\n[INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.3:compile\n[INFO] |  |  +- org.apache.commons:commons-collections4:jar:4.2:compile\n[INFO] |  |  +- org.apache-extras.beanshell:bsh:jar:2.0b6:compile\n[INFO] |  |  \\- xerces:xercesImpl:jar:2.12.0:compile\n[INFO] |  +- xalan:xalan:jar:2.7.2:compile\n[INFO] |  |  \\- xalan:serializer:jar:2.7.2:compile\n[INFO] |  \\- xml-apis:xml-apis:jar:1.4.01:compile\n[INFO] +- org.apache.httpcomponents:httpclient:jar:4.4:compile\n[INFO] |  +- org.apache.httpcomponents:httpcore:jar:4.4:compile\n[INFO] |  \\- commons-logging:commons-logging:jar:1.2:compile\n[INFO] +- javax.persistence:javax.persistence-api:jar:2.2:compile\n[INFO] +- commons-lang:commons-lang:jar:2.5:compile\n[INFO] +- com.google.guava:guava:jar:r07:compile\n[INFO] +- joda-time:joda-time:jar:1.6.2:compile\n[INFO] +- org.slf4j:slf4j-api:jar:1.5.8:compile\n[INFO] +- org.slf4j:slf4j-log4j12:jar:1.5.8:runtime\n[INFO] +- log4j:log4j:jar:1.2.16:compile\n[INFO] +- org.slf4j:jcl-over-slf4j:jar:1.5.8:runtime\n[INFO] +- org.slf4j:jul-to-slf4j:jar:1.5.8:runtime\n[INFO] \\- com.google.code.findbugs:jsr305:jar:1.3.9:compile\n</code></pre>\n"},{"tags":["java","spring-boot","datasource","hikaricp"],"owner":{"account_id":10133926,"reputation":131,"user_id":7486210,"accept_rate":50,"display_name":"Ebad"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686668487,"creation_date":1686606614,"question_id":76460530,"body_markdown":"I am trying to implement DataSource in my Spring Boot (2.3.5.RELEASE with Spring Cloud Hoxton.RELEASE) project.\r\n\r\nI have to programmatically set the DataSource&#39;s url, username, and password, depending on the environment the app is running in. Also, the values must be loaded from a KV store first.\r\n\r\nHowever, the DataSource is not being set by the `@Bean`. I get this error:\r\n```\r\nFailed to configure a DataSource: &#39;url&#39; attribute is not specified and no embedded datasource could be configured.\r\n```\r\n\r\nIf I change the name of the Bean method to `dataSource`, then I get an error that a Bean with that name already exists.\r\n\r\nFor the password, an AWS IAM token needs to be generated, so I can&#39;t just put the password in the application.properties file.\r\n\r\napplication.properties:\r\n```\r\nspring.jpa.hibernate.database-platform=org.hibernate.dialect.PostgreSQLDialectDialect\r\n```\r\n\r\nMy Config file:\r\n```\r\n@Configuration\r\n@RefreshScope\r\n@DependsOn(&quot;appConfiguration&quot;)\r\npublic class MyDBConfig extends HikariConfig {\r\n\r\n\t@Value(&quot;${db.host}&quot;)\r\n\tprivate String host;\r\n\r\n\t@Value(&quot;${db.name}&quot;)\r\n\tprivate String databaseName;\r\n\r\n\t@Value(&quot;${db.port}&quot;)\r\n\tprivate String port;\r\n\r\n\t@Value(&quot;${db.username}&quot;)\r\n\tprivate String username;\r\n\r\n\t@Bean\r\n\t@Primary\r\n\tpublic HikariDataSource getDataSource() {\r\n\t\t\r\n\t\ttry {\r\n            DataSourceBuilder&lt;HikariDataSource&gt; dataSourceBuilder = DataSourceBuilder.create().type(HikariDataSource.class);\r\n\r\n\t\t\tdataSourceBuilder.url(&quot;jdbc:postgresql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + databaseName);\r\n\t\t\tdataSourceBuilder.username(username);\r\n\t\t\tdataSourceBuilder.password(AwsRdsTokenGenerator.getIAMAuthToken());\r\n\r\n\t\t\treturn dataSourceBuilder.build();\r\n\t\t} catch (Exception e) {\r\n\t\t\tlog.error(&quot;Unable to set up DataSource: &quot; + e.getMessage());\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\nThis is the error I printed above. If I rename the method to just `dataSource` then I get the other error (already exists).\r\n\r\nHow do I set up my DataSource after I pull the values I need?\r\n\r\nThanks for the help!","title":"Can&#39;t set up DataSource for Spring Boot project","body":"<p>I am trying to implement DataSource in my Spring Boot (2.3.5.RELEASE with Spring Cloud Hoxton.RELEASE) project.</p>\n<p>I have to programmatically set the DataSource's url, username, and password, depending on the environment the app is running in. Also, the values must be loaded from a KV store first.</p>\n<p>However, the DataSource is not being set by the <code>@Bean</code>. I get this error:</p>\n<pre><code>Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.\n</code></pre>\n<p>If I change the name of the Bean method to <code>dataSource</code>, then I get an error that a Bean with that name already exists.</p>\n<p>For the password, an AWS IAM token needs to be generated, so I can't just put the password in the application.properties file.</p>\n<p>application.properties:</p>\n<pre><code>spring.jpa.hibernate.database-platform=org.hibernate.dialect.PostgreSQLDialectDialect\n</code></pre>\n<p>My Config file:</p>\n<pre><code>@Configuration\n@RefreshScope\n@DependsOn(&quot;appConfiguration&quot;)\npublic class MyDBConfig extends HikariConfig {\n\n    @Value(&quot;${db.host}&quot;)\n    private String host;\n\n    @Value(&quot;${db.name}&quot;)\n    private String databaseName;\n\n    @Value(&quot;${db.port}&quot;)\n    private String port;\n\n    @Value(&quot;${db.username}&quot;)\n    private String username;\n\n    @Bean\n    @Primary\n    public HikariDataSource getDataSource() {\n        \n        try {\n            DataSourceBuilder&lt;HikariDataSource&gt; dataSourceBuilder = DataSourceBuilder.create().type(HikariDataSource.class);\n\n            dataSourceBuilder.url(&quot;jdbc:postgresql://&quot; + host + &quot;:&quot; + port + &quot;/&quot; + databaseName);\n            dataSourceBuilder.username(username);\n            dataSourceBuilder.password(AwsRdsTokenGenerator.getIAMAuthToken());\n\n            return dataSourceBuilder.build();\n        } catch (Exception e) {\n            log.error(&quot;Unable to set up DataSource: &quot; + e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>This is the error I printed above. If I rename the method to just <code>dataSource</code> then I get the other error (already exists).</p>\n<p>How do I set up my DataSource after I pull the values I need?</p>\n<p>Thanks for the help!</p>\n"},{"tags":["java","regex","string","formatting"],"comments":[{"owner":{"account_id":18191790,"reputation":1488,"user_id":13237531,"display_name":"Vladimir Stanciu"},"score":0,"creation_date":1599138520,"post_id":63724240,"comment_id":112685470,"body_markdown":"Split the string by ; to separate your different schedules, then split the obtained string by : to separate the days from the time entries, and finally split the new strings by , to get each day and each time entry.","body":"Split the string by ; to separate your different schedules, then split the obtained string by : to separate the days from the time entries, and finally split the new strings by , to get each day and each time entry."},{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1599138635,"post_id":63724240,"comment_id":112685526,"body_markdown":"Looks like you are looking to create a regex, but do not know where to get started. Please check [Reference - What does this regex mean](https://stackoverflow.com/questions/22937618) resource, it has plenty of hints. Also, refer to [Learning Regular Expressions](https://stackoverflow.com/questions/4736) post for some basic regex info. Once you get some expression ready and still have issues with the solution, please edit the question with the latest details and we&#39;ll be glad to help you fix the problem.","body":"Looks like you are looking to create a regex, but do not know where to get started. Please check <a href=\"https://stackoverflow.com/questions/22937618\">Reference - What does this regex mean</a> resource, it has plenty of hints. Also, refer to <a href=\"https://stackoverflow.com/questions/4736\">Learning Regular Expressions</a> post for some basic regex info. Once you get some expression ready and still have issues with the solution, please edit the question with the latest details and we&#39;ll be glad to help you fix the problem."},{"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"score":0,"creation_date":1599138923,"post_id":63724240,"comment_id":112685681,"body_markdown":"Or, better yet, don&#39;t use regex.","body":"Or, better yet, don&#39;t use regex."}],"answers":[{"tags":[],"owner":{"account_id":3430916,"reputation":3799,"user_id":3059385,"accept_rate":40,"display_name":"Christopher Schneider"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1599138513,"creation_date":1599138513,"answer_id":63724343,"question_id":63724240,"body_markdown":"It&#39;s well formatted. There&#39;s no regex needed. Split by `;` to start with. Then split those results by `:`. From there you&#39;re left with two comma separated values where index 0 will be days of week, and index 1 will be store hours, which you&#39;ll split each by `,`.","title":"Best way to extract data from this kind of String","body":"<p>It's well formatted. There's no regex needed. Split by <code>;</code> to start with. Then split those results by <code>:</code>. From there you're left with two comma separated values where index 0 will be days of week, and index 1 will be store hours, which you'll split each by <code>,</code>.</p>\n"}],"owner":{"account_id":14325595,"reputation":91,"user_id":10347787,"display_name":"mackesmilian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1686668479,"creation_date":1599138142,"question_id":63724240,"body_markdown":"This is a really simple question, yet somehow it&#39;s got me thinking. I have opening hours formatted in this way: `[MO,TU:0800-1230,1300-1700;WE:0800-1230;TH:0800-1230,1400-1700;FR:0800-1230,1300-1500;SA,SU:0800-1500]`. The string can have one time entry per day, but it doesn&#39;t have to, as you can see.\r\n\r\nI need to extract each day and save it to the corresponding day field field (which is just a String like `HH:mm-HH:mm`) of an `OpeningHrs` class. What would be the best way to go at this? I&#39;m not looking for code, just a suggestion on what the cleanest way would be to achieve my goal, bcause all solutions going through my head seem needlessly complicated. \r\n","title":"Best way to extract data from this kind of String","body":"<p>This is a really simple question, yet somehow it's got me thinking. I have opening hours formatted in this way: <code>[MO,TU:0800-1230,1300-1700;WE:0800-1230;TH:0800-1230,1400-1700;FR:0800-1230,1300-1500;SA,SU:0800-1500]</code>. The string can have one time entry per day, but it doesn't have to, as you can see.</p>\n<p>I need to extract each day and save it to the corresponding day field field (which is just a String like <code>HH:mm-HH:mm</code>) of an <code>OpeningHrs</code> class. What would be the best way to go at this? I'm not looking for code, just a suggestion on what the cleanest way would be to achieve my goal, bcause all solutions going through my head seem needlessly complicated.</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":4739783,"reputation":612633,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1600705087,"post_id":63996164,"comment_id":113165096,"body_markdown":"Looks like you are looking to create a regex, but do not know where to get started. Please check [Reference - What does this regex mean](https://stackoverflow.com/questions/22937618) resource, it has plenty of hints. Also, refer to [Learning Regular Expressions](https://stackoverflow.com/questions/4736) post for some basic regex info. Once you get some expression ready and still have issues with the solution, please edit the question with the latest details and we&#39;ll be glad to help you fix the problem.","body":"Looks like you are looking to create a regex, but do not know where to get started. Please check <a href=\"https://stackoverflow.com/questions/22937618\">Reference - What does this regex mean</a> resource, it has plenty of hints. Also, refer to <a href=\"https://stackoverflow.com/questions/4736\">Learning Regular Expressions</a> post for some basic regex info. Once you get some expression ready and still have issues with the solution, please edit the question with the latest details and we&#39;ll be glad to help you fix the problem."},{"owner":{"account_id":307579,"reputation":1692,"user_id":618951,"accept_rate":94,"display_name":"RisingSun"},"score":0,"creation_date":1600705138,"post_id":63996164,"comment_id":113165117,"body_markdown":"why not use something that is already built in? https://stackoverflow.com/questions/21545912/url-parsing-in-java","body":"why not use something that is already built in? <a href=\"https://stackoverflow.com/questions/21545912/url-parsing-in-java\">stackoverflow.com/questions/21545912/url-parsing-in-java</a>"}],"answers":[{"tags":[],"owner":{"account_id":2094057,"reputation":506144,"user_id":1863229,"accept_rate":58,"display_name":"Tim Biegeleisen"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1600705076,"creation_date":1600705076,"answer_id":63996204,"question_id":63996164,"body_markdown":"You could split on a regex alternation of slash or equals:\r\n\r\n    String test = &quot;/test/example=1244&quot;;\r\n    String output = test.split(&quot;[/=]&quot;)[2];\r\n    System.out.println(output);\r\n\r\nThis prints:\r\n\r\n    example","title":"Regex to extract string after second slash and = in java","body":"<p>You could split on a regex alternation of slash or equals:</p>\n<pre><code>String test = &quot;/test/example=1244&quot;;\nString output = test.split(&quot;[/=]&quot;)[2];\nSystem.out.println(output);\n</code></pre>\n<p>This prints:</p>\n<pre><code>example\n</code></pre>\n"}],"owner":{"account_id":19559929,"reputation":193,"user_id":14313355,"display_name":"wazza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":940,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63996204,"answer_count":1,"score":1,"last_activity_date":1686668398,"creation_date":1600704887,"question_id":63996164,"body_markdown":"I am trying to extract a the substring between the second slash and the first = character. Currently I&#39;m using split to achieve this. How can I use regex to do this?. Thanks in advance.\r\n\r\ninput - &quot;/test/example=1244\r\noutput- example\r\n\r\nThis is what I&#39;m using currently:\r\n\r\n    String test= inputString.split(&quot;/&quot;)[2].split(&quot;=&quot;)[0];","title":"Regex to extract string after second slash and = in java","body":"<p>I am trying to extract a the substring between the second slash and the first = character. Currently I'm using split to achieve this. How can I use regex to do this?. Thanks in advance.</p>\n<p>input - &quot;/test/example=1244\noutput- example</p>\n<p>This is what I'm using currently:</p>\n<pre><code>String test= inputString.split(&quot;/&quot;)[2].split(&quot;=&quot;)[0];\n</code></pre>\n"},{"tags":["java","operating-system","file-ownership"],"owner":{"account_id":18127469,"reputation":33,"user_id":13182882,"display_name":"Janny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1686668080,"creation_date":1686668080,"question_id":76466215,"body_markdown":"I working with a web project that will be deployed with root, but the files created must be under another owner.\r\n\r\nI have tried this:\r\n```\r\nString owner = &quot;currentUser&quot;;\r\nPath p = Files.createFile(Paths.get(&quot;myFile.log&quot;));\r\n\r\nif (owner != null &amp;&amp; !owner.isEmpty()) {\r\n     UserPrincipalLookupService lookupService = FileSystems.getDefault().getUserPrincipalLookupService();\r\n     UserPrincipal userPrincipal = lookupService.lookupPrincipalByName(owner);\r\n     Files.setOwner(p, userPrincipal);\r\n}\r\n```\r\n\r\nHowever, I encounter AccessDeniedException with setOwner() method.\r\n```\r\njava.nio.file.AccessDeniedException: myFile.log\r\n\tat java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\r\n\tat java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\r\n\tat java.base/sun.nio.fs.WindowsAclFileAttributeView.setOwner(WindowsAclFileAttributeView.java:201)\r\n\tat java.base/sun.nio.fs.FileOwnerAttributeViewImpl.setOwner(FileOwnerAttributeViewImpl.java:102)\r\n\tat java.base/java.nio.file.Files.setOwner(Files.java:2163)\r\n```\r\n\r\nThe OS is Window and this code is running with Tomcat and Intellij. The owner that I&#39;m trying to set is the current user of my PC since I just want to test the function setOwner().\r\n\r\nDo anyone have an idea why this exception is raised and how to fix it? Thank you in advance!\r\n","title":"AccessDeniedException with Files.setOwner(p, user)","body":"<p>I working with a web project that will be deployed with root, but the files created must be under another owner.</p>\n<p>I have tried this:</p>\n<pre><code>String owner = &quot;currentUser&quot;;\nPath p = Files.createFile(Paths.get(&quot;myFile.log&quot;));\n\nif (owner != null &amp;&amp; !owner.isEmpty()) {\n     UserPrincipalLookupService lookupService = FileSystems.getDefault().getUserPrincipalLookupService();\n     UserPrincipal userPrincipal = lookupService.lookupPrincipalByName(owner);\n     Files.setOwner(p, userPrincipal);\n}\n</code></pre>\n<p>However, I encounter AccessDeniedException with setOwner() method.</p>\n<pre><code>java.nio.file.AccessDeniedException: myFile.log\n    at java.base/sun.nio.fs.WindowsException.translateToIOException(WindowsException.java:89)\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:103)\n    at java.base/sun.nio.fs.WindowsException.rethrowAsIOException(WindowsException.java:108)\n    at java.base/sun.nio.fs.WindowsAclFileAttributeView.setOwner(WindowsAclFileAttributeView.java:201)\n    at java.base/sun.nio.fs.FileOwnerAttributeViewImpl.setOwner(FileOwnerAttributeViewImpl.java:102)\n    at java.base/java.nio.file.Files.setOwner(Files.java:2163)\n</code></pre>\n<p>The OS is Window and this code is running with Tomcat and Intellij. The owner that I'm trying to set is the current user of my PC since I just want to test the function setOwner().</p>\n<p>Do anyone have an idea why this exception is raised and how to fix it? Thank you in advance!</p>\n"},{"tags":["java","ping","host"],"comments":[{"owner":{"account_id":1467065,"reputation":1235,"user_id":1379627,"display_name":"Jenny D"},"score":4,"creation_date":1342448550,"post_id":11506321,"comment_id":15202988,"body_markdown":"Is it possible to ping that server if you&#39;re using ping directly?","body":"Is it possible to ping that server if you&#39;re using ping directly?"},{"owner":{"account_id":38424,"reputation":5839,"user_id":110255,"accept_rate":83,"display_name":"chrisbunney"},"score":0,"creation_date":1342448645,"post_id":11506321,"comment_id":15203029,"body_markdown":"What input are you entering into jTextField1?","body":"What input are you entering into jTextField1?"},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342448667,"post_id":11506321,"comment_id":15203046,"body_markdown":"Yes  !!! but in my program I can only ping localhost !!!","body":"Yes  !!! but in my program I can only ping localhost !!!"},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342448745,"post_id":11506321,"comment_id":15203081,"body_markdown":"I increased the timeout to 10 seconds but didn&#39;t work","body":"I increased the timeout to 10 seconds but didn&#39;t work"},{"owner":{"account_id":1525734,"reputation":4411,"user_id":1424229,"display_name":"Rob Wagner"},"score":0,"creation_date":1342448862,"post_id":11506321,"comment_id":15203145,"body_markdown":"Check how your ipaddress is printing out, is it properly formatted for  `INetAddress.getByName();`?","body":"Check how your ipaddress is printing out, is it properly formatted for  <code>INetAddress.getByName();</code>?"},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342448875,"post_id":11506321,"comment_id":15203153,"body_markdown":"I&#39;m entering the exact IP address , it is working for 127.0.0.1 but form example for 173.194.32.38 is not working , and says &quot;the host is Unreachable &quot;","body":"I&#39;m entering the exact IP address , it is working for 127.0.0.1 but form example for 173.194.32.38 is not working , and says &quot;the host is Unreachable &quot;"},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342449068,"post_id":11506321,"comment_id":15203251,"body_markdown":"if the input was not correct , so that could not ping 127.0.0.1 !!!","body":"if the input was not correct , so that could not ping 127.0.0.1 !!!"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":2,"creation_date":1342449315,"post_id":11506321,"comment_id":15203365,"body_markdown":"@user1529128 I have edited your question with a simple example that reproduces the behaviour you describe. Feel free to roll back the edit if you don&#39;t think it is what you are asking.","body":"@user1529128 I have edited your question with a simple example that reproduces the behaviour you describe. Feel free to roll back the edit if you don&#39;t think it is what you are asking."},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":4,"creation_date":1342449807,"post_id":11506321,"comment_id":15203576,"body_markdown":"@ assylias : thank you for your nice edit ! I&#39;m new at stackoverflow and this was my firs question . thank you for helping me.","body":"@ assylias : thank you for your nice edit ! I&#39;m new at stackoverflow and this was my firs question . thank you for helping me."},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342450205,"post_id":11506321,"comment_id":15203752,"body_markdown":"@dystroy I tested with google ip address or any other valid ip , that&#39;s only working for 127.0.0.0/24 and 192.168.0.0/24","body":"@dystroy I tested with google ip address or any other valid ip , that&#39;s only working for 127.0.0.0/24 and 192.168.0.0/24"},{"owner":{"account_id":97082,"reputation":375036,"user_id":263525,"accept_rate":85,"display_name":"Denys S&#233;guret"},"score":0,"creation_date":1342451403,"post_id":11506321,"comment_id":15204378,"body_markdown":"It seems you can&#39;t access the external network from your program (192.168 are on your LAN). As you can with other software, we can be pretty confident it&#39;s a local (meaning on your computer) firewall/router/dns problem.","body":"It seems you can&#39;t access the external network from your program (192.168 are on your LAN). As you can with other software, we can be pretty confident it&#39;s a local (meaning on your computer) firewall/router/dns problem."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1342451642,"post_id":11506321,"comment_id":15204505,"body_markdown":"possible duplicate of [Why does InetAddress.isReachable return false, when I can ping the IP address?](http://stackoverflow.com/questions/9922543/why-does-inetaddress-isreachable-return-false-when-i-can-ping-the-ip-address)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/9922543/why-does-inetaddress-isreachable-return-false-when-i-can-ping-the-ip-address\">Why does InetAddress.isReachable return false, when I can ping the IP address?</a>"},{"owner":{"account_id":1072639,"reputation":4508,"user_id":1071545,"accept_rate":60,"display_name":"Ahmad Arslan"},"score":0,"creation_date":1392189605,"post_id":11506321,"comment_id":32846505,"body_markdown":"Ping Problem Is solved for me.\r\nUse this link.\r\nhttp://stackoverflow.com/questions/21479968/android-ping-icmp-open-socket-operation-not-permitted/21720351#21720351","body":"Ping Problem Is solved for me.  Use this link.  <a href=\"http://stackoverflow.com/questions/21479968/android-ping-icmp-open-socket-operation-not-permitted/21720351#21720351\" title=\"android ping icmp open socket operation not permitted\">stackoverflow.com/questions/21479968/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342450459,"post_id":11506847,"comment_id":15203868,"body_markdown":"I&#39;m sure I&#39;m connected and I have even disabled my firewall and antivirus , but still it&#39;s not working ...","body":"I&#39;m sure I&#39;m connected and I have even disabled my firewall and antivirus , but still it&#39;s not working ..."},{"owner":{"account_id":143651,"reputation":19969,"user_id":352131,"accept_rate":77,"display_name":"Durandal"},"score":0,"creation_date":1342451105,"post_id":11506847,"comment_id":15204215,"body_markdown":"It may still be your machine. What OS are you on? Have you tried the getByAddress() instead of getByName() method to ensure no reverse DNS lookup is attempted?","body":"It may still be your machine. What OS are you on? Have you tried the getByAddress() instead of getByName() method to ensure no reverse DNS lookup is attempted?"},{"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"score":0,"creation_date":1342451910,"post_id":11506847,"comment_id":15204623,"body_markdown":"@ Durandal I&#39;m using win7 and yes ! I tried getByAddress() instead of getByName() , There was no DNS lookup attempt , don&#39;t tell me there is no way for me please !","body":"@ Durandal I&#39;m using win7 and yes ! I tried getByAddress() instead of getByName() , There was no DNS lookup attempt , don&#39;t tell me there is no way for me please !"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1342451966,"post_id":11506847,"comment_id":15204653,"body_markdown":"@Durandal I can see the same behaviour as described by the OP and using getByAddress does not make a difference. I have posted a comment with a possible duplicate of the issue.","body":"@Durandal I can see the same behaviour as described by the OP and using getByAddress does not make a difference. I have posted a comment with a possible duplicate of the issue."},{"owner":{"account_id":1487149,"reputation":240,"user_id":1395129,"accept_rate":50,"display_name":"Vamsi Pavan Mahesh"},"score":1,"creation_date":1374410544,"post_id":11506847,"comment_id":25920725,"body_markdown":"@Durandal: why we need to type cast the ipaddress to byte in the second example , you have given ?","body":"@Durandal: why we need to type cast the ipaddress to byte in the second example , you have given ?"},{"owner":{"account_id":143651,"reputation":19969,"user_id":352131,"accept_rate":77,"display_name":"Durandal"},"score":3,"creation_date":1374514010,"post_id":11506847,"comment_id":25957850,"body_markdown":"@vamsi Because the IP is given as literals, and literals are considered to be of type int by the compiler. Because the value range of byte is -128 to 127, values outside that range require an explicit cast (e.g. literal 173). The &quot;why&quot; is rooted in javas byte being signed and IP addresses usually presented as unsigned bytes for readability.","body":"@vamsi Because the IP is given as literals, and literals are considered to be of type int by the compiler. Because the value range of byte is -128 to 127, values outside that range require an explicit cast (e.g. literal 173). The &quot;why&quot; is rooted in javas byte being signed and IP addresses usually presented as unsigned bytes for readability."}],"tags":[],"owner":{"account_id":143651,"reputation":19969,"user_id":352131,"accept_rate":77,"display_name":"Durandal"},"comment_count":6,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1342451006,"creation_date":1342450292,"answer_id":11506847,"question_id":11506321,"body_markdown":"Check your connectivity. On my Computer this prints REACHABLE for both IP&#39;s:\r\n\r\n&gt;Sending Ping Request to 127.0.0.1&lt;br&gt;\r\n&gt;Host is reachable&lt;br&gt;\r\n&gt;Sending Ping Request to 173.194.32.38&lt;br&gt;\r\n&gt;Host is reachable\r\n\r\nEDIT:\r\n\r\nYou could try modifying the code to use getByAddress() to obtain the address:\r\n\r\n\tpublic static void main(String[] args) throws UnknownHostException, IOException {\r\n\t    InetAddress inet;\r\n\t    \r\n\t    inet = InetAddress.getByAddress(new byte[] { 127, 0, 0, 1 });\r\n\t    System.out.println(&quot;Sending Ping Request to &quot; + inet);\r\n\t    System.out.println(inet.isReachable(5000) ? &quot;Host is reachable&quot; : &quot;Host is NOT reachable&quot;);\r\n\t\r\n\t    inet = InetAddress.getByAddress(new byte[] { (byte) 173, (byte) 194, 32, 38 });\r\n\t    System.out.println(&quot;Sending Ping Request to &quot; + inet);\r\n\t    System.out.println(inet.isReachable(5000) ? &quot;Host is reachable&quot; : &quot;Host is NOT reachable&quot;);\r\n\t}\r\n\r\nThe getByName() methods may attempt some kind of reverse DNS lookup which may not be possible on your machine, getByAddress() might bypass that.\r\n","title":"How to ping an IP address","body":"<p>Check your connectivity. On my Computer this prints REACHABLE for both IP's:</p>\n\n<blockquote>\n  <p>Sending Ping Request to 127.0.0.1<br>\n  Host is reachable<br>\n  Sending Ping Request to 173.194.32.38<br>\n  Host is reachable</p>\n</blockquote>\n\n<p>EDIT:</p>\n\n<p>You could try modifying the code to use getByAddress() to obtain the address:</p>\n\n<pre><code>public static void main(String[] args) throws UnknownHostException, IOException {\n    InetAddress inet;\n\n    inet = InetAddress.getByAddress(new byte[] { 127, 0, 0, 1 });\n    System.out.println(\"Sending Ping Request to \" + inet);\n    System.out.println(inet.isReachable(5000) ? \"Host is reachable\" : \"Host is NOT reachable\");\n\n    inet = InetAddress.getByAddress(new byte[] { (byte) 173, (byte) 194, 32, 38 });\n    System.out.println(\"Sending Ping Request to \" + inet);\n    System.out.println(inet.isReachable(5000) ? \"Host is reachable\" : \"Host is NOT reachable\");\n}\n</code></pre>\n\n<p>The getByName() methods may attempt some kind of reverse DNS lookup which may not be possible on your machine, getByAddress() might bypass that.</p>\n"},{"comments":[{"owner":{"account_id":550474,"reputation":319,"user_id":915022,"accept_rate":47,"display_name":"Ravindranath Akila"},"score":0,"creation_date":1392263424,"post_id":11507829,"comment_id":32888972,"body_markdown":"I might now be out of context, but this is what worked for me, very well in fact:\n\nhttp://www.dnsjava.org/\n\n\nThanks everybody.","body":"I might now be out of context, but this is what worked for me, very well in fact:  <a href=\"http://www.dnsjava.org/\" rel=\"nofollow noreferrer\">dnsjava.org</a>   Thanks everybody."},{"owner":{"account_id":421805,"reputation":685,"user_id":800227,"accept_rate":40,"display_name":"Igor Zubchenok"},"score":6,"creation_date":1461270355,"post_id":11507829,"comment_id":61135844,"body_markdown":"There are better answers below","body":"There are better answers below"},{"owner":{"account_id":2256125,"reputation":1387,"user_id":2172566,"display_name":"forresthopkinsa"},"score":0,"creation_date":1486154571,"post_id":11507829,"comment_id":71239904,"body_markdown":"@AhmadArslan whatever answer you used to have posted at that link, it&#39;s gone now. So the link isn&#39;t really helpful anymore... you seem to have killed your own link...","body":"@AhmadArslan whatever answer you used to have posted at that link, it&#39;s gone now. So the link isn&#39;t really helpful anymore... you seem to have killed your own link..."}],"tags":[],"owner":{"account_id":1140670,"reputation":1619,"user_id":1124682,"accept_rate":93,"display_name":"aretai"},"comment_count":3,"down_vote_count":17,"up_vote_count":36,"is_accepted":true,"score":19,"last_activity_date":1342453709,"creation_date":1342453709,"answer_id":11507829,"question_id":11506321,"body_markdown":"You can not simply ping in Java as it relies on ICMP, which is sadly not supported in Java \r\n\r\nhttp://mindprod.com/jgloss/ping.html\r\n\r\nUse sockets instead\r\n\r\nHope it helps","title":"How to ping an IP address","body":"<p>You can not simply ping in Java as it relies on ICMP, which is sadly not supported in Java </p>\n\n<p><a href=\"http://mindprod.com/jgloss/ping.html\">http://mindprod.com/jgloss/ping.html</a></p>\n\n<p>Use sockets instead</p>\n\n<p>Hope it helps</p>\n"},{"comments":[{"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"score":6,"creation_date":1436821815,"post_id":11508356,"comment_id":50763408,"body_markdown":"Then why can you usually do it as a non-admin/non-root on most computers _outside of Java_?","body":"Then why can you usually do it as a non-admin/non-root on most computers <i>outside of Java</i>?"},{"owner":{"account_id":153967,"reputation":1960,"user_id":369604,"accept_rate":77,"display_name":"Loduwijk"},"score":0,"creation_date":1436822124,"post_id":11508356,"comment_id":50763552,"body_markdown":"To clarify: Do commands such as command-line ping not use ICMP packets? I was fairly certain they did. Is ping run in an administrative context?","body":"To clarify: Do commands such as command-line ping not use ICMP packets? I was fairly certain they did. Is ping run in an administrative context?"},{"owner":{"account_id":5068712,"reputation":2406,"user_id":4068123,"display_name":"Michael Sims"},"score":0,"creation_date":1438806460,"post_id":11508356,"comment_id":51605838,"body_markdown":"Are you saying that the isReachable method ONLY uses TCP port 7 and it will NOT use ICMP ECHO REQUESTs? Or will it use ICMP if I somehow grant root privilege to my application? If the latter, then how do I allow my app to run as root?","body":"Are you saying that the isReachable method ONLY uses TCP port 7 and it will NOT use ICMP ECHO REQUESTs? Or will it use ICMP if I somehow grant root privilege to my application? If the latter, then how do I allow my app to run as root?"},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":11,"creation_date":1442516850,"post_id":11508356,"comment_id":53124782,"body_markdown":"The `ping` command on Linux is set-uid root; that&#39;s why non-root users can utilize it, even though it uses ICMP ECHO_REQUEST.","body":"The <code>ping</code> command on Linux is set-uid root; that&#39;s why non-root users can utilize it, even though it uses ICMP ECHO_REQUEST."},{"owner":{"account_id":68815,"reputation":9527,"user_id":200567,"accept_rate":89,"display_name":"Ethan Mick"},"score":1,"creation_date":1465692211,"post_id":11508356,"comment_id":63007998,"body_markdown":"This doesn&#39;t really work well: http://stackoverflow.com/questions/9922543/why-does-inetaddress-isreachable-return-false-when-i-can-ping-the-ip-address","body":"This doesn&#39;t really work well: <a href=\"http://stackoverflow.com/questions/9922543/why-does-inetaddress-isreachable-return-false-when-i-can-ping-the-ip-address\" title=\"why does inetaddress isreachable return false when i can ping the ip address\">stackoverflow.com/questions/9922543/&hellip;</a>"},{"owner":{"account_id":1345153,"reputation":2544,"user_id":1286062,"display_name":"Arvik"},"score":0,"creation_date":1465807024,"post_id":11508356,"comment_id":63036836,"body_markdown":"The spec is saying: &quot;Best effort is made by the implementation to try to reach the host, but firewalls and server configuration may block requests resulting in a unreachable status while some specific ports may be accessible&quot;. In the case the port number is known, opening a connection to host:port is a better option.","body":"The spec is saying: &quot;Best effort is made by the implementation to try to reach the host, but firewalls and server configuration may block requests resulting in a unreachable status while some specific ports may be accessible&quot;. In the case the port number is known, opening a connection to host:port is a better option."}],"tags":[],"owner":{"account_id":1345153,"reputation":2544,"user_id":1286062,"display_name":"Arvik"},"comment_count":6,"down_vote_count":1,"up_vote_count":78,"is_accepted":false,"score":77,"last_activity_date":1418029856,"creation_date":1342455398,"answer_id":11508356,"question_id":11506321,"body_markdown":"`InetAddress.isReachable()` according to [javadoc][1]:\r\n\r\n&gt;  &quot;.. A typical implementation will use ICMP ECHO REQUESTs if the\r\n&gt; privilege can be obtained, otherwise it will try to establish a TCP\r\n&gt; connection on port 7 (Echo) of the destination host..&quot;.\r\n\r\n Option #1 (ICMP) usually requires administrative `(root)` rights. \r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable%28int%29","title":"How to ping an IP address","body":"<p><code>InetAddress.isReachable()</code> according to <a href=\"http://docs.oracle.com/javase/7/docs/api/java/net/InetAddress.html#isReachable%28int%29\">javadoc</a>:</p>\n\n<blockquote>\n  <p>\".. A typical implementation will use ICMP ECHO REQUESTs if the\n  privilege can be obtained, otherwise it will try to establish a TCP\n  connection on port 7 (Echo) of the destination host..\".</p>\n</blockquote>\n\n<p>Option #1 (ICMP) usually requires administrative <code>(root)</code> rights. </p>\n"},{"comments":[{"owner":{"account_id":3876609,"reputation":220,"user_id":3340763,"accept_rate":80,"display_name":"Codingale"},"score":1,"creation_date":1433203837,"post_id":14110872,"comment_id":49240285,"body_markdown":"If you change `-c` to `-n`, most likely.","body":"If you change <code>-c</code> to <code>-n</code>, most likely."},{"owner":{"account_id":317082,"reputation":2330,"user_id":633565,"accept_rate":82,"display_name":"Harry Cho"},"score":4,"creation_date":1470087270,"post_id":14110872,"comment_id":64794521,"body_markdown":"@Supuhstar it will only work on OS that has ping command. Basically what it&#39;s doing above is fork a new process and make it run `ping` command from the OS.","body":"@Supuhstar it will only work on OS that has ping command. Basically what it&#39;s doing above is fork a new process and make it run <code>ping</code> command from the OS."}],"tags":[],"owner":{"account_id":1109118,"reputation":511,"user_id":1099911,"display_name":"gYanI"},"comment_count":2,"down_vote_count":4,"up_vote_count":16,"is_accepted":false,"score":12,"last_activity_date":1357046878,"creation_date":1357046878,"answer_id":14110872,"question_id":11506321,"body_markdown":"It will work for sure \r\n\r\n    import java.io.*;\r\n    import java.util.*;\r\n    \r\n    public class JavaPingExampleProgram\r\n    {\r\n    \r\n      public static void main(String args[]) \r\n      throws IOException\r\n      {\r\n        // create the ping command as a list of strings\r\n        JavaPingExampleProgram ping = new JavaPingExampleProgram();\r\n        List&lt;String&gt; commands = new ArrayList&lt;String&gt;();\r\n        commands.add(&quot;ping&quot;);\r\n        commands.add(&quot;-c&quot;);\r\n        commands.add(&quot;5&quot;);\r\n        commands.add(&quot;74.125.236.73&quot;);\r\n        ping.doCommand(commands);\r\n      }\r\n    \r\n      public void doCommand(List&lt;String&gt; command) \r\n      throws IOException\r\n      {\r\n        String s = null;\r\n        \r\n        ProcessBuilder pb = new ProcessBuilder(command);\r\n        Process process = pb.start();\r\n    \r\n        BufferedReader stdInput = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n        BufferedReader stdError = new BufferedReader(new InputStreamReader(process.getErrorStream()));\r\n    \r\n        // read the output from the command\r\n        System.out.println(&quot;Here is the standard output of the command:\\n&quot;);\r\n        while ((s = stdInput.readLine()) != null)\r\n        {\r\n          System.out.println(s);\r\n        }\r\n    \r\n        // read any errors from the attempted command\r\n        System.out.println(&quot;Here is the standard error of the command (if any):\\n&quot;);\r\n        while ((s = stdError.readLine()) != null)\r\n        {\r\n          System.out.println(s);\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\n    ","title":"How to ping an IP address","body":"<p>It will work for sure </p>\n\n<pre><code>import java.io.*;\nimport java.util.*;\n\npublic class JavaPingExampleProgram\n{\n\n  public static void main(String args[]) \n  throws IOException\n  {\n    // create the ping command as a list of strings\n    JavaPingExampleProgram ping = new JavaPingExampleProgram();\n    List&lt;String&gt; commands = new ArrayList&lt;String&gt;();\n    commands.add(\"ping\");\n    commands.add(\"-c\");\n    commands.add(\"5\");\n    commands.add(\"74.125.236.73\");\n    ping.doCommand(commands);\n  }\n\n  public void doCommand(List&lt;String&gt; command) \n  throws IOException\n  {\n    String s = null;\n\n    ProcessBuilder pb = new ProcessBuilder(command);\n    Process process = pb.start();\n\n    BufferedReader stdInput = new BufferedReader(new InputStreamReader(process.getInputStream()));\n    BufferedReader stdError = new BufferedReader(new InputStreamReader(process.getErrorStream()));\n\n    // read the output from the command\n    System.out.println(\"Here is the standard output of the command:\\n\");\n    while ((s = stdInput.readLine()) != null)\n    {\n      System.out.println(s);\n    }\n\n    // read any errors from the attempted command\n    System.out.println(\"Here is the standard error of the command (if any):\\n\");\n    while ((s = stdError.readLine()) != null)\n    {\n      System.out.println(s);\n    }\n  }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2918180,"reputation":2843,"user_id":2500965,"accept_rate":56,"display_name":"ssindelar"},"score":0,"creation_date":1464783410,"post_id":18030305,"comment_id":62623861,"body_markdown":"On windows you always get 1 as returnVal. No matter if it is reachable or not.","body":"On windows you always get 1 as returnVal. No matter if it is reachable or not."},{"owner":{"account_id":310085,"reputation":936,"user_id":622885,"accept_rate":61,"display_name":"Frederik Witte"},"score":0,"creation_date":1581931148,"post_id":18030305,"comment_id":106588088,"body_markdown":"Had success with this both on Windows and Android","body":"Had success with this both on Windows and Android"},{"owner":{"account_id":1029785,"reputation":1002,"user_id":1038336,"accept_rate":40,"display_name":"Guilherme Campos Hazan"},"score":0,"creation_date":1634067393,"post_id":18030305,"comment_id":122925668,"body_markdown":"Worked fine on Windows 10 and Android 7.1.1 without root.","body":"Worked fine on Windows 10 and Android 7.1.1 without root."}],"tags":[],"owner":{"account_id":341403,"reputation":2416,"user_id":671988,"accept_rate":57,"display_name":"Mohammad Banisaeid"},"comment_count":3,"down_vote_count":2,"up_vote_count":15,"is_accepted":false,"score":13,"last_activity_date":1560955525,"creation_date":1375513506,"answer_id":18030305,"question_id":11506321,"body_markdown":"You can use this method to ping hosts on Windows and other platforms:  \r\n\r\n    private static boolean ping(String host) throws IOException, InterruptedException {\r\n        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().contains(&quot;win&quot;);\r\n\r\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;ping&quot;, isWindows? &quot;-n&quot; : &quot;-c&quot;, &quot;1&quot;, host);\r\n        Process proc = processBuilder.start();\r\n\r\n        int returnVal = proc.waitFor();\r\n        return returnVal == 0;\r\n    }\r\n\r\n","title":"How to ping an IP address","body":"<p>You can use this method to ping hosts on Windows and other platforms:  </p>\n\n<pre><code>private static boolean ping(String host) throws IOException, InterruptedException {\n    boolean isWindows = System.getProperty(\"os.name\").toLowerCase().contains(\"win\");\n\n    ProcessBuilder processBuilder = new ProcessBuilder(\"ping\", isWindows? \"-n\" : \"-c\", \"1\", host);\n    Process proc = processBuilder.start();\n\n    int returnVal = proc.waitFor();\n    return returnVal == 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3066976,"reputation":124,"user_id":2849096,"display_name":"user176495"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1391674352,"creation_date":1391674352,"answer_id":21597343,"question_id":11506321,"body_markdown":"On linux with oracle-jdk the code the OP submitted uses port 7 when not root and ICMP when root. It does do a real ICMP echo request when run as root as the documentation specifies.\r\n\r\nIf you running this on a MS machine you may have to run the app as administrator to get the ICMP behaviour.","title":"How to ping an IP address","body":"<p>On linux with oracle-jdk the code the OP submitted uses port 7 when not root and ICMP when root. It does do a real ICMP echo request when run as root as the documentation specifies.</p>\n\n<p>If you running this on a MS machine you may have to run the app as administrator to get the ICMP behaviour.</p>\n"},{"tags":[],"owner":{"account_id":3358981,"reputation":109,"user_id":2821263,"display_name":"Jgregoire108"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411061651,"creation_date":1411061651,"answer_id":25919001,"question_id":11506321,"body_markdown":"I know this has been answered with previous entries, but for anyone else that comes to this question, I did find a way that did not require having use the &quot;ping&quot; process in windows and then scrubbing the output.\r\n\r\nWhat I did was use JNA to invoke Window&#39;s IP helper library to do an ICMP echo\r\n\r\nSee [my own answer to my own similar issue](https://stackoverflow.com/a/19383757/2821263)","title":"How to ping an IP address","body":"<p>I know this has been answered with previous entries, but for anyone else that comes to this question, I did find a way that did not require having use the \"ping\" process in windows and then scrubbing the output.</p>\n\n<p>What I did was use JNA to invoke Window's IP helper library to do an ICMP echo</p>\n\n<p>See <a href=\"https://stackoverflow.com/a/19383757/2821263\">my own answer to my own similar issue</a></p>\n"},{"tags":[],"owner":{"account_id":6089460,"reputation":449,"user_id":4752289,"display_name":"mohammad shojaeinia"},"comment_count":0,"down_vote_count":1,"up_vote_count":45,"is_accepted":false,"score":44,"last_activity_date":1428258418,"creation_date":1428258418,"answer_id":29460716,"question_id":11506321,"body_markdown":"I think this code will help you:\r\n\r\n    public class PingExample {\r\n        public static void main(String[] args){\r\n            try{\r\n                InetAddress address = InetAddress.getByName(&quot;192.168.1.103&quot;);\r\n                boolean reachable = address.isReachable(10000);\r\n \r\n                System.out.println(&quot;Is host reachable? &quot; + reachable);\r\n            } catch (Exception e){\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }","title":"How to ping an IP address","body":"<p>I think this code will help you:</p>\n\n<pre><code>public class PingExample {\n    public static void main(String[] args){\n        try{\n            InetAddress address = InetAddress.getByName(\"192.168.1.103\");\n            boolean reachable = address.isReachable(10000);\n\n            System.out.println(\"Is host reachable? \" + reachable);\n        } catch (Exception e){\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"score":0,"creation_date":1559614796,"post_id":30287787,"comment_id":99467159,"body_markdown":"this could be vulnerable to command injection, always validate the input","body":"this could be vulnerable to command injection, always validate the input"}],"tags":[],"owner":{"account_id":5907840,"reputation":945,"user_id":4648976,"accept_rate":75,"display_name":"mustangDC"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1431872458,"creation_date":1431872458,"answer_id":30287787,"question_id":11506321,"body_markdown":"&lt;br&gt;\r\nJust an addition to what others have given, even though they work well but **in some cases if internet is slow or some unknown network problem exists, some of the codes won&#39;t work (`isReachable()`).** But this code mentioned below creates a process which acts as a command line ping (cmd ping) to windows. It works for me in all cases, tried and tested.\r\n\r\n**Code :-**\r\n\r\n    public class JavaPingApp {\r\n \r\n    public static void runSystemCommand(String command) {\r\n \r\n\t\ttry {\r\n\t\t\tProcess p = Runtime.getRuntime().exec(command);\r\n\t\t\tBufferedReader inputStream = new BufferedReader(\r\n\t\t\t\t\tnew InputStreamReader(p.getInputStream()));\r\n \r\n\t\t\tString s = &quot;&quot;;\r\n\t\t\t// reading output stream of the command\r\n\t\t\twhile ((s = inputStream.readLine()) != null) {\r\n\t\t\t\tSystem.out.println(s);\r\n\t\t\t}\r\n \r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n \r\n\tpublic static void main(String[] args) {\r\n\t\t\r\n\t\tString ip = &quot;stackoverflow.com&quot;; //Any IP Address on your network / Web\r\n\t\trunSystemCommand(&quot;ping &quot; + ip);\r\n\t}\r\n    }\r\n\r\nHope it helps, Cheers!!!","title":"How to ping an IP address","body":"<p><br>\nJust an addition to what others have given, even though they work well but <strong>in some cases if internet is slow or some unknown network problem exists, some of the codes won't work (<code>isReachable()</code>).</strong> But this code mentioned below creates a process which acts as a command line ping (cmd ping) to windows. It works for me in all cases, tried and tested.</p>\n\n<p><strong>Code :-</strong></p>\n\n<pre><code>public class JavaPingApp {\n\npublic static void runSystemCommand(String command) {\n\n    try {\n        Process p = Runtime.getRuntime().exec(command);\n        BufferedReader inputStream = new BufferedReader(\n                new InputStreamReader(p.getInputStream()));\n\n        String s = \"\";\n        // reading output stream of the command\n        while ((s = inputStream.readLine()) != null) {\n            System.out.println(s);\n        }\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n\npublic static void main(String[] args) {\n\n    String ip = \"stackoverflow.com\"; //Any IP Address on your network / Web\n    runSystemCommand(\"ping \" + ip);\n}\n}\n</code></pre>\n\n<p>Hope it helps, Cheers!!!</p>\n"},{"comments":[{"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"score":0,"creation_date":1559614946,"post_id":32637531,"comment_id":99467179,"body_markdown":"this example may not work on non-english operating systems. On windows, there&#39;s also the &quot;general failure&quot; error message and there may be others","body":"this example may not work on non-english operating systems. On windows, there&#39;s also the &quot;general failure&quot; error message and there may be others"}],"tags":[],"owner":{"account_id":4646767,"reputation":17781,"user_id":3764804,"accept_rate":59,"display_name":"BullyWiiPlaza"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510916666,"creation_date":1442514519,"answer_id":32637531,"question_id":11506321,"body_markdown":"Here is a method for pinging an IP address in `Java` that should work on `Windows` and `Unix` systems:\r\n\r\n    import org.apache.commons.lang3.SystemUtils;\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.IOException;\r\n    import java.io.InputStreamReader;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    public class CommandLine\r\n    {\r\n    \t/**\r\n    \t * @param ipAddress The internet protocol address to ping\r\n    \t * @return True if the address is responsive, false otherwise\r\n    \t */\r\n    \tpublic static boolean isReachable(String ipAddress) throws IOException\r\n    \t{\r\n    \t\tList&lt;String&gt; command = buildCommand(ipAddress);\r\n    \t\tProcessBuilder processBuilder = new ProcessBuilder(command);\r\n    \t\tProcess process = processBuilder.start();\r\n    \r\n    \t\ttry (BufferedReader standardOutput = new BufferedReader(new InputStreamReader(process.getInputStream())))\r\n    \t\t{\r\n    \t\t\tString outputLine;\r\n    \r\n    \t\t\twhile ((outputLine = standardOutput.readLine()) != null)\r\n    \t\t\t{\r\n    \t\t\t\t// Picks up Windows and Unix unreachable hosts\r\n    \t\t\t\tif (outputLine.toLowerCase().contains(&quot;destination host unreachable&quot;))\r\n    \t\t\t\t{\r\n    \t\t\t\t\treturn false;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n    \r\n    \t\treturn true;\r\n    \t}\r\n    \r\n    \tprivate static List&lt;String&gt; buildCommand(String ipAddress)\r\n    \t{\r\n    \t\tList&lt;String&gt; command = new ArrayList&lt;&gt;();\r\n    \t\tcommand.add(&quot;ping&quot;);\r\n    \r\n    \t\tif (SystemUtils.IS_OS_WINDOWS)\r\n    \t\t{\r\n    \t\t\tcommand.add(&quot;-n&quot;);\r\n    \t\t} else if (SystemUtils.IS_OS_UNIX)\r\n    \t\t{\r\n    \t\t\tcommand.add(&quot;-c&quot;);\r\n    \t\t} else\r\n    \t\t{\r\n    \t\t\tthrow new UnsupportedOperationException(&quot;Unsupported operating system&quot;);\r\n    \t\t}\r\n    \r\n    \t\tcommand.add(&quot;1&quot;);\r\n    \t\tcommand.add(ipAddress);\r\n    \r\n    \t\treturn command;\r\n    \t}\r\n    }\r\n\r\nMake sure to add [`Apache Commons Lang`][1] to your dependencies.\r\n\r\n  [1]: https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\r\n  [2]: http://stackoverflow.com/a/14110872/3764804","title":"How to ping an IP address","body":"<p>Here is a method for pinging an IP address in <code>Java</code> that should work on <code>Windows</code> and <code>Unix</code> systems:</p>\n\n<pre><code>import org.apache.commons.lang3.SystemUtils;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class CommandLine\n{\n    /**\n     * @param ipAddress The internet protocol address to ping\n     * @return True if the address is responsive, false otherwise\n     */\n    public static boolean isReachable(String ipAddress) throws IOException\n    {\n        List&lt;String&gt; command = buildCommand(ipAddress);\n        ProcessBuilder processBuilder = new ProcessBuilder(command);\n        Process process = processBuilder.start();\n\n        try (BufferedReader standardOutput = new BufferedReader(new InputStreamReader(process.getInputStream())))\n        {\n            String outputLine;\n\n            while ((outputLine = standardOutput.readLine()) != null)\n            {\n                // Picks up Windows and Unix unreachable hosts\n                if (outputLine.toLowerCase().contains(\"destination host unreachable\"))\n                {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    private static List&lt;String&gt; buildCommand(String ipAddress)\n    {\n        List&lt;String&gt; command = new ArrayList&lt;&gt;();\n        command.add(\"ping\");\n\n        if (SystemUtils.IS_OS_WINDOWS)\n        {\n            command.add(\"-n\");\n        } else if (SystemUtils.IS_OS_UNIX)\n        {\n            command.add(\"-c\");\n        } else\n        {\n            throw new UnsupportedOperationException(\"Unsupported operating system\");\n        }\n\n        command.add(\"1\");\n        command.add(ipAddress);\n\n        return command;\n    }\n}\n</code></pre>\n\n<p>Make sure to add <a href=\"https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\" rel=\"nofollow noreferrer\"><code>Apache Commons Lang</code></a> to your dependencies.</p>\n"},{"comments":[{"owner":{"account_id":9870505,"reputation":2773,"user_id":7310344,"accept_rate":100,"display_name":"BusyProgrammer"},"score":4,"creation_date":1488419110,"post_id":42545201,"comment_id":72226316,"body_markdown":"Please add a description of how your code works. It will help OP in understanding your code when he applies it.","body":"Please add a description of how your code works. It will help OP in understanding your code when he applies it."},{"owner":{"account_id":2479836,"reputation":33513,"user_id":2159528,"accept_rate":71,"display_name":"Louys Patrice Bessette"},"score":0,"creation_date":1488422380,"post_id":42545201,"comment_id":72227270,"body_markdown":"Had this to review in the &quot;low quality queue&quot;... But since it dates from an hour... Maybe it will be improved with explanations soon. What is the hurry to post an answer to a 2012 question? Well... I just skip it for now.","body":"Had this to review in the &quot;low quality queue&quot;... But since it dates from an hour... Maybe it will be improved with explanations soon. What is the hurry to post an answer to a 2012 question? Well... I just skip it for now."},{"owner":{"account_id":4364513,"reputation":1,"user_id":5942151,"display_name":"john smith"},"score":0,"creation_date":1488466025,"post_id":42545201,"comment_id":72251263,"body_markdown":"Thank you for all of your comments. First of all this is a class and method to work with windows ONLY. I needed to as a ping time to a project so I came up with this which is dirty but quick if you are working on windows. This is a super quick ~5 min developed code for pinging an IPv4 host as you can see from the code itself. This class and it&#39;s method gets a String as an IP address and returns the average time for the ping that is generated in windows CMD. CMD those the ping and this code reads the output to reach to the line that some numerical stats are given.","body":"Thank you for all of your comments. First of all this is a class and method to work with windows ONLY. I needed to as a ping time to a project so I came up with this which is dirty but quick if you are working on windows. This is a super quick ~5 min developed code for pinging an IPv4 host as you can see from the code itself. This class and it&#39;s method gets a String as an IP address and returns the average time for the ping that is generated in windows CMD. CMD those the ping and this code reads the output to reach to the line that some numerical stats are given."},{"owner":{"account_id":4364513,"reputation":1,"user_id":5942151,"display_name":"john smith"},"score":0,"creation_date":1488466121,"post_id":42545201,"comment_id":72251338,"body_markdown":"It &quot;tokenizes&quot; the output when min, max and average are given and returns the average time. It is a bit crazy that you can have an average time out of only one ping but this is windows and it does it anyways.","body":"It &quot;tokenizes&quot; the output when min, max and average are given and returns the average time. It is a bit crazy that you can have an average time out of only one ping but this is windows and it does it anyways."},{"owner":{"account_id":4364513,"reputation":1,"user_id":5942151,"display_name":"john smith"},"score":0,"creation_date":1488466164,"post_id":42545201,"comment_id":72251380,"body_markdown":"Please try it out for yourself on Windows before marking it down. It is an easy / dirty fix for a big problem.","body":"Please try it out for yourself on Windows before marking it down. It is an easy / dirty fix for a big problem."},{"owner":{"account_id":4364513,"reputation":1,"user_id":5942151,"display_name":"john smith"},"score":0,"creation_date":1488466399,"post_id":42545201,"comment_id":72251549,"body_markdown":"Louys Patrice Bessette, Thank you for your comment. my code is here to get voted by pros like you. This is my first ever posting. I like my own method over what I see here.\nBest.","body":"Louys Patrice Bessette, Thank you for your comment. my code is here to get voted by pros like you. This is my first ever posting. I like my own method over what I see here. Best."},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":0,"creation_date":1537978627,"post_id":42545201,"comment_id":91983832,"body_markdown":"the `ping()` method should be `static`. (that&#39;s just at first sight, without running it)","body":"the <code>ping()</code> method should be <code>static</code>. (that&#39;s just at first sight, without running it)"}],"tags":[],"owner":{"account_id":4364513,"reputation":1,"user_id":5942151,"display_name":"john smith"},"comment_count":7,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1488467046,"creation_date":1488417743,"answer_id":42545201,"question_id":11506321,"body_markdown":"This should work:\r\n\r\n    \r\n    import java.io.BufferedReader;\r\n    import java.io.InputStreamReader;\r\n\r\n    public class Pinger {\r\n\r\n\tprivate static String keyWordTolookFor = &quot;average&quot;;\r\n\r\n\tpublic Pinger() {\r\n\t\t// TODO Auto-generated constructor stub\r\n\t}\r\n\r\n\t\r\n\t public static void main(String[] args) {\r\n     //Test the ping method on Windows.\r\n\t System.out.println(ping(&quot;192.168.0.1&quot;)); }\r\n\t \r\n\r\n\tpublic String ping(String IP) {\r\n\t\ttry {\r\n\t\t\tString line;\r\n\t\t\tProcess p = Runtime.getRuntime().exec(&quot;ping -n 1 &quot; + IP);\r\n\t\t\tBufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n\t\t\twhile (((line = input.readLine()) != null)) {\r\n\r\n\t\t\t\tif (line.toLowerCase().indexOf(keyWordTolookFor.toLowerCase()) != -1) {\r\n\r\n\t\t\t\t\tString delims = &quot;[ ]+&quot;;\r\n\t\t\t\t\tString[] tokens = line.split(delims);\r\n\t\t\t\t\treturn tokens[tokens.length - 1];\r\n\t\t\t\t} \r\n\t\t\t}\r\n\r\n\t\t\tinput.close();\r\n\t\t} catch (Exception err) {\r\n\t\t\terr.printStackTrace();\r\n\t\t}\r\n\t\treturn &quot;Offline&quot;;\r\n\t}\r\n\r\n}\r\n","title":"How to ping an IP address","body":"<p>This should work:</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\npublic class Pinger {\n\nprivate static String keyWordTolookFor = \"average\";\n\npublic Pinger() {\n    // TODO Auto-generated constructor stub\n}\n\n\n public static void main(String[] args) {\n //Test the ping method on Windows.\n System.out.println(ping(\"192.168.0.1\")); }\n\n\npublic String ping(String IP) {\n    try {\n        String line;\n        Process p = Runtime.getRuntime().exec(\"ping -n 1 \" + IP);\n        BufferedReader input = new BufferedReader(new InputStreamReader(p.getInputStream()));\n        while (((line = input.readLine()) != null)) {\n\n            if (line.toLowerCase().indexOf(keyWordTolookFor.toLowerCase()) != -1) {\n\n                String delims = \"[ ]+\";\n                String[] tokens = line.split(delims);\n                return tokens[tokens.length - 1];\n            } \n        }\n\n        input.close();\n    } catch (Exception err) {\n        err.printStackTrace();\n    }\n    return \"Offline\";\n}\n</code></pre>\n\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":2662958,"reputation":39,"user_id":2302200,"display_name":"Suganya Vinayakam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519984919,"creation_date":1519984573,"answer_id":49066724,"question_id":11506321,"body_markdown":"InetAddress is not always return correct value. It is successful in case of Local Host but for other hosts this shows that the host is unreachable. Try using ping command as given below.\r\n\r\n    try {\r\n    \tString cmd = &quot;cmd /C ping -n 1 &quot; + ip + &quot; | find \\&quot;TTL\\&quot;&quot;;\t\t  \r\n    \tProcess myProcess = Runtime.getRuntime().exec(cmd);\r\n    \tmyProcess.waitFor();\r\n    \r\n    \tif(myProcess.exitValue() == 0) {\r\n    \r\n    \treturn true;\r\n    \t}\r\n    \telse {\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n    catch (Exception e) {\r\n    \te.printStackTrace();\r\n    \treturn false;\r\n    }\r\n\t\t\t","title":"How to ping an IP address","body":"<p>InetAddress is not always return correct value. It is successful in case of Local Host but for other hosts this shows that the host is unreachable. Try using ping command as given below.</p>\n\n<pre><code>try {\n    String cmd = \"cmd /C ping -n 1 \" + ip + \" | find \\\"TTL\\\"\";        \n    Process myProcess = Runtime.getRuntime().exec(cmd);\n    myProcess.waitFor();\n\n    if(myProcess.exitValue() == 0) {\n\n    return true;\n    }\n    else {\n        return false;\n    }\n}\ncatch (Exception e) {\n    e.printStackTrace();\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2228321,"reputation":1225,"user_id":1966569,"accept_rate":82,"display_name":"Jerome"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1535533370,"creation_date":1535533370,"answer_id":52073515,"question_id":11506321,"body_markdown":"Even though this does not rely on ICMP on Windows, this implementation works pretty well with the new [Duration API][1]\r\n\r\n    public static Duration ping(String host) {\r\n\t\tInstant startTime = Instant.now();\r\n\t\ttry {\r\n\t\t\tInetAddress address = InetAddress.getByName(host);\r\n\t\t\tif (address.isReachable(1000)) {\r\n\t\t\t\treturn Duration.between(startTime, Instant.now());\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\t// Host not available, nothing to do here\r\n\t\t}\r\n\t\treturn Duration.ofDays(1);\r\n\t}\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html","title":"How to ping an IP address","body":"<p>Even though this does not rely on ICMP on Windows, this implementation works pretty well with the new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"nofollow noreferrer\">Duration API</a></p>\n\n<pre><code>public static Duration ping(String host) {\n    Instant startTime = Instant.now();\n    try {\n        InetAddress address = InetAddress.getByName(host);\n        if (address.isReachable(1000)) {\n            return Duration.between(startTime, Instant.now());\n        }\n    } catch (IOException e) {\n        // Host not available, nothing to do here\n    }\n    return Duration.ofDays(1);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1240435,"reputation":3209,"user_id":1203182,"display_name":"spy"},"score":1,"creation_date":1559615051,"post_id":55371574,"comment_id":99467191,"body_markdown":"The batch example isn&#39;t right. The output can easily be &quot;reply from x.y.z.a: Destination host unreachable&quot; which would return a positive answer.","body":"The batch example isn&#39;t right. The output can easily be &quot;reply from x.y.z.a: Destination host unreachable&quot; which would return a positive answer."}],"tags":[],"owner":{"account_id":3324751,"reputation":26,"user_id":2795070,"display_name":"Felix Oriedo"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553670915,"creation_date":1553670468,"answer_id":55371574,"question_id":11506321,"body_markdown":"I tried a couple of options:\r\n\r\n 1. Java InetAddress\r\n\r\n`InetAddress.getByName(ipAddress)`, the network on windows started misbehaving after trying a couple of times\r\n\r\n 2. Java HttpURLConnection\r\n\r\n                URL siteURL = new URL(url);\r\n    \t\t\tconnection = (HttpURLConnection) siteURL.openConnection();\r\n    \t\t\tconnection.setRequestMethod(&quot;GET&quot;);\r\n    \t\t\tconnection.setConnectTimeout(pingTime);\r\n    \t\t\tconnection.connect();\r\n    \r\n    \t\t\tcode = connection.getResponseCode();\r\n    \t\t\tif (code == 200) {\r\n    \t\t\t\tcode = 200;\r\n    \t\t\t}.\r\n\r\nThis was reliable but a bit slow\r\n\r\n 3. Windows Batch File\r\n\r\nI finally settled to creating a batch file on my windows machine with the following contents: `ping.exe -n %echoCount% %pingIp%`\r\nThen I called the .bat file in my java code using \t\r\n\r\n    public int pingBat(Network network) {\r\n    ProcessBuilder pb = new ProcessBuilder(pingBatLocation);\r\n    Map&lt;String, String&gt; env = pb.environment();\r\n\r\n    env.put(\r\n            &quot;echoCount&quot;, noOfPings + &quot;&quot;);\r\n    env.put(\r\n            &quot;pingIp&quot;, pingIp);\r\n    File outputFile = new File(outputFileLocation);\r\n    File errorFile = new File(errorFileLocation);\r\n\r\n    pb.redirectOutput(outputFile);\r\n\r\n    pb.redirectError(errorFile);\r\n\r\n    Process process;\r\n\r\n    try {\r\n        process = pb.start();\r\n        process.waitFor();\r\n        String finalOutput = printFile(outputFile);\r\n        if (finalOutput != null &amp;&amp; finalOutput.toLowerCase().contains(&quot;reply from&quot;)) {\r\n            return 200;\r\n        } else {\r\n            return 202;\r\n        }\r\n    } catch (IOException e) {\r\n        log.debug(e.getMessage());\r\n        return 203;\r\n    } catch (InterruptedException e) {\r\n        log.debug(e.getMessage());\r\n        return 204;\r\n    }\r\n\r\n}\r\n\r\nThis proved to be the fastest and most reliable way\r\n","title":"How to ping an IP address","body":"<p>I tried a couple of options:</p>\n\n<ol>\n<li>Java InetAddress</li>\n</ol>\n\n<p><code>InetAddress.getByName(ipAddress)</code>, the network on windows started misbehaving after trying a couple of times</p>\n\n<ol start=\"2\">\n<li><p>Java HttpURLConnection</p>\n\n<pre><code>        URL siteURL = new URL(url);\n        connection = (HttpURLConnection) siteURL.openConnection();\n        connection.setRequestMethod(\"GET\");\n        connection.setConnectTimeout(pingTime);\n        connection.connect();\n\n        code = connection.getResponseCode();\n        if (code == 200) {\n            code = 200;\n        }.\n</code></pre></li>\n</ol>\n\n<p>This was reliable but a bit slow</p>\n\n<ol start=\"3\">\n<li>Windows Batch File</li>\n</ol>\n\n<p>I finally settled to creating a batch file on my windows machine with the following contents: <code>ping.exe -n %echoCount% %pingIp%</code>\nThen I called the .bat file in my java code using   </p>\n\n<pre><code>public int pingBat(Network network) {\nProcessBuilder pb = new ProcessBuilder(pingBatLocation);\nMap&lt;String, String&gt; env = pb.environment();\n\nenv.put(\n        \"echoCount\", noOfPings + \"\");\nenv.put(\n        \"pingIp\", pingIp);\nFile outputFile = new File(outputFileLocation);\nFile errorFile = new File(errorFileLocation);\n\npb.redirectOutput(outputFile);\n\npb.redirectError(errorFile);\n\nProcess process;\n\ntry {\n    process = pb.start();\n    process.waitFor();\n    String finalOutput = printFile(outputFile);\n    if (finalOutput != null &amp;&amp; finalOutput.toLowerCase().contains(\"reply from\")) {\n        return 200;\n    } else {\n        return 202;\n    }\n} catch (IOException e) {\n    log.debug(e.getMessage());\n    return 203;\n} catch (InterruptedException e) {\n    log.debug(e.getMessage());\n    return 204;\n}\n</code></pre>\n\n<p>}</p>\n\n<p>This proved to be the fastest and most reliable way</p>\n"},{"comments":[{"owner":{"account_id":114848,"reputation":134189,"user_id":301832,"accept_rate":60,"display_name":"Donal Fellows"},"score":0,"creation_date":1635251620,"post_id":60569509,"comment_id":123242014,"body_markdown":"The system ping isn&#39;t guaranteed to work either; some environments block all ICMP ECHO requests at their firewall. In particular, Azure (and hence Github Actions among other things) is one such environment.","body":"The system ping isn&#39;t guaranteed to work either; some environments block all ICMP ECHO requests at their firewall. In particular, Azure (and hence Github Actions among other things) is one such environment."}],"tags":[],"owner":{"account_id":17894657,"reputation":115,"user_id":13000363,"display_name":"eci"},"comment_count":1,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1583518256,"creation_date":1583518256,"answer_id":60569509,"question_id":11506321,"body_markdown":"short recommendation: \r\ndon&#39;t use isReachable(), call the system ping, as proposed in some of the answers above.\r\n\r\nlong explanation: \r\n\r\n - ping uses the ICMP network protcol. To use ICMP, a &#39;raw socket&#39; is needed\r\n - standard users are not allowed by the operating system to use raw sockets\r\n - the following applies to a fedora 30 linux, windows systems should be similar  \r\n - if java runs as root, isReachable() actually sends ICMP ping requests\r\n - if java does not run as root, isReachable() tries to connect to TCP port 7, known as the echo port. This service is commonly not used any more, trying to use it might yield improper results\r\n - any kind of answer to the connection request, also a reject (TCP flag RST) yields a &#39;true&#39; from isReachable()\r\n - some firewalls send RST for any port that is not explicitly open. If this happens, you will get isReachable() == true for a host that does not even exist\r\n - further tries to assign the necessary capabilities to a java process:\r\n - setcap cap_net_raw+eip *java executable* (assign the right to use raw sockets)\r\n - test: getcap *java executable* -&gt; &#39;cap_net_raw+eip&#39; (capability is assigned)\r\n - the running java still sends a TCP request to port 7\r\n - check of the running java process with getpcaps *pid* shows that the running java does not have the raw socket capablity. Obviously my setcap has been overridden by some security mechanism\r\n - as security requirements are increasing, this is likely to become even more restricted, unless s.b. implements an exception especially for ping (but nothing found on the net so far)","title":"How to ping an IP address","body":"<p>short recommendation: \ndon't use isReachable(), call the system ping, as proposed in some of the answers above.</p>\n\n<p>long explanation: </p>\n\n<ul>\n<li>ping uses the ICMP network protcol. To use ICMP, a 'raw socket' is needed</li>\n<li>standard users are not allowed by the operating system to use raw sockets</li>\n<li>the following applies to a fedora 30 linux, windows systems should be similar  </li>\n<li>if java runs as root, isReachable() actually sends ICMP ping requests</li>\n<li>if java does not run as root, isReachable() tries to connect to TCP port 7, known as the echo port. This service is commonly not used any more, trying to use it might yield improper results</li>\n<li>any kind of answer to the connection request, also a reject (TCP flag RST) yields a 'true' from isReachable()</li>\n<li>some firewalls send RST for any port that is not explicitly open. If this happens, you will get isReachable() == true for a host that does not even exist</li>\n<li>further tries to assign the necessary capabilities to a java process:</li>\n<li>setcap cap_net_raw+eip <em>java executable</em> (assign the right to use raw sockets)</li>\n<li>test: getcap <em>java executable</em> -> 'cap_net_raw+eip' (capability is assigned)</li>\n<li>the running java still sends a TCP request to port 7</li>\n<li>check of the running java process with getpcaps <em>pid</em> shows that the running java does not have the raw socket capablity. Obviously my setcap has been overridden by some security mechanism</li>\n<li>as security requirements are increasing, this is likely to become even more restricted, unless s.b. implements an exception especially for ping (but nothing found on the net so far)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15688321,"reputation":131,"user_id":11320254,"display_name":"spongecaptain"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619260304,"creation_date":1598001715,"answer_id":63520060,"question_id":11506321,"body_markdown":"I prefer to this way:\r\n\r\n```java\r\n   /**\r\n     *\r\n     * @param host\r\n     * @return true means ping success,false means ping fail.\r\n     * @throws IOException\r\n     * @throws InterruptedException\r\n     */\r\n    private static boolean ping(String host) throws IOException, InterruptedException {\r\n        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().contains(&quot;win&quot;);\r\n\r\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;ping&quot;, isWindows? &quot;-n&quot; : &quot;-c&quot;, &quot;1&quot;, host);\r\n        Process proc = processBuilder.start();\r\n        return proc.waitFor(200, TimeUnit.MILLISECONDS);\r\n    }\r\n```\r\n\r\nThis way can limit the blocking time to the specific time,such as 200 ms.\r\n\r\nIt works well in MacOS、Android and Windows, and should used in JDK 1.8.\r\n\r\n&gt; This idea comes from [Mohammad Banisaeid](https://stackoverflow.com/users/671988/mohammad-banisaeid),but I can&#39;t comment.\r\n(You must have 50 reputation to comment)","title":"How to ping an IP address","body":"<p>I prefer to this way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>   /**\n     *\n     * @param host\n     * @return true means ping success,false means ping fail.\n     * @throws IOException\n     * @throws InterruptedException\n     */\n    private static boolean ping(String host) throws IOException, InterruptedException {\n        boolean isWindows = System.getProperty(&quot;os.name&quot;).toLowerCase().contains(&quot;win&quot;);\n\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;ping&quot;, isWindows? &quot;-n&quot; : &quot;-c&quot;, &quot;1&quot;, host);\n        Process proc = processBuilder.start();\n        return proc.waitFor(200, TimeUnit.MILLISECONDS);\n    }\n</code></pre>\n<p>This way can limit the blocking time to the specific time,such as 200 ms.</p>\n<p>It works well in MacOS、Android and Windows, and should used in JDK 1.8.</p>\n<blockquote>\n<p>This idea comes from <a href=\"https://stackoverflow.com/users/671988/mohammad-banisaeid\">Mohammad Banisaeid</a>,but I can't comment.\n(You must have 50 reputation to comment)</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":13259,"reputation":67764,"user_id":26510,"accept_rate":99,"display_name":"Brad Parks"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686667639,"creation_date":1686667639,"answer_id":76466145,"question_id":11506321,"body_markdown":"You can use java in a shell script, without compiling it (java does this on the fly) and run a &quot;ping&quot; type test for any host/port. This takes 2 arguments, the host and the port. Basic idea comes [from this answer](https://stackoverflow.com/a/29460716/26510)\r\n\r\ne.g.\r\n\r\n    # test if host and port can be opened from java\r\n    $ test_host_and_port myhost 443\r\n\r\n### test_host_and_port\r\n    #!/usr/bin/java --source 11\r\n    import java.net.InetAddress;\r\n    import java.net.Socket;\r\n    \r\n    public class PingExample {\r\n      public static void main(String[] args){\r\n        try{\r\n          boolean result = serverListening(args[0], Integer.valueOf(args[1]));\r\n    \r\n          System.out.println(&quot;Is host reachable? &quot; + args[0] + &quot;, &quot; + result);\r\n        } catch (Exception e){\r\n          e.printStackTrace();\r\n        }\r\n      }\r\n      \r\n      public static boolean serverListening(String host, int port)\r\n      {\r\n        Socket s = null;\r\n        try\r\n        {\r\n          s = new Socket(host, port);\r\n          return true;\r\n        }\r\n        catch (Exception e)\r\n        {\r\n          return false;\r\n        }\r\n        finally\r\n        {\r\n          if(s != null)\r\n            try {s.close();}\r\n          catch(Exception e){}\r\n        }\r\n      }\r\n    }\r\n\r\n","title":"How to ping an IP address","body":"<p>You can use java in a shell script, without compiling it (java does this on the fly) and run a &quot;ping&quot; type test for any host/port. This takes 2 arguments, the host and the port. Basic idea comes <a href=\"https://stackoverflow.com/a/29460716/26510\">from this answer</a></p>\n<p>e.g.</p>\n<pre><code># test if host and port can be opened from java\n$ test_host_and_port myhost 443\n</code></pre>\n<h3>test_host_and_port</h3>\n<pre><code>#!/usr/bin/java --source 11\nimport java.net.InetAddress;\nimport java.net.Socket;\n\npublic class PingExample {\n  public static void main(String[] args){\n    try{\n      boolean result = serverListening(args[0], Integer.valueOf(args[1]));\n\n      System.out.println(&quot;Is host reachable? &quot; + args[0] + &quot;, &quot; + result);\n    } catch (Exception e){\n      e.printStackTrace();\n    }\n  }\n  \n  public static boolean serverListening(String host, int port)\n  {\n    Socket s = null;\n    try\n    {\n      s = new Socket(host, port);\n      return true;\n    }\n    catch (Exception e)\n    {\n      return false;\n    }\n    finally\n    {\n      if(s != null)\n        try {s.close();}\n      catch(Exception e){}\n    }\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":1660784,"reputation":1011,"user_id":1529128,"display_name":"Mehdi"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":300046,"favorite_count":0,"down_vote_count":1,"up_vote_count":95,"accepted_answer_id":11507829,"answer_count":17,"score":94,"last_activity_date":1686667639,"creation_date":1342448429,"question_id":11506321,"body_markdown":"I am using this part of  code to ping an ip address in java but only pinging localhost is successful and for the other hosts the program says the host is unreachable.\r\nI disabled my firewall but still having this problem\r\n\r\n    public static void main(String[] args) throws UnknownHostException, IOException {\r\n        String ipAddress = &quot;127.0.0.1&quot;;\r\n        InetAddress inet = InetAddress.getByName(ipAddress);\r\n\r\n        System.out.println(&quot;Sending Ping Request to &quot; + ipAddress);\r\n        System.out.println(inet.isReachable(5000) ? &quot;Host is reachable&quot; : &quot;Host is NOT reachable&quot;);\r\n\r\n        ipAddress = &quot;173.194.32.38&quot;;\r\n        inet = InetAddress.getByName(ipAddress);\r\n\r\n        System.out.println(&quot;Sending Ping Request to &quot; + ipAddress);\r\n        System.out.println(inet.isReachable(5000) ? &quot;Host is reachable&quot; : &quot;Host is NOT reachable&quot;);\r\n    }\r\n\r\nThe output is:\r\n\r\n&gt;Sending Ping Request to 127.0.0.1  \r\nHost is reachable  \r\nSending Ping Request to 173.194.32.38  \r\nHost is NOT reachable","title":"How to ping an IP address","body":"<p>I am using this part of  code to ping an ip address in java but only pinging localhost is successful and for the other hosts the program says the host is unreachable.\nI disabled my firewall but still having this problem</p>\n\n<pre><code>public static void main(String[] args) throws UnknownHostException, IOException {\n    String ipAddress = \"127.0.0.1\";\n    InetAddress inet = InetAddress.getByName(ipAddress);\n\n    System.out.println(\"Sending Ping Request to \" + ipAddress);\n    System.out.println(inet.isReachable(5000) ? \"Host is reachable\" : \"Host is NOT reachable\");\n\n    ipAddress = \"173.194.32.38\";\n    inet = InetAddress.getByName(ipAddress);\n\n    System.out.println(\"Sending Ping Request to \" + ipAddress);\n    System.out.println(inet.isReachable(5000) ? \"Host is reachable\" : \"Host is NOT reachable\");\n}\n</code></pre>\n\n<p>The output is:</p>\n\n<blockquote>\n  <p>Sending Ping Request to 127.0.0.1<br>\n  Host is reachable<br>\n  Sending Ping Request to 173.194.32.38<br>\n  Host is NOT reachable</p>\n</blockquote>\n"},{"tags":["java","sockets","connection","telnet"],"comments":[{"owner":{"account_id":284195,"reputation":5422,"user_id":582136,"accept_rate":100,"display_name":"Ryan Amos"},"score":0,"creation_date":1331682583,"post_id":9693913,"comment_id":12318973,"body_markdown":"How do you know that what you&#39;re getting is actually bad data? You might be getting some kind of authentication data. Could you provide us with the output? Also, what have you tried?","body":"How do you know that what you&#39;re getting is actually bad data? You might be getting some kind of authentication data. Could you provide us with the output? Also, what have you tried?"},{"owner":{"account_id":1127087,"reputation":203,"user_id":1114099,"accept_rate":79,"display_name":"itgeek25"},"score":0,"creation_date":1331735034,"post_id":9693913,"comment_id":12333142,"body_markdown":"from what I read, you are right. It is just the authenication data. My problem is that it doesn&#39;t go any further than that when I try to connect to a Windows box. The program works great with Linux and my router.","body":"from what I read, you are right. It is just the authenication data. My problem is that it doesn&#39;t go any further than that when I try to connect to a Windows box. The program works great with Linux and my router."}],"answers":[{"comments":[{"owner":{"account_id":1127087,"reputation":203,"user_id":1114099,"accept_rate":79,"display_name":"itgeek25"},"score":0,"creation_date":1331735129,"post_id":9694062,"comment_id":12333185,"body_markdown":"I did try to create a new thread and run the write and reading code in seperate processes. Still the same issue. This is what boggles my mind. I don;t get any errors or problems, it just hangs when trying to connect to windows. Telnet works on the windows machine I am trying it on.","body":"I did try to create a new thread and run the write and reading code in seperate processes. Still the same issue. This is what boggles my mind. I don;t get any errors or problems, it just hangs when trying to connect to windows. Telnet works on the windows machine I am trying it on."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1331767148,"post_id":9694062,"comment_id":12345599,"body_markdown":"@itgeek25 your code assumes that each read is a whole line. Use readLine() and be sure.","body":"@itgeek25 your code assumes that each read is a whole line. Use readLine() and be sure."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1347115488,"post_id":9694062,"comment_id":16552302,"body_markdown":"@itgeek25 Please also note that although using a separate thread is definitely required, it won&#39;t solve the &#39;random&#39; character problem.","body":"@itgeek25 Please also note that although using a separate thread is definitely required, it won&#39;t solve the &#39;random&#39; character problem."}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1331683296,"creation_date":1331683296,"answer_id":9694062,"question_id":9693913,"body_markdown":"If the &#39;random characers&#39; that you are seeing start with a 0xFF byte, they are Telnet protocol commands.\r\n\r\nBut you have another problem. Don&#39;t execute long-running or blocking operations in the event thread. Use a separate thread.","title":"Telnet Java Socket Test","body":"<p>If the 'random characers' that you are seeing start with a 0xFF byte, they are Telnet protocol commands.</p>\n\n<p>But you have another problem. Don't execute long-running or blocking operations in the event thread. Use a separate thread.</p>\n"},{"comments":[{"owner":{"account_id":1127087,"reputation":203,"user_id":1114099,"accept_rate":79,"display_name":"itgeek25"},"score":0,"creation_date":1331735280,"post_id":9694596,"comment_id":12333244,"body_markdown":"I have tried to use the Apache code on the windows box as well. Same issue, works with linux but not my windows machine. I have used someone elses application written in Java, this works great. I compared my code to theirs, which is slightly different but reads the input and output the same. Theirs works but mine doesn&#39;t. This is why I am pulling out the rest of my hair.","body":"I have tried to use the Apache code on the windows box as well. Same issue, works with linux but not my windows machine. I have used someone elses application written in Java, this works great. I compared my code to theirs, which is slightly different but reads the input and output the same. Theirs works but mine doesn&#39;t. This is why I am pulling out the rest of my hair."},{"owner":{"account_id":96769,"reputation":8248,"user_id":262852,"accept_rate":65,"display_name":"Thufir"},"score":0,"creation_date":1379145824,"post_id":9694596,"comment_id":27723767,"body_markdown":"&quot;The TelnetClient class used by itself is mostly intended for automating access to telnet resources rather than interactive use.&quot;    http://svn.apache.org/repos/asf/commons/proper/net/tags/NET_1_0_0/src/java/examples/weatherTelnet.java    not a useful library, IMHO","body":"&quot;The TelnetClient class used by itself is mostly intended for automating access to telnet resources rather than interactive use.&quot;    <a href=\"http://svn.apache.org/repos/asf/commons/proper/net/tags/NET_1_0_0/src/java/examples/weatherTelnet.java\" rel=\"nofollow noreferrer\">svn.apache.org/repos/asf/commons/proper/net/tags/NET_1_0_0/s&zwnj;&#8203;rc/&hellip;</a>    not a useful library, IMHO"}],"tags":[],"owner":{"account_id":87723,"reputation":6436,"user_id":243134,"display_name":"Tim"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1331687409,"creation_date":1331687409,"answer_id":9694596,"question_id":9693913,"body_markdown":"Telnet isn&#39;t simply a raw socket, there are control codes that get sent (in each direction) that you need to interpret.\r\n\r\nRather than trying to do that yourself you&#39;d be better off using an existing Java Telnet client library like the one in [Apache Commons Net](http://commons.apache.org/net/).","title":"Telnet Java Socket Test","body":"<p>Telnet isn't simply a raw socket, there are control codes that get sent (in each direction) that you need to interpret.</p>\n\n<p>Rather than trying to do that yourself you'd be better off using an existing Java Telnet client library like the one in <a href=\"http://commons.apache.org/net/\" rel=\"nofollow\">Apache Commons Net</a>.</p>\n"},{"comments":[{"owner":{"account_id":254234,"reputation":1640,"user_id":533497,"display_name":"Andrew Kozak"},"score":0,"creation_date":1331919995,"post_id":9741279,"comment_id":12390444,"body_markdown":"Congrats on the fix.  When you are able, please mark your answer as &#39;accepted&#39; to help others find your solution.  Cheers~","body":"Congrats on the fix.  When you are able, please mark your answer as &#39;accepted&#39; to help others find your solution.  Cheers~"}],"tags":[],"owner":{"account_id":1127087,"reputation":203,"user_id":1114099,"accept_rate":79,"display_name":"itgeek25"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1331916574,"creation_date":1331916574,"answer_id":9741279,"question_id":9693913,"body_markdown":"Thanks for everyones help. I was really trying to get this to work in Android but just was making a rough draft in straight Java app. I got the rough idea and it works. It just repeats all the characters in my StringBuilder over and over if I read the output. Not a big concern, I am not trying to display the output really anyway. Here is what I finished with. Hope this helps anyone else if needed.\r\n\r\n    public class AndroidSocket extends Activity implements OnClickListener {\r\n\r\n\tTextView text;\r\n\tEditText edit1, edit2, edit3, edit4;\r\n    private String USER = null;\r\n    private String PASS = null;\r\n    Editable server, username, password, command;\r\n    private String CMD = null;\r\n    private PrintStream writer = null;\r\n    private static BufferedReader reader = null;\r\n    private String host = null;\r\n    private int port = 23;\r\n    private TelnetClient telnet = new TelnetClient();\r\n    private InputStream in;\r\n    private PrintStream out;\r\n    StringBuffer sb;\r\n    Handler mHandler = new Handler();\r\n    int len; \r\n    \r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.main);\r\n        text = (TextView)findViewById(R.id.text);\r\n        edit1 = (EditText)findViewById(R.id.edit1);\r\n        edit2 = (EditText)findViewById(R.id.edit2);\r\n        edit3 = (EditText)findViewById(R.id.edit3);\r\n        edit4 = (EditText)findViewById(R.id.edit4);\r\n\r\n        server = edit1.getEditableText();\r\n        username = edit2.getEditableText();\r\n        password = edit3.getEditableText();\r\n        command = edit4.getEditableText();\r\n        \r\n        Button button = (Button)findViewById(R.id.button);\r\n        button.setOnClickListener(this);\r\n        text.setText(&quot;Android Socket&quot; + &quot;\\n&quot;);\r\n        }\r\n\r\n\t@Override\r\n\tpublic void onClick(View arg0) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttext.setText(&quot;Android Socket&quot; + &quot;\\n&quot;);\r\n\t\ttry {\r\n\t\t\ttelnet.connect(server.toString(), 23);\r\n\t\t\tin = telnet.getInputStream();\r\n\t\t\tout = new PrintStream(telnet.getOutputStream());\r\n\t\t\treader = new BufferedReader(new InputStreamReader(telnet.getInputStream()));\r\n\t\t\twriter = new PrintStream(telnet.getOutputStream());\r\n\t\ttelnet.setKeepAlive(true);\r\n\t\tThread mThread = new Thread(new Runnable() {\r\n\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t try {\r\n\t\t\t\t\t sb = new StringBuffer();\r\n\t\t\t\t\t //char[] buffer = new char[1024];\r\n\t\t\t\t\t\twhile (true)\r\n\t\t\t\t\t\t{ \r\n\t\t\t\t\t\t\t\tlen = in.read();\r\n\t\t\t\t\t\t\t    String s = Character.toString((char)len);\r\n\t\t\t\t\t\t\t\tsb.append( s );\r\n\t\t\t\t\t\t\t\tAndroidSocket.this.mHandler.post(new Runnable(){\r\n\r\n\t\t\t\t\t\t\t\t\t@Override\r\n\t\t\t\t\t\t\t\t\tpublic void run() {\r\n\t\t\t\t\t\t\t\t\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\t\t\t\t\t\tAndroidSocket.this.text.getText();\r\n\t\t\t\t\t\t\t\t\t\tAndroidSocket.this.text.append( sb.toString() );\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tSystem.out.println( sb );\r\n\t\t\t\t\t\t\t\tmylogin();\r\n\t\t\t\t\t\t\t\tmypass();\r\n\t\t\t\t\t\t\t\tmycommand();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (IOException e) {\r\n\t\t\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t\tmThread.start();\r\n\t\t}\r\n\t\tcatch (Exception e) {\r\n\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n         private void mycommand() throws IOException {\r\n\t        \t// TODO Auto-generated method stub\r\n\tif (sb.toString().endsWith(&quot;&gt; &quot;)) {\r\n\t\tout.println(command.toString() + &quot;\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t\tout.println(&quot;exit\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t\ttry {\r\n\t\t\tTimeUnit.SECONDS.sleep(10);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tdisconnect();\r\n\t} else\r\n\tif (sb.toString().endsWith(&quot;# &quot;)) {\r\n\t\tout.println(command.toString() + &quot;\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t\tout.println(&quot;exit\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t\ttry {\r\n\t\t\tTimeUnit.SECONDS.sleep(10);\r\n\t\t} catch (InterruptedException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\tdisconnect();\r\n\t}\r\n\t}\r\n\r\n        private void mypass() {\r\n\t\t// TODO Auto-generated method stub\r\n\tif (sb.toString().endsWith(&quot;Password: &quot;)) {\r\n\t\tout.println(password.toString() + &quot;\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t} else\r\n\tif (sb.toString().endsWith(&quot;password: &quot;)) {\r\n\t\tout.println(password.toString() + &quot;\\r\\n&quot;);\r\n\t\tout.flush();\r\n\t}\r\n\t}\r\n\r\n        private void mylogin() {\r\n\t\t// TODO Auto-generated method stub\r\n\tif (sb.toString().endsWith(&quot;login: &quot;)) {\r\n\t\tout.println(username.toString() + &quot;\\r&quot;);\r\n\t\tout.flush();\r\n\t}\r\n\t}\r\n\r\n          public void disconnect() {\r\n         try {\r\n\tin.close();\r\n\tout.close();\r\n\ttelnet.disconnect();\r\n\r\n        }\r\n        catch (Exception e) {\r\n        e.printStackTrace();\r\n        }\r\n        }\r\n        }","title":"Telnet Java Socket Test","body":"<p>Thanks for everyones help. I was really trying to get this to work in Android but just was making a rough draft in straight Java app. I got the rough idea and it works. It just repeats all the characters in my StringBuilder over and over if I read the output. Not a big concern, I am not trying to display the output really anyway. Here is what I finished with. Hope this helps anyone else if needed.</p>\n\n<pre><code>public class AndroidSocket extends Activity implements OnClickListener {\n\nTextView text;\nEditText edit1, edit2, edit3, edit4;\nprivate String USER = null;\nprivate String PASS = null;\nEditable server, username, password, command;\nprivate String CMD = null;\nprivate PrintStream writer = null;\nprivate static BufferedReader reader = null;\nprivate String host = null;\nprivate int port = 23;\nprivate TelnetClient telnet = new TelnetClient();\nprivate InputStream in;\nprivate PrintStream out;\nStringBuffer sb;\nHandler mHandler = new Handler();\nint len; \n\n@Override\npublic void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.main);\n    text = (TextView)findViewById(R.id.text);\n    edit1 = (EditText)findViewById(R.id.edit1);\n    edit2 = (EditText)findViewById(R.id.edit2);\n    edit3 = (EditText)findViewById(R.id.edit3);\n    edit4 = (EditText)findViewById(R.id.edit4);\n\n    server = edit1.getEditableText();\n    username = edit2.getEditableText();\n    password = edit3.getEditableText();\n    command = edit4.getEditableText();\n\n    Button button = (Button)findViewById(R.id.button);\n    button.setOnClickListener(this);\n    text.setText(\"Android Socket\" + \"\\n\");\n    }\n\n@Override\npublic void onClick(View arg0) {\n    // TODO Auto-generated method stub\n    text.setText(\"Android Socket\" + \"\\n\");\n    try {\n        telnet.connect(server.toString(), 23);\n        in = telnet.getInputStream();\n        out = new PrintStream(telnet.getOutputStream());\n        reader = new BufferedReader(new InputStreamReader(telnet.getInputStream()));\n        writer = new PrintStream(telnet.getOutputStream());\n    telnet.setKeepAlive(true);\n    Thread mThread = new Thread(new Runnable() {\n\n        @Override\n        public void run() {\n            // TODO Auto-generated method stub\n             try {\n                 sb = new StringBuffer();\n                 //char[] buffer = new char[1024];\n                    while (true)\n                    { \n                            len = in.read();\n                            String s = Character.toString((char)len);\n                            sb.append( s );\n                            AndroidSocket.this.mHandler.post(new Runnable(){\n\n                                @Override\n                                public void run() {\n                                    // TODO Auto-generated method stub\n                                    AndroidSocket.this.text.getText();\n                                    AndroidSocket.this.text.append( sb.toString() );\n                                }\n\n                            });\n                            System.out.println( sb );\n                            mylogin();\n                            mypass();\n                            mycommand();\n                        }\n                } catch (IOException e) {\n                    // TODO Auto-generated catch block\n                    e.printStackTrace();\n                }\n        }\n\n    });\n    mThread.start();\n    }\n    catch (Exception e) {\n    e.printStackTrace();\n    }\n}\n\n     private void mycommand() throws IOException {\n            // TODO Auto-generated method stub\nif (sb.toString().endsWith(\"&gt; \")) {\n    out.println(command.toString() + \"\\r\\n\");\n    out.flush();\n    out.println(\"exit\\r\\n\");\n    out.flush();\n    try {\n        TimeUnit.SECONDS.sleep(10);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    disconnect();\n} else\nif (sb.toString().endsWith(\"# \")) {\n    out.println(command.toString() + \"\\r\\n\");\n    out.flush();\n    out.println(\"exit\\r\\n\");\n    out.flush();\n    try {\n        TimeUnit.SECONDS.sleep(10);\n    } catch (InterruptedException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n    disconnect();\n}\n}\n\n    private void mypass() {\n    // TODO Auto-generated method stub\nif (sb.toString().endsWith(\"Password: \")) {\n    out.println(password.toString() + \"\\r\\n\");\n    out.flush();\n} else\nif (sb.toString().endsWith(\"password: \")) {\n    out.println(password.toString() + \"\\r\\n\");\n    out.flush();\n}\n}\n\n    private void mylogin() {\n    // TODO Auto-generated method stub\nif (sb.toString().endsWith(\"login: \")) {\n    out.println(username.toString() + \"\\r\");\n    out.flush();\n}\n}\n\n      public void disconnect() {\n     try {\nin.close();\nout.close();\ntelnet.disconnect();\n\n    }\n    catch (Exception e) {\n    e.printStackTrace();\n    }\n    }\n    }\n</code></pre>\n"}],"owner":{"account_id":1127087,"reputation":203,"user_id":1114099,"accept_rate":79,"display_name":"itgeek25"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":15454,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":9741279,"answer_count":3,"score":3,"last_activity_date":1686667545,"creation_date":1331682343,"question_id":9693913,"body_markdown":"I am in need of some direction. Not sure if I am on the right path but I think so. I am trying to create a telnet java program that will connect to a client machine, execute a single command then disconnect. I am able to get the program to work and readout the InputStream to a Text field ( for testing purposes) when I connect to a linux machine or my router. But when I connect to a Windows machine or other client computer, it doens&#39;t work. It reads out some random characters, then locks up.\r\n\r\nBelow is my code. I have seen examples of other code out there as well as API&#39;s from Apache for example. I would really like to see if I can get this to work with just Java Sockets.\r\n\r\n        public class TestSockets extends JFrame implements ActionListener {\r\n\r\n\t/**\r\n\t * @param args\r\n\t */\r\n    private String USER = &quot;User&quot;;\r\n    private String PASS = &quot;Password01&quot;;\r\n    private final static String CMD = &quot;exit\\r\\n&quot;;\r\n    private static Socket telnet = null;\r\n    private PrintWriter writer = null;\r\n    private static InputStream reader = null;\r\n    private String host = &quot;192.168.1.1&quot;;\r\n    private int port = 23;\r\n    TextArea javatext;\r\n    \r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tnew TestSockets().setVisible(true);\r\n\t}\r\n\t\r\n\tprivate TestSockets() {\r\n\t\tsuper(&quot;Testing Buttons&quot;);\r\n\t\t\r\n\t\t//Set JFrame size\r\n\t\tsetSize(500, 600);\r\n\t\t\r\n\t\t//Gives JFrame a location\r\n\t\tsetLocation(100, 100);\r\n\t\t\r\n\t\t//set layout\r\n\t\tsetLayout(new FlowLayout());\r\n\t\t\r\n\t\tjavatext = new TextArea(25, 65);\r\n\t\t\r\n\t\tadd(javatext);\r\n\t\t\r\n\t\t//Ask for window decorations provided by the look and feel.\r\n\t\tJFrame.setDefaultLookAndFeelDecorated(true);\r\n\t\tJButton button3 = new JButton(&quot;Run Program&quot;);\r\n\t\tbutton3.addActionListener(this);\r\n\t\tadd(button3);\r\n\t}\r\n\r\n\t@Override\r\n\tpublic void actionPerformed(ActionEvent arg0) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\ttry {\r\n\t\t\ttelnet = new Socket(host, port);\r\n\t\t\ttelnet.setKeepAlive(true);\r\n\t\t\t//reader = telnet.getInputStream();\r\n\t        writer = new PrintWriter(telnet.getOutputStream());\r\n\t        reader = telnet.getInputStream();\r\n\t        //out = telnet.getOutputStream();\r\n        \t//Process p = Runtime.getRuntime().exec(&quot;telnet &quot; + server.toString(), null, null);\r\n\t\t\t//DataOutputStream os = new DataOutputStream(p.getOutputStream());\r\n\t\t\t//DataInputStream in = new DataInputStream(p.getInputStream());\r\n\r\n\t        StringBuilder sb = new StringBuilder();\r\n\t        byte[] buffer = new byte[4096]; // Read 4K characters at a time\r\n\t\t    int len; // How many chars read each time\r\n\t\t      while ((len = reader.read(buffer)) != -1) {\r\n\t\t    \t String readchar = new String(buffer, 0, len);\r\n\t\t\t\t sb.append(readchar + &quot;\\n&quot;);\r\n\t\t\t\t System.out.println(readchar);\r\n\t\t\t\t javatext.append(readchar);\r\n\t\t\t\t if (readchar.endsWith(&quot;login: &quot;)) {\r\n\t\t\t\t\t writer.print(USER + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t writer.flush();\r\n\t\t\t\t }\r\n\t\t\t\t if (readchar.endsWith(&quot;Password: &quot;)) {\r\n\t\t\t\t\t writer.print(PASS + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t writer.flush();\r\n\t\t\t\t }\r\n\t\t\t\t if (readchar.endsWith(&quot;password: &quot;)) {\r\n\t\t\t\t\t writer.print(PASS + &quot;\\r\\n&quot;);\r\n\t\t\t\t\t writer.flush();\r\n\t\t\t\t }\r\n\t\t\t\t if (readchar.endsWith(&quot;# &quot;)) {\r\n\t\t\t\t\t writer.print(CMD);\r\n\t\t\t\t\t writer.flush();\r\n\t\t\t\t }\r\n\t\t\t\t if (readchar.endsWith(&quot;# &quot;)) {\r\n\t\t\t\t\t writer.print(CMD);\r\n\t\t\t\t\t writer.flush();\r\n\t\t\t\t }\r\n\t\t\t\t\r\n\t\t\t }\t \t\t\r\n\t} catch (SocketException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\t\r\n\t} catch (IOException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\t}\r\n\r\n        }\r\n","title":"Telnet Java Socket Test","body":"<p>I am in need of some direction. Not sure if I am on the right path but I think so. I am trying to create a telnet java program that will connect to a client machine, execute a single command then disconnect. I am able to get the program to work and readout the InputStream to a Text field ( for testing purposes) when I connect to a linux machine or my router. But when I connect to a Windows machine or other client computer, it doens't work. It reads out some random characters, then locks up.</p>\n\n<p>Below is my code. I have seen examples of other code out there as well as API's from Apache for example. I would really like to see if I can get this to work with just Java Sockets.</p>\n\n<pre><code>    public class TestSockets extends JFrame implements ActionListener {\n\n/**\n * @param args\n */\nprivate String USER = \"User\";\nprivate String PASS = \"Password01\";\nprivate final static String CMD = \"exit\\r\\n\";\nprivate static Socket telnet = null;\nprivate PrintWriter writer = null;\nprivate static InputStream reader = null;\nprivate String host = \"192.168.1.1\";\nprivate int port = 23;\nTextArea javatext;\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    new TestSockets().setVisible(true);\n}\n\nprivate TestSockets() {\n    super(\"Testing Buttons\");\n\n    //Set JFrame size\n    setSize(500, 600);\n\n    //Gives JFrame a location\n    setLocation(100, 100);\n\n    //set layout\n    setLayout(new FlowLayout());\n\n    javatext = new TextArea(25, 65);\n\n    add(javatext);\n\n    //Ask for window decorations provided by the look and feel.\n    JFrame.setDefaultLookAndFeelDecorated(true);\n    JButton button3 = new JButton(\"Run Program\");\n    button3.addActionListener(this);\n    add(button3);\n}\n\n@Override\npublic void actionPerformed(ActionEvent arg0) {\n    // TODO Auto-generated method stub\n    try {\n        telnet = new Socket(host, port);\n        telnet.setKeepAlive(true);\n        //reader = telnet.getInputStream();\n        writer = new PrintWriter(telnet.getOutputStream());\n        reader = telnet.getInputStream();\n        //out = telnet.getOutputStream();\n        //Process p = Runtime.getRuntime().exec(\"telnet \" + server.toString(), null, null);\n        //DataOutputStream os = new DataOutputStream(p.getOutputStream());\n        //DataInputStream in = new DataInputStream(p.getInputStream());\n\n        StringBuilder sb = new StringBuilder();\n        byte[] buffer = new byte[4096]; // Read 4K characters at a time\n        int len; // How many chars read each time\n          while ((len = reader.read(buffer)) != -1) {\n             String readchar = new String(buffer, 0, len);\n             sb.append(readchar + \"\\n\");\n             System.out.println(readchar);\n             javatext.append(readchar);\n             if (readchar.endsWith(\"login: \")) {\n                 writer.print(USER + \"\\r\\n\");\n                 writer.flush();\n             }\n             if (readchar.endsWith(\"Password: \")) {\n                 writer.print(PASS + \"\\r\\n\");\n                 writer.flush();\n             }\n             if (readchar.endsWith(\"password: \")) {\n                 writer.print(PASS + \"\\r\\n\");\n                 writer.flush();\n             }\n             if (readchar.endsWith(\"# \")) {\n                 writer.print(CMD);\n                 writer.flush();\n             }\n             if (readchar.endsWith(\"# \")) {\n                 writer.print(CMD);\n                 writer.flush();\n             }\n\n         }          \n} catch (SocketException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();    \n} catch (IOException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n}\n\n    }\n</code></pre>\n"},{"tags":["java","arrays","collections","arraylist"],"comments":[{"owner":{"account_id":266709,"reputation":11856,"user_id":554431,"display_name":"bestsss"},"score":5,"creation_date":1299145345,"post_id":5178854,"comment_id":5818435,"body_markdown":"`for(doule d : doubleArray) arrayList.add(d);`","body":"<code>for(doule d : doubleArray) arrayList.add(d);</code>"}],"answers":[{"tags":[],"owner":{"account_id":70258,"reputation":590444,"user_id":203907,"accept_rate":81,"display_name":"Bozho"},"comment_count":0,"down_vote_count":1,"up_vote_count":42,"is_accepted":true,"score":41,"last_activity_date":1299145096,"creation_date":1299145096,"answer_id":5178920,"question_id":5178854,"body_markdown":"Alas, `Arrays.asList(..)` doesn&#39;t work with primitives. Apache commons-lang has \r\n\r\n    Double[] doubleArray = ArrayUtils.toObject(durationValueArray);\r\n    List&lt;Double&gt; list = Arrays.asList(doubleArray);","title":"Convert a double array to Double ArrayList","body":"<p>Alas, <code>Arrays.asList(..)</code> doesn't work with primitives. Apache commons-lang has </p>\n\n<pre><code>Double[] doubleArray = ArrayUtils.toObject(durationValueArray);\nList&lt;Double&gt; list = Arrays.asList(doubleArray);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2538149,"reputation":524,"user_id":2204672,"accept_rate":71,"display_name":"JAVA"},"score":0,"creation_date":1379335840,"post_id":5178953,"comment_id":27773753,"body_markdown":"What is varargs method? and how the two calls are equivalent?","body":"What is varargs method? and how the two calls are equivalent?"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":0,"creation_date":1379402843,"post_id":5178953,"comment_id":27800986,"body_markdown":"@sunny the mechanism is described here: [Java Tutorial: Arbitrary Number of Arguments](http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html#varargs). The key phrase is &quot;It&#39;s a shortcut to creating an array manually&quot;","body":"@sunny the mechanism is described here: <a href=\"http://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html#varargs\" rel=\"nofollow noreferrer\">Java Tutorial: Arbitrary Number of Arguments</a>. The key phrase is &quot;It&#39;s a shortcut to creating an array manually&quot;"},{"owner":{"account_id":2622630,"reputation":4796,"user_id":2270340,"accept_rate":67,"display_name":"Sayan Pal"},"score":0,"creation_date":1487281354,"post_id":5178953,"comment_id":71727115,"body_markdown":"It seems that the list returned by `Doubles.asList(double... backingArray)`, does not allow any changes, such as adding elements to the list using `add` or `addAll`. Updated link to doc: https://google.github.io/guava/releases/19.0/api/docs/index.html?com/google/common/primitives/Doubles.html","body":"It seems that the list returned by <code>Doubles.asList(double... backingArray)</code>, does not allow any changes, such as adding elements to the list using <code>add</code> or <code>addAll</code>. Updated link to doc: <a href=\"https://google.github.io/guava/releases/19.0/api/docs/index.html?com/google/common/primitives/Doubles.html\" rel=\"nofollow noreferrer\">google.github.io/guava/releases/19.0/api/docs/index.html?com&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"score":1,"creation_date":1487321579,"post_id":5178953,"comment_id":71741906,"body_markdown":"@SayanPal yes, by design. that&#39;s actually what these Lists have in common with those created by the standard library&#39;s `Arrays.asList(elements)`. If you need to add elements, copy the list to an ArrayList or LinkedList: `new ArrayList&lt;&gt;(Doubles.asList(1.0d, 2.0d))`","body":"@SayanPal yes, by design. that&#39;s actually what these Lists have in common with those created by the standard library&#39;s <code>Arrays.asList(elements)</code>. If you need to add elements, copy the list to an ArrayList or LinkedList: <code>new ArrayList&lt;&gt;(Doubles.asList(1.0d, 2.0d))</code>"}],"tags":[],"owner":{"account_id":138128,"reputation":294236,"user_id":342852,"accept_rate":97,"display_name":"Sean Patrick Floyd"},"comment_count":4,"down_vote_count":0,"up_vote_count":23,"is_accepted":false,"score":23,"last_activity_date":1379403793,"creation_date":1299145294,"answer_id":5178953,"question_id":5178854,"body_markdown":"[Guava][1]&#39;s version is even shorter:\r\n\r\n    List&lt;Double&gt; list = Doubles.asList(doubleArray);\r\n\r\n**Reference:**\r\n\r\n- [`Doubles.asList(double ...)`][2]\r\n\r\n**Note:** This is a varargs method. All varargs methods can be called using an array of the same type (but not of the corresponding boxed / unboxed type!!). These two calls are equivalent:\r\n\r\n    Doubles.asList(new double[]{1d,2d});\r\n    Doubles.asList(1d,2d);\r\n\r\n  [1]: http://code.google.com/p/guava-libraries/\r\n  [2]: http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/primitives/Doubles.html#asList%28double...%29\r\n\r\nAlso, the Guava version doesn&#39;t do a full traverse, it&#39;s a live List view of the primitive array, converting primitives to Objects only when they are accessed.","title":"Convert a double array to Double ArrayList","body":"<p><a href=\"http://code.google.com/p/guava-libraries/\" rel=\"noreferrer\">Guava</a>'s version is even shorter:</p>\n\n<pre><code>List&lt;Double&gt; list = Doubles.asList(doubleArray);\n</code></pre>\n\n<p><strong>Reference:</strong></p>\n\n<ul>\n<li><a href=\"http://guava-libraries.googlecode.com/svn/tags/release08/javadoc/com/google/common/primitives/Doubles.html#asList%28double...%29\" rel=\"noreferrer\"><code>Doubles.asList(double ...)</code></a></li>\n</ul>\n\n<p><strong>Note:</strong> This is a varargs method. All varargs methods can be called using an array of the same type (but not of the corresponding boxed / unboxed type!!). These two calls are equivalent:</p>\n\n<pre><code>Doubles.asList(new double[]{1d,2d});\nDoubles.asList(1d,2d);\n</code></pre>\n\n<p>Also, the Guava version doesn't do a full traverse, it's a live List view of the primitive array, converting primitives to Objects only when they are accessed.</p>\n"},{"tags":[],"owner":{"account_id":1425410,"reputation":1064,"user_id":1349074,"display_name":"matt2000"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1456438685,"creation_date":1456438685,"answer_id":35639516,"question_id":5178854,"body_markdown":"Credit to bestsss for the comment which should be the answer:\r\n\r\n    ArrayList&lt;Double&gt; firstValueList = new ArrayList&lt;Double&gt;();\r\n    for(double d : firstValueArray) firstValueList.add(d);","title":"Convert a double array to Double ArrayList","body":"<p>Credit to bestsss for the comment which should be the answer:</p>\n\n<pre><code>ArrayList&lt;Double&gt; firstValueList = new ArrayList&lt;Double&gt;();\nfor(double d : firstValueArray) firstValueList.add(d);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"comment_count":0,"down_vote_count":0,"up_vote_count":34,"is_accepted":false,"score":34,"last_activity_date":1686666731,"creation_date":1465590550,"answer_id":37756716,"question_id":5178854,"body_markdown":"Using Java 8 Streams API this is achieved with \r\n\r\n    DoubleStream.of(doublesArray).boxed().collect(Collectors.toList());\r\n\r\nSince java 16 this became a bit more concise:\r\n\r\n    DoubleStream.of(doublesArray).boxed().toList();\r\n\r\nIf returning an `ArrayList` as an implementation is required then use\r\n\r\n    DoubleStream.of(doublesArray).boxed().collect(Collectors.toCollection(ArrayList::new));\r\n\r\nThis one-liner doesn&#39;t require any additional libraries.","title":"Convert a double array to Double ArrayList","body":"<p>Using Java 8 Streams API this is achieved with</p>\n<pre><code>DoubleStream.of(doublesArray).boxed().collect(Collectors.toList());\n</code></pre>\n<p>Since java 16 this became a bit more concise:</p>\n<pre><code>DoubleStream.of(doublesArray).boxed().toList();\n</code></pre>\n<p>If returning an <code>ArrayList</code> as an implementation is required then use</p>\n<pre><code>DoubleStream.of(doublesArray).boxed().collect(Collectors.toCollection(ArrayList::new));\n</code></pre>\n<p>This one-liner doesn't require any additional libraries.</p>\n"},{"comments":[{"owner":{"account_id":1580843,"reputation":13479,"user_id":1466267,"accept_rate":91,"display_name":"SpaceTrucker"},"score":0,"creation_date":1563364516,"post_id":52725939,"comment_id":100673696,"body_markdown":"This doesn&#39;t seem to be a valid answer for Java 7. `java.util.stream.DoubleStream` and `java.util.function.Supplier` were introduced in 1.8.","body":"This doesn&#39;t seem to be a valid answer for Java 7. <code>java.util.stream.DoubleStream</code> and <code>java.util.function.Supplier</code> were introduced in 1.8."}],"tags":[],"owner":{"account_id":14508822,"reputation":11,"user_id":10479853,"display_name":"Kaplan"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1539104265,"creation_date":1539104265,"answer_id":52725939,"question_id":5178854,"body_markdown":"…or with Java 1.7:\r\n\r\n    double[] firstValueArray = new double[] {1.0, 2.0, 3.0};\r\n    \r\n    ArrayList&lt;Double&gt; list = DoubleStream.of( firstValueArray ).boxed().collect(\r\n        Collectors.toCollection( new Supplier&lt;ArrayList&lt;Double&gt;&gt;() {\r\n          public ArrayList&lt;Double&gt; get() {\r\n            return( new ArrayList&lt;Double&gt;() );\r\n          }\r\n        } ) );\r\n\r\n","title":"Convert a double array to Double ArrayList","body":"<p>…or with Java 1.7:</p>\n\n<pre><code>double[] firstValueArray = new double[] {1.0, 2.0, 3.0};\n\nArrayList&lt;Double&gt; list = DoubleStream.of( firstValueArray ).boxed().collect(\n    Collectors.toCollection( new Supplier&lt;ArrayList&lt;Double&gt;&gt;() {\n      public ArrayList&lt;Double&gt; get() {\n        return( new ArrayList&lt;Double&gt;() );\n      }\n    } ) );\n</code></pre>\n"}],"owner":{"account_id":290279,"reputation":815,"user_id":591735,"accept_rate":60,"display_name":"gishara"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49713,"favorite_count":0,"down_vote_count":0,"up_vote_count":23,"accepted_answer_id":5178920,"answer_count":5,"score":23,"last_activity_date":1686666731,"creation_date":1299144772,"question_id":5178854,"body_markdown":"When I try to convert a double array to a Double arrayList I got the following error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.ClassCastException: [D cannot be cast to java.lang.Double\r\n\r\nBelow is my code.\r\n\r\n \r\n    double [] firstValueArray ;\r\n`ArrayList   &lt;Double&gt; firstValueList = new ArrayList (Arrays.asList(firstValueArray));`\r\n\r\n\r\n\r\nI am comparing this list with another list and assign the result to another double variable.\r\n\r\n\r\nPlease let me know the reason for this error.\r\n\r\n","title":"Convert a double array to Double ArrayList","body":"<p>When I try to convert a double array to a Double arrayList I got the following error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.ClassCastException: [D cannot be cast to java.lang.Double</p>\n</blockquote>\n\n<p>Below is my code.</p>\n\n<pre><code>double [] firstValueArray ;\n</code></pre>\n\n<p><code>ArrayList   &lt;Double&gt; firstValueList = new ArrayList (Arrays.asList(firstValueArray));</code></p>\n\n<p>I am comparing this list with another list and assign the result to another double variable.</p>\n\n<p>Please let me know the reason for this error.</p>\n"},{"tags":["java","spring-boot","jakarta-ee"],"owner":{"account_id":19534758,"reputation":31,"user_id":14293770,"display_name":"rwd762"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1686666248,"creation_date":1686053118,"question_id":76414454,"body_markdown":"Im very new to JEE and monolithic applications.\r\nI&#39;m facing an architectural/concept problem while migrating a Java EE service to a Rest Spring Boot service. The Java EE service is part of a large monolithic business logic module.\r\nThe Goal is to incrementally migrate everything to spring boot, starting with my service.\r\n\r\nCurrently the rough scheme looks like this:\r\n 1. The function handling the logic of the service is invoked from yet another service. Lets say Service A invokes a function foo(param)  from service B\r\n 2. The Service B then stores the param in a csv and additionally returns the file using new File(name) \r\n\r\nAll of that is part of a batchProcess that is used for fileExports.\r\n\r\nMy current idea looks as follows:\r\n1. In class A replace the invokation of B.foo(param) with a REST call. maybe not directly but through some service that implements a method to call the endpoint.\r\n2. I would have my new Spring Service as a module to the current monolith. It would have regular endpoints to receive that param throug a POST call. Afterwards I would simply store it in a csv\r\n\r\nThats it.\r\n\r\nMy question for developing a high level concept of how to implement that would be:\r\n 1. Is the current JEE class A, that invokes the method of service class B a good place to add a call to a REST endpoint?\r\nMy idea behind this is: Since I want to replace the rgular invokation of B.foo(param), I would rather make a  POST call to the REST endpoint, pass the param, and the Spring Boot services takes it and puts it in csv\r\n 2. What about dependencies? my current service class B has a couple of dependencies injected through @Inject. Is there anything apart from replacing @Inject with @Autowire, that I need to take care of?\r\n\r\n\r\n\r\nWhat are your thoughts on this?","title":"Migrate Java EE service to Spring Boot Rest service","body":"<p>Im very new to JEE and monolithic applications.\nI'm facing an architectural/concept problem while migrating a Java EE service to a Rest Spring Boot service. The Java EE service is part of a large monolithic business logic module.\nThe Goal is to incrementally migrate everything to spring boot, starting with my service.</p>\n<p>Currently the rough scheme looks like this:</p>\n<ol>\n<li>The function handling the logic of the service is invoked from yet another service. Lets say Service A invokes a function foo(param)  from service B</li>\n<li>The Service B then stores the param in a csv and additionally returns the file using new File(name)</li>\n</ol>\n<p>All of that is part of a batchProcess that is used for fileExports.</p>\n<p>My current idea looks as follows:</p>\n<ol>\n<li>In class A replace the invokation of B.foo(param) with a REST call. maybe not directly but through some service that implements a method to call the endpoint.</li>\n<li>I would have my new Spring Service as a module to the current monolith. It would have regular endpoints to receive that param throug a POST call. Afterwards I would simply store it in a csv</li>\n</ol>\n<p>Thats it.</p>\n<p>My question for developing a high level concept of how to implement that would be:</p>\n<ol>\n<li>Is the current JEE class A, that invokes the method of service class B a good place to add a call to a REST endpoint?\nMy idea behind this is: Since I want to replace the rgular invokation of B.foo(param), I would rather make a  POST call to the REST endpoint, pass the param, and the Spring Boot services takes it and puts it in csv</li>\n<li>What about dependencies? my current service class B has a couple of dependencies injected through @Inject. Is there anything apart from replacing @Inject with @Autowire, that I need to take care of?</li>\n</ol>\n<p>What are your thoughts on this?</p>\n"},{"tags":["java","mysql","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686654948,"post_id":76464142,"comment_id":134825782,"body_markdown":"OT, but what is a &quot;sellar&quot;?","body":"OT, but what is a &quot;sellar&quot;?"},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686655233,"post_id":76464142,"comment_id":134825860,"body_markdown":"Sellars is a table having the city id. and city is having child zipcodes. city&#39;s parent is state -&gt; country @g00se","body":"Sellars is a table having the city id. and city is having child zipcodes. city&#39;s parent is state -&gt; country @g00se"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1686656784,"post_id":76464142,"comment_id":134826230,"body_markdown":"Do you mean &#39;seller&#39;?","body":"Do you mean &#39;seller&#39;?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1686658954,"post_id":76464142,"comment_id":134826707,"body_markdown":"The fields are `@Transient` thus they are ignored, regardless of the fact if they are in the result or not. Create a DTO and map the result to that instead of your entity.","body":"The fields are <code>@Transient</code> thus they are ignored, regardless of the fact if they are in the result or not. Create a DTO and map the result to that instead of your entity."},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686678813,"post_id":76464142,"comment_id":134831381,"body_markdown":"@M.Deinum I have created the DTO class. still it is null as sellars don&#39;t have those country,state fields. I have added those country ,state, city in DTO class","body":"@M.Deinum I have created the DTO class. still it is null as sellars don&#39;t have those country,state fields. I have added those country ,state, city in DTO class"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1686678887,"post_id":76464142,"comment_id":134831400,"body_markdown":"You need to put the DTO in the query and let JPA create it, you shouldn&#39;t use the entity to map to a dto.","body":"You need to put the DTO in the query and let JPA create it, you shouldn&#39;t use the entity to map to a dto."},{"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"score":0,"creation_date":1686679464,"post_id":76464142,"comment_id":134831489,"body_markdown":"@M.Deinum let me give a try","body":"@M.Deinum let me give a try"}],"answers":[{"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686662716,"creation_date":1686662716,"answer_id":76465449,"question_id":76464142,"body_markdown":"As your attributes are annotated with `@Transient` they will not be handled by Hibernate and are therefore null","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p>As your attributes are annotated with <code>@Transient</code> they will not be handled by Hibernate and are therefore null</p>\n"},{"tags":[],"owner":{"account_id":28780885,"reputation":11,"user_id":22042536,"display_name":"parad0X"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1686665974,"creation_date":1686665919,"answer_id":76465905,"question_id":76464142,"body_markdown":"```@Transient``` annotation is used to mark a field to be transient for the mapping framework, which means the field marked with ```@Transient``` is ignored by mapping framework and the field not mapped to any database column (in RDBMS) or Document property (in NOSQL). Thus the property will not be persisted to data store.\r\n\r\nSource: https://javabydeveloper.com/using-transient-in-spring-boot-examples/","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p><code>@Transient</code> annotation is used to mark a field to be transient for the mapping framework, which means the field marked with <code>@Transient</code> is ignored by mapping framework and the field not mapped to any database column (in RDBMS) or Document property (in NOSQL). Thus the property will not be persisted to data store.</p>\n<p>Source: <a href=\"https://javabydeveloper.com/using-transient-in-spring-boot-examples/\" rel=\"nofollow noreferrer\">https://javabydeveloper.com/using-transient-in-spring-boot-examples/</a></p>\n"}],"owner":{"account_id":4399815,"reputation":686,"user_id":3585850,"accept_rate":86,"display_name":"androholic"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1686665974,"creation_date":1686653471,"question_id":76464142,"body_markdown":"I have a dependency Table Sellars which is having the City ID only. But while showing the sellars I need to show the Sellar country, state. I have written the join query it is returning rest of the sellar details except country,city and state as null. I haven&#39;t kept any relation like @manytoOne as it will also show the zipcode list under the city as there is a relation.\r\n\r\n    @Entity(name = &quot;tbl_sellars&quot;)\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class Sellars extends CommonEntity {\r\n    \t\r\n    \t@Column(name = &quot;sellarName&quot;)\r\n    \tString sellarName;\r\n    \t@JsonIgnore\r\n    \t@Column(name = &quot;fk_city_id&quot;)   // this contains the city Id\r\n    \tString fk_city_id;\r\n    \t\r\n    \t@Transient             //Kept these variable Transient as I Don&#39;t need these in Entity\r\n    \tString country;\r\n    \t@Transient\r\n    \t@JsonProperty\r\n    \tString state;\r\n    \t@Transient\r\n    \t@JsonProperty\r\n    \tString cityName;\r\n    }\r\n\r\n\r\n    @Entity(name= &quot;tbl_city&quot;)\r\n    @JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\r\n    public class City extends CommonEntity {\r\n    \t\r\n    \tString cityName;\r\n    \t\r\n    \t@ManyToOne\r\n    \t@JoinColumn(name = &quot;fk_state_id&quot;)\r\n    \tprivate State state;\r\n    \t\r\n    \t@OneToMany(cascade = CascadeType.ALL)\r\n    \t@JoinColumn(name = &quot;fk_city_id&quot;, referencedColumnName = &quot;id&quot;)\r\n    \tprivate List&lt;ZipCode&gt; zipcodes;\r\n    }\r\n\r\n    @Repository\r\n    public interface SellarsRepository extends JpaRepository&lt;Sellars, Long&gt;{\r\n    \t  @Query(value = &quot;SELECT u.*, c.country, s.state,ci.cityName&quot; +\r\n    \t  &quot; FROM tbl_sellars u&quot; + &quot; JOIN tbl_city ci ON u.fk_city_id = ci.id&quot; +\r\n    \t  &quot; JOIN tbl_state s ON ci.fk_state_id = s.id&quot; +\r\n    \t  &quot; JOIN tbl_country c ON s.fk_country_id = c.id&quot;, nativeQuery = true)\r\n    \t  List&lt;Sellars&gt; getAllSellarsWithRegion();\r\n    }\r\n\r\nJson Returned like \r\n\r\n    [\r\n      {\r\n        &quot;id&quot;: 2,\r\n        &quot;sellarName&quot;: &quot;Avik ray&quot;,\r\n        &quot;country&quot;: null,\r\n        &quot;state&quot;: null,\r\n        &quot;cityName&quot;: null\r\n      }\r\n    ]\r\n\r\n\r\n","title":"Data coming Null even when join query is having values in Spring Boot","body":"<p>I have a dependency Table Sellars which is having the City ID only. But while showing the sellars I need to show the Sellar country, state. I have written the join query it is returning rest of the sellar details except country,city and state as null. I haven't kept any relation like @manytoOne as it will also show the zipcode list under the city as there is a relation.</p>\n<pre><code>@Entity(name = &quot;tbl_sellars&quot;)\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class Sellars extends CommonEntity {\n    \n    @Column(name = &quot;sellarName&quot;)\n    String sellarName;\n    @JsonIgnore\n    @Column(name = &quot;fk_city_id&quot;)   // this contains the city Id\n    String fk_city_id;\n    \n    @Transient             //Kept these variable Transient as I Don't need these in Entity\n    String country;\n    @Transient\n    @JsonProperty\n    String state;\n    @Transient\n    @JsonProperty\n    String cityName;\n}\n\n\n@Entity(name= &quot;tbl_city&quot;)\n@JsonIdentityInfo(generator = ObjectIdGenerators.PropertyGenerator.class, property = &quot;id&quot;)\npublic class City extends CommonEntity {\n    \n    String cityName;\n    \n    @ManyToOne\n    @JoinColumn(name = &quot;fk_state_id&quot;)\n    private State state;\n    \n    @OneToMany(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;fk_city_id&quot;, referencedColumnName = &quot;id&quot;)\n    private List&lt;ZipCode&gt; zipcodes;\n}\n\n@Repository\npublic interface SellarsRepository extends JpaRepository&lt;Sellars, Long&gt;{\n      @Query(value = &quot;SELECT u.*, c.country, s.state,ci.cityName&quot; +\n      &quot; FROM tbl_sellars u&quot; + &quot; JOIN tbl_city ci ON u.fk_city_id = ci.id&quot; +\n      &quot; JOIN tbl_state s ON ci.fk_state_id = s.id&quot; +\n      &quot; JOIN tbl_country c ON s.fk_country_id = c.id&quot;, nativeQuery = true)\n      List&lt;Sellars&gt; getAllSellarsWithRegion();\n}\n</code></pre>\n<p>Json Returned like</p>\n<pre><code>[\n  {\n    &quot;id&quot;: 2,\n    &quot;sellarName&quot;: &quot;Avik ray&quot;,\n    &quot;country&quot;: null,\n    &quot;state&quot;: null,\n    &quot;cityName&quot;: null\n  }\n]\n</code></pre>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":7786,"page":373,"page_size":100}
